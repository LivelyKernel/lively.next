System.register(["kld-intersections"],function(sa,lb){var Eb;return{setters:[function(Vb){Eb=Vb.default}],execute:function(){function Vb(f,c,k){k=k||0;var d=[];if(f<=c)for(0>=k&&(k=-k||1);f<=c;f+=k)d.push(f);else for(0<=k&&(k=-k||-1);f>=c;f+=k)d.push(f);return d}function Wb(f,c){for(var k=Array(f);0<f;)k[--f]=c;return k}function qd(f,c){for(var k=Array(f);0<f;)k[--f]=c(f);return k}function Ec(f,c,k){for(var d=[],h=0;h<f.length;h++){var n=f[h];c.call(k,n)&&d.push(n)}return d}function vd(f,c){var k;
f.find(function(d,h){return k=c(d,h)});return k}function Ic(f,c){return f.filter(function(k){return!!k[c]})}function Jc(f,c,k){"string"===typeof c&&(c=new RegExp(c,"i"));return Db.filter(f,Db.filter.test.bind(c))}function Zc(f,c){return Db.filter(f,function(k,d){return!!c[d]})}function $c(f,c,k){return Db.filter(f,function(d,h){return!c.call(k,d,h)})}function Fd(f,c){return Db.filter(f,function(k){return!k[c]})}function md(f,c){return Db.filter(f,function(k){return k!==c})}function Vc(f,c){return Db.filter(f,
function(k){return-1===c.indexOf(k)})}function Ra(f,c){if(!f.length)return f;var k=[f[0]];if(c)for(c=1;c<f.length;c++){var d=f[c];d!==k[k.length]&&k.push(d)}else for(c=1;c<f.length;c++)d=f[c],-1===k.indexOf(d)&&k.push(d);return k}function tb(f,c,k){for(var d=f.slice(),h=d.length;h--;)for(var n=f[h],b=h+1;b<d.length;b++)c.call(k,n,d[b])&&d.splice(b--,1);return d}function dc(f,c){for(var k={},d=[],h=0;h<f.length;h++){var n=f[h];k[n[c]]||(k[n[c]]=!0,d.push(n))}return d}function bc(f){return Db.filter(f,
Boolean)}function Yc(f){for(var c=0,k=0,d=f.length;c<d;)f.hasOwnProperty(c)&&(f[k++]=f[c]),c++;for(;k++<d;)f.pop();return f}function Oc(f,c,k){return f.forEach(c,k)}function $b(){var f=Array.from(arguments),c=f.shift(),k="function"===typeof Db.last(f)?f.pop():function(h){return h},d=[c].concat(f).map(function(h){return Array.from(h)});return c.map(function(h,n){return k(Db.pluck(d,n),n)})}function zc(f,c){if("number"===typeof c){if(0>=c)return f;c--}return f.reduce(function(k,d){return k.concat(Array.isArray(d)?
zc(d,c):[d])},[])}function Fb(f,c,k){for(var d=[],h=0;h<f.length;h++)d.push.apply(d,c.call(k,f[h],h));return d}function Bb(f,c){return f.reduce(function(k,d){0<k.length&&k.push(c);k.push(d);return k},[])}function pc(f,c){return Db.interpose(f,c)}function Pc(f,c,k){return f.map(c,k)}function xb(f,c,k,d,h,n,b,e){return f.map(function(m){return m[c](k,d,h,n,b,e)})}function db(f,c){return f.map(function(k){return k[c]})}function Ta(f,c,k,d){return f.reduce(c,k,d)}function cb(f,c,k,d){return f.reduceRight(c,
k,d)}function la(f,c,k){return f.some(c,k)}function La(f,c,k){return f.every(c,k)}function fb(f,c){var k=f.length;if(!c||k!==c.length)return!1;for(var d=0;d<k;d++){if(f[d]&&c[d]&&f[d].equals&&c[d].equals)if(f[d].equals(c[d]))continue;else return!1;if(f[d]!=c[d])return!1}return!0}function pb(f,c){var k=f.length;if(!c||k!==c.length)return!1;for(var d=0;d<k;d++)if(!Db.objectEquals(f[d],c[d]))return!1;return!0}function Cb(f,c){if(c)for(c=1;c<f.length;c++){if(f[c-1]<f[c])return!1}else for(c=1;c<f.length;c++)if(f[c-
1]>f[c])return!1;return!0}function Wa(f,c){return f.sort(c)}function Xa(f,c,k){return Db.pluck(f.map(function(d,h){return{value:d,criteria:c.call(k,d,h)}}).sort(function(d,h){d=d.criteria;h=h.criteria;return d<h?-1:d>h?1:0}),"value")}function zb(f,c){return Db.sortBy(f,function(k){return k[c]})}function kc(f){return f.reverse()}function Tb(f){return f.slice().reverse()}function qc(f,c,k){k=k||String;return f.map(function(d){return k(d).match(c)})}function wc(f){return f[0]}function I(f){return f[f.length-
1]}function T(f,c){return Db.filter(Db.uniq(f),function(k){return-1<c.indexOf(k)})}function ta(f,c){f=f.slice();for(var k=0;k<c.length;k++){var d=c[k];-1===f.indexOf(d)&&f.push(d)}return f}function Ca(f,c,k){f.splice(k,0,c)}function Mb(f,c){f.splice(c,1)}function vb(f,c){var k=f.indexOf(c);0<=k&&Db.removeAt(f,k);return c}function Ia(f,c){f.push.apply(f,c);return f}function Qb(f,c,k){f.splice.apply(f,[k,0].concat(c))}function Kc(f,c){f.includes(c)||f.push(c)}function Rc(f,c,k){f.splice(k,1,c)}function xc(f){f.length=
0;return f}function Fa(f,c){for(var k=0;k<f.length;k++)if(!c.includes(f[k]))return!1;return!0}function nc(f,c,k,d){k=k||Db.NullFunction;d=d||Db.GLOBAL;c=c||function(h,n,b){n.call(d,h,b)};return f.reduceRight(function(h,n,b){return function(){c.call(d,h,n,b)}},k)()}function $a(f,c,k,d,h,n){d=d||function(){};return f.clone().reverse().reduce(function(b,e,m){return function(){c.call(h||Db.GLOBAL,e,m);n&&0!==m%n?b():b.delay(k)}},d)()}function Pa(){var f=Array.from(arguments),c=f.shift(),k=c.length,d=
!1;if(1===f.length){var h=f[0].progressBar;var n=f[0].iterator;var b=f[0].labelFunction;var e=f[0].whenDone;var m=f[0].context}else h=f[0],n=f[1],b=f[2],e=f[3],m=f[4];m||(m="undefined"!==typeof window?window:global);b||(b=function(a){return a});h||(d=!0,h=(f=("undefined"!==typeof window?window:global).lively&&lively.morphic&&lively.morphic.World.current())?f.addProgressBar():{value:null,label:null,remove:function(){}});h.value=0;c.reduceRight(function(a,g,l){return function(){try{h.value=l/k,b&&(h.label=
b.call(m,g,l)),n.call(m,g,l)}catch(q){console.error("Error in forEachShowingProgress at %s (%s)\n%s\n%s",l,g,q,q.stack)}Db.delay(a,0)}},function(){h.value=1;d&&function(){h.remove()}.delay(0);e&&e.call(m)})();return c}function Oa(f,c,k){0>c&&(c=f.length+c);0>k&&(k=f.length+k);var d=f[c];f[c]=f[k];f[k]=d;return f}function Kb(f,c){c=c||1;return f.slice(c).concat(f.slice(0,c))}function Ib(f,c,k){return Db.Group.fromArray(f,c,k)}function cd(f,c){return Db.groupBy(f,function(k){return k[c]})}function Od(f,
c,k){c=c||function(n){return n};var d=[],h=[];f.forEach(function(n,b){(c.call(k,n,b)?d:h).push(n)});return[d,h]}function Zd(f,c,k){function d(n,b){if(!b.length)return[n,[]];var e=b[0];b=b.slice(1);var m=n.concat([e]);if(c.call(k,m))return d(m,b);n=d(n,b);return[n[0],[e].concat(n[1])]}function h(n,b){if(!b.length)return n;b=d([],b);if(!b[0].length)throw Error("Batchify constrained does not ensure consumption of at least one item per batch!");return h(n.concat([b[0]]),b[1])}return h([],f)}function Te(f,
c){c=c||1;return Db.range(0,Math.ceil(f.length/c)-1).map(function(k){return f.slice(k*c,k*c+c)},f)}function Qc(f,c){for(var k=f.map(function(b,e){return b[c[e]]}),d=c.slice(),h=f.length;h--;0<=h){var n=d[h]+1;if(f[h][n]){d[h]=n;break}else if(0===h){d=void 0;break}else d[h]=0}return[k,d]}function Xd(f){for(var c=f.reduce(function(n,b){return n*b.length},1),k=f.map(function(n){return 0}),d=Array(c),h=0;h<c;h++)k=Db.combinationsPick(f,k),d[h]=k[0],k=k[1];return d}function kd(f,c){return f.slice(0,c)}
function Ab(f,c){return f.slice(c)}function da(f,c,k){for(var d=0;d<f.length&&c.call(k,f[d],d);d++);return f.slice(0,d)}function qa(f,c,k){for(var d=0;d<f.length&&c.call(k,f[d],d);d++);return f.slice(d)}function ub(f){for(var c=Db.range(0,f.length-1),k=Array(f.length),d=0;d<f.length;d++){var h=c.splice(Math.round(Math.random()*(c.length-1)),1);k[h]=f[d]}return k}function H(f,c,k){c=c||function(h){return h};var d;f.reduce(function(h,n,b){b=c.call(k,n,b);if("number"!==typeof b||b<=h)return h;d=n;return b},
-Infinity);return d}function ia(f,c,k){c=c||function(d){return d};return Db.max(f,function(d,h){return-c.call(k,d,h)})}function Ba(f){for(var c=0,k=0;k<f.length;k++)c+=f[k];return c}function rb(f,c){return f.reduce(function(k,d){return d===c?k+1:k},0)}function sc(f){return f.length}function yc(f,c){if("undefined"===typeof c||"number"===typeof c){var k=c||Math.ceil(Math.log(f.length)/Math.log(2)+1),d=Math.ceil(Math.round(f.length/k));return Db.range(0,k-1).map(function(h){return f.slice(h*d,(h+1)*
d)})}if(c instanceof Array)return f.reduce(function(h,n){if(n<c[1])return h[0].push(n),h;for(var b=1;b<c.length;b++)if(n>=c[b]&&(!c[b+1]||n<=c[b+1]))return h[b].push(n),h;throw Error("Histogram creation: Cannot group data "+n+" into thresholds "+c);},Db.range(1,c.length).map(function(){return[]}))}function Gd(f){return[].concat(f)}function Ld(f){return Db.from(f)}function Ke(f,c,k){return f.forEach(c,k)}function id(f,c,k){return f.every(c,k)}function Md(f,c,k){return f.some(c,k)}function ze(f,c,k){return f.map(c,
k)}function Ne(f,c,k){return Db.filter(f,c,k)}function yf(f,c,k,d){d&&(k=k.bind(d));return f.reduce(k,c)}function tf(f,c,k){function d(b,e){if(!n&&(b||e)){n=!0;try{k(b,h)}catch(m){console.error("Error in mapAsyncSeries - callback invocation error:\n"+(m.stack||m))}}}var h=[],n=!1;return f.reduceRight(function(b,e,m){if(!n)return function(a,g){if(a)return d(a);0<m&&h.push(g);try{c(e,m,Db.once(b))}catch(l){d(l)}}},function(b,e){h.push(e);d(b,!0)})()}function vc(f,c,k,d){function h(){for(;g<c.parallel&&
a<f.length;)l[a++]()}function n(q,r){if(!(-1<e.indexOf(q)||(e.push(q),g--,m)))if(!r&&e.length<f.length)h();else{m=!0;try{d&&d(r,b)}catch(u){console.error("Error in mapAsync - main callback invocation error:\n"+(u.stack||u))}}}"function"===typeof c&&(d=k,k=c,c=null);c=c||{};if(!f.length)return d&&d(null,[]);c.parallel||(c.parallel=Infinity);var b=[],e=[],m=!1,a=0,g=0,l=f.map(function(q,r){return function(){g++;try{k(q,r,Db.once(function(u,v){b[r]=u||v;n(r,u)}))}catch(u){n(r,u)}}});return h()}function Fe(){return function(){}}
function mf(){return function(f){return f}}function Jf(){return function(){return null}}function ye(){return function(){return!1}}function va(){return function(){return!0}}function Ka(){return function(){throw Error("Not yet implemented");}}function sb(f){var c=[],k;for(k in f)f.__lookupGetter__(k)||"function"!==typeof f[k]||c.push(k);return c}function Q(f){var c=[],k;for(k in f)!f.__lookupGetter__(k)&&f.hasOwnProperty(k)&&"function"===typeof f[k]&&c.push(k);return c}function ua(f){if(f.superclass)return[];
var c=f.toString();f="";var k=c.match(/(?:\(([^\)]*)\)|([^\(\)-+!]+))\s*=>/);k?f=k[1]||k[2]||"":(c=c.match(/^[\s\(]*function[^(]*\(([^)]*)\)/))&&c[1]&&(f=c[1]);return f.replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",").map(function(d){return d.trim()}).filter(function(d){return!!d})}function Za(f){var c="";f.declaredClass?c+=f.declaredClass+">>":f.declaredObject&&(c+=f.declaredObject+".");return c+(f.methodName||f.displayName||f.name||"anonymous")}function ib(f){f=
String(f).replace(/^function[^\{]+\{\s*/,"").replace(/\}$/,"").trim();for(var c=f.split(/\n|\r/),k=void 0,d=0;d<c.length;d++){var h=c[d].match(/^(\s+)[^\s]/);h&&(void 0===k||h[1].length<k.length)&&(k=h[1])}return k?f.replace(new RegExp("^"+k,"gm"),""):f}function oc(f){var c=Date.now();f();return Date.now()-c}function cc(f,c){for(var k=Date.now(),d=0;d<c;d++)f();return(Date.now()-k)/c}function bd(f,c){var k=Array.prototype.slice.call(arguments),d=k.shift();c=1E3*k.shift();return setTimeout(function(){return d.apply(d,
k)},c)}function Tc(f,c){var k,d,h,n,b,e,m=fd.debounce(c,function(){b=n=!1});return function(){k=this;d=arguments;h||(h=setTimeout(function(){h=null;b&&f.apply(k,d);m()},c));n?b=!0:e=f.apply(k,d);m();n=!0;return e}}function Wc(f,c,k){var d;return function(){var h=this,n=arguments;k&&!d&&c.apply(h,n);clearTimeout(d);d=setTimeout(function(){d=null;k||c.apply(h,n)},f)}}function Yd(f,c,k){var d=fd._throttledByName;return d[f]?d[f]:d[f]=fd.throttle(function(){fd.debounceNamed(f,c,function(){delete d[f]})();
k.apply(this,arguments)},c)}function Mf(f,c,k,d){var h=fd._debouncedByName;return h[f]?h[f]:h[f]=fd.debounce(c,function(){delete h[f];k.apply(this,arguments)},d)}function Bf(f,c){var k=fd._queues,d=k[f]||(k[f]={_workerActive:!1,worker:c,tasks:[],drain:null,push:function(h){d.tasks.push(h);d._workerActive||d.activateWorker()},pushAll:function(h){h.forEach(function(n){d.tasks.push(n)});d._workerActive||d.activateWorker()},pushNoActivate:function(h){d.tasks.push(h)},handleError:function(h){h&&console.error("Error in queue: "+
h)},activateWorker:function(){function h(e){d.handleError(e);d.activateWorker()}var n=d.tasks,b=d._workerActive;if(0===n.length)b&&(d._workerActive=!1,"function"===typeof d.drain&&d.drain()),delete k[f];else{b||(d._workerActive=!0);try{d.worker(n.shift(),h)}catch(e){h(e)}}}});return d}function Hg(f,c,k){function d(){a&&clearTimeout(a);e=!0;delete n[f]}function h(g){e||(d(),b.callbacks.forEach(function(l){try{l.apply(null,g)}catch(q){console.error("Error when invoking callbacks in queueUntil ["+f+
"]:\n"+String(q.stack||q))}}))}var n=fd._queueUntilCallbacks,b=n[f];if(b)return b;var e=!1,m=!1;if(k)var a=setTimeout(function(){e||h([Error("timeout")])},k);b=n[f]={callbacks:[],cancel:function(){m=!0;d()},whenDone:function(g){b.callbacks.push(g);return b}};setTimeout(function(){if(!m)try{c(function(){h(arguments)})}catch(g){h([g])}},0);return b}function df(){var f=Array.prototype.slice,c=f.call(arguments),k=fd._composeAsyncDefaultEndCallback,d=k,h,n,b=new Promise(function(e,m){h=e;n=m});return c.reverse().reduce(function(e,
m,a){var g=!1;return function(){function l(){g=!0;var u=f.call(arguments),v=u.shift();v?(d(v),n(v)):e.apply(null,u)}var q=f.call(arguments);if(d===k&&a===c.length-1){for(;q.length&&"function"!==typeof q[q.length-1];)q.pop();"function"===typeof q[q.length-1]&&(d=q.pop())}if("function"===typeof m)try{var r=m.apply(this,q.concat([l]));r&&"function"===typeof r.then&&"function"===typeof r.catch&&r.then(function(u){return l(null,u)}).catch(function(u){return l(u)})}catch(u){console.error("composeAsync: ",
u.stack||u),g||(d(u),n(u))}else m&&"function"===typeof m.then&&"function"===typeof m.catch?m.then(function(u){l(null,u)}).catch(function(u){l(u)}):(q=Error("Invalid argument to composeAsync: "+m),d(q),n(q));return b}},function(){var e=f.call(arguments);d.apply(null,[null].concat(e));h(e[0])})}function Bg(){return Array.prototype.slice.call(arguments).reverse().reduce(function(f,c){return function(){return f(c.apply(this,arguments))}},function(f){return f})}function Di(f){return function(){var c=Array.prototype.slice.call(arguments);
c=[c[1],c[0]].concat(c.slice(2));return f.apply(null,c)}}function Pg(f){f=f||function(){};return function(){var c=fd.arr.from(arguments);f.apply(null,[null].concat(c))}}function Nj(f,c,k){var d=Date.now(),h=50;k||(k=c,c=f,f=void 0);(function b(){if(c())return k();if(f){var e=Date.now()-d;e=f-e;if(0>=e)return k(Error("timeout"));e<h&&(h=e)}setTimeout(b,h)})()}function Oe(f,c,k){function d(b,e,m,a){if(n.length){var g=null;b=n.indexOf(b);-1<b&&n.splice(b,1);m?(n.length=0,g=Error("in waitForAll at"+("number"===
typeof e?" "+e:"")+": \n"+(m.stack||String(m)))):a&&(h[e]=a);n.length||setTimeout(function(){k(g,h)},0)}}k||(k=c,c=f,f=null);f=f||{};var h=c.map(function(){return null});if(c.length){var n=Array.prototype.slice.call(c);c.forEach(function(b,e){try{b(function(){var m=Array.prototype.slice.call(arguments),a=m.shift();d(b,e,a,m)})}catch(m){d(b,e,m,null)}});f.timeout&&setTimeout(function(){if(n.length){var b=h.map(function(e,m){return null===e&&m}).filter(function(e){return"number"===typeof e}).join(", ");
d(null,null,Error("waitForAll timed out, functions at "+b+" not done"),null)}},f.timeout)}else k(null,h)}function ki(f,c,k,d){function h(){return f.apply(this,n.concat(Array.prototype.slice.call(arguments)))}if(1>=arguments.length)return arguments[0];var n=Array.prototype.slice.call(arguments);f=n.shift();h.isWrapper=!0;h.originalFunction=f;return h}function Kh(f,c){var k=function(){var d=Array.prototype.slice.call(arguments);d=c.isWrapper?d:[f.bind(this)].concat(d);return c.apply(this,d)};k.isWrapper=
!0;k.originalFunction=f;return k}function be(f){for(;f.originalFunction;)f=f.originalFunction;return f}function gj(f){var c=[];do c.push(f),f=f.originalFunction;while(f);return c}function Mj(f,c,k){k.originalFunction=f[c];var d=f.hasOwnProperty(c);f[c]=function(){d?f[c]=k.originalFunction:delete f[c];return k.apply(this,arguments)};return f}function lg(f){if(f){if("function"!==typeof f)throw Error("once() expecting a function");var c=!1,k;return function(){if(c)return k;c=!0;return k=f.apply(this,
arguments)}}}function yk(){var f=!1;return Array.prototype.slice.call(arguments).map(function(c){return function(){if(!f)return f=!0,c.apply(this,arguments)}})}function Tj(f,c){var k=Array.prototype.slice.call(arguments),d=fd._eitherNameRegistry;f=k.shift();var h=d[f]||(d[f]={wasCalled:!1,callsLeft:0});h.callsLeft++;return function(){h.callsLeft--;0>=h.callsLeft&&delete d[f];if(!h.wasCalled)return h.wasCalled=!0,c.apply(this,arguments)}}function Bj(f){return eval(f)}function Bh(f){return fd.evalJS("("+
f.toString()+");")}function zf(f,c){return fd.Closure.fromFunction(f,c).recreateFunc()}function $e(f,c,k,d){var h=k||f.name;if(!h)throw Error("Function that wants to be a script needs a name: "+this);k=Object.getPrototypeOf(c);var n={"this":c};d&&(n=fd.objectMerge([n,d]));k&&k[h]&&(n.$super=fd.Closure.fromFunction(function(){try{return Object.getPrototypeOf(c)[h].apply(c,arguments)}catch(b){return"undefined"!==typeof $world?$world.logError(b,"Error in $super call"):console.error("Error in $super call: "+
b+"\n"+b.stack),null}},{obj:c,name:h}).recreateFunc());return fd.addToObject(fd.asScript(f,n),c,h)}function ll(f,c,k){f.displayName=k;var d=c.attributeConnections?c.attributeConnections.filter(function(h){return"update"===h.getSourceAttrName()}):[];d&&d.forEach(function(h){h.disconnect()});c[k]=f;typeof c&&(f.declaredObject=fd.safeToString(c));"undefined"!==typeof lively&&c&&lively.Tracing&&lively.Tracing.stackTracingEnabled&&lively.Tracing.instrumentMethod(c,k,{declaredObject:fd.safeToString(c)});
d&&d.forEach(function(h){h.connect()});return f}function Sa(f,c){return fd.Closure.fromFunction(f,c||{}).recreateFunc()}function Xc(f,c,k){f.hasLivelyClosure&&(f.livelyClosure.funcProperties[c]=k)}function Wd(f){return f.hasLivelyClosure?f.livelyClosure.varMapping:f.isWrapper?f.originalFunction.varMapping:f.varMapping?f.varMapping:{}}function Td(f,c,k){f[c]=k;f.hasLivelyClosure&&(f.livelyClosure.funcProperties[c]=k)}function Hc(f){for(var c=[],k=f.prototype;k;)c=Object.keys(k).reduce(function(d,h){"function"===
typeof k[h]&&-1===d.indexOf(h)&&d.push(h);return d},c),k=Object.getPrototypeOf(k);return c}function dg(f){return Object.keys(f.prototype).filter(function(c){return"function"===typeof f.prototype[c]})}function ji(f,c){var k=function(d){var h=Array.prototype.slice.call(arguments);h.shift();try{return d.apply(f,h)}catch(n){if("undefined"!==typeof lively&&lively.morphic&&lively.morphic.World&&lively.morphic.World.current())throw lively.morphic.World.current().logError(n),n;c?console.warn("ERROR: %s.%s(%s): err: %s %s",
f,c,h,n,n.stack||""):console.warn("ERROR: %s %s",n,n.stack||"");throw n;}};k.methodName="$logErrorsAdvice";k=fd.wrap(f,k);k.originalFunction=f;k.methodName="$logErrorsWrapper";return k}function Rk(f,c){var k=function(d){var h=Array.prototype.slice.call(arguments);h.shift();try{var n=d.apply(f,h)}catch(b){throw console.warn("failed to load "+c+": "+b),"undefined"!==typeof lively&&lively.lang.Execution&&lively.lang.Execution.showStack(),b;}console.log("completed "+c);return n};k.methodName="$logCompletionAdvice::"+
c;k=fd.wrap(f,k);k.methodName="$logCompletionWrapper::"+c;k.originalFunction=f;return k}function Cm(f,c){var k=function(h){var n=Array.prototype.slice.call(arguments);n.shift();d=h.apply(f,n);c?console.warn("%s(%s) -> %s",fd.qualifiedMethodName(f),n,d):console.log("%s(%s) -> %s",fd.qualifiedMethodName(f),n,d);return d};k.methodName="$logCallsAdvice::"+fd.qualifiedMethodName(f);var d=fd.wrap(f,k);d.originalFunction=f;d.methodName="$logCallsWrapper::"+fd.qualifiedMethodName(f);return d}function Um(f,
c){return fd.wrap(f,function(k){var d=Array.prototype.slice.call(arguments);d.shift();c.push(d);d=k.apply(f,d);c.pop();return d})}function hj(){try{throw Error();}catch(f){return String(f.stack).split(/\n/).slice(2).map(function(c){return c.replace(/^\s*at\s*([^\s]+).*/,"$1")}).join("\n")}}function Jl(f){if(f&&Array.isArray(f))return"["+f.map(Jl)+"]";if("string"!==typeof f)return String(f);f=String(f);f=f.replace(/\n/g,"\\n\\\n");f=f.replace(/(")/g,"\\$1");return'"'+f+'"'}function Pk(f){return Array.isArray(f)}
function zk(f){return f&&1==f.nodeType}function Kl(f){return f instanceof Function}function Ee(f){return"boolean"==typeof f}function Ik(f){return"string"==typeof f}function im(f){return"number"==typeof f}function ij(f){return"undefined"==typeof f}function Li(f){return f instanceof RegExp}function ck(f){return"object"==typeof f}function Hd(f){if(!f)return!0;switch(typeof f){case "string":case "number":case "boolean":return!0}return!1}function Aj(f){for(var c in f)if(f.hasOwnProperty(c))return!1;return!0}
function jj(f,c){if(f===c)return!0;if(!f||!c)return f==c;if(Array.isArray(f))return Ud.arrayDeepEquals(f,c);switch(f.constructor){case String:case Date:case Boolean:case Number:return f==c}if("function"===typeof f.isEqualNode)return f.isEqualNode(c);if("function"===typeof f.equals)return f.equals(c);var k=[],d;for(d in f)if(k.push(d),"function"!==typeof f[d]&&!jj(f[d],c[d]))return!1;for(d in c)if(-1===k.indexOf(d)&&"function"!==typeof c[d]&&!jj(c[d],f[d]))return!1;return!0}function Qk(f){return f?
Object.keys(f).map(function(c){return f[c]}):[]}function Lf(f,c){for(var k={},d=0;d<c.length;d++)k[c[d]]=f[c[d]];return k}function sg(f,c){f=f||{};f=Ud.getOwnPropertyDescriptors(f);for(var k=0;k<c.length;k++)c[k]in f&&delete f[c[k]];return Object.defineProperties({},f)}function pa(f,c,k,d){c=Ud.functionFromString(c);return Ud.asScriptOf(c,f,k,d)}function eb(f,c){for(var k=null,d=1;d<arguments.length;d++)if("string"==typeof arguments[d])k=arguments[d],f.categories||(f.categories={}),f.categories[k]||
(f.categories[k]=[]),k=f.categories[k];else{c=arguments[d];for(var h in c){var n=c.__lookupGetter__(h),b=c.__lookupSetter__(h);n&&f.__defineGetter__(h,n);b&&f.__defineSetter__(h,b);n||b||(n=c[h],f[h]=n,k&&k.push(h),"function"===typeof n&&(n.displayName||(n.displayName=h),"undefined"!==typeof lively&&lively.Module&&lively.Module.current&&(n.sourceModule=lively.Module.current())))}}return f}function nb(f){if(Ud.isPrimitive(f))return f;if(Array.isArray(f))return Array.prototype.slice.call(f);var c={},
k;for(k in f)f.hasOwnProperty(k)&&(c[k]=f[k]);return c}function ab(f,c,k){for(var d={},h=0;h<c.length;h++)c[h]in f&&(d[c[h]]=k?k(c[h],f[c[h]]):f[c[h]]);return d}function mb(f,c,k){c=c||{};k=k||0;if(c.customPrinter){var d=c._ignoreSignal||(c._ignoreSignal={}),h=c.customPrinter(f,d,function(q){return mb(q,c,k+1)});if(h!==d)return h}if(!f)return Ud.print(f);if("function"===typeof f)return c.printFunctionSource?String(f):"function"+(f.name?" "+f.name:"")+"("+Ud.argumentNames(f).join(",")+") {/*...*/}";
switch(f.constructor){case String:case Boolean:case RegExp:case Number:return Ud.print(f)}if("function"===typeof f.serializeExpr)return f.serializeExpr();var n=f&&Array.isArray(f);d=n?"[":"{";h=n?"]":"}";if(c.maxDepth&&k>=c.maxDepth)return d+"/*...*/"+h;var b=[];if(n)b=f.map(function(q){return mb(q,c,k+1)});else for(var e=Object.keys(f).sort(function(q,r){var u="function"===typeof f[q];return u===("function"===typeof f[r])?q<r?-1:q>r?1:0:u?1:-1}),m=0;m<e.length;m++){if(m>(c.maxNumberOfKeys||Infinity)){e=
e.length-m;b.push("..."+e+" hidden "+(1<e?"entries":"entry")+"...");break}var a=e[m];n&&mb(f[a],c,k+1);var g=mb(f[a],c,k+1);b.push((c.escapeKeys?JSON.stringify(a):a)+": "+g)}if(0===b.length)return d+h;e=b.join(", ");m=(!n||c.newLineInArrays)&&(!c.minLengthForNewLine||e.length>=c.minLengthForNewLine);var l=Ud.indent("",c.indent||"  ",k);a=Ud.indent("",c.indent||"  ",k+1);g=m&&!n?"\n"+a:"";n=m&&!n?"\n"+l:"";m&&(e=b.join(","+(m?"\n"+a:"")));return d+g+e+n+h}function ic(f){return 1<arguments.length?ic(Array.prototype.slice.call(arguments)):
Array.isArray(f[0])?Array.prototype.concat.apply([],f):f.reduce(function(c,k){for(var d in k)k.hasOwnProperty(d)&&(c[d]=k[d]);return c},{})}function Nc(f,c){if(!f)return c;if(!c)return f;if(Array.isArray(f)){if(!Array.isArray(c))return c;var k=f.map(function(d,h){return Nc(d,c[h])});c.length>f.length&&(k=k.concat(c.slice(f.length)));return k}return"object"!==typeof f||"object"!==typeof c?c:Object.keys(f).concat(Object.keys(c)).reduce(function(d,h){d[h]=f[h]?c[h]?"object"!==typeof f[h]||"object"!==
typeof c[h]?c[h]:Nc(f[h],c[h]):f[h]:c[h];return d},{})}function Lc(f,c){c=[];for(var k in f){var d=f[k],h=d.hasOwnProperty("before")?d.before:d.before=[];d=d.hasOwnProperty("after")?d.after:d.after=[];for(var n=h.length;n--;){var b=h[n],e=f[b];e?(e.hasOwnProperty("after")||(e.after=[]),e.after.push(k)):(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(k+" requires to be initialized before "+b+" but that property cannot be found.")),h.splice(n,1))}for(h=d.length;h--;)n=d[h],
f[n]||(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(k+" requires to be initialized after "+n+" but that property cannot be found.")),d.splice(h,1));c.push(k)}k=[];d=[];for(h=c.length+1;c.length;){if(h===c.length)throw Error("Circular dependencies in handler order, could not resolve properties "+c.map(function(m){var a=f[m].before,g=f[m].after;if(!(a&&a.length||g&&g.length))return"";m+="\n";a&&a.length&&(m+="  - before "+a.join(",")+"\n");g&&g.length&&(m+="  - after "+
g.join(",")+"\n");return m}).join(""));h=c.length;n=[];for(b=c.length;b--;)e=c[b],Ud.isSubset(f[e].after,d)&&(c.splice(b,1),d.push(e),n.push(e));k.push(n)}return Ud.flatten(k,1)}function Xb(f){return Object.create(f)}function Rb(f,c){for(var k=[];f;)f.hasOwnProperty(c)&&k.unshift(f[c]),f=Object.getPrototypeOf(f);return k}function tc(f,c){return Ud.merge(Ud.valuesInPropertyHierarchy(f,c))}function gb(f){if(!f||"object"!==typeof f||f instanceof RegExp)return f;var c=Array.isArray(f)?Array(f.length):
{},k;for(k in f)f.hasOwnProperty(k)&&(c[k]=gb(f[k]));return c}function Gc(f){return null===f?"null":"undefined"===typeof f?"undefined":f.constructor.name}function Cd(f){function c(d,h,n,b){if(d.constructor.name===h){k+=n;if(d.length||Object.keys(d).length)k+="...";k+=b}}if(!Ud.isMutableType(f))return Ud.safeToString(f);if("Object"!==f.constructor.name&&!Array.isArray(f)&&f.constructor.name)return f.constructor.name?f.constructor.name:Object.prototype.toString.call(f).split(" ")[1].split("]")[0];var k=
"";c(f,"Object","{","}");c(f,"Array","[","]");return k}function fe(f){return-1===["null","undefined","Boolean","Number","String"].indexOf(Ud.typeStringOf(f))}function rd(f){try{return(f?f.toString():String(f)).replace("\n","")}catch(c){return"<error printing object>"}}function ge(f){switch(typeof f){case "string":return new String(f);case "boolean":return new Boolean(f);case "number":return new Number(f);default:return f}}function se(f,c){c=void 0===c?"_":c;var k=1;do var d=c+"-"+k++;while(d in f);
return d}function Se(){return Bc.formatFromArray(Array.prototype.slice.call(arguments))}function Ue(f){function c(q,r){return""+q}function k(q,r){return q.toString()}function d(q,r){return Bc.inspectObject(q)}var h=f.shift();h||console.log("Error in Strings>>formatFromArray, first arg is undefined");var n={s:c,d:k,i:k,f:function(q,r,u){return-1<u?q.toFixed(u):q.toString()},o:d},b=/((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/;h=function(q){for(var r=[],u=b.exec(q);u;u=b.exec(q)){var v=
u[8]||u[5];v=v in n?n[v]:d;var y=u[3]?parseInt(u[3]):"."==u[4]?-1:0;r.push(q.substr(0,"%"==u[0][0]?u.index:u.index+1));r.push({appender:v,precision:y});q=q.substr(u.index+u[0].length)}q&&r.push(q.toString());return r}(h);for(var e="",m=0,a=0;a<h.length;++a){var g=h[a];if(g&&"object"==typeof g){var l=f[m++];e+=(g.appender||c)(l,e,g.precision)}else e+=""+g}return e}function Kf(f,c,k){if(!k||0>=k)return f;for(var d="";0<k;)k--,d+=c;return Bc.lines(f).map(function(h){return d+h}).join("\n")}function eg(f,
c){c||(c="  ");return Bc.min(f.match(new RegExp("^("+c+")*","gm")).map(function(k){return Math.floor(k.length/c.length)}))}function We(f,c,k){c||(c="  ");k||(k=0);var d=Bc.minIndent(f,c);if(d===k)return f;if(d<k)return Bc.indent(f,c,k-d);var h=c.repeat(d-k);return Bc.lines(f).map(function(n){return n.slice(h.length)}).join("\n")}function li(f){return'"'+f.replace(/"/g,'\\"')+'"'}function ca(f){if(f&&Array.isArray(f))return"["+f.map(ca)+"]";if("string"!==typeof f)return String(f);f=String(f);f=f.replace(/\n/g,
"\\n\\\n");f=f.replace(/(")/g,"\\$1");return'"'+f+'"'}function za(f,c){c=c||0;return f.reduce(function(k,d){return k+(Array.isArray(d)?za(d,c+1):Bc.indent(d+"\n","  ",c))},"")}function Ya(f,c,k){return k?" ".repeat(c)+f:f+" ".repeat(c)}function Ha(f,c){function k(e){return n?!1:b?!0:c&&Array.isArray(c.align)&&"right"===c.align[e]}var d=[],h=c&&c.separator||" ",n=!c||!c.align||"left"===c.align,b=c&&"right"===c.align;f.forEach(function(e){e.forEach(function(m,a){void 0===d[a]&&(d[a]=0);d[a]=Math.max(d[a],
String(m).length)})});return f.map(function(e){return e.map(function(m,a){m=String(m);return Bc.pad(m,d[a]-m.length,k(a))}).join(h)}).join("\n")}function Zb(f,c,k,d){function h(b,e,m){n[e]=d.repeat(b)+c(m,b);m=k(m,b);var a=e+1;if(!m||!m.length)return a;var g=a,l=m.length-1;m.forEach(function(q,r){a=h(b+1,a,q);q=l===r;var u=n[g].split(""),v=b*d.length+d.length;for(r=b*d.length+1;r<v;r++)u[r]="-";q&&(u[b*d.length]="\\");n[g]=u.join("");q||n.slice(g,a).forEach(function(y,z){y=y.split("");y[b*d.length]=
"|";n[g+z]=y.join("")});g=a});return a}var n=[];d=d||"  ";h(0,0,f);return n.join("\n")}function Ub(f){return f.split("")}function gc(f){return f.split(/\n\r?/)}function rc(f,c){var k=c?c.sep:"\n\n";return c&&c.keepEmptyLines?f.split("\n").concat("").reduce(function(d,h){var n=d[0];d=d[1];/^\s*$/.test(d)===/^\s*$/.test(h)?d+="\n"+h:(d.length&&n.push(d),d=h);return[n,d]},[[],""])[0]:f.split(new RegExp(k+"+"))}function pd(f){return Bc.lines(f).compact()}function qf(f,c){return f.split(c||/\s+/).filter(function(k){return!/^\s*$/.test(k)})}
function uf(f,c){c=c||{};var k=c.cellSplitter||/\s+/,d=/^\s*$/;c=c.hasOwnProperty("convertTypes")?!!c.convertTypes:!0;f=Bc.lines(f);for(var h=[],n=0;n<f.length;n++){var b=Bc.tokens(f[n],k);c&&(b=b.map(function(e){if(e.match(d))return e;var m=Number(e);if(!isNaN(m))return m;m=new Date(e);return isNaN(+m)?e.trim():m}));0<b.length&&h.push(b)}return h}function Wg(f){if("undefined"===typeof document)throw Error("Cannot unescapeCharacterEntities");var c=document.createElement("div");c.innerHTML=f;return c.textContent}
function bg(f,c){return(f=f.trim().match(/([^?#]*)(#.*)?$/))?f[1].split(c||"&").inject({},function(k,d){if((d=d.split("="))[0]){var h=decodeURIComponent(d.shift());d=1<d.length?d.join("="):d[0];void 0!=d&&(d=decodeURIComponent(d));h in k?(Array.isArray(k[h])||(k[h]=[k[h]]),k[h].push(d)):k[h]=d}return k}):{}}function uh(f){return btoa(encodeURIComponent(f).replace(/%([0-9A-F]{2})/g,function(c,k){return String.fromCharCode("0x"+k)}))}function Xi(f){return decodeURIComponent(atob(f).split("").map(function(c){return"%"+
("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function bk(f){var c=f.match(Bc.urlStartRe),k=(c=c?c[0]:null)?f.slice(c.length):f;do f=k,k=f.replace(Bc.pathDoubleDotRe,"");while(k!=f);k=k.replace(Bc.pathDoubleSlashRe,"$1/");k=k.replace(Bc.pathDotRe,"/");c&&(k=c+k);return k}function xn(){return Bc.normalizePath(Array.prototype.slice.call(arguments).reduce(function(f,c){return"string"===typeof c?f.replace(/\/*$/,"")+"/"+c.replace(/^\/*/,""):f}))}function Vm(){return Bc.newUUIDTemplate.replace(Bc.newUUIDRe,
Bc.newUUIDReplacer).toUpperCase()}function fo(f,c){return"data:"+(c||"text/plain")+";base64,"+Bc.base64EncodeUnicode(f)}function tr(f){var c=0,k=f.length;if(0==k)return c;for(var d=0;d<k;d++){var h=f.charCodeAt(d);c=(c<<5)-c+h;c&=c}return c}function yn(f){function c(m,a,g,l,q,r){a=b(b(a,m),b(l,r));return b(a<<q|a>>>32-q,g)}function k(m,a,g,l,q,r,u){return c(a&g|~a&l,m,a,q,r,u)}function d(m,a,g,l,q,r,u){return c(a&l|g&~l,m,a,q,r,u)}function h(m,a,g,l,q,r,u){return c(g^(a|~l),m,a,q,r,u)}function n(m,
a){var g=m[0],l=m[1],q=m[2],r=m[3];g=k(g,l,q,r,a[0],7,-680876936);r=k(r,g,l,q,a[1],12,-389564586);q=k(q,r,g,l,a[2],17,606105819);l=k(l,q,r,g,a[3],22,-1044525330);g=k(g,l,q,r,a[4],7,-176418897);r=k(r,g,l,q,a[5],12,1200080426);q=k(q,r,g,l,a[6],17,-1473231341);l=k(l,q,r,g,a[7],22,-45705983);g=k(g,l,q,r,a[8],7,1770035416);r=k(r,g,l,q,a[9],12,-1958414417);q=k(q,r,g,l,a[10],17,-42063);l=k(l,q,r,g,a[11],22,-1990404162);g=k(g,l,q,r,a[12],7,1804603682);r=k(r,g,l,q,a[13],12,-40341101);q=k(q,r,g,l,a[14],17,
-1502002290);l=k(l,q,r,g,a[15],22,1236535329);g=d(g,l,q,r,a[1],5,-165796510);r=d(r,g,l,q,a[6],9,-1069501632);q=d(q,r,g,l,a[11],14,643717713);l=d(l,q,r,g,a[0],20,-373897302);g=d(g,l,q,r,a[5],5,-701558691);r=d(r,g,l,q,a[10],9,38016083);q=d(q,r,g,l,a[15],14,-660478335);l=d(l,q,r,g,a[4],20,-405537848);g=d(g,l,q,r,a[9],5,568446438);r=d(r,g,l,q,a[14],9,-1019803690);q=d(q,r,g,l,a[3],14,-187363961);l=d(l,q,r,g,a[8],20,1163531501);g=d(g,l,q,r,a[13],5,-1444681467);r=d(r,g,l,q,a[2],9,-51403784);q=d(q,r,g,l,
a[7],14,1735328473);l=d(l,q,r,g,a[12],20,-1926607734);g=c(l^q^r,g,l,a[5],4,-378558);r=c(g^l^q,r,g,a[8],11,-2022574463);q=c(r^g^l,q,r,a[11],16,1839030562);l=c(q^r^g,l,q,a[14],23,-35309556);g=c(l^q^r,g,l,a[1],4,-1530992060);r=c(g^l^q,r,g,a[4],11,1272893353);q=c(r^g^l,q,r,a[7],16,-155497632);l=c(q^r^g,l,q,a[10],23,-1094730640);g=c(l^q^r,g,l,a[13],4,681279174);r=c(g^l^q,r,g,a[0],11,-358537222);q=c(r^g^l,q,r,a[3],16,-722521979);l=c(q^r^g,l,q,a[6],23,76029189);g=c(l^q^r,g,l,a[9],4,-640364487);r=c(g^l^q,
r,g,a[12],11,-421815835);q=c(r^g^l,q,r,a[15],16,530742520);l=c(q^r^g,l,q,a[2],23,-995338651);g=h(g,l,q,r,a[0],6,-198630844);r=h(r,g,l,q,a[7],10,1126891415);q=h(q,r,g,l,a[14],15,-1416354905);l=h(l,q,r,g,a[5],21,-57434055);g=h(g,l,q,r,a[12],6,1700485571);r=h(r,g,l,q,a[3],10,-1894986606);q=h(q,r,g,l,a[10],15,-1051523);l=h(l,q,r,g,a[1],21,-2054922799);g=h(g,l,q,r,a[8],6,1873313359);r=h(r,g,l,q,a[15],10,-30611744);q=h(q,r,g,l,a[6],15,-1560198380);l=h(l,q,r,g,a[13],21,1309151649);g=h(g,l,q,r,a[4],6,-145523070);
r=h(r,g,l,q,a[11],10,-1120210379);q=h(q,r,g,l,a[2],15,718787259);l=h(l,q,r,g,a[9],21,-343485551);m[0]=b(g,m[0]);m[1]=b(l,m[1]);m[2]=b(q,m[2]);m[3]=b(r,m[3])}var b=function(m,a){var g=(m&65535)+(a&65535);return(m>>16)+(a>>16)+(g>>16)<<16|g&65535},e="0123456789abcdef".split("");return function(m){for(var a=m.length,g=0;g<a;g++){for(var l=g,q=m[g],r="",u=0;4>u;u++)r+=e[q>>8*u+4&15]+e[q>>8*u&15];m[l]=r}return m.join("")}(function(m){var a=m.length,g=[1732584193,-271733879,-1732584194,271733878],l;for(l=
64;l<=a;l+=64){var q,r=m.substring(l-64,l),u=[];for(q=0;64>q;q+=4)u[q>>2]=r.charCodeAt(q)+(r.charCodeAt(q+1)<<8)+(r.charCodeAt(q+2)<<16)+(r.charCodeAt(q+3)<<24);n(g,u)}m=m.substring(l-64);q=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];r=m.length;for(l=0;l<r;l++)q[l>>2]|=m.charCodeAt(l)<<(l%4<<3);q[l>>2]|=128<<(l%4<<3);if(55<l)for(n(g,q),l=16;l--;)q[l]=0;q[14]=8*a;n(g,q);return g}(f))}function et(f,c){var k=[];f.replace(c,function(d,h){k.push({match:d,start:h,end:h+d.length})});return k}function ft(f,c,k){function d(b,
e){if(e.constructor!==RegExp){if(0===b.indexOf(e))return{match:e,rest:b.slice(e.length)};for(var m=0;m<e.length;m++)if(e[m]!=b[m])return{match:null,pos:m};return{match:null}}return(e=Bc.reMatches(b,e))&&e.length&&0===e[0].start?{match:e[0].match,rest:b.slice(e[0].end)}:{match:null}}function h(b){var e=Bc.reMatches(b,/__\//g),m=Bc.reMatches(b,/\/__/g);if(e.length!==m.length)throw Error("pattern invalid: "+b+" cannot be split into __/.../__ embedded RegExps\nstarts: "+JSON.stringify(e)+"\nvs ends:\n"+
JSON.stringify(m));var a=0;return e.reduce(function(g,l,q){var r=m[q];q=g.pop();l=l.start-a;r=r.end-a;var u;var v=u=3;q=[q.slice(0,l),q.slice(l+u,r-v),q.slice(r)];q[0].length&&(g.push(q[0]),a+=q[0].length);try{q[1].length&&(g.push(new RegExp(q[1])),a+=q[1].length+3+3)}catch(y){throw Error("Cannot create pattern re from: "+Bc.inspectObject(q));}q[2].length&&g.push(q[2]);return g},[b])}function n(b,e){e=h(e);a:{for(var m=b,a=0,g=0;g<e.length;g++){var l=e[g];m=d(m,l);if(!m.match){e={matched:!1,pos:a+
(m.pos||0),pattern:l};break a}a+=m.match.length;m=m.rest}e=m.length?{matched:!1,pos:a}:{matched:!0}}if(e.matched)return e;e.error=b.slice(0,e.pos)+"<--UNMATCHED--\x3e"+b.slice(e.pos);return e}k=k||{};k.normalizeWhiteSpace&&(f=f.replace(/\s+/g," "));k.ignoreIndent&&(f=f.replace(/^\s+/gm,""),c=c.replace(/^\s+/gm,""));return f==c?{matched:!0}:n(f,c)}function Mu(f,c,k){f=f.slice(c);return"string"===typeof k?(f=f.indexOf(k),-1===f?null:f+c):k.constructor===RegExp?(c=Bc.reMatches(f,k),c[0]?c[0].start:null):
null}function Nu(f,c,k){f=f.slice(0,c);return"string"===typeof k?(f=f.lastIndexOf(k),-1===f?null:f):k.constructor===RegExp?(f=Bc.reMatches(f,k),Bc.last(f)?Bc.last(f).start:null):null}function Ou(f){var c=Bc.lineRanges(f);return function(k){for(var d=0;d<c.length;d++){var h=c[d];if(k>=h[0]&&k<h[1])return d}return-1}}function Pu(f){return function(c){return Bc.lineRanges(f)[c]}}function gt(f){for(var c=0,k=Bc.lines(f),d=[],h=0;h<k.length;h++)f=c+k[h].length+1,d.push([c,f]),c=f;return d}function ur(f,
c){var k=f.length;if(0===k)return-1;for(var d=0;;){var h=d+Math.floor((k-d)/2),n=$jscomp.makeIterator(f[h]),b=n.next().value;n=n.next().value;if(c<b){if(0===h)break;k=h}else if(c>n)d=h;else return h}return-1}function vr(f,c,k){k=void 0===k?0:k;f=this.substring(k||0).search(c);return 0<=f?f+(k||0):f}function ht(f,c,k){k=void 0===k?f.length:k;c=c.global?c:new RegExp(c.source,"g"+(c.ignoreCase?"i":"")+(c.multiLine?"m":""));f=this.substring(0,k+1);k=-1;for(var d=0,h;null!=(h=c.exec(f));)k=h.index,c.lastIndex=
++d;return k}function it(f,c){return"undefined"===typeof JsDiff?"diff not supported":JsDiff.convertChangesToXML(JsDiff.diffWordsWithSpace(f,c))}function Wm(f){return""==f}function Xo(f){f=f[0];return"A"===f||"E"===f||"I"===f||"O"===f||"U"===f||"a"===f||"e"===f||"i"===f||"o"===f||"u"===f||!1}function wr(f,c){var k=parseFloat(f);return isNaN(k)?f:k.toFixed(c)}function mq(f){return f.length?f.charAt(0).toUpperCase()+f.slice(1):f}function Yo(f){return f.split(" ").map(Bc.capitalize).join("")}function dk(f){var c=
f.split("-"),k=c.length;if(1==k)return c[0];f="-"==f.charAt(0)?c[0].charAt(0).toUpperCase()+c[0].substring(1):c[0];for(var d=1;d<k;d++)f+=c[d].charAt(0).toUpperCase()+c[d].substring(1);return f}function jt(f,c,k){c=c||30;k=void 0===k?"...":k;return f.length>c?f.slice(0,c-k.length)+k:String(f)}function go(f,c,k){c=c||30;return f.length>c?(void 0===k?"...":k)+f.slice(-c):String(f)}function nq(f){return f.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function oq(f){return f.slice(0,
f.length-1)+String.fromCharCode(f.charCodeAt(f.length-1)+1)}function kt(f){return f.charCodeAt(0)-48}function lt(f,c){for(var k=[],d=0;d<f.length;d++){k[d]=[];for(var h=0;h<c.length;h++)k[d][h]=0}for(d=0;d<f.length;d++)k[d][0]=0;for(d=1;d<f.length;d++)for(h=1;h<c.length;h++)k[d][h]=f[d-1]==c[h-1]?k[d-1][h-1]+1:0;for(var n=h=d=-1,b=0;b<f.length;b++)for(var e=0;e<c.length;e++){var m=k[b][e];d<m&&(d=m,h=b-m,n=e-m)}return{length:d,indexA:h,indexB:n,string:0<d?f.slice(h,h+d):""}}function xr(f,c){return"insert"===
c.action?f.slice(0,c.start)+c.lines.join("\n")+f.slice(c.start):"remove"===c.action?f.slice(0,c.start)+f.slice(c.end):f}function yr(f,c){return c.reduce(function(k,d){return Bc.applyChange(f,d)},f)}function Zo(f,c){if(0===f.length)return c.length;if(0===c.length)return f.length;var k;if(f.length>c.length){var d=f;f=c;c=d}var h=Array(f.length+1);for(d=0;d<=f.length;d++)h[d]=d;for(d=1;d<=c.length;d++){var n=d;for(k=1;k<=f.length;k++){var b=c[d-1]===f[k-1]?h[k-1]:Math.min(h[k-1]+1,Math.min(n+1,h[k]+
1));h[k-1]=n;n=b}h[f.length]=n}return h[f.length]}function Qu(f,c){f=f||0;return Math.round(Math.random()*((c||100)-f)+f)}function Ru(f){return Math.floor(Math.random()*f)}function Su(f){if(1E3>f)return String(Math.round(100*f)/100)+"B";f/=1024;return 1E3>f?String(Math.round(100*f)/100)+"KB":String(Math.round(f/1024*100)/100)+"MB"}function mt(f){return f.reduce(function(c,k){return c+k},0)/f.length}function nt(f,c,k){return(f-c)/k+c}function Tu(f){var c=f.sort(function(k,d){return d-k});f=f.length;
return 0===f%2?.5*(c[f/2-1]+c[f/2]):c[(f-1)/2]}function ot(f,c,k,d){d=d||0;if(c<k)var h=k;else h=c,c=k;return 0<=h-f+d&&0>=c-f-d}function pq(f,c,k){return Math.max(c,Math.min(k,f))}function zr(f){return f.sort(function(c,k){return c-k})}function jm(f,c){c=c||"px";if((f=f.match(/([0-9\.]+)\s*(.*)/))&&f[1]){var k=parseFloat(f[1]);return fg.convertLength(k,f[2],c)}}function Dm(f,c){c=1/c;return Math.round(f*c)/c}function ml(f,c,k,d){var h=fg.roundTo(f,k);return Math.abs(f-h)<c/2?h:d?f:h+(f-(f<h?h-c/
2:h+c/2))*k/(k-c)}function Ch(f){return 180*f/Math.PI%360}function Xm(f){return f/180*Math.PI}function Em(f,c,k){c=void 0===c?5:c;k=void 0===k?3E4:k;f=Math.min(k,c*Math.pow(2,f));return Math.min(k,c+Math.random()*(3*(f/2+Math.round(f/2*Math.random()))-c))}function $o(f,c,k){return c+f*(k-c)}function Uu(f,c){var k=[],d;for(d in f)(f.__lookupGetter__(d)||"function"!==typeof f[d])&&(c?c(d,f):1)&&k.push(d);return k}function qq(f,c){return Object.getOwnPropertyNames(f).reduce(function(k,d){(c?c(f,d):1)&&
k.push(d);return k},[])}function pt(f){var c=[],k;for(k in f)f.hasOwnProperty(k)&&(f.__lookupGetter__(k)||"function"!==f[k])&&c.push(k);return c}function ap(f,c,k){var d=[],h;for(h in f)if(f.hasOwnProperty(h)){var n=f[h];"function"!==n&&d.push(c.call(k||this,h,n))}return d}function bp(f,c){for(var k in f)if(f[k]===c)return k}function qt(f){var c=[],k;for(k in f)c.push(f[k]);return c}function Ar(f){var c=[],k;for(k in f)f.hasOwnProperty(k)&&c.push(f[k]);return c}function rt(f,c){for(var k in f)if(c(f,
k))return!0;return!1}function rq(f,c){var k=[],d;for(d in f)(c?c(f,d):1)&&k.push(d);return k}function st(f){return Object.keys(f).sort().join("").hashCode()}function tt(f,c,k){return zn.dateFormat(f,c,k)}function cp(f,c){return c&&c instanceof Date&&c.getTime()===f.getTime()}function ho(f,c,k){k=void 0===k?{}:k;if(!(c instanceof Date)||c<f)return"";if(c===f)return"now";var d="min",h="sec",n="hour",b="day",e=Math.round((c-f)/1E3);f=e%60;c=Math.floor(e/60)%60;var m=Math.floor(e/60/60)%24;e=Math.floor(e/
60/60/24);var a=[];0<e&&(a.push(e),1<e&&(b+="s"),a.push(b));if(k.forceHours||0<m&&2>e)a.push(m),1<m&&(n+="s"),a.push(n);if(k.forceMinutes||0<c&&3>m&&0===e)a.push(c),1<c&&(d+="s"),a.push(d);if(k.forceSeconds||0<f&&3>c&&0===m&&0===e)a.push(f),1<f&&(h+="s"),a.push(h);return a.join(" ")}function yg(f){return"function"===typeof f?yg.convertCallbackFun(f):Promise.resolve(f)}function io(f,c){return new Promise(function(k){return setTimeout(k,f,c)})}function dp(f,c){return new Promise(function(k,d){return setTimeout(d,
f,c)})}function ep(f,c){return new Promise(function(k,d){var h=!1;setTimeout(function(){return!h&&(h=!0)&&d(Error("Promise timed out"))},f);c.then(function(n){return!h&&(h=!0)&&k(n)},function(n){return!h&&(h=!0)&&d(n)})})}function Vu(f){var c=Date.now();return Promise.resolve(f).then(function(){return Date.now()-c})}function ut(f,c,k){"function"===typeof f&&(c=f,f=void 0);return new Promise(function(d,h){var n=!1,b=!1,e=void 0,m=void 0,a=setInterval(function(){if(n)return clearInterval(a);try{m=c()}catch(g){e=
g}if(m||e||b)return n=!0,clearInterval(a),e?h(e):b?"undefined"===typeof k?h(Error("timeout")):d(k):d(m)},10);"number"===typeof f&&setTimeout(function(){return b=!0},f)})}function vt(){var f,c,k=new Promise(function(d,h){f=d;c=h});return{resolve:f,reject:c,promise:k}}function jo(f){return function(){var c=Array.from(arguments),k=this;return new Promise(function(d,h){c.push(function(n,b){return n?h(n):d(b)});f.apply(k,c)})}}function Wu(f){return function(){var c=Array.from(arguments),k=this;return new Promise(function(d,
h){c.push(function(){var n=Array.from(arguments),b=n.shift();return b?h(b):d(n)});f.apply(k,c)})}}function wt(f,c,k,d,h){var n=f.shift();if(n)try{Promise.resolve(n(c,k)).then(function(b){return wt(f,b,k,d,h)}).catch(function(b){h(b)})}catch(b){h(b)}else d(c)}function An(f){return new Promise(function(c,k){return mh._chainResolveNext(f.slice(),void 0,{},c,k)})}function Br(f,c){return Promise.resolve(f).then(function(k){try{c()}catch(d){console.error("Error in promise finally: "+d.stack||d)}return k}).catch(function(k){try{c()}catch(d){console.error("Error in promise finally: "+
d.stack||d)}throw k;})}function xt(f,c){function k(){c--;try{var g=b++;f[g]().then(function(l){c++;h[g]=l;0===--e?m():d()}).catch(function(l){return a(l)})}catch(l){a(l)}}function d(){for(;!n&&0<e&&b<f.length&&0<c;)k()}c=void 0===c?Infinity:c;if(!f.length)return Promise.resolve([]);var h=[],n=null,b=0,e=f.length,m,a;return new Promise(function(g,l){m=function(){return g(h)};a=function(q){return l(n=q)};d()})}function nh(f,c){if(f instanceof nh)return f;if(!(this instanceof nh))return new nh(f,c);
this.setSplitter(c||".");this.fromPath(f)}function Cr(f){var c={},k;for(k in f)c[k]=f[k].slice();return c}function yt(f,c){var k={},d;for(d in f)if(!c.includes(d)){k[d]=[];for(var h=f[d],n=0;n<h.length;n++){var b=h[n];c.includes(b)||k[d].push(b)}}return k}function sq(f,c,k,d){k=void 0===k?[]:k;d=void 0===d?Infinity:d;if(!Array.isArray(f[c]))return[];for(var h=[],n={},b={},e=0;e<k.length;e++)b[k[e]]=!0;c=f[c].slice();e={};for(var m=c.length;m--;){var a=c[m];a in b?c.splice(m,1):e[a]=1}if(k)for(;0!==
c.length;)for(k=0;k<c.length;k++)if(a=c.shift(),!(a in n||a in b)&&(m=e[a]||0,!(m>d)&&(h.push(a),n[a]=!0,a=f[a])))for(var g=0;g<a.length;g++){var l=a[g];l in n||l in e||(e[l]=m+1,c.push(l))}return h}function fp(f,c,k,d){d=void 0===d?Infinity:d;k&&(f=xi.without(f,k));c=[c];k=0;for(var h={};c.length&&k++<d;){var n=c.shift();if(!h[n]){var b=f[n]||[];h[n]=b;c.push.apply(c,$jscomp.arrayFromIterable(b))}}return h}function Dr(f){var c={},k;for(k in f)for(var d=f[k],h=0;h<d.length;h++){var n=d[h];c[n]?c[n].push(k):
c[n]=[k]}return c}function Er(f,c){c=[];var k={},d={},h={};for(g in f){k.hasOwnProperty(g)||(k[g]=!0,c.push(g));var n=f[g],b={};if(n){d[g]=[];n=$jscomp.makeIterator(n);for(var e=n.next();!e.done;e=n.next())if(e=e.value,!b.hasOwnProperty(e)&&g!==e){var m=h[e]||(h[e]=[]);m.includes(g)||m.push(g);b[e]=!0;d[g].push(e);k.hasOwnProperty(e)||(k[e]=!0,c.push(e))}}}for(f=[];c.length;){k=Infinity;var a=[];b=[];n=[];for(e=0;e<c.length;e++){var g=c[e];m=d[g]||[];m.length>k||(m.length!==k||m.some(function(l){return a.includes(l)})?
(k=m.length,a=[g],b=[e],n=(h[g]||[]).slice()):(a.push(g),b.push(e),n.push.apply(n,$jscomp.arrayFromIterable(h[g]||[]))))}for(e=b.length;e--;)g=c[b[e]],h[g]=[],c.splice(b[e],1);k=$jscomp.makeIterator(n);for(g=k.next();!g.done;g=k.next())g=g.value,d[g]=d[g].filter(function(l){return!a.includes(l)});f.push(a)}return f}function tq(f,c,k,d,h,n){function b(a){-1<e.indexOf(a)||(d=f.call(n,d,a,m++),e=e.concat([a]),xi.withoutAll(c[a]||[],e).forEach(function(g){return b(g)}))}var e=h||[],m=0;b(k);return d}
function Fr(f){f=void 0===f?10:f;for(var c={},k=xi.range(1,f).map(String),d=0;d<k.length;d++){var h=Math.floor(Math.random()*f);c[k[d]]=xi.shuffle(k).slice(0,h)}return c}function Xu(f){return Array.isArray(f)&&2<=f.length&&f[0]<=f[1]}function uq(f){return f.sort(Dh.compare)}function Bn(f,c){return f[0]<c[0]?f[1]<c[0]?-3:f[1]===c[0]?-2:-1:f[0]===c[0]?f[1]===c[1]?0:f[1]<c[1]?-1:1:-1*Bn(c,f)}function Yu(f,c,k){switch(this.compare(f,c)){case -3:case 3:return null;case 0:return k&&k(f,c,f),f;case 2:case 1:var d=
f;f=c;c=d;case -2:case -1:return d=[f[0],Math.max(f[1],c[1])],k&&k(f,c,d),d;default:throw Error("Interval compare failed");}}function Zu(f,c){for(var k=[],d=f.length;0<d;){var h=f.shift();d--;for(var n=0;n<d;n++){var b=Dh.coalesce(h,f[n],c);b&&(h=b,f.splice(n,1),d--,n--)}k.push(h)}return this.sort(k)}function km(f,c,k){for(var d=[];0<f.length;){var h=f.shift(),n=c.map(function(b){b=Dh.compare(h,b);return-1===b||0===b||1===b});d.push(k(h,n[0]));d.push(h)}return d}function Cn(f,c,k,d,h,n){n=n||Dh.GLOBAL;
k=this.sort(k);for(var b,e=[];b=k.shift();)if(!(b[1]<f)){b[0]<f&&(b=Array.prototype.slice.call(b),b[0]=f);var m=c<b[0]?c:b[0];f<m&&e.push(d.call(n,[f,m],!0));c<b[1]&&(b=Array.prototype.slice.call(b),b[1]=c);if(b[0]===b[1]){var a;h&&(a=e.slice(-1)[0])&&h.call(n,a,b,a)}else e.push(d.call(n,b,!1));f=b[1];if(f>=c)break}f<c&&e.push(d.call(n,[f,c],!0));return e}function vq(f,c,k){return Dh.intervalsInRangeDo(f,c,Dh.coalesceOverlapping(Array.prototype.slice.call(k)),function(d,h){return h?d:null}).filter(Boolean)}
function zt(f,c){var k=0,d,h;return c.map(function(n){for(;h=f[k];)if(h[0]<n[0])k++;else break;if(h&&h[0]===n[0]){for(d=k;h=f[d];)if(h[1]<n[1])d++;else break;if(h&&h[1]===n[1])return Dh.range(k,d)}return[]})}function Ll(f,c,k){k=k||0;k+c>f.length&&(k-=k+c-f.length);return{array:f,from:k,to:k+c}}function At(f){return f.array.slice(f.from,f.to)}function Gr(f,c){return c<f.from||c>=f.to?null:c-f.from}function ko(f,c){return 0>c||c>f.to-f.from?null:f.from+c}function wq(f,c){if(!(c in f.array))return null;
var k=0;c<f.from&&(k=-f.from+c);c>=f.to&&(k=c-f.to+1);return 0===k?f:Fm.create(f.array,f.to-f.from,f.from+k)}function Uj(f,c,k){return(f=f[c])?f[k]:void 0}function Gm(f,c,k,d){(f=f[c])&&(f[k]=d);return d}function Ym(f,c){return f[c]}function Bt(f,c,k){return f[c]=k}function S(f,c){return f.reduce(function(k,d){k.push(d[c]);return k},[])}function ja(f,c,k){return f.map(function(d,h){return d[c]?d[c]=k[h]:void 0})}function Ua(f,c,k){for(var d=Array(f);0<f;)d[--f]=Qg.arrayWithN(c,k);return d}function ob(f,
c,k,d){for(var h=Array(f),n=0;n<f;n++){h[n]=Array(c);for(var b=0;b<c;b++)h[n][b]=k.call(d||this,n,b)}return h}function Lb(f,c,k){f.forEach(function(d,h){d.forEach(function(n,b){c.call(k||this,n,h,b)})})}function Dc(f,c,k){var d=Array(f.length);f.forEach(function(h,n){d[n]=Array(h.length);h.forEach(function(b,e){d[n][e]=c.call(k||this,b,n,e)})});return d}function xd(f){for(var c=f[0],k=Array(f.length-1),d=1;d<f.length;d++)for(var h=k[d-1]={},n=0;n<c.length;n++)h[c[n]]=f[d][n];return k}function je(f,
c){Array.isArray(f)||(f=[f]);var k=[[]],d=k[0],h=f.reduce(function(n,b){return n.concat([Object.keys(b).reduce(function(e,m){var a=d.indexOf(m);-1===a&&(a=d.length,d.push(m));e[a]=b[m];return e},[])])},[]);c=1===arguments.length?null:c;h.forEach(function(n){for(var b=0;b<d.length;b++)n[b]||(n[b]=c)});return k.concat(h)}function Pe(f,c,k,d,h){d=void 0===d?{i:0}:d;h=void 0===h?0:h;var n=d.i++;c(f,n,h);(k(f,n,h)||[]).forEach(function(b){return Pe(b,c,k,d,h+1)})}function xf(f,c,k,d,h){d=void 0===d?{i:0}:
d;h=void 0===h?0:h;var n=d.i++;(k(f,n,h)||[]).forEach(function(b){return xf(b,c,k,d,h)});c(f,n,h)}function tg(f,c,k){if(c(f))return f;if((f=k(f))&&f.length)for(var d=0;d<f.length;d++){var h=tg(f[d],c,k);if(h)return h}}function Xf(f,c,k){var d=[];c(f)&&d.push(f);return d.concat(Oj.flatten((k(f)||[]).map(function(h){return Xf(h,c,k)})))}function gf(f,c,k,d){d=void 0===d?0:d;return[c(f,d)].concat(Oj.flatten((k(f)||[]).map(function(h){return gf(h,c,k,d+1)})))}function gg(f,c,k,d){d=void 0===d?0:d;var h=
(k(f)||[]).map(function(n){return gg(n,c,k,d+1)});return c(f,h,d)}function Yi(f){var c=[{name:"send",args:["msg","callback"]},{name:"listen",args:["messenger","callback"]},{name:"close",args:["messenger","callback"]},{name:"isOnline",args:[]}],k=c.map(function(b){return b.name}).concat("id sendHeartbeat heartbeatInterval ignoreUnknownMessages allowConcurrentSends sendTimeout services".split(" "));c.forEach(function(b){if(!f[b.name])throw b="message implementation needs function "+b.name+"("+b.args.join(",")+
")",Error(b);});c=f.sendHeartbeat&&(f.heartbeatInterval||1E3);var d=f.hasOwnProperty("ignoreUnknownMessages")?f.ignoreUnknownMessages:!1,h={_outgoing:[],_inflight:[],_id:f.id||Ak.newUUID(),_ignoreUnknownMessages:d,_services:{},_messageCounter:0,_messageResponseCallbacks:{},_whenOnlineCallbacks:[],_statusWatcherProc:null,_startHeartbeatProcessProc:null,_listenInProgress:null,_heartbeatInterval:c,_status:Ak.OFFLINE,_runWhenOnlineCallbacks:function(){var b=h._whenOnlineCallbacks.slice();h._whenOnlineCallbacks=
[];b.forEach(function(e){try{e.call(null,null,h)}catch(m){console.error("error in _runWhenOnlineCallbacks: %s",m)}})},_ensureStatusWatcher:function(){h._statusWatcherProc||(h._statusWatcherProc=setInterval(function(){h.isOnline()&&h._whenOnlineCallbacks.length&&h._runWhenOnlineCallbacks();var b=h._status;h._status=h.isOnline()?Ak.ONLINE:Ak.OFFLINE;h._status!==Ak.ONLINE&&h._statusWatcherProc&&h.reconnect();if(h._status!==b&&h.onStatusChange)h.onStatusChange()},20))},_addMissingData:function(b){if(!b.target)throw Error("Message needs target!");
if(!b.action)throw Error("Message needs action!");b.data||(b.data=null);b.messageId||(b.messageId=Ak.newUUID());b.sender=h.id();b.messageIndex=h._messageCounter++;return b},_queueSend:function(b,e){if(e&&"function"!==typeof e)throw Error("Expecing a when send callback, got: "+e);h._outgoing.push([b,e])},_deliverMessageQueue:function(){function b(a){if(-1!==h._inflight.indexOf(a)){var g=a[0],l=a[1];l&&(h._messageResponseCallbacks[g.messageId]=l);f.send.call(h,g,function(q){Ak.remove(h._inflight,a);
q&&e(q,a);h._deliverMessageQueue()})}}function e(a,g){var l=g[1];delete h._messageResponseCallbacks[g[0].messageId];console.error(a);l&&l(a)}if(f.allowConcurrentSends||!h._inflight.length){var m=h._outgoing.shift();m&&(h._inflight.push(m),h.isOnline()?b(m):h.whenOnline(function(){b(m)}),function(a){"number"===typeof f.sendTimeout&&setTimeout(function(){-1!==h._inflight.indexOf(a)&&(Ak.remove(h._inflight,a),e(Error("Timeout sending message"),a),h._deliverMessageQueue())},f.sendTimeout)}(m),f.allowConcurrentSends&&
h._outgoing.length&&h._deliverMessageQueue())}},_startHeartbeatProcess:function(){h._startHeartbeatProcessProc||(h._startHeartbeatProcessProc=setTimeout(function(){f.sendHeartbeat.call(h,function(b,e){h._startHeartbeatProcessProc=null;h._startHeartbeatProcess()})},h._heartbeatInterval))},id:function(){return h._id},isOnline:function(){return f.isOnline.call(h)},heartbeatEnabled:function(){return"number"===typeof h._heartbeatInterval},listen:function(b){if(!h._listenInProgress)return h._listenInProgress=
!0,h._ensureStatusWatcher(),f.listen.call(h,function(e){h._listenInProgress=null;b&&b(e);h.heartbeatEnabled()&&h._startHeartbeatProcess()})},reconnect:function(){if(h._status!==Ak.ONLINE)return h.listen(),h},send:function(b,e){h._addMissingData(b);h._queueSend(b,e);h._deliverMessageQueue();return b},sendTo:function(b,e,m,a){return h.send({target:b,action:e,data:m},a)},onMessage:function(b){h.emit("message",b);if(b.inResponseTo){var e=h._messageResponseCallbacks[b.inResponseTo];e&&!b.expectMoreResponses&&
delete h._messageResponseCallbacks[b.inResponseTo];e&&e(null,b)}else if(e=h._services[b.action])try{e.call(null,b,h)}catch(m){e=String(m.stack||m),console.error("Error invoking service: "+e),h.answer(b,{error:e})}else h._ignoreUnknownMessages||h.answer(b,{error:String(Error("messageNotUnderstood: "+b.action))})},answer:function(b,e,m,a){"function"===typeof m&&(a=m,m=!1);b={target:b.sender,action:b.action+"Result",inResponseTo:b.messageId,data:e};m&&(b.expectMoreResponses=!0);return h.send(b,a)},close:function(b){clearInterval(h._statusWatcherProc);
h._statusWatcherProc=null;f.close.call(h,function(e){h._status=Ak.OFFLINE;b&&b(e)});return h},whenOnline:function(b){h._whenOnlineCallbacks.push(b);h.isOnline()&&h._runWhenOnlineCallbacks();return h},outgoingMessages:function(){return Ak.pluck(h._inflight.concat(h._outgoing),0)},addServices:function(b){Object.assign(h._services,b);return h}};f.services&&h.addServices(f.services);Ak.makeEmitter(h);for(var n in f)-1===k.indexOf(n)&&f.hasOwnProperty(n)&&(h[n]=f[n]);return h}function Jk(f,c,k){k||(k=
c,c=f,f=null);f=f||{};var d=f.args||[];f=Rg.create(f);f.run.apply(f,[c].concat(d).concat(k));return f}function ek(f){f=f||{};f.useMessenger=!0;var c=f.workerId||Rg.newUUID(),k=Rg.messengerCreate({sendTimeout:5E3,send:function(d,h){k.worker.postMessage(d);h()},listen:function(d){var h=k.worker=Rg.isNodejs?Rg.NodejsWorker.create(f):Rg.BrowserWorker.create(f);h.on("message",function(n){k.onMessage(n)});h.on("ready",function(){Rg.NodejsWorker.debug&&console.log("WORKER READY!!!")});h.on("close",function(){Rg.NodejsWorker.debug&&
console.log("WORKER CLOSED...!!!")});h.once("ready",d)},close:function(d){return k.worker.ready?k.sendTo(c,"close",{},function(h,n){(h=h||n.data.error)&&console.error("Error in worker messenger close: "+h.stack||h);if(h)d(h);else{var b=!1;k.worker.once("close",function(){b=!0});Rg.waitFor(1E3,function(){return!!b},d)}}):d(null)},isOnline:function(){return k.worker&&k.worker.ready}});Object.assign(k,{eval:function(d,h){k.sendTo(c,"remoteEval",{expr:d},function(n,b){h(n,b?b.data.result:null)})},run:function(){var d=
Array.prototype.slice.call(arguments),h=d.shift(),n=d.pop();if("function"!==typeof h)throw Error("run: no function that should run in worker passed");if("function"!==typeof n)throw Error("run: no callback passed");return k.sendTo(c,"run",{func:String(h),args:d},function(b,e){n(b||e.data.error,e?e.data.result:null)})}});k.listen();return k}function gp(){if(!Pd.isNode||Pd.GLOBAL.lively||Pd.GLOBAL.lively)if(Pd.livelyLang._prevLivelyGlobal=Pd.GLOBAL.lively,Pd.GLOBAL.lively||(Pd.GLOBAL.lively={}),Pd.GLOBAL.lively.lang)for(var f in Pd.livelyLang)Pd.GLOBAL.lively.lang[f]=
Pd.livelyLang[f];else Pd.GLOBAL.lively.lang=Pd.livelyLang}function Yf(f){if(!f)return f;if(Array.isArray(f))return Pd.createChain(Pd.arr,f);if("Date"===f.constructor.name)return Pd.createChain(Pd.date,f);switch(typeof f){case "string":return Pd.createChain(Pd.string,f);case "object":return Pd.createChain(Pd.obj,f);case "function":return Pd.createChain(Pd.fun,f);case "number":return Pd.createChain(Pd.num,f)}throw Error("Chain for object "+f+" ("+f.constructor.name+") no supported");}function ng(){Pd.isNode||
(Pd.livelyLang._prevLivelyGlobal?delete Pd.GLOBAL.lively.lang:delete Pd.GLOBAL.lively);return Pd.livelyLang}function Zm(){Object.assign(Pd.livelyLang,{worker:iB,messenger:jB,events:Kw,tree:Hr,grid:Lw,arrayProjection:kB,interval:lB,graph:Ir,date:Jr,properties:$m,obj:Pf,arr:vf,fun:nl,num:Bk,string:vh,Closure:Ei,promise:yg,Path:nh,Group:Ml});Pd.globalInterfaceSpec.forEach(function(f){if("installMethods"===f.action){var c=Pd.Path(f.target);c.isIn(Pd.GLOBAL)||c.set(Pd.GLOBAL,{},!0);var k=Pd.Path(f.sources[0]);
f.methods.forEach(function(d){Pd.installProperty(k.concat([d]),c.concat([d]))});f.alias&&f.alias.forEach(function(d){Pd.installProperty(k.concat([d[1]]),c.concat([d[0]]))})}else if("installObject"===f.action)c=Pd.Path(f.target),f=Pd.Path(f.source).get(Pd.livelyLang),c.set(Pd.GLOBAL,f,!0);else throw Error("Cannot deal with global setup action: "+f.action);})}function xq(){Pd.globalInterfaceSpec.forEach(function(f){if("installMethods"===f.action){var c=Pd.Path(f.target),k=Pd.Path(f.source).get(Pd.livelyLang),
d=c.get(Pd.GLOBAL);d&&(f.methods.filter(function(h){return k===d[h]}).forEach(function(h){delete d[h]}),f.alias&&f.alias.filter(function(h){return k===d[h]}).forEach(function(h){delete d[h[0]]}))}else if("installObject"===f.action)c=Pd.Path(f.target),c.del(Pd.GLOBAL);else throw Error("Cannot deal with global setup action: "+f.action);})}function Ly(f){return function(c,k,d,h){null==d&&(d=f);null==h&&(h=d);null==k&&(k=Sh.unit(c));var n=Sh.unit(c);if(n===k)return c;var b=Sh.unitLess(c);"px"!==Sh.unit(d)&&
console.warn("Parameter fromContext must resolve to a value in pixel units.");"px"!==Sh.unit(h)&&console.warn("Parameter toContext must resolve to a value in pixel units.");if("px"!==n)if("em"===n)b=Sh.unitLess(c)*Sh.unitLess(d);else if("rem"===n)b=Sh.unitLess(c)*Sh.unitLess(f);else if("ex"===n)b=Sh.unitLess(c)*Sh.unitLess(d)*2;else return"ch"===n||"vw"===n||"vh"===n||"vmin"===n?console.warn(n+" units can't be reliably converted; Returning original value."):console.warn(n+" is an unknown or unsupported length unit; Returning original value."),
c;d=b;if("px"!==k)if("em"===k)d=b/Sh.unitLess(h);else if("rem"===k)d=b/Sh.unitLess(f);else if("ex"===k)d=b/Sh.unitLess(h)/2;else return"ch"===k||"vw"===k||"vh"===k||"vmin"===k?console.warn(k+" units can't be reliably converted; Returning original value."):console.warn(k+" is an unknown or unsupported length unit; Returning original value."),c;return parseFloat(d.toFixed(5))+k}}function Ct(f){return Number(Sh.parseCssLength(f,"px").slice(0,-2))}function Ii(f,c,k,d){if("number"===typeof f){var h=f;
f=c;c=d}else h=f.x,f=f.y,k=c.x-h,c=c.y-f;return new Dd.Rectangle(h,f,k,c)}function oh(f,c){return new Dd.Point(f,c)}function Kr(f){return(f=f.match(zQ))?{scheme:f[1],auth:f[2],host:f[3],port:f[4],path:f[5]}:null}function Dt(f){var c="";f.scheme&&(c+=f.scheme+":");c+="//";f.auth&&(c+=f.auth+"@");f.host&&(c+=f.host);f.port&&(c+=":"+f.port);f.path&&(c+=f.path);return c}function mB(f){var c=f,k=Kr(f);if(k){if(!k.path)return f;c=k.path}f=ol.isAbsolute(c);c=c.split(/\/+/);for(var d,h=0,n=c.length-1;0<=
n;n--)d=c[n],"."===d?c.splice(n,1):".."===d?h++:0<h&&(""===d?(c.splice(n+1,h),h=0):(c.splice(n,2),h--));c=c.join("/");""===c&&(c=f?"/":".");return k?(k.path=c,Dt(k)):c}function nB(f,c){""===f&&(f=".");""===c&&(c=".");var k=Kr(c),d=Kr(f);d&&(f=d.path||"/");if(k&&!k.scheme)return d&&(k.scheme=d.scheme),Dt(k);if(k||c.match(b5))return c;if(d&&!d.host&&!d.path)return d.host=c,Dt(d);f="/"===c.charAt(0)?c:mB(f.replace(/\/+$/,"")+"/"+c);return d?(d.path=f,Dt(d)):f}function hp(f){return f}function uE(f){return ip(f)?
"$"+f:f}function oB(f){return ip(f)?f.slice(1):f}function ip(f){if(!f)return!1;var c=f.length;if(9>c||95!==f.charCodeAt(c-1)||95!==f.charCodeAt(c-2)||111!==f.charCodeAt(c-3)||116!==f.charCodeAt(c-4)||111!==f.charCodeAt(c-5)||114!==f.charCodeAt(c-6)||112!==f.charCodeAt(c-7)||95!==f.charCodeAt(c-8)||95!==f.charCodeAt(c-9))return!1;for(c-=10;0<=c;c--)if(36!==f.charCodeAt(c))return!1;return!0}function Et(f,c){return f===c?0:null===f?1:null===c?-1:f>c?1:-1}function jp(){(this||lm)._array=[];(this||lm)._set=
Mw?new Map:Object.create(null)}function Nw(){(this||kp)._array=[];(this||kp)._sorted=!0;(this||kp)._last={generatedLine:-1,generatedColumn:0}}function ri(f){f||(f={});(this||wh)._file=Sk.getArg(f,"file",null);(this||wh)._sourceRoot=Sk.getArg(f,"sourceRoot",null);(this||wh)._skipValidation=Sk.getArg(f,"skipValidation",!1);(this||wh)._sources=new vE;(this||wh)._names=new vE;(this||wh)._mappings=new c5;(this||wh)._sourcesContents=null}function Dn(f,c,k,d,h,n){var b=Math.floor((c-f)/2)+f,e=h(k,d[b],!0);
return 0===e?b:0<e?1<c-b?Dn(b,c,k,d,h,n):n==wE.LEAST_UPPER_BOUND?c<d.length?c:-1:b:1<b-f?Dn(f,b,k,d,h,n):n==wE.LEAST_UPPER_BOUND?b:0>f?-1:f}function Hm(f,c,k){var d=f[c];f[c]=f[k];f[k]=d}function $u(f,c,k,d){if(k<d){var h=k-1;Hm(f,Math.round(k+Math.random()*(d-k)),d);for(var n=f[d],b=k;b<d;b++)0>=c(f[b],n)&&(h+=1,Hm(f,h,b));Hm(f,h+1,b);h+=1;$u(f,c,k,h-1);$u(f,c,h+1,d)}}function wj(f,c){var k=f;"string"===typeof f&&(k=Sf.parseSourceMapInput(f));return null!=k.sections?new Th(k,c):new Tk(k,c)}function Tk(f,
c){var k=f;"string"===typeof f&&(k=Sf.parseSourceMapInput(f));f=Sf.getArg(k,"version");var d=Sf.getArg(k,"sources"),h=Sf.getArg(k,"names",[]),n=Sf.getArg(k,"sourceRoot",null),b=Sf.getArg(k,"sourcesContent",null),e=Sf.getArg(k,"mappings");k=Sf.getArg(k,"file",null);if(f!=(this||Ce)._version)throw Error("Unsupported version: "+f);n&&(n=Sf.normalize(n));d=d.map(String).map(Sf.normalize).map(function(m){return n&&Sf.isAbsolute(n)&&Sf.isAbsolute(m)?Sf.relative(n,m):m});(this||Ce)._names=My.fromArray(h.map(String),
!0);(this||Ce)._sources=My.fromArray(d,!0);(this||Ce)._absoluteSources=(this||Ce)._sources.toArray().map(function(m){return Sf.computeSourceURL(n,m,c)});(this||Ce).sourceRoot=n;(this||Ce).sourcesContent=b;(this||Ce)._mappings=e;(this||Ce)._sourceMapURL=c;(this||Ce).file=k}function Ny(){(this||Ce).generatedLine=0;(this||Ce).generatedColumn=0;(this||Ce).source=null;(this||Ce).originalLine=null;(this||Ce).originalColumn=null;(this||Ce).name=null}function Th(f,c){var k=f;"string"===typeof f&&(k=Sf.parseSourceMapInput(f));
f=Sf.getArg(k,"version");k=Sf.getArg(k,"sections");if(f!=(this||Ce)._version)throw Error("Unsupported version: "+f);(this||Ce)._sources=new My;(this||Ce)._names=new My;var d={line:-1,column:0};(this||Ce)._sections=k.map(function(h){if(h.url)throw Error("Support for url field in sections not implemented.");var n=Sf.getArg(h,"offset"),b=Sf.getArg(n,"line"),e=Sf.getArg(n,"column");if(b<d.line||b===d.line&&e<d.column)throw Error("Section offsets must be ordered and non-overlapping.");d=n;return{generatedOffset:{generatedLine:b+
1,generatedColumn:e+1},consumer:new wj(Sf.getArg(h,"map"),c)}})}function ok(f,c,k,d,h){(this||mi).children=[];(this||mi).sourceContents={};(this||mi).line=null==f?null:f;(this||mi).column=null==c?null:c;(this||mi).source=null==k?null:k;(this||mi).name=null==h?null:h;(this||mi).$$$isSourceNode$$$=!0;null!=d&&this.add(d)}function Uk(f,c){c=void 0===c?{}:c;var k=Object.assign({indent:{style:"  ",base:0,adjustMultilineComment:!1,optsIndent:c&&c.format&&c.format.indent||{}},quotes:"double"},lo.obj.dissoc(c&&
c.format||{},["indent"]));c=Object.assign({format:k,comment:!1},lo.obj.dissoc(c,["format"]));return lo.es.generate(f,c)}function Oy(f,c){for(var k=65536,d=0;d<c.length;d+=2){k+=c[d];if(k>f)return!1;k+=c[d+1];if(k>=f)return!0}}function mm(f,c){return 65>f?36===f:91>f?!0:97>f?95===f:123>f?!0:65535>=f?170<=f&&d5.test(String.fromCharCode(f)):!1===c?!1:Oy(f,AQ)}function Lr(f,c){return 48>f?36===f:58>f?!0:65>f?!1:91>f?!0:97>f?95===f:123>f?!0:65535>=f?170<=f&&e5.test(String.fromCharCode(f)):!1===c?!1:Oy(f,
AQ)||Oy(f,f5)}function ch(f,c){return new Fi(f,{beforeExpr:!0,binop:c})}function Qf(f,c){void 0===c&&(c={});c.keyword=f;return xE[f]=new Fi(f,c)}function nm(f,c){return 10===f||13===f||!c&&(8232===f||8233===f)}function Ji(f){return new RegExp("^(?:"+f.replace(/ /g,"|")+")$")}function Mr(f,c){for(var k=1,d=0;;){av.lastIndex=d;var h=av.exec(f);if(h&&h.index<c)++k,d=h.index+h[0].length;else return new Py(k,c-d)}}function ad(f){var c={},k;for(k in pB)c[k]=f&&yE.call(f,k)?f[k]:pB[k];"latest"===c.ecmaVersion?
c.ecmaVersion=1E8:null==c.ecmaVersion?(!BQ&&"object"===typeof console&&console.warn&&(BQ=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),c.ecmaVersion=11):2015<=c.ecmaVersion&&(c.ecmaVersion-=2009);null==c.allowReserved&&(c.allowReserved=5>c.ecmaVersion);if(CQ(c.onToken)){var d=c.onToken;c.onToken=function(h){return d.push(h)}}CQ(c.onComment)&&(c.onComment=an(c,c.onComment));return c}function an(f,c){return function(k,
d,h,n,b,e){k={type:k?"Block":"Line",value:d,start:h,end:n};f.locations&&(k.loc=new Ow(this,b,e));f.ranges&&(k.range=[h,n]);c.push(k)}}function mo(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function bv(f,c,k,d){f.type=c;f.end=k;this.options.locations&&(f.loc.end=d);this.options.ranges&&(f.range[1]=k);return f}function lp(f){f=DQ[f]={binary:Ji(g5[f]+" Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
nonBinary:{General_Category:Ji("Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
Script:Ji(h5[f])}};f.nonBinary.Script_Extensions=f.nonBinary.Script;f.nonBinary.gc=f.nonBinary.General_Category;f.nonBinary.sc=f.nonBinary.Script;f.nonBinary.scx=f.nonBinary.Script_Extensions}function Nr(f){if(65535>=f)return String.fromCharCode(f);f-=65536;return String.fromCharCode((f>>10)+55296,(f&1023)+56320)}function mp(f){return 36===f||40<=f&&43>=f||46===f||63===f||91<=f&&94>=f||123<=f&&125>=f}function yq(f){return 65<=f&&90>=f||97<=f&&122>=f||95===f}function Qy(f){return yq(f)||cv(f)}function cv(f){return 48<=
f&&57>=f}function Ry(f){return 48<=f&&57>=f||65<=f&&70>=f||97<=f&&102>=f}function Pw(f){return 65<=f&&70>=f?10+(f-65):97<=f&&102>=f?10+(f-97):f-48}function Qw(f){return"function"!==typeof BigInt?null:BigInt(f.replace(/_/g,""))}function Or(f){if(65535>=f)return String.fromCharCode(f);f-=65536;return String.fromCharCode((f>>10)+55296,(f&1023)+56320)}function Ft(f){return"string"===typeof f?function(c){return c===f}:f?f:function(){return!0}}function Pr(f,c){c=i5(c||Ye);for(var k in f)c[k]=f[k];return c}
function Gt(f,c,k){k(f,c)}function bn(f,c,k){}function Mg(f){return"\u2716"===f.name}function no(){}function Nl(f){return 14>f&&8<f||32===f||160===f||nm(f)}function np(f,c,k,d){var h=[];d=d||Ve.walk.make(Ve.custom.withMemberExpression);Object.keys(Ve.walk.base).forEach(function(n){var b=d[n];d[n]=function(e,m,a){Ve.arr.pushIfNotIncluded(h,e);return b(e,m,a)}});d.Property=function(n,b,e){Ve.arr.pushIfNotIncluded(h,n);e(n.key,b,"Expression");e(n.value,b,"Expression")};d.LabeledStatement=function(n,
b,e){n.label&&e(n.label,b,"Expression");e(n.body,b,"Statement")};Ve.walk.findNodeAround(f,c,k,d);return h}function zq(f,c){function k(h){return null===h?null:d[h.type](h,k)}var d=Ve.obj.extend({Program:function(h,n){return{start:h.start,end:h.end,type:"Program",body:h.body.map(n),source:h.source,astIndex:h.astIndex}},FunctionDeclaration:function(h,n){return{start:h.start,end:h.end,type:"FunctionDeclaration",id:n(h.id),params:h.params.map(n),body:n(h.body),source:h.source,astIndex:h.astIndex}},BlockStatement:function(h,
n){return{start:h.start,end:h.end,type:"BlockStatement",body:h.body.map(n),source:h.source,astIndex:h.astIndex}},ExpressionStatement:function(h,n){return{start:h.start,end:h.end,type:"ExpressionStatement",expression:n(h.expression),source:h.source,astIndex:h.astIndex}},CallExpression:function(h,n){return{start:h.start,end:h.end,type:"CallExpression",callee:n(h.callee),arguments:h.arguments.map(n),source:h.source,astIndex:h.astIndex}},MemberExpression:function(h,n){return{start:h.start,end:h.end,type:"MemberExpression",
object:n(h.object),property:n(h.property),computed:h.computed,source:h.source,astIndex:h.astIndex}},NewExpression:function(h,n){return{start:h.start,end:h.end,type:"NewExpression",callee:n(h.callee),arguments:h.arguments.map(n),source:h.source,astIndex:h.astIndex}},VariableDeclaration:function(h,n){return{start:h.start,end:h.end,type:"VariableDeclaration",declarations:h.declarations.map(n),kind:h.kind,source:h.source,astIndex:h.astIndex}},VariableDeclarator:function(h,n){return{start:h.start,end:h.end,
type:"VariableDeclarator",id:n(h.id),init:n(h.init),source:h.source,astIndex:h.astIndex}},FunctionExpression:function(h,n){return{start:h.start,end:h.end,type:"FunctionExpression",id:n(h.id),params:h.params.map(n),body:n(h.body),source:h.source,astIndex:h.astIndex}},IfStatement:function(h,n){return{start:h.start,end:h.end,type:"IfStatement",test:n(h.test),consequent:n(h.consequent),alternate:n(h.alternate),source:h.source,astIndex:h.astIndex}},ConditionalExpression:function(h,n){return{start:h.start,
end:h.end,type:"ConditionalExpression",test:n(h.test),consequent:n(h.consequent),alternate:n(h.alternate),source:h.source,astIndex:h.astIndex}},SwitchStatement:function(h,n){return{start:h.start,end:h.end,type:"SwitchStatement",discriminant:n(h.discriminant),cases:h.cases.map(n),source:h.source,astIndex:h.astIndex}},SwitchCase:function(h,n){return{start:h.start,end:h.end,type:"SwitchCase",test:n(h.test),consequent:h.consequent.map(n),source:h.source,astIndex:h.astIndex}},BreakStatement:function(h,
n){return{start:h.start,end:h.end,type:"BreakStatement",label:h.label,source:h.source,astIndex:h.astIndex}},ContinueStatement:function(h,n){return{start:h.start,end:h.end,type:"ContinueStatement",label:h.label,source:h.source,astIndex:h.astIndex}},TryStatement:function(h,n){return{start:h.start,end:h.end,type:"TryStatement",block:n(h.block),handler:n(h.handler),finalizer:n(h.finalizer),guardedHandlers:h.guardedHandlers.map(n),source:h.source,astIndex:h.astIndex}},CatchClause:function(h,n){return{start:h.start,
end:h.end,type:"CatchClause",param:n(h.param),guard:n(h.guard),body:n(h.body),source:h.source,astIndex:h.astIndex}},ThrowStatement:function(h,n){return{start:h.start,end:h.end,type:"ThrowStatement",argument:n(h.argument),source:h.source,astIndex:h.astIndex}},ForStatement:function(h,n){return{start:h.start,end:h.end,type:"ForStatement",init:n(h.init),test:n(h.test),update:n(h.update),body:n(h.body),source:h.source,astIndex:h.astIndex}},ForInStatement:function(h,n){return{start:h.start,end:h.end,type:"ForInStatement",
left:n(h.left),right:n(h.right),body:n(h.body),source:h.source,astIndex:h.astIndex}},WhileStatement:function(h,n){return{start:h.start,end:h.end,type:"WhileStatement",test:n(h.test),body:n(h.body),source:h.source,astIndex:h.astIndex}},DoWhileStatement:function(h,n){return{start:h.start,end:h.end,type:"DoWhileStatement",test:n(h.test),body:n(h.body),source:h.source,astIndex:h.astIndex}},WithStatement:function(h,n){return{start:h.start,end:h.end,type:"WithStatement",object:n(h.object),body:n(h.body),
source:h.source,astIndex:h.astIndex}},UnaryExpression:function(h,n){return{start:h.start,end:h.end,type:"UnaryExpression",argument:n(h.argument),operator:h.operator,prefix:h.prefix,source:h.source,astIndex:h.astIndex}},BinaryExpression:function(h,n){return{start:h.start,end:h.end,type:"BinaryExpression",left:n(h.left),operator:h.operator,right:n(h.right),source:h.source,astIndex:h.astIndex}},LogicalExpression:function(h,n){return{start:h.start,end:h.end,type:"LogicalExpression",left:n(h.left),operator:h.operator,
right:n(h.right),source:h.source,astIndex:h.astIndex}},AssignmentExpression:function(h,n){return{start:h.start,end:h.end,type:"AssignmentExpression",left:n(h.left),operator:h.operator,right:n(h.right),source:h.source,astIndex:h.astIndex}},UpdateExpression:function(h,n){return{start:h.start,end:h.end,type:"UpdateExpression",argument:n(h.argument),operator:h.operator,prefix:h.prefix,source:h.source,astIndex:h.astIndex}},ReturnStatement:function(h,n){return{start:h.start,end:h.end,type:"ReturnStatement",
argument:n(h.argument),source:h.source,astIndex:h.astIndex}},Identifier:function(h,n){return{start:h.start,end:h.end,type:"Identifier",name:h.name,source:h.source,astIndex:h.astIndex}},Literal:function(h,n){return{start:h.start,end:h.end,type:"Literal",value:h.value,raw:h.raw,source:h.source,astIndex:h.astIndex}},ObjectExpression:function(h,n){return{start:h.start,end:h.end,type:"ObjectExpression",properties:h.properties.map(function(b){return{key:n(b.key),value:n(b.value),kind:b.kind}}),source:h.source,
astIndex:h.astIndex}},ArrayExpression:function(h,n){return{start:h.start,end:h.end,type:"ArrayExpression",elements:h.elements.map(n),source:h.source,astIndex:h.astIndex}},SequenceExpression:function(h,n){return{start:h.start,end:h.end,type:"SequenceExpression",expressions:h.expressions.map(n),source:h.source,astIndex:h.astIndex}},EmptyStatement:function(h,n){return{start:h.start,end:h.end,type:"EmptyStatement",source:h.source,astIndex:h.astIndex}},ThisExpression:function(h,n){return{start:h.start,
end:h.end,type:"ThisExpression",source:h.source,astIndex:h.astIndex}},DebuggerStatement:function(h,n){return{start:h.start,end:h.end,type:"DebuggerStatement",source:h.source,astIndex:h.astIndex}},LabeledStatement:function(h,n){return{start:h.start,end:h.end,type:"LabeledStatement",label:h.label,body:n(h.body),source:h.source,astIndex:h.astIndex}}},c||{});return k(f)}function Qr(f,c,k){if(!c)return[];f=Ve.findNodesIncluding(f,c.start);var d=f.indexOf(c);f=f.slice(0,d);f=Ve.arr.detect(f.reverse(),function(h){return Array.isArray(h.body)}).body;
if(!k)return Ve.arr.without(f,c);c=f.indexOf(c);return"before"===k?f.slice(0,c):f.slice(c+1)}function oo(f,c,k){f.astIndex||null!=k&&!k||Ve.addAstIndex(f);var d=null;Ve.withMozillaAstDo(f,null,function(h,n,b){d||n.astIndex<c||(n.astIndex===c?d=n:h())});return d}function ka(f,c,k){k||(k=c,c=f,f=null);f||(f={});c.astIndex||Ve.addAstIndex(c);var d,h=!1,n="EmptyStatement BlockStatement ExpressionStatement IfStatement LabeledStatement BreakStatement ContinueStatement WithStatement SwitchStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration".split(" ");
Ve.withMozillaAstDo(c,{},function(b,e,m,a){if(!(h||e.astIndex<k.astIndex)){if(e===k||e.astIndex===k.astIndex)if(h=!0,f.asPath)d=a;else{e=Ve.Path(a);do d=e.get(c),e=e.slice(0,e.size()-1);while(-1==n.indexOf(d.type)&&0<e.size())}!h&&b()}});return d}function cn(f){Ve.withMozillaAstDo(f,{index:0},function(c,k,d){c();k.astIndex=d.index++});return f}function pk(f,c){"string"===typeof f&&(c=f,f=Sg.parse(f));c&&Sg.AllNodesVisitor.run(f,function(k,d,h){return!k.source&&(k.source=c.slice(k.start,k.end))});
return f}function pl(f,c){c=void 0===c?{}:c;var k=Sg.parse("("+f+")",c);Sg.AllNodesVisitor.run(k,function(d,h,n){if(!d._positionFixed){d._positionFixed=!0;if(d.start||0===d.start)d.start+=-1,d.end+=-1;c.addSource&&!d.source&&(d.source=f.slice(d.start,d.end))}});return k.body[0].expression}function om(f,c){c=c||{};c.ecmaVersion=c.ecmaVersion||11;c.sourceType=c.sourceType||"module";c.plugins=c.plugins||{};c.plugins.jsx=c.plugins.hasOwnProperty("jsx")?c.plugins.jsx:!0;c.plugins.asyncawait=c.plugins.hasOwnProperty("asyncawait")?
c.plugins.asyncawait:{inAsyncFunction:!0};c.plugins.objectSpread=c.plugins.hasOwnProperty("objectSpread")?c.plugins.objectSpread:!0;var k;"LabeledStatement"===c.type&&(k="$={"+f+"}");try{var d=Sg.parse(k||f,c);k?d=null:c.addSource&&Sg.addSource(d,f)}catch(n){var h=n}h&&void 0!==h.raisedAt?(k&&(h.pos-=3,h.raisedAt-=3,h.loc.column-=3),k=""+f.slice(h.raisedAt-20,h.raisedAt),k=k+"<-error->"+f.slice(h.raisedAt,h.raisedAt+20),c.verbose&&console.log("parse error: "+k),h.parseErrorSource=k):h&&c.verbose&&
console.log(""+h+h.stack);d||(d=Sg.loose.parse(f,c),c.addSource&&Sg.addSource(d,f),d.isFuzzy=!0,d.parseError=h);return d}function Rd(f,c){function k(l){l=h(d(l));b.allComments=l.comments}function d(l){n.forEach(function(q){var r=Sg.arr.detect(Sg.nodesAt(q.start,b).reverse(),function(u){return"BlockStatement"===u.type||"Program"===u.type});r||(r=b);r.comments||(r.comments=[]);r.comments.push(q);l.nodesWithComments.push(r)});return l}function h(l){l.nodesWithComments.forEach(function(q){Sg.arr.clone(q.comments).reduce(function(r,
u){if(u.isBlock)return r.lastComment=null,r;if(!r.lastComment)return r.lastComment=u,r;var v=r.lastComment;if(Sg.arr.detect(q.body,function(z){return z.start>=v.end&&z.end<=u.start}))return r.lastComment=u,r;var y=f.slice(v.end,u.start);if(/[\n\r][\n\r]+/.test(y))return r.lastComment=u,r;v.text+="\n"+u.text;v.end=u.end;Sg.arr.remove(q.comments,u);Sg.arr.remove(l.comments,u);return r},{lastComment:null})});return l}c=c||{};c.ecmaVersion=c.ecmaVersion||11;c.allowAwaitOutsideFunction=!0;c.sourceType=
c.sourceType||"module";c.hasOwnProperty("allowImportExportEverywhere")||(c.allowImportExportEverywhere=!0);c.plugins=c.plugins||{};c.plugins.jsx=c.plugins.hasOwnProperty("jsx")?c.plugins.jsx:!0;c.plugins.asyncawait=c.plugins.hasOwnProperty("asyncawait")?c.plugins.asyncawait:{inAsyncFunction:!0};c.plugins.objectSpread=c.plugins.hasOwnProperty("objectSpread")?c.plugins.objectSpread:!0;if(c.withComments){delete c.withComments;var n=[];c.onComment=function(l,q,r,u,v,y){n.push({isBlock:l,text:q,node:null,
start:r,end:u,line:v,column:y})}}try{var b=Sg.acorn.parse(f,c)}catch(l){if("undefined"!==typeof SyntaxError&&l instanceof SyntaxError&&l.loc){var e=f.split("\n"),m=l,a=m.loc;c=a.line;a=a.column;var g=m.pos;e=e[c-1];m="Syntax error at line "+c+" column "+a+" (index "+g+') "'+m.message+'"\nsource: '+e.slice(0,a)+"<--SyntaxError--\x3e"+e.slice(a);m=new SyntaxError(m);m.loc={line:c,column:a};m.pos=g;throw m;}throw l;}c.addSource&&Sg.addSource(b,f);c.addAstIndex&&!b.hasOwnProperty("astIndex")&&Sg.addAstIndex(b);
b&&n&&k({ast:b,comments:n,nodesWithComments:[]});return b}function cf(f){return He.identifierRe.test(f)&&-1===f.indexOf("-")}function Da(f){return"this"===f?{type:"ThisExpression"}:{name:String(f),type:"Identifier"}}function Vk(f){return{type:"Literal",value:f}}function dn(f){return{type:"ExpressionStatement",expression:f}}function op(f){return{type:"ReturnStatement",argument:f}}function dv(){return{type:"EmptyStatement"}}function Rw(f,c,k){return{left:f,right:k,operator:c,type:"BinaryExpression"}}
function Ht(f,c,k){for(var d=[],h=2;h<arguments.length;++h)d[h-2]=arguments[h];h=f.arrow;var n=f.id,b=f.expression,e=f.generator;c=void 0===c?[]:c;c=c.map(function(m){return"string"===typeof m?He.id(m):m});return{type:(h?"Arrow":"")+"FunctionExpression",id:n?"string"===typeof n?He.id(n):n:void 0,params:c,body:b&&1===d.length?d[0]:{body:d,type:"BlockStatement"},expression:b||!1,generator:e||!1}}function po(f,c){for(var k=[],d=1;d<arguments.length;++d)k[d-1]=arguments[d];"string"===typeof f&&(f=He.id(f));
return{type:"CallExpression",callee:f,arguments:k}}function yi(f,c,k){"string"===typeof f&&(f={name:f,type:"Identifier"});return{type:"VariableDeclaration",kind:k||"var",declarations:[{type:"VariableDeclarator",id:f,init:c}]}}function en(f,c,k){"string"===typeof f&&(f=He.id(f));"string"===typeof c?(k||He.isIdentifier(c)||(k=!0),c=k?He.literal(c):He.id(c)):"number"===typeof c?(c=He.literal(c),k=!0):"Literal"===c.type&&(k=!0);return{type:"MemberExpression",computed:!!k,object:f,property:c}}function Pj(f,
c){for(var k=[],d=1;d<arguments.length;++d)k[d-1]=arguments[d];return k.reduce(function(h,n){return He.member(h,n)},"object"===typeof f?f:He.id(f))}function qo(f,c){return{type:"AssignmentExpression",operator:"=",right:c?"string"===typeof c?He.id(c):c:He.id("undefined"),left:"string"===typeof f?He.id(f):f}}function Im(f){for(var c=[],k=0;k<arguments.length;++k)c[k-0]=arguments[k];return{body:Array.isArray(c[0])?c[0]:c,type:"BlockStatement"}}function Rr(f){for(var c=[],k=0;k<arguments.length;++k)c[k-
0]=arguments[k];return Object.assign(He.block.apply(He,$jscomp.arrayFromIterable(c)),{sourceType:"module",type:"Program"})}function Wk(f,c,k,d){for(var h=[],n=3;n<arguments.length;++n)h[n-3]=arguments[n];Array.isArray(k)||(h.unshift(k),k=null);return{block:He.block(h),finalizer:k?He.block(k):null,handler:{body:He.block(c),param:He.id(f),type:"CatchClause"},type:"TryStatement"}}function ev(f,c){return{type:"Property",key:f,computed:"Identifier"!==f.type,shorthand:!1,value:c}}function Ol(f){for(var c=
[],k=0;k<f.length;k+=2){var d=f[k];"string"===typeof d&&(d=He.id(d));c.push(He.prop(d,f[k+1]))}return{properties:c,type:"ObjectExpression"}}function Xk(f,c,k){c=void 0===c?He.block():c;k=void 0===k?He.block():k;return{consequent:c,alternate:k,test:f,type:"IfStatement"}}function Sr(f,c,k){return{type:"ForInStatement",left:"string"===typeof f?He.varDecl(f):f,right:"string"===typeof c?He.id(c):c,body:k}}function Tr(f,c,k){c=void 0===c?He.id("undefined"):c;k=void 0===k?He.id("undefined"):k;return{consequent:c,
alternate:k,test:f,type:"ConditionalExpression"}}function Sw(f,c,k){return{operator:f,left:c,right:k,type:"LogicalExpression"}}function It(f){var c=new zd.ScopeVisitor,k=c.newScope(f,null);c.accept(f,k,[]);return k}function Sy(f,c){return zd.withMozillaAstDo(f,[],function(k,d,h){d.start<=c&&c<=d.end&&(h.push(d),k());return h})}function Lh(f,c){return zd.tree.filter(zd.scopes(f),function(k){k=k.node;var d=k.start,h=k.end;"FunctionDeclaration"===k.type&&(d=k.params.length?k.params[0].start:k.body.start,
h=k.body.end);return d<=c&&c<=h},function(k){return k.subScopes})}function Ty(f,c){return zd.arr.last(zd.scopesAtIndex(f,c))}function Uy(f,c){return zd.arr.filter(zd.nodesAt(f,c),function(k){return"Program"===k.type||"FunctionDeclaration"===k.type||"FunctionExpression"===k.type})}function Aq(f){return zd.withMozillaAstDo(f,{root:f,result:[]},function(c,k,d){d.result.push(k);if(k!==d.root&&("Program"===k.type||"FunctionDeclaration"===k.type||"FunctionExpression"===k.type))return d;c();return d}).result}
function Vy(f,c,k){k=void 0===k?[]:k;c&&f.node.id&&f.node.id.name&&k.push(f.node.id);zd.helpers.declIds(f.params,k);for(c=0;c<f.funcDecls.length;c++){var d=f.funcDecls[c].id;d&&k.push(d)}zd.helpers.varDeclIds(f,k);k.push.apply(k,$jscomp.arrayFromIterable(f.catches));for(c=0;c<f.classDecls.length;c++)(d=f.classDecls[c].id)&&k.push(d);k.push.apply(k,$jscomp.arrayFromIterable(f.importSpecifiers));return k}function pp(f,c){for(var k=[],d=$jscomp.makeIterator(zd.declarationsOfScope(f,!0)),h=d.next();!h.done;h=
d.next())k.push(h.value.name);c&&zd._findJsLintGlobalDeclarations("Program"===f.node.type?f.node:f.node.body,k);return k}function En(f,c){c=void 0===c?[]:c;if(!f||!f.comments)return c;f=$jscomp.makeIterator(f.comments);for(var k=f.next();!k.done;k=f.next())if(k=k.value.text.trim(),k.startsWith("global")){k=$jscomp.makeIterator(k.replace(zd.globalDeclRe,"").split(","));for(var d=k.next();!d.done;d=k.next())c.push(d.value.trim())}return c}function ro(f){return zd.FindToplevelFuncDeclVisitor.run(f)}
function so(f,c){if(0==c.length)return[null,null];var k=$jscomp.makeIterator(c);c=k.next().value;k=$jscomp.arrayFromIterator(k);var d=c.decls||zd.declarationsWithIdsOfScope(c);c.decls=d;return d.find(function(h){h=$jscomp.makeIterator(h);h.next();return h.next().value.name==f})||so(f,k)}function Yk(f){function c(d,h){var n=[d].concat(h);d.refs.forEach(function(b){var e=$jscomp.makeIterator(zd.resolveReference(b.name,n)),m=e.next().value;e=e.next().value;k.set(b,{decl:m,declId:e,ref:b})});d.subScopes.forEach(function(b){return c(b,
n)})}if(f.referencesResolvedSafely)return f;var k=f.resolvedRefMap||(f.resolvedRefMap=new Map);c(f,[]);f.referencesResolvedSafely=!0;return f}function Wy(f,c){c=$jscomp.makeIterator(c.resolvedRefMap.values());for(var k=c.next();!k.done;k=c.next()){k=k.value;var d=k.ref,h=d.end;if(d.start<=f&&f<=h)return k}}function ql(f,c){function k(b){var e=zd._declaredVarNames(b,d);return zd.arr.filter(b.subScopes.map(k).reduce(function(m,a){return m.concat(a)},b.refs),function(m){return-1===e.indexOf(m.name)})}
c=c||{};c.withComments=!0;"string"===typeof f&&(f=zd.parse(f,c));f=zd.scopes(f);var d=!!c.jslintGlobalComment;c=zd._declaredVarNames(f,d);var h=f.refs.concat(zd.arr.flatten(f.subScopes.map(k))),n=zd.arr.withoutAll(h.map(function(b){return b.name}),c);return{scope:f,varDecls:f.varDecls,funcDecls:zd.arr.filter(f.funcDecls,function(b){return b.id}),classDecls:zd.arr.filter(f.classDecls,function(b){return b.id}),declaredNames:c,undeclaredNames:n,refs:h,thisRefs:f.thisRefs}}function xj(f,c){f=zd.topLevelDeclsAndRefs(f,
c);var k=f.declaredNames.concat(zd.knownGlobals);return zd.arr.filter(f.refs,function(d){return-1===k.indexOf(d.name)})}function fv(f,c,k,d){if(!c&&!f)throw Error("Need at least ast or code");c=c?c:zd.stringify(f);f=f&&f.loc?f:zd.parse(c,{locations:!0});return zd.withMozillaAstDo(f,[],function(h,n,b){k.every(function(e){return zd.num.between(e,n.loc.start.line,n.loc.end.line)})&&(zd.arr.pushIfNotIncluded(b,n),h());return b})}function qp(f,c,k,d){k=void 0===k?!0:k;d=void 0===d?{refs:[],decls:[]}:d;
if("this"===c)return d.refs.push.apply(d.refs,$jscomp.arrayFromIterable(f.thisRefs)),d;var h=zd.__varDeclIdsFor(f,c);if(!k&&h.length)return d;k=$jscomp.makeIterator(f.refs);for(var n=k.next();!n.done;n=k.next())n=n.value,n.name===c&&d.refs.push(n);d.decls.push.apply(d.decls,$jscomp.arrayFromIterable(h));f=$jscomp.makeIterator(f.subScopes);for(h=f.next();!h.done;h=f.next())qp(h.value,c,!1,d);return d}function gv(f,c,k){var d=null;zd.arr.detect(zd.scopesAtIndex(f,k).reverse(),function(h){h=zd.declarationsOfScope(h,
!0);var n=zd.arr.pluck(h,"name").indexOf(c);if(-1===n)return!1;d=h[n];return!0});return d}function Ur(f,c){c="string"===typeof c?zd.parse(c):c;return zd.custom.findNodesIncluding(c,f)}function pm(f,c,k){var d=zd.nodesAt(c.start,f).reverse().find(function(n){return zd.arr.include(zd._stmtTypes,n.type)});if(k&&k.asPath){c=new zd.BaseVisitor;var h;c.accept=zd.fun.wrap(c.accept,function(n,b,e,m){if(b===d)throw h=m,Error("stop search");return n(b,e,m)});try{c.accept(f,{},[])}catch(n){}return h}return d}
function rp(f){var c=[];f=f.node.body||[];for(var k=0;k<f.length;k++){var d=f[k];if("ImportDeclaration"===d.type)if(0===d.specifiers.length)c.push({local:null,imported:null,fromModule:d.source.value,node:d});else{var h=d.source?d.source.value:"unknown module";c.push.apply(c,$jscomp.arrayFromIterable(d.specifiers.map(function(n){return{local:n.local?n.local.name:null,imported:"ImportNamespaceSpecifier"===n.type?"*":"ImportDefaultSpecifier"===n.type?"default":"ImportSpecifier"===n.type?n.imported.name:
null,fromModule:h,node:d}})))}}return c}function Jt(f,c){(void 0===c?0:c)&&zd.resolveReferences(f);c=[];for(var k={},d=$jscomp.makeIterator(f.exportDecls),h=d.next();!h.done;k={$jscomp$loop$prop$node$2215:k.$jscomp$loop$prop$node$2215},h=d.next()){k.$jscomp$loop$prop$node$2215=h.value;var n=zd.statementOf(f.node,k.$jscomp$loop$prop$node$2215);if(n){var b=n.source?n.source.value:null;"ExportAllDeclaration"===n.type?c.push({local:null,exported:"*",imported:"*",fromModule:b,node:k.$jscomp$loop$prop$node$2215,
type:"all"}):"ExportDefaultDeclaration"===n.type?zd.helpers.isDeclaration(n.declaration)?c.push({local:n.declaration.id?n.declaration.id.name:null,exported:"default",type:"FunctionDeclaration"===n.declaration.type?"function":"ClassDeclaration"===n.declaration.type?"class":null,fromModule:null,node:k.$jscomp$loop$prop$node$2215,decl:n.declaration,declId:n.declaration.id}):"Identifier"===n.declaration.type?(h=f.resolvedRefMap.get(n.declaration)||{},c.push({local:n.declaration.name,exported:"default",
fromModule:null,node:k.$jscomp$loop$prop$node$2215,type:"id",decl:h.decl,declId:h.declId})):c.push({local:null,exported:"default",fromModule:null,node:k.$jscomp$loop$prop$node$2215,type:"expr",decl:n.declaration,declId:n.declaration}):n.specifiers&&n.specifiers.length?c.push.apply(c,$jscomp.arrayFromIterable(n.specifiers.map(function(e){return function(m){if(b){var a=e.$jscomp$loop$prop$node$2215;var g=m.exported}else m.local&&(a=(g=f.resolvedRefMap.get(m.local))?g.decl:null,g=g?g.declId:null);return{local:!b&&
m.local?m.local.name:null,exported:m.exported?m.exported.name:null,imported:b&&m.local?m.local.name:null,fromModule:b||null,type:"id",node:e.$jscomp$loop$prop$node$2215,decl:a,declId:g}}}(k)))):n.declaration&&n.declaration.declarations?c.push.apply(c,$jscomp.arrayFromIterable(n.declaration.declarations.map(function(e){return function(m){return{local:m.id?m.id.name:"default",exported:m.id?m.id.name:"default",type:n.declaration.kind,fromModule:null,node:e.$jscomp$loop$prop$node$2215,decl:m,declId:m.id}}}(k)))):
n.declaration&&c.push({local:n.declaration.id?n.declaration.id.name:"default",exported:n.declaration.id?n.declaration.id.name:"default",type:"FunctionDeclaration"===n.declaration.type?"function":"ClassDeclaration"===n.declaration.type?"class":null,fromModule:null,node:k.$jscomp$loop$prop$node$2215,decl:n.declaration,declId:n.declaration.id})}}return zd.arr.uniqBy(c,function(e,m){return e.local==m.local&&e.exported==m.exported&&e.fromModule==m.fromModule})}function Vr(f){return(new to.ObjectSpreadTransformer).accept(f,
{},[])}function rl(f,c){if(f.start===c.start&&f.end===c.end)return 0;if(f.end<=c.start)return-1;if(f.start>=c.end||f.start<=c.start&&f.end>=c.end)return 1;if(c.start<=f.start&&c.end>=f.end)return-1;throw Error("Comparing nodes");}function sp(f,c,k){k="object"===typeof k?k:{changes:[],source:k};var d=!1,h=k.changes.reduce(function(b,e){if(b.end<e.pos)return b;var m=e.pos<b.start;d=d||e.pos>=b.start&&e.pos<=b.end;if("add"===e.type)return{start:m?b.start+e.string.length:b.start,end:b.end+e.string.length};
if("del"===e.type)return{start:m?b.start-e.length:b.start,end:b.end-e.length};throw Error("Cannot deal with change "+Vd.obj.inspect(e));},{start:f.start,end:f.end}),n=k.source;f=c(f,n.slice(h.start,h.end),d);f="string"===typeof f?f:Array.isArray(f)?f.map(Vd._node2string).join("\n"+Vd._findIndentAt(n,h.start)):f=Vd._node2string(f);h=[{type:"del",pos:h.start,length:h.end-h.start},{type:"add",pos:h.start,string:f}];return{changes:k.changes.concat(h),source:Vd._applyChanges(h,n)}}function Tw(f,c){f=f.sort(function(h,
n){return Vd._compareNodesForReplacement(h.target,n.target)});c="object"===typeof c?c:{changes:[],source:c};for(var k=0;k<f.length;k++){var d=f[k];c=Vd.replaceNode(d.target,d.replacementFunc,c)}return c}function Xy(f,c,k,d){d="object"===typeof f?f:null;f="string"===typeof f?f:d.source||Vd._node2string(d);return Vd.replaceNode(c,k,f)}function zE(f,c){c=void 0===c?[]:c;c.push.apply(c,$jscomp.arrayFromIterable(f.varDecls));f=$jscomp.makeIterator(f.subScopes);for(var k=f.next();!k.done;k=f.next())zE(k.value,
c);return c}function Fn(f){var c="object"===typeof f?f:Vd.parse(f);f="string"===typeof f?f:c.source||Vd._node2string(c);c=Vd.scopes(c);var k=Vd.__findVarDecls(c);c=[];k=$jscomp.makeIterator(k);for(var d=k.next();!d.done;d=k.next())c.push({target:d.value,replacementFunc:function(h,n,b){b&&(h=Vd.parse(n).body[0]);return h.declarations.map(function(e){return{type:"VariableDeclaration",kind:"var",declarations:[e]}})}});return Vd.replaceNodes(c,f)}function hv(f){var c="object"===typeof f?f:Vd.parse(f);
f="string"===typeof f?f:c.source||Vd._node2string(c);c=Vd.scopes(c);var k=Vd.__findVarDecls(c);c=[];k=$jscomp.makeIterator(k);for(var d=k.next();!d.done;d=k.next())c.push({target:d.value,replacementFunc:function(h,n,b){b&&(h=Vd.parse(n).body[0]);n=[];h=$jscomp.makeIterator(h.declarations);for(b=h.next();!b.done;b=h.next()){var e=b.value;b={type:"Identifier",name:"__temp"};n.push({type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:b,init:e.init}]});e=$jscomp.makeIterator(Vd.helpers.objPropertiesAsList(e.id,
[],!1));for(var m=e.next();!m.done;m=e.next())m=m.value.key,n.push(Vd.varDecl(m[m.length-2],Vd.memberChain.apply(Vd,[b.name].concat($jscomp.arrayFromIterable(m))),"var"))}return n}});return Vd.replaceNodes(c,f)}function Kt(f,c){c=c||{};var k=Vd.parse(f,c),d=Vd.arr.last(k.body);if("ExpressionStatement"!==d.type)return c.asAST?k:f;k.body.splice(k.body.length-1,1,Vd.returnStmt(d.expression));return c.asAST?k:Vd.stringify(k)}function iv(f,c){c=c||{};f=Vd.returnLastStatement(f,c);return c.asAST?Vd.program(Vd.funcExpr.apply(Vd,
[{id:c.id||void 0},[]].concat($jscomp.arrayFromIterable(f.body)))):"function"+(c.id?" "+c.id:"")+"() {\n"+f+"\n}"}function Yy(f,c){"string"===typeof f&&(f=Vd.parse(f));c=c||{};var k="Program"===f.type,d=c.startFuncNode||Vd.id("__start_execution");c=c.endFuncNode||Vd.id("__end_execution");var h=Vd.topLevelFuncDecls(f),n=f.body,b=[];h.forEach(function(e){var m=e.node;Vd.Path(e.path).set(f,Vd.exprStmt(m.id));b.push(m)});n.unshift(Vd.exprStmt(Vd.funcCall(d)));d=Vd.arr.last(n);"ExpressionStatement"===
d.type?(n.pop(),n.push(Vd.exprStmt(Vd.funcCall(c,Vd.id("null"),d.expression)))):"VariableDeclaration"===d.type&&"Identifier"===Vd.arr.last(d.declarations).id.type?n.push(Vd.exprStmt(Vd.funcCall(c,Vd.id("null"),Vd.arr.last(d.declarations).id))):n.push(Vd.exprStmt(Vd.funcCall(c,Vd.id("null"),Vd.id("undefined"))));b.push(Vd.tryStmt.apply(Vd,["err",[Vd.exprStmt(Vd.funcCall(c,Vd.id("err"),Vd.id("undefined")))]].concat($jscomp.arrayFromIterable(n))));return k?Vd.program.apply(Vd,$jscomp.arrayFromIterable(b)):
Vd.block.apply(Vd,$jscomp.arrayFromIterable(b))}function Uw(f){if(!Vd.isProbablySingleExpressionRe.test(f)||30<f.split("\n").length)return f;try{var c=Vd.fuzzyParse(f);1===c.body.length&&("FunctionDeclaration"===c.body[0].type||"BlockStatement"===c.body[0].type&&"LabeledStatement"===c.body[0].body[0].type)&&(f="("+f.replace(/;\s*$/,"")+")")}catch(k){"undefined"!==typeof $world?$world.logError(k):console.error("Eval preprocess error: %s",k.stack||k)}return f}function Bq(f,c){var k=Gf.statementOf(f,
c,{asPath:!0}).slice(0,-2);k=Gf.Path(k).get(f);return k.comments&&k.comments.length?Gf.chain(Gf.extractComments(f)).reversed().detect(function(d){return d.followingNode===c}).value():null}function Cq(f,c){function k(r){return Gf.arr.detect(r.node.body,function(u){return u.start>r.comment.end})}function d(r){return{type:"unknown",comment:r.comment.text}}function h(r){r=Gf.Path(r.path.slice(0,-1)).get(g);return{name:r.id?r.id.name:"<error: no name for function>",args:Gf.arr.pluck(r.params,"name")}}
function n(r){for(var u=Gf.Path(r.path.slice(0,-2)).get(g),v=u.key?u.key.name:"<error: no name for method>",y=r.path.slice(),z="<error: no object found for method>";y.length&&"init"!==Gf.arr.last(y);)y.pop();y.length&&(z=Gf.Path(y.slice(0,-1).concat(["id","name"])).get(g));if(Gf.string.startsWith(z,"<error")){for(y=r.path.slice();y.length&&"right"!==Gf.arr.last(y);)y.pop();y.length&&(z=Gf.Path(y.slice(0,-1).concat(["left"])).get(g),z=l.slice(z.start,z.end))}Gf.string.startsWith(z,"<error")&&(y=r.path.slice(),
(r=(r=Gf.Path(y.slice(0,-6)).get(g))&&"CallExpression"===r.type&&r.arguments[0])&&(z=l.slice(r.start,r.end)));return{name:v,args:Gf.arr.pluck(u.value.params,"name"),objectName:z}}function b(r){r=Gf.Path(r.path.slice(0,-1)).get(g);if("FunctionExpression"!==r.type&&"FunctionDeclaration"!==r.type)return{};var u=Gf.statementOf(g,r);if("ExpressionStatement"!==u.type||"AssignmentExpression"!==u.expression.type)return{};var v=l.slice(u.expression.left.object.start,u.expression.left.object.end);return{name:l.slice(u.expression.left.property.start,
u.expression.left.property.end),objectName:v,args:Gf.arr.pluck(r.params,"name")}}function e(r){var u=r.path.slice(0,-3);var v=Gf.Path(u).get(g);if(v&&"Property"===v.type){var y=Gf.arr.pluck(v.value.callee.params,"name");var z=v.key?v.key.name:"<error: no name for method>"}z||(u=r.path.slice(0,-2),(v=Gf.Path(u).get(g))&&"Property"===v.type&&(y=Gf.arr.pluck(v.value.params,"name"),z=v.key?v.key.name:"<error: no name for method>"));z||(z="<error: no name for method>",y=[],u=r.path);v=Gf.arr.clone(u);
for(r="<error: no object found for method>";v.length&&"init"!==Gf.arr.last(v);)v.pop();v.length&&(r=Gf.Path(v.slice(0,-1).concat(["id","name"])).get(g));if(Gf.string.startsWith(r,"<error")){for(v=Gf.arr.clone(u);v.length&&"right"!==Gf.arr.last(v);)v.pop();v.length&&(r=Gf.Path(v.slice(0,-1).concat(["left"])).get(g),r=l.slice(r.start,r.end))}Gf.string.startsWith(r,"<error")&&(v=Gf.arr.clone(u),(u=(u=Gf.Path(v.slice(0,-4)).get(g))&&"CallExpression"===u.type&&u.arguments[0])&&(r=l.slice(u.start,u.end)));
return{name:z,args:y,objectName:r}}function m(r){return r&&"VariableDeclaration"===r.type&&1===r.declarations.length}function a(r){return"AssignmentExpression"!==r.type?!1:"ObjectExpression"===r.right.type?!0:"AssignmentExpression"===r.right.type?a(r.right):!1}var g="string"===typeof f?Gf.parse(f,{withComments:!0}):f,l=c?c:"string"===typeof f?f:Gf.stringify(f),q=Gf.arr.sortBy(function(r){var u=[],v=new Gf.Visitor;v.accept=Gf.fun.wrap(v.accept,function(y,z,A,B){z.comments&&Gf.arr.pushAll(u,z.comments.map(function(G){return{path:B,
comment:G,node:z}}));return y(z,A,B)});v.accept(r,u,[]);return u}(g),function(r){return r.comment.start});return q.map(function(r,u){if(Gf.arr.equals(r.path.slice(-2),["value","body"]))return Gf.obj.merge([r,r.comment,{type:"method",comment:r.comment.text},n(r)]);var v=r.path.slice(-5);Gf.arr.removeAt(v,1);if(Gf.arr.equals(v,["properties","value","callee","body"]))return Gf.obj.merge([r,r.comment,{type:"method",comment:r.comment.text},e(r)]);if((v=Gf.Path(r.path.slice(0,-1)).get(g))&&"FunctionDeclaration"===
v.type)return Gf.obj.merge([r,r.comment,{type:"function",comment:r.comment.text},h(r)]);if(Gf.arr.equals(r.path.slice(-2),["right","body"]))return Gf.obj.merge([r,r.comment,{type:"method",comment:r.comment.text},b(r)]);v=k(r);return v?(u=q[u+1])&&u.comment.start<=v.start?Gf.obj.merge([r,r.comment,{followingNode:v},d(r)]):m(v)&&("ObjectExpression"===v.declarations[0].init.type||a(v.declarations[0].init))?Gf.obj.merge([r,r.comment,{followingNode:v},{type:"object",comment:r.comment.text},{name:v.declarations[0].id.name}]):
m(v)?Gf.obj.merge([r,r.comment,{followingNode:v},{type:"var",comment:r.comment.text},{name:v.declarations[0].id.name}]):Gf.obj.merge([r,r.comment,{followingNode:v},d(r)]):Gf.obj.merge([r,r.comment,{followingNode:v},d(r)])})}function Wr(f,c){c=c||dh.obj.merge({hideOneLiners:!1},c);"string"===typeof f&&(f=dh.parse(f,{addSource:!0}));for(var k=[],d=$jscomp.makeIterator("Program"===f.type?f.body:f.body.body),h=d.next();!h.done;h=d.next()){h=h.value;h=dh.unwrapExport(h);var n=dh.functionWrapper(h,c)||
dh.varDefs(h)||dh.funcDef(h)||dh.es6ClassDef(h)||dh.someObjectExpressionCall(h);if(n){if(c.hideOneLiners)if(f.loc)n=dh.arr.filter(n,function(e){return!e.node.loc||e.node.loc.start.line!==e.node.loc.end.line});else if(f.source){h=[];n=$jscomp.makeIterator(n);for(var b=n.next();!b.done;b=n.next())b=b.value,(b.parent&&h.includes(b.parent)||(b.node.source||"").includes("\n"))&&h.push(b);n=h}k.push.apply(k,$jscomp.arrayFromIterable(n))}}return k}function tp(f){return dh.arr.flatmap(f,function(c){return c?
"Identifier"===c.type?[c]:"RestElement"===c.type?[c.argument]:"ObjectPattern"===c.type?tp(dh.arr.pluck(c.properties,"value")):"ArrayPattern"===c.type?tp(c.elements):[]:[]})}function jv(f){return Tf.isValidIdentifierRe.test(f)}function Zk(){return"undefined"!==typeof System?System.global:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof Global?Global:"undefined"!==typeof self?self:function(){return this}()}function Dq(f,c){c=String(c).match(/function\s*[a-zA-Z0-9_$]*\s*\(([^\)]*)\)/);
return f+"("+(c&&c[1]||"")+")"}function Xr(f){return f===f||f===Array||f===Function||f===String||f===Boolean||f===Date||f===RegExp||f===Number||f===Promise?!0:f instanceof Function&&(void 0!==f.superclass||void 0!==f._superclass)}function up(f,c){return f.map(function(k){return k[c]})}function uo(f){if(Symbol.keyFor(f))return'Symbol.for("'+Symbol.keyFor(f)+'")';if(eh.knownSymbols.get(f))return eh.knownSymbols.get(f);String(f).match(eh.symMatcher);return String(f)}function Yr(f){if(!f)return String(f);
if(Array.isArray(f))return"["+f.map(Yr).join(",")+"]";if("symbol"===typeof f)return eh.printSymbol(f);try{return String(f)}catch(c){throw Error("Cannot print object: "+c.stack);}}function vp(f,c){c=void 0===c?{}:c;var k=f.value,d=f.isPromise,h=f.promisedValue,n=f.promiseStatus;return f.isError||k instanceof Error?(c=String(k),(h=k.stack||"")&&k.message!==k.stack&&(h=String(h),0===h.indexOf(c)&&(h=h.slice(c.length)),c+="\n"+h),c):d?(f=eh.string.print(n),c="pending"===n?void 0:vp({value:h},c),"Promise({status: "+
f+", "+(void 0===k?"":"value: "+c)+"})"):k instanceof Promise?'Promise({status: "unknown"})':c.inspect?eh.printInspectEvalValue(k,c.inspectDepth||2):String(k)}function Lt(f,c){var k="";return Promise.resolve().then(function(){var d=c.lastIndexOf(".");0<=d?(k=c.slice(d+1),c=c.slice(0,d)):(k=c,c='(typeof window === "undefined" ? global : window)');return f(c)}).then(function(d){return{evalResult:d,startLetters:k,code:c}})}function $k(f,c,k){f=Ph.getObjectForCompletion(f,c).then(function(d){var h=d.evalResult;
d={completions:Ph.descriptorsOfObjAndProtoProperties(h&&h.isEvalResult?h.value:h),startLetters:d.startLetters,code:d.code};h&&h.isPromise&&("fulfilled"===h.promiseStatus?d.promiseResolvedCompletions=Ph.descriptorsOfObjAndProtoProperties(h.promisedValue):"rejected"===h.promiseStatus&&(d.promiseRejectedCompletions=Ph.descriptorsOfObjAndProtoProperties(h.promisedValue)));return d});"function"===typeof k&&f.then(function(d){return k(null,d)}).catch(function(d){return k(d)});return f}function kv(f,c,k){c||
(c={type:"Identifier",name:"__rec"});k=Object.assign({ignoreUndeclaredExcept:null,includeRefs:null,excludeRefs:k&&k.exclude||[],includeDecls:null,excludeDecls:k&&k.exclude||[],recordDefRanges:!1,es6ExportFuncId:null,es6ImportFuncId:null,captureObj:c,moduleExportFunc:{name:k&&k.es6ExportFuncId||"_moduleExport",type:"Identifier"},moduleImportFunc:{name:k&&k.es6ImportFuncId||"_moduleImport",type:"Identifier"},declarationWrapper:void 0,classTransform:function(h){return h}},k);c=f;if(k.ignoreUndeclaredExcept){var d=
fc.topLevelDeclsAndRefs(f);k.excludeRefs=fc.arr.withoutAll(d.undeclaredNames,k.ignoreUndeclaredExcept).concat(k.excludeRefs);k.excludeDecls=fc.arr.withoutAll(d.undeclaredNames,k.ignoreUndeclaredExcept).concat(k.excludeDecls)}k.excludeRefs=k.excludeRefs.concat(k.captureObj.name);k.excludeDecls=k.excludeDecls.concat(k.captureObj.name);k.recordDefRanges&&fc.computeDefRanges(c,k);k.excludeRefs=k.excludeRefs.concat(fc.additionalIgnoredRefs(f,k));k.excludeDecls=k.excludeDecls.concat(fc.additionalIgnoredDecls(f,
k));c=fc.fixDefaultAsyncFunctionExportForRegeneratorBug(c,k);k.es6ExportFuncId&&(k.excludeRefs.push(k.es6ExportFuncId),k.excludeRefs.push(k.es6ImportFuncId),c=fc.es6ModuleTransforms(c,k));c=fc.replaceRefs(c,k);c=fc.replaceVarDecls(c,k);c=fc.clearEmptyExports(c,k);c=fc.replaceClassDecls(c,k);c=fc.splitExportDeclarations(c,k);c=fc.insertCapturesForExportDeclarations(c,k);c=fc.insertCapturesForImportDeclarations(c,k);c=fc.insertDeclarationsForExports(c,k);c=fc.putFunctionDeclsInFront(c,k);return c=fc.transformImportMeta(c,
k)}function Zr(f,c,k){k=Object.assign({captureObj:c||{type:"Identifier",name:"__rec"},exclude:[],declarationWrapper:void 0},k);c=fc.Path("body.0.expression").get(f);if("System"!==c.callee.object.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+fc.stringify(f).slice(0,300)+"...");if("register"!==c.callee.property.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+fc.stringify(f).slice(0,
300)+"...");c=fc.Path("arguments.1.body.body").get(c);var d=fc.arr.last(c);if("ReturnStatement"!==d.type)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at return statement: "+fc.stringify(f).slice(0,300)+"...");var h=d.argument.properties.find(function(n){return"setters"===n.key.name});if(!h)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding setters: "+fc.stringify(f).slice(0,300)+
"...");d=d.argument.properties.find(function(n){return"execute"===n.key.name});if(!d)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding execute: "+fc.stringify(f).slice(0,300)+"...");h.value.elements.forEach(function(n){n.params[0]=fc.assign(n.params[0],fc.nodes.objectLiteral({}));n.body.body=n.body.body.map(function(b){if("ExpressionStatement"!==b.type||"AssignmentExpression"!==b.expression.type||"Identifier"!==b.expression.left.type||
fc.arr.include(k.exclude,b.expression.left.name))return b;var e=b.expression.left;b=k.declarationWrapper?fc.declarationWrapperCall(k.declarationWrapper,null,fc.literal(e.name),fc.literal("var"),b.expression,k.captureObj,k):b.expression;return fc.exprStmt(fc.assign(fc.member(k.captureObj,e),b))})});(h=d.value.body.body.find(function(n){return"ExpressionStatement"===n.type&&"AssignmentExpression"==n.expression.type&&n.expression.left.name===k.captureObj.name}))||(h=d.value.body.body.find(function(n){return"VariableDeclaration"===
n.type&&n.declarations[0].id&&n.declarations[0].id.name===k.captureObj.name}));h&&(fc.arr.remove(d.value.body.body,h),fc.arr.pushAt(c,h,c.length-1));k.sourceAccessorName&&((h=d.value.body.body.find(function(n){return"ExpressionStatement"===n.type&&"AssignmentExpression"==n.expression.type&&n.expression.left.name===k.sourceAccessorName}))||(h=d.value.body.body.find(function(n){return"VariableDeclaration"===n.type&&n.declarations[0].id&&n.declarations[0].id.name===k.sourceAccessorName})),h&&(fc.arr.remove(d.value.body.body,
h),fc.arr.pushAt(c,h,c.length-1)));return f}function lv(f,c){var k=fc.stringify(c.captureObj),d=0;f.body=f.body.reduce(function(h,n){var b=[n],e="",m=!1;if("ExportNamedDeclaration"===n.type){if(n.source){var a=n.specifiers.map(function(g){return[g.local.name,g.exported.name]});e="import { "+a.map(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;return g===l?l:g+" as "+l}).join(",")+" } from "+n.source.raw+";\n";m="export { "+a.map(function(g){g=$jscomp.makeIterator(g);g.next();
return g.next().value}).join(",")+" };\n"}else n.declaration?(a=n.declaration.declarations||[],a=a.map(function(g){return[g.id.name,g.id.name]})):a=n.specifiers.map(function(g){return[g.exported.name,g.local.name]});m&&(b=[],e+=m);b=b.concat(fc.parse(e+a.map(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;return k+"."+g+" = "+l+";\n"+(k+"."+l+" = "+l+";\n")}).join("\n")))}"ExportAllDeclaration"===n.type&&(d++,b=b.concat(fc.parse("\n       import * as __captured"+d+"__ from "+
n.source.raw+";\n       Object.assign("+k+", __captured"+d+"__);\n      ")));return h.concat(b)},[]);return f}function sl(f){(this||Vw).__wrapped__=f;(this||Vw).__actions__=[];(this||Vw).__dir__=1;(this||Vw).__filtered__=!1;(this||Vw).__iteratees__=[];(this||Vw).__takeCount__=4294967295;(this||Vw).__views__=[]}function mv(f,c){(this||qB).__wrapped__=f;(this||qB).__actions__=[];(this||qB).__chain__=!!c;(this||qB).__index__=0;(this||qB).__values__=void 0}function nv(f){if(j5(f)&&!k5(f)&&!(f instanceof
l5)){if(f instanceof EQ)return f;if(m5.call(f,"__wrapped__"))return n5(f)}return new EQ(f)}function Zy(f,c,k,d,h,n,b,e,m,a){function g(){for(var z=arguments.length,A=Array(z),B=z;B--;)A[B]=arguments[B];if(u)var G=o5(g),E=p5(A,G);d&&(A=q5(A,d,h,u));n&&(A=r5(A,n,b,u));z-=E;if(u&&z<a)return B=s5(A,G),t5(f,c,Zy,g.placeholder,k,A,B,e,m,a-z);B=q?k:this||AE;G=r?B[f]:f;z=A.length;e?A=u5(A,e):v&&1<z&&A.reverse();l&&m<z&&(A.length=m);(this||AE)&&(this||AE)!==v5&&(this||AE)instanceof g&&(G=y||FQ(G));return G.apply(B,
A)}var l=c&128,q=c&1,r=c&2,u=c&24,v=c&512,y=r?void 0:FQ(f);return g}function Ww(f){return f&&f.__esModule?f:{default:f}}function $y(f){if(Array.isArray(f)){for(var c=0,k=Array(f.length);c<f.length;c++)k[c]=f[c];return k}return Array.from(f)}function Mt(f){var c=null;"string"===typeof f.version&&/^7\./.test(f.version)&&(c=Object.getPrototypeOf(f),!c||Object.prototype.hasOwnProperty.call(c,"version")&&Object.prototype.hasOwnProperty.call(c,"transform")&&Object.prototype.hasOwnProperty.call(c,"template")&&
Object.prototype.hasOwnProperty.call(c,"types")||(c=null));return Object.assign({},c,f)}function Gn(f,c){c=void 0===c?"__lvVarRecorder":c;Mi.ensureJSXPlugin();"function"===typeof f&&(f=String(f));if(lively.FreezerRuntime)return f.split(c+".").join("");f="string"===typeof f?Mi.parseFunction(f):f;f=Mi.ReplaceVisitor.run(f,function(k){return"MemberExpression"===k.type&&"Identifier"===k.object.type&&k.object.name===c?k.property:k});return Mi.stringify(f)}function vo(f){if("undefined"===typeof babel)return console.warn("[lively.freezer] Skipped async/await transpilation because babel not loaded."),
f;Mi.ensureJSXPlugin();Mi.ensureOptionalCatchBinding();Mi.ensureImportMeta();f=babel.transform(f,{sourceMap:void 0,inputSourceMap:void 0,babelrc:!1,presets:[["es2015",{modules:!1}]],plugins:["transform-exponentiation-operator","transform-async-to-generator","syntax-object-rest-spread","transform-object-rest-spread"],code:!0,ast:!1}).code;f=f.replace(/\}\)\.call\(undefined\);$/,"}).call(this)");f.startsWith("(function")&&f.endsWith(");")&&(f=f.slice(1,-2));return f}function Eq(f,c){f=hg.transform.transformSingleExpression(f);
f=hg.parse(f,{withComments:!0});c=hg.processInlineCodeTransformOptions(f,c);var k=hg.query.topLevelDeclsAndRefs(f),d=k.classDecls,h=k.funcDecls;k=k.varDecls;var n={};c.hasOwnProperty("evalId")&&(n.evalId=c.evalId);c.sourceAccessorName&&(n.sourceAccessorName=c.sourceAccessorName);[].concat($jscomp.arrayFromIterable(d),$jscomp.arrayFromIterable(h)).forEach(function(m){return m["x-lively-object-meta"]=Object.assign({},n,{start:m.start,end:m.end})});k.forEach(function(m){return m.declarations.forEach(function(a){return a["x-lively-object-meta"]=
Object.assign({},n,{start:a.start,end:a.end})})});f=hg.transform.objectSpreadTransform(f);!c.topLevelVarRecorder&&c.topLevelVarRecorderName&&(d=hg.getGlobal(),c.topLevelVarRecorder="GLOBAL"===c.topLevelVarRecorderName?hg.getGlobal():hg.Path(c.topLevelVarRecorderName).get(d));if(c.topLevelVarRecorder){d=(c.dontTransform||[]).concat(["arguments"]);h=c.recordGlobals?null:hg.arr.withoutAll(Object.keys(c.topLevelVarRecorder),d);k=hg.id(c.varRecorderName||"__lvVarRecorder");var b=void 0;if(c.declarationWrapperName||
"function"===typeof c.declarationCallback){var e=c.declarationWrapperName||hg.defaultDeclarationWrapperName;c.declarationWrapper=hg.member(hg.id(c.varRecorderName||"__lvVarRecorder"),hg.literal(e),!0);c.declarationCallback&&(c.topLevelVarRecorder[e]=c.declarationCallback)}if(c.hasOwnProperty("transformES6Classes")?c.transformES6Classes:1)b={currentModuleAccessor:c.currentModuleAccessor,classHolder:k,functionNode:hg.member(k,hg.defaultClassToFunctionConverterName),declarationWrapper:c.declarationWrapper,
evalId:c.evalId,sourceAccessorName:c.sourceAccessorName,transform:c.classTransform};f=hg.capturing.rewriteToCaptureTopLevelVariables(f,k,{es6ImportFuncId:c.es6ImportFuncId,es6ExportFuncId:c.es6ExportFuncId,ignoreUndeclaredExcept:h,exclude:d,declarationWrapper:c.declarationWrapper||void 0,classToFunction:b,evalId:c.evalId,sourceAccessorName:c.sourceAccessorName,keepTopLevelVarDecls:c.keepTopLevelVarDecls})}c.wrapInStartEndCall&&(f=hg.transform.wrapInStartEndCall(f,{startFuncNode:c.startFuncNode,endFuncNode:c.endFuncNode}));
f=hg.stringify(f);c.jsx&&(f=hg.es5Transpilation(f));c.sourceURL&&(f+="\n//# sourceURL="+c.sourceURL.replace(/\s/g,"_"));return f}function $r(f,c){c=void 0===c?{}:c;if(!c.topLevelVarRecorder)return f;if("function"===typeof c.declarationCallback||c.declarationWrapperName){var k=c.declarationWrapperName||hg.defaultDeclarationWrapperName;c.declarationWrapper=hg.member(hg.id(c.varRecorderName),hg.literal(k),!0);c.declarationCallback&&(c.topLevelVarRecorder[k]=c.declarationCallback)}f=hg.parse(f);k=(c.dontTransform||
[]).concat(["arguments"]);c.recordGlobals||hg.arr.withoutAll(Object.keys(c.topLevelVarRecorder),k);c=hg.capturing.rewriteToRegisterModuleToCaptureSetters(f,hg.id(c.varRecorderName||"__lvVarRecorder"),Object.assign({exclude:k},c));return hg.stringify(c)}function qm(f,c,k){"function"===typeof c&&2===arguments.length&&(k=c,c=null);var d=new ug.EvalResult,h=!1,n=!1;c=ug._normalizeEvalOptions(c);var b=ug.promise.deferred(),e=c.topLevelVarRecorder||ug.getGlobal(),m=f;c.wrapInStartEndCall&&(e[ug.startEvalFunctionName]&&
console.warn(d.addWarning("startEvalFunctionName "+ug.startEvalFunctionName+" already exists in recorder!")),e[ug.endEvalFunctionName]&&console.warn(d.addWarning("endEvalFunctionName "+ug.endEvalFunctionName+" already exists in recorder!")),e[ug.startEvalFunctionName]=function(){if(h)console.warn(d.addWarning("onEvalStartCalled multiple times!"));else if(h=!0,"function"===typeof c.onStartEval)c.onStartEval()},e[ug.endEvalFunctionName]=function(l,q){n?console.warn(d.addWarning("onEvalEndCalled multiple times!")):
(n=!0,ug.finishEval(l,q,d,c,e,b,k))});try{f=ug.evalCodeTransform(f,c),c.header&&(f=c.header+f),c.footer&&(f+=c.footer),c.transpiler&&(f=c.transpiler(f,c.transpilerOptions))}catch(l){console.warn(d.addWarning("lively.vm evalCodeTransform not working: "+l))}try{"undefined"!==typeof $world&&$world.get("log")&&($world.get("log").textString=f);var a=ug._eval.call(c.context,f,c.topLevelVarRecorder,c.originalSource||m)}catch(l){var g=l}if(c.wrapInStartEndCall){if(g&&!n)e[ug.endEvalFunctionName](g,void 0)}else ug.finishEval(g,
g||a,d,c,e,b,k);return c.sync?d:b.promise}function Xw(f,c){c=Object.assign(c||{},{sync:!0});return ug.runEval(f,c)}function Yw(f){if(void 0===f){if("undefined"===typeof System)return null;f=System}var c=f.get("@lively-env");c||f.set("@lively-env",f.newModule({options:{}}));c=c.options;if(!c)throw Error("@lively-env registered read-only");c.emitter||Object.assign(c,{emitter:f["__lively.notifications_emitter"]||(f["__lively.notifications_emitter"]=az({},{maxListenerLimit:1E4})),notifications:f["__lively.notifications_notifications"]||
(f["__lively.notifications_notifications"]=[])});return{emitter:c.emitter,notifications:c.notifications}}function Fq(f,c,k){Yw(k).emitter.on(f,c);return c}function qk(f,c,k,d){c=void 0===c?{}:c;k=void 0===k?Date.now():k;c=Object.assign({type:f,time:k},c);k=Yw(d);d=k.emitter;k=k.notifications;d.emit(f,c);d.isLogging&&(f=c.type+" ".repeat(Math.max(0,32-c.type.length)),console.log(f+" "+mb(c,{maxDepth:2})));d.isRecording&&(k.push(c),k.limit&&k.splice(0,k.length-k.limit));return c}function wp(f,c,k){Yw(k).emitter.removeListener(f,
c);return c}function Hn(f,c,k){k=Object.assign({targetModule:null,parentModule:null,es6Transpile:!0,transpiler:null,transpilerOptions:null,format:"esm"},k);f.debug&&console.log("[lively.module] runEval: "+c.slice(0,100).replace(/\n/mg," ")+"...");var d=k,h=d.format,n=d.targetModule;n=f.decanonicalize(n||"*scratch*",d.parentModule);k.targetModule=n;h&&((d=f.getConfig().meta[n])||(d={}),d[n]||(d[n]={}),d[n].format||(d[n].format=h,f.config(d)));h=f.get("@lively-env").moduleEnv(n);d=h.recorder;var b=
h.recorderName,e=h.dontTransform,m=xh.getEs6Transpiler(f,k,h),a="var _moduleExport = "+b+"._moduleExport,\n    _moduleImport = "+(b+"._moduleImport;\n");k=Object.assign({waitForPromise:!0,sync:!1,evalId:k.evalId||h.nextEvalId(),sourceAccessorName:(k.hasOwnProperty("embedOriginalCode")?k.embedOriginalCode:1)?"__lvOriginalCode":void 0,originalSource:c},k,{header:a,recordGlobals:!0,dontTransform:e,varRecorderName:b,topLevelVarRecorder:d,sourceURL:k.sourceURL||k.targetModule,context:k.context||d,wrapInStartEndCall:!0,
es6ExportFuncId:"_moduleExport",es6ImportFuncId:"_moduleImport",transpiler:m,declarationWrapperName:h.varDefinitionCallbackName,currentModuleAccessor:xh.funcCall(xh.member(xh.funcCall(xh.member(xh.member("__lvVarRecorder","System"),"get"),xh.literal("@lively-env")),"moduleEnv"),xh.literal(k.targetModule))});if(!k.sync&&!k.importsEnsured&&xh.hasUnimportedImports(f,c,n))return xh.ensureImportsAreImported(f,c,n).catch(function(g){return null}).then(function(g){return Hn(f,g,Object.assign({},k,{importsEnsured:!0}))});
if(!h.record()){if(!k.sync&&!k._moduleImported)return f.import(n).catch(function(g){return null}).then(function(){return Hn(f,c,Object.assign({},k,{_moduleImported:!0}))});h.ensureRecord()}if(k.es6Transpile&&k.transpiler instanceof Promise)if(k.sync||k._transpilerLoaded)console.warn("[lively.vm] sync eval requested but transpiler is not yet loaded, will continue without transpilation!"),k.transpiler=null;else return k.transpiler.catch(function(g){return console.error(g)}).then(function(g){return Hn(f,
c,Object.assign({},k,{transpiler:g,_transpilerLoaded:!0}))});f.debug&&console.log("[lively.module] runEval in module "+n+" started");xh.emit("lively.vm/doitrequest",{code:c,waitForPromise:k.waitForPromise,targetModule:k.targetModule},Date.now(),f);f.get("@lively-env").evaluationStart(n);n=xh.vmRunEval(c,k);return k.sync?xh.evalEnd(f,c,k,n):Promise.resolve(n).then(function(g){return xh.evalEnd(f,c,k,g)})}function al(f,c){var k=c=Object.assign({format:"esm",System:null,targetModule:null},c),d=k.format,
h=k.System;k=k.targetModule;h||"undefined"===typeof System||(h=System);return!h&&k?Promise.reject(Error("options to runEval have targetModule but cannot find system loader!")):k&&["esm","es6","register"].includes(d)?Vj.esmEval.runEval(h,f,c):Vj.globalEval.runEval(f,c)}function xp(f,c){return Vj.globalEval.syncEval(f,c)}function bz(f){return af.withSuperclasses(f).slice(1)}function bl(f){var c=[];do c.push(f),f=f[af.superclassSymbol];while(f&&f.name);return c.map(function(k){return k.name}).join("->")}
function as(f){for(var c=[];f;)c.push(f),f=f[af.superclassSymbol];return c}function In(f,c){do if(f===c)return!0;while(f=f[af.superclassSymbol]);return!1}function cz(f,c){if(f.constructor===c&&f.__proto__===c.prototype)return f;f.constructor=c;f.__proto__=c.prototype;return f}function Gq(f){return f&&"function"===typeof f}function Nt(f){var c=af.RuntimeSourceDescriptor.for(f),k=c.ast;c=c.type;if("ClassDeclaration"!==c)throw Error("Expected class but got "+c);return af.Path("body.body").get(k).map(function(d){var h=
d.static,n=d.kind;d=d.key;var b=d.value;d=d.name||b;b=h?f:f.prototype;b="get"===n?b.__lookupGetter__(d):"set"===n?b.__lookupSetter__(d):b[d];return{static:h,name:d,value:b,kind:n,owner:f}})}function Hq(f){return af.runtimeNonStaticMembers(f).concat(af.runtimeNonStaticMembers(f))}function Iq(f){var c=af.obj.getOwnPropertyDescriptors(f);return af.arr.withoutAll(Object.keys(c),["prototype","name","length","toString"]).map(function(k){var d=c[k],h="function"===typeof d.value?"method":"get"in d?"get":
"set"in d?"set":"unknown";return{static:!0,name:k,value:"method"===h?d.value:"get"===h?d.get:"set"===h?d.set:null,kind:h,owner:f}})}function Ot(f){return af.arr.uniq(af.arr.flatmap(af.arr.without(af.withSuperclasses(f),Object),function(c){return af.runtimeStaticClassMembers(c)}))}function Pt(f){var c=bi.propertiesAndSettingsInHierarchyOf(f),k=c.properties;c=c.propertySettings;f[bi.propertiesAndSettingsCacheSym]={properties:k,order:bi.obj.sortKeysWithBeforeAndAfterConstraints(k),propertySettings:c,
classHierarchy:bi.getClassHierarchy(f)};k&&"object"===typeof k?bi.prepareClassForProperties(f,c,k):console.warn("Class "+f.name+" indicates it has managed properties but its properties accessor ("+(bi.defaultPropertiesKey+") does not return a valid property descriptor map"))}function wo(f,c){c!==f.constructor&&(f.constructor=c,Hf.setPrototypeOf(f,c.prototype))}function Qt(f,c){c=c?"function"===typeof c?c:c.value?c.value:Object:Object;var k=f&&f[Hf.superclassSymbol];k&&k===c||(Hf.ensureInitializeStub(c),
f[Hf.superclassSymbol]=c,Hf.setPrototypeOf(f.prototype,c.prototype),c!==Object&&Hf.setPrototypeOf(f,c));return c}function Sb(f,c,k,d,h,n,b){k=void 0===k?[]:k;d=void 0===d?[]:d;h=void 0===h?{}:h;var e=f.name,m=e&&h.hasOwnProperty(e)&&h[e];h=m&&m[Hf.superclassSymbol];m&&"function"===typeof m&&h||(m=f);Hf.setSuperclass(m,c);Hf.installMethods(m,k,d);m[Hf.objMetaSymbol]=b;n&&(f=n.package(),b=m[Hf.moduleMetaSymbol],h=Date.now(),m[Hf.moduleMetaSymbol]={package:f?{name:f.name,version:f.version}:{},pathInPackage:f?
n.pathInPackage():n.id,lastChange:b&&b.lastChange&&h<=b.lastChange?b.lastChange+1:h,lastSuperclassChange:0},c&&c.referencedAs&&(m.hasOwnProperty(Hf.moduleSubscribeToToplevelChangesSym)&&n.unsubscribeFromToplevelDefinitionChanges(m[Hf.moduleSubscribeToToplevelChangesSym]),m[Hf.moduleSubscribeToToplevelChangesSym]=n.subscribeToToplevelDefinitionChanges(function(a,g){if(a===c.referencedAs){a=g&&g[Hf.moduleMetaSymbol];var l=m[Hf.moduleMetaSymbol];if(a){if(a.lastChange===l.lastSuperclassChange)return;
l.lastSuperclassChange=a.lastChange}Hf.setSuperclass(m,g);Hf.installMethods(m,k,d);Hf.prepareClassForManagedPropertiesAfterCreation(m)}})));m.toString=function(){var a=String(this.prototype[Hf.initializeSymbol]).match(Hf.constructorArgMatcher),g=this[Hf.superclassSymbol];return"class "+this.name+" "+(g?"extends "+g.name:"")+" {\n  constructor"+((a?a[0]:"()")+" { /*...*/ }\n}")};Hf.prepareClassForManagedPropertiesAfterCreation(m);return m}function Rt(f){f=new sd.Color(f);return{red:f.red()/255,green:f.green()/
255,blue:f.blue()/255,alpha:f.alpha()}}function fk(f,c,k,d,h){"function"!==typeof k||"undefined"!==typeof d&&"object"!==typeof d||(h=d,d="call",h||(h={}),h.updater||(h.updater=function(m,a){return m(null,a)}));var n=f.getConnectionPoints&&f.getConnectionPoints()||f.connections,b=(n=n&&n[c])&&n.map&&lively.morphic&&lively.morphic.GeometryConnection||n&&n.connectionClassType&&lively.Class.forName(n.connectionClassType)||zg.AttributeConnection;"function"===typeof h&&(console.warn("Directly passing a converter function to connect() is deprecated! Use spec object instead!"),
h={converter:h});n&&(h=zg.obj.merge(n,h));b=new b(f,c,k,d,h);var e=b.getExistingConnection();if(e)return e.resetSpec(),e.init(f,c,k,d,h),e;h=b.connect();if("function"===typeof f.onConnect)f.onConnect(c,k,d);n&&n.updateOnConnect&&b.update(f[c]);return h}function Jm(f,c,k,d){"function"!==typeof k||"undefined"!==typeof d&&"object"!==typeof d||(d="call");if(f.attributeConnections){for(var h=$jscomp.makeIterator(f.attributeConnections.slice()),n=h.next();!n.done;n=h.next())n=n.value,n.getSourceAttrName()==
c&&n.getTargetObj()===k&&n.getTargetMethodName()==d&&n.disconnect();if("function"==typeof f.onDisconnect)f.onDisconnect(c,k,d)}}function ov(f){for(var c;f.attributeConnections&&(c=f.attributeConnections[0]);)c.disconnect()}function Xe(f,c,k,d,h){"function"!==typeof k||"undefined"!==typeof d&&"object"!==typeof d?h=h||{}:(h=d,d="call",h=h||{},h.updater||(h.updater=function(n,b){return n(null,b)}));h=h||{};h.removeAfterUpdate=!0;return zg.connect(f,c,k,d,h)}function tl(f,c,k){var d=f.attributeConnections;
if(d){f=f[c];for(var h=0,n=d.length;h<n;h++){var b=d[h];b.getSourceAttrName()==c&&b.update(k,f)}}}function dz(f,c,k,d){if(null!=f[c])k[d](f[c]);else zg.connect(f,c,k,d,{removeAfterUpdate:!0})}function ez(f,c,k,d){for(var h={key:c.pop(),whenDefined:function(n){zg.callWhenNotNull(n,this.key,k,d)}};0<c.length;)h={key:c.pop(),next:h,whenDefined:function(n){zg.callWhenNotNull(n,this.key,this.next,"whenDefined")}};h.whenDefined(f)}function yp(f,c){var k=!1;c||"function"!==typeof f||(c=f,k=!0);if(k){f=zg.AttributeConnection.prototype;
f.isActive||(f.isActive=0);f.isActive++;try{var d=c()}finally{f.isActive--,0>=f.isActive&&delete f.isActive}}else{k=f.sourceObj;var h=f.sourceAttribute,n=f.targetObj,b=f.targetAttribute;f=n&&b?function(e){return e.getSourceAttrName()===h&&n===e.getTargetObj()&&b===e.getTargetMethodName()}:function(e){return e.getSourceAttrName()===h};(f=k.attributeConnections&&k.attributeConnections.filter(f))&&zg.arr.invoke(f,"activate");try{d=c()}finally{f&&zg.arr.invoke(f,"deactivate")}}return d}function pv(f){if(null==
f)return!0;f=typeof f;return"boolean"===f||"number"===f||"string"===f?!0:!1}function Jn(f){return f.constructor.className||f.constructor.name}function zp(f){if(f&&f.constructor){var c=Ni.getClassName(f);if(c){if(f=f.constructor[Ni.moduleMetaInClassProp],"Object"!==c||f)return f&&(delete f.lastChange,delete f.lastSuperclassChange),{className:c,module:f}}else console.warn("Cannot serialize class info of anonymous class of instance "+f)}}function kj(f){var c=f.module;if(c){var k=c.pathInPackage;if(c.package&&
c.package.name&&"no group"!==c.package.name){var d=System.decanonicalize(c.package.name.replace(/\/*$/,"/"));k=Ni.string.joinPath(d,k)}d=System.get("@lively-env");if(c=d.moduleEnv(k)||d.moduleEnv(c.pathInPackage))return c.recorder[f.className];console.warn("Trying to deserialize instance of class "+f.className+" but the module "+k+" is not yet loaded")}return System.global[f.className]}function lj(f,c,k){c=void 0===c?function(a){return a}:c;k=void 0===k?{}:k;var d=new Yh.ExpressionSerializer,h=k,
n=k.isMorph?k.propertiesAndPropertySettings().order:[];n=n.length?n:Yh.obj.keys(f);for(var b=$jscomp.makeIterator(n),e=b.next();!e.done;e=b.next()){e=e.value;var m=f[e];if("_env"===e||"env"===e||"__connections__"===e||"__refs__"===e)return;Yh.obj.isString(m)&&d.isSerializedExpression(m)&&(m=d.deserializeExpr(m));["borderColor","borderWidth","borderStyle","borderRadius"].includes(e)&&(m=lj(m,c));m&&m._id&&(m=c(lj(m,c)));h[e]=m}f.submorphs&&(h.submorphs=f.submorphs.map(function(a){return lj(a,c)}));
if(k)for(d=$jscomp.makeIterator(n.filter(function(a){return!!f[a]})),e=d.next();!e.done;e=d.next())n=e.value,k[n]=h[n];if(f.__refs__)for(k=$jscomp.makeIterator(f.__refs__),d=k.next();!d.done;d=k.next())n=$jscomp.makeIterator(d.value),d=n.next().value,n=n.next().value,Yh.Path(d).set(h,Yh.Path(n).get(h));if(f.__connections__)for(k=$jscomp.makeIterator(f.__connections__),d=k.next();!d.done;d=k.next())d=d.value,Yh.connect(Yh.Path(d.pathToSource).get(h),d.sourceAttrName,Yh.Path(d.pathToTarget).get(h),
d.targetMethodName,Object.assign({},Yh.obj.select(d,["garbageCollect","converterString","updaterString","varMapping"])));return h}function Ki(f,c){var k=c=void 0===c?{}:c,d=void 0===k.keepFunctions?!0:k.keepFunctions,h=void 0===k.skipAttributes?[]:k.skipAttributes,n=void 0===k.keepConnections?!0:k.keepConnections,b=void 0===k.asExpression?!1:k.asExpression;c=void 0===k.root?!0:k.root;var e=void 0===k.path?"":k.path,m=void 0===k.skipUnchangedFromDefault?!1:k.skipUnchangedFromDefault,a=void 0===k.nestedExpressions?
{}:k.nestedExpressions,g=void 0===k.objToPath?new WeakMap:k.objToPath,l=void 0===k.objRefs?[]:k.objRefs;k=void 0===k.connections?[]:k.connections;var q={skipAttributes:h,skipUnchangedFromDefault:m,root:!1,keepFunctions:d,asExpression:b,nestedExpressions:a,connections:k,objRefs:l,objToPath:g,keepConnections:n};if(g.has(f))return l.push([e,g.get(f)]),null;g.set(f,e);b&&(d=!1);var r=new Yh.ExpressionSerializer,u=function(ra,D){try{if(D=D.__serialize__(),b){var O=Yh.string.newUUID();a[O]=D;D=O}else D=
D.__expr__?r.exprStringEncode(D):D}catch(L){console.log("[export to JSON] failed converting "+ra+" to serialized expression")}return D},v={};g.set(f,e);n&&f.attributeConnections&&k.push.apply(k,$jscomp.arrayFromIterable(f.attributeConnections));f.isText&&(v.textAndAttributes=f.textAndAttributes.map(function(ra,D){return ra&&ra.isMorph?Ki(ra,Object.assign({},q,{path:e?e+".textAndAttributes."+D:"textAndAttributes."+D})):ra}));f.submorphs&&0<f.submorphs.length&&(v.submorphs=f.submorphs.map(function(ra,
D){return Ki(ra,Object.assign({},q,{path:e?e+".submorphs."+D:"submorphs."+D}))}).filter(Boolean));var y={};for(J in f.spec(m)){y.$jscomp$loop$prop$name$2220=J;m=f[y.$jscomp$loop$prop$name$2220];!m||"object"!==typeof m||Array.isArray(m)||m.isMorph||g.set(m,e?e+"."+y.$jscomp$loop$prop$name$2220:y.$jscomp$loop$prop$name$2220);if("submorphs"!==y.$jscomp$loop$prop$name$2220&&!h.includes(y.$jscomp$loop$prop$name$2220))if("metadata"===y.$jscomp$loop$prop$name$2220&&Yh.Path("commit.__serialize__").get(m))v[y.$jscomp$loop$prop$name$2220]=
Object.assign({},m,{commit:u(y.$jscomp$loop$prop$name$2220+".commit",m.commit)});else if(["borderColor","borderWidth","borderStyle","borderRadius"].includes(y.$jscomp$loop$prop$name$2220)){for(var z={},A=$jscomp.makeIterator(["top","left","right","bottom"]),B=A.next();!B.done;B=A.next()){B=B.value;var G=m[B];if(G&&G.__serialize__&&(G=G.__serialize__())&&G.__expr__)if(b){var E=Yh.string.newUUID();a[E]=G;G=E}else G=r.exprStringEncode(G);z[B]=G}v[y.$jscomp$loop$prop$name$2220]=z}else if(m&&m.isMorph)v[y.$jscomp$loop$prop$name$2220]=
Ki(m,Object.assign({},q,{path:e?e+"."+y.$jscomp$loop$prop$name$2220:y.$jscomp$loop$prop$name$2220}));else if(m&&m.__serialize__)v[y.$jscomp$loop$prop$name$2220]=u(y.$jscomp$loop$prop$name$2220,m);else if(Array.isArray(m))v[y.$jscomp$loop$prop$name$2220]=m.map(function(ra){return function(D,O){return D&&D.isMorph?Ki(D,Object.assign({},q,{path:e?e+"."+ra.$jscomp$loop$prop$name$2220+"."+O:ra.$jscomp$loop$prop$name$2220+"."+O})):D&&D.__serialize__?u(ra.$jscomp$loop$prop$name$2220+"."+O,D):D}}(y));else{if(m&&
!Yh.obj.isString(m)&&!Yh.obj.isNumber(m)&&0<Yh.properties.allOwnPropertiesOrFunctions(m).length)for(var K in m)m[K]&&m[K].isMorph&&(m[K]=Ki(m[K],Object.assign({},q,{path:e?e+"."+y.$jscomp$loop$prop$name$2220+"."+K:y.$jscomp$loop$prop$name$2220+"."+K})));v[y.$jscomp$loop$prop$name$2220]=m}y={$jscomp$loop$prop$name$2220:y.$jscomp$loop$prop$name$2220}}f.isText&&delete v.textString;b||(v._id=f._id);d?(v.type=f.constructor,Object.keys(f).forEach(function(ra){return"function"===typeof f[ra]&&(v[ra]=f[ra])})):
(v.styleSheets&&(v.styleSheets=[]),v.type=Yh.getSerializableClassMeta(f));if(n&&c){var J=[];K=$jscomp.makeIterator(k);for(d=K.next();!d.done;d=K.next())A=d=d.value,h=A.sourceAttrName,n=A.targetMethodName,z=A.targetObj,k=A.updaterString,y=A.converterString,m=A.garbageCollect,A=g.get(A.sourceObj),z=g.get(z),"string"===typeof A&&"string"===typeof z?J.push({pathToSource:A,pathToTarget:z,garbageCollect:m,updaterString:k,converterString:y,sourceAttrName:h,targetMethodName:n,varMapping:{properties:$m}}):
console.log("skipping:",d);b||(v.__connections__=J)}if(b&&c){c="morph("+Yh.obj.inspect(v)+")";var P={"lively.morphic":["morph"]},ea;for(ea in a)c=c.replace('"'+ea+'"',a[ea].__expr__),Object.entries(a[ea].bindings||{}).forEach(function(ra){var D=$jscomp.makeIterator(ra);ra=D.next().value;D=D.next().value;P[ra]=P[ra]?Yh.arr.uniq([].concat($jscomp.arrayFromIterable(P[ra]),$jscomp.arrayFromIterable(D))):D});return{__expr__:c,bindings:P}}c&&(v.__refs__=l);return v}function rB(f){var c={},k;for(k in f)c[k]=
rf.referencesOfId(f,k);return c}function Zw(f){return f&&f.__ref__}function Zf(f,c){var k={};return rf.referencesOfId((k[f.id]=f.currentSnapshot,k),f.id,c)}function qv(f,c,k){f=f[c];c=[];for(var d in f.props){var h=f.props[d]||{},n=h.value;h=h.verbatim;Array.isArray(n)?c.push.apply(c,$jscomp.arrayFromIterable(rf.referencesInArray(n,k&&d))):!h&&n&&rf.isReference(n)&&c.push(k?{key:d,id:n.id}:n.id)}if(f.hasOwnProperty("entries"))for(d=0;d<f.entries.length;d++)n=f.entries[d],Array.isArray(n)?c.push.apply(c,
$jscomp.arrayFromIterable(rf.referencesInArray(n,k&&n))):n&&rf.isReference(n)&&c.push(k?{key:n,id:n.id}:n.id);return c}function St(f,c){for(var k=[],d=0;d<f.length;d++){var h=f[d];Array.isArray(h)?k.push.apply(k,$jscomp.arrayFromIterable(St(h,c?c+"["+d+"]":void 0))):h&&rf.isReference(h)&&k.push(c?{key:c+"["+d+"]",id:h.id}:h.id)}return k}function rv(f,c){return(f[c][rf.ClassHelper.classMetaForSerializationProp]||{}).module||{}}function xo(f,c){return rf.referencesOfId(f,c).map(function(k){return k+
":"+rf.classNameOfId(f,k)})}function fn(f,c){return(f[c][rf.ClassHelper.classMetaForSerializationProp]||{}).className||"Object"}function gn(f,c,k,d){function h(u,v,y){if(!g)if(50<y)alert(""+m);else if(u===v)m.push(u),g=m.slice();else if(!a[u]){a[u]=!0;m.push(u);u=rf.referencesOfId(f,u);for(var z=0;z<u.length;z++)h(u[z],v,y+1);m.pop()}}d=void 0===d?{}:d;var n=void 0===d.showPath?!0:d.showPath,b=d.hasOwnProperty("showClassNames")?d.showClassNames:!n,e=d.hasOwnProperty("showPropNames")?d.showPropNames:
n;d=d.hasOwnProperty("hideId")?d.hideId:n;var m=[],a={},g;h(c,k,0);if(!g)return null;if(!b&&!e)return g;c=[];for(k=0;k<g.length-1;k++){var l=g[k],q=g[k+1],r=[];d||r.push(l);b&&r.push((f[l][rf.ClassHelper.classMetaForSerializationProp]||{}).className||"Object");e&&(l=rf.referencesOfId(f,l,!0).find(function(u){return u.id===q})||{key:"????"},r.push(l.key));c.push(r.join(":"))}n&&(c="."+c.join("."));return c}function sB(f,c,k){k=k.replace(/^\./,"");k=k.replace(/\[([^\]])+\]/g,".$1");k=rf.Path(k).parts();
var d=f[c];for(c=0;;){if(1E3<c++)throw"stop";var h=k.shift();if(!h)break;if(!d.props||!d.props[h])throw Error("Property "+h+" not found for ref "+JSON.stringify(d));d=d.props[h].value;if(!d)throw Error("Property "+h+" has no value");for(;Array.isArray(d);)d=d[k.shift()];if(!d||!d.__ref__)return d;d=f[d.id]}return d}function tB(f,c,k,d){k=k.replace(/^\./,"");k=k.replace(/\[([^\]])+\]/g,".$1");k=rf.Path(k).parts();f=f[c];c=k.shift();if(!f.props||!f.props[c])throw Error("Property "+c+" not found for ref "+
JSON.stringify(f));var h=(f.props[c]||{}).value;if(!h)throw Error("Property "+c+" has no value");if(k.length){var n=rf.Path(k).get(h);rf.Path(k).set(h,d(f,c,n))}else f.props[c].value=d(f,c,h)}function Ap(f,c){var k=rf.arr.withoutAll(Object.keys(c),f),d=k.filter(function(n){if("AttributeConnection"===rf.classNameOfId(c,n))return c[n].props.garbageCollect.value}),h=rf.referenceGraph(rf.obj.dissoc(Object.assign({},c),d));f.forEach(function(n){n=rf.graph.subgraphReachableBy(h,n);for(var b=k.length;b--;)k[b]in
n&&k.splice(b,1)});k.forEach(function(n){return delete c[n]});return k}function fz(f){var c={},k;for(k in f){c.$jscomp$loop$prop$id$749$2222=k;if("AttributeConnection"===rf.classNameOfId(f,c.$jscomp$loop$prop$id$749$2222)){var d=f[c.$jscomp$loop$prop$id$749$2222];if(!f[rf.Path("props.targetObj.value.id").get(d)]){if(d=f[rf.Path("props.sourceObj.value.id").get(d)])d.props.attributeConnections.value=d.props.attributeConnections.value.filter(function(h){return function(n){return n.id!=h.$jscomp$loop$prop$id$749$2222}}(c));
delete f[c.$jscomp$loop$prop$id$749$2222]}}c={$jscomp$loop$prop$id$749$2222:c.$jscomp$loop$prop$id$749$2222}}}function Jq(f,c){c=void 0===c?rf.defaultExprSerializer:c;f.snapshot&&(f=f.snapshot);for(var k=[],d=0,h=Object.keys(f);d<h.length;d++){var n=f[h[d]];if(n.__expr__)(n=c.requiredModulesOf__expr__(n.__expr__))&&k.push.apply(k,$jscomp.arrayFromIterable(n));else{var b=rf.ClassHelper.sourceModulesInObjRef(n);b&&b.length&&k.push.apply(k,$jscomp.arrayFromIterable(b.map(function(m){return(m.package&&
m.package.name||"")+"/"+m.pathInPackage})));if(n.props)for(var e in n.props)b=n.props[e].value,"string"===typeof b&&(b=c.requiredModulesOf__expr__(b))&&k.push.apply(k,$jscomp.arrayFromIterable(b))}}return k=rf.arr.uniq(k)}function gz(){if(GQ)return HQ;GQ=!0;return HQ={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16}}function uB(){throw Error("setTimeout has not been defined");}function vB(){throw Error("clearTimeout has not been defined");
}function wB(f){if(sv===setTimeout)return setTimeout(f,0);if((sv===uB||!sv)&&setTimeout)return sv=setTimeout,setTimeout(f,0);try{return sv(f,0)}catch(c){try{return sv.call(null,f,0)}catch(k){return sv.call(this||hz,f,0)}}}function WJ(){iz&&$w&&(iz=!1,$w.length?Tt=$w.concat(Tt):BE=-1,Tt.length&&fh())}function fh(){if(!iz){var f=wB(WJ);iz=!0;for(var c=Tt.length;c;){$w=Tt;for(Tt=[];++BE<c;)$w&&$w[BE].run();BE=-1;c=Tt.length}$w=null;iz=!1;(function(k){if(tv===clearTimeout)return clearTimeout(k);if((tv===
vB||!tv)&&clearTimeout)return tv=clearTimeout,clearTimeout(k);try{tv(k)}catch(d){try{return tv.call(null,k)}catch(h){return tv.call(this||hz,k)}}})(f)}}function xB(f,c){(this||hz).fun=f;(this||hz).array=c}function Bp(){}function Cp(){if(IQ)return JQ;IQ=!0;var f=KQ;return JQ="object"===typeof f&&f.env&&f.env.NODE_DEBUG&&/\bsemver\b/i.test(f.env.NODE_DEBUG)?function(c){for(var k=[],d=0;d<arguments.length;++d)k[d-0]=arguments[d];return console.error.apply(console,["SEMVER"].concat($jscomp.arrayFromIterable(k)))}:
function(){}}function Ut(){if(LQ)return bs;LQ=!0;var f=gz().MAX_SAFE_COMPONENT_LENGTH,c=Cp();bs=bs={};var k=bs.re=[],d=bs.src=[],h=bs.t={},n=0,b=function(e,m,a){var g=n++;c(g,m);h[e]=g;d[g]=m;k[g]=new RegExp(m,a?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*");b("NUMERICIDENTIFIERLOOSE","[0-9]+");b("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");b("MAINVERSION","("+d[h.NUMERICIDENTIFIER]+")\\.("+(d[h.NUMERICIDENTIFIER]+")\\.(")+(d[h.NUMERICIDENTIFIER]+")"));b("MAINVERSIONLOOSE","("+d[h.NUMERICIDENTIFIERLOOSE]+
")\\.("+(d[h.NUMERICIDENTIFIERLOOSE]+")\\.(")+(d[h.NUMERICIDENTIFIERLOOSE]+")"));b("PRERELEASEIDENTIFIER","(?:"+d[h.NUMERICIDENTIFIER]+"|"+d[h.NONNUMERICIDENTIFIER]+")");b("PRERELEASEIDENTIFIERLOOSE","(?:"+d[h.NUMERICIDENTIFIERLOOSE]+"|"+d[h.NONNUMERICIDENTIFIER]+")");b("PRERELEASE","(?:-("+d[h.PRERELEASEIDENTIFIER]+"(?:\\."+d[h.PRERELEASEIDENTIFIER]+")*))");b("PRERELEASELOOSE","(?:-?("+d[h.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+d[h.PRERELEASEIDENTIFIERLOOSE]+")*))");b("BUILDIDENTIFIER","[0-9A-Za-z-]+");
b("BUILD","(?:\\+("+d[h.BUILDIDENTIFIER]+"(?:\\."+d[h.BUILDIDENTIFIER]+")*))");b("FULLPLAIN","v?"+d[h.MAINVERSION]+d[h.PRERELEASE]+"?"+d[h.BUILD]+"?");b("FULL","^"+d[h.FULLPLAIN]+"$");b("LOOSEPLAIN","[v=\\s]*"+d[h.MAINVERSIONLOOSE]+d[h.PRERELEASELOOSE]+"?"+d[h.BUILD]+"?");b("LOOSE","^"+d[h.LOOSEPLAIN]+"$");b("GTLT","((?:<|>)?=?)");b("XRANGEIDENTIFIERLOOSE",d[h.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*");b("XRANGEIDENTIFIER",d[h.NUMERICIDENTIFIER]+"|x|X|\\*");b("XRANGEPLAIN","[v=\\s]*("+d[h.XRANGEIDENTIFIER]+
")(?:\\.("+(d[h.XRANGEIDENTIFIER]+")(?:\\.(")+(d[h.XRANGEIDENTIFIER]+")(?:")+(d[h.PRERELEASE]+")?"+d[h.BUILD]+"?)?)?"));b("XRANGEPLAINLOOSE","[v=\\s]*("+d[h.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+(d[h.XRANGEIDENTIFIERLOOSE]+")(?:\\.(")+(d[h.XRANGEIDENTIFIERLOOSE]+")(?:")+(d[h.PRERELEASELOOSE]+")?"+d[h.BUILD]+"?)?)?"));b("XRANGE","^"+d[h.GTLT]+"\\s*"+d[h.XRANGEPLAIN]+"$");b("XRANGELOOSE","^"+d[h.GTLT]+"\\s*"+d[h.XRANGEPLAINLOOSE]+"$");b("COERCE","(^|[^\\d])(\\d{1,"+f+"})(?:\\.(\\d{1,"+(f+"}))?(?:\\.(\\d{1,")+
(f+"}))?(?:$|[^\\d])"));b("COERCERTL",d[h.COERCE],!0);b("LONETILDE","(?:~>?)");b("TILDETRIM","(\\s*)"+d[h.LONETILDE]+"\\s+",!0);bs.tildeTrimReplace="$1~";b("TILDE","^"+d[h.LONETILDE]+d[h.XRANGEPLAIN]+"$");b("TILDELOOSE","^"+d[h.LONETILDE]+d[h.XRANGEPLAINLOOSE]+"$");b("LONECARET","(?:\\^)");b("CARETTRIM","(\\s*)"+d[h.LONECARET]+"\\s+",!0);bs.caretTrimReplace="$1^";b("CARET","^"+d[h.LONECARET]+d[h.XRANGEPLAIN]+"$");b("CARETLOOSE","^"+d[h.LONECARET]+d[h.XRANGEPLAINLOOSE]+"$");b("COMPARATORLOOSE","^"+
d[h.GTLT]+"\\s*("+d[h.LOOSEPLAIN]+")$|^$");b("COMPARATOR","^"+d[h.GTLT]+"\\s*("+d[h.FULLPLAIN]+")$|^$");b("COMPARATORTRIM","(\\s*)"+d[h.GTLT]+"\\s*("+d[h.LOOSEPLAIN]+"|"+d[h.XRANGEPLAIN]+")",!0);bs.comparatorTrimReplace="$1$2$3";b("HYPHENRANGE","^\\s*("+d[h.XRANGEPLAIN]+")\\s+-\\s+("+(d[h.XRANGEPLAIN]+")\\s*$"));b("HYPHENRANGELOOSE","^\\s*("+d[h.XRANGEPLAINLOOSE]+")\\s+-\\s+("+(d[h.XRANGEPLAINLOOSE]+")\\s*$"));b("STAR","(<|>)?=?\\s*\\*");b("GTE0","^\\s*>=\\s*0.0.0\\s*$");b("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$");
return bs}function Vt(){if(MQ)return NQ;MQ=!0;var f=/^[0-9]+$/,c=function(k,d){var h=f.test(k),n=f.test(d);h&&n&&(k=+k,d=+d);return k===d?0:h&&!n?-1:n&&!h?1:k<d?-1:1};return NQ={compareIdentifiers:c,rcompareIdentifiers:function(k,d){return c(d,k)}}}function Wj(){if(OQ)return PQ;OQ=!0;var f=Cp(),c=gz(),k=c.MAX_LENGTH,d=c.MAX_SAFE_INTEGER;c=Ut();var h=c.re,n=c.t,b=Vt().compareIdentifiers,e=function(m,a){a&&"object"===typeof a||(a={loose:!!a,includePrerelease:!1});if(m instanceof e){if(m.loose===!!a.loose&&
m.includePrerelease===!!a.includePrerelease)return m;m=m.version}else if("string"!==typeof m)throw new TypeError("Invalid Version: "+m);if(m.length>k)throw new TypeError("version is longer than "+k+" characters");f("SemVer",m,a);(this||nf).options=a;(this||nf).loose=!!a.loose;(this||nf).includePrerelease=!!a.includePrerelease;a=m.trim().match(a.loose?h[n.LOOSE]:h[n.FULL]);if(!a)throw new TypeError("Invalid Version: "+m);(this||nf).raw=m;(this||nf).major=+a[1];(this||nf).minor=+a[2];(this||nf).patch=
+a[3];if((this||nf).major>d||0>(this||nf).major)throw new TypeError("Invalid major version");if((this||nf).minor>d||0>(this||nf).minor)throw new TypeError("Invalid minor version");if((this||nf).patch>d||0>(this||nf).patch)throw new TypeError("Invalid patch version");(this||nf).prerelease=a[4]?a[4].split(".").map(function(g){if(/^[0-9]+$/.test(g)){var l=+g;if(0<=l&&l<d)return l}return g}):[];(this||nf).build=a[5]?a[5].split("."):[];this.format()};e.prototype.format=function(){(this||nf).version=(this||
nf).major+"."+(this||nf).minor+"."+(this||nf).patch;(this||nf).prerelease.length&&((this||nf).version+="-"+(this||nf).prerelease.join("."));return(this||nf).version};e.prototype.toString=function(){return(this||nf).version};e.prototype.compare=function(m){f("SemVer.compare",(this||nf).version,(this||nf).options,m);if(!(m instanceof e)){if("string"===typeof m&&m===(this||nf).version)return 0;m=new e(m,(this||nf).options)}return m.version===(this||nf).version?0:this.compareMain(m)||this.comparePre(m)};
e.prototype.compareMain=function(m){m instanceof e||(m=new e(m,(this||nf).options));return b((this||nf).major,m.major)||b((this||nf).minor,m.minor)||b((this||nf).patch,m.patch)};e.prototype.comparePre=function(m){m instanceof e||(m=new e(m,(this||nf).options));if((this||nf).prerelease.length&&!m.prerelease.length)return-1;if(!(this||nf).prerelease.length&&m.prerelease.length)return 1;if(!(this||nf).prerelease.length&&!m.prerelease.length)return 0;var a=0;do{var g=(this||nf).prerelease[a],l=m.prerelease[a];
f("prerelease compare",a,g,l);if(void 0===g&&void 0===l)return 0;if(void 0===l)return 1;if(void 0===g)return-1;if(g!==l)return b(g,l)}while(++a)};e.prototype.compareBuild=function(m){m instanceof e||(m=new e(m,(this||nf).options));var a=0;do{var g=(this||nf).build[a],l=m.build[a];f("prerelease compare",a,g,l);if(void 0===g&&void 0===l)return 0;if(void 0===l)return 1;if(void 0===g)return-1;if(g!==l)return b(g,l)}while(++a)};e.prototype.inc=function(m,a){switch(m){case "premajor":(this||nf).prerelease.length=
0;(this||nf).patch=0;(this||nf).minor=0;(this||nf).major++;this.inc("pre",a);break;case "preminor":(this||nf).prerelease.length=0;(this||nf).patch=0;(this||nf).minor++;this.inc("pre",a);break;case "prepatch":(this||nf).prerelease.length=0;this.inc("patch",a);this.inc("pre",a);break;case "prerelease":0===(this||nf).prerelease.length&&this.inc("patch",a);this.inc("pre",a);break;case "major":0===(this||nf).minor&&0===(this||nf).patch&&0!==(this||nf).prerelease.length||(this||nf).major++;(this||nf).minor=
0;(this||nf).patch=0;(this||nf).prerelease=[];break;case "minor":0===(this||nf).patch&&0!==(this||nf).prerelease.length||(this||nf).minor++;(this||nf).patch=0;(this||nf).prerelease=[];break;case "patch":0===(this||nf).prerelease.length&&(this||nf).patch++;(this||nf).prerelease=[];break;case "pre":if(0===(this||nf).prerelease.length)(this||nf).prerelease=[0];else{for(m=(this||nf).prerelease.length;0<=--m;)"number"===typeof(this||nf).prerelease[m]&&((this||nf).prerelease[m]++,m=-2);-1===m&&(this||nf).prerelease.push(0)}a&&
((this||nf).prerelease[0]===a?isNaN((this||nf).prerelease[1])&&((this||nf).prerelease=[a,0]):(this||nf).prerelease=[a,0]);break;default:throw Error("invalid increment argument: "+m);}this.format();(this||nf).raw=(this||nf).version;return this||nf};return PQ=e}function cs(){if(QQ)return RQ;QQ=!0;var f=gz().MAX_LENGTH,c=Ut(),k=c.re,d=c.t,h=Wj();return RQ=function(n,b){b&&"object"===typeof b||(b={loose:!!b,includePrerelease:!1});if(n instanceof h)return n;if("string"!==typeof n||n.length>f||!(b.loose?
k[d.LOOSE]:k[d.FULL]).test(n))return null;try{return new h(n,b)}catch(e){return null}}}function XJ(){if(SQ)return TQ;SQ=!0;var f=cs();return TQ=function(c,k){return(c=f(c,k))?c.version:null}}function YJ(){if(UQ)return VQ;UQ=!0;var f=cs();return VQ=function(c,k){return(c=f(c.trim().replace(/^[=v]+/,""),k))?c.version:null}}function yB(){if(WQ)return XQ;WQ=!0;var f=Wj();return XQ=function(c,k,d,h){"string"===typeof d&&(h=d,d=void 0);try{return(new f(c,d)).inc(k,h).version}catch(n){return null}}}function Kn(){if(YQ)return ZQ;
YQ=!0;var f=Wj();return ZQ=function(c,k,d){return(new f(c,d)).compare(new f(k,d))}}function zB(){if($Q)return aR;$Q=!0;var f=Kn();return aR=function(c,k,d){return 0===f(c,k,d)}}function ZJ(){if(bR)return cR;bR=!0;var f=cs(),c=zB();return cR=function(k,d){if(c(k,d))return null;k=f(k);d=f(d);var h=k.prerelease.length||d.prerelease.length,n=h?"pre":"",b;for(b in k)if(("major"===b||"minor"===b||"patch"===b)&&k[b]!==d[b])return n+b;return h?"prerelease":""}}function CE(){if(dR)return eR;dR=!0;var f=Wj();
return eR=function(c,k){return(new f(c,k)).major}}function $J(){if(fR)return gR;fR=!0;var f=Wj();return gR=function(c,k){return(new f(c,k)).minor}}function si(){if(hR)return iR;hR=!0;var f=Wj();return iR=function(c,k){return(new f(c,k)).patch}}function Ln(){if(jR)return kR;jR=!0;var f=cs();return kR=function(c,k){return(c=f(c,k))&&c.prerelease.length?c.prerelease:null}}function hn(){if(lR)return mR;lR=!0;var f=Kn();return mR=function(c,k,d){return f(k,c,d)}}function jz(){if(nR)return oR;nR=!0;var f=
Kn();return oR=function(c,k){return f(c,k,!0)}}function Jb(){if(pR)return qR;pR=!0;var f=Wj();return qR=function(c,k,d){c=new f(c,d);k=new f(k,d);return c.compare(k)||c.compareBuild(k)}}function jn(){if(rR)return sR;rR=!0;var f=Jb();return sR=function(c,k){return c.sort(function(d,h){return f(d,h,k)})}}function uv(){if(tR)return uR;tR=!0;var f=Jb();return uR=function(c,k){return c.sort(function(d,h){return f(h,d,k)})}}function vv(){if(vR)return wR;vR=!0;var f=Kn();return wR=function(c,k,d){return 0<
f(c,k,d)}}function Km(){if(xR)return yR;xR=!0;var f=Kn();return yR=function(c,k,d){return 0>f(c,k,d)}}function AB(){if(zR)return AR;zR=!0;var f=Kn();return AR=function(c,k,d){return 0!==f(c,k,d)}}function wv(){if(BR)return CR;BR=!0;var f=Kn();return CR=function(c,k,d){return 0<=f(c,k,d)}}function BB(){if(DR)return ER;DR=!0;var f=Kn();return ER=function(c,k,d){return 0>=f(c,k,d)}}function CB(){if(FR)return GR;FR=!0;var f=zB(),c=AB(),k=vv(),d=wv(),h=Km(),n=BB();return GR=function(b,e,m,a){switch(e){case "===":return"object"===
typeof b&&(b=b.version),"object"===typeof m&&(m=m.version),b===m;case "!==":return"object"===typeof b&&(b=b.version),"object"===typeof m&&(m=m.version),b!==m;case "":case "=":case "==":return f(b,m,a);case "!=":return c(b,m,a);case ">":return k(b,m,a);case ">=":return d(b,m,a);case "<":return h(b,m,a);case "<=":return n(b,m,a);default:throw new TypeError("Invalid operator: "+e);}}}function xv(){if(HR)return IR;HR=!0;var f=Wj(),c=cs(),k=Ut(),d=k.re,h=k.t;return IR=function(n,b){if(n instanceof f)return n;
"number"===typeof n&&(n=String(n));if("string"!==typeof n)return null;b=b||{};var e=null;if(b.rtl){for(var m;(m=d[h.COERCERTL].exec(n))&&(!e||e.index+e[0].length!==n.length);)e&&m.index+m[0].length===e.index+e[0].length||(e=m),d[h.COERCERTL].lastIndex=m.index+m[1].length+m[2].length;d[h.COERCERTL].lastIndex=-1}else e=n.match(d[h.COERCE]);return null===e?null:c(e[2]+"."+(e[3]||"0")+"."+(e[4]||"0"),b)}}function rm(){if(JR)return aK;JR=!0;var f=function(B,G){var E=this;G&&"object"===typeof G||(G={loose:!!G,
includePrerelease:!1});if(B instanceof f)return B.loose===!!G.loose&&B.includePrerelease===!!G.includePrerelease?B:new f(B.raw,G);if(B instanceof c)return(this||gk).raw=B.value,(this||gk).set=[[B]],this.format(),this||gk;(this||gk).options=G;(this||gk).loose=!!G.loose;(this||gk).includePrerelease=!!G.includePrerelease;(this||gk).raw=B;(this||gk).set=B.split(/\s*\|\|\s*/).map(function(K){return E.parseRange(K.trim())}).filter(function(K){return K.length});if(!(this||gk).set.length)throw new TypeError("Invalid SemVer Range: "+
B);this.format()};f.prototype.format=function(){(this||gk).range=(this||gk).set.map(function(B){return B.join(" ").trim()}).join("||").trim();return(this||gk).range};f.prototype.toString=function(){return(this||gk).range};f.prototype.parseRange=function(B){var G=this,E=(this||gk).options.loose;B=B.trim();B=B.replace(E?n[b.HYPHENRANGELOOSE]:n[b.HYPHENRANGE],A((this||gk).options.includePrerelease));k("hyphen replace",B);B=B.replace(n[b.COMPARATORTRIM],e);k("comparator trim",B,n[b.COMPARATORTRIM]);B=
B.replace(n[b.TILDETRIM],m);B=B.replace(n[b.CARETTRIM],a);B=B.split(/\s+/).join(" ");var K=E?n[b.COMPARATORLOOSE]:n[b.COMPARATOR];return B.split(" ").map(function(J){var P=J;J=(G||gk).options;k("comp",P,J);P=u(P,J);k("caret",P);P=q(P,J);k("tildes",P);P=y(P,J);k("xrange",P);k("replaceStars",P,J);P=P.trim().replace(n[b.STAR],"");k("stars",P);return P}).join(" ").split(/\s+/).map(function(J){var P=(G||gk).options;k("replaceGTE0",J,P);return J.trim().replace(n[P.includePrerelease?b.GTE0PRE:b.GTE0],"")}).filter((this||
gk).options.loose?function(J){return!!J.match(K)}:function(){return!0}).map(function(J){return new c(J,(G||gk).options)})};f.prototype.intersects=function(B,G){if(!(B instanceof f))throw new TypeError("a Range is required");return(this||gk).set.some(function(E){return g(E,G)&&B.set.some(function(K){return g(K,G)&&E.every(function(J){return K.every(function(P){return J.intersects(P,G)})})})})};f.prototype.test=function(B){if(!B)return!1;if("string"===typeof B)try{B=new d(B,(this||gk).options)}catch(ea){return!1}for(var G=
0;G<(this||gk).set.length;G++){a:{var E=(this||gk).set[G];for(var K=B,J=(this||gk).options,P=0;P<E.length;P++)if(!E[P].test(K)){E=!1;break a}if(K.prerelease.length&&!J.includePrerelease){for(J=0;J<E.length;J++)if(k(E[J].semver),E[J].semver!==c.ANY&&0<E[J].semver.prerelease.length&&(P=E[J].semver,P.major===K.major&&P.minor===K.minor&&P.patch===K.patch)){E=!0;break a}E=!1}else E=!0}if(E)return!0}return!1};aK=f;var c=Wt(),k=Cp(),d=Wj(),h=Ut(),n=h.re,b=h.t,e=h.comparatorTrimReplace,m=h.tildeTrimReplace,
a=h.caretTrimReplace,g=function(B,G){var E=!0;B=B.slice();for(var K=B.pop();E&&B.length;)E=B.every(function(J){return K.intersects(J,G)}),K=B.pop();return E},l=function(B){return!B||"x"===B.toLowerCase()||"*"===B},q=function(B,G){return B.trim().split(/\s+/).map(function(E){return r(E,G)}).join(" ")},r=function(B,G){return B.replace(G.loose?n[b.TILDELOOSE]:n[b.TILDE],function(E,K,J,P,ea){k("tilde",B,E,K,J,P,ea);l(K)?E="":l(J)?E=">="+K+".0.0 <"+(+K+1)+".0.0-0":l(P)?E=">="+K+"."+J+".0 <"+K+"."+(+J+
1)+".0-0":ea?(k("replaceTilde pr",ea),E=">="+K+"."+J+"."+P+"-"+ea+" <"+K+"."+(+J+1)+".0-0"):E=">="+K+"."+J+"."+P+" <"+K+"."+(+J+1)+".0-0";k("tilde return",E);return E})},u=function(B,G){return B.trim().split(/\s+/).map(function(E){return v(E,G)}).join(" ")},v=function(B,G){k("caret",B,G);var E=G.includePrerelease?"-0":"";return B.replace(G.loose?n[b.CARETLOOSE]:n[b.CARET],function(K,J,P,ea,ra){k("caret",B,K,J,P,ea,ra);l(J)?K="":l(P)?K=">="+J+".0.0"+E+" <"+(+J+1)+".0.0-0":l(ea)?K="0"===J?">="+J+"."+
P+".0"+E+" <"+J+"."+(+P+1)+".0-0":">="+J+"."+P+".0"+E+" <"+(+J+1)+".0.0-0":ra?(k("replaceCaret pr",ra),K="0"===J?"0"===P?">="+J+"."+P+"."+ea+"-"+ra+" <"+J+"."+P+"."+(+ea+1)+"-0":">="+J+"."+P+"."+ea+"-"+ra+" <"+J+"."+(+P+1)+".0-0":">="+J+"."+P+"."+ea+"-"+ra+" <"+(+J+1)+".0.0-0"):(k("no pr"),K="0"===J?"0"===P?">="+J+"."+P+"."+ea+E+" <"+J+"."+P+"."+(+ea+1)+"-0":">="+J+"."+P+"."+ea+E+" <"+J+"."+(+P+1)+".0-0":">="+J+"."+P+"."+ea+" <"+(+J+1)+".0.0-0");k("caret return",K);return K})},y=function(B,G){k("replaceXRanges",
B,G);return B.split(/\s+/).map(function(E){return z(E,G)}).join(" ")},z=function(B,G){B=B.trim();return B.replace(G.loose?n[b.XRANGELOOSE]:n[b.XRANGE],function(E,K,J,P,ea,ra){k("xRange",B,E,K,J,P,ea,ra);var D=l(J),O=D||l(P);ea=O||l(ea);"="===K&&ea&&(K="");ra=G.includePrerelease?"-0":"";D?E=">"===K||"<"===K?"<0.0.0-0":"*":K&&ea?(O&&(P=0),ea=0,">"===K?(K=">=",O?(J=+J+1,P=0):P=+P+1,ea=0):"<="===K&&(K="<",O?J=+J+1:P=+P+1),"<"===K&&(ra="-0"),E=K+J+"."+P+"."+ea+ra):O?E=">="+J+".0.0"+ra+" <"+(+J+1)+".0.0-0":
ea&&(E=">="+J+"."+P+".0"+ra+" <"+J+"."+(+P+1)+".0-0");k("xRange return",E);return E})},A=function(B){return function(G,E,K,J,P,ea,ra,D,O,L,N,aa,Y){E=l(K)?"":l(J)?">="+K+".0.0"+(B?"-0":""):l(P)?">="+K+"."+J+".0"+(B?"-0":""):ea?">="+E:">="+E+(B?"-0":"");D=l(O)?"":l(L)?"<"+(+O+1)+".0.0-0":l(N)?"<"+O+"."+(+L+1)+".0-0":aa?"<="+O+"."+L+"."+N+"-"+aa:B?"<"+O+"."+L+"."+(+N+1)+"-0":"<="+D;return(E+" "+D).trim()}};return aK}function Wt(){if(KR)return bK;KR=!0;var f=Symbol("SemVer ANY"),c=function(a,g){g&&"object"===
typeof g||(g={loose:!!g,includePrerelease:!1});if(a instanceof c){if(a.loose===!!g.loose)return a;a=a.value}b("comparator",a,g);(this||ci).options=g;(this||ci).loose=!!g.loose;this.parse(a);(this||ci).value=(this||ci).semver===f?"":(this||ci).operator+(this||ci).semver.version;b("comp",this||ci)};c.prototype.parse=function(a){var g=a.match((this||ci).options.loose?d[h.COMPARATORLOOSE]:d[h.COMPARATOR]);if(!g)throw new TypeError("Invalid comparator: "+a);(this||ci).operator=void 0!==g[1]?g[1]:"";"="===
(this||ci).operator&&((this||ci).operator="");(this||ci).semver=g[2]?new e(g[2],(this||ci).options.loose):f};c.prototype.toString=function(){return(this||ci).value};c.prototype.test=function(a){b("Comparator.test",a,(this||ci).options.loose);if((this||ci).semver===f||a===f)return!0;if("string"===typeof a)try{a=new e(a,(this||ci).options)}catch(g){return!1}return n(a,(this||ci).operator,(this||ci).semver,(this||ci).options)};c.prototype.intersects=function(a,g){if(!(a instanceof c))throw new TypeError("a Comparator is required");
g&&"object"===typeof g||(g={loose:!!g,includePrerelease:!1});if(""===(this||ci).operator)return""===(this||ci).value?!0:(new m(a.value,g)).test((this||ci).value);if(""===a.operator)return""===a.value?!0:(new m((this||ci).value,g)).test(a.semver);var l=(">="===(this||ci).operator||">"===(this||ci).operator)&&(">="===a.operator||">"===a.operator),q=("<="===(this||ci).operator||"<"===(this||ci).operator)&&("<="===a.operator||"<"===a.operator),r=(this||ci).semver.version===a.semver.version,u=(">="===
(this||ci).operator||"<="===(this||ci).operator)&&(">="===a.operator||"<="===a.operator),v=n((this||ci).semver,"<",a.semver,g)&&(">="===(this||ci).operator||">"===(this||ci).operator)&&("<="===a.operator||"<"===a.operator);a=n((this||ci).semver,">",a.semver,g)&&("<="===(this||ci).operator||"<"===(this||ci).operator)&&(">="===a.operator||">"===a.operator);return l||q||r&&u||v||a};$jscomp.global.Object.defineProperties(c,{ANY:{configurable:!0,enumerable:!0,get:function(){return f}}});bK=c;var k=Ut(),
d=k.re,h=k.t,n=CB(),b=Cp(),e=Wj(),m=rm();return bK}function ax(){if(LR)return MR;LR=!0;var f=rm();return MR=function(c,k,d){try{k=new f(k,d)}catch(h){return!1}return k.test(c)}}function Qj(){if(NR)return OR;NR=!0;var f=rm();return OR=function(c,k){return(new f(c,k)).set.map(function(d){return d.map(function(h){return h.value}).join(" ").trim().split(" ")})}}function ds(){if(PR)return QR;PR=!0;var f=Wj(),c=rm();return QR=function(k,d,h){var n=null,b=null,e=null;try{e=new c(d,h)}catch(m){return null}k.forEach(function(m){!e.test(m)||
n&&-1!==b.compare(m)||(n=m,b=new f(n,h))});return n}}function sm(){if(RR)return SR;RR=!0;var f=Wj(),c=rm();return SR=function(k,d,h){var n=null,b=null,e=null;try{e=new c(d,h)}catch(m){return null}k.forEach(function(m){!e.test(m)||n&&1!==b.compare(m)||(n=m,b=new f(n,h))});return n}}function cK(){if(TR)return UR;TR=!0;var f=Wj(),c=rm(),k=vv();return UR=function(d,h){d=new c(d,h);var n=new f("0.0.0");if(d.test(n))return n;n=new f("0.0.0-0");if(d.test(n))return n;n=null;for(h=0;h<d.set.length;++h)d.set[h].forEach(function(b){var e=
new f(b.semver.version);switch(b.operator){case ">":0===e.prerelease.length?e.patch++:e.prerelease.push(0),e.raw=e.format();case "":case ">=":if(!n||k(n,e))n=e;break;case "<":case "<=":break;default:throw Error("Unexpected operation: "+b.operator);}});return n&&d.test(n)?n:null}}function ph(){if(VR)return WR;VR=!0;var f=rm();return WR=function(c,k){try{return(new f(c,k)).range||"*"}catch(d){return null}}}function bx(){if(YR)return ZR;YR=!0;var f=Wj(),c=Wt(),k=c.ANY,d=rm(),h=ax(),n=vv(),b=Km(),e=BB(),
m=wv();return ZR=function(a,g,l,q){a=new f(a,q);g=new d(g,q);switch(l){case ">":var r=n;l=e;var u=b;var v=">";var y=">=";break;case "<":r=b;l=m;u=n;v="<";y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"');}if(h(a,g,q))return!1;for(var z={},A=0;A<g.set.length;z={$jscomp$loop$prop$high$2224:z.$jscomp$loop$prop$high$2224,$jscomp$loop$prop$low$2225:z.$jscomp$loop$prop$low$2225},++A){var B=g.set[A];z.$jscomp$loop$prop$high$2224=null;z.$jscomp$loop$prop$low$2225=null;B.forEach(function(G){return function(E){E.semver===
k&&(E=new c(">=0.0.0"));G.$jscomp$loop$prop$high$2224=G.$jscomp$loop$prop$high$2224||E;G.$jscomp$loop$prop$low$2225=G.$jscomp$loop$prop$low$2225||E;r(E.semver,G.$jscomp$loop$prop$high$2224.semver,q)?G.$jscomp$loop$prop$high$2224=E:u(E.semver,G.$jscomp$loop$prop$low$2225.semver,q)&&(G.$jscomp$loop$prop$low$2225=E)}}(z));if(z.$jscomp$loop$prop$high$2224.operator===v||z.$jscomp$loop$prop$high$2224.operator===y||(!z.$jscomp$loop$prop$low$2225.operator||z.$jscomp$loop$prop$low$2225.operator===v)&&l(a,
z.$jscomp$loop$prop$low$2225.semver)||z.$jscomp$loop$prop$low$2225.operator===y&&u(a,z.$jscomp$loop$prop$low$2225.semver))return!1}return!0}}function dK(){if($R)return aS;$R=!0;var f=bx();return aS=function(c,k,d){return f(c,k,">",d)}}function eK(){if(bS)return cS;bS=!0;var f=bx();return cS=function(c,k,d){return f(c,k,"<",d)}}function cx(){if(dS)return eS;dS=!0;var f=rm();return eS=function(c,k,d){c=new f(c,d);k=new f(k,d);return c.intersects(k)}}function DB(){if(fS)return gS;fS=!0;var f=ax(),c=
Kn();return gS=function(k,d,h){var n=[],b=null,e=null;k=k.sort(function(g,l){return c(g,l,h)});for(var m=$jscomp.makeIterator(k),a=m.next();!a.done;a=m.next())a=a.value,f(a,d,h)?(e=a,b||(b=a)):(e&&n.push([b,e]),b=e=null);b&&n.push([b,null]);b=[];n=$jscomp.makeIterator(n);for(e=n.next();!e.done;e=n.next())m=$jscomp.makeIterator(e.value),e=m.next().value,m=m.next().value,e===m?b.push(e):m||e!==k[0]?m?e===k[0]?b.push("<="+m):b.push(e+" - "+m):b.push(">="+e):b.push("*");k=b.join(" || ");return k.length<
("string"===typeof d.raw?d.raw:String(d)).length?k:d}}function yo(){if(hS)return iS;hS=!0;var f=rm(),c=Wt().ANY,k=ax(),d=Kn(),h=function(e,m,a){if(1===e.length&&e[0].semver===c)return 1===m.length&&m[0].semver===c;var g=new Set,l,q,r=$jscomp.makeIterator(e);for(e=r.next();!e.done;e=r.next())e=e.value,">"===e.operator||">="===e.operator?l=n(l,e,a):"<"===e.operator||"<="===e.operator?q=b(q,e,a):g.add(e.semver);if(1<g.size)return null;if(l&&q){var u=d(l.semver,q.semver,a);if(0<u||0===u&&(">="!==l.operator||
"<="!==q.operator))return null}for(e=$jscomp.makeIterator(g).next();!e.done;){u=e.value;if(l&&!k(u,String(l),a)||q&&!k(u,String(q),a))return null;l=$jscomp.makeIterator(m);for(e=l.next();!e.done;e=l.next())if(!k(u,String(e.value),a))return!1;return!0}m=$jscomp.makeIterator(m);for(e=m.next();!e.done;e=m.next()){e=e.value;var v=v||">"===e.operator||">="===e.operator;var y=y||"<"===e.operator||"<="===e.operator;if(l)if(">"===e.operator||">="===e.operator){if(g=n(l,e,a),g===e)return!1}else if(">="===
l.operator&&!k(l.semver,String(e),a))return!1;if(q)if("<"===e.operator||"<="===e.operator){if(g=b(q,e,a),g===e)return!1}else if("<="===q.operator&&!k(q.semver,String(e),a))return!1;if(!e.operator&&(q||l)&&0!==u)return!1}return l&&y&&!q&&0!==u||q&&v&&!l&&0!==u?!1:!0},n=function(e,m,a){if(!e)return m;a=d(e.semver,m.semver,a);return 0<a?e:0>a?m:">"===m.operator&&">="===e.operator?m:e},b=function(e,m,a){if(!e)return m;a=d(e.semver,m.semver,a);return 0>a?e:0<a?m:"<"===m.operator&&"<="===e.operator?m:e};
return iS=function(e,m,a){e=new f(e,a);m=new f(m,a);var g=!1;e=$jscomp.makeIterator(e.set);var l=e.next();a:for(;!l.done;l=e.next()){l=l.value;for(var q=$jscomp.makeIterator(m.set),r=q.next();!r.done;r=q.next())if(r=h(l,r.value,a),g=g||null!==r,r)continue a;if(g)return!1}return!0}}function gh(f){f=Object.assign({plugins:Cf.allPlugins,reinitializeIds:!1,skipMigrations:!0},f);if(f.reinitializeIds&&"function"!==typeof f.reinitializeIds)throw Error("serializer option 'reinitializeIds' needs to be a function(id, ref) => id");
return f}function yv(f,c){c=Cf.normalizeOptions(c);var k=c.objPool||new Cf.ObjectPool(c);c=">="+Cf.serializerVersion.replace(Cf.majorAndMinorVersionRe,"");f=k.snapshotObject(f);Cf.removeUnreachableObjects([f.id],f.snapshot);Cf.clearDanglingConnections(f.snapshot);f.requiredVersion=c;return f}function es(f,c){c=Cf.normalizeOptions(c);var k=f.requiredVersion;k&&!Cf.semver.satisfies(Cf.serializerVersion,k)&&console.warn("[lively.serializer deserialization] snapshot requires version "+(k+" but serializer has incompatible version ")+
(Cf.serializerVersion+". Deserialization might fail...!"));return(c.objPool||new Cf.ObjectPool(c)).resolveFromSnapshotAndId(f)}function Mn(f,c,k){function d(){var e=Cf.deserialize(f,k);Cf.runMigrations(n,"objectConverter",f,h);return e}k=Cf.normalizeOptions(k);c.length&&(k.skipMigrations=!1);var h=k.objPool||(k.objPool=new Cf.ObjectPool(k));c=Cf.normalizeMigrations(c);var n=c.after,b;Cf.runMigrations(c.before,"snapshotConverter",f,h);"function"===typeof k.onDeserializationStart&&(b=k.onDeserializationStart(f,
k));return b instanceof Promise?b.then(d):d()}function dx(f,c){return Cf.deserialize(Cf.serialize(f,c),c)}function ex(f){return"[object Array]"===w5.call(f)}function Pl(f,c,k){(this||fK).type=Number(f);(this||fK).vNode=c;(this||fK).patch=k}function kn(f,c){var k=f.vnode;k||(k=f.vnode=f.render(c));if(!(x5(k)||y5(k)||z5(k)))throw Error("thunk did not return a valid node");return k}function Xj(f,c){var k;for(k in f){if(!(k in c)){var d=d||{};d[k]=void 0}var h=f[k],n=c[k];if(h!==n)if(jS(h)&&jS(n))if(fx(n)!==
fx(h))d=d||{},d[k]=n;else if(A5(n))d=d||{},d[k]=n;else{if(h=Xj(h,n))d=d||{},d[k]=h}else d=d||{},d[k]=n}for(var b in c)b in f||(d=d||{},d[b]=c[b]);return d}function fx(f){if(Object.getPrototypeOf)return Object.getPrototypeOf(f);if(f.__proto__)return f.__proto__;if(f.constructor)return f.constructor.prototype}function DE(f,c){var k={a:f};EE(f,c,k,0);return k}function EE(f,c,k,d){if(f!==c){var h=k[d],n=!1;if(FE(f)||FE(c))mg(f,c,k,d);else if(null==c)GE(f)||(zo(f,k,d),kz(f,k,d),h=k[d]),h=Nn(h,new hk(hk.REMOVE,
f,c));else if(gx(c))if(gx(f))if(f.tagName===c.tagName&&f.namespace===c.namespace&&f.key===c.key){var b=B5(f.properties,c.properties);b&&(h=Nn(h,new hk(hk.PROPS,f,b)));b=d;var e=f.children;c=c.children;var m=Uh(c),a=m.keys,g=m.free;if(g.length===c.length)c={children:c,moves:null};else{m=Uh(e);var l=m.keys;if(m.free.length===e.length)c={children:c,moves:null};else{m=[];for(var q=0,r=g.length,u=0,v=0;v<e.length;v++){var y=e[v];y.key?a.hasOwnProperty(y.key)?(y=a[y.key],m.push(c[y])):(u++,m.push(null)):
q<r?(y=g[q++],m.push(c[y])):(u++,m.push(null))}g=q>=g.length?c.length:g[q];for(q=0;q<c.length;q++)r=c[q],r.key?l.hasOwnProperty(r.key)||m.push(r):q>=g&&m.push(r);l=m.slice();g=0;q=[];r=[];for(y=0;y<c.length;){var z=c[y];for(v=l[g];null===v&&l.length;)q.push(Xt(l,g,null)),v=l[g];v&&v.key===z.key?(g++,y++):z.key?(v&&v.key?a[v.key]!==y+1?(q.push(Xt(l,g,v.key)),(v=l[g])&&v.key===z.key?g++:r.push({key:z.key,to:y})):r.push({key:z.key,to:y}):r.push({key:z.key,to:y}),y++):v&&v.key&&q.push(Xt(l,g,v.key))}for(;g<
l.length;)v=l[g],q.push(Xt(l,g,v&&v.key));c=q.length!==u||r.length?{children:m,moves:{removes:q,inserts:r}}:{children:m,moves:null}}}a=c.children;m=e.length;u=a.length;m=m>u?m:u;for(u=0;u<m;u++)l=e[u],g=a[u],b+=1,l?EE(l,g,k,b):g&&(h=Nn(h,new hk(hk.INSERT,null,g))),gx(l)&&l.count&&(b+=l.count);c.moves&&(h=Nn(h,new hk(hk.ORDER,f,c.moves)))}else h=Nn(h,new hk(hk.VNODE,f,c)),n=!0;else h=Nn(h,new hk(hk.VNODE,f,c)),n=!0;else kS(c)?kS(f)?f.text!==c.text&&(h=Nn(h,new hk(hk.VTEXT,f,c))):(h=Nn(h,new hk(hk.VTEXT,
f,c)),n=!0):GE(c)&&(GE(f)||(n=!0),h=Nn(h,new hk(hk.WIDGET,f,c)));h&&(k[d]=h);n&&(zo(f,k,d),kz(f,k,d))}}function kz(f,c,k){if(GE(f))"function"===typeof f.destroy&&(c[k]=Nn(c[k],new hk(hk.REMOVE,f,null)));else if(gx(f)&&(f.hasWidgets||f.hasThunks)){f=f.children;for(var d=f.length,h=0;h<d;h++){var n=f[h];k+=1;kz(n,c,k);gx(n)&&n.count&&(k+=n.count)}}else FE(f)&&mg(f,null,c,k)}function mg(f,c,k,d){f=C5(f,c);f=DE(f.a,f.b);a:{for(h in f)if("a"!==h){var h=!0;break a}h=!1}h&&(k[d]=new hk(hk.THUNK,null,f))}
function zo(f,c,k){if(gx(f)){if(f.hooks){var d=c[k],h=hk.PROPS,n=f.hooks,b={},e;for(e in n)b[e]=void 0;c[k]=Nn(d,new hk(h,f,b))}if(f.descendantHooks||f.hasThunks)for(f=f.children,d=f.length,h=0;h<d;h++)n=f[h],k+=1,zo(n,c,k),gx(n)&&n.count&&(k+=n.count)}else FE(f)&&mg(f,null,c,k)}function Xt(f,c,k){f.splice(c,1);return{from:c,key:k}}function Uh(f){for(var c={},k=[],d=f.length,h=0;h<d;h++){var n=f[h];n.key?c[n.key]=h:k.push(h)}return{keys:c,free:k}}function Nn(f,c){return f?(D5(f)?f.push(c):f=[f,c],
f):c}function Ao(f,c,k,d){if(d)if(d=d[c],lS(d))d.unhook&&d.unhook(f,c,k);else if("attributes"===c)for(var h in d)f.removeAttribute(h);else if("style"===c)for(var n in d)f.style[n]="";else f[c]="string"===typeof d?"":null}function lz(f){if(Object.getPrototypeOf)return Object.getPrototypeOf(f);if(f.__proto__)return f.__proto__;if(f.constructor)return f.constructor.prototype}function zv(f,c){var k=c?c.document||mS:mS,d=c?c.warn:null;f=E5(f).a;if(F5(f))return f.init();if(G5(f))return k.createTextNode(f.text);
if(!H5(f))return d&&d("Item is not a valid virtual dom node",f),null;k=null===f.namespace?k.createElement(f.tagName):k.createElementNS(f.namespace,f.tagName);I5(k,f.properties);f=f.children;for(d=0;d<f.length;d++){var h=zv(f[d],c);h&&k.appendChild(h)}return k}function HE(f,c,k,d,h){d=d||{};if(f){IE(k,h,h)&&(d[h]=f);var n=c.children;if(n){f=f.childNodes;for(var b=0;b<c.children.length;b++){h+=1;var e=n[b]||J5,m=h+(e.count||0);IE(k,h,m)&&HE(f[b],e,k,d,h);h=m}}}return d}function IE(f,c,k){if(0===f.length)return!1;
for(var d=0,h=f.length-1,n,b;d<=h;){n=(h+d)/2>>0;b=f[n];if(d===h)return b>=c&&b<=k;if(b<c)d=n+1;else if(b>k)h=n-1;else return!0}return!1}function gK(f,c){return f>c?1:-1}function JE(f,c){"function"===typeof c.destroy&&K5(c)&&c.destroy(f)}function EB(f,c,k){k=k||{};k.patch=k.patch&&k.patch!==EB?k.patch:hK;k.render=k.render||L5;return k.patch(f,c,k)}function hK(f,c,k){var d=[];for(h in c)"a"!==h&&d.push(Number(h));if(0===d.length)return f;var h=M5(f,c.a,d);var n=f.ownerDocument;k.document||n===N5||
(k.document=n);for(n=0;n<d.length;n++){var b=d[n];var e=h[b],m=c[b],a=k;if(e)if(O5(m))for(var g=0;g<m.length;g++)b=nS(m[g],e,a),e===f&&(f=b);else b=nS(m,e,a),e===f&&(f=b)}return f}function FB(f,c,k,d,h){(this||fs).tagName=f;(this||fs).properties=c||P5;(this||fs).children=k||Q5;(this||fs).key=null!=d?String(d):void 0;(this||fs).namespace="string"===typeof h?h:null;f=k&&k.length||0;d=0;var n=h=!1,b=!1,e;for(a in c)if(c.hasOwnProperty(a)){var m=c[a];R5(m)&&m.unhook&&(e||(e={}),e[a]=m)}for(c=0;c<f;c++){var a=
k[c];S5(a)?(d+=a.count||0,!h&&a.hasWidgets&&(h=!0),!n&&a.hasThunks&&(n=!0),b||!a.hooks&&!a.descendantHooks||(b=!0)):!h&&T5(a)?"function"===typeof a.destroy&&(h=!0):!n&&U5(a)&&(n=!0)}(this||fs).count=f+d;(this||fs).hasWidgets=h;(this||fs).hasThunks=n;(this||fs).hooks=e;(this||fs).descendantHooks=b}function Kk(f){(this||V5).text=String(f)}function mz(f){if(!(this instanceof mz))return new mz(f);this.value=f}function cl(f){if(!(this instanceof cl))return new cl(f);this.value=f}function gs(f,c,k,d){if("string"===
typeof f)c.push(new oS(f));else if("number"===typeof f)c.push(new oS(String(f)));else if(KE(f))c.push(f);else if(pS(f))for(var h=0;h<f.length;h++)gs(f[h],c,k,d);else if(null!==f&&void 0!==f)throw c={tagName:k,properties:d},k=Error(),k.type="virtual-hyperscript.unexpected.virtual-element",k.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+LE(f)+".\nThe parent vnode is:\n"+LE(c),k.foreignObject=f,k.parentVnode=c,k;}function KE(f){return W5(f)||
X5(f)||Y5(f)||Z5(f)}function LE(f){try{return JSON.stringify(f,null,"    ")}catch(c){return String(f)}}function nz(f,c){if(3===f.nodeType)return new qS(f.nodeValue);if(1===f.nodeType||9===f.nodeType){var k="http://www.w3.org/1999/xhtml"!==f.namespaceURI?f.namespaceURI:null,d=c&&f.getAttribute(c)?f.getAttribute(c):null,h=f.tagName;var n,b={};if(f.hasAttributes()){if(f.namespaceURI&&"http://www.w3.org/1999/xhtml"!==f.namespaceURI)var e=f.namespaceURI;for(var m=0;m<f.attributes.length;m++){if("style"==
f.attributes[m].name){var a=f.style;var g={};for(n=0;n<a.length;++n){var l=a.item(n);g[l]=String(a[l]);-1<g[l].indexOf("url")&&(g[l]=g[l].replace(/"/g,""))}a="style";l=n=void 0}else e?(n=f.attributes[m],a=n.name,g=n.value,n=$5[n.name]||"",l=void 0):(n=void 0,g=f.attributes[m],a=rS[g.name]?rS[g.name]:g.name,0===a.indexOf("data-")||0===a.indexOf("aria-")?(g=g.value,n=!0):g=g.value,l=n||!1,n=void 0);n?b[a]={namespace:n,value:g}:l?(b.attributes||(b.attributes={}),b.attributes[a]=g):b[a]=g}}e=[];for(m=
0;m<f.childNodes.length;m++)e.push(nz(f.childNodes[m],c));return new a6(h,b,e,d,k)}return new qS("")}function hx(f){var c={};hh.addFill(f,c);hh.addTransform(f,c);hh.addTransformOrigin(f,c);hh.addDisplay(f,c);hh.addExtentStyle(f,c);hh.addBorder(f,c);hh.addBorderRadius(f,c);hh.addShadowStyle(f,c);f.grayscale&&(c.filter=(c.filter||"")+" grayscale("+100*f.grayscale+"%)");f.blur&&(c.filter=(c.filter||"")+" blur("+f.blur+"px)");null!=f.opacity&&(c.opacity=f.opacity);f.draggable&&!f.isWorld&&(c["touch-action"]=
"none");return c}function GB(f,c){var k=f.position,d=f.origin,h=f.scale,n=f.rotation,b=f.flipped,e=f.tilted,m=f.perspective,a=f.__stackIdx__||0,g=Math.round(k.x-d.x);k=Math.round(k.y-d.y);d=f.renderOnGPU||f.dropShadow&&!f.dropShadow.fast||0<f.grayscale;f.owner&&f.owner.isText||d?c.transform=d?"translate3d("+g+"px, "+k+"px, "+a+"px)":"translate("+g+"px, "+k+"px)":(c.transform="",c.top=k+"px",c.left=g+"px");c.transform+=" rotate("+n.toFixed(2)+"rad) scale("+h.toFixed(5)+","+h.toFixed(5)+")";m&&(c.perspective=
m+"px");b&&(c.transform+=" rotateY("+180*b+"deg)");e&&(c.transform+=" rotateX("+180*e+"deg)")}function ix(f,c){var k=f.width;f=f.height;c.width=k||1;c.height=f||1;c.viewBox=[0,0,k||1,f||1].join(" ");return c}function Yt(f){var c="";if(0<f.length){var k=f[0];var d=k.position;var h=d.y;d=d.x;c+="M "+d+" "+h+" "}for(var n=1;n<f.length-1;n++){var b=f[n],e=b.position,m=e.x;e=e.y;var a=b,g=a.controlPoints.previous;c=a.isSmooth?c+("C "+(d+k.controlPoints.next.x)+" "+(h+k.controlPoints.next.y)+" "+(m+g.x)+
" "+(e+g.y)+" "+m+" "+e+" "):c+("L "+m+" "+e+" ");k=b;d=m;h=e}0<f.length&&(b=f[f.length-1].position,n=b.x,b=b.y,f=f[f.length-1],m=f.controlPoints.previous,c=f.isSmooth?c+("C "+(d+k.controlPoints.next.x)+" "+(h+k.controlPoints.next.y)+" "+(n+m.x)+" "+(b+m.y)+" "+n+" "+b):c+("L "+n+" "+b));return c}function jx(f,c){var k=f.id,d=f.vertices,h=f.fill,n=f.borderColor,b=f.borderWidth;d.length&&(c.d=hh.getSvgVertices(d));hh.addSvgBorderStyle(f,c);c["stroke-width"]=b.valueOf();c.fill=h?h.isGradient?"url(#gradient-fill"+
k+")":h.toString():"transparent";c.stroke=n.valueOf().isGradient?"url(#gradient-borderColor"+k+")":n.valueOf().toString();return c}function Zt(f){var c=f.reactsToPointer,k=f.nativeCursor,d=f.clipMode,h=te.styleProps(f);f=f._animationQueue.maskedProps("css");"backgroundImage"in f&&delete h.background;"visible"!==d&&(h.overflow=d,h["-webkit-overflow-scrolling"]="touch",h["overflow-anchor"]="none");Object.assign(h,f);h.position="absolute";h["pointer-events"]=c?"auto":"none";h.cursor=k;return h}function HB(f,
c){this.morph=f;this.type=c}function Av(f,c){c={animation:new te.Animation(f),key:f.id,id:f.id,attributes:{},className:(f.hideScrollbars?f.styleClasses.concat("hiddenScrollbar"):f.styleClasses).join(" "),draggable:!1,"morph-after-render-hook":new te.MorphAfterRenderHook(f,c)};c.attributes["touch-action"]=te.bowser.ios&&f.draggable&&!f.isWorld?"none":te.bowser.ios&&"visible"!=f.clipMode&&!f.isWorld?"auto":"manipulation";return c}function oz(f){var c=new te.SvgAnimation(f,"svg"),k={};te.addSvgAttributes(f,
k);Object.assign(k,f._animationQueue.maskedProps("svg"));return{animation:c,attributes:k}}function pz(f){var c=new te.SvgAnimation(f,"path"),k={mask:0!==f.drawnProportion?"url(#mask"+f.id+")":""};te.addPathAttributes(f,k);Object.assign(k,f._animationQueue.maskedProps("path"));return{animation:c,attributes:k}}function $t(f,c,k){var d=k=k.valueOf(),h=d.bounds,n=d.focus,b=d.vector;d=d.stops;var e=c.x;c=c.y;f={namespace:"http://www.w3.org/2000/svg",attributes:{id:"gradient-"+f,gradientUnits:"userSpaceOnUse",
r:"50%"}};b&&(f.attributes.gradientTransform="rotate("+te.num.toDegrees(b.extent().theta())+", "+e/2+", "+c/2+")");n&&h&&(b=h.width,h=h.height,f.attributes.gradientTransform="matrix(\n"+b/e+", 0, 0, "+h/c+",\n"+(e/2-b/e*(e/2)+n.x*e-e/2)+",\n"+(c/2-h/c*(c/2)+n.y*c-c/2)+")");return te.h(k.type,f,d.map(function(m){return te.h("stop",{namespace:"http://www.w3.org/2000/svg",attributes:{offset:100*m.offset+"%","stop-opacity":m.color.a,"stop-color":m.color.withA(1).toString()}})}))}function kx(f,c){c=void 0===
c?f.env.renderer:c;return te.createNode(f.render(c),c.domEnvironment)}function qz(f,c){var k=c.renderMap.get(f),d=c.getNodeForMorph(f);if(d&&k){var h=c.render(f),n=te.diff(k,h);f=c.renderMap.get(f.owner).children[0].children;k=f.indexOf(k);f[k]=h;te.patch(d,n)}}function hs(f,c){if(f.needsRerender()){var k=!1,d=c.domNode,h=c.renderMap.get(f)||d&&(k=!0)&&te.parser(d)||c.render(f),n=c.render(f);k&&(h.key=n.key);k=te.diff(h,n);d=d||(c.domNode=te.createNode(h,c.domEnvironment));d.parentNode||te.initDOMState(c,
f);te.patch(d,k);c.renderFixedMorphs(n.fixedMorphs,f)}}function Eh(f,c,k){return(((1-3*k+3*c)*f+(3*k-6*c))*f+3*c)*f}function mj(f){return f}function is(f){return hf.obj.isFunction(f)?f:hf.Bezier.apply(hf,$jscomp.arrayFromIterable(eval("(["+f.match(/\((.*)\)/)[1]+"])")))}function Bv(f){var c=0,k=0;do c+=f.offsetTop||0,k+=f.offsetLeft||0,f=f.offsetParent;while(f);return{top:c,left:k}}function rz(){return System.get("@system-env").browser?Ig.createDOMEnvironment_browser():Ig.createDOMEnvironment_node()}
function Oi(){return Ig._defaultEnv||(Ig._defaultEnv=System.get("@system-env").browser?new Ig.DomEnvironment(window,document,function(){}):Ig.createDOMEnvironment())}function ne(f,c,k){f=void 0===f?"lively-css":f;k=void 0===k?document:k;var d=k.getElementById(f);return d?Ig.setCSSDef(d,c,k):Ig.addCSSDef(f,c,k)}function js(f,c,k,d){k=void 0===k?document:k;d=void 0===d?!0:d;var h=k.getElementById(f),n=!1;return h?d&&h.getAttribute("href")!==c?(h.setAttribute("href",c),h.onload=function(){return n=!0},
Ig.promise.waitFor(3E4,function(){return!!n&&h})):Promise.resolve():(h=k.createElement("link"),h.type="text/css",h.rel="stylesheet",h.setAttribute("id",f),h.setAttribute("href",c),h.onload=function(){return n=!0},k.head.appendChild(h),Ig.promise.waitFor(3E4,function(){return!!n&&h}))}function Ed(f,c){return Array.isArray(f)?f.reduce(function(k,d){return Ed(d,k)},c):"string"===typeof f?c.filter(function(k){return k.path()!==f&&k.name()!==f}):f instanceof RegExp?c.filter(function(k){return!f.test(k.path())&&
!f.test(k.name())}):"function"===typeof f?c.filter(function(k){return!f(k)}):c}function On(f){f=$jscomp.makeIterator(f.split("?"));f.next();var c=f.next().value;f={};if(!c)return f;if(c=c.split("&"))for(var k=0;k<c.length;k++){var d=c[k].split("="),h=d[0],n=!0;if(1<d.length)if(n=decodeURIComponent(d.slice(1).join("=")),"undefined"===n)n=void 0;else if(n.match(/^(true|false|null|[0-9"[{].*)$/))try{n=JSON.parse(n)}catch(b){"["===n[0]&&(n=n.slice(1,-1).split(","))}f[h]=n}return f}function au(f){return Object.keys(f).map(function(c){return c+
"="+encodeURIComponent(String(f[c]))}).join("&")}function nj(f){var c=f;do f=c,c=f.replace(of.pathDoubleDotRe,"");while(c!=f);c=c.replace(of.pathDoubleSlashRe,"$1/");return c=c.replace(of.pathDotRe,"/")}function bu(f,c){var k=f.match(of.urlRe),d=c.match(of.urlRe),h=!0;if(k&&!d||!k&&d)h=!1;if(k&&d){var n=k[1];var b=k[2];var e=d[1];var m=d[2];n!==e?h=!1:b!==m?h=!1:(f=k[3],c=d[3])}if(!h)throw Error("[relativePathBetween] incompatible paths: "+f+" vs. "+c);f=of.withRelativePartsResolved(f);c=of.withRelativePartsResolved(c);
if(f==c)return"";k=of._relativePathBetween_checkPathes(c,f);if(!k)throw Error("pathname differs in relativePathFrom "+f+" vs "+c);return k}function Fc(f,c){return of.withRelativePartsResolved(f.replace(of.slashEndRe,"")+"/"+c.replace(of.slashStartRe,""))}function lx(f){return f.startsWith("/")?f.replace(of.slashEndRe,"").split("/").slice(0,-1).join("/")+"/":""}function W(f){var c=[];for(f=of.parent(f);f&&(c.unshift(f),f=of.parent(f),"/"!==f););return c}function p(f,c){if(!f)throw Error("lively.resource resource constructor: expects url but got "+
f);if(f.isResource)return f;f=String(f);for(var k=0;k<of.extensions.length;k++)if(of.extensions[k].matches(f))return new of.extensions[k].resourceClass(f,c);throw Error("Cannot find resource type for url "+f);}function t(f,c,k){var d,h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return d=p(f,k).asDirectory(),e.yield(d.ensureExistance(),2);case 2:n=e.forIn(c);case 3:if(null==(h=n.getNext())){e.jumpTo(5);break}if(!c.hasOwnProperty(h)){e.jumpTo(3);
break}b=d.join(h);return"object"===typeof c[h]?e.yield(t(b,c[h],k),9):e.yield(b.write(c[h]),8);case 8:e.jumpTo(7);break;case 9:case 7:e.jumpTo(3);break;case 5:return e.return(d)}})}function w(f){var c=f.name;of.extensions=of.extensions.filter(function(k){return k.name!==c}).concat(f)}function x(f){var c="string"===typeof f?f:f.name;of.extensions=of.extensions.filter(function(k){return k.name!==c})}function C(f,c){var k=void 0===f.useProxy?!0:f.useProxy,d=void 0===f.useCors?!0:f.useCors,h=f.url,n=
f.onLoad,b=f.headers,e=f.onProgress,m=new XMLHttpRequest,a=Ag.promise.deferred();m.open("PUT",h);k&&(Object.assign(b,{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":h}),h=f.proxyDomain||Ag.defaultOrigin());for(var g in b)m.setRequestHeader(g,b[g]);m.upload.addEventListener("progress",e);m.responseType="json";m.onload=function(){n(m.response);a.resolve(m)};d&&(m.withCredentials=!0);m.send(c);return a.promise}function F(f,c,k){c=void 0===c?"infinity":c;var d,h,n,b,e,m,a,g,l,q,
r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.yield(f.dirList(c,k),2);case 2:d=v.yieldResult,h={},n=$jscomp.makeIterator(d),b=n.next();case 3:if(b.done){v.jumpTo(5);break}e=b.value;if(e.isDirectory()){m={};v.jumpTo(6);break}return v.yield(e.read(),7);case 7:m=v.yieldResult;case 6:a=m;g=e.asFile().relativePathFrom(f).split("/");l=h;q=$jscomp.makeIterator(g.slice(0,-1));for(r=q.next();!r.done;r=q.next())u=r.value,l[u]||(l[u]={}),l=l[u];l[g[g.length-
1]]=a;b=n.next();v.jumpTo(3);break;case 5:return v.return(h)}})}function M(f,c){var k=document.head,d=k.namespaceURI;return new Promise(function(h,n){var b=document.createElementNS(d,"script");b.setAttribute("type","text/ecmascript");k.appendChild(b);b.setAttributeNS(null,"id",f);"http://www.w3.org/2000/svg"===b.namespaceURI?b.setAttributeNS("http://www.w3.org/1999/xlink","href",f):b.setAttribute("src",f);b.onload=h;b.onerror=n;b.setAttributeNS(null,"async",!0)})}function R(){var f,c,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:if("fetch"in
System.global&&"Headers"in System.global)return d.return(Promise.resolve());f=System.decanonicalize("lively.resources");if(System.get("@system-env").node){d.setCatchFinallyBlocks(5);c=System._nodeRequire("fetch-ponyfill");d.leaveTryBlock(3);break}return d.yield(System.import("fetch-ponyfill",f),4);case 4:c=d.yieldResult;d.jumpTo(3);break;case 5:return d.enterCatchBlock(),d.yield(System.normalize("fetch-ponyfill",f),7);case 7:k=d.yieldResult.replace("file://",""),c=System._nodeRequire(k);case 3:Object.assign(System.global,
c()),d.jumpToEnd()}})}function ba(f,c){c=(c=c.trim())&&"?"!==c?Vh.parseQuery(c):{};c.name=f.replace(/\.json$/,"").replace(/%20/g," ");return"/worlds/load?"+Vh.stringifyQuery(c)}function fa(f){Object.assign(Vh.nameToClassMapping,f)}function wa(f,c){f=void 0===f?{}:f;c=void 0===c?{restore:!1}:c;var k=Vh.nameToClassMapping.default;f.type&&("function"===typeof f.type&&(k=f.type),"object"===typeof f.type?k=Vh.locateClass(f.type):"string"===typeof f.type&&(k=Vh.nameToClassMapping[f.type.toLowerCase()]||
k));var d={};return c.restore?(new k((d[Symbol.for("lively-instance-restorer")]=!0,d))).initFromJSON(f):new k(f)}function Na(f){return("function"===typeof f?f.className:"string"===typeof f?f.toLowerCase():"")+"_"+Vh.string.newUUID().replace(/-/g,"_")}function kb(f){var c=f.key;f=0|(f.ctrlKey?1:0)|(f.altKey?2:0)|(f.shiftKey?4:0)|(f.metaKey?8:0);0===f&&!yh.canonicalizeFunctionKey(c)&&c&&yh.letterRe.test(c)&&(f=-1);return f}function jb(f,c){if("string"===typeof f)return f;if(!f||"object"!==typeof f)return null;
switch(c){case "ios":return f.ios||f.mac;case "mac":return f.mac||f.ios;case "win":case "windows":case "windowsphone":return f.win||f.windows;case "linux":return f.linux||f.win||f.windows;case "chromeos":return f.chromeos||f.linux||f.win||f.windows;case "android":return f.android||f.linux||f.win||f.windows;default:return f.linux||f.win||f.windows}}function hc(f,c,k,d){d=void 0===d?k.name:d;(f[c]=Pn.fun.wrap(f[c],k)).hookFunc=k;k.hookName=d}function lc(f,c,k){for(var d=[],h=f[c];h;)d.push(h),h=h.originalFunction;
h="string"===typeof k?d.find(function(n){return n.hookFunc&&n.hookFunc.hookName===k}):d.find(function(n){return n.hookFunc===k});if(!h)return!1;Pn.arr.remove(d,h);f[c]=d.reduceRight(function(n,b){return Pn.fun.wrap(n,b.hookFunc||b)});return!0}function Yb(f,c,k){for(f=f[c];f;){if(f.hookFunc&&("string"===typeof k&&f.hookFunc.hookName===k||f.hookFunc===k))return!0;f=f.originalFunction}return!1}function Uc(f){if(f.loads){var c=f.loads;return cu.arr.uniq(Object.keys(cu.loadedModules(f)).concat(Object.keys(c))).reduce(function(k,
d){var h=c[d]?c[d].depMap:{};k[d]=Object.keys(h).map(function(n){var b=h[n];return"@empty"===b?b+"/"+n:b});return k},{})}return Object.keys(f._loader.moduleRecords).reduce(function(k,d){k[d]=f._loader.moduleRecords[d].dependencies.filter(Boolean).map(function(h){return h.name});return k},{})}function dd(f,c,k,d,h){var n=f.get("@lively-env").pendingExportChanges;(f=Lm.module(f,c).record())&&(k in f.exports||h)&&((n[c]||(n[c]={}))[k]=d)}function Jd(f,c){var k=f.get("@lively-env").pendingExportChanges[c];
k&&(Lm.clearPendingModuleExportChanges(f,c),Lm.updateModuleExports(f,c,k))}function ed(f,c,k,d,h){var n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:e.setCatchFinallyBlocks(2);f.debug&&console.log("[module change] "+c+" "+k.slice(0,50).replace(/\n/g,"")+" "+d);if(!d||"es6"===d||"esm"===d||"register"===d||"defined"===d)return e.yield(oj.moduleSourceChangeEsm(f,c,k,h),8);if("global"!==d)throw Error("moduleSourceChange is not supported for module "+c+
" with format "+d);return e.yield(oj.moduleSourceChangeGlobal(f,c,k,h),7);case 7:n=e.yieldResult;e.jumpTo(5);break;case 8:n=e.yieldResult;case 5:return oj.emit("lively.modules/modulechanged",{module:c,newSource:k,options:h},Date.now(),f),e.return(n);case 2:throw b=e.enterCatchBlock(),oj.emit("lively.modules/modulechanged",{module:c,newSource:k,error:b,options:h},Date.now(),f),b;}})}function Qd(f){return/\.js/i.test(f)}function Ae(f){return Ql.isJsFile(f)?f.replace(/\/[^\/]*$/,""):f.replace(/\/$/,
"")}function me(f){return/^[^:\\]+:\/\//.test(f)}function Nd(f){var c=f.match(/^([^:]+:\/\/)(.*)/);if(!c)return f;f=c[1];var k=c=c[2];do c=k,k=c.replace(/\/[^\/]+\/\.\./,"");while(k!=c);k=k.replace(/(^|[^:])[\/]+/g,"$1/");k=k.replace(/\/\.\//g,"/");return f+k}function Le(f,c,k){k=void 0===k?!1:k;var d=Ie.classHolder.PackageRegistry.ofSystem(f),h=d.allPackageURLs();f=k?c:Ie.normalizePackageURL(f,c,h);return{pkg:d.findPackageWithURL(f),url:f,allPackageURLs:h,registry:d}}function ke(f,c,k){f=Ie.lookupPackage(f,
c,void 0===k?!1:k);c=f.url;k=f.registry;return f.pkg||k.addPackageAt(c,"devPackageDirs")}function de(f,c,k){f=Ie.lookupPackage(f,c,void 0===k?!1:k);if(k=f.pkg)return k;throw Error("[getPackage] package "+c+" (as "+f.url+") not found");}function Be(f,c,k){return Ie.getPackage(f,k).updateConfig(c)}function ef(f,c){return Promise.resolve(Ie.ensurePackage(f,c)).then(function(k){return k.import()})}function Ze(f,c){return(f=Ie.lookupPackage(f,c).pkg)?f.remove():null}function wf(f,c,k){return Ie.getPackage(f,
c).reload(k)}function Jg(f,c,k){return Promise.resolve(Ie.ensurePackage(f,c)).then(function(d){return d.register(k)})}function Pi(f){return Ie.Package.allPackages(f).map(function(c){return c.asSpec()})}function di(f,c){f="string"===typeof f?hd.parse(f):f;c.scope=hd.query.resolveReferences(hd.query.scopes(f));return hd.ClassReplaceVisitor.run(f,c)}function Wh(f,c,k){k=ln.ensureParent(f,c);var d=f.System._nodeRequire("module");c.startsWith(".")&&(c=ln.relative(f,c));return d._load(c,k)}function Ng(f,
c,k){k=ln.ensureParent(f,c);var d=f.System._nodeRequire("module");c.startsWith(".")&&(c=ln.relative(f,c));return d._resolveFilename(c,k)}function ih(f,c,k){var d=Me.livelySystemEnv(f);c=f.decanonicalize(c,k);return d.loadedModules[c]||(d.loadedModules[c]=new Me.ModuleInterface(f,c))}function Bo(f,c,k){k=void 0===k?!1:k;var d=Me.livelySystemEnv(f);return(k?c:f.normalizeSync(c))in d.loadedModules}function Mm(f,c,k){k=void 0===k?!1:k;var d,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress){Me.livelySystemEnv(f);d=k?c:f.normalizeSync(c);if(Me.isModuleLoaded(f,d,!0))return b.return(!0);h=Me.Package.forModuleId(f,d);return h&&"no group"!==h.name?b.yield(h.hasResource(d),3):(n=f.resource(d).exists(),b.jumpTo(2))}2!=b.nextAddress&&(n=b.yieldResult);return b.return(n)})}function ks(){return ie.exceptions}function ls(f){return ie.exceptions=f}function ms(f,c,k,d,h){c=String(c);f=d.sourceAccessorName;var n=d.recorder,b=d.recorderName,e=d.dontTransform,m=d.varDefinitionCallbackName,
a=void 0===d.embedOriginalCode?!0:d.embedOriginalCode;f=a?f:void 0;d={topLevelVarRecorder:n,varRecorderName:b,sourceAccessorName:f,dontTransform:e,jsx:k.endsWith(".jsx"),recordGlobals:!0,keepPreviouslyDeclaredValues:!0,declarationWrapperName:m,evalId:d.nextEvalId(),classTransform:ie.classToFunctionTransform,currentModuleAccessor:ie.funcCall(ie.member(ie.funcCall(ie.member(ie.member("__lvVarRecorder","System"),"get"),ie.literal("@lively-env")),"moduleEnv"),ie.literal(k))};n=h?'console.log("[lively.modules] executing module '+
k+'");\n':"";e="";"System.global"===b?delete d.declarationWrapperName:(n+='System.get("@lively-env").evaluationStart("'+k+'");\nvar '+(b+' = System.get("@lively-env").moduleEnv("'+k+'").recorder;\n')+(a?"\nvar "+f+" = "+JSON.stringify(c)+";\n":""),e+='\nSystem.get("@lively-env").evaluationEnd("'+k+'");');try{var g=n+ie.evalCodeTransform(c,d)+e;h&&"undefined"!==typeof $world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=g);return{source:g,options:d}}catch(l){return console.error("Error in prepareCodeForCustomCompile of "+
k+" "+l.stack),{source:c,options:d}}}function ns(f,c,k,d,h,n){c=String(c);f=Object.assign({},h,{classTransform:ie.classToFunctionTransform,topLevelVarRecorder:d.recorder,varRecorderName:d.recorderName,dontTransform:d.dontTransform,recordGlobals:!0,declarationWrapperName:d.varDefinitionCallbackName,currentModuleAccessor:ie.funcCall(ie.member(ie.funcCall(ie.member(ie.member("__lvVarRecorder","System"),"get"),ie.literal("@lively-env")),"moduleEnv"),ie.literal(k))});try{var b=ie.evalCodeTransformOfSystemRegisterSetters(c,
f);n&&"undefined"!==typeof $world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString+=b);return b}catch(e){return console.error("Error in prepareTranslatedCodeForSetterCapture",e.stack),c}}function Dp(f,c){return f.translate(c).then(function(k){var d=ie.parse(k).body.find(function(n){return n.expression&&"CallExpression"===n.expression.type&&"register"===n.expression.callee.property.name});if(!d)throw Error("Cannot find register call in translated source of "+c.name);var h=
d.expression;d=h.arguments[0].elements.map(function(n){return n.value});h=h.arguments[1];k=k.slice(h.start,h.end);k=eval('var __moduleName = "'+c.name+'";('+k+");\n//# sourceURL="+c.name+"\n");f.debug&&"undefined"!==$world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=k);return{localDeps:d,declare:k}})}function Ug(f,c){return f.translate(c).then(function(k){return{translated:k}})}function Qi(f){ie.isHookInstalled(f,"translate","lively_modules_translate_hook")||ie.installHook(f,
"translate",function(c,k){return ie.customTranslate.call(f,c,k)},"lively_modules_translate_hook")}function Gi(f){ie.removeHook(f,"translate","lively_modules_translate_hook")}function Rl(f){f.resource=qh.resource;qh.isHookInstalled(f,"fetch",qh.fetchResource)&&qh.removeHook(f,"fetch","fetchResource");qh.installHook(f,"fetch",qh.fetchResource);qh.isHookInstalled(f,"resource","livelyProtocol")&&qh.removeHook(f,"fetch","livelyProtocol");qh.installHook(f,"resource",qh.livelyProtocol)}function sz(f){qh.removeHook(f,
"fetch","fetchResource");qh.removeHook(f,"resource","livelyProtocol");delete f.resource}function Cv(f){Bd.isHookInstalled(f,"normalize","normalizeHook")||Bd.installHook(f,"normalize",Bd.normalizeHook,"normalizeHook");Bd.isHookInstalled(f,"decanonicalize","decanonicalizeHook")||Bd.installHook(f,"decanonicalize",Bd.decanonicalizeHook,"decanonicalizeHook");Bd.isHookInstalled(f,"normalizeSync","decanonicalizeHook")||Bd.installHook(f,"normalizeSync",Bd.decanonicalizeHook,"decanonicalizeHook");Bd.isHookInstalled(f,
"newModule","newModule_volatile")||Bd.installHook(f,"newModule",Bd.newModule_volatile,"newModule_volatile");Bd.isHookInstalled(f,"instantiate","instantiate_triggerOnLoadCallbacks")||Bd.installHook(f,"instantiate",Bd.instantiate_triggerOnLoadCallbacks,"instantiate_triggerOnLoadCallbacks");Bd.isHookInstalled(f,"locate","locateHook")||Bd.installHook(f,"locate",Bd.locateHook,"locateHook")}function Vg(f){Bd.removeHook(f,"normalize","normalizeHook");Bd.removeHook(f,"decanonicalize","decanonicalizeHook");
Bd.removeHook(f,"normalizeSync","decanonicalizeHook");Bd.removeHook(f,"newModule","newModule_volatile");Bd.removeHook(f,"instantiate","instantiate_triggerOnLoadCallbacks");Bd.removeHook(f,"locate","locateHook")}function dl(f){return{moduleEnv:function(c){return Bd.classHolder.module(f,c)},get itself(){return f.get(f.decanonicalize("lively.modules/index.js"))},evaluationStart:function(c){Bd.classHolder.module(f,c).evaluationStart()},evaluationEnd:function(c){Bd.classHolder.module(f,c).evaluationEnd()},
dumpConfig:function(){return JSON.stringify({baseURL:f.baseURL,transpiler:f.transpiler,defaultJSExtensions:f.defaultJSExtensions,map:f.map,meta:f.meta,packages:f.packages,paths:f.paths,packageConfigPaths:f.packageConfigPaths},null,2)},get packageRegistry(){return f["__lively.modules__packageRegistry"]},set packageRegistry(c){f["__lively.modules__packageRegistry"]=c},packages:f["__lively.modules__packages"]||(f["__lively.modules__packages"]={}),loadedModules:f["__lively.modules__loadedModules"]||(f["__lively.modules__loadedModules"]=
{}),pendingExportChanges:f["__lively.modules__pendingExportChanges"]||(f["__lively.modules__pendingExportChanges"]={}),notifications:f["__lively.modules__notifications"]||(f["__lively.modules__notifications"]=[]),notificationSubscribers:f["__lively.modules__notificationSubscribers"]||(f["__lively.modules__notificationSubscribers"]={}),options:f["__lively.modules__options"]||(f["__lively.modules__options"]=Bd.obj.deepCopy(Bd.defaultOptions)),onLoadCallbacks:f["__lively.modules__onLoadCallbacks"]||
(f["__lively.modules__onLoadCallbacks"]=[]),modulePackageMapCache:f["__lively.modules__modulePackageMapCache"]}}function Sl(f,c){return f&&"string"!==typeof f?f:Bd.systems()[f]||(Bd.systems()[f]=Bd.makeSystem(c))}function Kq(f){f=f&&"string"!==typeof f?Bd.nameOfSystem(f):f;delete Bd.systems()[f]}function ME(f,c){f.trace=!0;c=c||{};var k=c.hasOwnProperty("useModuleTranslationCache")?c.useModuleTranslationCache:!Bd.urlQuery().noModuleCache;f.useModuleTranslationCache=k;f.set("@lively-env",f.newModule(Bd.livelySystemEnv(f)));
"undefined"!==typeof WorkerGlobalScope&&f.set("@system-env",f.newModule(Object.assign({},f.get("@system-env"),{browser:!0,worker:!0,location:location})));(k="undefined"!==typeof process&&process.versions&&process.versions.electron)&&f.set("@system-env",f.newModule(Object.assign({electron:k},f.get("@system-env"))));Bd.wrapResource(f);Bd.wrapModuleLoad(f);Bd.wrapModuleResolution(f);k&&(k=["electron"].reduce(function(d,h){d[h]="@node/"+h;return d},{}),c.map=Bd.obj.merge(k,c.map));Bd.isNode&&(k="addons assert buffer child_process cluster console crypto dgram dns domain events fs http https module net os path punycode querystring readline repl stream stringdecoder timers tls tty url util v8 vm zlib constants".split(" ").reduce(function(d,
h){d[h]="@node/"+h;return d},{}),c.map=Bd.obj.merge(k,c.map));c.packageConfigPaths=c.packageConfigPaths||["./node_modules/*/package.json"];c.transpiler||"traceur"!==f.transpiler||(k=Bd.GLOBAL.System,"lively.transpiler"===k.transpiler?(f.set("lively.transpiler",k.get("lively.transpiler")),f._loader.transpilerPromise=k._loader.transpilerPromise,f.config({transpiler:"lively.transpiler",babelOptions:Object.assign(k.babelOptions||{},c.babelOptions)})):f.config({map:{"plugin-babel":k.map["plugin-babel"],
"systemjs-babel-build":k.map["systemjs-babel-build"]},transpiler:k.transpiler,babelOptions:Object.assign(k.babelOptions||{},c.babelOptions)}));f.config(c);return f}function NE(f){f=Bd.getSystem(f);return JSON.stringify({baseURL:f.baseURL,transpiler:f.transpiler,defaultJSExtensions:f.defaultJSExtensions,defaultExtension:f.defaultExtension,map:f.map,meta:f.meta,packages:f.packages,paths:f.paths,packageConfigPaths:f.packageConfigPaths,bundles:f.bundles},null,2)}function OE(f,c,k){var d=f.decanonicalize(c);
if(f.get(d))try{k(Bd.classHolder.module(f,d))}catch(h){console.error(h)}else f.get("@lively-env").onLoadCallbacks.push({moduleName:c,resolved:!1,callback:k})}function PE(f){return f.get("@lively-env").loadedModules}function QE(f){var c=f.loads?Object.keys(f.loads):Object.keys(f._loader.moduleRecords);return Bd.arr.uniq(c.concat(Object.keys(Bd.loadedModules(f))))}function iK(f,c,k){return Promise.all(Bd.obj.values(Bd.loadedModules(f)).map(function(d){return d.search(c,k)})).then(function(d){return Bd.arr.flatten(d,
1)})}function jK(){throw Error("setTimeout has not been defined");}function kK(){throw Error("clearTimeout has not been defined");}function sS(f){if(Dv===setTimeout)return setTimeout(f,0);if((Dv===jK||!Dv)&&setTimeout)return Dv=setTimeout,setTimeout(f,0);try{return Dv(f,0)}catch(c){try{return Dv.call(null,f,0)}catch(k){return Dv.call(this||tz,f,0)}}}function b6(){uz&&mx&&(uz=!1,mx.length?du=mx.concat(du):RE=-1,du.length&&tS())}function tS(){if(!uz){var f=sS(b6);uz=!0;for(var c=du.length;c;){mx=du;
for(du=[];++RE<c;)mx&&mx[RE].run();RE=-1;c=du.length}mx=null;uz=!1;(function(k){if(Ev===clearTimeout)return clearTimeout(k);if((Ev===kK||!Ev)&&clearTimeout)return Ev=clearTimeout,clearTimeout(k);try{Ev(k)}catch(d){try{return Ev.call(null,k)}catch(h){return Ev.call(this||tz,k)}}})(f)}}function uS(f,c){(this||tz).fun=f;(this||tz).array=c}function eu(){}function SE(){if(vS)return wS;vS=!0;return wS={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,
MAX_SAFE_COMPONENT_LENGTH:16}}function TE(){if(xS)return yS;xS=!0;var f=zi;return yS="object"===typeof f&&f.env&&f.env.NODE_DEBUG&&/\bsemver\b/i.test(f.env.NODE_DEBUG)?function(c){for(var k=[],d=0;d<arguments.length;++d)k[d-0]=arguments[d];return console.error.apply(console,["SEMVER"].concat($jscomp.arrayFromIterable(k)))}:function(){}}function vz(){if(zS)return os;zS=!0;var f=SE().MAX_SAFE_COMPONENT_LENGTH,c=TE();os=os={};var k=os.re=[],d=os.src=[],h=os.t={},n=0,b=function(e,m,a){var g=n++;c(g,m);
h[e]=g;d[g]=m;k[g]=new RegExp(m,a?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*");b("NUMERICIDENTIFIERLOOSE","[0-9]+");b("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");b("MAINVERSION","("+d[h.NUMERICIDENTIFIER]+")\\.("+(d[h.NUMERICIDENTIFIER]+")\\.(")+(d[h.NUMERICIDENTIFIER]+")"));b("MAINVERSIONLOOSE","("+d[h.NUMERICIDENTIFIERLOOSE]+")\\.("+(d[h.NUMERICIDENTIFIERLOOSE]+")\\.(")+(d[h.NUMERICIDENTIFIERLOOSE]+")"));b("PRERELEASEIDENTIFIER","(?:"+d[h.NUMERICIDENTIFIER]+"|"+d[h.NONNUMERICIDENTIFIER]+
")");b("PRERELEASEIDENTIFIERLOOSE","(?:"+d[h.NUMERICIDENTIFIERLOOSE]+"|"+d[h.NONNUMERICIDENTIFIER]+")");b("PRERELEASE","(?:-("+d[h.PRERELEASEIDENTIFIER]+"(?:\\."+d[h.PRERELEASEIDENTIFIER]+")*))");b("PRERELEASELOOSE","(?:-?("+d[h.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+d[h.PRERELEASEIDENTIFIERLOOSE]+")*))");b("BUILDIDENTIFIER","[0-9A-Za-z-]+");b("BUILD","(?:\\+("+d[h.BUILDIDENTIFIER]+"(?:\\."+d[h.BUILDIDENTIFIER]+")*))");b("FULLPLAIN","v?"+d[h.MAINVERSION]+d[h.PRERELEASE]+"?"+d[h.BUILD]+"?");b("FULL",
"^"+d[h.FULLPLAIN]+"$");b("LOOSEPLAIN","[v=\\s]*"+d[h.MAINVERSIONLOOSE]+d[h.PRERELEASELOOSE]+"?"+d[h.BUILD]+"?");b("LOOSE","^"+d[h.LOOSEPLAIN]+"$");b("GTLT","((?:<|>)?=?)");b("XRANGEIDENTIFIERLOOSE",d[h.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*");b("XRANGEIDENTIFIER",d[h.NUMERICIDENTIFIER]+"|x|X|\\*");b("XRANGEPLAIN","[v=\\s]*("+d[h.XRANGEIDENTIFIER]+")(?:\\.("+(d[h.XRANGEIDENTIFIER]+")(?:\\.(")+(d[h.XRANGEIDENTIFIER]+")(?:")+(d[h.PRERELEASE]+")?"+d[h.BUILD]+"?)?)?"));b("XRANGEPLAINLOOSE","[v=\\s]*("+d[h.XRANGEIDENTIFIERLOOSE]+
")(?:\\.("+(d[h.XRANGEIDENTIFIERLOOSE]+")(?:\\.(")+(d[h.XRANGEIDENTIFIERLOOSE]+")(?:")+(d[h.PRERELEASELOOSE]+")?"+d[h.BUILD]+"?)?)?"));b("XRANGE","^"+d[h.GTLT]+"\\s*"+d[h.XRANGEPLAIN]+"$");b("XRANGELOOSE","^"+d[h.GTLT]+"\\s*"+d[h.XRANGEPLAINLOOSE]+"$");b("COERCE","(^|[^\\d])(\\d{1,"+f+"})(?:\\.(\\d{1,"+(f+"}))?(?:\\.(\\d{1,")+(f+"}))?(?:$|[^\\d])"));b("COERCERTL",d[h.COERCE],!0);b("LONETILDE","(?:~>?)");b("TILDETRIM","(\\s*)"+d[h.LONETILDE]+"\\s+",!0);os.tildeTrimReplace="$1~";b("TILDE","^"+d[h.LONETILDE]+
d[h.XRANGEPLAIN]+"$");b("TILDELOOSE","^"+d[h.LONETILDE]+d[h.XRANGEPLAINLOOSE]+"$");b("LONECARET","(?:\\^)");b("CARETTRIM","(\\s*)"+d[h.LONECARET]+"\\s+",!0);os.caretTrimReplace="$1^";b("CARET","^"+d[h.LONECARET]+d[h.XRANGEPLAIN]+"$");b("CARETLOOSE","^"+d[h.LONECARET]+d[h.XRANGEPLAINLOOSE]+"$");b("COMPARATORLOOSE","^"+d[h.GTLT]+"\\s*("+d[h.LOOSEPLAIN]+")$|^$");b("COMPARATOR","^"+d[h.GTLT]+"\\s*("+d[h.FULLPLAIN]+")$|^$");b("COMPARATORTRIM","(\\s*)"+d[h.GTLT]+"\\s*("+d[h.LOOSEPLAIN]+"|"+d[h.XRANGEPLAIN]+
")",!0);os.comparatorTrimReplace="$1$2$3";b("HYPHENRANGE","^\\s*("+d[h.XRANGEPLAIN]+")\\s+-\\s+("+(d[h.XRANGEPLAIN]+")\\s*$"));b("HYPHENRANGELOOSE","^\\s*("+d[h.XRANGEPLAINLOOSE]+")\\s+-\\s+("+(d[h.XRANGEPLAINLOOSE]+")\\s*$"));b("STAR","(<|>)?=?\\s*\\*");b("GTE0","^\\s*>=\\s*0.0.0\\s*$");b("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$");return os}function lK(){if(AS)return BS;AS=!0;var f=/^[0-9]+$/,c=function(k,d){var h=f.test(k),n=f.test(d);h&&n&&(k=+k,d=+d);return k===d?0:h&&!n?-1:n&&!h?1:k<d?-1:1};return BS=
{compareIdentifiers:c,rcompareIdentifiers:function(k,d){return c(d,k)}}}function mn(){if(CS)return DS;CS=!0;var f=TE(),c=SE(),k=c.MAX_LENGTH,d=c.MAX_SAFE_INTEGER;c=vz();var h=c.re,n=c.t,b=lK().compareIdentifiers,e=function(m,a){a&&"object"===typeof a||(a={loose:!!a,includePrerelease:!1});if(m instanceof e){if(m.loose===!!a.loose&&m.includePrerelease===!!a.includePrerelease)return m;m=m.version}else if("string"!==typeof m)throw new TypeError("Invalid Version: "+m);if(m.length>k)throw new TypeError("version is longer than "+
k+" characters");f("SemVer",m,a);(this||pf).options=a;(this||pf).loose=!!a.loose;(this||pf).includePrerelease=!!a.includePrerelease;a=m.trim().match(a.loose?h[n.LOOSE]:h[n.FULL]);if(!a)throw new TypeError("Invalid Version: "+m);(this||pf).raw=m;(this||pf).major=+a[1];(this||pf).minor=+a[2];(this||pf).patch=+a[3];if((this||pf).major>d||0>(this||pf).major)throw new TypeError("Invalid major version");if((this||pf).minor>d||0>(this||pf).minor)throw new TypeError("Invalid minor version");if((this||pf).patch>
d||0>(this||pf).patch)throw new TypeError("Invalid patch version");(this||pf).prerelease=a[4]?a[4].split(".").map(function(g){if(/^[0-9]+$/.test(g)){var l=+g;if(0<=l&&l<d)return l}return g}):[];(this||pf).build=a[5]?a[5].split("."):[];this.format()};e.prototype.format=function(){(this||pf).version=(this||pf).major+"."+(this||pf).minor+"."+(this||pf).patch;(this||pf).prerelease.length&&((this||pf).version+="-"+(this||pf).prerelease.join("."));return(this||pf).version};e.prototype.toString=function(){return(this||
pf).version};e.prototype.compare=function(m){f("SemVer.compare",(this||pf).version,(this||pf).options,m);if(!(m instanceof e)){if("string"===typeof m&&m===(this||pf).version)return 0;m=new e(m,(this||pf).options)}return m.version===(this||pf).version?0:this.compareMain(m)||this.comparePre(m)};e.prototype.compareMain=function(m){m instanceof e||(m=new e(m,(this||pf).options));return b((this||pf).major,m.major)||b((this||pf).minor,m.minor)||b((this||pf).patch,m.patch)};e.prototype.comparePre=function(m){m instanceof
e||(m=new e(m,(this||pf).options));if((this||pf).prerelease.length&&!m.prerelease.length)return-1;if(!(this||pf).prerelease.length&&m.prerelease.length)return 1;if(!(this||pf).prerelease.length&&!m.prerelease.length)return 0;var a=0;do{var g=(this||pf).prerelease[a],l=m.prerelease[a];f("prerelease compare",a,g,l);if(void 0===g&&void 0===l)return 0;if(void 0===l)return 1;if(void 0===g)return-1;if(g!==l)return b(g,l)}while(++a)};e.prototype.compareBuild=function(m){m instanceof e||(m=new e(m,(this||
pf).options));var a=0;do{var g=(this||pf).build[a],l=m.build[a];f("prerelease compare",a,g,l);if(void 0===g&&void 0===l)return 0;if(void 0===l)return 1;if(void 0===g)return-1;if(g!==l)return b(g,l)}while(++a)};e.prototype.inc=function(m,a){switch(m){case "premajor":(this||pf).prerelease.length=0;(this||pf).patch=0;(this||pf).minor=0;(this||pf).major++;this.inc("pre",a);break;case "preminor":(this||pf).prerelease.length=0;(this||pf).patch=0;(this||pf).minor++;this.inc("pre",a);break;case "prepatch":(this||
pf).prerelease.length=0;this.inc("patch",a);this.inc("pre",a);break;case "prerelease":0===(this||pf).prerelease.length&&this.inc("patch",a);this.inc("pre",a);break;case "major":0===(this||pf).minor&&0===(this||pf).patch&&0!==(this||pf).prerelease.length||(this||pf).major++;(this||pf).minor=0;(this||pf).patch=0;(this||pf).prerelease=[];break;case "minor":0===(this||pf).patch&&0!==(this||pf).prerelease.length||(this||pf).minor++;(this||pf).patch=0;(this||pf).prerelease=[];break;case "patch":0===(this||
pf).prerelease.length&&(this||pf).patch++;(this||pf).prerelease=[];break;case "pre":if(0===(this||pf).prerelease.length)(this||pf).prerelease=[0];else{for(m=(this||pf).prerelease.length;0<=--m;)"number"===typeof(this||pf).prerelease[m]&&((this||pf).prerelease[m]++,m=-2);-1===m&&(this||pf).prerelease.push(0)}a&&((this||pf).prerelease[0]===a?isNaN((this||pf).prerelease[1])&&((this||pf).prerelease=[a,0]):(this||pf).prerelease=[a,0]);break;default:throw Error("invalid increment argument: "+m);}this.format();
(this||pf).raw=(this||pf).version;return this||pf};return DS=e}function wz(){if(ES)return FS;ES=!0;var f=SE().MAX_LENGTH,c=vz(),k=c.re,d=c.t,h=mn();return FS=function(n,b){b&&"object"===typeof b||(b={loose:!!b,includePrerelease:!1});if(n instanceof h)return n;if("string"!==typeof n||n.length>f||!(b.loose?k[d.LOOSE]:k[d.FULL]).test(n))return null;try{return new h(n,b)}catch(e){return null}}}function c6(){if(GS)return HS;GS=!0;var f=wz();return HS=function(c,k){return(c=f(c,k))?c.version:null}}function d6(){if(IS)return JS;
IS=!0;var f=mn();return JS=function(c,k,d,h){"string"===typeof d&&(h=d,d=void 0);try{return(new f(c,d)).inc(k,h).version}catch(n){return null}}}function Lq(){if(KS)return LS;KS=!0;var f=mn();return LS=function(c,k,d){return(new f(c,d)).compare(new f(k,d))}}function UE(){if(MS)return NS;MS=!0;var f=Lq();return NS=function(c,k,d){return 0<f(c,k,d)}}function mK(){if(OS)return PS;OS=!0;var f=Lq();return PS=function(c,k,d){return 0<=f(c,k,d)}}function nK(){if(QS)return RS;QS=!0;var f=Lq();return RS=function(c,
k,d){return 0===f(c,k,d)}}function oK(){if(SS)return TS;SS=!0;var f=Lq();return TS=function(c,k,d){return 0>f(c,k,d)}}function US(){if(VS)return WS;VS=!0;var f=Lq();return WS=function(c,k,d){return 0!==f(c,k,d)}}function pK(){if(XS)return YS;XS=!0;var f=Lq();return YS=function(c,k,d){return 0>=f(c,k,d)}}function ZS(){if($S)return aT;$S=!0;var f=nK(),c=US(),k=UE(),d=mK(),h=oK(),n=pK();return aT=function(b,e,m,a){switch(e){case "===":return"object"===typeof b&&(b=b.version),"object"===typeof m&&(m=
m.version),b===m;case "!==":return"object"===typeof b&&(b=b.version),"object"===typeof m&&(m=m.version),b!==m;case "":case "=":case "==":return f(b,m,a);case "!=":return c(b,m,a);case ">":return k(b,m,a);case ">=":return d(b,m,a);case "<":return h(b,m,a);case "<=":return n(b,m,a);default:throw new TypeError("Invalid operator: "+e);}}}function e6(){if(bT)return cT;bT=!0;var f=mn();return cT=function(c,k){return(new f(c,k)).major}}function f6(){if(dT)return eT;dT=!0;var f=mn(),c=wz(),k=vz(),d=k.re,
h=k.t;return eT=function(n,b){if(n instanceof f)return n;"number"===typeof n&&(n=String(n));if("string"!==typeof n)return null;b=b||{};var e=null;if(b.rtl){for(var m;(m=d[h.COERCERTL].exec(n))&&(!e||e.index+e[0].length!==n.length);)e&&m.index+m[0].length===e.index+e[0].length||(e=m),d[h.COERCERTL].lastIndex=m.index+m[1].length+m[2].length;d[h.COERCERTL].lastIndex=-1}else e=n.match(d[h.COERCE]);return null===e?null:c(e[2]+"."+(e[3]||"0")+"."+(e[4]||"0"),b)}}function Mq(){if(fT)return qK;fT=!0;var f=
function(B,G){var E=this;G&&"object"===typeof G||(G={loose:!!G,includePrerelease:!1});if(B instanceof f)return B.loose===!!G.loose&&B.includePrerelease===!!G.includePrerelease?B:new f(B.raw,G);if(B instanceof c)return(this||ik).raw=B.value,(this||ik).set=[[B]],this.format(),this||ik;(this||ik).options=G;(this||ik).loose=!!G.loose;(this||ik).includePrerelease=!!G.includePrerelease;(this||ik).raw=B;(this||ik).set=B.split(/\s*\|\|\s*/).map(function(K){return E.parseRange(K.trim())}).filter(function(K){return K.length});
if(!(this||ik).set.length)throw new TypeError("Invalid SemVer Range: "+B);this.format()};f.prototype.format=function(){(this||ik).range=(this||ik).set.map(function(B){return B.join(" ").trim()}).join("||").trim();return(this||ik).range};f.prototype.toString=function(){return(this||ik).range};f.prototype.parseRange=function(B){var G=this,E=(this||ik).options.loose;B=B.trim();B=B.replace(E?n[b.HYPHENRANGELOOSE]:n[b.HYPHENRANGE],A((this||ik).options.includePrerelease));k("hyphen replace",B);B=B.replace(n[b.COMPARATORTRIM],
e);k("comparator trim",B,n[b.COMPARATORTRIM]);B=B.replace(n[b.TILDETRIM],m);B=B.replace(n[b.CARETTRIM],a);B=B.split(/\s+/).join(" ");var K=E?n[b.COMPARATORLOOSE]:n[b.COMPARATOR];return B.split(" ").map(function(J){var P=J;J=(G||ik).options;k("comp",P,J);P=u(P,J);k("caret",P);P=q(P,J);k("tildes",P);P=y(P,J);k("xrange",P);k("replaceStars",P,J);P=P.trim().replace(n[b.STAR],"");k("stars",P);return P}).join(" ").split(/\s+/).map(function(J){var P=(G||ik).options;k("replaceGTE0",J,P);return J.trim().replace(n[P.includePrerelease?
b.GTE0PRE:b.GTE0],"")}).filter((this||ik).options.loose?function(J){return!!J.match(K)}:function(){return!0}).map(function(J){return new c(J,(G||ik).options)})};f.prototype.intersects=function(B,G){if(!(B instanceof f))throw new TypeError("a Range is required");return(this||ik).set.some(function(E){return g(E,G)&&B.set.some(function(K){return g(K,G)&&E.every(function(J){return K.every(function(P){return J.intersects(P,G)})})})})};f.prototype.test=function(B){if(!B)return!1;if("string"===typeof B)try{B=
new d(B,(this||ik).options)}catch(ea){return!1}for(var G=0;G<(this||ik).set.length;G++){a:{var E=(this||ik).set[G];for(var K=B,J=(this||ik).options,P=0;P<E.length;P++)if(!E[P].test(K)){E=!1;break a}if(K.prerelease.length&&!J.includePrerelease){for(J=0;J<E.length;J++)if(k(E[J].semver),E[J].semver!==c.ANY&&0<E[J].semver.prerelease.length&&(P=E[J].semver,P.major===K.major&&P.minor===K.minor&&P.patch===K.patch)){E=!0;break a}E=!1}else E=!0}if(E)return!0}return!1};qK=f;var c=VE(),k=TE(),d=mn(),h=vz(),
n=h.re,b=h.t,e=h.comparatorTrimReplace,m=h.tildeTrimReplace,a=h.caretTrimReplace,g=function(B,G){var E=!0;B=B.slice();for(var K=B.pop();E&&B.length;)E=B.every(function(J){return K.intersects(J,G)}),K=B.pop();return E},l=function(B){return!B||"x"===B.toLowerCase()||"*"===B},q=function(B,G){return B.trim().split(/\s+/).map(function(E){return r(E,G)}).join(" ")},r=function(B,G){return B.replace(G.loose?n[b.TILDELOOSE]:n[b.TILDE],function(E,K,J,P,ea){k("tilde",B,E,K,J,P,ea);l(K)?E="":l(J)?E=">="+K+".0.0 <"+
(+K+1)+".0.0-0":l(P)?E=">="+K+"."+J+".0 <"+K+"."+(+J+1)+".0-0":ea?(k("replaceTilde pr",ea),E=">="+K+"."+J+"."+P+"-"+ea+" <"+K+"."+(+J+1)+".0-0"):E=">="+K+"."+J+"."+P+" <"+K+"."+(+J+1)+".0-0";k("tilde return",E);return E})},u=function(B,G){return B.trim().split(/\s+/).map(function(E){return v(E,G)}).join(" ")},v=function(B,G){k("caret",B,G);var E=G.includePrerelease?"-0":"";return B.replace(G.loose?n[b.CARETLOOSE]:n[b.CARET],function(K,J,P,ea,ra){k("caret",B,K,J,P,ea,ra);l(J)?K="":l(P)?K=">="+J+".0.0"+
E+" <"+(+J+1)+".0.0-0":l(ea)?K="0"===J?">="+J+"."+P+".0"+E+" <"+J+"."+(+P+1)+".0-0":">="+J+"."+P+".0"+E+" <"+(+J+1)+".0.0-0":ra?(k("replaceCaret pr",ra),K="0"===J?"0"===P?">="+J+"."+P+"."+ea+"-"+ra+" <"+J+"."+P+"."+(+ea+1)+"-0":">="+J+"."+P+"."+ea+"-"+ra+" <"+J+"."+(+P+1)+".0-0":">="+J+"."+P+"."+ea+"-"+ra+" <"+(+J+1)+".0.0-0"):(k("no pr"),K="0"===J?"0"===P?">="+J+"."+P+"."+ea+E+" <"+J+"."+P+"."+(+ea+1)+"-0":">="+J+"."+P+"."+ea+E+" <"+J+"."+(+P+1)+".0-0":">="+J+"."+P+"."+ea+" <"+(+J+1)+".0.0-0");k("caret return",
K);return K})},y=function(B,G){k("replaceXRanges",B,G);return B.split(/\s+/).map(function(E){return z(E,G)}).join(" ")},z=function(B,G){B=B.trim();return B.replace(G.loose?n[b.XRANGELOOSE]:n[b.XRANGE],function(E,K,J,P,ea,ra){k("xRange",B,E,K,J,P,ea,ra);var D=l(J),O=D||l(P);ea=O||l(ea);"="===K&&ea&&(K="");ra=G.includePrerelease?"-0":"";D?E=">"===K||"<"===K?"<0.0.0-0":"*":K&&ea?(O&&(P=0),ea=0,">"===K?(K=">=",O?(J=+J+1,P=0):P=+P+1,ea=0):"<="===K&&(K="<",O?J=+J+1:P=+P+1),"<"===K&&(ra="-0"),E=K+J+"."+
P+"."+ea+ra):O?E=">="+J+".0.0"+ra+" <"+(+J+1)+".0.0-0":ea&&(E=">="+J+"."+P+".0"+ra+" <"+J+"."+(+P+1)+".0-0");k("xRange return",E);return E})},A=function(B){return function(G,E,K,J,P,ea,ra,D,O,L,N,aa,Y){E=l(K)?"":l(J)?">="+K+".0.0"+(B?"-0":""):l(P)?">="+K+"."+J+".0"+(B?"-0":""):ea?">="+E:">="+E+(B?"-0":"");D=l(O)?"":l(L)?"<"+(+O+1)+".0.0-0":l(N)?"<"+O+"."+(+L+1)+".0-0":aa?"<="+O+"."+L+"."+N+"-"+aa:B?"<"+O+"."+L+"."+(+N+1)+"-0":"<="+D;return(E+" "+D).trim()}};return qK}function VE(){if(gT)return rK;
gT=!0;var f=Symbol("SemVer ANY"),c=function(a,g){g&&"object"===typeof g||(g={loose:!!g,includePrerelease:!1});if(a instanceof c){if(a.loose===!!g.loose)return a;a=a.value}b("comparator",a,g);(this||ei).options=g;(this||ei).loose=!!g.loose;this.parse(a);(this||ei).value=(this||ei).semver===f?"":(this||ei).operator+(this||ei).semver.version;b("comp",this||ei)};c.prototype.parse=function(a){var g=a.match((this||ei).options.loose?d[h.COMPARATORLOOSE]:d[h.COMPARATOR]);if(!g)throw new TypeError("Invalid comparator: "+
a);(this||ei).operator=void 0!==g[1]?g[1]:"";"="===(this||ei).operator&&((this||ei).operator="");(this||ei).semver=g[2]?new e(g[2],(this||ei).options.loose):f};c.prototype.toString=function(){return(this||ei).value};c.prototype.test=function(a){b("Comparator.test",a,(this||ei).options.loose);if((this||ei).semver===f||a===f)return!0;if("string"===typeof a)try{a=new e(a,(this||ei).options)}catch(g){return!1}return n(a,(this||ei).operator,(this||ei).semver,(this||ei).options)};c.prototype.intersects=
function(a,g){if(!(a instanceof c))throw new TypeError("a Comparator is required");g&&"object"===typeof g||(g={loose:!!g,includePrerelease:!1});if(""===(this||ei).operator)return""===(this||ei).value?!0:(new m(a.value,g)).test((this||ei).value);if(""===a.operator)return""===a.value?!0:(new m((this||ei).value,g)).test(a.semver);var l=(">="===(this||ei).operator||">"===(this||ei).operator)&&(">="===a.operator||">"===a.operator),q=("<="===(this||ei).operator||"<"===(this||ei).operator)&&("<="===a.operator||
"<"===a.operator),r=(this||ei).semver.version===a.semver.version,u=(">="===(this||ei).operator||"<="===(this||ei).operator)&&(">="===a.operator||"<="===a.operator),v=n((this||ei).semver,"<",a.semver,g)&&(">="===(this||ei).operator||">"===(this||ei).operator)&&("<="===a.operator||"<"===a.operator);a=n((this||ei).semver,">",a.semver,g)&&("<="===(this||ei).operator||"<"===(this||ei).operator)&&(">="===a.operator||">"===a.operator);return l||q||r&&u||v||a};$jscomp.global.Object.defineProperties(c,{ANY:{configurable:!0,
enumerable:!0,get:function(){return f}}});rK=c;var k=vz(),d=k.re,h=k.t,n=ZS(),b=TE(),e=mn(),m=Mq();return rK}function WE(){if(hT)return iT;hT=!0;var f=Mq();return iT=function(c,k,d){try{k=new f(k,d)}catch(h){return!1}return k.test(c)}}function g6(){if(jT)return kT;jT=!0;var f=Mq();return kT=function(c,k){try{return(new f(c,k)).range||"*"}catch(d){return null}}}function h6(){if(lT)return mT;lT=!0;var f=wz();return mT=function(c,k){return(c=f(c.trim().replace(/^[=v]+/,""),k))?c.version:null}}function i6(){if(nT)return oT;
nT=!0;var f=wz(),c=nK();return oT=function(k,d){if(c(k,d))return null;k=f(k);d=f(d);var h=k.prerelease.length||d.prerelease.length,n=h?"pre":"",b;for(b in k)if(("major"===b||"minor"===b||"patch"===b)&&k[b]!==d[b])return n+b;return h?"prerelease":""}}function j6(){if(pT)return qT;pT=!0;var f=mn();return qT=function(c,k){return(new f(c,k)).minor}}function k6(){if(rT)return sT;rT=!0;var f=mn();return sT=function(c,k){return(new f(c,k)).patch}}function l6(){if(tT)return uT;tT=!0;var f=wz();return uT=
function(c,k){return(c=f(c,k))&&c.prerelease.length?c.prerelease:null}}function m6(){if(vT)return wT;vT=!0;var f=Lq();return wT=function(c,k,d){return f(k,c,d)}}function n6(){if(xT)return yT;xT=!0;var f=Lq();return yT=function(c,k){return f(c,k,!0)}}function sK(){if(zT)return AT;zT=!0;var f=mn();return AT=function(c,k,d){c=new f(c,d);k=new f(k,d);return c.compare(k)||c.compareBuild(k)}}function o6(){if(BT)return CT;BT=!0;var f=sK();return CT=function(c,k){return c.sort(function(d,h){return f(d,h,
k)})}}function p6(){if(DT)return ET;DT=!0;var f=sK();return ET=function(c,k){return c.sort(function(d,h){return f(h,d,k)})}}function q6(){if(FT)return GT;FT=!0;var f=Mq();return GT=function(c,k){return(new f(c,k)).set.map(function(d){return d.map(function(h){return h.value}).join(" ").trim().split(" ")})}}function r6(){if(HT)return IT;HT=!0;var f=mn(),c=Mq();return IT=function(k,d,h){var n=null,b=null,e=null;try{e=new c(d,h)}catch(m){return null}k.forEach(function(m){!e.test(m)||n&&-1!==b.compare(m)||
(n=m,b=new f(n,h))});return n}}function s6(){if(JT)return KT;JT=!0;var f=mn(),c=Mq();return KT=function(k,d,h){var n=null,b=null,e=null;try{e=new c(d,h)}catch(m){return null}k.forEach(function(m){!e.test(m)||n&&1!==b.compare(m)||(n=m,b=new f(n,h))});return n}}function t6(){if(LT)return MT;LT=!0;var f=mn(),c=Mq(),k=UE();return MT=function(d,h){d=new c(d,h);var n=new f("0.0.0");if(d.test(n))return n;n=new f("0.0.0-0");if(d.test(n))return n;n=null;for(h=0;h<d.set.length;++h)d.set[h].forEach(function(b){var e=
new f(b.semver.version);switch(b.operator){case ">":0===e.prerelease.length?e.patch++:e.prerelease.push(0),e.raw=e.format();case "":case ">=":if(!n||k(n,e))n=e;break;case "<":case "<=":break;default:throw Error("Unexpected operation: "+b.operator);}});return n&&d.test(n)?n:null}}function tK(){if(NT)return OT;NT=!0;var f=mn(),c=VE(),k=c.ANY,d=Mq(),h=WE(),n=UE(),b=oK(),e=pK(),m=mK();return OT=function(a,g,l,q){a=new f(a,q);g=new d(g,q);switch(l){case ">":var r=n;l=e;var u=b;var v=">";var y=">=";break;
case "<":r=b;l=m;u=n;v="<";y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"');}if(h(a,g,q))return!1;for(var z={},A=0;A<g.set.length;z={$jscomp$loop$prop$high$2229:z.$jscomp$loop$prop$high$2229,$jscomp$loop$prop$low$2230:z.$jscomp$loop$prop$low$2230},++A){var B=g.set[A];z.$jscomp$loop$prop$high$2229=null;z.$jscomp$loop$prop$low$2230=null;B.forEach(function(G){return function(E){E.semver===k&&(E=new c(">=0.0.0"));G.$jscomp$loop$prop$high$2229=G.$jscomp$loop$prop$high$2229||
E;G.$jscomp$loop$prop$low$2230=G.$jscomp$loop$prop$low$2230||E;r(E.semver,G.$jscomp$loop$prop$high$2229.semver,q)?G.$jscomp$loop$prop$high$2229=E:u(E.semver,G.$jscomp$loop$prop$low$2230.semver,q)&&(G.$jscomp$loop$prop$low$2230=E)}}(z));if(z.$jscomp$loop$prop$high$2229.operator===v||z.$jscomp$loop$prop$high$2229.operator===y||(!z.$jscomp$loop$prop$low$2230.operator||z.$jscomp$loop$prop$low$2230.operator===v)&&l(a,z.$jscomp$loop$prop$low$2230.semver)||z.$jscomp$loop$prop$low$2230.operator===y&&u(a,
z.$jscomp$loop$prop$low$2230.semver))return!1}return!0}}function u6(){if(PT)return QT;PT=!0;var f=tK();return QT=function(c,k,d){return f(c,k,">",d)}}function v6(){if(RT)return ST;RT=!0;var f=tK();return ST=function(c,k,d){return f(c,k,"<",d)}}function w6(){if(TT)return UT;TT=!0;var f=Mq();return UT=function(c,k,d){c=new f(c,d);k=new f(k,d);return c.intersects(k)}}function x6(){if(VT)return WT;VT=!0;var f=WE(),c=Lq();return WT=function(k,d,h){var n=[],b=null,e=null;k=k.sort(function(g,l){return c(g,
l,h)});for(var m=$jscomp.makeIterator(k),a=m.next();!a.done;a=m.next())a=a.value,f(a,d,h)?(e=a,b||(b=a)):(e&&n.push([b,e]),b=e=null);b&&n.push([b,null]);b=[];n=$jscomp.makeIterator(n);for(e=n.next();!e.done;e=n.next())m=$jscomp.makeIterator(e.value),e=m.next().value,m=m.next().value,e===m?b.push(e):m||e!==k[0]?m?e===k[0]?b.push("<="+m):b.push(e+" - "+m):b.push(">="+e):b.push("*");k=b.join(" || ");return k.length<("string"===typeof d.raw?d.raw:String(d)).length?k:d}}function y6(){if(XT)return YT;XT=
!0;var f=Mq(),c=VE().ANY,k=WE(),d=Lq(),h=function(e,m,a){if(1===e.length&&e[0].semver===c)return 1===m.length&&m[0].semver===c;var g=new Set,l,q,r=$jscomp.makeIterator(e);for(e=r.next();!e.done;e=r.next())e=e.value,">"===e.operator||">="===e.operator?l=n(l,e,a):"<"===e.operator||"<="===e.operator?q=b(q,e,a):g.add(e.semver);if(1<g.size)return null;if(l&&q){var u=d(l.semver,q.semver,a);if(0<u||0===u&&(">="!==l.operator||"<="!==q.operator))return null}for(e=$jscomp.makeIterator(g).next();!e.done;){u=
e.value;if(l&&!k(u,String(l),a)||q&&!k(u,String(q),a))return null;l=$jscomp.makeIterator(m);for(e=l.next();!e.done;e=l.next())if(!k(u,String(e.value),a))return!1;return!0}m=$jscomp.makeIterator(m);for(e=m.next();!e.done;e=m.next()){e=e.value;var v=v||">"===e.operator||">="===e.operator;var y=y||"<"===e.operator||"<="===e.operator;if(l)if(">"===e.operator||">="===e.operator){if(g=n(l,e,a),g===e)return!1}else if(">="===l.operator&&!k(l.semver,String(e),a))return!1;if(q)if("<"===e.operator||"<="===e.operator){if(g=
b(q,e,a),g===e)return!1}else if("<="===q.operator&&!k(q.semver,String(e),a))return!1;if(!e.operator&&(q||l)&&0!==u)return!1}return l&&y&&!q&&0!==u||q&&v&&!l&&0!==u?!1:!0},n=function(e,m,a){if(!e)return m;a=d(e.semver,m.semver,a);return 0<a?e:0>a?m:">"===m.operator&&">="===e.operator?m:e},b=function(e,m,a){if(!e)return m;a=d(e.semver,m.semver,a);return 0>a?e:0<a?m:"<"===m.operator&&"<="===e.operator?m:e};return YT=function(e,m,a){e=new f(e,a);m=new f(m,a);var g=!1;e=$jscomp.makeIterator(e.set);var l=
e.next();a:for(;!l.done;l=e.next()){l=l.value;for(var q=$jscomp.makeIterator(m.set),r=q.next();!r.done;r=q.next())if(r=h(l,r.value,a),g=g||null!==r,r)continue a;if(g)return!1}return!0}}function IB(f,c,k,d){c=void 0===c?{maxDepth:0,excludes:[]}:c;k=void 0===k?{}:k;d=void 0===d?0:d;var h,n,b,e,m,a,g,l,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:h=c;n=h.maxDepth;b=h.excludes;if(0<n&&d>n)return z.return(k);z.setCatchFinallyBlocks(2);e=JSON;m=e.parse;
return z.yield(ul.resource(f).join("package.json").read(),4);case 4:a=m.call(e,z.yieldResult);g=a.name+"@"+a.version;if(k[g]||b.includes(a.name))return z.return(k);k[g]=Object.assign({url:f},ul.obj.select(a,["name","version","dependencies","devDependencies","main"]));z.leaveTryBlock(3);break;case 2:return z.enterCatchBlock(),z.return(k);case 3:return z.setCatchFinallyBlocks(5),z.yield(ul.resource(f).join("node_modules").dirList(1),7);case 7:l=z.yieldResult;z.leaveTryBlock(6);break;case 5:return z.enterCatchBlock(),
z.return(k);case 6:q=$jscomp.makeIterator(l),r=q.next();case 8:if(r.done){z.jumpTo(10);break}v=u=r.value;y=v.url;return z.yield(IB(y,c,k,d+1),11);case 11:k=z.yieldResult;r=q.next();z.jumpTo(8);break;case 10:return z.return(k)}})}function XE(f,c){var k=Object.assign({},f.dependencies,{},f.devDependencies);return Object.keys(k).reduce(function(d,h){var n=k[h],b=ul.obj.values(c).find(function(m){var a=m.version;return m.name===h&&lively.modules.semver.satisfies(a,n)})||{},e=b.name;b=b.version;d[h]=e?
e+"@"+b:void 0;return d},{})}function YE(f){function c(h,n){var b=h+"@"+n;if(b in d)return d[b];var e=k.find(function(a){var g=a.version;return a.name===h&&lively.modules.semver.satisfies(g,n)})||{},m=e.name;e=e.version;return d[b]=m?m+"@"+e:void 0}var k=ul.obj.values(f),d={};return Object.keys(f).reduce(function(h,n){var b=f[n],e=Object.assign({},b.dependencies,{},b.devDependencies);h[n]=Object.keys(e).map(function(m){return c(m,e[m])}).filter(function(m){return!!m});return h},{})}function ZE(f,
c){Sc.defaultSystem=f;c&&(Sc.GLOBAL.System=f);return f}function $E(){Sc._wrapModuleResolution(Sc.defaultSystem)}function aF(){Sc._unwrapModuleResolution(Sc.defaultSystem)}function bF(){return Object.keys(Sc.requireMap())}function JB(f){return Sc._module(Sc.defaultSystem,f)}function cF(f,c){return Sc._isModuleLoaded(Sc.defaultSystem,f,c)}function dF(f,c){return Sc._doesModuleExist(Sc.defaultSystem,f,c)}function eF(){return Sc._printSystemConfig(Sc.defaultSystem)}function fF(f,c){return Sc._whenLoaded(Sc.defaultSystem,
f,c)}function gF(f){return Sc._importPackage(Sc.defaultSystem,f)}function hF(f,c){return Sc._registerPackage(Sc.defaultSystem,f,c)}function iF(f){return Sc._removePackage(Sc.defaultSystem,f)}function jF(f,c){return Sc._reloadPackage(Sc.defaultSystem,f,c)}function kF(){return Sc.getPackageSpecs(Sc.defaultSystem)}function lF(f,c){return Sc._getPackage(Sc.defaultSystem,f,void 0===c?!1:c)}function mF(f){return Sc.Package.forModuleId(Sc.defaultSystem,f)}function nF(f){return Sc._ensurePackage(Sc.defaultSystem,
f)}function oF(f,c){return Sc._applyPackageConfig(Sc.defaultSystem,f,c)}function pF(f,c){return Sc._lookupPackage(Sc.defaultSystem,f,void 0===c?!1:c)}function qF(f,c,k){return Sc._moduleSourceChange(Sc.defaultSystem,f,c,k)}function rF(){return Sc.computeRequireMap(Sc.defaultSystem)}function sF(f,c){return Sc._isHookInstalled(Sc.defaultSystem,f,c)}function tF(f,c){return Sc._installHook(Sc.defaultSystem,f,c)}function uF(f,c){return Sc._removeHook(Sc.defaultSystem,f,c)}function vF(){Sc._wrapModuleLoad(Sc.defaultSystem)}
function wF(){Sc._unwrapModuleLoad(Sc.defaultSystem)}function uK(f){return f&&f.__ref__}function KB(f,c){return Je.serialize(f,Je.normalizeOptions(c))}function LB(f,c){c=void 0===c?{}:c;return Je.deserializeWithMigrations(f,c.migrations||Je.migrations,Je.normalizeOptions(c))}function xF(f){var c,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?(c=Je,k=c.loadMorphFromSnapshot,d.yield(f.readJson(),2)):d.return(k.call(c,d.yieldResult))})}function vK(f,c,k){f=void 0===
f?Je.MorphicEnv.default().world:f;var d,h,n,b,e,m,a,g,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:d=k||{};h=void 0===d.showIndicator?!0:d.showIndicator;n=void 0===d.changeName?!0:d.changeName;b=void 0===d.changeBrowserURL?!0:d.changeBrowserURL;c||(e=Je.resource(document.location.href),m=e.name(),c=e.join("../"+m.replace(/\.[^\.]+/,"-world.json")).withRelativePartsResolved());"string"===typeof c&&(c=Je.resource(c));n&&(f.name=c.nameWithoutExt());
b&&(a=encodeURI(k.pathForBrowserHistory||Je.pathForBrowserHistory(c.path())),window.location.pathname!==a&&window.history.pushState({},"lively.next",a));if(!h){u.jumpTo(2);break}return u.yield(System.import("lively.components/loading-indicator.js"),3);case 3:return l=u.yieldResult,q=l.LoadingIndicator,g=q.open("string"===typeof h?h:"Snapshotting..."),u.yield(g.whenRendered(),4);case 4:return u.yield(Je.promise.delay(100),2);case 2:return u.setFinallyBlock(6),u.yield(Je.createMorphSnapshot(f,k),8);
case 8:return r=u.yieldResult,g.label="Uploading...",u.yield(g.whenRendered(),9);case 9:return u.return(c.writeJson(r));case 6:u.enterFinallyBlock(),g&&g.remove(),u.leaveFinallyBlock(0)}})}function yF(f){return Je.deserializeMorph(Je.serializeMorph(f),{migrations:xz,reinitializeIds:!0})}function nx(f,c){c=void 0===c?{}:c;var k,d,h,n,b,e,m,a,g,l,q,r,u,v,y,z,A,B,G,E,K,J,P,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ra){switch(ra.nextAddress){case 1:k=System.get("@system-env").node;
d=c;h=void 0===d.addPreview?!k:d.addPreview;n=void 0===d.previewWidth?100:d.previewWidth;b=void 0===d.previewHeight?100:d.previewHeight;e=void 0===d.previewType?"png":d.previewType;m=void 0===d.testLoad?!0:d.testLoad;a=void 0===d.addPackages?!0:d.addPackages;g=void 0===d.ignoreMorphs?[]:d.ignoreMorphs;l=void 0===d.frozenSnapshot?!1:d.frozenSnapshot;q=Je.serializeMorph(f,{frozenSnapshot:l});if(!a){ra.jumpTo(2);break}return ra.yield(Je.findRequiredPackagesOfSnapshot(q),3);case 3:r=ra.yieldResult,u=
r.packages,v=r.depMap,q.packages=u,q.packageDepMap=v;case 2:if(!h){ra.jumpTo(4);break}return ra.yield(System.import("lively.morphic/rendering/morph-to-image.js"),5);case 5:return y=ra.yieldResult,z=y.renderMorphToDataURI,A=n||f.width,B=b||f.height,G=e||"png",ra.setCatchFinallyBlocks(6),E=q,ra.yield(z(f,{width:A,height:B,type:G,ignoreMorphs:g}),8);case 8:E.preview=ra.yieldResult;ra.leaveTryBlock(4);break;case 6:return K=ra.enterCatchBlock(),console.error("Error generating morph preview: "+K),J=q,ra.yield(z(Je.morph({fill:f.fill,
width:A,height:B}),{width:A,height:B,type:G,ignoreMorphs:g}),9);case 9:J.preview=ra.yieldResult;case 4:q.preview||(q.preview="");if(!m){ra.jumpTo(10);break}ra.setCatchFinallyBlocks(11);return ra.yield(Je.loadMorphFromSnapshot(q,{highlightBuggyMorphs:!0,rootObject:f}),13);case 13:P=ra.yieldResult;if(!P||!P.isMorph)throw Error("reloading snapshot does not create a morph!");ra.leaveTryBlock(10);break;case 11:throw ea=ra.enterCatchBlock(),Error("Error snapshotting morph: Cannot recreate morph from snapshot!\n"+
ea.stack);case 10:return ra.return(q)}})}function ps(f,c){return Je.deserializeMorph(f,Object.assign({reinitializeIds:!0,ignoreClassNotFound:!1,onDeserializationStart:Je.loadPackagesAndModulesOfSnapshot,migrations:xz},c))}function ZT(f,c){var k,d,h,n,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:if(!f.isDirectory())return e=c,m=f.name(),a.yield(f.read(),9);k=c[f.name()]={};return a.yield(f.dirList(),4);case 4:d=a.yieldResult,h=$jscomp.makeIterator(d),
n=h.next();case 5:if(n.done)return a.return(c);b=n.value;return a.yield(ZT(b,k),6);case 6:n=h.next();a.jumpTo(5);break;case 9:return e[m]=a.yieldResult,a.return(c)}})}function $T(f,c){c=void 0===c?[]:c;var k=[];if(f.hasOwnProperty("package.json")){var d=c.slice(1).reduceRight(function(n,b){return n.join(b)},Je.resource(c[0])).url;k.push({files:f,url:d,requiredPackages:f.requiredPackages})}for(var h in f)"object"===typeof f[h]&&k.push.apply(k,$jscomp.arrayFromIterable($T(f[h],c.concat(h))));return k}
function wK(f){var c=Je.findPackagesInFileSpec(f.packages),k={};f=f.packageDepMap;if(!f)return c;c=$jscomp.makeIterator(c);for(var d=c.next();!d.done;d=c.next())d=d.value,k[d.url]=d;return Je.arr.flatten(Je.graph.sortByReference(f)).map(function(h){return k[h]})}function MB(f){var c,k,d,h,n,b,e,m,a,g,l,q,r,u,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:if(!f.packagesToRegister){A.jumpTo(2);break}c=$jscomp.makeIterator(f.packagesToRegister);k=c.next();
case 3:if(k.done){A.jumpTo(2);break}d=k.value;A.setCatchFinallyBlocks(6);return A.yield(Je.registerPackage(d),8);case 8:A.leaveTryBlock(4);break;case 6:A.enterCatchBlock(),console.error("Failed to register package "+d);case 4:k=c.next();A.jumpTo(3);break;case 2:if(!f.packages){A.jumpTo(9);break}h=Je.packagesOfSnapshot(f);n=$jscomp.makeIterator(h);b=n.next();case 10:if(b.done){A.jumpTo(9);break}m=e=b.value;a=m.files;g=m.url;if(q=(l=Je.lookupPackage(g))&&l.pkg){r=q.version;u=JSON.parse(a["package.json"]);
v=u.version;try{if(v&&r&&Je.semver.lte(v,r,!0)){console.log("[load morph] Package "+g+" is loaded in version "+r+(" which is newer than "+v+". Will NOT load older variant."));A.jumpTo(11);break}}catch(B){console.warn("Error in package version comparison: ",B)}}return A.yield(Je.createFiles(g,a),13);case 13:return A.yield(Je.ensurePackage(g),14);case 14:return q=A.yieldResult,A.yield(q.reload({forgetEnv:!1,forgetDeps:!1}),15);case 15:return A.yield(System.import("lively.classes/object-classes.js"),
16);case 16:y=A.yieldResult,z=y.default,Je.objectScriptingEnabled=!!z,Je.objectScriptingEnabled&&z.withId(q.name);case 11:b=n.next();A.jumpTo(10);break;case 9:return A.yield(Promise.all(Je.requiredModulesOfSnapshot(f).map(function(B){return(System.get(B)?null:System.import(B)).catch(function(G){return console.error("Error loading "+B,G)})})),0)}})}function zF(f){var c,k,d,h,n,b,e,m,a,g,l,q,r,u,v,y,z,A,B,G,E,K,J,P,ea,ra,D,O,L,N,aa,Y,ma,bb,Qa,X,V;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ha){switch(ha.nextAddress){case 1:c=
{},k=f.snapshot,d=[],h={},n=!0,b={},e={},a=ha.forIn(k);case 2:if(null==(m=a.getNext())){ha.jumpTo(4);break}g=k[m]["lively.serializer-class-info"];if(!(g&&g.module&&g.module.package)){ha.jumpTo(5);break}l=Je.getPackage(g.module.package.name);if(!l.address.startsWith("local://")){ha.jumpTo(5);break}return ha.yield(System.import("lively.classes/object-classes.js"),7);case 7:return q=ha.yieldResult,e.$jscomp$loop$prop$ObjectPackage$2232=q.default,ha.yield(System.import("lively.classes/util.js"),8);case 8:r=
ha.yieldResult,u=r.withSuperclasses,Je.objectScriptingEnabled=!!e.$jscomp$loop$prop$ObjectPackage$2232,v=e.$jscomp$loop$prop$ObjectPackage$2232.forSystemPackage(l),y=v.objectModule.systemModule._recorder[g.className],z=u(y),z.forEach(function(xa){return function(yb){(yb=xa.$jscomp$loop$prop$ObjectPackage$2232.lookupPackageForClass(yb))&&d.push(yb.systemPackage)}}(e));case 5:if(A=k[m].props.metadata)if(B=void 0,A.value&&A.value.__ref__?(G=k[A.value.id],G.props.externalPackages&&(B=G.props.externalPackages.value)):
B=A.externalPackages,B)for(n=!0,E=0;E<B.length;E++)h[B[E]]=!0;e={$jscomp$loop$prop$ObjectPackage$2232:e.$jscomp$loop$prop$ObjectPackage$2232};ha.jumpTo(2);break;case 4:n&&(f.packagesToRegister=Object.keys(h)),K=[],J=$jscomp.makeIterator(d),P=J.next();case 9:if(P.done)return d=[].concat($jscomp.arrayFromIterable(K),$jscomp.arrayFromIterable(d)),ha.yield(Promise.all(d.map(function(xa){var yb,ec;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nb){if(1==Nb.nextAddress)return yb=Je.resource(xa.address).asDirectory(),
Nb.yield(Je.resourceToJSON(yb,{}),2);ec=Nb.yieldResult;c[yb.parent().url]||(c[yb.parent().url]={});Object.assign(c[yb.parent().url],ec);b[xa.url]||(b[xa.url]=[]);Nb.jumpToEnd()})})),16);ea=P.value;ra=$jscomp.makeIterator(ea.modules());D=ra.next();case 12:if(D.done){P=J.next();ha.jumpTo(9);break}O=D.value;if(O.id.endsWith(".json")){ha.jumpTo(13);break}L=$jscomp;N=L.makeIterator;return ha.yield(O.imports(),15);case 15:for(aa=N.call(L,ha.yieldResult),Y=aa.next();!Y.done;Y=aa.next())if(bb=ma=Y.value,
Qa=bb.fromModule,X=Je.module(Qa).package())V=X.config,V.lively&&V.lively.isObjectPackage&&(K.push(X),b[ea.url]?Je.arr.pushIfNotIncluded(b[ea.url],X.url):b[ea.url]=[X.url]);case 13:D=ra.next();ha.jumpTo(12);break;case 16:return ha.return({packages:c,depMap:b})}})}function AF(){xK=!0;for(var f,c,k=NB.length;k;){c=NB;NB=[];for(f=-1;++f<k;)c[f]();k=NB.length}xK=!1}function yz(f,c,k){var d=k[k.length-1];f===d.element&&(k.pop(),d=k[k.length-1]);k=d.element;d=d.index;Array.isArray(k)?k.push(f):d===c.length-
2?(c=c.pop(),k[c]=f):c.push(f)}function pj(){pj.init.call(this)}function BF(f){if("function"!=typeof f)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof f);}function aU(f,c,k,d){var h,n,b;if(BF(k),void 0===(n=f._events)?(n=f._events=Object.create(null),f._eventsCount=0):(void 0!==n.newListener&&(f.emit("newListener",c,k.listener?k.listener:k),n=f._events),b=n[c]),void 0===b)n[c]=k,++f._eventsCount;else if("function"==typeof b?b=n[c]=d?[k,b]:[b,k]:d?b.unshift(k):
b.push(k),0<(h=void 0===f._maxListeners?pj.defaultMaxListeners:f._maxListeners)&&b.length>h&&!b.warned)b.warned=!0,k=Error("Possible EventEmitter memory leak detected. "+b.length+" "+String(c)+" listeners added. Use emitter.setMaxListeners() to increase limit"),k.name="MaxListenersExceededWarning",k.emitter=f,k.type=c,k.count=b.length,console&&console.warn&&console.warn(k);return f}function z6(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?
this.listener.call(this.target):this.listener.apply(this.target,arguments)}function bU(f,c,k){f={fired:!1,wrapFn:void 0,target:f,type:c,listener:k};c=z6.bind(f);return c.listener=k,f.wrapFn=c,c}function cU(f,c,k){f=f._events;if(void 0===f)return[];c=f[c];if(void 0===c)k=[];else if("function"==typeof c)k=k?[c.listener||c]:[c];else if(k)for(k=Array(c.length),f=0;f<k.length;++f)k[f]=c[f].listener||c[f];else k=dU(c,c.length);return k}function eU(f){var c=this._events;if(void 0!==c){f=c[f];if("function"==
typeof f)return 1;if(void 0!==f)return f.length}return 0}function dU(f,c){for(var k=Array(c),d=0;d<c;++d)k[d]=f[d];return k}function zz(f){return f&&"object"===typeof f&&"default"in f?f["default"]:f}function Fv(){this._store={}}function OB(f){this._store=new Fv;if(f&&Array.isArray(f))for(var c=0,k=f.length;c<k;c++)this.add(f[c])}function vl(f){var c;if(!f||"object"!==typeof f)return f;if(Array.isArray(f)){var k=[];var d=0;for(c=f.length;d<c;d++)k[d]=vl(f[d]);return k}if(f instanceof Date)return f.toISOString();
if("undefined"!==typeof ArrayBuffer&&f instanceof ArrayBuffer||"undefined"!==typeof Blob&&f instanceof Blob)return f instanceof ArrayBuffer?"function"===typeof f.slice?f=f.slice(0):(d=new ArrayBuffer(f.byteLength),k=new Uint8Array(d),f=new Uint8Array(f),k.set(f),f=d):(d=f.size,k=f.type,f="function"===typeof f.slice?f.slice(0,d,k):f.webkitSlice(0,d,k)),f;k=Object.getPrototypeOf(f);null===k?k=!0:(k=k.constructor,k="function"==typeof k&&k instanceof k&&fU.call(k)==A6);if(!k)return f;k={};for(d in f)Object.prototype.hasOwnProperty.call(f,
d)&&(c=vl(f[d]),"undefined"!==typeof c&&(k[d]=c));return k}function gU(f){var c=!1;return Az(function(k){if(c)throw Error("once called more than once");c=!0;f.apply(this,k)})}function hU(f){return Az(function(c){c=vl(c);var k=this,d="function"===typeof c[c.length-1]?c.pop():!1,h=new Promise(function(n,b){var e;try{var m=gU(function(a,g){a?b(a):n(g)});c.push(m);(e=f.apply(k,c))&&"function"===typeof e.then&&n(e)}catch(a){b(a)}});d&&h.then(function(n){d(null,n)},d);return h})}function B6(f,c,k){if(f.constructor.listeners("debug").length){for(var d=
["api",f.name,c],h=0;h<k.length-1;h++)d.push(k[h]);f.constructor.emit("debug",d);var n=k[k.length-1];k[k.length-1]=function(b,e){var m=["api",f.name,c];m=m.concat(b?["error",b]:["success",e]);f.constructor.emit("debug",m);n(b,e)}}}function el(f,c){return hU(Az(function(k){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));var d=this;B6(d,f,k);return this.taskqueue.isReady?c.apply(this,k):new Promise(function(h,
n){d.taskqueue.addTask(function(b){b?n(b):h(d[f].apply(d,k))})})}))}function PB(f,c){for(var k={},d=0,h=c.length;d<h;d++){var n=c[d];n in f&&(k[n]=f[n])}return k}function iU(f){return f}function C6(f){return[{ok:f}]}function jU(f,c,k){function d(){var r=[];g.forEach(function(u){u.docs.forEach(function(v){r.push({id:u.id,docs:[v]})})});k(null,{results:r})}function h(){if(!(q>=l.length)){var r=l.slice(q,Math.min(q+6,l.length));n(r,q);q+=r.length}}function n(r,u){r.forEach(function(v,y){var z=u+y;y=
e.get(v);var A=PB(y[0],["atts_since","attachments"]);A.open_revs=y.map(function(G){return G.rev});A.open_revs=A.open_revs.filter(iU);var B=iU;0===A.open_revs.length&&(delete A.open_revs,B=C6);["revs","attachments","binary","ajax","latest"].forEach(function(G){G in c&&(A[G]=c[G])});f.get(v,A,function(G,E){G=G?[{error:G}]:B(E);g[z]={id:v,docs:G};++a===m&&d();h()})})}var b=c.docs,e=new Co;b.forEach(function(r){e.has(r.id)?e.get(r.id).push(r):e.set(r.id,[r])});var m=e.size,a=0,g=Array(m),l=[];e.forEach(function(r,
u){l.push(u)});var q=0;h()}function D6(f){QB&&addEventListener("storage",function(c){f.emit(c.key)})}function Bz(){Qn.EventEmitter.call(this);this._listeners={};D6(this)}function Ep(f){if("undefined"!==typeof console&&"function"===typeof console[f]){var c=Array.prototype.slice.call(arguments,1);console[f].apply(console,c)}}function E6(f){var c=0;f||(c=2E3);f=parseInt(f,10)||0;c=parseInt(c,10);c=c!==c||c<=f?(f||1)<<1:c+1;6E5<c&&(f=3E5,c=6E5);return~~((c-f)*Math.random()+f)}function yK(f,c){Ep("info",
"The above "+f+" is totally normal. "+c)}function Cj(f,c,k){Error.call(this,k);this.status=f;this.name=c;this.message=k;this.error=!0}function Qh(f,c){function k(d){for(var h in f)"function"!==typeof f[h]&&(this[h]=f[h]);void 0!==d&&(this.reason=d)}k.prototype=Cj.prototype;return new k(c)}function Cz(f){if("object"!==typeof f){var c=f;f=kU;f.data=c}"error"in f&&"conflict"===f.error&&(f.name="conflict",f.status=409);"name"in f||(f.name=f.error||"unknown");"status"in f||(f.status=500);"message"in f||
(f.message=f.message||f.reason);return f}function zK(f){var c={},k=f.filter&&"function"===typeof f.filter;c.query=f.query_params;return function(d){d.doc||(d.doc={});var h;if(h=k)try{h=!(0,f.filter)(d.doc,c)}catch(b){h=Qh(CF,"Filter function threw: "+b.toString())}if("object"===typeof h)return h;if(h)return!1;if(!f.include_docs)delete d.doc;else if(!f.attachments)for(var n in d.doc._attachments)d.doc._attachments.hasOwnProperty(n)&&(d.doc._attachments[n].stub=!0);return!0}}function DF(f){for(var c=
[],k=0,d=f.length;k<d;k++)c=c.concat(f[k]);return c}function lU(f){var c;f?"string"!==typeof f?c=Qh(mU):/^_/.test(f)&&!/^_(design|local)/.test(f)&&(c=Qh(F6)):c=Qh(G6);if(c)throw c;}function qs(f){return"boolean"===typeof f._remote?f._remote:"function"===typeof f.type?(Ep("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===f.type()):!1}function AK(f){if(!f)return null;var c=f.split("/");return 2===c.length?c:1===c.length?[f,f]:null}function nU(f){return(f=
AK(f))?f.join("/"):null}function oU(f){f=H6.exec(f);for(var c={},k=14;k--;){var d=pU[k],h=f[k]||"",n=-1!==["user","password"].indexOf(d);c[d]=n?decodeURIComponent(h):h}c.queryKey={};c[pU[12]].replace(I6,function(b,e,m){e&&(c.queryKey[e]=m)});return c}function BK(f,c){var k=[],d=[],h;for(h in c)c.hasOwnProperty(h)&&(k.push(h),d.push(c[h]));k.push(f);return Function.apply(null,k).apply(null,d)}function EF(f,c,k){return new Promise(function(d,h){f.get(c,function(n,b){if(n){if(404!==n.status)return h(n);
b={}}n=b._rev;b=k(b);if(!b)return d({updated:!1,rev:n});b._id=c;b._rev=n;d(J6(f,b,k))})})}function J6(f,c,k){return f.put(c).then(function(d){return{updated:!0,rev:d.rev}},function(d){if(409!==d.status)throw d;return EF(f,c._id,k)})}function CK(f,c){f=f||[];c=c||{};try{return new Blob(f,c)}catch(h){if("TypeError"!==h.name)throw h;for(var k=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),
d=0;d<f.length;d+=1)k.append(f[d]);return k.getBlob(c.type)}}function DK(f,c){for(var k=f.length,d=new ArrayBuffer(k),h=new Uint8Array(d),n=0;n<k;n++)h[n]=f.charCodeAt(n);return CK([d],{type:c})}function EK(f,c){return DK(atob(f),c)}function qU(f,c){var k=new FileReader,d="function"===typeof k.readAsBinaryString;k.onloadend=function(h){var n=h.target.result||"";if(d)return c(n);h="";n=new Uint8Array(n);for(var b=n.byteLength,e=0;e<b;e++)h+=String.fromCharCode(n[e]);c(h)};d?k.readAsBinaryString(f):
k.readAsArrayBuffer(f)}function rU(f,c){qU(f,function(k){c(k)})}function FK(f,c){rU(f,function(k){c(btoa(k))})}function K6(f,c){var k=new FileReader;k.onloadend=function(d){d=d.target.result||new ArrayBuffer(0);c(d)};k.readAsArrayBuffer(f)}function L6(f,c,k){return f.webkitSlice?f.webkitSlice(c,k):f.slice(c,k)}function M6(f,c,k,d,h){if(0<k||d<c.size)c=L6(c,k,d);K6(c,function(n){f.append(n);h()})}function N6(f,c,k,d,h){if(0<k||d<c.length)c=c.substring(k,d);f.appendBinary(c);h()}function GK(f,c){function k(){O6(h)}
function d(){var q=g.end(!0);q=btoa(q);c(q);g.destroy()}function h(){var q=a*e,r=q+e;a++;a<m?l(g,f,q,r,k):l(g,f,q,r,d)}var n="string"===typeof f,b=n?f.length:f.size,e=Math.min(32768,b),m=Math.ceil(b/e),a=0,g=n?new FF:new FF.ArrayBuffer,l=n?N6:M6;h()}function sU(f,c){f=vl(f);if(!c)return tU.v4().replace(/-/g,"").toLowerCase();delete f._rev_tree;return FF.hash(JSON.stringify(f))}function ox(f){f=f.rev_tree.slice();for(var c;c=f.pop();){var k=c.ids,d=k[2];c=c.pos;if(d.length){k=0;for(var h=d.length;k<
h;k++)f.push({pos:c+1,ids:d[k]})}else if(d=!!k[1].deleted,k=k[0],!n||(e!==d?e:b!==c?b<c:n<k)){var n=k;var b=c;var e=d}}return b+"-"+n}function px(f,c){f=f.slice();for(var k;k=f.pop();){var d=k.pos,h=k.ids,n=h[2];k=c(0===n.length,d,h[0],k.ctx,h[1]);h=0;for(var b=n.length;h<b;h++)f.push({pos:d+1,ids:n[h],ctx:k})}}function P6(f,c){return f.pos-c.pos}function HK(f){var c=[];px(f,function(d,h,n,b,e){d&&c.push({rev:h+"-"+n,pos:h,opts:e})});c.sort(P6).reverse();f=0;for(var k=c.length;f<k;f++)delete c[f].pos;
return c}function IK(f){var c=ox(f);f=HK(f.rev_tree);for(var k=[],d=0,h=f.length;d<h;d++){var n=f[d];n.rev===c||n.opts.deleted||k.push(n.rev)}return k}function Q6(f){var c=[];px(f.rev_tree,function(k,d,h,n,b){"available"!==b.status||k||(c.push(d+"-"+h),b.status="missing")});return c}function uU(f){var c=[];f=f.slice();for(var k;k=f.pop();){var d=k.pos,h=k.ids,n=h[0],b=h[1];h=h[2];var e=0===h.length;k=k.history?k.history.slice():[];k.push({id:n,opts:b});e&&c.push({pos:d+1-k.length,ids:k});n=0;for(b=
h.length;n<b;n++)f.push({pos:d+1,ids:h[n],history:k})}return c.reverse()}function R6(f,c){return f.pos-c.pos}function vU(f,c){for(var k,d,h=f.length;c<h;c++){var n=f[c];n=[n.id,n.opts,[]];d?(d[2].push(n),d=n):k=d=n}return k}function S6(f,c){return f[0]<c[0]?-1:1}function wU(f,c){c=[{tree1:f,tree2:c}];for(var k=!1;0<c.length;){var d=c.pop(),h=d.tree1;d=d.tree2;if(h[1].status||d[1].status)h[1].status="available"===h[1].status||"available"===d[1].status?"available":"missing";for(var n=0;n<d[2].length;n++)if(h[2][0]){for(var b=
!1,e=0;e<h[2].length;e++)h[2][e][0]===d[2][n][0]&&(c.push({tree1:h[2][e],tree2:d[2][n]}),b=!0);if(!b){k="new_branch";b=h[2];e=d[2][n];for(var m,a=b,g=e,l=S6,q=0,r=a.length;q<r;)m=q+r>>>1,0>l(a[m],g)?q=m+1:r=m;b.splice(q,0,e)}}else k="new_leaf",h[2][0]=d[2][n]}return{conflicts:k,tree:f}}function xU(f,c,k){var d=[],h=!1,n=!1;if(!f.length)return{tree:[c],conflicts:"new_leaf"};for(var b=0,e=f.length;b<e;b++){var m=f[b];if(m.pos===c.pos&&m.ids[0]===c.ids[0])n=wU(m.ids,c.ids),d.push({pos:m.pos,ids:n.tree}),
h=h||n.conflicts,n=!0;else if(!0!==k){var a=m.pos<c.pos?m:c,g=m.pos<c.pos?c:m,l=[],q=[];for(q.push({ids:a.ids,diff:g.pos-a.pos,parent:null,parentIdx:null});0<q.length;){var r=q.pop();if(0===r.diff)r.ids[0]===g.ids[0]&&l.push(r);else for(var u=r.ids[2],v=0,y=u.length;v<y;v++)q.push({ids:u[v],diff:r.diff-1,parent:r.ids,parentIdx:v})}(l=l[0])?(n=wU(l.ids,g.ids),l.parent[2][l.parentIdx]=n.tree,d.push({pos:a.pos,ids:a.ids}),h=h||n.conflicts,n=!0):d.push(m)}else d.push(m)}n||d.push(c);d.sort(R6);return{tree:d,
conflicts:h||"internal_node"}}function T6(f,c){f=uU(f);for(var k,d,h=0,n=f.length;h<n;h++){var b=f[h],e=b.ids;if(e.length>c){k||(k={});var m=e.length-c;var a={pos:b.pos+m,ids:vU(e,m)};for(var g=0;g<m;g++)k[b.pos+g+"-"+e[g].id]=!0}else a={pos:b.pos,ids:vU(e,0)};d=d?xU(d,a,!0).tree:[a]}k&&px(d,function(l,q,r){delete k[q+"-"+r]});return{tree:d,revs:k?Object.keys(k):[]}}function yU(f,c,k){f=xU(f,c);k=T6(f.tree,k);return{tree:k.tree,stemmedRevs:k.revs,conflicts:f.conflicts}}function U6(f){return f.ids}
function fu(f,c){c||(c=ox(f));c=c.substring(c.indexOf("-")+1);f=f.rev_tree.map(U6);for(var k;k=f.pop();){if(k[0]===c)return!!k[1].deleted;f=f.concat(k[2])}}function qx(f){return/^_local/.test(f)}function V6(f,c){for(var k=c.rev_tree.slice(),d;d=k.pop();){var h=d.pos,n=d.ids,b=n[0],e=n[1];n=n[2];var m=0===n.length;d=d.history?d.history.slice():[];d.push({id:b,pos:h,opts:e});if(m)for(e=0,m=d.length;e<m;e++){var a=d[e];if(a.pos+"-"+a.id===f)return h+"-"+b}b=0;for(e=n.length;b<e;b++)k.push({pos:h+1,ids:n[b],
history:d})}throw Error("Unable to resolve latest revision for id "+c.id+", rev "+f);}function RB(f,c,k){function d(){h.cancel()}Qn.EventEmitter.call(this);var h=this;this.db=f;c=c?vl(c):{};var n=c.complete=gU(function(e,m){e?(m=h,0<("listenerCount"in m?m.listenerCount("error"):Qn.EventEmitter.listenerCount(m,"error"))&&h.emit("error",e)):h.emit("complete",m);h.removeAllListeners();f.removeListener("destroyed",d)});k&&(h.on("complete",function(e){k(null,e)}),h.on("error",k));f.once("destroyed",d);
c.onChange=function(e,m,a){if(!h.isCancelled)try{h.emit("change",e,m,a)}catch(g){Ep("error",'Error in .on("change", function):',g)}};var b=new Promise(function(e,m){c.complete=function(a,g){a?m(a):e(g)}});h.once("cancel",function(){f.removeListener("destroyed",d);c.complete(null,{status:"cancelled"})});this.then=b.then.bind(b);this["catch"]=b["catch"].bind(b);this.then(function(e){n(null,e)},n);f.taskqueue.isReady?h.validateChanges(c):f.taskqueue.addTask(function(e){e?c.complete(e):h.isCancelled?
h.emit("cancel"):h.validateChanges(c)})}function W6(f,c,k){var d=[{rev:f._rev}];"all_docs"===k.style&&(d=HK(c.rev_tree).map(function(h){return{rev:h.rev}}));d={id:c.id,changes:d,doc:f};fu(c,f._rev)&&(d.deleted=!0);k.conflicts&&(d.doc._conflicts=IK(c),d.doc._conflicts.length||delete d.doc._conflicts);return d}function JK(f,c){return function(k,d){k||d[0]&&d[0].error?(k=k||d[0],k.docId=c,f(k)):f(null,d.length?d[0]:d)}}function X6(f){for(var c=0;c<f.length;c++){var k=f[c];if(k._deleted)delete k._attachments;
else if(k._attachments)for(var d=Object.keys(k._attachments),h=0;h<d.length;h++){var n=d[h];k._attachments[n]=PB(k._attachments[n],"data digest content_type length revpos stub".split(" "))}}}function Y6(f,c){var k=f._id;var d=c._id;k=k<d?-1:k>d?1:0;if(0!==k)return k;f=f._revisions?f._revisions.start:0;c=c._revisions?c._revisions.start:0;return f<c?-1:f>c?1:0}function Z6(f){var c={},k=[];px(f,function(d,h,n,b){h=h+"-"+n;d&&(c[h]=0);void 0!==b&&k.push({from:b,to:h});return h});k.reverse();k.forEach(function(d){c[d.from]=
void 0===c[d.from]?1+c[d.to]:Math.min(c[d.from],1+c[d.to])});return c}function $6(f){var c="limit"in f?f.keys.slice(f.skip,f.limit+f.skip):0<f.skip?f.keys.slice(f.skip):f.keys;f.keys=c;f.skip=0;delete f.limit;f.descending&&(c.reverse(),f.descending=!1)}function zU(f){var c=f._compactionQueue[0],k=c.opts,d=c.callback;f.get("_local/compaction").catch(function(){return!1}).then(function(h){h&&h.last_seq&&(k.last_seq=h.last_seq);f._compact(k,function(n,b){n?d(n):d(null,b);rs(function(){f._compactionQueue.shift();
f._compactionQueue.length&&zU(f)})})})}function Yj(){Qn.EventEmitter.call(this);for(var f in Yj.prototype)"function"===typeof this[f]&&(this[f]=this[f].bind(this))}function SB(){this.failed=this.isReady=!1;this.queue=[]}function a7(f,c){var k=f.match(/([a-z-]*):\/\/(.*)/);if(k)return{name:/https?/.test(k[1])?k[1]+"://"+k[2]:k[2],adapter:k[1]};var d=Mh.adapters,h=Mh.preferredAdapters;k=Mh.prefix;c=c.adapter;if(!c)for(var n=0;n<h.length;++n)if(c=h[n],"idb"===c&&"websql"in d&&QB&&localStorage["_pouch__websqldb_"+
k+f])Ep("log",'PouchDB is downgrading "'+f+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');else break;d=d[c];return{name:(d&&"use_prefix"in d?d.use_prefix:1)?k+f:f,adapter:c}}function b7(f){function c(d){f.removeListener("closed",k);d||f.constructor.emit("destroyed",f.name)}function k(){f.removeListener("destroyed",c);f.constructor.emit("unref",f)}f.once("destroyed",c);f.once("closed",k);f.constructor.emit("ref",f)}function Mh(f,c){if(!(this instanceof Mh))return new Mh(f,
c);var k=this;c=c||{};f&&"object"===typeof f&&(c=f,f=c.name,delete c.name);void 0===c.deterministic_revs&&(c.deterministic_revs=!0);this.__opts=c=vl(c);k.auto_compaction=c.auto_compaction;k.prefix=Mh.prefix;if("string"!==typeof f)throw Error("Missing/invalid DB name");var d=a7((c.prefix||"")+f,c);c.name=d.name;c.adapter=c.adapter||d.adapter;k.name=f;k._adapter=c.adapter;Mh.emit("debug",["adapter","Picked adapter: ",c.adapter]);if(!Mh.adapters[c.adapter]||!Mh.adapters[c.adapter].valid())throw Error("Invalid Adapter: "+
c.adapter);Yj.call(k);k.taskqueue=new SB;k.adapter=c.adapter;Mh.adapters[c.adapter].call(k,c,function(h){if(h)return k.taskqueue.fail(h);b7(k);k.emit("created",k);Mh.emit("created",k.name);k.taskqueue.ready(k)})}function AU(f,c){for(var k=0,d=c.length;k<d&&(f=f[c[k]],f);k++);return f}function BU(f){for(var c=[],k="",d=0,h=f.length;d<h;d++){var n=f[d];"."===n?0<d&&"\\"===f[d-1]?k=k.substring(0,k.length-1)+".":(c.push(k),k=""):k+=n}c.push(k);return c}function c7(f){return f[Object.keys(f)[0]]}function TB(f){var c=
{};f.forEach(function(k){Object.keys(k).forEach(function(d){var h=k[d];"object"!==typeof h&&(h={$eq:h});if(-1<CU.indexOf(d))c[d]=h instanceof Array?h.map(function(b){return TB([b])}):TB([h]);else{var n=c[d]=c[d]||{};Object.keys(h).forEach(function(b){var e=h[b];"$gt"===b||"$gte"===b?"undefined"===typeof n.$eq&&("undefined"!==typeof n.$gte?"$gte"===b?e>n.$gte&&(n.$gte=e):e>=n.$gte&&(delete n.$gte,n.$gt=e):"undefined"!==typeof n.$gt?"$gte"===b?e>n.$gt&&(delete n.$gt,n.$gte=e):e>n.$gt&&(n.$gt=e):n[b]=
e):"$lt"===b||"$lte"===b?"undefined"===typeof n.$eq&&("undefined"!==typeof n.$lte?"$lte"===b?e<n.$lte&&(n.$lte=e):e<=n.$lte&&(delete n.$lte,n.$lt=e):"undefined"!==typeof n.$lt?"$lte"===b?e<n.$lt&&(delete n.$lt,n.$lte=e):e<n.$lt&&(n.$lt=e):n[b]=e):"$ne"===b?"$ne"in n?n.$ne.push(e):n.$ne=[e]:"$eq"===b?(delete n.$gt,delete n.$gte,delete n.$lt,delete n.$lte,delete n.$ne,n.$eq=e):n[b]=e})}})});return c}function DU(f){for(var c in f){if(Array.isArray(f))for(var k in f)f[k].$and&&(f[k]=TB(f[k].$and));var d=
f[c];"object"===typeof d&&DU(d)}return f}function EU(f,c){for(var k in f){"$and"===k&&(c=!0);var d=f[k];"object"===typeof d&&(c=EU(d,c))}return c}function d7(f){var c=vl(f);f=!1;EU(c,!1)&&(c=DU(c),"$and"in c&&(c=TB(c.$and)),f=!0);["$or","$nor"].forEach(function(b){b in c&&c[b].forEach(function(e){for(var m=Object.keys(e),a=0;a<m.length;a++){var g=m[a],l=e[g];if("object"!==typeof l||null===l)e[g]={$eq:l}}})});"$not"in c&&(c.$not=TB([c.$not]));for(var k=Object.keys(c),d=0;d<k.length;d++){var h=k[d],
n=c[h];"object"!==typeof n||null===n?n={$eq:n}:"$ne"in n&&!f&&(n.$ne=[n.$ne]);c[h]=n}return c}function Tl(f,c){if(f===c)return 0;f=rx(f);c=rx(c);var k=KK(f),d=KK(c);if(0!==k-d)return k-d;switch(typeof f){case "number":return f-c;case "boolean":return f<c?-1:1;case "string":return f===c?0:f>c?1:-1}if(Array.isArray(f))a:{k=Math.min(f.length,c.length);for(d=0;d<k;d++){var h=Tl(f[d],c[d]);if(0!==h){f=h;break a}}f=f.length===c.length?0:f.length>c.length?1:-1}else a:{k=Object.keys(f);d=Object.keys(c);h=
Math.min(k.length,d.length);for(var n=0;n<h;n++){var b=Tl(k[n],d[n]);if(0!==b){f=b;break a}b=Tl(f[k[n]],c[d[n]]);if(0!==b){f=b;break a}}f=k.length===d.length?0:k.length>d.length?1:-1}return f}function rx(f){switch(typeof f){case "undefined":return null;case "number":if(Infinity===f||-Infinity===f||isNaN(f))return null;break;case "object":var c=f;if(Array.isArray(f)){var k=f.length;f=Array(k);for(var d=0;d<k;d++)f[d]=rx(c[d])}else{if(f instanceof Date)return f.toJSON();if(null!==f)for(k in f={},c)c.hasOwnProperty(k)&&
(d=c[k],"undefined"!==typeof d&&(f[k]=rx(d)))}}return f}function e7(f){if(null!==f)switch(typeof f){case "boolean":return f?1:0;case "number":if(0===f)f="1";else{var c=f.toExponential().split(/e\+?/),k=parseInt(c[1],10);f=0>f;k=((f?-k:k)- -324).toString();for(var d="",h=3-k.length;d.length<h;)d+="0";k=(f?"0":"2")+(""+(d+k));c=Math.abs(parseFloat(c[0]));f&&(c=10-c);f=c.toFixed(20);f=f.replace(/\.?0+$/,"");f=k+=""+f}return f;case "string":return f.replace(/\u0002/g,"\u0002\u0002").replace(/\u0001/g,
"\u0001\u0002").replace(/\u0000/g,"\u0001\u0001");case "object":var n=Array.isArray(f);c=n?f:Object.keys(f);k=-1;d=c.length;h="";if(n)for(;++k<d;)h+=Nq(c[k]);else for(;++k<d;)n=c[k],h+=Nq(n)+Nq(f[n]);return h}return""}function Nq(f){f=rx(f);return KK(f)+""+e7(f)+"\x00"}function KK(f){var c=["boolean","number","string","object"].indexOf(typeof f);if(~c)return null===f?1:Array.isArray(f)?5:3>c?c+2:c+3;if(Array.isArray(f))return 5}function f7(f){function c(k){return f.map(function(d){d=Object.keys(d)[0];
d=BU(d);return AU(k,d)})}return function(k,d){var h=c(k.doc),n=c(d.doc);h=Tl(h,n);if(0!==h)return h;k=k.doc._id;d=d.doc._id;return k<d?-1:k>d?1:0}}function g7(f,c,k){f=f.filter(function(h){return Dz(h.doc,c.selector,k)});if(c.sort){var d=f7(c.sort);f=f.sort(d);"string"!==typeof c.sort[0]&&"desc"===c7(c.sort[0])&&(f=f.reverse())}if("limit"in c||"skip"in c)d=c.skip||0,f=f.slice(d,("limit"in c?c.limit:f.length)+d);return f}function Dz(f,c,k){return k.every(function(d){var h=c[d],n=BU(d),b=AU(f,n);return-1<
CU.indexOf(d)?h7(d,h,f):LK(h,f,n,b)})}function LK(f,c,k,d){return f?"object"===typeof f?Object.keys(f).every(function(h){var n=f[h];if(!FU[h])throw Error('unknown operator "'+h+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return FU[h](c,n,k,d)}):f===d:!0}function h7(f,c,k){return"$or"===f?c.some(function(d){return Dz(k,d,Object.keys(d))}):"$not"===f?!Dz(k,c,Object.keys(c)):!c.find(function(d){return Dz(k,d,Object.keys(d))})}
function UB(f){return"undefined"!==typeof f&&null!==f}function sx(f){return"undefined"!==typeof f}function GU(f,c){return c.some(function(k){return f instanceof Array?-1<f.indexOf(k):f===k})}function i7(f,c){return c.every(function(k){return-1<f.indexOf(k)})}function j7(f,c){switch(c){case "null":return null===f;case "boolean":return"boolean"===typeof f;case "number":return"number"===typeof f;case "string":return"string"===typeof f;case "array":return f instanceof Array;case "object":return"[object Object]"===
{}.toString.call(f)}throw Error(c+" not supported as a type.Please use one of object, string, array, number, boolean or null.");}function k7(f,c){if(f.selector&&f.filter&&"_selector"!==f.filter)return c(Error('selector invalid for filter "'+("string"===typeof f.filter?f.filter:"function")+'"'));c()}function l7(f){f.view&&!f.filter&&(f.filter="_view");f.selector&&!f.filter&&(f.filter="_selector");f.filter&&"string"===typeof f.filter&&("_view"===f.filter?f.view=nU(f.view):f.filter=nU(f.filter))}function m7(f,
c){return c.filter&&"string"===typeof c.filter&&!c.doc_ids&&!qs(f.db)}function n7(f,c){var k=c.complete;if("_view"===c.filter){if(!c.view||"string"!==typeof c.view){var d=Qh(CF,"`view` filter parameter not found or invalid.");return k(d)}var h=AK(c.view);f.db.get("_design/"+h[0],function(b,e){if(f.isCancelled)return k(null,{status:"cancelled"});if(b)return k(Cz(b));b=e&&e.views&&e.views[h[1]]&&e.views[h[1]].map;if(!b)return k(Qh(Oq,e.views?"missing json key: "+h[1]:"missing json key: views"));e=['return function(doc) {\n  "use strict";\n  var emitted = false;\n  var emit = function (a, b) {\n    emitted = true;\n  };',
"  var view = "+b+";","  view(doc);\n  if (emitted) {\n    return true;\n  }\n};"].join("\n");e=BK(e,{});c.filter=e;f.doChanges(c)})}else if(c.selector)c.filter=function(b){var e=c.selector;if("object"!==typeof e)throw Error("Selector error: expected a JSON object");e=d7(e);return(b=g7([{doc:b}],{selector:e},Object.keys(e)))&&1===b.length},f.doChanges(c);else{var n=AK(c.filter);f.db.get("_design/"+n[0],function(b,e){if(f.isCancelled)return k(null,{status:"cancelled"});if(b)return k(Cz(b));b=e&&e.filters&&
e.filters[n[1]];if(!b)return k(Qh(Oq,e&&e.filters?"missing json key: "+n[1]:"missing json key: filters"));c.filter=BK('"use strict";\nreturn '+b+";",{});f.doChanges(c)})}}function HU(f){return f.reduce(function(c,k){c[k]=!0;return c},{})}function IU(f){if(!/^\d+-/.test(f))return Qh(JU);var c=f.indexOf("-"),k=f.substring(0,c);f=f.substring(c+1);return{prefix:parseInt(k,10),id:f}}function KU(f,c,k){k||(k={deterministic_revs:!0});var d={status:"available"};f._deleted&&(d.deleted=!0);if(c){f._id||(f._id=
GF());var h=sU(f,k.deterministic_revs);if(f._rev){c=IU(f._rev);if(c.error)return c;f._rev_tree=[{pos:c.prefix,ids:[c.id,{status:"missing"},[[h,d,[]]]]}];var n=c.prefix+1}else f._rev_tree=[{pos:1,ids:[h,d,[]]}],n=1}else{if(f._revisions){h=f._revisions;n=h.start-h.ids.length+1;h=h.ids;c=[h[0],d,[]];k=1;for(var b=h.length;k<b;k++)c=[h[k],{status:"missing"},[c]];f._rev_tree=[{pos:n,ids:c}];n=f._revisions.start;h=f._revisions.ids[0]}if(!f._rev_tree){c=IU(f._rev);if(c.error)return c;n=c.prefix;h=c.id;f._rev_tree=
[{pos:n,ids:[h,d,[]]}]}}lU(f._id);f._rev=n+"-"+h;d={metadata:{},data:{}};for(var e in f)if(Object.prototype.hasOwnProperty.call(f,e)){if((n="_"===e[0])&&!o7[e])throw f=Qh(LU,e),f.message=LU.message+": "+e,f;n&&!p7[e]?d.metadata[e.slice(1)]=f[e]:d.data[e]=f[e]}return d}function q7(f,c,k){try{var d=atob(f.data)}catch(h){d={error:Qh(MU,"Attachment is not a valid base64 string")}}if(d.error)return k(d.error);f.length=d.length;f.data="blob"===c?DK(d,f.content_type):"base64"===c?btoa(d):d;GK(d,function(h){f.digest=
"md5-"+h;k()})}function r7(f,c,k){GK(f.data,function(d){f.digest="md5-"+d;f.length=f.data.size||f.data.length||0;"binary"===c?rU(f.data,function(h){f.data=h;k()}):"base64"===c?FK(f.data,function(h){f.data=h;k()}):k()})}function s7(f,c,k){if(f.stub)return k();"string"===typeof f.data?q7(f,c,k):r7(f,c,k)}function t7(f,c,k){function d(){h++;f.length===h&&(n?k(n):k())}if(!f.length)return k();var h=0,n;f.forEach(function(b){function e(l){n=l;a++;a===m.length&&d()}var m=b.data&&b.data._attachments?Object.keys(b.data._attachments):
[],a=0;if(!m.length)return d();for(var g in b.data._attachments)b.data._attachments.hasOwnProperty(g)&&s7(b.data._attachments[g],c,e)})}function u7(f,c,k,d,h,n,b,e,m){f=f||1E3;var a=e.new_edits,g=new Co,l=0,q=c.length;c.forEach(function(r,u){if(r._id&&qx(r._id))k[r._deleted?"_removeLocal":"_putLocal"](r,{ctx:h},function(y,z){n[u]=y||z;++l===q&&m&&m()});else{var v=r.metadata.id;g.has(v)?(q--,g.get(v).push([r,u])):g.set(v,[[r,u]])}});g.forEach(function(r,u){function v(){++z<r.length?y():++l===q&&m&&
m()}function y(){var A=r[z],B=A[0];A=A[1];if(d.has(u)){var G=f,E=d.get(u);b:{var K=B.metadata.rev;var J=E.rev_tree.slice();var P=K.split("-");K=parseInt(P[0],10);P=P[1];for(var ea;ea=J.pop();){if(ea.pos===K&&ea.ids[0]===P){J=!0;break b}for(var ra=ea.ids[2],D=0,O=ra.length;D<O;D++)J.push({pos:ea.pos+1,ids:ra[D]})}J=!1}J&&!a?(n[A]=B,v()):(P=E.winningRev||ox(E),J="deleted"in E?E.deleted:fu(E,P),K="deleted"in B.metadata?B.metadata.deleted:fu(B.metadata),ea=/^1-/.test(B.metadata.rev),J&&!K&&a&&ea&&(ea=
B.data,ea._rev=P,ea._id=B.metadata.id,B=KU(ea,a)),P=yU(E.rev_tree,B.metadata.rev_tree[0],G),a&&(J&&K&&"new_leaf"!==P.conflicts||!J&&"new_leaf"!==P.conflicts||J&&!K&&"new_branch"===P.conflicts)?(B=Qh(Ez),n[A]=B,v()):(G=B.metadata.rev,B.metadata.rev_tree=P.tree,B.stemmedRevs=P.stemmedRevs||[],E.rev_map&&(B.metadata.rev_map=E.rev_map),E=ox(B.metadata),K=fu(B.metadata,E),J=J===K?0:J<K?-1:1,G=G===E?K:fu(B.metadata,G),b(B,E,K,G,!0,J,A,v)))}else E=yU([],B.metadata.rev_tree[0],f),B.metadata.rev_tree=E.tree,
B.stemmedRevs=E.stemmedRevs||[],E=ox(B.metadata),G=fu(B.metadata,E),"was_delete"in e&&G?(n[A]=Qh(Oq,"deleted"),v()):a&&"missing"===B.metadata.rev_tree[0].ids[1].status?(B=Qh(Ez),n[A]=B,v()):b(B,E,G,G,!1,G?0:1,A,v)}var z=0;y()})}function ss(f){return function(c){var k="unknown_error";c.target&&c.target.error&&(k=c.target.error.name||c.target.error.message);f(Qh(MK,k,c.type))}}function NK(f,c,k){try{var d=JSON.stringify(f)}catch(h){d=NU.stringify(f)}return{data:d,winningRev:c,deletedOrLocal:k?"1":"0",
seq:f.seq,id:f.id}}function tx(f){if(!f)return null;var c=f.data;try{var k=JSON.parse(c)}catch(d){k=NU.parse(c)}k.winningRev=f.winningRev;k.deleted="1"===f.deletedOrLocal;k.seq=f.seq;return k}function HF(f){if(!f)return f;var c=f._doc_id_rev.lastIndexOf(":");f._id=f._doc_id_rev.substring(0,c-1);f._rev=f._doc_id_rev.substring(c+1);delete f._doc_id_rev;return f}function OU(f,c,k,d){k?f?"string"!==typeof f?d(f):d(EK(f,c)):d(CK([""],{type:c})):f?"string"!==typeof f?qU(f,function(h){d(btoa(h))}):d(f):
d("")}function PU(f,c,k,d){function h(e,m){var a=e._attachments[m];e=a.digest;k.objectStore("attach-store").get(e).onsuccess=function(g){a.body=g.target.result.body;++b===n.length&&d&&d()}}var n=Object.keys(f._attachments||{});if(!n.length)return d&&d();var b=0;n.forEach(function(e){c.attachments&&c.include_docs?h(f,e):(f._attachments[e].stub=!0,++b===n.length&&d&&d())})}function OK(f,c){return Promise.all(f.map(function(k){if(k.doc&&k.doc._attachments){var d=Object.keys(k.doc._attachments);return Promise.all(d.map(function(h){var n=
k.doc._attachments[h];if("body"in n){var b=n.body,e=n.content_type;return new Promise(function(m){OU(b,e,c,function(a){k.doc._attachments[h]=Fz(PB(n,["digest","content_type"]),{data:a});m()})})}}))}}))}function QU(f,c,k){function d(){h.length&&h.forEach(function(a){e.index("digestSeq").count(IDBKeyRange.bound(a+"::",a+"::\uffff",!1,!1)).onsuccess=function(g){g.target.result||b.delete(a)}})}var h=[],n=k.objectStore("by-sequence"),b=k.objectStore("attach-store"),e=k.objectStore("attach-seq-store"),
m=f.length;f.forEach(function(a){n.index("_doc_id_rev").getKey(c+"::"+a).onsuccess=function(g){g=g.target.result;"number"!==typeof g?(m--,m||d()):(n.delete(g),e.index("seq").openCursor(IDBKeyRange.only(g)).onsuccess=function(l){if(l=l.target.result){var q=l.value.digestSeq.split("::")[0];h.push(q);e.delete(l.primaryKey);l.continue()}else m--,m||d()})}})}function Pq(f,c,k){try{return{txn:f.transaction(c,k)}}catch(d){return{error:d}}}function v7(f,c,k,d,h,n){function b(){var Qa=Pq(h,"document-store by-sequence attach-store local-store attach-seq-store meta-store".split(" "),
"readwrite");if(Qa.error)return n(Qa.error);G=Qa.txn;G.onabort=ss(n);G.ontimeout=ss(n);G.oncomplete=l;E=G.objectStore("document-store");K=G.objectStore("by-sequence");J=G.objectStore("attach-store");P=G.objectStore("attach-seq-store");ea=G.objectStore("meta-store");ea.get("meta-store").onsuccess=function(X){D=X.target.result;a()};r(function(X){if(X)return bb=!0,n(X);g()})}function e(){N=!0;a()}function m(){u7(f.revs_limit,B,d,ma,G,Y,u,k,e)}function a(){D&&N&&(D.docCount+=aa,ea.put(D))}function g(){function Qa(yb){(yb=
tx(yb.target.result))&&ma.set(yb.id,yb);++X===B.length&&m()}if(B.length)for(var X=0,V=0,ha=B.length;V<ha;V++){var xa=B[V];xa._id&&qx(xa._id)?++X===B.length&&m():E.get(xa.metadata.id).onsuccess=Qa}}function l(){bb||(VB.notify(d._meta.name),n(null,Y))}function q(Qa,X){J.get(Qa).onsuccess=function(V){V.target.result?X():(V=Qh(w7,"unknown stub attachment with digest "+Qa),V.status=412,X(V))}}function r(Qa){var X=[];B.forEach(function(xa){xa.data&&xa.data._attachments&&Object.keys(xa.data._attachments).forEach(function(yb){yb=
xa.data._attachments[yb];yb.stub&&X.push(yb.digest)})});if(!X.length)return Qa();var V=0,ha;X.forEach(function(xa){q(xa,function(yb){yb&&!ha&&(ha=yb);++V===X.length&&Qa(ha)})})}function u(Qa,X,V,ha,xa,yb,ec,Nb){Qa.metadata.winningRev=X;Qa.metadata.deleted=V;var ac=Qa.data;ac._id=Qa.metadata.id;ac._rev=Qa.metadata.rev;ha&&(ac._deleted=!0);if(ac._attachments&&Object.keys(ac._attachments).length)return y(Qa,X,V,xa,ec,Nb);aa+=yb;a();v(Qa,X,V,xa,ec,Nb)}function v(Qa,X,V,ha,xa,yb){function ec(gd){var yd=
Qa.stemmedRevs||[];ha&&d.auto_compaction&&(yd=yd.concat(Q6(Qa.metadata)));yd&&yd.length&&QU(yd,Qa.metadata.id,G);Cc.seq=gd.target.result;gd=NK(Cc,X,V);E.put(gd).onsuccess=Nb}function Nb(){Y[xa]={ok:!0,id:Cc.id,rev:Cc.rev};ma.set(Qa.metadata.id,Qa.metadata);z(Qa,Cc.seq,yb)}var ac=Qa.data,Cc=Qa.metadata;ac._doc_id_rev=Cc.id+"::"+Cc.rev;delete ac._id;delete ac._rev;var Hb=K.put(ac);Hb.onsuccess=ec;Hb.onerror=function(gd){gd.preventDefault();gd.stopPropagation();K.index("_doc_id_rev").getKey(ac._doc_id_rev).onsuccess=
function(yd){K.put(ac,yd.target.result).onsuccess=ec}}}function y(Qa,X,V,ha,xa,yb){function ec(){ac===Cc.length&&v(Qa,X,V,ha,xa,yb)}function Nb(){ac++;ec()}var ac=0,Cc=Object.keys(Qa.data._attachments);Cc.forEach(function(Hb){Hb=Qa.data._attachments[Hb];if(Hb.stub)ac++,ec();else{var gd=Hb.data;delete Hb.data;Hb.revpos=parseInt(X,10);A(Hb.digest,gd,Nb)}})}function z(Qa,X,V){function ha(){++yb===ec.length&&V()}function xa(ac){ac=P.put({seq:X,digestSeq:Qa.data._attachments[ac].digest+"::"+X});ac.onsuccess=
ha;ac.onerror=function(Cc){Cc.preventDefault();Cc.stopPropagation();ha()}}var yb=0,ec=Object.keys(Qa.data._attachments||{});if(!ec.length)return V();for(var Nb=0;Nb<ec.length;Nb++)xa(ec[Nb])}function A(Qa,X,V){J.count(Qa).onsuccess=function(ha){if(ha.target.result)return V();J.put({digest:Qa,body:X}).onsuccess=V}}var B=c.docs,G,E,K,J,P,ea,ra,D;c=0;for(var O=B.length;c<O;c++){var L=B[c];L._id&&qx(L._id)||(L=B[c]=KU(L,k.new_edits,f),L.error&&!ra&&(ra=L))}if(ra)return n(ra);var N=!1,aa=0,Y=Array(B.length),
ma=new Co,bb=!1;t7(B,d._meta.blobSupport?"blob":"base64",function(Qa){if(Qa)return n(Qa);b()})}function RU(f,c,k,d,h){function n(q){g=q.target.result;a&&h(a,g,l)}function b(q){a=q.target.result;g&&h(a,g,l)}function e(){if(!a.length)return h();var q=a[a.length-1];if(c&&c.upper)try{var r=IDBKeyRange.bound(q,c.upper,!0,c.upperOpen)}catch(u){if("DataError"===u.name&&0===u.code)return h()}else r=IDBKeyRange.lowerBound(q,!0);c=r;g=a=null;f.getAll(c,d).onsuccess=n;f.getAllKeys(c,d).onsuccess=b}function m(q){q=
q.target.result;if(!q)return h();h([q.key],[q.value],q)}-1===d&&(d=1E3);var a,g;if("function"===typeof f.getAll&&"function"===typeof f.getAllKeys&&1<d&&!k){var l={"continue":e};f.getAll(c,d).onsuccess=n;f.getAllKeys(c,d).onsuccess=b}else k?f.openCursor(c,"prev").onsuccess=m:f.openCursor(c).onsuccess=m}function x7(f,c,k){if("function"===typeof f.getAll)f.getAll(c).onsuccess=k;else{var d=[];f.openCursor(c).onsuccess=function(h){(h=h.target.result)?(d.push(h.value),h.continue()):k({target:{result:d}})}}}
function y7(f,c,k){var d=Array(f.length),h=0;f.forEach(function(n,b){c.get(n).onsuccess=function(e){d[b]=e.target.result?e.target.result:{key:n,error:"not_found"};h++;h===f.length&&k(f,d,{})}})}function z7(f,c,k,d,h){try{if(f&&c)return h?IDBKeyRange.bound(c,f,!k,!1):IDBKeyRange.bound(f,c,!1,!k);if(f)return h?IDBKeyRange.upperBound(f):IDBKeyRange.lowerBound(f);if(c)return h?IDBKeyRange.lowerBound(c,!k):IDBKeyRange.upperBound(c,!k);if(d)return IDBKeyRange.only(d)}catch(n){return{error:n}}return null}
function A7(f,c,k){function d(J,P){J.openCursor(null,"prev").onsuccess=function(ea){ea=ea.target.result;var ra=void 0;ea&&ea.key&&(ra=ea.key);return P({target:{result:[ra]}})}}function h(J,P,ea){B.get(J.id+"::"+ea).onsuccess=function(ra){P.doc=HF(ra.target.result)||{};f.conflicts&&(ra=IK(J),ra.length&&(P.doc._conflicts=ra));PU(P.doc,f,A)}}function n(J){for(var P=0,ea=J.length;P<ea&&G.length!==u;P++){var ra=J[P];if(ra.error&&q)G.push(ra);else{var D=tx(ra);ra=D.winningRev;var O={id:D.id,key:D.id,value:{rev:ra}};
D.deleted?q&&(G.push(O),O.value.deleted=!0,O.doc=null):0>=r--&&(G.push(O),f.include_docs&&h(D,O,ra))}}}function b(J,P,ea){ea&&(n(P),G.length<u&&ea.continue())}function e(J){J=J.target.result;f.descending&&(J=J.reverse());n(J)}function m(){var J={total_rows:E,offset:f.skip,rows:G};f.update_seq&&void 0!==K&&(J.update_seq=K);k(null,J)}var a="startkey"in f?f.startkey:!1,g="endkey"in f?f.endkey:!1,l="key"in f?f.key:!1,q="keys"in f?f.keys:!1,r=f.skip||0,u="number"===typeof f.limit?f.limit:-1,v=!1!==f.inclusive_end,
y,z;if(!q&&(z=(y=z7(a,g,v,l,f.descending))&&y.error)&&("DataError"!==z.name||0!==z.code))return k(Qh(MK,z.name,z.message));a=["document-store","by-sequence","meta-store"];f.attachments&&a.push("attach-store");c=Pq(c,a,"readonly");if(c.error)return k(c.error);var A=c.txn;A.oncomplete=function(){f.attachments?OK(G,f.binary).then(m):m()};A.onabort=ss(k);c=A.objectStore("document-store");a=A.objectStore("by-sequence");g=A.objectStore("meta-store");var B=a.index("_doc_id_rev"),G=[],E,K;g.get("meta-store").onsuccess=
function(J){E=J.target.result.docCount};f.update_seq&&d(a,function(J){J.target.result&&0<J.target.result.length&&(K=J.target.result[0])});if(!z&&0!==u){if(q)return y7(f.keys,c,b);if(-1===u)return x7(c,y,e);RU(c,y,f.descending,u+r,b)}}function B7(f){return(new Promise(function(c){var k=CK([""]);k=f.objectStore("detect-blob-support").put(k,"key");k.onsuccess=function(){var d=navigator.userAgent.match(/Chrome\/(\d+)/),h=navigator.userAgent.match(/Edge\//);c(h||!d||43<=parseInt(d[1],10))};k.onerror=f.onabort=
function(d){d.preventDefault();d.stopPropagation();c(!1)}})).catch(function(){return!1})}function C7(f,c){f.objectStore("document-store").index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(k){c(k.target.result)}}function D7(f,c,k,d){try{f(c,k)}catch(h){d.emit("error",h)}}function SU(){!PK&&QK.length&&(PK=!0,QK.shift()())}function E7(f,c,k){QK.push(function(){f(function(d,h){D7(c,d,h,k);PK=!1;rs(function(){SU()})})});SU()}function F7(f,c,k,d){function h(A,B,G,E){if(G.seq!==B)return E();
if(G.winningRev===A._rev)return E(G,A);z.get(A._id+"::"+G.winningRev).onsuccess=function(K){E(G,HF(K.target.result))}}function n(A,B,G){if(m&&!m.has(A._id))return G();var E=u.get(A._id);if(E)return h(A,B,E,G);y.get(A._id).onsuccess=function(K){E=tx(K.target.result);u.set(A._id,E);h(A,B,E,G)}}function b(){f.complete(null,{results:l,last_seq:a})}f=vl(f);if(f.continuous){var e=k+":"+GF();VB.addListener(k,e,c,f);VB.notify(k);return{cancel:function(){VB.removeListener(k,e)}}}var m=f.doc_ids&&new WB(f.doc_ids);
f.since=f.since||0;var a=f.since,g="limit"in f?f.limit:-1;0===g&&(g=1);var l=[],q=0,r=zK(f),u=new Co;c=["document-store","by-sequence"];f.attachments&&c.push("attach-store");d=Pq(d,c,"readonly");if(d.error)return f.complete(d.error);var v=d.txn;v.onabort=ss(f.complete);v.oncomplete=function(){!f.continuous&&f.attachments?OK(l).then(b):b()};d=v.objectStore("by-sequence");var y=v.objectStore("document-store");var z=d.index("_doc_id_rev");c=f.since&&!f.descending?IDBKeyRange.lowerBound(f.since,!0):null;
RU(d,c,f.descending,g,function(A,B,G){function E(ra,D){var O=f.processChange(D,ra,f);a=O.seq=ra.seq;ra=r(O);if("object"===typeof ra)return Promise.reject(ra);if(!ra)return Promise.resolve();q++;f.return_docs&&l.push(O);return f.attachments&&f.include_docs?new Promise(function(L){PU(D,f,v,function(){OK([O],f.binary).then(function(){L(O)})})}):Promise.resolve(O)}function K(){for(var ra=[],D=0,O=J.length;D<O&&q!==g;D++){var L=J[D];L&&ra.push(E(P[D],L))}Promise.all(ra).then(function(N){for(var aa=0,Y=
N.length;aa<Y;aa++)if(N[aa])f.onChange(N[aa])}).catch(f.complete);q!==g&&G.continue()}if(G&&A.length){var J=Array(A.length),P=Array(A.length),ea=0;B.forEach(function(ra,D){ra=HF(ra);n(ra,A[D],function(O,L){P[D]=O;J[D]=L;++ea===A.length&&K()})})}})}function TU(f,c){var k=this;E7(function(d){G7(k,f,d)},c,k.constructor)}function G7(f,c,k){function d(q){var r=q.createObjectStore("document-store",{keyPath:"id"});q.createObjectStore("by-sequence",{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",
{unique:!0});q.createObjectStore("attach-store",{keyPath:"digest"});q.createObjectStore("meta-store",{keyPath:"id",autoIncrement:!1});q.createObjectStore("detect-blob-support");r.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1});q.createObjectStore("local-store",{keyPath:"_id"});q=q.createObjectStore("attach-seq-store",{autoIncrement:!0});q.createIndex("seq","seq");q.createIndex("digestSeq","digestSeq",{unique:!0})}function h(q,r){var u=q.objectStore("document-store");u.createIndex("deletedOrLocal",
"deletedOrLocal",{unique:!1});u.openCursor().onsuccess=function(v){if(v=v.target.result){var y=v.value,z=fu(y);y.deletedOrLocal=z?"1":"0";u.put(y);v.continue()}else r()}}function n(q,r){var u=q.objectStore("local-store"),v=q.objectStore("document-store"),y=q.objectStore("by-sequence");v.openCursor().onsuccess=function(z){var A=z.target.result;if(A){var B=A.value;z=B.id;var G=qx(z);B=ox(B);if(G){var E=z+"::"+B;G=z+"::";B=z+"::~";z=y.index("_doc_id_rev");G=IDBKeyRange.bound(G,B,!1,!1);var K=z.openCursor(G);
K.onsuccess=function(J){(K=J.target.result)?(J=K.value,J._doc_id_rev===E&&u.put(J),y.delete(K.primaryKey),K.continue()):(v.delete(A.primaryKey),A.continue())}}else A.continue()}else r&&r()}}function b(q){q=q.createObjectStore("attach-seq-store",{autoIncrement:!0});q.createIndex("seq","seq");q.createIndex("digestSeq","digestSeq",{unique:!0})}function e(q,r){var u=q.objectStore("by-sequence"),v=q.objectStore("attach-store"),y=q.objectStore("attach-seq-store");v.count().onsuccess=function(z){if(!z.target.result)return r();
u.openCursor().onsuccess=function(A){A=A.target.result;if(!A)return r();for(var B=A.value,G=A.primaryKey,E=Object.keys(B._attachments||{}),K={},J=0;J<E.length;J++)K[B._attachments[E[J]].digest]=!0;B=Object.keys(K);for(J=0;J<B.length;J++)y.put({seq:G,digestSeq:B[J]+"::"+G});A.continue()}}}function m(q){function r(y){return y.data?tx(y):(y.deleted="1"===y.deletedOrLocal,y)}var u=q.objectStore("by-sequence"),v=q.objectStore("document-store");v.openCursor().onsuccess=function(y){function z(){var G=NK(B,
B.winningRev,B.deleted);v.put(G).onsuccess=function(){A.continue()}}var A=y.target.result;if(A){var B=r(A.value);B.winningRev=B.winningRev||ox(B);if(B.seq)return z();(function(){var G=B.id+"::",E=B.id+"::\uffff",K=0;u.index("_doc_id_rev").openCursor(IDBKeyRange.bound(G,E)).onsuccess=function(J){J=J.target.result;if(!J)return B.seq=K,z();var P=J.primaryKey;P>K&&(K=P);J.continue()}})()}}}var a=c.name,g=null;f._meta=null;f._remote=!1;f.type=function(){return"idb"};f._id=hU(function(q){q(null,f._meta.instanceId)});
f._bulkDocs=function(q,r,u){v7(c,q,r,f,g,u)};f._get=function(q,r,u){function v(){u(A,{doc:y,metadata:z,ctx:B})}var y,z,A,B=r.ctx;if(!B){var G=Pq(g,["document-store","by-sequence","attach-store"],"readonly");if(G.error)return u(G.error);B=G.txn}B.objectStore("document-store").get(q).onsuccess=function(E){z=tx(E.target.result);if(!z)return A=Qh(Oq,"missing"),v();if(r.rev)var K=r.latest?V6(r.rev,z):r.rev;else if(K=z.winningRev,fu(z))return A=Qh(Oq,"deleted"),v();E=B.objectStore("by-sequence");K=z.id+
"::"+K;E.index("_doc_id_rev").get(K).onsuccess=function(J){(y=J.target.result)&&(y=HF(y));if(!y)return A=Qh(Oq,"missing"),v();v()}}};f._getAttachment=function(q,r,u,v,y){if(v.ctx)q=v.ctx;else{q=Pq(g,["document-store","by-sequence","attach-store"],"readonly");if(q.error)return y(q.error);q=q.txn}r=u.digest;var z=u.content_type;q.objectStore("attach-store").get(r).onsuccess=function(A){OU(A.target.result.body,z,v.binary,function(B){y(null,B)})}};f._info=function(q){var r,u,v=Pq(g,["meta-store","by-sequence"],
"readonly");if(v.error)return q(v.error);v=v.txn;v.objectStore("meta-store").get("meta-store").onsuccess=function(y){u=y.target.result.docCount};v.objectStore("by-sequence").openCursor(null,"prev").onsuccess=function(y){r=(y=y.target.result)?y.key:0};v.oncomplete=function(){q(null,{doc_count:u,update_seq:r,idb_attachment_format:f._meta.blobSupport?"binary":"base64"})}};f._allDocs=function(q,r){A7(q,g,r)};f._changes=function(q){return F7(q,f,a,g)};f._close=function(q){g.close();Gz.delete(a);q()};f._getRevisionTree=
function(q,r){var u=Pq(g,["document-store"],"readonly");if(u.error)return r(u.error);u.txn.objectStore("document-store").get(q).onsuccess=function(v){(v=tx(v.target.result))?r(null,v.rev_tree):r(Qh(Oq))}};f._doCompaction=function(q,r,u){var v=Pq(g,["document-store","by-sequence","attach-store","attach-seq-store"],"readwrite");if(v.error)return u(v.error);var y=v.txn;y.objectStore("document-store").get(q).onsuccess=function(z){z=tx(z.target.result);px(z.rev_tree,function(G,E,K,J,P){-1!==r.indexOf(E+
"-"+K)&&(P.status="missing")});QU(r,q,y);var A=z.winningRev,B=z.deleted;y.objectStore("document-store").put(NK(z,A,B))};y.onabort=ss(u);y.oncomplete=function(){u()}};f._getLocal=function(q,r){var u=Pq(g,["local-store"],"readonly");if(u.error)return r(u.error);q=u.txn.objectStore("local-store").get(q);q.onerror=ss(r);q.onsuccess=function(v){(v=v.target.result)?(delete v._doc_id_rev,r(null,v)):r(Qh(Oq))}};f._putLocal=function(q,r,u){"function"===typeof r&&(u=r,r={});delete q._revisions;var v=q._rev,
y=q._id;q._rev=v?"0-"+(parseInt(v.split("-")[1],10)+1):"0-1";var z=r.ctx,A;if(!z){z=Pq(g,["local-store"],"readwrite");if(z.error)return u(z.error);z=z.txn;z.onerror=ss(u);z.oncomplete=function(){A&&u(null,A)}}var B=z.objectStore("local-store");v?(y=B.get(y),y.onsuccess=function(G){(G=G.target.result)&&G._rev===v?B.put(q).onsuccess=function(){A={ok:!0,id:q._id,rev:q._rev};r.ctx&&u(null,A)}:u(Qh(Ez))}):(y=B.add(q),y.onerror=function(G){u(Qh(Ez));G.preventDefault();G.stopPropagation()},y.onsuccess=function(){A=
{ok:!0,id:q._id,rev:q._rev};r.ctx&&u(null,A)})};f._removeLocal=function(q,r,u){"function"===typeof r&&(u=r,r={});var v=r.ctx;if(!v){v=Pq(g,["local-store"],"readwrite");if(v.error)return u(v.error);v=v.txn;v.oncomplete=function(){y&&u(null,y)}}var y,z=q._id,A=v.objectStore("local-store");v=A.get(z);v.onerror=ss(u);v.onsuccess=function(B){(B=B.target.result)&&B._rev===q._rev?(A.delete(z),y={ok:!0,id:z,rev:"0-0"},r.ctx&&u(null,y)):u(Qh(Oq))}};f._destroy=function(q,r){VB.removeAllListeners(a);(q=RK.get(a))&&
q.result&&(q.result.close(),Gz.delete(a));q=indexedDB.deleteDatabase(a);q.onsuccess=function(){RK.delete(a);QB&&a in localStorage&&delete localStorage[a];r(null,{ok:!0})};q.onerror=ss(r)};var l=Gz.get(a);if(l)return g=l.idb,f._meta=l.global,rs(function(){k(null,f)});l=indexedDB.open(a,5);RK.set(a,l);l.onupgradeneeded=function(q){function r(){var A=y[z-1];z++;A&&A(v,r)}var u=q.target.result;if(1>q.oldVersion)return d(u);var v=q.currentTarget.transaction;3>q.oldVersion&&u.createObjectStore("local-store",
{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0});4>q.oldVersion&&b(u);var y=[h,n,e,m],z=q.oldVersion;r()};l.onsuccess=function(q){function r(){"undefined"!==typeof B&&y&&(f._meta={name:a,instanceId:G,blobSupport:B},Gz.set(a,{idb:g,global:f._meta}),k(null,f))}function u(){if("undefined"!==typeof A&&"undefined"!==typeof z){var E=a+"_id";E in z?G=z[E]:z[E]=G=GF();z.docCount=A;v.objectStore("meta-store").put(z)}}g=q.target.result;g.onversionchange=function(){g.close();Gz.delete(a)};
g.onabort=function(E){Ep("error","Database has a global failure",E.target.error);g.close();Gz.delete(a)};var v=g.transaction(["meta-store","detect-blob-support","document-store"],"readwrite"),y=!1,z,A,B,G;v.objectStore("meta-store").get("meta-store").onsuccess=function(E){z=E.target.result||{id:"meta-store"};u()};C7(v,function(E){A=E;u()});SK||(SK=B7(v));SK.then(function(E){B=E;r()});v.oncomplete=function(){y=!0;r()};v.onabort=ss(k)};l.onerror=function(q){(q=q.target.error&&q.target.error.message)?
-1!==q.indexOf("stored database is a higher version")&&(q=Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):q="Failed to open indexedDB, are you in private browsing mode?";Ep("error",q);k(Qh(MK,q))}}function H7(f,c){return new Promise(function(k,d){function h(){m++;f[a++]().then(b,e)}function n(){if(++g===l)q?d(q):k();else for(;m<c&&a<l;)h()}function b(){m--;n()}function e(r){m--;q=q||r;n()}for(var m=0,a=0,g=0,l=f.length,q;m<
c&&a<l;)h()})}function TK(f){var c=(f=f.doc||f.ok)&&f._attachments;c&&Object.keys(c).forEach(function(k){k=c[k];k.data=EK(k.data,k.content_type)})}function ux(f){return/^_design/.test(f)?"_design/"+encodeURIComponent(f.slice(8)):/^_local/.test(f)?"_local/"+encodeURIComponent(f.slice(7)):encodeURIComponent(f)}function UU(f){return f._attachments&&Object.keys(f._attachments)?Promise.all(Object.keys(f._attachments).map(function(c){var k=f._attachments[c];if(k.data&&"string"!==typeof k.data)return(new Promise(function(d){FK(k.data,
d)})).then(function(d){k.data=d})})):Promise.resolve()}function I7(f,c){if(c.prefix){var k=oU(c.prefix).protocol;k="http"===k||"https"===k}else k=!1;k&&(f=c.name.substr(c.prefix.length),f=c.prefix.replace(/\/?$/,"/")+encodeURIComponent(f));c=oU(f);if(c.user||c.password)c.auth={username:c.user,password:c.password};f=c.path.replace(/(^\/|\/$)/g,"").split("/");c.db=f.pop();-1===c.db.indexOf("%")&&(c.db=encodeURIComponent(c.db));c.path=f.join("/");return c}function wl(f,c){return IF(f,f.db+"/"+c)}function IF(f,
c){return f.protocol+"://"+f.host+(f.port?":"+f.port:"")+"/"+f.path+(f.path?"/":"")+c}function JF(f){return"?"+Object.keys(f).map(function(c){return c+"="+encodeURIComponent(f[c])}).join("&")}function J7(f){var c="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",k=-1!==c.indexOf("msie"),d=-1!==c.indexOf("trident");c=-1!==c.indexOf("edge");f=!("method"in f)||"GET"===f.method;return(k||d||c)&&f}function UK(f,c){function k(l,q){return el(l,Az(function(r){h().then(function(){return q.apply(this,
r)}).catch(function(u){r.pop()(u)})})).bind(b)}function d(l,q,r){var u={};q=q||{};q.headers=q.headers||new Hz;q.headers.get("Content-Type")||q.headers.set("Content-Type","application/json");q.headers.get("Accept")||q.headers.set("Accept","application/json");return a(l,q).then(function(v){u.ok=v.ok;u.status=v.status;return v.json()}).then(function(v){u.data=v;if(!u.ok){u.data.status=u.status;v=Cz(u.data);if(r)return r(v);throw v;}Array.isArray(u.data)&&(u.data=u.data.map(function(y){return y.error||
y.missing?Cz(y):y}));if(r)r(null,u.data);else return u})}function h(){if(f.skip_setup)return Promise.resolve();if(g)return g;g=d(m).catch(function(l){return l&&l.status&&404===l.status?(yK(404,"PouchDB is just detecting if the remote exists."),d(m,{method:"PUT"})):Promise.reject(l)}).catch(function(l){return l&&l.status&&412===l.status?!0:Promise.reject(l)});g.catch(function(){g=null});return g}function n(l){return l.split("/").map(encodeURIComponent).join("/")}var b=this,e=I7(f.name,f),m=wl(e,"");
f=vl(f);var a=function(l,q){q=q||{};q.headers=q.headers||new Hz;q.credentials="include";if(f.auth||e.auth){var r=f.auth||e.auth;r=btoa(unescape(encodeURIComponent(r.username+":"+r.password)));q.headers.set("Authorization","Basic "+r)}var u=f.headers||{};Object.keys(u).forEach(function(v){q.headers.append(v,u[v])});J7(q)&&(l+=(-1===l.indexOf("?")?"?":"&")+"_nonce="+Date.now());return(f.fetch||VU)(l,q)},g;rs(function(){c(null,b)});b._remote=!0;b.type=function(){return"http"};b.id=k("id",function(l){a(IF(e,
"")).then(function(q){return q.json()}).catch(function(){return{}}).then(function(q){q=q&&q.uuid?q.uuid+e.db:wl(e,"");l(null,q)})});b.compact=k("compact",function(l,q){"function"===typeof l&&(q=l,l={});l=vl(l);d(wl(e,"_compact"),{method:"POST"}).then(function(){function r(){b.info(function(u,v){v&&!v.compact_running?q(null,{ok:!0}):setTimeout(r,l.interval||200)})}r()})});b.bulkGet=el("bulkGet",function(l,q){function r(A){var B={};l.revs&&(B.revs=!0);l.attachments&&(B.attachments=!0);l.latest&&(B.latest=
!0);d(wl(e,"_bulk_get"+JF(B)),{method:"POST",body:JSON.stringify({docs:l.docs})}).then(function(G){l.attachments&&l.binary&&G.data.results.forEach(function(E){E.docs.forEach(TK)});A(null,G.data)}).catch(A)}function u(){function A(P){return function(ea,ra){E[P]=ra.results;++G===B&&q(null,{results:DF(E)})}}for(var B=Math.ceil(l.docs.length/50),G=0,E=Array(B),K=0;K<B;K++){var J=PB(l,["revs","attachments","binary","latest"]);J.docs=l.docs.slice(50*K,Math.min(l.docs.length,50*(K+1)));jU(v,J,A(K))}}var v=
this,y=IF(e,""),z=VK[y];"boolean"!==typeof z?r(function(A,B){A?(VK[y]=!1,yK(A.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),u()):(VK[y]=!0,q(null,B))}):z?r(q):u()});b._info=function(l){h().then(function(){return a(wl(e,""))}).then(function(q){return q.json()}).then(function(q){q.host=wl(e,"");l(null,q)}).catch(l)};b.fetch=function(l,q){return h().then(function(){var r="/"===l.substring(0,1)?IF(e,l.substring(1)):wl(e,l);return a(r,q)})};b.get=k("get",function(l,q,r){function u(z){function A(E){var K=
B[E];E=ux(z._id)+"/"+n(E)+"?rev="+z._rev;return a(wl(e,E)).then(function(J){return"buffer"in J?J.buffer():J.blob()}).then(function(J){if(q.binary){var P=Object.getOwnPropertyDescriptor(J.__proto__,"type");if(!P||P.set)J.type=K.content_type;return J}return new Promise(function(ea){FK(J,ea)})}).then(function(J){delete K.stub;delete K.length;K.data=J})}var B=z._attachments,G=B&&Object.keys(B);if(B&&G.length)return G=G.map(function(E){return function(){return A(E)}}),H7(G,5)}function v(z){return Array.isArray(z)?
Promise.all(z.map(function(A){if(A.ok)return u(A.ok)})):u(z)}"function"===typeof q&&(r=q,q={});q=vl(q);var y={};q.revs&&(y.revs=!0);q.revs_info&&(y.revs_info=!0);q.latest&&(y.latest=!0);q.open_revs&&("all"!==q.open_revs&&(q.open_revs=JSON.stringify(q.open_revs)),y.open_revs=q.open_revs);q.rev&&(y.rev=q.rev);q.conflicts&&(y.conflicts=q.conflicts);q.update_seq&&(y.update_seq=q.update_seq);l=ux(l);y=wl(e,l+JF(y));d(y).then(function(z){return Promise.resolve().then(function(){if(q.attachments)return v(z.data)}).then(function(){r(null,
z.data)})}).catch(function(z){z.docId=l;r(z)})});b.remove=k("remove",function(l,q,r,u){"string"===typeof q?(l={_id:l,_rev:q},"function"===typeof r&&(u=r,r={})):"function"===typeof q?(u=q,r={}):(u=r,r=q);q=l._rev||r.rev;q=wl(e,ux(l._id))+"?rev="+q;d(q,{method:"DELETE"},u).catch(u)});b.getAttachment=k("getAttachment",function(l,q,r,u){"function"===typeof r&&(u=r,r={});r=r.rev?"?rev="+r.rev:"";l=wl(e,ux(l))+"/"+n(q)+r;var v;a(l,{method:"GET"}).then(function(y){v=y.headers.get("content-type");if(y.ok)return"undefined"===
typeof KF||KF.browser||"function"!==typeof y.buffer?y.blob():y.buffer();throw y;}).then(function(y){"undefined"===typeof KF||KF.browser||(y.type=v);u(null,y)}).catch(function(y){u(y)})});b.removeAttachment=k("removeAttachment",function(l,q,r,u){l=wl(e,ux(l)+"/"+n(q))+"?rev="+r;d(l,{method:"DELETE"},u).catch(u)});b.putAttachment=k("putAttachment",function(l,q,r,u,v,y){"function"===typeof v&&(y=v,v=u,u=r,r=null);l=ux(l)+"/"+n(q);l=wl(e,l);r&&(l+="?rev="+r);if("string"===typeof u){try{var z=atob(u)}catch(A){return y(Qh(MU,
"Attachment is not a valid base64 string"))}u=z?DK(z,v):""}d(l,{headers:new Hz({"Content-Type":v}),method:"PUT",body:u},y).catch(y)});b._bulkDocs=function(l,q,r){l.new_edits=q.new_edits;h().then(function(){return Promise.all(l.docs.map(UU))}).then(function(){return d(wl(e,"_bulk_docs"),{method:"POST",body:JSON.stringify(l)},r)}).catch(r)};b._put=function(l,q,r){h().then(function(){return UU(l)}).then(function(){return d(wl(e,ux(l._id)),{method:"PUT",body:JSON.stringify(l)})}).then(function(u){r(null,
u.data)}).catch(function(u){u.docId=l&&l._id;r(u)})};b.allDocs=k("allDocs",function(l,q){"function"===typeof l&&(q=l,l={});l=vl(l);var r={},u="GET";l.conflicts&&(r.conflicts=!0);l.update_seq&&(r.update_seq=!0);l.descending&&(r.descending=!0);l.include_docs&&(r.include_docs=!0);l.attachments&&(r.attachments=!0);l.key&&(r.key=JSON.stringify(l.key));l.start_key&&(l.startkey=l.start_key);l.startkey&&(r.startkey=JSON.stringify(l.startkey));l.end_key&&(l.endkey=l.end_key);l.endkey&&(r.endkey=JSON.stringify(l.endkey));
"undefined"!==typeof l.inclusive_end&&(r.inclusive_end=!!l.inclusive_end);"undefined"!==typeof l.limit&&(r.limit=l.limit);"undefined"!==typeof l.skip&&(r.skip=l.skip);r=JF(r);if("undefined"!==typeof l.keys){u="POST";var v={keys:l.keys}}d(wl(e,"_all_docs"+r),{method:u,body:JSON.stringify(v)}).then(function(y){l.include_docs&&l.attachments&&l.binary&&y.data.rows.forEach(TK);q(null,y.data)}).catch(q)});b._changes=function(l){var q="batch_size"in l?l.batch_size:25;l=vl(l);!l.continuous||"heartbeat"in
l||(l.heartbeat=1E4);var r="timeout"in l?l.timeout:3E4;"timeout"in l&&l.timeout&&5E3>r-l.timeout&&(r=l.timeout+5E3);"heartbeat"in l&&l.heartbeat&&5E3>r-l.heartbeat&&(r=l.heartbeat+5E3);var u={};"timeout"in l&&l.timeout&&(u.timeout=l.timeout);var v="undefined"!==typeof l.limit?l.limit:!1,y=v;l.style&&(u.style=l.style);if(l.include_docs||l.filter&&"function"===typeof l.filter)u.include_docs=!0;l.attachments&&(u.attachments=!0);l.continuous&&(u.feed="longpoll");l.seq_interval&&(u.seq_interval=l.seq_interval);
l.conflicts&&(u.conflicts=!0);l.descending&&(u.descending=!0);l.update_seq&&(u.update_seq=!0);"heartbeat"in l&&l.heartbeat&&(u.heartbeat=l.heartbeat);l.filter&&"string"===typeof l.filter&&(u.filter=l.filter);l.view&&"string"===typeof l.view&&(u.filter="_view",u.view=l.view);if(l.query_params&&"object"===typeof l.query_params)for(var z in l.query_params)l.query_params.hasOwnProperty(z)&&(u[z]=l.query_params[z]);var A="GET";if(l.doc_ids){u.filter="_doc_ids";A="POST";var B={doc_ids:l.doc_ids}}else l.selector&&
(u.filter="_selector",A="POST",B={selector:l.selector});var G=new K7,E,K=function(ea,ra){if(!l.aborted){u.since=ea;"object"===typeof u.since&&(u.since=JSON.stringify(u.since));l.descending?v&&(u.limit=y):u.limit=!v||y>q?q:y;var D=wl(e,"_changes"+JF(u)),O={signal:G.signal,method:A,body:JSON.stringify(B)};E=ea;l.aborted||h().then(function(){return d(D,O,ra)}).catch(ra)}},J={results:[]},P=function(ea,ra){if(!l.aborted){var D=0;if(ra&&ra.results){D=ra.results.length;J.last_seq=ra.last_seq;var O=null,
L=null;"number"===typeof ra.pending&&(O=ra.pending);if("string"===typeof J.last_seq||"number"===typeof J.last_seq)L=J.last_seq;ra.results=ra.results.filter(function(N){y--;var aa=zK(l)(N);aa&&(l.include_docs&&l.attachments&&l.binary&&TK(N),l.return_docs&&J.results.push(N),l.onChange(N,O,L));return aa})}else if(ea){l.aborted=!0;l.complete(ea);return}ra&&ra.last_seq&&(E=ra.last_seq);ea=v&&0>=y||ra&&D<q||l.descending;(!l.continuous||v&&0>=y)&&ea?l.complete(null,J):rs(function(){K(E,P)})}};K(l.since||
0,P);return{cancel:function(){l.aborted=!0;G.abort()}}};b.revsDiff=k("revsDiff",function(l,q,r){"function"===typeof q&&(r=q);d(wl(e,"_revs_diff"),{method:"POST",body:JSON.stringify(l)},r).catch(r)});b._close=function(l){l()};b._destroy=function(l,q){d(wl(e,""),{method:"DELETE"}).then(function(r){q(null,r)}).catch(function(r){404===r.status?q(null,{ok:!0}):q(r)})}}function vx(f){this.status=400;this.name="query_parse_error";this.message=f;this.error=!0;try{Error.captureStackTrace(this,vx)}catch(c){}}
function LF(f){this.status=404;this.name="not_found";this.message=f;this.error=!0;try{Error.captureStackTrace(this,LF)}catch(c){}}function MF(f){this.status=500;this.name="invalid_value";this.message=f;this.error=!0;try{Error.captureStackTrace(this,MF)}catch(c){}}function WU(f,c){c&&f.then(function(k){rs(function(){c(null,k)})},function(k){rs(function(){c(k)})});return f}function L7(f){return Az(function(c){var k=c.pop();c=f.apply(this,c);"function"===typeof k&&WU(c,k);return c})}function M7(f,c){return f.then(function(k){return c().then(function(){return k})},
function(k){return c().then(function(){throw k;})})}function WK(f,c){return function(){var k=arguments,d=this;return f.add(function(){return c.apply(d,k)})}}function XU(f){f=new WB(f);var c=Array(f.size),k=-1;f.forEach(function(d){c[++k]=d});return c}function XK(f){var c=Array(f.size),k=-1;f.forEach(function(d,h){c[++k]=h});return c}function YU(f){return new MF("builtin "+f+" function requires map values to be numbers or number arrays")}function YK(f){for(var c=0,k=0,d=f.length;k<d;k++){var h=f[k];
if("number"!==typeof h)if(Array.isArray(h)){c="number"===typeof c?[c]:c;for(var n=0,b=h.length;n<b;n++){var e=h[n];if("number"!==typeof e)throw YU("_sum");"undefined"===typeof c[n]?c.push(e):c[n]+=e}}else throw YU("_sum");else"number"===typeof c?c+=h:c[0]+=h}return c}function ZU(f,c){return BK("return ("+f.replace(/;\s*$/,"")+");",{emit:c,sum:YK,log:N7,isArray:O7,toJSON:P7})}function XB(){this.promise=new Promise(function(f){f()})}function $U(f){if(!f)return"undefined";switch(typeof f){case "function":return f.toString();
case "string":return f.toString();default:return JSON.stringify(f)}}function Q7(f,c){return $U(f)+$U(c)+"undefined"}function aV(f,c,k,d,h,n){var b=Q7(k,d);if(!h){var e=f._cachedViews=f._cachedViews||{};if(e[b])return e[b]}var m=f.info().then(function(a){var g=a.db_name+"-mrview-"+(h?"temp":FF.hash(b));return EF(f,"_local/"+n,function(l){l.views=l.views||{};var q=c;-1===q.indexOf("/")&&(q=c+"/"+c);q=l.views[q]=l.views[q]||{};if(!q[g])return q[g]=!0,l}).then(function(){return f.registerDependentDatabase(g).then(function(l){l=
l.db;l.auto_compaction=!0;var q={name:g,db:l,sourceDB:f,adapter:f.adapter,mapFun:k,reduceFun:d};return q.db.get("_local/lastSeq").catch(function(r){if(404!==r.status)throw r;}).then(function(r){q.seq=r?r.seq:0;if(e)q.db.once("destroyed",function(){delete e[b]});return q})})})});e&&(e[b]=m);return m}function ZK(f){return-1===f.indexOf("/")?[f,f]:f.split("/")}function R7(f){return 1===f.length&&/^1-/.test(f[0].rev)}function bV(f,c){try{f.emit("error",c)}catch(k){Ep("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),
Ep("error",c)}}function cV(f,c){var k=Object.keys(c._attachments);return Promise.all(k.map(function(d){return f.getAttachment(c._id,d,{rev:c._rev})}))}function S7(f,c,k){var d=qs(c)&&!qs(f),h=Object.keys(k._attachments);return d?f.get(k._id).then(function(n){return Promise.all(h.map(function(b){return n._attachments&&n._attachments[b]&&n._attachments[b].digest===k._attachments[b].digest?f.getAttachment(n._id,b):c.getAttachment(k._id,b)}))}).catch(function(n){if(404!==n.status)throw n;return cV(c,
k)}):cV(c,k)}function T7(f){var c=[];Object.keys(f).forEach(function(k){f[k].missing.forEach(function(d){c.push({id:k,rev:d})})});return{docs:c,revs:!0,latest:!0}}function U7(f,c,k,d){function h(e){return f.allDocs({keys:e,include_docs:!0,conflicts:!0}).then(function(m){if(d.cancelled)throw Error("cancelled");m.rows.forEach(function(a){var g;(g=a.deleted||!a.doc||!/^1-/.test(a.value.rev))||(g=a.doc,g=g._attachments&&0<Object.keys(g._attachments).length);g||(g=a.doc,g=g._conflicts&&0<g._conflicts.length);
g||(a.doc._conflicts&&delete a.doc._conflicts,n.push(a.doc),delete k[a.id])})})}k=vl(k);var n=[],b=!0;return Promise.resolve().then(function(){var e=Object.keys(k).filter(function(m){m=k[m].missing;return 1===m.length&&/^1-/.test(m[0])});if(0<e.length)return h(e)}).then(function(){var e=T7(k);if(e.docs.length)return f.bulkGet(e).then(function(m){if(d.cancelled)throw Error("cancelled");return Promise.all(m.results.map(function(a){return Promise.all(a.docs.map(function(g){var l=g.ok;g.error&&(b=!1);
return l&&l._attachments?S7(c,f,l).then(function(q){var r=Object.keys(l._attachments);q.forEach(function(u,v){v=l._attachments[r[v]];delete v.stub;delete v.length;v.data=u});return l}):l}))})).then(function(a){n=n.concat(DF(a).filter(Boolean))})})}).then(function(){return{ok:b,docs:n}})}function $K(f,c,k,d,h){return f.get(c).catch(function(n){if(404===n.status)return"http"!==f.adapter&&"https"!==f.adapter||yK(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:d,_id:c,history:[],
replicator:"pouchdb",version:1};throw n;}).then(function(n){if(!h.cancelled&&n.last_seq!==k)return n.history=(n.history||[]).filter(function(b){return b.session_id!==d}),n.history.unshift({last_seq:k,session_id:d}),n.history=n.history.slice(0,5),n.version=1,n.replicator="pouchdb",n.session_id=d,n.last_seq=k,f.put(n).catch(function(b){if(409===b.status)return $K(f,c,k,d,h);throw b;})})}function YB(f,c,k,d,h){this.src=f;this.target=c;this.id=k;this.returnValue=d;this.opts=h||{}}function dV(f,c){var k=
f[0],d=f.slice(1),h=c[0],n=c.slice(1);return k&&0!==c.length?aL(k.session_id,c)?{last_seq:k.last_seq,history:f}:aL(h.session_id,d)?{last_seq:h.last_seq,history:n}:dV(d,n):{last_seq:0,history:[]}}function aL(f,c){var k=c[0],d=c.slice(1);return f&&0!==c.length?f===k.session_id?!0:aL(f,d):!1}function eV(f){return"number"===typeof f.status&&4===Math.floor(f.status/100)}function V7(f,c,k,d){if(!1===f.retry)c.emit("error",k),c.removeAllListeners();else{"function"!==typeof f.back_off_function&&(f.back_off_function=
E6);c.emit("requestError",k);if("active"===c.state||"pending"===c.state){c.emit("paused",k);c.state="stopped";var h=function(){f.current_back_off=0};c.once("paused",function(){c.removeListener("active",h)});c.once("active",h)}f.current_back_off=f.current_back_off||0;f.current_back_off=f.back_off_function(f.current_back_off);setTimeout(d,f.current_back_off)}}function W7(f){return Object.keys(f).sort(Tl).reduce(function(c,k){c[k]=f[k];return c},{})}function X7(f,c,k){var d=k.doc_ids?k.doc_ids.sort(Tl):
"",h=k.filter?k.filter.toString():"",n="",b="",e="";k.selector&&(e=JSON.stringify(k.selector));k.filter&&k.query_params&&(n=JSON.stringify(W7(k.query_params)));k.filter&&"_view"===k.filter&&(b=k.view.toString());return Promise.all([f.id(),c.id()]).then(function(m){var a=m[0]+m[1]+h+b+n+d+e;return new Promise(function(g){GK(a,g)})}).then(function(m){m=m.replace(/\//g,".").replace(/\+/g,"_");return"_local/"+m})}function fV(f,c,k,d,h){function n(){return bb?Promise.resolve():X7(f,c,k).then(function(ha){ma=
ha;bb=new YB(f,c,ma,d,!1===k.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===k.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===k.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0})})}function b(){Qa=[];if(0!==E.docs.length){var ha=E.docs;return c.bulkDocs({docs:ha,new_edits:!1},{timeout:k.timeout}).then(function(xa){if(d.cancelled)throw r(),Error("cancelled");var yb=Object.create(null);
xa.forEach(function(ec){ec.error&&(yb[ec.id]=ec)});xa=Object.keys(yb).length;h.doc_write_failures+=xa;h.docs_written+=ha.length-xa;ha.forEach(function(ec){var Nb=yb[ec._id];if(Nb)if(h.errors.push(Nb),ec=(Nb.name||"").toLowerCase(),"unauthorized"===ec||"forbidden"===ec)d.emit("denied",vl(Nb));else throw Nb;else Qa.push(ec)})},function(xa){h.doc_write_failures+=ha.length;throw xa;})}}function e(){if(E.error)throw Error("There was a problem getting docs.");h.last_seq=ra=E.seq;var ha=vl(h);Qa.length&&
(ha.docs=Qa,"number"===typeof E.pending&&(ha.pending=E.pending,delete E.pending),d.emit("change",ha));J=!0;return bb.writeCheckpoint(E.seq,X).then(function(){J=!1;if(d.cancelled)throw r(),Error("cancelled");E=void 0;z()}).catch(function(xa){B(xa);throw xa;})}function m(){var ha={};E.changes.forEach(function(xa){"_user/"!==xa.id&&(ha[xa.id]=xa.changes.map(function(yb){return yb.rev}))});return c.revsDiff(ha).then(function(xa){if(d.cancelled)throw r(),Error("cancelled");E.diffs=xa})}function a(){return U7(f,
c,E.diffs,d).then(function(ha){E.error=!ha.ok;ha.docs.forEach(function(xa){delete E.diffs[xa._id];h.docs_read++;E.docs.push(xa)})})}function g(){d.cancelled||E||(0===G.length?l(!0):(E=G.shift(),m().then(a).then(b).then(e).then(g).catch(function(ha){q("batch processing terminated with error",ha)})))}function l(ha){if(0===K.changes.length){if(0===G.length&&!E){if(D&&V.live||P)d.state="pending",d.emit("paused");P&&r()}}else if(ha||P||K.changes.length>=O){G.push(K);K={seq:0,changes:[],docs:[]};if("pending"===
d.state||"stopped"===d.state)d.state="active",d.emit("active");g()}}function q(ha,xa){ea||(xa.message||(xa.message=ha),h.ok=!1,h.status="aborting",G=[],K={seq:0,changes:[],docs:[]},r(xa))}function r(ha){if(!ea){if(d.cancelled&&(h.status="cancelled",J))return;h.status=h.status||"complete";h.end_time=(new Date).toISOString();h.last_seq=ra;ea=!0;if(ha){ha=Qh(ha);ha.result=h;var xa=(ha.name||"").toLowerCase();"unauthorized"===xa||"forbidden"===xa?(d.emit("error",ha),d.removeAllListeners()):V7(k,d,ha,
function(){fV(f,c,k,d)})}else d.emit("complete",h),d.removeAllListeners()}}function u(ha,xa,yb){if(d.cancelled)return r();"number"===typeof xa&&(K.pending=xa);zK(k)(ha)&&(K.seq=ha.seq||yb,K.changes.push(ha),rs(function(){l(0===G.length&&V.live)}))}function v(ha){N=!1;if(d.cancelled)return r();if(0<ha.results.length)V.since=ha.results[ha.results.length-1].seq,z(),l(!0);else{var xa=function(){D?(V.live=!0,z()):P=!0;l(!0)};E||0!==ha.results.length?xa():(J=!0,bb.writeCheckpoint(ha.last_seq,X).then(function(){J=
!1;h.last_seq=ra=ha.last_seq;xa()}).catch(B))}}function y(ha){N=!1;if(d.cancelled)return r();q("changes rejected",ha)}function z(){function ha(){yb.cancel()}function xa(){d.removeListener("cancel",ha)}if(!N&&!P&&G.length<L){N=!0;d._changes&&(d.removeListener("cancel",d._abortChanges),d._changes.cancel());d.once("cancel",ha);var yb=f.changes(V).on("change",u);yb.then(xa,xa);yb.then(v).catch(y);k.retry&&(d._changes=yb,d._abortChanges=ha)}}function A(){n().then(function(){if(d.cancelled)r();else return bb.getCheckpoint().then(function(ha){ra=
ha;V={since:ra,limit:O,batch_size:O,style:"all_docs",doc_ids:aa,selector:Y,return_docs:!0};k.filter&&("string"!==typeof k.filter?V.include_docs=!0:V.filter=k.filter);"heartbeat"in k&&(V.heartbeat=k.heartbeat);"timeout"in k&&(V.timeout=k.timeout);k.query_params&&(V.query_params=k.query_params);k.view&&(V.view=k.view);z()})}).catch(function(ha){q("getCheckpoint rejected with ",ha)})}function B(ha){J=!1;q("writeCheckpoint completed with error",ha)}var G=[],E,K={seq:0,changes:[],docs:[]},J=!1,P=!1,ea=
!1,ra=0,D=k.continuous||k.live||!1,O=k.batch_size||100,L=k.batches_limit||10,N=!1,aa=k.doc_ids,Y=k.selector,ma,bb,Qa=[],X=GF();h=h||{ok:!0,start_time:(new Date).toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var V={};d.ready(f,c);d.cancelled?r():(d._addedListeners||(d.once("cancel",r),"function"===typeof k.complete&&(d.once("error",k.complete),d.once("complete",function(ha){k.complete(null,ha)})),d._addedListeners=!0),"undefined"===typeof k.since?A():n().then(function(){J=
!0;return bb.writeCheckpoint(k.since,X)}).then(function(){J=!1;d.cancelled?r():(ra=k.since,A())}).catch(B))}function NF(){Qn.EventEmitter.call(this);this.cancelled=!1;this.state="pending";var f=this,c=new Promise(function(k,d){f.once("complete",k);f.once("error",d)});f.then=function(k,d){return c.then(k,d)};f.catch=function(k){return c.catch(k)};f.catch(function(){})}function OF(f,c){var k=c.PouchConstructor;return"string"===typeof f?new k(f,c):f}function bL(f,c,k,d){"function"===typeof k&&(d=k,k=
{});"undefined"===typeof k&&(k={});if(k.doc_ids&&!Array.isArray(k.doc_ids))throw Qh(CF,"`doc_ids` filter parameter is not a list.");k.complete=d;k=vl(k);k.continuous=k.continuous||k.live;k.retry="retry"in k?k.retry:!1;k.PouchConstructor=k.PouchConstructor||this;d=new NF(k);f=OF(f,k);c=OF(c,k);fV(f,c,k,d);return d}function Y7(f,c,k,d){"function"===typeof k&&(d=k,k={});"undefined"===typeof k&&(k={});k=vl(k);k.PouchConstructor=k.PouchConstructor||this;f=OF(f,k);c=OF(c,k);return new cL(f,c,k,d)}function cL(f,
c,k,d){function h(B){u.emit("change",{direction:"pull",change:B})}function n(B){u.emit("change",{direction:"push",change:B})}function b(B){u.emit("denied",{direction:"push",doc:B})}function e(B){u.emit("denied",{direction:"pull",doc:B})}function m(){u.pushPaused=!0;u.pullPaused&&u.emit("paused")}function a(){u.pullPaused=!0;u.pushPaused&&u.emit("paused")}function g(){u.pushPaused=!1;u.pullPaused&&u.emit("active",{direction:"push"})}function l(){u.pullPaused=!1;u.pushPaused&&u.emit("active",{direction:"pull"})}
function q(B){return function(G,E){var K="denied"===G&&(E===e||E===b),J="paused"===G&&(E===a||E===m),P="active"===G&&(E===l||E===g);if("change"===G&&(E===h||E===n)||K||J||P)G in z||(z[G]={}),z[G][B]=!0,2===Object.keys(z[G]).length&&u.removeAllListeners(G)}}function r(B,G,E){if(-1==B.listeners(G).indexOf(E))B.on(G,E)}var u=this;this.canceled=!1;var v=k.push?Fz({},k,k.push):k,y=k.pull?Fz({},k,k.pull):k;this.push=bL(f,c,v);this.pull=bL(c,f,y);this.pullPaused=this.pushPaused=!0;var z={};k.live&&(this.push.on("complete",
u.pull.cancel.bind(u.pull)),this.pull.on("complete",u.push.cancel.bind(u.push)));this.on("newListener",function(B){"change"===B?(r(u.pull,"change",h),r(u.push,"change",n)):"denied"===B?(r(u.pull,"denied",e),r(u.push,"denied",b)):"active"===B?(r(u.pull,"active",l),r(u.push,"active",g)):"paused"===B&&(r(u.pull,"paused",a),r(u.push,"paused",m))});this.on("removeListener",function(B){"change"===B?(u.pull.removeListener("change",h),u.push.removeListener("change",n)):"denied"===B?(u.pull.removeListener("denied",
e),u.push.removeListener("denied",b)):"active"===B?(u.pull.removeListener("active",l),u.push.removeListener("active",g)):"paused"===B&&(u.pull.removeListener("paused",a),u.push.removeListener("paused",m))});this.pull.on("removeListener",q("pull"));this.push.on("removeListener",q("push"));var A=Promise.all([this.push,this.pull]).then(function(B){B={push:B[0],pull:B[1]};u.emit("complete",B);d&&d(null,B);u.removeAllListeners();return B},function(B){u.cancel();d?d(B):u.emit("error",B);u.removeAllListeners();
if(d)throw B;});this.then=function(B,G){return A.then(B,G)};this.catch=function(B){return A.catch(B)}}function Gv(){this._store={}}function ZB(f){this._store=new Gv;if(f&&Array.isArray(f))for(var c=0,k=f.length;c<k;c++)this.add(f[c])}function Z7(){Iz&&wx&&(Iz=!1,wx.length?Hv=wx.concat(Hv):$B=-1,Hv.length&&gV())}function gV(){if(!Iz){dL=!1;Iz=!0;for(var f=Hv.length,c=setTimeout(Z7);f;){wx=Hv;for(Hv=[];wx&&++$B<f;)wx[$B].run();$B=-1;f=Hv.length}wx=null;$B=-1;Iz=!1;clearTimeout(c)}}function hV(f,c){this.fun=
f;this.array=c}function Dj(f,c,k){Error.call(this,k);this.status=f;this.name=c;this.message=k;this.error=!0}function xx(f){return f.call.bind(f)}function aC(f,c){if("object"!=typeof f)return!1;try{return c(f),!0}catch(k){return!1}}function iV(f){return Rn&&Do?void 0!==Fp(f):jV(f)||kV(f)||lV(f)||mV(f)||nV(f)||oV(f)||pV(f)||qV(f)||rV(f)||sV(f)||tV(f)}function jV(f){return Rn&&Do?"Uint8Array"===Fp(f):"[object Uint8Array]"===rk(f)||$7(f)&&void 0!==f.buffer}function kV(f){return Rn&&Do?"Uint8ClampedArray"===
Fp(f):"[object Uint8ClampedArray]"===rk(f)}function lV(f){return Rn&&Do?"Uint16Array"===Fp(f):"[object Uint16Array]"===rk(f)}function mV(f){return Rn&&Do?"Uint32Array"===Fp(f):"[object Uint32Array]"===rk(f)}function nV(f){return Rn&&Do?"Int8Array"===Fp(f):"[object Int8Array]"===rk(f)}function oV(f){return Rn&&Do?"Int16Array"===Fp(f):"[object Int16Array]"===rk(f)}function pV(f){return Rn&&Do?"Int32Array"===Fp(f):"[object Int32Array]"===rk(f)}function qV(f){return Rn&&Do?"Float32Array"===Fp(f):"[object Float32Array]"===
rk(f)}function rV(f){return Rn&&Do?"Float64Array"===Fp(f):"[object Float64Array]"===rk(f)}function sV(f){return Rn&&Do?"BigInt64Array"===Fp(f):"[object BigInt64Array]"===rk(f)}function tV(f){return Rn&&Do?"BigUint64Array"===Fp(f):"[object BigUint64Array]"===rk(f)}function PF(f){return"[object Map]"===rk(f)}function QF(f){return"[object Set]"===rk(f)}function RF(f){return"[object WeakMap]"===rk(f)}function eL(f){return"[object WeakSet]"===rk(f)}function SF(f){return"[object ArrayBuffer]"===rk(f)}function uV(f){return"undefined"!=
typeof ArrayBuffer&&(SF.working?SF(f):f instanceof ArrayBuffer)}function TF(f){return"[object DataView]"===rk(f)}function vV(f){return"undefined"!=typeof DataView&&(TF.working?TF(f):f instanceof DataView)}function UF(f){return"[object SharedArrayBuffer]"===rk(f)}function wV(f){return"undefined"!=typeof SharedArrayBuffer&&(UF.working?UF(f):f instanceof SharedArrayBuffer)}function xV(f){return aC(f,a8)}function yV(f){return aC(f,b8)}function zV(f){return aC(f,c8)}function AV(f){return BV&&aC(f,d8)}
function CV(f){return fL&&aC(f,e8)}function Iv(f,c){var k={seen:[],stylize:f8};return 3<=arguments.length&&(k.depth=arguments[2]),4<=arguments.length&&(k.colors=arguments[3]),gL(c)?k.showHidden=c:c&&Xg._extend(k,c),yx(k.showHidden)&&(k.showHidden=!1),yx(k.depth)&&(k.depth=2),yx(k.colors)&&(k.colors=!1),yx(k.customInspect)&&(k.customInspect=!0),k.colors&&(k.stylize=g8),VF(k,f,k.depth)}function g8(f,c){return(c=Iv.styles[c])?"\u001b["+Iv.colors[c][0]+"m"+f+"\u001b["+Iv.colors[c][1]+"m":f}function f8(f,
c){return f}function VF(f,c,k){if(f.customInspect&&c&&WF(c.inspect)&&c.inspect!==Xg.inspect&&(!c.constructor||c.constructor.prototype!==c)){var d=c.inspect(k,f);return XF(d)||(d=VF(f,d,k)),d}var h=function(a,g){if(yx(g))return a.stylize("undefined","undefined");if(XF(g))return g="'"+JSON.stringify(g).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",a.stylize(g,"string");if(DV(g))return a.stylize(""+g,"number");if(gL(g))return a.stylize(""+g,"boolean");if(null===g)return a.stylize("null",
"null")}(f,c);if(h)return h;h=Object.keys(c);var n=function(a){var g={};return a.forEach(function(l,q){g[l]=!0}),g}(h);if(f.showHidden&&(h=Object.getOwnPropertyNames(c)),bC(c)&&(0<=h.indexOf("message")||0<=h.indexOf("description")))return hL(c);if(0===h.length){if(WF(c))return f.stylize("[Function"+(c.name?": "+c.name:"")+"]","special");if(cC(c))return f.stylize(RegExp.prototype.toString.call(c),"regexp");if(YF(c))return f.stylize(Date.prototype.toString.call(c),"date");if(bC(c))return hL(c)}var b=
"",e=!1,m=["{","}"];(EV(c)&&(e=!0,m=["[","]"]),WF(c))&&(b=" [Function"+(c.name?": "+c.name:"")+"]");return cC(c)&&(b=" "+RegExp.prototype.toString.call(c)),YF(c)&&(b=" "+Date.prototype.toUTCString.call(c)),bC(c)&&(b=" "+hL(c)),0!==h.length||e&&0!=c.length?0>k?cC(c)?f.stylize(RegExp.prototype.toString.call(c),"regexp"):f.stylize("[Object]","special"):(f.seen.push(c),d=e?function(a,g,l,q,r){for(var u=[],v=0,y=g.length;v<y;++v)Object.prototype.hasOwnProperty.call(g,String(v))?u.push(iL(a,g,l,q,String(v),
!0)):u.push("");return r.forEach(function(z){z.match(/^\d+$/)||u.push(iL(a,g,l,q,z,!0))}),u}(f,c,k,n,h):h.map(function(a){return iL(f,c,k,n,a,e)}),f.seen.pop(),function(a,g,l){var q=0;return 60<a.reduce(function(r,u){return q++,0<=u.indexOf("\n")&&q++,r+u.replace(/\u001b\[\d\d?m/g,"").length+1},0)?l[0]+(""===g?"":g+"\n ")+" "+a.join(",\n  ")+" "+l[1]:l[0]+g+" "+a.join(", ")+" "+l[1]}(d,b,m)):m[0]+b+m[1]}function hL(f){return"["+Error.prototype.toString.call(f)+"]"}function iL(f,c,k,d,h,n){var b,e,
m;if((m=Object.getOwnPropertyDescriptor(c,h)||{value:c[h]}).get?e=m.set?f.stylize("[Getter/Setter]","special"):f.stylize("[Getter]","special"):m.set&&(e=f.stylize("[Setter]","special")),Object.prototype.hasOwnProperty.call(d,h)||(b="["+h+"]"),e||(0>f.seen.indexOf(m.value)?-1<(e=null===k?VF(f,m.value,null):VF(f,m.value,k-1)).indexOf("\n")&&(e=n?e.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+e.split("\n").map(function(a){return"   "+a}).join("\n")):e=f.stylize("[Circular]","special")),
yx(b)){if(n&&h.match(/^\d+$/))return e;(b=JSON.stringify(""+h)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(b=b.substr(1,b.length-2),b=f.stylize(b,"name")):(b=b.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),b=f.stylize(b,"string"))}return b+": "+e}function EV(f){return Array.isArray(f)}function gL(f){return"boolean"==typeof f}function DV(f){return"number"==typeof f}function XF(f){return"string"==typeof f}function yx(f){return void 0===f}function cC(f){return Jz(f)&&"[object RegExp]"===
Object.prototype.toString.call(f)}function Jz(f){return"object"==typeof f&&null!==f}function YF(f){return Jz(f)&&"[object Date]"===Object.prototype.toString.call(f)}function bC(f){return Jz(f)&&("[object Error]"===Object.prototype.toString.call(f)||f instanceof Error)}function WF(f){return"function"==typeof f}function jL(f){return 10>f?"0"+f.toString(10):f.toString(10)}function h8(){var f=new Date,c=[jL(f.getHours()),jL(f.getMinutes()),jL(f.getSeconds())].join(":");return[f.getDate(),i8[f.getMonth()],
c].join(" ")}function j8(f,c){if(!f){var k=Error("Promise was rejected with a falsy value");k.reason=f;f=k}return c(f)}function FV(f){var c=f.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");f=f.indexOf("=");return-1===f&&(f=c),[f,f===c?0:4-f%4]}function k8(f,c,k){for(var d,h=[],n=c;n<k;n+=3)c=(f[n]<<16&16711680)+(f[n+1]<<8&65280)+(255&f[n+2]),h.push(ts[(d=c)>>18&63]+ts[d>>12&63]+ts[d>>6&63]+ts[63&d]);return h.join("")}function gu(f){if(2147483647<f)throw new RangeError('The value "'+
f+'" is invalid for option "size"');f=new Uint8Array(f);return Object.setPrototypeOf(f,ue.prototype),f}function ue(f,c,k){if("number"==typeof f){if("string"==typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return kL(f)}return GV(f,c,k)}function GV(f,c,k){if("string"==typeof f)return function(h,n){"string"==typeof n&&""!==n||(n="utf8");if(!ue.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var b=0|HV(h,n),e=gu(b);h=e.write(h,n);h!==b&&(e=
e.slice(0,h));return e}(f,c);if(ArrayBuffer.isView(f))return lL(f);if(null==f)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(hu(f,ArrayBuffer)||f&&hu(f.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(hu(f,SharedArrayBuffer)||f&&hu(f.buffer,SharedArrayBuffer)))return l8(f,c,k);if("number"==typeof f)throw new TypeError('The "value" argument must not be of type number. Received type number');
var d=f.valueOf&&f.valueOf();if(null!=d&&d!==f)return ue.from(d,c,k);if(d=function(h){if(ue.isBuffer(h)){var n=0|mL(h.length),b=gu(n);return 0===b.length||h.copy(b,0,0,n),b}if(void 0!==h.length)return(n="number"!=typeof h.length)||(n=h.length,n=n!=n),n?gu(0):lL(h);if("Buffer"===h.type&&Array.isArray(h.data))return lL(h.data)}(f))return d;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof f[Symbol.toPrimitive])return ue.from(f[Symbol.toPrimitive]("string"),c,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof f);}function IV(f){if("number"!=typeof f)throw new TypeError('"size" argument must be of type number');if(0>f)throw new RangeError('The value "'+f+'" is invalid for option "size"');}function kL(f){return IV(f),gu(0>f?0:0|mL(f))}function lL(f){for(var c=0>f.length?0:0|mL(f.length),k=gu(c),d=0;d<c;d+=1)k[d]=255&f[d];return k}function l8(f,c,k){if(0>c||f.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<c+(k||0))throw new RangeError('"length" is outside of buffer bounds');
var d;return d=void 0===c&&void 0===k?new Uint8Array(f):void 0===k?new Uint8Array(f,c):new Uint8Array(f,c,k),Object.setPrototypeOf(d,ue.prototype),d}function mL(f){if(2147483647<=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return 0|f}function HV(f,c){if(ue.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||hu(f,ArrayBuffer))return f.byteLength;if("string"!=typeof f)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+
typeof f);var k=f.length,d=2<arguments.length&&!0===arguments[2];if(!d&&0===k)return 0;for(var h=!1;;)switch(c){case "ascii":case "latin1":case "binary":return k;case "utf8":case "utf-8":return nL(f).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*k;case "hex":return k>>>1;case "base64":return JV(f).length;default:if(h)return d?-1:nL(f).length;c=(""+c).toLowerCase();h=!0}}function m8(f,c,k){var d=!1;if(((void 0===c||0>c)&&(c=0),c>this.length)||((void 0===k||k>this.length)&&
(k=this.length),0>=k)||(k>>>=0)<=(c>>>=0))return"";for(f||(f="utf8");;)switch(f){case "hex":f=this.length;(!c||0>c)&&(c=0);(!k||0>k||k>f)&&(k=f);for(f="";c<k;++c)f+=n8[this[c]];return f;case "utf8":case "utf-8":return KV(this,c,k);case "ascii":f="";for(k=Math.min(this.length,k);c<k;++c)f+=String.fromCharCode(127&this[c]);return f;case "latin1":case "binary":f="";for(k=Math.min(this.length,k);c<k;++c)f+=String.fromCharCode(this[c]);return f;case "base64":return 0===c&&k===this.length?oL.fromByteArray(this):
oL.fromByteArray(this.slice(c,k));case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,k);k="";for(f=0;f<c.length;f+=2)k+=String.fromCharCode(c[f]+256*c[f+1]);return k;default:if(d)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase();d=!0}}function zx(f,c,k){var d=f[c];f[c]=f[k];f[k]=d}function LV(f,c,k,d,h){if(0===f.length)return-1;"string"==typeof k?(d=k,k=0):2147483647<k?k=2147483647:-2147483648>k&&(k=-2147483648);var n=k=+k;if(n!=n&&(k=h?0:f.length-1),0>k&&(k=f.length+
k),k>=f.length){if(h)return-1;k=f.length-1}else if(0>k){if(!h)return-1;k=0}if("string"==typeof c&&(c=ue.from(c,d)),ue.isBuffer(c))return 0===c.length?-1:MV(f,c,k,d,h);if("number"==typeof c)return c&=255,"function"==typeof Uint8Array.prototype.indexOf?h?Uint8Array.prototype.indexOf.call(f,c,k):Uint8Array.prototype.lastIndexOf.call(f,c,k):MV(f,[c],k,d,h);throw new TypeError("val must be string, number or Buffer");}function MV(f,c,k,d,h){function n(a,g){return 1===b?a[g]:a.readUInt16BE(g*b)}var b=1,
e=f.length,m=c.length;if(void 0!==d&&("ucs2"===(d=String(d).toLowerCase())||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>f.length||2>c.length)return-1;b=2;e/=2;m/=2;k/=2}if(h)for(d=-1;k<e;k++)if(n(f,k)===n(c,-1===d?0:k-d)){if(-1===d&&(d=k),k-d+1===m)return d*b}else-1!==d&&(k-=k-d),d=-1;else for(k+m>e&&(k=e-m);0<=k;k--){e=!0;for(d=0;d<m;d++)if(n(f,k+d)!==n(c,d)){e=!1;break}if(e)return k}return-1}function NV(f,c,k,d){for(var h=[],n=0;n<c.length;++n)h.push(255&c.charCodeAt(n));return ZF(h,f,k,d)}
function KV(f,c,k){k=Math.min(f.length,k);for(var d=[];c<k;){var h,n,b=f[c],e=null,m=239<b?4:223<b?3:191<b?2:1;if(c+m<=k)switch(m){case 1:128>b&&(e=b);break;case 2:128==(192&(h=f[c+1]))&&127<(n=(31&b)<<6|63&h)&&(e=n);break;case 3:h=f[c+1];var a=f[c+2];128==(192&h)&&128==(192&a)&&2047<(n=(15&b)<<12|(63&h)<<6|63&a)&&(55296>n||57343<n)&&(e=n);break;case 4:h=f[c+1];a=f[c+2];var g=f[c+3];128==(192&h)&&128==(192&a)&&128==(192&g)&&65535<(n=(15&b)<<18|(63&h)<<12|(63&a)<<6|63&g)&&1114112>n&&(e=n)}null===e?
(e=65533,m=1):65535<e&&(e-=65536,d.push(e>>>10&1023|55296),e=56320|1023&e);d.push(e);c+=m}f=d.length;if(4096>=f)d=String.fromCharCode.apply(String,d);else{k="";for(h=0;h<f;)k+=String.fromCharCode.apply(String,d.slice(h,h+=4096));d=k}return d}function Ul(f,c,k){if(0!=f%1||0>f)throw new RangeError("offset is not uint");if(f+c>k)throw new RangeError("Trying to access beyond buffer length");}function Sn(f,c,k,d,h,n){if(!ue.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');
if(c>h||c<n)throw new RangeError('"value" argument is out of bounds');if(k+d>f.length)throw new RangeError("Index out of range");}function OV(f,c,k,d,h,n){if(k+d>f.length)throw new RangeError("Index out of range");if(0>k)throw new RangeError("Index out of range");}function PV(f,c,k,d,h){return c=+c,k>>>=0,h||OV(f,0,k,4),Kz.write(f,c,k,d,23,4),k+4}function QV(f,c,k,d,h){return c=+c,k>>>=0,h||OV(f,0,k,8),Kz.write(f,c,k,d,52,8),k+8}function nL(f,c){var k;c=c||1/0;for(var d=f.length,h=null,n=[],b=0;b<
d;++b){if(55295<(k=f.charCodeAt(b))&&57344>k){if(!h){if(56319<k){-1<(c-=3)&&n.push(239,191,189);continue}if(b+1===d){-1<(c-=3)&&n.push(239,191,189);continue}h=k;continue}if(56320>k){-1<(c-=3)&&n.push(239,191,189);h=k;continue}k=65536+(h-55296<<10|k-56320)}else h&&-1<(c-=3)&&n.push(239,191,189);if(h=null,128>k){if(0>--c)break;n.push(k)}else if(2048>k){if(0>(c-=2))break;n.push(k>>6|192,63&k|128)}else if(65536>k){if(0>(c-=3))break;n.push(k>>12|224,k>>6&63|128,63&k|128)}else{if(!(1114112>k))throw Error("Invalid code point");
if(0>(c-=4))break;n.push(k>>18|240,k>>12&63|128,k>>6&63|128,63&k|128)}}return n}function JV(f){return oL.toByteArray(function(c){if(2>(c=(c=c.split("=")[0]).trim().replace(o8,"")).length)return"";for(;0!=c.length%4;)c+="=";return c}(f))}function ZF(f,c,k,d){for(var h=0;h<d&&!(h+k>=c.length||h>=f.length);++h)c[h+k]=f[h];return h}function hu(f,c){return f instanceof c||null!=f&&null!=f.constructor&&null!=f.constructor.name&&f.constructor.name===c.name}function RV(f,c){for(var k in f)c[k]=f[k]}function Ax(f,
c,k){return us(f,c,k)}function dC(f){switch(this.encoding=function(c){var k=function(d){if(!d)return"utf8";for(var h;;)switch(d){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return d;default:if(h)return;d=(""+d).toLowerCase();h=!0}}(c);if("string"!=typeof k&&(pL.isEncoding===SV||!SV(c)))throw Error("Unknown encoding: "+c);return k||c}(f),this.encoding){case "utf16le":this.text=
p8;this.end=q8;f=4;break;case "utf8":this.fillLast=r8;f=4;break;case "base64":this.text=s8;this.end=t8;f=3;break;default:return this.write=u8,this.end=v8,void 0}this.lastTotal=this.lastNeed=0;this.lastChar=pL.allocUnsafe(f)}function qL(f){return 127>=f?0:6==f>>5?2:14==f>>4?3:30==f>>3?4:2==f>>6?-1:-2}function r8(f){var c=this.lastTotal-this.lastNeed;a:if(128!=(192&f[0]))var k=(this.lastNeed=0,"\ufffd");else{if(1<this.lastNeed&&1<f.length){if(128!=(192&f[1])){k=(this.lastNeed=1,"\ufffd");break a}if(2<
this.lastNeed&&2<f.length&&128!=(192&f[2])){k=(this.lastNeed=2,"\ufffd");break a}}k=void 0}return void 0!==k?k:this.lastNeed<=f.length?(f.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(f.copy(this.lastChar,c,0,f.length),this.lastNeed-=f.length,void 0)}function p8(f,c){if(0==(f.length-c)%2){if(c=f.toString("utf16le",c)){var k=c.charCodeAt(c.length-1);if(55296<=k&&56319>=k)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=f[f.length-2],this.lastChar[1]=
f[f.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=f[f.length-1],f.toString("utf16le",c,f.length-1)}function q8(f){f=f&&f.length?this.write(f):"";return this.lastNeed?f+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):f}function s8(f,c){var k=(f.length-c)%3;return 0===k?f.toString("base64",c):(this.lastNeed=3-k,this.lastTotal=3,1===k?this.lastChar[0]=f[f.length-1]:(this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1]),f.toString("base64",
c,f.length-k))}function t8(f){f=f&&f.length?this.write(f):"";return this.lastNeed?f+this.lastChar.toString("base64",0,3-this.lastNeed):f}function u8(f){return f.toString(this.encoding)}function v8(f){return f&&f.length?this.write(f):""}function Gp(f,c,k){k||(k=Error);var d=function(h,n,b){return b.call(this,"string"==typeof c?c:c(h,n,b))||this};$jscomp.inherits(d,k);d.prototype.name=k.name;d.prototype.code=f;TV[f]=d}function UV(f,c){if(Array.isArray(f)){var k=f.length;return f=f.map(function(d){return String(d)}),
2<k?"one of "+c+" "+f.slice(0,k-1).join(", ")+", or "+f[k-1]:2===k?"one of "+c+" "+f[0]+" or "+f[1]:"of "+c+" "+f[0]}return"of "+c+" "+String(f)}function rL(f){try{if(!sL.localStorage)return!1}catch(c){return!1}f=sL.localStorage[f];return null!=f&&"true"===String(f).toLowerCase()}function VV(f,c){var k=Object.keys(f);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(f);c&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(f,h).enumerable}));k.push.apply(k,d)}return k}
function w8(f,c){for(var k=0;k<c.length;k++){var d=c[k];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(f,d.key,d)}}function WV(f,c){tL(f,c);$F(f)}function $F(f){f._writableState&&!f._writableState.emitClose||f._readableState&&!f._readableState.emitClose||f.emit("close")}function tL(f,c){f.emit("error",c)}function x8(){}function Jv(f,c,k){return c in f?Object.defineProperty(f,c,{value:k,enumerable:!0,configurable:!0,writable:!0}):f[c]=k,f}function Kv(f,
c){return{value:f,done:c}}function y8(f){var c=f[Lv];if(null!==c){var k=f[Bx].read();null!==k&&(f[Cx]=null,f[Lv]=null,f[Dx]=null,c(Kv(k,!1)))}}function z8(f){XV.nextTick(y8,f)}function YV(){function f(X,V,ha){z=z||eC();X=X||{};"boolean"!=typeof ha&&(ha=V instanceof z);this.objectMode=!!X.objectMode;ha&&(this.objectMode=this.objectMode||!!X.readableObjectMode);this.highWaterMark=O(this,X,"readableHighWaterMark",ha);this.buffer=new D;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;
this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==X.emitClose;this.autoDestroy=!!X.autoDestroy;this.destroyed=!1;this.defaultEncoding=X.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;X.encoding&&(P||(P=Lz.StringDecoder),this.decoder=new P(X.encoding),this.encoding=X.encoding)}function c(X){if(z=z||eC(),!(this instanceof c))return new c(X);
this._readableState=new f(X,this,this instanceof z);this.readable=!0;X&&("function"==typeof X.read&&(this._read=X.read),"function"==typeof X.destroy&&(this._destroy=X.destroy));B.call(this)}function k(X,V,ha,xa,yb){J("readableAddChunk",V);var ec,Nb=X._readableState;if(null===V)Nb.reading=!1,function(ac,Cc){if(J("onEofChunk"),!Cc.ended){if(Cc.decoder){var Hb=Cc.decoder.end();Hb&&Hb.length&&(Cc.buffer.push(Hb),Cc.length+=Cc.objectMode?1:Hb.length)}Cc.ended=!0;Cc.sync?n(ac):(Cc.needReadable=!1,Cc.emittedReadable||
(Cc.emittedReadable=!0,b(ac)))}}(X,Nb);else if(yb||(ec=function(ac,Cc){var Hb;var gd=Cc;G.isBuffer(gd)||gd instanceof E||"string"==typeof Cc||void 0===Cc||ac.objectMode||(Hb=new N("chunk",["string","Buffer","Uint8Array"],Cc));return Hb}(Nb,V)),ec)bb(X,ec);else if(Nb.objectMode||V&&0<V.length)if("string"==typeof V||Nb.objectMode||Object.getPrototypeOf(V)===G.prototype||(V=G.from(V)),xa)Nb.endEmitted?bb(X,new ma):d(X,Nb,V,!0);else if(Nb.ended)bb(X,new aa);else{if(Nb.destroyed)return!1;Nb.reading=!1;
Nb.decoder&&!ha?(V=Nb.decoder.write(V),Nb.objectMode||0!==V.length?d(X,Nb,V,!1):e(X,Nb)):d(X,Nb,V,!1)}else xa||(Nb.reading=!1,e(X,Nb));return!Nb.ended&&(Nb.length<Nb.highWaterMark||0===Nb.length)}function d(X,V,ha,xa){V.flowing&&0===V.length&&!V.sync?(V.awaitDrain=0,X.emit("data",ha)):(V.length+=V.objectMode?1:ha.length,xa?V.buffer.unshift(ha):V.buffer.push(ha),V.needReadable&&n(X));e(X,V)}function h(X,V){if(0>=X||0===V.length&&V.ended)X=0;else if(V.objectMode)X=1;else if(X!=X)X=V.flowing&&V.length?
V.buffer.head.data.length:V.length;else{if(X>V.highWaterMark){var ha=X;var xa=(1073741824<=ha?ha=1073741824:(ha--,ha|=ha>>>1,ha|=ha>>>2,ha|=ha>>>4,ha|=ha>>>8,ha|=ha>>>16,ha++),ha);V.highWaterMark=xa}X=X<=V.length?X:V.ended?V.length:(V.needReadable=!0,0)}return X}function n(X){var V=X._readableState;J("emitReadable",V.needReadable,V.emittedReadable);V.needReadable=!1;V.emittedReadable||(J("emitReadable",V.flowing),V.emittedReadable=!0,A.nextTick(b,X))}function b(X){var V=X._readableState;J("emitReadable_",
V.destroyed,V.length,V.ended);V.destroyed||!V.length&&!V.ended||(X.emit("readable"),V.emittedReadable=!1);V.needReadable=!V.flowing&&!V.ended&&V.length<=V.highWaterMark;q(X)}function e(X,V){V.readingMore||(V.readingMore=!0,A.nextTick(m,X,V))}function m(X,V){for(;!V.reading&&!V.ended&&(V.length<V.highWaterMark||V.flowing&&0===V.length);){var ha=V.length;if(J("maybeReadMore read 0"),X.read(0),ha===V.length)break}V.readingMore=!1}function a(X){var V=X._readableState;V.readableListening=0<X.listenerCount("readable");
V.resumeScheduled&&!V.paused?V.flowing=!0:0<X.listenerCount("data")&&X.resume()}function g(X){J("readable nexttick read 0");X.read(0)}function l(X,V){J("resume",V.reading);V.reading||X.read(0);V.resumeScheduled=!1;X.emit("resume");q(X);V.flowing&&!V.reading&&X.read(0)}function q(X){var V=X._readableState;for(J("flow",V.flowing);V.flowing&&null!==X.read(););}function r(X,V){return 0===V.length?null:(V.objectMode?ha=V.buffer.shift():!X||X>=V.length?(ha=V.decoder?V.buffer.join(""):1===V.buffer.length?
V.buffer.first():V.buffer.concat(V.length),V.buffer.clear()):ha=V.buffer.consume(X,V.decoder),ha);var ha}function u(X){var V=X._readableState;J("endReadable",V.endEmitted);V.endEmitted||(V.ended=!0,A.nextTick(v,V,X))}function v(X,V){if(J("endReadableNT",X.endEmitted,X.length),!X.endEmitted&&0===X.length&&(X.endEmitted=!0,V.readable=!1,V.emit("end"),X.autoDestroy))X=V._writableState,(!X||X.autoDestroy&&X.finished)&&V.destroy()}function y(X,V){for(var ha=0,xa=X.length;ha<xa;ha++)if(X[ha]===V)return ha;
return-1}if(ZV)return uL;ZV=!0;var z,A=zi;uL=c;c.ReadableState=f;vs.EventEmitter;var B=aG,G=Rh.Buffer,E=A8.Uint8Array||function(){},K=Xg;var J=K&&K.debuglog?K.debuglog("stream"):function(){};var P,ea,ra,D=B8;K=$V;var O=aW.getHighWaterMark,L=Qq.codes,N=L.ERR_INVALID_ARG_TYPE,aa=L.ERR_STREAM_PUSH_AFTER_EOF,Y=L.ERR_METHOD_NOT_IMPLEMENTED,ma=L.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;zh(c,B);var bb=K.errorOrDestroy,Qa=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",
{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(X){this._readableState&&(this._readableState.destroyed=X)}});c.prototype.destroy=K.destroy;c.prototype._undestroy=K.undestroy;c.prototype._destroy=function(X,V){V(X)};c.prototype.push=function(X,V){var ha,xa=this._readableState;return xa.objectMode?ha=!0:"string"==typeof X&&((V=V||xa.defaultEncoding)!==xa.encoding&&(X=G.from(X,V),V=""),ha=!0),k(this,X,V,!1,ha)};c.prototype.unshift=function(X){return k(this,
X,null,!0,!1)};c.prototype.isPaused=function(){return!1===this._readableState.flowing};c.prototype.setEncoding=function(X){P||(P=Lz.StringDecoder);X=new P(X);this._readableState.decoder=X;this._readableState.encoding=this._readableState.decoder.encoding;for(var V=this._readableState.buffer.head,ha="";null!==V;)ha+=X.write(V.data),V=V.next;return this._readableState.buffer.clear(),""!==ha&&this._readableState.buffer.push(ha),this._readableState.length=ha.length,this};return c.prototype.read=function(X){J("read",
X);X=parseInt(X,10);var V=this._readableState,ha=X;if(0!==X&&(V.emittedReadable=!1),0===X&&V.needReadable&&((0!==V.highWaterMark?V.length>=V.highWaterMark:0<V.length)||V.ended))return J("read: emitReadable",V.length,V.ended),0===V.length&&V.ended?u(this):n(this),null;if(0===(X=h(X,V))&&V.ended)return 0===V.length&&u(this),null;var xa,yb=V.needReadable;return J("need readable",yb),(0===V.length||V.length-X<V.highWaterMark)&&J("length less than watermark",yb=!0),V.ended||V.reading?J("reading or ended",
!1):yb&&(J("do read"),V.reading=!0,V.sync=!0,0===V.length&&(V.needReadable=!0),this._read(V.highWaterMark),V.sync=!1,V.reading||(X=h(ha,V))),null===(xa=0<X?r(X,V):null)?(V.needReadable=V.length<=V.highWaterMark,X=0):(V.length-=X,V.awaitDrain=0),0===V.length&&(V.ended||(V.needReadable=!0),ha!==X&&V.ended&&u(this)),null!==xa&&this.emit("data",xa),xa},c.prototype._read=function(X){bb(this,new Y("_read()"))},c.prototype.pipe=function(X,V){function ha(na,Aa){J("onunpipe");na===Hb&&Aa&&!1===Aa.hasUnpiped&&
(Aa.hasUnpiped=!0,J("cleanup"),X.removeListener("close",Nb),X.removeListener("finish",ac),X.removeListener("drain",yd),X.removeListener("error",ec),X.removeListener("unpipe",ha),Hb.removeListener("end",xa),Hb.removeListener("end",Cc),Hb.removeListener("data",yb),U=!0,!gd.awaitDrain||X._writableState&&!X._writableState.needDrain||yd())}function xa(){J("onend");X.end()}function yb(na){J("ondata");na=X.write(na);J("dest.write",na);!1===na&&((1===gd.pipesCount&&gd.pipes===X||1<gd.pipesCount&&-1!==y(gd.pipes,
X))&&!U&&(J("false write response, pause",gd.awaitDrain),gd.awaitDrain++),Hb.pause())}function ec(na){J("onerror",na);Cc();X.removeListener("error",ec);0===X.listeners("error").length&&bb(X,na)}function Nb(){X.removeListener("finish",ac);Cc()}function ac(){J("onfinish");X.removeListener("close",Nb);Cc()}function Cc(){J("unpipe");Hb.unpipe(X)}var Hb=this,gd=this._readableState;switch(gd.pipesCount){case 0:gd.pipes=X;break;case 1:gd.pipes=[gd.pipes,X];break;default:gd.pipes.push(X)}gd.pipesCount+=1;
J("pipe count=%d opts=%j",gd.pipesCount,V);V=V&&!1===V.end||X===A.stdout||X===A.stderr?Cc:xa;gd.endEmitted?A.nextTick(V):Hb.once("end",V);X.on("unpipe",ha);var yd=function(na){return function(){var Aa=na._readableState;J("pipeOnDrain",Aa.awaitDrain);Aa.awaitDrain&&Aa.awaitDrain--;0===Aa.awaitDrain&&na.listeners("data").length&&(Aa.flowing=!0,q(na))}}(Hb);X.on("drain",yd);var U=!1;return Hb.on("data",yb),function(na,Aa,hb){if("function"==typeof na.prependListener)return na.prependListener(Aa,hb);na._events&&
na._events[Aa]?Array.isArray(na._events[Aa])?na._events[Aa].unshift(hb):na._events[Aa]=[hb,na._events[Aa]]:na.on(Aa,hb)}(X,"error",ec),X.once("close",Nb),X.once("finish",ac),X.emit("pipe",Hb),gd.flowing||(J("pipe resume"),Hb.resume()),X},c.prototype.unpipe=function(X){var V=this._readableState,ha={hasUnpiped:!1};if(0===V.pipesCount)return this;if(1===V.pipesCount)return X&&X!==V.pipes||(X||(X=V.pipes),V.pipes=null,V.pipesCount=0,V.flowing=!1,X&&X.emit("unpipe",this,ha)),this;if(!X){X=V.pipes;ha=V.pipesCount;
V.pipes=null;V.pipesCount=0;V.flowing=!1;for(V=0;V<ha;V++)X[V].emit("unpipe",this,{hasUnpiped:!1});return this}var xa=y(V.pipes,X);return-1===xa||(V.pipes.splice(xa,1),--V.pipesCount,1===V.pipesCount&&(V.pipes=V.pipes[0]),X.emit("unpipe",this,ha)),this},c.prototype.on=function(X,V){V=B.prototype.on.call(this,X,V);var ha=this._readableState;return"data"===X?(ha.readableListening=0<this.listenerCount("readable"),!1!==ha.flowing&&this.resume()):"readable"===X&&(ha.endEmitted||ha.readableListening||(ha.readableListening=
ha.needReadable=!0,ha.flowing=!1,ha.emittedReadable=!1,J("on readable",ha.length,ha.reading),ha.length?n(this):ha.reading||A.nextTick(g,this))),V},c.prototype.addListener=c.prototype.on,c.prototype.removeListener=function(X,V){V=B.prototype.removeListener.call(this,X,V);return"readable"===X&&A.nextTick(a,this),V},c.prototype.removeAllListeners=function(X){var V=B.prototype.removeAllListeners.apply(this,arguments);return"readable"!==X&&void 0!==X||A.nextTick(a,this),V},c.prototype.resume=function(){var X=
this._readableState;X.flowing||(J("resume"),X.flowing=!X.readableListening,X.resumeScheduled||(X.resumeScheduled=!0,A.nextTick(l,this,X)));return X.paused=!1,this},c.prototype.pause=function(){return J("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(J("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=function(X){var V=this,ha=this._readableState,xa=!1,yb;for(yb in X.on("end",function(){if(J("wrapped end"),
ha.decoder&&!ha.ended){var ec=ha.decoder.end();ec&&ec.length&&V.push(ec)}V.push(null)}),X.on("data",function(ec){(J("wrapped data"),ha.decoder&&(ec=ha.decoder.write(ec)),ha.objectMode&&null==ec)||(ha.objectMode||ec&&ec.length)&&(V.push(ec)||(xa=!0,X.pause()))}),X)void 0===this[yb]&&"function"==typeof X[yb]&&(this[yb]=function(ec){return function(){return X[ec].apply(X,arguments)}}(yb));for(yb=0;yb<Qa.length;yb++)X.on(Qa[yb],this.emit.bind(this,Qa[yb]));return this._read=function(ec){J("wrapped _read",
ec);xa&&(xa=!1,X.resume())},this},"function"==typeof Symbol&&(c.prototype[Symbol.asyncIterator]=function(){return void 0===ea&&(ea=C8),ea(this)}),Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(c.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},
set:function(X){this._readableState&&(this._readableState.flowing=X)}}),c._fromList=r,Object.defineProperty(c.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(c.from=function(X,V){return void 0===ra&&(ra=bW),ra(c,X,V)}),uL}function D8(){function f(L){var N=this;this.entry=this.next=null;this.finish=function(){var aa=N.entry;for(N.entry=null;aa;){var Y=aa.callback;L.pendingcb--;Y(void 0);aa=aa.next}L.corkedRequestsFree.next=N;
!0}}function c(){}function k(L,N,aa){g=g||eC();L=L||{};"boolean"!=typeof aa&&(aa=N instanceof g);this.objectMode=!!L.objectMode;aa&&(this.objectMode=this.objectMode||!!L.writableObjectMode);this.highWaterMark=A(this,L,"writableHighWaterMark",aa);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==L.decodeStrings;this.defaultEncoding=L.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;
this.onwrite=function(Y){!function(ma,bb){var Qa=ma._writableState,X=Qa.sync,V=Qa.writecb;if("function"!=typeof V)throw new K;(function(ha){ha.writing=!1;ha.writecb=null;ha.length-=ha.writelen;ha.writelen=0}(Qa),bb)?!function(ha,xa,yb,ec,Nb){--xa.pendingcb;yb?(l.nextTick(Nb,ec),l.nextTick(a,ha,xa),ha._writableState.errorEmitted=!0,O(ha,ec)):(Nb(ec),ha._writableState.errorEmitted=!0,O(ha,ec),a(ha,xa))}(ma,Qa,X,bb,V):((bb=e(Qa)||ma.destroyed)||Qa.corked||Qa.bufferProcessing||!Qa.bufferedRequest||b(ma,
Qa),X?l.nextTick(n,ma,Qa,bb,V):n(ma,Qa,bb,V))}(N,Y)};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==L.emitClose;this.autoDestroy=!!L.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new f(this)}function d(L){var N=this instanceof(g=g||eC());if(!N&&!y.call(d,this))return new d(L);this._writableState=new k(L,this,N);this.writable=!0;L&&("function"==typeof L.write&&(this._write=
L.write),"function"==typeof L.writev&&(this._writev=L.writev),"function"==typeof L.destroy&&(this._destroy=L.destroy),"function"==typeof L.final&&(this._final=L.final));r.call(this)}function h(L,N,aa,Y,ma,bb,Qa){N.writelen=Y;N.writecb=Qa;N.writing=!0;N.sync=!0;N.destroyed?N.onwrite(new P("write")):aa?L._writev(ma,N.onwrite):L._write(ma,bb,N.onwrite);N.sync=!1}function n(L,N,aa,Y){aa||(0===N.length&&N.needDrain&&(N.needDrain=!1,L.emit("drain")),!0);N.pendingcb--;Y();a(L,N)}function b(L,N){N.bufferProcessing=
!0;var aa=N.bufferedRequest;if(L._writev&&aa&&aa.next){var Y=Array(N.bufferedRequestCount),ma=N.corkedRequestsFree;ma.entry=aa;for(var bb=0,Qa=!0;aa;)Y[bb]=aa,aa.isBuf||(Qa=!1),aa=aa.next,bb+=1;Y.allBuffers=Qa;h(L,N,!0,N.length,Y,"",ma.finish);N.pendingcb++;N.lastBufferedRequest=null;ma.next?(N.corkedRequestsFree=ma.next,ma.next=null):N.corkedRequestsFree=new f(N);N.bufferedRequestCount=0}else{for(;aa&&(Y=aa.chunk,h(L,N,!1,N.objectMode?1:Y.length,Y,aa.encoding,aa.callback),aa=aa.next,N.bufferedRequestCount--,
!N.writing););null===aa&&(N.lastBufferedRequest=null)}N.bufferedRequest=aa;N.bufferProcessing=!1}function e(L){return L.ending&&0===L.length&&null===L.bufferedRequest&&!L.finished&&!L.writing}function m(L,N){L._final(function(aa){N.pendingcb--;aa&&O(L,aa);N.prefinished=!0;L.emit("prefinish");a(L,N)})}function a(L,N){var aa=e(N),Y;if(Y=aa)N.prefinished||N.finalCalled||("function"!=typeof L._final||N.destroyed?(N.prefinished=!0,L.emit("prefinish")):(N.pendingcb++,N.finalCalled=!0,l.nextTick(m,L,N))),
Y=(!0,0===N.pendingcb&&(N.finished=!0,L.emit("finish"),N.autoDestroy));Y&&(N=L._readableState,(!N||N.autoDestroy&&N.endEmitted)&&L.destroy());return aa}if(cW)return vL;cW=!0;var g,l=zi;vL=d;d.WritableState=k;var q={deprecate:dW},r=aG,u=Rh.Buffer,v=E8.Uint8Array||function(){},y,z=$V,A=aW.getHighWaterMark,B=Qq.codes,G=B.ERR_INVALID_ARG_TYPE,E=B.ERR_METHOD_NOT_IMPLEMENTED,K=B.ERR_MULTIPLE_CALLBACK,J=B.ERR_STREAM_CANNOT_PIPE,P=B.ERR_STREAM_DESTROYED,ea=B.ERR_STREAM_NULL_VALUES,ra=B.ERR_STREAM_WRITE_AFTER_END,
D=B.ERR_UNKNOWN_ENCODING,O=z.errorOrDestroy;return zh(d,r),k.prototype.getBuffer=function(){for(var L=this.bufferedRequest,N=[];L;)N.push(L),L=L.next;return N},function(){try{Object.defineProperty(k.prototype,"buffer",{get:q.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(L){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(y=Function.prototype[Symbol.hasInstance],
Object.defineProperty(d,Symbol.hasInstance,{value:function(L){return!!y.call(this,L)||this===d&&L&&L._writableState instanceof k}})):y=function(L){return L instanceof this},d.prototype.pipe=function(){O(this,new J)},d.prototype.write=function(L,N,aa){var Y,ma=this._writableState,bb=!1,Qa=!ma.objectMode&&(Y=L,u.isBuffer(Y)||Y instanceof v);return Qa&&!u.isBuffer(L)&&(L=u.from(L)),"function"==typeof N&&(aa=N,N=null),Qa?N="buffer":N||(N=ma.defaultEncoding),"function"!=typeof aa&&(aa=c),ma.ending?function(X,
V){var ha=new ra;O(X,ha);l.nextTick(V,ha)}(this,aa):(Qa||function(X,V,ha,xa){var yb;return null===ha?yb=new ea:"string"==typeof ha||V.objectMode||(yb=new G("chunk",["string","Buffer"],ha)),!yb||(O(X,yb),l.nextTick(xa,yb),!1)}(this,ma,L,aa))&&(ma.pendingcb++,bb=function(X,V,ha,xa,yb,ec){if(!ha){var Nb=xa;V.objectMode||!1===V.decodeStrings||"string"!=typeof Nb||(Nb=u.from(Nb,yb));xa!==Nb&&(ha=!0,yb="buffer",xa=Nb)}var ac=V.objectMode?1:xa.length;V.length+=ac;(Nb=V.length<V.highWaterMark)||(V.needDrain=
!0);V.writing||V.corked?(X=V.lastBufferedRequest,V.lastBufferedRequest={chunk:xa,encoding:yb,isBuf:ha,callback:ec,next:null},X?X.next=V.lastBufferedRequest:V.bufferedRequest=V.lastBufferedRequest,V.bufferedRequestCount+=1):h(X,V,!1,ac,xa,yb,ec);return Nb}(this,ma,Qa,L,N,aa)),bb},d.prototype.cork=function(){this._writableState.corked++},d.prototype.uncork=function(){var L=this._writableState;L.corked&&(L.corked--,L.writing||L.corked||L.bufferProcessing||!L.bufferedRequest||b(this,L))},d.prototype.setDefaultEncoding=
function(L){if("string"==typeof L&&(L=L.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((L+"").toLowerCase())))throw new D(L);return this._writableState.defaultEncoding=L,this},Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),
d.prototype._write=function(L,N,aa){aa(new E("_write()"))},d.prototype._writev=null,d.prototype.end=function(L,N,aa){var Y=this._writableState;"function"==typeof L?(aa=L,L=null,N=null):"function"==typeof N&&(aa=N,N=null);null!=L&&this.write(L,N);Y.corked&&(Y.corked=1,this.uncork());Y.ending||(L=aa,Y.ending=!0,a(this,Y),L&&(Y.finished?l.nextTick(L):this.once("finish",L)),Y.ended=!0,this.writable=!1);return this},Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),
Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(L){this._writableState&&(this._writableState.destroyed=L)}}),d.prototype.destroy=z.destroy,d.prototype._undestroy=z.undestroy,d.prototype._destroy=function(L,N){N(L)},vL}function eC(){function f(a){if(!(this instanceof f))return new f(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&
(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||d.nextTick(k,this)}function k(a){a.end()}if(eW)return wL;eW=!0;var d=zi,h=Object.keys||function(a){var g=[],l;for(l in a)g.push(l);return g};wL=f;var n=YV(),b=D8();zh(f,n);h=h(b.prototype);for(var e=0;e<h.length;e++){var m=h[e];f.prototype[m]||(f.prototype[m]=b.prototype[m])}return Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),
Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&
void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}}),wL}function F8(){}function fW(f,c){var k=Object.keys(f);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(f);c&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(f,h).enumerable}));k.push.apply(k,d)}return k}function G8(f,c){for(var k=0;k<c.length;k++){var d=c[k];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(f,d.key,
d)}}function gW(f,c){xL(f,c);bG(f)}function bG(f){f._writableState&&!f._writableState.emitClose||f._readableState&&!f._readableState.emitClose||f.emit("close")}function xL(f,c){f.emit("error",c)}function Mv(f,c,k){return c in f?Object.defineProperty(f,c,{value:k,enumerable:!0,configurable:!0,writable:!0}):f[c]=k,f}function Nv(f,c){return{value:f,done:c}}function H8(f){var c=f[Ov];if(null!==c){var k=f[Ex].read();null!==k&&(f[Fx]=null,f[Ov]=null,f[Gx]=null,c(Nv(k,!1)))}}function I8(f){hW.nextTick(H8,
f)}function J8(){function f(X,V,ha){z=z||cG();X=X||{};"boolean"!=typeof ha&&(ha=V instanceof z);this.objectMode=!!X.objectMode;ha&&(this.objectMode=this.objectMode||!!X.readableObjectMode);this.highWaterMark=O(this,X,"readableHighWaterMark",ha);this.buffer=new D;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=
!1!==X.emitClose;this.autoDestroy=!!X.autoDestroy;this.destroyed=!1;this.defaultEncoding=X.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;X.encoding&&(P||(P=Lz.StringDecoder),this.decoder=new P(X.encoding),this.encoding=X.encoding)}function c(X){if(z=z||cG(),!(this instanceof c))return new c(X);this._readableState=new f(X,this,this instanceof z);this.readable=!0;X&&("function"==typeof X.read&&(this._read=X.read),"function"==typeof X.destroy&&(this._destroy=
X.destroy));B.call(this)}function k(X,V,ha,xa,yb){J("readableAddChunk",V);var ec,Nb=X._readableState;if(null===V)Nb.reading=!1,function(ac,Cc){if(J("onEofChunk"),!Cc.ended){if(Cc.decoder){var Hb=Cc.decoder.end();Hb&&Hb.length&&(Cc.buffer.push(Hb),Cc.length+=Cc.objectMode?1:Hb.length)}Cc.ended=!0;Cc.sync?n(ac):(Cc.needReadable=!1,Cc.emittedReadable||(Cc.emittedReadable=!0,b(ac)))}}(X,Nb);else if(yb||(ec=function(ac,Cc){var Hb;var gd=Cc;G.isBuffer(gd)||gd instanceof E||"string"==typeof Cc||void 0===
Cc||ac.objectMode||(Hb=new N("chunk",["string","Buffer","Uint8Array"],Cc));return Hb}(Nb,V)),ec)bb(X,ec);else if(Nb.objectMode||V&&0<V.length)if("string"==typeof V||Nb.objectMode||Object.getPrototypeOf(V)===G.prototype||(V=G.from(V)),xa)Nb.endEmitted?bb(X,new ma):d(X,Nb,V,!0);else if(Nb.ended)bb(X,new aa);else{if(Nb.destroyed)return!1;Nb.reading=!1;Nb.decoder&&!ha?(V=Nb.decoder.write(V),Nb.objectMode||0!==V.length?d(X,Nb,V,!1):e(X,Nb)):d(X,Nb,V,!1)}else xa||(Nb.reading=!1,e(X,Nb));return!Nb.ended&&
(Nb.length<Nb.highWaterMark||0===Nb.length)}function d(X,V,ha,xa){V.flowing&&0===V.length&&!V.sync?(V.awaitDrain=0,X.emit("data",ha)):(V.length+=V.objectMode?1:ha.length,xa?V.buffer.unshift(ha):V.buffer.push(ha),V.needReadable&&n(X));e(X,V)}function h(X,V){if(0>=X||0===V.length&&V.ended)X=0;else if(V.objectMode)X=1;else if(X!=X)X=V.flowing&&V.length?V.buffer.head.data.length:V.length;else{if(X>V.highWaterMark){var ha=X;var xa=(1073741824<=ha?ha=1073741824:(ha--,ha|=ha>>>1,ha|=ha>>>2,ha|=ha>>>4,ha|=
ha>>>8,ha|=ha>>>16,ha++),ha);V.highWaterMark=xa}X=X<=V.length?X:V.ended?V.length:(V.needReadable=!0,0)}return X}function n(X){var V=X._readableState;J("emitReadable",V.needReadable,V.emittedReadable);V.needReadable=!1;V.emittedReadable||(J("emitReadable",V.flowing),V.emittedReadable=!0,A.nextTick(b,X))}function b(X){var V=X._readableState;J("emitReadable_",V.destroyed,V.length,V.ended);V.destroyed||!V.length&&!V.ended||(X.emit("readable"),V.emittedReadable=!1);V.needReadable=!V.flowing&&!V.ended&&
V.length<=V.highWaterMark;q(X)}function e(X,V){V.readingMore||(V.readingMore=!0,A.nextTick(m,X,V))}function m(X,V){for(;!V.reading&&!V.ended&&(V.length<V.highWaterMark||V.flowing&&0===V.length);){var ha=V.length;if(J("maybeReadMore read 0"),X.read(0),ha===V.length)break}V.readingMore=!1}function a(X){var V=X._readableState;V.readableListening=0<X.listenerCount("readable");V.resumeScheduled&&!V.paused?V.flowing=!0:0<X.listenerCount("data")&&X.resume()}function g(X){J("readable nexttick read 0");X.read(0)}
function l(X,V){J("resume",V.reading);V.reading||X.read(0);V.resumeScheduled=!1;X.emit("resume");q(X);V.flowing&&!V.reading&&X.read(0)}function q(X){var V=X._readableState;for(J("flow",V.flowing);V.flowing&&null!==X.read(););}function r(X,V){return 0===V.length?null:(V.objectMode?ha=V.buffer.shift():!X||X>=V.length?(ha=V.decoder?V.buffer.join(""):1===V.buffer.length?V.buffer.first():V.buffer.concat(V.length),V.buffer.clear()):ha=V.buffer.consume(X,V.decoder),ha);var ha}function u(X){var V=X._readableState;
J("endReadable",V.endEmitted);V.endEmitted||(V.ended=!0,A.nextTick(v,V,X))}function v(X,V){if(J("endReadableNT",X.endEmitted,X.length),!X.endEmitted&&0===X.length&&(X.endEmitted=!0,V.readable=!1,V.emit("end"),X.autoDestroy))X=V._writableState,(!X||X.autoDestroy&&X.finished)&&V.destroy()}function y(X,V){for(var ha=0,xa=X.length;ha<xa;ha++)if(X[ha]===V)return ha;return-1}if(iW)return yL;iW=!0;var z,A=zi;yL=c;c.ReadableState=f;vs.EventEmitter;var B=aG,G=Rh.Buffer,E=K8.Uint8Array||function(){},K=Xg;var J=
K&&K.debuglog?K.debuglog("stream"):function(){};var P,ea,ra,D=L8;K=jW;var O=kW.getHighWaterMark,L=Qq.codes,N=L.ERR_INVALID_ARG_TYPE,aa=L.ERR_STREAM_PUSH_AFTER_EOF,Y=L.ERR_METHOD_NOT_IMPLEMENTED,ma=L.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;zh(c,B);var bb=K.errorOrDestroy,Qa=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(X){this._readableState&&(this._readableState.destroyed=
X)}});c.prototype.destroy=K.destroy;c.prototype._undestroy=K.undestroy;c.prototype._destroy=function(X,V){V(X)};c.prototype.push=function(X,V){var ha,xa=this._readableState;return xa.objectMode?ha=!0:"string"==typeof X&&((V=V||xa.defaultEncoding)!==xa.encoding&&(X=G.from(X,V),V=""),ha=!0),k(this,X,V,!1,ha)};c.prototype.unshift=function(X){return k(this,X,null,!0,!1)};c.prototype.isPaused=function(){return!1===this._readableState.flowing};c.prototype.setEncoding=function(X){P||(P=Lz.StringDecoder);
X=new P(X);this._readableState.decoder=X;this._readableState.encoding=this._readableState.decoder.encoding;for(var V=this._readableState.buffer.head,ha="";null!==V;)ha+=X.write(V.data),V=V.next;return this._readableState.buffer.clear(),""!==ha&&this._readableState.buffer.push(ha),this._readableState.length=ha.length,this};return c.prototype.read=function(X){J("read",X);X=parseInt(X,10);var V=this._readableState,ha=X;if(0!==X&&(V.emittedReadable=!1),0===X&&V.needReadable&&((0!==V.highWaterMark?V.length>=
V.highWaterMark:0<V.length)||V.ended))return J("read: emitReadable",V.length,V.ended),0===V.length&&V.ended?u(this):n(this),null;if(0===(X=h(X,V))&&V.ended)return 0===V.length&&u(this),null;var xa,yb=V.needReadable;return J("need readable",yb),(0===V.length||V.length-X<V.highWaterMark)&&J("length less than watermark",yb=!0),V.ended||V.reading?J("reading or ended",!1):yb&&(J("do read"),V.reading=!0,V.sync=!0,0===V.length&&(V.needReadable=!0),this._read(V.highWaterMark),V.sync=!1,V.reading||(X=h(ha,
V))),null===(xa=0<X?r(X,V):null)?(V.needReadable=V.length<=V.highWaterMark,X=0):(V.length-=X,V.awaitDrain=0),0===V.length&&(V.ended||(V.needReadable=!0),ha!==X&&V.ended&&u(this)),null!==xa&&this.emit("data",xa),xa},c.prototype._read=function(X){bb(this,new Y("_read()"))},c.prototype.pipe=function(X,V){function ha(na,Aa){J("onunpipe");na===Hb&&Aa&&!1===Aa.hasUnpiped&&(Aa.hasUnpiped=!0,J("cleanup"),X.removeListener("close",Nb),X.removeListener("finish",ac),X.removeListener("drain",yd),X.removeListener("error",
ec),X.removeListener("unpipe",ha),Hb.removeListener("end",xa),Hb.removeListener("end",Cc),Hb.removeListener("data",yb),U=!0,!gd.awaitDrain||X._writableState&&!X._writableState.needDrain||yd())}function xa(){J("onend");X.end()}function yb(na){J("ondata");na=X.write(na);J("dest.write",na);!1===na&&((1===gd.pipesCount&&gd.pipes===X||1<gd.pipesCount&&-1!==y(gd.pipes,X))&&!U&&(J("false write response, pause",gd.awaitDrain),gd.awaitDrain++),Hb.pause())}function ec(na){J("onerror",na);Cc();X.removeListener("error",
ec);0===X.listeners("error").length&&bb(X,na)}function Nb(){X.removeListener("finish",ac);Cc()}function ac(){J("onfinish");X.removeListener("close",Nb);Cc()}function Cc(){J("unpipe");Hb.unpipe(X)}var Hb=this,gd=this._readableState;switch(gd.pipesCount){case 0:gd.pipes=X;break;case 1:gd.pipes=[gd.pipes,X];break;default:gd.pipes.push(X)}gd.pipesCount+=1;J("pipe count=%d opts=%j",gd.pipesCount,V);V=V&&!1===V.end||X===A.stdout||X===A.stderr?Cc:xa;gd.endEmitted?A.nextTick(V):Hb.once("end",V);X.on("unpipe",
ha);var yd=function(na){return function(){var Aa=na._readableState;J("pipeOnDrain",Aa.awaitDrain);Aa.awaitDrain&&Aa.awaitDrain--;0===Aa.awaitDrain&&na.listeners("data").length&&(Aa.flowing=!0,q(na))}}(Hb);X.on("drain",yd);var U=!1;return Hb.on("data",yb),function(na,Aa,hb){if("function"==typeof na.prependListener)return na.prependListener(Aa,hb);na._events&&na._events[Aa]?Array.isArray(na._events[Aa])?na._events[Aa].unshift(hb):na._events[Aa]=[hb,na._events[Aa]]:na.on(Aa,hb)}(X,"error",ec),X.once("close",
Nb),X.once("finish",ac),X.emit("pipe",Hb),gd.flowing||(J("pipe resume"),Hb.resume()),X},c.prototype.unpipe=function(X){var V=this._readableState,ha={hasUnpiped:!1};if(0===V.pipesCount)return this;if(1===V.pipesCount)return X&&X!==V.pipes||(X||(X=V.pipes),V.pipes=null,V.pipesCount=0,V.flowing=!1,X&&X.emit("unpipe",this,ha)),this;if(!X){X=V.pipes;ha=V.pipesCount;V.pipes=null;V.pipesCount=0;V.flowing=!1;for(V=0;V<ha;V++)X[V].emit("unpipe",this,{hasUnpiped:!1});return this}var xa=y(V.pipes,X);return-1===
xa||(V.pipes.splice(xa,1),--V.pipesCount,1===V.pipesCount&&(V.pipes=V.pipes[0]),X.emit("unpipe",this,ha)),this},c.prototype.on=function(X,V){V=B.prototype.on.call(this,X,V);var ha=this._readableState;return"data"===X?(ha.readableListening=0<this.listenerCount("readable"),!1!==ha.flowing&&this.resume()):"readable"===X&&(ha.endEmitted||ha.readableListening||(ha.readableListening=ha.needReadable=!0,ha.flowing=!1,ha.emittedReadable=!1,J("on readable",ha.length,ha.reading),ha.length?n(this):ha.reading||
A.nextTick(g,this))),V},c.prototype.addListener=c.prototype.on,c.prototype.removeListener=function(X,V){V=B.prototype.removeListener.call(this,X,V);return"readable"===X&&A.nextTick(a,this),V},c.prototype.removeAllListeners=function(X){var V=B.prototype.removeAllListeners.apply(this,arguments);return"readable"!==X&&void 0!==X||A.nextTick(a,this),V},c.prototype.resume=function(){var X=this._readableState;X.flowing||(J("resume"),X.flowing=!X.readableListening,X.resumeScheduled||(X.resumeScheduled=!0,
A.nextTick(l,this,X)));return X.paused=!1,this},c.prototype.pause=function(){return J("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(J("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=function(X){var V=this,ha=this._readableState,xa=!1,yb;for(yb in X.on("end",function(){if(J("wrapped end"),ha.decoder&&!ha.ended){var ec=ha.decoder.end();ec&&ec.length&&V.push(ec)}V.push(null)}),X.on("data",function(ec){(J("wrapped data"),
ha.decoder&&(ec=ha.decoder.write(ec)),ha.objectMode&&null==ec)||(ha.objectMode||ec&&ec.length)&&(V.push(ec)||(xa=!0,X.pause()))}),X)void 0===this[yb]&&"function"==typeof X[yb]&&(this[yb]=function(ec){return function(){return X[ec].apply(X,arguments)}}(yb));for(yb=0;yb<Qa.length;yb++)X.on(Qa[yb],this.emit.bind(this,Qa[yb]));return this._read=function(ec){J("wrapped _read",ec);xa&&(xa=!1,X.resume())},this},"function"==typeof Symbol&&(c.prototype[Symbol.asyncIterator]=function(){return void 0===ea&&
(ea=M8),ea(this)}),Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(c.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(X){this._readableState&&(this._readableState.flowing=X)}}),c._fromList=r,Object.defineProperty(c.prototype,
"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(c.from=function(X,V){return void 0===ra&&(ra=bW),ra(c,X,V)}),yL}function lW(){function f(L){var N=this;this.entry=this.next=null;this.finish=function(){var aa=N.entry;for(N.entry=null;aa;){var Y=aa.callback;L.pendingcb--;Y(void 0);aa=aa.next}L.corkedRequestsFree.next=N;!0}}function c(){}function k(L,N,aa){g=g||cG();L=L||{};"boolean"!=typeof aa&&(aa=N instanceof g);this.objectMode=!!L.objectMode;
aa&&(this.objectMode=this.objectMode||!!L.writableObjectMode);this.highWaterMark=A(this,L,"writableHighWaterMark",aa);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==L.decodeStrings;this.defaultEncoding=L.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(Y){!function(ma,bb){var Qa=ma._writableState,X=Qa.sync,V=Qa.writecb;if("function"!=typeof V)throw new K;(function(ha){ha.writing=
!1;ha.writecb=null;ha.length-=ha.writelen;ha.writelen=0}(Qa),bb)?!function(ha,xa,yb,ec,Nb){--xa.pendingcb;yb?(l.nextTick(Nb,ec),l.nextTick(a,ha,xa),ha._writableState.errorEmitted=!0,O(ha,ec)):(Nb(ec),ha._writableState.errorEmitted=!0,O(ha,ec),a(ha,xa))}(ma,Qa,X,bb,V):((bb=e(Qa)||ma.destroyed)||Qa.corked||Qa.bufferProcessing||!Qa.bufferedRequest||b(ma,Qa),X?l.nextTick(n,ma,Qa,bb,V):n(ma,Qa,bb,V))}(N,Y)};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=
0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==L.emitClose;this.autoDestroy=!!L.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new f(this)}function d(L){var N=this instanceof(g=g||cG());if(!N&&!y.call(d,this))return new d(L);this._writableState=new k(L,this,N);this.writable=!0;L&&("function"==typeof L.write&&(this._write=L.write),"function"==typeof L.writev&&(this._writev=L.writev),"function"==typeof L.destroy&&(this._destroy=L.destroy),"function"==typeof L.final&&(this._final=
L.final));r.call(this)}function h(L,N,aa,Y,ma,bb,Qa){N.writelen=Y;N.writecb=Qa;N.writing=!0;N.sync=!0;N.destroyed?N.onwrite(new P("write")):aa?L._writev(ma,N.onwrite):L._write(ma,bb,N.onwrite);N.sync=!1}function n(L,N,aa,Y){aa||(0===N.length&&N.needDrain&&(N.needDrain=!1,L.emit("drain")),!0);N.pendingcb--;Y();a(L,N)}function b(L,N){N.bufferProcessing=!0;var aa=N.bufferedRequest;if(L._writev&&aa&&aa.next){var Y=Array(N.bufferedRequestCount),ma=N.corkedRequestsFree;ma.entry=aa;for(var bb=0,Qa=!0;aa;)Y[bb]=
aa,aa.isBuf||(Qa=!1),aa=aa.next,bb+=1;Y.allBuffers=Qa;h(L,N,!0,N.length,Y,"",ma.finish);N.pendingcb++;N.lastBufferedRequest=null;ma.next?(N.corkedRequestsFree=ma.next,ma.next=null):N.corkedRequestsFree=new f(N);N.bufferedRequestCount=0}else{for(;aa&&(Y=aa.chunk,h(L,N,!1,N.objectMode?1:Y.length,Y,aa.encoding,aa.callback),aa=aa.next,N.bufferedRequestCount--,!N.writing););null===aa&&(N.lastBufferedRequest=null)}N.bufferedRequest=aa;N.bufferProcessing=!1}function e(L){return L.ending&&0===L.length&&null===
L.bufferedRequest&&!L.finished&&!L.writing}function m(L,N){L._final(function(aa){N.pendingcb--;aa&&O(L,aa);N.prefinished=!0;L.emit("prefinish");a(L,N)})}function a(L,N){var aa=e(N),Y;if(Y=aa)N.prefinished||N.finalCalled||("function"!=typeof L._final||N.destroyed?(N.prefinished=!0,L.emit("prefinish")):(N.pendingcb++,N.finalCalled=!0,l.nextTick(m,L,N))),Y=(!0,0===N.pendingcb&&(N.finished=!0,L.emit("finish"),N.autoDestroy));Y&&(N=L._readableState,(!N||N.autoDestroy&&N.endEmitted)&&L.destroy());return aa}
if(mW)return zL;mW=!0;var g,l=zi;zL=d;d.WritableState=k;var q={deprecate:dW},r=aG,u=Rh.Buffer,v=N8.Uint8Array||function(){},y,z=jW,A=kW.getHighWaterMark,B=Qq.codes,G=B.ERR_INVALID_ARG_TYPE,E=B.ERR_METHOD_NOT_IMPLEMENTED,K=B.ERR_MULTIPLE_CALLBACK,J=B.ERR_STREAM_CANNOT_PIPE,P=B.ERR_STREAM_DESTROYED,ea=B.ERR_STREAM_NULL_VALUES,ra=B.ERR_STREAM_WRITE_AFTER_END,D=B.ERR_UNKNOWN_ENCODING,O=z.errorOrDestroy;return zh(d,r),k.prototype.getBuffer=function(){for(var L=this.bufferedRequest,N=[];L;)N.push(L),L=
L.next;return N},function(){try{Object.defineProperty(k.prototype,"buffer",{get:q.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(L){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(d,Symbol.hasInstance,{value:function(L){return!!y.call(this,L)||this===d&&L&&L._writableState instanceof
k}})):y=function(L){return L instanceof this},d.prototype.pipe=function(){O(this,new J)},d.prototype.write=function(L,N,aa){var Y,ma=this._writableState,bb=!1,Qa=!ma.objectMode&&(Y=L,u.isBuffer(Y)||Y instanceof v);return Qa&&!u.isBuffer(L)&&(L=u.from(L)),"function"==typeof N&&(aa=N,N=null),Qa?N="buffer":N||(N=ma.defaultEncoding),"function"!=typeof aa&&(aa=c),ma.ending?function(X,V){var ha=new ra;O(X,ha);l.nextTick(V,ha)}(this,aa):(Qa||function(X,V,ha,xa){var yb;return null===ha?yb=new ea:"string"==
typeof ha||V.objectMode||(yb=new G("chunk",["string","Buffer"],ha)),!yb||(O(X,yb),l.nextTick(xa,yb),!1)}(this,ma,L,aa))&&(ma.pendingcb++,bb=function(X,V,ha,xa,yb,ec){if(!ha){var Nb=xa;V.objectMode||!1===V.decodeStrings||"string"!=typeof Nb||(Nb=u.from(Nb,yb));xa!==Nb&&(ha=!0,yb="buffer",xa=Nb)}var ac=V.objectMode?1:xa.length;V.length+=ac;(Nb=V.length<V.highWaterMark)||(V.needDrain=!0);V.writing||V.corked?(X=V.lastBufferedRequest,V.lastBufferedRequest={chunk:xa,encoding:yb,isBuf:ha,callback:ec,next:null},
X?X.next=V.lastBufferedRequest:V.bufferedRequest=V.lastBufferedRequest,V.bufferedRequestCount+=1):h(X,V,!1,ac,xa,yb,ec);return Nb}(this,ma,Qa,L,N,aa)),bb},d.prototype.cork=function(){this._writableState.corked++},d.prototype.uncork=function(){var L=this._writableState;L.corked&&(L.corked--,L.writing||L.corked||L.bufferProcessing||!L.bufferedRequest||b(this,L))},d.prototype.setDefaultEncoding=function(L){if("string"==typeof L&&(L=L.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((L+
"").toLowerCase())))throw new D(L);return this._writableState.defaultEncoding=L,this},Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),d.prototype._write=function(L,N,aa){aa(new E("_write()"))},d.prototype._writev=null,d.prototype.end=function(L,N,aa){var Y=this._writableState;
"function"==typeof L?(aa=L,L=null,N=null):"function"==typeof N&&(aa=N,N=null);null!=L&&this.write(L,N);Y.corked&&(Y.corked=1,this.uncork());Y.ending||(L=aa,Y.ending=!0,a(this,Y),L&&(Y.finished?l.nextTick(L):this.once("finish",L)),Y.ended=!0,this.writable=!1);return this},Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&
this._writableState.destroyed},set:function(L){this._writableState&&(this._writableState.destroyed=L)}}),d.prototype.destroy=z.destroy,d.prototype._undestroy=z.undestroy,d.prototype._destroy=function(L,N){N(L)},zL}function cG(){function f(a){if(!(this instanceof f))return new f(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||
d.nextTick(k,this)}function k(a){a.end()}if(nW)return AL;nW=!0;var d=zi,h=Object.keys||function(a){var g=[],l;for(l in a)g.push(l);return g};AL=f;var n=J8(),b=lW();zh(f,n);h=h(b.prototype);for(var e=0;e<h.length;e++){var m=h[e];f.prototype[m]||(f.prototype[m]=b.prototype[m])}return Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&
this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}}),
AL}function O8(f,c){var k=this._transformState;k.transforming=!1;var d=k.writecb;if(null===d)return this.emit("error",new P8);k.writechunk=null;k.writecb=null;null!=c&&this.push(c);d(f);f=this._readableState;f.reading=!1;(f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}function ws(f){if(!(this instanceof ws))return new ws(f);dG.call(this,f);this._transformState={afterTransform:O8.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=
!0;this._readableState.sync=!1;f&&("function"==typeof f.transform&&(this._transform=f.transform),"function"==typeof f.flush&&(this._flush=f.flush));this.on("prefinish",Q8)}function Q8(){var f=this;"function"!=typeof this._flush||this._readableState.destroyed?oW(this,null,null):this._flush(function(c,k){oW(f,c,k)})}function oW(f,c,k){if(c)return f.emit("error",c);if(null!=k&&f.push(k),f._writableState.length)throw new R8;if(f._transformState.transforming)throw new S8;return f.push(null)}function fC(f){if(!(this instanceof
fC))return new fC(f);pW.call(this,f)}function qW(f){if(f)throw f;}function T8(f,c,k,d){d=function(b){var e=!1;return function(){e||(e=!0,b.apply(void 0,arguments))}}(d);var h=!1;f.on("close",function(){h=!0});void 0===BL&&(BL=CL);BL(f,{readable:c,writable:k},function(b){if(b)return d(b);h=!0;d()});var n=!1;return function(b){if(!h&&!n)return n=!0,f.setHeader&&"function"==typeof f.abort?f.abort():"function"==typeof f.destroy?f.destroy():(d(b||new U8("pipe")),void 0)}}function rW(f){f()}function V8(f,
c){return f.pipe(c)}function Hp(){DL.call(this||EL)}function eG(){}function iu(f){sW.call(this);this._block=fG.allocUnsafe(f);this._blockSize=f;this._blockOffset=0;this._length=[0,0,0,0];this._finalized=!1}function Mz(){tW.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878}function gG(f,c){return f<<c|f>>>32-c}function Nm(f,c,k,d,h,n,b){return gG(f+(c&k|~c&d)+h+n|0,b)+c|0}function Om(f,c,k,d,h,n,b){return gG(f+(c&d|k&~d)+h+n|0,b)+c|0}function Pm(f,c,k,d,h,n,b){return gG(f+
(c^k^d)+h+n|0,b)+c|0}function Qm(f,c,k,d,h,n,b){return gG(f+(k^(c|~d))+h+n|0,b)+c|0}function Nz(){uW.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520}function Ip(f,c){return f<<c|f>>>32-c}function ju(f,c){(this||Zj)._block=vW.alloc(f);(this||Zj)._finalSize=c;(this||Zj)._blockSize=f;(this||Zj)._len=0}function Oz(){this.init();(this||rh)._w=W8;wW.call(this||rh,64,56)}function gC(){this.init();(this||qj)._w=X8;xW.call(this||qj,64,56)}function hC(){this.init();
(this||rj)._w=Y8;yW.call(this||rj,64,56)}function hG(){this.init();(this||Vl)._w=Z8;$8.call(this||Vl,64,56)}function Pz(){this.init();(this||Qe)._w=a9;zW.call(this||Qe,128,112)}function Wl(f,c){return f>>>0<c>>>0?1:0}function iG(){this.init();(this||Ri)._w=b9;c9.call(this||Ri,128,112)}function Xl(f){AW.call(this||Ck);(this||Ck).hashMode="string"==typeof f;(this||Ck).hashMode?(this||Ck)[f]=(this||Ck)._finalOrDigest:(this||Ck).final=(this||Ck)._finalOrDigest;(this||Ck)._final&&((this||Ck).__final=(this||
Ck)._final,(this||Ck)._final=null);(this||Ck)._decoder=null;(this||Ck)._encoding=null}function jG(f){BW.call(this,"digest");this._hash=f}function kG(f,c){CW.call(this,"digest");"string"==typeof c&&(c=Hx.from(c));this._alg=f;this._key=c;64<c.length?c=f(c):64>c.length&&(c=Hx.concat([c,d9],64));f=this._ipad=Hx.allocUnsafe(64);for(var k=this._opad=Hx.allocUnsafe(64),d=0;64>d;d++)f[d]=54^c[d],k[d]=92^c[d];this._hash=[f]}function iC(f,c){DW.call(this,"digest");"string"==typeof c&&(c=jC.from(c));var k="sha512"===
f||"sha384"===f?128:64;(this._alg=f,this._key=c,c.length>k)?c=("rmd160"===f?new FL:GL(f)).update(c).digest():c.length<k&&(c=jC.concat([c,e9],k));for(var d=this._ipad=jC.allocUnsafe(k),h=this._opad=jC.allocUnsafe(k),n=0;n<k;n++)d[n]=54^c[n],h[n]=92^c[n];this._hash="rmd160"===f?new FL:GL(f);this._hash.update(d)}function EW(f,c){if("string"!=typeof f&&!f9.isBuffer(f))throw new TypeError(c+" must be a buffer or string");}function FW(f,c,k){var d=function(m){function a(g){return g9(m).update(g).digest()}
return"rmd160"===m||"ripemd160"===m?function(g){return(new h9).update(g).digest()}:"md5"===m?i9:a}(f),h="sha512"===f||"sha384"===f?128:64;c.length>h?c=d(c):c.length<h&&(c=Rq.concat([c,j9],h));for(var n=Rq.allocUnsafe(h+lG[f]),b=Rq.allocUnsafe(h+lG[f]),e=0;e<h;e++)n[e]=54^c[e],b[e]=92^c[e];c=Rq.allocUnsafe(h+k+4);n.copy(c,0,0,h);(this||Sq).ipad1=c;(this||Sq).ipad2=n;(this||Sq).opad=b;(this||Sq).alg=f;(this||Sq).blocksize=h;(this||Sq).hash=d;(this||Sq).size=lG[f]}function GW(f,c,k,d,h){return kC.importKey("raw",
f,{name:"PBKDF2"},!1,["deriveBits"]).then(function(n){return kC.deriveBits({name:"PBKDF2",salt:c,iterations:k,hash:{name:h}},n,d<<3)}).then(function(n){return Qz.from(n)})}function HW(f,c){if(!f)throw Error(c||"Assertion failed");}function Eo(f){this.options=f;this.type=this.options.type;this.blockSize=8;this._init();this.buffer=Array(this.blockSize);this.bufferOff=0}function k9(){this.tmp=Array(2);this.keys=null}function Jp(f){IW.call(this,f);var c=new k9;this._desState=c;this.deriveKeys(c,f.key)}
function l9(f){m9.equal(f.length,8,"Invalid IV length");this.iv=Array(8);for(var c=0;c<this.iv.length;c++)this.iv[c]=f[c]}function n9(f,c){o9.equal(c.length,24,"Invalid key length");var k=c.slice(0,8),d=c.slice(8,16);c=c.slice(16,24);this.ciphers="encrypt"===f?[Pv.create({type:"encrypt",key:k}),Pv.create({type:"decrypt",key:d}),Pv.create({type:"encrypt",key:c})]:[Pv.create({type:"decrypt",key:c}),Pv.create({type:"encrypt",key:d}),Pv.create({type:"decrypt",key:k})]}function xs(f){JW.call(this,f);this._edeState=
new n9(this.type,this.options.key)}function mG(f){KW.call(this||nG);var c=f.mode.toLowerCase(),k=lC[c];var d=f.decrypt?"decrypt":"encrypt";var h=f.key;Ix.isBuffer(h)||(h=Ix.from(h));"des-ede"!==c&&"des-ede-cbc"!==c||(h=Ix.concat([h,h.slice(0,8)]));f=f.iv;Ix.isBuffer(f)||(f=Ix.from(f));(this||nG)._des=k.create({key:h,iv:f,type:d})}function LW(f,c,k){var d=c.length,h=p9(c,f._cache);return f._cache=f._cache.slice(d),f._prev=mC.concat([f._prev,k?c:h]),h}function q9(f){return f._prev=f._cipher.encryptBlock(f._prev),
f._prev}function HL(f){oG.isBuffer(f)||(f=oG.from(f));for(var c=f.length/4|0,k=Array(c),d=0;d<c;d++)k[d]=f.readUInt32BE(4*d);return k}function IL(f){for(;0<f.length;f++)f[0]=0}function MW(f,c,k,d,h){var n=k[0],b=k[1],e=k[2];k=k[3];var m=f[0]^c[0],a=f[1]^c[1],g=f[2]^c[2];f=f[3]^c[3];for(var l=4,q=1;q<h;q++){var r=n[m>>>24]^b[a>>>16&255]^e[g>>>8&255]^k[255&f]^c[l++];var u=n[a>>>24]^b[g>>>16&255]^e[f>>>8&255]^k[255&m]^c[l++];var v=n[g>>>24]^b[f>>>16&255]^e[m>>>8&255]^k[255&a]^c[l++];var y=n[f>>>24]^
b[m>>>16&255]^e[a>>>8&255]^k[255&g]^c[l++];m=r;a=u;g=v;f=y}return r=(d[m>>>24]<<24|d[a>>>16&255]<<16|d[g>>>8&255]<<8|d[255&f])^c[l++],u=(d[a>>>24]<<24|d[g>>>16&255]<<16|d[f>>>8&255]<<8|d[255&m])^c[l++],v=(d[g>>>24]<<24|d[f>>>16&255]<<16|d[m>>>8&255]<<8|d[255&a])^c[l++],y=(d[f>>>24]<<24|d[m>>>16&255]<<16|d[a>>>8&255]<<8|d[255&g])^c[l++],[r>>>0,u>>>0,v>>>0,y>>>0]}function Kp(f){(this||Lp)._key=HL(f);this._reset()}function NW(f){var c=Rz.allocUnsafe(16);return c.writeUInt32BE(f[0]>>>0,0),c.writeUInt32BE(f[1]>>>
0,4),c.writeUInt32BE(f[2]>>>0,8),c.writeUInt32BE(f[3]>>>0,12),c}function nC(f){(this||tm).h=f;(this||tm).state=Rz.alloc(16,0);(this||tm).cache=Rz.allocUnsafe(0)}function Qv(f,c,k,d){OW.call(this||Yg);var h=Tn.alloc(4,0);(this||Yg)._cipher=new r9.AES(c);var n=(this||Yg)._cipher.encryptBlock(h);(this||Yg)._ghash=new PW(n);c=this||Yg;h=k;if(12===h.length)c=(c._finID=Tn.concat([h,Tn.from([0,0,0,1])]),Tn.concat([h,Tn.from([0,0,0,2])]));else{k=new PW(n);n=h.length;var b=n%16;k.update(h);b&&(b=16-b,k.update(Tn.alloc(b,
0)));k.update(Tn.alloc(8,0));h=8*n;n=Tn.alloc(8);n.writeUIntBE(h,0,8);k.update(n);c._finID=k.state;c=Tn.from(c._finID);c=(s9(c),c)}(this||Yg)._prev=Tn.from(c);(this||Yg)._cache=Tn.allocUnsafe(0);(this||Yg)._secCache=Tn.allocUnsafe(0);(this||Yg)._decrypt=d;(this||Yg)._alen=0;(this||Yg)._len=0;(this||Yg)._mode=f;(this||Yg)._authTag=null;(this||Yg)._called=!1}function oC(f,c,k,d){QW.call(this||Tq);(this||Tq)._cipher=new t9.AES(c);(this||Tq)._prev=JL.from(k);(this||Tq)._cache=JL.allocUnsafe(0);(this||
Tq)._secCache=JL.allocUnsafe(0);(this||Tq)._decrypt=d;(this||Tq)._mode=f}function pC(f,c,k){RW.call(this||Si);(this||Si)._cache=new pG;(this||Si)._last=void 0;(this||Si)._cipher=new u9.AES(c);(this||Si)._prev=Sz.from(k);(this||Si)._mode=f;(this||Si)._autopadding=!0}function pG(){(this||Si).cache=Sz.allocUnsafe(0)}function SW(f,c,k){f=TW[f.toLowerCase()];if(!f)throw new TypeError("invalid suite type");if("string"==typeof k&&(k=Sz.from(k)),"GCM"!==f.mode&&k.length!==f.iv)throw new TypeError("invalid iv length "+
k.length);if("string"==typeof c&&(c=Sz.from(c)),c.length!==f.key/8)throw new TypeError("invalid key length "+c.length);return"stream"===f.type?new v9(f.module,c,k,!0):"auth"===f.type?new w9(f.module,c,k,!0):new pC(f.module,c,k)}function qC(f,c,k){UW.call(this||Ej);(this||Ej)._cache=new qG;(this||Ej)._cipher=new x9.AES(c);(this||Ej)._prev=ku.from(k);(this||Ej)._mode=f;(this||Ej)._autopadding=!0}function qG(){(this||Ej).cache=ku.allocUnsafe(0)}function VW(f,c,k){f=WW[f.toLowerCase()];if(!f)throw new TypeError("invalid suite type");
if("string"==typeof c&&(c=ku.from(c)),c.length!==f.key/8)throw new TypeError("invalid key length "+c.length);if("string"==typeof k&&(k=ku.from(k)),"GCM"!==f.mode&&k.length!==f.iv)throw new TypeError("invalid iv length "+k.length);return"stream"===f.type?new y9(f.module,c,k):"auth"===f.type?new z9(f.module,c,k):new qC(f.module,c,k)}function KL(f,c,k){if(f=f.toLowerCase(),Rv[f])return LL.createCipheriv(f,c,k);if(lu[f])return new XW({key:c,iv:k,mode:f});throw new TypeError("invalid suite type");}function ML(f,
c,k){if(f=f.toLowerCase(),Rv[f])return LL.createDecipheriv(f,c,k);if(lu[f])return new XW({key:c,iv:k,mode:f,decrypt:!0});throw new TypeError("invalid suite type");}function Sv(f){(this||rG).rand=f}function Tv(f){(this||YW).rand=f||new A9.Rand}function NL(f){if(null!==OL)var c=OL;else{c=[2];for(var k=1,d=3;1048576>d;d+=2){for(var h=Math.ceil(Math.sqrt(d)),n=0;n<k&&c[n]<=h&&0!=d%c[n];n++);k!==n&&c[n]<=h||(c[k++]=d)}c=(OL=c,c)}for(k=0;k<c.length;k++)if(0===f.modn(c[k]))return 0===f.cmpn(c[k]);return!0}
function PL(f){var c=Rm.mont(f);return 0===QL.toRed(c).redPow(f.subn(1)).fromRed().cmpn(1)}function rC(f,c){if(16>f)return new Rm(2===c||5===c?[140,123]:[140,39]);var k,d;for(c=new Rm(c);;){for(k=new Rm(B9(Math.ceil(f/8)));k.bitLength()>f;)k.ishrn(1);if(k.isEven()&&k.iadd(C9),k.testn(1)||k.iadd(QL),c.cmp(QL)){if(!c.cmp(D9))for(;k.mod(E9).cmp(F9);)k.iadd(ZW)}else for(;k.mod(G9).cmp(H9);)k.iadd(ZW);if(NL(d=k.shrn(1))&&NL(k)&&PL(d)&&PL(k)&&$W.test(d)&&$W.test(k))return k}}function I9(f,c){return c=c||
"utf8",ys.isBuffer(f)||(f=new ys(f,c)),(this||ti)._pub=new Mp(f),this||ti}function J9(f,c){return c=c||"utf8",ys.isBuffer(f)||(f=new ys(f,c)),(this||ti)._priv=new Mp(f),this||ti}function Uq(f,c,k){this.setGenerator(c);(this||ti).__prime=new Mp(f);(this||ti)._prime=Mp.mont((this||ti).__prime);(this||ti)._primeLen=f.length;(this||ti)._pub=void 0;(this||ti)._priv=void 0;(this||ti)._primeCode=void 0;k?((this||ti).setPublicKey=I9,(this||ti).setPrivateKey=J9):(this||ti)._primeCode=8}function sG(f,c){f=
new ys(f.toArray());return c?f.toString(c):f}function tG(f,c){var k=aX(c);var d=k.toRed(Uv.mont(c.modulus)).redPow(new Uv(c.publicExponent)).fromRed();k=k.invm(c.modulus);var h=c.modulus.byteLength();f=(Uv.mont(c.modulus),(new Uv(f)).mul(d).umod(c.modulus));var n=f.toRed(Uv.mont(c.prime1)),b=f.toRed(Uv.mont(c.prime2));d=c.coefficient;var e=c.prime1;f=c.prime2;n=n.redPow(c.exponent1);b=b.redPow(c.exponent2);n=n.fromRed();b=b.fromRed();d=n.isub(b).imul(d).umod(e);return d.imul(f),b.iadd(d),new K9(b.imul(k).umod(c.modulus).toArray(!1,
h))}function aX(f){for(var c=f.modulus.byteLength(),k=new Uv(bX(c));0<=k.cmp(f.modulus)||!k.umod(f.prime1)||!k.umod(f.prime2);)k=new Uv(bX(c));return k}function cX(f){return 1===f.length?"0"+f:f}function dX(f){for(var c="",k=0;k<f.length;k++)c+=cX(f[k].toString(16));return c}function Jx(f,c){if(f instanceof Jx)return f;this._importDER(f,c)||(L9(f.r&&f.s,"Signature without r or s"),this.r=new uG(f.r,16),this.s=new uG(f.s,16),void 0===f.recoveryParam?this.recoveryParam=null:this.recoveryParam=f.recoveryParam)}
function M9(){this.place=0}function RL(f,c){var k=f[c.place++];if(!(128&k))return k;k&=15;for(var d=0,h=0,n=c.place;h<k;h++,n++)d<<=8,d|=f[n];return c.place=n,d}function eX(f){for(var c=0,k=f.length-1;!(f[c]||128&f[c+1])&&c<k;)c++;return 0===c?f:f.slice(c)}function SL(f,c){if(128>c)return f.push(c),void 0;var k=1+(Math.log(c)/Math.LN2>>>3);for(f.push(128|k);--k;)f.push(c>>>(k<<3)&255);f.push(c)}function fX(f){return(f>>>24|f>>>8&65280|f<<8&16711680|(255&f)<<24)>>>0}function gX(f){return 1===f.length?
"0"+f:f}function hX(f){return 7===f.length?"0"+f:6===f.length?"00"+f:5===f.length?"000"+f:4===f.length?"0000"+f:3===f.length?"00000"+f:2===f.length?"000000"+f:1===f.length?"0000000"+f:f}function vG(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=this.constructor.padLength/8;this.endian="big";this._delta8=this.blockSize/8;this._delta32=this.blockSize/32}function Np(){if(!(this instanceof
Np))return new Np;iX.call(this);this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209];this.k=N9;this.W=Array(160)}function Vq(){if(!(this instanceof Vq))return new Vq;jX.call(this);this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];this.k=O9;this.W=Array(64)}function zs(){if(!(this instanceof zs))return new zs;kX.call(this);this.h=
[1732584193,4023233417,2562383102,271733878,3285377520];this.W=Array(80)}function mu(){if(!(this instanceof mu))return new mu;lX.call(this);this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}function nu(){if(!(this instanceof nu))return new nu;mX.call(this);this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}function As(){if(!(this instanceof
As))return new As;nX.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.endian="little"}function oX(f,c,k,d){return 15>=f?c^k^d:31>=f?c&k|~c&d:47>=f?(c|~k)^d:63>=f?c&d|k&~d:c^(k|~d)}function Tz(f,c,k){if(!(this instanceof Tz))return new Tz(f,c,k);this.Hash=f;this.blockSize=f.blockSize/8;this.outSize=f.outSize/8;this.outer=this.inner=null;this._init(P9.toArray(c,k))}function ou(f){if(!(this instanceof ou))return new ou(f);this.hash=f.hash;this.predResist=!!f.predResist;
this.outLen=this.hash.outSize;this.minEntropy=f.minEntropy||this.hash.hmacStrength;this.V=this.K=this.reseedInterval=this._reseed=null;var c=Kx.toArray(f.entropy,f.entropyEnc||"hex"),k=Kx.toArray(f.nonce,f.nonceEnc||"hex");f=Kx.toArray(f.pers,f.persEnc||"hex");pX(c.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._init(c,k,f)}function Wq(f,c){this.type=f;this.p=new Lx(c.p,16);this.red=c.prime?Lx.red(c.prime):Lx.mont(this.p);this.zero=(new Lx(0)).toRed(this.red);
this.one=(new Lx(1)).toRed(this.red);this.two=(new Lx(2)).toRed(this.red);this.n=c.n&&new Lx(c.n,16);this.g=c.g&&this.pointFromJSON(c.g,c.gRed);this._wnafT1=Array(4);this._wnafT2=Array(4);this._wnafT3=Array(4);this._wnafT4=Array(4);this._bitLength=this.n?this.n.bitLength():0;f=this.n&&this.p.div(this.n);!f||0<f.cmpn(100)?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function Op(f,c){this.curve=f;this.type=c;this.precomputed=null}function Pp(f){Uz.call(this,"short",f);this.a=
(new Dk(f.a,16)).toRed(this.red);this.b=(new Dk(f.b,16)).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=0===this.a.fromRed().cmpn(0);this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3);this.endo=this._getEndomorphism(f);this._endoWnafT1=Array(4);this._endoWnafT2=Array(4)}function Yl(f,c,k,d){Uz.BasePoint.call(this,f,"affine");null===c&&null===k?(this.x=null,this.y=null,this.inf=!0):(this.x=new Dk(c,16),this.y=new Dk(k,16),d&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),
this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function um(f,c,k,d){Uz.BasePoint.call(this,f,"jacobian");null===c&&null===k&&null===d?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Dk(0)):(this.x=new Dk(c,16),this.y=new Dk(k,16),this.z=new Dk(d,16));this.x.red||(this.x=this.x.toRed(this.curve.red));this.y.red||(this.y=this.y.toRed(this.curve.red));this.z.red||(this.z=this.z.toRed(this.curve.red));this.zOne=this.z===this.curve.one}
function Vz(f){wG.call(this,"mont",f);this.a=(new Wz(f.a,16)).toRed(this.red);this.b=(new Wz(f.b,16)).toRed(this.red);this.i4=(new Wz(4)).toRed(this.red).redInvm();this.two=(new Wz(2)).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two))}function Zl(f,c,k){wG.BasePoint.call(this,f,"projective");null===c&&null===k?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Wz(c,16),this.z=new Wz(k,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}
function Bs(f){this.extended=this.mOneA=(this.twisted=1!=(0|f.a))&&-1==(0|f.a);xG.call(this,"edwards",f);this.a=(new pu(f.a,16)).umod(this.red.m);this.a=this.a.toRed(this.red);this.c=(new pu(f.c,16)).toRed(this.red);this.c2=this.c.redSqr();this.d=(new pu(f.d,16)).toRed(this.red);this.dd=this.d.redAdd(this.d);Q9(!this.twisted||0===this.c.fromRed().cmpn(1));this.oneC=1==(0|f.c)}function Rj(f,c,k,d,h){xG.BasePoint.call(this,f,"projective");null===c&&null===k&&null===d?(this.x=this.curve.zero,this.y=
this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new pu(c,16),this.y=new pu(k,16),this.z=d?new pu(d,16):this.curve.one,this.t=h&&new pu(h,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}
function qX(f){"short"===f.type?this.curve=new TL.short(f):"edwards"===f.type?this.curve=new TL.edwards(f):this.curve=new TL.mont(f);this.g=this.curve.g;this.n=this.curve.n;this.hash=f.hash;rX(this.g.validate(),"Invalid curve");rX(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function Vv(f,c){Object.defineProperty(UL,f,{configurable:!0,enumerable:!0,get:function(){var k=new qX(c);return Object.defineProperty(UL,f,{configurable:!0,enumerable:!0,value:k}),k}})}function $l(f,c){this.ec=
f;this.pub=this.priv=null;c.priv&&this._importPrivate(c.priv,c.privEnc);c.pub&&this._importPublic(c.pub,c.pubEnc)}function Qp(f){if(!(this instanceof Qp))return new Qp(f);"string"==typeof f&&(sX(VL.hasOwnProperty(f),"Unknown curve "+f),f=VL[f]);f instanceof VL.PresetCurve&&(f={curve:f});this.curve=f.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;this.g=f.curve.g;this.g.precompute(f.curve.n.bitLength()+1);this.hash=f.hash||f.curve.hash}function xl(f,c){this.eddsa=f;this._secret=
tX(c.secret);f.isPoint(c.pub)?this._pub=c.pub:this._pubBytes=tX(c.pub)}function Wv(f,c){this.eddsa=f;"object"!=typeof c&&(c=R9(c));Array.isArray(c)&&(c={R:c.slice(0,f.encodingLength),S:c.slice(f.encodingLength)});S9(c.R&&c.S,"Signature without R or S");f.isPoint(c.R)&&(this._R=c.R);c.S instanceof T9&&(this._S=c.S);this._Rencoded=Array.isArray(c.R)?c.R:c.Rencoded;this._Sencoded=Array.isArray(c.S)?c.S:c.Sencoded}function Un(f){if(U9("ed25519"===f,"only tested with ed25519 so far"),!(this instanceof
Un))return new Un(f);this.curve=f=V9[f].curve;this.g=f.g;this.g.precompute(f.n.bitLength()+1);this.pointClass=f.point().constructor;this.encodingLength=Math.ceil(f.n.bitLength()/8);this.hash=W9.sha512}function Rp(f){(this||yl)._reporterState={obj:null,path:[],options:f||{},errors:[]}}function Xz(f,c){(this||yl).path=f;this.rethrow(c)}function uX(){function f(n,b){if(d.call(this||Og,b),!h.isBuffer(n))return this.error("Input not Buffer"),void 0;(this||Og).base=n;(this||Og).offset=0;(this||Og).length=
n.length}function c(n,b){if(Array.isArray(n))(this||Og).length=0,(this||Og).value=n.map(function(e){return e instanceof c||(e=new c(e,b)),(this||Og).length+=e.length,e},this||Og);else if("number"==typeof n){if(!(0<=n&&255>=n))return b.error("non-byte EncoderBuffer value");(this||Og).value=n;(this||Og).length=1}else if("string"==typeof n)(this||Og).value=n,(this||Og).length=h.byteLength(n);else{if(!h.isBuffer(n))return b.error("Unsupported type: "+typeof n);(this||Og).value=n;(this||Og).length=n.length}}
if(vX)return yG;vX=!0;var k=zh,d=sC().Reporter,h=Rh.Buffer;return k(f,d),yG.DecoderBuffer=f,f.prototype.save=function(){return{offset:(this||Og).offset,reporter:d.prototype.save.call(this||Og)}},f.prototype.restore=function(n){var b=new f((this||Og).base);return b.offset=n.offset,b.length=(this||Og).offset,(this||Og).offset=n.offset,d.prototype.restore.call(this||Og,n.reporter),b},f.prototype.isEmpty=function(){return(this||Og).offset===(this||Og).length},f.prototype.readUInt8=function(n){return(this||
Og).offset+1<=(this||Og).length?(this||Og).base.readUInt8((this||Og).offset++,!0):this.error(n||"DecoderBuffer overrun")},f.prototype.skip=function(n,b){if(!((this||Og).offset+n<=(this||Og).length))return this.error(b||"DecoderBuffer overrun");b=new f((this||Og).base);return b._reporterState=(this||Og)._reporterState,b.offset=(this||Og).offset,b.length=(this||Og).offset+n,(this||Og).offset+=n,b},f.prototype.raw=function(n){return(this||Og).base.slice(n?n.offset:(this||Og).offset,(this||Og).length)},
yG.EncoderBuffer=c,c.prototype.join=function(n,b){return n||(n=new h((this||Og).length)),b||(b=0),0===(this||Og).length||(Array.isArray((this||Og).value)?(this||Og).value.forEach(function(e){e.join(n,b);b+=e.length}):("number"==typeof(this||Og).value?n[b]=(this||Og).value:"string"==typeof(this||Og).value?n.write((this||Og).value,b):h.isBuffer((this||Og).value)&&(this||Og).value.copy(n,b),b+=(this||Og).length)),n},yG}function sC(){if(wX)return WL;wX=!0;var f=WL;return f.Reporter=xX.Reporter,f.DecoderBuffer=
uX().DecoderBuffer,f.EncoderBuffer=uX().EncoderBuffer,f.Node=function(){function c(a,g){var l={};(this||pg)._baseState=l;l.enc=a;l.parent=g||null;l.children=null;l.tag=null;l.args=null;l.reverseArgs=null;l.choice=null;l.optional=!1;l.any=!1;l.obj=!1;l.use=null;l.useDecoder=null;l.key=null;l.default=null;l.explicit=null;l.implicit=null;l.contains=null;l.parent||(l.children=[],this._wrap())}if(yX)return XL;yX=!0;var k=sC().Reporter,d=sC().EncoderBuffer,h=sC().DecoderBuffer,n=Sp,b="seq seqof set setof objid bool gentime utctime null_ enum int objDesc bitstr bmpstr charstr genstr graphstr ia5str iso646str numstr octstr printstr t61str unistr utf8str videostr".split(" "),
e="key obj use optional explicit implicit def choice any contains".split(" ").concat(b);XL=c;var m="enc parent children tag args reverseArgs choice optional any obj use alteredUse key default explicit implicit contains".split(" ");return c.prototype.clone=function(){var a=(this||pg)._baseState,g={};m.forEach(function(q){g[q]=a[q]});var l=new (this||pg).constructor(g.parent);return l._baseState=g,l},c.prototype._wrap=function(){var a=(this||pg)._baseState;e.forEach(function(g){(this||pg)[g]=function(){var l=
new (this||pg).constructor(this||pg);return a.children.push(l),l[g].apply(l,arguments)}},this||pg)},c.prototype._init=function(a){var g=(this||pg)._baseState;n(null===g.parent);a.call(this||pg);g.children=g.children.filter(function(l){return l._baseState.parent===(this||pg)},this||pg);n.equal(g.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(a){var g=(this||pg)._baseState,l=a.filter(function(q){return q instanceof(this||pg).constructor},this||pg);a=a.filter(function(q){return!(q instanceof
(this||pg).constructor)},this||pg);0!==l.length&&(n(null===g.children),g.children=l,l.forEach(function(q){q._baseState.parent=this||pg},this||pg));0!==a.length&&(n(null===g.args),g.args=a,g.reverseArgs=a.map(function(q){if("object"!=typeof q||q.constructor!==Object)return q;var r={};return Object.keys(q).forEach(function(u){u==(0|u)&&(u|=0);r[q[u]]=u}),r}))},"_peekTag _decodeTag _use _decodeStr _decodeObjid _decodeTime _decodeNull _decodeInt _decodeBool _decodeList _encodeComposite _encodeStr _encodeObjid _encodeTime _encodeNull _encodeInt _encodeBool".split(" ").forEach(function(a){c.prototype[a]=
function(){throw Error(a+" not implemented for encoding: "+(this||pg)._baseState.enc);}}),b.forEach(function(a){c.prototype[a]=function(){var g=(this||pg)._baseState,l=Array.prototype.slice.call(arguments);return n(null===g.tag),g.tag=a,this._useArgs(l),this||pg}}),c.prototype.use=function(a){n(a);var g=(this||pg)._baseState;return n(null===g.use),g.use=a,this||pg},c.prototype.optional=function(){return(this||pg)._baseState.optional=!0,this||pg},c.prototype.def=function(a){var g=(this||pg)._baseState;
return n(null===g.default),g.default=a,g.optional=!0,this||pg},c.prototype.explicit=function(a){var g=(this||pg)._baseState;return n(null===g.explicit&&null===g.implicit),g.explicit=a,this||pg},c.prototype.implicit=function(a){var g=(this||pg)._baseState;return n(null===g.explicit&&null===g.implicit),g.implicit=a,this||pg},c.prototype.obj=function(){var a=(this||pg)._baseState,g=Array.prototype.slice.call(arguments);return a.obj=!0,0!==g.length&&this._useArgs(g),this||pg},c.prototype.key=function(a){var g=
(this||pg)._baseState;return n(null===g.key),g.key=a,this||pg},c.prototype.any=function(){return(this||pg)._baseState.any=!0,this||pg},c.prototype.choice=function(a){var g=(this||pg)._baseState;return n(null===g.choice),g.choice=a,this._useArgs(Object.keys(a).map(function(l){return a[l]})),this||pg},c.prototype.contains=function(a){var g=(this||pg)._baseState;return n(null===g.use),g.contains=a,this||pg},c.prototype._decode=function(a,g){var l=(this||pg)._baseState;if(null===l.parent)return a.wrapResult(l.children[0]._decode(a,
g));var q,r=l.default,u=!0,v=null;if(null!==l.key&&(v=a.enterKey(l.key)),l.optional){var y=null;if(null!==l.explicit?y=l.explicit:null!==l.implicit?y=l.implicit:null!==l.tag&&(y=l.tag),null!==y||l.any){if(u=this._peekTag(a,y,l.any),a.isError(u))return u}else{var z=a.save();try{null===l.choice?this._decodeGeneric(l.tag,a,g):this._decodeChoice(a,g),u=!0}catch(B){u=!1}a.restore(z)}}if(l.obj&&u&&(q=a.enterObject()),u){if(null!==l.explicit){y=this._decodeTag(a,l.explicit);if(a.isError(y))return y;a=y}y=
a.offset;if(null===l.use&&null===l.choice){l.any&&(z=a.save());var A=this._decodeTag(a,null!==l.implicit?l.implicit:l.tag,l.any);if(a.isError(A))return A;l.any?r=a.raw(z):a=A}if(g&&g.track&&null!==l.tag&&g.track(a.path(),y,a.length,"tagged"),g&&g.track&&null!==l.tag&&g.track(a.path(),a.offset,a.length,"content"),r=l.any?r:null===l.choice?this._decodeGeneric(l.tag,a,g):this._decodeChoice(a,g),a.isError(r))return r;(l.any||null!==l.choice||null===l.children||l.children.forEach(function(B){B._decode(a,
g)}),!l.contains||"octstr"!==l.tag&&"bitstr"!==l.tag)||(r=new h(r),r=this._getUse(l.contains,a._reporterState.obj)._decode(r,g))}return l.obj&&u&&(r=a.leaveObject(q)),null===l.key||null===r&&!0!==u?null!==v&&a.exitKey(v):a.leaveKey(v,l.key,r),r},c.prototype._decodeGeneric=function(a,g,l){var q=(this||pg)._baseState;return"seq"===a||"set"===a?null:"seqof"===a||"setof"===a?this._decodeList(g,a,q.args[0],l):/str$/.test(a)?this._decodeStr(g,a,l):"objid"===a&&q.args?this._decodeObjid(g,q.args[0],q.args[1],
l):"objid"===a?this._decodeObjid(g,null,null,l):"gentime"===a||"utctime"===a?this._decodeTime(g,a,l):"null_"===a?this._decodeNull(g,l):"bool"===a?this._decodeBool(g,l):"objDesc"===a?this._decodeStr(g,a,l):"int"===a||"enum"===a?this._decodeInt(g,q.args&&q.args[0],l):null!==q.use?this._getUse(q.use,g._reporterState.obj)._decode(g,l):g.error("unknown tag: "+a)},c.prototype._getUse=function(a,g){var l=(this||pg)._baseState;return l.useDecoder=this._use(a,g),n(null===l.useDecoder._baseState.parent),l.useDecoder=
l.useDecoder._baseState.children[0],l.implicit!==l.useDecoder._baseState.implicit&&(l.useDecoder=l.useDecoder.clone(),l.useDecoder._baseState.implicit=l.implicit),l.useDecoder},c.prototype._decodeChoice=function(a,g){var l=(this||pg)._baseState,q=null,r=!1;return Object.keys(l.choice).some(function(u){var v=a.save(),y=l.choice[u];try{var z=y._decode(a,g);if(a.isError(z))return!1;q={type:u,value:z};r=!0}catch(A){return a.restore(v),!1}return!0},this||pg),r?q:a.error("Choice not matched")},c.prototype._createEncoderBuffer=
function(a){return new d(a,(this||pg).reporter)},c.prototype._encode=function(a,g,l){var q=(this||pg)._baseState;if(null===q.default||q.default!==a)if(a=this._encodeValue(a,g,l),void 0!==a&&!this._skipDefault(a,g,l))return a},c.prototype._encodeValue=function(a,g,l){var q=(this||pg)._baseState;if(null===q.parent)return q.children[0]._encode(a,g||new k);var r=null;if((this||pg).reporter=g,q.optional&&void 0===a){if(null===q.default)return;a=q.default}var u=null,v=!1;if(q.any)r=this._createEncoderBuffer(a);
else if(q.choice)r=this._encodeChoice(a,g);else if(q.contains)u=this._getUse(q.contains,l)._encode(a,g),v=!0;else if(q.children)u=q.children.map(function(z){if("null_"===z._baseState.tag)return z._encode(null,g,a);if(null===z._baseState.key)return g.error("Child should have a key");var A=g.enterKey(z._baseState.key);if("object"!=typeof a)return g.error("Child expected, but input is not object");z=z._encode(a[z._baseState.key],g,a);return g.leaveKey(A),z},this||pg).filter(function(z){return z}),u=
this._createEncoderBuffer(u);else if("seqof"===q.tag||"setof"===q.tag){if(!q.args||1!==q.args.length)return g.error("Too many args for : "+q.tag);if(!Array.isArray(a))return g.error("seqof/setof, but data is not Array");u=this.clone();u._baseState.implicit=null;u=this._createEncoderBuffer(a.map(function(z){return this._getUse((this||pg)._baseState.args[0],a)._encode(z,g)},u))}else null!==q.use?r=this._getUse(q.use,l)._encode(a,g):(u=this._encodePrimitive(q.tag,a),v=!0);if(!q.any&&null===q.choice){l=
null!==q.implicit?q.implicit:q.tag;var y=null===q.implicit?"universal":"context";null===l?null===q.use&&g.error("Tag could be omitted only for .use()"):null===q.use&&(r=this._encodeComposite(l,v,y,u))}return null!==q.explicit&&(r=this._encodeComposite(q.explicit,!1,"context",r)),r},c.prototype._encodeChoice=function(a,g){var l=(this||pg)._baseState,q=l.choice[a.type];return q||n(!1,a.type+" not found in "+JSON.stringify(Object.keys(l.choice))),q._encode(a.value,g)},c.prototype._encodePrimitive=function(a,
g){var l=(this||pg)._baseState;if(/str$/.test(a))return this._encodeStr(g,a);if("objid"===a&&l.args)return this._encodeObjid(g,l.reverseArgs[0],l.args[1]);if("objid"===a)return this._encodeObjid(g,null,null);if("gentime"===a||"utctime"===a)return this._encodeTime(g,a);if("null_"===a)return this._encodeNull();if("int"===a||"enum"===a)return this._encodeInt(g,l.args&&l.reverseArgs[0]);if("bool"===a)return this._encodeBool(g);if("objDesc"===a)return this._encodeStr(g,a);throw Error("Unsupported tag: "+
a);},c.prototype._isNumstr=function(a){return/^[0-9 ]*$/.test(a)},c.prototype._isPrintstr=function(a){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(a)},XL}(),WL}function zX(){if(AX)return YL;AX=!0;var f=YL;return f._reverse=function(c){var k={};return Object.keys(c).forEach(function(d){(0|d)==d&&(d|=0);k[c[d]]=d}),k},f.der=function(){if(BX)return Xv;BX=!0;var c=zX();return Xv.tagClass={0:"universal",1:"application",2:"context",3:"private"},Xv.tagClassByName=c._reverse(Xv.tagClass),Xv.tag={0:"end",
1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},Xv.tagByName=c._reverse(Xv.tag),Xv}(),YL}function CX(){function f(a){(this||Yv).enc="der";(this||Yv).name=a.name;(this||Yv).entity=a;(this||Yv).tree=new c;(this||Yv).tree._init(a.body)}
function c(a){b.Node.call(this||Yv,"der",a)}function k(a,g){var l=a.readUInt8(g);if(a.isError(l))return l;var q=m.tagClass[l>>6],r=0==(32&l);if(31==(31&l)){var u=l;for(l=0;128==(128&u);){if(u=a.readUInt8(g),a.isError(u))return u;l<<=7;l|=127&u}}else l&=31;return{cls:q,primitive:r,tag:l,tagStr:m.tag[l]}}function d(a,g,l){var q=a.readUInt8(l);if(a.isError(q))return q;if(!g&&128===q)return null;if(0==(128&q))return q;g=127&q;if(4<g)return a.error("length octect is too long");for(var r=q=0;r<g;r++){q<<=
8;var u=a.readUInt8(l);if(a.isError(u))return u;q|=u}return q}if(DX)return ZL;DX=!0;var h=zh,n=zG(),b=n.base,e=n.bignum,m=n.constants.der;return ZL=f,f.prototype.decode=function(a,g){return a instanceof b.DecoderBuffer||(a=new b.DecoderBuffer(a,g)),(this||Yv).tree._decode(a,g)},h(c,b.Node),c.prototype._peekTag=function(a,g,l){if(a.isEmpty())return!1;var q=a.save(),r=k(a,'Failed to peek tag: "'+g+'"');return a.isError(r)?r:(a.restore(q),r.tag===g||r.tagStr===g||r.tagStr+"of"===g||l)},c.prototype._decodeTag=
function(a,g,l){var q=k(a,'Failed to decode tag of "'+g+'"');if(a.isError(q))return q;var r=d(a,q.primitive,'Failed to get length of "'+g+'"');if(a.isError(r))return r;if(!l&&q.tag!==g&&q.tagStr!==g&&q.tagStr+"of"!==g)return a.error('Failed to match tag: "'+g+'"');if(q.primitive||null!==r)return a.skip(r,'Failed to match body of: "'+g+'"');l=a.save();q=this._skipUntilEnd(a,'Failed to skip indefinite length body: "'+(this||Yv).tag+'"');return a.isError(q)?q:(r=a.offset-l.offset,a.restore(l),a.skip(r,
'Failed to match body of: "'+g+'"'))},c.prototype._skipUntilEnd=function(a,g){for(;;){var l=k(a,g);if(a.isError(l))return l;var q,r=d(a,l.primitive,g);if(a.isError(r))return r;if(q=l.primitive||null!==r?a.skip(r):this._skipUntilEnd(a,g),a.isError(q))return q;if("end"===l.tagStr)break}},c.prototype._decodeList=function(a,g,l,q){for(g=[];!a.isEmpty();){var r=this._peekTag(a,"end");if(a.isError(r))return r;var u=l.decode(a,"der",q);if(a.isError(u)&&r)break;g.push(u)}return g},c.prototype._decodeStr=
function(a,g){if("bitstr"===g)return g=a.readUInt8(),a.isError(g)?g:{unused:g,data:a.raw()};if("bmpstr"===g){g=a.raw();if(1==g.length%2)return a.error("Decoding of string type: bmpstr length mismatch");a="";for(var l=0;l<g.length/2;l++)a+=String.fromCharCode(g.readUInt16BE(2*l));return a}return"numstr"===g?(g=a.raw().toString("ascii"),this._isNumstr(g)?g:a.error("Decoding of string type: numstr unsupported characters")):"octstr"===g||"objDesc"===g?a.raw():"printstr"===g?(g=a.raw().toString("ascii"),
this._isPrintstr(g)?g:a.error("Decoding of string type: printstr unsupported characters")):/str$/.test(g)?a.raw().toString():a.error("Decoding of string type: "+g+" unsupported")},c.prototype._decodeObjid=function(a,g,l){for(var q=[],r=0;!a.isEmpty();){var u=a.readUInt8();r<<=7;r|=127&u;0==(128&u)&&(q.push(r),r=0)}128&u&&q.push(r);a=q[0]/40|0;r=q[0]%40;if(l=l?q:[a,r].concat(q.slice(1)),g)q=g[l.join(" ")],void 0===q&&(q=g[l.join(".")]),void 0!==q&&(l=q);return l},c.prototype._decodeTime=function(a,
g){var l=a.raw().toString();if("gentime"===g){a=0|l.slice(0,4);g=0|l.slice(4,6);var q=0|l.slice(6,8),r=0|l.slice(8,10),u=0|l.slice(10,12);l=0|l.slice(12,14)}else{if("utctime"!==g)return a.error("Decoding "+g+" time is not supported yet");a=0|l.slice(0,2);g=0|l.slice(2,4);q=0|l.slice(4,6);r=0|l.slice(6,8);u=0|l.slice(8,10);l=0|l.slice(10,12);a=70>a?2E3+a:1900+a}return Date.UTC(a,g-1,q,r,u,l,0)},c.prototype._decodeNull=function(a){return null},c.prototype._decodeBool=function(a){var g=a.readUInt8();
return a.isError(g)?g:0!==g},c.prototype._decodeInt=function(a,g){a=a.raw();a=new e(a);return g&&(a=g[a.toString(10)]||a),a},c.prototype._use=function(a,g){return"function"==typeof a&&(a=a(g)),a._getDecoder("der").tree},ZL}function X9(){if(EX)return $L;EX=!0;var f=$L;return f.der=CX(),f.pem=function(){function c(n){h.call(this||aM,n);(this||aM).enc="pem"}if(FX)return bM;FX=!0;var k=zh,d=Rh.Buffer,h=CX();return k(c,h),bM=c,c.prototype.decode=function(n,b){n=n.toString().split(/[\r\n]+/g);for(var e=
b.label.toUpperCase(),m=/^-----(BEGIN|END) ([^-]+)-----$/,a=-1,g=-1,l=0;l<n.length;l++){var q=n[l].match(m);if(null!==q&&q[2]===e){if(-1!==a){if("END"!==q[1])break;g=l;break}if("BEGIN"!==q[1])break;a=l}}if(-1===a||-1===g)throw Error("PEM section not found for: "+e);n=n.slice(a+1,g).join("");n.replace(/[^a-z0-9\+\/=]+/gi,"");n=new d(n,"base64");return h.prototype.decode.call(this||aM,n,b)},bM}(),$L}function GX(){function f(m){(this||zl).enc="der";(this||zl).name=m.name;(this||zl).entity=m;(this||zl).tree=
new c;(this||zl).tree._init(m.body)}function c(m){b.Node.call(this||zl,"der",m)}function k(m){return 10>m?"0"+m:m}if(HX)return cM;HX=!0;var d=zh,h=Rh.Buffer,n=zG(),b=n.base,e=n.constants.der;return cM=f,f.prototype.encode=function(m,a){return(this||zl).tree._encode(m,a).join()},d(c,b.Node),c.prototype._encodeComposite=function(m,a,g,l){var q;a:{var r=m;m=(this||zl).reporter;"seqof"===r?r="seq":"setof"===r&&(r="set");if(e.tagByName.hasOwnProperty(r))r=e.tagByName[r];else if("number"!=typeof r||(0|
r)!==r){g=m.error("Unknown tag: "+r);break a}31<=r?g=m.error("Multi-octet tag encoding unsupported"):(a||(r|=32),g=r|e.tagClassByName[g||"universal"]<<6)}if(128>l.length)return(q=new h(2))[0]=g,q[1]=l.length,this._createEncoderBuffer([q,l]);m=1;for(a=l.length;256<=a;a>>=8)m++;(q=new h(2+m))[0]=g;q[1]=128|m;a=1+m;for(g=l.length;0<g;a--,g>>=8)q[a]=255&g;return this._createEncoderBuffer([q,l])},c.prototype._encodeStr=function(m,a){if("bitstr"===a)return this._createEncoderBuffer([0|m.unused,m.data]);
if("bmpstr"===a){a=new h(2*m.length);for(var g=0;g<m.length;g++)a.writeUInt16BE(m.charCodeAt(g),2*g);return this._createEncoderBuffer(a)}return"numstr"===a?this._isNumstr(m)?this._createEncoderBuffer(m):(this||zl).reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===a?this._isPrintstr(m)?this._createEncoderBuffer(m):(this||zl).reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):
/str$/.test(a)||"objDesc"===a?this._createEncoderBuffer(m):(this||zl).reporter.error("Encoding of string type: "+a+" unsupported")},c.prototype._encodeObjid=function(m,a,g){if("string"==typeof m){if(!a)return(this||zl).reporter.error("string objid given, but no values map found");if(!a.hasOwnProperty(m))return(this||zl).reporter.error("objid not found in values map");m=a[m].split(/[\s\.]+/g);for(a=0;a<m.length;a++)m[a]|=0}else if(Array.isArray(m))for(m=m.slice(),a=0;a<m.length;a++)m[a]|=0;if(!Array.isArray(m))return(this||
zl).reporter.error("objid() should be either array or string, got: "+JSON.stringify(m));if(!g){if(40<=m[1])return(this||zl).reporter.error("Second objid identifier OOB");m.splice(0,2,40*m[0]+m[1])}var l=0;for(a=0;a<m.length;a++)for(g=m[a],l++;128<=g;g>>=7)l++;l=new h(l);var q=l.length-1;for(a=m.length-1;0<=a;a--)for(g=m[a],l[q--]=127&g;0<(g>>=7);)l[q--]=128|127&g;return this._createEncoderBuffer(l)},c.prototype._encodeTime=function(m,a){var g;m=new Date(m);return"gentime"===a?g=[k(m.getFullYear()),
k(m.getUTCMonth()+1),k(m.getUTCDate()),k(m.getUTCHours()),k(m.getUTCMinutes()),k(m.getUTCSeconds()),"Z"].join(""):"utctime"===a?g=[k(m.getFullYear()%100),k(m.getUTCMonth()+1),k(m.getUTCDate()),k(m.getUTCHours()),k(m.getUTCMinutes()),k(m.getUTCSeconds()),"Z"].join(""):(this||zl).reporter.error("Encoding "+a+" time is not supported yet"),this._encodeStr(g,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(m,a){if("string"==typeof m){if(!a)return(this||
zl).reporter.error("String int or enum given, but no values map");if(!a.hasOwnProperty(m))return(this||zl).reporter.error("Values map doesn't contain: "+JSON.stringify(m));m=a[m]}"number"==typeof m||h.isBuffer(m)||(a=m.toArray(),!m.sign&&128&a[0]&&a.unshift(0),m=new h(a));if(h.isBuffer(m)){var g=m.length;0===m.length&&g++;g=new h(g);return m.copy(g),0===m.length&&(g[0]=0),this._createEncoderBuffer(g)}if(128>m)return this._createEncoderBuffer(m);if(256>m)return this._createEncoderBuffer([0,m]);g=1;
for(a=m;256<=a;a>>=8)g++;for(a=(g=Array(g)).length-1;0<=a;a--)g[a]=255&m,m>>=8;return 128&g[0]&&g.unshift(0),this._createEncoderBuffer(new h(g))},c.prototype._encodeBool=function(m){return this._createEncoderBuffer(m?255:0)},c.prototype._use=function(m,a){return"function"==typeof m&&(m=m(a)),m._getEncoder("der").tree},c.prototype._skipDefault=function(m,a,g){var l=(this||zl)._baseState;if(null===l.default)return!1;m=m.join();if(void 0===l.defaultBuffer&&(l.defaultBuffer=this._encodeValue(l.default,
a,g).join()),m.length!==l.defaultBuffer.length)return!1;for(a=0;a<m.length;a++)if(m[a]!==l.defaultBuffer[a])return!1;return!0},cM}function Y9(){if(IX)return dM;IX=!0;var f=dM;return f.der=GX(),f.pem=function(){function c(h){d.call(this||eM,h);(this||eM).enc="pem"}if(JX)return fM;JX=!0;var k=zh,d=GX();return k(c,d),fM=c,c.prototype.encode=function(h,n){h=d.prototype.encode.call(this||eM,h).toString("base64");for(var b=["-----BEGIN "+n.label+"-----"],e=0;e<h.length;e+=64)b.push(h.slice(e,e+64));return b.push("-----END "+
n.label+"-----"),b.join("\n")},fM}(),dM}function zG(){if(KX)return gM;KX=!0;var f=gM;return f.bignum=fl,f.define=function(){function c(h,n){(this||Fo).name=h;(this||Fo).body=n;(this||Fo).decoders={};(this||Fo).encoders={}}if(LX)return hM;LX=!0;var k=zG(),d=zh;return hM.define=function(h,n){return new c(h,n)},c.prototype._createNamed=function(h){try{var n=Mx.runInThisContext("(function "+(this||Fo).name+"(entity) {\n  this._initNamed(entity);\n})")}catch(b){n=function(e){this._initNamed(e)}}return d(n,
h),n.prototype._initNamed=function(b){h.call(this||Fo,b)},new n(this||Fo)},c.prototype._getDecoder=function(h){return h=h||"der",(this||Fo).decoders.hasOwnProperty(h)||((this||Fo).decoders[h]=this._createNamed(k.decoders[h])),(this||Fo).decoders[h]},c.prototype.decode=function(h,n,b){return this._getDecoder(n).decode(h,b)},c.prototype._getEncoder=function(h){return h=h||"der",(this||Fo).encoders.hasOwnProperty(h)||((this||Fo).encoders[h]=this._createNamed(k.encoders[h])),(this||Fo).encoders[h]},c.prototype.encode=
function(h,n,b){return this._getEncoder(n).encode(h,b)},hM}().define,f.base=sC(),f.constants=zX(),f.decoders=X9(),f.encoders=Y9(),gM}function Yz(f){var c;"object"!=typeof f||iM.isBuffer(f)||(c=f.passphrase,f=f.key);"string"==typeof f&&(f=iM.from(f));var k=c;f=f.toString();var d=f.match(Z9);if(d){var h="aes"+d[1],n=AG.from(d[2],"hex");var b=AG.from(d[3].replace(/[\r\n]/g,""),"base64");d=tC(k,n.slice(0,8),parseInt(d[1],10)).key;k=[];h=Go.createDecipheriv(h,d,n);k.push(h.update(b));k.push(h.final());
b=AG.concat(k)}else b=f.match($9),b=new AG(b[2].replace(/[\r\n]/g,""),"base64");f=f.match(a$)[1];switch(f){case "CERTIFICATE":var e=Vn.certificate.decode(b,"der").tbsCertificate.subjectPublicKeyInfo;case "PUBLIC KEY":switch(e||(e=Vn.PublicKey.decode(b,"der")),c=e.algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return Vn.RSAPublicKey.decode(e.subjectPublicKey.data,"der");case "1.2.840.10045.2.1":return e.subjectPrivateKey=e.subjectPublicKey,{type:"ec",data:e};case "1.2.840.10040.4.1":return e.algorithm.params.pub_key=
Vn.DSAparam.decode(e.subjectPublicKey.data,"der"),{type:"dsa",data:e.algorithm.params};default:throw Error("unknown key id "+c);}case "ENCRYPTED PRIVATE KEY":k=Vn.EncryptedPrivateKey.decode(b,"der"),b=c,h=k.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(k.algorithm.decrypt.kde.kdeparams.iters.toString(),10),e=b$[k.algorithm.decrypt.cipher.algo.join(".")],f=k.algorithm.decrypt.cipher.iv,c=k.subjectPrivateKey,k=parseInt(e.split("-")[1],10)/8,b=c$.pbkdf2Sync(b,h,n,k,"sha1"),e=d$.createDecipheriv(e,
b,f),f=[],b=(f.push(e.update(c)),f.push(e.final()),iM.concat(f));case "PRIVATE KEY":switch(c=(e=Vn.PrivateKey.decode(b,"der")).algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return Vn.RSAPrivateKey.decode(e.subjectPrivateKey,"der");case "1.2.840.10045.2.1":return{curve:e.algorithm.curve,privateKey:Vn.ECPrivateKey.decode(e.subjectPrivateKey,"der").privateKey};case "1.2.840.10040.4.1":return e.algorithm.params.priv_key=Vn.DSAparam.decode(e.subjectPrivateKey,"der"),{type:"dsa",params:e.algorithm.params};
default:throw Error("unknown key id "+c);}case "RSA PUBLIC KEY":return Vn.RSAPublicKey.decode(b,"der");case "RSA PRIVATE KEY":return Vn.RSAPrivateKey.decode(b,"der");case "DSA PRIVATE KEY":return{type:"dsa",params:Vn.DSAPrivateKey.decode(b,"der")};case "EC PRIVATE KEY":return{curve:(b=Vn.ECPrivateKey.decode(b,"der")).parameters.value,privateKey:b.privateKey};default:throw Error("unknown key type "+f);}}function MX(f,c,k,d){if((f=new Sm(f.toArray())).length<c.byteLength()){var h=new Sm(c.byteLength()-
f.length);h.fill(0);f=Sm.concat([h,f])}h=k.length;k=(k=jM(k,c)).mod(c);k=new Sm(k.toArray());k.length<c.byteLength()&&(c=new Sm(c.byteLength()-k.length),c.fill(0),k=Sm.concat([c,k]));c=k;k=new Sm(h);k.fill(1);h=new Sm(h);return h.fill(0),h=Nx(d,h).update(k).update(new Sm([0])).update(f).update(c).digest(),k=Nx(d,h).update(k).digest(),{k:h=Nx(d,h).update(k).update(new Sm([1])).update(f).update(c).digest(),v:Nx(d,h).update(k).digest()}}function jM(f,c){var k=new BG(f);f=(f.length<<3)-c.bitLength();
return 0<f&&k.ishrn(f),k}function NX(f,c,k){var d;do{for(d=new Sm(0);8*d.length<f.bitLength();)c.v=Nx(k,c.k).update(c.v).digest(),d=Sm.concat([d,c.v]);d=jM(d,f);c.k=Nx(k,c.k).update(c.v).update(new Sm([0])).digest();c.v=Nx(k,c.k).update(c.v).digest()}while(-1!==d.cmp(f));return d}function OX(f,c){if(0>=f.cmpn(0))throw Error("invalid sig");if(f.cmp(c)>=c)throw Error("invalid sig");}function uC(f){CG.Writable.call(this||Ek);f=Ox[f];if(!f)throw Error("Unknown message digest");(this||Ek)._hashType=f.hash;
(this||Ek)._hash=PX(f.hash);(this||Ek)._tag=f.id;(this||Ek)._signType=f.sign}function vC(f){CG.Writable.call(this||Ek);f=Ox[f];if(!f)throw Error("Unknown message digest");(this||Ek)._hash=PX(f.hash);(this||Ek)._tag=f.id;(this||Ek)._signType=f.sign}function QX(f){return new uC(f)}function RX(f){return new vC(f)}function Px(f){(this||Al).curveType=Ho[f];(this||Al).curveType||((this||Al).curveType={name:f});(this||Al).curve=new e$.ec((this||Al).curveType.name);(this||Al).keys=void 0}function kM(f,c,
k){Array.isArray(f)||(f=f.toArray());f=new qu(f);k&&f.length<k&&(k=new qu(k-f.length),k.fill(0),f=qu.concat([k,f]));return c?f.toString(c):f}function SX(){throw Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11");}function TX(f,c){if("number"!=typeof f||f!=f)throw new TypeError("offset must be a number");if(f>UX||0>f)throw new TypeError("offset must be a uint32");if(f>VX||f>c)throw new RangeError("offset out of range");}function WX(f,
c,k){if("number"!=typeof f||f!=f)throw new TypeError("size must be a number");if(f>UX||0>f)throw new TypeError("size must be a uint32");if(f+c>k||f>VX)throw new RangeError("buffer too small");}function XX(f,c,k,d){return lM.browser?(k=new Uint8Array(f.buffer,c,k),mM.getRandomValues(k),d?(lM.nextTick(function(){d(null,f)}),void 0):f):d?(YX(k,function(h,n){if(h)return d(h);n.copy(f,c);d(null,f)}),void 0):(YX(k).copy(f,c),f)}function f$(f){var c=[];f.replace(/[a-fA-F0-9]{2}/g,function(k){c.push(parseInt(k,
16))});return c}function DG(f){return f&&f.__esModule?f:{default:f}}function ZX(f,c){f=f||[];c=c||{};try{return new Blob(f,c)}catch(h){if("TypeError"!==h.name)throw h;for(var k=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),d=0;d<f.length;d+=1)k.append(f[d]);return k.getBlob(c.type)}}function $X(f){for(var c=f.length,k=new ArrayBuffer(c),d=new Uint8Array(k),h=0;h<c;h++)d[h]=f.charCodeAt(h);
return k}function aY(f,c){return ZX([$X(f)],{type:c})}function bY(f,c){var k=new FileReader,d="function"===typeof k.readAsBinaryString;k.onloadend=function(h){var n=h.target.result||"";if(d)return c(n);h="";n=new Uint8Array(n);for(var b=n.byteLength,e=0;e<b;e++)h+=String.fromCharCode(n[e]);c(h)};d?k.readAsBinaryString(f):k.readAsArrayBuffer(f)}function cY(f,c){bY(f,function(k){c(k)})}function g$(f,c,k){return f.webkitSlice?f.webkitSlice(c,k):f.slice(c,k)}function h$(f,c,k,d,h){if(0<k||d<c.size)c=
g$(c,k,d);dY.readAsArrayBuffer(c,function(n){f.append(n);h()})}function i$(f,c,k,d,h){if(0<k||d<c.length)c=c.substring(k,d);f.appendBinary(c);h()}function EG(f){return f&&"object"===typeof f&&"default"in f?f["default"]:f}function wC(f){var c;if(!f||"object"!==typeof f)return f;if(Array.isArray(f)){var k=[];var d=0;for(c=f.length;d<c;d++)k[d]=wC(f[d]);return k}if(f instanceof Date)return f.toISOString();if("undefined"!==typeof ArrayBuffer&&f instanceof ArrayBuffer||"undefined"!==typeof Blob&&f instanceof
Blob)return f instanceof ArrayBuffer?"function"===typeof f.slice?f=f.slice(0):(d=new ArrayBuffer(f.byteLength),k=new Uint8Array(d),f=new Uint8Array(f),k.set(f),f=d):(d=f.size,k=f.type,f="function"===typeof f.slice?f.slice(0,d,k):f.webkitSlice(0,d,k)),f;k=Object.getPrototypeOf(f);null===k?k=!0:(k=k.constructor,k="function"==typeof k&&k instanceof k&&eY.call(k)==j$);if(!k)return f;k={};for(d in f)Object.prototype.hasOwnProperty.call(f,d)&&(c=wC(f[d]),"undefined"!==typeof c&&(k[d]=c));return k}function fY(f){var c=
!1;return nM(function(k){if(c)throw Error("once called more than once");c=!0;f.apply(this,k)})}function gY(f){return nM(function(c){c=wC(c);var k=this,d="function"===typeof c[c.length-1]?c.pop():!1,h=new Promise(function(n,b){var e;try{var m=fY(function(a,g){a?b(a):n(g)});c.push(m);(e=f.apply(k,c))&&"function"===typeof e.then&&n(e)}catch(a){b(a)}});d&&h.then(function(n){d(null,n)},d);return h})}function k$(f,c,k){if(f.constructor.listeners("debug").length){for(var d=["api",f.name,c],h=0;h<k.length-
1;h++)d.push(k[h]);f.constructor.emit("debug",d);var n=k[k.length-1];k[k.length-1]=function(b,e){var m=["api",f.name,c];m=m.concat(b?["error",b]:["success",e]);f.constructor.emit("debug",m);n(b,e)}}}function oM(f,c){for(var k={},d=0,h=c.length;d<h;d++){var n=c[d];n in f&&(k[n]=f[n])}return k}function hY(f){return f}function l$(f){return[{ok:f}]}function m$(f){FG&&addEventListener("storage",function(c){f.emit(c.key)})}function Zz(){GG.call(this);this._listeners={};m$(this)}function pM(f){if("undefined"!==
typeof console&&"function"===typeof console[f]){var c=Array.prototype.slice.call(arguments,1);console[f].apply(console,c)}}function iY(f){if(!f)return null;var c=f.split("/");return 2===c.length?c:1===c.length?[f,f]:null}function jY(f,c,k){return new Promise(function(d,h){f.get(c,function(n,b){if(n){if(404!==n.status)return h(n);b={}}n=b._rev;b=k(b);if(!b)return d({updated:!1,rev:n});b._id=c;b._rev=n;d(n$(f,b,k))})})}function n$(f,c,k){return f.put(c).then(function(d){return{updated:!0,rev:d.rev}},
function(d){if(409!==d.status)throw d;return jY(f,c._id,k)})}function kY(f){var c=f.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");f=f.indexOf("=");-1===f&&(f=c);return[f,f===c?0:4-f%4]}function o$(f,c,k){for(var d=[],h=c;h<k;h+=3)c=(f[h]<<16&16711680)+(f[h+1]<<8&65280)+(f[h+2]&255),d.push(Cs[c>>18&63]+Cs[c>>12&63]+Cs[c>>6&63]+Cs[c&63]);return d.join("")}function ru(f){if(f>qM)throw new RangeError('The value "'+f+'" is invalid for option "size"');f=new Uint8Array(f);
Object.setPrototypeOf(f,we.prototype);return f}function we(f,c,k){if("number"===typeof f){if("string"===typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return rM(f)}return lY(f,c,k)}function lY(f,c,k){if("string"===typeof f){var d=c;if("string"!==typeof d||""===d)d="utf8";if(!we.isEncoding(d))throw new TypeError("Unknown encoding: "+d);c=mY(f,d)|0;k=ru(c);f=k.write(f,d);f!==c&&(k=k.slice(0,f));return k}if(ArrayBuffer.isView(f))return sM(f);if(null==
f)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(su(f,ArrayBuffer)||f&&su(f.buffer,ArrayBuffer)||"undefined"!==typeof SharedArrayBuffer&&(su(f,SharedArrayBuffer)||f&&su(f.buffer,SharedArrayBuffer))){if(0>c||f.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<c+(k||0))throw new RangeError('"length" is outside of buffer bounds');f=void 0===c&&void 0===k?new Uint8Array(f):
void 0===k?new Uint8Array(f,c):new Uint8Array(f,c,k);Object.setPrototypeOf(f,we.prototype);return f}if("number"===typeof f)throw new TypeError('The "value" argument must not be of type number. Received type number');d=f.valueOf&&f.valueOf();if(null!=d&&d!==f)return we.from(d,c,k);if(d=p$(f))return d;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof f[Symbol.toPrimitive])return we.from(f[Symbol.toPrimitive]("string"),c,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof f);}function nY(f){if("number"!==typeof f)throw new TypeError('"size" argument must be of type number');if(0>f)throw new RangeError('The value "'+f+'" is invalid for option "size"');}function rM(f){nY(f);return ru(0>f?0:tM(f)|0)}function sM(f){for(var c=0>f.length?0:tM(f.length)|0,k=ru(c),d=0;d<c;d+=1)k[d]=f[d]&255;return k}function p$(f){if(we.isBuffer(f)){var c=tM(f.length)|0,k=ru(c);if(0===k.length)return k;f.copy(k,0,0,c);return k}if(void 0!==f.length)return(c="number"!==typeof f.length)||
(c=f.length,c=c!==c),c?ru(0):sM(f);if("Buffer"===f.type&&Array.isArray(f.data))return sM(f.data)}function tM(f){if(f>=qM)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+qM.toString(16)+" bytes");return f|0}function mY(f,c){if(we.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||su(f,ArrayBuffer))return f.byteLength;if("string"!==typeof f)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);var k=
f.length,d=2<arguments.length&&!0===arguments[2];if(!d&&0===k)return 0;for(var h=!1;;)switch(c){case "ascii":case "latin1":case "binary":return k;case "utf8":case "utf-8":return uM(f).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*k;case "hex":return k>>>1;case "base64":return HG.toByteArray(oY(f)).length;default:if(h)return d?-1:uM(f).length;c=(""+c).toLowerCase();h=!0}}function q$(f,c,k){var d=!1;if(void 0===c||0>c)c=0;if(c>this.length)return"";if(void 0===k||k>this.length)k=
this.length;if(0>=k)return"";k>>>=0;c>>>=0;if(k<=c)return"";for(f||(f="utf8");;)switch(f){case "hex":f=this.length;if(!c||0>c)c=0;if(!k||0>k||k>f)k=f;for(f="";c<k;++c)f+=r$[this[c]];return f;case "utf8":case "utf-8":return pY(this,c,k);case "ascii":f="";for(k=Math.min(this.length,k);c<k;++c)f+=String.fromCharCode(this[c]&127);return f;case "latin1":case "binary":f="";for(k=Math.min(this.length,k);c<k;++c)f+=String.fromCharCode(this[c]);return f;case "base64":return c=0===c&&k===this.length?HG.fromByteArray(this):
HG.fromByteArray(this.slice(c,k)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,k);k="";for(f=0;f<c.length;f+=2)k+=String.fromCharCode(c[f]+256*c[f+1]);return k;default:if(d)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase();d=!0}}function Qx(f,c,k){var d=f[c];f[c]=f[k];f[k]=d}function qY(f,c,k,d,h){if(0===f.length)return-1;"string"===typeof k?(d=k,k=0):2147483647<k?k=2147483647:-2147483648>k&&(k=-2147483648);k=+k;k!==k&&(k=h?0:f.length-1);0>k&&(k=f.length+
k);if(k>=f.length){if(h)return-1;k=f.length-1}else if(0>k)if(h)k=0;else return-1;"string"===typeof c&&(c=we.from(c,d));if(we.isBuffer(c))return 0===c.length?-1:rY(f,c,k,d,h);if("number"===typeof c)return c&=255,"function"===typeof Uint8Array.prototype.indexOf?h?Uint8Array.prototype.indexOf.call(f,c,k):Uint8Array.prototype.lastIndexOf.call(f,c,k):rY(f,[c],k,d,h);throw new TypeError("val must be string, number or Buffer");}function rY(f,c,k,d,h){function n(a,g){return 1===b?a[g]:a.readUInt16BE(g*b)}
var b=1,e=f.length,m=c.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>f.length||2>c.length)return-1;b=2;e/=2;m/=2;k/=2}if(h)for(d=-1;k<e;k++)if(n(f,k)===n(c,-1===d?0:k-d)){if(-1===d&&(d=k),k-d+1===m)return d*b}else-1!==d&&(k-=k-d),d=-1;else for(k+m>e&&(k=e-m);0<=k;k--){e=!0;for(d=0;d<m;d++)if(n(f,k+d)!==n(c,d)){e=!1;break}if(e)return k}return-1}function pY(f,c,k){k=Math.min(f.length,k);for(var d=[];c<k;){var h=f[c],n=null,b=239<h?4:223<
h?3:191<h?2:1;if(c+b<=k)switch(b){case 1:128>h&&(n=h);break;case 2:var e=f[c+1];128===(e&192)&&(h=(h&31)<<6|e&63,127<h&&(n=h));break;case 3:e=f[c+1];var m=f[c+2];128===(e&192)&&128===(m&192)&&(h=(h&15)<<12|(e&63)<<6|m&63,2047<h&&(55296>h||57343<h)&&(n=h));break;case 4:e=f[c+1];m=f[c+2];var a=f[c+3];128===(e&192)&&128===(m&192)&&128===(a&192)&&(h=(h&15)<<18|(e&63)<<12|(m&63)<<6|a&63,65535<h&&1114112>h&&(n=h))}null===n?(n=65533,b=1):65535<n&&(n-=65536,d.push(n>>>10&1023|55296),n=56320|n&1023);d.push(n);
c+=b}f=d.length;if(f<=sY)d=String.fromCharCode.apply(String,d);else{k="";for(c=0;c<f;)k+=String.fromCharCode.apply(String,d.slice(c,c+=sY));d=k}return d}function am(f,c,k){if(0!==f%1||0>f)throw new RangeError("offset is not uint");if(f+c>k)throw new RangeError("Trying to access beyond buffer length");}function Wn(f,c,k,d,h,n){if(!we.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>h||c<n)throw new RangeError('"value" argument is out of bounds');if(k+d>f.length)throw new RangeError("Index out of range");
}function tY(f,c,k,d,h,n){if(k+d>f.length)throw new RangeError("Index out of range");if(0>k)throw new RangeError("Index out of range");}function uY(f,c,k,d,h){c=+c;k>>>=0;h||tY(f,c,k,4);$z.write(f,c,k,d,23,4);return k+4}function vY(f,c,k,d,h){c=+c;k>>>=0;h||tY(f,c,k,8);$z.write(f,c,k,d,52,8);return k+8}function oY(f){f=f.split("=")[0];f=f.trim().replace(s$,"");if(2>f.length)return"";for(;0!==f.length%4;)f+="=";return f}function uM(f,c){c=c||Infinity;for(var k,d=f.length,h=null,n=[],b=0;b<d;++b){k=
f.charCodeAt(b);if(55295<k&&57344>k){if(!h){if(56319<k){-1<(c-=3)&&n.push(239,191,189);continue}else if(b+1===d){-1<(c-=3)&&n.push(239,191,189);continue}h=k;continue}if(56320>k){-1<(c-=3)&&n.push(239,191,189);h=k;continue}k=(h-55296<<10|k-56320)+65536}else h&&-1<(c-=3)&&n.push(239,191,189);h=null;if(128>k){if(0>--c)break;n.push(k)}else if(2048>k){if(0>(c-=2))break;n.push(k>>6|192,k&63|128)}else if(65536>k){if(0>(c-=3))break;n.push(k>>12|224,k>>6&63|128,k&63|128)}else if(1114112>k){if(0>(c-=4))break;
n.push(k>>18|240,k>>12&63|128,k>>6&63|128,k&63|128)}else throw Error("Invalid code point");}return n}function wY(f){for(var c=[],k=0;k<f.length;++k)c.push(f.charCodeAt(k)&255);return c}function xC(f,c,k,d){for(var h=0;h<d&&!(h+k>=c.length||h>=f.length);++h)c[h+k]=f[h];return h}function su(f,c){return f instanceof c||null!=f&&null!=f.constructor&&null!=f.constructor.name&&f.constructor.name===c.name}function Zv(f){if("object"!==typeof f||null===f)throw new TypeError("First argument must be an abstract-leveldown compliant store");
(this||tu).db=f;(this||tu)._ended=!1;(this||tu)._nexting=!1}function Xq(f){if("object"!==typeof f||null===f)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||Bl).db=f;(this||Bl)._operations=[];(this||Bl)._written=!1}function jk(f){(this||Io).status="new";(this||Io).supports=t$(f,{status:!0})}function xY(f,c){var k={},d;for(d in c)if(u$.call(c,d)){var h=c[d];-1!==v$.indexOf(d)&&(h=f._serializeKey(h));k[d]=h}return k}function aA(f,c){yY.call(this||Yq,f);(this||
Yq)._options=c;(this||Yq)._iterator=null;(this||Yq)._operations=[]}function Rx(f){zY.call(this||bm,f.supports||{});w$.forEach(function(c){"function"!==typeof f[c]||(this||bm).supports.additionalMethods[c]||((this||bm).supports.additionalMethods[c]=!0)},this||bm);(this||bm)._db=f;(this||bm)._operations=[];AY(this||bm)}function x$(f){BY.concat("iterator").forEach(function(c){f["_"+c]=function(){return(this||bm)._db[c].apply((this||bm)._db,arguments)}});Object.keys(f.supports.additionalMethods).forEach(function(c){f[c]=
function(){return(this||bm)._db[c].apply((this||bm)._db,arguments)}})}function AY(f){BY.forEach(function(c){f["_"+c]=function(){(this||bm)._operations.push({method:c,args:arguments})}});Object.keys(f.supports.additionalMethods).forEach(function(c){f[c]=function(){(this||bm)._operations.push({method:c,args:arguments})}});f._iterator=function(c){c=new CY(f,c);(this||bm)._operations.push({iterator:c});return c}}function DY(){if(EY)return FY;EY=!0;return FY=vs.EventEmitter}function bA(){function f(d,
h,n){n||(n=Error);var b=function(e,m,a){return n.call(this,"string"===typeof h?h:h(e,m,a))||this};$jscomp.inherits(b,n);b.prototype.name=n.name;b.prototype.code=d;k[d]=b}function c(d,h){if(Array.isArray(d)){var n=d.length;d=d.map(function(b){return String(b)});return 2<n?"one of "+h+" "+d.slice(0,n-1).join(", ")+", or "+d[n-1]:2===n?"one of "+h+" "+d[0]+" or "+d[1]:"of "+h+" "+d[0]}return"of "+h+" "+String(d)}if(GY)return vM;GY=!0;var k={};f("ERR_INVALID_OPT_VALUE",function(d,h){return'The value "'+
h+'" is invalid for option "'+d+'"'},TypeError);f("ERR_INVALID_ARG_TYPE",function(d,h,n){var b;if(b="string"===typeof h)b="not "===h.substr(0,4);b?(b="must not be",h=h.replace(/^not /,"")):b="must be";var e=void 0;if(void 0===e||e>d.length)e=d.length;" argument"===d.substring(e-9,e)?d="The "+d+" "+b+" "+c(h,"type"):(e=void 0,"number"!==typeof e&&(e=0),e=e+1>d.length?!1:-1!==d.indexOf(".",e),d='The "'+d+'" '+(e?"property":"argument")+" "+b+" "+c(h,"type"));return d+(". Received type "+typeof n)},TypeError);
f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");f("ERR_METHOD_NOT_IMPLEMENTED",function(d){return"The "+d+" method is not implemented"});f("ERR_STREAM_PREMATURE_CLOSE","Premature close");f("ERR_STREAM_DESTROYED",function(d){return"Cannot call "+d+" after a stream was destroyed"});f("ERR_MULTIPLE_CALLBACK","Callback called multiple times");f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");f("ERR_STREAM_WRITE_AFTER_END","write after end");f("ERR_STREAM_NULL_VALUES","May not write null values to stream",
TypeError);f("ERR_UNKNOWN_ENCODING",function(d){return"Unknown encoding: "+d},TypeError);f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");vM.codes=k;return vM}function wM(f){try{if(!xM.localStorage)return!1}catch(c){return!1}f=xM.localStorage[f];return null==f?!1:"true"===String(f).toLowerCase()}function HY(f,c){for(var k in f)c[k]=f[k]}function Sx(f,c,k){return Ds(f,c,k)}function y$(f){if(!f)return"utf8";for(var c;;)switch(f){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";
case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return f;default:if(c)return;f=(""+f).toLowerCase();c=!0}}function yC(f){var c=y$(f);if("string"!==typeof c&&(yM.isEncoding===IY||!IY(f)))throw Error("Unknown encoding: "+f);this.encoding=c||f;switch(this.encoding){case "utf16le":this.text=z$;this.end=A$;f=4;break;case "utf8":this.fillLast=B$;f=4;break;case "base64":this.text=C$;this.end=D$;f=3;break;default:this.write=E$;this.end=F$;return}this.lastTotal=this.lastNeed=
0;this.lastChar=yM.allocUnsafe(f)}function zM(f){return 127>=f?0:6===f>>5?2:14===f>>4?3:30===f>>3?4:2===f>>6?-1:-2}function G$(f,c,k){var d=c.length-1;if(d<k)return 0;var h=zM(c[d]);if(0<=h)return 0<h&&(f.lastNeed=h-1),h;if(--d<k||-2===h)return 0;h=zM(c[d]);if(0<=h)return 0<h&&(f.lastNeed=h-2),h;if(--d<k||-2===h)return 0;h=zM(c[d]);return 0<=h?(0<h&&(2===h?h=0:f.lastNeed=h-3),h):0}function B$(f){var c=this.lastTotal-this.lastNeed;a:if(128!==(f[0]&192)){this.lastNeed=0;var k="\ufffd"}else{if(1<this.lastNeed&&
1<f.length){if(128!==(f[1]&192)){this.lastNeed=1;k="\ufffd";break a}if(2<this.lastNeed&&2<f.length&&128!==(f[2]&192)){this.lastNeed=2;k="\ufffd";break a}}k=void 0}if(void 0!==k)return k;if(this.lastNeed<=f.length)return f.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,c,0,f.length);this.lastNeed-=f.length}function z$(f,c){if(0===(f.length-c)%2){if(c=f.toString("utf16le",c)){var k=c.charCodeAt(c.length-1);if(55296<=k&&56319>=k)return this.lastNeed=
2,this.lastTotal=4,this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1],c.slice(0,-1)}return c}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=f[f.length-1];return f.toString("utf16le",c,f.length-1)}function A$(f){f=f&&f.length?this.write(f):"";return this.lastNeed?f+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):f}function C$(f,c){var k=(f.length-c)%3;if(0===k)return f.toString("base64",c);this.lastNeed=3-k;this.lastTotal=3;1===k?this.lastChar[0]=f[f.length-1]:(this.lastChar[0]=
f[f.length-2],this.lastChar[1]=f[f.length-1]);return f.toString("base64",c,f.length-k)}function D$(f){f=f&&f.length?this.write(f):"";return this.lastNeed?f+this.lastChar.toString("base64",0,3-this.lastNeed):f}function E$(f){return f.toString(this.encoding)}function F$(f){return f&&f.length?this.write(f):""}function AM(){function f(h){var n=!1;return function(){if(!n){n=!0;for(var b=arguments.length,e=Array(b),m=0;m<b;m++)e[m]=arguments[m];h.apply(this,e)}}}function c(){}function k(h,n,b){if("function"===
typeof n)return k(h,null,n);n||(n={});b=f(b||c);var e=n.readable||!1!==n.readable&&h.readable,m=n.writable||!1!==n.writable&&h.writable,a=function(){h.writable||l()},g=h._writableState&&h._writableState.finished,l=function(){m=!1;g=!0;e||b.call(h)},q=h._readableState&&h._readableState.endEmitted,r=function(){e=!1;q=!0;m||b.call(h)},u=function(z){b.call(h,z)},v=function(){var z;if(e&&!q)return h._readableState&&h._readableState.ended||(z=new d),b.call(h,z);if(m&&!g)return h._writableState&&h._writableState.ended||
(z=new d),b.call(h,z)},y=function(){h.req.on("finish",l)};if(h.setHeader&&"function"===typeof h.abort)if(h.on("complete",l),h.on("abort",v),h.req)y();else h.on("request",y);else m&&!h._writableState&&(h.on("end",a),h.on("close",a));h.on("end",r);h.on("finish",l);if(!1!==n.error)h.on("error",u);h.on("close",v);return function(){h.removeListener("complete",l);h.removeListener("abort",v);h.removeListener("request",y);h.req&&h.req.removeListener("finish",l);h.removeListener("end",a);h.removeListener("close",
a);h.removeListener("finish",l);h.removeListener("end",r);h.removeListener("error",u);h.removeListener("close",v)}}if(JY)return KY;JY=!0;var d=bA().codes.ERR_STREAM_PREMATURE_CLOSE;return KY=k}function H$(){if(LY)return MY;LY=!0;return MY=function(){throw Error("Readable.from is not available in the browser");}}function I$(){function f(e,m){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);m&&(g=g.filter(function(l){return Object.getOwnPropertyDescriptor(e,
l).enumerable}));a.push.apply(a,g)}return a}function c(e){for(var m=1;m<arguments.length;m++){var a=null!=arguments[m]?arguments[m]:{};m%2?f(Object(a),!0).forEach(function(g){var l=a[g];g in e?Object.defineProperty(e,g,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[g]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach(function(g){Object.defineProperty(e,g,Object.getOwnPropertyDescriptor(a,g))})}return e}function k(e,m){for(var a=
0;a<m.length;a++){var g=m[a];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(e,g.key,g)}}function d(e,m,a){m&&k(e.prototype,m);a&&k(e,a);return e}if(NY)return OY;NY=!0;var h=Rh.Buffer,n=PY.inspect,b=n&&n.custom||"inspect";return OY=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.tail=this.head=null;this.length=0}d(e,[{key:"push",value:function(m){m={data:m,next:null};0<this.length?this.tail.next=
m:this.head=m;this.tail=m;++this.length}},{key:"unshift",value:function(m){m={data:m,next:this.head};0===this.length&&(this.tail=m);this.head=m;++this.length}},{key:"shift",value:function(){if(0!==this.length){var m=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return m}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(m){if(0===this.length)return"";for(var a=this.head,g=""+a.data;a=a.next;)g+=m+a.data;return g}},
{key:"concat",value:function(m){if(0===this.length)return h.alloc(0);m=h.allocUnsafe(m>>>0);for(var a=this.head,g=0;a;)h.prototype.copy.call(a.data,m,g),g+=a.data.length,a=a.next;return m}},{key:"consume",value:function(m,a){m<this.head.data.length?(a=this.head.data.slice(0,m),this.head.data=this.head.data.slice(m)):a=m===this.head.data.length?this.shift():a?this._getString(m):this._getBuffer(m);return a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(m){var a=
this.head,g=1,l=a.data;for(m-=l.length;a=a.next;){var q=a.data,r=m>q.length?q.length:m;l=r===q.length?l+q:l+q.slice(0,m);m-=r;if(0===m){r===q.length?(++g,this.head=a.next?a.next:this.tail=null):(this.head=a,a.data=q.slice(r));break}++g}this.length-=g;return l}},{key:"_getBuffer",value:function(m){var a=h.allocUnsafe(m),g=this.head,l=1;g.data.copy(a);for(m-=g.data.length;g=g.next;){var q=g.data,r=m>q.length?q.length:m;q.copy(a,a.length-m,0,r);m-=r;if(0===m){r===q.length?(++l,this.head=g.next?g.next:
this.tail=null):(this.head=g,g.data=q.slice(r));break}++l}this.length-=l;return a}},{key:b,value:function(m,a){return n(this,c({},a,{depth:0,customInspect:!1}))}}]);return e}()}function QY(){function f(h,n){k(h,n);c(h)}function c(h){h._writableState&&!h._writableState.emitClose||h._readableState&&!h._readableState.emitClose||h.emit("close")}function k(h,n){h.emit("error",n)}if(RY)return SY;RY=!0;var d=zi;return SY={destroy:function(h,n){var b=this,e=this._writableState&&this._writableState.destroyed;
if(this._readableState&&this._readableState.destroyed||e)return n?n(h):h&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,d.nextTick(k,this,h)):d.nextTick(k,this,h)),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(h||null,function(m){!n&&m?b._writableState?b._writableState.errorEmitted?d.nextTick(c,b):(b._writableState.errorEmitted=!0,d.nextTick(f,b,m)):d.nextTick(f,b,m):
n?(d.nextTick(c,b),n(m)):d.nextTick(c,b)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(h,
n){var b=h._readableState,e=h._writableState;b&&b.autoDestroy||e&&e.autoDestroy?h.destroy(n):h.emit("error",n)}}}function TY(){if(UY)return VY;UY=!0;var f=bA().codes.ERR_INVALID_OPT_VALUE;return VY={getHighWaterMark:function(c,k,d,h){k=null!=k.highWaterMark?k.highWaterMark:h?k[d]:null;if(null!=k){if(!isFinite(k)||Math.floor(k)!==k||0>k)throw new f(h?d:"highWaterMark",k);return Math.floor(k)}return c.objectMode?16:16384}}}function WY(){function f(L){var N=this;this.entry=this.next=null;this.finish=
function(){var aa=N.entry;for(N.entry=null;aa;){var Y=aa.callback;L.pendingcb--;Y(void 0);aa=aa.next}L.corkedRequestsFree.next=N}}function c(){}function k(L,N,aa){l=l||cA();L=L||{};"boolean"!==typeof aa&&(aa=N instanceof l);this.objectMode=!!L.objectMode;aa&&(this.objectMode=this.objectMode||!!L.writableObjectMode);this.highWaterMark=z(this,L,"writableHighWaterMark",aa);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==L.decodeStrings;this.defaultEncoding=
L.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(Y){var ma=N._writableState,bb=ma.sync,Qa=ma.writecb;if("function"!==typeof Qa)throw new E;ma.writing=!1;ma.writecb=null;ma.length-=ma.writelen;ma.writelen=0;Y?(--ma.pendingcb,bb?(g.nextTick(Qa,Y),g.nextTick(a,N,ma),N._writableState.errorEmitted=!0,D(N,Y)):(Qa(Y),N._writableState.errorEmitted=!0,D(N,Y),a(N,ma))):((Y=e(ma)||N.destroyed)||ma.corked||ma.bufferProcessing||!ma.bufferedRequest||
b(N,ma),bb?g.nextTick(n,N,ma,Y,Qa):n(N,ma,Y,Qa))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==L.emitClose;this.autoDestroy=!!L.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new f(this)}function d(L){l=l||cA();var N=this instanceof l;if(!N&&!O.call(d,this))return new d(L);this._writableState=new k(L,this,N);this.writable=!0;L&&("function"===typeof L.write&&(this._write=
L.write),"function"===typeof L.writev&&(this._writev=L.writev),"function"===typeof L.destroy&&(this._destroy=L.destroy),"function"===typeof L.final&&(this._final=L.final));r.call(this)}function h(L,N,aa,Y,ma,bb,Qa){N.writelen=Y;N.writecb=Qa;N.writing=!0;N.sync=!0;if(N.destroyed)N.onwrite(new J("write"));else aa?L._writev(ma,N.onwrite):L._write(ma,bb,N.onwrite);N.sync=!1}function n(L,N,aa,Y){!aa&&0===N.length&&N.needDrain&&(N.needDrain=!1,L.emit("drain"));N.pendingcb--;Y();a(L,N)}function b(L,N){N.bufferProcessing=
!0;var aa=N.bufferedRequest;if(L._writev&&aa&&aa.next){var Y=Array(N.bufferedRequestCount),ma=N.corkedRequestsFree;ma.entry=aa;for(var bb=0,Qa=!0;aa;)Y[bb]=aa,aa.isBuf||(Qa=!1),aa=aa.next,bb+=1;Y.allBuffers=Qa;h(L,N,!0,N.length,Y,"",ma.finish);N.pendingcb++;N.lastBufferedRequest=null;ma.next?(N.corkedRequestsFree=ma.next,ma.next=null):N.corkedRequestsFree=new f(N);N.bufferedRequestCount=0}else{for(;aa&&(Y=aa.chunk,h(L,N,!1,N.objectMode?1:Y.length,Y,aa.encoding,aa.callback),aa=aa.next,N.bufferedRequestCount--,
!N.writing););null===aa&&(N.lastBufferedRequest=null)}N.bufferedRequest=aa;N.bufferProcessing=!1}function e(L){return L.ending&&0===L.length&&null===L.bufferedRequest&&!L.finished&&!L.writing}function m(L,N){L._final(function(aa){N.pendingcb--;aa&&D(L,aa);N.prefinished=!0;L.emit("prefinish");a(L,N)})}function a(L,N){var aa=e(N);aa&&(N.prefinished||N.finalCalled||("function"!==typeof L._final||N.destroyed?(N.prefinished=!0,L.emit("prefinish")):(N.pendingcb++,N.finalCalled=!0,g.nextTick(m,L,N))),0===
N.pendingcb&&(N.finished=!0,L.emit("finish"),N.autoDestroy&&(N=L._readableState,(!N||N.autoDestroy&&N.endEmitted)&&L.destroy())));return aa}if(XY)return BM;XY=!0;var g=zi;BM=d;var l;d.WritableState=k;var q={deprecate:J$},r=DY(),u=Rh.Buffer,v=K$.Uint8Array||function(){},y=QY(),z=TY().getHighWaterMark,A=bA().codes,B=A.ERR_INVALID_ARG_TYPE,G=A.ERR_METHOD_NOT_IMPLEMENTED,E=A.ERR_MULTIPLE_CALLBACK,K=A.ERR_STREAM_CANNOT_PIPE,J=A.ERR_STREAM_DESTROYED,P=A.ERR_STREAM_NULL_VALUES,ea=A.ERR_STREAM_WRITE_AFTER_END,
ra=A.ERR_UNKNOWN_ENCODING,D=y.errorOrDestroy;sk(d,r);k.prototype.getBuffer=function(){for(var L=this.bufferedRequest,N=[];L;)N.push(L),L=L.next;return N};(function(){try{Object.defineProperty(k.prototype,"buffer",{get:q.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(L){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var O=Function.prototype[Symbol.hasInstance];
Object.defineProperty(d,Symbol.hasInstance,{value:function(L){return O.call(this,L)?!0:this!==d?!1:L&&L._writableState instanceof k}})}else O=function(L){return L instanceof this};d.prototype.pipe=function(){D(this,new K)};d.prototype.write=function(L,N,aa){var Y=this._writableState,ma=!1,bb;if(bb=!Y.objectMode)bb=L,bb=u.isBuffer(bb)||bb instanceof v;bb&&!u.isBuffer(L)&&(L=u.from(L));"function"===typeof N&&(aa=N,N=null);bb?N="buffer":N||(N=Y.defaultEncoding);"function"!==typeof aa&&(aa=c);if(Y.ending)Y=
aa,aa=new ea,D(this,aa),g.nextTick(Y,aa);else{var Qa;if(!(Qa=bb)){Qa=L;var X=aa,V;null===Qa?V=new P:"string"===typeof Qa||Y.objectMode||(V=new B("chunk",["string","Buffer"],Qa));V?(D(this,V),g.nextTick(X,V),Qa=!1):Qa=!0}Qa&&(Y.pendingcb++,ma=bb,ma||(V=L,Y.objectMode||!1===Y.decodeStrings||"string"!==typeof V||(V=u.from(V,N)),L!==V&&(ma=!0,N="buffer",L=V)),bb=Y.objectMode?1:L.length,Y.length+=bb,V=Y.length<Y.highWaterMark,V||(Y.needDrain=!0),Y.writing||Y.corked?(bb=Y.lastBufferedRequest,Y.lastBufferedRequest=
{chunk:L,encoding:N,isBuf:ma,callback:aa,next:null},bb?bb.next=Y.lastBufferedRequest:Y.bufferedRequest=Y.lastBufferedRequest,Y.bufferedRequestCount+=1):h(this,Y,!1,bb,L,N,aa),ma=V)}return ma};d.prototype.cork=function(){this._writableState.corked++};d.prototype.uncork=function(){var L=this._writableState;L.corked&&(L.corked--,L.writing||L.corked||L.bufferProcessing||!L.bufferedRequest||b(this,L))};d.prototype.setDefaultEncoding=function(L){"string"===typeof L&&(L=L.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((L+
"").toLowerCase())))throw new ra(L);this._writableState.defaultEncoding=L;return this};Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});d.prototype._write=function(L,N,aa){aa(new G("_write()"))};d.prototype._writev=null;d.prototype.end=function(L,N,aa){var Y=this._writableState;
"function"===typeof L?(aa=L,N=L=null):"function"===typeof N&&(aa=N,N=null);null!==L&&void 0!==L&&this.write(L,N);Y.corked&&(Y.corked=1,this.uncork());if(!Y.ending){L=aa;Y.ending=!0;a(this,Y);if(L)if(Y.finished)g.nextTick(L);else this.once("finish",L);Y.ended=!0;this.writable=!1}return this};Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===
this._writableState?!1:this._writableState.destroyed},set:function(L){this._writableState&&(this._writableState.destroyed=L)}});d.prototype.destroy=y.destroy;d.prototype._undestroy=y.undestroy;d.prototype._destroy=function(L,N){N(L)};return BM}function cA(){function f(a){if(!(this instanceof f))return new f(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",
c)))}function c(){this._writableState.ended||d.nextTick(k,this)}function k(a){a.end()}if(YY)return CM;YY=!0;var d=zi,h=Object.keys||function(a){var g=[],l;for(l in a)g.push(l);return g};CM=f;var n=ZY(),b=WY();sk(f,n);h=h(b.prototype);for(var e=0;e<h.length;e++){var m=h[e];f.prototype[m]||(f.prototype[m]=b.prototype[m])}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(f.prototype,"writableBuffer",
{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=
a,this._writableState.destroyed=a)}});return CM}function L$(){function f(z,A,B){A in z?Object.defineProperty(z,A,{value:B,enumerable:!0,configurable:!0,writable:!0}):z[A]=B;return z}function c(z,A){return{value:z,done:A}}function k(z){var A=z[m];if(null!==A){var B=z[u].read();null!==B&&(z[q]=null,z[m]=null,z[a]=null,A(c(B,!1)))}}function d(z){n.nextTick(k,z)}function h(z,A){return function(B,G){z.then(function(){if(A[l])B(c(void 0,!0));else A[r](B,G)},G)}}if($Y)return aZ;$Y=!0;var n=zi,b,e=AM(),m=
Symbol("lastResolve"),a=Symbol("lastReject"),g=Symbol("error"),l=Symbol("ended"),q=Symbol("lastPromise"),r=Symbol("handlePromise"),u=Symbol("stream"),v=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((b={get stream(){return this[u]},next:function(){var z=this,A=this[g];if(null!==A)return Promise.reject(A);if(this[l])return Promise.resolve(c(void 0,!0));if(this[u].destroyed)return new Promise(function(B,G){n.nextTick(function(){z[g]?G(z[g]):B(c(void 0,!0))})});if(A=this[q])A=new Promise(h(A,
this));else{A=this[u].read();if(null!==A)return Promise.resolve(c(A,!1));A=new Promise(this[r])}return this[q]=A}},f(b,Symbol.asyncIterator,function(){return this}),f(b,"return",function(){var z=this;return new Promise(function(A,B){z[u].destroy(null,function(G){G?B(G):A(c(void 0,!0))})})}),b),v);return aZ=function(z){var A,B=Object.create(y,(A={},f(A,u,{value:z,writable:!0}),f(A,m,{value:null,writable:!0}),f(A,a,{value:null,writable:!0}),f(A,g,{value:null,writable:!0}),f(A,l,{value:z._readableState.endEmitted,
writable:!0}),f(A,r,{value:function(G,E){var K=B[u].read();K?(B[q]=null,B[m]=null,B[a]=null,G(c(K,!1))):(B[m]=G,B[a]=E)},writable:!0}),A));B[q]=null;e(z,function(G){if(G&&"ERR_STREAM_PREMATURE_CLOSE"!==G.code){var E=B[a];null!==E&&(B[q]=null,B[m]=null,B[a]=null,E(G));B[g]=G}else G=B[m],null!==G&&(B[q]=null,B[m]=null,B[a]=null,G(c(void 0,!0))),B[l]=!0});z.on("readable",d.bind(null,B));return B}}function ZY(){function f(ha,xa,yb){if("function"===typeof ha.prependListener)return ha.prependListener(xa,
yb);if(ha._events&&ha._events[xa])Array.isArray(ha._events[xa])?ha._events[xa].unshift(yb):ha._events[xa]=[yb,ha._events[xa]];else ha.on(xa,yb)}function c(ha,xa,yb){G=G||cA();ha=ha||{};"boolean"!==typeof yb&&(yb=xa instanceof G);this.objectMode=!!ha.objectMode;yb&&(this.objectMode=this.objectMode||!!ha.readableObjectMode);this.highWaterMark=D(this,ha,"readableHighWaterMark",yb);this.buffer=new ra;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=
!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==ha.emitClose;this.autoDestroy=!!ha.autoDestroy;this.destroyed=!1;this.defaultEncoding=ha.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;ha.encoding&&(ma||(ma=DM.StringDecoder),this.decoder=new ma(ha.encoding),this.encoding=ha.encoding)}function k(ha){G=G||cA();if(!(this instanceof k))return new k(ha);this._readableState=
new c(ha,this,this instanceof G);this.readable=!0;ha&&("function"===typeof ha.read&&(this._read=ha.read),"function"===typeof ha.destroy&&(this._destroy=ha.destroy));E.call(this)}function d(ha,xa,yb,ec,Nb){ea("readableAddChunk",xa);var ac=ha._readableState;if(null===xa)ac.reading=!1,ea("onEofChunk"),ac.ended||(ac.decoder&&(xa=ac.decoder.end())&&xa.length&&(ac.buffer.push(xa),ac.length+=ac.objectMode?1:xa.length),ac.ended=!0,ac.sync?b(ha):(ac.needReadable=!1,ac.emittedReadable||(ac.emittedReadable=
!0,e(ha))));else{if(!Nb){Nb=xa;var Cc;K.isBuffer(Nb)||Nb instanceof J||"string"===typeof Nb||void 0===Nb||ac.objectMode||(Cc=new L("chunk",["string","Buffer","Uint8Array"],Nb));var Hb=Cc}if(Hb)X(ha,Hb);else if(ac.objectMode||xa&&0<xa.length)if("string"===typeof xa||ac.objectMode||Object.getPrototypeOf(xa)===K.prototype||(xa=K.from(xa)),ec)ac.endEmitted?X(ha,new Y):h(ha,ac,xa,!0);else if(ac.ended)X(ha,new N);else{if(ac.destroyed)return!1;ac.reading=!1;ac.decoder&&!yb?(xa=ac.decoder.write(xa),ac.objectMode||
0!==xa.length?h(ha,ac,xa,!1):m(ha,ac)):h(ha,ac,xa,!1)}else ec||(ac.reading=!1,m(ha,ac))}return!ac.ended&&(ac.length<ac.highWaterMark||0===ac.length)}function h(ha,xa,yb,ec){xa.flowing&&0===xa.length&&!xa.sync?(xa.awaitDrain=0,ha.emit("data",yb)):(xa.length+=xa.objectMode?1:yb.length,ec?xa.buffer.unshift(yb):xa.buffer.push(yb),xa.needReadable&&b(ha));m(ha,xa)}function n(ha,xa){if(0>=ha||0===xa.length&&xa.ended)return 0;if(xa.objectMode)return 1;if(ha!==ha)return xa.flowing&&xa.length?xa.buffer.head.data.length:
xa.length;if(ha>xa.highWaterMark){var yb=ha;1073741824<=yb?yb=1073741824:(yb--,yb|=yb>>>1,yb|=yb>>>2,yb|=yb>>>4,yb|=yb>>>8,yb|=yb>>>16,yb++);xa.highWaterMark=yb}return ha<=xa.length?ha:xa.ended?xa.length:(xa.needReadable=!0,0)}function b(ha){var xa=ha._readableState;ea("emitReadable",xa.needReadable,xa.emittedReadable);xa.needReadable=!1;xa.emittedReadable||(ea("emitReadable",xa.flowing),xa.emittedReadable=!0,B.nextTick(e,ha))}function e(ha){var xa=ha._readableState;ea("emitReadable_",xa.destroyed,
xa.length,xa.ended);xa.destroyed||!xa.length&&!xa.ended||(ha.emit("readable"),xa.emittedReadable=!1);xa.needReadable=!xa.flowing&&!xa.ended&&xa.length<=xa.highWaterMark;u(ha)}function m(ha,xa){xa.readingMore||(xa.readingMore=!0,B.nextTick(a,ha,xa))}function a(ha,xa){for(;!xa.reading&&!xa.ended&&(xa.length<xa.highWaterMark||xa.flowing&&0===xa.length);){var yb=xa.length;ea("maybeReadMore read 0");ha.read(0);if(yb===xa.length)break}xa.readingMore=!1}function g(ha){return function(){var xa=ha._readableState;
ea("pipeOnDrain",xa.awaitDrain);xa.awaitDrain&&xa.awaitDrain--;0===xa.awaitDrain&&ha.listeners("data").length&&(xa.flowing=!0,u(ha))}}function l(ha){var xa=ha._readableState;xa.readableListening=0<ha.listenerCount("readable");xa.resumeScheduled&&!xa.paused?xa.flowing=!0:0<ha.listenerCount("data")&&ha.resume()}function q(ha){ea("readable nexttick read 0");ha.read(0)}function r(ha,xa){ea("resume",xa.reading);xa.reading||ha.read(0);xa.resumeScheduled=!1;ha.emit("resume");u(ha);xa.flowing&&!xa.reading&&
ha.read(0)}function u(ha){var xa=ha._readableState;for(ea("flow",xa.flowing);xa.flowing&&null!==ha.read(););}function v(ha,xa){if(0===xa.length)return null;xa.objectMode?ha=xa.buffer.shift():!ha||ha>=xa.length?(ha=xa.decoder?xa.buffer.join(""):1===xa.buffer.length?xa.buffer.first():xa.buffer.concat(xa.length),xa.buffer.clear()):ha=xa.buffer.consume(ha,xa.decoder);return ha}function y(ha){var xa=ha._readableState;ea("endReadable",xa.endEmitted);xa.endEmitted||(xa.ended=!0,B.nextTick(z,xa,ha))}function z(ha,
xa){ea("endReadableNT",ha.endEmitted,ha.length);ha.endEmitted||0!==ha.length||(ha.endEmitted=!0,xa.readable=!1,xa.emit("end"),ha.autoDestroy&&(ha=xa._writableState,(!ha||ha.autoDestroy&&ha.finished)&&xa.destroy()))}function A(ha,xa){for(var yb=0,ec=ha.length;yb<ec;yb++)if(ha[yb]===xa)return yb;return-1}if(bZ)return EM;bZ=!0;var B=zi;EM=k;var G;k.ReadableState=c;var E=DY(),K=Rh.Buffer,J=M$.Uint8Array||function(){},P=PY;var ea=P&&P.debuglog?P.debuglog("stream"):function(){};var ra=I$();P=QY();var D=
TY().getHighWaterMark,O=bA().codes,L=O.ERR_INVALID_ARG_TYPE,N=O.ERR_STREAM_PUSH_AFTER_EOF,aa=O.ERR_METHOD_NOT_IMPLEMENTED,Y=O.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,ma,bb,Qa;sk(k,E);var X=P.errorOrDestroy,V=["error","close","destroy","pause","resume"];Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(ha){this._readableState&&(this._readableState.destroyed=ha)}});k.prototype.destroy=P.destroy;k.prototype._undestroy=
P.undestroy;k.prototype._destroy=function(ha,xa){xa(ha)};k.prototype.push=function(ha,xa){var yb=this._readableState;if(yb.objectMode)var ec=!0;else"string"===typeof ha&&(xa=xa||yb.defaultEncoding,xa!==yb.encoding&&(ha=K.from(ha,xa),xa=""),ec=!0);return d(this,ha,xa,!1,ec)};k.prototype.unshift=function(ha){return d(this,ha,null,!0,!1)};k.prototype.isPaused=function(){return!1===this._readableState.flowing};k.prototype.setEncoding=function(ha){ma||(ma=DM.StringDecoder);ha=new ma(ha);this._readableState.decoder=
ha;this._readableState.encoding=this._readableState.decoder.encoding;for(var xa=this._readableState.buffer.head,yb="";null!==xa;)yb+=ha.write(xa.data),xa=xa.next;this._readableState.buffer.clear();""!==yb&&this._readableState.buffer.push(yb);this._readableState.length=yb.length;return this};k.prototype.read=function(ha){ea("read",ha);ha=parseInt(ha,10);var xa=this._readableState,yb=ha;0!==ha&&(xa.emittedReadable=!1);if(0===ha&&xa.needReadable&&((0!==xa.highWaterMark?xa.length>=xa.highWaterMark:0<
xa.length)||xa.ended))return ea("read: emitReadable",xa.length,xa.ended),0===xa.length&&xa.ended?y(this):b(this),null;ha=n(ha,xa);if(0===ha&&xa.ended)return 0===xa.length&&y(this),null;var ec=xa.needReadable;ea("need readable",ec);if(0===xa.length||xa.length-ha<xa.highWaterMark)ec=!0,ea("length less than watermark",ec);xa.ended||xa.reading?ea("reading or ended",!1):ec&&(ea("do read"),xa.reading=!0,xa.sync=!0,0===xa.length&&(xa.needReadable=!0),this._read(xa.highWaterMark),xa.sync=!1,xa.reading||(ha=
n(yb,xa)));ec=0<ha?v(ha,xa):null;null===ec?(xa.needReadable=xa.length<=xa.highWaterMark,ha=0):(xa.length-=ha,xa.awaitDrain=0);0===xa.length&&(xa.ended||(xa.needReadable=!0),yb!==ha&&xa.ended&&y(this));null!==ec&&this.emit("data",ec);return ec};k.prototype._read=function(ha){X(this,new aa("_read()"))};k.prototype.pipe=function(ha,xa){function yb(hb,Pb){ea("onunpipe");hb===yd&&Pb&&!1===Pb.hasUnpiped&&(Pb.hasUnpiped=!0,ea("cleanup"),ha.removeListener("close",Cc),ha.removeListener("finish",Hb),ha.removeListener("drain",
na),ha.removeListener("error",ac),ha.removeListener("unpipe",yb),yd.removeListener("end",ec),yd.removeListener("end",gd),yd.removeListener("data",Nb),Aa=!0,!U.awaitDrain||ha._writableState&&!ha._writableState.needDrain||na())}function ec(){ea("onend");ha.end()}function Nb(hb){ea("ondata");hb=ha.write(hb);ea("dest.write",hb);!1===hb&&((1===U.pipesCount&&U.pipes===ha||1<U.pipesCount&&-1!==A(U.pipes,ha))&&!Aa&&(ea("false write response, pause",U.awaitDrain),U.awaitDrain++),yd.pause())}function ac(hb){ea("onerror",
hb);gd();ha.removeListener("error",ac);0===ha.listeners("error").length&&X(ha,hb)}function Cc(){ha.removeListener("finish",Hb);gd()}function Hb(){ea("onfinish");ha.removeListener("close",Cc);gd()}function gd(){ea("unpipe");yd.unpipe(ha)}var yd=this,U=this._readableState;switch(U.pipesCount){case 0:U.pipes=ha;break;case 1:U.pipes=[U.pipes,ha];break;default:U.pipes.push(ha)}U.pipesCount+=1;ea("pipe count=%d opts=%j",U.pipesCount,xa);xa=xa&&!1===xa.end||ha===B.stdout||ha===B.stderr?gd:ec;if(U.endEmitted)B.nextTick(xa);
else yd.once("end",xa);ha.on("unpipe",yb);var na=g(yd);ha.on("drain",na);var Aa=!1;yd.on("data",Nb);f(ha,"error",ac);ha.once("close",Cc);ha.once("finish",Hb);ha.emit("pipe",yd);U.flowing||(ea("pipe resume"),yd.resume());return ha};k.prototype.unpipe=function(ha){var xa=this._readableState,yb={hasUnpiped:!1};if(0===xa.pipesCount)return this;if(1===xa.pipesCount){if(ha&&ha!==xa.pipes)return this;ha||(ha=xa.pipes);xa.pipes=null;xa.pipesCount=0;xa.flowing=!1;ha&&ha.emit("unpipe",this,yb);return this}if(!ha){ha=
xa.pipes;yb=xa.pipesCount;xa.pipes=null;xa.pipesCount=0;xa.flowing=!1;for(xa=0;xa<yb;xa++)ha[xa].emit("unpipe",this,{hasUnpiped:!1});return this}var ec=A(xa.pipes,ha);if(-1===ec)return this;xa.pipes.splice(ec,1);--xa.pipesCount;1===xa.pipesCount&&(xa.pipes=xa.pipes[0]);ha.emit("unpipe",this,yb);return this};k.prototype.on=function(ha,xa){xa=E.prototype.on.call(this,ha,xa);var yb=this._readableState;"data"===ha?(yb.readableListening=0<this.listenerCount("readable"),!1!==yb.flowing&&this.resume()):
"readable"!==ha||yb.endEmitted||yb.readableListening||(yb.readableListening=yb.needReadable=!0,yb.flowing=!1,yb.emittedReadable=!1,ea("on readable",yb.length,yb.reading),yb.length?b(this):yb.reading||B.nextTick(q,this));return xa};k.prototype.addListener=k.prototype.on;k.prototype.removeListener=function(ha,xa){xa=E.prototype.removeListener.call(this,ha,xa);"readable"===ha&&B.nextTick(l,this);return xa};k.prototype.removeAllListeners=function(ha){var xa=E.prototype.removeAllListeners.apply(this,arguments);
"readable"!==ha&&void 0!==ha||B.nextTick(l,this);return xa};k.prototype.resume=function(){var ha=this._readableState;ha.flowing||(ea("resume"),ha.flowing=!ha.readableListening,ha.resumeScheduled||(ha.resumeScheduled=!0,B.nextTick(r,this,ha)));ha.paused=!1;return this};k.prototype.pause=function(){ea("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(ea("pause"),this._readableState.flowing=!1,this.emit("pause"));this._readableState.paused=!0;return this};k.prototype.wrap=
function(ha){var xa=this,yb=this._readableState,ec=!1;ha.on("end",function(){ea("wrapped end");if(yb.decoder&&!yb.ended){var ac=yb.decoder.end();ac&&ac.length&&xa.push(ac)}xa.push(null)});ha.on("data",function(ac){ea("wrapped data");yb.decoder&&(ac=yb.decoder.write(ac));yb.objectMode&&(null===ac||void 0===ac)||!(yb.objectMode||ac&&ac.length)||xa.push(ac)||(ec=!0,ha.pause())});for(var Nb in ha)void 0===this[Nb]&&"function"===typeof ha[Nb]&&(this[Nb]=function(ac){return function(){return ha[ac].apply(ha,
arguments)}}(Nb));for(Nb=0;Nb<V.length;Nb++)ha.on(V[Nb],this.emit.bind(this,V[Nb]));this._read=function(ac){ea("wrapped _read",ac);ec&&(ec=!1,ha.resume())};return this};"function"===typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){void 0===bb&&(bb=L$());return bb(this)});Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&
this._readableState.buffer}});Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ha){this._readableState&&(this._readableState.flowing=ha)}});k._fromList=v;Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(k.from=function(ha,xa){void 0===Qa&&(Qa=H$());return Qa(k,ha,xa)});return EM}function cZ(){function f(g,l){var q=this._transformState;
q.transforming=!1;var r=q.writecb;if(null===r)return this.emit("error",new b);q.writechunk=null;q.writecb=null;null!=l&&this.push(l);r(g);g=this._readableState;g.reading=!1;(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function c(g){if(!(this instanceof c))return new c(g);a.call(this,g);this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=
!1;g&&("function"===typeof g.transform&&(this._transform=g.transform),"function"===typeof g.flush&&(this._flush=g.flush));this.on("prefinish",k)}function k(){var g=this;"function"!==typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush(function(l,q){d(g,l,q)})}function d(g,l,q){if(l)return g.emit("error",l);null!=q&&g.push(q);if(g._writableState.length)throw new m;if(g._transformState.transforming)throw new e;return g.push(null)}if(dZ)return FM;dZ=!0;FM=c;var h=bA().codes,
n=h.ERR_METHOD_NOT_IMPLEMENTED,b=h.ERR_MULTIPLE_CALLBACK,e=h.ERR_TRANSFORM_ALREADY_TRANSFORMING,m=h.ERR_TRANSFORM_WITH_LENGTH_0,a=cA();sk(c,a);c.prototype.push=function(g,l){this._transformState.needTransform=!1;return a.prototype.push.call(this,g,l)};c.prototype._transform=function(g,l,q){q(new n("_transform()"))};c.prototype._write=function(g,l,q){var r=this._transformState;r.writecb=q;r.writechunk=g;r.writeencoding=l;r.transforming||(g=this._readableState,(r.needTransform||g.needReadable||g.length<
g.highWaterMark)&&this._read(g.highWaterMark))};c.prototype._read=function(g){g=this._transformState;null===g.writechunk||g.transforming?g.needTransform=!0:(g.transforming=!0,this._transform(g.writechunk,g.writeencoding,g.afterTransform))};c.prototype._destroy=function(g,l){a.prototype._destroy.call(this,g,function(q){l(q)})};return FM}function dA(f,c){if(!((this||Zq)instanceof dA))return new dA(f,c);c=c||{};eZ.call(this||Zq,N$(c,{objectMode:!0}));(this||Zq)._iterator=f;(this||Zq)._options=c;this.on("end",
(this||Zq).destroy.bind(this||Zq,null,null))}function fZ(f,c,k){c&&"string"!=typeof c&&(c=c.message||c.name);O$(this||gl,{type:f,name:f,cause:"string"!=typeof c?c:k,message:c},"ewr")}function GM(f,c){Error.call(this||gl);Error.captureStackTrace&&Error.captureStackTrace(this||gl,(this||gl).constructor);fZ.call(this||gl,"CustomError",f,c)}function P$(f,c,k){var d=function(h,n){fZ.call(this||gl,c,h,n);"FilesystemError"==c&&((this||gl).code=(this||gl).cause.code,(this||gl).path=(this||gl).cause.path,
(this||gl).errno=(this||gl).cause.errno,(this||gl).message=(f.errno[(this||gl).cause.errno]?f.errno[(this||gl).cause.errno].description:(this||gl).cause.message)+((this||gl).cause.path?" ["+(this||gl).cause.path+"]":""));Error.call(this||gl);Error.captureStackTrace&&Error.captureStackTrace(this||gl,d)};d.prototype=k?new k:new GM;return d}function zC(f){(this||hl).db=(this||hl)._levelup=f;(this||hl).batch=f.db.batch();(this||hl).ops=[];(this||hl).length=0}function gZ(f,c){if(null==f)throw new TypeError("Cannot convert first argument to object");
for(var k=Object(f),d=1;d<arguments.length;d++){var h=arguments[d];if(null!=h)for(var n=Object.keys(Object(h)),b=0,e=n.length;b<e;b++){var m=n[b],a=Object.getOwnPropertyDescriptor(h,m);void 0!==a&&a.enumerable&&(k[m]=h[m])}}return k}function hZ(){function f(m){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(m)}function c(m){return(c=Object.setPrototypeOf?
Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(m)}function k(m,a){return(k=Object.setPrototypeOf||function(g,l){return g.__proto__=l,g})(m,a)}function d(m,a,g){g||(g=Error);g=function(l){function q(r,u,v){if(!(this instanceof q))throw new TypeError("Cannot call a class as a function");!0;r=c(q).call(this,"string"==typeof a?a:a(r,u,v));if(!r||"object"!==f(r)&&"function"!=typeof r){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
r=this}return r.code=m,r}return!function(r,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(u&&u.prototype,{constructor:{value:r,writable:!0,configurable:!0}});u&&k(r,u)}(q,l),q}(g);e[m]=g}function h(m,a){if(Array.isArray(m)){var g=m.length;return m=m.map(function(l){return String(l)}),2<g?"one of ".concat(a," ").concat(m.slice(0,g-1).join(", "),", or ")+m[g-1]:2===g?"one of ".concat(a," ").concat(m[0]," or ").concat(m[1]):
"of ".concat(a," ").concat(m[0])}return"of ".concat(a," ").concat(String(m))}if(iZ)return HM;iZ=!0;var n,b,e={};return d("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),d("ERR_INVALID_ARG_TYPE",function(m,a,g){var l;if(void 0===n&&(n=IM()),n("string"==typeof m,"'name' must be a string"),"string"==typeof a&&"not "===a.substr(0,4)?(l="must not be",a=a.replace(/^not /,"")):l="must be",function(r,u,v){return(void 0===v||v>r.length)&&(v=r.length),r.substring(v-u.length,v)===u}(m,
" argument"))m="The ".concat(m," ").concat(l," ").concat(h(a,"type"));else{var q=function(r,u,v){return"number"!=typeof v&&(v=0),!(v+u.length>r.length)&&-1!==r.indexOf(u,v)}(m,".")?"property":"argument";m='The "'.concat(m,'" ').concat(q," ").concat(l," ").concat(h(a,"type"))}return m+=". Received type ".concat(f(g))},TypeError),d("ERR_INVALID_ARG_VALUE",function(m,a){var g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===b&&(b=Xg);var l=b.inspect(a);return 128<l.length&&
(l="".concat(l.slice(0,128),"...")),"The argument '".concat(m,"' ").concat(g,". Received ").concat(l)},TypeError),d("ERR_INVALID_RETURN_VALUE",function(m,a,g){var l;return l=g&&g.constructor&&g.constructor.name?"instance of ".concat(g.constructor.name):"type ".concat(f(g)),"Expected ".concat(m,' to be returned from the "').concat(a,'"')+" function but got ".concat(l,".")},TypeError),d("ERR_MISSING_ARGS",function(){for(var m=arguments.length,a=Array(m),g=0;g<m;g++)a[g]=arguments[g];void 0===n&&(n=
IM());n(0<a.length,"At least one arg needs to be specified");m="The ";g=a.length;switch(a=a.map(function(l){return'"'.concat(l,'"')}),g){case 1:m+="".concat(a[0]," argument");break;case 2:m+="".concat(a[0]," and ").concat(a[1]," arguments");break;default:m+=a.slice(0,g-1).join(", "),m+=", and ".concat(a[g-1]," arguments")}return"".concat(m," must be specified")},TypeError),HM.codes=e,HM}function Q$(){function f(E,K){for(var J=0;J<K.length;J++){var P=K[J];P.enumerable=P.enumerable||!1;P.configurable=
!0;"value"in P&&(P.writable=!0);Object.defineProperty(E,P.key,P)}}function c(E,K){return!K||"object"!==m(K)&&"function"!=typeof K?k(E):K}function k(E){if(void 0===E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function d(E){var K="function"==typeof Map?new Map:void 0;return(d=function(J){function P(){return n(J,arguments,e(this).constructor)}if(null===J||(ea=J,-1===Function.toString.call(ea).indexOf("[native code]")))return J;var ea;if("function"!=
typeof J)throw new TypeError("Super expression must either be null or a function");if(void 0!==K){if(K.has(J))return K.get(J);K.set(J,P)}return P.prototype=Object.create(J.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),b(P,J)})(E)}function h(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(E){return!1}}function n(E,
K,J){return(n=h()?Reflect.construct:function(P,ea,ra){var D=[null];D.push.apply(D,ea);P=new (Function.bind.apply(P,D));return ra&&b(P,ra.prototype),P}).apply(null,arguments)}function b(E,K){return(b=Object.setPrototypeOf||function(J,P){return J.__proto__=P,J})(E,K)}function e(E){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(K){return K.__proto__||Object.getPrototypeOf(K)})(E)}function m(E){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(K){return typeof K}:
function(K){return K&&"function"==typeof Symbol&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K})(E)}function a(E,K,J){return(void 0===J||J>E.length)&&(J=E.length),E.substring(J-K.length,J)===K}function g(E){var K=Object.keys(E),J=Object.create(Object.getPrototypeOf(E));return K.forEach(function(P){J[P]=E[P]}),Object.defineProperty(J,"message",{value:E.message}),J}function l(E){return u(E,{compact:!1,customInspect:!1,depth:1E3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,
sorted:!0,getters:!0})}function q(E,K,J){var P="",ea="",ra=0,D="",O=!1,L=l(E),N=L.split("\n"),aa=l(K).split("\n"),Y=0,ma="";if("strictEqual"===J&&"object"===m(E)&&"object"===m(K)&&null!==E&&null!==K&&(J="strictEqualObject"),1===N.length&&1===aa.length&&N[0]!==aa[0]){var bb=N[0].length+aa[0].length;if(10>=bb){if(!("object"===m(E)&&null!==E||"object"===m(K)&&null!==K||0===E&&0===K))return"".concat(G[J],"\n\n")+"".concat(N[0]," !== ").concat(aa[0],"\n")}else if("strictEqualObject"!==J&&bb<(r.stderr&&
r.stderr.isTTY?r.stderr.columns:80)){for(;N[0][Y]===aa[0][Y];)Y++;2<Y&&(ma="\n  ".concat(function(ha,xa){if(xa=Math.floor(xa),0==ha.length||0==xa)return"";var yb=ha.length*xa;for(xa=Math.floor(Math.log(xa)/Math.log(2));xa;)ha+=ha,xa--;return ha+ha.substring(0,yb-ha.length)}(" ",Y),"^"),Y=0)}}E=N[N.length-1];for(K=aa[aa.length-1];E===K&&(2>Y++?D="\n  ".concat(E).concat(D):P=E,N.pop(),aa.pop(),0!==N.length&&0!==aa.length);)E=N[N.length-1],K=aa[aa.length-1];E=Math.max(N.length,aa.length);if(0===E){P=
L.split("\n");if(30<P.length)for(P[26]="".concat(y,"...").concat(B);27<P.length;)P.pop();return"".concat(G.notIdentical,"\n\n").concat(P.join("\n"),"\n")}3<Y&&(D="\n".concat(y,"...").concat(B).concat(D),O=!0);""!==P&&(D="\n  ".concat(P).concat(D),P="");L=0;J=G[J]+"\n".concat(z,"+ actual").concat(B," ").concat(A,"- expected").concat(B);K=" ".concat(y,"...").concat(B," Lines skipped");for(Y=0;Y<E;Y++){bb=Y-ra;if(N.length<Y+1)1<bb&&2<Y&&(4<bb?(ea+="\n".concat(y,"...").concat(B),O=!0):3<bb&&(ea+="\n  ".concat(aa[Y-
2]),L++),ea+="\n  ".concat(aa[Y-1]),L++),ra=Y,P+="\n".concat(A,"-").concat(B," ").concat(aa[Y]),L++;else if(aa.length<Y+1)1<bb&&2<Y&&(4<bb?(ea+="\n".concat(y,"...").concat(B),O=!0):3<bb&&(ea+="\n  ".concat(N[Y-2]),L++),ea+="\n  ".concat(N[Y-1]),L++),ra=Y,ea+="\n".concat(z,"+").concat(B," ").concat(N[Y]),L++;else{var Qa=aa[Y],X=N[Y],V=X!==Qa&&(!a(X,",")||X.slice(0,-1)!==Qa);V&&a(Qa,",")&&Qa.slice(0,-1)===X&&(V=!1,X+=",");V?(1<bb&&2<Y&&(4<bb?(ea+="\n".concat(y,"...").concat(B),O=!0):3<bb&&(ea+="\n  ".concat(N[Y-
2]),L++),ea+="\n  ".concat(N[Y-1]),L++),ra=Y,ea+="\n".concat(z,"+").concat(B," ").concat(X),P+="\n".concat(A,"-").concat(B," ").concat(Qa),L+=2):(ea+=P,P="",1!==bb&&0!==Y||(ea+="\n  ".concat(X),L++))}if(20<L&&Y<E-2)return"".concat(J).concat(K,"\n").concat(ea,"\n").concat(y,"...").concat(B).concat(P,"\n")+"".concat(y,"...").concat(B)}return"".concat(J).concat(O?K:"","\n").concat(ea).concat(P).concat(D).concat(ma)}if(jZ)return kZ;jZ=!0;var r=zi,u=Xg.inspect,v=hZ().codes.ERR_INVALID_ARG_TYPE,y="",z=
"",A="",B="",G={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',
notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};return kZ=function(E){function K(P){if(!(this instanceof K))throw new TypeError("Cannot call a class as a function");if(!0,"object"!==m(P)||null===P)throw new v("options","Object",P);var ea=P.message,ra=P.operator,D=P.stackStartFn,O=P.actual;P=P.expected;var L=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=ea)var N=
c(this,e(K).call(this,String(ea)));else if(r.stderr&&r.stderr.isTTY&&(r.stderr&&r.stderr.getColorDepth&&1!==r.stderr.getColorDepth()?(y="\u001b[34m",z="\u001b[32m",B="\u001b[39m",A="\u001b[31m"):(y="",z="",B="",A="")),"object"===m(O)&&null!==O&&"object"===m(P)&&null!==P&&"stack"in O&&O instanceof Error&&"stack"in P&&P instanceof Error&&(O=g(O),P=g(P)),"deepStrictEqual"===ra||"strictEqual"===ra)N=c(this,e(K).call(this,q(O,P,ra)));else if("notDeepStrictEqual"===ra||"notStrictEqual"===ra){N=G[ra];var aa=
l(O).split("\n");if("notStrictEqual"===ra&&"object"===m(O)&&null!==O&&(N=G.notStrictEqualObject),30<aa.length)for(aa[26]="".concat(y,"...").concat(B);27<aa.length;)aa.pop();N=1===aa.length?c(this,e(K).call(this,"".concat(N," ").concat(aa[0]))):c(this,e(K).call(this,"".concat(N,"\n\n").concat(aa.join("\n"),"\n")))}else{N=l(O);aa="";var Y=G[ra];"notDeepEqual"===ra||"notEqual"===ra?1024<(N="".concat(G[ra],"\n\n").concat(N)).length&&(N="".concat(N.slice(0,1021),"...")):(aa="".concat(l(P)),512<N.length&&
(N="".concat(N.slice(0,509),"...")),512<aa.length&&(aa="".concat(aa.slice(0,509),"...")),"deepEqual"===ra||"equal"===ra?N="".concat(Y,"\n\n").concat(N,"\n\nshould equal\n\n"):aa=" ".concat(ra," ").concat(aa));N=c(this,e(K).call(this,"".concat(N).concat(aa)))}return Error.stackTraceLimit=L,N.generatedMessage=!ea,Object.defineProperty(k(N),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),N.code="ERR_ASSERTION",N.actual=O,N.expected=P,N.operator=ra,Error.captureStackTrace&&
Error.captureStackTrace(k(N),D),N.stack,N.name="AssertionError",c(N)}var J;return!function(P,ea){if("function"!=typeof ea&&null!==ea)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(ea&&ea.prototype,{constructor:{value:P,writable:!0,configurable:!0}});ea&&b(P,ea)}(K,E),J=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:u.custom,value:function(P,ea){return u(this,function(ra){for(var D=
1;D<arguments.length;D++){var O=null!=arguments[D]?arguments[D]:{},L=Object.keys(O);"function"==typeof Object.getOwnPropertySymbols&&(L=L.concat(Object.getOwnPropertySymbols(O).filter(function(N){return Object.getOwnPropertyDescriptor(O,N).enumerable})));L.forEach(function(N){var aa=O[N];N in ra?Object.defineProperty(ra,N,{value:aa,enumerable:!0,configurable:!0,writable:!0}):ra[N]=aa})}return ra}({},ea,{customInspect:!1,depth:0}))}}],f(K.prototype,J),K}(d(Error))}function lZ(f,c){if(!(f=function(k){if(Array.isArray(k))return k}(f)||
function(k,d){var h=[],n=!0,b=!1,e=void 0;try{for(var m,a=k[Symbol.iterator]();!(n=(m=a.next()).done)&&(h.push(m.value),!d||h.length!==d);n=!0);}catch(g){b=!0,e=g}finally{try{n||null==a.return||a.return()}finally{if(b)throw e;}}return h}(f,c)))throw new TypeError("Invalid attempt to destructure non-iterable instance");return f}function $q(f){return($q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===
Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function JM(f){return f.call.bind(f)}function R$(f){if(0===f.length||10<f.length)return!0;for(var c=0;c<f.length;c++){var k=f.charCodeAt(c);if(48>k||57<k)return!0}return 10===f.length&&f>=Math.pow(2,32)}function IG(f){return Object.keys(f).filter(R$).concat(JG(f).filter(Object.prototype.propertyIsEnumerable.bind(f)))}function mZ(f,c){if(f===c)return 0;for(var k=f.length,d=c.length,h=0,n=Math.min(k,d);h<n;++h)if(f[h]!==c[h]){k=f[h];d=c[h];break}return k<
d?-1:d<k?1:0}function Tp(f,c,k,d){if(f===c)return 0!==f||!k||nZ(f,c);if(k){if("object"!==$q(f))return"number"==typeof f&&KM(f)&&KM(c);if("object"!==$q(c)||null===f||null===c||Object.getPrototypeOf(f)!==Object.getPrototypeOf(c))return!1}else{if(null===f||"object"!==$q(f))return(null===c||"object"!==$q(c))&&f==c;if(null===c||"object"!==$q(c))return!1}var h=oZ(f);if(h!==oZ(c))return!1;if(Array.isArray(f)){if(f.length!==c.length)return!1;h=IG(f);var n=IG(c);return h.length===n.length&&AC(f,c,k,d,1,h)}if("[object Object]"===
h&&(!KG(f)&&KG(c)||!LG(f)&&LG(c)))return!1;if(pZ(f)){if(!pZ(c)||Date.prototype.getTime.call(f)!==Date.prototype.getTime.call(c))return!1}else if(qZ(f)){if(!qZ(c)||(S$?f.source!==c.source||f.flags!==c.flags:RegExp.prototype.toString.call(f)!==RegExp.prototype.toString.call(c)))return!1}else if(T$(f)||f instanceof Error){if(f.message!==c.message||f.name!==c.name)return!1}else{if(U$(f)){if(k||!V$(f)&&!W$(f)){if(!function(b,e){return b.byteLength===e.byteLength&&0===mZ(new Uint8Array(b.buffer,b.byteOffset,
b.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}(f,c))return!1}else if(!function(b,e){if(b.byteLength!==e.byteLength)return!1;for(var m=0;m<b.byteLength;m++)if(b[m]!==e[m])return!1;return!0}(f,c))return!1;h=IG(f);n=IG(c);return h.length===n.length&&AC(f,c,k,d,0,h)}if(LG(f))return!(!LG(c)||f.size!==c.size)&&AC(f,c,k,d,2);if(KG(f))return!(!KG(c)||f.size!==c.size)&&AC(f,c,k,d,3);if(X$(f)){if(f.byteLength!==c.byteLength||0!==mZ(new Uint8Array(f),new Uint8Array(c)))return!1}else if(Y$(f)&&
!function(b,e){return rZ(b)?rZ(e)&&nZ(Number.prototype.valueOf.call(b),Number.prototype.valueOf.call(e)):sZ(b)?sZ(e)&&String.prototype.valueOf.call(b)===String.prototype.valueOf.call(e):tZ(b)?tZ(e)&&Boolean.prototype.valueOf.call(b)===Boolean.prototype.valueOf.call(e):uZ(b)?uZ(e)&&BigInt.prototype.valueOf.call(b)===BigInt.prototype.valueOf.call(e):Z$(e)&&Symbol.prototype.valueOf.call(b)===Symbol.prototype.valueOf.call(e)}(f,c))return!1}return AC(f,c,k,d,0)}function vZ(f,c){return c.filter(function(k){return MG(f,
k)})}function AC(f,c,k,d,h,n){if(5===arguments.length){n=Object.keys(f);var b=Object.keys(c);if(n.length!==b.length)return!1}for(var e=0;e<n.length;e++)if(!BC(c,n[e]))return!1;if(k&&5===arguments.length)if(b=JG(f),0!==b.length){var m=0;for(e=0;e<b.length;e++){var a=b[e];if(MG(f,a)){if(!MG(c,a))return!1;n.push(a);m++}else if(MG(c,a))return!1}e=JG(c);if(b.length!==e.length&&vZ(c,e).length!==m)return!1}else if(b=JG(c),0!==b.length&&0!==vZ(c,b).length)return!1;if(0===n.length&&(0===h||1===h&&0===f.length||
0===f.size))return!0;if(void 0===d)d={val1:new Map,val2:new Map,position:0};else{b=d.val1.get(f);if(void 0!==b&&(m=d.val2.get(c),void 0!==m))return b===m;d.position++}d.val1.set(f,d.position);d.val2.set(c,d.position);b=$$(f,c,k,n,d,h);return d.val1.delete(f),d.val2.delete(c),b}function wZ(f,c,k,d){for(var h=NG(f),n=0;n<h.length;n++){var b=h[n];if(Tp(c,b,k,d))return f.delete(b),!0}return!1}function xZ(f){switch($q(f)){case "undefined":return null;case "object":return;case "symbol":return!1;case "string":f=
+f;case "number":if(KM(f))return!1}return!0}function yZ(f,c,k,d,h,n){for(var b=NG(f),e=0;e<b.length;e++){var m=b[e];if(Tp(k,m,h,n)&&Tp(d,c.get(m),h,n))return f.delete(m),!0}return!1}function $$(f,c,k,d,h,n){var b=0;if(2===n){if(!function(e,m,a,g){for(var l=null,q=NG(e),r=0;r<q.length;r++){var u=q[r];if("object"===$q(u)&&null!==u)null===l&&(l=new Set),l.add(u);else if(!m.has(u)){if(a)return!1;var v=e,y=m,z=xZ(u);if(null!=z?!z:!y.has(z)||v.has(z))return!1;null===l&&(l=new Set);l.add(u)}}if(null!==l){m=
NG(m);for(q=0;q<m.length;q++)if(r=m[q],"object"===$q(r)&&null!==r){if(!wZ(l,r,a,g))return!1}else if(!a&&!e.has(r)&&!wZ(l,r,a,g))return!1;return 0===l.size}return!0}(f,c,k,h))return!1}else if(3===n){if(!function(e,m,a,g){for(var l=null,q=zZ(e),r=0;r<q.length;r++){var u=lZ(q[r],2),v=u[0],y=u[1];if("object"===$q(v)&&null!==v)null===l&&(l=new Set),l.add(v);else if(u=m.get(v),void 0===u&&!m.has(v)||!Tp(y,u,a,g)){if(a)return!1;u=e;var z=m,A=g,B=xZ(v);if(null!=B)u=B;else{var G=z.get(B);u=!(void 0===G&&!z.has(B)||
!Tp(y,G,!1,A))&&!u.has(B)&&Tp(y,G,!1,A)}if(!u)return!1;null===l&&(l=new Set);l.add(v)}}if(null!==l){m=zZ(m);for(q=0;q<m.length;q++)if(r=lZ(m[q],2),r=(v=r[0],r[1]),"object"===$q(v)&&null!==v){if(!yZ(l,e,v,r,a,g))return!1}else if(!(a||e.has(v)&&Tp(e.get(v),r,!1,g)||yZ(l,e,v,r,!1,g)))return!1;return 0===l.size}return!0}(f,c,k,h))return!1}else if(1===n)for(;b<f.length;b++){if(!BC(f,b)){if(BC(c,b))return!1;for(d=Object.keys(f);b<d.length;b++)if(n=d[b],!BC(c,n)||!Tp(f[n],c[n],k,h))return!1;return d.length===
Object.keys(c).length}if(!BC(c,b)||!Tp(f[b],c[b],k,h))return!1}for(b=0;b<d.length;b++)if(n=d[b],!Tp(f[n],c[n],k,h))return!1;return!0}function IM(){function f(N){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(aa){return typeof aa}:function(aa){return aa&&"function"==typeof Symbol&&aa.constructor===Symbol&&aa!==Symbol.prototype?"symbol":typeof aa})(N)}function c(){r=AZ.isDeepEqual;u=AZ.isDeepStrictEqual}function k(N){if(N.message instanceof Error)throw N.message;throw new E(N);
}function d(N,aa,Y,ma){if(!Y){var bb=!1;if(0===aa)bb=!0,ma="No value argument passed to `assert.ok()`";else if(ma instanceof Error)throw ma;N=new E({actual:Y,expected:!0,message:ma,operator:"==",stackStartFn:N});throw N.generatedMessage=bb,N;}}function h(){for(var N=arguments.length,aa=Array(N),Y=0;Y<N;Y++)aa[Y]=arguments[Y];d.apply(void 0,[h,aa.length].concat(aa))}function n(N,aa,Y,ma){if("function"!=typeof aa){if(P(aa))return aa.test(N);if(2===arguments.length)throw new z("expected",["Function",
"RegExp"],aa);if("object"!==f(N)||null===N){var bb=new E({actual:N,expected:aa,message:Y,operator:"deepStrictEqual",stackStartFn:ma});throw bb.operator=ma.name,bb;}var Qa=Object.keys(aa);if(aa instanceof Error)Qa.push("name","message");else if(0===Qa.length)throw new A("error",aa,"may not be an empty object");return void 0===r&&c(),Qa.forEach(function(X){if(!("string"==typeof N[X]&&P(aa[X])&&aa[X].test(N[X])||X in N&&u(N[X],aa[X]))){if(!Y){X=new L(N,Qa);var V=new L(aa,Qa,N);X=new E({actual:X,expected:V,
operator:"deepStrictEqual",stackStartFn:ma});throw X.actual=N,X.expected=aa,X.operator=ma.name,X;}k({actual:N,expected:aa,message:Y,operator:ma.name,stackStartFn:ma})}}),!0}return void 0!==aa.prototype&&N instanceof aa||!Error.isPrototypeOf(aa)&&!0===aa.call({},N)}function b(N){if("function"!=typeof N)throw new z("fn","Function",N);try{N()}catch(aa){return aa}return O}function e(N){return J(N)||null!==N&&"object"===f(N)&&"function"==typeof N.then&&"function"==typeof N.catch}function m(N){return Promise.resolve().then(function(){var aa;
if("function"==typeof N){if(!e(aa=N()))throw new B("instance of Promise","promiseFn",aa);}else{if(!e(N))throw new z("promiseFn",["Function","Promise"],N);aa=N}return Promise.resolve().then(function(){return aa}).then(function(){return O}).catch(function(Y){return Y})})}function a(N,aa,Y,ma){if("string"==typeof Y){if(4===arguments.length)throw new z("error",["Object","Error","Function","RegExp"],Y);if("object"===f(aa)&&null!==aa){if(aa.message===Y)throw new y("error/message",'The error message "'.concat(aa.message,
'" is identical to the message.'));}else if(aa===Y)throw new y("error/message",'The error "'.concat(aa,'" is identical to the message.'));ma=Y;Y=void 0}else if(null!=Y&&"object"!==f(Y)&&"function"!=typeof Y)throw new z("error",["Object","Error","Function","RegExp"],Y);if(aa===O){var bb="";Y&&Y.name&&(bb+=" (".concat(Y.name,")"));bb+=ma?": ".concat(ma):".";k({actual:void 0,expected:Y,operator:N.name,message:"Missing expected ".concat("rejects"===N.name?"rejection":"exception").concat(bb),stackStartFn:N})}if(Y&&
!n(aa,Y,ma,N))throw aa;}function g(N,aa,Y,ma){if(aa!==O){if("string"==typeof Y&&(ma=Y,Y=void 0),!Y||n(aa,Y))ma=ma?": ".concat(ma):".",k({actual:aa,expected:Y,operator:N.name,message:"Got unwanted ".concat("doesNotReject"===N.name?"rejection":"exception").concat(ma,"\n")+'Actual message: "'.concat(aa&&aa.message,'"'),stackStartFn:N});throw aa;}}function l(){for(var N=arguments.length,aa=Array(N),Y=0;Y<N;Y++)aa[Y]=arguments[Y];d.apply(void 0,[l,aa.length].concat(aa))}if(BZ)return LM;BZ=!0;var q=zi,
r,u,v=hZ().codes,y=v.ERR_AMBIGUOUS_ARGUMENT,z=v.ERR_INVALID_ARG_TYPE,A=v.ERR_INVALID_ARG_VALUE,B=v.ERR_INVALID_RETURN_VALUE,G=v.ERR_MISSING_ARGS,E=Q$(),K=Xg.inspect;v=Xg.types;var J=v.isPromise,P=v.isRegExp;v=Object.assign?Object.assign:aaa.assign;var ea=Object.is?Object.is:CZ,ra=!1,D=LM=h,O={};D.fail=function X(aa,Y,ma,bb,Qa){var V=arguments.length;if(0===V)var ha="Failed";else 1===V?(ma=aa,aa=void 0):(!1===ra&&(ra=!0,(q.emitWarning?q.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.",
"DeprecationWarning","DEP0094")),2===V&&(bb="!="));if(ma instanceof Error)throw ma;V={actual:aa,expected:Y,operator:void 0===bb?"fail":bb,stackStartFn:Qa||X};void 0!==ma&&(V.message=ma);V=new E(V);throw ha&&(V.message=ha,V.generatedMessage=!0),V;};D.AssertionError=E;D.ok=h;D.equal=function Qa(Y,ma,bb){if(2>arguments.length)throw new G("actual","expected");Y!=ma&&k({actual:Y,expected:ma,message:bb,operator:"==",stackStartFn:Qa})};D.notEqual=function X(ma,bb,Qa){if(2>arguments.length)throw new G("actual",
"expected");ma==bb&&k({actual:ma,expected:bb,message:Qa,operator:"!=",stackStartFn:X})};D.deepEqual=function V(bb,Qa,X){if(2>arguments.length)throw new G("actual","expected");void 0===r&&c();r(bb,Qa)||k({actual:bb,expected:Qa,message:X,operator:"deepEqual",stackStartFn:V})};D.notDeepEqual=function ha(Qa,X,V){if(2>arguments.length)throw new G("actual","expected");void 0===r&&c();r(Qa,X)&&k({actual:Qa,expected:X,message:V,operator:"notDeepEqual",stackStartFn:ha})};D.deepStrictEqual=function xa(X,V,
ha){if(2>arguments.length)throw new G("actual","expected");void 0===r&&c();u(X,V)||k({actual:X,expected:V,message:ha,operator:"deepStrictEqual",stackStartFn:xa})};D.notDeepStrictEqual=function yb(V,ha,xa){if(2>arguments.length)throw new G("actual","expected");void 0===r&&c();u(V,ha)&&k({actual:V,expected:ha,message:xa,operator:"notDeepStrictEqual",stackStartFn:yb})};D.strictEqual=function ec(ha,xa,yb){if(2>arguments.length)throw new G("actual","expected");ea(ha,xa)||k({actual:ha,expected:xa,message:yb,
operator:"strictEqual",stackStartFn:ec})};D.notStrictEqual=function Nb(xa,yb,ec){if(2>arguments.length)throw new G("actual","expected");ea(xa,yb)&&k({actual:xa,expected:yb,message:ec,operator:"notStrictEqual",stackStartFn:Nb})};var L=function ac(yb,ec,Nb){var Cc=this;if(!(this instanceof ac))throw new TypeError("Cannot call a class as a function");!0;ec.forEach(function(Hb){Hb in yb&&(void 0!==Nb&&"string"==typeof Nb[Hb]&&P(yb[Hb])&&yb[Hb].test(Nb[Hb])?Cc[Hb]=Nb[Hb]:Cc[Hb]=yb[Hb])})};return D.throws=
function Nb(ec){for(var ac=arguments.length,Cc=Array(1<ac?ac-1:0),Hb=1;Hb<ac;Hb++)Cc[Hb-1]=arguments[Hb];a.apply(void 0,[Nb,b(ec)].concat(Cc))},D.rejects=function ac(Nb){for(var Cc=arguments.length,Hb=Array(1<Cc?Cc-1:0),gd=1;gd<Cc;gd++)Hb[gd-1]=arguments[gd];return m(Nb).then(function(yd){return a.apply(void 0,[ac,yd].concat(Hb))})},D.doesNotThrow=function Cc(ac){for(var Hb=arguments.length,gd=Array(1<Hb?Hb-1:0),yd=1;yd<Hb;yd++)gd[yd-1]=arguments[yd];g.apply(void 0,[Cc,b(ac)].concat(gd))},D.doesNotReject=
function Hb(Cc){for(var gd=arguments.length,yd=Array(1<gd?gd-1:0),U=1;U<gd;U++)yd[U-1]=arguments[U];return m(Cc).then(function(na){return g.apply(void 0,[Hb,na].concat(yd))})},D.ifError=function gd(Hb){if(null!=Hb){var yd="ifError got unwanted exception: ";"object"===f(Hb)&&"string"==typeof Hb.message?0===Hb.message.length&&Hb.constructor?yd+=Hb.constructor.name:yd+=Hb.message:yd+=K(Hb);yd=new E({actual:Hb,expected:null,operator:"ifError",message:yd,stackStartFn:gd});Hb=Hb.stack;if("string"==typeof Hb){Hb=
Hb.split("\n");Hb.shift();for(var U=yd.stack.split("\n"),na=0;na<Hb.length;na++){var Aa=U.indexOf(Hb[na]);if(-1!==Aa){U=U.slice(0,Aa);break}}yd.stack="".concat(U.join("\n"),"\n").concat(Hb.join("\n"))}throw yd;}},D.strict=v(l,D,{equal:D.strictEqual,deepEqual:D.deepStrictEqual,notEqual:D.notStrictEqual,notDeepEqual:D.notDeepStrictEqual}),D.strict.strict=D.strict,LM}function Fj(f,c,k){if(!((this||Fh)instanceof Fj))return new Fj(f,c,k);var d=this||Fh;OG.call(this||Fh);this.setMaxListeners(Infinity);
"function"===typeof c&&(k=c,c={});c=c||{};if(!f||"object"!==typeof f){f=new baa("First argument must be an abstract-leveldown compliant store");if("function"===typeof k)return PG.nextTick(k,f);throw f;}caa.strictEqual(typeof f.status,"string",".status required, old abstract-leveldown");(this||Fh).options=eA(c);(this||Fh)._db=f;(this||Fh).db=new DZ(f);this.open(k||function(h){h&&d.emit("error",h)});(this||Fh).supports=daa((this||Fh).db.supports,{status:!1,deferredOpen:!0,openCallback:!0,promises:!0,
streams:!0});Object.keys((this||Fh).supports.additionalMethods).forEach(function(h){null==(this||Fh)[h]&&((this||Fh)[h]=function(){return(this||Fh).db[h].apply((this||Fh).db,arguments)})},this||Fh)}function CC(f,c){if(!f._isOpening()&&!f.isOpen())return PG.nextTick(c,new EZ("Database is not open")),!0}function Es(f,c){return Object.hasOwnProperty.call(f,c)&&c}function eaa(f){return f}function QG(f){return f}function MM(f){return void 0===f||null===f||NM.isBuffer(f)}function nn(f){if(!((this||uu)instanceof
nn))return new nn(f);(this||uu).opts=f||{};(this||uu).encodings=OM}function faa(f){return f.toString((this||ig).encoding)}function gaa(f){(this||ig).charReceived=f.length%2;(this||ig).charLength=(this||ig).charReceived?2:0}function haa(f){(this||ig).charReceived=f.length%3;(this||ig).charLength=(this||ig).charReceived?3:0}function FZ(){function f(z,A,B){(this||Gh).chunk=z;(this||Gh).encoding=A;(this||Gh).callback=B}function c(z,A){var B=fA();z=z||{};var G=z.highWaterMark,E=z.objectMode?16:16384;(this||
Gh).highWaterMark=G||0===G?G:E;(this||Gh).objectMode=!!z.objectMode;A instanceof B&&((this||Gh).objectMode=(this||Gh).objectMode||!!z.writableObjectMode);(this||Gh).highWaterMark=~~(this||Gh).highWaterMark;(this||Gh).needDrain=!1;(this||Gh).ending=!1;(this||Gh).ended=!1;(this||Gh).finished=!1;(this||Gh).decodeStrings=!1!==z.decodeStrings;(this||Gh).defaultEncoding=z.defaultEncoding||"utf8";(this||Gh).length=0;(this||Gh).writing=!1;(this||Gh).corked=0;(this||Gh).sync=!0;(this||Gh).bufferProcessing=
!1;(this||Gh).onwrite=function(K){a(A,K)};(this||Gh).writecb=null;(this||Gh).writelen=0;(this||Gh).buffer=[];(this||Gh).pendingcb=0;(this||Gh).prefinished=!1;(this||Gh).errorEmitted=!1}function k(z){var A=fA();if(!((this||Gh)instanceof k||(this||Gh)instanceof A))return new k(z);(this||Gh)._writableState=new c(z,this||Gh);(this||Gh).writable=!0;y.call(this||Gh)}function d(z,A,B){var G=Error("write after end");z.emit("error",G);r.nextTick(function(){B(G)})}function h(z,A,B,G){var E=!0;if(!(v.isBuffer(B)||
v.isString(B)||v.isNullOrUndefined(B)||A.objectMode)){var K=new TypeError("Invalid non-string/buffer chunk");z.emit("error",K);r.nextTick(function(){G(K)});E=!1}return E}function n(z,A,B,G,E){var K=G;!A.objectMode&&!1!==A.decodeStrings&&v.isString(B)&&(B=new u(B,K));v.isBuffer(B)&&(G="buffer");K=A.objectMode?1:B.length;A.length+=K;var J=A.length<A.highWaterMark;J||(A.needDrain=!0);A.writing||A.corked?A.buffer.push(new f(B,G,E)):b(z,A,!1,K,B,G,E);return J}function b(z,A,B,G,E,K,J){A.writelen=G;A.writecb=
J;A.writing=!0;A.sync=!0;B?z._writev(E,A.onwrite):z._write(E,K,A.onwrite);A.sync=!1}function e(z,A,B,G,E){B?r.nextTick(function(){A.pendingcb--;E(G)}):(A.pendingcb--,E(G));z._writableState.errorEmitted=!0;z.emit("error",G)}function m(z){z.writing=!1;z.writecb=null;z.length-=z.writelen;z.writelen=0}function a(z,A){var B=z._writableState,G=B.sync,E=B.writecb;m(B);if(A)e(z,B,G,A,E);else{var K=B.ending&&0===B.length&&!B.finished&&!B.writing;K||B.corked||B.bufferProcessing||!B.buffer.length||l(z,B);G?
r.nextTick(function(){g(z,B,K,E)}):g(z,B,K,E)}}function g(z,A,B,G){!B&&0===A.length&&A.needDrain&&(A.needDrain=!1,z.emit("drain"));A.pendingcb--;G();q(z,A)}function l(z,A){A.bufferProcessing=!0;if(z._writev&&1<A.buffer.length){for(var B=[],G=0;G<A.buffer.length;G++)B.push(A.buffer[G].callback);A.pendingcb++;b(z,A,!0,A.length,A.buffer,"",function(J){for(var P=0;P<B.length;P++)A.pendingcb--,B[P](J)});A.buffer=[]}else{for(G=0;G<A.buffer.length;G++){var E=A.buffer[G],K=E.chunk;b(z,A,!1,A.objectMode?1:
K.length,K,E.encoding,E.callback);if(A.writing){G++;break}}G<A.buffer.length?A.buffer=A.buffer.slice(G):A.buffer.length=0}A.bufferProcessing=!1}function q(z,A){var B=A.ending&&0===A.length&&!A.finished&&!A.writing;B&&(0===A.pendingcb?(A.prefinished||(A.prefinished=!0,z.emit("prefinish")),A.finished=!0,z.emit("finish")):A.prefinished||(A.prefinished=!0,z.emit("prefinish")));return B}if(GZ)return PM;GZ=!0;var r=zi;PM=k;var u=Rh.Buffer;k.WritableState=c;var v=il;v.inherits=sk;var y=Tx;v.inherits(k,y);
k.prototype.pipe=function(){this.emit("error",Error("Cannot pipe. Not readable."))};k.prototype.write=function(z,A,B){var G=(this||Gh)._writableState,E=!1;v.isFunction(A)&&(B=A,A=null);v.isBuffer(z)?A="buffer":A||(A=G.defaultEncoding);v.isFunction(B)||(B=function(){});G.ended?d(this||Gh,G,B):h(this||Gh,G,z,B)&&(G.pendingcb++,E=n(this||Gh,G,z,A,B));return E};k.prototype.cork=function(){(this||Gh)._writableState.corked++};k.prototype.uncork=function(){var z=(this||Gh)._writableState;z.corked&&(z.corked--,
z.writing||z.corked||z.finished||z.bufferProcessing||!z.buffer.length||l(this||Gh,z))};k.prototype._write=function(z,A,B){B(Error("not implemented"))};k.prototype._writev=null;k.prototype.end=function(z,A,B){var G=(this||Gh)._writableState;v.isFunction(z)?(B=z,A=z=null):v.isFunction(A)&&(B=A,A=null);v.isNullOrUndefined(z)||this.write(z,A);G.corked&&(G.corked=1,this.uncork());if(!G.ending&&!G.finished){z=this||Gh;G.ending=!0;q(z,G);if(B)if(G.finished)r.nextTick(B);else z.once("finish",B);G.ended=!0}};
return PM}function fA(){function f(e){if(!((this||ar)instanceof f))return new f(e);n.call(this||ar,e);b.call(this||ar,e);e&&!1===e.readable&&((this||ar).readable=!1);e&&!1===e.writable&&((this||ar).writable=!1);(this||ar).allowHalfOpen=!0;e&&!1===e.allowHalfOpen&&((this||ar).allowHalfOpen=!1);this.once("end",c)}function c(){(this||ar).allowHalfOpen||(this||ar)._writableState.ended||k.nextTick((this||ar).end.bind(this||ar))}if(HZ)return QM;HZ=!0;var k=zi;QM=f;var d=Object.keys||function(e){var m=[],
a;for(a in e)m.push(a);return m},h=il;h.inherits=sk;var n=IZ(),b=FZ();h.inherits(f,n);(function(e,m){for(var a=0,g=e.length;a<g;a++)m(e[a],a)})(d(b.prototype),function(e){f.prototype[e]||(f.prototype[e]=b.prototype[e])});return QM}function IZ(){function f(E,K){var J=fA();E=E||{};var P=E.highWaterMark,ea=E.objectMode?16:16384;(this||Af).highWaterMark=P||0===P?P:ea;(this||Af).highWaterMark=~~(this||Af).highWaterMark;(this||Af).buffer=[];(this||Af).length=0;(this||Af).pipes=null;(this||Af).pipesCount=
0;(this||Af).flowing=null;(this||Af).ended=!1;(this||Af).endEmitted=!1;(this||Af).reading=!1;(this||Af).sync=!0;(this||Af).needReadable=!1;(this||Af).emittedReadable=!1;(this||Af).readableListening=!1;(this||Af).objectMode=!!E.objectMode;K instanceof J&&((this||Af).objectMode=(this||Af).objectMode||!!E.readableObjectMode);(this||Af).defaultEncoding=E.defaultEncoding||"utf8";(this||Af).ranOut=!1;(this||Af).awaitDrain=0;(this||Af).readingMore=!1;(this||Af).decoder=null;(this||Af).encoding=null;E.encoding&&
(B||(B=RM.StringDecoder),(this||Af).decoder=new B(E.encoding),(this||Af).encoding=E.encoding)}function c(E){fA();if(!((this||Af)instanceof c))return new c(E);(this||Af)._readableState=new f(E,this||Af);(this||Af).readable=!0;z.call(this||Af)}function k(E,K,J,P,ea){var ra=J;var D=null;A.isBuffer(ra)||A.isString(ra)||A.isNullOrUndefined(ra)||K.objectMode||(D=new TypeError("Invalid non-string/buffer chunk"));(ra=D)?E.emit("error",ra):A.isNullOrUndefined(J)?(K.reading=!1,K.ended||(K.decoder&&!K.ended&&
(J=K.decoder.end())&&J.length&&(K.buffer.push(J),K.length+=K.objectMode?1:J.length),K.ended=!0,h(E))):K.objectMode||J&&0<J.length?K.ended&&!ea?(J=Error("stream.push() after EOF"),E.emit("error",J)):K.endEmitted&&ea?(J=Error("stream.unshift() after end event"),E.emit("error",J)):(!K.decoder||ea||P||(J=K.decoder.write(J)),ea||(K.reading=!1),K.flowing&&0===K.length&&!K.sync?(E.emit("data",J),E.read(0)):(K.length+=K.objectMode?1:J.length,ea?K.buffer.unshift(J):K.buffer.push(J),K.needReadable&&h(E)),b(E,
K)):ea||(K.reading=!1);return!K.ended&&(K.needReadable||K.length<K.highWaterMark||0===K.length)}function d(E,K){if(0===K.length&&K.ended)return 0;if(K.objectMode)return 0===E?0:1;if(isNaN(E)||A.isNull(E))return K.flowing&&K.buffer.length?K.buffer[0].length:K.length;if(0>=E)return 0;if(E>K.highWaterMark){var J=E;if(8388608<=J)J=8388608;else{J--;for(var P=1;32>P;P<<=1)J|=J>>P;J++}K.highWaterMark=J}if(E>K.length){if(K.ended)return K.length;K.needReadable=!0;return 0}return E}function h(E){var K=E._readableState;
K.needReadable=!1;K.emittedReadable||(G("emitReadable",K.flowing),K.emittedReadable=!0,K.sync?r.nextTick(function(){n(E)}):n(E))}function n(E){G("emit readable");E.emit("readable");a(E)}function b(E,K){K.readingMore||(K.readingMore=!0,r.nextTick(function(){for(var J=K.length;!K.reading&&!K.flowing&&!K.ended&&K.length<K.highWaterMark&&(G("maybeReadMore read 0"),E.read(0),J!==K.length);)J=K.length;K.readingMore=!1}))}function e(E){return function(){var K=E._readableState;G("pipeOnDrain",K.awaitDrain);
K.awaitDrain&&K.awaitDrain--;0===K.awaitDrain&&y.listenerCount(E,"data")&&(K.flowing=!0,a(E))}}function m(E,K){K.resumeScheduled||(K.resumeScheduled=!0,r.nextTick(function(){K.resumeScheduled=!1;E.emit("resume");a(E);K.flowing&&!K.reading&&E.read(0)}))}function a(E){var K=E._readableState;G("flow",K.flowing);if(K.flowing){do var J=E.read();while(null!==J&&K.flowing)}}function g(E,K){var J=K.buffer,P=K.length,ea=!!K.decoder;K=!!K.objectMode;if(0===J.length)return null;if(0===P)P=null;else if(K)P=J.shift();
else if(!E||E>=P)P=ea?J.join(""):v.concat(J,P),J.length=0;else if(E<J[0].length)K=J[0],P=K.slice(0,E),J[0]=K.slice(E);else if(E===J[0].length)P=J.shift();else{P=ea?"":new v(E);for(var ra=0,D=0,O=J.length;D<O&&ra<E;D++){K=J[0];var L=Math.min(E-ra,K.length);ea?P+=K.slice(0,L):K.copy(P,ra,0,L);L<K.length?J[0]=K.slice(L):J.shift();ra+=L}}return P}function l(E){var K=E._readableState;if(0<K.length)throw Error("endReadable called on non-empty stream");K.endEmitted||(K.ended=!0,r.nextTick(function(){K.endEmitted||
0!==K.length||(K.endEmitted=!0,E.readable=!1,E.emit("end"))}))}function q(E,K){for(var J=0,P=E.length;J<P;J++)K(E[J],J)}if(JZ)return SM;JZ=!0;var r=zi;SM=c;var u=iaa,v=Rh.Buffer;c.ReadableState=f;var y=vs.EventEmitter;y.listenerCount||(y.listenerCount=function(E,K){return E.listeners(K).length});var z=Tx,A=il;A.inherits=sk;var B,G=jaa;G=G&&G.debuglog?G.debuglog("stream"):function(){};A.inherits(c,z);c.prototype.push=function(E,K){var J=(this||Af)._readableState;A.isString(E)&&!J.objectMode&&(K=K||
J.defaultEncoding,K!==J.encoding&&(E=new v(E,K),K=""));return k(this||Af,J,E,K,!1)};c.prototype.unshift=function(E){return k(this||Af,(this||Af)._readableState,E,"",!0)};c.prototype.setEncoding=function(E){B||(B=RM.StringDecoder);(this||Af)._readableState.decoder=new B(E);(this||Af)._readableState.encoding=E;return this||Af};c.prototype.read=function(E){G("read",E);var K=(this||Af)._readableState,J=E;if(!A.isNumber(E)||0<E)K.emittedReadable=!1;if(0===E&&K.needReadable&&(K.length>=K.highWaterMark||
K.ended))return G("read: emitReadable",K.length,K.ended),0===K.length&&K.ended?l(this||Af):h(this||Af),null;E=d(E,K);if(0===E&&K.ended)return 0===K.length&&l(this||Af),null;var P=K.needReadable;G("need readable",P);if(0===K.length||K.length-E<K.highWaterMark)P=!0,G("length less than watermark",P);if(K.ended||K.reading)P=!1,G("reading or ended",P);P&&(G("do read"),K.reading=!0,K.sync=!0,0===K.length&&(K.needReadable=!0),this._read(K.highWaterMark),K.sync=!1);P&&!K.reading&&(E=d(J,K));P=0<E?g(E,K):
null;A.isNull(P)&&(K.needReadable=!0,E=0);K.length-=E;0!==K.length||K.ended||(K.needReadable=!0);J!==E&&K.ended&&0===K.length&&l(this||Af);A.isNull(P)||this.emit("data",P);return P};c.prototype._read=function(E){this.emit("error",Error("not implemented"))};c.prototype.pipe=function(E,K){function J(bb){G("onunpipe");bb===aa&&ea()}function P(){G("onend");E.end()}function ea(){G("cleanup");E.removeListener("close",O);E.removeListener("finish",L);E.removeListener("drain",ma);E.removeListener("error",
D);E.removeListener("unpipe",J);aa.removeListener("end",P);aa.removeListener("end",ea);aa.removeListener("data",ra);!Y.awaitDrain||E._writableState&&!E._writableState.needDrain||ma()}function ra(bb){G("ondata");!1===E.write(bb)&&(G("false write response, pause",aa._readableState.awaitDrain),aa._readableState.awaitDrain++,aa.pause())}function D(bb){G("onerror",bb);N();E.removeListener("error",D);0===y.listenerCount(E,"error")&&E.emit("error",bb)}function O(){E.removeListener("finish",L);N()}function L(){G("onfinish");
E.removeListener("close",O);N()}function N(){G("unpipe");aa.unpipe(E)}var aa=this||Af,Y=(this||Af)._readableState;switch(Y.pipesCount){case 0:Y.pipes=E;break;case 1:Y.pipes=[Y.pipes,E];break;default:Y.pipes.push(E)}Y.pipesCount+=1;G("pipe count=%d opts=%j",Y.pipesCount,K);K=K&&!1===K.end||E===r.stdout||E===r.stderr?ea:P;if(Y.endEmitted)r.nextTick(K);else aa.once("end",K);E.on("unpipe",J);var ma=e(aa);E.on("drain",ma);aa.on("data",ra);if(E._events&&E._events.error)u(E._events.error)?E._events.error.unshift(D):
E._events.error=[D,E._events.error];else E.on("error",D);E.once("close",O);E.once("finish",L);E.emit("pipe",aa);Y.flowing||(G("pipe resume"),aa.resume());return E};c.prototype.unpipe=function(E){var K=(this||Af)._readableState;if(0===K.pipesCount)return this||Af;if(1===K.pipesCount){if(E&&E!==K.pipes)return this||Af;E||(E=K.pipes);K.pipes=null;K.pipesCount=0;K.flowing=!1;E&&E.emit("unpipe",this||Af);return this||Af}if(!E){E=K.pipes;var J=K.pipesCount;K.pipes=null;K.pipesCount=0;K.flowing=!1;for(var P=
0;P<J;P++)E[P].emit("unpipe",this||Af);return this||Af}a:{P=K.pipes;J=0;for(var ea=P.length;J<ea;J++)if(P[J]===E){P=J;break a}P=-1}if(-1===P)return this||Af;K.pipes.splice(P,1);--K.pipesCount;1===K.pipesCount&&(K.pipes=K.pipes[0]);E.emit("unpipe",this||Af);return this||Af};c.prototype.on=function(E,K){K=z.prototype.on.call(this||Af,E,K);"data"===E&&!1!==(this||Af)._readableState.flowing&&this.resume();if("readable"===E&&(this||Af).readable&&(E=(this||Af)._readableState,!E.readableListening))if(E.readableListening=
!0,E.emittedReadable=!1,E.needReadable=!0,E.reading)E.length&&h(this||Af);else{var J=this||Af;r.nextTick(function(){G("readable nexttick read 0");J.read(0)})}return K};c.prototype.addListener=c.prototype.on;c.prototype.resume=function(){var E=(this||Af)._readableState;E.flowing||(G("resume"),E.flowing=!0,E.reading||(G("resume read 0"),this.read(0)),m(this||Af,E));return this||Af};c.prototype.pause=function(){G("call pause flowing=%j",(this||Af)._readableState.flowing);!1!==(this||Af)._readableState.flowing&&
(G("pause"),(this||Af)._readableState.flowing=!1,this.emit("pause"));return this||Af};c.prototype.wrap=function(E){var K=(this||Af)._readableState,J=!1,P=this||Af;E.on("end",function(){G("wrapped end");if(K.decoder&&!K.ended){var ra=K.decoder.end();ra&&ra.length&&P.push(ra)}P.push(null)});E.on("data",function(ra){G("wrapped data");K.decoder&&(ra=K.decoder.write(ra));ra&&(K.objectMode||ra.length)&&!P.push(ra)&&(J=!0,E.pause())});for(var ea in E)A.isFunction(E[ea])&&A.isUndefined((this||Af)[ea])&&((this||
Af)[ea]=function(ra){return function(){return E[ra].apply(E,arguments)}}(ea));q(["error","close","destroy","pause","resume"],function(ra){E.on(ra,P.emit.bind(P,ra))});P._read=function(ra){G("wrapped _read",ra);J&&(J=!1,E.resume())};return P};c._fromList=g;return SM}function KZ(){function f(n,b){(this||cm).afterTransform=function(e,m){var a=b._transformState;a.transforming=!1;var g=a.writecb;g?(a.writechunk=null,a.writecb=null,h.isNullOrUndefined(m)||b.push(m),g&&g(e),e=b._readableState,e.reading=
!1,(e.needReadable||e.length<e.highWaterMark)&&b._read(e.highWaterMark),e=void 0):e=b.emit("error",Error("no writecb in Transform class"));return e};(this||cm).needTransform=!1;(this||cm).transforming=!1;(this||cm).writecb=null;(this||cm).writechunk=null}function c(n){if(!((this||cm)instanceof c))return new c(n);d.call(this||cm,n);(this||cm)._transformState=new f(n,this||cm);var b=this||cm;(this||cm)._readableState.needReadable=!0;(this||cm)._readableState.sync=!1;this.once("prefinish",function(){h.isFunction((this||
cm)._flush)?this._flush(function(e){k(b,e)}):k(b)})}function k(n,b){if(b)return n.emit("error",b);b=n._transformState;if(n._writableState.length)throw Error("calling transform done when ws.length != 0");if(b.transforming)throw Error("calling transform done when still transforming");return n.push(null)}if(LZ)return TM;LZ=!0;TM=c;var d=fA(),h=il;h.inherits=sk;h.inherits(c,d);c.prototype.push=function(n,b){(this||cm)._transformState.needTransform=!1;return d.prototype.push.call(this||cm,n,b)};c.prototype._transform=
function(n,b,e){throw Error("not implemented");};c.prototype._write=function(n,b,e){var m=(this||cm)._transformState;m.writecb=e;m.writechunk=n;m.writeencoding=b;m.transforming||(n=(this||cm)._readableState,(m.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark))};c.prototype._read=function(n){n=(this||cm)._transformState;h.isNull(n.writechunk)||!n.writecb||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};
return TM}function kaa(){function f(d){if(!((this||MZ)instanceof f))return new f(d);c.call(this||MZ,d)}if(NZ)return UM;NZ=!0;UM=f;var c=KZ(),k=il;k.inherits=sk;k.inherits(f,c);f.prototype._transform=function(d,h,n){n(null,d)};return UM}function DC(f){return f&&"object"===typeof f&&"default"in f?f["default"]:f}function laa(f){var c={},k;for(k in f)c[k]=f[k];return c}function maa(f,c,k){f.open(function(){});return{apply:function(d,h,n){h=h||{};for(var b=[],e=-1,m=d.length;++e<m;){var a=d[e],g=a,l=a.prefix;
l&&l.options&&(g.keyEncoding=g.keyEncoding||l.options.keyEncoding,g.valueEncoding=g.valueEncoding||l.options.valueEncoding);g=a;l=a.prefix;l="function"===typeof l.prefix?l.prefix():l;g.prefix=l;b.push({key:c.encode([a.prefix,k.encodeKey(a.key,h,a)]),value:"del"!==a.type&&k.encodeValue(a.value,h,a),type:a.type})}f.db.batch(b,h,n)},get:function(d,h,n,b){n.asBuffer=k.valueAsBuffer(n);return f.db.get(c.encode([h,k.encodeKey(d,n,void 0)]),n,function(e,m){e?b(e):b(null,k.decodeValue(m,n))})},createDecoder:function(d){return function(h,
n){return{key:k.decodeKey(c.decode(h)[1],d),value:k.decodeValue(n,d)}}},isClosed:function(){return f.isClosed()},close:function(d){return f.close(d)},iterator:function(d){var h=laa(d||{}),n=d.prefix||[];naa.toLtgt(d,h,function(b){return c.encode([n,k.encodeKey(b,h,{})])},c.lowerBound,c.upperBound);h.prefix=null;h.keyAsBuffer=h.valueAsBuffer=!1;"number"!==typeof h.limit&&(h.limit=-1);h.keyAsBuffer=c.buffer;h.valueAsBuffer=k.valueAsBuffer(h);return function(b){return{next:function(e){return b.next(e)},
end:function(e){b.end(e)}}}(f.db.iterator(h))}}}function VM(){Error.call(this)}function $v(f,c){if(!(this instanceof $v))return new $v(f,c);OZ.call(this,{objectMode:!0,highWaterMark:f.highWaterMark});this._waiting=!1;this._options=f;this._makeData=c}function gA(f){PZ.call(this||vu,f);(this||vu)._destroyed=!1}function oaa(f,c,k){k(null,f)}function WM(f){return function(c,k,d){"function"==typeof c&&(d=k,k=c,c={});"function"!=typeof k&&(k=oaa);"function"!=typeof d&&(d=null);return f(c,k,d)}}function Ti(f){this._capacity=
QZ(f);this._front=this._length=0;if(RZ(f)){for(var c=f.length,k=0;k<c;++k)this[k]=f[k];this._length=c}}function QZ(f){if("number"!==typeof f)if(RZ(f))f=f.length;else return 16;f=Math.min(Math.max(16,f),1073741824);f=(f>>>0)-1;f|=f>>1;f|=f>>2;f|=f>>4;f|=f>>8;return(f|f>>16)+1}function XM(f){f=f.rev_tree.slice();for(var c;c=f.pop();){var k=c.ids,d=k[2];c=c.pos;if(d.length){k=0;for(var h=d.length;k<h;k++)f.push({pos:c+1,ids:d[k]})}else if(d=!!k[1].deleted,k=k[0],!n||(e!==d?e:b!==c?b<c:n<k)){var n=k;
var b=c;var e=d}}return b+"-"+n}function RG(f,c){f=f.slice();for(var k;k=f.pop();){var d=k.pos,h=k.ids,n=h[2];k=c(0===n.length,d,h[0],k.ctx,h[1]);h=0;for(var b=n.length;h<b;h++)f.push({pos:d+1,ids:n[h],ctx:k})}}function paa(f,c){return f.pos-c.pos}function SZ(f){var c=[];RG(f,function(d,h,n,b,e){d&&c.push({rev:h+"-"+n,pos:h,opts:e})});c.sort(paa).reverse();f=0;for(var k=c.length;f<k;f++)delete c[f].pos;return c}function TZ(f){var c=[];f=f.slice();for(var k;k=f.pop();){var d=k.pos,h=k.ids,n=h[0],b=
h[1];h=h[2];var e=0===h.length;k=k.history?k.history.slice():[];k.push({id:n,opts:b});e&&c.push({pos:d+1-k.length,ids:k});n=0;for(b=h.length;n<b;n++)f.push({pos:d+1,ids:h[n],history:k})}return c.reverse()}function qaa(f,c){return f.pos-c.pos}function UZ(f,c){for(var k,d,h=f.length;c<h;c++){var n=f[c];n=[n.id,n.opts,[]];d?(d[2].push(n),d=n):k=d=n}return k}function raa(f,c){return f[0]<c[0]?-1:1}function VZ(f,c){c=[{tree1:f,tree2:c}];for(var k=!1;0<c.length;){var d=c.pop(),h=d.tree1;d=d.tree2;if(h[1].status||
d[1].status)h[1].status="available"===h[1].status||"available"===d[1].status?"available":"missing";for(var n=0;n<d[2].length;n++)if(h[2][0]){for(var b=!1,e=0;e<h[2].length;e++)h[2][e][0]===d[2][n][0]&&(c.push({tree1:h[2][e],tree2:d[2][n]}),b=!0);if(!b){k="new_branch";b=h[2];e=d[2][n];for(var m,a=b,g=e,l=raa,q=0,r=a.length;q<r;)m=q+r>>>1,0>l(a[m],g)?q=m+1:r=m;b.splice(q,0,e)}}else k="new_leaf",h[2][0]=d[2][n]}return{conflicts:k,tree:f}}function WZ(f,c,k){var d=[],h=!1,n=!1;if(!f.length)return{tree:[c],
conflicts:"new_leaf"};for(var b=0,e=f.length;b<e;b++){var m=f[b];if(m.pos===c.pos&&m.ids[0]===c.ids[0])n=VZ(m.ids,c.ids),d.push({pos:m.pos,ids:n.tree}),h=h||n.conflicts,n=!0;else if(!0!==k){var a=m.pos<c.pos?m:c,g=m.pos<c.pos?c:m,l=[],q=[];for(q.push({ids:a.ids,diff:g.pos-a.pos,parent:null,parentIdx:null});0<q.length;){var r=q.pop();if(0===r.diff)r.ids[0]===g.ids[0]&&l.push(r);else for(var u=r.ids[2],v=0,y=u.length;v<y;v++)q.push({ids:u[v],diff:r.diff-1,parent:r.ids,parentIdx:v})}(l=l[0])?(n=VZ(l.ids,
g.ids),l.parent[2][l.parentIdx]=n.tree,d.push({pos:a.pos,ids:a.ids}),h=h||n.conflicts,n=!0):d.push(m)}else d.push(m)}n||d.push(c);d.sort(qaa);return{tree:d,conflicts:h||"internal_node"}}function saa(f,c){f=TZ(f);for(var k,d,h=0,n=f.length;h<n;h++){var b=f[h],e=b.ids;if(e.length>c){k||(k={});var m=e.length-c;var a={pos:b.pos+m,ids:UZ(e,m)};for(var g=0;g<m;g++)k[b.pos+g+"-"+e[g].id]=!0}else a={pos:b.pos,ids:UZ(e,0)};d=d?WZ(d,a,!0).tree:[a]}k&&RG(d,function(l,q,r){delete k[q+"-"+r]});return{tree:d,revs:k?
Object.keys(k):[]}}function taa(f){return f.ids}function XZ(f){return f.reduce(function(c,k){c[k]=!0;return c},{})}function YZ(f){if(!/^\d+-/.test(f))return Jo.createError(Jo.INVALID_REV);var c=f.indexOf("-"),k=f.substring(0,c);f=f.substring(c+1);return{prefix:parseInt(k,10),id:f}}function ZZ(f,c,k){k||(k={deterministic_revs:!0});var d={status:"available"};f._deleted&&(d.deleted=!0);if(c){f._id||(f._id=Ux.uuid());var h=Ux.rev(f,k.deterministic_revs);if(f._rev){c=YZ(f._rev);if(c.error)return c;f._rev_tree=
[{pos:c.prefix,ids:[c.id,{status:"missing"},[[h,d,[]]]]}];var n=c.prefix+1}else f._rev_tree=[{pos:1,ids:[h,d,[]]}],n=1}else{if(f._revisions){h=f._revisions;n=h.start-h.ids.length+1;h=h.ids;c=[h[0],d,[]];k=1;for(var b=h.length;k<b;k++)c=[h[k],{status:"missing"},[c]];f._rev_tree=[{pos:n,ids:c}];n=f._revisions.start;h=f._revisions.ids[0]}if(!f._rev_tree){c=YZ(f._rev);if(c.error)return c;n=c.prefix;h=c.id;f._rev_tree=[{pos:n,ids:[h,d,[]]}]}}Ux.invalidIdError(f._id);f._rev=n+"-"+h;d={metadata:{},data:{}};
for(var e in f)if(Object.prototype.hasOwnProperty.call(f,e)){if((n="_"===e[0])&&!uaa[e])throw f=Jo.createError(Jo.DOC_VALIDATION,e),f.message=Jo.DOC_VALIDATION.message+": "+e,f;n&&!vaa[e]?d.metadata[e.slice(1)]=f[e]:d.data[e]=f[e]}return d}function waa(f,c,k){try{var d=EC.atob(f.data)}catch(h){d={error:Jo.createError(Jo.BAD_ARG,"Attachment is not a valid base64 string")}}if(d.error)return k(d.error);f.length=d.length;f.data="blob"===c?EC.binaryStringToBlobOrBuffer(d,f.content_type):"base64"===c?EC.btoa(d):
d;$Z.binaryMd5(d,function(h){f.digest="md5-"+h;k()})}function xaa(f,c,k){$Z.binaryMd5(f.data,function(d){f.digest="md5-"+d;f.length=f.data.size||f.data.length||0;"binary"===c?EC.blobOrBufferToBinaryString(f.data,function(h){f.data=h;k()}):"base64"===c?EC.blobOrBufferToBase64(f.data,function(h){f.data=h;k()}):k()})}function yaa(f,c,k){if(f.stub)return k();"string"===typeof f.data?waa(f,c,k):xaa(f,c,k)}function a_(f,c,k,d,h,n,b,e){if(Xn.revExists(c.rev_tree,k.metadata.rev)&&!e)return d[h]=k,n();var m=
c.winningRev||Xn.winningRev(c),a="deleted"in c?c.deleted:Xn.isDeleted(c,m),g="deleted"in k.metadata?k.metadata.deleted:Xn.isDeleted(k.metadata),l=/^1-/.test(k.metadata.rev);a&&!g&&e&&l&&(l=k.data,l._rev=m,l._id=k.metadata.id,k=ZZ(l,e));f=Xn.merge(c.rev_tree,k.metadata.rev_tree[0],f);if(e&&(a&&g&&"new_leaf"!==f.conflicts||!a&&"new_leaf"!==f.conflicts||a&&!g&&"new_branch"===f.conflicts))return k=Jo.createError(Jo.REV_CONFLICT),d[h]=k,n();d=k.metadata.rev;k.metadata.rev_tree=f.tree;k.stemmedRevs=f.stemmedRevs||
[];c.rev_map&&(k.metadata.rev_map=c.rev_map);c=Xn.winningRev(k.metadata);e=Xn.isDeleted(k.metadata,c);a=a===e?0:a<e?-1:1;d=d===c?e:Xn.isDeleted(k.metadata,d);b(k,c,e,d,!0,a,h,n)}function FC(f){return f&&"object"===typeof f&&"default"in f?f["default"]:f}function b_(f,c){f=new Uint8Array(f);return GC.blob([f],{type:c})}function zaa(f,c){GC.readAsBinaryString(f,c)}function c_(f,c){c=c.prefix()[0];f=f._cache;var k=f.get(c);k||(k=new br.Map,f.set(c,k));return k}function Vx(){this._batch=[];this._cache=
new br.Map}function YM(f){return"winningRev"in f?f.winningRev:HC.winningRev(f)}function Aaa(f,c,k){var d=f.content_type;return new Promise(function(h,n){c.binaryStore.get(f.digest,function(b,e){if(b){if("NotFoundError"!==b.name)return n(b);b=k.binary?GC.binaryStringToBlobOrBuffer("",d):""}else b=k.binary?b_(e,d):e.toString("base64");delete f.stub;delete f.length;f.data=b;h()})})}function ZM(f,c,k){var d=[];f.forEach(function(h){h.doc&&h.doc._attachments&&Object.keys(h.doc._attachments).forEach(function(n){n=
h.doc._attachments[n];"data"in n||d.push(n)})});return Promise.all(d.map(function(h){return Aaa(h,c,k)}))}function $M(f){(this||Wx).db=f;(this||Wx)._ended=!1;(this||Wx)._nexting=!1}function aw(f){(this||kk)._db=f;(this||kk)._operations=[];(this||kk)._written=!1}function on(f){if(!arguments.length||void 0===f)throw Error("constructor requires at least a location argument");if("string"!=typeof f)throw Error("constructor requires a location string argument");(this||Lk).location=f;(this||Lk).status="new"}
function Ko(f,c,k,d,h,n){this._color=f;this.key=c;this.value=k;this.left=d;this.right=h;this._count=n}function Fs(f){return new Ko(f._color,f.key,f.value,f.left,f.right,f._count)}function bw(f,c){return new Ko(f,c.key,c.value,c.left,c.right,c._count)}function lk(f){f._count=1+(f.left?f.left._count:0)+(f.right?f.right._count:0)}function hA(f,c){this._compare=f;this.root=c}function aN(f,c){if(c.left){var k=aN(f,c.left);if(k)return k}if(k=f(c.key,c.value))return k;if(c.right)return aN(f,c.right)}function bN(f,
c,k,d){if(0>=c(f,d.key)){if(d.left){var h=bN(f,c,k,d.left);if(h)return h}if(h=k(d.key,d.value))return h}if(d.right)return bN(f,c,k,d.right)}function cN(f,c,k,d,h){var n=k(f,h.key),b=k(c,h.key);if(0>=n&&(h.left&&(n=cN(f,c,k,d,h.left))||0<b&&(n=d(h.key,h.value))))return n;if(0<b&&h.right)return cN(f,c,k,d,h.right)}function Lo(f,c){this.tree=f;this._stack=c}function d_(f,c){f.key=c.key;f.value=c.value;f.left=c.left;f.right=c.right;f._color=c._color;f._count=c._count}function Baa(f,c){return f<c?-1:f>
c?1:0}function e_(f,c){for(var k in f)c[k]=f[k]}function iA(f,c,k){return wu(f,c,k)}function Caa(f){return 0<Mo.compare(f,(this||sf)._end)}function Daa(f){return 0<=Mo.compare(f,(this||sf)._end)}function Eaa(f){return 0>Mo.compare(f,(this||sf)._end)}function Faa(f){return 0>=Mo.compare(f,(this||sf)._end)}function SG(f,c){f_.call(this||sf,f);(this||sf)._limit=c.limit;-1===(this||sf)._limit&&((this||sf)._limit=Infinity);f=f._store[f._location];(this||sf).keyAsBuffer=!1!==c.keyAsBuffer;(this||sf).valueAsBuffer=
!1!==c.valueAsBuffer;(this||sf)._reverse=c.reverse;(this||sf)._options=c;(this||sf)._done=0;(this||sf)._reverse?((this||sf)._incr="prev",(this||sf)._start=Mo.upperBound(c),(this||sf)._end=Mo.lowerBound(c),"undefined"===typeof(this||sf)._start?(this||sf)._tree=f.end:Mo.upperBoundInclusive(c)?(this||sf)._tree=f.le((this||sf)._start):(this||sf)._tree=f.lt((this||sf)._start),(this||sf)._end&&(Mo.lowerBoundInclusive(c)?(this||sf)._test=Daa:(this||sf)._test=Caa)):((this||sf)._incr="next",(this||sf)._start=
Mo.lowerBound(c),(this||sf)._end=Mo.upperBound(c),"undefined"===typeof(this||sf)._start?(this||sf)._tree=f.begin:Mo.lowerBoundInclusive(c)?(this||sf)._tree=f.ge((this||sf)._start):(this||sf)._tree=f.gt((this||sf)._start),(this||sf)._end&&(Mo.upperBoundInclusive(c)?(this||sf)._test=Faa:(this||sf)._test=Eaa))}function Yn(f){if(!((this||sf)instanceof Yn))return new Yn(f);g_.call(this||sf,"string"===typeof f?f:"");(this||sf)._location=(this||sf).location?"$"+(this||sf).location:"_tree";(this||sf)._store=
(this||sf).location?jA:this||sf;(this||sf)._store[(this||sf)._location]=(this||sf)._store[(this||sf)._location]||Gaa(Mo.compare)}function h_(f){return f&&"object"===typeof f&&"default"in f?f["default"]:f}function dN(f,c){f=Haa.assign({db:Iaa},f);Jaa.call(this,f,c)}function eN(f){f.__serialize__=function(){return{__expr__:'({type: "'+f.type+'", name: "'+f.name+'", _id: "'+f._id+'"})'}};return f}function IC(f){var c,k,d,h,n,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress){if(!f)return m.return(!1);
if(f&&f._rev)return m.return(f);c=f;k=c.type;d=c.name;h=c._id;n=Object;b=n.assign;e=f;return m.yield(Cg.MorphicDB.default.fetchCommit(k,d,h),2)}b.call(n,e,m.yieldResult);return m.return(f)})}function fN(f){return[]}function TG(f,c){c=void 0===c?{}:c;var k,d,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:return k=c.morphicDB||Ge.MorphicDB.default,b.yield(k.load("part","string"===typeof f?f:f.name,c,"string"===typeof f?void 0:f),2);case 2:d=b.yieldResult;
if(!d.isWindow||!d.targetMorph){b.jumpTo(3);break}h=d.targetMorph;return b.yield(Ge.ensureCommitInfo(d.metadata&&d.metadata.commit),4);case 4:(n=b.yieldResult)&&h.changeMetaData("commit",n,!0,!1);case 3:return b.return(d)}})}function gN(f,c,k,d,h,n){var b,e,m,a,g,l,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:v.setCatchFinallyBlocks(2);if(f.isMorph){v.jumpTo(4);break}if("function"!==typeof f.beforePublish){v.jumpTo(5);break}return v.yield(f.beforePublish(c,
f),5);case 4:b=[],f.withAllSubmorphsDo(function(y){"function"===typeof y.beforePublish&&b.push(y)}),e=$jscomp.makeIterator(b),m=e.next();case 8:if(m.done){v.jumpTo(5);break}a=m.value;return v.yield(a.beforePublish(),9);case 9:m=e.next();v.jumpTo(8);break;case 5:v.leaveTryBlock(3);break;case 2:g=v.enterCatchBlock(),l="Error in beforePublish of "+f+"\n"+g.stack,"function"===typeof f.world&&f.world()?f.world().logError(Error(l)):console.error(l);case 3:return q=Object.assign({previewWidth:100,previewHeight:100,
previewType:"png"},k),r=k.morphicDB||Ge.MorphicDB.default,v.yield(r.snapshotAndCommit("part",c,f,q,d,h,n),12);case 12:return u=v.yieldResult,Ge.emit("lively.partsbin/partpublished",u),v.return(u)}})}function JC(f,c){c=void 0===c?{}:c;var k,d,h,n,b,e,m,a,g,l,q,r,u,v,y,z,A,B,G,E,K,J,P,ea,ra,D,O,L,N,aa,Y,ma,bb,Qa,X,V,ha,xa,yb,ec,Nb,ac,Cc,Hb,gd,yd,U,na,Aa,hb,Pb,od,nd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ac){switch(Ac.nextAddress){case 1:return k=c,d=void 0===k.showPublishDialog?
!0:k.showPublishDialog,h=void 0===k.notifications?!0:k.notifications,n=void 0===k.loadingIndicator?!0:k.loadingIndicator,b=void 0===k.preferWindow?!0:k.preferWindow,a=f,g=f.world()||f.env.world,l=f.name,q=[],r="",Ac.yield(Ge.ensureCommitInfo(Ge.Path("metadata.commit").get(f)||Ge.Path("metadata.commit").get(a)),2);case 2:u=Ac.yieldResult;v=c.morphicDB||Ge.MorphicDB.default;u||(u={type:"part",name:f.name,author:g.getCurrentUser(),tags:[],description:"no description"});if(!d){u&&(y=u,l=y.name,q=y.tags,
r=y.description);Ac.jumpTo(3);break}z=g;A=z.openPrompt;return Ac.yield(Ge.loadPart("publish part dialog"),5);case 5:return Ac.yield(A.call(z,Ac.yieldResult,{part:f}),4);case 4:B=Ac.yieldResult;G=B.db;E=B.commit;if(!E)return Ac.return(null);G&&(c.morphicDB=v=G);K=E;l=K.name;q=K.tags;r=K.description;case 3:if(!n){Ac.jumpTo(6);break}J=$world.execCommand("open loading indicator","saving "+l+"...");return Ac.yield(Ge.promise.delay(80),6);case 6:Ac.setCatchFinallyBlocks(8,9);P="HEAD";ea=u?u.name:f.name;
if(ea===l){ra=u?u._id:void 0;Ac.jumpTo(11);break}return Ac.yield(v.exists("part",l),12);case 12:D=Ac.yieldResult;O=D.exists;L=D.commitId;if(!O){Ac.jumpTo(13);break}return Ac.yield(g.confirm('A part "'+l+'" already exists, overwrite?'),14);case 14:N=Ac.yieldResult;if(!N)return Ac.return(null);ra=L;case 13:a.name=l;case 11:return b&&!f.isWindow&&(aa=f.getWindow())&&aa.targetMorph===f&&(f=aa,m=aa.metadata,e=!0),Y={author:f.world().getCurrentUser(),message:"published",tags:q,description:r},Ac.yield(Ge.savePart(f,
l,c,Y,P,ra),15);case 15:ma=Ac.yieldResult;if(!e){Ac.jumpTo(16);break}if(a.metadata)return Qa=a.metadata,Ac.yield(Ge.ensureCommitInfo(aa.metadata.commit),20);bb=a;return Ac.yield(Ge.ensureCommitInfo(aa.metadata.commit),19);case 19:bb.metadata={commit:Ac.yieldResult};Ac.jumpTo(18);break;case 20:Qa.commit=Ac.yieldResult;case 18:aa.metadata=m;case 16:return h&&f.setStatusMessage("saved part "+l),Ac.return(ma);case 9:Ac.enterFinallyBlock();J&&J.remove();Ac.leaveFinallyBlock(0);break;case 8:X=Ac.enterCatchBlock();
V=$jscomp.makeIterator(X.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||[]);V.next();V.next();ha=V.next().value;xa=V.next().value;if(!ha||!xa){Ac.jumpTo(21);break}yb=$jscomp;ec=yb.makeIterator;return Ac.yield(v.log(xa,1,!0),22);case 22:return Nb=ec.call(yb,Ac.yieldResult),Cc=ac=Nb.next().value,Hb=Cc.author,gd=Hb.name,yd=Cc.timestamp,U='The current version of part "'+l+'" is not the most recent!\nA newer version by '+(gd+" was saved on ")+
(Ge.date.format(new Date(yd),"yyyy-mm-dd HH:MM")+". Overwrite?"),Ac.yield(g.confirm(["Version Mismatch\n",{},U,{fontWeight:"normal",fontSize:16}]),23);case 23:na=Ac.yieldResult;if(!na)return Ac.return(null);Aa=Ge.obj.dissoc(ac,["preview"]);a.changeMetaData("commit",Aa,!0,!1);return Ac.return(JC(a,Object.assign({},c,{morphicDB:v,showPublishDialog:!1})));case 21:hb=$jscomp.makeIterator(X.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but no version entry exists/)||[]);
hb.next();hb.next();Pb=hb.next().value;if(!Pb){Ac.jumpTo(24);break}od="Part "+l+" no longer exist in the object database.\nDo you still want to publish it?";return Ac.yield(g.confirm(od),25);case 25:nd=Ac.yieldResult;if(!nd)return Ac.return(null);a.changeMetaData("commit",null,!0,!1);return Ac.return(JC(a,Object.assign({},c,{morphicDB:v,showPublishDialog:!1})));case 24:throw console.error(X),h&&g.logError("Error saving part: "+X),X;}})}function hN(f){f=void 0===f?{}:f;var c,k,d,h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress)return c=f.morphicDB||Ge.MorphicDB.default,e.yield(c.latestCommits("part"),2);if(3!=e.nextAddress)return k=e.yieldResult,d=k.map(function(m){return{isListItem:!0,string:m.name,value:m}}),e.yield($world.filterableListPrompt("Select part to load",d,{fuzzy:!0}),3);h=e.yieldResult;n=$jscomp.makeIterator(h.selected);b=n.next().value;return e.return(b?Ge.loadPart(b):null)})}function iN(f){var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield($world.prompt("Enter part name to publish object under",
{input:f.name||"part-name",historyId:"lively.partsbin-partname-publish-to-folder-input-hist"}),2);c=k.yieldResult;if(!c)throw"canceled";return k.return(Ge.saveObjectToPartsbinFolder(f,c,{previewWidth:f.width,previewHeight:f.height}))})}function jN(f,c,k){k=void 0===k?{}:k;var d,h,n,b,e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:k=Object.assign({preferWindow:!0},k);k.preferWindow&&(f=(d=f.getWindow())&&d.targetMorph===f?d:f);q.setCatchFinallyBlocks(2);
if(f.isMorph){q.jumpTo(4);break}if("function"!==typeof f.beforePublish){q.jumpTo(5);break}return q.yield(f.beforePublish(c,f),5);case 4:h=[],f.withAllSubmorphsDo(function(r){"function"===typeof r.beforePublish&&h.push(r)}),n=$jscomp.makeIterator(h),b=n.next();case 8:if(b.done){q.jumpTo(5);break}e=b.value;return q.yield(e.beforePublish(),9);case 9:b=n.next();q.jumpTo(8);break;case 5:q.leaveTryBlock(3);break;case 2:m=q.enterCatchBlock(),a="Error in beforePublish of "+f+"\n"+m.stack,"function"===typeof f.world&&
f.world()?f.world().logError(Error(a)):console.error(a);case 3:return q.yield(Ge.resource(k.partsbinFolder).ensureExistance(),12);case 12:return g=Ge.resource(k.partsbinFolder).join(c+".json"),q.yield(Ge.createMorphSnapshot(f,k),13);case 13:return l=q.yieldResult,q.yield(g.write(JSON.stringify(l,null,2)),14);case 14:return q.return({partName:c,url:g.url})}})}function KC(f,c){c=void 0===c?{}:c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(Ge.loadPart(f,c))})}function kN(f){var c=
{type:"input",extent:Ge.pt(420,24),fixedWidth:!0,fixedHeight:!0,padding:Ge.Rectangle.inset(4,4),border:{color:Ge.Color.gray,width:1}};return Object.assign(Ge.morph({extent:Ge.pt(420,24),layout:new Ge.VerticalLayout({resizeSubmorphs:!0,spacing:3}),submorphs:[Object.assign({},c,{name:"name input",placeholder:"name"}),Object.assign({},c,{name:"type input",placeholder:"type"}),Object.assign({},c,{name:"timestamp input",placeholder:"timestamp"}),{layout:new Ge.VerticalLayout({resizeSubmorphs:!0,spacing:3}),
submorphs:[Object.assign({},c,{name:"author.name input",placeholder:"author name"}),Object.assign({},c,{name:"author.email input",placeholder:"author email"}),Object.assign({},c,{name:"author.realm input",placeholder:"author realm"})]},Object.assign({},c,{name:"tags input",placeholder:"tags"}),Object.assign({},c,{height:70,name:"description input",type:"text"}),Object.assign({},c,{height:70,name:"message input",type:"text"}),Object.assign({},c,{height:70,name:"metadata input",type:"text"}),{layout:new Ge.HorizontalLayout({spacing:3,
direction:"centered"}),submorphs:[{type:"button",name:"ok button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}],name:"commit editor",get ui(){return{metadataInput:this.get("metadata input"),messageInput:this.get("message input"),descriptionInput:this.get("description input"),tagsInput:this.get("tags input"),authorRealmInput:this.get("author.realm input"),authorEmailInput:this.get("author.email input"),authorNameInput:this.get("author.name input"),timestampInput:this.get("timestamp input"),
typeInput:this.get("type input"),nameInput:this.get("name input"),cancelButton:this.get("cancel button"),okButton:this.get("ok button")}},set commit(k){this._commit=k;var d=k.type,h=k.timestamp,n=k.author,b=k.tags,e=k.description,m=k.metadata,a=this.ui,g=a.typeInput,l=a.timestampInput,q=a.authorNameInput,r=a.authorEmailInput,u=a.authorRealmInput,v=a.tagsInput,y=a.descriptionInput,z=a.messageInput,A=a.metadataInput;a.nameInput.input=k.name;g.input=d;l.input=String(new Date(h));q.input=n.name;r.input=
n.email;u.input=n.realm;v.input=b.join(" ");y.textString=e;z.textString="";A.textString=m?JSON.stringify(m,null,2):""},get commit(){var k=this._commit;if(!k)throw Error("commit editor does not have a _commit object");var d=this.ui,h=d.authorNameInput,n=d.authorEmailInput,b=d.authorRealmInput,e=d.tagsInput,m=d.descriptionInput,a=d.messageInput,g=d.metadataInput,l=d.nameInput.input;d=d.typeInput.input;if(k.name!==l)throw Error("name does not match _commit.name: "+l+" vs "+k.name);if(k.type!==d)throw Error("type does not match _commit.type: "+
d+" vs "+k.type);k.author.name=h.input;k.author.email=n.input;k.author.realm=b.input;k.tags=e.input.split(" ").map(function(q){return q.trim()}).filter(Boolean);k.description=m.textString;k.message=a.textString;k.metadata=g.textString?JSON.parse(g.textString):null;return k},onLoad:function(){Ge.connect(this.ui.okButton,"fire",this,"accept");Ge.connect(this.ui.cancelButton,"fire",this,"cancel")},accept:function(){},cancel:function(){}}),f)}function UG(f,c,k){var d,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){d=
f.isResource?f:Rf.resource(System.decanonicalize(f));h=d.nameWithoutExt();return n.return(Rf.loadWorldFromDB(h,void 0,c,k))})}function VG(f,c,k){var d,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return d=Rf.MorphicDB.default,b.yield(d.load("world",void 0,k,f),2);h=b.yieldResult;n="undefined"!==typeof document?document.location.search:"";k=Object.assign({pathForBrowserHistory:Rf.pathForBrowserHistory(h.name,n)},k);return b.return(Rf.loadWorld(h,c,k))})}function WG(f,
c,k,d){var h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return h=Rf.MorphicDB.default,e.yield(h.load("world",f,d,void 0,c||void 0),2);n=e.yieldResult;b="undefined"!==typeof document?document.location.search:"";d=Object.assign({pathForBrowserHistory:Rf.pathForBrowserHistory(f,b)},d);return e.return(Rf.loadWorld(n,k,d))})}function XG(f,c,k){k=void 0===k?{}:k;var d,h,n,b,e,m,a,g,l,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:d=
k;h=d.env;n=void 0===d.verbose?!0:d.verbose;b=void 0===d.localconfig?!0:d.localconfig;e=void 0===d.l2l?!0:d.l2l;m=void 0===d.shell?!0:d.shell;a=void 0===d.worldLoadDialog?!1:d.worldLoadDialog;g=void 0===d.showUserFlap?"undefined"===typeof f.showsUserFlap?!0:f.showsUserFlap:d.showUserFlap;h=h||(c?c.env:Rf.MorphicEnv.default());l=h.domEnv.document||document;q=l.getElementById("dom-loading-indicator");y.setCatchFinallyBlocks(2,3);if(!(r=e)){y.jumpTo(5);break}return y.yield(Rf.setupLively2Lively(f),6);
case 6:r=y.yieldResult;case 5:u=r;if(!u||!m){y.jumpTo(7);break}return y.yield(Rf.setupLivelyShell({l2lClient:u}),7);case 7:n&&q&&(q.style.display="");if(!b){y.jumpTo(9);break}return y.yield(Rf.loadLocalConfig(),10);case 10:case 9:return y.yield(h.setWorld(f),11);case 11:a&&f.execCommand("load world");k.pathForBrowserHistory&&window.history.pushState({},"lively.next",k.pathForBrowserHistory);f.showsUserFlap=g;if(c)c.onUnload();Rf.emit("world/loaded",f);return y.return(f);case 3:y.enterFinallyBlock();
q&&(q.style.display="none");y.leaveFinallyBlock(0);break;case 2:v=y.enterCatchBlock();console.error("Error loading world: ",v);if(!c){y.jumpTo(12);break}return y.yield(h.setWorld(c),13);case 13:c.showError(v);case 12:throw v;}})}function kA(f,c){var k,d,h,n,b,e,m,a,g,l,q,r,u,v,y,z,A,B,G,E,K,J,P,ea,ra,D,O,L,N,aa,Y,ma,bb,Qa,X,V,ha,xa,yb,ec,Nb,ac,Cc,Hb,gd,yd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(U){switch(U.nextAddress){case 1:return c=Object.assign({showSaveDialog:!0,useExpectedCommit:!0,
errorOnMissingExpectedCommit:!1,confirmOverwrite:!0},c),k=f.name,d=[],h="",U.yield(Rf.ensureCommitInfo(Rf.Path("metadata.commit").get(f)),2);case 2:n=U.yieldResult;b=c.morphicdb||Rf.MorphicDB.default;e="";m="db";if(!c.showSaveDialog){n&&(a=n,k=a.name,d=a.tags,h=a.description);U.jumpTo(3);break}return U.yield(Rf.resource("part://SystemDialogs/save world dialog").read(),4);case 4:return g=U.yieldResult,U.yield(f.openPrompt(g,{targetWorld:f}),5);case 5:if(l=U.yieldResult,q=l.commit,r=l.db,u=l.mode,v=
l.filePath,r&&(b=r),m=u,e=v,y=q||{},k=y.name,d=y.tags,h=y.description,!k)return U.return(null);case 3:return z=$world.execCommand("open loading indicator","saving "+k+"..."),U.yield(Rf.promise.delay(80),6);case 6:if("json"!=m){U.jumpTo(7);break}A=Rf.resource(System.baseURL).join(e).withRelativePartsResolved();return U.yield(A.exists(),8);case 8:return U.yieldResult?(z.visible=!1,U.yield($world.confirm(["File Conflict\n",{},"The file you want to save the world to\n",{fontSize:15,fontWeight:"normal"},
A.url,{textStyle:"italic",fontSize:15,fontWeight:"normal"},"\n already exists. Overwrite?",{fontSize:15,fontWeight:"normal"}],{lineWrapping:!1}),12)):U.yield(A.ensureExistance(),10);case 12:B=U.yieldResult;if(!B)return z.remove(),U.return();z.visible=!0;case 10:return G=A,E=G.writeJson,U.yield(Rf.createMorphSnapshot(f),14);case 14:return U.yield(E.call(G,U.yieldResult),13);case 13:return z.remove(),f.setStatusMessage("saved world "+k+" to file: "+A.url),U.return();case 7:U.setCatchFinallyBlocks(15,
16);K={previewWidth:200,previewHeight:200,previewType:"png",ignoreMorphs:[z]};J="HEAD";P=n?n.name:f.name;if(!c.useExpectedCommit){U.jumpTo(18);break}if(P===k||!c.confirmOverwrite){ea=n?n._id:void 0;U.jumpTo(18);break}return U.yield(b.exists("world",k),20);case 20:ra=U.yieldResult;D=ra.exists;O=ra.commitId;if(!D){U.jumpTo(21);break}return U.yield(f.confirm('A world "'+k+'" already exists, overwrite?',{styleClasses:["Halo"],fill:Rf.Color.rgba(0,0,0,.8)}),22);case 22:L=U.yieldResult;if(!L)return U.return(null);
ea=O;case 21:f.name=k;case 18:return N={author:f.getCurrentUser(),message:"world save",tags:d,description:h},U.yield(b.snapshotAndCommit("world",k,f,K,N,J,ea),23);case 23:return aa=U.yieldResult,window.history&&(Y="undefined"!==typeof document?document.location.search:"",ma=Rf.pathForBrowserHistory(k,Y),window.history.pushState({},"lively.next",ma)),f.setStatusMessage("saved world "+k),f.get("world-list")&&f.get("world-list").onWorldSaved(k),U.return(aa);case 16:U.enterFinallyBlock();z.remove();U.leaveFinallyBlock(0);
break;case 15:bb=U.enterCatchBlock();if(bb.message.includes("but no version entry exists")&&!c.errorOnMissingExpectedCommit)return U.return(kA(f,Object.assign({},c,{morphicdb:b,useExpectedCommit:!1,showSaveDialog:!1})));Qa=$jscomp.makeIterator(bb.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||[]);Qa.next();Qa.next();X=Qa.next().value;V=Qa.next().value;if(!X||!V){U.jumpTo(24);break}ha=$jscomp;xa=ha.makeIterator;return U.yield(b.log(V,
1,!0),25);case 25:yb=xa.call(ha,U.yieldResult);ec=yb.next().value;Nb=!0;if(!c.confirmOverwrite){U.jumpTo(26);break}ac=ec;Cc=ac.author;Hb=Cc.name;gd=ac.timestamp;yd="The current version of world "+k+" is not the most recent!\nA newer version by "+(Hb+" was saved on ")+(Rf.date.format(new Date(gd),"yyyy-mm-dd HH:MM")+". Overwrite?");return U.yield(f.confirm(yd),27);case 27:Nb=U.yieldResult;case 26:if(!Nb)return U.return(null);f.changeMetaData("commit",Rf.obj.dissoc(ec,["preview"]),!0,!1);return U.return(kA(f,
Object.assign({},c,{morphicdb:b,showSaveDialog:!1})));case 24:console.error(bb),f.logError("Error saving world: "+bb),U.jumpTo(16)}})}function lN(f,c){var k=f.row;f=f.column;var d=c.row;c=c.column;return k<d?-2:k===d?f<c?-1:f===c?0:1:2}function Gs(f,c){return 0>tk.comparePosition(f,c)}function lA(f,c){return 0>=tk.comparePosition(f,c)}function Hs(f,c){return 0===tk.comparePosition(f,c)}function mA(f,c){return tk.lessPosition(f,c)?f:c}function nA(f,c){return tk.lessPosition(f,c)?c:f}function mN(f,
c){if(!f||!c)return f==c;var k=!0,d={},h;for(h in f)if(d[h]=!0,!c.hasOwnProperty(h)||f[h]!==c[h]){k=!1;break}if(k)for(var n in c)if(!(d[n]||f.hasOwnProperty(n)&&f[n]===c[n])){k=!1;break}return k}function YG(f,c,k,d,h){h=void 0===h?"":h;var n="string"!==typeof f,b="string"!==typeof k;if(n||b){var e=[];n?e.push(f,c):e.push(f+h,c);b?e.push(k,d):e.push(k+h,d);return e}return!c&&!d||c==d?[f+h+k,c]:c&&d?Tg.shallowEquals(c,d)?[f+h+k,c]:[f+h,c,k,d]:[f+h,c,k,d]}function ZG(f,c){c=void 0===c?"":c;if(2>=f.length)return f;
var k=[],d=$jscomp.makeIterator(f),h=d.next().value,n=d.next().value;for(d=2;d<f.length;d+=2)n=Tg.concatAttributePair(h,n,f[d],f[d+1],c),2>=n.length?(h=n[0],n=n[1]):(k.push.apply(k,$jscomp.arrayFromIterable(n.slice(0,-2))),n=$jscomp.makeIterator(n.slice(-2)),h=n.next().value,n=n.next().value);k.push(h,n);return k}function $G(f,c){for(var k=0,d=0;d<f.length;d+=2){var h=f[d],n=k+("string"===typeof h?h.length:1);if(n<c)k=n;else{if(k===c)return[f.slice(0,d),f.slice(d)];if(n===c)return[f.slice(0,d+2),
f.slice(d+2)];if("string"!==typeof h)throw Error("Assuming text is a string for splitting it, got "+h+" instead!");var b=f[d+1],e=c-k;n=[].concat($jscomp.arrayFromIterable(f.slice(0,d)),[h.slice(0,e),b]);f=h.length===e?f.slice(d+2):[h.slice(c-k),b].concat($jscomp.arrayFromIterable(f.slice(d+2)));return[n,f]}}return[f,[]]}function aH(f,c){var k=f;f=0;for(var d=[],h=0;h<c.length;h++){var n=$jscomp.makeIterator(Tg.splitTextAndAttributesAt(k,c[h]-f));k=n.next().value;n=n.next().value;d.push(k);for(var b=
0;b<k.length;b+=2)f+="string"===typeof k[b]?k[b].length:1;k=n}d.push(k);return d}function bH(f,c,k){k=void 0===k?!1:k;if(!f.length||2===f.length&&""==f[0])return k?c:c.slice();if(!c.length||2===c.length&&""==c[0])return k?f:f.slice();f=k?f:f.slice();for(k=0;k<c.length;k+=2)f.push(c[k],c[k+1]);return f}function cH(f,c,k){var d=c.start;c=c.end;if(Tg.eqPosition(d,c))return null;Tg.lessPosition(c,d)&&(c=$jscomp.makeIterator([c,d]),d=c.next().value,c=c.next().value);var h=d;d=h.row;var n=h.column;h=c;
c=h.row;h=h.column;var b=f.getLine(d),e=b.textAndAttributes,m=0;n=$jscomp.makeIterator(Tg.splitTextAndAttributesAt(e,n));f=n.next().value;n=n.next().value;e.length=0;Tg.textAndAttributesDo(f,function(l,q){m+="string"===typeof l?l.length:1;e.push(l,q)});if(d===c){var a=$jscomp.makeIterator(Tg.splitTextAndAttributesAt(n,h-m));n=a.next().value;a=a.next().value}Tg.textAndAttributesDo(n,function(l,q){return e.push(l,k(b,q))});d===c&&Tg.textAndAttributesDo(a,function(l,q){return e.push(l,q)});b._textAttributes=
null;b.textAndAttributes=Tg.joinTextAttributes(e);if(d!==c){a={};for(d+=1;d<c;a={$jscomp$loop$prop$textAndAttributes$1199$2247:a.$jscomp$loop$prop$textAndAttributes$1199$2247},d++)b=b.nextLine(),a.$jscomp$loop$prop$textAndAttributes$1199$2247=b.textAndAttributes,f=a.$jscomp$loop$prop$textAndAttributes$1199$2247.slice(),a.$jscomp$loop$prop$textAndAttributes$1199$2247.length=0,Tg.textAndAttributesDo(f,function(l){return function(q,r){return l.$jscomp$loop$prop$textAndAttributes$1199$2247.push(q,k(b,
r))}}(a)),b._textAttributes=null,b.textAndAttributes=Tg.joinTextAttributes(a.$jscomp$loop$prop$textAndAttributes$1199$2247);b=b.nextLine();var g=b.textAndAttributes;d=$jscomp.makeIterator(Tg.splitTextAndAttributesAt(g,h));a=d.next().value;d=d.next().value;g.length=0;Tg.textAndAttributesDo(a,function(l,q){return g.push(l,k(b,q))});Tg.textAndAttributesDo(d,function(l,q){return g.push(l,q)});b._textAttributes=null;b.textAndAttributes=Tg.joinTextAttributes(g)}}function dH(f,c){var k=f.column;f=f.row;
var d=[],h=[];c=$jscomp.makeIterator(Tg.splitTextAndAttributesIntoLines(c));for(var n=c.next();!n.done;n=c.next()){n=n.value;for(var b=0;b<n.length;b+=2){var e=n[b];e=k+("string"==typeof e?e.length:1);d.push({start:{row:f,column:k},end:{row:f,column:e}});h.push(n[b],n[b+1]);k=e}k=0;f++}return{ranges:d,textAndAttributes:h}}function LC(f,c){c=void 0===c?"\n":c;if(!f.length)return[];for(var k=[],d=[],h=0;h<f.length;h+=2){var n=f[h],b=f[h+1];if("string"!==typeof n)d.push(n,b);else for(;n.length;){var e=
n.indexOf(c);if(-1===e){d.push(n,b);break}0<e&&d.push(n.slice(0,e),b);k.push(d);n=n.slice(e+1);d=[]}}d.length?k.push(d):(d=$jscomp.makeIterator(f.slice(-2)),f=d.next().value,d=d.next().value,"string"===typeof f&&f.endsWith(c)&&k.push(["",d]));return k}function eH(f,c){c=void 0===c?f.textAndAttributesInRange(f.selection.range):c;var k=new f.constructor(Object.assign({},f.defaultTextStyle,{width:f.width,textAndAttributes:c}));c=k.textRenderer.directRenderTextLayerFn(k);f=k.textRenderer.directRenderLineFn(k);
c=c();var d=System.global&&System.global.getComputedStyle?System.global.getComputedStyle(c):null;d&&(c.ownerDocument.body.appendChild(c),c.style.whiteSpace=d.whiteSpace,c.style.overflowWrap=d.overflowWrap,c.style.wordBreak=d.wordBreak,c.style.minWidth=d.minWidth,c.parentNode.removeChild(c));k=$jscomp.makeIterator(k.document.lines);for(d=k.next();!d.done;d=k.next())c.appendChild(f(d.value));return c.outerHTML}function i_(){function f(c){(this||Kaa).options=c||{}}if(j_)return nN;j_=!0;nN=f;f.prototype.emit=
function(c){return c};f.prototype.visit=function(c){return this[c.type](c)};f.prototype.mapVisit=function(c,k){var d="";k=k||"";for(var h=0,n=c.length;h<n;h++)d+=this.visit(c[h]),k&&h<n-1&&(d+=this.emit(k));return d};return nN}function k_(){if(l_)return m_;l_=!0;return m_="function"===typeof Object.create?function(f,c){c&&(f.super_=c,f.prototype=Object.create(c.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:function(f,c){if(c){f.super_=c;var k=function(){};k.prototype=
c.prototype;f.prototype=new k;f.prototype.constructor=f}}}function Laa(){function f(d){c.call(this||oN,d)}if(n_)return pN;n_=!0;var c=i_(),k=k_();pN=f;k(f,c);f.prototype.compile=function(d){return d.stylesheet.rules.map((this||oN).visit,this||oN).join("")};f.prototype.comment=function(d){return this.emit("",d.position)};f.prototype.import=function(d){return this.emit("@import "+d.import+";",d.position)};f.prototype.media=function(d){return this.emit("@media "+d.media,d.position)+this.emit("{")+this.mapVisit(d.rules)+
this.emit("}")};f.prototype.document=function(d){return this.emit("@"+(d.vendor||"")+"document "+d.document,d.position)+this.emit("{")+this.mapVisit(d.rules)+this.emit("}")};f.prototype.charset=function(d){return this.emit("@charset "+d.charset+";",d.position)};f.prototype.namespace=function(d){return this.emit("@namespace "+d.namespace+";",d.position)};f.prototype.supports=function(d){return this.emit("@supports "+d.supports,d.position)+this.emit("{")+this.mapVisit(d.rules)+this.emit("}")};f.prototype.keyframes=
function(d){return this.emit("@"+(d.vendor||"")+"keyframes "+d.name,d.position)+this.emit("{")+this.mapVisit(d.keyframes)+this.emit("}")};f.prototype.keyframe=function(d){var h=d.declarations;return this.emit(d.values.join(","),d.position)+this.emit("{")+this.mapVisit(h)+this.emit("}")};f.prototype.page=function(d){var h=d.selectors.length?d.selectors.join(", "):"";return this.emit("@page "+h,d.position)+this.emit("{")+this.mapVisit(d.declarations)+this.emit("}")};f.prototype["font-face"]=function(d){return this.emit("@font-face",
d.position)+this.emit("{")+this.mapVisit(d.declarations)+this.emit("}")};f.prototype.host=function(d){return this.emit("@host",d.position)+this.emit("{")+this.mapVisit(d.rules)+this.emit("}")};f.prototype["custom-media"]=function(d){return this.emit("@custom-media "+d.name+" "+d.media+";",d.position)};f.prototype.rule=function(d){var h=d.declarations;return h.length?this.emit(d.selectors.join(","),d.position)+this.emit("{")+this.mapVisit(h)+this.emit("}"):""};f.prototype.declaration=function(d){return this.emit(d.property+
":"+d.value,d.position)+this.emit(";")};return pN}function Maa(){function f(d){d=d||{};c.call(this||cw,d);(this||cw).indentation=d.indent}if(o_)return qN;o_=!0;var c=i_(),k=k_();qN=f;k(f,c);f.prototype.compile=function(d){return this.stylesheet(d)};f.prototype.stylesheet=function(d){return this.mapVisit(d.stylesheet.rules,"\n\n")};f.prototype.comment=function(d){return this.emit(this.indent()+"/*"+d.comment+"*/",d.position)};f.prototype.import=function(d){return this.emit("@import "+d.import+";",
d.position)};f.prototype.media=function(d){return this.emit("@media "+d.media,d.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(d.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};f.prototype.document=function(d){return this.emit("@"+(d.vendor||"")+"document "+d.document,d.position)+this.emit("  {\n"+this.indent(1))+this.mapVisit(d.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};f.prototype.charset=function(d){return this.emit("@charset "+d.charset+";",d.position)};f.prototype.namespace=function(d){return this.emit("@namespace "+
d.namespace+";",d.position)};f.prototype.supports=function(d){return this.emit("@supports "+d.supports,d.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(d.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};f.prototype.keyframes=function(d){return this.emit("@"+(d.vendor||"")+"keyframes "+d.name,d.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(d.keyframes,"\n")+this.emit(this.indent(-1)+"}")};f.prototype.keyframe=function(d){var h=d.declarations;return this.emit(this.indent())+this.emit(d.values.join(", "),
d.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(h,"\n")+this.emit(this.indent(-1)+"\n"+this.indent()+"}\n")};f.prototype.page=function(d){var h=d.selectors.length?d.selectors.join(", ")+" ":"";return this.emit("@page "+h,d.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(d.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};f.prototype["font-face"]=function(d){return this.emit("@font-face ",d.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(d.declarations,
"\n")+this.emit(this.indent(-1))+this.emit("\n}")};f.prototype.host=function(d){return this.emit("@host",d.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(d.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};f.prototype["custom-media"]=function(d){return this.emit("@custom-media "+d.name+" "+d.media+";",d.position)};f.prototype.rule=function(d){var h=this.indent(),n=d.declarations;return n.length?this.emit(d.selectors.map(function(b){return h+b}).join(",\n"),d.position)+this.emit(" {\n")+this.emit(this.indent(1))+
this.mapVisit(n,"\n")+this.emit(this.indent(-1))+this.emit("\n"+this.indent()+"}"):""};f.prototype.declaration=function(d){return this.emit(this.indent())+this.emit(d.property+": "+d.value,d.position)+this.emit(";")};f.prototype.indent=function(d){(this||cw).level=(this||cw).level||1;return null!=d?((this||cw).level+=d,""):Array((this||cw).level).join((this||cw).indentation||"  ")};return qN}function Naa(){if(p_)return fH;p_=!0;var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");
fH.encode=function(c){if(0<=c&&c<f.length)return f[c];throw new TypeError("Must be between 0 and 63: "+c);};fH.decode=function(c){return 65<=c&&90>=c?c-65:97<=c&&122>=c?c-97+26:48<=c&&57>=c?c-48+52:43==c?62:47==c?63:-1};return fH}function q_(){if(r_)return gH;r_=!0;var f=Naa();gH.encode=function(c){var k="",d=0>c?(-c<<1)+1:c<<1;do c=d&31,d>>>=5,0<d&&(c|=32),k+=f.encode(c);while(0<d);return k};gH.decode=function(c,k,d){var h=c.length,n=0,b=0;do{if(k>=h)throw Error("Expected more digits in base 64 VLQ value.");
var e=f.decode(c.charCodeAt(k++));if(-1===e)throw Error("Invalid base64 digit: "+c.charAt(k-1));var m=!!(e&32);e&=31;n+=e<<b;b+=5}while(m);c=n>>1;d.value=1===(n&1)?-c:c;d.rest=k};return gH}function MC(){function f(q){return(q=q.match(a))?{scheme:q[1],auth:q[2],host:q[3],port:q[4],path:q[5]}:null}function c(q){var r="";q.scheme&&(r+=q.scheme+":");r+="//";q.auth&&(r+=q.auth+"@");q.host&&(r+=q.host);q.port&&(r+=":"+q.port);q.path&&(r+=q.path);return r}function k(q){var r=q,u=f(q);if(u){if(!u.path)return q;
r=u.path}q=vm.isAbsolute(r);r=r.split(/\/+/);for(var v,y=0,z=r.length-1;0<=z;z--)v=r[z],"."===v?r.splice(z,1):".."===v?y++:0<y&&(""===v?(r.splice(z+1,y),y=0):(r.splice(z,2),y--));r=r.join("/");""===r&&(r=q?"/":".");return u?(u.path=r,c(u)):r}function d(q,r){""===q&&(q=".");""===r&&(r=".");var u=f(r),v=f(q);v&&(q=v.path||"/");if(u&&!u.scheme)return v&&(u.scheme=v.scheme),c(u);if(u||r.match(g))return r;if(v&&!v.host&&!v.path)return v.host=r,c(v);q="/"===r.charAt(0)?r:k(q.replace(/\/+$/,"")+"/"+r);return v?
(v.path=q,c(v)):q}function h(q){return q}function n(q){return e(q)?"$"+q:q}function b(q){return e(q)?q.slice(1):q}function e(q){if(!q)return!1;var r=q.length;if(9>r||95!==q.charCodeAt(r-1)||95!==q.charCodeAt(r-2)||111!==q.charCodeAt(r-3)||116!==q.charCodeAt(r-4)||111!==q.charCodeAt(r-5)||114!==q.charCodeAt(r-6)||112!==q.charCodeAt(r-7)||95!==q.charCodeAt(r-8)||95!==q.charCodeAt(r-9))return!1;for(r-=10;0<=r;r--)if(36!==q.charCodeAt(r))return!1;return!0}function m(q,r){return q===r?0:null===q?1:null===
r?-1:q>r?1:-1}if(s_)return vm;s_=!0;vm.getArg=function(q,r,u){if(r in q)return q[r];if(3===arguments.length)return u;throw Error('"'+r+'" is a required argument.');};var a=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,g=/^data:.+,.+$/;vm.urlParse=f;vm.urlGenerate=c;vm.normalize=k;vm.join=d;vm.isAbsolute=function(q){return"/"===q.charAt(0)||a.test(q)};vm.relative=function(q,r){""===q&&(q=".");q=q.replace(/\/$/,"");for(var u=0;0!==r.indexOf(q+"/");){var v=q.lastIndexOf("/");if(0>
v)return r;q=q.slice(0,v);if(q.match(/^([^\/]+:\/)?\/*$/))return r;++u}return Array(u+1).join("../")+r.substr(q.length+1)};var l=!("__proto__"in Object.create(null));vm.toSetString=l?h:n;vm.fromSetString=l?h:b;vm.compareByOriginalPositions=function(q,r,u){var v=m(q.source,r.source);if(0!==v)return v;v=q.originalLine-r.originalLine;if(0!==v)return v;v=q.originalColumn-r.originalColumn;if(0!==v||u)return v;v=q.generatedColumn-r.generatedColumn;if(0!==v)return v;v=q.generatedLine-r.generatedLine;return 0!==
v?v:m(q.name,r.name)};vm.compareByGeneratedPositionsDeflated=function(q,r,u){var v=q.generatedLine-r.generatedLine;if(0!==v)return v;v=q.generatedColumn-r.generatedColumn;if(0!==v||u)return v;v=m(q.source,r.source);if(0!==v)return v;v=q.originalLine-r.originalLine;if(0!==v)return v;v=q.originalColumn-r.originalColumn;return 0!==v?v:m(q.name,r.name)};vm.compareByGeneratedPositionsInflated=function(q,r){var u=q.generatedLine-r.generatedLine;if(0!==u)return u;u=q.generatedColumn-r.generatedColumn;if(0!==
u)return u;u=m(q.source,r.source);if(0!==u)return u;u=q.originalLine-r.originalLine;if(0!==u)return u;u=q.originalColumn-r.originalColumn;return 0!==u?u:m(q.name,r.name)};vm.parseSourceMapInput=function(q){return JSON.parse(q.replace(/^\)]}'[^\n]*\n/,""))};vm.computeSourceURL=function(q,r,u){r=r||"";q&&("/"!==q[q.length-1]&&"/"!==r[0]&&(q+="/"),r=q+r);if(u){q=f(u);if(!q)throw Error("sourceMapURL could not be parsed");q.path&&(u=q.path.lastIndexOf("/"),0<=u&&(q.path=q.path.substring(0,u+1)));r=d(c(q),
r)}return k(r)};return vm}function t_(){function f(){(this||wm)._array=[];(this||wm)._set=d?new Map:Object.create(null)}if(u_)return rN;u_=!0;var c=MC(),k=Object.prototype.hasOwnProperty,d="undefined"!==typeof Map;f.fromArray=function(h,n){for(var b=new f,e=0,m=h.length;e<m;e++)b.add(h[e],n);return b};f.prototype.size=function(){return d?(this||wm)._set.size:Object.getOwnPropertyNames((this||wm)._set).length};f.prototype.add=function(h,n){var b=d?h:c.toSetString(h),e=d?this.has(h):k.call((this||wm)._set,
b),m=(this||wm)._array.length;e&&!n||(this||wm)._array.push(h);e||(d?(this||wm)._set.set(h,m):(this||wm)._set[b]=m)};f.prototype.has=function(h){if(d)return(this||wm)._set.has(h);h=c.toSetString(h);return k.call((this||wm)._set,h)};f.prototype.indexOf=function(h){if(d){var n=(this||wm)._set.get(h);if(0<=n)return n}else if(n=c.toSetString(h),k.call((this||wm)._set,n))return(this||wm)._set[n];throw Error('"'+h+'" is not in the set.');};f.prototype.at=function(h){if(0<=h&&h<(this||wm)._array.length)return(this||
wm)._array[h];throw Error("No element indexed by "+h);};f.prototype.toArray=function(){return(this||wm)._array.slice()};rN.ArraySet=f;return rN}function Oaa(){function f(){(this||Up)._array=[];(this||Up)._sorted=!0;(this||Up)._last={generatedLine:-1,generatedColumn:0}}if(v_)return sN;v_=!0;var c=MC();f.prototype.unsortedForEach=function(k,d){(this||Up)._array.forEach(k,d)};f.prototype.add=function(k){var d=(this||Up)._last,h=d.generatedLine,n=k.generatedLine,b=d.generatedColumn,e=k.generatedColumn;
n>h||n==h&&e>=b||0>=c.compareByGeneratedPositionsInflated(d,k)?(this||Up)._last=k:(this||Up)._sorted=!1;(this||Up)._array.push(k)};f.prototype.toArray=function(){(this||Up)._sorted||((this||Up)._array.sort(c.compareByGeneratedPositionsInflated),(this||Up)._sorted=!0);return(this||Up)._array};sN.MappingList=f;return sN}function w_(){function f(n){n||(n={});(this||Ah)._file=k.getArg(n,"file",null);(this||Ah)._sourceRoot=k.getArg(n,"sourceRoot",null);(this||Ah)._skipValidation=k.getArg(n,"skipValidation",
!1);(this||Ah)._sources=new d;(this||Ah)._names=new d;(this||Ah)._mappings=new h;(this||Ah)._sourcesContents=null}if(x_)return tN;x_=!0;var c=q_(),k=MC(),d=t_().ArraySet,h=Oaa().MappingList;f.prototype._version=3;f.fromSourceMap=function(n){var b=n.sourceRoot,e=new f({file:n.file,sourceRoot:b});n.eachMapping(function(m){var a={generated:{line:m.generatedLine,column:m.generatedColumn}};null!=m.source&&(a.source=m.source,null!=b&&(a.source=k.relative(b,a.source)),a.original={line:m.originalLine,column:m.originalColumn},
null!=m.name&&(a.name=m.name));e.addMapping(a)});n.sources.forEach(function(m){var a=m;null!==b&&(a=k.relative(b,m));e._sources.has(a)||e._sources.add(a);a=n.sourceContentFor(m);null!=a&&e.setSourceContent(m,a)});return e};f.prototype.addMapping=function(n){var b=k.getArg(n,"generated"),e=k.getArg(n,"original",null),m=k.getArg(n,"source",null);n=k.getArg(n,"name",null);(this||Ah)._skipValidation||this._validateMapping(b,e,m,n);null!=m&&(m=String(m),(this||Ah)._sources.has(m)||(this||Ah)._sources.add(m));
null!=n&&(n=String(n),(this||Ah)._names.has(n)||(this||Ah)._names.add(n));(this||Ah)._mappings.add({generatedLine:b.line,generatedColumn:b.column,originalLine:null!=e&&e.line,originalColumn:null!=e&&e.column,source:m,name:n})};f.prototype.setSourceContent=function(n,b){null!=(this||Ah)._sourceRoot&&(n=k.relative((this||Ah)._sourceRoot,n));null!=b?((this||Ah)._sourcesContents||((this||Ah)._sourcesContents=Object.create(null)),(this||Ah)._sourcesContents[k.toSetString(n)]=b):(this||Ah)._sourcesContents&&
(delete (this||Ah)._sourcesContents[k.toSetString(n)],0===Object.keys((this||Ah)._sourcesContents).length&&((this||Ah)._sourcesContents=null))};f.prototype.applySourceMap=function(n,b,e){var m=b;if(null==b){if(null==n.file)throw Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');m=n.file}var a=(this||Ah)._sourceRoot;null!=a&&(m=k.relative(a,m));var g=new d,l=new d;(this||Ah)._mappings.unsortedForEach(function(q){if(q.source===
m&&null!=q.originalLine){var r=n.originalPositionFor({line:q.originalLine,column:q.originalColumn});null!=r.source&&(q.source=r.source,null!=e&&(q.source=k.join(e,q.source)),null!=a&&(q.source=k.relative(a,q.source)),q.originalLine=r.line,q.originalColumn=r.column,null!=r.name&&(q.name=r.name))}r=q.source;null==r||g.has(r)||g.add(r);q=q.name;null==q||l.has(q)||l.add(q)},this||Ah);(this||Ah)._sources=g;(this||Ah)._names=l;n.sources.forEach(function(q){var r=n.sourceContentFor(q);null!=r&&(null!=e&&
(q=k.join(e,q)),null!=a&&(q=k.relative(a,q)),this.setSourceContent(q,r))},this||Ah)};f.prototype._validateMapping=function(n,b,e,m){if(b&&"number"!==typeof b.line&&"number"!==typeof b.column)throw Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(n&&"line"in n&&"column"in n&&0<n.line&&0<=n.column&&!b&&
!e&&!m||n&&"line"in n&&"column"in n&&b&&"line"in b&&"column"in b&&0<n.line&&0<=n.column&&0<b.line&&0<=b.column&&e))throw Error("Invalid mapping: "+JSON.stringify({generated:n,source:e,original:b,name:m}));};f.prototype._serializeMappings=function(){for(var n=0,b=1,e=0,m=0,a=0,g=0,l="",q,r,u,v=(this||Ah)._mappings.toArray(),y=0,z=v.length;y<z;y++){r=v[y];q="";if(r.generatedLine!==b)for(n=0;r.generatedLine!==b;)q+=";",b++;else if(0<y){if(!k.compareByGeneratedPositionsInflated(r,v[y-1]))continue;q+=
","}q+=c.encode(r.generatedColumn-n);n=r.generatedColumn;null!=r.source&&(u=(this||Ah)._sources.indexOf(r.source),q+=c.encode(u-g),g=u,q+=c.encode(r.originalLine-1-m),m=r.originalLine-1,q+=c.encode(r.originalColumn-e),e=r.originalColumn,null!=r.name&&(r=(this||Ah)._names.indexOf(r.name),q+=c.encode(r-a),a=r));l+=q}return l};f.prototype._generateSourcesContent=function(n,b){return n.map(function(e){if(!(this||Ah)._sourcesContents)return null;null!=b&&(e=k.relative(b,e));e=k.toSetString(e);return Object.prototype.hasOwnProperty.call((this||
Ah)._sourcesContents,e)?(this||Ah)._sourcesContents[e]:null},this||Ah)};f.prototype.toJSON=function(){var n={version:(this||Ah)._version,sources:(this||Ah)._sources.toArray(),names:(this||Ah)._names.toArray(),mappings:this._serializeMappings()};null!=(this||Ah)._file&&(n.file=(this||Ah)._file);null!=(this||Ah)._sourceRoot&&(n.sourceRoot=(this||Ah)._sourceRoot);(this||Ah)._sourcesContents&&(n.sourcesContent=this._generateSourcesContent(n.sources,n.sourceRoot));return n};f.prototype.toString=function(){return JSON.stringify(this.toJSON())};
tN.SourceMapGenerator=f;return tN}function Paa(){function f(c,k,d,h,n,b){var e=Math.floor((k-c)/2)+c,m=n(d,h[e],!0);return 0===m?e:0<m?1<k-e?f(e,k,d,h,n,b):b==dw.LEAST_UPPER_BOUND?k<h.length?k:-1:e:1<e-c?f(c,e,d,h,n,b):b==dw.LEAST_UPPER_BOUND?e:0>c?-1:c}if(y_)return dw;y_=!0;dw.GREATEST_LOWER_BOUND=1;dw.LEAST_UPPER_BOUND=2;dw.search=function(c,k,d,h){if(0===k.length)return-1;c=f(-1,k.length,c,k,d,h||dw.GREATEST_LOWER_BOUND);if(0>c)return-1;for(;0<=c-1&&0===d(k[c],k[c-1],!0);)--c;return c};return dw}
function Qaa(){function f(k,d,h){var n=k[d];k[d]=k[h];k[h]=n}function c(k,d,h,n){if(h<n){var b=h-1;f(k,Math.round(h+Math.random()*(n-h)),n);for(var e=k[n],m=h;m<n;m++)0>=d(k[m],e)&&(b+=1,f(k,b,m));f(k,b+1,m);b+=1;c(k,d,h,b-1);c(k,d,b+1,n)}}if(z_)return uN;z_=!0;uN.quickSort=function(k,d){c(k,d,0,k.length-1)};return uN}function Raa(){function f(a,g){var l=a;"string"===typeof a&&(l=h.parseSourceMapInput(a));return null!=l.sections?new d(l,g):new c(l,g)}function c(a,g){var l=a;"string"===typeof a&&(l=
h.parseSourceMapInput(a));a=h.getArg(l,"version");var q=h.getArg(l,"sources"),r=h.getArg(l,"names",[]),u=h.getArg(l,"sourceRoot",null),v=h.getArg(l,"sourcesContent",null),y=h.getArg(l,"mappings");l=h.getArg(l,"file",null);if(a!=(this||De)._version)throw Error("Unsupported version: "+a);u&&(u=h.normalize(u));q=q.map(String).map(h.normalize).map(function(z){return u&&h.isAbsolute(u)&&h.isAbsolute(z)?h.relative(u,z):z});(this||De)._names=b.fromArray(r.map(String),!0);(this||De)._sources=b.fromArray(q,
!0);(this||De)._absoluteSources=(this||De)._sources.toArray().map(function(z){return h.computeSourceURL(u,z,g)});(this||De).sourceRoot=u;(this||De).sourcesContent=v;(this||De)._mappings=y;(this||De)._sourceMapURL=g;(this||De).file=l}function k(){(this||De).generatedLine=0;(this||De).generatedColumn=0;(this||De).source=null;(this||De).originalLine=null;(this||De).originalColumn=null;(this||De).name=null}function d(a,g){var l=a;"string"===typeof a&&(l=h.parseSourceMapInput(a));a=h.getArg(l,"version");
l=h.getArg(l,"sections");if(a!=(this||De)._version)throw Error("Unsupported version: "+a);(this||De)._sources=new b;(this||De)._names=new b;var q={line:-1,column:0};(this||De)._sections=l.map(function(r){if(r.url)throw Error("Support for url field in sections not implemented.");var u=h.getArg(r,"offset"),v=h.getArg(u,"line"),y=h.getArg(u,"column");if(v<q.line||v===q.line&&y<q.column)throw Error("Section offsets must be ordered and non-overlapping.");q=u;return{generatedOffset:{generatedLine:v+1,generatedColumn:y+
1},consumer:new f(h.getArg(r,"map"),g)}})}if(A_)return NC;A_=!0;var h=MC(),n=Paa(),b=t_().ArraySet,e=q_(),m=Qaa().quickSort;f.fromSourceMap=function(a,g){return c.fromSourceMap(a,g)};f.prototype._version=3;f.prototype.__generatedMappings=null;Object.defineProperty(f.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){(this||De).__generatedMappings||this._parseMappings((this||De)._mappings,(this||De).sourceRoot);return(this||De).__generatedMappings}});f.prototype.__originalMappings=
null;Object.defineProperty(f.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){(this||De).__originalMappings||this._parseMappings((this||De)._mappings,(this||De).sourceRoot);return(this||De).__originalMappings}});f.prototype._charIsMappingSeparator=function(a,g){a=a.charAt(g);return";"===a||","===a};f.prototype._parseMappings=function(a,g){throw Error("Subclasses must implement _parseMappings");};f.GENERATED_ORDER=1;f.ORIGINAL_ORDER=2;f.GREATEST_LOWER_BOUND=1;f.LEAST_UPPER_BOUND=
2;f.prototype.eachMapping=function(a,g,l){g=g||null;switch(l||f.GENERATED_ORDER){case f.GENERATED_ORDER:l=(this||De)._generatedMappings;break;case f.ORIGINAL_ORDER:l=(this||De)._originalMappings;break;default:throw Error("Unknown order of iteration.");}var q=(this||De).sourceRoot;l.map(function(r){var u=null===r.source?null:(this||De)._sources.at(r.source);u=h.computeSourceURL(q,u,(this||De)._sourceMapURL);return{source:u,generatedLine:r.generatedLine,generatedColumn:r.generatedColumn,originalLine:r.originalLine,
originalColumn:r.originalColumn,name:null===r.name?null:(this||De)._names.at(r.name)}},this||De).forEach(a,g)};f.prototype.allGeneratedPositionsFor=function(a){var g=h.getArg(a,"line"),l={source:h.getArg(a,"source"),originalLine:g,originalColumn:h.getArg(a,"column",0)};l.source=this._findSourceIndex(l.source);if(0>l.source)return[];var q=[];l=this._findMapping(l,(this||De)._originalMappings,"originalLine","originalColumn",h.compareByOriginalPositions,n.LEAST_UPPER_BOUND);if(0<=l){var r=(this||De)._originalMappings[l];
if(void 0===a.column)for(g=r.originalLine;r&&r.originalLine===g;)q.push({line:h.getArg(r,"generatedLine",null),column:h.getArg(r,"generatedColumn",null),lastColumn:h.getArg(r,"lastGeneratedColumn",null)}),r=(this||De)._originalMappings[++l];else for(a=r.originalColumn;r&&r.originalLine===g&&r.originalColumn==a;)q.push({line:h.getArg(r,"generatedLine",null),column:h.getArg(r,"generatedColumn",null),lastColumn:h.getArg(r,"lastGeneratedColumn",null)}),r=(this||De)._originalMappings[++l]}return q};NC.SourceMapConsumer=
f;c.prototype=Object.create(f.prototype);c.prototype.consumer=f;c.prototype._findSourceIndex=function(a){var g=a;null!=(this||De).sourceRoot&&(g=h.relative((this||De).sourceRoot,g));if((this||De)._sources.has(g))return(this||De)._sources.indexOf(g);for(g=0;g<(this||De)._absoluteSources.length;++g)if((this||De)._absoluteSources[g]==a)return g;return-1};c.fromSourceMap=function(a,g){var l=Object.create(c.prototype),q=l._names=b.fromArray(a._names.toArray(),!0),r=l._sources=b.fromArray(a._sources.toArray(),
!0);l.sourceRoot=a._sourceRoot;l.sourcesContent=a._generateSourcesContent(l._sources.toArray(),l.sourceRoot);l.file=a._file;l._sourceMapURL=g;l._absoluteSources=l._sources.toArray().map(function(G){return h.computeSourceURL(l.sourceRoot,G,g)});a=a._mappings.toArray().slice();for(var u=l.__generatedMappings=[],v=l.__originalMappings=[],y=0,z=a.length;y<z;y++){var A=a[y],B=new k;B.generatedLine=A.generatedLine;B.generatedColumn=A.generatedColumn;A.source&&(B.source=r.indexOf(A.source),B.originalLine=
A.originalLine,B.originalColumn=A.originalColumn,A.name&&(B.name=q.indexOf(A.name)),v.push(B));u.push(B)}m(l.__originalMappings,h.compareByOriginalPositions);return l};c.prototype._version=3;Object.defineProperty(c.prototype,"sources",{get:function(){return(this||De)._absoluteSources.slice()}});c.prototype._parseMappings=function(a,g){g=1;for(var l=0,q=0,r=0,u=0,v=0,y=a.length,z=0,A={},B={},G=[],E=[],K,J,P,ea,ra;z<y;)if(";"===a.charAt(z))g++,z++,l=0;else if(","===a.charAt(z))z++;else{K=new k;K.generatedLine=
g;for(ea=z;ea<y&&!this._charIsMappingSeparator(a,ea);ea++);J=a.slice(z,ea);if(P=A[J])z+=J.length;else{for(P=[];z<ea;)e.decode(a,z,B),ra=B.value,z=B.rest,P.push(ra);if(2===P.length)throw Error("Found a source, but no line and column");if(3===P.length)throw Error("Found a source and line, but no column");A[J]=P}K.generatedColumn=l+P[0];l=K.generatedColumn;1<P.length&&(K.source=u+P[1],u+=P[1],K.originalLine=q+P[2],q=K.originalLine,K.originalLine+=1,K.originalColumn=r+P[3],r=K.originalColumn,4<P.length&&
(K.name=v+P[4],v+=P[4]));E.push(K);"number"===typeof K.originalLine&&G.push(K)}m(E,h.compareByGeneratedPositionsDeflated);(this||De).__generatedMappings=E;m(G,h.compareByOriginalPositions);(this||De).__originalMappings=G};c.prototype._findMapping=function(a,g,l,q,r,u){if(0>=a[l])throw new TypeError("Line must be greater than or equal to 1, got "+a[l]);if(0>a[q])throw new TypeError("Column must be greater than or equal to 0, got "+a[q]);return n.search(a,g,r,u)};c.prototype.computeColumnSpans=function(){for(var a=
0;a<(this||De)._generatedMappings.length;++a){var g=(this||De)._generatedMappings[a];if(a+1<(this||De)._generatedMappings.length){var l=(this||De)._generatedMappings[a+1];if(g.generatedLine===l.generatedLine){g.lastGeneratedColumn=l.generatedColumn-1;continue}}g.lastGeneratedColumn=Infinity}};c.prototype.originalPositionFor=function(a){var g={generatedLine:h.getArg(a,"line"),generatedColumn:h.getArg(a,"column")};a=this._findMapping(g,(this||De)._generatedMappings,"generatedLine","generatedColumn",
h.compareByGeneratedPositionsDeflated,h.getArg(a,"bias",f.GREATEST_LOWER_BOUND));if(0<=a&&(a=(this||De)._generatedMappings[a],a.generatedLine===g.generatedLine)){g=h.getArg(a,"source",null);null!==g&&(g=(this||De)._sources.at(g),g=h.computeSourceURL((this||De).sourceRoot,g,(this||De)._sourceMapURL));var l=h.getArg(a,"name",null);null!==l&&(l=(this||De)._names.at(l));return{source:g,line:h.getArg(a,"originalLine",null),column:h.getArg(a,"originalColumn",null),name:l}}return{source:null,line:null,column:null,
name:null}};c.prototype.hasContentsOfAllSources=function(){return(this||De).sourcesContent?(this||De).sourcesContent.length>=(this||De)._sources.size()&&!(this||De).sourcesContent.some(function(a){return null==a}):!1};c.prototype.sourceContentFor=function(a,g){if(!(this||De).sourcesContent)return null;var l=this._findSourceIndex(a);if(0<=l)return(this||De).sourcesContent[l];null!=(this||De).sourceRoot&&(a=h.relative((this||De).sourceRoot,a));var q;if(null!=(this||De).sourceRoot&&(q=h.urlParse((this||
De).sourceRoot))){l=a.replace(/^file:\/\//,"");if("file"==q.scheme&&(this||De)._sources.has(l))return(this||De).sourcesContent[(this||De)._sources.indexOf(l)];if((!q.path||"/"==q.path)&&(this||De)._sources.has("/"+a))return(this||De).sourcesContent[(this||De)._sources.indexOf("/"+a)]}if(g)return null;throw Error('"'+a+'" is not in the SourceMap.');};c.prototype.generatedPositionFor=function(a){var g=h.getArg(a,"source");g=this._findSourceIndex(g);if(0>g)return{line:null,column:null,lastColumn:null};
g={source:g,originalLine:h.getArg(a,"line"),originalColumn:h.getArg(a,"column")};a=this._findMapping(g,(this||De)._originalMappings,"originalLine","originalColumn",h.compareByOriginalPositions,h.getArg(a,"bias",f.GREATEST_LOWER_BOUND));return 0<=a&&(a=(this||De)._originalMappings[a],a.source===g.source)?{line:h.getArg(a,"generatedLine",null),column:h.getArg(a,"generatedColumn",null),lastColumn:h.getArg(a,"lastGeneratedColumn",null)}:{line:null,column:null,lastColumn:null}};NC.BasicSourceMapConsumer=
c;d.prototype=Object.create(f.prototype);d.prototype.constructor=f;d.prototype._version=3;Object.defineProperty(d.prototype,"sources",{get:function(){for(var a=[],g=0;g<(this||De)._sections.length;g++)for(var l=0;l<(this||De)._sections[g].consumer.sources.length;l++)a.push((this||De)._sections[g].consumer.sources[l]);return a}});d.prototype.originalPositionFor=function(a){var g={generatedLine:h.getArg(a,"line"),generatedColumn:h.getArg(a,"column")},l=n.search(g,(this||De)._sections,function(q,r){var u=
q.generatedLine-r.generatedOffset.generatedLine;return u?u:q.generatedColumn-r.generatedOffset.generatedColumn});return(l=(this||De)._sections[l])?l.consumer.originalPositionFor({line:g.generatedLine-(l.generatedOffset.generatedLine-1),column:g.generatedColumn-(l.generatedOffset.generatedLine===g.generatedLine?l.generatedOffset.generatedColumn-1:0),bias:a.bias}):{source:null,line:null,column:null,name:null}};d.prototype.hasContentsOfAllSources=function(){return(this||De)._sections.every(function(a){return a.consumer.hasContentsOfAllSources()})};
d.prototype.sourceContentFor=function(a,g){for(var l=0;l<(this||De)._sections.length;l++){var q=(this||De)._sections[l].consumer.sourceContentFor(a,!0);if(q)return q}if(g)return null;throw Error('"'+a+'" is not in the SourceMap.');};d.prototype.generatedPositionFor=function(a){for(var g=0;g<(this||De)._sections.length;g++){var l=(this||De)._sections[g];if(-1!==l.consumer._findSourceIndex(h.getArg(a,"source"))){var q=l.consumer.generatedPositionFor(a);if(q)return{line:q.line+(l.generatedOffset.generatedLine-
1),column:q.column+(l.generatedOffset.generatedLine===q.line?l.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}};d.prototype._parseMappings=function(a,g){(this||De).__generatedMappings=[];(this||De).__originalMappings=[];for(a=0;a<(this||De)._sections.length;a++){g=(this||De)._sections[a];for(var l=g.consumer._generatedMappings,q=0;q<l.length;q++){var r=l[q],u=g.consumer._sources.at(r.source);u=h.computeSourceURL(g.consumer.sourceRoot,u,(this||De)._sourceMapURL);(this||De)._sources.add(u);
u=(this||De)._sources.indexOf(u);var v=null;r.name&&(v=g.consumer._names.at(r.name),(this||De)._names.add(v),v=(this||De)._names.indexOf(v));r={source:u,generatedLine:r.generatedLine+(g.generatedOffset.generatedLine-1),generatedColumn:r.generatedColumn+(g.generatedOffset.generatedLine===r.generatedLine?g.generatedOffset.generatedColumn-1:0),originalLine:r.originalLine,originalColumn:r.originalColumn,name:v};(this||De).__generatedMappings.push(r);"number"===typeof r.originalLine&&(this||De).__originalMappings.push(r)}}m((this||
De).__generatedMappings,h.compareByGeneratedPositionsDeflated);m((this||De).__originalMappings,h.compareByOriginalPositions)};NC.IndexedSourceMapConsumer=d;return NC}function Saa(){function f(h,n,b,e,m){(this||ni).children=[];(this||ni).sourceContents={};(this||ni).line=null==h?null:h;(this||ni).column=null==n?null:n;(this||ni).source=null==b?null:b;(this||ni).name=null==m?null:m;(this||ni).$$$isSourceNode$$$=!0;null!=e&&this.add(e)}if(B_)return vN;B_=!0;var c=w_().SourceMapGenerator,k=MC(),d=/(\r?\n)/;
f.fromStringWithSourceMap=function(h,n,b){function e(v,y){if(null===v||void 0===v.source)m.add(y);else{var z=b?k.join(b,v.source):v.source;m.add(new f(v.originalLine,v.originalColumn,z,y,v.name))}}var m=new f,a=h.split(d),g=0,l=function(){var v=g<a.length?a[g++]:void 0,y=(g<a.length?a[g++]:void 0)||"";return v+y},q=1,r=0,u=null;n.eachMapping(function(v){if(null!==u)if(q<v.generatedLine)e(u,l()),q++,r=0;else{var y=a[g]||"",z=y.substr(0,v.generatedColumn-r);a[g]=y.substr(v.generatedColumn-r);r=v.generatedColumn;
e(u,z);u=v;return}for(;q<v.generatedLine;)m.add(l()),q++;r<v.generatedColumn&&(y=a[g]||"",m.add(y.substr(0,v.generatedColumn)),a[g]=y.substr(v.generatedColumn),r=v.generatedColumn);u=v},this||ni);g<a.length&&(u&&e(u,l()),m.add(a.splice(g).join("")));n.sources.forEach(function(v){var y=n.sourceContentFor(v);null!=y&&(null!=b&&(v=k.join(b,v)),m.setSourceContent(v,y))});return m};f.prototype.add=function(h){if(Array.isArray(h))h.forEach(function(n){this.add(n)},this||ni);else if(h.$$$isSourceNode$$$||
"string"===typeof h)h&&(this||ni).children.push(h);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+h);return this||ni};f.prototype.prepend=function(h){if(Array.isArray(h))for(var n=h.length-1;0<=n;n--)this.prepend(h[n]);else if(h.$$$isSourceNode$$$||"string"===typeof h)(this||ni).children.unshift(h);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+h);return this||ni};f.prototype.walk=function(h){for(var n,
b=0,e=(this||ni).children.length;b<e;b++)n=(this||ni).children[b],n.$$$isSourceNode$$$?n.walk(h):""!==n&&h(n,{source:(this||ni).source,line:(this||ni).line,column:(this||ni).column,name:(this||ni).name})};f.prototype.join=function(h){var n,b=(this||ni).children.length;if(0<b){var e=[];for(n=0;n<b-1;n++)e.push((this||ni).children[n]),e.push(h);e.push((this||ni).children[n]);(this||ni).children=e}return this||ni};f.prototype.replaceRight=function(h,n){var b=(this||ni).children[(this||ni).children.length-
1];b.$$$isSourceNode$$$?b.replaceRight(h,n):"string"===typeof b?(this||ni).children[(this||ni).children.length-1]=b.replace(h,n):(this||ni).children.push("".replace(h,n));return this||ni};f.prototype.setSourceContent=function(h,n){(this||ni).sourceContents[k.toSetString(h)]=n};f.prototype.walkSourceContents=function(h){for(var n=0,b=(this||ni).children.length;n<b;n++)(this||ni).children[n].$$$isSourceNode$$$&&(this||ni).children[n].walkSourceContents(h);var e=Object.keys((this||ni).sourceContents);
n=0;for(b=e.length;n<b;n++)h(k.fromSetString(e[n]),(this||ni).sourceContents[e[n]])};f.prototype.toString=function(){var h="";this.walk(function(n){h+=n});return h};f.prototype.toStringWithSourceMap=function(h){var n="",b=1,e=0,m=new c(h),a=!1,g=null,l=null,q=null,r=null;this.walk(function(u,v){n+=u;null!==v.source&&null!==v.line&&null!==v.column?(g===v.source&&l===v.line&&q===v.column&&r===v.name||m.addMapping({source:v.source,original:{line:v.line,column:v.column},generated:{line:b,column:e},name:v.name}),
g=v.source,l=v.line,q=v.column,r=v.name,a=!0):a&&(m.addMapping({generated:{line:b,column:e}}),g=null,a=!1);for(var y=0,z=u.length;y<z;y++)10===u.charCodeAt(y)?(b++,e=0,y+1===z?(g=null,a=!1):a&&m.addMapping({source:v.source,original:{line:v.line,column:v.column},generated:{line:b,column:e},name:v.name})):e++});this.walkSourceContents(function(u,v){m.setSourceContent(u,v)});return{code:n,map:m}};vN.SourceNode=f;return vN}function C_(){if(D_)return OC;D_=!0;OC.SourceMapGenerator=w_().SourceMapGenerator;
OC.SourceMapConsumer=Raa().SourceMapConsumer;OC.SourceNode=Saa().SourceNode;return OC}function E_(f){var c=f.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");f=f.indexOf("=");return-1===f&&(f=c),[f,f===c?0:4-f%4]}function Taa(f,c,k){for(var d,h=[],n=c;n<k;n+=3)c=(f[n]<<16&16711680)+(f[n+1]<<8&65280)+(255&f[n+2]),h.push(Is[(d=c)>>18&63]+Is[d>>12&63]+Is[d>>6&63]+Is[63&d]);return h.join("")}function xu(f){if(2147483647<f)throw new RangeError('The value "'+f+'" is invalid for option "size"');
f=new Uint8Array(f);return Object.setPrototypeOf(f,ve.prototype),f}function ve(f,c,k){if("number"==typeof f){if("string"==typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return wN(f)}return F_(f,c,k)}function F_(f,c,k){if("string"==typeof f)return function(h,n){"string"==typeof n&&""!==n||(n="utf8");if(!ve.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var b=0|G_(h,n),e=xu(b);h=e.write(h,n);h!==b&&(e=e.slice(0,h));return e}(f,c);if(ArrayBuffer.isView(f))return xN(f);
if(null==f)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(yu(f,ArrayBuffer)||f&&yu(f.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(yu(f,SharedArrayBuffer)||f&&yu(f.buffer,SharedArrayBuffer)))return Uaa(f,c,k);if("number"==typeof f)throw new TypeError('The "value" argument must not be of type number. Received type number');var d=f.valueOf&&f.valueOf();if(null!=d&&d!==f)return ve.from(d,
c,k);if(d=function(h){if(ve.isBuffer(h)){var n=0|yN(h.length),b=xu(n);return 0===b.length||h.copy(b,0,0,n),b}if(void 0!==h.length)return(n="number"!=typeof h.length)||(n=h.length,n=n!=n),n?xu(0):xN(h);if("Buffer"===h.type&&Array.isArray(h.data))return xN(h.data)}(f))return d;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof f[Symbol.toPrimitive])return ve.from(f[Symbol.toPrimitive]("string"),c,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof f);}function H_(f){if("number"!=typeof f)throw new TypeError('"size" argument must be of type number');if(0>f)throw new RangeError('The value "'+f+'" is invalid for option "size"');}function wN(f){return H_(f),xu(0>f?0:0|yN(f))}function xN(f){for(var c=0>f.length?0:0|yN(f.length),k=xu(c),d=0;d<c;d+=1)k[d]=255&f[d];return k}function Uaa(f,c,k){if(0>c||f.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<c+(k||0))throw new RangeError('"length" is outside of buffer bounds');
var d;return d=void 0===c&&void 0===k?new Uint8Array(f):void 0===k?new Uint8Array(f,c):new Uint8Array(f,c,k),Object.setPrototypeOf(d,ve.prototype),d}function yN(f){if(2147483647<=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return 0|f}function G_(f,c){if(ve.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||yu(f,ArrayBuffer))return f.byteLength;if("string"!=typeof f)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+
typeof f);var k=f.length,d=2<arguments.length&&!0===arguments[2];if(!d&&0===k)return 0;for(var h=!1;;)switch(c){case "ascii":case "latin1":case "binary":return k;case "utf8":case "utf-8":return zN(f).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*k;case "hex":return k>>>1;case "base64":return I_(f).length;default:if(h)return d?-1:zN(f).length;c=(""+c).toLowerCase();h=!0}}function Vaa(f,c,k){var d=!1;if(((void 0===c||0>c)&&(c=0),c>this.length)||((void 0===k||k>this.length)&&
(k=this.length),0>=k)||(k>>>=0)<=(c>>>=0))return"";for(f||(f="utf8");;)switch(f){case "hex":f=this.length;(!c||0>c)&&(c=0);(!k||0>k||k>f)&&(k=f);for(f="";c<k;++c)f+=Waa[this[c]];return f;case "utf8":case "utf-8":return J_(this,c,k);case "ascii":f="";for(k=Math.min(this.length,k);c<k;++c)f+=String.fromCharCode(127&this[c]);return f;case "latin1":case "binary":f="";for(k=Math.min(this.length,k);c<k;++c)f+=String.fromCharCode(this[c]);return f;case "base64":return 0===c&&k===this.length?AN.fromByteArray(this):
AN.fromByteArray(this.slice(c,k));case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,k);k="";for(f=0;f<c.length;f+=2)k+=String.fromCharCode(c[f]+256*c[f+1]);return k;default:if(d)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase();d=!0}}function Xx(f,c,k){var d=f[c];f[c]=f[k];f[k]=d}function K_(f,c,k,d,h){if(0===f.length)return-1;"string"==typeof k?(d=k,k=0):2147483647<k?k=2147483647:-2147483648>k&&(k=-2147483648);var n=k=+k;if(n!=n&&(k=h?0:f.length-1),0>k&&(k=f.length+
k),k>=f.length){if(h)return-1;k=f.length-1}else if(0>k){if(!h)return-1;k=0}if("string"==typeof c&&(c=ve.from(c,d)),ve.isBuffer(c))return 0===c.length?-1:L_(f,c,k,d,h);if("number"==typeof c)return c&=255,"function"==typeof Uint8Array.prototype.indexOf?h?Uint8Array.prototype.indexOf.call(f,c,k):Uint8Array.prototype.lastIndexOf.call(f,c,k):L_(f,[c],k,d,h);throw new TypeError("val must be string, number or Buffer");}function L_(f,c,k,d,h){function n(a,g){return 1===b?a[g]:a.readUInt16BE(g*b)}var b=1,
e=f.length,m=c.length;if(void 0!==d&&("ucs2"===(d=String(d).toLowerCase())||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>f.length||2>c.length)return-1;b=2;e/=2;m/=2;k/=2}if(h)for(d=-1;k<e;k++)if(n(f,k)===n(c,-1===d?0:k-d)){if(-1===d&&(d=k),k-d+1===m)return d*b}else-1!==d&&(k-=k-d),d=-1;else for(k+m>e&&(k=e-m);0<=k;k--){e=!0;for(d=0;d<m;d++)if(n(f,k+d)!==n(c,d)){e=!1;break}if(e)return k}return-1}function M_(f,c,k,d){for(var h=[],n=0;n<c.length;++n)h.push(255&c.charCodeAt(n));return hH(h,f,k,d)}
function J_(f,c,k){k=Math.min(f.length,k);for(var d=[];c<k;){var h,n,b=f[c],e=null,m=239<b?4:223<b?3:191<b?2:1;if(c+m<=k)switch(m){case 1:128>b&&(e=b);break;case 2:128==(192&(h=f[c+1]))&&127<(n=(31&b)<<6|63&h)&&(e=n);break;case 3:h=f[c+1];var a=f[c+2];128==(192&h)&&128==(192&a)&&2047<(n=(15&b)<<12|(63&h)<<6|63&a)&&(55296>n||57343<n)&&(e=n);break;case 4:h=f[c+1];a=f[c+2];var g=f[c+3];128==(192&h)&&128==(192&a)&&128==(192&g)&&65535<(n=(15&b)<<18|(63&h)<<12|(63&a)<<6|63&g)&&1114112>n&&(e=n)}null===e?
(e=65533,m=1):65535<e&&(e-=65536,d.push(e>>>10&1023|55296),e=56320|1023&e);d.push(e);c+=m}f=d.length;if(4096>=f)d=String.fromCharCode.apply(String,d);else{k="";for(h=0;h<f;)k+=String.fromCharCode.apply(String,d.slice(h,h+=4096));d=k}return d}function dm(f,c,k){if(0!=f%1||0>f)throw new RangeError("offset is not uint");if(f+c>k)throw new RangeError("Trying to access beyond buffer length");}function Zn(f,c,k,d,h,n){if(!ve.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');
if(c>h||c<n)throw new RangeError('"value" argument is out of bounds');if(k+d>f.length)throw new RangeError("Index out of range");}function N_(f,c,k,d,h,n){if(k+d>f.length)throw new RangeError("Index out of range");if(0>k)throw new RangeError("Index out of range");}function O_(f,c,k,d,h){return c=+c,k>>>=0,h||N_(f,0,k,4),oA.write(f,c,k,d,23,4),k+4}function P_(f,c,k,d,h){return c=+c,k>>>=0,h||N_(f,0,k,8),oA.write(f,c,k,d,52,8),k+8}function zN(f,c){var k;c=c||1/0;for(var d=f.length,h=null,n=[],b=0;b<
d;++b){if(55295<(k=f.charCodeAt(b))&&57344>k){if(!h){if(56319<k){-1<(c-=3)&&n.push(239,191,189);continue}if(b+1===d){-1<(c-=3)&&n.push(239,191,189);continue}h=k;continue}if(56320>k){-1<(c-=3)&&n.push(239,191,189);h=k;continue}k=65536+(h-55296<<10|k-56320)}else h&&-1<(c-=3)&&n.push(239,191,189);if(h=null,128>k){if(0>--c)break;n.push(k)}else if(2048>k){if(0>(c-=2))break;n.push(k>>6|192,63&k|128)}else if(65536>k){if(0>(c-=3))break;n.push(k>>12|224,k>>6&63|128,63&k|128)}else{if(!(1114112>k))throw Error("Invalid code point");
if(0>(c-=4))break;n.push(k>>18|240,k>>12&63|128,k>>6&63|128,63&k|128)}}return n}function I_(f){return AN.toByteArray(function(c){if(2>(c=(c=c.split("=")[0]).trim().replace(Xaa,"")).length)return"";for(;0!=c.length%4;)c+="=";return c}(f))}function hH(f,c,k,d){for(var h=0;h<d&&!(h+k>=c.length||h>=f.length);++h)c[h+k]=f[h];return h}function yu(f,c){return f instanceof c||null!=f&&null!=f.constructor&&null!=f.constructor.name&&f.constructor.name===c.name}function Yaa(){if(Q_)return iH.exports;Q_=!0;var f=
pA.Buffer;(function(c){var k=function(d){return"function"===typeof d?d:"function"===typeof f?function(h){return(new f(h,"base64")).toString("binary")}:"object"===typeof c.base64js?function(h){h=c.base64js.b64ToByteArray(h);return Array.prototype.map.call(h,function(n){return String.fromCharCode(n)}).join("")}:function(){throw Error("You're probably in an old browser or an iOS webworker. It might help to include beatgammit's base64-js.");}}(c.atob);c.atob=k;iH.exports&&(iH.exports=k)})(window);return iH.exports}
function Yx(f){throw new RangeError(Zaa[f]);}function R_(f,c){var k=f.split("@"),d="";1<k.length&&(d=k[0]+"@",f=k[1]);f=f.replace($aa,".").split(".");k=[];for(var h=f.length;h--;)k[h]=c(f[h]);c=k.join(".");return d+c}function S_(f){for(var c=[],k=0,d=f.length;k<d;){var h=f.charCodeAt(k++);if(55296<=h&&56319>=h&&k<d){var n=f.charCodeAt(k++);56320==(64512&n)?c.push(((1023&h)<<10)+(1023&n)+65536):(c.push(h),k--)}else c.push(h)}return c}function Vp(){this.href=this.path=this.pathname=this.query=this.search=
this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function PC(f,c,k){if(f&&Js.isObject(f)&&f instanceof Vp)return f;var d=new Vp;return d.parse(f,c,k),d}function Ks(f){if("string"!=typeof f)throw new TypeError("Path must be a string. Received "+JSON.stringify(f));}function T_(f,c){for(var k,d="",h=0,n=-1,b=0,e=0;e<=f.length;++e){if(e<f.length)k=f.charCodeAt(e);else{if(47===k)break;k=47}if(47===k){if(n!==e-1&&1!==b)if(n!==e-1&&2===b){if(2>d.length||2!==h||46!==d.charCodeAt(d.length-
1)||46!==d.charCodeAt(d.length-2))if(2<d.length){if(n=d.lastIndexOf("/"),n!==d.length-1){-1===n?(d="",h=0):h=(d=d.slice(0,n)).length-1-d.lastIndexOf("/");n=e;b=0;continue}}else if(2===d.length||1===d.length){d="";h=0;n=e;b=0;continue}c&&(0<d.length?d+="/..":d="..",h=2)}else 0<d.length?d+="/"+f.slice(n+1,e):d=f.slice(n+1,e),h=e-n-1;n=e;b=0}else 46===k&&-1!==b?++b:b=-1}return d}function aba(){function f(d,h){try{return decodeURIComponent(d.join(""))}catch(b){}if(1===d.length)return d;h=h||1;var n=d.slice(0,
h);d=d.slice(h);return Array.prototype.concat.call([],f(n),f(d))}if(U_)return V_;U_=!0;var c=/%[a-f0-9]{2}/gi,k=/(%[a-f0-9]{2})+/gi;return V_=function(d){if("string"!==typeof d)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof d+"`");try{return d=d.replace(/\+/g," "),decodeURIComponent(d)}catch(a){for(var h={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},n=k.exec(d);n;){try{h[n[0]]=decodeURIComponent(n[0])}catch(g){var b=n[0];try{var e=decodeURIComponent(b)}catch(l){e=
b.match(c);for(var m=1;m<e.length;m++)b=f(e,m).join(""),e=b.match(c);e=b}e!==n[0]&&(h[n[0]]=e)}n=k.exec(d)}h["%C2"]="\ufffd";n=Object.keys(h);for(b=0;b<n.length;b++)e=n[b],d=d.replace(new RegExp(e,"g"),h[e]);return d}}}function bba(){function f(){return Array.prototype.reduce.call(arguments,function(K,J){return r.resolve(K,J)})}function c(K){return"\\"===u.sep?K.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):K}function k(K){return v(K.replace(/\+/g,"%2B"))}function d(K,J,P){setImmediate(function(){K(J,
P)})}function h(K,J){try{return JSON.parse(K.replace(/^\)\]\}'/,""))}catch(P){throw P.sourceMapData=J,P;}}function n(K,J,P){J=k(J);try{return String(K(J))}catch(ea){throw ea.sourceMapData=P,ea;}}function b(K,J,P,ea){try{var ra=m(K,J)}catch(D){return d(ea,D)}if(!ra||ra.map)return d(ea,null,ra);K=k(ra.url);P(K,function(D,O){if(D)return D.sourceMapData=ra,ea(D);ra.map=String(O);try{ra.map=h(ra.map,ra)}catch(L){return ea(L)}ea(null,ra)})}function e(K,J,P){K=m(K,J);if(!K||K.map)return K;K.map=n(P,K.url,
K);K.map=h(K.map,K);return K}function m(K,J){J=c(J);K=(K=K.match(z))?K[1]||K[2]||"":null;if(!K)return null;var P=K.match(A);if(P){var ea=P[1]||"text/plain",ra=P[2]||"";P=P[3]||"";J={sourceMappingURL:K,url:null,sourcesRelativeTo:J,map:P};if(!B.test(ea)){var D=Error("Unuseful data uri mime type: "+ea);D.sourceMapData=J;throw D;}try{if(";base64"===ra)if("undefined"===typeof TextDecoder||"undefined"===typeof Uint8Array)D=q(P);else{var O=q(P),L=O.length,N=new Uint8Array(L);for(K=0;K<L;K++)N[K]=O.charCodeAt(K);
D=(new TextDecoder(G,{fatal:!0})).decode(N)}else D=decodeURIComponent(P);J.map=h(D,J)}catch(aa){throw aa.sourceMapData=J,aa;}return J}D=f(J,K);return{sourceMappingURL:K,url:D,sourcesRelativeTo:D,map:null}}function a(K,J,P,ea,ra){"function"===typeof ea&&(ra=ea,ea={});var D=K.sources?K.sources.length:0,O={sourcesResolved:[],sourcesContent:[]};if(0===D)d(ra,null,O);else{var L=function(){D--;0===D&&ra(null,O)};l(K,J,ea,function(N,aa,Y){O.sourcesResolved[Y]=N;"string"===typeof aa?(O.sourcesContent[Y]=
aa,d(L,null)):(N=k(N),P(N,function(ma,bb){O.sourcesContent[Y]=ma?ma:String(bb);L()}))})}}function g(K,J,P,ea){var ra={sourcesResolved:[],sourcesContent:[]};if(!K.sources||0===K.sources.length)return ra;l(K,J,ea,function(D,O,L){ra.sourcesResolved[L]=D;if(null!==P)if("string"===typeof O)ra.sourcesContent[L]=O;else{D=k(D);try{ra.sourcesContent[L]=String(P(D))}catch(N){ra.sourcesContent[L]=N}}});return ra}function l(K,J,P,ea){P=P||{};J=c(J);for(var ra,D,O=0,L=K.sources.length;O<L;O++)ra=null,"string"===
typeof P.sourceRoot?ra=P.sourceRoot:"string"===typeof K.sourceRoot&&!1!==P.sourceRoot&&(ra=K.sourceRoot),ra=null===ra||""===ra?f(J,K.sources[O]):f(J,ra.replace(E,"/"),K.sources[O]),D=(K.sourcesContent||[])[O],ea(ra,D,O)}if(W_)return X_;W_=!0;var q=Yaa(),r=qA,u=Y_,v=aba(),y=/[#@] sourceMappingURL=([^\s'"]*)/,z=RegExp("(?:/\\*(?:\\s*\r?\n(?://)?)?(?:"+y.source+")\\s*\\*/|//(?:"+y.source+"))\\s*"),A=/^data:([^,;]*)(;[^,;]*)*(?:,(.*))?$/,B=/^(?:application|text)\/json$/,G="utf-8",E=/\/?$/;return X_={resolveSourceMap:b,
resolveSourceMapSync:e,resolveSources:a,resolveSourcesSync:g,resolve:function(K,J,P,ea,ra){function D(L){a(L.map,L.sourcesRelativeTo,P,ea,function(N,aa){if(N)return ra(N);L.sourcesResolved=aa.sourcesResolved;L.sourcesContent=aa.sourcesContent;ra(null,L)})}"function"===typeof ea&&(ra=ea,ea={});if(null===K){var O={sourceMappingURL:null,url:J,sourcesRelativeTo:J,map:null};K=k(J);P(K,function(L,N){if(L)return L.sourceMapData=O,ra(L);O.map=String(N);try{O.map=h(O.map,O)}catch(aa){return ra(aa)}D(O)})}else b(K,
J,P,function(L,N){if(L)return ra(L);if(!N)return ra(null,null);D(N)})},resolveSync:function(K,J,P,ea){if(null===K)K={sourceMappingURL:null,url:J,sourcesRelativeTo:J,map:null},K.map=n(P,J,K),K.map=h(K.map,K);else if(K=e(K,J,P),!K)return null;J=g(K.map,K.sourcesRelativeTo,P,ea);K.sourcesResolved=J.sourcesResolved;K.sourcesContent=J.sourcesContent;return K},parseMapToJSON:h}}function le(){throw Error("Node.js fs module is not supported by jspm core"+("undefined"!=typeof Deno?". Deno support here is tracking in https://github.com/jspm/jspm-core/issues/4, +1's are appreciated!":
" in the browser"));}function cba(){if(Z_)return Ls;Z_=!0;var f=C_().SourceMapGenerator,c=C_().SourceMapConsumer,k=bba(),d=dba,h=Y_;Ls=function(b){b._comment=b.comment;b.map=new f;b.position={line:1,column:1};b.files={};for(var e in Ls)b[e]=Ls[e]};var n=function(b){return"\\"===h.sep?b.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):b};Ls.updatePosition=function(b){var e=b.match(/\n/g);e&&((this||pn).position.line+=e.length);e=b.lastIndexOf("\n");(this||pn).position.column=~e?b.length-e:(this||pn).position.column+
b.length};Ls.emit=function(b,e){if(e){var m=n(e.source||"source.css");(this||pn).map.addMapping({source:m,generated:{line:(this||pn).position.line,column:Math.max((this||pn).position.column-1,0)},original:{line:e.start.line,column:e.start.column-1}});this.addFile(m,e)}this.updatePosition(b);return b};Ls.addFile=function(b,e){"string"!==typeof e.content||Object.prototype.hasOwnProperty.call((this||pn).files,b)||((this||pn).files[b]=e.content)};Ls.applySourceMaps=function(){Object.keys((this||pn).files).forEach(function(b){var e=
(this||pn).files[b];(this||pn).map.setSourceContent(b,e);if(!1!==(this||pn).options.inputSourcemaps&&(e=k.resolveSync(e,b,d.readFileSync))){var m=new c(e.map);(this||pn).map.applySourceMap(m,b,n(h.dirname(e.sourcesRelativeTo)))}},this||pn)};Ls.comment=function(b){return/^# sourceMappingURL=/.test(b.comment)?this.emit("",b.position):this._comment(b)};return Ls}function QC(f){if(f&&f.isListItem&&"string"===typeof f.string)return f;if(!f||!f.isListItem)return{isListItem:!0,string:String(f),value:f};
var c=f.string||f.label||"no item.string";f.string=c&&"string"!==typeof c?Array.isArray(c)?c.map(function(k,d){return 0==d%2?String(k):""}).join(""):String(c):String(c);return f}function jH(f){var c=f.filePath,k=f.worldName,d=f.commit,h=f.loadingIndicator,n=f.progress,b=void 0===f.logError?function(E){return console.log(E)}:f.logError,e,m,a,g,l,q,r,u,v,y,z,A,B,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.setCatchFinallyBlocks(2),e=JSON.parse(localStorage.getItem("lively.load-config")||
'{"lively.lang":"dynamic","lively.ast":"dynamic","lively.source-transform":"dynamic","lively.classes":"dynamic","lively.vm":"dynamic","lively.modules":"dynamic","lively.user":"dynamic","lively.storage":"dynamic","lively.morphic":"dynamic"}'),n.opacity=0,n.hasFixedPosition=!0,n.openInWorld(),n.bottomCenter=h.topCenter,E.yield(pe.polyfills(),4);case 4:return m=$world.env,pe.doBootstrap?E.yield(pe.bootstrapLivelySystem(h,n,e),8):E.yield(pe.fastPrepLivelySystem(h),7);case 7:E.jumpTo(6);break;case 8:case 6:return h.label=
"Loading lively.2lively...",E.yield(lively.modules.registerPackage("lively.2lively"),9);case 9:pe.askBeforeQuit&&window.addEventListener("beforeunload",function(K){return K.returnValue="Really?"},!0);if("dynamic"!=e["lively.morphic"]||pe.fastLoad){a=lively.morphic;E.jumpTo(10);break}h.label="Loading lively.morphic...";return E.yield(lively.modules.importPackage("lively.morphic"),11);case 11:a=E.yieldResult,n.finishPackage({packageName:"lively.morphic",loaded:!0});case 10:h.label="Loading world...";
window.onresize=null;window.loadCompiledFrozenPart=lively.modules.module("lively.morphic/partsbin.js")._recorder.loadPart;lively.FreezerRuntime=!1;g=document.location;E.setCatchFinallyBlocks(12);l={verbose:!0,localconfig:!0,l2l:!0,shell:!0};if(d)return E.yield(a.World.loadFromCommit(d,void 0,Object.assign({},l,{browserURL:"/worlds/load?name="+d.name})),15);if(k)return"__newWorld__"==k?Object.values(e).every(function(K){return"frozen"==K})||pe.fastLoad?E.yield(lively.modules.module("lively.ide/world.js").recorder,
27):E.yield(lively.modules.System.import("lively.ide/world.js"),25):E.yield(a.World.loadFromDB(k,void 0,void 0,Object.assign({},l,{browserURL:"/worlds/load?name="+k.replace(/\.json($|\?)/,"")})),15);if(!c){E.jumpTo(15);break}return E.yield(a.World.loadFromResource(pe.resource(System.baseURL).join(c),void 0,Object.assign({},l,{browserURL:"/worlds/load?file="+c})),15);case 25:return u=E.yieldResult,q=u.LivelyWorld,E.yield(lively.modules.System.import("lively.morphic/world-loading.js"),26);case 26:v=
E.yieldResult;r=v.loadWorld;E.jumpTo(24);break;case 27:return y=E.yieldResult,q=y.LivelyWorld,E.yield(lively.modules.module("lively.morphic/world-loading.js").recorder,28);case 28:z=E.yieldResult,r=z.loadWorld;case 24:return E.yield(r(new q({openNewProjectPrompt:!0})),15);case 15:E.leaveTryBlock(13,2);break;case 12:A=E.enterCatchBlock(2),window.__loadError__=A;case 13:return window.addEventListener("popstate",function(K){document.location==g&&document.location.reload()}),h.remove(),pe.worldLoaded=
!0,lively.modules.removeHook("fetch","logFetch"),E.yield(m.renderer.worldMorph.whenRendered(),31);case 31:"dynamic"!=e["lively.morphic"]||pe.fastLoad||(m.renderer.clear(),m.fontMetric.uninstall(),m.eventDispatcher.uninstall());E.leaveTryBlock(0);break;case 2:throw B=E.enterCatchBlock(),B.originalErr&&(B=B.originalErr),G=B.message,B.stack!==B.message&&(G+=B.stack.includes(B.message)?B.stack.replace(B.message,"\n"):B.stack),b(G),B;}})}sa({B:Uk,D:lv,F:Kc,G:Ib,H:Ec,J:id,K:tb,M:zc,N:dk,O:I,P:nh,Q:kj,R:Ik,
S:$b,U:Jq,V:zF,W:vb,X:yv,Z:MB,_:yg,a:KB,a0:Ii,a1:oh,aC:ps,aQ:al,aR:Jn,aU:Jm,aV:ov,aa:KC,ab:TG,ac:kA,al:wa,ao:fk,ap:tl,aq:Sb,as:Xe,b:qv,bD:jv,bE:pl,bJ:wo,bM:QC,bR:lg,bS:yp,bU:function(f){f=void 0===f?document.body:f;var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){Wp.default().world||(c=window.$world=window.$$world=new ew({name:$_.name,extent:oh(window.innerWidth,window.innerHeight)}),Wp.default().setWorldRenderedOn(c,f,window.prerenderNode));window.$world.dontRecordChangesWhile(function(){var d=
es($_,{reinitializeIds:function(h){return h}});if(d.isWorld)d.position=oh(0,0),Wp.default().setWorldRenderedOn(d,f,window.prerenderNode),"elastic"===d.resizePolicy&&d.execCommand("resize to fit window");else try{f!=document.body?(new window.ResizeObserver(function(h){return d.execCommand("resize on client",h[0])})).observe(f):window.onresize=lively.FreezerRuntime.resizeHandler=function(){return d.execCommand("resize on client")},d.openInWorld(oh(0,0)),d.execCommand("resize on client",f)}catch(h){d.position=
oh(0,0)}});k.jumpToEnd()})},bm:Yf,bo:Vm,br:xp,bv:t,bz:om,c:fn,d:Zw,e:vo,g:Ap,h:nx,i:T,j:Bg,k:Gn,l:JB,m:rv,n:di,o:Vb,p:Rd,q:bc,r:p,t:Tw,u:Ra,v:Qk,w:Vc,x:It,y:kv,z:Vr});var rA=lively.FreezerRuntime.recorderFor("lively.lang/closure.js");rA.evalJS=Bj;rA.parameterRegex=/function[^\(]*\(([^\)]*)\)|\(?([^\)=]*)\)?\s*=>/;var Ei=function(f,c,k,d){this.originalFunc=f;this.varMapping=c||{};this.setFuncSource(k||f);this.setFuncProperties(f||d)};Ei.fromFunction=function(f,c){return new this(f,c||{})};Ei.fromSource=
function(f,c){return new this(null,c||{},f)};Ei.prototype.setFuncSource=function(f){return this.source=f="undefined"!==typeof lively&&lively.sourceTransform&&"function"===typeof lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder?lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder(f):String(f)};Ei.prototype.getFuncSource=function(){return this.source||this.setFuncSource(this.originalFunc)};Ei.prototype.hasFuncSource=function(){return this.source&&!0};Ei.prototype.getFunc=function(){return this.originalFunc||
this.recreateFunc()};Ei.prototype.getFuncProperties=function(){return this.funcProperties||(this.funcProperties={})};Ei.prototype.setFuncProperties=function(f){var c=this.getFuncProperties(),k;for(k in f)f.hasOwnProperty(k)&&(c[k]=f[k])};Ei.prototype.lookup=function(f){return this.varMapping[f]};Ei.prototype.parameterNames=function(f){return"undefined"!==typeof lively&&lively.ast&&lively.ast.parseFunction?(lively.ast.parseFunction(f).params||[]).map(function(c){return"Identifier"===c.type?c.name:
c.left&&"Identifier"===c.left.type?c.left.name:null}).filter(Boolean):(f=rA.parameterRegex.exec(f))?(f[1]||f[2]||"").split(",").map(function(c){return c.trim()}):[]};Ei.prototype.firstParameter=function(f){return this.parameterNames(f)[0]||null};Ei.prototype.recreateFunc=function(){return this.recreateFuncFromSource(this.getFuncSource(),this.originalFunc)};Ei.prototype.recreateFuncFromSource=function(f,c){c=[];var k="$super"===this.firstParameter(f);for(d in this.varMapping)this.varMapping.hasOwnProperty(d)&&
"this"!=d&&c.push("var "+d+" = this.varMapping."+d+";\n");var d="";0<c.length&&(d+=c.join("\n"));k&&(d+="(function superWrapperForClosure() { return ");d+="("+f+")";k&&(d+=".apply(this, [$super.bind(this)].concat(Array.from(arguments))) })");try{var h=rA.evalJS.call(this,d)||this.couldNotCreateFunc(d);this.addFuncProperties(h);return this.originalFunc=h}catch(n){throw f="Cannot create function "+n+" src: "+d,console.error(f),Error(f);}};Ei.prototype.addFuncProperties=function(f){var c=this.getFuncProperties(),
k;for(k in c)c.hasOwnProperty(k)&&(f[k]=c[k]);this.addClosureInformation(f)};Ei.prototype.couldNotCreateFunc=function(f){var c="Could not recreate closure from source: \n"+f;console.error(c);return function(){throw Error(c);}};Ei.prototype.asFunction=function(){return this.recreateFunc()};Ei.prototype.addClosureInformation=function(f){f.hasLivelyClosure=!0;f.livelyClosure=this;return f};$jscomp.global.Object.defineProperties(Ei.prototype,{isLivelyClosure:{configurable:!0,enumerable:!0,get:function(){return!0}},
doNotSerialize:{configurable:!0,enumerable:!0,get:function(){return["originalFunc"]}}});sa("bt",Ei);rA.Closure=Ei;rA.default=Ei;var Zx=lively.FreezerRuntime.recorderFor("lively.lang/Group.js");Zx.groupBy=Ib;var Ml=function(){};Ml.fromArray=function(f,c,k){for(var d=new Zx.Group,h=0,n=f.length;h<n;h++){var b=c.call(k,f[h],h);d[b]||(d[b]=[]);d[b].push(f[h])}return d};Ml.prototype.toArray=function(){return this.reduceGroups(function(f,c,k){return f.concat([k])},[])};Ml.prototype.forEach=function(f,c){var k=
this;Object.keys(k).forEach(function(d){k[d].forEach(f.bind(c,d))});return k};Ml.prototype.forEachGroup=function(f,c){var k=this;Object.keys(k).forEach(function(d){f.call(c,d,k[d])});return k};Ml.prototype.map=function(f,c){var k=new Zx.Group;this.forEachGroup(function(d,h){k[d]=h.map(f.bind(c,d))});return k};Ml.prototype.mapGroups=function(f,c){var k=new Zx.Group;this.forEachGroup(function(d,h){k[d]=f.call(c,d,h)});return k};Ml.prototype.keys=function(){return Object.keys(this)};Ml.prototype.reduceGroups=
function(f,c,k){this.forEachGroup(function(d,h){c=f.call(k,c,d,h)});return c};Ml.prototype.count=function(){return this.reduceGroups(function(f,c,k){f[c]=k.length;return f},{})};$jscomp.global.Object.defineProperties(Ml,{by:{configurable:!0,enumerable:!0,get:function(){return Zx.groupBy}}});Zx.Group=Ml;Zx.default=Ml;var Db=lively.FreezerRuntime.recorderFor("lively.lang/array.js");Db.range=Vb;Db.withN=Wb;Db.genN=qd;Db.filter=Ec;Db.findAndGet=vd;Db.filterByKey=Ic;Db.grep=Jc;Db.mask=Zc;Db.reject=$c;
Db.rejectByKey=Fd;Db.without=md;Db.withoutAll=Vc;Db.uniq=Ra;Db.uniqBy=tb;Db.uniqByKey=dc;Db.compact=bc;Db.mutableCompact=Yc;Db.forEach=Oc;Db.zip=$b;Db.flatten=zc;Db.flatmap=Fb;Db.interpose=Bb;Db.delimWith=pc;Db.map=Pc;Db.invoke=xb;Db.pluck=db;Db.reduce=Ta;Db.reduceRight=cb;Db.some=la;Db.every=La;Db.equals=fb;Db.deepEquals=pb;Db.isSorted=Cb;Db.sort=Wa;Db.sortBy=Xa;Db.sortByKey=zb;Db.reverse=kc;Db.reversed=Tb;Db.reMatches=qc;Db.first=wc;Db.last=I;Db.intersect=T;Db.union=ta;Db.pushAt=Ca;Db.removeAt=
Mb;Db.remove=vb;Db.pushAll=Ia;Db.pushAllAt=Qb;Db.pushIfNotIncluded=Kc;Db.replaceAt=Rc;Db.clear=xc;Db.isSubset=Fa;Db.doAndContinue=nc;Db.nestedDelay=$a;Db.forEachShowingProgress=Pa;Db.swap=Oa;Db.rotate=Kb;Db.groupBy=Ib;Db.groupByKey=cd;Db.partition=Od;Db.batchify=Zd;Db.toTuples=Te;Db.combinationsPick=Qc;Db.combinations=Xd;Db.take=kd;Db.drop=Ab;Db.takeWhile=da;Db.dropWhile=qa;Db.shuffle=ub;Db.max=H;Db.min=ia;Db.sum=Ba;Db.count=rb;Db.size=sc;Db.histogram=yc;Db.clone=Gd;Db.toArray=Ld;Db.each=Ke;Db.all=
id;Db.any=Md;Db.collect=ze;Db.findAll=Ne;Db.inject=yf;Db.mapAsyncSeries=tf;Db.mapAsync=vc;Db.objectEquals=jj;Db.delay=bd;Db.once=lg;Db.NullFunction=Jf;Db.Group=Ml;Db.GLOBAL="undefined"!==typeof System?System.global:"undefined"!==typeof window?window:global;Db.features={from:!!Array.from,filter:!!Array.prototype.filter,find:!!Array.prototype.find,findIndex:!!Array.prototype.findIndex,includes:!!Array.prototype.includes};Db.from=Db.features.from?Array.from:function(f){if(!f)return[];if(Array.isArray(f))return f;
if(f.toArray)return f.toArray();for(var c=f.length,k=Array(c);c--;)k[c]=f[c];return k};Db.detect=Db.features.find?function(f,c,k){return f.find(c,k)}:function(f,c,k){for(var d,h=0,n=f.length;h<n;h++)if(d=f[h],c.call(k,d,h))return d};Db.findIndex=Db.features.findIndex?function(f,c,k){return f.findIndex(c,k)}:function(f,c,k){var d=-1;return f.find(function(h,n){d=n;return c.call(h,k)})?d:-1};Db.isArray=Array.isArray;Db.includes=Db.features.includes?function(f,c){return f.includes(c)}:function(f,c){return-1!==
f.indexOf(c)};Db.include=Db.includes;Db.permutations=function(){function f(c,k){return c.length?Db.flatmap(c,function(d,h){return f(c.slice(0,h).concat(c.slice(h+1)),k.concat([d]))}):[k]}return function(c){return f(c,[])}}();Db.features.from||(Array.from=Db.from);Db.features.filter||(Array.prototype.filter=function(f,c){return Db.filter(this,f,c)});Db.features.find||(Array.prototype.find=function(f,c){return Db.detect(this,f,c)});Db.features.findIndex||(Array.prototype.findIndex=function(f,c){return Db.findIndex(this,
f,c)});Db.features.includes||(Array.prototype.includes=function(f){return Db.includes(this,f)});var BN=Db.from,CN=Db.detect,DN=Db.findIndex,EN=sa("f",Db.isArray),FN=Db.includes,GN=Db.include,HN=Db.permutations;Db.range=Vb;Db.range=Vb;Db.from=BN;Db.from=BN;Db.withN=Wb;Db.withN=Wb;Db.genN=qd;Db.genN=qd;Db.filter=Ec;Db.filter=Ec;Db.detect=CN;Db.detect=CN;Db.findIndex=DN;Db.findIndex=DN;Db.findAndGet=vd;Db.findAndGet=vd;Db.filterByKey=Ic;Db.filterByKey=Ic;Db.grep=Jc;Db.grep=Jc;Db.mask=Zc;Db.mask=Zc;Db.reject=
$c;Db.reject=$c;Db.rejectByKey=Fd;Db.rejectByKey=Fd;Db.without=md;Db.without=md;Db.withoutAll=Vc;Db.withoutAll=Vc;Db.uniq=Ra;Db.uniq=Ra;Db.uniqBy=tb;Db.uniqBy=tb;Db.uniqByKey=dc;Db.uniqByKey=dc;Db.compact=bc;Db.compact=bc;Db.mutableCompact=Yc;Db.mutableCompact=Yc;Db.forEach=Oc;Db.forEach=Oc;Db.zip=$b;Db.zip=$b;Db.flatten=zc;Db.flatten=zc;Db.flatmap=Fb;Db.flatmap=Fb;Db.interpose=Bb;Db.interpose=Bb;Db.delimWith=pc;Db.delimWith=pc;Db.map=Pc;Db.map=Pc;Db.invoke=xb;Db.invoke=xb;Db.pluck=db;Db.pluck=db;
Db.reduce=Ta;Db.reduce=Ta;Db.reduceRight=cb;Db.reduceRight=cb;Db.isArray=EN;Db.isArray=EN;Db.includes=FN;Db.includes=FN;Db.include=GN;Db.include=GN;Db.some=la;Db.some=la;Db.every=La;Db.every=La;Db.equals=fb;Db.equals=fb;Db.deepEquals=pb;Db.deepEquals=pb;Db.isSorted=Cb;Db.isSorted=Cb;Db.sort=Wa;Db.sort=Wa;Db.sortBy=Xa;Db.sortBy=Xa;Db.sortByKey=zb;Db.sortByKey=zb;Db.reverse=kc;Db.reverse=kc;Db.reversed=Tb;Db.reversed=Tb;Db.reMatches=qc;Db.reMatches=qc;Db.first=wc;Db.first=wc;Db.last=I;Db.last=I;Db.intersect=
T;Db.intersect=T;Db.union=ta;Db.union=ta;Db.pushAt=Ca;Db.pushAt=Ca;Db.removeAt=Mb;Db.removeAt=Mb;Db.remove=vb;Db.remove=vb;Db.pushAll=Ia;Db.pushAll=Ia;Db.pushAllAt=Qb;Db.pushAllAt=Qb;Db.pushIfNotIncluded=Kc;Db.pushIfNotIncluded=Kc;Db.replaceAt=Rc;Db.replaceAt=Rc;Db.clear=xc;Db.clear=xc;Db.isSubset=Fa;Db.isSubset=Fa;Db.doAndContinue=nc;Db.doAndContinue=nc;Db.nestedDelay=$a;Db.nestedDelay=$a;Db.forEachShowingProgress=Pa;Db.forEachShowingProgress=Pa;Db.swap=Oa;Db.swap=Oa;Db.rotate=Kb;Db.rotate=Kb;Db.groupBy=
Ib;Db.groupBy=Ib;Db.groupByKey=cd;Db.groupByKey=cd;Db.partition=Od;Db.partition=Od;Db.batchify=Zd;Db.batchify=Zd;Db.toTuples=Te;Db.toTuples=Te;Db.permutations=HN;Db.permutations=HN;Db.combinationsPick=Qc;Db.combinationsPick=Qc;Db.combinations=Xd;Db.combinations=Xd;Db.take=kd;Db.take=kd;Db.drop=Ab;Db.drop=Ab;Db.takeWhile=da;Db.takeWhile=da;Db.dropWhile=qa;Db.dropWhile=qa;Db.shuffle=ub;Db.shuffle=ub;Db.max=H;Db.max=H;Db.min=ia;Db.min=ia;Db.sum=Ba;Db.sum=Ba;Db.count=rb;Db.count=rb;Db.size=sc;Db.size=
sc;Db.histogram=yc;Db.histogram=yc;Db.clone=Gd;Db.clone=Gd;Db.toArray=Ld;Db.toArray=Ld;Db.each=Ke;Db.each=Ke;Db.all=id;Db.all=id;Db.any=Md;Db.any=Md;Db.collect=ze;Db.collect=ze;Db.findAll=Ne;Db.findAll=Ne;Db.inject=yf;Db.inject=yf;Db.mapAsyncSeries=tf;Db.mapAsyncSeries=tf;Db.mapAsync=vc;Db.mapAsync=vc;var vf=Object.freeze({__proto__:null,range:Vb,from:BN,withN:Wb,genN:qd,filter:Ec,detect:CN,findIndex:DN,findAndGet:vd,filterByKey:Ic,grep:Jc,mask:Zc,reject:$c,rejectByKey:Fd,without:md,withoutAll:Vc,
uniq:Ra,uniqBy:tb,uniqByKey:dc,compact:bc,mutableCompact:Yc,forEach:Oc,zip:$b,flatten:zc,flatmap:Fb,interpose:Bb,delimWith:pc,map:Pc,invoke:xb,pluck:db,reduce:Ta,reduceRight:cb,isArray:EN,includes:FN,include:GN,some:la,every:La,equals:fb,deepEquals:pb,isSorted:Cb,sort:Wa,sortBy:Xa,sortByKey:zb,reverse:kc,reversed:Tb,reMatches:qc,first:wc,last:I,intersect:T,union:ta,pushAt:Ca,removeAt:Mb,remove:vb,pushAll:Ia,pushAllAt:Qb,pushIfNotIncluded:Kc,replaceAt:Rc,clear:xc,isSubset:Fa,doAndContinue:nc,nestedDelay:$a,
forEachShowingProgress:Pa,swap:Oa,rotate:Kb,groupBy:Ib,groupByKey:cd,partition:Od,batchify:Zd,toTuples:Te,permutations:HN,combinationsPick:Qc,combinations:Xd,take:kd,drop:Ab,takeWhile:da,dropWhile:qa,shuffle:ub,max:H,min:ia,sum:Ba,count:rb,size:sc,histogram:yc,clone:Gd,toArray:Ld,each:Ke,all:id,any:Md,collect:ze,findAll:Ne,inject:yf,mapAsyncSeries:tf,mapAsync:vc});sa("a4",vf);var fd=lively.FreezerRuntime.recorderFor("lively.lang/function.js");fd.Empty=Fe;fd.K=mf;fd.Null=Jf;fd.False=ye;fd.True=va;
fd.notYetImplemented=Ka;fd.all=sb;fd.own=Q;fd.argumentNames=ua;fd.qualifiedMethodName=Za;fd.extractBody=ib;fd.timeToRun=oc;fd.timeToRunN=cc;fd.delay=bd;fd.throttle=Tc;fd.debounce=Wc;fd.throttleNamed=Yd;fd.debounceNamed=Mf;fd.createQueue=Bf;fd.workerWithCallbackQueue=Hg;fd._composeAsyncDefaultEndCallback=function(f,c){f&&console.error("lively.lang.composeAsync error",f)};fd.composeAsync=df;fd.compose=Bg;fd.flip=Di;fd.withNull=Pg;fd.waitFor=Nj;fd.waitForAll=Oe;fd.curry=ki;fd.wrap=Kh;fd.getOriginal=
be;fd.wrapperChain=gj;fd.replaceMethodForOneCall=Mj;fd.once=lg;fd.either=yk;fd.eitherNamed=Tj;fd.evalJS=Bj;fd.fromString=Bh;fd.asScript=zf;fd.asScriptOf=$e;fd.addToObject=ll;fd.binds=Sa;fd.setLocalVarValue=Xc;fd.getVarMapping=Wd;fd.setProperty=Td;fd.functionNames=Hc;fd.localFunctionNames=dg;fd.logErrors=ji;fd.logCompletion=Rk;fd.logCalls=Cm;fd.traceCalls=Um;fd.webkitStack=hj;fd.objectMerge=ic;fd.safeToString=rd;fd.Closure=Ei;fd.arr=vf;fd._throttledByName={};fd._debouncedByName={};fd._queues={};fd._queueUntilCallbacks=
{};fd._eitherNameRegistry={};fd.Empty=Fe;fd.Empty=Fe;fd.K=mf;fd.K=mf;fd.Null=Jf;fd.Null=Jf;fd.False=ye;fd.False=ye;fd.True=va;fd.True=va;fd.notYetImplemented=Ka;fd.notYetImplemented=Ka;fd.withNull=Pg;fd.withNull=Pg;fd.all=sb;fd.all=sb;fd.own=Q;fd.own=Q;fd.argumentNames=ua;fd.argumentNames=ua;fd.qualifiedMethodName=Za;fd.qualifiedMethodName=Za;fd.extractBody=ib;fd.extractBody=ib;fd.timeToRun=oc;fd.timeToRun=oc;fd.timeToRunN=cc;fd.timeToRunN=cc;fd.delay=bd;fd.delay=bd;fd.throttle=Tc;fd.throttle=Tc;
fd.debounce=Wc;fd.debounce=Wc;fd.throttleNamed=Yd;fd.throttleNamed=Yd;fd.debounceNamed=Mf;fd.debounceNamed=Mf;fd.createQueue=Bf;fd.createQueue=Bf;fd.workerWithCallbackQueue=Hg;fd.workerWithCallbackQueue=Hg;fd.composeAsync=df;fd.composeAsync=df;fd.compose=Bg;fd.compose=Bg;fd.waitFor=Nj;fd.waitFor=Nj;fd.waitForAll=Oe;fd.waitForAll=Oe;fd.flip=Di;fd.flip=Di;fd.curry=ki;fd.curry=ki;fd.wrap=Kh;fd.wrap=Kh;fd.binds=Sa;fd.binds=Sa;fd.getOriginal=be;fd.getOriginal=be;fd.wrapperChain=gj;fd.wrapperChain=gj;fd.replaceMethodForOneCall=
Mj;fd.replaceMethodForOneCall=Mj;fd.once=lg;fd.once=lg;fd.either=yk;fd.either=yk;fd.eitherNamed=Tj;fd.eitherNamed=Tj;fd.evalJS=Bj;fd.evalJS=Bj;fd.fromString=Bh;fd.fromString=Bh;fd.asScript=zf;fd.asScript=zf;fd.asScriptOf=$e;fd.asScriptOf=$e;fd.addToObject=ll;fd.addToObject=ll;fd.setLocalVarValue=Xc;fd.setLocalVarValue=Xc;fd.getVarMapping=Wd;fd.getVarMapping=Wd;fd.setProperty=Td;fd.setProperty=Td;fd.functionNames=Hc;fd.functionNames=Hc;fd.localFunctionNames=dg;fd.localFunctionNames=dg;fd.logErrors=
ji;fd.logErrors=ji;fd.logCompletion=Rk;fd.logCompletion=Rk;fd.logCalls=Cm;fd.logCalls=Cm;fd.traceCalls=Um;fd.traceCalls=Um;fd.webkitStack=hj;fd.webkitStack=hj;var nl=Object.freeze({__proto__:null,Empty:Fe,K:mf,Null:Jf,False:ye,True:va,notYetImplemented:Ka,withNull:Pg,all:sb,own:Q,argumentNames:ua,qualifiedMethodName:Za,extractBody:ib,timeToRun:oc,timeToRunN:cc,delay:bd,throttle:Tc,debounce:Wc,throttleNamed:Yd,debounceNamed:Mf,createQueue:Bf,workerWithCallbackQueue:Hg,composeAsync:df,compose:Bg,waitFor:Nj,
waitForAll:Oe,flip:Di,curry:ki,wrap:Kh,binds:Sa,getOriginal:be,wrapperChain:gj,replaceMethodForOneCall:Mj,once:lg,either:yk,eitherNamed:Tj,evalJS:Bj,fromString:Bh,asScript:zf,asScriptOf:$e,addToObject:ll,setLocalVarValue:Xc,getVarMapping:Wd,setProperty:Td,functionNames:Hc,localFunctionNames:dg,logErrors:ji,logCompletion:Rk,logCalls:Cm,traceCalls:Um,webkitStack:hj});sa("ar",nl);var Ud=lively.FreezerRuntime.recorderFor("lively.lang/object.js");Ud.print=Jl;Ud.indent=function(f,c,k){if(!k||0>=k)return f;
for(;0<k;)k--,f=c+f;return f};Ud.isArray=Pk;Ud.isElement=zk;Ud.isFunction=Kl;Ud.isBoolean=Ee;Ud.isString=Ik;Ud.isNumber=im;Ud.isUndefined=ij;Ud.isRegExp=Li;Ud.isObject=ck;Ud.isPrimitive=Hd;Ud.isEmpty=Aj;Ud.equals=jj;Ud.values=Qk;Ud.select=Lf;Ud.dissoc=sg;Ud.addScript=pa;Ud.extend=eb;Ud.clone=nb;Ud.extract=ab;Ud.inspect=mb;Ud.merge=ic;Ud.deepMerge=Nc;Ud.sortKeysWithBeforeAndAfterConstraints=Lc;Ud.inherit=Xb;Ud.valuesInPropertyHierarchy=Rb;Ud.mergePropertyInHierarchy=tc;Ud.deepCopy=gb;Ud.typeStringOf=
Gc;Ud.shortPrintStringOf=Cd;Ud.isMutableType=fe;Ud.safeToString=rd;Ud.asObject=ge;Ud.newKeyIn=se;Ud.functionFromString=Bh;Ud.asScriptOf=$e;Ud.argumentNames=ua;Ud.arrayDeepEquals=pb;Ud.isSubset=Fa;Ud.flatten=zc;Ud.getOwnPropertyDescriptors="function"===typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:function(f){var c={},k;for(k in f)Object.prototype.hasOwnProperty.call(f,k)&&Object.defineProperty(c,k,{configurable:!0,enumerable:!0,writable:!0,value:Object.getOwnPropertyDescriptor(f,
k)});return c};Ud.keys=Object.keys;var IN=Ud.keys,JN=Ud.getOwnPropertyDescriptors;Ud.isArray=Pk;Ud.isArray=Pk;Ud.isElement=zk;Ud.isElement=zk;Ud.isFunction=Kl;Ud.isFunction=Kl;Ud.isBoolean=Ee;Ud.isBoolean=Ee;Ud.isString=Ik;Ud.isString=Ik;Ud.isNumber=im;Ud.isNumber=im;Ud.isUndefined=ij;Ud.isUndefined=ij;Ud.isRegExp=Li;Ud.isRegExp=Li;Ud.isObject=ck;Ud.isObject=ck;Ud.isPrimitive=Hd;Ud.isPrimitive=Hd;Ud.isEmpty=Aj;Ud.isEmpty=Aj;Ud.equals=jj;Ud.equals=jj;Ud.keys=IN;Ud.keys=IN;Ud.values=Qk;Ud.values=Qk;
Ud.select=Lf;Ud.select=Lf;Ud.dissoc=sg;Ud.dissoc=sg;Ud.addScript=pa;Ud.addScript=pa;Ud.extend=eb;Ud.extend=eb;Ud.clone=nb;Ud.clone=nb;Ud.extract=ab;Ud.extract=ab;Ud.inspect=mb;Ud.inspect=mb;Ud.merge=ic;Ud.merge=ic;Ud.deepMerge=Nc;Ud.deepMerge=Nc;Ud.inherit=Xb;Ud.inherit=Xb;Ud.valuesInPropertyHierarchy=Rb;Ud.valuesInPropertyHierarchy=Rb;Ud.mergePropertyInHierarchy=tc;Ud.mergePropertyInHierarchy=tc;Ud.sortKeysWithBeforeAndAfterConstraints=Lc;Ud.sortKeysWithBeforeAndAfterConstraints=Lc;Ud.deepCopy=gb;
Ud.deepCopy=gb;Ud.typeStringOf=Gc;Ud.typeStringOf=Gc;Ud.shortPrintStringOf=Cd;Ud.shortPrintStringOf=Cd;Ud.isMutableType=fe;Ud.isMutableType=fe;Ud.safeToString=rd;Ud.safeToString=rd;Ud.asObject=ge;Ud.asObject=ge;Ud.newKeyIn=se;Ud.newKeyIn=se;Ud.getOwnPropertyDescriptors=JN;Ud.getOwnPropertyDescriptors=JN;var Pf=Object.freeze({__proto__:null,isArray:Pk,isElement:zk,isFunction:Kl,isBoolean:Ee,isString:Ik,isNumber:im,isUndefined:ij,isRegExp:Li,isObject:ck,isPrimitive:Hd,isEmpty:Aj,equals:jj,keys:IN,values:Qk,
select:Lf,dissoc:sg,addScript:pa,extend:eb,clone:nb,extract:ab,inspect:mb,merge:ic,deepMerge:Nc,inherit:Xb,valuesInPropertyHierarchy:Rb,mergePropertyInHierarchy:tc,sortKeysWithBeforeAndAfterConstraints:Lc,deepCopy:gb,typeStringOf:Gc,shortPrintStringOf:Cd,isMutableType:fe,safeToString:rd,asObject:ge,newKeyIn:se,getOwnPropertyDescriptors:JN});sa("a5",Pf);var Bc=lively.FreezerRuntime.recorderFor("lively.lang/string.js");Bc.format=Se;Bc.formatFromArray=Ue;Bc.indent=Kf;Bc.minIndent=eg;Bc.changeIndent=
We;Bc.quote=li;Bc.print=ca;Bc.printNested=za;Bc.pad=Ya;Bc.printTable=Ha;Bc.printTree=Zb;Bc.toArray=Ub;Bc.lines=gc;Bc.paragraphs=rc;Bc.nonEmptyLines=pd;Bc.tokens=qf;Bc.tableize=uf;Bc.unescapeCharacterEntities=Wg;Bc.toQueryParams=bg;Bc.base64EncodeUnicode=uh;Bc.base64DecodeUnicode=Xi;Bc.normalizePath=bk;Bc.joinPath=xn;Bc.newUUID=Vm;Bc.createDataURI=fo;Bc.hashCode=tr;Bc.md5=yn;Bc.reMatches=et;Bc.stringMatch=ft;Bc.peekRight=Mu;Bc.peekLeft=Nu;Bc.lineIndexComputer=Ou;Bc.lineNumberToIndexesComputer=Pu;Bc.lineRanges=
gt;Bc.findLineWithIndexInLineRanges=ur;Bc.regexIndexOf=vr;Bc.regexLastIndexOf=ht;Bc.diff=it;Bc.empty=Wm;Bc.startsWithVowel=Xo;Bc.withDecimalPrecision=wr;Bc.capitalize=mq;Bc.camelCaseString=Yo;Bc.camelize=dk;Bc.truncate=jt;Bc.truncateLeft=go;Bc.regExpEscape=nq;Bc.succ=oq;Bc.digitValue=kt;Bc.longestCommonSubstring=lt;Bc.applyChange=xr;Bc.applyChanges=yr;Bc.levenshtein=Zo;Bc.inspectObject=mb;Bc.min=ia;Bc.last=I;Bc.features={repeat:!!String.prototype.repeat,includes:!!String.prototype.includes,startsWith:!!String.prototype.startsWith,
endsWith:!!String.prototype.endsWith};Bc.pathDotRe=/\/\.\//g;Bc.pathDoubleDotRe=/\/[^\/]+\/\.\./;Bc.pathDoubleSlashRe=/(^|[^:])[\/]+/g;Bc.urlStartRe=/^[a-z0-9-_\.]+:\/\//;Bc.newUUIDTemplate="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";Bc.newUUIDRe=/[xy]/g;Bc.newUUIDReplacer=function(f){var c=16*Math.random()|0;return("x"==f?c:c&3|8).toString(16)};Bc.includes=Bc.features.includes?function(f,c){return f.includes(c)}:function(f,c){return-1<f.indexOf(c)};Bc.include=Bc.includes;Bc.startsWith=Bc.features.startsWith?
function(f,c){return f.startsWith(c)}:function(f,c){return 0===f.indexOf(c)};Bc.endsWith=Bc.features.endsWith?function(f,c){return f.endsWith(c)}:function(f,c){var k=f.length-c.length;return 0<=k&&f.lastIndexOf(c)===k};Bc.times=Bc.features.repeat?function(f,c){return f.repeat(c)}:function(f,c){return 1>c?"":Array(c+1).join(f)};var KN=Bc.includes,LN=Bc.include,MN=Bc.startsWith,NN=Bc.endsWith,ON=Bc.times;Bc.format=Se;Bc.format=Se;Bc.formatFromArray=Ue;Bc.formatFromArray=Ue;Bc.indent=Kf;Bc.indent=Kf;
Bc.minIndent=eg;Bc.minIndent=eg;Bc.changeIndent=We;Bc.changeIndent=We;Bc.quote=li;Bc.quote=li;Bc.print=ca;Bc.print=ca;Bc.printNested=za;Bc.printNested=za;Bc.pad=Ya;Bc.pad=Ya;Bc.printTable=Ha;Bc.printTable=Ha;Bc.printTree=Zb;Bc.printTree=Zb;Bc.toArray=Ub;Bc.toArray=Ub;Bc.lines=gc;Bc.lines=gc;Bc.paragraphs=rc;Bc.paragraphs=rc;Bc.nonEmptyLines=pd;Bc.nonEmptyLines=pd;Bc.tokens=qf;Bc.tokens=qf;Bc.tableize=uf;Bc.tableize=uf;Bc.unescapeCharacterEntities=Wg;Bc.unescapeCharacterEntities=Wg;Bc.base64EncodeUnicode=
uh;Bc.base64EncodeUnicode=uh;Bc.base64DecodeUnicode=Xi;Bc.base64DecodeUnicode=Xi;Bc.toQueryParams=bg;Bc.toQueryParams=bg;Bc.normalizePath=bk;Bc.normalizePath=bk;Bc.joinPath=xn;Bc.joinPath=xn;Bc.newUUID=Vm;Bc.newUUID=Vm;Bc.createDataURI=fo;Bc.createDataURI=fo;Bc.hashCode=tr;Bc.hashCode=tr;Bc.md5=yn;Bc.md5=yn;Bc.reMatches=et;Bc.reMatches=et;Bc.stringMatch=ft;Bc.stringMatch=ft;Bc.peekRight=Mu;Bc.peekRight=Mu;Bc.peekLeft=Nu;Bc.peekLeft=Nu;Bc.lineIndexComputer=Ou;Bc.lineIndexComputer=Ou;Bc.lineNumberToIndexesComputer=
Pu;Bc.lineNumberToIndexesComputer=Pu;Bc.findLineWithIndexInLineRanges=ur;Bc.findLineWithIndexInLineRanges=ur;Bc.regexIndexOf=vr;Bc.regexIndexOf=vr;Bc.regexLastIndexOf=ht;Bc.regexLastIndexOf=ht;Bc.lineRanges=gt;Bc.lineRanges=gt;Bc.diff=it;Bc.diff=it;Bc.empty=Wm;Bc.empty=Wm;Bc.includes=KN;Bc.includes=KN;Bc.include=LN;Bc.include=LN;Bc.startsWith=MN;Bc.startsWith=MN;Bc.startsWithVowel=Xo;Bc.startsWithVowel=Xo;Bc.endsWith=NN;Bc.endsWith=NN;Bc.withDecimalPrecision=wr;Bc.withDecimalPrecision=wr;Bc.capitalize=
mq;Bc.capitalize=mq;Bc.camelCaseString=Yo;Bc.camelCaseString=Yo;Bc.camelize=dk;Bc.camelize=dk;Bc.truncate=jt;Bc.truncate=jt;Bc.truncateLeft=go;Bc.truncateLeft=go;Bc.regExpEscape=nq;Bc.regExpEscape=nq;Bc.succ=oq;Bc.succ=oq;Bc.digitValue=kt;Bc.digitValue=kt;Bc.times=ON;Bc.times=ON;Bc.longestCommonSubstring=lt;Bc.longestCommonSubstring=lt;Bc.applyChange=xr;Bc.applyChange=xr;Bc.applyChanges=yr;Bc.applyChanges=yr;Bc.levenshtein=Zo;Bc.levenshtein=Zo;var vh=Object.freeze({__proto__:null,format:Se,formatFromArray:Ue,
indent:Kf,minIndent:eg,changeIndent:We,quote:li,print:ca,printNested:za,pad:Ya,printTable:Ha,printTree:Zb,toArray:Ub,lines:gc,paragraphs:rc,nonEmptyLines:pd,tokens:qf,tableize:uf,unescapeCharacterEntities:Wg,base64EncodeUnicode:uh,base64DecodeUnicode:Xi,toQueryParams:bg,normalizePath:bk,joinPath:xn,newUUID:Vm,createDataURI:fo,hashCode:tr,md5:yn,reMatches:et,stringMatch:ft,peekRight:Mu,peekLeft:Nu,lineIndexComputer:Ou,lineNumberToIndexesComputer:Pu,findLineWithIndexInLineRanges:ur,regexIndexOf:vr,
regexLastIndexOf:ht,lineRanges:gt,diff:it,empty:Wm,includes:KN,include:LN,startsWith:MN,startsWithVowel:Xo,endsWith:NN,withDecimalPrecision:wr,capitalize:mq,camelCaseString:Yo,camelize:dk,truncate:jt,truncateLeft:go,regExpEscape:nq,succ:oq,digitValue:kt,times:ON,longestCommonSubstring:lt,applyChange:xr,applyChanges:yr,levenshtein:Zo});sa("s",vh);var fg=lively.FreezerRuntime.recorderFor("lively.lang/number.js");fg.random=Qu;fg.randomSmallerInteger=Ru;fg.humanReadableByteSize=Su;fg.average=mt;fg.averageInc=
nt;fg.median=Tu;fg.between=ot;fg.clamp=pq;fg.sort=zr;fg.parseLength=jm;fg.roundTo=Dm;fg.detent=ml;fg.toDegrees=Ch;fg.toRadians=Xm;fg.backoff=Em;fg.interpolate=$o;fg.normalRandom=function(f,c){var k,d=!1;return function(h,n){if(d)return d=!1,k*n+h;do{var b=2*Math.random()-1;var e=2*Math.random()-1;var m=b*b+e*e}while(1<=m||0==m);m=Math.sqrt(-2*Math.log(m)/m);k=e*m;d=!0;return h+n*b*m}}();fg.convertLength=function(){function f(c,k){if("cm"===k)return c;if("mm"===k)return.1*c;if("in"===k)return 2.54*
c;if("px"===k)return c*f(1/96,"in");if("pt"===k)return c*f(1/72,"in");if("pc"===k)return c*f(12,"pt")}return function n(k,d,h){return d===h?k:"cm"===h?f(k,d):"cm"===d?k/f(1,h):n(n(k,d,"cm"),"cm",h)}}();var PN=fg.normalRandom,QN=fg.convertLength;fg.random=Qu;fg.random=Qu;fg.normalRandom=PN;fg.normalRandom=PN;fg.randomSmallerInteger=Ru;fg.randomSmallerInteger=Ru;fg.humanReadableByteSize=Su;fg.humanReadableByteSize=Su;fg.average=mt;fg.average=mt;fg.averageInc=nt;fg.averageInc=nt;fg.median=Tu;fg.median=
Tu;fg.between=ot;fg.between=ot;fg.sort=zr;fg.sort=zr;fg.parseLength=jm;fg.parseLength=jm;fg.convertLength=QN;fg.convertLength=QN;fg.roundTo=Dm;fg.roundTo=Dm;fg.detent=ml;fg.detent=ml;fg.toDegrees=Ch;fg.toDegrees=Ch;fg.toRadians=Xm;fg.toRadians=Xm;fg.backoff=Em;fg.backoff=Em;fg.interpolate=$o;fg.interpolate=$o;fg.clamp=pq;fg.clamp=pq;var Bk=Object.freeze({__proto__:null,random:Qu,normalRandom:PN,randomSmallerInteger:Ru,humanReadableByteSize:Su,average:mt,averageInc:nt,median:Tu,between:ot,sort:zr,
parseLength:jm,convertLength:QN,roundTo:Dm,detent:ml,toDegrees:Ch,toRadians:Xm,backoff:Em,interpolate:$o,clamp:pq});sa("an",Bk);var Zi=lively.FreezerRuntime.recorderFor("lively.lang/properties.js");Zi.all=Uu;Zi.allOwnPropertiesOrFunctions=qq;Zi.own=pt;Zi.forEachOwn=ap;Zi.nameFor=bp;Zi.values=qt;Zi.ownValues=Ar;Zi.any=rt;Zi.allProperties=rq;Zi.hash=st;Zi.all=Uu;Zi.all=Uu;Zi.allOwnPropertiesOrFunctions=qq;Zi.allOwnPropertiesOrFunctions=qq;Zi.own=pt;Zi.own=pt;Zi.forEachOwn=ap;Zi.forEachOwn=ap;Zi.nameFor=
bp;Zi.nameFor=bp;Zi.values=qt;Zi.values=qt;Zi.ownValues=Ar;Zi.ownValues=Ar;Zi.any=rt;Zi.any=rt;Zi.allProperties=rq;Zi.allProperties=rq;Zi.hash=st;Zi.hash=st;var $m=Object.freeze({__proto__:null,all:Uu,allOwnPropertiesOrFunctions:qq,own:pt,forEachOwn:ap,nameFor:bp,values:qt,ownValues:Ar,any:rt,allProperties:rq,hash:st});sa("aT",$m);var zn=lively.FreezerRuntime.recorderFor("lively.lang/date.js");zn.format=tt;zn.equals=cp;zn.relativeTo=ho;zn.dateFormat=function(){var f=function(){var c=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,
k=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,d=/[^-+\dA-Z]/g,h=function(n,b){n=String(n);for(b=b||2;n.length<b;)n="0"+n;return n};return function(n,b,e){var m=f;1!=arguments.length||"[object String]"!=Object.prototype.toString.call(n)||/\d/.test(n)||(b=n,n=void 0);n=n?new Date(n):new Date;if(isNaN(n))throw SyntaxError("invalid date");b=String(m.masks[b]||b||m.masks["default"]);"UTC:"==b.slice(0,4)&&(b=b.slice(4),
e=!0);var a=e?"getUTC":"get",g=n[a+"Date"](),l=n[a+"Day"](),q=n[a+"Month"](),r=n[a+"FullYear"](),u=n[a+"Hours"](),v=n[a+"Minutes"](),y=n[a+"Seconds"]();a=n[a+"Milliseconds"]();var z=e?0:n.getTimezoneOffset(),A={d:g,dd:h(g),ddd:m.i18n.dayNames[l],dddd:m.i18n.dayNames[l+7],m:q+1,mm:h(q+1),mmm:m.i18n.monthNames[q],mmmm:m.i18n.monthNames[q+12],yy:String(r).slice(2),yyyy:r,h:u%12||12,hh:h(u%12||12),H:u,HH:h(u),M:v,MM:h(v),s:y,ss:h(y),l:h(a,3),L:h(99<a?Math.round(a/10):a),t:12>u?"a":"p",tt:12>u?"am":"pm",
T:12>u?"A":"P",TT:12>u?"AM":"PM",Z:e?"UTC":(String(n).match(k)||[""]).pop().replace(d,""),o:(0<z?"-":"+")+h(100*Math.floor(Math.abs(z)/60)+Math.abs(z)%60,4),S:["th","st","nd","rd"][3<g%10?0:(10!=g%100-g%10)*g%10]};return b.replace(c,function(B){return B in A?A[B]:B.slice(1,B.length-1)})}}();f.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",
isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};f.i18n={dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ")};return f}();var RN=zn.dateFormat;zn.format=tt;zn.format=tt;zn.equals=cp;zn.equals=cp;zn.relativeTo=ho;zn.relativeTo=
ho;zn.dateFormat=RN;zn.dateFormat=RN;var Jr=Object.freeze({__proto__:null,format:tt,equals:cp,relativeTo:ho,dateFormat:RN});sa("a3",Jr);var mh=lively.FreezerRuntime.recorderFor("lively.lang/promise.js");mh.promise=yg;mh.delay=io;mh.delayReject=dp;mh.timeout=ep;mh.timeToRun=Vu;mh.waitFor=ut;mh.deferred=vt;mh.convertCallbackFun=jo;mh.convertCallbackFunWithManyArgs=Wu;mh._chainResolveNext=wt;mh.chain=An;mh.promise_finally=Br;mh.parallel=xt;mh.newUUID=Vm;mh.pushIfNotIncluded=Kc;mh.removeAt=Mb;Object.assign(mh.promise,
{delay:io,delayReject:dp,timeout:ep,waitFor:ut,deferred:vt,convertCallbackFun:jo,convertCallbackFunWithManyArgs:Wu,chain:An,"finally":mh.promise_finally,parallel:xt});mh.promise=yg;mh.promise=yg;mh.delay=io;mh.delay=io;mh.delayReject=dp;mh.delayReject=dp;mh.timeout=ep;mh.timeout=ep;mh.timeToRun=Vu;mh.timeToRun=Vu;mh.waitFor=ut;mh.waitFor=ut;mh.deferred=vt;mh.deferred=vt;mh.convertCallbackFun=jo;mh.convertCallbackFun=jo;mh.convertCallbackFunWithManyArgs=Wu;mh.convertCallbackFunWithManyArgs=Wu;mh.chain=
An;mh.chain=An;mh.finally=Br;mh.promise_finally=Br;mh.parallel=xt;mh.parallel=xt;mh.default=yg;var Ms=lively.FreezerRuntime.recorderFor("lively.lang/Path.js");Ms.Path=nh;Ms.inspect=mb;Object.assign(Ms.Path.prototype,{get isPathAccessor(){return!0},fromPath:function(f){"string"===typeof f&&""!==f&&f!==this.splitter?(this._parts=f.split(this.splitter),this._path=f):Array.isArray(f)?(this._parts=[].concat(f),this._path=f.join(this.splitter)):(this._parts=[],this._path="");return this},setSplitter:function(f){f&&
(this.splitter=f);return this},map:function(f){this._mapper=f;return this},parts:function(){return this._parts},size:function(){return this._parts.length},slice:function(f,c){return Ms.Path(this.parts().slice(f,c))},normalizePath:function(){return this._path},isRoot:function(f){return 0===this._parts.length},isIn:function(f){return this.isRoot()?!0:(f=this.get(f,-1))&&f.hasOwnProperty(this._parts[this._parts.length-1])},equals:function(f){return f&&f.isPathAccessor&&this.parts().equals(f.parts())},
isParentPathOf:function(f){f=f&&f.isPathAccessor?f:Ms.Path(f);var c=this.parts();f=f.parts();for(var k=0;k<c.length;k++)if(c[k]!=f[k])return!1;return!0},relativePathTo:function(f){f=Ms.Path(f);return this.isParentPathOf(f)?f.slice(this.size(),f.size()):void 0},del:function(f){if(this.isRoot())return!1;for(var c=0;c<this._parts.length-1;c++){var k=this._parts[c];if(f.hasOwnProperty(k))f=f[k];else return!1}return delete f[this._parts[this._parts.length-1]]},withParentAndKeyDo:function(f,c,k){if(this.isRoot())return k(null,
null);for(var d=0;d<this._parts.length-1;d++){var h=this._parts[d];if(!f.hasOwnProperty(h)||"object"!==typeof f[h]&&"function"!==typeof f[h])if(c)f=f[h]={};else return k(null,h);else f=f[h]}return k(f,this._parts[this._parts.length-1])},set:function(f,c,k){return this.withParentAndKeyDo(f,k,function(d,h){return d?d[h]=c:void 0})},defineProperty:function(f,c,k){return this.withParentAndKeyDo(f,k,function(d,h){return d?Object.defineProperty(d,h,c):void 0})},get:function(f,c){var k=this;return(c?this._parts.slice(0,
c):this._parts).reduce(function(d,h){return d?k._mapper?k._mapper(h,d[h]):d[h]:d},f)},concat:function(f,c){return Ms.Path(this.parts().concat(Ms.Path(f,c).parts()))},toString:function(){return this.normalizePath()},serializeExpr:function(){return"lively.lang.Path("+Ms.inspect(this.parts())+")"},watch:function(f){if(f&&!this.isRoot()){var c=f.target,k=this.get(c,-1),d=this.parts().slice(-1)[0],h="propertyWatcher$"+d,n=k&&k.hasOwnProperty(h),b=f.uninstall,e=f.haltWhenChanged,m=f.showStack,a=k.__lookupGetter__(d),
g=k.__lookupSetter__(d);c&&d&&k&&(b?n&&(delete k[d],k[d]=k[h],delete k[h]):n||(a||g?console.log(k+'["'+d+'"] is a getter/setter, watching not support'):(k[h]=k[d],k.__defineSetter__(d,function(l){var q=k[h];if(f.onSet)f.onSet(l,q);q=k+"."+d+" changed: "+q+" -> "+l;m&&(q+="\n"+("undefined"!==typeof lively?lively.printStack():console.trace()));f.verbose&&console.log(q);if(e)debugger;return k[h]=l}),k.__defineGetter__(d,function(){if(f.onGet)f.onGet(k[h]);return k[h]}),console.log("Watcher for "+k+"."+
d+" installed"))))}},debugFunctionWrapper:function(f){var c=f.target,k=this.get(c,-1),d=this.parts().slice(-1)[0],h=void 0===f.haltWhenChanged?!0:f.haltWhenChanged,n=k&&d&&k[d],b=n&&n.isDebugFunctionWrapper;c&&d&&n&&k&&(f.uninstall?b&&(k[d]=k[d].debugTargetFunction,console.log("Uninstalled debugFunctionWrapper for "+k+"."+d)):b?console.log("debugFunctionWrapper for "+k+"."+d+" already installed"):(f=k[d]=n.wrap(function(e){var m=Array.from(arguments);if(h)debugger;return m.shift().apply(k,m)}),f.isDebugFunctionWrapper=
!0,f.debugTargetFunction=n,console.log("debugFunctionWrapper for "+k+"."+d+" installed")))}});Ms.default=nh;var xi=lively.FreezerRuntime.recorderFor("lively.lang/graph.js");xi.clone=Cr;xi.without=yt;xi.hull=sq;xi.subgraphReachableBy=fp;xi.invert=Dr;xi.sortByReference=Er;xi.reduce=tq;xi.random=Fr;xi.range=Vb;xi.shuffle=ub;xi.withoutAll=Vc;xi.flatten=zc;xi.uniq=Ra;xi.values=Qk;xi.clone=Cr;xi.clone=Cr;xi.without=yt;xi.without=yt;xi.hull=sq;xi.hull=sq;xi.subgraphReachableBy=fp;xi.subgraphReachableBy=
fp;xi.invert=Dr;xi.invert=Dr;xi.sortByReference=Er;xi.sortByReference=Er;xi.reduce=tq;xi.reduce=tq;xi.random=Fr;xi.random=Fr;var Ir=Object.freeze({__proto__:null,clone:Cr,without:yt,hull:sq,subgraphReachableBy:fp,invert:Dr,sortByReference:Er,reduce:tq,random:Fr});sa("bP",Ir);var Dh=lively.FreezerRuntime.recorderFor("lively.lang/interval.js");Dh.isInterval=Xu;Dh.sort=uq;Dh.compare=Bn;Dh.coalesce=Yu;Dh.coalesceOverlapping=Zu;Dh.mergeOverlapping=km;Dh.intervalsInRangeDo=Cn;Dh.intervalsInbetween=vq;Dh.mapToMatchingIndexes=
zt;Dh.benchmark=function(){function f(c,k,d){return c.name+" "+Dh.timeToRunN(function(){return c.apply(null,k,1E5)},d)+"ms"}return["Friday, 20. July 2012:\ncoalesceOverlapping: 0.0003ms\nintervalsInbetween: 0.002ms\nmapToMatchingIndexes: 0.02ms","vs.\n"+new Date+":",f(Dh.coalesceOverlapping,[[[9,10],[1,8],[3,7],[15,20],[14,21]]],1E5),f(Dh.intervalsInbetween,[0,10,[[8,10],[0,2],[3,5]]],1E5),f(Dh.mapToMatchingIndexes,[Dh.range(0,1E3).map(function(c){return[c,c+1]}),[[4,8],[500,504],[900,1004]]],1E3)].join("\n")};
Dh.range=Vb;Dh.GLOBAL="undefined"!==typeof System?System.global:"undefined"!==typeof window?window:global;Dh.isInterval=Xu;Dh.isInterval=Xu;Dh.sort=uq;Dh.sort=uq;Dh.compare=Bn;Dh.compare=Bn;Dh.coalesce=Yu;Dh.coalesce=Yu;Dh.coalesceOverlapping=Zu;Dh.coalesceOverlapping=Zu;Dh.mergeOverlapping=km;Dh.mergeOverlapping=km;Dh.intervalsInRangeDo=Cn;Dh.intervalsInRangeDo=Cn;Dh.intervalsInbetween=vq;Dh.intervalsInbetween=vq;Dh.mapToMatchingIndexes=zt;Dh.mapToMatchingIndexes=zt;var lB=Object.freeze({__proto__:null,
isInterval:Xu,sort:uq,compare:Bn,coalesce:Yu,coalesceOverlapping:Zu,mergeOverlapping:km,intervalsInRangeDo:Cn,intervalsInbetween:vq,mapToMatchingIndexes:zt}),Fm=lively.FreezerRuntime.recorderFor("lively.lang/array-projection.js");Fm.create=Ll;Fm.toArray=At;Fm.originalToProjectedIndex=Gr;Fm.projectedToOriginalIndex=ko;Fm.transformToIncludeIndex=wq;Fm.create=Ll;Fm.create=Ll;Fm.toArray=At;Fm.toArray=At;Fm.originalToProjectedIndex=Gr;Fm.originalToProjectedIndex=Gr;Fm.projectedToOriginalIndex=ko;Fm.projectedToOriginalIndex=
ko;Fm.transformToIncludeIndex=wq;Fm.transformToIncludeIndex=wq;var kB=Object.freeze({__proto__:null,create:Ll,toArray:At,originalToProjectedIndex:Gr,projectedToOriginalIndex:ko,transformToIncludeIndex:wq}),Qg=lively.FreezerRuntime.recorderFor("lively.lang/grid.js");Qg.get=Uj;Qg.set=Gm;Qg.getRow=Ym;Qg.setRow=Bt;Qg.getCol=S;Qg.setCol=ja;Qg.create=Ua;Qg.mapCreate=ob;Qg.forEach=Lb;Qg.map=Dc;Qg.toObjects=xd;Qg.tableFromObjects=je;Qg.benchmark=function(){var f=[],c=Qg.create(1E3,200,1);var k=Qg.timeToRunN(function(){Qg.forEach(c,
function(h){})},10);f.push("forEach: "+k.toFixed(2)+"ms");k=Qg.timeToRunN(function(){Qg.map(c,function(h,n,b){return n+b+Math.round(100*Math.random())})},10);f.push("map: "+k.toFixed(2)+"ms");var d=Qg.create(1E3,2E3);k=Qg.timeToRunN(function(){d=Array(1E3);for(var h=0;1E3>h;h++)d[h]=Array(2E3);Qg.forEach(c,function(n,b,e){d[b][e]=b+e+Math.round(100*Math.random())})},10);f.push("map with forEach: "+k+"ms");f.push("--= 2012-09-22 =--\nforEach: 14.9ms\nmap: 19.8ms\nmap with forEach: 38.7ms\n");return f.join("\n")};
Qg.arrayWithN=Wb;Qg.timeToRunN=cc;Qg.get=Uj;Qg.get=Uj;Qg.set=Gm;Qg.set=Gm;Qg.getRow=Ym;Qg.getRow=Ym;Qg.setRow=Bt;Qg.setRow=Bt;Qg.getCol=S;Qg.getCol=S;Qg.setCol=ja;Qg.setCol=ja;Qg.create=Ua;Qg.create=Ua;Qg.mapCreate=ob;Qg.mapCreate=ob;Qg.forEach=Lb;Qg.forEach=Lb;Qg.map=Dc;Qg.map=Dc;Qg.toObjects=xd;Qg.toObjects=xd;Qg.tableFromObjects=je;Qg.tableFromObjects=je;var Lw=Object.freeze({__proto__:null,get:Uj,set:Gm,getRow:Ym,setRow:Bt,getCol:S,setCol:ja,create:Ua,mapCreate:ob,forEach:Lb,map:Dc,toObjects:xd,
tableFromObjects:je}),Oj=lively.FreezerRuntime.recorderFor("lively.lang/tree.js");Oj.prewalk=Pe;Oj.postwalk=xf;Oj.find=tg;Oj.filter=Xf;Oj.map=gf;Oj.mapTree=gg;Oj.flatten=zc;Oj.detect=Oj.find;var SN=Oj.detect;Oj.prewalk=Pe;Oj.prewalk=Pe;Oj.postwalk=xf;Oj.postwalk=xf;Oj.find=tg;Oj.find=tg;Oj.detect=SN;Oj.detect=SN;Oj.filter=Xf;Oj.filter=Xf;Oj.map=gf;Oj.map=gf;Oj.mapTree=gg;Oj.mapTree=gg;var Hr=Object.freeze({__proto__:null,prewalk:Pe,postwalk:xf,find:tg,detect:SN,filter:Xf,map:gf,mapTree:gg});sa("a2",
Hr);var sA=lively.FreezerRuntime.recorderFor("lively.lang/events.js");sA.isNode="undefined"!==typeof process&&process.versions&&process.versions.node;sA.makeEmitter=sA.isNode?function(f,c){if(f.on&&f.removeListener)return f;var k="undefined"!==typeof System?System._nodeRequire("events"):require("events");Object.assign(f,k.EventEmitter.prototype);k.EventEmitter.call(f);c&&c.maxListenerLimit&&f.setMaxListeners(c.maxListenerLimit);return f}:function(f){if(f.on&&f.removeListener)return f;f.listeners=
{};f.on=function(c,k){k&&(f.listeners[c]||(f.listeners[c]=[]),f.listeners[c].push(k))};f.once=function(c,k){function d(){f.removeListener(c,d);k.apply(this,arguments)}if(k)f.on(c,d)};f.removeListener=function(c,k){f.listeners[c]&&(f.listeners[c]=f.listeners[c].filter(function(d){return d!==k}))};f.removeAllListeners=function(c){f.listeners[c]&&(f.listeners[c]=[])};f.emit=function(){var c=Array.prototype.slice.call(arguments),k=c.shift();(k=f.listeners[k])&&k.length&&k.forEach(function(d){try{d.apply(null,
c)}catch(h){console.error("Error in event handler: %s",h.stack||String(h))}})};return f};var az=sA.makeEmitter;sA.makeEmitter=az;sA.makeEmitter=az;var Kw=Object.freeze({__proto__:null,makeEmitter:az});sa("bk",Kw);var Ak=lively.FreezerRuntime.recorderFor("lively.lang/messenger.js");Ak.create=Yi;Ak.remove=vb;Ak.pluck=db;Ak.makeEmitter=az;Ak.newUUID=Vm;Ak.OFFLINE="offline";Ak.ONLINE="online";Ak.CONNECTING="connecting";Ak.create=Yi;Ak.create=Yi;var jB=Object.freeze({__proto__:null,create:Yi}),Rg=lively.FreezerRuntime.recorderFor("lively.lang/worker.js");
Rg.fork=Jk;Rg.create=ek;Rg.makeEmitter=az;Rg.newUUID=Vm;Rg.waitFor=Nj;Rg.messengerCreate=Yi;Rg.Closure=Ei;Rg.isNodejs="undefined"!==typeof require&&"undefined"!==typeof process;Rg.WorkerSetup={loadDependenciesBrowser:function(f){importScripts.apply("undefined"!==typeof self?self:this,f.scriptsToLoad||[])},loadDependenciesNodejs:function(f){(global.lively||(global.lively={})).lang=require(require("path").join(f.libLocation,"index"))},initBrowserGlobals:function(f){remoteWorker.send=function(c){postMessage(c)};
f="undefined"!==typeof self?self:this;f=f.Global=f;f.window=f;f.console=f.console||function(){var c={};["log","error","warn"].forEach(function(k){c[k]=function(){for(var d=arguments[0],h=1;h<arguments.length;h++)d=d.replace("%s",arguments[h]);remoteWorker.send({type:k,message:["[",k.toUpperCase(),"] ",d].join("")})}});return c}()},initOnMessageHandler:function(f){function c(k){k=k.data.data?k.data:k;if(remoteWorker.messenger)remoteWorker.messenger.onMessage(k);else"close"==k.action&&(remoteWorker.send({type:"closed",
workerReady:!1}),remoteWorker.close())}if(remoteWorker.on)remoteWorker.on("message",c);else remoteWorker.onmessage=c},initWorkerInterface:function(f){remoteWorker.callStringifiedFunction=function(c,k,d){try{var h=eval("("+c+")")}catch(e){d(Error("Cannot create function from string: "+e.stack||e));return}c=h.length===k.length+1;var n=lively.lang.fun.once(function(e,m){remoteWorker.isBusy=!1;d(e,m)});remoteWorker.isBusy=!0;c&&k.push(n);try{var b=h.apply(remoteWorker,k.concat([n]))}catch(e){n(e,null);
return}c||n(null,b)};remoteWorker.httpRequest=function(c){if(c.url){var k=new XMLHttpRequest,d=c.method||"GET";k.onreadystatechange=function(){4===k.readyState&&c.done&&c.done(k)};k.open(d,c.url);k.send()}else console.log("Error, httpRequest needs url")};remoteWorker.terminateIfNotBusyIn=function(c){setTimeout(function(){remoteWorker.isBusy?remoteWorker.terminateIfNotBusyIn(c):(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())},c)}},initWorkerMessenger:function(f){if(!f.useMessenger)return null;
if(!lively.lang.messenger)throw Error("worker.create requires messenger.js to be loaded!");if(!lively.lang.events)throw Error("worker.create requires events.js to be loaded!");return remoteWorker.messenger=lively.lang.messenger.create({services:{remoteEval:function(c,k){try{var d=eval(c.data.expr)}catch(h){d=h.stack||h}k.answer(c,{result:String(d)})},run:function(c,k){var d=c.data.func,h=c.data.args;d?remoteWorker.callStringifiedFunction(d,h,function(n,b){k.answer(c,{error:n?String(n):null,result:b})}):
k.answer(c,{error:"no funcString"})},close:function(c,k){k.answer(c,{status:"OK"});remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}},isOnline:function(){return!0},send:function(c,k){remoteWorker.send(c);k()},listen:function(c){c()},close:function(c){remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}})}};Rg.BrowserWorker={create:function(f){f=f||{};if(!f.libLocation&&!f.scriptsToLoad){var c=document.querySelector('script[src$="worker.js"]');if(!c)throw Error('Cannot find library path to start worker. Use worker.create({libLocation: "..."}) to explicitly define the path!');
f.libLocation=c.src.replace(/worker.js$/,"")}c=String(function(){self.onmessage=function(k){if("setup"!==k.data.action)throw Error("expected setup to be first message but got "+JSON.stringify(k.data));k=k.data.options||{};initBrowserGlobals(k);loadDependenciesBrowser(k);initOnMessageHandler(k);initWorkerInterface(k);initWorkerMessenger(k);postMessage({workerReady:!0})};__FUNCTIONDECLARATIONS__}).split("__lvVarRecorder.").join("").replace("__FUNCTIONDECLARATIONS__",[Rg.WorkerSetup.initBrowserGlobals,
Rg.WorkerSetup.loadDependenciesBrowser,Rg.WorkerSetup.initOnMessageHandler,Rg.WorkerSetup.initWorkerInterface,Rg.WorkerSetup.initWorkerMessenger].join("\n"));c="("+Rg.Closure.fromSource(c).getFuncSource()+")();";c=new Worker(function(k){try{var d=new Blob([k],{type:"text/javascript"})}catch(h){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,d=new BlobBuilder,d.append(k),d=d.getBlob()}return("undefined"!==typeof webkitURL?webkitURL:URL).createObjectURL(d)}(c));
(function(k,d){Rg.makeEmitter(d);k.scriptsToLoad||(k.scriptsToLoad="base.js events.js object.js collection.js function.js string.js number.js date.js messenger.js worker.js".split(" ").map(function(n){return k.libLocation+n}));var h=Object.keys(k).reduce(function(n,b){"function"!==typeof k[b]&&(n[b]=k[b]);return n},{});d.onmessage=function(n){void 0!==n.data.workerReady?(d.ready=!!n.data.workerReady,d.ready?d.emit("ready"):d.emit("close")):d.emit("message",n.data)};d.errors=[];d.onerror=function(n){console.error(n);
d.errors.push(n);d.emit("error",n)};d.postMessage({action:"setup",options:h})})(f,c);return c}};Rg.NodejsWorker={debug:!1,initCodeFileCreated:!1,create:function(f){f=f||{};var c,k=Rg.makeEmitter({ready:!1,errors:[],postMessage:function(d){c?k.ready?c.send(d):k.emit("error",Error("nodejs worker process not ready or already closed")):k.emit("error",Error("nodejs worker process not yet created"))}});Rg.NodejsWorker.startWorker(f,function(d,h){d?(k.ready=!1,k.emit("error",d)):(c=h,c.on("message",function(n){Rg.NodejsWorker.debug&&
console.log("[WORKER PARENT] got message:",n);k.emit("message",n)}),c.on("close",function(){console.log("[WORKER PARENT] worker closed");k.emit("close")}),c.on("error",function(n){console.log("[WORKER PARENT] error ",n);k.errors.push(n);k.emit("error",n)}),k.ready=!0,k.emit("ready"))});return k},workerSetupFunction:function(){var f=process;console.log("[WORKER] Starting init");f.on("message",function(c){if("setup"!==c.action)throw Error("expected setup to be first message but got "+JSON.stringify(c.data));
f.removeAllListeners("message");c=c.data.options||{};console.log("[WORKER] running setup with options",c);loadDependenciesNodejs(c);initOnMessageHandler(c);initWorkerInterface(c);initWorkerMessenger(c);f.send({workerReady:!0})});__FUNCTIONDECLARATIONS__},ensureInitCodeFile:function(f,c,k){var d=require("path"),h=require("os"),n=require("fs");h=d.join(h.tmpDir(),"lively-nodejs-workers/");var b=d.join(h,"nodejs-worker-init.js");Rg.NodejsWorker.initCodeFileCreated?n.exists(b,function(e){e?k(null,b):
Rg.NodejsWorker.createWorkerCodeFile(f,b,c,k)}):Rg.NodejsWorker.createWorkerCodeFile(f,b,c,k)},createWorkerCodeFile:function(f,c,k,d){f=require("path");var h=require("fs"),n=require("child_process").exec;n("mkdir -p "+f.dirname(c),function(b,e,m){b?d(Error(["[WORKER PARENT] Could not create worker temp dir:",e,m].join("\n"))):h.writeFile(c,k,function(a){Rg.NodejsWorker.debug&&console.log("worker code file %s created",c);Rg.NodejsWorker.initCodeFileCreated=!0;d(a,c)})})},startWorker:function(f,c){var k=
require("util"),d=require("child_process").fork,h=String(Rg.NodejsWorker.workerSetupFunction).replace("__FUNCTIONDECLARATIONS__",[Rg.WorkerSetup.loadDependenciesNodejs,Rg.WorkerSetup.initOnMessageHandler,Rg.WorkerSetup.initWorkerInterface,Rg.WorkerSetup.initWorkerMessenger].join("\n"));k=k.format("(%s)();\n",h);Rg.NodejsWorker.ensureInitCodeFile(f,k,function(n,b){if(n)return c(n);var e=d(b,{});Rg.NodejsWorker.debug&&console.log("worker forked");e.on("message",function(m){"pong"===m.action?console.log("[WORKER pong] ",
m):"log"===m.action&&console.log("[Message from WORKER] ",m.data)});e.once("message",function(m){Rg.NodejsWorker.debug&&console.log("worker setup done");c(null,e,m)});e.on("close",function(){Rg.NodejsWorker.debug&&console.log("[WORKER PARENT] worker closed")});e.send({action:"setup",data:{options:f}});global.WORKER=e})}};Rg.fork=Jk;Rg.fork=Jk;Rg.create=ek;Rg.create=ek;var iB=Object.freeze({__proto__:null,fork:Jk,create:ek}),Pd=lively.FreezerRuntime.recorderFor("lively.lang/index.js");Pd.createLivelyLangObject=
function(){return{chain:Pd.chain,noConflict:Pd.noConflict,installGlobals:Pd.installGlobals,uninstallGlobals:Pd.uninstallGlobals,globalInterfaceSpec:Pd.globalInterfaceSpec,toString:function(){return"[object lively.lang]"}}};Pd.globalInstall=gp;Pd.chain=Yf;Pd.createChain=function(f,c){return Object.keys(f).reduce(function(k,d){k[d]=function(){var h=Array.prototype.slice.call(arguments);h=f[d].apply(null,[c].concat(h));return Pd.chain(h)};return k},{value:function(){return c}})};Pd.noConflict=ng;Pd.installGlobals=
Zm;Pd.installProperty=function(f,c){if(!f.isIn(Pd.livelyLang))throw c=Error("property not provided by lively.lang: "+f),console.error(c.stack||c),c;f=f.get(Pd.livelyLang);if("function"===typeof f&&"prototype"===c.slice(-2,-1).toString()){var k=f;f=function(){var d=Array.prototype.slice.call(arguments);d.unshift(this);return k.apply(null,d)};f.toString=function(){return k.toString()}}c.set(Pd.GLOBAL,f,!0)};Pd.uninstallGlobals=xq;Pd.string=vh;Pd.num=Bk;Pd.fun=nl;Pd.Closure=Ei;Pd.arr=vf;Pd.obj=Pf;Pd.properties=
$m;Pd.date=Jr;Pd.promise=yg;Pd.Path=nh;Pd.graph=Ir;Pd.interval=lB;Pd.arrayProjection=kB;Pd.Group=Ml;Pd.grid=Lw;Pd.tree=Hr;Pd.events=Kw;Pd.messenger=jB;Pd.worker=iB;Pd.worker=iB;Pd.worker=iB;Pd.messenger=jB;Pd.messenger=jB;Pd.events=Kw;Pd.events=Kw;Pd.tree=Hr;Pd.tree=Hr;Pd.grid=Lw;Pd.grid=Lw;Pd.arrayProjection=kB;Pd.arrayProjection=kB;Pd.interval=lB;Pd.interval=lB;Pd.graph=Ir;Pd.graph=Ir;Pd.date=Jr;Pd.date=Jr;Pd.properties=$m;Pd.properties=$m;Pd.obj=Pf;Pd.obj=Pf;Pd.arr=vf;Pd.arr=vf;Pd.fun=nl;Pd.fun=
nl;Pd.num=Bk;Pd.num=Bk;Pd.string=vh;Pd.string=vh;Pd.Closure=Ei;Pd.Closure=Ei;Pd.promise=yg;Pd.promise=yg;Pd.Path=nh;Pd.Path=nh;Pd.Group=Ml;Pd.Group=Ml;Pd.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;Pd.isNode="undefined"!==typeof process&&process.env&&"function"===typeof process.exit;Pd.globalInterfaceSpec=[{action:"installMethods",target:"Array",sources:["arr"],methods:["from","genN","range","withN"]},{action:"installMethods",
target:"Array.prototype",sources:["arr"],methods:"all any batchify clear clone collect compact delimWith detect doAndContinue each equals filterByKey findAll first flatten forEachShowingProgress grep groupBy groupByKey histogram include inject intersect invoke last mapAsync mapAsyncSeries mask max min mutableCompact nestedDelay partition pluck pushAll pushAllAt pushAt pushIfNotIncluded reMatches reject rejectByKey remove removeAt replaceAt rotate shuffle size sortBy sortByKey sum swap toArray toTuples union uniq uniqBy without withoutAll zip".split(" "),
alias:[["select","filter"]]},{action:"installMethods",target:"Date",sources:["date"],methods:[]},{action:"installMethods",target:"Date.prototype",sources:["date"],methods:["equals","format","relativeTo"]},{action:"installMethods",target:"Function",sources:["fun"],methods:["fromString"]},{action:"installMethods",target:"Function.prototype",sources:["fun"],methods:"addToObject argumentNames asScript asScriptOf binds curry delay functionNames localFunctionNames getOriginal getVarMapping logCalls logCompletion logErrors qualifiedMethodName setProperty traceCalls wrap".split(" ")},
{action:"installMethods",target:"Number",sources:["num"],methods:[]},{action:"installMethods",target:"Number.prototype",sources:["num"],methods:["detent","randomSmallerInteger","roundTo","toDegrees","toRadians"]},{action:"installMethods",target:"Object",sources:["obj"],methods:"addScript clone deepCopy extend inherit isArray isBoolean isElement isEmpty isFunction isNumber isObject isRegExp isString isUndefined merge mergePropertyInHierarchy values valuesInPropertyHierarchy".split(" ")},{action:"installMethods",
target:"Object.prototype",sources:["obj"],methods:[]},{action:"installMethods",target:"String.prototype",sources:["string"],methods:"camelize capitalize digitValue empty hashCode include pad regExpEscape startsWithVowel succ times toArray toQueryParams truncate".split(" ")},{action:"installObject",target:"Numbers",source:"num",methods:"average between convertLength humanReadableByteSize median normalRandom parseLength random sort".split(" ")},{action:"installObject",target:"Properties",source:"properties",
methods:"all allOwnPropertiesOrFunctions allProperties any forEachOwn hash nameFor own ownValues values".split(" ")},{action:"installObject",target:"Strings",source:"string",methods:"camelCaseString createDataURI diff format formatFromArray indent lineIndexComputer lines md5 newUUID nonEmptyLines pad paragraphs peekLeft peekRight print printNested printTable printTree quote reMatches stringMatch tableize tokens unescapeCharacterEntities withDecimalPrecision".split(" ")},{action:"installObject",target:"Objects",
source:"obj",methods:"asObject equals inspect isMutableType safeToString shortPrintStringOf typeStringOf".split(" ")},{action:"installObject",target:"Functions",source:"fun",methods:"all compose composeAsync createQueue debounce debounceNamed either extractBody flip notYetImplemented once own throttle throttleNamed timeToRun timeToRunN waitFor workerWithCallbackQueue wrapperChain".split(" ")},{action:"installObject",target:"Grid",source:"grid"},{action:"installObject",target:"Interval",source:"interval"},
{action:"installObject",target:"lively.ArrayProjection",source:"arrayProjection"},{action:"installObject",target:"lively.Closure",source:"Closure"},{action:"installObject",target:"lively.Grouping",source:"Group"},{action:"installObject",target:"lively.PropertyPath",source:"Path"},{action:"installObject",target:"lively.Worker",source:"worker"},{action:"installObject",target:"lively.Class",source:"classHelper"}];var kH=Pd.createLivelyLangObject();Pd.livelyLang=kH;Pd.livelyLang=kH;Pd.livelyLang=kH;Pd.globalInstall=
gp;Pd.globalInstall=gp;Pd.chain=Yf;Pd.chain=Yf;Pd.noConflict=ng;Pd.noConflict=ng;Pd.installGlobals=Zm;Pd.installGlobals=Zm;Pd.uninstallGlobals=xq;Pd.uninstallGlobals=xq;var a0=Object.freeze({__proto__:null,worker:iB,messenger:jB,events:Kw,tree:Hr,grid:Lw,arrayProjection:kB,interval:lB,graph:Ir,date:Jr,properties:$m,obj:Pf,arr:vf,fun:nl,num:Bk,string:vh,Closure:Ei,promise:yg,Path:nh,Group:Ml,livelyLang:kH,globalInstall:gp,chain:Yf,noConflict:ng,installGlobals:Zm,uninstallGlobals:xq}),Sh=lively.FreezerRuntime.recorderFor("lively.graphics/convert-css-length.js");
Sh.parseUnit=function(f,c){c||(c=[0,""]);f=String(f);var k=parseFloat(f,10);c[0]=k;c[1]=f.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return c};Sh.unit=function(f){return Sh.parseUnit(f)[1]};Sh.unitLess=function(f){return Sh.parseUnit(f)[0]};Sh.genericCssLengthParser=Ly;Sh.cssLengthToPixels=Ct;Sh.baseFontSize="16px";if(System.get("@system-env").browser)try{Sh.newBaseFontSize=Sh.genericCssLengthParser(Sh.baseFontSize)(window.getComputedStyle(document.body).fontSize),Sh.newBaseFontSize&&"NaN"!==Sh.newBaseFontSize.slice(0,
3)&&(Sh.baseFontSize=Sh.newBaseFontSize)}catch(f){}Sh.genericCssLengthParser=Ly;Sh.genericCssLengthParser=Ly;var TN=Sh.genericCssLengthParser(Sh.baseFontSize);Sh.parseCssLength=TN;Sh.parseCssLength=TN;Sh.parseCssLength=TN;Sh.cssLengthToPixels=Ct;Sh.cssLengthToPixels=Ct;var Dd=lively.FreezerRuntime.recorderFor("lively.graphics/geometry-2d.js");Dd.rect=Ii;Dd.pt=oh;Dd.num=Bk;Dd.string=vh;Dd.grid=Lw;Dd.cssLengthToPixels=Ct;var $f=function(f,c){this.x=f||0;this.y=c||0};$f.ensure=function(f){return f instanceof
Dd.Point?f:new Dd.Point(f.x,f.y)};$f.polar=function(f,c){return new Dd.Point(f*Math.cos(c),f*Math.sin(c))};$f.random=function(f){return new Dd.Point(Dd.num.randomSmallerInteger(f.x),Dd.num.randomSmallerInteger(f.y))};$f.fromLiteral=function(f){return Dd.pt(f.x,f.y)};$f.fromTuple=function(f){return Dd.pt(f[0],f[1])};$f.prototype.getX=function(){return this.x};$f.prototype.getY=function(){return this.y};$f.prototype.toFixed=function(f){return new Dd.Point(this.x.toFixed(f),this.y.toFixed(f))};$f.prototype.addPt=
function(f){return new Dd.Point(this.x+f.x,this.y+f.y)};$f.prototype.addXY=function(f,c){return new Dd.Point(this.x+f,this.y+c)};$f.prototype.midPt=function(f){return new Dd.Point((this.x+f.x)/2,(this.y+f.y)/2)};$f.prototype.subPt=function(f){return new Dd.Point(this.x-f.x,this.y-f.y)};$f.prototype.subXY=function(f,c){return new Dd.Point(this.x-f,this.y-c)};$f.prototype.scaleBy=function(f,c){return new Dd.Point(this.x*f,this.y*(c||f))};$f.prototype.scaleByPt=function(f){return new Dd.Point(this.x*
f.x,this.y*f.y)};$f.prototype.negated=function(){return new Dd.Point(-this.x,-this.y)};$f.prototype.inverted=function(){return new Dd.Point(1/this.x,1/this.y)};$f.prototype.invertedSafely=function(){return new Dd.Point(this.x&&1/this.x,this.y&&1/this.y)};$f.prototype.lessPt=function(f){return this.x<f.x&&this.y<f.y};$f.prototype.leqPt=function(f){return this.x<=f.x&&this.y<=f.y};$f.prototype.eqPt=function(f){return this.x==f.x&&this.y==f.y};$f.prototype.equals=function(f){return this.x==f.x&&this.y==
f.y};$f.prototype.withX=function(f){return Dd.pt(f,this.y)};$f.prototype.withY=function(f){return Dd.pt(this.x,f)};$f.prototype.copy=function(){return new Dd.Point(this.x,this.y)};$f.prototype.minPt=function(f,c){c||(c=new Dd.Point(0,0));c.x=Math.min(this.x,f.x);c.y=Math.min(this.y,f.y);return c};$f.prototype.maxPt=function(f,c){c||(c=new Dd.Point(0,0));c.x=Math.max(this.x,f.x);c.y=Math.max(this.y,f.y);return c};$f.prototype.random=function(){return Dd.Point.random(this)};$f.prototype.normalized=
function(){var f=this.r();return Dd.pt(this.x/f,this.y/f)};$f.prototype.fastNormalized=function(){var f=this.fastR();return Dd.pt(this.x/f,this.y/f)};$f.prototype.dotProduct=function(f){return this.x*f.x+this.y*f.y};$f.prototype.matrixTransform=function(f,c){var k=f.a*this.x+f.c*this.y+f.e;f=f.b*this.x+f.d*this.y+f.f;return c?Object.assign(c,{x:k,y:f}):Dd.pt(k,f)};$f.prototype.matrixTransformDirection=function(f,c){var k=f.a*this.x+f.c*this.y;f=f.b*this.x+f.d*this.y;return c?Object.assign(c,{x:k,
y:f}):Dd.pt(k,f)};$f.prototype.griddedBy=function(f){return Dd.pt(this.x-this.x%f.x,this.y-this.y%f.y)};$f.prototype.roundTo=function(f){return new Dd.Point(Dd.num.roundTo(this.x,f),Dd.num.roundTo(this.y,f))};$f.prototype.dist=function(f){var c=this.x-f.x;f=this.y-f.y;return Math.sqrt(c*c+f*f)};$f.prototype.distSquared=function(f){var c=this.x-f.x;f=this.y-f.y;return c*c+f*f};$f.prototype.nearestPointOnLineBetween=function(f,c){if(f.x==c.x)return Dd.pt(f.x,this.y);if(f.y==c.y)return Dd.pt(this.x,
f.y);var k=f.x;f=f.y;var d=c.x-k;c=c.y-f;var h=((this.y-f)/d+(this.x-k)/c)/(d/c+c/d);return Dd.pt(k+h*d,f+h*c)};$f.prototype.interpolate=function(f,c,k){return void 0===k||k?Dd.pt(Dd.num.interpolate(f,this.x,c.x),Dd.num.interpolate(f,this.y,c.y)):Dd.Point.polar(Dd.num.interpolate(f,this.r(),c.r()),Dd.num.interpolate(f,this.theta(),c.theta()))};$f.prototype.r=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};$f.prototype.fastR=function(){for(var f=this.x*this.x+this.y*this.y,c=17,k=0;6>k;k++)c=
(c+f/c)/2;return c};$f.prototype.theta=function(){return Math.atan2(this.y,this.x)};$f.prototype.asRectangle=function(){return new Dd.Rectangle(this.x,this.y,0,0)};$f.prototype.extent=function(f){return new Dd.Rectangle(this.x,this.y,f.x,f.y)};$f.prototype.extentAsRectangle=function(){return new Dd.Rectangle(0,0,this.x,this.y)};$f.prototype.lineTo=function(f){return new Dd.Line(this,f)};$f.prototype.toTuple=function(){return[this.x,this.y]};$f.prototype.toLiteral=function(){return{x:this.x,y:this.y}};
$f.prototype.toString=function(f){return void 0===f||f?Dd.string.format("pt(%1.f,%1.f)",this.x,this.y):Dd.string.format("pt(%10.d,%10.d)",this.x,this.y)};$f.prototype.inspect=function(){return JSON.stringify(this)};$f.prototype.__serialize__=function(){return{__expr__:this.toString(!1),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}};$jscomp.global.Object.defineProperties($f.prototype,{isPoint:{configurable:!0,enumerable:!0,get:function(){return!0}}});sa("ae",$f);Dd.Point=$f;var ee=function(f,
c,k,d){this.x=f||0;this.y=c||0;this.width=k||0;this.height=d||0};ee.fromAny=function(f,c){return Dd.rect(f.minPt(c),f.maxPt(c))};ee.fromLiteral=function(f){return new Dd.Rectangle(f.x,f.y,f.width,f.height)};ee.fromTuple=function(f){return new Dd.Rectangle(f[0],f[1],f[2],f[3])};ee.unionPts=function(f){for(var c=f[0],k=f[0],d=1;d<f.length;d++)c=c.minPt(f[d]),k=k.maxPt(f[d]);return Dd.rect(c,k)};ee.ensure=function(f){return f instanceof Dd.Rectangle?f:new Dd.Rectangle(f.x,f.y,f.width,f.height)};ee.fromElement=
function(f){if("function"===typeof f.getBoundingClientRect){var c=f.getBoundingClientRect();return Dd.rect(c.left,c.top,c.width,c.height)}if("http://www.w3.org/1999/xhtml"==f.namespaceURI){c=Dd.cssLengthToPixels(f.style.left||"0px");var k=Dd.cssLengthToPixels(f.style.top||"0px"),d=Dd.cssLengthToPixels(f.style.width||"0px");f=Dd.cssLengthToPixels(f.style.hieght||"0px");return new Dd.Rectangle(c,k,d,f)}if("http://www.w3.org/2000/svg"==f.namespaceURI)return new Dd.Rectangle(f.x.baseVal.value,f.y.baseVal.value,
f.width.baseVal.value,f.height.baseVal.value);throw Error("Cannot create Rectangle from "+f);};ee.inset=function(f,c,k,d){void 0===c&&(c=f);void 0===k&&(k=f);void 0===d&&(d=c);return new Dd.Rectangle(f,c,k-f,d-c)};ee.prototype.getX=function(){return this.x};ee.prototype.getY=function(){return this.y};ee.prototype.getWidth=function(){return this.width};ee.prototype.getHeight=function(){return this.height};ee.prototype.copy=function(){return new Dd.Rectangle(this.x,this.y,this.width,this.height)};ee.prototype.toFixed=
function(f){return new Dd.Rectangle(this.x.toFixed(f),this.y.toFixed(f),this.width.toFixed(f),this.height.toFixed(f))};ee.prototype.withWidth=function(f){return new Dd.Rectangle(this.x,this.y,f,this.height)};ee.prototype.withHeight=function(f){return new Dd.Rectangle(this.x,this.y,this.width,f)};ee.prototype.withX=function(f){return new Dd.Rectangle(f,this.y,this.width,this.height)};ee.prototype.withY=function(f){return new Dd.Rectangle(this.x,f,this.width,this.height)};ee.prototype.withExtent=function(f){return new Dd.Rectangle(this.x,
this.y,f.x,f.y)};ee.prototype.withTopLeft=function(f){return Dd.Rectangle.fromAny(f,this.bottomRight())};ee.prototype.withTopRight=function(f){return Dd.Rectangle.fromAny(this.bottomLeft(),f)};ee.prototype.withBottomRight=function(f){return Dd.Rectangle.fromAny(f,this.topLeft())};ee.prototype.withBottomLeft=function(f){return Dd.Rectangle.fromAny(f,this.topRight())};ee.prototype.withLeftCenter=function(f){return new Dd.Rectangle(f.x,this.y,this.width+(this.x-f.x),this.height)};ee.prototype.withRightCenter=
function(f){return new Dd.Rectangle(this.x,this.y,f.x-this.x,this.height)};ee.prototype.withTopCenter=function(f){return new Dd.Rectangle(this.x,f.y,this.width,this.height+(this.y-f.y))};ee.prototype.withBottomCenter=function(f){return new Dd.Rectangle(this.x,this.y,this.width,f.y-this.y)};ee.prototype.withCenter=function(f){return new Dd.Rectangle(f.x-this.width/2,f.y-this.height/2,this.width,this.height)};ee.prototype.insetBy=function(f){return new Dd.Rectangle(this.x+f,this.y+f,this.width-2*f,
this.height-2*f)};ee.prototype.insetByPt=function(f){return new Dd.Rectangle(this.x+f.x,this.y+f.y,this.width-2*f.x,this.height-2*f.y)};ee.prototype.grid=function(f,c){var k=this.width/c,d=this.height/f;return Dd.grid.mapCreate(f,c,function(h,n){return new Dd.Rectangle(k*n,d*h,k,d)})};ee.prototype.divide=function(f){var c=this;return f.map(function(k){return Dd.rect(c.x+c.width*k.x,c.y+c.height*k.y,c.width*k.width,c.height*k.height)})};ee.prototype.toTuple=function(){return[this.x,this.y,this.width,
this.height]};ee.prototype.lineTo=function(f){var c=this.center(),k=f.center();k=c.lineTo(k);c=this.lineIntersection(k)[0];f=f.lineIntersection(k)[0];return c&&f&&c.lineTo(f)};ee.prototype.equals=function(f){return f?this.x==f.x&&this.y==f.y&&this.width==f.width&&this.height==f.height:!1};ee.prototype.inspect=function(){return JSON.stringify(this)};ee.prototype.topLeft=function(){return new Dd.Point(this.x,this.y)};ee.prototype.topRight=function(){return new Dd.Point(this.maxX(),this.y)};ee.prototype.bottomRight=
function(){return new Dd.Point(this.maxX(),this.maxY())};ee.prototype.bottomLeft=function(){return new Dd.Point(this.x,this.maxY())};ee.prototype.leftCenter=function(){return new Dd.Point(this.x,this.center().y)};ee.prototype.rightCenter=function(){return new Dd.Point(this.maxX(),this.center().y)};ee.prototype.topCenter=function(){return new Dd.Point(this.center().x,this.y)};ee.prototype.bottomCenter=function(){return new Dd.Point(this.center().x,this.maxY())};ee.prototype.extent=function(){return new Dd.Point(this.width,
this.height)};ee.prototype.center=function(){return new Dd.Point(this.x+this.width/2,this.y+this.height/2)};ee.prototype.topEdge=function(){return new Dd.Line(this.topLeft(),this.topRight())};ee.prototype.bottomEdge=function(){return new Dd.Line(this.bottomLeft(),this.bottomRight())};ee.prototype.leftEdge=function(){return new Dd.Line(this.topLeft(),this.bottomLeft())};ee.prototype.rightEdge=function(){return new Dd.Line(this.topRight(),this.bottomRight())};ee.prototype.edges=function(){return[this.topEdge(),
this.rightEdge(),this.bottomEdge(),this.leftEdge()]};ee.prototype.allPoints=function(){for(var f=this.x,c=this.y,k=this.width,d=this.height,h=[],n=c;n<c+d;n++)for(var b=f;b<f+k;b++)h.push(Dd.pt(b,n));return h};ee.prototype.isNonEmpty=function(f){return 0<this.width&&0<this.height};ee.prototype.containsRect=function(f){return this.x<=f.x&&this.y<=f.y&&f.maxX()<=this.maxX()&&f.maxY()<=this.maxY()};ee.prototype.intersects=function(f){return this.intersection(f).isNonEmpty()};ee.prototype.containsPoint=
function(f){return this.x<=f.x&&f.x<=this.x+this.width&&this.y<=f.y&&f.y<=this.y+this.height};ee.prototype.translatedBy=function(f){return new Dd.Rectangle(this.x+f.x,this.y+f.y,this.width,this.height)};ee.prototype.scaleByRect=function(f){return new Dd.Rectangle(this.x+f.x*this.width,this.y+f.y*this.height,f.width*this.width,f.height*this.height)};ee.prototype.scaleRectIn=function(f){return new Dd.Rectangle((this.x-f.x)/f.width,(this.y-f.y)/f.height,this.width/f.width,this.height/f.height)};ee.prototype.scaleRectTo=
function(f){var c,k;this.width>this.height?k=this.width:c=this.height;f=k?f.width/k:f.height/c;return this.withExtent(this.extent().scaleBy(f)).withCenter(this.center())};ee.prototype.expandBy=function(f){return this.insetBy(0-f)};ee.prototype.translateForInclusion=function(f){var c=f.x,k=f.y,d=c+f.width,h=k+f.height;d>this.right()&&(c-=d-this.right());h>this.bottom()&&(k-=h-this.bottom());c<this.x&&(c=this.x);k<this.y&&(k=this.y);return Dd.rect(c,k,f.width,f.height)};ee.prototype.transformRectForInclusion=
function(f){var c=this.topLeft().maxPt(f.topLeft());f=c.addPt(f.extent());f=this.bottomRight().minPt(f);return Dd.rect(c,f)};ee.prototype.insetByRect=function(f){return new Dd.Rectangle(this.x+f.left(),this.y+f.top(),this.width-(f.left()+f.right()),this.height-(f.top()+f.bottom()))};ee.prototype.outsetByRect=function(f){return new Dd.Rectangle(this.x-f.left(),this.y-f.top(),this.width+(f.left()+f.right()),this.height+(f.top()+f.bottom()))};ee.prototype.interpolate=function(f,c){var k=this.topLeft(),
d=this.bottomRight(),h=c.topLeft();c=c.bottomRight();return Dd.Rectangle.fromAny(k.interpolate(f,h),d.interpolate(f,c))};ee.prototype.intersection=function(f){var c=Math.max(this.x,f.x),k=Math.max(this.y,f.y);return new Dd.Rectangle(c,k,Math.min(this.x+this.width,f.x+f.width)-c,Math.min(this.y+this.height,f.y+f.height)-k)};ee.prototype.union=function(f){return Dd.rect(this.topLeft().minPt(f.topLeft()),this.bottomRight().maxPt(f.bottomRight()))};ee.prototype.lineIntersection=function(f){return this.edges().map(function(c){return c.intersection(f)}).filter(function(c){return!!c})};
ee.prototype.dist=function(f){var c=this.closestPointToPt(f.center());f=f.closestPointToPt(c);return c.dist(f)};ee.prototype.relativeToAbsPoint=function(f){return new Dd.Point(this.x+this.width*f.x,this.y+this.height*f.y)};ee.prototype.closestPointToPt=function(f){return Dd.pt(Math.min(Math.max(this.x,f.x),this.maxX()),Math.min(Math.max(this.y,f.y),this.maxY()))};ee.prototype.maxX=function(){return this.x+this.width};ee.prototype.maxY=function(){return this.y+this.height};ee.prototype.realWidth=function(){return 0>
this.x?-this.x+this.width:this.width};ee.prototype.realHeight=function(){return 0>this.y?-this.y+this.height:this.height};ee.prototype.area=function(){return(0>this.width&&0>this.height?-1:1)*this.width*this.height};ee.prototype.randomPoint=function(){return Dd.Point.random(Dd.pt(this.width,this.height)).addPt(this.topLeft())};ee.prototype.constrainPt=function(f){return f.maxPt(this.topLeft()).minPt(this.bottomRight())};ee.prototype.left=function(){return this.x};ee.prototype.right=function(){return this.maxX()};
ee.prototype.top=function(){return this.y};ee.prototype.bottom=function(){return this.maxY()};ee.prototype.toInsetTuple=function(){return[this.left(),this.top(),this.right(),this.bottom()]};ee.prototype.toAttributeValue=function(f){f=.01;var c=[this.left()];this.top()===this.bottom()&&this.left()===this.right()?this.top()===this.left()&&c.push(this.top()):c=c.concat([this.top(),this.right(),this.bottom()]);return c.invoke("roundTo",f||.01)};ee.prototype.toLiteral=function(){return{x:this.x,y:this.y,
width:this.width,height:this.height}};ee.prototype.partNamed=function(f){return this[f].call(this)};ee.prototype.withPartNamed=function(f,c){return this[this.setterName(f)].call(this,c)};ee.prototype.setterName=function(f){return"with"+f[0].toUpperCase()+f.slice(1)};ee.prototype.partNameNear=function(f,c,k){f=this.partNameNearest(f,c);return c.dist(this.partNamed(f))<k?f:null};ee.prototype.partNameNearest=function(f,c){for(var k=1E99,d,h=0;h<f.length;h++){d=f[h];var n=c.dist(this.partNamed(d));if(n<
k){var b=d;k=n}}return b};ee.prototype.toString=function(){return Dd.string.format("rect(%s,%s,%s,%s)",this.x,this.y,this.width,this.height)};ee.prototype.__serialize__=function(){return{__expr__:this.toString(),bindings:{"lively.graphics/geometry-2d.js":["rect"]}}};$jscomp.global.Object.defineProperties(ee.prototype,{corners:{configurable:!0,enumerable:!0,get:function(){return["topLeft","topRight","bottomRight","bottomLeft"]}},sides:{configurable:!0,enumerable:!0,get:function(){return["leftCenter",
"rightCenter","topCenter","bottomCenter"]}},isRectangle:{configurable:!0,enumerable:!0,get:function(){return!0}}});sa("$",ee);Dd.Rectangle=ee;var Gj=function(f,c,k){f?f instanceof Dd.Point?(c=c||0,void 0===k&&(k=Dd.pt(1,1)),this.a=this.ensureNumber(k.x*Math.cos(c)),this.b=this.ensureNumber(k.y*Math.sin(c)),this.c=this.ensureNumber(k.x*-Math.sin(c)),this.d=this.ensureNumber(k.y*Math.cos(c)),this.e=this.ensureNumber(f.x),this.f=this.ensureNumber(f.y),1<this.a&&(this.a=Math.round(this.a*Math.pow(10,
2))/Math.pow(10,2)),1<this.d&&(this.d=Math.round(this.d*Math.pow(10,2))/Math.pow(10,2))):this.fromMatrix(f):(this.a=this.d=1,this.b=this.c=this.e=this.f=0)};Gj.prototype.copy=function(){return new Dd.Transform(this)};Gj.prototype.fromMatrix=function(f){this.a=this.ensureNumber(f.a);this.b=this.ensureNumber(f.b);this.c=this.ensureNumber(f.c);this.d=this.ensureNumber(f.d);this.e=this.ensureNumber(f.e);this.f=this.ensureNumber(f.f)};Gj.prototype.getRotation=function(){var f=Dd.num.toDegrees(Math.atan2(-this.c,
this.a));return Math.abs(f)<this.eps?0:f};Gj.prototype.getScale=function(){var f=this.a,c=this.c;f=Math.sqrt(f*f+c*c);return Math.abs(f-1)<this.eps?1:f};Gj.prototype.getScalePoint=function(){var f=this.a,c=this.b,k=this.c,d=this.d,h=Math.atan2(-k,f);return Dd.pt(Math.sqrt(f*f+k*k),Math.abs(c)>Math.abs(d)?c/Math.sin(h):d/Math.cos(h))};Gj.prototype.getTranslation=function(){return Dd.pt(this.e,this.f)};Gj.prototype.isTranslation=function(){return 1==this.a&&0==this.b&&0==this.c&&1==this.d};Gj.prototype.toSVGAttributeValue=
function(){var f=this.getTranslation();f="translate("+f.x+","+f.y+")";var c=this.getRotation(),k=this.getScalePoint();0!=c&&(f+=" rotate("+this.getRotation()+")");if(1!=k.x||1!=k.y)f+=" scale("+k.x+","+k.y+")";return f};Gj.prototype.toCSSValue=function(f){var c="",k=this.getTranslation();c+="translate("+k.x.toFixed(2)+"px,"+k.y.toFixed(2)+"px)";if(f){k=f.width/2;var d=f.height/2;c+=" translate("+k.toFixed(2)+"px,"+d.toFixed(2)+"px)"}0!=this.getRotation()&&(c+=" rotate("+this.getRotation().toFixed(2)+
"deg)");f&&(k=f.width/2,d=f.height/2,c+=" translate("+(-1*k).toFixed(2)+"px,"+(-1*d).toFixed(2)+"px)");f=this.getScalePoint();if(1!=f.x||1!=f.y)c+=" scale("+f.x.toFixed(2)+","+f.y.toFixed(2)+")";return c};Gj.prototype.toCSSTransformString=function(){var f=this.getRotation(),c=this.getScale();return"translate("+this.e+"px,"+this.f+"px) rotate("+f+"deg) scale("+c+","+c+")"};Gj.prototype.toString=function(){return this.toCSSTransformString()};Gj.prototype.toMatrix=function(){return this.copy()};Gj.prototype.transformPoint=
function(f,c){return f.matrixTransform(this,c)};Gj.prototype.transformDirection=function(f,c){return f.matrixTransformDirection(this,c)};Gj.prototype.matrixTransformForMinMax=function(f,c,k){var d=this.a*f.x+this.c*f.y+this.e;f=this.b*f.x+this.d*f.y+this.f;d>k.x&&(k.x=d);f>k.y&&(k.y=f);d<c.x&&(c.x=d);f<c.y&&(c.y=f)};Gj.prototype.transformRectToRect=function(f){var c=Dd.pt(Infinity,Infinity),k=Dd.pt(-Infinity,-Infinity);this.matrixTransformForMinMax(f.topLeft(),c,k);this.matrixTransformForMinMax(f.bottomRight(),
c,k);this.isTranslation()||(this.matrixTransformForMinMax(f.topRight(),c,k),this.matrixTransformForMinMax(f.bottomLeft(),c,k));return Dd.rect(c,k)};Gj.prototype.preConcatenate=function(f){var c=this.matrix_||this.toMatrix();this.a=f.a*c.a+f.c*c.b;this.b=f.b*c.a+f.d*c.b;this.c=f.a*c.c+f.c*c.d;this.d=f.b*c.c+f.d*c.d;this.e=f.a*c.e+f.c*c.f+f.e;this.f=f.b*c.e+f.d*c.f+f.f;this.matrix_=this.toMatrix();return this};Gj.prototype.invert=function(){var f=this.copy(),c=1/(f.a*f.d-f.c*f.b);this.a=f.d*c;this.b=
-f.b*c;this.c=-f.c*c;this.d=f.a*c;this.e=(f.c*f.f-f.e*f.d)*c;this.f=-(f.a*f.f-f.b*f.e)*c;return this};Gj.prototype.inverse=function(){var f=this.matrix_||this.toMatrix();f=new this.constructor(f);f.invert();return f};Gj.prototype.ensureNumber=function(f){if(isNaN(f))throw Error("not a number");return f};Gj.prototype.__serialize__=function(){return{__expr__:"new Transform({a: "+this.a+", b: "+this.b+", c: "+this.c+", d: "+this.d+", e: "+this.e+", f: "+this.f+"})",bindings:{"lively.graphics/geometry-2d.js":["Transform"]}}};
$jscomp.global.Object.defineProperties(Gj.prototype,{exp:{configurable:!0,enumerable:!0,get:function(){return 1E-4}},isTransform:{configurable:!0,enumerable:!0,get:function(){return!0}}});Dd.Transform=Gj;var Cl=function(f,c){this.start=f;this.end=c};Cl.fromCoords=function(f,c,k,d){return new Dd.Line(Dd.pt(f,c),Dd.pt(k,d))};Cl.prototype.withStart=function(f){return new Dd.Line(f,this.end)};Cl.prototype.withEnd=function(f){return new Dd.Line(this.start,f)};Cl.prototype.sampleN=function(f){f=f||10;for(var c=
this.end.subPt(this.start).scaleBy(1/f),k=[],d=0;d<=f;d++)k.push(this.start.addPt(c.scaleBy(d)));return k};Cl.prototype.sample=function(f){return this.sampleN(this.length()/f)};Cl.prototype.length=function(){return this.start.dist(this.end)};Cl.prototype.equals=function(f){return f?this.start.eqPt(f.start)&&this.end.eqPt(f.end):!1};Cl.prototype.distanceFromLine=function(f){var c=this.start.x,k=this.start.y,d=this.end.x,h=this.end.y;return Math.abs((h-k)*f.x-(d-c)*f.y+d*k-h*c)/Math.sqrt(Math.pow(h-
k,2)+Math.pow(d-c,2))};Cl.prototype.includesPoint=function(f,c){var k=this.start.x,d=this.start.y,h=this.end.x,n=this.end.y,b=f.x;f=f.y;var e=0===(h-k)*(f-d)-(b-k)*(n-d);if(c||!e)return e;c=Math.min(d,n);e=Math.max(k,h);d=Math.max(d,n);return Math.min(k,h)<=b&&b<=e&&c<=f&&f<=d};Cl.prototype.intersection=function(f,c){var k=this.start,d=this.end,h=f.start,n=f.end;f=k.x;k=k.y;var b=d.x;d=d.y;var e=h.x;h=h.y;var m=n.x;n=n.y;var a=((f*d-k*b)*(e-m)-(f-b)*(e*n-h*m))/((f-b)*(h-n)-(k-d)*(e-m)),g=((f*d-k*
b)*(h-n)-(k-d)*(e*n-h*m))/((f-b)*(h-n)-(k-d)*(e-m));return Infinity!==a&&Infinity!==g&&(c||Dd.num.between(a,f,b,1E-4)&&Dd.num.between(g,k,d,1E-4)&&Dd.num.between(a,e,m,1E-4)&&Dd.num.between(g,h,n,1E-4))?Dd.pt(a,g):null};Cl.prototype.perpendicularLine=function(f,c,k){f=void 0===f?0:f;c=void 0===c?1:c;k=void 0===k?"cc":k;var d=this.start,h=this.toVector();f=d.addPt(h.scaleBy(f));k=h.theta()+("cc"===k?-1:1)*Math.PI/2;return new Dd.Line(f,f.addPt(Dd.Point.polar(c,k)))};Cl.prototype.toVector=function(){return this.end.subPt(this.start)};
Cl.prototype.toString=function(){return Dd.string.format("Line((%s,%s), (%s,%s))",this.start.x,this.start.y,this.end.x,this.end.y)};Cl.prototype.__serialize__=function(){return{__expr__:"Line.fromCoords("+this.start.x+", "+this.start.y+", "+this.end.x+", "+this.end.y+")",bindings:{"lively.graphics/geometry-2d.js":["Line"]}}};$jscomp.global.Object.defineProperties(Cl.prototype,{isLine:{configurable:!0,enumerable:!0,get:function(){return!0}}});Dd.Line=Cl;Dd.rect=Ii;Dd.rect=Ii;Dd.pt=oh;Dd.pt=oh;var eba=
Object.freeze({__proto__:null,Point:$f,Rectangle:ee,Transform:Gj,Line:Cl,rect:Ii,pt:oh}),b0=lively.FreezerRuntime.recorderFor("lively.ast/generated/estree-visitor.js"),ae=function(){};ae.prototype.accept=function(f,c,k){if(!f)throw Error("Undefined AST node in Visitor.accept:\n  "+k.join(".")+"\n  "+f);if(!f.type)throw Error("Strangee AST node without type in Visitor.accept:\n  "+k.join(".")+"\n  "+JSON.stringify(f));switch(f.type){case "Node":return this.visitNode(f,c,k);case "SourceLocation":return this.visitSourceLocation(f,
c,k);case "Position":return this.visitPosition(f,c,k);case "Program":return this.visitProgram(f,c,k);case "Function":return this.visitFunction(f,c,k);case "Statement":return this.visitStatement(f,c,k);case "Directive":return this.visitDirective(f,c,k);case "SwitchCase":return this.visitSwitchCase(f,c,k);case "CatchClause":return this.visitCatchClause(f,c,k);case "VariableDeclarator":return this.visitVariableDeclarator(f,c,k);case "Expression":return this.visitExpression(f,c,k);case "Property":return this.visitProperty(f,
c,k);case "Pattern":return this.visitPattern(f,c,k);case "Super":return this.visitSuper(f,c,k);case "SpreadElement":return this.visitSpreadElement(f,c,k);case "TemplateElement":return this.visitTemplateElement(f,c,k);case "Class":return this.visitClass(f,c,k);case "ClassBody":return this.visitClassBody(f,c,k);case "MethodDefinition":return this.visitMethodDefinition(f,c,k);case "ModuleDeclaration":return this.visitModuleDeclaration(f,c,k);case "ModuleSpecifier":return this.visitModuleSpecifier(f,
c,k);case "JSXEmptyExpression":return this.visitJSXEmptyExpression(f,c,k);case "JSXExpressionContainer":return this.visitJSXExpressionContainer(f,c,k);case "JSXSpreadChild":return this.visitJSXSpreadChild(f,c,k);case "JSXBoundaryElement":return this.visitJSXBoundaryElement(f,c,k);case "JSXAttribute":return this.visitJSXAttribute(f,c,k);case "JSXText":return this.visitJSXText(f,c,k);case "JSXOpeningFragment":return this.visitJSXOpeningFragment(f,c,k);case "JSXClosingFragment":return this.visitJSXClosingFragment(f,
c,k);case "Identifier":return this.visitIdentifier(f,c,k);case "Literal":return this.visitLiteral(f,c,k);case "ExpressionStatement":return this.visitExpressionStatement(f,c,k);case "BlockStatement":return this.visitBlockStatement(f,c,k);case "EmptyStatement":return this.visitEmptyStatement(f,c,k);case "DebuggerStatement":return this.visitDebuggerStatement(f,c,k);case "WithStatement":return this.visitWithStatement(f,c,k);case "ReturnStatement":return this.visitReturnStatement(f,c,k);case "LabeledStatement":return this.visitLabeledStatement(f,
c,k);case "BreakStatement":return this.visitBreakStatement(f,c,k);case "ContinueStatement":return this.visitContinueStatement(f,c,k);case "IfStatement":return this.visitIfStatement(f,c,k);case "SwitchStatement":return this.visitSwitchStatement(f,c,k);case "ThrowStatement":return this.visitThrowStatement(f,c,k);case "TryStatement":return this.visitTryStatement(f,c,k);case "WhileStatement":return this.visitWhileStatement(f,c,k);case "DoWhileStatement":return this.visitDoWhileStatement(f,c,k);case "ForStatement":return this.visitForStatement(f,
c,k);case "ForInStatement":return this.visitForInStatement(f,c,k);case "Declaration":return this.visitDeclaration(f,c,k);case "ThisExpression":return this.visitThisExpression(f,c,k);case "ArrayExpression":return this.visitArrayExpression(f,c,k);case "ObjectExpression":return this.visitObjectExpression(f,c,k);case "FunctionExpression":return this.visitFunctionExpression(f,c,k);case "UnaryExpression":return this.visitUnaryExpression(f,c,k);case "UpdateExpression":return this.visitUpdateExpression(f,
c,k);case "BinaryExpression":return this.visitBinaryExpression(f,c,k);case "AssignmentExpression":return this.visitAssignmentExpression(f,c,k);case "LogicalExpression":return this.visitLogicalExpression(f,c,k);case "MemberExpression":return this.visitMemberExpression(f,c,k);case "ConditionalExpression":return this.visitConditionalExpression(f,c,k);case "CallExpression":return this.visitCallExpression(f,c,k);case "NewExpression":return this.visitNewExpression(f,c,k);case "SequenceExpression":return this.visitSequenceExpression(f,
c,k);case "ArrowFunctionExpression":return this.visitArrowFunctionExpression(f,c,k);case "YieldExpression":return this.visitYieldExpression(f,c,k);case "TemplateLiteral":return this.visitTemplateLiteral(f,c,k);case "TaggedTemplateExpression":return this.visitTaggedTemplateExpression(f,c,k);case "AssignmentProperty":return this.visitAssignmentProperty(f,c,k);case "ObjectPattern":return this.visitObjectPattern(f,c,k);case "ArrayPattern":return this.visitArrayPattern(f,c,k);case "RestElement":return this.visitRestElement(f,
c,k);case "AssignmentPattern":return this.visitAssignmentPattern(f,c,k);case "ClassExpression":return this.visitClassExpression(f,c,k);case "MetaProperty":return this.visitMetaProperty(f,c,k);case "ImportDeclaration":return this.visitImportDeclaration(f,c,k);case "ImportSpecifier":return this.visitImportSpecifier(f,c,k);case "ImportDefaultSpecifier":return this.visitImportDefaultSpecifier(f,c,k);case "ImportNamespaceSpecifier":return this.visitImportNamespaceSpecifier(f,c,k);case "ExportNamedDeclaration":return this.visitExportNamedDeclaration(f,
c,k);case "ExportSpecifier":return this.visitExportSpecifier(f,c,k);case "AnonymousDefaultExportedFunctionDeclaration":return this.visitAnonymousDefaultExportedFunctionDeclaration(f,c,k);case "AnonymousDefaultExportedClassDeclaration":return this.visitAnonymousDefaultExportedClassDeclaration(f,c,k);case "ExportDefaultDeclaration":return this.visitExportDefaultDeclaration(f,c,k);case "ExportAllDeclaration":return this.visitExportAllDeclaration(f,c,k);case "AwaitExpression":return this.visitAwaitExpression(f,
c,k);case "JSXMemberExpression":return this.visitJSXMemberExpression(f,c,k);case "JSXNamespacedName":return this.visitJSXNamespacedName(f,c,k);case "JSXOpeningElement":return this.visitJSXOpeningElement(f,c,k);case "JSXClosingElement":return this.visitJSXClosingElement(f,c,k);case "JSXSpreadAttribute":return this.visitJSXSpreadAttribute(f,c,k);case "JSXElement":return this.visitJSXElement(f,c,k);case "JSXFragment":return this.visitJSXFragment(f,c,k);case "ImportExpression":return this.visitImportExpression(f,
c,k);case "RegExpLiteral":return this.visitRegExpLiteral(f,c,k);case "FunctionBody":return this.visitFunctionBody(f,c,k);case "FunctionDeclaration":return this.visitFunctionDeclaration(f,c,k);case "VariableDeclaration":return this.visitVariableDeclaration(f,c,k);case "ForOfStatement":return this.visitForOfStatement(f,c,k);case "ClassDeclaration":return this.visitClassDeclaration(f,c,k);case "JSXIdentifier":return this.visitJSXIdentifier(f,c,k);case "BigIntLiteral":return this.visitBigIntLiteral(f,
c,k)}throw Error("No visit function in AST visitor Visitor for:\n  "+k.join(".")+"\n  "+JSON.stringify(f));};ae.prototype.visitNode=function(f,c,k){return f};ae.prototype.visitSourceLocation=function(f,c,k){f.start=this.accept(f.start,c,k.concat(["start"]));f.end=this.accept(f.end,c,k.concat(["end"]));return f};ae.prototype.visitPosition=function(f,c,k){return f};ae.prototype.visitProgram=function(f,c,k){for(var d=[],h=0;h<f.body.length;h++){var n=f.body[h];n=n?this.accept(n,c,k.concat(["body",h])):
n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}f.body=d;return f};ae.prototype.visitFunction=function(f,c,k){f.id&&(f.id=this.accept(f.id,c,k.concat(["id"])));for(var d=[],h=0;h<f.params.length;h++){var n=f.params[h];n=n?this.accept(n,c,k.concat(["params",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}f.params=d;f.body=this.accept(f.body,c,k.concat(["body"]));return f};ae.prototype.visitStatement=function(f,c,k){return f};ae.prototype.visitDirective=function(f,c,k){f.expression=this.accept(f.expression,
c,k.concat(["expression"]));return f};ae.prototype.visitSwitchCase=function(f,c,k){f.test&&(f.test=this.accept(f.test,c,k.concat(["test"])));for(var d=[],h=0;h<f.consequent.length;h++){var n=f.consequent[h];n=n?this.accept(n,c,k.concat(["consequent",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}f.consequent=d;return f};ae.prototype.visitCatchClause=function(f,c,k){f.param&&(f.param=this.accept(f.param,c,k.concat(["param"])));f.body=this.accept(f.body,c,k.concat(["body"]));return f};ae.prototype.visitVariableDeclarator=
function(f,c,k){f.id=this.accept(f.id,c,k.concat(["id"]));f.init&&(f.init=this.accept(f.init,c,k.concat(["init"])));return f};ae.prototype.visitExpression=function(f,c,k){return f};ae.prototype.visitProperty=function(f,c,k){f.key=this.accept(f.key,c,k.concat(["key"]));f.value=this.accept(f.value,c,k.concat(["value"]));return f};ae.prototype.visitPattern=function(f,c,k){return f};ae.prototype.visitSuper=function(f,c,k){return f};ae.prototype.visitSpreadElement=function(f,c,k){f.argument=this.accept(f.argument,
c,k.concat(["argument"]));return f};ae.prototype.visitTemplateElement=function(f,c,k){return f};ae.prototype.visitClass=function(f,c,k){f.id&&(f.id=this.accept(f.id,c,k.concat(["id"])));f.superClass&&(f.superClass=this.accept(f.superClass,c,k.concat(["superClass"])));f.body=this.accept(f.body,c,k.concat(["body"]));return f};ae.prototype.visitClassBody=function(f,c,k){for(var d=[],h=0;h<f.body.length;h++){var n=f.body[h];n=n?this.accept(n,c,k.concat(["body",h])):n;Array.isArray(n)?d.push.apply(d,n):
d.push(n)}f.body=d;return f};ae.prototype.visitMethodDefinition=function(f,c,k){f.key=this.accept(f.key,c,k.concat(["key"]));f.value=this.accept(f.value,c,k.concat(["value"]));return f};ae.prototype.visitModuleDeclaration=function(f,c,k){return f};ae.prototype.visitModuleSpecifier=function(f,c,k){f.local=this.accept(f.local,c,k.concat(["local"]));return f};ae.prototype.visitJSXEmptyExpression=function(f,c,k){return f};ae.prototype.visitJSXExpressionContainer=function(f,c,k){f.expression=this.accept(f.expression,
c,k.concat(["expression"]));return f};ae.prototype.visitJSXSpreadChild=function(f,c,k){f.expression=this.accept(f.expression,c,k.concat(["expression"]));return f};ae.prototype.visitJSXBoundaryElement=function(f,c,k){f.name=this.accept(f.name,c,k.concat(["name"]));return f};ae.prototype.visitJSXAttribute=function(f,c,k){f.name=this.accept(f.name,c,k.concat(["name"]));f.value&&(f.value=this.accept(f.value,c,k.concat(["value"])));return f};ae.prototype.visitJSXText=function(f,c,k){return f};ae.prototype.visitJSXOpeningFragment=
function(f,c,k){return f};ae.prototype.visitJSXClosingFragment=function(f,c,k){return f};ae.prototype.visitIdentifier=function(f,c,k){return f};ae.prototype.visitLiteral=function(f,c,k){return f};ae.prototype.visitExpressionStatement=function(f,c,k){f.expression=this.accept(f.expression,c,k.concat(["expression"]));return f};ae.prototype.visitBlockStatement=function(f,c,k){for(var d=[],h=0;h<f.body.length;h++){var n=f.body[h];n=n?this.accept(n,c,k.concat(["body",h])):n;Array.isArray(n)?d.push.apply(d,
n):d.push(n)}f.body=d;return f};ae.prototype.visitEmptyStatement=function(f,c,k){return f};ae.prototype.visitDebuggerStatement=function(f,c,k){return f};ae.prototype.visitWithStatement=function(f,c,k){f.object=this.accept(f.object,c,k.concat(["object"]));f.body=this.accept(f.body,c,k.concat(["body"]));return f};ae.prototype.visitReturnStatement=function(f,c,k){f.argument&&(f.argument=this.accept(f.argument,c,k.concat(["argument"])));return f};ae.prototype.visitLabeledStatement=function(f,c,k){f.label=
this.accept(f.label,c,k.concat(["label"]));f.body=this.accept(f.body,c,k.concat(["body"]));return f};ae.prototype.visitBreakStatement=function(f,c,k){f.label&&(f.label=this.accept(f.label,c,k.concat(["label"])));return f};ae.prototype.visitContinueStatement=function(f,c,k){f.label&&(f.label=this.accept(f.label,c,k.concat(["label"])));return f};ae.prototype.visitIfStatement=function(f,c,k){f.test=this.accept(f.test,c,k.concat(["test"]));f.consequent=this.accept(f.consequent,c,k.concat(["consequent"]));
f.alternate&&(f.alternate=this.accept(f.alternate,c,k.concat(["alternate"])));return f};ae.prototype.visitSwitchStatement=function(f,c,k){f.discriminant=this.accept(f.discriminant,c,k.concat(["discriminant"]));for(var d=[],h=0;h<f.cases.length;h++){var n=f.cases[h];n=n?this.accept(n,c,k.concat(["cases",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}f.cases=d;return f};ae.prototype.visitThrowStatement=function(f,c,k){f.argument=this.accept(f.argument,c,k.concat(["argument"]));return f};ae.prototype.visitTryStatement=
function(f,c,k){f.block=this.accept(f.block,c,k.concat(["block"]));f.handler&&(f.handler=this.accept(f.handler,c,k.concat(["handler"])));f.finalizer&&(f.finalizer=this.accept(f.finalizer,c,k.concat(["finalizer"])));return f};ae.prototype.visitWhileStatement=function(f,c,k){f.test=this.accept(f.test,c,k.concat(["test"]));f.body=this.accept(f.body,c,k.concat(["body"]));return f};ae.prototype.visitDoWhileStatement=function(f,c,k){f.body=this.accept(f.body,c,k.concat(["body"]));f.test=this.accept(f.test,
c,k.concat(["test"]));return f};ae.prototype.visitForStatement=function(f,c,k){f.init&&(f.init=this.accept(f.init,c,k.concat(["init"])));f.test&&(f.test=this.accept(f.test,c,k.concat(["test"])));f.update&&(f.update=this.accept(f.update,c,k.concat(["update"])));f.body=this.accept(f.body,c,k.concat(["body"]));return f};ae.prototype.visitForInStatement=function(f,c,k){f.left=this.accept(f.left,c,k.concat(["left"]));f.right=this.accept(f.right,c,k.concat(["right"]));f.body=this.accept(f.body,c,k.concat(["body"]));
return f};ae.prototype.visitDeclaration=function(f,c,k){return f};ae.prototype.visitThisExpression=function(f,c,k){return f};ae.prototype.visitArrayExpression=function(f,c,k){if(f.elements){for(var d=[],h=0;h<f.elements.length;h++){var n=f.elements[h];n=n?this.accept(n,c,k.concat(["elements",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}f.elements=d}return f};ae.prototype.visitObjectExpression=function(f,c,k){for(var d=[],h=0;h<f.properties.length;h++){var n=f.properties[h];n=n?this.accept(n,
c,k.concat(["properties",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}f.properties=d;return f};ae.prototype.visitFunctionExpression=function(f,c,k){f.id&&(f.id=this.accept(f.id,c,k.concat(["id"])));for(var d=[],h=0;h<f.params.length;h++){var n=f.params[h];n=n?this.accept(n,c,k.concat(["params",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}f.params=d;f.body=this.accept(f.body,c,k.concat(["body"]));return f};ae.prototype.visitUnaryExpression=function(f,c,k){f.argument=this.accept(f.argument,
c,k.concat(["argument"]));return f};ae.prototype.visitUpdateExpression=function(f,c,k){f.argument=this.accept(f.argument,c,k.concat(["argument"]));return f};ae.prototype.visitBinaryExpression=function(f,c,k){f.left=this.accept(f.left,c,k.concat(["left"]));f.right=this.accept(f.right,c,k.concat(["right"]));return f};ae.prototype.visitAssignmentExpression=function(f,c,k){f.left=this.accept(f.left,c,k.concat(["left"]));f.right=this.accept(f.right,c,k.concat(["right"]));return f};ae.prototype.visitLogicalExpression=
function(f,c,k){f.left=this.accept(f.left,c,k.concat(["left"]));f.right=this.accept(f.right,c,k.concat(["right"]));return f};ae.prototype.visitMemberExpression=function(f,c,k){f.object=this.accept(f.object,c,k.concat(["object"]));f.property=this.accept(f.property,c,k.concat(["property"]));return f};ae.prototype.visitConditionalExpression=function(f,c,k){f.test=this.accept(f.test,c,k.concat(["test"]));f.alternate=this.accept(f.alternate,c,k.concat(["alternate"]));f.consequent=this.accept(f.consequent,
c,k.concat(["consequent"]));return f};ae.prototype.visitCallExpression=function(f,c,k){f.callee=this.accept(f.callee,c,k.concat(["callee"]));for(var d=[],h=0;h<f.arguments.length;h++){var n=f.arguments[h];n=n?this.accept(n,c,k.concat(["arguments",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}f.arguments=d;return f};ae.prototype.visitNewExpression=function(f,c,k){f.callee=this.accept(f.callee,c,k.concat(["callee"]));for(var d=[],h=0;h<f.arguments.length;h++){var n=f.arguments[h];n=n?this.accept(n,
c,k.concat(["arguments",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}f.arguments=d;return f};ae.prototype.visitSequenceExpression=function(f,c,k){for(var d=[],h=0;h<f.expressions.length;h++){var n=f.expressions[h];n=n?this.accept(n,c,k.concat(["expressions",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}f.expressions=d;return f};ae.prototype.visitArrowFunctionExpression=function(f,c,k){f.body=this.accept(f.body,c,k.concat(["body"]));f.id&&(f.id=this.accept(f.id,c,k.concat(["id"])));for(var d=
[],h=0;h<f.params.length;h++){var n=f.params[h];n=n?this.accept(n,c,k.concat(["params",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}f.params=d;return f};ae.prototype.visitYieldExpression=function(f,c,k){f.argument&&(f.argument=this.accept(f.argument,c,k.concat(["argument"])));return f};ae.prototype.visitTemplateLiteral=function(f,c,k){for(var d=[],h=0;h<f.quasis.length;h++){var n=f.quasis[h];n=n?this.accept(n,c,k.concat(["quasis",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}f.quasis=
d;d=[];for(h=0;h<f.expressions.length;h++)n=(n=f.expressions[h])?this.accept(n,c,k.concat(["expressions",h])):n,Array.isArray(n)?d.push.apply(d,n):d.push(n);f.expressions=d;return f};ae.prototype.visitTaggedTemplateExpression=function(f,c,k){f.tag=this.accept(f.tag,c,k.concat(["tag"]));f.quasi=this.accept(f.quasi,c,k.concat(["quasi"]));return f};ae.prototype.visitAssignmentProperty=function(f,c,k){f.value=this.accept(f.value,c,k.concat(["value"]));f.key=this.accept(f.key,c,k.concat(["key"]));return f};
ae.prototype.visitObjectPattern=function(f,c,k){for(var d=[],h=0;h<f.properties.length;h++){var n=f.properties[h];n=n?this.accept(n,c,k.concat(["properties",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}f.properties=d;return f};ae.prototype.visitArrayPattern=function(f,c,k){if(f.elements){for(var d=[],h=0;h<f.elements.length;h++){var n=f.elements[h];n=n?this.accept(n,c,k.concat(["elements",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}f.elements=d}return f};ae.prototype.visitRestElement=
function(f,c,k){f.argument=this.accept(f.argument,c,k.concat(["argument"]));return f};ae.prototype.visitAssignmentPattern=function(f,c,k){f.left=this.accept(f.left,c,k.concat(["left"]));f.right=this.accept(f.right,c,k.concat(["right"]));return f};ae.prototype.visitClassExpression=function(f,c,k){f.id&&(f.id=this.accept(f.id,c,k.concat(["id"])));f.superClass&&(f.superClass=this.accept(f.superClass,c,k.concat(["superClass"])));f.body=this.accept(f.body,c,k.concat(["body"]));return f};ae.prototype.visitMetaProperty=
function(f,c,k){f.meta=this.accept(f.meta,c,k.concat(["meta"]));f.property=this.accept(f.property,c,k.concat(["property"]));return f};ae.prototype.visitImportDeclaration=function(f,c,k){for(var d=[],h=0;h<f.specifiers.length;h++){var n=f.specifiers[h];n=n?this.accept(n,c,k.concat(["specifiers",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}f.specifiers=d;f.source=this.accept(f.source,c,k.concat(["source"]));return f};ae.prototype.visitImportSpecifier=function(f,c,k){f.imported=this.accept(f.imported,
c,k.concat(["imported"]));f.local=this.accept(f.local,c,k.concat(["local"]));return f};ae.prototype.visitImportDefaultSpecifier=function(f,c,k){f.local=this.accept(f.local,c,k.concat(["local"]));return f};ae.prototype.visitImportNamespaceSpecifier=function(f,c,k){f.local=this.accept(f.local,c,k.concat(["local"]));return f};ae.prototype.visitExportNamedDeclaration=function(f,c,k){f.declaration&&(f.declaration=this.accept(f.declaration,c,k.concat(["declaration"])));for(var d=[],h=0;h<f.specifiers.length;h++){var n=
f.specifiers[h];n=n?this.accept(n,c,k.concat(["specifiers",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}f.specifiers=d;f.source&&(f.source=this.accept(f.source,c,k.concat(["source"])));return f};ae.prototype.visitExportSpecifier=function(f,c,k){f.exported=this.accept(f.exported,c,k.concat(["exported"]));f.local=this.accept(f.local,c,k.concat(["local"]));return f};ae.prototype.visitAnonymousDefaultExportedFunctionDeclaration=function(f,c,k){f.id&&(f.id=this.accept(f.id,c,k.concat(["id"])));
for(var d=[],h=0;h<f.params.length;h++){var n=f.params[h];n=n?this.accept(n,c,k.concat(["params",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}f.params=d;f.body=this.accept(f.body,c,k.concat(["body"]));return f};ae.prototype.visitAnonymousDefaultExportedClassDeclaration=function(f,c,k){f.id&&(f.id=this.accept(f.id,c,k.concat(["id"])));f.superClass&&(f.superClass=this.accept(f.superClass,c,k.concat(["superClass"])));f.body=this.accept(f.body,c,k.concat(["body"]));return f};ae.prototype.visitExportDefaultDeclaration=
function(f,c,k){f.declaration=this.accept(f.declaration,c,k.concat(["declaration"]));return f};ae.prototype.visitExportAllDeclaration=function(f,c,k){f.source=this.accept(f.source,c,k.concat(["source"]));return f};ae.prototype.visitAwaitExpression=function(f,c,k){f.argument=this.accept(f.argument,c,k.concat(["argument"]));return f};ae.prototype.visitJSXMemberExpression=function(f,c,k){f.object=this.accept(f.object,c,k.concat(["object"]));f.property=this.accept(f.property,c,k.concat(["property"]));
return f};ae.prototype.visitJSXNamespacedName=function(f,c,k){f.namespace=this.accept(f.namespace,c,k.concat(["namespace"]));f.name=this.accept(f.name,c,k.concat(["name"]));return f};ae.prototype.visitJSXOpeningElement=function(f,c,k){for(var d=[],h=0;h<f.attributes.length;h++){var n=f.attributes[h];n=n?this.accept(n,c,k.concat(["attributes",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}f.attributes=d;f.name=this.accept(f.name,c,k.concat(["name"]));return f};ae.prototype.visitJSXClosingElement=
function(f,c,k){f.name=this.accept(f.name,c,k.concat(["name"]));return f};ae.prototype.visitJSXSpreadAttribute=function(f,c,k){f.argument=this.accept(f.argument,c,k.concat(["argument"]));return f};ae.prototype.visitJSXElement=function(f,c,k){f.openingElement=this.accept(f.openingElement,c,k.concat(["openingElement"]));for(var d=[],h=0;h<f.children.length;h++){var n=f.children[h];n=n?this.accept(n,c,k.concat(["children",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}f.children=d;f.closingElement&&
(f.closingElement=this.accept(f.closingElement,c,k.concat(["closingElement"])));return f};ae.prototype.visitJSXFragment=function(f,c,k){f.openingFragment=this.accept(f.openingFragment,c,k.concat(["openingFragment"]));for(var d=[],h=0;h<f.children.length;h++){var n=f.children[h];n=n?this.accept(n,c,k.concat(["children",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}f.children=d;f.closingFragment=this.accept(f.closingFragment,c,k.concat(["closingFragment"]));return f};ae.prototype.visitImportExpression=
function(f,c,k){f.source=this.accept(f.source,c,k.concat(["source"]));return f};ae.prototype.visitRegExpLiteral=function(f,c,k){return f};ae.prototype.visitFunctionBody=function(f,c,k){for(var d=[],h=0;h<f.body.length;h++){var n=f.body[h];n=n?this.accept(n,c,k.concat(["body",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}f.body=d;return f};ae.prototype.visitFunctionDeclaration=function(f,c,k){f.id=this.accept(f.id,c,k.concat(["id"]));for(var d=[],h=0;h<f.params.length;h++){var n=f.params[h];
n=n?this.accept(n,c,k.concat(["params",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}f.params=d;f.body=this.accept(f.body,c,k.concat(["body"]));return f};ae.prototype.visitVariableDeclaration=function(f,c,k){for(var d=[],h=0;h<f.declarations.length;h++){var n=f.declarations[h];n=n?this.accept(n,c,k.concat(["declarations",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}f.declarations=d;return f};ae.prototype.visitForOfStatement=function(f,c,k){f.left=this.accept(f.left,c,k.concat(["left"]));
f.right=this.accept(f.right,c,k.concat(["right"]));f.body=this.accept(f.body,c,k.concat(["body"]));return f};ae.prototype.visitClassDeclaration=function(f,c,k){f.id=this.accept(f.id,c,k.concat(["id"]));f.superClass&&(f.superClass=this.accept(f.superClass,c,k.concat(["superClass"])));f.body=this.accept(f.body,c,k.concat(["body"]));return f};ae.prototype.visitJSXIdentifier=function(f,c,k){return f};ae.prototype.visitBigIntLiteral=function(f,c,k){return f};sa("bB",ae);b0.Visitor=ae;b0.default=ae;var Zg=
lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitors.js");Zg.obj=Pf;Zg.Path=nh;Zg.Visitor=ae;var tA=function(){return Zg.Visitor.apply(this,arguments)||this};$jscomp.inherits(tA,Zg.Visitor);tA.prototype.accept=function(f,c,k){var d=k.map(function(n){return"string"===typeof n?"."+n:"["+n+"]"}).join(""),h=[];k=Zg.Visitor.prototype.accept.call(this,f,{index:c.index,tree:h},k);c.tree.push({node:f,path:d,index:c.index++,children:h});return k};Zg.PrinterVisitor=tA;var Sj=function(){return Zg.Visitor.apply(this,
arguments)||this};$jscomp.inherits(Sj,Zg.Visitor);Sj.prototype.recordNotEqual=function(f,c,k,d){k.comparisons.errors.push({node1:f,node2:c,path:k.completePath,msg:d})};Sj.prototype.compareType=function(f,c,k){return this.compareField("type",f,c,k)};Sj.prototype.compareField=function(f,c,k,d){k=Zg.Path(d.completePath.join(".")).get(k);if(c&&k&&c[f]===k[f]||c&&"*"===c[f]||k&&"*"===k[f])return!0;var h=d.completePath.join(".")+"."+f;this.recordNotEqual(c,k,d,c?k?h+" is not equal: "+c[f]+" vs. "+k[f]:
"node2 not defined but node1 ("+h+") is: "+c[f]:"node1 on "+h+" not defined");return!1};Sj.prototype.accept=function(f,c,k,d){var h=Zg.Path(d.join(".")).get(c);if("*"!==f&&"*"!==h&&(k={completePath:d,comparisons:k.comparisons},this.compareType(f,c,k)))this["visit"+f.type](f,c,k,d)};Sj.prototype.visitFunction=function(f,c,k,d){f.generator&&this.compareField("generator",f,c,k);f.expression&&this.compareField("expression",f,c,k);return Zg.Visitor.prototype.visitFunction.call(this,f,c,k,d)};Sj.prototype.visitSwitchStatement=
function(f,c,k,d){f.lexical&&this.compareField("lexical",f,c,k);return Zg.Visitor.prototype.visitSwitchStatement.call(this,f,c,k,d)};Sj.prototype.visitForInStatement=function(f,c,k,d){f.each&&this.compareField("each",f,c,k);return Zg.Visitor.prototype.visitForInStatement.call(this,f,c,k,d)};Sj.prototype.visitFunctionDeclaration=function(f,c,k,d){f.generator&&this.compareField("generator",f,c,k);f.expression&&this.compareField("expression",f,c,k);return Zg.Visitor.prototype.visitFunctionDeclaration.call(this,
f,c,k,d)};Sj.prototype.visitVariableDeclaration=function(f,c,k,d){this.compareField("kind",f,c,k);return Zg.Visitor.prototype.visitVariableDeclaration.call(this,f,c,k,d)};Sj.prototype.visitUnaryExpression=function(f,c,k,d){this.compareField("operator",f,c,k);f.prefix&&this.compareField("prefix",f,c,k);return Zg.Visitor.prototype.visitUnaryExpression.call(this,f,c,k,d)};Sj.prototype.visitBinaryExpression=function(f,c,k,d){this.compareField("operator",f,c,k);return Zg.Visitor.prototype.visitBinaryExpression.call(this,
f,c,k,d)};Sj.prototype.visitAssignmentExpression=function(f,c,k,d){this.compareField("operator",f,c,k);return Zg.Visitor.prototype.visitAssignmentExpression.call(this,f,c,k,d)};Sj.prototype.visitUpdateExpression=function(f,c,k,d){this.compareField("operator",f,c,k);f.prefix&&this.compareField("prefix",f,c,k);return Zg.Visitor.prototype.visitUpdateExpression.call(this,f,c,k,d)};Sj.prototype.visitLogicalExpression=function(f,c,k,d){this.compareField("operator",f,c,k);return Zg.Visitor.prototype.visitLogicalExpression.call(this,
f,c,k,d)};Sj.prototype.visitMemberExpression=function(f,c,k,d){f.computed&&this.compareField("computed",f,c,k);return Zg.Visitor.prototype.visitMemberExpression.call(this,f,c,k,d)};Sj.prototype.visitComprehensionBlock=function(f,c,k,d){f.each&&this.compareField("each",f,c,k);return Zg.Visitor.prototype.visitComprehensionBlock.call(this,f,c,k,d)};Sj.prototype.visitIdentifier=function(f,c,k,d){this.compareField("name",f,c,k);return Zg.Visitor.prototype.visitIdentifier.call(this,f,c,k,d)};Sj.prototype.visitLiteral=
function(f,c,k,d){this.compareField("value",f,c,k);return Zg.Visitor.prototype.visitLiteral.call(this,f,c,k,d)};Sj.prototype.visitClassDeclaration=function(f,c,k,d){this.compareField("id",f,c,k);f.superClass&&this.compareField("superClass",f,c,k);this.compareField("body",f,c,k);return Zg.Visitor.prototype.visitClassDeclaration.call(this,f,c,k,d)};Sj.prototype.visitClassBody=function(f,c,k,d){this.compareField("body",f,c,k);return Zg.Visitor.prototype.visitClassBody.call(this,f,c,k,d)};Sj.prototype.visitMethodDefinition=
function(f,c,k,d){this.compareField("static",f,c,k);this.compareField("computed",f,c,k);this.compareField("kind",f,c,k);this.compareField("key",f,c,k);this.compareField("value",f,c,k);return Zg.Visitor.prototype.visitMethodDefinition.call(this,f,c,k,d)};Zg.ComparisonVisitor=Sj;var Ui=function(){return Zg.Visitor.apply(this,arguments)||this};$jscomp.inherits(Ui,Zg.Visitor);Ui.prototype.newScope=function(f,c){f={node:f,varDecls:[],varDeclPaths:[],funcDecls:[],funcDeclPaths:[],classDecls:[],classDeclPaths:[],
classExprs:[],classExprPaths:[],methodDecls:[],methodDeclPaths:[],importSpecifiers:[],importSpecifierPaths:[],exportDecls:[],exportDeclPaths:[],refs:[],thisRefs:[],params:[],catches:[],subScopes:[],resolvedRefMap:new Map};c&&c.subScopes.push(f);return f};Ui.prototype.visitVariableDeclaration=function(f,c,k){c.varDecls.push(f);c.varDeclPaths.push(k);return Zg.Visitor.prototype.visitVariableDeclaration.call(this,f,c,k)};Ui.prototype.visitVariableDeclarator=function(f,c,k){f.init&&(f.init=this.accept(f.init,
c,k.concat(["init"])));return f};Ui.prototype.visitFunction=function(f,c,k){var d=this,h=this.newScope(f,c);f.params.forEach(function(n,b){"AssignmentPattern"===n.type&&d.accept(n.right,h,k.concat("params",b,"right"))});h.params=Array.prototype.slice.call(f.params);return h};Ui.prototype.visitFunctionDeclaration=function(f,c,k){var d=this.visitFunction(f,c,k);c.funcDecls.push(f);c.funcDeclPaths.push(k);var h=this;f.defaults&&(f.defaults=f.defaults.reduce(function(n,b,e){b=h.accept(b,d,k.concat(["defaults",
e]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));f.rest&&(f.rest=h.accept(f.rest,d,k.concat(["rest"])));f.body=h.accept(f.body,d,k.concat(["body"]));f.loc&&(f.loc=h.accept(f.loc,d,k.concat(["loc"])));return f};Ui.prototype.visitFunctionExpression=function(f,c,k){var d=this.visitFunction(f,c,k),h=this;f.defaults&&(f.defaults=f.defaults.reduce(function(n,b,e){b=h.accept(b,d,k.concat(["defaults",e]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));f.rest&&(f.rest=h.accept(f.rest,
d,k.concat(["rest"])));f.body=h.accept(f.body,d,k.concat(["body"]));f.loc&&(f.loc=h.accept(f.loc,d,k.concat(["loc"])));return f};Ui.prototype.visitArrowFunctionExpression=function(f,c,k){var d=this.visitFunction(f,c,k),h=this;f.defaults&&(f.defaults=f.defaults.reduce(function(n,b,e){b=h.accept(b,d,k.concat(["defaults",e]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));f.rest&&(f.rest=h.accept(f.rest,d,k.concat(["rest"])));f.body=h.accept(f.body,d,k.concat(["body"]));f.loc&&(f.loc=h.accept(f.loc,
d,k.concat(["loc"])));return f};Ui.prototype.visitIdentifier=function(f,c,k){c.refs.push(f);return Zg.Visitor.prototype.visitIdentifier.call(this,f,c,k)};Ui.prototype.visitMemberExpression=function(f,c,k){f.object=this.accept(f.object,c,k.concat(["object"]));f.computed&&(f.property=this.accept(f.property,c,k.concat(["property"])));return f};Ui.prototype.visitProperty=function(f,c,k){f.computed&&(f.key=this.accept(f.key,c,k.concat(["key"])));f.value=this.accept(f.value,c,k.concat(["value"]));return f};
Ui.prototype.visitThisExpression=function(f,c,k){c.thisRefs.push(f);return Zg.Visitor.prototype.visitThisExpression.call(this,f,c,k)};Ui.prototype.visitTryStatement=function(f,c,k){f.block=this.accept(f.block,c,k.concat(["block"]));f.handler&&(f.handler=this.accept(f.handler,c,k.concat(["handler"])),c.catches.push(f.handler.param));f.finalizer&&(f.finalizer=this.accept(f.finalizer,c,k.concat(["finalizer"])));return f};Ui.prototype.visitLabeledStatement=function(f,c,k){f.body=this.accept(f.body,c,
k.concat(["body"]));return f};Ui.prototype.visitClassDeclaration=function(f,c,k){c.classDecls.push(f);c.classDeclPaths.push(k);f.superClass&&(f.superClass=this.accept(f.superClass,c,k.concat(["superClass"])));f.body=this.accept(f.body,c,k.concat(["body"]));return f};Ui.prototype.visitClassExpression=function(f,c,k){f.id&&(c.classExprs.push(f),c.classExprPaths.push(k));f.superClass&&(f.superClass=this.accept(f.superClass,c,k.concat(["superClass"])));f.body=this.accept(f.body,c,k.concat(["body"]));
return f};Ui.prototype.visitMethodDefinition=function(f,c,k){f.value=this.accept(f.value,c,k.concat(["value"]));return f};Ui.prototype.visitMetaProperty=function(f,c,k){return f};Ui.prototype.visitBreakStatement=function(f,c,k){return f};Ui.prototype.visitContinueStatement=function(f,c,k){return f};Ui.prototype.visitImportSpecifier=function(f,c,k){c.importSpecifiers.push(f.local);c.importSpecifierPaths.push(k);return f};Ui.prototype.visitImportDefaultSpecifier=function(f,c,k){c.importSpecifiers.push(f.local);
c.importSpecifierPaths.push(k);return f};Ui.prototype.visitImportNamespaceSpecifier=function(f,c,k){c.importSpecifiers.push(f.local);c.importSpecifierPaths.push(k);return f};Ui.prototype.visitExportSpecifier=function(f,c,k){f.local=this.accept(f.local,c,k.concat(["local"]));return f};Ui.prototype.visitExportNamedDeclaration=function(f,c,k){c.exportDecls.push(f);c.exportDeclPaths.push(k);f.source||Zg.Visitor.prototype.visitExportNamedDeclaration.call(this,f,c,k);return f};Ui.prototype.visitExportDefaultDeclaration=
function(f,c,k){c.exportDecls.push(f);c.exportDeclPaths.push(k);return Zg.Visitor.prototype.visitExportDefaultDeclaration.call(this,f,c,k)};Ui.prototype.visitExportAllDeclaration=function(f,c,k){c.exportDecls.push(f);c.exportDeclPaths.push(k);return Zg.Visitor.prototype.visitExportAllDeclaration.call(this,f,c,k)};Zg.ScopeVisitor=Ui;Zg.BaseVisitor=ae;Zg.Visitor=ae;Zg.PrinterVisitor=tA;Zg.PrinterVisitor=tA;Zg.ComparisonVisitor=Sj;Zg.ComparisonVisitor=Sj;Zg.ScopeVisitor=Ui;Zg.ScopeVisitor=Ui;var qg=
"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,UN={};(function k(c){function d(A){var B={},G;for(G in A)if(A.hasOwnProperty(G)){var E=A[G];B[G]="object"===typeof E&&null!==E?d(E):E}return B}function h(A,B){var G;var E=A.length;for(G=0;E;){var K=E>>>1;var J=G+K;B(A[J])?E=K:(G=J+1,E-=K+1)}return G}function n(A,B){(this||qg).parent=A;(this||qg).key=B}function b(A,B,G,E){(this||qg).node=A;(this||qg).path=B;(this||qg).wrap=G;(this||qg).ref=E}function e(){}function m(A){return null==
A?!1:"object"===typeof A&&"string"===typeof A.type}function a(A,B){for(var G=A.length-1;0<=G;--G)if(A[G].node===B)return!0;return!1}function g(A,B){return(new e).traverse(A,B)}function l(A,B){var G=h(B,function(E){return E.range[0]>A.range[0]});A.extendedRange=[A.range[0],A.range[1]];G!==B.length&&(A.extendedRange[1]=B[G].range[0]);--G;0<=G&&(A.extendedRange[0]=B[G].range[1]);return A}var q={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",
ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",
ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",
ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",
ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};var r={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],
BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],
DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter",
"body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],
ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],
VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};var u={};var v={};var y={};var z={Break:u,Skip:v,Remove:y};n.prototype.replace=function(A){(this||qg).parent[(this||qg).key]=A};n.prototype.remove=function(){if(Array.isArray((this||qg).parent))return(this||qg).parent.splice((this||qg).key,1),!0;this.replace(null);return!1};e.prototype.path=function(){function A(ea,ra){if(Array.isArray(ra))for(G=
0,E=ra.length;G<E;++G)ea.push(ra[G]);else ea.push(ra)}var B,G,E;if(!(this||qg).__current.path)return null;var K=[];var J=2;for(B=(this||qg).__leavelist.length;J<B;++J){var P=(this||qg).__leavelist[J];A(K,P.path)}A(K,(this||qg).__current.path);return K};e.prototype.type=function(){return this.current().type||(this||qg).__current.wrap};e.prototype.parents=function(){var A;var B=[];var G=1;for(A=(this||qg).__leavelist.length;G<A;++G)B.push((this||qg).__leavelist[G].node);return B};e.prototype.current=
function(){return(this||qg).__current.node};e.prototype.__execute=function(A,B){var G=void 0;var E=(this||qg).__current;(this||qg).__current=B;(this||qg).__state=null;A&&(G=A.call(this||qg,B.node,(this||qg).__leavelist[(this||qg).__leavelist.length-1].node));(this||qg).__current=E;return G};e.prototype.notify=function(A){(this||qg).__state=A};e.prototype.skip=function(){this.notify(v)};e.prototype["break"]=function(){this.notify(u)};e.prototype.remove=function(){this.notify(y)};e.prototype.__initialize=
function(A,B){(this||qg).visitor=B;(this||qg).root=A;(this||qg).__worklist=[];(this||qg).__leavelist=[];(this||qg).__current=null;(this||qg).__state=null;(this||qg).__fallback=null;"iteration"===B.fallback?(this||qg).__fallback=Object.keys:"function"===typeof B.fallback&&((this||qg).__fallback=B.fallback);(this||qg).__keys=r;B.keys&&((this||qg).__keys=Object.assign(Object.create((this||qg).__keys),B.keys))};e.prototype.traverse=function(A,B){var G,E,K;this.__initialize(A,B);var J={};var P=(this||
qg).__worklist;var ea=(this||qg).__leavelist;P.push(new b(A,null,null,null));for(ea.push(new b(null,null,null,null));P.length;)if(A=P.pop(),A===J){A=ea.pop();var ra=this.__execute(B.leave,A);if((this||qg).__state===u||ra===u)break}else if(A.node){ra=this.__execute(B.enter,A);if((this||qg).__state===u||ra===u)break;P.push(J);ea.push(A);if((this||qg).__state!==v&&ra!==v){ra=A.node;var D=ra.type||A.wrap;var O=(this||qg).__keys[D];if(!O)if((this||qg).__fallback)O=this.__fallback(ra);else throw Error("Unknown node type "+
D+".");for(G=O.length;0<=--G;){var L=O[G];if(K=ra[L])if(Array.isArray(K))for(E=K.length;0<=--E;){if(K[E]&&!a(ea,K[E])){if(D!==q.ObjectExpression&&D!==q.ObjectPattern||"properties"!==O[G])if(m(K[E]))A=new b(K[E],[L,E],null,null);else continue;else A=new b(K[E],[L,E],"Property",null);P.push(A)}}else m(K)&&!a(ea,K)&&P.push(new b(K,L,null,null))}}}};e.prototype.replace=function(A,B){function G(Y){if(Y.ref.remove()){var ma=Y.ref.key;var bb=Y.ref.parent;for(Y=ea.length;Y--;){var Qa=ea[Y];if(Qa.ref&&Qa.ref.parent===
bb){if(Qa.ref.key<ma)break;--Qa.ref.key}}}}var E,K,J;this.__initialize(A,B);var P={};var ea=(this||qg).__worklist;var ra=(this||qg).__leavelist;var D={root:A};var O=new b(A,null,null,new n(D,"root"));ea.push(O);for(ra.push(O);ea.length;)if(O=ea.pop(),O===P){O=ra.pop();var L=this.__execute(B.leave,O);void 0!==L&&L!==u&&L!==v&&L!==y&&O.ref.replace(L);(this||qg).__state!==y&&L!==y||G(O);if((this||qg).__state===u||L===u)break}else{L=this.__execute(B.enter,O);void 0!==L&&L!==u&&L!==v&&L!==y&&(O.ref.replace(L),
O.node=L);if((this||qg).__state===y||L===y)G(O),O.node=null;if((this||qg).__state===u||L===u)break;if(A=O.node)if(ea.push(P),ra.push(O),(this||qg).__state!==v&&L!==v){L=A.type||O.wrap;var N=(this||qg).__keys[L];if(!N)if((this||qg).__fallback)N=this.__fallback(A);else throw Error("Unknown node type "+L+".");for(E=N.length;0<=--E;){var aa=N[E];if(J=A[aa])if(Array.isArray(J))for(K=J.length;0<=--K;){if(J[K]){if(L!==q.ObjectExpression&&L!==q.ObjectPattern||"properties"!==N[E])if(m(J[K]))O=new b(J[K],[aa,
K],null,new n(J,K));else continue;else O=new b(J[K],[aa,K],"Property",new n(J,K));ea.push(O)}}else m(J)&&ea.push(new b(J,aa,null,new n(A,aa)))}}}return D.root};c.Syntax=q;c.traverse=g;c.replace=function(A,B){return(new e).replace(A,B)};c.attachComments=function(A,B,G){var E=[],K;if(!A.range)throw Error("attachComments needs range information");if(!G.length){if(B.length){var J=0;for(K=B.length;J<K;J+=1)G=d(B[J]),G.extendedRange=[0,A.range[0]],E.push(G);A.leadingComments=E}return A}J=0;for(K=B.length;J<
K;J+=1)E.push(l(d(B[J]),G));var P=0;g(A,{enter:function(ea){for(var ra;P<E.length;){ra=E[P];if(ra.extendedRange[1]>ea.range[0])break;ra.extendedRange[1]===ea.range[0]?(ea.leadingComments||(ea.leadingComments=[]),ea.leadingComments.push(ra),E.splice(P,1)):P+=1}if(P===E.length)return z.Break;if(E[P].extendedRange[0]>ea.range[1])return z.Skip}});P=0;g(A,{leave:function(ea){for(var ra;P<E.length;){ra=E[P];if(ea.range[1]<ra.extendedRange[0])break;ea.range[1]===ra.extendedRange[0]?(ea.trailingComments||
(ea.trailingComments=[]),ea.trailingComments.push(ra),E.splice(P,1)):P+=1}if(P===E.length)return z.Break;if(E[P].extendedRange[0]>ea.range[1])return z.Skip}});return A};c.VisitorKeys=r;c.VisitorOption=z;c.Controller=e;c.cloneEnvironment=function(){return k({})};return c})(UN);var c0={};(function(){function c(d){if(null==d)return!1;switch(d.type){case "BlockStatement":case "BreakStatement":case "ContinueStatement":case "DebuggerStatement":case "DoWhileStatement":case "EmptyStatement":case "ExpressionStatement":case "ForInStatement":case "ForStatement":case "IfStatement":case "LabeledStatement":case "ReturnStatement":case "SwitchStatement":case "ThrowStatement":case "TryStatement":case "VariableDeclaration":case "WhileStatement":case "WithStatement":return!0}return!1}
function k(d){switch(d.type){case "IfStatement":return null!=d.alternate?d.alternate:d.consequent;case "LabeledStatement":case "ForStatement":case "ForInStatement":case "WhileStatement":case "WithStatement":return d.body}return null}c0={isExpression:function(d){if(null==d)return!1;switch(d.type){case "ArrayExpression":case "AssignmentExpression":case "BinaryExpression":case "CallExpression":case "ConditionalExpression":case "FunctionExpression":case "Identifier":case "Literal":case "LogicalExpression":case "MemberExpression":case "NewExpression":case "ObjectExpression":case "SequenceExpression":case "ThisExpression":case "UnaryExpression":case "UpdateExpression":return!0}return!1},
isStatement:c,isIterationStatement:function(d){if(null==d)return!1;switch(d.type){case "DoWhileStatement":case "ForInStatement":case "ForStatement":case "WhileStatement":return!0}return!1},isSourceElement:function(d){return c(d)||null!=d&&"FunctionDeclaration"===d.type},isProblematicIfStatement:function(d){if("IfStatement"!==d.type||null==d.alternate)return!1;d=d.consequent;do{if("IfStatement"===d.type&&null==d.alternate)return!0;d=k(d)}while(d);return!1},trailingStatement:k}})();var fba=c0,d0={};
(function(){function c(g){if(65535>=g)return String.fromCharCode(g);var l=String.fromCharCode(Math.floor((g-65536)/1024)+55296);g=String.fromCharCode((g-65536)%1024+56320);return l+g}var k;var d=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var h=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var n=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/;
var b=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
var e=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];var m=Array(128);for(k=0;128>k;++k)m[k]=97<=k&&122>=k||65<=k&&90>=k||36===k||95===k;var a=Array(128);for(k=0;128>k;++k)a[k]=97<=k&&122>=k||65<=k&&90>=k||48<=k&&57>=k||36===k||95===k;d0={isDecimalDigit:function(g){return 48<=g&&57>=g},isHexDigit:function(g){return 48<=g&&57>=g||97<=g&&102>=g||65<=g&&70>=g},isOctalDigit:function(g){return 48<=g&&55>=g},isWhiteSpace:function(g){return 32===g||9===g||11===g||12===
g||160===g||5760<=g&&0<=e.indexOf(g)},isLineTerminator:function(g){return 10===g||13===g||8232===g||8233===g},isIdentifierStartES5:function(g){return 128>g?m[g]:d.test(c(g))},isIdentifierPartES5:function(g){return 128>g?a[g]:h.test(c(g))},isIdentifierStartES6:function(g){return 128>g?m[g]:n.test(c(g))},isIdentifierPartES6:function(g){return 128>g?a[g]:b.test(c(g))}}})();var e0=d0,f0={};(function(){function c(m,a){return a||"yield"!==m?k(m,a):!1}function k(m,a){if(a)a:switch(m){case "implements":case "interface":case "package":case "private":case "protected":case "public":case "static":case "let":a=
!0;break a;default:a=!1}if(a)return!0;switch(m.length){case 2:return"if"===m||"in"===m||"do"===m;case 3:return"var"===m||"for"===m||"new"===m||"try"===m;case 4:return"this"===m||"else"===m||"case"===m||"void"===m||"with"===m||"enum"===m;case 5:return"while"===m||"break"===m||"catch"===m||"throw"===m||"const"===m||"yield"===m||"class"===m||"super"===m;case 6:return"return"===m||"typeof"===m||"delete"===m||"switch"===m||"export"===m||"import"===m;case 7:return"default"===m||"finally"===m||"extends"===
m;case 8:return"function"===m||"continue"===m||"debugger"===m;case 10:return"instanceof"===m;default:return!1}}function d(m,a){return"null"===m||"true"===m||"false"===m||c(m,a)}function h(m,a){return"null"===m||"true"===m||"false"===m||k(m,a)}function n(m){var a;if(0===m.length)return!1;var g=m.charCodeAt(0);if(!e.isIdentifierStartES5(g))return!1;var l=1;for(a=m.length;l<a;++l)if(g=m.charCodeAt(l),!e.isIdentifierPartES5(g))return!1;return!0}function b(m){var a;if(0===m.length)return!1;var g=e.isIdentifierStartES6;
var l=0;for(a=m.length;l<a;++l){var q=m.charCodeAt(l);if(55296<=q&&56319>=q){++l;if(l>=a)return!1;var r=m.charCodeAt(l);if(!(56320<=r&&57343>=r))return!1;q=1024*(q-55296)+(r-56320)+65536}if(!g(q))return!1;g=e.isIdentifierPartES6}return!0}var e=e0;f0={isKeywordES5:c,isKeywordES6:k,isReservedWordES5:d,isReservedWordES6:h,isRestrictedWord:function(m){return"eval"===m||"arguments"===m},isIdentifierNameES5:n,isIdentifierNameES6:b,isIdentifierES5:function(m,a){return n(m)&&!d(m,a)},isIdentifierES6:function(m,
a){return b(m)&&!h(m,a)}}})();var gba=f0,RC={};RC.ast=fba;RC.code=e0;RC.keyword=gba;var ol={getArg:function(c,k,d){if(k in c)return c[k];if(3===arguments.length)return d;throw Error('"'+k+'" is a required argument.');}},zQ=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,b5=/^data:.+,.+$/;ol.urlParse=Kr;ol.urlGenerate=Dt;ol.normalize=mB;ol.join=nB;ol.isAbsolute=function(c){return"/"===c.charAt(0)||zQ.test(c)};ol.relative=function(c,k){""===c&&(c=".");c=c.replace(/\/$/,"");for(var d=
0;0!==k.indexOf(c+"/");){var h=c.lastIndexOf("/");if(0>h)return k;c=c.slice(0,h);if(c.match(/^([^\/]+:\/)?\/*$/))return k;++d}return Array(d+1).join("../")+k.substr(c.length+1)};var g0=!("__proto__"in Object.create(null));ol.toSetString=g0?hp:uE;ol.fromSetString=g0?hp:oB;ol.compareByOriginalPositions=function(c,k,d){var h=Et(c.source,k.source);if(0!==h)return h;h=c.originalLine-k.originalLine;if(0!==h)return h;h=c.originalColumn-k.originalColumn;if(0!==h||d)return h;h=c.generatedColumn-k.generatedColumn;
if(0!==h)return h;h=c.generatedLine-k.generatedLine;return 0!==h?h:Et(c.name,k.name)};ol.compareByGeneratedPositionsDeflated=function(c,k,d){var h=c.generatedLine-k.generatedLine;if(0!==h)return h;h=c.generatedColumn-k.generatedColumn;if(0!==h||d)return h;h=Et(c.source,k.source);if(0!==h)return h;h=c.originalLine-k.originalLine;if(0!==h)return h;h=c.originalColumn-k.originalColumn;return 0!==h?h:Et(c.name,k.name)};ol.compareByGeneratedPositionsInflated=function(c,k){var d=c.generatedLine-k.generatedLine;
if(0!==d)return d;d=c.generatedColumn-k.generatedColumn;if(0!==d)return d;d=Et(c.source,k.source);if(0!==d)return d;d=c.originalLine-k.originalLine;if(0!==d)return d;d=c.originalColumn-k.originalColumn;return 0!==d?d:Et(c.name,k.name)};ol.parseSourceMapInput=function(c){return JSON.parse(c.replace(/^\)]}'[^\n]*\n/,""))};ol.computeSourceURL=function(c,k,d){k=k||"";c&&("/"!==c[c.length-1]&&"/"!==k[0]&&(c+="/"),k=c+k);if(d){c=Kr(d);if(!c)throw Error("sourceMapURL could not be parsed");c.path&&(d=c.path.lastIndexOf("/"),
0<=d&&(c.path=c.path.substring(0,d+1)));k=nB(Dt(c),k)}return mB(k)};var lH={},h0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");lH.encode=function(c){if(0<=c&&c<h0.length)return h0[c];throw new TypeError("Must be between 0 and 63: "+c);};lH.decode=function(c){return 65<=c&&90>=c?c-65:97<=c&&122>=c?c-97+26:48<=c&&57>=c?c-48+52:43==c?62:47==c?63:-1};var uA={encode:function(c){var k="",d=0>c?(-c<<1)+1:c<<1;do c=d&31,d>>>=5,0<d&&(c|=32),k+=lH.encode(c);while(0<d);return k},
decode:function(c,k,d){var h=c.length,n=0,b=0;do{if(k>=h)throw Error("Expected more digits in base 64 VLQ value.");var e=lH.decode(c.charCodeAt(k++));if(-1===e)throw Error("Invalid base64 digit: "+c.charAt(k-1));var m=!!(e&32);e&=31;n+=e<<b;b+=5}while(m);c=n>>1;d.value=1===(n&1)?-c:c;d.rest=k}},lm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,VN=ol,WN=Object.prototype.hasOwnProperty,Mw="undefined"!==typeof Map;jp.fromArray=function(c,k){for(var d=new jp,h=0,n=c.length;h<
n;h++)d.add(c[h],k);return d};jp.prototype.size=function(){return Mw?(this||lm)._set.size:Object.getOwnPropertyNames((this||lm)._set).length};jp.prototype.add=function(c,k){var d=Mw?c:VN.toSetString(c),h=Mw?this.has(c):WN.call((this||lm)._set,d),n=(this||lm)._array.length;h&&!k||(this||lm)._array.push(c);h||(Mw?(this||lm)._set.set(c,n):(this||lm)._set[d]=n)};jp.prototype.has=function(c){if(Mw)return(this||lm)._set.has(c);c=VN.toSetString(c);return WN.call((this||lm)._set,c)};jp.prototype.indexOf=
function(c){if(Mw){var k=(this||lm)._set.get(c);if(0<=k)return k}else if(k=VN.toSetString(c),WN.call((this||lm)._set,k))return(this||lm)._set[k];throw Error('"'+c+'" is not in the set.');};jp.prototype.at=function(c){if(0<=c&&c<(this||lm)._array.length)return(this||lm)._array[c];throw Error("No element indexed by "+c);};jp.prototype.toArray=function(){return(this||lm)._array.slice()};var kp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,i0=ol;Nw.prototype.unsortedForEach=
function(c,k){(this||kp)._array.forEach(c,k)};Nw.prototype.add=function(c){var k=(this||kp)._last,d=k.generatedLine,h=c.generatedLine,n=k.generatedColumn,b=c.generatedColumn;h>d||h==d&&b>=n||0>=i0.compareByGeneratedPositionsInflated(k,c)?(this||kp)._last=c:(this||kp)._sorted=!1;(this||kp)._array.push(c)};Nw.prototype.toArray=function(){(this||kp)._sorted||((this||kp)._array.sort(i0.compareByGeneratedPositionsInflated),(this||kp)._sorted=!0);return(this||kp)._array};var wh="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,Sk=ol,vE=jp,c5=Nw;ri.prototype._version=3;ri.fromSourceMap=function(c){var k=c.sourceRoot,d=new ri({file:c.file,sourceRoot:k});c.eachMapping(function(h){var n={generated:{line:h.generatedLine,column:h.generatedColumn}};null!=h.source&&(n.source=h.source,null!=k&&(n.source=Sk.relative(k,n.source)),n.original={line:h.originalLine,column:h.originalColumn},null!=h.name&&(n.name=h.name));d.addMapping(n)});c.sources.forEach(function(h){var n=h;null!==k&&
(n=Sk.relative(k,h));d._sources.has(n)||d._sources.add(n);n=c.sourceContentFor(h);null!=n&&d.setSourceContent(h,n)});return d};ri.prototype.addMapping=function(c){var k=Sk.getArg(c,"generated"),d=Sk.getArg(c,"original",null),h=Sk.getArg(c,"source",null);c=Sk.getArg(c,"name",null);(this||wh)._skipValidation||this._validateMapping(k,d,h,c);null!=h&&(h=String(h),(this||wh)._sources.has(h)||(this||wh)._sources.add(h));null!=c&&(c=String(c),(this||wh)._names.has(c)||(this||wh)._names.add(c));(this||wh)._mappings.add({generatedLine:k.line,
generatedColumn:k.column,originalLine:null!=d&&d.line,originalColumn:null!=d&&d.column,source:h,name:c})};ri.prototype.setSourceContent=function(c,k){null!=(this||wh)._sourceRoot&&(c=Sk.relative((this||wh)._sourceRoot,c));null!=k?((this||wh)._sourcesContents||((this||wh)._sourcesContents=Object.create(null)),(this||wh)._sourcesContents[Sk.toSetString(c)]=k):(this||wh)._sourcesContents&&(delete (this||wh)._sourcesContents[Sk.toSetString(c)],0===Object.keys((this||wh)._sourcesContents).length&&((this||
wh)._sourcesContents=null))};ri.prototype.applySourceMap=function(c,k,d){var h=k;if(null==k){if(null==c.file)throw Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');h=c.file}var n=(this||wh)._sourceRoot;null!=n&&(h=Sk.relative(n,h));var b=new vE,e=new vE;(this||wh)._mappings.unsortedForEach(function(m){if(m.source===h&&null!=m.originalLine){var a=c.originalPositionFor({line:m.originalLine,column:m.originalColumn});
null!=a.source&&(m.source=a.source,null!=d&&(m.source=Sk.join(d,m.source)),null!=n&&(m.source=Sk.relative(n,m.source)),m.originalLine=a.line,m.originalColumn=a.column,null!=a.name&&(m.name=a.name))}a=m.source;null==a||b.has(a)||b.add(a);m=m.name;null==m||e.has(m)||e.add(m)},this||wh);(this||wh)._sources=b;(this||wh)._names=e;c.sources.forEach(function(m){var a=c.sourceContentFor(m);null!=a&&(null!=d&&(m=Sk.join(d,m)),null!=n&&(m=Sk.relative(n,m)),this.setSourceContent(m,a))},this||wh)};ri.prototype._validateMapping=
function(c,k,d,h){if(k&&"number"!==typeof k.line&&"number"!==typeof k.column)throw Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(c&&"line"in c&&"column"in c&&0<c.line&&0<=c.column&&!k&&!d&&!h||c&&"line"in c&&"column"in c&&k&&"line"in k&&"column"in k&&0<c.line&&0<=c.column&&0<k.line&&0<=k.column&&
d))throw Error("Invalid mapping: "+JSON.stringify({generated:c,source:d,original:k,name:h}));};ri.prototype._serializeMappings=function(){for(var c=0,k=1,d=0,h=0,n=0,b=0,e="",m,a,g,l=(this||wh)._mappings.toArray(),q=0,r=l.length;q<r;q++){a=l[q];m="";if(a.generatedLine!==k)for(c=0;a.generatedLine!==k;)m+=";",k++;else if(0<q){if(!Sk.compareByGeneratedPositionsInflated(a,l[q-1]))continue;m+=","}m+=uA.encode(a.generatedColumn-c);c=a.generatedColumn;null!=a.source&&(g=(this||wh)._sources.indexOf(a.source),
m+=uA.encode(g-b),b=g,m+=uA.encode(a.originalLine-1-h),h=a.originalLine-1,m+=uA.encode(a.originalColumn-d),d=a.originalColumn,null!=a.name&&(a=(this||wh)._names.indexOf(a.name),m+=uA.encode(a-n),n=a));e+=m}return e};ri.prototype._generateSourcesContent=function(c,k){return c.map(function(d){if(!(this||wh)._sourcesContents)return null;null!=k&&(d=Sk.relative(k,d));d=Sk.toSetString(d);return Object.prototype.hasOwnProperty.call((this||wh)._sourcesContents,d)?(this||wh)._sourcesContents[d]:null},this||
wh)};ri.prototype.toJSON=function(){var c={version:(this||wh)._version,sources:(this||wh)._sources.toArray(),names:(this||wh)._names.toArray(),mappings:this._serializeMappings()};null!=(this||wh)._file&&(c.file=(this||wh)._file);null!=(this||wh)._sourceRoot&&(c.sourceRoot=(this||wh)._sourceRoot);(this||wh)._sourcesContents&&(c.sourcesContent=this._generateSourcesContent(c.sources,c.sourceRoot));return c};ri.prototype.toString=function(){return JSON.stringify(this.toJSON())};var wE={GREATEST_LOWER_BOUND:1,
LEAST_UPPER_BOUND:2,search:function(c,k,d,h){if(0===k.length)return-1;c=Dn(-1,k.length,c,k,d,h||wE.GREATEST_LOWER_BOUND);if(0>c)return-1;for(;0<=c-1&&0===d(k[c],k[c-1],!0);)--c;return c}},Ce="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Sf=ol,XN=wE,My=jp,SC=function(c,k){$u(c,k,0,c.length-1)};wj.fromSourceMap=function(c,k){return Tk.fromSourceMap(c,k)};wj.prototype._version=3;wj.prototype.__generatedMappings=null;Object.defineProperty(wj.prototype,"_generatedMappings",
{configurable:!0,enumerable:!0,get:function(){(this||Ce).__generatedMappings||this._parseMappings((this||Ce)._mappings,(this||Ce).sourceRoot);return(this||Ce).__generatedMappings}});wj.prototype.__originalMappings=null;Object.defineProperty(wj.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){(this||Ce).__originalMappings||this._parseMappings((this||Ce)._mappings,(this||Ce).sourceRoot);return(this||Ce).__originalMappings}});wj.prototype._charIsMappingSeparator=function(c,
k){c=c.charAt(k);return";"===c||","===c};wj.prototype._parseMappings=function(c,k){throw Error("Subclasses must implement _parseMappings");};wj.GENERATED_ORDER=1;wj.ORIGINAL_ORDER=2;wj.GREATEST_LOWER_BOUND=1;wj.LEAST_UPPER_BOUND=2;wj.prototype.eachMapping=function(c,k,d){k=k||null;switch(d||wj.GENERATED_ORDER){case wj.GENERATED_ORDER:d=(this||Ce)._generatedMappings;break;case wj.ORIGINAL_ORDER:d=(this||Ce)._originalMappings;break;default:throw Error("Unknown order of iteration.");}var h=(this||Ce).sourceRoot;
d.map(function(n){var b=null===n.source?null:(this||Ce)._sources.at(n.source);b=Sf.computeSourceURL(h,b,(this||Ce)._sourceMapURL);return{source:b,generatedLine:n.generatedLine,generatedColumn:n.generatedColumn,originalLine:n.originalLine,originalColumn:n.originalColumn,name:null===n.name?null:(this||Ce)._names.at(n.name)}},this||Ce).forEach(c,k)};wj.prototype.allGeneratedPositionsFor=function(c){var k=Sf.getArg(c,"line"),d={source:Sf.getArg(c,"source"),originalLine:k,originalColumn:Sf.getArg(c,"column",
0)};d.source=this._findSourceIndex(d.source);if(0>d.source)return[];var h=[];d=this._findMapping(d,(this||Ce)._originalMappings,"originalLine","originalColumn",Sf.compareByOriginalPositions,XN.LEAST_UPPER_BOUND);if(0<=d){var n=(this||Ce)._originalMappings[d];if(void 0===c.column)for(k=n.originalLine;n&&n.originalLine===k;)h.push({line:Sf.getArg(n,"generatedLine",null),column:Sf.getArg(n,"generatedColumn",null),lastColumn:Sf.getArg(n,"lastGeneratedColumn",null)}),n=(this||Ce)._originalMappings[++d];
else for(c=n.originalColumn;n&&n.originalLine===k&&n.originalColumn==c;)h.push({line:Sf.getArg(n,"generatedLine",null),column:Sf.getArg(n,"generatedColumn",null),lastColumn:Sf.getArg(n,"lastGeneratedColumn",null)}),n=(this||Ce)._originalMappings[++d]}return h};Tk.prototype=Object.create(wj.prototype);Tk.prototype.consumer=wj;Tk.prototype._findSourceIndex=function(c){var k=c;null!=(this||Ce).sourceRoot&&(k=Sf.relative((this||Ce).sourceRoot,k));if((this||Ce)._sources.has(k))return(this||Ce)._sources.indexOf(k);
for(k=0;k<(this||Ce)._absoluteSources.length;++k)if((this||Ce)._absoluteSources[k]==c)return k;return-1};Tk.fromSourceMap=function(c,k){var d=Object.create(Tk.prototype),h=d._names=My.fromArray(c._names.toArray(),!0),n=d._sources=My.fromArray(c._sources.toArray(),!0);d.sourceRoot=c._sourceRoot;d.sourcesContent=c._generateSourcesContent(d._sources.toArray(),d.sourceRoot);d.file=c._file;d._sourceMapURL=k;d._absoluteSources=d._sources.toArray().map(function(q){return Sf.computeSourceURL(d.sourceRoot,
q,k)});c=c._mappings.toArray().slice();for(var b=d.__generatedMappings=[],e=d.__originalMappings=[],m=0,a=c.length;m<a;m++){var g=c[m],l=new Ny;l.generatedLine=g.generatedLine;l.generatedColumn=g.generatedColumn;g.source&&(l.source=n.indexOf(g.source),l.originalLine=g.originalLine,l.originalColumn=g.originalColumn,g.name&&(l.name=h.indexOf(g.name)),e.push(l));b.push(l)}SC(d.__originalMappings,Sf.compareByOriginalPositions);return d};Tk.prototype._version=3;Object.defineProperty(Tk.prototype,"sources",
{get:function(){return(this||Ce)._absoluteSources.slice()}});Tk.prototype._parseMappings=function(c,k){k=1;for(var d=0,h=0,n=0,b=0,e=0,m=c.length,a=0,g={},l={},q=[],r=[],u,v,y,z,A;a<m;)if(";"===c.charAt(a))k++,a++,d=0;else if(","===c.charAt(a))a++;else{u=new Ny;u.generatedLine=k;for(z=a;z<m&&!this._charIsMappingSeparator(c,z);z++);v=c.slice(a,z);if(y=g[v])a+=v.length;else{for(y=[];a<z;)uA.decode(c,a,l),A=l.value,a=l.rest,y.push(A);if(2===y.length)throw Error("Found a source, but no line and column");
if(3===y.length)throw Error("Found a source and line, but no column");g[v]=y}u.generatedColumn=d+y[0];d=u.generatedColumn;1<y.length&&(u.source=b+y[1],b+=y[1],u.originalLine=h+y[2],h=u.originalLine,u.originalLine+=1,u.originalColumn=n+y[3],n=u.originalColumn,4<y.length&&(u.name=e+y[4],e+=y[4]));r.push(u);"number"===typeof u.originalLine&&q.push(u)}SC(r,Sf.compareByGeneratedPositionsDeflated);(this||Ce).__generatedMappings=r;SC(q,Sf.compareByOriginalPositions);(this||Ce).__originalMappings=q};Tk.prototype._findMapping=
function(c,k,d,h,n,b){if(0>=c[d])throw new TypeError("Line must be greater than or equal to 1, got "+c[d]);if(0>c[h])throw new TypeError("Column must be greater than or equal to 0, got "+c[h]);return XN.search(c,k,n,b)};Tk.prototype.computeColumnSpans=function(){for(var c=0;c<(this||Ce)._generatedMappings.length;++c){var k=(this||Ce)._generatedMappings[c];if(c+1<(this||Ce)._generatedMappings.length){var d=(this||Ce)._generatedMappings[c+1];if(k.generatedLine===d.generatedLine){k.lastGeneratedColumn=
d.generatedColumn-1;continue}}k.lastGeneratedColumn=Infinity}};Tk.prototype.originalPositionFor=function(c){var k={generatedLine:Sf.getArg(c,"line"),generatedColumn:Sf.getArg(c,"column")};c=this._findMapping(k,(this||Ce)._generatedMappings,"generatedLine","generatedColumn",Sf.compareByGeneratedPositionsDeflated,Sf.getArg(c,"bias",wj.GREATEST_LOWER_BOUND));if(0<=c&&(c=(this||Ce)._generatedMappings[c],c.generatedLine===k.generatedLine)){k=Sf.getArg(c,"source",null);null!==k&&(k=(this||Ce)._sources.at(k),
k=Sf.computeSourceURL((this||Ce).sourceRoot,k,(this||Ce)._sourceMapURL));var d=Sf.getArg(c,"name",null);null!==d&&(d=(this||Ce)._names.at(d));return{source:k,line:Sf.getArg(c,"originalLine",null),column:Sf.getArg(c,"originalColumn",null),name:d}}return{source:null,line:null,column:null,name:null}};Tk.prototype.hasContentsOfAllSources=function(){return(this||Ce).sourcesContent?(this||Ce).sourcesContent.length>=(this||Ce)._sources.size()&&!(this||Ce).sourcesContent.some(function(c){return null==c}):
!1};Tk.prototype.sourceContentFor=function(c,k){if(!(this||Ce).sourcesContent)return null;var d=this._findSourceIndex(c);if(0<=d)return(this||Ce).sourcesContent[d];null!=(this||Ce).sourceRoot&&(c=Sf.relative((this||Ce).sourceRoot,c));var h;if(null!=(this||Ce).sourceRoot&&(h=Sf.urlParse((this||Ce).sourceRoot))){d=c.replace(/^file:\/\//,"");if("file"==h.scheme&&(this||Ce)._sources.has(d))return(this||Ce).sourcesContent[(this||Ce)._sources.indexOf(d)];if((!h.path||"/"==h.path)&&(this||Ce)._sources.has("/"+
c))return(this||Ce).sourcesContent[(this||Ce)._sources.indexOf("/"+c)]}if(k)return null;throw Error('"'+c+'" is not in the SourceMap.');};Tk.prototype.generatedPositionFor=function(c){var k=Sf.getArg(c,"source");k=this._findSourceIndex(k);if(0>k)return{line:null,column:null,lastColumn:null};k={source:k,originalLine:Sf.getArg(c,"line"),originalColumn:Sf.getArg(c,"column")};c=this._findMapping(k,(this||Ce)._originalMappings,"originalLine","originalColumn",Sf.compareByOriginalPositions,Sf.getArg(c,"bias",
wj.GREATEST_LOWER_BOUND));return 0<=c&&(c=(this||Ce)._originalMappings[c],c.source===k.source)?{line:Sf.getArg(c,"generatedLine",null),column:Sf.getArg(c,"generatedColumn",null),lastColumn:Sf.getArg(c,"lastGeneratedColumn",null)}:{line:null,column:null,lastColumn:null}};Th.prototype=Object.create(wj.prototype);Th.prototype.constructor=wj;Th.prototype._version=3;Object.defineProperty(Th.prototype,"sources",{get:function(){for(var c=[],k=0;k<(this||Ce)._sections.length;k++)for(var d=0;d<(this||Ce)._sections[k].consumer.sources.length;d++)c.push((this||
Ce)._sections[k].consumer.sources[d]);return c}});Th.prototype.originalPositionFor=function(c){var k={generatedLine:Sf.getArg(c,"line"),generatedColumn:Sf.getArg(c,"column")},d=XN.search(k,(this||Ce)._sections,function(h,n){var b=h.generatedLine-n.generatedOffset.generatedLine;return b?b:h.generatedColumn-n.generatedOffset.generatedColumn});return(d=(this||Ce)._sections[d])?d.consumer.originalPositionFor({line:k.generatedLine-(d.generatedOffset.generatedLine-1),column:k.generatedColumn-(d.generatedOffset.generatedLine===
k.generatedLine?d.generatedOffset.generatedColumn-1:0),bias:c.bias}):{source:null,line:null,column:null,name:null}};Th.prototype.hasContentsOfAllSources=function(){return(this||Ce)._sections.every(function(c){return c.consumer.hasContentsOfAllSources()})};Th.prototype.sourceContentFor=function(c,k){for(var d=0;d<(this||Ce)._sections.length;d++){var h=(this||Ce)._sections[d].consumer.sourceContentFor(c,!0);if(h)return h}if(k)return null;throw Error('"'+c+'" is not in the SourceMap.');};Th.prototype.generatedPositionFor=
function(c){for(var k=0;k<(this||Ce)._sections.length;k++){var d=(this||Ce)._sections[k];if(-1!==d.consumer._findSourceIndex(Sf.getArg(c,"source"))){var h=d.consumer.generatedPositionFor(c);if(h)return{line:h.line+(d.generatedOffset.generatedLine-1),column:h.column+(d.generatedOffset.generatedLine===h.line?d.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}};Th.prototype._parseMappings=function(c,k){(this||Ce).__generatedMappings=[];(this||Ce).__originalMappings=[];for(c=0;c<(this||
Ce)._sections.length;c++){k=(this||Ce)._sections[c];for(var d=k.consumer._generatedMappings,h=0;h<d.length;h++){var n=d[h],b=k.consumer._sources.at(n.source);b=Sf.computeSourceURL(k.consumer.sourceRoot,b,(this||Ce)._sourceMapURL);(this||Ce)._sources.add(b);b=(this||Ce)._sources.indexOf(b);var e=null;n.name&&(e=k.consumer._names.at(n.name),(this||Ce)._names.add(e),e=(this||Ce)._names.indexOf(e));n={source:b,generatedLine:n.generatedLine+(k.generatedOffset.generatedLine-1),generatedColumn:n.generatedColumn+
(k.generatedOffset.generatedLine===n.generatedLine?k.generatedOffset.generatedColumn-1:0),originalLine:n.originalLine,originalColumn:n.originalColumn,name:e};(this||Ce).__generatedMappings.push(n);"number"===typeof n.originalLine&&(this||Ce).__originalMappings.push(n)}}SC((this||Ce).__generatedMappings,Sf.compareByGeneratedPositionsDeflated);SC((this||Ce).__originalMappings,Sf.compareByOriginalPositions)};var mi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,mH=ol,
hba=/(\r?\n)/;ok.fromStringWithSourceMap=function(c,k,d){function h(q,r){if(null===q||void 0===q.source)n.add(r);else{var u=d?mH.join(d,q.source):q.source;n.add(new ok(q.originalLine,q.originalColumn,u,r,q.name))}}var n=new ok,b=c.split(hba),e=0,m=function(){var q=e<b.length?b[e++]:void 0,r=(e<b.length?b[e++]:void 0)||"";return q+r},a=1,g=0,l=null;k.eachMapping(function(q){if(null!==l)if(a<q.generatedLine)h(l,m()),a++,g=0;else{var r=b[e]||"",u=r.substr(0,q.generatedColumn-g);b[e]=r.substr(q.generatedColumn-
g);g=q.generatedColumn;h(l,u);l=q;return}for(;a<q.generatedLine;)n.add(m()),a++;g<q.generatedColumn&&(r=b[e]||"",n.add(r.substr(0,q.generatedColumn)),b[e]=r.substr(q.generatedColumn),g=q.generatedColumn);l=q},this||mi);e<b.length&&(l&&h(l,m()),n.add(b.splice(e).join("")));k.sources.forEach(function(q){var r=k.sourceContentFor(q);null!=r&&(null!=d&&(q=mH.join(d,q)),n.setSourceContent(q,r))});return n};ok.prototype.add=function(c){if(Array.isArray(c))c.forEach(function(k){this.add(k)},this||mi);else if(c.$$$isSourceNode$$$||
"string"===typeof c)c&&(this||mi).children.push(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this||mi};ok.prototype.prepend=function(c){if(Array.isArray(c))for(var k=c.length-1;0<=k;k--)this.prepend(c[k]);else if(c.$$$isSourceNode$$$||"string"===typeof c)(this||mi).children.unshift(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this||mi};ok.prototype.walk=function(c){for(var k,
d=0,h=(this||mi).children.length;d<h;d++)k=(this||mi).children[d],k.$$$isSourceNode$$$?k.walk(c):""!==k&&c(k,{source:(this||mi).source,line:(this||mi).line,column:(this||mi).column,name:(this||mi).name})};ok.prototype.join=function(c){var k,d=(this||mi).children.length;if(0<d){var h=[];for(k=0;k<d-1;k++)h.push((this||mi).children[k]),h.push(c);h.push((this||mi).children[k]);(this||mi).children=h}return this||mi};ok.prototype.replaceRight=function(c,k){var d=(this||mi).children[(this||mi).children.length-
1];d.$$$isSourceNode$$$?d.replaceRight(c,k):"string"===typeof d?(this||mi).children[(this||mi).children.length-1]=d.replace(c,k):(this||mi).children.push("".replace(c,k));return this||mi};ok.prototype.setSourceContent=function(c,k){(this||mi).sourceContents[mH.toSetString(c)]=k};ok.prototype.walkSourceContents=function(c){for(var k=0,d=(this||mi).children.length;k<d;k++)(this||mi).children[k].$$$isSourceNode$$$&&(this||mi).children[k].walkSourceContents(c);var h=Object.keys((this||mi).sourceContents);
k=0;for(d=h.length;k<d;k++)c(mH.fromSetString(h[k]),(this||mi).sourceContents[h[k]])};ok.prototype.toString=function(){var c="";this.walk(function(k){c+=k});return c};ok.prototype.toStringWithSourceMap=function(c){var k="",d=1,h=0,n=new ri(c),b=!1,e=null,m=null,a=null,g=null;this.walk(function(l,q){k+=l;null!==q.source&&null!==q.line&&null!==q.column?(e===q.source&&m===q.line&&a===q.column&&g===q.name||n.addMapping({source:q.source,original:{line:q.line,column:q.column},generated:{line:d,column:h},
name:q.name}),e=q.source,m=q.line,a=q.column,g=q.name,b=!0):b&&(n.addMapping({generated:{line:d,column:h}}),e=null,b=!1);for(var r=0,u=l.length;r<u;r++)10===l.charCodeAt(r)?(d++,h=0,r+1===u?(e=null,b=!1):b&&n.addMapping({source:q.source,original:{line:q.line,column:q.column},generated:{line:d,column:h},name:q.name})):h++});this.walkSourceContents(function(l,q){n.setSourceContent(l,q)});return{code:k,map:n}};var Dl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Tm=
{};(function(){function c(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function k(U,
na){var Aa="";for(na|=0;0<na;na>>>=1,U+=U)na&1&&(Aa+=U);return Aa}function d(U){var na=U.length;return na&&ac.code.isLineTerminator(U.charCodeAt(na-1))}function h(U,na){for(var Aa in na)na.hasOwnProperty(Aa)&&(U[Aa]=na[Aa]);return U}function n(U,na){function Aa(od){return"object"===typeof od&&od instanceof Object&&!(od instanceof RegExp)}var hb;for(hb in na)if(na.hasOwnProperty(hb)){var Pb=na[hb];Aa(Pb)?Aa(U[hb])?n(U[hb],Pb):U[hb]=n({},Pb):U[hb]=Pb}return U}function b(U,na){return 8232===(U&-2)?(na?
"u":"\\u")+(8232===U?"2028":"2029"):10===U||13===U?(na?"":"\\")+(10===U?"n":"r"):String.fromCharCode(U)}function e(U,na){if(8===U)return"\\b";if(12===U)return"\\f";if(9===U)return"\\t";var Aa=U.toString(16).toUpperCase();return D||255<U?"\\u"+"0000".slice(Aa.length)+Aa:0!==U||ac.code.isDecimalDigit(na)?11===U?"\\x0B":"\\x"+"00".slice(Aa.length)+Aa:"\\0"}function m(U){if(92===U)return"\\\\";if(10===U)return"\\n";if(13===U)return"\\r";if(8232===U)return"\\u2028";if(8233===U)return"\\u2029";throw Error("Incorrectly classified character");
}function a(U){var na,Aa="";var hb=0;for(na=U.length;hb<na;++hb){var Pb=U[hb];Aa+=Array.isArray(Pb)?a(Pb):Pb}return Aa}function g(U,na){if(!yb)return Array.isArray(U)?a(U):U;if(null==na){if(U instanceof P)return U;na={}}return null==na.loc?new P(null,null,yb,U,na.name||null):new P(na.loc.start.line,na.loc.start.column,!0===yb?na.loc.source||null:yb,U,na.name||null)}function l(){return ma?ma:" "}function q(U,na){var Aa=g(U).toString();if(0===Aa.length)return[na];var hb=g(na).toString();if(0===hb.length)return[U];
Aa=Aa.charCodeAt(Aa.length-1);hb=hb.charCodeAt(0);return(43===Aa||45===Aa)&&Aa===hb||ac.code.isIdentifierPartES5(Aa)&&ac.code.isIdentifierPartES5(hb)||47===Aa&&105===hb?[U,l(),na]:ac.code.isWhiteSpace(Aa)||ac.code.isLineTerminator(Aa)||ac.code.isWhiteSpace(hb)||ac.code.isLineTerminator(hb)?[U,na]:[U,ma,na]}function r(U){var na=ea;ea+=ra;U(ea);ea=na}function u(U,na){if("Line"===U.type){if(d(U.value))return"//"+U.value;na="//"+U.value;Nb||(na+="\n");return na}if(ha.format.indent.adjustMultilineComment&&
/[\n\r]/.test(U.value)){var Aa,hb;U=("/*"+U.value+"*/").split(/\r\n|[\r\n]/);var Pb=Number.MAX_VALUE;var od=1;for(Aa=U.length;od<Aa;++od){var nd=U[od];for(hb=0;hb<nd.length&&ac.code.isWhiteSpace(nd.charCodeAt(hb));)++hb;Pb>hb&&(Pb=hb)}"undefined"!==typeof na?(nd=ea,"*"===U[1][Pb]&&(na+=" "),ea=na):(Pb&1&&--Pb,nd=ea);od=1;for(Aa=U.length;od<Aa;++od)na=g([ea,U[od].slice(Pb)]),U[od]=yb?na.join(""):na;ea=nd;return U.join("\n")}return"/*"+U.value+"*/"}function v(U,na){var Aa;if(U.leadingComments&&0<U.leadingComments.length){var hb=
na;if(Nb){var Pb=U.leadingComments[0];na=[];var od=Pb.extendedRange;var nd=Pb.range;var Ac=ec.substring(od[0],nd[0]);var xe=(Ac.match(/\n/g)||[]).length;0<xe?(na.push(k("\n",xe)),na.push([ea,u(Pb)])):(na.push(Ac),na.push(u(Pb)));xe=nd;Ac=1;for(Aa=U.leadingComments.length;Ac<Aa;Ac++)Pb=U.leadingComments[Ac],nd=Pb.range,xe=ec.substring(xe[1],nd[0]),xe=(xe.match(/\n/g)||[]).length,na.push(k("\n",xe)),na.push([ea,u(Pb)]),xe=nd;Ac=ec.substring(nd[1],od[1]);xe=(Ac.match(/\n/g)||[]).length;na.push(k("\n",
xe))}else for(Pb=U.leadingComments[0],na=[],X&&U.type===Cc.Program&&0===U.body.length&&na.push("\n"),na.push(u(Pb)),d(g(na).toString())||na.push("\n"),Ac=1,Aa=U.leadingComments.length;Ac<Aa;++Ac)Pb=U.leadingComments[Ac],Pb=[u(Pb)],d(g(Pb).toString())||Pb.push("\n"),na.push([ea,Pb]);na.push([ea,hb])}if(U.trailingComments)if(Nb)Pb=U.trailingComments[0],od=Pb.extendedRange,nd=Pb.range,Ac=ec.substring(od[0],nd[0]),xe=(Ac.match(/\n/g)||[]).length,0<xe?(na.push(k("\n",xe)),na.push([ea,u(Pb)])):(na.push(Ac),
na.push(u(Pb)));else{hb=!d(g(na).toString());Ac=g([ea,na,ra]).toString();for(Aa=Ac.length-1;0<=Aa&&!ac.code.isLineTerminator(Ac.charCodeAt(Aa));--Aa);od=k(" ",Ac.length-1-Aa);Ac=0;for(Aa=U.trailingComments.length;Ac<Aa;++Ac)Pb=U.trailingComments[Ac],hb?(na=0===Ac?[na,ra]:[na,od],na.push(u(Pb,od))):na=[na,[ea,u(Pb)]],Ac===Aa-1||d(g(na).toString())||(na=[na,"\n"])}return na}function y(U,na,Aa){for(var hb=0;U<na;U++)"\n"===ec[U]&&hb++;for(U=1;U<hb;U++)Aa.push(Y)}function z(U,na,Aa){return na<Aa?["(",
U,")"]:U}function A(U){var na;var Aa=U.split(/\r\n|\n/);U=1;for(na=Aa.length;U<na;U++)Aa[U]=Y+ea+Aa[U];return Aa}function B(){}function G(U){return g(U.name,U)}function E(U,na){return U.async?"async"+(na?l():ma):""}function K(U){return U.generator&&!ha.moz.starlessGenerator?"*"+ma:""}function J(U){var na=U.value,Aa="";na.async&&(Aa+=E(na,!U.computed));na.generator&&(Aa+=K(na)?"*":"");return Aa}var P,ea,ra,D,O,L,N,aa,Y,ma,bb,Qa,X,V,ha,xa,yb,ec,Nb;var ac=RC;var Cc=UN.Syntax;var Hb={Sequence:0,Yield:1,
Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,OptionalChaining:16,Call:17,New:18,TaggedTemplate:19,Member:20,Primary:21};var gd={"||":Hb.LogicalOR,"&&":Hb.LogicalAND,"|":Hb.BitwiseOR,"^":Hb.BitwiseXOR,"&":Hb.BitwiseAND,"==":Hb.Equality,"!=":Hb.Equality,"===":Hb.Equality,"!==":Hb.Equality,is:Hb.Equality,isnt:Hb.Equality,"<":Hb.Relational,
">":Hb.Relational,"<=":Hb.Relational,">=":Hb.Relational,"in":Hb.Relational,"instanceof":Hb.Relational,"<<":Hb.BitwiseSHIFT,">>":Hb.BitwiseSHIFT,">>>":Hb.BitwiseSHIFT,"+":Hb.Additive,"-":Hb.Additive,"*":Hb.Multiplicative,"%":Hb.Multiplicative,"/":Hb.Multiplicative,"**":Hb.Exponentiation};B.prototype.maybeBlock=function(U,na){var Aa,hb=this||Dl;var Pb=!ha.comment||!U.leadingComments;if(U.type===Cc.BlockStatement&&Pb)return[ma,this.generateStatement(U,na)];if(U.type===Cc.EmptyStatement&&Pb)return";";
r(function(){Aa=[Y,[ea,hb.generateStatement(U,na)]]});return Aa};B.prototype.maybeBlockSuffix=function(U,na){var Aa=d(g(na).toString());return U.type!==Cc.BlockStatement||ha.comment&&U.leadingComments||Aa?Aa?[na,ea]:[na,Y,ea]:[na,ma]};B.prototype.generatePattern=function(U,na,Aa){return U.type===Cc.Identifier?G(U):this.generateExpression(U,na,Aa)};B.prototype.generateFunctionParams=function(U){var na;var Aa=!1;if(U.type!==Cc.ArrowFunctionExpression||U.rest||U.defaults&&0!==U.defaults.length||1!==
U.params.length||U.params[0].type!==Cc.Identifier){var hb=U.type===Cc.ArrowFunctionExpression?[E(U,!1)]:[];hb.push("(");U.defaults&&(Aa=!0);var Pb=0;for(na=U.params.length;Pb<na;++Pb)Aa&&U.defaults[Pb]?hb.push(this.generateAssignment(U.params[Pb],U.defaults[Pb],"=",Hb.Assignment,7)):hb.push(this.generatePattern(U.params[Pb],Hb.Assignment,7)),Pb+1<na&&hb.push(","+ma);U.rest&&(U.params.length&&hb.push(","+ma),hb.push("..."),hb.push(G(U.rest)));hb.push(")")}else hb=[E(U,!0),G(U.params[0])];return hb};
B.prototype.generateFunctionBody=function(U){var na=this.generateFunctionParams(U);U.type===Cc.ArrowFunctionExpression&&(na.push(ma),na.push("=>"));U.expression?(na.push(ma),U=this.generateExpression(U.body,Hb.Assignment,7),"{"===U.toString().charAt(0)&&(U=["(",U,")"]),na.push(U)):na.push(this.maybeBlock(U.body,9));return na};B.prototype.generateIterationForStatement=function(U,na,Aa){var hb=["for"+(na.await?l()+"await":"")+ma+"("],Pb=this||Dl;r(function(){na.left.type===Cc.VariableDeclaration?r(function(){hb.push(na.left.kind+
l());hb.push(Pb.generateStatement(na.left.declarations[0],0))}):hb.push(Pb.generateExpression(na.left,Hb.Call,7));hb=q(hb,U);hb=[q(hb,Pb.generateExpression(na.right,Hb.Assignment,7)),")"]});hb.push(this.maybeBlock(na.body,Aa));return hb};B.prototype.generatePropertyKey=function(U,na){var Aa=[];na&&Aa.push("[");Aa.push(this.generateExpression(U,Hb.Assignment,7));na&&Aa.push("]");return Aa};B.prototype.generateAssignment=function(U,na,Aa,hb,Pb){Hb.Assignment<hb&&(Pb|=1);return z([this.generateExpression(U,
Hb.Call,Pb),ma+Aa+ma,this.generateExpression(na,Hb.Assignment,Pb)],Hb.Assignment,hb)};B.prototype.semicolon=function(U){return!Qa&&U&32?"":";"};B.Statement={BlockStatement:function(U,na){var Aa,hb,Pb=["{",Y],od=this||Dl;r(function(){0===U.body.length&&Nb&&(Aa=U.range,2<Aa[1]-Aa[0]&&(hb=ec.substring(Aa[0]+1,Aa[1]-1),"\n"===hb[0]&&(Pb=["{"]),Pb.push(hb)));var nd;var Ac=1;na&8&&(Ac|=16);var xe=0;for(nd=U.body.length;xe<nd;++xe){Nb&&(0===xe&&(U.body[0].leadingComments&&(Aa=U.body[0].leadingComments[0].extendedRange,
hb=ec.substring(Aa[0],Aa[1]),"\n"===hb[0]&&(Pb=["{"])),U.body[0].leadingComments||y(U.range[0],U.body[0].range[0],Pb)),0<xe&&(U.body[xe-1].trailingComments||U.body[xe].leadingComments||y(U.body[xe-1].range[1],U.body[xe].range[0],Pb)));xe===nd-1&&(Ac|=32);var oe=U.body[xe].leadingComments&&Nb?od.generateStatement(U.body[xe],Ac):[ea,od.generateStatement(U.body[xe],Ac)];Pb.push(oe);d(g(oe).toString())||(Nb&&xe<nd-1?U.body[xe+1].leadingComments||Pb.push(Y):Pb.push(Y));Nb&&xe===nd-1&&(U.body[xe].trailingComments||
y(U.body[xe].range[1],U.range[1],Pb))}});Pb.push([ea,"}"]);return Pb},BreakStatement:function(U,na){return U.label?"break "+U.label.name+this.semicolon(na):"break"+this.semicolon(na)},ContinueStatement:function(U,na){return U.label?"continue "+U.label.name+this.semicolon(na):"continue"+this.semicolon(na)},ClassBody:function(U,na){var Aa=["{",Y],hb=this||Dl;r(function(Pb){var od;var nd=0;for(od=U.body.length;nd<od;++nd)Aa.push(Pb),Aa.push(hb.generateExpression(U.body[nd],Hb.Sequence,7)),nd+1<od&&Aa.push(Y)});
d(g(Aa).toString())||Aa.push(Y);Aa.push(ea);Aa.push("}");return Aa},ClassDeclaration:function(U,na){na=["class"];U.id&&(na=q(na,this.generateExpression(U.id,Hb.Sequence,7)));if(U.superClass){var Aa=q("extends",this.generateExpression(U.superClass,Hb.Unary,7));na=q(na,Aa)}na.push(ma);na.push(this.generateStatement(U.body,33));return na},DirectiveStatement:function(U,na){if(ha.raw&&U.raw)return U.raw+this.semicolon(na);U=U.directive;var Aa;var hb="double"===N?'"':"'";var Pb=0;for(Aa=U.length;Pb<Aa;++Pb){var od=
U.charCodeAt(Pb);if(39===od){hb='"';break}else if(34===od){hb="'";break}else 92===od&&++Pb}return hb+U+hb+this.semicolon(na)},DoWhileStatement:function(U,na){var Aa=q("do",this.maybeBlock(U.body,1));Aa=this.maybeBlockSuffix(U.body,Aa);return q(Aa,["while"+ma+"(",this.generateExpression(U.test,Hb.Sequence,7),")"+this.semicolon(na)])},CatchClause:function(U,na){var Aa,hb=this||Dl;r(function(){if(U.param){if(Aa=["catch"+ma+"(",hb.generateExpression(U.param,Hb.Sequence,7),")"],U.guard){var Pb=hb.generateExpression(U.guard,
Hb.Sequence,7);Aa.splice(2,0," if ",Pb)}}else Aa=["catch"]});Aa.push(this.maybeBlock(U.body,1));return Aa},DebuggerStatement:function(U,na){return"debugger"+this.semicolon(na)},EmptyStatement:function(U,na){return";"},ExportDefaultDeclaration:function(U,na){var Aa=["export"];var hb=na&32?33:1;Aa=q(Aa,"default");return Aa=B.Statement.hasOwnProperty(U.declaration.type)?q(Aa,this.generateStatement(U.declaration,hb)):q(Aa,this.generateExpression(U.declaration,Hb.Assignment,7)+this.semicolon(na))},ExportNamedDeclaration:function(U,
na){var Aa=["export"],hb=this||Dl;var Pb=na&32?33:1;if(U.declaration)return q(Aa,this.generateStatement(U.declaration,Pb));U.specifiers&&(0===U.specifiers.length?Aa=q(Aa,"{"+ma+"}"):U.specifiers[0].type===Cc.ExportBatchSpecifier?Aa=q(Aa,this.generateExpression(U.specifiers[0],Hb.Sequence,7)):(Aa=q(Aa,"{"),r(function(od){var nd;Aa.push(Y);var Ac=0;for(nd=U.specifiers.length;Ac<nd;++Ac)Aa.push(od),Aa.push(hb.generateExpression(U.specifiers[Ac],Hb.Sequence,7)),Ac+1<nd&&Aa.push(","+Y)}),d(g(Aa).toString())||
Aa.push(Y),Aa.push(ea+"}")),U.source?Aa=q(Aa,["from"+ma,this.generateExpression(U.source,Hb.Sequence,7),this.semicolon(na)]):Aa.push(this.semicolon(na)));return Aa},ExportAllDeclaration:function(U,na){return["export"+ma,"*"+ma,"from"+ma,this.generateExpression(U.source,Hb.Sequence,7),this.semicolon(na)]},ExpressionStatement:function(U,na){function Aa(Ac){if("class"!==Ac.slice(0,5))return!1;Ac=Ac.charCodeAt(5);return 123===Ac||ac.code.isWhiteSpace(Ac)||ac.code.isLineTerminator(Ac)}function hb(Ac){if("function"!==
Ac.slice(0,8))return!1;Ac=Ac.charCodeAt(8);return 40===Ac||ac.code.isWhiteSpace(Ac)||42===Ac||ac.code.isLineTerminator(Ac)}function Pb(Ac){var xe;if("async"!==Ac.slice(0,5)||!ac.code.isWhiteSpace(Ac.charCodeAt(5)))return!1;var oe=6;for(xe=Ac.length;oe<xe&&ac.code.isWhiteSpace(Ac.charCodeAt(oe));++oe);if(oe===xe||"function"!==Ac.slice(oe,oe+8))return!1;Ac=Ac.charCodeAt(oe+8);return 40===Ac||ac.code.isWhiteSpace(Ac)||42===Ac||ac.code.isLineTerminator(Ac)}var od=[this.generateExpression(U.expression,
Hb.Sequence,7)];var nd=g(od).toString();123===nd.charCodeAt(0)||Aa(nd)||hb(nd)||Pb(nd)||V&&na&16&&U.expression.type===Cc.Literal&&"string"===typeof U.expression.value?od=["(",od,")"+this.semicolon(na)]:od.push(this.semicolon(na));return od},ImportDeclaration:function(U,na){var Aa=this||Dl;if(0===U.specifiers.length)return["import",ma,this.generateExpression(U.source,Hb.Sequence,7),this.semicolon(na)];var hb=["import"];var Pb=0;U.specifiers[Pb].type===Cc.ImportDefaultSpecifier&&(hb=q(hb,[this.generateExpression(U.specifiers[Pb],
Hb.Sequence,7)]),++Pb);U.specifiers[Pb]&&(0!==Pb&&hb.push(","),U.specifiers[Pb].type===Cc.ImportNamespaceSpecifier?hb=q(hb,[ma,this.generateExpression(U.specifiers[Pb],Hb.Sequence,7)]):(hb.push(ma+"{"),1===U.specifiers.length-Pb?(hb.push(ma),hb.push(this.generateExpression(U.specifiers[Pb],Hb.Sequence,7)),hb.push(ma+"}"+ma)):(r(function(od){var nd;hb.push(Y);var Ac=Pb;for(nd=U.specifiers.length;Ac<nd;++Ac)hb.push(od),hb.push(Aa.generateExpression(U.specifiers[Ac],Hb.Sequence,7)),Ac+1<nd&&hb.push(","+
Y)}),d(g(hb).toString())||hb.push(Y),hb.push(ea+"}"+ma))));return hb=q(hb,["from"+ma,this.generateExpression(U.source,Hb.Sequence,7),this.semicolon(na)])},VariableDeclarator:function(U,na){na=na&1?7:6;return U.init?[this.generateExpression(U.id,Hb.Assignment,na),ma,"=",ma,this.generateExpression(U.init,Hb.Assignment,na)]:this.generatePattern(U.id,Hb.Assignment,na)},VariableDeclaration:function(U,na){function Aa(){od=U.declarations[0];ha.comment&&od.leadingComments?(Ac.push("\n"),Ac.push([ea,nd.generateStatement(od,
xe)])):(Ac.push(l()),Ac.push(nd.generateStatement(od,xe)));hb=1;for(Pb=U.declarations.length;hb<Pb;++hb)od=U.declarations[hb],ha.comment&&od.leadingComments?(Ac.push(","+Y),Ac.push([ea,nd.generateStatement(od,xe)])):(Ac.push(","+ma),Ac.push(nd.generateStatement(od,xe)))}var hb,Pb,od,nd=this||Dl;var Ac=[U.kind];var xe=na&1?1:0;1<U.declarations.length?r(Aa):Aa();Ac.push(this.semicolon(na));return Ac},ThrowStatement:function(U,na){return[q("throw",this.generateExpression(U.argument,Hb.Sequence,7)),this.semicolon(na)]},
TryStatement:function(U,na){var Aa;na=["try",this.maybeBlock(U.block,1)];na=this.maybeBlockSuffix(U.block,na);if(U.handlers){var hb=0;for(Aa=U.handlers.length;hb<Aa;++hb)if(na=q(na,this.generateStatement(U.handlers[hb],1)),U.finalizer||hb+1!==Aa)na=this.maybeBlockSuffix(U.handlers[hb].body,na)}else{var Pb=U.guardedHandlers||[];hb=0;for(Aa=Pb.length;hb<Aa;++hb)if(na=q(na,this.generateStatement(Pb[hb],1)),U.finalizer||hb+1!==Aa)na=this.maybeBlockSuffix(Pb[hb].body,na);if(U.handler)if(Array.isArray(U.handler))for(hb=
0,Aa=U.handler.length;hb<Aa;++hb){if(na=q(na,this.generateStatement(U.handler[hb],1)),U.finalizer||hb+1!==Aa)na=this.maybeBlockSuffix(U.handler[hb].body,na)}else na=q(na,this.generateStatement(U.handler,1)),U.finalizer&&(na=this.maybeBlockSuffix(U.handler.body,na))}U.finalizer&&(na=q(na,["finally",this.maybeBlock(U.finalizer,1)]));return na},SwitchStatement:function(U,na){var Aa,hb,Pb=this||Dl;r(function(){Aa=["switch"+ma+"(",Pb.generateExpression(U.discriminant,Hb.Sequence,7),")"+ma+"{"+Y]});if(U.cases){var od=
1;var nd=0;for(hb=U.cases.length;nd<hb;++nd)nd===hb-1&&(od|=32),na=[ea,this.generateStatement(U.cases[nd],od)],Aa.push(na),d(g(na).toString())||Aa.push(Y)}Aa.push([ea,"}"]);return Aa},SwitchCase:function(U,na){var Aa,hb,Pb,od,nd,Ac=this||Dl;r(function(){Aa=U.test?[q("case",Ac.generateExpression(U.test,Hb.Sequence,7)),":"]:["default:"];Pb=0;(od=U.consequent.length)&&U.consequent[0].type===Cc.BlockStatement&&(hb=Ac.maybeBlock(U.consequent[0],1),Aa.push(hb),Pb=1);Pb===od||d(g(Aa).toString())||Aa.push(Y);
for(nd=1;Pb<od;++Pb)Pb===od-1&&na&32&&(nd|=32),hb=[ea,Ac.generateStatement(U.consequent[Pb],nd)],Aa.push(hb),Pb+1===od||d(g(hb).toString())||Aa.push(Y)});return Aa},IfStatement:function(U,na){var Aa=this||Dl;r(function(){Pb=["if"+ma+"(",Aa.generateExpression(U.test,Hb.Sequence,7),")"]});var hb=1;na&32&&(hb|=32);if(U.alternate){Pb.push(this.maybeBlock(U.consequent,1));var Pb=this.maybeBlockSuffix(U.consequent,Pb);Pb=U.alternate.type===Cc.IfStatement?q(Pb,["else ",this.generateStatement(U.alternate,
hb)]):q(Pb,q("else",this.maybeBlock(U.alternate,hb)))}else Pb.push(this.maybeBlock(U.consequent,hb));return Pb},ForStatement:function(U,na){var Aa,hb=this||Dl;r(function(){Aa=["for"+ma+"("];U.init?U.init.type===Cc.VariableDeclaration?Aa.push(hb.generateStatement(U.init,0)):(Aa.push(hb.generateExpression(U.init,Hb.Sequence,6)),Aa.push(";")):Aa.push(";");U.test&&(Aa.push(ma),Aa.push(hb.generateExpression(U.test,Hb.Sequence,7)));Aa.push(";");U.update&&(Aa.push(ma),Aa.push(hb.generateExpression(U.update,
Hb.Sequence,7)));Aa.push(")")});Aa.push(this.maybeBlock(U.body,na&32?33:1));return Aa},ForInStatement:function(U,na){return this.generateIterationForStatement("in",U,na&32?33:1)},ForOfStatement:function(U,na){return this.generateIterationForStatement("of",U,na&32?33:1)},LabeledStatement:function(U,na){return[U.label.name+":",this.maybeBlock(U.body,na&32?33:1)]},Program:function(U,na){var Aa;var hb=U.body.length;na=[X&&0<hb?"\n":""];var Pb=17;for(Aa=0;Aa<hb;++Aa){X||Aa!==hb-1||(Pb|=32);Nb&&(0===Aa&&
(U.body[0].leadingComments||y(U.range[0],U.body[Aa].range[0],na)),0<Aa&&(U.body[Aa-1].trailingComments||U.body[Aa].leadingComments||y(U.body[Aa-1].range[1],U.body[Aa].range[0],na)));var od=[ea,this.generateStatement(U.body[Aa],Pb)];na.push(od);Aa+1<hb&&!d(g(od).toString())&&(Nb?U.body[Aa+1].leadingComments||na.push(Y):na.push(Y));Nb&&Aa===hb-1&&(U.body[Aa].trailingComments||y(U.body[Aa].range[1],U.range[1],na))}return na},FunctionDeclaration:function(U,na){return[E(U,!0),"function",K(U)||l(),U.id?
G(U.id):"",this.generateFunctionBody(U)]},ReturnStatement:function(U,na){return U.argument?[q("return",this.generateExpression(U.argument,Hb.Sequence,7)),this.semicolon(na)]:["return"+this.semicolon(na)]},WhileStatement:function(U,na){var Aa,hb=this||Dl;r(function(){Aa=["while"+ma+"(",hb.generateExpression(U.test,Hb.Sequence,7),")"]});Aa.push(this.maybeBlock(U.body,na&32?33:1));return Aa},WithStatement:function(U,na){var Aa,hb=this||Dl;r(function(){Aa=["with"+ma+"(",hb.generateExpression(U.object,
Hb.Sequence,7),")"]});Aa.push(this.maybeBlock(U.body,na&32?33:1));return Aa}};h(B.prototype,B.Statement);B.Expression={SequenceExpression:function(U,na,Aa){var hb;Hb.Sequence<na&&(Aa|=1);var Pb=[];var od=0;for(hb=U.expressions.length;od<hb;++od)Pb.push(this.generateExpression(U.expressions[od],Hb.Assignment,Aa)),od+1<hb&&Pb.push(","+ma);return z(Pb,Hb.Sequence,na)},AssignmentExpression:function(U,na,Aa){return this.generateAssignment(U.left,U.right,U.operator,na,Aa)},ArrowFunctionExpression:function(U,
na,Aa){return z(this.generateFunctionBody(U),Hb.ArrowFunction,na)},ConditionalExpression:function(U,na,Aa){Hb.Conditional<na&&(Aa|=1);return z([this.generateExpression(U.test,Hb.LogicalOR,Aa),ma+"?"+ma,this.generateExpression(U.consequent,Hb.Assignment,Aa),ma+":"+ma,this.generateExpression(U.alternate,Hb.Assignment,Aa)],Hb.Conditional,na)},LogicalExpression:function(U,na,Aa){return this.BinaryExpression(U,na,Aa)},BinaryExpression:function(U,na,Aa){var hb=gd[U.operator];var Pb="**"===U.operator?Hb.Postfix:
hb;var od="**"===U.operator?hb:hb+1;hb<na&&(Aa|=1);Pb=this.generateExpression(U.left,Pb,Aa);var nd=Pb.toString();nd=47===nd.charCodeAt(nd.length-1)&&ac.code.isIdentifierPartES5(U.operator.charCodeAt(0))?[Pb,l(),U.operator]:q(Pb,U.operator);Pb=this.generateExpression(U.right,od,Aa);"/"===U.operator&&"/"===Pb.toString().charAt(0)||"<"===U.operator.slice(-1)&&"!--"===Pb.toString().slice(0,3)?(nd.push(l()),nd.push(Pb)):nd=q(nd,Pb);return"in"!==U.operator||Aa&1?z(nd,hb,na):["(",nd,")"]},CallExpression:function(U,
na,Aa){var hb;var Pb=[this.generateExpression(U.callee,Hb.Call,3)];U.optional&&Pb.push("?.");Pb.push("(");var od=0;for(hb=U.arguments.length;od<hb;++od)Pb.push(this.generateExpression(U.arguments[od],Hb.Assignment,7)),od+1<hb&&Pb.push(","+ma);Pb.push(")");return Aa&2?z(Pb,Hb.Call,na):["(",Pb,")"]},ChainExpression:function(U,na,Aa){Hb.OptionalChaining<na&&(Aa|=2);U=this.generateExpression(U.expression,Hb.OptionalChaining,Aa);return z(U,Hb.OptionalChaining,na)},NewExpression:function(U,na,Aa){var hb=
U.arguments.length;var Pb=q("new",this.generateExpression(U.callee,Hb.New,Aa&4&&!bb&&0===hb?5:1));if(!(Aa&4)||bb||0<hb){Pb.push("(");for(Aa=0;Aa<hb;++Aa)Pb.push(this.generateExpression(U.arguments[Aa],Hb.Assignment,7)),Aa+1<hb&&Pb.push(","+ma);Pb.push(")")}return z(Pb,Hb.New,na)},MemberExpression:function(U,na,Aa){var hb=[this.generateExpression(U.object,Hb.Call,Aa&2?3:1)];U.computed?(U.optional&&hb.push("?."),hb.push("["),hb.push(this.generateExpression(U.property,Hb.Sequence,Aa&2?7:5)),hb.push("]")):
(U.optional||U.object.type!==Cc.Literal||"number"!==typeof U.object.value||(Aa=g(hb).toString(),0>Aa.indexOf(".")&&!/[eExX]/.test(Aa)&&ac.code.isDecimalDigit(Aa.charCodeAt(Aa.length-1))&&!(2<=Aa.length&&48===Aa.charCodeAt(0))&&hb.push(" ")),hb.push(U.optional?"?.":"."),hb.push(G(U.property)));return z(hb,Hb.Member,na)},MetaProperty:function(U,na,Aa){Aa=[];Aa.push("string"===typeof U.meta?U.meta:G(U.meta));Aa.push(".");Aa.push("string"===typeof U.property?U.property:G(U.property));return z(Aa,Hb.Member,
na)},UnaryExpression:function(U,na,Aa){var hb=this.generateExpression(U.argument,Hb.Unary,7);if(""===ma)Aa=q(U.operator,hb);else if(Aa=[U.operator],2<U.operator.length)Aa=q(Aa,hb);else{U=g(Aa).toString();var Pb=U.charCodeAt(U.length-1);U=hb.toString().charCodeAt(0);((43===Pb||45===Pb)&&Pb===U||ac.code.isIdentifierPartES5(Pb)&&ac.code.isIdentifierPartES5(U))&&Aa.push(l());Aa.push(hb)}return z(Aa,Hb.Unary,na)},YieldExpression:function(U,na,Aa){Aa=U.delegate?"yield*":"yield";U.argument&&(Aa=q(Aa,this.generateExpression(U.argument,
Hb.Yield,7)));return z(Aa,Hb.Yield,na)},AwaitExpression:function(U,na,Aa){U=q(U.all?"await*":"await",this.generateExpression(U.argument,Hb.Await,7));return z(U,Hb.Await,na)},UpdateExpression:function(U,na,Aa){return U.prefix?z([U.operator,this.generateExpression(U.argument,Hb.Unary,7)],Hb.Unary,na):z([this.generateExpression(U.argument,Hb.Postfix,7),U.operator],Hb.Postfix,na)},FunctionExpression:function(U,na,Aa){na=[E(U,!0),"function"];U.id?(na.push(K(U)||l()),na.push(G(U.id))):na.push(K(U)||ma);
na.push(this.generateFunctionBody(U));return na},ArrayPattern:function(U,na,Aa){return this.ArrayExpression(U,na,Aa,!0)},ArrayExpression:function(U,na,Aa,hb){var Pb=this||Dl;if(!U.elements.length)return"[]";var od=hb?!1:1<U.elements.length;var nd=["[",od?Y:""];r(function(Ac){var xe;var oe=0;for(xe=U.elements.length;oe<xe;++oe)U.elements[oe]?(nd.push(od?Ac:""),nd.push(Pb.generateExpression(U.elements[oe],Hb.Assignment,7))):(od&&nd.push(Ac),oe+1===xe&&nd.push(",")),oe+1<xe&&nd.push(","+(od?Y:ma))});
od&&!d(g(nd).toString())&&nd.push(Y);nd.push(od?ea:"");nd.push("]");return nd},RestElement:function(U,na,Aa){return"..."+this.generatePattern(U.argument)},ClassExpression:function(U,na,Aa){na=["class"];U.id&&(na=q(na,this.generateExpression(U.id,Hb.Sequence,7)));U.superClass&&(Aa=q("extends",this.generateExpression(U.superClass,Hb.Unary,7)),na=q(na,Aa));na.push(ma);na.push(this.generateStatement(U.body,33));return na},MethodDefinition:function(U,na,Aa){na=U["static"]?["static"+ma]:[];U="get"===U.kind||
"set"===U.kind?[q(U.kind,this.generatePropertyKey(U.key,U.computed)),this.generateFunctionBody(U.value)]:[J(U),this.generatePropertyKey(U.key,U.computed),this.generateFunctionBody(U.value)];return q(na,U)},Property:function(U,na,Aa){return"get"===U.kind||"set"===U.kind?[U.kind,l(),this.generatePropertyKey(U.key,U.computed),this.generateFunctionBody(U.value)]:U.shorthand?"AssignmentPattern"===U.value.type?this.AssignmentPattern(U.value,Hb.Sequence,7):this.generatePropertyKey(U.key,U.computed):U.method?
[J(U),this.generatePropertyKey(U.key,U.computed),this.generateFunctionBody(U.value)]:[this.generatePropertyKey(U.key,U.computed),":"+ma,this.generateExpression(U.value,Hb.Assignment,7)]},ObjectExpression:function(U,na,Aa){var hb,Pb,od=this||Dl;if(!U.properties.length)return"{}";var nd=1<U.properties.length;r(function(){Pb=od.generateExpression(U.properties[0],Hb.Sequence,7)});if(!nd&&!/[\r\n]/g.test(g(Pb).toString()))return["{",ma,Pb,ma,"}"];r(function(Ac){var xe;hb=["{",Y,Ac,Pb];if(nd){hb.push(","+
Y);var oe=1;for(xe=U.properties.length;oe<xe;++oe)hb.push(Ac),hb.push(od.generateExpression(U.properties[oe],Hb.Sequence,7)),oe+1<xe&&hb.push(","+Y)}});d(g(hb).toString())||hb.push(Y);hb.push(ea);hb.push("}");return hb},AssignmentPattern:function(U,na,Aa){return this.generateAssignment(U.left,U.right,"=",na,Aa)},ObjectPattern:function(U,na,Aa){var hb=this||Dl;if(!U.properties.length)return"{}";var Pb=!1;if(1===U.properties.length){var od=U.properties[0];od.type===Cc.Property&&od.value.type!==Cc.Identifier&&
(Pb=!0)}else for(na=0,Aa=U.properties.length;na<Aa;++na)if(od=U.properties[na],od.type===Cc.Property&&!od.shorthand){Pb=!0;break}var nd=["{",Pb?Y:""];r(function(Ac){var xe;var oe=0;for(xe=U.properties.length;oe<xe;++oe)nd.push(Pb?Ac:""),nd.push(hb.generateExpression(U.properties[oe],Hb.Sequence,7)),oe+1<xe&&nd.push(","+(Pb?Y:ma))});Pb&&!d(g(nd).toString())&&nd.push(Y);nd.push(Pb?ea:"");nd.push("}");return nd},ThisExpression:function(U,na,Aa){return"this"},Super:function(U,na,Aa){return"super"},Identifier:function(U,
na,Aa){return G(U)},ImportDefaultSpecifier:function(U,na,Aa){return G(U.id||U.local)},ImportNamespaceSpecifier:function(U,na,Aa){na=["*"];(U=U.id||U.local)&&na.push(ma+"as"+l()+G(U));return na},ImportSpecifier:function(U,na,Aa){na=U.imported;Aa=[na.name];(U=U.local)&&U.name!==na.name&&Aa.push(l()+"as"+l()+G(U));return Aa},ExportSpecifier:function(U,na,Aa){na=U.local;Aa=[na.name];(U=U.exported)&&U.name!==na.name&&Aa.push(l()+"as"+l()+G(U));return Aa},Literal:function(U,na,Aa){if(U.hasOwnProperty("raw")&&
xa&&ha.raw)try{var hb=xa(U.raw).body[0].expression;if(hb.type===Cc.Literal&&hb.value===U.value)return U.raw}catch(oe){}if(U.regex)return"/"+U.regex.pattern+"/"+U.regex.flags;if(null===U.value)return"null";if("string"===typeof U.value){U=U.value;na="";var Pb=0,od=0,nd;Aa=0;for(hb=U.length;Aa<hb;++Aa){var Ac=U.charCodeAt(Aa);if(39===Ac)++Pb;else if(34===Ac)++od;else if(47===Ac&&D)na+="\\";else if(ac.code.isLineTerminator(Ac)||92===Ac){na+=m(Ac);continue}else if(!ac.code.isIdentifierPartES5(Ac)&&(D&&
32>Ac||!D&&!aa&&(32>Ac||126<Ac))){na+=e(Ac,U.charCodeAt(Aa+1));continue}na+=String.fromCharCode(Ac)}var xe=(nd=!("double"===N||"auto"===N&&od<Pb))?"'":'"';if(nd?Pb:od){U=na;na=xe;Aa=0;for(hb=U.length;Aa<hb;++Aa){Ac=U.charCodeAt(Aa);if(39===Ac&&nd||34===Ac&&!nd)na+="\\";na+=String.fromCharCode(Ac)}U=na+xe}else U=xe+na+xe;return U}if("number"===typeof U.value){U=U.value;if(U!==U)throw Error("Numeric literal whose value is NaN");if(0>U||0===U&&0>1/U)throw Error("Numeric literal whose value is negative");
if(U===1/0)U=D?"null":O?"1e400":"1e+400";else{na=""+U;if(O&&!(3>na.length)){Aa=na.indexOf(".");D||48!==na.charCodeAt(0)||1!==Aa||(Aa=0,na=na.slice(1));hb=na;na=na.replace("e+","e");Ac=0;0<(Pb=hb.indexOf("e"))&&(Ac=+hb.slice(Pb+1),hb=hb.slice(0,Pb));0<=Aa&&(Ac-=hb.length-Aa-1,hb=+(hb.slice(0,Aa)+hb.slice(Aa+1))+"");for(Pb=0;48===hb.charCodeAt(hb.length+Pb-1);)--Pb;0!==Pb&&(Ac-=Pb,hb=hb.slice(0,Pb));0!==Ac&&(hb+="e"+Ac);(hb.length<na.length||L&&1E12<U&&Math.floor(U)===U&&(hb="0x"+U.toString(16)).length<
na.length)&&+hb===U&&(na=hb)}U=na}return U}if("boolean"===typeof U.value)return U.value?"true":"false";U=U.value;na=U.toString();if(U.source)if(Aa=na.match(/\/([^/]*)$/)){Aa=Aa[1];na="";nd=od=!1;hb=0;for(Ac=U.source.length;hb<Ac;++hb)Pb=U.source.charCodeAt(hb),nd?(na+=b(Pb,nd),nd=!1):(od?93===Pb&&(od=!1):47===Pb?na+="\\":91===Pb&&(od=!0),na+=b(Pb,nd),nd=92===Pb);U="/"+na+"/"+Aa}else U=na;else U=na;return U},GeneratorExpression:function(U,na,Aa){return this.ComprehensionExpression(U,na,Aa)},ComprehensionExpression:function(U,
na,Aa){var hb,Pb,od=this||Dl;var nd=U.type===Cc.GeneratorExpression?["("]:["["];if(ha.moz.comprehensionExpressionStartsWithAssignment){var Ac=this.generateExpression(U.body,Hb.Assignment,7);nd.push(Ac)}U.blocks&&r(function(){hb=0;for(Pb=U.blocks.length;hb<Pb;++hb)Ac=od.generateExpression(U.blocks[hb],Hb.Sequence,7),0<hb||ha.moz.comprehensionExpressionStartsWithAssignment?nd=q(nd,Ac):nd.push(Ac)});U.filter&&(nd=q(nd,"if"+ma),Ac=this.generateExpression(U.filter,Hb.Sequence,7),nd=q(nd,["(",Ac,")"]));
ha.moz.comprehensionExpressionStartsWithAssignment||(Ac=this.generateExpression(U.body,Hb.Assignment,7),nd=q(nd,Ac));nd.push(U.type===Cc.GeneratorExpression?")":"]");return nd},ComprehensionBlock:function(U,na,Aa){na=U.left.type===Cc.VariableDeclaration?[U.left.kind,l(),this.generateStatement(U.left.declarations[0],0)]:this.generateExpression(U.left,Hb.Call,7);na=q(na,U.of?"of":"in");na=q(na,this.generateExpression(U.right,Hb.Sequence,7));return["for"+ma+"(",na,")"]},SpreadElement:function(U,na,Aa){return["...",
this.generateExpression(U.argument,Hb.Assignment,7)]},TaggedTemplateExpression:function(U,na,Aa){var hb=3;Aa&2||(hb=1);U=[this.generateExpression(U.tag,Hb.Call,hb),this.generateExpression(U.quasi,Hb.Primary,4)];return z(U,Hb.TaggedTemplate,na)},TemplateElement:function(U,na,Aa){return U.value.raw},TemplateLiteral:function(U,na,Aa){var hb;na=["`"];Aa=0;for(hb=U.quasis.length;Aa<hb;++Aa)na.push(this.generateExpression(U.quasis[Aa],Hb.Primary,7)),Aa+1<hb&&(na.push("${"+ma),na.push(this.generateExpression(U.expressions[Aa],
Hb.Sequence,7)),na.push(ma+"}"));na.push("`");return na},ModuleSpecifier:function(U,na,Aa){return this.Literal(U,na,Aa)},ImportExpression:function(U,na,Aa){return z(["import(",this.generateExpression(U.source,Hb.Assignment,7),")"],Hb.Call,na)}};h(B.prototype,B.Expression);B.prototype.generateExpression=function(U,na,Aa){var hb=U.type||Cc.Property;if(ha.verbatim&&U.hasOwnProperty(ha.verbatim))return hb=U[ha.verbatim],"string"===typeof hb?Aa=z(A(hb),Hb.Sequence,na):(Aa=A(hb.content),hb=null!=hb.precedence?
hb.precedence:Hb.Sequence,Aa=z(Aa,hb,na)),g(Aa,U);na=this[hb](U,na,Aa);ha.comment&&(na=v(U,na));return g(na,U)};B.prototype.generateStatement=function(U,na){na=this[U.type](U,na);ha.comment&&(na=v(U,na));var Aa=g(na).toString();U.type!==Cc.Program||X||""!==Y||"\n"!==Aa.charAt(Aa.length-1)||(na=yb?g(na).replaceRight(/\s+$/,""):Aa.replace(/\s+$/,""));return g(na,U)};var yd=c().format;Tm.version="2.0.0";Tm.generate=function(U,na){var Aa=c();null!=na?("string"===typeof na.indent&&(Aa.format.indent.style=
na.indent),"number"===typeof na.base&&(Aa.format.indent.base=na.base),na=n(Aa,na),ra=na.format.indent.style,ea="string"===typeof na.base?na.base:k(ra,na.format.indent.base)):(na=Aa,ra=na.format.indent.style,ea=k(ra,na.format.indent.base));D=na.format.json;O=na.format.renumber;L=D?!1:na.format.hexadecimal;N=D?"double":na.format.quotes;aa=na.format.escapeless;Y=na.format.newline;ma=na.format.space;na.format.compact&&(Y=ma=ra=ea="");bb=na.format.parentheses;Qa=na.format.semicolons;X=na.format.safeConcatenation;
V=na.directive;xa=D?null:na.parse;yb=na.sourceMap;ec=na.sourceCode;Nb=na.format.preserveBlankLines&&null!==ec;ha=na;yb&&(P=Tm.browser?Dl.sourceMap.SourceNode:ok);Aa=new B;if(B.Statement.hasOwnProperty(U.type))U=Aa.generateStatement(U,1);else if(B.Expression.hasOwnProperty(U.type))U=Aa.generateExpression(U,Hb.Sequence,7);else throw Error("Unknown node type: "+U.type);if(!yb)return U={code:U.toString(),map:null},na.sourceMapWithCode?U:U.code;U=U.toStringWithSourceMap({file:na.file,sourceRoot:na.sourceMapRoot});
na.sourceContent&&U.map.setSourceContent(na.sourceMap,na.sourceContent);return na.sourceMapWithCode?U:U.map.toString()};Tm.attachComments=UN.attachComments;Tm.Precedence=n({},Hb);Tm.browser=!1;Tm.FORMAT_MINIFY={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1};Tm.FORMAT_DEFAULTS=yd})();var iba=Object.freeze({__proto__:null,"default":Tm,FORMAT_DEFAULTS:Tm.FORMAT_DEFAULTS,FORMAT_MINIFY:Tm.FORMAT_MINIFY,Precedence:Tm.Precedence,attachComments:Tm.attachComments,
browser:Tm.browser,generate:Tm.generate,version:Tm.version}),lo=lively.FreezerRuntime.recorderFor("lively.ast/lib/stringify.js");lo.stringify=Uk;lo.obj=Pf;lo.escodegen=iba;lo.es=lo.escodegen.escodegen||lo.escodegen;var vA=lo.es;lo.escodegen=vA;lo.es=vA;lo.default=Uk;var YN={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",
6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},jba={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this","5module":"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this export import",6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},
kba=/^in(stanceof)?$/,ZN="\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
j0="\u200c\u200d\u00b7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",
d5=new RegExp("["+ZN+"]"),e5=new RegExp("["+ZN+j0+"]");ZN=j0=null;var AQ=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,
2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,
3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],f5=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,
2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,
787719,239],Fi=function(c,k){void 0===k&&(k={});this.label=c;this.keyword=k.keyword;this.beforeExpr=!!k.beforeExpr;this.startsExpr=!!k.startsExpr;this.isLoop=!!k.isLoop;this.isAssign=!!k.isAssign;this.prefix=!!k.prefix;this.postfix=!!k.postfix;this.binop=k.binop||null;this.updateContext=null},Xp={beforeExpr:!0},No={startsExpr:!0},xE={},Ea={num:new Fi("num",No),regexp:new Fi("regexp",No),string:new Fi("string",No),name:new Fi("name",No),eof:new Fi("eof"),bracketL:new Fi("[",{beforeExpr:!0,startsExpr:!0}),
bracketR:new Fi("]"),braceL:new Fi("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Fi("}"),parenL:new Fi("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Fi(")"),comma:new Fi(",",Xp),semi:new Fi(";",Xp),colon:new Fi(":",Xp),dot:new Fi("."),question:new Fi("?",Xp),questionDot:new Fi("?."),arrow:new Fi("=>",Xp),template:new Fi("template"),invalidTemplate:new Fi("invalidTemplate"),ellipsis:new Fi("...",Xp),backQuote:new Fi("`",No),dollarBraceL:new Fi("${",{beforeExpr:!0,startsExpr:!0}),eq:new Fi("=",{beforeExpr:!0,
isAssign:!0}),assign:new Fi("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Fi("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Fi("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:ch("||",1),logicalAND:ch("&&",2),bitwiseOR:ch("|",3),bitwiseXOR:ch("^",4),bitwiseAND:ch("&",5),equality:ch("==/!=/===/!==",6),relational:ch("</>/<=/>=",7),bitShift:ch("<</>>/>>>",8),plusMin:new Fi("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:ch("%",10),star:ch("*",10),slash:ch("/",10),starstar:new Fi("**",
{beforeExpr:!0}),coalesce:ch("??",1),_break:Qf("break"),_case:Qf("case",Xp),_catch:Qf("catch"),_continue:Qf("continue"),_debugger:Qf("debugger"),_default:Qf("default",Xp),_do:Qf("do",{isLoop:!0,beforeExpr:!0}),_else:Qf("else",Xp),_finally:Qf("finally"),_for:Qf("for",{isLoop:!0}),_function:Qf("function",No),_if:Qf("if"),_return:Qf("return",Xp),_switch:Qf("switch"),_throw:Qf("throw",Xp),_try:Qf("try"),_var:Qf("var"),_const:Qf("const"),_while:Qf("while",{isLoop:!0}),_with:Qf("with"),_new:Qf("new",{beforeExpr:!0,
startsExpr:!0}),_this:Qf("this",No),_super:Qf("super",No),_class:Qf("class",No),_extends:Qf("extends",Xp),_export:Qf("export"),_import:Qf("import",No),_null:Qf("null",No),_true:Qf("true",No),_false:Qf("false",No),_in:Qf("in",{beforeExpr:!0,binop:7}),_instanceof:Qf("instanceof",{beforeExpr:!0,binop:7}),_typeof:Qf("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Qf("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Qf("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},$n=/\r\n?|\n|\u2028|\u2029/,
av=new RegExp($n.source,"g"),$N=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Yp=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,k0=Object.prototype,yE=k0.hasOwnProperty,lba=k0.toString,CQ=Array.isArray||function(c){return"[object Array]"===lba.call(c)},Py=function(c,k){this.line=c;this.column=k};Py.prototype.offset=function(c){return new Py(this.line,this.column+c)};var Ow=function(c,k,d){this.start=k;this.end=d;null!==c.sourceFile&&(this.source=c.sourceFile)},pB={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,
onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},BQ=!1,uk=function(c,k,d){this.options=c=ad(c);this.sourceFile=c.sourceFile;this.keywords=Ji(jba[6<=c.ecmaVersion?6:"module"===c.sourceType?"5module":5]);var h="";!0!==c.allowReserved&&(h=YN[6<=c.ecmaVersion?6:5===c.ecmaVersion?5:3],"module"===
c.sourceType&&(h+=" await"));this.reservedWords=Ji(h);h=(h?h+" ":"")+YN.strict;this.reservedWordsStrict=Ji(h);this.reservedWordsStrictBind=Ji(h+" "+YN.strictBind);this.input=String(k);this.containsEsc=!1;d?(this.pos=d,this.lineStart=this.input.lastIndexOf("\n",d-1)+1,this.curLine=this.input.slice(0,this.lineStart).split($n).length):(this.pos=this.lineStart=0,this.curLine=1);this.type=Ea.eof;this.value=null;this.start=this.end=this.pos;this.startLoc=this.endLoc=this.curPosition();this.lastTokEndLoc=
this.lastTokStartLoc=null;this.lastTokStart=this.lastTokEnd=this.pos;this.context=this.initialContext();this.exprAllowed=!0;this.strict=(this.inModule="module"===c.sourceType)||this.strictDirective(this.pos);this.potentialArrowAt=-1;this.yieldPos=this.awaitPos=this.awaitIdentPos=0;this.labels=[];this.undefinedExports={};0===this.pos&&c.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2);this.scopeStack=[];this.enterScope(1);this.regexpState=null},fw={inFunction:{configurable:!0},
inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};uk.prototype.parse=function(){var c=this.options.program||this.startNode();this.nextToken();return this.parseTopLevel(c)};fw.inFunction.get=function(){return 0<(this.currentVarScope().flags&2)};fw.inGenerator.get=function(){return 0<(this.currentVarScope().flags&8)};fw.inAsync.get=function(){return 0<(this.currentVarScope().flags&
4)};fw.allowSuper.get=function(){return 0<(this.currentThisScope().flags&64)};fw.allowDirectSuper.get=function(){return 0<(this.currentThisScope().flags&128)};fw.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};fw.inNonArrowFunction.get=function(){return 0<(this.currentThisScope().flags&2)};uk.extend=function(){for(var c=[],k=arguments.length;k--;)c[k]=arguments[k];k=this;for(var d=0;d<c.length;d++)k=c[d](k);return k};uk.parse=function(c,k){return(new this(k,
c)).parse()};uk.parseExpressionAt=function(c,k,d){c=new this(d,c,k);c.nextToken();return c.parseExpression()};uk.tokenizer=function(c,k){return new this(k,c)};Object.defineProperties(uk.prototype,fw);var qn=uk.prototype,mba=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)")/;qn.strictDirective=function(c){for(;;){Yp.lastIndex=c;c+=Yp.exec(this.input)[0].length;var k=mba.exec(this.input.slice(c));if(!k)return!1;if("use strict"===(k[1]||k[2])){Yp.lastIndex=c+k[0].length;c=Yp.exec(this.input);k=c.index+c[0].length;
var d=this.input.charAt(k);return";"===d||"}"===d||$n.test(c[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(d)||"!"===d&&"="===this.input.charAt(k+1))}c+=k[0].length;Yp.lastIndex=c;c+=Yp.exec(this.input)[0].length;";"===this.input[c]&&c++}};qn.eat=function(c){return this.type===c?(this.next(),!0):!1};qn.isContextual=function(c){return this.type===Ea.name&&this.value===c&&!this.containsEsc};qn.eatContextual=function(c){if(!this.isContextual(c))return!1;this.next();return!0};qn.expectContextual=function(c){this.eatContextual(c)||
this.unexpected()};qn.canInsertSemicolon=function(){return this.type===Ea.eof||this.type===Ea.braceR||$n.test(this.input.slice(this.lastTokEnd,this.start))};qn.insertSemicolon=function(){if(this.canInsertSemicolon()){if(this.options.onInsertedSemicolon)this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc);return!0}};qn.semicolon=function(){this.eat(Ea.semi)||this.insertSemicolon()||this.unexpected()};qn.afterTrailingComma=function(c,k){if(this.type===c){if(this.options.onTrailingComma)this.options.onTrailingComma(this.lastTokStart,
this.lastTokStartLoc);k||this.next();return!0}};qn.expect=function(c){this.eat(c)||this.unexpected()};qn.unexpected=function(c){this.raise(null!=c?c:this.start,"Unexpected token")};qn.checkPatternErrors=function(c,k){c&&(-1<c.trailingComma&&this.raiseRecoverable(c.trailingComma,"Comma is not permitted after the rest element"),c=k?c.parenthesizedAssign:c.parenthesizedBind,-1<c&&this.raiseRecoverable(c,"Parenthesized pattern"))};qn.checkExpressionErrors=function(c,k){if(!c)return!1;var d=c.shorthandAssign;
c=c.doubleProto;if(!k)return 0<=d||0<=c;0<=d&&this.raise(d,"Shorthand property assignments are valid only in destructuring patterns");0<=c&&this.raiseRecoverable(c,"Redefinition of __proto__ property")};qn.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value");this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};qn.isSimpleAssignTarget=function(c){return"ParenthesizedExpression"===
c.type?this.isSimpleAssignTarget(c.expression):"Identifier"===c.type||"MemberExpression"===c.type};var Hh=uk.prototype;Hh.parseTopLevel=function(c){var k={};c.body||(c.body=[]);for(;this.type!==Ea.eof;){var d=this.parseStatement(null,!0,k);c.body.push(d)}if(this.inModule)for(k=0,d=Object.keys(this.undefinedExports);k<d.length;k+=1){var h=d[k];this.raiseRecoverable(this.undefinedExports[h].start,"Export '"+h+"' is not defined")}this.adaptDirectivePrologue(c.body);this.next();c.sourceType=this.options.sourceType;
return this.finishNode(c,"Program")};var aO={kind:"loop"},nba={kind:"switch"};Hh.isLet=function(c){if(6>this.options.ecmaVersion||!this.isContextual("let"))return!1;Yp.lastIndex=this.pos;var k=Yp.exec(this.input);k=this.pos+k[0].length;var d=this.input.charCodeAt(k);if(91===d)return!0;if(c)return!1;if(123===d)return!0;if(mm(d,!0)){for(c=k+1;Lr(this.input.charCodeAt(c),!0);)++c;c=this.input.slice(k,c);if(!kba.test(c))return!0}return!1};Hh.isAsyncFunction=function(){if(8>this.options.ecmaVersion||!this.isContextual("async"))return!1;
Yp.lastIndex=this.pos;var c=Yp.exec(this.input);c=this.pos+c[0].length;return!$n.test(this.input.slice(this.pos,c))&&"function"===this.input.slice(c,c+8)&&(c+8===this.input.length||!Lr(this.input.charAt(c+8)))};Hh.parseStatement=function(c,k,d){var h=this.type,n=this.startNode();if(this.isLet(c)){h=Ea._var;var b="let"}switch(h){case Ea._break:case Ea._continue:return this.parseBreakContinueStatement(n,h.keyword);case Ea._debugger:return this.parseDebuggerStatement(n);case Ea._do:return this.parseDoStatement(n);
case Ea._for:return this.parseForStatement(n);case Ea._function:return c&&(this.strict||"if"!==c&&"label"!==c)&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(n,!1,!c);case Ea._class:return c&&this.unexpected(),this.parseClass(n,!0);case Ea._if:return this.parseIfStatement(n);case Ea._return:return this.parseReturnStatement(n);case Ea._switch:return this.parseSwitchStatement(n);case Ea._throw:return this.parseThrowStatement(n);case Ea._try:return this.parseTryStatement(n);
case Ea._const:case Ea._var:return b=b||this.value,c&&"var"!==b&&this.unexpected(),this.parseVarStatement(n,b);case Ea._while:return this.parseWhileStatement(n);case Ea._with:return this.parseWithStatement(n);case Ea.braceL:return this.parseBlock(!0,n);case Ea.semi:return this.parseEmptyStatement(n);case Ea._export:case Ea._import:if(10<this.options.ecmaVersion&&h===Ea._import&&(Yp.lastIndex=this.pos,c=Yp.exec(this.input),c=this.input.charCodeAt(this.pos+c[0].length),40===c||46===c))return this.parseExpressionStatement(n,
this.parseExpression());this.options.allowImportExportEverywhere||(k||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"));return h===Ea._import?this.parseImport(n):this.parseExport(n,d);default:if(this.isAsyncFunction())return c&&this.unexpected(),this.next(),this.parseFunctionStatement(n,!0,!c);k=this.value;d=this.parseExpression();return h===Ea.name&&"Identifier"===
d.type&&this.eat(Ea.colon)?this.parseLabeledStatement(n,k,d,c):this.parseExpressionStatement(n,d)}};Hh.parseBreakContinueStatement=function(c,k){var d="break"===k;this.next();this.eat(Ea.semi)||this.insertSemicolon()?c.label=null:this.type!==Ea.name?this.unexpected():(c.label=this.parseIdent(),this.semicolon());for(var h=0;h<this.labels.length;++h){var n=this.labels[h];if(null==c.label||n.name===c.label.name){if(null!=n.kind&&(d||"loop"===n.kind))break;if(c.label&&d)break}}h===this.labels.length&&
this.raise(c.start,"Unsyntactic "+k);return this.finishNode(c,d?"BreakStatement":"ContinueStatement")};Hh.parseDebuggerStatement=function(c){this.next();this.semicolon();return this.finishNode(c,"DebuggerStatement")};Hh.parseDoStatement=function(c){this.next();this.labels.push(aO);c.body=this.parseStatement("do");this.labels.pop();this.expect(Ea._while);c.test=this.parseParenExpression();6<=this.options.ecmaVersion?this.eat(Ea.semi):this.semicolon();return this.finishNode(c,"DoWhileStatement")};Hh.parseForStatement=
function(c){this.next();var k=9<=this.options.ecmaVersion&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;this.labels.push(aO);this.enterScope(0);this.expect(Ea.parenL);if(this.type===Ea.semi)return-1<k&&this.unexpected(k),this.parseFor(c,null);var d=this.isLet();if(this.type===Ea._var||this.type===Ea._const||d){var h=this.startNode();d=d?"let":this.value;this.next();this.parseVar(h,!0,d);this.finishNode(h,"VariableDeclaration");
if((this.type===Ea._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===h.declarations.length)return 9<=this.options.ecmaVersion&&(this.type===Ea._in?-1<k&&this.unexpected(k):c.await=-1<k),this.parseForIn(c,h);-1<k&&this.unexpected(k);return this.parseFor(c,h)}h=new mo;d=this.parseExpression(!0,h);if(this.type===Ea._in||6<=this.options.ecmaVersion&&this.isContextual("of"))return 9<=this.options.ecmaVersion&&(this.type===Ea._in?-1<k&&this.unexpected(k):c.await=-1<k),this.toAssignable(d,
!1,h),this.checkLValPattern(d),this.parseForIn(c,d);this.checkExpressionErrors(h,!0);-1<k&&this.unexpected(k);return this.parseFor(c,d)};Hh.parseFunctionStatement=function(c,k,d){this.next();return this.parseFunction(c,TC|(d?0:bO),!1,k)};Hh.parseIfStatement=function(c){this.next();c.test=this.parseParenExpression();c.consequent=this.parseStatement("if");c.alternate=this.eat(Ea._else)?this.parseStatement("if"):null;return this.finishNode(c,"IfStatement")};Hh.parseReturnStatement=function(c){this.inFunction||
this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function");this.next();this.eat(Ea.semi)||this.insertSemicolon()?c.argument=null:(c.argument=this.parseExpression(),this.semicolon());return this.finishNode(c,"ReturnStatement")};Hh.parseSwitchStatement=function(c){this.next();c.discriminant=this.parseParenExpression();c.cases=[];this.expect(Ea.braceL);this.labels.push(nba);this.enterScope(0);for(var k,d=!1;this.type!==Ea.braceR;)if(this.type===Ea._case||this.type===
Ea._default){var h=this.type===Ea._case;k&&this.finishNode(k,"SwitchCase");c.cases.push(k=this.startNode());k.consequent=[];this.next();h?k.test=this.parseExpression():(d&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),d=!0,k.test=null);this.expect(Ea.colon)}else k||this.unexpected(),k.consequent.push(this.parseStatement(null));this.exitScope();k&&this.finishNode(k,"SwitchCase");this.next();this.labels.pop();return this.finishNode(c,"SwitchStatement")};Hh.parseThrowStatement=
function(c){this.next();$n.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw");c.argument=this.parseExpression();this.semicolon();return this.finishNode(c,"ThrowStatement")};var oba=[];Hh.parseTryStatement=function(c){this.next();c.block=this.parseBlock();c.handler=null;if(this.type===Ea._catch){var k=this.startNode();this.next();if(this.eat(Ea.parenL)){k.param=this.parseBindingAtom();var d="Identifier"===k.param.type;this.enterScope(d?32:
0);this.checkLValPattern(k.param,d?4:2);this.expect(Ea.parenR)}else 10>this.options.ecmaVersion&&this.unexpected(),k.param=null,this.enterScope(0);k.body=this.parseBlock(!1);this.exitScope();c.handler=this.finishNode(k,"CatchClause")}c.finalizer=this.eat(Ea._finally)?this.parseBlock():null;c.handler||c.finalizer||this.raise(c.start,"Missing catch or finally clause");return this.finishNode(c,"TryStatement")};Hh.parseVarStatement=function(c,k){this.next();this.parseVar(c,!1,k);this.semicolon();return this.finishNode(c,
"VariableDeclaration")};Hh.parseWhileStatement=function(c){this.next();c.test=this.parseParenExpression();this.labels.push(aO);c.body=this.parseStatement("while");this.labels.pop();return this.finishNode(c,"WhileStatement")};Hh.parseWithStatement=function(c){this.strict&&this.raise(this.start,"'with' in strict mode");this.next();c.object=this.parseParenExpression();c.body=this.parseStatement("with");return this.finishNode(c,"WithStatement")};Hh.parseEmptyStatement=function(c){this.next();return this.finishNode(c,
"EmptyStatement")};Hh.parseLabeledStatement=function(c,k,d,h){for(var n=0,b=this.labels;n<b.length;n+=1)b[n].name===k&&this.raise(d.start,"Label '"+k+"' is already declared");n=this.type.isLoop?"loop":this.type===Ea._switch?"switch":null;for(b=this.labels.length-1;0<=b;b--){var e=this.labels[b];if(e.statementStart===c.start)e.statementStart=this.start,e.kind=n;else break}this.labels.push({name:k,kind:n,statementStart:this.start});c.body=this.parseStatement(h?-1===h.indexOf("label")?h+"label":h:"label");
this.labels.pop();c.label=d;return this.finishNode(c,"LabeledStatement")};Hh.parseExpressionStatement=function(c,k){c.expression=k;this.semicolon();return this.finishNode(c,"ExpressionStatement")};Hh.parseBlock=function(c,k,d){void 0===c&&(c=!0);void 0===k&&(k=this.startNode());k.body=[];this.expect(Ea.braceL);for(c&&this.enterScope(0);this.type!==Ea.braceR;){var h=this.parseStatement(null);k.body.push(h)}d&&(this.strict=!1);this.next();c&&this.exitScope();return this.finishNode(k,"BlockStatement")};
Hh.parseFor=function(c,k){c.init=k;this.expect(Ea.semi);c.test=this.type===Ea.semi?null:this.parseExpression();this.expect(Ea.semi);c.update=this.type===Ea.parenR?null:this.parseExpression();this.expect(Ea.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,"ForStatement")};Hh.parseForIn=function(c,k){var d=this.type===Ea._in;this.next();"VariableDeclaration"===k.type&&null!=k.declarations[0].init&&(!d||8>this.options.ecmaVersion||this.strict||"var"!==
k.kind||"Identifier"!==k.declarations[0].id.type)&&this.raise(k.start,(d?"for-in":"for-of")+" loop variable declaration may not have an initializer");c.left=k;c.right=d?this.parseExpression():this.parseMaybeAssign();this.expect(Ea.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,d?"ForInStatement":"ForOfStatement")};Hh.parseVar=function(c,k,d){c.declarations=[];for(c.kind=d;;){var h=this.startNode();this.parseVarId(h,d);this.eat(Ea.eq)?h.init=this.parseMaybeAssign(k):
"const"!==d||this.type===Ea._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"===h.id.type||k&&(this.type===Ea._in||this.isContextual("of"))?h.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected();c.declarations.push(this.finishNode(h,"VariableDeclarator"));if(!this.eat(Ea.comma))break}return c};Hh.parseVarId=function(c,k){c.id=this.parseBindingAtom();this.checkLValPattern(c.id,"var"===k?1:2,!1)};var TC=1,bO=2;Hh.parseFunction=
function(c,k,d,h){this.initFunction(c);if(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!h)this.type===Ea.star&&k&bO&&this.unexpected(),c.generator=this.eat(Ea.star);8<=this.options.ecmaVersion&&(c.async=!!h);k&TC&&(c.id=k&4&&this.type!==Ea.name?null:this.parseIdent(),!c.id||k&bO||this.checkLValSimple(c.id,this.strict||c.generator||c.async?this.treatFunctionsAsVar?1:2:3));h=this.yieldPos;var n=this.awaitPos,b=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|
(c.async?4:0)|(c.generator?8:0));k&TC||(c.id=this.type===Ea.name?this.parseIdent():null);this.parseFunctionParams(c);this.parseFunctionBody(c,d,!1);this.yieldPos=h;this.awaitPos=n;this.awaitIdentPos=b;return this.finishNode(c,k&TC?"FunctionDeclaration":"FunctionExpression")};Hh.parseFunctionParams=function(c){this.expect(Ea.parenL);c.params=this.parseBindingList(Ea.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams()};Hh.parseClass=function(c,k){this.next();var d=this.strict;
this.strict=!0;this.parseClassId(c,k);this.parseClassSuper(c);var h=this.startNode(),n=!1;h.body=[];for(this.expect(Ea.braceL);this.type!==Ea.braceR;){var b=this.parseClassElement(null!==c.superClass);b&&(h.body.push(b),"MethodDefinition"===b.type&&"constructor"===b.kind&&(n&&this.raise(b.start,"Duplicate constructor in the same class"),n=!0))}this.strict=d;this.next();c.body=this.finishNode(h,"ClassBody");return this.finishNode(c,k?"ClassDeclaration":"ClassExpression")};Hh.parseClassElement=function(c){var k=
this;if(this.eat(Ea.semi))return null;var d=this.startNode(),h=function(m,a){void 0===a&&(a=!1);var g=k.start,l=k.startLoc;if(!k.eatContextual(m))return!1;if(!(k.type===Ea.parenL||a&&k.canInsertSemicolon()))return!0;d.key&&k.unexpected();d.computed=!1;d.key=k.startNodeAt(g,l);d.key.name=m;k.finishNode(d.key,"Identifier");return!1};d.kind="method";d.static=h("static");var n=this.eat(Ea.star),b=!1;n||(8<=this.options.ecmaVersion&&h("async",!0)?(b=!0,n=9<=this.options.ecmaVersion&&this.eat(Ea.star)):
h("get")?d.kind="get":h("set")&&(d.kind="set"));d.key||this.parsePropertyName(d);h=d.key;var e=!1;d.computed||d.static||!("Identifier"===h.type&&"constructor"===h.name||"Literal"===h.type&&"constructor"===h.value)?d.static&&"Identifier"===h.type&&"prototype"===h.name&&this.raise(h.start,"Classes may not have a static property named prototype"):("method"!==d.kind&&this.raise(h.start,"Constructor can't have get/set modifier"),n&&this.raise(h.start,"Constructor can't be a generator"),b&&this.raise(h.start,
"Constructor can't be an async method"),d.kind="constructor",e=c);this.parseClassMethod(d,n,b,e);"get"===d.kind&&0!==d.value.params.length&&this.raiseRecoverable(d.value.start,"getter should have no params");"set"===d.kind&&1!==d.value.params.length&&this.raiseRecoverable(d.value.start,"setter should have exactly one param");"set"===d.kind&&"RestElement"===d.value.params[0].type&&this.raiseRecoverable(d.value.params[0].start,"Setter cannot use rest params");return d};Hh.parseClassMethod=function(c,
k,d,h){c.value=this.parseMethod(k,d,h);return this.finishNode(c,"MethodDefinition")};Hh.parseClassId=function(c,k){this.type===Ea.name?(c.id=this.parseIdent(),k&&this.checkLValSimple(c.id,2,!1)):(!0===k&&this.unexpected(),c.id=null)};Hh.parseClassSuper=function(c){c.superClass=this.eat(Ea._extends)?this.parseExprSubscripts():null};Hh.parseExport=function(c,k){this.next();if(this.eat(Ea.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?(c.exported=this.parseIdent(!0),this.checkExport(k,
c.exported.name,this.lastTokStart)):c.exported=null),this.expectContextual("from"),this.type!==Ea.string&&this.unexpected(),c.source=this.parseExprAtom(),this.semicolon(),this.finishNode(c,"ExportAllDeclaration");if(this.eat(Ea._default)){this.checkExport(k,"default",this.lastTokStart);var d;this.type===Ea._function||(d=this.isAsyncFunction())?(k=this.startNode(),this.next(),d&&this.next(),c.declaration=this.parseFunction(k,TC|4,!1,d)):this.type===Ea._class?(d=this.startNode(),c.declaration=this.parseClass(d,
"nullableID")):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())c.declaration=this.parseStatement(null),"VariableDeclaration"===c.declaration.type?this.checkVariableExport(k,c.declaration.declarations):this.checkExport(k,c.declaration.id.name,c.declaration.id.start),c.specifiers=[],c.source=null;else{c.declaration=null;c.specifiers=this.parseExportSpecifiers(k);if(this.eatContextual("from"))this.type!==
Ea.string&&this.unexpected(),c.source=this.parseExprAtom();else{d=0;for(k=c.specifiers;d<k.length;d+=1){var h=k[d];this.checkUnreserved(h.local);this.checkLocalExport(h.local)}c.source=null}this.semicolon()}return this.finishNode(c,"ExportNamedDeclaration")};Hh.checkExport=function(c,k,d){c&&(yE.call(c,k)&&this.raiseRecoverable(d,"Duplicate export '"+k+"'"),c[k]=!0)};Hh.checkPatternExport=function(c,k){var d=k.type;if("Identifier"===d)this.checkExport(c,k.name,k.start);else if("ObjectPattern"===d)for(d=
0,k=k.properties;d<k.length;d+=1)this.checkPatternExport(c,k[d]);else if("ArrayPattern"===d)for(d=0,k=k.elements;d<k.length;d+=1){var h=k[d];h&&this.checkPatternExport(c,h)}else"Property"===d?this.checkPatternExport(c,k.value):"AssignmentPattern"===d?this.checkPatternExport(c,k.left):"RestElement"===d?this.checkPatternExport(c,k.argument):"ParenthesizedExpression"===d&&this.checkPatternExport(c,k.expression)};Hh.checkVariableExport=function(c,k){if(c)for(var d=0;d<k.length;d+=1)this.checkPatternExport(c,
k[d].id)};Hh.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()};Hh.parseExportSpecifiers=function(c){var k=[],d=!0;for(this.expect(Ea.braceL);!this.eat(Ea.braceR);){if(d)d=!1;else if(this.expect(Ea.comma),this.afterTrailingComma(Ea.braceR))break;var h=this.startNode();h.local=this.parseIdent(!0);h.exported=this.eatContextual("as")?this.parseIdent(!0):
h.local;this.checkExport(c,h.exported.name,h.exported.start);k.push(this.finishNode(h,"ExportSpecifier"))}return k};Hh.parseImport=function(c){this.next();this.type===Ea.string?(c.specifiers=oba,c.source=this.parseExprAtom()):(c.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),c.source=this.type===Ea.string?this.parseExprAtom():this.unexpected());this.semicolon();return this.finishNode(c,"ImportDeclaration")};Hh.parseImportSpecifiers=function(){var c=[],k=!0;if(this.type===Ea.name){var d=
this.startNode();d.local=this.parseIdent();this.checkLValSimple(d.local,2);c.push(this.finishNode(d,"ImportDefaultSpecifier"));if(!this.eat(Ea.comma))return c}if(this.type===Ea.star)return k=this.startNode(),this.next(),this.expectContextual("as"),k.local=this.parseIdent(),this.checkLValSimple(k.local,2),c.push(this.finishNode(k,"ImportNamespaceSpecifier")),c;for(this.expect(Ea.braceL);!this.eat(Ea.braceR);){if(k)k=!1;else if(this.expect(Ea.comma),this.afterTrailingComma(Ea.braceR))break;d=this.startNode();
d.imported=this.parseIdent(!0);this.eatContextual("as")?d.local=this.parseIdent():(this.checkUnreserved(d.imported),d.local=d.imported);this.checkLValSimple(d.local,2);c.push(this.finishNode(d,"ImportSpecifier"))}return c};Hh.adaptDirectivePrologue=function(c){for(var k=0;k<c.length&&this.isDirectiveCandidate(c[k]);++k)c[k].directive=c[k].expression.raw.slice(1,-1)};Hh.isDirectiveCandidate=function(c){return"ExpressionStatement"===c.type&&"Literal"===c.expression.type&&"string"===typeof c.expression.value&&
('"'===this.input[c.start]||"'"===this.input[c.start])};var cr=uk.prototype;cr.toAssignable=function(c,k,d){if(6<=this.options.ecmaVersion&&c)switch(c.type){case "Identifier":this.inAsync&&"await"===c.name&&this.raise(c.start,"Cannot use 'await' as identifier inside an async function");break;case "ObjectPattern":case "ArrayPattern":case "AssignmentPattern":case "RestElement":break;case "ObjectExpression":c.type="ObjectPattern";d&&this.checkPatternErrors(d,!0);d=0;for(var h=c.properties;d<h.length;d+=
1){var n=h[d];this.toAssignable(n,k);"RestElement"!==n.type||"ArrayPattern"!==n.argument.type&&"ObjectPattern"!==n.argument.type||this.raise(n.argument.start,"Unexpected token")}break;case "Property":"init"!==c.kind&&this.raise(c.key.start,"Object pattern can't contain getter or setter");this.toAssignable(c.value,k);break;case "ArrayExpression":c.type="ArrayPattern";d&&this.checkPatternErrors(d,!0);this.toAssignableList(c.elements,k);break;case "SpreadElement":c.type="RestElement";this.toAssignable(c.argument,
k);"AssignmentPattern"===c.argument.type&&this.raise(c.argument.start,"Rest elements cannot have a default value");break;case "AssignmentExpression":"="!==c.operator&&this.raise(c.left.end,"Only '=' operator can be used for specifying default value.");c.type="AssignmentPattern";delete c.operator;this.toAssignable(c.left,k);break;case "ParenthesizedExpression":this.toAssignable(c.expression,k,d);break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");
break;case "MemberExpression":if(!k)break;default:this.raise(c.start,"Assigning to rvalue")}else d&&this.checkPatternErrors(d,!0);return c};cr.toAssignableList=function(c,k){for(var d=c.length,h=0;h<d;h++){var n=c[h];n&&this.toAssignable(n,k)}d&&(d=c[d-1],6===this.options.ecmaVersion&&k&&d&&"RestElement"===d.type&&"Identifier"!==d.argument.type&&this.unexpected(d.argument.start));return c};cr.parseSpread=function(c){var k=this.startNode();this.next();k.argument=this.parseMaybeAssign(!1,c);return this.finishNode(k,
"SpreadElement")};cr.parseRestBinding=function(){var c=this.startNode();this.next();6===this.options.ecmaVersion&&this.type!==Ea.name&&this.unexpected();c.argument=this.parseBindingAtom();return this.finishNode(c,"RestElement")};cr.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case Ea.bracketL:var c=this.startNode();this.next();c.elements=this.parseBindingList(Ea.bracketR,!0,!0);return this.finishNode(c,"ArrayPattern");case Ea.braceL:return this.parseObj(!0)}return this.parseIdent()};
cr.parseBindingList=function(c,k,d){for(var h=[],n=!0;!this.eat(c);)if(n?n=!1:this.expect(Ea.comma),k&&this.type===Ea.comma)h.push(null);else if(d&&this.afterTrailingComma(c))break;else if(this.type===Ea.ellipsis){k=this.parseRestBinding();this.parseBindingListItem(k);h.push(k);this.type===Ea.comma&&this.raise(this.start,"Comma is not permitted after the rest element");this.expect(c);break}else{var b=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(b);h.push(b)}return h};
cr.parseBindingListItem=function(c){return c};cr.parseMaybeDefault=function(c,k,d){d=d||this.parseBindingAtom();if(6>this.options.ecmaVersion||!this.eat(Ea.eq))return d;c=this.startNodeAt(c,k);c.left=d;c.right=this.parseMaybeAssign();return this.finishNode(c,"AssignmentPattern")};cr.checkLValSimple=function(c,k,d){void 0===k&&(k=0);var h=0!==k;switch(c.type){case "Identifier":this.strict&&this.reservedWordsStrictBind.test(c.name)&&this.raiseRecoverable(c.start,(h?"Binding ":"Assigning to ")+c.name+
" in strict mode");h&&(2===k&&"let"===c.name&&this.raiseRecoverable(c.start,"let is disallowed as a lexically bound name"),d&&(yE.call(d,c.name)&&this.raiseRecoverable(c.start,"Argument name clash"),d[c.name]=!0),5!==k&&this.declareName(c.name,k,c.start));break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":h&&this.raiseRecoverable(c.start,"Binding member expression");break;case "ParenthesizedExpression":return h&&
this.raiseRecoverable(c.start,"Binding parenthesized expression"),this.checkLValSimple(c.expression,k,d);default:this.raise(c.start,(h?"Binding":"Assigning to")+" rvalue")}};cr.checkLValPattern=function(c,k,d){void 0===k&&(k=0);switch(c.type){case "ObjectPattern":var h=0;for(c=c.properties;h<c.length;h+=1)this.checkLValInnerPattern(c[h],k,d);break;case "ArrayPattern":h=0;for(c=c.elements;h<c.length;h+=1){var n=c[h];n&&this.checkLValInnerPattern(n,k,d)}break;default:this.checkLValSimple(c,k,d)}};cr.checkLValInnerPattern=
function(c,k,d){void 0===k&&(k=0);switch(c.type){case "Property":this.checkLValInnerPattern(c.value,k,d);break;case "AssignmentPattern":this.checkLValPattern(c.left,k,d);break;case "RestElement":this.checkLValPattern(c.argument,k,d);break;default:this.checkLValPattern(c,k,d)}};var Xh=uk.prototype;Xh.checkPropClash=function(c,k,d){if(!(9<=this.options.ecmaVersion&&"SpreadElement"===c.type||6<=this.options.ecmaVersion&&(c.computed||c.method||c.shorthand))){var h=c.key;switch(h.type){case "Identifier":var n=
h.name;break;case "Literal":n=String(h.value);break;default:return}c=c.kind;6<=this.options.ecmaVersion?"__proto__"===n&&"init"===c&&(k.proto&&(d?0>d.doubleProto&&(d.doubleProto=h.start):this.raiseRecoverable(h.start,"Redefinition of __proto__ property")),k.proto=!0):(n="$"+n,(d=k[n])?("init"===c?this.strict&&d.init||d.get||d.set:d.init||d[c])&&this.raiseRecoverable(h.start,"Redefinition of property"):d=k[n]={init:!1,get:!1,set:!1},d[c]=!0)}};Xh.parseExpression=function(c,k){var d=this.start,h=this.startLoc,
n=this.parseMaybeAssign(c,k);if(this.type===Ea.comma){d=this.startNodeAt(d,h);for(d.expressions=[n];this.eat(Ea.comma);)d.expressions.push(this.parseMaybeAssign(c,k));return this.finishNode(d,"SequenceExpression")}return n};Xh.parseMaybeAssign=function(c,k,d){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(c);this.exprAllowed=!1}var h=!1,n=-1,b=-1;k?(n=k.parenthesizedAssign,b=k.trailingComma,k.parenthesizedAssign=k.trailingComma=-1):(k=new mo,h=!0);var e=this.start,m=this.startLoc;
if(this.type===Ea.parenL||this.type===Ea.name)this.potentialArrowAt=this.start;var a=this.parseMaybeConditional(c,k);d&&(a=d.call(this,a,e,m));if(this.type.isAssign)return d=this.startNodeAt(e,m),d.operator=this.value,this.type===Ea.eq&&(a=this.toAssignable(a,!1,k)),h||(k.parenthesizedAssign=k.trailingComma=k.doubleProto=-1),k.shorthandAssign>=a.start&&(k.shorthandAssign=-1),this.type===Ea.eq?this.checkLValPattern(a):this.checkLValSimple(a),d.left=a,this.next(),d.right=this.parseMaybeAssign(c),this.finishNode(d,
"AssignmentExpression");h&&this.checkExpressionErrors(k,!0);-1<n&&(k.parenthesizedAssign=n);-1<b&&(k.trailingComma=b);return a};Xh.parseMaybeConditional=function(c,k){var d=this.start,h=this.startLoc,n=this.parseExprOps(c,k);return this.checkExpressionErrors(k)?n:this.eat(Ea.question)?(k=this.startNodeAt(d,h),k.test=n,k.consequent=this.parseMaybeAssign(),this.expect(Ea.colon),k.alternate=this.parseMaybeAssign(c),this.finishNode(k,"ConditionalExpression")):n};Xh.parseExprOps=function(c,k){var d=this.start,
h=this.startLoc,n=this.parseMaybeUnary(k,!1);return this.checkExpressionErrors(k)?n:n.start===d&&"ArrowFunctionExpression"===n.type?n:this.parseExprOp(n,d,h,-1,c)};Xh.parseExprOp=function(c,k,d,h,n){var b=this.type.binop;if(null!=b&&(!n||this.type!==Ea._in)&&b>h){var e=this.type===Ea.logicalOR||this.type===Ea.logicalAND,m=this.type===Ea.coalesce;m&&(b=Ea.logicalAND.binop);var a=this.value;this.next();var g=this.start,l=this.startLoc;b=this.parseExprOp(this.parseMaybeUnary(null,!1),g,l,b,n);c=this.buildBinary(k,
d,c,b,a,e||m);(e&&this.type===Ea.coalesce||m&&(this.type===Ea.logicalOR||this.type===Ea.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses");return this.parseExprOp(c,k,d,h,n)}return c};Xh.buildBinary=function(c,k,d,h,n,b){c=this.startNodeAt(c,k);c.left=d;c.operator=n;c.right=h;return this.finishNode(c,b?"LogicalExpression":"BinaryExpression")};Xh.parseMaybeUnary=function(c,k){var d=this.start,h=this.startLoc;if(this.isContextual("await")&&
(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var n=this.parseAwait();k=!0}else if(this.type.prefix){n=this.startNode();var b=this.type===Ea.incDec;n.operator=this.value;n.prefix=!0;this.next();n.argument=this.parseMaybeUnary(null,!0);this.checkExpressionErrors(c,!0);b?this.checkLValSimple(n.argument):this.strict&&"delete"===n.operator&&"Identifier"===n.argument.type?this.raiseRecoverable(n.start,"Deleting local variable in strict mode"):k=!0;n=this.finishNode(n,b?"UpdateExpression":
"UnaryExpression")}else{n=this.parseExprSubscripts(c);if(this.checkExpressionErrors(c))return n;for(;this.type.postfix&&!this.canInsertSemicolon();)c=this.startNodeAt(d,h),c.operator=this.value,c.prefix=!1,c.argument=n,this.checkLValSimple(n),this.next(),n=this.finishNode(c,"UpdateExpression")}return!k&&this.eat(Ea.starstar)?this.buildBinary(d,h,n,this.parseMaybeUnary(null,!1),"**",!1):n};Xh.parseExprSubscripts=function(c){var k=this.start,d=this.startLoc,h=this.parseExprAtom(c);if("ArrowFunctionExpression"===
h.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return h;k=this.parseSubscripts(h,k,d);c&&"MemberExpression"===k.type&&(c.parenthesizedAssign>=k.start&&(c.parenthesizedAssign=-1),c.parenthesizedBind>=k.start&&(c.parenthesizedBind=-1));return k};Xh.parseSubscripts=function(c,k,d,h){for(var n=8<=this.options.ecmaVersion&&"Identifier"===c.type&&"async"===c.name&&this.lastTokEnd===c.end&&!this.canInsertSemicolon()&&5===c.end-c.start&&this.potentialArrowAt===c.start,b=!1;;){var e=this.parseSubscript(c,
k,d,h,n,b);e.optional&&(b=!0);if(e===c||"ArrowFunctionExpression"===e.type)return b&&(c=this.startNodeAt(k,d),c.expression=e,e=this.finishNode(c,"ChainExpression")),e;c=e}};Xh.parseSubscript=function(c,k,d,h,n,b){var e=11<=this.options.ecmaVersion,m=e&&this.eat(Ea.questionDot);h&&m&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var a=this.eat(Ea.bracketL);if(a||m&&this.type!==Ea.parenL&&this.type!==Ea.backQuote||this.eat(Ea.dot))k=this.startNodeAt(k,
d),k.object=c,k.property=a?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),k.computed=!!a,a&&this.expect(Ea.bracketR),e&&(k.optional=m),c=this.finishNode(k,"MemberExpression");else if(!h&&this.eat(Ea.parenL)){h=new mo;b=this.yieldPos;var g=this.awaitPos,l=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;a=this.parseExprList(Ea.parenR,8<=this.options.ecmaVersion,!1,h);if(n&&!m&&!this.canInsertSemicolon()&&this.eat(Ea.arrow))return this.checkPatternErrors(h,
!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=b,this.awaitPos=g,this.awaitIdentPos=l,this.parseArrowExpression(this.startNodeAt(k,d),a,!0);this.checkExpressionErrors(h,!0);this.yieldPos=b||this.yieldPos;this.awaitPos=g||this.awaitPos;this.awaitIdentPos=l||this.awaitIdentPos;k=this.startNodeAt(k,d);k.callee=c;k.arguments=a;e&&(k.optional=m);c=this.finishNode(k,"CallExpression")}else this.type===
Ea.backQuote&&((m||b)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),e=this.startNodeAt(k,d),e.tag=c,e.quasi=this.parseTemplate({isTagged:!0}),c=this.finishNode(e,"TaggedTemplateExpression"));return c};Xh.parseExprAtom=function(c){this.type===Ea.slash&&this.readRegexp();var k=this.potentialArrowAt===this.start;switch(this.type){case Ea._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),k=this.startNode(),this.next(),
this.type!==Ea.parenL||this.allowDirectSuper||this.raise(k.start,"super() call outside constructor of a subclass"),this.type!==Ea.dot&&this.type!==Ea.bracketL&&this.type!==Ea.parenL&&this.unexpected(),this.finishNode(k,"Super");case Ea._this:return k=this.startNode(),this.next(),this.finishNode(k,"ThisExpression");case Ea.name:c=this.start;var d=this.startLoc,h=this.containsEsc,n=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!h&&"async"===n.name&&!this.canInsertSemicolon()&&this.eat(Ea._function))return this.parseFunction(this.startNodeAt(c,
d),0,!1,!0);if(k&&!this.canInsertSemicolon()){if(this.eat(Ea.arrow))return this.parseArrowExpression(this.startNodeAt(c,d),[n],!1);if(8<=this.options.ecmaVersion&&"async"===n.name&&this.type===Ea.name&&!h)return n=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(Ea.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(c,d),[n],!0)}return n;case Ea.regexp:return c=this.value,k=this.parseLiteral(c.value),k.regex={pattern:c.pattern,flags:c.flags},k;case Ea.num:case Ea.string:return this.parseLiteral(this.value);
case Ea._null:case Ea._true:case Ea._false:return k=this.startNode(),k.value=this.type===Ea._null?null:this.type===Ea._true,k.raw=this.type.keyword,this.next(),this.finishNode(k,"Literal");case Ea.parenL:return d=this.start,k=this.parseParenAndDistinguishExpression(k),c&&(0>c.parenthesizedAssign&&!this.isSimpleAssignTarget(k)&&(c.parenthesizedAssign=d),0>c.parenthesizedBind&&(c.parenthesizedBind=d)),k;case Ea.bracketL:return k=this.startNode(),this.next(),k.elements=this.parseExprList(Ea.bracketR,
!0,!0,c),this.finishNode(k,"ArrayExpression");case Ea.braceL:return this.parseObj(!1,c);case Ea._function:return k=this.startNode(),this.next(),this.parseFunction(k,0);case Ea._class:return this.parseClass(this.startNode(),!1);case Ea._new:return this.parseNew();case Ea.backQuote:return this.parseTemplate();case Ea._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.unexpected();default:this.unexpected()}};Xh.parseExprImport=function(){var c=this.startNode();this.containsEsc&&
this.raiseRecoverable(this.start,"Escape sequence in keyword import");var k=this.parseIdent(!0);switch(this.type){case Ea.parenL:return this.parseDynamicImport(c);case Ea.dot:return c.meta=k,this.parseImportMeta(c);default:this.unexpected()}};Xh.parseDynamicImport=function(c){this.next();c.source=this.parseMaybeAssign();if(!this.eat(Ea.parenR)){var k=this.start;this.eat(Ea.comma)&&this.eat(Ea.parenR)?this.raiseRecoverable(k,"Trailing comma is not allowed in import()"):this.unexpected(k)}return this.finishNode(c,
"ImportExpression")};Xh.parseImportMeta=function(c){this.next();var k=this.containsEsc;c.property=this.parseIdent(!0);"meta"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for import is 'import.meta'");k&&this.raiseRecoverable(c.start,"'import.meta' must not contain escaped characters");"module"!==this.options.sourceType&&this.raiseRecoverable(c.start,"Cannot use 'import.meta' outside a module");return this.finishNode(c,"MetaProperty")};Xh.parseLiteral=function(c){var k=
this.startNode();k.value=c;k.raw=this.input.slice(this.start,this.end);110===k.raw.charCodeAt(k.raw.length-1)&&(k.bigint=k.raw.slice(0,-1).replace(/_/g,""));this.next();return this.finishNode(k,"Literal")};Xh.parseParenExpression=function(){this.expect(Ea.parenL);var c=this.parseExpression();this.expect(Ea.parenR);return c};Xh.parseParenAndDistinguishExpression=function(c){var k=this.start,d=this.startLoc,h=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();var n=this.start,b=
this.startLoc,e=[],m=!0,a=!1,g=new mo,l=this.yieldPos,q=this.awaitPos;for(this.awaitPos=this.yieldPos=0;this.type!==Ea.parenR;)if(m?m=!1:this.expect(Ea.comma),h&&this.afterTrailingComma(Ea.parenR,!0)){a=!0;break}else if(this.type===Ea.ellipsis){var r=this.start;e.push(this.parseParenItem(this.parseRestBinding()));this.type===Ea.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else e.push(this.parseMaybeAssign(!1,g,this.parseParenItem));h=this.start;m=this.startLoc;
this.expect(Ea.parenR);if(c&&!this.canInsertSemicolon()&&this.eat(Ea.arrow))return this.checkPatternErrors(g,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=l,this.awaitPos=q,this.parseParenArrowList(k,d,e);e.length&&!a||this.unexpected(this.lastTokStart);r&&this.unexpected(r);this.checkExpressionErrors(g,!0);this.yieldPos=l||this.yieldPos;this.awaitPos=q||this.awaitPos;1<e.length?(c=this.startNodeAt(n,b),c.expressions=e,this.finishNodeAt(c,"SequenceExpression",h,m)):c=e[0]}else c=this.parseParenExpression();
return this.options.preserveParens?(k=this.startNodeAt(k,d),k.expression=c,this.finishNode(k,"ParenthesizedExpression")):c};Xh.parseParenItem=function(c){return c};Xh.parseParenArrowList=function(c,k,d){return this.parseArrowExpression(this.startNodeAt(c,k),d)};var pba=[];Xh.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var c=this.startNode(),k=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Ea.dot))return c.meta=k,k=this.containsEsc,
c.property=this.parseIdent(!0),"target"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for new is 'new.target'"),k&&this.raiseRecoverable(c.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(c.start,"'new.target' can only be used in functions"),this.finishNode(c,"MetaProperty");k=this.start;var d=this.startLoc,h=this.type===Ea._import;c.callee=this.parseSubscripts(this.parseExprAtom(),k,d,!0);h&&"ImportExpression"===
c.callee.type&&this.raise(k,"Cannot use new with import()");this.eat(Ea.parenL)?c.arguments=this.parseExprList(Ea.parenR,8<=this.options.ecmaVersion,!1):c.arguments=pba;return this.finishNode(c,"NewExpression")};Xh.parseTemplateElement=function(c){c=c.isTagged;var k=this.startNode();this.type===Ea.invalidTemplate?(c||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),k.value={raw:this.value,cooked:null}):k.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,
"\n"),cooked:this.value};this.next();k.tail=this.type===Ea.backQuote;return this.finishNode(k,"TemplateElement")};Xh.parseTemplate=function(c){void 0===c&&(c={});c=c.isTagged;void 0===c&&(c=!1);var k=this.startNode();this.next();k.expressions=[];var d=this.parseTemplateElement({isTagged:c});for(k.quasis=[d];!d.tail;)this.type===Ea.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Ea.dollarBraceL),k.expressions.push(this.parseExpression()),this.expect(Ea.braceR),k.quasis.push(d=
this.parseTemplateElement({isTagged:c}));this.next();return this.finishNode(k,"TemplateLiteral")};Xh.isAsyncProp=function(c){return!c.computed&&"Identifier"===c.key.type&&"async"===c.key.name&&(this.type===Ea.name||this.type===Ea.num||this.type===Ea.string||this.type===Ea.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===Ea.star)&&!$n.test(this.input.slice(this.lastTokEnd,this.start))};Xh.parseObj=function(c,k){var d=this.startNode(),h=!0,n={};d.properties=[];for(this.next();!this.eat(Ea.braceR);){if(h)h=
!1;else if(this.expect(Ea.comma),5<=this.options.ecmaVersion&&this.afterTrailingComma(Ea.braceR))break;var b=this.parseProperty(c,k);c||this.checkPropClash(b,n,k);d.properties.push(b)}return this.finishNode(d,c?"ObjectPattern":"ObjectExpression")};Xh.parseProperty=function(c,k){var d=this.startNode(),h;if(9<=this.options.ecmaVersion&&this.eat(Ea.ellipsis)){if(c)return d.argument=this.parseIdent(!1),this.type===Ea.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(d,
"RestElement");this.type===Ea.parenL&&k&&(0>k.parenthesizedAssign&&(k.parenthesizedAssign=this.start),0>k.parenthesizedBind&&(k.parenthesizedBind=this.start));d.argument=this.parseMaybeAssign(!1,k);this.type===Ea.comma&&k&&0>k.trailingComma&&(k.trailingComma=this.start);return this.finishNode(d,"SpreadElement")}if(6<=this.options.ecmaVersion){d.method=!1;d.shorthand=!1;if(c||k){var n=this.start;var b=this.startLoc}c||(h=this.eat(Ea.star))}var e=this.containsEsc;this.parsePropertyName(d);if(!c&&!e&&
8<=this.options.ecmaVersion&&!h&&this.isAsyncProp(d)){var m=!0;h=9<=this.options.ecmaVersion&&this.eat(Ea.star);this.parsePropertyName(d,k)}else m=!1;this.parsePropertyValue(d,c,h,m,n,b,k,e);return this.finishNode(d,"Property")};Xh.parsePropertyValue=function(c,k,d,h,n,b,e,m){(d||h)&&this.type===Ea.colon&&this.unexpected();this.eat(Ea.colon)?(c.value=k?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,e),c.kind="init"):6<=this.options.ecmaVersion&&this.type===Ea.parenL?(k&&
this.unexpected(),c.kind="init",c.method=!0,c.value=this.parseMethod(d,h)):k||m||!(5<=this.options.ecmaVersion)||c.computed||"Identifier"!==c.key.type||"get"!==c.key.name&&"set"!==c.key.name||this.type===Ea.comma||this.type===Ea.braceR||this.type===Ea.eq?6<=this.options.ecmaVersion&&!c.computed&&"Identifier"===c.key.type?((d||h)&&this.unexpected(),this.checkUnreserved(c.key),"await"!==c.key.name||this.awaitIdentPos||(this.awaitIdentPos=n),c.kind="init",k?c.value=this.parseMaybeDefault(n,b,this.copyNode(c.key)):
this.type===Ea.eq&&e?(0>e.shorthandAssign&&(e.shorthandAssign=this.start),c.value=this.parseMaybeDefault(n,b,this.copyNode(c.key))):c.value=this.copyNode(c.key),c.shorthand=!0):this.unexpected():((d||h)&&this.unexpected(),c.kind=c.key.name,this.parsePropertyName(c),c.value=this.parseMethod(!1),c.value.params.length!==("get"===c.kind?0:1)?(k=c.value.start,"get"===c.kind?this.raiseRecoverable(k,"getter should have no params"):this.raiseRecoverable(k,"setter should have exactly one param")):"set"===
c.kind&&"RestElement"===c.value.params[0].type&&this.raiseRecoverable(c.value.params[0].start,"Setter cannot use rest params"))};Xh.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(Ea.bracketL))return c.computed=!0,c.key=this.parseMaybeAssign(),this.expect(Ea.bracketR),c.key;c.computed=!1}return c.key=this.type===Ea.num||this.type===Ea.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)};Xh.initFunction=function(c){c.id=null;6<=this.options.ecmaVersion&&
(c.generator=c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};Xh.parseMethod=function(c,k,d){var h=this.startNode(),n=this.yieldPos,b=this.awaitPos,e=this.awaitIdentPos;this.initFunction(h);6<=this.options.ecmaVersion&&(h.generator=c);8<=this.options.ecmaVersion&&(h.async=!!k);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(k?4:0)|(h.generator?8:0)|64|(d?128:0));this.expect(Ea.parenL);h.params=this.parseBindingList(Ea.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams();
this.parseFunctionBody(h,!1,!0);this.yieldPos=n;this.awaitPos=b;this.awaitIdentPos=e;return this.finishNode(h,"FunctionExpression")};Xh.parseArrowExpression=function(c,k,d){var h=this.yieldPos,n=this.awaitPos,b=this.awaitIdentPos;this.enterScope((d?4:0)|18);this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!d);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;c.params=this.toAssignableList(k,!0);this.parseFunctionBody(c,!0,!1);this.yieldPos=h;this.awaitPos=n;this.awaitIdentPos=b;return this.finishNode(c,
"ArrowFunctionExpression")};Xh.parseFunctionBody=function(c,k,d){var h=this.strict,n=!1;if(k&&this.type!==Ea.braceL)c.body=this.parseMaybeAssign(),c.expression=!0,this.checkParams(c,!1);else{var b=7<=this.options.ecmaVersion&&!this.isSimpleParamList(c.params);(!h||b)&&(n=this.strictDirective(this.end))&&b&&this.raiseRecoverable(c.start,"Illegal 'use strict' directive in function with non-simple parameter list");b=this.labels;this.labels=[];n&&(this.strict=!0);this.checkParams(c,!h&&!n&&!k&&!d&&this.isSimpleParamList(c.params));
this.strict&&c.id&&this.checkLValSimple(c.id,5);c.body=this.parseBlock(!1,void 0,n&&!h);c.expression=!1;this.adaptDirectivePrologue(c.body.body);this.labels=b}this.exitScope()};Xh.isSimpleParamList=function(c){for(var k=0;k<c.length;k+=1)if("Identifier"!==c[k].type)return!1;return!0};Xh.checkParams=function(c,k){var d={},h=0;for(c=c.params;h<c.length;h+=1)this.checkLValInnerPattern(c[h],1,k?null:d)};Xh.parseExprList=function(c,k,d,h){for(var n=[],b=!0;!this.eat(c);){if(b)b=!1;else if(this.expect(Ea.comma),
k&&this.afterTrailingComma(c))break;if(d&&this.type===Ea.comma)var e=null;else this.type===Ea.ellipsis?(e=this.parseSpread(h),h&&this.type===Ea.comma&&0>h.trailingComma&&(h.trailingComma=this.start)):e=this.parseMaybeAssign(!1,h);n.push(e)}return n};Xh.checkUnreserved=function(c){var k=c.start,d=c.end;c=c.name;this.inGenerator&&"yield"===c&&this.raiseRecoverable(k,"Cannot use 'yield' as identifier inside a generator");this.inAsync&&"await"===c&&this.raiseRecoverable(k,"Cannot use 'await' as identifier inside an async function");
this.keywords.test(c)&&this.raise(k,"Unexpected keyword '"+c+"'");6>this.options.ecmaVersion&&-1!==this.input.slice(k,d).indexOf("\\")||!(this.strict?this.reservedWordsStrict:this.reservedWords).test(c)||(this.inAsync||"await"!==c||this.raiseRecoverable(k,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(k,"The keyword '"+c+"' is reserved"))};Xh.parseIdent=function(c,k){k=this.startNode();this.type===Ea.name?k.name=this.value:this.type.keyword?(k.name=this.type.keyword,
"class"!==k.name&&"function"!==k.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected();this.next(!!c);this.finishNode(k,"Identifier");c||(this.checkUnreserved(k),"await"!==k.name||this.awaitIdentPos||(this.awaitIdentPos=k.start));return k};Xh.parseYield=function(c){this.yieldPos||(this.yieldPos=this.start);var k=this.startNode();this.next();this.type===Ea.semi||this.canInsertSemicolon()||this.type!==Ea.star&&!this.type.startsExpr?
(k.delegate=!1,k.argument=null):(k.delegate=this.eat(Ea.star),k.argument=this.parseMaybeAssign(c));return this.finishNode(k,"YieldExpression")};Xh.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var c=this.startNode();this.next();c.argument=this.parseMaybeUnary(null,!1);return this.finishNode(c,"AwaitExpression")};var nH=uk.prototype;nH.raise=function(c,k){var d=Mr(this.input,c);k+=" ("+d.line+":"+d.column+")";k=new SyntaxError(k);k.pos=c;k.loc=d;k.raisedAt=this.pos;throw k;};nH.raiseRecoverable=
nH.raise;nH.curPosition=function(){if(this.options.locations)return new Py(this.curLine,this.pos-this.lineStart)};var gw=uk.prototype,qba=function(c){this.flags=c;this.var=[];this.lexical=[];this.functions=[]};gw.enterScope=function(c){this.scopeStack.push(new qba(c))};gw.exitScope=function(){this.scopeStack.pop()};gw.treatFunctionsAsVarInScope=function(c){return c.flags&2||!this.inModule&&c.flags&1};gw.declareName=function(c,k,d){var h=!1;if(2===k)k=this.currentScope(),h=-1<k.lexical.indexOf(c)||
-1<k.functions.indexOf(c)||-1<k.var.indexOf(c),k.lexical.push(c),this.inModule&&k.flags&1&&delete this.undefinedExports[c];else if(4===k)this.currentScope().lexical.push(c);else if(3===k)k=this.currentScope(),h=this.treatFunctionsAsVar?-1<k.lexical.indexOf(c):-1<k.lexical.indexOf(c)||-1<k.var.indexOf(c),k.functions.push(c);else for(k=this.scopeStack.length-1;0<=k;--k){var n=this.scopeStack[k];if(-1<n.lexical.indexOf(c)&&!(n.flags&32&&n.lexical[0]===c)||!this.treatFunctionsAsVarInScope(n)&&-1<n.functions.indexOf(c)){h=
!0;break}n.var.push(c);this.inModule&&n.flags&1&&delete this.undefinedExports[c];if(n.flags&3)break}h&&this.raiseRecoverable(d,"Identifier '"+c+"' has already been declared")};gw.checkLocalExport=function(c){-1===this.scopeStack[0].lexical.indexOf(c.name)&&-1===this.scopeStack[0].var.indexOf(c.name)&&(this.undefinedExports[c.name]=c)};gw.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};gw.currentVarScope=function(){for(var c=this.scopeStack.length-1;;c--){var k=this.scopeStack[c];
if(k.flags&3)return k}};gw.currentThisScope=function(){for(var c=this.scopeStack.length-1;;c--){var k=this.scopeStack[c];if(k.flags&3&&!(k.flags&16))return k}};var hw=function(c,k,d){this.type="";this.start=k;this.end=0;c.options.locations&&(this.loc=new Ow(c,d));c.options.directSourceFile&&(this.sourceFile=c.options.directSourceFile);c.options.ranges&&(this.range=[k,0])},UC=uk.prototype;UC.startNode=function(){return new hw(this,this.start,this.startLoc)};UC.startNodeAt=function(c,k){return new hw(this,
c,k)};UC.finishNode=function(c,k){return bv.call(this,c,k,this.lastTokEnd,this.lastTokEndLoc)};UC.finishNodeAt=function(c,k,d,h){return bv.call(this,c,k,d,h)};UC.copyNode=function(c){var k=new hw(this,c.start,this.startLoc),d;for(d in c)k[d]=c[d];return k};var Zp=function(c,k,d,h,n){this.token=c;this.isExpr=!!k;this.preserveSpace=!!d;this.override=h;this.generator=!!n},vk={b_stat:new Zp("{",!1),b_expr:new Zp("{",!0),b_tmpl:new Zp("${",!1),p_stat:new Zp("(",!1),p_expr:new Zp("(",!0),q_tmpl:new Zp("`",
!0,!0,function(c){return c.tryReadTemplateToken()}),f_stat:new Zp("function",!1),f_expr:new Zp("function",!0),f_expr_gen:new Zp("function",!0,!1,null,!0),f_gen:new Zp("function",!1,!1,null,!0)},oH=uk.prototype;oH.initialContext=function(){return[vk.b_stat]};oH.braceIsBlock=function(c){var k=this.curContext();return k===vk.f_expr||k===vk.f_stat?!0:c!==Ea.colon||k!==vk.b_stat&&k!==vk.b_expr?c===Ea._return||c===Ea.name&&this.exprAllowed?$n.test(this.input.slice(this.lastTokEnd,this.start)):c===Ea._else||
c===Ea.semi||c===Ea.eof||c===Ea.parenR||c===Ea.arrow?!0:c===Ea.braceL?k===vk.b_stat:c===Ea._var||c===Ea._const||c===Ea.name?!1:!this.exprAllowed:!k.isExpr};oH.inGeneratorContext=function(){for(var c=this.context.length-1;1<=c;c--){var k=this.context[c];if("function"===k.token)return k.generator}return!1};oH.updateContext=function(c){var k,d=this.type;d.keyword&&c===Ea.dot?this.exprAllowed=!1:(k=d.updateContext)?k.call(this,c):this.exprAllowed=d.beforeExpr};Ea.parenR.updateContext=Ea.braceR.updateContext=
function(){if(1===this.context.length)this.exprAllowed=!0;else{var c=this.context.pop();c===vk.b_stat&&"function"===this.curContext().token&&(c=this.context.pop());this.exprAllowed=!c.isExpr}};Ea.braceL.updateContext=function(c){this.context.push(this.braceIsBlock(c)?vk.b_stat:vk.b_expr);this.exprAllowed=!0};Ea.dollarBraceL.updateContext=function(){this.context.push(vk.b_tmpl);this.exprAllowed=!0};Ea.parenL.updateContext=function(c){this.context.push(c===Ea._if||c===Ea._for||c===Ea._with||c===Ea._while?
vk.p_stat:vk.p_expr);this.exprAllowed=!0};Ea.incDec.updateContext=function(){};Ea._function.updateContext=Ea._class.updateContext=function(c){!c.beforeExpr||c===Ea._else||c===Ea.semi&&this.curContext()!==vk.p_stat||c===Ea._return&&$n.test(this.input.slice(this.lastTokEnd,this.start))||(c===Ea.colon||c===Ea.braceL)&&this.curContext()===vk.b_stat?this.context.push(vk.f_stat):this.context.push(vk.f_expr);this.exprAllowed=!1};Ea.backQuote.updateContext=function(){this.curContext()===vk.q_tmpl?this.context.pop():
this.context.push(vk.q_tmpl);this.exprAllowed=!1};Ea.star.updateContext=function(c){c===Ea._function&&(c=this.context.length-1,this.context[c]=this.context[c]===vk.f_expr?vk.f_expr_gen:vk.f_gen);this.exprAllowed=!0};Ea.name.updateContext=function(c){var k=!1;6<=this.options.ecmaVersion&&c!==Ea.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(k=!0);this.exprAllowed=k};var g5={9:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",
10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},
h5={9:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",
10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",
11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",
12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},
DQ={};lp(9);lp(10);lp(11);lp(12);var vg=uk.prototype,zu=function(c){this.parser=c;this.validFlags="gim"+(6<=c.options.ecmaVersion?"uy":"")+(9<=c.options.ecmaVersion?"s":"");this.unicodeProperties=DQ[12<=c.options.ecmaVersion?12:c.options.ecmaVersion];this.flags=this.source="";this.start=0;this.switchN=this.switchU=!1;this.lastIntValue=this.pos=0;this.lastStringValue="";this.lastAssertionIsQuantifiable=!1;this.maxBackReference=this.numCapturingParens=0;this.groupNames=[];this.backReferenceNames=[]};
zu.prototype.reset=function(c,k,d){var h=-1!==d.indexOf("u");this.start=c|0;this.source=k+"";this.flags=d;this.switchU=h&&6<=this.parser.options.ecmaVersion;this.switchN=h&&9<=this.parser.options.ecmaVersion};zu.prototype.raise=function(c){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+c)};zu.prototype.at=function(c,k){void 0===k&&(k=!1);var d=this.source,h=d.length;if(c>=h)return-1;var n=d.charCodeAt(c);if(!k&&!this.switchU||55295>=n||57344<=n||c+1>=h)return n;
c=d.charCodeAt(c+1);return 56320<=c&&57343>=c?(n<<10)+c-56613888:n};zu.prototype.nextIndex=function(c,k){void 0===k&&(k=!1);var d=this.source,h=d.length;if(c>=h)return h;var n=d.charCodeAt(c),b;return!k&&!this.switchU||55295>=n||57344<=n||c+1>=h||56320>(b=d.charCodeAt(c+1))||57343<b?c+1:c+2};zu.prototype.current=function(c){void 0===c&&(c=!1);return this.at(this.pos,c)};zu.prototype.lookahead=function(c){void 0===c&&(c=!1);return this.at(this.nextIndex(this.pos,c),c)};zu.prototype.advance=function(c){void 0===
c&&(c=!1);this.pos=this.nextIndex(this.pos,c)};zu.prototype.eat=function(c,k){void 0===k&&(k=!1);return this.current(k)===c?(this.advance(k),!0):!1};vg.validateRegExpFlags=function(c){for(var k=c.validFlags,d=c.flags,h=0;h<d.length;h++){var n=d.charAt(h);-1===k.indexOf(n)&&this.raise(c.start,"Invalid regular expression flag");-1<d.indexOf(n,h+1)&&this.raise(c.start,"Duplicate regular expression flag")}};vg.validateRegExpPattern=function(c){this.regexp_pattern(c);!c.switchN&&9<=this.options.ecmaVersion&&
0<c.groupNames.length&&(c.switchN=!0,this.regexp_pattern(c))};vg.regexp_pattern=function(c){c.pos=0;c.lastIntValue=0;c.lastStringValue="";c.lastAssertionIsQuantifiable=!1;c.numCapturingParens=0;c.maxBackReference=0;c.groupNames.length=0;c.backReferenceNames.length=0;this.regexp_disjunction(c);c.pos!==c.source.length&&(c.eat(41)&&c.raise("Unmatched ')'"),(c.eat(93)||c.eat(125))&&c.raise("Lone quantifier brackets"));c.maxBackReference>c.numCapturingParens&&c.raise("Invalid escape");for(var k=0,d=c.backReferenceNames;k<
d.length;k+=1)-1===c.groupNames.indexOf(d[k])&&c.raise("Invalid named capture referenced")};vg.regexp_disjunction=function(c){for(this.regexp_alternative(c);c.eat(124);)this.regexp_alternative(c);this.regexp_eatQuantifier(c,!0)&&c.raise("Nothing to repeat");c.eat(123)&&c.raise("Lone quantifier brackets")};vg.regexp_alternative=function(c){for(;c.pos<c.source.length&&this.regexp_eatTerm(c););};vg.regexp_eatTerm=function(c){return this.regexp_eatAssertion(c)?(c.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(c)&&
c.switchU&&c.raise("Invalid quantifier"),!0):(c.switchU?this.regexp_eatAtom(c):this.regexp_eatExtendedAtom(c))?(this.regexp_eatQuantifier(c),!0):!1};vg.regexp_eatAssertion=function(c){var k=c.pos;c.lastAssertionIsQuantifiable=!1;if(c.eat(94)||c.eat(36))return!0;if(c.eat(92)){if(c.eat(66)||c.eat(98))return!0;c.pos=k}if(c.eat(40)&&c.eat(63)){var d=!1;9<=this.options.ecmaVersion&&(d=c.eat(60));if(c.eat(61)||c.eat(33))return this.regexp_disjunction(c),c.eat(41)||c.raise("Unterminated group"),c.lastAssertionIsQuantifiable=
!d,!0}c.pos=k;return!1};vg.regexp_eatQuantifier=function(c,k){void 0===k&&(k=!1);return this.regexp_eatQuantifierPrefix(c,k)?(c.eat(63),!0):!1};vg.regexp_eatQuantifierPrefix=function(c,k){return c.eat(42)||c.eat(43)||c.eat(63)||this.regexp_eatBracedQuantifier(c,k)};vg.regexp_eatBracedQuantifier=function(c,k){var d=c.pos;if(c.eat(123)){var h=-1;if(this.regexp_eatDecimalDigits(c)){var n=c.lastIntValue;c.eat(44)&&this.regexp_eatDecimalDigits(c)&&(h=c.lastIntValue);if(c.eat(125))return-1!==h&&h<n&&!k&&
c.raise("numbers out of order in {} quantifier"),!0}c.switchU&&!k&&c.raise("Incomplete quantifier");c.pos=d}return!1};vg.regexp_eatAtom=function(c){return this.regexp_eatPatternCharacters(c)||c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)};vg.regexp_eatReverseSolidusAtomEscape=function(c){var k=c.pos;if(c.eat(92)){if(this.regexp_eatAtomEscape(c))return!0;c.pos=k}return!1};vg.regexp_eatUncapturingGroup=
function(c){var k=c.pos;if(c.eat(40)){if(c.eat(63)&&c.eat(58)){this.regexp_disjunction(c);if(c.eat(41))return!0;c.raise("Unterminated group")}c.pos=k}return!1};vg.regexp_eatCapturingGroup=function(c){if(c.eat(40)){9<=this.options.ecmaVersion?this.regexp_groupSpecifier(c):63===c.current()&&c.raise("Invalid group");this.regexp_disjunction(c);if(c.eat(41))return c.numCapturingParens+=1,!0;c.raise("Unterminated group")}return!1};vg.regexp_eatExtendedAtom=function(c){return c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||
this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)||this.regexp_eatInvalidBracedQuantifier(c)||this.regexp_eatExtendedPatternCharacter(c)};vg.regexp_eatInvalidBracedQuantifier=function(c){this.regexp_eatBracedQuantifier(c,!0)&&c.raise("Nothing to repeat");return!1};vg.regexp_eatSyntaxCharacter=function(c){var k=c.current();return mp(k)?(c.lastIntValue=k,c.advance(),!0):!1};vg.regexp_eatPatternCharacters=function(c){for(var k=c.pos,d=0;-1!==(d=c.current())&&
!mp(d);)c.advance();return c.pos!==k};vg.regexp_eatExtendedPatternCharacter=function(c){var k=c.current();return-1===k||36===k||40<=k&&43>=k||46===k||63===k||91===k||94===k||124===k?!1:(c.advance(),!0)};vg.regexp_groupSpecifier=function(c){c.eat(63)&&(this.regexp_eatGroupName(c)?(-1!==c.groupNames.indexOf(c.lastStringValue)&&c.raise("Duplicate capture group name"),c.groupNames.push(c.lastStringValue)):c.raise("Invalid group"))};vg.regexp_eatGroupName=function(c){c.lastStringValue="";if(c.eat(60)){if(this.regexp_eatRegExpIdentifierName(c)&&
c.eat(62))return!0;c.raise("Invalid capture group name")}return!1};vg.regexp_eatRegExpIdentifierName=function(c){c.lastStringValue="";if(this.regexp_eatRegExpIdentifierStart(c)){for(c.lastStringValue+=Nr(c.lastIntValue);this.regexp_eatRegExpIdentifierPart(c);)c.lastStringValue+=Nr(c.lastIntValue);return!0}return!1};vg.regexp_eatRegExpIdentifierStart=function(c){var k=c.pos,d=11<=this.options.ecmaVersion,h=c.current(d);c.advance(d);92===h&&this.regexp_eatRegExpUnicodeEscapeSequence(c,d)&&(h=c.lastIntValue);
d=h;if(mm(d,!0)||36===d||95===d)return c.lastIntValue=h,!0;c.pos=k;return!1};vg.regexp_eatRegExpIdentifierPart=function(c){var k=c.pos,d=11<=this.options.ecmaVersion,h=c.current(d);c.advance(d);92===h&&this.regexp_eatRegExpUnicodeEscapeSequence(c,d)&&(h=c.lastIntValue);d=h;if(Lr(d,!0)||36===d||95===d||8204===d||8205===d)return c.lastIntValue=h,!0;c.pos=k;return!1};vg.regexp_eatAtomEscape=function(c){if(this.regexp_eatBackReference(c)||this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)||
c.switchN&&this.regexp_eatKGroupName(c))return!0;c.switchU&&(99===c.current()&&c.raise("Invalid unicode escape"),c.raise("Invalid escape"));return!1};vg.regexp_eatBackReference=function(c){var k=c.pos;if(this.regexp_eatDecimalEscape(c)){var d=c.lastIntValue;if(c.switchU)return d>c.maxBackReference&&(c.maxBackReference=d),!0;if(d<=c.numCapturingParens)return!0;c.pos=k}return!1};vg.regexp_eatKGroupName=function(c){if(c.eat(107)){if(this.regexp_eatGroupName(c))return c.backReferenceNames.push(c.lastStringValue),
!0;c.raise("Invalid named reference")}return!1};vg.regexp_eatCharacterEscape=function(c){return this.regexp_eatControlEscape(c)||this.regexp_eatCControlLetter(c)||this.regexp_eatZero(c)||this.regexp_eatHexEscapeSequence(c)||this.regexp_eatRegExpUnicodeEscapeSequence(c,!1)||!c.switchU&&this.regexp_eatLegacyOctalEscapeSequence(c)||this.regexp_eatIdentityEscape(c)};vg.regexp_eatCControlLetter=function(c){var k=c.pos;if(c.eat(99)){if(this.regexp_eatControlLetter(c))return!0;c.pos=k}return!1};vg.regexp_eatZero=
function(c){return 48!==c.current()||cv(c.lookahead())?!1:(c.lastIntValue=0,c.advance(),!0)};vg.regexp_eatControlEscape=function(c){var k=c.current();return 116===k?(c.lastIntValue=9,c.advance(),!0):110===k?(c.lastIntValue=10,c.advance(),!0):118===k?(c.lastIntValue=11,c.advance(),!0):102===k?(c.lastIntValue=12,c.advance(),!0):114===k?(c.lastIntValue=13,c.advance(),!0):!1};vg.regexp_eatControlLetter=function(c){var k=c.current();return 65<=k&&90>=k||97<=k&&122>=k?(c.lastIntValue=k%32,c.advance(),!0):
!1};vg.regexp_eatRegExpUnicodeEscapeSequence=function(c,k){void 0===k&&(k=!1);var d=c.pos;k=k||c.switchU;if(c.eat(117)){if(this.regexp_eatFixedHexDigits(c,4)){d=c.lastIntValue;if(k&&55296<=d&&56319>=d){k=c.pos;if(c.eat(92)&&c.eat(117)&&this.regexp_eatFixedHexDigits(c,4)){var h=c.lastIntValue;if(56320<=h&&57343>=h)return c.lastIntValue=1024*(d-55296)+(h-56320)+65536,!0}c.pos=k;c.lastIntValue=d}return!0}if(h=k&&c.eat(123)&&this.regexp_eatHexDigits(c)&&c.eat(125))h=c.lastIntValue,h=0<=h&&1114111>=h;
if(h)return!0;k&&c.raise("Invalid unicode escape");c.pos=d}return!1};vg.regexp_eatIdentityEscape=function(c){if(c.switchU)return this.regexp_eatSyntaxCharacter(c)?!0:c.eat(47)?(c.lastIntValue=47,!0):!1;var k=c.current();return 99===k||c.switchN&&107===k?!1:(c.lastIntValue=k,c.advance(),!0)};vg.regexp_eatDecimalEscape=function(c){c.lastIntValue=0;var k=c.current();if(49<=k&&57>=k){do c.lastIntValue=10*c.lastIntValue+(k-48),c.advance();while(48<=(k=c.current())&&57>=k);return!0}return!1};vg.regexp_eatCharacterClassEscape=
function(c){var k=c.current();if(100===k||68===k||115===k||83===k||119===k||87===k)return c.lastIntValue=-1,c.advance(),!0;if(c.switchU&&9<=this.options.ecmaVersion&&(80===k||112===k)){c.lastIntValue=-1;c.advance();if(c.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(c)&&c.eat(125))return!0;c.raise("Invalid property name")}return!1};vg.regexp_eatUnicodePropertyValueExpression=function(c){var k=c.pos;if(this.regexp_eatUnicodePropertyName(c)&&c.eat(61)){var d=c.lastStringValue;if(this.regexp_eatUnicodePropertyValue(c))return this.regexp_validateUnicodePropertyNameAndValue(c,
d,c.lastStringValue),!0}c.pos=k;return this.regexp_eatLoneUnicodePropertyNameOrValue(c)?(this.regexp_validateUnicodePropertyNameOrValue(c,c.lastStringValue),!0):!1};vg.regexp_validateUnicodePropertyNameAndValue=function(c,k,d){yE.call(c.unicodeProperties.nonBinary,k)||c.raise("Invalid property name");c.unicodeProperties.nonBinary[k].test(d)||c.raise("Invalid property value")};vg.regexp_validateUnicodePropertyNameOrValue=function(c,k){c.unicodeProperties.binary.test(k)||c.raise("Invalid property name")};
vg.regexp_eatUnicodePropertyName=function(c){var k;for(c.lastStringValue="";yq(k=c.current());)c.lastStringValue+=Nr(k),c.advance();return""!==c.lastStringValue};vg.regexp_eatUnicodePropertyValue=function(c){var k;for(c.lastStringValue="";Qy(k=c.current());)c.lastStringValue+=Nr(k),c.advance();return""!==c.lastStringValue};vg.regexp_eatLoneUnicodePropertyNameOrValue=function(c){return this.regexp_eatUnicodePropertyValue(c)};vg.regexp_eatCharacterClass=function(c){if(c.eat(91)){c.eat(94);this.regexp_classRanges(c);
if(c.eat(93))return!0;c.raise("Unterminated character class")}return!1};vg.regexp_classRanges=function(c){for(;this.regexp_eatClassAtom(c);){var k=c.lastIntValue;if(c.eat(45)&&this.regexp_eatClassAtom(c)){var d=c.lastIntValue;!c.switchU||-1!==k&&-1!==d||c.raise("Invalid character class");-1!==k&&-1!==d&&k>d&&c.raise("Range out of order in character class")}}};vg.regexp_eatClassAtom=function(c){var k=c.pos;if(c.eat(92)){if(this.regexp_eatClassEscape(c))return!0;if(c.switchU){var d=c.current();(99===
d||48<=d&&55>=d)&&c.raise("Invalid class escape");c.raise("Invalid escape")}c.pos=k}k=c.current();return 93!==k?(c.lastIntValue=k,c.advance(),!0):!1};vg.regexp_eatClassEscape=function(c){var k=c.pos;if(c.eat(98))return c.lastIntValue=8,!0;if(c.switchU&&c.eat(45))return c.lastIntValue=45,!0;if(!c.switchU&&c.eat(99)){if(this.regexp_eatClassControlLetter(c))return!0;c.pos=k}return this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)};vg.regexp_eatClassControlLetter=function(c){var k=
c.current();return cv(k)||95===k?(c.lastIntValue=k%32,c.advance(),!0):!1};vg.regexp_eatHexEscapeSequence=function(c){var k=c.pos;if(c.eat(120)){if(this.regexp_eatFixedHexDigits(c,2))return!0;c.switchU&&c.raise("Invalid escape");c.pos=k}return!1};vg.regexp_eatDecimalDigits=function(c){var k=c.pos,d;for(c.lastIntValue=0;cv(d=c.current());)c.lastIntValue=10*c.lastIntValue+(d-48),c.advance();return c.pos!==k};vg.regexp_eatHexDigits=function(c){var k=c.pos,d;for(c.lastIntValue=0;Ry(d=c.current());)c.lastIntValue=
16*c.lastIntValue+Pw(d),c.advance();return c.pos!==k};vg.regexp_eatLegacyOctalEscapeSequence=function(c){if(this.regexp_eatOctalDigit(c)){var k=c.lastIntValue;if(this.regexp_eatOctalDigit(c)){var d=c.lastIntValue;3>=k&&this.regexp_eatOctalDigit(c)?c.lastIntValue=64*k+8*d+c.lastIntValue:c.lastIntValue=8*k+d}else c.lastIntValue=k;return!0}return!1};vg.regexp_eatOctalDigit=function(c){var k=c.current();if(48<=k&&55>=k)return c.lastIntValue=k-48,c.advance(),!0;c.lastIntValue=0;return!1};vg.regexp_eatFixedHexDigits=
function(c,k){for(var d=c.pos,h=c.lastIntValue=0;h<k;++h){var n=c.current();if(!Ry(n))return c.pos=d,!1;c.lastIntValue=16*c.lastIntValue+Pw(n);c.advance()}return!0};var VC=function(c){this.type=c.type;this.value=c.value;this.start=c.start;this.end=c.end;c.options.locations&&(this.loc=new Ow(c,c.startLoc,c.endLoc));c.options.ranges&&(this.range=[c.start,c.end])},oi=uk.prototype;oi.next=function(c){!c&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+
this.type.keyword);if(this.options.onToken)this.options.onToken(new VC(this));this.lastTokEnd=this.end;this.lastTokStart=this.start;this.lastTokEndLoc=this.endLoc;this.lastTokStartLoc=this.startLoc;this.nextToken()};oi.getToken=function(){this.next();return new VC(this)};"undefined"!==typeof Symbol&&(oi[Symbol.iterator]=function(){var c=this;return{next:function(){var k=c.getToken();return{done:k.type===Ea.eof,value:k}}}});oi.curContext=function(){return this.context[this.context.length-1]};oi.nextToken=
function(){var c=this.curContext();c&&c.preserveSpace||this.skipSpace();this.start=this.pos;this.options.locations&&(this.startLoc=this.curPosition());if(this.pos>=this.input.length)return this.finishToken(Ea.eof);if(c.override)return c.override(this);this.readToken(this.fullCharCodeAtPos())};oi.readToken=function(c){return mm(c,6<=this.options.ecmaVersion)||92===c?this.readWord():this.getTokenFromCode(c)};oi.fullCharCodeAtPos=function(){var c=this.input.charCodeAt(this.pos);if(55295>=c||57344<=c)return c;
var k=this.input.charCodeAt(this.pos+1);return(c<<10)+k-56613888};oi.skipBlockComment=function(){var c=this.options.onComment&&this.curPosition(),k=this.pos,d=this.input.indexOf("*/",this.pos+=2);-1===d&&this.raise(this.pos-2,"Unterminated comment");this.pos=d+2;if(this.options.locations){av.lastIndex=k;for(var h;(h=av.exec(this.input))&&h.index<this.pos;)++this.curLine,this.lineStart=h.index+h[0].length}if(this.options.onComment)this.options.onComment(!0,this.input.slice(k+2,d),k,this.pos,c,this.curPosition())};
oi.skipLineComment=function(c){for(var k=this.pos,d=this.options.onComment&&this.curPosition(),h=this.input.charCodeAt(this.pos+=c);this.pos<this.input.length&&!nm(h);)h=this.input.charCodeAt(++this.pos);if(this.options.onComment)this.options.onComment(!1,this.input.slice(k+c,this.pos),k,this.pos,d,this.curPosition())};oi.skipSpace=function(){a:for(;this.pos<this.input.length;){var c=this.input.charCodeAt(this.pos);switch(c){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+
1)&&++this.pos;case 10:case 8232:case 8233:++this.pos;this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;default:if(8<c&&14>c||5760<=c&&$N.test(String.fromCharCode(c)))++this.pos;else break a}}};oi.finishToken=function(c,k){this.end=this.pos;this.options.locations&&(this.endLoc=this.curPosition());var d=this.type;this.type=c;this.value=
k;this.updateContext(d)};oi.readToken_dot=function(){var c=this.input.charCodeAt(this.pos+1);if(48<=c&&57>=c)return this.readNumber(!0);var k=this.input.charCodeAt(this.pos+2);if(6<=this.options.ecmaVersion&&46===c&&46===k)return this.pos+=3,this.finishToken(Ea.ellipsis);++this.pos;return this.finishToken(Ea.dot)};oi.readToken_slash=function(){var c=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===c?this.finishOp(Ea.assign,2):this.finishOp(Ea.slash,1)};
oi.readToken_mult_modulo_exp=function(c){var k=this.input.charCodeAt(this.pos+1),d=1,h=42===c?Ea.star:Ea.modulo;7<=this.options.ecmaVersion&&42===c&&42===k&&(++d,h=Ea.starstar,k=this.input.charCodeAt(this.pos+2));return 61===k?this.finishOp(Ea.assign,d+1):this.finishOp(h,d)};oi.readToken_pipe_amp=function(c){var k=this.input.charCodeAt(this.pos+1);return k===c?12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Ea.assign,3):this.finishOp(124===c?Ea.logicalOR:Ea.logicalAND,
2):61===k?this.finishOp(Ea.assign,2):this.finishOp(124===c?Ea.bitwiseOR:Ea.bitwiseAND,1)};oi.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(Ea.assign,2):this.finishOp(Ea.bitwiseXOR,1)};oi.readToken_plus_min=function(c){var k=this.input.charCodeAt(this.pos+1);return k===c?45!==k||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!$n.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(Ea.incDec,2):(this.skipLineComment(3),
this.skipSpace(),this.nextToken()):61===k?this.finishOp(Ea.assign,2):this.finishOp(Ea.plusMin,1)};oi.readToken_lt_gt=function(c){var k=this.input.charCodeAt(this.pos+1),d=1;if(k===c)return d=62===c&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+d)?this.finishOp(Ea.assign,d+1):this.finishOp(Ea.bitShift,d);if(33===k&&60===c&&!this.inModule&&45===this.input.charCodeAt(this.pos+2)&&45===this.input.charCodeAt(this.pos+3))return this.skipLineComment(4),this.skipSpace(),
this.nextToken();61===k&&(d=2);return this.finishOp(Ea.relational,d)};oi.readToken_eq_excl=function(c){var k=this.input.charCodeAt(this.pos+1);return 61===k?this.finishOp(Ea.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===c&&62===k&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(Ea.arrow)):this.finishOp(61===c?Ea.eq:Ea.prefix,1)};oi.readToken_question=function(){var c=this.options.ecmaVersion;if(11<=c){var k=this.input.charCodeAt(this.pos+1);if(46===k){var d=this.input.charCodeAt(this.pos+
2);if(48>d||57<d)return this.finishOp(Ea.questionDot,2)}if(63===k)return 12<=c&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Ea.assign,3):this.finishOp(Ea.coalesce,2)}return this.finishOp(Ea.question,1)};oi.getTokenFromCode=function(c){switch(c){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Ea.parenL);case 41:return++this.pos,this.finishToken(Ea.parenR);case 59:return++this.pos,this.finishToken(Ea.semi);case 44:return++this.pos,this.finishToken(Ea.comma);case 91:return++this.pos,
this.finishToken(Ea.bracketL);case 93:return++this.pos,this.finishToken(Ea.bracketR);case 123:return++this.pos,this.finishToken(Ea.braceL);case 125:return++this.pos,this.finishToken(Ea.braceR);case 58:return++this.pos,this.finishToken(Ea.colon);case 96:if(6>this.options.ecmaVersion)break;++this.pos;return this.finishToken(Ea.backQuote);case 48:c=this.input.charCodeAt(this.pos+1);if(120===c||88===c)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===c||79===c)return this.readRadixNumber(8);
if(98===c||66===c)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(c);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(c);case 124:case 38:return this.readToken_pipe_amp(c);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(c);case 60:case 62:return this.readToken_lt_gt(c);case 61:case 33:return this.readToken_eq_excl(c);
case 63:return this.readToken_question();case 126:return this.finishOp(Ea.prefix,1)}this.raise(this.pos,"Unexpected character '"+Or(c)+"'")};oi.finishOp=function(c,k){var d=this.input.slice(this.pos,this.pos+k);this.pos+=k;return this.finishToken(c,d)};oi.readRegexp=function(){for(var c,k,d=this.pos;;){this.pos>=this.input.length&&this.raise(d,"Unterminated regular expression");var h=this.input.charAt(this.pos);$n.test(h)&&this.raise(d,"Unterminated regular expression");if(c)c=!1;else{if("["===h)k=
!0;else if("]"===h&&k)k=!1;else if("/"===h&&!k)break;c="\\"===h}++this.pos}c=this.input.slice(d,this.pos);++this.pos;h=this.pos;k=this.readWord1();this.containsEsc&&this.unexpected(h);h=this.regexpState||(this.regexpState=new zu(this));h.reset(d,c,k);this.validateRegExpFlags(h);this.validateRegExpPattern(h);d=null;try{d=new RegExp(c,k)}catch(n){}return this.finishToken(Ea.regexp,{pattern:c,flags:k,value:d})};oi.readInt=function(c,k,d){var h=12<=this.options.ecmaVersion&&void 0===k;d=d&&48===this.input.charCodeAt(this.pos);
for(var n=this.pos,b=0,e=0,m=0,a=null==k?Infinity:k;m<a;++m,++this.pos){var g=this.input.charCodeAt(this.pos);if(h&&95===g)d&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===e&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===m&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),e=g;else{var l=97<=g?g-97+10:65<=g?g-65+10:48<=g&&57>=g?g-48:Infinity;if(l>=c)break;e=g;
b=b*c+l}}h&&95===e&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits");return this.pos===n||null!=k&&this.pos-n!==k?null:b};oi.readRadixNumber=function(c){var k=this.pos;this.pos+=2;var d=this.readInt(c);null==d&&this.raise(this.start+2,"Expected number in radix "+c);11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(d=Qw(this.input.slice(k,this.pos)),++this.pos):mm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");
return this.finishToken(Ea.num,d)};oi.readNumber=function(c){var k=this.pos;c||null!==this.readInt(10,void 0,!0)||this.raise(k,"Invalid number");var d=2<=this.pos-k&&48===this.input.charCodeAt(k);d&&this.strict&&this.raise(k,"Invalid number");var h=this.input.charCodeAt(this.pos);if(!d&&!c&&11<=this.options.ecmaVersion&&110===h)return d=Qw(this.input.slice(k,this.pos)),++this.pos,mm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Ea.num,d);d&&/[89]/.test(this.input.slice(k,
this.pos))&&(d=!1);46!==h||d||(++this.pos,this.readInt(10),h=this.input.charCodeAt(this.pos));69!==h&&101!==h||d||(h=this.input.charCodeAt(++this.pos),43!==h&&45!==h||++this.pos,null===this.readInt(10)&&this.raise(k,"Invalid number"));mm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");c=this.input.slice(k,this.pos);d=d?parseInt(c,8):parseFloat(c.replace(/_/g,""));return this.finishToken(Ea.num,d)};oi.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>
this.options.ecmaVersion&&this.unexpected();var c=++this.pos;var k=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos;1114111<k&&this.invalidStringToken(c,"Code point out of bounds")}else k=this.readHexChar(4);return k};oi.readString=function(c){for(var k="",d=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var h=this.input.charCodeAt(this.pos);if(h===c)break;92===h?(k+=this.input.slice(d,this.pos),k+=this.readEscapedChar(!1),d=
this.pos):(nm(h,10<=this.options.ecmaVersion)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}k+=this.input.slice(d,this.pos++);return this.finishToken(Ea.string,k)};var l0={};oi.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(c){if(c===l0)this.readInvalidTemplateToken();else throw c;}this.inTemplateElement=!1};oi.invalidStringToken=function(c,k){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw l0;this.raise(c,k)};oi.readTmplToken=
function(){for(var c="",k=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var d=this.input.charCodeAt(this.pos);if(96===d||36===d&&123===this.input.charCodeAt(this.pos+1)){if(this.pos===this.start&&(this.type===Ea.template||this.type===Ea.invalidTemplate)){if(36===d)return this.pos+=2,this.finishToken(Ea.dollarBraceL);++this.pos;return this.finishToken(Ea.backQuote)}c+=this.input.slice(k,this.pos);return this.finishToken(Ea.template,c)}if(92===d)c+=this.input.slice(k,
this.pos),c+=this.readEscapedChar(!0),k=this.pos;else if(nm(d)){c+=this.input.slice(k,this.pos);++this.pos;switch(d){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:c+="\n";break;default:c+=String.fromCharCode(d)}this.options.locations&&(++this.curLine,this.lineStart=this.pos);k=this.pos}else++this.pos}};oi.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case "\\":++this.pos;break;case "$":if("{"!==this.input[this.pos+1])break;
case "`":return this.finishToken(Ea.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};oi.readEscapedChar=function(c){var k=this.input.charCodeAt(++this.pos);++this.pos;switch(k){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Or(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;
case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),c)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),null;default:if(48<=k&&55>=k){var d=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],h=parseInt(d,8);255<h&&(d=d.slice(0,-1),h=parseInt(d,8));this.pos+=d.length-1;k=this.input.charCodeAt(this.pos);"0"===d&&56!==k&&57!==k||!this.strict&&
!c||this.invalidStringToken(this.pos-1-d.length,c?"Octal literal in template string":"Octal literal in strict mode");return String.fromCharCode(h)}return nm(k)?"":String.fromCharCode(k)}};oi.readHexChar=function(c){var k=this.pos;c=this.readInt(16,c);null===c&&this.invalidStringToken(k,"Bad character escape sequence");return c};oi.readWord1=function(){this.containsEsc=!1;for(var c="",k=!0,d=this.pos,h=6<=this.options.ecmaVersion;this.pos<this.input.length;){var n=this.fullCharCodeAtPos();if(Lr(n,
h))this.pos+=65535>=n?1:2;else if(92===n)this.containsEsc=!0,c+=this.input.slice(d,this.pos),d=this.pos,117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,n=this.readCodePoint(),(k?mm:Lr)(n,h)||this.invalidStringToken(d,"Invalid Unicode escape"),c+=Or(n),d=this.pos;else break;k=!1}return c+this.input.slice(d,this.pos)};oi.readWord=function(){var c=this.readWord1(),k=Ea.name;this.keywords.test(c)&&(k=xE[c]);return this.finishToken(k,
c)};uk.acorn={Parser:uk,version:"8.0.3",defaultOptions:pB,Position:Py,SourceLocation:Ow,getLineInfo:Mr,Node:hw,TokenType:Fi,tokTypes:Ea,keywordTypes:xE,TokContext:Zp,tokContexts:vk,isIdentifierChar:Lr,isIdentifierStart:mm,Token:VC,isNewLine:nm,lineBreak:$n,lineBreakG:av,nonASCIIwhitespace:$N};var Ns=Object.freeze({__proto__:null,Node:hw,Parser:uk,Position:Py,SourceLocation:Ow,TokContext:Zp,Token:VC,TokenType:Fi,defaultOptions:pB,getLineInfo:Mr,isIdentifierChar:Lr,isIdentifierStart:mm,isNewLine:nm,
keywordTypes:xE,lineBreak:$n,lineBreakG:av,nonASCIIwhitespace:$N,parse:function(c,k){return uk.parse(c,k)},parseExpressionAt:function(c,k,d){return uk.parseExpressionAt(c,k,d)},tokContexts:vk,tokTypes:Ea,tokenizer:function(c,k){return uk.tokenizer(c,k)},version:"8.0.3"});sa("bA",Ns);var $x=function(c,k){this.node=c;this.state=k},i5=Object.create||function(c){function k(){}k.prototype=c;return new k},Ye={};Ye.Program=Ye.BlockStatement=function(c,k,d){var h=0;for(c=c.body;h<c.length;h+=1)d(c[h],k,"Statement")};
Ye.Statement=Gt;Ye.EmptyStatement=bn;Ye.ExpressionStatement=Ye.ParenthesizedExpression=Ye.ChainExpression=function(c,k,d){return d(c.expression,k,"Expression")};Ye.IfStatement=function(c,k,d){d(c.test,k,"Expression");d(c.consequent,k,"Statement");c.alternate&&d(c.alternate,k,"Statement")};Ye.LabeledStatement=function(c,k,d){return d(c.body,k,"Statement")};Ye.BreakStatement=Ye.ContinueStatement=bn;Ye.WithStatement=function(c,k,d){d(c.object,k,"Expression");d(c.body,k,"Statement")};Ye.SwitchStatement=
function(c,k,d){d(c.discriminant,k,"Expression");var h=0;for(c=c.cases;h<c.length;h+=1){var n=c[h];n.test&&d(n.test,k,"Expression");var b=0;for(n=n.consequent;b<n.length;b+=1)d(n[b],k,"Statement")}};Ye.SwitchCase=function(c,k,d){c.test&&d(c.test,k,"Expression");var h=0;for(c=c.consequent;h<c.length;h+=1)d(c[h],k,"Statement")};Ye.ReturnStatement=Ye.YieldExpression=Ye.AwaitExpression=function(c,k,d){c.argument&&d(c.argument,k,"Expression")};Ye.ThrowStatement=Ye.SpreadElement=function(c,k,d){return d(c.argument,
k,"Expression")};Ye.TryStatement=function(c,k,d){d(c.block,k,"Statement");c.handler&&d(c.handler,k);c.finalizer&&d(c.finalizer,k,"Statement")};Ye.CatchClause=function(c,k,d){c.param&&d(c.param,k,"Pattern");d(c.body,k,"Statement")};Ye.WhileStatement=Ye.DoWhileStatement=function(c,k,d){d(c.test,k,"Expression");d(c.body,k,"Statement")};Ye.ForStatement=function(c,k,d){c.init&&d(c.init,k,"ForInit");c.test&&d(c.test,k,"Expression");c.update&&d(c.update,k,"Expression");d(c.body,k,"Statement")};Ye.ForInStatement=
Ye.ForOfStatement=function(c,k,d){d(c.left,k,"ForInit");d(c.right,k,"Expression");d(c.body,k,"Statement")};Ye.ForInit=function(c,k,d){"VariableDeclaration"===c.type?d(c,k):d(c,k,"Expression")};Ye.DebuggerStatement=bn;Ye.FunctionDeclaration=function(c,k,d){return d(c,k,"Function")};Ye.VariableDeclaration=function(c,k,d){var h=0;for(c=c.declarations;h<c.length;h+=1)d(c[h],k)};Ye.VariableDeclarator=function(c,k,d){d(c.id,k,"Pattern");c.init&&d(c.init,k,"Expression")};Ye.Function=function(c,k,d){c.id&&
d(c.id,k,"Pattern");for(var h=0,n=c.params;h<n.length;h+=1)d(n[h],k,"Pattern");d(c.body,k,c.expression?"Expression":"Statement")};Ye.Pattern=function(c,k,d){"Identifier"===c.type?d(c,k,"VariablePattern"):"MemberExpression"===c.type?d(c,k,"MemberPattern"):d(c,k)};Ye.VariablePattern=bn;Ye.MemberPattern=Gt;Ye.RestElement=function(c,k,d){return d(c.argument,k,"Pattern")};Ye.ArrayPattern=function(c,k,d){var h=0;for(c=c.elements;h<c.length;h+=1){var n=c[h];n&&d(n,k,"Pattern")}};Ye.ObjectPattern=function(c,
k,d){var h=0;for(c=c.properties;h<c.length;h+=1){var n=c[h];"Property"===n.type?(n.computed&&d(n.key,k,"Expression"),d(n.value,k,"Pattern")):"RestElement"===n.type&&d(n.argument,k,"Pattern")}};Ye.Expression=Gt;Ye.ThisExpression=Ye.Super=Ye.MetaProperty=bn;Ye.ArrayExpression=function(c,k,d){var h=0;for(c=c.elements;h<c.length;h+=1){var n=c[h];n&&d(n,k,"Expression")}};Ye.ObjectExpression=function(c,k,d){var h=0;for(c=c.properties;h<c.length;h+=1)d(c[h],k)};Ye.FunctionExpression=Ye.ArrowFunctionExpression=
Ye.FunctionDeclaration;Ye.SequenceExpression=function(c,k,d){var h=0;for(c=c.expressions;h<c.length;h+=1)d(c[h],k,"Expression")};Ye.TemplateLiteral=function(c,k,d){for(var h=0,n=c.quasis;h<n.length;h+=1)d(n[h],k);h=0;for(c=c.expressions;h<c.length;h+=1)d(c[h],k,"Expression")};Ye.TemplateElement=bn;Ye.UnaryExpression=Ye.UpdateExpression=function(c,k,d){d(c.argument,k,"Expression")};Ye.BinaryExpression=Ye.LogicalExpression=function(c,k,d){d(c.left,k,"Expression");d(c.right,k,"Expression")};Ye.AssignmentExpression=
Ye.AssignmentPattern=function(c,k,d){d(c.left,k,"Pattern");d(c.right,k,"Expression")};Ye.ConditionalExpression=function(c,k,d){d(c.test,k,"Expression");d(c.consequent,k,"Expression");d(c.alternate,k,"Expression")};Ye.NewExpression=Ye.CallExpression=function(c,k,d){d(c.callee,k,"Expression");if(c.arguments){var h=0;for(c=c.arguments;h<c.length;h+=1)d(c[h],k,"Expression")}};Ye.MemberExpression=function(c,k,d){d(c.object,k,"Expression");c.computed&&d(c.property,k,"Expression")};Ye.ExportNamedDeclaration=
Ye.ExportDefaultDeclaration=function(c,k,d){c.declaration&&d(c.declaration,k,"ExportNamedDeclaration"===c.type||c.declaration.id?"Statement":"Expression");c.source&&d(c.source,k,"Expression")};Ye.ExportAllDeclaration=function(c,k,d){c.exported&&d(c.exported,k);d(c.source,k,"Expression")};Ye.ImportDeclaration=function(c,k,d){for(var h=0,n=c.specifiers;h<n.length;h+=1)d(n[h],k);d(c.source,k,"Expression")};Ye.ImportExpression=function(c,k,d){d(c.source,k,"Expression")};Ye.ImportSpecifier=Ye.ImportDefaultSpecifier=
Ye.ImportNamespaceSpecifier=Ye.Identifier=Ye.Literal=bn;Ye.TaggedTemplateExpression=function(c,k,d){d(c.tag,k,"Expression");d(c.quasi,k,"Expression")};Ye.ClassDeclaration=Ye.ClassExpression=function(c,k,d){return d(c,k,"Class")};Ye.Class=function(c,k,d){c.id&&d(c.id,k,"Pattern");c.superClass&&d(c.superClass,k,"Expression");d(c.body,k)};Ye.ClassBody=function(c,k,d){var h=0;for(c=c.body;h<c.length;h+=1)d(c[h],k)};Ye.MethodDefinition=Ye.Property=function(c,k,d){c.computed&&d(c.key,k,"Expression");d(c.value,
k,"Expression")};var dr=Object.freeze({__proto__:null,ancestor:function(c,k,d,h,n){var b=[];d||(d=Ye);(function l(m,a,g){g=g||m.type;var q=k[g],r=m!==b[b.length-1];r&&b.push(m);d[g](m,a,l);q&&q(m,a||b,b);r&&b.pop()})(c,h,n)},base:Ye,findNodeAfter:function(c,k,d,h,n){d=Ft(d);h||(h=Ye);try{(function g(e,m,a){if(!(e.end<k)){a=a||e.type;if(e.start>=k&&d(a,e))throw new $x(e,m);h[a](e,m,g)}})(c,n)}catch(b){if(b instanceof $x)return b;throw b;}},findNodeAround:function(c,k,d,h,n){d=Ft(d);h||(h=Ye);try{(function g(e,
m,a){a=a||e.type;if(!(e.start>k||e.end<k)&&(h[a](e,m,g),d(a,e)))throw new $x(e,m);})(c,n)}catch(b){if(b instanceof $x)return b;throw b;}},findNodeAt:function(c,k,d,h,n,b){n||(n=Ye);h=Ft(h);try{(function l(m,a,g){g=g||m.type;if((null==k||m.start<=k)&&(null==d||m.end>=d))n[g](m,a,l);if(!(null!=k&&m.start!==k||null!=d&&m.end!==d)&&h(g,m))throw new $x(m,a);})(c,b)}catch(e){if(e instanceof $x)return e;throw e;}},findNodeBefore:function(c,k,d,h,n){d=Ft(d);h||(h=Ye);var b;(function l(m,a,g){m.start>k||(g=
g||m.type,m.end<=k&&(!b||b.node.end<m.end)&&d(g,m)&&(b=new $x(m,a)),h[g](m,a,l))})(c,n);return b},full:function(c,k,d,h,n){d||(d=Ye);(function g(e,m,a){var l=a||e.type;d[l](e,m,g);a||k(e,m,l)})(c,h,n)},fullAncestor:function(c,k,d,h){d||(d=Ye);var n=[];(function g(e,m,a){var l=a||e.type,q=e!==n[n.length-1];q&&n.push(e);d[l](e,m,g);a||k(e,m||n,n,l);q&&n.pop()})(c,h)},make:Pr,recursive:function(c,k,d,h,n){var b=d?Pr(d,h||void 0):h;(function l(m,a,g){b[g||m.type](m,a,l)})(c,k,n)},simple:function(c,k,
d,h,n){d||(d=Ye);(function g(e,m,a){a=a||e.type;var l=k[a];d[a](e,m,g);l&&l(e,m)})(c,h,n)}}),sj=function(c,k){void 0===k&&(k={});this.toks=this.constructor.BaseParser.tokenizer(c,k);this.options=this.toks.options;this.input=this.toks.input;this.tok=this.last={type:Ea.eof,start:0,end:0};this.tok.validateRegExpFlags=no;this.tok.validateRegExpPattern=no;this.options.locations&&(c=this.toks.curPosition(),this.tok.loc=new Ow(this.toks,c,c));this.ahead=[];this.context=[];this.curLineStart=this.curIndent=
0;this.nextLineStart=this.lineEnd(this.curLineStart)+1;this.inFunction=this.inAsync=!1};sj.prototype.startNode=function(){return new hw(this.toks,this.tok.start,this.options.locations?this.tok.loc.start:null)};sj.prototype.storeCurrentPos=function(){return this.options.locations?[this.tok.start,this.tok.loc.start]:this.tok.start};sj.prototype.startNodeAt=function(c){return this.options.locations?new hw(this.toks,c[0],c[1]):new hw(this.toks,c)};sj.prototype.finishNode=function(c,k){c.type=k;c.end=
this.last.end;this.options.locations&&(c.loc.end=this.last.loc.end);this.options.ranges&&(c.range[1]=this.last.end);return c};sj.prototype.dummyNode=function(c){var k=this.startNode();k.type=c;k.end=k.start;this.options.locations&&(k.loc.end=k.loc.start);this.options.ranges&&(k.range[1]=k.start);this.last={type:Ea.name,start:k.start,end:k.start,loc:k.loc};return k};sj.prototype.dummyIdent=function(){var c=this.dummyNode("Identifier");c.name="\u2716";return c};sj.prototype.dummyString=function(){var c=
this.dummyNode("Literal");c.value=c.raw="\u2716";return c};sj.prototype.eat=function(c){return this.tok.type===c?(this.next(),!0):!1};sj.prototype.isContextual=function(c){return this.tok.type===Ea.name&&this.tok.value===c};sj.prototype.eatContextual=function(c){return this.tok.value===c&&this.eat(Ea.name)};sj.prototype.canInsertSemicolon=function(){return this.tok.type===Ea.eof||this.tok.type===Ea.braceR||$n.test(this.input.slice(this.last.end,this.tok.start))};sj.prototype.semicolon=function(){return this.eat(Ea.semi)};
sj.prototype.expect=function(c){if(this.eat(c))return!0;for(var k=1;2>=k;k++)if(this.lookAhead(k).type===c){for(c=0;c<k;c++)this.next();return!0}};sj.prototype.pushCx=function(){this.context.push(this.curIndent)};sj.prototype.popCx=function(){this.curIndent=this.context.pop()};sj.prototype.lineEnd=function(c){for(;c<this.input.length&&!nm(this.input.charCodeAt(c));)++c;return c};sj.prototype.indentationAfter=function(c){for(var k=0;;++c){var d=this.input.charCodeAt(c);if(32===d)++k;else if(9===d)k+=
this.options.tabSize;else return k}};sj.prototype.closes=function(c,k,d,h){return this.tok.type===c||this.tok.type===Ea.eof?!0:d!==this.curLineStart&&this.curIndent<k&&this.tokenStartsLine()&&(!h||this.nextLineStart>=this.input.length||this.indentationAfter(this.nextLineStart)<k)};sj.prototype.tokenStartsLine=function(){for(var c=this.tok.start-1;c>=this.curLineStart;--c){var k=this.input.charCodeAt(c);if(9!==k&&32!==k)return!1}return!0};sj.prototype.extend=function(c,k){this[c]=k(this[c])};sj.prototype.parse=
function(){this.next();return this.parseTopLevel()};sj.extend=function(){for(var c=[],k=arguments.length;k--;)c[k]=arguments[k];k=this;for(var d=0;d<c.length;d++)k=c[d](k);return k};sj.parse=function(c,k){return(new this(c,k)).parse()};sj.BaseParser=uk;var pH=sj.prototype;pH.next=function(){this.last=this.tok;this.tok=this.ahead.length?this.ahead.shift():this.readToken();if(this.tok.start>=this.nextLineStart){for(;this.tok.start>=this.nextLineStart;)this.curLineStart=this.nextLineStart,this.nextLineStart=
this.lineEnd(this.curLineStart)+1;this.curIndent=this.indentationAfter(this.curLineStart)}};pH.readToken=function(){for(;;)try{return this.toks.next(),this.toks.type===Ea.dot&&"."===this.input.substr(this.toks.end,1)&&6<=this.options.ecmaVersion&&(this.toks.end++,this.toks.type=Ea.ellipsis),new VC(this.toks)}catch(h){if(!(h instanceof SyntaxError))throw h;var c=h.message,k=h.raisedAt,d=!0;if(/unterminated/i.test(c))if(k=this.lineEnd(h.pos+1),/string/.test(c))d={start:h.pos,end:k,type:Ea.string,value:this.input.slice(h.pos+
1,k)};else if(/regular expr/i.test(c)){d=this.input.slice(h.pos,k);try{d=new RegExp(d)}catch(n){}d={start:h.pos,end:k,type:Ea.regexp,value:d}}else d=/template/.test(c)?{start:h.pos,end:k,type:Ea.template,value:this.input.slice(h.pos,k)}:!1;else if(/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number|expected number in radix/i.test(c))for(;k<this.input.length&&!Nl(this.input.charCodeAt(k));)++k;else if(/character escape|expected hexadecimal/i.test(c))for(;k<
this.input.length&&(c=this.input.charCodeAt(k++),34!==c&&39!==c&&!nm(c)););else if(/unexpected character/i.test(c))k++,d=!1;else if(/regular expression/i.test(c))d=!0;else throw h;this.resetTo(k);!0===d&&(d={start:k,end:k,type:Ea.name,value:"\u2716"});if(d)return this.options.locations&&(d.loc=new Ow(this.toks,Mr(this.input,d.start),Mr(this.input,d.end))),d}};pH.resetTo=function(c){this.toks.pos=c;var k=this.input.charAt(c-1);this.toks.exprAllowed=!k||/[[{(,;:?/*=+\-~!|&%^<>]/.test(k)||/[enwfd]/.test(k)&&
/\b(case|else|return|throw|new|in|(instance|type)?of|delete|void)$/.test(this.input.slice(c-10,c));if(this.options.locations){this.toks.curLine=1;this.toks.lineStart=av.lastIndex=0;for(var d;(d=av.exec(this.input))&&d.index<c;)++this.toks.curLine,this.toks.lineStart=d.index+d[0].length}};pH.lookAhead=function(c){for(;c>this.ahead.length;)this.ahead.push(this.readToken());return this.ahead[c-1]};var $p=sj.prototype;$p.parseTopLevel=function(){var c=this.startNodeAt(this.options.locations?[0,Mr(this.input,
0)]:0);for(c.body=[];this.tok.type!==Ea.eof;)c.body.push(this.parseStatement());this.toks.adaptDirectivePrologue(c.body);this.last=this.tok;c.sourceType=this.options.sourceType;return this.finishNode(c,"Program")};$p.parseStatement=function(){var c=this.tok.type,k=this.startNode();if(this.toks.isLet()){c=Ea._var;var d="let"}switch(c){case Ea._break:case Ea._continue:this.next();var h=c===Ea._break;this.semicolon()||this.canInsertSemicolon()?k.label=null:(k.label=this.tok.type===Ea.name?this.parseIdent():
null,this.semicolon());return this.finishNode(k,h?"BreakStatement":"ContinueStatement");case Ea._debugger:return this.next(),this.semicolon(),this.finishNode(k,"DebuggerStatement");case Ea._do:return this.next(),k.body=this.parseStatement(),k.test=this.eat(Ea._while)?this.parseParenExpression():this.dummyIdent(),this.semicolon(),this.finishNode(k,"DoWhileStatement");case Ea._for:this.next();h=9<=this.options.ecmaVersion&&this.inAsync&&this.eatContextual("await");this.pushCx();this.expect(Ea.parenL);
if(this.tok.type===Ea.semi)return this.parseFor(k,null);if((c=this.toks.isLet())||this.tok.type===Ea._var||this.tok.type===Ea._const)return c=this.parseVar(this.startNode(),!0,c?"let":this.tok.value),1!==c.declarations.length||this.tok.type!==Ea._in&&!this.isContextual("of")?this.parseFor(k,c):(9<=this.options.ecmaVersion&&this.tok.type!==Ea._in&&(k.await=h),this.parseForIn(k,c));c=this.parseExpression(!0);return this.tok.type===Ea._in||this.isContextual("of")?(9<=this.options.ecmaVersion&&this.tok.type!==
Ea._in&&(k.await=h),this.parseForIn(k,this.toAssignable(c))):this.parseFor(k,c);case Ea._function:return this.next(),this.parseFunction(k,!0);case Ea._if:return this.next(),k.test=this.parseParenExpression(),k.consequent=this.parseStatement(),k.alternate=this.eat(Ea._else)?this.parseStatement():null,this.finishNode(k,"IfStatement");case Ea._return:return this.next(),this.eat(Ea.semi)||this.canInsertSemicolon()?k.argument=null:(k.argument=this.parseExpression(),this.semicolon()),this.finishNode(k,
"ReturnStatement");case Ea._switch:c=this.curIndent;d=this.curLineStart;this.next();k.discriminant=this.parseParenExpression();k.cases=[];this.pushCx();for(this.expect(Ea.braceL);!this.closes(Ea.braceR,c,d,!0);)if(this.tok.type===Ea._case||this.tok.type===Ea._default){var n=this.tok.type===Ea._case;h&&this.finishNode(h,"SwitchCase");k.cases.push(h=this.startNode());h.consequent=[];this.next();h.test=n?this.parseExpression():null;this.expect(Ea.colon)}else h||(k.cases.push(h=this.startNode()),h.consequent=
[],h.test=null),h.consequent.push(this.parseStatement());h&&this.finishNode(h,"SwitchCase");this.popCx();this.eat(Ea.braceR);return this.finishNode(k,"SwitchStatement");case Ea._throw:return this.next(),k.argument=this.parseExpression(),this.semicolon(),this.finishNode(k,"ThrowStatement");case Ea._try:return this.next(),k.block=this.parseBlock(),k.handler=null,this.tok.type===Ea._catch&&(h=this.startNode(),this.next(),this.eat(Ea.parenL)?(h.param=this.toAssignable(this.parseExprAtom(),!0),this.expect(Ea.parenR)):
h.param=null,h.body=this.parseBlock(),k.handler=this.finishNode(h,"CatchClause")),k.finalizer=this.eat(Ea._finally)?this.parseBlock():null,k.handler||k.finalizer?this.finishNode(k,"TryStatement"):k.block;case Ea._var:case Ea._const:return this.parseVar(k,!1,d||this.tok.value);case Ea._while:return this.next(),k.test=this.parseParenExpression(),k.body=this.parseStatement(),this.finishNode(k,"WhileStatement");case Ea._with:return this.next(),k.object=this.parseParenExpression(),k.body=this.parseStatement(),
this.finishNode(k,"WithStatement");case Ea.braceL:return this.parseBlock();case Ea.semi:return this.next(),this.finishNode(k,"EmptyStatement");case Ea._class:return this.parseClass(!0);case Ea._import:return 10<this.options.ecmaVersion&&(h=this.lookAhead(1).type,h===Ea.parenL||h===Ea.dot)?(k.expression=this.parseExpression(),this.semicolon(),this.finishNode(k,"ExpressionStatement")):this.parseImport();case Ea._export:return this.parseExport();default:if(this.toks.isAsyncFunction())return this.next(),
this.next(),this.parseFunction(k,!0,!0);h=this.parseExpression();if(Mg(h))return this.next(),this.tok.type===Ea.eof?this.finishNode(k,"EmptyStatement"):this.parseStatement();if(c===Ea.name&&"Identifier"===h.type&&this.eat(Ea.colon))return k.body=this.parseStatement(),k.label=h,this.finishNode(k,"LabeledStatement");k.expression=h;this.semicolon();return this.finishNode(k,"ExpressionStatement")}};$p.parseBlock=function(){var c=this.startNode();this.pushCx();this.expect(Ea.braceL);var k=this.curIndent,
d=this.curLineStart;for(c.body=[];!this.closes(Ea.braceR,k,d,!0);)c.body.push(this.parseStatement());this.popCx();this.eat(Ea.braceR);return this.finishNode(c,"BlockStatement")};$p.parseFor=function(c,k){c.init=k;c.test=c.update=null;this.eat(Ea.semi)&&this.tok.type!==Ea.semi&&(c.test=this.parseExpression());this.eat(Ea.semi)&&this.tok.type!==Ea.parenR&&(c.update=this.parseExpression());this.popCx();this.expect(Ea.parenR);c.body=this.parseStatement();return this.finishNode(c,"ForStatement")};$p.parseForIn=
function(c,k){var d=this.tok.type===Ea._in?"ForInStatement":"ForOfStatement";this.next();c.left=k;c.right=this.parseExpression();this.popCx();this.expect(Ea.parenR);c.body=this.parseStatement();return this.finishNode(c,d)};$p.parseVar=function(c,k,d){c.kind=d;this.next();c.declarations=[];do d=this.startNode(),d.id=6<=this.options.ecmaVersion?this.toAssignable(this.parseExprAtom(),!0):this.parseIdent(),d.init=this.eat(Ea.eq)?this.parseMaybeAssign(k):null,c.declarations.push(this.finishNode(d,"VariableDeclarator"));
while(this.eat(Ea.comma));c.declarations.length||(d=this.startNode(),d.id=this.dummyIdent(),c.declarations.push(this.finishNode(d,"VariableDeclarator")));k||this.semicolon();return this.finishNode(c,"VariableDeclaration")};$p.parseClass=function(c){var k=this.startNode();this.next();k.id=this.tok.type===Ea.name?this.parseIdent():!0===c?this.dummyIdent():null;k.superClass=this.eat(Ea._extends)?this.parseExpression():null;k.body=this.startNode();k.body.body=[];this.pushCx();var d=this.curIndent+1,h=
this.curLineStart;this.eat(Ea.braceL);this.curIndent+1<d&&(d=this.curIndent,h=this.curLineStart);for(;!this.closes(Ea.braceR,d,h);)if(!this.semicolon()){var n=this.startNode(),b=void 0;6<=this.options.ecmaVersion&&(n.static=!1,b=this.eat(Ea.star));this.parsePropertyName(n);if(Mg(n.key))Mg(this.parseMaybeAssign())&&this.next(),this.eat(Ea.comma);else{"Identifier"!==n.key.type||n.computed||"static"!==n.key.name||this.tok.type===Ea.parenL||this.tok.type===Ea.braceL?n.static=!1:(n.static=!0,b=this.eat(Ea.star),
this.parsePropertyName(n));if(n.computed||"Identifier"!==n.key.type||"async"!==n.key.name||this.tok.type===Ea.parenL||this.canInsertSemicolon())var e=!1;else e=!0,b=9<=this.options.ecmaVersion&&this.eat(Ea.star),this.parsePropertyName(n);5<=this.options.ecmaVersion&&"Identifier"===n.key.type&&!n.computed&&("get"===n.key.name||"set"===n.key.name)&&this.tok.type!==Ea.parenL&&this.tok.type!==Ea.braceL?(n.kind=n.key.name,this.parsePropertyName(n),n.value=this.parseMethod(!1)):(n.kind=n.computed||n.static||
b||e||!("Identifier"===n.key.type&&"constructor"===n.key.name||"Literal"===n.key.type&&"constructor"===n.key.value)?"method":"constructor",n.value=this.parseMethod(b,e));k.body.body.push(this.finishNode(n,"MethodDefinition"))}}this.popCx();this.eat(Ea.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));this.semicolon();this.finishNode(k.body,"ClassBody");return this.finishNode(k,c?"ClassDeclaration":"ClassExpression")};$p.parseFunction=function(c,
k,d){var h=this.inAsync,n=this.inFunction;this.initFunction(c);6<=this.options.ecmaVersion&&(c.generator=this.eat(Ea.star));8<=this.options.ecmaVersion&&(c.async=!!d);this.tok.type===Ea.name?c.id=this.parseIdent():!0===k&&(c.id=this.dummyIdent());this.inAsync=c.async;this.inFunction=!0;c.params=this.parseFunctionParams();c.body=this.parseBlock();this.toks.adaptDirectivePrologue(c.body.body);this.inAsync=h;this.inFunction=n;return this.finishNode(c,k?"FunctionDeclaration":"FunctionExpression")};$p.parseExport=
function(){var c=this.startNode();this.next();if(this.eat(Ea.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?c.exported=this.parseExprAtom():c.exported=null),c.source=this.eatContextual("from")?this.parseExprAtom():this.dummyString(),this.finishNode(c,"ExportAllDeclaration");if(this.eat(Ea._default)){var k;if(this.tok.type===Ea._function||(k=this.toks.isAsyncFunction())){var d=this.startNode();this.next();k&&this.next();c.declaration=this.parseFunction(d,"nullableID",k)}else this.tok.type===
Ea._class?c.declaration=this.parseClass("nullableID"):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}this.tok.type.keyword||this.toks.isLet()||this.toks.isAsyncFunction()?(c.declaration=this.parseStatement(),c.specifiers=[],c.source=null):(c.declaration=null,c.specifiers=this.parseExportSpecifierList(),c.source=this.eatContextual("from")?this.parseExprAtom():null,this.semicolon());return this.finishNode(c,"ExportNamedDeclaration")};$p.parseImport=
function(){var c=this.startNode();this.next();if(this.tok.type===Ea.string)c.specifiers=[],c.source=this.parseExprAtom();else{if(this.tok.type===Ea.name&&"from"!==this.tok.value){var k=this.startNode();k.local=this.parseIdent();this.finishNode(k,"ImportDefaultSpecifier");this.eat(Ea.comma)}c.specifiers=this.parseImportSpecifiers();c.source=this.eatContextual("from")&&this.tok.type===Ea.string?this.parseExprAtom():this.dummyString();k&&c.specifiers.unshift(k)}this.semicolon();return this.finishNode(c,
"ImportDeclaration")};$p.parseImportSpecifiers=function(){var c=[];if(this.tok.type===Ea.star){var k=this.startNode();this.next();k.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent();c.push(this.finishNode(k,"ImportNamespaceSpecifier"))}else{k=this.curIndent;var d=this.curLineStart,h=this.nextLineStart;this.pushCx();this.eat(Ea.braceL);this.curLineStart>h&&(h=this.curLineStart);for(;!this.closes(Ea.braceR,k+(this.curLineStart<=h?1:0),d);){var n=this.startNode();if(this.eat(Ea.star))n.local=
this.eatContextual("as")?this.parseIdent():this.dummyIdent(),this.finishNode(n,"ImportNamespaceSpecifier");else{if(this.isContextual("from"))break;n.imported=this.parseIdent();if(Mg(n.imported))break;n.local=this.eatContextual("as")?this.parseIdent():n.imported;this.finishNode(n,"ImportSpecifier")}c.push(n);this.eat(Ea.comma)}this.eat(Ea.braceR);this.popCx()}return c};$p.parseExportSpecifierList=function(){var c=[],k=this.curIndent,d=this.curLineStart,h=this.nextLineStart;this.pushCx();this.eat(Ea.braceL);
this.curLineStart>h&&(h=this.curLineStart);for(;!this.closes(Ea.braceR,k+(this.curLineStart<=h?1:0),d)&&!this.isContextual("from");){var n=this.startNode();n.local=this.parseIdent();if(Mg(n.local))break;n.exported=this.eatContextual("as")?this.parseIdent():n.local;this.finishNode(n,"ExportSpecifier");c.push(n);this.eat(Ea.comma)}this.eat(Ea.braceR);this.popCx();return c};var tj=sj.prototype;tj.checkLVal=function(c){if(!c)return c;switch(c.type){case "Identifier":case "MemberExpression":return c;case "ParenthesizedExpression":return c.expression=
this.checkLVal(c.expression),c;default:return this.dummyIdent()}};tj.parseExpression=function(c){var k=this.storeCurrentPos(),d=this.parseMaybeAssign(c);if(this.tok.type===Ea.comma){k=this.startNodeAt(k);for(k.expressions=[d];this.eat(Ea.comma);)k.expressions.push(this.parseMaybeAssign(c));return this.finishNode(k,"SequenceExpression")}return d};tj.parseParenExpression=function(){this.pushCx();this.expect(Ea.parenL);var c=this.parseExpression();this.popCx();this.expect(Ea.parenR);return c};tj.parseMaybeAssign=
function(c){if(this.toks.isContextual("yield"))return c=this.startNode(),this.next(),this.semicolon()||this.canInsertSemicolon()||this.tok.type!==Ea.star&&!this.tok.type.startsExpr?(c.delegate=!1,c.argument=null):(c.delegate=this.eat(Ea.star),c.argument=this.parseMaybeAssign()),this.finishNode(c,"YieldExpression");var k=this.storeCurrentPos(),d=this.parseMaybeConditional(c);return this.tok.type.isAssign?(k=this.startNodeAt(k),k.operator=this.tok.value,k.left=this.tok.type===Ea.eq?this.toAssignable(d):
this.checkLVal(d),this.next(),k.right=this.parseMaybeAssign(c),this.finishNode(k,"AssignmentExpression")):d};tj.parseMaybeConditional=function(c){var k=this.storeCurrentPos(),d=this.parseExprOps(c);return this.eat(Ea.question)?(k=this.startNodeAt(k),k.test=d,k.consequent=this.parseMaybeAssign(),k.alternate=this.expect(Ea.colon)?this.parseMaybeAssign(c):this.dummyIdent(),this.finishNode(k,"ConditionalExpression")):d};tj.parseExprOps=function(c){var k=this.storeCurrentPos(),d=this.curIndent,h=this.curLineStart;
return this.parseExprOp(this.parseMaybeUnary(!1),k,-1,c,d,h)};tj.parseExprOp=function(c,k,d,h,n,b){if(this.curLineStart!==b&&this.curIndent<n&&this.tokenStartsLine())return c;var e=this.tok.type.binop;if(null!=e&&(!h||this.tok.type!==Ea._in)&&e>d){var m=this.startNodeAt(k);m.left=c;m.operator=this.tok.value;this.next();this.curLineStart!==b&&this.curIndent<n&&this.tokenStartsLine()?m.right=this.dummyIdent():(c=this.storeCurrentPos(),m.right=this.parseExprOp(this.parseMaybeUnary(!1),c,e,h,n,b));this.finishNode(m,
/&&|\|\||\?\?/.test(m.operator)?"LogicalExpression":"BinaryExpression");return this.parseExprOp(m,k,d,h,n,b)}return c};tj.parseMaybeUnary=function(c){var k=this.storeCurrentPos();if(8<=this.options.ecmaVersion&&this.toks.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var d=this.parseAwait();c=!0}else if(this.tok.type.prefix){d=this.startNode();var h=this.tok.type===Ea.incDec;h||(c=!0);d.operator=this.tok.value;d.prefix=!0;this.next();d.argument=this.parseMaybeUnary(!0);
h&&(d.argument=this.checkLVal(d.argument));d=this.finishNode(d,h?"UpdateExpression":"UnaryExpression")}else if(this.tok.type===Ea.ellipsis)d=this.startNode(),this.next(),d.argument=this.parseMaybeUnary(c),d=this.finishNode(d,"SpreadElement");else for(d=this.parseExprSubscripts();this.tok.type.postfix&&!this.canInsertSemicolon();)h=this.startNodeAt(k),h.operator=this.tok.value,h.prefix=!1,h.argument=this.checkLVal(d),this.next(),d=this.finishNode(h,"UpdateExpression");return!c&&this.eat(Ea.starstar)?
(c=this.startNodeAt(k),c.operator="**",c.left=d,c.right=this.parseMaybeUnary(!1),this.finishNode(c,"BinaryExpression")):d};tj.parseExprSubscripts=function(){var c=this.storeCurrentPos();return this.parseSubscripts(this.parseExprAtom(),c,!1,this.curIndent,this.curLineStart)};tj.parseSubscripts=function(c,k,d,h,n){for(var b=11<=this.options.ecmaVersion,e=!1;;){if(this.curLineStart!==n&&this.curIndent<=h&&this.tokenStartsLine())if(this.tok.type===Ea.dot&&this.curIndent===h)--h;else break;var m="Identifier"===
c.type&&"async"===c.name&&!this.canInsertSemicolon(),a=b&&this.eat(Ea.questionDot);a&&(e=!0);if(a&&this.tok.type!==Ea.parenL&&this.tok.type!==Ea.bracketL&&this.tok.type!==Ea.backQuote||this.eat(Ea.dot)){var g=this.startNodeAt(k);g.object=c;this.curLineStart!==n&&this.curIndent<=h&&this.tokenStartsLine()?g.property=this.dummyIdent():g.property=this.parsePropertyAccessor()||this.dummyIdent();g.computed=!1;b&&(g.optional=a);c=this.finishNode(g,"MemberExpression")}else if(this.tok.type===Ea.bracketL)this.pushCx(),
this.next(),g=this.startNodeAt(k),g.object=c,g.property=this.parseExpression(),g.computed=!0,b&&(g.optional=a),this.popCx(),this.expect(Ea.bracketR),c=this.finishNode(g,"MemberExpression");else if(d||this.tok.type!==Ea.parenL)if(this.tok.type===Ea.backQuote)a=this.startNodeAt(k),a.tag=c,a.quasi=this.parseTemplate(),c=this.finishNode(a,"TaggedTemplateExpression");else break;else{g=this.parseExprList(Ea.parenR);if(m&&this.eat(Ea.arrow))return this.parseArrowExpression(this.startNodeAt(k),g,!0);m=this.startNodeAt(k);
m.callee=c;m.arguments=g;b&&(m.optional=a);c=this.finishNode(m,"CallExpression")}}e&&(k=this.startNodeAt(k),k.expression=c,c=this.finishNode(k,"ChainExpression"));return c};tj.parseExprAtom=function(){switch(this.tok.type){case Ea._this:case Ea._super:var c=this.tok.type===Ea._this?"ThisExpression":"Super";var k=this.startNode();this.next();return this.finishNode(k,c);case Ea.name:k=this.storeCurrentPos();c=this.parseIdent();var d=!1;if("async"===c.name&&!this.canInsertSemicolon()){if(this.eat(Ea._function))return this.parseFunction(this.startNodeAt(k),
!1,!0);this.tok.type===Ea.name&&(c=this.parseIdent(),d=!0)}return this.eat(Ea.arrow)?this.parseArrowExpression(this.startNodeAt(k),[c],d):c;case Ea.regexp:return k=this.startNode(),c=this.tok.value,k.regex={pattern:c.pattern,flags:c.flags},k.value=c.value,k.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(k,"Literal");case Ea.num:case Ea.string:return k=this.startNode(),k.value=this.tok.value,k.raw=this.input.slice(this.tok.start,this.tok.end),this.tok.type===Ea.num&&
110===k.raw.charCodeAt(k.raw.length-1)&&(k.bigint=k.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(k,"Literal");case Ea._null:case Ea._true:case Ea._false:return k=this.startNode(),k.value=this.tok.type===Ea._null?null:this.tok.type===Ea._true,k.raw=this.tok.type.keyword,this.next(),this.finishNode(k,"Literal");case Ea.parenL:k=this.storeCurrentPos();this.next();c=this.parseExpression();this.expect(Ea.parenR);if(this.eat(Ea.arrow))return c=c.expressions||[c],c.length&&Mg(c[c.length-
1])&&c.pop(),this.parseArrowExpression(this.startNodeAt(k),c);this.options.preserveParens&&(k=this.startNodeAt(k),k.expression=c,c=this.finishNode(k,"ParenthesizedExpression"));return c;case Ea.bracketL:return k=this.startNode(),k.elements=this.parseExprList(Ea.bracketR,!0),this.finishNode(k,"ArrayExpression");case Ea.braceL:return this.parseObj();case Ea._class:return this.parseClass(!1);case Ea._function:return k=this.startNode(),this.next(),this.parseFunction(k,!1);case Ea._new:return this.parseNew();
case Ea.backQuote:return this.parseTemplate();case Ea._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.dummyIdent();default:return this.dummyIdent()}};tj.parseExprImport=function(){var c=this.startNode(),k=this.parseIdent(!0);switch(this.tok.type){case Ea.parenL:return this.parseDynamicImport(c);case Ea.dot:return c.meta=k,this.parseImportMeta(c);default:return c.name="import",this.finishNode(c,"Identifier")}};tj.parseDynamicImport=function(c){c.source=this.parseExprList(Ea.parenR)[0]||
this.dummyString();return this.finishNode(c,"ImportExpression")};tj.parseImportMeta=function(c){this.next();c.property=this.parseIdent(!0);return this.finishNode(c,"MetaProperty")};tj.parseNew=function(){var c=this.startNode(),k=this.curIndent,d=this.curLineStart,h=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Ea.dot))return c.meta=h,c.property=this.parseIdent(!0),this.finishNode(c,"MetaProperty");h=this.storeCurrentPos();c.callee=this.parseSubscripts(this.parseExprAtom(),h,!0,k,d);
c.arguments=this.tok.type===Ea.parenL?this.parseExprList(Ea.parenR):[];return this.finishNode(c,"NewExpression")};tj.parseTemplateElement=function(){var c=this.startNode();c.value=this.tok.type===Ea.invalidTemplate?{raw:this.tok.value,cooked:null}:{raw:this.input.slice(this.tok.start,this.tok.end).replace(/\r\n?/g,"\n"),cooked:this.tok.value};this.next();c.tail=this.tok.type===Ea.backQuote;return this.finishNode(c,"TemplateElement")};tj.parseTemplate=function(){var c=this.startNode();this.next();
c.expressions=[];var k=this.parseTemplateElement();for(c.quasis=[k];!k.tail;)this.next(),c.expressions.push(this.parseExpression()),this.expect(Ea.braceR)?k=this.parseTemplateElement():(k=this.startNode(),k.value={cooked:"",raw:""},k.tail=!0,this.finishNode(k,"TemplateElement")),c.quasis.push(k);this.expect(Ea.backQuote);return this.finishNode(c,"TemplateLiteral")};tj.parseObj=function(){var c=this.startNode();c.properties=[];this.pushCx();var k=this.curIndent+1,d=this.curLineStart;this.eat(Ea.braceL);
this.curIndent+1<k&&(k=this.curIndent,d=this.curLineStart);for(;!this.closes(Ea.braceR,k,d);){var h=this.startNode(),n=void 0,b=void 0;if(9<=this.options.ecmaVersion&&this.eat(Ea.ellipsis))h.argument=this.parseMaybeAssign(),c.properties.push(this.finishNode(h,"SpreadElement"));else{6<=this.options.ecmaVersion&&(b=this.storeCurrentPos(),h.method=!1,h.shorthand=!1,n=this.eat(Ea.star));this.parsePropertyName(h);if(this.toks.isAsyncProp(h)){var e=!0;n=9<=this.options.ecmaVersion&&this.eat(Ea.star);this.parsePropertyName(h)}else e=
!1;Mg(h.key)?Mg(this.parseMaybeAssign())&&this.next():(this.eat(Ea.colon)?(h.kind="init",h.value=this.parseMaybeAssign()):6<=this.options.ecmaVersion&&(this.tok.type===Ea.parenL||this.tok.type===Ea.braceL)?(h.kind="init",h.method=!0,h.value=this.parseMethod(n,e)):5<=this.options.ecmaVersion&&"Identifier"===h.key.type&&!h.computed&&("get"===h.key.name||"set"===h.key.name)&&this.tok.type!==Ea.comma&&this.tok.type!==Ea.braceR&&this.tok.type!==Ea.eq?(h.kind=h.key.name,this.parsePropertyName(h),h.value=
this.parseMethod(!1)):(h.kind="init",6<=this.options.ecmaVersion?this.eat(Ea.eq)?(n=this.startNodeAt(b),n.operator="=",n.left=h.key,n.right=this.parseMaybeAssign(),h.value=this.finishNode(n,"AssignmentExpression")):h.value=h.key:h.value=this.dummyIdent(),h.shorthand=!0),c.properties.push(this.finishNode(h,"Property")))}this.eat(Ea.comma)}this.popCx();this.eat(Ea.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return this.finishNode(c,"ObjectExpression")};
tj.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(Ea.bracketL)){c.computed=!0;c.key=this.parseExpression();this.expect(Ea.bracketR);return}c.computed=!1}var k=this.tok.type===Ea.num||this.tok.type===Ea.string?this.parseExprAtom():this.parseIdent();c.key=k||this.dummyIdent()};tj.parsePropertyAccessor=function(){if(this.tok.type===Ea.name||this.tok.type.keyword)return this.parseIdent()};tj.parseIdent=function(){var c=this.tok.type===Ea.name?this.tok.value:this.tok.type.keyword;
if(!c)return this.dummyIdent();var k=this.startNode();this.next();k.name=c;return this.finishNode(k,"Identifier")};tj.initFunction=function(c){c.id=null;c.params=[];6<=this.options.ecmaVersion&&(c.generator=!1,c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};tj.toAssignable=function(c,k){if(c&&"Identifier"!==c.type&&("MemberExpression"!==c.type||k))if("ParenthesizedExpression"===c.type)this.toAssignable(c.expression,k);else{if(6>this.options.ecmaVersion)return this.dummyIdent();if("ObjectExpression"===
c.type){c.type="ObjectPattern";for(var d=0,h=c.properties;d<h.length;d+=1)this.toAssignable(h[d],k)}else if("ArrayExpression"===c.type)c.type="ArrayPattern",this.toAssignableList(c.elements,k);else if("Property"===c.type)this.toAssignable(c.value,k);else if("SpreadElement"===c.type)c.type="RestElement",this.toAssignable(c.argument,k);else if("AssignmentExpression"===c.type)c.type="AssignmentPattern",delete c.operator;else return this.dummyIdent()}return c};tj.toAssignableList=function(c,k){for(var d=
0;d<c.length;d+=1)this.toAssignable(c[d],k);return c};tj.parseFunctionParams=function(c){c=this.parseExprList(Ea.parenR);return this.toAssignableList(c,!0)};tj.parseMethod=function(c,k){var d=this.startNode(),h=this.inAsync,n=this.inFunction;this.initFunction(d);6<=this.options.ecmaVersion&&(d.generator=!!c);8<=this.options.ecmaVersion&&(d.async=!!k);this.inAsync=d.async;this.inFunction=!0;d.params=this.parseFunctionParams();d.body=this.parseBlock();this.toks.adaptDirectivePrologue(d.body.body);this.inAsync=
h;this.inFunction=n;return this.finishNode(d,"FunctionExpression")};tj.parseArrowExpression=function(c,k,d){var h=this.inAsync,n=this.inFunction;this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!d);this.inAsync=c.async;this.inFunction=!0;c.params=this.toAssignableList(k,!0);c.expression=this.tok.type!==Ea.braceL;c.expression?c.body=this.parseMaybeAssign():(c.body=this.parseBlock(),this.toks.adaptDirectivePrologue(c.body.body));this.inAsync=h;this.inFunction=n;return this.finishNode(c,"ArrowFunctionExpression")};
tj.parseExprList=function(c,k){this.pushCx();var d=this.curIndent,h=this.curLineStart,n=[];for(this.next();!this.closes(c,d+1,h);)if(this.eat(Ea.comma))n.push(k?null:this.dummyIdent());else{var b=this.parseMaybeAssign();if(Mg(b)){if(this.closes(c,d,h))break;this.next()}else n.push(b);this.eat(Ea.comma)}this.popCx();this.eat(c)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return n};tj.parseAwait=function(){var c=this.startNode();this.next();c.argument=
this.parseMaybeUnary();return this.finishNode(c,"AwaitExpression")};pB.tabSize=4;var qH=Object.freeze({__proto__:null,LooseParser:sj,isDummy:Mg,parse:function(c,k){return sj.parse(c,k)}}),Ve=lively.FreezerRuntime.recorderFor("lively.ast/lib/acorn-extension.js");Ve.forEachNode=function(c,k,d,h){h=h||{};var n=h.traversal||"preorder",b=Ve.obj.clone(h.visitors?h.visitors:Ve.walk.make(Ve.custom.visitors.withMemberExpression)),e="preorder"===n?function(m,a,g,l,q){k(g,d,l,a);return m(g,l+1,q)}:function(m,
a,g,l,q){m=m(g,l+1,q);k(g,d,l,a);return m};Object.keys(b).forEach(function(m){var a=b[m];b[m]=function(g,l,q){return e(a,m,g,l,q)}});Ve.walk.recursive(c,0,null,b);return c};Ve.matchNodes=function(c,k,d,h){return Ve.forEachNode(c,function(n,b,e,m){if(k[n.type])k[n.type](n,b,e,m)},d,h)};Ve.findNodesIncluding=np;Ve.withParentInfo=function(c,k,d){function h(a){var g={id:Ve.string.newUUID(),parentScope:a,containingScopes:[]};a&&a.containingScopes.push(g);return g}d=d||{};var n=Ve.walk.make({Function:function(a,
g,l){g&&g.scope&&(g.scope=h(g.scope));l(a.body,g,"ScopeBody")},VariableDeclarator:function(a,g,l){a.init&&l(a.init,g,"Expression")},VariableDeclaration:function(a,g,l){for(var q=0;q<a.declarations.length;++q){var r=a.declarations[q];r&&l(r,g,"VariableDeclarator")}},ObjectExpression:function(a,g,l){for(var q=0;q<a.properties.length;++q){var r=a.properties[q];l(r.key,g,"Expression");l(r.value,g,"Expression")}},MemberExpression:function(a,g,l){l(a.object,g,"Expression");l(a.property,g,"Expression")}},
Ve.walk.base),b,e=[];Ve.forEachNode(c,function(a){Ve.arr.withoutAll(Object.keys(a),["end","start","type","source","raw"]).forEach(function(g){if(!a.__lookupGetter__(g)){var l=a[g];a.__defineGetter__(g,function(){b=g;return l});e.push([a,g,a[g]])}})},null,{visitors:n});var m=[];Object.keys(n).forEach(function(a){var g=n[a];n[a]=function(l,q,r){return a===l.type||d.visitAllNodes?(m.push(k.call(null,l,{scope:q.scope,depth:q.depth,parent:q.parent,type:a,propertyInParent:b})),g(l,{scope:q.scope,parent:l,
depth:q.depth+1},r)):g(l,q,r)}});Ve.walk.recursive(c,{scope:h(),parent:null,propertyInParent:"",depth:0},null,n);e.forEach(function(a){delete a[0][a[1]];a[0][a[1]]=a[2]});return m};Ve.copy=zq;Ve.findSiblings=Qr;Ve.findNodeByAstIndex=oo;Ve.findStatementOfNode=ka;Ve.addAstIndex=cn;Ve.obj=Pf;Ve.arr=vf;Ve.string=vh;Ve.Path=nh;Ve.withMozillaAstDo=ay;Ve.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;Ve.acorn=Ns;Ve.walk=dr;Ve.loose=qH;Ve.custom=
{};Ve.custom.forEachNode=Ve.forEachNode;Ve.custom.matchNodes=Ve.matchNodes;Ve.custom.findNodesIncluding=Ve.findNodesIncluding;Ve.custom.withParentInfo=Ve.withParentInfo;Ve.custom.copy=Ve.copy;Ve.custom.findSiblings=Ve.findSiblings;Ve.custom.findNodeByAstIndex=Ve.findNodeByAstIndex;Ve.custom.findStatementOfNode=Ve.findStatementOfNode;Ve.custom.addAstIndex=Ve.addAstIndex;var iw=sa("E",Ve.custom);Ve.walk=dr;Ve.walk=dr;Ve.loose=qH;Ve.loose=qH;Ve.acorn=Ns;Ve.acorn=Ns;Ve.custom=iw;Ve.custom=iw;Ve.findStatementOfNode=
ka;Ve.findStatementOfNode=ka;Ve.addAstIndex=cn;Ve.addAstIndex=cn;Ve.findNodesIncluding=np;Ve.findNodesIncluding=np;Ve.findSiblings=Qr;Ve.findSiblings=Qr;Ve.findNodeByAstIndex=oo;Ve.findNodeByAstIndex=oo;Ve.copy=zq;Ve.copy=zq;Ve.custom.visitors={stopAtFunctions:Ve.walk.make(Object.assign({Function:function(){}},Ve.walk.base)),withMemberExpression:Ve.walk.make({MemberExpression:function(c,k,d){d(c.object,k,"Expression");d(c.property,k,"Expression")}},Ve.walk.base)};var ui=lively.FreezerRuntime.recorderFor("lively.ast/lib/visitors.js");
ui.blockInliner=function(c){if(Array.isArray(c.body))for(var k=c.body.length-1;0<=k;k--){var d=c.body[k];"BlockStatement"===d.type&&d[ui.canBeInlinedSym]&&c.body.splice.apply(c.body,[k,1].concat(d.body))}return c};ui.block=function(c){return{type:"BlockStatement",body:c}};ui.Visitor=ae;var er=function(){return ui.Visitor.apply(this,arguments)||this};$jscomp.inherits(er,ui.Visitor);er.prototype.accept=function(c,k,d){this.doFunc(c,k,d);return ui.Visitor.prototype.accept.call(this,c,k,d)};er.run=function(c,
k,d){var h=new this;h.doFunc=k;h.accept(c,d,[]);return d};sa("A",er);ui.AllNodesVisitor=er;var by=function(){return ui.Visitor.apply(this,arguments)||this};$jscomp.inherits(by,ui.Visitor);by.prototype.accept=function(c,k,d){switch(c.type){case "ArrowFunctionExpression":return c;case "FunctionExpression":return c;case "FunctionDeclaration":return k.unshift({node:c,path:d}),c;default:return ui.Visitor.prototype.accept.call(this,c,k,d)}};by.run=function(c){var k=[];(new this).accept(c,k,[]);return k};
ui.FindToplevelFuncDeclVisitor=by;ui.canBeInlinedSym=Symbol("canBeInlined");var aq=function(){return ui.Visitor.apply(this,arguments)||this};$jscomp.inherits(aq,ui.Visitor);aq.prototype.accept=function(c,k,d){c=this.replacer(ui.Visitor.prototype.accept.call(this,c,k,d));k={};return Array.isArray(c)?1===c.length?c[0]:Object.assign(ui.block(c),(k[ui.canBeInlinedSym]=!0,k)):c};aq.prototype.visitBlockStatement=function(c,k,d){return ui.blockInliner(ui.Visitor.prototype.visitBlockStatement.call(this,c,
k,d))};aq.prototype.visitProgram=function(c,k,d){return ui.blockInliner(ui.Visitor.prototype.visitProgram.call(this,c,k,d))};aq.run=function(c,k){var d=new this;d.replacer=k;return d.accept(c,null,[])};ui.ReplaceManyVisitor=aq;var fr=function(){return ui.Visitor.apply(this,arguments)||this};$jscomp.inherits(fr,ui.Visitor);fr.prototype.accept=function(c,k,d){return this.replacer(ui.Visitor.prototype.accept.call(this,c,k,d),d)};fr.run=function(c,k){var d=new this;d.replacer=k;return d.accept(c,null,
[])};ui.ReplaceVisitor=fr;ui.AllNodesVisitor=er;ui.AllNodesVisitor=er;ui.FindToplevelFuncDeclVisitor=by;ui.FindToplevelFuncDeclVisitor=by;ui.ReplaceVisitor=fr;ui.ReplaceVisitor=fr;ui.ReplaceManyVisitor=aq;ui.ReplaceManyVisitor=aq;var Sg=lively.FreezerRuntime.recorderFor("lively.ast/lib/parser.js");Sg.addSource=pk;Sg.nodesAt=function(c,k){k="string"===typeof k?this.parse(k):k;return Sg.findNodesIncluding(k,c)};Sg.parseFunction=pl;Sg.fuzzyParse=om;Sg.acornParseAsyncAware=function(c,k){if(k.onComment){var d=
k.onComment;k.onComment=function(b,e,m,a,g,l){return d.call(this,b,e,m-14,a-14,g,l)}}var h=Sg.acorn.parse("async () => {\n"+c+"\n}",k);if(h.loc)var n=h.loc.constructor;h={body:h.body[0].expression.body.body,sourceType:"module",type:"Program"};Sg.AllNodesVisitor.run(h,function(b,e,m){if(!b._positionFixed){b._positionFixed=!0;if(b.start||0===b.start)b.start-=14,b.end-=14;b.loc&&n&&(m=b.loc,e=m.start,m=m.end,b.loc=new n(k,{column:e.column,line:e.line-1},{column:m.column,line:m.line-1}));k.addSource&&
!b.source&&(b.source=c.slice(b.start,b.end))}});h.start=h.body[0].start;h.end=Sg.arr.last(h.body).end;k.addSource&&(h.source=c);h.body[0].loc&&n&&(h.loc=new n(k,h.body[0].loc.start,Sg.arr.last(h.body).loc.end));return h};Sg.parse=Rd;Sg.arr=vf;Sg.acorn=Ns;Sg.loose=qH;Sg.walk=dr;Sg.addAstIndex=cn;Sg.findNodesIncluding=np;Sg.custom=iw;Sg.AllNodesVisitor=er;Sg.walk=dr;Sg.walk=dr;Sg.parse=Rd;Sg.parse=Rd;Sg.parseFunction=pl;Sg.parseFunction=pl;Sg.fuzzyParse=om;Sg.fuzzyParse=om;Sg.addSource=pk;Sg.addSource=
pk;Sg.custom.addSource=Sg.addSource;var Dg=lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitor-interface.js");Dg.string=vh;Dg.Path=nh;Dg.BaseVisitor=ae;Dg.PrinterVisitor=tA;Dg.ComparisonVisitor=Sj;Dg.stringify=Uk;Dg.addAstIndex=cn;Dg.parse=Rd;Dg.addSource=pk;Dg.methods={withMozillaAstDo:function(c,k,d){var h=new Dg.BaseVisitor,n=h.accept;h.accept=function(b,e,m){k=d(function(){n.call(h,b,e,m)},b,e,m);return b};h.accept(c,k,[]);return k},printAst:function(c,k){k=k||{};var d=k.printSource||
!1,h=k.printPositions||!1,n=k.printIndex||!1,b=[];if("string"===typeof c){var e=c;c=Dg.parse(c)}else e=k.source||c.source;d&&!c.source&&(e||(e=Dg.stringify(c),c=Dg.parse(e)),Dg.addSource(c,e));(new Dg.PrinterVisitor).accept(c,{index:0,tree:b},[]);return Dg.string.printTree(b[0],function(m){var a=m.path+":"+m.node.type,g=[];n&&g.push(m.index);h&&g.push(m.node.start+"-"+m.node.end);d&&(m=m.node.source||e.slice(m.node.start,m.node.end),m=Dg.string.print(m.truncate(60).replace(/\n/g,"").replace(/\s+/g,
" ")),g.push(m));g.length&&(a+="("+g.join(",")+")");return a},function(m){return m.children},"  ")},compareAst:function(c,k){if(!c||!k)throw Error("node"+(c?"1":"2")+" not defined");var d={completePath:[],comparisons:{errors:[]}};(new Dg.ComparisonVisitor).accept(c,k,d,[]);return d.comparisons.errors.length?d.comparisons.errors.pluck("msg"):null},pathToNode:function(c,k,d){c.astIndex||Dg.addAstIndex(c);d=new Dg.BaseVisitor;var h=null;(d.accept=function(n,b,e,m){if(!h)return b=b.concat(m),n.astIndex===
k&&(h={pathString:b.map(function(a){return"string"===typeof a?"."+a:"["+a+"]"}).join(""),path:b,node:n}),this["visit"+n.type](n,b,e,m)}).call(d,c,[],{},[]);return h},rematchAstWithSource:function(c,k,d,h){d=!!d;k=Dg.parse(k,d?{locations:!0}:void 0);var n=new Dg.BaseVisitor;h&&(k=Dg.Path(h).get(k));n.accept=function(b,e,m){m=m||[];var a=m.reduce(function(g,l){return g[l]},c);a.start=b.start;a.end=b.end;d&&(a.loc=b.loc);return this["visit"+b.type](b,e,m)};n.accept(k)}};Dg.withMozillaAstDo=Dg.methods.withMozillaAstDo;
Dg.printAst=Dg.methods.printAst;Dg.compareAst=Dg.methods.compareAst;Dg.pathToNode=Dg.methods.pathToNode;Dg.rematchAstWithSource=Dg.methods.rematchAstWithSource;var ay=Dg.withMozillaAstDo,WC=Dg.printAst,XC=Dg.compareAst,YC=Dg.pathToNode,ZC=Dg.rematchAstWithSource;Dg.BaseVisitor=ae;Dg.BaseVisitor=ae;Dg.withMozillaAstDo=ay;Dg.withMozillaAstDo=ay;Dg.printAst=WC;Dg.printAst=WC;Dg.compareAst=XC;Dg.compareAst=XC;Dg.pathToNode=YC;Dg.pathToNode=YC;Dg.rematchAstWithSource=ZC;Dg.rematchAstWithSource=ZC;var He=
lively.FreezerRuntime.recorderFor("lively.ast/lib/nodes.js");He.isIdentifier=cf;He.id=Da;He.literal=Vk;He.exprStmt=dn;He.returnStmt=op;He.empty=dv;He.binaryExpr=Rw;He.funcExpr=Ht;He.funcCall=po;He.varDecl=yi;He.member=en;He.memberChain=Pj;He.assign=qo;He.block=Im;He.program=Rr;He.tryStmt=Wk;He.prop=ev;He.objectLiteral=Ol;He.ifStmt=Xk;He.forIn=Sr;He.conditional=Tr;He.logical=Sw;He.isIdentifier=cf;He.isIdentifier=cf;He.id=Da;He.id=Da;He.literal=Vk;He.literal=Vk;He.objectLiteral=Ol;He.objectLiteral=
Ol;He.prop=ev;He.prop=ev;He.exprStmt=dn;He.exprStmt=dn;He.returnStmt=op;He.returnStmt=op;He.empty=dv;He.empty=dv;He.binaryExpr=Rw;He.binaryExpr=Rw;He.funcExpr=Ht;He.funcExpr=Ht;He.funcCall=po;He.funcCall=po;He.varDecl=yi;He.varDecl=yi;He.member=en;He.member=en;He.memberChain=Pj;He.memberChain=Pj;He.assign=qo;He.assign=qo;He.block=Im;He.block=Im;He.program=Rr;He.program=Rr;He.tryStmt=Wk;He.tryStmt=Wk;He.ifStmt=Xk;He.ifStmt=Xk;He.forIn=Sr;He.forIn=Sr;He.conditional=Tr;He.conditional=Tr;He.logical=Sw;
He.logical=Sw;He.identifierRe=/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;var Au=Object.freeze({__proto__:null,isIdentifier:cf,id:Da,literal:Vk,objectLiteral:Ol,prop:ev,exprStmt:dn,returnStmt:op,empty:dv,binaryExpr:Rw,funcExpr:Ht,funcCall:po,varDecl:yi,member:en,memberChain:Pj,assign:qo,block:Im,program:Rr,tryStmt:Wk,ifStmt:Xk,forIn:Sr,conditional:Tr,logical:Sw}),zd=lively.FreezerRuntime.recorderFor("lively.ast/lib/query.js");zd.scopes=It;zd.nodesAtIndex=Sy;zd.scopesAtIndex=Lh;zd.scopeAtIndex=
Ty;zd.scopesAtPos=Uy;zd.nodesInScopeOf=Aq;zd.declarationsOfScope=Vy;zd.declarationsWithIdsOfScope=function(c){var k=zd.helpers.declIds(c.params).concat(c.catches),d=[].concat($jscomp.arrayFromIterable(c.node.id&&c.node.id.name?[c.node]:[]),$jscomp.arrayFromIterable(zd.arr.filter(c.funcDecls,function(h){return h.id})),$jscomp.arrayFromIterable(zd.arr.filter(c.classDecls,function(h){return h.id})));return k.map(function(h){return[h,h]}).concat(d.map(function(h){return[h,h.id]})).concat(zd.helpers.varDecls(c)).concat(c.importSpecifiers.map(function(h){return[zd.statementOf(c.node,
h),h]}))};zd._declaredVarNames=pp;zd._findJsLintGlobalDeclarations=En;zd.topLevelFuncDecls=ro;zd.resolveReference=so;zd.resolveReferences=Yk;zd.refWithDeclAt=Wy;zd.topLevelDeclsAndRefs=ql;zd.findGlobalVarRefs=xj;zd.findNodesIncludingLines=fv;zd.__varDeclIdsFor=function(c,k){for(var d=[],h=$jscomp.makeIterator(c.params),n=h.next();!n.done;n=h.next())n=n.value,n.name===k&&d.push(n);h=$jscomp.makeIterator(c.funcDecls);for(n=h.next();!n.done;n=h.next())n=n.value,n.id&&n.id.name===k&&d.push(n.id);h=$jscomp.makeIterator(c.classDecls);
for(n=h.next();!n.done;n=h.next())n=n.value,n.id&&n.id.name===k&&d.push(n.id);h=$jscomp.makeIterator(c.importSpecifiers);for(n=h.next();!n.done;n=h.next())n=n.value,n.name===k&&d.push(n);c=$jscomp.makeIterator(zd.helpers.varDeclIds(c));for(n=c.next();!n.done;n=c.next())n=n.value,n.name===k&&d.push(n);return d};zd.findReferencesAndDeclsInScope=qp;zd.findDeclarationClosestToIndex=gv;zd.nodesAt=Ur;zd.statementOf=pm;zd.imports=rp;zd.exports=Jt;zd.arr=vf;zd.chain=Yf;zd.num=Bk;zd.tree=Hr;zd.fun=nl;zd.obj=
Pf;zd.BaseVisitor=ae;zd.ScopeVisitor=Ui;zd.FindToplevelFuncDeclVisitor=by;zd.withMozillaAstDo=ay;zd.parse=Rd;zd.acorn=Ns;zd.walk=dr;zd.custom=iw;zd.stringify=Uk;zd.helpers={declIds:function(c,k){k=void 0===k?[]:k;for(var d=0;d<c.length;d++){var h=c[d];if(h)if("Identifier"===h.type)k.push(h);else if("RestElement"===h.type)k.push(h.argument);else if("AssignmentPattern"===h.type)zd.helpers.declIds([h.left],k);else if("ObjectPattern"===h.type)for(var n=0;n<h.properties.length;n++){var b=h.properties[n];
zd.helpers.declIds([b.value||b],k)}else"ArrayPattern"===h.type&&zd.helpers.declIds(h.elements,k)}return k},varDecls:function(c,k){k=void 0===k?[]:k;c=$jscomp.makeIterator(c.varDecls);for(var d=c.next();!d.done;d=c.next()){d=$jscomp.makeIterator(d.value.declarations);for(var h=d.next();!h.done;h=d.next()){h=h.value;for(var n=$jscomp.makeIterator(zd.helpers.declIds([h.id])),b=n.next();!b.done;b=n.next())k.push([h,b.value])}}return k},varDeclIds:function(c,k){k=void 0===k?[]:k;c=$jscomp.makeIterator(c.varDecls);
for(var d=c.next();!d.done;d=c.next()){d=$jscomp.makeIterator(d.value.declarations);for(var h=d.next();!h.done;h=d.next())zd.helpers.declIds([h.value.id],k)}return k},objPropertiesAsList:function(c,k,d,h){h=void 0===h?[]:h;c=$jscomp.makeIterator(c.properties);for(var n=c.next();!n.done;n=c.next()){n=n.value;var b=n.key.name,e={key:k.concat([b]),value:n.value};switch(n.value.type){case "ArrayExpression":case "ArrayPattern":d||h.push(e);for(e=0;e<n.value.elements.length;e++)zd.helpers.objPropertiesAsList(n.value.elements[e],
k.concat([b,e]),d,h);break;case "ObjectExpression":case "ObjectPattern":d||h.push(e);zd.helpers.objPropertiesAsList(n.value,k.concat([b]),d,h);break;case "AssignmentPattern":d||h.push(e);zd.helpers.objPropertiesAsList(n.left,k.concat([b]),d,h);break;default:h.push(e)}}return h},isDeclaration:function(c){return"FunctionDeclaration"===c.type||"VariableDeclaration"===c.type||"ClassDeclaration"===c.type}};zd.knownGlobals="closed true false null undefined arguments Object Function Array Number parseFloat parseInt Infinity NaN Boolean String Symbol Date Promise RegExp Error EvalError RangeError ReferenceError SyntaxError TypeError URIError JSON Math console ArrayBuffer Uint8Array Int8Array Uint16Array Int16Array Uint32Array Int32Array Float32Array Float64Array Uint8ClampedArray DataView Map Set WeakMap WeakSet Proxy Reflect decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape eval isFinite isNaN Intl navigator window document Blob setTimeout clearTimeout setInterval clearInterval requestAnimationFrame cancelAnimationFrame btoa atob sessionStorage localStorage $world lively System customElements performance addEventListener closed".split(" ");
zd.globalDeclRe=/^\s*global\s*/;zd._stmtTypes="EmptyStatement BlockStatement ExpressionStatement IfStatement BreakStatement ContinueStatement WithStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement ForOfStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration ImportDeclaration ImportDeclaration ExportNamedDeclaration ExportDefaultDeclaration ExportAllDeclaration".split(" ");var rH=zd.helpers,cO=zd.knownGlobals;
zd.helpers=rH;zd.helpers=rH;zd.knownGlobals=cO;zd.knownGlobals=cO;zd.scopes=It;zd.scopes=It;zd.nodesAtIndex=Sy;zd.nodesAtIndex=Sy;zd.scopesAtIndex=Lh;zd.scopesAtIndex=Lh;zd.scopeAtIndex=Ty;zd.scopeAtIndex=Ty;zd.scopesAtPos=Uy;zd.scopesAtPos=Uy;zd.nodesInScopeOf=Aq;zd.nodesInScopeOf=Aq;zd.declarationsOfScope=Vy;zd.declarationsOfScope=Vy;zd._declaredVarNames=pp;zd._declaredVarNames=pp;zd._findJsLintGlobalDeclarations=En;zd._findJsLintGlobalDeclarations=En;zd.topLevelDeclsAndRefs=ql;zd.topLevelDeclsAndRefs=
ql;zd.topLevelFuncDecls=ro;zd.topLevelFuncDecls=ro;zd.findGlobalVarRefs=xj;zd.findGlobalVarRefs=xj;zd.findNodesIncludingLines=fv;zd.findNodesIncludingLines=fv;zd.findReferencesAndDeclsInScope=qp;zd.findReferencesAndDeclsInScope=qp;zd.findDeclarationClosestToIndex=gv;zd.findDeclarationClosestToIndex=gv;zd.nodesAt=Ur;zd.nodesAt=Ur;zd.statementOf=pm;zd.statementOf=pm;zd.resolveReferences=Yk;zd.resolveReferences=Yk;zd.refWithDeclAt=Wy;zd.refWithDeclAt=Wy;zd.imports=rp;zd.imports=rp;zd.exports=Jt;zd.exports=
Jt;var gr=Object.freeze({__proto__:null,helpers:rH,knownGlobals:cO,scopes:It,nodesAtIndex:Sy,scopesAtIndex:Lh,scopeAtIndex:Ty,scopesAtPos:Uy,nodesInScopeOf:Aq,declarationsOfScope:Vy,_declaredVarNames:pp,_findJsLintGlobalDeclarations:En,topLevelDeclsAndRefs:ql,topLevelFuncDecls:ro,findGlobalVarRefs:xj,findNodesIncludingLines:fv,findReferencesAndDeclsInScope:qp,findDeclarationClosestToIndex:gv,nodesAt:Ur,statementOf:pm,resolveReferences:Yk,refWithDeclAt:Wy,imports:rp,exports:Jt});sa("by",gr);var to=
lively.FreezerRuntime.recorderFor("lively.ast/lib/object-spread-transform.js");to.objectSpreadTransform=Vr;to.Visitor=ae;to.funcCall=po;to.member=en;var sH=function(){return to.Visitor.apply(this,arguments)||this};$jscomp.inherits(sH,to.Visitor);sH.prototype.accept=function(c,k,d){"ObjectExpression"===c.type&&(c=this.transformSpreadElement(c));return to.Visitor.prototype.accept.call(this,c,k,d)};sH.prototype.transformSpreadElement=function(c){var k=[],d=[k];c.properties.forEach(function(h){"SpreadElement"!==
h.type?k.push(h):(d.push(h),k=[],d.push(k))});if(1===d.length)return c;k.length||d.pop();return to.funcCall.apply(to,[to.member("Object","assign")].concat($jscomp.arrayFromIterable(d.map(function(h){return"SpreadElement"===h.type?h.argument:{properties:h,type:"ObjectExpression"}}))))};to.ObjectSpreadTransformer=sH;to.default=Vr;var Vd=lively.FreezerRuntime.recorderFor("lively.ast/lib/transform.js");Vd._node2string=function(c){return c.source||Vd.stringify(c)};Vd._findIndentAt=function(c,k){var d=
Vd.string.peekLeft(c,k,/\s+$/);c="number"===typeof d?c.slice(d,k):"";"\n"===c[0]&&(c=c.slice(1));return c};Vd._applyChanges=function(c,k){for(var d=0;d<c.length;d++){var h=c[d];if("del"===h.type)k=k.slice(0,h.pos)+k.slice(h.pos+h.length);else if("add"===h.type)k=k.slice(0,h.pos)+h.string+k.slice(h.pos);else throw Error("Unexpected change "+Vd.obj.inspect(h));}return k};Vd._compareNodesForReplacement=rl;Vd.replaceNode=sp;Vd.replaceNodes=Tw;Vd.replace=Xy;Vd.__findVarDecls=zE;Vd.oneDeclaratorPerVarDecl=
Fn;Vd.oneDeclaratorForVarsInDestructoring=hv;Vd.returnLastStatement=Kt;Vd.wrapInFunction=iv;Vd.wrapInStartEndCall=Yy;Vd.transformSingleExpression=Uw;Vd.arr=vf;Vd.obj=Pf;Vd.string=vh;Vd.chain=Yf;Vd.Path=nh;Vd.helpers=rH;Vd.scopes=It;Vd.topLevelDeclsAndRefs=ql;Vd.topLevelFuncDecls=ro;Vd.parse=Rd;Vd.fuzzyParse=om;Vd.objectSpreadTransform=Vr;Vd.varDecl=yi;Vd.memberChain=Pj;Vd.id=Da;Vd.exprStmt=dn;Vd.funcCall=po;Vd.returnStmt=op;Vd.tryStmt=Wk;Vd.program=Rr;Vd.block=Im;Vd.funcExpr=Ht;Vd.stringify=Uk;Vd.isProbablySingleExpressionRe=
/^\s*(\{|function\s*\()/;Vd.replaceNode=sp;Vd.replaceNode=sp;Vd.replaceNodes=Tw;Vd.replaceNodes=Tw;Vd.replace=Xy;Vd.replace=Xy;Vd._compareNodesForReplacement=rl;Vd._compareNodesForReplacement=rl;Vd.oneDeclaratorPerVarDecl=Fn;Vd.oneDeclaratorPerVarDecl=Fn;Vd.oneDeclaratorForVarsInDestructoring=hv;Vd.oneDeclaratorForVarsInDestructoring=hv;Vd.returnLastStatement=Kt;Vd.returnLastStatement=Kt;Vd.wrapInFunction=iv;Vd.wrapInFunction=iv;Vd.wrapInStartEndCall=Yy;Vd.wrapInStartEndCall=Yy;Vd.transformSingleExpression=
Uw;Vd.transformSingleExpression=Uw;Vd.objectSpreadTransform=Vr;Vd.objectSpreadTransform=Vr;var cy=Object.freeze({__proto__:null,replaceNode:sp,replaceNodes:Tw,replace:Xy,_compareNodesForReplacement:rl,oneDeclaratorPerVarDecl:Fn,oneDeclaratorForVarsInDestructoring:hv,returnLastStatement:Kt,wrapInFunction:iv,wrapInStartEndCall:Yy,transformSingleExpression:Uw,objectSpreadTransform:Vr});sa("bu",cy);var Gf=lively.FreezerRuntime.recorderFor("lively.ast/lib/comments.js");Gf.getCommentPrecedingNode=Bq;Gf.extractComments=
Cq;Gf.obj=Pf;Gf.string=vh;Gf.Path=nh;Gf.chain=Yf;Gf.arr=vf;Gf.fun=nl;Gf.parse=Rd;Gf.statementOf=pm;Gf.Visitor=ae;Gf.stringify=Uk;Gf.getCommentPrecedingNode=Bq;Gf.getCommentPrecedingNode=Bq;Gf.extractComments=Cq;Gf.extractComments=Cq;var tH=Object.freeze({__proto__:null,getCommentPrecedingNode:Bq,extractComments:Cq}),dh=lively.FreezerRuntime.recorderFor("lively.ast/lib/code-categorizer.js");dh.findDecls=Wr;dh.es6ClassDef=function(c){if("ClassDeclaration"!==c.type)return null;var k={type:"class-decl",
name:c.id.name,node:c,children:[]};k.children.push.apply(k.children,$jscomp.arrayFromIterable(dh.arr.compact(c.body.body.map(function(d,h){return dh.es6ClassMethod(d,k,h)}))));return[k].concat($jscomp.arrayFromIterable(k.children))};dh.es6ClassMethod=function(c,k,d){if("MethodDefinition"!==c.type)return null;var h;"constructor"===c.kind?h="class-constructor":"method"===c.kind?h=c.static?"class-class-method":"class-instance-method":"get"===c.kind?h=c.static?"class-class-getter":"class-instance-getter":
"set"===c.kind&&(h=c.static?"class-class-setter":"class-instance-setter");return h?{type:h,parent:k,node:c,name:c.key.name}:null};dh.varDefs=function(c){if("VariableDeclaration"!==c.type)return null;var k=[],d={};c=$jscomp.makeIterator(dh.withVarDeclIds(c));for(var h=c.next();!h.done;d={$jscomp$loop$prop$def$2218:d.$jscomp$loop$prop$def$2218},h=c.next())if(h=h.value,d.$jscomp$loop$prop$def$2218={name:h.id.name,node:h.node,type:"var-decl"},k.push(d.$jscomp$loop$prop$def$2218),d.$jscomp$loop$prop$def$2218.node.init){for(h=
d.$jscomp$loop$prop$def$2218.node.init;"AssignmentExpression"===h.type;)h=h.right;if("ObjectExpression"===h.type)d.$jscomp$loop$prop$def$2218.type="object-decl",d.$jscomp$loop$prop$def$2218.children=dh.objectKeyValsAsDefs(h).map(function(n){return function(b){return Object.assign({},b,{type:"object-"+b.type,parent:n.$jscomp$loop$prop$def$2218})}}(d)),k.push.apply(k,$jscomp.arrayFromIterable(d.$jscomp$loop$prop$def$2218.children));else if(h=dh.someObjectExpressionCall(h,d.$jscomp$loop$prop$def$2218))d.$jscomp$loop$prop$def$2218.children=
h.map(function(n){return function(b){return Object.assign({},b,{parent:n.$jscomp$loop$prop$def$2218})}}(d)),k.push.apply(k,$jscomp.arrayFromIterable(d.$jscomp$loop$prop$def$2218.children))}return k};dh.funcDef=function(c){return"FunctionStatement"!==c.type&&"FunctionDeclaration"!==c.type||!c.id?null:[{name:c.id.name,node:c,type:"function-decl"}]};dh.someObjectExpressionCall=function(c,k){"ExpressionStatement"===c.type&&(c=c.expression);return"CallExpression"!==c.type?null:(c=c.arguments.find(function(d){return"ObjectExpression"===
d.type}))?dh.objectKeyValsAsDefs(c,k):null};dh.functionWrapper=function(c,k){if(!dh.isFunctionWrapper(c))return null;var d=dh.Path("expression.arguments.0").get(c);k=d&&"FunctionExpression"===d.type&&5<dh.string.lines(d.source||"").length?dh.findDecls(d,k):dh.findDecls(dh.Path("expression.callee").get(c),k);var h={node:c,name:dh.Path("expression.callee.id.name").get(c)};k.forEach(function(n){return n.parent||(n.parent=h)});return k};dh.unwrapExport=function(c){return"ExportNamedDeclaration"!==c.type&&
"ExportDefaultDeclaration"!==c.type||!c.declaration?c:c.declaration};dh.objectKeyValsAsDefs=function(c,k){return c.properties.map(function(d){return{name:d.key.name||d.key.value,type:"FunctionExpression"===d.value.type?"method":"property",node:d,parent:k}})};dh.isFunctionWrapper=function(c){return"CallExpression"===dh.Path("expression.type").get(c)&&"FunctionExpression"===dh.Path("expression.callee.type").get(c)};dh.declIds=tp;dh.withVarDeclIds=function(c){return c.declarations.map(function(k){!k.source&&
k.init&&(k.source=k.id.name+" = "+k.init.source);return{node:k,id:k.id}})};dh.parse=Rd;dh.arr=vf;dh.Path=nh;dh.string=vh;dh.obj=Pf;dh.findDecls=Wr;dh.findDecls=Wr;var $C=Object.freeze({__proto__:null,findDecls:Wr}),Tf=lively.FreezerRuntime.recorderFor("lively.ast/index.js");Tf.isValidIdentifier=jv;Tf.BaseVisitor=ae;Tf.BaseVisitor=ae;Tf.withMozillaAstDo=ay;Tf.withMozillaAstDo=ay;Tf.printAst=WC;Tf.printAst=WC;Tf.compareAst=XC;Tf.compareAst=XC;Tf.pathToNode=YC;Tf.pathToNode=YC;Tf.rematchAstWithSource=
ZC;Tf.rematchAstWithSource=ZC;Tf.ReplaceManyVisitor=aq;Tf.ReplaceManyVisitor=aq;Tf.ReplaceVisitor=fr;Tf.ReplaceVisitor=fr;Tf.AllNodesVisitor=er;Tf.AllNodesVisitor=er;Tf.parse=Rd;Tf.parse=Rd;Tf.parseFunction=pl;Tf.parseFunction=pl;Tf.fuzzyParse=om;Tf.fuzzyParse=om;Tf.acorn=Ns;Tf.walk=dr;Tf.custom=iw;Tf.stringify=Uk;Tf.escodegen=vA;Tf.escodegen=vA;Tf.escodegen=vA;Tf.acorn=Ns;Tf.acorn=Ns;Tf.walk=dr;Tf.walk=dr;Tf.nodes=Au;Tf.query=gr;Tf.transform=cy;Tf.comments=tH;Tf.categorizer=$C;Tf.query=gr;Tf.query=
gr;Tf.transform=cy;Tf.transform=cy;Tf.comments=tH;Tf.comments=tH;Tf.categorizer=$C;Tf.categorizer=$C;Tf.stringify=Uk;Tf.stringify=Uk;Tf.nodes=Au;Tf.nodes=Au;Tf.custom=iw;Tf.custom=iw;Tf.isValidIdentifierRe=/^(?!(?:do|if|in|for|let|new|try|var|case|default|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/;
Tf.isValidIdentifier=jv;Tf.isValidIdentifier=jv;Tf.parse=Rd;Tf.Node=Tf.parse("").constructor;Object.defineProperty(Tf.Node.prototype,"__serialize__",{configurable:!0,value:function(){return{__expr__:"("+JSON.stringify(this)+")"}}});var m0=Object.freeze({__proto__:null,BaseVisitor:ae,withMozillaAstDo:ay,printAst:WC,compareAst:XC,pathToNode:YC,rematchAstWithSource:ZC,ReplaceManyVisitor:aq,ReplaceVisitor:fr,AllNodesVisitor:er,parse:Rd,parseFunction:pl,fuzzyParse:om,escodegen:vA,acorn:Ns,walk:dr,query:gr,
transform:cy,comments:tH,categorizer:$C,stringify:Uk,nodes:Au,custom:iw,isValidIdentifier:jv});sa("bs",m0);var eh=lively.FreezerRuntime.recorderFor("lively.vm/lib/util.js");eh.getGlobal=Zk;eh.signatureOf=Dq;eh.isClass=Xr;eh.pluck=up;eh.printSymbol=uo;eh.safeToString=Yr;eh.printEvalResult=vp;eh.obj=Pf;eh.string=vh;eh.getGlobal=Zk;eh.getGlobal=Zk;eh.signatureOf=Dq;eh.signatureOf=Dq;eh.isClass=Xr;eh.isClass=Xr;eh.pluck=up;eh.pluck=up;eh.knownSymbols=function(){return Object.getOwnPropertyNames(Symbol).filter(function(c){return"symbol"===
typeof Symbol[c]}).reduce(function(c,k){return c.set(Symbol[k],"Symbol."+k)},new Map)}();eh.symMatcher=/^Symbol\((.*)\)$/;eh.printSymbol=uo;eh.printSymbol=uo;eh.safeToString=Yr;eh.safeToString=Yr;eh.printEvalResult=vp;eh.printEvalResult=vp;var dO=function(){function c(n,b){"object"===typeof b&&(b=b.maxDepth||2);if(!n)return String(n);if("string"===typeof n)return b=n.includes("\n")?"`":'"',n=n.split("\n").slice(0,1E3).join("\n"),b+n+b;if(n instanceof Error)return n.stack||eh.safeToString(n);if(!eh.obj.isObject(n))return eh.safeToString(n);
try{var e=eh.obj.inspect(n,{customPrinter:d,maxNumberOfKeys:100,maxDepth:b,printFunctionSource:!0})}catch(m){}return"{}"===e?eh.safeToString(n):e}function k(n,b){if("string"===typeof n||Array.isArray(n)||!h||"function"!==typeof n[h])return b;var e="function"===typeof n.entries,m=e?n.entries():n[h](),a=[];b=e?"{":"[";var g=e?"}":"]";n=n.constructor&&n.constructor.name||"Iterable";for(var l=0,q;10>l;l++){q=m.next();if(q.done)break;a.push(q.value)}m=a.map(function(r){return e?String(r[0])+": "+String(r[1]):
c(r,2)}).join(", ");return n+"("+b+m+g+")"}function d(n,b,e){if(!n)return b;if("symbol"===typeof n)return eh.printSymbol(n);if("string"===typeof n)return eh.string.print(eh.string.truncate(n,100));if(n.isMorph)return eh.safeToString(n);if(n instanceof Promise)return"Promise()";if("undefined"!==typeof Node&&n instanceof Node||"undefined"!==typeof ImageData&&n instanceof ImageData)return eh.safeToString(n);var m=n.length||n.byteLength;if(void 0!==m&&10<m&&n.slice)return"["+("string"===typeof n||n.byteLength?
eh.safeToString(n.slice(0,10)):n.slice(0,10).map(e))+",...]";n=k(n,b);return n!==b?n:b}var h="undefined"!==typeof Symbol&&Symbol.iterator;return c}();eh.printInspectEvalValue=dO;eh.printInspectEvalValue=dO;eh.printInspectEvalValue=dO;var Ph=lively.FreezerRuntime.recorderFor("lively.vm/lib/completions.js");Ph.getObjectForCompletion=Lt;Ph.propertyExtract=function(c,k,d){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k).map(Ph.printSymbol)).filter(function(h){return-1===c.indexOf(h)}).map(d).filter(function(h){return!!h}).sort(function(h,
n){return h.name<n.name?-1:h.name>n.name?1:0})};Ph.getMethodsOf=function(c,k){return Ph.propertyExtract(c,k,function(d){return k.__lookupGetter__&&k.__lookupGetter__(d)||"function"!==typeof k[d]?null:{name:d,completion:Ph.signatureOf(d,k[d])}})};Ph.getAttributesOf=function(c,k){return Ph.propertyExtract(c,k,function(d){return k.__lookupGetter__&&!k.__lookupGetter__(d)&&"function"===typeof k[d]?null:{name:d,completion:d}})};Ph.getProtoChain=function(c){for(var k=[];c;)k.push(c),c=c.__proto__;return k};
Ph.getDescriptorOf=function(c,k){function d(h,n){h.length>n&&(h=h.slice(0,n)+"...");return h.replace(/\n/g,"").replace(/\s+/g," ")}if(c===k){if("function"!==typeof c)return d(Ph.safeToString(c),50);k=c.toString();k=d(k.slice(k.indexOf("{")+1,k.lastIndexOf("}")),50);return Ph.signatureOf(c.displayName||c.name||"function",c)+" {"+k+"}"}return(c=k.hasOwnProperty("constructor")&&k.constructor)?"string"===typeof c.type&&c.type.length?d(c.type,50):"string"===typeof c.name&&c.name.length?d(c.name,50):"anonymous class":
"prototype"};Ph.getCompletionsOfObj=function(c,k){try{var d=[];var h=Ph.getProtoChain(c).map(function(b){var e=Ph.getDescriptorOf(c,b);b=Ph.getMethodsOf(d,b).concat(Ph.getAttributesOf(d,b));d=d.concat(Ph.pluck(b,"name"));return[e,Ph.pluck(b,"completion")]})}catch(b){var n=b}k(n,h)};Ph.descriptorsOfObjAndProtoProperties=function(c){var k=[];return Ph.getProtoChain(c).map(function(d){var h=Ph.getDescriptorOf(c,d);d=Ph.getMethodsOf(k,d).concat(Ph.getAttributesOf(k,d));k=k.concat(Ph.pluck(d,"name"));
return[h,Ph.pluck(d,"completion")]})};Ph.getCompletions=$k;Ph.lang=a0;Ph.signatureOf=Dq;Ph.pluck=up;Ph.safeToString=Yr;Ph.printSymbol=uo;Ph.getObjectForCompletion=Lt;Ph.getObjectForCompletion=Lt;Ph.getCompletions=$k;Ph.getCompletions=$k;var aD=Object.freeze({__proto__:null,getObjectForCompletion:Lt,getCompletions:$k});sa("aP",aD);var fc=lively.FreezerRuntime.recorderFor("lively.source-transform/capturing.js");fc.rewriteToCaptureTopLevelVariables=kv;fc.transformImportMeta=function(c,k){return fc.ReplaceVisitor.run(c,
function(d){return"MetaProperty"==d.type&&"import"==d.meta.name?fc.parse("({url: _context.id})").body[0].expression:d})};fc.rewriteToRegisterModuleToCaptureSetters=Zr;fc.clearEmptyExports=function(c,k){k=fc.topLevelDeclsAndRefs(c);k=$jscomp.makeIterator(k.scope.exportDecls);for(var d=k.next();!d.done;d=k.next())d=d.value,d.declaration||!d.specifiers||d.specifiers.length||fc.arr.remove(c.body,d);return c};fc.replaceRefs=function(c,k){var d=fc.topLevelDeclsAndRefs(c),h=d.refs.filter(function(b){return fc.shouldRefBeCaptured(b,
d,k)}),n=[];c=fc.ReplaceVisitor.run(c,function(b,e){if("Property"===b.type&&h.includes(b.key)&&b.shorthand)return fc.prop(fc.id(b.key.name),b.value);if("ExportNamedDeclaration"===b.type){e=b.declaration;var m=b.specifiers;e&&(e.id?n.push(e.id):e.declarations&&n.push.apply(n,$jscomp.arrayFromIterable(e.declarations.map(function(a){return a.id}))));m&&m.forEach(function(a){return n.push(a.local)});return b}return"AssignmentExpression"===b.type&&h.includes(b.left)&&k.declarationWrapper?Object.assign({},
b,{right:fc.declarationWrapperCall(k.declarationWrapper,null,fc.literal(b.left.name),fc.literal("assignment"),b.right,k.captureObj,k)}):b});return fc.ReplaceVisitor.run(c,function(b,e,m){return h.includes(b)&&!n.includes(b)?fc.member(k.captureObj,b):b})};fc.replaceVarDecls=function(c,k){var d=fc.topLevelDeclsAndRefs(c);return fc.ReplaceManyVisitor.run(c,function(h){if(!d.varDecls.includes(h)||h.declarations.every(function(l){return!fc.shouldDeclBeCaptured(l,k)}))return h;for(var n=[],b=0;b<h.declarations.length;b++){var e=
h.declarations[b];if(fc.shouldDeclBeCaptured(e,k)){var m=e.init||{operator:"||",type:"LogicalExpression",left:{computed:!1,object:k.captureObj,property:e.id,type:"MemberExpression"},right:{name:"undefined",type:"Identifier"}};m=k.declarationWrapper&&e.id.name?fc.declarationWrapperCall(k.declarationWrapper,e,fc.literal(e.id.name),fc.literal(h.kind),m,k.captureObj,k):m;if(e.id.type.includes("Pattern")){var a=fc.generateUniqueName(d.declaredNames,"destructured_1"),g={type:"Identifier",name:a};e=fc.transformPattern(e.id,
{parent:g,declaredNames:d.declaredNames}).map(function(l){return l[fc.annotationSym]&&l[fc.annotationSym].capture?fc.assignExpr(k.captureObj,l.declarations[0].id,k.declarationWrapper?fc.declarationWrapperCall(k.declarationWrapper,null,fc.literal(l.declarations[0].id.name),fc.literal(h.kind),l.declarations[0].init,k.captureObj,k):l.declarations[0].init,!1):l});d.declaredNames.push(a);n.push.apply(n,$jscomp.arrayFromIterable([fc.varDecl(g,m,h.kind)].concat(e)))}else n.push(fc.assignExpr(k.captureObj,
e.id,m,!1)),k.keepTopLevelVarDecls&&n.push(fc.varDecl(e.id,fc.member(k.captureObj,e.id)))}else n.push({type:"VariableDeclaration",kind:h.kind||"var",declarations:[e]})}return n})};fc.generateUniqueName=function(c,k){for(var d=1;-1<c.indexOf(k);){if(1E3<d)throw Error("Endless loop searching for unique variable "+k);k=k.replace(/_[0-9]+$|$/,"_"+ ++d)}return k};fc.additionalIgnoredDecls=function(c,k){k=fc.topLevelDeclsAndRefs(c);for(var d=[],h=0;h<k.scope.varDecls.length;h++){var n=k.scope.varDecls[h],
b=fc.Path(k.scope.varDeclPaths[h]).slice(0,-1).get(c);"ForStatement"!==b.type&&"ForInStatement"!==b.type&&"ForOfStatement"!==b.type&&"ExportNamedDeclaration"!==b.type||d.push.apply(d,$jscomp.arrayFromIterable(n.declarations))}return k.scope.catches.map(function(e){return e.name}).concat(d.map(function(e){return e.id.name}))};fc.additionalIgnoredRefs=function(c,k){k=fc.topLevelDeclsAndRefs(c);for(var d=[],h=0;h<k.scope.varDecls.length;h++){var n=k.scope.varDecls[h],b=fc.Path(k.scope.varDeclPaths[h]).slice(0,
-1).get(c);"ForStatement"!==b.type&&"ForInStatement"!==b.type&&"ForOfStatement"!==b.type||d.push.apply(d,$jscomp.arrayFromIterable(n.declarations))}return k.scope.catches.map(function(e){return e.name}).concat(fc.queryHelpers.declIds(d.map(function(e){return e.id})).map(function(e){return e.name}))};fc.shouldDeclBeCaptured=function(c,k){return-1===k.excludeDecls.indexOf(c.id.name)&&(!k.includeDecls||-1<k.includeDecls.indexOf(c.id.name))};fc.shouldRefBeCaptured=function(c,k,d){if(k.scope.importSpecifiers.includes(c))return!1;
for(var h=0;h<k.scope.exportDecls.length;h++){var n=k.scope.exportDecls[h];if(n.declarations&&n.declarations.includes(c)||n.declaration===c)return!1}return d.excludeRefs.includes(c.name)||d.includeRefs&&!d.includeRefs.includes(c.name)?!1:!0};fc.replaceClassDecls=function(c,k){if(k.classToFunction)return k.classToFunction.transform(c,k.classToFunction);var d=fc.topLevelDeclsAndRefs(c);if(!d.classDecls.length)return c;for(var h=c.body.length-1;0<=h;h--){var n=c.body[h];n.id&&d.classDecls.includes(n)&&
c.body.splice(h+1,0,fc.assignExpr(k.captureObj,n.id,n.id,!1))}return c};fc.splitExportDeclarations=function(c,k){k=c.body;for(var d=c.body=[],h=0;h<k.length;h++){var n=k[h];if("ExportNamedDeclaration"!==n.type||!n.declaration||"VariableDeclaration"!==n.declaration.type||1>=n.declaration.declarations.length)d.push(n);else for(var b=n.declaration.declarations,e=0;e<b.length;e++)d.push({type:"ExportNamedDeclaration",specifiers:[],declaration:fc.varDecl(b[e].id,b[e].init,n.declaration.kind)})}return c};
fc.insertCapturesForExportedImports=lv;fc.insertCapturesForExportDeclarations=function(c,k){for(var d=[],h=0;h<c.body.length;h++){var n=c.body[h];d.push(n);if(("ExportNamedDeclaration"===n.type||"ExportDefaultDeclaration"===n.type)&&n.declaration)if("ExportDefaultDeclaration"===n.type&&"Literal"===n.declaration.type){var b=n.declaration,e=fc.generateUniqueName(fc.topLevelDeclsAndRefs(c).declaredNames,"$"+b.raw.split('"').join(""));n.declaration=fc.id(e);fc.arr.pushAt(d,fc.assignExpr(k.captureObj,
e,b.raw,!1),d.indexOf(n))}else n.declaration.declarations?d.push.apply(d,$jscomp.arrayFromIterable(n.declaration.declarations.map(function(m){var a=m.id;k.declarationWrapper&&(m.init.callee&&m.init.callee.name===k.declarationWrapper.name||(a=fc.declarationWrapperCall(k.declarationWrapper,m,fc.literal(m.id.name),fc.literal("assignment"),m.id,k.captureObj,k)));return fc.assignExpr(k.captureObj,m.id,a,!1)}))):"FunctionDeclaration"!==n.declaration.type&&"ClassDeclaration"===n.declaration.type&&d.push(fc.assignExpr(k.captureObj,
n.declaration.id,n.declaration.id,!1))}c.body=d;return c};fc.insertCapturesForImportDeclarations=function(c,k){c.body=c.body.reduce(function(d,h){return d.concat("ImportDeclaration"===h.type&&h.specifiers.length?[h].concat(h.specifiers.map(function(n){return fc.assignExpr(k.captureObj,n.local,n.local,!1)})):[h])},[]);return c};fc.insertDeclarationsForExports=function(c,k){for(var d=fc.topLevelDeclsAndRefs(c),h=[],n=0;n<c.body.length;n++){var b=c.body[n];k.classToFunction&&"ExportDefaultDeclaration"===
b.type&&b.declaration&&!b.declaration.type.includes("Declaration")&&("Identifier"===b.declaration.type||b.declaration.id)?h=h.concat([fc.varDeclOrAssignment(c,{type:"VariableDeclarator",id:b.declaration,init:fc.member(k.captureObj,b.declaration)}),b]):"ExportNamedDeclaration"!==b.type||!b.specifiers.length||b.source?h.push(b):h=h.concat(b.specifiers.map(function(e){return d.declaredNames.includes(e.local.name)?null:fc.varDeclOrAssignment(c,{type:"VariableDeclarator",id:e.local,init:fc.member(k.captureObj,
e.local)})}).filter(Boolean)).concat(b)}c.body=h;return c};fc.fixDefaultAsyncFunctionExportForRegeneratorBug=function(c,k){k=[];for(var d=0;d<c.body.length;d++){var h=c.body[d];"ExportDefaultDeclaration"===h.type&&"FunctionDeclaration"===h.declaration.type&&h.declaration.id&&h.declaration.async&&(k.push(h.declaration),h.declaration={type:"Identifier",name:h.declaration.id.name});k.push(h)}c.body=k;return c};fc.es6ModuleTransforms=function(c,k){c.body=c.body.reduce(function(d,h){if("ExportNamedDeclaration"===
h.type)if(h.source){var n=e=h.source;var b=h.specifiers.map(function(m){return{type:"ExpressionStatement",expression:fc.exportFromImport({type:"Literal",value:m.exported.name},{type:"Literal",value:m.local.name},e,k.moduleExportFunc,k.moduleImportFunc)}})}else b=h.declaration?(b=h.declaration.declarations)?b.map(function(m){k.excludeDecls.push(m.id);return fc.varDecl(m.id,fc.assignExpr(k.captureObj,m.id,k.declarationWrapper?fc.declarationWrapperCall(k.declarationWrapper,null,fc.literal(m.id.name),
fc.literal(h.declaration.kind),m,k.captureObj,k):m.init,!1),h.declaration.kind)}).concat(b.map(function(m){return fc.exportCallStmt(k.moduleExportFunc,m.id.name,m.id)})):[h.declaration].concat(fc.exportCallStmt(k.moduleExportFunc,h.declaration.id.name,h.declaration.id)):h.specifiers.map(function(m){return fc.exportCallStmt(k.moduleExportFunc,m.exported.name,fc.shouldDeclBeCaptured({id:m.local},k)?fc.member(k.captureObj,m.local):m.local)});else if("ExportDefaultDeclaration"===h.type)b=h.declaration&&
h.declaration.id?[h.declaration].concat(fc.exportCallStmt(k.moduleExportFunc,"default",h.declaration.id)):[fc.exportCallStmt(k.moduleExportFunc,"default",h.declaration)];else if("ExportAllDeclaration"===h.type){n={name:k.es6ExportFuncId+"__iterator__",type:"Identifier"};var e=h.source;b=[{type:"ForInStatement",body:{type:"ExpressionStatement",expression:fc.exportFromImport(n,n,e,k.moduleExportFunc,k.moduleImportFunc)},left:{type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",
id:n,init:null}]},right:fc.importCall(null,e,k.moduleImportFunc)}];k.excludeRefs.push(n.name);k.excludeDecls.push(n.name)}else b="ImportDeclaration"===h.type?h.specifiers.length?h.specifiers.map(function(m){return fc.varDeclAndImportCall(c,m.local,"ImportSpecifier"===m.type&&m.imported.name||"ImportDefaultSpecifier"===m.type&&"default"||null,h.source,k.moduleImportFunc)}):fc.importCallStmt(null,h.source,k.moduleImportFunc):[h];return d.concat(b)},[]);return c};fc.putFunctionDeclsInFront=function(c,
k){var d=fc.topLevelDeclsAndRefs(c).scope,h=d.funcDecls;if(!h.length)return c;for(var n=[],b=h.length;b--;){var e=h[b];if(e.id&&fc.shouldDeclBeCaptured(e,k)){var m=d.funcDeclPaths[b].slice(0,-1),a=fc.Path(m).get(d.node);m={type:"Identifier",name:e.id.name};var g=k.declarationWrapper?fc.declarationWrapperCall(k.declarationWrapper,e,fc.literal(m.name),fc.literal("function"),m,k.captureObj,k):m,l=Object.assign({},e);Array.isArray(a)?a.splice(a.indexOf(e),1,fc.exprStmt(e.id)):"ExportNamedDeclaration"===
a.type?(a=d.node.body.indexOf(a),-1<a&&d.node.body.splice(a,1,{type:"ExportNamedDeclaration",specifiers:[{type:"ExportSpecifier",exported:e.id,local:e.id}]})):"ExportDefaultDeclaration"===a.type&&(a.declaration=e.id);n.unshift(fc.assignExpr(k.captureObj,m,g,!1));n.unshift(l)}}c.body=n.concat(c.body);return c};fc.computeDefRanges=function(c,k){c=fc.topLevelDeclsAndRefs(c);return fc.chain(c.scope.varDecls).pluck("declarations").flatten().value().concat(c.scope.funcDecls.filter(function(d){return d.id})).reduce(function(d,
h){d[h.id.name]||(d[h.id.name]=[]);d[h.id.name].push({type:h.type,start:h.start,end:h.end});return d},{})};fc.transformPattern=function(c,k){return"ArrayPattern"===c.type?fc.transformArrayPattern(c,k):"ObjectPattern"===c.type?fc.transformObjectPattern(c,k):[]};fc.transformArrayPattern=function(c,k){for(var d=k.declaredNames,h=fc.annotationSym,n=[],b=0;b<c.elements.length;b++){var e=c.elements[b];if("Identifier"===e.type)e=fc.varDecl(e,fc.member(k.parent,fc.id(b),!0)),e[h]={capture:!0},n.push(e);else if("RestElement"===
e.type)e=fc.varDecl(e.argument,{type:"CallExpression",arguments:[{type:"Literal",value:b}],callee:fc.member(k.parent,fc.id("slice"),!1)}),e[h]={capture:!0},n.push(e);else if("AssignmentPattern"==e.type)e=fc.varDecl(e.left,fc.conditional(fc.binaryExpr(fc.member(k.parent,fc.id(b),!0),"===",fc.id("undefined")),e.right,fc.member(k.parent,fc.id(b),!0))),e[h]={capture:!0},n.push(e);else{var m=fc.id(fc.generateUniqueName(d,k.parent.name+"$"+b)),a=fc.varDecl(m,fc.member(k.parent,b));d.push(m.name);n.push(a);
n.push.apply(n,$jscomp.arrayFromIterable(fc.transformPattern(e,{parent:m,declaredNames:d})))}}return n};fc.transformObjectPattern=function(c,k){for(var d=k.declaredNames,h=fc.annotationSym,n=[],b=0;b<c.properties.length;b++){var e=c.properties[b];if("RestElement"==e.type){var m=c.properties.map(function(l){return l.key&&l.key.name}).filter(Boolean),a=fc.nodes.varDecl(e.argument.name,fc.nodes.objectLiteral([])),g=fc.nodes.varDecl(e.argument.name,fc.id(e.argument.name));e=fc.nodes.exprStmt(fc.nodes.funcCall(fc.nodes.funcExpr({},
[],fc.nodes.forIn("__key",k.parent,fc.nodes.block.apply(fc.nodes,[].concat($jscomp.arrayFromIterable(m.length?m.map(function(l){return fc.nodes.ifStmt(fc.nodes.binaryExpr(fc.nodes.id("__key"),"===",fc.nodes.literal(l)),{type:"ContinueStatement",label:null},null)}):[]),[fc.nodes.exprStmt(fc.nodes.assign(fc.nodes.member(e.argument.name,fc.nodes.id("__key"),!0),fc.nodes.member(k.parent,fc.nodes.id("__key"),!0)))]))))));g[h]={capture:!0};n.push(a,g,e)}else"Identifier"==e.value.type?(a=fc.varDecl(e.value,
fc.member(k.parent,e.key)),a[h]={capture:!0},n.push(a)):"AssignmentPattern"==e.value.type?(a=fc.varDecl(e.value.left,fc.conditional(fc.binaryExpr(fc.member(k.parent,e.key),"===",fc.id("undefined")),e.value.right,fc.member(k.parent,e.key))),a[h]={capture:!0},n.push(a)):(a=fc.id(fc.generateUniqueName(d,k.parent.name+"$"+e.key.name)),g=fc.varDecl(a,fc.member(k.parent,e.key)),g[h]={capture:!1},d.push(a.name),n.push.apply(n,$jscomp.arrayFromIterable([g].concat(fc.transformPattern(e.value,{parent:a,declaredNames:d})))))}return n};
fc.varDeclOrAssignment=function(c,k,d){return-1<fc.topLevelDeclsAndRefs(c).declaredNames.indexOf(k.id.name)?fc.exprStmt(fc.assign(k.id,k.init)):{declarations:[k],kind:d||"var",type:"VariableDeclaration"}};fc.assignExpr=function(c,k,d,h){return fc.exprStmt(fc.assign(fc.member(c,k,h),d||fc.id("undefined")))};fc.exportFromImport=function(c,k,d,h,n){return fc.exportCall(h,c,fc.importCall(k,d,n))};fc.varDeclAndImportCall=function(c,k,d,h,n){return fc.varDecl(k,fc.importCall(d,h,n))};fc.importCall=function(c,
k,d){"string"===typeof c&&(c=fc.literal(c));return{arguments:[k].concat(c||[]),callee:d,type:"CallExpression"}};fc.importCallStmt=function(c,k,d){return fc.exprStmt(fc.importCall(c,k,d))};fc.exportCall=function(c,k,d){"string"===typeof k&&(k=fc.literal(k));d=fc.obj.deepCopy(d);return fc.funcCall(c,k,d)};fc.exportCallStmt=function(c,k,d){return fc.exprStmt(fc.exportCall(c,k,d))};fc.declarationWrapperCall=function(c,k,d,h,n,b,e){if(k){var m=[],a=!1;if(k["x-lively-object-meta"]){a=k["x-lively-object-meta"];
k=a.start;var g=a.end,l=a.evalId,q=a.sourceAccessorName;a=!0;m.push("start",fc.nodes.literal(k),"end",fc.nodes.literal(g))}void 0===l&&e.hasOwnProperty("evalId")&&(l=e.evalId,a=!0);void 0===q&&e.hasOwnProperty("sourceAccessorName")&&(q=e.sourceAccessorName,a=!0);void 0!==l&&m.push("evalId",fc.nodes.literal(l));q&&m.push("moduleSource",fc.nodes.id(q));if(a)return fc.funcCall(c,d,h,n,b,fc.nodes.objectLiteral(m))}return fc.funcCall(c,d,h,n,b)};fc.obj=Pf;fc.string=vh;fc.chain=Yf;fc.arr=vf;fc.fun=nl;fc.Path=
nh;fc.parse=Rd;fc.stringify=Uk;fc.query=gr;fc.transform=cy;fc.nodes=Au;fc.Visitor=ae;fc.ReplaceManyVisitor=aq;fc.ReplaceVisitor=fr;var Os=fc.nodes;fc.member=Os.member;fc.prop=Os.prop;fc.varDecl=Os.varDecl;fc.assign=Os.assign;fc.id=Os.id;fc.literal=Os.literal;fc.exprStmt=Os.exprStmt;fc.conditional=Os.conditional;fc.binaryExpr=Os.binaryExpr;fc.funcCall=Os.funcCall;var n0=fc.query;fc.topLevelDeclsAndRefs=n0.topLevelDeclsAndRefs;fc.queryHelpers=n0.helpers;var o0=fc.transform;fc.transformSingleExpression=
o0.transformSingleExpression;fc.wrapInStartEndCall=o0.wrapInStartEndCall;fc.rewriteToCaptureTopLevelVariables=kv;fc.rewriteToCaptureTopLevelVariables=kv;fc.rewriteToRegisterModuleToCaptureSetters=Zr;fc.rewriteToRegisterModuleToCaptureSetters=Zr;fc.insertCapturesForExportedImports=lv;fc.insertCapturesForExportedImports=lv;fc.annotationSym=Symbol("lively.ast-destructuring-transform");var bD=Object.freeze({__proto__:null,rewriteToCaptureTopLevelVariables:kv,rewriteToRegisterModuleToCaptureSetters:Zr,
insertCapturesForExportedImports:lv}),p0={__esModule:!0,default:function(){return{manipulateOptions:function(c,k){k.plugins.push("jsx")}}}},rba=p0=p0["default"],sba={},q0=sba=Array.isArray,uH="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,r0={};r0="object"==typeof uH&&uH&&uH.Object===Object&&uH;var tba={},uba="object"==typeof self&&self&&self.Object===Object&&self,dy=tba=r0||uba||Function("return this")(),vba={},vH=vba=dy.Symbol,wba={},s0=Object.prototype,xba=s0.hasOwnProperty,
yba=s0.toString,cD=vH?vH.toStringTag:void 0,zba=wba=function(c){var k=xba.call(c,cD),d=c[cD];try{c[cD]=void 0;var h=!0}catch(b){}var n=yba.call(c);h&&(k?c[cD]=d:delete c[cD]);return n},t0={},Aba=Object.prototype.toString;t0=function(c){return Aba.call(c)};var Bba={},Cba=t0,u0=vH?vH.toStringTag:void 0,eO=Bba=function(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":u0&&u0 in Object(c)?zba(c):Cba(c)},Dba={},fO=Dba=function(c){return null!=c&&"object"==typeof c},Eba={},Fba=Eba=function(c){return"string"==
typeof c||!q0(c)&&fO(c)&&"[object String]"==eO(c)},Gba={},gO=Gba=function(c){return c},Hba={},Iba=Hba=function(c){return"symbol"==typeof c||fO(c)&&"[object Symbol]"==eO(c)},Jba={},wA=Jba=function(c){var k=typeof c;return null!=c&&("object"==k||"function"==k)},Kba={},Lba=Kba=function(c){if(!wA(c))return!1;c=eO(c);return"[object Function]"==c||"[object GeneratorFunction]"==c||"[object AsyncFunction]"==c||"[object Proxy]"==c},v0={};v0=dy["__core-js_shared__"];var Mba={},hO=v0,w0=function(){var c=/[^.]+$/.exec(hO&&
hO.keys&&hO.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Nba=Mba=function(c){return!!w0&&w0 in c},x0={},Oba=Function.prototype.toString;x0=function(c){if(null!=c){try{return Oba.call(c)}catch(k){}return c+""}return""};var Pba={},Qba=x0,Rba=/^\[object .+?Constructor\]$/,Sba=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tba=Pba=function(c){return!wA(c)||
Nba(c)?!1:(Lba(c)?Sba:Rba).test(Qba(c))},y0={};y0=function(c,k){return null==c?void 0:c[k]};var Uba={},Vba=y0,z0=Uba=function(c,k){c=Vba(c,k);return Tba(c)?c:void 0},Wba={},A0=Wba=function(){try{var c=z0(Object,"defineProperty");c({},"",{});return c}catch(k){}}(),Xba={},B0=Xba=function(c,k){var d=-1,h=c.length;for(k||(k=Array(h));++d<h;)k[d]=c[d];return k},Yba={},C0=Object.create,iO=Yba=function(){function c(){}return function(k){if(!wA(k))return{};if(C0)return C0(k);c.prototype=k;k=new c;c.prototype=
void 0;return k}}(),Zba={},$ba=/^(?:0|[1-9]\d*)$/,aca=Zba=function(c,k){var d=typeof c;k=null==k?9007199254740991:k;return!!k&&("number"==d||"symbol"!=d&&$ba.test(c))&&-1<c&&0==c%1&&c<k},bca={},D0=bca=function(c,k,d){switch(d.length){case 0:return c.call(k);case 1:return c.call(k,d[0]);case 2:return c.call(k,d[0],d[1]);case 3:return c.call(k,d[0],d[1],d[2])}return c.apply(k,d)},E0={};E0=function(c){return function(){return c}};var cca={},dca=E0,eca=cca=A0?function(c,k){return A0(c,"toString",{configurable:!0,
enumerable:!1,value:dca(k),writable:!0})}:gO,fca={},gca=Date.now,F0=fca=function(c){var k=0,d=0;return function(){var h=gca(),n=16-(h-d);d=h;if(0<n){if(800<=++k)return arguments[0]}else k=0;return c.apply(void 0,arguments)}},hca={},ica=hca=F0(eca),jca={},G0=jca=z0(dy,"WeakMap"),kca={},lca=kca=function(c,k){for(var d=-1,h=null==c?0:c.length;++d<h&&!1!==k(c[d],d,c););return c},mca={},H0=0/0,nca=/^\s+|\s+$/g,oca=/^[-+]0x[0-9a-f]+$/i,pca=/^0b[01]+$/i,qca=/^0o[0-7]+$/i,rca=parseInt,sca=mca=function(c){if("number"==
typeof c)return c;if(Iba(c))return H0;wA(c)&&(c="function"==typeof c.valueOf?c.valueOf():c,c=wA(c)?c+"":c);if("string"!=typeof c)return 0===c?c:+c;c=c.replace(nca,"");var k=pca.test(c);return k||qca.test(c)?rca(c.slice(2),k?2:8):oca.test(c)?H0:+c},tca={},uca=tca=function(c,k,d,h){var n=c.length;for(d+=h?1:-1;h?d--:++d<n;)if(k(c[d],d,c))return d;return-1},I0={},J0=1/0;I0=function(c){if(!c)return 0===c?c:0;c=sca(c);return c===J0||c===-J0?1.7976931348623157E308*(0>c?-1:1):c===c?c:0};var vca={},wca=I0,
K0=vca=function(c){c=wca(c);var k=c%1;return c===c?k?c-k:c:0},xca={},yca=xca=function(c){return c!==c},L0={};L0=function(c,k,d){--d;for(var h=c.length;++d<h;)if(c[d]===k)return d;return-1};var M0={},zca=L0;M0=function(c,k,d){return k===k?zca(c,k,d):uca(c,yca,d)};var Aca={},Bca=M0,Cca=Aca=function(c,k){return!(null==c||!c.length)&&-1<Bca(c,k,0)},Dca={},Eca=Dca=function(){},Fca={},jO=Fca=function(){},Vw="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Gca={};sl.prototype=
iO(jO.prototype);var kO=Gca=sl.prototype.constructor=sl,qB="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Hca={};mv.prototype=iO(jO.prototype);var N0=Hca=mv.prototype.constructor=mv,O0={};O0=function(c){if(c instanceof kO)return c.clone();var k=new N0(c.__wrapped__,c.__chain__);k.__actions__=B0(c.__actions__);k.__index__=c.__index__;k.__values__=c.__values__;return k};var Ica={},l5=kO,EQ=N0,k5=q0,j5=fO,n5=O0,m5=Object.prototype.hasOwnProperty;nv.prototype=jO.prototype;
var Jca=Ica=nv.prototype.constructor=nv,Kca={},wH=Kca=G0&&new G0,Lca={},P0=Lca=wH?function(c){return wH.get(c)}:Eca,Q0={};Q0={};var R0={},S0=Q0,Mca=Object.prototype.hasOwnProperty;R0=function(c){for(var k=c.name+"",d=S0[k],h=Mca.call(S0,k)?d.length:0;h--;){var n=d[h],b=n.func;if(null==b||b==c)return n.name}return k};var Nca={},Oca=R0,Pca=Nca=function(c){var k=Oca(c),d=Jca[k];if("function"!=typeof d||!(k in kO.prototype))return!1;if(c===d)return!0;k=P0(d);return!!k&&c===k[0]},Qca={},T0=Qca=wH?function(c,
k){wH.set(c,k);return c}:gO,Rca={},xH=Rca=function(c){return function(){var k=arguments;switch(k.length){case 0:return new c;case 1:return new c(k[0]);case 2:return new c(k[0],k[1]);case 3:return new c(k[0],k[1],k[2]);case 4:return new c(k[0],k[1],k[2],k[3]);case 5:return new c(k[0],k[1],k[2],k[3],k[4]);case 6:return new c(k[0],k[1],k[2],k[3],k[4],k[5]);case 7:return new c(k[0],k[1],k[2],k[3],k[4],k[5],k[6])}var d=iO(c.prototype);k=c.apply(d,k);return wA(k)?k:d}},yH="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,Sca={},Tca=Sca=function(c,k,d){function h(){return((this||yH)&&(this||yH)!==dy&&(this||yH)instanceof h?b:c).apply(n?d:this||yH,arguments)}var n=k&1,b=xH(c);return h},Uca={},Vca=Math.max,U0=Uca=function(c,k,d,h){var n=-1,b=c.length,e=d.length,m=-1,a=k.length,g=Vca(b-e,0),l=Array(a+g);for(h=!h;++m<a;)l[m]=k[m];for(;++n<e;)if(h||n<b)l[d[n]]=c[n];for(;g--;)l[m++]=c[n++];return l},Wca={},Xca=Math.max,V0=Wca=function(c,k,d,h){var n=-1,b=c.length,e=-1,m=d.length,
a=-1,g=k.length,l=Xca(b-m,0),q=Array(l+g);for(h=!h;++n<l;)q[n]=c[n];for(l=n;++a<g;)q[l+a]=k[a];for(;++e<m;)if(h||n<b)q[l+d[e]]=c[n++];return q},Yca={},Zca=Yca=function(c,k){for(var d=c.length,h=0;d--;)c[d]===k&&++h;return h},$ca={},W0=$ca=F0(T0),ada={},bda=/\{\n\/\* \[wrapped with (.+)\] \*/,cda=/,? & /,dda=ada=function(c){return(c=c.match(bda))?c[1].split(cda):[]},eda={},fda=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,gda=eda=function(c,k){var d=k.length;if(!d)return c;var h=d-1;k[h]=(1<d?"& ":"")+
k[h];k=k.join(2<d?", ":" ");return c.replace(fda,"{\n/* [wrapped with "+k+"] */\n")},X0={},hda=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];X0=function(c,k){lca(hda,function(d){var h="_."+d[0];k&d[1]&&!Cca(c,h)&&c.push(h)});return c.sort()};var ida={},jda=X0,Y0=ida=function(c,k,d){k+="";return ica(c,gda(k,jda(dda(k),d)))},kda={},Z0=kda=function(c,k,d,h,n,b,e,m,a,g){var l=k&8;k=(k|(l?32:64))&~(l?64:32);k&4||(k&=-4);
n=[c,k,n,l?b:void 0,l?e:void 0,l?void 0:b,l?void 0:e,m,a,g];d=d.apply(void 0,n);Pca(c)&&W0(d,n);d.placeholder=h;return Y0(d,c,k)},lda={},$0=lda=function(c){return c.placeholder},mda={},nda=Math.min,oda=mda=function(c,k){for(var d=c.length,h=nda(k.length,d),n=B0(c);h--;){var b=k[h];c[h]=aca(b,d)?n[b]:void 0}return c},pda={},zH=pda=function(c,k){for(var d=-1,h=c.length,n=0,b=[];++d<h;){var e=c[d];if(e===k||"__lodash_placeholder__"===e)c[d]="__lodash_placeholder__",b[n++]=d}return b},AE="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof self?self:global,qda={},q5=U0,r5=V0,p5=Zca,FQ=xH,t5=Z0,o5=$0,u5=oda,s5=zH,v5=dy,a1=qda=Zy,AH="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,rda={},sda=rda=function(c,k,d){function h(){for(var b=arguments.length,e=Array(b),m=b,a=$0(h);m--;)e[m]=arguments[m];m=3>b&&e[0]!==a&&e[b-1]!==a?[]:zH(e,a);b-=m.length;return b<d?Z0(c,k,a1,h.placeholder,void 0,e,m,void 0,void 0,d-b):D0((this||AH)&&(this||AH)!==dy&&(this||AH)instanceof
h?n:c,this||AH,e)}var n=xH(c);return h},BH="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,tda={},uda=tda=function(c,k,d,h){function n(){for(var m=-1,a=arguments.length,g=-1,l=h.length,q=Array(l+a),r=(this||BH)&&(this||BH)!==dy&&(this||BH)instanceof n?e:c;++g<l;)q[g]=h[g];for(;a--;)q[g++]=arguments[++m];return D0(r,b?d:this||BH,q)}var b=k&1,e=xH(c);return n},b1={},vda=Math.min;b1=function(c,k){var d=c[1],h=k[1],n=d|h,b=128==h&&8==d||128==h&&256==d&&c[7].length<=k[8]||
384==h&&k[7].length<=k[8]&&8==d;if(!(131>n||b))return c;h&1&&(c[2]=k[2],n|=d&1?0:4);if(d=k[3])b=c[3],c[3]=b?U0(b,d,k[4]):d,c[4]=b?zH(c[3],"__lodash_placeholder__"):k[4];if(d=k[5])b=c[5],c[5]=b?V0(b,d,k[6]):d,c[6]=b?zH(c[5],"__lodash_placeholder__"):k[6];(d=k[7])&&(c[7]=d);h&128&&(c[8]=null==c[8]?k[8]:vda(c[8],k[8]));null==c[9]&&(c[9]=k[9]);c[0]=k[0];c[1]=n;return c};var c1={},wda=b1,d1=Math.max;c1=function(c,k,d,h,n,b,e,m){var a=k&2;if(!a&&"function"!=typeof c)throw new TypeError("Expected a function");
var g=h?h.length:0;g||(k&=-97,h=n=void 0);e=void 0===e?e:d1(K0(e),0);m=void 0===m?m:K0(m);g-=n?n.length:0;if(k&64){var l=h,q=n;h=n=void 0}var r=a?void 0:P0(c);b=[c,k,d,h,n,l,q,b,e,m];r&&wda(b,r);c=b[0];k=b[1];d=b[2];h=b[3];n=b[4];m=b[9]=void 0===b[9]?a?0:c.length:d1(b[9]-g,0);!m&&k&24&&(k&=-25);d=k&&1!=k?8==k||16==k?sda(c,k,m):32!=k&&33!=k||n.length?a1.apply(void 0,b):uda(c,k,d,h):Tca(c,k,d);return Y0((r?T0:W0)(d,b),c,k)};var xda={},yda=c1,zda=xda=function(c,k,d){k=d?void 0:k;k=c&&null==k?c.length:
k;return yda(c,128,void 0,void 0,void 0,void 0,k)},lO={};Object.defineProperty(lO,"__esModule",{value:!0});lO.default=function(c){var k=c.types,d=function(n){return function(b){var e=n[b.type];if(e)return e(b);throw Error(b.type+" could not be transformed");}},h=function(n,b){var e=b.opts;b=e.useNew;var m=void 0===b?!1:b;b=e.module;var a=e.function;e=e.useVariables;var g=void 0===e?!1:e,l=e=void 0;!0===g?e=/^[A-Z]/:(0,Ada.default)(g)&&(e=new RegExp(g));var q=m?k.newExpression:k.callExpression;l=function(r){return function(u){return q(r,
[u])}};b?(m=n.scope.generateUidIdentifier(m?"JSXNode":"jsx"),l=l(m),b=k.importDeclaration([k.importDefaultSpecifier(m)],k.stringLiteral(b)),n.findParent(function(r){return r.isProgram()}).unshiftContainer("body",b)):a?(n=a.split(".").map((0,e1.default)(k.identifier,1)).reduce((0,e1.default)(k.memberExpression,2)),l=l(n)):l=Bda.default;return{variablesRegex:e,jsxObjectTransformer:l}};return{inherits:rba,visitor:{JSXElement:function(n,b){b.get("jsxConfig")||b.set("jsxConfig",h(n,b));var e=b.get("jsxConfig"),
m=e.variablesRegex,a=e.jsxObjectTransformer,g=function(B){return k.stringLiteral(B.name)},l=function(B){return k.stringLiteral(B.namespace.name+":"+B.name.name)},q=d({JSXIdentifier:function(B){return k.identifier(B.name)},JSXMemberExpression:function(B){return k.memberExpression(q(B.object),q(B.property))}}),r=d({JSXIdentifier:m?function(B){return m.test(B.name)?k.identifier(B.name):g(B)}:g,JSXNamespacedName:l,JSXMemberExpression:q});e=function(B){return B.expression};var u=d({JSXIdentifier:g,JSXNamespacedName:l,
JSXMemberExpression:q}),v=d({StringLiteral:function(B){return B},JSXExpressionContainer:e}),y=function(B){var G=[],E=[];B.forEach(function(K){switch(K.type){case "JSXAttribute":G||(G=[]);var J=u(K.name);J=Cda.default.keyword.isIdentifierNameES6(J.value)?k.identifier(J.value):J;G.push(k.objectProperty(J,v(K.value)));break;case "JSXSpreadAttribute":G&&(E.push(k.objectExpression(G)),G=null);E.push(K.argument);break;default:throw Error(K.type+" cannot be used as a JSX attribute");}});G&&0<G.length&&E.push(k.objectExpression(G));
return 0===E.length?k.objectExpression([]):1===E.length?E[0]:k.callExpression(b.addHelper("extends"),E)};l=function(B){return a(k.objectExpression([k.objectProperty(k.identifier(Dda),r(B.openingElement.name)),k.objectProperty(k.identifier(Eda),y(B.openingElement.attributes)),k.objectProperty(k.identifier(Fda),B.closingElement?A(B.children):k.nullLiteral())]))};var z=d({JSXText:function(B){if(b.opts.noTrim)return k.stringLiteral(B.value);B=B.value.replace(/\n\s*/g,"");return""===B?null:k.stringLiteral(B)},
JSXElement:l,JSXExpressionContainer:e}),A=function(B){return k.arrayExpression(B.map(z).filter(Boolean).reduce(function(G,E){var K=0<G.length?G[G.length-1]:null;return"StringLiteral"===E.type&&K&&"StringLiteral"===K.type?[].concat($y(G.slice(0,-1)),[k.stringLiteral(K.value+E.value)]):[].concat($y(G),[E])},[]))};n.replaceWith(l(n.node))}}}};var Ada=Ww(Fba),Bda=Ww(gO),e1=Ww(zda),Cda=Ww(RC),Dda="elementName",Eda="attributes",Fda="children",dD={};Object.defineProperty(dD,"__esModule",{value:!0});dD.declare=
function(c){return function(k,d,h){k.assertVersion||(k=Object.assign(Mt(k),{assertVersion:function(n){var b=k.version;if("number"===typeof n){if(!Number.isInteger(n))throw Error("Expected string or integer value.");n="^"+n+".0.0-0"}if("string"!==typeof n)throw Error("Expected string or integer value.");var e=Error.stackTraceLimit;"number"===typeof e&&25>e&&(Error.stackTraceLimit=25);var m="7."===b.slice(0,2)?Error('Requires Babel "^7.0.0-beta.41", but was loaded with "'+b+"\". You'll need to update your @babel/core version."):
Error('Requires Babel "'+n+'", but was loaded with "'+b+'". If you are sure you have a compatible version of @babel/core, it is likely that something in your build process is loading the wrong version. Inspect the stack trace of this error to look for the first entry that doesn\'t mention "@babel/core" or "babel-core" to see what is calling Babel.');"number"===typeof e&&(Error.stackTraceLimit=e);throw Object.assign(m,{code:"BABEL_VERSION_UNSUPPORTED",version:b,range:n});}}));return c(k,d||{},h)}};
var ey={};Object.defineProperty(ey,"__esModule",{value:!0});ey.default=void 0;var Gda=(0,dD.declare)(function(c){c.assertVersion(7);return{name:"syntax-optional-catch-binding",manipulateOptions:function(k,d){d.plugins.push("optionalCatchBinding")}}});ey.default=Gda;var CH={};Object.defineProperty(CH,"__esModule",{value:!0});CH.default=void 0;var Hda=ey&&ey.__esModule?ey:{default:ey},Ida=(0,dD.declare)(function(c){c.assertVersion(7);return{name:"proposal-optional-catch-binding",inherits:Hda.default,
visitor:{CatchClause:function(k){if(!k.node.param){var d=k.scope.generateUidIdentifier("unused");k.get("param").replaceWith(d)}}}}});CH.default=Ida;var DH={};Object.defineProperty(DH,"__esModule",{value:!0});DH.default=void 0;var Jda=(0,dD.declare)(function(c){c.assertVersion(7);return{name:"syntax-import-meta",manipulateOptions:function(k,d){d.plugins.push("importMeta")}}});DH.default=Jda;var Mi=lively.FreezerRuntime.recorderFor("lively.source-transform/index.js");Mi.ensureJSXPlugin=function(){Mi.transformJSX&&
("undefined"===typeof babel||babel.availablePlugins["transform-jsx"]||(lively||global.lively).FreezerRuntime||babel.registerPlugin("transform-jsx",Mi.transformJSX.default))};Mi.ensureOptionalCatchBinding=function(){Mi.catchBinding&&("undefined"===typeof babel||babel.availablePlugins["optional-catch-binding"]||(lively||global.lively).FreezerRuntime||babel.registerPlugin("optional-catch-binding",Mi.catchBinding.default))};Mi.ensureImportMeta=function(){Mi.importMeta&&("undefined"===typeof babel||babel.availablePlugins["syntax-import-meta"]||
(lively||global.lively).FreezerRuntime||babel.registerPlugin("syntax-import-meta",Mi.importMeta.default))};Mi.stringifyFunctionWithoutToplevelRecorder=Gn;Mi.es5Transpilation=vo;Mi.capturing=bD;Mi.capturing=bD;Mi.capturing=bD;Mi.parseFunction=pl;Mi.stringify=Uk;Mi.ReplaceVisitor=fr;Mi.transformJSX=lO;Mi.catchBinding=CH;Mi.importMeta=DH;Mi.stringifyFunctionWithoutToplevelRecorder=Gn;Mi.stringifyFunctionWithoutToplevelRecorder=Gn;Mi.es5Transpilation=vo;Mi.es5Transpilation=vo;var Kda=Object.freeze({__proto__:null,
capturing:bD,stringifyFunctionWithoutToplevelRecorder:Gn,es5Transpilation:vo}),hg=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-support.js");hg.processInlineCodeTransformOptions=function(c,k){if(!c.comments)return k;c=c.comments.find(function(h){return h.text.startsWith("lively.vm ")});if(!c)return k;try{var d=eval("inlineOptions = {"+c.text.slice(10)+"};");return Object.assign(k,d)}catch(h){return k}};hg.evalCodeTransform=Eq;hg.evalCodeTransformOfSystemRegisterSetters=$r;hg.copyProperties=
function(c,k,d){d=void 0===d?[]:d;Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c)).forEach(function(h){return-1===d.indexOf(h)&&Object.defineProperty(k,h,Object.getOwnPropertyDescriptor(c,h))})};hg.arr=vf;hg.Path=nh;hg.parse=Rd;hg.stringify=Uk;hg.transform=cy;hg.query=gr;hg.nodes=Au;hg.capturing=bD;hg.es5Transpilation=vo;hg.getGlobal=Zk;var EH=hg.nodes;hg.id=EH.id;hg.literal=EH.literal;hg.member=EH.member;hg.objectLiteral=EH.objectLiteral;hg.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";
hg.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";hg.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";hg.defaultClassToFunctionConverterName="initializeES6ClassForLively";hg.defaultClassToFunctionConverterName="initializeES6ClassForLively";hg.defaultClassToFunctionConverterName="initializeES6ClassForLively";hg.evalCodeTransform=Eq;hg.evalCodeTransform=Eq;hg.evalCodeTransformOfSystemRegisterSetters=$r;hg.evalCodeTransformOfSystemRegisterSetters=$r;var ug=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval.js");
ug._normalizeEvalOptions=function(c){c||(c={});c=Object.assign({targetModule:null,sourceURL:c.targetModule,runtime:null,context:ug.getGlobal(),varRecorderName:ug.defaultTopLevelVarRecorderName,dontTransform:[],recordGlobals:null,returnPromise:!0,promiseTimeout:200,waitForPromise:!0,wrapInStartEndCall:!1,onStartEval:null,onEndEval:null},c);if(c.targetModule){var k=c.runtime&&c.runtime.modules&&c.runtime.modules[c.targetModule];k&&(c=Object.assign(c,k))}c.wrapInStartEndCall&&(c.startFuncNode={type:"MemberExpression",
object:{type:"Identifier",name:c.varRecorderName},property:{type:"Literal",value:ug.startEvalFunctionName},computed:!0},c.endFuncNode={type:"MemberExpression",object:{type:"Identifier",name:c.varRecorderName},property:{type:"Literal",value:ug.endEvalFunctionName},computed:!0});return c};ug.runEval=qm;ug.finishEval=function(c,k,d,h,n,b,e){h.wrapInStartEndCall&&(delete n[ug.startEvalFunctionName],delete n[ug.endEvalFunctionName]);c?(d.isError=!0,d.value=c):d.value=k;d.value instanceof Promise&&(d.isPromise=
!0);if(h.sync){if(d.processSync(h),"function"===typeof h.onEndEval)h.onEndEval(c,k)}else d.process(h).then(function(){"function"===typeof e&&e(null,d);"function"===typeof h.onEndEval&&h.onEndEval(c,k);return d},function(m){"function"===typeof e&&e(m,void 0);"function"===typeof h.onEndEval&&h.onEndEval(m,void 0);return d}).then(b.resolve,b.reject)};ug.syncEval=Xw;ug.tryToWaitForPromise=function(c,k){console.assert(c.isPromise,"no promise in tryToWaitForPromise???");var d={},h=new Promise(function(n){return setTimeout(n,
k,d)});return Promise.race([h,c.value]).then(function(n){return Object.assign(c,n!==d?{promiseStatus:"fulfilled",promisedValue:n}:{promiseStatus:"pending"})}).catch(function(n){return Object.assign(c,{promiseStatus:"rejected",promisedValue:n})})};ug.arr=vf;ug.obj=Pf;ug.string=vh;ug.Path=nh;ug.promise=yg;ug.Closure=Ei;ug.evalCodeTransform=Eq;ug.printEvalResult=vp;ug.getGlobal=Zk;ug.defaultTopLevelVarRecorderName="__lvVarRecorder";ug.startEvalFunctionName="lively.vm-on-eval-start";ug.endEvalFunctionName=
"lively.vm-on-eval-end";ug._eval=ug.Closure.fromSource("function _eval(__lvEvalStatement, __lvVarRecorder/*needed as arg for capturing*/, __lvOriginalCode) {\n  return eval(__lvEvalStatement);\n}").getFunc();var eD=function(){this.isEvalResult=!0;this.value=void 0;this.warnings=[];this.isPromise=this.isError=!1;this.promisedValue=void 0;this.promiseStatus="unknown"};eD.prototype.addWarning=function(c){this.warnings.push(c);return c};eD.prototype.printed=function(c){c=void 0===c?{}:c;this.value=ug.printEvalResult(this,
c)};eD.prototype.processSync=function(c){if(c.inspect||c.asString)this.value=this.print(this.value,c);return this};eD.prototype.process=function(c){var k=this;if(k.isPromise&&c.waitForPromise)return ug.tryToWaitForPromise(k,c.promiseTimeout).then(function(){(c.inspect||c.asString)&&k.printed(c);return k});(c.inspect||c.asString)&&k.printed(c);return Promise.resolve(k)};ug.EvalResult=eD;var xA=ug.defaultTopLevelVarRecorderName;ug.defaultTopLevelVarRecorderName=xA;ug.defaultTopLevelVarRecorderName=
xA;ug.getGlobal=Zk;ug.getGlobal=Zk;ug.runEval=qm;ug.runEval=qm;ug.syncEval=Xw;ug.syncEval=Xw;var Lda=Object.freeze({__proto__:null,defaultTopLevelVarRecorderName:xA,getGlobal:Zk,runEval:qm,syncEval:Xw}),xh=lively.FreezerRuntime.recorderFor("lively.vm/lib/esm-eval.js");xh.ensureImportsAreImported=function(c,k,d){var h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(h=xh.parse(k),n=h.body,b=n.filter(function(m){return"ImportDeclaration"===m.type}),e.yield(Promise.all(b.map(function(m){return c.normalize(m.source.value,
d).then(function(a){m.source.value=a;return c.get(a)||c.import(a)})})).catch(function(m){console.error("Error ensuring imports: "+m.message);throw m;}),2)):e.return(xh.stringify(h))})};xh.hasUnimportedImports=function(c,k,d){k=xh.parse(k).body.filter(function(h){return"ImportDeclaration"===h.type});return 0<xh.arr.uniq(k.map(function(h){return h.source.value})).filter(Boolean).filter(function(h){return!c.get(c.decanonicalize(h,d))}).length};xh.babelTranspilerForAsyncAwaitCode=function(c,k,d,h){return function(n,
b){b=Object.assign({sourceMap:void 0,inputSourceMap:void 0,filename:d,code:!0,ast:!1},b);n=k.transform("(async function(__rec) {\n"+n+"\n}).call(this);",b).code;return n=n.replace(/\}\)\.call\(undefined\);$/,"}).call(this)")}};xh.babelPluginTranspilerForAsyncAwaitCode=function(c,k,d,h){return function(n,b){var e=c.babelOptions||{},m=[];m.push(k.presetES2015);e.stage3&&m.push({plugins:k.pluginsStage3});e.stage2&&m.push({plugins:k.pluginsStage2});e.stage1&&m.push({plugins:k.pluginsStage1});b=Object.assign({sourceMap:void 0,
inputSourceMap:void 0,filename:d,babelrc:!1,presets:m,moduleIds:!1,code:!0,ast:!1},b);n=k.babel.transform("(async function(__rec) {\n"+n+"\n}).call(this);",b).code;return n=n.replace(/\}\)\.call\(undefined\);$/,"}).call(this)")}};xh.getEs6Transpiler=function(c,k,d){if(k.transpiler)return k.transpiler;if(!k.es6Transpile)return null;if("babel"===c.transpiler){var h=c.global[c.transpiler]||c.get(c.decanonicalize(c.transpiler));return h?xh.babelTranspilerForAsyncAwaitCode(c,h,k.targetModule,d):c.import(c.transpiler).then(function(e){return xh.babelTranspilerForAsyncAwaitCode(c,
e,k.targetModule,d)})}if("plugin-babel"===c.transpiler){h=c.decanonicalize("plugin-babel").split("/").slice(0,-1).concat("systemjs-babel-browser.js").join("/");var n=c.get(h);return n?xh.babelPluginTranspilerForAsyncAwaitCode(c,n,k.targetModule,d):c.import(h).then(function(e){return xh.babelPluginTranspilerForAsyncAwaitCode(c,e,k.targetModule,d)})}if("lively.transpiler"===c.transpiler){var b=new (c.get(c.decanonicalize("lively.transpiler")).default)(c,k.targetModule,d);return function(e,m){return b.transpileDoit(e,
m)}}throw Error("Sorry, currently only babel is supported as es6 transpiler for runEval!");};xh.runEval=Hn;xh.evalEnd=function(c,k,d,h){c.get("@lively-env").evaluationEnd(d.targetModule);c.debug&&console.log("[lively.module] runEval in module "+d.targetModule+" done");xh.emit("lively.vm/doitresult",{code:k,result:h,waitForPromise:d.waitForPromise,targetModule:d.targetModule},Date.now(),c);return h};xh.parse=Rd;xh.nodes=Au;xh.stringify=Uk;xh.emit=qk;var FH=xh.nodes;xh.funcCall=FH.funcCall;xh.member=
FH.member;xh.id=FH.id;xh.literal=FH.literal;xh.arr=vf;xh.vmRunEval=qm;xh.runEval=Hn;xh.runEval=Hn;var Mda=Object.freeze({__proto__:null,runEval:Hn}),$i=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-strategies.js");$i.obj=Pf;var yA=function(){};yA.prototype.runEval=function(c,k){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(Promise.reject("runEval(source, options) not yet implemented for "+d.constructor.name))})};yA.prototype.keysOfObject=function(c,
k){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(Promise.reject("keysOfObject(prefix, options) not yet implemented for "+d.constructor.name))})};$i.EvalStrategy=yA;var fy=function(){return $i.EvalStrategy.apply(this,arguments)||this};$jscomp.inherits(fy,$i.EvalStrategy);fy.prototype.runEval=function(c,k){return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return d.return(Promise.resolve().then(function(){try{return Promise.resolve({value:eval(c)})}catch(h){return{isError:!0,
value:h}}}))})};fy.prototype.keysOfObject=function(c,k){var d=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(lively.vm.completions.getCompletions(function(b){return d.runEval(b,k)},c),2);h=n.yieldResult;return n.return({completions:h.completions,prefix:h.startLetters})})};$i.SimpleEvalStrategy=fy;var jw=function(){return $i.EvalStrategy.apply(this,arguments)||this};$jscomp.inherits(jw,$i.EvalStrategy);jw.prototype.normalizeOptions=function(c){if(!c.targetModule)throw Error("runEval called but options.targetModule not specified!");
return Object.assign({sourceURL:c.targetModule+"_doit_"+Date.now()},c)};jw.prototype.runEval=function(c,k){var d=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){k=d.normalizeOptions(k);h=k.System||lively.modules.System;n={};h.config({meta:(n[k.targetModule]={format:"esm"},n)});return b.return(lively.vm.runEval(c,k))})};jw.prototype.keysOfObject=function(c,k){var d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield(lively.vm.completions.getCompletions(function(n){return lively.vm.runEval(n,
k)},c),2);d=h.yieldResult;return h.return({completions:d.completions,prefix:d.startLetters})})};$i.LivelyVmEvalStrategy=jw;var kw=function(){return $i.LivelyVmEvalStrategy.apply(this,arguments)||this};$jscomp.inherits(kw,$i.LivelyVmEvalStrategy);kw.prototype.sourceForRemote=function(c,k,d){var h=$i.obj.isString(d.context)?d.context:!1;d=$i.obj.dissoc(d,["systemInterface","System","context","classTransform"]);return"\n(function() {\n  var arg = "+JSON.stringify(k)+",\n      options = "+JSON.stringify(d)+
';\n  if (typeof lively === "undefined" || !lively.vm) {\n    return Promise.resolve({\n      isEvalResult: true,\n      isError: true,\n      value: \'lively.vm not available!\'\n    });\n  }\n  var hasSystem = typeof System !== "undefined"\n  options.context = '+h+';\n  options.classTransform = lively.classes.classToFunctionTransform;\n  if (!options.context) {\n    options.context = hasSystem\n      ? System.global\n      : typeof window !== "undefined"\n          ? window\n          : typeof global !== "undefined"\n              ? global\n              : typeof self !== "undefined" ? self : this;\n  }\n  async function evalFunction(source, options) {\n    if (hasSystem) {\n      var conf = {meta: {}}; conf.meta[options.targetModule] = {format: "esm"};\n      System.config(conf);\n    } else {\n      options = Object.assign({topLevelVarRecorderName: "GLOBAL"}, options);\n      delete options.targetModule;\n    }\n    let res = await lively.vm.runEval(source, options);\n    try {\n       JSON.stringify(res.value);\n    } catch(e) {\n       res.value = String(res.value);\n    }\n    return res;\n  }\n  function keysOfObjectFunction(prefix, options) {\n    return lively.vm.completions.getCompletions(code => evalFunction(code, options), prefix)\n      .then(result => ({isEvalResult: true, completions: result.completions, prefix: result.startLetters}));\n  }\n  return '+
("eval"===c?"evalFunction":"keysOfObjectFunction")+"(arg, options)\n    .catch(err => ({isEvalResult: true, isError: true, value: String(err.stack || err)}));\n})();\n"};kw.prototype.runEval=function(c,k){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d.remoteEval(d.sourceForRemote("eval",c,k),k))})};kw.prototype.keysOfObject=function(c,k){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d.remoteEval(d.sourceForRemote("keysOfObject",
c,k),k))})};kw.prototype.remoteEval=function(c,k){var d=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.setCatchFinallyBlocks(2),b.yield(d.basicRemoteEval(c,k),4);if(2!=b.nextAddress)return h=b.yieldResult,b.return("string"===typeof h?JSON.parse(h):h);n=b.enterCatchBlock();return b.return({isError:!0,value:"Remote eval failed: "+(h||n)})})};kw.prototype.basicRemoteEval=function(c,k){return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){throw Error("Not yet implemented");
})};$i.RemoteEvalStrategy=kw;var Ps=function(c){var k=$i.RemoteEvalStrategy.call(this)||this;k.url=c||k.constructor.defaultURL;return k};$jscomp.inherits(Ps,$i.RemoteEvalStrategy);Ps.prototype.normalizeOptions=function(c){c=$i.RemoteEvalStrategy.prototype.normalizeOptions.call(this,c);return Object.assign({serverEvalURL:this.url},c,{context:null})};Ps.prototype.basicRemoteEval=function(c,k){var d=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?(k=d.normalizeOptions(k),
h="basicRemoteEval_"+(System.get("@system-env").node?"node":"web"),n.yield(d[h]({method:"POST",body:c},k.serverEvalURL),2)):n.return(n.yieldResult)})};Ps.prototype.basicRemoteEval_web=function(c,k){var d,h,n,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:d=$jscomp.makeIterator(k.match(/[^:]+:\/\/[^\/]+/)||[k]);h=d.next().value;n=System.get("@system-env").worker?window.location:document.location;if(b=n.origin!==h)c.headers=Object.assign({},c.headers,
{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":k}),k=n.origin;a.setCatchFinallyBlocks(2);return a.yield(window.fetch(k,c),4);case 4:e=a.yieldResult;a.leaveTryBlock(3);break;case 2:throw m=a.enterCatchBlock(),Error("Cannot reach server at "+k+": "+m.message);case 3:if(!e.ok)throw Error("Server at "+k+": "+e.statusText);return a.return(e.text())}})};Ps.prototype.basicRemoteEval_node=function(c,k){var d,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){d=System._nodeRequire("url").parse;
h=System._nodeRequire(k.startsWith("https:")?"https":"http");n=Object.assign({method:c.method||"GET"},d(k));return b.return(new Promise(function(e,m){var a=h.request(n,function(g){g.setEncoding("utf8");var l="";g.on("data",function(q){return l+=q});g.on("end",function(){return e(l)});g.on("error",function(q){return m(q)})});a.on("error",function(g){return m(g)});a.end(c.body)}))})};$jscomp.global.Object.defineProperties(Ps,{defaultURL:{configurable:!0,enumerable:!0,get:function(){return"http://localhost:3000/lively"}}});
$i.HttpEvalStrategy=Ps;var zA=function(c,k){var d=$i.RemoteEvalStrategy.call(this)||this;d.l2lClient=c;d.targetId=k;return d};$jscomp.inherits(zA,$i.RemoteEvalStrategy);zA.prototype.basicRemoteEval=function(c,k){var d=this,h,n,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return h=d,n=h.l2lClient,b=h.targetId,a.yield(n.sendToAndWait(b,"remote-eval",{source:c},{ackTimeout:k.ackTimeout||3500}),2);e=a.yieldResult;(m=e.data)&&m.value&&m.value.isEvalResult&&(m=
m.value);return a.return(m)})};$i.L2LEvalStrategy=zA;$i.EvalStrategy=yA;$i.EvalStrategy=yA;$i.SimpleEvalStrategy=fy;$i.SimpleEvalStrategy=fy;$i.LivelyVmEvalStrategy=jw;$i.LivelyVmEvalStrategy=jw;$i.HttpEvalStrategy=Ps;$i.HttpEvalStrategy=Ps;$i.L2LEvalStrategy=zA;$i.L2LEvalStrategy=zA;var fD=Object.freeze({__proto__:null,RemoteEvalStrategy:kw,EvalStrategy:yA,SimpleEvalStrategy:fy,LivelyVmEvalStrategy:jw,HttpEvalStrategy:Ps,L2LEvalStrategy:zA});sa("bx",fD);var Vj=lively.FreezerRuntime.recorderFor("lively.vm/index.js");
Vj.runEval=al;Vj.syncEval=xp;Vj.completions=aD;Vj.completions=aD;Vj.completions=aD;Vj.globalEval=Lda;Vj.esmEval=Mda;Vj.defaultTopLevelVarRecorderName=xA;Vj.defaultTopLevelVarRecorderName=xA;Vj.defaultClassToFunctionConverterName="initializeES6ClassForLively";Vj.defaultClassToFunctionConverterName="initializeES6ClassForLively";Vj.evalCodeTransform=Eq;Vj.evalCodeTransform=Eq;Vj.evalCodeTransformOfSystemRegisterSetters=$r;Vj.evalCodeTransformOfSystemRegisterSetters=$r;Vj.runEval=al;Vj.runEval=al;Vj.syncEval=
xp;Vj.syncEval=xp;Vj.evalStrategies=fD;Vj.evalStrategies=fD;Vj.evalStrategies=fD;var f1=Object.freeze({__proto__:null,completions:aD,defaultTopLevelVarRecorderName:xA,defaultClassToFunctionConverterName:"initializeES6ClassForLively",evalCodeTransform:Eq,evalCodeTransformOfSystemRegisterSetters:$r,runEval:al,syncEval:xp,evalStrategies:fD});sa("bw",f1);var Zh=lively.FreezerRuntime.recorderFor("lively.classes/source-descriptors.js");Zh.string=vh;Zh.arr=vf;Zh.parse=Rd;Zh.query=gr;Zh.runEval=al;Zh.objMetaSym=
Symbol.for("lively-object-meta");Zh.moduleSym=Symbol.for("lively-module-meta");Zh.descriptorCache=new Map;var AA=function(c,k){c&&k?this.update(k,c):this.reset()};AA.prototype.reset=function(){this._sourceLocation=null;this._source="";this._ast=null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};AA.prototype.update=function(c,k){this._moduleSource===c&&k&&this._sourceLocation&&k.start===this._sourceLocation.start&&k.end===this._sourceLocation.end||
(this.reset(),this._moduleSource=c,this._sourceLocation=k)};AA.prototype.changeSource=function(c){var k=this.moduleSource,d=this.sourceLocation,h=d.start;d=d.end;k=k.slice(0,h)+c+k.slice(d);this.update(k,{start:h,end:h+c.length});this._source=c;return this};AA.prototype.toString=function(){var c=Zh.string.truncate(this._source||"NO SOURCE",35).replace(/\n/g,"");return this.constructor.name+"("+c+")"};$jscomp.global.Object.defineProperties(AA.prototype,{sourceLocation:{configurable:!0,enumerable:!0,
get:function(){if(!this._sourceLocation)throw Error("_sourceLocation not defined");return this._sourceLocation}},moduleSource:{configurable:!0,enumerable:!0,get:function(){if(!this._moduleSource)throw Error("_moduleSource not defined!");return this._moduleSource}},moduleAst:{configurable:!0,enumerable:!0,get:function(){return this._moduleAst||(this._moduleAst=Zh.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){return this._moduleScope||(this._moduleScope=
Zh.query.topLevelDeclsAndRefs(this.ast).scope)}},moduleImports:{configurable:!0,enumerable:!0,get:function(){return this._moduleImports||(this._moduleImports=Zh.query.imports(this.moduleScope))}},ast:{configurable:!0,enumerable:!0,get:function(){if(this._ast)return this._ast;var c=Zh.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===c.type&&(c=c.expression);return this._ast=c}},source:{configurable:!0,enumerable:!0,get:function(){if(this._source)return this._source;var c=this.sourceLocation;
return this._source=this.moduleSource.slice(c.start,c.end)}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var c=this.ast,k=Zh.query.topLevelDeclsAndRefs(this.moduleAst).declaredNames,d=Zh.arr.uniq(this.moduleImports.map(function(n){return n.local})),h=Zh.arr.withoutAll(k,d);c=Zh.arr.withoutAll(Zh.query.findGlobalVarRefs(c).map(function(n){return n.name}),
k);return this._declaredAndUndeclaredNames={declaredNames:k,declaredImports:d,localDeclaredNames:h,undeclaredNames:c}}}});Zh.SourceDescriptor=AA;var ao=function(c,k){this.obj=c;this.System=k;this.reset()};ao.forObjectWithModuleSource=function(c,k,d){c=this.for(c,d);c.ensureSourceDescriptor(c.sourceLocation,k);return c};ao.for=function(c,k){var d=Zh.descriptorCache.get(c);d||(d=new this(c,k),Zh.descriptorCache.set(c,d));return d};ao.prototype.reset=function(){this._source="";this._ast=this._sourceLocation=
null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};ao.prototype.resetIfChanged=function(){var c=this.meta.moduleSource;this._moduleSource&&c&&this._moduleSource!==c&&this.reset()};ao.prototype.changeSourceSync=function(c){var k=this.System;this._basicChangeSource(c);this.module.changeSource(this.moduleSource,{doSave:!0});c=Zh.runEval(c,{sync:!0,targetModule:this.module.id,System:k});if(c.isError)throw c.value;return this};ao.prototype.changeSource=
function(c){var k=this,d,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?(d=k,h=d.module,n.yield(h.changeSourceAction(function(b){if(b!==k.moduleSource)throw Error("source of module "+h.id+" and source of "+k+" don't match");k._basicChangeSource(c);return k.moduleSource}),2)):n.return(k)})};ao.prototype._modifiedSource=function(c){var k=this.moduleSource,d=this.sourceLocation,h=d.start;d=d.end;return{moduleSource:k.slice(0,h)+c+k.slice(d),sourceLocation:{start:h,
end:h+c.length}}};ao.prototype._renamedSource=function(c){var k=this.ast,d=k.type,h=k.id;k=h.start;h=h.end;if("ClassDeclaration"!==d)throw Error("Don't know how to rename "+d);return this._modifiedSource(this.source.slice(0,k)+c+this.source.slice(h))};ao.prototype._basicChangeSource=function(c){var k=this.meta,d=this._modifiedSource(c),h=d.moduleSource;d=d.sourceLocation;this.reset();this.meta=Object.assign({},k,{moduleSource:h},d);this._sourceLocation=d;this._moduleSource=h;this._source=c;return this};
ao.prototype.toString=function(){var c=Zh.string.truncate(this.source||String(this.obj),35).replace(/\n/g,"");try{var k=this.module.shortName()}catch(d){k="NO MODULE!"}return this.constructor.name+"("+c+" in "+k+")"};$jscomp.global.Object.defineProperties(ao.prototype,{System:{configurable:!0,enumerable:!0,get:function(){return this._System||System},set:function(c){this._System=c}},module:{configurable:!0,enumerable:!0,get:function(){var c=this.obj,k=this.System;if(!c[Zh.moduleSym])throw Error("runtime object of source descriptor has no module data");
var d=c[Zh.moduleSym];c=d.package.name;d=d.pathInPackage;c=d.includes("://")?d:c+"/"+d;k=this.System._scripting.module(k,c);k._frozenModule||k._source||!this.moduleSource||k.setSource(this.moduleSource);return k}},meta:{configurable:!0,enumerable:!0,get:function(){var c=this.obj;if(!c[Zh.objMetaSym])throw Error("runtime object of source descriptor has no lively meta data");return c[Zh.objMetaSym]},set:function(c){this.obj[Zh.objMetaSym]=c;c.hasOwnProperty("start")&&c.hasOwnProperty("end")&&(this._sourceLocation=
{start:c.start,end:c.end});c.hasOwnProperty("moduleSource")&&(this._moduleSource=c.moduleSource)}},sourceLocation:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._sourceLocation)return this._sourceLocation;var c=this.meta,k=c.start;c=c.end;if(void 0===k||void 0===c)throw Error("lively meta data has no start/end");return this._sourceLocation={start:k,end:c}}},moduleSource:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._moduleSource)return this._moduleSource;
var c=this.meta.moduleSource;if(void 0===c)throw Error("lively meta data has no moduleSource");return this._moduleSource=c}},moduleAst:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleAst||(this._moduleAst=Zh.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleScope||(this._moduleScope=Zh.query.topLevelDeclsAndRefs(this.moduleAst).scope)}},moduleImports:{configurable:!0,
enumerable:!0,get:function(){this.resetIfChanged();return this._moduleImports||(this._moduleImports=Zh.query.imports(this.moduleScope))}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var c=this.ast,k=Zh.query.topLevelDeclsAndRefs(this.moduleAst,{jslintGlobalComment:!0}).declaredNames,d=Zh.arr.uniq(this.moduleImports.map(function(n){return n.local})),h=Zh.arr.withoutAll(k,d);
c=Zh.arr.withoutAll(Zh.query.findGlobalVarRefs(c).map(function(n){return n.name}),k);return this._declaredAndUndeclaredNames={declaredNames:k,declaredImports:d,localDeclaredNames:h,undeclaredNames:c}}},source:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._source)return this._source;var c=this.sourceLocation;return this._source=this.moduleSource.slice(c.start,c.end)}},ast:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._ast)return this._ast;
var c=Zh.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===c.type&&(c=c.expression);return this._ast=c}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},name:{configurable:!0,enumerable:!0,get:function(){if("ClassDeclaration"===this.type){var c=this.ast.id;return this.source.slice(c.start,c.end)}return"unknown"}}});sa("bH",ao);Zh.RuntimeSourceDescriptor=ao;var af=lively.FreezerRuntime.recorderFor("lively.classes/util.js");af.superclasses=bz;af.getClassHierarchy=
bl;af.withSuperclasses=as;af.inheritsFrom=In;af.changeClass=cz;af.isClass=Gq;af.lexicalClassMembers=Nt;af.runtimeClassMembers=Hq;af.runtimeClassMembersInProtoChain=function(c){return af.arr.uniq(af.arr.flatmap(af.arr.without(af.withSuperclasses(c),Object),function(k){return af.runtimeClassMembers(k)}))};af.runtimeNonStaticMembers=function(c){var k=c.prototype,d=af.obj.getOwnPropertyDescriptors(k);return af.arr.withoutAll(Object.keys(d),["constructor"]).map(function(h){var n=d[h],b="function"===typeof n.value?
"method":"get"in n?"get":"set"in n?"set":"unknown";return{static:!1,name:h,value:"method"===b?n.value:"get"===b?n.get:"set"===b?n.set:null,kind:b,owner:k}})};af.runtimeNonstaticClassMembersInProtoChain=function(c){return af.arr.uniq(af.arr.flatmap(af.arr.without(af.withSuperclasses(c),Object),function(k){return af.runtimeNonStaticMembers(k)}))};af.runtimeStaticClassMembers=Iq;af.runtimeStaticClassMembersInProtoChain=Ot;af.arr=vf;af.obj=Pf;af.Path=nh;af.RuntimeSourceDescriptor=ao;af.superclasses=bz;
af.superclasses=bz;var GH=Symbol.for("lively-instance-initialize");af.initializeSymbol=GH;af.initializeSymbol=GH;af.initializeSymbol=GH;var mO=Symbol.for("lively-instance-restorer");af.instanceRestorerSymbol=mO;af.instanceRestorerSymbol=mO;af.instanceRestorerSymbol=mO;var HH=Symbol.for("lively-instance-superclass");af.superclassSymbol=HH;af.superclassSymbol=HH;af.superclassSymbol=HH;var IH=Symbol.for("lively-module-meta");af.moduleMetaSymbol=IH;af.moduleMetaSymbol=IH;af.moduleMetaSymbol=IH;var JH=
Symbol.for("lively-object-meta");af.objMetaSymbol=JH;af.objMetaSymbol=JH;af.objMetaSymbol=JH;var KH=Symbol.for("lively-klass-changes-subscriber");af.moduleSubscribeToToplevelChangesSym=KH;af.moduleSubscribeToToplevelChangesSym=KH;af.moduleSubscribeToToplevelChangesSym=KH;af.getClassHierarchy=bl;af.getClassHierarchy=bl;af.withSuperclasses=as;af.withSuperclasses=as;af.inheritsFrom=In;af.inheritsFrom=In;af.changeClass=cz;af.changeClass=cz;af.isClass=Gq;af.isClass=Gq;af.lexicalClassMembers=Nt;af.lexicalClassMembers=
Nt;af.runtimeClassMembers=Hq;af.runtimeClassMembers=Hq;af.runtimeStaticClassMembers=Iq;af.runtimeStaticClassMembers=Iq;af.runtimeStaticClassMembersInProtoChain=Ot;af.runtimeStaticClassMembersInProtoChain=Ot;var nO=sa("bI",function(){function c(e){return e.replace(b,function(m,a){return a[a.length-1].toUpperCase()})}var k="break case catch class const continue debugger default delete do else enum export extends false finally for function if implements import in instanceof interface let new null package private protected public return static switch super this throw true try typeof undefined var void while with yield".split(" "),
d={"~":"_tilde_","`":"_backtick_","!":"_exclamationmark_","@":"_at_","#":"_pound_","%":"_percent_","^":"_carat_","&":"_amperstand_","*":"_asterisk_","(":"_leftparen_",")":"_rightparen_","+":"_plus_","=":"_equals_","{":"_leftcurly_","}":"_rightcurly_","[":"_leftsquare_","]":"_rightsquare_","|":"_pipe_","-":"_dash_","\\":"_backslash_",'"':"_doublequote_","'":"_singlequote_",":":"_colon_",";":"_semicolon_","<":"_leftangle_",">":"_rightangle_",",":"_comma_",".":"_period_","?":"_questionmark_","/":"_forwardslash_",
"\t":"_tab_","\n":"_newline_","\r":"_carriagereturn_"},h={0:"_zero_",1:"_one_",2:"_two_",3:"_three_",4:"_four_",5:"_five_",6:"_siz_",7:"_seven_",8:"_eight_",9:"_nine_"},n=function(e){return d[e]||"ASCII_"+e.charCodeAt(0)},b=/([\s-]+.)/g;return function(e){e=c(e);return 0<=k.indexOf(e)?e:0===e.length?"_null_":e.replace(/^\d/,function(m){return h[m]}).replace(/[^\w\$_]/g,n)}}());af.toJsIdentifier=nO;af.toJsIdentifier=nO;af.toJsIdentifier=nO;var bi=lively.FreezerRuntime.recorderFor("lively.classes/properties.js");
bi.hasManagedProperties=function(c){return c.hasOwnProperty(bi.defaultPropertiesKey)};bi.prepareClassForManagedPropertiesAfterCreation=Pt;bi.prepareClassForProperties=function(c,k,d){bi.ensurePropertyInitializer(c);var h=k.valueStoreProperty,n=k.defaultGetter,b=k.defaultSetter,e=c.prototype;Object.keys(d).forEach(function(m){var a=d[m],g=e.hasOwnProperty(m)&&e.__lookupGetter__(m);if(!g||g._wasGenerated)g=a.get||"function"===typeof n&&function(){return n.call(this,m)}||function(){return this[h][m]},
g._wasGenerated=!0,e.__defineGetter__(m,g);g=e.hasOwnProperty(m)&&e.__lookupSetter__(m);if(!g||g._wasGenerated)if(a.hasOwnProperty("set")||!a.readOnly)a=a.set||"function"===typeof b&&function(l){b.call(this,m,l)}||function(l){this[h][m]=l},a._wasGenerated=!0,e.__defineSetter__(m,a)})};bi.ensurePropertyInitializer=function(c){Object.defineProperty(c.prototype,"propertiesAndPropertySettings",{enumerable:!1,configurable:!0,writable:!0,value:function(){var k=this.constructor,d=k[bi.propertiesAndSettingsCacheSym];
if(d)if(d.classHierarchy!=bi.getClassHierarchy(k)){var h=bi.propertiesAndSettingsInHierarchyOf(k);d=h.properties;h=h.propertySettings;k[bi.propertiesAndSettingsCacheSym]={properties:d,propertySettings:h,order:bi.obj.sortKeysWithBeforeAndAfterConstraints(d),classHierarchy:bi.getClassHierarchy(k)};bi.prepareClassForProperties(k,h,d)}else return d;return k[bi.propertiesAndSettingsCacheSym]||bi.propertiesAndSettingsInHierarchyOf(k)}});Object.defineProperty(c.prototype,"initializeProperties",{enumerable:!1,
configurable:!0,writable:!0,value:function(k){var d=this.propertiesAndPropertySettings();bi.prepareInstanceForProperties(this,d.propertySettings,d.properties,k,d.order);return this}})};bi.propertiesAndSettingsInHierarchyOf=function(c){for(var k=Object.assign({},bi.defaultPropertySettings),d={},h=bi.obj.valuesInPropertyHierarchy(c,"propertySettings"),n=bi.obj.valuesInPropertyHierarchy(c,"properties"),b=0;b<h.length;b++){var e=h[b];e&&"object"===typeof e&&Object.assign(k,e)}for(b=0;b<n.length;b++)if(h=
n[b],"object"!==typeof h)console.error("[initializeProperties] "+c+" encountered property declaration that is not a JS object: "+h);else for(var m in h)d.hasOwnProperty(m)?Object.assign(d[m],h[m]):d[m]=h[m];return{properties:d,propertySettings:k}};bi.prepareInstanceForProperties=function(c,k,d,h,n){var b=k.valueStoreProperty;n=n||bi.obj.sortKeysWithBeforeAndAfterConstraints(d);k=[];var e={};c.hasOwnProperty(b)||(c[b]={});for(var m=0;m<n.length;m++){var a=n[m],g=d[a],l=g.derived,q=!!g.foldable,r=g.hasOwnProperty("defaultValue")?
g.defaultValue:void 0;Array.isArray(r)&&(r=r.slice());l||q||(c[b][a]=r);var u=void 0;g.hasOwnProperty("initialize")?(u=e[a]={initialize:r},k.push(a)):l&&void 0!==r?(u=e[a]={derived:r},k.push(a)):q&&void 0!==r&&(u=e[a]={folded:r},k.push(a));h&&a in h&&(g.readOnly?console.warn("Trying to initialize read-only property "+a+" in "+c+", skipping setting value"):(u||(u=e[a]={},k.push(a)),u.value=h[a]))}for(m=0;m<k.length;m++)h=k[m],n=e[h],b=n.hasOwnProperty("value"),n.hasOwnProperty("initialize")?(d[h].initialize.call(c,
b?n.value:n.initialize),b&&(c[h]=n.value)):n.hasOwnProperty("derived")?c[h]=b?n.value:n.derived:n.hasOwnProperty("folded")?c[h]=b?n.value:n.folded:b&&(c[h]=n.value)};bi.obj=Pf;bi.getClassHierarchy=bl;bi.defaultPropertiesSettingKey="propertySettings";bi.defaultPropertiesKey="properties";bi.defaultInstanceInitializerMethod="initializeProperties";bi.propertiesAndSettingsCacheSym=Symbol.for("lively.classes-properties-and-settings");bi.defaultPropertySettings={defaultSetter:null,defaultGetter:null,valueStoreProperty:"_state"};
bi.prepareClassForManagedPropertiesAfterCreation=Pt;bi.prepareClassForManagedPropertiesAfterCreation=Pt;var Hf=lively.FreezerRuntime.recorderFor("lively.classes/runtime.js");Hf.adoptObject=wo;Hf.setSuperclass=Qt;Hf.installValueDescriptor=function(c,k,d){d=Object.assign(d,Hf.defaultPropertyDescriptorForValue);d.value.displayName=d.key;if(d.needsDeclaringClass){var h=d.value.originalFunction||d.value;d.value=Object.assign(function(){return h.call.apply(h,[this,k].concat($jscomp.arrayFromIterable(arguments)))},
{originalFunction:h,toString:function(){return h.toString()},displayName:d.key})}Object.defineProperty(c,d.key,d)};Hf.installGetterSetterDescriptor=function(c,k){k=Object.assign(k,Hf.defaultPropertyDescriptorForGetterSetter);Object.defineProperty(c,k.key,k)};Hf.installMethods=function(c,k,d){d&&d.forEach(function(e){e.value?Hf.installValueDescriptor(c,c,e):Hf.installGetterSetterDescriptor(c,e)});k&&k.forEach(function(e){e.value?Hf.installValueDescriptor(c.prototype,c,e):Hf.installGetterSetterDescriptor(c.prototype,
e)});c.prototype[Hf.initializeSymbol]?Object.getOwnPropertySymbols(c.prototype).includes(Hf.initializeSymbol)&&c.prototype[Hf.initializeSymbol].isDefaultInitializer&&c[Hf.superclassSymbol].prototype[Hf.initializeSymbol]&&delete c.prototype[Hf.initializeSymbol]:(Object.defineProperty(c.prototype,Hf.initializeSymbol,{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),c.prototype[Hf.initializeSymbol].isDefaultInitializer=!0,c.prototype[Hf.initializeSymbol].displayName="lively-initialize");
k=k.map(function(e){return e.key}).concat(["constructor","arguments","caller"]);for(var h=Object.getOwnPropertyNames(c.prototype),n=0;n<h.length;n++){var b=h[n];k.includes(b)||delete c.prototype[b]}d=d.map(function(e){return e.key}).concat(["length","name","prototype","arguments","caller"]);k=Object.getOwnPropertyNames(c);for(h=0;h<k.length;h++)n=k[h],d.includes(n)||delete c[n]};Hf.ensureInitializeStub=function(c){c===Object||c.prototype[Hf.initializeSymbol]||(Object.defineProperty(c.prototype,Hf.initializeSymbol,
{enumerable:!1,configurable:!0,writable:!0,value:function(){c.apply(this,arguments)}}),c.prototype[Hf.initializeSymbol].displayName="lively-initialize-stub")};Hf.initializeClass=Sb;Hf.prepareClassForManagedPropertiesAfterCreation=Pt;Hf.superclassSymbol=HH;Hf.moduleSubscribeToToplevelChangesSym=KH;Hf.moduleMetaSymbol=IH;Hf.objMetaSymbol=JH;Hf.initializeSymbol=GH;Hf.constructorArgMatcher=/\([^\\)]*\)/;Hf.defaultPropertyDescriptorForGetterSetter={enumerable:!1,configurable:!0};Hf.defaultPropertyDescriptorForValue=
{enumerable:!1,configurable:!0,writable:!0};var LH="function"===typeof Object.setPrototypeOf?function(c,k){return Object.setPrototypeOf(c,k)}:function(c,k){return c.__proto__=k};Hf.setPrototypeOf=LH;Hf.setPrototypeOf=LH;Hf.setPrototypeOf=LH;Hf.adoptObject=wo;Hf.adoptObject=wo;Hf.setSuperclass=Qt;Hf.setSuperclass=Qt;Hf.initializeClass=Sb;Hf.initializeClass=Sb;Hf.initializeClass._get=function n(k,d,h){null===k&&(k=Function.prototype);var b=Object.getOwnPropertyDescriptor(k,d);if(void 0===b)return k=
Object.getPrototypeOf(k),null===k?void 0:n(k,d,h);if("value"in b)return b.value;d=b.get;return void 0===d?void 0:d.call(h)};Hf.initializeClass._set=function e(d,h,n,b){var m=Object.getOwnPropertyDescriptor(d,h);void 0===m?(d=Object.getPrototypeOf(d),null!==d&&e(d,h,n,b)):"value"in m&&m.writable?m.value=n:(h=m.set,void 0!==h&&h.call(b,n));return n};var BA=Object.freeze({__proto__:null,setPrototypeOf:LH,adoptObject:wo,setSuperclass:Qt,initializeClass:Sb}),sd=lively.FreezerRuntime.recorderFor("lively.graphics/color-parser.js");
sd.parse=Rt;sd.Color=function(d){this._listeners={};this.subscribe(sd.Events.RGB_UPDATED,this._RGBUpdated);this.subscribe(sd.Events.HEX_UPDATED,this._HEXUpdated);this.subscribe(sd.Events.HSL_UPDATED,this._HSLUpdated);this.subscribe(sd.Events.HSV_UPDATED,this._HSVUpdated);this.subscribe(sd.Events.INT_UPDATED,this._INTUpdated);this.parse(d)};sd.parse=Rt;sd.parse=Rt;sd.Events={RGB_UPDATED:"RGBUpdated",HSL_UPDATED:"HSLUpdated",HSV_UPDATED:"HSVUpdated",HEX_UPDATED:"HexUpdated",INT_UPDATED:"IntUpdated",
UPDATED:"updated"};sd.namedColors={transparent:"rgba(0, 0, 0, 0)",aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",
darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",
fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",
lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370D8",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",
mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#D87093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",
sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE"};sd.absround=function(d){return.5+d<<0};sd.hue2rgb=function(d,h,n){0>n&&(n+=1);1<n&&--n;return n<1/6?d+6*(h-d)*n:.5>n?h:n<2/3?d+(h-d)*(2/3-n)*6:d};sd.p2v=function(d){return sd.isPercent.test(d)?
sd.absround(2.55*parseInt(d)):d};sd.isHex=/^#?([0-9a-f]{3}|[0-9a-f]{6})$/i;sd.isHSL=/^hsla?\((\d{1,3}?),\s*(\d{1,3}%),\s*(\d{1,3}%)(,\s*[01]?\.?\d*)?\)$/;sd.isRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*[01]?\.?\d*)?\)$/;sd.isPercent=/^\d+(\.\d+)*%$/;sd.hexBit=/([0-9a-f])/gi;sd.leadHex=/^#/;sd.matchHSL=/^hsla?\((\d{1,3}),\s*(\d{1,3})%,\s*(\d{1,3})%(,\s*([01]?\.?\d*))?\)$/;sd.matchRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*([01]?\.?\d*))?\)$/;sd.Color.prototype._decimal=
0;sd.Color.prototype._hex="#000000";sd.Color.prototype._red=0;sd.Color.prototype._green=0;sd.Color.prototype._blue=0;sd.Color.prototype._hue=0;sd.Color.prototype._saturation=0;sd.Color.prototype._lightness=0;sd.Color.prototype._brightness=0;sd.Color.prototype._alpha=1;sd.Color.prototype.parse=function(d){if("undefined"==typeof d)return this;switch(!0){case isFinite(d):this.decimal(d);this.output=sd.Color.INT;break;case d instanceof sd.Color:this.copy(d);break;default:switch(typeof d){case "object":this.set(d);
break;case "string":switch(!0){case sd.namedColors.hasOwnProperty(d):d=sd.namedColors[d];d=d.replace(sd.leadHex,"");this.decimal(parseInt(d,16));break;case sd.isHex.test(d):d=d.replace(sd.leadHex,"");3==d.length&&(d=d.replace(sd.hexBit,"$1$1"));this.decimal(parseInt(d,16));break;case sd.isRGB.test(d):d=d.match(sd.matchRGB);this.red(sd.p2v(d[1]));this.green(sd.p2v(d[2]));this.blue(sd.p2v(d[3]));this.alpha(parseFloat(d[5])||1);this.output=(sd.isPercent.test(d[1])?2:1)+(d[5]?2:0);break;case sd.isHSL.test(d):d=
d.match(sd.matchHSL),this.hue(parseInt(d[1])),this.saturation(parseInt(d[2])),this.lightness(parseInt(d[3])),this.alpha(parseFloat(d[5])||1),this.output=d[5]?6:5}}}return this};sd.Color.prototype.clone=function(){return new sd.Color(this.decimal())};sd.Color.prototype.copy=function(d){this.set(d.decimal());return this};sd.Color.prototype.set=function(d,h){if(1==arguments.length)if("object"==typeof d)for(var n in d){if("function"==typeof this[n])this[n](d[n])}else isFinite(d)&&this.decimal(d);else if("function"==
typeof this[d])this[d](h);return this};sd.Color.prototype.interpolate=function(d,h){d instanceof sd.Color||(d=new sd.Color(d));this._red=sd.absround(+this._red+(d._red-this._red)*h);this._green=sd.absround(+this._green+(d._green-this._green)*h);this._blue=sd.absround(+this._blue+(d._blue-this._blue)*h);this._alpha=sd.absround(+this._alpha+(d._alpha-this._alpha)*h);this.broadcast(sd.Events.RGB_UPDATED);this.broadcast(sd.Events.UPDATED);return this};sd.Color.prototype._RGB2HSL=function(){var d=this._red/
255,h=this._green/255,n=this._blue/255,b=Math.max(d,h,n),e=Math.min(d,h,n),m=(b+e)/2;if(b==e)this._saturation=this._hue=0;else{var a=b-e;e=a/(.5>=m?b+e:2-b-e);this._hue=sd.absround((b==d?(h-n)/a+(h<n?6:0):b==h?(n-d)/a+2:(d-h)/a+4)/6*360);this._saturation=sd.absround(100*e)}this._lightness=sd.absround(100*m);this._brightness=sd.absround(100*b)};sd.Color.prototype._HSL2RGB=function(){var d=this._hue/360,h=this._saturation/100,n=this._lightness/100;h=.5>n?n*(1+h):n+h-n*h;n=2*n-h;this._red=sd.absround(255*
sd.hue2rgb(n,h,d+1/3));this._green=sd.absround(255*sd.hue2rgb(n,h,d));this._blue=sd.absround(255*sd.hue2rgb(n,h,d-1/3))};sd.Color.prototype._HSV2RGB=function(){var d=this._hue/360,h=this._saturation/100,n=this._brightness/100,b=0,e=0,m=0,a=Math.floor(6*d),g=6*d-a;d=n*(1-h);var l=n*(1-g*h);h=n*(1-(1-g)*h);switch(a%6){case 0:b=n;e=h;m=d;break;case 1:b=l;e=n;m=d;break;case 2:b=d;e=n;m=h;break;case 3:b=d;e=l;m=n;break;case 4:b=h;e=d;m=n;break;case 5:b=n,e=d,m=l}this._red=sd.absround(255*b);this._green=
sd.absround(255*e);this._blue=sd.absround(255*m)};sd.Color.prototype._INT2HEX=function(){var d=this._decimal.toString(16);d="000000".substr(0,6-d.length)+d;this._hex="#"+d.toUpperCase()};sd.Color.prototype._INT2RGB=function(){this._red=this._decimal>>16;this._green=this._decimal>>8&255;this._blue=this._decimal&255};sd.Color.prototype._HEX2INT=function(){this._decimal=parseInt(this._hex,16)};sd.Color.prototype._RGB2INT=function(){this._decimal=this._red<<16|this._green<<8&65535|this._blue};sd.Color.prototype._RGBUpdated=
function(){this._RGB2INT();this._RGB2HSL();this._INT2HEX()};sd.Color.prototype._HSLUpdated=function(){this._HSL2RGB();this._RGB2INT();this._INT2HEX()};sd.Color.prototype._HSVUpdated=function(){this._HSV2RGB();this._RGB2INT();this._INT2HEX()};sd.Color.prototype._HEXUpdated=function(){this._HEX2INT();this._INT2RGB();this._RGB2HSL()};sd.Color.prototype._INTUpdated=function(){this._INT2RGB();this._RGB2HSL();this._INT2HEX()};sd.Color.prototype._broadcastUpdate=function(){this.broadcast(sd.Events.UPDATED)};
sd.Color.prototype.decimal=function(d){return this._handle("_decimal",d,sd.Events.INT_UPDATED)};sd.Color.prototype.hex=function(d){return this._handle("_hex",d,sd.Events.HEX_UPDATED)};sd.Color.prototype.red=function(d){return this._handle("_red",d,sd.Events.RGB_UPDATED)};sd.Color.prototype.green=function(d){return this._handle("_green",d,sd.Events.RGB_UPDATED)};sd.Color.prototype.blue=function(d){return this._handle("_blue",d,sd.Events.RGB_UPDATED)};sd.Color.prototype.hue=function(d){return this._handle("_hue",
d,sd.Events.HSL_UPDATED)};sd.Color.prototype.saturation=function(d){return this._handle("_saturation",d,sd.Events.HSL_UPDATED)};sd.Color.prototype.lightness=function(d){return this._handle("_lightness",d,sd.Events.HSL_UPDATED)};sd.Color.prototype.brightness=function(d){return this._handle("_brightness",d,sd.Events.HSV_UPDATED)};sd.Color.prototype.alpha=function(d){return this._handle("_alpha",d)};sd.Color.prototype._handle=function(d,h,n){"undefined"!=typeof this[d]&&"undefined"!=typeof h&&(h!=this[d]&&
(this[d]=h,n&&this.broadcast(n)),this.broadcast(sd.Events.UPDATED));return this[d]};sd.Color.prototype.getHex=function(){return this._hex};sd.Color.prototype.getRGB=function(){return"rgb("+[sd.absround(this._red),sd.absround(this._green),sd.absround(this._blue)].join(", ")+")"};sd.Color.prototype.getPRGB=function(){return"rgb("+[sd.absround(100*this._red/255)+"%",sd.absround(100*this._green/255)+"%",sd.absround(100*this._blue/255)+"%"].join(", ")+")"};sd.Color.prototype.getRGBA=function(){return"rgba("+
[sd.absround(this._red),sd.absround(this._green),sd.absround(this._blue),this._alpha].join(", ")+")"};sd.Color.prototype.getPRGBA=function(){return"rgba("+[sd.absround(100*this._red/255)+"%",sd.absround(100*this._green/255)+"%",sd.absround(100*this._blue/255)+"%",this._alpha].join(", ")+")"};sd.Color.prototype.getHSL=function(){return"hsl("+[sd.absround(this._hue),sd.absround(this._saturation)+"%",sd.absround(this._lightness)+"%"].join(", ")+")"};sd.Color.prototype.getHSLA=function(){return"hsla("+
[sd.absround(this._hue),sd.absround(this._saturation)+"%",sd.absround(this._lightness)+"%",this._alpha].join(", ")+")"};sd.Color.prototype.format=function(d){var h={r:this._red,g:this._green,b:this._blue,h:this._hue,s:this._saturation,l:this._lightness,v:this._brightness,a:this._alpha,x:this._hex,d:this._decimal},n;for(n in h)d=d.split("%"+n+"%").join(h[n]);return d};sd.Color.prototype.output=0;sd.Color.HEX=0;sd.Color.RGB=1;sd.Color.PRGB=2;sd.Color.RGBA=3;sd.Color.PRGBA=4;sd.Color.HSL=5;sd.Color.HSLA=
6;sd.Color.INT=7;sd.Color.prototype.toString=function(){switch(this.output){case 1:return this.getRGB();case 2:return this.getPRGB();case 3:return this.getRGBA();case 4:return this.getPRGBA();case 5:return this.getHSL();case 6:return this.getHSLA();case 7:return this._decimal}return this.getHex()};sd.Color.prototype._listeners=null;sd.Color.prototype._isSubscribed=function(d){return null!=this._listeners[d]};sd.Color.prototype.subscribe=function(d,h){this._isSubscribed(d)||(this._listeners[d]=[]);
this._listeners[d].push(h)};sd.Color.prototype.unsubscribe=function(d,h){if(this._isSubscribed(d))for(var n=this._listeners[d],b=0,e=n.length;b<e;b++)if(n[b]===h)return n.splice(b,1),this.unsubscribe(d,h)};sd.Color.prototype.broadcast=function(d,h){if(this._isSubscribed(d)){d=this._listeners[d];for(var n=d.length,b=0;b<n;b++)d[b].apply(this,h)}};sd.Color.prototype.tween=function(d,h){h instanceof sd.Color||(h=new sd.Color(h));var n=+new Date,b=this;this.broadcast("tweenStart");var e=setInterval(function(){var m=
Math.min(1,(+new Date-n)/d);b.interpolate(h,m);b.broadcast("tweenProgress");1==m&&(clearInterval(e),b.broadcast("tweenComplete"))},20);return e};sd.Color.prototype.bind=function(d,h){var n=this;this.subscribe("updated",function(){d[h]=n.toString()})};sd.Color.random=function(){return new sd.Color(sd.absround(16777215*Math.random()))};sd.Color.bind=function(d,h){var n=new sd.Color(d[h]);n.bind(d,h);return n};var Ad=lively.FreezerRuntime.recorderFor("lively.graphics/color.js");Ad.floor=function(d){return Math.floor(255.99*
d)};Ad.pad=function(d,h,n){n=void 0===n?Ad.arr.last:n;return[].concat($jscomp.arrayFromIterable(d),$jscomp.arrayFromIterable(Array(Math.max(h-d.length,0)).fill(n(d))))};Ad.num=Bk;Ad.obj=Pf;Ad.arr=vf;Ad.parse=Rt;Ad.Rectangle=ee;Ad.rect=Ii;Ad.pt=oh;Ad.Point=$f;Ad.rgbaRegex=/\s*rgba?\s*\(\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*(?:,\s*([0-9\.]+)\s*)?\)\s*/;var CA=function(){};CA.prototype.offsets=function(){return null};CA.prototype.stepCount=function(){return 0};CA.prototype.stepSize=function(){return 0};
CA.prototype.chord=function(d){var h=this,n=d.hue,b=d.saturation,e=d.brightness;return(this.offsets()||Ad.arr.range(0,this.steps()).map(function(m){return m*h.stepSize()})).map(function(m){return Ad.Color.hsb(n+m%360,b,e)})};$jscomp.global.Object.defineProperties(CA.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Color Harmony"}}});Ad.ColorHarmony=CA;var lw=function(){return Ad.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(lw,Ad.ColorHarmony);lw.prototype.steps=function(){return 1};
lw.prototype.stepSize=function(){return 180};$jscomp.global.Object.defineProperties(lw.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Complement"}}});sa("b2",lw);Ad.Complementary=lw;var mw=function(){return Ad.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(mw,Ad.ColorHarmony);mw.prototype.steps=function(){return 2};mw.prototype.stepSize=function(){return 120};$jscomp.global.Object.defineProperties(mw.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Triadic"}}});
sa("b3",mw);Ad.Triadic=mw;var gy=function(){return Ad.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(gy,Ad.ColorHarmony);gy.prototype.offsets=function(){return[0,60,180,240]};$jscomp.global.Object.defineProperties(gy.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Tetradic"}}});sa("b4",gy);Ad.Tetradic=gy;var nw=function(){return Ad.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(nw,Ad.ColorHarmony);nw.prototype.steps=function(){return 3};nw.prototype.stepSize=
function(){return 90};$jscomp.global.Object.defineProperties(nw.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Quadratic"}}});sa("b5",nw);Ad.Quadratic=nw;var ow=function(){return Ad.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(ow,Ad.ColorHarmony);ow.prototype.steps=function(){return 5};ow.prototype.offsets=function(){return[-60,-30,0,30,60]};$jscomp.global.Object.defineProperties(ow.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Analogous"}}});
sa("b6",ow);Ad.Analogous=ow;var hy=function(){return Ad.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(hy,Ad.ColorHarmony);hy.prototype.offsets=function(){return[-30,-15,0,15,30]};$jscomp.global.Object.defineProperties(hy.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Neutral"}}});sa("b7",hy);Ad.Neutral=hy;var Wf=function(d,h,n,b){this.r=d||0;this.g=h||0;this.b=n||0;this.a=b||(0===b?0:1)};Wf.random=function(d,h){void 0===d&&(d=0);void 0===h&&(h=255);return Ad.Color.rgb(Ad.num.random(d,
h),Ad.num.random(d,h),Ad.num.random(d,h))};Wf.hsb=function(d,h,n){if(0==h)return new Ad.Color(n,n,n);var b=d%360/60;d=Math.floor(b);var e=b-d;b=(1-h)*n;var m=(1-h*e)*n;h=(1-h*(1-e))*n;switch(d){case 0:return new Ad.Color(n,h,b);case 1:return new Ad.Color(m,n,b);case 2:return new Ad.Color(b,n,h);case 3:return new Ad.Color(b,m,n);case 4:return new Ad.Color(h,b,n);case 5:return new Ad.Color(n,b,m);default:return new Ad.Color(0,0,0)}};Wf.wheel=function(d){return Ad.Color.wheelHsb(void 0===d?10:d,0,.9,
.7)};Wf.wheelHsb=function(d,h,n,b){for(var e=Array(d),m=360/Math.max(d,1),a=0;a<d;a++)e[a]=Ad.Color.hsb(h+a*m,n,b);return e};Wf.rgb=function(d,h,n){return new Ad.Color(d/255,h/255,n/255)};Wf.rgbHex=function(d){return(d=this.parseHex(d))&&0<=d[0]&&0<=d[1]&&0<=d[2]?new Ad.Color(d[0],d[1],d[2]):null};Wf.rgba=function(d,h,n,b){return new Ad.Color(d/255,h/255,n/255,b)};Wf.fromLiteral=function(d){return new Ad.Color(d.r,d.g,d.b,d.a)};Wf.fromTuple=function(d){return new Ad.Color(d[0],d[1],d[2],d[3])};Wf.fromTuple8Bit=
function(d){return new Ad.Color(d[0]/255,d[1]/255,d[2]/255,d[3]/255)};Wf.fromString=function(d){return d&&"none"!==d?this.fromTuple(this.parse(d)):null};Wf.parse=function(d){return d&&"none"!==d?(d=Ad.parse(d),[d.red,d.green,d.blue,d.alpha]):null};Wf.parseRGB=function(d){var h=d.match(this.rgbaRegex);if(h){d=parseInt(h[1])/(h[2]?100:255);var n=parseInt(h[3])/(h[4]?100:255),b=parseInt(h[5])/(h[6]?100:255);h=h[7]?parseFloat(h[7]):1;return[d,n,b,h]}return null};Wf.parseHex=function(d){var h;var n="";
for(h=0;h<d.length;h++){var b=d[h].toLowerCase();if("a"==b||"b"==b||"c"==b||"d"==b||"e"==b||"f"==b||"0"==b||"1"==b||"2"==b||"3"==b||"4"==b||"5"==b||"6"==b||"7"==b||"8"==b||"9"==b)n+=b}if(6==n.length)h=n.substring(0,2),d=n.substring(2,4),n=n.substring(4,6);else if(3==n.length)h=n.substring(0,1),h+=h,d=n.substring(1,2),d+=d,n=n.substring(2,3),n+=n;else return null;h=parseInt(h,16)/255;d=parseInt(d,16)/255;n=parseInt(n,16)/255;return[h,d,n]};Wf.prototype.grayValue=function(){return(this.r+this.g+this.b)/
3};Wf.prototype.equals=function(d){return d?this.r===d.r&&this.g===d.g&&this.b===d.b&&this.a===d.a:!1};Wf.prototype.darker=function(d){var h=this.mixedWith(Ad.Color.black,.5);return 1<d?h.darker(d-1):h};Wf.prototype.lighter=function(d){if(0==d)return this;var h=this.mixedWith(Ad.Color.white,.5);return 1<d?h.lighter(d-1):h};Wf.prototype.interpolate=function(d,h){if(h.isGradient)return h.interpolate(1-d,this);h=Ad.obj.isArray(h)?h:h.toTuple();return Ad.Color.fromTuple(this.toTuple().map(function(n,
b){return Ad.num.interpolate(d,n,h[b])}))};Wf.prototype.toString=function(){return 1===this.a?"rgb("+Ad.floor(this.r)+","+Ad.floor(this.g)+","+Ad.floor(this.b)+")":this.toRGBAString()};Wf.prototype.toRGBAString=function(){return"rgba("+Math.floor(255.99*this.r)+","+Math.floor(255.99*this.g)+","+Math.floor(255.99*this.b)+","+this.a+")"};Wf.prototype.toHexString=function(){function d(h){for(;2>h.length;)h="0"+h;return h}return d(Math.floor(255.99*this.r).toString(16))+d(Math.floor(255.99*this.g).toString(16))+
d(Math.floor(255.99*this.b).toString(16))};Wf.prototype.toTuple=function(){return[this.r,this.g,this.b,this.a]};Wf.prototype.toTuple8Bit=function(){return[255*this.r,255*this.g,255*this.b,255*this.a]};Wf.prototype.toHSB=function(){var d=Math.max(this.r,this.g,this.b),h=Math.min(this.r,this.g,this.b),n;d==h?n=0:d==this.r?n=(this.g-this.b)/(d-h)*60:d==this.g?n=60*(2+(this.b-this.r)/(d-h)):d==this.b&&(n=60*(4+(this.r-this.g)/(d-h)));return[(n+360)%360,0==d?0:(d-h)/d,d]};Wf.prototype.withA=function(d){return new Ad.Color(this.r,
this.g,this.b,d)};Wf.prototype.mixedWith=function(d,h){var n=1-h;return new Ad.Color(this.r*h+d.r*n,this.g*h+d.g*n,this.b*h+d.b*n,this.a*h+d.a*n)};Wf.prototype.invert=function(){return Ad.Color.rgb(255*(1-this.r),255*(1-this.g),255*(1-this.b))};Wf.prototype.toCSSString=function(){return this.toRGBAString()};Wf.prototype.__serialize__=function(){return{__expr__:"Color."+this.toString(),bindings:{"lively.graphics/color.js":["Color"]}}};Wf.prototype.toJSExpr=function(){return"Color."+(this.name||this.toString())};
$jscomp.global.Object.defineProperties(Wf.prototype,{isColor:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){var d=this,h=Ad.Color.named;return Object.keys(h).find(function(n){return h[n].equals(d)})}}});$jscomp.global.Object.defineProperties(Wf,{rgbaRegex:{configurable:!0,enumerable:!0,get:function(){return Ad.rgbaRegex}},named:{configurable:!0,enumerable:!0,get:function(){return this._named?this._named:this._named={black:new Ad.Color(0,
0,0),almostBlack:Ad.Color.rgb(64,64,64),white:new Ad.Color(1,1,1),gray:new Ad.Color(.8,.8,.8),red:new Ad.Color(.8,0,0),green:new Ad.Color(0,.8,0),yellow:new Ad.Color(.8,.8,0),blue:new Ad.Color(0,0,.8),purple:new Ad.Color(.5,0,.5),magenta:new Ad.Color(1,0,1),pink:Ad.Color.rgb(255,30,153),turquoise:Ad.Color.rgb(0,240,255),tangerine:Ad.Color.rgb(242,133,0),orange:Ad.Color.rgb(255,153,0),cyan:Ad.Color.rgb(0,255,255),brown:Ad.Color.rgb(182,67,0),limeGreen:Ad.Color.rgb(51,255,0),darkGray:Ad.Color.rgb(102,
102,102),lightGray:Ad.Color.rgb(230,230,230),veryLightGray:Ad.Color.rgb(243,243,243),transparent:Ad.Color.rgba(0,0,0,0),lively:Ad.Color.rgb(245,124,0)}}}});sa("C",Wf);Ad.Color=Wf;Object.assign(Ad.Color,Ad.Color.named);var Bu=function(d){this.stops=d?d.map(function(h){return h}):[]};Bu.create=function(d){var h=[],n;for(n in d)h.push({offset:Number(n),color:d[n]});return new this({stops:h})};Bu.parse=function(d){return d.startsWith("radial-gradient")?Ad.RadialGradient.parse(d):d.startsWith("linear-gradient")?
Ad.LinearGradient.parse(d):Ad.Color.fromTuple(Ad.Color.parse(d))};Bu.prototype.equals=function(d){return d&&d.isGradient?this.toString()==d.toString():!1};Bu.prototype.getStopsLighter=function(d){return Ad.arr.collect(this.stops,function(h){return{offset:h.offset,color:h.color.lighter(d)}})};Bu.prototype.getStopsDarker=function(d){return Ad.arr.collect(this.stops,function(h){return{offset:h.offset,color:h.color.darker(d)}})};Bu.prototype.interpolateStops=function(d,h){var n=Ad.pad(this.stops,h.length);
h=Ad.pad(h,this.stops.length);var b=[],e;for(e=0;e<n.length;e++){var m=n[e];var a=m.color;var g=m.offset;var l=h[e];m=l.color;l=l.offset;b.push({color:a.interpolate(d,m),offset:Ad.num.interpolate(d,g,l)})}return b};Bu.prototype.__serialize__=function(){return{__expr__:this.toJSExpr(),bindings:{"lively.graphics/color.js":["Color","RadialGradient","LinearGradient"],"lively.graphics/geometry-2d.js":["pt","rect"]}}};$jscomp.global.Object.defineProperties(Bu.prototype,{isGradient:{configurable:!0,enumerable:!0,
get:function(){return!0}}});Ad.Gradient=Bu;var El=function(d){var h=void 0===d?{}:d;d=h.vector;h=Ad.Gradient.call(this,h.stops)||this;h.vector=d;return h};$jscomp.inherits(El,Ad.Gradient);El.parse=function(d){d.match(/\((.*)\)/)[1].split(",")};El.prototype.angleToRect=function(d){return Ad.Point.polar(1,d).extentAsRectangle().withCenter(Ad.pt(.5,.5))};El.prototype.vectorAsAngle=function(){return this.vector.extent().theta()};El.prototype.toString=function(){return this.toCSSString()};El.prototype.lighter=
function(d){return new this.constructor({stops:this.getStopsLighter(d),vector:this.vector})};El.prototype.darker=function(){return new this.constructor({stops:this.getStopsDarker(),vector:this.vector})};El.prototype.interpolate=function(d,h,n){n=void 0===n?{width:1E3,height:1E3}:n;h.isColor&&(h=new Ad.LinearGradient({vector:this.vector,stops:this.stops.map(function(b){return{color:h,offset:b.offset}})}));if("radialGradient"==h.type){if(.5>d)return new Ad.LinearGradient({vector:this.vector.interpolate(d,
Ad.rect(0,0,0,1)),stops:this.interpolateStops(d,h.stops.map(function(b,e){return{color:b.color,offset:1}}))});if(.5<=d)return new Ad.RadialGradient({stops:this.interpolateStops(d,h.stops),focus:Ad.pt(.5,0).interpolate(d,h.focus),bounds:Ad.rect(0,0,100*n.width,2*n.height).interpolate(d,h.bounds)})}return new Ad.LinearGradient({stops:this.interpolateStops(d,h.stops),vector:this.vector.interpolate(d,h.vector)})};El.prototype.toCSSString=function(){var d="linear-gradient("+(Ad.num.toDegrees(this.vectorAsAngle())+
90+"deg,")+this.stops.map(function(h){return h.color.toRGBAString()+" "+((100*h.offset).toFixed()+"%")}).join(",");return d+")"};El.prototype.toJSExpr=function(){return"new LinearGradient({stops: ["+this.stops.map(function(d){return"{offset: "+d.offset+", color: "+d.color.toJSExpr()+"}"}).join(", ")+"], vector: "+this.vector+"})"};$jscomp.global.Object.defineProperties(El.prototype,{type:{configurable:!0,enumerable:!0,get:function(){return"linearGradient"}},vectors:{configurable:!0,enumerable:!0,
get:function(){return{northsouth:Ad.rect(Ad.pt(0,0),Ad.pt(0,1)),northeast:Ad.rect(Ad.pt(1,0),Ad.pt(0,1)),westeast:Ad.rect(Ad.pt(1,0),Ad.pt(0,0)),southeast:Ad.rect(Ad.pt(1,1),Ad.pt(0,0)),southnorth:Ad.rect(Ad.pt(0,1),Ad.pt(0,0)),southwest:Ad.rect(Ad.pt(0,1),Ad.pt(1,0)),eastwest:Ad.rect(Ad.pt(0,0),Ad.pt(1,0)),northwest:Ad.rect(Ad.pt(0,0),Ad.pt(1,1))}}},vector:{configurable:!0,enumerable:!0,get:function(){return this._vector},set:function(d){this._vector=d?"string"===typeof d?this.vectors[d.toLowerCase()]:
"number"===typeof d?this.angleToRect(d):d:this.vectors.northsouth}}});sa("af",El);Ad.LinearGradient=El;var rn=function(d){var h=void 0===d?{}:d;d=h.focus;var n=h.bounds;h=Ad.Gradient.call(this,h.stops)||this;h.focus=d||Ad.pt(.5,.5);h.bounds=n||new Ad.Rectangle(0,0,20,20);return h};$jscomp.inherits(rn,Ad.Gradient);rn.parse=function(d){d.match(/\((.*)\)/)[1].split(",")};rn.prototype.toString=function(){return this.toCSSString()};rn.prototype.lighter=function(d){return new this.constructor({stops:this.getStopsLighter(d),
focus:this.focus,bounds:this.bounds})};rn.prototype.darker=function(){return new this.constructor({stops:this.getStopsDarker(),focus:this.focus,bounds:this.bounds})};rn.prototype.interpolate=function(d,h,n){n=void 0===n?{height:1E3,width:1E3}:n;h.isColor&&(h=new Ad.RadialGradient({vector:this.vector,bounds:this.bounds,stops:this.stops.map(function(b){return{color:h,offset:b.offset}})}));return"linearGradient"==h.type?h.interpolate(1-d,this,n):new Ad.RadialGradient({bounds:this.bounds.interpolate(d,
h.bounds),stops:this.interpolateStops(d,h.stops),focus:this.focus.interpolate(d,h.focus)})};rn.prototype.toCSSString=function(){var d=this.focus.scaleBy(100),h=this.bounds.extent();d="radial-gradient("+h.x/2+"px "+h.y/2+"px at "+d.x+"% "+d.y+"%";for(h=0;h<this.stops.length;h++)d+=","+this.stops[h].color.toRGBAString()+" "+((100*this.stops[h].offset).toFixed()+"%");return d+")"};rn.prototype.toJSExpr=function(){return"new RadialGradient({stops: ["+this.stops.map(function(d){return"{offset: "+d.offset+
", color: "+d.color.toJSExpr()+"}"}).join(", ")+"], bounds: "+this.bounds+", focus: "+this.focus.toString(!1)+"})"};$jscomp.global.Object.defineProperties(rn.prototype,{type:{configurable:!0,enumerable:!0,get:function(){return"radialGradient"}}});sa("ad",rn);Ad.RadialGradient=rn;var gD=sa("b8","#1abc9c #e8f8f5 #d1f2eb #a3e4d7 #76d7c4 #48c9b0 #1abc9c #17a589 #148f77 #117864 #0e6251 #16a085 #e8f6f3 #d0ece7 #a2d9ce #73c6b6 #45b39d #16a085 #138d75 #117a65 #0e6655 #0b5345 #2ecc71 #eafaf1 #d5f5e3 #abebc6 #82e0aa #58d68d #2ecc71 #28b463 #239b56 #1d8348 #186a3b #27ae60 #e9f7ef #d4efdf #a9dfbf #7dcea0 #52be80 #27ae60 #229954 #1e8449 #196f3d #145a32 #3498db #ebf5fb #d6eaf8 #aed6f1 #85c1e9 #5dade2 #3498db #2e86c1 #2874a6 #21618c #1b4f72 #2980b9 #eaf2f8 #d4e6f1 #a9cce3 #7fb3d5 #5499c7 #2980b9 #2471a3 #1f618d #1a5276 #154360 #9b59b6 #f5eef8 #ebdef0 #d7bde2 #c39bd3 #af7ac5 #9b59b6 #884ea0 #76448a #633974 #512e5f #8e44ad #f4ecf7 #e8daef #d2b4de #bb8fce #a569bd #8e44ad #7d3c98 #6c3483 #5b2c6f #4a235a #34495e #ebedef #d6dbdf #aeb6bf #85929e #5d6d7e #34495e #2e4053 #283747 #212f3c #1b2631 #2c3e50 #eaecee #d5d8dc #abb2b9 #808b96 #566573 #2c3e50 #273746 #212f3d #1c2833 #17202a #f1c40f #fef9e7 #fcf3cf #f9e79f #f7dc6f #f4d03f #f1c40f #d4ac0d #b7950b #9a7d0a #7d6608 #f39c12 #fef5e7 #fdebd0 #fad7a0 #f8c471 #f5b041 #f39c12 #d68910 #b9770e #9c640c #7e5109 #e67e22 #fdf2e9 #fae5d3 #f5cba7 #f0b27a #eb984e #e67e22 #ca6f1e #af601a #935116 #784212 #d35400 #fbeee6 #f6ddcc #edbb99 #e59866 #dc7633 #d35400 #ba4a00 #a04000 #873600 #6e2c00 #e74c3c #fdedec #fadbd8 #f5b7b1 #f1948a #ec7063 #e74c3c #cb4335 #b03a2e #943126 #78281f #c0392b #f9ebea #f2d7d5 #e6b0aa #d98880 #cd6155 #c0392b #a93226 #922b21 #7b241c #641e16 #ecf0f1 #fdfefe #fbfcfc #f7f9f9 #f4f6f7 #f0f3f4 #ecf0f1 #d0d3d4 #b3b6b7 #979a9a #7b7d7d #bdc3c7 #f8f9f9 #f2f3f4 #e5e7e9 #d7dbdd #cacfd2 #bdc3c7 #a6acaf #909497 #797d7f #626567 #95a5a6 #f4f6f6 #eaeded #d5dbdb #bfc9ca #aab7b8 #95a5a6 #839192 #717d7e #5f6a6a #4d5656 #7f8c8d #f2f4f4 #e5e8e8 #ccd1d1 #b2babb #99a3a4 #7f8c8d #707b7c #616a6b #515a5a #424949".split(" "));
Ad.flatDesignColors=gD;Ad.flatDesignColors=gD;Ad.flatDesignColors=gD;var hD=sa("b9","#f44336 #ffebee #ffcdd2 #ef9a9a #e57373 #ef5350 #f44336 #e53935 #d32f2f #c62828 #b71c1c #ff8a80 #ff5252 #ff1744 #d50000 #e91e63 #fce4ec #f8bbd0 #f48fb1 #f06292 #ec407a #e91e63 #d81b60 #c2185b #ad1457 #880e4f #ff80ab #ff4081 #f50057 #c51162 #9c27b0 #f3e5f5 #e1bee7 #ce93d8 #ba68c8 #ab47bc #9c27b0 #8e24aa #7b1fa2 #6a1b9a #4a148c #ea80fc #e040fb #d500f9 #aa00ff #673ab7 #ede7f6 #d1c4e9 #b39ddb #9575cd #7e57c2 #673ab7 #5e35b1 #512da8 #4527a0 #311b92 #b388ff #7c4dff #651fff #6200ea #3f51b5 #e8eaf6 #c5cae9 #9fa8da #7986cb #5c6bc0 #3f51b5 #3949ab #303f9f #283593 #1a237e #8c9eff #536dfe #3d5afe #304ffe #2196f3 #e3f2fd #bbdefb #90caf9 #64b5f6 #42a5f5 #2196f3 #1e88e5 #1976d2 #1565c0 #0d47a1 #82b1ff #448aff #2979ff #2962ff #03a9f4 #e1f5fe #b3e5fc #81d4fa #4fc3f7 #29b6f6 #03a9f4 #039be5 #0288d1 #0277bd #01579b #80d8ff #40c4ff #00b0ff #0091ea #00bcd4 #e0f7fa #b2ebf2 #80deea #4dd0e1 #26c6da #00bcd4 #00acc1 #0097a7 #00838f #006064 #84ffff #18ffff #00e5ff #00b8d4 #009688 #e0f2f1 #b2dfdb #80cbc4 #4db6ac #26a69a #009688 #00897b #00796b #00695c #004d40 #a7ffeb #64ffda #1de9b6 #00bfa5 #4caf50 #e8f5e9 #c8e6c9 #a5d6a7 #81c784 #66bb6a #4caf50 #43a047 #388e3c #2e7d32 #1b5e20 #b9f6ca #69f0ae #00e676 #00c853 #8bc34a #f1f8e9 #dcedc8 #c5e1a5 #aed581 #9ccc65 #8bc34a #7cb342 #689f38 #558b2f #33691e #ccff90 #b2ff59 #76ff03 #64dd17 #cddc39 #f9fbe7 #f0f4c3 #e6ee9c #dce775 #d4e157 #cddc39 #c0ca33 #afb42b #9e9d24 #827717 #f4ff81 #eeff41 #c6ff00 #aeea00 #ffeb3b #fffde7 #fff9c4 #fff59d #fff176 #ffee58 #ffeb3b #fdd835 #fbc02d #f9a825 #f57f17 #ffff8d #ffff00 #ffea00 #ffd600 #ffc107 #fff8e1 #ffecb3 #ffe082 #ffd54f #ffca28 #ffc107 #ffb300 #ffa000 #ff8f00 #ff6f00 #ffe57f #ffd740 #ffc400 #ffab00 #ff9800 #fff3e0 #ffe0b2 #ffcc80 #ffb74d #ffa726 #ff9800 #fb8c00 #f57c00 #ef6c00 #e65100 #ffd180 #ffab40 #ff9100 #ff6d00 #ff5722 #fbe9e7 #ffccbc #ffab91 #ff8a65 #ff7043 #ff5722 #f4511e #e64a19 #d84315 #bf360c #ff9e80 #ff6e40 #ff3d00 #dd2c00 #795548 #efebe9 #d7ccc8 #bcaaa4 #a1887f #8d6e63 #795548 #6d4c41 #5d4037 #4e342e #3e2723 #9e9e9e #fafafa #f5f5f5 #eeeeee #e0e0e0 #bdbdbd #9e9e9e #757575 #616161 #424242 #212121 #607d8b #eceff1 #cfd8dc #b0bec5 #90a4ae #78909c #607d8b #546e7a #455a64 #37474f #263238 #ffffff #000000".split(" "));
Ad.materialDesignColors=hD;Ad.materialDesignColors=hD;Ad.materialDesignColors=hD;var iD=sa("ba","ccff00 ccff33 ccff66 ccff99 ccffcc ccffff ffffff ffffcc ffff99 ffff66 ffff33 ffff00 cccc00 cccc33 cccc66 cccc99 cccccc ccccff ffccff ffcccc ffcc99 ffcc66 ffcc33 ffcc00 cc9900 cc9933 cc9966 cc9999 cc99cc cc99ff ff99ff ff99cc ff9999 ff9966 ff9933 ff9900 cc6600 cc6633 cc6666 cc6699 cc66cc cc66ff ff66ff ff66cc ff6699 ff6666 ff6633 ff6600 cc3300 cc3333 cc3366 cc3399 cc33cc cc33ff ff33ff ff33cc ff3399 ff3366 ff3333 ff3300 cc0000 cc0033 cc0066 cc0099 cc00cc cc00ff ff00ff ff00cc ff0099 ff0066 ff0033 ff0000 660000 660033 660066 660099 6600cc 6600ff 9900ff 9900cc 990099 990066 990033 990000 663300 663333 663366 663399 6633cc 6633ff 9933ff 9933cc 993399 993366 993333 993300 666600 666633 666666 666699 6666cc 6666ff 9966ff 9966cc 996699 996666 996633 996600 669900 669933 669966 669999 6699cc 6699ff 9999ff 9999cc 999999 999966 999933 999900 66cc00 66cc33 66cc66 66cc99 66cccc 66ccff 99ccff 99cccc 99cc99 99cc66 99cc33 99cc00 66ff00 66ff33 66ff66 66ff99 66ffcc 66ffff 99ffff 99ffcc 99ff99 99ff66 99ff33 99ff00 00ff00 00ff33 00ff66 00ff99 00ffcc 00ffff 33ffff 33ffcc 33ff99 33ff66 33ff33 33ff00 00cc00 00cc33 00cc66 00cc99 00cccc 00ccff 33ccff 33cccc 33cc99 33cc66 33cc33 33cc00 009900 009933 009966 009999 0099cc 0099ff 3399ff 3399cc 339999 339966 339933 339900 006600 006633 006666 006699 0066cc 0066ff 3366ff 3366cc 336699 336666 336633 336600 003300 003333 003366 003399 0033cc 0033ff 3333ff 3333cc 333399 333366 333333 333300 000000 000033 000066 000099 0000cc 0000ff 3300ff 3300cc 330099 330066 330033 330000".split(" "));
Ad.webSafeColors=iD;Ad.webSafeColors=iD;Ad.webSafeColors=iD;var Nda=Object.freeze({__proto__:null,Complementary:lw,Triadic:mw,Tetradic:gy,Quadratic:nw,Analogous:ow,Neutral:hy,Color:Wf,LinearGradient:El,RadialGradient:rn,flatDesignColors:gD,materialDesignColors:hD,webSafeColors:iD}),g1=lively.FreezerRuntime.recorderFor("lively.graphics/index.js");Object.assign(g1,Nda);Object.assign(g1,eba);var Oda=Object.freeze({__proto__:null,Complementary:lw,Triadic:mw,Tetradic:gy,Quadratic:nw,Analogous:ow,Neutral:hy,
Color:Wf,LinearGradient:El,RadialGradient:rn,flatDesignColors:gD,materialDesignColors:hD,webSafeColors:iD,Point:$f,Rectangle:ee,Transform:Gj,Line:Cl,rect:Ii,pt:oh}),Pda="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,oO={};!function(d,h){oO?oO=h():(this||Pda)[d]=h()}("bowser",function(){function d(m){function a(L){return(L=m.match(L))&&1<L.length&&L[1]||""}function g(L){return(L=m.match(L))&&1<L.length&&L[2]||""}var l=a(/(ipod|iphone|ipad)/i).toLowerCase(),q=!/like android/i.test(m)&&
/android/i.test(m),r=/nexus\s*[0-6]\s*/i.test(m),u=!r&&/nexus\s*[0-9]+/i.test(m),v=/CrOS/.test(m),y=/silk/i.test(m),z=/sailfish/i.test(m),A=/tizen/i.test(m),B=/(web|hpw)os/i.test(m),G=/windows phone/i.test(m),E=!G&&/windows/i.test(m),K=!l&&!y&&/macintosh/i.test(m),J=!q&&!z&&!A&&!B&&/linux/i.test(m),P=a(/edge\/(\d+(\.\d+)?)/i),ea=a(/version\/(\d+(\.\d+)?)/i),ra=/tablet/i.test(m),D=!ra&&/[^-]mobi/i.test(m),O=/xbox/i.test(m);/opera|opr|opios/i.test(m)?v={name:"Opera",opera:!0,version:ea||a(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:
/coast/i.test(m)?v={name:"Opera Coast",coast:!0,version:ea||a(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(m)?v={name:"Yandex Browser",yandexbrowser:!0,version:ea||a(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(m)?v={name:"UC Browser",ucbrowser:!0,version:a(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(m)?v={name:"Maxthon",maxthon:!0,version:a(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(m)?v={name:"Epiphany",epiphany:!0,version:a(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:
/puffin/i.test(m)?v={name:"Puffin",puffin:!0,version:a(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(m)?v={name:"Sleipnir",sleipnir:!0,version:a(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(m)?v={name:"K-Meleon",kMeleon:!0,version:a(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:G?(v={name:"Windows Phone",windowsphone:!0},P?(v.msedge=!0,v.version=P):(v.msie=!0,v.version=a(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(m)?v={name:"Internet Explorer",msie:!0,version:a(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:
v?v={name:"Chrome",chromeos:!0,chromeBook:!0,chrome:!0,version:a(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(m)?v={name:"Microsoft Edge",msedge:!0,version:P}:/vivaldi/i.test(m)?v={name:"Vivaldi",vivaldi:!0,version:a(/vivaldi\/(\d+(\.\d+)?)/i)||ea}:z?v={name:"Sailfish",sailfish:!0,version:a(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(m)?v={name:"SeaMonkey",seamonkey:!0,version:a(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(m)?(v={name:"Firefox",
firefox:!0,version:a(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(m)&&(v.firefoxos=!0)):y?v={name:"Amazon Silk",silk:!0,version:a(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(m)?v={name:"PhantomJS",phantom:!0,version:a(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(m)?v={name:"SlimerJS",slimer:!0,version:a(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(m)||/rim\stablet/i.test(m)?v={name:"BlackBerry",blackberry:!0,version:ea||a(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:
B?(v={name:"WebOS",webos:!0,version:ea||a(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(m)&&(v.touchpad=!0)):/bada/i.test(m)?v={name:"Bada",bada:!0,version:a(/dolfin\/(\d+(\.\d+)?)/i)}:A?v={name:"Tizen",tizen:!0,version:a(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||ea}:/qupzilla/i.test(m)?v={name:"QupZilla",qupzilla:!0,version:a(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||ea}:/chromium/i.test(m)?v={name:"Chromium",chromium:!0,version:a(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||ea}:/chrome|crios|crmo/i.test(m)?
v={name:"Chrome",chrome:!0,version:a(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:q?v={name:"Android",version:ea}:/safari|applewebkit/i.test(m)?(v={name:"Safari",safari:!0},ea&&(v.version=ea)):l?(v={name:"iphone"==l?"iPhone":"ipad"==l?"iPad":"iPod"},ea&&(v.version=ea)):v=/googlebot/i.test(m)?{name:"Googlebot",googlebot:!0,version:a(/googlebot\/(\d+(\.\d+))/i)||ea}:{name:a(/^(.*)\/(.*) /),version:g(/^(.*)\/(.*) /)};!v.msedge&&/(apple)?webkit/i.test(m)?(/(apple)?webkit\/537\.36/i.test(m)?(v.name=v.name||
"Blink",v.blink=!0):(v.name=v.name||"Webkit",v.webkit=!0),!v.version&&ea&&(v.version=ea)):!v.opera&&/gecko\//i.test(m)&&(v.name=v.name||"Gecko",v.gecko=!0,v.version=v.version||a(/gecko\/(\d+(\.\d+)?)/i));v.msedge||!q&&!v.silk?l?(v[l]=!0,v.ios=!0):K?v.mac=!0:O?v.xbox=!0:E?v.windows=!0:J&&(v.linux=!0):v.android=!0;E="";v.windowsphone?E=a(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):l?(E=a(/os (\d+([_\s]\d+)*) like mac os x/i),E=E.replace(/[_\s]/g,".")):q?E=a(/android[ \/-](\d+(\.\d+)*)/i):v.webos?E=a(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):
v.blackberry?E=a(/rim\stablet\sos\s(\d+(\.\d+)*)/i):v.bada?E=a(/bada\/(\d+(\.\d+)*)/i):v.tizen&&(E=a(/tizen[\/\s](\d+(\.\d+)*)/i));E&&(v.osversion=E);E=E.split(".")[0];if(ra||u||"ipad"==l||q&&(3==E||4<=E&&!D)||v.silk)v.tablet=!0;else if(D||"iphone"==l||"ipod"==l||q||r||v.blackberry||v.webos||v.bada)v.mobile=!0;v.msedge||v.msie&&10<=v.version||v.yandexbrowser&&15<=v.version||v.vivaldi&&1<=v.version||v.chrome&&20<=v.version||v.firefox&&20<=v.version||v.safari&&6<=v.version||v.opera&&10<=v.version||
v.ios&&v.osversion&&6<=v.osversion.split(".")[0]||v.blackberry&&10.1<=v.version||v.chromium&&20<=v.version?v.a=!0:v.msie&&10>v.version||v.chrome&&20>v.version||v.firefox&&20>v.version||v.safari&&6>v.version||v.opera&&10>v.version||v.ios&&v.osversion&&6>v.osversion.split(".")[0]||v.chromium&&20>v.version?v.c=!0:v.x=!0;return v}function h(m,a){var g=[],l;if(Array.prototype.map)return Array.prototype.map.call(m,a);for(l=0;l<m.length;l++)g=a(m[l]);return g}function n(m){var a=Math.max(m[0].split(".").length,
m[1].split(".").length);for(m=h(m,function(g){var l=a-g.split(".").length;g+=Array(l+1).join(".0");return h(g.split("."),function(q){return Array(20-q.length).join("0")+q}).reverse()});0<=--a;){if(m[0][a]>m[1][a])return 1;if(m[0][a]===m[1][a]){if(0===a)return 0}else return-1}}function b(m,a,g){var l=e;"string"===typeof a&&(g=a,a=void 0);void 0===a&&(a=!1);g&&(l=d(g));g=""+l.version;for(var q in m)if(m.hasOwnProperty(q)&&l[q])return 0>n([g,m[q]]);return a}var e=d("undefined"!==typeof navigator?navigator.userAgent:
"");e.test=function(m){for(var a=0;a<m.length;++a){var g=m[a];if("string"===typeof g&&g in e)return!0}return!1};e.isUnsupportedBrowser=b;e.compareVersions=n;e.check=function(m,a,g){return!b(m,a,g)};e._detect=d;return e});var Qs=oO,Oo=lively.FreezerRuntime.recorderFor("lively.morphic/config.js");Oo.parseURLQuery=function(){if("undefined"===typeof document||!document.location)return{};var d=(document.location.hash||document.location.search).slice(1);d=d&&d.split("&");var h={};if(d)for(var n=0;n<d.length;n++){var b=
d[n].split("="),e=b[0],m=!0;if(1<b.length&&(m=decodeURIComponent(b.slice(1).join("=")),m.match(/^(true|false|null|[0-9"[{].*)$/)))try{m=JSON.parse(m)}catch(a){"["===m[0]&&(m=m.slice(1,-1).split(","))}h[e]=m}return h};Oo.Rectangle=ee;Oo.Color=Wf;Oo.bowser=Qs;Oo.isMac=!!Oo.bowser.mac;"undefined"!==typeof $world&&$world.withAllSubmorphsDo(function(d){return d.hasOwnProperty("_cachedKeyhandlers")&&(d._cachedKeyhandlers=null)});Oo.config={onloadURLQuery:Oo.parseURLQuery(),defaultShadow:{fast:!0,distance:18,
blur:30,color:Oo.Color.black.withA(.2),spread:0},undoLevels:20,halosEnabled:!0,altClickDefinesThat:!0,verboseLogging:!0,maxStatusMessages:5,repeatClickInterval:250,longClick:{minDur:500,maxDur:1E3,maxDist:2},showTooltipsAfter:.8,users:{authServerURL:"https://auth.lively-next.org",autoLoginAsGuest:!1},ide:{workerEnabled:!1,js:{ignoredPackages:["lively.web","no group",function(d){return d.includes("lively.morphic/objectdb")||d.includes("lively.next-node_modules")||d.includes("node_modules")||d.includes("custom-npm-modules")||
d.includes("mocha-es6")||d.includes("test-resources/es6")}]},modes:{aliases:{text:"text",sh:"shell",markdown:"md",javascript:"js",htmlmixed:"html",haskell:"hs",python:"py"}}},globalKeyBindings:[{keys:{mac:"Meta-Z",win:"Ctrl-Z"},command:"undo"},{keys:{mac:"Meta-Shift-Z",win:"Ctrl-Shift-Z"},command:"redo"},{keys:"Alt-X",command:"run command"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"save world"},{keys:"Meta-Shift-L s a v e",command:"save this world"},{keys:"Meta-H",command:"show halo for focused morph"},
{keys:"Meta-Shift-L C O P Y",command:"copy morph"},{keys:"Alt-M",command:"select morph"},{keys:"Escape",command:"escape"},{keys:{win:"Ctrl-Escape",mac:"Meta-Escape"},command:"close active window or morph"},{keys:"Alt-Shift-C",command:"toggle minimize active window"},{keys:{mac:"Meta-Shift-L W S",win:"Ctrl-Shift-L W S"},command:"search workspaces"},{keys:{mac:"Meta-O",win:"Ctrl-O"},command:"open status message of focused morph"},{keys:{win:"Ctrl-K",mac:"Meta-K"},command:{command:"open workspace",onlyWhenFocused:!1,
args:{askForMode:!0}}},{keys:"Alt-Shift-1",command:{command:"open shell terminal",onlyWhenFocused:!1}},{keys:{win:"Ctrl-B",mac:"Meta-B"},command:{command:"open browser",onlyWhenFocused:!1}},{keys:{win:"Ctrl-P",mac:"Meta-P"},command:{command:"open PartsBin",onlyWhenFocused:!0}},{keys:"Alt-T",command:{command:"choose and browse module",onlyWhenFocused:!1}},{keys:"Alt-Shift-T",command:{command:"choose and browse package resources",onlyWhenFocused:!1}},{keys:{mac:"Ctrl-X D"},command:"open file browser"},
{keys:{mac:"Ctrl-X Ctrl-F"},command:"open file"},{keys:{win:"Ctrl-Shift-F",mac:"Meta-Shift-F"},command:{command:"open code search",onlyWhenFocused:!1}},{keys:"Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:1}}},{keys:"Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:1}}},{keys:"Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:1}}},{keys:"Down",command:{command:"move or resize halo target",
args:{what:"move",direction:"down",offset:1}}},{keys:"Meta-Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:10}}},{keys:"Meta-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:10}}},{keys:"Meta-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:10}}},{keys:"Meta-Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:10}}},{keys:"Alt-Left",
command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:100}}},{keys:"Alt-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:100}}},{keys:"Alt-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:100}}},{keys:"Alt-Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:100}}},{keys:"Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",
direction:"left",offset:1}}},{keys:"Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:1}}},{keys:"Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:1}}},{keys:"Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:1}}},{keys:"Meta-Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:10}}},{keys:"Meta-Shift-Right",
command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:10}}},{keys:"Meta-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:10}}},{keys:"Meta-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:10}}},{keys:"Alt-Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:100}}},{keys:"Alt-Shift-Right",command:{command:"move or resize halo target",
args:{what:"resize",direction:"right",offset:100}}},{keys:"Alt-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:100}}},{keys:"Alt-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:100}}},{keys:{win:"Ctrl-`|Alt-`",mac:"Meta-1"},command:"window switcher"},{keys:{mac:"Meta-Shift-L R E S 1",win:"Ctrl-Shift-L R E S 1"},command:{command:"resize active window",args:{how:"col1"}}},{keys:{mac:"Meta-Shift-L R E S 2",
win:"Ctrl-Shift-L R E S 2"},command:{command:"resize active window",args:{how:"col2"}}},{keys:{mac:"Meta-Shift-L R E S 3",win:"Ctrl-Shift-L R E S 3"},command:{command:"resize active window",args:{how:"col3"}}},{keys:{mac:"Meta-Shift-L R E S 4",win:"Ctrl-Shift-L R E S 4"},command:{command:"resize active window",args:{how:"col4"}}},{keys:{mac:"Meta-Shift-L R E S 5",win:"Ctrl-Shift-L R E S 5"},command:{command:"resize active window",args:{how:"col5"}}},{keys:{mac:"Meta-Shift-L R E S Alt-1",win:"Ctrl-Shift-L R E S Alt-1"},
command:{command:"resize active window",args:{how:"quadrant1"}}},{keys:{mac:"Meta-Shift-L R E S Alt-2",win:"Ctrl-Shift-L R E S Alt-2"},command:{command:"resize active window",args:{how:"quadrant2"}}},{keys:{mac:"Meta-Shift-L R E S Alt-3",win:"Ctrl-Shift-L R E S Alt-3"},command:{command:"resize active window",args:{how:"quadrant3"}}},{keys:{mac:"Meta-Shift-L R E S Alt-4",win:"Ctrl-Shift-L R E S Alt-4"},command:{command:"resize active window",args:{how:"quadrant4"}}},{keys:{mac:"Meta-Shift-L R E S Alt-5",
win:"Ctrl-Shift-L R E S Alt-5"},command:{command:"resize active window",args:{how:"quadrant5"}}},{keys:{mac:"Meta-Shift-L R E S Alt-6",win:"Ctrl-Shift-L R E S Alt-6"},command:{command:"resize active window",args:{how:"quadrant6"}}},{keys:{mac:"Meta-Shift-L R E S Alt-7",win:"Ctrl-Shift-L R E S Alt-7"},command:{command:"resize active window",args:{how:"quadrant7"}}},{keys:{mac:"Meta-Shift-L R E S Alt-8",win:"Ctrl-Shift-L R E S Alt-8"},command:{command:"resize active window",args:{how:"quadrant8"}}},
{keys:{mac:"Meta-Shift-L R E S Alt-9",win:"Ctrl-Shift-L R E S Alt-9"},command:{command:"resize active window",args:{how:"quadrant9"}}},{keys:{mac:"Meta-Shift-L R E S Alt-0",win:"Ctrl-Shift-L R E S Alt-0"},command:{command:"resize active window",args:{how:"quadrant0"}}},{keys:{mac:"Meta-Shift-L R E S C",win:"Ctrl-Shift-L R E S C"},command:{command:"resize active window",args:{how:"center"}}},{keys:{mac:"Meta-Shift-L R E S L",win:"Ctrl-Shift-L R E S L"},command:{command:"resize active window",args:{how:"left"}}},
{keys:{mac:"Meta-Shift-L R E S R",win:"Ctrl-Shift-L R E S R"},command:{command:"resize active window",args:{how:"right"}}},{keys:{mac:"Meta-Shift-L R E S F",win:"Ctrl-Shift-L R E S F"},command:{command:"resize active window",args:{how:"full"}}},{keys:{mac:"Meta-Shift-L R E S T",win:"Ctrl-Shift-L R E S T"},command:{command:"resize active window",args:{how:"top"}}},{keys:{mac:"Meta-Shift-L R E S H T",win:"Ctrl-Shift-L R E S H T"},command:{command:"resize active window",args:{how:"halftop"}}},{keys:{mac:"Meta-Shift-L R E S B",
win:"Ctrl-Shift-L R E S B"},command:{command:"resize active window",args:{how:"bottom"}}},{keys:{mac:"Meta-Shift-L R E S H B",win:"Ctrl-Shift-L R E S H B"},command:{command:"resize active window",args:{how:"halfbottom"}}},{keys:{mac:"Meta-Shift-L R E S Escape",win:"Ctrl-Shift-L R E S Escape"},command:{command:"resize active window",args:{how:"reset"}}}],text:{basicFontItems:"Sans-serif;serif;Monospace;Arial Black;Arial Narrow;Comic Sans MS;Garamond;Tahoma;Trebuchet MS;Verdana;custom...".split(";"),
cursorBlinkPeriod:.5,useSoftTabs:!0,tabWidth:2,markStackSize:16,undoLevels:50,clipboardBufferLength:100,useMultiSelect:!0,undoGroupDelay:600,defaultKeyBindings:[{keys:{win:"Ctrl-C",mac:"Meta-C"},command:{command:"clipboard copy",passEvent:!0}},{keys:"Ctrl-W",command:{command:"manual clipboard copy",args:{"delete":!0}}},{keys:"Alt-W",command:"manual clipboard copy"},{keys:"Ctrl-Y",command:"manual clipboard paste"},{keys:"Alt-Y",command:{command:"manual clipboard paste",args:{killRingCycleBack:!0}}},
{keys:{win:"Ctrl-X",mac:"Meta-X"},command:{command:"clipboard cut",passEvent:!0}},{keys:{win:"Ctrl-V",mac:"Meta-V"},command:{command:"clipboard paste",passEvent:!0}},{keys:{win:"Ctrl-Z|Ctrl-Shift--",mac:"Meta-Z|Ctrl-Shift--|Ctrl-x u"},command:"text undo"},{keys:{win:"Ctrl-Shift-Z",mac:"Meta-Shift-Z"},command:"text redo"},{keys:{win:"Ctrl-A|Ctrl-X H",mac:"Meta-A|Ctrl-X H"},command:"select all"},{keys:{win:"Alt-Enter",mac:"Meta-D|Alt-Enter"},command:"doit"},{keys:{mac:"Meta-Shift-L X B"},command:"eval all"},
{keys:{win:"Alt-Ctrl-Enter",mac:"Meta-P"},command:"printit"},{keys:{win:"Alt-Ctrl-Shift-Enter",mac:"Meta-I"},command:"print inspectit"},{keys:{win:"Ctrl-Shift-I",mac:"Meta-Shift-I"},command:"inspectit"},{keys:{win:"Ctrl-Shift-E",mac:"Meta-Shift-E"},command:"editit"},{keys:{win:"Ctrl-Shift-U",mac:"Meta-Shift-U"},command:"undefine variable"},{keys:"Backspace",command:"delete backwards"},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},command:"delete"},{keys:{win:"Left|Ctrl-B",mac:"Left|Ctrl-B"},command:"go left"},
{keys:{win:"Right|Ctrl-F",mac:"Right|Ctrl-F"},command:"go right"},{keys:{win:"Up|Ctrl-P",mac:"Up|Ctrl-P"},command:"go up"},{keys:{win:"Down|Ctrl-N",mac:"Down|Ctrl-N"},command:"go down"},{keys:"Shift-Left",command:"select left"},{keys:"Shift-Right",command:"select right"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-Right",mac:"Alt-Right|Alt-F"},command:"goto word right"},{keys:{win:"Ctrl-Left",mac:"Alt-Left|Alt-B"},command:"goto word left"},{keys:{win:"Ctrl-Shift-Right",
mac:"Alt-Shift-Right|Alt-Shift-F"},command:{command:"goto word right",args:{select:!0}}},{keys:{win:"Ctrl-Shift-Left",mac:"Alt-Shift-Left|Alt-Shift-B"},command:{command:"goto word left",args:{select:!0}}},{keys:{win:"Ctrl-Backspace",mac:"Alt-Backspace"},command:"delete word left"},{keys:"Alt-D",command:"delete word right"},{keys:{win:"Alt-Ctrl-K",mac:"Alt-Ctrl-K"},command:"delete word right"},{keys:"Alt-Shift-2",command:"select word right"},{keys:"Ctrl-X Ctrl-X",command:"reverse selection"},{keys:{win:"Ctrl-Shift-L",
mac:"Meta-L"},command:"select line"},{keys:{win:"Shift-Home",mac:"Shift-Home|Ctrl-Shift-A"},command:{command:"goto line start",args:{select:!0}}},{keys:{win:"Home",mac:"Home|Ctrl-A"},command:{command:"goto line start",args:{select:!1}}},{keys:{win:"Shift-End",mac:"Shift-End|Ctrl-Shift-E"},command:{command:"goto line end",args:{select:!0}}},{keys:{win:"End",mac:"End|Ctrl-E"},command:{command:"goto line end",args:{select:!1}}},{keys:"Ctrl-C J",command:{command:"join line",args:{withLine:"before"}}},
{keys:"Ctrl-C Shift-J",command:{command:"join line",args:{withLine:"after"}}},{keys:{win:"Ctrl-Shift-D",mac:"Meta-Shift-D|Ctrl-C P"},command:"duplicate line or selection"},{keys:{win:"Ctrl-Shift-Backspace",mac:"Meta-Backspace"},command:"delete left until beginning of line"},{keys:"Ctrl-K",command:"delete emtpy line or until end of line"},{keys:{win:"Ctrl-Alt-Up|Ctrl-Alt-P",mac:"Ctrl-Meta-Up|Ctrl-Meta-P"},command:"move lines up"},{keys:{win:"Ctrl-Alt-Down|Ctrl-Alt-N",mac:"Ctrl-Meta-Down|Ctrl-Meta-N"},
command:"move lines down"},{keys:{win:"PageDown",mac:"PageDown|Ctrl-V"},command:"goto page down"},{keys:{win:"PageUp",mac:"PageUp|Alt-V"},command:"goto page up"},{keys:{win:"Shift-PageDown",mac:"Shift-PageDown"},command:"goto page down and select"},{keys:{win:"Shift-PageUp",mac:"Shift-PageUp"},command:"goto page up and select"},{keys:"Alt-Ctrl-,",command:"move cursor to screen top in 1/3 steps"},{keys:"Alt-Ctrl-.",command:"move cursor to screen bottom in 1/3 steps"},{keys:{win:"Alt-Left",mac:"Meta-Left"},
command:"goto matching left"},{keys:{win:"Alt-Shift-Left",mac:"Meta-Shift-Left"},command:{command:"goto matching left",args:{select:!0}}},{keys:{win:"Alt-Right",mac:"Meta-Right"},command:"goto matching right"},{keys:{win:"Alt-Shift-Right",mac:"Meta-Shift-Right"},command:{command:"goto matching right",args:{select:!0}}},{keys:"Alt-Ctrl-B",command:"goto matching left"},{keys:"Alt-Ctrl-F",command:"goto matching right"},{keys:"Ctrl-Up",command:"goto paragraph above"},{keys:"Ctrl-Down",command:"goto paragraph below"},
{keys:{win:"Ctrl-Shift-Home",mac:"Meta-Shift-Up"},command:{command:"goto start",args:{select:!0}}},{keys:{win:"Ctrl-Shift-End",mac:"Meta-Shift-Down"},command:{command:"goto end",args:{select:!0}}},{keys:{win:"Ctrl-Home",mac:"Meta-Up|Meta-Home|Alt-Shift-,"},command:"goto start"},{keys:{win:"Ctrl-End",mac:"Meta-Down|Meta-End|Alt-Shift-."},command:"goto end"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{win:"Ctrl-Shift-L",mac:"Ctrl-Shift-L|Alt-G G"},command:"goto line"},{keys:"Enter",command:"newline"},
{keys:"Space",command:{command:"insertstring",args:{string:" ",undoGroup:!0}}},{keys:"Tab",command:{command:"tab - snippet expand or indent"}},{keys:{win:"Ctrl-]",mac:"Meta-]"},command:"indent"},{keys:{win:"Ctrl-[",mac:"Meta-["},command:"outdent"},{keys:{win:"Ctrl-Enter",mac:"Meta-Enter"},command:{command:"insert line",args:{where:"below"}}},{keys:"Shift-Enter",command:{command:"insert line",args:{where:"above"}}},{keys:"Ctrl-O",command:"split line"},{keys:{mac:"Ctrl-X Ctrl-T"},command:"transpose chars"},
{keys:{mac:"Ctrl-C Ctrl-U"},command:"uppercase"},{keys:{mac:"Ctrl-C Ctrl-L"},command:"lowercase"},{keys:{mac:"Meta-Shift-L W t"},command:"remove trailing whitespace"},{keys:{mac:"Ctrl-Space"},command:"toggle active mark"},{keys:{mac:"Meta-Shift-L M O D E"},command:"change editor mode"},{keys:{mac:"Meta-Shift-L L T"},command:"toggle line wrapping"},{keys:"Esc|Ctrl-G",command:"cancel input"},{keys:{win:"Ctrl-/",mac:"Meta-/"},command:"toggle comment"},{keys:{win:"Alt-Ctrl-/",mac:"Alt-Meta-/|Alt-Meta-\u00f7"},
command:"toggle block comment"},{keys:"Meta-Shift-L /  D",command:"comment box"},{keys:{win:"Ctrl-.",mac:"Meta-."},command:"[IyGotoChar] activate"},{keys:{win:"Ctrl-,",mac:"Meta-,"},command:{command:"[IyGotoChar] activate",args:{backwards:!0}}},{keys:{win:"Ctrl-Space|Ctrl-Shift-P",mac:"Alt-Shift-Space|Alt-Space|Meta-Shift-P"},command:"text completion"},{keys:"\u00f7|Alt-/",command:"text completion first match"},{keys:"Alt-Q",command:"fit text to column"},{keys:{win:"Ctrl-F|Ctrl-G|F3",mac:"Meta-F|Meta-G|Ctrl-S"},
command:"search in text"},{keys:{win:"Ctrl-Shift-F|Ctrl-Shift-G",mac:"Meta-Shift-F|Meta-Shift-G|Ctrl-R"},command:{command:"search in text",args:{backwards:!0}}},{keys:"Ctrl-Shift-/|Ctrl-C Ctrl-Shift-,",command:"[multi select] all like this"},{keys:"Alt-Ctrl-P",command:"[multi select] add cursor above"},{keys:"Alt-Ctrl-N",command:"[multi select] add cursor below"},{keys:"Ctrl-Shift-,",command:"[multi select] more like this backward"},{keys:"Ctrl-Shift-.",command:"[multi select] more like this forward"},
{keys:{mac:"Meta-Shift-,"},command:"[multi select] goto previous focused cursor"},{keys:{mac:"Meta-Shift-."},command:"[multi select] goto next focused cursor"},{keys:"Ctrl-Shift-;",command:"[multi select] remove focused cursor"},{keys:"Alt-Ctrl-A",command:"[multi select] align cursors"},{keys:"Ctrl-X R",command:"[multi select] create rectangular selection"},{keys:{win:"Shift-Ctrl-S|Ctrl-Alt-Space",mac:"Ctrl-Command-space|Ctrl-Alt-Space"},command:"contractRegion"},{keys:{win:"Shift-Ctrl-E|Ctrl-Shift-Space",
mac:"Shift-Command-Space|Ctrl-Shift-Space"},command:"expandRegion"},{keys:"Ctrl-Alt-h",command:"markDefun"},{keys:"Ctrl-Alt-d|Ctrl-Alt-Down",command:"forwardDownSexp"},{keys:"Ctrl-Alt-u|Ctrl-Alt-Up",command:"backwardUpSexp"},{keys:"Ctrl-Alt-b|Ctrl-Alt-Left",command:"backwardSexp"},{keys:"Ctrl-Alt-f|Ctrl-Alt-Right",command:"forwardSexp"},{keys:"Alt-.",command:"selectDefinition"},{keys:"Ctrl-Shift-'",command:"selectSymbolReferenceOrDeclaration"},{keys:"Ctrl-Shift-[",command:"selectSymbolReferenceOrDeclarationPrev"},
{keys:"Ctrl-Shift-]",command:"selectSymbolReferenceOrDeclarationNext"},{keys:{win:"Ctrl-=",mac:"Meta-="},command:"increase font size"},{keys:{win:"Ctrl--",mac:"Meta--"},command:"decrease font size"},{keys:"Alt-K",command:"set link of selection"},{keys:"Alt-O",command:"set doit of selection"},{keys:{win:"Ctrl-\\",mac:"Meta-\\"},command:"reset text style"},{keys:{win:"Ctrl-Shift-L T U I",mac:"Meta-Shift-L T U I"},command:"open text attribute controls"},{keys:{win:"Ctrl-Shift-L T D",mac:"Meta-Shift-L T D"},
command:"[todo] toggle todo marker"},{keys:{win:"Ctrl-Shift-L D A T E",mac:"Meta-Shift-L D A T E"},command:"insert date"},{keys:"Ctrl-C Ctrl-I",command:"change string inflection"},{keys:"Alt-Shift-4",command:"spell check word"},{keys:"Alt-Shift-\\",command:"[shell] run shell command on region"},{keys:"Alt-Shift-;",command:"run code on text morph"},{keys:{win:"Ctrl-Shift-L O P E N",mac:"Meta-Shift-L O P E N"},command:"open file at cursor"},{keys:"Meta-F1",command:"report token at cursor"}]},codeEditor:{defaultTheme:"default",
collapseSelection:!1,search:{maxCharsPerLine:1E4,fastHighlightLineCount:4E3,showTextMap:!0},defaultStyle:{fontFamily:"IBM Plex Mono",padding:Oo.Rectangle.inset(4,2,4,2),fontSize:Oo.isMac?12:16,clipMode:"auto"},modes:{text:{style:{}}}},systemBrowser:{fixUndeclaredVarsOnSave:!0},objectEditor:{fixUndeclaredVarsOnSave:!0},remotes:{server:System.get("@system-env").browser?document.location.origin+"/eval":null},css:{ibmPlex:"/lively.morphic/assets/ibm-plex/css/ibm-plex.css",fontAwesome:"/lively.morphic/assets/fontawesome-free-5.12.1/css/all.css",
inconsolata:"/lively.morphic/assets/inconsolata/inconsolata.css"}};var wk=sa("a8",Oo.config);Oo.default=wk;var zg=lively.FreezerRuntime.recorderFor("lively.bindings/index.js");zg.connect=fk;zg.disconnect=Jm;zg.disconnectAll=ov;zg.once=Xe;zg.signal=tl;zg.callWhenNotNull=dz;zg.callWhenPathNotNull=ez;zg.noUpdate=yp;zg.string=vh;zg.arr=vf;zg.Closure=Ei;zg.obj=Pf;zg.stringifyFunctionWithoutToplevelRecorder=Gn;zg.connect=fk;zg.connect=fk;zg.disconnect=Jm;zg.disconnect=Jm;zg.disconnectAll=ov;zg.disconnectAll=
ov;zg.once=Xe;zg.once=Xe;zg.signal=tl;zg.signal=tl;zg.noUpdate=yp;zg.noUpdate=yp;var MH=function(d){var h=lively.FreezerRuntime.recorderFor("lively.bindings/index.js"),n=h.hasOwnProperty("AttributeConnection")&&"function"===typeof h.AttributeConnection?h.AttributeConnection:h.AttributeConnection=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,
e,m,a,g){this.init(b,e,m,a,g)}},{key:"init",value:function(b,e,m,a,g){this.doNotSerialize=["isActive","converter","updater","varMapping"];this.sourceObj=b;this.sourceAttrName=e;this.targetObj=m;this.targetMethodName=a;this.varMapping={source:b,target:m};g=Object.assign({removeAfterUpdate:!1,forceAttributeConnection:!1,garbageCollect:!1,signalOnAssignment:!0},g);g.removeAfterUpdate&&(this.removeAfterUpdate=!0);g.forceAttributeConnection&&(this.forceAttributeConnection=!0);"boolean"===typeof g.garbageCollect&&
(this.garbageCollect=g.garbageCollect);"boolean"===typeof g.signalOnAssignment&&(this.signalOnAssignment=g.signalOnAssignment);g.converter&&this.setConverter(g.converter);g.updater&&this.setUpdater(g.updater);g.varMapping&&(this.varMapping=Object.assign(g.varMapping,this.varMapping));this.getSpec();return this}},{key:"__additionally_serialize__",value:function(b,e,m,a){zg.arr.equals(zg.arr.without(Object.keys(this.varMapping),"_rev"),["source","target"])?b.props.varMapping&&delete b.props.varMapping:
a("varMapping",this.varMapping)}},{key:"__after_deserialize__",value:function(b,e){this.varMapping||(this.varMapping={});this.varMapping.source=this.sourceObj;this.varMapping.target=this.targetObj;this.onSourceAndTargetRestored()}},{key:"onSourceAndTargetRestored",value:function(){this.sourceObj&&this.targetObj&&this.connect()}},{key:"copy",value:function(b){return zg.AttributeConnection.fromLiteral(this.toLiteral(),b)}},{key:"fixInstanceAfterCopyingFromSite",value:function(b,e,m){this.disconnect()}},
{key:"clone",value:function(){var b=new this.constructor(this.getSourceObj(),this.getSourceAttrName(),this.getTargetObj(),this.getTargetMethodName(),this.getSpec());this.dependedBy&&(b.dependedBy=this.dependedBy);return b}},{key:"getTargetObj",value:function(){return this.targetObj}},{key:"getSourceObj",value:function(){return this.sourceObj}},{key:"getSourceAttrName",value:function(){return this.sourceAttrName}},{key:"getTargetMethodName",value:function(){return this.targetMethodName}},{key:"getSourceValue",
value:function(){return this.getSourceObj()[this.getSourceAttrName()]}},{key:"getPrivateSourceValue",value:function(){return this.sourceObj[this.privateAttrName(this.sourceAttrName)]}},{key:"getConverter",value:function(){if(!this.converterString)return null;this.converter||(this.converter=zg.Closure.fromSource(this.converterString,this.varMapping).recreateFunc());return this.converter}},{key:"setConverter",value:function(b){delete this.converter;return this.converterString=b?String(b):null}},{key:"getUpdater",
value:function(){if(!this.updaterString)return null;this.updater||(this.updater=zg.Closure.fromSource(this.updaterString,this.varMapping).recreateFunc());return this.updater}},{key:"setUpdater",value:function(b){delete this.updater;return this.updaterString=b?zg.stringifyFunctionWithoutToplevelRecorder(b):null}},{key:"getSpec",value:function(){var b={};this.updaterString&&(b.updater=this.getUpdater());this.converterString&&(b.converter=this.getConverter());this.removeAfterUpdate&&(b.removeAfterUpdate=
!0);this.forceAttributeConnection&&(b.forceAttributeConnection=!0);this.hasOwnProperty("garbageCollect")&&(b.garbageCollect=this.garbageCollect);this.hasOwnProperty("signalOnAssignment")&&(b.signalOnAssignment=this.signalOnAssignment);return b}},{key:"resetSpec",value:function(){delete this.garbageCollect;delete this.signalOnAssignment;delete this.removeAfterUpdate;delete this.forceAttributeConnection;delete this.converter;delete this.converterString;delete this.updater;delete this.updaterString}},
{key:"privateAttrName",value:function(b){return"$$"+b}},{key:"activate",value:function(){this.isActive=!0}},{key:"deactivate",value:function(){delete this.isActive}},{key:"connect",value:function(){var b=this.getExistingConnection();b!==this&&(b&&b.disconnect(),this.addAttributeConnection());b=this.sourceObj;var e=this.sourceAttrName,m=this.forceAttributeConnection,a=b.__lookupSetter__(e),g=b.__lookupGetter__(e),l=!a&&!g&&(this.getSourceValue()||this.getPrivateSourceValue());"function"!==typeof l||
m?this.addSourceObjGetterAndSetter(g,a):l.isWrapped||this.addConnectionWrapper(b,e,l);return this}},{key:"disconnect",value:function(){var b=this,e=this.sourceObj;if(!e||!e.attributeConnections)return this.removeSourceObjGetterAndSetter();e.attributeConnections=e.attributeConnections.filter(function(a){return!b.isSimilarConnection(a)});var m=e.attributeConnections.filter(function(a){return b.getSourceAttrName()==a.getSourceAttrName()});0==e.attributeConnections.length&&delete e.attributeConnections;
0==m.length&&this.removeSourceObjGetterAndSetter();return null}},{key:"update",value:function(b,e){if(this.isActive)return null;var m=this,a=this.getUpdater(),g=this.getConverter(),l=this.targetObj,q=this.targetMethodName;if(!l||!q)return e="Cannot update "+this.toString(b)+" because of no target ("+l+") or targetProp ("+q+") ",this.isWeakConnection&&this.disconnect(),console.error(e),null;var r=l[q],u=function(y,z,A,B,G,E){A=[y,z,A,B,G,E];g&&(b=g.call(m,y,z),y=A[0]=b);y="function"===typeof r?r.apply(l,
A):l[q]=y;m.removeAfterUpdate&&m.disconnect();return y};try{return this.isActive=!0,a?a.call(this,u,b,e):u(b,e)}catch(y){var v=this.sourceObj&&"function"===typeof this.sourceObj.world&&this.sourceObj.world()||this.targetObj&&"function"===typeof this.targetObj.world&&this.targetObj.world();v?v.logError(y,"AttributeConnection>>update: "):console.error("Error when trying to update "+this+" with value "+b+":\n"+y+"\n"+y.stack)}finally{delete this.isActive}return null}},{key:"addSourceObjGetterAndSetter",
value:function(b,e){if(!(b&&b.isAttributeConnectionGetter||e&&e.isAttributeConnectionSetter)){var m=this.sourceObj,a=this.sourceAttrName,g=this.privateAttrName(a);m[g]&&console.warn("newAttrName "+g+" already exists.Are there already other connections?");m.hasOwnProperty("doNotSerialize")||(m.doNotSerialize=[]);zg.arr.pushIfNotIncluded(m.doNotSerialize,g);m.hasOwnProperty("doNotCopyProperties")||(m.doNotCopyProperties=[]);zg.arr.pushIfNotIncluded(m.doNotCopyProperties,g);b&&(m.hasOwnProperty(a)?m.__defineGetter__(g,
b):m.__defineGetter__(g,function(){return m.constructor.prototype.__lookupGetter__(a).bind(m)()}));e&&(m.hasOwnProperty(a)?m.__defineSetter__(g,e):m.__defineSetter__(g,function(l){m.constructor.prototype.__lookupSetter__(a).bind(m)(l)}));b||e||!m.hasOwnProperty(a)||(m[g]=m[a]);m.__defineSetter__(a,function(l){var q=m[g];m[g]=l;if(void 0===m.attributeConnections)return console.error("Sth wrong with sourceObj, has no attributeConnections"),null;m.attributeConnections.forEach(function(r){r&&r.getSourceAttrName()===
a&&r.signalOnAssignment&&r.update(l,q)});return l});m.__lookupSetter__(a).isAttributeConnectionSetter=!0;m.__defineGetter__(a,function(){return m[g]});m.__lookupGetter__(a).isAttributeConnectionGetter=!0}}},{key:"addConnectionWrapper",value:function(b,e,m){if("function"!==typeof m)throw Error("addConnectionWrapper didnt get a method to wrap");var a;if(a=b.hasOwnProperty(e)){b[this.privateAttrName(e)]=m;var g=function(){return m}}else g=function(){return Object.getPrototypeOf(b)[e]};b[e]=function(){if(void 0===
this.attributeConnections)throw Error("[lively.bindings] Something is wrong with connection source object, it has no attributeConnections");for(var l=this.attributeConnections.slice(),q=this[e].originalFunction.apply(this,arguments),r=0;r<l.length;r++){var u=l[r];u.getSourceAttrName()===e&&u.update(arguments[0])}return q};b[e].isOwnProperty=a;b[e].isWrapped=!0;b[e].isConnectionWrapper=!0;Object.defineProperty(b[e],"originalFunction",{get:g});b[e].toString=function(){return"<Wrapped "+g()+">"}}},{key:"removeSourceObjGetterAndSetter",
value:function(){var b=this.sourceAttrName,e=this.privateAttrName(b),m=this.sourceObj;if(m){if(m.__lookupGetter__(b)){if(delete m[b],m.hasOwnProperty(e)){try{m[b]=m[e]}catch(g){}delete m[e]}}else if(m[b]&&m[b].isConnectionWrapper){var a=m[b];delete m[b];m[b]||(m[b]=a.originalFunction)}m.doNotSerialize&&m.doNotSerialize.includes(e)&&(m.doNotSerialize=zg.arr.without(m.doNotSerialize,e),0==m.doNotSerialize.length&&delete m.doNotSerialize);m.doNotCopyProperties&&m.doNotCopyProperties.includes(e)&&(m.doNotCopyProperties=
zg.arr.without(m.doNotCopyProperties,e),0==m.doNotCopyProperties.length&&delete m.doNotCopyProperties)}}},{key:"addAttributeConnection",value:function(){this.sourceObj.attributeConnections||(this.sourceObj.attributeConnections=[]);this.sourceObj.attributeConnections.push(this)}},{key:"getExistingConnection",value:function(){var b=this.sourceObj&&this.sourceObj.attributeConnections;if(!b)return null;for(var e=0,m=b.length;e<m;e++)if(this.isSimilarConnection(b[e]))return b[e];return null}},{key:"isRecursivelyActivated",
value:function(){return this.isActive}},{key:"isSimilarConnection",value:function(b){return b&&b.constructor==this.constructor?this.sourceObj==b.sourceObj&&this.sourceAttrName==b.sourceAttrName&&this.targetObj==b.targetObj&&this.targetMethodName==b.targetMethodName:!1}},{key:"toString",value:function(b){try{return zg.string.format("AttributeConnection(%s.%s %s %s.%s)",this.getSourceObj(),this.getSourceAttrName(),b?"--\x3e"+String(b)+"--\x3e":"--\x3e",this.getTargetObj(),this.getTargetMethodName())}catch(e){return"<Error in AttributeConnection>>toString>"}}}],
[{key:"className",get:function(){return"AttributeConnection"}}],h,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.bindings",version:"0.1.2"}}},{start:221,end:16605})}(void 0);zg.AttributeConnection=MH;zg.AttributeConnection=MH;zg.AttributeConnection=MH;zg.callWhenNotNull=dz;zg.callWhenNotNull=dz;zg.callWhenPathNotNull=ez;zg.callWhenPathNotNull=
ez;var Qda=Object.freeze({__proto__:null,connect:fk,disconnect:Jm,disconnectAll:ov,once:Xe,signal:tl,noUpdate:yp,AttributeConnection:MH,callWhenNotNull:dz,callWhenPathNotNull:ez});lively.FreezerRuntime.recorderFor("lively.serializer2/object-extensions.js");Object.defineProperty(Symbol.prototype,"__serialize__",{configurable:!0,value:function(){var d=function(){return Object.getOwnPropertyNames(Symbol).filter(function(n){return"symbol"===typeof Symbol[n]}).reduce(function(n,b){return n.set(Symbol[b],
"Symbol."+b)},new Map)}(),h=/^Symbol\((.*)\)$/;return function(){var n="function"===typeof this[Symbol.toPrimitive]?this[Symbol.toPrimitive]():this,b=Symbol.keyFor(n);if(b)return{__expr__:'Symbol.for("'+b+'")'};if(d.get(n))return{__expr__:d.get(n)};n=String(n).match(h);return{__expr__:n?'Symbol("'+n[1]+'")':"Symbol()"}}}()});Object.defineProperty(System,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System"}}});Object.defineProperty(System.global,"__serialize__",{configurable:!0,
value:function(){return{__expr__:"System.global"}}});Object.defineProperty(Map.prototype,"__serialize__",{configurable:!0,value:function(d,h,n){var b=d.add(this),e=b.currentRev,m=b.currentSnapshot,a=m.entries=[],g=0;h[b.id]=m;d.classHelper.addClassInfo(b,this,m);m=$jscomp.makeIterator(this);for(var l=m.next();!l.done;l=m.next()){var q=$jscomp.makeIterator(l.value);l=q.next().value;q=q.next().value;g++;l=b.snapshotProperty(b.id,l,n.concat("key",String(g)),h,d);q=b.snapshotProperty(b.id,q,n.concat("value",
String(g)),h,d);a.push(l,q)}return b.asRefForSerializedObjMap(e)}});Object.defineProperty(Map.prototype,"__deserialize__",{configurable:!0,value:function(d,h,n,b,e){d=d.entries;for(var m=0;m<d.length;m+=2){var a=d[m+1],g=h.recreateProperty("key."+m,d[m],n,b,e.concat("key",m));a=h.recreateProperty("value."+m,a,n,b,e.concat("value",m));this.set(g,a)}}});Object.defineProperty(Set.prototype,"__serialize__",{configurable:!0,value:function(d,h,n){var b=d.add(this),e=b.currentRev,m=b.currentSnapshot,a=m.entries=
[],g=0;h[b.id]=m;d.classHelper.addClassInfo(b,this,m);m=$jscomp.makeIterator(this);for(var l=m.next();!l.done;l=m.next())l=l.value,g++,l=b.snapshotProperty(b.id,l,n.concat("entry",String(g)),h,d),a.push(l);return b.asRefForSerializedObjMap(e)}});Object.defineProperty(Set.prototype,"__deserialize__",{configurable:!0,value:function(d,h,n,b,e){d=d.entries;for(var m=0;m<d.length;m++){var a=h.recreateProperty("entry."+m,d[m],n,b,e.concat("key",m));this.add(a)}}});var pO=lively.FreezerRuntime.recorderFor("lively.serializer2/util.js");
pO.isPrimitive=pv;pO.isPrimitive=pv;pO.isPrimitive=pv;var Ni=lively.FreezerRuntime.recorderFor("lively.serializer2/class-helper.js");Ni.getClassName=Jn;Ni.getSerializableClassMeta=zp;Ni.locateClass=kj;Ni.arr=vf;Ni.string=vh;Ni.classMetaForSerializationProp="lively.serializer-class-info";Ni.classSuperClassProp=Symbol.for("lively-instance-superclass");Ni.moduleMetaInClassProp=Symbol.for("lively-module-meta");Ni.getClassName=Jn;Ni.getClassName=Jn;Ni.getSerializableClassMeta=zp;Ni.getSerializableClassMeta=
zp;Ni.locateClass=kj;Ni.locateClass=kj;var Rs=function(d){this.options=Object.assign({ignoreClassNotFound:!0},d);this[Symbol.for("lively-instance-restorer")]=!0};Rs.prototype.addClassInfo=function(d,h,n){(d=Ni.getSerializableClassMeta(h))&&(n[Ni.classMetaForSerializationProp]=d)};Rs.prototype.restoreIfClassInstance=function(d,h){if(h.hasOwnProperty(Ni.classMetaForSerializationProp)&&(d=h[Ni.classMetaForSerializationProp],d.className)){h=Ni.locateClass(d);if(!h||"function"!==typeof h){h="Trying to deserialize instance of "+
JSON.stringify(d)+" but this class cannot be found!";if(!this.options.ignoreClassNotFound)throw Error(h);console.error(h);return{isClassPlaceHolder:!0,className:d.className}}return h.hasOwnProperty(Symbol.for("lively-instance-superclass"))?new h(this):new h}};Rs.sourceModulesInObjRef=function(d){var h=[];(d=d&&d[Ni.classMetaForSerializationProp])&&d.module&&h.push(d.module);return h};Rs.sourceModulesIn=function(d){var h=[];Object.keys(d).forEach(function(n){(n=d[n])&&n[Ni.classMetaForSerializationProp]&&
h.push(n[Ni.classMetaForSerializationProp])});return Ni.arr.uniqBy(h,function(n,b){var e=n.module,m=b.module;return!e&&!m||e&&!m||!e&&m?n.className===b.className:n.className===b.className&&e.package.name==m.package.name&&e.package.pathInPackage==m.package.pathInPackage})};$jscomp.global.Object.defineProperties(Rs.prototype,{classNameProperty:{configurable:!0,enumerable:!0,get:function(){return"__LivelyClassName__"}},sourceModuleNameProperty:{configurable:!0,enumerable:!0,get:function(){return"__SourceModuleName__"}}});
$jscomp.global.Object.defineProperties(Rs,{moduleMetaInClassProp:{configurable:!0,enumerable:!0,get:function(){return Ni.moduleMetaInClassProp}},classMetaForSerializationProp:{configurable:!0,enumerable:!0,get:function(){return Ni.classMetaForSerializationProp}},classSuperClassProp:{configurable:!0,enumerable:!0,get:function(){return Ni.classSuperClassProp}}});Ni.ClassHelper=Rs;Ni.default=Rs;var Yh=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins/expression-serializer.js");Yh.deserializeSpec=
lj;Yh.serializeSpec=Ki;Yh.string=vh;Yh.Closure=Ei;Yh.Path=nh;Yh.obj=Pf;Yh.properties=$m;Yh.arr=vf;Yh.getSerializableClassMeta=zp;Yh.connect=fk;var xm=function(d){this.prefix=Object.assign({prefix:"__lv_expr__"},d).prefix+":"};xm.prototype.isSerializedExpression=function(d){return 0===d.indexOf(this.prefix)};xm.prototype.requiredModulesOf__expr__=function(d){return this.isSerializedExpression(d)?(d=this.exprStringDecode(d).bindings)?Object.keys(d):null:null};xm.prototype.exprStringDecode=function(d){var h=
d.indexOf(":");d.slice(0,h);d=d.slice(h+1);for(var n={},b=!1;d&&d.startsWith("{")&&0<=(h=d.indexOf("}:"));){b=!0;var e=d.slice(1,h);d=d.slice(h+2);d.includes("https:")&&d.indexOf("https:")<d.indexOf(":")?(d=d.replace("https:","__HTTP_PLACEHOLDER__"),h=d.indexOf(":")-20+6,d=d.replace("__HTTP_PLACEHOLDER__","https:")):h=d.indexOf(":");var m=d.slice(0,h);e=e.split(",").filter(function(a){return!!a.trim()}).map(function(a){if(!a.includes(":"))return a;var g=$jscomp.makeIterator(a.split(":"));a=g.next().value;
g=g.next().value;return{exported:a,local:g}});n[m]=e;d=d.slice(h+1)}return{__expr__:d,bindings:b?n:null}};xm.prototype.exprStringEncode=function(d){var h=d.bindings;d=String(d.__expr__);if(h)for(var n=Object.keys(h),b=0;b<n.length;b++){var e=n[b],m=h[e];Array.isArray(m)&&(m=m.map(function(a){return"string"===typeof a?a:a.exported+":"+a.local}).join(","));d="{"+m+"}:"+e+":"+d}return this.prefix+d};xm.prototype.convert__expr__obj=function(d){console.assert("__expr__"in d,"obj has no property __expr__");
return this.prefix+d.__expr__};xm.prototype.__eval__=function(d,h){return Yh.__eval__(d,h)};xm.prototype.deserializeExpr=function(d){if(!d.startsWith(this.prefix))throw Error('"'+d+'" is not a serialized expression, missing prefix "'+this.prefix+'"');return this.deserializeExprObj(this.exprStringDecode(d))};xm.prototype.deserializeExprObj=function(d){var h=d.__expr__;d=d.bindings;var n={};if(d)for(var b=d?Object.keys(d):[],e=0;e<b.length;e++){var m=b[e],a=d[m];if(lively.FreezerRuntime){var g=lively.FreezerRuntime.get(lively.FreezerRuntime.decanonicalize(m));
if(!g){var l=lively.FreezerRuntime.fetchStandaloneFor(m);l&&(g=l.exports)}g.exports&&(g=g.exports)}else g=System.get(System.decanonicalize(m));if(!g)throw Error("[lively.serializer] expression eval: bindings specify to import "+m+" but this module is not loaded!\nSource: "+h);for(m=0;m<a.length;m++){var q=a[m],r=l=void 0;"string"===typeof q?r=l=q:"object"===typeof q&&(l=q.local,r=q.exported);n[l]=g[r];h="var "+l+" = __boundValues__."+l+";\n"+h}}return this.__eval__(h,n)};Yh.ExpressionSerializer=xm;
Yh.__eval__=Yh.Closure.fromSource("function __eval__(__source__, __boundValues__) { \n  return eval(__source__); \n}").getFunc();Yh.deserializeSpec=lj;Yh.deserializeSpec=lj;Yh.serializeSpec=Ki;Yh.serializeSpec=Ki;Yh.default=xm;var Ai=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins.js");Ai.obj=Pf;Ai.Plugin=function(){};var qO=function(){};qO.prototype.serializeObject=function(d,h,n,b,e){if("function"!==typeof d.__serialize__)return null;(d=d.__serialize__(n,b,e))&&d.hasOwnProperty("__expr__")&&
(n=n.expressionSerializer.exprStringEncode(d),d=h?n:{__expr__:n});return d};qO.prototype.deserializeObject=function(d,h,n,b){return(h=n.__expr__)?d.expressionSerializer.deserializeExpr(h):null};Ai.CustomSerializePlugin=qO;var rO=function(){};rO.prototype.additionallySerialize=function(d,h,n,b){d.classHelper.addClassInfo(h,h.realObj,n)};rO.prototype.deserializeObject=function(d,h,n,b){return d.classHelper.restoreIfClassInstance(h,n)};Ai.ClassPlugin=rO;var h1=function(){};h1.prototype.serializeObject=
function(d,h,n,b,e){d&&d.isMorph&&(d.__isBeingSerialized__=!0);return null};Ai.SerializationIndicationPlugin=h1;var i1=function(){};i1.prototype.additionallySerialize=function(d,h,n,b){h.realObj&&h.realObj.isMorph&&(h.realObj.__isBeingSerialized__=!1)};Ai.SerializationFinishPlugin=i1;var NH=function(){};NH.prototype.additionallySerialize=function(d,h,n,b){var e=h.realObj;e&&"function"===typeof e.__additionally_serialize__&&e.__additionally_serialize__(n,h,d,b)};NH.prototype.additionallyDeserializeBeforeProperties=
function(d,h,n,b,e,m,a){"function"===typeof n.__deserialize__&&n.__deserialize__(e,h,m,d,a)};NH.prototype.additionallyDeserializeAfterProperties=function(d,h,n,b,e,m){"function"===typeof n.__after_deserialize__&&n.__after_deserialize__(b,h)};Ai.AdditionallySerializePlugin=NH;var j1=function(){};j1.prototype.propertiesToSerialize=function(d,h,n,b){return(d=h.realObj)&&d.__only_serialize__||null};Ai.OnlySerializePropsPlugin=j1;var k1=function(){};k1.prototype.propertiesToSerialize=function(d,h,n,b){d=
h.realObj;if(!d||!d.__dont_serialize__)return null;d=Ai.obj.mergePropertyInHierarchy(d,"__dont_serialize__");h=[];for(n=0;n<b.length;n++){var e=b[n];d.includes(e)||h.push(e)}return h};Ai.DontSerializePropsPlugin=k1;var sO=function(){};sO.prototype.propertiesToSerialize=function(d,h,n,b){var e=h.realObj;h=e.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!h)return null;d=h.properties;n=h.propertySettings.valueStoreProperty||"_state";h=[];if(e[n]){if(e.__only_serialize__){for(var m=
0;m<b.length;m++){e=b[m];var a=d[e];e!==n&&(a&&a&&(a.derived||a.readOnly||a.hasOwnProperty("serialize")&&!a.serialize)||h.push(e))}return h}n=b.indexOf(n);-1<n&&b.splice(n,1);for(m in d)n=d[m],e=b.indexOf(m),n.derived||n.readOnly||n.hasOwnProperty("serialize")&&!n.serialize?-1<e&&b.splice(e,1):-1===e&&h.push(m);return h.concat(b)}};sO.prototype.additionallyDeserializeBeforeProperties=function(d,h,n,b,e,m,a){var g=n.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!g)return b;var l=
g.order;g=g.propertySettings.valueStoreProperty||"_state";b=e.props;if(b[g])return b;b=Ai.obj.clone(b);n.hasOwnProperty(g)||n.initializeProperties();for(e=0;e<l.length;e++)g=l[e],b.hasOwnProperty(g)&&(h.recreatePropertyAndSetProperty(n,b,g,m,d,a),delete b[g]);return b};Ai.LivelyClassPropertiesPlugin=sO;var tO={livelyClassPropertiesPlugin:new Ai.LivelyClassPropertiesPlugin,dontSerializePropsPlugin:new Ai.DontSerializePropsPlugin,onlySerializePropsPlugin:new Ai.OnlySerializePropsPlugin,additionallySerializePlugin:new Ai.AdditionallySerializePlugin,
classPlugin:new Ai.ClassPlugin,customSerializePlugin:new Ai.CustomSerializePlugin,indicationPlugin:new Ai.SerializationIndicationPlugin,finishPlugin:new Ai.SerializationFinishPlugin};Ai.plugins=tO;Ai.plugins=tO;Ai.plugins=tO;var jD=[Ai.plugins.indicationPlugin,Ai.plugins.customSerializePlugin,Ai.plugins.classPlugin,Ai.plugins.additionallySerializePlugin,Ai.plugins.onlySerializePropsPlugin,Ai.plugins.dontSerializePropsPlugin,Ai.plugins.livelyClassPropertiesPlugin,Ai.plugins.finishPlugin];Ai.allPlugins=
jD;Ai.allPlugins=jD;Ai.allPlugins=jD;var Vi=lively.FreezerRuntime.recorderFor("lively.serializer2/object-pool.js");Vi.__additionally_serialize__addObjectFunction=function(d,h,n,b,e){e=void 0===e?[]:e;return function(m,a,g){g=void 0===g?!1:g;return h.props[m]=g?{value:a,verbatim:g}:{value:d.snapshotProperty(d.id,a,e.concat([m]),n,b)}}};Vi.arr=vf;Vi.Path=nh;Vi.obj=Pf;Vi.string=vh;Vi.isPrimitive=pv;Vi.ClassHelper=Rs;Vi.ExpressionSerializer=xm;Vi.allPlugins=jD;Vi.debugSerialization=!1;Vi.debugDeserialization=
!1;var Hi=function(d){this.options=Object.assign({checkForLeaks:!1,ignoreClassNotFound:!0,idPropertyName:"id"},d);this.reset()};Hi.withDefaultPlugins=function(d){return new this(Object.assign({plugins:Vi.allPlugins},d))};Hi.resolveFromSnapshotAndId=function(d,h){return(new this(h)).resolveFromSnapshotAndId(d)};Hi.fromSnapshot=function(d,h){return(new this(h)).readSnapshot(d)};Hi.withObject=function(d,h){h=new this(h);h.add(d);return h};Hi.prototype.reset=function(){this.uuidGen=Vi.string.newUUID;
this._obj_ref_map=new Map;this._id_ref_map={};var d=this.options;this.classHelper=new Vi.ClassHelper(d);this.expressionSerializer=new Vi.ExpressionSerializer;d.idPropertyName&&(this.idPropertyName=d.idPropertyName);d.uuidGen&&(this.uuidGen=d.uuidGen);d.reinitializeIds&&(this.reinitializeIds=d.reinitializeIds);d.hasOwnProperty("ignoreClassNotFound")&&(this.classHelper.options.ignoreClassNotFound=d.ignoreClassNotFound);var h=this.plugins={serializeObject:[],additionallySerialize:[],propertiesToSerialize:[],
deserializeObject:[],additionallyDeserializeBeforeProperties:[],additionallyDeserializeAfterProperties:[],afterDeserialization:[],beforeDeserialization:[],afterSerialization:[],beforeSerialization:[]};d.plugins&&d.plugins.forEach(function(n){"function"===typeof n.serializeObject&&h.serializeObject.push(n);"function"===typeof n.additionallySerialize&&h.additionallySerialize.push(n);"function"===typeof n.propertiesToSerialize&&h.propertiesToSerialize.push(n);"function"===typeof n.deserializeObject&&
h.deserializeObject.push(n);"function"===typeof n.additionallyDeserializeBeforeProperties&&h.additionallyDeserializeBeforeProperties.push(n);"function"===typeof n.additionallyDeserializeAfterProperties&&h.additionallyDeserializeAfterProperties.push(n);"function"===typeof n.beforeDeserialization&&h.beforeDeserialization.push(n);"function"===typeof n.afterDeserialization&&h.afterDeserialization.push(n);"function"===typeof n.beforeSerialization&&h.beforeSerialization.push(n);"function"===typeof n.afterSerialization&&
h.afterSerialization.push(n)})};Hi.prototype.knowsId=function(d){return!!this._id_ref_map[d]};Hi.prototype.refForId=function(d){return this._id_ref_map[d]};Hi.prototype.resolveToObj=function(d){return(d=this._id_ref_map[d])?d.realObj:void 0};Hi.prototype.ref=function(d){return this._obj_ref_map.get(d)};Hi.prototype.objects=function(){return Array.from(this._obj_ref_map.keys())};Hi.prototype.objectRefs=function(){return Array.from(this._obj_ref_map.values())};Hi.prototype.internalAddRef=function(d){d.realObj&&
this._obj_ref_map.set(d.realObj,d);return this._id_ref_map[d.id]=d};Hi.prototype.add=function(d){var h=this;if(!Vi.isPrimitive(d)){if(Array.isArray(d))return d.map(function(b){return h.add(b)});var n=d.__serialization_id_property__||this.idPropertyName;return this.ref(d)||this.internalAddRef(new Vi.ObjectRef(d[n]||this.uuidGen(),d,void 0,this.idPropertyName))}};Hi.prototype.snapshot=function(d){var h={};this.plugin_beforeSerialization(h,d);for(var n=0,b=Object.keys(this._id_ref_map);n<b.length;n++)this._id_ref_map[b[n]].snapshotObject(h,
this);return h=this.plugin_afterSerialization(h,d)};Hi.prototype.snapshotObject=function(d){d=this.add(d).id;var h=this.snapshot(d);return{id:d,snapshot:h}};Hi.prototype.readSnapshot=function(d,h){if(d.hasOwnProperty("id"))throw Error("readSnapshot expects simple serialized object map, not id-snapshot pair!");if(this.options.skipMigrations)Vi.ObjectRef.fromSnapshot(h,d,this,[],this.idPropertyName);else{h=0;for(var n=Object.keys(d);h<n.length;h++)this.resolveToObj(n[h])||Vi.ObjectRef.fromSnapshot(n[h],
d,this,[],this.idPropertyName)}return this};Hi.prototype.resolveFromSnapshotAndId=function(d){if(!d.hasOwnProperty("id"))throw Error("idAndSnapshot does not have id");if(!d.hasOwnProperty("snapshot"))throw Error("idAndSnapshot does not have snapshot");var h=d=this.plugin_beforeDeserialization(d),n=h.id;this.readSnapshot(h.snapshot,n);this.plugin_afterDeserialization(d);return this.resolveToObj(n)};Hi.prototype.plugin_beforeSerialization=function(d,h){for(var n=0;n<this.plugins.beforeSerialization.length;n++)this.plugins.beforeSerialization[n].beforeSerialization(this,
d,h)};Hi.prototype.plugin_afterSerialization=function(d,h){for(var n=0;n<this.plugins.afterSerialization.length;n++){var b=this.plugins.afterSerialization[n].afterSerialization(this,d,h);b&&(d=b)}return d};Hi.prototype.plugin_beforeDeserialization=function(d){for(var h=0;h<this.plugins.beforeDeserialization.length;h++){var n=this.plugins.beforeDeserialization[h].beforeDeserialization(this,d);n&&(d=n)}return d};Hi.prototype.plugin_afterDeserialization=function(d){for(var h=0;h<this.plugins.afterDeserialization.length;h++)this.plugins.afterDeserialization[h].afterDeserialization(this,
d)};Hi.prototype.plugin_serializeObject=function(d,h,n,b){for(var e=0;e<this.plugins.serializeObject.length;e++){var m=this.plugins.serializeObject[e].serializeObject(d,h,this,n,b);if(m)return m}};Hi.prototype.plugin_propertiesToSerialize=function(d,h,n){for(var b=0;b<this.plugins.propertiesToSerialize.length;b++){var e=this.plugins.propertiesToSerialize[b].propertiesToSerialize(this,d,h,n);e&&(n=e)}return n};Hi.prototype.plugin_additionallySerialize=function(d,h,n,b){n=this.plugins.additionallySerialize.length?
Vi.__additionally_serialize__addObjectFunction(d,h,n,this,b):null;for(b=0;b<this.plugins.additionallySerialize.length;b++)this.plugins.additionallySerialize[b].additionallySerialize(this,d,h,n)};Hi.prototype.plugin_deserializeObject=function(d,h,n){for(var b=0;b<this.plugins.deserializeObject.length;b++){var e=this.plugins.deserializeObject[b].deserializeObject(this,d,h,n);if(e)return e}};Hi.prototype.plugin_additionallyDeserializeBeforeProperties=function(d,h,n,b,e,m){for(var a=0;a<this.plugins.additionallyDeserializeBeforeProperties.length;a++){var g=
this.plugins.additionallyDeserializeBeforeProperties[a].additionallyDeserializeBeforeProperties(this,d,h,n,b,e,m);g&&(n=g)}return n};Hi.prototype.plugin_additionallyDeserializeAfterProperties=function(d,h,n,b,e){for(var m=0;m<this.plugins.additionallyDeserializeAfterProperties.length;m++)this.plugins.additionallyDeserializeAfterProperties[m].additionallyDeserializeAfterProperties(this,d,h,n,b,e)};Vi.ObjectPool=Hi;var Po=function(d,h,n,b){this.id=d;this.idPropertyName=void 0===b?"id":b;this.realObj=
h;this.snapshotVersions=[];this.snapshots={};n&&(d=n.rev||0,this.snapshotVersions.push(d),this.snapshots[d]=n)};Po.fromSnapshot=function(d,h,n,b,e){b=void 0===b?[]:b;d=new this(d,void 0,void 0,e);try{return n.internalAddRef(d).recreateObjFromSnapshot(h,n,b)}catch(m){if(n.options.highlightBuggyMorphs)for(;b.length;){if((h=Vi.Path(b).map(function(a,g){return"submorphs"==a?g.filter(function(l){return!l.isHand&&!l.isEpiMorph}):g}).get(n.options.rootObject))&&h.isMorph&&h.world()){h.show(!0);n.options.highlightBuggyMorphs=
!1;break}b.pop()}throw m;}};Po.prototype.asRefForSerializedObjMap=function(d){return{__ref__:!0,id:this.id,rev:void 0===d?"????":d}};Po.prototype.snapshotObject=function(d,h,n){n=void 0===n?[]:n;Vi.debugSerialization&&console.log("[serialize] "+n.join("."));if(100<n.length)throw Error("Stopping serializer, encountered a possibly infinit loop: "+n.join("."));var b=this.id,e=this.realObj,m=this.snapshots;if(!e)return console.error("Cannot marshall object ref "+b+", no real object!"),Object.assign({},
this.asRefForSerializedObjMap(),{isMissing:!0});var a=e._rev||0;var g=this.asRefForSerializedObjMap(a);Vi.arr.pushIfNotIncluded(this.snapshotVersions,a);if(m[a])return d[b]||(d[b]=m[a]),g;var l=typeof b;"number"===l&&(b=String(b),l="string");if("string"!==l)throw Error("Error snapshoting "+e+": id is not a string but "+(b+" (serialization path: ")+(n.join(".")+")"));if(l=h.plugin_serializeObject(e,!1,d,n))return m[a]=d[b]=l,g;l=Object.getOwnPropertyNames(e);var q={};m=m[a]=d[b]={rev:a,props:q};(a=
h.plugin_propertiesToSerialize(this,m,l))&&(l=a);for(a=0;a<l.length;a++){var r=l[a];q[r]={value:this.snapshotProperty(b,e[r],n.concat([r]),d,h)}}h.plugin_additionallySerialize(this,m,d,n);return g};Po.prototype.snapshotProperty=function(d,h,n,b,e){var m=this;if(Vi.isPrimitive(h))return h;var a=e.plugin_serializeObject(h,!0,b,n);if(a)return a;if("function"!==typeof h)return Array.isArray(h)?h.map(function(g,l){return m.snapshotProperty(d,g,n.concat(l),b,e)}):(h=e.add(h))&&h.isObjectRef?h.snapshotObject(b,
e,n):h};Po.prototype.recreateObjFromSnapshot=function(d,h,n){if(this.realObj)return this;Vi.debugDeserialization&&console.log("[deserialize] "+this.id+" (via "+n.join(".")+")");var b=d[this.id];if(!b)return console.error("Cannot recreateObjFromSnapshot ObjectRef "+(this.id+" b/c of missing snapshot in snapshot map!")),this;var e=b.rev,m;e=e||0;this.snapshotVersions.push(e);this.snapshots[e]=b;(m=h.plugin_deserializeObject(this,b,n))||(m={});"undefined"===typeof m._rev&&"object"===typeof m&&(m._rev=
e||0);this.realObj=m;h.internalAddRef(this);if(!m)return this;e=b.props;var a=h.plugin_additionallyDeserializeBeforeProperties(this,m,e,b,d,n);a&&(e=a);if(e)for(var g in e)this.recreatePropertyAndSetProperty(m,e,g,d,h,n);g=m.__serialization_id_property__||this.idPropertyName;h.reinitializeIds&&m.hasOwnProperty(g)&&(m[g]=h.reinitializeIds(this.id,this));h.plugin_additionallyDeserializeAfterProperties(this,m,b,d,n);return this};Po.prototype.recreatePropertyAndSetProperty=function(d,h,n,b,e,m){try{var a=
h[n]||{value:"NON EXISTING"},g=a.value;d[n]=a.verbatim?g:this.recreateProperty(n,g,b,e,m.concat(n))}catch(q){try{var l=String(d)}catch(r){l="[some "+d.constructor.name+"]"}q.__seen?console.error("Error deserializing property "+n+" of "+l):(d=n+" of "+l+" ("+JSON.stringify(g)+")",console.error("Error deserializing property "+d),q.__seen=!0);throw q;}};Po.prototype.recreateProperty=function(d,h,n,b,e){var m=this;if("string"===typeof h&&b.expressionSerializer.isSerializedExpression(h))return b.expressionSerializer.deserializeExpr(h);
if(Vi.isPrimitive(h))return h;if(Array.isArray(h))return h.map(function(a,g){return m.recreateProperty(g,a,n,b,e.concat(g))});d=h.__serialization_id_property__||this.idPropertyName;return(b.refForId(h[d])||Vi.ObjectRef.fromSnapshot(h[d],n,b,e,this.idPropertyName)).realObj};$jscomp.global.Object.defineProperties(Po.prototype,{isObjectRef:{configurable:!0,enumerable:!0,get:function(){return!0}},currentSnapshot:{configurable:!0,enumerable:!0,get:function(){if(this.snapshotVersions.length)var d=Vi.arr.last(this.snapshotVersions);
else d=0,this.snapshotVersions.push(d);return this.snapshots[d]||(this.snapshots[d]={rev:d,props:{}})}},currentRev:{configurable:!0,enumerable:!0,get:function(){return this.snapshotVersions.length?Vi.arr.last(this.snapshotVersions):0}}});sa("bO",Po);Vi.ObjectRef=Po;var rf=lively.FreezerRuntime.recorderFor("lively.serializer2/snapshot-navigation.js");rf.referenceGraph=rB;rf.isReference=Zw;rf.referencesOfRef=Zf;rf.referencesOfId=qv;rf.referencesInArray=St;rf.moduleOfId=rv;rf.referencesAndClassNamesOfId=
xo;rf.classNameOfId=fn;rf.findPathFromToId=gn;rf.lookupPath=sB;rf.modifyProperty=tB;rf.removeUnreachableObjects=Ap;rf.clearDanglingConnections=fz;rf.requiredModulesOfSnapshot=Jq;rf.ClassHelper=Rs;rf.Path=nh;rf.obj=Pf;rf.arr=vf;rf.graph=Ir;rf.ExpressionSerializer=xm;rf.referenceGraph=rB;rf.referenceGraph=rB;rf.isReference=Zw;rf.isReference=Zw;rf.referencesOfRef=Zf;rf.referencesOfRef=Zf;rf.referencesOfId=qv;rf.referencesOfId=qv;rf.moduleOfId=rv;rf.moduleOfId=rv;rf.referencesAndClassNamesOfId=xo;rf.referencesAndClassNamesOfId=
xo;rf.classNameOfId=fn;rf.classNameOfId=fn;rf.findPathFromToId=gn;rf.findPathFromToId=gn;rf.lookupPath=sB;rf.lookupPath=sB;rf.modifyProperty=tB;rf.modifyProperty=tB;rf.removeUnreachableObjects=Ap;rf.removeUnreachableObjects=Ap;rf.clearDanglingConnections=fz;rf.clearDanglingConnections=fz;rf.defaultExprSerializer=new rf.ExpressionSerializer;rf.requiredModulesOfSnapshot=Jq;rf.requiredModulesOfSnapshot=Jq;var HQ={},GQ=!1,l1,hz="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,
Mk=l1={};try{var sv="function"==typeof setTimeout?setTimeout:uB}catch(d){sv=uB}try{var tv="function"==typeof clearTimeout?clearTimeout:vB}catch(d){tv=vB}!0;var $w,Tt=[],iz=!1,BE=-1;Mk.nextTick=function(d){var h=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)h[n-1]=arguments[n];Tt.push(new xB(d,h));1!==Tt.length||iz||wB(fh)};xB.prototype.run=function(){(this||hz).fun.apply(null,(this||hz).array)};Mk.title="browser";Mk.browser=!0;Mk.env={};Mk.argv=[];Mk.version="";
Mk.versions={};Mk.on=Bp;Mk.addListener=Bp;Mk.once=Bp;Mk.off=Bp;Mk.removeListener=Bp;Mk.removeAllListeners=Bp;Mk.emit=Bp;Mk.prependListener=Bp;Mk.prependOnceListener=Bp;Mk.listeners=function(d){return[]};Mk.binding=function(d){throw Error("process.binding is not supported");};Mk.cwd=function(){return"/"};Mk.chdir=function(d){throw Error("process.chdir is not supported");};Mk.umask=function(){return 0};var KQ=sa("bi",l1),JQ={},IQ=!1,bs={},LQ=!1,NQ={},MQ=!1,PQ={},OQ=!1,nf="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,RQ={},QQ=!1,TQ={},SQ=!1,VQ={},UQ=!1,XQ={},WQ=!1,ZQ={},YQ=!1,aR={},$Q=!1,cR={},bR=!1,eR={},dR=!1,gR={},fR=!1,iR={},hR=!1,kR={},jR=!1,mR={},lR=!1,oR={},nR=!1,qR={},pR=!1,sR={},rR=!1,uR={},tR=!1,wR={},vR=!1,yR={},xR=!1,AR={},zR=!1,CR={},BR=!1,ER={},DR=!1,GR={},FR=!1,IR={},HR=!1,aK={},JR=!1,gk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,bK={},KR=!1,ci="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,MR={},LR=!1,OR={},NR=!1,QR={},PR=!1,SR={},RR=!1,UR={},TR=!1,WR={},VR=!1,ZR={},YR=!1,aS={},$R=!1,cS={},bS=!1,eS={},dS=!1,gS={},fS=!1,iS={},hS=!1,m1={},n1=!1,Rda=function(){if(n1)return m1;n1=!0;var d=Ut();return m1={re:d.re,src:d.src,tokens:d.t,SEMVER_SPEC_VERSION:gz().SEMVER_SPEC_VERSION,SemVer:Wj(),compareIdentifiers:Vt().compareIdentifiers,rcompareIdentifiers:Vt().rcompareIdentifiers,parse:cs(),valid:XJ(),clean:YJ(),inc:yB(),diff:ZJ(),major:CE(),minor:$J(),patch:si(),prerelease:Ln(),
compare:Kn(),rcompare:hn(),compareLoose:jz(),compareBuild:Jb(),sort:jn(),rsort:uv(),gt:vv(),lt:Km(),eq:zB(),neq:AB(),gte:wv(),lte:BB(),cmp:CB(),coerce:xv(),Comparator:Wt(),Range:rm(),satisfies:ax(),toComparators:Qj(),maxSatisfying:ds(),minSatisfying:sm(),minVersion:cK(),validRange:ph(),outside:bx(),gtr:dK(),ltr:eK(),intersects:cx(),simplifyRange:DB(),subset:yo()}}(),Cf=lively.FreezerRuntime.recorderFor("lively.serializer2/index.js");Cf.normalizeOptions=gh;Cf.normalizeMigrations=function(d){d=void 0===
d?[]:d;return{before:d.filter(function(h){return"function"===typeof h.snapshotConverter}),after:d.filter(function(h){return"function"===typeof h.objectConverter})}};Cf.runMigrations=function(d,h,n,b){for(var e=0;e<d.length;e++){var m=d[e];try{n=m[h](n,b)}catch(a){console.error("migration "+m.name+" failed:"),console.error(a)}}return n};Cf.serialize=yv;Cf.deserialize=es;Cf.deserializeWithMigrations=Mn;Cf.copy=dx;Cf.ObjectPool=Hi;Cf.serializerVersion="0.1.3";Cf.requiredModulesOfSnapshot=Jq;Cf.removeUnreachableObjects=
Ap;Cf.clearDanglingConnections=fz;Cf.allPlugins=jD;Cf.semver=Rda;Cf.normalizeOptions=gh;Cf.normalizeOptions=gh;Cf.majorAndMinorVersionRe=/\.[^\.]+$/;Cf.ObjectRef=Po;Cf.ObjectRef=Po;Cf.ObjectPool=Hi;Cf.ObjectPool=Hi;Cf.requiredModulesOfSnapshot=Jq;Cf.requiredModulesOfSnapshot=Jq;Cf.removeUnreachableObjects=Ap;Cf.removeUnreachableObjects=Ap;Cf.serialize=yv;Cf.serialize=yv;Cf.deserialize=es;Cf.deserialize=es;Cf.deserializeWithMigrations=Mn;Cf.deserializeWithMigrations=Mn;Cf.copy=dx;Cf.copy=dx;Cf.ExpressionSerializer=
xm;Cf.serializeSpec=Ki;Cf.deserializeSpec=lj;Cf.getSerializableClassMeta=zp;Cf.locateClass=kj;Cf.getClassName=Jn;Cf.ExpressionSerializer=xm;Cf.ExpressionSerializer=xm;Cf.getSerializableClassMeta=zp;Cf.getSerializableClassMeta=zp;Cf.locateClass=kj;Cf.locateClass=kj;Cf.serializeSpec=Ki;Cf.serializeSpec=Ki;Cf.deserializeSpec=lj;Cf.deserializeSpec=lj;Cf.getClassName=Jn;Cf.getClassName=Jn;var Sda=Object.freeze({__proto__:null,normalizeOptions:gh,ObjectRef:Po,ObjectPool:Hi,requiredModulesOfSnapshot:Jq,
removeUnreachableObjects:Ap,serialize:yv,deserialize:es,deserializeWithMigrations:Mn,copy:dx,ExpressionSerializer:xm,getSerializableClassMeta:zp,locateClass:kj,serializeSpec:Ki,deserializeSpec:lj,getClassName:Jn}),Tda={},w5=Object.prototype.toString,uO=Tda=Array.isArray||ex,Uda={},kD=Uda="2",fK="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,o1={};Pl.NONE=0;Pl.VTEXT=1;Pl.VNODE=2;Pl.WIDGET=3;Pl.PROPS=4;Pl.ORDER=5;Pl.INSERT=6;Pl.REMOVE=7;Pl.THUNK=8;o1=Pl;Pl.prototype.version=
kD;Pl.prototype.type="VirtualPatch";var Cu=o1,Vda={},lD=Vda=function(d){return d&&"VirtualNode"===d.type&&d.version===kD},Wda={},OH=Wda=function(d){return d&&"VirtualText"===d.type&&d.version===kD},Xda={},pw=Xda=function(d){return d&&"Widget"===d.type},Yda={},mD=Yda=function(d){return d&&"Thunk"===d.type},Zda={},x5=lD,y5=OH,z5=pw,p1=Zda=function(d,h){var n=d,b=h;mD(h)&&(b=kn(h,d));mD(d)&&(n=kn(d,null));return{a:n,b:b}},$da={},PH=$da=function(d){return"object"===typeof d&&null!==d},aea={},nD=aea=function(d){return d&&
("function"===typeof d.hook&&!d.hasOwnProperty("hook")||"function"===typeof d.unhook&&!d.hasOwnProperty("unhook"))},q1={},jS=PH,A5=nD;q1=Xj;var r1={},D5=uO,hk=Cu,gx=lD,kS=OH,GE=pw,FE=mD,C5=p1,B5=q1;r1=DE;var bea={},cea=bea=r1,dea=Object.freeze({}),s1="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,eea={},t1="undefined"!==typeof s1?s1:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var vO=document;else(vO=t1["__GLOBAL_DOCUMENT_CACHE@4"])||(vO=
t1["__GLOBAL_DOCUMENT_CACHE@4"]=dea);var u1=eea=vO,fea={},lS=nD,v1=fea=function(d,h,n){for(var b in h){var e=h[b];if(void 0===e)Ao(d,b,e,n);else if(lS(e))Ao(d,b,e,n),e.hook&&e.hook(d,b,n?n[b]:void 0);else if(PH(e)){var m=void 0,a=void 0,g=d,l=b,q=n?n[l]:void 0;if("attributes"===l)for(a in e)m=e[a],void 0===m?g.removeAttribute(a):g.setAttribute(a,m);else if(q&&PH(q)&&lz(q)!==lz(e))g[l]=e;else for(m in PH(g[l])||(g[l]={}),a="style"===l?"":void 0,e)q=e[m],g[l][m]=void 0===q?a:q}else d[b]=e}},gea={},
mS=u1,I5=v1,H5=lD,G5=OH,F5=pw,E5=p1,w1=gea=zv,hea={},iea=hea=function(d,h){return pw(d)&&pw(h)?"name"in d&&"name"in h?d.id===h.id:d.init===h.init:!1},jea={},J5={},kea=jea=function(d,h,n,b){return n&&0!==n.length?(n.sort(gK),HE(d,h,n,b,0)):{}},x1={},K5=pw;x1=function(d,h,n){var b=d.vNode,e=d.patch;switch(d.type){case Cu.REMOVE:return(e=h.parentNode)&&e.removeChild(h),JE(h,b),null;case Cu.INSERT:return e=n.render(e,n),h&&h.appendChild(e),h;case Cu.VTEXT:return 3===h.nodeType?(h.replaceData(0,h.length,
e.text),e=h):(b=h.parentNode,e=n.render(e,n),b&&e!==h&&b.replaceChild(e,h)),e;case Cu.WIDGET:return e=(d=iea(b,e))?e.update(b,h)||h:n.render(e,n),(n=h.parentNode)&&e!==h&&n.replaceChild(e,h),d||JE(h,b),e;case Cu.VNODE:return b=h.parentNode,e=n.render(e,n),b&&e!==h&&b.replaceChild(e,h),e;case Cu.ORDER:b=h.childNodes;n={};for(var m,a=0;a<e.removes.length;a++)m=e.removes[a],d=b[m.from],m.key&&(n[m.key]=d),h.removeChild(d);a=b.length;for(var g=0;g<e.inserts.length;g++)m=e.inserts[g],d=n[m.key],h.insertBefore(d,
m.to>=a++?null:b[m.to]);return h;case Cu.PROPS:return v1(h,e,b.properties),h;case Cu.THUNK:return e=n.patch(h,e,n),h&&e&&h!==e&&h.parentNode&&h.parentNode.replaceChild(e,h),e;default:return h}};var y1={},N5=u1,O5=uO,L5=w1,M5=kea,nS=x1;y1=EB;var lea={},mea=lea=y1,fs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,z1={},S5=lD,T5=pw,U5=mD,R5=nD;z1=FB;var P5={},Q5=[];FB.prototype.version=kD;FB.prototype.type="VirtualNode";var wO=z1,V5="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,A1={};A1=Kk;Kk.prototype.version=kD;Kk.prototype.type="VirtualText";var xO=A1,B1={};B1=function(d){var h=String.prototype.split,n=/()??/.exec("")[1]===d;return function(b,e,m){if("[object RegExp]"!==Object.prototype.toString.call(e))return h.call(b,e,m);var a=[],g=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),l=0;e=new RegExp(e.source,g+"g");var q,r;b+="";n||(q=new RegExp("^"+e.source+"$(?!\\s)",g));for(m=m===d?4294967295:m>>>
0;r=e.exec(b);){g=r.index+r[0].length;if(g>l){a.push(b.slice(l,r.index));!n&&1<r.length&&r[0].replace(q,function(){for(var v=1;v<arguments.length-2;v++)arguments[v]===d&&(r[v]=d)});1<r.length&&r.index<b.length&&Array.prototype.push.apply(a,r.slice(1));var u=r[0].length;l=g;if(a.length>=m)break}e.lastIndex===r.index&&e.lastIndex++}l===b.length?(u||!e.test(""))&&a.push(""):a.push(b.slice(l));return a.length>m?a.slice(0,m):a}}();var nea={},oea=B1,pea=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,qea=/^\.|#/,
rea=nea=function(d,h){if(!d)return"DIV";var n=!h.hasOwnProperty("id");d=oea(d,pea);var b=null;qea.test(d[1])&&(b="DIV");var e,m;for(m=0;m<d.length;m++)if(e=d[m]){var a=e.charAt(0);if(b)if("."===a){var g=g||[];g.push(e.substring(1,e.length))}else"#"===a&&n&&(h.id=e.substring(1,e.length));else b=e}g&&(h.className&&g.push(h.className),h.className=g.join(" "));return h.namespace?b:b.toUpperCase()},C1={};C1=mz;mz.prototype.hook=function(d,h){d[h]!==this.value&&(d[h]=this.value)};var sea=C1,D1="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof self?self:global,E1={},yO="undefined"!==typeof window?window:"undefined"!==typeof D1?D1:{};E1=function(d,h){return d in yO?yO[d]:yO[d]=h};var F1={},G1=E1;F1=function(d,h,n){var b="__INDIVIDUAL_ONE_VERSION_"+d,e=G1(b+"_ENFORCE_SINGLETON",h);if(e!==h)throw Error("Can only have one copy of "+d+".\nYou already have version "+e+" installed.\nThis means you cannot install version "+h);return G1(b,n)};var H1={};F1("ev-store","7");H1=function(d){var h=d["__EV_STORE_KEY@7"];
h||(h=d["__EV_STORE_KEY@7"]={});return h};var I1={},J1=H1;I1=cl;cl.prototype.hook=function(d,h){d=J1(d);h=h.substr(3);d[h]=this.value};cl.prototype.unhook=function(d,h){d=J1(d);h=h.substr(3);d[h]=void 0};var K1={},pS=uO,oS=xO,W5=lD,X5=OH,Y5=pw,Z5=mD,tea=I1;K1=function(d,h,n){var b=[],e;if(e=!n)e="string"===typeof h||pS(h)||KE(h);if(e){n=h;var m={}}m=m||h||{};d=rea(d,m);if(m.hasOwnProperty("key")){var a=m.key;m.key=void 0}if(m.hasOwnProperty("namespace")){var g=m.namespace;m.namespace=void 0}"INPUT"!==
d||g||!m.hasOwnProperty("value")||void 0===m.value||nD(m.value)||(m.value=sea(m.value));h=m;for(var l in h)h.hasOwnProperty(l)&&(e=h[l],nD(e)||"ev-"===l.substr(0,3)&&(h[l]=tea(e)));void 0!==n&&null!==n&&gs(n,b,d,m);return new wO(d,m,b,a,g)};var uea={},vea=uea=K1,L1={};L1=w1;var wea={},oD=wea={diff:cea,patch:mea,h:vea,create:L1,VNode:wO,VText:xO},xea={},yea=xea={abbr:"abbr",accept:"accept","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",
alt:"alt",async:"async",autocomplete:"autoComplete",autofocus:"autoFocus",autoplay:"autoPlay",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charset",checked:"checked",cite:"cite","class":"className",cols:"cols",colspan:"colSpan",command:"command",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",coords:"coords",crossorigin:"crossOrigin",data:"data",datetime:"dateTime","default":"default",defer:"defer",dir:"dir",disabled:"disabled",
download:"download",draggable:"draggable",dropzone:"dropzone",enctype:"encType","for":"htmlFor",form:"form",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameBorder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang","http-equiv":"httpEquiv",icon:"icon",id:"id",inputmode:"inputMode",ismap:"isMap",itemid:"itemId",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",
itemtype:"itemType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",manifest:"manifest",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",ping:"ping",placeholder:"placeholder",poster:"poster",preload:"preload",radiogroup:"radioGroup",readonly:"readOnly",rel:"rel",required:"required",role:"role",rows:"rows",
rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",sortable:"sortable",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srcset:"srcSet",start:"start",step:"step",style:"style",tabindex:"tabIndex",target:"target",title:"title",translate:"translate",type:"type",typemustmatch:"typeMustMatch",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap"},M1={};M1={about:null,
"accent-height":null,accumulate:null,additive:null,"alignment-baseline":null,alphabetic:null,amplitude:null,"arabic-form":null,ascent:null,attributeName:null,attributeType:null,azimuth:null,bandwidth:null,baseFrequency:null,baseProfile:null,"baseline-shift":null,bbox:null,begin:null,bias:null,by:null,calcMode:null,"cap-height":null,"class":null,clip:null,"clip-path":null,"clip-rule":null,clipPathUnits:null,color:null,"color-interpolation":null,"color-interpolation-filters":null,"color-profile":null,
"color-rendering":null,content:null,contentScriptType:null,contentStyleType:null,cursor:null,cx:null,cy:null,d:null,datatype:null,defaultAction:null,descent:null,diffuseConstant:null,direction:null,display:null,divisor:null,"dominant-baseline":null,dur:null,dx:null,dy:null,edgeMode:null,editable:null,elevation:null,"enable-background":null,end:null,"ev:event":"http://www.w3.org/2001/xml-events",event:null,exponent:null,externalResourcesRequired:null,fill:null,"fill-opacity":null,"fill-rule":null,
filter:null,filterRes:null,filterUnits:null,"flood-color":null,"flood-opacity":null,focusHighlight:null,focusable:null,"font-family":null,"font-size":null,"font-size-adjust":null,"font-stretch":null,"font-style":null,"font-variant":null,"font-weight":null,format:null,from:null,fx:null,fy:null,g1:null,g2:null,"glyph-name":null,"glyph-orientation-horizontal":null,"glyph-orientation-vertical":null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:null,height:null,"horiz-adv-x":null,
"horiz-origin-x":null,"horiz-origin-y":null,id:null,ideographic:null,"image-rendering":null,"in":null,in2:null,initialVisibility:null,intercept:null,k:null,k1:null,k2:null,k3:null,k4:null,kernelMatrix:null,kernelUnitLength:null,kerning:null,keyPoints:null,keySplines:null,keyTimes:null,lang:null,lengthAdjust:null,"letter-spacing":null,"lighting-color":null,limitingConeAngle:null,local:null,"marker-end":null,"marker-mid":null,"marker-start":null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,
maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:null,mediaTime:null,method:null,min:null,mode:null,name:null,"nav-down":null,"nav-down-left":null,"nav-down-right":null,"nav-left":null,"nav-next":null,"nav-prev":null,"nav-right":null,"nav-up":null,"nav-up-left":null,"nav-up-right":null,numOctaves:null,observer:null,offset:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,
overlay:null,"overline-position":null,"overline-thickness":null,"panose-1":null,path:null,pathLength:null,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,playbackOrder:null,"pointer-events":null,points:null,pointsAtX:null,pointsAtY:null,pointsAtZ:null,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:null,r:null,radius:null,refX:null,refY:null,rel:null,"rendering-intent":null,repeatCount:null,repeatDur:null,requiredExtensions:null,
requiredFeatures:null,requiredFonts:null,requiredFormats:null,resource:null,restart:null,result:null,rev:null,role:null,rotate:null,rx:null,ry:null,scale:null,seed:null,"shape-rendering":null,slope:null,snapshotTime:null,spacing:null,specularConstant:null,specularExponent:null,spreadMethod:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,"stop-color":null,"stop-opacity":null,"strikethrough-position":null,"strikethrough-thickness":null,string:null,stroke:null,"stroke-dasharray":null,
"stroke-dashoffset":null,"stroke-linecap":null,"stroke-linejoin":null,"stroke-miterlimit":null,"stroke-opacity":null,"stroke-width":null,surfaceScale:null,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:null,tableValues:null,target:null,targetX:null,targetY:null,"text-anchor":null,"text-decoration":null,"text-rendering":null,textLength:null,timelineBegin:null,title:null,to:null,transform:null,transformBehavior:null,type:null,"typeof":null,
u1:null,u2:null,"underline-position":null,"underline-thickness":null,unicode:null,"unicode-bidi":null,"unicode-range":null,"units-per-em":null,"v-alphabetic":null,"v-hanging":null,"v-ideographic":null,"v-mathematical":null,values:null,version:null,"vert-adv-y":null,"vert-origin-x":null,"vert-origin-y":null,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,"word-spacing":null,"writing-mode":null,x:null,"x-height":null,x1:null,x2:null,xChannelSelector:null,"xlink:actuate":"http://www.w3.org/1999/xlink",
"xlink:arcrole":"http://www.w3.org/1999/xlink","xlink:href":"http://www.w3.org/1999/xlink","xlink:role":"http://www.w3.org/1999/xlink","xlink:show":"http://www.w3.org/1999/xlink","xlink:title":"http://www.w3.org/1999/xlink","xlink:type":"http://www.w3.org/1999/xlink","xml:base":"http://www.w3.org/XML/1998/namespace","xml:id":"http://www.w3.org/XML/1998/namespace","xml:lang":"http://www.w3.org/XML/1998/namespace","xml:space":"http://www.w3.org/XML/1998/namespace",y:null,y1:null,y2:null,yChannelSelector:null,
z:null,zoomAndPan:null};var zea={},a6=wO,qS=xO,zO,rS=yea,$5=M1,Aea=zea=function(d,h){if(!d)return nz(document.createTextNode(""));if("string"===typeof d){if(!("DOMParser"in window))throw Error("DOMParser is not available, so parsing string to DOM node is not possible.");zO=zO||new DOMParser;d=zO.parseFromString(d,"text/html");d=d.body.firstChild?d.getElementsByTagName("body")[0].firstChild:d.head.firstChild&&("TITLE"!==d.head.firstChild.tagName||d.title)?d.head.firstChild:d.firstChild&&"HTML"!==d.firstChild.tagName?
d.firstChild:document.createTextNode("")}if("object"!==typeof d||!d||!d.nodeType)throw Error("invalid dom node",d);return nz(d,h)},hh=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/property-dom-mapping.js");hh.styleProps=hx;hh.addTransform=GB;hh.addTransformOrigin=function(d,h){if(d=d.origin)h.transformOrigin=d.x+"px "+d.y+"px"};hh.addDisplay=function(d,h){d=d.visible;null!=d&&(h.display=d?"":"none")};hh.addBorderRadius=function(d,h){var n=d.borderRadiusLeft,b=d.borderRadiusRight,e=d.borderRadiusBottom;
d=d.borderRadiusTop;h.borderRadius=d+"px "+d+"px "+e+"px "+e+"px / "+n+"px "+b+"px "+b+"px "+n+"px"};hh.addBorder=function(d,h){var n=d.borderWidthLeft,b=d.borderColorLeft,e=d.borderStyleLeft,m=d.borderWidthRight,a=d.borderColorRight,g=d.borderStyleRight,l=d.borderColor,q=d.borderWidthBottom,r=d.borderColorBottom,u=d.borderStyleBottom,v=d.borderWidthTop,y=d.borderColorTop;d=d.borderStyleTop;var z=function(A){return hh.bowser.safari?hh.string.camelize(A):A};h[z("border-left-style")]=""+e;h[z("border-right-style")]=
""+g;h[z("border-bottom-style")]=""+u;h[z("border-top-style")]=""+d;h[z("border-left-width")]=n+"px";h[z("border-right-width")]=m+"px";h[z("border-bottom-width")]=q+"px";h[z("border-top-width")]=v+"px";h[z("border-top-color")]=y?y.toString():"transparent";h[z("border-right-color")]=a?a.toString():"transparent";h[z("border-bottom-color")]=r?r.toString():"transparent";h[z("border-left-color")]=b?b.toString():"transparent";l&&l.isGradient&&(h["border-image"]=l.toString())};hh.addFill=function(d,h){(d=
d.fill)?d.isGradient?h.backgroundImage=d.toString():h.background=d.toString():h.background=hh.Color.transparent.toString()};hh.addExtentStyle=function(d,h){d=d.extent;h.width=d.x+"px";h.height=d.y+"px"};hh.shadowCss=function(d){return d.dropShadow?d.dropShadow.toFilterCss():""};hh.addShadowStyle=function(d,h){d.isSvgMorph||d.isImage?h.filter=hh.shadowCss(d):(d=d.dropShadow)&&d.fast||d&&d.inset?h.boxShadow=d?d.toCss():"none":h.filter=d?d.toFilterCss():""};hh.addSvgAttributes=ix;hh.getSvgVertices=Yt;
hh.addPathAttributes=jx;hh.addSvgBorderStyle=function(d,h){var n=d.borderStyle.valueOf();"dashed"===n?(d=d.borderWidth.valueOf(),h["stroke-dasharray"]=1.61*d+" "+d):"dotted"===n&&(h["stroke-dasharray"]="1 "+2*d.borderWidth.valueOf(),h["stroke-linecap"]="round",h["stroke-linejoin"]="round");return h};hh.config=wk;hh.pt=oh;hh.Color=Wf;hh.arr=vf;hh.num=Bk;hh.string=vh;hh.bowser=Qs;hh.styleProps=hx;hh.styleProps=hx;hh.addTransform=GB;hh.addTransform=GB;hh.addSvgAttributes=ix;hh.addSvgAttributes=ix;hh.getSvgVertices=
Yt;hh.getSvgVertices=Yt;hh.addPathAttributes=jx;hh.addPathAttributes=jx;var te=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js");te.defaultStyle=Zt;te.MorphAfterRenderHook=function(d,h){this.morph=d;this.renderer=h};te.Animation=function(d){this.morph=d};te.SvgAnimation=HB;te.defaultAttributes=Av;te.svgAttributes=oz;te.pathAttributes=pz;te.renderGradient=$t;te.initDOMState=function(d,h){d.rootNode.appendChild(d.domNode);d.ensureDefaultCSS().then(function(){return te.promise.delay(500)}).then(function(){return h.env.fontMetric&&
h.env.fontMetric.reset()}).then(function(){return h.withAllSubmorphsDo(function(n){if(n.isText||n.isLabel){var b=(n.metadata||{}).serializationInfo;b&&b.recoveredTextBounds||n.forceRerender()}})}).catch(function(n){return console.error(n)})};te.renderMorph=kx;te.renderSubTree=qz;te.renderRootMorph=hs;te.vdom=oD;te.parser=Aea;te.num=Bk;te.obj=Pf;te.arr=vf;te.properties=$m;te.promise=yg;te.Color=Wf;te.RadialGradient=rn;te.pt=oh;te.Point=$f;te.LinearGradient=El;te.rect=Ii;te.config=wk;te.styleProps=
hx;te.addSvgAttributes=ix;te.addPathAttributes=jx;te.bowser=Qs;var QH=te.vdom;te.h=QH.h;te.diff=QH.diff;te.patch=QH.patch;te.createNode=QH.create;te.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
te.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
te.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
var bq=sa("be",function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js"),n=h.hasOwnProperty("ShadowObject")&&"function"===typeof h.ShadowObject?h.ShadowObject:h.ShadowObject=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){te.obj.isBoolean(b)&&(b=te.config.defaultShadow);var e=b;b=e.rotation;var m=e.distance,
a=e.blur,g=e.color,l=e.morph,q=e.inset,r=e.spread;e=e.fast;this.rotation=te.obj.isNumber(b)?b:45;this.distance=te.obj.isNumber(m)?m:2;this.blur=te.obj.isNumber(a)?a:6;this.inset=q||!1;this.spread=r||0;this.color=g||te.Color.gray.darker();this.morph=l;this.fast=e}},{key:"__dont_serialize__",get:function(){return["morph"]}},{key:"distance",get:function(){return this._distance}},{key:"blur",get:function(){return this._blur}},{key:"rotation",get:function(){return this._rotation}},{key:"color",get:function(){return this._color}},
{key:"inset",get:function(){return this._inset}},{key:"inset",set:function(b){this._inset=b;this.morph&&(this.morph.dropShadow=this)}},{key:"distance",set:function(b){this._distance=b;this.morph&&(this.morph.dropShadow=this)}},{key:"blur",set:function(b){this._blur=b;this.morph&&(this.morph.dropShadow=this)}},{key:"rotation",set:function(b){this._rotation=b;this.morph&&(this.morph.dropShadow=this)}},{key:"color",set:function(b){this._color=b;this.morph&&(this.morph.dropShadow=this)}},{key:"isShadowObject",
get:function(){return!0}},{key:"__serialize__",value:function(){var b=this.toJson(),e=b.distance,m=b.rotation,a=b.color,g=b.inset,l=b.blur,q=b.spread;b=b.fast;a=a.toJSExpr();return{__expr__:"new ShadowObject({"+Object.entries({distance:e,rotation:m,color:a,inset:g,blur:l,spread:q,fast:b}).map(function(r){var u=$jscomp.makeIterator(r);r=u.next().value;u=u.next().value;return r+":"+u})+"})",bindings:{"lively.graphics/color.js":["Color"],"lively.morphic":["ShadowObject"]}}}},{key:"toCss",value:function(){var b=
this.color,e=this.inset,m=this.blur,a=this.spread,g=te.Point.polar(this.distance,te.num.toRadians(this.rotation)),l=g.y;return(e?"inset":"")+" "+b.toString()+" "+g.x.toFixed(2)+"px "+l.toFixed(2)+"px "+m+"px "+a+"px"}},{key:"toJson",value:function(){return te.obj.select(this,"rotation distance blur color inset spread fast".split(" "))}},{key:"equals",value:function(b){return!!b&&te.obj.equals(this.toJson(),b.toJson())}},{key:"toFilterCss",value:function(){var b=this.blur,e=this.color,m=te.Point.polar(this.distance,
te.num.toRadians(this.rotation)),a=m.x;m=m.y;b=te.bowser.chrome?b/3:b/2;return"drop-shadow("+a.toFixed(2)+"px "+m.toFixed(2)+"px "+b.toFixed(2)+"px "+e.toString()+")"}},{key:"interpolate",value:function(b,e){return new te.ShadowObject({distance:te.num.interpolate(b,this.distance,e.distance),rotation:te.num.interpolate(b,this.rotation,e.rotation),color:this.color.interpolate(b,e.color),blur:te.num.interpolate(b,this.blur,e.blur),spread:te.num.interpolate(b,this.spread,e.spread),inset:e.inset,fast:e.fast})}}],
[{key:"className",get:function(){return"ShadowObject"}}],h,{pathInPackage:function(){return"rendering/morphic-default.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3438,end:6875})}(void 0));te.ShadowObject=bq;te.ShadowObject=bq;te.ShadowObject=bq;te.defaultStyle=Zt;te.defaultStyle=Zt;te.MorphAfterRenderHook.prototype.hook=function(d,
h,n,b){var e=this;b=void 0===b?0:b;var m=!!d.parentNode;m&&(this.morph._submorphOrderChanged&&this.morph.submorphs.length?(this.morph._submorphOrderChanged=!1,this.updateScrollOfSubmorphs(this.morph,this.renderer)):this.morph.isClip()&&this.updateScroll(this.morph,d));m||3<b?(this.morph._rendering=!1,this.morph.onAfterRender(d)):(b++,setTimeout(function(){return e.hook(d,h,n,b)},20*b))};te.MorphAfterRenderHook.prototype.updateScroll=function(d,h,n){var b=this,e=d.env.eventDispatcher.eventState.scroll.interactiveScrollInProgress;
if(h&&e)return e.then(function(){return b.updateScroll(d,h,!0)});if(!d.isWorld&&h){e=d.scroll;var m=e.x,a=e.y;if(!d._animationQueue.animations.find(function(l){return l.animatedProps.scroll})){var g=d.isText&&d.viewState.fastScroll?h.querySelector(".scrollLayer"):h;!d._skipScrollUpdate&&g&&(g.scrollTop!==a&&(g.scrollTop=a),g.scrollLeft!==m&&(g.scrollLeft=m),!n&&requestAnimationFrame(function(){g.scrollTop!==a&&(g.scrollTop=a);g.scrollLeft!==m&&(g.scrollLeft=m)},d.id))}}};te.MorphAfterRenderHook.prototype.unhook=
function(d,h){};te.MorphAfterRenderHook.prototype.updateScrollOfSubmorphs=function(d,h){var n=this;d.submorphs.forEach(function(b){b.isClip()&&n.updateScroll(b,h.getNodeForMorph(b));n.updateScrollOfSubmorphs(b,h)})};te.Animation.prototype.hook=function(d){this.morph._animationQueue.startAnimationsFor(d)};te.SvgAnimation=HB;te.SvgAnimation=HB;te.SvgAnimation.prototype.hook=function(d){this.morph._animationQueue.startSvgAnimationsFor(d,this.type)};te.defaultAttributes=Av;te.defaultAttributes=Av;te.svgAttributes=
oz;te.svgAttributes=oz;te.pathAttributes=pz;te.pathAttributes=pz;te.renderGradient=$t;te.renderGradient=$t;te.renderMorph=kx;te.renderMorph=kx;te.renderSubTree=qz;te.renderSubTree=qz;te.renderRootMorph=hs;te.renderRootMorph=hs;var uc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,AO={};!function(d,h){h(AO)}(AO,function(d){function h(Z){return 10===Z||13===Z||8232===Z||8233===Z||32===Z||9===Z||11===Z||12===Z||160===Z||5760<=Z&&0<=pD.indexOf(Z)}function n(Z){return 48<=
Z&&57>=Z}function b(Z){(this||uc).index=0;(this||uc).path=Z;(this||uc).max=Z.length;(this||uc).result=[];(this||uc).param=0;(this||uc).err="";(this||uc).segmentStart=0;(this||uc).data=[]}function e(Z){for(;Z.index<Z.max&&h(Z.path.charCodeAt(Z.index));)Z.index++}function m(Z){var ya,oa=Z.index,Ga=oa,Va=Z.max,Ob=!1,Ja=!1,Gb=!1,qb=!1;if(Ga>=Va)return void(Z.err="SvgPath: missed param (at pos "+Ga+")");if(ya=Z.path.charCodeAt(Ga),43!==ya&&45!==ya||(Ga++,ya=Ga<Va?Z.path.charCodeAt(Ga):0),!n(ya)&&46!==
ya)return void(Z.err="SvgPath: param should start with 0..9 or `.` (at pos "+Ga+")");if(46!==ya){if(Ob=48===ya,Ga++,ya=Ga<Va?Z.path.charCodeAt(Ga):0,Ob&&Ga<Va&&ya&&n(ya))return void(Z.err="SvgPath: numbers started with `0` such as `09` are ilegal (at pos "+oa+")");for(;Ga<Va&&n(Z.path.charCodeAt(Ga));)Ga++,Ja=!0;ya=Ga<Va?Z.path.charCodeAt(Ga):0}if(46===ya){qb=!0;for(Ga++;n(Z.path.charCodeAt(Ga));)Ga++,Gb=!0;ya=Ga<Va?Z.path.charCodeAt(Ga):0}if(101===ya||69===ya){if(qb&&!Ja&&!Gb||(Ga++,ya=Ga<Va?Z.path.charCodeAt(Ga):
0,43!==ya&&45!==ya||Ga++,!(Ga<Va&&n(Z.path.charCodeAt(Ga)))))return void(Z.err="SvgPath: invalid float exponent (at pos "+Ga+")");for(;Ga<Va&&n(Z.path.charCodeAt(Ga));)Ga++}Z.index=Ga;Z.param=parseFloat(Z.path.slice(oa,Ga))+0}function a(){if(!((this||uc)instanceof a))return new a;(this||uc).queue=[];(this||uc).cache=null}function g(Z,ya,oa,Ga){var Va=(Z*oa+ya*Ga)/(Math.sqrt(Z*Z+ya*ya)*Math.sqrt(Z*Z+ya*ya));return 1<Va&&(Va=1),-1>Va&&(Va=-1),(0>Z*Ga-ya*oa?-1:1)*Math.acos(Va)}function l(Z,ya,oa,Ga,
Va,Ob,Ja,Gb,qb,Mc){var wb=Mc*(Z-oa)/2+qb*(ya-Ga)/2,Id=-qb*(Z-oa)/2+Mc*(ya-Ga)/2,$d=Ja*Ja,jf=Gb*Gb,kf=wb*wb,qe=Id*Id,lf=$d*jf-$d*qe-jf*kf;0>lf&&(lf=0);lf=Math.sqrt(lf/($d*qe+jf*kf))*(Va===Ob?-1:1);Va=lf*Ja/Gb*Id;lf=lf*-Gb/Ja*wb;Z=Mc*Va-qb*lf+(Z+oa)/2;ya=qb*Va+Mc*lf+(ya+Ga)/2;Ga=(wb-Va)/Ja;qb=(Id-lf)/Gb;Ja=(-wb-Va)/Ja;Id=(-Id-lf)/Gb;Gb=g(1,0,Ga,qb);Id=g(Ga,qb,Ja,Id);return 0===Ob&&0<Id&&(Id-=qD),1===Ob&&0>Id&&(Id+=qD),[Z,ya,Gb,Id]}function q(Z,ya){var oa=4/3*Math.tan(ya/4),Ga=Math.cos(Z),Va=Math.sin(Z),
Ob=Math.cos(Z+ya);Z=Math.sin(Z+ya);return[Ga,Va,Ga-Va*oa,Va+Ga*oa,Ob+Z*oa,Z-Ob*oa,Ob,Z]}function r(Z,ya,oa){if(!((this||uc)instanceof r))return new r(Z,ya,oa);(this||uc).rx=Z;(this||uc).ry=ya;(this||uc).ax=oa}function u(Z){if(!((this||uc)instanceof u))return new u(Z);Z=new b(Z);var ya=Z.max;for(e(Z);Z.index<ya&&!Z.err.length;)a:{var oa,Ga=void 0,Va=Z,Ob=Va.max;Va.segmentStart=Va.index;var Ja=Va.path.charCodeAt(Va.index);b:{switch(32|Ja){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:Ja=
!0;break b}Ja=!1}if(Ja){if(Ga=qw[Va.path[Va.index].toLowerCase()],Va.index++,e(Va),Va.data=[],Ga)for(Ja=!1;;){for(oa=Ga;0<oa;oa--){if(m(Va),Va.err.length)break a;Va.data.push(Va.param);e(Va);Ja=!1;Va.index<Ob&&44===Va.path.charCodeAt(Va.index)&&(Va.index++,e(Va),Ja=!0)}if(!Ja){if(Va.index>=Va.max)break;oa=Va.path.charCodeAt(Va.index);if(!(48<=oa&&57>=oa||43===oa||45===oa||46===oa))break}}Ob=Va;Va=Ob.path[Ob.segmentStart];Ga=Va.toLowerCase();Ja=Ob.data;if("m"===Ga&&2<Ja.length&&(Ob.result.push([Va,
Ja[0],Ja[1]]),Ja=Ja.slice(2),Ga="l",Va="m"===Va?"l":"L"),"r"===Ga)Ob.result.push([Va].concat(Ja));else for(;Ja.length>=qw[Ga]&&(Ob.result.push([Va].concat(Ja.splice(0,qw[Ga]))),qw[Ga]););}else Va.err="SvgPath: bad command "+Va.path[Va.index]+" (at pos "+Va.index+")"}Z=(Z.err.length?Z.result=[]:Z.result.length&&(0>"mM".indexOf(Z.result[0][0])?(Z.err="SvgPath: string should start with `M` or `m`",Z.result=[]):Z.result[0][0]="M"),{err:Z.err,segments:Z.result});(this||uc).segments=Z.segments;(this||uc).err=
Z.err;(this||uc).__stack=[]}function v(Z,ya,oa,Ga,Va,Ob,Ja,Gb){(this||uc).a={x:Z,y:ya};(this||uc).b={x:oa,y:Ga};(this||uc).c={x:Va,y:Ob};(this||uc).d={x:Ja,y:Gb};null!==Ja&&void 0!==Ja&&null!==Gb&&void 0!==Gb?((this||uc).getArcLength=J,(this||uc).getPoint=G,(this||uc).getDerivative=z):((this||uc).getArcLength=E,(this||uc).getPoint=B,(this||uc).getDerivative=y);this.init()}function y(Z,ya,oa){return{x:2*(1-oa)*(Z[1]-Z[0])+2*oa*(Z[2]-Z[1]),y:2*(1-oa)*(ya[1]-ya[0])+2*oa*(ya[2]-ya[1])}}function z(Z,ya,
oa){return B([3*(Z[1]-Z[0]),3*(Z[2]-Z[1]),3*(Z[3]-Z[2])],[3*(ya[1]-ya[0]),3*(ya[2]-ya[1]),3*(ya[3]-ya[2])],oa)}function A(Z,ya,oa,Ga,Va){for(var Ob=1,Ja=Z/ya,Gb=(Z-oa(Ga,Va,Ja))/ya;.001<Ob;){var qb=oa(Ga,Va,Ja+Gb),Mc=oa(Ga,Va,Ja-Gb);qb=Math.abs(Z-qb)/ya;Mc=Math.abs(Z-Mc)/ya;qb<Ob?(Ob=qb,Ja+=Gb):Mc<Ob?(Ob=Mc,Ja-=Gb):Gb/=2}return Ja}function B(Z,ya,oa){return{x:(1-oa)*(1-oa)*Z[0]+2*(1-oa)*oa*Z[1]+oa*oa*Z[2],y:(1-oa)*(1-oa)*ya[0]+2*(1-oa)*oa*ya[1]+oa*oa*ya[2]}}function G(Z,ya,oa){return{x:(1-oa)*(1-
oa)*(1-oa)*Z[0]+3*(1-oa)*(1-oa)*oa*Z[1]+3*(1-oa)*oa*oa*Z[2]+oa*oa*oa*Z[3],y:(1-oa)*(1-oa)*(1-oa)*ya[0]+3*(1-oa)*(1-oa)*oa*ya[1]+3*(1-oa)*oa*oa*ya[2]+oa*oa*oa*ya[3]}}function E(Z,ya,oa){void 0===oa&&(oa=1);var Ga=Z[0]-2*Z[1]+Z[2],Va=ya[0]-2*ya[1]+ya[2],Ob=2*Z[1]-2*Z[0],Ja=2*ya[1]-2*ya[0],Gb=4*(Ga*Ga+Va*Va);if(0===Gb)return oa*Math.sqrt(Math.pow(Z[2]-Z[0],2)+Math.pow(ya[2]-ya[0],2));Z=4*(Ga*Ob+Va*Ja)/(2*Gb);oa+=Z;Ob=(Ob*Ob+Ja*Ja)/Gb-Z*Z;return Math.sqrt(Gb)/2*(oa*Math.sqrt(oa*oa+Ob)-Z*Math.sqrt(Z*Z+
Ob)+Ob*Math.log(Math.abs((oa+Math.sqrt(oa*oa+Ob))/(Z+Math.sqrt(Z*Z+Ob)))))}function K(Z,ya,oa){var Ga,Va=oa.length-1;if(0===Va)return 0;if(0===Z){for(Ga=Z=0;Ga<=Va;Ga++)Z+=Bea[Va][Ga]*Math.pow(1-ya,Va-Ga)*Math.pow(ya,Ga)*oa[Ga];return Z}var Ob=Array(Va);for(Ga=0;Ga<Va;Ga++)Ob[Ga]=Va*(oa[Ga+1]-oa[Ga]);return K(Z-1,ya,Ob)}function J(Z,ya,oa){var Ga,Va;void 0===oa&&(oa=1);oa/=2;for(Va=Ga=0;20>Va;Va++){var Ob=oa*Cea[20][Va]+oa;var Ja=Dea[20][Va],Gb=ya,qb=Ob;Ob=K(1,qb,Z);Gb=K(1,qb,Gb);Ga+=Ja*Math.sqrt(Ob*
Ob+Gb*Gb)}return oa*Ga}function P(Z,ya,oa,Ga){var Va=Z*oa+ya*Ga;return 1<Va&&(Va=1),-1>Va&&(Va=-1),(0>Z*Ga-ya*oa?-1:1)*Math.acos(Va)}function ea(Z,ya,oa,Ga,Va,Ob,Ja,Gb,qb,Mc){var wb=Mc*(Z-oa)/2+qb*(ya-Ga)/2,Id=-qb*(Z-oa)/2+Mc*(ya-Ga)/2,$d=Ja*Ja,jf=Gb*Gb,kf=wb*wb,qe=Id*Id,lf=$d*jf-$d*qe-jf*kf;0>lf&&(lf=0);lf=Math.sqrt(lf/($d*qe+jf*kf))*(Va===Ob?-1:1);Va=lf*Ja/Gb*Id;lf=lf*-Gb/Ja*wb;Z=Mc*Va-qb*lf+(Z+oa)/2;ya=qb*Va+Mc*lf+(ya+Ga)/2;Ga=(wb-Va)/Ja;qb=(Id-lf)/Gb;Ja=(-wb-Va)/Ja;Id=(-Id-lf)/Gb;Gb=P(1,0,Ga,
qb);Id=P(Ga,qb,Ja,Id);return 0===Ob&&0<Id&&(Id-=rD),1===Ob&&0>Id&&(Id+=rD),[Z,ya,Gb,Id]}function ra(Z,ya){var oa=4/3*Math.tan(ya/4),Ga=Math.cos(Z),Va=Math.sin(Z),Ob=Math.cos(Z+ya);Z=Math.sin(Z+ya);return[Ga,Va,Ga-Va*oa,Va+Ga*oa,Ob+Z*oa,Z-Ob*oa,Ob,Z]}function D(Z,ya,oa,Ga,Va,Ob,Ja,Gb,qb){var Mc=0,wb=[],Id=[];Eea(Z,ya,oa,Ga,Va,Ob,Ja,Gb,qb).forEach(function($d){$d=new hr($d[0],$d[1],$d[2],$d[3],$d[4],$d[5],$d[6],$d[7]);var jf=$d.getTotalLength();Mc+=jf;wb.push(jf);Id.push($d)});(this||uc).length=Mc;
(this||uc).partialLengths=wb;(this||uc).curves=Id}function O(Z,ya,oa,Ga){(this||uc).x0=Z;(this||uc).x1=ya;(this||uc).y0=oa;(this||uc).y1=Ga}function L(Z,ya){return Math.sqrt((Z[0]-ya[0])*(Z[0]-ya[0])+(Z[1]-ya[1])*(Z[1]-ya[1]))}function N(Z,ya,oa){return[Z[0]+(ya[0]-Z[0])*oa,Z[1]+(ya[1]-Z[1])*oa]}function aa(Z,ya,oa){var Ga=Z.map(function(Va,Ob){return Y(Va,ya[Ob])});return function(Va){var Ob=Ga.map(function(Ja){return Ja(Va)});return oa?X(Ob):Ob}}function Y(Z,ya){return function(oa){return Z.map(function(Ga,
Va){return Ga+oa*(ya[Va]-Ga)})}}function ma(Z){return"number"==typeof Z&&isFinite(Z)}function bb(Z){var ya;a:{for(ya=0;ya<Z.length-2;ya++){var oa=Z[ya],Ga=Z[ya+1],Va=Z[ya+2];if(oa[0]*(Ga[1]-Va[1])+Ga[0]*(Va[1]-oa[1])+Va[0]*(oa[1]-Ga[1])){ya=!0;break a}}ya=!1}if(ya){Va=-1;var Ob=Z.length,Ja=0,Gb=0,qb=Z[Ob-1];for(ya=0;++Va<Ob;)oa=qb,qb=Z[Va],ya+=Ga=oa[0]*qb[1]-qb[0]*oa[1],Ja+=(oa[0]+qb[0])*Ga,Gb+=(oa[1]+qb[1])*Ga;Z=(ya*=3,[Ja/ya,Gb/ya])}else Z=[(Z[0][0]+Z[Z.length-1][0])/2,(Z[0][1]+Z[Z.length-1][1])/
2];return Z}function Qa(Z){return Z.toString().split("M").map(function(ya,oa){return ya=ya.trim(),oa&&ya?"M"+ya:ya}).filter(function(ya){return ya})}function X(Z){return"M"+Z.join("L")+"Z"}function V(Z,ya){var oa=Z.length+ya;ya=iy(Z)/ya;for(var Ga=0,Va=0,Ob=ya/2;Z.length<oa;){var Ja=Z[Ga],Gb=Z[(Ga+1)%Z.length],qb=L(Ja,Gb);Ob<=Va+qb?(Z.splice(Ga+1,0,qb?N(Ja,Gb,(Ob-Va)/qb):Ja.slice(0)),Ob+=ya):(Va+=qb,Ga++)}}function ha(Z,ya){var oa;if("string"==typeof Z){Z=(new N1(Z)).abs();a:{var Ga=Z.segments||[];
var Va=[];if(Ga.length&&"M"===Ga[0][0]){for(var Ob=0;Ob<Ga.length;Ob++){var Ja=Ga[Ob],Gb=Ja[0],qb=Ja[1];Ja=Ja[2];if("M"===Gb&&Ob||"Z"===Gb)break;if("M"===Gb||"L"===Gb)Va.push([qb,Ja]);else if("H"===Gb)Va.push([qb,Va[Va.length-1][1]]);else{if("V"!==Gb){Ga=!1;break a}Va.push([Va[Va.length-1][0],qb])}}Ga=!!Va.length&&{ring:Va}}else Ga=!1}if(!Ga){Va=Qa(Z)[0];Z=[];Ga=3;if(!Va)throw new TypeError(BO);a:{if("undefined"!=typeof window&&window&&window.document)try{var Mc=window.document.createElementNS("http://www.w3.org/2000/svg",
"path");var wb=(Mc.setAttributeNS(null,"d",Va),Mc);break a}catch(Id){}wb=Fea(Va)}Mc=wb;wb=Mc.getTotalLength();ya&&ma(ya)&&0<ya&&(Ga=Math.max(Ga,Math.ceil(wb/ya)));for(Va=0;Va<Ga;Va++)Ob=Mc.getPointAtLength(wb*Va/Ga),Z.push([Ob.x,Ob.y]);Ga={ring:Z,skipBisect:!0}}wb=Ga;Z=wb.ring;Ga=wb.skipBisect}else if(!Array.isArray(Z))throw new TypeError(BO);if(oa=Z.slice(0),!xa(oa))throw new TypeError(BO);1<oa.length&&1E-9>L(oa[0],oa[oa.length-1])&&oa.pop();0<DA(oa)&&oa.reverse();if(!Ga&&ya&&ma(ya)&&0<ya)for(void 0===
ya&&(ya=1/0),wb=0;wb<oa.length;wb++)for(Mc=oa[wb],Z=wb===oa.length-1?oa[0]:oa[wb+1];L(Mc,Z)>ya;)Z=N(Mc,Z,.5),oa.splice(wb+1,0,Z);return oa}function xa(Z){return Z.every(function(ya){return Array.isArray(ya)&&2<=ya.length&&ma(ya[0])&&ma(ya[1])})}function yb(Z,ya,oa){var Ga;return Ga=Z.length-ya.length,V(Z,0>Ga?-1*Ga:0),V(ya,0<Ga?Ga:0),Gea(Z,ya),aa(Z,ya,oa)}function ec(Z,ya,oa){oa=oa||2;var Ga=ya&&ya.length,Va=Ga?ya[0]*oa:Z.length,Ob=Nb(Z,0,Va,oa,!0),Ja=[];if(!Ob)return Ja;var Gb;if(Ga){var qb=oa,Mc;
var wb=[];Ga=0;for(Mc=ya.length;Ga<Mc;Ga++){var Id=ya[Ga]*qb;var $d=Ga<Mc-1?ya[Ga+1]*qb:Z.length;Id=Nb(Z,Id,$d,qb,!1);Id===Id.next&&(Id.steiner=!0);wb.push(U(Id))}wb.sort(Hb);for(Ga=0;Ga<wb.length;Ga++){ya=wb[Ga];qb=Ob;if(qb=gd(ya,qb))ya=nd(qb,ya),ac(ya,ya.next);Ob=ac(Ob,Ob.next)}}if(Z.length>80*oa){var jf=Gb=Z[0];var kf=Ga=Z[1];for(qb=oa;qb<Va;qb+=oa)wb=Z[qb],ya=Z[qb+1],wb<jf&&(jf=wb),ya<kf&&(kf=ya),wb>Gb&&(Gb=wb),ya>Ga&&(Ga=ya);Gb=Math.max(Gb-jf,Ga-kf)}return Cc(Ob,Ja,oa,jf,kf,Gb),Ja}function Nb(Z,
ya,oa,Ga,Va){if(Va===0<jh(Z,ya,oa,Ga))for(Va=ya;Va<oa;Va+=Ga)var Ob=Ac(Va,Z[Va],Z[Va+1],Ob);else for(Va=oa-Ga;Va>=ya;Va-=Ga)Ob=Ac(Va,Z[Va],Z[Va+1],Ob);return Ob&&hb(Ob,Ob.next)&&(xe(Ob),Ob=Ob.next),Ob}function ac(Z,ya){if(!Z)return Z;ya||(ya=Z);var oa=Z;do if(Z=!1,oa.steiner||!hb(oa,oa.next)&&0!==Aa(oa.prev,oa,oa.next))oa=oa.next;else{if(xe(oa),(oa=ya=oa.prev)===oa.next)return null;Z=!0}while(Z||oa!==ya);return ya}function Cc(Z,ya,oa,Ga,Va,Ob,Ja){if(Z){if(!Ja&&Ob){var Gb=Z,qb=Gb;do null===qb.z&&(qb.z=
yd(qb.x,qb.y,Ga,Va,Ob)),qb.prevZ=qb.prev,qb=qb.nextZ=qb.next;while(qb!==Gb);qb.prevZ.nextZ=null;qb.prevZ=null;Gb=qb;var Mc,wb,Id,$d,jf=1;do{qb=Gb;var kf=Gb=null;for(Id=0;qb;){Id++;var qe=qb;for(Mc=$d=0;Mc<jf&&($d++,qe=qe.nextZ);Mc++);for(Mc=jf;0<$d||0<Mc&&qe;)0===$d?(wb=qe,qe=qe.nextZ,Mc--):0!==Mc&&qe?qb.z<=qe.z?(wb=qb,qb=qb.nextZ,$d--):(wb=qe,qe=qe.nextZ,Mc--):(wb=qb,qb=qb.nextZ,$d--),kf?kf.nextZ=wb:Gb=wb,wb.prevZ=kf,kf=wb;qb=qe}kf.nextZ=null;jf*=2}while(1<Id)}for(qb=Z;Z.prev!==Z.next;){wb=Z.prev;
Gb=Z.next;if(Ob)a:{qe=Z;Mc=Ga;var lf=Va,bo=Ob;kf=qe.prev;Id=qe;$d=qe.next;if(0<=Aa(kf,Id,$d))qe=!1;else{var Hea=kf.x>Id.x?kf.x>$d.x?kf.x:$d.x:Id.x>$d.x?Id.x:$d.x,Iea=kf.y>Id.y?kf.y>$d.y?kf.y:$d.y:Id.y>$d.y?Id.y:$d.y;jf=yd(kf.x<Id.x?kf.x<$d.x?kf.x:$d.x:Id.x<$d.x?Id.x:$d.x,kf.y<Id.y?kf.y<$d.y?kf.y:$d.y:Id.y<$d.y?Id.y:$d.y,Mc,lf,bo);Mc=yd(Hea,Iea,Mc,lf,bo);for(lf=qe.nextZ;lf&&lf.z<=Mc;){if(lf!==qe.prev&&lf!==qe.next&&na(kf.x,kf.y,Id.x,Id.y,$d.x,$d.y,lf.x,lf.y)&&0<=Aa(lf.prev,lf,lf.next)){qe=!1;break a}lf=
lf.nextZ}for(lf=qe.prevZ;lf&&lf.z>=jf;){if(lf!==qe.prev&&lf!==qe.next&&na(kf.x,kf.y,Id.x,Id.y,$d.x,$d.y,lf.x,lf.y)&&0<=Aa(lf.prev,lf,lf.next)){qe=!1;break a}lf=lf.prevZ}qe=!0}}else a:if(qe=Z,kf=qe.prev,Id=qe,$d=qe.next,0<=Aa(kf,Id,$d))qe=!1;else{for(jf=qe.next.next;jf!==qe.prev;){if(na(kf.x,kf.y,Id.x,Id.y,$d.x,$d.y,jf.x,jf.y)&&0<=Aa(jf.prev,jf,jf.next)){qe=!1;break a}jf=jf.next}qe=!0}if(qe)ya.push(wb.i/oa),ya.push(Z.i/oa),ya.push(Gb.i/oa),xe(Z),qb=Z=Gb.next;else if((Z=Gb)===qb){if(Ja)if(1===Ja){Ja=
ya;wb=oa;Gb=Z;do qb=Gb.prev,qe=Gb.next.next,!hb(qb,qe)&&Pb(qb,Gb,Gb.next,qe)&&od(qb,qe)&&od(qe,qb)&&(Ja.push(qb.i/wb),Ja.push(Gb.i/wb),Ja.push(qe.i/wb),xe(Gb),xe(Gb.next),Gb=Z=qe),Gb=Gb.next;while(Gb!==Z);Z=Gb;Cc(Z,ya,oa,Ga,Va,Ob,2)}else{if(2===Ja)a:{Ja=Z;do{for(wb=Ja.next.next;wb!==Ja.prev;){if(Gb=Ja.i!==wb.i){Gb=Ja;qb=wb;if(qe=Gb.next.i!==qb.i&&Gb.prev.i!==qb.i){b:{qe=Gb;do{if(qe.i!==Gb.i&&qe.next.i!==Gb.i&&qe.i!==qb.i&&qe.next.i!==qb.i&&Pb(qe,qe.next,Gb,qb)){qe=!0;break b}qe=qe.next}while(qe!==
Gb);qe=!1}qe=!qe}if(qe=qe&&od(Gb,qb)&&od(qb,Gb)){qe=Gb;kf=!1;Id=(Gb.x+qb.x)/2;qb=(Gb.y+qb.y)/2;do qe.y>qb!=qe.next.y>qb&&Id<(qe.next.x-qe.x)*(qb-qe.y)/(qe.next.y-qe.y)+qe.x&&(kf=!kf),qe=qe.next;while(qe!==Gb);qe=kf}Gb=qe}if(Gb){Z=nd(Ja,wb);Ja=ac(Ja,Ja.next);Z=ac(Z,Z.next);Cc(Ja,ya,oa,Ga,Va,Ob);Cc(Z,ya,oa,Ga,Va,Ob);break a}wb=wb.next}Ja=Ja.next}while(Ja!==Z)}}else Cc(ac(Z),ya,oa,Ga,Va,Ob,1);break}}}}function Hb(Z,ya){return Z.x-ya.x}function gd(Z,ya){var oa=ya,Ga=Z.x,Va=Z.y,Ob=-1/0;do{if(Va<=oa.y&&
Va>=oa.next.y){var Ja=oa.x+(Va-oa.y)*(oa.next.x-oa.x)/(oa.next.y-oa.y);if(Ja<=Ga&&Ja>Ob){if(Ob=Ja,Ja===Ga){if(Va===oa.y)return oa;if(Va===oa.next.y)return oa.next}var Gb=oa.x<oa.next.x?oa:oa.next}}oa=oa.next}while(oa!==ya);if(!Gb)return null;if(Ga===Ob)return Gb.prev;var qb;ya=Gb;Ja=Gb.x;var Mc=Gb.y,wb=1/0;for(oa=Gb.next;oa!==ya;)Ga>=oa.x&&oa.x>=Ja&&na(Va<Mc?Ga:Ob,Va,Ja,Mc,Va<Mc?Ob:Ga,Va,oa.x,oa.y)&&((qb=Math.abs(Va-oa.y)/(Ga-oa.x))<wb||qb===wb&&oa.x>Gb.x)&&od(oa,Z)&&(Gb=oa,wb=qb),oa=oa.next;return Gb}
function yd(Z,ya,oa,Ga,Va){return Z=32767*(Z-oa)/Va,ya=32767*(ya-Ga)/Va,Z=16711935&(Z|Z<<8),Z=252645135&(Z|Z<<4),Z=858993459&(Z|Z<<2),Z=1431655765&(Z|Z<<1),ya=16711935&(ya|ya<<8),ya=252645135&(ya|ya<<4),ya=858993459&(ya|ya<<2),ya=1431655765&(ya|ya<<1),Z|ya<<1}function U(Z){var ya=Z,oa=Z;do ya.x<oa.x&&(oa=ya),ya=ya.next;while(ya!==Z);return oa}function na(Z,ya,oa,Ga,Va,Ob,Ja,Gb){return 0<=(Va-Ja)*(ya-Gb)-(Z-Ja)*(Ob-Gb)&&0<=(Z-Ja)*(Ga-Gb)-(oa-Ja)*(ya-Gb)&&0<=(oa-Ja)*(Ob-Gb)-(Va-Ja)*(Ga-Gb)}function Aa(Z,
ya,oa){return(ya.y-Z.y)*(oa.x-ya.x)-(ya.x-Z.x)*(oa.y-ya.y)}function hb(Z,ya){return Z.x===ya.x&&Z.y===ya.y}function Pb(Z,ya,oa,Ga){return!!(hb(Z,ya)&&hb(oa,Ga)||hb(Z,Ga)&&hb(oa,ya))||0<Aa(Z,ya,oa)!=0<Aa(Z,ya,Ga)&&0<Aa(oa,Ga,Z)!=0<Aa(oa,Ga,ya)}function od(Z,ya){return 0>Aa(Z.prev,Z,Z.next)?0<=Aa(Z,ya,Z.next)&&0<=Aa(Z,Z.prev,ya):0>Aa(Z,ya,Z.prev)||0>Aa(Z,Z.next,ya)}function nd(Z,ya){var oa=new oe(Z.i,Z.x,Z.y),Ga=new oe(ya.i,ya.x,ya.y),Va=Z.next,Ob=ya.prev;return Z.next=ya,ya.prev=Z,oa.next=Va,Va.prev=
oa,Ga.next=oa,oa.prev=Ga,Ob.next=Ga,Ga.prev=Ob,Ga}function Ac(Z,ya,oa,Ga){Z=new oe(Z,ya,oa);return Ga?(Z.next=Ga.next,Z.prev=Ga,Ga.next.prev=Z,Ga.next=Z):(Z.prev=Z,Z.next=Z),Z}function xe(Z){Z.next.prev=Z.prev;Z.prev.next=Z.next;Z.prevZ&&(Z.prevZ.nextZ=Z.nextZ);Z.nextZ&&(Z.nextZ.prevZ=Z.prevZ)}function oe(Z,ya,oa){(this||uc).i=Z;(this||uc).x=ya;(this||uc).y=oa;(this||uc).prev=null;(this||uc).next=null;(this||uc).z=null;(this||uc).prevZ=null;(this||uc).nextZ=null;(this||uc).steiner=!1}function jh(Z,
ya,oa,Ga){for(var Va=0,Ob=oa-Ga;ya<oa;ya+=Ga)Va+=(Z[Ob]-Z[ya])*(Z[ya+1]+Z[Ob+1]),Ob=ya;return Va}function Kg(Z,ya){var oa=ya.id,Ga=ya.bbox,Va=null==ya.properties?{}:ya.properties;Z=vi(Z,ya);return null==oa&&null==Ga?{type:"Feature",properties:Va,geometry:Z}:null==Ga?{type:"Feature",id:oa,properties:Va,geometry:Z}:{type:"Feature",id:oa,bbox:Ga,properties:Va,geometry:Z}}function vi(Z,ya){function oa(Mc){return Gb(Mc)}function Ga(Mc){for(var wb=[],Id=0,$d=Mc.length;Id<$d;++Id){var jf=Mc[Id],kf=wb;kf.length&&
kf.pop();for(var qe=qb[0>jf?~jf:jf],lf=0,bo=qe.length;lf<bo;++lf)kf.push(Gb(qe[lf],lf));if(0>jf)for(jf=kf,kf=jf.length,qe=kf-bo;qe<--kf;)bo=jf[qe],jf[qe++]=jf[kf],jf[kf]=bo}return 2>wb.length&&wb.push(wb[0]),wb}function Va(Mc){for(Mc=Ga(Mc);4>Mc.length;)Mc.push(Mc[0]);return Mc}function Ob(Mc){return Mc.map(Va)}function Ja(Mc){var wb=Mc.type;switch(wb){case "GeometryCollection":return{type:wb,geometries:Mc.geometries.map(Ja)};case "Point":Mc=Gb(Mc.coordinates);break;case "MultiPoint":Mc=Mc.coordinates.map(oa);
break;case "LineString":Mc=Ga(Mc.arcs);break;case "MultiLineString":Mc=Mc.arcs.map(Ga);break;case "Polygon":Mc=Ob(Mc.arcs);break;case "MultiPolygon":Mc=Mc.arcs.map(Ob);break;default:return null}return{type:wb,coordinates:Mc}}var Gb=Jea(Z.transform),qb=Z.arcs;return Ja(ya)}function pi(Z,ya){function oa(qb){switch(qb.type){case "GeometryCollection":qb.geometries.forEach(oa);break;case "Polygon":Ga(qb.arcs);break;case "MultiPolygon":qb.arcs.forEach(Ga)}}function Ga(qb){qb.forEach(function(Mc){Mc.forEach(function(wb){(Ob[wb=
0>wb?~wb:wb]||(Ob[wb]=[])).push(qb)})});Ja.push(qb)}function Va(qb){qb=vi(Z,{type:"Polygon",arcs:[qb]}).coordinates[0];for(var Mc,wb=-1,Id=qb.length,$d=qb[Id-1],jf=0;++wb<Id;)Mc=$d,$d=qb[wb],jf+=Mc[0]*$d[1]-Mc[1]*$d[0];return Math.abs(jf)}var Ob={},Ja=[],Gb=[];return ya.forEach(oa),Ja.forEach(function(qb){if(!qb._){var Mc=[],wb=[qb];qb._=1;for(Gb.push(Mc);qb=wb.pop();)Mc.push(qb),qb.forEach(function(Id){Id.forEach(function($d){Ob[0>$d?~$d:$d].forEach(function(jf){jf._||(jf._=1,wb.push(jf))})})})}}),
Ja.forEach(function(qb){delete qb._}),{type:"MultiPolygon",arcs:Gb.map(function(qb){var Mc=[];if(qb.forEach(function(kf){kf.forEach(function(qe){qe.forEach(function(lf){2>Ob[0>lf?~lf:lf].length&&Mc.push(lf)})})}),Mc=Kea(Z,Mc),1<(qb=Mc.length))for(var wb,Id,$d=1,jf=Va(Mc[0]);$d<qb;++$d)(wb=Va(Mc[$d]))>jf&&(Id=Mc[0],Mc[0]=Mc[$d],Mc[$d]=Id,jf=wb);return Mc})}}function aj(Z){return function(ya,oa){return O1(Z(ya),oa)}}function yj(Z,ya){var oa={},Ga={type:"Topology",objects:{triangles:{type:"GeometryCollection",
geometries:[]}},arcs:[]};return Z.forEach(function(Va){var Ob=[];Va.forEach(function(Ja,Gb){Gb=Ja[0]<Ja[1]?Ja.join(","):Ja[1]+","+Ja[0];Ja=Ja.map(function(qb){return ya[qb]});Gb in oa?Ob.push(~oa[Gb]):(Ob.push(oa[Gb]=Ga.arcs.length),Ga.arcs.push(Ja))});Ga.objects.triangles.geometries.push({type:"Polygon",area:Math.abs(DA(Va.map(function(Ja){return ya[Ja[0]]}))),arcs:[Ob]})}),Ga.objects.triangles.geometries.sort(function(Va,Ob){return Va.area-Ob.area}),Ga}function Hj(Z,ya){for(var oa=Z.objects.triangles.geometries,
Ga=P1(function(Va){return Va.area}).left;oa.length>ya;)!function(){var Va=oa[0],Ob=Lea(oa)[0][0],Ja=oa[Ob],Gb=pi(Z,[Va,Ja]);Gb.area=Va.area+Ja.area;Gb.type="Polygon";Gb.arcs=Gb.arcs[0];oa.splice(Ob,1);oa.shift();oa.splice(Ga(oa,Gb.area),0,Gb)}();if(ya>oa.length)throw new RangeError("Can't collapse topology into "+ya+" pieces.");return Mea(Z,Z.objects.triangles).features.map(function(Va){return Va.geometry.coordinates[0].pop(),Va.geometry.coordinates[0]})}function Ij(Z){Z=Nea(Z.reduce(function(Va,
Ob){return Va.concat([Ob[0]],[Ob[1]])},[]));for(var ya=[],oa=0,Ga=Z.length;oa<Ga;oa+=3)ya.push([[Z[oa],Z[oa+1]],[Z[oa+1],Z[oa+2]],[Z[oa+2],Z[oa]]]);return ya}function fi(Z,ya,oa){function Ga(Ja,Gb,qb){void 0===Gb&&(Gb=[]);void 0===qb&&(qb=0);for(var Mc=0;Mc<Ja.length;Mc++){var wb=Ja.splice(Mc,1),Id=oa[wb[0]][Gb.length];qb+Id<Va&&(Ja.length?Ga(Ja.slice(),Gb.concat(wb),qb+Id):(Va=qb+Id,Ob=Gb.concat(wb)));Ja.length&&Ja.splice(Mc,0,wb[0])}}var Va=1/0,Ob=Z.map(function(Ja,Gb){return Gb});return Ga(Ob),
Ob}function bj(Z,ya,oa){void 0===oa&&(oa={});var Ga=oa.maxSegmentLength;void 0===Ga&&(Ga=10);var Va=oa.string;void 0===Va&&(Va=!0);oa=oa.single;void 0===oa&&(oa=!1);var Ob=ha(Z,Ga);Ob.length<ya.length+2&&V(Ob,ya.length+2-Ob.length);var Ja;Ob=Oea(Ob,ya.length);var Gb=ya.map(function(qb){return ha(qb,Ga)});Z="string"==typeof Z&&Z;return oa&&!ya.every(function(qb){return"string"==typeof qb})||(Ja=ya.slice(0)),Jj(Ob,Gb,{match:!0,string:Va,single:oa,t0:Z,t1:Ja})}function Jj(Z,ya,oa){void 0===oa&&(oa={});
var Ga=oa.string,Va=oa.single,Ob=oa.t0,Ja=oa.t1,Gb=(oa=oa.match)?Pea(Z,ya):Z.map(function(wb,Id){return Id}),qb=Gb.map(function(wb,Id){return yb(Z[wb],ya[Id],Ga)});if(oa&&Array.isArray(Ob)&&(Ob=Gb.map(function(wb){return Ob[wb]})),Va&&Ga&&(Array.isArray(Ob)&&(Ob=Ob.join(" ")),Array.isArray(Ja)&&(Ja=Ja.join(" "))),Va){var Mc=Ga?function(wb){return qb.map(function(Id){return Id(wb)}).join(" ")}:function(wb){return qb.map(function(Id){return Id(wb)})};return Ga&&(Ob||Ja)?function(wb){return 1E-4>wb&&
Ob||1E-4>1-wb&&Ja||Mc(wb)}:Mc}return Ga?(Ob=Array.isArray(Ob)?Ob.map(function(wb){return"string"==typeof wb&&wb}):[],Ja=Array.isArray(Ja)?Ja.map(function(wb){return"string"==typeof wb&&wb}):[],qb.map(function(wb,Id){return Ob[Id]||Ja[Id]?function($d){return 1E-4>$d&&Ob[Id]||1E-4>1-$d&&Ja[Id]||wb($d)}:wb})):qb}function cj(Z,ya,oa,Ga,Va){var Ob=td(Z,ya,oa),Ja=Z-oa+","+ya,Gb="A"+oa+","+oa+",0,1,1,";return EA(Ob,Ga,"M"+Ja+Gb+(Z+oa+","+ya)+Gb+Ja+"Z",2*Math.PI*oa,Va)}function Kj(Z,ya,oa,Ga,Va,Ob){var Ja=
ud(Z,ya,oa,Ga),Gb=Z+oa,qb=ya+Ga;return EA(Ja,Va,"M"+Z+","+ya+"L"+Gb+","+ya+"L"+Gb+","+qb+"L"+Z+","+qb+"Z",2*oa+2*Ga,Ob)}function EA(Z,ya,oa,Ga,Va){void 0===Va&&(Va={});var Ob=Va.maxSegmentLength;void 0===Ob&&(Ob=10);Va=Va.string;void 0===Va&&(Va=!0);var Ja,Gb;ya=ha(ya,Ob);return ma(Ga)&&ya.length<Ga/Ob&&V(ya,Math.ceil(Ga/Ob-ya.length)),Ja=Z(ya),Gb=aa(Ja,ya,Va),Va?function(qb){return 1E-4>qb?oa:Gb(qb)}:Gb}function td(Z,ya,oa){return function(Ga){var Va=bb(Ga),Ob=iy(Ga.concat([Ga[0]])),Ja=Math.atan2(Ga[0][1]-
Va[1],Ga[0][0]-Va[0]),Gb=0;return Ga.map(function(qb,Mc){var wb;return Mc&&(Gb+=L(qb,Ga[Mc-1])),wb=Ja+2*Math.PI*(Ob?Gb/Ob:Mc/Ga.length),[Math.cos(wb)*oa+Z,Math.sin(wb)*oa+ya]})}}function ud(Z,ya,oa,Ga){return function(Va){var Ob=bb(Va),Ja=iy(Va.concat([Va[0]]));Ob=Math.atan2(Va[0][1]-Ob[1],Va[0][0]-Ob[0]);var Gb=0;0>Ob&&(Ob=2*Math.PI+Ob);var qb=Ob/(2*Math.PI);return Va.map(function(Mc,wb){wb&&(Gb+=L(Mc,Va[wb-1]));Mc=(qb+(Ja?Gb/Ja:wb/Va.length))%1;Mc=.125>=Mc?[1,.5+4*Mc]:.375>=Mc?[1.5-4*Mc,1]:.625>=
Mc?[0,2.5-4*Mc]:.875>=Mc?[4*Mc-2.5,0]:[1,4*Mc-3.5];return[Z+Mc[0]*oa,ya+Mc[1]*Ga]})}}var DA=function(Z){for(var ya,oa=-1,Ga=Z.length,Va=Z[Ga-1],Ob=0;++oa<Ga;)ya=Va,Va=Z[oa],Ob+=ya[1]*Va[0]-ya[0]*Va[1];return Ob/2},iy=function(Z){var ya=-1,oa=Z.length,Ga=Z[oa-1],Va=Ga[0];Ga=Ga[1];for(var Ob=0;++ya<oa;){var Ja=Va;var Gb=Ga;Ga=Z[ya];Va=Ga[0];Ga=Ga[1];Ja-=Va;Gb-=Ga;Ob+=Math.sqrt(Ja*Ja+Gb*Gb)}return Ob},qw={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},pD=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,
8200,8201,8202,8239,8287,12288,65279];a.prototype.matrix=function(Z){return 1===Z[0]&&0===Z[1]&&0===Z[2]&&1===Z[3]&&0===Z[4]&&0===Z[5]?this||uc:((this||uc).cache=null,(this||uc).queue.push(Z),this||uc)};a.prototype.translate=function(Z,ya){return 0===Z&&0===ya||((this||uc).cache=null,(this||uc).queue.push([1,0,0,1,Z,ya])),this||uc};a.prototype.scale=function(Z,ya){return 1===Z&&1===ya||((this||uc).cache=null,(this||uc).queue.push([Z,0,0,ya,0,0])),this||uc};a.prototype.rotate=function(Z,ya,oa){var Ga,
Va,Ob;return 0!==Z&&(this.translate(ya,oa),Ga=Z*Math.PI/180,Va=Math.cos(Ga),Ob=Math.sin(Ga),(this||uc).queue.push([Va,Ob,-Ob,Va,0,0]),(this||uc).cache=null,this.translate(-ya,-oa)),this||uc};a.prototype.skewX=function(Z){return 0!==Z&&((this||uc).cache=null,(this||uc).queue.push([1,0,Math.tan(Z*Math.PI/180),1,0,0])),this||uc};a.prototype.skewY=function(Z){return 0!==Z&&((this||uc).cache=null,(this||uc).queue.push([1,Math.tan(Z*Math.PI/180),0,1,0,0])),this||uc};a.prototype.toArray=function(){var Z=
this||uc;if((this||uc).cache)return(this||uc).cache;if(!(this||uc).queue.length)return(this||uc).cache=[1,0,0,1,0,0],(this||uc).cache;if((this||uc).cache=(this||uc).queue[0],1===(this||uc).queue.length)return(this||uc).cache;for(var ya=1;ya<(this||uc).queue.length;ya++){var oa=Z.cache,Ga=Z.queue[ya];Z.cache=[oa[0]*Ga[0]+oa[2]*Ga[1],oa[1]*Ga[0]+oa[3]*Ga[1],oa[0]*Ga[2]+oa[2]*Ga[3],oa[1]*Ga[2]+oa[3]*Ga[3],oa[0]*Ga[4]+oa[2]*Ga[5]+oa[4],oa[1]*Ga[4]+oa[3]*Ga[5]+oa[5]]}return(this||uc).cache};a.prototype.calc=
function(Z,ya,oa){var Ga;return(this||uc).queue.length?((this||uc).cache||((this||uc).cache=this.toArray()),Ga=(this||uc).cache,[Z*Ga[0]+ya*Ga[2]+(oa?0:Ga[4]),Z*Ga[1]+ya*Ga[3]+(oa?0:Ga[5])]):[Z,ya]};var sD={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},tD=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,uD=/[\s,]+/,vD=function(Z){var ya,oa,Ga=new a;return Z.split(tD).forEach(function(Va){if(Va.length){if(void 0!==sD[Va])return void(ya=Va);switch(oa=Va.split(uD).map(function(Ob){return+Ob||
0}),ya){case "matrix":return void(6===oa.length&&Ga.matrix(oa));case "scale":return void(1===oa.length?Ga.scale(oa[0],oa[0]):2===oa.length&&Ga.scale(oa[0],oa[1]));case "rotate":return void(1===oa.length?Ga.rotate(oa[0],0,0):3===oa.length&&Ga.rotate(oa[0],oa[1],oa[2]));case "translate":return void(1===oa.length?Ga.translate(oa[0],0):2===oa.length&&Ga.translate(oa[0],oa[1]));case "skewX":return void(1===oa.length&&Ga.skewX(oa[0]));case "skewY":return void(1===oa.length&&Ga.skewY(oa[0]))}}}),Ga},qD=
2*Math.PI,Qea=function(Z,ya,oa,Ga,Va,Ob,Ja,Gb,qb){var Mc=Math.sin(qb*qD/360),wb=Math.cos(qb*qD/360);qb=wb*(Z-oa)/2+Mc*(ya-Ga)/2;var Id=-Mc*(Z-oa)/2+wb*(ya-Ga)/2;if(0===qb&&0===Id||0===Ja||0===Gb)return[];Ja=Math.abs(Ja);Gb=Math.abs(Gb);qb=qb*qb/(Ja*Ja)+Id*Id/(Gb*Gb);1<qb&&(Ja*=Math.sqrt(qb),Gb*=Math.sqrt(qb));var $d=l(Z,ya,oa,Ga,Va,Ob,Ja,Gb,Mc,wb);Z=[];ya=$d[2];oa=$d[3];Ga=Math.max(Math.ceil(Math.abs(oa)/(qD/4)),1);oa/=Ga;for(Va=0;Va<Ga;Va++)Z.push(q(ya,oa)),ya+=oa;return Z.map(function(jf){for(var kf=
0;kf<jf.length;kf+=2){var qe=jf[kf+0],lf=jf[kf+1];qe*=Ja;lf*=Gb;var bo=Mc*qe+wb*lf;jf[kf+0]=wb*qe-Mc*lf+$d[0];jf[kf+1]=bo+$d[1]}return jf})},Q1=Math.PI/180;r.prototype.transform=function(Z){var ya=Math.cos((this||uc).ax*Q1),oa=Math.sin((this||uc).ax*Q1),Ga=[(this||uc).rx*(Z[0]*ya+Z[2]*oa),(this||uc).rx*(Z[1]*ya+Z[3]*oa),(this||uc).ry*(-Z[0]*oa+Z[2]*ya),(this||uc).ry*(-Z[1]*oa+Z[3]*ya)];Z=Ga[0]*Ga[0]+Ga[2]*Ga[2];ya=Ga[1]*Ga[1]+Ga[3]*Ga[3];oa=((Ga[0]-Ga[3])*(Ga[0]-Ga[3])+(Ga[2]+Ga[1])*(Ga[2]+Ga[1]))*
((Ga[0]+Ga[3])*(Ga[0]+Ga[3])+(Ga[2]-Ga[1])*(Ga[2]-Ga[1]));var Va=(Z+ya)/2;if(oa<1E-10*Va)return(this||uc).rx=(this||uc).ry=Math.sqrt(Va),(this||uc).ax=0,this||uc;Ga=Ga[0]*Ga[1]+Ga[2]*Ga[3];oa=Math.sqrt(oa);var Ob=Va+oa/2;oa=Va-oa/2;return(this||uc).ax=1E-10>Math.abs(Ga)&&1E-10>Math.abs(Ob-ya)?90:180*Math.atan(Math.abs(Ga)>Math.abs(Ob-ya)?(Ob-Z)/Ga:Ga/(Ob-ya))/Math.PI,0<=(this||uc).ax?((this||uc).rx=Math.sqrt(Ob),(this||uc).ry=Math.sqrt(oa)):((this||uc).ax+=90,(this||uc).rx=Math.sqrt(oa),(this||uc).ry=
Math.sqrt(Ob)),this||uc};r.prototype.isDegenerate=function(){return(this||uc).rx<1E-10*(this||uc).ry||(this||uc).ry<1E-10*(this||uc).rx};u.prototype.__matrix=function(Z){var ya,oa=this||uc;Z.queue.length&&this.iterate(function(Ga,Va,Ob,Ja){switch(Ga[0]){case "v":var Gb=Z.calc(0,Ga[1],!0);Ob=0===Gb[0]?["v",Gb[1]]:["l",Gb[0],Gb[1]];break;case "V":Gb=Z.calc(Ob,Ga[1],!1);Ob=Gb[0]===Z.calc(Ob,Ja,!1)[0]?["V",Gb[1]]:["L",Gb[0],Gb[1]];break;case "h":Gb=Z.calc(Ga[1],0,!0);Ob=0===Gb[1]?["h",Gb[0]]:["l",Gb[0],
Gb[1]];break;case "H":Gb=Z.calc(Ga[1],Ja,!1);Ob=Gb[1]===Z.calc(Ob,Ja,!1)[1]?["H",Gb[0]]:["L",Gb[0],Gb[1]];break;case "a":case "A":Gb=Z.toArray();var qb=r(Ga[1],Ga[2],Ga[3]).transform(Gb);if(0>Gb[0]*Gb[3]-Gb[1]*Gb[2]&&(Ga[5]=Ga[5]?"0":"1"),Gb=Z.calc(Ga[6],Ga[7],"a"===Ga[0]),"A"===Ga[0]&&Ga[6]===Ob&&Ga[7]===Ja||"a"===Ga[0]&&0===Ga[6]&&0===Ga[7]){Ob=["a"===Ga[0]?"l":"L",Gb[0],Gb[1]];break}Ob=qb.isDegenerate()?["a"===Ga[0]?"l":"L",Gb[0],Gb[1]]:[Ga[0],qb.rx,qb.ry,qb.ax,Ga[4],Ga[5],Gb[0],Gb[1]];break;case "m":Gb=
Z.calc(Ga[1],Ga[2],0<Va);Ob=["m",Gb[0],Gb[1]];break;default:for(Gb=Ga[0],Ob=[Gb],Ja=Gb.toLowerCase()===Gb,ya=1;ya<Ga.length;ya+=2)Gb=Z.calc(Ga[ya],Ga[ya+1],Ja),Ob.push(Gb[0],Gb[1])}oa.segments[Va]=Ob},!0)};u.prototype.__evaluateStack=function(){var Z,ya=this||uc;if((this||uc).__stack.length){if(1===(this||uc).__stack.length)return this.__matrix((this||uc).__stack[0]),void((this||uc).__stack=[]);var oa=a();for(Z=(this||uc).__stack.length;0<=--Z;)oa.matrix(ya.__stack[Z].toArray());this.__matrix(oa);
(this||uc).__stack=[]}};u.prototype.toString=function(){var Z=this||uc,ya=[];this.__evaluateStack();for(var oa=0;oa<(this||uc).segments.length;oa++){var Ga=Z.segments[oa][0];Ga=0<oa&&"m"!==Ga&&"M"!==Ga&&Ga===Z.segments[oa-1][0];ya=ya.concat(Ga?Z.segments[oa].slice(1):Z.segments[oa])}return ya.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")};u.prototype.translate=function(Z,ya){return(this||uc).__stack.push(a().translate(Z,ya||0)),this||uc};u.prototype.scale=
function(Z,ya){return(this||uc).__stack.push(a().scale(Z,ya||0===ya?ya:Z)),this||uc};u.prototype.rotate=function(Z,ya,oa){return(this||uc).__stack.push(a().rotate(Z,ya||0,oa||0)),this||uc};u.prototype.skewX=function(Z){return(this||uc).__stack.push(a().skewX(Z)),this||uc};u.prototype.skewY=function(Z){return(this||uc).__stack.push(a().skewY(Z)),this||uc};u.prototype.matrix=function(Z){return(this||uc).__stack.push(a().matrix(Z)),this||uc};u.prototype.transform=function(Z){return Z.trim()?((this||
uc).__stack.push(vD(Z)),this||uc):this||uc};u.prototype.round=function(Z){var ya,oa=0,Ga=0,Va=0,Ob=0;return Z=Z||0,this.__evaluateStack(),(this||uc).segments.forEach(function(Ja){var Gb=Ja[0].toLowerCase()===Ja[0];switch(Ja[0]){case "H":case "h":return Gb&&(Ja[1]+=Va),Va=Ja[1]-Ja[1].toFixed(Z),void(Ja[1]=+Ja[1].toFixed(Z));case "V":case "v":return Gb&&(Ja[1]+=Ob),Ob=Ja[1]-Ja[1].toFixed(Z),void(Ja[1]=+Ja[1].toFixed(Z));case "Z":case "z":return Va=oa,void(Ob=Ga);case "M":case "m":return Gb&&(Ja[1]+=
Va,Ja[2]+=Ob),Va=Ja[1]-Ja[1].toFixed(Z),Ob=Ja[2]-Ja[2].toFixed(Z),oa=Va,Ga=Ob,Ja[1]=+Ja[1].toFixed(Z),void(Ja[2]=+Ja[2].toFixed(Z));case "A":case "a":return Gb&&(Ja[6]+=Va,Ja[7]+=Ob),Va=Ja[6]-Ja[6].toFixed(Z),Ob=Ja[7]-Ja[7].toFixed(Z),Ja[1]=+Ja[1].toFixed(Z),Ja[2]=+Ja[2].toFixed(Z),Ja[3]=+Ja[3].toFixed(Z+2),Ja[6]=+Ja[6].toFixed(Z),void(Ja[7]=+Ja[7].toFixed(Z));default:return ya=Ja.length,Gb&&(Ja[ya-2]+=Va,Ja[ya-1]+=Ob),Va=Ja[ya-2]-Ja[ya-2].toFixed(Z),Ob=Ja[ya-1]-Ja[ya-1].toFixed(Z),void Ja.forEach(function(qb,
Mc){Mc&&(Ja[Mc]=+Ja[Mc].toFixed(Z))})}}),this||uc};u.prototype.iterate=function(Z,ya){var oa,Ga=(this||uc).segments,Va={},Ob=!1,Ja=0,Gb=0,qb=0,Mc=0;if(ya||this.__evaluateStack(),Ga.forEach(function(Id,$d){var jf=Z(Id,$d,Ja,Gb);Array.isArray(jf)&&(Va[$d]=jf,Ob=!0);$d=Id[0]===Id[0].toLowerCase();switch(Id[0]){case "m":case "M":return Ja=Id[1]+($d?Ja:0),Gb=Id[2]+($d?Gb:0),qb=Ja,void(Mc=Gb);case "h":case "H":return void(Ja=Id[1]+($d?Ja:0));case "v":case "V":return void(Gb=Id[1]+($d?Gb:0));case "z":case "Z":return Ja=
qb,void(Gb=Mc);default:Ja=Id[Id.length-2]+($d?Ja:0),Gb=Id[Id.length-1]+($d?Gb:0)}}),!Ob)return this||uc;var wb=[];for(ya=0;ya<Ga.length;ya++)if(void 0!==Va[ya])for(oa=0;oa<Va[ya].length;oa++)wb.push(Va[ya][oa]);else wb.push(Ga[ya]);return(this||uc).segments=wb,this||uc};u.prototype.abs=function(){return this.iterate(function(Z,ya,oa,Ga){ya=Z[0];var Va=ya.toUpperCase();if(ya!==Va)switch(Z[0]=Va,ya){case "v":return void(Z[1]+=Ga);case "a":return Z[6]+=oa,void(Z[7]+=Ga);default:for(ya=1;ya<Z.length;ya++)Z[ya]+=
ya%2?oa:Ga}},!0),this||uc};u.prototype.rel=function(){return this.iterate(function(Z,ya,oa,Ga){var Va=Z[0],Ob=Va.toLowerCase();if(Va!==Ob&&(0!==ya||"M"!==Va))switch(Z[0]=Ob,Va){case "V":return void(Z[1]-=Ga);case "A":return Z[6]-=oa,void(Z[7]-=Ga);default:for(ya=1;ya<Z.length;ya++)Z[ya]-=ya%2?oa:Ga}},!0),this||uc};u.prototype.unarc=function(){return this.iterate(function(Z,ya,oa,Ga){var Va,Ob,Ja,Gb=[];ya=Z[0];return"A"!==ya&&"a"!==ya?null:("a"===ya?(Ob=oa+Z[6],Ja=Ga+Z[7]):(Ob=Z[6],Ja=Z[7]),Va=Qea(oa,
Ga,Ob,Ja,Z[4],Z[5],Z[1],Z[2],Z[3]),0===Va.length?[["a"===Z[0]?"l":"L",Z[6],Z[7]]]:(Va.forEach(function(qb){Gb.push(["C",qb[2],qb[3],qb[4],qb[5],qb[6],qb[7]])}),Gb))}),this||uc};u.prototype.unshort=function(){var Z,ya,oa,Ga,Va,Ob=(this||uc).segments;return this.iterate(function(Ja,Gb,qb,Mc){var wb,Id=Ja[0],$d=Id.toUpperCase();Gb&&("T"===$d?(wb="t"===Id,oa=Ob[Gb-1],"Q"===oa[0]?(Z=oa[1]-qb,ya=oa[2]-Mc):"q"===oa[0]?(Z=oa[1]-oa[3],ya=oa[2]-oa[4]):(Z=0,ya=0),Ga=-Z,Va=-ya,wb||(Ga+=qb,Va+=Mc),Ob[Gb]=[wb?
"q":"Q",Ga,Va,Ja[1],Ja[2]]):"S"===$d&&(wb="s"===Id,oa=Ob[Gb-1],"C"===oa[0]?(Z=oa[3]-qb,ya=oa[4]-Mc):"c"===oa[0]?(Z=oa[3]-oa[5],ya=oa[4]-oa[6]):(Z=0,ya=0),Ga=-Z,Va=-ya,wb||(Ga+=qb,Va+=Mc),Ob[Gb]=[wb?"c":"C",Ga,Va,Ja[1],Ja[2],Ja[3],Ja[4]]))}),this||uc};var N1=u,CO={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Rea=/([astvzqmhlc])([^astvzqmhlc]*)/gi,Tea=function(Z){var ya=[];return Z.replace(Rea,function(oa,Ga,Va){oa=Ga.toLowerCase();Va=(Va=Va.match(Sea))?Va.map(Number):[];for("m"===oa&&2<Va.length&&(ya.push([Ga].concat(Va.splice(0,
2))),oa="l",Ga="m"===Ga?"l":"L");0<=Va.length;){if(Va.length===CO[oa])return Va.unshift(Ga),ya.push(Va);if(Va.length<CO[oa])throw Error("malformed path data");ya.push([Ga].concat(Va.splice(0,CO[oa])))}}),ya},Sea=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,hr=function(Z,ya,oa,Ga,Va,Ob,Ja,Gb){return new v(Z,ya,oa,Ga,Va,Ob,Ja,Gb)};v.prototype={constructor:v,init:function(){(this||uc).length=this.getArcLength([(this||uc).a.x,(this||uc).b.x,(this||uc).c.x,(this||uc).d.x],[(this||uc).a.y,(this||uc).b.y,(this||
uc).c.y,(this||uc).d.y])},getTotalLength:function(){return(this||uc).length},getPointAtLength:function(Z){Z=A(Z,(this||uc).length,(this||uc).getArcLength,[(this||uc).a.x,(this||uc).b.x,(this||uc).c.x,(this||uc).d.x],[(this||uc).a.y,(this||uc).b.y,(this||uc).c.y,(this||uc).d.y]);return this.getPoint([(this||uc).a.x,(this||uc).b.x,(this||uc).c.x,(this||uc).d.x],[(this||uc).a.y,(this||uc).b.y,(this||uc).c.y,(this||uc).d.y],Z)},getTangentAtLength:function(Z){Z=A(Z,(this||uc).length,(this||uc).getArcLength,
[(this||uc).a.x,(this||uc).b.x,(this||uc).c.x,(this||uc).d.x],[(this||uc).a.y,(this||uc).b.y,(this||uc).c.y,(this||uc).d.y]);Z=this.getDerivative([(this||uc).a.x,(this||uc).b.x,(this||uc).c.x,(this||uc).d.x],[(this||uc).a.y,(this||uc).b.y,(this||uc).c.y,(this||uc).d.y],Z);var ya=Math.sqrt(Z.x*Z.x+Z.y*Z.y);return 0<ya?{x:Z.x/ya,y:Z.y/ya}:{x:0,y:0}},getPropertiesAtLength:function(Z){Z=A(Z,(this||uc).length,(this||uc).getArcLength,[(this||uc).a.x,(this||uc).b.x,(this||uc).c.x,(this||uc).d.x],[(this||
uc).a.y,(this||uc).b.y,(this||uc).c.y,(this||uc).d.y]);var ya=this.getDerivative([(this||uc).a.x,(this||uc).b.x,(this||uc).c.x,(this||uc).d.x],[(this||uc).a.y,(this||uc).b.y,(this||uc).c.y,(this||uc).d.y],Z);var oa=Math.sqrt(ya.x*ya.x+ya.y*ya.y);ya=0<oa?{x:ya.x/oa,y:ya.y/oa}:{x:0,y:0};Z=this.getPoint([(this||uc).a.x,(this||uc).b.x,(this||uc).c.x,(this||uc).d.x],[(this||uc).a.y,(this||uc).b.y,(this||uc).c.y,(this||uc).d.y],Z);return{x:Z.x,y:Z.y,tangentX:ya.x,tangentY:ya.y}}};var Cea=[[],[],[-.5773502691896257,
.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,
-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,
.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,
-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,
.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,
-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,
.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,
-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,
.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,
-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,
.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],Dea=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,
.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,
.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],
[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,
.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],
[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,
.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,
.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,
.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,
.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,
.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,
.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],Bea=[[1],[1,1],[1,2,1],[1,3,3,1]],rD=2*Math.PI,Eea=function(Z,ya,oa,Ga,Va,Ob,Ja,Gb,qb){var Mc=Math.sin(Va*rD/360),wb=Math.cos(Va*rD/360);Va=wb*
(Z-Gb)/2+Mc*(ya-qb)/2;var Id=-Mc*(Z-Gb)/2+wb*(ya-qb)/2;if(0===Va&&0===Id||0===oa||0===Ga)return[];oa=Math.abs(oa);Ga=Math.abs(Ga);Va=Va*Va/(oa*oa)+Id*Id/(Ga*Ga);1<Va&&(oa*=Math.sqrt(Va),Ga*=Math.sqrt(Va));var $d=ea(Z,ya,Gb,qb,Ob,Ja,oa,Ga,Mc,wb);Z=[];ya=$d[2];Ob=$d[3];Ja=Math.max(Math.ceil(Math.abs(Ob)/(rD/4)),1);Ob/=Ja;for(Gb=0;Gb<Ja;Gb++)Z.push(ra(ya,Ob)),ya+=Ob;return Z.map(function(jf){for(var kf=0;kf<jf.length;kf+=2){var qe=jf[kf+0],lf=jf[kf+1];qe*=oa;lf*=Ga;var bo=Mc*qe+wb*lf;jf[kf+0]=wb*qe-
Mc*lf+$d[0];jf[kf+1]=bo+$d[1]}return jf})},R1=function(Z,ya,oa,Ga,Va,Ob,Ja,Gb,qb){return new D(Z,ya,oa,Ga,Va,Ob,Ja,Gb,qb)};D.prototype={constructor:D,init:function(){},getTotalLength:function(){return(this||uc).length},getPointAtLength:function(Z){var ya=this||uc;0>Z?Z=0:Z>(this||uc).length&&(Z=(this||uc).length);for(var oa=(this||uc).partialLengths.length-1;(this||uc).partialLengths[oa]>=Z&&0<(this||uc).partialLengths[oa];)oa--;oa<(this||uc).partialLengths.length-1&&oa++;for(var Ga=0,Va=0;Va<oa;Va++)Ga+=
ya.partialLengths[Va];return(this||uc).curves[oa].getPointAtLength(Z-Ga)},getTangentAtLength:function(Z){var ya=this||uc;0>Z?Z=0:Z>(this||uc).length&&(Z=(this||uc).length);for(var oa=(this||uc).partialLengths.length-1;(this||uc).partialLengths[oa]>=Z&&0<(this||uc).partialLengths[oa];)oa--;oa<(this||uc).partialLengths.length-1&&oa++;for(var Ga=0,Va=0;Va<oa;Va++)Ga+=ya.partialLengths[Va];return(this||uc).curves[oa].getTangentAtLength(Z-Ga)},getPropertiesAtLength:function(Z){var ya=this.getTangentAtLength(Z);
Z=this.getPointAtLength(Z);return{x:Z.x,y:Z.y,tangentX:ya.x,tangentY:ya.y}}};var Du=function(Z,ya,oa,Ga){return new O(Z,ya,oa,Ga)};O.prototype.getTotalLength=function(){return Math.sqrt(Math.pow((this||uc).x0-(this||uc).x1,2)+Math.pow((this||uc).y0-(this||uc).y1,2))};O.prototype.getPointAtLength=function(Z){Z/=Math.sqrt(Math.pow((this||uc).x0-(this||uc).x1,2)+Math.pow((this||uc).y0-(this||uc).y1,2));return{x:(this||uc).x0+((this||uc).x1-(this||uc).x0)*Z,y:(this||uc).y0+((this||uc).y1-(this||uc).y0)*
Z}};O.prototype.getTangentAtLength=function(){var Z=Math.sqrt(((this||uc).x1-(this||uc).x0)*((this||uc).x1-(this||uc).x0)+((this||uc).y1-(this||uc).y0)*((this||uc).y1-(this||uc).y0));return{x:((this||uc).x1-(this||uc).x0)/Z,y:((this||uc).y1-(this||uc).y0)/Z}};O.prototype.getPropertiesAtLength=function(Z){Z=this.getPointAtLength(Z);var ya=this.getTangentAtLength();return{x:Z.x,y:Z.y,tangentX:ya.x,tangentY:ya.y}};var Fea=function(Z){function ya(Ja){if(!Ja)return null;var Gb;Ja=Tea(Ja);for(var qb=[0,
0],Mc=[0,0],wb=0;wb<Ja.length;wb++)"M"===Ja[wb][0]?(qb=[Ja[wb][1],Ja[wb][2]],Va.push(null)):"m"===Ja[wb][0]?(qb=[Ja[wb][1]+qb[0],Ja[wb][2]+qb[1]],Va.push(null)):"L"===Ja[wb][0]?(oa+=Math.sqrt(Math.pow(qb[0]-Ja[wb][1],2)+Math.pow(qb[1]-Ja[wb][2],2)),Va.push(new Du(qb[0],Ja[wb][1],qb[1],Ja[wb][2])),qb=[Ja[wb][1],Ja[wb][2]]):"l"===Ja[wb][0]?(oa+=Math.sqrt(Math.pow(Ja[wb][1],2)+Math.pow(Ja[wb][2],2)),Va.push(new Du(qb[0],Ja[wb][1]+qb[0],qb[1],Ja[wb][2]+qb[1])),qb=[Ja[wb][1]+qb[0],Ja[wb][2]+qb[1]]):"H"===
Ja[wb][0]?(oa+=Math.abs(qb[0]-Ja[wb][1]),Va.push(new Du(qb[0],Ja[wb][1],qb[1],qb[1])),qb[0]=Ja[wb][1]):"h"===Ja[wb][0]?(oa+=Math.abs(Ja[wb][1]),Va.push(new Du(qb[0],qb[0]+Ja[wb][1],qb[1],qb[1])),qb[0]=Ja[wb][1]+qb[0]):"V"===Ja[wb][0]?(oa+=Math.abs(qb[1]-Ja[wb][1]),Va.push(new Du(qb[0],qb[0],qb[1],Ja[wb][1])),qb[1]=Ja[wb][1]):"v"===Ja[wb][0]?(oa+=Math.abs(Ja[wb][1]),Va.push(new Du(qb[0],qb[0],qb[1],qb[1]+Ja[wb][1])),qb[1]=Ja[wb][1]+qb[1]):"z"===Ja[wb][0]||"Z"===Ja[wb][0]?(oa+=Math.sqrt(Math.pow(Ja[0][1]-
qb[0],2)+Math.pow(Ja[0][2]-qb[1],2)),Va.push(new Du(qb[0],Ja[0][1],qb[1],Ja[0][2])),qb=[Ja[0][1],Ja[0][2]]):"C"===Ja[wb][0]?(Gb=new hr(qb[0],qb[1],Ja[wb][1],Ja[wb][2],Ja[wb][3],Ja[wb][4],Ja[wb][5],Ja[wb][6]),oa+=Gb.getTotalLength(),qb=[Ja[wb][5],Ja[wb][6]],Va.push(Gb)):"c"===Ja[wb][0]?(Gb=new hr(qb[0],qb[1],qb[0]+Ja[wb][1],qb[1]+Ja[wb][2],qb[0]+Ja[wb][3],qb[1]+Ja[wb][4],qb[0]+Ja[wb][5],qb[1]+Ja[wb][6]),oa+=Gb.getTotalLength(),qb=[Ja[wb][5]+qb[0],Ja[wb][6]+qb[1]],Va.push(Gb)):"S"===Ja[wb][0]?(Gb=0<
wb&&-1<["C","c","S","s"].indexOf(Ja[wb-1][0])?new hr(qb[0],qb[1],2*qb[0]-Ja[wb-1][Ja[wb-1].length-4],2*qb[1]-Ja[wb-1][Ja[wb-1].length-3],Ja[wb][1],Ja[wb][2],Ja[wb][3],Ja[wb][4]):new hr(qb[0],qb[1],qb[0],qb[1],Ja[wb][1],Ja[wb][2],Ja[wb][3],Ja[wb][4]),oa+=Gb.getTotalLength(),qb=[Ja[wb][3],Ja[wb][4]],Va.push(Gb)):"s"===Ja[wb][0]?(Gb=0<wb&&-1<["C","c","S","s"].indexOf(Ja[wb-1][0])?new hr(qb[0],qb[1],qb[0]+Gb.d.x-Gb.c.x,qb[1]+Gb.d.y-Gb.c.y,qb[0]+Ja[wb][1],qb[1]+Ja[wb][2],qb[0]+Ja[wb][3],qb[1]+Ja[wb][4]):
new hr(qb[0],qb[1],qb[0],qb[1],qb[0]+Ja[wb][1],qb[1]+Ja[wb][2],qb[0]+Ja[wb][3],qb[1]+Ja[wb][4]),oa+=Gb.getTotalLength(),qb=[Ja[wb][3]+qb[0],Ja[wb][4]+qb[1]],Va.push(Gb)):"Q"===Ja[wb][0]?(Gb=new hr(qb[0],qb[1],Ja[wb][1],Ja[wb][2],Ja[wb][3],Ja[wb][4]),oa+=Gb.getTotalLength(),Va.push(Gb),qb=[Ja[wb][3],Ja[wb][4]],Mc=[Ja[wb][1],Ja[wb][2]]):"q"===Ja[wb][0]?(Gb=new hr(qb[0],qb[1],qb[0]+Ja[wb][1],qb[1]+Ja[wb][2],qb[0]+Ja[wb][3],qb[1]+Ja[wb][4]),oa+=Gb.getTotalLength(),Mc=[qb[0]+Ja[wb][1],qb[1]+Ja[wb][2]],
qb=[Ja[wb][3]+qb[0],Ja[wb][4]+qb[1]],Va.push(Gb)):"T"===Ja[wb][0]?(Gb=0<wb&&-1<["Q","q","T","t"].indexOf(Ja[wb-1][0])?new hr(qb[0],qb[1],2*qb[0]-Mc[0],2*qb[1]-Mc[1],Ja[wb][1],Ja[wb][2]):new Du(qb[0],Ja[wb][1],qb[1],Ja[wb][2]),Va.push(Gb),oa+=Gb.getTotalLength(),Mc=[2*qb[0]-Mc[0],2*qb[1]-Mc[1]],qb=[Ja[wb][1],Ja[wb][2]]):"t"===Ja[wb][0]?(Gb=0<wb&&-1<["Q","q","T","t"].indexOf(Ja[wb-1][0])?new hr(qb[0],qb[1],2*qb[0]-Mc[0],2*qb[1]-Mc[1],qb[0]+Ja[wb][1],qb[1]+Ja[wb][2]):new Du(qb[0],qb[0]+Ja[wb][1],qb[1],
qb[1]+Ja[wb][2]),oa+=Gb.getTotalLength(),Mc=[2*qb[0]-Mc[0],2*qb[1]-Mc[1]],qb=[Ja[wb][1]+qb[0],Ja[wb][2]+qb[0]],Va.push(Gb)):"A"===Ja[wb][0]?(Gb=new R1(qb[0],qb[1],Ja[wb][1],Ja[wb][2],Ja[wb][3],Ja[wb][4],Ja[wb][5],Ja[wb][6],Ja[wb][7]),oa+=Gb.getTotalLength(),qb=[Ja[wb][6],Ja[wb][7]],Va.push(Gb)):"a"===Ja[wb][0]&&(Gb=new R1(qb[0],qb[1],Ja[wb][1],Ja[wb][2],Ja[wb][3],Ja[wb][4],Ja[wb][5],qb[0]+Ja[wb][6],qb[1]+Ja[wb][7]),oa+=Gb.getTotalLength(),qb=[qb[0]+Ja[wb][6],qb[1]+Ja[wb][7]],Va.push(Gb)),Ga.push(oa);
return ya}var oa=0,Ga=[],Va=[];ya.getTotalLength=function(){return oa};ya.getPointAtLength=function(Ja){Ja=Ob(Ja);return Va[Ja.i].getPointAtLength(Ja.fraction)};ya.getTangentAtLength=function(Ja){Ja=Ob(Ja);return Va[Ja.i].getTangentAtLength(Ja.fraction)};ya.getPropertiesAtLength=function(Ja){Ja=Ob(Ja);return Va[Ja.i].getPropertiesAtLength(Ja.fraction)};var Ob=function(Ja){0>Ja?Ja=0:Ja>oa&&(Ja=oa);for(var Gb=Ga.length-1;Ga[Gb]>=Ja&&0<Ga[Gb];)Gb--;return Gb++,{fraction:Ja-Ga[Gb-1],i:Gb}};return ya(Z)},
BO='All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\nExample valid ways of supplying a shape would be:\n[[0, 0], [10, 0], [10, 10]]\n"M0,0 L10,0 L10,10Z"\n',Gea=function(Z,ya){for(var oa,Ga,Va,Ob=Z.length,Ja=1/0,Gb=0;Gb<Ob;Gb++)!function(qb){Ga=0;ya.forEach(function(Mc,wb){Mc=L(Z[(qb+wb)%Ob],Mc);Ga+=Mc*Mc});Ga<Ja&&(Ja=Ga,oa=qb)}(Gb);oa&&(Va=Z.splice(0,oa),Z.splice.apply(Z,[Z.length,0].concat(Va)))},Nea=ec;
ec.deviation=function(Z,ya,oa,Ga){var Va=ya&&ya.length,Ob=Math.abs(jh(Z,0,Va?ya[0]*oa:Z.length,oa));if(Va){Va=0;for(var Ja=ya.length;Va<Ja;Va++)Ob-=Math.abs(jh(Z,ya[Va]*oa,Va<Ja-1?ya[Va+1]*oa:Z.length,oa))}for(Va=ya=0;Va<Ga.length;Va+=3){Ja=Ga[Va]*oa;var Gb=Ga[Va+1]*oa,qb=Ga[Va+2]*oa;ya+=Math.abs((Z[Ja]-Z[qb])*(Z[Gb+1]-Z[Ja+1])-(Z[Ja]-Z[Gb])*(Z[qb+1]-Z[Ja+1]))}return 0===Ob&&0===ya?0:Math.abs((ya-Ob)/Ob)};ec.flatten=function(Z){for(var ya=Z[0][0].length,oa={vertices:[],holes:[],dimensions:ya},Ga=
0,Va=0;Va<Z.length;Va++){for(var Ob=0;Ob<Z[Va].length;Ob++)for(var Ja=0;Ja<ya;Ja++)oa.vertices.push(Z[Va][Ob][Ja]);0<Va&&(Ga+=Z[Va-1].length,oa.holes.push(Ga))}return oa};var Uea=function(Z){return Z},Jea=function(Z){if(null==Z)return Uea;var ya,oa,Ga=Z.scale[0],Va=Z.scale[1],Ob=Z.translate[0],Ja=Z.translate[1];return function(Gb,qb){qb||(ya=oa=0);qb=2;var Mc=Gb.length,wb=Array(Mc);wb[0]=(ya+=Gb[0])*Ga+Ob;for(wb[1]=(oa+=Gb[1])*Va+Ja;qb<Mc;)wb[qb]=Gb[qb],++qb;return wb}},Mea=function(Z,ya){return"GeometryCollection"===
ya.type?{type:"FeatureCollection",features:ya.geometries.map(function(oa){return Kg(Z,oa)})}:Kg(Z,ya)},Kea=function(Z,ya){function oa(Mc){var wb,Id=Z.arcs[0>Mc?~Mc:Mc],$d=Id[0];return Z.transform?(wb=[0,0],Id.forEach(function(jf){wb[0]+=jf[0];wb[1]+=jf[1]})):wb=Id[Id.length-1],0>Mc?[wb,$d]:[$d,wb]}function Ga(Mc,wb){for(var Id in Mc){var $d=Mc[Id];delete wb[$d.start];delete $d.start;delete $d.end;$d.forEach(function(jf){Va[0>jf?~jf:jf]=1});Gb.push($d)}}var Va={},Ob={},Ja={},Gb=[],qb=-1;return ya.forEach(function(Mc,
wb){var Id,$d=Z.arcs[0>Mc?~Mc:Mc];3>$d.length&&!$d[1][0]&&!$d[1][1]&&(Id=ya[++qb],ya[qb]=Mc,ya[wb]=Id)}),ya.forEach(function(Mc){var wb=oa(Mc);var Id=wb[0],$d=wb[1];(wb=Ja[Id])?(delete Ja[wb.end],wb.push(Mc),wb.end=$d,Mc=Ob[$d])?(delete Ob[Mc.start],Id=Mc===wb?wb:wb.concat(Mc),Ob[Id.start=wb.start]=Ja[Id.end=Mc.end]=Id):Ob[wb.start]=Ja[wb.end]=wb:(wb=Ob[$d])?(delete Ob[wb.start],wb.unshift(Mc),wb.start=Id,Mc=Ja[Id])?(delete Ja[Mc.end],Id=Mc===wb?wb:Mc.concat(wb),Ob[Id.start=Mc.start]=Ja[Id.end=wb.end]=
Id):Ob[wb.start]=Ja[wb.end]=wb:(wb=[Mc],Ob[wb.start=Id]=Ja[wb.end=$d]=wb)}),Ga(Ja,Ob),Ga(Ob,Ja),ya.forEach(function(Mc){Va[0>Mc?~Mc:Mc]||Gb.push([Mc])}),Gb},S1=function(Z,ya){for(var oa=0,Ga=Z.length;oa<Ga;){var Va=oa+Ga>>>1;Z[Va]<ya?oa=Va+1:Ga=Va}return oa},Lea=function(Z){function ya(kf,qe){kf.forEach(function(lf){0>lf&&(lf=~lf);var bo=Va[lf];bo?bo.push(qe):Va[lf]=[qe]})}function oa(kf,qe){kf.forEach(function(lf){ya(lf,qe)})}function Ga(kf,qe){"GeometryCollection"===kf.type?kf.geometries.forEach(function(lf){Ga(lf,
qe)}):kf.type in Ja&&Ja[kf.type](kf.arcs,qe)}var Va={},Ob=Z.map(function(){return[]}),Ja={LineString:ya,MultiLineString:oa,Polygon:oa,MultiPolygon:function(kf,qe){kf.forEach(function(lf){oa(lf,qe)})}};Z.forEach(Ga);for(var Gb in Va){Z=Va[Gb];for(var qb=Z.length,Mc=0;Mc<qb;++Mc)for(var wb=Mc+1;wb<qb;++wb){var Id,$d=Z[Mc],jf=Z[wb];(Id=Ob[$d])[Gb=S1(Id,jf)]!==jf&&Id.splice(Gb,0,jf);(Id=Ob[jf])[Gb=S1(Id,$d)]!==$d&&Id.splice(Gb,0,$d)}}return Ob},O1=function(Z,ya){return Z<ya?-1:Z>ya?1:Z>=ya?0:NaN},P1=
function(Z){return 1===Z.length&&(Z=aj(Z)),{left:function(ya,oa,Ga,Va){null==Ga&&(Ga=0);for(null==Va&&(Va=ya.length);Ga<Va;){var Ob=Ga+Va>>>1;0>Z(ya[Ob],oa)?Ga=Ob+1:Va=Ob}return Ga},right:function(ya,oa,Ga,Va){null==Ga&&(Ga=0);for(null==Va&&(Va=ya.length);Ga<Va;){var Ob=Ga+Va>>>1;0<Z(ya[Ob],oa)?Va=Ob:Ga=Ob+1}return Ga}}};P1(O1);var Oea=function(Z,ya){return Hj(yj(Ij(Z),Z),ya)},Pea=function(Z,ya){if(8<Z.length)return Z.map(function(Ga,Va){return Va});var oa=Z.map(function(Ga){return ya.map(function(Va){Va=
L(bb(Ga),bb(Va));return Va*Va})});return fi(Z,ya,oa)};d.interpolate=function(Z,ya,oa){void 0===oa&&(oa={});var Ga=oa.maxSegmentLength;void 0===Ga&&(Ga=10);oa=oa.string;void 0===oa&&(oa=!0);var Va=ha(Z,Ga);Ga=ha(ya,Ga);var Ob=yb(Va,Ga,oa);return!oa||"string"!=typeof Z&&"string"!=typeof ya?Ob:function(Ja){return 1E-4>Ja&&"string"==typeof Z?Z:1E-4>1-Ja&&"string"==typeof ya?ya:Ob(Ja)}};d.separate=bj;d.combine=function(Z,ya,oa){void 0===oa&&(oa={});var Ga=oa.maxSegmentLength;void 0===Ga&&(Ga=10);var Va=
oa.string;void 0===Va&&(Va=!0);oa=oa.single;void 0===oa&&(oa=!1);var Ob=bj(ya,Z,{maxSegmentLength:Ga,string:Va,single:oa});return oa?function(Ja){return Ob(1-Ja)}:Ob.map(function(Ja){return function(Gb){return Ja(1-Gb)}})};d.interpolateAll=function(Z,ya,oa){void 0===oa&&(oa={});var Ga=oa.maxSegmentLength;void 0===Ga&&(Ga=10);var Va=oa.string;void 0===Va&&(Va=!0);oa=oa.single;if(void 0===oa&&(oa=!1),!Array.isArray(Z)||!Array.isArray(ya)||Z.length!==ya.length||!Z.length)throw new TypeError("flubber.all() expects two arrays of equal length as arguments. Each element in both arrays should be an array of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).");
var Ob,Ja,Gb=function(Mc){return ha(Mc,Ga)},qb=Z.map(Gb);Gb=ya.map(Gb);return oa?(Z.every(function(Mc){return"string"==typeof Mc})&&(Ob=Z.slice(0)),ya.every(function(Mc){return"string"==typeof Mc})&&(Ja=ya.slice(0))):(Ob=Z.slice(0),Ja=ya.slice(0)),Jj(qb,Gb,{string:Va,single:oa,t0:Ob,t1:Ja,match:!1})};d.splitPathString=function(Z){return Qa((new N1(Z)).abs())};d.toPathString=X;d.fromCircle=cj;d.toCircle=function(Z,ya,oa,Ga,Va){var Ob=cj(ya,oa,Ga,Z,Va);return function(Ja){return Ob(1-Ja)}};d.fromRect=
Kj;d.toRect=function(Z,ya,oa,Ga,Va,Ob){var Ja=Kj(ya,oa,Ga,Va,Z,Ob);return function(Gb){return Ja(1-Gb)}};Object.defineProperty(d,"__esModule",{value:!0})});var Vea={},Wea="function"===typeof Float32Array,Xea=Vea=function(d,h,n,b){if(!(0<=d&&1>=d&&0<=n&&1>=n))throw Error("bezier x values must be in [0, 1] range");if(d===h&&n===b)return mj;for(var e=Wea?new Float32Array(11):Array(11),m=0;11>m;++m)e[m]=Eh(.1*m,d,n);return function(a){if(0===a)return 0;if(1===a)return 1;for(var g=0,l=1;10!==l&&e[l]<=
a;++l)g+=.1;--l;l=g+(a-e[l])/(e[l+1]-e[l])*.1;var q=3*(1-3*n+3*d)*l*l+2*(3*n-6*d)*l+3*d;if(.001<=q){for(g=0;4>g;++g){q=3*(1-3*n+3*d)*l*l+2*(3*n-6*d)*l+3*d;if(0===q)break;var r=Eh(l,d,n)-a;l-=r/q}a=l}else if(0===q)a=l;else{l=g;g+=.1;var u=0;do r=l+(g-l)/2,q=Eh(r,d,n)-a,0<q?g=r:l=r;while(1E-7<Math.abs(q)&&10>++u);a=r}return Eh(a,h,b)}},jc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;!function(){var d={},h={};!function(n,b){function e(){(this||jc)._delay=0;(this||
jc)._endDelay=0;(this||jc)._fill="none";(this||jc)._iterationStart=0;(this||jc)._iterations=1;(this||jc)._duration=0;(this||jc)._playbackRate=1;(this||jc)._direction="normal";(this||jc)._easing="linear";(this||jc)._easingFunction=z}function m(){return n.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function a(N,aa,Y){var ma=new e;return aa&&(ma.fill="both",ma.duration="auto"),"number"!=typeof N||isNaN(N)?void 0!==N&&Object.getOwnPropertyNames(N).forEach(function(bb){"auto"==
N[bb]||("number"==typeof ma[bb]||"duration"==bb)&&("number"!=typeof N[bb]||isNaN(N[bb]))||"fill"==bb&&-1==v.indexOf(N[bb])||"direction"==bb&&-1==y.indexOf(N[bb])||"playbackRate"==bb&&1!==N[bb]&&n.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead.")||(ma[bb]=N[bb])}):ma.duration=N,ma}function g(N,aa,Y,ma){return 0>N||1<N||0>Y||1<Y?z:function(bb){if(0>=bb){var Qa=0;return 0<N?Qa=aa/N:!aa&&0<Y&&(Qa=ma/Y),Qa*bb}if(1<=bb)return Qa=0,1>Y?Qa=(ma-1)/(Y-1):
1==Y&&1>N&&(Qa=(aa-1)/(N-1)),1+Qa*(bb-1);Qa=0;for(var X=1;Qa<X;){var V=(Qa+X)/2,ha=3*N*(1-V)*(1-V)*V+3*Y*(1-V)*V*V+V*V*V;if(1E-5>Math.abs(bb-ha))break;ha<bb?Qa=V:X=V}return 3*aa*(1-V)*(1-V)*V+3*ma*(1-V)*V*V+V*V*V}}function l(N,aa){return function(Y){if(1<=Y)return 1;var ma=1/N;return(Y+=aa*ma)-Y%ma}}function q(N){K||(K=document.createElement("div").style);K.animationTimingFunction="";K.animationTimingFunction=N;var aa=K.animationTimingFunction;if(""==aa&&m())throw new TypeError(N+" is not a valid value for easing");
return aa}function r(N){if("linear"==N)return z;var aa=J.exec(N);return aa?g.apply(this||jc,aa.slice(1).map(Number)):(aa=P.exec(N))?l(Number(aa[1]),G):(aa=ea.exec(N))?l(Number(aa[1]),{start:A,middle:B,end:G}[aa[2]]):E[N]||z}function u(N,aa,Y){if(null==aa)return ra;var ma=Y.delay+N+Y.endDelay;return aa<Math.min(Y.delay,ma)?D:aa>=Math.min(Y.delay+N,ma)?O:L}var v=["backwards","forwards","both","none"],y=["reverse","alternate","alternate-reverse"],z=function(N){return N};e.prototype={_setMember:function(N,
aa){(this||jc)["_"+N]=aa;(this||jc)._effect&&((this||jc)._effect._timingInput[N]=aa,(this||jc)._effect._timing=n.normalizeTimingInput((this||jc)._effect._timingInput),(this||jc)._effect.activeDuration=n.calculateActiveDuration((this||jc)._effect._timing),(this||jc)._effect._animation&&(this||jc)._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return(this||jc)._playbackRate},set delay(N){this._setMember("delay",N)},get delay(){return(this||jc)._delay},set endDelay(N){this._setMember("endDelay",
N)},get endDelay(){return(this||jc)._endDelay},set fill(N){this._setMember("fill",N)},get fill(){return(this||jc)._fill},set iterationStart(N){if((isNaN(N)||0>N)&&m())throw new TypeError("iterationStart must be a non-negative number, received: "+N);this._setMember("iterationStart",N)},get iterationStart(){return(this||jc)._iterationStart},set duration(N){if("auto"!=N&&(isNaN(N)||0>N)&&m())throw new TypeError("duration must be non-negative or auto, received: "+N);this._setMember("duration",N)},get duration(){return(this||
jc)._duration},set direction(N){this._setMember("direction",N)},get direction(){return(this||jc)._direction},set easing(N){(this||jc)._easingFunction=r(q(N));this._setMember("easing",N)},get easing(){return(this||jc)._easing},set iterations(N){if((isNaN(N)||0>N)&&m())throw new TypeError("iterations must be non-negative, received: "+N);this._setMember("iterations",N)},get iterations(){return(this||jc)._iterations}};var A=1,B=.5,G=0,E={ease:g(.25,.1,.25,1),"ease-in":g(.42,0,1,1),"ease-out":g(0,0,.58,
1),"ease-in-out":g(.42,0,.58,1),"step-start":l(1,A),"step-middle":l(1,B),"step-end":l(1,G)},K=null,J=/cubic-bezier\(\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*\)/,P=/steps\(\s*(\d+)\s*\)/,ea=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,ra=0,D=1,O=2,L=3;n.cloneTimingInput=function(N){if("number"==typeof N)return N;var aa={},Y;for(Y in N)aa[Y]=N[Y];return aa};n.makeTiming=a;n.numericTimingToObject=function(N){return"number"==typeof N&&
(N=isNaN(N)?{duration:0}:{duration:N}),N};n.normalizeTimingInput=function(N,aa){return N=n.numericTimingToObject(N),a(N,aa)};n.calculateActiveDuration=function(N){return Math.abs((0===N.duration||0===N.iterations?0:N.duration*N.iterations)/N.playbackRate)};n.calculateIterationProgress=function(N,aa,Y){var ma=u(N,aa,Y);a:{var bb=Y.fill;switch(ma){case D:N="backwards"==bb||"both"==bb?0:null;break a;case L:N=aa-Y.delay;break a;case O:N="forwards"==bb||"both"==bb?N:null;break a;case ra:N=null;break a}N=
void 0}if(null===N)return null;aa=Y.duration;bb=Y.iterationStart;aa=(0===aa?ma!==D&&(bb+=Y.iterations):bb+=N/aa,bb);bb=aa===1/0?Y.iterationStart%1:aa%1;N=(0!==bb||ma!==O||0===Y.iterations||0===N&&0!==Y.duration||(bb=1),bb);bb=ma===O&&Y.iterations===1/0?1/0:1===N?Math.floor(aa)-1:Math.floor(aa);aa=ma=Y.direction;"normal"!==ma&&"reverse"!==ma&&("alternate-reverse"===ma&&(bb+=1),aa="normal",bb!==1/0&&0!=bb%2&&(aa="reverse"));return Y._easingFunction("normal"===aa?N:1-N)};n.calculatePhase=u;n.normalizeEasing=
q;n.parseEasingFunction=r}(d);(function(n,b){function e(l){var q=[],r;for(r in l)if(!(r in["easing","offset","composite"])){var u=l[r];Array.isArray(u)||(u=[u]);for(var v,y=u.length,z=0;z<y;z++)v={},v.offset="offset"in l?l.offset:1==y?1:z/(y-1),"easing"in l&&(v.easing=l.easing),"composite"in l&&(v.composite=l.composite),v[r]=u[z],q.push(v)}return q.sort(function(A,B){return A.offset-B.offset}),q}var m={background:"backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundAttachment backgroundOrigin backgroundClip backgroundColor".split(" "),
border:"borderTopColor borderTopStyle borderTopWidth borderRightColor borderRightStyle borderRightWidth borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth".split(" "),borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius",
"borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:"fontFamily fontSize fontStyle fontVariant fontWeight lineHeight".split(" "),margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle",
"outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},a=document.createElementNS("http://www.w3.org/1999/xhtml","div");b={thin:"1px",medium:"3px",thick:"5px"};var g={borderBottomWidth:b,borderLeftWidth:b,borderRightWidth:b,borderTopWidth:b,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:b,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};
n.convertToArrayForm=e;n.normalizeKeyframes=function(l){function q(){var z=r.length;null==r[z-1].offset&&(r[z-1].offset=1);1<z&&null==r[0].offset&&(r[0].offset=0);for(var A=0,B=r[0].offset,G=1;G<z;G++){var E=r[G].offset;if(null!=E){for(var K=1;K<G-A;K++)r[A+K].offset=B+(E-B)*K/(G-A);A=G;B=E}}}if(null==l)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&l[Symbol.iterator]&&(l=Array.from(l));Array.isArray(l)||(l=e(l));var r=l.map(function(z){var A={},B;for(B in z){var G=z[B];if("offset"==
B){if(null!=G){if(G=Number(G),!isFinite(G))throw new TypeError("Keyframe offsets must be numbers.");if(0>G||1<G)throw new TypeError("Keyframe offsets must be between 0 and 1.");}}else if("composite"==B){if("add"==G||"accumulate"==G)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};if("replace"!=G)throw new TypeError("Invalid composite mode "+G+".");}else G="easing"==B?n.normalizeEasing(G):""+G;var E=void 0,K=B,J=G;G=A;var P=K;if("display"!==
P&&0!==P.lastIndexOf("animation",0)&&0!==P.lastIndexOf("transition",0))if(P=m[K])for(E in a.style[K]=J,P)K=P[E],J=a.style[K],G[K]=K in g?g[K][J]||J:J;else G[K]=K in g?g[K][J]||J:J}return void 0==A.offset&&(A.offset=null),void 0==A.easing&&(A.easing="linear"),A});l=!0;for(var u=-1/0,v=0;v<r.length;v++){var y=r[v].offset;if(null!=y){if(y<u)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");u=y}else l=!1}return r=r.filter(function(z){return 0<=z.offset&&1>=z.offset}),
l||q(),r}})(d);(function(n){var b={};n.isDeprecated=function(e,m,a,g){g=g?"are":"is";var l=new Date;m=new Date(m);return m.setMonth(m.getMonth()+3),!(l<m&&(e in b||console.warn("Web Animations: "+e+" "+g+" deprecated and will stop working on "+m.toDateString()+". "+a),b[e]=!0,1))};n.deprecated=function(e,m,a,g){var l=g?"are":"is";if(n.isDeprecated(e,m,a,g))throw Error(e+" "+l+" no longer supported. "+a);}})(d);(function(){if(document.documentElement.animate){var n=document.documentElement.animate([],
0),b=!0;if(n&&(b=!1,"play currentTime pause reverse playbackRate cancel finish startTime playState".split(" ").forEach(function(e){void 0===n[e]&&(b=!0)})),!b)return}!function(e,m,a){function g(q){for(var r={},u=0;u<q.length;u++)for(var v in q[u])if("offset"!=v&&"easing"!=v&&"composite"!=v){var y={offset:q[u].offset,easing:q[u].easing,value:q[u][v]};r[v]=r[v]||[];r[v].push(y)}for(var z in r)if(q=r[z],0!=q[0].offset||1!=q[q.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",
message:"Partial keyframes are not supported"};return r}function l(q){var r=[],u;for(u in q)for(var v=q[u],y=0;y<v.length-1;y++){var z=y,A=y+1,B=v[z].offset,G=v[A].offset,E=B,K=G;0==y&&(E=-1/0,0==G&&(A=z));y==v.length-2&&(K=1/0,1==B&&(z=A));r.push({applyFrom:E,applyTo:K,startOffset:v[z].offset,endOffset:v[A].offset,easingFunction:e.parseEasingFunction(v[z].easing),property:u,interpolation:m.propertyInterpolation(u,v[z].value,v[A].value)})}return r.sort(function(J,P){return J.startOffset-P.startOffset}),
r}m.convertEffectInput=function(q){q=e.normalizeKeyframes(q);var r=g(q),u=l(r);return function(v,y){if(null!=y)u.filter(function(A){return y>=A.applyFrom&&y<A.applyTo}).forEach(function(A){var B=y-A.startOffset,G=A.endOffset-A.startOffset;B=0==G?0:A.easingFunction(B/G);m.apply(v,A.property,A.interpolation(B))});else for(var z in r)"offset"!=z&&"easing"!=z&&"composite"!=z&&m.clear(v,z)}}}(d,h);(function(e,m,a){function g(r){return r.replace(/-(.)/g,function(u,v){return v.toUpperCase()})}var l={};m.addPropertiesHandler=
function(r,u,v){for(var y=0;y<v.length;y++){var z=r,A=u,B=g(v[y]);l[B]=l[B]||[];l[B].push([z,A])}};var q={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",
bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",strokeDasharray:"none",strokeDashoffset:"0px",
textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};m.propertyInterpolation=function(r,u,v){var y=r;/-/.test(r)&&!e.isDeprecated("Hyphenated property names","2016-03-22","Use camelCase instead.",!0)&&(y=g(r));"initial"!=u&&"initial"!=v||("initial"==u&&(u=q[y]),"initial"==v&&(v=q[y]));r=u==v?[]:l[y];for(y=0;r&&y<r.length;y++){var z=r[y][0](u),A=r[y][0](v);if(void 0!==z&&void 0!==A&&(z=
r[y][1](z,A))){var B=m.Interpolation.apply(null,z);return function(G){return 0==G?u:1==G?v:B(G)}}}return m.Interpolation(!1,!0,function(G){return G?v:u})}})(d,h);(function(e,m,a){function g(l){var q=e.calculateActiveDuration(l),r=function(u){return e.calculateIterationProgress(q,u,l)};return r._totalDuration=l.delay+q+l.endDelay,r}m.KeyframeEffect=function(l,q,r,u){var v,y=g(e.normalizeTimingInput(r)),z=m.convertEffectInput(q);q=function(){z(l,v)};return q._update=function(A){return null!==(v=y(A))},
q._clear=function(){z(l,null)},q._hasSameTarget=function(A){return l===A},q._target=l,q._totalDuration=y._totalDuration,q._id=u,q}})(d,h);(function(e,m){function a(z,A,B){B.enumerable=!0;B.configurable=!0;Object.defineProperty(z,A,B)}function g(z){(this||jc)._element=z;(this||jc)._surrogateStyle=document.createElementNS("http://www.w3.org/1999/xhtml","div").style;(this||jc)._style=z.style;(this||jc)._length=0;(this||jc)._isAnimatedProperty={};var A=window;z=!(!z.namespaceURI||-1==z.namespaceURI.indexOf("/svg"))&&
(q in A||(A[q]=/Trident|MSIE|IEMobile|Edge|Android 4/i.test(A.navigator.userAgent)),A[q]);(this||jc)._updateSvgTransformAttr=z;(this||jc)._savedTransformAttr=null;for(z=0;z<(this||jc)._style.length;z++)A=(this||jc)._style[z],(this||jc)._surrogateStyle[A]=(this||jc)._style[A];this._updateIndices()}function l(z){if(!z._webAnimationsPatchedStyle){var A=new g(z);try{a(z,"style",{get:function(){return A}})}catch(B){z.style._set=function(G,E){z.style[G]=E},z.style._clear=function(G){z.style[G]=""}}z._webAnimationsPatchedStyle=
z.style}}var q="_webAnimationsUpdateSvgTransformAttr";m={cssText:1,length:1,parentRule:1};var r={getPropertyCSSValue:1,getPropertyPriority:1,getPropertyValue:1,item:1,removeProperty:1,setProperty:1},u={removeProperty:1,setProperty:1};g.prototype={get cssText(){return(this||jc)._surrogateStyle.cssText},set cssText(z){for(var A={},B=0;B<(this||jc)._surrogateStyle.length;B++)A[(this||jc)._surrogateStyle[B]]=!0;(this||jc)._surrogateStyle.cssText=z;this._updateIndices();for(B=0;B<(this||jc)._surrogateStyle.length;B++)A[(this||
jc)._surrogateStyle[B]]=!0;for(var G in A)(this||jc)._isAnimatedProperty[G]||(this||jc)._style.setProperty(G,(this||jc)._surrogateStyle.getPropertyValue(G))},get length(){return(this||jc)._surrogateStyle.length},get parentRule(){return(this||jc)._style.parentRule},_updateIndices:function(){for(;(this||jc)._length<(this||jc)._surrogateStyle.length;)Object.defineProperty(this||jc,(this||jc)._length,{configurable:!0,enumerable:!1,get:function(z){return function(){return(this||jc)._surrogateStyle[z]}}((this||
jc)._length)}),(this||jc)._length++;for(;(this||jc)._length>(this||jc)._surrogateStyle.length;)(this||jc)._length--,Object.defineProperty(this||jc,(this||jc)._length,{configurable:!0,enumerable:!1,value:void 0})},_set:function(z,A){(this||jc)._style[z]=A;(this||jc)._isAnimatedProperty[z]=!0;(this||jc)._updateSvgTransformAttr&&"transform"==e.unprefixedPropertyName(z)&&(null==(this||jc)._savedTransformAttr&&((this||jc)._savedTransformAttr=(this||jc)._element.getAttribute("transform")),(this||jc)._element.setAttribute("transform",
e.transformToSvgMatrix(A)))},_clear:function(z){(this||jc)._style[z]=(this||jc)._surrogateStyle[z];(this||jc)._updateSvgTransformAttr&&"transform"==e.unprefixedPropertyName(z)&&((this||jc)._savedTransformAttr?(this||jc)._element.setAttribute("transform",(this||jc)._savedTransformAttr):(this||jc)._element.removeAttribute("transform"),(this||jc)._savedTransformAttr=null);delete (this||jc)._isAnimatedProperty[z]}};for(var v in r)g.prototype[v]=function(z,A){return function(){var B=(this||jc)._surrogateStyle[z].apply((this||
jc)._surrogateStyle,arguments);return A&&((this||jc)._isAnimatedProperty[arguments[0]]||(this||jc)._style[z].apply((this||jc)._style,arguments),this._updateIndices()),B}}(v,v in u);for(var y in document.documentElement.style)y in m||y in r||function(z){a(g.prototype,z,{get:function(){return(this||jc)._surrogateStyle[z]},set:function(A){(this||jc)._surrogateStyle[z]=A;this._updateIndices();(this||jc)._isAnimatedProperty[z]||((this||jc)._style[z]=A)}})}(y);e.apply=function(z,A,B){l(z);z.style._set(e.propertyName(A),
B)};e.clear=function(z,A){z._webAnimationsPatchedStyle&&z.style._clear(e.propertyName(A))}})(h);(function(e){window.Element.prototype.animate=function(m,a){var g="";return a&&a.id&&(g=a.id),e.timeline._play(e.KeyframeEffect(this||jc,m,a,g))}})(h);(function(e,m){function a(g,l,q){if("number"==typeof g&&"number"==typeof l)return g*(1-q)+l*q;if("boolean"==typeof g&&"boolean"==typeof l)return.5>q?g:l;if(g.length==l.length){for(var r=[],u=0;u<g.length;u++)r.push(a(g[u],l[u],q));return r}throw"Mismatched interpolation arguments "+
g+":"+l;}e.Interpolation=function(g,l,q){return function(r){return q(a(g,l,r))}}})(h);(function(e,m){m=function(){function a(g,l){for(var q=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0;4>r;r++)for(var u=0;4>u;u++)for(var v=0;4>v;v++)q[r][u]+=l[r][v]*g[v][u];return q}return function(g,l,q,r,u){for(var v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],y=0;4>y;y++)v[y][3]=u[y];for(y=0;3>y;y++)for(u=0;3>u;u++)v[3][y]+=g[u]*v[u][y];g=r[0];y=r[1];u=r[2];r=r[3];var z=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];
z[0][0]=1-2*(y*y+u*u);z[0][1]=2*(g*y-u*r);z[0][2]=2*(g*u+y*r);z[1][0]=2*(g*y+u*r);z[1][1]=1-2*(g*g+u*u);z[1][2]=2*(y*u-g*r);z[2][0]=2*(g*u-y*r);z[2][1]=2*(y*u+g*r);z[2][2]=1-2*(g*g+y*y);v=a(v,z);r=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];q[2]&&(r[2][1]=q[2],v=a(v,r));q[1]&&(r[2][1]=0,r[2][0]=q[0],v=a(v,r));q[0]&&(r[2][0]=0,r[1][0]=q[0],v=a(v,r));for(y=0;3>y;y++)for(u=0;3>u;u++)v[y][u]*=l[y];return 0==v[0][2]&&0==v[0][3]&&0==v[1][2]&&0==v[1][3]&&0==v[2][0]&&0==v[2][1]&&1==v[2][2]&&0==v[2][3]&&0==
v[3][2]&&1==v[3][3]?[v[0][0],v[0][1],v[1][0],v[1][1],v[3][0],v[3][1]]:v[0].concat(v[1],v[2],v[3])}}();e.composeMatrix=m;e.quat=function(a,g,l){var q=e.dot(a,g);q=Math.max(Math.min(q,1),-1);var r=[];if(1===q)r=a;else for(var u=Math.acos(q),v=1*Math.sin(l*u)/Math.sqrt(1-q*q),y=0;4>y;y++)r.push(a[y]*(Math.cos(l*u)-q*v)+g[y]*v);return r}})(h);(function(e,m,a){e.sequenceNumber=0;var g=function(l,q,r){(this||jc).target=l;(this||jc).currentTime=q;(this||jc).timelineTime=r;(this||jc).type="finish";(this||
jc).bubbles=!1;(this||jc).cancelable=!1;(this||jc).currentTarget=l;(this||jc).defaultPrevented=!1;(this||jc).eventPhase=Event.AT_TARGET;(this||jc).timeStamp=Date.now()};m.Animation=function(l){(this||jc).id="";l&&l._id&&((this||jc).id=l._id);(this||jc)._sequenceNumber=e.sequenceNumber++;(this||jc)._currentTime=0;(this||jc)._startTime=null;(this||jc)._paused=!1;(this||jc)._playbackRate=1;(this||jc)._inTimeline=!0;(this||jc)._finishedFlag=!0;(this||jc).onfinish=null;(this||jc)._finishHandlers=[];(this||
jc)._effect=l;(this||jc)._inEffect=(this||jc)._effect._update(0);(this||jc)._idle=!0;(this||jc)._currentTimePending=!1};m.Animation.prototype={_ensureAlive:function(){0>(this||jc).playbackRate&&0===(this||jc).currentTime?(this||jc)._inEffect=(this||jc)._effect._update(-1):(this||jc)._inEffect=(this||jc)._effect._update((this||jc).currentTime);(this||jc)._inTimeline||!(this||jc)._inEffect&&(this||jc)._finishedFlag||((this||jc)._inTimeline=!0,m.timeline._animations.push(this||jc))},_tickCurrentTime:function(l,
q){l!=(this||jc)._currentTime&&((this||jc)._currentTime=l,(this||jc)._isFinished&&!q&&((this||jc)._currentTime=0<(this||jc)._playbackRate?(this||jc)._totalDuration:0),this._ensureAlive())},get currentTime(){return(this||jc)._idle||(this||jc)._currentTimePending?null:(this||jc)._currentTime},set currentTime(l){l=+l;isNaN(l)||(m.restart(),(this||jc)._paused||null==(this||jc)._startTime||((this||jc)._startTime=(this||jc)._timeline.currentTime-l/(this||jc)._playbackRate),(this||jc)._currentTimePending=
!1,(this||jc)._currentTime!=l&&((this||jc)._idle&&((this||jc)._idle=!1,(this||jc)._paused=!0),this._tickCurrentTime(l,!0),m.applyDirtiedAnimation(this||jc)))},get startTime(){return(this||jc)._startTime},set startTime(l){l=+l;isNaN(l)||(this||jc)._paused||(this||jc)._idle||((this||jc)._startTime=l,this._tickCurrentTime(((this||jc)._timeline.currentTime-(this||jc)._startTime)*(this||jc).playbackRate),m.applyDirtiedAnimation(this||jc))},get playbackRate(){return(this||jc)._playbackRate},set playbackRate(l){if(l!=
(this||jc)._playbackRate){var q=(this||jc).currentTime;(this||jc)._playbackRate=l;(this||jc)._startTime=null;"paused"!=(this||jc).playState&&"idle"!=(this||jc).playState&&((this||jc)._finishedFlag=!1,(this||jc)._idle=!1,this._ensureAlive(),m.applyDirtiedAnimation(this||jc));null!=q&&((this||jc).currentTime=q)}},get _isFinished(){return!(this||jc)._idle&&(0<(this||jc)._playbackRate&&(this||jc)._currentTime>=(this||jc)._totalDuration||0>(this||jc)._playbackRate&&0>=(this||jc)._currentTime)},get _totalDuration(){return(this||
jc)._effect._totalDuration},get playState(){return(this||jc)._idle?"idle":null==(this||jc)._startTime&&!(this||jc)._paused&&0!=(this||jc).playbackRate||(this||jc)._currentTimePending?"pending":(this||jc)._paused?"paused":(this||jc)._isFinished?"finished":"running"},_rewind:function(){if(0<=(this||jc)._playbackRate)(this||jc)._currentTime=0;else{if(!((this||jc)._totalDuration<1/0))throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");
(this||jc)._currentTime=(this||jc)._totalDuration}},play:function(){(this||jc)._paused=!1;((this||jc)._isFinished||(this||jc)._idle)&&(this._rewind(),(this||jc)._startTime=null);(this||jc)._finishedFlag=!1;(this||jc)._idle=!1;this._ensureAlive();m.applyDirtiedAnimation(this||jc)},pause:function(){(this||jc)._isFinished||(this||jc)._paused||(this||jc)._idle?(this||jc)._idle&&(this._rewind(),(this||jc)._idle=!1):(this||jc)._currentTimePending=!0;(this||jc)._startTime=null;(this||jc)._paused=!0},finish:function(){(this||
jc)._idle||((this||jc).currentTime=0<(this||jc)._playbackRate?(this||jc)._totalDuration:0,(this||jc)._startTime=(this||jc)._totalDuration-(this||jc).currentTime,(this||jc)._currentTimePending=!1,m.applyDirtiedAnimation(this||jc))},cancel:function(){(this||jc)._inEffect&&((this||jc)._inEffect=!1,(this||jc)._idle=!0,(this||jc)._paused=!1,(this||jc)._finishedFlag=!0,(this||jc)._currentTime=0,(this||jc)._startTime=null,(this||jc)._effect._update(null),m.applyDirtiedAnimation(this||jc))},reverse:function(){(this||
jc).playbackRate*=-1;this.play()},addEventListener:function(l,q){"function"==typeof q&&"finish"==l&&(this||jc)._finishHandlers.push(q)},removeEventListener:function(l,q){"finish"==l&&(l=(this||jc)._finishHandlers.indexOf(q),0<=l&&(this||jc)._finishHandlers.splice(l,1))},_fireEvents:function(l){if((this||jc)._isFinished){if(!(this||jc)._finishedFlag){var q=new g(this||jc,(this||jc)._currentTime,l),r=(this||jc)._finishHandlers.concat((this||jc).onfinish?[(this||jc).onfinish]:[]);setTimeout(function(){r.forEach(function(u){u.call(q.target,
q)})},0);(this||jc)._finishedFlag=!0}}else(this||jc)._finishedFlag=!1},_tick:function(l,q){(this||jc)._idle||(this||jc)._paused||(null==(this||jc)._startTime?q&&((this||jc).startTime=l-(this||jc)._currentTime/(this||jc).playbackRate):(this||jc)._isFinished||this._tickCurrentTime((l-(this||jc)._startTime)*(this||jc).playbackRate));q&&((this||jc)._currentTimePending=!1,this._fireEvents(l))},get _needsTick(){return(this||jc).playState in{pending:1,running:1}||!(this||jc)._finishedFlag},_targetAnimations:function(){var l=
(this||jc)._effect._target;return l._activeAnimations||(l._activeAnimations=[]),l._activeAnimations},_markTarget:function(){var l=this._targetAnimations();-1===l.indexOf(this||jc)&&l.push(this||jc)},_unmarkTarget:function(){var l=this._targetAnimations(),q=l.indexOf(this||jc);-1!==q&&l.splice(q,1)}}})(d,h);(function(e,m,a){function g(J){var P=y;y=[];J<K.currentTime&&(J=K.currentTime);K._animations.sort(l);K._animations=u(J,!0,K._animations)[0];P.forEach(function(ea){ea[1](J)});r()}function l(J,P){return J._sequenceNumber-
P._sequenceNumber}function q(){(this||jc)._animations=[];(this||jc).currentTime=window.performance&&performance.now?performance.now():0}function r(){G.forEach(function(J){J()});G.length=0}function u(J,P,ea){E=!0;B=!1;m.timeline.currentTime=J;A=!1;var ra=[],D=[],O=[],L=[];return ea.forEach(function(N){N._tick(J,P);N._inEffect?(D.push(N._effect),N._markTarget()):(ra.push(N._effect),N._unmarkTarget());N._needsTick&&(A=!0);var aa=N._inEffect||N._needsTick;(N._inTimeline=aa)?O.push(N):L.push(N)}),G.push.apply(G,
ra),G.push.apply(G,D),A&&requestAnimationFrame(function(){}),E=!1,[O,L]}var v=window.requestAnimationFrame,y=[],z=0;window.requestAnimationFrame=function(J){var P=z++;return 0==y.length&&v(g),y.push([P,J]),P};window.cancelAnimationFrame=function(J){y.forEach(function(P){P[0]==J&&(P[1]=function(){})})};q.prototype={_play:function(J){J._timing=e.normalizeTimingInput(J.timing);J=new m.Animation(J);return J._idle=!1,J._timeline=this||jc,(this||jc)._animations.push(J),m.restart(),m.applyDirtiedAnimation(J),
J}};var A=!1,B=!1;m.restart=function(){return A||(A=!0,requestAnimationFrame(function(){}),B=!0),B};m.applyDirtiedAnimation=function(J){E||(J._markTarget(),J=J._targetAnimations(),J.sort(l),u(m.timeline.currentTime,!1,J.slice())[1].forEach(function(P){P=K._animations.indexOf(P);-1!==P&&K._animations.splice(P,1)}),r())};var G=[],E=!1,K=new q;m.timeline=K})(d,h);(function(e,m){function a(v,y){for(var z=0,A=0;A<v.length;A++)z+=v[A]*y[A];return z}function g(v,y){return[v[0]*y[0]+v[4]*y[1]+v[8]*y[2]+v[12]*
y[3],v[1]*y[0]+v[5]*y[1]+v[9]*y[2]+v[13]*y[3],v[2]*y[0]+v[6]*y[1]+v[10]*y[2]+v[14]*y[3],v[3]*y[0]+v[7]*y[1]+v[11]*y[2]+v[15]*y[3],v[0]*y[4]+v[4]*y[5]+v[8]*y[6]+v[12]*y[7],v[1]*y[4]+v[5]*y[5]+v[9]*y[6]+v[13]*y[7],v[2]*y[4]+v[6]*y[5]+v[10]*y[6]+v[14]*y[7],v[3]*y[4]+v[7]*y[5]+v[11]*y[6]+v[15]*y[7],v[0]*y[8]+v[4]*y[9]+v[8]*y[10]+v[12]*y[11],v[1]*y[8]+v[5]*y[9]+v[9]*y[10]+v[13]*y[11],v[2]*y[8]+v[6]*y[9]+v[10]*y[10]+v[14]*y[11],v[3]*y[8]+v[7]*y[9]+v[11]*y[10]+v[15]*y[11],v[0]*y[12]+v[4]*y[13]+v[8]*y[14]+
v[12]*y[15],v[1]*y[12]+v[5]*y[13]+v[9]*y[14]+v[13]*y[15],v[2]*y[12]+v[6]*y[13]+v[10]*y[14]+v[14]*y[15],v[3]*y[12]+v[7]*y[13]+v[11]*y[14]+v[15]*y[15]]}function l(v){return 2*((v.deg||0)/360+(v.grad||0)/400+(v.turn||0))*Math.PI+(v.rad||0)}function q(v){switch(v.t){case "rotatex":return v=l(v.d[0]),[1,0,0,0,0,Math.cos(v),Math.sin(v),0,0,-Math.sin(v),Math.cos(v),0,0,0,0,1];case "rotatey":return v=l(v.d[0]),[Math.cos(v),0,-Math.sin(v),0,0,1,0,0,Math.sin(v),0,Math.cos(v),0,0,0,0,1];case "rotate":case "rotatez":return v=
l(v.d[0]),[Math.cos(v),Math.sin(v),0,0,-Math.sin(v),Math.cos(v),0,0,0,0,1,0,0,0,0,1];case "rotate3d":var y=v.d[0],z=v.d[1],A=v.d[2];v=l(v.d[3]);var B=y*y+z*z+A*A;0===B?(y=1,A=z=0):1!==B&&(B=Math.sqrt(B),y/=B,z/=B,A/=B);B=Math.sin(v/2);v=B*Math.cos(v/2);B*=B;return[1-2*(z*z+A*A)*B,2*(y*z*B+A*v),2*(y*A*B-z*v),0,2*(y*z*B-A*v),1-2*(y*y+A*A)*B,2*(z*A*B+y*v),0,2*(y*A*B+z*v),2*(z*A*B-y*v),1-2*(y*y+z*z)*B,0,0,0,0,1];case "scale":return[v.d[0],0,0,0,0,v.d[1],0,0,0,0,1,0,0,0,0,1];case "scalex":return[v.d[0],
0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "scaley":return[1,0,0,0,0,v.d[0],0,0,0,0,1,0,0,0,0,1];case "scalez":return[1,0,0,0,0,1,0,0,0,0,v.d[0],0,0,0,0,1];case "scale3d":return[v.d[0],0,0,0,0,v.d[1],0,0,0,0,v.d[2],0,0,0,0,1];case "skew":return y=l(v.d[0]),z=l(v.d[1]),[1,Math.tan(z),0,0,Math.tan(y),1,0,0,0,0,1,0,0,0,0,1];case "skewx":return v=l(v.d[0]),[1,0,0,0,Math.tan(v),1,0,0,0,0,1,0,0,0,0,1];case "skewy":return v=l(v.d[0]),[1,Math.tan(v),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "translate":return y=v.d[0].px||
0,z=v.d[1].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,y,z,0,1];case "translatex":return y=v.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,y,0,0,1];case "translatey":return z=v.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,z,0,1];case "translatez":return A=v.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,A,1];case "translate3d":return y=v.d[0].px||0,z=v.d[1].px||0,A=v.d[2].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,y,z,A,1];case "perspective":return[1,0,0,0,0,1,0,0,0,0,1,v.d[0].px?-1/v.d[0].px:0,0,0,0,1];case "matrix":return[v.d[0],v.d[1],0,0,v.d[2],
v.d[3],0,0,0,0,1,0,v.d[4],v.d[5],0,1];case "matrix3d":return v.d}}function r(v){return 0===v.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:v.map(q).reduce(g)}var u=function(){function v(B){return B[0][0]*B[1][1]*B[2][2]+B[1][0]*B[2][1]*B[0][2]+B[2][0]*B[0][1]*B[1][2]-B[0][2]*B[1][1]*B[2][0]-B[1][2]*B[2][1]*B[0][0]-B[2][2]*B[0][1]*B[1][0]}function y(B){var G=z(B);return[B[0]/G,B[1]/G,B[2]/G]}function z(B){return Math.sqrt(B[0]*B[0]+B[1]*B[1]+B[2]*B[2])}function A(B,G,E,K){return[E*B[0]+K*G[0],E*B[1]+K*
G[1],E*B[2]+K*G[2]]}return function(B){B=[B.slice(0,4),B.slice(4,8),B.slice(8,12),B.slice(12,16)];if(1!==B[3][3])return null;for(var G=[],E=0;4>E;E++)G.push(B[E].slice());for(E=0;3>E;E++)G[E][3]=0;if(0===v(G))return null;var K=[];if(B[0][3]||B[1][3]||B[2][3]){K.push(B[0][3]);K.push(B[1][3]);K.push(B[2][3]);K.push(B[3][3]);var J=1/v(G),P=G[0][0],ea=G[0][1];E=G[0][2];var ra=G[1][0],D=G[1][1],O=G[1][2],L=G[2][0],N=G[2][1],aa=G[2][2];J=[[(D*aa-O*N)*J,(E*N-ea*aa)*J,(ea*O-E*D)*J,0],[(O*L-ra*aa)*J,(P*aa-
E*L)*J,(E*ra-P*O)*J,0],[(ra*N-D*L)*J,(L*ea-P*N)*J,(P*D-ea*ra)*J,0]];P=[];for(ea=0;3>ea;ea++){for(ra=E=0;3>ra;ra++)E+=G[3][ra]*J[ra][ea];P.push(E)}G=(P.push(1),J.push(P),J);G=[[G[0][0],G[1][0],G[2][0],G[3][0]],[G[0][1],G[1][1],G[2][1],G[3][1]],[G[0][2],G[1][2],G[2][2],G[3][2]],[G[0][3],G[1][3],G[2][3],G[3][3]]];J=[];for(P=0;4>P;P++){for(E=ea=0;4>E;E++)ea+=K[E]*G[E][P];J.push(ea)}K=J}else K=[0,0,0,1];G=B[3].slice(0,3);J=[];J.push(B[0].slice(0,3));P=[];P.push(z(J[0]));J[0]=y(J[0]);ea=[];J.push(B[1].slice(0,
3));ea.push(a(J[0],J[1]));J[1]=A(J[1],J[0],1,-ea[0]);P.push(z(J[1]));J[1]=y(J[1]);ea[0]/=P[1];J.push(B[2].slice(0,3));ea.push(a(J[0],J[2]));J[2]=A(J[2],J[0],1,-ea[1]);ea.push(a(J[1],J[2]));J[2]=A(J[2],J[1],1,-ea[2]);P.push(z(J[2]));J[2]=y(J[2]);ea[1]/=P[2];ea[2]/=P[2];B=J[1];E=J[2];if(0>a(J[0],[B[1]*E[2]-B[2]*E[1],B[2]*E[0]-B[0]*E[2],B[0]*E[1]-B[1]*E[0]]))for(E=0;3>E;E++)P[E]*=-1,J[E][0]*=-1,J[E][1]*=-1,J[E][2]*=-1;var Y,ma;B=J[0][0]+J[1][1]+J[2][2]+1;return 1E-4<B?(Y=.5/Math.sqrt(B),ma=[(J[2][1]-
J[1][2])*Y,(J[0][2]-J[2][0])*Y,(J[1][0]-J[0][1])*Y,.25/Y]):J[0][0]>J[1][1]&&J[0][0]>J[2][2]?(Y=2*Math.sqrt(1+J[0][0]-J[1][1]-J[2][2]),ma=[.25*Y,(J[0][1]+J[1][0])/Y,(J[0][2]+J[2][0])/Y,(J[2][1]-J[1][2])/Y]):J[1][1]>J[2][2]?(Y=2*Math.sqrt(1+J[1][1]-J[0][0]-J[2][2]),ma=[(J[0][1]+J[1][0])/Y,.25*Y,(J[1][2]+J[2][1])/Y,(J[0][2]-J[2][0])/Y]):(Y=2*Math.sqrt(1+J[2][2]-J[0][0]-J[1][1]),ma=[(J[0][2]+J[2][0])/Y,(J[1][2]+J[2][1])/Y,.25*Y,(J[1][0]-J[0][1])/Y]),[G,P,ea,ma,K]}}();e.dot=a;e.makeMatrixDecomposition=
function(v){return[u(r(v))]};e.transformListToMatrix=r})(h);(function(e){function m(q,r){var u=q.exec(r);if(u)return u=q.ignoreCase?u[0].toLowerCase():u[0],[u,r.substr(u.length)]}function a(q,r){r=r.replace(/^\s*/,"");if(q=q(r))return[q[0],q[1].replace(/^\s*/,"")]}function g(q,r){for(var u=q,v=r;u&&v;)u>v?u%=v:v%=u;return q*r/(u+v)}function l(q,r,u,v,y){for(var z=[],A=[],B=[],G=g(v.length,y.length),E=0;E<G;E++){var K=r(v[E%v.length],y[E%y.length]);if(!K)return;z.push(K[0]);A.push(K[1]);B.push(K[2])}return[z,
A,function(J){J=J.map(function(P,ea){return B[ea](P)}).join(u);return q?q(J):J}]}e.consumeToken=m;e.consumeTrimmed=a;e.consumeRepeated=function(q,r,u){q=a.bind(null,q);for(var v=[];;){var y=q(u);if(!y||(v.push(y[0]),u=y[1],!(y=m(r,u))||""==y[1]))return[v,u];u=y[1]}};e.consumeParenthesised=function(q,r){for(var u=0,v=0;v<r.length&&(!/\s|,/.test(r[v])||0!=u);v++)if("("==r[v])u++;else if(")"==r[v]&&(u--,0==u&&v++,0>=u))break;q=q(r.substr(0,v));return void 0==q?void 0:[q,r.substr(v)]};e.ignore=function(q){return function(r){r=
q(r);return r&&(r[0]=void 0),r}};e.optional=function(q,r){return function(u){return q(u)||[r,u]}};e.consumeList=function(q,r){for(var u=[],v=0;v<q.length;v++){r=e.consumeTrimmed(q[v],r);if(!r||""==r[0])return;void 0!==r[0]&&u.push(r[0]);r=r[1]}if(""==r)return u};e.mergeNestedRepeated=l.bind(null,null);e.mergeWrappedNestedRepeated=l;e.mergeList=function(q,r,u){for(var v=[],y=[],z=[],A=0,B=0;B<u.length;B++)if("function"==typeof u[B]){var G=u[B](q[A],r[A++]);v.push(G[0]);y.push(G[1]);z.push(G[2])}else!function(E){v.push(!1);
y.push(!1);z.push(function(){return u[E]})}(B);return[v,y,function(E){for(var K="",J=0;J<E.length;J++)K+=z[J](E[J]);return K}]}})(h);(function(e){function m(g){var l={inset:!1,lengths:[],color:null};if((g=e.consumeRepeated(function(q){var r=e.consumeToken(/^inset/i,q);return r?(l.inset=!0,r):(r=e.consumeLengthOrPercent(q))?(l.lengths.push(r[0]),r):(r=e.consumeColor(q),r?(l.color=r[0],r):void 0)},/^/,g))&&g[0].length)return[l,g[1]]}var a=function(g,l,q,r){function u(G){return{inset:G,color:[0,0,0,
0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var v=[],y=[],z=0;z<q.length||z<r.length;z++){var A=q[z]||u(r[z].inset),B=r[z]||u(q[z].inset);v.push(A);y.push(B)}return e.mergeNestedRepeated(g,l,v,y)}.bind(null,function(g,l){for(;g.lengths.length<Math.max(g.lengths.length,l.lengths.length);)g.lengths.push({px:0});for(;l.lengths.length<Math.max(g.lengths.length,l.lengths.length);)l.lengths.push({px:0});if(g.inset==l.inset&&!!g.color==!!l.color){for(var q,r=[],u=[[],0],v=[[],0],y=0;y<g.lengths.length;y++){var z=
e.mergeDimensions(g.lengths[y],l.lengths[y],2==y);u[0].push(z[0]);v[0].push(z[1]);r.push(z[2])}g.color&&l.color&&(l=e.mergeColors(g.color,l.color),u[1]=l[0],v[1]=l[1],q=l[2]);return[u,v,function(A){for(var B=g.inset?"inset ":" ",G=0;G<r.length;G++)B+=r[G](A[0][G])+" ";return q&&(B+=q(A[1])),B}]}},", ");e.addPropertiesHandler(function(g){if((g=e.consumeRepeated(m,/^,/,g))&&""==g[1])return g[0]},a,["box-shadow","text-shadow"])})(h);(function(e,m){function a(u){return u.toFixed(3).replace(/0+$/,"").replace(/\.$/,
"")}function g(u,v,y){return Math.min(v,Math.max(u,y))}function l(u){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(u))return Number(u)}function q(u,v){return function(y,z){return[y,z,function(A){return a(g(u,v,A))}]}}function r(u){u=u.trim().split(/\s*[\s,]\s*/);if(0!==u.length){for(var v=[],y=0;y<u.length;y++){var z=l(u[y]);if(void 0===z)return;v.push(z)}return v}}e.clamp=g;e.addPropertiesHandler(r,function(u,v){if(u.length==v.length)return[u,v,function(y){return y.map(a).join(" ")}]},["stroke-dasharray"]);
e.addPropertiesHandler(l,q(0,1/0),["border-image-width","line-height"]);e.addPropertiesHandler(l,q(0,1),["opacity","shape-image-threshold"]);e.addPropertiesHandler(l,function(u,v){if(0!=u)return q(0,1/0)(u,v)},["flex-grow","flex-shrink"]);e.addPropertiesHandler(l,function(u,v){return[u,v,function(y){return Math.round(g(1,1/0,y))}]},["orphans","widows"]);e.addPropertiesHandler(l,function(u,v){return[u,v,Math.round]},["z-index"]);e.parseNumber=l;e.parseNumberList=r;e.mergeNumbers=function(u,v){return[u,
v,a]};e.numberToString=a})(h);(function(e,m){e.addPropertiesHandler(String,function(a,g){if("visible"==a||"visible"==g)return[0,1,function(l){return 0>=l?a:1<=l?g:"visible"}]},["visibility"])})(h);(function(e,m){function a(q){q=q.trim();l.fillStyle="#000";l.fillStyle=q;var r=l.fillStyle;if(l.fillStyle="#fff",l.fillStyle=q,r==l.fillStyle)return l.fillRect(0,0,1,1),q=l.getImageData(0,0,1,1).data,l.clearRect(0,0,1,1),r=q[3]/255,[q[0]*r,q[1]*r,q[2]*r,r]}function g(q,r){return[q,r,function(u){if(u[3])for(var v=
0;3>v;v++)u[v]=Math.round(Math.max(0,Math.min(255,u[v]/u[3])));return u[3]=e.numberToString(e.clamp(0,1,u[3])),"rgba("+u.join(",")+")"}]}m=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");m.width=m.height=1;var l=m.getContext("2d");e.addPropertiesHandler(a,g,"background-color border-bottom-color border-left-color border-right-color border-top-color color fill flood-color lighting-color outline-color stop-color stroke text-decoration-color".split(" "));e.consumeColor=e.consumeParenthesised.bind(null,
a);e.mergeColors=g})(h);(function(e,m){function a(y){function z(){var J=K.exec(y);E=J?J[0]:void 0}function A(){if("("!==E){var J=Number(E);return z(),J}z();J=G();return")"!==E?NaN:(z(),J)}function B(){for(var J=A();"*"===E||"/"===E;){var P=E;z();var ea=A();"*"===P?J*=ea:J/=ea}return J}function G(){for(var J=B();"+"===E||"-"===E;){var P=E;z();var ea=B();"+"===P?J+=ea:J-=ea}return J}var E,K=/([\+\-\w\.]+|[\(\)\*\/])/g;return z(),G()}function g(y,z){if("0"==(z=z.trim().toLowerCase())&&0<="px".search(y))return{px:0};
if(/^[^(]*$|^calc/.test(z)){z=z.replace(/calc\(/g,"(");var A={};z=z.replace(y,function(J){return A[J]=null,"U"+J});y="U("+y.source+")";for(var B=z.replace(/[-+]?(\d*\.)?\d+([Ee][-+]?\d+)?/g,"N").replace(new RegExp("N"+y,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),G=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],E=0;E<G.length;)G[E].test(B)?(B=B.replace(G[E],"$1"),E=0):E++;if("D"==B){for(var K in A){B=a(z.replace(new RegExp("U"+K,"g"),"").replace(new RegExp(y,"g"),"*0"));if(!isFinite(B))return;
A[K]=B}return A}}}function l(y,z){return q(y,z,!0)}function q(y,z,A){var B,G=[];for(B in y)G.push(B);for(B in z)0>G.indexOf(B)&&G.push(B);return y=G.map(function(E){return y[E]||0}),z=G.map(function(E){return z[E]||0}),[y,z,function(E){var K=E.map(function(J,P){return 1==E.length&&A&&(J=Math.max(J,0)),e.numberToString(J)+G[P]}).join(" + ");return 1<E.length?"calc("+K+")":K}]}var r=g.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc/g);m=g.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|%/g);
var u=g.bind(null,/deg|rad|grad|turn/g);e.parseLength=r;e.parseLengthOrPercent=m;e.consumeLengthOrPercent=e.consumeParenthesised.bind(null,m);e.parseAngle=u;e.mergeDimensions=q;r=e.consumeParenthesised.bind(null,r);r=e.consumeRepeated.bind(void 0,r,/^/);var v=e.consumeRepeated.bind(void 0,r,/^,/);e.consumeSizePairList=v;r=e.mergeNestedRepeated.bind(void 0,l," ");u=e.mergeNestedRepeated.bind(void 0,r,",");e.mergeNonNegativeSizePair=r;e.addPropertiesHandler(function(y){if((y=v(y))&&""==y[1])return y[0]},
u,["background-size"]);e.addPropertiesHandler(m,l,"border-bottom-width border-image-width border-left-width border-right-width border-top-width flex-basis font-size height line-height max-height max-width outline-width width".split(" "));e.addPropertiesHandler(m,q,"border-bottom-left-radius border-bottom-right-radius border-top-left-radius border-top-right-radius bottom left letter-spacing margin-bottom margin-left margin-right margin-top min-height min-width outline-offset padding-bottom padding-left padding-right padding-top perspective right shape-margin stroke-dashoffset text-indent top vertical-align word-spacing".split(" "))})(h);
(function(e,m){function a(l){return e.consumeLengthOrPercent(l)||e.consumeToken(/^auto/,l)}function g(l){if((l=e.consumeList([e.ignore(e.consumeToken.bind(null,/^rect/)),e.ignore(e.consumeToken.bind(null,/^\(/)),e.consumeRepeated.bind(null,a,/^,/),e.ignore(e.consumeToken.bind(null,/^\)/))],l))&&4==l[0].length)return l[0]}m=e.mergeWrappedNestedRepeated.bind(null,function(l){return"rect("+l+")"},function(l,q){return"auto"==l||"auto"==q?[!0,!1,function(r){r=r?l:q;if("auto"==r)return"auto";r=e.mergeDimensions(r,
r);return r[2](r[0])}]:e.mergeDimensions(l,q)},", ");e.parseBox=g;e.mergeBoxes=m;e.addPropertiesHandler(g,m,["clip"])})(h);(function(e,m){function a(B){return function(G){var E=0;return B.map(function(K){return K===v?G[E++]:K})}}function g(B){return B}function l(B){if("none"==(B=B.toLowerCase().trim()))return[];for(var G,E=/\s*(\w+)\(([^)]*)\)/g,K=[],J=0;(G=E.exec(B))&&G.index==J;){J=G.index+G[0].length;var P=G[1],ea=A[P];if(!ea)break;G=G[2].split(",");ea=ea[0];if(ea.length<G.length)break;for(var ra=
[],D=0;D<ea.length;D++){var O=G[D];var L=ea[D];if(void 0===(O=O?{A:function(N){return"0"==N.trim()?z:e.parseAngle(N)},N:e.parseNumber,T:e.parseLengthOrPercent,L:e.parseLength}[L.toUpperCase()](O):{a:z,n:ra[0],t:y}[L]))return;ra.push(O)}if(K.push({t:P,d:ra}),E.lastIndex==B.length)return K}}function q(B){return B.toFixed(6).replace(".000000","")}function r(B,G){if(B.decompositionPair!==G){B.decompositionPair=G;var E=e.makeMatrixDecomposition(B)}if(G.decompositionPair!==B){G.decompositionPair=B;var K=
e.makeMatrixDecomposition(G)}return null==E[0]||null==K[0]?[[!1],[!0],function(J){return J?G[0].d:B[0].d}]:(E[0].push(0),K[0].push(1),[E,K,function(J){var P=e.quat(E[0][3],K[0][3],J[5]);return e.composeMatrix(J[0],J[1],J[2],P,J[4]).map(q).join(",")}])}function u(B){return B.replace(/(x|y|z|3d)?$/,"3d")}var v=null,y={px:0},z={deg:0},A={matrix:["NNNNNN",[v,v,0,0,v,v,0,0,0,0,1,0,v,v,0,1],g],matrix3d:["NNNNNNNNNNNNNNNN",g],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],
scale:["Nn",a([v,v,1]),g],scalex:["N",a([v,1,1]),a([v,1])],scaley:["N",a([1,v,1]),a([1,v])],scalez:["N",a([1,1,v])],scale3d:["NNN",g],skew:["Aa",null,g],skewx:["A",null,a([v,z])],skewy:["A",null,a([z,v])],translate:["Tt",a([v,v,y]),g],translatex:["T",a([v,y,y]),a([v,y])],translatey:["T",a([y,v,y]),a([y,v])],translatez:["L",a([y,y,v])],translate3d:["TTL",g]};e.addPropertiesHandler(l,function(B,G){var E=e.makeMatrixDecomposition&&!0,K=!1;if(!B.length||!G.length){B.length||(K=!0,B=G,G=[]);for(var J=
0;J<B.length;J++){var P=B[J].t,ea=B[J].d,ra="scale"==P.substr(0,5)?1:0;G.push({t:P,d:ea.map(function(X){if("number"==typeof X)return ra;var V={},ha;for(ha in X)V[ha]=ra;return V})})}}ea=[];var D=[],O=[];if(B.length!=G.length){if(!E)return;var L=r(B,G);ea=[L[0]];D=[L[1]];O=[["matrix",[L[2]]]]}else for(J=0;J<B.length;J++){P=B[J].t;var N=G[J].t,aa=B[J].d,Y=G[J].d;L=A[P];var ma=A[N];if("perspective"==P&&"perspective"==N||!("matrix"!=P&&"matrix3d"!=P||"matrix"!=N&&"matrix3d"!=N)){if(!E)return;L=r([B[J]],
[G[J]]);ea.push(L[0]);D.push(L[1]);O.push(["matrix",[L[2]]])}else{if(P!=N)if(L[2]&&ma[2]&&P.replace(/[xy]/,"")==N.replace(/[xy]/,""))P=P.replace(/[xy]/,""),aa=L[2](aa),Y=ma[2](Y);else{if(!L[1]||!ma[1]||u(P)!=u(N)){if(!E)return;L=r(B,G);ea=[L[0]];D=[L[1]];O=[["matrix",[L[2]]]];break}P=u(P);aa=L[1](aa);Y=ma[1](Y)}ma=[];N=[];for(var bb=[],Qa=0;Qa<aa.length;Qa++)L=("number"==typeof aa[Qa]?e.mergeNumbers:e.mergeDimensions)(aa[Qa],Y[Qa]),ma[Qa]=L[0],N[Qa]=L[1],bb.push(L[2]);ea.push(ma);D.push(N);O.push([P,
bb])}}K&&(B=ea,ea=D,D=B);return[ea,D,function(X){return X.map(function(V,ha){V=V.map(function(xa,yb){return O[ha][1][yb](xa)}).join(",");return"matrix"==O[ha][0]&&16==V.split(",").length&&(O[ha][0]="matrix3d"),O[ha][0]+"("+V+")"}).join(" ")}]},["transform"]);e.transformToSvgMatrix=function(B){B=e.transformListToMatrix(l(B));return"matrix("+q(B[0])+" "+q(B[1])+" "+q(B[4])+" "+q(B[5])+" "+q(B[12])+" "+q(B[13])+")"}})(h);(function(e){function m(a){return a=100*Math.round(a/100),a=e.clamp(100,900,a),
400===a?"normal":700===a?"bold":String(a)}e.addPropertiesHandler(function(a){a=Number(a);if(!(isNaN(a)||100>a||900<a||0!=a%100))return a},function(a,g){return[a,g,m]},["font-weight"])})(h);(function(e){function m(r){return e.consumeToken(/^(left|center|right|top|bottom)\b/i,r)||e.consumeLengthOrPercent(r)}function a(r,u){if((u=e.consumeRepeated(m,/^/,u))&&""==u[1]&&(u=u[0],u[0]=u[0]||"center",u[1]=u[1]||"center",3==r&&(u[2]=u[2]||{px:0}),u.length==r)){if(/top|bottom/.test(u[0])||/left|right/.test(u[1]))r=
u[0],u[0]=u[1],u[1]=r;if(/left|right|center|Object/.test(u[0])&&/top|bottom|center|Object/.test(u[1]))return u.map(function(v){return"object"==typeof v?v:l[v]})}}function g(r){if(r=e.consumeRepeated(m,/^/,r)){for(var u=r[0],v=[{"%":50},{"%":50}],y=0,z=!1,A=0;A<u.length;A++){var B=u[A];if("string"==typeof B)z=/bottom|right/.test(B),y={left:0,right:0,center:y,top:1,bottom:1}[B],v[y]=l[B],"center"==B&&y++;else{if(z){z=void 0;var G={};for(z in B)G[z]=-B[z];B=G;B["%"]=(B["%"]||0)+100}v[y]=B;y++;z=!1}}return[v,
r[1]]}}var l={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}},q=e.mergeNestedRepeated.bind(null,e.mergeDimensions," ");e.addPropertiesHandler(a.bind(null,3),q,["transform-origin"]);e.addPropertiesHandler(a.bind(null,2),q,["perspective-origin"]);e.consumePosition=g;e.mergeOffsetList=q;q=e.mergeNestedRepeated.bind(null,q,", ");e.addPropertiesHandler(function(r){if((r=e.consumeRepeated(g,/^,/,r))&&""==r[1])return r[0]},q,["background-position","object-position"])})(h);(function(e){var m=
e.consumeParenthesised.bind(null,e.parseLengthOrPercent),a=e.consumeRepeated.bind(void 0,m,/^/),g=e.mergeNestedRepeated.bind(void 0,e.mergeDimensions," "),l=e.mergeNestedRepeated.bind(void 0,g,",");e.addPropertiesHandler(function(q){var r=e.consumeToken(/^circle/,q);return r&&r[0]?["circle"].concat(e.consumeList([e.ignore(e.consumeToken.bind(void 0,/^\(/)),m,e.ignore(e.consumeToken.bind(void 0,/^at/)),e.consumePosition,e.ignore(e.consumeToken.bind(void 0,/^\)/))],r[1])):(r=e.consumeToken(/^ellipse/,
q))&&r[0]?["ellipse"].concat(e.consumeList([e.ignore(e.consumeToken.bind(void 0,/^\(/)),a,e.ignore(e.consumeToken.bind(void 0,/^at/)),e.consumePosition,e.ignore(e.consumeToken.bind(void 0,/^\)/))],r[1])):(q=e.consumeToken(/^polygon/,q))&&q[0]?["polygon"].concat(e.consumeList([e.ignore(e.consumeToken.bind(void 0,/^\(/)),e.optional(e.consumeToken.bind(void 0,/^nonzero\s*,|^evenodd\s*,/),"nonzero,"),e.consumeSizePairList,e.ignore(e.consumeToken.bind(void 0,/^\)/))],q[1])):void 0},function(q,r){if(q[0]===
r[0])return"circle"==q[0]?e.mergeList(q.slice(1),r.slice(1),["circle(",e.mergeDimensions," at ",e.mergeOffsetList,")"]):"ellipse"==q[0]?e.mergeList(q.slice(1),r.slice(1),["ellipse(",e.mergeNonNegativeSizePair," at ",e.mergeOffsetList,")"]):"polygon"==q[0]&&q[1]==r[1]?e.mergeList(q.slice(2),r.slice(2),["polygon(",q[1],l,")"]):void 0},["shape-outside"])})(h);(function(e,m){function a(q,r){r.concat([q]).forEach(function(u){u in document.documentElement.style&&(g[q]=u);l[u]=q})}var g={},l={};a("transform",
["webkitTransform","msTransform"]);a("transformOrigin",["webkitTransformOrigin"]);a("perspective",["webkitPerspective"]);a("perspectiveOrigin",["webkitPerspectiveOrigin"]);e.propertyName=function(q){return g[q]||q};e.unprefixedPropertyName=function(q){return l[q]||q}})(h)})();(function(){if(void 0===document.createElement("div").animate([]).oncancel){var n=window.performance&&performance.now?function(){return performance.now()}:function(){return Date.now()};var b=function(m,a,g){(this||jc).target=
m;(this||jc).currentTime=a;(this||jc).timelineTime=g;(this||jc).type="cancel";(this||jc).bubbles=!1;(this||jc).cancelable=!1;(this||jc).currentTarget=m;(this||jc).defaultPrevented=!1;(this||jc).eventPhase=Event.AT_TARGET;(this||jc).timeStamp=Date.now()},e=window.Element.prototype.animate;window.Element.prototype.animate=function(m,a){m=e.call(this||jc,m,a);m._cancelHandlers=[];m.oncancel=null;var g=m.cancel;m.cancel=function(){g.call(this||jc);var r=new b(this||jc,null,n()),u=(this||jc)._cancelHandlers.concat((this||
jc).oncancel?[(this||jc).oncancel]:[]);setTimeout(function(){u.forEach(function(v){v.call(r.target,r)})},0)};var l=m.addEventListener;m.addEventListener=function(r,u){"function"==typeof u&&"cancel"==r?(this||jc)._cancelHandlers.push(u):l.call(this||jc,r,u)};var q=m.removeEventListener;return m.removeEventListener=function(r,u){"cancel"==r?(r=(this||jc)._cancelHandlers.indexOf(u),0<=r&&(this||jc)._cancelHandlers.splice(r,1)):q.call(this||jc,r,u)},m}}})();(function(n){var b=document.documentElement,
e=null,m=!1;try{var a="0"==getComputedStyle(b).getPropertyValue("opacity")?"1":"0";e=b.animate({opacity:[a,a]},{duration:1});e.currentTime=0;m=getComputedStyle(b).getPropertyValue("opacity")==a}catch(l){}finally{e&&e.cancel()}if(!m){var g=window.Element.prototype.animate;window.Element.prototype.animate=function(l,q){return window.Symbol&&Symbol.iterator&&Array.prototype.from&&l[Symbol.iterator]&&(l=Array.from(l)),Array.isArray(l)||null===l||(l=n.convertToArrayForm(l)),g.call(this||jc,l,q)}}})(d)}();
var hf=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js");hf.convertToSvgEasing=function(d){for(var h in hf.easings)if(hf.easings[h]===d){if(h.includes("inOut"))return h.replace("inOut","").toLowerCase()+"InOut";if(h.includes("out"))return h.replace("out","").toLowerCase()+"Out";if(h.includes("in"))return h.replace("in","").toLowerCase()+"In"}};hf.stringToEasing=is;hf.obj=Pf;hf.promise=yg;hf.fun=nl;hf.num=Bk;hf.properties=$m;hf.arr=vf;hf.string=vh;hf.Color=Wf;hf.styleProps=
hx;hf.addPathAttributes=jx;hf.addSvgAttributes=ix;hf.flubber=AO;hf.Bezier=Xea;hf.ShadowObject=bq;var cq=sa("at",{inQuad:"cubic-bezier(0.550,  0.085, 0.680, 0.530)",inCubic:"cubic-bezier(0.550,  0.055, 0.675, 0.190)",inQuart:"cubic-bezier(0.895,  0.030, 0.685, 0.220)",inQuint:"cubic-bezier(0.755,  0.050, 0.855, 0.060)",inSine:"cubic-bezier(0.470,  0.000, 0.745, 0.715)",inExpo:"cubic-bezier(0.950,  0.050, 0.795, 0.035)",inCirc:"cubic-bezier(0.600,  0.040, 0.980, 0.335)",inBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",
outQuad:"cubic-bezier(0.250,  0.460, 0.450, 0.940)",outCubic:"cubic-bezier(0.215,  0.610, 0.355, 1.000)",outQuart:"cubic-bezier(0.165,  0.840, 0.440, 1.000)",outQuint:"cubic-bezier(0.230,  1.000, 0.320, 1.000)",outSine:"cubic-bezier(0.390,  0.575, 0.565, 1.000)",outExpo:"cubic-bezier(0.190,  1.000, 0.220, 1.000)",outCirc:"cubic-bezier(0.075,  0.820, 0.165, 1.000)",outBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",inOutQuad:"cubic-bezier(0.455,  0.030, 0.515, 0.955)",inOutCubic:"cubic-bezier(0.645,  0.045, 0.355, 1.000)",
inOutQuart:"cubic-bezier(0.770,  0.000, 0.175, 1.000)",inOutQuint:"cubic-bezier(0.860,  0.000, 0.070, 1.000)",inOutSine:"cubic-bezier(0.445,  0.050, 0.550, 0.950)",inOutExpo:"cubic-bezier(1.000,  0.000, 0.000, 1.000)",inOutCirc:"cubic-bezier(0.785,  0.135, 0.150, 0.860)",inOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",linear:"cubic-bezier(0.5, 0.5, 0.5, 0.5)"});hf.easings=cq;hf.easings=cq;hf.easings=cq;hf.stringToEasing=is;hf.stringToEasing=is;var RH=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),
n=h.hasOwnProperty("AnimationQueue")&&"function"===typeof h.AnimationQueue?h.AnimationQueue:h.AnimationQueue=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.morph=b;this.animations=[]}},{key:"maskedProps",value:function(b){return 0<this.animations.length?hf.obj.merge(this.animations.map(function(e){return e.getAnimationProps(b)[0]})):{}}},
{key:"animationsActive",get:function(){return!0}},{key:"registerAnimation",value:function(b){var e=this,m=new hf.PropertyAnimation(this,this.morph,b);this.morph.makeDirty();return this.morph.withMetaDo({animation:m},function(){var a=m.affectsMorph&&e.animations.find(function(l){return l.equals(m)});if(!a){var g;if(g=e.animations.find(function(l){return l.canMerge(m)}))return g.mergeWith(m),g;if(m.affectsMorph)return m.assignProps(),e.animations.push(m),m}return a})}},{key:"startAnimationsFor",value:function(b){for(var e=
0;e<this.animations.length;e++)this.animations[e].start(b)}},{key:"startSvgAnimationsFor",value:function(b,e){this.animations.forEach(function(m){return m.startSvg(b,e)})}},{key:"removeAnimation",value:function(b){hf.arr.remove(this.animations,b)}}],[{key:"className",get:function(){return"AnimationQueue"}}],h,{pathInPackage:function(){return"rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2518,end:3809})}(void 0);hf.AnimationQueue=RH;hf.AnimationQueue=RH;hf.AnimationQueue=RH;var DO=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),n=h.hasOwnProperty("PropertyAnimation")&&"function"===typeof h.PropertyAnimation?h.PropertyAnimation:h.PropertyAnimation=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m){var a=this;this.queue=b;this.morph=e;if(e.isPath&&"fill"in m){var g=e.fill||hf.Color.transparent,l=m.fill;m.customTween=hf.fun.compose(function(y){e.fill=g.interpolate(y,l);return y},m.customTween||function(y){});delete m.fill;e.fill=g}if("dropShadow"in m){var q=e.dropShadow||new hf.ShadowObject({blur:0,distance:0,spread:0}),r=m.dropShadow;m.customTween=hf.fun.compose(function(y){e.dropShadow=q.interpolate(y,r||new hf.ShadowObject({blur:0,
distance:0,spread:0}));1==y&&(e.dropShadow=r);return y},m.customTween||function(y){});delete m.dropShadow;e.dropShadow=q}if("visible"in m){var u=void 0===b.originalOpacity?e.opacity:b.originalOpacity;b.originalOpacity=u;var v=m.visible;m.customTween=hf.fun.compose(function(y){if(a._otherVisibleTransformationInProgress)return y;0==y&&1==v&&(e.visible=!0);e.opacity=v?hf.num.interpolate(y,0,u):hf.num.interpolate(y,u,0);1==y&&(e.visible=v,e.opacity=u,delete b.originalOpacity);return y},m.customTween||
function(y){});this.queue.animations.forEach(function(y){return y._otherVisibleTransformationInProgress=!0});delete m.visible}this.config=this.convertBounds(m);this.needsAnimation={svg:e.isSvgMorph,path:e.isPath};this.capturedProperties=hf.obj.select(this.morph,this.propsToCapture)}},{key:"propsToCapture",get:function(){return["fill","origin"]}},{key:"asPromise",value:function(){var b=this;return this._promise||(this._promise=new Promise(function(e,m){b.resolveCallback=function(){b.onFinish(b);b.subAnimations?
b.subAnimations.then(e):e(b.morph)}}))}},{key:"finish",value:function(b){var e=this;this.config.scale&&this.morph.whenRendered().then(function(){return e.morph.withAllSubmorphsDo(function(m){return m.isText&&m.invalidateTextLayout(!0,!0)})});this.needsAnimation[b]=!1;hf.arr.any(hf.obj.values(this.needsAnimation),Boolean)||(this.queue.removeAnimation(this),this.resolveCallback?this.resolveCallback():this.onFinish())}},{key:"convertBounds",value:function(b){var e=b.bounds,m=b.origin,a=b.rotation,g=
b.scale;m=m||this.morph.origin;a=a||this.morph.rotation;g=g||this.morph.scale;return e?Object.assign({},hf.obj.dissoc(b,["bounds"]),{origin:m,rotation:a,scale:g,position:e.topLeft().addPt(m),extent:e.extent()}):b}},{key:"equals",value:function(b){return!this.config.customTween&&!b.config.customTweem&&hf.obj.equals(this.animatedProps,b.animatedProps)}},{key:"canMerge",value:function(b){return this.easing==b.easing&&this.duration==b.duration}},{key:"mergeWith",value:function(b){var e=this.config.customTween;
Object.assign(this.morph,b.animatedProps);Object.assign(this.config,b.config);this.config.customTween=function(m){e&&e(m);b.config.customTween&&b.config.customTween(m);return m};this.afterProps=this.gatherAnimationProps()}},{key:"affectsMorph",get:function(){var b=this;return!!this.config.customTween||hf.properties.any(this.animatedProps,function(e,m){return!hf.obj.equals(e[m],b.morph[m])})}},{key:"animatedProps",get:function(){return hf.obj.dissoc(this.config,["customTween","easing","onFinish","duration"])}},
{key:"easing",get:function(){return this.config.easing||hf.easings.inOutQuad}},{key:"onFinish",get:function(){return this.config.onFinish||function(){}}},{key:"setonFinish",value:function(b){this.config.onFinish=b}},{key:"duration",get:function(){return this.config.duration||1E3}},{key:"getChangedProps",value:function(b,e){var m=[],a;for(a in b)hf.obj.equals(e[a],b[a])&&m.push(a);return[hf.obj.dissoc(b,m),hf.obj.dissoc(e,m)]}},{key:"getAnimationProps",value:function(b){var e=$jscomp.makeIterator(this.getChangedProps(this.beforeProps[b],
this.afterProps[b])),m=e.next().value;e=e.next().value;var a=this.capturedProperties.fill,g=this.config.fill;this.morph.isPolygon&&"css"==b&&(a=g=!1,delete m.background,delete e.background,delete m.backgroundImage,delete e.backgroundImage);"none"==m.filter&&e.boxShadow&&(delete m.filter,m.boxShadow="none");"none"==e.filter&&m.boxShadow&&(delete e.filter,e.boxShadow="none");a&&g&&(a.isGradient||g.isGradient)&&(this.tweenGradient=this.interpolate("gradient",a,g));b=$jscomp.makeIterator(hf.arr.union(hf.obj.keys(m),
hf.obj.keys(e)));for(a=b.next();!a.done;a=b.next())a=a.value,a in m||(m[a]=e[a]),a in e||(e[a]=m[a]);return[hf.obj.isEmpty(m)?!1:m,hf.obj.isEmpty(e)?!1:e]}},{key:"gatherAnimationProps",value:function(){var b=this.morph,e=b.isSvgMorph,m=b.isPath,a=b.isPolygon,g={};g.css=hf.styleProps(this.morph);e&&(g.svg=hf.addSvgAttributes(b,{}));m&&(g.path=hf.addPathAttributes(b,{}));a&&(g.polygon=hf.addPathAttributes(b,{}));return g}},{key:"assignProps",value:function(){var b=this.morph.styleClasses;this.beforeProps=
this.gatherAnimationProps();Object.assign(this.morph,this.animatedProps);this.afterProps=this.gatherAnimationProps();this.config.styleClasses&&(this.morph._animatedStyleClasses={removed:hf.arr.withoutAll(b,this.morph.styleClasses),added:hf.arr.withoutAll(this.morph.styleClasses,b),animation:this})}},{key:"interpolate",value:function(b,e,m){var a=this;switch(b){case "scrollTop":case "scrollLeft":return function(g){return hf.num.interpolate(g,e,m)};case "d":return hf.flubber.interpolate(e,m);case "stroke-width":return function(g){return hf.num.interpolate(g,
e,m)};case "stroke":return function(g){return hf.Color.fromString(e).interpolate(g,hf.Color.fromString(m),a.morph.bounds())};case "gradient":return function(g){return e.interpolate(g,m,a.morph.bounds())};case "fill":return e=hf.Color.fromString(e),m=hf.Color.fromString(m),function(g){return e.interpolate(g,m)}}}},{key:"startSvg",value:function(b,e){var m=this;if(this.needsAnimation[e]){this.needsAnimation[e]=!1;var a=$jscomp.makeIterator(this.getAnimationProps(e)),g=a.next().value;a=a.next().value;
var l={},q=hf.stringToEasing(this.easing),r;for(r in g)l[r]=this.interpolate(r,g[r],a[r]);var u,v=function(y){u||(u=y);y-=u;if(1<y/m.duration)return m.finish(e);for(var z in l)l[z]&&b.setAttribute(z,l[z](q(y/m.duration)));requestAnimationFrame(v)};requestAnimationFrame(v)}}},{key:"start",value:function(b){if(!this.active)try{this.active=!0;var e=$jscomp.makeIterator(this.getAnimationProps("css")),m=e.next().value,a=e.next().value;b&&this.tween(b,m,a);if(this.config.origin){var g=this.capturedProperties.origin,
l=this.config.origin,q=b.childNodes[0];q&&this.tween(q,q.style.top?{left:g.x+"px",top:g.y+"px"}:{transform:"translate3d("+g.x+"px, "+g.y+"px, 0px)"},q.style.top?{left:g.x+"px",top:g.y+"px"}:{transform:"translate3d("+l.x+"px, "+l.y+"px, 0px)"})}}catch(r){this.active=!1}}},{key:"tween",value:function(b,e,m,a){var g=this;a=void 0===a?!0:a;var l=this.animatedProps.scroll,q=this.config.customTween,r=!1,u=function(){a&&(g.finish("css"),g.morph.makeDirty())};if(q){var v,y=hf.stringToEasing(this.easing),
z=function(Y){v||(v=Y);var ma=Math.min(1,(Y-v)/g.duration);g.morph.dontRecordChangesWhile(function(){return q(y(ma))});if(1<=ma)return g.finish("css");requestAnimationFrame(z)};requestAnimationFrame(z);r=!0}if(l){var A,B=this.morph.env.eventDispatcher.eventState;r=hf.promise.deferred();var G=r.promise,E=r.resolve,K=this.interpolate("scrollLeft",b.scrollLeft,l.x),J=this.interpolate("scrollTop",b.scrollTop,l.y),P=hf.stringToEasing(this.easing),ea=function(Y){A||(A=Y);Y-=A;var ma=Math.min(1,Y/g.duration);
b.scrollTop=J(P(ma));b.scrollLeft=K(P(ma));if(1<=Y/g.duration)return B.scroll.interactiveScrollInProgress=null,E(),g.finish("css");requestAnimationFrame(ea)};G.debounce=function(){};requestAnimationFrame(ea);r=!0}if(this.tweenGradient&&!this.morph.isPolygon){var ra,D=hf.stringToEasing(this.easing),O=function(Y){ra||(ra=Y);Y-=ra;if(1<=Y/g.duration)return g.finish("css");b.style.setProperty("background-image",g.tweenGradient(D(Y/g.duration)));requestAnimationFrame(O)};delete e.backgroundImage;delete m.backgroundImage;
delete e.background;delete m.background;requestAnimationFrame(O);r=!0}else this.tweenGradient&&(r=!0);if(b&&e&&m){l={};G={};for(var L in e)l[hf.string.camelize(L)]=e[L];for(var N in m)G[hf.string.camelize(N)]=m[N];try{var aa=b.animate([l,G],{duration:this.duration,easing:this.easing,fill:"forwards",composite:"replace"});aa.onfinish=function(){u();setTimeout(function(){return aa.cancel()},200)};r=!0}catch(Y){r=!1}}r||u()}}],[{key:"className",get:function(){return"PropertyAnimation"}}],h,{pathInPackage:function(){return"rendering/animations.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3818,end:17317})}(void 0);hf.PropertyAnimation=DO;hf.PropertyAnimation=DO;hf.PropertyAnimation=DO;var Ig=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js");Ig.cumulativeOffset=Bv;Ig.createIFrame=function(d,h,n){h=void 0===h?"about:blank":h;n=void 0===n?new Ig.Rectangle(0,
0,700,700):n;return new Promise(function(b,e){if(!d)throw Error("Need parent element!");var m=document.createElement("iframe");m.style.position="absolute";m.style.top=n.top()+"px";m.style.left=n.left()+"px";m.style.width=n.width+"px";m.style.height=n.height+"px";m.src=h;var a=!1;m.onload=function(g){a=!0;m.onload=null;b(m)};Ig.promise.waitFor(1E3,function(){return!!a}).catch(function(g){return e(Error("iframe load timeout"))});d.appendChild(m)})};Ig.requestAnimationFramePolyfill=function(d){for(var h=
0,n=["ms","moz","webkit","o"],b=0;b<n.length&&!d.requestAnimationFrame;++b)d.requestAnimationFrame=d[n[b]+"RequestAnimationFrame"],d.cancelAnimationFrame=d[n[b]+"CancelAnimationFrame"]||d[n[b]+"CancelRequestAnimationFrame"];d.requestAnimationFrame||(d.requestAnimationFrame=function(e,m){var a=Date.now(),g=Math.max(0,16-(a-h));m=d.setTimeout(function(){e(a+g)},g);h=a+g;return m});d.cancelAnimationFrame||(d.cancelAnimationFrame=function(e){clearTimeout(e)})};Ig.createDOMEnvironment_browser=function(){var d;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return 1==h.nextAddress?(d=Ig.IFramedDomEnvironment,h.yield(Ig.createIFrame(document.body),2)):h.return(new d(h.yieldResult))})};Ig.createDOMEnvironment_node=function(){System.decanonicalize("lively.morphic/").replace(/file:\/\//,"");var d=System._nodeRequire("jsdom"),h=d.createVirtualConsole().sendTo(console);return new Promise(function(n,b){d.env("<div></div>",["https://code.jquery.com/pep/0.4.1/pep.js"],{virtualConsole:h},function(e,
m){return e?b(e):n(new Ig.DomEnvironment(m,m.document,function(){return m.close()}))})})};Ig.createDOMEnvironment=rz;Ig.defaultDOMEnv=Oi;Ig.setCSSDef=function(d,h,n){Ig.arr.from(d.childNodes).forEach(function(b){return d.removeChild(b)});h=n.createTextNode(h);d.styleSheet?d.styleSheet.cssText=h.nodeValue:d.appendChild(h);return d};Ig.addCSSDef=function(d,h,n){var b=n.createElement("style");b.type="text/css";d&&b.setAttribute("id",d);Ig.setCSSDef(b,h,n);n.head.appendChild(b);return b};Ig.addOrChangeCSSDeclaration=
ne;Ig.addOrChangeLinkedCSS=js;Ig.promise=yg;Ig.obj=Pf;Ig.arr=vf;Ig.Rectangle=ee;Ig.cumulativeOffset=Bv;Ig.cumulativeOffset=Bv;Ig.createDOMEnvironment=rz;Ig.createDOMEnvironment=rz;(function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),n=h.hasOwnProperty("DomEnvironment")&&"function"===typeof h.DomEnvironment?h.DomEnvironment:h.DomEnvironment=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m){Ig.requestAnimationFramePolyfill(b);this.window=b;this.document=e;this.destroyFn=m}},{key:"destroy",value:function(){"function"===typeof this.destroyFn&&this.destroyFn()}}],[{key:"className",get:function(){return"DomEnvironment"}}],h,{pathInPackage:function(){return"rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3032,end:3326})})(void 0);(function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),n=h.hasOwnProperty("IFramedDomEnvironment")&&"function"===typeof h.IFramedDomEnvironment?h.IFramedDomEnvironment:h.IFramedDomEnvironment=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),
value:function(b){Sb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b.contentWindow,b.contentWindow.document,function(){b.contentWindow&&b.contentWindow.close();b.parentNode&&b.parentNode.removeChild(b)});this.iframe=b}}],[{key:"className",get:function(){return"IFramedDomEnvironment"}}],h,{pathInPackage:function(){return"rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3328,end:3672})})(Ig.DomEnvironment);Ig._defaultEnv=Ig._defaultEnv||void 0;Ig.defaultDOMEnv=Oi;Ig.defaultDOMEnv=Oi;Ig.addOrChangeCSSDeclaration=ne;Ig.addOrChangeCSSDeclaration=ne;Ig.addOrChangeLinkedCSS=js;Ig.addOrChangeLinkedCSS=js;var SH=function(){return function(d){d=void 0===d?window.document:d;return function(h,n,b){var e=n||void 0;"undefined"===typeof b&&(b=n,e=void 0);var m=h.split(".");if(1<m.length)for(h=m.shift(),
n=0;n<m.length;n++){var a=m[n],g;-1<(g=a.indexOf("#"))&&(a.slice(g+1),a.slice(0,g))}n=h.split("#");1<n.length&&(h=n[0]);h=d.createElement(h);if(e){for(var l in e)"style"!==l&&"dataset"!==l&&"attributes"!==l&&(h[l]=e[l]);if(l=e.style)for(var q in l)h.style[q]=l[q];if(q=e.dataset)if(h.dataset)for(var r in q)h.dataset[r]=q[r];else for(r in q)h.setAttribute("data-"+r,q[r]);if(e=e.attributes)for(var u in e)e[u]&&Ig.obj.isBoolean(e[u])?h.toggleAttribute(u):h.setAttribute(u,e[u])}b||(b="");if("string"===
typeof b)h.appendChild(d.createTextNode(b));else if(Array.isArray(b))for(n=0;n<b.length;n++)u=b[n],h.appendChild("string"===typeof u?d.createTextNode(u):u);else h.appendChild("string"===typeof b?d.createTextNode(b):b);return h}}}();Ig.hyperscriptFnForDocument=SH;Ig.hyperscriptFnForDocument=SH;Ig.hyperscriptFnForDocument=SH;var of=lively.FreezerRuntime.recorderFor("lively.resources/src/helpers.js");of.applyExclude=Ed;of.parseQuery=On;of.stringifyQuery=au;of.withRelativePartsResolved=nj;of._relativePathBetween_checkPathes=
function(d,h){d.startsWith("/")&&(d=d.slice(1));h.startsWith("/")&&(h=h.slice(1));d=d.split("/");h=h.split("/");for(var n=0;n<h.length&&d[n]&&d[n]==h[n];n++);return"../".repeat(Math.max(0,h.length-n-1))+d.splice(n,d.length).join("/")};of.relativePathBetween=bu;of.join=Fc;of.parent=lx;of.parents=W;of.resource=p;of.createFiles=t;of.registerExtension=w;of.unregisterExtension=x;of.applyExclude=Ed;of.applyExclude=Ed;of.parseQuery=On;of.parseQuery=On;of.stringifyQuery=au;of.stringifyQuery=au;of.slashEndRe=
/\/+$/;of.slashStartRe=/^\/+/;of.protocolRe=/^[a-z0-9-_\.]+:/;of.urlRe=/^([^:\/]+):\/\/([^\/]*)(.*)/;of.slashslashRe=/^\/\/[^\/]+/;of.pathDotRe=/\/\.\//g;of.pathDoubleDotRe=/\/[^\/]+\/\.\./;of.pathDoubleSlashRe=/(^|[^:])[\/]+/g;of.withRelativePartsResolved=nj;of.withRelativePartsResolved=nj;of.relativePathBetween=bu;of.relativePathBetween=bu;of.join=Fc;of.join=Fc;of.parent=lx;of.parent=lx;of.parents=W;of.parents=W;var jy=[];of.extensions=jy;of.extensions=jy;of.extensions=jy;of.resource=p;of.resource=
p;of.createFiles=t;of.createFiles=t;of.registerExtension=w;of.registerExtension=w;of.unregisterExtension=x;of.unregisterExtension=x;var TH=/^file:\/\/\/[a-z]:\//i;of.windowsURLPrefixRe=TH;of.windowsURLPrefixRe=TH;of.windowsURLPrefixRe=TH;var UH=/^[a-z]:\//i;of.windowsPathPrefixRe=UH;of.windowsPathPrefixRe=UH;of.windowsPathPrefixRe=UH;var VH=/^[a-z]:\/$/i;of.windowsRootPathRe=VH;of.windowsRootPathRe=VH;of.windowsRootPathRe=VH;var Bi=lively.FreezerRuntime.recorderFor("lively.resources/src/resource.js");
Bi.nyi=function(d,h){throw Error(h+" for "+d.constructor.name+" not yet implemented");};Bi.resource=p;Bi.parseQuery=On;Bi.withRelativePartsResolved=nj;Bi.relativePathBetween=bu;Bi.windowsPathPrefixRe=UH;Bi.stringifyQuery=au;Bi.slashEndRe=/\/+$/;Bi.slashStartRe=/^\/+/;Bi.protocolRe=/^[a-z0-9-_\.]+:/;Bi.slashslashRe=/^\/\/[^\/]+/;var jg=function(d,h){if(!d)throw Error("Cannot create resource without url");this.url=String(d);this.binary=!1;this.linkCount=this._isLink=this._isDirectory=this.mode=this.group=
this.user=this.contentType=this.type=this.size=this.etag=this.created=this.lastModified=void 0};jg.fromProps=function(d){d=void 0===d?{}:d;return(new this(d.url)).assignProperties(d)};jg.prototype.equals=function(d){if(!d||this.constructor!==d.constructor)return!1;var h=this.url;d=d.url;"/"===h[h.length-1]&&(h=h.slice(0,-1));"/"===d[d.length-1]&&(d=d.slice(0,-1));return h===d};jg.prototype.toString=function(){return this.constructor.name+'("'+this.url+'")'};jg.prototype.newResource=function(d){return Bi.resource(d,
this)};jg.prototype.path=function(){var d=this.url.replace(Bi.protocolRe,"").replace(Bi.slashslashRe,"");return""===d?"/":d};jg.prototype.pathWithoutQuery=function(){return this.path().split("?")[0]};jg.prototype.name=function(){var d=this.path(),h=d.lastIndexOf("?");-1<h&&(d=d.slice(0,h));d.endsWith("/")&&(d=d.slice(0,-1));d=d.split("/");return decodeURIComponent(d[d.length-1])};jg.prototype.ext=function(){var d=this.url;if(d.endsWith("/"))return"";d=$jscomp.makeIterator(d.match(/\.([^\/\.]+$)/)||
["",""]);d.next();return d.next().value.toLowerCase()};jg.prototype.nameWithoutExt=function(){var d=this.name(),h=d.lastIndexOf(".");0<h&&(d=d.slice(0,h));return d};jg.prototype.scheme=function(){return this.url.split(":")[0]};jg.prototype.host=function(){var d=this.url.indexOf("://");if(-1===d)return null;d=this.url.slice(d+3);var h=d.indexOf("/");return d.slice(0,-1<h?h:d.length)};jg.prototype.schemeAndHost=function(){return this.isRoot()?this.asFile().url:this.url.slice(0,this.url.length-this.path().length)};
jg.prototype.parent=function(){return this.isRoot()?null:this.newResource(this.url.split("?")[0].replace(Bi.slashEndRe,"").split("/").slice(0,-1).join("/")+"/")};jg.prototype.parents=function(){for(var d=[],h=this.parent();h;)d.unshift(h),h=h.parent();return d};jg.prototype.isParentOf=function(d){var h=this;return d.schemeAndHost()===this.schemeAndHost()&&d.parents().some(function(n){return n.equals(h)})};jg.prototype.query=function(){return Bi.parseQuery(this.url)};jg.prototype.withQuery=function(d){var h=
Object.assign({},this.query(),{},d);d=$jscomp.makeIterator(this.url.split("?")).next().value;h=Bi.stringifyQuery(h);return this.newResource(d+"?"+h)};jg.prototype.commonDirectory=function(d){if(d.schemeAndHost()!==this.schemeAndHost())return null;if(this.isDirectory()&&this.equals(d))return this;if(this.isRoot())return this.asDirectory();if(d.isRoot())return d.asDirectory();d=d.parents();for(var h=this.parents(),n=this.root(),b=0;b<h.length;b++){var e=h[b],m=d[b];if(!m||!e.equals(m))break;n=e}return n};
jg.prototype.withRelativePartsResolved=function(){var d=this.path(),h=Bi.withRelativePartsResolved(d);if(h===d)return this;h.startsWith("/")&&(h=h.slice(1));h[1]===":".startsWith("/")?h=h.slice(1):":"===h[1]&&h.match(Bi.windowsPathPrefixRe)&&(h=h.slice(3));return this.newResource(this.root().url+h)};jg.prototype.relativePathFrom=function(d){return Bi.relativePathBetween(d.url,this.url)};jg.prototype.withPath=function(d){return(this.isRoot()?this:this.root()).join(d)};jg.prototype.join=function(d){return this.newResource(this.url.replace(Bi.slashEndRe,
"")+"/"+d.replace(Bi.slashStartRe,""))};jg.prototype.isRoot=function(){return"/"===this.path()};jg.prototype.isFile=function(){return!this.isRoot()&&!this.url.match(Bi.slashEndRe)};jg.prototype.isDirectory=function(){return!this.isFile()};jg.prototype.asDirectory=function(){return this.url.endsWith("/")?this:this.newResource(this.url.replace(Bi.slashEndRe,"")+"/")};jg.prototype.root=function(){if(this.isRoot())return this;var d=this.url.slice(0,-this.path().length);return this.newResource(d+"/")};
jg.prototype.asFile=function(){return this.url.endsWith("/")?this.newResource(this.url.replace(Bi.slashEndRe,"")):this};jg.prototype.assignProperties=function(d){for(var h in d)if("url"!==h){var n=h;if("isLink"===h||"isDirectory"===h)n="_"+h;this[n]=d[h]}return this};jg.prototype.ensureExistance=function(d){var h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){switch(n.nextAddress){case 1:return n.yield(h.exists(),2);case 2:return n.yieldResult?n.return(h):n.yield(h.parent().ensureExistance(),
3);case 3:return h.isFile()?n.yield(h.write(d||""),5):n.yield(h.mkdir(),5);case 5:return n.return(h)}})};jg.prototype.copyTo=function(d,h){h=void 0===h?!0:h;var n=this,b,e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:if(n.isFile()){m=d.isFile()?d:d.join(n.name());if(!h){l.jumpTo(8);break}return l.yield(m.parent().ensureExistance(),8)}if(!d.isDirectory())throw Error("Cannot copy a directory to a file!");return l.yield(n.dirList("infinity"),4);case 4:return b=
l.yieldResult,e=b.map(function(q){return d.join(q.relativePathFrom(n))}),l.yield(d.ensureExistance(),5);case 5:return l.yield(b.reduceRight(function(q,r,u){return function(){return Promise.resolve(r.isDirectory()&&e[u].ensureExistance()).then(q)}},function(){return Promise.resolve()})(),6);case 6:return l.yield(b.reduceRight(function(q,r,u){return function(){return Promise.resolve(r.isFile()&&r.copyTo(e[u],!1)).then(q)}},function(){return Promise.resolve()})(),3);case 8:return a=m,g=a.write,l.yield(n.read(),
11);case 11:return l.yield(g.call(a,l.yieldResult),3);case 3:return l.return(n)}})};jg.prototype.rename=function(d){var h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(h.copyTo(d),2);h.remove();return n.return(d)})};jg.prototype.beBinary=function(d){return this.setBinary(!0)};jg.prototype.setBinary=function(d){this.binary=d;return this};jg.prototype.read=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){Bi.nyi(d,
"read");h.jumpToEnd()})};jg.prototype.write=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){Bi.nyi(d,"write");h.jumpToEnd()})};jg.prototype.mkdir=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){Bi.nyi(d,"mkdir");h.jumpToEnd()})};jg.prototype.exists=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){Bi.nyi(d,"exists");h.jumpToEnd()})};jg.prototype.remove=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){Bi.nyi(d,
"remove");h.jumpToEnd()})};jg.prototype.dirList=function(d,h){var n=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){Bi.nyi(n,"dirList");b.jumpToEnd()})};jg.prototype.readProperties=function(d){var h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){Bi.nyi(h,"readProperties");n.jumpToEnd()})};jg.prototype.writeJson=function(d,h){return this.write((void 0===h?0:h)?JSON.stringify(d,null,2):JSON.stringify(d))};jg.prototype.readJson=function(d){var h=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==
e.nextAddress?(n=JSON,b=n.parse,e.yield(h.read(),2)):e.return(b.call(n,e.yieldResult))})};jg.prototype.__serialize__=function(){return{__expr__:'var r = null; try { r = resource("'+this.url+'");} catch (err) {}; r',bindings:{"lively.resources":["resource"]}}};$jscomp.global.Object.defineProperties(jg.prototype,{isResource:{configurable:!0,enumerable:!0,get:function(){return!0}},canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!1}}});sa("bC",jg);Bi.Resource=jg;Bi.default=jg;var Ag=
lively.FreezerRuntime.recorderFor("lively.resources/src/http-resource.js");Ag.davNs=function(d){return(d=d.match(/\/([a-z]+?):multistatus/i))?d[1]:"d"};Ag.propfindRequestPayload=function(){return'<?xml version="1.0" encoding="utf-8" ?>\n    <D:propfind xmlns:D="DAV:">\n      <D:prop>\n        <D:creationdate/>\n        <D:getcontentlength/>\n        <D:getcontenttype/>\n        <D:getetag/>\n        <D:getlastmodified/>\n        <D:resourcetype/>\n      </D:prop>\n    </D:propfind>'};Ag.readPropertyNode=
function(d,h){h=void 0===h?{}:h;var n=d.tagName.replace(/[^:]+:/,"");n=Ag.propertyNodeMap[n];d=d.textContent;switch(n){case "lastModified":case "created":d=new Date(d);break;case "size":d=Number(d)}h[n]=d;return h};Ag.readXMLPropfindResult=function(d){var h=(new DOMParser).parseFromString(d,"text/xml");d=Ag.davNs(d);h=(new Ag.XPathQuery("/"+d+":multistatus/"+d+":response")).findAll(h.documentElement);var n=new Ag.XPathQuery(d+":href"),b=new Ag.XPathQuery(d+":propstat/"+d+":prop");return h.map(function(e){var m=
b.findFirst(e);m=Array.from(m.childNodes).reduce(function(a,g){return Ag.readPropertyNode(g,a)},{});e=n.findFirst(e);m.url=e.textContent||e.text;return m})};Ag.defaultOrigin=function(){return document.location.origin};Ag.makeRequest=function(d,h,n,b,e){b=void 0===b?{}:b;e=d.url;var m=d.useCors,a=d.useProxy,g=d.headers;m="undefined"!==typeof m?m:!0;h={method:void 0===h?"GET":h};if("undefined"!==typeof a?a:1)Object.assign(b,{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":e}),
e=d.proxyDomain||Ag.defaultOrigin();m&&(h.mode="cors");n&&(h.body=n);h.redirect="follow";h.headers=Object.assign({},b,{},g);return fetch(e,h)};Ag.upload=C;Ag.Resource=jg;Ag.applyExclude=Ed;Ag.promise=yg;Ag.num=Bk;var wD=function(d){this.expression=d;this.contextNode=null;this.xpe=new XPathEvaluator};wD.prototype.establishContext=function(d){this.nsResolver||(d=d.ownerDocument?d.ownerDocument.documentElement:d.documentElement,d!==this.contextNode&&(this.contextNode=d,this.nsResolver=this.xpe.createNSResolver(d)))};
wD.prototype.manualNSLookup=function(){this.nsResolver=function(d){return Namespace[d.toUpperCase()]||null};return this};wD.prototype.findAll=function(d,h){this.establishContext(d);d=this.xpe.evaluate(this.expression,d,this.nsResolver,XPathResult.ANY_TYPE,null);for(var n=[],b;b=d.iterateNext();)n.push(b);return 0<n.length||void 0===h?n:h};wD.prototype.findFirst=function(d){this.establishContext(d);return this.xpe.evaluate(this.expression,d,this.nsResolver,XPathResult.ANY_TYPE,null).iterateNext()};
Ag.XPathQuery=wD;Ag.propertyNodeMap={getlastmodified:"lastModified",creationDate:"created",getetag:"etag",getcontentlength:"size",resourcetype:"type",getcontenttype:"contentType"};Ag.binaryExtensions="3ds 3g2 3gp 7z a aac adp ai aif aiff alz ape apk ar arj asf au avi bak bh bin bk bmp btif bz2 bzip2 cab caf cgm class cmx cpio cr2 csv cur dat deb dex djvu dll dmg dng doc docm docx dot dotm dra DS_Store dsk dts dtshd dvb dwg dxf ecelp4800 ecelp7470 ecelp9600 egg eol eot epub exe f4v fbs fh fla flac fli flv fpx fst fvt g3 gif graffle gz gzip h261 h263 h264 icns ico ief img ipa iso jar jpeg jpg jpgv jpm jxr key ktx lha lvp lz lzh lzma lzo m3u m4a m4v mar mdi mht mid midi mj2 mka mkv mmr mng mobi mov movie mp3 mp4 mp4a mpeg mpg mpga mxu nef npx numbers o oga ogg ogv otf pages pbm pcx pdf pea pgm pic png pnm pot potm potx ppa ppam ppm pps ppsm ppsx ppt pptm pptx psd pya pyc pyo pyv qt rar ras raw rgb rip rlc rmf rmvb rtf rz s3m s7z scpt sgi shar sil sketch slk smv so sub swf tar tbz tbz2 tga tgz thmx tif tiff tlz ttc ttf txz udf uvh uvi uvm uvp uvs uvu viv vob war wav wax wbmp wdp weba webm webp whl wim wm wma wmv wmx woff woff2 wvx xbm xif xla xlam xls xlsb xlsm xlsx xlt xltm xltx xm xmind xpi xpm xwd xz z zip zipx".split(" ");
Ag.isNode="undefined"!==typeof System?System.get("@system-env").node:"undefined"!==typeof global&&"undefined"!==typeof process;Ag.upload=C;Ag.upload=C;var jl=function(d,h){h=void 0===h?{}:h;d=Ag.Resource.call(this,d,h)||this;d.onLoad=h.onLoad||function(){};d.onProgress=h.onProgress||function(){};d.useProxy=h.hasOwnProperty("useProxy")?h.useProxy:!1;d.proxyDomain=h.proxyDomain||void 0;d.useCors=h.hasOwnProperty("useCors")?h.useCors:!1;d.headers=h.headers||{};d.binary=d.isFile()?Ag.binaryExtensions.includes(d.ext()):
!1;d.errorOnHTTPStatusCodes=h.hasOwnProperty("errorOnHTTPStatusCodes")?h.errorOnHTTPStatusCodes:!0;return d};$jscomp.inherits(jl,Ag.Resource);jl.prototype.join=function(d){return Object.assign(Ag.Resource.prototype.join.call(this,d),{headers:this.headers,useCors:this.useCors,useProxy:this.useProxy,proxyDomain:this.proxyDomain})};jl.prototype.makeProxied=function(d){void 0!==d&&(this.proxyDomain=d);return this.useProxy?this:new this.constructor(this.url,{headers:this.headers,useCors:this.useCors,useProxy:!0,
proxyDomain:this.proxyDomain})};jl.prototype.noErrorOnHTTPStatusCodes=function(){this.errorOnHTTPStatusCodes=!1;return this};jl.prototype.read=function(){var d=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(Ag.makeRequest(d),2);h=n.yieldResult;if(!h.ok&&d.errorOnHTTPStatusCodes)throw Error("Cannot read "+d.url+": "+h.statusText+" "+h.status);if(!d.binary)return n.return(h.text());if("blob"===d.binary)return n.return(h.blob());if("function"===
typeof h.arrayBuffer)return n.return(h.arrayBuffer());if("function"===typeof h.buffer)return n.return(h.buffer());throw Error("Don't now how to read binary resource "+d+"'");})};jl.prototype.write=function(d){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress){if(!h.isFile())throw Error("Cannot write a non-file: "+h.url);return b.yield(Ag.upload(h,d),2)}n=b.yieldResult;if(!Ag.num.between(n.status,200,300)&&h.errorOnHTTPStatusCodes)throw Error("Cannot write "+
h.url+": "+n.statusText+" "+n.status);return b.return(h)})};jl.prototype.mkdir=function(){var d=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress){if(d.isFile())throw Error("Cannot mkdir on a file: "+d.url);return n.yield(Ag.makeRequest(d,"MKCOL"),2)}h=n.yieldResult;if(!h.ok&&d.errorOnHTTPStatusCodes)throw Error("Cannot create directory "+d.url+": "+h.statusText+" "+h.status);return n.return(d)})};jl.prototype.exists=function(){var d=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==
n.nextAddress)return d.isRoot()?(h=!0,n.jumpTo(2)):n.yield(Ag.makeRequest(d,"HEAD"),3);2!=n.nextAddress&&(h=!!n.yieldResult.ok);return n.return(h)})};jl.prototype.remove=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return 1==h.nextAddress?h.yield(Ag.makeRequest(d,"DELETE"),2):h.return(d)})};jl.prototype._propfind=function(){var d=this,h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(Ag.makeRequest(d,"PROPFIND",
null,{"Content-Type":"text/xml"}),2);if(3!=e.nextAddress){h=e.yieldResult;if(!h.ok&&d.errorOnHTTPStatusCodes)throw Error("Error in dirList for "+d.url+": "+h.statusText);return e.yield(h.text(),3)}n=e.yieldResult;b=d.root();return e.return(Ag.readXMLPropfindResult(n).map(function(m){return b.join(m.url).assignProperties(m)}))})};jl.prototype.dirList=function(d,h){d=void 0===d?1:d;h=void 0===h?{}:h;var n=this,b,e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress){if("number"!==
typeof d&&"infinity"!==d)throw Error("dirList \u2013 invalid depth argument: "+d);b=h;e=b.exclude;0>=d&&(d=1);return 1===d?l.yield(n._propfind(),5):l.yield(n.dirList(1,h),4)}if(5!=l.nextAddress)return m=l.yieldResult,a=m.filter(function(q){return q.isDirectory()}),l.return(Promise.all(a.map(function(q){return q.dirList("number"===typeof d?d-1:d,h)})).then(function(q){return q.reduce(function(r,u){return r.concat(u)},m)}));g=l.yieldResult;g.shift();e&&(g=Ag.applyExclude(e,g));return l.return(g)})};
jl.prototype.readProperties=function(d){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(h._propfind(),2);n=b.yieldResult[0];return b.return(h.assignProperties(n))})};jl.prototype.post=function(d){d=void 0===d?null:d;var h=this,n,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:return"string"!==typeof d&&(d=JSON.stringify(d)),m.yield(Ag.makeRequest(h,"POST",d,{}),2);case 2:return n=m.yieldResult,
m.setCatchFinallyBlocks(3),m.yield(n.text(),5);case 5:b=m.yieldResult;m.leaveTryBlock(4);break;case 3:m.enterCatchBlock();case 4:if(b&&"application/json"===n.headers.get("content-type"))try{e=JSON.parse(b)}catch(a){}if(!n.ok&&h.errorOnHTTPStatusCodes)throw Error("Error in POST "+h.url+": "+(b||n.statusText));return m.return(e||b)}})};jl.prototype.copyTo=function(d,h){h=void 0===h?!0:h;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(n.isFile()&&(b=d.isFile()?d:d.join(n.name()),
Ag.isNode)){if(b.isHTTPResource)return e.return(n._copyTo_file_nodejs_http(b,h));if(b.isNodeJSFileResource)return e.return(n._copyTo_file_nodejs_fs(b,h))}return e.return(Ag.Resource.prototype.copyTo.call(n,d,h))})};jl.prototype._copyFrom_file_nodejs_fs=function(d,h){h=void 0===h?!0:h;var n=this,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return h?a.yield(n.parent().ensureExistance(),2):a.jumpTo(2);if(4!=a.nextAddress)return e=d._createReadStream(),e.on("error",
function(g){return b=g}),a.yield(Ag.makeRequest(n,"PUT",e),4);m=a.yieldResult;if(b)throw b;if(!m.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+m.statusText+" "+m.status);return a.return(n)})};jl.prototype._copyTo_file_nodejs_fs=function(d,h){h=void 0===h?!0:h;var n=this,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return h?m.yield(d.parent().ensureExistance(),2):m.jumpTo(2);if(4!=m.nextAddress)return m.yield(Ag.makeRequest(n,"GET"),4);b=
m.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+b.statusText+" "+b.status);return m.return(new Promise(function(a,g){return b.body.pipe(d._createWriteStream()).on("error",function(l){return e=l}).on("finish",function(){return e?g(e):a(n)})}))})};jl.prototype._copyTo_file_nodejs_http=function(d,h){h=void 0===h?!0:h;var n=this,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:if(!h){m.jumpTo(2);break}return m.yield(d.parent().ensureExistance(),
2);case 2:return m.yield(Ag.makeRequest(n,"GET"),4);case 4:b=m.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+b.statusText+" "+b.status);return m.yield(Ag.makeRequest(d,"PUT",b.body),5);case 5:e=m.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot PUT: "+e.statusText+" "+e.status);m.jumpToEnd()}})};$jscomp.global.Object.defineProperties(jl.prototype,{isHTTPResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});Ag.WebDAVResource=
jl;var WH={name:"http-webdav-resource",matches:function(d){return d.startsWith("http:")||d.startsWith("https:")},resourceClass:Ag.WebDAVResource};Ag.resourceExtension=WH;Ag.resourceExtension=WH;Ag.resourceExtension=WH;Ag.default=jl;var ir=System.get("@system-env").node?require("fs"):{},Yea=ir.readFile,Zea=ir.writeFile,$ea=ir.exists,afa=ir.readdir,bfa=ir.mkdir,cfa=ir.rmdir,dfa=ir.unlink,efa=ir.lstat,ffa=ir.rename,gfa=ir.createWriteStream,hfa=ir.createReadStream,If=lively.FreezerRuntime.recorderFor("lively.resources/src/fs-resource.js");
If.wrapInPromise=function(d){return function(h){for(var n=[],b=0;b<arguments.length;++b)n[b-0]=arguments[b];return new Promise(function(e,m){return d.apply(null,n.concat(function(a,g){return a?m(a):e(g)}))})}};If.Resource=jg;If.applyExclude=Ed;If.windowsURLPrefixRe=TH;If.windowsRootPathRe=VH;If.createWriteStream=gfa;If.createReadStream=hfa;If.readFile=Yea;If.writeFile=Zea;If.exists=$ea;If.mkdir=bfa;If.rmdir=cfa;If.unlink=dfa;If.readdir=afa;If.lstat=efa;If.rename=ffa;If.readFileP=If.wrapInPromise(If.readFile);
If.writeFileP=If.wrapInPromise(If.writeFile);If.existsP=function(d){return new Promise(function(h,n){return If.exists(d,function(b){return h(!!b)})})};If.readdirP=If.wrapInPromise(If.readdir);If.mkdirP=If.wrapInPromise(If.mkdir);If.rmdirP=If.wrapInPromise(If.rmdir);If.unlinkP=If.wrapInPromise(If.unlink);If.lstatP=If.wrapInPromise(If.lstat);If.renameP=If.wrapInPromise(If.rename);var em=function(){return If.Resource.apply(this,arguments)||this};$jscomp.inherits(em,If.Resource);em.prototype.path=function(){return this.url.replace("file://",
"")};em.prototype.stat=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(If.lstatP(d.path()))})};em.prototype.read=function(){var d=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){h=If.readFileP(d.path());return n.return(d.binary?h:h.then(String))})};em.prototype.write=function(d){var h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress){if(h.isDirectory())throw Error("Cannot write into a directory: "+
h.path());return n.yield(If.writeFileP(h.path(),d),2)}return n.return(h)})};em.prototype.mkdir=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress){if(d.isFile())throw Error("Cannot mkdir on a file: "+d.path());return h.yield(If.mkdirP(d.path()),2)}return h.return(d)})};em.prototype.exists=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d.isRoot()?!0:If.existsP(d.path()))})};em.prototype.dirList=
function(d,h){d=void 0===d?1:d;h=void 0===h?{}:h;var n=this,b,e,m,a,g,l,q,r,u,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:if("number"!==typeof d&&"infinity"!==d)throw Error("dirList \u2013 invalid depth argument: "+d);b=h;e=b.exclude;0>=d&&(d=1);if(1!==d){A.jumpTo(2);break}m=[];a=$jscomp;g=a.makeIterator;return A.yield(If.readdirP(n.path()),3);case 3:l=g.call(a,A.yieldResult),q=l.next();case 4:if(q.done){A.jumpTo(6);break}r=q.value;u=n.join(r);
return A.yield(u.stat(),7);case 7:v=A.yieldResult;u=v.isDirectory()?u.asDirectory():u;u._assignPropsFromStat(v);m.push(u);q=l.next();A.jumpTo(4);break;case 6:return e&&(m=If.applyExclude(e,m)),A.return(m);case 2:return A.yield(n.dirList(1,h),8);case 8:return y=A.yieldResult,z=y.filter(function(B){return B.isDirectory()}),A.return(Promise.all(z.map(function(B){return B.dirList("number"===typeof d?d-1:d,h)})).then(function(B){return B.reduce(function(G,E){return G.concat(E)},y)}))}})};em.prototype.isEmptyDirectory=
function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return 1==h.nextAddress?h.yield(d.dirList(),2):h.return(0===h.yieldResult.length)})};em.prototype.rename=function(d){var h=this,n,b,e,m,a,g,l,q,r,u,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:if(!(d instanceof h.constructor))return A.return(If.Resource.prototype.rename.call(h,d));if(h.isFile()){d=d.asFile();If.renameP(h.path(),d.path());A.jumpTo(2);break}d=d.asDirectory();
return A.yield(d.ensureExistance(),3);case 3:return n=[],b=[],e=$jscomp,m=e.makeIterator,A.yield(h.dirList("infinity"),4);case 4:a=m.call(e,A.yieldResult);for(g=a.next();!g.done;g=a.next())l=g.value,l.isDirectory()?b.push(l):n.push(l);q=$jscomp.makeIterator(b);r=q.next();case 5:if(r.done){A.jumpTo(7);break}u=r.value;return A.yield(d.join(u.relativePathFrom(h)).ensureExistance(),6);case 6:r=q.next();A.jumpTo(5);break;case 7:v=$jscomp.makeIterator(n),y=v.next();case 9:if(y.done)return A.yield(h.remove(),
2);z=y.value;return A.yield(z.rename(d.join(z.relativePathFrom(h))),10);case 10:y=v.next();A.jumpTo(9);break;case 2:return A.return(d)}})};em.prototype.remove=function(){var d=this,h,n,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return a.yield(d.exists(),2);case 2:if(!a.yieldResult){a.jumpTo(3);break}return d.isDirectory()?(h=$jscomp,n=h.makeIterator,a.yield(d.dirList(),7)):a.yield(If.unlinkP(d.path()),3);case 7:b=n.call(h,a.yieldResult),e=b.next();
case 8:if(e.done)return a.yield(If.rmdirP(d.path()),3);m=e.value;return a.yield(m.remove(),9);case 9:e=b.next();a.jumpTo(8);break;case 3:return a.return(d)}})};em.prototype.readProperties=function(){var d=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(h=d,n=h._assignPropsFromStat,b.yield(d.stat(),2)):b.return(n.call(h,b.yieldResult))})};em.prototype.copyTo=function(d,h){h=void 0===h?!0:h;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return n.isFile()&&
(b=d.isFile()?d:d.join(n.name()),b.isHTTPResource)?e.return(b._copyFrom_file_nodejs_fs(n,h=!0)):e.return(If.Resource.prototype.copyTo.call(n,d,h))})};em.prototype._assignPropsFromStat=function(d){return this.assignProperties({lastModified:d.mtime,created:d.ctime,size:d.size,type:d.isDirectory()?"directory":"file",isLink:d.isSymbolicLink()})};em.prototype._createWriteStream=function(){return If.createWriteStream(this.path())};em.prototype._createReadStream=function(){return If.createReadStream(this.path())};
$jscomp.global.Object.defineProperties(em.prototype,{isNodeJSFileResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});If.NodeJSFileResource=em;var xD=function(d,h){"file:///"!==d.slice(0,8)&&"file://"===d.slice(0,7)&&(d="file:///"+d.slice(7));d.includes("\\")&&(d=d.replace(/\\/g,"/"));return If.NodeJSFileResource.call(this,d,h)||this};$jscomp.inherits(xD,If.NodeJSFileResource);xD.prototype.path=function(){return this.url.replace("file:///","")};xD.prototype.isRoot=function(){return!!this.path().match(If.windowsRootPathRe)};
xD.prototype.root=function(){if(this.isRoot())return this;console.log(this.url);var d=this.url.match(If.windowsURLPrefixRe);if(d)return this.newResource(d[0]);throw Error("Could not determine root path of windows file resource for url "+this.url);};If.NodeJSWindowsFileResource=xD;var XH={name:"nodejs-file-resource",matches:function(d){return d.startsWith("file:")},resourceClass:"undefined"!=typeof process&&"win32"===process.platform?If.NodeJSWindowsFileResource:If.NodeJSFileResource};If.resourceExtension=
XH;If.resourceExtension=XH;If.resourceExtension=XH;var ak=lively.FreezerRuntime.recorderFor("lively.resources/src/local-resource.js");ak.applyExclude=function(d,h){return h?"string"===typeof h?!d.url.includes(h):"function"===typeof h?!h(d):h instanceof RegExp?!h.test(d.url):!0:!0};ak.Resource=jg;ak.createFiles=t;ak.debug=!1;ak.slashRe=/\//g;var dq=function(d,h){h=void 0===h?{}:h;if(!d||"string"!==typeof d)throw Error("LocalResourceInMemoryBackend needs name!");this.name=d;this._filespec=h};dq.removeHost=
function(d){delete this.hosts[d]};dq.ensure=function(d,h){var n=this;h=void 0===h?{}:h;var b=this.named(h.host);return Promise.resolve().then(function(){return d?ak.createFiles("local://"+b.name,d):null}).then(function(){return n})};dq.named=function(d){d||(d="default");return this.hosts[d]||(this.hosts[d]=new this(d))};dq.prototype.get=function(d){return this._filespec[d]};dq.prototype.set=function(d,h){this._filespec[d]=h};dq.prototype.write=function(d,h){var n=this._filespec[d];n||(n=this._filespec[d]=
{created:new Date});n.content=h;n.isDirectory=!1;n.lastModified=new Date};dq.prototype.read=function(d){return(d=this._filespec[d])&&d.content?d.content:""};dq.prototype.mkdir=function(d){var h=this._filespec[d];h&&h.isDirectory||(h||(h=this._filespec[d]={created:new Date}),h.content&&delete h.content,h.isDirectory=!0,h.lastModified=new Date)};dq.prototype.partialFilespec=function(d,h){d=void 0===d?"/":d;h=void 0===h?Infinity:h;for(var n={},b=this.filespec,e=Object.keys(b),m=0;m<e.length;m++){var a=
e[m];if(a.startsWith(d)&&d!==a){var g=a.slice(d.length);(g.includes("/")?g.match(ak.slashRe).length+1:1)>h||(n[a]=b[a])}}return n};$jscomp.global.Object.defineProperties(dq.prototype,{filespec:{configurable:!0,enumerable:!0,get:function(){return this._filespec},set:function(d){this._filespec=d}}});$jscomp.global.Object.defineProperties(dq,{hosts:{configurable:!0,enumerable:!0,get:function(){return this._hosts||(this._hosts={})}}});ak.LocalResourceInMemoryBackend=dq;var jr=function(){return ak.Resource.apply(this,
arguments)||this};$jscomp.inherits(jr,ak.Resource);jr.prototype.read=function(){return Promise.resolve(this.localBackend.read(this.path()))};jr.prototype.write=function(d){ak.debug&&console.log("["+this+"] write");if(this.isDirectory())throw Error("Cannot write into a directory! ("+this.url+")");var h=this.localBackend.get(this.path());if(h&&h.isDirectory)throw Error(this.url+" already exists and is a directory (cannot write into it!)");this.localBackend.write(this.path(),d);return Promise.resolve(this)};
jr.prototype.mkdir=function(){ak.debug&&console.log("["+this+"] mkdir");if(!this.isDirectory())throw Error("Cannot mkdir a file! ("+this.url+")");var d=this.localBackend.get(this.path());if(d&&d.isDirectory)return Promise.resolve(this);if(d&&!d.isDirectory)throw Error(this.url+" already exists and is a file (cannot mkdir it!)");this.localBackend.mkdir(this.path());return Promise.resolve(this)};jr.prototype.exists=function(){ak.debug&&console.log("["+this+"] exists");return Promise.resolve(this.isRoot()||
this.path()in this.localBackend.filespec)};jr.prototype.remove=function(){var d=this;ak.debug&&console.log("["+this+"] remove");var h=this.path();Object.keys(this.localBackend.filespec).forEach(function(n){return n.startsWith(h)&&delete d.localBackend.filespec[n]});return Promise.resolve(this)};jr.prototype.readProperties=function(){ak.debug&&console.log("["+this+"] readProperties");throw Error("not yet implemented");};jr.prototype.dirList=function(d,h){d=void 0===d?1:d;h=void 0===h?{}:h;ak.debug&&
console.log("["+this+"] dirList");if(!this.isDirectory())return this.asDirectory().dirList(d,h);h=h.exclude;var n=this.path(),b=[],e=Object.keys(this.localBackend.filespec);"infinity"===d&&(d=Infinity);for(var m={},a=0;a<e.length;m={$jscomp$loop$prop$dirToChild$2227:m.$jscomp$loop$prop$dirToChild$2227},a++){var g=e[a];g.startsWith(n)&&n!==g&&(g=g.slice(n.length),(g.includes("/")?g.match(ak.slashRe).length+1:1)>d?(m.$jscomp$loop$prop$dirToChild$2227=this.join(g.split("/").slice(0,d).join("/")+"/"),
b.some(function(l){return function(q){return q.equals(l.$jscomp$loop$prop$dirToChild$2227)}}(m))||b.push(m.$jscomp$loop$prop$dirToChild$2227)):(g=this.join(g),h&&!ak.applyExclude(g,h)||b.push(g)))}return Promise.resolve(b)};$jscomp.global.Object.defineProperties(jr.prototype,{localBackend:{configurable:!0,enumerable:!0,get:function(){return ak.LocalResourceInMemoryBackend.named(this.host())}}});ak.LocalResource=jr;var YH={name:"local-resource",matches:function(d){return d.startsWith("local:")},resourceClass:ak.LocalResource};
ak.resourceExtension=YH;ak.resourceExtension=YH;ak.resourceExtension=YH;ak.default=jr;var $h=lively.FreezerRuntime.recorderFor("lively.resources/index.js");$h.createFileSpec=F;$h.loadViaScript=M;$h.ensureFetch=R;$h.default=jg;$h.Resource=jg;$h.unregisterExtension=x;$h.registerExtension=w;$h.parseQuery=On;$h.extensions=jy;$h.createFiles=t;$h.resource=p;$h.httpResourceExtension=WH;$h.fileResourceExtension=XH;$h.localResourceExtension=YH;$h.registerExtension($h.localResourceExtension);$h.registerExtension($h.httpResourceExtension);
$h.registerExtension($h.fileResourceExtension);$h.createFileSpec=F;$h.createFileSpec=F;$h.loadViaScript=M;$h.loadViaScript=M;$h.ensureFetch=R;$h.ensureFetch=R;$h.registerExtension=w;$h.registerExtension=w;$h.unregisterExtension=x;$h.unregisterExtension=x;$h.parseQuery=On;$h.parseQuery=On;$h.extensions=jy;$h.extensions=jy;$h.createFiles=t;$h.createFiles=t;$h.resource=p;$h.resource=p;var ifa=Object.freeze({__proto__:null,Resource:jg,createFileSpec:F,loadViaScript:M,ensureFetch:R,registerExtension:w,
unregisterExtension:x,parseQuery:On,extensions:jy,createFiles:t,resource:p}),Vh=lively.FreezerRuntime.recorderFor("lively.morphic/helpers.js");Vh.pathForBrowserHistory=ba;Vh.addClassMappings=fa;Vh.morph=wa;Vh.newMorphId=Na;Vh.lazyInspect=function(d){var h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(System.import("lively.ide/js/inspector.js"),2);h=b.yieldResult;n=h.inspect;Vh.inspect=n;return b.return(n(d))})};Vh.locateClass=kj;Vh.string=vh;Vh.parseQuery=
On;Vh.stringifyQuery=au;Vh.touchInput=Vh.touchInput||void 0;try{document.createEvent("TouchEvent"),Vh.touchInput=!0}catch(d){Vh.touchInput=!1}var Qo=sa("ay",Vh.touchInput);Vh.touchInputDevice=Qo;Vh.touchInputDevice=Qo;Vh.touchInputDevice=Qo;Vh.nameToClassMapping=Vh.nameToClassMapping||{};Vh.pathForBrowserHistory=ba;Vh.pathForBrowserHistory=ba;Vh.addClassMappings=fa;Vh.addClassMappings=fa;Vh.morph=wa;Vh.morph=wa;Vh.newMorphId=Na;Vh.newMorphId=Na;var ky=sa("a6",Vh.lazyInspect);Vh.inspect=ky;Vh.inspect=
ky;Vh.inspect=ky;var eq=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js");eq.obj=Pf;eq.morph=wa;var sn=sa("am",function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js"),n=h.hasOwnProperty("Icon")&&"function"===typeof h.Icon?h.Icon:h.Icon=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,void 0,[{key:"className",get:function(){return"Icon"}},{key:"makeLabel",value:function(b,
e){var m=e=void 0===e?{prefix:"",suffix:""}:e,a=m.prefix;m=m.suffix;var g=[];a&&g.push.apply(g,$jscomp.arrayFromIterable("string"===typeof a?[a||"",{}]:a));g.push.apply(g,$jscomp.arrayFromIterable(this.textAttribute(b,eq.obj.dissoc(e,["fontSize"]))));m&&g.push.apply(g,$jscomp.arrayFromIterable("string"===typeof m?[m||"",{}]:m));return eq.morph(Object.assign({type:"label",value:g},eq.obj.dissoc(e,["prefix","suffix"])))}},{key:"textAttribute",value:function(b,e){e=void 0===e?{}:e;var m=e.textStyleClasses&&
e.textStyleClasses.includes("far");return[eq.Icons[b].code||"icon "+b+" not found",Object.assign({fontFamily:'"Font Awesome 5 Free", "Font Awesome 5 Brands"',fontWeight:m?"400":"900",textStyleClasses:["fas"]},e)]}},{key:"setIcon",value:function(b,e){b.textAndAttributes=this.textAttribute(e)}}],h,{pathInPackage:function(){return"text/icons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:661,end:1789})}(void 0));eq.Icon=sn;eq.Icon=sn;eq.Icon=sn;var ZH=sa("bh",{"500px":{code:"\uf26e"},"accessible-icon":{code:"\uf368"},accusoft:{code:"\uf369"},"acquisitions-incorporated":{code:"\uf6af"},ad:{code:"\uf641"},"address-book":{code:"\uf2b9"},"address-card":{code:"\uf2bb"},adjust:{code:"\uf042"},adn:{code:"\uf170"},adobe:{code:"\uf778"},adversal:{code:"\uf36a"},affiliatetheme:{code:"\uf36b"},"air-freshener":{code:"\uf5d0"},airbnb:{code:"\uf834"},algolia:{code:"\uf36c"},
"align-center":{code:"\uf037"},"align-justify":{code:"\uf039"},"align-left":{code:"\uf036"},"align-right":{code:"\uf038"},alipay:{code:"\uf642"},allergies:{code:"\uf461"},amazon:{code:"\uf270"},"amazon-pay":{code:"\uf42c"},ambulance:{code:"\uf0f9"},"american-sign-language-interpreting":{code:"\uf2a3"},amilia:{code:"\uf36d"},anchor:{code:"\uf13d"},android:{code:"\uf17b"},angellist:{code:"\uf209"},"angle-double-down":{code:"\uf103"},"angle-double-left":{code:"\uf100"},"angle-double-right":{code:"\uf101"},
"angle-double-up":{code:"\uf102"},"angle-down":{code:"\uf107"},"angle-left":{code:"\uf104"},"angle-right":{code:"\uf105"},"angle-up":{code:"\uf106"},angry:{code:"\uf556"},angrycreative:{code:"\uf36e"},angular:{code:"\uf420"},ankh:{code:"\uf644"},"app-store":{code:"\uf36f"},"app-store-ios":{code:"\uf370"},apper:{code:"\uf371"},apple:{code:"\uf179"},"apple-alt":{code:"\uf5d1"},"apple-pay":{code:"\uf415"},archive:{code:"\uf187"},archway:{code:"\uf557"},"arrow-alt-circle-down":{code:"\uf358"},"arrow-alt-circle-left":{code:"\uf359"},
"arrow-alt-circle-right":{code:"\uf35a"},"arrow-alt-circle-up":{code:"\uf35b"},"arrow-circle-down":{code:"\uf0ab"},"arrow-circle-left":{code:"\uf0a8"},"arrow-circle-right":{code:"\uf0a9"},"arrow-circle-up":{code:"\uf0aa"},"arrow-down":{code:"\uf063"},"arrow-left":{code:"\uf060"},"arrow-right":{code:"\uf061"},"arrow-up":{code:"\uf062"},"arrows-alt":{code:"\uf0b2"},"arrows-alt-h":{code:"\uf337"},"arrows-alt-v":{code:"\uf338"},artstation:{code:"\uf77a"},"assistive-listening-systems":{code:"\uf2a2"},
asterisk:{code:"\uf069"},asymmetrik:{code:"\uf372"},at:{code:"\uf1fa"},atlas:{code:"\uf558"},atlassian:{code:"\uf77b"},atom:{code:"\uf5d2"},audible:{code:"\uf373"},"audio-description":{code:"\uf29e"},autoprefixer:{code:"\uf41c"},avianex:{code:"\uf374"},aviato:{code:"\uf421"},award:{code:"\uf559"},aws:{code:"\uf375"},baby:{code:"\uf77c"},"baby-carriage":{code:"\uf77d"},backspace:{code:"\uf55a"},backward:{code:"\uf04a"},bacon:{code:"\uf7e5"},bahai:{code:"\uf666"},"balance-scale":{code:"\uf24e"},"balance-scale-left":{code:"\uf515"},
"balance-scale-right":{code:"\uf516"},ban:{code:"\uf05e"},"band-aid":{code:"\uf462"},bandcamp:{code:"\uf2d5"},barcode:{code:"\uf02a"},bars:{code:"\uf0c9"},"baseball-ball":{code:"\uf433"},"basketball-ball":{code:"\uf434"},bath:{code:"\uf2cd"},"battery-empty":{code:"\uf244"},"battery-full":{code:"\uf240"},"battery-half":{code:"\uf242"},"battery-quarter":{code:"\uf243"},"battery-three-quarters":{code:"\uf241"},"battle-net":{code:"\uf835"},bed:{code:"\uf236"},beer:{code:"\uf0fc"},behance:{code:"\uf1b4"},
"behance-square":{code:"\uf1b5"},bell:{code:"\uf0f3"},"bell-slash":{code:"\uf1f6"},"bezier-curve":{code:"\uf55b"},bible:{code:"\uf647"},bicycle:{code:"\uf206"},biking:{code:"\uf84a"},bimobject:{code:"\uf378"},binoculars:{code:"\uf1e5"},biohazard:{code:"\uf780"},"birthday-cake":{code:"\uf1fd"},bitbucket:{code:"\uf171"},bitcoin:{code:"\uf379"},bity:{code:"\uf37a"},"black-tie":{code:"\uf27e"},blackberry:{code:"\uf37b"},blender:{code:"\uf517"},"blender-phone":{code:"\uf6b6"},blind:{code:"\uf29d"},blog:{code:"\uf781"},
blogger:{code:"\uf37c"},"blogger-b":{code:"\uf37d"},bluetooth:{code:"\uf293"},"bluetooth-b":{code:"\uf294"},bold:{code:"\uf032"},bolt:{code:"\uf0e7"},bomb:{code:"\uf1e2"},bone:{code:"\uf5d7"},bong:{code:"\uf55c"},book:{code:"\uf02d"},"book-dead":{code:"\uf6b7"},"book-medical":{code:"\uf7e6"},"book-open":{code:"\uf518"},"book-reader":{code:"\uf5da"},bookmark:{code:"\uf02e"},bootstrap:{code:"\uf836"},"border-all":{code:"\uf84c"},"border-none":{code:"\uf850"},"border-style":{code:"\uf853"},"bowling-ball":{code:"\uf436"},
box:{code:"\uf466"},"box-open":{code:"\uf49e"},boxes:{code:"\uf468"},braille:{code:"\uf2a1"},brain:{code:"\uf5dc"},"bread-slice":{code:"\uf7ec"},briefcase:{code:"\uf0b1"},"briefcase-medical":{code:"\uf469"},"broadcast-tower":{code:"\uf519"},broom:{code:"\uf51a"},brush:{code:"\uf55d"},btc:{code:"\uf15a"},buffer:{code:"\uf837"},bug:{code:"\uf188"},building:{code:"\uf1ad"},bullhorn:{code:"\uf0a1"},bullseye:{code:"\uf140"},burn:{code:"\uf46a"},buromobelexperte:{code:"\uf37f"},bus:{code:"\uf207"},"bus-alt":{code:"\uf55e"},
"business-time":{code:"\uf64a"},"buy-n-large":{code:"\uf8a6"},buysellads:{code:"\uf20d"},calculator:{code:"\uf1ec"},calendar:{code:"\uf133"},"calendar-alt":{code:"\uf073"},"calendar-check":{code:"\uf274"},"calendar-day":{code:"\uf783"},"calendar-minus":{code:"\uf272"},"calendar-plus":{code:"\uf271"},"calendar-times":{code:"\uf273"},"calendar-week":{code:"\uf784"},camera:{code:"\uf030"},"camera-retro":{code:"\uf083"},campground:{code:"\uf6bb"},"canadian-maple-leaf":{code:"\uf785"},"candy-cane":{code:"\uf786"},
cannabis:{code:"\uf55f"},capsules:{code:"\uf46b"},car:{code:"\uf1b9"},"car-alt":{code:"\uf5de"},"car-battery":{code:"\uf5df"},"car-crash":{code:"\uf5e1"},"car-side":{code:"\uf5e4"},caravan:{code:"\uf8ff"},"caret-down":{code:"\uf0d7"},"caret-left":{code:"\uf0d9"},"caret-right":{code:"\uf0da"},"caret-square-down":{code:"\uf150"},"caret-square-left":{code:"\uf191"},"caret-square-right":{code:"\uf152"},"caret-square-up":{code:"\uf151"},"caret-up":{code:"\uf0d8"},carrot:{code:"\uf787"},"cart-arrow-down":{code:"\uf218"},
"cart-plus":{code:"\uf217"},"cash-register":{code:"\uf788"},cat:{code:"\uf6be"},"cc-amazon-pay":{code:"\uf42d"},"cc-amex":{code:"\uf1f3"},"cc-apple-pay":{code:"\uf416"},"cc-diners-club":{code:"\uf24c"},"cc-discover":{code:"\uf1f2"},"cc-jcb":{code:"\uf24b"},"cc-mastercard":{code:"\uf1f1"},"cc-paypal":{code:"\uf1f4"},"cc-stripe":{code:"\uf1f5"},"cc-visa":{code:"\uf1f0"},centercode:{code:"\uf380"},centos:{code:"\uf789"},certificate:{code:"\uf0a3"},chair:{code:"\uf6c0"},chalkboard:{code:"\uf51b"},"chalkboard-teacher":{code:"\uf51c"},
"charging-station":{code:"\uf5e7"},"chart-area":{code:"\uf1fe"},"chart-bar":{code:"\uf080"},"chart-line":{code:"\uf201"},"chart-pie":{code:"\uf200"},check:{code:"\uf00c"},"check-circle":{code:"\uf058"},"check-double":{code:"\uf560"},"check-square":{code:"\uf14a"},cheese:{code:"\uf7ef"},chess:{code:"\uf439"},"chess-bishop":{code:"\uf43a"},"chess-board":{code:"\uf43c"},"chess-king":{code:"\uf43f"},"chess-knight":{code:"\uf441"},"chess-pawn":{code:"\uf443"},"chess-queen":{code:"\uf445"},"chess-rook":{code:"\uf447"},
"chevron-circle-down":{code:"\uf13a"},"chevron-circle-left":{code:"\uf137"},"chevron-circle-right":{code:"\uf138"},"chevron-circle-up":{code:"\uf139"},"chevron-down":{code:"\uf078"},"chevron-left":{code:"\uf053"},"chevron-right":{code:"\uf054"},"chevron-up":{code:"\uf077"},child:{code:"\uf1ae"},chrome:{code:"\uf268"},chromecast:{code:"\uf838"},church:{code:"\uf51d"},circle:{code:"\uf111"},"circle-notch":{code:"\uf1ce"},city:{code:"\uf64f"},"clinic-medical":{code:"\uf7f2"},clipboard:{code:"\uf328"},
"clipboard-check":{code:"\uf46c"},"clipboard-list":{code:"\uf46d"},clock:{code:"\uf017"},clone:{code:"\uf24d"},"closed-captioning":{code:"\uf20a"},cloud:{code:"\uf0c2"},"cloud-download-alt":{code:"\uf381"},"cloud-meatball":{code:"\uf73b"},"cloud-moon":{code:"\uf6c3"},"cloud-moon-rain":{code:"\uf73c"},"cloud-rain":{code:"\uf73d"},"cloud-showers-heavy":{code:"\uf740"},"cloud-sun":{code:"\uf6c4"},"cloud-sun-rain":{code:"\uf743"},"cloud-upload-alt":{code:"\uf382"},cloudscale:{code:"\uf383"},cloudsmith:{code:"\uf384"},
cloudversify:{code:"\uf385"},cocktail:{code:"\uf561"},code:{code:"\uf121"},"code-branch":{code:"\uf126"},codepen:{code:"\uf1cb"},codiepie:{code:"\uf284"},coffee:{code:"\uf0f4"},cog:{code:"\uf013"},cogs:{code:"\uf085"},coins:{code:"\uf51e"},columns:{code:"\uf0db"},comment:{code:"\uf075"},"comment-alt":{code:"\uf27a"},"comment-dollar":{code:"\uf651"},"comment-dots":{code:"\uf4ad"},"comment-medical":{code:"\uf7f5"},"comment-slash":{code:"\uf4b3"},comments:{code:"\uf086"},"comments-dollar":{code:"\uf653"},
"compact-disc":{code:"\uf51f"},compass:{code:"\uf14e"},compress:{code:"\uf066"},"compress-alt":{code:"\uf422"},"compress-arrows-alt":{code:"\uf78c"},"concierge-bell":{code:"\uf562"},confluence:{code:"\uf78d"},connectdevelop:{code:"\uf20e"},contao:{code:"\uf26d"},cookie:{code:"\uf563"},"cookie-bite":{code:"\uf564"},copy:{code:"\uf0c5"},copyright:{code:"\uf1f9"},"cotton-bureau":{code:"\uf89e"},couch:{code:"\uf4b8"},cpanel:{code:"\uf388"},"creative-commons":{code:"\uf25e"},"creative-commons-by":{code:"\uf4e7"},
"creative-commons-nc":{code:"\uf4e8"},"creative-commons-nc-eu":{code:"\uf4e9"},"creative-commons-nc-jp":{code:"\uf4ea"},"creative-commons-nd":{code:"\uf4eb"},"creative-commons-pd":{code:"\uf4ec"},"creative-commons-pd-alt":{code:"\uf4ed"},"creative-commons-remix":{code:"\uf4ee"},"creative-commons-sa":{code:"\uf4ef"},"creative-commons-sampling":{code:"\uf4f0"},"creative-commons-sampling-plus":{code:"\uf4f1"},"creative-commons-share":{code:"\uf4f2"},"creative-commons-zero":{code:"\uf4f3"},"credit-card":{code:"\uf09d"},
"critical-role":{code:"\uf6c9"},crop:{code:"\uf125"},"crop-alt":{code:"\uf565"},cross:{code:"\uf654"},crosshairs:{code:"\uf05b"},crow:{code:"\uf520"},crown:{code:"\uf521"},crutch:{code:"\uf7f7"},css3:{code:"\uf13c"},"css3-alt":{code:"\uf38b"},cube:{code:"\uf1b2"},cubes:{code:"\uf1b3"},cut:{code:"\uf0c4"},cuttlefish:{code:"\uf38c"},"d-and-d":{code:"\uf38d"},"d-and-d-beyond":{code:"\uf6ca"},dailymotion:{code:"\uf952"},dashcube:{code:"\uf210"},database:{code:"\uf1c0"},deaf:{code:"\uf2a4"},delicious:{code:"\uf1a5"},
democrat:{code:"\uf747"},deploydog:{code:"\uf38e"},deskpro:{code:"\uf38f"},desktop:{code:"\uf108"},dev:{code:"\uf6cc"},deviantart:{code:"\uf1bd"},dharmachakra:{code:"\uf655"},dhl:{code:"\uf790"},diagnoses:{code:"\uf470"},diaspora:{code:"\uf791"},dice:{code:"\uf522"},"dice-d20":{code:"\uf6cf"},"dice-d6":{code:"\uf6d1"},"dice-five":{code:"\uf523"},"dice-four":{code:"\uf524"},"dice-one":{code:"\uf525"},"dice-six":{code:"\uf526"},"dice-three":{code:"\uf527"},"dice-two":{code:"\uf528"},digg:{code:"\uf1a6"},
"digital-ocean":{code:"\uf391"},"digital-tachograph":{code:"\uf566"},directions:{code:"\uf5eb"},discord:{code:"\uf392"},discourse:{code:"\uf393"},divide:{code:"\uf529"},dizzy:{code:"\uf567"},dna:{code:"\uf471"},dochub:{code:"\uf394"},docker:{code:"\uf395"},dog:{code:"\uf6d3"},"dollar-sign":{code:"\uf155"},dolly:{code:"\uf472"},"dolly-flatbed":{code:"\uf474"},donate:{code:"\uf4b9"},"door-closed":{code:"\uf52a"},"door-open":{code:"\uf52b"},"dot-circle":{code:"\uf192"},dove:{code:"\uf4ba"},download:{code:"\uf019"},
draft2digital:{code:"\uf396"},"drafting-compass":{code:"\uf568"},dragon:{code:"\uf6d5"},"draw-polygon":{code:"\uf5ee"},dribbble:{code:"\uf17d"},"dribbble-square":{code:"\uf397"},dropbox:{code:"\uf16b"},drum:{code:"\uf569"},"drum-steelpan":{code:"\uf56a"},"drumstick-bite":{code:"\uf6d7"},drupal:{code:"\uf1a9"},dumbbell:{code:"\uf44b"},dumpster:{code:"\uf793"},"dumpster-fire":{code:"\uf794"},dungeon:{code:"\uf6d9"},dyalog:{code:"\uf399"},earlybirds:{code:"\uf39a"},ebay:{code:"\uf4f4"},edge:{code:"\uf282"},
edit:{code:"\uf044"},egg:{code:"\uf7fb"},eject:{code:"\uf052"},elementor:{code:"\uf430"},"ellipsis-h":{code:"\uf141"},"ellipsis-v":{code:"\uf142"},ello:{code:"\uf5f1"},ember:{code:"\uf423"},empire:{code:"\uf1d1"},envelope:{code:"\uf0e0"},"envelope-open":{code:"\uf2b6"},"envelope-open-text":{code:"\uf658"},"envelope-square":{code:"\uf199"},envira:{code:"\uf299"},equals:{code:"\uf52c"},eraser:{code:"\uf12d"},erlang:{code:"\uf39d"},ethereum:{code:"\uf42e"},ethernet:{code:"\uf796"},etsy:{code:"\uf2d7"},
"euro-sign":{code:"\uf153"},evernote:{code:"\uf839"},"exchange-alt":{code:"\uf362"},exclamation:{code:"\uf12a"},"exclamation-circle":{code:"\uf06a"},"exclamation-triangle":{code:"\uf071"},expand:{code:"\uf065"},"expand-alt":{code:"\uf424"},"expand-arrows-alt":{code:"\uf31e"},expeditedssl:{code:"\uf23e"},"external-link-alt":{code:"\uf35d"},"external-link-square-alt":{code:"\uf360"},eye:{code:"\uf06e"},"eye-dropper":{code:"\uf1fb"},"eye-slash":{code:"\uf070"},facebook:{code:"\uf09a"},"facebook-f":{code:"\uf39e"},
"facebook-messenger":{code:"\uf39f"},"facebook-square":{code:"\uf082"},fan:{code:"\uf863"},"fantasy-flight-games":{code:"\uf6dc"},"fast-backward":{code:"\uf049"},"fast-forward":{code:"\uf050"},fax:{code:"\uf1ac"},feather:{code:"\uf52d"},"feather-alt":{code:"\uf56b"},fedex:{code:"\uf797"},fedora:{code:"\uf798"},female:{code:"\uf182"},"fighter-jet":{code:"\uf0fb"},figma:{code:"\uf799"},file:{code:"\uf15b"},"file-alt":{code:"\uf15c"},"file-archive":{code:"\uf1c6"},"file-audio":{code:"\uf1c7"},"file-code":{code:"\uf1c9"},
"file-contract":{code:"\uf56c"},"file-csv":{code:"\uf6dd"},"file-download":{code:"\uf56d"},"file-excel":{code:"\uf1c3"},"file-export":{code:"\uf56e"},"file-image":{code:"\uf1c5"},"file-import":{code:"\uf56f"},"file-invoice":{code:"\uf570"},"file-invoice-dollar":{code:"\uf571"},"file-medical":{code:"\uf477"},"file-medical-alt":{code:"\uf478"},"file-pdf":{code:"\uf1c1"},"file-powerpoint":{code:"\uf1c4"},"file-prescription":{code:"\uf572"},"file-signature":{code:"\uf573"},"file-upload":{code:"\uf574"},
"file-video":{code:"\uf1c8"},"file-word":{code:"\uf1c2"},fill:{code:"\uf575"},"fill-drip":{code:"\uf576"},film:{code:"\uf008"},filter:{code:"\uf0b0"},fingerprint:{code:"\uf577"},fire:{code:"\uf06d"},"fire-alt":{code:"\uf7e4"},"fire-extinguisher":{code:"\uf134"},firefox:{code:"\uf269"},"firefox-browser":{code:"\uf907"},"first-aid":{code:"\uf479"},"first-order":{code:"\uf2b0"},"first-order-alt":{code:"\uf50a"},firstdraft:{code:"\uf3a1"},fish:{code:"\uf578"},"fist-raised":{code:"\uf6de"},flag:{code:"\uf024"},
"flag-checkered":{code:"\uf11e"},"flag-usa":{code:"\uf74d"},flask:{code:"\uf0c3"},flickr:{code:"\uf16e"},flipboard:{code:"\uf44d"},flushed:{code:"\uf579"},fly:{code:"\uf417"},folder:{code:"\uf07b"},"folder-minus":{code:"\uf65d"},"folder-open":{code:"\uf07c"},"folder-plus":{code:"\uf65e"},font:{code:"\uf031"},"font-awesome":{code:"\uf2b4"},"font-awesome-alt":{code:"\uf35c"},"font-awesome-flag":{code:"\uf425"},"font-awesome-logo-full":{code:"\uf4e6"},fonticons:{code:"\uf280"},"fonticons-fi":{code:"\uf3a2"},
"football-ball":{code:"\uf44e"},"fort-awesome":{code:"\uf286"},"fort-awesome-alt":{code:"\uf3a3"},forumbee:{code:"\uf211"},forward:{code:"\uf04e"},foursquare:{code:"\uf180"},"free-code-camp":{code:"\uf2c5"},freebsd:{code:"\uf3a4"},frog:{code:"\uf52e"},frown:{code:"\uf119"},"frown-open":{code:"\uf57a"},fulcrum:{code:"\uf50b"},"funnel-dollar":{code:"\uf662"},futbol:{code:"\uf1e3"},"galactic-republic":{code:"\uf50c"},"galactic-senate":{code:"\uf50d"},gamepad:{code:"\uf11b"},"gas-pump":{code:"\uf52f"},
gavel:{code:"\uf0e3"},gem:{code:"\uf3a5"},genderless:{code:"\uf22d"},"get-pocket":{code:"\uf265"},gg:{code:"\uf260"},"gg-circle":{code:"\uf261"},ghost:{code:"\uf6e2"},gift:{code:"\uf06b"},gifts:{code:"\uf79c"},git:{code:"\uf1d3"},"git-alt":{code:"\uf841"},"git-square":{code:"\uf1d2"},github:{code:"\uf09b"},"github-alt":{code:"\uf113"},"github-square":{code:"\uf092"},gitkraken:{code:"\uf3a6"},gitlab:{code:"\uf296"},gitter:{code:"\uf426"},"glass-cheers":{code:"\uf79f"},"glass-martini":{code:"\uf000"},
"glass-martini-alt":{code:"\uf57b"},"glass-whiskey":{code:"\uf7a0"},glasses:{code:"\uf530"},glide:{code:"\uf2a5"},"glide-g":{code:"\uf2a6"},globe:{code:"\uf0ac"},"globe-africa":{code:"\uf57c"},"globe-americas":{code:"\uf57d"},"globe-asia":{code:"\uf57e"},"globe-europe":{code:"\uf7a2"},gofore:{code:"\uf3a7"},"golf-ball":{code:"\uf450"},goodreads:{code:"\uf3a8"},"goodreads-g":{code:"\uf3a9"},google:{code:"\uf1a0"},"google-drive":{code:"\uf3aa"},"google-play":{code:"\uf3ab"},"google-plus":{code:"\uf2b3"},
"google-plus-g":{code:"\uf0d5"},"google-plus-square":{code:"\uf0d4"},"google-wallet":{code:"\uf1ee"},gopuram:{code:"\uf664"},"graduation-cap":{code:"\uf19d"},gratipay:{code:"\uf184"},grav:{code:"\uf2d6"},"greater-than":{code:"\uf531"},"greater-than-equal":{code:"\uf532"},grimace:{code:"\uf57f"},grin:{code:"\uf580"},"grin-alt":{code:"\uf581"},"grin-beam":{code:"\uf582"},"grin-beam-sweat":{code:"\uf583"},"grin-hearts":{code:"\uf584"},"grin-squint":{code:"\uf585"},"grin-squint-tears":{code:"\uf586"},
"grin-stars":{code:"\uf587"},"grin-tears":{code:"\uf588"},"grin-tongue":{code:"\uf589"},"grin-tongue-squint":{code:"\uf58a"},"grin-tongue-wink":{code:"\uf58b"},"grin-wink":{code:"\uf58c"},"grip-horizontal":{code:"\uf58d"},"grip-lines":{code:"\uf7a4"},"grip-lines-vertical":{code:"\uf7a5"},"grip-vertical":{code:"\uf58e"},gripfire:{code:"\uf3ac"},grunt:{code:"\uf3ad"},guitar:{code:"\uf7a6"},gulp:{code:"\uf3ae"},"h-square":{code:"\uf0fd"},"hacker-news":{code:"\uf1d4"},"hacker-news-square":{code:"\uf3af"},
hackerrank:{code:"\uf5f7"},hamburger:{code:"\uf805"},hammer:{code:"\uf6e3"},hamsa:{code:"\uf665"},"hand-holding":{code:"\uf4bd"},"hand-holding-heart":{code:"\uf4be"},"hand-holding-usd":{code:"\uf4c0"},"hand-lizard":{code:"\uf258"},"hand-middle-finger":{code:"\uf806"},"hand-paper":{code:"\uf256"},"hand-peace":{code:"\uf25b"},"hand-point-down":{code:"\uf0a7"},"hand-point-left":{code:"\uf0a5"},"hand-point-right":{code:"\uf0a4"},"hand-point-up":{code:"\uf0a6"},"hand-pointer":{code:"\uf25a"},"hand-rock":{code:"\uf255"},
"hand-scissors":{code:"\uf257"},"hand-spock":{code:"\uf259"},hands:{code:"\uf4c2"},"hands-helping":{code:"\uf4c4"},handshake:{code:"\uf2b5"},hanukiah:{code:"\uf6e6"},"hard-hat":{code:"\uf807"},hashtag:{code:"\uf292"},"hat-cowboy":{code:"\uf8c0"},"hat-cowboy-side":{code:"\uf8c1"},"hat-wizard":{code:"\uf6e8"},hdd:{code:"\uf0a0"},heading:{code:"\uf1dc"},headphones:{code:"\uf025"},"headphones-alt":{code:"\uf58f"},headset:{code:"\uf590"},heart:{code:"\uf004"},"heart-broken":{code:"\uf7a9"},heartbeat:{code:"\uf21e"},
helicopter:{code:"\uf533"},highlighter:{code:"\uf591"},hiking:{code:"\uf6ec"},hippo:{code:"\uf6ed"},hips:{code:"\uf452"},"hire-a-helper":{code:"\uf3b0"},history:{code:"\uf1da"},"hockey-puck":{code:"\uf453"},"holly-berry":{code:"\uf7aa"},home:{code:"\uf015"},hooli:{code:"\uf427"},hornbill:{code:"\uf592"},horse:{code:"\uf6f0"},"horse-head":{code:"\uf7ab"},hospital:{code:"\uf0f8"},"hospital-alt":{code:"\uf47d"},"hospital-symbol":{code:"\uf47e"},"hot-tub":{code:"\uf593"},hotdog:{code:"\uf80f"},hotel:{code:"\uf594"},
hotjar:{code:"\uf3b1"},hourglass:{code:"\uf254"},"hourglass-end":{code:"\uf253"},"hourglass-half":{code:"\uf252"},"hourglass-start":{code:"\uf251"},"house-damage":{code:"\uf6f1"},houzz:{code:"\uf27c"},hryvnia:{code:"\uf6f2"},html5:{code:"\uf13b"},hubspot:{code:"\uf3b2"},"i-cursor":{code:"\uf246"},"ice-cream":{code:"\uf810"},icicles:{code:"\uf7ad"},icons:{code:"\uf86d"},"id-badge":{code:"\uf2c1"},"id-card":{code:"\uf2c2"},"id-card-alt":{code:"\uf47f"},ideal:{code:"\uf913"},igloo:{code:"\uf7ae"},image:{code:"\uf03e"},
images:{code:"\uf302"},imdb:{code:"\uf2d8"},inbox:{code:"\uf01c"},indent:{code:"\uf03c"},industry:{code:"\uf275"},infinity:{code:"\uf534"},info:{code:"\uf129"},"info-circle":{code:"\uf05a"},instagram:{code:"\uf16d"},"instagram-square":{code:"\uf955"},intercom:{code:"\uf7af"},"internet-explorer":{code:"\uf26b"},invision:{code:"\uf7b0"},ioxhost:{code:"\uf208"},italic:{code:"\uf033"},"itch-io":{code:"\uf83a"},itunes:{code:"\uf3b4"},"itunes-note":{code:"\uf3b5"},java:{code:"\uf4e4"},jedi:{code:"\uf669"},
"jedi-order":{code:"\uf50e"},jenkins:{code:"\uf3b6"},jira:{code:"\uf7b1"},joget:{code:"\uf3b7"},joint:{code:"\uf595"},joomla:{code:"\uf1aa"},"journal-whills":{code:"\uf66a"},js:{code:"\uf3b8"},"js-square":{code:"\uf3b9"},jsfiddle:{code:"\uf1cc"},kaaba:{code:"\uf66b"},kaggle:{code:"\uf5fa"},key:{code:"\uf084"},keybase:{code:"\uf4f5"},keyboard:{code:"\uf11c"},keycdn:{code:"\uf3ba"},khanda:{code:"\uf66d"},kickstarter:{code:"\uf3bb"},"kickstarter-k":{code:"\uf3bc"},kiss:{code:"\uf596"},"kiss-beam":{code:"\uf597"},
"kiss-wink-heart":{code:"\uf598"},"kiwi-bird":{code:"\uf535"},korvue:{code:"\uf42f"},landmark:{code:"\uf66f"},language:{code:"\uf1ab"},laptop:{code:"\uf109"},"laptop-code":{code:"\uf5fc"},"laptop-medical":{code:"\uf812"},laravel:{code:"\uf3bd"},lastfm:{code:"\uf202"},"lastfm-square":{code:"\uf203"},laugh:{code:"\uf599"},"laugh-beam":{code:"\uf59a"},"laugh-squint":{code:"\uf59b"},"laugh-wink":{code:"\uf59c"},"layer-group":{code:"\uf5fd"},leaf:{code:"\uf06c"},leanpub:{code:"\uf212"},lemon:{code:"\uf094"},
less:{code:"\uf41d"},"less-than":{code:"\uf536"},"less-than-equal":{code:"\uf537"},"level-down-alt":{code:"\uf3be"},"level-up-alt":{code:"\uf3bf"},"life-ring":{code:"\uf1cd"},lightbulb:{code:"\uf0eb"},line:{code:"\uf3c0"},link:{code:"\uf0c1"},linkedin:{code:"\uf08c"},"linkedin-in":{code:"\uf0e1"},linode:{code:"\uf2b8"},linux:{code:"\uf17c"},"lira-sign":{code:"\uf195"},list:{code:"\uf03a"},"list-alt":{code:"\uf022"},"list-ol":{code:"\uf0cb"},"list-ul":{code:"\uf0ca"},"location-arrow":{code:"\uf124"},
lock:{code:"\uf023"},"lock-open":{code:"\uf3c1"},"long-arrow-alt-down":{code:"\uf309"},"long-arrow-alt-left":{code:"\uf30a"},"long-arrow-alt-right":{code:"\uf30b"},"long-arrow-alt-up":{code:"\uf30c"},"low-vision":{code:"\uf2a8"},"luggage-cart":{code:"\uf59d"},lyft:{code:"\uf3c3"},magento:{code:"\uf3c4"},magic:{code:"\uf0d0"},magnet:{code:"\uf076"},"mail-bulk":{code:"\uf674"},mailchimp:{code:"\uf59e"},male:{code:"\uf183"},mandalorian:{code:"\uf50f"},map:{code:"\uf279"},"map-marked":{code:"\uf59f"},
"map-marked-alt":{code:"\uf5a0"},"map-marker":{code:"\uf041"},"map-marker-alt":{code:"\uf3c5"},"map-pin":{code:"\uf276"},"map-signs":{code:"\uf277"},markdown:{code:"\uf60f"},marker:{code:"\uf5a1"},mars:{code:"\uf222"},"mars-double":{code:"\uf227"},"mars-stroke":{code:"\uf229"},"mars-stroke-h":{code:"\uf22b"},"mars-stroke-v":{code:"\uf22a"},mask:{code:"\uf6fa"},mastodon:{code:"\uf4f6"},maxcdn:{code:"\uf136"},mdb:{code:"\uf8ca"},medal:{code:"\uf5a2"},medapps:{code:"\uf3c6"},medium:{code:"\uf23a"},"medium-m":{code:"\uf3c7"},
medkit:{code:"\uf0fa"},medrt:{code:"\uf3c8"},meetup:{code:"\uf2e0"},megaport:{code:"\uf5a3"},meh:{code:"\uf11a"},"meh-blank":{code:"\uf5a4"},"meh-rolling-eyes":{code:"\uf5a5"},memory:{code:"\uf538"},mendeley:{code:"\uf7b3"},menorah:{code:"\uf676"},mercury:{code:"\uf223"},meteor:{code:"\uf753"},microblog:{code:"\uf91a"},microchip:{code:"\uf2db"},microphone:{code:"\uf130"},"microphone-alt":{code:"\uf3c9"},"microphone-alt-slash":{code:"\uf539"},"microphone-slash":{code:"\uf131"},microscope:{code:"\uf610"},
microsoft:{code:"\uf3ca"},minus:{code:"\uf068"},"minus-circle":{code:"\uf056"},"minus-square":{code:"\uf146"},mitten:{code:"\uf7b5"},mix:{code:"\uf3cb"},mixcloud:{code:"\uf289"},mixer:{code:"\uf956"},mizuni:{code:"\uf3cc"},mobile:{code:"\uf10b"},"mobile-alt":{code:"\uf3cd"},modx:{code:"\uf285"},monero:{code:"\uf3d0"},"money-bill":{code:"\uf0d6"},"money-bill-alt":{code:"\uf3d1"},"money-bill-wave":{code:"\uf53a"},"money-bill-wave-alt":{code:"\uf53b"},"money-check":{code:"\uf53c"},"money-check-alt":{code:"\uf53d"},
monument:{code:"\uf5a6"},moon:{code:"\uf186"},"mortar-pestle":{code:"\uf5a7"},mosque:{code:"\uf678"},motorcycle:{code:"\uf21c"},mountain:{code:"\uf6fc"},mouse:{code:"\uf8cc"},"mouse-pointer":{code:"\uf245"},"mug-hot":{code:"\uf7b6"},music:{code:"\uf001"},napster:{code:"\uf3d2"},neos:{code:"\uf612"},"network-wired":{code:"\uf6ff"},neuter:{code:"\uf22c"},newspaper:{code:"\uf1ea"},nimblr:{code:"\uf5a8"},node:{code:"\uf419"},"node-js":{code:"\uf3d3"},"not-equal":{code:"\uf53e"},"notes-medical":{code:"\uf481"},
npm:{code:"\uf3d4"},ns8:{code:"\uf3d5"},nutritionix:{code:"\uf3d6"},"object-group":{code:"\uf247"},"object-ungroup":{code:"\uf248"},odnoklassniki:{code:"\uf263"},"odnoklassniki-square":{code:"\uf264"},"oil-can":{code:"\uf613"},"old-republic":{code:"\uf510"},om:{code:"\uf679"},opencart:{code:"\uf23d"},openid:{code:"\uf19b"},opera:{code:"\uf26a"},"optin-monster":{code:"\uf23c"},orcid:{code:"\uf8d2"},osi:{code:"\uf41a"},otter:{code:"\uf700"},outdent:{code:"\uf03b"},page4:{code:"\uf3d7"},pagelines:{code:"\uf18c"},
pager:{code:"\uf815"},"paint-brush":{code:"\uf1fc"},"paint-roller":{code:"\uf5aa"},palette:{code:"\uf53f"},palfed:{code:"\uf3d8"},pallet:{code:"\uf482"},"paper-plane":{code:"\uf1d8"},paperclip:{code:"\uf0c6"},"parachute-box":{code:"\uf4cd"},paragraph:{code:"\uf1dd"},parking:{code:"\uf540"},passport:{code:"\uf5ab"},pastafarianism:{code:"\uf67b"},paste:{code:"\uf0ea"},patreon:{code:"\uf3d9"},pause:{code:"\uf04c"},"pause-circle":{code:"\uf28b"},paw:{code:"\uf1b0"},paypal:{code:"\uf1ed"},peace:{code:"\uf67c"},
pen:{code:"\uf304"},"pen-alt":{code:"\uf305"},"pen-fancy":{code:"\uf5ac"},"pen-nib":{code:"\uf5ad"},"pen-square":{code:"\uf14b"},"pencil-alt":{code:"\uf303"},"pencil-ruler":{code:"\uf5ae"},"penny-arcade":{code:"\uf704"},"people-carry":{code:"\uf4ce"},"pepper-hot":{code:"\uf816"},percent:{code:"\uf295"},percentage:{code:"\uf541"},periscope:{code:"\uf3da"},"person-booth":{code:"\uf756"},phabricator:{code:"\uf3db"},"phoenix-framework":{code:"\uf3dc"},"phoenix-squadron":{code:"\uf511"},phone:{code:"\uf095"},
"phone-alt":{code:"\uf879"},"phone-slash":{code:"\uf3dd"},"phone-square":{code:"\uf098"},"phone-square-alt":{code:"\uf87b"},"phone-volume":{code:"\uf2a0"},"photo-video":{code:"\uf87c"},php:{code:"\uf457"},"pied-piper":{code:"\uf2ae"},"pied-piper-alt":{code:"\uf1a8"},"pied-piper-hat":{code:"\uf4e5"},"pied-piper-pp":{code:"\uf1a7"},"pied-piper-square":{code:"\uf91e"},"piggy-bank":{code:"\uf4d3"},pills:{code:"\uf484"},pinterest:{code:"\uf0d2"},"pinterest-p":{code:"\uf231"},"pinterest-square":{code:"\uf0d3"},
"pizza-slice":{code:"\uf818"},"place-of-worship":{code:"\uf67f"},plane:{code:"\uf072"},"plane-arrival":{code:"\uf5af"},"plane-departure":{code:"\uf5b0"},play:{code:"\uf04b"},"play-circle":{code:"\uf144"},playstation:{code:"\uf3df"},plug:{code:"\uf1e6"},plus:{code:"\uf067"},"plus-circle":{code:"\uf055"},"plus-square":{code:"\uf0fe"},podcast:{code:"\uf2ce"},poll:{code:"\uf681"},"poll-h":{code:"\uf682"},poo:{code:"\uf2fe"},"poo-storm":{code:"\uf75a"},poop:{code:"\uf619"},portrait:{code:"\uf3e0"},"pound-sign":{code:"\uf154"},
"power-off":{code:"\uf011"},pray:{code:"\uf683"},"praying-hands":{code:"\uf684"},prescription:{code:"\uf5b1"},"prescription-bottle":{code:"\uf485"},"prescription-bottle-alt":{code:"\uf486"},print:{code:"\uf02f"},procedures:{code:"\uf487"},"product-hunt":{code:"\uf288"},"project-diagram":{code:"\uf542"},pushed:{code:"\uf3e1"},"puzzle-piece":{code:"\uf12e"},python:{code:"\uf3e2"},qq:{code:"\uf1d6"},qrcode:{code:"\uf029"},question:{code:"\uf128"},"question-circle":{code:"\uf059"},quidditch:{code:"\uf458"},
quinscape:{code:"\uf459"},quora:{code:"\uf2c4"},"quote-left":{code:"\uf10d"},"quote-right":{code:"\uf10e"},quran:{code:"\uf687"},"r-project":{code:"\uf4f7"},radiation:{code:"\uf7b9"},"radiation-alt":{code:"\uf7ba"},rainbow:{code:"\uf75b"},random:{code:"\uf074"},"raspberry-pi":{code:"\uf7bb"},ravelry:{code:"\uf2d9"},react:{code:"\uf41b"},reacteurope:{code:"\uf75d"},readme:{code:"\uf4d5"},rebel:{code:"\uf1d0"},receipt:{code:"\uf543"},"record-vinyl":{code:"\uf8d9"},recycle:{code:"\uf1b8"},"red-river":{code:"\uf3e3"},
reddit:{code:"\uf1a1"},"reddit-alien":{code:"\uf281"},"reddit-square":{code:"\uf1a2"},redhat:{code:"\uf7bc"},redo:{code:"\uf01e"},"redo-alt":{code:"\uf2f9"},registered:{code:"\uf25d"},"remove-format":{code:"\uf87d"},renren:{code:"\uf18b"},reply:{code:"\uf3e5"},"reply-all":{code:"\uf122"},replyd:{code:"\uf3e6"},republican:{code:"\uf75e"},researchgate:{code:"\uf4f8"},resolving:{code:"\uf3e7"},restroom:{code:"\uf7bd"},retweet:{code:"\uf079"},rev:{code:"\uf5b2"},ribbon:{code:"\uf4d6"},ring:{code:"\uf70b"},
road:{code:"\uf018"},robot:{code:"\uf544"},rocket:{code:"\uf135"},rocketchat:{code:"\uf3e8"},rockrms:{code:"\uf3e9"},route:{code:"\uf4d7"},rss:{code:"\uf09e"},"rss-square":{code:"\uf143"},"ruble-sign":{code:"\uf158"},ruler:{code:"\uf545"},"ruler-combined":{code:"\uf546"},"ruler-horizontal":{code:"\uf547"},"ruler-vertical":{code:"\uf548"},running:{code:"\uf70c"},"rupee-sign":{code:"\uf156"},"sad-cry":{code:"\uf5b3"},"sad-tear":{code:"\uf5b4"},safari:{code:"\uf267"},salesforce:{code:"\uf83b"},sass:{code:"\uf41e"},
satellite:{code:"\uf7bf"},"satellite-dish":{code:"\uf7c0"},save:{code:"\uf0c7"},schlix:{code:"\uf3ea"},school:{code:"\uf549"},screwdriver:{code:"\uf54a"},scribd:{code:"\uf28a"},scroll:{code:"\uf70e"},"sd-card":{code:"\uf7c2"},search:{code:"\uf002"},"search-dollar":{code:"\uf688"},"search-location":{code:"\uf689"},"search-minus":{code:"\uf010"},"search-plus":{code:"\uf00e"},searchengin:{code:"\uf3eb"},seedling:{code:"\uf4d8"},sellcast:{code:"\uf2da"},sellsy:{code:"\uf213"},server:{code:"\uf233"},servicestack:{code:"\uf3ec"},
shapes:{code:"\uf61f"},share:{code:"\uf064"},"share-alt":{code:"\uf1e0"},"share-alt-square":{code:"\uf1e1"},"share-square":{code:"\uf14d"},"shekel-sign":{code:"\uf20b"},"shield-alt":{code:"\uf3ed"},ship:{code:"\uf21a"},"shipping-fast":{code:"\uf48b"},shirtsinbulk:{code:"\uf214"},"shoe-prints":{code:"\uf54b"},shopify:{code:"\uf957"},"shopping-bag":{code:"\uf290"},"shopping-basket":{code:"\uf291"},"shopping-cart":{code:"\uf07a"},shopware:{code:"\uf5b5"},shower:{code:"\uf2cc"},"shuttle-van":{code:"\uf5b6"},
sign:{code:"\uf4d9"},"sign-in-alt":{code:"\uf2f6"},"sign-language":{code:"\uf2a7"},"sign-out-alt":{code:"\uf2f5"},signal:{code:"\uf012"},signature:{code:"\uf5b7"},"sim-card":{code:"\uf7c4"},simplybuilt:{code:"\uf215"},sistrix:{code:"\uf3ee"},sitemap:{code:"\uf0e8"},sith:{code:"\uf512"},skating:{code:"\uf7c5"},sketch:{code:"\uf7c6"},skiing:{code:"\uf7c9"},"skiing-nordic":{code:"\uf7ca"},skull:{code:"\uf54c"},"skull-crossbones":{code:"\uf714"},skyatlas:{code:"\uf216"},skype:{code:"\uf17e"},slack:{code:"\uf198"},
"slack-hash":{code:"\uf3ef"},slash:{code:"\uf715"},sleigh:{code:"\uf7cc"},"sliders-h":{code:"\uf1de"},slideshare:{code:"\uf1e7"},smile:{code:"\uf118"},"smile-beam":{code:"\uf5b8"},"smile-wink":{code:"\uf4da"},smog:{code:"\uf75f"},smoking:{code:"\uf48d"},"smoking-ban":{code:"\uf54d"},sms:{code:"\uf7cd"},snapchat:{code:"\uf2ab"},"snapchat-ghost":{code:"\uf2ac"},"snapchat-square":{code:"\uf2ad"},snowboarding:{code:"\uf7ce"},snowflake:{code:"\uf2dc"},snowman:{code:"\uf7d0"},snowplow:{code:"\uf7d2"},socks:{code:"\uf696"},
"solar-panel":{code:"\uf5ba"},sort:{code:"\uf0dc"},"sort-alpha-down":{code:"\uf15d"},"sort-alpha-down-alt":{code:"\uf881"},"sort-alpha-up":{code:"\uf15e"},"sort-alpha-up-alt":{code:"\uf882"},"sort-amount-down":{code:"\uf160"},"sort-amount-down-alt":{code:"\uf884"},"sort-amount-up":{code:"\uf161"},"sort-amount-up-alt":{code:"\uf885"},"sort-down":{code:"\uf0dd"},"sort-numeric-down":{code:"\uf162"},"sort-numeric-down-alt":{code:"\uf886"},"sort-numeric-up":{code:"\uf163"},"sort-numeric-up-alt":{code:"\uf887"},
"sort-up":{code:"\uf0de"},soundcloud:{code:"\uf1be"},sourcetree:{code:"\uf7d3"},spa:{code:"\uf5bb"},"space-shuttle":{code:"\uf197"},speakap:{code:"\uf3f3"},"speaker-deck":{code:"\uf83c"},"spell-check":{code:"\uf891"},spider:{code:"\uf717"},spinner:{code:"\uf110"},splotch:{code:"\uf5bc"},spotify:{code:"\uf1bc"},"spray-can":{code:"\uf5bd"},square:{code:"\uf0c8"},"square-full":{code:"\uf45c"},"square-root-alt":{code:"\uf698"},squarespace:{code:"\uf5be"},"stack-exchange":{code:"\uf18d"},"stack-overflow":{code:"\uf16c"},
stackpath:{code:"\uf842"},stamp:{code:"\uf5bf"},star:{code:"\uf005"},"star-and-crescent":{code:"\uf699"},"star-half":{code:"\uf089"},"star-half-alt":{code:"\uf5c0"},"star-of-david":{code:"\uf69a"},"star-of-life":{code:"\uf621"},staylinked:{code:"\uf3f5"},steam:{code:"\uf1b6"},"steam-square":{code:"\uf1b7"},"steam-symbol":{code:"\uf3f6"},"step-backward":{code:"\uf048"},"step-forward":{code:"\uf051"},stethoscope:{code:"\uf0f1"},"sticker-mule":{code:"\uf3f7"},"sticky-note":{code:"\uf249"},stop:{code:"\uf04d"},
"stop-circle":{code:"\uf28d"},stopwatch:{code:"\uf2f2"},store:{code:"\uf54e"},"store-alt":{code:"\uf54f"},strava:{code:"\uf428"},stream:{code:"\uf550"},"street-view":{code:"\uf21d"},strikethrough:{code:"\uf0cc"},stripe:{code:"\uf429"},"stripe-s":{code:"\uf42a"},stroopwafel:{code:"\uf551"},studiovinari:{code:"\uf3f8"},stumbleupon:{code:"\uf1a4"},"stumbleupon-circle":{code:"\uf1a3"},subscript:{code:"\uf12c"},subway:{code:"\uf239"},suitcase:{code:"\uf0f2"},"suitcase-rolling":{code:"\uf5c1"},sun:{code:"\uf185"},
superpowers:{code:"\uf2dd"},superscript:{code:"\uf12b"},supple:{code:"\uf3f9"},surprise:{code:"\uf5c2"},suse:{code:"\uf7d6"},swatchbook:{code:"\uf5c3"},swift:{code:"\uf8e1"},swimmer:{code:"\uf5c4"},"swimming-pool":{code:"\uf5c5"},symfony:{code:"\uf83d"},synagogue:{code:"\uf69b"},sync:{code:"\uf021"},"sync-alt":{code:"\uf2f1"},syringe:{code:"\uf48e"},table:{code:"\uf0ce"},"table-tennis":{code:"\uf45d"},tablet:{code:"\uf10a"},"tablet-alt":{code:"\uf3fa"},tablets:{code:"\uf490"},"tachometer-alt":{code:"\uf3fd"},
tag:{code:"\uf02b"},tags:{code:"\uf02c"},tape:{code:"\uf4db"},tasks:{code:"\uf0ae"},taxi:{code:"\uf1ba"},teamspeak:{code:"\uf4f9"},teeth:{code:"\uf62e"},"teeth-open":{code:"\uf62f"},telegram:{code:"\uf2c6"},"telegram-plane":{code:"\uf3fe"},"temperature-high":{code:"\uf769"},"temperature-low":{code:"\uf76b"},"tencent-weibo":{code:"\uf1d5"},tenge:{code:"\uf7d7"},terminal:{code:"\uf120"},"text-height":{code:"\uf034"},"text-width":{code:"\uf035"},th:{code:"\uf00a"},"th-large":{code:"\uf009"},"th-list":{code:"\uf00b"},
"the-red-yeti":{code:"\uf69d"},"theater-masks":{code:"\uf630"},themeco:{code:"\uf5c6"},themeisle:{code:"\uf2b2"},thermometer:{code:"\uf491"},"thermometer-empty":{code:"\uf2cb"},"thermometer-full":{code:"\uf2c7"},"thermometer-half":{code:"\uf2c9"},"thermometer-quarter":{code:"\uf2ca"},"thermometer-three-quarters":{code:"\uf2c8"},"think-peaks":{code:"\uf731"},"thumbs-down":{code:"\uf165"},"thumbs-up":{code:"\uf164"},thumbtack:{code:"\uf08d"},"ticket-alt":{code:"\uf3ff"},times:{code:"\uf00d"},"times-circle":{code:"\uf057"},
tint:{code:"\uf043"},"tint-slash":{code:"\uf5c7"},tired:{code:"\uf5c8"},"toggle-off":{code:"\uf204"},"toggle-on":{code:"\uf205"},toilet:{code:"\uf7d8"},"toilet-paper":{code:"\uf71e"},toolbox:{code:"\uf552"},tools:{code:"\uf7d9"},tooth:{code:"\uf5c9"},torah:{code:"\uf6a0"},"torii-gate":{code:"\uf6a1"},tractor:{code:"\uf722"},"trade-federation":{code:"\uf513"},trademark:{code:"\uf25c"},"traffic-light":{code:"\uf637"},trailer:{code:"\uf941"},train:{code:"\uf238"},tram:{code:"\uf7da"},transgender:{code:"\uf224"},
"transgender-alt":{code:"\uf225"},trash:{code:"\uf1f8"},"trash-alt":{code:"\uf2ed"},"trash-restore":{code:"\uf829"},"trash-restore-alt":{code:"\uf82a"},tree:{code:"\uf1bb"},trello:{code:"\uf181"},tripadvisor:{code:"\uf262"},trophy:{code:"\uf091"},truck:{code:"\uf0d1"},"truck-loading":{code:"\uf4de"},"truck-monster":{code:"\uf63b"},"truck-moving":{code:"\uf4df"},"truck-pickup":{code:"\uf63c"},tshirt:{code:"\uf553"},tty:{code:"\uf1e4"},tumblr:{code:"\uf173"},"tumblr-square":{code:"\uf174"},tv:{code:"\uf26c"},
twitch:{code:"\uf1e8"},twitter:{code:"\uf099"},"twitter-square":{code:"\uf081"},typo3:{code:"\uf42b"},uber:{code:"\uf402"},ubuntu:{code:"\uf7df"},uikit:{code:"\uf403"},umbraco:{code:"\uf8e8"},umbrella:{code:"\uf0e9"},"umbrella-beach":{code:"\uf5ca"},underline:{code:"\uf0cd"},undo:{code:"\uf0e2"},"undo-alt":{code:"\uf2ea"},uniregistry:{code:"\uf404"},unity:{code:"\uf949"},"universal-access":{code:"\uf29a"},university:{code:"\uf19c"},unlink:{code:"\uf127"},unlock:{code:"\uf09c"},"unlock-alt":{code:"\uf13e"},
untappd:{code:"\uf405"},upload:{code:"\uf093"},ups:{code:"\uf7e0"},usb:{code:"\uf287"},user:{code:"\uf007"},"user-alt":{code:"\uf406"},"user-alt-slash":{code:"\uf4fa"},"user-astronaut":{code:"\uf4fb"},"user-check":{code:"\uf4fc"},"user-circle":{code:"\uf2bd"},"user-clock":{code:"\uf4fd"},"user-cog":{code:"\uf4fe"},"user-edit":{code:"\uf4ff"},"user-friends":{code:"\uf500"},"user-graduate":{code:"\uf501"},"user-injured":{code:"\uf728"},"user-lock":{code:"\uf502"},"user-md":{code:"\uf0f0"},"user-minus":{code:"\uf503"},
"user-ninja":{code:"\uf504"},"user-nurse":{code:"\uf82f"},"user-plus":{code:"\uf234"},"user-secret":{code:"\uf21b"},"user-shield":{code:"\uf505"},"user-slash":{code:"\uf506"},"user-tag":{code:"\uf507"},"user-tie":{code:"\uf508"},"user-times":{code:"\uf235"},users:{code:"\uf0c0"},"users-cog":{code:"\uf509"},usps:{code:"\uf7e1"},ussunnah:{code:"\uf407"},"utensil-spoon":{code:"\uf2e5"},utensils:{code:"\uf2e7"},vaadin:{code:"\uf408"},"vector-square":{code:"\uf5cb"},venus:{code:"\uf221"},"venus-double":{code:"\uf226"},
"venus-mars":{code:"\uf228"},viacoin:{code:"\uf237"},viadeo:{code:"\uf2a9"},"viadeo-square":{code:"\uf2aa"},vial:{code:"\uf492"},vials:{code:"\uf493"},viber:{code:"\uf409"},video:{code:"\uf03d"},"video-slash":{code:"\uf4e2"},vihara:{code:"\uf6a7"},vimeo:{code:"\uf40a"},"vimeo-square":{code:"\uf194"},"vimeo-v":{code:"\uf27d"},vine:{code:"\uf1ca"},vk:{code:"\uf189"},vnv:{code:"\uf40b"},voicemail:{code:"\uf897"},"volleyball-ball":{code:"\uf45f"},"volume-down":{code:"\uf027"},"volume-mute":{code:"\uf6a9"},
"volume-off":{code:"\uf026"},"volume-up":{code:"\uf028"},"vote-yea":{code:"\uf772"},"vr-cardboard":{code:"\uf729"},vuejs:{code:"\uf41f"},walking:{code:"\uf554"},wallet:{code:"\uf555"},warehouse:{code:"\uf494"},water:{code:"\uf773"},"wave-square":{code:"\uf83e"},waze:{code:"\uf83f"},weebly:{code:"\uf5cc"},weibo:{code:"\uf18a"},weight:{code:"\uf496"},"weight-hanging":{code:"\uf5cd"},weixin:{code:"\uf1d7"},whatsapp:{code:"\uf232"},"whatsapp-square":{code:"\uf40c"},wheelchair:{code:"\uf193"},whmcs:{code:"\uf40d"},
wifi:{code:"\uf1eb"},"wikipedia-w":{code:"\uf266"},wind:{code:"\uf72e"},"window-close":{code:"\uf410"},"window-maximize":{code:"\uf2d0"},"window-minimize":{code:"\uf2d1"},"window-restore":{code:"\uf2d2"},windows:{code:"\uf17a"},"wine-bottle":{code:"\uf72f"},"wine-glass":{code:"\uf4e3"},"wine-glass-alt":{code:"\uf5ce"},wix:{code:"\uf5cf"},"wizards-of-the-coast":{code:"\uf730"},"wolf-pack-battalion":{code:"\uf514"},"won-sign":{code:"\uf159"},wordpress:{code:"\uf19a"},"wordpress-simple":{code:"\uf411"},
wpbeginner:{code:"\uf297"},wpexplorer:{code:"\uf2de"},wpforms:{code:"\uf298"},wpressr:{code:"\uf3e4"},wrench:{code:"\uf0ad"},"x-ray":{code:"\uf497"},xbox:{code:"\uf412"},xing:{code:"\uf168"},"xing-square":{code:"\uf169"},"y-combinator":{code:"\uf23b"},yahoo:{code:"\uf19e"},yammer:{code:"\uf840"},yandex:{code:"\uf413"},"yandex-international":{code:"\uf414"},yarn:{code:"\uf7e3"},yelp:{code:"\uf1e9"},"yen-sign":{code:"\uf157"},"yin-yang":{code:"\uf6ad"},yoast:{code:"\uf2b1"},youtube:{code:"\uf167"},
"youtube-square":{code:"\uf431"},zhihu:{code:"\uf63f"}});eq.Icons=ZH;eq.Icons=ZH;eq.Icons=ZH;var he=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js");he.vdom=oD;he.promise=yg;he.arr=vf;he.tree=Hr;he.obj=Pf;he.string=vh;he.addOrChangeCSSDeclaration=ne;he.addOrChangeLinkedCSS=js;he.defaultStyle=Zt;he.renderGradient=$t;he.defaultAttributes=Av;he.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
he.pathAttributes=pz;he.svgAttributes=oz;he.renderMorph=kx;he.Transform=Gj;he.pt=oh;he.getSvgVertices=Yt;he.config=wk;var $H=he.vdom;he.h=$H.h;he.diff=$H.diff;he.patch=$H.patch;he.createNode=$H.create;he.svgNs="http://www.w3.org/2000/svg";he.InitStroke=function(d,h,n){this.path=d;this.renderer=h;this.reverse=n};he.InitStroke.prototype.hook=function(d,h,n){h=this.path.drawnProportion||0;0!=h&&(d.setAttribute("stroke-width",this.path.borderWidth.valueOf()+1),d.setAttribute("stroke-dasharray",d.getTotalLength()),
d.setAttribute("stroke-dashoffset",d.getTotalLength()*(this.reverse?1-h:-1+(1-h))))};var aI=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js"),n=h.hasOwnProperty("Renderer")&&"function"===typeof h.Renderer?h.Renderer:h.Renderer=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m){if(!b||!b.isMorph)throw Error("Trying to initialize renderer with an invalid world morph: "+
b);if(!(e&&"nodeType"in e))throw Error("Trying to initialize renderer with an invalid root node: "+e);m||(m={window:System.global,document:e.ownerDocument});this.worldMorph=b;b._renderer=this;this.rootNode=e;this.domNode=null;this.domEnvironment=m;this.renderMap=new WeakMap;this.fixedMorphNodeMap=new Map;this.renderWorldLoopLater=this.renderWorldLoopProcess=null;this.requestAnimationFrame=m.window.requestAnimationFrame.bind(m.window)}},{key:"clear",value:function(){var b=this,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return e=
b.domNode,a.setCatchFinallyBlocks(2),a.yield(b.stopRenderWorldLoop(),4);case 4:a.leaveTryBlock(3);break;case 2:a.enterCatchBlock();case 3:e&&(m=e.parentNode,m.removeChild(e),[].concat($jscomp.arrayFromIterable(b.fixedMorphNodeMap.values())).forEach(function(g){return m.removeChild(g)})),b.domNode=null,b.renderMap=new WeakMap,a.jumpToEnd()}})}},{key:"ensureDefaultCSS",value:function(){var b=this;return he.promise.waitFor(3E3,function(){return b.domNode.ownerDocument}).then(function(e){return Promise.all([he.addOrChangeCSSDeclaration("lively-morphic-css",
he.defaultCSS,e),he.addOrChangeLinkedCSS("lively-ibm-plex",he.config.css.ibmPlex),he.addOrChangeLinkedCSS("lively-font-awesome",he.config.css.fontAwesome,e,!1),he.addOrChangeLinkedCSS("lively-font-inconsolata",he.config.css.inconsolata,e,!1)])})}},{key:"startRenderWorldLoop",value:function(){var b=this;this._stopped=!1;this._renderWorldLoopLater=null;this.renderWorldLoopProcess=this.requestAnimationFrame(function(){return b.startRenderWorldLoop()});return this.renderStep()}},{key:"stopRenderWorldLoop",
value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){b._stopped=!0;b.domEnvironment.window.cancelAnimationFrame(b.renderWorldLoopProcess);b.renderWorldLoopProcess=null;b.domEnvironment.window.cancelAnimationFrame(b.renderWorldLoopLater);b.renderWorldLoopLater=null;return e.yield(he.promise.waitFor(2E3,function(){return!b.worldMorph.needsRerender()}),0)})}},{key:"renderLater",value:function(b){var e=this;this.renderWorldLoopLaterCounter=void 0===b?10:b;this.renderWorldLoopLater||
this._stopped||(this.renderWorldLoopLater=this.requestAnimationFrame(function(){e.renderWorldLoopLater=null;0<e.renderWorldLoopLaterCounter&&e.renderLater(e.renderWorldLoopLaterCounter-1);try{e.renderStep()}catch(m){console.error("Error rendering morphs:",m)}}))}},{key:"renderStep",value:function(){this.worldMorph.renderAsRoot(this);return this}},{key:"getNodeForMorph",value:function(b){var e="#"+he.string.regExpEscape(b.id),m=this.domNode&&this.domNode.querySelector(e);this.domNode&&this.domNode.id==
b.id&&(m=this.domNode);if(m)return m;b=$jscomp.makeIterator(this.fixedMorphNodeMap.values());for(m=b.next();!m.done;m=b.next())if(m=m.value.querySelector(e))return m;return null}},{key:"getMorphForNode",value:function(b){return this.worldMorph?this.worldMorph.withAllSubmorphsDetect(function(e){return e.id===b.id}):null}},{key:"render",value:function(b){if(!b.needsRerender()){var e=this.renderMap.get(b);if(e)return e}b.aboutToRender(this);e=b.render(this);this.renderMap.set(b,e);return e}},{key:"renderAsFixed",
value:function(b){b=this.render(b);b.properties.style.position="fixed";return b}},{key:"renderFixedMorphs",value:function(b,e){e=this.domNode;var m=this.fixedMorphNodeMap;if((b.length||m.size)&&e&&e.parentNode){e=e.parentNode;for(var a=$jscomp.makeIterator(m),g=a.next();!g.done;g=a.next()){var l=$jscomp.makeIterator(g.value);g=l.next().value;l=l.next().value;b.includes(g)||(l.parentNode.removeChild(l),m.delete(g))}a=b.map(function(u){return m.get(u)});var q=a.map(function(u){return u&&u.id});g=[].concat($jscomp.arrayFromIterable(e.children)).map(function(u){return u.id}).filter(function(u){return q.includes(u)});
he.arr.equals(q,g)||a.map(function(u){return u&&u.parentNode&&u.parentNode.removeChild(u)});b=$jscomp.makeIterator(b);for(a=b.next();!a.done;a=b.next()){a=a.value;g=this.renderMap.get(a)||this.renderAsFixed(a);l=this.renderAsFixed(a);l=he.diff(g,l);var r=m.get(a);r||(r=he.createNode(g,this.domEnvironment),m.set(a,r));r.parentNode||e.appendChild(r);he.patch(r,l)}}}},{key:"renderMorph",value:function(b){var e=this.renderSubmorphs(b);return he.h("div",Object.assign({},he.defaultAttributes(b,this),{style:he.defaultStyle(b)}),
e)}},{key:"renderSubmorphs",value:function(b){return this.renderSelectedSubmorphs(b,b.submorphs)}},{key:"renderSelectedSubmorphs",value:function(b,e){var m=b.borderWidthLeft,a=b.borderWidthTop,g=b.origin,l=g.x;g=g.y;for(var q=e.length-1,r=Array(q+1);0<=q;q--)e[q].__stackIdx__=q,r[q]=this.render(e[q]);e={};return he.h("div",{style:Object.assign({position:"absolute",left:l-(b.isPath?0:m)+"px",top:g-(b.isPath?0:a)+"px"},b.isPolygon?Object.assign({height:"100%",width:"100%",overflow:b.clipMode},"visible"!==
b.clipMode?(e[navigator.userAgent.includes("AppleWebKit")?"-webkit-clip-path":"clip-path"]="url(#clipPath"+b.id+")",e):{}):{})},r)}},{key:"renderWorld",value:function(b){for(var e=b.submorphs,m=[],a=[],g=0;g<e.length;g++){var l=e[g];l.hasFixedPosition?a.push(l):m.push(l)}e=this.renderSelectedSubmorphs(b,m);b=he.h("div",Object.assign({},he.defaultAttributes(b,this),{style:he.defaultStyle(b)}),e);b.fixedMorphs=a;return b}},{key:"renderImage",value:function(b){var e=b.imageUrl;if(e.startsWith("data:")){var m=
e.indexOf(","),a=e.substring(5,m),g=$jscomp.makeIterator(a.split(";"));a=g.next().value;g=g.next().value;m=e.substring(m+1);"base64"!==g&&(e=he.string.createDataURI(m,a))}return he.h("div",Object.assign({},he.defaultAttributes(b,this),{style:he.defaultStyle(b)}),[he.h("img",{src:e,alt:b.tooltip||"",draggable:!1,style:{"pointer-events":"none",position:"absolute",left:0,width:"100%",height:"100%"}}),this.renderSubmorphs(b)])}},{key:"renderCanvas",value:function(b){var e=function(){};e.prototype.hook=
function(m,a,g){b.afterRender(m,b._canvas!==m)};return he.h("div",Object.assign({},he.defaultAttributes(b,this),{style:he.defaultStyle(b)}),[he.h("canvas",{width:b.width,height:b.height,style:{"pointer-events":"none",position:"absolute"},canvasHook:new e}),this.renderSubmorphs(b)])}},{key:"renderCheckBox",value:function(b){return he.h("div",Object.assign({},he.defaultAttributes(b,this),{style:he.defaultStyle(b)}),[he.h("input",{type:"checkbox",checked:b.checked,disabled:!b.active,draggable:!1,style:{"pointer-events":"none",
width:"15px",height:"15px",position:"absolute"}}),this.renderSubmorphs(b)])}},{key:"renderPath",value:function(b){var e=b.startMarker,m=b.endMarker,a=b.showControlPoints,g=he.getSvgVertices(b.vertices),l=he.h("path",Object.assign({namespace:he.svgNs,id:"svg"+b.id},he.pathAttributes(b))),q=he.h("mask",{namespace:he.svgNs,id:"mask"+b.id},[he.h("rect",{namespace:he.svgNs,attributes:{fill:"white",x:0,y:0,width:b.width+20,height:b.height+20}}),he.h("path",{namespace:he.svgNs,initStroke:new he.InitStroke(b,
this,!0),attributes:{d:g,stroke:"black",fill:"none"}}),he.h("path",{namespace:he.svgNs,initStroke:new he.InitStroke(b,this,!1),attributes:{d:g,stroke:"white",fill:"none"}})]);g=[he.h("clipPath",{namespace:he.svgNs,id:"clipPath"+b.id},he.h("path",{namespace:he.svgNs,attributes:{d:g,fill:"white"}})),q];e&&(e.id||(e.id="start-marker"),l.properties.attributes["marker-start"]="url(#"+b.id+"-"+e.id+")",g=[],g.push(this._renderPath_Marker(b,e)));m&&(m.id||(m.id="end-marker"),l.properties.attributes["marker-end"]=
"url(#"+b.id+"-"+m.id+")",g||(g=[]),g.push(this._renderPath_Marker(b,m)));var r;a&&(r=he.h("g",{namespace:he.svgNs},this._renderPath_ControlPoints(b)));return this.renderSvgMorph(b,l,g,r)}},{key:"_renderPath_ControlPoints",value:function(b,e){function m(K,J,P,ea,ra,D){var O=ea?12:Math.min(8,Math.max(3,l));P="path-point path-point-"+P;ea=ea?"orange":q;"string"===typeof ra&&(P+="-"+ra);D&&(O=Math.max(3,Math.ceil(O/2)));return D?he.h("circle",{namespace:he.svgNs,style:{fill:"white","stroke-width":2,
stroke:ea},attributes:{class:P,cx:K,cy:J,r:O}}):he.h("circle",{namespace:he.svgNs,style:{fill:ea},attributes:{class:P,cx:K,cy:J,r:O}})}var a=b.vertices;e=b.borderWidth;var g=b.showControlPoints;b=b._controlPointDrag;var l=0==e?6:e+2,q="red";e=[];if("object"===typeof g){var r=g.radius;(g=g.fill)&&(q=String(g));"number"===typeof r&&(l=r)}if(a.length){g=0;var u=a[0];r=u.x;var v=u.y;u=u.controlPoints.next;var y=b&&b.maybeMerge&&b.maybeMerge.includes(g);e.push(m(r,v,g,y));for(g=1;g<a.length-1;g++){var z=
a[g];y=z.isSmooth;var A=z.x,B=z.y,G=z.controlPoints;z=G.previous;G=G.next;var E=b&&b.maybeMerge&&b.maybeMerge.includes(g);y?e.push(m(A,B,g,E),m(r+u.x,v+u.y,g-1,!1,"control-2",!0),m(A+z.x,B+z.y,g,!1,"control-1",!0)):e.push(m(A,B,g,E));r=A;v=B;u=G}B=a[a.length-1];a=B.isSmooth;y=B.x;A=B.y;B=B.controlPoints.previous;b=b&&b.maybeMerge&&b.maybeMerge.includes(g);a?e.push(m(y,A,g,b),m(r+u.x,v+u.y,g-1,!1,"control-2",!0),m(y+B.x,A+B.y,g,!1,"control-1",!0)):e.push(m(y,A,g,b))}return e}},{key:"_renderPath_Marker",
value:function(b,e){function m(a){var g=a.tagName,l=a.id,q=a.children,r=a.style;q=q?q.map(m):void 0;l&&(l=b.id+"-"+l);return he.h(g,{namespace:he.svgNs,id:l,style:r,attributes:he.obj.dissoc(a,["tagName","id","children","style"])},q)}return m(e)}},{key:"renderSvgMorph",value:function(b,e,m,a){a=void 0===a?[]:a;var g=he.svgAttributes(b),l=b.innerBounds(),q=l.width;l=l.height;var r,u=[];b.fill&&b.fill.isGradient&&(r||(r=[]),r.push(he.renderGradient("fill"+b.id,b.extent,b.fill)));b.borderColor&&b.borderColor.valueOf().isGradient&&
(r||(r=[]),r.push(he.renderGradient("borderColor"+b.id,b.extent,b.borderColor)));m&&m.length&&(r||(r=[]),r.push.apply(r,$jscomp.arrayFromIterable(m)));u.push(e);r&&u.push(he.h("defs",{namespace:he.svgNs},r));e=he.obj.select(he.defaultStyle(b),"position filter display opacity transform top left transformOrigin cursor overflow".split(" "));return he.h("div",Object.assign({},he.defaultAttributes(b,this),{style:Object.assign({},e,{width:q+"px",height:l+"px","pointer-events":b.reactsToPointer?"auto":"none"})}),
[he.h("svg",Object.assign({namespace:he.svgNs,version:"1.1",style:{position:"absolute","stroke-linejoin":b.cornerStyle||"mint","stroke-linecap":b.endStyle||"round",overflow:"visible"}},g),u),this.renderSubmorphs(b),he.h("svg",Object.assign({namespace:he.svgNs,version:"1.1",style:{position:"absolute",overflow:"visible"}},g),a)])}},{key:"renderPreview",value:function(b,e){var m=void 0===e.center?!0:e.center,a=void 0===e.ignoreMorphs?[]:e.ignoreMorphs,g=void 0===e.asNode?!1:e.asNode,l=b.origin,q=b.rotation,
r=void 0===e.width?100:e.width;e=void 0===e.height?100:e.height;var u=Math.max(.1,1/b.scale);u=(new he.Transform(b.position.negated(),0,he.pt(u,u))).transformRectToRect(b.bounds());var v=Math.max(.1,Math.min(r/u.width,e/u.height));l=new he.Transform(u.topLeft().negated().scaleBy(v).subPt(l),q,he.pt(v,v));q=(q=this.getNodeForMorph(b))?q.cloneNode(!0):he.renderMorph(b);m&&(b=l.transformRectToRect(b.extent.extentAsRectangle()),l=l.preConcatenate(new he.Transform(he.pt(b.width<r?(r-b.width)/2:0,b.height<
e?(e-b.height)/2:0))));q.style.transform=l.toCSSTransformString();q.style.pointerEvents="";he.tree.prewalk(q,function(y){if("string"===typeof y.className){var z=y.className.split(" ").map(function(A){return A.trim()}).filter(Boolean);z.includes("Morph")&&(y.className=he.arr.withoutAll(z,["morph","Morph"]).join(" "),a.find(function(A){return A.id===y.id})&&y.remove(),y.id="")}},function(y){return Array.from(y.childNodes)});return g?q:q.outerHTML}}],[{key:"className",get:function(){return"Renderer"}},
{key:"default",value:function(){return this._default||new this}}],h,{pathInPackage:function(){return"rendering/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1125,end:20109})}(void 0);he.Renderer=aI;he.Renderer=aI;he.Renderer=aI;var FA=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),T1=
function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),n=h.hasOwnProperty("FontDetector")&&"function"===typeof h.FontDetector?h.FontDetector:h.FontDetector=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.document=b;this.prepared=!1;this.defaultWidth={};this.defaultHeight={};this.possibleFontWeights=
"normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ");this.namedToNumeric=new Map("Thin;Extra Light;Light;Normal;Medium;Semi Bold;Bold;Extra Bold;Ultra Bold".split(";").map(function(e,m){return[e,String(100*(m+1))]}));this.baseFonts=["monospace","sans-serif","serif","Comic Sans MS"];this.span=null}},{key:"prepare",value:function(){var b=this.defaultWidth,e=this.defaultHeight,m=this.possibleFontWeights,a=this.baseFonts,g=this.document.getElementsByTagName("body")[0],l=this.span||
this.document.createElement("span");l.style.fontSize="72px";l.style.opacity=0;l.innerHTML="mmmmmmmmmmlli";if(!l.parentNode){var q=this.document.createElement("div");q.style.position="absolute";q.style.width="100%";q.style.overflow="hidden";q.style["pointer-events"]="none";q.style["-webkit-user-select"]="none";q.appendChild(l);g.appendChild(q)}for(var r in m)for(var u in a)l.style.fontFamily=a[u],l.style.fontWeight=m[r],b[a[u]+"@"+m[r]]=l.offsetWidth,e[a[u]+"@"+m[r]]=l.offsetHeight;this.span=l;this.prepared=
!0}},{key:"isFontSupported",value:function(b,e){e=void 0===e?"normal":e;this.possibleFontWeights.includes(e)||(e=this.namedToNumeric.get(e)||"normal");this.prepared||this.prepare();var m=this.defaultWidth,a=this.defaultHeight,g=this.baseFonts,l=this.span,q=this.document.body;l.parentNode||q.appendChild(l);for(var r in g)if(l.style.fontWeight=e,l.style.fontFamily=b+","+g[r],l.offsetWidth!=m[g[r]+"@"+e]||l.offsetHeight!=a[g[r]+"@"+e])return!0;return!1}}],[{key:"className",get:function(){return"FontDetector"}},
{key:"fonts",get:function(){return FA.fonts}}],h,{pathInPackage:function(){return"rendering/font-detector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:15,end:3672})}(void 0),jfa=T1=FA.FontDetector,EO=[{name:"serif",type:"default"},{name:"sans-serif",type:"default"},{name:"monospace",type:"default"},{name:"Adobe Jenson",type:"serif"},
{name:"Albertus",type:"serif"},{name:"Aldus",type:"serif"},{name:"Alexandria",type:"serif"},{name:"Algerian",type:"serif"},{name:"American Typewriter",type:"serif"},{name:"Antiqua",type:"serif"},{name:"Arno",type:"serif"},{name:"Aster",type:"serif"},{name:"Aurora",type:"serif"},{name:"News 706",type:"serif"},{name:"Baskerville",type:"serif"},{name:"Bell",type:"serif"},{name:"Belwe Roman",type:"serif"},{name:"Bembo",type:"serif"},{name:"Berkeley Old Style",type:"serif"},{name:"Bernhard Modern",type:"serif"},
{name:"Bodoni",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Bookman",type:"serif"},{name:"Bulmer",type:"serif"},{name:"Caledonia",type:"serif"},{name:"Californian FB",type:"serif"},{name:"Calisto MT",type:"serif"},{name:"Cambria",type:"serif"},{name:"Capitals",type:"serif"},{name:"Cartier",type:"serif"},{name:"Caslon",type:"serif"},{name:"Wyld",type:"serif"},{name:"Caslon Antique / Fifteenth Century",type:"serif"},{name:"Catull",type:"serif"},{name:"Centaur",type:"serif"},{name:"Century Old Style",
type:"serif"},{name:"Century Schoolbook",type:"serif"},{name:"New Century Schoolbook",type:"serif"},{name:"Century Schoolbook Infant",type:"serif"},{name:"Charis SIL",type:"serif"},{name:"Charter (typeface)",type:"serif"},{name:"Cheltenham",type:"serif"},{name:"Clearface",type:"serif"},{name:"Cochin",type:"serif"},{name:"Colonna",type:"serif"},{name:"Computer Modern",type:"serif"},{name:"Concrete Roman",type:"serif"},{name:"Constantia",type:"serif"},{name:"Cooper Black",type:"serif"},{name:"Copperplate Gothic",
type:"serif"},{name:"Corona",type:"serif"},{name:"News 705",type:"serif"},{name:"DejaVu Serif",type:"serif"},{name:"Didot",type:"serif"},{name:"Droid Serif",type:"serif"},{name:"Elephant",type:"serif"},{name:"Emerson",type:"serif"},{name:"Excelsior",type:"serif"},{name:"News 702",type:"serif"},{name:"Fairfield",type:"serif"},{name:"FF Scala",type:"serif"},{name:"Footlight",type:"serif"},{name:"FreeSerif",type:"serif"},{name:"Friz Quadrata",type:"serif"},{name:"Garamond",type:"serif"},{name:"Gentium",
type:"serif"},{name:"Georgia",type:"serif"},{name:"Gloucester",type:"serif"},{name:"Goudy",type:"serif"},{name:"Granjon",type:"serif"},{name:"High Tower Text",type:"serif"},{name:"Hoefler Text",type:"serif"},{name:"Imprint",type:"serif"},{name:"Ionic No. 5",type:"serif"},{name:"News 701",type:"serif"},{name:"ITC Benguiat",type:"serif"},{name:"Janson",type:"serif"},{name:"Jokerman",type:"serif"},{name:"Joanna",type:"serif"},{name:"Korinna",type:"serif"},{name:"Lexicon",type:"serif"},{name:"Liberation Serif",
type:"serif"},{name:"Linux Libertine",type:"serif"},{name:"Literaturnaya",type:"serif"},{name:"Lucida Bright",type:"serif"},{name:"Melior",type:"serif"},{name:"Memphis",type:"serif"},{name:"Miller",type:"serif"},{name:"Minion",type:"serif"},{name:"Modern",type:"serif"},{name:"Mona Lisa",type:"serif"},{name:"Mrs Eaves",type:"serif"},{name:"MS Serif",type:"serif"},{name:"New York",type:"serif"},{name:"Nimbus Roman",type:"serif"},{name:"NPS Rawlinson Roadway",type:"serif"},{name:"OCR A Extended",type:"serif"},
{name:"Palatino",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Perpetua",type:"serif"},{name:"Plantin",type:"serif"},{name:"Playbill",type:"serif"},{name:"Primer",type:"serif"},{name:"Renault",type:"serif"},{name:"Requiem",type:"serif"},{name:"Rotis Serif",type:"serif"},{name:"Sabon",type:"serif"},{name:"Sistina",type:"serif"},{name:"Souvenir",type:"serif"},{name:"XITS",type:"serif"},{name:"Sylfaen",type:"serif"},{name:"Times New Roman",type:"serif"},{name:"Times",type:"serif"},{name:"Torino",
type:"serif"},{name:"Trajan",type:"serif"},{name:"Trinit\u00e9",type:"serif"},{name:"Trump Mediaeval",type:"serif"},{name:"Utopia",type:"serif"},{name:"Vera Serif",type:"serif"},{name:"Wide Latin",type:"serif"},{name:"Windsor",type:"serif"},{name:"XITS",type:"serif"},{name:"Playfair Display",type:"serif",isGoogleFont:!0},{name:"Cormorant",type:"serif",isGoogleFont:!0},{name:"Eczar",type:"serif",isGoogleFont:!0},{name:"Alegreya",type:"serif",isGoogleFont:!0},{name:"Lora",type:"serif",isGoogleFont:!0},
{name:"Source Serif Pro",type:"serif",isGoogleFont:!0},{name:"Roboto Slab",type:"serif",isGoogleFont:!0},{name:"BioRhyme",type:"serif",isGoogleFont:!0},{name:"Libre Baskerville",type:"serif",isGoogleFont:!0},{name:"Crimson Text",type:"serif",isGoogleFont:!0},{name:"Old Standard TT",type:"serif",isGoogleFont:!0},{name:"Domine",type:"serif",isGoogleFont:!0},{name:"Bitter",type:"serif",isGoogleFont:!0},{name:"Gentium Basic",type:"serif",isGoogleFont:!0},{name:"PT Serif",type:"serif",isGoogleFont:!0},
{name:"Cardo",type:"serif",isGoogleFont:!0},{name:"Neuton",type:"serif",isGoogleFont:!0},{name:"Arvo",type:"serif",isGoogleFont:!0},{name:"Merriweather",type:"serif",isGoogleFont:!0},{name:"Alexandria",type:"slab serif"},{name:"American Typewriter",type:"slab serif"},{name:"Archer",type:"slab serif"},{name:"Athens",type:"slab serif"},{name:"Candida",type:"slab serif"},{name:"Cholla Slab",type:"slab serif"},{name:"City",type:"slab serif"},{name:"Clarendon",type:"slab serif"},{name:"Concrete Roman",
type:"slab serif"},{name:"Courier",type:"slab serif"},{name:"Egyptienne",type:"slab serif"},{name:"Guardian Egyptian",type:"slab serif"},{name:"Ionic No. 5",type:"slab serif"},{name:"Lexia",type:"slab serif"},{name:"Memphis",type:"slab serif"},{name:"Nilland",type:"slab serif"},{name:"Roboto Slab",type:"slab serif"},{name:"Rockwell",type:"slab serif"},{name:"Schadow",type:"slab serif"},{name:"Serifa",type:"slab serif"},{name:"Skeleton Antique",type:"slab serif"},{name:"Sreda",type:"slab serif"},{name:"Swift",
type:"slab serif"},{name:"Tower",type:"slab serif"},{name:"Agency FB",type:"sans-serif"},{name:"Akzidenz-Grotesk",type:"sans-serif"},{name:"Andal\u00e9 Sans",type:"sans-serif"},{name:"Antique Olive",type:"sans-serif"},{name:"Arial",type:"sans-serif"},{name:"Arial Unicode MS",type:"sans-serif"},{name:"Avant Garde Gothic",type:"sans-serif"},{name:"Avenir",type:"sans-serif"},{name:"Bank Gothic",type:"sans-serif"},{name:"Bauhaus",type:"sans-serif"},{name:"Bell Centennial",type:"sans-serif"},{name:"Bell Gothic",
type:"sans-serif"},{name:"Benguiat Gothic",type:"sans-serif"},{name:"Berlin Sans",type:"sans-serif"},{name:"Brandon Grotesque",type:"sans-serif"},{name:"Calibri",type:"sans-serif"},{name:"Casey",type:"sans-serif"},{name:"Century Gothic",type:"sans-serif"},{name:"Charcoal",type:"sans-serif"},{name:"Chicago",type:"sans-serif"},{name:"Clearview",type:"sans-serif"},{name:"Comic Sans",type:"sans-serif"},{name:"Compacta",type:"sans-serif"},{name:"Corbel",type:"sans-serif"},{name:"DejaVu Sans",type:"sans-serif"},
{name:"DIN",type:"sans-serif"},{name:"Dotum",type:"sans-serif"},{name:"Droid Sans",type:"sans-serif"},{name:"Dyslexie",type:"sans-serif"},{name:"Ecofont",type:"sans-serif"},{name:"Eras",type:"sans-serif"},{name:"Esseltub",type:"sans-serif"},{name:"Espy Sans",type:"sans-serif"},{name:"Eurocrat",type:"sans-serif"},{name:"Eurostile",type:"sans-serif"},{name:"Square 721",type:"sans-serif"},{name:"FF Dax",type:"sans-serif"},{name:"FF Meta",type:"sans-serif"},{name:"FF Scala Sans",type:"sans-serif"},{name:"Fira Sans",
type:"sans-serif"},{name:"Folio",type:"sans-serif"},{name:"Franklin Gothic",type:"sans-serif"},{name:"FreeSans",type:"sans-serif"},{name:"Frutiger",type:"sans-serif"},{name:"Futura",type:"sans-serif"},{name:"Geneva",type:"sans-serif"},{name:"Gill Sans",type:"sans-serif"},{name:"Gill Sans Schoolbook",type:"sans-serif"},{name:"Gotham",type:"sans-serif"},{name:"Haettenschweiler",type:"sans-serif"},{name:"Handel Gothic",type:"sans-serif"},{name:"Hei",type:"sans-serif"},{name:"Helvetica",type:"sans-serif"},
{name:"Helvetica Neue",type:"sans-serif"},{name:"Swiss 721",type:"sans-serif"},{name:"Highway Gothic",type:"sans-serif"},{name:"Hobo",type:"sans-serif"},{name:"Impact",type:"sans-serif"},{name:"Industria",type:"sans-serif"},{name:"Interstate",type:"sans-serif"},{name:"Johnston/New Johnston",type:"sans-serif"},{name:"Kabel",type:"sans-serif"},{name:"Klavika",type:"sans-serif"},{name:"Lexia Readable",type:"sans-serif"},{name:"Liberation Sans",type:"sans-serif"},{name:"Linux Biolinum",type:"sans-serif"},
{name:"Lucida Sans",type:"sans-serif"},{name:"Lucida Grande",type:"sans-serif"},{name:"Lucida Sans Unicode",type:"sans-serif"},{name:"Lydian",type:"sans-serif"},{name:"Meiryo",type:"sans-serif"},{name:"Meta",type:"sans-serif"},{name:"Microgramma",type:"sans-serif"},{name:"Modern",type:"sans-serif"},{name:"Motorway",type:"sans-serif"},{name:"Arial",type:"sans-serif"},{name:"Myriad",type:"sans-serif"},{name:"Neutraface",type:"sans-serif"},{name:"Neuzeit S",type:"sans-serif"},{name:"News Gothic",type:"sans-serif"},
{name:"Nimbus Sans L",type:"sans-serif"},{name:"Open Sans",type:"sans-serif"},{name:"Optima",type:"sans-serif"},{name:"Paris",type:"sans-serif"},{name:"Product Sans",type:"sans-serif"},{name:"Proxima Nova",type:"sans-serif"},{name:"Russian Federation",type:"sans-serif"},{name:"Rail Alphabet",type:"sans-serif"},{name:"Roboto",type:"sans-serif"},{name:"Rotis Sans",type:"sans-serif"},{name:"Segoe UI",type:"sans-serif"},{name:"Skia",type:"sans-serif"},{name:"Source Sans Pro",type:"sans-serif"},{name:"Sweden Sans",
type:"sans-serif"},{name:"Syntax",type:"sans-serif"},{name:"Tahoma",type:"sans-serif"},{name:"Template Gothic",type:"sans-serif"},{name:"Thesis Sans",type:"sans-serif"},{name:"Tiresias",type:"sans-serif"},{name:"Trade Gothic",type:"sans-serif"},{name:"Transport",type:"sans-serif"},{name:"Trebuchet MS",type:"sans-serif"},{name:"Twentieth Century (Tw Cen MT)",type:"sans-serif"},{name:"Ubuntu",type:"sans-serif"},{name:"Univers",type:"sans-serif"},{name:"Zurich",type:"sans-serif"},{name:"Vera Sans",type:"sans-serif"},
{name:"Verdana",type:"sans-serif"},{name:"Work Sans",type:"sans-serif",isGoogleFont:!0},{name:"Rubik",type:"sans-serif",isGoogleFont:!0},{name:"Libre Franklin",type:"sans-serif",isGoogleFont:!0},{name:"Fira Sans",type:"sans-serif",isGoogleFont:!0},{name:"Alegreya Sans",type:"sans-serif",isGoogleFont:!0},{name:"Chivo",type:"sans-serif",isGoogleFont:!0},{name:"Source Sans Pro",type:"sans-serif",isGoogleFont:!0},{name:"Roboto",type:"sans-serif",isGoogleFont:!0},{name:"Poppins",type:"sans-serif",isGoogleFont:!0},
{name:"Archivo Narrow",type:"sans-serif",isGoogleFont:!0},{name:"Karla",type:"sans-serif",isGoogleFont:!0},{name:"Montserrat",type:"sans-serif",isGoogleFont:!0},{name:"Rajdhani",type:"sans-serif",isGoogleFont:!0},{name:"PT Sans",type:"sans-serif",isGoogleFont:!0},{name:"Lato",type:"sans-serif",isGoogleFont:!0},{name:"Open Sans",type:"sans-serif",isGoogleFont:!0},{name:"Cabin",type:"sans-serif",isGoogleFont:!0},{name:"Raleway",type:"sans-serif",isGoogleFont:!0},{name:"Nyala",type:"semi-serif"},{name:"Rotis Semi Serif",
type:"semi-serif"},{name:"Easyreading",type:"semi-serif"},{name:"Andal\u00e9 Mono",type:"monospace"},{name:"Arial",type:"monospace"},{name:"Bitstream Vera (Vera Sans Mono)",type:"monospace"},{name:"Consolas",type:"monospace"},{name:"Courier",type:"monospace"},{name:"Courier New",type:"monospace"},{name:"DejaVu Sans Mono",type:"monospace"},{name:"Droid Sans Mono",type:"monospace"},{name:"Everson Mono",type:"monospace"},{name:"Fixed",type:"monospace"},{name:"Fixedsys",type:"monospace"},{name:"Fixedsys Excelsior",
type:"monospace"},{name:"HyperFont",type:"monospace"},{name:"Inconsolata",type:"monospace"},{name:"Letter Gothic",type:"monospace"},{name:"Liberation Mono",type:"monospace"},{name:"Lucida Console",type:"monospace"},{name:"Lucida Sans Typewriter",type:"monospace"},{name:"Lucida Typewriter",type:"monospace"},{name:"Menlo",type:"monospace"},{name:"MICR",type:"monospace"},{name:"Monaco",type:"monospace"},{name:"Monospace",type:"monospace"},{name:"MS Gothic",type:"monospace"},{name:"MS Mincho",type:"monospace"},
{name:"Nimbus Mono L",type:"monospace"},{name:"OCR-A",type:"monospace"},{name:"OCR-B",type:"monospace"},{name:"PragmataPro",type:"monospace"},{name:"Prestige Elite",type:"monospace"},{name:"ProFont",type:"monospace"},{name:"Proggy programming fonts",type:"monospace"},{name:"SimHei",type:"monospace"},{name:"SimSun",type:"monospace"},{name:"Source Code Pro",type:"monospace"},{name:"Terminal",type:"monospace"},{name:"Trixie",type:"monospace"},{name:"Ubuntu Mono",type:"monospace"},{name:"Vera Sans Mono (Bitstream Vera)",
type:"monospace"},{name:"Space Mono",type:"monospace",isGoogleFont:!0},{name:"Inconsolata",type:"monospace",isGoogleFont:!0},{name:"Anonymous Pro",type:"monospace",isGoogleFont:!0},{name:"Balloon",type:"script"},{name:"Brush Script",type:"script"},{name:"Choc",type:"script"},{name:"Dom Casual",type:"script"},{name:"Mistral",type:"script"},{name:"Papyrus",type:"script"},{name:"Segoe Script",type:"script"},{name:"Utopia",type:"script"},{name:"Coronet",type:"script"},{name:"Curlz",type:"script"},{name:"Gravura",
type:"script"},{name:"Script",type:"script"},{name:"Wiesbaden Swing",type:"script"},{name:"American Scribe",type:"script"},{name:"AMS Euler",type:"script"},{name:"Apple Chancery",type:"script"},{name:"Forte",type:"script"},{name:"French Script",type:"script"},{name:"ITC Zapf Chancery",type:"script"},{name:"Kuenstler Script",type:"script"},{name:"Monotype Corsiva",type:"script"},{name:"Old English Text MT",type:"script"},{name:"Zapfino",type:"script"},{name:"Andy",type:"handwriting"},{name:"Ashley Script",
type:"handwriting"},{name:"C\u00e9zanne",type:"handwriting"},{name:"Chalkboard",type:"handwriting"},{name:"Comic Sans MS",type:"handwriting"},{name:"Dom Casual",type:"handwriting"},{name:"Kristen",type:"handwriting"},{name:"Lucida Handwriting",type:"handwriting"},{name:"Bastard",type:"blackletter"},{name:"Breitkopf Fraktur",type:"blackletter"},{name:"Cloister Black",type:"blackletter"},{name:"Fette Fraktur",type:"blackletter"},{name:"Fletcher",type:"blackletter"},{name:"Fraktur",type:"blackletter"},
{name:"Lucida Blackletter",type:"blackletter"},{name:"Old English Text",type:"blackletter"},{name:"Schwabacher",type:"blackletter"},{name:"Aharoni",type:"non-latin"},{name:"Aparajita",type:"non-latin"},{name:"Arial",type:"non-latin"},{name:"Calibri",type:"non-latin"},{name:"Chandas",type:"non-latin"},{name:"Gadugi",type:"non-latin"},{name:"Grecs du roi",type:"non-latin"},{name:"Javanese script",type:"non-latin"},{name:"Japanese Gothic",type:"non-latin"},{name:"Jomolhari",type:"non-latin"},{name:"Kiran",
type:"non-latin"},{name:"Kochi",type:"non-latin"},{name:"Koren",type:"non-latin"},{name:"Kruti Dev",type:"non-latin"},{name:"Malgun Gothic",type:"non-latin"},{name:"Meiryo",type:"non-latin"},{name:"Microsoft JhengHei",type:"non-latin"},{name:"Microsoft YaHei",type:"non-latin"},{name:"Minch\u014d",type:"non-latin"},{name:"Ming",type:"non-latin"},{name:"Mona",type:"non-latin"},{name:"MS Gothic",type:"non-latin"},{name:"Nastaliq Navees",type:"non-latin"},{name:"Porson",type:"non-latin"},{name:"Segoe UI Symbol",
type:"non-latin"},{name:"Shruti",type:"non-latin"},{name:"SimSun",type:"non-latin"},{name:"Sylfaen",type:"non-latin"},{name:"Tahoma",type:"non-latin"},{name:"Tengwar",type:"non-latin"},{name:"Tibetan Machine Uni",type:"non-latin"},{name:"Wilson Greek",type:"non-latin"},{name:"SMP",type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Bitstream Cyberbit",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"Charis SIL",type:"unicode"},{name:"BMP",type:"unicode"},{name:"SMP",type:"unicode"},
{name:"Code2002",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"IPA",type:"unicode"},{name:"Everson Mono",type:"unicode"},{name:"Windows",type:"unicode"},{name:"Fixedsys Excelsior",type:"unicode"},{name:"FreeFont",type:"unicode"},{name:"Gentium",type:"unicode"},{name:"GNU Unifont",type:"unicode"},{name:"Georgia Ref",type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Junicode",type:"unicode"},{name:"Mac OS 8.5",type:"unicode"},{name:"macOS",type:"unicode"},{name:"ISO 8859-x",
type:"unicode"},{name:"MS Gothic",type:"unicode"},{name:"MS Mincho",type:"unicode"},{name:"Nimbus Sans Global",type:"unicode"},{name:"Noto",type:"unicode"},{name:"Fabrizio Schiavi",type:"unicode"},{name:"Squarish Sans CT",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Titus Cyberbit Basic",type:"unicode"},{name:"Verdana Ref",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Apple Symbols",type:"symbol"},{name:"Asana-Math",type:"symbol"},{name:"Blackboard bold",type:"symbol"},{name:"Bookshelf Symbol 7",
type:"symbol"},{name:"Cambria Math",type:"symbol"},{name:"Computer Modern",type:"symbol"},{name:"Lucida Math",type:"symbol"},{name:"Marlett",type:"symbol"},{name:"Symbol",type:"symbol"},{name:"Webdings",type:"symbol"},{name:"Wingdings",type:"symbol"},{name:"Wingdings 2",type:"symbol"},{name:"Wingdings 3",type:"symbol"},{name:"Zapf Dingbats",type:"symbol"},{name:"Ad Lib",type:"decorative"},{name:"Allegro",type:"decorative"},{name:"Andreas",type:"decorative"},{name:"Arnold B\u00f6cklin",type:"decorative"},
{name:"Astur",type:"decorative"},{name:"Banco",type:"decorative"},{name:"Bauhaus",type:"decorative"},{name:"Braggadocio",type:"decorative"},{name:"Broadway",type:"decorative"},{name:"Caslon Antique",type:"decorative"},{name:"Cooper Black",type:"decorative"},{name:"Curlz",type:"decorative"},{name:"Ellington",type:"decorative"},{name:"Exocet",type:"decorative"},{name:"FIG Script",type:"decorative"},{name:"Forte",type:"decorative"},{name:"Gabriola",type:"decorative"},{name:"Horizon",type:"decorative"},
{name:"Jim Crow",type:"decorative"},{name:"Lo-Type",type:"decorative"},{name:"Neuland",type:"decorative"},{name:"Peignot",type:"decorative"},{name:"San Francisco",type:"decorative"},{name:"Stencil",type:"decorative"},{name:"Umbra",type:"decorative"},{name:"Westminster",type:"decorative"},{name:"Willow",type:"decorative"},{name:"Windsor",type:"decorative"},{name:"Lithos",type:"mimicry"},{name:"Skia",type:"mimicry"},{name:"3x3",type:"misc"},{name:"Compatil",type:"misc"},{name:"Generis",type:"misc"},
{name:"Grasset",type:"misc"},{name:"LED",type:"misc"},{name:"Luxi",type:"misc"},{name:"System",type:"misc"}];FA.fonts=EO;FA.fonts=EO;FA.fonts=EO;FA.default=T1;var Nh=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js");Nh.textlayerNodeForFontMeasure=function(d){var h=d.viewState,n=h.text_layer_node;h=h.fontmetric_text_layer_node;n&&!n.className.includes("newtext-text-layer")&&(d.viewState.text_layer_node=n=n.parentNode.querySelector(".newtext-text-layer.actual"));h&&!h.className.includes("newtext-text-layer")&&
(d.viewState.fontmetric_text_layer_node=h=null);n&&!h&&n.parentNode&&(h=d.viewState.fontmetric_text_layer_node=n.parentNode.querySelector(".newtext-text-layer.font-measure"));return h};Nh.isExtendingChar=function(d){return 768<=d.charCodeAt(0)&&Nh.extendingChars.test(d)};Nh.skipExtendingChars=function(d,h,n){for(;(0>n?0<h:h<d.length)&&Nh.isExtendingChar(d.charAt(h));)h+=n;return h};Nh.charBoundsOfBigMonospacedLine=function(d,h,n,b,e,m,a,g){e=void 0===e?0:e;m=void 0===m?0:m;n=n.text.length;if(500>
n||h.isProportional(Nh.getComputedFontFamily(b)))return null;var l=Infinity,q=a.defaultTextStyle;a.lineWrapping&&(l=b.getBoundingClientRect().width);h=h._domMeasure.defaultCharExtent(d,{defaultTextStyle:q},g);d=h.width;h=h.height;b=Array(n);for(a=0;a<n;a++)e+d>l&&(e=0,m+=h),b[a]={x:e,y:m,width:d,height:h},e+=d;return b};Nh.charBoundsOfLine=function(d,h,n,b){n=void 0===n?0:n;b=void 0===b?0:b;d=h.ELEMENT_NODE;var e=h.TEXT_NODE,m=h.ownerDocument,a=[],g=0;if(h)if(h.className.includes("line")){n-=h.offsetLeft;
b-=h.offsetTop;var l=h.childNodes[0]}else l=h.getElementsByClassName("line")[0].childNodes[0],n=n-h.offsetLeft+Nh.getComputedMarginLeft(h),b-=h.offsetTop;else l=null;if(!l){var q=l=m.createElement("br");h.appendChild(q)}for(;l&&!(Infinity<g);){var r="BR"!==l.tagName&&l.nodeType===d&&l.childNodes[0]||l;if(r.nodeType===e)for(var u=r.length,v=0;v<u;v++){var y=Nh.measureCharInner(m,r,v,"right");var z=y.left;var A=y.top;h=y.width;y=y.height;z+=n;A+=b;a[g++]={x:z,y:A,width:h,height:y}}else if(l.nodeType===
d)r=l.getBoundingClientRect(),z=r.left,A=r.top,h=r.width,y=r.height,z+=n,A+=b,a[g++]={x:z,y:A,width:h,height:y};else throw Error("Cannot deal with node "+l);l=l.nextSibling}q&&q.parentNode.removeChild(q);return a};Nh.measureCharInner=function(d,h,n,b){b=void 0===b?"left":b;var e=n;n+=1;if(3==h.nodeType)for(var m=0;4>m;m++){var a=Nh.getUsefulRect(Nh.range(d,h,e,n).getClientRects(),b);if(a.left||a.right||0==e)break;n=e;--e}return a};Nh.range=function(d,h,n,b,e){d=d.createRange();d.setEnd(e||h,b);d.setStart(h,
n);return d};Nh.getUsefulRect=function(d,h){var n={left:0,right:0,top:0,bottom:0};if("left"==h)for(h=0;h<d.length&&(n=d[h]).left==n.right;h++);else for(h=d.length-1;0<=h&&(n=d[h]).left==n.right;h--);return n};Nh.string=vh;Nh.obj=Pf;Nh.FontDetector=jfa;Nh.cumulativeOffset=Bv;Nh.config=wk;Nh.debug=!!Nh.config.onloadURLQuery["debug-font-metric"];Nh.checkTimeout=1E3;var U1=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),n=h.hasOwnProperty("FontMetric")&&
"function"===typeof h.FontMetric?h.FontMetric:h.FontMetric=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.charMap={};this.cachedBoundsInfo={};this.supportedFontCache={};this.element=null;this.isProportionalCache={}}},{key:"reset",value:function(b){if(this.element){var e=this.element.parentNode;var m=this.element.ownerDocument}this.uninstall();
this.charMap={};this.cachedBoundsInfo={};m&&e&&this.install(m,e,b)}},{key:"install",value:function(b,e,m){this.element=b.createElement("div");this.element.name="fontMetric";this.setMeasureNodeStyles(this.element.style,!0);e.appendChild(this.element);this._domMeasure=(new Nh.DOMTextMeasure).install(b,e,m)}},{key:"uninstall",value:function(){this.element&&(this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this._domMeasure&&this._domMeasure.uninstall())}},{key:"setMeasureNodeStyles",
value:function(b,e){b.width=b.height="auto";b.left=b.top="0px";b.visibility="hidden";b.position="absolute";b.whiteSpace="pre";b.font="inherit";b.overflow=e?"hidden":"visible"}},{key:"measure",value:function(b,e){var m=b.fontFamily,a=b.fontSize,g=b.fontWeight,l=b.fontStyle,q=b.textDecoration,r=b.textStyleClasses;b=b.transform;var u=this.element;b&&(b=b.inverse());u.textContent=e;Object.assign(u.style,{"-webkit-text-size-adjust":"none",fontFamily:m,fontWeight:g,fontStyle:l,textDecoration:q,transform:b,
fontSize:a+"px"});u.className=r?r.join(" "):"";try{var v=u.getBoundingClientRect();var y=v.width;var z=v.height}catch(A){return{width:0,height:0}}return{height:z,width:y}}},{key:"charBoundsFor",value:function(b,e){var m=e.length,a=Array(m),g=this.cachedBoundsInfo,l=g.bounds,q=g.str;g=g.style;if(this.isProportional(b.fontFamily)){g=l&&Nh.obj.equals(g,b);for(var r=!b.fixedCharacterSpacing,u=0,v=0;u<m;u++){var y=e[u];if(r)if(g=g&&y===q[u]){var z=l[u];y=z.width;z=z.height}else y=e.substr(0,u+1),z=this.measure(b,
y),y=z.width,z=z.height,y-=v;else z=this.sizeFor(b,y),y=z.width,z=z.height;a[u]={x:v,y:0,width:Math.ceil(y),height:Math.ceil(z)};v+=y}r&&(this.cachedBoundsInfo={bounds:a,str:e,style:b})}else for(e=this.sizeFor(b,"x",!0),b=this.sizeFor(b,"xx",!0).width-e.width,e=e.height,q=0;q<m;q++)l=b*q,a[q]={x:l,y:0,width:b,height:e};return a}},{key:"isProportional",value:function(b){if(this.isProportionalCache.hasOwnProperty(b))return this.isProportionalCache[b];var e={fontFamily:b,fontSize:12},m=this.sizeFor(e,
"w").width;e=this.sizeFor(e,"i").width;return this.isProportionalCache[b]=m!==e}},{key:"sizeFor",value:function(b,e,m){var a=b.fontFamily,g=b.fontSize,l=b.fontWeight,q=b.fontStyle,r=b.textDecoration,u=b.textStyleClasses;b={fontFamily:a,fontSize:g,fontWeight:l,fontStyle:q,textDecoration:r,textStyleClasses:u};if((void 0===m||!m)&&1<e.length)return this.measure(b,e);m=u?u.join(" "):"";a=[a,g,l,q,r,m].join("-");this.charMap[a]||(this.charMap[a]={});this.charMap[a][e]||(this.charMap[a][e]=this.measure(b,
e));return this.charMap[a][e]}},{key:"defaultLineHeight",value:function(b){return this.sizeFor(b," ").height}},{key:"isFontSupported",value:function(b,e){e=void 0===e?"normal":e;var m=this.fontDetector||(this.fontDetector=new Nh.FontDetector(this.element.ownerDocument));if(this.supportedFontCache[b+"-"+e]){var a=this.supportedFontCache[b+"-"+e],g=a.ts;a=a.value;if(Date.now()-g<Nh.checkTimeout)return a}m=m.isFontSupported(b,e);this.supportedFontCache[b+"-"+e]={ts:Date.now(),value:m};return m}},{key:"defaultCharExtent",
value:function(b,e,m){return this._domMeasure.defaultCharExtent(b,e,m)}},{key:"manuallyComputeCharBoundsOfLine",value:function(b,e,m,a,g,l,q){return this._domMeasure.computeCharBBoxes(b,e,0,0,g,l,q,this)}},{key:"manuallyComputeBoundsOfLines",value:function(b,e,m,a,g,l,q){return this._domMeasure.computeBBoxesOfLines(b,e,0,0,g,l,q)}}],[{key:"className",get:function(){return"FontMetric"}},{key:"default",value:function(){if(!this._fontMetric)throw Error("FontMetric has not yet been initialized!");return this._fontMetric}},
{key:"initDefault",value:function(b){if(!this._fontMetric){if(!b&&"undefined"===typeof document)throw Error("Cannot initialize FontMetric without document");b||(b={document:document});this._fontMetric=this.forDOMEnv(b)}return this._fontMetric}},{key:"removeDefault",value:function(){this._fontMetric&&(this._fontMetric.uninstall(),this._fontMetric=null)}},{key:"forDOMEnv",value:function(b){b=b.document;var e=new Nh.FontMetric;e.install(b,b.body);return e}}],h,{pathInPackage:function(){return"rendering/font-metric.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:312,end:7392})}(void 0),kfa=U1=Nh.FontMetric;Nh.extendingChars=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
(function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),n=h.hasOwnProperty("DOMTextMeasure")&&"function"===typeof h.DOMTextMeasure?h.DOMTextMeasure:h.DOMTextMeasure=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,[{key:"reset",value:function(){if(this.element){var b=this.element.parentNode;var e=this.element.ownerDocument}this.uninstall();e&&b&&this.install(e,b);return this}},
{key:"install",value:function(b,e,m){this.maxLineBBoxCacheCount=(this.debug=m=void 0===m?!1:m)?1:3E3;this.lineBBoxCacheCount=0;this.lineBBoxCache={};this.maxTextlayerNodeCacheCount=m?1:30;this.textlayerNodeCacheCount=0;this.textlayerNodeCache={};this.defaultCharWidthHeightCache={};this.doc=b;b=this.element=b.createElement("div");b.className="dom-measure"+(m?" debug":"");this.setMeasureNodeStyles(b.style,!0);e.appendChild(b);return this}},{key:"uninstall",value:function(){var b=this.element;b&&(b.parentNode&&
b.parentNode.removeChild(b),this.element=null)}},{key:"setMeasureNodeStyles",value:function(b,e){b.width=b.height="auto";this.debug||(b.left=b.top="0px",b.visibility="hidden");b.position="absolute";b.whiteSpace="pre";b.font="inherit";b.overflow=e&&!this.debug?"hidden":"visible"}},{key:"generateStyleKey",value:function(b){var e=b.defaultTextStyle;return[e.fontFamily,e.fontSize,e.fontWeight,e.fontStyle,e.textDecoration,e.textStyleClasses,b.paddingLeft,b.paddingRight,b.paddingTop,b.paddingBottom,b.width,
b.height,b.clipMode,b.lineWrapping,b.textAlign].join("-")}},{key:"defaultCharExtent",value:function(b,e,m){var a=this,g=this.generateStyleKey(e),l=this.defaultCharWidthHeightCache[g];if("undefined"!==typeof l&&(0!==l.height||0!==l.width))return l;var q=this.doc;return this.withTextLayerNodeDo(b,m,e,g,function(r){var u=q.createElement("span");u.className="line";u.style.whiteSpace="pre";r.appendChild(u);u.textContent="abcdefghijklmnopqrstufwxyz ABCDEFGHIJKLMNOPQRSTUFWXYZ 1234567890 {}[];,./<>?'\"!@#$%^&*()-=_+";
var v=u.getBoundingClientRect().width,y=q.createElement("span");y.className="line";y.style.whiteSpace="pre";r.appendChild(y);y.textContent="H\ne\nll\no";var z=y.getBoundingClientRect().height;r.removeChild(u);r.removeChild(y);return a.defaultCharWidthHeightCache[g]={width:v/92,height:Math.ceil(z/4)}})}},{key:"computeBBoxesOfLines",value:function(b,e,m,a,g,l,q){var r=this;m=void 0===m?0:m;a=void 0===a?0:a;for(var u=this.generateStyleKey(g),v=Array(e.length),y=!0,z=0;z<e.length;z++){var A=!e[z].textAttributes.length&&
this.lineBBoxCache[u+"_"+e[z].text];A&&A.height&&A.width?v[z]=A:y=!1}return y?v:this.withTextLayerNodeDo(b,l,g,u,function(B,G,E){for(var K=Array(e.length),J=Array(e.length),P=0;P<e.length;P++)if(!J[P]){var ea=q(e[P]);ea.style.display="inline-block";B.appendChild(ea);K[P]=ea}for(P=0;P<K.length;P++)if(!J[P]){ea=K[P];var ra=ea.getBoundingClientRect();r.lineBBoxCache[u+"_"+e[P].text]=J[P]={x:ra.left-ea.offsetLeft+m-G,y:ra.top-ea.offsetTop+a-E,width:ra.width,height:ra.height}}for(G=0;G<K.length;G++)B.removeChild(K[G]);
return J})}},{key:"computeCharBBoxes",value:function(b,e,m,a,g,l,q,r){var u=this;m=void 0===m?0:m;a=void 0===a?0:a;return this.withTextLayerNodeDo(b,l,g,this.generateStyleKey(g),function(v,y,z){var A=q(e);v.appendChild(A);v=1E4<e.stringSize&&Nh.charBoundsOfBigMonospacedLine(b,r,e,A,m,a,g,l)||Nh.charBoundsOfLine(e,A,m-y,a-z);u.debug||A.parentNode.removeChild(A);return v})}},{key:"withTextLayerNodeDo",value:function(b,e,m,a,g){var l=this.doc,q=this.textlayerNodeCache,r=this.element,u=Nh.textlayerNodeForFontMeasure(b);
u||(u=q[a]);if(!u){this.textlayerNodeCacheCount++;u=q[a]=e(m,[]);u.id=a;e=m.width;var v=m.clipMode;m.width||m.clipMode&&"visible"!==m.clipMode?(m=l.createElement("div"),m.style.position="absolute",v&&(m.style.overflow=v),e&&(m.style.width=e+"px"),m.id=a,m.appendChild(u),r.appendChild(m)):r.appendChild(u)}a=b.getGlobalTransform().inverse();b.env.renderer&&b.env.renderer.getNodeForMorph(b)&&(1!=a.getScale()||0!=a.getRotation())&&(a.e=a.f=0,u.style.transform=a.toString());a=u.getBoundingClientRect();
b=a.left;a=a.top;try{return g(u,b,a)}finally{if(u.style.transform="",!this.debug&&this.textlayerNodeCacheCount>this.maxTextlayerNodeCacheCount){g=Math.ceil(this.maxTextlayerNodeCacheCount/2);for(var y;g--&&(y=r.childNodes[0]);)q[y.id]=null,r.removeChild(y);this.textlayerNodeCacheCount-=g}}}}],[{key:"className",get:function(){return"DOMTextMeasure"}}],h,{pathInPackage:function(){return"rendering/font-metric.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:11046,end:19408})})(void 0);Nh.GLOBAL="undefined"!==typeof System?System.global:window||global||self||void 0;Nh.getComputedFontFamily="function"===typeof Nh.GLOBAL.getComputedStyle?function(d){return Nh.GLOBAL.getComputedStyle(d).fontFamily}:function(){return""};Nh.getComputedMarginLeft="function"===typeof Nh.GLOBAL.getComputedStyle?function(d){return parseInt(Nh.GLOBAL.getComputedStyle(d).marginLeft)||0}:function(){return 0};
Nh.default=U1;var gi=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js");gi.signalBindings=function(d,h,n){if(d=d.attributeConnections){d=d.slice();for(var b=0;b<d.length;b++)d[b].sourceAttrName===h&&d[b].update(n)}};gi.informMorph=function(d,h,n){try{n.onChange(h);gi.signalBindings(n,"change",h);for(var b=n.owner;b;)b.onSubmorphChange(h,n),b=b.owner}catch(e){console.error("Error in informMorph: "+e.stack)}};gi.arr=vf;gi.string=vh;gi.obj=Pf;gi.connect=fk;gi.signal=tl;gi.disconnect=Jm;(function(d){var h=
lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=h.hasOwnProperty("Change")&&"function"===typeof h.Change?h.Change:h.Change=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.target=b;this.group=null}},{key:"type",get:function(){return"abstract change"}},{key:"apply",value:function(){throw Error("Not yet implemented");}},{key:"reverseApply",
value:function(){throw Error("Not yet implemented");}}],[{key:"className",get:function(){return"Change"}}],h,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:766,end:1016})})(void 0);var FO=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=h.hasOwnProperty("GroupChange")&&
"function"===typeof h.GroupChange?h.GroupChange:h.GroupChange=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){Sb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.changes=[]}},{key:"consumesChanges",value:function(){return!0}},{key:"addChange",value:function(b){this.changes.push(b);b.group=
this}},{key:"apply",value:function(){this.changes.slice().forEach(function(b){return b.apply()});return this}},{key:"reverseApply",value:function(){this.changes.slice().reverse().forEach(function(b){return b.reverseApply()});return this}}],[{key:"className",get:function(){return"GroupChange"}}],h,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:1025,end:1448})}(gi.Change);gi.GroupChange=FO;gi.GroupChange=FO;gi.GroupChange=FO;var GO=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=h.hasOwnProperty("ValueChange")&&"function"===typeof h.ValueChange?h.ValueChange:h.ValueChange=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,[{key:"type",get:function(){return"setter"}},{key:Symbol.for("lively-instance-initialize"),
value:function(b,e,m,a){Sb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.prop=e;this.value=m;this.prevValue=null;this.meta=a}},{key:"apply",value:function(){this.target[this.prop]=this.value}},{key:"reverseApply",value:function(){this.target[this.prop]=this.prevValue}}],[{key:"className",get:function(){return"ValueChange"}}],h,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1457,end:1866})}(gi.Change);gi.ValueChange=GO;gi.ValueChange=GO;gi.ValueChange=GO;var HO=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=h.hasOwnProperty("MethodCallChange")&&"function"===typeof h.MethodCallChange?h.MethodCallChange:h.MethodCallChange=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(n,d,[{key:"type",get:function(){return"method-call"}},{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m,a,g){Sb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.selector=e;this.args=m;this.undo=a;this.meta=g}},{key:"apply",value:function(){var b=this.target;b[this.selector].apply(b,this.args)}},{key:"reverseApply",value:function(){if(this.undo)if("function"===typeof this.undo)this.undo();else{var b=this.undo,
e=b.target;e[b.selector].apply(e,b.args)}}}],[{key:"className",get:function(){return"MethodCallChange"}}],h,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1875,end:2448})}(gi.GroupChange);gi.MethodCallChange=HO;gi.MethodCallChange=HO;gi.MethodCallChange=HO;var bI=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),
n=h.hasOwnProperty("ChangeManager")&&"function"===typeof h.ChangeManager?h.ChangeManager:h.ChangeManager=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},{key:"reset",value:function(){this.changes=[];this.changeRecordedListeners=[];this.revision=0;this.changeRecordersPerMorph=new WeakMap;this.changeRecorders={};this.changeGroupStack=
[];this.defaultMeta={};this.metaStack=[]}},{key:"changesFor",value:function(b){return this.changes.filter(function(e){return e.target===b})}},{key:"apply",value:function(b,e){e.apply()}},{key:"doWithValueChangeMeta",value:function(b,e,m){this.defaultMeta=b;this.metaStack.push(b);b=m(e);this.metaStack.pop();this.defaultMeta=gi.arr.last(this.metaStack)||{};return b}},{key:"addValueChange",value:function(b,e,m,a){e=new gi.ValueChange(b,e,m,Object.assign({},this.defaultMeta,{},a));return this._record(b,
e)}},{key:"addMethodCallChangeDoing",value:function(b,e,m){var a=b.target,g=b.selector,l=b.args;(b=b.undo)||(b=function(){return console.warn("No undo recorded for "+a+"."+g)});l=new gi.MethodCallChange(a,g,l,b,this.defaultMeta);e.groupChangesWhile(l,m);return l}},{key:"_record",value:function(b,e){gi.signal(this,"changeRecorded",e);e.hasOwnProperty("value")&&(e.prevValue=b._morphicState[e.prop],b._morphicState[e.prop]=e.value);b.makeDirty(e);var m=gi.arr.last(this.changeGroupStack);m&&m.consumesChanges()?
m.addChange(e):(this.changes.push(e),b._rev=++this.revision,this.informChangeListeners(e));gi.informMorph(this,e,b);return e}},{key:"groupChangesWhile",value:function(b,e,m,a){a=void 0===a?!0:a;e||(e=new gi.GroupChange(b));this.changeGroupStack.push(e);try{return m(),gi.arr.remove(this.changeGroupStack,e),a?this._record(b,e):e}catch(g){throw gi.arr.remove(this.changeGroupStack,e),g;}}},{key:"dontRecordChangesWhile",value:function(b,e){return this.groupChangesWhile(b,void 0,e,!1)}},{key:"recordChangesWhile",
value:function(b,e){var m=this.changes.length;b();b=this.changes.slice(m,this.changes.length);return e?b.filter(e):b}},{key:"addChangeListener",value:function(b){gi.arr.pushIfNotIncluded(this.changeRecordedListeners,b)}},{key:"removeChangeListener",value:function(b){gi.arr.remove(this.changeRecordedListeners,b)}},{key:"informChangeListeners",value:function(b){this.changeRecordedListeners.forEach(function(e){return e(b)})}},{key:"recordChangesStart",value:function(b,e){e=gi.obj.newKeyIn(this.changeRecorders,
(void 0===e?"":e)+"__change_recorder_"+Date.now());var m=b?function(g){return b(g)&&a.changes.push(g)}:function(g){return a.changes.push(g)},a=this.changeRecorders[e]={id:e,filter:b,changes:[],listener:m};this.addChangeListener(m);return a}},{key:"recordChangesStop",value:function(b){if(!(b in this.changeRecorders))return[];var e=this.changeRecorders[b],m=e.changes;e=e.listener;delete this.changeRecorders[b];this.removeChangeListener(e);return m}},{key:"recordChangesStartForMorph",value:function(b,
e){e=this.recordChangesStart(e,b.id);var m=this.changeRecordersPerMorph.get(b);m||(m=[],this.changeRecordersPerMorph.set(b,m));m.push(e.id);return e}},{key:"recordChangesStopForMorph",value:function(b,e){var m=this.changeRecordersPerMorph.get(b);if(!m||!m.length)return console.warn("Cannot endMorphChangeRecorder for morph "+b+": recorder not found"),[];(b=e)?gi.arr.remove(m,b):b=m.pop();return this.recordChangesStop(b)}}],[{key:"className",get:function(){return"ChangeManager"}}],h,{pathInPackage:function(){return"changes.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2458,end:7504})}(void 0);gi.ChangeManager=bI;gi.ChangeManager=bI;gi.ChangeManager=bI;var Fl=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js");Fl.printArg=function(d){return Fl.obj.inspect(d,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};Fl.obj=Pf;Fl.arr=vf;Fl.events=Kw;
Fl.fun=nl;(function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),n=h.hasOwnProperty("Undo")&&"function"===typeof h.Undo?h.Undo:h.Undo=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m){e=void 0===e?[]:e;this.name=b;this.targets=e;this.timestamp=this.changes=this.recorder=null;this.no=void 0===m?0:m}},{key:"recorded",
value:function(){return!!this.changes}},{key:"isRecording",value:function(){return!!this.recorder}},{key:"startRecording",value:function(b){var e=this;if(this.recorded()||this.isRecording())throw Error("Undo already recorded / recording");if(!this.targets.length)throw Error("Undo has no target morphs");this.timestamp=Date.now();this.recorder=this.targets[0].recordChangesStart(function(m){var a=m.target;return a.isUsedAsEpiMorph()||!e.targets.some(function(g){return g===a||g.isAncestorOf(a)})?!1:"function"===
typeof b?b(m):!0});return this}},{key:"stopRecording",value:function(){var b=this.recorder.id;this.changes=$jscomp.makeIterator(this.targets).next().value.recordChangesStop(b);this.recorder=this.targets=null}},{key:"apply",value:function(){if(!this.recorded())throw Error("Cannot apply undo that has no changes recorded yet");this.changes.slice().forEach(function(b){return b.apply()});return this}},{key:"reverseApply",value:function(){if(!this.recorded())throw Error("Cannot reverseApply undo that has no changes recorded yet");
this.changes.slice().reverse().forEach(function(b){return b.reverseApply()});return this}},{key:"addTarget",value:function(b){Fl.arr.pushIfNotIncluded(this.targets,b)}},{key:"addUndos",value:function(b){b=Fl.arr.sortBy(b.concat(this).filter(function(e){return e.recorded()}),function(e){return e.no});b.length&&(this.changes=Fl.arr.flatmap(b,function(e){return e.changes}),this.timestamp=b[0].timestamp,this.no=b[0].no,this.name=b.map(function(e){return e.name}).join("-"))}},{key:"toString",value:function(){var b=
this.name,e=this.changes,m=this.no,a=this.isRecording();e=e.length?"\n  "+e.map(function(g){var l=g.selector,q=g.args,r=g.prop,u=g.value;g=g.target;return l?g+"."+l+"("+q.map(Fl.printArg)+")":g+"."+r+" = "+Fl.printArg(u)}).join("\n  "):"no changes";return"Undo("+m+":"+b+" "+(a?"RECORDING ":"")+e+")"}}],[{key:"className",get:function(){return"Undo"}}],h,{pathInPackage:function(){return"undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:54,end:2487})})(void 0);var yD=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),n=h.hasOwnProperty("UndoManager")&&"function"===typeof h.UndoManager?h.UndoManager:h.UndoManager=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.reset();this.filter=
b}},{key:"reset",value:function(){this.undos=[];this.redos=[];this.undoInProgress=null;this.counter=this.applyCount=0;this.grouping={current:[],debounce:null,debouncedCanceled:!1,debounceTime:31}}},{key:"group",value:function(b){b=void 0===b?null:b;this.groupLaterCancel();b&&this.undos.includes(b)&&(this.grouping.current=Fl.arr.uniq(this.undos.slice(this.undos.indexOf(b)).concat(this.grouping.current)));this.grouping.current.length&&(b=this.grouping.current.slice(1),this.grouping.current[0].addUndos(b),
this.undos=Fl.arr.withoutAll(this.undos,b),this.grouping.current=[])}},{key:"ensureNewGroup",value:function(b,e){e=void 0===e?"new undo group":e;this.group();this.undoStart(b,e);return this.undoStop()}},{key:"groupLaterCancel",value:function(){var b=this.grouping;b.debounce&&(b.debouncedCanceled=!0,this.grouping=Object.assign({},b,{debounce:null,debouncedCanceled:!1}))}},{key:"groupLater",value:function(b){var e=this,m=this.grouping;(m.debounce||(m.debounce=Fl.fun.debounce(b||m.debounceTime,function(){m.debounce=
null;m.debouncedCanceled||e.group()})))()}},{key:"undoStart",value:function(b,e){if(!this.applyCount)if(this.undoInProgress)console.warn("There is already an undo recorded");else return this.undoInProgress=(new Fl.Undo(e,[b],this.counter++)).startRecording(this.filter)}},{key:"undoStop",value:function(){var b=this.undoInProgress;if(!b)return null;b.stopRecording();this.undoInProgress=null;this.undos.push(b);this.grouping.current.push(b);this.redos.length&&(this.redos.length=0);return b}},{key:"undo",
value:function(){this.undoStop();var b=this.undos.pop();if(b){Fl.arr.remove(this.grouping.current,b);this.redos.unshift(b);this.applyCount++;try{b.reverseApply()}finally{this.applyCount--}return b}}},{key:"redo",value:function(){this.undoStop();var b=this.redos.shift();if(b){this.undos.push(b);this.applyCount++;try{b.apply()}finally{this.applyCount--}return b}}},{key:"toString",value:function(){var b=0===this.undos.length?"":"\n  "+(20<this.undos.length?"...\n  ":"")+this.undos.slice(-20).join("\n  ");
return"UndoManager("+this.undos.length+" undos, "+this.redos.length+" redos, "+(this.undoInProgress?", UNDO IN PROGRESS":"")+b+")"}}],[{key:"className",get:function(){return"UndoManager"}}],h,{pathInPackage:function(){return"undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2619,end:5662})}(void 0);Fl.UndoManager=yD;Fl.UndoManager=
yD;Fl.UndoManager=yD;var fm=lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js");fm.promise=yg;fm.bowser=Qs;fm.touchInputDevice=Qo;fm.placeholderValue="\u0001\u0001";fm.placeholderRe=/\u0001/g;var V1=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js"),n=h.hasOwnProperty("TextInput")&&"function"===typeof h.TextInput?h.TextInput:h.TextInput=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.eventDispatcher=b;this.domState={rootNode:null,textareaNode:null,eventHandlers:[],isInstalled:!1};this.inputState={composition:null,manualCopy:null,manualPaste:null,positionChangedTime:0,scrollLeftWhenChanged:0,scrollTopWhenChanged:0}}},{key:"install",value:function(b,e){var m=this,a=this.domState,g=a.isInstalled,l=a.rootNode;this.world=e;if(g){if(l===b)return;this.uninstall()}a.isInstalled=!0;a.rootNode=
b;b.tabIndex=1;e=a.textareaNode=b.ownerDocument.createElement("textarea");e.setAttribute("style","\n      position: absolute;\n      /*extent cannot be 0, input won't work correctly in Chrome 52.0*/\n      width: 20px; height: 20px;\n      z-index: 0;\n      opacity: 1;\n      background: transparent;\n      -moz-appearance: none;\n      appearance: none;\n      border: none;\n      resize: none;\n      outline: none;\n      overflow: hidden;\n      font: inherit;\n      padding: 0 1px;\n      margin: 0 -1px;\n      text-indent: -1em;\n      -ms-user-select: text;\n      -moz-user-select: text;\n      -webkit-user-select: text;\n      user-select: text;\n      /*with pre-line chrome inserts &nbsp; instead of space*/\n      white-space: pre!important;");
fm.touchInputDevice&&e.setAttribute("x-palm-disable-auto-cap",!0);e.setAttribute("wrap","off");e.setAttribute("autocorrect","off");e.setAttribute("autocapitalize","off");e.setAttribute("spellcheck",!1);e.setAttribute("aria-label","Lively Textinput Node");e.className="lively-text-input";e.value="";b.insertBefore(e,b.firstChild);fm.touchInputDevice&&(e.setAttribute("disabled",!0),e.style.setProperty("transform","scale(0)"));a.eventHandlers=[{type:"focusin",node:b,fn:function(q){return m.onRootNodeFocus(q)},
capturing:!0},{type:"focusin",node:a.textareaNode,fn:function(q){return m.onTextAreaFocus(q)},capturing:!0},{type:"blur",node:a.textareaNode,fn:function(q){return m.onTextAreaBlur(q)},capturing:!0},{type:"keydown",node:a.textareaNode,fn:function(q){return m.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"keyup",node:a.textareaNode,fn:function(q){return m.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"cut",node:a.textareaNode,fn:function(q){return m.eventDispatcher.dispatchDOMEvent(q)},
capturing:!1},{type:"copy",node:a.textareaNode,fn:function(q){return m.inputState.manualCopy?m.inputState.manualCopy.onEvent(q):m.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"paste",node:a.textareaNode,fn:function(q){return m.inputState.manualPaste?m.inputState.manualPaste.onEvent(q):m.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"compositionstart",node:a.textareaNode,fn:function(q){return m.onCompositionStart(q)},capturing:!1},{type:"compositionend",node:a.textareaNode,fn:function(q){return m.onCompositionEnd(q)},
capturing:!1},{type:"compositionupdate",node:a.textareaNode,fn:function(q){return m.onCompositionUpdate(q)},capturing:!1},{type:"input",node:a.textareaNode,fn:function(q){return m.onInput(q)},capturing:!1}];a.eventHandlers.forEach(function(q){return q.node.addEventListener(q.type,q.fn,q.capturing)});return this}},{key:"uninstall",value:function(){var b=this.domState;b.isInstalled=!1;b.eventHandlers.forEach(function(m){return m.node.removeEventListener(m.type,m.fn,m.capturing)});var e=b.textareaNode;
e&&e.parentNode&&e.parentNode.removeChild(e);b.rootNode=null;return this}},{key:"resetValue",value:function(){var b=this.domState.textareaNode;b&&(b.value=fm.placeholderValue)}},{key:"readValue",value:function(){var b=this.domState.textareaNode;return b?b.value.replace(fm.placeholderRe,""):""}},{key:"focus",value:function(b,e){var m=this.domState.textareaNode;m&&(fm.touchInputDevice&&b&&b.isText&&!b.readOnly&&m.removeAttribute("disabled"),b&&b.stealFocus||m.ownerDocument.activeElement!==m&&m.focus(),
fm.bowser.firefox&&Promise.resolve().then(function(){return m.ownerDocument.activeElement!==m&&m.focus()}),b&&b.isText&&b.focusable?(fm.touchInputDevice&&m.focus(),this.ensureBeingAtCursorOfText(b)):e&&this.ensureBeingInVisibleBoundsOfWorld(e))}},{key:"blur",value:function(){var b=this.domState.textareaNode;fm.touchInputDevice&&b.setAttribute("disabled",!0);b&&b.blur()}},{key:"doCopyWithMimeTypes",value:function(b){var e=this;return this.execCommand("manualCopy",function(){var m=e.domState.textareaNode,
a=function(g){m.removeEventListener("copy",a);g.preventDefault();b.forEach(function(l){return g.clipboardData.setData(l.type,l.data)})};setTimeout(function(){return m.removeEventListener("copy",a)},300);m.addEventListener("copy",a);m.value="";m.select();m.ownerDocument.execCommand("copy")})}},{key:"doCopy",value:function(b){var e=this;return this.execCommand("manualCopy",function(){var m=e.domState.textareaNode;m.value=b;m.select();m.ownerDocument.execCommand("copy")})}},{key:"doPaste",value:function(){var b=
this;return this.execCommand("manualPaste",function(){var e=b.domState.textareaNode;e.value="";e.select();e.ownerDocument.execCommand("paste")})}},{key:"execCommand",value:function(b,e){var m=this,a,g,l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:if(!m.domState.isInstalled)throw Error("Cannot copy to clipboard \u2013 input helper is not installed into DOM!");a=m.inputState;if(!a[b]){r.jumpTo(2);break}r.setCatchFinallyBlocks(3);return r.yield(a[b].promise,
5);case 5:r.leaveTryBlock(2);break;case 3:r.enterCatchBlock();case 2:return g=fm.promise.deferred(),l=!1,a[b]={onEvent:function(u){l||(a[b]=null,l=!0,g.resolve(u))},promise:g.promise},e(),r.setCatchFinallyBlocks(6),r.yield(fm.promise.waitFor(1E3,function(){return l}),8);case 8:r.leaveTryBlock(7);break;case 6:q=r.enterCatchBlock(),a[b]=null,l=!0,g.reject(q);case 7:return r.return(g.promise)}})}},{key:"onTextAreaBlur",value:function(b){var e=this;setTimeout(function(){var m=e.domState||{},a=m.textareaNode;
m=m.rootNode;!m||document.activeElement!==m||e.world.focusedMorph&&e.world.focusedMorph.stealFocus||fm.touchInputDevice||lively.FreezerRuntime||a&&a.focus()})}},{key:"onTextAreaFocus",value:function(b){}},{key:"onRootNodeFocus",value:function(b){var e=this.domState||{},m=e.rootNode;if(b.target===e.textareaNode||b.target===m)this.world.focusedMorph&&this.world.focusedMorph.stealFocus||this.focus();this.inputState.composition=null}},{key:"onInput",value:function(b){if(!this.inputState.composition){if(!b.data){var e=
this.readValue();b.__defineGetter__("data",function(){return e})}this.resetValue();this.eventDispatcher.dispatchDOMEvent(b)}}},{key:"onCompositionStart",value:function(b){this.inputState.composition={};this.eventDispatcher.dispatchDOMEvent(b)}},{key:"onCompositionUpdate",value:function(b){var e=this.inputState.composition,m=this.readValue();e.lastValue!==m&&(e.lastValue=m,this.eventDispatcher.dispatchDOMEvent(b))}},{key:"onCompositionEnd",value:function(b){this.inputState.composition=null;this.eventDispatcher.dispatchDOMEvent(b)}},
{key:"setPosition",value:function(b){var e=(this.domState||{}).textareaNode;e&&(e.style.left=b.x+"px",e.style.top=b.y+"px")}},{key:"ensureBeingInVisibleBoundsOfWorld",value:function(b){this.setPosition(b.visibleBounds().center())}},{key:"ensureBeingAtCursorOfText",value:function(b){var e=b.world();if(e){var m=b.whatsVisible,a=b.cursorPosition,g=a.row;a=a.column;g=Math.max(m.startRow,Math.min(g,m.endRow));m=b.charBoundsFromTextPosition({row:g,column:a}).topLeft();b=e.visibleBounds().insetBy(10).constrainPt(b.worldPoint(m.subPt(b.scroll)));
this.inputState.positionChangedTime=Date.now();this.inputState.scrollLeftWhenChanged=document.documentElement.scrollLeft;this.inputState.scrollTopWhenChanged=document.documentElement.scrollTop;this.setPosition(b)}}}],[{key:"className",get:function(){return"TextInput"}}],h,{pathInPackage:function(){return"events/TextInput.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:235,end:12261})}(void 0),lfa=V1=fm.TextInput;fm.default=V1;var IO=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js");IO.arr=vf;var W1=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js"),n=h.hasOwnProperty("KillRing")&&"function"===typeof h.KillRing?h.KillRing:h.KillRing=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),
value:function(b){this.size=void 0===b?0:b;this.buffer=[];this.pointer=-1}},{key:"isCycling",value:function(){return this.pointer!==this.buffer.length-1}},{key:"add",value:function(b){var e=this.buffer;e.push(b);this.size&&e.length>this.size&&e.splice(0,e.length-this.size);this.pointer=this.buffer.length-1;return b}},{key:"yank",value:function(){return this.buffer[this.pointer]||""}},{key:"back",value:function(){this.pointer=(0>=this.pointer?this.buffer.length:this.pointer)-1;return this.yank()}}],
[{key:"className",get:function(){return"KillRing"}}],h,{pathInPackage:function(){return"events/KillRing.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:51,end:614})}(void 0),mfa=W1=IO.KillRing;IO.default=W1;var yh=lively.FreezerRuntime.recorderFor("lively.morphic/events/Keys.js");yh.computeHashIdOfEvent=kb;yh.isModifier=function(d){if(yh.isNumber(d))return!1;
d=d.replace(/-$/,"").toLowerCase();return yh.arr.withoutAll(Object.keys(yh.KEY_MODS),["","input-"]).includes(d)};yh.canonicalizeFunctionKey=function(d){d=d.toLowerCase();switch(d){case "space":d="space";break;case "esc":d="escape";break;case "return":d="enter";break;case "arrowleft":d="left";break;case "arrowright":d="right";break;case "arrowup":d="up";break;case "arrowdown":d="down";break;case "esc":d="escape";break;case "return":d="enter"}return yh.FUNCTION_KEYS.includes(d)?yh.string.capitalize(d):
""};yh.decodeKeyIdentifier=function(d,h){var n=/u\+?([\d\w]{4})/gi,b=function(e,m){return String.fromCharCode(parseInt(m,16))};d=d&&d.replace(n,b);if("Command"===d||"Cmd"===d)d="Meta";" "===d&&(d="Space");8===h&&(d="Backspace");return d};yh.identifyKeyFromCode=function(d){d=d.code;if("string"!==typeof d)return null;if(d.startsWith("Key"))return d.slice(3);if(d.startsWith("Numpad"))return d;if(d.startsWith("Digit")||d.startsWith("Arrow"))return d.slice(5);if(d.match(/^F[0-9]{1-2}$/))return d;switch(d){case "Insert":case "Home":case "PageUp":case "PageDown":return d;
case "Period":return".";case "Comma":return",";case "Help":return"Insert";case "Equal":return"=";case "Backslash":case "IntlBackslash":return"\\";case "Equal":return"=";case "Minus":return"-";case "BracketRight":return"]";case "BracketLeft":return"[";case "Quote":return"'";case "Backquote":return"`";case "Semicolon":return";"}return null};yh.dedasherize=function(d){for(var h=[];;){var n=d.indexOf("-");if(-1===n)return d&&h.push(d),h;0===n?(h.push(d[0]),d=d.slice(2)):(h.push(d.slice(0,n)),d=d.slice(n+
1))}};yh.bowser=Qs;yh.arr=vf;yh.string=vh;yh.letterRe=/[a-z]/i;yh.MODIFIER_KEYS={16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"};yh.KEY_MODS=function(){for(var d={control:1,ctrl:1,alt:2,option:2,shift:4,"super":8,win:8,meta:8,command:8,cmd:8},h=["alt","ctrl","meta","shift"],n=Math.pow(2,h.length);n--;)d[n]=h.filter(function(b){return n&d[b]}).join("-")+"-";d[0]="";d[-1]="input-";return d}();yh.isNumber=function(){var d=/^[0-9]+$/;return function(h){return d.test(h)}}();yh.FUNCTION_KEYS="backspace;tab;enter;pause;escape; ;pageup;pagedown;end;home;left;up;right;down;print;insert;delete;numpad0;numpad1;numpad2;numpad3;numpad4;numpad5;numpad6;numpad7;numpad8;numpad9;numpadenter;f1;f2;f3;f4;f5;f6;f7;f8;f9;f10;f11;f12;numlock;scrolllock".split(";");
yh.Keys={computeHashIdOfEvent:kb,keyComboToEventSpec:function(d,h){h=Object.assign({_isLivelyKeyEventSpec:!0,keyCombo:"",key:"",ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,isFunctionKey:!1,isModified:!1,onlyModifiers:!1},h);var n=yh.dedasherize(d),b={shift:"shiftKey",control:"ctrlKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey",command:"metaKey",cmd:"metaKey"};if("input"===n[0]&&2===n.length)return h.keyCombo=d,h.key=n[1],h;for(var e=n.length-1;0<=e;e--){var m=b[n[e].toLowerCase()];
m&&(n.splice(e,1),h.isModified=!0,h[m]=!0)}if(!n.length)return h.keyCombo=yh.Keys.eventToKeyCombo(h),h.key=yh.arr.last(yh.dedasherize(h.keyCombo)),h.onlyModifiers=!0,h;1<n.length&&console.warn('Strange key "'+d+'" encountered in keyComboToEventSpec, parsing probably failed');d=yh.arr.last(n);(n=yh.canonicalizeFunctionKey(d))?(h.isFunctionKey=!0,h.key=n):h.key=h.isModified?yh.string.capitalize(d):d;h.keyCombo=yh.Keys.eventToKeyCombo(h);return h},eventToKeyCombo:function(d,h){Object.assign({ignoreModifiersIfNoCombo:!1,
ignoreKeys:[]},h);h=d.key;var n=d.data,b=d.keyIdentifier;if("string"===typeof n)return"input-"+n;if(!h&&b&&(h=yh.decodeKeyIdentifier(b,d.which||d.keyCode),d.key=h=h[d.shiftKey?"toUpperCase":"toLowerCase"](),yh.isModifier(h)))return yh.string.capitalize(h);n=yh.KEY_MODS[yh.computeHashIdOfEvent(d)];if("input-"===n)return n+h;d.code&&(h=yh.identifyKeyFromCode(d)||h);d=!h||yh.isModifier(h)?n.replace(/-$/,""):n+h;d.match(/\s$/)&&(d=d.replace(/\s$/,"Space"));return d.replace(/(^|-)([a-z])/g,function(e,
m,a){return m+a.toUpperCase()})},canonicalizeKeyCombo:function(d){return yh.Keys.eventToKeyCombo(yh.Keys.keyComboToEventSpec(d))},canonicalizeEvent:function(d){return d._isLivelyKeyEventSpec?d:yh.Keys.keyComboToEventSpec(yh.Keys.eventToKeyCombo(d))}};var JO=yh.Keys;yh.default=JO;var sh=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js");sh.bowser=Qs;sh.obj=Pf;sh.pt=oh;sh.Keys=JO;sh.cumulativeOffset=Bv;var KO="pointerover pointerenter pointerout pointerleave pointerdown pointermove pointerup pointercancel gotpointercapture lostpointercapture".split(" ");
sh.pointerEvents=KO;sh.pointerEvents=KO;sh.pointerEvents=KO;var LO="mouseover mouseenter mousedown mousemove mouseup mouseout mouseleave click dblclick contextmenu mousewheel".split(" ");sh.mouseEvents=LO;sh.mouseEvents=LO;sh.mouseEvents=LO;var MO=["keydown","keyup","keypress"];sh.keyboardEvents=MO;sh.keyboardEvents=MO;sh.keyboardEvents=MO;var cI=sh.keyboardEvents.concat("input","compositionstart","compositionupdate","compositionend");sh.keyLikeEvents=cI;sh.keyLikeEvents=cI;sh.keyLikeEvents=cI;var dI=
function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=h.hasOwnProperty("Event")&&"function"===typeof h.Event?h.Event:h.Event=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m,a,g,l,q){this.type=b;this.domEvt=e;this.dispatcher=m;this.targetMorphs=a;this.hand=g;this.halo=l;this.layoutHalo=q;this.stopped=!1;this._keyCombo=
void 0;this.onDispatchCallbacks=[];this.onAfterDispatchCallbacks=[];this.onStopCallbacks=[]}},{key:"onDispatch",value:function(b){this.onDispatchCallbacks.push(b);return this}},{key:"onAfterDispatch",value:function(b){this.onAfterDispatchCallbacks.push(b);return this}},{key:"onStop",value:function(b){this.onStopCallbacks.push(b);return this}},{key:"data",get:function(){return this.domEvt.data}},{key:"world",get:function(){return this.dispatcher.world}},{key:"state",get:function(){return this.dispatcher.eventState}},
{key:"keyInputState",get:function(){return this.state.keyInputState}},{key:"isMouseEvent",value:function(){return sh.pointerEvents.includes(this.type)||sh.mouseEvents.includes(this.type)}},{key:"isKeyboardEvent",value:function(){return!this.isMouseEvent()&&sh.keyboardEvents.includes(this.type)}},{key:"stop",value:function(){this.stopped=!0;this.domEvt&&"function"===typeof this.domEvt.stopPropagation&&this.domEvt.stopPropagation();this.domEvt&&"function"===typeof this.domEvt.preventDefault&&this.domEvt.preventDefault();
this.onStopCallbacks.forEach(function(b){return b()})}},{key:"targetMorph",get:function(){return this.targetMorphs[0]}},{key:"timestamp",get:function(){return this.domEvt.timeStamp}},{key:"position",get:function(){if(!this.domEvt)return sh.pt(0,0);for(var b=this.domEvt.target;b&&b.id!==this.world.id;)b=b.parentNode;b||(b=this.domEvt.target,b=(b.nodeType===b.DOCUMENT_NODE?b:b.ownerDocument).getElementById(this.world.id));if(!b)return console.error("event position: cannot find world node for determining the position!"),
sh.pt(0,0);b=sh.cumulativeOffset(b);var e=this.domEvt;b=sh.pt((e.pageX||0)-b.left,(e.pageY||0)-b.top);1!==this.world.scale&&(b=b.scaleBy(1/this.world.scale));return b}},{key:"startPosition",get:function(){return this.state.clickedOnPosition}},{key:"pressure",get:function(){return this.domEvt?this.domEvt.pressure:.5}},{key:"positionIn",value:function(b){return b.localize(this.position)}},{key:"isClickTarget",value:function(b){var e=this.state.clickedOnMorph;return e&&(b===e||b.isAncestorOf(e))}},{key:"leftMouseButtonPressed",
value:function(){return this.domEvt?(this.domEvt.buttons||0)&1:!1}},{key:"rightMouseButtonPressed",value:function(){return 3===this.domEvt.which||2===this.domEvt.buttons}},{key:"middleMouseButtonPressed",value:function(){return this.domEvt?(this.domEvt.buttons||0)&4:!1}},{key:"isCommandKey",value:function(){var b=this.domEvt;if(!b)return!1;var e=!1;sh.bowser.mac||(e=e||b.ctrlKey);if(sh.bowser.tablet||sh.bowser.tablet)e=e||!1;return e||b.metaKey||"Meta"===b.keyIdentifier}},{key:"isShiftDown",value:function(){return this.domEvt&&
!!this.domEvt.shiftKey}},{key:"isCtrlDown",value:function(){return this.domEvt&&!!this.domEvt.ctrlKey}},{key:"isAltDown",value:function(){return this.domEvt&&!!this.domEvt.altKey}},{key:"keyCombo",get:function(){return this._keyCombo||(this._keyCombo=sh.Keys.eventToKeyCombo(this.domEvt))}},{key:"keyCombo",set:function(b){return this._keyCombo=b}}],[{key:"className",get:function(){return"Event"}}],h,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:956,end:4962})}(void 0);sh.Event=dI;sh.Event=dI;sh.Event=dI;var eI=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=h.hasOwnProperty("KeyEvent")&&"function"===typeof h.KeyEvent?h.KeyEvent:h.KeyEvent=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m,a,g,l,q){console.assert(sh.keyLikeEvents.includes(b),"not a keyboard event: "+b);Sb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b,e,m,a,g,l,q);Object.assign(this,sh.Keys.canonicalizeEvent(e))}},{key:"isKeyEvent",get:function(){return!0}}],[{key:"className",get:function(){return"KeyEvent"}}],h,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4972,end:5341})}(sh.Event);sh.KeyEvent=eI;sh.KeyEvent=eI;sh.KeyEvent=eI;var fI=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=h.hasOwnProperty("SimulatedDOMEvent")&&"function"===typeof h.SimulatedDOMEvent?h.SimulatedDOMEvent:h.SimulatedDOMEvent=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;if(b.position){var e=b.position,m=e.x;e=e.y;b=sh.obj.dissoc(b,["position"]);b.pageX=m;b.pageY=e}!b.hasOwnProperty("pointerId")&&sh.mouseEvents.concat(sh.pointerEvents).includes(b.type)&&(b=Object.assign({},b,{pointerId:1}));Object.assign(this,Object.assign({type:void 0,target:void 0,pageX:void 0,pageY:void 0,pointerId:void 0,pointerType:"mouse",buttons:0,keyCode:void 0,keyString:"",keyIdentifier:void 0,
altKey:!1,ctrlKey:!1,shiftKey:!1,metaKey:!1,stopped:!1},b))}},{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}],[{key:"className",get:function(){return"SimulatedDOMEvent"}}],h,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:5350,end:6246})}(void 0);sh.SimulatedDOMEvent=fI;sh.SimulatedDOMEvent=fI;sh.SimulatedDOMEvent=fI;var bf=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js");bf.dragStartEvent=function(d,h,n,b,e,m,a){var g=(new bf.Event("morphicdragstart",d,h,[n],e,m,a)).onDispatch(function(){b.draggedMorph=n;b.dragStartMorphPosition=n.position;b.dragStartPosition=g.position;b.lastDragPosition=g.position;b.dragDelta=bf.pt(0,0);b.absDragDelta=bf.pt(0,0)}).onStop(function(){b.draggedMorph=
null;h.schedule(bf.dragEndEvent(d,h,n,b,e,m,a))});return g};bf.dragEvent=function(d,h,n,b,e,m,a){var g=(new bf.Event("morphicdrag",d,h,[b.draggedMorph],e,m,a)).onDispatch(function(){b.dragDelta=(b.draggedMorph.owner||h.world).getInverseTransform().transformDirection(g.position.subPt(b.lastDragPosition));b.absDragDelta=g.position.subPt(b.clickedOnPosition)}).onAfterDispatch(function(){return b.lastDragPosition=g.position}).onStop(function(){b.draggedMorph=null;h.schedule(bf.dragEndEvent(d,h,n,b,e,
m,a))});return g};bf.dragEndEvent=function(d,h,n,b,e,m,a){var g=b.draggedMorph||n,l=(new bf.Event("morphicdragend",d,h,[g],e,m,a)).onDispatch(function(){b.dragDelta=(g.owner||h.world).getInverseTransform().transformDirection(l.position.subPt(b.lastDragPosition));b.absDragDelta=l.position.subPt(b.clickedOnPosition)}).onAfterDispatch(function(){b.draggedMorph=null;b.lastDragPosition=null;b.dragDelta=bf.pt(0,0);b.absDragDelta=bf.pt(0,0);b.dragStartMorphPosition=null;b.dragStartPosition=null});return l};
bf.focusEvents=function(d,h){var n=d.eventState;if(n.focusedMorph===h)return[];d=[];n.focusedMorph&&d.push((new bf.Event("blur",null,this,[n.focusedMorph],null,null,null)).onDispatch(function(){return n.focusedMorph=null}));d.push((new bf.Event("focus",null,this,[h],null,null,null)).onDispatch(function(){return n.focusedMorph=h}));return d};bf.arr=vf;bf.fun=nl;bf.Path=nh;bf.promise=yg;bf.pt=oh;bf.config=wk;bf.TextInput=lfa;bf.KillRing=mfa;bf.Event=dI;bf.KeyEvent=eI;bf.SimulatedDOMEvent=fI;bf.keyLikeEvents=
cI;bf.cumulativeOffset=Bv;bf.bowser=Qs;bf.domEventsWeListenTo=[{type:"pointerdown",capturing:!1},{type:"pointerup",capturing:!1},{type:"pointermove",capturing:!1,passive:!1},{type:"pointerover",capturing:!1,passive:!1},{type:"pointerout",capturing:!1,passive:!1},{type:"contextmenu",capturing:!1},{type:"scroll",capturing:!0,passive:!1},{type:"drag",capturing:!1},{type:"dragstart",capturing:!1},{type:"dragend",capturing:!1},{type:"dragover",capturing:!1},{type:"dragenter",capturing:!1},{type:"dragleave",
capturing:!1},{type:"drop",capturing:!1}];bf.eventsCausingImmediateRender=new Set(["pointerdown","pointerup","keydown","keyup","input"]);bf.globalDomEventsWeListenTo=[{type:"resize",capturing:!1,morphMethod:"onWindowResize"},{type:"orientationchange",capturing:!1,morphMethod:"onWindowResize"},{type:"scroll",capturing:!1,passive:!1,morphMethod:"onWindowScroll"},{type:"wheel",capturing:!1,passive:!1,morphToMethod:"onMouseWheel"},{type:"beforeunload",capturing:!1,passive:!1,morphMethod:"onBeforeUnload"}];
bf.typeToMethodMap={pointerdown:"onMouseDown",pointerup:"onMouseUp",pointermove:"onMouseMove",longclick:"onLongClick",hoverin:"onHoverIn",hoverout:"onHoverOut",morphicdrag:"onDrag",morphicdragstart:"onDragStart",morphicdragend:"onDragEnd",grab:"onGrab",morphicdrop:"onDrop",morphicdrophoverin:"onDropHoverIn",morphicdrophoverout:"onDropHoverOut",morphicdrophoverupdate:"onDropHoverUpdate",keydown:"onKeyDown",keyup:"onKeyUp",input:"onTextInput",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",
compositionend:"onCompositionEnd",blur:"onBlur",focus:"onFocus",contextmenu:"onContextMenu",cut:"onCut",copy:"onCopy",paste:"onPaste",scroll:"onScroll",wheel:"onMouseWheel",drag:"onNativeDrag",dragstart:"onNativeDragstart",dragend:"onNativeDragend",dragover:"onNativeDragover",dragenter:"onNativeDragenter",dragleave:"onNativeDragleave",drop:"onNativeDrop"};bf.focusTargetingEvents="keydown keyup keypress input compositionstart compositionupdate compositionend cut copy paste".split(" ");bf.textOnlyEvents=
["input","compositionstart","compositionupdate","compositionend"];var X1=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js"),n=h.hasOwnProperty("EventDispatcher")&&"function"===typeof h.EventDispatcher?h.EventDispatcher:h.EventDispatcher=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){this.activations=
0;this.emitter=b;this.keyInputHelper=null;this.world=e;this.installed=!1;this.handlerFunctions=[];this.killRing=new bf.KillRing(bf.config.text.clipboardBufferLength);this.nodeMorphMap=new WeakMap;this.timestampBase=bf.Path("performance.timing.navigationStart").get(b)||0;this.resetState()}},{key:"resetState",value:function(){this.eventState={timeOfLastActivity:0,focusedMorph:null,clickedOnPosition:null,clickedOnMorph:null,clickCount:0,prevClick:null,draggedMorph:null,dragDelta:null,absDragDelta:null,
lastDragPosition:null,dragStartMorphPosition:null,dragStartPosition:null,hover:{hoveredOverMorphs:[],unresolvedPointerOut:!1},scroll:{interactiveScrollInProgress:null},keyInputState:null,pressedKeys:{},html5Drag:{},dropHoverTarget:null};this.resetKeyInputState()}},{key:"resetKeyInputState",value:function(){this.eventState.keyInputState={keyChain:"",count:void 0}}},{key:"focusMorph",value:function(b){var e=this;this.keyInputHelper&&this.keyInputHelper.focus(b,this.world);bf.focusEvents(this,b).forEach(function(m){return e.dispatchEvent(m)})}},
{key:"isMorphFocused",value:function(b){return this.eventState.focusedMorph===b}},{key:"isMorphHovered",value:function(b){return this.eventState.hover.hoveredOverMorphs.includes(b)}},{key:"isMorphClicked",value:function(b){return this.eventState.clickedMorph==b}},{key:"isKeyPressed",value:function(b){return Object.keys(this.eventState.pressedKeys).map(function(e){return e.toLowerCase()}).includes(b.toLowerCase())}},{key:"whenIdle",value:function(){var b=this;return bf.promise.waitFor(function(){return 0===
b.activations})}},{key:"install",value:function(b){var e=this;if(this.installed)return this;this.installed=!0;var m=this.emitter,a=System.global;bf.domEventsWeListenTo.forEach(function(g){var l=g.type,q=g.capturing;g=g.passive;var r=function(u){return e.dispatchDOMEvent(u)};e.handlerFunctions.push({node:m,type:l,fn:r,capturing:q});m.addEventListener(l,r,{capture:q,passive:g})});a.addEventListener&&bf.globalDomEventsWeListenTo.forEach(function(g){var l=g.type,q=g.capturing,r=g.morphMethod;g=g.passive;
var u=function(v){return e.dispatchDOMEvent(v,e.world,r)};e.handlerFunctions.push({node:a,type:l,fn:u,capturing:q});a.addEventListener(l,u,{capture:q,passive:g})});this.keyInputHelper=(new bf.TextInput(this)).install(b,this.world);bf.bowser.ios&&b.setAttribute("touch-action","auto");return this}},{key:"uninstall",value:function(){this.installed=!1;var b=this.handlerFunctions;b.forEach(function(e){e.node.removeEventListener(e.type,e.fn,e.capturing)});b.length=0;this.keyInputHelper&&this.keyInputHelper.uninstall();
this.keyInputHelper=null;return this}},{key:"processDOMEvent",value:function(b,e){var m=this,a=b.type,g=this.eventState,l=[e].concat(e.ownerChain()),q="touch"===b.pointerType,r=b.pointerId,u="number"===typeof r?this.world.handForPointerId(r,b.isPrimary):this.world.firstHand,v="number"!==typeof r||q?null:this.world.haloForPointerId(r),y="number"!==typeof r||q?null:this.world.layoutHaloForPointerId(r),z=new (bf.keyLikeEvents.includes(a)?bf.KeyEvent:bf.Event)(a,b,this,l,u,v,y),A=[z],B=[];switch(a){case "keydown":g.pressedKeys[z.key]=
!0;break;case "keyup":"Meta"===z.key?g.pressedKeys={}:delete g.pressedKeys[z.key];break;case "click":A=this.processDOMEvent(Object.assign({},b,{type:"pointerdown"}),e).events;a=this.processDOMEvent(Object.assign({},b,{type:"pointerup"}),e).events;A=A.concat(a);break;case "pointerdown":z.onDispatch(function(){m.focusMorph(e);g.clickedOnMorph=e;g.clickedOnPosition=z.position;g.downTimeStamp=b.timeStamp;var G=!1,E=0;if(g.prevClick){E=g.prevClick;G=E.clickedOnMorph;var K=E.clickedAtTime;E=E.clickCount;
K=Date.now()-K;G=G===e&&K<bf.config.repeatClickInterval}g.clickCount=G?E+1:1});break;case "pointerup":z.onAfterDispatch(function(){var G=g.clickedOnMorph,E=g.clickedOnPosition,K=g.clickCount,J=Date.now();g.prevClick={clickedOnMorph:G,clickedOnPosition:E,clickedAtTime:J,clickCount:K};g.clickedOnMorph=null;g.clickCount=0;G=b.timeStamp-g.downTimeStamp;E=g.clickedOnPosition.dist(z.position);K=bf.config.longClick;J=K.minDur;var P=K.maxDur;E<K.maxDist&&G>=J&&G<=P&&(G=new bf.Event("longclick",b,m,l,u,v,
y),m.schedule(G))});g.draggedMorph&&(A.push(bf.dragEndEvent(b,this,e,g,u,v,y)),z.targetMorphs=[this.world]);u.carriesMorphs()&&(g.dropHoverTarget?(A.push(new bf.Event("morphicdrophoverout",b,this,[g.dropHoverTarget],u,v,y)),e=g.dropHoverTarget,g.dropHoverTarget=null):e=u.findDropTarget(z.position,u.grabbedMorphs),u.isAncestorOf(e)&&(e=this.world),A.push(new bf.Event("morphicdrop",b,this,[e],u,v,y)),z.targetMorphs=[this.world]);break;case "pointermove":u.carriesMorphs()?(z.targetMorphs=[this.world],
a=u.findDropTarget(z.position,u.grabbedMorphs)||this.world,g.dropHoverTarget===a?A.push(new bf.Event("morphicdrophoverupdate",b,this,[a],u,v,y)):(g.dropHoverTarget&&A.push(new bf.Event("morphicdrophoverout",b,this,[g.dropHoverTarget],u,v,y)),g.dropHoverTarget=a,A.push(new bf.Event("morphicdrophoverin",b,this,[a],u,v,y)))):g.draggedMorph?(z.targetMorphs=[this.world],A.push(bf.dragEvent(b,this,e,g,u,v,y))):g.clickedOnMorph&&g.clickedOnPosition&&g.clickedOnMorph.draggable&&!g.draggedMorph&&!u.carriesMorphs()&&
(a=g.clickedOnPosition.dist(z.position),q=g.clickedOnMorph,a>q.dragTriggerDistance&&(q.grabbable?A.push(new bf.Event("grab",b,this,[q],u,v,y)):q.draggable&&A.push(bf.dragStartEvent(b,this,q,g,u,v,y)),z.targetMorphs=[this.world]));break;case "pointerover":g.hover.unresolvedPointerOut&&(g.hover.unresolvedPointerOut=!1);a=[e].concat(e.ownerChain()).reverse();A=bf.arr.withoutAll(g.hover.hoveredOverMorphs,a).map(function(G){return(new bf.Event("hoverout",b,m,[G],u,v,y)).onDispatch(function(){return bf.arr.remove(g.hover.hoveredOverMorphs,
G)})});a=bf.arr.withoutAll(a,g.hover.hoveredOverMorphs).map(function(G){return(new bf.Event("hoverin",b,m,[G],u,v,y)).onDispatch(function(){return bf.arr.pushIfNotIncluded(g.hover.hoveredOverMorphs,G)})});A=A.concat(a);break;case "pointerout":A=[];g.hover.unresolvedPointerOut=!0;B.push(function(){if(g.hover.unresolvedPointerOut)return Promise.all(g.hover.hoveredOverMorphs.map(function(G){return m.schedule((new bf.Event("hoverout",b,m,[G],u,v,y)).onAfterDispatch(function(){return bf.arr.remove(g.hover.hoveredOverMorphs,
G)}))}))});q&&this.world.removeHandForPointerId(r);break;case "blur":A=[(new bf.Event(a,b,this,[e],u,v,y)).onDispatch(function(){return g.focusedMorph=null})];break;case "focus":A=bf.focusEvents(this,e);break;case "scroll":A=[(new bf.Event(a,b,this,[e],u,v,y)).onDispatch(function(){if(!g.scroll.interactiveScrollInProgress){var G=bf.promise.deferred(),E=G.promise,K=G.resolve;G="Firefox"==bf.bowser.name?500:250;"Safari"==bf.bowser.name&&(G=1E3);g.scroll.interactiveScrollInProgress=E;E.debounce=bf.fun.debounce(G,
function(){g.scroll.interactiveScrollInProgress=null;K()})}g.scroll.interactiveScrollInProgress.debounce();E=b.target.documentElement||b.target;G=E.scrollLeft;var J=E.scrollTop,P=e.scroll,ea=P.x;P=P.y;if("hidden"!=E.style.overflow&&ea!==G||P!==J)e.scroll=bf.pt(G,J)})];break;case "input":case "compositionstart":case "compositionupdate":case "compositionend":e.isText?z.targetMorphs=[e]:A=[];break;case "drag":case "dragstart":case "dragend":case "dragover":case "dragenter":case "dragleave":case "drop":"drop"!==
a&&"dragover"!==a||b.preventDefault()}return{events:A,later:B}}},{key:"schedule",value:function(b){var e=this;this.activations++;return Promise.resolve().then(function(){return e.dispatchEvent(b)}).then(function(){return e.activations--},function(m){e.activations--;throw m;})}},{key:"dispatchEvent",value:function(b,e){e=e||bf.typeToMethodMap[b.type];if(!e)throw Error("dispatchEvent: "+b.type+" not yet supported!");b.onDispatchCallbacks.forEach(function(g){return g()});this.activations++;for(var m,
a=b.targetMorphs.length-1;0<=a;a--){try{b.targetMorphs[a][e](b)}catch(g){m=Error("Error in event handler "+b.targetMorphs[a]+"."+e+": "+(g.stack||g)),m.originalError=g,"undefined"!==typeof this.world?this.world.logError(m):console.error(m)}if(m||b.stopped)break}this.activations--;b.onAfterDispatchCallbacks.forEach(function(g){return g()});if(m)throw m;}},{key:"dispatchDOMEvent",value:function(b,e,m){var a=this,g=this.world,l=this.eventState,q=this.nodeMorphMap,r=b.type;l.timeOfLastActivity=this.timestampBase+
b.timeStamp;if(!e&&bf.focusTargetingEvents.includes(r))e=l.focusedMorph||g;else if(!e){for(l=b.target;;){e=l.className||"";"string"!==typeof e&&"baseVal"in e&&(e=e.baseVal);if(e&&e.includes("Morph"))break;if(!(l=l.parentNode))return}e=q.get(l);if(!e){var u=l.id;(e=g.withAllSubmorphsDetect(function(v){return v.id===u}))&&q.set(l,e)}}e&&(b=this.processDOMEvent(b,e),q=b.events,b.later.map(function(v){a.activations++;return bf.promise.delay(0).then(v).then(function(){return a.activations--},function(y){a.activations--;
throw y;})}),q.forEach(function(v){return a.dispatchEvent(v,m)}),g&&g.needsRerender()&&bf.eventsCausingImmediateRender.has(r)&&g.env.renderer.renderLater())}},{key:"simulateDOMEvents",value:function(b){for(var e=[],m=0;m<arguments.length;++m)e[m-0]=arguments[m];m=this.emitter.document||this.emitter.ownerDocument;var a=[];e=$jscomp.makeIterator(e);for(var g=e.next();!g.done;g=e.next()){var l=g=g.value,q=l.target,r=l.position;l=l.type;if(bf.focusTargetingEvents.includes(l)){if(!this.keyInputHelper.domState.textareaNode)throw Error("Cannot simulate event of type "+
l+", no keyInputHelper installed!");g=Object.assign({},g,{target:this.keyInputHelper.textareaNode})}q||(q=r?this.world.morphsContainingPoint(r)[0]:this.world);q.isMorph&&(g=Object.assign({},g,{target:m.getElementById(q.id)}));g.position&&(q=bf.cumulativeOffset(m.getElementById(this.world.id)),g.position=g.position.addXY(q.left,q.top));"scroll"===l&&("scrollLeft"in g||"scrollTop"in g)&&(g.target.scrollLeft=g.scrollLeft||0,g.target.scrollTop=g.scrollTop||0);g=new bf.SimulatedDOMEvent(g);a.push(g);this.dispatchDOMEvent(g)}return a}},
{key:"doCopy",value:function(b){return this.keyInputHelper.doCopy(b)}},{key:"doCopyWithMimeTypes",value:function(b){return this.keyInputHelper.doCopyWithMimeTypes(b)}},{key:"doPaste",value:function(){return this.keyInputHelper.doPaste()}},{key:"cancelGrab",value:function(b,e){var m=this,a=[],g=this.eventState;g.clickedOnMorph=null;g.dropHoverTarget&&(a.push(new bf.Event("morphicdrophoverout",e.domEvt,this,[g.dropHoverTarget],b,null,null)),g.dropHoverTarget=null);a.forEach(function(l){return m.dispatchEvent(l)})}}],
[{key:"className",get:function(){return"EventDispatcher"}}],h,{pathInPackage:function(){return"events/EventDispatcher.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7617,end:30013})}(void 0),nfa=X1=bf.EventDispatcher;bf.default=X1;var Fk=lively.FreezerRuntime.recorderFor("lively.morphic/env.js");Fk.defaultDOMEnv=Oi;Fk.Renderer=
aI;Fk.FontMetric=kfa;Fk.ChangeManager=bI;Fk.UndoManager=yD;Fk.EventDispatcher=nfa;Fk.subscribe=Fq;Fk.unsubscribe=wp;var Wp=sa("aW",function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/env.js"),n=h.hasOwnProperty("MorphicEnv")&&"function"===typeof h.MorphicEnv?h.MorphicEnv:h.MorphicEnv=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){var e=
this;b=void 0===b?Fk.defaultDOMEnv():b;this.initialized=!1;this.synchronizer=this.objPool=this.systemChangeHandlers=this.world=this.eventDispatcher=this.renderer=this.fontMetric=null;this.changeManager=new Fk.ChangeManager;this.undoManager=new Fk.UndoManager;this.installSystemChangeHandlers();this.whenRenderedRequesters=new Map;this.whenRenderedTickingProcess=null;"function"===typeof b.then?this._waitForDOMEnv=b.then(function(m){e._waitForDOMEnv=null;e.initWithDOMEnv(m);e.initialized=!0}).catch(function(m){return console.error("Error initializing MorphicEnv with dom env: "+
m.stack)}):(this.initWithDOMEnv(b),this.initialized=!0)}},{key:"isDefault",value:function(){return this.constructor.default()===this}},{key:"initWithDOMEnv",value:function(b){this.domEnv=b;this.fontMetric=Fk.FontMetric.forDOMEnv(b)}},{key:"uninstallWorldRelated",value:function(){this.renderer&&this.renderer.clear();this.eventDispatcher&&this.eventDispatcher.uninstall();this.world&&this.world.suspendSteppingAll()}},{key:"uninstall",value:function(){var b=this;if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return b.uninstall()});
this.deleteHistory();this.uninstallWorldRelated();this.fontMetric&&(this.fontMetric.uninstall(),this.fontMetric=null);this.domEnv&&this.whenRenderedTickingProcess&&(this.domEnv.window.cancelAnimationFrame(this.whenRenderedTickingProcess),this.whenRenderedTickingProcess=null);this.whenRenderedRequesters=new Map;this.domEnv&&this.domEnv.destroy();this.initialized=!1;return Promise.resolve()}},{key:"setWorld",value:function(b){var e=this;return this._waitForDOMEnv?this._waitForDOMEnv.then(function(){return e.setWorld(b)}):
this.setWorldRenderedOn(b,this.domEnv.document.body)}},{key:"setWorldRenderedOn",value:function(b,e,m){var a=this;m=void 0===m?null:m;if(!b||!b.isWorld)throw Error("world object does not look like a morphic world");if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return a.setWorldRenderedOn(b,e,m)});this.deleteHistory();this.uninstallWorldRelated();this.world=b;this.renderer=new Fk.Renderer(b,e,this.domEnv);this.renderer.domNode=m;this.eventDispatcher=(new Fk.EventDispatcher(this.domEnv.window,
b)).install(e);b.resumeSteppingAll();this.isDefault()&&(this.domEnv.window.$world=b);b.focus();b.makeDirty();this.renderer.renderLater();return b.whenRendered().then(function(){return a})}},{key:"installSystemChangeHandlers",value:function(){var b=this;if(!this.systemChangeHandlers){var e=this.systemChangeHandlers={};e["lively.modules/moduleloaded"]=[Fk.subscribe("lively.modules/moduleloaded",function(m){return b.getTargetsFor("onModuleLoaded").forEach(function(a){return a.onModuleLoaded(m)})})];
e["lively.modules/modulechanged"]=[Fk.subscribe("lively.modules/modulechanged",function(m){return b.getTargetsFor("onModuleChanged").forEach(function(a){return a.onModuleChanged(m)})})];e["lively.partsbin/partpublished"]=[Fk.subscribe("lively.partsbin/partpublished",function(m){return b.getTargetsFor("onPartPublished").forEach(function(a){return a.onPartPublished(m)})})];e["lively.user/userchanged"]=[Fk.subscribe("lively.user/userchanged",function(m){return b.getTargetsFor("onUserChanged").forEach(function(a){return a.onUserChanged(m)})})]}}},
{key:"uninstallSystemChangeHandlers",value:function(){var b=this.systemChangeHandlers;b&&(this.systemChangeHandlers=null,Object.keys(b).forEach(function(e){return b[e].forEach(function(m){return Fk.unsubscribe(e,m)})}))}},{key:"getTargetsFor",value:function(b){var e=this.world,m=[];if(!e||!e.submorphs)return m;"function"===typeof e[b]&&m.push(e);e=$jscomp.makeIterator(e.submorphs);for(var a=e.next();!a.done;a=e.next())a=a.value,"function"===typeof a[b]&&m.push(a),a.isWindow&&a.targetMorph&&"function"===
typeof a.targetMorph[b]&&m.push(a.targetMorph);return m}},{key:"cleanupCaches",value:function(){this.world.withAllSubmorphsDo(function(b){return b._pathDependants=b._pathDependants.filter(function(e){return e.world()})})}},{key:"deleteHistory",value:function(){var b=this.changeManager,e=this.world,m=this.fontMetric;b&&(b.changes.length=0);e&&e.withAllSubmorphsDo(function(a){return a.undoManager&&a.undoManager.reset()});m&&m.reset()}},{key:"printStatus",value:function(){var b=this.changeManager,e=
this.world,m=0,a=0;e&&e.withAllSubmorphsDo(function(g){g.undoManager&&(m++,a+=g.undoManager.undos.length+g.undoManager.redos.length)});return b.changes.length+" changes recorded\n"+m+" morphs with undos\n"+a+" undo changes"}},{key:"updateWhenRenderedRequests",value:function(){for(var b=this,e=this.whenRenderedRequesters,m=0,a=$jscomp.makeIterator(e),g=a.next();!g.done;g=a.next()){var l=$jscomp.makeIterator(g.value);g=l.next().value;var q=l=l.next().value,r=q.maxAttempts,u=q.resolve;q=q.reject;g._dirty||
g._rendering?++l.currentAttempt>r?(e.delete(g),q(Error("Failed to wait for whenRendered of "+g+" (tried "+r+"x)"))):m++:(e.delete(g),u(g))}this.whenRenderedTickingProcess=m?this.domEnv.window.requestAnimationFrame(function(){return b.updateWhenRenderedRequests()}):null}},{key:"whenRendered",value:function(b,e){var m=this;e=void 0===e?50:e;var a=this.whenRenderedRequesters,g=this.whenRenderedTickingProcess,l=a.get(b);if(!l){var q,r;l=new Promise(function(u,v){q=u;r=v});a.set(b,l={maxAttempts:e,currentAttempt:0,
resolve:q,reject:r,promise:l})}g||(this.whenRenderedTickingProcess=this.domEnv.window.requestAnimationFrame(function(){return m.updateWhenRenderedRequests()}));return l.promise}}],[{key:"className",get:function(){return"MorphicEnv"}},{key:"reset",value:function(){for(;;){var b=this.popDefault();if(!b)break;try{b.uninstall()}catch(e){console.error("Error uninstalling MorphicEnv: "+(e.stack||e))}}}},{key:"default",value:function(){var b=this.envs;b.length||this.pushDefault(new this);return b[b.length-
1]}},{key:"pushDefault",value:function(b){this.envs.push(b);return b}},{key:"popDefault",value:function(){return this.envs.pop()}},{key:"envs",get:function(){return this._envs||(this._envs=[])}}],h,{pathInPackage:function(){return"env.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:406,end:8262})}(void 0));Fk.MorphicEnv=Wp;Fk.MorphicEnv=
Wp;Fk.MorphicEnv=Wp;var ofa=Object.freeze({__proto__:null,MorphicEnv:Wp}),Eu=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js");Eu.printArg=function(d){return Eu.obj.inspect(d,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};Eu.obj=Pf;Eu.arr=vf;Eu.promise=yg;var Y1=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js"),n=h.hasOwnProperty("CommandHandler")&&"function"===typeof h.CommandHandler?h.CommandHandler:h.CommandHandler=function(b){b&&
b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.history=[];this.maxHistorySize=1E3}},{key:"addToHistory",value:function(b){this.history.push(b);this.history.length>this.maxHistorySize&&this.history.splice(0,this.history.length-this.maxHistorySize)}},{key:"printHistory",value:function(){return this.history.map(this.printCommand).join("\n")}},{key:"printCommand",
value:function(b){var e=b.target.string,m=b.args,a=b.count,g=b.evt,l=b.keyCombo;return'"'+b.name+'" '+(g?g+" ":"")+(l?l+" ":"")+(m?Eu.printArg(m):"")+("number"===typeof a?" x"+a:"")+" "+e}},{key:"lookupCommand",value:function(b,e){var m;if(!b)return{};"string"===typeof b&&(m=b);"string"===typeof b.command&&(m=b.command);if(b.exec){var a=b;m=a.name}a||(a=e.commands.find(function(g){return g.name===m}));return{name:m,command:a}}},{key:"exec",value:function(b,e,m,a,g){var l=this,q=this.lookupCommand(b,
e)||{},r=q.name,u=q.command;if(!u)return console.warn("Cannot find command "+(r||b)),null;if(r){if(g){var v=g.type;if(g.isKeyEvent)var y=g.keyCombo}this.addToHistory({name:r,target:{string:String(e),id:e.id},args:m,count:a,time:Date.now(),evt:v,keyCombo:y})}var z=e.world();"string"===typeof u.progressIndicator&&(this.progressIndicator=z.execCommand("open loading indicator",u.progressIndicator));if("function"===typeof u.exec)try{var A=u.exec(e,m,u.handlesCount?a:void 0,g)}catch(B){A=B,b="Error in interactive command "+
r+": "+(B.stack||B),z?z.logError(b):console.error(b)}else console.error("command "+r+" has no exec function!");this.progressIndicator&&this.progressIndicator.remove();A&&"function"===typeof A.catch?(A.catch(function(B){var G="Error in interactive command "+r+": "+B+"\n"+(B.stack||B);z?z.logError(G):console.error(G);throw B;}),this.progressIndicator&&Eu.promise.finally(A,function(){return l.progressIndicator.remove()})):this.progressIndicator&&this.progressIndicator.remove();A&&"number"===typeof a&&
1<a&&!u.handlesCount&&(A="function"===typeof A.then?A.then(function(){return l.exec(u,e,m,a-1,g,null)}):this.exec(u,e,m,a-1,g,null));return A}}],[{key:"className",get:function(){return"CommandHandler"}}],h,{pathInPackage:function(){return"CommandHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:189,end:3586})}(void 0),pfa=
Y1=Eu.CommandHandler;Eu.default=Y1;var cg=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js");cg.ensureSpaces=function(d){return d.length?d:" "};cg.invokeKeyHandlers=function(d,h,n){n=void 0===n?!1:n;var b=h=cg.Keys.canonicalizeEvent(h),e=b.key,m=b.data,a,g=!1,l=d.keyhandlers,q=h.keyInputState||{};b=b.keyCombo.startsWith("input-");var r=!1,u=q.count,v=q.keyChain||"",y=!1;if(!l||n&&b)return!1;for(n=l.length;n--;)if((a=l[n].eventCommandLookup(d,h))&&a.command){y=a;a=y.command;var z=
y.args,A=y.passEvent,B=y.count;r=y.keyChain;var G=y.onlyWhenFocused;y=!0;u=B;v=r;r="null"===a;if(G&&(G=d.world())&&G.focusedMorph&&G.focusedMorph!==d)continue;g=r?!1:d.execCommand(a,z,B,h);!g||b&&"insertstring"===a||A||"function"!==typeof h.stop||h.stop();if(g||r)break}g||r||!b||!d.onTextInput||v||(g=d.execCommand("insertstring",{string:m||e,undoGroup:cg.config.text.undoGroupDelay},q.count,h));if(y)if("function"===typeof h.onAfterDispatch)h.onAfterDispatch(function(){q.count=g?void 0:u;q.keyChain=
g?"":v});else q.count=g?void 0:u,q.keyChain=g?"":v;return g&&!r};cg.simulateKeys=function(d,h,n){n=void 0===n?{keyChain:void 0,count:void 0}:n;var b,e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){1==g.nextAddress&&(b=1===h.length?[h]:h.split(/ /g).map(cg.ensureSpaces),e=$jscomp.makeIterator(b),m=e.next());if(3!=g.nextAddress){if(m.done)return g.jumpTo(0);a=m.value;return g.yield(cg.simulateKey(d,a,n),3)}m=e.next();return g.jumpTo(2)})};cg.simulateKey=function(d,h,n){return cg.invokeKeyHandlers(d,
Object.assign({},cg.Keys.keyComboToEventSpec(h),{keyInputState:n}))};cg.bowserOS=function(){return cg.bowser.mac?"mac":cg.bowser.windows?"windows":cg.bowser.windowsphone?"windowsphone":cg.bowser.linux?"linux":cg.bowser.chromeos?"chromeos":cg.bowser.android?"android":cg.bowser.ios?"ios":cg.bowser.blackberry?"blackberry":cg.bowser.firefoxos?"firefoxos":cg.bowser.webos?"webos":cg.bowser.bada?"bada":cg.bowser.tizen?"tizen":cg.bowser.sailfish?"sailfish":"unknown"};cg.findKeysForPlatform=jb;cg.Keys=JO;
cg.bowser=Qs;cg.config=wk;cg.arr=vf;cg.findKeysForPlatform=jb;cg.findKeysForPlatform=jb;cg.regexps={meta:/Meta|Cmd|Command/gi,alt:/Alt/gi,ctrl:/Ctrl|Control/gi,tab:/Tab/gi,enter:/Enter|Return/gi,shift:/Shift/gi,backspace:/Backspace/gi,delete:/del(ete)?/gi,left:/left/gi,right:/right/gi,up:/up/gi,down:/down/gi,keySpacer:/([^-])-/g,seqSpacer:/([^\s])\s/g};var NO=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js"),n=h.hasOwnProperty("KeyHandler")&&"function"===typeof h.KeyHandler?
h.KeyHandler:h.KeyHandler=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.platform=b=void 0===b?cg.bowserOS():b;this.keyBindings={}}},{key:"eventCommandLookup",value:function(b,e){return this.lookup(e.keyCombo,e.keyInputState)}},{key:"lookup",value:function(b,e){var m=this;e=void 0===e?{keyChain:void 0,count:void 0}:e;b=cg.Keys.canonicalizeKeyCombo(b);
var a=e.keyChain||"";e=e.count;if(!a&&b.startsWith("Ctrl-")){var g=b.match(/^Ctrl-([0-9]+)/);if(g)return{command:"null",count:parseInt(("number"===typeof e?e:"")+g[1])};if("Ctrl-U"===b)return{command:"null",count:4,keyChain:"Ctrl-U"}}g=[b];if(!q&&b.startsWith("input-")){q=b.replace(/^(input-)(.*)$/,function(r,u,v){return u+v.toUpperCase()});var l=b.replace(/^(input-)(.*)$/,function(r,u,v){return u+v.toLowerCase()});g.push(q,l)}var q=g.map(function(r){return m.keyBindings[r]})[0];a&&(g=g.find(function(r){return m.keyBindings[a+
" "+r]}))&&(a+=" "+g,q=this.keyBindings[a]||q);if(q&&"chainKeys"===q)return a=a||b,b={command:"null",keyChain:a},void 0!==e&&(b.count=e),b;if(q)return b="object"===typeof q?Object.assign({},q):{command:q},void 0!==e&&(b.count=e),b}},{key:"bindKey",value:function(b,e){var m=this;"object"==typeof b&&b&&!Array.isArray(b)&&(b=cg.findKeysForPlatform(b,this.platform));if(b){if("function"==typeof e)return this.addCommand({exec:e,bindKey:b,name:e.name||b});(Array.isArray(b)?b:b.includes("|")?b.split("|"):
[b]).forEach(function(a){var g="";if(-1!=a.indexOf(" ")){var l=a.split(/\s+/);a=l.pop();l.forEach(function(q){q=cg.Keys.canonicalizeKeyCombo(q);g+=(g?" ":"")+q;m.addCommandToBinding(g,"chainKeys")});g+=" "}m.addCommandToBinding(g+cg.Keys.canonicalizeKeyCombo(a),e)});this.cleanupUnusedKeyChains()}}},{key:"unbindKey",value:function(b){this.bindKey(b,null)}},{key:"cleanupUnusedKeyChains",value:function(){var b=this,e=Object.keys(this.keyBindings),m=e.filter(function(a){return"chainKeys"===b.keyBindings[a]});
m=cg.arr.sortBy(m,function(a){return a.length}).reverse();m.forEach(function(a){e.some(function(g){return a!==g&&g.startsWith(a)})||(delete b.keyBindings[a],cg.arr.remove(e,a),cg.arr.remove(m,a))})}},{key:"addCommand",value:function(b){return b&&b.bindKey?this.addCommandToBinding(b.bindKey,b):void 0}},{key:"addCommandToBinding",value:function(b,e){var m=this;"chainKeys"===this.keyBindings[b]&&"chainKeys"!=e&&Object.keys(this.keyBindings).forEach(function(a){a.startsWith(b)&&delete m.keyBindings[a]});
e?this.keyBindings[b]=e:delete this.keyBindings[b];"chainKeys"!==e&&this.cleanupUnusedKeyChains()}}],[{key:"className",get:function(){return"KeyHandler"}},{key:"invokeKeyHandlers",value:function(b,e,m){return cg.invokeKeyHandlers(b,e,void 0===m?!1:m)}},{key:"simulateKeys",value:function(b,e,m){return cg.simulateKeys(b,e,m)}},{key:"withBindings",value:function(b,e){var m=new this(e);b.forEach(function(a){return m.bindKey(a.keys,a.command)});return m}},{key:"prettyCombo",value:function(b){var e=this._prettyCombos||
(this._prettyCombos={});return this._prettyCombos[b]?e[b]:e[b]=b.replace(cg.regexps.meta,"\u2318").replace(cg.regexps.alt,"\u2325").replace(cg.regexps.ctrl,"\u2303").replace(cg.regexps.tab,"\u21e5").replace(cg.regexps.enter,"\u23ce").replace(cg.regexps.shift,"\u21e7").replace(cg.regexps.backspace,"\u232b").replace(cg.regexps.delete,"\u2326").replace(cg.regexps.left,"\u2192").replace(cg.regexps.right,"\u2190").replace(cg.regexps.up,"\u2191").replace(cg.regexps.down,"\u2193").replace(cg.regexps.keySpacer,
"$1").replace(cg.regexps.seqSpacer,"$1-")}},{key:"generateCommandToKeybindingMap",value:function(b,e,m){function a(r){if(q[r.id])return q[r.id];var u=l[r.id]||(l[r.id]=r.keyCommandMap);return q[r.id]=cg.arr.groupBy(Object.keys(u),function(v){return u[v].name})}var g=this;m=void 0===m?!0:m;var l={},q={};return((void 0===e?0:e)?b.commandsIncludingOwners:b.commands.map(function(r){return{command:r,target:b}})).map(function(r){var u=r.target;r=r.command;var v=a(u)[r.name];return{keys:v,target:u,command:r,
prettyKeys:v&&m?v.map(function(y){return g.prettyCombo(y)}):null}})}}],h,{pathInPackage:function(){return"events/KeyHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6164,end:13032})}(void 0);NO=cg.KeyHandler;var OO=sa("a9",NO);cg.default=NO;var rw=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),Z1=function(d){var h=
lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=h.hasOwnProperty("Script")&&"function"===typeof h.Script?h.Script:h.Script=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.suspended=!1;this.stopped=!0;this.currentTimeout=this.type=this.tickTime=null}},{key:"__additionally_serialize__",value:function(b,e,m){b.props.suspended.value=
!0}},{key:"isScript",get:function(){return!0}},{key:"global",get:function(){return System.global}},{key:"execute",value:function(){throw Error("subclass responsibility");}},{key:"tick",value:function(){try{this.execute()}catch(b){console.error("Error executing script "+this+": "+b+"\n"+b.stack);return}this.stopped||this.startTicking(this.tickTime)}},{key:"startTicking",value:function(b){this.stopped=!1;this.tickTime=b;this.type="number"===typeof b?"setTimeout":"requestAnimationFrame";this.currentTimeout=
"setTimeout"===this.type?this.global.setTimeout(this.tick.bind(this),b):this.global.requestAnimationFrame(this.tick.bind(this))}},{key:"stop",value:function(){this.global["setTimeout"===this.type?"clearTimeout":"cancelAnimationFrame"](this.currentTimeout);this.stopped=!0}},{key:"resume",value:function(b){b=void 0===b?this.tickTime:b;this.suspended&&(this.suspended=!1,this.startTicking(this.tickTime=b))}},{key:"suspend",value:function(){this.stop();this.suspended=!0}}],[{key:"className",get:function(){return"Script"}}],
h,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:19,end:1360})}(void 0),PO=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=h.hasOwnProperty("TargetScript")&&"function"===typeof h.TargetScript?h.TargetScript:h.TargetScript=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m){Sb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.target=b;this.selector=e;this.args=m||[]}},{key:"execute",value:function(){"function"===typeof this.target[this.selector]&&this.target[this.selector].apply(this.target,this.args)}},{key:"equals",value:function(b){return b.isScript&&this.target==
b.target&&this.selector==b.selector}},{key:"toString",value:function(){return"Script("+this.target+">>"+this.selector+"("+this.args.join(",")+"))"}}],[{key:"className",get:function(){return"TargetScript"}}],h,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1362,end:1906})}(rw.Script),$1=
function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=h.hasOwnProperty("FunctionScript")&&"function"===typeof h.FunctionScript?h.FunctionScript:h.FunctionScript=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){Sb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.callback=
b}},{key:"execute",value:function(){this.callback()}},{key:"equals",value:function(b){return b.isScript&&this.callback==b.callback}},{key:"toString",value:function(){return"Script("+(this.callback.toString().replace(/\n/g,"").slice(0,40)+"...)")}}],[{key:"className",get:function(){return"FunctionScript"}}],h,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:1908,end:2242})}(rw.Script);rw.Script=Z1;rw.Script=Z1;rw.TargetScript=PO;rw.TargetScript=PO;rw.FunctionScript=$1;rw.FunctionScript=$1;var Pn=lively.FreezerRuntime.recorderFor("lively.modules/src/hooks.js");Pn.install=hc;Pn.remove=lc;Pn.isInstalled=Yb;Pn.arr=vf;Pn.fun=nl;Pn.install=hc;Pn.install=hc;Pn.remove=lc;Pn.remove=lc;Pn.isInstalled=Yb;Pn.isInstalled=Yb;var gI=lively.FreezerRuntime.recorderFor("lively.modules/src/cycle-breaker.js");gI.classHolder={};var Fu=gI.classHolder;
gI.classHolder=Fu;gI.classHolder=Fu;var cu=lively.FreezerRuntime.recorderFor("lively.modules/src/dependencies.js");cu.computeRequireMap=Uc;cu.graph=Ir;cu.arr=vf;cu.obj=Pf;cu.loadedModules=PE;cu.computeRequireMap=Uc;cu.computeRequireMap=Uc;var Lm=lively.FreezerRuntime.recorderFor("lively.modules/src/import-export.js");Lm.scheduleModuleExportsChange=dd;Lm.runScheduledExportChanges=Jd;Lm.clearPendingModuleExportChanges=function(d,h){delete d.get("@lively-env").pendingExportChanges[h]};Lm.updateModuleExports=
function(d,h,n){var b=d.debug;Lm.module(d,h).updateRecord(function(e){var m=[],a=[];Object.keys(n).forEach(function(y){var z=n[y];b&&console.log("[lively.vm es6 updateModuleExports] %s export %s = %s",h,y,String(z).slice(0,30).replace(/\n/g,"")+"...");var A=!(y in e.exports);A&&(e.__lively_modules__.evalOnlyExport[y]=!0);e.exports[y]=z;A?m.push(y):a.push(y)});if(m.length){var g=d.get(h);Object.isFrozen(g)?(console.warn("[lively.vm es6 updateModuleExports] Since module %s is frozen a new module object was installed in the system. Note that only(!) exisiting module bindings are updated. New exports that were added will only be available in already loaded modules after those are reloaded!",
h),d.set(h,d.newModule(e.exports))):(b&&console.log("[lively.vm es6 updateModuleExports] adding new exports to %s",h),m.forEach(function(y){Object.defineProperty(g,y,{configurable:!1,enumerable:!0,get:function(){return e.exports[y]},set:function(){throw Error("exports cannot be changed from the outside");}})}))}if(a.length){b&&console.log("[lively.vm es6 updateModuleExports] updating %s dependents of %s",e.importers.length,h);for(var l=0,q=e.importers.length;l<q;l++){var r=e.importers[l];if(!r.locked){var u;
if(r.dependencies.some(function(y,z){u=z;return y&&y.name===e.name})){if(b){var v=Lm.module(d,r.name);console.log("[lively.vm es6 updateModuleExports] calling setters of "+v["package"]().name+"/"+v.pathInPackage())}Lm.module(d,r.name).evaluationStart();r.setters[u](e.exports);Lm.module(d,r.name).evaluationEnd()}}}}})};Lm.module=ih;Lm.scheduleModuleExportsChange=dd;Lm.scheduleModuleExportsChange=dd;Lm.runScheduledExportChanges=Jd;Lm.runScheduledExportChanges=Jd;var oj=lively.FreezerRuntime.recorderFor("lively.modules/src/change.js");
oj.moduleSourceChange=ed;oj.moduleSourceChangeEsm=function(d,h,n,b){var e,m,a,g,l,q,r,u,v,y,z,A,B,G,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(K){switch(K.nextAddress){case 1:return e=d.debug,m={status:"loading",source:n,name:h,address:h,linkSets:[],dependencies:[],metadata:{format:"esm"}},K.yield(oj.instrumentSourceOfEsmModuleLoad(d,m),2);case 2:a=K.yieldResult,g=function(J,P){return oj.scheduleModuleExportsChange(d,m.name,J,P,!0)},l=a.declare(g),e&&console.log("[lively.vm es6] sourceChange of %s with deps",
m.name,a.localDeps),q=[],r=$jscomp.makeIterator(a.localDeps),u=r.next();case 3:if(u.done){K.jumpTo(5);break}v=u.value;return K.yield(d.normalize(v,m.name),6);case 6:return y=K.yieldResult,z=oj.classHolder.module(d,y),K.yield(z.load(),7);case 7:A=K.yieldResult;q.push({name:v,fullname:y,module:z,exports:A});u=r.next();K.jumpTo(3);break;case 5:if(B=d.loads&&d.loads[m.name])B.deps=q.map(function(J){return J.name}),B.depMap=q.reduce(function(J,P){J[P.name]=P.fullname;return J},{}),B.metadata&&B.metadata.entry&&
(B.metadata.entry.deps=B.deps,B.metadata.entry.normalizedDeps=q.map(function(J){return J.fullname}),B.metadata.entry.declare=a.declare);G=oj.classHolder.module(d,m.name);E=G.record();q.forEach(function(J,P){return G.addDependencyToModuleRecord(J.module,l.setters[P])});E&&(E.execute=l.execute);q.forEach(function(J,P){return l.setters[P](J.exports)});return K.return(l.execute())}})};oj.moduleSourceChangeGlobal=function(d,h,n,b){var e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==
g.nextAddress)return e={status:"loading",source:n,name:h,address:h,linkSets:[],dependencies:[],metadata:{format:"global"}},d.get(h)?g.jumpTo(2):g.yield(d["import"](h),2);if(4!=g.nextAddress)return g.yield(oj.instrumentSourceOfGlobalModuleLoad(d,e),4);m=g.yieldResult;e.source=m.translated;a=oj.doInstantiateGlobalModule(d,e);d.delete(h);d.set(a.name,a.esModule);return g.return(a.module)})};oj.doInstantiateGlobalModule=function(d,h){var n=oj.__createEntry();n.name=h.name;n.esmExports=!0;h.metadata.entry=
n;n.deps=[];for(var b in h.metadata.globals){var e=h.metadata.globals[b];e&&n.deps.push(e)}n.execute=function(m,a,g){(a=(a=oj.classHolder.module(d,g.id).metadata())&&a.entry&&a.entry.module&&a.entry.module.exports)&&Object.keys(a).forEach(function(r){try{delete d.global[r]}catch(u){console.warn('[lively.modules] executeGlobalModule: Cannot delete global["'+r+'"]')}});if(h.metadata.globals){var l={};for(var q in h.metadata.globals)h.metadata.globals[q]&&(l[q]=m(h.metadata.globals[q]))}if(m=h.metadata.exports)h.source+=
'\nSystem.global["'+m+'"] = '+m+";";g=d.get("@@global-helpers").prepareGlobal(g.id,m,l);oj.__evaluateGlobalLoadSource(d,h);return g()};return oj.runExecuteOfGlobalModule(d,n)};oj.__createEntry=function(){return{name:null,deps:null,originalIndices:null,declare:null,execute:null,executingRequire:!1,declarative:!1,normalizedDeps:null,groupIndex:null,evaluated:!1,module:null,esModule:null,esmExports:!1}};oj.__evaluateGlobalLoadSource=function(d,h){function n(){0==--e&&(m.System=m.SystemJS=b)}var b,e=
0,m=d.global;return function(a){try{0==e++&&(b=m.System),m.System=m.SystemJS=this,(0,eval)(a.source),n()}catch(g){throw n(),Error("Error evaluating "+a.address+":\n"+g.stack);}}.call(d,h)};oj.runExecuteOfGlobalModule=function(d,h){var n={},b=h.module={exports:n,id:h.name};h.evaluated=!0;if(n=h.execute.call(d.global,function(e){var m=h.deps.find(function(a){return a===e});if(m=m&&d.get(h.normalizedDeps[h.deps.indexOf(m)])||d.get(d.decanonicalize(e,h.name)))return m;throw Error("Module "+e+" not declared as a dependency of "+
h.name);},n,b))b.exports=n;n=b.exports;b=d.get("@system-env").constructor;h.esModule=n&&(n.__esModule||n instanceof b)?n:h.esmExports&&n!==d.global?d.newModule(n):{"default":n};return h};oj.arr=vf;oj.emit=qk;oj.instrumentSourceOfEsmModuleLoad=Dp;oj.instrumentSourceOfGlobalModuleLoad=Ug;oj.scheduleModuleExportsChange=dd;oj.classHolder=Fu;oj.moduleSourceChange=ed;oj.moduleSourceChange=ed;var Ql=lively.FreezerRuntime.recorderFor("lively.modules/src/url-helpers.js");Ql.isJsFile=Qd;Ql.asDir=Ae;Ql.isURL=
me;Ql.urlResolve=Nd;Ql.string=vh;Ql.isJsFile=Qd;Ql.isJsFile=Qd;Ql.asDir=Ae;Ql.asDir=Ae;var zD=Ql.string.joinPath;Ql.join=zD;Ql.join=zD;Ql.join=zD;Ql.isURL=me;Ql.isURL=me;Ql.urlResolve=Nd;Ql.urlResolve=Nd;var fq=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/configuration.js");fq.arr=vf;fq.obj=Pf;fq.isURL=me;fq.installHook=hc;fq.isHookInstalled=Yb;var Ss=function(d){this.pkg=d};Ss.prototype.applyConfig=function(d){var h=this.System,n=this.packageURL,b=this.pkg;d=fq.obj.deepMerge(b.config,
d);var e=d.name||n.split("/").slice(-1)[0],m=d.version,a=d.systemjs||{},g=d.lively,l=d.main||"index.js",q={},r={};h.config({map:(q[e]=n,q),packages:(r[n]=Object.assign({},a,{meta:Object.assign({"package.json":{format:"json"}},a.meta),configured:!0}),r)});h.packages[n].configured=!0;h=h.getConfig().packages[n]||{};h.map||(h.map={});a&&(g&&g.main?l=g.main:a.main&&(l=a.main),this.applySystemJSConfig(a));l.match(/\.[^\/\.]+/)||(l+=".js");h.main=l;b.version=m;b.config=d;b._name=e;b.mergeWithConfig(h);
return g?this.applyLivelyConfig(g):{subPackages:[]}};Ss.prototype.applySystemJSConfig=function(d){var h=this.System;d.packageConfigPaths&&h.config({packageConfigPaths:fq.arr.uniq(h.packageConfigPaths.concat(d.packageConfigPaths))});d.packages&&h.config({packages:d.packages});d.globalmap&&h.config({map:d.globalmap});d.babelOptions&&h.config({babelOptions:d.babelOptions});d.meta&&h.config({meta:d.meta})};Ss.prototype.applyLivelyConfig=function(d){this.applyLivelyConfigMeta(d);this.applyLivelyConfigHooks(d);
this.applyLivelyConfigBundles(d)};Ss.prototype.applyLivelyConfigHooks=function(d){var h=this;(d.hooks||[]).forEach(function(n){try{var b=eval("("+n.source+")");b.name&&fq.isHookInstalled(h.System,n.target,b.name)||fq.installHook(h.System,n.target,b)}catch(e){console.error("Error installing hook for %s: %s",h.packageURL,e,n)}})};Ss.prototype.applyLivelyConfigBundles=function(d){var h=this;if(!d.bundles)return Promise.resolve();var n=Object.keys(d.bundles).reduce(function(b,e){var m=h.packageURL+"/"+
e;e=d.bundles[e].map(function(a){return h.System.decanonicalize(a,h.packageURL+"/")});b[m]=e;return b},{});this.System.config({bundles:n});return Promise.resolve()};Ss.prototype.applyLivelyConfigMeta=function(d){if(d.meta){var h={},n=this.System.getConfig().packages[this.packageURL]||{},b={meta:{},packages:(h[this.packageURL]=n,h)};Object.keys(d.meta).forEach(function(e){var m=d.meta[e];fq.isURL(e)?b.meta[e]=m:(n.meta||(n.meta={}),n.meta[e]=m)});this.System.config(b)}};$jscomp.global.Object.defineProperties(Ss.prototype,
{System:{configurable:!0,enumerable:!0,get:function(){return this.pkg.System}},packageURL:{configurable:!0,enumerable:!0,get:function(){return this.pkg.url}}});fq.PackageConfiguration=Ss;fq.default=Ss;var Ie=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package.js");Ie.normalizePackageURL=function(d,h,n){n=void 0===n?[]:n;if(n.some(function(b){return b===h}))return h;d=d.decanonicalize(h.replace(/[\/]+$/,"")+"/");if(!Ie.isURL(d))throw Error("Strange package URL: "+d+" is not a valid URL");
d.match(/\.js/)&&(d=-1<d.indexOf(d+".js")?d.replace(/\.js$/,""):d.split("/").slice(0,-1).join("/"));d.match(/\.js$/)&&console.warn("packageURL is expected to point to a directory but seems to be a .js file: "+d);return String(d).replace(/\/$/,"")};Ie.lookupPackage=Le;Ie.ensurePackage=ke;Ie.getPackage=de;Ie.applyConfig=Be;Ie.importPackage=ef;Ie.removePackage=Ze;Ie.reloadPackage=wf;Ie.registerPackage=Jg;Ie.getPackageSpecs=Pi;Ie.arr=vf;Ie.promise=yg;Ie.obj=Pf;Ie.emit=qk;Ie.module=ih;Ie.resource=p;Ie.PackageConfiguration=
Ss;Ie.isURL=me;Ie.join=zD;Ie.classHolder=Fu;var wi=function(d,h,n,b,e){e=void 0===e?{}:e;this.System=d;this.url=h;this.registerProcess=null;this.map={};this.setConfig(e)};wi.allPackages=function(d){return Ie.obj.values(Ie.classHolder.PackageRegistry.ofSystem(d).byURL)};wi.allPackageURLs=function(d){return Ie.classHolder.PackageRegistry.ofSystem(d).allPackageURLs()};wi.forModule=function(d,h){return this.forModuleId(d,h.id)};wi.forModuleId=function(d,h){return(h=Ie.classHolder.ModulePackageMapping.forSystem(d).getPackageURLForModuleId(h))?
Ie.getPackage(d,h,!0):null};wi.fromJSON=function(d,h){return(new Ie.Package(d)).fromJSON(h)};wi.prototype.setConfig=function(d){this._name=d.name;this.version=d.version;this.dependencies=d.dependencies||{};this.devDependencies=d.devDependencies||{};this.main=d.main||"index.js";this.systemjs=d.systemjs;this.lively=d.lively};wi.prototype.toJSON=function(){var d=this.System,h=Ie.obj.select(this,"url _name version map dependencies devDependencies main systemjs lively".split(" "));h.url.startsWith(d.baseURL)&&
(h.url=h.url.slice(d.baseURL.length).replace(/^\//,""));return h};wi.prototype.fromJSON=function(d){var h=this.System;this.url=d.url;this._name=d._name;this.version=d.version;this.map=d.map||{};this.main=d.main;this.dependencies=d.dependencies||{};this.devDependencies=d.devDependencies||{};this.systemjs=d.systemjs;this.lively=d.lively;Ie.isURL(this.url)||(this.url=Ie.join(h.baseURL,this.url));this.registerWithConfig();return this};wi.prototype.asSpec=function(){return Object.assign({},Ie.obj.select(this,
"name main map meta url address version lively".split(" ")),{modules:this.modules().map(function(d){return{name:d.id,deps:d.directRequirements().map(function(h){return h.id})}})})};wi.prototype.path=function(){var d=this.System.baseURL;return 0===this.url.indexOf(d)?this.url.slice(d.length):this.url};wi.prototype.modules=function(){var d=this.url,h=this.System;return Ie.classHolder.ModulePackageMapping.forSystem(h).getModuleIdsForPackageURL(d).map(function(n){return Ie.module(h,n)})};wi.prototype.resources=
function(d,h){h=void 0===h?[".git","node_modules",".module_cache","lively.next-node_modules"]:h;var n=this,b,e,m,a,g,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return b=n,e=b.System,m=b.url,a=Ie.Package.allPackageURLs(e),g=a.filter(function(v){return v!==m&&!m.startsWith(v)}),u.yield(Ie.resource(m).dirList("infinity",{exclude:h}),2);l=u.yieldResult;q=l.filter(function(v){return!v.isDirectory()&&!g.some(function(y){return v.url.startsWith(y)})}).map(function(v){return v.url});
r=Ie.arr.pluck(n.modules(),"id");d&&(q=q.filter(d));return u.return(q.map(function(v){var y=v.replace(m,"").replace(/^\//,"");return{isLoaded:r.includes(v),url:v,nameInPackage:y,package:n}}))})};wi.prototype.hasResource=function(d){var h=this.url;return(d.startsWith(h)?Ie.resource(d):Ie.resource(h).join(d)).exists()};wi.prototype.toString=function(){return"Package("+this.name+" - "+this.path()+"/)"};wi.prototype.mergeWithConfig=function(d){var h=d=Object.assign({},d),n=h.name;h=h.map;n&&(delete d.name,
this._name=n);h&&(delete d.map,Object.assign(this.map,h));Object.assign(this,d);return this};wi.prototype.addMapping=function(d,h){this.map[d]=h;var n={},b={};this.System.config({packages:(b[this.url]={map:(n[d]=h,n)},b)})};wi.prototype.tryToLoadPackageConfig=function(){var d=this,h,n,b,e,m,a,g,l,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:h=d;n=h.System;b=h.url;e=b+"/package.json";m={};a={};n.config({meta:(m[e]={format:"json"},m),packages:(a[b]=
{meta:{"package.json":{format:"json"}}},a)});n.debug&&console.log("[lively.modules package reading config] %s",e);v.setCatchFinallyBlocks(2);if(g=n.get(e)){v.jumpTo(4);break}return v.yield(n.import(e),5);case 5:g=v.yieldResult;case 4:return l=g,q=[].concat($jscomp.arrayFromIterable(n.packageConfigPaths)),Ie.arr.pushIfNotIncluded(q,e),n.config({packageConfigPaths:q}),v.return(l);case 2:return r=v.enterCatchBlock(),console.log("[lively.modules package] Unable loading package config %s for package: ",
e,r),delete n.meta[e],u=b.split("/").slice(-1)[0],v.return({name:u})}})};wi.prototype.import=function(){var d=this,h,n,b,e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return q.yield(d.register(),2);case 2:return h=d,n=h.url,b=h.System,e=Ie,m=e.module,a=b,q.yield(b.normalize(n),3);case 3:return g=m.call(e,a,q.yieldResult),q.yield(b.import(g.id),4);case 4:return l=q.yieldResult,q.yield(Ie.promise.waitFor(1E3,function(){return g.isLoaded()}),5);
case 5:return q.return(l)}})};wi.prototype.isRegistering=function(){return!!this.registerProcess};wi.prototype.register=function(d){var h=this,n,b,e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:if(h.isRegistering())return q.return(h.registerProcess.promise);n=h;b=n.System;e=n.url;h.registerProcess=Ie.promise.deferred();m=h.registerProcess.promise;b.debug&&console.log("[lively.modules package register] %s",e);q.setCatchFinallyBlocks(2,3);if(a=
d){q.jumpTo(5);break}return q.yield(h.tryToLoadPackageConfig(),6);case 6:a=q.yieldResult;case 5:g=a,h.registerWithConfig(g),h.registerProcess.resolve(g);case 3:q.enterFinallyBlock();delete h.registerProcess;q.leaveFinallyBlock(4);break;case 2:throw l=q.enterCatchBlock(),h.registerProcess.reject(l),l;case 4:return q.return(m)}})};wi.prototype.updateConfig=function(d){d=Object.assign({},this.runtimeConfig,{},d);var h=this.name,n=this.version,b=d,e=b.name;b=b.version;(new Ie.PackageConfiguration(this)).applyConfig(d);
if(h!==d.name||n!==d.version)console.log("[lively.modules] Updating registry "+h+"@"+n+" => "+e+"@"+b),Ie.classHolder.PackageRegistry.ofSystem(this.System).updateNameAndVersionOf(this,h,n,e,b)};wi.prototype.registerWithConfig=function(d){d=void 0===d?this.runtimeConfig:d;var h=this.System,n=this.url,b=(new Ie.PackageConfiguration(this)).applyConfig(d),e=Ie.join(n,"package.json");h.get(e)||h.set(e,h.newModule(Object.assign({},d,{default:d})));Ie.emit("lively.modules/packageregistered",{"package":n},
Date.now(),h);return b};wi.prototype.remove=function(d){d=Object.assign({forgetEnv:!0,forgetDeps:!1,unloadModules:!0},d);var h=this.System,n=this.url;n=n.replace(/\/$/,"");d.unloadModules&&this.modules().forEach(function(g){return g.unload(d)});Ie.classHolder.PackageRegistry.ofSystem(h).removePackage(this);var b=h.getConfig(),e=n+"/package.json";h.delete(String(e));Ie.arr.remove(b.packageConfigPaths||[],e);var m={},a={};h.config({meta:(m[e]={},m),packages:(a[n]={},a),packageConfigPaths:b.packageConfigPaths});
delete h.packages[n];Ie.emit("lively.modules/packageremoved",{"package":this.url},Date.now(),h)};wi.prototype.reload=function(d){var h=this.url,n=Ie.classHolder.PackageRegistry.ofSystem(this.System),b=n.coversDirectory(h);this.remove(d);d={};n.addPackageAt(h,b||"devPackageDirs",(d[h]=this,d));return this.import()};wi.prototype.fork=function(d,h){var n=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(h||(h=Ie.resource(n.url).join("../"+d).withRelativePartsResolved().url),
b.yield(n.changeAddress(h,d,!1),2)):b.return(b.yieldResult)})};wi.prototype.rename=function(d){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(n=Ie.resource(h.url).join("../"+d).withRelativePartsResolved().url,b.yield(h.changeAddress(n,d,!0),2)):b.return(b.yieldResult)})};wi.prototype.changeAddress=function(d,h,n){h=void 0===h?null:h;n=void 0===n?!0:n;var b=this,e,m,a,g,l,q,r,u,v,y,z,A,B,G,E,K,J,P,ea,ra,D,O,L,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(aa){switch(aa.nextAddress){case 1:return d=
d.replace(/\/?/,""),e=b,m=e.System,a=e.url,aa.yield(b.runtimeConfig,2);case 2:return g=aa.yieldResult,l=Ie.resource(a).asDirectory(),q=new Ie.Package(m,d),aa.yield(Ie.resource(d).asDirectory(),3);case 3:return r=aa.yieldResult,g.name=h||b.name,u=Ie.classHolder.PackageRegistry.ofSystem(m),v=u.coversDirectory(a),Ie.classHolder.ModulePackageMapping.forSystem(m).clearCache(),m.packages[a]&&(m.packages[d]=m.packages[a],n&&delete m.packages[a]),Object.assign(q,Ie.obj.select(b,["_name","map","config"])),
aa.yield(r.ensureExistance(),4);case 4:return aa.yield(b.resources(void 0,[]),5);case 5:y=aa.yieldResult.map(function(Y){return Y.url}),z=b.modules(),A=$jscomp.makeIterator(z),B=A.next();case 6:if(B.done){aa.jumpTo(8);break}G=B.value;E=r.join(G.pathInPackage()).url;return n?aa.yield(G.renameTo(E),10):aa.yield(G.copyTo(E),10);case 10:K=y.indexOf(G.id);-1<K&&y.splice(K,1);B=A.next();aa.jumpTo(6);break;case 8:J=$jscomp.makeIterator(y),P=J.next();case 13:if(P.done){if(!n){aa.jumpTo(17);break}return aa.yield(b.remove({forgetEnv:!0,
forgetDeps:!1}),18)}ea=P.value;ra=Ie.resource(ea);D=ra.relativePathFrom(l);return aa.yield(ra.copyTo(r.join(D)),14);case 14:P=J.next();aa.jumpTo(13);break;case 18:return aa.yield(l.remove(),17);case 17:if(!h){aa.jumpTo(20);break}q.name=h;q.config.name=h;O=Ie.resource(d).join("package.json");aa.setCatchFinallyBlocks(21);return aa.yield(O.exists(),23);case 23:if(!aa.yieldResult){aa.jumpTo(24);break}return aa.yield(O.readJson(),25);case 25:L=aa.yieldResult;if(L.name!==b.name){aa.jumpTo(26);break}L.name=
h;return aa.yield(O.writeJson(L,!0),26);case 26:(N=m.get(O.url))&&m.set(O.url,m.newModule(Object.assign({},N,{name:h})));case 24:aa.leaveTryBlock(20);break;case 21:aa.enterCatchBlock();case 20:return v=v||"individualPackageDirs","individualPackageDirs"!==v&&"devPackageDirs"!==v||u._addPackageDir(d,v,!0),u._addPackageWithConfig(q,g,d,v),u.resetByURL(),u._updateLatestPackages(),aa.return(q)}})};wi.prototype.search=function(d,h){h=void 0===h?{}:h;var n=this,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==
m.nextAddress)return h.includeUnloaded?m.yield(n.resources(function(a){return a.endsWith(".js")},[".git","node_modules","dist",".module_cache","lively.next-node_modules"]),3):(b=n.modules().filter(function(a){return a.isLoaded()}),m.jumpTo(2));2!=m.nextAddress&&(b=m.yieldResult.map(function(a){return Ie.module(n.System,a.url)}));e=b;return m.return(Promise.all(e.map(function(a){return a.search(d,h).catch(function(g){console.error("Error searching module "+a.name+":\n"+g.stack);return[]})})).then(function(a){return Ie.arr.flatten(a,
1)}))})};$jscomp.global.Object.defineProperties(wi.prototype,{isPackage:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){if(this._name)return this._name;var d=this.System.get(this.url+"/package.json");return d&&d.name?d.name:Ie.arr.last(this.url.replace(/[\/]+$/,"").split("/"))},set:function(d){return this._name=d}},nameAndVersion:{configurable:!0,enumerable:!0,get:function(){return this.name+"@"+this.version}},address:{configurable:!0,enumerable:!0,
get:function(){return this.url},set:function(d){return this.url=d}},runtimeConfig:{configurable:!0,enumerable:!0,get:function(){var d=this.main,h=this.systemjs,n=this.lively,b={name:this.name,version:this.version,dependencies:this.dependencies||{},devDependencies:this.devDependencies||{}};d&&(b.main=d);h&&(b.systemjs=h);n&&(b.lively=n);return b}}});Ie.Package=wi;Ie.ensurePackage=ke;Ie.ensurePackage=ke;Ie.importPackage=ef;Ie.importPackage=ef;Ie.removePackage=Ze;Ie.removePackage=Ze;Ie.reloadPackage=
wf;Ie.reloadPackage=wf;Ie.registerPackage=Jg;Ie.registerPackage=Jg;Ie.getPackage=de;Ie.getPackage=de;Ie.lookupPackage=Le;Ie.lookupPackage=Le;Ie.applyConfig=Be;Ie.applyConfig=Be;Ie.getPackageSpecs=Pi;Ie.getPackageSpecs=Pi;Ie.Package=wi;Ie.Package=wi;var hd=lively.FreezerRuntime.recorderFor("lively.classes/class-to-function-transform.js");hd.isFunctionNode=function(d){return"ArrowFunctionExpression"===d.type||"FunctionExpression"===d.type||"FunctionDeclaration"===d.type};hd.ensureIdentifier=function(d){return d.replace(hd.firstIdRe,
"_").replace(hd.trailingIdRe,"_")};hd.constructorTemplate=function(d){return hd.funcExpr({id:d?hd.id(d):null},["__first_arg__"],hd.ifStmt(hd.binaryExpr(hd.id("__first_arg__"),"&&",hd.member("__first_arg__",hd.funcCall(hd.member("Symbol","for"),hd.literal("lively-instance-restorer")),!0)),hd.block(),hd.block(hd.exprStmt(hd.funcCall(hd.member(hd.member("this",hd.funcCall(hd.member("Symbol","for"),hd.literal("lively-instance-initialize")),!0),"apply"),hd.id("this"),hd.id("arguments"))))))};hd.replaceSuper=
function(d,h,n,b){console.assert("Super"===d.type);(h=h.currentMethod)||console.warn("[lively.classes] Trying to transform es6 class but got super call outside a method! "+hd.stringify(d)+" in "+n.join("."));b=$jscomp.makeIterator(n.slice(-2));n=b.next().value;b=b.next().value;return"callee"===n&&"object"===b||"callee"===b?d:h&&"static"===h[hd.methodKindSymbol]?hd.funcCall(hd.member("Object","getPrototypeOf"),hd.id(hd.tempLivelyClassVar)):hd.funcCall(hd.member("Object","getPrototypeOf"),hd.member(hd.id(hd.tempLivelyClassVar),
"prototype"))};hd.replaceSuperMethodCall=function(d,h,n,b){console.assert("CallExpression"===d.type);console.assert("Super"===d.callee.object.type);return hd.funcCall.apply(hd,[hd.member(hd.funcCall(hd.member(b.functionNode,"_get"),hd.replaceSuper(d.callee.object,h,n.concat(["callee","object"]),b),hd.literal(d.callee.property.value||d.callee.property.name),hd.id("this")),"call"),hd.id("this")].concat($jscomp.arrayFromIterable(d.arguments)))};hd.replaceDirectSuperCall=function(d,h,n,b){console.assert("CallExpression"===
d.type);console.assert("Super"===d.callee.type);return hd.funcCall.apply(hd,[hd.member(hd.funcCall(hd.member(b.functionNode,"_get"),hd.replaceSuper(d.callee,h,n.concat(["callee"]),b),hd.funcCall(hd.member("Symbol","for"),hd.literal("lively-instance-initialize")),hd.id("this")),"call"),hd.id("this")].concat($jscomp.arrayFromIterable(d.arguments)))};hd.replaceSuperGetter=function(d,h,n,b){console.assert("MemberExpression"===d.type);console.assert("Super"===d.object.type);return hd.funcCall(hd.member(b.functionNode,
"_get"),hd.replaceSuper(d.object,h,n.concat(["object"]),b),hd.literal(d.property.value||d.property.name),hd.id("this"))};hd.replaceSuperSetter=function(d,h,n,b){console.assert("AssignmentExpression"===d.type);console.assert("Super"===d.left.object.type);return hd.funcCall(hd.member(b.functionNode,"_set"),hd.replaceSuper(d.left.object,h,n.concat(["left","object"]),b),hd.literal(d.left.property.value||d.left.property.name),d.right,hd.id("this"))};hd.replaceClass=function(d,h,n,b){console.assert("ClassDeclaration"===
d.type||"ClassExpression"===d.type);var e=d.body.body,m=d.superClass;n=d.id;var a=d.type,g=d.start,l=d.end,q=void 0===b.addClassNameGetter?!0:b.addClassNameGetter,r=hd.id("undefined"),u=hd.id("undefined"),v=n?n.name:"anonymous_class",y=b.evalId,z=b.sourceAccessorName;d=d["x-lively-object-meta"]||{start:g,end:l};e.length&&(q=e.reduce(function(E,K){var J=K.key,P=K.kind,ea=K.value,ra=K.static;"Literal"!==J.type&&"Identifier"!==J.type&&console.warn("Unexpected key in classToFunctionTransform! "+JSON.stringify(J));
if("method"===P){P={};K=hd.id(v+"_"+hd.ensureIdentifier(J.name||J.value)+"_");ea=["key",hd.literal(J.name||J.value),"value",Object.assign({},ea,(P.id=K,P[hd.methodKindSymbol]=ra?"static":"proto",P))];var D=hd.objectLiteral(ea)}else"get"===P||"set"===P?(K={},D=hd.objectLiteral(["key",hd.literal(J.name||J.value),P,Object.assign({},ea,(K.id=hd.id(P),K[hd.methodKindSymbol]=ra?"static":"proto",K))])):"constructor"===P?(J={},ea=["key",hd.funcCall(hd.member("Symbol","for"),hd.literal("lively-instance-initialize")),
"value",Object.assign({},ea,(J.id=hd.id(v+"_initialize_"),J[hd.methodKindSymbol]="proto",J))],D=hd.objectLiteral(ea)):console.warn("[lively.classes] classToFunctionTransform encountered unknown class property with kind "+P+", ignoring it, "+JSON.stringify(K));(ra?E.clazz:E.inst).push(D);return E},{inst:[],clazz:q?[hd.parse('({ key: "className", get: function get() { return "'+v+'"; } })').body[0].expression]:[]}),e=q.inst,q=q.clazz,e.length&&(r={type:"ArrayExpression",elements:e}),q.length&&(u={type:"ArrayExpression",
elements:q}));e=b.scope;if(m&&b.currentModuleAccessor)if(b.classHolder===m.object){var A=m;var B=m.property.name}else{var G=e&&e.resolvedRefMap&&e.resolvedRefMap.get(m);G&&G.decl&&e.decls&&e.decls.find(function(E){return $jscomp.makeIterator(E).next().value===G.decl})&&(A=m,B=m.name)}B=A?hd.objectLiteral(["referencedAs",hd.literal(B),"value",A]):m||hd.id("undefined");A=n&&"ClassDeclaration"===a;m=["start",hd.literal(d.start),"end",hd.literal(d.end)];"undefined"!==typeof y&&m.push("evalId",hd.literal(y));
z&&m.push("moduleSource",hd.nodes.id(z));y=hd.objectLiteral(m);r=hd.funcCall(hd.funcExpr({},["superclass"],hd.varDecl(hd.tempLivelyClassHolderVar,h.classHolder),hd.varDecl(hd.tempLivelyClassVar,A?{type:"ConditionalExpression",test:hd.binaryExpr(hd.funcCall(hd.member(hd.tempLivelyClassHolderVar,"hasOwnProperty"),hd.literal(n.name)),"&&",hd.binaryExpr({argument:hd.member(hd.tempLivelyClassHolderVar,n),operator:"typeof",prefix:!0,type:"UnaryExpression"},"===",hd.literal("function"))),consequent:hd.member(hd.tempLivelyClassHolderVar,
n),alternate:hd.assign(hd.member(hd.tempLivelyClassHolderVar,n),hd.constructorTemplate(n.name))}:n?hd.constructorTemplate(n.name):hd.constructorTemplate(null)),hd.returnStmt(hd.funcCall(b.functionNode,hd.id(hd.tempLivelyClassVar),hd.id("superclass"),r,u,hd.id(hd.tempLivelyClassHolderVar),b.currentModuleAccessor||hd.id("undefined"),y))),B);if("ClassExpression"===a)return r;a=r;b.declarationWrapper&&h.classHolder===b.classHolder&&(a=hd.funcCall(b.declarationWrapper,hd.literal(n.name),hd.literal("class"),
a,b.classHolder,y));a=hd.varDecl(n,a,"var");a[hd.isTransformedClassVarDeclSymbol]=!0;return a};hd.splitExportDefaultWithClass=function(d,h,n,b){return d.declaration&&d.declaration[hd.isTransformedClassVarDeclSymbol]?[d.declaration,{declaration:d.declaration.declarations[0].id,type:"ExportDefaultDeclaration"}]:d};hd.classToFunctionTransform=di;hd.arr=vf;hd.parse=Rd;hd.stringify=Uk;hd.query=gr;hd.nodes=Au;hd.Visitor=ae;var Ro=hd.nodes;hd.assign=Ro.assign;hd.member=Ro.member;hd.id=Ro.id;hd.exprStmt=
Ro.exprStmt;hd.funcCall=Ro.funcCall;hd.literal=Ro.literal;hd.objectLiteral=Ro.objectLiteral;hd.varDecl=Ro.varDecl;hd.funcExpr=Ro.funcExpr;hd.returnStmt=Ro.returnStmt;hd.binaryExpr=Ro.binaryExpr;hd.ifStmt=Ro.ifStmt;hd.block=Ro.block;hd.firstIdRe=/^[^_a-z]/i;hd.trailingIdRe=/[^_a-z0-9]/ig;hd.isTransformedClassVarDeclSymbol=Symbol();hd.methodKindSymbol=Symbol();hd.tempLivelyClassVar="__lively_class__";hd.tempLivelyClassHolderVar="__lively_classholder__";var hI=function(){return hd.Visitor.apply(this,
arguments)||this};$jscomp.inherits(hI,hd.Visitor);hI.prototype.accept=function(d,h,n){hd.isFunctionNode(d)&&(h=Object.assign({},h,{classHolder:hd.objectLiteral([]),currentMethod:d[hd.methodKindSymbol]?d:h.currentMethod}));if("ClassExpression"===d.type||"ClassDeclaration"===d.type)d=hd.replaceClass(d,h,n,h.options);"Super"===d.type&&(d=hd.replaceSuper(d,h,n,h.options));"MemberExpression"===d.type&&d.object&&"Super"===d.object.type&&(d=hd.replaceSuperGetter(d,h,n,h.options));"AssignmentExpression"===
d.type&&"MemberExpression"===d.left.type&&"Super"===d.left.object.type&&(d=hd.replaceSuperSetter(d,h,n,h.options));"CallExpression"===d.type&&"Super"===d.callee.type&&(d=hd.replaceDirectSuperCall(d,h,n,h.options));"CallExpression"===d.type&&d.callee.object&&"Super"===d.callee.object.type&&(d=hd.replaceSuperMethodCall(d,h,n,h.options));d=hd.Visitor.prototype.accept.call(this,d,h,n);return"ExportDefaultDeclaration"===d.type?hd.splitExportDefaultWithClass(d,h,n,h.options):d};hI.run=function(d,h){var n=
new this,b=h.classHolder||hd.objectLiteral([]);return n.accept(d,{options:h,classHolder:b},[])};hd.ClassReplaceVisitor=hI;hd.classToFunctionTransform=di;hd.classToFunctionTransform=di;var GA=lively.FreezerRuntime.recorderFor("lively.classes/index.js");GA.runtime=BA;GA.classToFunctionTransform=di;GA.runtime=BA;GA.runtime=BA;GA.classToFunctionTransform=di;GA.classToFunctionTransform=di;var qfa=Object.freeze({__proto__:null,runtime:BA,classToFunctionTransform:di}),Wi=lively.FreezerRuntime.recorderFor("lively.modules/src/import-modification.js");
Wi.arr=vf;Wi.Path=nh;Wi.fuzzyParse=om;Wi.query=gr;Wi.stringify=Uk;Wi.resource=p;var kr=function(d,h,n,b,e,m,a){this.System=d;this.intoModuleId=h;this.intoPackage=n;this.intoModuleSource=b;this.fromModuleId=e.moduleId;this.importData=e;this.alias=m;this.parsed=a||Wi.fuzzyParse(b)};kr.run=function(d,h,n,b,e,m,a){return(new this(d,h,n,b,e,m,a)).run()};kr.prototype.run=function(){var d=this.generateImportStatement(),h=d.standaloneImport,n=d.importedVarName,b=this.existingImportsOfFromModule(),e=b.imports,
m=b.importsOfFromModule;b=b.importsOfVar;m=this.importsToBeReused(m,b,d);if(b.length)return{status:"not modified",newSource:this.intoModuleSource,generated:"",importedVarName:"",standaloneImport:h,from:b[0].start,to:b[0].end};if(m.length&&(d=this.modifyExistingImport(m,h)))return d;e=Wi.arr.last(e);return this.insertNewImport(m,h,n,e?e.end:0)};kr.prototype.importsToBeReused=function(d,h,n){n.isDefault&&(d=d.filter(function(b){return!b.specifiers.some(function(e){return"ImportDefaultSpecifier"==e.type})}));
return d};kr.prototype.generateImportStatement=function(){var d=this.intoModuleId,h=this.fromModuleId,n=this.importData,b=this.intoPackage,e=this.alias,m="default"===n.exported;e=e?e:m?n.local:n.exported;var a=!m&&n.exported!==e;b=b&&b.name;var g=h,l=n.packageName,q=n.pathInPackage;if(n.isMain)g=l;else if(b===l)try{g=Wi.resource(h).relativePathFrom(Wi.resource(d)),g.startsWith(".")||(g="./"+g)}catch(r){l&&"no group"!==l&&q&&(g=l+"/"+q)}else l&&"no group"!==l&&q&&(g=l+"/"+q);return{isDefault:m,standaloneImport:m?
"import "+e+' from "'+g+'";':"import { "+n.exported+(a?" as "+e:"")+' } from "'+g+'";',importedVarName:e}};kr.prototype.existingImportsOfFromModule=function(){var d=this.System,h=this.fromModuleId,n=this.intoModuleId,b=this.importData,e=b.exported,m=b.local,a=this.alias,g="default"===e;b=this.parsed.body.filter(function(q){return"ImportDeclaration"===q.type});var l=g?a||m:a||e;m=b.filter(function(q){if(!q.source||"string"!==typeof q.source.value)return null;q=d.decanonicalize(q.source.value,n);return h===
q});a=m.filter(function(q){return(q.specifiers||[]).some(function(r){return g?"ImportDefaultSpecifier"===r.type&&r.local.name===l:Wi.Path("imported.name").get(r)===e&&Wi.Path("local.name").get(r)===l})});return{imports:b,importsOfFromModule:m,importsOfVar:a}};kr.prototype.modifyExistingImport=function(d,h){d=Wi.arr.flatmap(d,function(l){return l.specifiers||[]});if(!d.length)return null;d=$jscomp.makeIterator(Wi.arr.partition(d,function(l){return"ImportDefaultSpecifier"===l.type}));var n=$jscomp.makeIterator(d.next().value).next().value,
b=$jscomp.makeIterator(d.next().value).next().value;d=this.alias;var e=this.intoModuleSource,m=this.importData,a=m.exported;m=m.local;var g="default"===a;g?console.assert(!!b,"no ImportSpecifier found"):console.assert(b||n,"at least one kine of specifier is expected");if(g){n=e.slice(0,b.start).lastIndexOf("{")-1;if(0>n)return null;b=(d||m)+",";a=e.slice(0,n);e=e.slice(n);a.endsWith(" ")&&a.endsWith("\n")||(b=" "+b);e.startsWith(" ")||(b+=" ");return{status:"modified",newSource:""+a+b+e,generated:b,
standaloneImport:h,importedVarName:d||m,from:n,to:n+b.length}}n=b?b.end:n.end;g=(m=d&&d!==a)?a+" as "+d:a;b=b?", "+g:", { "+g+" }";return{status:"modified",newSource:""+e.slice(0,n)+b+e.slice(n),generated:b,standaloneImport:h,importedVarName:m?d:a,from:n,to:n+b.length}};kr.prototype.insertNewImport=function(d,h,n,b){b=void 0===b?0:b;d&&d.length&&(b=Wi.arr.last(d).end);var e=this.intoModuleSource;d=e.slice(0,b);e=e.slice(b);var m=h;d.length&&!d.endsWith("\n")&&(m="\n"+m);e.length&&!e.startsWith("\n")&&
(m+="\n");return{status:"modified",newSource:d+m+e,generated:m,standaloneImport:h,importedVarName:n,from:b,to:b+m.length}};Wi.ImportInjector=kr;var iI=function(){};iI.getGlobals=function(d,h){d=h||Wi.fuzzyParse(d,{withComments:!0});return(d=d.comments?d.comments.find(function(n){return n.isBlock&&n.text.startsWith("global")}):null)?d.text.replace(/^global\s*/,"").split(",").map(function(n){return n.trim()}).filter(Boolean):[]};iI.run=function(d,h,n){n=n||Wi.fuzzyParse(d,{withComments:!0});var b=(n=
n.comments?n.comments.find(function(m){return m.isBlock&&m.text.startsWith("global")}):null)?n.text.replace(/^global\s*/,"").split(",").map(function(m){return m.trim()}).filter(Boolean):[],e=h.filter(function(m){return!b.includes(m)});if(!e.length)return{status:"not modified",newSource:d,generated:"",from:0,to:0};if(!n)return n="/*global "+e.join(",")+"*/\n",{status:"modified",newSource:n+d,generated:n,from:0,to:n.length};h=n.start+2+n.text.length;e=e.join(",");b.length?e=","+e:n.text.startsWith("global ")||
(e=" "+e);n=h+e.length;return{status:"modified",newSource:d.slice(0,h)+e+d.slice(h),generated:e,from:h,to:n}};Wi.GlobalInjector=iI;var AD=function(){};AD.removeImports=function(d,h,n){n=n||Wi.fuzzyParse(d);var b=Wi.arr.flatmap(n.body,function(e){return"ImportDeclaration"===e.type&&e.specifiers.length?e.specifiers.map(function(m){return{local:m.local,importStmt:e}}):[]}).filter(function(e){return h.some(function(m){return m.local===e.local.name})});n=b.map(function(e){return{local:e.local.name,from:e.importStmt.source.value}});
d=Wi.arr.uniq(b.map(function(e){var m=e.importStmt.specifiers.find(function(a){return e.local===a.local});Wi.arr.remove(e.importStmt.specifiers,m);return e.importStmt})).slice().reverse().reduce(function(e,m){var a=e.source;e=e.changes;var g=m.start,l=m.end,q=m.specifiers,r=a.slice(0,g),u=a.slice(l);a=a.slice(g,l);(m=q.length?Wi.stringify(m):"")&&m.includes("\n")&&!a.includes("\n")&&(m=m.replace(/\s+/g," "));a=r+m+u;e=e.concat({replacement:m,start:g,end:l});return{source:a,changes:e}},{source:d,changes:[]});
return Object.assign({},d,{removedImports:n})};AD.findUnusedImports=function(d){var h="string"===typeof d?Wi.fuzzyParse(d):d;d=Wi.arr.flatmap(h.body,function(e){return"ImportDeclaration"===e.type&&e.specifiers.length?e.specifiers.map(function(m){return{local:m.local,from:e.source?e.source.value:"",importStmt:e}}):[]});var n=d.map(function(e){return e.local});h=Wi.query.resolveReferences(Wi.query.scopes(h));h=Array.from(h.resolvedRefMap.keys()).filter(function(e){return!n.includes(e)});var b=Wi.arr.uniq(h.map(function(e){return e.name}));
return d.filter(function(e){return!b.includes(e.local.name)}).map(function(e){return Object.assign({},e,{local:e.local.name})})};AD.removeUnusedImports=function(d){var h=Wi.fuzzyParse(d);return this.removeImports(d,this.findUnusedImports(h),h)};Wi.ImportRemover=AD;var ln=lively.FreezerRuntime.recorderFor("lively.modules/src/nodejs.js");ln.ensureParent=function(d,h,n){if(n)return n;n=d.id;var b=d.System;h=n.startsWith("file://")?n.replace("file://",""):n;if(n=b._nodeRequire("module").Module._cache[n])return n;
n={id:h,filename:h,paths:[]};(d=d.package())&&n.paths.push(ln.resource(d.url).join("node_modules/").path());return n};ln.relative=function(d,h){return ln.resource(d.id).parent().join(h).url.replace("file://","")};ln._require=Wh;ln._resolve=Ng;ln.resource=p;ln._require=Wh;ln._require=Wh;ln._resolve=Ng;ln._resolve=Ng;var Me=lively.FreezerRuntime.recorderFor("lively.modules/src/module.js");Me.module=ih;Me.isModuleLoaded=Bo;Me.doesModuleExist=Mm;Me.arr=vf;Me.obj=Pf;Me.graph=Ir;Me.parse=Rd;Me.query=gr;
Me.computeRequireMap=Uc;Me.moduleSourceChange=ed;Me.scheduleModuleExportsChange=dd;Me.runScheduledExportChanges=Jd;Me.livelySystemEnv=dl;Me.Package=wi;Me.isURL=me;Me.emit=qk;Me.subscribe=Fq;Me.defaultClassToFunctionConverterName="initializeES6ClassForLively";Me.classRuntime=BA;Me.ImportInjector=kr;Me.GlobalInjector=iI;Me.ImportRemover=AD;Me._require=Wh;Me._resolve=Ng;Me.classHolder=Fu;var jI=function(){var d=/['"]format (esm|es6)['"];/,h=/['"]format cjs['"];/,n=/(^\s*|[}\);\n]\s*)(import\s+(['"]|(\*\s+as\s+)?[^"'\(\)\n;]+\s+from\s+['"]|\{)|export\s+\*\s+from\s+["']|export\s+(\{|default|function|class|var|const|let|async\s+function))/;
return function(b,e){return e&&e.format?("es6"==e.format&&"esm"==e.format,e.format):d.test(b.slice(0,5E3))||!h.test(b.slice(0,5E3))&&n.test(b)?"esm":h.test(b.slice(0,5E3))?"cjs":"global"}}();Me.detectModuleFormat=jI;Me.detectModuleFormat=jI;Me.detectModuleFormat=jI;Me.classHolder.module=Me.module;Me.isModuleLoaded=Bo;Me.isModuleLoaded=Bo;Me.doesModuleExist=Mm;Me.doesModuleExist=Mm;Me.globalProps={initialized:!1,descriptors:{}};var ag=function(d,h){var n=this;if(!Me.isURL(h)&&!/^@/.test(h))throw Error("ModuleInterface constructor called with "+
h+" that does not seem to be a fully normalized module id.");this.System=d;this.id=h;this.recorderName="__lvVarRecorder";this.sourceAccessorName="__lvOriginalCode";this._scope=this._ast=this._source=this._recorder=null;this._observersOfTopLevelState=[];this._evaluationsInProgress=0;this._evalId=1;this.createdAt=this.lastModifiedAt=new Date;Me.subscribe("lively.modules/modulechanged",function(b){b.module===n.id&&n.reset()})};ag.prototype.fullName=function(){return this.id};ag.prototype.shortName=function(){return this.package().name+
"/"+this.pathInPackage()};ag.prototype.source=function(){var d=this;return"@empty"===this.id?Promise.resolve(""):this._source?Promise.resolve(this._source):this.System.resource(this.id).read().then(function(h){return d._source=h})};ag.prototype.setSource=function(d){this.sourceAccessorName&&this.recorderName&&d.includes("var "+this.recorderName)&&d.includes("var "+this.sourceAccessorName)||this._source===d||(this.reset(),this._source=d)};ag.prototype.ast=function(){var d=this,h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress){if(d._ast)return e.return(d._ast);h=d;n=Me;b=n.parse;return e.yield(d.source(),2)}return e.return(h._ast=b.call(n,e.yieldResult))})};ag.prototype.scope=function(){var d=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return d._scope?n.return(d._scope):n.yield(d.ast(),2);h=n.yieldResult;return n.return(d._scope=Me.query.topLevelDeclsAndRefs(h).scope)})};ag.prototype.resolvedScope=function(){var d=this,h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==
e.nextAddress?(h=d,n=Me.query,b=n.resolveReferences,e.yield(d.scope(),2)):e.return(h._scope=b.call(n,e.yieldResult))})};ag.prototype.metadata=function(){var d=this.System.loads?this.System.loads[this.id]:null;return d?d.metadata:null};ag.prototype.addMetadata=function(d){var h=this.System,n=this.id,b=this.metadata();d=b?Object.assign(b,d):d;b={};h.config({meta:(b[n]=d,b)});return h.meta[n]};ag.prototype.format=function(){var d=this.metadata();return d&&d.format?d.format:this._source?Me.detectModuleFormat(this._source):
"global"};ag.prototype.setFormat=function(d){return this.addMetadata({format:d})};ag.prototype.reset=function(){this._scope=this._ast=this._source=null};ag.prototype.get=function(){return this.System.get(this.id)};ag.prototype.load=function(d){var h=this,n,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return n=h,b=n.id,e=n.System,d&&h.addMetadata(d),(m=e.get(b))?a.jumpTo(2):a.yield(e.import(b),3);2!=a.nextAddress&&(m=a.yieldResult);return a.return(m)})};
ag.prototype.isLoaded=function(){return!!this.System.get(this.id)};ag.prototype.unloadEnv=function(){this._recorder=null;this._observersOfTopLevelState=[];delete Me.livelySystemEnv(this.System).loadedModules[this.id]};ag.prototype.unloadDeps=function(d){var h=this;d=Me.obj.merge({forgetDeps:!0,forgetEnv:!0},d);this.dependents().forEach(function(n){h.System.delete(n.id);h.System.loads&&delete h.System.loads[n.id];d.forgetEnv&&n.unloadEnv()})};ag.prototype.unload=function(d){var h=this,n,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==
a.nextAddress)return d=Object.assign({reset:!0,forgetDeps:!0,forgetEnv:!0},d),n=h,b=n.System,e=n.id,d.reset&&h.reset(),d.forgetDeps&&h.unloadDeps(d),h.System.delete(e),b.loads&&delete b.loads[e],b.meta&&delete b.meta[e],d.forgetEnv&&h.unloadEnv(),(m=b._livelyModulesTranslationCache)?a.yield(m.deleteCachedData(e),2):a.jumpTo(2);Me.emit("lively.modules/moduleunloaded",{module:h.id},Date.now(),h.System);a.jumpToEnd()})};ag.prototype.reload=function(d){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==
b.nextAddress?(d=Me.obj.merge({reloadDeps:!0,resetEnv:!0},d),n=[h],d.reloadDeps&&(n=h.dependents().concat(n)),b.yield(h.unload({forgetDeps:d.reloadDeps,forgetEnv:d.resetEnv}),2)):3!=b.nextAddress?b.yield(Promise.all(n.map(function(e){return e.id!==h.id&&e.load()})),3):b.yield(h.load(),0)})};ag.prototype.copyTo=function(d){var h=this,n,b,e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return n=h.System.resource(d),b=n.write,l.yield(h.source(),3);if(2!=l.nextAddress)return l.yield(b.call(n,
l.yieldResult),2);e=h;m=e.System;a=Me.module(m,d);g=Me.obj.select(h,"_observersOfTopLevelState _scope _ast _source _recorder sourceAccessorName recorderName".split(" "));Object.assign(a,g);m.set(d,m.newModule(m.get(h.id)));return l.return(a)})};ag.prototype.renameTo=function(d,h){h=void 0===h?{}:h;var n=this,b,e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){switch(g.nextAddress){case 1:return b=h,e=void 0===b.unload?!0:b.unload,m=void 0===b.removeFile?!0:b.removeFile,g.yield(n.copyTo(d),
2);case 2:a=g.yieldResult;if(!e){g.jumpTo(3);break}return g.yield(n.unload({reset:!0,forgetDeps:!1,forgetEnv:!0}),3);case 3:if(!m){g.jumpTo(5);break}return g.yield(n.System.resource(n.id).remove(),5);case 5:return g.return(a)}})};ag.prototype.whenLoaded=function(d){if(this.isLoaded())try{d(this)}catch(h){console.error(h)}else Me.livelySystemEnv(this.System).onLoadCallbacks.push({moduleName:this.id,resolved:!0,callback:d})};ag.prototype.changeSourceAction=function(d){var h=this;return Promise.resolve(this.source()).then(function(n){return d(n)}).then(function(n){return h.changeSource(n)})};
ag.prototype.changeSource=function(d,h){h=Object.assign({doSave:!0,doEval:!0},h);var n=this.System,b=this.id,e=this.format(),m;this.reset();this.lastModifiedAt=new Date;return Promise.all([h.doSave&&this.System.resource(b).write(d),h.doEval&&Me.moduleSourceChange(n,b,d,e,h).then(function(a){return m=a})]).then(function(){return m})};ag.prototype.addDependencyToModuleRecord=function(d,h){var n=this;h=void 0===h?function(){}:h;var b=this.record(),e=d.record();if(b&&e){var m,a=b.dependencies.some(function(l,
q){if(l)return m=q,l&&l.name===d.id});a?e!==b.dependencies[m]&&b.dependencies.splice(m,1,e):b.dependencies.push(e);a&&b.setters[m]||(b.setters[a?m:b.dependencies.length-1]=h);var g;e.importers.some(function(l,q){if(l)return g=q,l&&l.name===n.id})?b!==e.importers[g]&&e.importers.splice(g,1,b):e.importers.push(b)}};ag.prototype.dependents=function(){var d=this;return Me.graph.hull(Me.graph.invert(Me.computeRequireMap(this.System)),this.id).map(function(h){return Me.module(d.System,h)})};ag.prototype.requirements=
function(){var d=this;return Me.graph.hull(Me.computeRequireMap(this.System),this.id).map(function(h){return Me.module(d.System,h)})};ag.prototype.directRequirements=function(){var d=this,h=(this.record()||{}).dependencies||[];return Me.arr.pluck(h.filter(Boolean),"name").map(function(n){return Me.module(d.System,n)})};ag.prototype.define=function(d,h,n,b){n=void 0===n?!0:n;var e=this.System,m=this.id,a=this.recorder,g=Symbol.for("lively-object-meta"),l=Symbol.for("lively-module-meta");"function"!==
typeof h||!b||"function"!==b.kind&&"class"!==b.kind||(h[g]=b);h&&h[g]&&!h[l]&&(b=this.pathInPackage(),g=this.package(),h[l]={package:g?{name:g.name,version:g.version}:{},pathInPackage:b});a[d]=h;Me.scheduleModuleExportsChange(e,m,d,h,!1);this.notifyTopLevelObservers(d);(n=n||!this.isEvalutionInProgress())&&Me.runScheduledExportChanges(e,m);return h};ag.prototype.undefine=function(d){delete this.recorder[d]};ag.prototype.subscribeToToplevelDefinitionChanges=function(d){this._observersOfTopLevelState.push(d);
return d};ag.prototype.notifyTopLevelObservers=function(d){var h=this.recorder;Me.arr.include(["createOrExtendES6ClassForLively","lively.capturing-declaration-wrapper"],d)||this._observersOfTopLevelState.forEach(function(n){return n(d,h[d])})};ag.prototype.unsubscribeFromToplevelDefinitionChanges=function(d){this._observersOfTopLevelState="string"===typeof d?this._observersOfTopLevelState.filter(function(h){return h.name!==d}):this._observersOfTopLevelState.filter(function(h){return h!==d})};ag.prototype.evaluationStart=
function(){this._evaluationsInProgress++};ag.prototype.evaluationEnd=function(){this._evaluationsInProgress--;Me.runScheduledExportChanges(this.System,this.id)};ag.prototype.nextEvalId=function(){return this._evalId++};ag.prototype.isEvalutionInProgress=function(){return 0<this._evaluationsInProgress};ag.prototype.env=function(){return this};ag.prototype.package=function(){return Me.Package.forModule(this.System,this)};ag.prototype.pathInPackage=function(){var d=this.package();return d&&0===this.id.indexOf(d.address)?
this.id.slice(d.address.length).replace(/^\//,""):this.id};ag.prototype.imports=function(){var d=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(h=Me.query,n=h.imports,b.yield(d.scope(),2)):b.return(n.call(h,b.yieldResult))})};ag.prototype.exports=function(){var d=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(h=Me.query,n=h.exports,b.yield(d.scope(),2)):b.return(n.call(h,b.yieldResult))})};ag.prototype.addImports=
function(d){var h=this,n,b,e,m,a,g,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(h.source(),2);n=u.yieldResult;b=$jscomp.makeIterator(d);for(e=b.next();!e.done;e=b.next())m=e.value,a=Me.module(h.System,m.from||m.moduleId),g=a.package(),l={exported:m.exported||m.local,moduleId:a.id,packageName:g.name,packageURL:g.url,pathInPackage:a.pathInPackage()},q=m.local,r=Me.ImportInjector.run(h.System,h.id,h.package(),n,l,q),n=r.newSource;return u.yield(h.changeSource(n),
0)})};ag.prototype.addGlobalDeclaration=function(d){var h=this,n,b,e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==g.nextAddress?g.yield(h.source(),2):3!=g.nextAddress?(n=g.yieldResult,b=Me.GlobalInjector.run(n,d),e=b.status,m=b.newSource,(a="modified"===e)?g.yield(h.changeSource(m),3):g.jumpTo(3)):g.return(a)})};ag.prototype.removeImports=function(d){var h=this,n,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return d.length?
a.yield(h.source(),2):a.return();case 2:return n=a.yieldResult,a.yield(Me.ImportRemover.removeImports(n,d),3);case 3:return b=a.yieldResult,e=b.source,m=b.removedImports,a.yield(h.changeSource(e),4);case 4:m.forEach(function(g){return delete h.recorder[g.local]}),a.jumpToEnd()}})};ag.prototype._localDeclForRefAt=function(d){var h=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(h.resolvedScope(),2);n=e.yieldResult;b=Me.query.refWithDeclAt(d,
n);return e.return(b&&{decl:b.decl,id:b.declId,declModule:h})})};ag.prototype._localDeclForName=function(d){var h=this,n,b,e,m,a,g,l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(h.resolvedScope(),2);n=r.yieldResult;e=$jscomp.makeIterator(n.resolvedRefMap.values());for(m=e.next();!m.done;m=e.next())if(g=a=m.value,l=g.ref,q=l.name,d===q){b=a;break}return r.return(b&&{decl:b.decl,id:b.declId,declModule:h})})};ag.prototype._importForNSRefAt=function(d){var h=
this,n,b,e,m,a,g,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(h.resolvedScope(),2);n=u.yieldResult;b=n.node;e=Me.query.nodesAtIndex(b,d);if(2>e.length)return u.return([null,null]);m=e[e.length-1];a=e[e.length-2];if("Identifier"!=m.type||"MemberExpression"!=a.type||a.computed||"Identifier"!==a.object.type)return u.return([null,null]);g=n.resolvedRefMap.get(a.object)||{};l=g.decl;if(!l||"ImportDeclaration"!==l.type)return u.return([null,null]);
q=a.object.name;r=l.specifiers.find(function(v){return v.local.name===q});return u.return("ImportNamespaceSpecifier"!==r.type?[null,null]:[l,r.local,m.name])})};ag.prototype._resolveImportedDecl=function(d){var h=this,n,b,e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:if(!d)return q.return([]);n=d.id;b=n.name;return q.yield(h.imports(),2);case 2:e=q.yieldResult;m=e.find(function(r){return r.local==b});if(!m){q.jumpTo(3);break}a=Me.module(h.System,
m.fromModule,h.id);g=[d];l=g.concat;return q.yield(a.bindingPathForExport(m.imported),4);case 4:return q.return(l.call(g,q.yieldResult));case 3:return q.return([d])}})};ag.prototype.bindingPathFor=function(d){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?b.yield(h._localDeclForName(d),2):4!=b.nextAddress?(n=b.yieldResult)?b.yield(h._resolveImportedDecl(n),4):b.jumpTo(0):b.return(b.yieldResult)})};ag.prototype.bindingPathForExport=function(d){var h=
this,n,b,e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return l.yield(h.resolvedScope(),2);case 2:return l.yield(h.exports(),3);case 3:n=l.yieldResult;b=n.find(function(q){return q.exported===d});if(!b.fromModule)return l.return(h._resolveImportedDecl({decl:b.decl,id:b.declId,declModule:b&&b.decl?h:null}));e=Me.module(h.System,b.fromModule,h.id);m={decl:b.node,id:b.declId,declModule:h};a=[m];g=a.concat;return l.yield(e.bindingPathForExport(b.imported),
5);case 5:return l.return(g.call(a,l.yieldResult))}})};ag.prototype.bindingPathForRefAt=function(d){var h=this,n,b,e,m,a,g,l,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.yield(h._localDeclForRefAt(d),2);case 2:n=v.yieldResult;if(!n){v.jumpTo(3);break}return v.yield(h._resolveImportedDecl(n),4);case 4:return v.return(v.yieldResult);case 3:return b=$jscomp,e=b.makeIterator,v.yield(h._importForNSRefAt(d),5);case 5:m=e.call(b,v.yieldResult);
a=m.next().value;g=m.next().value;l=m.next().value;if(!a)return v.return([]);q=Me.module(h.System,a.source.value,h.id);r=[{decl:a,declModule:h,id:g}];u=r.concat;return v.yield(q.bindingPathForExport(l),6);case 6:return v.return(u.call(r,v.yieldResult))}})};ag.prototype.definitionForRefAt=function(d){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(h.bindingPathForRefAt(d),2);n=b.yieldResult;return b.return(1>n.length?null:n[n.length-1].decl)})};
ag.prototype.ensureRecord=function(){var d=this.System,h=d._loader.moduleRecords;return h[this.id]?h[this.id]:h[this.id]={name:this.id,exports:d.newModule({}),dependencies:[],importers:[],setters:[]}};ag.prototype.record=function(){var d=this.System._loader.moduleRecords[this.id];if(!d)return null;d.hasOwnProperty("__lively_modules__")||(d.__lively_modules__={evalOnlyExport:{}});return d};ag.prototype.updateRecord=function(d){var h=this.record();if(!h)throw Error("es6 environment global of "+this.id+
": module not loaded, cannot get export object!");h.locked=!0;try{return d(h)}finally{h.locked=!1}};ag.prototype.search=function(d,h){var n=this,b,e,m,a,g,l,q,r,u,v,y,z,A,B;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress)return h=Object.assign({excludedModules:[]},h),h.excludedModules.some(function(E){return"string"===typeof E?E===n.id:E instanceof RegExp?E.test(n.id):"function"===typeof E?E(n.id):!1})?G.return([]):G.yield(n.source(),2);b=G.yieldResult;d instanceof
RegExp?(m="g",d.ignoreCase&&(m+="i"),d.multiline&&(m+="m"),e=RegExp(d.source,m)):e=RegExp(d,"g");for(g=[];null!==(a=e.exec(b));)g.push([a.index,a[0].length]);q=l=0;r=1;for(u=0;l<b.length&&q<g.length;l++)"\n"==b[l]&&(r++,u=l+1),v=$jscomp.makeIterator(g[q]),y=v.next().value,z=v.next().value,l===y&&(A=b.slice(u).indexOf("\n"),A=-1===A?b.length:A+u,B=n.package(),g[q]={moduleId:n.id,packageName:B?B.name:void 0,pathInPackage:B?n.pathInPackage():n.id,isLoaded:n.isLoaded(),length:z,line:r,column:l-u,lineString:1E3<
A-u?"..."+b.slice(l-10,l+100)+"...":b.slice(u,A)},q++);return G.return(g)})};ag.prototype.toString=function(){return"module("+this.id+")"};$jscomp.global.Object.defineProperties(ag.prototype,{dontTransform:{configurable:!0,enumerable:!0,get:function(){return[this.recorderName,this.sourceAccessorName,"global","self","_moduleExport","_moduleImport","localStorage","prompt","alert","fetch","getComputedStyle"].concat($jscomp.arrayFromIterable(Me.GlobalInjector.getGlobals(this._source))).concat(Me.query.knownGlobals)}},
recorder:{configurable:!0,enumerable:!0,set:function(d){return this._recorder=d},get:function(){if(this._recorder)return this._recorder;var d=this.System,h=this;if(!Me.globalProps.initialized){Me.globalProps.initialized=!0;for(var n in d.global)if(d.global.__lookupGetter__(n)||"closed"==n)Me.globalProps.descriptors[n]={value:void 0,configurable:!0,writable:!0}}n={};if(d.get("@system-env").node){var b=Me._require.bind(null,this);b.resolve=Me._resolve.bind(null,this);n.require={configurable:!0,writable:!0,
value:b}}b={};return this._recorder=Object.create(d.global,Object.assign({},Me.globalProps.descriptors,{},n,(b.System={configurable:!0,writable:!0,value:d},b.__currentLivelyModule={value:h},b[Me.defaultClassToFunctionConverterName]={configurable:!0,writable:!0,value:Me.classRuntime.initializeClass},b[this.varDefinitionCallbackName]={value:function(e,m,a,g,l){l=l||{};l.kind=m;return h.define(e,a,!1,l)}},b._moduleExport={value:function(e,m){Me.scheduleModuleExportsChange(d,h.id,e,m,!0)}},b._moduleImport=
{value:function(e,m){var a=d.decanonicalize(e,h.id),g=d.get(a);if(g){h.addDependencyToModuleRecord(Me.module(d,a),function(l){return Object.assign(h.recorder,l)});if(void 0==m)return g;g.hasOwnProperty(m)||console.warn("import from "+g+": Has no export "+m+"!");return g[m]}console.warn("import of "+m+" failed: "+e+" (tried as "+h.id+") is not loaded!")}},b)))}},varDefinitionCallbackName:{configurable:!0,enumerable:!0,get:function(){return"defVar_"+this.id}}});Me.ModuleInterface=ag;Me.default=ih;var ie=
lively.FreezerRuntime.recorderFor("lively.modules/src/instrumentation.js");ie.canonicalURL=function(d){var h=d.match(/([^:]+:\/\/)(.*)/);if(h){var n=h[1];d=h[2]}d=d.replace(/([^:])\/[\/]+/g,"$1/");return(n||"")+d};ie.prepareNodejsCaching=function(){var d=System._nodeRequire("fs"),h=System._nodeRequire("path"),n="win32"===process.platform;h=n||"/"!==process.cwd()?process.cwd():h.join(process.env.HOME,".lively.next");ie.nodejsCacheDirURL=n?"file:///"+h.replace(/\\/g,"/"):"file://"+h;d.existsSync(h)||
d.mkdirSync(h)};ie.getExceptions=ks;ie.setExceptions=ls;ie.prepareCodeForCustomCompile=ms;ie.prepareTranslatedCodeForSetterCapture=ns;ie.getCachedNodejsModule=function(d,h){try{var n=d._nodeRequire("module").Module,b=n._resolveFilename(h.name.replace(/^file:\/\//,"").replace(/^\/([a-z]:\/)/i,"$1"));return n._cache[b]}catch(e){d.debug&&console.log("[lively.modules getCachedNodejsModule] %s unknown to nodejs",h.name)}return null};ie.addNodejsWrapperSource=function(d,h){var n=ie.getCachedNodejsModule(d,
h);if(n)return h.metadata.format="esm",h.source="var exports = System._nodeRequire('"+n.id+"'); export default exports;\n"+ie.properties.allOwnPropertiesOrFunctions(n.exports).map(function(b){return ie.isValidIdentifier(b)?"export var "+b+" = exports['"+b+"'];":'/*ignoring export "'+b+'" b/c it is not a valid identifier*/'}).join("\n"),d.debug&&console.log("[lively.modules customTranslate] loading %s from nodejs module cache",h.name),!0;d.debug&&console.log("[lively.modules customTranslate] %s not yet in nodejs module cache",
h.name);return!1};ie.customTranslate=function(d,h){var n=this,b,e,m,a,g,l,q,r,u,v,y,z,A,B,G,E,K,J,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){switch(ea.nextAddress){case 1:b=n;e=b.debug;if(a=(m=h.metadata)&&m.hasOwnProperty("instrument")&&!m.instrument||ie.exceptions.some(function(ra){return ra(h.name)}))return e&&console.log("[lively.modules customTranslate ignoring] %s",h.name),ea.return(d(h));if(ie.isNode&&ie.addNodejsWrapperSource(b,h))return e&&console.log("[lively.modules] loaded %s from nodejs cache",
h.name),ea.return(d(h));g=Date.now();l=ie.detectModuleFormat(h.source,m);q=ie.module(b,h.name);r=!1;u="esm"===l;q.setSource(h.source);ea.setCatchFinallyBlocks(2);v=b.useModuleTranslationCache;y=b.global.indexedDB;z=v&&String(ie.string.hashCode(h.source));if(v&&y&&u)return A=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new ie.BrowserModuleTranslationCache),ea.yield(A.fetchStoredModuleSource(h.name),8);if(!(ie.isNode&&v&&u)){ea.jumpTo(5);break}A=b._livelyModulesTranslationCache||
(b._livelyModulesTranslationCache=new ie.NodeModuleTranslationCache);return ea.yield(A.fetchStoredModuleSource(h.name),7);case 7:if((B=ea.yieldResult)&&B.hash==z&&B.timestamp>=ie.NodeModuleTranslationCache.earliestDate&&B.source)return m.format="register",m.deps=[],e&&console.log("[lively.modules customTranslate] loaded %s from filesystem cache after %sms",h.name,Date.now()-g),ea.return(Promise.resolve(B.source));ea.jumpTo(5);break;case 8:if((B=ea.yieldResult)&&B.hash==z&&B.timestamp>=ie.BrowserModuleTranslationCache.earliestDate&&
B.source)return m.format="register",m.deps=[],e&&console.log("[lively.modules customTranslate] loaded %s from browser cache after %sms",h.name,Date.now()-g),ea.return(Promise.resolve(B.source));case 5:ea.leaveTryBlock(3);break;case 2:G=ea.enterCatchBlock(),console.error("[lively.modules customTranslate] error reading module translation cache: "+G.stack);case 3:return E={},u?(q.recorderName="__lvVarRecorder",q.recorder===b.global&&q.unloadEnv(),h.metadata.format="esm",K=ie.prepareCodeForCustomCompile(b,
h.source,h.name,q,e),E=K.options,J=K.source,h.source=J,r=h.metadata["lively.modules instrumented"]=!0,e&&console.log("[lively.modules] loaded %s as es6 module",h.name)):"global"===h.metadata.format&&(q.recorderName="System.global",q.recorder=b.global,h.metadata.format="global",P=ie.prepareCodeForCustomCompile(b,h.source,h.name,q,e),E=P.options,J=P.source,h.source=J,r=h.metadata["lively.modules instrumented"]=!0,e&&console.log("[lively.modules] loaded %s as instrumented global module",h.name)),r||
e&&console.log("[lively.modules] customTranslate ignoring %s b/c don't know how to handle format %s",h.name,h.metadata.format),ea.return(d(h).then(function(ra){var D,O,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:0===ra.indexOf("System.register(")&&(e&&console.log("[lively.modules customTranslate] Installing System.register setter captures for %s",h.name),ra=ie.prepareTranslatedCodeForSetterCapture(b,ra,h.name,q,E,e));if(ie.isNode&&v&&u)return D=b._livelyModulesTranslationCache||
(b._livelyModulesTranslationCache=new ie.NodeModuleTranslationCache),N.setCatchFinallyBlocks(8),N.yield(D.cacheModuleSource(h.name,z,ra),10);if(!(v&&y&&u)){N.jumpTo(3);break}D=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new ie.BrowserModuleTranslationCache);N.setCatchFinallyBlocks(5);return N.yield(D.cacheModuleSource(h.name,z,ra),7);case 7:e&&console.log("[lively.modules customTranslate] stored cached version for %s",h.name);N.leaveTryBlock(3);break;case 5:O=N.enterCatchBlock();
console.error("[lively.modules customTranslate] failed storing module cache: "+O.stack);N.jumpTo(3);break;case 10:e&&console.log("[lively.modules customTranslate] stored cached version in filesystem for %s",h.name);N.leaveTryBlock(3);break;case 8:L=N.enterCatchBlock(),console.error("[lively.modules customTranslate] failed storing module cache: "+L.stack);case 3:return e&&console.log("[lively.modules customTranslate] done %s after %sms",h.name,Date.now()-g),N.return(ra)}})}))}})};ie.instrumentSourceOfEsmModuleLoad=
Dp;ie.instrumentSourceOfGlobalModuleLoad=Ug;ie.wrapModuleLoad=Qi;ie.unwrapModuleLoad=Gi;ie.parse=Rd;ie.nodes=Au;ie.isValidIdentifier=jv;var QO=ie.nodes;ie.funcCall=QO.funcCall;ie.member=QO.member;ie.literal=QO.literal;ie.evalCodeTransform=Eq;ie.evalCodeTransformOfSystemRegisterSetters=$r;ie.arr=vf;ie.string=vh;ie.properties=$m;ie.module=ih;ie.detectModuleFormat=jI;ie.resource=p;ie.installHook=hc;ie.removeHook=lc;ie.isHookInstalled=Yb;ie.classToFunctionTransform=di;ie.isNode=System.get("@system-env").node;
var BD=function(){};BD.prototype.cacheModuleSource=function(d,h,n){throw Error("not yet implemented");};BD.prototype.fetchStoredModuleSource=function(d){throw Error("not yet implemented");};BD.prototype.deleteCachedData=function(d){throw Error("not yet implemented");};$jscomp.global.Object.defineProperties(BD,{earliestDate:{configurable:!0,enumerable:!0,get:function(){return+new Date("Sun Nov 06 2016 16:00:00 GMT-0800 (PST)")}}});ie.ModuleTranslationCache=BD;ie.nodejsCacheDirURL=null;var Gu=function(){return ie.ModuleTranslationCache.apply(this,
arguments)||this};$jscomp.inherits(Gu,ie.ModuleTranslationCache);Gu.prototype.ensurePath=function(d){var h=this,n,b,e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return q.yield(h.moduleCacheDir.join(d).exists(),2);case 2:if(q.yieldResult)return q.return();n="";m=$jscomp.makeIterator(d.split("/"));a=m.next();case 3:if(a.done){q.jumpTo(0);break}g=a.value;n+=g+"/";b=h.moduleCacheDir.join(n);return q.yield(b.exists(),6);case 6:if(q.yieldResult){q.jumpTo(7);
break}q.setCatchFinallyBlocks(8);return q.yield(b.mkdir(),10);case 10:q.leaveTryBlock(7);break;case 8:if(l=q.enterCatchBlock(),"EEXIST"!=l.code)throw l;case 7:return b=ie.resource("file://"+n+"/package.json"),q.yield(b.exists(),11);case 11:if(!q.yieldResult){q.jumpTo(4);break}return q.yield(b.read(),13);case 13:return e=q.yieldResult,q.yield(h.moduleCacheDir.join(n+"/package.json").write(e),4);case 4:a=m.next(),q.jumpTo(3)}})};Gu.prototype.dumpModuleCache=function(){var d=this,h,n,b,e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){switch(g.nextAddress){case 1:n=
g.forIn(System._nodeRequire("module").Module._cache);case 2:if(null==(h=n.getNext())){g.jumpTo(0);break}b=ie.resource("file://"+h);return g.yield(b.exists(),5);case 5:if(!g.yieldResult){g.jumpTo(2);break}e=d;m=e.cacheModuleSource;a=h;return g.yield(b.read(),8);case 8:return g.yield(m.call(e,a,"NO_HASH",g.yieldResult),2)}})};Gu.prototype.getFileName=function(d){return d.match(/([^\/]*.)(\.js)?$/)[0]};Gu.prototype.fetchStoredModuleSource=function(d){var h=this,n,b,e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return d=
d.replace("file://",""),n=h.getFileName(d),b=d.replace(n,""),e=h.moduleCacheDir.join(d),q.yield(e.exists(),2);case 2:return q.yieldResult?q.yield(e.stat(),3):q.return(null);case 3:return m=q.yieldResult,a=m.birthtime,q.yield(e.read(),4);case 4:return g=q.yieldResult,q.yield(h.moduleCacheDir.join(b+"/.hash_"+n).read(),5);case 5:return l=q.yieldResult,q.return({source:g,timestamp:a,hash:l})}})};Gu.prototype.cacheModuleSource=function(d,h,n){var b=this,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==
a.nextAddress?(d=d.replace("file://",""),e=b.getFileName(d),m=d.replace(e,""),a.yield(b.ensurePath(m),2)):3!=a.nextAddress?a.yield(b.moduleCacheDir.join(d).write(n),3):a.yield(b.moduleCacheDir.join(m+"/.hash_"+e).write(h),0)})};Gu.prototype.deleteCachedData=function(d){var h=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(d=d.replace("file://",""),n=h.getFileName(d),d.replace(n,""),b=h.moduleCacheDir.join(d),e.yield(b.exists(),2)):3!=e.nextAddress?
e.yieldResult?e.yield(b.remove(),3):e.return(!1):e.return(!0)})};$jscomp.global.Object.defineProperties(Gu.prototype,{moduleCacheDir:{configurable:!0,enumerable:!0,get:function(){ie.nodejsCacheDirURL||ie.prepareNodejsCaching();return ie.resource(ie.nodejsCacheDirURL+"/.module_cache/")}}});ie.NodeModuleTranslationCache=Gu;var sw=function(d){d=void 0===d?"lively.modules-module-translation-cache":d;var h=ie.ModuleTranslationCache.call(this)||this;h.version=2;h.sourceCodeCacheStoreName="sourceCodeStore";
h.dbName=d;h.db=h.openDb();return h};$jscomp.inherits(sw,ie.ModuleTranslationCache);sw.prototype.openDb=function(){var d=this,h=System.global.indexedDB.open(this.version);return new Promise(function(n,b){h.onsuccess=function(e){n(this.result)};h.onerror=function(e){return b(e.target)};h.onupgradeneeded=function(e){return e.currentTarget.result.createObjectStore(d.sourceCodeCacheStoreName,{keyPath:"moduleId"})}})};sw.prototype.deleteDb=function(){var d=System.global.indexedDB.deleteDatabase(this.dbName);
return new Promise(function(h,n){d.onerror=function(b){return n(b.target)};d.onsuccess=function(b){return h(b)}})};sw.prototype.closeDb=function(){var d=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(d.db,2);h=b.yieldResult;n=h.close();return b.return(new Promise(function(e,m){n.onsuccess=function(a){e(this.result)};n.onerror=function(a){return m(a.target.errorCode)}}))})};sw.prototype.cacheModuleSource=function(d,h,n){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==
m.nextAddress)return m.yield(b.db,2);e=m.yieldResult;return m.return(new Promise(function(a,g){var l=e.transaction([b.sourceCodeCacheStoreName],"readwrite"),q=l.objectStore(b.sourceCodeCacheStoreName),r=Date.now();q.put({moduleId:d,hash:h,source:n,timestamp:r});l.oncomplete=a;l.onerror=g}))})};sw.prototype.fetchStoredModuleSource=function(d){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(h.db,2);n=b.yieldResult;return b.return(new Promise(function(e,
m){var a=n.transaction([h.sourceCodeCacheStoreName]).objectStore(h.sourceCodeCacheStoreName).get(d);a.onerror=m;a.onsuccess=function(g){return e(a.result)}}))})};sw.prototype.deleteCachedData=function(d){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(h.db,2);n=b.yieldResult;return b.return(new Promise(function(e,m){var a=n.transaction([h.sourceCodeCacheStoreName],"readwrite").objectStore(h.sourceCodeCacheStoreName).delete(d);a.onerror=
m;a.onsuccess=function(g){return e(a.result)}}))})};ie.BrowserModuleTranslationCache=sw;ie.node_modulesDir=System.decanonicalize("lively.modules/node_modules/");ie.exceptions=[function(d){return!d.endsWith(".js")&&!d.endsWith(".jsx")&&!d.startsWith("https://jspm.dev")},function(d){return d.endsWith("dist/acorn.js")||d.endsWith("dist/escodegen.browser.js")||d.endsWith("bowser.js")||d.endsWith("TweenMax.min.js")},function(d){return d.endsWith("babel-core/browser.js")||d.endsWith("system.src.js")||d.includes("systemjs-plugin-babel")}];
ie.pendingConfigs=[];ie.configInitialized=!1;ie.prepareCodeForCustomCompile=ms;ie.prepareCodeForCustomCompile=ms;ie.prepareTranslatedCodeForSetterCapture=ns;ie.prepareTranslatedCodeForSetterCapture=ns;ie.wrapModuleLoad=Qi;ie.wrapModuleLoad=Qi;ie.unwrapModuleLoad=Gi;ie.unwrapModuleLoad=Gi;ie.getExceptions=ks;ie.getExceptions=ks;ie.setExceptions=ls;ie.setExceptions=ls;ie.instrumentSourceOfEsmModuleLoad=Dp;ie.instrumentSourceOfEsmModuleLoad=Dp;ie.instrumentSourceOfGlobalModuleLoad=Ug;ie.instrumentSourceOfGlobalModuleLoad=
Ug;var qh=lively.FreezerRuntime.recorderFor("lively.modules/src/resource.js");qh.fetchResource=function(d,h){var n=this,b,e,m,a,g,l,q,r,u,v,y,z,A,B,G,E,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){switch(J.nextAddress){case 1:b=n;e=b.resource(h.name);m=b.get("@system-env").node&&!e.isNodeJSFileResource;if(!m){J.jumpTo(2);break}return J.yield(rfa(h.name),3);case 3:e=J.yieldResult;case 2:if(!e)return J.return(d(h));J.setCatchFinallyBlocks(4);if(!e.isResource){l=e;J.jumpTo(6);break}return J.yield(e.read(),
7);case 7:l=J.yieldResult;case 6:a=l;J.leaveTryBlock(5);break;case 4:g=q=J.enterCatchBlock();case 5:if(!g||!b.get("@system-env").browser){J.jumpTo(8);break}r=e.url.startsWith("http");u=!e.url.startsWith(document.location.origin);if(!r||!u){J.jumpTo(8);break}J.setCatchFinallyBlocks(10);return J.yield(e.makeProxied().read(),12);case 12:a=J.yieldResult;g=null;J.leaveTryBlock(8);break;case 10:J.enterCatchBlock();case 8:if(g)throw g;if(!m){J.jumpTo(13);break}v=a.headers||{};y=v._headers;z=$jscomp.makeIterator(y&&
y["content-encoding"]||[]);A=z.next().value;return"br"==A?(B=qh.Buffer,G=B.from,E=qh.brotli,K=E.decompress,J.yield(a.buffer(),17)):J.yield(a.text(),16);case 16:a=J.yieldResult;J.jumpTo(13);break;case 17:a=G.call(B,K.call(E,J.yieldResult)).toString();case 13:return J.return(a)}})};qh.livelyProtocol=function(d,h){var n=h.match(qh.livelyURLRe);if(!n)return d(h);d=$jscomp.makeIterator(n);d.next();d.next();var b=d.next().value;return{read:function(){var e="undefined"!==typeof $world&&$world.getMorphWithId(b);
return Promise.resolve(e?e.textString:"/*Could not locate "+b+"*/")},write:function(e){var m="undefined"!==typeof $world&&$world.getMorphWithId(b);if(!m)return Promise.reject("Could not save morph "+b);m.textString=e;return Promise.resolve(this)}}};qh.wrapResource=Rl;qh.unwrapResource=sz;qh.resource=p;qh.Resource=jg;qh.installHook=hc;qh.removeHook=lc;qh.isHookInstalled=Yb;qh.brotli=qh.brotli||void 0;if(System.get("@system-env").node){var rfa=System._nodeRequire("node-fetch");qh.brotli=System._nodeRequire("brotli")}qh.livelyURLRe=
/^lively:\/\/([^\/]+)\/(.*)$/;qh.wrapResource=Rl;qh.wrapResource=Rl;qh.unwrapResource=sz;qh.unwrapResource=sz;var ly=function(){return qh.Resource.apply(this,arguments)||this};$jscomp.inherits(ly,qh.Resource);ly.prototype.read=function(){var d=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){h=d.morphId;n="undefined"!==typeof $world&&$world.getMorphWithId(h);return b.return(Promise.resolve(n?n.textString:"/*Could not locate "+h+"*/"))})};ly.prototype.write=function(d){var h=
this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){n=h.morphId;b="undefined"!==typeof $world&&$world.getMorphWithId(n);if(!b)return e.return(Promise.reject("Could not save morph "+n));b.textString=d;return e.return(Promise.resolve(h))})};ly.prototype.exists=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return("undefined"!==typeof $world&&$world.getMorphWithId(d.morphId))})};ly.prototype.remove=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){"undefined"!==
typeof $world&&$world.getMorphWithId(d.morphId).remove();return h.return(!0)})};$jscomp.global.Object.defineProperties(ly.prototype,{canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!1}},morphId:{configurable:!0,enumerable:!0,get:function(){var d=this.url.match(qh.livelyURLRe);d=$jscomp.makeIterator(d);d.next();d.next();return d.next().value}}});qh.LivelyResource=ly;var RO={name:"lively.modules",matches:function(d){return d.match(qh.livelyURLRe)},resourceClass:qh.LivelyResource};
qh.resourceExtension=RO;qh.resourceExtension=RO;qh.resourceExtension=RO;qh.registerExtension=w;qh.registerExtension(qh.resourceExtension);var Bd=lively.FreezerRuntime.recorderFor("lively.modules/src/system.js");Bd.wrapModuleResolution=Cv;Bd.unwrapModuleResolution=Vg;Bd.livelySystemEnv=dl;Bd.systems=function(){System.constructor.systems||(System.constructor.systems={});return System.constructor.systems};Bd.nameOfSystem=function(d){return Object.keys(Bd.systems()).detect(function(h){return Bd.systems()[h]===
d})};Bd.getSystem=Sl;Bd.removeSystem=Kq;Bd.makeSystem=function(d){return Bd.prepareSystem(new System.constructor,d)};Bd.prepareSystem=ME;Bd.urlQuery=function(){return"undefined"!==typeof document&&document.location?(document.location.search||"").replace(/^\?/,"").split("&").reduce(function(d,h){var n=h.split("=");h=n[0];n=n[1];"true"===n||"false"===n?n=eval(n):isNaN(Number(n))||(n=Number(n));d[h]=n;return d},{}):{}};Bd.preNormalize=function(d,h,n){".."===h&&(h="../index.js");h=h.replace(Bd.doubleSlashRe,
function(g){return":"===g[0]?g:g[0]+"/"});var b=d.get("@lively-env").packageRegistry;if(b){var e=n&&b.findPackageHavingURL(n);if(e){var m=e.map,a=e.url;if(m=m&&m[h]||d.map[h])"object"===typeof m&&(m=Bd.normalize_doMapWithObject(m,e,d)),"string"===typeof m&&""!==m&&(h=m),h.startsWith(".")&&(h=Bd.urlResolve(Bd.join(a,h)))}}b&&(d=b.resolvePath(h,n))&&(d.endsWith("/")&&!h.endsWith("/")&&(d=d.slice(0,-1)),!d.endsWith("/")&&h.endsWith("/")&&(d+="/"),h=d);return h};Bd.postNormalize=function(d,h,n){n=h.replace(Bd.jsExtRe,
"");if(h.endsWith("/"))return h;var b=d.get("@lively-env").packageRegistry;if(b){if(d=b.findPackageWithURL(n))return d=(d.main||"index.js").replace(Bd.dotSlashStartRe,""),h=n.replace(Bd.trailingSlashRe,"")+"/"+d}else if(n in d.packages&&(d=d.packages[n].main))return h=n.replace(Bd.trailingSlashRe,"")+"/"+d.replace(Bd.dotSlashStartRe,"");return(n=h.match(Bd.jsonJsExtRe))?n[1]:h};Bd.checkExistence=function(d,h){var n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress){h._fileCheckMap=
h._fileCheckMap||{};if(d in h._fileCheckMap)return e.return(h._fileCheckMap[d]);n=h._fileCheckMap;b=d;return e.yield(Bd.resource(d).exists(),2)}return e.return(n[b]=e.yieldResult)})};Bd.normalizeHook=function(d,h,n,b){var e=this,m,a,g,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:if(n&&"cjs"==h)return u.return("cjs");m=e;a=Bd.preNormalize(m,h,n);return u.yield(d(a,n,b),2);case 2:g=u.yieldResult;l=Bd.postNormalize(m,g||a,!1);q=l.startsWith("file:");
m.debug&&console.log("[normalize] "+h+" => "+l);if(Bd.jsExtRe.test(h)||Bd.jsxExtRe.test(h)||Bd.jsonExtRe.test(l)||Bd.nodeModRe.test(l)||Bd.nodeExtRe.test(l)||m.loads&&m.loads[l]||!Bd.jsExtRe.test(l)){u.jumpTo(3);break}return u.yield(Bd.checkExistence(l,m),4);case 4:if(u.yieldResult)return u.return(l);r=l.replace(".js","/index.js");return u.yield(Bd.checkExistence(r,m),5);case 5:return u.yieldResult||!q?u.return(r):u.return(l.replace(".js","/index.node"));case 3:return Bd.jsxJsExtRe.test(l)&&(l=l.replace(".jsx.js",
".jsx")),u.return(l)}})};Bd.decanonicalizeHook=function(d,h,n,b){if(h&&h.endsWith("!cjs")){h=h.replace("!cjs","");var e="!cjs"}var m=Bd.preNormalize(this,h,n);d=d(m,n,b);d=Bd.postNormalize(this,d,!0);e&&(d+=e);this.debug&&console.log("[normalizeSync] "+h+" => "+d);return d};Bd.locateHook=function(d,h){var n,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return n=$jscomp.makeIterator(h.name.split("!")),b=n.next().value,n.next(),h.name=b,m.yield(d(h),2);e=m.yieldResult;
return m.return(e)})};Bd.normalize_doMapWithObject=function(d,h,n){h=n.get(h.map["@env"]||"@system-env");var b;for(b in d){n="~"==b[0];var e=n?b.substr(1):b;var m=h;for(e=e.split(".");e.length;)m=m[e.shift()];if(!n&&m||n&&!m){var a=d[b];break}}if(a&&"string"!=typeof a)throw Error("Unable to map a package conditional to a package conditional.");return a};Bd.normalize_packageOfURL=function(d,h){var n=Object.keys(h.packages||{}).map(function(b){return 0===d.indexOf(b)?{url:b,penalty:d.slice(b.length).length}:
null}).filter(function(b){return!!b});return(h=(n=n.length?n.reduce(function(b,e){return b.penalty>e.penalty?e:b}).url:null)&&h.packages[n])?{systemPackage:h,packageURL:n}:null};Bd.newModule_volatile=function(d,h){var n=Object.freeze;Object.freeze=function(b){return b};d=d(h);Object.freeze=n;return d};Bd.printSystemConfig=NE;Bd.instantiate_triggerOnLoadCallbacks=function(d,h){var n=this;return d(h).then(function(b){var e={};Bd.promise.waitFor(6E4,function(){return n.get(h.name)},e).then(function(m){if(m===
e)console.warn("[lively.modules] instantiate_triggerOnLoadCallbacks for "+h.name+" timed out");else{m=h.name;for(var a=Bd.classHolder.module(n,m),g=n.get("@lively-env").onLoadCallbacks,l=g.length;l--;){var q=g[l],r=q.moduleName,u=q.callback;if((q.resolved?r:n.decanonicalize(r))===m){g.splice(l,1);try{u(a)}catch(v){console.error(v)}}}Bd.emit("lively.modules/moduleloaded",{module:h.name},Date.now(),n)}});return b})};Bd.whenLoaded=OE;Bd.loadedModules=PE;Bd.knownModuleNames=QE;Bd.searchLoadedModules=
iK;Bd.arr=vf;Bd.obj=Pf;Bd.promise=yg;Bd.removeHook=lc;Bd.installHook=hc;Bd.isHookInstalled=Yb;Bd.classHolder=Fu;Bd.isNode=System.get("@system-env").node;Bd.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;Bd.defaultOptions={notificationLimit:null};Bd.wrapModuleResolution=Cv;Bd.wrapModuleResolution=Cv;Bd.unwrapModuleResolution=Vg;Bd.unwrapModuleResolution=Vg;Bd.wrapModuleLoad=Qi;Bd.wrapResource=Rl;Bd.emit=qk;Bd.join=zD;Bd.urlResolve=
Nd;Bd.resource=p;Bd.dotSlashStartRe=/^\.?\//;Bd.trailingSlashRe=/\/$/;Bd.jsExtRe=/\.js$/;Bd.jsxExtRe=/\.jsx$/;Bd.nodeExtRe=/\.node$/;Bd.jsonExtRe=/\.json$/;Bd.jsonJsExtRe=/(.*\.json)\.js$/i;Bd.jsxJsExtRe=/(.*\.jsx)\.js$/i;Bd.doubleSlashRe=/.\/{2,}/g;Bd.nodeModRe=/@node.*/;Bd.whenLoaded=OE;Bd.whenLoaded=OE;Bd.getSystem=Sl;Bd.getSystem=Sl;Bd.removeSystem=Kq;Bd.removeSystem=Kq;Bd.prepareSystem=ME;Bd.prepareSystem=ME;Bd.printSystemConfig=NE;Bd.printSystemConfig=NE;Bd.livelySystemEnv=dl;Bd.livelySystemEnv=
dl;Bd.loadedModules=PE;Bd.loadedModules=PE;Bd.knownModuleNames=QE;Bd.knownModuleNames=QE;Bd.searchLoadedModules=iK;Bd.searchLoadedModules=iK;var a2,tz="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Nk=a2={};try{var Dv="function"==typeof setTimeout?setTimeout:jK}catch(d){Dv=jK}try{var Ev="function"==typeof clearTimeout?clearTimeout:kK}catch(d){Ev=kK}!0;var mx,du=[],uz=!1,RE=-1;Nk.nextTick=function(d){var h=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<
arguments.length;n++)h[n-1]=arguments[n];du.push(new uS(d,h));1!==du.length||uz||sS(tS)};uS.prototype.run=function(){(this||tz).fun.apply(null,(this||tz).array)};Nk.title="browser";Nk.browser=!0;Nk.env={};Nk.argv=[];Nk.version="";Nk.versions={};Nk.on=eu;Nk.addListener=eu;Nk.once=eu;Nk.off=eu;Nk.removeListener=eu;Nk.removeAllListeners=eu;Nk.emit=eu;Nk.prependListener=eu;Nk.prependOnceListener=eu;Nk.listeners=function(d){return[]};Nk.binding=function(d){throw Error("process.binding is not supported");
};Nk.cwd=function(){return"/"};Nk.chdir=function(d){throw Error("process.chdir is not supported");};Nk.umask=function(){return 0};var zi=a2,wS={},vS=!1,yS={},xS=!1,os={},zS=!1,BS={},AS=!1,DS={},CS=!1,pf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,FS={},ES=!1,HS={},GS=!1,JS={},IS=!1,LS={},KS=!1,NS={},MS=!1,PS={},OS=!1,RS={},QS=!1,TS={},SS=!1,WS={},VS=!1,YS={},XS=!1,aT={},$S=!1,cT={},bT=!1,eT={},dT=!1,qK={},fT=!1,ik="undefined"!==typeof globalThis?globalThis:"undefined"!==
typeof self?self:global,rK={},gT=!1,ei="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,iT={},hT=!1,kT={},jT=!1,mT={},lT=!1,oT={},nT=!1,qT={},pT=!1,sT={},rT=!1,uT={},tT=!1,wT={},vT=!1,yT={},xT=!1,AT={},zT=!1,CT={},BT=!1,ET={},DT=!1,GT={},FT=!1,IT={},HT=!1,KT={},JT=!1,MT={},LT=!1,OT={},NT=!1,QT={},PT=!1,ST={},RT=!1,UT={},TT=!1,WT={},VT=!1,YT={},XT=!1,b2={},c2=!1,kI=function(){if(c2)return b2;c2=!0;var d=vz();return b2={re:d.re,src:d.src,tokens:d.t,SEMVER_SPEC_VERSION:SE().SEMVER_SPEC_VERSION,
SemVer:mn(),compareIdentifiers:lK().compareIdentifiers,rcompareIdentifiers:lK().rcompareIdentifiers,parse:wz(),valid:c6(),clean:h6(),inc:d6(),diff:i6(),major:e6(),minor:j6(),patch:k6(),prerelease:l6(),compare:Lq(),rcompare:m6(),compareLoose:n6(),compareBuild:sK(),sort:o6(),rsort:p6(),gt:UE(),lt:oK(),eq:nK(),neq:US(),gte:mK(),lte:pK(),cmp:ZS(),coerce:f6(),Comparator:VE(),Range:Mq(),satisfies:WE(),toComparators:q6(),maxSatisfying:r6(),minSatisfying:s6(),minVersion:t6(),validRange:g6(),outside:tK(),
gtr:u6(),ltr:v6(),intersects:w6(),simplifyRange:x6(),subset:y6()}}(),rg=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package-registry.js");rg.isAbsolute=function(d){return d.startsWith("/")||d.startsWith("http:")||d.startsWith("https:")||d.startsWith("file:")||d.match(rg.urlStartRe)};rg.ensureResource=function(d){return d.isResource?d:rg.resource(d)};rg.semver=kI;rg.arr=vf;rg.obj=Pf;rg.promise=yg;rg.getPackage=de;rg.Package=wi;rg.resource=p;rg.isURL=me;rg.classHolder=Fu;rg.urlStartRe=
/^[a-z\.-_\+]+:/i;var ai=function(d,h){h=void 0===h?{}:h;this.System=d;this.packageBaseDirs=h.packageBaseDirs||[];this.devPackageDirs=h.devPackageDirs||[];this.individualPackageDirs=h.individualPackageDirs||[];this._readyPromise=null;this.packageMap={};this._byURL=null};ai.ofSystem=function(d){var h=d.get("@lively-env").packageRegistry;h||(h=d["__lively.modules__packageRegistry"]=new this(d));return h};ai.forDirectory=function(d,h){return new this(d,{packageBaseDirs:[rg.ensureResource(h)]})};ai.fromJSON=
function(d,h){return(new this(d)).fromJSON(h)};ai.prototype.resetByURL=function(){this._byURL=null};ai.prototype.allPackageURLs=function(){return Object.keys(this.byURL)};ai.prototype.toJSON=function(){function d(r){r=r.url;return r.startsWith(h.baseURL)?r.slice(h.baseURL.length).replace(/^\//,""):r}var h=this.System,n=this.packageMap,b=this.individualPackageDirs,e=this.devPackageDirs,m=this.packageBaseDirs,a={},g;for(g in n){var l=n[g];a[g]={};a[g].latest=l.latest;a[g].versions={};for(var q in l.versions)a[g].versions[q]=
l.versions[q].toJSON()}return{packageMap:a,individualPackageDirs:b.map(d),devPackageDirs:e.map(d),packageBaseDirs:m.map(d)}};ai.prototype.fromJSON=function(d){function h(r){return rg.isURL(r)?rg.resource(r):rg.resource(b.baseURL).join(r)}var n={},b=this.System,e=rg.resource(b.baseURL),m;for(m in d.packageMap){var a=d.packageMap[m];n[m]={};n[m].latest=a.latest;n[m].versions={};for(var g in a.versions){var l=a.versions[g],q=l.url;rg.isAbsolute(q)||(q=e.join(q).url);l=rg.Package.fromJSON(b,Object.assign({},
l,{url:q}));n[m].versions[g]=l}}this.packageMap=n;this.individualPackageDirs=d.individualPackageDirs.map(h);this.devPackageDirs=d.devPackageDirs.map(h);this.packageBaseDirs=d.packageBaseDirs.map(h);this.resetByURL();rg.classHolder.ModulePackageMapping.forSystem(b).clearCache();return this};ai.prototype.updateFromJSON=function(d){var h=this.packageMap,n;for(n in d.packageMap){var b=d.packageMap[n];h[n]||(h[n]={});h[n].latest?rg.semver.gt(b.latest,h[n].latest)&&(h[n].latest=b.latest):h[n].latest;h[n].versions||
(h[n].versions={});var e=this.System,m=rg.resource(e.baseURL),a;for(a in b.versions){var g=b.versions[a],l=g.url;rg.isAbsolute(l)||(l=m.join(l).url);g=new rg.Package.fromJSON(e,Object.assign({},g,{url:l}));h[n].versions[a]=g}}this.resetByURL();rg.classHolder.ModulePackageMapping.forSystem(System).clearCache();return this};ai.prototype.whenReady=function(){return this._readyPromise||Promise.resolve()};ai.prototype.isReady=function(){return!this._readyPromise};ai.prototype.withPackagesDo=function(d){for(var h in this.packageMap){var n=
this.packageMap[h].versions,b;for(b in n)d(n[b])}};ai.prototype.findPackage=function(d){for(var h in this.packageMap){var n=this.packageMap[h].versions,b;for(b in n){var e=n[b];if(d(e))return e}}return null};ai.prototype.filterPackages=function(d){var h=[];this.withPackagesDo(function(n){return d(n)&&h.push(n)});return h};ai.prototype.allPackages=function(){var d=[],h;for(h in this.packageMap){var n=this.packageMap[h].versions,b;for(b in n)d.push(n[b])}return d};ai.prototype.sortPackagesByVersion=
function(d){return d.sort(function(h,n){return rg.semver.compare(h.version,n.version,!0)})};ai.prototype.matches=function(d,h,n){var b=d.version;return d.name!==h?!1:!n||rg.semver.validRange(b||"",!0)&&rg.semver.satisfies(b,n,!0)?!0:!1};ai.prototype.coversDirectory=function(d){d=rg.ensureResource(d).asDirectory();var h=this.packageBaseDirs,n=this.devPackageDirs;if(this.individualPackageDirs.some(function(e){return e.equals(d)}))return"individualPackageDirs";if(n.some(function(e){return e.equals(d)}))return"devPackageDirs";
var b=d.parent().parent();return h.some(function(e){return e.equals(b)})?this.allPackages().find(function(e){return rg.ensureResource(e.url).equals(d)})?"packageCollectionDirs":"maybe packageCollectionDirs":null};ai.prototype.lookup=function(d,h){var n=this,b=this.packageMap[d];if(!b)return null;if(!h||"latest"===h)return b.versions[b.latest];if(!rg.semver.validRange(h,!0))throw Error("PackageRegistry>>lookup of "+d+": Invalid version - "+h);b=rg.obj.values(b.versions).filter(function(e){return n.matches(e,
d,h)});return 1>=b.length?b[0]:rg.arr.last(this.sortPackagesByVersion(b))};ai.prototype.findPackageDependency=function(d,h,n){n||(n=d.dependencies[h]||d.devDependencies[h]);rg.semver.validRange(n,!0)||(n=null);return this.lookup(h,n)};ai.prototype.findPackageWithURL=function(d){d.isResource&&(d=d.url);d.endsWith("/")&&(d=d.slice(0,-1));return this.byURL[d]};ai.prototype.findPackageHavingURL=function(d){d.isResource&&(d=d.url);d.endsWith("/")&&(d=d.slice(0,-1));var h=Infinity,n=null,b=this.byURL,e;
for(e in b)if(0===d.indexOf(e)){var m=d.slice(e.length).length;m>=h||(h=m,n=b[e])}return n};ai.prototype.findPackageForPath=function(d,h){if(rg.isAbsolute(d))return this.findPackageHavingURL(d);if(d.startsWith("."))return null;d=$jscomp.makeIterator(d.split("/")).next().value;if(!d)return null;var n=d.indexOf("@");if(-1<n){var b=d.slice(n+1);d=d.slice(0,n)}return!b&&h?this.findPackageDependency(h,d):this.lookup(d,b)};ai.prototype.resolvePath=function(d,h){if(rg.isAbsolute(d))return d;var n=h&&h.isPackage||
null;if(!n&&h){if(d.startsWith("."))return h=rg.resource(h),h.isDirectory()||(h=h.parent()),h.join(d).withRelativePartsResolved().url;n=this.findPackageHavingURL(h)}h=this.findPackageForPath(d,n);if(!h)return null;n=d.indexOf("/");return(d=-1===n||n===d.length-1?"":d.slice(n))?rg.resource(h.url).join(d).url:h.url};ai.prototype.update=function(){var d=this,h,n,b,e,m,a,g,l,q,r,u,v,y,z,A,B,G,E,K,J,P,ea,ra,D,O;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:if(!d.isReady())return L.return(d.whenReady().then(function(){return d.update()}));
h=rg.promise.deferred();d._readyPromise=h.promise;d.packageBaseDirs=d.packageBaseDirs.map(function(N){return N.asDirectory()});d.individualPackageDirs=d.individualPackageDirs.map(function(N){return N.asDirectory()});d.devPackageDirs=d.devPackageDirs.map(function(N){return N.asDirectory()});n={};L.setCatchFinallyBlocks(2,3);b=$jscomp.makeIterator(d.packageBaseDirs);e=b.next();case 5:if(e.done){L.jumpTo(7);break}m=e.value;a=$jscomp;g=a.makeIterator;return L.yield(m.dirList(1),8);case 8:l=g.call(a,L.yieldResult),
q=l.next();case 9:if(q.done){e=b.next();L.jumpTo(5);break}r=q.value;u=$jscomp;v=u.makeIterator;return L.yield(r.dirList(1),12);case 12:y=v.call(u,L.yieldResult.filter(function(N){return N.isDirectory()})),z=y.next();case 13:if(z.done){q=l.next();L.jumpTo(9);break}A=z.value;return L.yield(d._discoverPackagesIn(A,n,"packageCollectionDirs"),16);case 16:n=L.yieldResult;z=y.next();L.jumpTo(13);break;case 7:B=$jscomp.makeIterator(d.individualPackageDirs),e=B.next();case 17:if(e.done){L.jumpTo(19);break}G=
e.value;return L.yield(d._discoverPackagesIn(G,n,"individualPackageDirs"),20);case 20:n=L.yieldResult;e=B.next();L.jumpTo(17);break;case 19:E=$jscomp.makeIterator(d.devPackageDirs),e=E.next();case 21:if(e.done){L.jumpTo(23);break}K=e.value;return L.yield(d._discoverPackagesIn(K,n,"devPackageDirs"),24);case 24:n=L.yieldResult;e=E.next();L.jumpTo(21);break;case 23:for(J in n)P=n[J],ea=P.pkg,ra=P.config,D=P.covered,d.System.debug&&console.log("[PackageRegistry] Adding discovered package "+J+" (from "+
D+")"),d._addPackageWithConfig(ea,ra,J+"/",D);d._updateLatestPackages();h.resolve();case 3:L.enterFinallyBlock();d._readyPromise=null;d.resetByURL();rg.classHolder.ModulePackageMapping.forSystem(d.System).clearCache();L.leaveFinallyBlock(4);break;case 2:O=L.enterCatchBlock();h.reject(O);L.jumpTo(3);break;case 4:return L.return(d)}})};ai.prototype.addPackageAt=function(d,h,n){h=void 0===h?"individualPackageDirs":h;var b=this,e,m,a,g,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==
u.nextAddress){e=d.isResource?d.url:d;e.endsWith("/")&&e.slice(0,-1);if(b.byURL[e])throw Error("package in "+e+" already added to registry");return u.yield(b._discoverPackagesIn(rg.ensureResource(d).asDirectory(),{},void 0,n),2)}m=u.yieldResult;for(a in m)b.byURL[a]||(g=m[a],l=g.pkg,q=g.config,r=b._addPackageDir(a,h,!0),b._addPackageWithConfig(l,q,a+"/",r));b.resetByURL();rg.classHolder.ModulePackageMapping.forSystem(b.System).clearCache();b._updateLatestPackages();return u.return(b.findPackageWithURL(d))})};
ai.prototype.removePackage=function(d,h){h=void 0===h?!0:h;var n=d.name,b=d.version,e=rg.ensureResource(d.url),m=this.coversDirectory(e);"devPackageDirs"===m?this.devPackageDirs=this.devPackageDirs.filter(function(a){return!a.equals(e)}):"individualPackageDirs"===m&&(this.individualPackageDirs=this.individualPackageDirs.filter(function(a){return!a.equals(e)}));m=this.packageMap;m[n]&&(delete m[n].versions[b],0===Object.keys(m[n].versions).length&&delete m[n]);this.resetByURL();rg.classHolder.ModulePackageMapping.forSystem(this.System).clearCache();
h&&this._updateLatestPackages(d.name)};ai.prototype.updateNameAndVersionOf=function(d,h,n,b,e){var m=this.packageMap;m[h]?m[h].versions[n]||console.warn("[PackageRegistry>>updateNameAndVersionOf] No version entry "+n+" of "+h+" found in registry ("+d.url+")"):console.warn("[PackageRegistry>>updateNameAndVersionOf] "+h+"@"+n+" not found in registry ("+d.url+")");this._addToPackageMap(d,b,e);m[h]&&m[h].versions[n]&&(delete m[h].versions[n],0===Object.keys(m[h].versions).length&&delete m[h]);this._updateLatestPackages(d.name)};
ai.prototype._updateLatestPackages=function(d){var h=this.packageMap;if(d&&h[d])h[d].latest=rg.arr.last(rg.semver.sort(Object.keys(h[d].versions),!0));else for(var n in h)h[n].latest=rg.arr.last(rg.semver.sort(Object.keys(h[n].versions),!0))};ai.prototype._discoverPackagesIn=function(d,h,n,b){b=void 0===b?null:b;var e=this,m,a,g,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress){if(!d.isDirectory())return u.return(h);m=d.asFile().url;if(h.hasOwnProperty(m))return u.return(h);
u.setCatchFinallyBlocks(2);a=b&&b[m]||new rg.Package(e.System,m);return u.yield(a.tryToLoadPackageConfig(),4)}if(2!=u.nextAddress)return g=u.yieldResult,a.setConfig(g),h[m]={pkg:a,config:g,covered:n},e.System.debug&&(l=g,q=l.name,r=l.version,console.log("[lively.modules] package "+q+"@"+r+" discovered in "+d.url)),u.return(h);u.enterCatchBlock();return u.return(h)})};ai.prototype._addToPackageMap=function(d,h,n,b){if(!h)throw Error("Cannot add package without name");n||(n="0.0.0");var e=this.packageMap;
h=e[h]||(e[h]={versions:{},latest:null});if(h.versions[n])if(e="Redefining version "+n+" of package "+d.url,void 0===b||b)console.warn(e);else throw Error(e+" not allowed");h.versions[n]=d};ai.prototype._addPackageWithConfig=function(d,h,n,b){(void 0===b?0:b)||this._addPackageDir(n,"individualPackageDirs",!0);d.registerWithConfig(h);this._addToPackageMap(d,d.name,d.version);return d};ai.prototype._addPackageDir=function(d,h,n){h=void 0===h?"individualPackageDirs":h;n=void 0===n?!0:n;d=rg.ensureResource(d).asDirectory();
if(("packageCollectionDirs"===h||"maybe packageCollectionDirs"===h)&&(this.coversDirectory(d)||"").includes("packageCollectionDirs"))return"packageCollectionDirs";d=this[h].concat(d);this[h]=n?rg.arr.uniqBy(d,function(b,e){return b.equals(e)}):d;return h};$jscomp.global.Object.defineProperties(ai.prototype,{byURL:{configurable:!0,enumerable:!0,get:function(){if(!this._byURL){this._byURL={};for(var d=$jscomp.makeIterator(this.allPackages()),h=d.next();!h.done;h=d.next())h=h.value,this._byURL[h.url]=
h}return this._byURL}}});rg.PackageRegistry=ai;var gm=lively.FreezerRuntime.recorderFor("lively.modules/src/export-lookup.js");gm.arr=vf;gm.obj=Pf;gm.subscribe=Fq;gm.unsubscribe=wp;gm.module=ih;var ym=function(d){this.System=d;this.subscribeToSystemChanges()};ym.forSystem=function(d){this._forSystemMap||(this._forSystemMap=new WeakMap);var h=this._forSystemMap.get(d);if(h)return h;h=new this(d);this._forSystemMap.set(d,h);return h};ym.run=function(d,h){d=void 0===d?System:d;return this.forSystem(d).systemExports(h)};
ym.findExportOfValue=function(d,h){h=void 0===h?System:h;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(n.run(h),2);b=e.yieldResult;return e.return(b.find(function(m){var a=m.local;m=gm.module(h,m.moduleId);m=m.recorder||h.get(m.id)||{};try{return m[a]===d}catch(g){return!1}}))})};ym.prototype.subscribeToSystemChanges=function(){var d=this;if(!this._notificationHandlers){var h=this.System;this._notificationHandlers=[gm.subscribe("lively.modules/moduleloaded",
function(n){return d.clearCacheFor(n.module)},h),gm.subscribe("lively.modules/modulechanged",function(n){return d.clearCacheFor(n.module)},h),gm.subscribe("lively.vm/doitresult",function(n){return d.clearCacheFor(n.targetModule)},h)]}};ym.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var d=this.System;gm.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],d);gm.unsubscribe("lively.modules/modulechanged",this._notificationHandlers[1],d);gm.unsubscribe("lively.vm/doitresult",
this._notificationHandlers[2],d);this._notificationHandlers=null}};ym.prototype.clearCacheFor=function(d){this.exportByModuleCache[d]=null};ym.prototype.systemExports=function(d){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(h.rawExportsByModule(d),2);n=b.yieldResult;Object.keys(n).forEach(function(e){return h.resolveExportsOfModule(e,n)});return b.return(gm.arr.flatmap(Object.keys(n),function(e){return n[e].resolvedExports||n[e].rawExports}))})};
ym.prototype.rawExportsByModule=function(d){var h=this,n,b,e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==g.nextAddress?(d=d||{},n=h.System,b=n.get("@lively-env")||{},e=Object.keys(b.loadedModules||{}),m={},a=function(l){1>l%50&&d.progress.step&&d.progress.step("Scanning ...",l/e.length)},g.yield(Promise.all(e.map(function(l,q){d.progress&&a(q);return h.rawExportsOfModule(l,d,m).then(function(r){return r?m[l]=r:null})})),2)):g.return(m)})};ym.prototype.rawExportsOfModule=
function(d,h){h=void 0===h?{}:h;var n=this,b,e,m,a,g,l,q,r,u,v,y,z,A,B,G,E,K,J,P,ea,ra,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(O){switch(O.nextAddress){case 1:b=n;e=b.System;m=b.exportByModuleCache;a=h.excludedPackages||[];g=h.excludedURLs||(h.excludedURLs=a.filter(function(L){return"string"===typeof L}));l=h.excludeFns||(h.excludeFns=a.filter(function(L){return"function"===typeof L}));q=h.excludedPackageURLs||(h.excludedPackageURLs=g.concat(g.map(function(L){return e.decanonicalize(L.replace(/\/?$/,
"/")).replace(/\/$/,"")})));r=h.livelyEnv||(h.livelyEnv=e.get("@lively-env")||{});h.modes||(h.modes=Object.keys(r.loadedModules||{}));if(m[d])return u=m[d].rawExports,O.return(q.includes(u.packageURL)||l.some(function(L){return L(u.packageURL)})?null:m[d]);v=gm.module(e,d);y=v.pathInPackage();A=(z=v.package())&&z.main&&y===z.main;B=z?z.url:"";G=z?z.name:"";E=z?z.version:"";K={moduleId:d,isMain:A,pathInPackage:y,packageName:G,packageURL:B,packageVersion:E,exports:[]};if(q.includes(B)||l.some(function(L){return L(B)}))return O.return(null);
O.setCatchFinallyBlocks(2);J=v.format();return["register","es6","esm"].includes(J)?(ra=K,O.yield(v.exports(),7)):O.yield(v.load(),6);case 6:P=O.yieldResult;K.exports=[];for(ea in P)"__useDefault"!==ea&&"default"!==ea&&K.exports.push({exported:ea,local:ea,type:"id"});O.jumpTo(5);break;case 7:ra.exports=O.yieldResult;case 5:O.leaveTryBlock(3);break;case 2:D=O.enterCatchBlock(),K.error=D;case 3:return O.return(m[d]={rawExports:K})}})};ym.prototype.resolveExportsOfModule=function(d,h,n){var b=this;n=
void 0===n?{}:n;if(!n[d]){n[d]=!0;var e=h[d];if(e&&!e.resolvedExports){var m=this.System,a=gm.obj.select(e.rawExports,"moduleId isMain packageName packageURL packageVersion pathInPackage".split(" "));e.resolvedExports=gm.arr.flatmap(e.rawExports.exports,function(g){var l=g.type,q=g.exported,r=g.local,u=g.fromModule;if("all"!==l)return[Object.assign({},a,{type:l,exported:q,local:r,fromModule:u})];g=m.decanonicalize(u,d);b.resolveExportsOfModule(g,h,n);return(h[g].resolvedExports||[]).map(function(v){return Object.assign({},
a,{type:v.type,exported:v.exported,local:v.local,fromModule:v.fromModule||u})})});n[d]=!1}}};$jscomp.global.Object.defineProperties(ym.prototype,{exportByModuleCache:{configurable:!0,enumerable:!0,get:function(){return this._exportByModuleCache||(this._exportByModuleCache={})}}});sa("bG",ym);gm.ExportLookup=ym;gm.default=ym;var ul=lively.FreezerRuntime.recorderFor("lively.modules/cjs/dependencies.js");ul.buildPackageMap=IB;ul.resolvePackageDependencies=XE;ul.dependencyGraph=YE;ul.arr=vf;ul.fun=nl;
ul.promise=yg;ul.obj=Pf;ul.resource=p;ul.buildPackageMap=IB;ul.buildPackageMap=IB;ul.resolvePackageDependencies=XE;ul.resolvePackageDependencies=XE;ul.dependencyGraph=YE;ul.dependencyGraph=YE;var lI=Object.freeze({__proto__:null,buildPackageMap:IB,resolvePackageDependencies:XE,dependencyGraph:YE}),hm=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/module-package-mapping.js");hm.arr=vf;hm.unsubscribe=wp;hm.subscribe=Fq;hm.knownModuleNames=QE;hm.classHolder=Fu;var gq=function(d){this.System=
d;this._notificationHandlers=null;this.clearCache();this.subscribeToSystemChanges()};gq.forSystem=function(d){var h=d["__lively.modules__modulePackageMapCache"];if(h)return h;h=new this(d);return d["__lively.modules__modulePackageMapCache"]=h};gq.prototype.subscribeToSystemChanges=function(){var d=this;if(!this._notificationHandlers){var h=this.System;this._notificationHandlers=[hm.subscribe("lively.modules/moduleloaded",function(n){return d.addModuleIdToCache(n.module)},h),hm.subscribe("lively.modules/moduleunloaded",
function(n){return d.removeModuleFromCache(n.module)},h),hm.subscribe("lively.modules/packageregistered",function(n){return d.clearCache()},h),hm.subscribe("lively.modules/packageremoved",function(n){return d.clearCache()},h)]}};gq.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var d=this.System;hm.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],d);hm.unsubscribe("lively.modules/moduleunloaded",this._notificationHandlers[1],d);hm.unsubscribe("lively.modules/packageregistered",
this._notificationHandlers[2],d);hm.unsubscribe("lively.modules/packageremoved",this._notificationHandlers[3],d);this._notificationHandlers=null}};gq.prototype.clearCache=function(){this._cacheInitialized=!1;this.packageToModule={};this.modulesToPackage={};this.modulesWithoutPackage={}};gq.prototype.ensureCache=function(){var d=this.System,h=this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(this._cacheInitialized)return this;for(var e=hm.classHolder.Package.allPackageURLs(d),
m=0;m<e.length;m++)h[e[m]]=[];d=hm.knownModuleNames(d);for(m=0;m<d.length;m++){for(var a=d[m],g=void 0,l=0;l<e.length;l++){var q=e[l];a.startsWith(q)&&(!g||g.length<q.length)&&(g=q)}g?(h[g].push(a),n[a]=g):b[a]={}}this._cacheInitialized=!0;return this};gq.prototype.addModuleIdToCache=function(d){this.ensureCache();var h=this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(n[d])return n[d];if(b[d])return null;for(var e=Object.keys(h),m,a=0;a<e.length;a++){var g=e[a];d.startsWith(g)&&
(!m||m.length<g.length)&&(m=g)}if(m)return(h[m]||(h[m]=[])).push(d),n[d]=m;b[d]={};return null};gq.prototype.removeModuleFromCache=function(d){if(this._cacheInitialized){var h=this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(b.hasOwnProperty(d))delete b[d];else if(b=n[d])delete n[d],h[b]&&hm.arr.remove(h[b],d)}};gq.prototype.getPackageURLForModuleId=function(d){return this.modulesToPackage[d]||this.addModuleIdToCache(d)};gq.prototype.getModuleIdsForPackageURL=function(d){this.ensureCache();
return this.packageToModule[d]||[]};hm.ModulePackageMapping=gq;hm.default=gq;var Sc=lively.FreezerRuntime.recorderFor("lively.modules/index.js");Sc.changeSystem=ZE;Sc.wrapModuleResolution=$E;Sc.unwrapModuleResolution=aF;Sc.loadedModules=bF;Sc.module=JB;Sc.isModuleLoaded=cF;Sc.doesModuleExist=dF;Sc.printSystemConfig=eF;Sc.whenLoaded=fF;Sc.importPackage=gF;Sc.registerPackage=hF;Sc.removePackage=iF;Sc.reloadPackage=jF;Sc.getPackages=kF;Sc.getPackage=lF;Sc.getPackageOfModule=mF;Sc.ensurePackage=nF;Sc.applyPackageConfig=
oF;Sc.lookupPackage=pF;Sc.moduleSourceChange=qF;Sc.requireMap=rF;Sc.isHookInstalled=sF;Sc.installHook=tF;Sc.removeHook=uF;Sc.wrapModuleLoad=vF;Sc.unwrapModuleLoad=wF;Sc.getSystem=Sl;Sc.removeSystem=Kq;Sc.prepareSystem=ME;Sc._printSystemConfig=NE;Sc._unwrapModuleResolution=Vg;Sc._wrapModuleResolution=Cv;Sc._whenLoaded=OE;Sc._module=ih;Sc._doesModuleExist=Mm;Sc._isModuleLoaded=Bo;Sc.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;Sc.defaultSystem=
Sc.defaultSystem||Sc.prepareSystem(Sc.GLOBAL.System);var SO=Sc.defaultSystem;Sc.System=SO;Sc.defaultSystem=SO;Sc.getSystem=Sl;Sc.getSystem=Sl;Sc.removeSystem=Kq;Sc.removeSystem=Kq;Sc.loadedModules=bF;Sc.loadedModules=bF;Sc.printSystemConfig=eF;Sc.printSystemConfig=eF;Sc.whenLoaded=fF;Sc.whenLoaded=fF;Sc.changeSystem=ZE;Sc.changeSystem=ZE;Sc.module=JB;Sc.module=JB;Sc.doesModuleExist=dF;Sc.doesModuleExist=dF;Sc.isModuleLoaded=cF;Sc.isModuleLoaded=cF;Sc.unwrapModuleResolution=aF;Sc.unwrapModuleResolution=
aF;Sc.wrapModuleResolution=$E;Sc.wrapModuleResolution=$E;Sc.Package=wi;Sc._getPackage=de;Sc._ensurePackage=ke;Sc.getPackageSpecs=Pi;Sc._applyPackageConfig=Be;Sc._importPackage=ef;Sc._removePackage=Ze;Sc._reloadPackage=wf;Sc._registerPackage=Jg;Sc._lookupPackage=Le;Sc.importPackage=gF;Sc.importPackage=gF;Sc.registerPackage=hF;Sc.registerPackage=hF;Sc.removePackage=iF;Sc.removePackage=iF;Sc.reloadPackage=jF;Sc.reloadPackage=jF;Sc.getPackages=kF;Sc.getPackages=kF;Sc.getPackage=lF;Sc.getPackage=lF;Sc.getPackageOfModule=
mF;Sc.getPackageOfModule=mF;Sc.ensurePackage=nF;Sc.ensurePackage=nF;Sc.applyPackageConfig=oF;Sc.applyPackageConfig=oF;Sc.lookupPackage=pF;Sc.lookupPackage=pF;Sc.PackageRegistry=ai;Sc.PackageRegistry=ai;Sc.PackageRegistry=ai;Sc._moduleSourceChange=ed;Sc.moduleSourceChange=qF;Sc.moduleSourceChange=qF;Sc.computeRequireMap=Uc;Sc.requireMap=rF;Sc.requireMap=rF;Sc._isHookInstalled=Yb;Sc._installHook=hc;Sc._removeHook=lc;Sc.isHookInstalled=sF;Sc.isHookInstalled=sF;Sc.installHook=tF;Sc.installHook=tF;Sc.removeHook=
uF;Sc.removeHook=uF;Sc._wrapModuleLoad=Qi;Sc._unwrapModuleLoad=Gi;Sc.wrapModuleLoad=vF;Sc.wrapModuleLoad=vF;Sc.unwrapModuleLoad=wF;Sc.unwrapModuleLoad=wF;Sc.default=ym;Sc.ExportLookup=ym;Sc.cjs=lI;Sc.cjs=lI;Sc.cjs=lI;Sc.default=kI;Sc.semver=kI;Sc.ImportInjector=kr;Sc.scripting=Sc.defaultSystem._scripting={module:Sc._module,ensurePackage:Sc._ensurePackage,registerPackage:Sc._registerPackage,importPackage:Sc._importPackage,lookupPackage:Sc._lookupPackage,ImportInjector:kr};Sc.defaultClassToFunctionConverterName=
"initializeES6ClassForLively";Sc.classRuntime=BA;Sc.defaultSystem.global[Sc.defaultClassToFunctionConverterName]=Sc.classRuntime.initializeClass;Sc.classHolder=Fu;Sc.ModulePackageMapping=gq;Sc.classHolder.ModulePackageMapping=Sc.ModulePackageMapping;Sc.classHolder.Package=Sc.Package;Sc.classHolder.PackageRegistry=Sc.PackageRegistry;var TO=sa("bF",Sc.scripting);Sc.scripting=TO;Sc.scripting=TO;var mI=Object.freeze({__proto__:null,System:SO,getSystem:Sl,removeSystem:Kq,loadedModules:bF,printSystemConfig:eF,
whenLoaded:fF,changeSystem:ZE,module:JB,doesModuleExist:dF,isModuleLoaded:cF,unwrapModuleResolution:aF,wrapModuleResolution:$E,importPackage:gF,registerPackage:hF,removePackage:iF,reloadPackage:jF,getPackages:kF,getPackage:lF,getPackageOfModule:mF,ensurePackage:nF,applyPackageConfig:oF,lookupPackage:pF,PackageRegistry:ai,moduleSourceChange:qF,requireMap:rF,isHookInstalled:sF,installHook:tF,removeHook:uF,wrapModuleLoad:vF,unwrapModuleLoad:wF,ExportLookup:ym,cjs:lI,semver:kI,scripting:TO});sa("T",mI);
var Gl=lively.FreezerRuntime.recorderFor("lively.morphic/object-migration.js");Gl.isReference=uK;Gl.removeUnreachableObjects=Ap;Gl.obj=Pf;Gl.Path=nh;Gl.connect=fk;Gl.disconnectAll=ov;Gl.isReference=uK;Gl.isReference=uK;var xz=[{date:"2017-04-08",name:"Text and Label textAndAttributes format change",description:"\nChanging the format from\n  [[string1, attr1_1, attr1_2], [string2, attr2_1, attr2_2], ...]\nto\n  [string1, attr1, string2, attr2, ...].\n    ",snapshotConverter:function(d){var h=d.snapshot,
n;for(n in h){var b=h[n],e=b.props&&b.props.textAndAttributes;if(e){var m=e.value;if(!Array.isArray(m))console.warn("object migrator found textAndAttributes field but it is not an Array!");else if(m.length&&"string"!==typeof m[0]){m=[].concat.apply([],m);for(var a=0;a<m.length;a+=2){var g=m[a+1];g&&Array.isArray(g)&&(m[a+1]=Object.assign.apply(Object,[{}].concat($jscomp.arrayFromIterable(g))))}b.props.textAndAttributes=Object.assign({},e,{value:m})}}}return d}},{date:"2017-04-29",name:"Window button fix",
description:'\nA recent change in the structure of windows, that now adds a "button wrapper"\nmorph breaks old windows without it.\n',objectConverter:function(d,h){(h=h.refForId(d.id).realObj)&&h.isMorph&&h.withAllSubmorphsDo(function(n){n.isWindow&&(n.submorphs.some(function(b){return"button wrapper"===b.name})&&n.get("button wrapper").submorphs.some(function(b){return"window menu button"===b.name})||n.fixControls(),n.minimizedBounds=null,Gl.disconnectAll(n.get("minimize")),Gl.connect(n.get("minimize"),
"onMouseDown",n,"minimized",{updater:function(b){b(!this.targetObj.minimized)}}))});return d}},{date:"2017-05-03",name:"Style Sheet Status Fix",description:"\nState management of the style sheets has changes substantially, moving all of the style sheets that are being applied to the world.\n",snapshotConverter:function(d){var h=d.id,n=d.snapshot,b;for(b in n){var e=n[b].props;e&&e.styleSheets&&(e.styleSheets.value||(e.styleSheets.value=[]),e.styleSheets.value=e.styleSheets.value&&e.styleSheets.value.filter(function(m){m=
n[m.id];var a=n[m.props.rules.value.id];return!m.props.styledMorphs&&!("lively.serializer-class-info"in a)}))}Gl.removeUnreachableObjects([h],n);return d}},{date:"2017-05-22",name:"Removal of ChromeTheme and GithubTheme",description:"\nFor now only a simple default theme...\n",snapshotConverter:function(d){var h=d.snapshot,n;for(n in h){var b=h[n],e=b["lively.serializer-class-info"];e&&("ChromeTheme"===e.className||"GithubTheme"===e.className?(e.className="DefaultTheme",e.module.pathInPackage="ide/themes/default.js"):
"JavaScriptTokenizer"===e.className&&delete b["lively.serializer-class-info"])}return d}},{date:"2017-06-20",name:"Unwrapped Style Sheet Props",description:"Style Sheets now store foldable props in their nested format.",objectConverter:function(d,h){(h=h.refForId(d.id).realObj)&&h.isMorph&&h.withAllSubmorphsDo(function(n){n.styleSheets&&0<n.styleSheets.length&&n.styleSheets.forEach(function(b){for(var e in Gl.obj.dissoc(b.rules,["_rev"]))b.rules[e]=b.unwrapFoldedProps(b.rules[e])})});return d}},{date:"2017-07-13",
name:"Renamed style-rules.js to style-sheets.js",snapshotConverter:function(d){var h=d.snapshot,n;for(n in h){var b=h[n]["lively.serializer-class-info"];b&&"StyleSheet"===b.className&&(b.module.pathInPackage="style-sheets.js")}return d}},{date:"2017-07-26",name:"components, ide, and halo extraction",snapshotConverter:function(d){var h=d.snapshot,n=d.packages,b=n&&n["local://lively-object-modules/"]||{};n=[["lively.morphic/halo","lively.halos"],["lively.morphic/components/markers.js","lively.halos"],
["lively.morphic/components/icons.js","lively.morphic"],["lively.morphic/components/loading-indicator.js","lively.components",function(v){return"{"+v+"}"}],["lively.morphic/components","lively.components"],["lively.components/markers.js","lively.halos"],["lively.morphic/ide","lively.ide"],["lively.morphic/text/ui.js","lively.ide",null,"text/ui.js"]];for(var e in b){for(var m=b[e]["index.js"],a=$jscomp.makeIterator(n),g=a.next();!g.done;g=a.next()){var l=$jscomp.makeIterator(g.value),q=l.next().value;
g=l.next().value;if(l=l.next().value){q=new RegExp('(import\\s)(.*)(\\sfrom \\"'+q+")","g");var r=q.exec(m);r&&(m=m.replace(q,"import "+l(r[2])+'from "'+g))}else m=m.replace(new RegExp(q,"g"),g)}b[e]["index.js"]=m}for(var u in h)if((e=h[u]["lively.serializer-class-info"])&&e.module)for(b=e.module.package.name+"/"+e.module.pathInPackage,m=$jscomp.makeIterator(n),a=m.next();!a.done;a=m.next())if(l=$jscomp.makeIterator(a.value),a=l.next().value,g=l.next().value,l.next(),l=l.next().value,b.includes(a)){e.module.package.name=
g;e.module.package.version="0.1.0";e.module.pathInPackage=l||b.substring(b.indexOf(a)+a.length+1)||"index.js";break}return d}},{date:"2017-10-16",name:"change scroll implementation of list items",objectConverter:function(d,h){h=$jscomp.makeIterator(h.objectRefs());for(var n=h.next();!n.done;n=h.next())n=n.value.realObj,n.isList&&"function"===typeof n.initializeSubmorphs&&n.initializeSubmorphs();return d}},{date:"2017-10-30",name:"change implementation of tree",snapshotConverter:function(d){var h=
d.snapshot,n;for(n in h){var b=h[n],e=b["lively.serializer-class-info"];e&&e.module&&("Tree"==e.className&&b.props.submorphs&&(b.props.submorphs.value=[]),"TreeNode"==e.className&&delete h[n],"InspectorTreeData"==e.className&&delete h[n],["PropertyNode","InspectionNode","MorphNode","FoldedNode"].includes(e.className)&&(e.module.pathInPackage="js/inspector/context.js"),"nodeItemContainer"==b.props.name&&delete h[n])}return d}},{date:"2019-02-17",name:"change storage of commit metadata",snapshotConverter:function(d){var h=
d.id,n=d.snapshot;Object.values(n).map(function(b){if(b.props.metadata&&Gl.isReference(b.props.metadata.value)&&(b=n[b.props.metadata.value.id],b.props.commit&&Gl.isReference(b.props.commit.value))){var e=n[b.props.commit.value.id].props;b.props.commit.value='__lv_expr__:({type: "'+e.type.value+'", name: "'+e.name.value+'", _id: "'+e._id.value+'"})'}});Gl.removeUnreachableObjects([h],n);return d}},{date:"2019-07-25",name:"world superclass extraction",snapshotConverter:function(d){var h=d.packages,
n,b=Gl.Path(["local://lively-object-modules/","EmptyWorld","index.js"]);if(n=b.get(h))n=n.replace('import { World, morph } from "lively.morphic";','import { morph } from "lively.morphic";\nimport { LivelyWorld as World } from "lively.ide/world.js"').replace('import { World } from "lively.morphic";','import { LivelyWorld as World } from "lively.ide/world.js"'),b.set(h,n);return d}},{date:"2019-08-05",name:"remove Camphor from system",snapshotConverter:function(d){Object.values(d.snapshot).map(function(h){h.props.fontFamily&&
"Camphor"==h.props.fontFamily.value&&(h.props.fontFamily.value="Nunito")});return d}}];Gl.migrations=xz;Gl.migrations=xz;Gl.migrations=xz;var Je=lively.FreezerRuntime.recorderFor("lively.morphic/serialization.js");Je.normalizeOptions=function(d){d=Object.assign({reinitializeIds:!1},d);d.reinitializeIds&&(d.reinitializeIds="function"===typeof d.reinitializeIds?d.reinitializeIds:function(h,n){return n.realObj.isMorph?Je.newMorphId(n.realObj.constructor):null});return d};Je.serializeMorph=KB;Je.deserializeMorph=
LB;Je.loadWorldFromResource=xF;Je.saveWorldToResource=vK;Je.copyMorph=yF;Je.createMorphSnapshot=nx;Je.loadMorphFromSnapshot=ps;Je.resourceToJSON=ZT;Je.findPackagesInFileSpec=$T;Je.packagesOfSnapshot=wK;Je.loadPackagesAndModulesOfSnapshot=MB;Je.findRequiredPackagesOfSnapshot=zF;Je.requiredModulesOfSnapshot=Jq;Je.deserializeWithMigrations=Mn;Je.serialize=yv;Je.MorphicEnv=Wp;Je.resource=p;Je.newMorphId=Na;Je.morph=wa;Je.pathForBrowserHistory=ba;Je.serializeMorph=KB;Je.serializeMorph=KB;Je.deserializeMorph=
LB;Je.deserializeMorph=LB;Je.loadWorldFromResource=xF;Je.loadWorldFromResource=xF;Je.saveWorldToResource=vK;Je.saveWorldToResource=vK;Je.copyMorph=yF;Je.copyMorph=yF;Je.modules=mI;Je.createFiles=t;Je.promise=yg;Je.graph=Ir;Je.arr=vf;Je.migrations=xz;var HA=Je.modules;Je.registerPackage=HA.registerPackage;Je.module=HA.module;Je.getPackage=HA.getPackage;Je.ensurePackage=HA.ensurePackage;Je.lookupPackage=HA.lookupPackage;Je.semver=HA.semver;Je.objectScriptingEnabled=!1;Je.createMorphSnapshot=nx;Je.createMorphSnapshot=
nx;Je.loadMorphFromSnapshot=ps;Je.loadMorphFromSnapshot=ps;Je.packagesOfSnapshot=wK;Je.packagesOfSnapshot=wK;Je.loadPackagesAndModulesOfSnapshot=MB;Je.loadPackagesAndModulesOfSnapshot=MB;Je.findRequiredPackagesOfSnapshot=zF;Je.findRequiredPackagesOfSnapshot=zF;var Ts="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,sfa={},d2=Ts.MutationObserver||Ts.WebKitMutationObserver;if(d2){var e2=0,tfa=new d2(AF),f2=Ts.document.createTextNode("");tfa.observe(f2,{characterData:!0});
var UO=function(){f2.data=e2=++e2%2}}else if(Ts.setImmediate||"undefined"===typeof Ts.MessageChannel)UO="document"in Ts&&"onreadystatechange"in Ts.document.createElement("script")?function(){var d=Ts.document.createElement("script");d.onreadystatechange=function(){AF();d.onreadystatechange=null;d.parentNode.removeChild(d);d=null};Ts.document.documentElement.appendChild(d)}:function(){setTimeout(AF,0)};else{var g2=new Ts.MessageChannel;g2.port1.onmessage=AF;UO=function(){g2.port2.postMessage(0)}}var xK,
NB=[],ufa=sfa=function(d){1!==NB.push(d)||xK||UO()},VO={},h2="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(h2){var i2=new Uint8Array(16);VO=function(){h2(i2);return i2}}else{var j2=Array(16);VO=function(){for(var d=0,h;16>d;d++)0===(d&3)&&(h=4294967296*Math.random()),j2[d]=h>>>((d&3)<<3)&255;return j2}}for(var k2=VO,vfa={},zm=[],nI=
0;256>nI;++nI)zm[nI]=(nI+256).toString(16).substr(1);var l2=vfa=function(d,h){h=h||0;return[zm[d[h++]],zm[d[h++]],zm[d[h++]],zm[d[h++]],"-",zm[d[h++]],zm[d[h++]],"-",zm[d[h++]],zm[d[h++]],"-",zm[d[h++]],zm[d[h++]],"-",zm[d[h++]],zm[d[h++]],zm[d[h++]],zm[d[h++]],zm[d[h++]],zm[d[h++]]].join("")},wfa={},m2,WO,XO=0,YO=0,xfa=wfa=function(d,h,n){n=h&&n||0;var b=h||[];d=d||{};var e=d.node||m2,m=void 0!==d.clockseq?d.clockseq:WO;if(null==e||null==m){var a=k2();null==e&&(e=m2=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]);
null==m&&(m=WO=(a[6]<<8|a[7])&16383)}a=void 0!==d.msecs?d.msecs:(new Date).getTime();var g=void 0!==d.nsecs?d.nsecs:YO+1,l=a-XO+(g-YO)/1E4;0>l&&void 0===d.clockseq&&(m=m+1&16383);(0>l||a>XO)&&void 0===d.nsecs&&(g=0);if(1E4<=g)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");XO=a;YO=g;WO=m;a+=122192928E5;d=(1E4*(a&268435455)+g)%4294967296;b[n++]=d>>>24&255;b[n++]=d>>>16&255;b[n++]=d>>>8&255;b[n++]=d&255;d=a/4294967296*1E4&268435455;b[n++]=d>>>8&255;b[n++]=d&255;b[n++]=d>>>24&15|16;b[n++]=
d>>>16&255;b[n++]=m>>>8|128;b[n++]=m&255;for(m=0;6>m;++m)b[n+m]=e[m];return h?h:l2(b)},n2={};n2=function(d,h,n){n=h&&n||0;"string"==typeof d&&(h="binary"===d?Array(16):null,d=null);d=d||{};d=d.random||(d.rng||k2)();d[6]=d[6]&15|64;d[8]=d[8]&63|128;if(h)for(var b=0;16>b;++b)h[n+b]=d[b];return h||l2(d)};var yfa={},ZO=n2;ZO.v1=xfa;var zfa=yfa=ZO.v4=ZO,$g="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Afa={},Bfa=Afa=function(d){function h(r,u){var v=r[0],y=r[1],z=r[2],
A=r[3];v+=(y&z|~y&A)+u[0]-680876936|0;v=(v<<7|v>>>25)+y|0;A+=(v&y|~v&z)+u[1]-389564586|0;A=(A<<12|A>>>20)+v|0;z+=(A&v|~A&y)+u[2]+606105819|0;z=(z<<17|z>>>15)+A|0;y+=(z&A|~z&v)+u[3]-1044525330|0;y=(y<<22|y>>>10)+z|0;v+=(y&z|~y&A)+u[4]-176418897|0;v=(v<<7|v>>>25)+y|0;A+=(v&y|~v&z)+u[5]+1200080426|0;A=(A<<12|A>>>20)+v|0;z+=(A&v|~A&y)+u[6]-1473231341|0;z=(z<<17|z>>>15)+A|0;y+=(z&A|~z&v)+u[7]-45705983|0;y=(y<<22|y>>>10)+z|0;v+=(y&z|~y&A)+u[8]+1770035416|0;v=(v<<7|v>>>25)+y|0;A+=(v&y|~v&z)+u[9]-1958414417|
0;A=(A<<12|A>>>20)+v|0;z+=(A&v|~A&y)+u[10]-42063|0;z=(z<<17|z>>>15)+A|0;y+=(z&A|~z&v)+u[11]-1990404162|0;y=(y<<22|y>>>10)+z|0;v+=(y&z|~y&A)+u[12]+1804603682|0;v=(v<<7|v>>>25)+y|0;A+=(v&y|~v&z)+u[13]-40341101|0;A=(A<<12|A>>>20)+v|0;z+=(A&v|~A&y)+u[14]-1502002290|0;z=(z<<17|z>>>15)+A|0;y+=(z&A|~z&v)+u[15]+1236535329|0;y=(y<<22|y>>>10)+z|0;v+=(y&A|z&~A)+u[1]-165796510|0;v=(v<<5|v>>>27)+y|0;A+=(v&z|y&~z)+u[6]-1069501632|0;A=(A<<9|A>>>23)+v|0;z+=(A&y|v&~y)+u[11]+643717713|0;z=(z<<14|z>>>18)+A|0;y+=(z&
v|A&~v)+u[0]-373897302|0;y=(y<<20|y>>>12)+z|0;v+=(y&A|z&~A)+u[5]-701558691|0;v=(v<<5|v>>>27)+y|0;A+=(v&z|y&~z)+u[10]+38016083|0;A=(A<<9|A>>>23)+v|0;z+=(A&y|v&~y)+u[15]-660478335|0;z=(z<<14|z>>>18)+A|0;y+=(z&v|A&~v)+u[4]-405537848|0;y=(y<<20|y>>>12)+z|0;v+=(y&A|z&~A)+u[9]+568446438|0;v=(v<<5|v>>>27)+y|0;A+=(v&z|y&~z)+u[14]-1019803690|0;A=(A<<9|A>>>23)+v|0;z+=(A&y|v&~y)+u[3]-187363961|0;z=(z<<14|z>>>18)+A|0;y+=(z&v|A&~v)+u[8]+1163531501|0;y=(y<<20|y>>>12)+z|0;v+=(y&A|z&~A)+u[13]-1444681467|0;v=(v<<
5|v>>>27)+y|0;A+=(v&z|y&~z)+u[2]-51403784|0;A=(A<<9|A>>>23)+v|0;z+=(A&y|v&~y)+u[7]+1735328473|0;z=(z<<14|z>>>18)+A|0;y+=(z&v|A&~v)+u[12]-1926607734|0;y=(y<<20|y>>>12)+z|0;v+=(y^z^A)+u[5]-378558|0;v=(v<<4|v>>>28)+y|0;A+=(v^y^z)+u[8]-2022574463|0;A=(A<<11|A>>>21)+v|0;z+=(A^v^y)+u[11]+1839030562|0;z=(z<<16|z>>>16)+A|0;y+=(z^A^v)+u[14]-35309556|0;y=(y<<23|y>>>9)+z|0;v+=(y^z^A)+u[1]-1530992060|0;v=(v<<4|v>>>28)+y|0;A+=(v^y^z)+u[4]+1272893353|0;A=(A<<11|A>>>21)+v|0;z+=(A^v^y)+u[7]-155497632|0;z=(z<<16|
z>>>16)+A|0;y+=(z^A^v)+u[10]-1094730640|0;y=(y<<23|y>>>9)+z|0;v+=(y^z^A)+u[13]+681279174|0;v=(v<<4|v>>>28)+y|0;A+=(v^y^z)+u[0]-358537222|0;A=(A<<11|A>>>21)+v|0;z+=(A^v^y)+u[3]-722521979|0;z=(z<<16|z>>>16)+A|0;y+=(z^A^v)+u[6]+76029189|0;y=(y<<23|y>>>9)+z|0;v+=(y^z^A)+u[9]-640364487|0;v=(v<<4|v>>>28)+y|0;A+=(v^y^z)+u[12]-421815835|0;A=(A<<11|A>>>21)+v|0;z+=(A^v^y)+u[15]+530742520|0;z=(z<<16|z>>>16)+A|0;y+=(z^A^v)+u[2]-995338651|0;y=(y<<23|y>>>9)+z|0;v+=(z^(y|~A))+u[0]-198630844|0;v=(v<<6|v>>>26)+y|
0;A+=(y^(v|~z))+u[7]+1126891415|0;A=(A<<10|A>>>22)+v|0;z+=(v^(A|~y))+u[14]-1416354905|0;z=(z<<15|z>>>17)+A|0;y+=(A^(z|~v))+u[5]-57434055|0;y=(y<<21|y>>>11)+z|0;v+=(z^(y|~A))+u[12]+1700485571|0;v=(v<<6|v>>>26)+y|0;A+=(y^(v|~z))+u[3]-1894986606|0;A=(A<<10|A>>>22)+v|0;z+=(v^(A|~y))+u[10]-1051523|0;z=(z<<15|z>>>17)+A|0;y+=(A^(z|~v))+u[1]-2054922799|0;y=(y<<21|y>>>11)+z|0;v+=(z^(y|~A))+u[8]+1873313359|0;v=(v<<6|v>>>26)+y|0;A+=(y^(v|~z))+u[15]-30611744|0;A=(A<<10|A>>>22)+v|0;z+=(v^(A|~y))+u[6]-1560198380|
0;z=(z<<15|z>>>17)+A|0;y+=(A^(z|~v))+u[13]+1309151649|0;y=(y<<21|y>>>11)+z|0;v+=(z^(y|~A))+u[4]-145523070|0;v=(v<<6|v>>>26)+y|0;A+=(y^(v|~z))+u[11]-1120210379|0;A=(A<<10|A>>>22)+v|0;z+=(v^(A|~y))+u[2]+718787259|0;z=(z<<15|z>>>17)+A|0;y+=(A^(z|~v))+u[9]-343485551|0;r[0]=v+r[0]|0;r[1]=((y<<21|y>>>11)+z|0)+r[1]|0;r[2]=z+r[2]|0;r[3]=A+r[3]|0}function n(r){var u=[],v;for(v=0;64>v;v+=4)u[v>>2]=r.charCodeAt(v)+(r.charCodeAt(v+1)<<8)+(r.charCodeAt(v+2)<<16)+(r.charCodeAt(v+3)<<24);return u}function b(r){var u=
[],v;for(v=0;64>v;v+=4)u[v>>2]=r[v]+(r[v+1]<<8)+(r[v+2]<<16)+(r[v+3]<<24);return u}function e(r){var u=r.length,v=[1732584193,-271733879,-1732584194,271733878],y;for(y=64;y<=u;y+=64)h(v,n(r.substring(y-64,y)));r=r.substring(y-64);var z=r.length;var A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(y=0;y<z;y+=1)A[y>>2]|=r.charCodeAt(y)<<(y%4<<3);A[y>>2]|=128<<(y%4<<3);if(55<y)for(h(v,A),y=0;16>y;y+=1)A[y]=0;u=(8*u).toString(16).match(/(.*?)(.{0,8})$/);r=parseInt(u[2],16);u=parseInt(u[1],16)||0;A[14]=r;A[15]=
u;h(v,A);return v}function m(r){var u;for(u=0;u<r.length;u+=1){var v=u,y,z=r[u],A="";for(y=0;4>y;y+=1)A+=q[z>>8*y+4&15]+q[z>>8*y&15];r[v]=A}return r.join("")}function a(r){/[\u0080-\uFFFF]/.test(r)&&(r=unescape(encodeURIComponent(r)));return r}function g(r){var u=[],v=r.length,y;for(y=0;y<v-1;y+=2)u.push(parseInt(r.substr(y,2),16));return String.fromCharCode.apply(String,u)}function l(){this.reset()}var q="0123456789abcdef".split("");m(e("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||
function(){function r(u,v){u=u|0||0;return 0>u?Math.max(u+v,0):Math.min(u,v)}ArrayBuffer.prototype.slice=function(u,v){var y=(this||$g).byteLength;u=r(u,y);var z=y;v!==d&&(z=r(v,y));if(u>z)return new ArrayBuffer(0);z-=u;v=new ArrayBuffer(z);y=new Uint8Array(v);u=new Uint8Array(this||$g,u,z);y.set(u);return v}}();l.prototype.append=function(r){this.appendBinary(a(r));return this||$g};l.prototype.appendBinary=function(r){(this||$g)._buff+=r;(this||$g)._length+=r.length;r=(this||$g)._buff.length;var u;
for(u=64;u<=r;u+=64)h((this||$g)._hash,n((this||$g)._buff.substring(u-64,u)));(this||$g)._buff=(this||$g)._buff.substring(u-64);return this||$g};l.prototype.end=function(r){var u=(this||$g)._buff,v=u.length,y,z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(y=0;y<v;y+=1)z[y>>2]|=u.charCodeAt(y)<<(y%4<<3);this._finish(z,v);u=m((this||$g)._hash);r&&(u=g(u));this.reset();return u};l.prototype.reset=function(){(this||$g)._buff="";(this||$g)._length=0;(this||$g)._hash=[1732584193,-271733879,-1732584194,271733878];
return this||$g};l.prototype.getState=function(){return{buff:(this||$g)._buff,length:(this||$g)._length,hash:(this||$g)._hash}};l.prototype.setState=function(r){(this||$g)._buff=r.buff;(this||$g)._length=r.length;(this||$g)._hash=r.hash;return this||$g};l.prototype.destroy=function(){delete (this||$g)._hash;delete (this||$g)._buff;delete (this||$g)._length};l.prototype._finish=function(r,u){r[u>>2]|=128<<(u%4<<3);if(55<u)for(h((this||$g)._hash,r),u=0;16>u;u+=1)r[u]=0;var v=8*(this||$g)._length;v=
v.toString(16).match(/(.*?)(.{0,8})$/);u=parseInt(v[2],16);v=parseInt(v[1],16)||0;r[14]=u;r[15]=v;h((this||$g)._hash,r)};l.hash=function(r,u){return l.hashBinary(a(r),u)};l.hashBinary=function(r,u){r=e(r);r=m(r);return u?g(r):r};l.ArrayBuffer=function(){this.reset()};l.ArrayBuffer.prototype.append=function(r){var u=(this||$g)._buff.buffer,v=new Uint8Array(u.byteLength+r.byteLength);v.set(new Uint8Array(u));v.set(new Uint8Array(r),u.byteLength);u=v.length;(this||$g)._length+=r.byteLength;for(r=64;r<=
u;r+=64)h((this||$g)._hash,b(v.subarray(r-64,r)));(this||$g)._buff=r-64<u?new Uint8Array(v.buffer.slice(r-64)):new Uint8Array(0);return this||$g};l.ArrayBuffer.prototype.end=function(r){var u=(this||$g)._buff,v=u.length,y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],z;for(z=0;z<v;z+=1)y[z>>2]|=u[z]<<(z%4<<3);this._finish(y,v);u=m((this||$g)._hash);r&&(u=g(u));this.reset();return u};l.ArrayBuffer.prototype.reset=function(){(this||$g)._buff=new Uint8Array(0);(this||$g)._length=0;(this||$g)._hash=[1732584193,-271733879,
-1732584194,271733878];return this||$g};l.ArrayBuffer.prototype.getState=function(){var r=l.prototype.getState.call(this||$g);r.buff=String.fromCharCode.apply(null,new Uint8Array(r.buff));return r};l.ArrayBuffer.prototype.setState=function(r){var u=r.buff,v=u.length,y=new ArrayBuffer(v);y=new Uint8Array(y);var z;for(z=0;z<v;z+=1)y[z]=u.charCodeAt(z);r.buff=y;return l.prototype.setState.call(this||$g,r)};l.ArrayBuffer.prototype.destroy=l.prototype.destroy;l.ArrayBuffer.prototype._finish=l.prototype._finish;
l.ArrayBuffer.hash=function(r,u){var v=new Uint8Array(r),y=v.length;r=[1732584193,-271733879,-1732584194,271733878];var z;for(z=64;z<=y;z+=64)h(r,b(v.subarray(z-64,z)));v=z-64<y?v.subarray(z-64):new Uint8Array(0);var A=v.length;var B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(z=0;z<A;z+=1)B[z>>2]|=v[z]<<(z%4<<3);B[z>>2]|=128<<(z%4<<3);if(55<z)for(h(r,B),z=0;16>z;z+=1)B[z]=0;y=(8*y).toString(16).match(/(.*?)(.{0,8})$/);v=parseInt(y[2],16);y=parseInt(y[1],16)||0;B[14]=v;B[15]=y;h(r,B);r=m(r);return u?g(r):
r};return l}(),IA={stringify:function(d){var h=[];h.push({obj:d});d="";for(var n,b,e,m,a,g,l;n=h.pop();)if(b=n.obj,e=n.prefix||"",n=n.val||"",d+=e,n)d+=n;else if("object"!==typeof b)d+="undefined"===typeof b?null:JSON.stringify(b);else if(null===b)d+="null";else if(Array.isArray(b)){h.push({val:"]"});for(e=b.length-1;0<=e;e--)n=0===e?"":",",h.push({obj:b[e],prefix:n});h.push({val:"["})}else{n=[];for(m in b)b.hasOwnProperty(m)&&n.push(m);h.push({val:"}"});for(e=n.length-1;0<=e;e--)a=n[e],g=b[a],l=
0<e?",":"",l+=JSON.stringify(a)+":",h.push({obj:g,prefix:l});h.push({val:"{"})}return d},parse:function(d){for(var h=[],n=[],b=0,e,m,a,g;;)if(e=d[b++],"}"===e||"]"===e||"undefined"===typeof e){if(1===h.length)return h.pop();yz(h.pop(),h,n)}else switch(e){case " ":case "\t":case "\n":case ":":case ",":break;case "n":b+=3;yz(null,h,n);break;case "t":b+=3;yz(!0,h,n);break;case "f":b+=4;yz(!1,h,n);break;case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":case "-":e=
"";for(b--;;)if(m=d[b++],/[\d\.\-e\+]/.test(m))e+=m;else{b--;break}yz(parseFloat(e),h,n);break;case '"':e="";m=void 0;for(a=0;;)if(g=d[b++],'"'!==g||"\\"===m&&1===a%2)e+=g,m=g,"\\"===m?a++:a=0;else break;yz(JSON.parse('"'+e+'"'),h,n);break;case "[":e={element:[],index:h.length};h.push(e.element);n.push(e);break;case "{":e={element:{},index:h.length};h.push(e.element);n.push(e);break;default:throw Error("unexpectedly reached end of input: "+e);}}},Cfa={},$O=Cfa=function(d){return function(){var h=
arguments.length;if(h){for(var n=[],b=-1;++b<h;)n[b]=arguments[b];return d.call(this,n)}return d.call(this,[])}},Dfa={},sk=Dfa="function"===typeof Object.create?function(d,h){h&&(d.super_=h,d.prototype=Object.create(h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}))}:function(d,h){if(h){d.super_=h;var n=function(){};n.prototype=h.prototype;d.prototype=new n;d.prototype.constructor=d}},JA="object"==typeof Reflect?Reflect:null,o2=JA&&"function"==typeof JA.apply?JA.apply:
function(d,h,n){return Function.prototype.apply.call(d,h,n)};var Efa=JA&&"function"==typeof JA.ownKeys?JA.ownKeys:Object.getOwnPropertySymbols?function(d){return Object.getOwnPropertyNames(d).concat(Object.getOwnPropertySymbols(d))}:function(d){return Object.getOwnPropertyNames(d)};var p2=Number.isNaN||function(d){return d!=d};pj.EventEmitter=pj;pj.prototype._events=void 0;pj.prototype._eventsCount=0;pj.prototype._maxListeners=void 0;var q2=10;Object.defineProperty(pj,"defaultMaxListeners",{enumerable:!0,
get:function(){return q2},set:function(d){if("number"!=typeof d||0>d||p2(d))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+d+".");q2=d}});pj.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0};pj.prototype.setMaxListeners=function(d){if("number"!=typeof d||0>d||p2(d))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+
d+".");return this._maxListeners=d,this};pj.prototype.getMaxListeners=function(){return void 0===this._maxListeners?pj.defaultMaxListeners:this._maxListeners};pj.prototype.emit=function(d){for(var h=[],n=1;n<arguments.length;n++)h.push(arguments[n]);n="error"===d;var b=this._events;if(void 0!==b)n=n&&void 0===b.error;else if(!n)return!1;if(n){var e;if(0<h.length&&(e=h[0]),e instanceof Error)throw e;h=Error("Unhandled error."+(e?" ("+e.message+")":""));throw h.context=e,h;}n=b[d];if(void 0===n)return!1;
if("function"==typeof n)o2(n,this,h);else for(e=n.length,b=dU(n,e),n=0;n<e;++n)o2(b[n],this,h);return!0};pj.prototype.addListener=function(d,h){return aU(this,d,h,!1)};pj.prototype.on=pj.prototype.addListener;pj.prototype.prependListener=function(d,h){return aU(this,d,h,!0)};pj.prototype.once=function(d,h){return BF(h),this.on(d,bU(this,d,h)),this};pj.prototype.prependOnceListener=function(d,h){return BF(h),this.prependListener(d,bU(this,d,h)),this};pj.prototype.removeListener=function(d,h){var n,
b,e;if((BF(h),void 0===(b=this._events))||void 0===(n=b[d]))return this;if(n===h||n.listener===h)0==--this._eventsCount?this._events=Object.create(null):(delete b[d],b.removeListener&&this.emit("removeListener",d,n.listener||h));else if("function"!=typeof n){var m=-1;for(e=n.length-1;0<=e;e--)if(n[e]===h||n[e].listener===h){var a=n[e].listener;m=e;break}if(0>m)return this;if(0===m)n.shift();else{for(;m+1<n.length;m++)n[m]=n[m+1];n.pop();!0}1===n.length&&(b[d]=n[0]);void 0!==b.removeListener&&this.emit("removeListener",
d,a||h)}return this};pj.prototype.off=pj.prototype.removeListener;pj.prototype.removeAllListeners=function(d){var h,n;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[d]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[d]),this;if(0===arguments.length){var b=Object.keys(n);for(n=0;n<b.length;++n)"removeListener"!==(h=b[n])&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),
this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(h=n[d]))this.removeListener(d,h);else if(void 0!==h)for(n=h.length-1;0<=n;n--)this.removeListener(d,h[n]);return this};pj.prototype.listeners=function(d){return cU(this,d,!0)};pj.prototype.rawListeners=function(d){return cU(this,d,!1)};pj.listenerCount=function(d,h){return"function"==typeof d.listenerCount?d.listenerCount(h):eU.call(d,h)};pj.prototype.listenerCount=eU;pj.prototype.eventNames=function(){return 0<this._eventsCount?
Efa(this._events):[]};var vs=pj,r2="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Ffa={},KF=zi,rs=zz(ufa),tU=zz(zfa),FF=zz(Bfa),NU=zz(IA),Az=zz($O),lr=zz(sk),Qn=vs;Fv.prototype.get=function(d){return this._store["$"+d]};Fv.prototype.set=function(d,h){this._store["$"+d]=h;return!0};Fv.prototype.has=function(d){return"$"+d in this._store};Fv.prototype.delete=function(d){d="$"+d;var h=d in this._store;delete this._store[d];return h};Fv.prototype.forEach=function(d){for(var h=
Object.keys(this._store),n=0,b=h.length;n<b;n++){var e=h[n],m=this._store[e];e=e.substring(1);d(m,e)}};Object.defineProperty(Fv.prototype,"size",{get:function(){return Object.keys(this._store).length}});OB.prototype.add=function(d){return this._store.set(d,!0)};OB.prototype.has=function(d){return this._store.has(d)};OB.prototype.forEach=function(d){this._store.forEach(function(h,n){d(n)})};Object.defineProperty(OB.prototype,"size",{get:function(){return this._store.size}});if(function(){if("undefined"===
typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var d=Object.getOwnPropertyDescriptor(Map,Symbol.species);return d&&"get"in d&&Map[Symbol.species]===Map}()){var WB=Set;var Co=Map}else WB=OB,Co=Fv;var fU=Function.prototype.toString,A6=fU.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var QB=!!localStorage.getItem("_pouch_check_localstorage")}catch(d){QB=!1}lr(Bz,Qn.EventEmitter);Bz.prototype.addListener=function(d,h,n,b){function e(){if(m._listeners[h])if(a)a=
"waiting";else{a=!0;var g=PB(b,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));n.changes(g).on("change",function(l){l.seq>b.since&&!b.cancelled&&(b.since=l.seq,b.onChange(l))}).on("complete",function(){"waiting"===a&&rs(e);a=!1}).on("error",function(){a=!1})}}if(!this._listeners[h]){var m=this,a=!1;this._listeners[h]=e;this.on(d,e)}};Bz.prototype.removeListener=function(d,h){h in this._listeners&&(Qn.EventEmitter.prototype.removeListener.call(this,
d,this._listeners[h]),delete this._listeners[h])};Bz.prototype.notifyLocalWindows=function(d){QB&&(localStorage[d]="a"===localStorage[d]?"b":"a")};Bz.prototype.notify=function(d){this.emit(d);this.notifyLocalWindows(d)};var Fz="function"===typeof Object.assign?Object.assign:function(d){for(var h=Object(d),n=1;n<arguments.length;n++){var b=arguments[n];if(null!=b)for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(h[e]=b[e])}return h};lr(Cj,Error);Cj.prototype.toString=function(){return JSON.stringify({status:this.status,
name:this.name,message:this.message,reason:this.reason})};new Cj(401,"unauthorized","Name or password is incorrect.");var Gfa=new Cj(400,"bad_request","Missing JSON list of 'docs'"),Oq=new Cj(404,"not_found","missing"),Ez=new Cj(409,"conflict","Document update conflict"),mU=new Cj(400,"bad_request","_id field must contain a string"),G6=new Cj(412,"missing_id","_id is required for puts"),F6=new Cj(400,"bad_request","Only reserved document ids may start with underscore.");new Cj(412,"precondition_failed",
"Database not open");var kU=new Cj(500,"unknown_error","Database encountered an unknown error"),MU=new Cj(500,"badarg","Some query argument is invalid");new Cj(400,"invalid_request","Request was invalid");var Hfa=new Cj(400,"query_parse_error","Some query parameter is invalid"),LU=new Cj(500,"doc_validation","Bad special document member"),CF=new Cj(400,"bad_request","Something wrong with the request"),aP=new Cj(400,"bad_request","Document must be a JSON object");new Cj(404,"not_found","Database not found");
var MK=new Cj(500,"indexed_db_went_bad","unknown");new Cj(500,"web_sql_went_bad","unknown");new Cj(500,"levelDB_went_went_bad","unknown");new Cj(403,"forbidden","Forbidden by design doc validate_doc_update function");var JU=new Cj(400,"bad_request","Invalid rev format");new Cj(412,"file_exists","The database could not be created, the file already exists.");var w7=new Cj(412,"missing_stub","A pre-existing attachment stub wasn't found");new Cj(413,"invalid_url","Provided URL is invalid");var pU="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),
I6=/(?:^|&)([^&=]*)=?([^&]*)/g,H6=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,O6=r2.setImmediate||r2.setTimeout,GF=tU.v4;lr(RB,Qn.EventEmitter);RB.prototype.cancel=function(){this.isCancelled=!0;this.db.taskqueue.isReady&&this.emit("cancel")};RB.prototype.validateChanges=function(d){var h=d.complete,n=this;Mh._changesFilterPlugin?Mh._changesFilterPlugin.validate(d,
function(b){if(b)return h(b);n.doChanges(d)}):n.doChanges(d)};RB.prototype.doChanges=function(d){var h=this,n=d.complete;d=vl(d);"live"in d&&!("continuous"in d)&&(d.continuous=d.live);d.processChange=W6;"latest"===d.since&&(d.since="now");d.since||(d.since=0);if("now"===d.since)this.db.info().then(function(m){h.isCancelled?n(null,{status:"cancelled"}):(d.since=m.update_seq,h.doChanges(d))},n);else{if(Mh._changesFilterPlugin){if(Mh._changesFilterPlugin.normalize(d),Mh._changesFilterPlugin.shouldFilter(this,
d))return Mh._changesFilterPlugin.filter(this,d)}else["doc_ids","filter","selector","view"].forEach(function(m){m in d&&Ep("warn",'The "'+m+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in d||(d.descending=!1);d.limit=0===d.limit?1:d.limit;d.complete=n;var b=this.db._changes(d);if(b&&"function"===typeof b.cancel){var e=h.cancel;h.cancel=Az(function(m){b.cancel();e.apply(this,
m)})}}};lr(Yj,Qn.EventEmitter);Yj.prototype.post=el("post",function(d,h,n){"function"===typeof h&&(n=h,h={});if("object"!==typeof d||Array.isArray(d))return n(Qh(aP));this.bulkDocs({docs:[d]},h,JK(n,d._id))});Yj.prototype.put=el("put",function(d,h,n){function b(){var a=d._rev.split("-"),g=a[1];a=parseInt(a[0],10)+1;var l=sU();d._revisions={start:a,ids:[l,g]};d._rev=a+"-"+l;h.new_edits=!1}function e(a){"function"===typeof m._put&&!1!==h.new_edits?m._put(d,h,a):m.bulkDocs({docs:[d]},h,JK(a,d._id))}
"function"===typeof h&&(n=h,h={});if("object"!==typeof d||Array.isArray(d))return n(Qh(aP));lU(d._id);if(qx(d._id)&&"function"===typeof this._putLocal)return d._deleted?this._removeLocal(d,n):this._putLocal(d,n);var m=this;h.force&&d._rev?(b(),e(function(a){n(a,a?null:{ok:!0,id:d._id,rev:d._rev})})):e(n)});Yj.prototype.putAttachment=el("putAttachment",function(d,h,n,b,e){function m(g){var l="_rev"in g?parseInt(g._rev,10):0;g._attachments=g._attachments||{};g._attachments[h]={content_type:e,data:b,
revpos:++l};return a.put(g)}var a=this;"function"===typeof e&&(e=b,b=n,n=null);"undefined"===typeof e&&(e=b,b=n,n=null);e||Ep("warn","Attachment",h,"on document",d,"is missing content_type");return a.get(d).then(function(g){if(g._rev!==n)throw Qh(Ez);return m(g)},function(g){if(g.reason===Oq.message)return m({_id:d});throw g;})});Yj.prototype.removeAttachment=el("removeAttachment",function(d,h,n,b){var e=this;e.get(d,function(m,a){if(m)b(m);else if(a._rev!==n)b(Qh(Ez));else{if(!a._attachments)return b();
delete a._attachments[h];0===Object.keys(a._attachments).length&&delete a._attachments;e.put(a,b)}})});Yj.prototype.remove=el("remove",function(d,h,n,b){"string"===typeof h?(d={_id:d,_rev:h},"function"===typeof n&&(b=n,n={})):"function"===typeof h?(b=h,n={}):(b=n,n=h);n=n||{};n.was_delete=!0;h={_id:d._id,_rev:d._rev||n.rev,_deleted:!0};if(qx(h._id)&&"function"===typeof this._removeLocal)return this._removeLocal(d,b);this.bulkDocs({docs:[h]},n,JK(b,h._id))});Yj.prototype.revsDiff=el("revsDiff",function(d,
h,n){function b(l,q){g.has(l)||g.set(l,{missing:[]});g.get(l).missing.push(q)}function e(l,q){var r=d[l].slice(0);px(q,function(u,v,y,z,A){u=v+"-"+y;v=r.indexOf(u);-1!==v&&(r.splice(v,1),"available"!==A.status&&b(l,u))});r.forEach(function(u){b(l,u)})}"function"===typeof h&&(n=h,h={});var m=Object.keys(d);if(!m.length)return n(null,{});var a=0,g=new Co;m.map(function(l){this._getRevisionTree(l,function(q,r){if(q&&404===q.status&&"missing"===q.message)g.set(l,{missing:d[l]});else{if(q)return n(q);
e(l,r)}if(++a===m.length){var u={};g.forEach(function(v,y){u[y]=v});return n(null,u)}})},this)});Yj.prototype.bulkGet=el("bulkGet",function(d,h){jU(this,d,h)});Yj.prototype.compactDocument=el("compactDocument",function(d,h,n){var b=this;this._getRevisionTree(d,function(e,m){if(e)return n(e);var a=Z6(m),g=[],l=[];Object.keys(a).forEach(function(q){a[q]>h&&g.push(q)});px(m,function(q,r,u,v,y){q=r+"-"+u;"available"===y.status&&-1!==g.indexOf(q)&&l.push(q)});b._doCompaction(d,l,n)})});Yj.prototype.compact=
el("compact",function(d,h){"function"===typeof d&&(h=d,d={});d=d||{};this._compactionQueue=this._compactionQueue||[];this._compactionQueue.push({opts:d,callback:h});1===this._compactionQueue.length&&zU(this)});Yj.prototype._compact=function(d,h){var n=this,b=[];n.changes({return_docs:!1,last_seq:d.last_seq||0}).on("change",function(e){b.push(n.compactDocument(e.id,0))}).on("complete",function(e){var m=e.last_seq;Promise.all(b).then(function(){return EF(n,"_local/compaction",function(a){return!a.last_seq||
a.last_seq<m?(a.last_seq=m,a):!1})}).then(function(){h(null,{ok:!0})}).catch(h)}).on("error",h)};Yj.prototype.get=el("get",function(d,h,n){function b(){var l=[],q=e.length;if(!q)return n(null,l);e.forEach(function(r){m.get(d,{rev:r,revs:h.revs,latest:h.latest,attachments:h.attachments,binary:h.binary},function(u,v){if(u)l.push({missing:r});else{u=0;for(var y=l.length;u<y;u++)if(l[u].ok&&l[u].ok._rev===v._rev){var z=!0;break}z||l.push({ok:v})}q--;q||n(null,l)})})}"function"===typeof h&&(n=h,h={});
if("string"!==typeof d)return n(Qh(mU));if(qx(d)&&"function"===typeof this._getLocal)return this._getLocal(d,n);var e=[],m=this;if(h.open_revs)if("all"===h.open_revs)this._getRevisionTree(d,function(l,q){if(l)return n(l);e=HK(q).map(function(r){return r.rev});b()});else if(Array.isArray(h.open_revs)){e=h.open_revs;for(var a=0;a<e.length;a++){var g=e[a];if("string"!==typeof g||!/^\d+-/.test(g))return n(Qh(JU))}b()}else return n(Qh(kU,"function_clause"));else return this._get(d,h,function(l,q){if(l)return l.docId=
d,n(l);var r=q.doc,u=q.metadata,v=q.ctx;h.conflicts&&(q=IK(u),q.length&&(r._conflicts=q));fu(u,r._rev)&&(r._deleted=!0);if(h.revs||h.revs_info){l=r._rev.split("-");q=parseInt(l[0],10);l=l[1];var y=uU(u.rev_tree);u=null;for(var z=0;z<y.length;z++){var A=y[z],B=A.ids.map(function(P){return P.id}).indexOf(l);if(B===q-1||!u&&-1!==B)u=A}if(!u)return l=Error("invalid rev tree"),l.docId=d,n(l);q=u.ids.map(function(P){return P.id}).indexOf(r._rev.split("-")[1])+1;u.ids.splice(q,u.ids.length-q);u.ids.reverse();
h.revs&&(r._revisions={start:u.pos+u.ids.length-1,ids:u.ids.map(function(P){return P.id})});if(h.revs_info){var G=u.pos+u.ids.length;r._revs_info=u.ids.map(function(P){G--;return{rev:G+"-"+P.id,status:P.opts.status}})}}if(h.attachments&&r._attachments){var E=r._attachments,K=Object.keys(E).length;if(0===K)return n(null,r);Object.keys(E).forEach(function(P){this._getAttachment(r._id,P,E[P],{rev:r._rev,binary:h.binary,ctx:v},function(ea,ra){ea=r._attachments[P];ea.data=ra;delete ea.stub;delete ea.length;
--K||n(null,r)})},m)}else{if(r._attachments)for(var J in r._attachments)r._attachments.hasOwnProperty(J)&&(r._attachments[J].stub=!0);n(null,r)}})});Yj.prototype.getAttachment=el("getAttachment",function(d,h,n,b){var e=this;n instanceof Function&&(b=n,n={});this._get(d,n,function(m,a){if(m)return b(m);if(a.doc._attachments&&a.doc._attachments[h])n.ctx=a.ctx,n.binary=!0,e._getAttachment(d,h,a.doc._attachments[h],n,b);else return b(Qh(Oq))})});Yj.prototype.allDocs=el("allDocs",function(d,h){"function"===
typeof d&&(h=d,d={});d.skip="undefined"!==typeof d.skip?d.skip:0;d.start_key&&(d.startkey=d.start_key);d.end_key&&(d.endkey=d.end_key);if("keys"in d){if(!Array.isArray(d.keys))return h(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(b){return b in d})[0];if(n){h(Qh(Hfa,"Query parameter `"+n+"` is not compatible with multi-get"));return}if(!qs(this)&&($6(d),0===d.keys.length))return this._allDocs({limit:0},h)}return this._allDocs(d,h)});Yj.prototype.changes=
function(d,h){"function"===typeof d&&(h=d,d={});d=d||{};d.return_docs="return_docs"in d?d.return_docs:!d.live;return new RB(this,d,h)};Yj.prototype.close=el("close",function(d){this._closed=!0;this.emit("closed");return this._close(d)});Yj.prototype.info=el("info",function(d){var h=this;this._info(function(n,b){if(n)return d(n);b.db_name=b.db_name||h.name;b.auto_compaction=!(!h.auto_compaction||qs(h));b.adapter=h.adapter;d(null,b)})});Yj.prototype.id=el("id",function(d){return this._id(d)});Yj.prototype.type=
function(){return"function"===typeof this._type?this._type():this.adapter};Yj.prototype.bulkDocs=el("bulkDocs",function(d,h,n){"function"===typeof h&&(n=h,h={});h=h||{};Array.isArray(d)&&(d={docs:d});if(!d||!d.docs||!Array.isArray(d.docs))return n(Qh(Gfa));for(var b=0;b<d.docs.length;++b)if("object"!==typeof d.docs[b]||Array.isArray(d.docs[b]))return n(Qh(aP));var e;d.docs.forEach(function(g){g._attachments&&Object.keys(g._attachments).forEach(function(l){var q;(q=e)||(q="_"===l.charAt(0)?l+" is not a valid attachment name, attachment names cannot start with '_'":
!1);e=q;g._attachments[l].content_type||Ep("warn","Attachment",l,"on document",g._id,"is missing content_type")})});if(e)return n(Qh(CF,e));"new_edits"in h||(h.new_edits="new_edits"in d?d.new_edits:!0);var m=this;h.new_edits||qs(m)||d.docs.sort(Y6);X6(d.docs);var a=d.docs.map(function(g){return g._id});return this._bulkDocs(d,h,function(g,l){if(g)return n(g);h.new_edits||(l=l.filter(function(r){return r.error}));if(!qs(m)){g=0;for(var q=l.length;g<q;g++)l[g].id=l[g].id||a[g]}n(null,l)})});Yj.prototype.registerDependentDatabase=
el("registerDependentDatabase",function(d,h){var n=new this.constructor(d,this.__opts);EF(this,"_local/_pouch_dependentDbs",function(b){b.dependentDbs=b.dependentDbs||{};if(b.dependentDbs[d])return!1;b.dependentDbs[d]=!0;return b}).then(function(){h(null,{db:n})}).catch(h)});Yj.prototype.destroy=el("destroy",function(d,h){function n(){b._destroy(d,function(m,a){if(m)return h(m);b._destroyed=!0;b.emit("destroyed");h(null,a||{ok:!0})})}"function"===typeof d&&(h=d,d={});var b=this,e="use_prefix"in b?
b.use_prefix:!0;if(qs(b))return n();b.get("_local/_pouch_dependentDbs",function(m,a){if(m)return 404!==m.status?h(m):n();var g=b.constructor;m=Object.keys(a.dependentDbs).map(function(l){l=e?l.replace(new RegExp("^"+g.prefix),""):l;return(new g(l,b.__opts)).destroy()});Promise.all(m).then(n,h)})});SB.prototype.execute=function(){var d;if(this.failed)for(;d=this.queue.shift();)d(this.failed);else for(;d=this.queue.shift();)d()};SB.prototype.fail=function(d){this.failed=d;this.execute()};SB.prototype.ready=
function(d){this.isReady=!0;this.db=d;this.execute()};SB.prototype.addTask=function(d){this.queue.push(d);this.failed&&this.execute()};lr(Mh,Yj);var K7="undefined"!==typeof AbortController?AbortController:function(){return{abort:function(){}}},VU=fetch,Hz=Headers;Mh.adapters={};Mh.preferredAdapters=[];Mh.prefix="_pouch_";var s2=new Qn.EventEmitter;(function(d){Object.keys(Qn.EventEmitter.prototype).forEach(function(n){"function"===typeof Qn.EventEmitter.prototype[n]&&(d[n]=s2[n].bind(s2))});var h=
d._destructionListeners=new Co;d.on("ref",function(n){h.has(n.name)||h.set(n.name,[]);h.get(n.name).push(n)});d.on("unref",function(n){if(h.has(n.name)){var b=h.get(n.name),e=b.indexOf(n);0>e||(b.splice(e,1),1<b.length?h.set(n.name,b):h.delete(n.name))}});d.on("destroyed",function(n){if(h.has(n)){var b=h.get(n);h.delete(n);b.forEach(function(e){e.emit("destroyed",!0)})}})})(Mh);Mh.adapter=function(d,h,n){h.valid()&&(Mh.adapters[d]=h,n&&Mh.preferredAdapters.push(d))};Mh.plugin=function(d){if("function"===
typeof d)d(Mh);else{if("object"!==typeof d||0===Object.keys(d).length)throw Error('Invalid plugin: got "'+d+'", expected an object or a function');Object.keys(d).forEach(function(h){Mh.prototype[h]=d[h]})}this.__defaults&&(Mh.__defaults=Fz({},this.__defaults));return Mh};Mh.defaults=function(d){function h(n,b){if(!(this instanceof h))return new h(n,b);b=b||{};n&&"object"===typeof n&&(b=n,n=b.name,delete b.name);b=Fz({},h.__defaults,b);Mh.call(this,n,b)}lr(h,Mh);h.preferredAdapters=Mh.preferredAdapters.slice();
Object.keys(Mh).forEach(function(n){n in h||(h[n]=Mh[n])});h.__defaults=Fz({},this.__defaults,d);return h};Mh.fetch=function(d,h){return VU(d,h)};var CU=["$or","$nor","$not"],FU={$elemMatch:function(d,h,n,b){return Array.isArray(b)&&0!==b.length?"object"===typeof b[0]?b.some(function(e){return Dz(e,h,Object.keys(h))}):b.some(function(e){return LK(h,d,n,e)}):!1},$allMatch:function(d,h,n,b){return Array.isArray(b)&&0!==b.length?"object"===typeof b[0]?b.every(function(e){return Dz(e,h,Object.keys(h))}):
b.every(function(e){return LK(h,d,n,e)}):!1},$eq:function(d,h,n,b){return sx(b)&&0===Tl(b,h)},$gte:function(d,h,n,b){return sx(b)&&0<=Tl(b,h)},$gt:function(d,h,n,b){return sx(b)&&0<Tl(b,h)},$lte:function(d,h,n,b){return sx(b)&&0>=Tl(b,h)},$lt:function(d,h,n,b){return sx(b)&&0>Tl(b,h)},$exists:function(d,h,n,b){return h?sx(b):!sx(b)},$mod:function(d,h,n,b){if(d=UB(b)){d=h[0];h=h[1];if(0===d)throw Error("Bad divisor, cannot divide by zero");if(parseInt(d,10)!==d)throw Error("Divisor is not an integer");
if(parseInt(h,10)!==h)throw Error("Modulus is not an integer");d=parseInt(b,10)!==b?!1:b%d===h}return d},$ne:function(d,h,n,b){return h.every(function(e){return 0!==Tl(b,e)})},$in:function(d,h,n,b){return UB(b)&&GU(b,h)},$nin:function(d,h,n,b){return UB(b)&&!GU(b,h)},$size:function(d,h,n,b){return UB(b)&&b.length===h},$all:function(d,h,n,b){return Array.isArray(b)&&i7(b,h)},$regex:function(d,h,n,b){if(d=UB(b))d=(new RegExp(h)).test(b);return d},$type:function(d,h,n,b){return j7(b,h)}};Mh.plugin(function(d){d._changesFilterPlugin=
{validate:k7,normalize:l7,shouldFilter:m7,filter:n7}});Mh.version="7.2.1";var o7=HU("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),p7=HU("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" ")),VB=new Bz,PK=!1,QK=[],Gz=new Co,SK,RK=new Co;TU.valid=
function(){return"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange};var VK={};UK.valid=function(){return!0};lr(vx,Error);lr(LF,Error);lr(MF,Error);var N7=Ep.bind(null,"log"),O7=Array.isArray,P7=JSON.parse;XB.prototype.add=function(d){return this.promise=this.promise.catch(function(){}).then(function(){return d()})};XB.prototype.finish=function(){return this.promise};var t2={},u2=new XB,Ifa=function(d,h){return YK(h)},Jfa=function(d,h){return h.length},Kfa=function(d,h){d=YK(h);for(var n=
Math.min.apply(null,h),b=Math.max.apply(null,h),e=h.length,m=0,a=0,g=h.length;a<g;a++){var l=h[a];m+=l*l}return{sum:d,min:n,max:b,count:e,sumsqr:m}},v2=function(d,h,n,b){function e(Y,ma,bb,Qa,X){try{return{output:ma(bb,Qa,X)}}catch(V){return bV(Y,V),{error:V}}}function m(Y,ma){var bb=Tl(Y.key,ma.key);return 0!==bb?bb:Tl(Y.value,ma.value)}function a(Y,ma,bb){bb=bb||0;return"number"===typeof ma?Y.slice(bb,ma+bb):0<bb?Y.slice(bb):Y}function g(Y){var ma=Y.value;return ma&&"object"===typeof ma&&ma._id||
Y.id}function l(Y){Y.rows.forEach(function(ma){var bb=ma.doc&&ma.doc._attachments;bb&&Object.keys(bb).forEach(function(Qa){var X=bb[Qa];bb[Qa].data=EK(X.data,X.content_type)})})}function q(Y){return function(ma){Y.include_docs&&Y.attachments&&Y.binary&&l(ma);return ma}}function r(Y,ma,bb,Qa){ma=ma[Y];"undefined"!==typeof ma&&(Qa&&(ma=encodeURIComponent(JSON.stringify(ma))),bb.push(Y+"="+ma))}function u(Y){if("undefined"!==typeof Y){var ma=Number(Y);return isNaN(ma)||ma!==parseInt(Y,10)?Y:ma}}function v(Y){Y.group_level=
u(Y.group_level);Y.limit=u(Y.limit);Y.skip=u(Y.skip);return Y}function y(Y,ma){var bb=Y.descending?"endkey":"startkey",Qa=Y.descending?"startkey":"endkey";if("undefined"!==typeof Y[bb]&&"undefined"!==typeof Y[Qa]&&0<Tl(Y[bb],Y[Qa]))throw new vx("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(ma.reduce&&!1!==Y.reduce){if(Y.include_docs)throw new vx("{include_docs:true} is invalid for reduce");if(Y.keys&&1<Y.keys.length&&!Y.group&&!Y.group_level)throw new vx("Multi-key fetches for reduce views must use {group: true}");
}["group_level","limit","skip"].forEach(function(X){a:{if(X=Y[X]){if("number"!==typeof X){X=new vx('Invalid value for integer: "'+X+'"');break a}if(0>X){X=new vx('Invalid value for positive integer: "'+X+'"');break a}}X=void 0}if(X)throw X;})}function z(Y,ma,bb){var Qa=[],X,V="GET",ha,xa;r("reduce",bb,Qa);r("include_docs",bb,Qa);r("attachments",bb,Qa);r("limit",bb,Qa);r("descending",bb,Qa);r("group",bb,Qa);r("group_level",bb,Qa);r("skip",bb,Qa);r("stale",bb,Qa);r("conflicts",bb,Qa);r("startkey",bb,
Qa,!0);r("start_key",bb,Qa,!0);r("endkey",bb,Qa,!0);r("end_key",bb,Qa,!0);r("inclusive_end",bb,Qa);r("key",bb,Qa,!0);r("update_seq",bb,Qa);Qa=Qa.join("&");Qa=""===Qa?"":"?"+Qa;if("undefined"!==typeof bb.keys){var yb="keys="+encodeURIComponent(JSON.stringify(bb.keys));2E3>=yb.length+Qa.length+1?Qa+=("?"===Qa[0]?"&":"?")+yb:(V="POST","string"===typeof ma?X={keys:bb.keys}:ma.keys=bb.keys)}if("string"===typeof ma)return yb=ZK(ma),Y.fetch("_design/"+yb[0]+"/_view/"+yb[1]+Qa,{headers:new Hz({"Content-Type":"application/json"}),
method:V,body:JSON.stringify(X)}).then(function(ec){ha=ec.ok;xa=ec.status;return ec.json()}).then(function(ec){if(!ha)throw ec.status=xa,Cz(ec);ec.rows.forEach(function(Nb){if(Nb.value&&Nb.value.error&&"builtin_reduce_error"===Nb.value.error)throw Error(Nb.reason);});return ec}).then(q(bb));X=X||{};Object.keys(ma).forEach(function(ec){Array.isArray(ma[ec])?X[ec]=ma[ec]:X[ec]=ma[ec].toString()});return Y.fetch("_temp_view"+Qa,{headers:new Hz({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(X)}).then(function(ec){ha=
ec.ok;xa=ec.status;return ec.json()}).then(function(ec){if(!ha)throw ec.status=xa,Cz(ec);return ec}).then(q(bb))}function A(Y,ma,bb){return new Promise(function(Qa,X){Y._query(ma,bb,function(V,ha){if(V)return X(V);Qa(ha)})})}function B(Y){return new Promise(function(ma,bb){Y._viewCleanup(function(Qa,X){if(Qa)return bb(Qa);ma(X)})})}function G(Y){return function(ma){if(404===ma.status)return Y;throw ma;}}function E(Y,ma,bb){function Qa(xa,yb){for(var ec=[],Nb=new WB,ac=0,Cc=yb.rows.length;ac<Cc;ac++){var Hb=
yb.rows[ac].doc;if(Hb&&(ec.push(Hb),Nb.add(Hb._id),Hb._deleted=!ha.has(Hb._id),!Hb._deleted)){var gd=ha.get(Hb._id);"value"in gd&&(Hb.value=gd.value)}}yb=XK(ha);yb.forEach(function(yd){if(!Nb.has(yd)){var U={_id:yd};yd=ha.get(yd);"value"in yd&&(U.value=yd.value);ec.push(U)}});xa.keys=XU(yb.concat(xa.keys));ec.push(xa);return ec}var X="_local/doc_"+Y,V={_id:X,keys:[]};Y=bb.get(Y);var ha=Y[0];X=R7(Y[1])?Promise.resolve(V):ma.db.get(X).catch(G(V));return X.then(function(xa){return(xa.keys.length?ma.db.allDocs({keys:xa.keys,
include_docs:!0}):Promise.resolve({rows:[]})).then(function(yb){return Qa(xa,yb)})})}function K(Y,ma,bb){return Y.db.get("_local/lastSeq").catch(G({_id:"_local/lastSeq",seq:0})).then(function(Qa){var X=XK(ma);return Promise.all(X.map(function(V){return E(V,Y,ma)})).then(function(V){V=DF(V);Qa.seq=bb;V.push(Qa);return Y.db.bulkDocs({docs:V})})})}function J(Y){Y="string"===typeof Y?Y:Y.name;var ma=t2[Y];ma||(ma=t2[Y]=new XB);return ma}function P(Y){return WK(J(Y),function(){return ea(Y)})()}function ea(Y){function ma(ec,
Nb){return function(){return K(Y,ec,Nb)}}function bb(){return Y.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:xa,limit:50}).then(Qa)}function Qa(ec){ec=ec.results;if(ec.length){for(var Nb=new Co,ac=0,Cc=ec.length;ac<Cc;ac++){var Hb=ec[ac];if("_"!==Hb.doc._id[0]){X=[];V=Hb.doc;if(!V._deleted){var gd=Y.sourceDB;try{ha(V)}catch(od){bV(gd,od)}}X.sort(m);gd=void 0;for(var yd=X,U=new Co,na=0,Aa=yd.length;na<Aa;na++){var hb=yd[na],Pb=[hb.key,hb.id];0<na&&0===Tl(hb.key,
gd)&&Pb.push(na);U.set(Nq(Pb),hb);gd=hb.key}Nb.set(Hb.doc._id,[U,Hb.changes])}xa=Hb.seq}yb.add(ma(Nb,xa));if(!(50>ec.length))return bb()}}var X,V,ha=h(Y.mapFun,function(ec,Nb){ec={id:V._id,key:rx(ec)};"undefined"!==typeof Nb&&null!==Nb&&(ec.value=rx(Nb));X.push(ec)}),xa=Y.seq||0,yb=new XB;return bb().then(function(){return yb.finish()}).then(function(){Y.seq=xa})}function ra(Y,ma,bb){0===bb.group_level&&delete bb.group_level;var Qa=bb.group||bb.group_level,X=n(Y.reduceFun),V=[],ha=isNaN(bb.group_level)?
Number.POSITIVE_INFINITY:bb.group_level;ma.forEach(function(ac){var Cc=V[V.length-1],Hb=Qa?ac.key:null;Qa&&Array.isArray(Hb)&&(Hb=Hb.slice(0,ha));Cc&&0===Tl(Cc.groupKey,Hb)?(Cc.keys.push([ac.key,ac.id]),Cc.values.push(ac.value)):V.push({keys:[[ac.key,ac.id]],values:[ac.value],groupKey:Hb})});ma=[];for(var xa=0,yb=V.length;xa<yb;xa++){var ec=V[xa],Nb=e(Y.sourceDB,X,ec.keys,ec.values,!1);if(Nb.error&&Nb.error instanceof MF)throw Nb.error;ma.push({value:Nb.error?null:Nb.output,key:ec.groupKey})}return{rows:a(ma,
bb.limit,bb.skip)}}function D(Y,ma){return WK(J(Y),function(){return O(Y,ma)})()}function O(Y,ma){function bb(Nb){Nb.include_docs=!0;return Y.db.allDocs(Nb).then(function(ac){X=ac.total_rows;return ac.rows.map(function(Cc){if("value"in Cc.doc&&"object"===typeof Cc.doc.value&&null!==Cc.doc.value){var Hb=Object.keys(Cc.doc.value).sort(),gd=["id","key","value"];if(!(Hb<gd||Hb>gd))return Cc.doc.value}a:{Hb=Cc.doc._id;gd=[];for(var yd=[],U=0;;){var na=Hb[U++];if("\x00"===na)if(1===gd.length){Hb=gd.pop();
break a}else{var Aa=gd;var hb=yd;na=Aa.pop();if(hb.length){var Pb=hb[hb.length-1];na===Pb.element&&(hb.pop(),Pb=hb[hb.length-1]);hb=Pb.element;Pb=Pb.index;Array.isArray(hb)?hb.push(na):Pb===Aa.length-2?(Aa=Aa.pop(),hb[Aa]=na):Aa.push(na)}continue}switch(na){case "1":gd.push(null);break;case "2":gd.push("1"===Hb[U]);U++;break;case "3":Pb=Hb;Aa=na=U;if("1"===Pb[na])Pb=0,na++;else{hb="0"===Pb[na];na++;var od="",nd=Pb.substring(na,na+3);nd=parseInt(nd,10)+-324;hb&&(nd=-nd);for(na+=3;;){var Ac=Pb[na];
if("\x00"===Ac)break;else od+=Ac;na++}od=od.split(".");Pb=1===od.length?parseInt(od,10):parseFloat(od[0]+"."+od[1]);hb&&(Pb-=10);0!==nd&&(Pb=parseFloat(Pb+"e"+nd))}hb=Pb;na-=Aa;gd.push(hb);U+=na;break;case "4":for(na="";;){Aa=Hb[U];if("\x00"===Aa)break;na+=Aa;U++}na=na.replace(/\u0001\u0001/g,"\x00").replace(/\u0001\u0002/g,"\u0001").replace(/\u0002\u0002/g,"\u0002");gd.push(na);break;case "5":na={element:[],index:gd.length};gd.push(na.element);yd.push(na);break;case "6":na={element:{},index:gd.length};
gd.push(na.element);yd.push(na);break;default:throw Error("bad collationIndex or unexpectedly reached end of input: "+na);}}}return{key:Hb[0],id:Hb[1],value:"value"in Cc.doc?Cc.doc.value:null}})})}function Qa(Nb){var ac=V?ra(Y,Nb,ma):{total_rows:X,offset:ha,rows:Nb};ma.update_seq&&(ac.update_seq=Y.seq);if(ma.include_docs){var Cc=XU(Nb.map(g));return Y.sourceDB.allDocs({keys:Cc,include_docs:!0,conflicts:ma.conflicts,attachments:ma.attachments,binary:ma.binary}).then(function(Hb){var gd=new Co;Hb.rows.forEach(function(yd){gd.set(yd.id,
yd.doc)});Nb.forEach(function(yd){var U=g(yd);if(U=gd.get(U))yd.doc=U});return ac})}return ac}var X,V=Y.reduceFun&&!1!==ma.reduce,ha=ma.skip||0;"undefined"===typeof ma.keys||ma.keys.length||(ma.limit=0,delete ma.keys);if("undefined"!==typeof ma.keys){var xa=ma.keys.map(function(Nb){Nb={startkey:Nq([Nb]),endkey:Nq([Nb,{}])};ma.update_seq&&(Nb.update_seq=!0);return bb(Nb)});return Promise.all(xa).then(DF).then(Qa)}xa={descending:ma.descending};ma.update_seq&&(xa.update_seq=!0);if("start_key"in ma)var yb=
ma.start_key;"startkey"in ma&&(yb=ma.startkey);if("end_key"in ma)var ec=ma.end_key;"endkey"in ma&&(ec=ma.endkey);"undefined"!==typeof yb&&(xa.startkey=ma.descending?Nq([yb,{}]):Nq([yb]));"undefined"!==typeof ec&&(yb=!1!==ma.inclusive_end,ma.descending&&(yb=!yb),xa.endkey=Nq(yb?[ec,{}]:[ec]));"undefined"!==typeof ma.key&&(ec=Nq([ma.key]),yb=Nq([ma.key,{}]),xa.descending?(xa.endkey=ec,xa.startkey=yb):(xa.startkey=ec,xa.endkey=yb));V||("number"===typeof ma.limit&&(xa.limit=ma.limit),xa.skip=ha);return bb(xa).then(Qa)}
function L(Y){return Y.fetch("_view_cleanup",{headers:new Hz({"Content-Type":"application/json"}),method:"POST"}).then(function(ma){return ma.json()})}function N(Y){return Y.get("_local/"+d).then(function(ma){var bb=new Co;Object.keys(ma.views).forEach(function(X){var V=ZK(X);X="_design/"+V[0];V=V[1];var ha=bb.get(X);ha||(ha=new WB,bb.set(X,ha));ha.add(V)});var Qa={keys:XK(bb),include_docs:!0};return Y.allDocs(Qa).then(function(X){var V={};X.rows.forEach(function(ha){var xa=ha.key.substring(8);bb.get(ha.key).forEach(function(yb){var ec=
xa+"/"+yb;ma.views[ec]||(ec=yb);ec=Object.keys(ma.views[ec]);var Nb=ha.doc&&ha.doc.views&&ha.doc.views[yb];ec.forEach(function(ac){V[ac]=V[ac]||Nb})})});X=Object.keys(V).filter(function(ha){return!V[ha]}).map(function(ha){return WK(J(ha),function(){return(new Y.constructor(ha,Y.__opts)).destroy()})()});return Promise.all(X).then(function(){return{ok:!0}})})},G({ok:!0}))}function aa(Y,ma,bb){if("function"===typeof Y._query)return A(Y,ma,bb);if(qs(Y))return z(Y,ma,bb);if("string"!==typeof ma)return y(bb,
ma),u2.add(function(){return aV(Y,"temp_view/temp_view",ma.map,ma.reduce,!0,d).then(function(V){return M7(P(V).then(function(){return D(V,bb)}),function(){return V.db.destroy()})})}),u2.finish();var Qa=ZK(ma),X=Qa[1];return Y.get("_design/"+Qa[0]).then(function(V){var ha=V.views&&V.views[X];if(!ha)throw new LF("ddoc "+V._id+" has no view named "+X);b(V,X);y(bb,ha);return aV(Y,ma,ha.map,ha.reduce,!1,d).then(function(xa){return"ok"===bb.stale||"update_after"===bb.stale?("update_after"===bb.stale&&rs(function(){P(xa)}),
D(xa,bb)):P(xa).then(function(){return D(xa,bb)})})})}return{query:function(Y,ma,bb){var Qa=this;"function"===typeof ma&&(bb=ma,ma={});ma=ma?v(ma):{};"function"===typeof Y&&(Y={map:Y});var X=Promise.resolve().then(function(){return aa(Qa,Y,ma)});WU(X,bb);return X},viewCleanup:L7(function(){return"function"===typeof this._viewCleanup?B(this):qs(this)?L(this):N(this)})}}("mrviews",function(d,h){return"function"===typeof d&&2===d.length?function(n){return d(n,h)}:ZU(d.toString(),h)},function(d){d=d.toString();
if(/^_sum/.test(d))var h=Ifa;else if(/^_count/.test(d))h=Jfa;else if(/^_stats/.test(d))h=Kfa;else{if(/^_/.test(d))throw Error(d+" is not a supported reduce function.");h=void 0}return h?h:ZU(d)},function(d,h){var n=d.views&&d.views[h];if("string"!==typeof n.map)throw new LF("ddoc "+d._id+" has no string view named "+h+", instead found object of type: "+typeof n.map);});YB.prototype.writeCheckpoint=function(d,h){var n=this;return this.updateTarget(d,h).then(function(){return n.updateSource(d,h)})};
YB.prototype.updateTarget=function(d,h){return this.opts.writeTargetCheckpoint?$K(this.target,this.id,d,h,this.returnValue):Promise.resolve(!0)};YB.prototype.updateSource=function(d,h){if(this.opts.writeSourceCheckpoint){var n=this;return $K(this.src,this.id,d,h,this.returnValue).catch(function(b){if(eV(b))return n.opts.writeSourceCheckpoint=!1,!0;throw b;})}return Promise.resolve(!0)};var w2={undefined:function(d,h){return 0===Tl(d.last_seq,h.last_seq)?h.last_seq:0},1:function(d,h){d=h.session_id===
d.session_id?{last_seq:h.last_seq,history:h.history}:dV(h.history,d.history);return d.last_seq}};YB.prototype.getCheckpoint=function(){var d=this;return d.opts&&d.opts.writeSourceCheckpoint&&!d.opts.writeTargetCheckpoint?d.src.get(d.id).then(function(h){return h.last_seq||0}).catch(function(h){if(404!==h.status)throw h;return 0}):d.target.get(d.id).then(function(h){return d.opts&&d.opts.writeTargetCheckpoint&&!d.opts.writeSourceCheckpoint?h.last_seq||0:d.src.get(d.id).then(function(n){if(h.version!==
n.version)return 0;var b=h.version?h.version.toString():"undefined";return b in w2?w2[b](h,n):0},function(n){if(404===n.status&&h.last_seq)return d.src.put({_id:d.id,last_seq:0}).then(function(){return 0},function(b){return eV(b)?(d.opts.writeSourceCheckpoint=!1,h.last_seq):0});throw n;})}).catch(function(h){if(404!==h.status)throw h;return 0})};lr(NF,Qn.EventEmitter);NF.prototype.cancel=function(){this.cancelled=!0;this.state="cancelled";this.emit("cancel")};NF.prototype.ready=function(d,h){function n(){b.cancel()}
var b=this;b._readyCalled||(b._readyCalled=!0,d.once("destroyed",n),h.once("destroyed",n),b.once("complete",function(){d.removeListener("destroyed",n);h.removeListener("destroyed",n)}))};lr(cL,Qn.EventEmitter);cL.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())};Mh.plugin(function(d){d.adapter("idb",TU,!0)}).plugin(function(d){d.adapter("http",UK,!1);d.adapter("https",UK,!1)}).plugin({query:function(d,h,n){return v2.query.call(this,d,h,n)},viewCleanup:function(d){return v2.viewCleanup.call(this,
d)}}).plugin(function(d){d.replicate=bL;d.sync=Y7;Object.defineProperty(d.prototype,"replicate",{get:function(){var h=this;"undefined"===typeof this.replicateMethods&&(this.replicateMethods={from:function(n,b,e){return h.constructor.replicate(n,h,b,e)},to:function(n,b,e){return h.constructor.replicate(h,n,b,e)}});return this.replicateMethods}});d.prototype.sync=function(h,n,b){return this.constructor.sync(this,h,n,b)}});var Lfa=Ffa=Mh,tw={};Object.defineProperty(tw,"__esModule",{value:!0});Gv.prototype.get=
function(d){return this._store["$"+d]};Gv.prototype.set=function(d,h){this._store["$"+d]=h;return!0};Gv.prototype.has=function(d){return"$"+d in this._store};Gv.prototype.delete=function(d){d="$"+d;var h=d in this._store;delete this._store[d];return h};Gv.prototype.forEach=function(d){for(var h=Object.keys(this._store),n=0,b=h.length;n<b;n++){var e=h[n],m=this._store[e];e=e.substring(1);d(m,e)}};Object.defineProperty(Gv.prototype,"size",{get:function(){return Object.keys(this._store).length}});ZB.prototype.add=
function(d){return this._store.set(d,!0)};ZB.prototype.has=function(d){return this._store.has(d)};ZB.prototype.forEach=function(d){this._store.forEach(function(h,n){d(n)})};Object.defineProperty(ZB.prototype,"size",{get:function(){return this._store.size}});(function(){if("undefined"===typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var d=Object.getOwnPropertyDescriptor(Map,Symbol.species);return d&&"get"in d&&Map[Symbol.species]===Map})()?(tw.Set=Set,tw.Map=Map):(tw.Set=
ZB,tw.Map=Gv);var bP={},cP=zi;bP.test=function(){return"undefined"!==typeof cP&&!cP.browser};bP.install=function(d){return function(){cP.nextTick(d)}};var x2="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,dP="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,eP={},y2=dP.MutationObserver||dP.WebKitMutationObserver;eP.test=function(){return y2};eP.install=function(d){var h=0;d=new y2(d);var n=dP.document.createTextNode("");d.observe(n,
{characterData:!0});return function(){n.data=h=++h%2}};var fP="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,oI="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Mfa={},CD=[bP,{test:function(){return"function"===typeof x2.queueMicrotask},install:function(d){return function(){x2.queueMicrotask(d)}}},eP,{test:function(){return fP.setImmediate?!1:"undefined"!==typeof fP.MessageChannel},install:function(d){var h=new fP.MessageChannel;h.port1.onmessage=
d;return function(){h.port2.postMessage(0)}}},{test:function(){return"document"in oI&&"onreadystatechange"in oI.document.createElement("script")},install:function(d){return function(){var h=oI.document.createElement("script");h.onreadystatechange=function(){d();h.onreadystatechange=null;h.parentNode.removeChild(h);h=null};oI.document.documentElement.appendChild(h);return d}}},{test:function(){return!0},install:function(d){return function(){setTimeout(d,0)}}}],Iz,wx,$B=-1,Hv=[],dL=!1,DD=-1,Nfa=CD.length;
for(;++DD<Nfa;)if(CD[DD]&&CD[DD].test&&CD[DD].test()){var Ofa=CD[DD].install(gV);break}hV.prototype.run=function(){var d=this.fun,h=this.array;switch(h.length){case 0:return d();case 1:return d(h[0]);case 2:return d(h[0],h[1]);case 3:return d(h[0],h[1],h[2]);default:return d.apply(null,h)}};var Ci=Mfa=function(d){var h=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)h[n-1]=arguments[n];Hv.push(new hV(d,h));dL||Iz||(dL=!0,Ofa())},kg={};Object.defineProperty(kg,"__esModule",
{value:!0});(sk&&"object"===typeof sk&&"default"in sk?sk["default"]:sk)(Dj,Error);Dj.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var Pfa=new Dj(401,"unauthorized","Name or password is incorrect."),Qfa=new Dj(400,"bad_request","Missing JSON list of 'docs'"),Rfa=new Dj(404,"not_found","missing"),Sfa=new Dj(409,"conflict","Document update conflict"),Tfa=new Dj(400,"bad_request","_id field must contain a string"),Ufa=
new Dj(412,"missing_id","_id is required for puts"),Vfa=new Dj(400,"bad_request","Only reserved document ids may start with underscore."),Wfa=new Dj(412,"precondition_failed","Database not open"),z2=new Dj(500,"unknown_error","Database encountered an unknown error"),Xfa=new Dj(500,"badarg","Some query argument is invalid"),Yfa=new Dj(400,"invalid_request","Request was invalid"),Zfa=new Dj(400,"query_parse_error","Some query parameter is invalid"),$fa=new Dj(500,"doc_validation","Bad special document member"),
aga=new Dj(400,"bad_request","Something wrong with the request"),bga=new Dj(400,"bad_request","Document must be a JSON object"),cga=new Dj(404,"not_found","Database not found"),dga=new Dj(500,"indexed_db_went_bad","unknown"),ega=new Dj(500,"web_sql_went_bad","unknown"),fga=new Dj(500,"levelDB_went_went_bad","unknown"),gga=new Dj(403,"forbidden","Forbidden by design doc validate_doc_update function"),hga=new Dj(400,"bad_request","Invalid rev format"),iga=new Dj(412,"file_exists","The database could not be created, the file already exists."),
jga=new Dj(412,"missing_stub","A pre-existing attachment stub wasn't found"),kga=new Dj(413,"invalid_url","Provided URL is invalid");kg.UNAUTHORIZED=Pfa;kg.MISSING_BULK_DOCS=Qfa;kg.MISSING_DOC=Rfa;kg.REV_CONFLICT=Sfa;kg.INVALID_ID=Tfa;kg.MISSING_ID=Ufa;kg.RESERVED_ID=Vfa;kg.NOT_OPEN=Wfa;kg.UNKNOWN_ERROR=z2;kg.BAD_ARG=Xfa;kg.INVALID_REQUEST=Yfa;kg.QUERY_PARSE_ERROR=Zfa;kg.DOC_VALIDATION=$fa;kg.BAD_REQUEST=aga;kg.NOT_AN_OBJECT=bga;kg.DB_MISSING=cga;kg.WSQ_ERROR=ega;kg.LDB_ERROR=fga;kg.FORBIDDEN=gga;
kg.INVALID_REV=hga;kg.FILE_EXISTS=iga;kg.MISSING_STUB=jga;kg.IDB_ERROR=dga;kg.INVALID_URL=kga;kg.createError=function(d,h){function n(b){for(var e=Object.getOwnPropertyNames(d),m=0,a=e.length;m<a;m++)"function"!==typeof d[e[m]]&&(this[e[m]]=d[e[m]]);void 0!==b&&(this.reason=b)}n.prototype=Dj.prototype;return new n(h)};kg.generateErrorFromResponse=function(d){if("object"!==typeof d){var h=d;d=z2;d.data=h}"error"in d&&"conflict"===d.error&&(d.name="conflict",d.status=409);"name"in d||(d.name=d.error||
"unknown");"status"in d||(d.status=500);"message"in d||(d.message=d.message||d.reason);return d};var lga="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,gP=Object.prototype.toString,pI=function(d){return!(lga&&d&&"object"==typeof d&&Symbol.toStringTag in d)&&"[object Arguments]"===gP.call(d)},A2=function(d){return!!pI(d)||null!==d&&"object"==typeof d&&"number"==typeof d.length&&0<=d.length&&"[object Array]"!==gP.call(d)&&"[object Function]"===gP.call(d.callee)},mga=function(){return pI(arguments)}();
pI.isLegacyArguments=A2;var nga=mga?pI:A2,oga=Object.prototype.toString,pga=Function.prototype.toString,qga=/^\s*(?:function)?\*/,B2="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,C2=Object.getPrototypeOf;a:if(B2){try{var qI=Function("return function*() {}")();break a}catch(d){}qI=void 0}else qI=!1;var rga=qI?C2(qI):{},zh="function"==typeof Object.create?function(d,h){h&&(d.super_=h,d.prototype=Object.create(h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}))}:
function(d,h){if(h){d.super_=h;var n=function(){};n.prototype=h.prototype;d.prototype=new n;d.prototype.constructor=d}},D2=function(d){return d&&"object"==typeof d&&"function"==typeof d.copy&&"function"==typeof d.fill&&"function"==typeof d.readUInt8},hi={},$7=D2,BV="undefined"!=typeof BigInt,fL="undefined"!=typeof Symbol,Do=fL&&void 0!==Symbol.toStringTag,Rn="undefined"!=typeof Uint8Array,sga="undefined"!=typeof ArrayBuffer;if(Rn&&Do)var tga=Object.getPrototypeOf(Uint8Array.prototype),Fp=xx(Object.getOwnPropertyDescriptor(tga,
Symbol.toStringTag).get);var rk=xx(Object.prototype.toString),a8=xx(Number.prototype.valueOf),b8=xx(String.prototype.valueOf),c8=xx(Boolean.prototype.valueOf);if(BV)var d8=xx(BigInt.prototype.valueOf);if(fL)var e8=xx(Symbol.prototype.valueOf);hi.isArgumentsObject=nga;hi.isGeneratorFunction=function(d){return"function"==typeof d&&(!!qga.test(pga.call(d))||(B2?C2(d)===rga:"[object GeneratorFunction]"===oga.call(d)))};hi.isPromise=function(d){return"undefined"!=typeof Promise&&d instanceof Promise||
null!==d&&"object"==typeof d&&"function"==typeof d.then&&"function"==typeof d.catch};hi.isArrayBufferView=function(d){return sga&&ArrayBuffer.isView?ArrayBuffer.isView(d):iV(d)||vV(d)};hi.isTypedArray=iV;hi.isUint8Array=jV;hi.isUint8ClampedArray=kV;hi.isUint16Array=lV;hi.isUint32Array=mV;hi.isInt8Array=nV;hi.isInt16Array=oV;hi.isInt32Array=pV;hi.isFloat32Array=qV;hi.isFloat64Array=rV;hi.isBigInt64Array=sV;hi.isBigUint64Array=tV;PF.working="undefined"!=typeof Map&&PF(new Map);hi.isMap=function(d){return"undefined"!=
typeof Map&&(PF.working?PF(d):d instanceof Map)};QF.working="undefined"!=typeof Set&&QF(new Set);hi.isSet=function(d){return"undefined"!=typeof Set&&(QF.working?QF(d):d instanceof Set)};RF.working="undefined"!=typeof WeakMap&&RF(new WeakMap);hi.isWeakMap=function(d){return"undefined"!=typeof WeakMap&&(RF.working?RF(d):d instanceof WeakMap)};eL.working="undefined"!=typeof WeakSet&&eL(new WeakSet);hi.isWeakSet=function(d){return eL(d)};SF.working="undefined"!=typeof ArrayBuffer&&SF(new ArrayBuffer);
hi.isArrayBuffer=uV;TF.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&TF(new DataView(new ArrayBuffer(1),0,1));hi.isDataView=vV;UF.working="undefined"!=typeof SharedArrayBuffer&&UF(new SharedArrayBuffer);hi.isSharedArrayBuffer=wV;hi.isAsyncFunction=function(d){return"[object AsyncFunction]"===rk(d)};hi.isMapIterator=function(d){return"[object Map Iterator]"===rk(d)};hi.isSetIterator=function(d){return"[object Set Iterator]"===rk(d)};hi.isGeneratorObject=function(d){return"[object Generator]"===
rk(d)};hi.isWebAssemblyCompiledModule=function(d){return"[object WebAssembly.Module]"===rk(d)};hi.isNumberObject=xV;hi.isStringObject=yV;hi.isBooleanObject=zV;hi.isBigIntObject=AV;hi.isSymbolObject=CV;hi.isBoxedPrimitive=function(d){return xV(d)||yV(d)||zV(d)||AV(d)||CV(d)};hi.isAnyArrayBuffer=function(d){return Rn&&(uV(d)||wV(d))};["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(d){Object.defineProperty(hi,d,{enumerable:!1,value:function(){throw Error(d+" is not supported in userland");
}})});var ED="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Xg={},Us=zi,E2=Object.getOwnPropertyDescriptors||function(d){for(var h=Object.keys(d),n={},b=0;b<h.length;b++)n[h[b]]=Object.getOwnPropertyDescriptor(d,h[b]);return n},uga=/%[sdj%]/g;Xg.format=function(d){if(!XF(d)){for(var h=[],n=0;n<arguments.length;n++)h.push(Iv(arguments[n]));return h.join(" ")}n=1;var b=arguments,e=b.length;h=String(d).replace(uga,function(a){if("%%"===a)return"%";if(n>=e)return a;switch(a){case "%s":return String(b[n++]);
case "%d":return Number(b[n++]);case "%j":try{return JSON.stringify(b[n++])}catch(g){return"[Circular]"}default:return a}});for(var m=b[n];n<e;m=b[++n])null!==m&&Jz(m)?h+=" "+Iv(m):h+=" "+m;return h};Xg.deprecate=function(d,h){if(void 0!==Us&&!0===Us.noDeprecation)return d;if(void 0===Us)return function(){return Xg.deprecate(d,h).apply(this||ED,arguments)};var n=!1;return function(){if(!n){if(Us.throwDeprecation)throw Error(h);Us.traceDeprecation?console.trace(h):console.error(h);n=!0}return d.apply(this||
ED,arguments)}};var rI={},F2=/^$/;if(Us.env.NODE_DEBUG){var hP=Us.env.NODE_DEBUG;hP=hP.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase();F2=new RegExp("^"+hP+"$","i")}Xg.debuglog=function(d){if(d=d.toUpperCase(),!rI[d])if(F2.test(d)){var h=Us.pid;rI[d]=function(){var n=Xg.format.apply(Xg,arguments);console.error("%s %d: %s",d,h,n)}}else rI[d]=function(){};return rI[d]};Xg.inspect=Iv;Iv.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,
39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Iv.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};Xg.types=hi;Xg.isArray=EV;Xg.isBoolean=gL;Xg.isNull=function(d){return null===d};Xg.isNullOrUndefined=function(d){return null==d};Xg.isNumber=DV;Xg.isString=XF;Xg.isSymbol=function(d){return"symbol"==typeof d};Xg.isUndefined=yx;Xg.isRegExp=cC;Xg.types.isRegExp=
cC;Xg.isObject=Jz;Xg.isDate=YF;Xg.types.isDate=YF;Xg.isError=bC;Xg.types.isNativeError=bC;Xg.isFunction=WF;Xg.isPrimitive=function(d){return null===d||"boolean"==typeof d||"number"==typeof d||"string"==typeof d||"symbol"==typeof d||void 0===d};Xg.isBuffer=D2;var i8="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");Xg.log=function(){console.log("%s - %s",h8(),Xg.format.apply(Xg,arguments))};Xg.inherits=zh;Xg._extend=function(d,h){if(!h||!Jz(h))return d;for(var n=Object.keys(h),b=n.length;b--;)d[n[b]]=
h[n[b]];return d};var my="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;Xg.promisify=function(d){function h(){for(var n,b,e=new Promise(function(g,l){n=g;b=l}),m=[],a=0;a<arguments.length;a++)m.push(arguments[a]);m.push(function(g,l){g?b(g):n(l)});try{d.apply(this||ED,m)}catch(g){b(g)}return e}if("function"!=typeof d)throw new TypeError('The "original" argument must be of type Function');if(my&&d[my]){if("function"!=typeof(h=d[my]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');
return Object.defineProperty(h,my,{value:h,enumerable:!1,writable:!1,configurable:!0}),h}return Object.setPrototypeOf(h,Object.getPrototypeOf(d)),my&&Object.defineProperty(h,my,{value:h,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(h,E2(d))};Xg.promisify.custom=my;Xg.callbackify=function(d){function h(){for(var n=[],b=0;b<arguments.length;b++)n.push(arguments[b]);var e=n.pop();if("function"!=typeof e)throw new TypeError("The last argument must be of type Function");var m=this||
ED,a=function(){return e.apply(m,arguments)};d.apply(this||ED,n).then(function(g){Us.nextTick(a.bind(null,null,g))},function(g){Us.nextTick(j8.bind(null,g,a))})}if("function"!=typeof d)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(h,Object.getPrototypeOf(d)),Object.defineProperties(h,E2(d)),h};for(var ts=[],hq=[],vga="undefined"!=typeof Uint8Array?Uint8Array:Array,KA=0;64>KA;++KA)ts[KA]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[KA],
hq["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(KA)]=KA;hq[45]=62;hq[95]=63;var Rh={},oL={byteLength:function(d){d=FV(d);var h=d[1];return 3*(d[0]+h)/4-h},toByteArray:function(d){var h=FV(d);var n=h[0];h=h[1];var b=new vga(3*(n+h)/4-h),e=0,m=0<h?n-4:n;for(n=0;n<m;n+=4){var a=hq[d.charCodeAt(n)]<<18|hq[d.charCodeAt(n+1)]<<12|hq[d.charCodeAt(n+2)]<<6|hq[d.charCodeAt(n+3)];b[e++]=a>>16&255;b[e++]=a>>8&255;b[e++]=255&a}2===h&&(a=hq[d.charCodeAt(n)]<<2|hq[d.charCodeAt(n+
1)]>>4,b[e++]=255&a);1===h&&(a=hq[d.charCodeAt(n)]<<10|hq[d.charCodeAt(n+1)]<<4|hq[d.charCodeAt(n+2)]>>2,b[e++]=a>>8&255,b[e++]=255&a);return b},fromByteArray:function(d){for(var h,n=d.length,b=n%3,e=[],m=0,a=n-b;m<a;m+=16383)e.push(k8(d,m,m+16383>a?a:m+16383));1===b?(h=d[n-1],e.push(ts[h>>2]+ts[h<<4&63]+"==")):2===b&&(h=(d[n-2]<<8)+d[n-1],e.push(ts[h>>10]+ts[h>>4&63]+ts[h<<2&63]+"="));return e.join("")}},Kz={read:function(d,h,n,b,e){var m=8*e-b-1;var a=(1<<m)-1,g=a>>1,l=-7;e=n?e-1:0;var q=n?-1:1,
r=d[h+e];e+=q;n=r&(1<<-l)-1;r>>=-l;for(l+=m;0<l;n=256*n+d[h+e],e+=q,l-=8);m=n&(1<<-l)-1;n>>=-l;for(l+=b;0<l;m=256*m+d[h+e],e+=q,l-=8);if(0===n)n=1-g;else{if(n===a)return m?NaN:1/0*(r?-1:1);m+=Math.pow(2,b);n-=g}return(r?-1:1)*m*Math.pow(2,n-b)},write:function(d,h,n,b,e,m){var a,g,l,q=8*m-e-1,r=(1<<q)-1,u=r>>1,v=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;m=b?0:m-1;b=b?1:-1;var y=0>h||0===h&&0>1/h?1:0;h=Math.abs(h);for(isNaN(h)||h===1/0?(g=isNaN(h)?1:0,a=r):(a=Math.floor(Math.log(h)/Math.LN2),1>h*(l=
Math.pow(2,-a))&&(a--,l*=2),2<=(h+=1<=a+u?v/l:v*Math.pow(2,1-u))*l&&(a++,l/=2),a+u>=r?(g=0,a=r):1<=a+u?(g=(h*l-1)*Math.pow(2,e),a+=u):(g=h*Math.pow(2,u-1)*Math.pow(2,e),a=0));8<=e;d[n+m]=255&g,m+=b,g/=256,e-=8);a=a<<e|g;for(q+=e;0<q;d[n+m]=255&a,m+=b,a/=256,q-=8);d[n+m-b]|=128*y}},G2="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;Rh.Buffer=ue;Rh.SlowBuffer=function(d){+d!=d&&(d=0);return ue.alloc(+d)};Rh.INSPECT_MAX_BYTES=50;Rh.kMaxLength=2147483647;
ue.TYPED_ARRAY_SUPPORT=function(){try{var d=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(d,h),42===d.foo()}catch(n){return!1}}();ue.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(ue.prototype,"parent",{enumerable:!0,
get:function(){if(ue.isBuffer(this))return this.buffer}});Object.defineProperty(ue.prototype,"offset",{enumerable:!0,get:function(){if(ue.isBuffer(this))return this.byteOffset}});ue.poolSize=8192;ue.from=function(d,h,n){return GV(d,h,n)};Object.setPrototypeOf(ue.prototype,Uint8Array.prototype);Object.setPrototypeOf(ue,Uint8Array);ue.alloc=function(d,h,n){return IV(d),0>=d?gu(d):void 0!==h?"string"==typeof n?gu(d).fill(h,n):gu(d).fill(h):gu(d)};ue.allocUnsafe=function(d){return kL(d)};ue.allocUnsafeSlow=
function(d){return kL(d)};ue.isBuffer=function(d){return null!=d&&!0===d._isBuffer&&d!==ue.prototype};ue.compare=function(d,h){if(hu(d,Uint8Array)&&(d=ue.from(d,d.offset,d.byteLength)),hu(h,Uint8Array)&&(h=ue.from(h,h.offset,h.byteLength)),!ue.isBuffer(d)||!ue.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===h)return 0;for(var n=d.length,b=h.length,e=0,m=Math.min(n,b);e<m;++e)if(d[e]!==h[e]){n=d[e];b=h[e];break}return n<b?-1:b<n?1:0};
ue.isEncoding=function(d){switch(String(d).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};ue.concat=function(d,h){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(0===d.length)return ue.alloc(0);var n;if(void 0===h)for(n=h=0;n<d.length;++n)h+=d[n].length;h=ue.allocUnsafe(h);var b=0;for(n=0;n<d.length;++n){var e=d[n];
if(hu(e,Uint8Array)&&(e=ue.from(e)),!ue.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(h,b);b+=e.length}return h};ue.byteLength=HV;ue.prototype._isBuffer=!0;ue.prototype.swap16=function(){var d=this.length;if(0!=d%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var h=0;h<d;h+=2)zx(this,h,h+1);return this};ue.prototype.swap32=function(){var d=this.length;if(0!=d%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var h=
0;h<d;h+=4)zx(this,h,h+3),zx(this,h+1,h+2);return this};ue.prototype.swap64=function(){var d=this.length;if(0!=d%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var h=0;h<d;h+=8)zx(this,h,h+7),zx(this,h+1,h+6),zx(this,h+2,h+5),zx(this,h+3,h+4);return this};ue.prototype.toString=function(){var d=this.length;return 0===d?"":0===arguments.length?KV(this,0,d):m8.apply(this,arguments)};ue.prototype.toLocaleString=ue.prototype.toString;ue.prototype.equals=function(d){if(!ue.isBuffer(d))throw new TypeError("Argument must be a Buffer");
return this===d||0===ue.compare(this,d)};ue.prototype.inspect=function(){var d="",h=Rh.INSPECT_MAX_BYTES;return d=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(d+=" ... "),"<Buffer "+d+">"};G2&&(ue.prototype[G2]=ue.prototype.inspect);ue.prototype.compare=function(d,h,n,b,e){if(hu(d,Uint8Array)&&(d=ue.from(d,d.offset,d.byteLength)),!ue.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(void 0===h&&
(h=0),void 0===n&&(n=d?d.length:0),void 0===b&&(b=0),void 0===e&&(e=this.length),0>h||n>d.length||0>b||e>this.length)throw new RangeError("out of range index");if(b>=e&&h>=n)return 0;if(b>=e)return-1;if(h>=n)return 1;if(this===d)return 0;var m=(e>>>=0)-(b>>>=0),a=(n>>>=0)-(h>>>=0),g=Math.min(m,a);b=this.slice(b,e);d=d.slice(h,n);for(h=0;h<g;++h)if(b[h]!==d[h]){m=b[h];a=d[h];break}return m<a?-1:a<m?1:0};ue.prototype.includes=function(d,h,n){return-1!==this.indexOf(d,h,n)};ue.prototype.indexOf=function(d,
h,n){return LV(this,d,h,n,!0)};ue.prototype.lastIndexOf=function(d,h,n){return LV(this,d,h,n,!1)};ue.prototype.write=function(d,h,n,b){if(void 0===h)b="utf8",n=this.length,h=0;else if(void 0===n&&"string"==typeof h)b=h,n=this.length,h=0;else{if(!isFinite(h))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");h>>>=0;isFinite(n)?(n>>>=0,void 0===b&&(b="utf8")):(b=n,n=void 0)}var e=this.length-h;if((void 0===n||n>e)&&(n=e),0<d.length&&(0>n||0>h)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");
b||(b="utf8");for(e=!1;;)switch(b){case "hex":a:{h=Number(h)||0;b=this.length-h;n?(n=Number(n))>b&&(n=b):n=b;b=d.length;n>b/2&&(n=b/2);for(b=0;b<n;++b){e=parseInt(d.substr(2*b,2),16);if(e!=e){n=b;break a}this[h+b]=e}n=b}return n;case "utf8":case "utf-8":return ZF(nL(d,this.length-h),this,h,n);case "ascii":return NV(this,d,h,n);case "latin1":case "binary":return NV(this,d,h,n);case "base64":return ZF(JV(d),this,h,n);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=n;e=this.length-h;for(var m=
[],a=0;a<d.length&&!(0>(e-=2));++a){var g=d.charCodeAt(a);n=g>>8;g%=256;m.push(g);m.push(n)}return ZF(m,this,h,b);default:if(e)throw new TypeError("Unknown encoding: "+b);b=(""+b).toLowerCase();e=!0}};ue.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};ue.prototype.slice=function(d,h){var n=this.length;0>(d=~~d)?0>(d+=n)&&(d=0):d>n&&(d=n);0>(h=void 0===h?n:~~h)?0>(h+=n)&&(h=0):h>n&&(h=n);h<d&&(h=d);d=this.subarray(d,h);return Object.setPrototypeOf(d,
ue.prototype),d};ue.prototype.readUIntLE=function(d,h,n){d>>>=0;h>>>=0;n||Ul(d,h,this.length);n=this[d];for(var b=1,e=0;++e<h&&(b*=256);)n+=this[d+e]*b;return n};ue.prototype.readUIntBE=function(d,h,n){d>>>=0;h>>>=0;n||Ul(d,h,this.length);n=this[d+--h];for(var b=1;0<h&&(b*=256);)n+=this[d+--h]*b;return n};ue.prototype.readUInt8=function(d,h){return d>>>=0,h||Ul(d,1,this.length),this[d]};ue.prototype.readUInt16LE=function(d,h){return d>>>=0,h||Ul(d,2,this.length),this[d]|this[d+1]<<8};ue.prototype.readUInt16BE=
function(d,h){return d>>>=0,h||Ul(d,2,this.length),this[d]<<8|this[d+1]};ue.prototype.readUInt32LE=function(d,h){return d>>>=0,h||Ul(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+16777216*this[d+3]};ue.prototype.readUInt32BE=function(d,h){return d>>>=0,h||Ul(d,4,this.length),16777216*this[d]+(this[d+1]<<16|this[d+2]<<8|this[d+3])};ue.prototype.readIntLE=function(d,h,n){d>>>=0;h>>>=0;n||Ul(d,h,this.length);n=this[d];for(var b=1,e=0;++e<h&&(b*=256);)n+=this[d+e]*b;return n>=128*b&&(n-=Math.pow(2,
8*h)),n};ue.prototype.readIntBE=function(d,h,n){d>>>=0;h>>>=0;n||Ul(d,h,this.length);n=h;for(var b=1,e=this[d+--n];0<n&&(b*=256);)e+=this[d+--n]*b;return e>=128*b&&(e-=Math.pow(2,8*h)),e};ue.prototype.readInt8=function(d,h){return d>>>=0,h||Ul(d,1,this.length),128&this[d]?-1*(255-this[d]+1):this[d]};ue.prototype.readInt16LE=function(d,h){d>>>=0;h||Ul(d,2,this.length);d=this[d]|this[d+1]<<8;return 32768&d?4294901760|d:d};ue.prototype.readInt16BE=function(d,h){d>>>=0;h||Ul(d,2,this.length);d=this[d+
1]|this[d]<<8;return 32768&d?4294901760|d:d};ue.prototype.readInt32LE=function(d,h){return d>>>=0,h||Ul(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24};ue.prototype.readInt32BE=function(d,h){return d>>>=0,h||Ul(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]};ue.prototype.readFloatLE=function(d,h){return d>>>=0,h||Ul(d,4,this.length),Kz.read(this,d,!0,23,4)};ue.prototype.readFloatBE=function(d,h){return d>>>=0,h||Ul(d,4,this.length),Kz.read(this,d,!1,23,4)};ue.prototype.readDoubleLE=
function(d,h){return d>>>=0,h||Ul(d,8,this.length),Kz.read(this,d,!0,52,8)};ue.prototype.readDoubleBE=function(d,h){return d>>>=0,h||Ul(d,8,this.length),Kz.read(this,d,!1,52,8)};ue.prototype.writeUIntLE=function(d,h,n,b){(d=+d,h>>>=0,n>>>=0,b)||Sn(this,d,h,n,Math.pow(2,8*n)-1,0);b=1;var e=0;for(this[h]=255&d;++e<n&&(b*=256);)this[h+e]=d/b&255;return h+n};ue.prototype.writeUIntBE=function(d,h,n,b){(d=+d,h>>>=0,n>>>=0,b)||Sn(this,d,h,n,Math.pow(2,8*n)-1,0);b=n-1;var e=1;for(this[h+b]=255&d;0<=--b&&
(e*=256);)this[h+b]=d/e&255;return h+n};ue.prototype.writeUInt8=function(d,h,n){return d=+d,h>>>=0,n||Sn(this,d,h,1,255,0),this[h]=255&d,h+1};ue.prototype.writeUInt16LE=function(d,h,n){return d=+d,h>>>=0,n||Sn(this,d,h,2,65535,0),this[h]=255&d,this[h+1]=d>>>8,h+2};ue.prototype.writeUInt16BE=function(d,h,n){return d=+d,h>>>=0,n||Sn(this,d,h,2,65535,0),this[h]=d>>>8,this[h+1]=255&d,h+2};ue.prototype.writeUInt32LE=function(d,h,n){return d=+d,h>>>=0,n||Sn(this,d,h,4,4294967295,0),this[h+3]=d>>>24,this[h+
2]=d>>>16,this[h+1]=d>>>8,this[h]=255&d,h+4};ue.prototype.writeUInt32BE=function(d,h,n){return d=+d,h>>>=0,n||Sn(this,d,h,4,4294967295,0),this[h]=d>>>24,this[h+1]=d>>>16,this[h+2]=d>>>8,this[h+3]=255&d,h+4};ue.prototype.writeIntLE=function(d,h,n,b){(d=+d,h>>>=0,b)||(b=Math.pow(2,8*n-1),Sn(this,d,h,n,b-1,-b));b=0;var e=1,m=0;for(this[h]=255&d;++b<n&&(e*=256);)0>d&&0===m&&0!==this[h+b-1]&&(m=1),this[h+b]=(d/e>>0)-m&255;return h+n};ue.prototype.writeIntBE=function(d,h,n,b){(d=+d,h>>>=0,b)||(b=Math.pow(2,
8*n-1),Sn(this,d,h,n,b-1,-b));b=n-1;var e=1,m=0;for(this[h+b]=255&d;0<=--b&&(e*=256);)0>d&&0===m&&0!==this[h+b+1]&&(m=1),this[h+b]=(d/e>>0)-m&255;return h+n};ue.prototype.writeInt8=function(d,h,n){return d=+d,h>>>=0,n||Sn(this,d,h,1,127,-128),0>d&&(d=255+d+1),this[h]=255&d,h+1};ue.prototype.writeInt16LE=function(d,h,n){return d=+d,h>>>=0,n||Sn(this,d,h,2,32767,-32768),this[h]=255&d,this[h+1]=d>>>8,h+2};ue.prototype.writeInt16BE=function(d,h,n){return d=+d,h>>>=0,n||Sn(this,d,h,2,32767,-32768),this[h]=
d>>>8,this[h+1]=255&d,h+2};ue.prototype.writeInt32LE=function(d,h,n){return d=+d,h>>>=0,n||Sn(this,d,h,4,2147483647,-2147483648),this[h]=255&d,this[h+1]=d>>>8,this[h+2]=d>>>16,this[h+3]=d>>>24,h+4};ue.prototype.writeInt32BE=function(d,h,n){return d=+d,h>>>=0,n||Sn(this,d,h,4,2147483647,-2147483648),0>d&&(d=4294967295+d+1),this[h]=d>>>24,this[h+1]=d>>>16,this[h+2]=d>>>8,this[h+3]=255&d,h+4};ue.prototype.writeFloatLE=function(d,h,n){return PV(this,d,h,!0,n)};ue.prototype.writeFloatBE=function(d,h,n){return PV(this,
d,h,!1,n)};ue.prototype.writeDoubleLE=function(d,h,n){return QV(this,d,h,!0,n)};ue.prototype.writeDoubleBE=function(d,h,n){return QV(this,d,h,!1,n)};ue.prototype.copy=function(d,h,n,b){if(!ue.isBuffer(d))throw new TypeError("argument should be a Buffer");if((n||(n=0),b||0===b||(b=this.length),h>=d.length&&(h=d.length),h||(h=0),0<b&&b<n&&(b=n),b===n)||0===d.length||0===this.length)return 0;if(0>h)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("Index out of range");
if(0>b)throw new RangeError("sourceEnd out of bounds");b>this.length&&(b=this.length);d.length-h<b-n&&(b=d.length-h+n);var e=b-n;if(this===d&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(h,n,b);else if(this===d&&n<h&&h<b)for(b=e-1;0<=b;--b)d[b+h]=this[b+n];else Uint8Array.prototype.set.call(d,this.subarray(n,b),h);return e};ue.prototype.fill=function(d,h,n,b){if("string"==typeof d){if("string"==typeof h?(b=h,h=0,n=this.length):"string"==typeof n&&(b=n,n=this.length),void 0!==
b&&"string"!=typeof b)throw new TypeError("encoding must be a string");if("string"==typeof b&&!ue.isEncoding(b))throw new TypeError("Unknown encoding: "+b);if(1===d.length){var e=d.charCodeAt(0);("utf8"===b&&128>e||"latin1"===b)&&(d=e)}}else"number"==typeof d?d&=255:"boolean"==typeof d&&(d=Number(d));if(0>h||this.length<h||this.length<n)throw new RangeError("Out of range index");if(n<=h)return this;if(h>>>=0,n=void 0===n?this.length:n>>>0,d||(d=0),"number"==typeof d)for(b=h;b<n;++b)this[b]=d;else{e=
ue.isBuffer(d)?d:ue.from(d,b);var m=e.length;if(0===m)throw new TypeError('The value "'+d+'" is invalid for argument "value"');for(b=0;b<n-h;++b)this[b+h]=e[b%m]}return this};var o8=/[^+/0-9A-Za-z-_]/g,n8=function(){for(var d=Array(256),h=0;16>h;++h)for(var n=16*h,b=0;16>b;++b)d[n+b]="0123456789abcdef"[h]+"0123456789abcdef"[b];return d}(),sI={},tI=Rh,us=tI.Buffer;us.from&&us.alloc&&us.allocUnsafe&&us.allocUnsafeSlow?sI=tI:(RV(tI,sI),sI.Buffer=Ax);Ax.prototype=Object.create(us.prototype);RV(us,Ax);
Ax.from=function(d,h,n){if("number"==typeof d)throw new TypeError("Argument must not be a number");return us(d,h,n)};Ax.alloc=function(d,h,n){if("number"!=typeof d)throw new TypeError("Argument must be a number");d=us(d);return void 0!==h?"string"==typeof n?d.fill(h,n):d.fill(h):d.fill(0),d};Ax.allocUnsafe=function(d){if("number"!=typeof d)throw new TypeError("Argument must be a number");return us(d)};Ax.allocUnsafeSlow=function(d){if("number"!=typeof d)throw new TypeError("Argument must be a number");
return tI.SlowBuffer(d)};var qi=sI,Lz={},pL=qi.Buffer,SV=pL.isEncoding||function(d){switch((d=""+d)&&d.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};Lz.StringDecoder=dC;dC.prototype.write=function(d){if(0===d.length)return"";var h;if(this.lastNeed){if(void 0===(h=this.fillLast(d)))return"";var n=this.lastNeed;this.lastNeed=0}else n=0;return n<d.length?h?h+this.text(d,
n):this.text(d,n):h||""};dC.prototype.end=function(d){d=d&&d.length?this.write(d):"";return this.lastNeed?d+"\ufffd":d};dC.prototype.text=function(d,h){var n=d.length-1;if(n<h)n=0;else{var b=qL(d[n]);n=0<=b?(0<b&&(this.lastNeed=b-1),b):--n<h||-2===b?0:0<=(b=qL(d[n]))?(0<b&&(this.lastNeed=b-2),b):--n<h||-2===b?0:0<=(b=qL(d[n]))?(0<b&&(2===b?b=0:this.lastNeed=b-3),b):0}if(!this.lastNeed)return d.toString("utf8",h);this.lastTotal=n;b=d.length-(n-this.lastNeed);return d.copy(this.lastChar,0,b),d.toString("utf8",
h,b)};dC.prototype.fillLast=function(d){if(this.lastNeed<=d.length)return d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,d.length);this.lastNeed-=d.length};var aG=vs.EventEmitter,Qq={},TV={};Gp("ERR_INVALID_OPT_VALUE",function(d,h){return'The value "'+h+'" is invalid for option "'+d+'"'},TypeError);Gp("ERR_INVALID_ARG_TYPE",function(d,h,n){var b;d=("string"==typeof h&&"not "===
h.substr(0,4)?(b="must not be",h=h.replace(/^not /,"")):b="must be",function(e,m,a){return(void 0===a||a>e.length)&&(a=e.length),e.substring(a-m.length,a)===m}(d," argument"))?"The "+d+" "+b+" "+UV(h,"type"):'The "'+d+'" '+(function(e,m,a){return"number"!=typeof a&&(a=0),!(a+m.length>e.length)&&-1!==e.indexOf(m,a)}(d,".")?"property":"argument")+" "+b+" "+UV(h,"type");return d+=". Received type "+typeof n,d},TypeError);Gp("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Gp("ERR_METHOD_NOT_IMPLEMENTED",
function(d){return"The "+d+" method is not implemented"});Gp("ERR_STREAM_PREMATURE_CLOSE","Premature close");Gp("ERR_STREAM_DESTROYED",function(d){return"Cannot call "+d+" after a stream was destroyed"});Gp("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Gp("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Gp("ERR_STREAM_WRITE_AFTER_END","write after end");Gp("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Gp("ERR_UNKNOWN_ENCODING",function(d){return"Unknown encoding: "+
d},TypeError);Gp("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Qq.codes=TV;var bW=function(){throw Error("Readable.from is not available in the browser");},sL="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,dW=function(d,h){if(rL("noDeprecation"))return d;var n=!1;return function(){if(!n){if(rL("throwDeprecation"))throw Error(h);rL("traceDeprecation")?console.trace(h):console.warn(h);n=!0}return d.apply(this||sL,arguments)}},uI=Rh.Buffer,iP=
Xg.inspect,wga=iP&&iP.custom||"inspect",B8=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");!0;this.tail=this.head=null;this.length=0}var h;return h=[{key:"push",value:function(n){n={data:n,next:null};0<this.length?this.tail.next=n:this.head=n;this.tail=n;++this.length}},{key:"unshift",value:function(n){n={data:n,next:this.head};0===this.length&&(this.tail=n);this.head=n;++this.length}},{key:"shift",value:function(){if(0!==this.length){var n=
this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,n}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(n){if(0===this.length)return"";for(var b=this.head,e=""+b.data;b=b.next;)e+=n+b.data;return e}},{key:"concat",value:function(n){if(0===this.length)return uI.alloc(0);for(var b,e,m=uI.allocUnsafe(n>>>0),a=this.head,g=0;a;)n=a.data,b=m,e=g,void uI.prototype.copy.call(n,b,e),g+=a.data.length,a=a.next;
return m}},{key:"consume",value:function(n,b){var e;return n<this.head.data.length?(e=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):e=n===this.head.data.length?this.shift():b?this._getString(n):this._getBuffer(n),e}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var b=this.head,e=1,m=b.data;for(n-=m.length;b=b.next;){var a=b.data,g=n>a.length?a.length:n;if(g===a.length?m+=a:m+=a.slice(0,n),0==(n-=g)){g===a.length?(++e,b.next?this.head=
b.next:this.head=this.tail=null):(this.head=b,b.data=a.slice(g));break}++e}return this.length-=e,m}},{key:"_getBuffer",value:function(n){var b=uI.allocUnsafe(n),e=this.head,m=1;e.data.copy(b);for(n-=e.data.length;e=e.next;){var a=e.data,g=n>a.length?a.length:n;if(a.copy(b,b.length-n,0,g),0==(n-=g)){g===a.length?(++m,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=a.slice(g));break}++m}return this.length-=m,b}},{key:wga,value:function(n,b){return iP(this,function(e){for(var m=
1;m<arguments.length;m++){var a=null!=arguments[m]?arguments[m]:{};m%2?VV(Object(a),!0).forEach(function(g){var l=a[g];g in e?Object.defineProperty(e,g,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[g]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):VV(Object(a)).forEach(function(g){Object.defineProperty(e,g,Object.getOwnPropertyDescriptor(a,g))})}return e}({},b,{depth:0,customInspect:!1}))}}],w8(d.prototype,h),d}(),ny=zi,$V={destroy:function(d,
h){var n=this,b=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||b?(h?h(d):d&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,ny.nextTick(tL,this,d)):ny.nextTick(tL,this,d)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(d||null,function(e){!h&&e?n._writableState?n._writableState.errorEmitted?ny.nextTick($F,n):
(n._writableState.errorEmitted=!0,ny.nextTick(WV,n,e)):ny.nextTick(WV,n,e):h?(ny.nextTick($F,n),h(e)):ny.nextTick($F,n)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=
!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(d,h){var n=d._readableState,b=d._writableState;n&&n.autoDestroy||b&&b.autoDestroy?d.destroy(h):d.emit("error",h)}},xga=Qq.codes.ERR_INVALID_OPT_VALUE,aW={getHighWaterMark:function(d,h,n,b){h=null!=h.highWaterMark?h.highWaterMark:b?h[n]:null;if(null!=h){if(!isFinite(h)||Math.floor(h)!==h||0>h)throw new xga(b?n:"highWaterMark",h);return Math.floor(h)}return d.objectMode?16:16384}},H2=Qq.codes.ERR_STREAM_PREMATURE_CLOSE,jP,XV=zi,yga=function e(h,
n,b){if("function"==typeof n)return e(h,null,n);n||(n={});b=function(A){var B=!1;return function(){if(!B){B=!0;for(var G=arguments.length,E=Array(G),K=0;K<G;K++)E[K]=arguments[K];A.apply(this,E)}}}(b||x8);var m=n.readable||!1!==n.readable&&h.readable,a=n.writable||!1!==n.writable&&h.writable,g=function(){h.writable||q()},l=h._writableState&&h._writableState.finished,q=function(){a=!1;l=!0;m||b.call(h)},r=h._readableState&&h._readableState.endEmitted,u=function(){m=!1;r=!0;a||b.call(h)},v=function(A){b.call(h,
A)},y=function(){var A;return m&&!r?(h._readableState&&h._readableState.ended||(A=new H2),b.call(h,A)):a&&!l?(h._writableState&&h._writableState.ended||(A=new H2),b.call(h,A)):void 0},z=function(){h.req.on("finish",q)};return h.setHeader&&"function"==typeof h.abort?(h.on("complete",q),h.on("abort",y),h.req?z():h.on("request",z)):a&&!h._writableState&&(h.on("end",g),h.on("close",g)),h.on("end",u),h.on("finish",q),!1!==n.error&&h.on("error",v),h.on("close",y),function(){h.removeListener("complete",
q);h.removeListener("abort",y);h.removeListener("request",z);h.req&&h.req.removeListener("finish",q);h.removeListener("end",g);h.removeListener("close",g);h.removeListener("finish",q);h.removeListener("end",u);h.removeListener("error",v);h.removeListener("close",y)}},Lv=Symbol("lastResolve"),Dx=Symbol("lastReject"),FD=Symbol("error"),vI=Symbol("ended"),Cx=Symbol("lastPromise"),kP=Symbol("handlePromise"),Bx=Symbol("stream"),zga=Object.getPrototypeOf(function(){}),Aga=Object.setPrototypeOf((Jv(jP={get stream(){return this[Bx]},
next:function(){var h=this,n=this[FD];if(null!==n)return Promise.reject(n);if(this[vI])return Promise.resolve(Kv(void 0,!0));if(this[Bx].destroyed)return new Promise(function(b,e){XV.nextTick(function(){h[FD]?e(h[FD]):b(Kv(void 0,!0))})});if(n=this[Cx])n=new Promise(function(b,e){return function(m,a){b.then(function(){if(e[vI])return m(Kv(void 0,!0)),void 0;e[kP](m,a)},a)}}(n,this));else{n=this[Bx].read();if(null!==n)return Promise.resolve(Kv(n,!1));n=new Promise(this[kP])}return this[Cx]=n,n}},Symbol.asyncIterator,
function(){return this}),Jv(jP,"return",function(){var h=this;return new Promise(function(n,b){h[Bx].destroy(null,function(e){if(e)return b(e),void 0;n(Kv(void 0,!0))})})}),jP),zga),C8=function(h){var n,b=Object.create(Aga,(Jv(n={},Bx,{value:h,writable:!0}),Jv(n,Lv,{value:null,writable:!0}),Jv(n,Dx,{value:null,writable:!0}),Jv(n,FD,{value:null,writable:!0}),Jv(n,vI,{value:h._readableState.endEmitted,writable:!0}),Jv(n,kP,{value:function(e,m){var a=b[Bx].read();a?(b[Cx]=null,b[Lv]=null,b[Dx]=null,
e(Kv(a,!1))):(b[Lv]=e,b[Dx]=m)},writable:!0}),n));return b[Cx]=null,yga(h,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var m=b[Dx];return null!==m&&(b[Cx]=null,b[Lv]=null,b[Dx]=null,m(e)),b[FD]=e,void 0}e=b[Lv];null!==e&&(b[Cx]=null,b[Lv]=null,b[Dx]=null,e(Kv(void 0,!0)));b[vI]=!0}),h.on("readable",z8.bind(null,b)),b},uL={},ZV=!1,A8="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,vL={},cW=!1,E8="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?
self:global,wL={},eW=!1,Bga=YV(),I2=Qq.codes.ERR_STREAM_PREMATURE_CLOSE,CL=function m(n,b,e){if("function"==typeof b)return m(n,null,b);b||(b={});e=function(B){var G=!1;return function(){if(!G){G=!0;for(var E=arguments.length,K=Array(E),J=0;J<E;J++)K[J]=arguments[J];B.apply(this,K)}}}(e||F8);var a=b.readable||!1!==b.readable&&n.readable,g=b.writable||!1!==b.writable&&n.writable,l=function(){n.writable||r()},q=n._writableState&&n._writableState.finished,r=function(){g=!1;q=!0;a||e.call(n)},u=n._readableState&&
n._readableState.endEmitted,v=function(){a=!1;u=!0;g||e.call(n)},y=function(B){e.call(n,B)},z=function(){var B;return a&&!u?(n._readableState&&n._readableState.ended||(B=new I2),e.call(n,B)):g&&!q?(n._writableState&&n._writableState.ended||(B=new I2),e.call(n,B)):void 0},A=function(){n.req.on("finish",r)};return n.setHeader&&"function"==typeof n.abort?(n.on("complete",r),n.on("abort",z),n.req?A():n.on("request",A)):g&&!n._writableState&&(n.on("end",l),n.on("close",l)),n.on("end",v),n.on("finish",
r),!1!==b.error&&n.on("error",y),n.on("close",z),function(){n.removeListener("complete",r);n.removeListener("abort",z);n.removeListener("request",A);n.req&&n.req.removeListener("finish",r);n.removeListener("end",l);n.removeListener("close",l);n.removeListener("finish",r);n.removeListener("end",v);n.removeListener("error",y);n.removeListener("close",z)}},wI=Rh.Buffer,lP=Xg.inspect,Cga=lP&&lP.custom||"inspect",L8=function(){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");
!0;this.tail=this.head=null;this.length=0}var b;return b=[{key:"push",value:function(e){e={data:e,next:null};0<this.length?this.tail.next=e:this.head=e;this.tail=e;++this.length}},{key:"unshift",value:function(e){e={data:e,next:this.head};0===this.length&&(this.tail=e);this.head=e;++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=
this.tail=null;this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var m=this.head,a=""+m.data;m=m.next;)a+=e+m.data;return a}},{key:"concat",value:function(e){if(0===this.length)return wI.alloc(0);for(var m,a,g=wI.allocUnsafe(e>>>0),l=this.head,q=0;l;)e=l.data,m=g,a=q,void wI.prototype.copy.call(e,m,a),q+=l.data.length,l=l.next;return g}},{key:"consume",value:function(e,m){var a;return e<this.head.data.length?(a=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):
a=e===this.head.data.length?this.shift():m?this._getString(e):this._getBuffer(e),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var m=this.head,a=1,g=m.data;for(e-=g.length;m=m.next;){var l=m.data,q=e>l.length?l.length:e;if(q===l.length?g+=l:g+=l.slice(0,e),0==(e-=q)){q===l.length?(++a,m.next?this.head=m.next:this.head=this.tail=null):(this.head=m,m.data=l.slice(q));break}++a}return this.length-=a,g}},{key:"_getBuffer",value:function(e){var m=wI.allocUnsafe(e),
a=this.head,g=1;a.data.copy(m);for(e-=a.data.length;a=a.next;){var l=a.data,q=e>l.length?l.length:e;if(l.copy(m,m.length-e,0,q),0==(e-=q)){q===l.length?(++g,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=l.slice(q));break}++g}return this.length-=g,m}},{key:Cga,value:function(e,m){return lP(this,function(a){for(var g=1;g<arguments.length;g++){var l=null!=arguments[g]?arguments[g]:{};g%2?fW(Object(l),!0).forEach(function(q){var r=l[q];q in a?Object.defineProperty(a,q,{value:r,
enumerable:!0,configurable:!0,writable:!0}):a[q]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):fW(Object(l)).forEach(function(q){Object.defineProperty(a,q,Object.getOwnPropertyDescriptor(l,q))})}return a}({},m,{depth:0,customInspect:!1}))}}],G8(n.prototype,b),n}(),oy=zi,jW={destroy:function(n,b){var e=this,m=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||m?(b?b(n):n&&(this._writableState?
this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,oy.nextTick(xL,this,n)):oy.nextTick(xL,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(a){!b&&a?e._writableState?e._writableState.errorEmitted?oy.nextTick(bG,e):(e._writableState.errorEmitted=!0,oy.nextTick(gW,e,a)):oy.nextTick(gW,e,a):b?(oy.nextTick(bG,e),b(a)):oy.nextTick(bG,e)}),this)},undestroy:function(){this._readableState&&
(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(n,b){var e=n._readableState,m=n._writableState;e&&e.autoDestroy||m&&m.autoDestroy?n.destroy(b):
n.emit("error",b)}},Dga=Qq.codes.ERR_INVALID_OPT_VALUE,mP,kW={getHighWaterMark:function(n,b,e,m){b=null!=b.highWaterMark?b.highWaterMark:m?b[e]:null;if(null!=b){if(!isFinite(b)||Math.floor(b)!==b||0>b)throw new Dga(m?e:"highWaterMark",b);return Math.floor(b)}return n.objectMode?16:16384}},hW=zi,Ega=CL,Ov=Symbol("lastResolve"),Gx=Symbol("lastReject"),GD=Symbol("error"),xI=Symbol("ended"),Fx=Symbol("lastPromise"),nP=Symbol("handlePromise"),Ex=Symbol("stream"),Fga=Object.getPrototypeOf(function(){}),
Gga=Object.setPrototypeOf((Mv(mP={get stream(){return this[Ex]},next:function(){var n=this,b=this[GD];if(null!==b)return Promise.reject(b);if(this[xI])return Promise.resolve(Nv(void 0,!0));if(this[Ex].destroyed)return new Promise(function(e,m){hW.nextTick(function(){n[GD]?m(n[GD]):e(Nv(void 0,!0))})});if(b=this[Fx])b=new Promise(function(e,m){return function(a,g){e.then(function(){if(m[xI])return a(Nv(void 0,!0)),void 0;m[nP](a,g)},g)}}(b,this));else{b=this[Ex].read();if(null!==b)return Promise.resolve(Nv(b,
!1));b=new Promise(this[nP])}return this[Fx]=b,b}},Symbol.asyncIterator,function(){return this}),Mv(mP,"return",function(){var n=this;return new Promise(function(b,e){n[Ex].destroy(null,function(m){if(m)return e(m),void 0;b(Nv(void 0,!0))})})}),mP),Fga),M8=function(n){var b,e=Object.create(Gga,(Mv(b={},Ex,{value:n,writable:!0}),Mv(b,Ov,{value:null,writable:!0}),Mv(b,Gx,{value:null,writable:!0}),Mv(b,GD,{value:null,writable:!0}),Mv(b,xI,{value:n._readableState.endEmitted,writable:!0}),Mv(b,nP,{value:function(m,
a){var g=e[Ex].read();g?(e[Fx]=null,e[Ov]=null,e[Gx]=null,m(Nv(g,!1))):(e[Ov]=m,e[Gx]=a)},writable:!0}),b));return e[Fx]=null,Ega(n,function(m){if(m&&"ERR_STREAM_PREMATURE_CLOSE"!==m.code){var a=e[Gx];return null!==a&&(e[Fx]=null,e[Ov]=null,e[Gx]=null,a(m)),e[GD]=m,void 0}m=e[Ov];null!==m&&(e[Fx]=null,e[Ov]=null,e[Gx]=null,m(Nv(void 0,!0)));e[xI]=!0}),n.on("readable",I8.bind(null,e)),e},yL={},iW=!1,K8="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,zL={},mW=!1,N8="undefined"!=
typeof globalThis?globalThis:"undefined"!=typeof self?self:global,AL={},nW=!1,Hga=lW(),J2=eC(),yI=Qq.codes,Iga=yI.ERR_METHOD_NOT_IMPLEMENTED,P8=yI.ERR_MULTIPLE_CALLBACK,S8=yI.ERR_TRANSFORM_ALREADY_TRANSFORMING,R8=yI.ERR_TRANSFORM_WITH_LENGTH_0,dG=J2;zh(ws,dG);ws.prototype.push=function(n,b){return this._transformState.needTransform=!1,dG.prototype.push.call(this,n,b)};ws.prototype._transform=function(n,b,e){e(new Iga("_transform()"))};ws.prototype._write=function(n,b,e){var m=this._transformState;
(m.writecb=e,m.writechunk=n,m.writeencoding=b,m.transforming)||(n=this._readableState,(m.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark))};ws.prototype._read=function(n){n=this._transformState;null===n.writechunk||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};ws.prototype._destroy=function(n,b){dG.prototype._destroy.call(this,n,function(e){b(e)})};var pW=ws;zh(fC,pW);fC.prototype._transform=
function(n,b,e){e(null,n)};var BL,K2=Qq.codes,Jga=K2.ERR_MISSING_ARGS,U8=K2.ERR_STREAM_DESTROYED,EL="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,DL=vs.EventEmitter;zh(Hp,DL);Hp.Readable=Bga;Hp.Writable=Hga;Hp.Duplex=J2;Hp.Transform=ws;Hp.PassThrough=fC;Hp.finished=CL;Hp.pipeline=function(){for(var n=arguments.length,b=Array(n),e=0;e<n;e++)b[e]=arguments[e];var m,a=b.length?"function"!=typeof b[b.length-1]?qW:b.pop():qW;if(Array.isArray(b[0])&&(b=b[0]),2>b.length)throw new Jga("streams");
var g=b.map(function(l,q){var r=q<b.length-1;return T8(l,r,0<q,function(u){m||(m=u);u&&g.forEach(rW);r||(g.forEach(rW),a(m))})});return b.reduce(V8)};Hp.Stream=Hp;Hp.prototype.pipe=function(n,b){function e(v){n.writable&&!1===n.write(v)&&r.pause&&r.pause()}function m(){r.readable&&r.resume&&r.resume()}function a(){u||(u=!0,n.end())}function g(){u||(u=!0,"function"==typeof n.destroy&&n.destroy())}function l(v){if(q(),0===DL.listenerCount(this||EL,"error"))throw v;}function q(){r.removeListener("data",
e);n.removeListener("drain",m);r.removeListener("end",a);r.removeListener("close",g);r.removeListener("error",l);n.removeListener("error",l);r.removeListener("end",q);r.removeListener("close",q);n.removeListener("close",q)}var r=this||EL;r.on("data",e);n.on("drain",m);n._isStdio||b&&!1===b.end||(r.on("end",a),r.on("close",g));var u=!1;return r.on("error",l),n.on("error",l),r.on("end",q),r.on("close",q),n.on("close",q),n.emit("pipe",r),n};var Tx=Hp,zI="undefined"!=typeof globalThis?globalThis:"undefined"!=
typeof self?self:global,Mx={},LA=function(n){if(Object.keys)return Object.keys(n);var b=[],e;for(e in n)b.push(e);return b},py=function(n,b){if(n.forEach)return n.forEach(b);for(var e=0;e<n.length;e++)b(n[e],e,n)},Kga=function(){try{return Object.defineProperty({},"_",{}),function(n,b,e){Object.defineProperty(n,b,{writable:!0,enumerable:!1,configurable:!0,value:e})}}catch(n){return function(b,e,m){b[e]=m}}}(),L2="Array Boolean Date Error EvalError Function Infinity JSON Math NaN Number Object RangeError ReferenceError RegExp String SyntaxError TypeError URIError decodeURI decodeURIComponent encodeURI encodeURIComponent escape eval isFinite isNaN parseFloat parseInt undefined unescape".split(" ");
eG.prototype={};var Vs=Mx.Script=function(n){if(!((this||zI)instanceof Vs))return new Vs(n);(this||zI).code=n};Vs.prototype.runInContext=function(n){if(!(n instanceof eG))throw new TypeError("needs a 'context' argument.");var b=document.createElement("iframe");b.style||(b.style={});b.style.display="none";document.body.appendChild(b);var e=b.contentWindow,m=e.eval,a=e.execScript;!m&&a&&(a.call(e,"null"),m=e.eval);py(LA(n),function(l){e[l]=n[l]});py(L2,function(l){n[l]&&(e[l]=n[l])});var g=LA(e);m=
m.call(e,(this||zI).code);return py(LA(e),function(l){var q;if(!(q=l in n)){a:if(g.indexOf)q=g.indexOf(l);else{for(q=0;q<g.length;q++)if(g[q]===l)break a;q=-1}q=-1===q}q&&(n[l]=e[l])}),py(L2,function(l){l in n||Kga(n,l,e[l])}),document.body.removeChild(b),m};Vs.prototype.runInThisContext=function(){return eval((this||zI).code)};Vs.prototype.runInNewContext=function(n){var b=Vs.createContext(n),e=this.runInContext(b);return n&&py(LA(b),function(m){n[m]=b[m]}),e};py(LA(Vs.prototype),function(n){Mx[n]=
Vs[n]=function(b){var e=Vs(b);return e[n].apply(e,[].slice.call(arguments,1))}});Mx.isContext=function(n){return n instanceof eG};Mx.createScript=function(n){return Mx.Script(n)};Mx.createContext=Vs.createContext=function(n){var b=new eG;return"object"==typeof n&&py(LA(n),function(e){b[e]=n[e]}),b};var M2="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Lga=zi,Mga=qi.Buffer,AI=M2.crypto||M2.msCrypto,uw=AI&&AI.getRandomValues?function(n,b){if(4294967295<n)throw new RangeError("requested too many random bytes");
var e=Mga.allocUnsafe(n);if(0<n)if(65536<n)for(var m=0;m<n;m+=65536)AI.getRandomValues(e.slice(m,m+65536));else AI.getRandomValues(e);return"function"==typeof b?Lga.nextTick(function(){b(null,e)}):e}:function(){throw Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11");},fG=qi.Buffer,sW=Tx.Transform;zh(iu,sW);iu.prototype._transform=function(n,b,e){var m=null;try{this.update(n,b)}catch(a){m=a}e(m)};iu.prototype._flush=function(n){var b=
null;try{this.push(this.digest())}catch(e){b=e}n(b)};iu.prototype.update=function(n,b){var e=n;if(!fG.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(!0,this._finalized)throw Error("Digest already called");fG.isBuffer(n)||(n=fG.from(n,b));b=this._block;for(e=0;this._blockOffset+n.length-e>=this._blockSize;){for(var m=this._blockOffset;m<this._blockSize;)b[m++]=n[e++];this._update();this._blockOffset=0}for(;e<n.length;)b[this._blockOffset++]=n[e++];b=0;for(n=
8*n.length;0<n;++b)this._length[b]+=n,0<(n=this._length[b]/4294967296|0)&&(this._length[b]-=4294967296*n);return this};iu.prototype._update=function(){throw Error("_update is not implemented");};iu.prototype.digest=function(n){if(this._finalized)throw Error("Digest already called");this._finalized=!0;var b=this._digest();void 0!==n&&(b=b.toString(n));this._block.fill(0);for(n=this._blockOffset=0;4>n;++n)this._length[n]=0;return b};iu.prototype._digest=function(){throw Error("_digest is not implemented");
};var tW=iu,Nga=qi.Buffer,Nf=Array(16);zh(Mz,tW);Mz.prototype._update=function(){for(var n=0;16>n;++n)Nf[n]=this._block.readInt32LE(4*n);n=this._a;var b=this._b,e=this._c,m=this._d;n=Nm(n,b,e,m,Nf[0],3614090360,7);m=Nm(m,n,b,e,Nf[1],3905402710,12);e=Nm(e,m,n,b,Nf[2],606105819,17);b=Nm(b,e,m,n,Nf[3],3250441966,22);n=Nm(n,b,e,m,Nf[4],4118548399,7);m=Nm(m,n,b,e,Nf[5],1200080426,12);e=Nm(e,m,n,b,Nf[6],2821735955,17);b=Nm(b,e,m,n,Nf[7],4249261313,22);n=Nm(n,b,e,m,Nf[8],1770035416,7);m=Nm(m,n,b,e,Nf[9],
2336552879,12);e=Nm(e,m,n,b,Nf[10],4294925233,17);b=Nm(b,e,m,n,Nf[11],2304563134,22);n=Nm(n,b,e,m,Nf[12],1804603682,7);m=Nm(m,n,b,e,Nf[13],4254626195,12);e=Nm(e,m,n,b,Nf[14],2792965006,17);n=Om(n,b=Nm(b,e,m,n,Nf[15],1236535329,22),e,m,Nf[1],4129170786,5);m=Om(m,n,b,e,Nf[6],3225465664,9);e=Om(e,m,n,b,Nf[11],643717713,14);b=Om(b,e,m,n,Nf[0],3921069994,20);n=Om(n,b,e,m,Nf[5],3593408605,5);m=Om(m,n,b,e,Nf[10],38016083,9);e=Om(e,m,n,b,Nf[15],3634488961,14);b=Om(b,e,m,n,Nf[4],3889429448,20);n=Om(n,b,e,
m,Nf[9],568446438,5);m=Om(m,n,b,e,Nf[14],3275163606,9);e=Om(e,m,n,b,Nf[3],4107603335,14);b=Om(b,e,m,n,Nf[8],1163531501,20);n=Om(n,b,e,m,Nf[13],2850285829,5);m=Om(m,n,b,e,Nf[2],4243563512,9);e=Om(e,m,n,b,Nf[7],1735328473,14);n=Pm(n,b=Om(b,e,m,n,Nf[12],2368359562,20),e,m,Nf[5],4294588738,4);m=Pm(m,n,b,e,Nf[8],2272392833,11);e=Pm(e,m,n,b,Nf[11],1839030562,16);b=Pm(b,e,m,n,Nf[14],4259657740,23);n=Pm(n,b,e,m,Nf[1],2763975236,4);m=Pm(m,n,b,e,Nf[4],1272893353,11);e=Pm(e,m,n,b,Nf[7],4139469664,16);b=Pm(b,
e,m,n,Nf[10],3200236656,23);n=Pm(n,b,e,m,Nf[13],681279174,4);m=Pm(m,n,b,e,Nf[0],3936430074,11);e=Pm(e,m,n,b,Nf[3],3572445317,16);b=Pm(b,e,m,n,Nf[6],76029189,23);n=Pm(n,b,e,m,Nf[9],3654602809,4);m=Pm(m,n,b,e,Nf[12],3873151461,11);e=Pm(e,m,n,b,Nf[15],530742520,16);n=Qm(n,b=Pm(b,e,m,n,Nf[2],3299628645,23),e,m,Nf[0],4096336452,6);m=Qm(m,n,b,e,Nf[7],1126891415,10);e=Qm(e,m,n,b,Nf[14],2878612391,15);b=Qm(b,e,m,n,Nf[5],4237533241,21);n=Qm(n,b,e,m,Nf[12],1700485571,6);m=Qm(m,n,b,e,Nf[3],2399980690,10);e=
Qm(e,m,n,b,Nf[10],4293915773,15);b=Qm(b,e,m,n,Nf[1],2240044497,21);n=Qm(n,b,e,m,Nf[8],1873313359,6);m=Qm(m,n,b,e,Nf[15],4264355552,10);e=Qm(e,m,n,b,Nf[6],2734768916,15);b=Qm(b,e,m,n,Nf[13],1309151649,21);n=Qm(n,b,e,m,Nf[4],4149444226,6);m=Qm(m,n,b,e,Nf[11],3174756917,10);e=Qm(e,m,n,b,Nf[2],718787259,15);b=Qm(b,e,m,n,Nf[9],3951481745,21);this._a=this._a+n|0;this._b=this._b+b|0;this._c=this._c+e|0;this._d=this._d+m|0};Mz.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&
(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],56);this._block.writeUInt32LE(this._length[1],60);this._update();var n=Nga.allocUnsafe(16);return n.writeInt32LE(this._a,0),n.writeInt32LE(this._b,4),n.writeInt32LE(this._c,8),n.writeInt32LE(this._d,12),n};var oP=Rh.Buffer,uW=iu,mr=Array(16),HD=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,
2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],ID=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],JD=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],KD=[8,
9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],LD=[0,1518500249,1859775393,2400959708,2840853838],MD=[1352829926,1548603684,1836072691,2053994217,0];zh(Nz,uW);Nz.prototype._update=function(){for(var n=0;16>n;++n)mr[n]=this._block.readInt32LE(4*n);var b=0|this._a;n=0|this._b;for(var e=0|this._c,m=0|this._d,a=0|this._e,g=0|this._a,l=0|this._b,q=0|this._c,
r=0|this._d,u=0|this._e,v=0;80>v;v+=1){if(16>v){var y=a;y=Ip(b+(n^e^m)+mr[HD[v]]+LD[0]|0,JD[v])+y|0;b=u;var z=Ip(g+(l^(q|~r))+mr[ID[v]]+MD[0]|0,KD[v])+b|0}else 32>v?(y=a,y=Ip(b+(n&e|~n&m)+mr[HD[v]]+LD[1]|0,JD[v])+y|0,b=u,z=Ip(g+(l&r|q&~r)+mr[ID[v]]+MD[1]|0,KD[v])+b|0):48>v?(y=a,y=Ip(b+((n|~e)^m)+mr[HD[v]]+LD[2]|0,JD[v])+y|0,b=u,z=Ip(g+((l|~q)^r)+mr[ID[v]]+MD[2]|0,KD[v])+b|0):64>v?(y=a,y=Ip(b+(n&m|e&~m)+mr[HD[v]]+LD[3]|0,JD[v])+y|0,b=u,z=Ip(g+(l&q|~l&r)+mr[ID[v]]+MD[3]|0,KD[v])+b|0):(y=a,y=Ip(b+(n^
(e|~m))+mr[HD[v]]+LD[4]|0,JD[v])+y|0,b=u,z=Ip(g+(l^q^r)+mr[ID[v]]+MD[4]|0,KD[v])+b|0);b=a;a=m;m=Ip(e,10);e=n;n=y;g=u;u=r;r=Ip(q,10);q=l;l=z}e=this._b+e+r|0;this._b=this._c+m+u|0;this._c=this._d+a+g|0;this._d=this._e+b+l|0;this._e=this._a+n+q|0;this._a=e};Nz.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],
56);this._block.writeUInt32LE(this._length[1],60);this._update();var n=oP.alloc?oP.alloc(20):new oP(20);return n.writeInt32LE(this._a,0),n.writeInt32LE(this._b,4),n.writeInt32LE(this._c,8),n.writeInt32LE(this._d,12),n.writeInt32LE(this._e,16),n};var Zj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,vW=qi.Buffer;ju.prototype.update=function(n,b){"string"==typeof n&&(b=b||"utf8",n=vW.from(n,b));b=(this||Zj)._block;for(var e=(this||Zj)._blockSize,m=n.length,a=(this||Zj)._len,
g=0;g<m;){for(var l=a%e,q=Math.min(m-g,e-l),r=0;r<q;r++)b[l+r]=n[g+r];g+=q;0==(a+=q)%e&&this._update(b)}return(this||Zj)._len+=m,this||Zj};ju.prototype.digest=function(n){var b=(this||Zj)._len%(this||Zj)._blockSize;(this||Zj)._block[b]=128;(this||Zj)._block.fill(0,b+1);b>=(this||Zj)._finalSize&&(this._update((this||Zj)._block),(this||Zj)._block.fill(0));b=8*(this||Zj)._len;if(4294967295>=b)(this||Zj)._block.writeUInt32BE(b,(this||Zj)._blockSize-4);else{var e=(4294967295&b)>>>0;(this||Zj)._block.writeUInt32BE((b-
e)/4294967296,(this||Zj)._blockSize-8);(this||Zj)._block.writeUInt32BE(e,(this||Zj)._blockSize-4)}this._update((this||Zj)._block);b=this._hash();return n?b.toString(n):b};ju.prototype._update=function(){throw Error("_update must be implemented by subclass");};var rh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,wW=ju,Oga=qi.Buffer,Pga=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,
2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,
2428436474,2756734187,3204031479,3329325298],W8=Array(64);zh(Oz,wW);Oz.prototype.init=function(){return(this||rh)._a=1779033703,(this||rh)._b=3144134277,(this||rh)._c=1013904242,(this||rh)._d=2773480762,(this||rh)._e=1359893119,(this||rh)._f=2600822924,(this||rh)._g=528734635,(this||rh)._h=1541459225,this||rh};Oz.prototype._update=function(n){for(var b,e=(this||rh)._w,m=0|(this||rh)._a,a=0|(this||rh)._b,g=0|(this||rh)._c,l=0|(this||rh)._d,q=0|(this||rh)._e,r=0|(this||rh)._f,u=0|(this||rh)._g,v=0|
(this||rh)._h,y=0;16>y;++y)e[y]=n.readInt32BE(4*y);for(;64>y;++y){n=y;var z=(((b=e[y-2])>>>17|b<<15)^(b>>>19|b<<13)^b>>>10)+e[y-7],A=e[y-15];e[n]=0|z+((A>>>7|A<<25)^(A>>>18|A<<14)^A>>>3)+e[y-16]}for(b=0;64>b;++b)y=v+((q>>>6|q<<26)^(q>>>11|q<<21)^(q>>>25|q<<7))+(u^q&(r^u))+Pga[b]+e[b]|0,n=((m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10))+(m&a|g&(m|a))|0,v=u,u=r,r=q,q=l+y|0,l=g,g=a,a=m,m=y+n|0;(this||rh)._a=m+(this||rh)._a|0;(this||rh)._b=a+(this||rh)._b|0;(this||rh)._c=g+(this||rh)._c|0;(this||rh)._d=
l+(this||rh)._d|0;(this||rh)._e=q+(this||rh)._e|0;(this||rh)._f=r+(this||rh)._f|0;(this||rh)._g=u+(this||rh)._g|0;(this||rh)._h=v+(this||rh)._h|0};Oz.prototype._hash=function(){var n=Oga.allocUnsafe(32);return n.writeInt32BE((this||rh)._a,0),n.writeInt32BE((this||rh)._b,4),n.writeInt32BE((this||rh)._c,8),n.writeInt32BE((this||rh)._d,12),n.writeInt32BE((this||rh)._e,16),n.writeInt32BE((this||rh)._f,20),n.writeInt32BE((this||rh)._g,24),n.writeInt32BE((this||rh)._h,28),n};var qj="undefined"!=typeof globalThis?
globalThis:"undefined"!=typeof self?self:global,xW=ju,Qga=qi.Buffer,Rga=[1518500249,1859775393,-1894007588,-899497514],X8=Array(80);zh(gC,xW);gC.prototype.init=function(){return(this||qj)._a=1732584193,(this||qj)._b=4023233417,(this||qj)._c=2562383102,(this||qj)._d=271733878,(this||qj)._e=3285377520,this||qj};gC.prototype._update=function(n){for(var b,e=(this||qj)._w,m=0|(this||qj)._a,a=0|(this||qj)._b,g=0|(this||qj)._c,l=0|(this||qj)._d,q=0|(this||qj)._e,r=0;16>r;++r)e[r]=n.readInt32BE(4*r);for(;80>
r;++r)e[r]=e[r-3]^e[r-8]^e[r-14]^e[r-16];for(n=0;80>n;++n)r=~~(n/20),r=0|((b=m)<<5|b>>>27)+(0===r?a&g|~a&l:2===r?a&g|a&l|g&l:a^g^l)+q+e[n]+Rga[r],q=l,l=g,g=a<<30|a>>>2,a=m,m=r;(this||qj)._a=m+(this||qj)._a|0;(this||qj)._b=a+(this||qj)._b|0;(this||qj)._c=g+(this||qj)._c|0;(this||qj)._d=l+(this||qj)._d|0;(this||qj)._e=q+(this||qj)._e|0};gC.prototype._hash=function(){var n=Qga.allocUnsafe(20);return n.writeInt32BE(0|(this||qj)._a,0),n.writeInt32BE(0|(this||qj)._b,4),n.writeInt32BE(0|(this||qj)._c,8),
n.writeInt32BE(0|(this||qj)._d,12),n.writeInt32BE(0|(this||qj)._e,16),n};var rj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,yW=ju,Sga=qi.Buffer,Tga=[1518500249,1859775393,-1894007588,-899497514],Y8=Array(80);zh(hC,yW);hC.prototype.init=function(){return(this||rj)._a=1732584193,(this||rj)._b=4023233417,(this||rj)._c=2562383102,(this||rj)._d=271733878,(this||rj)._e=3285377520,this||rj};hC.prototype._update=function(n){for(var b,e=(this||rj)._w,m=0|(this||rj)._a,a=
0|(this||rj)._b,g=0|(this||rj)._c,l=0|(this||rj)._d,q=0|(this||rj)._e,r=0;16>r;++r)e[r]=n.readInt32BE(4*r);for(;80>r;++r)e[r]=(b=e[r-3]^e[r-8]^e[r-14]^e[r-16])<<1|b>>>31;for(n=0;80>n;++n)b=~~(n/20),b=(m<<5|m>>>27)+(0===b?a&g|~a&l:2===b?a&g|a&l|g&l:a^g^l)+q+e[n]+Tga[b]|0,q=l,l=g,g=a<<30|a>>>2,a=m,m=b;(this||rj)._a=m+(this||rj)._a|0;(this||rj)._b=a+(this||rj)._b|0;(this||rj)._c=g+(this||rj)._c|0;(this||rj)._d=l+(this||rj)._d|0;(this||rj)._e=q+(this||rj)._e|0};hC.prototype._hash=function(){var n=Sga.allocUnsafe(20);
return n.writeInt32BE(0|(this||rj)._a,0),n.writeInt32BE(0|(this||rj)._b,4),n.writeInt32BE(0|(this||rj)._c,8),n.writeInt32BE(0|(this||rj)._d,12),n.writeInt32BE(0|(this||rj)._e,16),n};var Vl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,$8=ju,Uga=qi.Buffer,Z8=Array(64);zh(hG,Oz);hG.prototype.init=function(){return(this||Vl)._a=3238371032,(this||Vl)._b=914150663,(this||Vl)._c=812702999,(this||Vl)._d=4144912697,(this||Vl)._e=4290775857,(this||Vl)._f=1750603025,(this||
Vl)._g=1694076839,(this||Vl)._h=3204075428,this||Vl};hG.prototype._hash=function(){var n=Uga.allocUnsafe(28);return n.writeInt32BE((this||Vl)._a,0),n.writeInt32BE((this||Vl)._b,4),n.writeInt32BE((this||Vl)._c,8),n.writeInt32BE((this||Vl)._d,12),n.writeInt32BE((this||Vl)._e,16),n.writeInt32BE((this||Vl)._f,20),n.writeInt32BE((this||Vl)._g,24),n};var Qe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,zW=ju,Vga=qi.Buffer,N2=[1116352408,3609767458,1899447441,602891725,3049323471,
3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,
2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,
1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,
852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a9=Array(160);zh(Pz,zW);Pz.prototype.init=function(){return(this||Qe)._ah=1779033703,(this||Qe)._bh=3144134277,(this||Qe)._ch=1013904242,(this||Qe)._dh=2773480762,(this||Qe)._eh=1359893119,(this||Qe)._fh=2600822924,(this||Qe)._gh=528734635,(this||Qe)._hh=1541459225,(this||Qe)._al=4089235720,(this||Qe)._bl=2227873595,(this||Qe)._cl=4271175723,(this||
Qe)._dl=1595750129,(this||Qe)._el=2917565137,(this||Qe)._fl=725511199,(this||Qe)._gl=4215389547,(this||Qe)._hl=327033209,this||Qe};Pz.prototype._update=function(n){for(var b=(this||Qe)._w,e=0|(this||Qe)._ah,m=0|(this||Qe)._bh,a=0|(this||Qe)._ch,g=0|(this||Qe)._dh,l=0|(this||Qe)._eh,q=0|(this||Qe)._fh,r=0|(this||Qe)._gh,u=0|(this||Qe)._hh,v=0|(this||Qe)._al,y=0|(this||Qe)._bl,z=0|(this||Qe)._cl,A=0|(this||Qe)._dl,B=0|(this||Qe)._el,G=0|(this||Qe)._fl,E=0|(this||Qe)._gl,K=0|(this||Qe)._hl,J=0;32>J;J+=
2)b[J]=n.readInt32BE(4*J),b[J+1]=n.readInt32BE(4*J+4);for(;160>J;J+=2){n=b[J-30];var P=b[J-30+1],ea=(n>>>1|P<<31)^(n>>>8|P<<24)^n>>>7,ra=(P>>>1|n<<31)^(P>>>8|n<<24)^(P>>>7|n<<25);var D=n=b[J-4];var O=P=b[J-4+1];D=(D>>>19|O<<13)^(O>>>29|D<<3)^D>>>6;P=(P>>>19|n<<13)^(n>>>29|P<<3)^(P>>>6|n<<26);O=b[J-32];var L=b[J-32+1];n=ra+b[J-14+1]|0;ea=ea+b[J-14]+Wl(n,ra)|0;ea=(ea=ea+D+Wl(n=n+P|0,P)|0)+O+Wl(n=n+L|0,L)|0;b[J]=ea;b[J+1]=n}for(J=0;160>J;J+=2){ea=b[J];n=b[J+1];P=e&m|a&(e|m);var N=v&y|z&(v|y);O=(e>>>
28|v<<4)^(v>>>2|e<<30)^(v>>>7|e<<25);L=(v>>>28|e<<4)^(e>>>2|v<<30)^(e>>>7|v<<25);var aa=N2[J],Y=N2[J+1],ma=r^l&(q^r),bb=E^B&(G^E);ra=K+((B>>>14|l<<18)^(B>>>18|l<<14)^(l>>>9|B<<23))|0;D=u+((l>>>14|B<<18)^(l>>>18|B<<14)^(B>>>9|l<<23))+Wl(ra,K)|0;D=(D=(D=D+ma+Wl(ra=ra+bb|0,bb)|0)+aa+Wl(ra=ra+Y|0,Y)|0)+ea+Wl(ra=ra+n|0,n)|0;n=L+N|0;ea=O+P+Wl(n,L)|0;u=r;K=E;r=q;E=G;q=l;G=B;l=g+D+Wl(B=A+ra|0,A)|0;g=a;A=z;a=m;z=y;m=e;y=v;e=D+ea+Wl(v=ra+n|0,ra)|0}(this||Qe)._al=(this||Qe)._al+v|0;(this||Qe)._bl=(this||Qe)._bl+
y|0;(this||Qe)._cl=(this||Qe)._cl+z|0;(this||Qe)._dl=(this||Qe)._dl+A|0;(this||Qe)._el=(this||Qe)._el+B|0;(this||Qe)._fl=(this||Qe)._fl+G|0;(this||Qe)._gl=(this||Qe)._gl+E|0;(this||Qe)._hl=(this||Qe)._hl+K|0;(this||Qe)._ah=(this||Qe)._ah+e+Wl((this||Qe)._al,v)|0;(this||Qe)._bh=(this||Qe)._bh+m+Wl((this||Qe)._bl,y)|0;(this||Qe)._ch=(this||Qe)._ch+a+Wl((this||Qe)._cl,z)|0;(this||Qe)._dh=(this||Qe)._dh+g+Wl((this||Qe)._dl,A)|0;(this||Qe)._eh=(this||Qe)._eh+l+Wl((this||Qe)._el,B)|0;(this||Qe)._fh=(this||
Qe)._fh+q+Wl((this||Qe)._fl,G)|0;(this||Qe)._gh=(this||Qe)._gh+r+Wl((this||Qe)._gl,E)|0;(this||Qe)._hh=(this||Qe)._hh+u+Wl((this||Qe)._hl,K)|0};Pz.prototype._hash=function(){function n(e,m,a){b.writeInt32BE(e,a);b.writeInt32BE(m,a+4)}var b=Vga.allocUnsafe(64);return n((this||Qe)._ah,(this||Qe)._al,0),n((this||Qe)._bh,(this||Qe)._bl,8),n((this||Qe)._ch,(this||Qe)._cl,16),n((this||Qe)._dh,(this||Qe)._dl,24),n((this||Qe)._eh,(this||Qe)._el,32),n((this||Qe)._fh,(this||Qe)._fl,40),n((this||Qe)._gh,(this||
Qe)._gl,48),n((this||Qe)._hh,(this||Qe)._hl,56),b};var Ri="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,c9=ju,Wga=qi.Buffer,b9=Array(160);zh(iG,Pz);iG.prototype.init=function(){return(this||Ri)._ah=3418070365,(this||Ri)._bh=1654270250,(this||Ri)._ch=2438529370,(this||Ri)._dh=355462360,(this||Ri)._eh=1731405415,(this||Ri)._fh=2394180231,(this||Ri)._gh=3675008525,(this||Ri)._hh=1203062813,(this||Ri)._al=3238371032,(this||Ri)._bl=914150663,(this||Ri)._cl=812702999,(this||
Ri)._dl=4144912697,(this||Ri)._el=4290775857,(this||Ri)._fl=1750603025,(this||Ri)._gl=1694076839,(this||Ri)._hl=3204075428,this||Ri};iG.prototype._hash=function(){function n(e,m,a){b.writeInt32BE(e,a);b.writeInt32BE(m,a+4)}var b=Wga.allocUnsafe(48);return n((this||Ri)._ah,(this||Ri)._al,0),n((this||Ri)._bh,(this||Ri)._bl,8),n((this||Ri)._ch,(this||Ri)._cl,16),n((this||Ri)._dh,(this||Ri)._dl,24),n((this||Ri)._eh,(this||Ri)._el,32),n((this||Ri)._fh,(this||Ri)._fl,40),b};var vw,O2=vw={};(vw=O2=function(n){n=
n.toLowerCase();var b=vw[n];if(!b)throw Error(n+" is not supported (we accept pull requests)");return new b}).sha=gC;vw.sha1=hC;vw.sha224=hG;vw.sha256=Oz;vw.sha384=iG;vw.sha512=Pz;var pP=O2,Ck="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,P2=qi.Buffer,AW=Tx.Transform,Xga=Lz.StringDecoder;zh(Xl,AW);Xl.prototype.update=function(n,b,e){"string"==typeof n&&(n=P2.from(n,b));n=this._update(n);return(this||Ck).hashMode?this||Ck:(e&&(n=this._toString(n,e)),n)};Xl.prototype.setAutoPadding=
function(){};Xl.prototype.getAuthTag=function(){throw Error("trying to get auth tag in unsupported state");};Xl.prototype.setAuthTag=function(){throw Error("trying to set auth tag in unsupported state");};Xl.prototype.setAAD=function(){throw Error("trying to set aad in unsupported state");};Xl.prototype._transform=function(n,b,e){try{(this||Ck).hashMode?this._update(n):this.push(this._update(n))}catch(a){var m=a}finally{e(m)}};Xl.prototype._flush=function(n){try{this.push(this.__final())}catch(e){var b=
e}n(b)};Xl.prototype._finalOrDigest=function(n){var b=this.__final()||P2.alloc(0);return n&&(b=this._toString(b,n,!0)),b};Xl.prototype._toString=function(n,b,e){if((this||Ck)._decoder||((this||Ck)._decoder=new Xga(b),(this||Ck)._encoding=b),(this||Ck)._encoding!==b)throw Error("can't switch encodings");n=(this||Ck)._decoder.write(n);return e&&(n+=(this||Ck)._decoder.end()),n};var BW=Xl;zh(jG,BW);jG.prototype._update=function(n){this._hash.update(n)};jG.prototype._final=function(){return this._hash.digest()};
var ND=function(n){return"md5"===(n=n.toLowerCase())?new Mz:"rmd160"===n||"ripemd160"===n?new Nz:new jG(pP(n))},Q2=function(n){return(new Mz).update(n).digest()},Yga=zh,Hx=qi.Buffer,CW=Xl,d9=Hx.alloc(128);Yga(kG,CW);kG.prototype._update=function(n){this._hash.push(n)};kG.prototype._final=function(){var n=this._alg(Hx.concat(this._hash));return this._alg(Hx.concat([this._opad,n]))};var Zga=zh,DW=Xl,jC=qi.Buffer,FL=Nz,GL=pP,e9=jC.alloc(128);Zga(iC,DW);iC.prototype._update=function(n){this._hash.update(n)};
iC.prototype._final=function(){var n=this._hash.digest();return("rmd160"===this._alg?new FL:GL(this._alg)).update(this._opad).update(n).digest()};var R2=function(n,b){return"rmd160"===(n=n.toLowerCase())||"ripemd160"===n?new iC("rmd160",b):"md5"===n?new kG(Q2,b):new iC(n,b)},S2={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",
hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},
"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},
"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",
hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}},f9=Rh.Buffer,$ga=Math.pow(2,30)-1,qP,T2=function(n,b,e,m){if(EW(n,"Password"),EW(b,"Salt"),"number"!=typeof e)throw new TypeError("Iterations not a number");if(0>e)throw new TypeError("Bad iterations");if("number"!=typeof m)throw new TypeError("Key length not a number");if(0>m||m>$ga||m!=m)throw new TypeError("Bad key length");},U2=zi;U2.browser?qP="utf-8":qP=6<=parseInt(U2.version.split(".")[0].slice(1),
10)?"utf-8":"binary";var BI=qP,Sq="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,i9=Q2,h9=Nz,g9=pP,Rq=qi.Buffer,j9=Rq.alloc(128),lG={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};FW.prototype.run=function(n,b){return n.copy(b,(this||Sq).blocksize),this.hash(b).copy((this||Sq).opad,(this||Sq).blocksize),this.hash((this||Sq).opad)};var rP,sP=function(n,b,e,m,a){T2(n,b,e,m);Rq.isBuffer(n)||(n=Rq.from(n,BI));Rq.isBuffer(b)||(b=Rq.from(b,
BI));n=new FW(a=a||"sha1",n,b.length);var g=Rq.allocUnsafe(m),l=Rq.allocUnsafe(b.length+4);b.copy(l,0,0,b.length);var q=0;a=lG[a];m=Math.ceil(m/a);for(var r=1;r<=m;r++){l.writeUInt32BE(r,b.length);for(var u=n.run(l,n.ipad1),v=u,y=1;y<e;y++){v=n.run(v,n.ipad2);for(var z=0;z<a;z++)u[z]^=v[z]}u.copy(g,q);q+=a}return g},OD="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,tP=zi,Qz=qi.Buffer,kC=OD.crypto&&OD.crypto.subtle,aha={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256",
"sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},uP=[],CI={pbkdf2:function(n,b,e,m,a,g){"function"==typeof a&&(g=a,a=void 0);var l=aha[(a=a||"sha1").toLowerCase()];if(!l||"function"!=typeof OD.Promise)return tP.nextTick(function(){try{var q=sP(n,b,e,m,a)}catch(r){return g(r)}g(null,q)});if(T2(n,b,e,m),"function"!=typeof g)throw Error("No callback provided to pbkdf2");Qz.isBuffer(n)||(n=Qz.from(n,BI));Qz.isBuffer(b)||(b=Qz.from(b,BI));(function(q,r){q.then(function(u){tP.nextTick(function(){r(null,
u)})},function(u){tP.nextTick(function(){r(u)})})})(function(q){if(OD.process&&!OD.process.browser||!kC||!kC.importKey||!kC.deriveBits)return Promise.resolve(!1);if(void 0!==uP[q])return uP[q];var r=GW(rP=rP||Qz.alloc(8),rP,10,128,q).then(function(){return!0}).catch(function(){return!1});return uP[q]=r,r}(l).then(function(q){return q?GW(n,b,e,m,l):sP(n,b,e,m,a)}),g)}};CI.pbkdf2Sync=sP;HW.equal=function(n,b,e){if(n!=b)throw Error(e||"Assertion failed: "+n+" != "+b);};var Sp=HW,mk={readUInt32BE:function(n,
b){return(n[0+b]<<24|n[1+b]<<16|n[2+b]<<8|n[3+b])>>>0},writeUInt32BE:function(n,b,e){n[0+e]=b>>>24;n[1+e]=b>>>16&255;n[2+e]=b>>>8&255;n[3+e]=255&b},ip:function(n,b,e,m){for(var a=0,g=0,l=6;0<=l;l-=2){for(var q=0;24>=q;q+=8)a<<=1,a|=b>>>q+l&1;for(q=0;24>=q;q+=8)a<<=1,a|=n>>>q+l&1}for(l=6;0<=l;l-=2){for(q=1;25>=q;q+=8)g<<=1,g|=b>>>q+l&1;for(q=1;25>=q;q+=8)g<<=1,g|=n>>>q+l&1}e[m+0]=a>>>0;e[m+1]=g>>>0},rip:function(n,b,e,m){for(var a=0,g=0,l=0;4>l;l++)for(var q=24;0<=q;q-=8)a<<=1,a|=b>>>q+l&1,a<<=1,a|=
n>>>q+l&1;for(l=4;8>l;l++)for(q=24;0<=q;q-=8)g<<=1,g|=b>>>q+l&1,g<<=1,g|=n>>>q+l&1;e[m+0]=a>>>0;e[m+1]=g>>>0},pc1:function(n,b,e,m){for(var a=0,g=0,l=7;5<=l;l--){for(var q=0;24>=q;q+=8)a<<=1,a|=b>>q+l&1;for(q=0;24>=q;q+=8)a<<=1,a|=n>>q+l&1}for(q=0;24>=q;q+=8)a<<=1,a|=b>>q+l&1;for(l=1;3>=l;l++){for(q=0;24>=q;q+=8)g<<=1,g|=b>>q+l&1;for(q=0;24>=q;q+=8)g<<=1,g|=n>>q+l&1}for(q=0;24>=q;q+=8)g<<=1,g|=n>>q+l&1;e[m+0]=a>>>0;e[m+1]=g>>>0},r28shl:function(n,b){return n<<b&268435455|n>>>28-b}},DI=[14,11,17,4,
27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];mk.pc2=function(n,b,e,m){for(var a=0,g=0,l=DI.length>>>1,q=0;q<l;q++)a<<=1,a|=n>>>DI[q]&1;for(q=l;q<DI.length;q++)g<<=1,g|=b>>>DI[q]&1;e[m+0]=a>>>0;e[m+1]=g>>>0};mk.expand=function(n,b,e){var m=0;var a=(1&n)<<5|n>>>27;for(var g=23;15<=g;g-=4)a<<=6,a|=n>>>g&63;for(g=11;3<=g;g-=4)m|=n>>>g&63,m<<=6;b[e+0]=a>>>0;b[e+1]=(m|(31&n)<<1|n>>>31)>>>0};var V2=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,
8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,
6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,
0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];mk.substitute=function(n,b){for(var e=0,m=0;4>m;m++)e<<=4,e|=V2[64*m+(n>>>18-6*m&63)];for(m=0;4>m;m++)e<<=4,e|=V2[256+64*m+(b>>>18-6*m&63)];return e>>>0};var W2=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];mk.permute=function(n){for(var b=0,e=0;e<W2.length;e++)b<<=1,b|=n>>>W2[e]&
1;return b>>>0};mk.padSplit=function(n,b,e){for(n=n.toString(2);n.length<b;)n="0"+n;for(var m=[],a=0;a<b;a+=e)m.push(n.slice(a,a+e));return m.join(" ")};var bha=Sp;Eo.prototype._init=function(){};Eo.prototype.update=function(n){return 0===n.length?[]:"decrypt"===this.type?this._updateDecrypt(n):this._updateEncrypt(n)};Eo.prototype._buffer=function(n,b){for(var e=Math.min(this.buffer.length-this.bufferOff,n.length-b),m=0;m<e;m++)this.buffer[this.bufferOff+m]=n[b+m];return this.bufferOff+=e,e};Eo.prototype._flushBuffer=
function(n,b){return this._update(this.buffer,0,n,b),this.bufferOff=0,this.blockSize};Eo.prototype._updateEncrypt=function(n){var b=0,e=0,m=Array(((this.bufferOff+n.length)/this.blockSize|0)*this.blockSize);0!==this.bufferOff&&(b+=this._buffer(n,b),this.bufferOff===this.buffer.length&&(e+=this._flushBuffer(m,e)));for(var a=n.length-(n.length-b)%this.blockSize;b<a;b+=this.blockSize)this._update(n,b,m,e),e+=this.blockSize;for(;b<n.length;b++,this.bufferOff++)this.buffer[this.bufferOff]=n[b];return m};
Eo.prototype._updateDecrypt=function(n){for(var b=0,e=0,m=Math.ceil((this.bufferOff+n.length)/this.blockSize)-1,a=Array(m*this.blockSize);0<m;m--)b+=this._buffer(n,b),e+=this._flushBuffer(a,e);return this._buffer(n,b),a};Eo.prototype.final=function(n){var b,e;return n&&(b=this.update(n)),e="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),b?b.concat(e):e};Eo.prototype._pad=function(n,b){if(0===b)return!1;for(;b<n.length;)n[b++]=0;return!0};Eo.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,
this.bufferOff))return[];var n=Array(this.blockSize);return this._update(this.buffer,0,n,0),n};Eo.prototype._unpad=function(n){return n};Eo.prototype._finalDecrypt=function(){bha.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var n=Array(this.blockSize);return this._flushBuffer(n,0),this._unpad(n)};var X2=Sp,IW=Eo;zh(Jp,IW);Jp.create=function(n){return new Jp(n)};var cha=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];Jp.prototype.deriveKeys=function(n,b){n.keys=Array(32);X2.equal(b.length,this.blockSize,
"Invalid key length");var e=mk.readUInt32BE(b,0);b=mk.readUInt32BE(b,4);mk.pc1(e,b,n.tmp,0);e=n.tmp[0];b=n.tmp[1];for(var m=0;m<n.keys.length;m+=2){var a=cha[m>>>1];e=mk.r28shl(e,a);b=mk.r28shl(b,a);mk.pc2(e,b,n.keys,m)}};Jp.prototype._update=function(n,b,e,m){var a=this._desState,g=mk.readUInt32BE(n,b);n=mk.readUInt32BE(n,b+4);mk.ip(g,n,a.tmp,0);g=a.tmp[0];n=a.tmp[1];"encrypt"===this.type?this._encrypt(a,g,n,a.tmp,0):this._decrypt(a,g,n,a.tmp,0);g=a.tmp[0];n=a.tmp[1];mk.writeUInt32BE(e,g,m);mk.writeUInt32BE(e,
n,m+4)};Jp.prototype._pad=function(n,b){for(var e=n.length-b;b<n.length;b++)n[b]=e;return!0};Jp.prototype._unpad=function(n){for(var b=n[n.length-1],e=n.length-b;e<n.length;e++)X2.equal(n[e],b);return n.slice(0,n.length-b)};Jp.prototype._encrypt=function(n,b,e,m,a){for(var g=0;g<n.keys.length;g+=2){var l=n.keys[g],q=n.keys[g+1];mk.expand(e,n.tmp,0);l^=n.tmp[0];q^=n.tmp[1];l=mk.substitute(l,q);q=e;e=(b^mk.permute(l))>>>0;b=q}mk.rip(e,b,m,a)};Jp.prototype._decrypt=function(n,b,e,m,a){for(var g=n.keys.length-
2;0<=g;g-=2){var l=n.keys[g],q=n.keys[g+1];mk.expand(e,n.tmp,0);l^=n.tmp[0];q^=n.tmp[1];l=mk.substitute(l,q);q=e;e=(b^mk.permute(l))>>>0;b=q}mk.rip(e,b,m,a)};var EI={},m9=Sp,dha=zh,FI={};EI.instantiate=function(n){function b(g){n.call(this,g);this._cbcInit()}dha(b,n);for(var e=Object.keys(FI),m=0;m<e.length;m++){var a=e[m];b.prototype[a]=FI[a]}return b.create=function(g){return new b(g)},b};FI._cbcInit=function(){this._cbcState=new l9(this.options.iv)};FI._update=function(n,b,e,m){var a=this.constructor.super_.prototype,
g=this._cbcState.iv;if("encrypt"===this.type){for(var l=0;l<this.blockSize;l++)g[l]^=n[b+l];a._update.call(this,g,0,e,m);for(l=0;l<this.blockSize;l++)g[l]=e[m+l]}else{a._update.call(this,n,b,e,m);for(l=0;l<this.blockSize;l++)e[m+l]^=g[l];for(l=0;l<this.blockSize;l++)g[l]=n[b+l]}};var o9=Sp,JW=Eo,Pv=Jp;zh(xs,JW);xs.create=function(n){return new xs(n)};xs.prototype._update=function(n,b,e,m){var a=this._edeState;a.ciphers[0]._update(n,b,e,m);a.ciphers[1]._update(e,m,e,m);a.ciphers[2]._update(e,m,e,m)};
xs.prototype._pad=Pv.prototype._pad;xs.prototype._unpad=Pv.prototype._unpad;var nG="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,KW=Xl,eha=zh,Ix=qi.Buffer,lC={"des-ede3-cbc":EI.instantiate(xs),"des-ede3":xs,"des-ede-cbc":EI.instantiate(xs),"des-ede":xs,"des-cbc":EI.instantiate(Jp),"des-ecb":Jp};lC.des=lC["des-cbc"];lC.des3=lC["des-ede3-cbc"];eha(mG,KW);mG.prototype._update=function(n){return Ix.from((this||nG)._des.update(n))};mG.prototype._final=function(){return Ix.from((this||
nG)._des.final())};var fha=Rh.Buffer,MA=function(n,b){for(var e=Math.min(n.length,b.length),m=new fha(e),a=0;a<e;++a)m[a]=n[a]^b[a];return m},Y2=function(n){for(var b,e=n.length;e--;){if(255!==(b=n.readUInt8(e))){b++;n.writeUInt8(b,e);break}n.writeUInt8(0,e)}},Z2={},mC=qi.Buffer,p9=MA;Z2.encrypt=function(n,b,e){for(var m,a=mC.allocUnsafe(0);b.length;){if(0===n._cache.length&&(n._cache=n._cipher.encryptBlock(n._prev),n._prev=mC.allocUnsafe(0)),!(n._cache.length<=b.length)){a=mC.concat([a,LW(n,b,e)]);
break}m=n._cache.length;a=mC.concat([a,LW(n,b.slice(0,m),e)]);b=b.slice(m)}return a};var $2={},vP=qi.Buffer;$2.encrypt=function(n,b,e){for(var m=b.length,a=vP.allocUnsafe(m),g=-1;++g<m;){var l=g;var q=n;var r=b[g],u=e,v=q._cipher.encryptBlock(q._prev)[0]^r;q=(q._prev=vP.concat([q._prev.slice(1),vP.from([u?r:v])]),v);a[l]=q}return a};var a3={},GI=qi.Buffer;a3.encrypt=function(n,b,e){for(var m=b.length,a=GI.allocUnsafe(m),g=-1;++g<m;){for(var l=g,q,r,u=n,v=b[g],y=e,z=-1,A=0;8>++z;){r=v&1<<7-z?128:0;
A+=(128&(q=u._cipher.encryptBlock(u._prev)[0]^r))>>z%8;var B=u,G=u._prev;q=y?r:q;r=G.length;var E=-1,K=GI.allocUnsafe(G.length);for(G=GI.concat([G,GI.from([q])]);++E<r;)K[E]=G[E]<<1|G[E+1]>>7;B._prev=K}a[l]=A}return a};var b3={},gha=Rh.Buffer;b3.encrypt=function(n,b){for(;n._cache.length<b.length;)n._cache=gha.concat([n._cache,q9(n)]);var e=n._cache.slice(0,b.length);return n._cache=n._cache.slice(b.length),MA(b,e)};var wP={},c3=qi.Buffer;wP.encrypt=function(n,b){var e=Math.ceil(b.length/16),m=n._cache.length;
n._cache=c3.concat([n._cache,c3.allocUnsafe(16*e)]);for(var a=0;a<e;a++){var g=n;var l=g._cipher.encryptBlockRaw(g._prev);g=(Y2(g._prev),l);l=m+16*a;n._cache.writeUInt32BE(g[0],l+0);n._cache.writeUInt32BE(g[1],l+4);n._cache.writeUInt32BE(g[2],l+8);n._cache.writeUInt32BE(g[3],l+12)}e=n._cache.slice(0,b.length);return n._cache=n._cache.slice(b.length),MA(b,e)};var qy={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},
"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},
"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",
key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",
type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},hha={ECB:{encrypt:function(n,b){return n._cipher.encryptBlock(b)},decrypt:function(n,b){return n._cipher.decryptBlock(b)}},CBC:{encrypt:function(n,b){b=MA(b,n._prev);return n._prev=n._cipher.encryptBlock(b),n._prev},decrypt:function(n,b){var e=n._prev;n._prev=b;n=n._cipher.decryptBlock(b);return MA(n,e)}},CFB:Z2,CFB8:$2,CFB1:a3,OFB:b3,CTR:wP,GCM:wP},xP;
for(xP in qy)qy[xP].module=hha[qy[xP].mode];var Lp="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,PD={},oG=qi.Buffer,iha=[0,1,2,4,8,16,32,64,128,27,54],kl=function(){for(var n=Array(256),b=0;256>b;b++)n[b]=128>b?b<<1:b<<1^283;b=[];for(var e=[],m=[[],[],[],[]],a=[[],[],[],[]],g=0,l=0,q=0;256>q;++q){var r=l^l<<1^l<<2^l<<3^l<<4;r=r>>>8^255&r^99;b[g]=r;e[r]=g;var u=n[g],v=n[u],y=n[v],z=257*n[r]^16843008*r;m[0][g]=z<<24|z>>>8;m[1][g]=z<<16|z>>>16;m[2][g]=z<<8|z>>>24;m[3][g]=
z;z=16843009*y^65537*v^257*u^16843008*g;a[0][r]=z<<24|z>>>8;a[1][r]=z<<16|z>>>16;a[2][r]=z<<8|z>>>24;a[3][r]=z;0===g?g=l=1:(g=u^n[n[n[y^u]]],l^=n[n[l]])}return{SBOX:b,INV_SBOX:e,SUB_MIX:m,INV_SUB_MIX:a}}();Kp.blockSize=16;Kp.keySize=32;Kp.prototype.blockSize=Kp.blockSize;Kp.prototype.keySize=Kp.keySize;Kp.prototype._reset=function(){for(var n=(this||Lp)._key,b=n.length,e=b+6,m=4*(e+1),a=[],g=0;g<b;g++)a[g]=n[g];for(g=b;g<m;g++)n=a[g-1],0==g%b?(n=n<<8|n>>>24,n=kl.SBOX[n>>>24]<<24|kl.SBOX[n>>>16&255]<<
16|kl.SBOX[n>>>8&255]<<8|kl.SBOX[255&n],n^=iha[g/b|0]<<24):6<b&&4==g%b&&(n=kl.SBOX[n>>>24]<<24|kl.SBOX[n>>>16&255]<<16|kl.SBOX[n>>>8&255]<<8|kl.SBOX[255&n]),a[g]=a[g-b]^n;b=[];for(g=0;g<m;g++){n=m-g;var l=a[n-(g%4?0:4)];b[g]=4>g||4>=n?l:kl.INV_SUB_MIX[0][kl.SBOX[l>>>24]]^kl.INV_SUB_MIX[1][kl.SBOX[l>>>16&255]]^kl.INV_SUB_MIX[2][kl.SBOX[l>>>8&255]]^kl.INV_SUB_MIX[3][kl.SBOX[255&l]]}(this||Lp)._nRounds=e;(this||Lp)._keySchedule=a;(this||Lp)._invKeySchedule=b};Kp.prototype.encryptBlockRaw=function(n){return MW(HL(n),
(this||Lp)._keySchedule,kl.SUB_MIX,kl.SBOX,(this||Lp)._nRounds)};Kp.prototype.encryptBlock=function(n){n=this.encryptBlockRaw(n);var b=oG.allocUnsafe(16);return b.writeUInt32BE(n[0],0),b.writeUInt32BE(n[1],4),b.writeUInt32BE(n[2],8),b.writeUInt32BE(n[3],12),b};Kp.prototype.decryptBlock=function(n){var b=(n=HL(n))[1];n[1]=n[3];n[3]=b;n=MW(n,(this||Lp)._invKeySchedule,kl.INV_SUB_MIX,kl.INV_SBOX,(this||Lp)._nRounds);b=oG.allocUnsafe(16);return b.writeUInt32BE(n[0],0),b.writeUInt32BE(n[3],4),b.writeUInt32BE(n[2],
8),b.writeUInt32BE(n[1],12),b};Kp.prototype.scrub=function(){IL((this||Lp)._keySchedule);IL((this||Lp)._invKeySchedule);IL((this||Lp)._key)};PD.AES=Kp;var tm="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Rz=qi.Buffer,jha=Rz.alloc(16,0);nC.prototype.ghash=function(n){for(var b=-1;++b<n.length;)(this||tm).state[b]^=n[b];this._multiply()};nC.prototype._multiply=function(){for(var n,b,e=[(n=(this||tm).h).readUInt32BE(0),n.readUInt32BE(4),n.readUInt32BE(8),n.readUInt32BE(12)],
m=[0,0,0,0],a=-1;128>++a;){0!=((this||tm).state[~~(a/8)]&1<<7-a%8)&&(m[0]^=e[0],m[1]^=e[1],m[2]^=e[2],m[3]^=e[3]);b=0!=(1&e[3]);for(n=3;0<n;n--)e[n]=e[n]>>>1|(1&e[n-1])<<31;e[0]>>>=1;b&&(e[0]^=-520093696)}(this||tm).state=NW(m)};nC.prototype.update=function(n){for((this||tm).cache=Rz.concat([(this||tm).cache,n]);16<=(this||tm).cache.length;)n=(this||tm).cache.slice(0,16),(this||tm).cache=(this||tm).cache.slice(16),this.ghash(n)};nC.prototype.final=function(n,b){return(this||tm).cache.length&&this.ghash(Rz.concat([(this||
tm).cache,jha],16)),this.ghash(NW([0,n,0,b])),(this||tm).state};var Yg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,r9=PD,Tn=qi.Buffer,OW=Xl,PW=nC,s9=Y2;zh(Qv,OW);Qv.prototype._update=function(n){if(!(this||Yg)._called&&(this||Yg)._alen){var b=16-(this||Yg)._alen%16;16>b&&(b=Tn.alloc(b,0),(this||Yg)._ghash.update(b))}(this||Yg)._called=!0;b=(this||Yg)._mode.encrypt(this||Yg,n);return(this||Yg)._decrypt?(this||Yg)._ghash.update(n):(this||Yg)._ghash.update(b),(this||
Yg)._len+=n.length,b};Qv.prototype._final=function(){if((this||Yg)._decrypt&&!(this||Yg)._authTag)throw Error("Unsupported state or unable to authenticate data");var n=MA((this||Yg)._ghash.final(8*(this||Yg)._alen,8*(this||Yg)._len),(this||Yg)._cipher.encryptBlock((this||Yg)._finID)),b;if(b=(this||Yg)._decrypt){b=(this||Yg)._authTag;var e=0;n.length!==b.length&&e++;for(var m=Math.min(n.length,b.length),a=0;a<m;++a)e+=n[a]^b[a];b=e}if(b)throw Error("Unsupported state or unable to authenticate data");
(this||Yg)._authTag=n;(this||Yg)._cipher.scrub()};Qv.prototype.getAuthTag=function(){if((this||Yg)._decrypt||!Tn.isBuffer((this||Yg)._authTag))throw Error("Attempting to get auth tag in unsupported state");return(this||Yg)._authTag};Qv.prototype.setAuthTag=function(n){if(!(this||Yg)._decrypt)throw Error("Attempting to set auth tag in unsupported state");(this||Yg)._authTag=n};Qv.prototype.setAAD=function(n){if((this||Yg)._called)throw Error("Attempting to set AAD in unsupported state");(this||Yg)._ghash.update(n);
(this||Yg)._alen+=n.length};var Tq="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,t9=PD,JL=qi.Buffer,QW=Xl;zh(oC,QW);oC.prototype._update=function(n){return(this||Tq)._mode.encrypt(this||Tq,n,(this||Tq)._decrypt)};oC.prototype._final=function(){(this||Tq)._cipher.scrub()};var ry=qi.Buffer,tC=function(n,b,e,m){if(ry.isBuffer(n)||(n=ry.from(n,"binary")),b&&(ry.isBuffer(b)||(b=ry.from(b,"binary")),8!==b.length))throw new RangeError("salt should be Buffer with 8 byte length");
e/=8;for(var a=ry.alloc(e),g=ry.alloc(m||0),l=ry.alloc(0);0<e||0<m;){var q=new Mz;q.update(l);q.update(n);b&&q.update(b);l=q.digest();q=0;if(0<e){var r=a.length-e;q=Math.min(e,l.length);l.copy(a,r,0,q);e-=q}q<l.length&&0<m&&(r=Math.min(m,l.length-q),l.copy(g,g.length-m,q,q+r),m-=r)}return l.fill(0),{key:a,iv:g}},Si="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,w9=Qv,Sz=qi.Buffer,TW=qy,v9=oC,RW=Xl,u9=PD;zh(pC,RW);pC.prototype._update=function(n){var b;(this||Si)._cache.add(n);
for(n=[];b=(this||Si)._cache.get((this||Si)._autopadding);)b=(this||Si)._mode.decrypt(this||Si,b),n.push(b);return Sz.concat(n)};pC.prototype._final=function(){var n=(this||Si)._cache.flush();if((this||Si)._autopadding){n=(this||Si)._mode.decrypt(this||Si,n);var b=n[15];if(1>b||16<b)throw Error("unable to decrypt data");for(var e=-1;++e<b;)if(n[e+(16-b)]!==b)throw Error("unable to decrypt data");n=16===b?void 0:n.slice(0,16-b);return n}if(n)throw Error("data not multiple of block length");};pC.prototype.setAutoPadding=
function(n){return(this||Si)._autopadding=!!n,this||Si};pG.prototype.add=function(n){(this||Si).cache=Sz.concat([(this||Si).cache,n])};pG.prototype.get=function(n){var b;if(n){if(16<(this||Si).cache.length)return b=(this||Si).cache.slice(0,16),(this||Si).cache=(this||Si).cache.slice(16),b}else if(16<=(this||Si).cache.length)return b=(this||Si).cache.slice(0,16),(this||Si).cache=(this||Si).cache.slice(16),b;return null};pG.prototype.flush=function(){if((this||Si).cache.length)return(this||Si).cache};
var Ej="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,WW=qy,z9=Qv,ku=qi.Buffer,y9=oC,UW=Xl,x9=PD;zh(qC,UW);qC.prototype._update=function(n){var b;(this||Ej)._cache.add(n);for(n=[];b=(this||Ej)._cache.get();)b=(this||Ej)._mode.encrypt(this||Ej,b),n.push(b);return ku.concat(n)};var kha=ku.alloc(16,16);qC.prototype._final=function(){var n=(this||Ej)._cache.flush();if((this||Ej)._autopadding)return n=(this||Ej)._mode.encrypt(this||Ej,n),(this||Ej)._cipher.scrub(),n;if(!n.equals(kha))throw(this||
Ej)._cipher.scrub(),Error("data not multiple of block length");};qC.prototype.setAutoPadding=function(n){return(this||Ej)._autopadding=!!n,this||Ej};qG.prototype.add=function(n){(this||Ej).cache=ku.concat([(this||Ej).cache,n])};qG.prototype.get=function(){if(15<(this||Ej).cache.length){var n=(this||Ej).cache.slice(0,16);return(this||Ej).cache=(this||Ej).cache.slice(16),n}return null};qG.prototype.flush=function(){for(var n=16-(this||Ej).cache.length,b=ku.allocUnsafe(n),e=-1;++e<n;)b.writeUInt8(n,
e);return ku.concat([(this||Ej).cache,b])};var Go={};Go.createCipher=Go.Cipher=function(n,b){var e=WW[n.toLowerCase()];if(!e)throw new TypeError("invalid suite type");b=tC(b,!1,e.key,e.iv);return VW(n,b.key,b.iv)};Go.createCipheriv=Go.Cipheriv=VW;Go.createDecipher=Go.Decipher=function(n,b){var e=TW[n.toLowerCase()];if(!e)throw new TypeError("invalid suite type");b=tC(b,!1,e.key,e.iv);return SW(n,b.key,b.iv)};Go.createDecipheriv=Go.Decipheriv=SW;Go.listCiphers=Go.getCiphers=function(){return Object.keys(qy)};
var ww={"des-ecb":{key:8,iv:0}};ww["des-cbc"]=ww.des={key:8,iv:8};ww["des-ede3-cbc"]=ww.des3={key:24,iv:8};ww["des-ede3"]={key:24,iv:0};ww["des-ede-cbc"]={key:16,iv:8};ww["des-ede"]={key:16,iv:0};var d3,e3,f3,XW=mG,LL=Go,Rv=qy,lu=ww;var lha=d3=function(n,b){if(n=n.toLowerCase(),Rv[n]){var e=Rv[n].key;var m=Rv[n].iv}else{if(!lu[n])throw new TypeError("invalid suite type");e=8*lu[n].key;m=lu[n].iv}b=tC(b,!1,e,m);return KL(n,b.key,b.iv)};var mha=e3=function(n,b){if(n=n.toLowerCase(),Rv[n]){var e=Rv[n].key;
var m=Rv[n].iv}else{if(!lu[n])throw new TypeError("invalid suite type");e=8*lu[n].key;m=lu[n].iv}b=tC(b,!1,e,m);return ML(n,b.key,b.iv)};var nha=f3=function(){return Object.keys(lu).concat(LL.getCiphers())};var oha=Object.freeze({}),Ma="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,g3={},h3={exports:g3};!function(n,b){function e(D,O){if(!D)throw Error(O||"Assertion failed");}function m(D,O){D.super_=O;var L=function(){};L.prototype=O.prototype;D.prototype=new L;D.prototype.constructor=
D}function a(D,O,L){if(a.isBN(D))return D;(this||Ma).negative=0;(this||Ma).words=null;(this||Ma).length=0;(this||Ma).red=null;null!==D&&("le"!==O&&"be"!==O||(L=O,O=10),this._init(D||0,O||10,L||"be"))}function g(D,O,L){var N=0;for(L=Math.min(D.length,L);O<L;O++){var aa=D.charCodeAt(O)-48;N<<=4;N|=49<=aa&&54>=aa?aa-49+10:17<=aa&&22>=aa?aa-17+10:15&aa}return N}function l(D,O,L,N){var aa=0;for(L=Math.min(D.length,L);O<L;O++){var Y=D.charCodeAt(O)-48;aa*=N;aa+=49<=Y?Y-49+10:17<=Y?Y-17+10:Y}return aa}function q(D,
O,L){L.negative=O.negative^D.negative;var N=D.length+O.length|0;L.length=N;N=N-1|0;var aa=(0|D.words[0])*(0|O.words[0]),Y=aa/67108864|0;L.words[0]=67108863&aa;for(var ma=1;ma<N;ma++){var bb=Y>>>26;aa=67108863&Y;Y=Math.min(ma,O.length-1);for(var Qa=Math.max(0,ma-D.length+1);Qa<=Y;Qa++)bb+=(aa=(0|D.words[ma-Qa|0])*(0|O.words[Qa])+aa)/67108864|0,aa&=67108863;L.words[ma]=0|aa;Y=0|bb}return 0!==Y?L.words[ma]=0|Y:L.length--,L.strip()}function r(D,O){(this||Ma).x=D;(this||Ma).y=O}function u(D,O){(this||
Ma).name=D;(this||Ma).p=new a(O,16);(this||Ma).n=(this||Ma).p.bitLength();(this||Ma).k=(new a(1)).iushln((this||Ma).n).isub((this||Ma).p);(this||Ma).tmp=this._tmp()}function v(){u.call(this||Ma,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){u.call(this||Ma,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function z(){u.call(this||Ma,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){u.call(this||Ma,"25519",
"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function B(D){"string"==typeof D?(D=a._prime(D),(this||Ma).m=D.p,(this||Ma).prime=D):(e(D.gtn(1),"modulus must be greater than 1"),(this||Ma).m=D,(this||Ma).prime=null)}function G(D){B.call(this||Ma,D);(this||Ma).shift=(this||Ma).m.bitLength();0!=(this||Ma).shift%26&&((this||Ma).shift+=26-(this||Ma).shift%26);(this||Ma).r=(new a(1)).iushln((this||Ma).shift);(this||Ma).r2=this.imod((this||Ma).r.sqr());(this||Ma).rinv=(this||Ma).r._invmp((this||
Ma).m);(this||Ma).minv=(this||Ma).rinv.mul((this||Ma).r).isubn(1).div((this||Ma).m);(this||Ma).minv=(this||Ma).minv.umod((this||Ma).r);(this||Ma).minv=(this||Ma).r.sub((this||Ma).minv)}"object"==typeof n?n.exports=a:b.BN=a;a.BN=a;a.wordSize=26;try{var E=oha.Buffer}catch(D){}a.isBN=function(D){return D instanceof a||null!==D&&"object"==typeof D&&D.constructor.wordSize===a.wordSize&&Array.isArray(D.words)};a.max=function(D,O){return 0<D.cmp(O)?D:O};a.min=function(D,O){return 0>D.cmp(O)?D:O};a.prototype._init=
function(D,O,L){if("number"==typeof D)return this._initNumber(D,O,L);if("object"==typeof D)return this._initArray(D,O,L);"hex"===O&&(O=16);e(O===(0|O)&&2<=O&&36>=O);var N=0;"-"===(D=D.toString().replace(/\s+/g,""))[0]&&N++;16===O?this._parseHex(D,N):this._parseBase(D,O,N);"-"===D[0]&&((this||Ma).negative=1);this.strip();"le"===L&&this._initArray(this.toArray(),O,L)};a.prototype._initNumber=function(D,O,L){0>D&&((this||Ma).negative=1,D=-D);67108864>D?((this||Ma).words=[67108863&D],(this||Ma).length=
1):4503599627370496>D?((this||Ma).words=[67108863&D,D/67108864&67108863],(this||Ma).length=2):(e(9007199254740992>D),(this||Ma).words=[67108863&D,D/67108864&67108863,1],(this||Ma).length=3);"le"===L&&this._initArray(this.toArray(),O,L)};a.prototype._initArray=function(D,O,L){if(e("number"==typeof D.length),0>=D.length)return(this||Ma).words=[0],(this||Ma).length=1,this||Ma;(this||Ma).length=Math.ceil(D.length/3);(this||Ma).words=Array((this||Ma).length);for(O=0;O<(this||Ma).length;O++)(this||Ma).words[O]=
0;var N=0;if("be"===L)for(O=D.length-1,L=0;0<=O;O-=3){var aa=D[O]|D[O-1]<<8|D[O-2]<<16;(this||Ma).words[L]|=aa<<N&67108863;(this||Ma).words[L+1]=aa>>>26-N&67108863;26<=(N+=24)&&(N-=26,L++)}else if("le"===L)for(L=O=0;O<D.length;O+=3)aa=D[O]|D[O+1]<<8|D[O+2]<<16,(this||Ma).words[L]|=aa<<N&67108863,(this||Ma).words[L+1]=aa>>>26-N&67108863,26<=(N+=24)&&(N-=26,L++);return this.strip()};a.prototype._parseHex=function(D,O){(this||Ma).length=Math.ceil((D.length-O)/6);(this||Ma).words=Array((this||Ma).length);
for(var L=0;L<(this||Ma).length;L++)(this||Ma).words[L]=0;var N,aa=0;L=D.length-6;for(N=0;L>=O;L-=6){var Y=g(D,L,L+6);(this||Ma).words[N]|=Y<<aa&67108863;(this||Ma).words[N+1]|=Y>>>26-aa&4194303;26<=(aa+=24)&&(aa-=26,N++)}L+6!==O&&(Y=g(D,O,L+6),(this||Ma).words[N]|=Y<<aa&67108863,(this||Ma).words[N+1]|=Y>>>26-aa&4194303);this.strip()};a.prototype._parseBase=function(D,O,L){(this||Ma).words=[0];(this||Ma).length=1;for(var N=0,aa=1;67108863>=aa;aa*=O)N++;N--;aa=aa/O|0;var Y=D.length-L,ma=Y%N;Y=Math.min(Y,
Y-ma)+L;for(var bb=L;bb<Y;bb+=N)L=l(D,bb,bb+N,O),this.imuln(aa),67108864>(this||Ma).words[0]+L?(this||Ma).words[0]+=L:this._iaddn(L);if(0!==ma){N=1;L=l(D,bb,D.length,O);for(bb=0;bb<ma;bb++)N*=O;this.imuln(N);67108864>(this||Ma).words[0]+L?(this||Ma).words[0]+=L:this._iaddn(L)}};a.prototype.copy=function(D){D.words=Array((this||Ma).length);for(var O=0;O<(this||Ma).length;O++)D.words[O]=(this||Ma).words[O];D.length=(this||Ma).length;D.negative=(this||Ma).negative;D.red=(this||Ma).red};a.prototype.clone=
function(){var D=new a(null);return this.copy(D),D};a.prototype._expand=function(D){for(;(this||Ma).length<D;)(this||Ma).words[(this||Ma).length++]=0;return this||Ma};a.prototype.strip=function(){for(;1<(this||Ma).length&&0===(this||Ma).words[(this||Ma).length-1];)(this||Ma).length--;return this._normSign()};a.prototype._normSign=function(){return 1===(this||Ma).length&&0===(this||Ma).words[0]&&((this||Ma).negative=0),this||Ma};a.prototype.inspect=function(){return((this||Ma).red?"<BN-R: ":"<BN: ")+
this.toString(16)+">"};var K=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),J=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],P=[0,0,33554432,43046721,
16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(D,O){if(O=0|O||1,16===(D=D||10)||"hex"===D){var L="";for(var N=D=0,aa=0;aa<(this||Ma).length;aa++){var Y=(this||Ma).words[aa],ma=(16777215&(Y<<D|N)).toString(16);L=0!==(N=Y>>>24-D&16777215)||
aa!==(this||Ma).length-1?K[6-ma.length]+ma+L:ma+L;26<=(D+=2)&&(D-=26,aa--)}for(0!==N&&(L=N.toString(16)+L);0!=L.length%O;)L="0"+L;return 0!==(this||Ma).negative&&(L="-"+L),L}if(D===(0|D)&&2<=D&&36>=D){N=J[D];aa=P[D];L="";Y=this.clone();for(Y.negative=0;!Y.isZero();)ma=Y.modn(aa).toString(D),L=(Y=Y.idivn(aa)).isZero()?ma+L:K[N-ma.length]+ma+L;for(this.isZero()&&(L="0"+L);0!=L.length%O;)L="0"+L;return 0!==(this||Ma).negative&&(L="-"+L),L}e(!1,"Base should be between 2 and 36")};a.prototype.toNumber=
function(){var D=(this||Ma).words[0];return 2===(this||Ma).length?D+=67108864*(this||Ma).words[1]:3===(this||Ma).length&&1===(this||Ma).words[2]?D+=4503599627370496+67108864*(this||Ma).words[1]:2<(this||Ma).length&&e(!1,"Number can only safely store up to 53 bits"),0!==(this||Ma).negative?-D:D};a.prototype.toJSON=function(){return this.toString(16)};a.prototype.toBuffer=function(D,O){return e(void 0!==E),this.toArrayLike(E,D,O)};a.prototype.toArray=function(D,O){return this.toArrayLike(Array,D,O)};
a.prototype.toArrayLike=function(D,O,L){var N=this.byteLength();L=L||Math.max(1,N);e(N<=L,"byte array longer than desired length");e(0<L,"Requested array length <= 0");this.strip();var aa="le"===O;D=new D(L);O=this.clone();if(aa){for(aa=0;!O.isZero();aa++)N=O.andln(255),O.iushrn(8),D[aa]=N;for(;aa<L;aa++)D[aa]=0}else{for(aa=0;aa<L-N;aa++)D[aa]=0;for(aa=0;!O.isZero();aa++)N=O.andln(255),O.iushrn(8),D[L-aa-1]=N}return D};Math.clz32?a.prototype._countBits=function(D){return 32-Math.clz32(D)}:a.prototype._countBits=
function(D){var O=0;return 4096<=D&&(O+=13,D>>>=13),64<=D&&(O+=7,D>>>=7),8<=D&&(O+=4,D>>>=4),2<=D&&(O+=2,D>>>=2),O+D};a.prototype._zeroBits=function(D){if(0===D)return 26;var O=0;return 0==(8191&D)&&(O+=13,D>>>=13),0==(127&D)&&(O+=7,D>>>=7),0==(15&D)&&(O+=4,D>>>=4),0==(3&D)&&(O+=2,D>>>=2),0==(1&D)&&O++,O};a.prototype.bitLength=function(){var D=this._countBits((this||Ma).words[(this||Ma).length-1]);return 26*((this||Ma).length-1)+D};a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=
0,O=0;O<(this||Ma).length;O++){var L=this._zeroBits((this||Ma).words[O]);if(D+=L,26!==L)break}return D};a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};a.prototype.toTwos=function(D){return 0!==(this||Ma).negative?this.abs().inotn(D).iaddn(1):this.clone()};a.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()};a.prototype.isNeg=function(){return 0!==(this||Ma).negative};a.prototype.neg=function(){return this.clone().ineg()};a.prototype.ineg=
function(){return this.isZero()||((this||Ma).negative^=1),this||Ma};a.prototype.iuor=function(D){for(;(this||Ma).length<D.length;)(this||Ma).words[(this||Ma).length++]=0;for(var O=0;O<D.length;O++)(this||Ma).words[O]|=D.words[O];return this.strip()};a.prototype.ior=function(D){return e(0==((this||Ma).negative|D.negative)),this.iuor(D)};a.prototype.or=function(D){return(this||Ma).length>D.length?this.clone().ior(D):D.clone().ior(this||Ma)};a.prototype.uor=function(D){return(this||Ma).length>D.length?
this.clone().iuor(D):D.clone().iuor(this||Ma)};a.prototype.iuand=function(D){var O=(this||Ma).length>D.length?D:this||Ma;for(var L=0;L<O.length;L++)(this||Ma).words[L]&=D.words[L];return(this||Ma).length=O.length,this.strip()};a.prototype.iand=function(D){return e(0==((this||Ma).negative|D.negative)),this.iuand(D)};a.prototype.and=function(D){return(this||Ma).length>D.length?this.clone().iand(D):D.clone().iand(this||Ma)};a.prototype.uand=function(D){return(this||Ma).length>D.length?this.clone().iuand(D):
D.clone().iuand(this||Ma)};a.prototype.iuxor=function(D){var O,L;(this||Ma).length>D.length?(O=this||Ma,L=D):(O=D,L=this||Ma);for(D=0;D<L.length;D++)(this||Ma).words[D]=O.words[D]^L.words[D];if((this||Ma)!==O)for(;D<O.length;D++)(this||Ma).words[D]=O.words[D];return(this||Ma).length=O.length,this.strip()};a.prototype.ixor=function(D){return e(0==((this||Ma).negative|D.negative)),this.iuxor(D)};a.prototype.xor=function(D){return(this||Ma).length>D.length?this.clone().ixor(D):D.clone().ixor(this||Ma)};
a.prototype.uxor=function(D){return(this||Ma).length>D.length?this.clone().iuxor(D):D.clone().iuxor(this||Ma)};a.prototype.inotn=function(D){e("number"==typeof D&&0<=D);var O=0|Math.ceil(D/26);D%=26;this._expand(O);0<D&&O--;for(var L=0;L<O;L++)(this||Ma).words[L]=67108863&~(this||Ma).words[L];return 0<D&&((this||Ma).words[L]=~(this||Ma).words[L]&67108863>>26-D),this.strip()};a.prototype.notn=function(D){return this.clone().inotn(D)};a.prototype.setn=function(D,O){e("number"==typeof D&&0<=D);var L=
D/26|0;D%=26;return this._expand(L+1),(this||Ma).words[L]=O?(this||Ma).words[L]|1<<D:(this||Ma).words[L]&~(1<<D),this.strip()};a.prototype.iadd=function(D){var O,L,N;if(0!==(this||Ma).negative&&0===D.negative)return(this||Ma).negative=0,this.isub(D),(this||Ma).negative^=1,this._normSign();if(0===(this||Ma).negative&&0!==D.negative)return D.negative=0,O=this.isub(D),D.negative=1,O._normSign();(this||Ma).length>D.length?(L=this||Ma,N=D):(L=D,N=this||Ma);for(D=O=0;D<N.length;D++)O=(0|L.words[D])+(0|
N.words[D])+O,(this||Ma).words[D]=67108863&O,O>>>=26;for(;0!==O&&D<L.length;D++)O=(0|L.words[D])+O,(this||Ma).words[D]=67108863&O,O>>>=26;if((this||Ma).length=L.length,0!==O)(this||Ma).words[(this||Ma).length]=O,(this||Ma).length++;else if(L!==(this||Ma))for(;D<L.length;D++)(this||Ma).words[D]=L.words[D];return this||Ma};a.prototype.add=function(D){var O;return 0!==D.negative&&0===(this||Ma).negative?(D.negative=0,O=this.sub(D),D.negative^=1,O):0===D.negative&&0!==(this||Ma).negative?((this||Ma).negative=
0,O=D.sub(this||Ma),(this||Ma).negative=1,O):(this||Ma).length>D.length?this.clone().iadd(D):D.clone().iadd(this||Ma)};a.prototype.isub=function(D){if(0!==D.negative){D.negative=0;var O=this.iadd(D);return D.negative=1,O._normSign()}if(0!==(this||Ma).negative)return(this||Ma).negative=0,this.iadd(D),(this||Ma).negative=1,this._normSign();var L,N;O=this.cmp(D);if(0===O)return(this||Ma).negative=0,(this||Ma).length=1,(this||Ma).words[0]=0,this||Ma;0<O?(L=this||Ma,N=D):(L=D,N=this||Ma);for(var aa=D=
0;aa<N.length;aa++)D=(O=(0|L.words[aa])-(0|N.words[aa])+D)>>26,(this||Ma).words[aa]=67108863&O;for(;0!==D&&aa<L.length;aa++)D=(O=(0|L.words[aa])+D)>>26,(this||Ma).words[aa]=67108863&O;if(0===D&&aa<L.length&&L!==(this||Ma))for(;aa<L.length;aa++)(this||Ma).words[aa]=L.words[aa];return(this||Ma).length=Math.max((this||Ma).length,aa),L!==(this||Ma)&&((this||Ma).negative=1),this.strip()};a.prototype.sub=function(D){return this.clone().isub(D)};var ea=function(D,O,L){var N=D.words,aa=O.words,Y=L.words,
ma=0|N[0],bb=8191&ma;ma>>>=13;var Qa=0|N[1],X=8191&Qa;Qa>>>=13;var V=0|N[2],ha=8191&V;V>>>=13;var xa=0|N[3],yb=8191&xa;xa>>>=13;var ec=0|N[4],Nb=8191&ec;ec>>>=13;var ac=0|N[5],Cc=8191&ac;ac>>>=13;var Hb=0|N[6],gd=8191&Hb;Hb>>>=13;var yd=0|N[7],U=8191&yd;yd>>>=13;var na=0|N[8],Aa=8191&na;na>>>=13;var hb=0|N[9];N=8191&hb;hb>>>=13;var Pb=0|aa[0],od=8191&Pb,nd=Pb>>>13,Ac=0|aa[1];Pb=8191&Ac;var xe=Ac>>>13,oe=0|aa[2];Ac=8191&oe;var jh=oe>>>13,Kg=0|aa[3];oe=8191&Kg;var vi=Kg>>>13,pi=0|aa[4];Kg=8191&pi;var aj=
pi>>>13,yj=0|aa[5];pi=8191&yj;var Hj=yj>>>13,Ij=0|aa[6];yj=8191&Ij;var fi=Ij>>>13,bj=0|aa[7];Ij=8191&bj;var Jj=bj>>>13,cj=0|aa[8];bj=8191&cj;cj>>>=13;var Kj=0|aa[9];aa=8191&Kj;Kj>>>=13;L.negative=D.negative^O.negative;L.length=19;var EA=(0+Math.imul(bb,od)|0)+((8191&(D=(D=Math.imul(bb,nd))+Math.imul(ma,od)|0))<<13)|0;O=(Math.imul(ma,nd)+(D>>>13)|0)+(EA>>>26)|0;EA&=67108863;var td=Math.imul(X,od);D=(D=Math.imul(X,nd))+Math.imul(Qa,od)|0;var ud=Math.imul(Qa,nd);var DA=(O+(td+Math.imul(bb,Pb)|0)|0)+
((8191&(D=(D=D+Math.imul(bb,xe)|0)+Math.imul(ma,Pb)|0))<<13)|0;O=((ud+Math.imul(ma,xe)|0)+(D>>>13)|0)+(DA>>>26)|0;DA&=67108863;td=Math.imul(ha,od);D=(D=Math.imul(ha,nd))+Math.imul(V,od)|0;ud=Math.imul(V,nd);td=td+Math.imul(X,Pb)|0;D=(D=D+Math.imul(X,xe)|0)+Math.imul(Qa,Pb)|0;ud=ud+Math.imul(Qa,xe)|0;var iy=(O+(td+Math.imul(bb,Ac)|0)|0)+((8191&(D=(D=D+Math.imul(bb,jh)|0)+Math.imul(ma,Ac)|0))<<13)|0;O=((ud+Math.imul(ma,jh)|0)+(D>>>13)|0)+(iy>>>26)|0;iy&=67108863;td=Math.imul(yb,od);D=(D=Math.imul(yb,
nd))+Math.imul(xa,od)|0;ud=Math.imul(xa,nd);td=td+Math.imul(ha,Pb)|0;D=(D=D+Math.imul(ha,xe)|0)+Math.imul(V,Pb)|0;ud=ud+Math.imul(V,xe)|0;td=td+Math.imul(X,Ac)|0;D=(D=D+Math.imul(X,jh)|0)+Math.imul(Qa,Ac)|0;ud=ud+Math.imul(Qa,jh)|0;var qw=(O+(td+Math.imul(bb,oe)|0)|0)+((8191&(D=(D=D+Math.imul(bb,vi)|0)+Math.imul(ma,oe)|0))<<13)|0;O=((ud+Math.imul(ma,vi)|0)+(D>>>13)|0)+(qw>>>26)|0;qw&=67108863;td=Math.imul(Nb,od);D=(D=Math.imul(Nb,nd))+Math.imul(ec,od)|0;ud=Math.imul(ec,nd);td=td+Math.imul(yb,Pb)|
0;D=(D=D+Math.imul(yb,xe)|0)+Math.imul(xa,Pb)|0;ud=ud+Math.imul(xa,xe)|0;td=td+Math.imul(ha,Ac)|0;D=(D=D+Math.imul(ha,jh)|0)+Math.imul(V,Ac)|0;ud=ud+Math.imul(V,jh)|0;td=td+Math.imul(X,oe)|0;D=(D=D+Math.imul(X,vi)|0)+Math.imul(Qa,oe)|0;ud=ud+Math.imul(Qa,vi)|0;var pD=(O+(td+Math.imul(bb,Kg)|0)|0)+((8191&(D=(D=D+Math.imul(bb,aj)|0)+Math.imul(ma,Kg)|0))<<13)|0;O=((ud+Math.imul(ma,aj)|0)+(D>>>13)|0)+(pD>>>26)|0;pD&=67108863;td=Math.imul(Cc,od);D=(D=Math.imul(Cc,nd))+Math.imul(ac,od)|0;ud=Math.imul(ac,
nd);td=td+Math.imul(Nb,Pb)|0;D=(D=D+Math.imul(Nb,xe)|0)+Math.imul(ec,Pb)|0;ud=ud+Math.imul(ec,xe)|0;td=td+Math.imul(yb,Ac)|0;D=(D=D+Math.imul(yb,jh)|0)+Math.imul(xa,Ac)|0;ud=ud+Math.imul(xa,jh)|0;td=td+Math.imul(ha,oe)|0;D=(D=D+Math.imul(ha,vi)|0)+Math.imul(V,oe)|0;ud=ud+Math.imul(V,vi)|0;td=td+Math.imul(X,Kg)|0;D=(D=D+Math.imul(X,aj)|0)+Math.imul(Qa,Kg)|0;ud=ud+Math.imul(Qa,aj)|0;var sD=(O+(td+Math.imul(bb,pi)|0)|0)+((8191&(D=(D=D+Math.imul(bb,Hj)|0)+Math.imul(ma,pi)|0))<<13)|0;O=((ud+Math.imul(ma,
Hj)|0)+(D>>>13)|0)+(sD>>>26)|0;sD&=67108863;td=Math.imul(gd,od);D=(D=Math.imul(gd,nd))+Math.imul(Hb,od)|0;ud=Math.imul(Hb,nd);td=td+Math.imul(Cc,Pb)|0;D=(D=D+Math.imul(Cc,xe)|0)+Math.imul(ac,Pb)|0;ud=ud+Math.imul(ac,xe)|0;td=td+Math.imul(Nb,Ac)|0;D=(D=D+Math.imul(Nb,jh)|0)+Math.imul(ec,Ac)|0;ud=ud+Math.imul(ec,jh)|0;td=td+Math.imul(yb,oe)|0;D=(D=D+Math.imul(yb,vi)|0)+Math.imul(xa,oe)|0;ud=ud+Math.imul(xa,vi)|0;td=td+Math.imul(ha,Kg)|0;D=(D=D+Math.imul(ha,aj)|0)+Math.imul(V,Kg)|0;ud=ud+Math.imul(V,
aj)|0;td=td+Math.imul(X,pi)|0;D=(D=D+Math.imul(X,Hj)|0)+Math.imul(Qa,pi)|0;ud=ud+Math.imul(Qa,Hj)|0;var tD=(O+(td+Math.imul(bb,yj)|0)|0)+((8191&(D=(D=D+Math.imul(bb,fi)|0)+Math.imul(ma,yj)|0))<<13)|0;O=((ud+Math.imul(ma,fi)|0)+(D>>>13)|0)+(tD>>>26)|0;tD&=67108863;td=Math.imul(U,od);D=(D=Math.imul(U,nd))+Math.imul(yd,od)|0;ud=Math.imul(yd,nd);td=td+Math.imul(gd,Pb)|0;D=(D=D+Math.imul(gd,xe)|0)+Math.imul(Hb,Pb)|0;ud=ud+Math.imul(Hb,xe)|0;td=td+Math.imul(Cc,Ac)|0;D=(D=D+Math.imul(Cc,jh)|0)+Math.imul(ac,
Ac)|0;ud=ud+Math.imul(ac,jh)|0;td=td+Math.imul(Nb,oe)|0;D=(D=D+Math.imul(Nb,vi)|0)+Math.imul(ec,oe)|0;ud=ud+Math.imul(ec,vi)|0;td=td+Math.imul(yb,Kg)|0;D=(D=D+Math.imul(yb,aj)|0)+Math.imul(xa,Kg)|0;ud=ud+Math.imul(xa,aj)|0;td=td+Math.imul(ha,pi)|0;D=(D=D+Math.imul(ha,Hj)|0)+Math.imul(V,pi)|0;ud=ud+Math.imul(V,Hj)|0;td=td+Math.imul(X,yj)|0;D=(D=D+Math.imul(X,fi)|0)+Math.imul(Qa,yj)|0;ud=ud+Math.imul(Qa,fi)|0;var uD=(O+(td+Math.imul(bb,Ij)|0)|0)+((8191&(D=(D=D+Math.imul(bb,Jj)|0)+Math.imul(ma,Ij)|0))<<
13)|0;O=((ud+Math.imul(ma,Jj)|0)+(D>>>13)|0)+(uD>>>26)|0;uD&=67108863;td=Math.imul(Aa,od);D=(D=Math.imul(Aa,nd))+Math.imul(na,od)|0;ud=Math.imul(na,nd);td=td+Math.imul(U,Pb)|0;D=(D=D+Math.imul(U,xe)|0)+Math.imul(yd,Pb)|0;ud=ud+Math.imul(yd,xe)|0;td=td+Math.imul(gd,Ac)|0;D=(D=D+Math.imul(gd,jh)|0)+Math.imul(Hb,Ac)|0;ud=ud+Math.imul(Hb,jh)|0;td=td+Math.imul(Cc,oe)|0;D=(D=D+Math.imul(Cc,vi)|0)+Math.imul(ac,oe)|0;ud=ud+Math.imul(ac,vi)|0;td=td+Math.imul(Nb,Kg)|0;D=(D=D+Math.imul(Nb,aj)|0)+Math.imul(ec,
Kg)|0;ud=ud+Math.imul(ec,aj)|0;td=td+Math.imul(yb,pi)|0;D=(D=D+Math.imul(yb,Hj)|0)+Math.imul(xa,pi)|0;ud=ud+Math.imul(xa,Hj)|0;td=td+Math.imul(ha,yj)|0;D=(D=D+Math.imul(ha,fi)|0)+Math.imul(V,yj)|0;ud=ud+Math.imul(V,fi)|0;td=td+Math.imul(X,Ij)|0;D=(D=D+Math.imul(X,Jj)|0)+Math.imul(Qa,Ij)|0;ud=ud+Math.imul(Qa,Jj)|0;var vD=(O+(td+Math.imul(bb,bj)|0)|0)+((8191&(D=(D=D+Math.imul(bb,cj)|0)+Math.imul(ma,bj)|0))<<13)|0;O=((ud+Math.imul(ma,cj)|0)+(D>>>13)|0)+(vD>>>26)|0;vD&=67108863;td=Math.imul(N,od);D=(D=
Math.imul(N,nd))+Math.imul(hb,od)|0;ud=Math.imul(hb,nd);td=td+Math.imul(Aa,Pb)|0;D=(D=D+Math.imul(Aa,xe)|0)+Math.imul(na,Pb)|0;ud=ud+Math.imul(na,xe)|0;td=td+Math.imul(U,Ac)|0;D=(D=D+Math.imul(U,jh)|0)+Math.imul(yd,Ac)|0;ud=ud+Math.imul(yd,jh)|0;td=td+Math.imul(gd,oe)|0;D=(D=D+Math.imul(gd,vi)|0)+Math.imul(Hb,oe)|0;ud=ud+Math.imul(Hb,vi)|0;td=td+Math.imul(Cc,Kg)|0;D=(D=D+Math.imul(Cc,aj)|0)+Math.imul(ac,Kg)|0;ud=ud+Math.imul(ac,aj)|0;td=td+Math.imul(Nb,pi)|0;D=(D=D+Math.imul(Nb,Hj)|0)+Math.imul(ec,
pi)|0;ud=ud+Math.imul(ec,Hj)|0;td=td+Math.imul(yb,yj)|0;D=(D=D+Math.imul(yb,fi)|0)+Math.imul(xa,yj)|0;ud=ud+Math.imul(xa,fi)|0;td=td+Math.imul(ha,Ij)|0;D=(D=D+Math.imul(ha,Jj)|0)+Math.imul(V,Ij)|0;ud=ud+Math.imul(V,Jj)|0;td=td+Math.imul(X,bj)|0;D=(D=D+Math.imul(X,cj)|0)+Math.imul(Qa,bj)|0;ud=ud+Math.imul(Qa,cj)|0;bb=(O+(td+Math.imul(bb,aa)|0)|0)+((8191&(D=(D=D+Math.imul(bb,Kj)|0)+Math.imul(ma,aa)|0))<<13)|0;O=((ud+Math.imul(ma,Kj)|0)+(D>>>13)|0)+(bb>>>26)|0;bb&=67108863;td=Math.imul(N,Pb);D=(D=Math.imul(N,
xe))+Math.imul(hb,Pb)|0;ud=Math.imul(hb,xe);td=td+Math.imul(Aa,Ac)|0;D=(D=D+Math.imul(Aa,jh)|0)+Math.imul(na,Ac)|0;ud=ud+Math.imul(na,jh)|0;td=td+Math.imul(U,oe)|0;D=(D=D+Math.imul(U,vi)|0)+Math.imul(yd,oe)|0;ud=ud+Math.imul(yd,vi)|0;td=td+Math.imul(gd,Kg)|0;D=(D=D+Math.imul(gd,aj)|0)+Math.imul(Hb,Kg)|0;ud=ud+Math.imul(Hb,aj)|0;td=td+Math.imul(Cc,pi)|0;D=(D=D+Math.imul(Cc,Hj)|0)+Math.imul(ac,pi)|0;ud=ud+Math.imul(ac,Hj)|0;td=td+Math.imul(Nb,yj)|0;D=(D=D+Math.imul(Nb,fi)|0)+Math.imul(ec,yj)|0;ud=ud+
Math.imul(ec,fi)|0;td=td+Math.imul(yb,Ij)|0;D=(D=D+Math.imul(yb,Jj)|0)+Math.imul(xa,Ij)|0;ud=ud+Math.imul(xa,Jj)|0;td=td+Math.imul(ha,bj)|0;D=(D=D+Math.imul(ha,cj)|0)+Math.imul(V,bj)|0;ud=ud+Math.imul(V,cj)|0;ma=(O+(td+Math.imul(X,aa)|0)|0)+((8191&(D=(D=D+Math.imul(X,Kj)|0)+Math.imul(Qa,aa)|0))<<13)|0;O=((ud+Math.imul(Qa,Kj)|0)+(D>>>13)|0)+(ma>>>26)|0;ma&=67108863;td=Math.imul(N,Ac);D=(D=Math.imul(N,jh))+Math.imul(hb,Ac)|0;ud=Math.imul(hb,jh);td=td+Math.imul(Aa,oe)|0;D=(D=D+Math.imul(Aa,vi)|0)+Math.imul(na,
oe)|0;ud=ud+Math.imul(na,vi)|0;td=td+Math.imul(U,Kg)|0;D=(D=D+Math.imul(U,aj)|0)+Math.imul(yd,Kg)|0;ud=ud+Math.imul(yd,aj)|0;td=td+Math.imul(gd,pi)|0;D=(D=D+Math.imul(gd,Hj)|0)+Math.imul(Hb,pi)|0;ud=ud+Math.imul(Hb,Hj)|0;td=td+Math.imul(Cc,yj)|0;D=(D=D+Math.imul(Cc,fi)|0)+Math.imul(ac,yj)|0;ud=ud+Math.imul(ac,fi)|0;td=td+Math.imul(Nb,Ij)|0;D=(D=D+Math.imul(Nb,Jj)|0)+Math.imul(ec,Ij)|0;ud=ud+Math.imul(ec,Jj)|0;td=td+Math.imul(yb,bj)|0;D=(D=D+Math.imul(yb,cj)|0)+Math.imul(xa,bj)|0;ud=ud+Math.imul(xa,
cj)|0;X=(O+(td+Math.imul(ha,aa)|0)|0)+((8191&(D=(D=D+Math.imul(ha,Kj)|0)+Math.imul(V,aa)|0))<<13)|0;O=((ud+Math.imul(V,Kj)|0)+(D>>>13)|0)+(X>>>26)|0;X&=67108863;td=Math.imul(N,oe);D=(D=Math.imul(N,vi))+Math.imul(hb,oe)|0;ud=Math.imul(hb,vi);td=td+Math.imul(Aa,Kg)|0;D=(D=D+Math.imul(Aa,aj)|0)+Math.imul(na,Kg)|0;ud=ud+Math.imul(na,aj)|0;td=td+Math.imul(U,pi)|0;D=(D=D+Math.imul(U,Hj)|0)+Math.imul(yd,pi)|0;ud=ud+Math.imul(yd,Hj)|0;td=td+Math.imul(gd,yj)|0;D=(D=D+Math.imul(gd,fi)|0)+Math.imul(Hb,yj)|0;
ud=ud+Math.imul(Hb,fi)|0;td=td+Math.imul(Cc,Ij)|0;D=(D=D+Math.imul(Cc,Jj)|0)+Math.imul(ac,Ij)|0;ud=ud+Math.imul(ac,Jj)|0;td=td+Math.imul(Nb,bj)|0;D=(D=D+Math.imul(Nb,cj)|0)+Math.imul(ec,bj)|0;ud=ud+Math.imul(ec,cj)|0;Qa=(O+(td+Math.imul(yb,aa)|0)|0)+((8191&(D=(D=D+Math.imul(yb,Kj)|0)+Math.imul(xa,aa)|0))<<13)|0;O=((ud+Math.imul(xa,Kj)|0)+(D>>>13)|0)+(Qa>>>26)|0;Qa&=67108863;td=Math.imul(N,Kg);D=(D=Math.imul(N,aj))+Math.imul(hb,Kg)|0;ud=Math.imul(hb,aj);td=td+Math.imul(Aa,pi)|0;D=(D=D+Math.imul(Aa,
Hj)|0)+Math.imul(na,pi)|0;ud=ud+Math.imul(na,Hj)|0;td=td+Math.imul(U,yj)|0;D=(D=D+Math.imul(U,fi)|0)+Math.imul(yd,yj)|0;ud=ud+Math.imul(yd,fi)|0;td=td+Math.imul(gd,Ij)|0;D=(D=D+Math.imul(gd,Jj)|0)+Math.imul(Hb,Ij)|0;ud=ud+Math.imul(Hb,Jj)|0;td=td+Math.imul(Cc,bj)|0;D=(D=D+Math.imul(Cc,cj)|0)+Math.imul(ac,bj)|0;ud=ud+Math.imul(ac,cj)|0;ha=(O+(td+Math.imul(Nb,aa)|0)|0)+((8191&(D=(D=D+Math.imul(Nb,Kj)|0)+Math.imul(ec,aa)|0))<<13)|0;O=((ud+Math.imul(ec,Kj)|0)+(D>>>13)|0)+(ha>>>26)|0;ha&=67108863;td=Math.imul(N,
pi);D=(D=Math.imul(N,Hj))+Math.imul(hb,pi)|0;ud=Math.imul(hb,Hj);td=td+Math.imul(Aa,yj)|0;D=(D=D+Math.imul(Aa,fi)|0)+Math.imul(na,yj)|0;ud=ud+Math.imul(na,fi)|0;td=td+Math.imul(U,Ij)|0;D=(D=D+Math.imul(U,Jj)|0)+Math.imul(yd,Ij)|0;ud=ud+Math.imul(yd,Jj)|0;td=td+Math.imul(gd,bj)|0;D=(D=D+Math.imul(gd,cj)|0)+Math.imul(Hb,bj)|0;ud=ud+Math.imul(Hb,cj)|0;V=(O+(td+Math.imul(Cc,aa)|0)|0)+((8191&(D=(D=D+Math.imul(Cc,Kj)|0)+Math.imul(ac,aa)|0))<<13)|0;O=((ud+Math.imul(ac,Kj)|0)+(D>>>13)|0)+(V>>>26)|0;V&=67108863;
td=Math.imul(N,yj);D=(D=Math.imul(N,fi))+Math.imul(hb,yj)|0;ud=Math.imul(hb,fi);td=td+Math.imul(Aa,Ij)|0;D=(D=D+Math.imul(Aa,Jj)|0)+Math.imul(na,Ij)|0;ud=ud+Math.imul(na,Jj)|0;td=td+Math.imul(U,bj)|0;D=(D=D+Math.imul(U,cj)|0)+Math.imul(yd,bj)|0;ud=ud+Math.imul(yd,cj)|0;yb=(O+(td+Math.imul(gd,aa)|0)|0)+((8191&(D=(D=D+Math.imul(gd,Kj)|0)+Math.imul(Hb,aa)|0))<<13)|0;O=((ud+Math.imul(Hb,Kj)|0)+(D>>>13)|0)+(yb>>>26)|0;yb&=67108863;td=Math.imul(N,Ij);D=(D=Math.imul(N,Jj))+Math.imul(hb,Ij)|0;ud=Math.imul(hb,
Jj);td=td+Math.imul(Aa,bj)|0;D=(D=D+Math.imul(Aa,cj)|0)+Math.imul(na,bj)|0;ud=ud+Math.imul(na,cj)|0;xa=(O+(td+Math.imul(U,aa)|0)|0)+((8191&(D=(D=D+Math.imul(U,Kj)|0)+Math.imul(yd,aa)|0))<<13)|0;O=((ud+Math.imul(yd,Kj)|0)+(D>>>13)|0)+(xa>>>26)|0;xa&=67108863;td=Math.imul(N,bj);D=(D=Math.imul(N,cj))+Math.imul(hb,bj)|0;ud=Math.imul(hb,cj);Nb=(O+(td+Math.imul(Aa,aa)|0)|0)+((8191&(D=(D=D+Math.imul(Aa,Kj)|0)+Math.imul(na,aa)|0))<<13)|0;O=((ud+Math.imul(na,Kj)|0)+(D>>>13)|0)+(Nb>>>26)|0;Nb&=67108863;ec=
(O+Math.imul(N,aa)|0)+((8191&(D=(D=Math.imul(N,Kj))+Math.imul(hb,aa)|0))<<13)|0;return O=(Math.imul(hb,Kj)+(D>>>13)|0)+(ec>>>26)|0,ec&=67108863,Y[0]=EA,Y[1]=DA,Y[2]=iy,Y[3]=qw,Y[4]=pD,Y[5]=sD,Y[6]=tD,Y[7]=uD,Y[8]=vD,Y[9]=bb,Y[10]=ma,Y[11]=X,Y[12]=Qa,Y[13]=ha,Y[14]=V,Y[15]=yb,Y[16]=xa,Y[17]=Nb,Y[18]=ec,0!==O&&(Y[19]=O,L.length++),L};Math.imul||(ea=q);a.prototype.mulTo=function(D,O){var L=(this||Ma).length+D.length;if(10===(this||Ma).length&&10===D.length)D=ea(this||Ma,D,O);else if(63>L)D=q(this||Ma,
D,O);else if(1024>L){L=this||Ma;O.negative=D.negative^L.negative;O.length=L.length+D.length;for(var N=0,aa=0,Y=0;Y<O.length-1;Y++){var ma=aa;aa=0;N&=67108863;for(var bb=Math.min(Y,D.length-1),Qa=Math.max(0,Y-L.length+1);Qa<=bb;Qa++){var X=(0|L.words[Y-Qa])*(0|D.words[Qa]),V=67108863&X;N=67108863&(V=V+N|0);aa+=(ma=(ma=ma+(X/67108864|0)|0)+(V>>>26)|0)>>>26;ma&=67108863}O.words[Y]=N;N=ma}D=(0!==N?O.words[Y]=N:O.length--,O.strip())}else L=this||Ma,D=(new r).mulp(L,D,O);return D};r.prototype.makeRBT=function(D){for(var O=
Array(D),L=a.prototype._countBits(D)-1,N=0;N<D;N++)O[N]=this.revBin(N,L,D);return O};r.prototype.revBin=function(D,O,L){if(0===D||D===L-1)return D;for(var N=L=0;N<O;N++)L|=(1&D)<<O-N-1,D>>=1;return L};r.prototype.permute=function(D,O,L,N,aa,Y){for(var ma=0;ma<Y;ma++)N[ma]=O[D[ma]],aa[ma]=L[D[ma]]};r.prototype.transform=function(D,O,L,N,aa,Y){this.permute(Y,D,O,L,N,aa);for(D=1;D<aa;D<<=1){O=D<<1;Y=Math.cos(2*Math.PI/O);for(var ma=Math.sin(2*Math.PI/O),bb=0;bb<aa;bb+=O)for(var Qa=Y,X=ma,V=0;V<D;V++){var ha=
L[bb+V],xa=N[bb+V],yb=L[bb+V+D],ec=N[bb+V+D],Nb=Qa*yb-X*ec;ec=Qa*ec+X*yb;yb=Nb;L[bb+V]=ha+yb;N[bb+V]=xa+ec;L[bb+V+D]=ha-yb;N[bb+V+D]=xa-ec;V!==O&&(Nb=Y*Qa-ma*X,X=Y*X+ma*Qa,Qa=Nb)}}};r.prototype.guessLen13b=function(D,O){D=1|Math.max(O,D);O=1&D;var L=0;for(D=D/2|0;D;D>>>=1)L++;return 1<<L+1+O};r.prototype.conjugate=function(D,O,L){if(!(1>=L))for(var N=0;N<L/2;N++){var aa=D[N];D[N]=D[L-N-1];D[L-N-1]=aa;aa=O[N];O[N]=-O[L-N-1];O[L-N-1]=-aa}};r.prototype.normalize13b=function(D,O){for(var L=0,N=0;N<O/
2;N++)L=8192*Math.round(D[2*N+1]/O)+Math.round(D[2*N]/O)+L,D[N]=67108863&L,L=67108864>L?0:L/67108864|0;return D};r.prototype.convert13b=function(D,O,L,N){for(var aa=0,Y=0;Y<O;Y++)aa+=0|D[Y],L[2*Y]=8191&aa,aa>>>=13,L[2*Y+1]=8191&aa,aa>>>=13;for(Y=2*O;Y<N;++Y)L[Y]=0;e(0===aa);e(0==(-8192&aa))};r.prototype.stub=function(D){for(var O=Array(D),L=0;L<D;L++)O[L]=0;return O};r.prototype.mulp=function(D,O,L){var N=2*this.guessLen13b(D.length,O.length),aa=this.makeRBT(N),Y=this.stub(N),ma=Array(N),bb=Array(N),
Qa=Array(N),X=Array(N),V=Array(N),ha=Array(N),xa=L.words;xa.length=N;this.convert13b(D.words,D.length,ma,N);this.convert13b(O.words,O.length,X,N);this.transform(ma,Y,bb,Qa,N,aa);this.transform(X,Y,V,ha,N,aa);for(ma=0;ma<N;ma++)X=bb[ma]*V[ma]-Qa[ma]*ha[ma],Qa[ma]=bb[ma]*ha[ma]+Qa[ma]*V[ma],bb[ma]=X;return this.conjugate(bb,Qa,N),this.transform(bb,Qa,xa,Y,N,aa),this.conjugate(xa,Y,N),this.normalize13b(xa,N),L.negative=D.negative^O.negative,L.length=D.length+O.length,L.strip()};a.prototype.mul=function(D){var O=
new a(null);return O.words=Array((this||Ma).length+D.length),this.mulTo(D,O)};a.prototype.mulf=function(D){var O=new a(null);O.words=Array((this||Ma).length+D.length);var L=this||Ma;return(new r).mulp(L,D,O)};a.prototype.imul=function(D){return this.clone().mulTo(D,this||Ma)};a.prototype.imuln=function(D){e("number"==typeof D);e(67108864>D);for(var O=0,L=0;L<(this||Ma).length;L++){var N=(0|(this||Ma).words[L])*D,aa=(67108863&N)+(67108863&O);O>>=26;O+=N/67108864|0;O+=aa>>>26;(this||Ma).words[L]=67108863&
aa}return 0!==O&&((this||Ma).words[L]=O,(this||Ma).length++),this||Ma};a.prototype.muln=function(D){return this.clone().imuln(D)};a.prototype.sqr=function(){return this.mul(this||Ma)};a.prototype.isqr=function(){return this.imul(this.clone())};a.prototype.pow=function(D){for(var O=Array(D.bitLength()),L=0;L<O.length;L++){var N=L%26;O[L]=(D.words[L/26|0]&1<<N)>>>N}if(0===O.length)return new a(1);D=this||Ma;for(L=0;L<O.length&&0===O[L];L++,D=D.sqr());if(++L<O.length)for(N=D.sqr();L<O.length;L++,N=N.sqr())0!==
O[L]&&(D=D.mul(N));return D};a.prototype.iushln=function(D){e("number"==typeof D&&0<=D);var O=D%26,L=(D-O)/26,N=67108863>>>26-O<<26-O;if(0!==O){var aa=0;for(D=0;D<(this||Ma).length;D++){var Y=(this||Ma).words[D]&N;(this||Ma).words[D]=(0|(this||Ma).words[D])-Y<<O|aa;aa=Y>>>26-O}aa&&((this||Ma).words[D]=aa,(this||Ma).length++)}if(0!==L){for(D=(this||Ma).length-1;0<=D;D--)(this||Ma).words[D+L]=(this||Ma).words[D];for(D=0;D<L;D++)(this||Ma).words[D]=0;(this||Ma).length+=L}return this.strip()};a.prototype.ishln=
function(D){return e(0===(this||Ma).negative),this.iushln(D)};a.prototype.iushrn=function(D,O,L){e("number"==typeof D&&0<=D);O=O?(O-O%26)/26:0;var N=D%26,aa=Math.min((D-N)/26,(this||Ma).length);D=67108863^67108863>>>N<<N;if(O-=aa,O=Math.max(0,O),L){for(var Y=0;Y<aa;Y++)L.words[Y]=(this||Ma).words[Y];L.length=aa}if(0!==aa)if((this||Ma).length>aa)for((this||Ma).length-=aa,Y=0;Y<(this||Ma).length;Y++)(this||Ma).words[Y]=(this||Ma).words[Y+aa];else(this||Ma).words[0]=0,(this||Ma).length=1;aa=0;for(Y=
(this||Ma).length-1;0<=Y&&(0!==aa||Y>=O);Y--){var ma=0|(this||Ma).words[Y];(this||Ma).words[Y]=aa<<26-N|ma>>>N;aa=ma&D}return L&&0!==aa&&(L.words[L.length++]=aa),0===(this||Ma).length&&((this||Ma).words[0]=0,(this||Ma).length=1),this.strip()};a.prototype.ishrn=function(D,O,L){return e(0===(this||Ma).negative),this.iushrn(D,O,L)};a.prototype.shln=function(D){return this.clone().ishln(D)};a.prototype.ushln=function(D){return this.clone().iushln(D)};a.prototype.shrn=function(D){return this.clone().ishrn(D)};
a.prototype.ushrn=function(D){return this.clone().iushrn(D)};a.prototype.testn=function(D){e("number"==typeof D&&0<=D);var O=D%26;D=(D-O)/26;return!((this||Ma).length<=D)&&!!((this||Ma).words[D]&1<<O)};a.prototype.imaskn=function(D){e("number"==typeof D&&0<=D);var O=D%26;D=(D-O)/26;if(e(0===(this||Ma).negative,"imaskn works only with positive numbers"),(this||Ma).length<=D)return this||Ma;if(0!==O&&D++,(this||Ma).length=Math.min(D,(this||Ma).length),0!==O)(this||Ma).words[(this||Ma).length-1]&=67108863^
67108863>>>O<<O;return this.strip()};a.prototype.maskn=function(D){return this.clone().imaskn(D)};a.prototype.iaddn=function(D){return e("number"==typeof D),e(67108864>D),0>D?this.isubn(-D):0!==(this||Ma).negative?1===(this||Ma).length&&(0|(this||Ma).words[0])<D?((this||Ma).words[0]=D-(0|(this||Ma).words[0]),(this||Ma).negative=0,this||Ma):((this||Ma).negative=0,this.isubn(D),(this||Ma).negative=1,this||Ma):this._iaddn(D)};a.prototype._iaddn=function(D){(this||Ma).words[0]+=D;for(D=0;D<(this||Ma).length&&
67108864<=(this||Ma).words[D];D++)(this||Ma).words[D]-=67108864,D===(this||Ma).length-1?(this||Ma).words[D+1]=1:(this||Ma).words[D+1]++;return(this||Ma).length=Math.max((this||Ma).length,D+1),this||Ma};a.prototype.isubn=function(D){if(e("number"==typeof D),e(67108864>D),0>D)return this.iaddn(-D);if(0!==(this||Ma).negative)return(this||Ma).negative=0,this.iaddn(D),(this||Ma).negative=1,this||Ma;if((this||Ma).words[0]-=D,1===(this||Ma).length&&0>(this||Ma).words[0])(this||Ma).words[0]=-(this||Ma).words[0],
(this||Ma).negative=1;else for(D=0;D<(this||Ma).length&&0>(this||Ma).words[D];D++)(this||Ma).words[D]+=67108864,--(this||Ma).words[D+1];return this.strip()};a.prototype.addn=function(D){return this.clone().iaddn(D)};a.prototype.subn=function(D){return this.clone().isubn(D)};a.prototype.iabs=function(){return(this||Ma).negative=0,this||Ma};a.prototype.abs=function(){return this.clone().iabs()};a.prototype._ishlnsubmul=function(D,O,L){var N;this._expand(D.length+L);var aa=0;for(N=0;N<D.length;N++){var Y=
(0|(this||Ma).words[N+L])+aa;aa=(0|D.words[N])*O;aa=((Y-=67108863&aa)>>26)-(aa/67108864|0);(this||Ma).words[N+L]=67108863&Y}for(;N<(this||Ma).length-L;N++)aa=(Y=(0|(this||Ma).words[N+L])+aa)>>26,(this||Ma).words[N+L]=67108863&Y;if(0===aa)return this.strip();e(-1===aa);for(N=aa=0;N<(this||Ma).length;N++)aa=(Y=-(0|(this||Ma).words[N])+aa)>>26,(this||Ma).words[N]=67108863&Y;return(this||Ma).negative=1,this.strip()};a.prototype._wordDiv=function(D,O){var L=((this||Ma).length,D.length),N=this.clone(),
aa=0|D.words[D.length-1];0!==(L=26-this._countBits(aa))&&(D=D.ushln(L),N.iushln(L),aa=0|D.words[D.length-1]);var Y,ma=N.length-D.length;if("mod"!==O){(Y=new a(null)).length=ma+1;Y.words=Array(Y.length);for(var bb=0;bb<Y.length;bb++)Y.words[bb]=0}bb=N.clone()._ishlnsubmul(D,1,ma);0===bb.negative&&(N=bb,Y&&(Y.words[ma]=1));for(--ma;0<=ma;ma--){bb=67108864*(0|N.words[D.length+ma])+(0|N.words[D.length+ma-1]);bb=Math.min(bb/aa|0,67108863);for(N._ishlnsubmul(D,bb,ma);0!==N.negative;)bb--,N.negative=0,N._ishlnsubmul(D,
1,ma),N.isZero()||(N.negative^=1);Y&&(Y.words[ma]=bb)}return Y&&Y.strip(),N.strip(),"div"!==O&&0!==L&&N.iushrn(L),{div:Y||null,mod:N}};a.prototype.divmod=function(D,O,L){return e(!D.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==(this||Ma).negative&&0===D.negative?(Y=this.neg().divmod(D,O),"mod"!==O&&(N=Y.div.neg()),"div"!==O&&(aa=Y.mod.neg(),L&&0!==aa.negative&&aa.iadd(D)),{div:N,mod:aa}):0===(this||Ma).negative&&0!==D.negative?(Y=this.divmod(D.neg(),O),"mod"!==O&&(N=Y.div.neg()),{div:N,
mod:Y.mod}):0!=((this||Ma).negative&D.negative)?(Y=this.neg().divmod(D.neg(),O),"div"!==O&&(aa=Y.mod.neg(),L&&0!==aa.negative&&aa.isub(D)),{div:Y.div,mod:aa}):D.length>(this||Ma).length||0>this.cmp(D)?{div:new a(0),mod:this||Ma}:1===D.length?"div"===O?{div:this.divn(D.words[0]),mod:null}:"mod"===O?{div:null,mod:new a(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new a(this.modn(D.words[0]))}:this._wordDiv(D,O);var N,aa,Y};a.prototype.div=function(D){return this.divmod(D,"div",!1).div};a.prototype.mod=
function(D){return this.divmod(D,"mod",!1).mod};a.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod};a.prototype.divRound=function(D){var O=this.divmod(D);if(O.mod.isZero())return O.div;var L=0!==O.div.negative?O.mod.isub(D):O.mod,N=D.ushrn(1);D=D.andln(1);L=L.cmp(N);return 0>L||1===D&&0===L?O.div:0!==O.div.negative?O.div.isubn(1):O.div.iaddn(1)};a.prototype.modn=function(D){e(67108863>=D);for(var O=67108864%D,L=0,N=(this||Ma).length-1;0<=N;N--)L=(O*L+(0|(this||Ma).words[N]))%D;return L};
a.prototype.idivn=function(D){e(67108863>=D);for(var O=0,L=(this||Ma).length-1;0<=L;L--)O=(0|(this||Ma).words[L])+67108864*O,(this||Ma).words[L]=O/D|0,O%=D;return this.strip()};a.prototype.divn=function(D){return this.clone().idivn(D)};a.prototype.egcd=function(D){e(0===D.negative);e(!D.isZero());var O=this||Ma,L=D.clone();O=0!==O.negative?O.umod(D):O.clone();D=new a(1);for(var N=new a(0),aa=new a(0),Y=new a(1),ma=0;O.isEven()&&L.isEven();)O.iushrn(1),L.iushrn(1),++ma;for(var bb=L.clone(),Qa=O.clone();!O.isZero();){for(var X=
0,V=1;0==(O.words[0]&V)&&26>X;++X,V<<=1);if(0<X)for(O.iushrn(X);0<X--;)(D.isOdd()||N.isOdd())&&(D.iadd(bb),N.isub(Qa)),D.iushrn(1),N.iushrn(1);X=0;for(V=1;0==(L.words[0]&V)&&26>X;++X,V<<=1);if(0<X)for(L.iushrn(X);0<X--;)(aa.isOdd()||Y.isOdd())&&(aa.iadd(bb),Y.isub(Qa)),aa.iushrn(1),Y.iushrn(1);0<=O.cmp(L)?(O.isub(L),D.isub(aa),N.isub(Y)):(L.isub(O),aa.isub(D),Y.isub(N))}return{a:aa,b:Y,gcd:L.iushln(ma)}};a.prototype._invmp=function(D){e(0===D.negative);e(!D.isZero());var O=this||Ma,L=D.clone();O=
0!==O.negative?O.umod(D):O.clone();for(var N,aa=new a(1),Y=new a(0),ma=L.clone();0<O.cmpn(1)&&0<L.cmpn(1);){for(var bb=0,Qa=1;0==(O.words[0]&Qa)&&26>bb;++bb,Qa<<=1);if(0<bb)for(O.iushrn(bb);0<bb--;)aa.isOdd()&&aa.iadd(ma),aa.iushrn(1);bb=0;for(Qa=1;0==(L.words[0]&Qa)&&26>bb;++bb,Qa<<=1);if(0<bb)for(L.iushrn(bb);0<bb--;)Y.isOdd()&&Y.iadd(ma),Y.iushrn(1);0<=O.cmp(L)?(O.isub(L),aa.isub(Y)):(L.isub(O),Y.isub(aa))}return 0>(N=0===O.cmpn(1)?aa:Y).cmpn(0)&&N.iadd(D),N};a.prototype.gcd=function(D){if(this.isZero())return D.abs();
if(D.isZero())return this.abs();var O=this.clone();D=D.clone();O.negative=0;for(var L=D.negative=0;O.isEven()&&D.isEven();L++)O.iushrn(1),D.iushrn(1);for(;;){for(;O.isEven();)O.iushrn(1);for(;D.isEven();)D.iushrn(1);var N=O.cmp(D);if(0>N)N=O,O=D,D=N;else if(0===N||0===D.cmpn(1))break;O.isub(D)}return D.iushln(L)};a.prototype.invm=function(D){return this.egcd(D).a.umod(D)};a.prototype.isEven=function(){return 0==(1&(this||Ma).words[0])};a.prototype.isOdd=function(){return 1==(1&(this||Ma).words[0])};
a.prototype.andln=function(D){return(this||Ma).words[0]&D};a.prototype.bincn=function(D){e("number"==typeof D);var O=D%26;D=(D-O)/26;O=1<<O;if((this||Ma).length<=D)return this._expand(D+1),(this||Ma).words[D]|=O,this||Ma;for(;0!==O&&D<(this||Ma).length;D++){var L=0|(this||Ma).words[D];O=(L+=O)>>>26;L&=67108863;(this||Ma).words[D]=L}return 0!==O&&((this||Ma).words[D]=O,(this||Ma).length++),this||Ma};a.prototype.isZero=function(){return 1===(this||Ma).length&&0===(this||Ma).words[0]};a.prototype.cmpn=
function(D){var O=0>D;if(0!==(this||Ma).negative&&!O)return-1;if(0===(this||Ma).negative&&O)return 1;(this.strip(),1<(this||Ma).length)?D=1:(O&&(D=-D),e(67108863>=D,"Number is too big"),O=0|(this||Ma).words[0],D=O===D?0:O<D?-1:1);return 0!==(this||Ma).negative?0|-D:D};a.prototype.cmp=function(D){if(0!==(this||Ma).negative&&0===D.negative)return-1;if(0===(this||Ma).negative&&0!==D.negative)return 1;D=this.ucmp(D);return 0!==(this||Ma).negative?0|-D:D};a.prototype.ucmp=function(D){if((this||Ma).length>
D.length)return 1;if((this||Ma).length<D.length)return-1;for(var O=0,L=(this||Ma).length-1;0<=L;L--){var N=0|(this||Ma).words[L],aa=0|D.words[L];if(N!==aa){N<aa?O=-1:N>aa&&(O=1);break}}return O};a.prototype.gtn=function(D){return 1===this.cmpn(D)};a.prototype.gt=function(D){return 1===this.cmp(D)};a.prototype.gten=function(D){return 0<=this.cmpn(D)};a.prototype.gte=function(D){return 0<=this.cmp(D)};a.prototype.ltn=function(D){return-1===this.cmpn(D)};a.prototype.lt=function(D){return-1===this.cmp(D)};
a.prototype.lten=function(D){return 0>=this.cmpn(D)};a.prototype.lte=function(D){return 0>=this.cmp(D)};a.prototype.eqn=function(D){return 0===this.cmpn(D)};a.prototype.eq=function(D){return 0===this.cmp(D)};a.red=function(D){return new B(D)};a.prototype.toRed=function(D){return e(!(this||Ma).red,"Already a number in reduction context"),e(0===(this||Ma).negative,"red works only with positives"),D.convertTo(this||Ma)._forceRed(D)};a.prototype.fromRed=function(){return e((this||Ma).red,"fromRed works only with numbers in reduction context"),
(this||Ma).red.convertFrom(this||Ma)};a.prototype._forceRed=function(D){return(this||Ma).red=D,this||Ma};a.prototype.forceRed=function(D){return e(!(this||Ma).red,"Already a number in reduction context"),this._forceRed(D)};a.prototype.redAdd=function(D){return e((this||Ma).red,"redAdd works only with red numbers"),(this||Ma).red.add(this||Ma,D)};a.prototype.redIAdd=function(D){return e((this||Ma).red,"redIAdd works only with red numbers"),(this||Ma).red.iadd(this||Ma,D)};a.prototype.redSub=function(D){return e((this||
Ma).red,"redSub works only with red numbers"),(this||Ma).red.sub(this||Ma,D)};a.prototype.redISub=function(D){return e((this||Ma).red,"redISub works only with red numbers"),(this||Ma).red.isub(this||Ma,D)};a.prototype.redShl=function(D){return e((this||Ma).red,"redShl works only with red numbers"),(this||Ma).red.shl(this||Ma,D)};a.prototype.redMul=function(D){return e((this||Ma).red,"redMul works only with red numbers"),(this||Ma).red._verify2(this||Ma,D),(this||Ma).red.mul(this||Ma,D)};a.prototype.redIMul=
function(D){return e((this||Ma).red,"redMul works only with red numbers"),(this||Ma).red._verify2(this||Ma,D),(this||Ma).red.imul(this||Ma,D)};a.prototype.redSqr=function(){return e((this||Ma).red,"redSqr works only with red numbers"),(this||Ma).red._verify1(this||Ma),(this||Ma).red.sqr(this||Ma)};a.prototype.redISqr=function(){return e((this||Ma).red,"redISqr works only with red numbers"),(this||Ma).red._verify1(this||Ma),(this||Ma).red.isqr(this||Ma)};a.prototype.redSqrt=function(){return e((this||
Ma).red,"redSqrt works only with red numbers"),(this||Ma).red._verify1(this||Ma),(this||Ma).red.sqrt(this||Ma)};a.prototype.redInvm=function(){return e((this||Ma).red,"redInvm works only with red numbers"),(this||Ma).red._verify1(this||Ma),(this||Ma).red.invm(this||Ma)};a.prototype.redNeg=function(){return e((this||Ma).red,"redNeg works only with red numbers"),(this||Ma).red._verify1(this||Ma),(this||Ma).red.neg(this||Ma)};a.prototype.redPow=function(D){return e((this||Ma).red&&!D.red,"redPow(normalNum)"),
(this||Ma).red._verify1(this||Ma),(this||Ma).red.pow(this||Ma,D)};var ra={k256:null,p224:null,p192:null,p25519:null};u.prototype._tmp=function(){var D=new a(null);return D.words=Array(Math.ceil((this||Ma).n/13)),D};u.prototype.ireduce=function(D){do{this.split(D,(this||Ma).tmp);var O=(D=(D=this.imulK(D)).iadd((this||Ma).tmp)).bitLength()}while(O>(this||Ma).n);O=O<(this||Ma).n?-1:D.ucmp((this||Ma).p);return 0===O?(D.words[0]=0,D.length=1):0<O?D.isub((this||Ma).p):D.strip(),D};u.prototype.split=function(D,
O){D.iushrn((this||Ma).n,0,O)};u.prototype.imulK=function(D){return D.imul((this||Ma).k)};m(v,u);v.prototype.split=function(D,O){for(var L=Math.min(D.length,9),N=0;N<L;N++)O.words[N]=D.words[N];if(O.length=L,9>=D.length)return D.words[0]=0,D.length=1,void 0;L=D.words[9];O.words[O.length++]=4194303&L;for(N=10;N<D.length;N++)O=0|D.words[N],D.words[N-10]=(4194303&O)<<4|L>>>22,L=O;L>>>=22;D.words[N-10]=L;0===L&&10<D.length?D.length-=10:D.length-=9};v.prototype.imulK=function(D){D.words[D.length]=0;D.words[D.length+
1]=0;D.length+=2;for(var O=0,L=0;L<D.length;L++){var N=0|D.words[L];O+=977*N;D.words[L]=67108863&O;O=64*N+(O/67108864|0)}return 0===D.words[D.length-1]&&(D.length--,0===D.words[D.length-1]&&D.length--),D};m(y,u);m(z,u);m(A,u);A.prototype.imulK=function(D){for(var O=0,L=0;L<D.length;L++){O=19*(0|D.words[L])+O;var N=67108863&O;O>>>=26;D.words[L]=N}return 0!==O&&(D.words[D.length++]=O),D};a._prime=function(D){if(ra[D])return ra[D];if("k256"===D)var O=new v;else if("p224"===D)O=new y;else if("p192"===
D)O=new z;else{if("p25519"!==D)throw Error("Unknown prime "+D);O=new A}return ra[D]=O,O};B.prototype._verify1=function(D){e(0===D.negative,"red works only with positives");e(D.red,"red works only with red numbers")};B.prototype._verify2=function(D,O){e(0==(D.negative|O.negative),"red works only with positives");e(D.red&&D.red===O.red,"red works only with red numbers")};B.prototype.imod=function(D){return(this||Ma).prime?(this||Ma).prime.ireduce(D)._forceRed(this||Ma):D.umod((this||Ma).m)._forceRed(this||
Ma)};B.prototype.neg=function(D){return D.isZero()?D.clone():(this||Ma).m.sub(D)._forceRed(this||Ma)};B.prototype.add=function(D,O){this._verify2(D,O);D=D.add(O);return 0<=D.cmp((this||Ma).m)&&D.isub((this||Ma).m),D._forceRed(this||Ma)};B.prototype.iadd=function(D,O){this._verify2(D,O);D=D.iadd(O);return 0<=D.cmp((this||Ma).m)&&D.isub((this||Ma).m),D};B.prototype.sub=function(D,O){this._verify2(D,O);D=D.sub(O);return 0>D.cmpn(0)&&D.iadd((this||Ma).m),D._forceRed(this||Ma)};B.prototype.isub=function(D,
O){this._verify2(D,O);D=D.isub(O);return 0>D.cmpn(0)&&D.iadd((this||Ma).m),D};B.prototype.shl=function(D,O){return this._verify1(D),this.imod(D.ushln(O))};B.prototype.imul=function(D,O){return this._verify2(D,O),this.imod(D.imul(O))};B.prototype.mul=function(D,O){return this._verify2(D,O),this.imod(D.mul(O))};B.prototype.isqr=function(D){return this.imul(D,D.clone())};B.prototype.sqr=function(D){return this.mul(D,D)};B.prototype.sqrt=function(D){if(D.isZero())return D.clone();var O=(this||Ma).m.andln(3);
if(e(1==O%2),3===O)return O=(this||Ma).m.add(new a(1)).iushrn(2),this.pow(D,O);for(var L=(this||Ma).m.subn(1),N=0;!L.isZero()&&0===L.andln(1);)N++,L.iushrn(1);e(!L.isZero());O=(new a(1)).toRed(this||Ma);var aa=O.redNeg(),Y=(this||Ma).m.subn(1).iushrn(1),ma=(this||Ma).m.bitLength();for(ma=(new a(2*ma*ma)).toRed(this||Ma);0!==this.pow(ma,Y).cmp(aa);)ma.redIAdd(aa);Y=this.pow(ma,L);aa=this.pow(D,L.addn(1).iushrn(1));D=this.pow(D,L);for(L=N;0!==D.cmp(O);){ma=D;for(N=0;0!==ma.cmp(O);N++)ma=ma.redSqr();
e(N<L);Y=this.pow(Y,(new a(1)).iushln(L-N-1));aa=aa.redMul(Y);Y=Y.redSqr();D=D.redMul(Y);L=N}return aa};B.prototype.invm=function(D){D=D._invmp((this||Ma).m);return 0!==D.negative?(D.negative=0,this.imod(D).redNeg()):this.imod(D)};B.prototype.pow=function(D,O){if(O.isZero())return(new a(1)).toRed(this||Ma);if(0===O.cmpn(1))return D.clone();var L=Array(16);L[0]=(new a(1)).toRed(this||Ma);L[1]=D;for(var N=2;N<L.length;N++)L[N]=this.mul(L[N-1],D);D=L[0];var aa=0,Y=0,ma=O.bitLength()%26;0===ma&&(ma=26);
for(N=O.length-1;0<=N;N--){var bb=O.words[N];for(--ma;0<=ma;ma--){var Qa=bb>>ma&1;D!==L[0]&&(D=this.sqr(D));0!==Qa||0!==aa?(aa<<=1,aa|=Qa,(4===++Y||0===N&&0===ma)&&(D=this.mul(D,L[aa]),Y=0,aa=0)):Y=0}ma=26}return D};B.prototype.convertTo=function(D){var O=D.umod((this||Ma).m);return O===D?O.clone():O};B.prototype.convertFrom=function(D){D=D.clone();return D.red=null,D};a.mont=function(D){return new G(D)};m(G,B);G.prototype.convertTo=function(D){return this.imod(D.ushln((this||Ma).shift))};G.prototype.convertFrom=
function(D){D=this.imod(D.mul((this||Ma).rinv));return D.red=null,D};G.prototype.imul=function(D,O){if(D.isZero()||O.isZero())return D.words[0]=0,D.length=1,D;D=D.imul(O);O=D.maskn((this||Ma).shift).mul((this||Ma).minv).imaskn((this||Ma).shift).mul((this||Ma).m);O=D=D.isub(O).iushrn((this||Ma).shift);return 0<=D.cmp((this||Ma).m)?O=D.isub((this||Ma).m):0>D.cmpn(0)&&(O=D.iadd((this||Ma).m)),O._forceRed(this||Ma)};G.prototype.mul=function(D,O){if(D.isZero()||O.isZero())return(new a(0))._forceRed(this||
Ma);D=D.mul(O);O=D.maskn((this||Ma).shift).mul((this||Ma).minv).imaskn((this||Ma).shift).mul((this||Ma).m);O=D=D.isub(O).iushrn((this||Ma).shift);return 0<=D.cmp((this||Ma).m)?O=D.isub((this||Ma).m):0>D.cmpn(0)&&(O=D.iadd((this||Ma).m)),O._forceRed(this||Ma)};G.prototype.invm=function(D){return this.imod(D._invmp((this||Ma).m).mul((this||Ma).r2))._forceRed(this||Ma)}}(h3,g3);var fl=h3.exports,HI,yP,i3=Object.freeze({}),rG="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global;
if((HI=function(n){return yP||(yP=new Sv(null)),yP.generate(n)}).Rand=Sv,Sv.prototype.generate=function(n){return this._rand(n)},Sv.prototype._rand=function(n){if((this||rG).rand.getBytes)return(this||rG).rand.getBytes(n);n=new Uint8Array(n);for(var b=0;b<n.length;b++)n[b]=(this||rG).rand.getByte();return n},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?Sv.prototype._rand=function(n){n=new Uint8Array(n);return self.crypto.getRandomValues(n),n}:self.msCrypto&&self.msCrypto.getRandomValues?
Sv.prototype._rand=function(n){n=new Uint8Array(n);return self.msCrypto.getRandomValues(n),n}:"object"==typeof window&&(Sv.prototype._rand=function(){throw Error("Not implemented yet");});else try{if("function"!=typeof i3.randomBytes)throw Error("Not supported");Sv.prototype._rand=function(n){return i3.randomBytes(n)}}catch(n){}var YW="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,sy=fl,A9=HI;Tv.create=function(n){return new Tv(n)};Tv.prototype._randbelow=function(n){var b=
n.bitLength();b=Math.ceil(b/8);do var e=new sy((this||YW).rand.generate(b));while(0<=e.cmp(n));return e};Tv.prototype._randrange=function(n,b){b=b.sub(n);return n.add(this._randbelow(b))};Tv.prototype.test=function(n,b,e){var m=n.bitLength(),a=sy.mont(n),g=(new sy(1)).toRed(a);b||(b=Math.max(1,m/48|0));m=n.subn(1);for(var l=0;!m.testn(l);l++);n=n.shrn(l);for(var q=m.toRed(a);0<b;b--){var r=this._randrange(new sy(2),m);e&&e(r);r=r.toRed(a).redPow(n);if(0!==r.cmp(g)&&0!==r.cmp(q)){for(var u=1;u<l;u++){if(0===
(r=r.redSqr()).cmp(g))return!1;if(0===r.cmp(q))break}if(u===l)return!1}}return!0};Tv.prototype.getDivisor=function(n,b){var e=n.bitLength(),m=sy.mont(n),a=(new sy(1)).toRed(m);b||(b=Math.max(1,e/48|0));e=n.subn(1);for(var g=0;!e.testn(g);g++);for(var l=n.shrn(g),q=e.toRed(m);0<b;b--){var r=this._randrange(new sy(2),e),u=n.gcd(r);if(0!==u.cmpn(1))return u;r=r.toRed(m).redPow(l);if(0!==r.cmp(a)&&0!==r.cmp(q)){for(u=1;u<g;u++){if(0===(r=r.redSqr()).cmp(a))return r.fromRed().subn(1).gcd(n);if(0===r.cmp(q))break}if(u===
g)return r.redSqr().fromRed().subn(1).gcd(n)}}return!1};var B9=uw;rC.simpleSieve=NL;rC.fermatTest=PL;var Rm=fl,G9=new Rm(24),$W=new Tv,C9=new Rm(1),QL=new Rm(2),D9=new Rm(5),E9=(new Rm(16),new Rm(8),new Rm(10)),F9=new Rm(3),H9=(new Rm(7),new Rm(11)),ZW=new Rm(4),OL=(new Rm(12),null),ti="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,ys=Rh.Buffer,Mp=fl,j3=new Tv,pha=new Mp(24),qha=new Mp(11),rha=new Mp(10),sha=new Mp(3),tha=new Mp(7),II={};Object.defineProperty(Uq.prototype,
"verifyError",{enumerable:!0,get:function(){if("number"!=typeof(this||ti)._primeCode){var n=(this||ti).__prime;var b=(this||ti).__gen.toString("hex"),e=[b,n.toString(16)].join("_");if(e in II)n=II[e];else{var m,a=0;if(!n.isEven()&&rC.simpleSieve&&rC.fermatTest(n)&&j3.test(n)){switch(j3.test(n.shrn(1))||(a+=2),b){case "02":n.mod(pha).cmp(qha)&&(a+=8);break;case "05":(m=n.mod(rha)).cmp(sha)&&m.cmp(tha)&&(a+=8);break;default:a+=4}n=(II[e]=a,a)}else n=(a+=1,a+="02"===b||"05"===b?8:4,II[e]=a,a)}(this||
ti)._primeCode=n}return(this||ti)._primeCode}});Uq.prototype.generateKeys=function(){return(this||ti)._priv||((this||ti)._priv=new Mp(uw((this||ti)._primeLen))),(this||ti)._pub=(this||ti)._gen.toRed((this||ti)._prime).redPow((this||ti)._priv).fromRed(),this.getPublicKey()};Uq.prototype.computeSecret=function(n){n=(new Mp(n)).toRed((this||ti)._prime).redPow((this||ti)._priv).fromRed();n=new ys(n.toArray());var b=this.getPrime();n.length<b.length&&(b=new ys(b.length-n.length),b.fill(0),n=ys.concat([b,
n]));return n};Uq.prototype.getPublicKey=function(n){return sG((this||ti)._pub,n)};Uq.prototype.getPrivateKey=function(n){return sG((this||ti)._priv,n)};Uq.prototype.getPrime=function(n){return sG((this||ti).__prime,n)};Uq.prototype.getGenerator=function(n){return sG((this||ti)._gen,n)};Uq.prototype.setGenerator=function(n,b){return b=b||"utf8",ys.isBuffer(n)||(n=new ys(n,b)),(this||ti).__gen=n,(this||ti)._gen=new Mp(n),this||ti};var k3,l3,m3,xw=Rh.Buffer,n3={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},
modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},
modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},
modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},
modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},
modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},
modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}},
uha={binary:!0,hex:!0,base64:!0};var vha=k3=l3=function(n){var b=new xw(n3[n].prime,"hex");n=new xw(n3[n].gen,"hex");return new Uq(b,n)};var wha=m3=function g(b,e,m,a){return xw.isBuffer(e)||void 0===uha[e]?g(b,"binary",e,m):(e=e||"binary",a=a||"binary",m=m||new xw([2]),xw.isBuffer(m)||(m=new xw(m,a)),"number"==typeof b?new Uq(rC(b,m),m,!0):(xw.isBuffer(b)||(b=new xw(b,e)),new Uq(b,m,!0)))};var K9=Rh.Buffer,Uv=fl,bX=uw;tG.getr=aX;var yw={toArray:function(b,e){if(Array.isArray(b))return b.slice();
if(!b)return[];var m=[];if("string"!=typeof b){for(e=0;e<b.length;e++)m[e]=0|b[e];return m}if("hex"===e)for(0!=(b=b.replace(/[^a-z0-9]+/gi,"")).length%2&&(b="0"+b),e=0;e<b.length;e+=2)m.push(parseInt(b[e]+b[e+1],16));else for(e=0;e<b.length;e++){var a=b.charCodeAt(e),g=a>>8;a&=255;g?m.push(g,a):m.push(a)}return m}};yw.zero2=cX;yw.toHex=dX;yw.encode=function(b,e){return"hex"===e?dX(b):b};var Oh={},xha=fl;Oh.assert=Sp;Oh.toArray=yw.toArray;Oh.zero2=yw.zero2;Oh.toHex=yw.toHex;Oh.encode=yw.encode;Oh.getNAF=
function(b,e,m){m=Array(Math.max(b.bitLength(),m)+1);m.fill(0);e=1<<e+1;b=b.clone();for(var a=0;a<m.length;a++){var g,l=b.andln(e-1);b.isOdd()?(g=l>(e>>1)-1?(e>>1)-l:l,b.isubn(g)):g=0;m[a]=g;b.iushrn(1)}return m};Oh.getJSF=function(b,e){var m=[[],[]];b=b.clone();e=e.clone();for(var a=0,g=0;0<b.cmpn(-a)||0<e.cmpn(-g);){var l;var q=b.andln(3)+a&3;var r=e.andln(3)+g&3;var u=(3===q&&(q=-1),3===r&&(r=-1),0==(1&q))?0:3!==(l=b.andln(7)+a&7)&&5!==l||2!==r?q:-q;q=(m[0].push(u),0==(1&r))?0:3!==(l=e.andln(7)+
g&7)&&5!==l||2!==q?r:-r;m[1].push(q);2*a===u+1&&(a=1-a);2*g===q+1&&(g=1-g);b.iushrn(1);e.iushrn(1)}return m};Oh.cachedProperty=function(b,e,m){var a="_"+e;b.prototype[e]=function(){return void 0!==this[a]?this[a]:this[a]=m.call(this)}};Oh.parseBytes=function(b){return"string"==typeof b?Oh.toArray(b,"hex"):b};Oh.intFromLE=function(b){return new xha(b,"hex","le")};var uG=fl,L9=Oh.assert;Jx.prototype._importDER=function(b,e){b=Oh.toArray(b,e);var m=new M9;if(48!==b[m.place++]||RL(b,m)+m.place!==b.length||
2!==b[m.place++])return!1;var a=RL(b,m);e=b.slice(m.place,a+m.place);if(m.place+=a,2!==b[m.place++])return!1;a=RL(b,m);if(b.length!==a+m.place)return!1;b=b.slice(m.place,a+m.place);return 0===e[0]&&128&e[1]&&(e=e.slice(1)),0===b[0]&&128&b[1]&&(b=b.slice(1)),this.r=new uG(e),this.s=new uG(b),this.recoveryParam=null,!0};Jx.prototype.toDER=function(b){var e=this.r.toArray(),m=this.s.toArray();128&e[0]&&(e=[0].concat(e));128&m[0]&&(m=[0].concat(m));e=eX(e);for(m=eX(m);!(m[0]||128&m[1]);)m=m.slice(1);
var a=[2];SL(a,e.length);(a=a.concat(e)).push(2);SL(a,m.length);e=a.concat(m);m=[48];return SL(m,e.length),m=m.concat(e),Oh.encode(m,b)};var Ef={},yha=Sp;Ef.inherits=zh;Ef.toArray=function(b,e){if(Array.isArray(b))return b.slice();if(!b)return[];var m=[];if("string"==typeof b)if(e){if("hex"===e)for(0!=(b=b.replace(/[^a-z0-9]+/gi,"")).length%2&&(b="0"+b),a=0;a<b.length;a+=2)m.push(parseInt(b[a]+b[a+1],16))}else for(var a=e=0;a<b.length;a++){var g=b.charCodeAt(a);if(128>g)m[e++]=g;else if(2048>g)m[e++]=
g>>6|192,m[e++]=63&g|128;else{var l=b,q=a;55296!=(64512&l.charCodeAt(q))||0>q||q+1>=l.length||56320!=(64512&l.charCodeAt(q+1))?(m[e++]=g>>12|224,m[e++]=g>>6&63|128,m[e++]=63&g|128):(g=65536+((1023&g)<<10)+(1023&b.charCodeAt(++a)),m[e++]=g>>18|240,m[e++]=g>>12&63|128,m[e++]=g>>6&63|128,m[e++]=63&g|128)}}else for(a=0;a<b.length;a++)m[a]=0|b[a];return m};Ef.toHex=function(b){for(var e="",m=0;m<b.length;m++)e+=gX(b[m].toString(16));return e};Ef.htonl=fX;Ef.toHex32=function(b,e){for(var m="",a=0;a<b.length;a++){var g=
b[a];"little"===e&&(g=fX(g));m+=hX(g.toString(16))}return m};Ef.zero2=gX;Ef.zero8=hX;Ef.join32=function(b,e,m,a){m-=e;yha(0==m%4);m=Array(m/4);for(var g=0;g<m.length;g++,e+=4)m[g]=("big"===a?b[e]<<24|b[e+1]<<16|b[e+2]<<8|b[e+3]:b[e+3]<<24|b[e+2]<<16|b[e+1]<<8|b[e])>>>0;return m};Ef.split32=function(b,e){for(var m=Array(4*b.length),a=0,g=0;a<b.length;a++,g+=4){var l=b[a];"big"===e?(m[g]=l>>>24,m[g+1]=l>>>16&255,m[g+2]=l>>>8&255,m[g+3]=255&l):(m[g+3]=l>>>24,m[g+2]=l>>>16&255,m[g+1]=l>>>8&255,m[g]=255&
l)}return m};Ef.rotr32=function(b,e){return b>>>e|b<<32-e};Ef.rotl32=function(b,e){return b<<e|b>>>32-e};Ef.sum32=function(b,e){return b+e>>>0};Ef.sum32_3=function(b,e,m){return b+e+m>>>0};Ef.sum32_4=function(b,e,m,a){return b+e+m+a>>>0};Ef.sum32_5=function(b,e,m,a,g){return b+e+m+a+g>>>0};Ef.sum64=function(b,e,m,a){var g=a+b[e+1]>>>0;b[e]=(g<a?1:0)+m+b[e]>>>0;b[e+1]=g};Ef.sum64_hi=function(b,e,m,a){return(e+a>>>0<e?1:0)+b+m>>>0};Ef.sum64_lo=function(b,e,m,a){return e+a>>>0};Ef.sum64_4_hi=function(b,
e,m,a,g,l,q,r){var u=0,v=e;return u+=(v=v+a>>>0)<e?1:0,u+=(v=v+l>>>0)<l?1:0,b+m+g+q+(u+(v+r>>>0<r?1:0))>>>0};Ef.sum64_4_lo=function(b,e,m,a,g,l,q,r){return e+a+l+r>>>0};Ef.sum64_5_hi=function(b,e,m,a,g,l,q,r,u,v){var y=0,z=e;return y+=(z=z+a>>>0)<e?1:0,y+=(z=z+l>>>0)<l?1:0,y+=(z=z+r>>>0)<r?1:0,b+m+g+q+u+(y+(z+v>>>0<v?1:0))>>>0};Ef.sum64_5_lo=function(b,e,m,a,g,l,q,r,u,v){return e+a+l+r+v>>>0};Ef.rotr64_hi=function(b,e,m){return(e<<32-m|b>>>m)>>>0};Ef.rotr64_lo=function(b,e,m){return(b<<32-m|e>>>m)>>>
0};Ef.shr64_hi=function(b,e,m){return b>>>m};Ef.shr64_lo=function(b,e,m){return(b<<32-m|e>>>m)>>>0};var NA={},zha=Sp;NA.BlockHash=vG;vG.prototype.update=function(b,e){if(b=Ef.toArray(b,e),this.pending?this.pending=this.pending.concat(b):this.pending=b,this.pendingTotal+=b.length,this.pending.length>=this._delta8)for(e=(b=this.pending).length%this._delta8,this.pending=b.slice(b.length-e,b.length),0===this.pending.length&&(this.pending=null),b=Ef.join32(b,0,b.length-e,this.endian),e=0;e<b.length;e+=
this._delta32)this._update(b,e,e+this._delta32);return this};vG.prototype.digest=function(b){return this.update(this._pad()),zha(null===this.pending),this._digest(b)};vG.prototype._pad=function(){var b=this.pendingTotal,e=this._delta8,m=e-(b+this.padLength)%e;e=Array(m+this.padLength);e[0]=128;for(var a=1;a<m;a++)e[a]=0;if(b<<=3,"big"===this.endian){for(m=8;m<this.padLength;m++)e[a++]=0;e[a++]=0;e[a++]=0;e[a++]=0;e[a++]=0;e[a++]=b>>>24&255;e[a++]=b>>>16&255;e[a++]=b>>>8&255;e[a++]=255&b}else for(e[a++]=
255&b,e[a++]=b>>>8&255,e[a++]=b>>>16&255,e[a++]=b>>>24&255,e[a++]=0,e[a++]=0,e[a++]=0,e[a++]=0,m=8;m<this.padLength;m++)e[a++]=0;return e};var Aha=Sp,Ws=Ef.rotr64_hi,Xs=Ef.rotr64_lo,o3=Ef.shr64_hi,p3=Ef.shr64_lo,zw=Ef.sum64,zP=Ef.sum64_hi,AP=Ef.sum64_lo,Bha=Ef.sum64_4_hi,Cha=Ef.sum64_4_lo,Dha=Ef.sum64_5_hi,Eha=Ef.sum64_5_lo,iX=NA.BlockHash,N9=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,
3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,
338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,
2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,
1607167915,987167468,1816402316,1246189591];Ef.inherits(Np,iX);Np.blockSize=1024;Np.outSize=512;Np.hmacStrength=192;Np.padLength=128;Np.prototype._prepareBlock=function(b,e){for(var m=this.W,a=0;32>a;a++)m[a]=b[e+a];for(;a<m.length;a+=2){b=m[a-4];e=m[a-3];e=Ws(b,e,19)^Ws(e,b,29)^o3(b,e,6);b=(0>e&&(e+=4294967296),e);e=m[a-4];var g=m[a-3];g=Xs(e,g,19)^Xs(g,e,29)^p3(e,g,6);e=(0>g&&(g+=4294967296),g);g=m[a-14];var l=m[a-13];var q=m[a-30];var r=m[a-29];r=Ws(q,r,1)^Ws(q,r,8)^o3(q,r,7);q=(0>r&&(r+=4294967296),
r);r=m[a-30];var u=m[a-29];u=Xs(r,u,1)^Xs(r,u,8)^p3(r,u,7);r=(0>u&&(u+=4294967296),u);u=m[a-32];var v=m[a-31];m[a]=Bha(b,e,g,l,q,r,u,v);m[a+1]=Cha(b,e,g,l,q,r,u,v)}};Np.prototype._update=function(b,e){this._prepareBlock(b,e);b=this.W;e=this.h[0];var m=this.h[1],a=this.h[2],g=this.h[3],l=this.h[4],q=this.h[5],r=this.h[6],u=this.h[7],v=this.h[8],y=this.h[9],z=this.h[10],A=this.h[11],B=this.h[12],G=this.h[13],E=this.h[14],K=this.h[15];Aha(this.k.length===b.length);for(var J=0;J<b.length;J+=2){var P=
v;var ea=y;P=Ws(P,ea,14)^Ws(P,ea,18)^Ws(ea,P,9);ea=(0>P&&(P+=4294967296),P);P=v;var ra=y;P=Xs(P,ra,14)^Xs(P,ra,18)^Xs(ra,P,9);var D=(0>P&&(P+=4294967296),P);P=v&z^~v&B;ra=(0>P&&(P+=4294967296),P);P=y&A^~y&G;var O=(0>P&&(P+=4294967296),P);var L=this.k[J],N=this.k[J+1],aa=b[J],Y=b[J+1];P=Dha(E,K,ea,D,ra,O,L,N,aa,Y);ra=Eha(E,K,ea,D,ra,O,L,N,aa,Y);E=e;K=m;K=Ws(E,K,28)^Ws(K,E,2)^Ws(K,E,7);E=(0>K&&(K+=4294967296),K);K=e;ea=m;ea=Xs(K,ea,28)^Xs(ea,K,2)^Xs(ea,K,7);K=(0>ea&&(ea+=4294967296),ea);D=e&a^e&l^a&
l;ea=(0>D&&(D+=4294967296),D);O=m&g^m&q^g&q;D=(0>O&&(O+=4294967296),O);O=zP(E,K,ea,D);ea=AP(E,K,ea,D);E=B;K=G;B=z;G=A;z=v;A=y;v=zP(r,u,P,ra);y=AP(u,u,P,ra);r=l;u=q;l=a;q=g;a=e;g=m;e=zP(P,ra,O,ea);m=AP(P,ra,O,ea)}zw(this.h,0,e,m);zw(this.h,2,a,g);zw(this.h,4,l,q);zw(this.h,6,r,u);zw(this.h,8,v,y);zw(this.h,10,z,A);zw(this.h,12,B,G);zw(this.h,14,E,K)};Np.prototype._digest=function(b){return"hex"===b?Ef.toHex32(this.h,"big"):Ef.split32(this.h,"big")};var Ys=Ef.rotr32,Fha=Sp,nr=Ef.sum32,Gha=Ef.sum32_4,
Hha=Ef.sum32_5,jX=NA.BlockHash,O9=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,
3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];Ef.inherits(Vq,jX);Vq.blockSize=512;Vq.outSize=256;Vq.hmacStrength=192;Vq.padLength=64;Vq.prototype._update=function(b,e){for(var m=this.W,a=0;16>a;a++)m[a]=b[e+a];for(;a<m.length;a++){b=a;e=m[a-2];e=Ys(e,17)^Ys(e,19)^e>>>10;var g=m[a-7];var l=m[a-15];l=Ys(l,7)^Ys(l,18)^l>>>3;m[b]=Gha(e,
g,l,m[a-16])}b=this.h[0];e=this.h[1];g=this.h[2];l=this.h[3];var q=this.h[4],r=this.h[5],u=this.h[6],v=this.h[7];Fha(this.k.length===m.length);for(a=0;a<m.length;a++){var y=v;v=q;v=Ys(v,6)^Ys(v,11)^Ys(v,25);y=Hha(y,v,q&r^~q&u,this.k[a],m[a]);v=b;v=Ys(v,2)^Ys(v,13)^Ys(v,22);var z=nr(v,b&e^b&g^e&g);v=u;u=r;r=q;q=nr(l,y);l=g;g=e;e=b;b=nr(y,z)}this.h[0]=nr(this.h[0],b);this.h[1]=nr(this.h[1],e);this.h[2]=nr(this.h[2],g);this.h[3]=nr(this.h[3],l);this.h[4]=nr(this.h[4],q);this.h[5]=nr(this.h[5],r);this.h[6]=
nr(this.h[6],u);this.h[7]=nr(this.h[7],v)};Vq.prototype._digest=function(b){return"hex"===b?Ef.toHex32(this.h,"big"):Ef.split32(this.h,"big")};var BP=Ef.rotl32,QD=Ef.sum32,Iha=Ef.sum32_5,kX=NA.BlockHash,Jha=[1518500249,1859775393,2400959708,3395469782];Ef.inherits(zs,kX);zs.blockSize=512;zs.outSize=160;zs.hmacStrength=80;zs.padLength=64;zs.prototype._update=function(b,e){for(var m=this.W,a=0;16>a;a++)m[a]=b[e+a];for(;a<m.length;a++)m[a]=BP(m[a-3]^m[a-8]^m[a-14]^m[a-16],1);b=this.h[0];e=this.h[1];
var g=this.h[2],l=this.h[3],q=this.h[4];for(a=0;a<m.length;a++){var r=~~(a/20);r=Iha(BP(b,5),0===r?e&g^~e&l:1===r||3===r?e^g^l:2===r?e&g^e&l^g&l:void 0,q,m[a],Jha[r]);q=l;l=g;g=BP(e,30);e=b;b=r}this.h[0]=QD(this.h[0],b);this.h[1]=QD(this.h[1],e);this.h[2]=QD(this.h[2],g);this.h[3]=QD(this.h[3],l);this.h[4]=QD(this.h[4],q)};zs.prototype._digest=function(b){return"hex"===b?Ef.toHex32(this.h,"big"):Ef.split32(this.h,"big")};var lX=Vq;Ef.inherits(mu,lX);mu.blockSize=512;mu.outSize=224;mu.hmacStrength=
192;mu.padLength=64;mu.prototype._digest=function(b){return"hex"===b?Ef.toHex32(this.h.slice(0,7),"big"):Ef.split32(this.h.slice(0,7),"big")};var mX=Np;Ef.inherits(nu,mX);nu.blockSize=1024;nu.outSize=384;nu.hmacStrength=192;nu.padLength=128;nu.prototype._digest=function(b){return"hex"===b?Ef.toHex32(this.h.slice(0,12),"big"):Ef.split32(this.h.slice(0,12),"big")};var OA={};OA.sha1=zs;OA.sha224=mu;OA.sha256=Vq;OA.sha384=nu;OA.sha512=Np;var q3={},JI=Ef.rotl32,r3=Ef.sum32,RD=Ef.sum32_3,s3=Ef.sum32_4,
nX=NA.BlockHash;Ef.inherits(As,nX);q3.ripemd160=As;As.blockSize=512;As.outSize=160;As.hmacStrength=192;As.padLength=64;As.prototype._update=function(b,e){for(var m=this.h[0],a=this.h[1],g=this.h[2],l=this.h[3],q=this.h[4],r=m,u=a,v=g,y=l,z=q,A=0;80>A;A++){var B=r3(JI(s3(m,oX(A,a,g,l),b[Kha[A]+e],15>=A?0:31>=A?1518500249:47>=A?1859775393:63>=A?2400959708:2840853838),Lha[A]),q);m=q;q=l;l=JI(g,10);g=a;a=B;B=r3(JI(s3(r,oX(79-A,u,v,y),b[Mha[A]+e],15>=A?1352829926:31>=A?1548603684:47>=A?1836072691:63>=
A?2053994217:0),Nha[A]),z);r=z;z=y;y=JI(v,10);v=u;u=B}B=RD(this.h[1],g,y);this.h[1]=RD(this.h[2],l,z);this.h[2]=RD(this.h[3],q,r);this.h[3]=RD(this.h[4],m,u);this.h[4]=RD(this.h[0],a,v);this.h[0]=B};As.prototype._digest=function(b){return"hex"===b?Ef.toHex32(this.h,"little"):Ef.split32(this.h,"little")};var Kha=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,
13],Mha=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Lha=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Nha=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,
8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],P9=Ef,Oha=Sp;Tz.prototype._init=function(b){b.length>this.blockSize&&(b=(new this.Hash).update(b).digest());Oha(b.length<=this.blockSize);for(var e=b.length;e<this.blockSize;e++)b.push(0);for(e=0;e<b.length;e++)b[e]^=54;this.inner=(new this.Hash).update(b);for(e=0;e<b.length;e++)b[e]^=106;this.outer=(new this.Hash).update(b)};Tz.prototype.update=function(b,e){return this.inner.update(b,e),
this};Tz.prototype.digest=function(b){return this.outer.update(this.inner.digest()),this.outer.digest(b)};var Lj={};Lj.utils=Ef;Lj.common=NA;Lj.sha=OA;Lj.ripemd=q3;Lj.hmac=Tz;Lj.sha1=Lj.sha.sha1;Lj.sha256=Lj.sha.sha256;Lj.sha224=Lj.sha.sha224;Lj.sha384=Lj.sha.sha384;Lj.sha512=Lj.sha.sha512;Lj.ripemd160=Lj.ripemd.ripemd160;var Kx=yw,pX=Sp;ou.prototype._init=function(b,e,m){b=b.concat(e).concat(m);this.K=Array(this.outLen/8);this.V=Array(this.outLen/8);for(e=0;e<this.V.length;e++)this.K[e]=0,this.V[e]=
1;this._update(b);this._reseed=1;this.reseedInterval=281474976710656};ou.prototype._hmac=function(){return new Lj.hmac(this.hash,this.K)};ou.prototype._update=function(b){var e=this._hmac().update(this.V).update([0]);b&&(e=e.update(b));this.K=e.digest();this.V=this._hmac().update(this.V).digest();b&&(this.K=this._hmac().update(this.V).update([1]).update(b).digest(),this.V=this._hmac().update(this.V).digest())};ou.prototype.reseed=function(b,e,m,a){"string"!=typeof e&&(a=m,m=e,e=null);b=Kx.toArray(b,
e);m=Kx.toArray(m,a);pX(b.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(b.concat(m||[]));this._reseed=1};ou.prototype.generate=function(b,e,m,a){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");"string"!=typeof e&&(a=m,m=e,e=null);m&&(m=Kx.toArray(m,a||"hex"),this._update(m));for(a=[];a.length<b;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);b=a.slice(0,b);return this._update(m),this._reseed++,Kx.encode(b,e)};
var Lx=fl,KI=Oh.getNAF,Pha=Oh.getJSF,LI=Oh.assert;Wq.prototype.point=function(){throw Error("Not implemented");};Wq.prototype.validate=function(){throw Error("Not implemented");};Wq.prototype._fixedNafMul=function(b,e){LI(b.precomputed);b=b._getDoubles();var m=KI(e,1,this._bitLength),a=(1<<b.step+1)-(0==b.step%2?2:1);a/=3;for(var g=[],l=0;l<m.length;l+=b.step){var q=0;for(e=l+b.step-1;e>=l;e--)q=(q<<1)+m[e];g.push(q)}e=this.jpoint(null,null,null);for(m=this.jpoint(null,null,null);0<a;a--){for(l=0;l<
g.length;l++)(q=g[l])===a?m=m.mixedAdd(b.points[l]):q===-a&&(m=m.mixedAdd(b.points[l].neg()));e=e.add(m)}return e.toP()};Wq.prototype._wnafMul=function(b,e){var m=b._getNAFPoints(4),a=m.points;m=KI(e,m.wnd,this._bitLength);for(var g=this.jpoint(null,null,null),l=m.length-1;0<=l;l--){for(e=0;0<=l&&0===m[l];l--)e++;if(0<=l&&e++,g=g.dblp(e),0>l)break;e=m[l];LI(0!==e);g="affine"===b.type?0<e?g.mixedAdd(a[e-1>>1]):g.mixedAdd(a[-e-1>>1].neg()):0<e?g.add(a[e-1>>1]):g.add(a[-e-1>>1].neg())}return"affine"===
b.type?g.toP():g};Wq.prototype._wnafMulAdd=function(b,e,m,a,g){for(var l=this._wnafT1,q=this._wnafT2,r=this._wnafT3,u=0,v=0;v<a;v++){var y=(E=e[v])._getNAFPoints(b);l[v]=y.wnd;q[v]=y.points}for(v=a-1;1<=v;v-=2){y=v-1;var z=v;if(1===l[y]&&1===l[z]){var A=[e[y],null,null,e[z]];0===e[y].y.cmp(e[z].y)?(A[1]=e[y].add(e[z]),A[2]=e[y].toJ().mixedAdd(e[z].neg())):0===e[y].y.cmp(e[z].y.redNeg())?(A[1]=e[y].toJ().mixedAdd(e[z]),A[2]=e[y].add(e[z].neg())):(A[1]=e[y].toJ().mixedAdd(e[z]),A[2]=e[y].toJ().mixedAdd(e[z].neg()));
var B=[-3,-1,-5,-7,0,7,5,1,3],G=Pha(m[y],m[z]);u=Math.max(G[0].length,u);r[y]=Array(u);r[z]=Array(u);for(b=0;b<u;b++)r[y][b]=B[3*((0|G[0][b])+1)+((0|G[1][b])+1)],r[z][b]=0,q[y]=A}else r[y]=KI(m[y],l[y],this._bitLength),r[z]=KI(m[z],l[z],this._bitLength),u=Math.max(r[y].length,u),u=Math.max(r[z].length,u)}e=this.jpoint(null,null,null);m=this._wnafT4;for(v=u;0<=v;v--){for(u=0;0<=v;){l=!0;for(b=0;b<a;b++)m[b]=0|r[b][v],0!==m[b]&&(l=!1);if(!l)break;u++;v--}if(0<=v&&u++,e=e.dblp(u),0>v)break;for(b=0;b<
a;b++){var E;u=m[b];0!==u&&(0<u?E=q[b][u-1>>1]:0>u&&(E=q[b][-u-1>>1].neg()),e="affine"===E.type?e.mixedAdd(E):e.add(E))}}for(v=0;v<a;v++)q[v]=null;return g?e:e.toP()};Wq.BasePoint=Op;Op.prototype.eq=function(){throw Error("Not implemented");};Op.prototype.validate=function(){return this.curve.validate(this)};Wq.prototype.decodePoint=function(b,e){b=Oh.toArray(b,e);e=this.p.byteLength();if((4===b[0]||6===b[0]||7===b[0])&&b.length-1==2*e)return 6===b[0]?LI(0==b[b.length-1]%2):7===b[0]&&LI(1==b[b.length-
1]%2),this.point(b.slice(1,1+e),b.slice(1+e,1+2*e));if((2===b[0]||3===b[0])&&b.length-1===e)return this.pointFromX(b.slice(1,1+e),3===b[0]);throw Error("Unknown point format");};Op.prototype.encodeCompressed=function(b){return this.encode(b,!0)};Op.prototype._encode=function(b){var e=this.curve.p.byteLength(),m=this.getX().toArray("be",e);return b?[this.getY().isEven()?2:3].concat(m):[4].concat(m,this.getY().toArray("be",e))};Op.prototype.encode=function(b,e){return Oh.encode(this._encode(e),b)};
Op.prototype.precompute=function(b){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,b),e.beta=this._getBeta(),this.precomputed=e,this};Op.prototype._hasDoubles=function(b){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((b.bitLength()+1)/e.step)};Op.prototype._getDoubles=function(b,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;
for(var m=[this],a=this,g=0;g<e;g+=b){for(var l=0;l<b;l++)a=a.dbl();m.push(a)}return{step:b,points:m}};Op.prototype._getNAFPoints=function(b){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],m=(1<<b)-1,a=1===m?null:this.dbl(),g=1;g<m;g++)e[g]=e[g-1].add(a);return{wnd:b,points:e}};Op.prototype._getBeta=function(){return null};Op.prototype.dblp=function(b){for(var e=this,m=0;m<b;m++)e=e.dbl();return e};var Dk=fl,CP=zh,Uz=Wq,Qha=Oh.assert;CP(Pp,Uz);Pp.prototype._getEndomorphism=
function(b){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){if(b.beta)var e=(new Dk(b.beta,16)).toRed(this.red);else e=this._getEndoRoots(this.p),e=(e=0>e[0].cmp(e[1])?e[0]:e[1]).toRed(this.red);if(b.lambda)var m=new Dk(b.lambda,16);else{var a=this._getEndoRoots(this.n);0===this.g.mul(a[0]).x.cmp(this.g.x.redMul(e))?m=a[0]:(m=a[1],Qha(0===this.g.mul(m).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:m,basis:b.basis?b.basis.map(function(g){return{a:new Dk(g.a,16),b:new Dk(g.b,16)}}):this._getEndoBasis(m)}}};
Pp.prototype._getEndoRoots=function(b){var e=b===this.p?this.red:Dk.mont(b),m=(new Dk(2)).toRed(e).redInvm();b=m.redNeg();e=(new Dk(3)).toRed(e).redNeg().redSqrt().redMul(m);return[b.redAdd(e).fromRed(),b.redSub(e).fromRed()]};Pp.prototype._getEndoBasis=function(b){for(var e,m,a,g,l,q,r,u=this.n.ushrn(Math.floor(this.n.bitLength()/2)),v=this.n.clone(),y=new Dk(1),z=new Dk(0),A=new Dk(0),B=new Dk(1),G=0;0!==b.cmpn(0);){var E=v.div(b);r=v.sub(E.mul(b));q=A.sub(E.mul(y));E=B.sub(E.mul(z));if(!a&&0>r.cmp(u))e=
l.neg(),m=y,a=r.neg(),g=q;else if(a&&2==++G)break;l=r;v=b;b=r;A=y;y=q;B=z;z=E}l=r.neg();r=a.sqr().add(g.sqr());return 0<=l.sqr().add(q.sqr()).cmp(r)&&(l=e,q=m),a.negative&&(a=a.neg(),g=g.neg()),l.negative&&(l=l.neg(),q=q.neg()),[{a:a,b:g},{a:l,b:q}]};Pp.prototype._endoSplit=function(b){var e=this.endo.basis,m=e[0],a=e[1],g=a.b.mul(b).divRound(this.n),l=m.b.neg().mul(b).divRound(this.n);e=g.mul(m.a);var q=l.mul(a.a);m=g.mul(m.b);a=l.mul(a.b);return{k1:b.sub(e).sub(q),k2:m.add(a).neg()}};Pp.prototype.pointFromX=
function(b,e){(b=new Dk(b,16)).red||(b=b.toRed(this.red));var m=b.redSqr().redMul(b).redIAdd(b.redMul(this.a)).redIAdd(this.b),a=m.redSqrt();if(0!==a.redSqr().redSub(m).cmp(this.zero))throw Error("invalid point");m=a.fromRed().isOdd();return(e&&!m||!e&&m)&&(a=a.redNeg()),this.point(b,a)};Pp.prototype.validate=function(b){if(b.inf)return!0;var e=b.x;b=b.y;var m=this.a.redMul(e);e=e.redSqr().redMul(e).redIAdd(m).redIAdd(this.b);return 0===b.redSqr().redISub(e).cmpn(0)};Pp.prototype._endoWnafMulAdd=
function(b,e,m){for(var a=this._endoWnafT1,g=this._endoWnafT2,l=0;l<b.length;l++){var q=this._endoSplit(e[l]),r=b[l],u=r._getBeta();q.k1.negative&&(q.k1.ineg(),r=r.neg(!0));q.k2.negative&&(q.k2.ineg(),u=u.neg(!0));a[2*l]=r;a[2*l+1]=u;g[2*l]=q.k1;g[2*l+1]=q.k2}b=this._wnafMulAdd(1,a,g,2*l,m);for(e=0;e<2*l;e++)a[e]=null,g[e]=null;return b};CP(Yl,Uz.BasePoint);Pp.prototype.point=function(b,e,m){return new Yl(this,b,e,m)};Pp.prototype.pointFromJSON=function(b,e){return Yl.fromJSON(this,b,e)};Yl.prototype._getBeta=
function(){if(this.curve.endo){var b=this.precomputed;if(b&&b.beta)return b.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(b){var m=this.curve,a=function(g){return m.point(g.x.redMul(m.endo.beta),g.y)};b.beta=e;e.precomputed={beta:null,naf:b.naf&&{wnd:b.naf.wnd,points:b.naf.points.map(a)},doubles:b.doubles&&{step:b.doubles.step,points:b.doubles.points.map(a)}}}return e}};Yl.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&
{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Yl.fromJSON=function(b,e,m){function a(l){return b.point(l[0],l[1],m)}"string"==typeof e&&(e=JSON.parse(e));var g=b.point(e[0],e[1],m);if(!e[2])return g;e=e[2];return g.precomputed={beta:null,doubles:e.doubles&&{step:e.doubles.step,points:[g].concat(e.doubles.points.map(a))},naf:e.naf&&{wnd:e.naf.wnd,
points:[g].concat(e.naf.points.map(a))}},g};Yl.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Yl.prototype.isInfinity=function(){return this.inf};Yl.prototype.add=function(b){if(this.inf)return b;if(b.inf)return this;if(this.eq(b))return this.dbl();if(this.neg().eq(b)||0===this.x.cmp(b.x))return this.curve.point(null,null);var e=this.y.redSub(b.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(b.x).redInvm()));
b=e.redSqr().redISub(this.x).redISub(b.x);e=e.redMul(this.x.redSub(b)).redISub(this.y);return this.curve.point(b,e)};Yl.prototype.dbl=function(){if(this.inf)return this;var b=this.y.redAdd(this.y);if(0===b.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,m=this.x.redSqr();b=b.redInvm();m=m.redAdd(m).redIAdd(m).redIAdd(e).redMul(b);e=m.redSqr().redISub(this.x.redAdd(this.x));m=m.redMul(this.x.redSub(e)).redISub(this.y);return this.curve.point(e,m)};Yl.prototype.getX=function(){return this.x.fromRed()};
Yl.prototype.getY=function(){return this.y.fromRed()};Yl.prototype.mul=function(b){return b=new Dk(b,16),this.isInfinity()?this:this._hasDoubles(b)?this.curve._fixedNafMul(this,b):this.curve.endo?this.curve._endoWnafMulAdd([this],[b]):this.curve._wnafMul(this,b)};Yl.prototype.mulAdd=function(b,e,m){e=[this,e];b=[b,m];return this.curve.endo?this.curve._endoWnafMulAdd(e,b):this.curve._wnafMulAdd(1,e,b,2)};Yl.prototype.jmulAdd=function(b,e,m){e=[this,e];b=[b,m];return this.curve.endo?this.curve._endoWnafMulAdd(e,
b,!0):this.curve._wnafMulAdd(1,e,b,2,!0)};Yl.prototype.eq=function(b){return this===b||this.inf===b.inf&&(this.inf||0===this.x.cmp(b.x)&&0===this.y.cmp(b.y))};Yl.prototype.neg=function(b){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(b&&this.precomputed){b=this.precomputed;var m=function(a){return a.neg()};e.precomputed={naf:b.naf&&{wnd:b.naf.wnd,points:b.naf.points.map(m)},doubles:b.doubles&&{step:b.doubles.step,points:b.doubles.points.map(m)}}}return e};Yl.prototype.toJ=
function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)};CP(um,Uz.BasePoint);Pp.prototype.jpoint=function(b,e,m){return new um(this,b,e,m)};um.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var b=this.z.redInvm(),e=b.redSqr(),m=this.x.redMul(e);b=this.y.redMul(e).redMul(b);return this.curve.point(m,b)};um.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};um.prototype.add=function(b){if(this.isInfinity())return b;
if(b.isInfinity())return this;var e=b.z.redSqr(),m=this.z.redSqr(),a=this.x.redMul(e),g=b.x.redMul(m);e=this.y.redMul(e.redMul(b.z));m=b.y.redMul(m.redMul(this.z));g=a.redSub(g);m=e.redSub(m);if(0===g.cmpn(0))return 0!==m.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=g.redSqr(),q=l.redMul(g);l=a.redMul(l);a=m.redSqr().redIAdd(q).redISub(l).redISub(l);e=m.redMul(l.redISub(a)).redISub(e.redMul(q));b=this.z.redMul(b.z).redMul(g);return this.curve.jpoint(a,e,b)};um.prototype.mixedAdd=function(b){if(this.isInfinity())return b.toJ();
if(b.isInfinity())return this;var e=this.z.redSqr(),m=this.x,a=b.x.redMul(e),g=this.y;b=b.y.redMul(e).redMul(this.z);a=m.redSub(a);b=g.redSub(b);if(0===a.cmpn(0))return 0!==b.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr();e=l.redMul(a);l=m.redMul(l);m=b.redSqr().redIAdd(e).redISub(l).redISub(l);g=b.redMul(l.redISub(m)).redISub(g.redMul(e));a=this.z.redMul(a);return this.curve.jpoint(m,g,a)};um.prototype.dblp=function(b){if(0===b||this.isInfinity())return this;if(!b)return this.dbl();
if(this.curve.zeroA||this.curve.threeA){for(var e=this,m=0;m<b;m++)e=e.dbl();return e}e=this.curve.a;var a=this.curve.tinv,g=this.x;m=this.y;var l=this.z,q=l.redSqr().redSqr(),r=m.redAdd(m);for(m=0;m<b;m++){var u=g.redSqr(),v=r.redSqr(),y=v.redSqr();u=u.redAdd(u).redIAdd(u).redIAdd(e.redMul(q));v=g.redMul(v);g=u.redSqr().redISub(v.redAdd(v));v=v.redISub(g);u=u.redMul(v);u=u.redIAdd(u).redISub(y);l=r.redMul(l);m+1<b&&(q=q.redMul(y));r=u}return this.curve.jpoint(g,r.redMul(a),l)};um.prototype.dbl=function(){return this.isInfinity()?
this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};um.prototype._zeroDbl=function(){if(this.zOne){var b=this.x.redSqr();var e=this.y.redSqr();var m=e.redSqr();e=this.x.redAdd(e).redSqr().redISub(b).redISub(m);e=e.redIAdd(e);b=b.redAdd(b).redIAdd(b);var a=b.redSqr().redISub(e).redISub(e),g=m.redIAdd(m);g=(g=g.redIAdd(g)).redIAdd(g);m=a;b=b.redMul(e.redISub(a)).redISub(g);e=this.y.redAdd(this.y)}else{a=this.x.redSqr();b=this.y.redSqr();m=b.redSqr();b=this.x.redAdd(b).redSqr().redISub(a).redISub(m);
b=b.redIAdd(b);a=a.redAdd(a).redIAdd(a);g=a.redSqr();var l=m.redIAdd(m);l=(l=l.redIAdd(l)).redIAdd(l);m=g.redISub(b).redISub(b);b=a.redMul(b.redISub(m)).redISub(l);e=(e=this.y.redMul(this.z)).redIAdd(e)}return this.curve.jpoint(m,b,e)};um.prototype._threeDbl=function(){var b;if(this.zOne){var e=this.x.redSqr();var m=this.y.redSqr();var a=m.redSqr();m=this.x.redAdd(m).redSqr().redISub(e).redISub(a);m=m.redIAdd(m);var g=e.redAdd(e).redIAdd(e).redIAdd(this.curve.a);e=b=g.redSqr().redISub(m).redISub(m);
a=a.redIAdd(a);a=(a=a.redIAdd(a)).redIAdd(a);a=g.redMul(m.redISub(b)).redISub(a);b=this.y.redAdd(this.y)}else b=this.z.redSqr(),m=this.y.redSqr(),e=this.x.redMul(m),a=this.x.redSub(b).redMul(this.x.redAdd(b)),a=a.redAdd(a).redIAdd(a),g=e.redIAdd(e),e=(g=g.redIAdd(g)).redAdd(g),e=a.redSqr().redISub(e),b=this.y.redAdd(this.z).redSqr().redISub(m).redISub(b),m=m.redSqr(),m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),a=a.redMul(g.redISub(e)).redISub(m);return this.curve.jpoint(e,a,b)};um.prototype._dbl=
function(){var b=this.curve.a,e=this.x,m=this.y,a=this.z,g=a.redSqr().redSqr(),l=e.redSqr(),q=m.redSqr();b=l.redAdd(l).redIAdd(l).redIAdd(b.redMul(g));e=e.redAdd(e);g=e.redIAdd(e).redMul(q);e=b.redSqr().redISub(g.redAdd(g));g=g.redISub(e);q=q.redSqr();q=(q=(q=q.redIAdd(q)).redIAdd(q)).redIAdd(q);q=b.redMul(g).redISub(q);m=m.redAdd(m).redMul(a);return this.curve.jpoint(e,q,m)};um.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var b=this.x.redSqr(),e=this.y.redSqr(),m=this.z.redSqr(),
a=e.redSqr(),g=b.redAdd(b).redIAdd(b),l=g.redSqr();b=this.x.redAdd(e).redSqr().redISub(b).redISub(a);var q=(b=(b=(b=b.redIAdd(b)).redAdd(b).redIAdd(b)).redISub(l)).redSqr();a=a.redIAdd(a);a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);g=g.redIAdd(b).redSqr().redISub(l).redISub(q).redISub(a);e=e.redMul(g);e=(e=e.redIAdd(e)).redIAdd(e);e=this.x.redMul(q).redISub(e);e=(e=e.redIAdd(e)).redIAdd(e);a=this.y.redMul(g.redMul(a.redISub(g)).redISub(b.redMul(q)));a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);m=
this.z.redAdd(b).redSqr().redISub(m).redISub(q);return this.curve.jpoint(e,a,m)};um.prototype.mul=function(b,e){return b=new Dk(b,e),this.curve._wnafMul(this,b)};um.prototype.eq=function(b){if("affine"===b.type)return this.eq(b.toJ());if(this===b)return!0;var e=this.z.redSqr(),m=b.z.redSqr();if(0!==this.x.redMul(m).redISub(b.x.redMul(e)).cmpn(0))return!1;e=e.redMul(this.z);m=m.redMul(b.z);return 0===this.y.redMul(m).redISub(b.y.redMul(e)).cmpn(0)};um.prototype.eqXToP=function(b){var e=this.z.redSqr(),
m=b.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(m))return!0;b=b.clone();for(e=this.curve.redN.redMul(e);;){if(b.iadd(this.curve.n),0<=b.cmp(this.curve.p))return!1;if(m.redIAdd(e),0===this.x.cmp(m))return!0}};um.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};um.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Wz=fl,t3=zh,wG=Wq;t3(Vz,wG);Vz.prototype.validate=
function(b){b=b.normalize().x;var e=b.redSqr();b=e.redMul(b).redAdd(e.redMul(this.a)).redAdd(b);return 0===b.redSqrt().redSqr().cmp(b)};t3(Zl,wG.BasePoint);Vz.prototype.decodePoint=function(b,e){return this.point(Oh.toArray(b,e),1)};Vz.prototype.point=function(b,e){return new Zl(this,b,e)};Vz.prototype.pointFromJSON=function(b){return Zl.fromJSON(this,b)};Zl.prototype.precompute=function(){};Zl.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Zl.fromJSON=function(b,
e){return new Zl(b,e[0],e[1]||b.one)};Zl.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Zl.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};Zl.prototype.dbl=function(){var b=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),m=b.redSub(e);b=b.redMul(e);e=m.redMul(e.redAdd(this.curve.a24.redMul(m)));return this.curve.point(b,e)};Zl.prototype.add=function(){throw Error("Not supported on Montgomery curve");
};Zl.prototype.diffAdd=function(b,e){var m=this.x.redAdd(this.z),a=this.x.redSub(this.z),g=b.x.redAdd(b.z);b=b.x.redSub(b.z).redMul(m);g=g.redMul(a);a=e.z.redMul(b.redAdd(g).redSqr());e=e.x.redMul(b.redISub(g).redSqr());return this.curve.point(a,e)};Zl.prototype.mul=function(b){var e=b.clone();b=this;for(var m=this.curve.point(null,null),a=[];0!==e.cmpn(0);e.iushrn(1))a.push(e.andln(1));for(e=a.length-1;0<=e;e--)0===a[e]?(b=b.diffAdd(m,this),m=m.dbl()):(m=b.diffAdd(m,this),b=b.dbl());return m};Zl.prototype.mulAdd=
function(){throw Error("Not supported on Montgomery curve");};Zl.prototype.jumlAdd=function(){throw Error("Not supported on Montgomery curve");};Zl.prototype.eq=function(b){return 0===this.getX().cmp(b.getX())};Zl.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Zl.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var pu=fl,u3=zh,xG=Wq,Q9=Oh.assert;u3(Bs,xG);Bs.prototype._mulA=function(b){return this.mOneA?b.redNeg():this.a.redMul(b)};
Bs.prototype._mulC=function(b){return this.oneC?b:this.c.redMul(b)};Bs.prototype.jpoint=function(b,e,m,a){return this.point(b,e,m,a)};Bs.prototype.pointFromX=function(b,e){(b=new pu(b,16)).red||(b=b.toRed(this.red));var m=b.redSqr(),a=this.c2.redSub(this.a.redMul(m));m=this.one.redSub(this.c2.redMul(this.d).redMul(m));m=a.redMul(m.redInvm());a=m.redSqrt();if(0!==a.redSqr().redSub(m).cmp(this.zero))throw Error("invalid point");m=a.fromRed().isOdd();return(e&&!m||!e&&m)&&(a=a.redNeg()),this.point(b,
a)};Bs.prototype.pointFromY=function(b,e){(b=new pu(b,16)).red||(b=b.toRed(this.red));var m=b.redSqr(),a=m.redSub(this.c2);m=m.redMul(this.d).redMul(this.c2).redSub(this.a);a=a.redMul(m.redInvm());if(0===a.cmp(this.zero)){if(e)throw Error("invalid point");return this.point(this.zero,b)}m=a.redSqrt();if(0!==m.redSqr().redSub(a).cmp(this.zero))throw Error("invalid point");return m.fromRed().isOdd()!==e&&(m=m.redNeg()),this.point(m,b)};Bs.prototype.validate=function(b){if(b.isInfinity())return!0;b.normalize();
var e=b.x.redSqr(),m=b.y.redSqr();b=e.redMul(this.a).redAdd(m);e=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(m)));return 0===b.cmp(e)};u3(Rj,xG.BasePoint);Bs.prototype.pointFromJSON=function(b){return Rj.fromJSON(this,b)};Bs.prototype.point=function(b,e,m,a){return new Rj(this,b,e,m,a)};Rj.fromJSON=function(b,e){return new Rj(b,e[0],e[1],e[2])};Rj.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,
2)+" z: "+this.z.fromRed().toString(16,2)+">"};Rj.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))};Rj.prototype._extDbl=function(){var b=this.x.redSqr(),e=this.y.redSqr(),m=this.z.redSqr();m=m.redIAdd(m);var a=this.curve._mulA(b),g=this.x.redAdd(this.y).redSqr().redISub(b).redISub(e);b=a.redAdd(e);m=b.redSub(m);var l=a.redSub(e);e=g.redMul(m);a=b.redMul(l);g=g.redMul(l);b=m.redMul(b);return this.curve.point(e,a,b,g)};Rj.prototype._projDbl=
function(){var b=this.x.redAdd(this.y).redSqr();var e=this.x.redSqr();var m=this.y.redSqr();if(this.curve.twisted){var a=(l=this.curve._mulA(e)).redAdd(m);if(this.zOne)b=b.redSub(e).redSub(m).redMul(a.redSub(this.curve.two)),e=a.redMul(l.redSub(m)),a=a.redSqr().redSub(a).redSub(a);else{var g=this.z.redSqr();g=a.redSub(g).redISub(g);b=b.redSub(e).redISub(m).redMul(g);e=a.redMul(l.redSub(m));a=a.redMul(g)}}else{var l=e.redAdd(m);g=this.curve._mulC(this.z).redSqr();g=l.redSub(g).redSub(g);b=this.curve._mulC(b.redISub(l)).redMul(g);
e=this.curve._mulC(l).redMul(e.redISub(m));a=l.redMul(g)}return this.curve.point(b,e,a)};Rj.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Rj.prototype._extAdd=function(b){var e=this.y.redSub(this.x).redMul(b.y.redSub(b.x)),m=this.y.redAdd(this.x).redMul(b.y.redAdd(b.x)),a=this.t.redMul(this.curve.dd).redMul(b.t),g=this.z.redMul(b.z.redAdd(b.z)),l=m.redSub(e);b=g.redSub(a);a=g.redAdd(a);g=m.redAdd(e);e=l.redMul(b);m=a.redMul(g);l=l.redMul(g);
b=b.redMul(a);return this.curve.point(e,m,b,l)};Rj.prototype._projAdd=function(b){var e,m,a=this.z.redMul(b.z),g=a.redSqr(),l=this.x.redMul(b.x),q=this.y.redMul(b.y),r=this.curve.d.redMul(l).redMul(q),u=g.redSub(r);g=g.redAdd(r);b=this.x.redAdd(this.y).redMul(b.x.redAdd(b.y)).redISub(l).redISub(q);b=a.redMul(u).redMul(b);return this.curve.twisted?(e=a.redMul(g).redMul(q.redSub(this.curve._mulA(l))),m=u.redMul(g)):(e=a.redMul(g).redMul(q.redSub(l)),m=this.curve._mulC(u).redMul(g)),this.curve.point(b,
e,m)};Rj.prototype.add=function(b){return this.isInfinity()?b:b.isInfinity()?this:this.curve.extended?this._extAdd(b):this._projAdd(b)};Rj.prototype.mul=function(b){return this._hasDoubles(b)?this.curve._fixedNafMul(this,b):this.curve._wnafMul(this,b)};Rj.prototype.mulAdd=function(b,e,m){return this.curve._wnafMulAdd(1,[this,e],[b,m],2,!1)};Rj.prototype.jmulAdd=function(b,e,m){return this.curve._wnafMulAdd(1,[this,e],[b,m],2,!0)};Rj.prototype.normalize=function(){if(this.zOne)return this;var b=this.z.redInvm();
return this.x=this.x.redMul(b),this.y=this.y.redMul(b),this.t&&(this.t=this.t.redMul(b)),this.z=this.curve.one,this.zOne=!0,this};Rj.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Rj.prototype.getX=function(){return this.normalize(),this.x.fromRed()};Rj.prototype.getY=function(){return this.normalize(),this.y.fromRed()};Rj.prototype.eq=function(b){return this===b||0===this.getX().cmp(b.getX())&&0===this.getY().cmp(b.getY())};Rj.prototype.eqXToP=
function(b){var e=b.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;b=b.clone();for(var m=this.curve.redN.redMul(this.z);;){if(b.iadd(this.curve.n),0<=b.cmp(this.curve.p))return!1;if(e.redIAdd(m),0===this.x.cmp(e))return!0}};Rj.prototype.toP=Rj.prototype.normalize;Rj.prototype.mixedAdd=Rj.prototype.add;var PA={};PA.base=Wq;PA.short=Pp;PA.mont=Vz;PA.edwards=Bs;var Rha={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],
["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],
["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],
["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],
["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],
["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],
["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],
["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],
["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],
["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],
["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],
["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],
["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],
["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],
["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],
["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],
["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},
naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],
["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],
["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],
["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],
["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],
["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],
["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],
["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],
["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],
["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],
["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],
["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],
["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],
["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],
["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],
["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],
["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],
["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],
["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],
["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],
["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],
["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],
["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],
["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],
["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],
["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],
["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],
["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],
["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],
["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],
["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],
["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}},MI={},UL=MI,TL=PA,rX=Oh.assert;UL.PresetCurve=qX;Vv("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",
a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Lj.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});Vv("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",
n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Lj.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});Vv("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",
hash:Lj.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});Vv("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",
n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Lj.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});Vv("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",
a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Lj.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66",
"00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});Vv("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Lj.sha256,gRed:!1,g:["9"]});Vv("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",
a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Lj.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{var v3=Rha}catch(b){v3=void 0}Vv("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",
h:"1",hash:Lj.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",v3]});var Sha=fl,w3=Oh.assert;
$l.fromPublic=function(b,e,m){return e instanceof $l?e:new $l(b,{pub:e,pubEnc:m})};$l.fromPrivate=function(b,e,m){return e instanceof $l?e:new $l(b,{priv:e,privEnc:m})};$l.prototype.validate=function(){var b=this.getPublic();return b.isInfinity()?{result:!1,reason:"Invalid public key"}:b.validate()?b.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};$l.prototype.getPublic=function(b,e){return"string"==
typeof b&&(e=b,b=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,b):this.pub};$l.prototype.getPrivate=function(b){return"hex"===b?this.priv.toString(16,2):this.priv};$l.prototype._importPrivate=function(b,e){this.priv=new Sha(b,e||16);this.priv=this.priv.umod(this.ec.curve.n)};$l.prototype._importPublic=function(b,e){if(b.x||b.y)return"mont"===this.ec.curve.type?w3(b.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||w3(b.x&&b.y,"Need both x and y coordinate"),
this.pub=this.ec.curve.point(b.x,b.y),void 0;this.pub=this.ec.curve.decodePoint(b,e)};$l.prototype.derive=function(b){return b.mul(this.priv).getX()};$l.prototype.sign=function(b,e,m){return this.ec.sign(b,this,e,m)};$l.prototype.verify=function(b,e){return this.ec.verify(b,e,this)};$l.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var ty=fl,VL=MI,sX=Oh.assert;Qp.prototype.keyPair=function(b){return new $l(this,
b)};Qp.prototype.keyFromPrivate=function(b,e){return $l.fromPrivate(this,b,e)};Qp.prototype.keyFromPublic=function(b,e){return $l.fromPublic(this,b,e)};Qp.prototype.genKeyPair=function(b){b||(b={});b=new ou({hash:this.hash,pers:b.pers,persEnc:b.persEnc||"utf8",entropy:b.entropy||HI(this.hash.hmacStrength),entropyEnc:b.entropy&&b.entropyEnc||"utf8",nonce:this.n.toArray()});for(var e=this.n.byteLength(),m=this.n.sub(new ty(2));;){var a=new ty(b.generate(e));if(!(0<a.cmp(m)))return a.iaddn(1),this.keyFromPrivate(a)}};
Qp.prototype._truncateToN=function(b,e){var m=8*b.byteLength()-this.n.bitLength();return 0<m&&(b=b.ushrn(m)),!e&&0<=b.cmp(this.n)?b.sub(this.n):b};Qp.prototype.sign=function(b,e,m,a){"object"==typeof m&&(a=m,m=null);a||(a={});e=this.keyFromPrivate(e,m);b=this._truncateToN(new ty(b,16));var g=this.n.byteLength();m=e.getPrivate().toArray("be",g);g=b.toArray("be",g);g=new ou({hash:this.hash,entropy:m,nonce:g,pers:a.pers,persEnc:a.persEnc||"utf8"});for(var l=this.n.sub(new ty(1)),q=0;;q++){var r=a.k?
a.k(q):new ty(g.generate(this.n.byteLength()));if(!(0>=(r=this._truncateToN(r,!0)).cmpn(1)||0<=r.cmp(l))){var u=this.g.mul(r);if(!u.isInfinity()){var v=u.getX();m=v.umod(this.n);if(0!==m.cmpn(0)&&(r=r.invm(this.n).mul(m.mul(e.getPrivate()).iadd(b)),0!==(r=r.umod(this.n)).cmpn(0)))return b=(u.getY().isOdd()?1:0)|(0!==v.cmp(m)?2:0),a.canonical&&0<r.cmp(this.nh)&&(r=this.n.sub(r),b^=1),new Jx({r:m,s:r,recoveryParam:b})}}}};Qp.prototype.verify=function(b,e,m,a){b=this._truncateToN(new ty(b,16));m=this.keyFromPublic(m,
a);a=(e=new Jx(e,"hex")).r;e=e.s;if(0>a.cmpn(1)||0<=a.cmp(this.n)||0>e.cmpn(1)||0<=e.cmp(this.n))return!1;var g;e=e.invm(this.n);b=e.mul(b).umod(this.n);e=e.mul(a).umod(this.n);return this.curve._maxwellTrick?!(g=this.g.jmulAdd(b,m.getPublic(),e)).isInfinity()&&g.eqXToP(a):!(g=this.g.mulAdd(b,m.getPublic(),e)).isInfinity()&&0===g.getX().umod(this.n).cmp(a)};Qp.prototype.recoverPubKey=function(b,e,m,a){sX((3&m)===m,"The recovery param is more than two bits");e=new Jx(e,a);a=this.n;var g=new ty(b);
b=e.r;var l=e.s,q=1&m;m>>=1;if(0<=b.cmp(this.curve.p.umod(this.curve.n))&&m)throw Error("Unable to find sencond key candinate");b=m?this.curve.pointFromX(b.add(this.curve.n),q):this.curve.pointFromX(b,q);e=e.r.invm(a);m=a.sub(g).mul(e).umod(a);a=l.mul(e).umod(a);return this.g.mulAdd(m,b,a)};Qp.prototype.getKeyRecoveryParam=function(b,e,m,a){if(null!==(e=new Jx(e,a)).recoveryParam)return e.recoveryParam;for(a=0;4>a;a++){try{var g=this.recoverPubKey(b,e,a)}catch(l){continue}if(g.eq(m))return a}throw Error("Unable to find valid recovery factor");
};var x3=Oh.assert,tX=Oh.parseBytes,QA=Oh.cachedProperty;xl.fromPublic=function(b,e){return e instanceof xl?e:new xl(b,{pub:e})};xl.fromSecret=function(b,e){return e instanceof xl?e:new xl(b,{secret:e})};xl.prototype.secret=function(){return this._secret};QA(xl,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});QA(xl,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});QA(xl,"privBytes",function(){var b=this.eddsa,e=this.hash(),
m=b.encodingLength-1;b=e.slice(0,b.encodingLength);return b[0]&=248,b[m]&=127,b[m]|=64,b});QA(xl,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});QA(xl,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});QA(xl,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});xl.prototype.sign=function(b){return x3(this._secret,"KeyPair can only verify"),this.eddsa.sign(b,this)};xl.prototype.verify=function(b,e){return this.eddsa.verify(b,e,this)};
xl.prototype.getSecret=function(b){return x3(this._secret,"KeyPair is public only"),Oh.encode(this.secret(),b)};xl.prototype.getPublic=function(b){return Oh.encode(this.pubBytes(),b)};var T9=fl,S9=Oh.assert,NI=Oh.cachedProperty,R9=Oh.parseBytes;NI(Wv,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});NI(Wv,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});NI(Wv,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});NI(Wv,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});
Wv.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Wv.prototype.toHex=function(){return Oh.encode(this.toBytes(),"hex").toUpperCase()};var W9=Lj,V9=MI,U9=Oh.assert,y3=Oh.parseBytes;Un.prototype.sign=function(b,e){b=y3(b);var m=this.keyFromSecret(e),a=this.hashInt(m.messagePrefix(),b);e=this.g.mul(a);var g=this.encodePoint(e);b=this.hashInt(g,m.pubBytes(),b).mul(m.priv());b=a.add(b).umod(this.curve.n);return this.makeSignature({R:e,S:b,Rencoded:g})};Un.prototype.verify=
function(b,e,m){b=y3(b);e=this.makeSignature(e);m=this.keyFromPublic(m);b=this.hashInt(e.Rencoded(),m.pubBytes(),b);var a=this.g.mul(e.S());return e.R().add(m.pub().mul(b)).eq(a)};Un.prototype.hashInt=function(){for(var b=this.hash(),e=0;e<arguments.length;e++)b.update(arguments[e]);return Oh.intFromLE(b.digest()).umod(this.curve.n)};Un.prototype.keyFromPublic=function(b){return xl.fromPublic(this,b)};Un.prototype.keyFromSecret=function(b){return xl.fromSecret(this,b)};Un.prototype.makeSignature=
function(b){return b instanceof Wv?b:new Wv(this,b)};Un.prototype.encodePoint=function(b){var e=b.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=b.getX().isOdd()?128:0,e};Un.prototype.decodePoint=function(b){var e=(b=Oh.parseBytes(b)).length-1,m=b.slice(0,e).concat(-129&b[e]);b=0!=(128&b[e]);m=Oh.intFromLE(m);return this.curve.pointFromY(m,b)};Un.prototype.encodeInt=function(b){return b.toArray("le",this.encodingLength)};Un.prototype.decodeInt=function(b){return Oh.intFromLE(b)};
Un.prototype.isPoint=function(b){return b instanceof this.pointClass};var Hu={version:"6.5.2"};Hu.utils=Oh;Hu.rand=HI;Hu.curve=PA;Hu.curves=MI;Hu.ec=Qp;Hu.eddsa=Un;var hM={},LX=!1,Fo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,yl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,xX={},Tha=zh;xX.Reporter=Rp;Rp.prototype.isError=function(b){return b instanceof Xz};Rp.prototype.save=function(){var b=(this||yl)._reporterState;return{obj:b.obj,
pathLen:b.path.length}};Rp.prototype.restore=function(b){var e=(this||yl)._reporterState;e.obj=b.obj;e.path=e.path.slice(0,b.pathLen)};Rp.prototype.enterKey=function(b){return(this||yl)._reporterState.path.push(b)};Rp.prototype.exitKey=function(b){var e=(this||yl)._reporterState;e.path=e.path.slice(0,b-1)};Rp.prototype.leaveKey=function(b,e,m){var a=(this||yl)._reporterState;this.exitKey(b);null!==a.obj&&(a.obj[e]=m)};Rp.prototype.path=function(){return(this||yl)._reporterState.path.join("/")};Rp.prototype.enterObject=
function(){var b=(this||yl)._reporterState,e=b.obj;return b.obj={},e};Rp.prototype.leaveObject=function(b){var e=(this||yl)._reporterState,m=e.obj;return e.obj=b,m};Rp.prototype.error=function(b){var e=(this||yl)._reporterState,m=b instanceof Xz;if(b=m?b:new Xz(e.path.map(function(a){return"["+JSON.stringify(a)+"]"}).join(""),b.message||b,b.stack),!e.options.partial)throw b;return m||e.errors.push(b),b};Rp.prototype.wrapResult=function(b){var e=(this||yl)._reporterState;return e.options.partial?{result:this.isError(b)?
null:b,errors:e.errors}:b};Tha(Xz,Error);Xz.prototype.rethrow=function(b){if((this||yl).message=b+" at: "+((this||yl).path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this||yl,Xz),!(this||yl).stack)try{throw Error((this||yl).message);}catch(e){(this||yl).stack=e.stack}return this||yl};var yG={},vX=!1,Og="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,XL={},yX=!1,pg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,WL={},
wX=!1,Xv={},BX=!1,YL={},AX=!1,ZL={},DX=!1,Yv="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,bM={},FX=!1,aM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,$L={},EX=!1,cM={},HX=!1,zl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,fM={},JX=!1,eM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,dM={},IX=!1,gM={},KX=!1,Gk=zG(),z3=Gk.define("Time",function(){this.choice({utcTime:this.utctime(),
generalTime:this.gentime()})}),Uha=Gk.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),DP=Gk.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),Vha=Gk.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(DP),this.key("subjectPublicKey").bitstr())}),Wha=Gk.define("RelativeDistinguishedName",function(){this.setof(Uha)}),
Xha=Gk.define("RDNSequence",function(){this.seqof(Wha)}),A3=Gk.define("Name",function(){this.choice({rdnSequence:this.use(Xha)})}),Yha=Gk.define("Validity",function(){this.seq().obj(this.key("notBefore").use(z3),this.key("notAfter").use(z3))}),Zha=Gk.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),$ha=Gk.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),
this.key("signature").use(DP),this.key("issuer").use(A3),this.key("validity").use(Yha),this.key("subject").use(A3),this.key("subjectPublicKeyInfo").use(Vha),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(Zha).optional())}),aia=Gk.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use($ha),this.key("signatureAlgorithm").use(DP),this.key("signatureValue").bitstr())}),
or={};or.certificate=aia;var bia=Gk.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});or.RSAPrivateKey=bia;var cia=Gk.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});or.RSAPublicKey=
cia;var dia=Gk.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(B3),this.key("subjectPublicKey").bitstr())});or.PublicKey=dia;var B3=Gk.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),eia=Gk.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),
this.key("algorithm").use(B3),this.key("subjectPrivateKey").octstr())});or.PrivateKey=eia;var fia=Gk.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});
or.EncryptedPrivateKey=fia;var gia=Gk.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});or.DSAPrivateKey=gia;or.DSAparam=Gk.define("DSAparam",function(){this.int()});var iia=Gk.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(hia),this.key("publicKey").optional().explicit(1).bitstr())});
or.ECPrivateKey=iia;var hia=Gk.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});or.signature=Gk.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});var Z9=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/=]+)[\n\r]+/m,a$=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,$9=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/=]+)-----END \1-----$/m,AG=qi.Buffer,Vn=or,b$={"2.16.840.1.101.3.4.1.1":"aes-128-ecb",
"2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"},d$=Go,c$=CI,iM=qi.Buffer;Yz.signature=Vn.signature;var C3={"1.3.132.0.10":"secp256k1",
"1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"},EP={},Sm=Rh.Buffer,Nx=R2,jia=Hu.ec,BG=fl;(EP=function(b,e,m,a,g){e=Yz(e);if(e.curve){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong private key type");return function(l,q){var r=C3[q.curve.join(".")];if(!r)throw Error("unknown curve "+q.curve.join("."));l=(new jia(r)).keyFromPrivate(q.privateKey).sign(l);return new Sm(l.toDER())}(b,e)}if("dsa"===e.type){if("dsa"!==a)throw Error("wrong private key type");
return function(l,q,r){var u=q.params.priv_key,v=q.params.p,y=q.params.q;q=q.params.g;var z=new BG(0),A=jM(l,y).mod(y);var B=!1;for(l=MX(u,y,l,r);!1===B;){z=B=NX(y,l,r);var G=y;z=q.toRed(BG.mont(v)).redPow(z).fromRed().mod(G);0===(B=B.invm(y).imul(A.add(u.mul(z))).mod(y)).cmpn(0)&&(B=!1,z=new BG(0))}r=B;u=z.toArray();r=r.toArray();128&u[0]&&(u=[0].concat(u));128&r[0]&&(r=[0].concat(r));v=[48,u.length+r.length+4,2,u.length];return v=v.concat(u,[2,r.length],r),new Sm(v)}(b,e,m)}if("rsa"!==a&&"ecdsa/rsa"!==
a)throw Error("wrong private key type");b=Sm.concat([g,b]);a=e.modulus.byteLength();for(m=[0,1];b.length+m.length+1<a;)m.push(255);m.push(0);for(a=-1;++a<b.length;)m.push(b[a]);return tG(m,e)}).getKey=MX;EP.makeKey=NX;var FP=Rh.Buffer,SD=fl,kia=Hu.ec,Ek="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,OI=Rh.Buffer,PX=ND,CG=Tx,D3=zh,lia=EP,mia=function(b,e,m,a,g){m=Yz(m);if("ec"===m.type){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong public key type");return function(r,
u,v){var y=C3[v.data.algorithm.curve.join(".")];if(!y)throw Error("unknown curve "+v.data.algorithm.curve.join("."));return(new kia(y)).verify(u,r,v.data.subjectPrivateKey.data)}(b,e,m)}if("dsa"===m.type){if("dsa"!==a)throw Error("wrong public key type");return function(r,u,v){var y=v.data.p,z=v.data.q,A=v.data.g;v=v.data.pub_key;var B=Yz.signature.decode(r,"der");r=B.s;B=B.r;OX(r,z);OX(B,z);var G=SD.mont(y);r=r.invm(z);return 0===A.toRed(G).redPow((new SD(u)).mul(r).mod(z)).fromRed().mul(v.toRed(G).redPow(B.mul(r).mod(z)).fromRed()).mod(y).mod(z).cmp(B)}(b,
e,m)}if("rsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong public key type");e=FP.concat([g,e]);g=m.modulus.byteLength();a=[1];for(var l=0;e.length+a.length+2<g;)a.push(255),l++;a.push(0);for(var q=-1;++q<e.length;)a.push(e[q]);a=new FP(a);e=SD.mont(m.modulus);b=(b=(new SD(b)).toRed(e)).redPow(new SD(m.publicExponent));b=new FP(b.fromRed().toArray());e=8>l?1:0;g=Math.min(b.length,a.length);b.length!==a.length&&(e=1);for(q=-1;++q<g;)e|=b[q]^a[q];return 0===e},Ox=S2;Object.keys(Ox).forEach(function(b){Ox[b].id=
new OI(Ox[b].id,"hex");Ox[b.toLowerCase()]=Ox[b]});D3(uC,CG.Writable);uC.prototype._write=function(b,e,m){(this||Ek)._hash.update(b);m()};uC.prototype.update=function(b,e){return"string"==typeof b&&(b=new OI(b,e)),(this||Ek)._hash.update(b),this||Ek};uC.prototype.sign=function(b,e){this.end();var m=(this||Ek)._hash.digest();b=lia(m,b,(this||Ek)._hashType,(this||Ek)._signType,(this||Ek)._tag);return e?b.toString(e):b};D3(vC,CG.Writable);vC.prototype._write=function(b,e,m){(this||Ek)._hash.update(b);
m()};vC.prototype.update=function(b,e){return"string"==typeof b&&(b=new OI(b,e)),(this||Ek)._hash.update(b),this||Ek};vC.prototype.verify=function(b,e,m){"string"==typeof e&&(e=new OI(e,m));this.end();m=(this||Ek)._hash.digest();return mia(e,m,b,(this||Ek)._signType,(this||Ek)._tag)};var Al="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,qu=Rh.Buffer,e$=Hu,nia=fl,Ho={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",
byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};Ho.p224=Ho.secp224r1;Ho.p256=Ho.secp256r1=Ho.prime256v1;Ho.p192=Ho.secp192r1=Ho.prime192v1;Ho.p384=Ho.secp384r1;Ho.p521=Ho.secp521r1;Px.prototype.generateKeys=function(b,e){return(this||Al).keys=(this||Al).curve.genKeyPair(),this.getPublicKey(b,e)};Px.prototype.computeSecret=function(b,e,m){return e=e||"utf8",qu.isBuffer(b)||(b=new qu(b,
e)),kM((this||Al).curve.keyFromPublic(b).getPublic().mul((this||Al).keys.getPrivate()).getX(),m,(this||Al).curveType.byteLength)};Px.prototype.getPublicKey=function(b,e){var m=(this||Al).keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(m[m.length-1]%2?m[0]=7:m[0]=6),kM(m,b)};Px.prototype.getPrivateKey=function(b){return kM((this||Al).keys.getPrivate(),b)};Px.prototype.setPublicKey=function(b,e){return e=e||"utf8",qu.isBuffer(b)||(b=new qu(b,e)),(this||Al).keys._importPublic(b),this||Al};Px.prototype.setPrivateKey=
function(b,e){e=e||"utf8";qu.isBuffer(b)||(b=new qu(b,e));b=new nia(b);return b=b.toString(16),(this||Al).keys=(this||Al).curve.genKeyPair(),(this||Al).keys._importPrivate(b),this||Al};var GP=qi.Buffer,PI=function(b,e){for(var m,a=GP.alloc(0),g=0;a.length<e;){m=g++;var l=GP.allocUnsafe(4);m=(l.writeUInt32BE(m,0),l);a=GP.concat([a,ND("sha1").update(b).update(m).digest()])}return a.slice(0,e)},QI=function(b,e){for(var m=b.length,a=-1;++a<m;)b[a]^=e[a];return b},E3=fl,oia=qi.Buffer,F3=function(b,e){return oia.from(b.toRed(E3.mont(e.modulus)).redPow(new E3(e.publicExponent)).fromRed().toArray())},
HP=fl,pr=qi.Buffer,G3=fl,TD=qi.Buffer,RA={publicEncrypt:function(b,e,m){var a=b.padding?b.padding:m?1:4;b=Yz(b);if(4===a)e=function(g,l){g=g.modulus.byteLength();var q=l.length,r=ND("sha1").update(pr.alloc(0)).digest(),u=r.length,v=2*u;if(q>g-v-2)throw Error("message too long");v=pr.alloc(g-q-v-2);var y=g-u-1;q=uw(u);l=QI(pr.concat([r,v,pr.alloc(1,1),l],y),PI(q,y));u=QI(q,PI(l,u));return new HP(pr.concat([pr.alloc(1),u,l],g))}(b,e);else if(1===a)e=function(g,l,q){var r=l.length;g=g.modulus.byteLength();
if(r>g-11)throw Error("message too long");if(q)var u=pr.alloc(g-r-3,255);else{r=g-r-3;for(var v=pr.allocUnsafe(r),y=0,z=uw(2*r),A=0;y<r;)A===z.length&&(z=uw(2*r),A=0),(u=z[A++])&&(v[y++]=u);u=v}return new HP(pr.concat([pr.from([0,q?1:2]),u,pr.alloc(1),l],g))}(b,e,m);else{if(3!==a)throw Error("unknown padding");if(0<=(e=new HP(e)).cmp(b.modulus))throw Error("data too long for modulus");}return m?tG(e,b):F3(e,b)},privateDecrypt:function(b,e,m){var a=b.padding?b.padding:m?1:4;b=Yz(b);var g=b.modulus.byteLength();
if(e.length>g||0<=(new G3(e)).cmp(b.modulus))throw Error("decryption error");e=m?F3(new G3(e),b):tG(e,b);var l=TD.alloc(g-e.length);if(e=TD.concat([l,e],g),4===a)return function(q,r){var u=q.modulus.byteLength(),v=ND("sha1").update(TD.alloc(0)).digest();q=v.length;if(0!==r[0])throw Error("decryption error");var y=r.slice(1,q+1);r=r.slice(q+1);y=QI(y,PI(r,q));u=QI(r,PI(y,u-q-1));r=u.slice(0,q);v=TD.from(v);r=TD.from(r);y=0;var z=v.length;v.length!==r.length&&(y++,z=Math.min(v.length,r.length));for(var A=
-1;++A<z;)y+=v[A]^r[A];if(y)throw Error("decryption error");for(;0===u[q];)q++;if(1!==u[q++])throw Error("decryption error");return u.slice(q)}(b,e);if(1===a)return function(q,r,u){q=r.slice(0,2);for(var v=2,y=0;0!==r[v++];)if(v>=r.length){y++;break}var z=r.slice(2,v-1);("0002"!==q.toString("hex")&&!u||"0001"!==q.toString("hex")&&u)&&y++;8>z.length&&y++;if(y)throw Error("decryption error");return r.slice(v)}(0,e,m);if(3===a)return e;throw Error("unknown padding");},privateEncrypt:function(b,e){return RA.publicEncrypt(b,
e,!0)},publicDecrypt:function(b,e){return RA.privateDecrypt(b,e,!0)}},RI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,IP,JP,lM=zi,YX=uw,H3=qi.Buffer,VX=qi.kMaxLength,mM=RI.crypto||RI.msCrypto,UX=Math.pow(2,32)-1;mM&&mM.getRandomValues||!lM.browser?(IP=function(b,e,m,a){if(!(H3.isBuffer(b)||b instanceof RI.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof e)a=e,e=0,m=b.length;else if("function"==typeof m)a=m,m=b.length-
e;else if("function"!=typeof a)throw new TypeError('"cb" argument must be a function');return TX(e,b.length),WX(m,e,b.length),XX(b,e,m,a)},JP=function(b,e,m){void 0===e&&(e=0);if(!(H3.isBuffer(b)||b instanceof RI.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');TX(e,b.length);void 0===m&&(m=b.length-e);return WX(m,e,b.length),XX(b,e,m)}):(IP=SX,JP=SX);var Eg={};Eg.randomBytes=Eg.rng=Eg.pseudoRandomBytes=Eg.prng=uw;Eg.createHash=Eg.Hash=ND;Eg.createHmac=Eg.Hmac=R2;var pia=
Object.keys(S2),qia="sha1 sha224 sha256 sha384 sha512 md5 rmd160".split(" ").concat(pia);Eg.getHashes=function(){return qia};Eg.pbkdf2=CI.pbkdf2;Eg.pbkdf2Sync=CI.pbkdf2Sync;Eg.Cipher=d3;Eg.createCipher=lha;Eg.Cipheriv=KL;Eg.createCipheriv=KL;Eg.Decipher=e3;Eg.createDecipher=mha;Eg.Decipheriv=ML;Eg.createDecipheriv=ML;Eg.getCiphers=f3;Eg.listCiphers=nha;Eg.DiffieHellmanGroup=vha;Eg.createDiffieHellmanGroup=k3;Eg.getDiffieHellman=l3;Eg.createDiffieHellman=wha;Eg.DiffieHellman=m3;Eg.createSign=QX;Eg.Sign=
QX;Eg.createVerify=RX;Eg.Verify=RX;Eg.createECDH=function(b){return new Px(b)};Eg.publicEncrypt=RA.publicEncrypt;Eg.privateEncrypt=RA.privateEncrypt;Eg.publicDecrypt=RA.publicDecrypt;Eg.privateDecrypt=RA.privateDecrypt;Eg.randomFill=IP;Eg.randomFillSync=JP;Eg.createCredentials=function(){throw Error("sorry, createCredentials is not implemented yet\nwe accept pull requests\nhttps://github.com/crypto-browserify/crypto-browserify");};Eg.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,
DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6};var Zs={};Object.defineProperty(Zs,"__esModule",{value:!0});Zs.default=function(){return ria.default.randomFillSync(sia)};var ria=Eg&&Eg.__esModule?Eg:{default:Eg},sia=new Uint8Array(16),tn={};Object.defineProperty(tn,"__esModule",
{value:!0});tn.default=void 0;for(var Am=[],KP=0;256>KP;++KP)Am.push((KP+256).toString(16).substr(1));tn.default=function(b,e){e=e||0;return(Am[b[e+0]]+Am[b[e+1]]+Am[b[e+2]]+Am[b[e+3]]+"-"+Am[b[e+4]]+Am[b[e+5]]+"-"+Am[b[e+6]]+Am[b[e+7]]+"-"+Am[b[e+8]]+Am[b[e+9]]+"-"+Am[b[e+10]]+Am[b[e+11]]+Am[b[e+12]]+Am[b[e+13]]+Am[b[e+14]]+Am[b[e+15]]).toLowerCase()};var SI={};Object.defineProperty(SI,"__esModule",{value:!0});SI.default=void 0;var tia=Zs&&Zs.__esModule?Zs:{default:Zs},uia=tn&&tn.__esModule?tn:{default:tn},
I3,LP,MP=0,NP=0;SI.default=function(b,e,m){m=e&&m||0;var a=e||[];b=b||{};var g=b.node||I3,l=void 0!==b.clockseq?b.clockseq:LP;if(null==g||null==l){var q=b.random||(b.rng||tia.default)();null==g&&(g=I3=[q[0]|1,q[1],q[2],q[3],q[4],q[5]]);null==l&&(l=LP=(q[6]<<8|q[7])&16383)}q=void 0!==b.msecs?b.msecs:Date.now();var r=void 0!==b.nsecs?b.nsecs:NP+1,u=q-MP+(r-NP)/1E4;0>u&&void 0===b.clockseq&&(l=l+1&16383);(0>u||q>MP)&&void 0===b.nsecs&&(r=0);if(1E4<=r)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");
MP=q;NP=r;LP=l;q+=122192928E5;b=(1E4*(q&268435455)+r)%4294967296;a[m++]=b>>>24&255;a[m++]=b>>>16&255;a[m++]=b>>>8&255;a[m++]=b&255;b=q/4294967296*1E4&268435455;a[m++]=b>>>8&255;a[m++]=b&255;a[m++]=b>>>24&15|16;a[m++]=b>>>16&255;a[m++]=l>>>8|128;a[m++]=l&255;for(l=0;6>l;++l)a[m+l]=g[l];return e||(0,uia.default)(a)};var co={};Object.defineProperty(co,"__esModule",{value:!0});co.default=function(b,e,m){function a(g,l,q,r){r=q&&r||0;if("string"===typeof g){g=unescape(encodeURIComponent(g));for(var u=
[],v=0;v<g.length;++v)u.push(g.charCodeAt(v));g=u}"string"===typeof l&&(l=f$(l));if(!Array.isArray(g))throw TypeError("value must be an array of bytes");if(!Array.isArray(l)||16!==l.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");l=m(l.concat(g));l[6]=l[6]&15|e;l[8]=l[8]&63|128;if(q)for(g=0;16>g;++g)q[r+g]=l[g];return q||(0,via.default)(l)}try{a.name=b}catch(g){}a.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";a.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";return a};
co.URL=co.DNS=void 0;var via=tn&&tn.__esModule?tn:{default:tn};co.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";co.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";var uy={},J3=Rh.Buffer;Object.defineProperty(uy,"__esModule",{value:!0});uy.default=void 0;var wia=Eg&&Eg.__esModule?Eg:{default:Eg};uy.default=function(b){Array.isArray(b)?b=J3.from(b):"string"===typeof b&&(b=J3.from(b,"utf8"));return wia.default.createHash("md5").update(b).digest()};var TI={};Object.defineProperty(TI,"__esModule",{value:!0});
TI.default=void 0;var xia=co&&co.__esModule?co:{default:co},yia=uy&&uy.__esModule?uy:{default:uy},zia=(0,xia.default)("v3",48,yia.default);TI.default=zia;var UI={};Object.defineProperty(UI,"__esModule",{value:!0});UI.default=void 0;var Aia=Zs&&Zs.__esModule?Zs:{default:Zs},Bia=tn&&tn.__esModule?tn:{default:tn};UI.default=function(b,e,m){"string"===typeof b&&(e="binary"===b?new Uint8Array(16):null,b=null);b=b||{};b=b.random||(b.rng||Aia.default)();b[6]=b[6]&15|64;b[8]=b[8]&63|128;if(e){m=m||0;for(var a=
0;16>a;++a)e[m+a]=b[a];return e}return(0,Bia.default)(b)};var vy={},K3=Rh.Buffer;Object.defineProperty(vy,"__esModule",{value:!0});vy.default=void 0;var Cia=Eg&&Eg.__esModule?Eg:{default:Eg};vy.default=function(b){Array.isArray(b)?b=K3.from(b):"string"===typeof b&&(b=K3.from(b,"utf8"));return Cia.default.createHash("sha1").update(b).digest()};var VI={};Object.defineProperty(VI,"__esModule",{value:!0});VI.default=void 0;var Dia=co&&co.__esModule?co:{default:co},Eia=vy&&vy.__esModule?vy:{default:vy},
Fia=(0,Dia.default)("v5",80,Eia.default);VI.default=Fia;var wy={};Object.defineProperty(wy,"__esModule",{value:!0});Object.defineProperty(wy,"v1",{enumerable:!0,get:function(){return Gia.default}});Object.defineProperty(wy,"v3",{enumerable:!0,get:function(){return Hia.default}});Object.defineProperty(wy,"v4",{enumerable:!0,get:function(){return Iia.default}});Object.defineProperty(wy,"v5",{enumerable:!0,get:function(){return Jia.default}});var Gia=DG(SI),Hia=DG(TI),Iia=DG(UI),Jia=DG(VI),Bm={};Object.defineProperty(Bm,
"__esModule",{value:!0});Bm.atob=function(b){return L3(b)};Bm.btoa=function(b){return M3(b)};Bm.base64StringToBlobOrBuffer=function(b,e){return aY(L3(b),e)};Bm.binaryStringToArrayBuffer=$X;Bm.binaryStringToBlobOrBuffer=aY;Bm.blob=ZX;Bm.blobOrBufferToBase64=function(b,e){cY(b,function(m){e(M3(m))})};Bm.blobOrBufferToBinaryString=cY;Bm.readAsArrayBuffer=function(b,e){var m=new FileReader;m.onloadend=function(a){a=a.target.result||new ArrayBuffer(0);e(a)};m.readAsArrayBuffer(b)};Bm.readAsBinaryString=
bY;Bm.typedBuffer=function(){};var L3=Bm.atob,M3=Bm.btoa,ah="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Kia={},UD=Kia=function(b){function e(y,z){var A=y[0],B=y[1],G=y[2],E=y[3];A+=(B&G|~B&E)+z[0]-680876936|0;A=(A<<7|A>>>25)+B|0;E+=(A&B|~A&G)+z[1]-389564586|0;E=(E<<12|E>>>20)+A|0;G+=(E&A|~E&B)+z[2]+606105819|0;G=(G<<17|G>>>15)+E|0;B+=(G&E|~G&A)+z[3]-1044525330|0;B=(B<<22|B>>>10)+G|0;A+=(B&G|~B&E)+z[4]-176418897|0;A=(A<<7|A>>>25)+B|0;E+=(A&B|~A&G)+z[5]+1200080426|
0;E=(E<<12|E>>>20)+A|0;G+=(E&A|~E&B)+z[6]-1473231341|0;G=(G<<17|G>>>15)+E|0;B+=(G&E|~G&A)+z[7]-45705983|0;B=(B<<22|B>>>10)+G|0;A+=(B&G|~B&E)+z[8]+1770035416|0;A=(A<<7|A>>>25)+B|0;E+=(A&B|~A&G)+z[9]-1958414417|0;E=(E<<12|E>>>20)+A|0;G+=(E&A|~E&B)+z[10]-42063|0;G=(G<<17|G>>>15)+E|0;B+=(G&E|~G&A)+z[11]-1990404162|0;B=(B<<22|B>>>10)+G|0;A+=(B&G|~B&E)+z[12]+1804603682|0;A=(A<<7|A>>>25)+B|0;E+=(A&B|~A&G)+z[13]-40341101|0;E=(E<<12|E>>>20)+A|0;G+=(E&A|~E&B)+z[14]-1502002290|0;G=(G<<17|G>>>15)+E|0;B+=(G&E|
~G&A)+z[15]+1236535329|0;B=(B<<22|B>>>10)+G|0;A+=(B&E|G&~E)+z[1]-165796510|0;A=(A<<5|A>>>27)+B|0;E+=(A&G|B&~G)+z[6]-1069501632|0;E=(E<<9|E>>>23)+A|0;G+=(E&B|A&~B)+z[11]+643717713|0;G=(G<<14|G>>>18)+E|0;B+=(G&A|E&~A)+z[0]-373897302|0;B=(B<<20|B>>>12)+G|0;A+=(B&E|G&~E)+z[5]-701558691|0;A=(A<<5|A>>>27)+B|0;E+=(A&G|B&~G)+z[10]+38016083|0;E=(E<<9|E>>>23)+A|0;G+=(E&B|A&~B)+z[15]-660478335|0;G=(G<<14|G>>>18)+E|0;B+=(G&A|E&~A)+z[4]-405537848|0;B=(B<<20|B>>>12)+G|0;A+=(B&E|G&~E)+z[9]+568446438|0;A=(A<<5|A>>>
27)+B|0;E+=(A&G|B&~G)+z[14]-1019803690|0;E=(E<<9|E>>>23)+A|0;G+=(E&B|A&~B)+z[3]-187363961|0;G=(G<<14|G>>>18)+E|0;B+=(G&A|E&~A)+z[8]+1163531501|0;B=(B<<20|B>>>12)+G|0;A+=(B&E|G&~E)+z[13]-1444681467|0;A=(A<<5|A>>>27)+B|0;E+=(A&G|B&~G)+z[2]-51403784|0;E=(E<<9|E>>>23)+A|0;G+=(E&B|A&~B)+z[7]+1735328473|0;G=(G<<14|G>>>18)+E|0;B+=(G&A|E&~A)+z[12]-1926607734|0;B=(B<<20|B>>>12)+G|0;A+=(B^G^E)+z[5]-378558|0;A=(A<<4|A>>>28)+B|0;E+=(A^B^G)+z[8]-2022574463|0;E=(E<<11|E>>>21)+A|0;G+=(E^A^B)+z[11]+1839030562|0;
G=(G<<16|G>>>16)+E|0;B+=(G^E^A)+z[14]-35309556|0;B=(B<<23|B>>>9)+G|0;A+=(B^G^E)+z[1]-1530992060|0;A=(A<<4|A>>>28)+B|0;E+=(A^B^G)+z[4]+1272893353|0;E=(E<<11|E>>>21)+A|0;G+=(E^A^B)+z[7]-155497632|0;G=(G<<16|G>>>16)+E|0;B+=(G^E^A)+z[10]-1094730640|0;B=(B<<23|B>>>9)+G|0;A+=(B^G^E)+z[13]+681279174|0;A=(A<<4|A>>>28)+B|0;E+=(A^B^G)+z[0]-358537222|0;E=(E<<11|E>>>21)+A|0;G+=(E^A^B)+z[3]-722521979|0;G=(G<<16|G>>>16)+E|0;B+=(G^E^A)+z[6]+76029189|0;B=(B<<23|B>>>9)+G|0;A+=(B^G^E)+z[9]-640364487|0;A=(A<<4|A>>>
28)+B|0;E+=(A^B^G)+z[12]-421815835|0;E=(E<<11|E>>>21)+A|0;G+=(E^A^B)+z[15]+530742520|0;G=(G<<16|G>>>16)+E|0;B+=(G^E^A)+z[2]-995338651|0;B=(B<<23|B>>>9)+G|0;A+=(G^(B|~E))+z[0]-198630844|0;A=(A<<6|A>>>26)+B|0;E+=(B^(A|~G))+z[7]+1126891415|0;E=(E<<10|E>>>22)+A|0;G+=(A^(E|~B))+z[14]-1416354905|0;G=(G<<15|G>>>17)+E|0;B+=(E^(G|~A))+z[5]-57434055|0;B=(B<<21|B>>>11)+G|0;A+=(G^(B|~E))+z[12]+1700485571|0;A=(A<<6|A>>>26)+B|0;E+=(B^(A|~G))+z[3]-1894986606|0;E=(E<<10|E>>>22)+A|0;G+=(A^(E|~B))+z[10]-1051523|0;
G=(G<<15|G>>>17)+E|0;B+=(E^(G|~A))+z[1]-2054922799|0;B=(B<<21|B>>>11)+G|0;A+=(G^(B|~E))+z[8]+1873313359|0;A=(A<<6|A>>>26)+B|0;E+=(B^(A|~G))+z[15]-30611744|0;E=(E<<10|E>>>22)+A|0;G+=(A^(E|~B))+z[6]-1560198380|0;G=(G<<15|G>>>17)+E|0;B+=(E^(G|~A))+z[13]+1309151649|0;B=(B<<21|B>>>11)+G|0;A+=(G^(B|~E))+z[4]-145523070|0;A=(A<<6|A>>>26)+B|0;E+=(B^(A|~G))+z[11]-1120210379|0;E=(E<<10|E>>>22)+A|0;G+=(A^(E|~B))+z[2]+718787259|0;G=(G<<15|G>>>17)+E|0;B+=(E^(G|~A))+z[9]-343485551|0;y[0]=A+y[0]|0;y[1]=((B<<21|B>>>
11)+G|0)+y[1]|0;y[2]=G+y[2]|0;y[3]=E+y[3]|0}function m(y){var z=[],A;for(A=0;64>A;A+=4)z[A>>2]=y.charCodeAt(A)+(y.charCodeAt(A+1)<<8)+(y.charCodeAt(A+2)<<16)+(y.charCodeAt(A+3)<<24);return z}function a(y){var z=[],A;for(A=0;64>A;A+=4)z[A>>2]=y[A]+(y[A+1]<<8)+(y[A+2]<<16)+(y[A+3]<<24);return z}function g(y){var z=y.length,A=[1732584193,-271733879,-1732584194,271733878],B;for(B=64;B<=z;B+=64)e(A,m(y.substring(B-64,B)));y=y.substring(B-64);var G=y.length;var E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(B=
0;B<G;B+=1)E[B>>2]|=y.charCodeAt(B)<<(B%4<<3);E[B>>2]|=128<<(B%4<<3);if(55<B)for(e(A,E),B=0;16>B;B+=1)E[B]=0;z=(8*z).toString(16).match(/(.*?)(.{0,8})$/);y=parseInt(z[2],16);z=parseInt(z[1],16)||0;E[14]=y;E[15]=z;e(A,E);return A}function l(y){var z;for(z=0;z<y.length;z+=1){var A=z,B,G=y[z],E="";for(B=0;4>B;B+=1)E+=v[G>>8*B+4&15]+v[G>>8*B&15];y[A]=E}return y.join("")}function q(y){/[\u0080-\uFFFF]/.test(y)&&(y=unescape(encodeURIComponent(y)));return y}function r(y){var z=[],A=y.length,B;for(B=0;B<
A-1;B+=2)z.push(parseInt(y.substr(B,2),16));return String.fromCharCode.apply(String,z)}function u(){this.reset()}var v="0123456789abcdef".split("");l(g("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function y(z,A){z=z|0||0;return 0>z?Math.max(z+A,0):Math.min(z,A)}ArrayBuffer.prototype.slice=function(z,A){var B=(this||ah).byteLength;z=y(z,B);var G=B;A!==b&&(G=y(A,B));if(z>G)return new ArrayBuffer(0);G-=z;A=new ArrayBuffer(G);B=new Uint8Array(A);z=new Uint8Array(this||
ah,z,G);B.set(z);return A}}();u.prototype.append=function(y){this.appendBinary(q(y));return this||ah};u.prototype.appendBinary=function(y){(this||ah)._buff+=y;(this||ah)._length+=y.length;y=(this||ah)._buff.length;var z;for(z=64;z<=y;z+=64)e((this||ah)._hash,m((this||ah)._buff.substring(z-64,z)));(this||ah)._buff=(this||ah)._buff.substring(z-64);return this||ah};u.prototype.end=function(y){var z=(this||ah)._buff,A=z.length,B,G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(B=0;B<A;B+=1)G[B>>2]|=z.charCodeAt(B)<<
(B%4<<3);this._finish(G,A);z=l((this||ah)._hash);y&&(z=r(z));this.reset();return z};u.prototype.reset=function(){(this||ah)._buff="";(this||ah)._length=0;(this||ah)._hash=[1732584193,-271733879,-1732584194,271733878];return this||ah};u.prototype.getState=function(){return{buff:(this||ah)._buff,length:(this||ah)._length,hash:(this||ah)._hash.slice()}};u.prototype.setState=function(y){(this||ah)._buff=y.buff;(this||ah)._length=y.length;(this||ah)._hash=y.hash;return this||ah};u.prototype.destroy=function(){delete (this||
ah)._hash;delete (this||ah)._buff;delete (this||ah)._length};u.prototype._finish=function(y,z){y[z>>2]|=128<<(z%4<<3);if(55<z)for(e((this||ah)._hash,y),z=0;16>z;z+=1)y[z]=0;var A=8*(this||ah)._length;A=A.toString(16).match(/(.*?)(.{0,8})$/);z=parseInt(A[2],16);A=parseInt(A[1],16)||0;y[14]=z;y[15]=A;e((this||ah)._hash,y)};u.hash=function(y,z){return u.hashBinary(q(y),z)};u.hashBinary=function(y,z){y=g(y);y=l(y);return z?r(y):y};u.ArrayBuffer=function(){this.reset()};u.ArrayBuffer.prototype.append=
function(y){var z=(this||ah)._buff.buffer,A=new Uint8Array(z.byteLength+y.byteLength);A.set(new Uint8Array(z));A.set(new Uint8Array(y),z.byteLength);z=A.length;(this||ah)._length+=y.byteLength;for(y=64;y<=z;y+=64)e((this||ah)._hash,a(A.subarray(y-64,y)));(this||ah)._buff=y-64<z?new Uint8Array(A.buffer.slice(y-64)):new Uint8Array(0);return this||ah};u.ArrayBuffer.prototype.end=function(y){var z=(this||ah)._buff,A=z.length,B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],G;for(G=0;G<A;G+=1)B[G>>2]|=z[G]<<(G%4<<
3);this._finish(B,A);z=l((this||ah)._hash);y&&(z=r(z));this.reset();return z};u.ArrayBuffer.prototype.reset=function(){(this||ah)._buff=new Uint8Array(0);(this||ah)._length=0;(this||ah)._hash=[1732584193,-271733879,-1732584194,271733878];return this||ah};u.ArrayBuffer.prototype.getState=function(){var y=u.prototype.getState.call(this||ah);y.buff=String.fromCharCode.apply(null,new Uint8Array(y.buff));return y};u.ArrayBuffer.prototype.setState=function(y){var z=y.buff,A=z.length,B=new ArrayBuffer(A);
B=new Uint8Array(B);var G;for(G=0;G<A;G+=1)B[G]=z.charCodeAt(G);y.buff=B;return u.prototype.setState.call(this||ah,y)};u.ArrayBuffer.prototype.destroy=u.prototype.destroy;u.ArrayBuffer.prototype._finish=u.prototype._finish;u.ArrayBuffer.hash=function(y,z){var A=new Uint8Array(y),B=A.length;y=[1732584193,-271733879,-1732584194,271733878];var G;for(G=64;G<=B;G+=64)e(y,a(A.subarray(G-64,G)));A=G-64<B?A.subarray(G-64):new Uint8Array(0);var E=A.length;var K=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(G=0;G<
E;G+=1)K[G>>2]|=A[G]<<(G%4<<3);K[G>>2]|=128<<(G%4<<3);if(55<G)for(e(y,K),G=0;16>G;G+=1)K[G]=0;B=(8*B).toString(16).match(/(.*?)(.{0,8})$/);A=parseInt(B[2],16);B=parseInt(B[1],16)||0;K[14]=A;K[15]=B;e(y,K);y=l(y);return z?r(y):y};return u}(),SA={};Object.defineProperty(SA,"__esModule",{value:!0});var dY=Bm,OP=UD&&"object"===typeof UD&&"default"in UD?UD["default"]:UD,Lia=self.setImmediate||self.setTimeout;SA.binaryMd5=function(b,e){function m(){Lia(g)}function a(){var A=y.end(!0);A=dY.btoa(A);e(A);
y.destroy()}function g(){var A=v*r,B=A+r;v++;v<u?z(y,b,A,B,m):z(y,b,A,B,a)}var l="string"===typeof b,q=l?b.length:b.size,r=Math.min(32768,q),u=Math.ceil(q/r),v=0,y=l?new OP:new OP.ArrayBuffer,z=l?i$:h$;g()};SA.stringMd5=function(b){return OP.hash(b)};var Lg={};Object.defineProperty(Lg,"__esModule",{value:!0});var nM=EG($O),Mia=EG(sk),N3=EG(Ci),GG=EG(vs),eY=Function.prototype.toString,j$=eY.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var FG=!!localStorage.getItem("_pouch_check_localstorage")}catch(b){FG=
!1}Mia(Zz,GG);Zz.prototype.addListener=function(b,e,m,a){function g(){if(l._listeners[e])if(q)q="waiting";else{q=!0;var r=oM(a,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));m.changes(r).on("change",function(u){u.seq>a.since&&!a.cancelled&&(a.since=u.seq,a.onChange(u))}).on("complete",function(){"waiting"===q&&N3(g);q=!1}).on("error",function(){q=!1})}}if(!this._listeners[e]){var l=this,q=!1;this._listeners[e]=g;this.on(b,g)}};Zz.prototype.removeListener=
function(b,e){e in this._listeners&&(GG.prototype.removeListener.call(this,b,this._listeners[e]),delete this._listeners[e])};Zz.prototype.notifyLocalWindows=function(b){FG&&(localStorage[b]="a"===localStorage[b]?"b":"a")};Zz.prototype.notify=function(b){this.emit(b);this.notifyLocalWindows(b)};var Nia="function"===typeof Object.assign?Object.assign:function(b){for(var e=Object(b),m=1;m<arguments.length;m++){var a=arguments[m];if(null!=a)for(var g in a)Object.prototype.hasOwnProperty.call(a,g)&&(e[g]=
a[g])}return e},Oia=function(){}.name?function(b){return b.name}:function(b){return(b=b.toString().match(/^\s*function\s*(?:(\S+)\s*)?\(/))&&b[1]?b[1]:""},O3="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),Pia=/(?:^|&)([^&=]*)=?([^&]*)/g,Qia=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
Ria=wy.v4;Lg.adapterFun=function(b,e){return gY(nM(function(m){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));var a=this;k$(a,b,m);return this.taskqueue.isReady?e.apply(this,m):new Promise(function(g,l){a.taskqueue.addTask(function(q){q?l(q):g(a[b].apply(a,m))})})}))};Lg.assign=Nia;Lg.bulkGetShim=function(b,e,m){function a(){var B=[];y.forEach(function(G){G.docs.forEach(function(E){B.push({id:G.id,docs:[E]})})});
m(null,{results:B})}function g(){if(!(A>=z.length)){var B=z.slice(A,Math.min(A+6,z.length));l(B,A);A+=B.length}}function l(B,G){B.forEach(function(E,K){var J=G+K;K=r.get(E);var P=oM(K[0],["atts_since","attachments"]);P.open_revs=K.map(function(ra){return ra.rev});P.open_revs=P.open_revs.filter(hY);var ea=hY;0===P.open_revs.length&&(delete P.open_revs,ea=l$);["revs","attachments","binary","ajax","latest"].forEach(function(ra){ra in e&&(P[ra]=e[ra])});b.get(E,P,function(ra,D){ra=ra?[{error:ra}]:ea(D);
y[J]={id:E,docs:ra};++v===u&&a();g()})})}var q=e.docs,r=new tw.Map;q.forEach(function(B){r.has(B.id)?r.get(B.id).push(B):r.set(B.id,[B])});var u=r.size,v=0,y=Array(u),z=[];r.forEach(function(B,G){z.push(G)});var A=0;g()};Lg.changesHandler=Zz;Lg.clone=wC;Lg.defaultBackOff=function(b){var e=0;b||(e=2E3);b=parseInt(b,10)||0;e=parseInt(e,10);e=e!==e||e<=b?(b||1)<<1:e+1;6E5<e&&(b=3E5,e=6E5);return~~((e-b)*Math.random()+b)};Lg.explainError=function(b,e){pM("info","The above "+b+" is totally normal. "+e)};
Lg.filterChange=function(b){var e={},m=b.filter&&"function"===typeof b.filter;e.query=b.query_params;return function(a){a.doc||(a.doc={});var g;if(g=m)try{g=!(0,b.filter)(a.doc,e)}catch(q){g=kg.createError(kg.BAD_REQUEST,"Filter function threw: "+q.toString())}if("object"===typeof g)return g;if(g)return!1;if(!b.include_docs)delete a.doc;else if(!b.attachments)for(var l in a.doc._attachments)a.doc._attachments.hasOwnProperty(l)&&(a.doc._attachments[l].stub=!0);return!0}};Lg.flatten=function(b){for(var e=
[],m=0,a=b.length;m<a;m++)e=e.concat(b[m]);return e};Lg.functionName=Oia;Lg.guardedConsole=pM;Lg.hasLocalStorage=function(){return FG};Lg.invalidIdError=function(b){var e;b?"string"!==typeof b?e=kg.createError(kg.INVALID_ID):/^_/.test(b)&&!/^_(design|local)/.test(b)&&(e=kg.createError(kg.RESERVED_ID)):e=kg.createError(kg.MISSING_ID);if(e)throw e;};Lg.isRemote=function(b){return"boolean"===typeof b._remote?b._remote:"function"===typeof b.type?(pM("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),
"http"===b.type()):!1};Lg.listenerCount=function(b,e){return"listenerCount"in b?b.listenerCount(e):GG.listenerCount(b,e)};Lg.nextTick=N3;Lg.normalizeDdocFunctionName=function(b){return(b=iY(b))?b.join("/"):null};Lg.once=fY;Lg.parseDdocFunctionName=iY;Lg.parseUri=function(b){b=Qia.exec(b);for(var e={},m=14;m--;){var a=O3[m],g=b[m]||"",l=-1!==["user","password"].indexOf(a);e[a]=l?decodeURIComponent(g):g}e.queryKey={};e[O3[12]].replace(Pia,function(q,r,u){r&&(e.queryKey[r]=u)});return e};Lg.pick=oM;
Lg.rev=function(b,e){b=wC(b);if(!e)return wy.v4().replace(/-/g,"").toLowerCase();delete b._rev_tree;return SA.stringMd5(JSON.stringify(b))};Lg.scopeEval=function(b,e){var m=[],a=[],g;for(g in e)e.hasOwnProperty(g)&&(m.push(g),a.push(e[g]));m.push(b);return Function.apply(null,m).apply(null,a)};Lg.toPromise=gY;Lg.upsert=jY;Lg.uuid=Ria;var P3={};P3=function(){for(var b={},e=0;e<arguments.length;e++){var m=arguments[e],a;for(a in m)Sia.call(m,a)&&(b[a]=m[a])}return b};var Sia=Object.prototype.hasOwnProperty,
Aw=P3,Q3={};Q3=function(b){for(var e=1;e<arguments.length;e++){var m=arguments[e],a;for(a in m)Tia.call(m,a)&&(b[a]=m[a])}return b};for(var Tia=Object.prototype.hasOwnProperty,Uia={},Via=Q3,R3=Uia=function(){var b=Aw.apply(null,arguments);return Via(b,{bufferKeys:b.bufferKeys||!1,snapshots:b.snapshots||!1,permanence:b.permanence||!1,seek:b.seek||!1,clear:b.clear||!1,status:b.status||!1,createIfMissing:b.createIfMissing||!1,errorIfExists:b.errorIfExists||!1,deferredOpen:b.deferredOpen||!1,openCallback:b.openCallback||
!1,promises:b.promises||!1,streams:b.streams||!1,encodings:b.encodings||!1,additionalMethods:Aw(b.additionalMethods)})},Cs=[],iq=[],Wia="undefined"!==typeof Uint8Array?Uint8Array:Array,TA=0;64>TA;++TA)Cs[TA]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[TA],iq["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(TA)]=TA;iq[45]=62;iq[95]=63;var HG={byteLength:function(b){b=kY(b);var e=b[1];return 3*(b[0]+e)/4-e},toByteArray:function(b){var e=kY(b);var m=
e[0];e=e[1];var a=new Wia(3*(m+e)/4-e),g=0,l=0<e?m-4:m,q;for(q=0;q<l;q+=4)m=iq[b.charCodeAt(q)]<<18|iq[b.charCodeAt(q+1)]<<12|iq[b.charCodeAt(q+2)]<<6|iq[b.charCodeAt(q+3)],a[g++]=m>>16&255,a[g++]=m>>8&255,a[g++]=m&255;2===e&&(m=iq[b.charCodeAt(q)]<<2|iq[b.charCodeAt(q+1)]>>4,a[g++]=m&255);1===e&&(m=iq[b.charCodeAt(q)]<<10|iq[b.charCodeAt(q+1)]<<4|iq[b.charCodeAt(q+2)]>>2,a[g++]=m>>8&255,a[g++]=m&255);return a},fromByteArray:function(b){for(var e=b.length,m=e%3,a=[],g=0,l=e-m;g<l;g+=16383)a.push(o$(b,
g,g+16383>l?l:g+16383));1===m?(b=b[e-1],a.push(Cs[b>>2]+Cs[b<<4&63]+"==")):2===m&&(b=(b[e-2]<<8)+b[e-1],a.push(Cs[b>>10]+Cs[b>>4&63]+Cs[b<<2&63]+"="));return a.join("")}},$z={read:function(b,e,m,a,g){var l=8*g-a-1;var q=(1<<l)-1,r=q>>1,u=-7;g=m?g-1:0;var v=m?-1:1,y=b[e+g];g+=v;m=y&(1<<-u)-1;y>>=-u;for(u+=l;0<u;m=256*m+b[e+g],g+=v,u-=8);l=m&(1<<-u)-1;m>>=-u;for(u+=a;0<u;l=256*l+b[e+g],g+=v,u-=8);if(0===m)m=1-r;else{if(m===q)return l?NaN:Infinity*(y?-1:1);l+=Math.pow(2,a);m-=r}return(y?-1:1)*l*Math.pow(2,
m-a)},write:function(b,e,m,a,g,l){var q,r=8*l-g-1,u=(1<<r)-1,v=u>>1,y=23===g?Math.pow(2,-24)-Math.pow(2,-77):0;l=a?0:l-1;var z=a?1:-1,A=0>e||0===e&&0>1/e?1:0;e=Math.abs(e);isNaN(e)||Infinity===e?(e=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),1>e*(q=Math.pow(2,-a))&&(a--,q*=2),e=1<=a+v?e+y/q:e+y*Math.pow(2,1-v),2<=e*q&&(a++,q/=2),a+v>=u?(e=0,a=u):1<=a+v?(e=(e*q-1)*Math.pow(2,g),a+=v):(e=e*Math.pow(2,v-1)*Math.pow(2,g),a=0));for(;8<=g;b[m+l]=e&255,l+=z,e/=256,g-=8);a=a<<g|e;for(r+=g;0<r;b[m+
l]=a&255,l+=z,a/=256,r-=8);b[m+l-z]|=128*A}},S3="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;var T3=we;var qM=2147483647;we.TYPED_ARRAY_SUPPORT=function(){try{var b=new Uint8Array(1),e={foo:function(){return 42}};Object.setPrototypeOf(e,Uint8Array.prototype);Object.setPrototypeOf(b,e);return 42===b.foo()}catch(m){return!1}}();we.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(we.prototype,"parent",{enumerable:!0,get:function(){if(we.isBuffer(this))return this.buffer}});Object.defineProperty(we.prototype,"offset",{enumerable:!0,get:function(){if(we.isBuffer(this))return this.byteOffset}});we.poolSize=8192;we.from=function(b,e,m){return lY(b,e,m)};Object.setPrototypeOf(we.prototype,Uint8Array.prototype);Object.setPrototypeOf(we,Uint8Array);we.alloc=function(b,e,m){nY(b);b=0>=b?ru(b):void 0!==e?"string"===typeof m?ru(b).fill(e,m):ru(b).fill(e):ru(b);
return b};we.allocUnsafe=function(b){return rM(b)};we.allocUnsafeSlow=function(b){return rM(b)};we.isBuffer=function(b){return null!=b&&!0===b._isBuffer&&b!==we.prototype};we.compare=function(b,e){su(b,Uint8Array)&&(b=we.from(b,b.offset,b.byteLength));su(e,Uint8Array)&&(e=we.from(e,e.offset,e.byteLength));if(!we.isBuffer(b)||!we.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===e)return 0;for(var m=b.length,a=e.length,g=0,l=Math.min(m,
a);g<l;++g)if(b[g]!==e[g]){m=b[g];a=e[g];break}return m<a?-1:a<m?1:0};we.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};we.concat=function(b,e){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return we.alloc(0);var m;if(void 0===e)for(m=e=0;m<b.length;++m)e+=b[m].length;
e=we.allocUnsafe(e);var a=0;for(m=0;m<b.length;++m){var g=b[m];su(g,Uint8Array)&&(g=we.from(g));if(!we.isBuffer(g))throw new TypeError('"list" argument must be an Array of Buffers');g.copy(e,a);a+=g.length}return e};we.byteLength=mY;we.prototype._isBuffer=!0;we.prototype.swap16=function(){var b=this.length;if(0!==b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<b;e+=2)Qx(this,e,e+1);return this};we.prototype.swap32=function(){var b=this.length;if(0!==b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");
for(var e=0;e<b;e+=4)Qx(this,e,e+3),Qx(this,e+1,e+2);return this};we.prototype.swap64=function(){var b=this.length;if(0!==b%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<b;e+=8)Qx(this,e,e+7),Qx(this,e+1,e+6),Qx(this,e+2,e+5),Qx(this,e+3,e+4);return this};we.prototype.toString=function(){var b=this.length;return 0===b?"":0===arguments.length?pY(this,0,b):q$.apply(this,arguments)};we.prototype.toLocaleString=we.prototype.toString;we.prototype.equals=function(b){if(!we.isBuffer(b))throw new TypeError("Argument must be a Buffer");
return this===b?!0:0===we.compare(this,b)};we.prototype.inspect=function(){var b=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim();50<this.length&&(b+=" ... ");return"<Buffer "+b+">"};S3&&(we.prototype[S3]=we.prototype.inspect);we.prototype.compare=function(b,e,m,a,g){su(b,Uint8Array)&&(b=we.from(b,b.offset,b.byteLength));if(!we.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);void 0===e&&(e=0);void 0===m&&(m=b?b.length:
0);void 0===a&&(a=0);void 0===g&&(g=this.length);if(0>e||m>b.length||0>a||g>this.length)throw new RangeError("out of range index");if(a>=g&&e>=m)return 0;if(a>=g)return-1;if(e>=m)return 1;e>>>=0;m>>>=0;a>>>=0;g>>>=0;if(this===b)return 0;var l=g-a,q=m-e,r=Math.min(l,q);a=this.slice(a,g);b=b.slice(e,m);for(e=0;e<r;++e)if(a[e]!==b[e]){l=a[e];q=b[e];break}return l<q?-1:q<l?1:0};we.prototype.includes=function(b,e,m){return-1!==this.indexOf(b,e,m)};we.prototype.indexOf=function(b,e,m){return qY(this,b,
e,m,!0)};we.prototype.lastIndexOf=function(b,e,m){return qY(this,b,e,m,!1)};we.prototype.write=function(b,e,m,a){if(void 0===e)a="utf8",m=this.length,e=0;else if(void 0===m&&"string"===typeof e)a=e,m=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(m)?(m>>>=0,void 0===a&&(a="utf8")):(a=m,m=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var g=this.length-e;if(void 0===m||m>g)m=g;if(0<b.length&&(0>m||0>e)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");
a||(a="utf8");for(g=!1;;)switch(a){case "hex":a:{e=Number(e)||0;a=this.length-e;m?(m=Number(m),m>a&&(m=a)):m=a;a=b.length;m>a/2&&(m=a/2);for(a=0;a<m;++a){g=parseInt(b.substr(2*a,2),16);if(g!==g){b=a;break a}this[e+a]=g}b=a}return b;case "utf8":case "utf-8":return xC(uM(b,this.length-e),this,e,m);case "ascii":return xC(wY(b),this,e,m);case "latin1":case "binary":return xC(wY(b),this,e,m);case "base64":return xC(HG.toByteArray(oY(b)),this,e,m);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=
b;g=this.length-e;for(var l=[],q=0;q<a.length&&!(0>(g-=2));++q){var r=a.charCodeAt(q);b=r>>8;r%=256;l.push(r);l.push(b)}return xC(l,this,e,m);default:if(g)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase();g=!0}};we.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var sY=4096;we.prototype.slice=function(b,e){var m=this.length;b=~~b;e=void 0===e?m:~~e;0>b?(b+=m,0>b&&(b=0)):b>m&&(b=m);0>e?(e+=m,0>e&&(e=0)):e>m&&(e=m);e<b&&(e=b);b=
this.subarray(b,e);Object.setPrototypeOf(b,we.prototype);return b};we.prototype.readUIntLE=function(b,e,m){b>>>=0;e>>>=0;m||am(b,e,this.length);m=this[b];for(var a=1,g=0;++g<e&&(a*=256);)m+=this[b+g]*a;return m};we.prototype.readUIntBE=function(b,e,m){b>>>=0;e>>>=0;m||am(b,e,this.length);m=this[b+--e];for(var a=1;0<e&&(a*=256);)m+=this[b+--e]*a;return m};we.prototype.readUInt8=function(b,e){b>>>=0;e||am(b,1,this.length);return this[b]};we.prototype.readUInt16LE=function(b,e){b>>>=0;e||am(b,2,this.length);
return this[b]|this[b+1]<<8};we.prototype.readUInt16BE=function(b,e){b>>>=0;e||am(b,2,this.length);return this[b]<<8|this[b+1]};we.prototype.readUInt32LE=function(b,e){b>>>=0;e||am(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};we.prototype.readUInt32BE=function(b,e){b>>>=0;e||am(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};we.prototype.readIntLE=function(b,e,m){b>>>=0;e>>>=0;m||am(b,e,this.length);m=this[b];for(var a=1,g=0;++g<
e&&(a*=256);)m+=this[b+g]*a;m>=128*a&&(m-=Math.pow(2,8*e));return m};we.prototype.readIntBE=function(b,e,m){b>>>=0;e>>>=0;m||am(b,e,this.length);m=e;for(var a=1,g=this[b+--m];0<m&&(a*=256);)g+=this[b+--m]*a;g>=128*a&&(g-=Math.pow(2,8*e));return g};we.prototype.readInt8=function(b,e){b>>>=0;e||am(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};we.prototype.readInt16LE=function(b,e){b>>>=0;e||am(b,2,this.length);b=this[b]|this[b+1]<<8;return b&32768?b|4294901760:b};we.prototype.readInt16BE=
function(b,e){b>>>=0;e||am(b,2,this.length);b=this[b+1]|this[b]<<8;return b&32768?b|4294901760:b};we.prototype.readInt32LE=function(b,e){b>>>=0;e||am(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};we.prototype.readInt32BE=function(b,e){b>>>=0;e||am(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};we.prototype.readFloatLE=function(b,e){b>>>=0;e||am(b,4,this.length);return $z.read(this,b,!0,23,4)};we.prototype.readFloatBE=function(b,e){b>>>=0;e||am(b,
4,this.length);return $z.read(this,b,!1,23,4)};we.prototype.readDoubleLE=function(b,e){b>>>=0;e||am(b,8,this.length);return $z.read(this,b,!0,52,8)};we.prototype.readDoubleBE=function(b,e){b>>>=0;e||am(b,8,this.length);return $z.read(this,b,!1,52,8)};we.prototype.writeUIntLE=function(b,e,m,a){b=+b;e>>>=0;m>>>=0;a||Wn(this,b,e,m,Math.pow(2,8*m)-1,0);a=1;var g=0;for(this[e]=b&255;++g<m&&(a*=256);)this[e+g]=b/a&255;return e+m};we.prototype.writeUIntBE=function(b,e,m,a){b=+b;e>>>=0;m>>>=0;a||Wn(this,
b,e,m,Math.pow(2,8*m)-1,0);a=m-1;var g=1;for(this[e+a]=b&255;0<=--a&&(g*=256);)this[e+a]=b/g&255;return e+m};we.prototype.writeUInt8=function(b,e,m){b=+b;e>>>=0;m||Wn(this,b,e,1,255,0);this[e]=b&255;return e+1};we.prototype.writeUInt16LE=function(b,e,m){b=+b;e>>>=0;m||Wn(this,b,e,2,65535,0);this[e]=b&255;this[e+1]=b>>>8;return e+2};we.prototype.writeUInt16BE=function(b,e,m){b=+b;e>>>=0;m||Wn(this,b,e,2,65535,0);this[e]=b>>>8;this[e+1]=b&255;return e+2};we.prototype.writeUInt32LE=function(b,e,m){b=
+b;e>>>=0;m||Wn(this,b,e,4,4294967295,0);this[e+3]=b>>>24;this[e+2]=b>>>16;this[e+1]=b>>>8;this[e]=b&255;return e+4};we.prototype.writeUInt32BE=function(b,e,m){b=+b;e>>>=0;m||Wn(this,b,e,4,4294967295,0);this[e]=b>>>24;this[e+1]=b>>>16;this[e+2]=b>>>8;this[e+3]=b&255;return e+4};we.prototype.writeIntLE=function(b,e,m,a){b=+b;e>>>=0;a||(a=Math.pow(2,8*m-1),Wn(this,b,e,m,a-1,-a));a=0;var g=1,l=0;for(this[e]=b&255;++a<m&&(g*=256);)0>b&&0===l&&0!==this[e+a-1]&&(l=1),this[e+a]=(b/g>>0)-l&255;return e+m};
we.prototype.writeIntBE=function(b,e,m,a){b=+b;e>>>=0;a||(a=Math.pow(2,8*m-1),Wn(this,b,e,m,a-1,-a));a=m-1;var g=1,l=0;for(this[e+a]=b&255;0<=--a&&(g*=256);)0>b&&0===l&&0!==this[e+a+1]&&(l=1),this[e+a]=(b/g>>0)-l&255;return e+m};we.prototype.writeInt8=function(b,e,m){b=+b;e>>>=0;m||Wn(this,b,e,1,127,-128);0>b&&(b=255+b+1);this[e]=b&255;return e+1};we.prototype.writeInt16LE=function(b,e,m){b=+b;e>>>=0;m||Wn(this,b,e,2,32767,-32768);this[e]=b&255;this[e+1]=b>>>8;return e+2};we.prototype.writeInt16BE=
function(b,e,m){b=+b;e>>>=0;m||Wn(this,b,e,2,32767,-32768);this[e]=b>>>8;this[e+1]=b&255;return e+2};we.prototype.writeInt32LE=function(b,e,m){b=+b;e>>>=0;m||Wn(this,b,e,4,2147483647,-2147483648);this[e]=b&255;this[e+1]=b>>>8;this[e+2]=b>>>16;this[e+3]=b>>>24;return e+4};we.prototype.writeInt32BE=function(b,e,m){b=+b;e>>>=0;m||Wn(this,b,e,4,2147483647,-2147483648);0>b&&(b=4294967295+b+1);this[e]=b>>>24;this[e+1]=b>>>16;this[e+2]=b>>>8;this[e+3]=b&255;return e+4};we.prototype.writeFloatLE=function(b,
e,m){return uY(this,b,e,!0,m)};we.prototype.writeFloatBE=function(b,e,m){return uY(this,b,e,!1,m)};we.prototype.writeDoubleLE=function(b,e,m){return vY(this,b,e,!0,m)};we.prototype.writeDoubleBE=function(b,e,m){return vY(this,b,e,!1,m)};we.prototype.copy=function(b,e,m,a){if(!we.isBuffer(b))throw new TypeError("argument should be a Buffer");m||(m=0);a||0===a||(a=this.length);e>=b.length&&(e=b.length);e||(e=0);0<a&&a<m&&(a=m);if(a===m||0===b.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");
if(0>m||m>=this.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length);b.length-e<a-m&&(a=b.length-e+m);var g=a-m;if(this===b&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,m,a);else if(this===b&&m<e&&e<a)for(a=g-1;0<=a;--a)b[a+e]=this[a+m];else Uint8Array.prototype.set.call(b,this.subarray(m,a),e);return g};we.prototype.fill=function(b,e,m,a){if("string"===typeof b){"string"===typeof e?(a=e,e=
0,m=this.length):"string"===typeof m&&(a=m,m=this.length);if(void 0!==a&&"string"!==typeof a)throw new TypeError("encoding must be a string");if("string"===typeof a&&!we.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===b.length){var g=b.charCodeAt(0);if("utf8"===a&&128>g||"latin1"===a)b=g}}else"number"===typeof b?b&=255:"boolean"===typeof b&&(b=Number(b));if(0>e||this.length<e||this.length<m)throw new RangeError("Out of range index");if(m<=e)return this;e>>>=0;m=void 0===m?this.length:
m>>>0;b||(b=0);if("number"===typeof b)for(a=e;a<m;++a)this[a]=b;else{g=we.isBuffer(b)?b:we.from(b,a);var l=g.length;if(0===l)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(a=0;a<m-e;++a)this[a+e]=g[a%l]}return this};var s$=/[^+/0-9A-Za-z-_]/g,r$=function(){for(var b=Array(256),e=0;16>e;++e)for(var m=16*e,a=0;16>a;++a)b[m+a]="0123456789abcdef"[e]+"0123456789abcdef"[a];return b}(),tu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Xia={};
Zv.prototype.next=function(b){var e=this||tu;if("function"!==typeof b)throw Error("next() requires a callback argument");if(e._ended)return Ci(b,Error("cannot call next() after end()")),e;if(e._nexting)return Ci(b,Error("cannot call next() before previous next() has completed")),e;e._nexting=!0;e._next(function(){e._nexting=!1;b.apply(null,arguments)});return e};Zv.prototype._next=function(b){Ci(b)};Zv.prototype.seek=function(b){if((this||tu)._ended)throw Error("cannot call seek() after end()");if((this||
tu)._nexting)throw Error("cannot call seek() before next() has completed");b=(this||tu).db._serializeKey(b);this._seek(b)};Zv.prototype._seek=function(b){};Zv.prototype.end=function(b){if("function"!==typeof b)throw Error("end() requires a callback argument");if((this||tu)._ended)return Ci(b,Error("end() already called on iterator"));(this||tu)._ended=!0;this._end(b)};Zv.prototype._end=function(b){Ci(b)};Zv.prototype._nextTick=Ci;var U3=Xia=Zv,Bl="undefined"!==typeof globalThis?globalThis:"undefined"!==
typeof self?self:global,Yia={};Xq.prototype._checkWritten=function(){if((this||Bl)._written)throw Error("write() already called on this batch");};Xq.prototype.put=function(b,e){this._checkWritten();var m=(this||Bl).db._checkKey(b)||(this||Bl).db._checkValue(e);if(m)throw m;b=(this||Bl).db._serializeKey(b);e=(this||Bl).db._serializeValue(e);this._put(b,e);return this||Bl};Xq.prototype._put=function(b,e){(this||Bl)._operations.push({type:"put",key:b,value:e})};Xq.prototype.del=function(b){this._checkWritten();
var e=(this||Bl).db._checkKey(b);if(e)throw e;b=(this||Bl).db._serializeKey(b);this._del(b);return this||Bl};Xq.prototype._del=function(b){(this||Bl)._operations.push({type:"del",key:b})};Xq.prototype.clear=function(){this._checkWritten();this._clear();return this||Bl};Xq.prototype._clear=function(){(this||Bl)._operations=[]};Xq.prototype.write=function(b,e){this._checkWritten();"function"===typeof b&&(e=b);if("function"!==typeof e)throw Error("write() requires a callback argument");if("object"!==
typeof b||null===b)b={};(this||Bl)._written=!0;this._write(b,e)};Xq.prototype._write=function(b,e){(this||Bl).db._batch((this||Bl)._operations,b,e)};Xq.prototype._nextTick=Ci;var Zia=Yia=Xq,Io="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,V3={},t$=R3,u$=Object.prototype.hasOwnProperty,v$="start end gt gte lt lte".split(" ");jk.prototype.open=function(b,e){var m=this||Io,a=(this||Io).status;"function"===typeof b&&(e=b);if("function"!==typeof e)throw Error("open() requires a callback argument");
if("object"!==typeof b||null===b)b={};b.createIfMissing=!1!==b.createIfMissing;b.errorIfExists=!!b.errorIfExists;(this||Io).status="opening";this._open(b,function(g){if(g)return m.status=a,e(g);m.status="open";e()})};jk.prototype._open=function(b,e){Ci(e)};jk.prototype.close=function(b){var e=this||Io,m=(this||Io).status;if("function"!==typeof b)throw Error("close() requires a callback argument");(this||Io).status="closing";this._close(function(a){if(a)return e.status=m,b(a);e.status="closed";b()})};
jk.prototype._close=function(b){Ci(b)};jk.prototype.get=function(b,e,m){"function"===typeof e&&(m=e);if("function"!==typeof m)throw Error("get() requires a callback argument");var a=this._checkKey(b);if(a)return Ci(m,a);b=this._serializeKey(b);if("object"!==typeof e||null===e)e={};e.asBuffer=!1!==e.asBuffer;this._get(b,e,m)};jk.prototype._get=function(b,e,m){Ci(function(){m(Error("NotFound"))})};jk.prototype.put=function(b,e,m,a){"function"===typeof m&&(a=m);if("function"!==typeof a)throw Error("put() requires a callback argument");
var g=this._checkKey(b)||this._checkValue(e);if(g)return Ci(a,g);b=this._serializeKey(b);e=this._serializeValue(e);if("object"!==typeof m||null===m)m={};this._put(b,e,m,a)};jk.prototype._put=function(b,e,m,a){Ci(a)};jk.prototype.del=function(b,e,m){"function"===typeof e&&(m=e);if("function"!==typeof m)throw Error("del() requires a callback argument");var a=this._checkKey(b);if(a)return Ci(m,a);b=this._serializeKey(b);if("object"!==typeof e||null===e)e={};this._del(b,e,m)};jk.prototype._del=function(b,
e,m){Ci(m)};jk.prototype.batch=function(b,e,m){if(!arguments.length)return this._chainedBatch();"function"===typeof e&&(m=e);"function"===typeof b&&(m=b);if("function"!==typeof m)throw Error("batch(array) requires a callback argument");if(!Array.isArray(b))return Ci(m,Error("batch(array) requires an array argument"));if(0===b.length)return Ci(m);if("object"!==typeof e||null===e)e={};for(var a=Array(b.length),g=0;g<b.length;g++){if("object"!==typeof b[g]||null===b[g])return Ci(m,Error("batch(array) element must be an object and not `null`"));
var l=Aw(b[g]);if("put"!==l.type&&"del"!==l.type)return Ci(m,Error("`type` must be 'put' or 'del'"));var q=this._checkKey(l.key);if(q)return Ci(m,q);l.key=this._serializeKey(l.key);if("put"===l.type){if(q=this._checkValue(l.value))return Ci(m,q);l.value=this._serializeValue(l.value)}a[g]=l}this._batch(a,e,m)};jk.prototype._batch=function(b,e,m){Ci(m)};jk.prototype.clear=function(b,e){if("function"===typeof b)e=b;else if("function"!==typeof e)throw Error("clear() requires a callback argument");b=xY(this||
Io,b);b.reverse=!!b.reverse;b.limit="limit"in b?b.limit:-1;this._clear(b,e)};jk.prototype._clear=function(b,e){b.keys=!0;b.values=!1;b.keyAsBuffer=!0;b.valueAsBuffer=!0;var m=this._iterator(b),a={},g=this||Io,l=function(q){if(q)return m.end(function(){e(q)});m.next(function(r,u){if(r)return l(r);if(void 0===u)return m.end(e);g._del(u,a,l)})};l()};jk.prototype._setupIteratorOptions=function(b){b=xY(this||Io,b);b.reverse=!!b.reverse;b.keys=!1!==b.keys;b.values=!1!==b.values;b.limit="limit"in b?b.limit:
-1;b.keyAsBuffer=!1!==b.keyAsBuffer;b.valueAsBuffer=!1!==b.valueAsBuffer;return b};jk.prototype.iterator=function(b){if("object"!==typeof b||null===b)b={};b=this._setupIteratorOptions(b);return this._iterator(b)};jk.prototype._iterator=function(b){return new U3(this||Io)};jk.prototype._chainedBatch=function(){return new Zia(this||Io)};jk.prototype._serializeKey=function(b){return b};jk.prototype._serializeValue=function(b){return b};jk.prototype._checkKey=function(b){if(null===b||void 0===b)return Error("key cannot be `null` or `undefined`");
if(T3.isBuffer(b)&&0===b.length)return Error("key cannot be an empty Buffer");if(""===b)return Error("key cannot be an empty String");if(Array.isArray(b)&&0===b.length)return Error("key cannot be an empty Array")};jk.prototype._checkValue=function(b){if(null===b||void 0===b)return Error("value cannot be `null` or `undefined`")};jk.prototype._nextTick=Ci;V3=jk;var $ia=V3;var Yq="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,W3={},yY=U3;sk(aA,yY);aA.prototype.setDb=
function(b){var e=(this||Yq)._iterator=b.iterator((this||Yq)._options);(this||Yq)._operations.forEach(function(m){e[m.method].apply(e,m.args)})};aA.prototype._operation=function(b,e){if((this||Yq)._iterator)return(this||Yq)._iterator[b].apply((this||Yq)._iterator,e);(this||Yq)._operations.push({method:b,args:e})};["next","end"].forEach(function(b){aA.prototype["_"+b]=function(){this._operation(b,arguments)}});aA.prototype.seek=function(){this._operation("seek",arguments)};W3=aA;var bm="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof self?self:global,PP={},zY=$ia,CY=W3,BY=["put","get","del","batch","clear"],w$=["approximateSize","compactRange"];sk(Rx,zY);Rx.prototype.type="deferred-leveldown";Rx.prototype._open=function(b,e){var m=this||bm;(this||bm)._db.open(b,function(a){if(a)return e(a);m._operations.forEach(function(g){g.iterator?g.iterator.setDb(m._db):m._db[g.method].apply(m._db,g.args)});m._operations=[];x$(m);e()})};Rx.prototype._close=function(b){var e=this||bm;(this||
bm)._db.close(function(m){if(m)return b(m);AY(e);b()})};Rx.prototype._serializeKey=function(b){return b};Rx.prototype._serializeValue=function(b){return b};PP=Rx;PP.DeferredIterator=CY;var aja=PP,FY={},EY=!1,vM={},GY=!1,xM="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,bja={},J$=bja=function(b,e){if(wM("noDeprecation"))return b;var m=!1;return function(){if(!m){if(wM("throwDeprecation"))throw Error(e);wM("traceDeprecation")?console.trace(e):console.warn(e);m=!0}return b.apply(this||
xM,arguments)}},WI={},XI=Rh,Ds=XI.Buffer;Ds.from&&Ds.alloc&&Ds.allocUnsafe&&Ds.allocUnsafeSlow?WI=XI:(HY(XI,WI),WI.Buffer=Sx);Sx.prototype=Object.create(Ds.prototype);HY(Ds,Sx);Sx.from=function(b,e,m){if("number"===typeof b)throw new TypeError("Argument must not be a number");return Ds(b,e,m)};Sx.alloc=function(b,e,m){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=Ds(b);void 0!==e?"string"===typeof m?b.fill(e,m):b.fill(e):b.fill(0);return b};Sx.allocUnsafe=function(b){if("number"!==
typeof b)throw new TypeError("Argument must be a number");return Ds(b)};Sx.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return XI.SlowBuffer(b)};var DM={},yM=WI.Buffer,IY=yM.isEncoding||function(b){b=""+b;switch(b&&b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};DM.StringDecoder=yC;yC.prototype.write=function(b){if(0===
b.length)return"";if(this.lastNeed){var e=this.fillLast(b);if(void 0===e)return"";var m=this.lastNeed;this.lastNeed=0}else m=0;return m<b.length?e?e+this.text(b,m):this.text(b,m):e||""};yC.prototype.end=function(b){b=b&&b.length?this.write(b):"";return this.lastNeed?b+"\ufffd":b};yC.prototype.text=function(b,e){var m=G$(this,b,e);if(!this.lastNeed)return b.toString("utf8",e);this.lastTotal=m;m=b.length-(m-this.lastNeed);b.copy(this.lastChar,0,m);return b.toString("utf8",e,m)};yC.prototype.fillLast=
function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length);this.lastNeed-=b.length};var KY={},JY=!1,MY={},LY=!1,PY=Object.freeze({}),OY={},NY=!1,SY={},RY=!1,VY={},UY=!1,BM={},XY=!1,K$="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,CM={},YY=!1,aZ={},$Y=!1,EM={},bZ=!1,M$="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,FM={},dZ=!1,QP={},X3=!1,Y3={},Z3=!1,So={},$3=!1;$3||($3=!0,So=So=ZY(),So.Stream=So,So.Readable=So,So.Writable=WY(),So.Duplex=cA(),So.Transform=cZ(),So.PassThrough=function(){function b(m){if(!(this instanceof b))return new b(m);e.call(this,m)}if(X3)return QP;X3=!0;QP=b;var e=cZ();sk(b,e);b.prototype._transform=function(m,a,g){g(null,m)};return QP}(),So.finished=AM(),So.pipeline=function(){function b(v){var y=!1;return function(){y||(y=!0,v.apply(void 0,
arguments))}}function e(v){if(v)throw v;}function m(v,y,z,A){A=b(A);var B=!1;v.on("close",function(){B=!0});void 0===l&&(l=AM());l(v,{readable:y,writable:z},function(E){if(E)return A(E);B=!0;A()});var G=!1;return function(E){if(!B&&!G){G=!0;if(v.setHeader&&"function"===typeof v.abort)return v.abort();if("function"===typeof v.destroy)return v.destroy();A(E||new u("pipe"))}}}function a(v){v()}function g(v,y){return v.pipe(y)}if(Z3)return Y3;Z3=!0;var l,q=bA().codes,r=q.ERR_MISSING_ARGS,u=q.ERR_STREAM_DESTROYED;
return Y3=function(){for(var v=arguments.length,y=Array(v),z=0;z<v;z++)y[z]=arguments[z];var A=y.length?"function"!==typeof y[y.length-1]?e:y.pop():e;Array.isArray(y[0])&&(y=y[0]);if(2>y.length)throw new r("streams");var B,G=y.map(function(E,K){var J=K<y.length-1;return m(E,J,0<K,function(P){B||(B=P);P&&G.forEach(a);J||(G.forEach(a),A(B))})});return y.reduce(g)}}());var a4=So;var Zq="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,b4={},cja=sk,eZ=a4.Readable,N$=Aw;
b4=dA;cja(dA,eZ);dA.prototype._read=function(){var b=this||Zq,e=(this||Zq)._options;(this||Zq).destroyed||(this||Zq)._iterator.next(function(m,a,g){if(!b.destroyed){if(m)return b.destroy(m);void 0===a&&void 0===g?b.push(null):!1!==e.keys&&!1===e.values?b.push(a):!1===e.keys&&!1!==e.values?b.push(g):b.push({key:a,value:g})}})};dA.prototype._destroy=function(b,e){(this||Zq)._iterator.end(function(m){e(b||m)})};var dja=b4,YI={};(function(b,e,m){YI?YI=m():e[b]=m()})("prr",YI,function(){var b="function"==
typeof Object.defineProperty?function(m,a,g){Object.defineProperty(m,a,g);return m}:function(m,a,g){m[a]=g.value;return m},e=function(m,a){var g="object"==typeof a,l=!g&&"string"==typeof a,q=function(r){return g?!!a[r]:l?-1<a.indexOf(r[0]):!1};return{enumerable:q("enumerable"),configurable:q("configurable"),writable:q("writable"),value:m}};return function(m,a,g,l){var q;l=e(g,l);if("object"==typeof a){for(q in a)Object.hasOwnProperty.call(a,q)&&(l.value=a[q],b(m,q,l));return m}return b(m,a,l)}});
var gl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,eja={},O$=YI;GM.prototype=Error();var fja=eja=function(b){var e=function(m,a){return P$(b,m,a)};return{CustomError:GM,FilesystemError:e("FilesystemError"),createError:e}},$s={},gja=$s.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",
description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,
code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},
{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",
description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},
{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},
{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},
{errno:52,code:"EXDEV",description:"cross-device link not permitted"},{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];$s.errno={};$s.code={};gja.forEach(function(b){$s.errno[b.errno]=
b;$s.code[b.code]=b});$s.custom=fja($s);$s.create=$s.custom.createError;var hja={},xy=$s.create,yy=xy("LevelUPError"),RP=xy("NotFoundError",yy);RP.prototype.notFound=!0;RP.prototype.status=404;var zy=hja={LevelUPError:yy,InitializationError:xy("InitializationError",yy),OpenError:xy("OpenError",yy),ReadError:xy("ReadError",yy),WriteError:xy("WriteError",yy),NotFoundError:RP,EncodingError:xy("EncodingError",yy)},ija={},Bw=ija=function(){var b,e=new Promise(function(m,a){b=function(g,l){g?a(g):m(l)}});
b.promise=e;return b};var UA=function(b,e){return"function"===typeof b?b:e};var c4=function(b){return"object"===typeof b&&null!==b?b:{}};var hl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,jja={},VD=zy.WriteError;zC.prototype.put=function(b,e){try{(this||hl).batch.put(b,e)}catch(m){throw new VD(m);}(this||hl).ops.push({type:"put",key:b,value:e});(this||hl).length++;return this||hl};zC.prototype.del=function(b){try{(this||hl).batch.del(b)}catch(e){throw new VD(e);
}(this||hl).ops.push({type:"del",key:b});(this||hl).length++;return this||hl};zC.prototype.clear=function(){try{(this||hl).batch.clear()}catch(b){throw new VD(b);}(this||hl).ops=[];(this||hl).length=0;return this||hl};zC.prototype.write=function(b,e){var m=(this||hl)._levelup,a=(this||hl).ops;e=UA(b,e);if(!e){e=Bw();var g=e.promise}b=c4(b);try{(this||hl).batch.write(b,function(l){if(l)return e(new VD(l));m.emit("batch",a);e()})}catch(l){throw new VD(l);}return g};var kja=jja=zC,aaa={assign:gZ,polyfill:function(){Object.assign||
Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:gZ})}},d4=Object.prototype.toString,e4=function(b){var e=d4.call(b),m="[object Arguments]"===e;return m||(m="[object Array]"!==e&&null!==b&&"object"==typeof b&&"number"==typeof b.length&&0<=b.length&&"[object Function]"===d4.call(b.callee)),m};if(!Object.keys){var ZI=Object.prototype.hasOwnProperty,f4=Object.prototype.toString,g4=Object.prototype.propertyIsEnumerable,lja=!g4.call({toString:null},"toString"),mja=
g4.call(function(){},"prototype"),$I="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),SP=function(b){var e=b.constructor;return e&&e.prototype===b},nja={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,
$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},oja=function(){if("undefined"==typeof window)return!1;for(var b in window)try{if(!nja["$"+b]&&ZI.call(window,b)&&null!==window[b]&&"object"==typeof window[b])try{SP(window[b])}catch(e){return!0}}catch(e){return!0}return!1}();var pja=function(b){var e=null!==b&&"object"==typeof b,m="[object Function]"===f4.call(b),a=e4(b),g=e&&"[object String]"===f4.call(b),l=[];if(!e&&!m&&!a)throw new TypeError("Object.keys called on a non-object");e=
mja&&m;if(g&&0<b.length&&!ZI.call(b,0))for(g=0;g<b.length;++g)l.push(String(g));if(a&&0<b.length)for(a=0;a<b.length;++a)l.push(String(a));else for(var q in b)e&&"prototype"===q||!ZI.call(b,q)||l.push(String(q));if(lja){if("undefined"!=typeof window&&oja)try{var r=SP(b)}catch(u){r=!1}else r=SP(b);for(a=0;a<$I.length;++a)r&&"constructor"===$I[a]||!ZI.call(b,$I[a])||l.push($I[a])}return l}}var qja=pja,rja=Array.prototype.slice,h4=Object.keys,aJ=h4?function(b){return h4(b)}:qja,i4=Object.keys;aJ.shim=
function(){Object.keys?function(){var b=Object.keys(arguments);return b&&b.length===arguments.length}(1,2)||(Object.keys=function(b){return e4(b)?i4(rja.call(b)):i4(b)}):Object.keys=aJ;return Object.keys||aJ};var sja="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),tja=Object.prototype.toString,uja=Array.prototype.concat,TP=Object.defineProperty,j4=TP&&function(){var b={};try{for(var e in TP(b,"x",{enumerable:!1,value:b}),b)return!1;return b.x===b}catch(m){return!1}}(),WD=function(b,e){var m=
2<arguments.length?arguments[2]:{},a=aJ(e);sja&&(a=uja.call(a,Object.getOwnPropertySymbols(e)));for(var g=0;g<a.length;g+=1){var l=void 0,q=b,r=a[g],u=e[a[g]],v=m[a[g]];(!(r in q)||"function"==typeof(l=v)&&"[object Function]"===tja.call(l)&&v())&&(j4?TP(q,r,{configurable:!0,enumerable:!1,value:u,writable:!0}):q[r]=u)}};WD.supportsDescriptors=!!j4;var k4=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global).Symbol,vja=function(){if("function"!=typeof Symbol||"function"!=
typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var b={},e=Symbol("test"),m=Object(e);if("string"==typeof e||"[object Symbol]"!==Object.prototype.toString.call(e)||"[object Symbol]"!==Object.prototype.toString.call(m))return!1;for(e in b[e]=42,b)return!1;if("function"==typeof Object.keys&&0!==Object.keys(b).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(b).length)return!1;m=Object.getOwnPropertySymbols(b);return 1!==
m.length||m[0]!==e||!Object.prototype.propertyIsEnumerable.call(b,e)||"function"==typeof Object.getOwnPropertyDescriptor&&(b=Object.getOwnPropertyDescriptor(b,e),42!==b.value||!0!==b.enumerable)?!1:!0},UP=Array.prototype.slice,wja=Object.prototype.toString,xja=function(b){var e=this;if("function"!=typeof e||"[object Function]"!==wja.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var m,a=UP.call(arguments,1),g=Math.max(0,e.length-a.length),l=[],q=0;q<g;q++)l.push("$"+
q);if(m=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof m){var r=e.apply(this,a.concat(UP.call(arguments)));return Object(r)===r?r:this}return e.apply(b,a.concat(UP.call(arguments)))}),e.prototype)g=function(){},g.prototype=e.prototype,m.prototype=new g,g.prototype=null;return m},VP=Function.prototype.bind||xja,XD=TypeError,Ay=Object.getOwnPropertyDescriptor;if(Ay)try{Ay({},"")}catch(b){Ay=null}var WP=function(){throw new XD;
},yja=Ay?function(){try{return arguments.callee,WP}catch(b){try{return Ay(arguments,"callee").get}catch(e){return WP}}}():WP,By="function"==typeof k4&&"function"==typeof Symbol&&"symbol"==typeof k4("foo")&&"symbol"==typeof Symbol("bar")&&vja(),Cy=Object.getPrototypeOf||function(b){return b.__proto__},XP="undefined"==typeof Uint8Array?void 0:Cy(Uint8Array),YP={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?
void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":By?Cy([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,
"%AsyncIteratorPrototype%":void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,
"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,
"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,
"%IteratorPrototype%":By?Cy(Cy([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%JSONParse%":"object"==typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&By?Cy((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,
"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,
"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&By?Cy((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:
Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":By?Cy(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":By?Symbol:void 0,"%SymbolPrototype%":By?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":yja,"%TypedArray%":XP,
"%TypedArrayPrototype%":XP?XP.prototype:void 0,"%TypeError%":XD,"%TypeErrorPrototype%":XD.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,
"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==
typeof WeakSet?void 0:WeakSet.prototype},l4=VP.call(Function.call,String.prototype.replace),zja=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Aja=/\\(\\)?/g,Bja=function(b){var e=[];return l4(b,zja,function(m,a,g,l){e[e.length]=g?l4(l,Aja,"$1"):a||m}),e},m4,n4=function(b,e){if("string"!=typeof b||0===b.length)throw new TypeError("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');
var m=Bja(b);var a="%"+(0<m.length?m[0]:"")+"%";if(!(a in YP))throw new SyntaxError("intrinsic "+a+" does not exist!");if(void 0===YP[a]&&!e)throw new XD("intrinsic "+a+" exists, but is not available. Please file an issue!");a=YP[a];for(var g=1;g<m.length;g+=1)if(null!=a)if(Ay&&g+1>=m.length){var l=Ay(a,m[g]);if(!(e||m[g]in a))throw new XD("base intrinsic for "+b+" exists, but the property is not available.");a=l?l.get||l.value:a[m[g]]}else a=a[m[g]];return a}("%Function%"),Cja=n4.apply,Dja=n4.call;
(m4=function(){return VP.apply(Dja,arguments)}).apply=function(){return VP.apply(Cja,arguments)};var ZP,bJ,Eja=(ZP=function(b,e){return 0===b&&0===e?1/b==1/e:b===e||!(b==b||e==e)},ZP),Fja=(bJ=function(){return"function"==typeof Object.is?Object.is:Eja},bJ),o4=m4(bJ(),Object);WD(o4,{getPolyfill:bJ,implementation:ZP,shim:function(){var b=Fja();return WD(Object,{is:b},{is:function(){return Object.is!==b}}),b}});var CZ=o4;var p4=function(b){return b!=b};var cJ,Gja=p4,Hja=(cJ=function(){return Number.isNaN&&
Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:Gja},WD),Ija=p4,q4=cJ();WD(q4,{getPolyfill:cJ,implementation:Ija,shim:function(){var b=cJ();return Hja(Number,{isNaN:b},{isNaN:function(){return Number.isNaN!==b}}),b}});var HM={},iZ=!1,kZ={},jZ=!1,S$=void 0!==/a/g.flags,NG=function(b){var e=[];return b.forEach(function(m){return e.push(m)}),e},zZ=function(b){var e=[];return b.forEach(function(m,a){return e.push([a,m])}),e},nZ=Object.is?Object.is:CZ,JG=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:
function(){return[]},KM=Number.isNaN?Number.isNaN:q4,BC=JM(Object.prototype.hasOwnProperty),MG=JM(Object.prototype.propertyIsEnumerable),oZ=JM(Object.prototype.toString),un=Xg.types,X$=un.isAnyArrayBuffer,U$=un.isArrayBufferView,pZ=un.isDate,KG=un.isMap,qZ=un.isRegExp,LG=un.isSet,T$=un.isNativeError,Y$=un.isBoxedPrimitive,rZ=un.isNumberObject,sZ=un.isStringObject,tZ=un.isBooleanObject,uZ=un.isBigIntObject,Z$=un.isSymbolObject,V$=un.isFloat32Array,W$=un.isFloat64Array,AZ={isDeepEqual:function(b,e){return Tp(b,
e,!1)},isDeepStrictEqual:function(b,e){return Tp(b,e,!0)}},LM={},BZ=!1,Jja=IM(),Fh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Kja={},PG=zi,OG=vs.EventEmitter,Lja=Xg.inherits,DZ=aja,daa=R3,caa=Jja,eA=c4,dJ=zy.WriteError,EZ=zy.ReadError,Mja=zy.NotFoundError,Nja=zy.OpenError,baa=zy.InitializationError;Fj.prototype.emit=OG.prototype.emit;Fj.prototype.once=OG.prototype.once;Lja(Fj,OG);Fj.prototype.open=function(b,e){var m=this||Fh;"function"===typeof b&&(e=b,b=null);
if(!e){e=Bw();var a=e.promise}b||(b=(this||Fh).options);if(this.isOpen())return PG.nextTick(e,null,m),a;if(this._isOpening())return this.once("open",function(){e(null,m)}),a;this.emit("opening");(this||Fh).db.open(b,function(g){if(g)return e(new Nja(g));m.db=m._db;e(null,m);m.emit("open");m.emit("ready")});return a};Fj.prototype.close=function(b){var e=this||Fh;if(!b){b=Bw();var m=b.promise}if(this.isOpen())(this||Fh).db.close(function(){e.emit("closed");b.apply(null,arguments)}),this.emit("closing"),
(this||Fh).db=new DZ((this||Fh)._db);else if(this.isClosed())PG.nextTick(b);else if("closing"===(this||Fh).db.status)this.once("closed",b);else if(this._isOpening())this.once("open",function(){e.close(b)});return m};Fj.prototype.isOpen=function(){return"open"===(this||Fh).db.status};Fj.prototype._isOpening=function(){return"opening"===(this||Fh).db.status};Fj.prototype.isClosed=function(){return/^clos|new/.test((this||Fh).db.status)};Fj.prototype.get=function(b,e,m){m=UA(e,m);if(!m){m=Bw();var a=
m.promise}if(CC(this||Fh,m))return a;e=eA(e);(this||Fh).db.get(b,e,function(g,l){if(g)return g=/notfound/i.test(g)||g.notFound?new Mja("Key not found in database ["+b+"]",g):new EZ(g),m(g);m(null,l)});return a};Fj.prototype.put=function(b,e,m,a){var g=this||Fh;a=UA(m,a);if(!a){a=Bw();var l=a.promise}if(CC(this||Fh,a))return l;m=eA(m);(this||Fh).db.put(b,e,m,function(q){if(q)return a(new dJ(q));g.emit("put",b,e);a()});return l};Fj.prototype.del=function(b,e,m){var a=this||Fh;m=UA(e,m);if(!m){m=Bw();
var g=m.promise}if(CC(this||Fh,m))return g;e=eA(e);(this||Fh).db.del(b,e,function(l){if(l)return m(new dJ(l));a.emit("del",b);m()});return g};Fj.prototype.batch=function(b,e,m){if(!arguments.length)return new kja(this||Fh);var a=this||Fh;m="function"===typeof b?b:UA(e,m);if(!m){m=Bw();var g=m.promise}if(CC(this||Fh,m))return g;e=eA(e);(this||Fh).db.batch(b,e,function(l){if(l)return m(new dJ(l));a.emit("batch",b);m()});return g};Fj.prototype.iterator=function(b){return(this||Fh).db.iterator(b)};Fj.prototype.clear=
function(b,e){var m=this||Fh;e=UA(b,e);b=eA(b);if(!e){e=Bw();var a=e.promise}if(CC(this||Fh,e))return a;(this||Fh).db.clear(b,function(g){if(g)return e(new dJ(g));m.emit("clear",b);e()});return a};Fj.prototype.readStream=Fj.prototype.createReadStream=function(b){b=Aw({keys:!0,values:!0},b);"number"!==typeof b.limit&&(b.limit=-1);return new dja((this||Fh).db.iterator(b),b)};Fj.prototype.keyStream=Fj.prototype.createKeyStream=function(b){return this.createReadStream(Aw(b,{keys:!0,values:!1}))};Fj.prototype.valueStream=
Fj.prototype.createValueStream=function(b){return this.createReadStream(Aw(b,{keys:!1,values:!0}))};Fj.prototype.toString=function(){return"LevelUP"};Fj.prototype.type="levelup";Fj.errors=zy;var Oja=Kja=Fj.default=Fj,Hk={},Pja=Rh.Buffer;Hk.compare=function(b,e){if(Pja.isBuffer(b)){for(var m=Math.min(b.length,e.length),a=0;a<m;a++){var g=b[a]-e[a];if(g)return g}return b.length-e.length}return b<e?-1:b>e?1:0};var Qja=Hk.lowerBoundKey=function(b){return Es(b,"gt")||Es(b,"gte")||Es(b,"min")||(b.reverse?
Es(b,"end"):Es(b,"start"))||void 0},$P=Hk.lowerBound=function(b,e){var m=Qja(b);return m?b[m]:e},aQ=Hk.lowerBoundInclusive=function(b){return Object.hasOwnProperty.call(b,"gt")?!1:!0},bQ=Hk.upperBoundInclusive=function(b){return Object.hasOwnProperty.call(b,"lt")?!1:!0},Rja=Hk.lowerBoundExclusive=function(b){return!aQ(b)},Sja=Hk.upperBoundExclusive=function(b){return!bQ(b)},Tja=Hk.upperBoundKey=function(b){return Es(b,"lt")||Es(b,"lte")||Es(b,"max")||(b.reverse?Es(b,"start"):Es(b,"end"))||void 0},
cQ=Hk.upperBound=function(b,e){var m=Tja(b);return m?b[m]:e};Hk.start=function(b,e){return b.reverse?cQ(b,e):$P(b,e)};Hk.end=function(b,e){return b.reverse?$P(b,e):cQ(b,e)};Hk.startInclusive=function(b){return b.reverse?bQ(b):aQ(b)};Hk.endInclusive=function(b){return b.reverse?aQ(b):bQ(b)};Hk.toLtgt=function(b,e,m,a,g){e=e||{};m=m||eaa;var l=3<arguments.length,q=Hk.lowerBoundKey(b),r=Hk.upperBoundKey(b);q?"gt"===q?e.gt=m(b.gt,!1):e.gte=m(b[q],!1):l&&(e.gte=m(a,!1));r?"lt"===r?e.lt=m(b.lt,!0):e.lte=
m(b[r],!0):l&&(e.lte=m(g,!0));null!=b.reverse&&(e.reverse=!!b.reverse);Object.hasOwnProperty.call(e,"max")&&delete e.max;Object.hasOwnProperty.call(e,"min")&&delete e.min;Object.hasOwnProperty.call(e,"start")&&delete e.start;Object.hasOwnProperty.call(e,"end")&&delete e.end;return e};Hk.contains=function(b,e,m){m=m||Hk.compare;var a=$P(b);if(void 0!==a&&""!==a&&(a=m(e,a),0>a||0===a&&Rja(b)))return!1;a=cQ(b);return void 0!==a&&""!==a&&(a=m(e,a),0<a||0===a&&Sja(b))?!1:!0};Hk.filter=function(b,e){return function(m){return Hk.contains(b,
m,e)}};var Iu={},NM=T3;Iu.utf8=Iu["utf-8"]={encode:function(b){return MM(b)?b:String(b)},decode:QG,buffer:!1,type:"utf8"};Iu.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"};Iu.binary={encode:function(b){return MM(b)?b:NM.from(b)},decode:QG,buffer:!0,type:"binary"};Iu.none={encode:QG,decode:QG,buffer:!1,type:"id"};Iu.id=Iu.none;"hex ascii base64 ucs2 ucs-2 utf16le utf-16le".split(" ").forEach(function(b){Iu[b]={encode:function(e){return MM(e)?e:NM.from(e,b)},decode:function(e){return e.toString(b)},
buffer:!0,type:b}});var uu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,r4={},OM=Iu;r4=nn;nn.prototype._encoding=function(b){"string"===typeof b&&(b=OM[b]);b||(b=OM.id);return b};nn.prototype._keyEncoding=function(b,e){return this._encoding(e&&e.keyEncoding||b&&b.keyEncoding||(this||uu).opts.keyEncoding)};nn.prototype._valueEncoding=function(b,e){return this._encoding(e&&(e.valueEncoding||e.encoding)||b&&(b.valueEncoding||b.encoding)||(this||uu).opts.valueEncoding||
(this||uu).opts.encoding)};nn.prototype.encodeKey=function(b,e,m){return this._keyEncoding(e,m).encode(b)};nn.prototype.encodeValue=function(b,e,m){return this._valueEncoding(e,m).encode(b)};nn.prototype.decodeKey=function(b,e){return this._keyEncoding(e).decode(b)};nn.prototype.decodeValue=function(b,e){return this._valueEncoding(e).decode(b)};nn.prototype.encodeBatch=function(b,e){var m=this||uu;return b.map(function(a){var g={type:a.type,key:m.encodeKey(a.key,e,a)};m.keyAsBuffer(e,a)&&(g.keyEncoding=
"binary");a.prefix&&(g.prefix=a.prefix);"value"in a&&(g.value=m.encodeValue(a.value,e,a),m.valueAsBuffer(e,a)&&(g.valueEncoding="binary"));return g})};var Uja="lt gt lte gte start end".split(" ");nn.prototype.encodeLtgt=function(b){var e=this||uu,m={};Object.keys(b).forEach(function(a){m[a]=-1<Uja.indexOf(a)?e.encodeKey(b[a],b):b[a]});return m};nn.prototype.createStreamDecoder=function(b){var e=this||uu;return b.keys&&b.values?function(m,a){return{key:e.decodeKey(m,b),value:e.decodeValue(a,b)}}:b.keys?
function(m){return e.decodeKey(m,b)}:b.values?function(m,a){return e.decodeValue(a,b)}:function(){}};nn.prototype.keyAsBuffer=function(b){return this._keyEncoding(b).buffer};nn.prototype.valueAsBuffer=function(b){return this._valueEncoding(b).buffer};var Vja=r4,Wja={},iaa=Wja=Array.isArray||function(b){return"[object Array]"==Object.prototype.toString.call(b)},il={},Xja=Rh.Buffer;il.isArray=function(b){return Array.isArray?Array.isArray(b):"[object Array]"===Object.prototype.toString.call(b)};il.isBoolean=
function(b){return"boolean"===typeof b};il.isNull=function(b){return null===b};il.isNullOrUndefined=function(b){return null==b};il.isNumber=function(b){return"number"===typeof b};il.isString=function(b){return"string"===typeof b};il.isSymbol=function(b){return"symbol"===typeof b};il.isUndefined=function(b){return void 0===b};il.isRegExp=function(b){return"[object RegExp]"===Object.prototype.toString.call(b)};il.isObject=function(b){return"object"===typeof b&&null!==b};il.isDate=function(b){return"[object Date]"===
Object.prototype.toString.call(b)};il.isError=function(b){return"[object Error]"===Object.prototype.toString.call(b)||b instanceof Error};il.isFunction=function(b){return"function"===typeof b};il.isPrimitive=function(b){return null===b||"boolean"===typeof b||"number"===typeof b||"string"===typeof b||"symbol"===typeof b||"undefined"===typeof b};il.isBuffer=Xja.isBuffer;var ig="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,RM={},s4=Rh.Buffer,Yja=s4.isEncoding||function(b){switch(b&&
b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}},dQ=RM.StringDecoder=function(b){(this||ig).encoding=(b||"utf8").toLowerCase().replace(/[-_]/,"");if(b&&!Yja(b))throw Error("Unknown encoding: "+b);switch((this||ig).encoding){case "utf8":(this||ig).surrogateSize=3;break;case "ucs2":case "utf16le":(this||ig).surrogateSize=2;(this||ig).detectIncompleteChar=gaa;break;
case "base64":(this||ig).surrogateSize=3;(this||ig).detectIncompleteChar=haa;break;default:(this||ig).write=faa;return}(this||ig).charBuffer=new s4(6);(this||ig).charReceived=0;(this||ig).charLength=0};dQ.prototype.write=function(b){for(var e="";(this||ig).charLength;){e=b.length>=(this||ig).charLength-(this||ig).charReceived?(this||ig).charLength-(this||ig).charReceived:b.length;b.copy((this||ig).charBuffer,(this||ig).charReceived,0,e);(this||ig).charReceived+=e;if((this||ig).charReceived<(this||
ig).charLength)return"";b=b.slice(e,b.length);e=(this||ig).charBuffer.slice(0,(this||ig).charLength).toString((this||ig).encoding);var m=e.charCodeAt(e.length-1);if(55296<=m&&56319>=m)(this||ig).charLength+=(this||ig).surrogateSize,e="";else{(this||ig).charReceived=(this||ig).charLength=0;if(0===b.length)return e;break}}this.detectIncompleteChar(b);var a=b.length;(this||ig).charLength&&(b.copy((this||ig).charBuffer,0,b.length-(this||ig).charReceived,a),a-=(this||ig).charReceived);e+=b.toString((this||
ig).encoding,0,a);a=e.length-1;m=e.charCodeAt(a);return 55296<=m&&56319>=m?(m=(this||ig).surrogateSize,(this||ig).charLength+=m,(this||ig).charReceived+=m,(this||ig).charBuffer.copy((this||ig).charBuffer,m,0,m),b.copy((this||ig).charBuffer,0,0,m),e.substring(0,a)):e};dQ.prototype.detectIncompleteChar=function(b){for(var e=3<=b.length?3:b.length;0<e;e--){var m=b[b.length-e];if(1==e&&6==m>>5){(this||ig).charLength=2;break}if(2>=e&&14==m>>4){(this||ig).charLength=3;break}if(3>=e&&30==m>>3){(this||ig).charLength=
4;break}}(this||ig).charReceived=e};dQ.prototype.end=function(b){var e="";b&&b.length&&(e=this.write(b));(this||ig).charReceived&&(b=(this||ig).encoding,e+=(this||ig).charBuffer.slice(0,(this||ig).charReceived).toString(b));return e};var jaa=Object.freeze({}),PM={},GZ=!1,Gh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,QM={},HZ=!1,ar="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,SM={},JZ=!1,Af="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,TM={},LZ=!1,cm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,UM={},NZ=!1,MZ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,jq={},t4=!1,Zja=function(){if(t4)return jq;t4=!0;var b=zi;jq=jq=IZ();jq.Stream=Tx;jq.Readable=jq;jq.Writable=FZ();jq.Duplex=fA();jq.Transform=KZ();jq.PassThrough=kaa();b.browser||"disable"!==b.env.READABLE_STREAM||(jq=Tx);return jq}(),$ja={},naa=DC(Hk),aka=DC(vs),bka=DC(Vja),
cka=DC(Zja),u4=DC(sk);u4(VM,Error);VM.prototype.name="NotFoundError";var dka=aka.EventEmitter,eka=new VM,v4=function(b,e,m,a){function g(q){var r={},u;if(a)for(u in a)"undefined"!==typeof a[u]&&(r[u]=a[u]);if(q)for(u in q)"undefined"!==typeof q[u]&&(r[u]=q[u]);return r}var l=new dka;l.sublevels={};l.options=a;l.version="6.5.4";l.methods={};e=e||[];l.put=function(q,r,u,v){"function"===typeof u&&(v=u,u={});b.apply([{key:q,value:r,prefix:e.slice(),type:"put"}],g(u),function(y){if(y)return v(y);l.emit("put",
q,r);v(null)})};l.prefix=function(){return e.slice()};l.batch=function(q,r,u){"function"===typeof r&&(u=r,r={});q=q.map(function(v){return{key:v.key,value:v.value,prefix:v.prefix||e,keyEncoding:v.keyEncoding,valueEncoding:v.valueEncoding,type:v.type}});b.apply(q,g(r),function(v){if(v)return u(v);l.emit("batch",q);u(null)})};l.get=function(q,r,u){"function"===typeof r&&(u=r,r={});b.get(q,e,g(r),function(v,y){v?u(eka):u(null,y)})};l.sublevel=function(q,r){return l.sublevels[q]=l.sublevels[q]||v4(b,
e.concat(q),m,g(r))};l.readStream=l.createReadStream=function(q){q=g(q);q.prefix=e;var r=b.iterator(q);q=m(q,b.createDecoder(q));q.setIterator(r);return q};l.close=function(q){b.close(q)};l.isOpen=b.isOpen;l.isClosed=b.isClosed;return l},OZ=cka.Readable;u4($v,OZ);$v.prototype.setIterator=function(b){this._iterator=b;return this._destroyed?b.end(function(){}):this._waiting?(this._waiting=!1,this._read()):this};$v.prototype._read=function(){var b=this;if(!b._destroyed){if(!b._iterator)return this._waiting=
!0;b._iterator.next(function(e,m,a){if(e||void 0===m&&void 0===a)return e||b._destroyed||b.push(null),b._cleanup(e);a=b._makeData(m,a);b._destroyed||b.push(a)})}};$v.prototype._cleanup=function(b){if(!this._destroyed){this._destroyed=!0;var e=this;b&&"iterator has ended"!==b.message&&e.emit("error",b);e._iterator?e._iterator.end(function(){e._iterator=null;e.emit("close")}):e.emit("close")}};$v.prototype.destroy=function(){this._cleanup()};var fka={encode:function(b){return"\u00ff"+b[0]+"\u00ff"+
b[1]},decode:function(b){b=b.toString();var e=b.indexOf("\u00ff",1);return[b.substring(1,e),b.substring(e+1)]},lowerBound:"\x00",upperBound:"\u00ff"},gka=new bka,hka=$ja=function(b){return v4(maa(b,fka,gka),[],$v,b.options)},vu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,eJ={},ika=zi,PZ=a4.Transform,w4=sk;w4(gA,PZ);gA.prototype.destroy=function(b){if(!(this||vu)._destroyed){(this||vu)._destroyed=!0;var e=this||vu;ika.nextTick(function(){b&&e.emit("error",b);e.emit("close")})}};
eJ=WM(function(b,e,m){b=new gA(b);b._transform=e;m&&(b._flush=m);return b});eJ.ctor=WM(function(b,e,m){function a(g){if(!((this||vu)instanceof a))return new a(g);(this||vu).options=Object.assign({},b,g);gA.call(this||vu,(this||vu).options)}w4(a,gA);a.prototype._transform=e;m&&(a.prototype._flush=m);return a});eJ.obj=WM(function(b,e,m){b=new gA(Object.assign({objectMode:!0,highWaterMark:16},b));b._transform=e;m&&(b._flush=m);return b});var x4=eJ,jka={};Ti.prototype.toArray=function(){for(var b=this._length,
e=Array(b),m=this._front,a=this._capacity,g=0;g<b;++g)e[g]=this[m+g&a-1];return e};Ti.prototype.push=function(b){var e=arguments.length,m=this._length;if(1<e){var a=this._capacity;if(m+e>a){for(var g=0;g<e;++g){this._checkCapacity(m+1);var l=this._front+m&this._capacity-1;this[l]=arguments[g];m++;this._length=m}return m}l=this._front;for(g=0;g<e;++g)this[l+m&a-1]=arguments[g],l++;this._length=m+e;return m+e}if(0===e)return m;this._checkCapacity(m+1);g=this._front+m&this._capacity-1;this[g]=b;this._length=
m+1;return m+1};Ti.prototype.pop=function(){var b=this._length;if(0!==b){var e=this._front+b-1&this._capacity-1,m=this[e];this[e]=void 0;this._length=b-1;return m}};Ti.prototype.shift=function(){var b=this._length;if(0!==b){var e=this._front,m=this[e];this[e]=void 0;this._front=e+1&this._capacity-1;this._length=b-1;return m}};Ti.prototype.unshift=function(b){var e=this._length,m=arguments.length;if(1<m){var a=this._capacity;if(e+m>a){for(var g=m-1;0<=g;g--){this._checkCapacity(e+1);a=this._capacity;
var l=(this._front-1&a-1^a)-a;this[l]=arguments[g];e++;this._length=e;this._front=l}return e}l=this._front;for(g=m-1;0<=g;g--)l=(l-1&a-1^a)-a,this[l]=arguments[g];this._front=l;this._length=e+m;return e+m}if(0===m)return e;this._checkCapacity(e+1);a=this._capacity;g=(this._front-1&a-1^a)-a;this[g]=b;this._length=e+1;this._front=g;return e+1};Ti.prototype.peekBack=function(){var b=this._length;if(0!==b)return this[this._front+b-1&this._capacity-1]};Ti.prototype.peekFront=function(){if(0!==this._length)return this[this._front]};
Ti.prototype.get=function(b){if(b===(b|0)){var e=this._length;0>b&&(b+=e);if(!(0>b||b>=e))return this[this._front+b&this._capacity-1]}};Ti.prototype.isEmpty=function(){return 0===this._length};Ti.prototype.clear=function(){for(var b=this._length,e=this._front,m=this._capacity,a=0;a<b;++a)this[e+a&m-1]=void 0;this._front=this._length=0};Ti.prototype.toString=function(){return this.toArray().toString()};Ti.prototype.valueOf=Ti.prototype.toString;Ti.prototype.removeFront=Ti.prototype.shift;Ti.prototype.removeBack=
Ti.prototype.pop;Ti.prototype.insertFront=Ti.prototype.unshift;Ti.prototype.insertBack=Ti.prototype.push;Ti.prototype.enqueue=Ti.prototype.push;Ti.prototype.dequeue=Ti.prototype.shift;Ti.prototype.toJSON=Ti.prototype.toArray;Object.defineProperty(Ti.prototype,"length",{get:function(){return this._length},set:function(){throw new RangeError("");}});Ti.prototype._checkCapacity=function(b){this._capacity<b&&this._resizeTo(QZ(1.5*this._capacity+16))};Ti.prototype._resizeTo=function(b){var e=this._capacity;
this._capacity=b;b=this._front;var m=this._length;if(b+m>e)for(b=b+m&e-1,m=0;m<b;++m)this[m+e]=this[m+0],this[m+0]=void 0};var RZ=Array.isArray,kka=jka=Ti,lka={},at=Rh.Buffer,mka=Object.prototype.toString,eQ="function"===typeof at.alloc&&"function"===typeof at.allocUnsafe&&"function"===typeof at.from,nka=lka=function(b,e,m){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if("ArrayBuffer"===mka.call(b).slice(8,-1)){e>>>=0;var a=b.byteLength-e;if(0>a)throw new RangeError("'offset' is out of bounds");
if(void 0===m)m=a;else if(m>>>=0,m>a)throw new RangeError("'length' is out of bounds");return eQ?at.from(b.slice(e,e+m)):new at(new Uint8Array(b.slice(e,e+m)))}if("string"===typeof b){m=e;if("string"!==typeof m||""===m)m="utf8";if(!at.isEncoding(m))throw new TypeError('"encoding" must be a valid string encoding');return eQ?at.from(b,m):new at(b,m)}return eQ?at.from(b):new at(b)},eo={};Object.defineProperty(eo,"__esModule",{value:!0});eo.collectConflicts=function(b){var e=XM(b);b=SZ(b.rev_tree);for(var m=
[],a=0,g=b.length;a<g;a++){var l=b[a];l.rev===e||l.opts.deleted||m.push(l.rev)}return m};eo.collectLeaves=SZ;eo.compactTree=function(b){var e=[];RG(b.rev_tree,function(m,a,g,l,q){"available"!==q.status||m||(e.push(a+"-"+g),q.status="missing")});return e};eo.isDeleted=function(b,e){e||(e=XM(b));e=e.substring(e.indexOf("-")+1);b=b.rev_tree.map(taa);for(var m;m=b.pop();){if(m[0]===e)return!!m[1].deleted;b=b.concat(m[2])}};eo.isLocalId=function(b){return/^_local/.test(b)};eo.merge=function(b,e,m){b=WZ(b,
e);m=saa(b.tree,m);return{tree:m.tree,stemmedRevs:m.revs,conflicts:b.conflicts}};eo.revExists=function(b,e){b=b.slice();var m=e.split("-");e=parseInt(m[0],10);m=m[1];for(var a;a=b.pop();){if(a.pos===e&&a.ids[0]===m)return!0;for(var g=a.ids[2],l=0,q=g.length;l<q;l++)b.push({pos:a.pos+1,ids:g[l]})}return!1};eo.rootToLeaf=TZ;eo.traverseRevTree=RG;eo.winningRev=XM;eo.latest=function(b,e){for(var m=e.rev_tree.slice(),a;a=m.pop();){var g=a.pos,l=a.ids,q=l[0],r=l[1];l=l[2];var u=0===l.length;a=a.history?
a.history.slice():[];a.push({id:q,pos:g,opts:r});if(u)for(r=0,u=a.length;r<u;r++){var v=a[r];if(v.pos+"-"+v.id===b)return g+"-"+q}q=0;for(r=l.length;q<r;q++)m.push({pos:g+1,ids:l[q],history:a})}throw Error("Unable to resolve latest revision for id "+e.id+", rev "+b);};var Hl={};Object.defineProperty(Hl,"__esModule",{value:!0});var Ux=Lg,EC=Bm,$Z=SA,Jo=kg,Xn=eo,uaa=XZ("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),
vaa=XZ("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" "));Hl.invalidIdError=Ux.invalidIdError;Hl.normalizeDdocFunctionName=Ux.normalizeDdocFunctionName;Hl.parseDdocFunctionName=Ux.parseDdocFunctionName;Hl.isDeleted=Xn.isDeleted;Hl.isLocalId=Xn.isLocalId;Hl.allDocsKeysQuery=function(b,e){var m={offset:e.skip};return Promise.all(e.keys.map(function(a){var g=Ux.assign({key:a,deleted:"ok"},e);["limit","skip","keys"].forEach(function(l){delete g[l]});
return new Promise(function(l,q){b._allDocs(g,function(r,u){if(r)return q(r);e.update_seq&&void 0!==u.update_seq&&(m.update_seq=u.update_seq);m.total_rows=u.total_rows;l(u.rows[0]||{key:a,error:"not_found"})})})})).then(function(a){m.rows=a;return m})};Hl.parseDoc=ZZ;Hl.preprocessAttachments=function(b,e,m){function a(){g++;b.length===g&&(l?m(l):m())}if(!b.length)return m();var g=0,l;b.forEach(function(q){function r(z){l=z;v++;v===u.length&&a()}var u=q.data&&q.data._attachments?Object.keys(q.data._attachments):
[],v=0;if(!u.length)return a();for(var y in q.data._attachments)q.data._attachments.hasOwnProperty(y)&&yaa(q.data._attachments[y],e,r)})};Hl.processDocs=function(b,e,m,a,g,l,q,r,u){b=b||1E3;var v=r.new_edits,y=new tw.Map,z=0,A=e.length;e.forEach(function(B,G){if(B._id&&Xn.isLocalId(B._id))m[B._deleted?"_removeLocal":"_putLocal"](B,{ctx:g},function(K,J){l[G]=K||J;++z===A&&u&&u()});else{var E=B.metadata.id;y.has(E)?(A--,y.get(E).push([B,G])):y.set(E,[[B,G]])}});y.forEach(function(B,G){function E(){++J<
B.length?K():++z===A&&u&&u()}function K(){var P=B[J],ea=P[0];P=P[1];if(a.has(G))a_(b,a.get(G),ea,l,P,E,q,v);else{var ra=Xn.merge([],ea.metadata.rev_tree[0],b);ea.metadata.rev_tree=ra.tree;ea.stemmedRevs=ra.stemmedRevs||[];ra=Xn.winningRev(ea.metadata);var D=Xn.isDeleted(ea.metadata,ra);"was_delete"in r&&D?(l[P]=Jo.createError(Jo.MISSING_DOC,"deleted"),E()):v&&"missing"===ea.metadata.rev_tree[0].ids[1].status?(ea=Jo.createError(Jo.REV_CONFLICT),l[P]=ea,E()):q(ea,ra,D,D,!1,D?0:1,P,E)}}var J=0;K()})};
Hl.updateDoc=a_;var YD={};Object.defineProperty(YD,"__esModule",{value:!0});var y4=IA&&"object"===typeof IA&&"default"in IA?IA["default"]:IA;YD.safeJsonParse=function(b){try{return JSON.parse(b)}catch(e){return y4.parse(b)}};YD.safeJsonStringify=function(b){try{return JSON.stringify(b)}catch(e){return y4.stringify(b)}};var oka={},pka=FC(Oja),qka=FC(hka),fJ=FC($O),rka=FC(kka),ska=FC(nka),HC=eo,GC=Bm,br=tw;Vx.prototype.get=function(b,e,m){var a=c_(this,b),g=a.get(e);if(g)return Lg.nextTick(function(){m(null,
g)});if(null===g)return Lg.nextTick(function(){m({name:"NotFoundError"})});b.get(e,function(l,q){if(l)return"NotFoundError"===l.name&&a.set(e,null),m(l);a.set(e,q);m(null,q)})};Vx.prototype.batch=function(b){for(var e=0,m=b.length;e<m;e++){var a=b[e],g=c_(this,a.prefix);"put"===a.type?g.set(a.key,a.value):g.set(a.key,null)}this._batch=this._batch.concat(b)};Vx.prototype.execute=function(b,e){for(var m=new br.Set,a=[],g=this._batch.length-1;0<=g;g--){var l=this._batch[g],q=l.prefix.prefix()[0]+"\u00ff"+
l.key;m.has(q)||(m.add(q),a.push(l))}b.batch(a,e)};var ZD=new br.Map,tka={encode:YD.safeJsonStringify,decode:YD.safeJsonParse,buffer:!1,type:"cheap-json"},$D=new Lg.changesHandler,uka=oka=function(b,e){function m(){E.docStore=D.sublevel("document-store",{valueEncoding:tka});E.bySeqStore=D.sublevel("by-sequence",{valueEncoding:"json"});E.attachmentStore=D.sublevel("attach-store",{valueEncoding:"json"});E.binaryStore=D.sublevel("attach-binary-store",{valueEncoding:"binary"});E.localStore=D.sublevel("local-store",
{valueEncoding:"json"});E.metaStore=D.sublevel("meta-store",{valueEncoding:"json"});"object"===typeof b.migrate?b.migrate.doMigrationTwo(D,E,a):a()}function a(){E.metaStore.get("_local_last_update_seq",function(O,L){"undefined"===typeof D._updateSeq&&(D._updateSeq=L||0);E.metaStore.get("_local_doc_count",function(N,aa){D._docCount=N?0:aa;E.metaStore.get("_local_uuid",function(Y,ma){G=Y?Lg.uuid():ma;E.metaStore.put("_local_uuid",G,function(){Lg.nextTick(function(){e(null,B)})})})})})}function g(O){return D.isClosed()?
O(Error("database is closed")):O(null,D._docCount)}function l(O,L){try{O.apply(null,L)}catch(N){L[L.length-1](N)}}function q(){var O=D._queue.peekFront();"read"===O.type?r(O):u(O)}function r(O){var L=[O];O=1;for(var N=D._queue.get(O);"undefined"!==typeof N&&"read"===N.type;)L.push(N),O++,N=D._queue.get(O);var aa=0;L.forEach(function(Y){var ma=Y.args,bb=ma[ma.length-1];ma[ma.length-1]=fJ(function(Qa){bb.apply(null,Qa);++aa===L.length&&Lg.nextTick(function(){L.forEach(function(){D._queue.shift()});
D._queue.length&&q()})});l(Y.fun,ma)})}function u(O){var L=O.args,N=L[L.length-1];L[L.length-1]=fJ(function(aa){N.apply(null,aa);Lg.nextTick(function(){D._queue.shift();D._queue.length&&q()})});l(O.fun,L)}function v(O){return fJ(function(L){D._queue.push({fun:O,args:L,type:"write"});1===D._queue.length&&Lg.nextTick(q)})}function y(O){return fJ(function(L){D._queue.push({fun:O,args:L,type:"read"});1===D._queue.length&&Lg.nextTick(q)})}function z(O){return("0000000000000000"+O).slice(-16)}function A(O,
L){"destroy"in P?P.destroy(O,L):L(null)}b=Lg.clone(b);var B=this,G,E={},K=b.revs_limit,J=b.name;"undefined"===typeof b.createIfMissing&&(b.createIfMissing=!0);var P=b.db,ea=Lg.functionName(P);if(ZD.has(ea))var ra=ZD.get(ea);else ra=new br.Map,ZD.set(ea,ra);if(ra.has(J)){var D=ra.get(J);m()}else ra.set(J,qka(pka(P(J),b,function(O){if(O)return ra.delete(J),e(O);D=ra.get(J);D._docCount=-1;D._queue=new rka;"object"===typeof b.migrate?b.migrate.doMigrationOne(J,D,m):m()})));B._remote=!1;B.type=function(){return"leveldb"};
B._id=function(O){O(null,G)};B._info=function(O){var L={doc_count:D._docCount,update_seq:D._updateSeq,backend_adapter:Lg.functionName(P)};return Lg.nextTick(function(){O(null,L)})};B._get=y(function(O,L,N){L=Lg.clone(L);E.docStore.get(O,function(aa,Y){if(aa||!Y)return N(kg.createError(kg.MISSING_DOC,"missing"));if(L.rev)var ma=L.latest?HC.latest(L.rev,Y):L.rev;else if(ma=YM(Y),"deleted"in Y?Y.deleted:Hl.isDeleted(Y,ma))return N(kg.createError(kg.MISSING_DOC,"deleted"));E.bySeqStore.get(z(Y.rev_map[ma]),
function(bb,Qa){if(!Qa)return N(kg.createError(kg.MISSING_DOC));if("_id"in Qa&&Qa._id!==Y.id)return N(Error("wrong doc returned"));Qa._id=Y.id;if("_rev"in Qa){if(Qa._rev!==ma)return N(Error("wrong doc returned"))}else Qa._rev=ma;return N(null,{doc:Qa,metadata:Y})})})});B._getAttachment=function(O,L,N,aa,Y){var ma=N.content_type;E.binaryStore.get(N.digest,function(bb,Qa){if(bb)return"NotFoundError"!==bb.name?Y(bb):Y(null,aa.binary?GC.blob([""],{type:ma}):"");aa.binary?Y(null,b_(Qa,ma)):Y(null,Qa.toString("base64"))})};
B._bulkDocs=v(function(O,L,N){function aa(Aa,hb){Cc.get(E.attachmentStore,Aa,function(Pb){Pb?(Pb=kg.createError(kg.MISSING_STUB,"unknown stub attachment with digest "+Aa),hb(Pb)):hb()})}function Y(Aa){function hb(){if(++Pb===yd.length)return Aa(od)}var Pb=0,od;yd.forEach(function(nd){if(nd._id&&Hl.isLocalId(nd._id))return hb();Cc.get(E.docStore,nd._id,function(Ac,xe){Ac?"NotFoundError"!==Ac.name&&(od=Ac):Nb.set(nd._id,xe);hb()})})}function ma(Aa,hb){var Pb=Promise.resolve();Aa.forEach(function(od,
nd){Pb=Pb.then(function(){return new Promise(function(Ac,xe){B._doCompactionNoLock(nd,od,{ctx:Cc},function(oe){if(oe)return xe(oe);Ac()})})})});Pb.then(function(){hb()},hb)}function bb(Aa){var hb=new br.Map;Nb.forEach(function(Pb,od){hb.set(od,HC.compactTree(Pb))});ma(hb,Aa)}function Qa(){ma(ac,function(Aa){Aa&&xa(Aa);if(B.auto_compaction)return bb(xa);xa()})}function X(Aa,hb,Pb,od,nd,Ac,xe,oe){function jh(fi){yj++;aj||(fi?(aj=fi,oe(aj)):yj===Hj.length&&pi())}function Kg(fi,bj,Jj,cj){return function(Kj){ha(fi,
"md5-"+Kj,bj,Jj,cj)}}function vi(fi,bj,Jj){return function(cj){SA.binaryMd5(cj,Kg(fi,bj,cj,Jj))}}function pi(){var fi=Aa.metadata.rev_map[Aa.metadata.rev];if(fi)return oe();fi=++gd;Aa.metadata.rev_map[Aa.metadata.rev]=Aa.metadata.seq=fi;fi=[{key:z(fi),value:Aa.data,prefix:E.bySeqStore,type:"put"},{key:Aa.metadata.id,value:Aa.metadata,prefix:E.docStore,type:"put"}];Cc.batch(fi);ec[xe]={ok:!0,id:Aa.metadata.id,rev:Aa.metadata.rev};Nb.set(Aa.metadata.id,Aa.metadata);oe()}Hb+=Ac;var aj=null,yj=0;Aa.metadata.winningRev=
hb;Aa.metadata.deleted=Pb;Aa.data._id=Aa.metadata.id;Aa.data._rev=Aa.metadata.rev;od&&(Aa.data._deleted=!0);Aa.stemmedRevs.length&&ac.set(Aa.metadata.id,Aa.stemmedRevs);var Hj=Aa.data._attachments?Object.keys(Aa.data._attachments):[];for(hb=0;hb<Hj.length;hb++)if(Pb=Hj[hb],od=Aa.data._attachments[Pb],od.stub)V(Aa.data._id,Aa.data._rev,od.digest,jh);else if("string"===typeof od.data){try{var Ij=GC.atob(od.data)}catch(fi){N(kg.createError(kg.BAD_ARG,"Attachment is not a valid base64 string"));return}vi(Aa,
Pb,jh)(Ij)}else zaa(od.data,vi(Aa,Pb,jh));Hj.length||pi()}function V(Aa,hb,Pb,od){function nd(){return new Promise(function(oe,jh){Cc.get(E.attachmentStore,Pb,function(Kg,vi){if(Kg&&"NotFoundError"!==Kg.name)return jh(Kg);oe(vi)})})}function Ac(oe){var jh=[Aa,hb].join("@"),Kg={};oe?oe.refs&&(Kg.refs=oe.refs,Kg.refs[jh]=!0):(Kg.refs={},Kg.refs[jh]=!0);return new Promise(function(vi){Cc.batch([{type:"put",prefix:E.attachmentStore,key:Pb,value:Kg}]);vi(!oe)})}var xe=na[Pb]||Promise.resolve();na[Pb]=
xe.then(function(){return nd().then(Ac).then(function(oe){od(null,oe)},od)})}function ha(Aa,hb,Pb,od,nd){Pb=Aa.data._attachments[Pb];delete Pb.data;Pb.digest=hb;Pb.length=od.length;var Ac=Aa.metadata.id;Aa=Aa.metadata.rev;Pb.revpos=parseInt(Aa,10);V(Ac,Aa,hb,function(xe,oe){if(xe||0===od.length||!oe)return nd(xe);Cc.batch([{type:"put",prefix:E.binaryStore,key:hb,value:ska(od,"binary")}]);nd()})}function xa(Aa){if(Aa)return Lg.nextTick(function(){N(Aa)});Cc.batch([{prefix:E.metaStore,type:"put",key:"_local_last_update_seq",
value:gd},{prefix:E.metaStore,type:"put",key:"_local_doc_count",value:D._docCount+Hb}]);Cc.execute(D,function(hb){if(hb)return N(hb);D._docCount+=Hb;D._updateSeq=gd;$D.notify(J);Lg.nextTick(function(){N(null,ec)})})}var yb=L.new_edits,ec=Array(O.docs.length),Nb=new br.Map,ac=new br.Map,Cc=new Vx,Hb=0,gd=D._updateSeq,yd=O.docs,U=yd.map(function(Aa){if(Aa._id&&Hl.isLocalId(Aa._id))return Aa;Aa=Hl.parseDoc(Aa,yb,B.__opts);Aa.metadata&&!Aa.metadata.rev_map&&(Aa.metadata.rev_map={});return Aa});O=U.filter(function(Aa){return Aa.error});
if(O.length)return N(O[0]);var na={};if(!U.length)return N(null,[]);(function(Aa){var hb=[];yd.forEach(function(nd){nd&&nd._attachments&&Object.keys(nd._attachments).forEach(function(Ac){Ac=nd._attachments[Ac];Ac.stub&&hb.push(Ac.digest)})});if(!hb.length)return Aa();var Pb=0,od;hb.forEach(function(nd){aa(nd,function(Ac){Ac&&!od&&(od=Ac);++Pb===hb.length&&Aa(od)})})})(function(Aa){if(Aa)return N(Aa);Y(function(hb){if(hb)return N(hb);Hl.processDocs(K,U,B,Nb,Cc,ec,X,L,Qa)})})});B._allDocs=function(O,
L){return"keys"in O?Hl.allDocsKeysQuery(this,O):y(function(N,aa){N=Lg.clone(N);g(function(Y,ma){if(Y)return aa(Y);Y={};var bb=N.skip||0;N.startkey&&(Y.gte=N.startkey);N.endkey&&(Y.lte=N.endkey);N.key&&(Y.gte=Y.lte=N.key);if(N.descending){Y.reverse=!0;var Qa=Y.lte;Y.lte=Y.gte;Y.gte=Qa}if("number"===typeof N.limit)var X=N.limit;if(0===X||"gte"in Y&&"lte"in Y&&Y.gte>Y.lte)return Y={total_rows:ma,offset:N.skip,rows:[]},N.update_seq&&(Y.update_seq=D._updateSeq),aa(null,Y);var V=[],ha=E.docStore.readStream(Y),
xa=x4.obj(function(yb,ec,Nb){function ac(yd){var U={id:Cc.id,key:Cc.id,value:{rev:Hb}};if(N.include_docs){U.doc=yd;U.doc._rev=U.value.rev;N.conflicts&&(yd=HC.collectConflicts(Cc),yd.length&&(U.doc._conflicts=yd));for(var na in U.doc._attachments)U.doc._attachments.hasOwnProperty(na)&&(U.doc._attachments[na].stub=!0)}if(!1===N.inclusive_end&&Cc.id===N.endkey)return Nb();if(gd)if("ok"===N.deleted)U.value.deleted=!0,U.doc=null;else return Nb();V.push(U);Nb()}var Cc=yb.value,Hb=YM(Cc),gd="deleted"in Cc?
Cc.deleted:Hl.isDeleted(Cc,Hb);if(!gd){if(0<bb--){Nb();return}if("number"===typeof X&&0>=X--){ha.unpipe();ha.destroy();Nb();return}}else if("ok"!==N.deleted){Nb();return}N.include_docs?E.bySeqStore.get(z(Cc.rev_map[Hb]),function(yd,U){ac(U)}):ac()},function(yb){Promise.resolve().then(function(){if(N.include_docs&&N.attachments)return ZM(V,E,N)}).then(function(){var ec={total_rows:ma,offset:N.skip,rows:V};N.update_seq&&(ec.update_seq=D._updateSeq);aa(null,ec)},aa);yb()}).on("unpipe",function(){xa.end()});
ha.on("error",aa);ha.pipe(xa)})})(O,L)};B._changes=function(O){function L(){O.done=!0;O.return_docs&&O.limit&&O.limit<Y.length&&(Y.length=O.limit);yb.unpipe(ec);yb.destroy();O.continuous||O.cancelled||(O.include_docs&&O.attachments&&O.return_docs?ZM(Y,E,O).then(function(){O.complete(null,{results:Y,last_seq:ma})}):O.complete(null,{results:Y,last_seq:ma}))}O=Lg.clone(O);if(O.continuous){var N=J+":"+Lg.uuid();$D.addListener(J,N,B,O);$D.notify(J);return{cancel:function(){$D.removeListener(J,N)}}}var aa=
O.descending,Y=[],ma=O.since||0,bb=0,Qa={reverse:aa};if("limit"in O&&0<O.limit)var X=O.limit;Qa.reverse||(Qa.start=z(O.since||0));var V=O.doc_ids&&new br.Set(O.doc_ids),ha=Lg.filterChange(O),xa=new br.Map,yb=E.bySeqStore.readStream(Qa),ec=x4.obj(function(Nb,ac,Cc){function Hb(U){function na(hb){var Pb=O.processChange(hb,U,O);Pb.seq=U.seq;hb=ha(Pb);if("object"===typeof hb)return O.complete(hb);if(hb){bb++;if(O.attachments&&O.include_docs)ZM([Pb],E,O).then(function(){O.onChange(Pb)});else O.onChange(Pb);
O.return_docs&&Y.push(Pb)}Cc()}var Aa=YM(U);if(U.seq!==gd)return Cc();ma=gd;if(Aa===yd._rev)return na(yd);E.bySeqStore.get(z(U.rev_map[Aa]),function(hb,Pb){na(Pb)})}if(X&&bb>=X)return L(),Cc();if(O.cancelled||O.done)return Cc();var gd=parseInt(Nb.key,10),yd=Nb.value;if(gd===O.since&&!aa||V&&!V.has(yd._id))return Cc();if(Nb=xa.get(yd._id))return Hb(Nb);E.docStore.get(yd._id,function(U,na){if(O.cancelled||O.done||D.isClosed()||Hl.isLocalId(na.id))return Cc();xa.set(yd._id,na);Hb(na)})},function(Nb){if(O.cancelled)return Nb();
O.return_docs&&O.limit&&O.limit<Y.length&&(Y.length=O.limit);Nb()}).on("unpipe",function(){ec.end();L()});yb.pipe(ec);return{cancel:function(){O.cancelled=!0;L()}}};B._close=function(O){if(D.isClosed())return O(kg.createError(kg.NOT_OPEN));D.close(function(L){L?O(L):(ra.delete(J),O())})};B._getRevisionTree=function(O,L){E.docStore.get(O,function(N,aa){N?L(kg.createError(kg.MISSING_DOC)):L(null,aa.rev_tree)})};B._doCompaction=v(function(O,L,N,aa){B._doCompactionNoLock(O,L,N,aa)});B._doCompactionNoLock=
function(O,L,N,aa){"function"===typeof N&&(aa=N,N={});if(!L.length)return aa();var Y=N.ctx||new Vx;Y.get(E.docStore,O,function(ma,bb){function Qa(Nb){Nb&&(ec=Nb);if(++yb===L.length){if(ec)return aa(ec);V()}}function X(Nb){if(Nb)return aa(Nb);Y.batch(ha);if(N.ctx)return aa();Y.execute(D,aa)}function V(){function Nb(yd){yd&&(Hb=yd);++Cc===ac.length&&X(Hb)}var ac=Object.keys(xa);if(!ac.length)return X();var Cc=0,Hb,gd=new br.Map;L.forEach(function(yd){gd.set(O+"@"+yd,!0)});ac.forEach(function(yd){Y.get(E.attachmentStore,
yd,function(U,na){if(U)return"NotFoundError"===U.name?Nb():Nb(U);U=Object.keys(na.refs||{}).filter(function(hb){return!gd.has(hb)});var Aa={};U.forEach(function(hb){Aa[hb]=!0});U.length?ha.push({key:yd,type:"put",value:{refs:Aa},prefix:E.attachmentStore}):ha=ha.concat([{key:yd,type:"del",prefix:E.attachmentStore},{key:yd,type:"del",prefix:E.binaryStore}]);Nb()})})}if(ma)return aa(ma);ma=L.map(function(Nb){var ac=bb.rev_map[Nb];delete bb.rev_map[Nb];return ac});HC.traverseRevTree(bb.rev_tree,function(Nb,
ac,Cc,Hb,gd){-1!==L.indexOf(ac+"-"+Cc)&&(gd.status="missing")});var ha=[];ha.push({key:bb.id,value:bb,type:"put",prefix:E.docStore});var xa={},yb=0,ec;ma.forEach(function(Nb){ha.push({key:z(Nb),type:"del",prefix:E.bySeqStore});Y.get(E.bySeqStore,z(Nb),function(ac,Cc){if(ac)return"NotFoundError"===ac.name?Qa():Qa(ac);Object.keys(Cc._attachments||{}).forEach(function(Hb){xa[Cc._attachments[Hb].digest]=!0});Qa()})})})};B._getLocal=function(O,L){E.localStore.get(O,function(N,aa){N?L(kg.createError(kg.MISSING_DOC)):
L(null,aa)})};B._putLocal=function(O,L,N){"function"===typeof L&&(N=L,L={});L.ctx?B._putLocalNoLock(O,L,N):B._putLocalWithLock(O,L,N)};B._putLocalWithLock=v(function(O,L,N){B._putLocalNoLock(O,L,N)});B._putLocalNoLock=function(O,L,N){delete O._revisions;var aa=O._rev,Y=O._id,ma=L.ctx||new Vx;ma.get(E.localStore,Y,function(bb,Qa){if(bb&&aa||Qa&&Qa._rev!==aa)return N(kg.createError(kg.REV_CONFLICT));O._rev=aa?"0-"+(parseInt(aa.split("-")[1],10)+1):"0-1";ma.batch([{type:"put",prefix:E.localStore,key:Y,
value:O}]);var X={ok:!0,id:O._id,rev:O._rev};if(L.ctx)return N(null,X);ma.execute(D,function(V){if(V)return N(V);N(null,X)})})};B._removeLocal=function(O,L,N){"function"===typeof L&&(N=L,L={});L.ctx?B._removeLocalNoLock(O,L,N):B._removeLocalWithLock(O,L,N)};B._removeLocalWithLock=v(function(O,L,N){B._removeLocalNoLock(O,L,N)});B._removeLocalNoLock=function(O,L,N){var aa=L.ctx||new Vx;aa.get(E.localStore,O._id,function(Y,ma){if(Y)return"NotFoundError"!==Y.name?N(Y):N(kg.createError(kg.MISSING_DOC));
if(ma._rev!==O._rev)return N(kg.createError(kg.REV_CONFLICT));aa.batch([{prefix:E.localStore,type:"del",key:O._id}]);var bb={ok:!0,id:O._id,rev:"0-0"};if(L.ctx)return N(null,bb);aa.execute(D,function(Qa){if(Qa)return N(Qa);N(null,bb)})})};B._destroy=function(O,L){O=Lg.functionName(P);if(ZD.has(O))var N=ZD.get(O);else return A(J,L);N.has(J)?($D.removeAllListeners(J),N.get(J).close(function(){N.delete(J);A(J,L)})):A(J,L)}},Wx="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:
global,vka={},z4=zi;$M.prototype.next=function(b){var e=this||Wx;if("function"!=typeof b)throw Error("next() requires a callback argument");if(e._ended)return b(Error("cannot call next() after end()"));if(e._nexting)return b(Error("cannot call next() before previous next() has completed"));e._nexting=!0;if("function"==typeof e._next)return e._next(function(){e._nexting=!1;b.apply(null,arguments)});z4.nextTick(function(){e._nexting=!1;b()})};$M.prototype.end=function(b){if("function"!=typeof b)throw Error("end() requires a callback argument");
if((this||Wx)._ended)return b(Error("end() already called on iterator"));(this||Wx)._ended=!0;if("function"==typeof(this||Wx)._end)return this._end(b);z4.nextTick(b)};var A4=vka=$M,kk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,wka={},xka=zi;aw.prototype._serializeKey=function(b){return(this||kk)._db._serializeKey(b)};aw.prototype._serializeValue=function(b){return(this||kk)._db._serializeValue(b)};aw.prototype._checkWritten=function(){if((this||kk)._written)throw Error("write() already called on this batch");
};aw.prototype.put=function(b,e){this._checkWritten();var m=(this||kk)._db._checkKey(b,"key",(this||kk)._db._isBuffer);if(m)throw m;b=this._serializeKey(b);e=this._serializeValue(e);"function"==typeof(this||kk)._put?this._put(b,e):(this||kk)._operations.push({type:"put",key:b,value:e});return this||kk};aw.prototype.del=function(b){this._checkWritten();var e=(this||kk)._db._checkKey(b,"key",(this||kk)._db._isBuffer);if(e)throw e;b=this._serializeKey(b);"function"==typeof(this||kk)._del?this._del(b):
(this||kk)._operations.push({type:"del",key:b});return this||kk};aw.prototype.clear=function(){this._checkWritten();(this||kk)._operations=[];"function"==typeof(this||kk)._clear&&this._clear();return this||kk};aw.prototype.write=function(b,e){this._checkWritten();"function"==typeof b&&(e=b);if("function"!=typeof e)throw Error("write() requires a callback argument");"object"!=typeof b&&(b={});(this||kk)._written=!0;if("function"==typeof(this||kk)._write)return this._write(e);if("function"==typeof(this||
kk)._db._batch)return(this||kk)._db._batch((this||kk)._operations,b,e);xka.nextTick(e)};var yka=wka=aw,Lk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,B4={},zka=Rh.Buffer,Cw=zi;on.prototype.open=function(b,e){var m=this||Lk,a=(this||Lk).status;"function"==typeof b&&(e=b);if("function"!=typeof e)throw Error("open() requires a callback argument");"object"!=typeof b&&(b={});b.createIfMissing=0!=b.createIfMissing;b.errorIfExists=!!b.errorIfExists;"function"==typeof(this||
Lk)._open?((this||Lk).status="opening",this._open(b,function(g){if(g)return m.status=a,e(g);m.status="open";e()})):((this||Lk).status="open",Cw.nextTick(e))};on.prototype.close=function(b){var e=this||Lk,m=(this||Lk).status;if("function"!=typeof b)throw Error("close() requires a callback argument");"function"==typeof(this||Lk)._close?((this||Lk).status="closing",this._close(function(a){if(a)return e.status=m,b(a);e.status="closed";b()})):((this||Lk).status="closed",Cw.nextTick(b))};on.prototype.get=
function(b,e,m){var a;"function"==typeof e&&(m=e);if("function"!=typeof m)throw Error("get() requires a callback argument");if(a=this._checkKey(b,"key"))return m(a);b=this._serializeKey(b);"object"!=typeof e&&(e={});e.asBuffer=0!=e.asBuffer;if("function"==typeof(this||Lk)._get)return this._get(b,e,m);Cw.nextTick(function(){m(Error("NotFound"))})};on.prototype.put=function(b,e,m,a){var g;"function"==typeof m&&(a=m);if("function"!=typeof a)throw Error("put() requires a callback argument");if(g=this._checkKey(b,
"key"))return a(g);b=this._serializeKey(b);e=this._serializeValue(e);"object"!=typeof m&&(m={});if("function"==typeof(this||Lk)._put)return this._put(b,e,m,a);Cw.nextTick(a)};on.prototype.del=function(b,e,m){var a;"function"==typeof e&&(m=e);if("function"!=typeof m)throw Error("del() requires a callback argument");if(a=this._checkKey(b,"key"))return m(a);b=this._serializeKey(b);"object"!=typeof e&&(e={});if("function"==typeof(this||Lk)._del)return this._del(b,e,m);Cw.nextTick(m)};on.prototype.batch=
function(b,e,m){if(!arguments.length)return this._chainedBatch();"function"==typeof e&&(m=e);"function"==typeof b&&(m=b);if("function"!=typeof m)throw Error("batch(array) requires a callback argument");if(!Array.isArray(b))return m(Error("batch(array) requires an array argument"));e&&"object"==typeof e||(e={});for(var a=0,g=b.length,l,q;a<g;a++)if(l=b[a],"object"==typeof l&&((q=this._checkKey(l.type,"type"))||(q=this._checkKey(l.key,"key"))))return m(q);if("function"==typeof(this||Lk)._batch)return this._batch(b,
e,m);Cw.nextTick(m)};on.prototype.approximateSize=function(b,e,m){if(null==b||null==e||"function"==typeof b||"function"==typeof e)throw Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof m)throw Error("approximateSize() requires a callback argument");b=this._serializeKey(b);e=this._serializeKey(e);if("function"==typeof(this||Lk)._approximateSize)return this._approximateSize(b,e,m);Cw.nextTick(function(){m(null,0)})};on.prototype._setupIteratorOptions=
function(b){var e=this||Lk;b=Aw(b);"start end gt gte lt lte".split(" ").forEach(function(m){b[m]&&e._isBuffer(b[m])&&0===b[m].length&&delete b[m]});b.reverse=!!b.reverse;b.keys=0!=b.keys;b.values=0!=b.values;b.limit="limit"in b?b.limit:-1;b.keyAsBuffer=0!=b.keyAsBuffer;b.valueAsBuffer=0!=b.valueAsBuffer;return b};on.prototype.iterator=function(b){"object"!=typeof b&&(b={});b=this._setupIteratorOptions(b);return"function"==typeof(this||Lk)._iterator?this._iterator(b):new A4(this||Lk)};on.prototype._chainedBatch=
function(){return new yka(this||Lk)};on.prototype._isBuffer=function(b){return zka.isBuffer(b)};on.prototype._serializeKey=function(b){return this._isBuffer(b)?b:String(b)};on.prototype._serializeValue=function(b){return null==b?"":this._isBuffer(b)||Cw.browser?b:String(b)};on.prototype._checkKey=function(b,e){if(null===b||void 0===b)return Error(e+" cannot be `null` or `undefined`");if(this._isBuffer(b)&&0===b.length)return Error(e+" cannot be an empty Buffer");if(""===String(b))return Error(e+" cannot be an empty String")};
B4=on;var Aka=B4;var C4={};C4=function(b){return new hA(b||Baa,null)};var vn=hA.prototype;Object.defineProperty(vn,"keys",{get:function(){var b=[];this.forEach(function(e,m){b.push(e)});return b}});Object.defineProperty(vn,"values",{get:function(){var b=[];this.forEach(function(e,m){b.push(m)});return b}});Object.defineProperty(vn,"length",{get:function(){return this.root?this.root._count:0}});vn.insert=function(b,e){for(var m=this._compare,a=this.root,g=[],l=[];a;){var q=m(b,a.key);g.push(a);l.push(q);
a=0>=q?a.left:a.right}g.push(new Ko(0,b,e,null,null,1));for(b=g.length-2;0<=b;--b)a=g[b],g[b]=0>=l[b]?new Ko(a._color,a.key,a.value,g[b+1],a.right,a._count+1):new Ko(a._color,a.key,a.value,a.left,g[b+1],a._count+1);for(b=g.length-1;1<b;--b){l=g[b-1];a=g[b];if(1===l._color||1===a._color)break;e=g[b-2];if(e.left===l)if(l.left===a)if((q=e.right)&&0===q._color)l._color=1,e.right=bw(1,q),e._color=0,--b;else{e._color=0;e.left=l.right;l._color=1;l.right=e;g[b-2]=l;g[b-1]=a;lk(e);lk(l);3<=b&&(b=g[b-3],b.left===
e?b.left=l:b.right=l);break}else if((q=e.right)&&0===q._color)l._color=1,e.right=bw(1,q),e._color=0,--b;else{l.right=a.left;e._color=0;e.left=a.right;a._color=1;a.left=l;a.right=e;g[b-2]=a;g[b-1]=l;lk(e);lk(l);lk(a);3<=b&&(b=g[b-3],b.left===e?b.left=a:b.right=a);break}else if(l.right===a)if((q=e.left)&&0===q._color)l._color=1,e.left=bw(1,q),e._color=0,--b;else{e._color=0;e.right=l.left;l._color=1;l.left=e;g[b-2]=l;g[b-1]=a;lk(e);lk(l);3<=b&&(b=g[b-3],b.right===e?b.right=l:b.left=l);break}else if((q=
e.left)&&0===q._color)l._color=1,e.left=bw(1,q),e._color=0,--b;else{l.left=a.right;e._color=0;e.right=a.left;a._color=1;a.right=l;a.left=e;g[b-2]=a;g[b-1]=l;lk(e);lk(l);lk(a);3<=b&&(b=g[b-3],b.right===e?b.right=a:b.left=a);break}}g[0]._color=1;return new hA(m,g[0])};vn.forEach=function(b,e,m){if(this.root)switch(arguments.length){case 1:return aN(b,this.root);case 2:return bN(e,this._compare,b,this.root);case 3:if(!(0<=this._compare(e,m)))return cN(e,m,this._compare,b,this.root)}};Object.defineProperty(vn,
"begin",{get:function(){for(var b=[],e=this.root;e;)b.push(e),e=e.left;return new Lo(this,b)}});Object.defineProperty(vn,"end",{get:function(){for(var b=[],e=this.root;e;)b.push(e),e=e.right;return new Lo(this,b)}});vn.at=function(b){if(0>b)return new Lo(this,[]);for(var e=this.root,m=[];;){m.push(e);if(e.left){if(b<e.left._count){e=e.left;continue}b-=e.left._count}if(!b)return new Lo(this,m);--b;if(e.right){if(b>=e.right._count)break;e=e.right}else break}return new Lo(this,[])};vn.ge=function(b){for(var e=
this._compare,m=this.root,a=[],g=0;m;){var l=e(b,m.key);a.push(m);0>=l&&(g=a.length);m=0>=l?m.left:m.right}a.length=g;return new Lo(this,a)};vn.gt=function(b){for(var e=this._compare,m=this.root,a=[],g=0;m;){var l=e(b,m.key);a.push(m);0>l&&(g=a.length);m=0>l?m.left:m.right}a.length=g;return new Lo(this,a)};vn.lt=function(b){for(var e=this._compare,m=this.root,a=[],g=0;m;){var l=e(b,m.key);a.push(m);0<l&&(g=a.length);m=0>=l?m.left:m.right}a.length=g;return new Lo(this,a)};vn.le=function(b){for(var e=
this._compare,m=this.root,a=[],g=0;m;){var l=e(b,m.key);a.push(m);0<=l&&(g=a.length);m=0>l?m.left:m.right}a.length=g;return new Lo(this,a)};vn.find=function(b){for(var e=this._compare,m=this.root,a=[];m;){var g=e(b,m.key);a.push(m);if(0===g)return new Lo(this,a);m=0>=g?m.left:m.right}return new Lo(this,[])};vn.remove=function(b){return(b=this.find(b))?b.remove():this};vn.get=function(b){for(var e=this._compare,m=this.root;m;){var a=e(b,m.key);if(0===a)return m.value;m=0>=a?m.left:m.right}};var kq=
Lo.prototype;Object.defineProperty(kq,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(kq,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});kq.clone=function(){return new Lo(this.tree,this._stack.slice())};kq.remove=function(){var b=this._stack;if(0===b.length)return this.tree;var e=Array(b.length),m=b[b.length-1];e[e.length-1]=new Ko(m._color,m.key,m.value,m.left,m.right,m._count);for(var a=b.length-2;0<=a;--a)m=
b[a],e[a]=m.left===b[a+1]?new Ko(m._color,m.key,m.value,e[a+1],m.right,m._count):new Ko(m._color,m.key,m.value,m.left,e[a+1],m._count);m=e[e.length-1];if(m.left&&m.right){b=e.length;for(m=m.left;m.right;)e.push(m),m=m.right;a=e[b-1];e.push(new Ko(m._color,a.key,a.value,m.left,m.right,m._count));e[b-1].key=m.key;e[b-1].value=m.value;for(a=e.length-2;a>=b;--a)m=e[a],e[a]=new Ko(m._color,m.key,m.value,m.left,e[a+1],m._count);e[b-1].left=e[b]}m=e[e.length-1];if(0===m._color)for(a=e[e.length-2],a.left===
m?a.left=null:a.right===m&&(a.right=null),e.pop(),a=0;a<e.length;++a)e[a]._count--;else if(m.left||m.right)for(m.left?d_(m,m.left):m.right&&d_(m,m.right),m._color=1,a=0;a<e.length-1;++a)e[a]._count--;else{if(1===e.length)return new hA(this.tree._compare,null);for(a=0;a<e.length;++a)e[a]._count--;a=e[e.length-2];for(var g,l,q,r=e.length-1;0<=r;--r){b=e[r];if(0===r){b._color=1;break}g=e[r-1];if(g.left===b){l=g.right;if(l.right&&0===l.right._color){l=g.right=Fs(l);q=l.right=Fs(l.right);g.right=l.left;
l.left=g;l.right=q;l._color=g._color;b._color=1;g._color=1;q._color=1;lk(g);lk(l);if(1<r){var u=e[r-2];u.left===g?u.left=l:u.right=l}e[r-1]=l;break}else if(l.left&&0===l.left._color){l=g.right=Fs(l);q=l.left=Fs(l.left);g.right=q.left;l.left=q.right;q.left=g;q.right=l;q._color=g._color;g._color=1;l._color=1;b._color=1;lk(g);lk(l);lk(q);1<r&&(u=e[r-2],u.left===g?u.left=q:u.right=q);e[r-1]=q;break}if(1===l._color)if(0===g._color){g._color=1;g.right=bw(0,l);break}else g.right=bw(0,l);else l=Fs(l),g.right=
l.left,l.left=g,l._color=g._color,g._color=0,lk(g),lk(l),1<r&&(u=e[r-2],u.left===g?u.left=l:u.right=l),e[r-1]=l,e[r]=g,r+1<e.length?e[r+1]=b:e.push(b),r+=2}else{l=g.left;if(l.left&&0===l.left._color){l=g.left=Fs(l);q=l.left=Fs(l.left);g.left=l.right;l.right=g;l.left=q;l._color=g._color;b._color=1;g._color=1;q._color=1;lk(g);lk(l);1<r&&(u=e[r-2],u.right===g?u.right=l:u.left=l);e[r-1]=l;break}else if(l.right&&0===l.right._color){l=g.left=Fs(l);q=l.right=Fs(l.right);g.left=q.right;l.right=q.left;q.right=
g;q.left=l;q._color=g._color;g._color=1;l._color=1;b._color=1;lk(g);lk(l);lk(q);1<r&&(u=e[r-2],u.right===g?u.right=q:u.left=q);e[r-1]=q;break}if(1===l._color)if(0===g._color){g._color=1;g.left=bw(0,l);break}else g.left=bw(0,l);else l=Fs(l),g.left=l.right,l.right=g,l._color=g._color,g._color=0,lk(g),lk(l),1<r&&(u=e[r-2],u.right===g?u.right=l:u.left=l),e[r-1]=l,e[r]=g,r+1<e.length?e[r+1]=b:e.push(b),r+=2}}a.left===m?a.left=null:a.right=null}return new hA(this.tree._compare,e[0])};Object.defineProperty(kq,
"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(kq,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(kq,"index",{get:function(){var b=0,e=this._stack;if(0===e.length)return(b=this.tree.root)?b._count:0;e[e.length-1].left&&(b=e[e.length-1].left._count);for(var m=e.length-2;0<=m;--m)e[m+1]===e[m].right&&(++b,e[m].left&&(b+=e[m].left._count));
return b},enumerable:!0});kq.next=function(){var b=this._stack;if(0!==b.length){var e=b[b.length-1];if(e.right)for(e=e.right;e;)b.push(e),e=e.left;else for(b.pop();0<b.length&&b[b.length-1].right===e;)e=b[b.length-1],b.pop()}};Object.defineProperty(kq,"hasNext",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].right)return!0;for(var e=b.length-1;0<e;--e)if(b[e-1].left===b[e])return!0;return!1}});kq.update=function(b){var e=this._stack;if(0===e.length)throw Error("Can't update empty node!");
var m=Array(e.length),a=e[e.length-1];m[m.length-1]=new Ko(a._color,a.key,b,a.left,a.right,a._count);for(b=e.length-2;0<=b;--b)a=e[b],m[b]=a.left===e[b+1]?new Ko(a._color,a.key,a.value,m[b+1],a.right,a._count):new Ko(a._color,a.key,a.value,a.left,m[b+1],a._count);return new hA(this.tree._compare,m[0])};kq.prev=function(){var b=this._stack;if(0!==b.length){var e=b[b.length-1];if(e.left)for(e=e.left;e;)b.push(e),e=e.right;else for(b.pop();0<b.length&&b[b.length-1].left===e;)e=b[b.length-1],b.pop()}};
Object.defineProperty(kq,"hasPrev",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].left)return!0;for(var e=b.length-1;0<e;--e)if(b[e-1].right===b[e])return!0;return!1}});var Bka=C4,gJ={},hJ=Rh,wu=hJ.Buffer;wu.from&&wu.alloc&&wu.allocUnsafe&&wu.allocUnsafeSlow?gJ=hJ:(e_(hJ,gJ),gJ.Buffer=iA);e_(wu,iA);iA.from=function(b,e,m){if("number"===typeof b)throw new TypeError("Argument must not be a number");return wu(b,e,m)};iA.alloc=function(b,e,m){if("number"!==typeof b)throw new TypeError("Argument must be a number");
b=wu(b);void 0!==e?"string"===typeof m?b.fill(e,m):b.fill(e):b.fill(0);return b};iA.allocUnsafe=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return wu(b)};iA.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return hJ.SlowBuffer(b)};var sf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Cka={},D4=sk,g_=Aka,f_=A4,Mo=Hk,Gaa=Bka,iJ=gJ.Buffer,jA={};D4(SG,f_);SG.prototype._next=function(b){if((this||
sf)._done++>=(this||sf)._limit||!(this||sf)._tree.valid)return Ci(b);var e=(this||sf)._tree.key;var m=(this||sf)._tree.value;if(!this._test(e))return Ci(b);(this||sf).keyAsBuffer&&(e=iJ.from(e));(this||sf).valueAsBuffer&&(m=iJ.from(m));(this||sf)._tree[(this||sf)._incr]();Ci(function(){b(null,e,m)})};SG.prototype._test=function(){return!0};Yn.clearGlobalStore=function(b){b?Object.keys(jA).forEach(function(e){delete jA[e]}):jA={}};D4(Yn,g_);Yn.prototype._open=function(b,e){var m=this||sf;Ci(function(){e(null,
m)})};Yn.prototype._put=function(b,e,m,a){if("undefined"===typeof e||null===e)e="";m=(this||sf)._store[(this||sf)._location].find(b);(this||sf)._store[(this||sf)._location]=m.valid?m.update(e):(this||sf)._store[(this||sf)._location].insert(b,e);Ci(a)};Yn.prototype._get=function(b,e,m){var a=(this||sf)._store[(this||sf)._location].get(b);if("undefined"===typeof a)return Ci(function(){m(Error("NotFound"))});!1===e.asBuffer||this._isBuffer(a)||(a=iJ.from(String(a)));Ci(function(){m(null,a)})};Yn.prototype._del=
function(b,e,m){(this||sf)._store[(this||sf)._location]=(this||sf)._store[(this||sf)._location].remove(b);Ci(m)};Yn.prototype._batch=function(b,e,m){e=-1;for(var a,g,l,q=b.length,r=(this||sf)._store[(this||sf)._location];++e<q;)b[e]&&(a=this._isBuffer(b[e].key)?b[e].key:String(b[e].key),l=r.find(a),"put"===b[e].type?(g=this._isBuffer(b[e].value)?b[e].value:String(b[e].value),r=l.valid?l.update(g):r.insert(a,g)):r=l.remove());(this||sf)._store[(this||sf)._location]=r;Ci(m)};Yn.prototype._iterator=
function(b){return new SG(this||sf,b)};Yn.prototype._isBuffer=function(b){return iJ.isBuffer(b)};Yn.destroy=function(b,e){b="$"+b;b in jA&&delete jA[b];Ci(e)};var Dka=Cka=Yn.default=Yn,Eka={},Haa=Lg,Jaa=h_(uka),Iaa=h_(Dka);dN.valid=function(){return!0};dN.use_prefix=!1;var Fka=Eka=function(b){b.adapter("memory",dN,!0)},kh=lively.FreezerRuntime.recorderFor("lively.storage/database.js");kh.nodejsRequire=function(b){if(!kh.isNode)throw Error("nodejsRequire can only be used in nodejs!");return"undefined"!==
typeof System?System._nodeRequire(b):require("module")._load(b)};kh.nodejs_leveldbPath=function(b){if(b.startsWith("/"))return b;if(b.match(/[^\/]+:\/\//))return b.startsWith("file:")&&(b=b.replace(/^file:\/\//,"")),b;if(!kh.isNode)throw Error("nodejs_leveldbPath called under non-nodejs environment");var e="undefined"!==typeof System&&System.baseURL.startsWith("file://")?System.baseURL.replace("file://",""):kh.GLOBAL.process.cwd(),m=kh.nodejsRequire("path").join,a=kh.nodejsRequire("fs"),g=a.mkdirSync,
l=a.existsSync;a=a.readFileSync;if(b.includes("/"))return m(e,b);try{var q=a(m(e,"../package.json")),r=JSON.parse(q);if("lively.web"===r.name||"lively.next"===r.name){var u=m(e,"../.livelydbs");l(u)||g(u);return m(u,b)}}catch(v){}e=m(e,".livelydbs");l(e)||g(e);return m(e,b)};kh.nodejs_attemptToLoadProperPouchDB=function(){if(!kh.isNode)throw Error("nodejs_attemptToLoadProperPouchDB called under non-nodejs environment");if("undefined"!==typeof System){var b=System._nodeRequire("path").join,e=System.normalizeSync("lively.storage/index.js");
e=System.normalizeSync("pouchdb",e).replace(/file:\/\//,"");b=b(e,"../../lib/index.js");try{return kh.PouchDB=System._nodeRequire(b),kh.PouchDB.plugin(kh.pouchdbAdapterMem),!0}catch(m){return!1}}try{return kh.PouchDB=require("pouchdb"),kh.PouchDB.plugin(kh.pouchdbAdapterMem),!0}catch(m){return!1}};kh._PouchDB=Lfa;kh.pouchdbAdapterMem=Fka;kh.Path=nh;kh.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;kh.isNode="undefined"!==typeof global&&
"undefined"!==typeof process;kh.PouchDB=kh._PouchDB;kh.PouchDB.plugin&&kh.pouchdbAdapterMem&&kh.PouchDB.plugin(kh.pouchdbAdapterMem);kh.createPouchDB=kh.isNode?function(){var b=!1,e=!1;return function(m,a){a=void 0===a?{}:a;b||(b=!0,e=kh.nodejs_attemptToLoadProperPouchDB());a.adapter||(a.adapter=m.startsWith("http")?"http":e?"leveldb":"memory");"leveldb"==a.adapter&&(m=kh.nodejs_leveldbPath(m));a=Object.assign({},a,{name:m});return new kh.PouchDB(a)}}():function(b,e){return new kh.PouchDB(Object.assign({name:b},
e))};var Fg=function(b,e){e=void 0===e?{}:e;this.name=b;this.options=e;this._pouchdb=null};Fg.findDB=function(b){return this.databases.get(b)};Fg.ensureDB=function(b,e){var m=this.findDB(b);if(m)return m;m=new this(b,e);this.databases.set(b,m);b.endsWith("lively.storage-meta")||this.createMetaEntryForDB(b,e);return m};Fg.knownDBs=function(b,e){return kh.Database.ensureDB("lively.storage-meta").getAll().then(function(m){return m.map(function(a){return a._id})})};Fg.createMetaEntryForDB=function(b,
e){var m=kh.Database.ensureDB("lively.storage-meta");m.has(b).then(function(a){return!a&&m.set(b,{created:Date.now(),options:e})})};Fg.knowsDB=function(b){var e=this,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==g.nextAddress?(m=e.ensureDB(b),g.yield(m.docCount(),2)):3!=g.nextAddress?(a=g.yieldResult,0<a?g.return(!0):g.yield(m.destroy(),3)):g.return(!1)})};Fg.prototype.close=function(){this._pouchdb&&(this._pouchdb.close(),delete this._pouchdb)};Fg.prototype.isDestroyed=
function(){return!!this.pouchdb._destroyed};Fg.prototype.destroy=function(b){this.constructor.databases.delete(this.name);return this.isDestroyed()?{ok:!0}:this.pouchdb.destroy(b)};Fg.prototype.update=function(b,e,m,a){a=void 0===a?0:a;var g=this,l,q,r,u,v,y,z,A,B,G,E,K,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){switch(P.nextAddress){case 1:return l=m=m||{},q=void 0===l.ensure?!0:l.ensure,r=void 0===l.retryOnConflict?!0:l.retryOnConflict,u=void 0===l.maxUpdateAttempts?10:l.maxUpdateAttempts,
v={latest:!0},y=g,z=y.pouchdb,P.setCatchFinallyBlocks(2),P.yield(z.get(b,v),4);case 4:A=P.yieldResult;P.leaveTryBlock(3);break;case 2:if(G=P.enterCatchBlock(),"not_found"!==G.name||!q)throw G;case 3:return P.yield(e(A),5);case 5:B=P.yieldResult;if(!B||"object"!==typeof B)return P.return(null);B._id!==b&&(B._id=b);A&&B._rev!==A._rev&&(B._rev=A._rev);P.setCatchFinallyBlocks(6);return P.yield(z.put(B),8);case 8:return E=P.yieldResult,K=E.rev,P.return(Object.assign(B,{_rev:K}));case 6:J=P.enterCatchBlock();
if("conflict"===J.name&&r&&a<u)return P.return(g.update(b,e,m,a+1));throw J;}})};Fg.prototype.mixin=function(b,e,m){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return g.return(a.update(b,function(l){return Object.assign(l||{_id:b},e)},m))})};Fg.prototype.set=function(b,e,m){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return g.return(a.update(b,function(l){return e},m))})};Fg.prototype.get=function(b,e){e=void 0===e?{}:e;var m=this,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==
g.nextAddress)return g.setCatchFinallyBlocks(2),g.yield(m.pouchdb.get(b,e),4);if(2!=g.nextAddress)return g.return(g.yieldResult);a=g.enterCatchBlock();if("not_found"===a.name)return g.return(void 0);throw a;})};Fg.prototype.has=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?m.yield(e.get(b),2):m.return(!!m.yieldResult)})};Fg.prototype.add=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e.pouchdb.post(b))})};
Fg.prototype.docList=function(b){b=void 0===b?{}:b;var e=this,m,a,g,l,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(e.pouchdb.allDocs(b),2);m=y.yieldResult;a=m.rows;g=[];for(l=0;l<a.length;l++)q=a[l],r=q.id,u=q.value,v=u.rev,g.push({id:r,rev:v});return y.return(g)})};Fg.prototype.docCount=function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(b.pouchdb.allDocs(),2);e=m.yieldResult;
return m.return(e.rows.length)})};Fg.prototype.revList=function(b){var e=this,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(e.pouchdb.get(b,{revs:!0}),2);m=q.yieldResult;a=m._revisions;g=a.start;l=a.ids;return q.return(l.map(function(r){return g--+"-"+r}))})};Fg.prototype.getAllRevisions=function(b,e){e=void 0===e?{}:e;var m=this,a,g,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==u.nextAddress?(a=e,g=void 0===
a.skip?0:a.skip,l=void 0===a.limit?0:a.limit,u.yield(m.revList(b),2)):3!=u.nextAddress?(q=u.yieldResult,0<g&&(q=q.slice(g)),0<l&&(q=q.slice(0,l)),r=q.map(function(v){return{rev:v,id:b}}),u.yield(m.getDocuments(r),3)):u.return(u.yieldResult)})};Fg.prototype.getAll=function(b){b=void 0===b?{}:b;var e=this,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield(e.pouchdb.allDocs(Object.assign({},b,{include_docs:!0})),2);m=g.yieldResult;a=m.rows;return g.return(a.map(function(l){return l.doc}))})};
Fg.prototype.setDocuments=function(b,e){var m=this,a,g,l,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(m.pouchdb.bulkDocs(b,e),2);case 2:a=y.yieldResult,g=0;case 3:if(!(g<a.length)){y.jumpTo(5);break}l=b[g];q=a[g];if(q.ok||"conflict"!==q.name||l._rev){y.jumpTo(4);break}return y.yield(m.set(l._id,l),7);case 7:r=y.yieldResult,u=r._id,v=r._rev,a[g]={ok:!0,id:u,rev:v};case 4:g++;y.jumpTo(3);break;case 5:return y.return(a)}})};Fg.prototype.updateDocuments=
function(b,e,m){var a=this,g,l,q,r,u,v,y,z,A,B,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(a.pouchdb.bulkDocs(b,m),2);case 2:g=E.yieldResult,l=[],q={},r=0;case 3:if(!(r<g.length)){if(!l.length){E.jumpTo(8);break}A=Object;B=A.assign;G=q;return E.yield(a.updateDocuments(l,e,m),9)}u=b[r];v=g[r];q[v._id||u._id]=v;if(v.ok||"conflict"!==v.name){E.jumpTo(4);break}return E.yield(a.get(u._id),7);case 7:if(y=E.yieldResult,z=e(y,u))z._id||(z._id=
u._id),z._rev||(z._rev=y._rev),l.push(z);case 4:r++;E.jumpTo(3);break;case 9:q=B.call(A,{},G,{},E.yieldResult);case 8:return E.return(q)}})};Fg.prototype.getDocuments=function(b,e){e=void 0===e?{}:e;var m=this,a,g,l,q,r,u,v,y,z,A,B;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress)return a=e,g=void 0===a.ignoreErrors?!0:a.ignoreErrors,G.yield(m.pouchdb.bulkGet({docs:b}),2);l=G.yieldResult;q=l.results;r=[];for(u=0;u<q.length;u++)for(v=q[u],y=v.docs,z=v.id,console.assert(1===
y.length,"getDocuments: expected only one doc for "+z),A=0;A<y.length;A++)B=y[A],g&&!B.ok||r.push(B.ok||B.error||B);return G.return(r)})};Fg.prototype.query=function(b,e){return this.pouchdb.query(b,e)};Fg.prototype.remove=function(b,e,m){var a=this,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return"undefined"!==typeof e?(g={_id:b,_rev:e},q.jumpTo(2)):q.yield(a.get(b),3);2!=q.nextAddress&&(g=q.yieldResult);l=g;return q.return(l?a.pouchdb.remove(l):void 0)})};
Fg.prototype.removeAll=function(){var b=this,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?(e=b.pouchdb,a.yield(e.allDocs(),2)):3!=a.nextAddress?(m=a.yieldResult,a.yield(Promise.all(m.rows.map(function(g){return e.remove(g.id,g.value.rev)})),3)):a.return(a.yieldResult)})};Fg.prototype.replicateTo=function(b,e){b instanceof kh.Database&&(b=b.pouchdb);return this.pouchdb.replicate.to(b,e)};Fg.prototype.replicateFrom=function(b,e){b instanceof kh.Database&&
(b=b.pouchdb);return this.pouchdb.replicate.from(b,e)};Fg.prototype.sync=function(b,e){b instanceof kh.Database&&(b=b.pouchdb);return this.pouchdb.sync(b,e)};Fg.prototype.getConflicts=function(b){var e=this,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield(e.pouchdb.query("conflict_index/conflict_index",Object.assign({reduce:!1,include_docs:!0,conflicts:!0},b)),2);m=g.yieldResult;a=m.rows;return g.return(a.map(function(l){var q={id:l.id,rev:l.doc._rev,
doc:l.doc};l.doc._conflicts&&(q.conflicts=l.doc._conflicts,delete l.doc._conflicts);return q}))})};Fg.prototype.resolveConflicts=function(b,e){var m=this,a,g,l,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(m.pouchdb.get(b,{conflicts:!0}),2);case 2:return a=y.yieldResult,g=a._conflicts.map(function(z){return{id:b,rev:z}}),y.yield(m.getDocuments(g),3);case 3:l=y.yieldResult,q=a,r=$jscomp.makeIterator(l),u=r.next();case 4:if(u.done){y.jumpTo(6);
break}v=u.value;return y.yield(e(q,v),7);case 7:return(q=y.yieldResult)?y.yield(m.set(b,q),8):y.return(null);case 8:return q=y.yieldResult,y.yield(m.pouchdb.remove(v),5);case 5:u=r.next();y.jumpTo(4);break;case 6:return y.return(q)}})};Fg.prototype.diffWith=function(b){var e=this,m,a,g,l,q,r,u,v,y,z,A,B,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return E.yield(b.docList(),2);if(3!=E.nextAddress)return m=E.yieldResult,E.yield(e.docList(),3);a=E.yieldResult;
g=m.reduce(function(K,J){var P={};return Object.assign(K,(P[J.id]=J.rev,P))},{});l=a.reduce(function(K,J){var P={};return Object.assign(K,(P[J.id]=J.rev,P))},{});q=[];r=[];u=[];for(v in g)y=g[v],(z=l[v])?y!=z&&u.push({right:{id:v,rev:y},left:{id:v,rev:z}}):r.push({id:v,rev:y});for(A in l)B=l[A],(G=g[A])||q.push({id:A,rev:B});return E.return({inLeft:q,inRight:r,changed:u})})};Fg.loadDump=function(b,e){e=void 0===e?{}:e;var m=this,a,g,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==
u.nextAddress?(a=b,g=a.header,l=a.docs,q=e.name||g.name,r=m.ensureDB(q),u.yield(r.setDocuments(l,{new_edits:!1}),2)):u.return(r)})};Fg.prototype.dump=function(b){b=void 0===b?{}:b;var e=this,m,a,g,l,q,r,u,v,y,z,A,B,G,E,K,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){if(1==P.nextAddress)return m=b,a=m.filterFn,g=m.name,l=m.type,q=m.dbInfo,r=e,u=r.name,v=r.pouchdb,z=y=g||u,A=l||v.type(),B=(new Date).toJSON(),G=Object,E=G.assign,P.yield(v.info(),2);if(3!=P.nextAddress)return K={name:z,
db_type:A,start_time:B,db_info:E.call(G,{},P.yieldResult,{db_name:y},q)},P.yield(e.getAll({attachments:!0}),3);J=P.yieldResult;"function"===typeof a&&(J=a(J,K));return P.return({header:K,docs:J})})};Fg.prototype.backup=function(b){b=void 0===b?1:b;var e=this,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==g.nextAddress?(m=e.name+"_backup_"+b,a=e.constructor.ensureDB(m),g.yield(e.replicateTo(a),2)):g.return(a)})};Fg.prototype.migrate=function(b){var e=this,m,a,g,l,q,r;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(e.getAll(),2);if(3!=u.nextAddress){m=u.yieldResult;a=[];g=[];for(l=0;l<m.length;l++)q=m[l],(r=b(q,l))?(r.hasOwnProperty("_id")||(r._id=q._id),r.hasOwnProperty("_rev")&&delete r._rev,a.push(r)):g.push(q);return u.yield(e.setDocuments(a),3)}return u.return({migrated:a.length,unchanged:g.length})})};Fg.prototype.createDesignDocs=function(b){return b.map(this.createDesignDoc)};Fg.prototype.createDesignDoc=
function(b){var e=b.name,m=b.mapFn,a=b.reduceFn,g=b.filterFn;b={_id:"_design/"+e,version:void 0===b.version?1:b.version};g&&kh.Path("filters."+e).set(b,g.toString(),!0);m&&kh.Path("views."+e+".map").set(b,m.toString(),!0);a&&kh.Path("views."+e+".reduce").set(b,a.toString(),!0);return b};Fg.prototype.addDesignDocs=function(b,e){e=void 0===e?!1:e;var m=this,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?(a=m.createDesignDocs(b),l.yield(m.updateDocuments(a,
function(q,r){return!q.hasOwnProperty("version")||r.hasOwnProperty("version")&&r.version>q.version?r:null}),2)):3!=l.nextAddress?(g=l.yieldResult,e?l.yield(Promise.all(a.map(function(q){return m.designDocDoQueryStale(q._id)})),3):l.jumpTo(3)):l.return(g)})};Fg.prototype.addDesignDoc=function(b,e){var m=b.name,a=b.mapFn,g=b.reduceFn,l=b.version;e=void 0===e?!1:e;var q=this,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==v.nextAddress?(r=q.createDesignDoc({name:m,mapFn:a,
reduceFn:g,version:l}),v.yield(q.set(r._id,r),2)):3!=v.nextAddress?(u=v.yieldResult,e?v.yield(q.designDocDoQueryStale(r._id),3):v.jumpTo(3)):v.return(u)})};Fg.prototype.removeDesignDoc=function(b){return this.remove("_design/"+b)};Fg.prototype.designDocDoQueryStale=function(b){b=$jscomp.makeIterator(b.split("/"));b.next();b=b.next().value;return this.query(b,{stale:"update_after"})};$jscomp.global.Object.defineProperties(Fg.prototype,{pouchdb:{configurable:!0,enumerable:!0,get:function(){return this._pouchdb?
this._pouchdb:this._pouchdb=kh.createPouchDB(this.name,this.options)}}});$jscomp.global.Object.defineProperties(Fg,{PouchDB:{configurable:!0,enumerable:!0,get:function(){return kh.PouchDB},set:function(b){kh.PouchDB=b}},databases:{configurable:!0,enumerable:!0,get:function(){return this._databases||(this._databases=new Map)}}});kh.Database=Fg;kh.default=Fg;var ce=lively.FreezerRuntime.recorderFor("lively.storage/objectdb.js");ce.isHash=function(b){return"string"===typeof b&&40===b.length&&b.match(ce.hashRe)};
ce.checkArg=function(b,e,m){if("undefined"===typeof e&&"string"===typeof m&&!m.includes("undefined"))throw Error("parameter "+b+" is undefined");if(null===e&&"string"===typeof m&&!m.includes("null"))throw Error("parameter "+b+" is null");if("string"===typeof m){var a=typeof e,g=e?e.constructor.name:"";if(!m.split("|").some(function(l){return a===l||g===l}))throw Error('parameter "'+b+'" expected to be of type '+m+" but is "+(g||a));}if("function"===typeof m&&(e=m(e))&&e.error)throw Error('check of parameter "'+
b+'" failed: '+e.error);};ce.checkArgs=function(b,e,m){for(var a in e)ce.checkArg(a,b[a],e[a]);if("function"===typeof m&&(e=m(b))&&e.error)throw Error(e.error);return b};ce.Database=Fg;ce.resource=p;ce.obj=Pf;ce.promise=yg;ce.arr=vf;ce.string=vh;ce.Path=nh;ce.parse=Rd;ce.categorizer=$C;ce.sha1=function(){function b(){var l=g.createHash("sha1");return{update:function(q){return l.update(q)},digest:function(){return l.digest("hex")}}}function e(l){function q(P){v[E]|=(255&P)<<K;K?K-=8:(E++,K=24);16===
E&&r()}function r(){for(var P=16;80>P;P++){var ea=v[P-3]^v[P-8]^v[P-14]^v[P-16];v[P]=ea<<1|ea>>>31}var ra,D;ea=y;var O=z,L=A,N=B,aa=G;for(P=0;80>P;P++){20>P?(ra=N^O&(L^N),D=1518500249):40>P?(ra=O^L^N,D=1859775393):60>P?(ra=O&L|N&(O|L),D=2400959708):(ra=O^L^N,D=3395469782);var Y=(ea<<5|ea>>>27)+ra+aa+D+(0|v[P]);aa=N;N=L;L=O<<30|O>>>2;O=ea;ea=Y}y=y+ea|0;z=z+O|0;A=A+L|0;B=B+N|0;G=G+aa|0;for(P=E=0;16>P;P++)v[P]=0}function u(P){for(var ea="",ra=28;0<=ra;ra-=4)ea+=(P>>ra&15).toString(16);return ea}var v,
y=1732584193,z=4023233417,A=2562383102,B=271733878,G=3285377520,E=0,K=24,J=0;return v=l?m:new Uint32Array(80),{update:function(P){if("string"==typeof P){var ea=P.length;J+=8*ea;for(var ra=0;ra<ea;ra++)q(P.charCodeAt(ra))}else for(ea=P.length,J+=8*ea,ra=0;ra<ea;ra++)q(P[ra])},digest:function(){q(128);(14<E||14===E&&24>K)&&r();E=14;K=24;q(0);q(0);q(0xffffffffff<J?J/1099511627776:0);q(4294967295<J?J/4294967296:0);for(var P=24;0<=P;P-=8)q(J>>P);return u(y)+u(z)+u(A)+u(B)+u(G)}}}var m,a,g;return"object"==
typeof process&&"object"==typeof process.versions&&process.versions.node&&"renderer"!==process.__atom_type?(g="undefined"!=typeof System?System._nodeRequire("crypto"):require("crypto"),a=b):(m=new Uint32Array(80),a=e),function(l){if(void 0===l)return a(!1);var q=a(!0);return q.update(l),q.digest()}}();ce.hashRe=/^[0-9a-f]+$/i;ce.objectDBs=ce.objectDBs||new Map;var bh=function(b,e){this.name=b;if(!e.snapshotLocation||!e.snapshotLocation.isResource)throw Error("ObjectDB needs snapshotLocation!");this.snapshotLocation=
e.snapshotLocation;this.__versionDB=this.__commitDB=null};bh.dbList=function(){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(b=ce.Database.ensureDB("internal__objectdb-meta"),e.yield(b.getAll(),2)):e.return(e.yieldResult.map(function(m){return m._id}))})};bh.find=function(b){var e=this,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress){if(m=ce.objectDBs.get(b))return l.return(m);a=ce.Database.ensureDB("internal__objectdb-meta");
return l.yield(a.get(b),2)}return(g=l.yieldResult)?l.return(e.named(b,g)):l.return()})};bh.named=function(b,e){e=void 0===e?{}:e;var m=ce.objectDBs.get(b);if(m)return m;if(!e||!e.snapshotLocation)throw Error("need snapshotLocation");if("string"===typeof e.snapshotLocation)try{e.snapshotLocation=ce.resource(e.snapshotLocation)}catch(a){e.snapshotLocation=ce.resource(System.baseURL).join(e.snapshotLocation)}m=new this(b,e);ce.objectDBs.set(b,m);ce.Database.ensureDB("internal__objectdb-meta").set(b,
Object.assign({},e,{snapshotLocation:e.snapshotLocation.url})).catch(function(a){return console.error("error writing objectdb meta:",a)});return m};bh.prototype.destroy=function(){var b=this,e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return(e=ce.Database.findDB(b.name+"-commits"))?g.yield(e.destroy(),2):g.jumpTo(2);if(4!=g.nextAddress)return(m=ce.Database.findDB(b.name+"-version-graph"))?g.yield(m.destroy(),4):g.jumpTo(4);ce.objectDBs.delete(b.name);a=
ce.Database.ensureDB("internal__objectdb-meta");return g.yield(a.remove(b.name),0)})};bh.prototype.snapshotResourceFor=function(b){var e=b.content.slice(0,2);b=b.content.slice(2);return this.snapshotLocation.join(e+"/"+b+".json")};bh.prototype.snapshotObject=function(b,e,m,a,g,l,q,r){var u=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return v=function(A){return A},z.yield(v(m),2);y=z.yieldResult;return z.return(u.commit(b,e,y,g,l,q,r))})};bh.prototype.loadObject=
function(b,e,m,a,g){var l=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(l.loadSnapshot(b,e,a,g),2);q=u.yieldResult;r=function(v){return v};return u.return(r(q))})};bh.prototype.has=function(b,e){var m=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?a.yield(m.objectStats(b,e),2):a.return(!!a.yieldResult)})};bh.prototype.objects=function(b){var e=this,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return l.yield(e.objectStats(b),2);m=l.yieldResult;if(b)return l.return(Object.keys(m||{}));a={};for(g in m)a[g]=Object.keys(m[g]);return l.return(a)})};bh.prototype.objectStats=function(b,e){var m=this,a,g,l,q,r,u,v,y,z,A,B,G,E,K,J,P,ea,ra,D,O;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:a={};if(g=m.__commitDB){L.jumpTo(2);break}return L.yield(m._commitDB(),3);case 3:g=L.yieldResult;case 2:return l=g,q={reduce:!0,group:!0},b&&e?q.key=b+
"\x00"+e:b&&(q.startkey=b+"\x00",q.endkey=b+"\ufff0"),L.setCatchFinallyBlocks(4),L.yield(l.pouchdb.query("nameWithMaxMinTimestamp_index",q),6);case 6:r=L.yieldResult;u=r.rows;v=$jscomp.makeIterator(u);for(y=v.next();!y.done;y=v.next())A=z=y.value,B=A.key,G=A.value,E=G.count,K=G.max,J=G.min,P=$jscomp.makeIterator(B.split("\x00")),ea=P.next().value,ra=P.next().value,D=a[ea]||(a[ea]={}),D[ra]={count:E,newest:K,oldest:J};L.leaveTryBlock(5);break;case 4:return O=L.enterCatchBlock(),console.error(O),L.return(a);
case 5:return b&&e?L.return((a[b]||{})[e]):b?L.return(a[b]):L.return(a)}})};bh.prototype.getCommits=function(b,e,m,a){m=void 0===m?"HEAD":m;a=void 0===a?Infinity:a;var g=this,l,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.yield(g._log(b,e,m,a),2);case 2:l=v.yieldResult;if(!l.length)return v.return([]);if(q=g.__commitDB){v.jumpTo(3);break}return v.yield(g._commitDB(),4);case 4:q=v.yieldResult;case 3:return r=q,v.yield(r.getDocuments(l.map(function(y){return{id:y}})),
5);case 5:return u=v.yieldResult,v.return(u)}})};bh.prototype.getCommit=function(b){var e=this,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return(m=e.__commitDB)?g.jumpTo(2):g.yield(e._commitDB(),3);2!=g.nextAddress&&(m=g.yieldResult);a=m;return g.return(a.get(b))})};bh.prototype.getCommitsWithIds=function(b){var e=this,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return b.length?(m=e.__commitDB)?g.jumpTo(2):g.yield(e._commitDB(),
3):g.return([]);2!=g.nextAddress&&(m=g.yieldResult);a=m;return g.return(a.getDocuments(b.map(function(l){return{id:l}})))})};bh.prototype.getLatestCommit=function(b,e,m,a){m=void 0===m?"HEAD":m;a=void 0===a?!1:a;var g=this,l,q,r,u,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return l=$jscomp,q=l.makeIterator,A.yield(g._log(b,e,m,1),2);case 2:r=q.call(l,A.yieldResult);u=r.next().value;if(!u)return A.return(null);if(v=g.__commitDB){A.jumpTo(3);break}return A.yield(g._commitDB(),
4);case 4:v=A.yieldResult;case 3:return y=v,A.yield(y.get(u),5);case 5:return(z=A.yieldResult)&&z.deleted&&!a?A.return(null):A.return(z)}})};bh.prototype.commit=function(b,e,m,a,g,l,q){l=void 0===l?"HEAD":l;var r=this,u,v,y,z,A,B,G,E,K,J,P,ea,ra,D,O,L,N,aa,Y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ma){switch(ma.nextAddress){case 1:u=a;v=u.author;y=void 0===u.description?"no description":u.description;z=void 0===u.tags?[]:u.tags;A=u.timestamp;B=void 0===u.message?"":u.message;G=
u.metadata;E=u.preview;if(!b)throw Error("object needs a type");if(!e)throw Error("object needs a name");if(!v)throw Error("Cannot commit "+b+"/"+e+" without user");if(K=r.__versionDB){ma.jumpTo(2);break}return ma.yield(r._versionDB(),3);case 3:K=ma.yieldResult;case 2:return J=K,ma.yield(r.versionGraph(b,e),4);case 4:ra=(ea=(P=ma.yieldResult)?P.refs[l]:null)?[ea]:[];if(q){if(!P)throw Error('Trying to store "'+b+"/"+e+'" on top of expected version '+q+" but no version entry exists!");if(ea!==q)throw Error('Trying to store "'+
b+"/"+e+'" on top of expected version '+q+" but ref "+l+" is of version "+ea+"!");}O=(D=ce.isHash(m))?null:m?JSON.stringify(m):null;L=r._createCommit(b,e,y,z,G,v,A,B,ra,D?null:m,O,g||E,D?m:null);if(!m||D){ma.jumpTo(5);break}N=r.snapshotResourceFor(L);return ma.yield(N.parent().ensureExistance(),6);case 6:return N.canDealWithJSON?ma.yield(N.writeJson(m),5):ma.yield(N.write(O),5);case 5:if(aa=r.__commitDB){ma.jumpTo(11);break}return ma.yield(r._commitDB(),12);case 12:aa=ma.yieldResult;case 11:return Y=
aa,ma.yield(Y.set(L._id,L),13);case 13:return L=ma.yieldResult,P||(P={refs:{},history:{}}),P.refs[l]=L._id,P.history[L._id]=ra,ma.yield(J.set(b+"/"+e,P),14);case 14:return ma.return(L)}})};bh.prototype.loadSnapshot=function(b,e,m,a){a=void 0===a?"HEAD":a;var g=this,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:if(m&&"string"!==typeof m){l=m;u.jumpTo(2);break}if(m){if(q=g.__commitDB){u.jumpTo(6);break}return u.yield(g._commitDB(),7)}return u.yield(g.getLatestCommit(b,
e,a),5);case 5:l=u.yieldResult;u.jumpTo(2);break;case 7:q=u.yieldResult;case 6:return r=q,u.yield(r.get(m),8);case 8:l=u.yieldResult;case 2:if(!l)throw Error("Cannot find commit to loadSnapshot for "+b+"/"+e+" (using "+m+")");return u.return(g.snapshotResourceFor(l).readJson())}})};bh.prototype.revert=function(b,e,m,a){var g=this,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:if(l=g.__versionDB){u.jumpTo(2);break}return u.yield(g._versionDB(),3);
case 3:l=u.yieldResult;case 2:return q=l,u.yield(q.get(b+"/"+e),4);case 4:return r=u.yieldResult,r.refs[m||"HEAD"]=a,delete r.deleted,u.yield(q.set(b+"/"+e,r),5);case 5:return u.return(r)}})};bh.prototype._createCommit=function(b,e,m,a,g,l,q,r,u,v,y,z,A){r=void 0===r?"":r;u=void 0===u?[]:u;!z&&v&&v.preview&&(z=v.preview);return this._createCommitFromSpec({name:e,type:b,timestamp:q||Date.now(),author:{name:l.name,email:l.email,realm:l.realm},tags:a,description:m,preview:z,message:r,content:A||y&&ce.sha1(y)||
null,deleted:!A&&!v,metadata:g,ancestors:u},!0)};bh.prototype._createCommitFromSpec=function(b,e){e=void 0===e?!1:e;if(!b.name)throw Error("commit needs name");if(!b.type)throw Error("commit needs type");if(!b.author)throw Error("commit needs author");if(!b.author.name)throw Error("commit needs author.name");b.timestamp||(b.timestamp=Date.now());b.tags||(b.tags=[]);!e&&b.content&&(e=ce.isHash(b.content),e||(b.content=ce.sha1(b.content)));e=ce.obj.dissoc(b,["preview"]);e=ce.sha1(JSON.stringify(e));
return Object.assign(b,{_id:e})};bh.prototype._commitDB=function(){var b=this,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){if(b.__commitDB)return a.return(b.__commitDB);e=b.name+"-commits";if(m=ce.Database.findDB(e))return a.return(b.__commitDB=m);m=ce.Database.ensureDB(e);return a.yield(m.addDesignDocs(b._commitdb_indexes),2)}return a.return(b.__commitDB=m)})};bh.prototype.close=function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:if(!b.__commitDB){e.jumpTo(2);
break}return e.yield(b.__commitDB.close(),3);case 3:b.__commitDB=null;case 2:if(!b.__versionDB){e.jumpTo(0);break}return e.yield(b.__versionDB.close(),5);case 5:b.__versionDB=null,e.jumpToEnd()}})};bh.prototype.versionGraph=function(b,e){var m=this,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:if(a=m.__versionDB){q.jumpTo(2);break}return q.yield(m._versionDB(),3);case 3:a=q.yieldResult;case 2:return g=a,q.yield(g.get(b+"/"+e),4);case 4:return l=
q.yieldResult,q.return(!l||l.deleted||l._deleted?null:l)}})};bh.prototype._log=function(b,e,m,a){a=void 0===a?Infinity:a;var g=this,l,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(g.versionGraph(b,e),2);l=v.yieldResult;if(!l||l.deleted||l._deleted)return v.return([]);q=l.refs.HEAD;for(r=[];;){if(r.includes(q))throw Error("cyclic version graph???");r.push(q);u=$jscomp.makeIterator(l.history[q]||[]);q=u.next().value;if(!q||r.length>=a)break}return v.return(r)})};
bh.prototype._findTimestampedVersionsOfObjectNamed=function(b,e){e=void 0===e?{}:e;var m=this,a,g,l,q,r,u,v,y,z,A,B;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:a=e;g=void 0===a.include_docs?!0:a.include_docs;l=void 0===a.descending?!0:a.descending;q=void 0===a.startTime?"0".repeat(13):a.startTime;r=void 0===a.endTime?"9".repeat(13):a.endTime;u=b+"\x00"+(l?r:q);v=b+"\x00"+(l?q:r);if(y=m.__commitDB){G.jumpTo(2);break}return G.yield(m._commitDB(),3);case 3:y=
G.yieldResult;case 2:return z=y,G.yield(z.pouchdb.query("nameAndTimestamp_index",Object.assign({},e,{descending:l,include_docs:g,startkey:u,endkey:v})),4);case 4:return A=G.yieldResult,B=A.rows,G.return(g?B.map(function(E){return E.doc}):B.map(function(E){return E.id}))}})};bh.prototype._versionDB=function(){var b=this,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){if(b.__versionDB)return a.return(b.__versionDB);e=b.name+"-version-graph";if(m=ce.Database.findDB(e))return a.return(b.__versionDB=
m);m=ce.Database.ensureDB(e);return a.yield(m.addDesignDocs(b._versiondb_indexes),2)}return a.return(b.__versionDB=m)})};bh.prototype.exportToDir=function(b,e,m,a){m=void 0===m?!1:m;a=void 0===a?!1:a;var g=this,l,q,r,u,v,y,z,A,B,G,E,K,J,P,ea,ra,D,O,L,N,aa,Y,ma,bb,Qa,X,V,ha,xa,yb,ec,Nb,ac,Cc,Hb,gd,yd,U,na,Aa,hb,Pb,od,nd,Ac,xe;return $jscomp.asyncExecutePromiseGeneratorProgram(function(oe){switch(oe.nextAddress){case 1:"string"===typeof b&&(b=ce.resource(b));if(g.__commitDB){oe.jumpTo(2);break}return oe.yield(g._commitDB(),
3);case 3:case 2:if(l=g.__versionDB){oe.jumpTo(4);break}return oe.yield(g._versionDB(),5);case 5:l=oe.yieldResult;case 4:q=l;r=[];if(!e)return oe.yield(q.getAll(),13);u=$jscomp.makeIterator(e);v=u.next();case 8:if(v.done){oe.jumpTo(7);break}z=y=v.value;A=z.name;B=z.type;G=b.join(B).join(A).asDirectory();return oe.yield(g.versionGraph(B,A),11);case 11:return E=oe.yieldResult,K=E.refs,J=E.history,P=Object.keys(J),oe.yield(g.getCommitsWithIds(P),12);case 12:ea=oe.yieldResult;r.push({refs:K,history:J,
currentExportDir:G,commits:ea,name:A,type:B});v=u.next();oe.jumpTo(8);break;case 13:ra=oe.yieldResult,D=$jscomp.makeIterator(ra),O=D.next();case 14:if(O.done){oe.jumpTo(7);break}N=L=O.value;aa=N.refs;Y=N.history;ma=N._id;if(ma.startsWith("_")){oe.jumpTo(15);break}return oe.yield(g.getCommit(aa.HEAD||Object.keys(Y)[0]),17);case 17:return bb=oe.yieldResult,Qa=bb.type,X=bb.name,V=b.join(Qa).join(X).asDirectory(),ha=Object.keys(Y),oe.yield(g.getCommitsWithIds(ha),18);case 18:xa=oe.yieldResult,r.push({refs:aa,
history:Y,currentExportDir:V,commits:xa,name:X,type:Qa});case 15:O=D.next();oe.jumpTo(14);break;case 7:yb={},ec=$jscomp.makeIterator(r),Nb=ec.next();case 19:if(Nb.done){oe.jumpTo(0);break}Cc=ac=Nb.value;Hb=Cc.refs;gd=Cc.history;yb.$jscomp$loop$prop$currentExportDir$1092$2234=Cc.currentExportDir;yd=Cc.commits;U=Cc.name;na=Cc.type;a||(yd=yd.filter(function(jh){return!jh.deleted}));Aa=m?yd.map(function(jh){return function(Kg){if(Kg.deleted||Kg._deleted||!Kg.content)return null;delete Kg._rev;Kg=g.snapshotResourceFor(Kg);
var vi=jh.$jscomp$loop$prop$currentExportDir$1092$2234.join(Kg.parent().name()+"/"+Kg.name());return{from:Kg,to:vi}}}(yb)).filter(Boolean):[];m||yd.forEach(function(jh){delete jh._rev});return oe.yield(yb.$jscomp$loop$prop$currentExportDir$1092$2234.ensureExistance(),22);case 22:return oe.yield(yb.$jscomp$loop$prop$currentExportDir$1092$2234.join("index.json").writeJson({name:U,type:na}),23);case 23:return oe.yield(yb.$jscomp$loop$prop$currentExportDir$1092$2234.join("commits.json").writeJson(yd),
24);case 24:return oe.yield(yb.$jscomp$loop$prop$currentExportDir$1092$2234.join("history.json").writeJson({refs:Hb,history:gd}),25);case 25:hb=$jscomp.makeIterator(Aa),Pb=hb.next();case 26:if(Pb.done){yb={$jscomp$loop$prop$currentExportDir$1092$2234:yb.$jscomp$loop$prop$currentExportDir$1092$2234};Nb=ec.next();oe.jumpTo(19);break}nd=od=Pb.value;Ac=nd.from;xe=nd.to;return oe.yield(Ac.copyTo(xe),27);case 27:Pb=hb.next(),oe.jumpTo(26)}})};bh.prototype.exportToSpecs=function(b,e){e=void 0===e?!1:e;var m=
this,a,g,l,q,r,u,v,y,z,A,B,G,E,K,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){switch(P.nextAddress){case 1:a=[];if(b){P.jumpTo(2);break}b=[];return P.yield(m.objectStats(),3);case 3:for(l in g=P.yieldResult||{},g)for(q in g[l])b.push({type:l,name:q});case 2:r=$jscomp.makeIterator(b),u=r.next();case 4:if(u.done){P.jumpTo(6);break}y=v=u.value;z=y.name;A=y.type;return P.yield(m.versionGraph(A,z),7);case 7:return B=P.yieldResult,G=B.refs,E=B.history,K=Object.keys(E),P.yield(m.getCommitsWithIds(K),
8);case 8:J=P.yieldResult;e||(J=J.filter(function(ea){return!ea.deleted}));J.forEach(function(ea){delete ea._rev});a.push({type:A,name:z,commits:J,history:{refs:G,history:E}});u=r.next();P.jumpTo(4);break;case 6:return P.return(a)}})};bh.prototype.importFromDir=function(b,e,m){function a(B){var G,E,K,J,P,ea,ra,D,O,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:return G=$jscomp,E=G.makeIterator,N.yield(Promise.all([B.join("index.json").readJson(),B.join("commits.json").readJson(),
B.join("history.json").readJson()]),2);case 2:K=E.call(G,N.yieldResult);J=K.next().value;P=J.type;ea=J.name;ra=K.next().value;D=K.next().value;if(!m){O=[];N.jumpTo(3);break}return N.yield(B.dirList(1,{exclude:function(aa){return!aa.isDirectory()}}),4);case 4:O=N.yieldResult;case 3:return L=O,N.return({dir:B,type:P,name:ea,commits:ra,history:D,snapshotDirs:L})}})}e=void 0===e?!1:e;m=void 0===m?!1:m;var g=this,l,q,r,u,v,y,z,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){switch(B.nextAddress){case 1:return B.yield(b.dirList(3,
{exclude:function(G){return!G.isDirectory()&&"index.json"!==G.name()}}),2);case 2:l=B.yieldResult,l=l.filter(function(G){return"index.json"===G.name()}),q=l.map(function(G){return G.parent()}),r=[],u=$jscomp.makeIterator(q),v=u.next();case 3:if(v.done){B.jumpTo(5);break}y=v.value;z=r;A=z.push;return B.yield(a(y),6);case 6:A.call(z,B.yieldResult);v=u.next();B.jumpTo(3);break;case 5:return B.return(g.importFromSpecs(r,e,m))}})};bh.prototype.importFromSpecs=function(b,e,m){e=void 0===e?!1:e;m=void 0===
m?!1:m;var a=this,g,l,q,r,u,v,y,z,A,B,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:if(e){E.jumpTo(2);break}if(g=a.__versionDB){E.jumpTo(3);break}return E.yield(a._versionDB(),4);case 4:g=E.yieldResult;case 3:l=g,q=$jscomp.makeIterator(b),r=q.next();case 5:if(r.done){E.jumpTo(2);break}v=u=r.value;y=v.type;z=v.name;return E.yield(l.get(y+"/"+z),8);case 8:if(E.yieldResult)throw Error("Import failed: object "+y+"/"+z+" already exists and overwrite is not allowed");
r=q.next();E.jumpTo(5);break;case 2:A=$jscomp.makeIterator(b),B=A.next();case 9:if(B.done){E.jumpTo(11);break}G=B.value;return E.yield(a.importFromSpec(G,!0,m),10);case 10:B=A.next();E.jumpTo(9);break;case 11:return E.return(b)}})};bh.prototype.importFromSpec=function(b,e,m){e=void 0===e?!1:e;m=void 0===m?!1:m;var a=this,g,l,q,r,u,v,y,z,A,B,G,E,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){switch(J.nextAddress){case 1:if(g=a.__versionDB){J.jumpTo(2);break}return J.yield(a._versionDB(),
3);case 3:g=J.yieldResult;case 2:l=g;if(q=a.__commitDB){J.jumpTo(4);break}return J.yield(a._commitDB(),5);case 5:q=J.yieldResult;case 4:r=q;u=a;v=u.snapshotLocation;y=b;z=y.type;A=y.name;B=y.commits;G=y.history;E=y.snapshotDirs;if(!(K=!e)){J.jumpTo(6);break}return J.yield(l.get(z+"/"+A),7);case 7:K=J.yieldResult;case 6:if(K)throw Error("Import failed: object "+z+"/"+A+" already exists and overwrite is not allowed");return J.yield(Promise.all([r.setDocuments(B),l.set(z+"/"+A,G)].concat($jscomp.arrayFromIterable(E&&
m?E.map(function(P){return P.copyTo(v.join(P.name()).asDirectory())}):[]))),8);case 8:return J.return(b)}})};bh.prototype.importFromResource=function(b,e,m,a,g){g=void 0===g?!1:g;var l=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return u.yield(m.readJson(),2);case 2:q=u.yieldResult;if(!(r=g)){u.jumpTo(3);break}return u.yield(l.has(b,e),4);case 4:r=u.yieldResult;case 3:if(!r){u.jumpTo(5);break}return u.yield(l.delete(b,e,!1),5);case 5:return u.return(l.commit(b,
e,q,a))}})};bh.prototype.replicateTo=function(b,e,m,a){return(new ce.Synchronization(this,b,e,m,Object.assign({method:"replicateTo"},a))).start()};bh.prototype.replicateFrom=function(b,e,m,a){return(new ce.Synchronization(this,b,e,m,Object.assign({method:"replicateFrom"},a))).start()};bh.prototype.sync=function(b,e,m,a){return(new ce.Synchronization(this,b,e,m,Object.assign({method:"sync"},a))).start()};bh.prototype.getConflicts=function(b,e){function m(v,y){var z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){return 1==
A.nextAddress?A.yield(v.getConflicts({include_docs:!0}),2):3!=A.nextAddress?(z=A.yieldResult,A.yield(Promise.all(z.map(function(B){var G,E,K,J,P,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ra){if(1==ra.nextAddress){G=B;E=G.id;K=G.rev;J=G.conflicts;P=G.doc;if(e&&e[y]&&!e[y][E])return ra.return(null);if(!b)return ra.jumpTo(2);ea=J.map(function(D){return{id:E,rev:D}});return ra.yield(v.getDocuments(ea),3)}2!=ra.nextAddress&&(J=ra.yieldResult);b?ce.obj.dissoc(P,["_conflicts"]):P=null;
return ra.return({id:E,rev:K,conflicts:J,kind:y,doc:P})})})),3)):A.return(A.yieldResult.filter(Boolean))})}var a=this,g,l,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:if(g=a.__commitDB){v.jumpTo(2);break}return v.yield(a._commitDB(),3);case 3:g=v.yieldResult;case 2:l=g;if(q=a.__versionDB){v.jumpTo(4);break}return v.yield(a._versionDB(),5);case 5:q=v.yieldResult;case 4:return r=q,v.yield(m(r,"versions"),6);case 6:return u=v.yieldResult,v.yield(m(l,
"commits"),8);case 8:return v.yield(v.yieldResult,7);case 7:return v.return({versionConflicts:u,commitConflicts:v.yieldResult})}})};bh.prototype.resolveConflict=function(b){var e=this,m,a,g,l,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:m=b;a=m.resolved;g=m.delete;l=m.kind;q=m.id;if("versions"===l){if(v=e.__versionDB){y.jumpTo(7);break}return y.yield(e._versionDB(),8)}if("commits"!==l)throw Error("Unknown conflict kind: "+l);if(u=e.__commitDB){y.jumpTo(5);
break}return y.yield(e._commitDB(),6);case 6:u=y.yieldResult;case 5:r=u;y.jumpTo(3);break;case 8:v=y.yieldResult;case 7:r=v;case 3:return y.yield(r.set(q,a),9);case 9:return y.yield(Promise.all(g.map(function(z){return r.pouchdb.remove(q,z)})),0)}})};bh.prototype.getDiff=function(b,e){var m=this,a,g,l,q,r,u,v,y,z,A,B,G,E,K,J,P,ea,ra,D,O,L,N,aa,Y,ma,bb,Qa,X,V,ha,xa,yb,ec,Nb,ac,Cc,Hb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gd){switch(gd.nextAddress){case 1:a=b;"string"===typeof b&&
(a=ce.Database.ensureDB(b+"-commits"),e=ce.Database.ensureDB(b+"-version-graph"));if(g=m.__commitDB){gd.jumpTo(2);break}return gd.yield(m._commitDB(),3);case 3:g=gd.yieldResult;case 2:l=g;if(q=m.__versionDB){gd.jumpTo(4);break}return gd.yield(m._versionDB(),5);case 5:q=gd.yieldResult;case 4:return r=q,gd.yield(l.diffWith(a),6);case 6:return u=gd.yieldResult,gd.yield(r.diffWith(e),7);case 7:return v=gd.yieldResult,gd.yield(Promise.all(v.inLeft.map(function(yd){var U;return $jscomp.asyncExecutePromiseGeneratorProgram(function(na){return 1==
na.nextAddress?(U=yd.id,na.yield(r.get(yd.id),2)):na.return({id:U,doc:na.yieldResult})})})),8);case 8:return y=gd.yieldResult,z=ce.arr,A=z.groupBy,gd.yield(e.getAll(),9);case 9:return B=A.call(z,gd.yieldResult,function(yd){return yd._id}),gd.yield(Promise.all(v.inRight.map(function(yd){return $jscomp.asyncExecutePromiseGeneratorProgram(function(U){return U.return({id:yd.id,doc:B[yd.id]})})})),10);case 10:return G=gd.yieldResult,gd.yield(Promise.all(v.changed.map(function(yd){var U,na,Aa,hb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pb){return 1==
Pb.nextAddress?(U=Object,na=U.assign,Aa=yd.left,Pb.yield(r.get(yd.left.id),2)):3!=Pb.nextAddress?(hb=Pb.yieldResult,Pb.yield(e.get(yd.right.id),3)):Pb.return(na.call(U,{},Aa,{docA:hb,docB:Pb.yieldResult}))})})),11);case 11:return E=gd.yieldResult,K=ce.arr,J=K.groupBy,gd.yield(a.getAll(),12);case 12:P=J.call(K,gd.yieldResult,function(yd){return yd._id}),ea=[],ra=[],D=[],O=$jscomp.makeIterator(u.inLeft),L=O.next();case 13:if(L.done){gd.jumpTo(15);break}N=L.value;aa=ea;Y=aa.push;return gd.yield(l.get(N.id),
16);case 16:Y.call(aa,gd.yieldResult);L=O.next();gd.jumpTo(13);break;case 15:ma=$jscomp.makeIterator(u.inRight),L=ma.next();case 17:if(L.done){gd.jumpTo(19);break}bb=L.value;Qa=ra;X=Qa.push;return gd.yield(P[bb.id],20);case 20:X.call(Qa,gd.yieldResult);L=ma.next();gd.jumpTo(17);break;case 19:V=$jscomp.makeIterator(u.changed),L=V.next();case 21:if(L.done){gd.jumpTo(23);break}ha=L.value;xa=D;yb=xa.push;return gd.yield(l.get(ha.left.id),24);case 24:return yb.call(xa,gd.yieldResult),ec=D,Nb=ec.push,gd.yield(a.get(ha.right.id),
25);case 25:Nb.call(ec,gd.yieldResult);L=V.next();gd.jumpTo(21);break;case 23:return ac=ea.map(function(yd){return ce.obj.select(yd,["_id","name","type"])}),Cc=ra.map(function(yd){return ce.obj.select(yd,["_id","name","type"])}),Hb=D.map(function(yd){return ce.obj.select(yd,["_id","name","type"])}),gd.return({changed:E,remote:G,local:y,changedCommitTypeAndNames:Hb,remoteCommitTypeAndNames:Cc,localCommitTypeAndNames:ac})}})};bh.prototype.delete=function(b,e,m){m=void 0===m?!0:m;var a=this,g,l,q,r,
u,v,y,z,A,B,G,E,K,J,P,ea,ra,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(O){switch(O.nextAddress){case 1:g=[];l=[];if(q=a.__commitDB){O.jumpTo(2);break}return O.yield(a._commitDB(),3);case 3:q=O.yieldResult;case 2:return r=q,u={include_docs:!0,startkey:b+"\x00"+e+"\x00",endkey:b+"\x00"+e+"\uffff"},O.yield(r.query("nameAndTimestamp_index",u),4);case 4:v=O.yieldResult;y=v.rows;z=$jscomp.makeIterator(y);for(A=z.next();!A.done;A=z.next())G=B=A.value,E=G.doc,E.deleted||E._deleted||!E.content||
g.push(a.snapshotResourceFor(E)),l.push(Object.assign({},E,{_deleted:!0}));if(K=a.__versionDB){O.jumpTo(5);break}return O.yield(a._versionDB(),6);case 6:K=O.yieldResult;case 5:return J=K,O.yield(J.get(b+"/"+e),7);case 7:P=O.yieldResult;ea=P._id;ra=P._rev;D={_id:ea,_rev:ra,_deleted:!0};if(m){O.jumpTo(8);break}return O.yield(r.setDocuments(l),9);case 9:return O.yield(J.setDocuments([D]),10);case 10:Promise.all(g.map(function(L){return L.remove()}));case 8:return O.return({commits:l,history:D,resources:g})}})};
bh.prototype.deleteCommit=function(b,e,m){e=void 0===e?!0:e;m=void 0===m?"HEAD":m;var a=this,g,l,q,r,u,v,y,z,A,B,G,E,K,J,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){switch(ea.nextAddress){case 1:if(b&&"string"!==typeof b){g=b;ea.jumpTo(2);break}if(!b){ea.jumpTo(2);break}if(l=a.__commitDB){ea.jumpTo(4);break}return ea.yield(a._commitDB(),5);case 5:l=ea.yieldResult;case 4:return q=l,ea.yield(q.get(b),6);case 6:g=ea.yieldResult;case 2:if(!g)throw Error("commit needed!");if(r=a.__versionDB){ea.jumpTo(7);
break}return ea.yield(a._versionDB(),8);case 8:r=ea.yieldResult;case 7:u=r;if(v=a.__commitDB){ea.jumpTo(9);break}return ea.yield(a._commitDB(),10);case 10:v=ea.yieldResult;case 9:return y=v,z=g,A=z.name,B=z.type,G=g.deleted||g._deleted||!g.content?[]:[a.snapshotResourceFor(g)],E=[Object.assign({},g,{_deleted:!0})],ea.yield(u.get(B+"/"+A),11);case 11:K=ea.yieldResult;if(!K)throw Error("No history for "+B+"/"+A+"@"+g._id);if(!K.refs[m])throw Error("Cannot delete commit "+B+"/"+A+"@"+g._id+" b/c it is not where ref "+
m+" is pointing!");J=$jscomp.makeIterator(K.history[g._id]||[]);P=J.next().value;if(!P&&1>=Object.keys(K.history).length)K._deleted=!0;else if(P)delete K.history[g._id],K.refs[m]=P;else throw Error("Cannot delete commit "+B+"/"+A+"@"+g._id+" b/c it has no ancestor but there are still other commits!");if(e){ea.jumpTo(12);break}return ea.yield(u.set(B+"/"+A,K),13);case 13:return ea.yield(y.setDocuments(E),14);case 14:return ea.yield(Promise.all(G.map(function(ra){return ra.remove()})),12);case 12:return ea.return({commits:E,
history:K,resources:G})}})};$jscomp.global.Object.defineProperties(bh.prototype,{_commitdb_indexes:{configurable:!0,enumerable:!0,get:function(){return[{name:"name_index",version:4,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name); }'},{name:"nameAndTimestamp_index",version:3,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name + "\x00" + doc.timestamp + "\x00" + doc._id); }'},{name:"nameWithMaxMinTimestamp_index",version:3,mapFn:'function(doc) { emit(doc.type + "\x00" + doc.name, doc.timestamp); }',
reduceFn:"_stats"},{name:"nameTypeFilter",version:9,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames)\n            return !!req.query.onlyTypesAndNames[doc.type + "/" + doc.name];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}},_versiondb_indexes:{configurable:!0,
enumerable:!0,get:function(){return[{name:"nameTypeFilter",version:3,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames) return !!req.query.onlyTypesAndNames[doc._id];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}}});ce.ObjectDB=bh;var Ju=function(b,
e,m,a,g){g=void 0===g?{}:g;this.options=Object.assign({debug:!1,live:!1,method:"sync",replicationFilter:void 0},g);this.state="not started";this.method="";this.fromObjectDB=b;this.remoteCommitDB=e;this.remoteVersionDB=m;this.remoteLocation=a;this.deferred=ce.promise.deferred();this.conflicts=[];this.changes=[];this.errors=[]};Ju.prototype.whenPaused=function(){var b=this;return Promise.resolve().then(function(){return ce.promise.waitFor(function(){return b.isPaused||b.isComplete})}).then(function(){return b})};
Ju.prototype.waitForIt=function(){return this.deferred.promise};Ju.prototype.start=function(){this.isSynchonizing||this._startReplicationAndCopy().catch(function(b){return console.error("Error starting synchronization: ",b)});return this};Ju.prototype._startReplicationAndCopy=function(){function b(Nb){return"paused"===ec&&"paused"===yb&&0>=xa.copyCalls&&0>=xa.copyCallsWaiting?Nb.state="paused":"complete"===ec&&"complete"===yb&&xa.isComplete()?Nb.state="complete":Nb.state="running"}function e(Nb,ac){if(ac.length||
"complete"===yb&&"complete"===ec&&xa.isComplete()){N.cancel();if(ac.length){Nb.state="complete";Nb.errors=ac;V.cancel();ha.cancel();var Cc=Error("Synchronization error:\n  "+ac.join("\n  "));Cc.errors=ac;console.log(Nb+" errored")}else console.log(Nb+" completed");Cc?Nb.deferred.reject(Cc):Nb.deferred.resolve(Nb)}}function m(Nb){if(!Nb.content)return null;var ac=Nb.content.slice(0,2);Nb=Nb.content.slice(2);return ac+"/"+Nb+".json"}var a=this,g,l,q,r,u,v,y,z,A,B,G,E,K,J,P,ea,ra,D,O,L,N,aa,Y,ma,bb,
Qa,X,V,ha,xa,yb,ec;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nb){switch(Nb.nextAddress){case 1:g=a;l=g.fromObjectDB;q=g.remoteCommitDB;r=g.remoteVersionDB;u=g.remoteLocation;v=g.options;y=v.debug;z=void 0===v.live?!1:v.live;A=void 0===v.retry?!1:v.retry;B=v.method;G=v.replicationFilter;E=void 0===v.pushDesignDocToRemote?!1:v.pushDesignDocToRemote;if(K=l.__versionDB){Nb.jumpTo(2);break}return Nb.yield(l._versionDB(),3);case 3:K=Nb.yieldResult;case 2:J=K;if(P=l.__commitDB){Nb.jumpTo(4);
break}return Nb.yield(l._commitDB(),5);case 5:P=Nb.yieldResult;case 4:ea=P;ra=l;D=ra._commitdb_indexes;O=ra._versiondb_indexes;L=ra.snapshotLocation;a.method=B;Y=D.find(function(ac){return"nameTypeFilter"===ac.name});ma=O.find(function(ac){return"nameTypeFilter"===ac.name});if(!E){Nb.jumpTo(6);break}console.log("adding commitNameTypeFilter");return Nb.yield(q.addDesignDoc(Y),7);case 7:return console.log("adding versionNameTypeFilter"),Nb.yield(r.addDesignDoc(ma),6);case 6:return bb={live:z,retry:A},
Qa=Object.assign({},bb),X=Object.assign({},bb),G&&(Qa.filter=eval("("+Y.filterFn+")"),Qa.query_params=G,X.filter=eval("("+ma.filterFn+")"),X.query_params=G),V=ea[B](q,Qa),ha=J[B](r,X),xa={copyCalls:0,copyCallsWaiting:0,nFilesToCopy:0,nFilesCopied:0,stopped:!1,isComplete:function(){return this.stopped||0>=this.copyCalls&&0>=this.copyCallsWaiting}},ec=yb="not started",a.versionReplication=ha,a.commitReplication=V,a.snapshotReplication=xa,aa=q.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),
N=r.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),aa.on("change",function(ac){var Cc=ac.id,Hb=ac.changes;ac=ac.doc._conflicts;y&&console.log("commit changes "+Cc+":",Hb,ac);ac&&(console.log("commit conflict "+Cc+":",Hb,ac),a.conflicts.push({db:"commits",id:Cc,changes:Hb,conflicts:ac}))}),N.on("change",function(ac){var Cc=ac.id,Hb=ac.changes;ac=ac.doc._conflicts;y&&console.log("version changes "+Cc+":",Hb,ac);ac&&(console.log("version conflict "+Cc+":",Hb,ac),a.conflicts.push({db:"versions",
id:Cc,changes:Hb,conflicts:ac}))}),V.on("change",function(ac){var Cc,Hb,gd,yd,U,na,Aa,hb,Pb,od,nd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ac){switch(Ac.nextAddress){case 1:"replicateTo"===B?ac={direction:"push",change:ac}:"replicateFrom"===B&&(ac={direction:"pull",change:ac});Cc=ac;Hb=Cc.direction;gd=Cc.change;yd=gd.docs;console.log(a+" "+("push"===Hb?"send":"received")+" "+yd.length+" commits");Ac.setCatchFinallyBlocks(2,3);na=[];Aa=$jscomp.makeIterator(yd);for(hb=Aa.next();!hb.done;hb=
Aa.next())Pb=hb.value,Pb._id.startsWith("_")||(a.changes.push({direction:Hb,kind:"commits",id:Pb._id,type:Pb.type,name:Pb.name}),(od=m(Pb))&&na.push(od));xa.nFilesToCopy+=na.length;if(!(0<xa.copyCalls)){Ac.jumpTo(5);break}xa.copyCallsWaiting++;return Ac.yield(ce.promise.waitFor(function(){return 0>=xa.copyCalls}),6);case 6:xa.copyCallsWaiting--;case 5:return xa.copyCalls++,b(a),console.log(a+" copying "+na.length+" snapshots..."),Ac.yield(ce.promise.parallel(na.map(function(xe){return function(){var oe=
("push"===Hb?L:u).join(xe),jh=("push"===Hb?u:L).join(xe);return xa.stopped?(console.warn(a+" Stopping copying resources b/c synchronization ended ("+xa.copyCalls+", "+oe.url+" => "+jh.url+")"),Promise.resolve()):jh.exists().then(function(Kg){function vi(pi){pi=void 0===pi?0:pi;return oe.copyTo(jh).catch(function(aj){if(5<=pi)throw aj;return vi(pi+1)})}return Kg?(y&&console.log("Skip copying to "+jh.url+", already exist"),Promise.resolve()):oe.exists().then(function(pi){if(!pi)return console.warn("Skip copying "+
oe.url+", does not exist"),Promise.resolve();y&&console.log(a+" Copying "+oe.url+" => "+jh.url);return vi(0).then(function(aj){xa.nFilesCopied++;xa.stopped||0!==xa.nFilesCopied%10||console.log(a+" copied "+xa.nFilesCopied+" of "+xa.nFilesToCopy+" snapshots");return aj})})})}}),5),7);case 7:console.log(a+" sending files done");case 3:Ac.enterFinallyBlock();xa.copyCalls--;b(a);e(a,U?[U]:[]);Ac.leaveFinallyBlock(0);break;case 2:throw nd=Ac.enterCatchBlock(),console.error("error in commitReplication onChange",
nd),U=nd,nd;}})}).on("paused",function(){yb="paused";b(a);y&&console.log(a+" commit replication paused")}).on("active",function(){yb="active";b(a);y&&console.log(a+" commit replication active")}).on("error",function(ac){yb="complete";b(a);console.error(a+" commit replication error",ac);e(a,[ac])}).on("complete",function(ac){yb="complete";b(a);ac="sync"===B?ac.push.errors.concat(ac.pull.errors):ac.errors;e(a,ac)}),ha.on("change",function(ac){"replicateTo"===B?ac={direction:"push",change:ac}:"replicateFrom"===
B&&(ac={direction:"pull",change:ac});var Cc=ac.direction;ac=ac.change.docs;y&&console.log(a+" "+("push"===Cc?"send":"received")+" "+ac.length+" histories");ac.forEach(function(Hb){Hb._id.startsWith("_")||a.changes.push({direction:Cc,kind:"versions",id:Hb._id})})}).on("paused",function(){ec="paused";b(a);y&&console.log(a+" version replication paused")}).on("active",function(ac){ec="active";b(a);y&&console.log(a+" version replication active",ac)}).on("error",function(ac){ec="complete";b(a);console.error(a+
" version replication error",ac);e(a,[ac])}).on("complete",function(ac){ec="complete";b(a);ac="sync"===B?ac.push.errors.concat(ac.pull.errors):ac.errors;e(a,ac)}),a.state="running",Nb.return(a)}})};Ju.prototype.safeStop=function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?"not started"!==b.state&&b.isSynchonizing?e.yield(b.whenPaused(),2):e.return(b):e.return(b.stop())})};Ju.prototype.stop=function(){if("not started"===this.state||!this.isSynchonizing)return this;
this.commitReplication.cancel();this.versionReplication.cancel();this.snapshotReplication.stopped=!0;return this};Ju.prototype.toString=function(){var b=this.method;return"Synchronization("+this.state+": "+this.fromObjectDB.name+" "+("sync"===b?"<=>":"replicateTo"===b?"=>":"replicateFrom"===b?"<=":"??")+")"};$jscomp.global.Object.defineProperties(Ju.prototype,{isSynchonizing:{configurable:!0,enumerable:!0,get:function(){return this.isPaused||this.isRunning}},isComplete:{configurable:!0,enumerable:!0,
get:function(){return"complete"===this.state}},isRunning:{configurable:!0,enumerable:!0,get:function(){return"running"===this.state}},isPaused:{configurable:!0,enumerable:!0,get:function(){return"paused"===this.state}},changesByTypeAndName:{configurable:!0,enumerable:!0,get:function(){var b={push:{},pull:{}};this.changes.forEach(function(e){var m=e.direction,a=e.id,g=e.kind;if("_"!==a[0]){if("versions"===g)var l=b[m][a]||(b[m][a]=[]);else"commits"===g&&(a=e.type+"/"+e.name,l=b[m][a]||(b[m][a]=[]));
l.push(e)}});return b}}});ce.Synchronization=Ju;var Dy={describe:function(b){function e(r,u){r=r.find(function(A){return A.name===u}).node.value.body;var v=r.body||[],y=(r.comments||[]).find(function(A){return A.end<v[0].start});r={name:u,parameters:[],sideEffect:!1,returns:null,description:""};if(y&&y.text.trim()){y=ce.string.changeIndent(y.text," ",0).split("\n");y=$jscomp.makeIterator(y);for(var z=y.next();!z.done;z=y.next()){z=z.value;if(z.startsWith("ignore-in-doc")){r.description="";break}z.startsWith("side effect:")?
r.sideEffect=JSON.parse(z.split(":")[1]):z.startsWith("returns:")?r.returns=z.split(":")[1].trim():r.description+=z+"\n"}}y=$jscomp.makeIterator(v);for(z=y.next();!z.done;z=y.next())if(z=z.value,"checkArgs"===ce.Path("declarations.0.init.callee.name").get(z)&&(z=ce.Path("declarations.0.id.properties").get(z)))r.parameters=z.map(function(A){return A.key.name});return r}var m=this,a,g,l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:r.setCatchFinallyBlocks(2);
if(m._methodSpecs){r.jumpTo(4);break}return r.yield(lively.modules.module("lively.storage/objectdb.js").source(),5);case 5:a=r.yieldResult,g=ce.parse(a,{withComments:!0}),l=ce.categorizer.findDecls(g),m._methodSpecs=l.filter(function(u){return u.parent&&"ObjectDBInterface"===u.parent.name});case 4:return r.return(b?e(m._methodSpecs,b):m._methodSpecs.map(function(u){return e(m._methodSpecs,u.name)}).filter(Boolean));case 2:return q=r.enterCatchBlock(),r.return("Error in describe "+q)}})},ensureDB:function(b){var e,
m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return e=ce.checkArgs(b,{db:"string",snapshotLocation:"string|Resource"}),m=e.db,a=e.snapshotLocation,l.yield(ce.ObjectDB.find(m),2);if(g=l.yieldResult)return l.return(!1);ce.ObjectDB.named(m,{snapshotLocation:a});return l.return(!0)})},destroyDB:function(b){var e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==g.nextAddress?(e=ce.checkArgs(b,{db:"string"}),m=e.db,g.yield(ce.ObjectDB.find(m),
2)):3!=g.nextAddress?(a=g.yieldResult)?g.yield(a.destroy(),3):g.return(!1):g.return(!0)})},fetchCommits:function(b){var e,m,a,g,l,q,r,u,v,y,z,A,B,G,E,K,J,P,ea,ra,D,O,L,N,aa,Y,ma,bb,Qa,X,V,ha,xa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yb){switch(yb.nextAddress){case 1:return e=ce.checkArgs(b,{db:"string",ref:"string|undefined",type:"string|undefined",typesAndNames:"Array|undefined",knownCommitIds:"object|undefined",includeDeleted:"boolean|undefined",filterFn:"string|undefined"}),
m=e.db,a=e.ref,g=e.type,l=e.typesAndNames,q=e.knownCommitIds,r=e.includeDeleted,u=e.filterFn,yb.yield(ce.ObjectDB.find(m),2);case 2:v=yb.yieldResult;a||(a="HEAD");if(!v)throw Error("db "+m+" does not exist");if(v.__commitDB){yb.jumpTo(3);break}return yb.yield(v._commitDB(),4);case 4:case 3:if(y=v.__versionDB){yb.jumpTo(5);break}return yb.yield(v._versionDB(),6);case 6:y=yb.yieldResult;case 5:z=y;A={};B={};if(l)for(G=A.keys=[],E=$jscomp.makeIterator(l),K=E.next();!K.done;K=E.next())P=J=K.value,ea=
P.type,ra=P.name,D=P.ref,G.push(ea+"/"+ra),D&&(B[ea+"/"+ra]=D);else g&&(A.startkey=g+'/\x00"',A.endkey=g+'/\uffff"');return yb.yield(z.getAll(A),7);case 7:O=yb.yieldResult;L=[];N=$jscomp.makeIterator(O);for(aa=N.next();!aa.done;aa=N.next())Y=aa.value,Y.deleted||Y._deleted||(ma=Y,bb=ma._id,Qa=ma.refs,bb.startsWith("_")||(X=Qa[B[bb]||a]||a,!X||q&&q.hasOwnProperty(X)||L.push(X)));return yb.yield(v.getCommitsWithIds(L),8);case 8:V=yb.yieldResult;r||(V=V.filter(function(ec){return!ec.deleted}));if(u)try{ha=
eval("("+u+")");if("function"!==typeof ha)throw Error(u+" does not eval to a function!");xa=V.filter(ha);if(Array.isArray(xa))V=xa;else throw Error(u+" does not return an array!");}catch(ec){console.error("fetchCommits filterFn failed:",ec)}return yb.return(V)}})},fetchVersionGraph:function(b){var e,m,a,g,l,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return e=ce.checkArgs(b,{db:"string",type:"string",name:"string"}),m=e.db,a=e.type,g=e.name,v.yield(ce.ObjectDB.find(m),
2);if(3!=v.nextAddress){l=v.yieldResult;if(!l)throw Error("db "+m+" does not exist");return v.yield(l.versionGraph(a,g),3)}q=v.yieldResult;r=q.refs;u=q.history;return v.return({refs:r,history:u})})},exists:function(b){var e,m,a,g,l,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return e=ce.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined"}),m=e.db,a=e.type,g=e.name,l=e.ref,v.yield(ce.ObjectDB.find(m),2);if(3!=v.nextAddress)return q=
v.yieldResult,v.yield(q.versionGraph(a,g),3);r=v.yieldResult;if(!r)return v.return({exists:!1,commitId:void 0});l=l||"HEAD";return(u=r.refs[l])?v.return({exists:!0,commitId:u}):v.return({exists:!1,commitId:void 0})})},fetchLog:function(b){var e,m,a,g,l,q,r,u,v,y,z,A,B,G,E,K,J,P,ea,ra,D,O;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:return e=ce.checkArgs(b,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",commit:"string|undefined",
limit:"number|undefined",includeCommits:"boolean|undefined",knownCommitIds:"object|undefined"},function(N){return N.type&&N.name||N.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),m=e.db,a=e.type,g=e.name,l=e.ref,q=e.commit,r=e.limit,u=e.includeCommits,v=e.knownCommitIds,L.yield(ce.ObjectDB.find(m),2);case 2:y=L.yieldResult;z=l||"HEAD";if(!y)throw Error("db "+m+" does not exist");r||(r=Infinity);q||l||(l=z);if(!q){L.jumpTo(3);break}A=q;if(a&&g){L.jumpTo(3);break}return L.yield(y.getCommit(q),
5);case 5:B=L.yieldResult;if(!B)throw Error("fetchLog: specified commit "+q+" but no commit with this id is in the database!");G=B;a=G.type;g=G.name;case 3:return L.yield(y.versionGraph(a,g),6);case 6:E=L.yieldResult;if(!E)throw Error("Unknown object "+a+"/"+g);K=E;J=K.refs;P=K.history;A||(A=J[l]);ea=A;for(ra=[];ra.length<r&&!ra.includes(ea);){ra.push(ea);D=P[ea];if(!D||!D.length)break;O=$jscomp.makeIterator(D);ea=O.next().value}if(!u){L.jumpTo(7);break}v&&(ra=ra.filter(function(N){return!v.hasOwnProperty(N)}));
return L.yield(y.getCommitsWithIds(ra),8);case 8:ra=L.yieldResult;case 7:return L.return(ra)}})},fetchSnapshot:function(b){var e,m,a,g,l,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return e=ce.checkArgs(b,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",commit:"string|undefined"},function(z){return z.type&&z.name||z.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),m=e.db,a=e.type,g=e.name,l=e.ref,
q=e.commit,y.yield(ce.ObjectDB.find(m),2);case 2:r=y.yieldResult;l=l||"HEAD";if(!r)throw Error("db "+m+" does not exist");if(q){y.jumpTo(3);break}return y.yield(r.versionGraph(a,g),4);case 4:u=y.yieldResult;if(!u)throw Error("Unknown object "+a+"/"+g);q=u.refs[l];if(!q)throw Error("Cannot find commit for ref "+l+" of "+a+"/"+g);case 3:return y.yield(r.getCommit(q),5);case 5:v=y.yieldResult;if(!v)throw Error("Cannot find commit "+q);return y.return(r.loadSnapshot(void 0,void 0,v))}})},revert:function(b){var e,
m,a,g,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return e=ce.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined",toCommitId:"string"}),m=e.db,a=e.type,g=e.name,l=e.ref,q=e.toCommitId,u.yield(ce.ObjectDB.find(m),2);r=u.yieldResult;l||(l="HEAD");return u.return(r.revert(a,g,l,q))})},commit:function(b){var e,m,a,g,l,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return e=ce.checkArgs(b,
{db:"string",type:"string",name:"string",ref:"string|undefined",snapshot:"object|string|undefined",preview:"string|undefined",commitSpec:"object",expectedParentCommit:"string|undefined"}),m=e.db,a=e.type,g=e.name,l=e.ref,q=e.expectedParentCommit,r=e.commitSpec,u=e.snapshot,v=e.preview,z.yield(ce.ObjectDB.find(m),2);y=z.yieldResult;l||(l="HEAD");return z.return(y.commit(a,g,u,r,v,l,q))})},exportToSpecs:function(b){var e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return e=
ce.checkArgs(b,{db:"string",nameAndTypes:"Array|undefined",includeDeleted:"boolean|undefined"}),m=e.db,a=e.nameAndTypes,l.yield(ce.ObjectDB.find(m),2);g=l.yieldResult;if(!g)throw Error("db "+m+" does not exist");return l.return(g.exportToSpecs(a))})},exportToDir:function(b){var e,m,a,g,l,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return e=ce.checkArgs(b,{db:"string",url:"string",nameAndTypes:"Array|undefined",copyResources:"boolean|undefined",includeDeleted:"boolean|undefined"}),
m=e.db,a=e.url,g=e.nameAndTypes,l=e.copyResources,q=e.includeDeleted,v.yield(ce.ObjectDB.find(m),2);r=v.yieldResult;if(!r)throw Error("db "+m+" does not exist");try{u=ce.resource(a)}catch(y){u=ce.resource(System.baseURL).join(a)}return v.return(r.exportToDir(u,g,l,q))})},importFromDir:function(b){var e,m,a,g,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return e=ce.checkArgs(b,{db:"string",url:"string",overwrite:"boolean|undefined",copyResources:"boolean|undefined"}),
m=e.db,a=e.url,g=e.overwrite,l=e.copyResources,u.yield(ce.ObjectDB.find(m),2);q=u.yieldResult;if(!q)throw Error("db "+m+" does not exist");try{r=ce.resource(a)}catch(v){r=ce.resource(System.baseURL).join(a)}return u.return(q.importFromDir(r,g,l))})},importFromSpecs:function(b){var e,m,a,g,l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return e=ce.checkArgs(b,{db:"string",specs:"object",overwrite:"boolean|undefined",copyResources:"boolean|undefined"}),m=e.db,
a=e.specs,g=e.overwrite,l=e.copyResources,r.yield(ce.ObjectDB.find(m),2);q=r.yieldResult;if(!q)throw Error("db "+m+" does not exist");return r.return(q.importFromSpecs(a,g,l))})},importFromResource:function(b){var e,m,a,g,l,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return e=ce.checkArgs(b,{db:"string",type:"string",name:"string",url:"string",commitSpec:"object",purgeHistory:"boolean|undefined"}),m=e.db,a=e.type,g=e.name,l=e.url,q=e.commitSpec,r=e.purgeHistory,
y.yield(ce.ObjectDB.find(m),2);u=y.yieldResult;if(!u)throw Error("db "+m+" does not exist");try{v=ce.resource(l)}catch(z){v=ce.resource(System.baseURL).join(l)}return y.return(u.importFromResource(a,g,v,q,r))})},delete:function(b){var e,m,a,g,l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return e=ce.checkArgs(b,{db:"string",type:"string",name:"string",dryRun:"boolean|undefined"}),m=e.db,a=e.type,g=e.name,l=e.dryRun,r.yield(ce.ObjectDB.find(m),2);q=r.yieldResult;
return r.return(q.delete(a,g,"undefined"===typeof l||l))})},deleteCommit:function(b){var e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return e=ce.checkArgs(b,{db:"string",commit:"string",dryRun:"boolean|undefined"}),m=e.db,a=e.commit,g=e.dryRun,q.yield(ce.ObjectDB.find(m),2);l=q.yieldResult;return q.return(l.deleteCommit(a,"undefined"===typeof g||g))})},fetchConflicts:function(b){var e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==
q.nextAddress)return e=ce.checkArgs(b,{db:"string",includeDocs:"boolean|undefined",only:"object|undefined"}),m=e.db,a=e.includeDocs,g=e.only,q.yield(ce.ObjectDB.find(m),2);l=q.yieldResult;return q.return(l.getConflicts(a,g))})},resolveConflict:function(b){var e,m,a,g,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return e=ce.checkArgs(b,{db:"string",id:"string",kind:"string",delete:"Array",resolved:"object"}),m=e.db,a=e.resolved,g=e.delete,l=e.kind,q=e.id,
u.yield(ce.ObjectDB.find(m),2);r=u.yieldResult;return u.return(r.resolveConflict({resolved:a,delete:g,kind:l,id:q}))})},fetchDiff:function(b){var e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return e=ce.checkArgs(b,{db:"string",otherDB:"string"}),m=e.db,a=e.otherDB,l.yield(ce.ObjectDB.find(m),2);g=l.yieldResult;return l.return(g.getDiff(a))})},synchronize:function(b){var e,m,a,g,l,q,r,u,v,y,z,A,B;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:return e=
ce.checkArgs(b,{db:"string",otherDB:"string",otherDBSnapshotLocation:"string|undefined",onlyTypesAndNames:"object|undefined",method:"string|undefined"}),m=e.db,a=e.otherDB,g=e.otherDBSnapshotLocation,l=e.onlyTypesAndNames,q=e.method,G.yield(ce.ObjectDB.find(m),2);case 2:return g||(g=a.replace(/\/$/,"")+"/snapshots"),q||(q="replicateTo"),G.yield(ce.ObjectDB.find(m),3);case 3:return r=G.yieldResult,G.yield(ce.ObjectDB.named(a,{snapshotLocation:g}),4);case 4:return u=G.yieldResult,G.yield(u._commitDB(),
5);case 5:return v=G.yieldResult,G.yield(u._versionDB(),6);case 6:return y=G.yieldResult,z=u.snapshotLocation,A={replicationFilter:l?{onlyTypesAndNames:l}:void 0,retry:!0,live:!0},B=r[q](v,y,z,A),G.yield(B.whenPaused(),7);case 7:return G.yield(B.safeStop(),8);case 8:return G.yield(B.waitForIt(),9);case 9:return G.return(ce.obj.select(B,["state","method","conflicts","errors","changesByTypeAndName"]))}})}};ce.ObjectDBInterface=Dy;ce.ObjectDBInterface=Dy;ce.ObjectDBInterface=Dy;var dj=function(b){this.serverURL=
b=void 0===b?document.location.origin+"/objectdb/":b};dj.prototype._processResponse=function(b){var e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return e=b.headers.get("content-type"),g.yield(b.text(),2);m=g.yieldResult;if("application/json"===e)try{a=JSON.parse(m)}catch(l){}if(!b.ok||a&&a.error)throw Error(a&&a.error||m||b.statusText);return g.return(a||m)})};dj.prototype._GET=function(b,e){e=void 0===e?{}:e;var m=this,a,g,l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==
r.nextAddress?(a=Object.keys(e).map(function(u){var v=e[u];"object"===typeof v&&(v=JSON.stringify(v));return u+"="+encodeURIComponent(v)}).join("&"),g=m.serverURL+b+"?"+a,l=m,q=l._processResponse,r.yield(fetch(g),2)):r.return(q.call(l,r.yieldResult))})};dj.prototype._POST=function(b,e){e=void 0===e?{}:e;var m=this,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?(a=m.serverURL+b,g=m,l=g._processResponse,q.yield(fetch(a,{method:"POST",body:JSON.stringify(e),
headers:{"content-type":"application/json"}}),2)):q.return(l.call(g,q.yieldResult))})};dj.prototype.describe=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("describe",b))})};dj.prototype.ensureDB=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("ensureDB",b))})};dj.prototype.destroyDB=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("destroyDB",
b))})};dj.prototype.fetchCommits=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("fetchCommits",b))})};dj.prototype.fetchVersionGraph=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("fetchVersionGraph",b))})};dj.prototype.exists=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("exists",b))})};dj.prototype.fetchLog=function(b){var e=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("fetchLog",b))})};dj.prototype.fetchSnapshot=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("fetchSnapshot",b))})};dj.prototype.revert=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("revert",b))})};dj.prototype.commit=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("commit",
b))})};dj.prototype.exportToSpecs=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("exportToSpecs",b))})};dj.prototype.exportToDir=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("exportToDir",b))})};dj.prototype.importFromDir=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("importFromDir",b))})};dj.prototype.importFromSpecs=
function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("importFromSpecs",b))})};dj.prototype.importFromResource=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("importFromResource",b))})};dj.prototype.delete=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("delete",b))})};dj.prototype.deleteCommit=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("deleteCommit",
b))})};dj.prototype.fetchConflicts=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("fetchConflicts",b))})};dj.prototype.resolveConflict=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("resolveConflict",b))})};dj.prototype.fetchDiff=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("fetchDiff",b))})};dj.prototype.synchronize=
function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("synchronize",b))})};ce.ObjectDBHTTPInterface=dj;ce.default=bh;var ej=lively.FreezerRuntime.recorderFor("lively.storage/storage-resource.js");ej.applyExclude=function(b,e){return e?"string"===typeof e?!b.url.includes(e):"function"===typeof e?!e(b):e instanceof RegExp?!e.test(b.url):!0:!0};ej.Resource=jg;ej.Database=Fg;ej.debug=!1;ej.slashRe=/\//g;var fQ=function(){return ej.Database.apply(this,
arguments)||this};$jscomp.inherits(fQ,ej.Database);fQ.ensureDB=function(b,e){return ej.Database.ensureDB.call(this,"lively.storage-"+b,e)};ej.StorageDatabase=fQ;var To=function(){return ej.Resource.apply(this,arguments)||this};$jscomp.inherits(To,ej.Resource);To.prototype.read=function(){var b=this,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return ej.debug&&console.log("["+b+"] read"),a.yield(b.db.get(b.pathWithoutQuery()),2);m=(e=a.yieldResult)&&e.content;
return a.return(m?"string"===typeof m?m:JSON.stringify(m):"")})};To.prototype.readJson=function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(b.read(),2);e=m.yieldResult;return m.return("string"===typeof e?JSON.parse(e):e)})};To.prototype.write=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress){ej.debug&&console.log("["+e+"] write");b||(b="");if(e.isDirectory())throw Error("Cannot write into a directory! ("+
e.url+")");return m.yield(e.db.update(e.pathWithoutQuery(),function(a){if(a&&a.isDirectory)throw Error(e.url+" already exists and is a directory (cannot write into it!)");var g=Date.now();return a?Object.assign({},a,{lastModified:g,size:b.length,content:b}):{etag:void 0,type:void 0,contentType:void 0,user:void 0,group:void 0,mode:void 0,lastModified:g,created:g,size:"string"===typeof b?b.length:0,content:b}}),2)}return m.return(e)})};To.prototype.writeJson=function(b){return this.write(b)};To.prototype.mkdir=
function(){var b=this,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){ej.debug&&console.log("["+b+"] mkdir");if(!b.isDirectory())throw Error("Cannot mkdir a file! ("+b.url+")");return a.yield(b.db.get(b.pathWithoutQuery()),2)}if(3!=a.nextAddress){if(e=a.yieldResult){if(!e.isDirectory)throw Error(b.url+" already exists and is a file (cannot mkdir it!)");return a.return(b)}m=Date.now();return a.yield(b.db.set(b.pathWithoutQuery(),{etag:void 0,type:void 0,contentType:void 0,
user:void 0,group:void 0,mode:void 0,lastModified:m,created:m,isDirectory:!0}),3)}return a.return(b)})};To.prototype.exists=function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return ej.debug&&console.log("["+b+"] exists"),(e=b.isRoot())?m.jumpTo(2):m.yield(b.db.get(b.pathWithoutQuery()),3);2!=m.nextAddress&&(e=!!m.yieldResult);return m.return(e)})};To.prototype.remove=function(){var b=this,e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==
g.nextAddress?(ej.debug&&console.log("["+b+"] remove"),e=b.pathWithoutQuery(),m=b.db,g.yield(m.docList({startkey:e,endkey:e+"\uffff"}),2)):3!=g.nextAddress?(a=g.yieldResult,g.yield(m.setDocuments(a.map(function(l){return{_id:l.id,_rev:l.rev,_deleted:!0}})),3)):g.return(b)})};To.prototype.readProperties=function(){ej.debug&&console.log("["+this+"] readProperties");return this.db.get(this.pathWithoutQuery())};To.prototype.dirList=function(b,e){b=void 0===b?1:b;e=void 0===e?{}:e;var m=this,a,g,l,q,r,
u,v,y,z,A,B,G,E,K,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){if(1==P.nextAddress){ej.debug&&console.log("["+m+"] dirList");if(!m.isDirectory())return P.return(m.asDirectory().dirList(b,e));a=e;g=a.exclude;l=m.pathWithoutQuery();q=[];return P.yield(m.db.getAll({startkey:l,endkey:l+"\uffff"}),2)}r=P.yieldResult;"infinity"===b&&(b=Infinity);u={};for(v=0;v<r.length;u={$jscomp$loop$prop$dirToChild$2236:u.$jscomp$loop$prop$dirToChild$2236},v++)if(z=y=r[v],A=z._id,A.startsWith(l)&&
l!==A)if(B=A.slice(l.length),G=B.includes("/")?B.match(ej.slashRe).length+1:1,G>b)u.$jscomp$loop$prop$dirToChild$2236=m.join(B.split("/").slice(0,b).join("/")+"/"),q.some(function(ea){return function(ra){return ra.equals(ea.$jscomp$loop$prop$dirToChild$2236)}}(u))||q.push(u.$jscomp$loop$prop$dirToChild$2236);else if(E=m.join(B),!g||ej.applyExclude(E,g))for(q.push(E),K="created lastModified mode group user contentType type etag size".split(" "),J=0;J<K.length;J++)E[K[J]]=y[K[J]];return P.return(q)})};
$jscomp.global.Object.defineProperties(To.prototype,{canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!0}},db:{configurable:!0,enumerable:!0,get:function(){return this._db||(this._db=ej.StorageDatabase.ensureDB(this.host()))}}});ej.LivelyStorageResource=To;var gQ={name:"lively.storage",matches:function(b){return b.startsWith("lively.storage:")},resourceClass:ej.LivelyStorageResource};ej.resourceExtension=gQ;ej.resourceExtension=gQ;ej.resourceExtension=gQ;ej.registerExtension=w;
ej.registerExtension(ej.resourceExtension);ej.default=To;var qr=lively.FreezerRuntime.recorderFor("lively.storage/index.js");qr.default=Fg;qr.Database=Fg;qr.ObjectDB=bh;qr.ObjectDBInterface=Dy;qr.ObjectDBHTTPInterface=dj;qr.ObjectDB=bh;qr.ObjectDB=bh;qr.ObjectDBInterface=Dy;qr.ObjectDBInterface=Dy;qr.ObjectDBHTTPInterface=dj;qr.ObjectDBHTTPInterface=dj;var Gka=Object.freeze({__proto__:null,Database:Fg,ObjectDB:bh,ObjectDBInterface:Dy,ObjectDBHTTPInterface:dj}),Cg=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js");
Cg.convertToSerializableCommit=eN;Cg.ensureCommitInfo=IC;Cg.ObjectDBHTTPInterface=dj;Cg.Database=Fg;Cg.loadMorphFromSnapshot=ps;Cg.createMorphSnapshot=nx;Cg.resource=p;Cg.obj=Pf;Cg.Path=nh;Cg.arr=vf;Cg.string=vh;Cg.morphicDBs=Cg.morphicDBs||(Cg.morphicDBs=new Map);Cg.defaultServerURL=("undefined"!==typeof document?document.location.origin:"http://localhost:9001")+"/objectdb/";Cg.convertToSerializableCommit=eN;Cg.convertToSerializableCommit=eN;Cg.ensureCommitInfo=IC;Cg.ensureCommitInfo=IC;var hQ=function(b){var e=
lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),m=e.hasOwnProperty("MorphicDB")&&"function"===typeof e.MorphicDB?e.MorphicDB:e.MorphicDB=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){var l=g.snapshotLocation;g=g.serverURL;this.name=a;this.serverURL=g;this.snapshotLocation=l||a+"/snapshots/";this.httpDB=new Cg.ObjectDBHTTPInterface(g);
this._initialized=!1}},{key:"__serialize__",value:function(){return{__expr__:'MorphicDB.named("'+this.name+'", {snapshotLocation: "'+this.snapshotLocation+'", serverURL: "'+this.serverURL+'"})',bindings:{"lively.morphic/morphicdb/index.js":["MorphicDB"]}}}},{key:"initializeIfNecessary",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return a._initialized?g.return():g.yield(a.ensureDB(),2);a._initialized=!0;g.jumpToEnd()})}},{key:"snapshotResourceFor",
value:function(a){var g=a.content.slice(0,2);a=a.content.slice(2);return Cg.resource(System.decanonicalize(this.snapshotLocation)).join(g+"/"+a+".json")}},{key:"ensureDB",value:function(){return this.httpDB.ensureDB({db:this.name,snapshotLocation:this.snapshotLocation})}},{key:"destroyDB",value:function(){this._initialized=!1;return this.httpDB.destroyDB({db:this.name})}},{key:"latestCommits",value:function(a,g){a=void 0===a?"world":a;g=void 0===g?!1:g;var l=this,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==
v.nextAddress)return v.yield(l.initializeIfNecessary(),2);q=l;r=q.name;u={};return v.return(l.httpDB.fetchCommits({db:r,type:a,ref:"HEAD",knownCommitIds:u,includeDeleted:g}))})}},{key:"fetchCommit",value:function(a,g,l){var q=this,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(q.initializeIfNecessary(),2);if(3!=v.nextAddress)return r=[{type:a,name:g,ref:l}],v.yield(q.httpDB.fetchCommits({db:q.name,ref:l,type:a,typesAndNames:r,knownCommitIds:{}}),
3);u=v.yieldResult;return v.return(Cg.convertToSerializableCommit(u[0]))})}},{key:"fetchSnapshot",value:function(a,g,l,q){var r=this,u=arguments,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return v=a,1===u.length&&v.type&&v.name&&(a=v.type,g=v.name,l=v._id),A.yield(r.initializeIfNecessary(),2);y=r;z=y.name;return A.return(r.httpDB.fetchSnapshot({db:z,type:a,name:g,ref:q,commit:l}))})}},{key:"exists",value:function(a,g,l){var q=this,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==
v.nextAddress)return v.yield(q.initializeIfNecessary(),2);r=q;u=r.name;return v.return(q.httpDB.exists({db:u,type:a,name:g,ref:l}))})}},{key:"history",value:function(a,g){var l=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(l.initializeIfNecessary(),2);q=l;r=q.name;return u.return(l.httpDB.fetchVersionGraph({db:r,type:a,name:g}))})}},{key:"log",value:function(a,g,l,q){l=void 0===l?!1:l;var r=this,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return 1==
y.nextAddress?y.yield(r.initializeIfNecessary(),2):3!=y.nextAddress?(u=r,v=u.name,y.yield(r.httpDB.fetchLog({db:v,commit:a,limit:g,includeCommits:l,knownCommitIds:q}),3)):y.return(y.yieldResult.map(Cg.convertToSerializableCommit))})}},{key:"revert",value:function(a,g,l,q){q=void 0===q?"HEAD":q;var r=this,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(r.initializeIfNecessary(),2);u=r;v=u.name;return y.return(r.httpDB.revert({db:v,type:a,name:g,
toCommitId:l,ref:q}))})}},{key:"snapshotAndCommit",value:function(a,g,l,q,r,u,v){var y=this,z,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){if(1==B.nextAddress)return B.yield(Cg.createMorphSnapshot(l,q),2);if(3!=B.nextAddress)return z=B.yieldResult,B.yield(y.commit(a,g,z,r,u,v),3);A=B.yieldResult;A=Cg.convertToSerializableCommit(A);l.changeMetaData("commit",Cg.obj.dissoc(A,["preview"]),!0,!1);return B.return(A)})}},{key:"commit",value:function(a,g,l,q,r,u){var v=this,y=arguments,
z,A,B;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress)return z=a,1===y.length&&z.type&&z.name&&(a=z.type,g=z.name,l=z.snapshot||z.content,q=Cg.obj.dissoc(z,["snapshot","_rev","_id","ancestors","deleted"]),u=z._id),G.yield(v.initializeIfNecessary(),2);A=v;B=A.name;return G.return(v.httpDB.commit({db:B,type:a,name:g,ref:r,expectedParentCommit:u,commitSpec:q,snapshot:l}))})}},{key:"load",value:function(a,g,l,q,r){var u=this,v,y,z,A,B,G,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(K){switch(K.nextAddress){case 1:"object"===
typeof a?q=a:v=a;y=q;if(!y)return K.yield(u.fetchCommit(v,g,r),6);if("string"!==typeof y){K.jumpTo(3);break}z=$jscomp;A=z.makeIterator;return K.yield(u.log(y,1,!0),5);case 5:B=A.call(z,K.yieldResult);y=B.next().value;K.jumpTo(3);break;case 6:y=K.yieldResult;case 3:return K.yield(u.fetchSnapshot(void 0,void 0,y._id),7);case 7:return G=K.yieldResult,K.yield(Cg.loadMorphFromSnapshot(G,l),8);case 8:return E=K.yieldResult,y=Cg.convertToSerializableCommit(y),E.changeMetaData("commit",Cg.obj.dissoc(y,["preview"]),
!0,!1),K.return(E)}})}},{key:"fetchDiff",value:function(a){var g=this,l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(g.initializeIfNecessary(),2);l=g;q=l.name;return r.return(g.httpDB.fetchDiff({db:q,otherDB:a}))})}},{key:"fetchConflicts",value:function(a,g){var l=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(l.initializeIfNecessary(),2);q=l;r=q.name;return u.return(l.httpDB.fetchConflicts({db:r,
includeDocs:a,only:g}))})}},{key:"resolveConflict",value:function(a){var g=this,l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(g.initializeIfNecessary(),2);l=g;q=l.name;return r.return(g.httpDB.resolveConflict(Object.assign({db:q},a)))})}},{key:"synchronize",value:function(a){var g=a.method,l=a.otherDB,q=a.otherDBSnapshotLocation,r=a.onlyTypesAndNames,u=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return z.yield(u.initializeIfNecessary(),
2);v=u;y=v.name;return z.return(u.httpDB.synchronize({db:y,method:g,otherDB:l,otherDBSnapshotLocation:q,onlyTypesAndNames:r}))})}},{key:"softDelete",value:function(a,g,l,q,r){var u=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return v.return(u.commit(a,g,void 0,l,q,r))})}},{key:"delete",value:function(a,g,l){l=void 0===l?!0:l;var q=this,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(q.initializeIfNecessary(),2);r=q;u=r.name;
return v.return(q.httpDB.delete({db:u,type:a,name:g,dryRun:l}))})}},{key:"deleteCommit",value:function(a,g){g=void 0===g?!0:g;var l=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(l.initializeIfNecessary(),2);q=l;r=q.name;return u.return(l.httpDB.deleteCommit({db:r,commit:a,dryRun:g}))})}},{key:"codeSearchInPackages",value:function(a,g,l,q){g=void 0===g?"part":g;var r=this,u,v,y,z,A,B,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(r.latestCommits(g),
2);case 2:u=E.yieldResult,v=[],y=0,"function"===typeof q&&(u=u.filter(q)),z=$jscomp.makeIterator(u),A=z.next();case 3:if(A.done){E.jumpTo(5);break}B=A.value;"function"===typeof l&&l(B.name,y++,u.length);return E.yield(r._textSearchInSnapshotOfCommit(a,B),6);case 6:G=E.yieldResult;G.length&&v.push.apply(v,$jscomp.arrayFromIterable(G));A=z.next();E.jumpTo(3);break;case 5:return E.return(v)}})}},{key:"_textSearchInSnapshotOfCommit",value:function(a,g,l){var q=this,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==
z.nextAddress)return r=g,u=r._id,(v=l)?z.jumpTo(2):z.yield(q.fetchSnapshot(void 0,void 0,u),3);2!=z.nextAddress&&(v=z.yieldResult);y=v;return z.return((new Cg.SnapshotPackageHelper(y)).textSearch(a,g))})}}],[{key:"className",get:function(){return"MorphicDB"}},{key:"default",get:function(){return this.named("lively.morphic/objectdb/morphicdb",{serverURL:Cg.defaultServerURL})}},{key:"named",value:function(a,g){var l=Cg.morphicDBs.get(a);if(l)return l;if(!g.serverURL)throw Error("Needs serverURL!");
g=new this(a,g);Cg.morphicDBs.set(a,g);return g}},{key:"wellKnownMorphicDBs",value:function(){var a=this,g,l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return g=Cg.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs"),r.yield(g.getAll(),2);l=r.yieldResult;q=l.reduce(function(u,v){var y={};return Object.assign(u,(y[v._id]=a.named(v.name,{serverURL:v.serverURL,snapshotLocation:v.snapshotLocation}),y))},{});q.default||(q.default=a.default);return r.return(q)})}},
{key:"addWellKnownMorphicDB",value:function(a,g){var l,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){l=g;q=l.name;r=l.snapshotLocation;u=l.serverURL;v=Cg.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");return y.yield(v.set(a,{name:q,snapshotLocation:r,serverURL:u}),0)})}},{key:"removeWellKnownMorphicDB",value:function(a){var g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){g=Cg.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");
return l.yield(g.remove(a),0)})}}],e,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1381,end:9965})}(void 0);hQ=Cg.MorphicDB;var Ku=sa("Y",hQ),jJ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),m=e.hasOwnProperty("SnapshotPackageHelper")&&"function"===
typeof e.SnapshotPackageHelper?e.SnapshotPackageHelper:e.SnapshotPackageHelper=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.snapshot=a}},{key:"textSearch",value:function(a,g){var l=a&&a instanceof RegExp,q=[];if(!a)return q;for(var r={},u=$jscomp.makeIterator(this.filesInPackages()),v=u.next();!v.done;r={$jscomp$loop$prop$file$2238:r.$jscomp$loop$prop$file$2238},
v=u.next()){r.$jscomp$loop$prop$file$2238=v.value;v=r.$jscomp$loop$prop$file$2238.get(this.snapshot);var y=Cg.string.lineIndexComputer(v),z=Cg.string.lineRanges(v);if(l)v=Cg.string.reMatches(v,a),v.length&&q.push.apply(q,$jscomp.arrayFromIterable(v.map(function(P){return function(ea){return Object.assign(ea,{commit:g,file:P.$jscomp$loop$prop$file$2238})}}(r))));else for(var A=0,B=0;0<=(A=v.indexOf(a));){var G=A+B,E=G+a.length,K=y(G),J=v.slice.apply(v,$jscomp.arrayFromIterable(z[K]));q.push({match:a,
start:G,end:E,length:a.length,line:K,lineString:J,commit:g,file:r.$jscomp$loop$prop$file$2238});B+=A+a.length;v=v.slice(A+a.length)}}return q}},{key:"filesInPackages",value:function(){function a(q,r,u,v,y){y=void 0===y?[]:y;if(q["package.json"]&&"string"===typeof q["package.json"])try{var z=JSON.parse(q["package.json"]);v={url:u,path:r,name:z.name||Cg.arr.last(r)}}catch(B){}z=[];for(var A in q)"string"===typeof q[A]?y.push({path:r.concat(A),url:Cg.string.joinPath(u,A),package:v,get:function(B){return Cg.Path(this.path).get(B.packages)},
set:function(B,G){Cg.Path(this.path).set(B.packages,G)}}):z.push(A);z.forEach(function(B){return a(q[B],r.concat(B),Cg.string.joinPath(u,B),v,y)});return y}var g=[],l;for(l in this.snapshot.packages)a(this.snapshot.packages[l],[l],l,null,g);return g}}],[{key:"className",get:function(){return"SnapshotPackageHelper"}}],e,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9975,end:12984})}(void 0);Cg.SnapshotPackageHelper=jJ;Cg.SnapshotPackageHelper=jJ;Cg.SnapshotPackageHelper=jJ;Cg.default=hQ;var Re=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js");Re.arr=vf;Re.properties=$m;Re.Path=nh;Re.promise=yg;Re.obj=Pf;Re.registerExtension=w;Re.Resource=jg;Re.resource=p;Re.pt=oh;Re.MorphicDB=Ku;Re.ObjectPool=Hi;Re.normalizeOptions=gh;Re.deserializeMorph=LB;Re.loadPackagesAndModulesOfSnapshot=
MB;Re.subscribeOnce=function(b,e,m){Yw(m).emitter.once(b,e);return e};var kJ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),m=e.hasOwnProperty("ComponentPolicy")&&"function"===typeof e.ComponentPolicy?e.ComponentPolicy:e.ComponentPolicy=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){this.derivedMorph=
a;this._overriddenProps=new WeakMap;if(g.isMorph||"string"==typeof g)this.auto=g,"string"==typeof g&&(this.auto.isComponent=!0);else{a=g.click;var l=g.auto,q=g.hover,r=void 0===g.light?{}:g.light;g=void 0===g.dark?{}:g.dark;r&&(this.light=r);g&&(this.dark=g);a&&(this.click=a);l&&(this.auto=l);q&&(this.hover=q);this.resolveMasterComponents()}}},{key:"uses",value:function(a){return[this.auto,this.click,this.hover].includes(a)}},{key:"spec",value:function(){return Re.obj.select(this,["auto","click",
"hover","light","dark"])}},{key:"equals",value:function(a){if(!a)return!1;for(var g=$jscomp.makeIterator(["auto","click","hover"]),l=g.next();!l.done;l=g.next())if(l=l.value,"string"==typeof a[l]){if(this.getResourceUrlFor(this[l])!=a[l])return!1}else if((this[l]||null)!=(a[l]||null))return!1;return!0}},{key:"getManagedMorphs",value:function(){var a=this,g=[];this.derivedMorph.withAllSubmorphsDo(function(l){a.managesMorph(l)&&0<Object.keys(a._overriddenProps.get(l)).filter(function(q){return"_rev"!=
q}).length&&g.push([l,Object.keys(a._overriddenProps.get(l))])});return g}},{key:"__dont_serialize__",get:function(){var a=["_overriddenProps","_applying","_appliedMaster","_hasUnresolvedMaster"];Re.obj.isEmpty(this.dark)&&a.push("dark");Re.obj.isEmpty(this.light)&&a.push("light");return a}},{key:"__additionally_serialize__",value:function(a,g,l,q){this.auto&&q("auto",this.getResourceUrlFor(this.auto));this.click&&q("click",this.getResourceUrlFor(this.click));this.hover&&q("hover",this.getResourceUrlFor(this.hover))}},
{key:"__after_deserialize__",value:function(a,g){this._overriddenProps=new WeakMap;delete this.managedMorphs;this.resolveMasterComponents()}},{key:"whenApplied",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==g.nextAddress?g.yield(a._hasUnresolvedMaster,2):3!=g.nextAddress?g.yield(Re.promise.waitFor(1E3,function(){return a._appliedMaster}),3):g.return(!0)})}},{key:"getResourceUrlFor",value:function(a){return a?a._resourceHandle?a._resourceHandle.url:
void 0==a.name?null:"styleguide://"+Re.Path("metadata.commit.name").get($world)+"/"+a.name:null}},{key:"resolveMasterComponents",value:function(){var a=this,g,l,q,r,u,v,y,z,A,B,G,E,K,J,P,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ra){switch(ra.nextAddress){case 1:g=Re.promise.deferred(),a._hasUnresolvedMaster=g.promise,l=a,q=void 0===l.light?{}:l.light,r=void 0===l.dark?{}:l.dark,u=["auto","click","hover"],v=[],ra.setCatchFinallyBlocks(2),y=$jscomp.makeIterator(u),z=y.next();case 4:if(z.done){ra.leaveTryBlock(3);
break}A=z.value;if("string"!=typeof a[A]){ra.jumpTo(7);break}B=a;G=A;return ra.yield(Re.resource(a[A]).read(),8);case 8:B[G]=ra.yieldResult;case 7:if("string"!=typeof q[A]){ra.jumpTo(9);break}E=q;K=A;return ra.yield(Re.resource(q[A]).read(),10);case 10:E[K]=ra.yieldResult;case 9:if("string"!=typeof r[A]){ra.jumpTo(11);break}J=r;P=A;return ra.yield(Re.resource(r[A]).read(),12);case 12:J[P]=ra.yieldResult;case 11:v.push(a[A],q[A],r[A]);z=y.next();ra.jumpTo(4);break;case 2:throw ea=ra.enterCatchBlock(),
Error("Encountered invalid master component reference: "+ea.message);case 3:Re.arr.compact(v).forEach(function(D){D.isComponent||(D.isComponent=!0)}),g.resolve(),a._hasUnresolvedMaster=!1,ra.jumpToEnd()}})}},{key:"applyIfNeeded",value:function(a){var g=this;a=void 0===a?!1:a;if(this._hasUnresolvedMaster)return this._originalOpacity=this.derivedMorph.opacity,this.derivedMorph.withMetaDo({metaInteraction:!0},function(){[g.derivedMorph].concat($jscomp.arrayFromIterable(g.derivedMorph.ownerChain())).find(function(r){return r.isComponent})||
(g.derivedMorph.opacity=0)}),this._hasUnresolvedMaster.then(function(){g.applyIfNeeded(a);g.derivedMorph.withMetaDo({metaInteraction:!0},function(){g.derivedMorph.opacity=g._originalOpacity});delete g._originalOpacity;delete g._capturedExtents});var l=this.derivedMorph,q=this.determineMaster(l);q&&this._appliedMaster!=q&&(a=!0);a&&(this.apply(l,q),this._appliedMaster=q)}},{key:"apply",value:function(a,g){var l=this;if(!this._applying){this._applying=!0;try{a.dontRecordChangesWhile(function(){l.prepareSubmorphsToBeManaged(a,
g);g.withAllSubmorphsDoExcluding(function(q){var r=q==g,u=r?a:a.getSubmorphNamed(q.name);if(u)if(q.master&&!r)u.master=q.master.spec(),u._requestMasterStyling=!0,l._overriddenProps.get(u).position||(u.position=q.position),l._overriddenProps.get(u).extent||(u.extent=q.extent);else{r=$jscomp.makeIterator(q.styleProperties);for(var v=r.next();!v.done;v=r.next())if(v=v.value,!l._overriddenProps.get(u)[v])if("layout"==v)u.layout&&q.layout&&u.layout.name()==q.layout.name()&&u.layout.equals(q.layout)||(u.layout=
q.layout?q.layout.copy():void 0);else{if(q==g){if("extent"==v&&!u.extent.equals(Re.pt(10,10))&&(!u.owner||u.owner.isWorld||u.ownerChain().find(function(y){return y.master&&y.master.managesMorph(u)})))continue;if("position"==v)continue}u.isLabel&&"extent"==v||["border","borderTop","borderBottom","borderRight","borderLeft"].includes(v)||(Re.obj.equals(u[v],q[v])||(u[v]=q[v]),["fixedHeight","fixedWidth"].includes(v)&&u._parametrizedProps&&u._parametrizedProps.extent&&(u.extent=u._parametrizedProps.extent))}u._parametrizedProps&&
delete u._parametrizedProps;l.reconcileSubmorphs(u,q)}},function(q){return g!=q&&q.master})})}finally{this._applying=!1,delete a._parametrizedProps}}}},{key:"clearOverriddenPropertiesFor",value:function(a,g){var l=this._overriddenProps.get(a);this._overriddenProps.set(a,Re.obj.dissoc(l,g))}},{key:"prepareSubmorphsToBeManaged",value:function(a,g){var l=this;g.withAllSubmorphsDoExcluding(function(q){(q=q==g?a:a.getSubmorphNamed(q.name))&&l.prepareMorphToBeManaged(q)},function(q){return q!=g&&q.master})}},
{key:"reconcileSubmorphs",value:function(a,g){}},{key:"managesMorph",value:function(a){return this._overriddenProps.has(a)}},{key:"propsToSerializeForMorph",value:function(a,g){if(!this.managesMorph(a))return g;for(var l=[],q=$jscomp.makeIterator(a.styleProperties),r=q.next();!r.done;r=q.next())r=r.value,this._overriddenProps.get(a)[r]||!("position"==r&&a==this.derivedMorph||"extent"==r&&a==this.derivedMorph)&&l.push(r);return Re.arr.withoutAll(g,l)}},{key:"prepareMorphToBeManaged",value:function(a){if(!this._overriddenProps.has(a)){var g=
{},l;for(l in a._parametrizedProps)"__takenFromSnapshot__"!=l&&(g[l]=!0);this._overriddenProps.set(a,g)}}},{key:"determineMaster",value:function(a){var g=a.env.world.colorScheme,l=a.env.eventDispatcher.isMorphHovered(a);a=a.env.eventDispatcher.isMorphClicked(a);var q=this.getMasterForState(this,{isHovered:l,isClicked:a});this.light&&"light"==g&&(q=this.getMasterForState(this.light,{isHovered:l,isClicked:a})||q);this.dark&&"dark"==g&&(q=this.getMasterForState(this.light,{isHovered:l,isClicked:a})||
q);return q}},{key:"getMasterForState",value:function(a,g){var l=a.hover,q=a.click,r=g.isClicked;a=a.auto;if(g.isHovered)if(l)a=l;else for(g=a&&a.master;g;){if(g.hover){a=g.hover;break}g=g.auto}if(r)if(q)a=q;else for(q=a&&a.master;q;){if(q.click){a=q.click;break}q=q.auto}return a}},{key:"onMorphChange",value:function(a,g){if(!this._applying&&!Re.Path("meta.metaInteraction").get(g)&&!["_rev","name","master"].includes(g.prop)&&("opacity"==g.prop&&delete this._originalOpacity,a.styleProperties.includes(g.prop)))if(this.managesMorph(a)){if(!a.master||
a.master==this||["extent","position"].includes(g.prop))this._overriddenProps.get(a)[g.prop]=!0}else if(a._parametrizedProps)a._parametrizedProps[g.prop]=g.value;else{var l={};a._parametrizedProps=(l[g.prop]=g.value,l)}}}],[{key:"className",get:function(){return"ComponentPolicy"}},{key:"for",value:function(a,g){g=g.constructor===Re.ComponentPolicy?g:new this(a,g);a.master&&(g._overriddenProps=a.master._overriddenProps);return g}}],e,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1144,end:16520})}(void 0);Re.ComponentPolicy=kJ;Re.ComponentPolicy=kJ;Re.ComponentPolicy=kJ;Re.styleGuideURLRe=/^styleguide:\/\/([^\/]+)\/(.*)$/;Re.fetchedSnapshots=Re.fetchedSnapshots||{};Re.objectPools=Re.objectPools||{};Re.resolvedMasters=Re.resolvedMasters||{};Re.modulesToLoad=Re.modulesToLoad||{};Re.li=Re.li||void 0;Re.localNamePromise=Re.localNamePromise||
void 0;Re.masterComponentFetches=Re.masterComponentFetches||{};(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),m=e.hasOwnProperty("StyleGuideResource")&&"function"===typeof e.StyleGuideResource?e.StyleGuideResource:e.StyleGuideResource=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"canDealWithJSON",get:function(){return!1}},{key:"componentName",get:function(){var a=
this.url.match(Re.styleGuideURLRe);a=$jscomp.makeIterator(a);a.next();a.next();return a.next().value}},{key:"worldName",get:function(){var a=this.url.match(Re.styleGuideURLRe);a=$jscomp.makeIterator(a);a.next();var g=a.next().value;a.next();return g}},{key:"dirList",value:function(a,g){var l=this,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return l.worldName==$world.metadata.commit.name?r.return($world.withAllSubmorphsSelect(function(u){return u.isComponent})):(q=Re.resolvedMasters[l.worldName])?
r.return(Object.values(q)):r.return([])})}},{key:"localWorldName",value:function(){var a;if(a=Re.Path("metadata.commit.name").get($world))return a;if(Re.localNamePromise)return Re.localNamePromise;a=Re.promise.deferred();var g=a.resolve;Re.localNamePromise=a.promise;if("__newWorld__"==Re.resource(document.location.href).query().name)return g("__newWorld__"),Re.localNamePromise;Re.subscribeOnce("world/loaded",function(){g(Re.Path("metadata.commit.name").get($world))},System);return Re.localNamePromise}},
{key:"fetchFromMasterDir",value:function(a,g){var l=a.join(this.worldName).join(g+".json");if(Re.masterComponentFetches[l.url])return Re.masterComponentFetches[l.url];Re.masterComponentFetches[l.url]=function(){var q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==u.nextAddress?(q=Re,r=q.deserializeMorph,u.yield(l.readJson(),2)):u.return(r.call(q,u.yieldResult))})}();return Re.masterComponentFetches[l.url]}},{key:"read",value:function(){var a=this,g,l,q,r,u,v,y,z,A,B,G,
E,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){switch(J.nextAddress){case 1:g=a.componentName;if(l=Re.Path([a.worldName,a.componentName]).get(Re.resolvedMasters))return J.return(l);if(!lively.FreezerRuntime){J.jumpTo(2);break}q=Re.resource(window.location);q.isFile()&&(q=q.parent());r=q.join("masters/");return J.yield(a.fetchFromMasterDir(r,g),3);case 3:l=J.yieldResult;case 2:if(lively.FreezerRuntime){J.jumpTo(4);break}Re.fetchedSnapshots[a.worldName]||(console.log("scheduling fetch of",
a.worldName),v=Re.promise.deferred(),u=v.resolve,Re.fetchedSnapshots[a.worldName]=v.promise);return J.yield(a.localWorldName(),5);case 5:if(J.yieldResult==a.worldName){l="undefined"!==typeof $world&&$world.getSubmorphNamed(g);if(!l)throw Error('Master component "'+g+'" can not be found in "'+a.worldName+'"');return J.return(l)}return u?(z=Re.MorphicDB.default,J.yield(z.exists("world",a.worldName),9)):J.yield(Re.fetchedSnapshots[a.worldName],8);case 8:y=J.yieldResult;J.jumpTo(7);break;case 9:if(J.yieldResult.exists)return J.yield(z.fetchSnapshot("world",
a.worldName),15);A=Re.resource(System.baseURL).join("lively.morphic/styleguides").join(a.worldName+".json");return J.yield(A.exists(),12);case 12:if(!J.yieldResult){u(null);J.jumpTo(11);break}return J.yield(A.readJson(),14);case 14:y=J.yieldResult;J.jumpTo(11);break;case 15:y=J.yieldResult;case 11:return J.yield(Re.loadPackagesAndModulesOfSnapshot(y),16);case 16:u(y);case 7:B=new Re.ObjectPool(Re.normalizeOptions({}));G=$jscomp.makeIterator(Object.entries(y.snapshot).find(function(P){P=$jscomp.makeIterator(P);
P.next();P=P.next().value;return Re.Path("props.isComponent.value").get(P)&&Re.Path("props.name.value").get(P)==g})||[]);E=G.next().value;if(!E)throw Error('Master component "'+g+'" can not be found in "'+a.worldName+'"');l=B.resolveFromSnapshotAndId(Object.assign({},y,{id:E}));case 4:return Re.resolvedMasters[a.worldName]?Re.resolvedMasters[a.worldName][g]=l:(K={},Re.resolvedMasters[a.worldName]=(K[g]=l,K)),l._resourceHandle=a,J.yield(Promise.all(l.withAllSubmorphsSelect(function(P){return P.master}).map(function(P){return P.master.applyIfNeeded(!0)})),
17);case 17:return J.return(Promise.resolve(l))}})}},{key:"write",value:function(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){throw Error("Master Components can not be written to!");})}},{key:"exists",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){g="undefined"!==typeof $world&&$world.getSubmorphNamed(a.morphName);return l.return(g&&g.isComponent)})}},{key:"remove",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(g=
"undefined"!==typeof $world&&$world.getSubmorphNamed(a.morphName))g.isComponent=!1;return l.return(!0)})}}],[{key:"className",get:function(){return"StyleGuideResource"}}],e,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:20095,end:24895})})(Re.Resource);var iQ={name:"styleguide",matches:function(b){return b.match(Re.styleGuideURLRe)},
resourceClass:Re.StyleGuideResource};Re.resourceExtension=iQ;Re.resourceExtension=iQ;Re.resourceExtension=iQ;Re.registerExtension(Re.resourceExtension);(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),m=e.hasOwnProperty("StyleGuide")&&"function"===typeof e.StyleGuide?e.StyleGuide:e.StyleGuide=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,void 0,void 0,e,{pathInPackage:function(){return"style-guide.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:25080,end:25569})})(void 0);var mc=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js");mc.generateUnfolded=function(b,e,m){e=void 0===e?["top","left","right","bottom"]:e;m=void 0===m?"core":m;var a={},g={};e=$jscomp.makeIterator(e);for(var l=e.next();!l.done;g={$jscomp$loop$prop$m$1115$2241:g.$jscomp$loop$prop$m$1115$2241},
l=e.next())g.$jscomp$loop$prop$m$1115$2241=l.value,a[b+mc.string.capitalize(g.$jscomp$loop$prop$m$1115$2241)]={group:m,derived:!0,generated:!0,after:[b],get:function(q){return function(){return this.getProperty(b)[q.$jscomp$loop$prop$m$1115$2241]}}(g),set:function(q){return function(r){var u={};this[b]=Object.assign({},this.getProperty(b),(u[q.$jscomp$loop$prop$m$1115$2241]=r,u))}}(g)};return a};mc.Color=Wf;mc.Line=Cl;mc.Point=$f;mc.pt=oh;mc.rect=Ii;mc.Rectangle=ee;mc.Transform=Gj;mc.string=vh;mc.properties=
$m;mc.obj=Pf;mc.arr=vf;mc.num=Bk;mc.promise=yg;mc.tree=Hr;mc.PropertyPath=nh;mc.signal=tl;mc.copy=dx;mc.deserializeSpec=lj;mc.ExpressionSerializer=xm;mc.serializeSpec=Ki;mc.getClassName=Jn;mc.renderRootMorph=hs;mc.ShadowObject=bq;mc.AnimationQueue=RH;mc.easings=cq;mc.addOrChangeCSSDeclaration=ne;mc.Icon=sn;mc.morph=wa;mc.newMorphId=Na;mc.MorphicEnv=Wp;mc.config=wk;mc.CommandHandler=pfa;mc.KeyHandler=OO;mc.findKeysForPlatform=jb;mc.TargetScript=PO;mc.copyMorph=yF;mc.ComponentPolicy=kJ;mc.defaultCommandHandler=
new mc.CommandHandler;var nk=sa("ag",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=e.hasOwnProperty("Morph")&&"function"===typeof e.Morph?e.Morph:e.Morph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a||(a={});var g=a.env||mc.MorphicEnv.default();this._env=g;this._rev=g.changeManager.revision;this._owner=
null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=mc.newMorphId(mc.getClassName(this));this._animationQueue=new mc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=mc.obj.select(a,mc.arr.intersect(Object.keys(a),this.styleProperties));this.initializeProperties(a);a.bounds&&(this.setBounds(a.bounds),this._parametrizedProps.extent=this.extent,this._parametrizedProps.position=this.position);if(void 0!=a.height||
void 0!=a.width)this._parametrizedProps.extent=this.extent;a.layout&&(this.layout=a.layout);if("function"===typeof this.onLoad&&!this.isComponent)this.onLoad()}},{key:"__serialization_id_property__",get:function(){return"_id"}},{key:"__deserialize__",value:function(a,g,l,q){this._env=mc.MorphicEnv.default();this._rev=a.rev;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=g.id;this._animationQueue=new mc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=
[];this._tickingScripts=[];this._parametrizedProps=mc.obj.select(a.props,mc.arr.intersect(Object.keys(a.props),this.styleProperties));this._parametrizedProps.__takenFromSnapshot__=!0;a=q.expressionSerializer;for(var r in this._parametrizedProps)(g=this._parametrizedProps[r].value)&&mc.obj.isString(g)&&a.isSerializedExpression(g)&&(this._parametrizedProps[r]=a.deserializeExpr(g));this.initializeProperties()}},{key:"__after_deserialize__",value:function(a){this.resumeStepping();if("function"===typeof this.onLoad)try{this.onLoad()}catch(g){console.error("[lively.morphic] "+
this+".onLoad() error: "+g.stack)}}},{key:"__only_serialize__",get:function(){var a=this.defaultProperties,g=this.propertiesAndPropertySettings().properties,l=[];0<this._tickingScripts.length&&l.push("_tickingScripts");this.attributeConnections&&l.push("attributeConnections");var q=[this].concat($jscomp.arrayFromIterable(this.ownerChain())).map(function(v){return v.__isBeingSerialized__&&v.master}).find(Boolean),r;for(r in g){var u=g[r];q&&q.managesMorph(this)&&void 0!=q._overriddenProps.get(this)[r]?
l.push(r):u.readOnly||u.derived||mc.obj.equals(this[r],a[r])||u.hasOwnProperty("serialize")&&!u.serialize||l.push(r)}return q&&!this.isComponent?q.propsToSerializeForMorph(this,l):l}},{key:"__additionally_serialize__",value:function(a,g,l,q){if((g=a.props.submorphs)&&!this.isEpiMorph)for(g=g.value,q=g.length;q--;)l.refForId(g[q].id).realObj.isEpiMorph&&mc.arr.removeAt(g,q);l=$jscomp.makeIterator(mc.arr.intersect(this.__only_serialize__,["borderColor","borderWidth","borderStyle","borderRadius"]));
for(g=l.next();!g.done;g=l.next())g=g.value,a.props[g]={key:g,verbatim:!0,value:mc.obj.extract(this[g],["top","right","bottom","left"],function(r,u){return u&&u.isColor?u.toTuple():u})}}},{key:"isMorph",get:function(){return!0}},{key:"id",get:function(){return this._id}},{key:"env",get:function(){return this._env}},{key:"spec",value:function(a,g){a=void 0===a?!0:a;g=void 0===g?new WeakMap:g;var l=this.defaultProperties,q=this.propertiesAndPropertySettings().properties,r={submorphs:!0},u={};if(g.has(this))return g.get(this);
g.set(this,u);for(var v in q){var y=q[v];y&&(y.readOnly||y.derived||y.hasOwnProperty("serialize")&&!y.serialize||v in r||a&&(mc.obj.equals(this[v],l[v])||this[v]&&l[v]&&this[v].valueOf&&l[v].valueOf&&mc.obj.equals(this[v].valueOf(),l[v].valueOf()))||(u[v]=this[v]&&this[v].isMorph?this[v].spec(a,g):this[v]&&"layout"===v?this[v].copy():this[v]))}u.submorphs=this.submorphs.map(function(z){return z.spec(a,g)});u.type=this.constructor;return u}},{key:"printSpec",value:function(a,g){g=void 0===g?0:g;a=
(void 0===a?null:a)||this.spec();var l={name:!0,type:!0,submorphs:!0},q="  ".repeat(g+1),r="  ".repeat(g)+"{\n"+(q+'name: "'+a.name+'",\n')+(q+'type: "'+a.type+'",\n'),u;for(u in a)l[u]||(r+=""+q+u+": "+mc.string.print(a[u])+",\n");if(a.submorphs){r+=q+"submorphs: [\n";a=$jscomp.makeIterator(a.submorphs);for(l=a.next();!l.done;l=a.next())r+=this.printSpec(l.value,g+1);r+="]\n"}return r+="  ".repeat(g)+"}\n"}},{key:"defaultProperties",get:function(){var a=this.constructor,g=a[Symbol.for("lively-instance-superclass")];
if(!a._morphicDefaultPropertyValues||a._morphicDefaultPropertyValues==(g&&g._morphicDefaultPropertyValues)){a=this.constructor._morphicDefaultPropertyValues={};g=this.propertiesAndPropertySettings().properties;for(var l in g){var q=g[l];q.hasOwnProperty("defaultValue")&&(q=q.defaultValue,Array.isArray(q)&&(q=q.slice()),a[l]=q)}}return this.constructor._morphicDefaultPropertyValues}},{key:"defaultProperty",value:function(a){return this.defaultProperties[a]}},{key:"getProperty",value:function(a){return this._morphicState[a]}},
{key:"setProperty",value:function(a,g,l){return this.addValueChange(a,g,l)}},{key:"changeMetaData",value:function(a,g,l,q){l=void 0===l?!0:l;q=void 0===q?!0:q;var r=this.metadata;r||(r={});(new mc.PropertyPath(a)).withParentAndKeyDo(r,!0,function(u,v){u[v]=q?Object.assign({},u[v],{},g):g;var y=u.__dont_serialize__;l?y&&y.includes(v)&&(mc.arr.remove(y,v),0===y.length&&delete u.__dont_serialize__):(y||(y=u.__dont_serialize__=[]),mc.arr.pushIfNotIncluded(y,v))});this.metadata=r}},{key:"installFont",
value:function(a,g){var l={};this.installedFonts=Object.assign({},this.installedFonts,(l[a]=g,l));this.insertFontCSS(a,g)}},{key:"uninstallFont",value:function(a){delete this.installedFonts[a];(a=document.getElementById(this.id+"-"+a))&&a.remove()}},{key:"ensureInstalledFonts",value:function(a,g){a=$jscomp.makeIterator(a);for(var l=a.next();!l.done;l=a.next())(l=document.getElementById(this.id+"-"+l.value))&&l.remove();g=$jscomp.makeIterator(g);for(l=g.next();!l.done;l=g.next())a=l.value,this.insertFontCSS(a,
this.installedFonts[a])}},{key:"insertFontCSS",value:function(a,g){var l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(l.whenRendered(),2);g.endsWith(".otf")?mc.addOrChangeCSSDeclaration(l.id+"-"+a,"@font-face {\n             font-family: "+a+';\n             src: url("'+l.installedFonts[a]+'") format("opentype");\n         }'):mc.addOrChangeCSSDeclaration(l.id+"-"+a,'@import url("'+l.installedFonts[a]+'");');q.jumpToEnd()})}},{key:"toString",
value:function(){return"<"+mc.getClassName(this)+" - "+(this.name?this.name:this.id)+">"}},{key:"edit",value:function(a){return this.env.world.execCommand("open object editor",Object.assign({className:mc.getClassName(this)},a,{target:this}))}},{key:"inspect",value:function(a){return this.env.world.execCommand("open object inspector",Object.assign({},a,{target:this}))}},{key:"livelyCustomInspect",value:function(){var a={_id:!0,_owner:!0},g={},l=this.propertiesAndPropertySettings().properties,q=[],
r;for(r in l)a[r]||l[r].derived&&!l[r].showInInspector||(g[r]=!0,q.push({key:r,value:this[r]}));q.push({key:"id",value:this.id});q.push({key:"owner",value:this.owner});q=q.sort(function(v,y){v=v.key.toLowerCase();y=y.key.toLowerCase();return v<y?-1:v===y?0:1});if(this.attributeConnections)for(l=$jscomp.makeIterator(this.attributeConnections),r=l.next();!r.done;r=l.next())r=r.value,a["$$"+r.sourceAttrName,""+r.sourceAttrName]=!0;Object.assign(g,a);a=$jscomp.makeIterator("attributeConnections _animationQueue _morphicState _dirty doNotCopyProperties doNotSerialize _env _cachedPaths _pathDependants _rendering _rev _submorphOrderChanged _tickingScripts _transform _invTransform _styleSheetProps _renderer _tooltipViewer layout".split(" "));
for(l=a.next();!l.done;l=a.next())l=l.value,l in this&&(g[l]=!0,q.push({key:l,value:this[l],keyString:"[internal] "+l}));for(var u in this)!g[u]&&this.hasOwnProperty(u)&&q.unshift({key:u,value:this[u],keyString:"[UNKNOWN PROPERTY] "+u});return{sort:!1,includeDefault:!1,properties:q}}},{key:"show",value:function(a){return $world.execCommand("show morph",{morph:this,loop:a})}},{key:"setStatusMessage",value:function(a,g,l,q){var r=this.world();q=Object.assign({maxLines:7},q);return r?r.setStatusMessageFor(this,
a,g,l,q):console.log(a)}},{key:"showError",value:function(a){var g=this.world();return g?g.showErrorFor(this,a):console.error(a)}},{key:"onChange",value:function(a){var g=this,l=a.meta&&a.meta.animation,q=a.prop,r=a.value;if("position"===q||"rotation"===q||"scale"===q||"origin"===q||"reactsToPointer"===q)this.onBoundsChanged(this.bounds()),l={},this.updateTransform((l[q]=r,l));else if("extent"==q)this.onBoundsChanged(this.bounds());else"layout"==q&&(l?r&&r.attachAnimated(l.duration,this,l.easing):
r&&r.attach());this.layout&&this.layout.onChange(a);this.isComponent&&(q=this.world(),(q?q.withAllSubmorphsSelect(function(u){return u.master&&u.master.uses(g)}):[]).forEach(function(u){u.requestMasterStyling()}));if(this.master)this.master.onMorphChange(this,a)}},{key:"onBoundsChanged",value:function(a){var g=this;mc.signal(this,"bounds",a);[].concat($jscomp.arrayFromIterable(a.corners),$jscomp.arrayFromIterable(a.sides)).forEach(function(l){mc.signal(g,l,a.partNamed(l))})}},{key:"onSubmorphChange",
value:function(a,g){var l=this;if(this.isComponent&&!a.meta.metaInteraction&&!a.meta.layoutAction){var q=this.world();q&&q.withAllSubmorphsDo(function(r){r.master&&r.master.uses(l)&&r.requestMasterStyling()})}if(this.master)this.master.onMorphChange(g,a);this.layout&&this.layout.onSubmorphChange(g,a)}},{key:"changes",get:function(){return this.env.changeManager.changesFor(this)}},{key:"applyChange",value:function(a){this.env.changeManager.apply(this,a)}},{key:"addValueChange",value:function(a,g,l){return this.env.changeManager.addValueChange(this,
a,g,l)}},{key:"addMethodCallChangeDoing",value:function(a,g){return this.env.changeManager.addMethodCallChangeDoing(a,this,g)}},{key:"groupChangesWhile",value:function(a,g){return this.env.changeManager.groupChangesWhile(this,a,g)}},{key:"dontRecordChangesWhile",value:function(a){return this.env.changeManager.dontRecordChangesWhile(this,a)}},{key:"recordChangesWhile",value:function(a,g){return this.env.changeManager.recordChangesWhile(a,g)}},{key:"recordChangesStart",value:function(a){return this.env.changeManager.recordChangesStartForMorph(this,
a)}},{key:"recordChangesStop",value:function(a){return this.env.changeManager.recordChangesStopForMorph(this,a)}},{key:"withMetaDo",value:function(a,g){return this.env.changeManager.doWithValueChangeMeta(a,this,g)}},{key:"undoStart",value:function(a){return this.env.undoManager.undoStart(this,a)}},{key:"undoStop",value:function(a){return this.env.undoManager.undoStop(this,a)}},{key:"undoInProgress",get:function(){return this.env.undoManager.undoInProgress}},{key:"animate",value:function(a){var g=
this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?(l=g._animationQueue.registerAnimation(a),g._animationQueue.animationsActive?l?q.yield(l.asPromise(),3):q.jumpTo(2):(l&&l.finish(),q.return(Promise.resolve(g)))):2!=q.nextAddress?q.return(q.yieldResult):q.return(Promise.resolve(g))})}},{key:"withAnimationDo",value:function(a,g){var l=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){q=l.groupChangesWhile(!1,a);r=q.changes;return u.yield(Promise.all(Object.values(mc.arr.groupBy(r,
function(v){return v.target.id})).map(function(v){var y=Object.assign({},g),z;v.forEach(function(A){z=A.target;A.reverseApply();y[A.prop]=A.value});return z.animate(y)})),0)})}},{key:"isClip",value:function(){return"visible"!==this.clipMode}},{key:"scrollExtent",get:function(){return(this.submorphs.length?this.innerBounds().union(this.submorphBounds()):this.innerBounds()).extent().addPt(this.scrollbarOffset)}},{key:"scrollBounds",value:function(){var a=this.scroll,g=this.scrollExtent;return new mc.Rectangle(a.x,
a.y,g.x,g.y)}},{key:"scrollDown",value:function(a){this.scroll=this.scroll.addXY(0,a)}},{key:"scrollUp",value:function(a){this.scrollDown(50*-a)}},{key:"scrollLeft",value:function(a){this.scroll=this.scroll.addXY(a,0)}},{key:"scrollRight",value:function(a){this.scrollLeft(-a)}},{key:"scrollPageDown",value:function(){this.scrollDown(this.height)}},{key:"scrollPageUp",value:function(){this.scrollUp(this.height)}},{key:"addStyleClass",value:function(a){this.styleClasses=mc.arr.uniq(this.styleClasses.concat(a))}},
{key:"removeStyleClass",value:function(a){this.styleClasses=this.styleClasses.filter(function(g){return g!=a})}},{key:"adjustOrigin",value:function(a){var g=this.origin,l=this.globalBounds().topLeft();this.origin=a;this.submorphs.forEach(function(r){return r.position=r.position.subPt(a.subPt(g))});var q=this.globalBounds().topLeft();l=l.subPt(q);this.globalPosition=this.globalPosition.addPt(l)}},{key:"setBounds",value:function(a){this.extent=a.extent();this.position=a.topLeft().addPt(this.origin)}},
{key:"innerBounds",value:function(){var a=this.extent;return mc.rect(0,0,a.x,a.y)}},{key:"relativeBounds",value:function(a){a=a||this.world();var g=this.origin.negated().extent(this.extent);g=a?this.transformRectToMorph(a,g):this.getGlobalTransform().transformRectToRect(g);this.isClip()||this.submorphs.forEach(function(l){g=g.union(l.relativeBounds(a))});return g}},{key:"bounds",value:function(){return this.relativeBounds(this.owner)}},{key:"relativeSubmorphBounds",value:function(){var a=this.innerBounds();
return this.submorphs.map(function(g){g=g.bounds();return mc.rect(g.x/a.width,g.y/a.height,g.width/a.width,g.height/a.height)})}},{key:"globalBounds",value:function(){return this.relativeBounds(this.world())}},{key:"submorphBounds",value:function(a){a=mc.arr.filter(this.submorphs,void 0===a?function(){return!0}:a);return 1>a.length?this.innerBounds():a.map(function(g){return g.bounds()}).reduce(function(g,l){return g.union(l)})}},{key:"fitToSubmorphs",value:function(a){a=void 0===a?mc.Rectangle.inset(0):
a;var g=this.submorphs;if(g.length){g=g.reduce(function(r,u){return r.union(u.bounds())},g[0].bounds());var l=g.top()-a.top(),q=g.left()-a.left();this.moveBy(mc.pt(q,l));mc.arr.invoke(this.submorphs,"moveBy",mc.pt(-q,-l));this.extent=mc.pt(g.width+a.left()+a.right(),g.height+a.top()+a.bottom())}}},{key:"align",value:function(a,g){return this.moveBy(g.subPt(a))}},{key:"moveBy",value:function(a){this.position=this.position.addPt(a);return this}},{key:"rotateBy",value:function(a){this.rotation+=a}},
{key:"resizeBy",value:function(a){this.extent=this.extent.addPt(a)}},{key:"snap",value:function(a){this.position=this.position.roundTo(a||1)}},{key:"isEpiMorph",get:function(){return this.getProperty("epiMorph")&&!this.isComponent}},{key:"isUsedAsEpiMorph",value:function(){for(var a=this;a;){if(a.isEpiMorph)return!0;a=a.owner}return!1}},{key:"replaceWith",value:function(a,g,l){l=void 0===l?!0:l;if(this===a||!a)return a;if(this===a.owner)return a.replaceWith(this),a;var q=this.owner,r=this.submorphs,
u=this.getTransform().copy();g="number"===typeof g?g:q?q.submorphs.indexOf(this):-1;var v=a.owner,y=mc.arr.without(a.submorphs,this),z=a.getTransform().copy(),A=v?v.submorphs.indexOf(a):-1;q&&this.remove();v&&a.remove();l&&(this.submorphs=[],a.submorphs=[]);q===a?(v&&v.addMorphAt(this,A),l&&(this.submorphs=y.slice(0,g).concat(a).concat(y.slice(g)),a.submorphs=r)):(q&&q.addMorphAt(a,g),v&&v.addMorphAt(this,A),l&&(a.submorphs=r,this.submorphs=y));a.setTransform(u);this.setTransform(z);return a}},{key:"addMorphAt",
value:function(a,g){var l=this;if(!a||"object"!==typeof a)throw Error(a+" cannot be added as a submorph to "+this);if(a.isMorph){if(a.isAncestorOf(this))return this.env.world.logError(Error("addMorph: Circular relationships between morphs not allowed\ntried to add "+a+" to "+this)),null;if(a===this)return this.env.world.logError(Error("addMorph: Trying to add itself as a submorph: "+this)),null}a.isMorph||(a=mc.morph(a));var q=this.submorphs.indexOf(a);if(!(-1<q&&q===g))return this.addMethodCallChangeDoing({target:this,
selector:"addMorphAt",args:[a,g],undo:{target:this,selector:"removeMorph",args:[a]}},function(){var r=a.owner,u=l.submorphs;if(r&&r!==l){var v=a.transformForNewOwner(l);a.remove()}a._env!==l._env&&(a._env=l._env);g=Math.min(u.length,Math.max(0,g));-1<q&&(u.splice(q,1),q<g&&g--);u.splice(g,0,a);a._owner=l;a._cachedPaths={};v&&a.setTransform(v);a.requestStyling();l._morphicState.submorphs=u;l._submorphOrderChanged=!0;l.makeDirty();a.resumeSteppingAll();a.withAllSubmorphsDo(function(y){return y.onOwnerChanged(l)});
l.world()&&a._requestMasterStyling&&(a.master&&a.master.applyIfNeeded(!0),a._requestMasterStyling=!1)}),a}},{key:"addMorph",value:function(a,g){var l=this.submorphs;g=g?l.indexOf(g):-1;return this.addMorphAt(a,-1===g?l.length:g)}},{key:"addMorphBack",value:function(a){return this.addMorph(a,a===this.submorphs[0]?this.submorphs[1]:this.submorphs[0])}},{key:"removeMorph",value:function(a){var g=this.submorphs.indexOf(a);-1!==g&&((this.getProperty("submorphs")||[]).splice(g,1),this.addMethodCallChangeDoing({target:this,
selector:"removeMorph",args:[a],undo:{target:this,selector:"addMorphAt",args:[a,g]}},function(){a.suspendSteppingAll();a._owner=null}),this._pathDependants=mc.arr.withoutAll(this._pathDependants,a._pathDependants))}},{key:"remove",value:function(){var a=this;this.ownerChain().forEach(function(g){g._stylingVisitor&&g._stylingVisitor.deleteFromCache(a)});this.owner&&this.owner.removeMorph(this);this._cachedPaths={};this._pathDependants.forEach(function(g){return g._cachedPaths={}});this._pathDependants=
[];this.withAllSubmorphsDo(function(g){return g.onOwnerChanged(null)});return this}},{key:"onOwnerChanged",value:function(a){a&&this.master&&this.requestMasterStyling()}},{key:"fadeOut",value:function(a){a=void 0===a?1E3:a;var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(g.animate({opacity:0,duration:a,easing:mc.easings.outQuad}),2);g.remove();g.opacity=1;l.jumpToEnd()})}},{key:"fadeIn",value:function(a){a=void 0===a?1E3:a;var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){g.opacity=
0;g.animate({opacity:1,duration:a});return l.return(g)})}},{key:"fadeIntoWorld",value:function(a,g){a=void 0===a?$world.visibleBounds().center():a;g=void 0===g?200:g;var l=this,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return q=new mc.Morph({opacity:0,scale:0,epiMorph:!0,hasFixedPosition:!0,fill:mc.Color.transparent}),r=l.env.world,q.openInWorld(),q.addMorph(l),l.position=q.extent.scaleBy(.5),q.center=a,q.scale=.8,v.yield(q.animate({opacity:1,scale:1,
duration:g}),2);u=l.globalBounds();r.addMorph(l);l.top=u.top();l.left=u.left();q.remove();return v.return(l)})}},{key:"removeAllMorphs",value:function(){this.submorphs=[]}},{key:"bringToFront",value:function(){this.owner&&mc.arr.last(this.owner.submorphs)!==this&&this.owner.addMorph(this);return this}},{key:"owner",get:function(){return this._owner}},{key:"withAllSubmorphsDetect",value:function(a){if(a(this))return this;for(var g=$jscomp.makeIterator(this.submorphs),l=g.next();!l.done;l=g.next())if(l=
l.value.withAllSubmorphsDetect(a))return l}},{key:"withAllSubmorphsDoExcluding",value:function(a,g){var l=[a(this)];if(g(this))return l;for(var q=$jscomp.makeIterator(this.submorphs),r=q.next();!r.done;r=q.next())mc.arr.pushAll(l,r.value.withAllSubmorphsDoExcluding(a,g));return l}},{key:"withAllSubmorphsDo",value:function(a){for(var g=[a(this)],l=$jscomp.makeIterator(this.submorphs),q=l.next();!q.done;q=l.next())mc.arr.pushAll(g,q.value.withAllSubmorphsDo(a));return g}},{key:"withAllSubmorphsSelect",
value:function(a){var g=[];this.withAllSubmorphsDo(function(l){return a(l)&&g.push(l)});return g}},{key:"ownerChain",value:function(){return this.owner?[this.owner].concat(this.owner.ownerChain()):[]}},{key:"world",value:function(){return this.owner?this.owner.world():null}},{key:"getWindow",value:function(){return this.isWindow?this:this.ownerChain().find(function(a){return a.isWindow})}},{key:"openInWorldNear",value:function(a,g){g=g||this.world()||this.env.world;if(!g)return this;this.center=a;
this.setBounds(g.visibleBounds().insetBy(50).translateForInclusion(this.bounds()));return this.openInWorld(this.position)}},{key:"openInWorldNearHand",value:function(a){a=a||this.world()||this.env.world;var g=a.firstHand?a.firstHand.position:mc.pt(0,0);return a?this.openInWorldNear(g):void 0}},{key:"openInWorld",value:function(a,g){g=g||this.world()||this.env.world;if(!g)return console.warn("Cannot open morph "+this+", world morph not found;"),this;a?this.position=a:(this.center=g.visibleBounds().center(),
this.snap());g.addMorph(this);return this}},{key:"openInHand",value:function(a){a||(a=(this.world()||this.env.world).firstHand);a.grab(this);this.center=mc.pt(0,0)}},{key:"openInWindow",value:function(a){a=void 0===a?{title:this.name,name:"window for "+this.name,world:null}:a;return(a.world||this.world()||this.env.world).openInWindow(this,mc.obj.dissoc(a,["world"]))}},{key:"isAncestorOf",value:function(a){for(a=a.owner;a;){if(a===this)return!0;a=a.owner}return!1}},{key:"morphsContainingPoint",value:function(a,
g){g||(g=[]);if(!this.fullContainsWorldPoint(a))return g;for(var l=this.submorphs.length-1;0<=l;l--)this.submorphs[l].morphsContainingPoint(a,g);this.innerBoundsContainsWorldPoint(a)&&g.push(this);return g}},{key:"morphBeneath",value:function(a){var g=this.world()||this.owner;if(!g)return null;a=g.morphsContainingPoint(a);g=a.indexOf(this);return a[g+1]}},{key:"transformTillMorph",value:function(a,g){if("down"==(void 0===g?"up":g))return a.transformTillMorph(this,"up").inverse();g=new mc.Transform;
for(var l=this;l&&l!=a;l=l.owner){var q=l,r=q.origin;q=q.scroll;0===r.x&&0===r.y||g.preConcatenate(new mc.Transform(l.origin));g.preConcatenate(l.getTransform());l!=this&&(0===q.x&&0===q.y||!l.owner||g.preConcatenate(new mc.Transform(q.negated())));l.hasFixedPosition&&l.owner&&g.preConcatenate(new mc.Transform(l.owner.scroll))}return g}},{key:"localize",value:function(a){var g=this.world(),l=a.x,q=a.y;return g?g.transformPointToMorph(this,mc.pt(l,q)):a}},{key:"worldPoint",value:function(a){var g=
this.world(),l=a.x,q=a.y;return g?this.transformPointToMorph(g,mc.pt(l,q)):a.addPt(this.position)}},{key:"transformToMorph",value:function(a){var g=this.getGlobalTransform(),l=a.getGlobalTransform().inverse();g.preConcatenate(l);l=a.scroll;0===l.x&&0===l.y||!a.owner||g.preConcatenate(new mc.Transform(l));return g}},{key:"transformPointToMorph",value:function(a,g){for(var l=this.hasFixedPosition,q=$jscomp.makeIterator(this.pathToMorph(a)),r=q.next();!r.done;r=q.next()){var u=$jscomp.makeIterator(r.value);
r=u.next().value;u=u.next().value;this!=u&&"up"==r&&(g.x-=u.scroll.x,g.y-=u.scroll.y,u.hasFixedPosition&&(l=u.owner&&u.owner.isWorld),u.hasFixedPosition&&u.owner&&u.owner.owner&&(g.x+=u.owner.scroll.x,g.y+=u.owner.scroll.y));this.applyTransform(r,u,g);this!=u&&"down"==r&&(g.x+=u.scroll.x,g.y+=u.scroll.y,u.hasFixedPosition&&(l=u.owner&&u.owner.isWorld),u.hasFixedPosition&&u.owner&&u.owner.owner&&(g.x-=u.owner.scroll.x,g.y-=u.owner.scroll.y))}l&&a.isWorld&&(g.x=g.x-a.position.x+a.scroll.x,g.y=g.y-a.position.y+
a.scroll.y);l&&this.isWorld&&(g.x=g.x+this.position.x-this.scroll.x,g.y=g.y+this.position.y-this.scroll.y);return g}},{key:"transformRectToMorph",value:function(a,g){var l=this,q,r,u;[q=g.topLeft(),r=g.topRight(),u=g.bottomRight(),g=g.bottomLeft()].forEach(function(v){return l.transformPointToMorph(a,v)});return mc.Rectangle.unionPts([q,r,u,g])}},{key:"applyTransform",value:function(a,g,l){"up"==a?(l.x+=g.origin.x,l.y+=g.origin.y,l.matrixTransform(g.getTransform(),l)):(l.matrixTransform(g.getInverseTransform(),
l),l.x-=g.origin.x,l.y-=g.origin.y)}},{key:"_addPathDependant",value:function(a){this._pathDependants.includes(a)||this._pathDependants.push(a)}},{key:"pathToMorph",value:function(a){var g;if(g=this._cachedPaths[a.id])return g;g=this.closestCommonAncestor(a)||this;var l=this,q=[],r=[];for(g._addPathDependant(this);l&&l!=g;)r.push(["up",l]),l._addPathDependant(this),l=l.owner;for(l=a;l&&l!=g;)q.push(["down",l]),l._addPathDependant(this),l=l.owner;return this._cachedPaths[a.id]=g=[].concat($jscomp.arrayFromIterable(r),
$jscomp.arrayFromIterable(q.reverse()))}},{key:"closestCommonAncestor",value:function(a){return mc.arr.intersect([this].concat($jscomp.arrayFromIterable(this.ownerChain())),[a].concat($jscomp.arrayFromIterable(a.ownerChain())))[0]}},{key:"transformForNewOwner",value:function(a){return new mc.Transform(this.transformToMorph(a))}},{key:"localizePointFrom",value:function(a,g){var l=a.x;a=a.y;try{return g.transformPointToMorph(this,mc.pt(l,a))}catch(q){return console.warn("problem "+q+" in localizePointFrom"),
mc.pt}}},{key:"getGlobalTransform",value:function(){return this.transformTillMorph(this.world())}},{key:"globalPosition",get:function(){return this.worldPoint(mc.pt(0,0))}},{key:"globalPosition",set:function(a){return this.position=this.owner?this.owner.localize(a):a}},{key:"ensureToBeInWorldBounds",value:function(){var a=this.world();if(a){var g=this.globalBounds();a=a.innerBounds().translateForInclusion(g).topLeft().subPt(g.topLeft());this.moveBy(a)}}},{key:"getTransform",value:function(){this._transform||
this.updateTransform();return this._transform}},{key:"getInverseTransform",value:function(){this._invTransform||this.updateTransform();return this._invTransform}},{key:"updateTransform",value:function(a){a=void 0===a?{}:a;var g=a.position,l=a.scale,q=a.origin,r=a.rotation;a=this._transform||new mc.Transform;var u=this._invTransform||new mc.Transform;g=g||this.position;q=q||this.origin;l=l||this.scale;r=r||this.rotation;a.a=l*Math.cos(r);a.b=l*Math.sin(r);a.c=l*-Math.sin(r);a.d=l*Math.cos(r);a.e=a.a*
-q.x+a.c*-q.y+g.x;a.f=a.b*-q.x+a.d*-q.y+g.y;g=a.a;l=a.b;q=a.c;r=a.d;var v=a.e,y=a.f,z=1/(g*r-q*l);u.a=r*z;u.b=-l*z;u.c=-q*z;u.d=g*z;u.e=(q*y-v*r)*z;u.f=-(g*y-l*v)*z;this._transform=a;this._invTransform=u}},{key:"setTransform",value:function(a){this.position=a.getTranslation();this.rotation=mc.num.toRadians(a.getRotation());this.scale=a.getScalePoint().x;this.updateTransform(this)}},{key:"fullContainsWorldPoint",value:function(a){return this.fullContainsPoint(null==this.owner?a:this.owner.localize(a))}},
{key:"fullContainsPoint",value:function(a){return this.bounds().containsPoint(a)}},{key:"innerBoundsContainsWorldPoint",value:function(a){return this.innerBoundsContainsPoint(this.localize(a))}},{key:"innerBoundsContainsPoint",value:function(a){return this.innerBounds().containsPoint(a.addPt(this.origin).subPt(this.scroll))}},{key:"get",value:function(a){if(!a)return null;try{return this.getSubmorphNamed(a)||this.getNameTest(this,a)&&this||this.getOwnerOrOwnerSubmorphNamed(a)}catch(g){if(g.constructor==
RangeError&&"Maximum call stack size exceeded"==g.message)throw Error("'get' failed due to a stack overflow. The most\nlikely source of the problem is using 'get' as part of\ntoString, because 'get' calls 'getOwnerOrOwnerSubmorphNamed', which\ncalls 'toString' on this. Try using 'getSubmorphNamed' instead,\nwhich only searches in this' children.\nOriginal error:\n"+g.stack);throw g;}}},{key:"getNameTest",value:function(a,g){if(mc.obj.isRegExp(g)){if(g.test(a.name)||g.test(String(a)))return!0}else if(a.name===
g||String(a)===g)return!0;return!1}},{key:"getAllNamed",value:function(a,g){g=void 0===g?[]:g;if(!this._morphicState||!this.submorphs.length)return g;for(var l=0;l<this.submorphs.length;l++){var q=this.submorphs[l];this.getNameTest(q,a)&&g.push(q)}for(l=0;l<this.submorphs.length;l++)this.submorphs[l].getAllNamed(a,g);return g}},{key:"getSubmorphNamed",value:function(a){if(!this._morphicState||!this.submorphs.length)return null;for(var g=0;g<this.submorphs.length;g++){var l=this.submorphs[g];if(this.getNameTest(l,
a))return l}for(g=0;g<this.submorphs.length;g++)if(l=this.submorphs[g].getSubmorphNamed(a))return l;return null}},{key:"getSubmorphsByStyleClassName",value:function(a){return this.withAllSubmorphsSelect(function(g){return g.styleClasses.includes(a)})}},{key:"getOwnerNamed",value:function(a){return this.ownerChain().find(function(g){return g.name===a})}},{key:"getOwnerOrOwnerSubmorphNamed",value:function(a){var g=this.owner;if(!g)return null;if(g.name===a)return g;for(var l=0;l<g.submorphs.length;l++){var q=
g.submorphs[l];if(q!==this&&(this.getNameTest(q,a)||(q=q.getSubmorphNamed(a))))return q}return this.owner.getOwnerOrOwnerSubmorphNamed(a)}},{key:"getMorphWithId",value:function(a){return this.withAllSubmorphsDetect(function(g){return a===g.id})}},{key:"setMirrored",value:function(a){a?this.removeStyleClass("hidden-in-mirror"):this.addStyleClass("hidden-in-mirror")}},{key:"isMirrored",value:function(){return 0<=this.styleClasses.indexOf("hidden-in-mirror")?!0:!1}},{key:"dragTriggerDistance",get:function(){return 0}},
{key:"onMouseDown",value:function(a){this===a.targetMorph&&(a.state.clickedMorph=this);this===a.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onMouseUp",value:function(a){a.state.clickedMorph=null;this===a.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onMouseMove",value:function(a){}},{key:"onLongClick",value:function(a){}},{key:"addKeyBindings",value:function(a){var g=this;this.addMethodCallChangeDoing({target:this,selector:"addKeyBindings",args:[a],undo:null},function(){g._keybindings||
(g._keybindings=[]);g._cachedKeyhandlers=null;g._keybindings.unshift.apply(g._keybindings,$jscomp.arrayFromIterable(a))})}},{key:"keybindings",get:function(){return this._keybindings||[]}},{key:"keybindings",set:function(a){this._cachedKeyhandlers=null;return this._keybindings=a}},{key:"keyhandlers",get:function(){return this._cachedKeyhandlers||(this._cachedKeyhandlers=[mc.KeyHandler.withBindings(this.keybindings)])}},{key:"keyCommandMap",get:function(){var a=this.keyhandlers[0].platform;return this.keybindings.reduce(function(g,
l){var q=mc.findKeysForPlatform(l.keys,a),r=l.command,u="string"===typeof r?r:r.command||r.name;return"string"!==typeof q?g:q.split("|").reduce(function(v,y){var z={};return Object.assign(v,(z[y]={name:u,command:r,prettyKeys:mc.KeyHandler.prettyCombo(y)},z))},g)},{})}},{key:"keysForCommand",value:function(a,g){g=void 0===g?!0:g;var l=this.keyCommandMap,q=Object.keys(l).find(function(r){return l[r].name===a});return q&&g?l[q].prettyKeys:q}},{key:"simulateKeys",value:function(a){return mc.KeyHandler.simulateKeys(this,
a)}},{key:"onKeyDown",value:function(a){mc.KeyHandler.invokeKeyHandlers(this,a,!1)&&a.stop()}},{key:"onKeyUp",value:function(a){}},{key:"onContextMenu",value:function(a){var g=this;a.targetMorph===this&&(lively.FreezerRuntime||a.stop(),Promise.resolve(this.menuItems()).then(function(l){return g.openMenu(l,a)}).catch(function(l){return $world.logError(l)}))}},{key:"openMenu",value:function(a,g){var l=this.world();return a&&a.length&&l?l.openWorldMenu(g,a):null}},{key:"menuItems",value:function(){return this.world().defaultMenuItems(this)}},
{key:"onCut",value:function(a){}},{key:"onCopy",value:function(a){}},{key:"onPaste",value:function(a){}},{key:"onDragStart",value:function(a){this.undoStart("drag-move");a=a.state;this.position=a.dragStartMorphPosition.addPt(a.absDragDelta)}},{key:"onDragEnd",value:function(a){this.undoStop("drag-move");$world.execCommand("remove snap to guides",this)}},{key:"onDrag",value:function(a){var g=a.state;this.position=g.dragStartMorphPosition.addPt(g.absDragDelta);$world.execCommand("show and snap to guides",
{target:this,showGuides:a.isCtrlDown(),snap:a.isCtrlDown()})}},{key:"onGrab",value:function(a){if(a.isShiftDown()){var g=this.copy();g.position=this.transformPointToMorph(a.hand,mc.pt(0,0));a.hand.grab(g)}else a.hand.grab(this)}},{key:"onDrop",value:function(a){a.hand.dropMorphsOn(this)}},{key:"wantsToBeDroppedOn",value:function(a){return!0}},{key:"onDropHoverIn",value:function(a){}},{key:"onDropHoverUpdate",value:function(a){}},{key:"onDropHoverOut",value:function(a){}},{key:"onBeingDroppedOn",value:function(a,
g){g.addMorph(this)}},{key:"onHoverIn",value:function(a){this.master&&this.requestMasterStyling()}},{key:"onHoverOut",value:function(a){this.master&&this.requestMasterStyling()}},{key:"onScroll",value:function(a){}},{key:"onMouseWheel",value:function(a){}},{key:"onNativeDrop",value:function(a){}},{key:"onNativeDragleave",value:function(a){}},{key:"onNativeDragenter",value:function(a){}},{key:"onNativeDragover",value:function(a){}},{key:"onNativeDragend",value:function(a){}},{key:"onNativeDragstart",
value:function(a){}},{key:"onNativeDrag",value:function(a){}},{key:"focus",value:function(){var a=this.env.eventDispatcher;a&&a.focusMorph(this)}},{key:"onFocus",value:function(a){}},{key:"onBlur",value:function(a){}},{key:"isFocused",value:function(){var a=this.env.eventDispatcher;return a&&a.isMorphFocused(this)}},{key:"exportToJSON",value:function(a){return mc.serializeSpec(this,a)}},{key:"initFromJSON",value:function(a){var g=this;this._env=a.env||a._env||mc.MorphicEnv.default();this._rev=0;this._owner=
null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=a._id||mc.newMorphId(mc.getClassName(this));this._animationQueue=new mc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this.dontRecordChangesWhile(function(){g.initializeProperties();mc.deserializeSpec(a,function(l){return mc.morph(l)},g)});return this}},{key:"copyViaJSON",value:function(){var a=this.exportToJSON();mc.tree.prewalk(a,function(g){return g._id=mc.newMorphId(g.type)},
function(g){return g.submorphs});a.name=a.name.replace(/copy( [0-9]+)?$/,function(g,l){return"copy "+(l&&l.trim()?Number(l)+1:"1")});return mc.morph({type:a.type}).initFromJSON(a)}},{key:"copy",value:function(){return mc.copyMorph(this)}},{key:"interactivelyPublish",value:function(){var a=this,g,l,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return g=a.world()||a.env.world,v.setCatchFinallyBlocks(2),v.yield(System.import("lively.morphic/partsbin.js"),
4);case 4:return l=v.yieldResult,q=l.interactivelySavePart,v.yield(q(a,{notifications:!1,loadingIndicator:!0}),5);case 5:r=v.yieldResult;g.setStatusMessage(r?"Published "+a+" as "+r.name:"Failed to publish part "+a,r?mc.Color.green:mc.Color.red);v.leaveTryBlock(0);break;case 2:u=v.enterCatchBlock(),"canceled"!=u&&g.showError(u),v.jumpToEnd()}})}},{key:"makeDirty",value:function(a){this._dirty=!0;this.owner&&this.owner.makeDirty()}},{key:"needsRerender",value:function(){return this._dirty}},{key:"aboutToRender",
value:function(a){this._dirty=!1;this._rendering=!0}},{key:"onAfterRender",value:function(a){}},{key:"whenRendered",value:function(a){return this.env.whenRendered(this,void 0===a?50:a).then(function(){return!0}).catch(function(){return!1})}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return a.renderMorph(this)}},{key:"applyLayoutIfNeeded",value:function(){if(this._dirty){for(var a=0;a<this.submorphs.length;a++)this.submorphs[a].applyLayoutIfNeeded();
this.layout&&!this.layout.manualUpdate&&this.layout.forceLayout()}}},{key:"requestMasterStyling",value:function(){var a=this;this._rendering||(this.master&&this.master._hasUnresolvedMaster&&(this.master._capturedExtents=new WeakMap,this.withAllSubmorphsDo(function(g){return a.master._capturedExtents.set(g,g.extent)})),this.master&&(this._requestMasterStyling=!0),this.makeDirty())}},{key:"requestStyling",value:function(){this.withAllSubmorphsDo(function(a){a._wantsStyling=!0;a.makeDirty()})}},{key:"renderAsRoot",
value:function(a){var g=this;this.dontRecordChangesWhile(function(){g.applyLayoutIfNeeded()});return mc.renderRootMorph(this,a)}},{key:"renderPreview",value:function(a,g){a=void 0===a?{}:a;g=void 0===g?this.env.renderer:g;return g.renderPreview(this,a)}},{key:"startStepping",value:function(){var a=Array.from(arguments),g="number"===typeof a[0]?a.shift():null,l=a.shift();a=new mc.TargetScript(this,l,a);this.removeEqualScripts(a);this._tickingScripts.push(a);a.startTicking(g);return a}},{key:"tickingScripts",
get:function(){return this._tickingScripts}},{key:"stopStepping",value:function(){mc.arr.invoke(this._tickingScripts,"stop");this._tickingScripts.length=[]}},{key:"stopSteppingScriptNamed",value:function(a){var g=this._tickingScripts.filter(function(l){return l.selector===a});this.stopScripts(g)}},{key:"stopScripts",value:function(a){mc.arr.invoke(a,"stop");this._tickingScripts=mc.arr.withoutAll(this._tickingScripts,a)}},{key:"suspendStepping",value:function(){this._tickingScripts&&mc.arr.invoke(this._tickingScripts,
"suspend")}},{key:"suspendSteppingAll",value:function(){this.withAllSubmorphsDo(function(a){return a.suspendStepping()})}},{key:"resumeStepping",value:function(){mc.arr.invoke(this._tickingScripts,"resume")}},{key:"resumeSteppingAll",value:function(){this.withAllSubmorphsDo(function(a){return mc.arr.invoke(a._tickingScripts,"resume")})}},{key:"removeEqualScripts",value:function(a){this.stopScripts(this._tickingScripts.filter(function(g){return g.equals(a)}))}},{key:"commands",get:function(){return this._commands||
[]}},{key:"commands",set:function(a){this._commands&&this.removeCommands(this._commands);this.addCommands(a)}},{key:"commandsIncludingOwners",get:function(){return mc.arr.flatmap([this].concat(this.ownerChain()),function(a){return mc.arr.sortByKey(a.commands,"name").map(function(g){return{target:a,command:g}})})}},{key:"addCommands",value:function(a){var g=this;this.addMethodCallChangeDoing({target:this,selector:"addCommands",args:[a],undo:{target:this,selector:"removeCommands",args:[a]}},function(){g.removeCommands(a);
g._commands=(g._commands||[]).concat(a)})}},{key:"removeCommands",value:function(a){var g=this;this.addMethodCallChangeDoing({target:this,selector:"removeCommands",args:[a],undo:{target:this,selector:"addCommands",args:[a]}},function(){var l=a.map(function(r){return"string"===typeof r?r:r.name}),q=(g._commands||[]).filter(function(r){return!l.includes(r.name)});q.length?g._commands=q:delete g._commands})}},{key:"commandHandler",get:function(){return this._commandHandler||mc.defaultCommandHandler}},
{key:"lookupCommand",value:function(a){return(a=this.commandHandler.lookupCommand(a,this))&&a.command?a:null}},{key:"execCommand",value:function(a,g,l,q){return this.commandHandler.exec(a,this,g,l,q)}}],[{key:"className",get:function(){return"Morph"}},{key:"propertySettings",get:function(){return{defaultGetter:function(a){return this.getProperty(a)},defaultSetter:function(a,g){this.setProperty(a,g)},valueStoreProperty:"_morphicState"}}},{key:"properties",get:function(){return Object.assign({name:{group:"core",
initialize:function(a){a||(a=mc.getClassName(this),a=(mc.string.startsWithVowel(a)?"an":"a")+a);this.name=a}},isComponent:{group:"core",defaultValue:!1,after:["master"],set:function(a){this.setProperty("isComponent",a);a&&(this.master||delete this._parametrizedProps)}},master:{before:["metadata"],group:"core",set:function(a){this.master&&this.master.equals(a)||(this.setProperty("master",a?mc.ComponentPolicy.for(this,a):0==a?!1:null),a&&this.requestMasterStyling())}},renderOnGPU:{group:"core",defaultValue:!1},
draggable:{group:"interaction",isStyleProp:!0,defaultValue:!1},grabbable:{group:"interaction",isStyleProp:!0,defaultValue:!1,set:function(a){a&&!this.draggable&&(this.draggable=!0);this.setProperty("grabbable",a)}},acceptsDrops:{group:"interaction",isStyleProp:!0,defaultValue:!0},grayscale:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,min:0,max:1,isFloat:!0},blur:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,min:0,isFloat:!0},dropShadow:{group:"styling",type:"Shadow",
isStyleProp:!0,defaultValue:null,set:function(a){a&&!a.isShadowObject&&(a=new mc.ShadowObject(a),a.morph=this);this.setProperty("dropShadow",a)}},tooltip:{group:"core",defaultValue:null},focusable:{group:"interaction",defaultValue:!0},nativeCursor:{group:"interaction",type:"Enum",values:"auto default none context-menu help pointer progress wait cell crosshair text vertical-text alias copy move no-drop not-allowed e-resize n-resize ne-resize nw-resize s-resize se-resize sw-resize w-resize ew-resize ns-resize nesw-resize nwse-resize col-resize row-resize all-scroll zoom-in zoom-out grab grabbing".split(" "),
isStyleProp:!0,defaultValue:"auto"},halosEnabled:{group:"interaction",isStyleProp:!0,defaultValue:!!mc.config.halosEnabled},reactsToPointer:{group:"interaction",isStyleProp:!0,defaultValue:!0},position:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:mc.pt(0,0)},origin:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:mc.pt(0,0)},extent:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:mc.pt(10,10),set:function(a){var g=this.extent;this.setProperty("extent",a);this.origin.equals(mc.pt(0,
0))||(a=mc.pt(a.x/g.x,a.y/g.y),this.adjustOrigin(this.origin.scaleByPt(a)))}},width:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.x},set:function(a){return this.extent=mc.pt(a,this.extent.y)}},height:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.y},set:function(a){return this.extent=mc.pt(this.extent.x,a)}},left:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().left()},
set:function(a){return this.moveBy(mc.pt(a-this.left),0)}},right:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().right()},set:function(a){return this.moveBy(mc.pt(a-this.right),0)}},top:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().top()},set:function(a){return this.moveBy(mc.pt(0,a-this.top))}},bottom:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottom()},
set:function(a){return this.moveBy(mc.pt(0,a-this.bottom))}},center:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().center()},set:function(a){return this.align(this.center,a)}},topLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topLeft()},set:function(a){return this.align(this.topLeft,a)}},topRight:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topRight()},
set:function(a){return this.align(this.topRight,a)}},bottomRight:{group:"geometry",derived:!0,after:["extent","layout"],get:function(){return this.bounds().bottomRight()},set:function(a){return this.align(this.bottomRight,a)}},bottomLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomLeft()},set:function(a){return this.align(this.bottomLeft,a)}},bottomCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomCenter()},
set:function(a){return this.align(this.bottomCenter,a)}},topCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topCenter()},set:function(a){return this.align(this.topCenter,a)}},leftCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().leftCenter()},set:function(a){return this.align(this.leftCenter,a)}},rightCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().rightCenter()},
set:function(a){return this.align(this.rightCenter,a)}},rotation:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0},flipped:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},tilted:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},perspective:{group:"geometry",type:"Number",isStyleProp:!0,defaultValue:0,min:0},scale:{group:"geometry",type:"Number",min:0,isFloat:!0,isStyleProp:!0,defaultValue:1},hasFixedPosition:{group:"geometry",
doc:"When morph is submorph of world hasFixedPosition == true will keep the morph at the same position relative to top left of the browser window. This means, when the world is scrolled, the morph keeps its place.",defaultValue:!1},opacity:{group:"styling",type:"Number",isFloat:!0,min:0,max:1,isStyleProp:!0,defaultValue:1},fill:{group:"styling",type:"ColorGradient",isStyleProp:!0,defaultValue:mc.Color.white},visible:{group:"styling",isStyleProp:!0,defaultValue:!0,set:function(a){a||this.makeDirty();
this.setProperty("visible",a)}},submorphs:{group:"core",defaultValue:[],after:["isLayoutable","origin","position","rotation","scale"],get:function(){return(this.getProperty("submorphs")||[]).concat()},set:function(a){var g=this,l=this.layout,q=l&&l.isEnabled();q&&l.disable();this.submorphs.forEach(function(r){return a.includes(r)||r.remove()});a.forEach(function(r,u){return g.submorphs[u]!==r&&g.addMorph(r,g.submorphs[u])});q&&l.enable()}},clipMode:{group:"styling",type:"Enum",values:["visible","hidden",
"scroll","auto"],isStyleProp:!0,defaultValue:"visible",set:function(a){this.setProperty("clipMode",a);this.isClip()||(this.scroll=mc.pt(0,0))}},scroll:{group:"geometry",defaultValue:mc.pt(0,0),after:["clipMode","submorphs"],type:"Point",set:function(a){var g=a.x;a=a.y;if(this.isClip()){var l=this.scrollExtent.subPt(this.extent),q=l.y;g=Math.max(0,Math.min(l.x,g));a=Math.max(0,Math.min(q,a));this.setProperty("scroll",mc.pt(g,a));this.makeDirty()}}},scrollbarOffset:{group:"styling",defaultValue:mc.pt(15,
15)},styleClasses:{group:"styling",isStyleProp:!0,defaultValue:["morph"],get:function(){return this._cachedStyleClasses||(this._cachedStyleClasses=this.constructor.styleClasses.concat(this.getProperty("styleClasses")))},set:function(a){this._cachedStyleClasses=null;this.setProperty("styleClasses",mc.arr.withoutAll(a,this.constructor.styleClasses));this.requestStyling()}},layout:{group:"layouting",isStyleProp:!0,type:"Layout",after:["submorphs","extent","origin","position","isLayoutable"],set:function(a){a&&
(a.container=this);this.setProperty("layout",a)}},isLayoutable:{group:"layouting",isStyleProp:!0,defaultValue:!0},borderLeft:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleLeft","borderWidthLeft","borderColorLeft"],get:function(){return{style:this.borderStyleLeft,width:this.borderWidthLeft,color:this.borderColorLeft}},set:function(a){"style"in a&&(this.borderStyleLeft=a.style);"width"in a&&(this.borderWidthLeft=a.width);"color"in a&&(this.borderColorLeft=a.color);"radius"in a&&(this.borderRadiusLeft=
a.radius)}},borderRight:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleRight","borderWidthRight","borderColorRight"],get:function(){return{style:this.borderStyleRight,width:this.borderWidthRight,color:this.borderColorRight}},set:function(a){"style"in a&&(this.borderStyleRight=a.style);"width"in a&&(this.borderWidthRight=a.width);"color"in a&&(this.borderColorRight=a.color);"radius"in a&&(this.borderRadiusRight=a.radius)}},borderBottom:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleBottom",
"borderWidthBottom","borderColorBottom"],get:function(){return{style:this.borderStyleBottom,width:this.borderWidthBottom,color:this.borderColorBottom}},set:function(a){"style"in a&&(this.borderStyleBottom=a.style);"width"in a&&(this.borderWidthBottom=a.width);"color"in a&&(this.borderColorBottom=a.color);"radius"in a&&(this.borderRadiusBottom=a.radius)}},borderTop:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleTop","borderWidthTop","borderColorTop"],get:function(){return{style:this.borderStyleTop,
width:this.borderWidthTop,color:this.borderColorTop}},set:function(a){"style"in a&&(this.borderStyleTop=a.style);"width"in a&&(this.borderWidthTop=a.width);"color"in a&&(this.borderColorTop=a.color);"radius"in a&&(this.borderRadiusTop=a.radius)}},borderWidth:{group:"styling",isStyleProp:!0,type:"Number",foldable:["top","left","right","bottom"],min:0,defaultValue:{top:0,bottom:0,left:0,right:0,valueOf:function(){return 0}},get:function(){var a=this.getProperty("borderWidth");return Object.assign({},
a,{valueOf:function(){return a.left}})},set:function(a){mc.obj.isNumber(a)&&(a={left:a,right:a,top:a,bottom:a});this.setProperty("borderWidth",a)}}},mc.generateUnfolded("borderWidth",void 0,"styling"),{borderRadius:{group:"styling",isStyleProp:!0,type:"Number",min:0,foldable:["top","left","right","bottom"],defaultValue:{top:0,bottom:0,right:0,left:0,valueOf:function(){return 0}},get:function(){var a=this.getProperty("borderRadius");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){a||
(a=0);mc.obj.isNumber(a)&&(a={left:a,right:a,top:a,bottom:a});a.isRectangle&&(a={left:a.left(),right:a.right(),top:a.top(),bottom:a.bottom()});this.setProperty("borderRadius",a)}}},mc.generateUnfolded("borderRadius",void 0,"styling"),{borderStyle:{group:"styling",isStyleProp:!0,type:"Enum",foldable:["top","left","right","bottom"],values:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),defaultValue:{top:"solid",left:"solid",bottom:"solid",right:"solid",valueOf:function(){return"solid"}},
get:function(){var a=this.getProperty("borderStyle");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){mc.obj.isString(a)&&(a={left:a,right:a,top:a,bottom:a});this.setProperty("borderStyle",a)}}},mc.generateUnfolded("borderStyle",void 0,"styling"),{borderColor:{group:"styling",isStyleProp:!0,type:"Color",foldable:["top","left","right","bottom"],defaultValue:{top:mc.Color.white,left:mc.Color.white,bottom:mc.Color.white,right:mc.Color.white,valueOf:function(){return mc.Color.white}},
get:function(){var a=this.getProperty("borderColor");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){a||(a=mc.Color.white);a.isColor&&(a={top:a,left:a,right:a,bottom:a});this.setProperty("borderColor",a?mc.obj.extract(a,["top","left","right","bottom"],function(g,l){return mc.obj.isArray(l)?mc.Color.fromTuple(l):l}):a)}}},mc.generateUnfolded("borderColor",void 0,"styling"),{border:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyle","borderWidth","borderColor"],
get:function(){var a=this;return{get style(){return a.borderStyle},set style(g){a.borderStyle=g},get width(){return a.borderWidth},set width(g){a.borderWidth=g},get color(){return a.borderColor},set color(g){a.borderColor=g},get borderRadius(){return a.borderRadius},set borderRadius(g){a.borderRadius=g}}},set:function(a){"style"in a&&(this.borderStyle=a.style);"width"in a&&(this.borderWidth=a.width);"color"in a&&(this.borderColor=a.color);"radius"in a&&(this.borderRadius=a.radius)}},styleProperties:{group:"styling",
derived:!0,readOnly:!0,get:function(){var a=this.propertiesAndPropertySettings(),g=a.properties,l=[];a=$jscomp.makeIterator(a.order);for(var q=a.next();!q.done;q=a.next())q=q.value,g[q].isStyleProp&&l.push(q);return l}},style:{group:"styling",derived:!0,readOnly:!0,get:function(){for(var a=this.styleProperties,g={},l=0;l<a.length;l++){var q=a[l];g[q]=this[q]}return g}},epiMorph:{group:"core",doc:"epi morphs are 'transient' morphs, i.e. meta objects that should not be serialized like halo items, menus, etc.",
defaultValue:!1},respondsToVisibleWindow:{group:"interaction",doc:"Morphs will respond to changes to the visible browser window and a call will be made to the morph's relayout function, supplying the event generated",defaultValue:!1},installedFonts:{doc:"custom fonts can be installed from a respective morph, and are then kept as part of this morph's state in order to be loaded again the next time the it is cold loaded. (i.e. deserialization of a part)",defaultValue:{},set:function(a){var g=mc.arr.without(mc.obj.keys(this.installedFonts||
{}),"_rev"),l=mc.arr.without(mc.obj.keys(a||{}),"_rev");this.setProperty("installedFonts",a);this.ensureInstalledFonts(g,l)},get:function(){return this.getProperty("installedFonts")||{}}},metadata:{group:"core"}})}},{key:"styleClasses",get:function(){if(this.hasOwnProperty("_styclassNames"))return this._styleClasses;for(var a=this,g=[];a&&a!==Object;)g.push(a.className),a=a[Symbol.for("lively-instance-superclass")];return this._styleClasses=g}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1640,end:78680})}(void 0));mc.Morph=nk;mc.Morph=nk;mc.Morph=nk;var Ey=sa("ak",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=e.hasOwnProperty("Ellipse")&&"function"===typeof e.Ellipse?e.Ellipse:e.Ellipse=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Sb(m,b,void 0,[{key:"className",get:function(){return"Ellipse"}},{key:"properties",get:function(){return{borderRadius:{derived:!0,get:function(){var a=this;return{top:this.borderRadiusTop,right:this.borderRadiusRight,left:this.borderRadiusLeft,bottom:this.borderRadiusBottom,valueOf:function(){return a.borderRadiusLeft}}}},borderRadiusLeft:{get:function(){return this.height},set:function(){}},borderRadiusRight:{get:function(){return this.height},set:function(){}},borderRadiusTop:{get:function(){return this.width},
set:function(){}},borderRadiusBottom:{get:function(){return this.width},set:function(){}}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:78690,end:79439})}(mc.Morph));mc.Ellipse=Ey;mc.Ellipse=Ey;mc.Ellipse=Ey;var VA=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),
m=e.hasOwnProperty("Triangle")&&"function"===typeof e.Triangle?e.Triangle:e.Triangle=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.update()}},{key:"onChange",value:function(a){("extent"==a.prop||"direction"==a.prop||
"fill"==a.prop&&a.value)&&this.update();Sb._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a)}},{key:"update",value:function(){var a=this.extent,g=a.x;a=a.y;g!=a&&(this.extent=mc.pt(Math.max(g,a),Math.max(g,a)));this.origin=mc.pt(g/2,a/2);var l=this.triangleFill=this.fill||this.triangleFill;this.fill=null;g={width:g/2,style:"solid",color:l};a={width:a/2,style:"solid",color:mc.Color.transparent};switch(this.direction){case "down":var q="borderLeft";var r="borderRight";var u="borderTop";
break;case "up":q="borderLeft";r="borderRight";u="borderBottom";break;case "left":q="borderBottom";r="borderTop";u="borderRight";break;case "right":q="borderBottom",r="borderTop",u="borderLeft"}l={};Object.assign(this,(l[q]=a,l[r]=a,l[u]=g,l))}}],[{key:"className",get:function(){return"Triangle"}},{key:"properties",get:function(){return{direction:{defaultValue:"up"},triangleFill:{after:["fill"],initialize:function(){this.triangleFill=this.fill}}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:79448,end:80863})}(mc.Morph);mc.Triangle=VA;mc.Triangle=VA;mc.Triangle=VA;var Fy=sa("I",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=e.hasOwnProperty("Image")&&"function"===typeof e.Image?e.Image:e.Image=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Sb(m,b,[{key:"__deserialize__",value:function(a,g,l,q){this._isDeserializing=!0;Sb._get(Object.getPrototypeOf(m.prototype),"__deserialize__",this).call(this,a,g,l,q)}},{key:"__after_deserialize__",value:function(a,g){delete this._isDeserializing;Sb._get(Object.getPrototypeOf(m.prototype),"__after_deserialize__",this).call(this,a,g)}},{key:"isImage",get:function(){return!0}},{key:"ratio",get:function(){var a=this.naturalExtent;return a.x/a.y}},{key:"setWidthKeepingRatio",value:function(a){this.width=
a;this.height=a/this.ratio}},{key:"setHeightKeepingRatio",value:function(a){this.width=this.ratio*a;this.height=a}},{key:"loadUrl",value:function(a,g){var l=this;g=void 0===g?this.autoResize:g;var q=this.autoResize;this.autoResize=g;this.imageUrl=a;return mc.promise.finally(this.whenLoaded(),function(){return l.autoResize=q})}},{key:"whenLoaded",value:function(){var a=this;return this.isLoaded?Promise.resolve(this):new Promise(function(g,l){var q=a.imageUrl;a.imageElement(function(r){a.imageUrl!==
q&&l(Error("url changed ("+q+" => "+a.imageUrl+")"));a.naturalExtent=mc.pt(r.width,r.height);a.isLoaded=!0;g(a)})})}},{key:"determineNaturalExtent",value:function(){var a=this;return this.whenLoaded().then(function(){return a.naturalExtent})}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return a.renderImage(this)}},{key:"clear",value:function(){return this.loadUrl("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
!1)}},{key:"imageElement",value:function(a){var g=this;return new Promise(function(l,q){var r=g.env.domEnv.document.createElement("img");r.onload=function(){l(r);"function"===typeof a&&a(r)};r.src=g.imageUrl})}},{key:"canvasElementAndContext",value:function(){var a=this,g,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return g=a.env.domEnv.document,u.yield(a.imageElement(),2);l=u.yieldResult;q=g.createElement("canvas");r=q.getContext("2d");q.width=l.width;
q.height=l.height;r.drawImage(l,0,0,l.width,l.height);return u.return({canvas:q,ctx:r,image:l})})}},{key:"imageData",value:function(a){var g=this,l,q,r,u,v,y,z,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){if(1==B.nextAddress)return B.yield(g.canvasElementAndContext(),2);l=B.yieldResult;q=l.ctx;r=l.image;a||(a=mc.rect(0,0,r.width,r.height));u=a;v=u.x;y=u.y;z=u.width;A=u.height;console.log(v,y);return B.return(q.getImageData(v,y,z,A))})}},{key:"pixelAt",value:function(a){var g=this;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?l.yield(g.imageData(a.extent(mc.pt(1,1))),2):l.return(l.yieldResult.data)})}},{key:"colorAt",value:function(a){var g=this,l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(l=mc.Color,q=l.fromTuple8Bit,r.yield(g.pixelAt(a),2)):r.return(q.call(l,r.yieldResult))})}},{key:"loadArrayBuffer",value:function(a,g){a=new Uint8Array(a);a=new Blob([a],{type:"image/jpeg"});this.imageUrl=
(window.URL||window.webkitURL).createObjectURL(a);this.makeDirty()}},{key:"convertToBase64",value:function(){var a=this,g,l,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return g=a.imageUrl,l=g.slice(g.lastIndexOf(".")+1,g.length).toLowerCase(),"jpg"===l?l="jpeg":"svg"===l&&(l="svg+xml"),["gif","jpeg","png","tiff","svg+xml"].includes(l)||(l="gif"),g.startsWith("http")||(g=location.origin+"/"+g),z.yield(System.import("lively.ide/shell/shell-interface"),
2);if(3!=z.nextAddress)return q=z.yieldResult,r=q.runCommand,u='curl --silent "'+g+'" | openssl base64',z.yield(r(u).whenDone(),3);v=z.yieldResult;y=v.stdout;return z.return(a.loadUrl("data:image/"+l+";base64,"+y,!1))})}},{key:"downloadImage",value:function(){var a=this.imageUrl;if(a.match(/^data:image/)){var g=this.name||"image-from-lively";var l=a.match(/image\/([^;]+)/);l&&l[1]&&(g+="."+l[1])}else g||(g=mc.arr.last(a.split("/")));l=document.createElement("a");l.download=g;l.href=a;l.click()}},
{key:"convertTo",value:function(a,g){g||(g=1);var l=this.canvasElementAndContext(),q=l.ctx,r=l.canvas;l=l.image;var u=this.width,v=this.height;r.width=l.width;r.height=l.height;q.drawImage(l,0,0,u,v);return this.loadUrl(r.toDataURL(a,g),!1)}},{key:"resampleImageToFitBounds",value:function(){var a=this,g,l,q,r,u,v,y,z,A,B,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return E.yield(a.canvasElementAndContext(),2);g=E.yieldResult;l=g.ctx;q=g.canvas;r=g.image;u=
a;v=u.width;y=u.height;z=r;A=z.width;B=z.height;q.width=A;q.height=B;l.drawImage(r,0,0,v,y);G=l.getImageData(0,0,A,B);q.width=v;q.height=y;l.putImageData(G,0,0);return E.return(a.loadUrl(q.toDataURL(),!1))})}},{key:"crop",value:function(a){var g=this.canvasElementAndContext(),l=g.ctx,q=g.canvas;g=g.image;var r=this.innerBounds(),u=g.width,v=g.height;a=r.intersection(a);a=new mc.Rectangle(a.x/r.width,a.y/r.height,a.width/r.width,a.height/r.height);a=$jscomp.makeIterator((new mc.Rectangle(0,0,u,v)).divide([a])).next().value;
q.width=u;q.height=v;l.drawImage(g,0,0,u,v);g=l.getImageData(a.x,a.y,a.width,a.height);q.width=a.width;q.height=a.height;l.putImageData(g,0,0);return this.loadUrl(q.toDataURL(),!1)}},{key:"interactivelyChangeImageURL",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(a.world().prompt("Enter image url",{historyId:"lively.morphic-image-url-inputs",input:a.imageUrl.startsWith("data:")?"":a.imageUrl,requester:a}),2);g=l.yieldResult;
"string"===typeof g&&(a.imageUrl=g);l.jumpToEnd()})}},{key:"menuItems",value:function(){var a=this,g=Sb._get(Object.getPrototypeOf(m.prototype),"menuItems",this).call(this);g.unshift(["change image url...",function(){return a.interactivelyChangeImageURL()}],["resize image to to fit world",function(){var l=Math.min(a.world().visibleBounds().width/a.naturalExtent.x,a.world().visibleBounds().height/a.naturalExtent.y);a.extent=a.naturalExtent.scaleBy(l)}],["resize image to its real image size",function(){return a.extent=
a.naturalExtent}],["resample image to fit current bounds",function(){return a.resampleImageToFitBounds()}],{isDivider:!0});return g}}],[{key:"className",get:function(){return"Image"}},{key:"properties",get:function(){return{imageUrl:{isStyleProp:!0,copyAssetOnFreeze:!0,after:["extent","autoResize"],defaultValue:System.decanonicalize("lively.morphic/lively-web-logo-small.svg"),set:function(a){var g=this;this.isLoaded=!1;this.setProperty("imageUrl",a);this.setProperty("naturalExtent",null);var l=this.autoResize&&
!this._isDeserializing;this.whenLoaded().then(function(){g.imageUrl===a&&(g.isLoaded=!0,l&&(g.extent=g.naturalExtent))})}},fill:{defaultValue:mc.Color.transparent},naturalExtent:{defaultValue:null},isLoaded:{defaultValue:!1,serialize:!1},autoResize:{isStyleProp:!0,defaultValue:!1}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:80872,end:90077})}(mc.Morph));mc.Image=Fy;mc.Image=Fy;mc.Image=Fy;var aE=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=e.hasOwnProperty("PathPoint")&&"function"===typeof e.PathPoint?e.PathPoint:e.PathPoint=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){g=void 0===g?{}:g;this.path=
a;this._isSmooth=g.isSmooth||!1;this.x=g.position?g.position.x:g.x||0;this.y=g.position?g.position.y:g.y||0;this._controlPoints=g.controlPoints}},{key:"__dont_serialize__",get:function(){return["attributeConnections","$$controlPoints","$$position","doNotCopyProperties","doNotSerialize"]}},{key:"isPathPoint",get:function(){return!0}},{key:"isSmooth",get:function(){return this._isSmooth||!1}},{key:"isSmooth",set:function(a){this._isSmooth!==a&&(this._isSmooth=a,this.adaptControlPoints(a))}},{key:"position",
get:function(){return mc.pt(this.x,this.y)}},{key:"position",set:function(a){var g=a.y;this.x=a.x;this.y=g;this.path.makeDirty()}},{key:"moveBy",value:function(a){this.position=this.position.addPt(a);this.path.onVertexChanged(this);return this}},{key:"copy",value:function(){var a=new mc.ExpressionSerializer;return new mc.PathPoint(this.path,a.deserializeExprObj(this.__serialize__()))}},{key:"__serialize__",value:function(){return{__expr__:("({\n         position: "+this.position.toString(!1)+",\n         isSmooth: "+
this.isSmooth+",\n         controlPoints: {\n           next: "+this.controlPoints.next.toString(!1)+",\n           previous: "+this.controlPoints.previous.toString(!1)+"\n         }\n      })").replace(/[\n|\s]/g,""),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}}},{key:"controlPoints",get:function(){return this._controlPoints||{next:mc.pt(0,0),previous:mc.pt(0,0)}}},{key:"controlPoints",set:function(a){var g=a=void 0===a?{}:a;a=g.next;g=g.previous;this._controlPoints={next:a?mc.Point.fromLiteral(a):
mc.pt(0,0),previous:g?mc.Point.fromLiteral(g):mc.pt(0,0)};this.path.makeDirty()}},{key:"moveNextControlPoint",value:function(a){this.moveControlPoint("next",a)}},{key:"movePreviousControlPoint",value:function(a){this.moveControlPoint("previous",a)}},{key:"moveControlPoint",value:function(a,g){var l=this.controlPoints[a];l=l?l.addPt(g):g;g="next"==a?"previous":"next";var q=this.controlPoints[g];this.isSmooth&&(q=l.negated().normalized().scaleBy(q.r()));var r={};this.controlPoints=(r[a]=l,r[g]=q,r);
this.path.onVertexChanged(this)}},{key:"pointOnLine",value:function(a,g,l,q){a=mc.pt(a.x,a.y);g=mc.pt(g.x,g.y);a=g.subPt(a);var r=a.scaleBy(1/a.r());l=g.subPt(l).dotProduct(r);return g.subPt(r.scaleBy(Math.max(1,Math.min(l,a.r())))).addXY(q,q)}},{key:"nextVertex",get:function(){return this.path.vertexAfter(this)}},{key:"previousVertex",get:function(){return this.path.vertexBefore(this)}},{key:"adaptControlPoints",value:function(a){var g=this.nextVertex,l=this.previousVertex,q=this.position,r=this.path,
u=r.vertices,v=u.indexOf(this),y=0===v;u=v===u.length-1;l=l?l.position:q;g=g?g.position:q;a?(a=this.pointOnLine(l,g,q,r.borderWidth),this.controlPoints={previous:y?mc.pt(0,0):a.subPt(g),next:a.subPt(l)}):this.controlPoints={previous:y?mc.pt(0,0):l.subPt(q).scaleBy(.5),next:u?mc.pt(0,0):g.subPt(q).scaleBy(.5)};r.onVertexChanged(this)}}],[{key:"className",get:function(){return"PathPoint"}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:90086,end:93804})}(void 0);mc.PathPoint=aE;mc.PathPoint=aE;mc.PathPoint=aE;var Gy=sa("aw",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=e.hasOwnProperty("Path")&&"function"===typeof e.Path?e.Path:e.Path=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Object.assign({},mc.obj.dissoc(a,"origin")));this.adjustOrigin(a.origin||this.origin);this.position=a.position||this.position;this.updateBounds(this.vertices)}},{key:"__after_deserialize__",value:function(a,g){Sb._get(Object.getPrototypeOf(m.prototype),"__after_deserialize__",this).call(this,a,g);this.updateBounds(this.vertices)}},
{key:"__additionally_serialize__",value:function(a,g,l,q){Sb._get(Object.getPrototypeOf(m.prototype),"__additionally_serialize__",this).call(this,a,g,l,q);g=this.getProperty("draggable");g!=this.propertiesAndPropertySettings().properties.draggable.defaultValue&&(a.props.draggable={value:g});if(g=this.borderColor.valueOf())a.props.borderColor={key:"borderColor",value:l.expressionSerializer.exprStringEncode({__expr__:g.toJSExpr(),bindings:{"lively.graphics/geometry-2d.js":["pt","rect"],"lively.graphics/color.js":["Color",
mc.getClassName(g)]}})}}},{key:"isPath",get:function(){return!0}},{key:"isSvgMorph",get:function(){return!0}},{key:"onVertexChanged",value:function(a){this.makeDirty();this.updateBounds(this.vertices)}},{key:"copyVertices",value:function(){return this.vertices.map(function(a){return a.copy()})}},{key:"updateBounds",value:function(a){a=void 0===a?this.vertices:a;if(a.length&&!this._adjustingVertices){this._adjustingVertices=!0;var g=this.origin,l=this.extent,q=g.x/l.x;l=g.y/l.y;var r=[];a.forEach(function(v,
y){var z=v.isSmooth,A=v.position,B=v.controlPoints||{};v=B.next;B=B.previous;r.push(A);z&&0<y&&y<a.length-1&&r.push(A.addPt(v),A.addPt(B))});g=mc.Rectangle.unionPts(r);q=mc.pt(g.width*q,g.height*l);var u=g.topLeft();a.forEach(function(v){return v.moveBy(u.negated())});this.moveBy(this.getTransform().transformDirection(u));this.extent=g.extent().maxPt(mc.pt(this.borderWidth,this.borderWidth));this.origin=q;this._adjustingVertices=!1}}},{key:"onChange",value:function(a){var g=a.prop,l=a.value,q=a.prevValue,
r=this._adjustingVertices,u=this._adjustingOrigin;"extent"==g&&l&&q&&!r&&this.adjustVertices(l.scaleByPt(q.inverted()));(!u&&"vertices"===g||"borderWidthLeft"===g)&&this.updateBounds("vertices"==g?l:this.vertices);r||"origin"!==g||this.updateBounds(this.vertices);Sb._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a)}},{key:"vertexBefore",value:function(a){a=this.vertices.indexOf(a)-1;return this.vertices[0<=a?a:this.vertices.length-1]}},{key:"vertexAfter",value:function(a){a=this.vertices.indexOf(a)+
1;return this.vertices[a>this.vertices.length-1?0:a]}},{key:"adjustVertices",value:function(a){var g=this,l=this.vertices;l&&l.forEach(function(q){var r=q.controlPoints,u=r.next;r=r.previous;u=u.scaleByPt(a);r=r.scaleByPt(a);q.position=q.position.addPt(g.origin).scaleByPt(a).subPt(g.origin);q.controlPoints={next:u,previous:r}})}},{key:"adjustOrigin",value:function(a){this._adjustingOrigin=!0;var g=this.origin;this.vertices.forEach(function(l){return l.position=g.subPt(a).addXY(l.x,l.y)});Sb._get(Object.getPrototypeOf(m.prototype),
"adjustOrigin",this).call(this,a);this._adjustingOrigin=!1}},{key:"addVertex",value:function(a,g){g=void 0===g?null:g;var l=this.vertices;g="number"===typeof g?g:g&&g.isPathPoint?l.indexOf(g):void 0;"number"===typeof g&&-1<g?l.splice(g,0,a):l.push(a);this.vertices=l}},{key:"addVertexCloseTo",value:function(a){var g=this.verticesCloseTo(a),l=g.closest,q=l.length;l=l.vertex;g=g.next;a=this.findClosestPointOnPath(a,10,3);return this.addVertex(a.point,a.length<=q?l:g?g.vertex:null)}},{key:"render",value:function(a){return a.renderPath(this)}},
{key:"_pathNode",get:function(){var a=mc.PropertyPath("env.renderer").get(this);return(a=a&&a.getNodeForMorph(this))&&a.querySelector("#svg"+mc.string.regExpEscape(this.id))}},{key:"verticesCloseTo",value:function(a,g){g=void 0===g?!0:g;for(var l=this.vertices,q=Infinity,r=-1,u=0;u<l.length;u++){var v=l[u].position.dist(a);v>=q||(q=v,r=u)}a=0===r?null:{index:r-1,vertex:l[r-1]};q=r===l.length-1?null:{index:r+1,vertex:l[r+1]};l={index:r,vertex:l[r]};g&&(g=this._pathNode,a&&(r=this.findClosestPointOnPath(a.vertex.position,
6,3,g).length,a.length=r),q&&(r=this.findClosestPointOnPath(q.vertex.position,6,3,g).length,q.length=r),g=this.findClosestPointOnPath(l.vertex.position,20,3,g).length,l.length=g);return{previous:a,next:q,closest:l}}},{key:"findClosestPointOnPath",value:function(a,g,l,q){function r(u,v,y,z,A,B,G){y=void 0===y?10:y;z=void 0===z?3:z;A=void 0===A?0:A;B=void 0===B?u.getTotalLength():B;G=void 0===G?0:G;var E=B,K=y;B=[];var J=(A-E)/(K-1),P=0;B.push([mc.Point.ensure(u.getPointAtLength(E)),E,P]);for(P=1;P<
K-1;P++){var ea=E+P*J;B.push([mc.Point.ensure(u.getPointAtLength(ea)),ea,P])}B.push([mc.Point.ensure(u.getPointAtLength(A)),A,P]);A=Infinity;E=-1;K=$jscomp.makeIterator(B);for(J=K.next();!J.done;J=K.next())P=$jscomp.makeIterator(J.value),J=P.next().value,P.next(),P=P.next().value,J=v.dist(J),J>=A||(A=J,E=P);if(G>=z)return v=$jscomp.makeIterator(B[E]),u=v.next().value,v=v.next().value,{point:u,length:v};A=B[Math.max(0,E-1)][1];B=B[Math.min(B.length-1,E+1)][1];return r(u,v,y,z,A,B,G+1)}q||(q=(q=this.env.renderer.getNodeForMorph(this))&&
q.querySelector("#svg"+mc.string.regExpEscape(this.id)));return q?r(q,a,g,l):{length:0,point:a}}},{key:"onDragStart",value:function(a){var g=a.domEvt.target,l=(new mc.PropertyPath("attributes.class.value")).get(g);if(l&&l.includes("path-point"))l=$jscomp.makeIterator(l.match(/path-point-([0-9]+)(?:-control-([0-9]+))?$/)),l.next(),a=l.next().value,l=l.next().value,this._controlPointDrag={marker:g,n:Number(a)},void 0!==l&&(this._controlPointDrag.ctrlN=Number(l));else return Sb._get(Object.getPrototypeOf(m.prototype),
"onDragStart",this).call(this,a)}},{key:"onDrag",value:function(a){if(!this._controlPointDrag)return Sb._get(Object.getPrototypeOf(m.prototype),"onDrag",this).call(this,a);var g=this._controlPointDrag,l=g.n,q=g.ctrlN,r=this.vertices;if(g=r[l])a=this.getInverseTransform().transformDirection(a.state.dragDelta),void 0===q?(g.moveBy(a),a=r[l-1],r=r[l+1],a&&10>a.position.dist(g.position)?this._controlPointDrag.maybeMerge=[l-1,l]:r&&10>r.position.dist(g.position)?this._controlPointDrag.maybeMerge=[l,l+
1]:this._controlPointDrag.maybeMerge=void 0):1===q?g.movePreviousControlPoint(a):2===q&&g.moveNextControlPoint(a)}},{key:"onDragEnd",value:function(a){a=this.vertices;var g=this._controlPointDrag;if(g&&(g=g.maybeMerge,delete this._controlPointDrag,g)){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;a[g].controlPoints.next=a[l].controlPoints.next;a.splice(l,1);this.vertices=a}}},{key:"onMouseDown",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onMouseDown",this).call(this,
a);2===a.state.clickCount&&this.addVertexCloseTo(this.localize(a.position))}},{key:"menuItems",value:function(){var a=this,g=mc.Icon.textAttribute("check-square",{textStyleClasses:["far"]}),l=mc.Icon.textAttribute("square",{textStyleClasses:["far"]});l[1].paddingRight="7px";g[1].paddingRight="5px";return[[[].concat($jscomp.arrayFromIterable(this.showControlPoints?g:l),[" control points"]),function(){return a.showControlPoints=!a.showControlPoints}],[[].concat($jscomp.arrayFromIterable(this.isSmooth?
g:l),[" smooth"]),function(){return a.isSmooth=!a.isSmooth}],{isDivider:!0}].concat($jscomp.arrayFromIterable(Sb._get(Object.getPrototypeOf(m.prototype),"menuItems",this).call(this)))}},{key:"getPointOnPath",value:function(a){if(!this._pathNode)return mc.pt(0,0);a=this._pathNode.getPointAtLength(this._pathNode.getTotalLength()*a)||mc.pt(0,0);return mc.pt(a.x,a.y)}}],[{key:"className",get:function(){return"Path"}},{key:"properties",get:function(){return{borderColor:{isStyleProp:!0,type:"ColorGradient",
foldable:["top","left","right","bottom"],set:function(a){a||(a=mc.Color.white);if(a.isColor||a.isGradient)a={top:a,left:a,right:a,bottom:a};this.setProperty("borderColor",mc.obj.extract(a,["top","left","right","bottom"],function(g,l){return mc.obj.isArray(l)?mc.Color.fromTuple(l):l}))}},showControlPoints:{defaultValue:!1},vertices:{defaultValue:[],after:["isSmooth","borderWidth"],before:["extent","origin"],type:"Vertices",set:function(a){var g=this,l=this.isSmooth;this._adjustingVertices=!0;a=a.map(function(q){return q.isPathPoint?
Object.assign(q,{path:g}):new mc.PathPoint(g,Object.assign({isSmooth:l},q))});this.setProperty("vertices",a);this._adjustingVertices=!1;this.updateBounds(a)}},startMarker:{defaultValue:null,type:"Object"},endMarker:{defaultValue:null,type:"Object"},endStyle:{type:"Enum",values:["butt","round","square"],defaultValue:"butt"},drawnProportion:{type:"Number",isFloat:!0,min:-1,max:1,defaultValue:0},cornerStyle:{type:"Enum",values:["arcs","bevel","miter","miter-clip","round"],defaultValue:"miter"},draggable:{get:function(){return this.getProperty("draggable")||
this.showControlPoints}},isSmooth:{defaultValue:!1,before:["vertices"],type:"Boolean",set:function(a){this.setProperty("isSmooth",a);this.vertices&&(this._adjustingVertices=!0,this.vertices.forEach(function(g){return g.isSmooth=a}),this._adjustingVertices=!1,this.updateBounds(this.vertices))}}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:93813,end:107114})}(mc.Morph));mc.Path=Gy;mc.Path=Gy;mc.Path=Gy;var WA=sa("ax",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=e.hasOwnProperty("Polygon")&&"function"===typeof e.Polygon?e.Polygon:e.Polygon=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){if(a.vertices&&2<a.vertices.length)Sb._get(Object.getPrototypeOf(m.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);else throw Error("A polygon requires 3 or more vertices!");}},{key:"isPolygon",get:function(){return!0}}],[{key:"className",get:function(){return"Polygon"}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:107123,end:107377})}(mc.Path));
mc.Polygon=WA;mc.Polygon=WA;mc.Polygon=WA;var XA=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=e.hasOwnProperty("LineMorph")&&"function"===typeof e.LineMorph?e.LineMorph:e.LineMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"isPolygon",get:function(){return!0}},{key:"update",value:function(){if(!this._isUpdating){this._isUpdating=!0;var a=this.line,g=this.height,
l=a.toVector();this.setProperty("position",this.position.addPt(a.perpendicularLine(0,g,"cc").toVector()));this.width=l.fastR();this.rotation=l.theta();this.vec=l;this._isUpdating=!1}}}],[{key:"className",get:function(){return"LineMorph"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:0},fill:{defaultValue:mc.Color.black},height:{defaultValue:1},line:{defaultValue:mc.Line.fromCoords(0,0,0,0),set:function(a){this.setProperty("line",a);this.update(a)}},start:{derived:!0,after:["line"],
get:function(a){return this.line.start},set:function(a){this.line=this.line.withStart(a)}},end:{derived:!0,after:["line"],get:function(a){return this.line.end},set:function(a){this.line=this.line.withEnd(a)}},position:{derived:!0,after:["line"],get:function(a){return this.start},set:function(a){var g=a.subPt(this.start),l=this.rotation;this.line=new mc.Line(a,this.end.addPt(g));this.rotation=l}}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:107386,end:108827})}(mc.Morph);mc.LineMorph=XA;mc.LineMorph=XA;mc.LineMorph=XA;var Hka=Object.freeze({__proto__:null,Morph:nk,Ellipse:Ey,Triangle:VA,Image:Fy,PathPoint:aE,Path:Gy,Polygon:WA,LineMorph:XA}),wn=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js");wn.pt=oh;wn.Morph=nk;wn.morph=wa;wn.config=wk;var YA=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),
m=e.hasOwnProperty("TooltipViewer")&&"function"===typeof e.TooltipViewer?e.TooltipViewer:e.TooltipViewer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.currentMorph=a}},{key:"__dont_serialize__",get:function(){return["currentTooltip","currentMorph"]}},{key:"notPartOfCurrentTooltip",value:function(a){return!a.ownerChain().includes(this.currentMorph)}},
{key:"invalidatesCurrentTooltip",value:function(a){return a.tooltip||this.notPartOfCurrentTooltip(a)}},{key:"mouseMove",value:function(a){var g=a.targetMorph;a=a.hand;this.currentMorph!==g&&this.invalidatesCurrentTooltip(g)&&(this.hoverOutOfMorph(this.currentMorph),this.hoverIntoMorph(g,a),this.currentMorph=g)}},{key:"mouseDown",value:function(a){this.currentTooltip&&this.currentTooltip.remove();this.currentTooltip=null}},{key:"hoverIntoMorph",value:function(a,g){this.clearScheduledTooltip();this.currentTooltip?
this.showTooltipFor(a,g):this.scheduleTooltipFor(a,g)}},{key:"hoverOutOfMorph",value:function(a){var g=this;this.currentTooltip&&this.currentTooltip.softRemove(function(l){return g.currentTooltip==l&&(g.currentTooltip=null)})}},{key:"scheduleTooltipFor",value:function(a,g){var l=this;this.timer=setTimeout(function(){return l.showTooltipFor(a,g)},1E3*wn.config.showTooltipsAfter)}},{key:"clearScheduledTooltip",value:function(){clearTimeout(this.timer)}},{key:"clearCurrentTooltip",value:function(){var a=
this.currentTooltip;a&&a.remove()}},{key:"showTooltipFor",value:function(a,g){a.tooltip&&a.world()&&(this.clearCurrentTooltip(),g=g?g.position.addXY(10,7):a.globalBounds().bottomRight(),this.currentTooltip=new wn.Tooltip({position:g,description:a.tooltip}),a.world().addMorph(this.currentTooltip),this.currentTooltip.update(a))}}],[{key:"className",get:function(){return"TooltipViewer"}}],e,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:154,end:2059})}(void 0);wn.TooltipViewer=YA;wn.TooltipViewer=YA;wn.TooltipViewer=YA;var Hy=sa("ah",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),m=e.hasOwnProperty("Tooltip")&&"function"===typeof e.Tooltip?e.Tooltip:e.Tooltip=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(m,b,[{key:"update",value:function(a){this.position=a.globalBounds().bottomCenter().subPt(a.world().scroll).addPt(wn.pt(0,7))}},{key:"softRemove",value:function(a){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(g.animate({opacity:0,duration:300}),2);a&&a(g);g.remove();l.jumpToEnd()})}}],[{key:"className",get:function(){return"Tooltip"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},reactsToPointer:{defaultValue:!1},
isEpiMorph:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://System/tooltip"}}},description:{after:["submorphs"],derived:!0,get:function(){return $jscomp.makeIterator(this.submorphs).next().value.value},set:function(a){var g=$jscomp.makeIterator(this.submorphs).next().value;g.value=a;g.fit()}},submorphs:{initialize:function(){this.submorphs=[new wn.morph({type:"label",width:200})]}}}}}],e,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2068,end:3217})}(wn.Morph));wn.Tooltip=Hy;wn.Tooltip=Hy;wn.Tooltip=Hy;var Ika=Object.freeze({__proto__:null,TooltipViewer:YA,Tooltip:Hy}),E4=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/index.js");E4.default=Ku;E4.MorphicDB=Ku;var Jka=Object.freeze({__proto__:null,MorphicDB:Ku}),Kd=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js");
Kd.pt=oh;Kd.Rectangle=ee;Kd.rect=Ii;Kd.arr=vf;Kd.Closure=Ei;Kd.num=Bk;Kd.grid=Lw;Kd.obj=Pf;Kd.once=Xe;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("Layout")&&"function"===typeof e.Layout?e.Layout:e.Layout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=a=void 0===a?{}:a;a=g.spacing;
var l=g.padding,q=g.border,r=g.container,u=g.manualUpdate,v=g.autoResize,y=g.ignore,z=g.onScheduleApply,A=g.layoutOrder;g=g.reactToSubmorphAnimations;this.applyRequests=!1;this.border=Object.assign({top:0,left:0,right:0,bottom:0},q);this.ignore=y||[];this.lastBoundsExtent=this.container&&this.container.bounds().extent();this.active=!1;this.container=r;this.manualUpdate=u;this.reactToSubmorphAnimations=g||!1;this.autoResize=void 0!=v?v:!0;this.onScheduleApply=z||function(B,G,E){};A&&(this.layoutOrder=
A,this.layoutOrderSource=JSON.stringify(String(A)));this.spacing=a||0;this._padding=l?"number"===typeof l?Kd.Rectangle.inset(l):l:null}},{key:"attach",value:function(){this.apply();this.refreshBoundsCache()}},{key:"copy",value:function(){return new this.constructor(this)}},{key:"description",value:function(){return"Describe the layout behavior here."}},{key:"name",value:function(){return"Name presented to the user."}},{key:"isEnabled",value:function(){return!this.active}},{key:"disable",value:function(){this.active=
!0}},{key:"enable",value:function(a){this.active=!1;this.scheduleApply(null,a)}},{key:"padding",get:function(){return this._padding}},{key:"padding",set:function(a){"number"===typeof a&&(a=Kd.Rectangle.inset(a));this._padding=a;this.apply()}},{key:"boundsChanged",value:function(a){return!(this.lastBoundsExtent&&a.bounds().extent().equals(this.lastBoundsExtent))}},{key:"extentChanged",value:function(a){return!(this.lastExtent&&a.extent.equals(this.lastExtent))}},{key:"equals",value:function(a){return a.name()==
this.name()}},{key:"layoutableSubmorphs",get:function(){var a=this;this.layoutOrder||(this.layoutOrder=Kd.Closure.fromSource(JSON.parse(this.layoutOrderSource)).recreateFunc());return Kd.arr.sortBy(this.container.submorphs.filter(function(g){return g.isLayoutable&&!a.ignore.includes(g.name)}),function(g){return a.layoutOrder(g)})}},{key:"layoutOrder",value:function(a){return this.container.submorphs.indexOf(a)}},{key:"submorphBoundsChanged",get:function(){var a=this.layoutableSubmorphs,g=this.layoutableSubmorphBounds;
if(!g||a.length!=g.length)return!0;for(var l=0;l<a.length;l++)if(!g[l].equals(a[l].bounds()))return!0;return!1}},{key:"refreshBoundsCache",value:function(){this.lastExtent=this.container.extent;this.layoutableSubmorphBounds=this.layoutableSubmorphs.map(function(a){return a.bounds()})}},{key:"onContainerRender",value:function(){this.forceLayout()}},{key:"noLayoutActionNeeded",get:function(){return!this.submorphBoundsChanged&&!this.boundsChanged(this.container)&&!this.extentChanged(this.container)&&
!this.submorphsChanged}},{key:"__dont_serialize__",get:function(){return["lastAnim","animationPromise"]}},{key:"forceLayout",value:function(){var a=this;this.applyRequests&&(this.applyRequests=!1,this.noLayoutActionNeeded||(this.refreshBoundsCache(),this.container.withMetaDo({isLayoutAction:!0,animation:this.lastAnim},function(){return a.apply(a.lastAnim)}),this.lastAnim=!1))}},{key:"forceLayoutsOfMorph",value:function(a){var g=this;a.layout?a.layout.forceLayout():a.submorphs.forEach(function(l){return g.forceLayoutsOfMorph(l)})}},
{key:"forceLayoutsInNextLevel",value:function(){var a=this;this.layoutableSubmorphs.forEach(function(g){return a.forceLayoutsOfMorph(g)})}},{key:"scheduleApply",value:function(a,g,l){l=void 0===l?{}:l;if("function"===typeof this.onScheduleApply)this.onScheduleApply(a,g,l);this.active||(g&&(this.lastAnim=g),this.applyRequests=!0)}},{key:"onSubmorphResized",value:function(a,g){this.scheduleApply(a,this.reactToSubmorphAnimations&&g.meta.animation,g)}},{key:"onSubmorphAdded",value:function(a,g){this.submorphsChanged=
!0;this.scheduleApply(a,g)}},{key:"onSubmorphRemoved",value:function(a,g){this.submorphsChanged=!0;this.scheduleApply(a,g)}},{key:"onChange",value:function(a){var g=a.args,l=a.prop,q=a.value,r=a.prevValue,u=a.meta;u=this.reactToSubmorphAnimations&&u&&u.animation;g=g&&g[0];switch(a.selector){case "removeMorph":this.onSubmorphRemoved(g,u);break;case "addMorphAt":this.onSubmorphAdded(g,u)}"extent"===l&&q&&r&&(r.x!==q.x||r.y!==q.y)&&this.scheduleApply(g,u)}},{key:"affectsLayout",value:function(a,g){a=
g.value;var l=g.prevValue;return["position","scale","rotation","isLayoutable","extent"].includes(g.prop)&&!Kd.obj.equals(a,l)}},{key:"onSubmorphChange",value:function(a,g){if(g.meta&&g.meta.isLayoutAction)return this.scheduleApply(a,this.reactToSubmorphAnimation&&g.meta.animation);if(this.affectsLayout(a,g))this.onSubmorphResized(a,g)}},{key:"changePropertyAnimated",value:function(a,g,l,q){if(q){var r=q.duration;q=q.easing;var u={};this.animationPromise=a.animate((u[g]=l,u.duration=r,u.easing=q,u))}else a[g]=
l}},{key:"attachAnimated",value:function(a,g,l){this.active||(this.container=g,this.active=!0,g.layout=this,this.active=!1,this.lastAnim={duration:void 0===a?0:a,easing:l})}},{key:"apply",value:function(a){this.active||(this.active=!0,this.submorphsChanged=!1,this.lastBoundsExtent=this.container&&this.container.bounds().extent(),this.active=!1)}}],[{key:"className",get:function(){return"Layout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:157,end:6567})})(void 0);var bE=sa("aX",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("CustomLayout")&&"function"===typeof e.CustomLayout?e.CustomLayout:e.CustomLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,
b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;this.relayout=a.relayout;this.layouterString=JSON.stringify(String(a.relayout));this.varMapping=a.varMapping||{};Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a)}},{key:"name",value:function(){return"Custom Layout"}},{key:"apply",value:function(a){if(!this.active&&this.container){Sb._get(Object.getPrototypeOf(m.prototype),"apply",this).call(this,a);this.active=
!0;this.relayout||(this.relayout=Kd.Closure.fromSource(JSON.parse(this.layouterString),this.varMapping).recreateFunc());try{this.relayout(this.container,a)}catch(g){console.error("Error in relayout() of a custom layout:",g)}this.lastBoundsExtent=this.container&&this.container.bounds().extent();this.active=!1}}}],[{key:"className",get:function(){return"CustomLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6576,end:7523})}(Kd.Layout));Kd.CustomLayout=bE;Kd.CustomLayout=bE;Kd.CustomLayout=bE;var cE=sa("bd",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("SnapLayout")&&"function"===typeof e.SnapLayout?e.SnapLayout:e.SnapLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),
value:function(a){a=void 0===a?{}:a;Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._spacing=a.spacing}},{key:"name",value:function(){return"Snap"}},{key:"description",value:function(){return"Fits the parent morph to the combined bounds of all its submorphs."}},{key:"apply",value:function(a){var g=this;a=void 0===a?!1:a;if(!this.active&&this.container){Sb._get(Object.getPrototypeOf(m.prototype),"apply",this).call(this,a);var l=this.container.submorphBounds().insetBy(-this.spacing),
q=Kd.pt(this.spacing,this.spacing).subPt(l.topLeft());q.r()&&this.container.submorphs.forEach(function(r){return g.changePropertyAnimated(r,"position",r.position.addPt(q),a)});this.changePropertyAnimated(this.container,"extent",l.extent(),a)}}}],[{key:"className",get:function(){return"SnapLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:7532,end:8327})}(Kd.Layout));Kd.SnapLayout=cE;Kd.SnapLayout=cE;Kd.SnapLayout=cE;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("FloatLayout")&&"function"===typeof e.FloatLayout?e.FloatLayout:e.FloatLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===
a?{}:a;Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._orderByIndex=a.orderByIndex||!1;this._resizeSubmorphs="undefined"!==typeof a.resizeSubmorphs?a.resizeSubmorphs:!1}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):a.left}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(a){this._orderByIndex=
a;this.apply()}},{key:"direction",get:function(){return this._direction}},{key:"direction",set:function(a){this._direction=a;this.apply()}},{key:"align",get:function(){return this._align}},{key:"align",set:function(a){this._align=a;this.apply()}},{key:"autoResize",get:function(){return this._autoResize}},{key:"autoResize",set:function(a){this._autoResize=a;this.apply()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=a;this.apply()}},{key:"resizeSubmorphs",
get:function(){return this._resizeSubmorphs}},{key:"resizeSubmorphs",set:function(a){this._resizeSubmorphs=a;this.apply()}},{key:"equals",value:function(a){return this.spacing!=a.spacing||this.align!=a.align||this.direction!=a.direction?!1:!0}},{key:"getSpec",value:function(){return{spacing:this.spacing,resizeSubmorphs:this.resizeSubmorphs,autoResize:this.autoResize,align:this.align,direction:this.direction,padding:this.padding,reactToSubmorphAnimations:this.reactToSubmorphAnimations,orderByIndex:this.orderByIndex}}},
{key:"inspect",value:function(a){}},{key:"apply",value:function(a){a=void 0===a?!1:a;var g=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(g.active||!g.container||!g.container.submorphs.length||!g.layoutableSubmorphs.length)return q.return();g.layoutableSubmorphBounds||g.refreshBoundsCache();Sb._get(Object.getPrototypeOf(m.prototype),"apply",g).call(g,a);g.active=!0;l=g.computeMinContainerExtent();g.layoutSubmorphs(l,a);l=g.computeMinContainerExtent();g.resizeContainer(l,
a);g.lastBoundsExtent=g.container.bounds().extent();g.active=!1;g.layoutRequests=!1;return q.return(g.animationPromise)})}},{key:"resizeContainer",value:function(){}}],[{key:"className",get:function(){return"FloatLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:8329,end:10714})})(Kd.Layout);
var Dw=sa("ai",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("VerticalLayout")&&"function"===typeof e.VerticalLayout?e.VerticalLayout:e.VerticalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,a);this._align=a.align||"left";this._direction=a.direction||"topToBottom"}},{key:"name",value:function(){return"Vertical"}},{key:"description",value:function(){return"Assemble the submorphs in a vertically growing list."}},{key:"equals",value:function(a){return Sb._get(Object.getPrototypeOf(m.prototype),"equals",this).call(this,a)&&a.name&&"Vertical"==a.name()?!0:!1}},{key:"possibleDirectionValues",get:function(){return["topToBottom","bottomToTop","centered"]}},{key:"possibleAlignValues",
get:function(){return["left","center","right"]}},{key:"__serialize__",value:function(){return{__expr__:"new VerticalLayout("+Kd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["VerticalLayout"]}}}},{key:"layoutSubmorphs",value:function(a,g){var l=this,q=this.container,r=this.layoutableSubmorphs,u=this.spacing,v=this.autoResize,y=this.align,z=this.resizeSubmorphs,A=this.getStartY(a),B=[];a=z?q.width:a.x;v=v&&!z;var G=function(E,K){r.reduce(function(J,P){z&&l.changePropertyAnimated(P,"width",
q.width-2*u,g);l.forceLayoutsOfMorph(P);l.changePropertyAnimated(P,E,J,g);J=P.bounds();B.push(J);return J[E]().addXY(0,J.height+u)},K)};this.layoutableSubmorphBounds=B;"left"===y?G("topLeft",Kd.pt(u,A)):"right"===y?G("topRight",Kd.pt(a+(v?u:-u),A)):G("topCenter",Kd.pt((a+(v?2*u:0))/2,A))}},{key:"resizeContainer",value:function(a,g){var l=this.direction,q=this.layoutableSubmorphs,r=this.resizeSubmorphs,u=this.spacing,v=this.container;this.autoResize&&("centered"===l?(l=q[0].top,q=Kd.arr.last(q).bottom+
l):q=Kd.arr.last(q).bottom+u,a=Kd.pt(r?v.width:a.x+2*u,Math.max(q,a.y)),this.changePropertyAnimated(v,"extent",a,g))}},{key:"getStartY",value:function(a){var g=this.layoutableSubmorphBounds,l=this.spacing,q=this.direction;var r=(g.length-1)*l;g=$jscomp.makeIterator(g);for(var u=g.next();!u.done;u=g.next())r+=u.value.height;return Math.max(0,"bottomToTop"===q?a.y-r-2*l:"centered"===q?a.y/2-r/2-l:0)+l}},{key:"computeMinContainerExtent",value:function(){for(var a=this.container,g=this.layoutableSubmorphs,
l=this.autoResize,q=(g.length+1)*this.spacing,r=0,u=0,v=0;v<g.length;v++){var y=g[v].bounds(),z=y.width;u+=y.height;r=Math.max(z,r)}g=Kd.pt(r,u+q);l||(g=g.maxPt(a.extent));return g}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):a.top}}],[{key:"className",get:function(){return"VerticalLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10723,end:14636})}(Kd.FloatLayout));Kd.VerticalLayout=Dw;Kd.VerticalLayout=Dw;Kd.VerticalLayout=Dw;var bt=sa("az",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("HorizontalLayout")&&"function"===typeof e.HorizontalLayout?e.HorizontalLayout:e.HorizontalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._direction=a.direction||"leftToRight";this._align=a.align||"top"}},{key:"name",value:function(){return"Horizontal"}},{key:"description",value:function(){return"Assemble the submorphs in a horizontally growing list."}},{key:"possibleDirectionValues",get:function(){return["leftToRight",
"rightToLeft","centered"]}},{key:"possibleAlignValues",get:function(){return["top","center","bottom"]}},{key:"__serialize__",value:function(){return{__expr__:"new HorizontalLayout("+Kd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["HorizontalLayout"]}}}},{key:"equals",value:function(a){return Sb._get(Object.getPrototypeOf(m.prototype),"equals",this).call(this,a)&&a.name&&"Horizontal"==a.name()?!0:!1}},{key:"layoutSubmorphs",value:function(a,g){var l=this,q=this.container,r=this.layoutableSubmorphs,
u=this.resizeSubmorphs,v=this.spacing,y=this.autoResize,z=this.align,A=this.getStartX(a),B=[];a=u?q.height:a.y;y=y&&!u;var G=function(E,K){r.reduce(function(J,P){u&&l.changePropertyAnimated(P,"height",q.height-2*v,g);l.forceLayoutsOfMorph(P);l.changePropertyAnimated(P,E,J,g);J=P.bounds();B.push(J);return J[E]().addXY(J.width+v,0)},K)};this.layoutableSubmorphBounds=B;"top"===z?G("topLeft",Kd.pt(A,v)):"bottom"===z?G("bottomLeft",Kd.pt(A,a+(y?v:-v))):G("leftCenter",Kd.pt(A,(a+(y?2*v:0))/2))}},{key:"resizeContainer",
value:function(a,g){var l=this.direction,q=this.layoutableSubmorphBounds,r=this.resizeSubmorphs,u=this.spacing,v=this.container;this.autoResize&&("centered"===l?(l=q[0].left(),q=Kd.arr.last(q).right()+l):q=Kd.arr.last(q).right()+u,a=Kd.pt(Math.max(a.x,q),r?v.height:a.y+2*u),this.changePropertyAnimated(v,"extent",a,g))}},{key:"getStartX",value:function(a){var g=this.layoutableSubmorphBounds,l=this.spacing,q=this.direction;var r=(g.length-1)*l;g=$jscomp.makeIterator(g);for(var u=g.next();!u.done;u=
g.next())r+=u.value.width;return Math.max(0,"rightToLeft"===q?a.x-r-2*l:"centered"===q?a.x/2-r/2-l:0)+l}},{key:"computeMinContainerExtent",value:function(){for(var a=this.container,g=this.layoutableSubmorphBounds,l=this.autoResize,q=(g.length+1)*this.spacing,r=0,u=0,v=0;v<g.length;v++){var y=g[v],z=y.height;r+=y.width;u=Math.max(z,u)}g=Kd.pt(r+q,u);l||(g=g.maxPt(a.extent));return g}}],[{key:"className",get:function(){return"HorizontalLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14645,end:18506})}(Kd.FloatLayout));Kd.HorizontalLayout=bt;Kd.HorizontalLayout=bt;Kd.HorizontalLayout=bt;var dE=sa("aA",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("ProportionalLayout")&&"function"===typeof e.ProportionalLayout?e.ProportionalLayout:e.ProportionalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"name",value:function(){return"Proportional"}},{key:"description",value:function(){return"Resizes, scales, and moves morphs according to their original position."}},{key:"inspect",value:function(a){}},{key:Symbol.for("lively-instance-initialize"),value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.extentDelta=Kd.pt(0,0);this.proportionalLayoutSettingsForMorphs=
new WeakMap;this.submorphSettings=a&&a.submorphSettings||[];this.lastExtent=a.lastExtent;delete this.spacing;delete this.autoResize}},{key:"getSpec",value:function(){return{submorphSettings:this.submorphSettings,reactToSubmorphAnimations:this.reactToSubmorphAnimations,lastExtent:this.lastExtent}}},{key:"__serialize__",value:function(){return{__expr__:"new ProportionalLayout("+Kd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["ProportionalLayout"]}}}},{key:"__dont_serialize__",get:function(){return[].concat($jscomp.arrayFromIterable(Sb._get(Object.getPrototypeOf(m.prototype),
"__dont_serialize__",this)),["extentDelta","lastExtent"])}},{key:"__after_deserialize__",value:function(a,g){var l=this._submorphSettings;a=this.container;g=this.proportionalLayoutSettingsForMorphs||new WeakMap;this.extentDelta=Kd.pt(0,0);if(l&&a){l=$jscomp.makeIterator(l);for(var q=l.next();!q.done;q=l.next()){var r=$jscomp.makeIterator(q.value);q=r.next().value;r=r.next().value;(q=$jscomp.makeIterator(this._morphsMatchingSelector(a,q)).next().value)&&g.set(q,r)}this.proportionalLayoutSettingsForMorphs=
g}}},{key:"onSubmorphChange",value:function(a,g,l,q){"name"===g.prop&&(l=this.proportionalLayoutSettingsForMorphs.get(a))&&this.changeSettingsFor(a,l,!0);return Sb._get(Object.getPrototypeOf(m.prototype),"onSubmorphChange",this).call(this,a,g)}},{key:"settingsFor",value:function(a){return this.proportionalLayoutSettingsForMorphs.get(a)||{x:"scale",y:"scale"}}},{key:"changeSettingsFor",value:function(a,g,l){l=void 0===l?!1:l;"string"===typeof g&&(g={x:g,y:g});this.proportionalLayoutSettingsForMorphs.set(a,
Object.assign({},this.settingsFor(a),{},g));l&&(g=this.submorphSettings.filter(function(q){return q[0]!==a.name}),g.push([a.name,this.settingsFor(a)]),this._submorphSettings=g)}},{key:"submorphSettings",get:function(){return this._submorphSettings}},{key:"submorphSettings",set:function(a){if(this.container)this._submorphSettings=a,this.changeSubmorphSettings(a);else Kd.once(this,"container",this,"submorphSettings",{converter:"function () { return submorphSettings }",varMapping:{submorphSettings:a}})}},
{key:"changeSubmorphSettings",value:function(a){var g=this,l={};a=$jscomp.makeIterator(a);for(var q=a.next();!q.done;l={$jscomp$loop$prop$setting$2243:l.$jscomp$loop$prop$setting$2243},q=a.next()){q=$jscomp.makeIterator(q.value);var r=q.next().value;l.$jscomp$loop$prop$setting$2243=q.next().value;this._morphsMatchingSelector(this.container,r).forEach(function(u){return function(v){return g.changeSettingsFor(v,u.$jscomp$loop$prop$setting$2243)}}(l))}}},{key:"_morphsMatchingSelector",value:function(a,
g){var l=this,q=[];if(!g)return q;g.isMorph?q=[g]:g instanceof RegExp?q=a.submorphs.filter(function(r){return r.name.match(g)}):"string"===typeof g?q=a.submorphs.filter(function(r){return r.name===g}):Array.isArray(g)&&(q=Kd.arr.flatmap(g,function(r){return l._morphsMatchingSelector(a,r)}));return q}},{key:"refreshBoundsCache",value:function(){var a=this.container.extent,g=this.lastExtent;g&&!a.eqPt(g)&&(this.extentDelta=this.extentDelta.addPt(a.subPt(g)));this.lastExtent=a;this.layoutableSubmorphBounds=
this.layoutableSubmorphs.map(function(l){return l.bounds()})}},{key:"apply",value:function(a){a=void 0===a?!1:a;var g=this.container,l=this.extentDelta,q=l.x;l=l.y;var r=(g||{}).extent;if(!this.active&&g&&(0!=q||0!=l)){this.extentDelta=Kd.pt(0,0);this.active=!0;Sb._get(Object.getPrototypeOf(m.prototype),"apply",this).call(this,a);var u=this.layoutableSubmorphs;g=r.scaleByPt(r.addXY(-q,-l).invertedSafely());r=$jscomp.makeIterator(u);for(u=r.next();!u.done;u=r.next()){u=u.value;var v=this.settingsFor(u),
y=v.x,z=v.y,A=v=0,B=0,G=0;"move"===y&&(v=q);"move"===z&&(A=l);"resize"===y&&(B=q);"resize"===z&&(G=l);if("scale"===y||"scale"===z)y=Kd.pt("scale"===y?g.x:1,"scale"===z?g.y:1),this.changePropertyAnimated(u,"position",u.position.scaleByPt(y),a),this.changePropertyAnimated(u,"extent",u.extent.scaleByPt(y),a);(v||A)&&this.changePropertyAnimated(u,"position",u.position.addXY(v,A),a);(B||G)&&this.changePropertyAnimated(u,"extent",u.extent.addXY(B,G),a)}this.forceLayoutsInNextLevel();this.active=!1}}},{key:"copy",
value:function(){return new this.constructor(this.getSpec())}}],[{key:"className",get:function(){return"ProportionalLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:18516,end:24002})}(Kd.Layout));Kd.ProportionalLayout=dE;Kd.ProportionalLayout=dE;Kd.ProportionalLayout=dE;var eE=
function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("CenteredTilingLayout")&&"function"===typeof e.CenteredTilingLayout?e.CenteredTilingLayout:e.CenteredTilingLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"name",value:function(){return"CenteredTiling"}},{key:"description",value:function(){return"Similar to TilingLayout but center the rows."}},
{key:"apply",value:function(a){a=void 0===a?!1:a;if(!this.active&&this.container){this.active=!0;Sb._get(Object.getPrototypeOf(m.prototype),"apply",this).call(this,a);a=this.getOptimalWidth(this.container);var g=this.spacing,l=this.layoutableSubmorphs,q=g+this.border.top;l=l.slice();for(var r={};l.length;){r.$jscomp$loop$prop$remainingWidth$2245=a;var u=Kd.arr.takeWhile(l,function(z){return function(A){A=z.$jscomp$loop$prop$remainingWidth$2245-(A.width+2*g);if(0>A)return!1;z.$jscomp$loop$prop$remainingWidth$2245=
A;return!0}}(r));u.length?l=Kd.arr.withoutAll(l,u):(u=[l.shift()],r.$jscomp$loop$prop$remainingWidth$2245=0);var v=Kd.pt(r.$jscomp$loop$prop$remainingWidth$2245/2+g+this.border.left,q);u=$jscomp.makeIterator(u);for(var y=u.next();!y.done;y=u.next())y=y.value,y.position=v,v=v.addXY(2*g+y.width,0),q=Math.max(q,y.bottom);q+=2*g;r={$jscomp$loop$prop$remainingWidth$2245:r.$jscomp$loop$prop$remainingWidth$2245}}this.active=!1}}}],[{key:"className",get:function(){return"CenteredTilingLayout"}}],e,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:24011,end:25287})}(Kd.TilingLayout);Kd.CenteredTilingLayout=eE;Kd.CenteredTilingLayout=eE;Kd.CenteredTilingLayout=eE;var fE=sa("aY",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("TilingLayout")&&"function"===typeof e.TilingLayout?e.TilingLayout:
e.TilingLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._axis=a.axis||"row";this._align=a.align||"left";this._verticalAlign=a.verticalAlign||"top";this._orderByIndex=a.orderByIndex||!1;delete this.autoResize}},
{key:"name",value:function(){return"Tiling"}},{key:"description",value:function(){return"Make the submorphs fill their owner, inserting breaks to defer intersecting the bounds as much as possible."}},{key:"inspect",value:function(a){}},{key:"__serialize__",value:function(){return{__expr__:"new TilingLayout("+Kd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["TilingLayout"]}}}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"getSpec",value:function(){return{axis:this.axis,
align:this.align,spacing:this.spacing,orderByIndex:this.orderByIndex,reactToSubmorphAnimations:this.reactToSubmorphAnimations}}},{key:"possibleAxisValues",get:function(){return["row","columns"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(a){this._orderByIndex=a;this.apply()}},{key:"axis",get:function(){return this._axis}},{key:"axis",set:function(a){this._axis=a;this.apply()}},
{key:"align",get:function(){return this._align}},{key:"align",set:function(a){this._align=a;this.apply()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=a;this.apply()}},{key:"apply",value:function(a){a=void 0===a?!1:a;if(!this.active&&this.container){this.active=!0;Sb._get(Object.getPrototypeOf(m.prototype),"apply",this).call(this,a);var g=this.axis,l=this.align,q=this.border,r=this.spacing,u=this.layoutableSubmorphs,v=this.getOptimalWidth(this.container),
y=(g="row"==g)?"left":"top",z=g?"x":"y",A=g?"y":"x",B=0,G=r+q[g?"top":"left"],E="topLeft";switch(this._verticalAlign){case "top":E="topLeft";break;case "center":E="leftCenter";break;case "bottom":E="bottomLeft"}for(;u.length;){var K=v-r,J=Kd.arr.takeWhile(u,function(ra){ra=ra.bounds().extent();ra=K-(ra[z]+r);if(0>ra)return!1;K=ra;return!0});J.length?u.splice(0,J.length):(J=[u.shift()],K=0);B=Kd.arr.max(J.map(function(ra){return ra.bounds().extent()[A]}));if(g)switch(l){case "left":var P=Kd.pt(r,G);
break;case "center":P=Kd.pt(K/2+r+q[y],G);break;case "right":P=Kd.pt(K-r,G)}else switch(l){case "left":P=Kd.pt(G,r);break;case "center":P=Kd.pt(G,K/2+r+q[y]);break;case "right":P=Kd.pt(G,K-r)}"bottomLeft"==E&&(P=P.addXY(0,B));J=$jscomp.makeIterator(J);for(var ea=J.next();!ea.done;ea=J.next())ea=ea.value,this.changePropertyAnimated(ea,E,P,a),ea=ea.bounds().extent(),P=g?P.addXY(r+ea[z],0):P.addXY(0,r+ea[z]);G+=r+B;B=0}this.active=!1}}},{key:"getMinWidth",value:function(){var a=this.border,g=a.left;
a=a.right;return this.layoutableSubmorphs.reduce(function(l,q){return q.bounds().width>l?q.bounds().width:l},0)+g+a}},{key:"getMinHeight",value:function(){var a=this.border,g=a.top;a=a.bottom;return this.layoutableSubmorphs.reduce(function(l,q){return q.bounds().height>l?q.bounds().height:l},0)+g+a}},{key:"getOptimalWidth",value:function(a){var g=this.axis,l=this.border,q=l.left,r=l.top,u=l.right;l=l.bottom;a="row"==g?a.width-q-u:a.height-r-l;g="row"==g?this.getMinWidth():this.getMinHeight();return Math.max(a,
g)}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):"row"===this.axis?1E6*(a.top-a.top%15)+a.left:1E6*(a.left-a.left%15)+a.top}}],[{key:"className",get:function(){return"TilingLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:25296,
end:30811})}(Kd.Layout));Kd.TilingLayout=fE;Kd.TilingLayout=fE;Kd.TilingLayout=fE;var gE=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("CellGroup")&&"function"===typeof e.CellGroup?e.CellGroup:e.CellGroup=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=a.morph,l=a.layout;this.state=
{cells:[a.cell],layout:l,align:a.align,resize:l.fitToCell};l&&l.addGroup(this);this.morph=g}},{key:"morph",get:function(){var a=this.state,g=a.morph;a=a.layout;return g?g.isMorph?g:a.layoutableSubmorphs.find(function(l){return l.name==g}):null}},{key:"compensateOrigin",get:function(){return this.layout.compensateOrigin}},{key:"resize",get:function(){return this.state.resize}},{key:"resize",set:function(a){this.state.resize=a;this.layout.apply()}},{key:"align",get:function(){return this.state.align||
"topLeft"}},{key:"align",set:function(a){this.state.align=a;this.layout.apply()}},{key:"morph",set:function(a){var g=a&&this.layout.getCellGroupFor(a);g&&(g.morph=null);this.state.morph=a;this.layout.apply()}},{key:"manages",value:function(a){return this.morph&&(this.morph==a||this.morph.name==a)}},{key:"apply",value:function(a){a=void 0===a?!1:a;var g=this.morph;if(g){var l=this.bounds(),q=this.compensateOrigin?this.layout.container.origin.negated():Kd.pt(0,0);if(a){var r=this.resize?l.extent():
g.extent,u=a;a=u.duration;u=u.easing;var v={};g.animate((v[this.alignedProperty||this.align]=l[this.align]().addPt(q),v.extent=r,v.duration=a,v.easing=u,v))}else this.resize&&(g.extent=l.extent()),g[this.alignedProperty||this.align]=l[this.align]().addPt(q);this.layout.forceLayoutsInNextLevel()}}},{key:"cells",get:function(){return this.state.cells}},{key:"layout",get:function(){return this.state.layout}},{key:"bounds",value:function(){return 0<this.cells.length?this.cells.map(function(a){return a.bounds()}).reduce(function(a,
g){return a.union(g)}):Kd.rect(0,0,0,0)}},{key:"includes",value:function(a){return this.cells.find(function(g){return g==a})}},{key:"connect",value:function(a){void 0==this.morph&&(this.morph=a.group.morph);a.group?a.group.disconnect(a,this):a.group=this;this.cells.push(a)}},{key:"disconnect",value:function(a,g){a.group=(void 0===g?null:g)||new Kd.CellGroup({morph:null,layout:this.layout,cell:a});Kd.arr.remove(this.cells,a);1>this.cells.length&&this.layout&&this.layout.removeGroup(this)}},{key:"merge",
value:function(a){var g=this;a.cells.forEach(function(l){g.connect(l)})}},{key:"topLeft",get:function(){var a=this;return this.cells.find(function(g){return(null==g.left||g.left.group!=a)&&(null==g.top||g.top.group!=a)})}},{key:"bottomRight",get:function(){var a=this;return this.cells.find(function(g){return(null==g.right||g.right.group!=a)&&(null==g.bottom||g.bottom.group!=a)})}},{key:"position",get:function(){return this.topLeft.position}}],[{key:"className",get:function(){return"CellGroup"}}],
e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:30820,end:34026})}(void 0);Kd.CellGroup=gE;Kd.CellGroup=gE;Kd.CellGroup=gE;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("LayoutAxis")&&"function"===typeof e.LayoutAxis?e.LayoutAxis:e.LayoutAxis=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.origin=a}},{key:"otherAxis",get:function(){return[].concat($jscomp.arrayFromIterable(this.axisBefore),$jscomp.arrayFromIterable(this.axisAfter))}},{key:"axisBefore",get:function(){for(var a=this,g=[];a=a.before;)g=[a].concat($jscomp.arrayFromIterable(g));return g}},{key:"axisAfter",get:function(){for(var a=
this,g=[];a=a.after;)g=[].concat($jscomp.arrayFromIterable(g),[a]);return g}},{key:"before",get:function(){throw Error("before() not implemented!");}},{key:"after",get:function(){throw Error("after() not implemented!");}},{key:"containerLength",get:function(){return this.container[this.dimension]}},{key:"containerLength",set:function(a){this.container[this.dimension]=a}},{key:"getRoot",value:function(){return(this.axisBefore[0]||this).items[0]}},{key:"container",get:function(){return this.origin.container}},
{key:"layout",get:function(){return this.origin.layout}},{key:"frozen",get:function(){return this.origin.frozen[this.dimension]}},{key:"frozen",set:function(a){this.origin.frozen[this.dimension]=a}},{key:"align",set:function(a){this.items.forEach(function(g){return g.group.state.align=a})}},{key:"fixed",get:function(){return this.origin.fixed[this.dimension]}},{key:"fixed",set:function(a){var g=this;if(Kd.obj.isNumber(a)){var l=a;a=!0}this.items.forEach(function(r){r.fixed[g.dimension]=a});var q=
this.containerLength;void 0!=l&&(this[this.dimension]=l);this.adjustOtherProportions(a);this.containerLength=q}},{key:"length",get:function(){return this.origin[this.dimension]}},{key:"length",set:function(a){var g=this;this.items.forEach(function(l){l[g.dimension]=Kd.num.roundTo(a,1)})}},{key:"proportion",get:function(){return this.origin.proportion[this.dimension]}},{key:"proportion",set:function(a){var g=this;this.items.forEach(function(l){l.proportion[g.dimension]=a})}},{key:"min",get:function(){return this.origin.min[this.dimension]}},
{key:"min",set:function(a){this.adjustMin(a-this.min)}},{key:"adjustMin",value:function(a){var g=this;this.items.forEach(function(l){l.min[g.dimension]=0>l.min[g.dimension]+a?0:l.min[g.dimension]+a});this.layout.apply()}},{key:"adjustProportion",value:function(){this.fixed||(this.proportion=0<this.dynamicLength?this.length/this.dynamicLength:0)}},{key:"adjustOtherProportions",value:function(a){var g=this,l=this.axisBefore,q=this.axisAfter,r=Kd.arr.sum([].concat($jscomp.arrayFromIterable(l),$jscomp.arrayFromIterable(q)).filter(function(y){return!y.fixed}).map(function(y){return y.proportion})),
u=function(y){return y.proportion/=r},v=function(y){return y.proportion*=g.origin.removedDynamicProportions};a&&(this.origin.removedDynamicProportions=r);l.forEach(a?u:v);q.forEach(a?u:v)}},{key:"prepareForResize",value:function(a){a=this.proportion*Math.max(0,a-this.staticLength);this.frozen&&a>=this.min?(this.fixed=this.frozen=!1,this.length=a):!this.frozen&&this.min>a&&(this.fixed=this.frozen=!0,this.length=this.min);return this}},{key:"adjustLength",value:function(a){var g;0>this.length+a&&(a=
-this.length);(g=this.axisAfter.find(function(l){return!l.fixed}))?(a=Math.min(a,g.length),this.length+=a,g.length-=a,this.adjustProportion(),g.adjustProportion()):(g=this.axisBefore.reverse().find(function(l){return!l.fixed}))?(g.length-=a,this.length+=a,this.adjustProportion(),g.adjustProportion()):(this.length+=a,this.adjustProportion(),this.otherAxis.forEach(function(l){return l.adjustProportion()}),this.containerLength+=a)}},{key:"equalizeDynamicAxis",value:function(){var a=[].concat($jscomp.arrayFromIterable(this.otherAxis.filter(function(l){return!l.fixed})),
$jscomp.arrayFromIterable(this.fixed?[]:[this])),g=(this.containerLength-this.staticLength)/a.length;a.map(function(l){l.fixed||(l.length=g);return l}).forEach(function(l){return l.adjustProportion()})}},{key:"addBefore",value:function(){var a=this.emptyAxis();this.before&&this.before.attachTo(a);a.attachTo(this);this.equalizeDynamicAxis();this.layout.grid=this.getRoot()}},{key:"addAfter",value:function(){var a=this.emptyAxis();this.after&&a.attachTo(this.after);this.attachTo(a);this.equalizeDynamicAxis();
this.layout.grid=this.getRoot()}}],[{key:"className",get:function(){return"LayoutAxis"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:34666,end:40329})})(void 0);var hE=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("LayoutColumn")&&
"function"===typeof e.LayoutColumn?e.LayoutColumn:e.LayoutColumn=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.items=[].concat($jscomp.arrayFromIterable(a.above),[a],$jscomp.arrayFromIterable(a.below))}},{key:"dimension",get:function(){return"width"}},
{key:"before",get:function(){return this._before||(this._before=this.origin.left&&new Kd.LayoutColumn(this.origin.left))}},{key:"after",get:function(){return this._after||(this._after=this.origin.right&&new Kd.LayoutColumn(this.origin.right))}},{key:"row",value:function(a){return this.items[a]}},{key:"dynamicLength",get:function(){return this.origin.dynamicWidth}},{key:"staticLength",get:function(){return this.origin.totalStaticWidth}},{key:"width",get:function(){return this.length}},{key:"width",
set:function(a){a-=this.width;this.fixed?(this.length+=a,this.container.width+=a):this.adjustLength(a);!this.layout.manualUpdate&&this.layout.apply()}},{key:"paddingLeft",set:function(a){this.items.forEach(function(g){g.padding.x=a});this.layout.apply()}},{key:"paddingLeft",get:function(){return this.items[0].padding.x}},{key:"paddingRight",set:function(a){this.items.forEach(function(g){g.padding.width=a});this.layout.apply()}},{key:"paddingRight",get:function(){return this.items[0].padding.width}},
{key:"emptyAxis",value:function(){var a=new Kd.LayoutColumn(new Kd.LayoutCell({column:Kd.arr.withN(this.items.length,null),layout:this.layout}));Kd.arr.zip(a.items,this.items).forEach(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;g.height=l.height;g.fixed.height=l.fixed.height;g.frozen.height=l.frozen.height;g.proportion.height=l.proportion.height;g.min.height=l.min.height});return a}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=
null;Kd.arr.zip(this.items,a.items).forEach(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;g.right=l;l.left=g});this.equalizeDynamicAxis();return a}},{key:"remove",value:function(){var a=this,g=this.before||this.after;this.items.forEach(function(l){l.left&&(l.left.right=l.right);l.right&&(l.right.left=l.left);l.group.disconnect(l);a.layout.removeGroup(l.group)});this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=
this.after.getRoot());g.equalizeDynamicAxis()}}],[{key:"className",get:function(){return"LayoutColumn"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:40338,end:42707})}(Kd.LayoutAxis);Kd.LayoutColumn=hE;Kd.LayoutColumn=hE;Kd.LayoutColumn=hE;var iE=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
m=e.hasOwnProperty("LayoutRow")&&"function"===typeof e.LayoutRow?e.LayoutRow:e.LayoutRow=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.items=[].concat($jscomp.arrayFromIterable(a.before),[a],$jscomp.arrayFromIterable(a.after))}},{key:"dimension",
get:function(){return"height"}},{key:"emptyAxis",value:function(){var a=new Kd.LayoutRow(new Kd.LayoutCell({row:Kd.arr.withN(this.items.length,null),layout:this.layout}));Kd.arr.zip(a.items,this.items).forEach(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;g.width=l.width;g.fixed.width=l.fixed.width;g.frozen.width=l.frozen.width;g.proportion.width=l.proportion.width;g.min.width=l.min.width});return a}},{key:"paddingTop",set:function(a){this.items.forEach(function(g){g.padding.y=
a});this.layout.apply()}},{key:"paddingTop",get:function(){return this.items[0].padding.y}},{key:"paddingBottom",set:function(a){this.items.forEach(function(g){g.padding.height=a});this.layout.apply()}},{key:"paddingBottom",get:function(){return this.items[0].padding.height}},{key:"before",get:function(){return this._before||(this._before=this.origin.top&&new Kd.LayoutRow(this.origin.top))}},{key:"after",get:function(){return this._after||(this._after=this.origin.bottom&&new Kd.LayoutRow(this.origin.bottom))}},
{key:"dynamicLength",get:function(){return this.origin.dynamicHeight}},{key:"staticLength",get:function(){return this.origin.totalStaticHeight}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=null;Kd.arr.zip(this.items,a.items).forEach(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;g.bottom=l;l.top=g});this.equalizeDynamicAxis();return a}},{key:"col",value:function(a){return this.items[a]}},{key:"height",get:function(){return this.length}},
{key:"height",set:function(a){a-=this.height;this.fixed?(this.length+=a,this.container.height+=a):(this.adjustLength(a),this.proportion=0<this.origin.dynamicHeight?this.height/this.origin.dynamicHeight:0);!this.layout.manualUpdate&&this.layout.apply()}},{key:"remove",value:function(){var a=this,g=this.before||this.after;this.items.forEach(function(l){l.top&&(l.top.bottom=l.bottom);l.bottom&&(l.bottom.top=l.top);l.group.disconnect(l);a.layout.removeGroup(l.group)});this.before&&(this.before._after=
null);this.after&&(this.after._before=null);this.before||(this.layout.grid=this.after.getRoot());g.equalizeDynamicAxis()}}],[{key:"className",get:function(){return"LayoutRow"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:42716,end:45166})}(Kd.LayoutAxis);Kd.LayoutRow=iE;Kd.LayoutRow=
iE;Kd.LayoutRow=iE;var jE=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("LayoutCell")&&"function"===typeof e.LayoutCell?e.LayoutCell:e.LayoutCell=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=a.row,l=a.column,q=a.top,r=a.left,u=a.right,v=a.bottom;a=a.layout;var y;g=$jscomp.makeIterator(g||
[]);var z=g.next().value;g=$jscomp.arrayFromIterator(g);l=$jscomp.makeIterator(l||[]);var A=l.next().value;l=$jscomp.arrayFromIterator(l);this.layout=a;this.fixed={width:!1,height:!1};this.frozen={width:!1,height:!1};this.min={width:0,height:0};this.top=q;this.left=r;this.bottom=v;this.right=u;this.padding=Kd.rect(0,0,0,0);0<g.length?this.right=new Kd.LayoutCell({row:g,left:this,layout:a}):0<l.length&&(this.bottom=new Kd.LayoutCell({column:l,top:this,layout:a}));this.proportion={width:1/(1+this.before.length+
this.after.length),height:1/(1+this.above.length+this.below.length)};this.height=this.container.height*this.proportion.height;this.width=this.container.width*this.proportion.width;(y=a&&a.getCellGroupFor(z||A))?y.connect(this):this.group=new Kd.CellGroup({cell:this,morph:z||A,layout:a})}},{key:"container",get:function(){return this.layout.container}},{key:"above",get:function(){return this.collect({neighbor:"top",prepend:!0})}},{key:"below",get:function(){return this.collect({neighbor:"bottom",append:!0})}},
{key:"before",get:function(){return this.collect({neighbor:"left",prepend:!0})}},{key:"after",get:function(){return this.collect({neighbor:"right",append:!0})}},{key:"collect",value:function(a){var g=a.neighbor,l=a.prepend;a=a.append;for(var q=[],r=this;r=r[g];)l&&(q=[r].concat($jscomp.arrayFromIterable(q))),a&&(q=[].concat($jscomp.arrayFromIterable(q),[r]));return q}},{key:"col",value:function(a){for(var g=this,l=a;0<l&&g;)g=g.right,l--;if(!g)throw Error(a+" out of bounds! Last column was "+(a-l-
1));return new Kd.LayoutColumn(g)}},{key:"row",value:function(a){for(var g=this,l=a;0<l&&g;)g=g.bottom,l--;if(!g)throw Error(a+" out of bounds! Last row was "+(a-l-1));return new Kd.LayoutRow(g)}},{key:"extent",get:function(){return Kd.pt(this.width,this.height)}},{key:"staticWidth",get:function(){return this.fixed.width||this.min.width==this.width}},{key:"staticHeight",get:function(){return this.fixed.height||this.min.height==this.height}},{key:"totalStaticWidth",get:function(){return Kd.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),
$jscomp.arrayFromIterable(this.after)).filter(function(a){return a.staticWidth}).map(function(a){return a.width}))}},{key:"totalStaticHeight",get:function(){return Kd.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),$jscomp.arrayFromIterable(this.below)).filter(function(a){return a.staticHeight}).map(function(a){return a.height}))}},{key:"dynamicWidth",get:function(){return Kd.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),$jscomp.arrayFromIterable(this.after)).filter(function(a){return!a.staticWidth}).map(function(a){return a.width}))}},
{key:"dynamicHeight",get:function(){return Kd.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),$jscomp.arrayFromIterable(this.below)).filter(function(a){return!a.staticHeight}).map(function(a){return a.height}))}},{key:"height",get:function(){return Math.max(this.min.height,this._height||0)}},{key:"height",set:function(a){this._height=a}},{key:"width",get:function(){return Math.max(this.min.width,this._width||0)}},{key:"width",set:function(a){this._width=a}},{key:"position",get:function(){return Kd.pt(Kd.arr.sum(this.before.map(function(a){return a.width})),
Kd.arr.sum(this.above.map(function(a){return a.height})))}},{key:"bounds",value:function(){return this.position.addPt(this.padding.topLeft()).extent(this.extent.subPt(this.padding.extent()).subPt(this.padding.topLeft()))}}],[{key:"className",get:function(){return"LayoutCell"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:45175,end:48921})}(void 0);Kd.LayoutCell=jE;Kd.LayoutCell=jE;Kd.LayoutCell=jE;var Ew=sa("aj",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("GridLayout")&&"function"===typeof e.GridLayout?e.GridLayout:e.GridLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);a=Object.assign({autoAssign:!0,fitToCell:!0},a);this.cellGroups=[];this.config=a}},{key:"name",value:function(){return"Grid"}},{key:"description",value:function(){return"Aligns the submorphs alongside a configurable grid. Columns and rows and be configured to have different proportional, minimal or fixed sizes. Cells can further be grouped such that submorphs fill up multiple slots of the grid."}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},
{key:"getSpec",value:function(){for(var a=[],g=[],l=[],q={},r=$jscomp.makeIterator(Kd.arr.range(0,this.rowCount-1)),u=r.next();!u.done;u=r.next())a.push(this.grid.row(u.value).items.map(function(y){return y.group.state.morph?y.group.state.morph.name||y.group.state.morph:null}));r=$jscomp.makeIterator(Kd.arr.range(0,this.rowCount-1));for(u=r.next();!u.done;u=r.next()){u=u.value;var v=this.grid.row(u);g.push(u,Object.assign({},v.fixed?{fixed:v.length}:{height:v.height},{paddingTop:v.paddingTop,paddingBottom:v.paddingBottom}))}r=
$jscomp.makeIterator(Kd.arr.range(0,this.columnCount-1));for(u=r.next();!u.done;u=r.next())u=u.value,v=this.grid.col(u),l.push(u,Object.assign({},v.fixed?{fixed:v.length}:{},{paddingLeft:v.paddingLeft,paddingRight:v.paddingRight}));r=$jscomp.makeIterator(this.cellGroups);for(u=r.next();!u.done;u=r.next())u=u.value,u.state.morph&&(q["string"==typeof u.state.morph?u.state.morph:u.morph.name]=Kd.obj.select(u,["align","resize"]));return{autoAssign:!1,grid:a,rows:g,columns:l,groups:q}}},{key:"__serialize__",
value:function(){return{__expr__:"new GridLayout("+Kd.obj.inspect(this.getSpec(),{escapeKeys:!0})+")",bindings:{"lively.morphic":["GridLayout"]}}}},{key:"initGrid",value:function(){var a=this,g=this.ensureGrid(this.config).map(function(l){return new Kd.LayoutRow(new Kd.LayoutCell({row:l,layout:a}))});g.reduce(function(l,q){return l.attachTo(q)});this.config.autoAssign&&this.autoAssign(this.notInLayout);this.grid=g[0].col(0);this.col(0).equalizeDynamicAxis();this.row(0).equalizeDynamicAxis();this.initRowsAndColumns();
this.initGroups()}},{key:"initGroups",value:function(){var a=this.config.groups;if(a)for(var g in a){var l=this.getCellGroupFor(this.container.getSubmorphNamed(g)),q=a[g],r=q.resize,u=void 0===q.align?"topLeft":q.align;q=void 0===q.alignedProperty?"topLeft":q.alignedProperty;l&&(void 0!=r&&(l.resize=r),l.align=u,l.alignedProperty=q)}}},{key:"initRowsAndColumns",value:function(){var a=this.config,g=void 0===a.columns?[]:a.columns,l=$jscomp.makeIterator(Kd.arr.toTuples(void 0===a.rows?[]:a.rows,2));
for(a=l.next();!a.done;a=l.next()){var q=$jscomp.makeIterator(a.value);a=q.next().value;q=q.next().value;Object.assign(this.row(a),q)}g=$jscomp.makeIterator(Kd.arr.toTuples(g,2));for(a=g.next();!a.done;a=g.next())l=$jscomp.makeIterator(a.value),a=l.next().value,q=l.next().value,Object.assign(this.col(a),q)}},{key:"compensateOrigin",get:function(){return this.config.compensateOrigin}},{key:"compensateOrigin",set:function(a){this.config.compensateOrigin=a;this.apply()}},{key:"fitToCell",get:function(){return this.config.fitToCell}},
{key:"fitToCell",set:function(a){this.config.fitToCell=a;this.cellGroups.forEach(function(g){return g.resize=a});this.apply()}},{key:"notInLayout",get:function(){return Kd.arr.withoutAll(this.layoutableSubmorphs,this.cellGroups.map(function(a){return a.morph}))}},{key:"col",value:function(a){return this.grid.col(a)}},{key:"row",value:function(a){return this.grid.row(a)}},{key:"rowCount",get:function(){return this.grid.col(0).items.length}},{key:"columnCount",get:function(){return this.grid.row(0).items.length}},
{key:"addGroup",value:function(a){this.cellGroups.push(a)}},{key:"removeGroup",value:function(a){Kd.arr.remove(this.cellGroups,a)}},{key:"fitAxis",value:function(){var a=this,g,l;[this.grid.row(0)].concat($jscomp.arrayFromIterable(this.grid.row(0).axisAfter)).map(function(q){q.prepareForResize(a.container.height);g=a.grid.totalStaticHeight;return q}).forEach(function(q){q.fixed||(q.length=q.proportion*Math.max(0,a.container.height-g))});[this.grid.col(0)].concat($jscomp.arrayFromIterable(this.grid.col(0).axisAfter)).map(function(q){q.prepareForResize(a.container.width);
l=a.grid.totalStaticWidth;return q}).forEach(function(q){q.fixed||(q.length=q.proportion*Math.max(0,a.container.width-l))})}},{key:"apply",value:function(a){a=void 0===a?!1:a;this.active||(this.active=!0,Sb._get(Object.getPrototypeOf(m.prototype),"apply",this).call(this,a),this.grid||this.initGrid(),this.fitAxis(),this.container.extent=Kd.pt(Math.max(this.grid.totalStaticWidth,this.container.width),Math.max(this.grid.totalStaticHeight,this.container.height)),this.fitAxis(),this.cellGroups.forEach(function(g){g&&
g.apply(a)}),this.lastBoundsExtent=this.container.bounds().extent(),this.active=!1)}},{key:"submorphBoundsChanged",get:function(){for(var a=$jscomp.makeIterator(this.cellGroups),g=a.next();!g.done;g=a.next())if(g=g.value,g.morph&&!g.bounds().equals(g.morph.bounds()))return!0;return!1}},{key:"getCellGroupFor",value:function(a){return a&&this.cellGroups.find(function(g){return g.morph==a})}},{key:"onSubmorphRemoved",value:function(a){var g=this.getCellGroupFor(a);g&&(g.morph=null);Sb._get(Object.getPrototypeOf(m.prototype),
"onSubmorphRemoved",this).call(this,a)}},{key:"inspect",value:function(a){}},{key:"ensureGrid",value:function(a){var g=this,l=a.grid,q=a.rowCount,r=a.columnCount;l=l||[[]];q=q||l.length;r=r||Kd.arr.max(l.map(function(u){return u.length}));l.length<q&&(l=l.concat(Kd.arr.withN(q-l.length,[])));return l=l.map(function(u){u.length<r&&(u=u.concat(Kd.arr.withN(r-u.length,null)));return u.map(function(v){return v&&v.isMorph?(v.owner!=g.container&&g.container.addMorph(v),v):v?g.container.getSubmorphNamed(v)||
v:v})})}},{key:"autoAssign",value:function(a){var g=this;a.forEach(function(l){var q,r=Infinity;g.cellGroups.forEach(function(u){u.morph||u.cells.forEach(function(v){v=v.position.dist(l.position);v<r&&(q=u,r=v)})});q&&(q.morph=l)})}}],[{key:"className",get:function(){return"GridLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:48930,end:55912})}(Kd.Layout));Kd.GridLayout=Ew;Kd.GridLayout=Ew;Kd.GridLayout=Ew;var F4=Object.freeze({__proto__:null,CustomLayout:bE,SnapLayout:cE,VerticalLayout:Dw,HorizontalLayout:bt,ProportionalLayout:dE,CenteredTilingLayout:eE,TilingLayout:fE,CellGroup:gE,LayoutColumn:hE,LayoutRow:iE,LayoutCell:jE,GridLayout:Ew});sa("bT",F4);var Ge=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js");Ge.getAllPartResources=fN;Ge.loadPart=TG;Ge.savePart=gN;Ge.interactivelySavePart=
JC;Ge.interactivelyLoadObjectFromPartsBinFolder=hN;Ge.interactivelySaveObjectToPartsBinFolder=iN;Ge.saveObjectToPartsbinFolder=jN;Ge.loadObjectFromPartsbinFolder=KC;Ge.buildCommitEditor=kN;Ge.resource=p;Ge.Resource=jg;Ge.registerExtension=w;Ge.Path=nh;Ge.obj=Pf;Ge.date=Jr;Ge.promise=yg;Ge.HorizontalLayout=bt;Ge.VerticalLayout=Dw;Ge.morph=wa;Ge.pt=oh;Ge.Color=Wf;Ge.Rectangle=ee;Ge.connect=fk;Ge.emit=qk;Ge.SnapshotPackageHelper=jJ;Ge.ensureCommitInfo=IC;Ge.MorphicDB=Ku;Ge.createMorphSnapshot=nx;Ge.getAllPartResources=
fN;Ge.getAllPartResources=fN;Ge.loadPart=TG;Ge.loadPart=TG;Ge.savePart=gN;Ge.savePart=gN;Ge.interactivelySavePart=JC;Ge.interactivelySavePart=JC;Ge.interactivelyLoadObjectFromPartsBinFolder=hN;Ge.interactivelyLoadObjectFromPartsBinFolder=hN;Ge.interactivelySaveObjectToPartsBinFolder=iN;Ge.interactivelySaveObjectToPartsBinFolder=iN;Ge.saveObjectToPartsbinFolder=jN;Ge.saveObjectToPartsbinFolder=jN;Ge.loadObjectFromPartsbinFolder=KC;Ge.loadObjectFromPartsbinFolder=KC;var jQ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),
m=e.hasOwnProperty("SnapshotEditor")&&"function"===typeof e.SnapshotEditor?e.SnapshotEditor:e.SnapshotEditor=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g,l){this.commit=a;this.snapshot=g;this._db=l}},{key:"db",get:function(){return this._db||Ge.MorphicDB.default}},{key:"saveModifiedSnapshot",value:function(a,g){var l=this,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress){q=a;r=q._id;u=q.name;v=q.type;if(!r)throw Error("No id of commit, cannot save!");return y.yield(l.db.commit(v,u,g,a,void 0,r),2)}a=y.yieldResult;l.commit=a;l.snapshot=g;return y.return(a)})}},{key:"interactivelySaveModifiedSnapshot",value:function(a,g){var l=this,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){q=Ge.promise.deferred();r=q.promise;u=q.resolve;v=q.reject;y=l;Object.assign(Ge.buildCommitEditor(),{commit:Object.assign({},l.commit,{},a),cancel:function(){(this.getWindow()||
this).remove();v("canceled")},accept:function(){var A=this,B,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return E.setCatchFinallyBlocks(2),E.yield(y.saveModifiedSnapshot(A.commit,g),4);if(2!=E.nextAddress)return B=E.yieldResult,(A.getWindow()||A).remove(),u(A.commit=B),E.leaveTryBlock(0);G=E.enterCatchBlock();A.showError(G);v(G);E.jumpToEnd()})}}).openInWindow({title:"commit"});return z.return(r)})}},{key:"interactivelyEditMetadata",value:function(a){var g=
this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(g.interactivelySaveModifiedSnapshot(g.commit,g.snapshot),2);l=q.yieldResult;"function"===typeof a&&a({commit:l,snapshot:g.snapshot});return q.return(l)})}},{key:"interactivelyEditSnapshotJSON",value:function(a){var g=this,l,q,r,u,v,y,z,A,B,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return l=g,q=l.commit,r=l.snapshot,u=q,v=u._id,y=u.name,z=u.type,E.yield(System.import("lively.ide/text-editor.js"),
2);B=E.yieldResult;G=B.default;G.openURL("<"+z+"/"+y+">",{historyId:"object-serialization-debugger-editor",customSaveAction:function(K){var J,P,ea,ra,D,O;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:if(J=r){L.jumpTo(2);break}return L.yield(g.db.fetchSnapshot(void 0,void 0,v),3);case 3:J=L.yieldResult;case 2:P=J;ea=JSON.stringify(P,null,2);if(ea===A){L.jumpTo(4);break}return L.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",
{fontWeight:"normal"}]),5);case 5:if(ra=L.yieldResult,!ra)return L.return({saved:!1,message:"canceled"});case 4:return D=JSON.parse(K.ui.contentText.textString),L.yield(g.interactivelySaveModifiedSnapshot(g.commit,D),6);case 6:return q=L.yieldResult,r=D,A=K.ui.contentText.textString,O={saved:!0,snapshot:D,commit:q},"function"===typeof a&&a(O),L.return(O)}})},customLoadContentAction:function(K,J){var P,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ra){if(1==ra.nextAddress)return(P=
r)?ra.jumpTo(2):ra.yield(g.db.fetchSnapshot(void 0,void 0,v),3);2!=ra.nextAddress&&(P=ra.yieldResult);ea=P;return ra.return({content:A=JSON.stringify(ea,null,2),url:z+"/"+y+".json"})})}});E.jumpToEnd()})}},{key:"interactivelyEditPackageCode",value:function(a){var g=this,l,q,r,u,v,y,z,A,B,G,E,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){switch(J.nextAddress){case 1:l=g;q=l.commit;r=l.snapshot;u=q;v=u._id;if(y=r){J.jumpTo(2);break}return J.yield(g.db.fetchSnapshot(void 0,void 0,
v),3);case 3:y=J.yieldResult;case 2:return z=y,A=(new Ge.SnapshotPackageHelper(z)).filesInPackages(),B=A.map(function(P){return{isListItem:!0,string:P.url,value:P}}),J.yield($world.filterableListPrompt("Select file to edit",B,{historyId:"object-serialization-debugger-hist"}),4);case 4:return G=J.yieldResult,E=$jscomp.makeIterator(G.selected),(K=E.next().value)?J.return(g.interactivelyEditFileInSnapshotPackage(K,a)):J.return()}})}},{key:"interactivelyEditFileInSnapshotPackage",value:function(a,g,l){var q=
this,r,u,v,y,z,A,B,G,E,K,J,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){switch(ea.nextAddress){case 1:r=q;u=r.snapshot;v=r.commit;y=v._id;z=v.name;A=v.type;if(B=u){ea.jumpTo(2);break}return ea.yield(q.db.fetchSnapshot(void 0,void 0,y),3);case 3:B=ea.yieldResult;case 2:return G=B,E=a.get(G),ea.yield(System.import("lively.ide/text-editor.js"),4);case 4:return K=ea.yieldResult,J=K.default,P=J.openURL("<"+A+"/"+z+" - "+a.path.slice(1).join("/")+">",{historyId:"interactivelyEditFileInSnapshotPackage-hist",
customSaveAction:function(ra){var D,O,L,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(aa){switch(aa.nextAddress){case 1:D=a.get(G);if(D===E){aa.jumpTo(2);break}return aa.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",{fontWeight:"normal"}]),3);case 3:if(O=aa.yieldResult,!O)return aa.return({saved:!1,message:"canceled"});case 2:return a.set(G,ra.ui.contentText.textString),L=q,aa.yield(q.interactivelySaveModifiedSnapshot(q.commit,
G),4);case 4:return L.commit=aa.yieldResult,N={commit:q.commit,snapshot:G,saved:!0},"function"===typeof g&&g(N),aa.return(N)}})},customLoadContentAction:function(ra,D){return{content:a.get(G),url:a.url}}}),l&&P.whenRendered().then(function(){return P.lineNumber=l.row}),ea.return(P)}})}}],[{key:"className",get:function(){return"SnapshotEditor"}}],e,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9471,end:14581})}(void 0);Ge.SnapshotEditor=jQ;Ge.SnapshotEditor=jQ;Ge.SnapshotEditor=jQ;Ge.partURLRe=/^part:\/\/([^\/]+)\/(.*)$/;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),m=e.hasOwnProperty("PartResource")&&"function"===typeof e.PartResource?e.PartResource:e.PartResource=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(m,b,[{key:"canDealWithJSON",get:function(){return!1}},{key:"dirList",value:function(a,g){var l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?q.yield(Ge.resource(l.url.replace("part://","styleguide://")).dirList(a,g),2):q.return(q.yieldResult)})}},{key:"write",value:function(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){throw Error("Part urls are ready only! Please go to the world they are defined in and change the exported component directly.");
})}},{key:"read",value:function(){var a=this,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(Ge.resource(a.url.replace("part://","styleguide://")).read(),2);g=q.yieldResult;l=g.copy();l.isComponent=!1;l.name="a"+l.constructor.className;l.withAllSubmorphsDoExcluding(function(r){r!=l&&r.master||delete r._parametrizedProps},function(r){return r.master&&r!=l});l.master=g;l.master.applyIfNeeded(!0);l.withAllSubmorphsDo(function(r){if("function"==typeof r.onLoad)r.onLoad()});
return q.return(l)})}}],[{key:"className",get:function(){return"PartResource"}}],e,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14631,end:15829})})(Ge.Resource);var kQ={name:"part",matches:function(b){return b.match(Ge.partURLRe)},resourceClass:Ge.PartResource};Ge.resourceExtension=
kQ;Ge.resourceExtension=kQ;Ge.resourceExtension=kQ;Ge.registerExtension(Ge.resourceExtension);Ge.buildCommitEditor=kN;Ge.buildCommitEditor=kN;var Rf=lively.FreezerRuntime.recorderFor("lively.morphic/world-loading.js");Rf.loadWorldFromURL=UG;Rf.loadWorldFromCommit=VG;Rf.loadWorldFromDB=WG;Rf.loadWorld=XG;Rf.loadLocalConfig=function(){var b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:return b=lively.modules.module("localconfig.js"),m.setCatchFinallyBlocks(2),
m.yield(Rf.resource(b.id).exists(),4);case 4:if(!m.yieldResult){m.jumpTo(5);break}return m.yield(b.reload({resetEnv:!1,reloadDeps:!1}),5);case 5:m.leaveTryBlock(0);break;case 2:e=m.enterCatchBlock(),console.error("Error loading localconfig:",e),"undefined"!==typeof $world&&$world.showError("Error loading localconfig.js: "+e),m.jumpToEnd()}})};Rf.setupLivelyShell=function(b){var e,m,a,g,l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return r.yield(lively.modules.importPackage("lively.shell"),
2);case 2:return r.yield(System.import("lively.shell/client-command.js"),3);case 3:return e=r.yieldResult,m=e.default,r.yield(System.import("lively.shell/client-resource.js"),4);case 4:a=r.yieldResult,g=a.resourceExtension,l=b,q=l.l2lClient,m.installLively2LivelyServices(q),g.resourceClass.defaultL2lClient=q,Rf.registerResourceExension(g),console.log("[lively] lively.shell setup"),r.jumpToEnd()}})};Rf.setupLively2Lively=function(b){var e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return e=
b.getCurrentUser(),m={world:b.name},e&&(m.userToken=e.token,m.userRealm=e.realm),q.yield(lively.modules.importPackage("lively.2lively"),2);case 2:return q.yield(System.import("lively.2lively/client.js"),3);case 3:return a=q.yieldResult,g=a.default,q.yield(g.forLivelyInBrowser(m),4);case 4:return l=q.yieldResult,console.log("[lively] lively2lively client created "+l),l._onUserChange?Rf.reportWorldLoad(b,e):(l._onUserChange=function(r){l.isOnline()&&r.user&&(r=r.user,l.info=Object.assign({},l.info,
{userToken:r.token,userRealm:r.realm}),l.unregister().then(function(){return l.register()}).then(function(){return console.log("re-registered after user change")}))},Rf.subscribe("lively.user/userchanged",l._onUserChange,System),l.once("registered",function(){Rf.reportWorldLoad(b,e)}),l.on("registered",function(){var r=b.get("user flap");r&&r.updateNetworkIndicator(l)}),l.on("connected",function(){var r=b.get("user flap");r&&r.updateNetworkIndicator(l)}),l.on("reconnecting",function(){var r=b.get("user flap");
r&&r.updateNetworkIndicator(l)}),l.on("disconnected",function(){var r=b.get("user flap");r&&r.updateNetworkIndicator(l)})),q.return(l)}})};Rf.interactivelySaveWorld=kA;Rf.reportWorldLoad=function(b,e){e=e?e.name+" ("+(e.token||"").slice(0,5)+")":"---";fetch("/report-world-load",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e+" logged in at "+b.name+" ["+window._livelyLoadId+"]"})}).catch(function(m){return console.warn("report-world-load failed: "+m)})};Rf.resource=
p;Rf.registerResourceExension=w;Rf.Color=Wf;Rf.Path=nh;Rf.obj=Pf;Rf.date=Jr;Rf.promise=yg;Rf.MorphicEnv=Wp;Rf.loadWorldFromResource=xF;Rf.createMorphSnapshot=nx;Rf.MorphicDB=Ku;Rf.loadObjectFromPartsbinFolder=KC;Rf.ensureCommitInfo=IC;Rf.pathForBrowserHistory=ba;Rf.subscribe=Fq;Rf.emit=qk;Rf.loadWorldFromURL=UG;Rf.loadWorldFromURL=UG;Rf.loadWorldFromCommit=VG;Rf.loadWorldFromCommit=VG;Rf.loadWorldFromDB=WG;Rf.loadWorldFromDB=WG;Rf.loadWorld=XG;Rf.loadWorld=XG;Rf.interactivelySaveWorld=kA;Rf.interactivelySaveWorld=
kA;var uj=lively.FreezerRuntime.recorderFor("lively.user/client/user.js");uj.jwtTokenDecode=function(b){b=$jscomp.makeIterator(b.split("."));b.next();var e=b.next().value;b.next();return JSON.parse(atob(e))};uj.guid=function(){var b=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()};uj.makeRequest=function(b,e,m,a){a=void 0===a?{}:a;e={method:void 0===e?"GET":e,mode:"cors"};m&&(e.body=m);e.redirect="follow";e.headers=
Object.assign({},a);return fetch(b,e)};uj.POST=function(b,e){var m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return"string"!==typeof e&&(e=JSON.stringify(e)),l.yield(uj.makeRequest(b,"POST",e,{}),2);case 2:return m=l.yieldResult,l.setCatchFinallyBlocks(3),l.yield(m.text(),5);case 5:a=l.yieldResult;l.leaveTryBlock(4);break;case 3:l.enterCatchBlock();case 4:if(a&&"application/json"===m.headers.get("content-type"))try{g=JSON.parse(a)}catch(q){}if(!g)throw Error("Unexpected response: "+
a);return l.return(g)}})};var Iy=sa("bL",function(b){var e=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),m=e.hasOwnProperty("User")&&"function"===typeof e.User?e.User:e.User=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){this.realm=g;this.name=a;this.roles={};this.createdAt=0;this.token=this.email=null}},{key:"isLoggedIn",
value:function(){return!!this.token}},{key:"loginOrRegister",value:function(a,g,l){var q=this,r,u,v,y,z,A,B,G,E,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){if(1==J.nextAddress)return r=q,u=r.email,v=r.createdAt,y=r.roles,z=r.name,A="register"===a?{password:g,email:u,createdAt:v,roles:y,name:z}:{password:g,name:z},J.yield(uj.POST(l+"/"+a,A),2);B=J.yieldResult;if(B.error)return J.return(B);G=B;E=G.token;K=uj.jwtTokenDecode(E);y=K.roles;v=K.createdAt;u=K.email;Object.assign(q,{roles:y,
createdAt:v,email:u,token:E});return J.return({status:B.status})})}},{key:"verify",value:function(){var a=this,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(uj.POST(a.realm+"/verify",{token:a.token}),2);g=q.yieldResult;l=g.error;return q.return(l?!1:!0)})}},{key:"login",value:function(a){return this.loginOrRegister("login",a,this.realm)}},{key:"register",value:function(a){return this.loginOrRegister("register",a,this.realm)}},{key:"checkPassword",
value:function(a){var g=this,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress){if(!g.isLoggedIn)throw Error("To check password, user needs to login.");return u.yield(uj.POST(g.realm+"/check-password",{token:g.token,password:a}),2)}l=u.yieldResult;q=l.error;r=l.status;if(q)throw Error(q);return u.return(r)})}},{key:"modify",value:function(a){var g=this,l,q,r,u,v,y,z,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){if(1==B.nextAddress)return B.yield(uj.POST(g.realm+
"/modify",{token:g.token,changes:a}),2);l=B.yieldResult;q=l.error;r=l.status;u=l.token;if(q)return B.return({error:q});u&&(v=uj.jwtTokenDecode(u),y=v.roles,z=v.createdAt,A=v.email,Object.assign(g,{roles:y,createdAt:z,email:A,token:u}));return B.return({status:r})})}},{key:"toString",value:function(){return"<"+this.constructor.name+" "+this.name+" "+(this.isLoggedIn()?"":"not ")+"logged in>"}}],[{key:"className",get:function(){return"User"}},{key:"guest",get:function(){return uj.guestUser}},{key:"named",
value:function(a,g){var l=a+"-"+g,q=uj.userMap.get(l);q||(q=new this(a,g),uj.userMap.set(l,q));return q}},{key:"fromToken",value:function(a,g){var l=uj.jwtTokenDecode(a),q=l.roles,r=l.createdAt,u=l.email;return Object.assign(this.named(l.name,g),{roles:q,createdAt:r,email:u,token:a})}},{key:"clearCache",value:function(){uj.userMap=new Map}}],e,{pathInPackage:function(){return"client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:1032,end:3466})}(void 0));uj.User=Iy;uj.User=Iy;uj.User=Iy;var Jy=function(b){var e=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),m=e.hasOwnProperty("GuestUser")&&"function"===typeof e.GuestUser?e.GuestUser:e.GuestUser=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"isGuestUser",get:function(){return!0}},{key:"isLoggedIn",
value:function(){return!1}},{key:"loginOrRegister",value:function(a,g,l){return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){throw Error("Guest user cannot "+a+"!");})}}],[{key:"className",get:function(){return"GuestUser"}}],e,{pathInPackage:function(){return"client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:3476,
end:3702})}(uj.User);uj.GuestUser=Jy;uj.GuestUser=Jy;uj.GuestUser=Jy;uj.userMap=uj.userMap||new Map;uj.guestUser=uj.guestUser||uj.GuestUser.named("guest-"+uj.guid(),null);var Fw=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js");Fw.User=Iy;Fw.GuestUser=Jy;var lQ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js"),m=e.hasOwnProperty("UserRegistry")&&"function"===typeof e.UserRegistry?e.UserRegistry:e.UserRegistry=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"isTrackingGuestUsers",get:function(){return!1}},{key:"hasUserStored",value:function(){try{return!!localStorage["lively.user"]||!!sessionStorage["lively.user"]}catch(a){return!1}}},{key:"login",value:function(a,g){var l=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return a.isGuestUser?u.jumpTo(2):u.yield(a.login(g),3);if(2!=u.nextAddress&&(q=u.yieldResult,r=q.error))throw Error(r);
l.saveUserToLocalStorage(a);return u.return(a)})}},{key:"logout",value:function(a){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){try{g.isTrackingGuestUsers||(delete localStorage["lively.user"],delete sessionStorage["lively.user"])}catch(q){}a=a&&a.isGuestUser?a:Fw.User.guest;lively.notifications&&lively.notifications.emit("lively.user/userchanged",{user:a},Date.now(),System);return l.return(a)})}},{key:"register",value:function(a,g){var l=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==
u.nextAddress){if(!a||a.isGuestUser)throw Error("guest users cannot register");return u.yield(a.register(g),2)}q=u.yieldResult;if(r=q.error)throw Error(r);l.saveUserToLocalStorage(a);return u.return(a)})}},{key:"loadUserFromLocalStorage",value:function(a){try{var g=localStorage["lively.user"]||sessionStorage["lively.user"];if(g)return g=JSON.parse(g),g.isGuest?Fw.GuestUser.named(g.name,null):Fw.User.fromToken(g.token,a)}catch(l){console.warn("Could not read user from localStorage: "+l)}return this.isTrackingGuestUsers?
!1:Fw.GuestUser.guest}},{key:"saveUserToLocalStorage",value:function(a){if(!a||!a.isGuestUser&&!a.token)return!1;lively.notifications&&lively.notifications.emit("lively.user/userchanged",{user:a},Date.now(),System);try{return a.isGuestUser&&!this.isTrackingGuestUsers?(sessionStorage["lively.user"]=JSON.stringify({isGuest:!0,name:a.name}),delete localStorage["lively.user"]):localStorage["lively.user"]=a.isGuestUser&&this.isTrackingGuestUsers?JSON.stringify({isGuest:!0,name:a.name}):JSON.stringify({token:a.token}),
!0}catch(g){return console.warn("Could not save user into local/sessionStorage: "+g),!1}}}],[{key:"className",get:function(){return"UserRegistry"}},{key:"current",get:function(){return this._current||(this._current=new this)}}],e,{pathInPackage:function(){return"client/user-registry.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:81,
end:2583})}(void 0);lQ=Fw.UserRegistry;var lJ=sa("bK",lQ);Fw.default=lQ;var ZA=lively.FreezerRuntime.recorderFor("lively.user/index.js");ZA.User=Iy;ZA.ClientUser=Iy;ZA.GuestUser=Jy;ZA.GuestUser=Jy;ZA.default=lJ;ZA.UserRegistry=lJ;var Kka=Object.freeze({__proto__:null,ClientUser:Iy,GuestUser:Jy,UserRegistry:lJ}),Vf=lively.FreezerRuntime.recorderFor("lively.morphic/world.js");Vf.bowser=Qs;Vf.Rectangle=ee;Vf.Color=Wf;Vf.pt=oh;Vf.arr=vf;Vf.promise=yg;Vf.Path=nh;Vf.obj=Pf;Vf.signal=tl;Vf.config=wk;Vf.MorphicEnv=
Wp;Vf.Morph=nk;Vf.TooltipViewer=YA;Vf.Tooltip=Hy;Vf.loadWorldFromURL=UG;Vf.loadWorldFromDB=WG;Vf.loadWorldFromCommit=VG;Vf.loadWorld=XG;Vf.touchInputDevice=Qo;Vf.UserRegistry=lJ;Vf.loadMorphFromSnapshot=ps;Vf.emit=qk;var ew=sa("aB",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),m=e.hasOwnProperty("World")&&"function"===typeof e.World?e.World:e.World=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._renderer=null;this._tooltipViewer=new Vf.TooltipViewer(this)}},{key:"__deserialize__",value:function(a,g,l,q){Sb._get(Object.getPrototypeOf(m.prototype),"__deserialize__",this).call(this,a,g,l,q);this._renderer=null;this._tooltipViewer=new Vf.TooltipViewer(this)}},{key:"__additionally_serialize__",value:function(a,
g,l,q){Sb._get(Object.getPrototypeOf(m.prototype),"__additionally_serialize__",this).call(this,a,g,l,q);if(a.props.submorphs)for(a=a.props.submorphs.value,g=a.length;g--;)l.refForId(a[g].id).realObj.isHand&&Vf.arr.removeAt(a,g)}},{key:"commands",get:function(){return[].concat($jscomp.arrayFromIterable(Sb._get(Object.getPrototypeOf(m.prototype),"commands",this)),[{name:"resize to fit window",exec:function(a){var g,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:g=
function(){a.extent=lively.FreezerRuntime?a.windowBounds().extent():a.windowBounds().union(a.submorphBounds(function(v){return!v.isEpiMorph&&!v.hasFixedPosition})).extent()},l=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(a.whenRendered(),2);delete a._cachedWindowBounds;return v.return(!a.windowBounds().extent().equals(a.extent))})},q=0;case 2:if(!(r=5>q)){u.jumpTo(4);break}return u.yield(l(),5);case 5:r=u.yieldResult;case 4:if(!r){u.jumpTo(3);
break}q++;g();u.jumpTo(2);break;case 3:return a.relayout(),u.return(!0)}})}}])}},{key:"isWorld",get:function(){return!0}},{key:"render",value:function(a){return a.renderWorld(this)}},{key:"grabbable",get:function(){return!1}},{key:"grabbable",set:function(a){}},{key:"existingHandForPointerId",value:function(a){return this.submorphs.find(function(g){return g instanceof Vf.Hand&&g.pointerId===a})}},{key:"layoutHaloForPointerId",value:function(a){}},{key:"haloForPointerId",value:function(a){}},{key:"handForPointerId",
value:function(a,g){g=void 0===g?!1:g;var l=this.existingHandForPointerId(a);return l?l:!l&&this.firstHand&&g?(this.firstHand.pointerId=a,this.firstHand):this.addMorph(new Vf.Hand(a),this.submorphs[0])}},{key:"removeHandForPointerId",value:function(a){(a=this.existingHandForPointerId(a))&&1<this.hands.length&&a.remove()}},{key:"world",value:function(){return this}},{key:"makeDirty",value:function(){if(!this._dirty){this._dirty=!0;var a=this.env.renderer;a&&a.renderLater()}}},{key:"hands",get:function(){return Vf.arr.sortBy(this.submorphs.filter(function(a){return a.isHand}),
function(a){return a.pointerId})}},{key:"firstHand",get:function(){return this.hands[0]}},{key:"getCurrentUser",value:function(){return Vf.UserRegistry.current.loadUserFromLocalStorage(Vf.config.users.authServerURL)}},{key:"focusedMorph",get:function(){var a=this.env.eventDispatcher;return(a=a&&a.eventState.focusedMorph)&&a.world()===this?a:this}},{key:"onMouseMove",value:function(a){a.hand&&a.hand.update(a);this._tooltipViewer.mouseMove(a)}},{key:"onMouseDown",value:function(a){a.state.menu&&a.state.menu.remove();
this.onWindowScroll();this._tooltipViewer.mouseDown(a)}},{key:"onMouseUp",value:function(a){a.isCommandKey()&&a.stop();if(a.isAltDown()&&Vf.config.altClickDefinesThat){var g=this.morphsContainingPoint(a.position)[0];setTimeout(function(){return System.global.that=g},100);g.show();a.stop();console.log('Set global "that" to '+g)}}},{key:"onMouseWheel",value:function(a){a.isShiftDown()&&(window.scrollBy(-a.domEvt.wheelDeltaX,-a.domEvt.wheelDeltaY),a.stop())}},{key:"onBeforeUnload",value:function(a){return this.onUnload(a)}},
{key:"onUnload",value:function(a){this.submorphs.forEach(function(g){if("function"===typeof g.onWorldUnload)g.onWorldUnload(a)})}},{key:"updateVisibleWindowMorphs",value:function(){this.withAllSubmorphsDo(function(a){if(a.respondsToVisibleWindow){if("function"!==typeof a.relayout)return a.showError(Error(a+" listed as responding to visible window change, but has no relayout instruction"));a.relayout()}})}},{key:"onWindowScroll",value:function(){var a=this.env.eventDispatcher.keyInputHelper.inputState,
g=a.positionChangedTime,l=a.scrollLeftWhenChanged;a=a.scrollTopWhenChanged;var q=document.documentElement;500>Date.now()-g&&!Vf.bowser.firefox?(q.scrollLeft=l,q.scrollTop=a):(this.setProperty("scroll",Vf.pt(q.scrollLeft,q.scrollTop)),this._cachedWindowBounds=null,this.updateVisibleWindowMorphs())}},{key:"onWindowResize",value:function(a){var g=this,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(g.whenRendered(),2);if(3!=u.nextAddress)return g._cachedWindowBounds=
null,"elastic"!==g.resizePolicy?u.jumpTo(3):u.yield(g.execCommand("resize to fit window"),3);g.updateVisibleWindowMorphs();l=$jscomp.makeIterator(g.submorphs);for(q=l.next();!q.done;q=l.next())if(r=q.value,"function"===typeof r.onWorldResize)r.onWorldResize(a);u.jumpToEnd()})}},{key:"relayCommandExecutionToFocusedMorph",value:function(a){if(!a)return null;var g=this.focusedMorph,l=Vf.arr.findAndGet(Vf.arr.without([g].concat($jscomp.arrayFromIterable(g.ownerChain())),this),function(q){return Vf.arr.findAndGet(q.keyhandlers,
function(r){return(r=r.eventCommandLookup(q,a))?{command:r,morph:q}:null})})||{};g=l.command;l=l.morph;return g?l.execCommand(g):null}},{key:"visibleBounds",value:function(){return this.env.renderer?this.windowBounds().intersection(this.innerBounds()):this.innerBounds()}},{key:"windowBounds",value:function(a){if(this._cachedWindowBounds)return this._cachedWindowBounds;a=this.env.domEnv.window;var g=1/this.scale;return this._cachedWindowBounds=new Vf.Rectangle(a.scrollX*g,a.scrollY*g,(a.innerWidth||
this.width)*g,(a.innerHeight||this.height)*g)}},{key:"logError",value:function(a){console.log(a)}},{key:"relayout",value:function(){}},{key:"defaultMenuItems",value:function(a){return[]}}],[{key:"className",get:function(){return"World"}},{key:"properties",get:function(){return{resizePolicy:{doc:"how the world behaves on window size changes 'elastic': resizes to window extent, 'static': leaves its extent unchanged",defaultValue:"elastic",after:["clipMode"],type:"Enum",values:["static","elastic"],set:function(a){this.setProperty("resizePolicy",
a);this.clipMode="static"===a?"visible":"hidden";"elastic"==a&&this.execCommand("resize to fit window")}},colorScheme:{derived:!0,get:function(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}},showsUserFlap:{defaultValue:!0,set:function(a){var g=this;this.setProperty("showsUserFlap",a);System.import("lively.user/morphic/user-ui.js").then(function(l){return l.UserUI[a?"showUserFlap":"hideUserFlap"](g)})}}}}},{key:"defaultWorld",value:function(){return Vf.MorphicEnv.default().world}},
{key:"loadWorldFromURL",value:function(a,g,l){g=void 0===g?this.defaultWorld():g;l=void 0===l?{}:l;return Vf.loadWorldFromURL(a,g,l)}},{key:"loadWorld",value:function(a,g,l){g=void 0===g?this.defaultWorld():g;l=void 0===l?{}:l;return Vf.loadWorld(a,g,l)}},{key:"loadFromCommit",value:function(a,g,l){g=void 0===g?this.defaultWorld():g;l=void 0===l?{}:l;return Vf.loadWorldFromCommit(a,g,l)}},{key:"loadFromDB",value:function(a,g,l,q){l=void 0===l?this.defaultWorld():l;q=void 0===q?{}:q;return Vf.loadWorldFromDB(a,
g,l,q)}},{key:"loadFromResource",value:function(a,g,l){g=void 0===g?this.defaultWorld():g;l=void 0===l?{}:l;var q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return q=Vf,r=q.loadWorld,u=Vf,v=u.loadMorphFromSnapshot,y.yield(a.readJson(),4);case 4:return y.yield(v.call(u,y.yieldResult),3);case 3:return y.yield(r.call(q,y.yieldResult,g,l),2);case 2:return y.return(y.yieldResult)}})}}],e,{pathInPackage:function(){return"world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:713,end:10827})}(Vf.Morph));Vf.World=ew;Vf.World=ew;Vf.World=ew;var $A=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),m=e.hasOwnProperty("Hand")&&"function"===typeof e.Hand?e.Hand:e.Hand=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,
b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{pointerId:a})}},{key:"__deserialize__",value:function(a,g,l,q){Sb._get(Object.getPrototypeOf(m.prototype),"__deserialize__",this).call(this,a,g,l,q);this.reset()}},{key:"reset",value:function(){this._grabbedMorphProperties=new WeakMap}},{key:"isHand",get:function(){return!0}},{key:"pointerId",get:function(){return this.getProperty("pointerId")}},
{key:"pointerId",set:function(a){this.setProperty("pointerId",a)}},{key:"draggable",get:function(){return!1}},{key:"draggable",set:function(a){}},{key:"grabbable",get:function(){return!1}},{key:"grabbable",set:function(a){}},{key:"grabbedMorphs",get:function(){return this.submorphs}},{key:"carriesMorphs",value:function(){return!!this.grabbedMorphs.length}},{key:"morphsContainingPoint",value:function(a,g){return g}},{key:"update",value:function(a){this.position=a.position.subXY(window.scrollX,window.scrollY)}},
{key:"cancelGrab",value:function(a,g){a=void 0===a?!0:a;var l=this,q,r,u,v,y,z,A,B,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(!l.grabbedMorphs.length)return E.return();l.env.eventDispatcher.cancelGrab(l,g);q=[];r=$jscomp.makeIterator(l.grabbedMorphs);for(u=r.next();!u.done;u=r.next())v=u.value,y=l._grabbedMorphProperties.get(v)||{},z=y.prevOwner,A=y.prevIndex,B=y.prevPosition,G=y.pointerAndShadow,Object.assign(v,G),z?(z.addMorphAt(v,A),a?q.push(v.animate({position:B})):v.position=
B):v.remove();return E.return(q.length?Promise.all(q):null)})}},{key:"grab",value:function(a){var g=this;if(Vf.obj.isArray(a))return a.forEach(function(l){return g.grab(l)});this.withMetaDo({metaInteraction:!0},function(){g._grabbedMorphProperties.set(a,{prevOwner:a.owner,prevPosition:a.position,prevIndex:a.owner?a.owner.submorphs.indexOf(a):-1,pointerAndShadow:Vf.obj.select(a,["dropShadow","reactsToPointer"])});a.reactsToPointer=!1;a.dropShadow=!0;g.addMorph(a)});Vf.signal(this,"grab",a)}},{key:"dropMorphsOn",
value:function(a){var g=this;this.withMetaDo({metaInteraction:!0},function(){g.grabbedMorphs.forEach(function(l){try{var q=(g._grabbedMorphProperties.get(l)||{}).pointerAndShadow;Object.assign(l,q);Vf.signal(g,"drop",l);l.onBeingDroppedOn(g,a)}catch(r){console.error(r),g.world().showError("Error dropping "+l+" onto "+a+":\n"+r.stack),l.owner!==a&&g.world().addMorph(a)}})})}},{key:"findDropTarget",value:function(a,g,l){var q=this;a=void 0===a?this.globalPosition:a;g=void 0===g?this.grabbedMorphs:g;
a=this.world().morphsContainingPoint(a);return Vf.arr.sortBy(a,function(r){return[r].concat($jscomp.arrayFromIterable(r.ownerChain())).find(function(u){return Vf.Path("owner.isWorld").get(u)&&u.hasFixedPosition})?0:1}).find("function"===typeof l?function(r,u){return!q.isAncestorOf(r)&&r.acceptsDrops&&!g.includes(r)&&g.every(function(v){return v.wantsToBeDroppedOn(r)})&&l(r,u)}:function(r){return!q.isAncestorOf(r)&&r.acceptsDrops&&g.every(function(u){return u.wantsToBeDroppedOn(r)})})}}],[{key:"className",
get:function(){return"Hand"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},fill:{defaultValue:Vf.touchInputDevice?Vf.Color.transparent:Vf.Color.orange},extent:{defaultValue:Vf.pt(1,1)},reactsToPointer:{defaultValue:!1},_grabbedMorphProperties:{serialize:!1,initialize:function(){this._grabbedMorphProperties=new WeakMap}}}}}],e,{pathInPackage:function(){return"world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10836,end:14799})}(Vf.Morph);Vf.Hand=$A;Vf.Hand=$A;Vf.Hand=$A;var Lka=Object.freeze({__proto__:null,World:ew,Hand:$A}),tk=lively.FreezerRuntime.recorderFor("lively.morphic/text/position.js");tk.comparePosition=lN;tk.lessPosition=Gs;tk.lessEqPosition=lA;tk.eqPosition=Hs;tk.minPosition=mA;tk.maxPosition=nA;tk.comparePosition=lN;tk.comparePosition=lN;tk.lessPosition=Gs;tk.lessPosition=Gs;tk.lessEqPosition=lA;tk.lessEqPosition=
lA;tk.eqPosition=Hs;tk.eqPosition=Hs;tk.minPosition=mA;tk.minPosition=mA;tk.maxPosition=nA;tk.maxPosition=nA;var wg=lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js");wg.lessPosition=Gs;wg.lessEqPosition=lA;wg.eqPosition=Hs;wg.minPosition=mA;wg.maxPosition=nA;var Gw=sa("bl",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js"),m=e.hasOwnProperty("Range")&&"function"===typeof e.Range?e.Range:e.Range=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=a=void 0===a?{start:{row:0,column:0},end:{row:0,column:0}}:a,l=g.start;a=l.row;l=l.column;var q=g.end;g=q.row;q=q.column;if(g<a||g===a&&q<l)l=$jscomp.makeIterator([a,l,g,q]),g=l.next().value,q=l.next().value,a=l.next().value,l=l.next().value;this.start={row:a,column:l};this.end={row:g,column:q}}},{key:"isRange",get:function(){return!0}},{key:"isEmpty",
value:function(){return this.start.row===this.end.row&&this.start.column===this.end.column}},{key:"equals",value:function(a){return a&&a.start&&a.end?wg.eqPosition(this.start,a.start)&&wg.eqPosition(this.end,a.end):!1}},{key:"copy",value:function(){return new wg.Range(this)}},{key:"toLiteral",value:function(){return{start:this.start,end:this.end}}},{key:"merge",value:function(a){a.isRange||(a=new wg.Range(a));return wg.lessPosition(this.end,a.start)||wg.lessPosition(a.end,this.start)?this:wg.Range.fromPositions(wg.minPosition(this.start,
a.start),wg.maxPosition(this.end,a.end))}},{key:"without",value:function(a){a.isRange||(a=new wg.Range(a));var g=wg.Range.compare(this,a);return 0===g?wg.Range.fromPositions(this.start,this.start):5<=Math.abs(g)?this:0>g?wg.Range.fromPositions(this.start,a.start):wg.Range.fromPositions(a.end,this.end)}},{key:"intersect",value:function(a){a.isRange||(a=new wg.Range(a));var g=wg.Range.compare(this,a),l=0>g?this:a;a=0>g?a:this;switch(Math.abs(g)){case 0:case 1:return new wg.Range(l);case 2:case 3:return new wg.Range(a);
case 4:return wg.Range.fromPositions(a.start,l.end);case 5:return wg.Range.at(a.start);case 6:return wg.Range.at(l.end)}}},{key:"subtract",value:function(a){a.isRange||(a=new wg.Range(a));switch(wg.Range.compare(this,a)){case -6:case -5:case 5:case 6:return[new wg.Range(this)];case -1:case 0:case 2:case 3:return[wg.Range.at(this.start)];case 1:case 4:return[wg.Range.fromPositions(a.end,this.end)];case -4:case -3:return[wg.Range.fromPositions(this.start,a.start)];case -2:return[wg.Range.fromPositions(this.start,
a.start),wg.Range.fromPositions(a.end,this.end)]}}},{key:"containsPosition",value:function(a){return wg.lessEqPosition(this.start,a)&&wg.lessEqPosition(a,this.end)}},{key:"toString",value:function(){var a=this.start,g=this.end;return"Range("+a.row+"/"+a.column+" -> "+g.row+"/"+g.column+")"}}],[{key:"className",get:function(){return"Range"}},{key:"sort",value:function(a){return a.sort(wg.Range.compare)}},{key:"compare",value:function(a,g){var l=a.start,q=a.end,r=g.start,u=g.end;return wg.lessPosition(l,
r)?wg.lessPosition(q,r)?-6:wg.eqPosition(q,r)?-5:wg.lessPosition(q,u)?-4:wg.eqPosition(q,u)?-3:-2:wg.eqPosition(l,r)?wg.eqPosition(q,u)?0:wg.lessPosition(q,u)?-1:1:-1*wg.Range.compare(g,a)}},{key:"at",value:function(a){return new this({start:a,end:a})}},{key:"fromPositions",value:function(a,g){return new this({start:a,end:g})}},{key:"create",value:function(a,g,l,q){return new this({start:{row:a,column:g},end:{row:l,column:q}})}},{key:"isValidLiteral",value:function(a){return a?a.isRange?!0:a.start&&
a.end&&"number"===typeof a.start.row&&"number"===typeof a.start.column&&"number"===typeof a.end.row&&"number"===typeof a.end.column:!1}}],e,{pathInPackage:function(){return"text/range.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:108,end:5392})}(void 0));wg.Range=Gw;wg.Range=Gw;wg.Range=Gw;var mJ=new wg.Range;wg.defaultRange=
mJ;wg.defaultRange=mJ;wg.defaultRange=mJ;var fj=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js");fj.lessPosition=Gs;fj.Range=Gw;fj.defaultRange=mJ;fj.config=wk;fj.string=vh;fj.arr=vf;fj.signal=tl;var nJ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),m=e.hasOwnProperty("Selection")&&"function"===typeof e.Selection?e.Selection:e.Selection=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){this.textMorph=a;this.initialize(g)}},{key:"isSelection",get:function(){return!0}},{key:"initialize",value:function(a){this._goalX=this._goalColumn=void 0;this._isReverse=!1;var g=fj.string.newUUID();this.startAnchor=this.textMorph.addAnchor("selection-start-"+g);this.endAnchor=this.textMorph.addAnchor("selection-end-"+g);this.range=fj.Range.isValidLiteral(a)?a:fj.defaultRange;this._cursorVisible=!0;this.cursorBlinkProcess=
null}},{key:"isSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.cursorBlinkStop();this.textMorph.removeAnchor(this.startAnchor);this.textMorph.removeAnchor(this.endAnchor)}},{key:"compareRangesForMerge",value:function(a,g){var l=a.start,q=l.row;l=l.column;var r=a.end,u=r.row;r=r.column;var v=g.start,y=v.row;v=v.column;var z=g.end,A=z.row;z=z.column;return q<y||q===y&&l<v?u<y||u===y&&r<v?"separate":u===y&&r===v?y===A&&v===z?"overlapping":"bordering":"overlapping":q===y&&
l===v?u===A&&r===z?"equal":"overlapping":this.compareRangesForMerge(g,a)}},{key:"mergeWith",value:function(a){if(!a||!a.isSelection)return!1;var g=this.compareRangesForMerge(this.range,a.range);if("separate"===g||"bordering"===g)return!1;this.range=this.range.merge(a.range);a.isReverse()!=this.isReverse()&&this.reverse();return!0}},{key:"range",get:function(){return this._range}},{key:"range",set:function(a){if(a){var g=a,l=g.start;g=g.end;if(void 0!==l&&void 0!==g){var q=this.textMorph.document;
"number"===typeof l&&(a.start=l=q.indexToPosition(l));"number"===typeof g&&(a.end=g=q.indexToPosition(g));if(fj.Range.isValidLiteral(a)){l=q.clipPositionToLines(l);g=q.clipPositionToLines(g);if(this._isReverse=fj.lessPosition(g,l))g=$jscomp.makeIterator([g,l]),l=g.next().value,g=g.next().value;a.start=l;a.end=g;a.isRange||(a=new fj.Range(a));a.equals(this._range)||(this._range=a,this._goalColumn=this.textMorph.lineWrapping?this.textMorph.columnInWrappedLine(this.lead):this.lead.column,this._goalX=
this.textMorph.charBoundsFromTextPosition(this.lead).x,this.startAnchor.position=a.start,this.endAnchor.position=a.end,this.textMorph.makeDirty(),fj.signal(this.textMorph,"selectionChange",this))}}}}},{key:"directedRange",get:function(){return{end:this.lead,start:this.anchor}}},{key:"updateFromAnchors",value:function(){this.range={start:this.startAnchor.position,end:this.endAnchor.position}}},{key:"start",get:function(){return this.range.start}},{key:"start",set:function(a){this.range=fj.Range.fromPositions(a,
this.end)}},{key:"end",get:function(){return this.range.end}},{key:"end",set:function(a){this.range=fj.Range.fromPositions(this.start,a)}},{key:"selectionColor",get:function(){return this.textMorph.selectionColor||"#bed8f7"}},{key:"anchor",get:function(){return this.isReverse()?this.range.end:this.range.start}},{key:"anchor",set:function(a){this.range={start:a,end:this.lead}}},{key:"lead",get:function(){return this.isReverse()?this.range.start:this.range.end}},{key:"lead",set:function(a){this.range=
{start:this.anchor,end:a}}},{key:"text",get:function(){return this.textMorph.document.textInRange(this.range)}},{key:"text",set:function(a){this.replace(a)}},{key:"replace",value:function(a,g,l,q){var r=this.range,u=this.textMorph,v=this.isReverse();this.range=u.replace(r,a,g,l,q);v&&this.reverse();return this.range}},{key:"selectedRows",get:function(){return{first:this.start.row,last:this.end.row}}},{key:"reverse",value:function(){this._isReverse=!this.isEmpty()&&!this._isReverse;return this}},{key:"isReverse",
value:function(){return this._isReverse&&!this.isEmpty()}},{key:"isEmpty",value:function(){return this.range.isEmpty()}},{key:"collapse",value:function(a){a=void 0===a?this.start:a;this.range={start:a,end:a};return this}},{key:"collapseToEnd",value:function(){this.collapse(this.end);return this}},{key:"growLeft",value:function(a){var g=this.textMorph.document,l=g.positionToIndex(this.end);a=Math.min(l,g.positionToIndex(this.start)-a);l=this.isReverse();this.start=g.indexToPosition(a);this._isReverse=
l;return this}},{key:"growRight",value:function(a){var g=this.textMorph.document,l=g.positionToIndex(this.start);a=Math.max(l,g.positionToIndex(this.end)+a);l=this.isReverse();this.end=g.indexToPosition(a);this._isReverse=l;return this}},{key:"selectAll",value:function(){this.range={start:{row:0,column:0},end:this.textMorph.document.endPosition};return this}},{key:"selectLine",value:function(a,g){a=void 0===a?this.lead.row:a;this.includingLineEnd=void 0===g?!1:g;this.range={start:{row:a,column:0},
end:{row:a,column:this.textMorph.getLine(a).length}};return this}},{key:"gotoLineEnd",value:function(a){a=void 0===a?this.lead.row:a;a={row:a,column:this.textMorph.getLine(a).length};this.range={start:a,end:a}}},{key:"selectLeft",value:function(a){a=void 0===a?1:a;this.isEmpty()?(this.growLeft(a),this.reverse()):this.isReverse()?this.growLeft(a):this.growRight(-a);return this}},{key:"selectRight",value:function(a){a=void 0===a?1:a;this.isReverse()?this.growLeft(-a):this.growRight(a);return this}},
{key:"selectUp",value:function(a,g){return this.goUp(void 0===a?1:a,g,!0)}},{key:"selectDown",value:function(a,g){return this.selectUp(-(void 0===a?1:a),g)}},{key:"goUp",value:function(a,g,l){a=void 0===a?1:a;l=void 0===l?!1:l;if(0===a)return this;var q=this._goalColumn,r=this._goalX;this.lead=this.textMorph.getPositionAboveOrBelow(a,this.lead,void 0===g?!1:g,q,r);l||(this.anchor=this.lead);this._goalColumn=q;this._goalX=r;return this}},{key:"goDown",value:function(a,g){return this.goUp(-(void 0===
a?1:a),g)}},{key:"goLeft",value:function(a){a=void 0===a?1:a;this.isEmpty()&&this.growLeft(a);this.collapse();return this}},{key:"goRight",value:function(a){a=void 0===a?1:a;this.isEmpty()&&this.growRight(a);this.collapseToEnd();return this}},{key:"cursorVisible",get:function(){return this._cursorVisible&&this.textMorph.isFocused()&&!this.textMorph.rejectsInput()}},{key:"cursorBlinkStart",value:function(){var a=this;this.cursorBlinkStop();var g=fj.config.text.cursorBlinkPeriod;if(g){var l=this.textMorph,
q=l.env.renderer.getNodeForMorph(l);this.cursorBlinkProcess=setInterval(function(){q||(q=l.env.renderer.getNodeForMorph(l));if(q){a._cursorVisible=!a._cursorVisible;var r=q.className.split(" "),u=r.indexOf("hidden-cursor");a._cursorVisible&&-1<u&&(r.splice(u,1),q.className=r.join(" "));a._cursorVisible||-1!==u||(q.className=[].concat($jscomp.arrayFromIterable(r),["hidden-cursor"]).join(" "))}},1E3*g)}}},{key:"cursorBlinkStop",value:function(){this.cursorBlinkProcess&&clearInterval(this.cursorBlinkProcess);
this.cursorBlinkProcess=null;this._cursorVisible=!0;var a=this.textMorph;if(a=a.env.renderer.getNodeForMorph(a)){var g=a.className.split(" "),l=g.indexOf("hidden-cursor");-1<l&&(g.splice(l,1),a.className=g.join(" "))}}},{key:"toString",value:function(){var a=this.anchor,g=this.lead;return"Selection("+a.row+"/"+a.column+" -> "+g.row+"/"+g.column+")"}}],[{key:"className",get:function(){return"Selection"}}],e,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:223,end:9100})}(void 0);fj.Selection=nJ;fj.Selection=nJ;fj.Selection=nJ;var oJ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),m=e.hasOwnProperty("MultiSelection")&&"function"===typeof e.MultiSelection?e.MultiSelection:e.MultiSelection=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(m,b,[{key:"initialize",value:function(a){this._selections=[new fj.Selection(this.textMorph,a)]}},{key:"__deserialize__",value:function(a,g){this._selections=[]}},{key:"selections",get:function(){return this._selections}},{key:"selections",set:function(a){var g=this._selections?this._selections.filter(function(l){return!a.includes(l)}):[];this._selections=a;g.forEach(function(l){return l.uninstall()})}},{key:"isMultiSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.selections.forEach(function(a){return a.uninstall()})}},
{key:"defaultSelection",get:function(){return fj.arr.last(this.selections)}},{key:"removeSelections",value:function(a){a=this.selections.slice(void 0===a?1:a);a.forEach(function(g){return g.uninstall()});this.selections=fj.arr.withoutAll(this.selections,a)}},{key:"disableMultiSelect",value:function(){fj.arr.without(this.selections,this.defaultSelection).forEach(function(a){return a.uninstall()});this.selections=[this.defaultSelection]}},{key:"range",get:function(){return this.defaultSelection.range}},
{key:"range",set:function(a){this.disableMultiSelect();this.defaultSelection.range=a}},{key:"updateFromAnchors",value:function(){this.selections.forEach(function(a){return a.updateFromAnchors()})}},{key:"start",get:function(){return this.defaultSelection.start}},{key:"start",set:function(a){this.defaultSelection.start=a}},{key:"end",get:function(){return this.defaultSelection.end}},{key:"end",set:function(a){this.defaultSelection.end=a}},{key:"anchor",get:function(){return this.defaultSelection.anchor}},
{key:"anchor",set:function(a){this.defaultSelection.anchor=a}},{key:"lead",get:function(){return this.defaultSelection.lead}},{key:"lead",set:function(a){this.defaultSelection.lead=a}},{key:"text",get:function(){return this.selections.map(function(a){return a.text}).join("\n")}},{key:"text",set:function(a){this.selections.forEach(function(g){return g.text=a})}},{key:"selectedRows",get:function(){return this.defaultSelection.selectedRows}},{key:"reverse",value:function(){this.defaultSelection.reverse()}},
{key:"isReverse",value:function(){return this.defaultSelection.isReverse()}},{key:"isEmpty",value:function(){return this.defaultSelection.isEmpty()}},{key:"collapse",value:function(a){this.defaultSelection.collapse(a);return this}},{key:"collapseToEnd",value:function(){this.defaultSelection.collapseToEnd();return this}},{key:"growLeft",value:function(a){this.defaultSelection.growLeft(a);return this}},{key:"growRight",value:function(a){this.defaultSelection.growRight(a);return this}},{key:"selectAll",
value:function(){this.disableMultiSelect();this.defaultSelection.selectAll();return this}},{key:"selectLine",value:function(a,g){this.includingLineEnd=g;this.defaultSelection.selectLine(a,g);return this}},{key:"gotoLineEnd",value:function(a){this.defaultSelection.gotoLineEnd(a)}},{key:"selectLeft",value:function(a){this.defaultSelection.selectLeft(a);return this}},{key:"selectRight",value:function(a){this.defaultSelection.selectRight(a);return this}},{key:"selectUp",value:function(a,g){this.defaultSelection.selectUp(a,
g);return this}},{key:"selectDown",value:function(a,g){this.defaultSelection.selectDown(a,g);return this}},{key:"goUp",value:function(a,g){return this.defaultSelection.goUp(a,g)}},{key:"goDown",value:function(a,g){return this.defaultSelection.goDown(a,g)}},{key:"goLeft",value:function(a){return this.defaultSelection.goLeft(a)}},{key:"goRight",value:function(a){return this.defaultSelection.goRight(a)}},{key:"cursorVisible",get:function(){return this.defaultSelection.cursorVisible}},{key:"style",set:function(a){this.defaultSelection.style=
a}},{key:"getTextAttributes",value:function(){return this.defaultSelection.getTextAttributes()}},{key:"toString",value:function(){return"MultiSelection("+this.selections.join(", ")+")"}},{key:"mergeSelections",value:function(){for(var a=this.selections.slice(),g=a.length-1;0<=g;g--)for(var l=a.length-1;0<=l;l--)if(g!==l&&a[l].mergeWith(a[g])){a.splice(g,1);break}this.selections=a}},{key:"ranges",get:function(){return this.selections.map(function(a){return a.range})}},{key:"ranges",set:function(a){for(var g=
0;g<a.length;g++){var l=this.selections[g];l?l.range=a[g]:this.addRange(a[g],!1)}this.removeSelections(g);this.mergeSelections()}},{key:"addRange",value:function(a,g){g=void 0===g?!0:g;this.selections.push(new fj.Selection(this.textMorph,a));g&&this.mergeSelections();return fj.arr.last(this.selections).range}}],[{key:"className",get:function(){return"MultiSelection"}}],e,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9109,end:13716})}(fj.Selection);fj.MultiSelection=oJ;fj.MultiSelection=oJ;fj.MultiSelection=oJ;var Tg=lively.FreezerRuntime.recorderFor("lively.morphic/text/attributes.js");Tg.shallowEquals=mN;Tg.concatAttributePair=YG;Tg.joinTextAttributes=ZG;Tg.splitTextAndAttributesAt=$G;Tg.splitTextAndAttributesAtColumns=aH;Tg.concatTextAndAttributes=bH;Tg.modifyAttributesInRange=cH;Tg.textAndAttributesWithSubRanges=dH;Tg.textAndAttributesDo=
function(b,e){for(var m=0;m<b.length;m+=2)e(b[m],b[m+1])};Tg.splitTextAndAttributesIntoLines=LC;Tg.eqPosition=Hs;Tg.lessPosition=Gs;Tg.shallowEquals=mN;Tg.shallowEquals=mN;Tg.concatAttributePair=YG;Tg.concatAttributePair=YG;Tg.joinTextAttributes=ZG;Tg.joinTextAttributes=ZG;Tg.splitTextAndAttributesAt=$G;Tg.splitTextAndAttributesAt=$G;Tg.splitTextAndAttributesAtColumns=aH;Tg.splitTextAndAttributesAtColumns=aH;Tg.concatTextAndAttributes=bH;Tg.concatTextAndAttributes=bH;Tg.modifyAttributesInRange=cH;
Tg.modifyAttributesInRange=cH;Tg.textAndAttributesWithSubRanges=dH;Tg.textAndAttributesWithSubRanges=dH;Tg.splitTextAndAttributesIntoLines=LC;Tg.splitTextAndAttributesIntoLines=LC;var Sd=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js");Sd.arr=vf;Sd.num=Bk;Sd.string=vh;Sd.lessEqPosition=lA;Sd.minPosition=mA;Sd.maxPosition=nA;Sd.lessPosition=Gs;Sd.eqPosition=Hs;Sd.concatTextAndAttributes=bH;Sd.splitTextAndAttributesAtColumns=aH;Sd.splitTextAndAttributesIntoLines=LC;Sd.joinTextAttributes=
ZG;Sd.modifyAttributesInRange=cH;Sd.concatAttributePair=YG;Sd.splitTextAndAttributesAt=$G;Sd.objectReplacementChar="\ufffd";Sd.objectReplacementChar="\ufffd";Sd.objectReplacementChar="\ufffd";Sd.defaultOptions={maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5};(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),m=e.hasOwnProperty("TreeNode")&&"function"===typeof e.TreeNode?e.TreeNode:e.TreeNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.parent=a}},{key:"root",get:function(){return this.parent?this.parent.root:this}},{key:"isRoot",get:function(){return!this.parent}},{key:"withParents",value:function(){for(var a=this,g=[];a;)g.push(a),a=a.parent;return g}},{key:"traverse",value:function(a){var g=[a.call(null,this)];if(this.isLeaf)return g;for(var l=0;l<this.children.length;l++)g.push.apply(g,
$jscomp.arrayFromIterable(this.children[l].traverse(a)));return g}},{key:"consistencyCheck",value:function(){var a=[],g=this.isRoot,l=this.isLeaf,q=this.children,r=this.size,u=this.stringSize,v=this.height,y=this.width,z=this.options,A=z.maxLeafSize,B=z.maxNodeSize,G=z.minLeafSize;z=z.minNodeSize;g||0!==r||a.push({error:"size of "+this+" expected to be > 0!"});if(!Array.isArray(q))return a.push({error:this+".children is not an array but "+q}),a;var E=Sd.arr.sum(Sd.arr.pluck(q,"size"));E!=r&&a.push({error:"Sum of child sizes is not size of "+
this+": "+E+" != "+r});r=Sd.arr.sum(Sd.arr.pluck(q,"stringSize"));r!=u&&a.push({error:"Sum of child stringSize is not stringSIze of "+this+": "+r+" != "+u});u=Sd.arr.sum(Sd.arr.pluck(q,"height"));Number.parseInt(u)!=Number.parseInt(v)&&a.push({error:"Sum of child Height is not Height of "+this+": "+u+" != "+v});v=q.length?Math.max.apply(null,Sd.arr.pluck(q,"width")):0;(q.find(function(K){return K.isLine&&K.hasEstimatedExtent})?Number.parseInt(v)>Number.parseInt(y):Number.parseInt(v)!=Number.parseInt(y))&&
a.push({error:"max width of children of "+this+" is not node width: "+v+" != "+y});y=l?A:B;!g&&q.length>y&&a.push({error:"children count of "+this+" expected to be between "+(l?G:z)+" and "+y+" but is "+q.length});for(g=0;g<q.length;g++)(G=q[g])?(l&&!G.isLine?a.push({error:"child "+g+" of leaf "+this+" is not a line!"}):!l&&G.isLine&&a.push({error:"child of non-leaf "+this+" is a line!"}),this!==G.parent&&a.push({error:"child.parent is "+G.parent+" but should be "+this})):a.push({error:"child "+g+
" of "+this+" is nullish!"});a.push.apply(a,$jscomp.arrayFromIterable(Sd.arr.flatmap(q,function(K){return K.consistencyCheck()})));return a}}],[{key:"className",get:function(){return"TreeNode"}}],e,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1416,end:4603})})(void 0);(function(b){var e=
lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),m=e.hasOwnProperty("InnerTreeNode")&&"function"===typeof e.InnerTreeNode?e.InnerTreeNode:e.InnerTreeNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a.parent);this.options=
a.options;this.children=a.children;this.size=a.size;this.stringSize=a.stringSize;this.height=a.height;this.width=a.width;this.isLeaf=!0}},{key:"isNode",get:function(){return!0}},{key:"resize",value:function(a,g,l){this.size+=a;this.height+=g;this.stringSize+=l;for(var q=0,r=0;r<this.children.length;r++){var u=this.children[r].width;u>q&&(q=u)}this.width=q;this.parent&&this.parent.resize(a,g,l)}},{key:"lines",value:function(a){a=void 0===a?[]:a;if(this.isLeaf)return a.push.apply(a,$jscomp.arrayFromIterable(this.children)),
a;for(var g=0;g<this.children.length;g++)this.children[g].lines(a);return a}},{key:"findRow",value:function(a){if(0>a||a>=this.size)return null;if(this.isLeaf)return this.children[a];for(var g=0;g<this.children.length;g++){var l=this.children[g],q=l.size;if(a<q)return l.findRow(a);a-=q}return null}},{key:"findLineByVerticalOffset",value:function(a,g,l){g=void 0===g?0:g;l=void 0===l?0:l;if(0>a||a>this.height)return null;for(var q=0;q<this.children.length;q++){var r=this.children[q],u=r.height;if(a<=
u)return this.isLeaf?{line:r,offset:a,y:g,row:l}:r.findLineByVerticalOffset(a,g,l);a-=u;g+=u;l+=r.size}return null}},{key:"computeVerticalOffsetOf",value:function(a,g){g=void 0===g?0:g;if(0>a||a>=this.size)return console.warn("strange row in computeVerticalOffsetOf: "+a),g;if(this.isLeaf){for(var l=0;l<Math.min(a,this.children.length);l++)g+=this.children[l].height;return g}for(l=0;l<this.children.length;l++){var q=this.children[l],r=q.size;if(a<r)return q.computeVerticalOffsetOf(a,g);a-=r;g+=q.height}return g}},
{key:"ensureLine",value:function(a){a||(a="");var g="string"===typeof a;return!g&&a.isLine?(a.parent=this,a):new Sd.Line({parent:this,width:g?0:a.width||0,height:g?0:a.height||0,textAndAttributes:g?[a,null]:a.textAndAttributes||[a.text||"",null]})}},{key:"insert",value:function(a,g){g=void 0===g?this.size:g;var l=this.children,q=this.options;if(this.isLeaf){var r=[],u=0,v=0;for(q=0;q<a.length;q++){var y=this.ensureLine(a[q]);r.push(y);u+=y.height;v+=y.stringSize;l.splice(g++,0,y)}this.resize(r.length,
u,v);this.balanceAfterGrowth();return r}0===l.length&&l.push(new Sd.InnerTreeNode({parent:this,children:[],size:0,stringSize:0,width:0,height:0,options:q}));for(q=0;q<l.length;q++){r=l[q];u=r.size;if(g<=u)return r.insert(a,g);g-=u}g=l[q-1];return g.insert(a,g.size)}},{key:"withParentChainsUpToCommonParentDo",value:function(a,g,l){for(var q=this.withParents(),r,u=0;a;){if(q.includes(a)){r=a;break}g(a,u++);a=a.parent}g=q.indexOf(r);0>g&&(g=q.length);q=q.slice(0,g);for(g=0;g<q.length;g++)l(q[g],g)}},
{key:"findLineWithTextIndex",value:function(a,g){g=void 0===g?0:g;if(this.isLeaf){for(var l=0;l<this.children.length;l++){var q=this.children[l],r=q.stringSize;if(a<r)return{line:q,column:a,row:g};a-=r;g++}a=Sd.arr.last(this.children);return{line:a,row:g-1,column:a.stringSize-1}}for(q=l=0;q<this.children.length;q++){r=this.children[q];var u=r.stringSize;if(a<l+u)return r.findLineWithTextIndex(a-l,g);g+=r.size;l+=u}return Sd.arr.last(this.children).findLineWithTextIndex(a-l)}},{key:"findLeafs",value:function(a,
g,l){l=void 0===l?0:l;if(a>l+this.size||g<l)return[];if(this.isLeaf){a=Math.max(0,a-l);var q=this.children.length-1;g=Math.min(q,g-l);l=!1;0===a&&g===q&&(l=!0,g=q);return[{node:this,firstLine:a,lastLine:g,full:l}]}q=[];for(var r=0;r<this.children.length;r++){var u=this.children[r];q.push.apply(q,$jscomp.arrayFromIterable(u.findLeafs(a,g,l)));l+=u.size}return q}},{key:"removeFromToInRoot",value:function(a,g,l){var q=this;if(!this.isRoot)throw Error("removeFromTo() should be called on the root node");
a>g&&(g=$jscomp.makeIterator([g,a]),a=g.next().value,g=g.next().value);var r=this.size,u=this.options.minLeafSize,v=this.findLeafs(a,g),y=v.shift();g=v.pop();var z=[],A=!1,B=!1;if(!(a>=r)){g&&y.node===g.node&&(g=null);y.full?(l&&l.log("Removing complete first line "+y),v.push(y)):A=y.node.children.length-(y.lastLine-y.firstLine+1)<u;g&&(g.full?(l&&l.log("Removing complete last line "+g),v.push(g)):(B=g,B=B.node.children.length-(B.lastLine-B.firstLine+1)<u));if(A||B){var G=(G=y.node.children[0].prevLine())?
G.parent:null;var E=(E=Sd.arr.last(g?g.node.children:y.node.children).nextLine())?E.parent:null}for(a=0;a<v.length;a++){u=v[a].node;r=u.children.length;for(var K=0,J=0,P=0;P<r;P++){var ea=u.children[P];K+=ea.height;J+=ea.stringSize;ea.parent=null}u.children.length=0;u.resize(-r,-K,-J);if(r=u.parent)u.parent=null,r.children.splice(r.children.indexOf(u),1),z.includes(r)||z.push(r)}if(!y.full){u=y.firstLine;v=y.node;a=y.lastLine-u+1;u=v.children.splice(u,a);for(J=K=r=0;J<u.length;J++)P=u[J],r+=P.height,
K+=P.stringSize,P.parent=null;v.resize(-a,-r,-K)}if(g&&!g.full){a=g;u=a.firstLine;v=a.node;a=a.lastLine-u+1;u=v.children.splice(u,a);for(J=K=r=0;J<u.length;J++)P=u[J],r+=P.height,K+=P.stringSize,P.parent=null;v.resize(-a,-r,-K)}l&&l.dump(""+this.print(!1));A&&y.node.balanceByMergeOrTheft(G,!g||g.full?E:g.node,l);g&&B&&g.node.root===this&&(B=!0,G=y.full||!y.node.parent?G:y.node,A&&(g.node.root!==this&&(B=!1),G&&G.root!==this&&(G=null),E&&E.root!==this&&(E=null)),B&&g.node.balanceByMergeOrTheft(G,E,
l));z.forEach(function(ra){return ra.root===q&&ra.balanceAfterShrink(l)})}}},{key:"balanceByMergeOrTheft",value:function(a,g,l){var q=this,r=this.children,u=this.options,v=this.isLeaf,y=v?u.maxLeafSize:u.maxNodeSize;u=v?u.minLeafSize:u.minNodeSize;v=a&&a.children.length+r.length<=y;y=!v&&g&&g.children.length+r.length<=y;var z=v?a:y?g:null;if(z){l&&l.log("[balanceByMergeOrTheft] merging "+this+" "+(v?"left":"right")+" into "+z);var A=this.size,B=this.width,G=this.height,E=this.stringSize;r.forEach(function(L){return L.parent=
z});v?z.children.push.apply(z.children,$jscomp.arrayFromIterable(r)):z.children.unshift.apply(z.children,$jscomp.arrayFromIterable(r));this.width=r.length=0;this.withParentChainsUpToCommonParentDo(z,function(L){B>L.width&&(L.width=B);L.height+=G;L.size+=A;L.stringSize+=E},function(L){if(B===L.width)for(var N=0;N<L.children.length;N++){var aa=L.children[N];aa.width>L.width&&(L.width=aa.width)}L.height-=G;L.size-=A;L.stringSize-=E})}else{v=a?Math.ceil((a.children.length-u)/2):0;var K=g?Math.ceil((g.children.length-
u)/2):0;if((y=0<v&&v>=K)||!y&&0<K){u=y?a.children.splice(a.children.length-v,v):g.children.splice(0,K);var J=y?a:g,P=y?v:K,ea=0,ra=0,D=0,O=0;l&&l.log("[balanceByMergeOrTheft] "+this+" steals from "+(y?"left":"right")+" node "+J+" "+P+" nodes");for(a=0;a<u.length;a++)ea+=u[a].height,ra+=u[a].stringSize,D=Math.max(D,u[a].width);for(a=0;a<J.children.length;a++)O=Math.max(O,J.children[a].width);this.withParentChainsUpToCommonParentDo(J,function(L){if(O<D&&O<L.width){if(L===J)L.width=O;else{for(var N=
!1,aa=0;aa<L.children.length;aa++)if(L.children[aa].width>O){N=!0;break}N||(L.width=O)}L.width=D}L.height-=ea;L.size-=P;L.stringSize-=ra},function(L){L.width<D&&(L.width=D);L.height+=ea;L.size+=P;L.stringSize+=ra});u.forEach(function(L){return L.parent=q});y?this.children.unshift.apply(this.children,$jscomp.arrayFromIterable(u)):this.children.push.apply(this.children,$jscomp.arrayFromIterable(u))}}a=this.parent;0===r.length&&(this.parent=null,a&&a.children.splice(a.children.indexOf(this),1));a&&a.balanceAfterShrink(l)}},
{key:"balanceAfterGrowth",value:function(){var a=this.isLeaf,g=this.size,l=this.stringSize,q=this.parent,r=this.children,u=this.width,v=this.height,y=this.options,z=a?y.maxLeafSize:y.maxNodeSize;if(r.length>z){q||(q=this.parent=new Sd.InnerTreeNode({parent:null,children:[this],size:g,width:u,height:v,stringSize:l,options:y}),q.isLeaf=!1);var A=Math.floor(r.length/2),B=0,G=0,E=g=0,K=l=0,J=u=0;for(v=0;B<A;B++)G+=r[B].size,E=Math.max(E,r[B].width),K+=r[B].height,J+=r[B].stringSize;for(;B<r.length;B++)g+=
r[B].size,l=Math.max(l,r[B].width),u+=r[B].height,v+=r[B].stringSize;this.children=r.slice(0,A);this.size=G;this.width=E;this.height=K;this.stringSize=J;B=q.children.indexOf(this);r=r.slice(A);var P=new Sd.InnerTreeNode({parent:q,children:r,size:g,height:u,width:l,stringSize:v,options:y});P.isLeaf=a;r.forEach(function(ea){return ea.parent=P});q.children.splice(B+1,0,P);P.children.length>z&&P.balanceAfterGrowth();this.children.length>z&&this.balanceAfterGrowth();this.parent.balanceAfterGrowth()}}},
{key:"balanceAfterShrink",value:function(a){var g=this,l=this.isLeaf,q=this.parent,r=this.children,u=this.options,v=u.maxLeafSize,y=u.maxNodeSize,z=u.minLeafSize,A=u.minNodeSize;u=l?v:y;z=l?z:A;A=!1;for(var B=r.length;B--;)0===r[B].size&&(r.splice(B,1),A=!0,a&&a.log("[balanceAfterShrink] "+this+" removes node "+B+" b/c it is empty, remaining children: "+r.length+" (min: "+z+", max: "+u+")"));A&&a&&a.dump(""+this.root.print(!1));if(r.length>=z)q&&q.balanceAfterShrink(a);else if(0===r.length)q&&q.balanceAfterShrink(a);
else if(l)q&&(1===q.children.length?(a&&a.log("[balanceAfterShrink] "+this+" is the only child - will remove it's parent and take its position"),a&&a.dump(""+this.root.print(!1)),this.parent=null,q.children.length=0,q.children.push.apply(q.children,$jscomp.arrayFromIterable(r)),r.forEach(function(E){return E.parent=q}),q.isLeaf=!0):(v=(v=r[0].prevLine())&&v.parent,r=Sd.arr.last(r).nextLine(),this.balanceByMergeOrTheft(v,r&&r.parent,a))),this.parent&&this.parent.balanceAfterShrink(a);else{l=[];u=A=
z=!1;for(B=0;B<r.length;B++){var G=r[B];!z&&G.isLeaf&&(z=!0);A||G.isLeaf||(A=!0);if(z&&A){u=!0;break}l.push.apply(l,$jscomp.arrayFromIterable(G.children))}!u&&l.length<=(z?v:y)&&(a&&a.log("[balanceAfterShrink] "+this+" grandChildren.length is "+l.length+" and <= max size so it is removing all its children and adopting their children"),r.forEach(function(E){return E.parent=null}),l.forEach(function(E){return E.parent=g}),r.length=0,r.push.apply(r,$jscomp.arrayFromIterable(l)),this.isLeaf=z,a&&a.log("[balanceAfterShrink] "+
r.join("\n")),a&&a.dump(""+this.root.print(!1)));q&&q.balanceAfterShrink(a)}}},{key:"print",value:function(a,g,l,q){a=void 0===a?!0:a;g=void 0===g?0:g;l=void 0===l?0:l;var r=this.isLeaf,u=this.size,v=this.stringSize,y=this.width,z=this.height,A=this.children;q=q?q:r?"leaf":"node";v=""+" ".repeat(l)+q+" (size: "+u+" width: "+Math.round(y)+" height: "+Math.round(z)+" text length: "+v+")";if(A.length){y="";g+=u;for(u=A.length;u--;)z=A[u],g-=z.size,y="\n"+z.print(a,g,l+1)+y;v+=y}return v}},{key:"toString",
value:function(){var a=this.isLeaf,g=this.size,l=this.width,q=this.height,r=this.children;return"node ("+(a?"leaf, ":"")+(a&&r.length?"rows: "+r[0].row+"-"+Sd.arr.last(r).row+" ":"")+("size: "+g+" "+l+"x"+q+")")}}],[{key:"className",get:function(){return"InnerTreeNode"}}],e,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:4606,end:28692})})(Sd.TreeNode);var mQ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),m=e.hasOwnProperty("Line")&&"function"===typeof e.Line?e.Line:e.Line=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,a.parent);this.textAndAttributes=Sd.joinTextAttributes(a.textAndAttributes||[]);this._text="";this._textAttributes=null;this.width=a.width;this.height=a.height;this.hasEstimatedExtent=!1;this.modeState=null;this.textAlign="left";this.lineHeight=null;this.marginBottom=this.marginTop=0}},{key:"isLine",get:function(){return!0}},{key:"size",get:function(){return 1}},{key:"stringSize",get:function(){return this.text.length+1}},{key:"text",get:function(){if(this._text)return this._text;
for(var a="",g=this.textAndAttributes,l=0;l<g.length;l+=2)a+="string"===typeof g[l]?g[l]:Sd.objectReplacementChar;return this._text=a}},{key:"textAttributes",get:function(){if(this._textAttributes)return this._textAttributes;for(var a=[],g=this.textAndAttributes,l=0;l<g.length;l+=2){var q=g[l+1];q&&!a.includes(q)&&a.push(q)}return this._textAttributes=a}},{key:"row",get:function(){if(!this.parent)return 0;var a=this.withParents();if(1===a.length)return a.children.indexOf(this);for(var g=0,l=a.length-
1;1<=l;l--)for(var q=a[l],r=q.children.indexOf(a[l-1]),u=0;u<r;u++)g+=q.children[u].size;return g}},{key:"nextLine",value:function(){var a=this.parent;return a?(a=a.children[a.children.indexOf(this)+1])?a:this.root.findRow(this.row+1):null}},{key:"prevLine",value:function(){var a=this.parent;return a?(a=a.children[a.children.indexOf(this)-1])?a:this.root.findRow(this.row-1):null}},{key:"changeExtent",value:function(a,g,l){var q=this.height,r=this.width,u=this.parent;this.width=a;this.height=g;this.hasEstimatedExtent=
void 0===l?!1:l;if(r!==a||q!==g)for(g-=q;u;){u.height+=g;if(a>=u.width)u.width=a;else if(r===u.width){for(q=l=0;q<u.children.length;q++){var v=u.children[q].width;v>l&&(l=v)}u.width=l}u=u.parent}return this}},{key:"changeText",value:function(a,g){g=void 0===g?null:g;var l=this.parent,q=this.height,r=a.length+1-(this.text.length+1),u=0;this.modeState&&this.modeState._string!==a&&(this.modeState=null);this.height||this.width?this.hasEstimatedExtent=!0:(this.width=this.height=0,this.hasEstimatedExtent=
!1,u=-q);this._text=a;this._textAttributes=null;this.textAndAttributes=g||(g=[a,null]);if(0!==g.length%2)throw Error("textAndAttributes list is strange, expected flat pairs of text/attr");for(a=0;a<g.length;a+=2)if((q=g[a+1])&&Array.isArray(q))throw Error("invalid attr part of text/attr pair, its an array: "+q);for(;l;){l.stringSize+=r;l.height+=u;for(a=g=0;a<l.children.length;a++)q=l.children[a].width,q>g&&(g=q);l.width=g;l=l.parent}return this}},{key:"changeTextAndAttributes",value:function(a){a=
Sd.joinTextAttributes(a);for(var g="",l=0;l<a.length;l+=2)g+="string"===typeof a[l]?a[l]:Sd.objectReplacementChar;return this.changeText(g,a)}},{key:"print",value:function(a,g,l){a=void 0===a?!0:a;g=void 0===g?0:g;g=" ".repeat(void 0===l?0:l)+"line "+g+" (size: 1 width: "+Math.round(this.width)+" height: "+Math.round(this.height)+" text length: "+this.stringSize;l=Sd.arr.toTuples(this.textAndAttributes,2).map(function(q){var r=$jscomp.makeIterator(q);q=r.next().value;r=r.next().value;return("string"===
typeof q?'"'+q+'"':String(q))+(","+JSON.stringify(r))}).join(",");return g+(a?")":" content: ["+l+"])")}},{key:"toString",value:function(){var a=this.width,g=this.height;return'line ("'+Sd.string.truncate(this._text,30)+'", '+a+"x"+g+")"}},{key:"consistencyCheck",value:function(){var a=[];if(!this.parent)return a.push("line "+this+" has no parent!"),a}}],[{key:"className",get:function(){return"Line"}}],e,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:28702,end:35054})}(Sd.TreeNode);Sd.Line=mQ;Sd.Line=mQ;Sd.Line=mQ;Sd.documentFuzzier={makeString:function(b,e){b=void 0===b?5:b;e=void 0===e?50:e;var m=Sd.arr.range(65,90).map(function(a){return String.fromCharCode(a)}).join("");m+=m.toLowerCase()+" \n";b=Sd.num.random(b,e);return Sd.arr.shuffle(Array.from(m.repeat(Math.ceil(b/m.length)))).slice(0,b).join("")},
randomDocPosition:function(b){var e=0===b.rowCount?0:Sd.num.random(0,b.rowCount-1);b=Sd.num.random(0,b.getLineString(e).length-1);return{row:e,column:b}},insertRandom:function(b,e,m,a){m=[this.makeString(m,a),null];a=this.randomDocPosition(b);e.push(["insertTextAndAttributes",m,a]);b.insertTextAndAttributes(m,a)},deleteRandom:function(b,e,m,a){m={start:this.randomDocPosition(b),end:this.randomDocPosition(b)};e.push(["remove",m]);b.remove(m)},maybe:function(){return.5>Math.random()},replay:function(b,
e,m,a){m=void 0===m?!1:m;a=void 0===a?!1:a;m&&(b.debug=m,m=b.debugHelper(),m.reset());var g=new Sd.Document([""]);e.forEach(function(l,q){var r=$jscomp.makeIterator(l);l=r.next().value;r=$jscomp.arrayFromIterator(r);if(a&&q==e.length-1)debugger;g[l].apply(g,[].concat($jscomp.arrayFromIterable(r),[m]))});b.changeDocument(g)},run:function(){var b=Date.now(),e=0,m=new Sd.Document([],{maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5}),a=[];try{for(;1E4>m.stringSize&&
1E4>e++;)this.maybe()?this.deleteRandom(m,a):this.insertRandom(m,a),m.consistencyCheck()}catch(l){var g=l}b=Date.now()-b;return{error:g,doc:m,actions:a,time:b}}};Sd.newline="\n";Sd.newlineLength=1;var G4=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),m=e.hasOwnProperty("Document")&&"function"===typeof e.Document?e.Document:e.Document=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){this.options=Object.assign({},Sd.defaultOptions,{},g);this.lines=a}},{key:"balance",value:function(){this.root.balanceAfterGrowth();this.fixRoot()}},{key:"fixRoot",value:function(){var a=this.root.root;this.root!==a&&(this.root=a)}},{key:"height",get:function(){return this.root.height}},{key:"width",get:function(){return this.root.width}},{key:"rowCount",get:function(){return this.root.size}},{key:"stringSize",get:function(){return 0===
this.rowCount?0:this.root.stringSize-1}},{key:"lineStrings",get:function(){return this.lines.map(function(a){return a.text})}},{key:"lines",get:function(){return this.root.lines()}},{key:"lines",set:function(a){a=void 0===a?[]:a;this.root=new Sd.InnerTreeNode({parent:null,children:[],size:0,width:0,height:0,stringSize:0,options:this.options});this.insertLines(a)}},{key:"clipRow",value:function(a){return Math.max(0,Math.min(a,this.rowCount-1))}},{key:"clipPositionToLines",value:function(a){var g=a.row;
a=a.column;var l=this.rowCount;if(0===l)return{row:0,column:0};0>g?g=0:g>=l&&(g=l-1,a=Infinity);0>a?a=0:(l=this.getLineString(g).length,a>l&&(a=l));return{row:g,column:a}}},{key:"findLineByVerticalOffset",value:function(a){return this.root.findLineByVerticalOffset(a)}},{key:"computeVerticalOffsetOf",value:function(a){return this.root.computeVerticalOffsetOf(a)}},{key:"getLine",value:function(a){return this.root.findRow(this.clipRow(a))}},{key:"getLineString",value:function(a){return(a=this.getLine(a))?
a.text:""}},{key:"insertLine",value:function(a,g){g=void 0===g?this.root.rowCount:g;return this.insertLines([a],g)[0]}},{key:"removeLine",value:function(a){this.root.removeFromToInRoot(a,a)}},{key:"removeLines",value:function(a,g,l){this.root.removeFromToInRoot(a,g,l)}},{key:"insertLines",value:function(a,g){a=this.root.insert(a,g);this.fixRoot();return a}},{key:"textString",get:function(){var a="",g=this.lines;if(!g.length)return a;for(var l=0;l<g.length-1;l++)a=a+g[l].text+Sd.newline;return a+=
g[l].text}},{key:"textString",set:function(a){this.lines=a.split(Sd.newline)}},{key:"endPosition",get:function(){var a=this.rowCount;if(0===a)return{row:0,column:0};--a;var g=this.getLine(a);return{row:a,column:g.stringSize-1}}},{key:"textAndAttributes",get:function(){var a=this.lines;if(!a.length)return[];for(var g=Sd.newline,l=a.length-1,q=a[0].textAndAttributes.slice(),r=1;r<=l;r++){var u=a[r],v=q.pop()||null,y=q.pop()||"";u=u.textAndAttributes;q.push.apply(q,$jscomp.arrayFromIterable(Sd.concatAttributePair(y,
v,u[0]||"",u[1]||null,g)));for(v=2;v<u.length;v+=2)q.push(u[v],u[v+1])}return q}},{key:"textAndAttributes",set:function(a){this.lines=Sd.splitTextAndAttributesIntoLines(a,Sd.newline).map(function(g){return new Sd.Line({parent:null,width:0,height:0,textAndAttributes:g})})}},{key:"getTextAndAttributesOfLine",value:function(a){return this.getLine(a).textAndAttributes}},{key:"setTextAndAttributesOfLine",value:function(a,g){this.getLine(a).changeTextAndAttributes(g);return g}},{key:"mixinTextAttribute",
value:function(a,g){Sd.modifyAttributesInRange(this,g,function(l,q){l._textAttributes=null;return Object.assign({},q,a)})}},{key:"setTextAttribute",value:function(a,g){Sd.modifyAttributesInRange(this,g,function(l,q){l._textAttributes=null;return a})}},{key:"mixoutTextAttribute",value:function(a,g){g=void 0===g?{start:{row:0,column:0},end:this.endPosition}:g;if(a){var l=Object.keys(a);Sd.modifyAttributesInRange(this,g,function(q,r){if(!r)return r;q._textAttributes=null;q=0;var u={},v;for(v in r)l.includes(v)||
(u[v]=r[v],q++);return 0===q?null:u})}}},{key:"setTextAttributesWithSortedRanges",value:function(a){function g(B,G,E,K){K=void 0===K?0:K;var J=0,P=G.length;if(0>=E.length-K)return{attributes:[G,null],index:K};for(var ea=[];K<E.length&&!(J>=P);K+=2){var ra=E[K],D=ra.start;ra=ra.end;var O=E[K+1];if(ra.row<B)J=0;else{D.row===B&&J<D.column&&(ea.push(G.slice(J,D.column),null),J=D.column);if(ra.row>B){ea.push(O.embeddedMorph||G.slice(J,P),O);J=P;break}J<ra.column&&ea.push(O.embeddedMorph||G.slice(J,ra.column),
O);J=ra.column}}J<P&&ea.push(G.slice(J,P),null);return{attributes:ea,index:K}}if(!(2>a.length)){var l=a[0].start,q=a.slice(-2)[0].end,r=this.getLine(l.row);if(l.row===q.row){if(!(l.column>=q.column)){var u=g(l.row,r.text,a,0).attributes,v=$jscomp.makeIterator(Sd.splitTextAndAttributesAtColumns(r.textAndAttributes,[l.column,q.column]));a=v.next().value;v.next();v=v.next().value;q=$jscomp.makeIterator(Sd.splitTextAndAttributesAtColumns(u,[l.column,q.column]));q.next();l=q.next().value;q.next();r.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(a),
$jscomp.arrayFromIterable(l),$jscomp.arrayFromIterable(v)))}}else{v=l.row;var y=l.column;l=g(v,r.text,a,0);var z=l.attributes;l=l.index;var A=$jscomp.makeIterator(Sd.splitTextAndAttributesAt(r.textAndAttributes,y));u=A.next().value;A.next();y=$jscomp.makeIterator(Sd.splitTextAndAttributesAt(z,y));y.next();y=y.next().value;for(r.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(u),$jscomp.arrayFromIterable(y)));r=r.nextLine();){v++;if(v===q.row)break;l=g(v,r.text,a,l);u=l.attributes;l=l.index;
r.changeTextAndAttributes(u)}r&&(q=q.column,a=g(v,r.text,a,l).attributes,v=$jscomp.makeIterator(Sd.splitTextAndAttributesAt(r.textAndAttributes,q)),v.next(),v=v.next().value,q=$jscomp.makeIterator(Sd.splitTextAndAttributesAt(a,q)).next().value,r.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(q),$jscomp.arrayFromIterable(v))))}}}},{key:"resetTextAttributes",value:function(){this.lines.forEach(function(a){return a.changeText(a.text)})}},{key:"textAttributeAt",value:function(a){var g=a.row;
a=a.column;a=Math.max(0,a);var l=this.getLine(g);if(!l)return null;g=0;l=l.textAndAttributes;for(var q=0;q<l.length;q+=2){var r=l[q],u=l[q+1];g+="string"===typeof r?r.length:1;if(a<g)return u}return l[l.length-1]}},{key:"textAndAttributesInRange",value:function(a){var g=a.start,l=a.end;if(Sd.eqPosition(g,l))return["",null];Sd.lessPosition(l,g)&&(a=$jscomp.makeIterator([l,g]),g=a.next().value,l=a.next().value);g=Sd.maxPosition(g,{column:0,row:0});l=Sd.minPosition(l,this.endPosition);var q=this.getLine(g.row),
r=q;if(l.row===g.row)return a=g.column,l=l.column,a===l&&l++,a=$jscomp.makeIterator(Sd.splitTextAndAttributesAtColumns(r.textAndAttributes,[a,l])),a.next(),a.next().value;a=[q];for(var u=0;u<l.row-g.row;u++)a.push(q=q.nextLine());q=a[a.length-1];g=$jscomp.makeIterator(Sd.splitTextAndAttributesAt(r.textAndAttributes,g.column));g.next();g=g.next().value;l=$jscomp.makeIterator(Sd.splitTextAndAttributesAt(q.textAndAttributes,l.column)).next().value;0===g.length&&(g=["",null]);if(1===a.length)return Sd.concatTextAndAttributes(g,
l,!0);for(r=1;r<a.length-1;r++)"string"===typeof g[g.length-2]&&(g[g.length-2]+=Sd.newline),Sd.concatTextAndAttributes(g,a[r].textAndAttributes,!0);"string"===typeof g[g.length-2]&&(g[g.length-2]+=Sd.newline);Sd.concatTextAndAttributes(g,l,!0);return Sd.joinTextAttributes(g,"")}},{key:"textInRange",value:function(a){var g=a.start,l=a.end;g=this.clipPositionToLines(g);l=this.clipPositionToLines(l);Sd.lessPosition(l,g)&&(a=$jscomp.makeIterator([l,g]),g=a.next().value,l=a.next().value);a=g;g=a.row;a=
a.column;var q=l;l=q.row;q=q.column;if(g===l)return a===q?"":this.getLineString(g).slice(a,q);var r=this.getLine(g);for(a=r.text.slice(a);(r=r.nextLine())&&++g<l;)a+=Sd.newline+r.text;return a+Sd.newline+this.getLineString(l).slice(0,q)}},{key:"setTextInRange",value:function(a,g){this.remove(g);return this.insertText(a,g.start,!1)}},{key:"indexToPosition",value:function(a){0>a&&(a=0);a=this.root.findLineWithTextIndex(a,0);return{row:a.row,column:a.column}}},{key:"positionToIndex",value:function(a){var g=
a.column,l=this.getLine(a.row);g=Math.max(0,Math.min(g,l.stringSize-1));for(a=l.parent;a;){l=a.children.indexOf(l);l=a.children.slice(0,l);for(var q=0;q<l.length;q++)g+=l[q].stringSize;l=a;a=a.parent}return g}},{key:"insertTextAndAttributes",value:function(a,g,l){l=void 0===l?!1:l;if(!a||!a.length||2===a.length&&!a[0])return{start:g,end:g};l&&!l.debugDocumentUpdate&&(l=!1);l&&!l.log&&(l=console);var q=g.row;g=g.column;0>q&&(q=0);0>g&&(g=0);var r=this.getLine(q);a=Sd.splitTextAndAttributesIntoLines(a,
Sd.newline);l&&(l.log||(l={log:console.log.bind(console),dump:console.log.bind(console)}));if(!r)return q=this.insertLines(a.map(function(K){return new Sd.Line({parent:null,width:0,height:0,textAndAttributes:K})})),l&&l.log("insert "+q.length+" lines into empty text"),{start:{row:0,column:0},end:{row:q.length,column:Sd.arr.last(q).text.length}};if(q>=this.rowCount){var u=this.endPosition;l&&l.log("insertion after doc end, "+q+"/"+g+", inserting "+(q-u.row)+" rows");for(g=0;g<q-u.row;g++)a.unshift(["",
null]);q=u.row;g=u.column}if(1===a.length&&""===a[0][0])return l&&l.log("insert just newline at "+q+"/"+g),q=this.splitLineAt({row:q,column:g}),l&&l.dump(""+this.root.print(!1)),q;var v=a.shift(),y=a.length;u={row:q,column:g};var z=r.stringSize-1;g>z&&(l&&l.log("filling up insertion column at "+q+"/"+g+": "+(g-z)),z=" ".repeat(g-z),v.length?"string"==typeof v[0]?v[0]=z+v[0]:v.unshift(z,null):v.push(z,null));z=$jscomp.makeIterator(Sd.splitTextAndAttributesAt(r.textAndAttributes,g));var A=z.next().value;
z=z.next().value;""===A[0]&&(A=[]);A=Sd.concatTextAndAttributes(A,v,!0);if(0===y){for(var B=0,G=0;G<v.length;G+=2){var E=v[G];B+="string"===typeof E?E.length:1}u.column=g+B;Sd.concatTextAndAttributes(A,z,!0)}r.changeTextAndAttributes(A);if(0===y)return l&&(l.log("single line inserted at "+q+"/"+g),l&&l.dump(""+this.root.print(!1))),{start:{row:q,column:g},end:u};r=a[y-1];for(A=v=0;A<r.length;A+=2)B=r[A],v+="string"===typeof B?B.length:1;u.row+=y;u.column=v;a=this.insertLines(a.map(function(K){return new Sd.Line({parent:null,
width:0,height:0,textAndAttributes:K})}),q+1);y=Sd.arr.last(a);y.changeTextAndAttributes(Sd.concatTextAndAttributes(y.textAndAttributes,z,!0));l&&(l.log(a.length+" inserted at "+q+"/"+g),l&&l.dump(""+this.root.print(!1)));return{start:{row:q,column:g},end:u}}},{key:"insertText",value:function(a,g,l){l=void 0===l?!1:l;if(!a)return{start:g,end:g};var q=g.row;g=g.column;0>q&&(q=0);0>g&&(g=0);var r=this.getLine(q);if(!r)return q=this.insertLines(a.split(Sd.newline)),{start:{row:0,column:0},end:{row:q.length,
column:Sd.arr.last(q).text.length}};q>=this.rowCount&&(g=this.endPosition,a="\n".repeat(q-g.row)+a,q=g.row,g=g.column);var u=a.split(Sd.newline),v=u.shift(),y=u.length;a={row:q,column:g};var z=r.stringSize-1;g>z&&(v=" ".repeat(g-z)+v);z=$jscomp.makeIterator(Sd.splitTextAndAttributesAt(r.textAndAttributes,g));var A=z.next().value;z=z.next().value;""===A[0]&&(A=[]);l=Sd.concatTextAndAttributes(A,[v,l&&A.length?A[A.length-1]:null],!0);0===y&&(a.column=g+v.length,Sd.concatTextAndAttributes(l,z,!0));r.changeTextAndAttributes(l);
if(0===y)return{start:{row:q,column:g},end:a};a.row+=y;a.column=u[y-1].length;l=this.insertLines(u,q+1);l=Sd.arr.last(l);l.changeTextAndAttributes(Sd.concatTextAndAttributes(l.textAndAttributes,z,!0));return{start:{row:q,column:g},end:a}}},{key:"remove",value:function(a,g){g=void 0===g?!1:g;if(0!==this.rowCount){var l=a.start,q=a.end;if(l.row!==q.row||l.column!==q.column){Sd.lessPosition(q,l)&&(q=$jscomp.makeIterator([q,l]),l=q.next().value,q=q.next().value);var r=this.endPosition;if(!Sd.lessEqPosition(r,
l)){var u=Sd.maxPosition(l,{column:0,row:0});l=u.row;u=u.column;r=Sd.minPosition(q,r);q=r.row;var v=r.column;0>u&&(u=0);0>v&&(v=0);g&&!g.debugDocumentUpdate&&(g=!1);g&&(g.log||(g={log:console.log.bind(console),dump:console.log.bind(console),group:console.group.bind(console),groupEnd:console.groupEnd.bind(console)}),g.group("document.remove "+JSON.stringify(a)),g.log("[text doc] removing "+l+"/"+u+" => "+q+"/"+v));var y=this.getLine(l);a=y;r=[y];for(var z=0;z<q-l;z++)r.push(y=y.nextLine());y=r[r.length-
1];u=$jscomp.makeIterator(Sd.splitTextAndAttributesAt(a.textAndAttributes,u)).next().value;v=$jscomp.makeIterator(Sd.splitTextAndAttributesAt(y.textAndAttributes,v));v.next();v=v.next().value;a.changeTextAndAttributes(Sd.concatTextAndAttributes(u,v,!0));g&&g.log('[text doc removal] what remains of start/end line: "'+a.textAndAttributes+'"');1<r.length&&this.removeLines(l+1,q,g);g&&g.groupEnd("[text doc removal]")}}}}},{key:"splitLineAt",value:function(a){var g=a.row;a=a.column;var l=this.getLine(g),
q=$jscomp.makeIterator(Sd.splitTextAndAttributesAt(l.textAndAttributes,a)),r=q.next().value;q=q.next().value;l.changeTextAndAttributes(r);l=new Sd.Line({parent:null,width:0,height:0,textAndAttributes:q});this.insertLines([l],g+1);return{start:{row:g,column:a},end:{row:g+1,column:0}}}},{key:"replace",value:function(a,g,l){var q=a.start;a=a.end;if(!g.length)return this.remove({start:q,end:a},l),{removed:{start:q,end:a},inserted:{start:q,end:q}};var r=this.clipPositionToLines(q),u=this.clipPositionToLines(a);
r.row===u.row&&this.remove({start:r,end:u},l);if(r.row===u.row||Sd.lessEqPosition(this.endPosition,q)){var v;"string"===typeof g?g.length&&(v=g.length&&this.insertText(g,q)):g.length&&(2!==g.length||g[0])&&(v=this.insertTextAndAttributes(g,q,l));v||(v={start:r,end:r});return{removed:{start:q,end:a},inserted:v}}q=r;a=u;l=q;v=l.row;u=l.column;r=a.row;if("string"===typeof g){l=[];g=g.split(Sd.newline);for(var y=0;y<g.length;y++)l.push([g[y],null])}else l=Sd.splitTextAndAttributesIntoLines(g,Sd.newline);
var z=!l.length||1===l.length&&(!l[0].length||!l[0][0].length);z&&(l=[]);var A=g=this.getLine(v);y=this.getLine(r);u=$jscomp.makeIterator(Sd.splitTextAndAttributesAt(A.textAndAttributes,u));var B=u.next().value;u.next();for(A.changeTextAndAttributes(z?B:Sd.concatTextAndAttributes(B,l.shift(),!0));l.length;){g=g.nextLine();v++;if(g===y)break;g.changeTextAndAttributes(l.shift())}if(!l.length)return l=g.stringSize-1,this.remove({start:{row:v,column:g.stringSize},end:a}),{removed:{start:q,end:a},inserted:{start:q,
end:{row:v,column:l}}};console.assert(v==r,"not end row");console.assert(g.row==v,"row != last line.row");this.remove({start:{row:v,column:0},end:a});r=[];g=l.length;for(u=0;u<g-1;u++)y=l[u],y.length||(y=["",null]),"string"==typeof y[y.length-2]?y[y.length-2]+=Sd.newline:y.push(Sd.newline,null),r.push.apply(r,$jscomp.arrayFromIterable(y));r.push.apply(r,$jscomp.arrayFromIterable(l[g-1]));l=this.insertTextAndAttributes(r,{row:v,column:0}).end;return{removed:{start:q,end:a},inserted:{start:q,end:l}}}},
{key:"wordsOfLine",value:function(a){for(var g=this.getLineString(a),l=[],q,r=0;r<g.length;r++)/[^a-z0-9_]/i.test(g[r])?q&&(q.range.end.column=r,l.push(q),q=null):(q=q||{index:l.length,string:"",range:{start:{row:a,column:r},end:{row:a,column:r}}},q.string+=g[r]);q&&(q.range.end.column=r,l.push(q));return l}},{key:"wordAt",value:function(a,g){var l=a.row,q=a.column;g=void 0===g?this.wordsOfLine(l):g;return g.find(function(r){r=r.range;var u=r.end.column;return r.start.column<=q&&q<=u})||{range:{start:{column:q,
row:l},end:{column:q,row:l}},string:""}}},{key:"wordLeft",value:function(a){var g=a.row,l=a.column,q=this.wordsOfLine(g);if(!q.length||Sd.lessEqPosition(a,q[0].range.start)){for(;0<=--g;)if(q=this.wordsOfLine(g),q.length)return Sd.arr.last(q);return{range:{start:a,end:a},string:""}}g=this.wordAt(a);return g.string?Sd.eqPosition(g.range.start,a)?q[g.index-1]:g:q.slice().reverse().find(function(r){return r.range.end.column<=l})||{range:{start:a,end:a},string:""}}},{key:"wordRight",value:function(a){var g=
a.column,l=a.row,q=this.wordsOfLine(a.row);if(!q.length||Sd.lessEqPosition(Sd.arr.last(q).range.end,a)){for(;++l<this.lines.length;)if(q=this.wordsOfLine(l),q.length)return q[0];return{range:{start:a,end:a},string:""}}l=this.wordAt(a);return l.string?Sd.eqPosition(l.range.end,a)?q[l.index+1]:l:q.find(function(r){return r.range.start.column>=g})||{range:{start:a,end:a},string:""}}},{key:"scanForward",value:function(a,g){var l=a.row,q=a.column;a=this.getLine(l);for(var r=a.text;q<a.stringSize-1;q++){var u=
g(r[q],{row:l,column:q});if(u)return u}for(;a=a.nextLine();)for(l++,r=a.text,q=0;q<a.stringSize-1;q++)if(u=g(r[q],{row:l,column:q}))return u;return null}},{key:"scanBackward",value:function(a,g){var l=a.row,q=a.column;a=this.getLine(l);var r=a.text;for(--q;0<=q;q--){var u=g(r[q],{row:l,column:q});if(u)return u}for(;a=a.prevLine();)for(l--,r=a.text,q=a.stringSize-2;0<=q;q--)if(u=g(r[q],{row:l,column:q}))return u;return null}},{key:"copy",value:function(){return new this.constructor(this.lines.slice(),
this.options)}},{key:"toString",value:function(){return"Document("+this.rowCount+" lines)"}},{key:"consistencyCheck",value:function(){var a=[],g=this.rowCount,l=this.stringSize,q=this.lines,r=this.textString,u=this.root;g!==q.length&&a.push({error:"document "+this+" row count: "+g+" !== "+q.length});r.length!==l&&a.push({error:"document "+this+" textString.length vs stringSize: "+r.length+" !== "+l});a.push.apply(a,$jscomp.arrayFromIterable(u.consistencyCheck()));g=0;for(l=q[0];l;)l!=q[g]&&a.push({error:"line iteration at "+
g+" is broken: nextLine() of "+q[g-1]+" is not "+q[g]+"!"}),g++,l=l.nextLine();q[g]&&a.push({error:"nextLine() of\n  "+q[g-1]+"\nis nullish but \n  "+q[g]+"\nexists in tree!"});if(a.length)throw Error("Consistency check of document revealed "+a.length+" error"+(1<a.length?"s":"")+":\n"+a.map(function(v){return v.error}).filter(Boolean).join("\n"));}},{key:"print",value:function(){return this.root.print(!1,0,0,"root")}},{key:"print2",value:function(){var a=System.decanonicalize("lively.lang/text-graphics.js"),
g=(System.get(a)||{}).printTree;return g?g(this.root,function(l){return l.toString()},function(l){return l.children},{padding:[2,1,2,1]}):(lively.module.module(a).load().then(function(){return console.log("lively.lang/text-graphics.js loaded")}).catch(function(l){return console.error(l)}),"Loading lively.lang/text-graphics.js lib, please try again later :P")}}],[{key:"className",get:function(){return"Document"}},{key:"fuzzyTest",value:function(){return Sd.documentFuzzier.run()}},{key:"newline",get:function(){return Sd.newline}},
{key:"fromString",value:function(a,g){return new this(a.split(Sd.newline),g)}}],e,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:37263,end:70606})}(void 0),Mka=G4=Sd.Document;Sd.default=G4;var Uo=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js");Uo.lessPosition=
Gs;Uo.lessEqPosition=lA;Uo.eqPosition=Hs;var aB=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js"),m=e.hasOwnProperty("Anchor")&&"function"===typeof e.Anchor?e.Anchor:e.Anchor=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g,l){g=void 0===g?{column:0,row:0}:g;this.id=a||""+(this.constructor._id=(this.constructor._id||
0)+1);this.position=g;this.insertBehavior=void 0===l?"move":l}},{key:"isAnchor",get:function(){return!0}},{key:"onDelete",value:function(a){if(Uo.lessEqPosition(this.position,a.start))return!1;if(Uo.lessEqPosition(a.start,this.position)&&Uo.lessEqPosition(this.position,a.end))return this.position=a.start,!0;var g=this.position,l=g.column,q=a.start,r=q.column,u=a.end;a=u.row;u=u.column;this.position={column:a!==this.position.row?l:r===u?l-(u-r):r+(l-u),row:g.row-(a-q.row)};return!0}},{key:"onInsert",
value:function(a){if(Uo.lessPosition(this.position,a.start)||Uo.eqPosition(this.position,a.start)&&"stay"===this.insertBehavior)return!1;var g=this.position,l=a.start,q=l.row;l=l.column;a=a.end;var r=a.column;this.position={column:g.column+(q!==this.position.row?0:r-l),row:g.row+(a.row-q)};return!0}},{key:"equalsPosition",value:function(a){return a?a.isAnchor?Uo.eqPosition(this.position,a.position):Uo.eqPosition(this.position,a):!1}},{key:"toString",value:function(){var a=this.position;return"Anchor("+
this.id+" "+a.row+"/"+a.column+")"}}],[{key:"className",get:function(){return"Anchor"}}],e,{pathInPackage:function(){return"text/anchors.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:82,end:3051})}(void 0);Uo.Anchor=aB;Uo.Anchor=aB;Uo.Anchor=aB;var Nka=Object.freeze({__proto__:null,Anchor:aB}),Of=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js");
Of.pt=oh;Of.Color=Wf;Of.connect=fk;Of.once=Xe;Of.disconnect=Jm;Of.Path=nh;Of.morph=wa;Of.GridLayout=Ew;Of.config=wk;Of.Morph=nk;Of.lessPosition=Gs;Of.minPosition=mA;Of.maxPosition=nA;Of.Icon=sn;var pJ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),m=e.hasOwnProperty("TextSearcher")&&"function"===typeof e.TextSearcher?e.TextSearcher:e.TextSearcher=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.morph=a;this.STOP={}}},{key:"doc",get:function(){return this.morph.document}},{key:"processFind",value:function(a,g){var l=this.doc.positionToIndex(a);l=this.doc.indexToPosition(l+g.length);return{range:{start:a,end:l},match:g}}},{key:"stringSearch",value:function(a,g,l,q,r,u,v){if(r&&(Of.lessPosition(v,r.start)||Of.lessPosition(r.end,v)))return this.STOP;l||(u=u.toLowerCase());if(u!==g[0])return null;
r=v.row;v=v.column;u=a[r];a=1>=q?"":"\n"+a.slice(r+1,r+1+(q-1)).join("\n");a=u.slice(v)+a;return 0!==(l?a:a.toLowerCase()).indexOf(g)?null:this.processFind({row:r,column:v},a.slice(0,g.length))}},{key:"reSearch",value:function(a,g,l,q,r,u){if(q&&(Of.lessPosition(u,q.start)||Of.lessPosition(q.end,u)))return this.STOP;q=u.row;u=u.column;return(a=(a[q].slice(u)+(l?"\n"+a.slice(q+1).join("\n"):"")).match(g))?this.processFind({row:q,column:u},a[0]):null}},{key:"search",value:function(a){var g=Object.assign({start:this.morph.cursorPosition,
needle:"",backwards:!1,caseSensitive:!1,inRange:null},a);a=g.start;var l=g.needle,q=g.backwards,r=g.caseSensitive;g=g.inRange;if(!l)return null;g&&(a=q?Of.minPosition(g.end,a):Of.maxPosition(g.start,a));if(l instanceof RegExp){var u=(l.flags||"").split(""),v=!!l.multiline;u.splice(u.indexOf("m"),1);r||u.includes("i")||u.push("i");l=new RegExp("^"+l.source.replace(/^\^+/,""),u.join(""));l=this.reSearch.bind(this,this.doc.lineStrings,l,v,g)}else l=String(l),r||(l=l.toLowerCase()),u=l.split(this.doc.constructor.newline).length,
l=this.stringSearch.bind(this,this.doc.lineStrings,l,r,u,g);a=this.doc[q?"scanBackward":"scanForward"](a,l);return a===this.STOP?null:a}},{key:"searchForAll",value:function(a){for(var g=[],l=0;;){if(1E4<l++)throw Error("endless loop");var q=this.search(a);if(!q)return g;g.push(q);a=Object.assign({},a,{start:a.backwards?q.range.start:q.range.end})}}}],[{key:"className",get:function(){return"TextSearcher"}}],e,{pathInPackage:function(){return"text/search.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:535,end:3676})}(void 0);Of.TextSearcher=pJ;Of.TextSearcher=pJ;Of.TextSearcher=pJ;var nQ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),m=e.hasOwnProperty("SearchWidget")&&"function"===typeof e.SearchWidget?e.SearchWidget:e.SearchWidget=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=this;a=void 0===a?{}:a;a.targetText&&(a.target=a.targetText);if(!a.target)throw Error("SearchWidget needs a target text morph!");Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);a=this.getSubmorphNamed("replaceButton");var l=this.getSubmorphNamed("replaceAllButton");this.getSubmorphNamed("replaceInput");var q=this.getSubmorphNamed("searchInput"),r=
this.getSubmorphNamed("prevButton"),u=this.getSubmorphNamed("nextButton"),v=this.getSubmorphNamed("cancelButton"),y=this.getSubmorphNamed("acceptButton");Of.connect(y,"fire",this,"execCommand",{converter:function(){return"accept search"}});Of.connect(v,"fire",this,"execCommand",{converter:function(){return"cancel search"}});Of.connect(u,"fire",this,"execCommand",{converter:function(){return"search next"}});Of.connect(r,"fire",this,"execCommand",{converter:function(){return"search prev"}});Of.connect(q,
"inputChanged",this,"search");Of.connect(a,"fire",this,"execCommand",{converter:function(){return"replace and go to next"}});Of.connect(l,"fire",this,"execCommand",{converter:function(){return"replace all"}});this.state={backwards:!1,before:null,position:null,inProgress:null,last:null};q.addCommands([{name:"realign top-bottom-center",exec:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){g.target.execCommand("realign top-bottom-center");g.addSearchMarkersForPreview(g.state.inProgress&&
g.state.inProgress.found,!1);return z.return(!0)})}}])}},{key:"focus",value:function(){var a=this;this.get("searchInput").focus();this.whenRendered().then(function(){return a.get("searchInput").invalidateTextLayout(!0,!0)})}},{key:"onBlur",value:function(a){var g=this,l=this.world();l&&setTimeout(function(){var q=l.focusedMorph;g.withAllSubmorphsDetect(function(r){return r.isFocused()})?g.get("searchInput")!=q&&g.get("replaceInput")!=q&&g.get("searchInput").focus():g.cancelSearch()})}},{key:"cleanup",
value:function(){this.removeSearchMarkers();this.state.inProgress=null;this.textMap&&this.textMap.update()}},{key:"cancelSearch",value:function(){this.state.inProgress&&(this.state.last=this.state.inProgress);this.cleanup();this.removeTextMap();if(this.state.before){var a=this.state.before,g=a.scroll;this.target.selection=a.selectionRange;this.target.scroll=g;this.state.before=null}this.remove();this.target.focus()}},{key:"acceptSearch",value:function(){this.state.inProgress&&(this.state.last=this.state.inProgress);
this.applySearchResult(this.state.inProgress)&&this.state.before&&this.target.saveMark(this.state.before.position);this.get("searchInput").acceptInput();this.cleanup();this.removeTextMap();this.state.before=null;this.remove();this.target.focus()}},{key:"applySearchResult",value:function(a){if(!a||!a.found)return null;var g=this.target,l=g.selection,q=!!g.activeMark||!l.isEmpty(),r=a.found.range,u=r.start;r=r.end;u=a.backwards?u:r;q?l.lead=u:g.cursorPosition=u;g.isLineFullyVisible(u.row)||g.centerRow();
return a}},{key:"removeSearchMarkers",value:function(){var a=this;(this.target.markers||[]).forEach(function(g){g=g.id;return g.startsWith("search-highlight")&&a.target.removeMarker(g)})}},{key:"addSearchMarkers",value:function(a,g,l){l=void 0===l?!1:l;this.removeSearchMarkers();g=this.target;var q=this.textMap,r=g.whatsVisible,u=r.startRow;r=r.endRow;var v=g.document.lineStrings,y=0,z=Of.config.codeEditor.search,A=z.maxCharsPerLine;z=z.fastHighlightLineCount;q&&3<=a.match.length&&v.length<z&&(u=
0,r=v.length-1);z=!1;for(var B=window.performance.now();u<=r&&!z;u++)for(var G=v[u]||"",E=0;E<Math.min(G.length,A);E++){if(300<window.performance.now()-B){z=!0;break}if(l?0===G.slice(E).indexOf(a.match):0===G.slice(E).toLowerCase().indexOf(a.match.toLowerCase()))g.addMarker({id:"search-highlight-"+y++,range:{start:{row:u,column:E},end:{row:u,column:E+a.match.length}},style:{"border-radius":"4px","background-color":"rgba(255, 200, 0, 0.3)","box-shadow":"0 0 4px rgba(255, 200, 0, 0.3)","pointer-events":"none"}}),
E+=a.match.length}this.state.backwards?(l=a.range.start,a=l.row,l=l.column,a={start:{row:a,column:l},end:{row:a,column:l+1}}):(l=a.range.end,a=l.row,l=l.column,a={start:{row:a,column:l-1},end:{row:a,column:l}});l={};g.addMarker({id:"search-highlight-cursor",range:a,style:(l["pointer-events"]="none",l["box-sizing"]="border-box",l[this.state.backwards?"border-left":"border-right"]="3px red solid",l)});q&&q.update()}},{key:"addSearchMarkersForPreview",value:function(a,g){g=void 0===g?!0:g;a&&(this.addSearchMarkers(a),
g&&this.target.removeMarker("search-highlight-cursor"))}},{key:"prepareForNewSearch",value:function(){var a=this.target,g=this.state,l=a.world();if(l){this.openInWorld(l.visibleBounds().center(),l);this.topRight=a.globalBounds().insetBy(5).topRight();if(a.getWindow())Of.once(a.getWindow(),"remove",this,"remove");l=this.get("searchInput");var q=a.scroll;a=a.selection;g.position=a.lead;g.before={scroll:q,position:a.lead,selectionRange:a.range,selectionReverse:a.isReverse()};g.last&&g.last.found&&(Of.disconnect(l,
"inputChanged",this,"search"),this.input=g.last.needle,Of.connect(l,"inputChanged",this,"search"),this.addSearchMarkersForPreview(g.last.found));this.focus();l.selectAll()}}},{key:"advance",value:function(a){var g=this.state.inProgress;if(g&&g.found){var l=g.found.range;g=l.start;l=l.end;this.state.position=a!==this.state.backwards?a?l:g:a?g:l}this.state.backwards=a;return this.search()}},{key:"searchNext",value:function(){return this.advance(!1)}},{key:"searchPrev",value:function(){return this.advance(!0)}},
{key:"search",value:function(){if(!this.input)return this.cleanup(),null;var a=this.state,g=a.backwards,l={backwards:g,start:a.position};a=this.target.search(this.input,l);l=this.state.inProgress=Object.assign({},l,{needle:this.input,found:a});this.applySearchResult(l);a?this.addSearchMarkers(a,g):this.cleanup();return l}},{key:"showTextMap",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(System.import("lively.morphic/text/map.js"),
2);g=a.textMap=Of.morph({type:"textmap"});g.attachTo(a.target);g.isLayoutable=!1;a.addMorph(g);g.topRight=a.innerBounds().bottomRight().addXY(0,5);g.height=a.target.height-a.height-15;g.update();a.renderOnGPU=!0;return l.return(g)})}},{key:"removeTextMap",value:function(){this.textMap&&(this.textMap.remove(),this.textMap.detachFromCurrentTextMorph(),this.textMap=null)}},{key:"keybindings",get:function(){return[{keys:"Enter",command:"accept search or replace and go to next"},{keys:"Tab",command:"change focus"},
{keys:"Ctrl-O",command:"occur with search term"},{keys:"Ctrl-W",command:"yank next word from text"},{keys:"Escape|Ctrl-G",command:"cancel search"},{keys:{win:"Ctrl-F|Ctrl-S|Ctrl-G",mac:"Meta-F|Ctrl-S|Meta-G"},command:"search next"},{keys:{win:"Ctrl-Shift-F|Ctrl-R|Ctrl-Shift-G",mac:"Meta-Shift-F|Ctrl-R|Meta-Shift-G"},command:"search prev"}]}},{key:"commands",get:function(){var a=this;return[{name:"occur with search term",exec:function(){var g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==
q.nextAddress)return q.yield(System.import("lively.morphic/text/occur.js"),2);g=q.yieldResult;l=g.occurStartCommand;a.target.addCommands([l]);a.execCommand("accept search");return q.return(a.target.execCommand("occur",{needle:a.input}))})}},{name:"accept search",exec:function(){a.acceptSearch();return!0}},{name:"cancel search",exec:function(){a.cancelSearch();return!0}},{name:"search next",exec:function(){a.searchNext();return!0}},{name:"search prev",exec:function(){a.searchPrev();return!0}},{name:"accept search or replace and go to next",
exec:function(g,l,q){return a.execCommand(a.get("replaceInput").isFocused()?"replace and go to next":"accept search",l,q)}},{name:"replace current search location with replace input",exec:function(){var g=Of.Path("state.inProgress").get(a);if(g.found){var l=a.get("replaceInput").textString;a.get("replaceInput").get("replaceInput").acceptInput();g.needle instanceof RegExp&&(l=g.found.match.replace(g.needle,l));a.target.replace(g.found.range,l)}return!0}},{name:"replace and go to next",exec:function(){a.execCommand("replace current search location with replace input");
a.execCommand(a.state.backwards?"search prev":"search next");return!0}},{name:"replace all",exec:function(){var g=Of.Path("state.inProgress").get(a);if(g.found){g=Object.assign({},g,{start:{row:0,column:0}});var l=a.get("replaceInput").textString;a.get("replaceInput").get("replaceInput").acceptInput();var q=(new Of.TextSearcher(a.target)).searchForAll(g);a.target.undoManager.group();q.forEach(function(r){var u=r.range;r=r.match;g.needle instanceof RegExp&&(l=r.replace(g.needle,l));a.target.replace(u,
l,!0,!0,!1)});a.target.undoManager.group();a.acceptSearch()}return!0}},{name:"change focus",exec:function(){a.get("searchInput").isFocused()?a.get("replaceInput").focus():a.get("searchInput").focus();return!0}},{name:"yank next word from text",exec:function(){var g=a.target,l=g.wordRight(),q=a.get("searchInput");q.selection.isEmpty()||(q.selection.text="");g=g.textInRange({start:g.cursorPosition,end:l.range.end});q.textString+=g;return!0}}]}}],[{key:"className",get:function(){return"SearchWidget"}},
{key:"properties",get:function(){return{name:{defaultValue:"search widget"},borderWidth:{defaultValue:1},borderColor:{defaultValue:Of.Color.gray},borderRadius:{defaultValue:3},fill:{defaultValue:Of.Color.black.withA(.6)},epiMorph:{defaultValue:!0},target:{},state:{},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/search widget"}}},input:{after:["submorphs"],get:function(){var a=this.get("searchInput").textString,g=a.match(/^\/(.*)\/([a-z]*)$/);return g?new RegExp(g[1],
g[2]):a},set:function(a){this.get("searchInput").textString=String(a)}},fontSize:{after:["submorphs"],get:function(){return this.get("searchInput").fontSize},set:function(a){this.get("replaceInput").fontSize=a}},fontFamily:{after:["submorphs"],get:function(){return this.get("searchInput").fontFamily},set:function(a){this.get("searchInput").fontFamily=a;this.get("replaceInput").fontFamily=a}},layout:{initialize:function(){this.layout=new Of.GridLayout({groups:{nextButton:{resize:!1},prevButton:{resize:!1},
acceptButton:{resize:!1},cancelButton:{resize:!1}},rows:[0,{fixed:28,paddingTop:5,paddingBottom:2.5},1,{fixed:28,paddingTop:2.5,paddingBottom:5}],columns:[0,{paddingLeft:5,paddingRight:5},1,{fixed:25},2,{fixed:25},3,{fixed:5},4,{fixed:25},5,{fixed:25},6,{fixed:10}],grid:[["searchInput","nextButton","prevButton",null,"acceptButton","cancelButton",null],["replaceInput","replaceButton","replaceButton",null,"replaceAllButton","replaceAllButton",null]]})}},submorphs:{after:["extent"],initialize:function(){this.submorphs=
[Of.morph({type:"button",name:"acceptButton",label:Of.Icon.textAttribute("check-circle")}).fit(),Of.morph({type:"button",name:"cancelButton",label:Of.Icon.textAttribute("times-circle")}).fit(),Of.morph({type:"button",name:"nextButton",label:Of.Icon.textAttribute("arrow-alt-circle-down",{textStyleClasses:["far"]})}).fit(),Of.morph({type:"button",name:"prevButton",label:Of.Icon.textAttribute("arrow-alt-circle-up",{textStyleClasses:["far"]})}).fit(),Of.morph({type:"input",name:"searchInput",placeholder:"search input",
historyId:"lively.morphic-text search"}),Of.morph({type:"input",name:"replaceInput",placeholder:"replace input",historyId:"lively.morphic-text replace"}),Of.morph({type:"button",styleClasses:["replace"],name:"replaceButton",label:"replace"}),Of.morph({type:"button",styleClasses:["replace"],name:"replaceAllButton",label:"replace all"})];Of.connect(this.get("searchInput"),"onBlur",this,"onBlur");Of.connect(this.get("replaceInput"),"onBlur",this,"onBlur")}},textMap:{after:["submorphs"]}}}}],e,{pathInPackage:function(){return"text/search.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3796,end:20987})}(Of.Morph);Of.SearchWidget=nQ;Of.SearchWidget=nQ;Of.SearchWidget=nQ;var qJ=[{name:"search in text",exec:function(b,e){e=void 0===e?{backwards:!1}:e;b=b._searchWidget||(b._searchWidget=new Of.SearchWidget({target:b,extent:Of.pt(300,20)}));b.state.backwards=e.backwards;
b.prepareForNewSearch();Of.config.codeEditor.search.showTextMap&&b.showTextMap();return!0}}];Of.searchCommands=qJ;Of.searchCommands=qJ;Of.searchCommands=qJ;var Ok=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js");Ok.todo=function(b){throw Error("not yet implemented "+b);};Ok.Rectangle=ee;Ok.rect=Ii;Ok.pt=oh;Ok.arr=vf;Ok.Range=Gw;var H4=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js"),m=e.hasOwnProperty("TextLayout")&&"function"===typeof e.TextLayout?
e.TextLayout:e.TextLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},{key:"reset",value:function(){this.resetLineCharBoundsCache()}},{key:"restore",value:function(a,g){var l=function(u){var v=0;return Ok.arr.flatten(Ok.arr.histogram(u,u.length/3).map(function(y){var z=$jscomp.makeIterator(y);y=z.next().value;var A=z.next().value;
z=z.next().value;for(var B=[],G=0;G<y;G++)B.push(Ok.rect(v,0,A,z)),v+=A;return B}))};a=$jscomp.makeIterator(a);for(var q=a.next();!q.done;q=a.next()){var r=$jscomp.makeIterator(q.value);q=r.next().value;r=r.next().value;r=l(r);this.lineCharBoundsCache.set(g.document.getLine(q),r)}}},{key:"resetLineCharBoundsCache",value:function(a){this.lineCharBoundsCache=new WeakMap;a&&!a._isDeserializing&&(this.estimateLineHeights(a),a.makeDirty())}},{key:"resetLineCharBoundsCacheOfLine",value:function(a){a&&this.lineCharBoundsCache.set(a,
null)}},{key:"resetLineCharBoundsCacheOfRow",value:function(a,g){var l=a.document;a._isDeserializing&&a._initializedByCachedBounds||l&&this.resetLineCharBoundsCacheOfLine(l.getLine(g))}},{key:"resetLineCharBoundsCacheOfRange",value:function(a,g){for(var l=g.start.row;l<=g.end.row;l++)this.resetLineCharBoundsCacheOfRow(a,l)}},{key:"estimateLineHeightsInRange",value:function(a,g){for(var l=a.document,q=a.getGlobalTransform(),r=g.start.row;r<=g.end.row;r++)this.resetLineCharBoundsCacheOfRow(a,l.getLine(r),
q)}},{key:"estimateExtentOfLine",value:function(a,g,l){l=void 0===l?a.getGlobalTransform():l;var q=a.fontMetric,r=a.lineWrapping,u=a.padding,v=a.textRenderer,y=a.debug,z=a.defaultTextStyle,A=a.getProperty("extent").x,B=u.left(),G=u.right(),E=u.top();u=u.bottom();v=v.directRenderTextLayerFn(a);var K=g.textAndAttributes,J=[],P;A=A-B-G;if(K&&K.length)for(var ea=0,ra=0;ea<K.length;ea+=2)(P=K[ea])&&P.isMorph?(P.position=this.pixelPositionFor(a,{row:g.row,column:ra}).subPt(a.origin),ra++):P&&(ra+=P.length),
J.push(Object.assign({},z,{},K[ea+1]));else J.push(z);K=J.length;for(ea=z=P=0;ea<K;ea++){ra=q.defaultCharExtent(a,{defaultTextStyle:J[ea],width:1E3,transform:l,paddingBottom:u,paddingTop:E,paddingRight:G,paddingLeft:B},v);var D=ra.width;z=Math.max(ra.height,z);P+=D}a=z;l=g.text.length||1;q=Math.round(P/K);B=l*q;B=r?Math.min(B,A):B;r&&(a=Math.round((Math.ceil(l/Math.max(3,A/q))||1)*z));y&&console.log(g.row+": "+g.height+" => "+a);g.changeExtent(B,a,!0)}},{key:"estimateLineHeights",value:function(a,
g){var l=a.fontMetric,q=a.textRenderer,r=a.document,u=a.defaultTextStyle,v=a.clipMode,y=a.textAlign,z=a.padding,A=a.lineWrapping,B=a.debug,G=a.getProperty("extent"),E=G.x,K=G.y;G=a.getGlobalTransform();var J=z.left(),P=z.right(),ea=z.top();z=z.bottom();r=r.lines;var ra=q.directRenderTextLayerFn(a);B&&(B=a.debugHelper(B),B.debugTextLayout||(B=!1));if(!B&&10>a.lineCount()&&3E3>a.document.stringSize&&!Ok.arr.any(a.textAndAttributes,function(D){return D&&void 0!=D.fontFamily}))for(g=q.directRenderLineFn(a),
g=l.manuallyComputeBoundsOfLines(a,r,0,0,{defaultTextStyle:u,width:E,height:K,clipMode:v,lineWrapping:A,textAlign:y,transform:G,paddingLeft:J,paddingRight:P,paddingTop:ea,paddingBottom:z},ra,g),u=0;u<r.length;u++)B=g[u],r[u].changeExtent(B.width,B.height,!l.isFontSupported(a.fontFamily,a.fontWeight));else{for(u=l=0;u<r.length;u++)v=r[u],!g&&0<v.height||(l++,this.estimateExtentOfLine(a,v,G));a.viewState._textLayoutStale=!1;B&&B.log("estimateLineHeights, "+l+"/"+r.length+" updated, force: "+g)}}},{key:"defaultCharExtent",
value:function(a){var g=a.textRenderer,l=a.fontMetric,q=a.defaultTextStyle,r=a.getGlobalTransform();g=g.directRenderTextLayerFn(a);return l.defaultCharExtent(a,{transform:r,defaultTextStyle:q,width:1E3},g)}},{key:"textBounds",value:function(a){var g=a.document,l=a.padding,q=a.borderWidthLeft,r=a.borderWidthRight,u=a.borderWidthTop;a=a.borderWidthBottom;return new Ok.Rectangle(l.left(),l.top(),Math.round(g.width+q+r),Math.round(g.height+u+a))}},{key:"isFirstLineVisible",value:function(a){return 0>=
a.viewState.firstVisibleRow}},{key:"isLastLineVisible",value:function(a){return a.viewState.lastVisibleRow>=a.lineCount()-1}},{key:"isLineVisible",value:function(a,g){return g>=a.viewState.firstVisibleRow&&g<=a.viewState.lastVisibleRow}},{key:"isLineFullyVisible",value:function(a,g){return g>=a.viewState.firstFullyVisibleRow&&g<=a.viewState.lastFullyVisibleRow}},{key:"whatsVisible",value:function(a){var g=a.viewState.firstVisibleRow,l=a.viewState.lastVisibleRow;return{lines:a.document.lines.slice(g,
l),startRow:g,endRow:l}}},{key:"firstFullVisibleLine",value:function(a){return a.viewState.firstFullyVisibleRow}},{key:"lastFullVisibleLine",value:function(a){return a.viewState.lastFullyVisibleRow}},{key:"screenLineRange",value:function(a,g,l){var q=g.row,r=g.column;r=Math.max(0,r);q=Math.min(a.lineCount()-1,Math.max(0,q));var u=this.charBoundsOfRow(a,q);r>u.length-1&&(r=u.length-1);for(var v=u[r],y=g=r,z=r+1;z<u.length&&!(u[z].y>v.y+v.height);z++)y=z;y===u.length-1&&y++;for(z=r-1;0<=z&&!(u[z].y<
v.y+v.height);z--)g=z;l&&(a=a.getLine(q).slice(g,y).match(/^\s*/)[0].length,g+=a);return new Ok.Range({start:{row:q,column:g},end:{row:q,column:y}})}},{key:"rangesOfWrappedLine",value:function(a,g){for(var l=a.getLine(g).length,q=0,r=[];;){var u=this.screenLineRange(a,{row:g,column:q},!1);r.push(u);if(u.end.column>=l)break;var v=u.end.column+1;if(v>=l)break;if(v<=q)throw Error("should not happen "+u.end.column+" vs "+q);q=v}return r}},{key:"chunkAtPos",value:function(a,g){Ok.todo("chunkAtPos")}},
{key:"charBoundsOfRow",value:function(a,g){g=a.document.getLine(g);a._initializedByCachedBounds&&!this._restored&&(this.restore(a._initializedByCachedBounds,a),this._restored=!0);var l=this.lineCharBoundsCache.get(g);if(l)return l;var q=a.getProperty("extent");l=q.x;q=q.y;var r=a.fontMetric,u=a.textRenderer,v=a.defaultTextStyle,y=a.clipMode,z=a.textAlign,A=a.padding,B=a.lineWrapping,G=a.getGlobalTransform(),E=A.left(),K=A.right(),J=A.top();A=A.bottom();var P=u.directRenderLineFn(a);u=u.directRenderTextLayerFn(a);
a=r.manuallyComputeCharBoundsOfLine(a,g,0,0,{defaultTextStyle:v,width:l,height:q,clipMode:y,lineWrapping:B,textAlign:z,paddingLeft:E,paddingRight:K,paddingTop:J,paddingBottom:A,transform:G},u,P);this.lineCharBoundsCache.set(g,a);return a}},{key:"computeMaxBoundsForLineSelection",value:function(a,g){var l=g.start,q=g.end,r=a.textLayout;q=a.lineWrapping?r.rangesOfWrappedLine(a,l.row).find(function(u){return u.containsPosition(l)}).intersect(g).end:q;q=q.row==l.row?q:{row:q.row,column:-1};g=r.charBoundsOfRow(a,
l.row);g=0>q.column?g.slice(l.column):g.slice(l.column,q.column+1);q=l.column+(g?g.indexOf(Ok.arr.max(g,function(u){return u.height})):0);return r.boundsFor(a,{row:l.row,column:q})}},{key:"boundsFor",value:function(a,g){var l=g.row;g=g.column;g=Math.max(0,g);l=Math.min(a.lineCount()-1,Math.max(0,l));var q=this.charBoundsOfRow(a,l);if(0<q.length)if(g>=q.length){var r=q[q.length-1];r=new Ok.Rectangle(r.x+r.width,r.y,0,r.height)}else r=Ok.Rectangle.fromLiteral(q[g]);r||(console.warn("Cannot compute bounds for line "+
l+"/"+g),r=new Ok.Rectangle(0,0,0,0));g=a.document;a=a.padding;r.x+=a.left();r.y=r.y+g.computeVerticalOffsetOf(l)+a.top();return r}},{key:"pixelPositionFor",value:function(a,g){return this.boundsFor(a,g).topLeft()}},{key:"textPositionFromPoint",value:function(a,g){var l=g.addPt(a.origin),q=l.x,r=l.y,u=a.document;l=a.padding;var v=l.left(),y=l.top();if(r>u.height+y)return u.endPosition;if(r<y)return{row:0,column:0};l=u.findLineByVerticalOffset(r-y);if(!l)return{row:0,column:0};var z=l.line.row;a=this.charBoundsOfRow(a,
z);var A=a.length,B=a[0],G=a[A-1];l={row:z,column:0};q-=v;r-=y+u.computeVerticalOffsetOf(z);if(0===A||q<=B.x+Math.round(B.width/2)&&r>=B.y&&r<=B.y+B.height)return l;if(q>G.x+Math.round(G.width/2)&&r>=G.y&&r<=G.y+G.height)return l.column=A,l;v=[];for(u=A-1;0<=u;u--)if(G=y=a[u],z=G.x,A=G.width,B=G.y,G=G.height,!(r<B||r>B+G)&&(v.push(y),q>=z+Math.round(A/2)))return l.column=1===v.length?u:u+1,l;if(v.length)return l.column=a.indexOf(Ok.arr.last(v)),l;q=Infinity;r=-1;for(u=0;u<a.length;u++)v=a[u],v=g.distSquared(Ok.pt(v.x+
v.width/2,v.y+v.height/2)),v>=q||(q=v,r=u);l.column=r;return l}}],[{key:"className",get:function(){return"TextLayout"}}],e,{pathInPackage:function(){return"text/layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:239,end:16437})}(void 0),Oka=H4=Ok.TextLayout;Ok.default=H4;var ff=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js");
ff.printViewState=function(b){var e=b.viewState,m=e.scrollTop,a=e.scrollHeight,g=e.textHeight,l=e.firstVisibleRow;e=e.lastVisibleRow;var q=b.document.lines;console.log(b+" #"+b.id.slice(0,12)+"\nscroll: "+m+" + "+a+"\nlines: "+l+" - "+e+"\nvisible lines: "+(e-l)+"\nheight: "+g+", "+q.length+" lines")};ff.installCSS=function(b){ff.cssInstalled=!0;ff.addOrChangeCSSDeclaration("new-text-css","\n\n    /* markers */\n\n    .newtext-marker-layer {\n      position: absolute;\n    }\n\n    /* selection / cursor */\n\n    .newtext-cursor {\n      z-index: 5;\n      pointer-events: none;\n      position: absolute;\n      background-color: black;\n    }\n\n    .hidden-cursor .newtext-cursor {\n      background-color: transparent !important;\n    }\n\n    .newtext-cursor.diminished {\n      background-color: gray;\n    }\n\n    .newtext-selection-layer {\n      position: absolute;\n    }\n\n    /*-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* text layer / content */\n\n    .newtext-text-layer {\n      box-sizing: border-box;\n      position: absolute;\n      white-space: pre;\n      z-index: 0;\n      min-width: 100%;\n      pointer-events: none;\n    }\n\n    .newtext-before-filler {}\n\n    .newtext-text-layer.wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-word;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.only-wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.wrap-by-chars {\n      white-space: pre-wrap;\n      word-break: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.no-wrapping {\n    }\n\n    .newtext-text-layer a {\n       pointer-events: auto;\n    }\n\n    .newtext-text-layer.auto-width .line {\n      width: fit-content;\n    }\n\n    .newtext-text-layer .line {\n      -moz-border-radius: 0;\n      -webkit-border-radius: 0;\n      border-radius: 0;\n      border-width: 0;\n      background: transparent;\n      font-family: inherit;\n      font-size: inherit;\n      margin: 0;\n      word-wrap: normal;\n      line-height: inherit;\n      color: inherit;\n      position: relative;\n      overflow: visible;\n      -webkit-tap-highlight-color: transparent;\n      -webkit-font-variant-ligatures: contextual;\n      font-variant-ligatures: contextual;\n    }\n\n    .line > .Morph {\n      display: inline-block !important;\n      vertical-align: top !important;\n    }\n\n    blockquote {\n      margin: 0;\n      -webkit-margin-start: 0;\n      -webkit-margin-end: 0;\n    }\n\n    .newtext-text-layer blockquote {\n      margin-left: 2em;\n      margin-right: 2em;\n      border-left: 2px lightgray solid;\n      padding-left: 2%;\n    }\n\n    /* -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* debug styling */\n\n    .debug-info {\n      position: absolute;\n      outline: 1px solid green;\n      pointer-events: none;\n      z-index: 4;\n      text-align: center;\n      font-family: monospace;\n      color: green;\n      background-color: white;\n      font-size: small;\n      vertical-align: baseline;\n    }\n\n    .debug-line {\n      position: absolute;\n      outline: 1px solid red;\n      pointer-events: none;\n      z-index: 4,\n      text-align: right;\n      font-family: monospace;\n      font-size: small;\n      vertical-align: baseline;\n      color: red;\n    }\n\n    .debug-char {\n      position: absolute;\n      outline: 1px solid orange;\n      pointer-events: none;\n      z-index: 3\n    }\n\n  ",
b.document)};ff.extractHTMLFromTextMorph=eH;ff.obj=Pf;ff.arr=vf;ff.num=Bk;ff.pt=oh;ff.Rectangle=ee;ff.vdom=oD;ff.defaultAttributes=Av;ff.defaultStyle=Zt;ff.addOrChangeCSSDeclaration=ne;ff.hyperscriptFnForDocument=SH;ff.objectReplacementChar="\ufffd";ff.config=wk;ff.getSvgVertices=Yt;var rJ=ff.vdom;ff.h=rJ.h;ff.create=rJ.create;ff.patch=rJ.patch;ff.diff=rJ.diff;ff.cssInstalled=!1;ff.debug=!!ff.config.onloadURLQuery["debug-text"];ff.nextTick=function(b,e,m,a,g,l){for(;!g&&m<e.length;)g=b[e[m++]+"equestAnimationFrame"];
return g&&g.bind(b)||b.setImmediate||function(q){b.setTimeout(q,0)}}("undefined"!==typeof window?window:global,["r","webkitR","mozR","msR","oR"],0);(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),m=e.hasOwnProperty("AfterTextRenderHook")&&"function"===typeof e.AfterTextRenderHook?e.AfterTextRenderHook:e.AfterTextRenderHook=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,
b,[{key:"reset",value:function(a){this.morph=a;this.needsRerender=this.called=!1}},{key:"updateLineHeightOfNode",value:function(a,g,l){if(0===g.height||g.hasEstimatedExtent){var q=a.getGlobalTransform().inverse();q.e=q.f=0;var r=1!=q.getScale()||0!=q.getRotation();r&&(l.style.transform=q.toString());var u=l.getBoundingClientRect();q=u.height;u=u.width;r&&(l.style.transform="");q&&u&&(g.height!==q||g.width!==u)&&a.fontMetric.isFontSupported(a.fontFamily,a.fontWeight)&&(g.changeExtent(u,q,!1),a.textLayout.resetLineCharBoundsCacheOfLine(g),
this.needsRerender=!0,a.viewState._needsFit=!0);if(g.textAndAttributes&&g.textAndAttributes.length)for(u=r=0;r<g.textAndAttributes.length;r+=2)(l=g.textAndAttributes[r])&&l.isMorph?(a._positioningSubmorph=l,l.position=a.textLayout.pixelPositionFor(a,{row:g.row,column:u}).subPt(a.origin),l._dirty=!1,a._positioningSubmorph=null,u++):l&&(u+=l.length);return q}return g.height}},{key:"updateExtentsOfLines",value:function(a){var g=this.morph,l=g.viewState,q=g.fontMetric;l.dom_nodes=[];l.dom_nodeFirstRow=
0;l.textWidth=a.scrollWidth;a=a.children;for(var r=0,u;r<a.length&&"line"!=a[r].className;)r++;if(r<a.length){u=a[r];var v=u.dataset;v=Number(v?v.row:u.getAttribute("data-row"));if("number"===typeof v&&!isNaN(v)){l.dom_nodeFirstRow=v;u=0;v=g.document.getLine(v);for(var y;r<a.length;r++){var z=a[r];l.dom_nodes.push(z);v&&(y||(y=v.hasEstimatedExtent),v.hasEstimatedExtent=y,u+=this.updateLineHeightOfNode(g,v,z),v.hasEstimatedExtent=!q.isFontSupported(g.fontFamily,g.fontWeight),v=v.nextLine())}this.needsRerender?
(g.fitIfNeeded(),g.makeDirty()):g._dirty=!!g.submorphs.find(function(A){return A.needsRerender()})}}}},{key:"hook",value:function(a,g,l){a&&a.parentNode&&(g=this.morph.viewState,g.text_layer_node=a,g.fontmetric_text_layer_node=null,this.called=!0,this.updateExtentsOfLines(a))}}],[{key:"className",get:function(){return"AfterTextRenderHook"}}],e,{pathInPackage:function(){return"text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4953,end:9059})})(void 0);var I4=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),m=e.hasOwnProperty("TextRenderer")&&"function"===typeof e.TextRenderer?e.TextRenderer:e.TextRenderer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a?
ff.cssInstalled||ff.installCSS(a):console.warn("Text renderer initialized without domEnv. Depending on what you want to do you might have bad luck...!");this.domEnv=a}},{key:"directRenderLineFn",value:function(a){var g=this,l=a.viewState._renderLineFn;if(!l){var q=ff.hyperscriptFnForDocument(this.domEnv.document);l=a.viewState._renderLineFn=function(r){return g.renderLine(q,null,a,r)}}return l}},{key:"directRenderTextLayerFn",value:function(a){var g=this,l=a.viewState._renderTextLayerFn;if(!l){var q=
ff.hyperscriptFnForDocument(this.domEnv.document);l=a.viewState._renderTextLayerFn=function(r){return g.renderJustTextLayerNode(q,a,r,[])}}return l}},{key:"renderMorph",value:function(a,g){var l=[],q=a.selection;if(a.inMultiSelectMode()){q=q.selections;for(var r=0;r<q.length-1;r++)l.push.apply(l,$jscomp.arrayFromIterable(this.renderSelectionLayer(a,q[r],!0,2)));l.push.apply(l,$jscomp.arrayFromIterable(this.renderSelectionLayer(a,q[r],!1,4)))}else l=this.renderSelectionLayer(a,q,!1,1);q=this.renderTextLayer(a,
g);r=this.renderJustTextLayerNode(ff.h,a,null,[]);var u=this.renderMarkerLayer(a,g),v=a.document.width>a.width?a.scrollbarOffset:ff.pt(0,0);v=ff.h("div",{className:"scrollLayer",style:Object.assign({position:"absolute",top:"0px"},a.viewState.fastScroll?{overflow:a.scrollActive?a.clipMode:"hidden"}:{},{width:a.width+"px",height:a.height+"px"})},[ff.h("div",{style:{width:Math.max(a.document.width,a.width)+"px",height:Math.max(a.document.height,a.height)-v.y+"px"}})]);q.properties.className+=" actual";
q.properties.style.overflow="visible"===a.clipMode?"visible":"hidden";r.properties.className+=" font-measure";var y=a.embeddedMorphMap,z=y?a.submorphs.filter(function(A){return!y.has(A)}):a.submorphs;l=[].concat($jscomp.arrayFromIterable(l),[u,r,q,g.renderSelectedSubmorphs(a,z)]);return ff.h("div",Object.assign({},ff.defaultAttributes(a,g),{style:Object.assign({},ff.defaultStyle(a),{},a.viewState.fastScroll?{overflow:"visible"==a.clipMode?"visible":"hidden"}:{},{"-moz-user-select":"none",cursor:"auto"===
a.nativeCursor?a.readOnly?"default":"text":a.nativeCursor})}),[v].concat($jscomp.arrayFromIterable(a.viewState.fastScroll?[ff.h("div",{className:"scrollWrapper",style:{"pointer-events":"none",position:"absolute",width:"100%",height:"100%",transform:"translate(-"+a.scroll.x+"px, -"+a.scroll.y+"px)"}},l)]:l)))}},{key:"renderTextLayer",value:function(a,g){var l=this,q=a.debug?[].concat($jscomp.arrayFromIterable(this.renderDebugLayer(a)),$jscomp.arrayFromIterable(this.renderLines(ff.h,g,a))):this.renderLines(ff.h,
g,a);q=this.renderJustTextLayerNode(ff.h,a,null,q);q.properties.style.position="absolute";var r=a.viewState.afterTextRenderHook||(a.viewState.afterTextRenderHook=new ff.AfterTextRenderHook);r.reset(a);q.properties["after-text-render-hook"]=r;ff.nextTick(function(){l.manuallyTriggerTextRenderHook(a,g)});return q}},{key:"manuallyTriggerTextRenderHook",value:function(a,g){var l=a.viewState.afterTextRenderHook;l&&!l.called&&((g=(g=g.getNodeForMorph(a))&&g.querySelector(".actual.newtext-text-layer"))&&
l.hook(g),a.ownerChain().every(function(q){return q.visible})&&a.fit())}},{key:"renderJustTextLayerNode",value:function(a,g,l,q){var r=g.padding,u=r.x,v=r.y,y=g.fixedWidth,z=g.fixedHeight,A=g.backgroundColor,B=g.fontColor,G=g.textAlign,E=g.fontSize,K=g.textDecoration,J=g.fontStyle,P=g.fontWeight,ea=g.fontFamily,ra=g.lineHeight,D=g.wordSpacing,O=g.letterSpacing,L=g.tabWidth,N=u+r.width;r=v+r.height;var aa=Math.max(g.document.height,g.height),Y="newtext-text-layer";switch(g.lineWrapping){case !0:case "by-words":Y+=
" wrap-by-words";break;case "only-by-words":Y+=" only-wrap-by-words";break;case "by-chars":Y+=" wrap-by-chars";break;case !1:Y+=" no-wrapping"}y||(Y+=" auto-width");z||(Y+=" auto-height");g={height:aa+"px"};0<u&&(g.paddingLeft=u+"px");0<N&&(g.paddingRight=N+"px");0<v&&(g.paddingTop=v+"px");0<r&&(g.paddingBottom=r+"px");O&&(g.letterSpacing=O);D&&(g.wordSpacing=D);ra&&(g.lineHeight=ra);ea&&(g.fontFamily=ea);P&&(g.fontWeight=P);J&&(g.fontStyle=J);K&&(g.textDecoration=K);E&&(g.fontSize=E+"px");G&&(g.textAlign=
G);B&&(g.color=String(B));A&&(g.backgroundColor=A);8!==L&&(g.tabSize=L);u={className:Y,style:g};g.overflow="hidden";l&&(v=l.clipMode,A=l.height,l=l.width,"number"===typeof l&&(g.width=l+"px"),"number"===typeof A&&(g.height=A+"px"),v&&(g.overflow=v));return a("div",u,q)}},{key:"renderLines",value:function(a,g,l){var q=l.height,r=l.scroll,u=l.padding.y,v=l.document,y=l.clipMode;g.getNodeForMorph(l);r=r.y;var z=v.rowCount-1,A=v.height,B="visible"!==y,G=v.findLineByVerticalOffset(B?Math.max(0,B?r-u:0):
0)||{row:0,y:0,offset:0,line:v.getLine(0)},E=G.line,K=G.offset;y=G.y;G=G.row;u=v.findLineByVerticalOffset(B?Math.min(A,r-u+q):A)||{row:z,offset:0,y:0,line:v.getLine(z)};v=u.line;var J=u.offset,P=u.row;u=B?G:0;K=0===K?G:G+1;z=B?P+1:z;B=v&&J!==v.height?P-1:P;this.maxVisibleLines=Math.max(this.maxVisibleLines||1,z-u+1);G=[];v=[];v.push(a("div.newtext-before-filler",{key:"filler",style:{height:y+"px"}}));for(J=0;J<this.maxVisibleLines&&(G.push(E),P=this.renderLine(a,g,l,E),v.push(P),P.key=E.row%this.maxVisibleLines,
J++,E=E.nextLine(),E););Object.assign(l.viewState,{scrollTop:r,scrollHeight:q,scrollBottom:r+q,heightBefore:y,textHeight:A,firstVisibleRow:u,lastVisibleRow:z,firstFullyVisibleRow:K,lastFullyVisibleRow:B,visibleLines:G});l.debug&&ff.printViewState(l);return v}},{key:"renderLine",value:function(a,g,l,q){var r=q.textAndAttributes,u=[],v=r.length,y=l.fontSize;if(0<v)for(var z=0;z<v;z+=2){var A=r[z]||"\u00a0";var B=r[z+1];if("string"!==typeof A)u.push(A.isMorph?this.renderEmbeddedSubmorph(a,g,A,B):ff.objectReplacementChar);
else if(B){var G=B.fontSize&&(ff.obj.isString(B.fontSize)?B.fontSize:B.fontSize+"px");var E=B.fontFamily;var K=B.fontWeight;var J=B.fontStyle;var P=B.textDecoration;var ea=B.fontColor;var ra=B.backgroundColor;var D=B.nativeCursor;var O=B.textStyleClasses;var L=B.link;var N=B.lineHeight||N;var aa=B.textAlign||aa;var Y=B.wordSpacing||Y;var ma=B.letterSpacing||ma;var bb=B.paddingRight;var Qa=B.paddingLeft;var X=B.paddingTop;var V=B.paddingBottom;var ha=B.verticalAlign;var xa=B.textStroke;var yb=B.quote||
yb;var ec="span";var Nb={};var ac={style:Nb};G&&B.fontSize<y&&(y=B.fontSize);L&&(ec="a",(ac.href=L)&&L.startsWith("http")&&(ac.target="_blank"));if(L||D)Nb.pointerEvents="auto";G&&(Nb.fontSize=G);E&&(Nb.fontFamily=E);K&&(Nb.fontWeight=K);J&&(Nb.fontStyle=J);P&&(Nb.textDecoration=P);ea&&(Nb.color=String(ea));ra&&(Nb.backgroundColor=String(ra));D&&(Nb.cursor=D);bb&&(Nb.paddingRight=bb);Qa&&(Nb.paddingLeft=Qa);X&&(Nb.paddingTop=X);V&&(Nb.paddingBottom=V);ha&&(Nb.verticalAlign=ha);xa&&(Nb["-webkit-text-stroke"]=
xa);B.doit&&(Nb.pointerEvents="auto",Nb.cursor="pointer");O&&O.length&&(ac.className=O.join(" "));u.push(a(ec,ac,A))}else u.push(A)}else u.push(a("br"));g={};l.fontSize>y&&(g.fontSize=y+"px");N&&(g.lineHeight=N);aa&&(g.textAlign=aa);ma&&(g.letterSpacing=ma);Y&&(g.wordSpacing=Y);l=a("div",{className:"line",style:g,dataset:{row:q.row}},u);if(yb)for("number"!==typeof yb&&(yb=1);yb--;)l=a("blockquote",{},l);return l}},{key:"renderEmbeddedSubmorph",value:function(a,g,l,q){q=q||{};if(g)return a=g.render(l),
a.properties.style.position="relative",a.properties.style.transform="",a.properties.style.textAlign="initial",q.paddingTop&&(a.properties.style.marginTop=q.paddingTop),q.paddingLeft&&(a.properties.style.marginLeft=q.paddingLeft),q.paddingRight&&(a.properties.style.marginRight=q.paddingRight),q.paddingBottom&&(a.properties.style.marginBottom=q.paddingBottom),a;g=l.extent;q=g.x+"px";g=g.y+"px";return a("div",{className:l.styleClasses.join(" "),style:{width:q,height:g}},[])}},{key:"renderSelectionLayer",
value:function(a,g,l,q){l=void 0===l?!1:l;q=void 0===q?2:q;if(!g)return[];var r=a.textLayout,u=g.start,v=g.end,y=g.cursorVisible,z=g.selectionColor,A=a.document,B=a.cursorColor,G=g.isReverse();u=r.boundsFor(a,u);var E=r.computeMaxBoundsForLineSelection(a,g),K=r.boundsFor(a,v);ff.pt(u.x,E.y);E=ff.pt(K.x,K.y);v=u.height;K=K.height;u=G?ff.pt(u.x,u.y):E;l=this.cursor(u,G?v:K,y,l,q,B);if(g.isEmpty())return[l];q=[];y=g.start.row;B=A.computeVerticalOffsetOf(y)+a.padding.top();G=a.padding.left();for(var J,
P,ea;y<=g.end.row;){v=A.getLine(y);if(!(y<a.viewState.firstVisibleRow-50)){if(y>a.viewState.lastVisibleRow+50)break;u=r.charBoundsOfRow(a,y).map(ff.Rectangle.fromLiteral);K=y==g.start.row;if(ea=u[0].bottom()<ff.arr.last(u).top()){E=r.rangesOfWrappedLine(a,y).map(function(L){return L.intersect(g)});P=K;var ra=0,D=J=void 0,O=$jscomp.makeIterator(E);for(E=O.next();!E.done;E=O.next())E=E.value,E.isEmpty()||(J=u.slice(E.start.column,E.end.column),ra=P?ff.arr.min(J.map(function(L){return L.top()})):ra,
D=ff.arr.max(J.map(function(L){return L.bottom()})),P=J[0],E=ff.pt(G+P.left(),B+ra),P=ff.arr.last(J),J=ff.pt(G+P.right(),B+D),ra=D,P=!1,q.push(ff.Rectangle.fromAny(E,J)))}ea||(ea=y==g.end.row,E=K?g.start.column:0,ra=ea?g.end.column:u.length-1,K=K&&ff.arr.min(u.slice(E,ra+1).map(function(L){return L.top()}))||0,O=E>=ra?5:0,P=u[E],E=ff.pt(G+(P?P.left():ff.arr.last(u).right()),B+K),P=u[ra],g.includingLineEnd?J=ff.pt(a.width-a.padding.right(),B+K+v.height):(ea=ea&&g.end.column<=u.length-1,J=ff.pt(G+(P?
ea?P.left():P.right():ff.arr.last(u).right())+O,B+K+v.height)),q.push(ff.Rectangle.fromAny(E,J)))}B+=v.height;y++}a=this.selectionLayerRounded(q,z,a);a.push(l);return a}},{key:"selectionLayerRounded",value:function(a,g,l){var q=[l={left:[],right:[]}];a=$jscomp.makeIterator(a);for(var r=a.next();!r.done;r=a.next()){r=r.value;u&&(u.left()>r.right()||u.right()<r.left())&&q.push(l={left:[],right:[]});l.left.push(r.topLeft(),r.bottomLeft());l.right.push(r.topRight(),r.bottomRight());var u=r}u=[];l={};
q=$jscomp.makeIterator(q);for(a=q.next();!a.done;l={$jscomp$loop$prop$pos$2249:l.$jscomp$loop$prop$pos$2249},a=q.next())if(a=a.value,a.left.length){l.$jscomp$loop$prop$pos$2249=a.left.reduce(function(G,E){return G.minPt(E)});r=a.left.concat(a.right.reverse());a=[];for(var v=0;v<r.length;v++){var y=r[v-1]||ff.arr.last(r),z=r[v],A=r[v+1]||ff.arr.first(r),B=y.subPt(z).normalized().scaleBy(6);y=z.addPt(B);y._next=B.scaleBy(-1);A=A.subPt(z).normalized().scaleBy(6);z=z.addPt(A);z._prev=A.scaleBy(-1);a.push(y,
z)}a=a.map(function(G){return function(E){return{position:E.subPt(G.$jscomp$loop$prop$pos$2249),isSmooth:!0,controlPoints:{next:E._next||ff.pt(0),previous:E._prev||ff.pt(0)}}}}(l));r=ff.getSvgVertices(a);z=a.map(function(G){return G.position}).reduce(function(G,E){return G.minPt(E)});v=z.y;z=z.x;a=a.map(function(G){return G.position}).reduce(function(G,E){return G.maxPt(E)});u.push(ff.h("svg",{namespace:"http://www.w3.org/2000/svg",version:"1.1",style:{position:"absolute",left:l.$jscomp$loop$prop$pos$2249.x+
"px",top:l.$jscomp$loop$prop$pos$2249.y+"px",width:a.x-z,height:a.y-v}},ff.h("path",{namespace:"http://www.w3.org/2000/svg",attributes:{d:r,fill:g.toString()}})))}return u}},{key:"cursor",value:function(a,g,l,q,r,u){return ff.h("div",{className:"newtext-cursor"+(q?" diminished":""),style:{left:a.x-Math.ceil(r/2)+"px",top:a.y+"px",width:r+"px",height:g+"px",display:l?"":"none",background:u||"black"}})}},{key:"renderMarkerLayer",value:function(a){var g=a.markers,l=a.textLayout,q=a.viewState,r=q.firstVisibleRow;
q=q.lastVisibleRow;var u=[];if(!g)return u;g=$jscomp.makeIterator(g);for(var v=g.next();!v.done;v=g.next()){var y=v.value;v=y.style;y=y.range;var z=y.start;y=y.end;if(!(y.row<r||z.row>q))if(z.row===y.row)u.push(this.renderMarkerPart(l,a,z,y,v));else{u.push(this.renderMarkerPart(l,a,z,a.lineRange(z.row).end,v));for(z=z.row+1;z<=y.row-1;z++){var A=a.lineRange(z);u.push(this.renderMarkerPart(l,a,A.start,A.end,v,!0))}u.push(this.renderMarkerPart(l,a,{row:y.row,column:0},y,v))}}return u}},{key:"renderMarkerPart",
value:function(a,g,l,q,r,u){u=void 0===u?!1:u;var v=g.document;var y=v.getLine(l.row);u?(a=g.padding,u=a.left(),l=a.top()+v.computeVerticalOffsetOf(l.row),a=u+y.width,y=y.height):(y=a.boundsFor(g,l),u=y.x,l=y.y,y=a.boundsFor(g,q),a=y.x,y=y.height);y=Math.ceil(y);return ff.h("div.newtext-marker-layer",{style:Object.assign({},r,{left:u+"px",top:l+"px",height:y+"px",width:a-u+"px"})})}},{key:"renderDebugLayer",value:function(a){var g=[],l=a.viewState,q=l.heightBefore,r=l.firstVisibleRow,u=l.lastVisibleRow;
l=l.visibleLines;var v=a.padding,y=a.scroll,z=y.x,A=y.y;y=v.left();var B=v.right(),G=v.top();v.bottom();g.push(ff.h("div.debug-info",{style:{left:z+y+"px",top:A+"px",width:a.width-B+"px"}},ff.h("span","visible rows: "+r+" - "+u)));for(v=0;r<u;v++,r++){var E=l[v];A=a.textLayout.lineCharBoundsCache.get(E);E=E.height;g.push(ff.h("div.debug-line",{style:{left:z+y+"px",top:G+q+"px",width:a.width-B+"px",height:E+"px"}},ff.h("span",String(r))));if(A)for(var K=0;K<A.length;K++){var J=A[K];g.push(ff.h("div.debug-char",
{style:{left:y+J.x+"px",top:G+q+J.y+"px",width:J.width+"px",height:J.height+"px"}}))}q+=E}return g}}],[{key:"className",get:function(){return"TextRenderer"}}],e,{pathInPackage:function(){return"text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9076,end:36350})}(void 0),Pka=I4=ff.TextRenderer;ff.extractHTMLFromTextMorph=
eH;ff.extractHTMLFromTextMorph=eH;ff.default=I4;var Vo=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js");Vo.arr=vf;Vo.eqPosition=Hs;Vo.KeyHandler=OO;Vo.commands={activate:{name:"[IyGotoChar] activate",exec:function(b,e){e=void 0===e?{backwards:!1}:e;Vo.IyGotoCharKeyHandler.installInto(b,e.backwards);return!0}},moveTo:{name:"[IyGotoChar] move to",exec:function(b,e){b.saveMark();var m=b.selection,a=m.lead,g=a.row,l=a.column;a=!!b.activeMark||!m.isEmpty();var q={row:g,column:l-
1};b=b.document[e.backwards?"scanBackward":"scanForward"](q,function(r,u){return r!==e.needle||Vo.eqPosition(q,u)?null:u});if(!b)return!0;b.column++;m.lead=b;a||(m.anchor=b);return!0},multiSelectAction:"forEach",readOnly:!0}};var sJ=Vo.commands.activate;Vo.activate=sJ;Vo.activate=sJ;Vo.activate=sJ;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js"),m=e.hasOwnProperty("IyGotoCharKeyHandler")&&"function"===typeof e.IyGotoCharKeyHandler?e.IyGotoCharKeyHandler:
e.IyGotoCharKeyHandler=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?!1:a;Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.charToFind=void 0;this.backwards=a}},{key:"isIyGoToChar",get:function(){return!0}},{key:"uninstallFrom",value:function(a){a._cachedKeyhandlers=null;
Vo.arr.remove(a._keyhandlers||[],this)}},{key:"eventCommandLookup",value:function(a,g){var l=g.keyCombo,q=l.startsWith("input-");if(g.onlyModifiers||l.startsWith("Shift-")||!q&&!g.isModified&&!g.isFunctionKey)return{command:"null",passEvent:!0};g=q&&l.slice(6);if(!this.charToFind)if(q)this.charToFind=g;else return this.uninstallFrom(a),null;return g!==this.charToFind?(this.uninstallFrom(a),null):{command:Vo.commands.moveTo,args:{backwards:this.backwards,needle:g}}}}],[{key:"className",get:function(){return"IyGotoCharKeyHandler"}},
{key:"installInto",value:function(a,g){g=void 0===g?!1:g;a.keyhandlers.filter(function(l){return l.isIyGoToChar}).forEach(function(l){return l.uninstallFrom(a)});a._cachedKeyhandlers=null;a._keyhandlers=(a._keyhandlers||[]).concat(new this(g))}}],e,{pathInPackage:function(){return"text/iy-goto-char.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:1049,end:3032})})(Vo.KeyHandler);var Ih=lively.FreezerRuntime.recorderFor("lively.morphic/text/commands.js");Ih.chain=Yf;Ih.arr=vf;Ih.string=vh;Ih.date=Jr;Ih.pt=oh;Ih.Range=Gw;Ih.eqPosition=Hs;Ih.commands=[{name:"clipboard copy",doc:"placeholder for native copy",scrollCursorIntoView:!1,exec:function(b){b.selection.isEmpty()&&b.selectLine(b.cursorPosition.row);return!0}},{name:"manual clipboard copy",doc:"attempts to copy selection via browser interface",scrollCursorIntoView:!1,multiSelectAction:"single",
exec:function(b,e){e=void 0===e?{collapseSelection:!0,delete:!1,dontTryNativeClipboard:!1}:e;var m=b.selection,a=m.text,g=e.hasOwnProperty("collapseSelection")?e.collapseSelection:!0;b.saveMark(m.anchor);b.activeMark=null;(m.isMultiSelection?m.selections.slice():[m]).forEach(function(l){var q=l.isEmpty()?b.lineRange():l.range,r=b.textInRange(q);b.env.eventDispatcher.killRing.add(r);e["delete"]?b.deleteText(q):!l.isEmpty()&&g&&l.collapse(l.lead)});e.dontTryNativeClipboard||b.env.eventDispatcher.doCopy(a);
return!0}},{name:"clipboard cut",doc:"placeholder for native cut",exec:function(b){b.selection.isEmpty()&&b.selectLine(b.cursorPosition.row,!0);return!0}},{name:"clipboard paste",doc:"placeholder for native paste",exec:function(){return!0}},{name:"manual clipboard paste",doc:"attempts to paste from the clipboard to lively \u2013 currently requires browser extension!",multiSelectAction:"single",exec:function(b,e){e=void 0===e?{killRingCycleBack:!1}:e;var m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){a=
b.env.eventDispatcher.killRing;e.killRingCycleBack&&(Ih.arr.last(Ih.arr.pluck(b.commandHandler.history,"name"))||"").includes("clipboard paste")&&(m=a.back());!m&&a.isCycling()&&(m=a.yank());m||(m=a.yank());b.selection.isMultiSelection?(b.undoManager.group(),b.selection.selections.slice(0,-1).reverse().map(function(l,q){q=a.pointer-1-q;0>q&&(q=a.buffer.length-1);return{selection:l,pasted:a.buffer[q]||""}}).concat({selection:b.selection.defaultSelection,pasted:m}).forEach(function(l){return l.selection.text=
l.pasted}),b.undoManager.group()):m&&(b.undoManager.group(),b.selection.text=m,b.undoManager.group());return g.return(!0)})}},{name:"browse clipboard",exec:function(b){var e,m,a,g,l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return e=b.env.eventDispatcher.killRing,m=e.pointer,a=e.buffer,g=a.map(function(u){return{isListItem:!0,string:Ih.string.truncate(u,80).replace(/\n/g,""),value:u}}),r.yield(b.world().filterableListPrompt("select items to paste",g,{preselect:m,
multiSelect:!0}),2);l=r.yieldResult;q=l.selected;q.length&&(b.undoManager.group(),b.insertTextAndSelect(q.join("\n")),b.undoManager.group());return r.return(!0)})}},{name:"text undo",doc:"undo text changes",multiSelectAction:"single",exec:function(b){b.textUndo();return!0}},{name:"text redo",doc:"redo text changes",multiSelectAction:"single",exec:function(b){b.textRedo();return!0}},{name:"select all",doc:"Selects entire text contents.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){b.saveMark();
b.selectAll();return!0}},{name:"delete backwards",doc:"Delete the character in front of the cursor or the selection.",exec:function(b){if(b.rejectsInput())return!1;if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_newline&&b.editorPlugin.cmd_delete_backwards())return!0;var e=b.selection;e.isEmpty()&&e.growLeft(1);e.text="";e.collapse();b.activeMark&&(b.activeMark=null);return!0}},{name:"delete",doc:"Delete the character following the cursor or the selection.",exec:function(b){var e=b.selection;
if(b.rejectsInput())return!1;e.isEmpty()&&e.growRight(1);e.text="";e.collapse();b.activeMark&&(b.activeMark=null);return!0}},{name:"indent",scrollCursorIntoView:!1,exec:function(b){b.undoManager.group();b.withSelectedLinesDo(function(e,m){return b.insertText(b.tab,m.start)});b.undoManager.group();return!0}},{name:"outdent",scrollCursorIntoView:!1,exec:function(b){b.undoManager.group();b.withSelectedLinesDo(function(e,m){return e.startsWith(b.tab)&&b.deleteText({start:m.start,end:{row:m.start.row,
column:b.tab.length}})});b.undoManager.group();return!0}},{name:"indent according to mode",exec:function(b,e){e=void 0===e?{}:e;var m,a,g,l,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){m=b.editorPlugin&&b.editorPlugin.mode;if(!m)return y.return(!0);l=e.hasOwnProperty("undo")?e.undo:!0;e.hasOwnProperty("firstRow")&&e.hasOwnProperty("lastRow")?(q=e,a=q.firstRow,g=q.lastRow):b.selection.isEmpty()?a=g=b.cursorPosition.row:(r=b.selection.selectedRows,a=r.first,
g=r.last);return y.yield(System.import("lively.ide/editor-modes.js"),2)}u=y.yieldResult;v=u.indentLines;l&&b.undoManager.group();v(b,m,a,g,"smart",!0,e);l&&b.undoManager.group();return y.return(!0)})}},{name:"tab - snippet expand or indent",scrollCursorIntoView:!0,exec:function(b){var e=b.snippets.find(function(m){return m.canExpand(b)});return e?(e.expandAtCursor(b),!0):b.selection.isEmpty()?b.execCommand("insertstring",{string:b.tab}):b.execCommand("indent according to mode")}},{name:"browse snippets",
scrollCursorIntoView:!0,exec:function(b){var e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return e=b.snippets.map(function(q){return{isListItem:!0,string:q.trigger+" - "+q.expansion,value:q}}),l.yield(b.world().filterableListPrompt("select snippet",e,{requester:b}),2);m=l.yieldResult;a=$jscomp.makeIterator(m.selected);(g=a.next().value)&&g.expandAtCursor(b);return l.return(!0)})}},{name:"transpose chars",exec:function(b){if(b.selection.isEmpty()){var e=
b.cursorPosition,m=e.row,a=e.column;e=Ih.Range.create(m,a-1,m,a+1);var g=b.getLine(m);m=g[a-1];a=g[a];m&&a&&b.replace(e,a+m,!0)}return!0}},{name:"cycle selection contents",documentation:"If there are multiple selections, will take the text of the first one and replace the second one with it, the text of the second will replace the third, the last selection contents will replace the contents of the first.",multiSelectAction:"single",exec:function(b){var e=b.selection.selections;b.undoManager.group();
e.reduce(function(m,a){var g=a.text;a.text=m;return g},Ih.arr.last(e).text);b.undoManager.group();return!0}},{name:"go left",doc:"Move the cursor 1 character left. At the beginning of a line move the cursor up. If a selection is active, collapse the selection left.",exec:function(b){b.activeMark?b.selection.selectLeft(1):b.selection.goLeft(1);return!0}},{name:"go right",doc:"Move the cursor 1 character right. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",
exec:function(b){b.activeMark?b.selection.selectRight(1):b.selection.goRight(1);return!0}},{name:"go up",doc:"Move the cursor 1 line. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",scrollCursorIntoView:!0,exec:function(b){b.activeMark?b.selection.selectUp(1):b.selection.goUp(1,!0);return!0}},{name:"go down",exec:function(b){b.activeMark?b.selection.selectDown(1):b.selection.goDown(1,!0);return!0}},{name:"select left",exec:function(b){b.selection.selectLeft(1);
return!0}},{name:"select right",exec:function(b){b.selection.selectRight(1);return!0}},{name:"select up",exec:function(b){b.selection.selectUp(1,!0);return!0}},{name:"select down",exec:function(b){b.selection.selectDown(1,!0);return!0}},{name:"select line",exec:function(b){var e=b.selection,m=e.lead.row,a=b.lineRange(m,!1);e.range=e.range.equals(a)?b.lineRange(m,!0):a;return!0}},{name:"goto line start",exec:function(b,e){e=void 0===e?{select:!1}:e;e=e.select||!!b.activeMark;var m=b.selection,a=m.lead;
b=b.screenLineRange(a,!0);m.lead=Ih.eqPosition(a,b.start)?{column:0,row:a.row}:b.start;!e&&(m.anchor=m.lead);return!0}},{name:"goto line end",exec:function(b,e){e=void 0===e?{select:!1}:e;e=e.select||!!b.activeMark;var m=b.selection;b=b.screenLineRange(m.lead,!0);m.lead=b.end;!e&&(m.anchor=m.lead);return!0}},{name:"goto page up",exec:function(b){b.pageUpOrDown({direction:"up",select:!!b.activeMark});return!0}},{name:"goto page down",exec:function(b){b.pageUpOrDown({direction:"down",select:!!b.activeMark});
return!0}},{name:"goto page up and select",exec:function(b){b.pageUpOrDown({direction:"up",select:!0});return!0}},{name:"goto page down and select",exec:function(b){b.pageUpOrDown({direction:"down",select:!0});return!0}},{name:"goto start",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;b.gotoDocumentStart(Object.assign({},e));return!0}},{name:"goto end",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;b.gotoDocumentEnd(Object.assign({},e));return!0}},{name:"goto paragraph above",
exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;var m=b.paragraphRangeAbove(b.cursorPosition.row);m.start.row--;b.selection.lead=m.start;e.select||b.collapseSelection();return!0}},{name:"goto paragraph below",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;var m=b.paragraphRangeBelow(b.cursorPosition.row);m.end.row++;b.selection.lead=m.end;e.select||b.collapseSelection();return!0}},{name:"move cursor to screen bottom in 1/3 steps",readOnly:!0,exec:function(b){var e=!!b.activeMark,
m=b.cursorPosition,a=b.textLayout.firstFullVisibleLine(b),g=b.textLayout.lastFullVisibleLine(b),l=a+Math.floor((g-a)/2);if(m.row<a)m.row=a;else if(m.row<l)m.row=l;else if(m.row<g)m.row=g;else return!0;b.selection.lead=m;e||(b.selection.anchor=b.selection.lead);return!0}},{name:"move cursor to screen top in 1/3 steps",readOnly:!0,exec:function(b){var e=!!b.activeMark,m=b.cursorPosition,a=b.textLayout.firstFullVisibleLine(b),g=b.textLayout.lastFullVisibleLine(b),l=a+Math.floor((g-a)/2);if(m.row<=a)return!0;
m.row=m.row<=l?a:m.row<=g?l:g;b.selection.lead=m;e||(b.selection.anchor=b.selection.lead);return!0}},{name:"goto line",exec:function(b){var e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return e=!!b.activeMark,m=Number,g.yield(b.world().prompt("Enter line number"),2);a=m(g.yieldResult);isNaN(a)||(e?b.selection.lead={row:a,column:0}:b.cursorPosition={row:a,column:0},b.scrollCursorIntoView(),b.focus());return g.return(!0)})}},{name:"join line",exec:function(b,
e){e=void 0===e?{withLine:"before"}:e;var m=b.selection,a=m.start,g=m.end;m=m.lead;if(!b.selection.isEmpty()){if(a.row===g.row)return!0;e=b.undoManager.ensureNewGroup(b,"join line");g=Ih.arr.range(0,g.row-1-a.row).map(function(l){return b.joinLine(a.row)});b.undoManager.group(e);b.selection.isMultiSelection&&(b.cursorPosition=g[0],g.slice(1).forEach(function(l){return b.selection.addRange({start:l,end:l})}));return!0}g=m.row;if("before"===e.withLine&&0>=g||"after"===e.withLine&&g>=b.document.endPosition.row)return!0;
b.undoManager.group();b.cursorPosition=b.joinLine("before"===e.withLine?g-1:g);b.undoManager.group();return!0}},{name:"split line",exec:function(b){var e=b.cursorPosition,m=b.getLine(e.row).match(/^\s*/)[0].length;b.insertText("\n"+" ".repeat(m),e);b.cursorPosition=e;return!0}},{name:"insert line",exec:function(b,e){e=void 0===e?{where:"above"}:e;var m=b.cursorPosition.row,a=b.getLine(m).match(/^\s*/)[0].length;"below"===e.where&&m++;b.insertText(" ".repeat(a)+"\n",{column:0,row:m});b.cursorPosition=
{column:a,row:m};return!0}},{name:"duplicate line or selection",exec:function(b){b.undoManager.group();var e=b.selection.end;if(b.selection.isEmpty())b.insertText(b.getLine(e.row)+"\n",{column:0,row:e.row+1});else{var m=b.selection.range;b.insertText(b.selection.text,e);b.selection=m}b.undoManager.group();return!0}},{name:"delete emtpy line or until end of line",exec:function(b){var e=b.cursorPosition,m=b.getLine(e.row);if(Ih.eqPosition(b.document.endPosition,e))return!0;e=m.trim()?{start:e,end:{row:e.row,
column:m.length}}:{start:{row:e.row,column:0},end:{row:e.row+1,column:0}};b.env.eventDispatcher.doCopy(b.textInRange(e));b.undoManager.group();b.deleteText(e);b.undoManager.group();return!0}},{name:"delete left until beginning of line",exec:function(b){b.activeMark&&(b.activeMark=null);if(!b.selection.isEmpty())return b.selection.text="",!0;var e=b.lineRange(),m=b.cursorPosition;if(Ih.eqPosition({row:m.row,column:0},m))return!0;e={start:Ih.eqPosition(e.start,m)?{row:m.row,column:0}:e.start,end:m};
b.deleteText(e);return!0}},{name:"move lines up",multiSelectAction:"single",exec:function(b){var e=b.selection;if(b.inMultiSelectMode()){var m=e.selections.map(function(l){return l.range});m.slice().sort(Ih.Range.compare).forEach(function(l){b.selection=l;b.execCommand("move lines up")});m.forEach(function(l){l.start.row--;l.end.row--});b.selection.ranges=m;return!0}e.isEmpty()||0!==e.end.column||e.growRight(-1);m=e.start;e=e.end;var a=b.getLine(m.row-1),g=b.undoManager.ensureNewGroup(b);b.insertText(a+
"\n",{row:e.row+1,column:0});b.deleteText({start:{row:m.row-1,column:0},end:{row:m.row,column:0}});b.undoManager.group(g);return!0}},{name:"move lines down",multiSelectAction:"single",exec:function(b){var e=b.selection;if(b.inMultiSelectMode()){var m=e.selections.map(function(l){return l.range});m.slice().sort(Ih.Range.compare).reverse().forEach(function(l){b.selection=l;b.execCommand("move lines down")});m.forEach(function(l){l.start.row++;l.end.row++});b.selection.ranges=m;return!0}e.isEmpty()||
0!==e.end.column||e.growRight(-1);var a=e.range,g=a;m=g.start;g=g.end;e.isEmpty()?a={start:{row:m.row,column:0},end:{row:m.row+1,column:0}}:0!==g.column&&(a={start:m,end:{row:g.row+1,column:0}});e=b.undoManager.ensureNewGroup(b);a=b.deleteText(a);b.insertText(a,{row:m.row+1,column:0});b.undoManager.group(e);b.selection={start:Object.assign({},m,{row:m.row+1}),end:Object.assign({},g,{row:g.row+1})};return!0}},{name:"old select word",exec:function(b){var e=b.selection;e.range=b.wordAt(e.lead).range;
return!0}},{name:"select word",exec:function(b){var e=b.selection;if(b=b.selectMatchingBrackets(b.textString,b.positionToIndex(e.lead)))e.range={start:b[0],end:b[1]+1};return!0}},{name:"select word right",exec:function(b){var e=b.selection;e.anchor=b.wordRight(e.end).range.end;return!0}},{name:"goto word left",exec:function(b,e){e=void 0===e?{select:!1}:e;e=e.select||!!b.activeMark;var m=b.wordLeft().range;b.selection.lead=m.start;e||(b.selection.anchor=m.start);return!0}},{name:"goto word right",
exec:function(b,e){e=void 0===e?{select:!1}:e;e=e.select||!!b.activeMark;var m=b.wordRight().range;b.selection.lead=m.end;e||(b.selection.anchor=m.end);return!0}},{name:"delete word right",exec:function(b){b.undoManager.group();var e=b.wordRight().range.end;e={start:b.cursorPosition,end:e};b.env.eventDispatcher.doCopy(b.textInRange(e));b.deleteText(e);b.undoManager.group();return!0}},{name:"delete word left",exec:function(b){b.undoManager.group();var e={start:b.wordLeft().range.start,end:b.cursorPosition};
b.deleteText(e);b.undoManager.group();return!0}},{name:"goto matching right",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;var m=e.pairs||{"{":"}","[":"]","(":")","<":">"};if(m=b.findMatchingForward(b.cursorPosition,"right",m)||b.findMatchingForward(b.cursorPosition,"left",m))b.selection.lead=m,e.select||(b.selection.anchor=b.selection.lead);return!0}},{name:"goto matching left",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;var m=e.pairs||{"}":"{","]":"[",")":"(",">":"<"};
if(m=b.findMatchingBackward(b.cursorPosition,"left",m)||b.findMatchingBackward(b.cursorPosition,"right",m))b.selection.lead=m,e.select||(b.selection.anchor=b.selection.lead);return!0}},{name:"realign top-bottom-center",doc:"Cycles through centering the cursor position, aligning it at the top, aligning it at the bottom.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){var e=b.charBoundsFromTextPosition(b.cursorPosition),m=e.topLeft();e=b.height-e.height;var a=b.scroll,g=a.x;a=a.y;
a=2>Math.abs(m.y-a)?m.y-e:2>Math.abs(m.y-a-.5*e)?m.y:m.y-.5*e;b.scroll=Ih.pt(g,a);return!0}},{name:"reverse selection",doc:"switches the selection lead and anchor",exec:function(b){var e=b.selection;if(e.isEmpty()){var m=b.popSavedMark();m&&(b.saveMark(b.cursorPosition),e.lead=m.position)}else e.reverse();return!0}},{name:"toggle active mark",doc:"....",handlesCount:!0,multiSelectAction:"single",exec:function(b,e,m){var a=b.activeMark;e=b.selection;var g=!e.isEmpty();if(4===m){if(b=b.popSavedMark())e.lead=
b.position,g||(e.anchor=e.lead);return!0}if(!a&&!g)return b.activeMark=e.lead,!0;b.saveMark(a||e.anchor);b.activeMark=null;g&&(b.inMultiSelectMode()?e.selections:[e]).forEach(function(l){return l.anchor=l.lead});return!0}},{name:"fit text to column",handlesCount:!0,multiSelectAction:"forEach",exec:function(b,e,m){function a(u,v,y){if(u.length<=g)return[v+u.trim()];y=u.slice(0,g);var z=Ih.arr.last(Ih.string.reMatches(y,q)),A=z&&0<z.start?z.start:g;z=y.slice(0,A);u=v+(y.slice(A)+u.slice(g)).trimLeft();
return[z].concat(a(u,v))}if(4===m)return b.execCommand("join line");b.selection.isEmpty()&&b.selectLine();e=b.selection;var g=m||80,l=e.selectedRows;m=e.range;var q=/[ ]+/g,r=/^[\s\t]+/;e=Ih.string.paragraphs(Ih.arr.range(l.first,l.last).map(function(u){return b.getLine(u)}).join("\n"),{keepEmptyLines:!0});e=Ih.chain(e.map(function(u){if(!/^\s*$/.test(u)){u=u.split("\n").join(" ");if(""===u.trim())u=[""];else{var v=u.match(r);v=v?v[0]:"";u=a(v+u.trim(),v)}u=u.join("\n")+"\n"}return u})).flatten().value().join("\n");
b.undoManager.group();b.replace(m,e);b.undoManager.group();return!0}},{name:"lowercase",exec:function(b){b.undoManager.group();b.selection.isEmpty()&&(b.selection=b.wordAt().range);b.selection.text=b.selection.text.toLowerCase();b.undoManager.group();return!0}},{name:"remove trailing whitespace",exec:function(b){b.undoManager.group();var e=0;b.withLinesDo(0,b.documentEndPosition.row,function(m,a){return m.match(/\s+$/)&&++e&&b.replace(a,m.trimRight())});b.world().setStatusMessage(e+" lines cleaned up");
b.undoManager.group();return!0}},{name:"uppercase",exec:function(b){b.undoManager.group();b.selection.isEmpty()&&(b.selection=b.wordAt().range);b.selection.text=b.selection.text.toUpperCase();b.undoManager.group();return!0}},{name:"newline",exec:function(b){var e=b.cursorPosition,m=b.getLine(e.row),a=m.match(/^\s*/)[0].length;b.undoManager.group();!m.trim()&&a&&(b.deleteText({start:{row:e.row,column:0},end:{row:e.row,column:a}}),e.column=0);if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_newline&&
b.editorPlugin.cmd_newline(e,m,a))return!0;b.selection.text="\n"+" ".repeat(a);b.selection.collapseToEnd();b.undoManager.group();return!0}},{name:"insertstring",exec:function(b,e){var m=e=void 0===e?{string:null,undoGroup:!1}:e;e=m.string;m=m.undoGroup;var a="string"===typeof e&&e.length;a||console.warn("command insertstring called with not string value");if(b.rejectsInput()||!a)return!1;b.saveActiveMarkAndDeactivate();if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_insertstring&&b.editorPlugin.cmd_insertstring(e))return!0;
a=b.selection;var g=!a.isEmpty();g&&b.undoManager.group();var l=a.lead;a.replace(e,!0,!0,!0,!(1===e.length&&"\n"!==e&&0<l.column));a.collapseToEnd();g&&b.undoManager.group();m&&(/^[\s\.,\?\+=]+$/.test(e)||"number"!==typeof m?b.undoManager.group():b.undoManager.groupLater(m));return!0}},{name:"toggle line wrapping",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){b.keepPosAtSameScrollOffsetWhile(function(){return b.lineWrapping=b.lineWrapping?!1:b.fontMetric.isProportional(b.fontFamily)?
!0:"by-chars"});return!0}},{name:"cancel input",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b,e,m,a){b.env.eventDispatcher.resetKeyInputState();b.selection.disableMultiSelect&&b.selection.disableMultiSelect();b.selection.isEmpty()||(b.selection.anchor=b.selection.lead);b.activeMark&&(b.activeMark=null);return!0}}];Ih.usefulEditorCommands=[{name:"insert date",handlesCount:!0,exec:function(b,e,m){e=Ih.date.format(new Date,m?"mediumDate":"isoDate");b.undoManager.group();b.insertText(e);
b.undoManager.group();return!0}},{name:"[todo] toggle todo marker",exec:function(b){var e=b.selection;e.isEmpty()&&b.selectLine();b=/\[\s*\]/g;var m=/\[X\]/g,a=e.text;a=b.test(a)?a.replace(b,"[X]"):m.test(a)?a.replace(m,"[ ]"):"[ ] "+a.trimLeft();e.text=a;return!0}},{name:"selected lines: sort",exec:function(b){var e=b.selection,m=e.start.row;e=e.end.row;var a=[];b.withLinesDo(m,e,function(g){var l=a.findIndex(function(q){return q>g});-1<l?a.splice(l,0,g):a.push(g)});b.undoManager.group();b.replace({start:{row:m,
column:0},end:{row:e+1,column:0}},a.join("\n")+"\n");b.undoManager.group();return!0}},{name:"selected lines: reverse",exec:function(b){var e=b.selection,m=e.start.row;e=e.end.row;var a=[];b.withLinesDo(m,e,function(g){return a.push(g)});b.undoManager.group();b.replace({start:{row:m,column:0},end:{row:e+1,column:0}},a.reverse().join("\n")+"\n");b.undoManager.group();return!0}},{name:"selected lines: remove duplicates (uniq)",exec:function(b){var e=b.selection,m=e.start.row;e=e.end.row;var a=[];b.withLinesDo(m,
e,function(g){return Ih.arr.pushIfNotIncluded(a,g)});b.undoManager.group();b.replace({start:{row:m,column:0},end:{row:e+1,column:0}},a.join("\n")+"\n");b.undoManager.group();return!0}},{name:"change string inflection",handlesCount:!0,multiSelectAction:"single",exec:function(b,e,m){function a(A,B){var G,E,K=g(A).trim();"uppercased"===K?G=/\s*[A-Z0-9]+/g:"dashed"===K?G=/-\w/g:"spaced"===K&&(G=/\s+.?/g);"uppercased"===B?E=function(J){return J.trim().replace(/^-/,"").toUpperCase()}:"dashed"===B?E=function(J){return"-"+
J.trim().replace(/^-/,"").toLowerCase()}:"spaced"===B&&(E=function(J){return" "+J.trim().replace(/^-/,"").toLowerCase()});return A.replace(G,E)}function g(A){return A.match(/[A-Z]/)?"uppercased":A.match(/-/)?"dashed":A.match(/\s/)?"spaced":"unknown"}var l,q,r,u,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress){b.selection.isEmpty()&&(b.selection=b.wordAt().range);l=b.selection.ranges;q=b.textInRange(l[0]);if(!q)return b.setStatusMessage("Please select some text"),
A.return(!0);r=g(q);u=Ih.arr.without(["uppercased","dashed","spaced"],r);return A.yield(b.world().listPrompt("Convert "+r+" into?",u,{}),2)}v=A.yieldResult;y=$jscomp.makeIterator(v.selected);z=y.next().value;if(!z)return A.return(!0);b.undoManager.group();l.forEach(function(B,G){G=b.textInRange(B);G=a(G,z);b.replace(B,G)});b.undoManager.group();b.focus();return A.return(!0)})}},{name:"spell check word",exec:function(b,e){var m,a,g,l,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return m=
b.wordAt(),m.string?v.yield(System.import("lively.ide/shell/spell-checker.js"),2):(b.setStatusMessage("no word for spellcheck!"),v.return(!0));case 2:return a=v.yieldResult,g=a.spellCheckWord,v.yield(g(m.string),3);case 3:return l=v.yieldResult,l.length?v.yield(b.world().filterableListPrompt("Choose replacement for "+m.string,l),4):(b.setStatusMessage("no suggestions for word "+m.string),v.return(!0));case 4:q=v.yieldResult;r=$jscomp.makeIterator(q.selected);if(u=r.next().value)b.undoManager.group(),
b.replace(m.range,u),b.undoManager.group();return v.return(!0)}})}},{name:"[shell] run shell command on region",multiSelectAction:"single",exec:function(b,e){var m,a,g,l,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return a=(m=b.textInRange(b.selection))&&0!==m.length?{stdin:m}:{},y.yield(b.world().prompt("Enter shell command to run on region.",{historyId:"lively.ide.execShellCommand"}),2);case 2:return g=y.yieldResult,y.yield(System.import("lively.ide/shell/shell-interface.js"),
3);case 3:l=y.yieldResult;q=l.runCommand;if(!g)return y.return(b.setStatusMessage("No command entered, aborting...!"));r=q(g,a);y.setCatchFinallyBlocks(4);return y.yield(r.whenDone(),6);case 6:u=r.output.trim();b.undoManager.group();b.selection.selections.forEach(function(z){return z.text=u});b.undoManager.group();y.leaveTryBlock(5);break;case 4:v=y.enterCatchBlock(),b.showError(v);case 5:return y.return(!0)}})}},{name:"open file at cursor",exec:function(b,e){var m,a,g,l,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==
z.nextAddress)return b.getLine(),m=b.cursorPosition.row,a=b.document.scanBackward(b.cursorPosition,function(A,B){return(0>=B.column||A.match(/\s/))&&B})||{row:0,column:0},g=b.document.scanForward(b.cursorPosition,function(A,B){return(B.row!=m||A.match(/\s/))&&B})||b.documentEndPosition,l=b.textInRange({start:a,end:g}).replace(/\s/g,""),q=l.split(":"),r=q[0].match(/^file|http/)?q.shift()+":"+q.shift():q.shift(),q[0].match(/^[0-9]+$/)&&(r+=":"+q.shift()),z.yield(System.import("lively.ide/text-editor.js"),
2);u=z.yieldResult;v=u.default;y=v.openInWindow();y.location=r;return z.return(y)})}},{name:"run code on text morph",doc:"...",exec:function(b,e){var m,a,g,l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return m={targetModule:"lively://code-on-text-morph",context:b},r.yield(b.world().editPrompt("Run code on selection. Use this.selection.text to access it",{requester:b,mode:"js",evalEnvironment:m,historyId:"run-code-on-text-morph-hist"}),2);case 2:return a=
r.yieldResult,r.setCatchFinallyBlocks(3),b.undoManager.group(),r.yield(lively.vm.runEval(a,m),5);case 5:l=r.yieldResult;b.undoManager.group();g=l.isError?l.value:null;r.leaveTryBlock(4);break;case 3:g=q=r.enterCatchBlock();case 4:return g&&b.showError(g),r.return(void 0)}})}},{name:"change editor mode",exec:function(b){var e,m,a,g,l,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return e=function(z){return!z.endsWith("ide/editor-plugin.js")&&z.endsWith("editor-plugin.js")},
y.yield(lively.modules.getPackage("lively.ide").resources(e),2);case 2:return m=y.yieldResult,a=b.editorPlugin||{},g=a.shortName,l=0,q=["<no mode>"].concat(m.map(function(z,A){var B=z.url.match(/([^\/]+)\/editor-plugin.js/)[1];B===g&&(l=A);return{isListItem:!0,string:B,value:z}})),y.yield(b.world().filterableListPrompt("choose mode",q,{requester:b,preselect:l,historyId:"lively.morphic/text-change-editor-mode-hist",fuzzy:!0}),3);case 3:r=y.yieldResult;u=$jscomp.makeIterator(r.selected);v=u.next().value;
if(!v)return y.return();if("<no mode>"!==v){y.jumpTo(4);break}return y.yield(b.changeEditorMode(null),5);case 5:return b.resetTextAttributes(),y.return();case 4:if(v.isLoaded){y.jumpTo(6);break}return y.yield(lively.modules.module(v.url).load(),6);case 6:return y.yield(b.changeEditorMode(v.url),0)}})}},{name:"report token at cursor",exec:function(b){var e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){e=b.tokenAt(b.cursorPosition)||{};m=e.token;a=e.start;g=e.end;b.setStatusMessage(m?
m+" "+a.column+" => "+g.column:"no token");return l.return(!0)})}}];Ih.commands.push.apply(Ih.commands,$jscomp.arrayFromIterable(Ih.usefulEditorCommands));Ih.iyGotoCharActivate=sJ;Ih.commands.push(Ih.iyGotoCharActivate);Ih.searchCommands=qJ;Ih.commands.push.apply(Ih.commands,$jscomp.arrayFromIterable(Ih.searchCommands));var J4=Ih.commands;Ih.default=J4;var jd=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js");jd.Rectangle=ee;jd.Point=$f;jd.rect=Ii;jd.Color=Wf;jd.pt=oh;jd.string=vh;
jd.num=Bk;jd.obj=Pf;jd.fun=nl;jd.promise=yg;jd.arr=vf;jd.signal=tl;jd.noUpdate=yp;jd.connect=fk;jd.disconnect=Jm;jd.bowser=Qs;jd.morph=wa;jd.touchInputDevice=Qo;jd.config=wk;jd.Morph=nk;jd.Selection=nJ;jd.MultiSelection=oJ;jd.Document=Mka;jd.objectReplacementChar="\ufffd";jd.Anchor=aB;jd.Range=Gw;jd.eqPosition=Hs;jd.lessPosition=Gs;jd.KeyHandler=OO;jd.UndoManager=yD;jd.TextSearcher=pJ;jd.TextLayout=Oka;jd.Renderer=Pka;jd.extractHTMLFromTextMorph=eH;jd.commands=J4;jd.textAndAttributesWithSubRanges=
dH;jd.serializeMorph=KB;jd.deserializeMorph=LB;jd.getSvgVertices=Yt;jd.renderSubTree=qz;jd.ShadowObject=bq;jd.getClassName=Jn;var rr=sa("a7",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js"),m=e.hasOwnProperty("Text")&&"function"===typeof e.Text?e.Text:e.Text=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=
a=void 0===a?{}:a,l=g.position,q=g.rightCenter,r=g.leftCenter,u=g.topCenter,v=g.bottom,y=g.top,z=g.right,A=g.left,B=g.bottomCenter,G=g.bottomLeft,E=g.bottomRight,K=g.topRight,J=g.topLeft;g=g.center;Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.undoManager.reset();this.fit();void 0!==l&&(this.position=l);void 0!==q&&(this.rightCenter=q);void 0!==r&&(this.leftCenter=r);void 0!==u&&(this.topCenter=u);void 0!==v&&(this.bottom=v);void 0!==y&&
(this.top=y);void 0!==z&&(this.right=z);void 0!==A&&(this.left=A);void 0!==B&&(this.bottomCenter=B);void 0!==G&&(this.bottomLeft=G);void 0!==E&&(this.bottomRight=E);void 0!==K&&(this.topRight=K);void 0!==J&&(this.topLeft=J);void 0!==g&&(this.center=g)}},{key:"__deserialize__",value:function(a,g,l,q){Sb._get(Object.getPrototypeOf(m.prototype),"__deserialize__",this).call(this,a,g,l,q);this.viewState=this.defaultViewState;this.markers=[];this.textRenderer=new jd.Renderer(this.env.domEnv);this.textLayout=
new jd.TextLayout(this);this.changeDocument(jd.Document.fromString(""));this.ensureUndoManager();a.cachedLineBounds&&(this._initializedByCachedBounds=a.cachedLineBounds);this._isDeserializing=!0}},{key:"__after_deserialize__",value:function(a,g){var l=this;Sb._get(Object.getPrototypeOf(m.prototype),"__after_deserialize__",this).call(this,a,g);this._isDeserializing=!1;this.whenRendered().then(function(){l.embeddedMorphs.forEach(function(q){return q.top=0})})}},{key:"__only_serialize__",get:function(){return jd.arr.withoutAll(Sb._get(Object.getPrototypeOf(m.prototype),
"__only_serialize__",this),["document","textRenderer","viewState","undoManager","markers","textLayout","embeddedMorphMap",this.displacingMorphMap.size?"":"displacingMorphMap"])}},{key:"__additionally_serialize__",value:function(a,g,l,q){Sb._get(Object.getPrototypeOf(m.prototype),"__additionally_serialize__",this).call(this,a,g,l,q);a.props.selections={key:"selections",verbatim:!0,value:(this.selection.isMultiSelection?this.selection.ranges:[this.selection.range]).map(function(B){return jd.obj.select(B,
["start","end"])})};a.props.anchors&&this.selection.isEmpty()&&(a.props.anchors.value=a.props.anchors.value.filter(function(B){return!B.id.includes("selection-")}));a.props.textAndAttributes={key:"textAndAttributes",value:this.textAndAttributes.map(function(B){if(!B)return B;if(B.isMorph)return l.ref(B).asRefForSerializedObjMap();if(jd.obj.isObject(B)){var G={};B=JSON.stringify(B,function(E,K){return K&&K.__serialize__?(K=K.__serialize__(),Object.assign(G,K.bindings),"->["+(K.__expr__+"]")):K});B=
B.replace(/"->\[.*\]"/g,function(E){return E.slice(4,-2)});return l.expressionSerializer.exprStringEncode({__expr__:"("+B+")",bindings:G})}return B})};g=[];q=$jscomp.makeIterator(this.document.lines);for(var r=q.next();!r.done;r=q.next()){r=r.value;var u=this.textLayout.lineCharBoundsCache.get(r);if(u){var v=[],y=void 0,z=0;if(u){u=$jscomp.makeIterator(u);for(var A=u.next();!A.done;A=u.next()){A=A.value;if(y){if(jd.num.roundTo(y.width,.001)==jd.num.roundTo(A.width||0,.001)&&A.height==y.height){z++;
continue}v.push([z,jd.num.roundTo(y.width||0,.001),y.height||0])}z=1;y=A}}y&&v.push([z,jd.num.roundTo(y.width||0,.001),y.height||0]);g.push([r.row,jd.arr.flatten(v)])}}a.cachedLineBounds=g}},{key:"spec",value:function(){var a=Sb._get(Object.getPrototypeOf(m.prototype),"spec",this).call(this);a.textString=this.textString;return jd.obj.dissoc(a,"anchors embeddedMorphMap plugins savedMarks textLayout textRenderer viewState undoManager metadata document displacingMorphMap".split(" "))}},{key:"isText",
get:function(){return!0}},{key:"makeDirty",value:function(){this._positioningSubmorph||Sb._get(Object.getPrototypeOf(m.prototype),"makeDirty",this).call(this)}},{key:"onChange",value:function(a){var g=this,l=a.prop,q=a.selector,r=a.meta,u=this.lineWrapping,v=!1,y=!1,z=!1,A=!1,B=!1,G=!1;if(q)v="replace"===q,A="addTextAttribute"===q,this._displacementChange=!this._displacing&&v;else switch(l){case "scroll":B=y=!0;break;case "extent":y=!0;l=a.prevValue.subPt(a.value);G=(z=this.fixedWidth&&!!this.lineWrapping&&
!!l.x)&&(!this.fixedWidth||!this.fixedHeight);break;case "wordSpacing":case "letterSpacing":case "tabWidth":u&&(A=!0);break;case "fontFamily":case "fontSize":case "lineHeight":case "textAlign":case "fontWeight":case "fontStyle":case "textStyleClasses":case "fixedWidth":A=a.prevValue!=a.value;break;case "lineWrapping":A=!0;break;case "borderWidth":case "fixedHeight":z=a.prevValue!=a.value;break;case "padding":z=!0}Sb._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a);l=function(){g._textChange=
!0;B&&(g.viewState.wasScrolled=!0);(A||G||z&&!r.styleSheetChange)&&g.invalidateTextLayout(A,A);(z||A)&&g.document&&g.world()&&g.document.lines.forEach(function(E){return E.hasEstimatedExtent=!0});g._displacementChange&&(g._displacementChange=!1);v&&jd.signal(g,"textChange",a);y&&jd.signal(g,"viewChange",a);g._textChange=!1};r.animation?jd.promise.delay(r.animation.duration).then(l):l()}},{key:"onSubmorphChange",value:function(a,g){var l=this,q,r,u,v,y,z,A,B,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==
E.nextAddress){if(a.meta&&a.meta.styleSheetChange)return E.return();Sb._get(Object.getPrototypeOf(m.prototype),"onSubmorphChange",l).call(l,a,g);return a.meta.animation?E.yield(a.meta.animation.asPromise(),2):E.jumpTo(2)}if(l._textChange||l._positioningSubmorph===g)return E.return();q=a;r=q.prop;u="position"==r||"extent"==r||"scale"==r||"rotation"==r;l.displacingMorphMap.get(g)&&u&&[].concat($jscomp.arrayFromIterable(l.displacingMorphMap.keys())).filter(function(K){return K.top>=g.top}).forEach(function(K){l._intersectionShapeCache&&
l._intersectionShapeCache.delete(K);l.updateTextDisplacementFor(K)});v=l.embeddedMorphMap.get(g)||{};if((y=v.anchor)&&u){if("position"==r)return l._positioningSubmorph=g,g.position=a.prevValue,l._positioningSubmorph=null,E.return();z=g.bounds();A=g._lastBounds;B=y.position.row;G=l.document.getLine(B);A&&A.height==z.height&&A.bottom()==z.bottom()||(G.hasEstimatedExtent=!0,g._lastBounds=z)}E.jumpToEnd()})}},{key:"removeMorph",value:function(a,g){g=void 0===g?!0:g;var l=this.embeddedMorphMap,q=this.displacingMorphMap;
q&&q.has(a)&&this.toggleTextWrappingAround(a,!1);if(l&&l.has(a)){if(q=l.get(a).anchor){var r=q.position;q=r.row;r=r.column;this.replace({start:{row:q,column:r},end:{row:q,column:r+1}},[],!0,g);this.replace}l.delete(a)}return Sb._get(Object.getPrototypeOf(m.prototype),"removeMorph",this).call(this,a)}},{key:"toggleTextWrappingAround",value:function(a,g){var l=this;if(g)this.displacingMorphMap.has(a)||(this.embeddedMorphMap.has(a)&&this.addMorph(a.remove()),this.displacingMorphMap.set(a,[]),this.updateTextDisplacementFor(a));
else if(g=this.displacingMorphMap.get(a))this._displacing=!0,g.forEach(function(q){return l.removeMorph(q)}),this._displacing=!1,this.displacingMorphMap.delete(a)}},{key:"updateTextDisplacementFor",value:function(a){var g=this;if(!this._displacing){this._displacing=!0;var l=this.displacingMorphMap.get(a),q=this.computeDisplacementRectsFor(a).values(),r=[];l.forEach(function(A){return g.removeMorph(A,!1)});this.textLayout.resetLineCharBoundsCacheOfRange(this,a._displacementRange);q=$jscomp.makeIterator(q);
for(var u=q.next();!u.done;u=q.next()){u=u.value;var v=l.shift()||jd.morph({visible:!0,reactsToPointer:!1,isDisplacementMorph:!0}),y=this.textLayout.textPositionFromPoint(this,u.leftCenter());v.setBounds(u);this.insertText([v,{}],y);this.viewState._needsFit=!1;if(z==v.top)v.remove();else{var z=v.top;r.push(v)}}l.forEach(function(A){return g.removeMorph(A,!1)});this.displacingMorphMap.set(a,r);this._displacing=!1}}},{key:"computeDisplacementRectsFor",value:function(a){var g=this.textLayout,l=g.textPositionFromPoint(this,
a.topLeft),q=g.textPositionFromPoint(this,a.bottomLeft),r=[];a._displacementRange=jd.Range.fromPositions(l,q);for(l=l.row;l<q.row+1;l++)r.push.apply(r,$jscomp.arrayFromIterable(g.rangesOfWrappedLine(this,l)));this._intersectionShapeCache||(this._intersectionShapeCache=new Map);(q=this._intersectionShapeCache.get(a))||(q=a.isPath?Shapes.path(jd.getSvgVertices(a.vertices)):"Ellipse"==jd.getClassName(a)?Shapes.ellipse(a.center.x,a.center.y,a.width/2,a.height/2):Shapes.rectangle(a.left,a.top,a.width,
a.height));this._intersectionShapeCache.set(a,q);a=this.width;l=new Map;r=$jscomp.makeIterator(r);for(var u=r.next();!u.done;u=r.next()){u=u.value;var v=g.computeMaxBoundsForLineSelection(this,u),y=v.height;v=v.y;var z=Shapes.rectangle(a,y,0,v);z=Intersection.intersect(z,q);1>z.points.length||(z=jd.Rectangle.unionPts(z.points.map(jd.Point.fromLiteral)),z.y=v,z.height=y,z.x-=15,z.width+=30,l.set(u,z))}return l}},{key:"rejectsInput",value:function(){return this.readOnly}},{key:"addAnchor",value:function(a){if(a){"string"===
typeof a&&(a={id:a,row:0,column:0});if(!a.isAnchor){var g=a,l=g.column,q=g.row;a=new jd.Anchor(g.id,"number"===typeof q&&"number"===typeof l?{row:q,column:l}:void 0,g.insertBehavior||"move")}if(g=a.id&&this.anchors.find(function(r){return r.id===a.id}))return Object.assign(g,a);this.anchors.push(a);return a}}},{key:"removeAnchor",value:function(a){for(var g=this.anchors,l,q=g.length;q--;){var r=g[q];if(r.id==a||r===a)l=r,g.splice(q,1)}return l}},{key:"addMarker",value:function(a){this.removeMarker(a.id);
this.markers.push(a);this.makeDirty();return a}},{key:"removeMarker",value:function(a){var g="string"===typeof a?a:a.id;this.markers=this.markers.filter(function(l){return l.id!==g});this.makeDirty()}},{key:"saveMark",value:function(a,g){a=void 0===a?this.cursorPosition:a;var l=this.activeMark;l&&l!==a&&!l.equalsPosition(a)&&(this.savedMarks=this.savedMarks.concat(l));g?this.activeMark=a:this.savedMarks=this.savedMarks.concat(a)}},{key:"saveActiveMarkAndDeactivate",value:function(){var a=this.activeMark;
a&&(this.saveMark(a),this.activeMark=null)}},{key:"popSavedMark",value:function(){var a=this.activeMark;if(a)return this.activeMark=null,a;a=jd.arr.last(this.savedMarks);this.savedMarks=this.savedMarks.slice(0,-1);return a}},{key:"lastSavedMark",get:function(){return this.activeMark||jd.arr.last(this.savedMarks)}},{key:"savedMarkForSelection",value:function(a){var g=this.selection,l=this.savedMarks,q=this.multiSelect?this.multiSelect.getAllRanges().length:1;q=l.length-(q-(g.index||0));g=l[q]||g.anchor;
a&&"row"in a&&"column"in a&&(this.savedMarks=l.slice(0,q).concat(a).concat(l.slice(q+1)));return g}},{key:"addPlugin",value:function(a){this.plugins.includes(a)||(this.plugins.push(a),this._cachedKeyhandlers=null,"function"===typeof a.attach&&a.attach(this));return a}},{key:"removePlugin",value:function(a){if(!this.plugins.includes(a))return!1;this._cachedKeyhandlers=null;jd.arr.remove(this.plugins,a);"function"===typeof a.detach&&a.detach(this);return!0}},{key:"pluginCollect",value:function(a,g){g=
void 0===g?[]:g;this.plugins.forEach(function(l){return"function"===typeof l[a]&&(g=l[a](g))});return g}},{key:"pluginInvokeFirst",value:function(a,g){for(var l=[],q=1;q<arguments.length;++q)l[q-1]=arguments[q];return(q=this.pluginFind(function(r){return"function"===typeof r[a]}))?q[a].apply(q,$jscomp.arrayFromIterable(l)):void 0}},{key:"pluginFind",value:function(a){return this.plugins.slice().reverse().find(a)}},{key:"editorPlugin",get:function(){return this.pluginFind(function(a){return a.isEditorPlugin})}},
{key:"lookupEditorPluginNamed",value:function(a){var g,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return a=jd.config.ide.modes.aliases[a]||a,l=(g=/^[^:\\]+:\/\//.test(a))?a:"lively.ide/"+a+"/editor-plugin.js",u.yield(lively.modules.doesModuleExist(l),2);if(3!=u.nextAddress)return u.yieldResult?u.yield(lively.modules.module(l).load(),3):u.return(null);q=u.yieldResult;r=q.default;return u.return(r)})}},{key:"changeEditorMode",value:function(a){var g=this,
l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return l=g.plugins.filter(function(u){return!u.isEditorPlugin}),a?"string"!==typeof a?r.jumpTo(2):r.yield(g.lookupEditorPluginNamed(a),3):(g.plugins=l,r.return(null));if(2!=r.nextAddress){q=r.yieldResult;if(!q)throw Error("Cannot find editor mode "+a);a=new q(jd.config.codeEditor.defaultTheme);g.evalEnvironment&&(a.evalEnvironment=g.evalEnvironment)}g.plugins=l.concat(a);return r.return(a)})}},{key:"invalidateTextLayout",
value:function(a,g){g=void 0===g?!1:g;if(!this._isDeserializing){var l=this.viewState;l&&(this.fixedWidth&&this.fixedHeight||(l._needsFit=!0),l=this.textLayout)&&((void 0===a?0:a)&&l.resetLineCharBoundsCache(this),l.estimateLineHeights(this,g))}}},{key:"textBounds",value:function(){return this.textLayout.textBounds(this)}},{key:"defaultCharExtent",value:function(){return this.textLayout.defaultCharExtent(this)}},{key:"scrollExtent",get:function(){return this.textBounds().extent().addPt(this.padding.topLeft()).addPt(this.padding.bottomRight()).addPt(this.scrollbarOffset).maxPt(Sb._get(Object.getPrototypeOf(m.prototype),
"scrollExtent",this))}},{key:"commands",get:function(){return this.pluginCollect("getCommands",(this._commands||[]).concat(jd.commands))}},{key:"execCommand",value:function(a,g,l,q){function r(J){(v.hasOwnProperty("scrollCursorIntoView")?v.scrollCursorIntoView:1)&&jd.fun.debounceNamed("execCommand-scrollCursorIntoView-"+J.id,100,function(){return J.scrollCursorIntoView()})()}var u=this,v=(this.lookupCommand(a)||{}).command;if(v){var y=this.inMultiSelectMode(),z=v.hasOwnProperty("multiSelectAction")?
v.multiSelectAction:"forEach";if(y&&"forEach"===z){var A=this.selection;y=this.selection.selections.slice().reverse();this.selection=y[0];this._multiSelection=A;try{var B=this.execCommand(a,g,l,q)}catch(J){throw this.selection=A,this._multiSelection=null,this.selection.mergeSelections(),J;}if(!B)return B;var G=[B];if("function"===typeof B.then&&"function"===typeof B.catch)return jd.promise.finally(jd.promise.chain([function(){return B}].concat(y.slice(1).map(function(J){return function(){u.selection=
J;return Promise.resolve(u.execCommand(a,g,l,q)).then(function(P){return G.push(P)})}}))).then(function(){return G}),function(){u.selection=A;u._multiSelection=null;u.selection.mergeSelections()});try{for(var E=$jscomp.makeIterator(y.slice(1)),K=E.next();!K.done;K=E.next())this.selection=K.value,G.push(this.execCommand(a,g,l,q))}finally{this.selection=A,this._multiSelection=null,this.selection.mergeSelections()}return G}(B=this.commandHandler.exec(a,this,g,l,q))&&("function"===typeof B.then&&"function"===
typeof B.catch?B.then(function(){return r(u)}):r(this));return B}}},{key:"changeDocument",value:function(a,g){g=void 0===g?!1:g;if(this.document)var l=this.defaultTextStyle;else g=!1;this.document=a;this.textLayout.reset();g&&(this.defaultTextStyle=l);this.makeDirty();this.consistencyCheck()}},{key:"textInRange",value:function(a){return this.document.textInRange(a)}},{key:"charRight",value:function(a){a=void 0===a?this.cursorPosition:a;var g=a.column;return this.getLine(a.row).slice(g,g+1)}},{key:"charLeft",
value:function(a){a=void 0===a?this.cursorPosition:a;var g=a.column;return this.getLine(a.row).slice(g-1,g)}},{key:"indexToPosition",value:function(a){return this.document.indexToPosition(a)}},{key:"positionToIndex",value:function(a){return this.document.positionToIndex(a)}},{key:"getVisibleLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.wrappedLines(this)[a].text}},{key:"isLineVisible",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.isLineVisible(this,
a)}},{key:"isLineFullyVisible",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.isLineFullyVisible(this,a)}},{key:"getLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.document.getLineString(a)}},{key:"lineCount",value:function(){return this.document.rowCount}},{key:"isLineEmpty",value:function(a){return!this.getLine(a).trim()}},{key:"isAtLineEnd",value:function(a){a=void 0===a?this.cursorPosition:a;var g=this.getLine(a.row);return a.column===
g.length}},{key:"wordsOfLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.document.wordsOfLine(a)}},{key:"wordAt",value:function(a){a=void 0===a?this.cursorPosition:a;return this.document.wordAt(a)}},{key:"wordLeft",value:function(a){a=void 0===a?this.cursorPosition:a;return this.document.wordLeft(a)}},{key:"wordRight",value:function(a){a=void 0===a?this.cursorPosition:a;return this.document.wordRight(a)}},{key:"lineRange",value:function(a,g){a=void 0===a?this.cursorPosition.row:
a;g=void 0===g?!0:g;"number"!==typeof a&&this.cursorPosition.row;var l=this.getLine(a);a={start:{column:0,row:a},end:{column:l.length,row:a}};l=l.match(/^\s*/);l[0].length&&g&&(a.start.column+=l[0].length);return new jd.Range(a)}},{key:"screenLineRange",value:function(a,g){a=void 0===a?this.cursorPosition:a;return this.textLayout.screenLineRange(this,a,void 0===g?!0:g)}},{key:"insertTextAndSelect",value:function(a,g){g=void 0===g?null:g;a=String(a);g?this.selection.range=this.insertText(a,g):this.selection.text=
a}},{key:"append",value:function(a){var g=this;return this.saveExcursion(function(){return g.insertText(a,g.documentEndPosition)})}},{key:"insertText",value:function(a,g,l,q){g=void 0===g?this.cursorPosition:g;return this.replace({start:g,end:g},a,void 0===l?!0:l,void 0===q?!0:q)}},{key:"deleteText",value:function(a,g){g=void 0===g?!0:g;var l=this.textAndAttributesInRange(a);this.replace(a,[],!1,g);return l}},{key:"replace",value:function(a,g,l,q,r,u){var v=this;l=void 0===l?!0:l;q=void 0===q?!0:
q;r=void 0===r?!0:r;u=void 0===u?!0:u;a=a.isRange?a:new jd.Range(a);var y="string"===typeof g?[g,null]:Array.isArray(g)?g:[String(g||""),null];g=!y.length||2==y.length&&!y[0];var z=a.isEmpty();if(g&&z)return a;var A;l&&(A=this.textAttributeAt({row:a.start.row,column:a.start.column-(0<a.start.column?1:0)}));var B=[];for(l=0;l<y.length;l+=2)g=y[l],z=y[l+1],g.isMorph&&B.push(g),A&&(y[l+1]=Object.assign({},A,{},z));r&&this.undoManager.undoStart(this,"replace");var G=this.textAndAttributesInRange(a),E=
this.document.replace(a,y,this.debug&&this.debugHelper(this.debug)).inserted;this.addMethodCallChangeDoing({target:this,selector:"replace",args:[a,y],undo:{target:this,selector:"replace",args:[E,G,!1]}},function(){q&&(v.invalidateTextLayout(!1,!1),v.textLayout.resetLineCharBoundsCacheOfRange(v,E));if(!jd.eqPosition(a.end,E.end)){if(jd.lessPosition(E.end,a.end)){var K=$jscomp.makeIterator((new jd.Range(a)).subtract(E)).next().value;v.anchors.forEach(function(P){return P.onDelete(K)})}else{var J=$jscomp.makeIterator((new jd.Range(E)).subtract(a)).next().value;
v.anchors.forEach(function(P){return P.onInsert(J)})}v._multiSelection?v._multiSelection.updateFromAnchors():v.selection.updateFromAnchors()}v._updateEmbeddedMorphsDuringReplace(B,E,y,G);v._isDeserializing&&v._initializedByCachedBounds||v.textLayout.estimateLineHeights(v,!1);u&&v.consistencyCheck()});r&&this.undoManager.undoStop();return E}},{key:"_updateEmbeddedMorphsDuringReplace",value:function(a,g,l,q){for(var r=this.embeddedMorphMap,u=0;u<q.length;u+=2){var v=q[u];if(v.isMorph&&!a.includes(v)){if(r){var y=
r.get(v);y&&y.anchor&&(this.removeAnchor(y.anchor),jd.disconnect(y.anchor,"position",v,"position"));r.set(v,Object.assign({},y,{anchor:null}))}v.remove()}}if(a.length)for(l=jd.textAndAttributesWithSubRanges(g.start,l),g=l.ranges,l=l.textAndAttributes,q=0;q<g.length;q++)u=l[2*q],u.isMorph&&(console.assert(a.includes(u),"????"),v=g[q].start,u.owner!==this&&this.addMorph(u),r&&(r.has(u)?r.get(u).anchor.position=v:(v=this.addAnchor(Object.assign({id:"embedded-"+u.id},v)),jd.connect(v,"position",u,"position",
{updater:function(z,A){var B=this.targetObj.owner,G=this.targetObj;A=B&&B.isText?B.charBoundsFromTextPosition(A).topLeft().subPt(B.origin):G.position;B&&(B._positioningSubmorph=G);z(A);B&&(B._positioningSubmorph=!1)}}).update(v.position),r.set(u,{anchor:v}))))}},{key:"applyJsDiffPatch",value:function(a){function g(z,A,B,G){var E=q.indexToPosition(z+B),K=q.indexToPosition(A+B);G.push(q.deleteText({start:E,end:K}));return B-(A-z)}function l(z,A,B,G){G.push(q.insertText(A,q.indexToPosition(z+B)));return B}
var q=this,r=[],u=0,v=0;a=$jscomp.makeIterator(a);for(var y=a.next();!y.done;y=a.next())y=y.value,y.removed?v=g(u,u+y.count,v,r):y.added&&(v=l(u,y.value,v,r)),u+=y.count;return r}},{key:"applyTextChanges",value:function(a,g,l,q){g=void 0===g?0:g;l=void 0===l?!0:l;var r=[];a=$jscomp.makeIterator(a);for(var u=a.next();!u.done;u=a.next()){var v=$jscomp.makeIterator(u.value);u=v.next().value;var y=v.next().value;v=v.next().value;g&&(y="number"===typeof y?y:this.positionToIndex(y),v&&"string"!==typeof v&&
!Array.isArray(v)&&(v=("number"===typeof v?v:this.positionToIndex(v))+g),y+=g);y="number"===typeof y?this.indexToPosition(y):y;switch(u){case "delete":case "remove":u="number"===typeof v?this.indexToPosition(v):v;r.push(this.deleteText({start:y,end:u},q));break;case "insert":r.push(this.insertText(v,y,l,q));break;default:console.warn("[applyTextChanges] unknown type: "+u)}}return r}},{key:"modifyLines",value:function(a,g,l){var q=this;l=jd.arr.range(a,g).map(function(r){return q.getLine(r)}).map(l).join("\n")+
"\n";this.deleteText({start:{row:a,column:0},end:{row:g+1,column:0}},!1);this.insertText(l,{row:a,column:0})}},{key:"modifySelectedLines",value:function(a){var g=this.selection.isEmpty()?this.lineRange(void 0,!1):this.selection.range;return this.modifyLines(g.start.row,g.end.row,a)}},{key:"withLinesDo",value:function(a,g,l){var q=this;return jd.arr.range(a,g).map(function(r){var u=q.getLine(r);r=jd.Range.create(r,0,r,u.length);return l(u,r)})}},{key:"withSelectedLinesDo",value:function(a){var g=this.selection.isEmpty()?
this.lineRange(void 0,!1):this.selection.range,l=g.start.row;g=g.end;var q=g.row;return this.withLinesDo(l,0===g.column&&q>l?q-1:q,a)}},{key:"joinLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;var g=this.getLine(a),l=this.getLine(a+1);l=g+l.replace(/^\s+/,"")+this.document.constructor.newline;this.replace({start:{column:0,row:a},end:{column:0,row:a+2}},l,!0);return{row:a,column:g.length}}},{key:"whatsVisible",get:function(){return this.textLayout.whatsVisible(this)}},{key:"flash",
value:function(a,g){var l=this;a=void 0===a?this.selection.range:a;g=Object.assign({time:1E3,fill:jd.Color.orange},g);var q=g.id||"flash"+jd.string.newUUID();this.addMarker({id:q,range:a,style:{"background-color":g.fill.toCSSString(),"pointer-events":"none"}});jd.fun.debounceNamed("flash-"+q,g.time,function(){return l.removeMarker(q)})()}},{key:"addTextAttribute",value:function(a,g){var l=this;g=void 0===g?this.selection:g;var q={start:g.start,end:g.end};this.undoManager.undoStart(this,"addTextAttribute");
this.addMethodCallChangeDoing({target:this,selector:"addTextAttribute",args:[a,q],undo:{target:this,selector:"removeTextAttribute",args:[a,q]}},function(){l.document.mixinTextAttribute(a,q);l.onAttributesChanged(q);l.consistencyCheck()});this.undoManager.undoStop();return a}},{key:"removeTextAttribute",value:function(a,g){var l=this;g=void 0===g?this.selection:g;var q={start:g.start,end:g.end};this.undoManager.undoStart(this,"removeTextAttribute");this.addMethodCallChangeDoing({target:this,selector:"removeTextAttribute",
args:[a,q],undo:{target:this,selector:"addTextAttribute",args:[a,q]}},function(){l.document.mixoutTextAttribute(a,q);l.onAttributesChanged(q);l.consistencyCheck()});this.undoManager.undoStop()}},{key:"setTextAttributesWithSortedRanges",value:function(a){this.document.setTextAttributesWithSortedRanges(a);this.consistencyCheck();for(var g=0;g<a.length;)this.onAttributesChanged(a[g]),g+=2}},{key:"textAttributeAt",value:function(a){return this.document.textAttributeAt(a)}},{key:"textAttributeAtPoint",
value:function(a){return this.textAttributeAt(this.textLayout.textPositionFromPoint(this,a))}},{key:"textAndAttributesInRange",value:function(a){a=void 0===a?this.selection.range:a;return this.document.textAndAttributesInRange(a)}},{key:"resetTextAttributes",value:function(){this.document.resetTextAttributes();this.onAttributesChanged(this.documentRange);this.consistencyCheck()}},{key:"onAttributesChanged",value:function(a){this.invalidateTextLayout(!1,!1);var g=this.textLayout;g&&g.resetLineCharBoundsCacheOfRange(this,
a);this.makeDirty()}},{key:"styleAt",value:function(a){return(a=this.textLayout.chunkAtPos(this,a))?a.style:Object.assign({},this.defaultTextStyle)}},{key:"getStyleInRange",value:function(a){a=void 0===a?this.selection:a;return this.textAndAttributesInRange(a).filter(function(g,l){return 0!=l%2}).reduce(function(g,l){for(var q in l){var r=l[q];if(!g.hasOwnProperty(q)||void 0!==r&&null!==r)g[q]=r}return g},{})}},{key:"setStyleInRange",value:function(a,g){var l=this;g=void 0===g?this.selection:g;for(var q=
this.textAndAttributesInRange(g),r={start:Object.assign({},g.start),end:Object.assign({},g.start)},u=[],v=0;v<q.length;v+=2){var y=q[v],z=q[v+1],A=-1;"string"!==typeof y&&(y=jd.objectReplacementChar);for(;-1<(A=y.indexOf("\n"));)0<A&&(r.end.column+=A,u.push(r,z)),r={row:r.end.row+1,column:0},r={start:r,end:Object.assign({},r)},y=y.slice(A+1);r.end.column+=y.length;u.push(r,z);r={start:Object.assign({},r.end),end:Object.assign({},r.end)}}this.undoManager.undoStart(this,"setStyleInRange");this.addMethodCallChangeDoing({target:this,
selector:"setStyleInRange",args:[a,g],undo:{target:this,selector:"setTextAttributesWithSortedRanges",args:[u]}},function(){l.document.setTextAttribute(a,g);l.consistencyCheck();l.onAttributesChanged(g)});this.undoManager.undoStop()}},{key:"resetStyleInRange",value:function(a){a=void 0===a?this.selection:a;for(var g=this.document.textAndAttributesInRange(a),l={},q=0;q<g.length;q+=2)Object.assign(l,g[q+1]);this.removeTextAttribute(l,a)}},{key:"changeStyleProperty",value:function(a,g,l){var q=this;l=
void 0===l?this.selection:l;l=this.getStyleInRange(l)[a];var r=g(l);this.selections.forEach(function(u){var v={};return q.addTextAttribute((v[a]=r,v),u)})}},{key:"inMultiSelectMode",value:function(){return this.selection.selections&&1<this.selection.selections.length}},{key:"selectionBounds",value:function(){var a=this;return this.selections.map(function(g){var l=a.charBoundsFromTextPosition(g.start),q=a.charBoundsFromTextPosition(g.end);return g.start.row===g.end.row?l.union(q):jd.rect(jd.pt(a.padding.left(),
l.top()),jd.pt(a.width-a.padding.left(),q.bottom()))}).reduce(function(g,l){return l.union(g)})}},{key:"documentEndPosition",get:function(){return this.document?this.document.endPosition:{row:0,column:0}}},{key:"isAtDocumentEnd",value:function(){return jd.eqPosition(this.cursorPosition,this.documentEndPosition)}},{key:"documentRange",get:function(){return{start:{row:0,column:0},end:this.documentEndPosition}}},{key:"cursorUp",value:function(a){return this.selection.goUp(void 0===a?1:a)}},{key:"cursorDown",
value:function(a){return this.selection.goDown(void 0===a?1:a)}},{key:"cursorLeft",value:function(a){return this.selection.goLeft(void 0===a?1:a)}},{key:"cursorRight",value:function(a){return this.selection.goRight(void 0===a?1:a)}},{key:"getPositionAboveOrBelow",value:function(a,g,l,q,r){function u(A,B){A=A.slice();A.push({x:jd.arr.last(A).x+jd.arr.last(A).width});for(var G=0,E=Infinity,K=0;K<A.length;K++){var J=Math.abs(A[K].x-B);J<E&&(E=J,G=K)}return G}a=void 0===a?1:a;g=void 0===g?this.cursorPosition:
g;l=void 0===l?!1:l;if(0===a)return g;"number"===typeof r&&(r-=this.padding.left());var v=g.row,y=g.column;if(l&&this.lineWrapping){v=this.textLayout.rangesOfWrappedLine(this,g.row);if(!v.length)return g;y=v.length-1-v.slice().reverse().findIndex(function(A){return A.start.column<=g.column});if(1<=a){var z=0===y?0>=g.row?null:jd.arr.last(this.textLayout.rangesOfWrappedLine(this,g.row-1)):v[y-1];if(!z)return g}else if(-1>=a&&(z=(v.length-1===y?g.row>=this.lineCount()-1?[]:this.textLayout.rangesOfWrappedLine(this,
g.row+1):v.slice(y+1))[0],!z))return g;v=z.start.row;y=this.textLayout.charBoundsOfRow(this,v).slice(z.start.column,z.end.column+1);y=z.start.column+u(y,r)}else v=Math.min(Math.max(0,g.row-a),this.lineCount()-1),"number"===typeof r&&(z=this.textLayout.charBoundsOfRow(this,v),y=u(z,r));z={row:v,column:y};return 1<Math.abs(a)?this.getPositionAboveOrBelow(a+(1<a?-1:1),z,l,q,r):z}},{key:"collapseSelection",value:function(){this.selection.collapse(this.selection.lead);return this.selection}},{key:"selectAll",
value:function(){this.selection.selectAll();return this.selection}},{key:"selectLine",value:function(a,g){a=void 0===a?this.cursorPosition.row:a;this.selection.selectLine(a,void 0===g?!1:g);return this.selection}},{key:"selectionOrLineString",value:function(){var a=this.selection,g=a.text;a=a.start;return g?g:this.getLine(a.row)}},{key:"scrollCursorIntoView",value:function(){this.scrollPositionIntoView(this.cursorPosition)}},{key:"centerRange",value:function(a,g,l){a=void 0===a?this.selection.range:
a;g=void 0===g?jd.pt(0,0):g;l=void 0===l?!0:l;var q=this.charBoundsFromTextPosition(a.start).top();a=this.charBoundsFromTextPosition(a.end).bottom()-q;this.scroll=a<this.height||!1===l?this.scroll.withY(q+a/2-this.height/2).addPt(g):this.scroll.withY(q).addPt(g)}},{key:"centerRow",value:function(a,g){a=void 0===a?this.cursorPosition.row:a;g=void 0===g?jd.pt(0,0):g;return this.alignRowAtTop(a,g.addXY(0,-this.height/2))}},{key:"alignRowAtTop",value:function(a,g){a=void 0===a?this.cursorPosition.row:
a;g=void 0===g?jd.pt(0,0):g;this.scroll=this.charBoundsFromTextPosition({row:a,column:0}).topLeft().addXY(-this.padding.left(),0).addPt(g)}},{key:"alignRowAtBottom",value:function(a,g){a=void 0===a?this.cursorPosition.row:a;g=void 0===g?jd.pt(0,0):g;var l=this.charBoundsFromTextPosition({row:a,column:0}).height;this.alignRowAtTop(a,g.addXY(0,-this.textPageHeight()+l))}},{key:"scrollPositionIntoView",value:function(a,g){g=void 0===g?jd.pt(0,0):g;if(this.isClip()){var l=this.scroll;l=this.innerBounds().translatedBy(l).insetByRect(this.padding).insetBy(this.borderWidth);
a=this.charBoundsFromTextPosition(a);this.lineWrapping||(a=a.insetByPt(jd.pt(-20,0)));var q=20<l.bottom()-a.bottom()?"bottomLeft":"topLeft";l=a[q]().subPt(l.translateForInclusion(a)[q]()).addPt(g);if(0!=l.x||0!=l.y)this.scroll=this.scroll.addPt(l).addPt(g),this.isFocused()&&this.ensureKeyInputHelperAtCursor()}}},{key:"keepPosAtSameScrollOffsetWhile",value:function(a,g){var l=this;g=void 0===g?this.cursorPosition:g;var q=this.scroll;g=this.selection.lead;var r=this.charBoundsFromTextPosition(g).y-
q.y;q=!1;var u=function(){return l.scroll=l.scroll.withY(l.charBoundsFromTextPosition(g).y-r)};try{var v=a();q=v&&v instanceof Promise}finally{!q&&u()}q&&jd.promise.finally(v,u);return v}},{key:"saveExcursion",value:function(a,g){var l=this;g=Object.assign({useAnchors:!1},g);var q=this.selection.isMultiSelection?this.selection.selections.map(function(y){return y.directedRange}):[this.selection],r=g.useAnchors?q.map(function(y){var z=y.end;return[l.addAnchor(Object.assign({},y.start,{id:"save-excursion-"+
jd.string.newUUID()})),l.addAnchor(Object.assign({},z,{id:"save-excursion-"+jd.string.newUUID()}))]}):null,u=!1;g=g.useAnchors?function(){var y=r.map(function(z){var A=$jscomp.makeIterator(z);z=A.next().value.position;A=A.next().value.position;return{start:z,end:A}});l.selections=y;r.forEach(function(z){var A=$jscomp.makeIterator(z);z=A.next().value;A=A.next().value;l.removeAnchor(z);l.removeAnchor(A)})}:function(){return l.selections=q};try{var v=this.keepPosAtSameScrollOffsetWhile(a);u=v&&v instanceof
Promise}finally{!u&&g()}u&&jd.promise.finally(v,g);return v}},{key:"alignRow",value:function(a,g){g=void 0===g?"center":g;if(this.isClip()){var l=this.scroll,q=this.padding;l=this.innerBounds().insetByRect(q).translatedBy(l);a=this.charBoundsFromTextPosition({row:a,column:0});if(g="top"===g||"bottom"===g?l[g]()-a[g]():"center"===g?l[g]().y-a[g]().y:0)this.scroll=this.scroll.addXY(0,-g)}}},{key:"fit",value:function(){var a=this,g=this.viewState,l=this.fixedWidth,q=this.fixedHeight;g._needsFit=!1;if(q&&
l||!this.textLayout)return this;var r=this.textBounds().outsetByRect(this.padding),u=function(){q||a.height==r.height||(a.height=r.height);l||a.width==r.width||(a.width=r.width);a.embeddedMorphs.forEach(function(v){v=a.embeddedMorphMap.get(v).anchor;v.position=v.position})};g._needsFit=!1;this.document.lines.find(function(v){return v.hasEstimatedExtent})?this.whenRendered().then(u):u();return this}},{key:"fitIfNeeded",value:function(){this.viewState._needsFit&&this.fit()}},{key:"defaultLineHeight",
get:function(){var a=this.padding;return a.top()+a.bottom()+this.fontMetric.defaultLineHeight({fontSize:this.fontSize,fontFamily:this.fontFamily})}},{key:"columnInWrappedLine",value:function(a){if(!this.lineWrapping)return a.column;var g=this.screenLineRange(a,!0).start.column;return a.column-g}},{key:"textPositionFromPoint",value:function(a){return this.textLayout.textPositionFromPoint(this,a)}},{key:"charBoundsFromTextPosition",value:function(a){return this.textLayout.boundsFor(this,a)}},{key:"forceRerender",
value:function(){this.textLayout.reset();this.makeDirty()}},{key:"aboutToRender",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"aboutToRender",this).call(this,a)}},{key:"applyLayoutIfNeeded",value:function(){this.fitIfNeeded();Sb._get(Object.getPrototypeOf(m.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return this.textRenderer.renderMorph(this,
a)}},{key:"directRender",value:function(){var a=this.env.renderer,g=this.textRenderer;a&&g&&!a._stopped&&(jd.renderSubTree(this,a),g.manuallyTriggerTextRenderHook(this,a))}},{key:"onMouseDown",value:function(a){if(!a.rightMouseButtonPressed()){this.activeMark&&(this.activeMark=null);var g=a.state;if(g.clickedOnMorph===this){g=(g.clickCount-1)%3+1;var l=this.localize(a.position),q=this.textPositionFromPoint(l);a.leftMouseButtonPressed()&&!a.isShiftDown()&&!a.isAltDown()&&this.callTextAttributeDoitFromMouseEvent(a,
l);this.selectable&&(a.isShiftDown()?this.selection.lead=q:a.isAltDown()?this.selection.addRange(jd.Range.at(q)):(this.selection.disableMultiSelect(),1===g?a.isShiftDown()?this.selection.lead=q:this.selection={start:q,end:q}:2===g?this.execCommand("select word",null,1,a):3===g&&this.execCommand("select line",null,1,a)),this.isFocused()&&this.ensureKeyInputHelperAtCursor())}}}},{key:"evalEnvForDoit",value:function(a){var g="lively://text-doit/"+this.id;lively.modules.module(g);return{context:a.context||
this,format:"esm",targetModule:g}}},{key:"callTextAttributeDoitFromMouseEvent",value:function(a,g){var l=this;g=(g=this.textAttributeAtPoint(g)||[],g.doit);if(!g||!g.code)return!1;var q=this.evalEnvForDoit(g),r=lively.modules.module(q.targetModule);r.recorder.evt=a;lively.vm.runEval(g.code,q).catch(function(u){return l.world().logError(Error("Error in text doit: "+u.stack))}).then(function(){return r.recorder.evt=null});return!0}},{key:"onMouseMove",value:function(a){a.leftMouseButtonPressed()&&this.selectable&&
a.state.clickedOnMorph===this&&(this.selection.lead=this.textPositionFromPoint(this.localize(a.position)))}},{key:"selectMatchingBrackets",value:function(a,g){function l(z){return"\t"===z||" "===z}function q(z,A,B,G,E){for(var K=1;(0>E?0<=G-1:G+1<z.length)&&(G+=E,z[G]==A&&A!=B&&K++,z[G]==B&&K--,0!=K););return G}function r(z,A,B,G){for(var E=A;0>B?0<=E-1:E+1<z.length;)if(E+=B,z[E]==G)return 0<B?[A,E]:[E+1,A];return 0<B?[A+1,z.length-1]:[0,A]}if(!a)return g;if(0==g||g==a.length)return[0,a.length-1];
var u=g-1;if(0<g){if("\n"==a[g-1]||"\r"==a[g-1])return r(a,g,1,a[g-1]);var v="*({[<'\"`".indexOf(a[g-1]);"*"==a[g-1]&&(0>g-2||"/"!=a[g-2])&&(v=-1);if(0<=v)return u=q(a,"*({[<'\"`"[v],"*)}]>'\"`"[v],g-1,1),[g,u-1]}if(g<a.length){if("\n"==a[g]||"\r"==a[g])return r(a,g,-1,a[g]);v="*)}]>'\"`".indexOf(a[g]);"*"==a[g]&&(g+1>=a.length||"/"!=a[g+1])&&(v=-1);if(0<=v)return g=q(a,"*)}]>'\"`"[v],"*({[<'\"`"[v],g,-1),[g+1,u]}if("/"===a[g-1]&&"/"===a[g-2]){for(;u+1<a.length&&"\n"!==a[u+1]&&"\r"!==a[u+1];)u++;
return[g,u]}v=g;for(var y=u;0<=v-1&&l(a[v-1]);)v--;for(;y<a.length&&l(a[y+1]);)y++;if(1<=y-v)return[v,y];for(v=g<a.length?a[g]:"";0<=g-1&&((a[g-1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!=a[g-1]?0:0<="0123456789".indexOf(v)));)v=a[g-1],g--;for(;u+1<a.length&&((a[u+1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!=a[u+1]?0:0<="0123456789".indexOf(v)));)v=a[u+1],u++;return[g,u]}},{key:"onContextMenu",value:function(a){var g=this;if(a.targetMorph===this){a.stop();var l=this.textPositionFromPoint(this.localize(a.position)),
q=this.selection.selections||[this.selection];if(this.selection.isEmpty()||q.every(function(r){return!r.range.containsPosition(l)}))this.cursorPosition=l;Promise.resolve(this.menuItemsForContextMenu()).then(function(r){return g.openMenu(r,a)}).catch(function(r){return $world.logError(r)})}}},{key:"onDrop",value:function(a){var g=a.hand.grabbedMorphs.filter(function(q){return q.isLayoutable});Sb._get(Object.getPrototypeOf(m.prototype),"onDrop",this).call(this,a);if(g[0]){var l=this.textPositionFromPoint(this.localize(a.hand.globalPosition));
this.insertText([g[0],null],l);g[0].opacity=a.state.originalOpacity||1}}},{key:"buildDropHoverGrid",value:function(a){var g=this;if(a.simpleDrop)return null;var l=this.whatsVisible,q=l.startRow;l=Math.min(this.documentEndPosition.row,l.endRow);var r=this.document,u=this.padding.left(),v=this.padding.top();q=jd.arr.range(q,l).reduce(function(y,z){var A=g.textLayout.charBoundsOfRow(g,z).slice();1<=A.length&&0==jd.arr.last(A).width&&(jd.arr.last(A).width=12);if(1<A.length){var B=jd.arr.last(A);A.push({x:B.x+
B.width,y:B.y,height:B.height,width:B.width||12})}A=A.map(function(G,E){G=jd.Rectangle.fromLiteral(G).translatedBy(jd.pt(u,v+r.computeVerticalOffsetOf(z)));var K=g.getGlobalTransform().transformRectToRect(G);return{textPos:{row:z,column:E},bounds:G,globalBounds:K,morph:a.showDropGrid?jd.morph({reactsToPointer:!1,acceptsDrops:!1,bounds:G,border:{width:1,color:jd.Color.green},fill:null}):null}});return y.concat(A)},[]);q.forEach(function(y){return y.morph&&g.addMorph(y.morph)});return q}},{key:"onDropHoverIn",
value:function(a){var g={simpleDrop:window.hasOwnProperty("simpleDrop")?window.simpleDrop:!0,showDropGrid:window.hasOwnProperty("showDropGrid")?window.showDropGrid:!1,useTextFlowPlaceholder:window.hasOwnProperty("useTextFlowPlaceholder")?window.useTextFlowPlaceholder:!1},l=a.hand.grabbedMorphs[0];l&&(a.state.originalOpacity=l.opacity,l.opacity=.3);l=this.buildDropHoverGrid(g);a=a.state.dropHover||(a.state.dropHover=new WeakMap);var q=a.get(this);q||(q={},a.set(this,q));q.config=g;q.dropGrid=l}},{key:"onDropHoverUpdate",
value:function(a){var g=a.hand.grabbedMorphs[0];if(g){var l=a.state.dropHover;if(l&&(l=l.get(this)))if(l.dropGrid){var q=l.config;a=a.positionIn(this);for(var r,u,v=Infinity,y=$jscomp.makeIterator(l.dropGrid),z=y.next();!z.done;z=y.next()){z=z.value;if(z.bounds.containsPoint(a)){r=z;break}var A=z.bounds.closestPointToPt(a).dist(a);A<v&&(v=A,u=z)}r||(r=u);r&&(u=l.placeholder,u||(l.placeholder=u=jd.morph({fill:g.fill,extent:g.extent,reactsToPointer:!1,acceptsDrops:!1})),jd.obj.equals(u._textPos||{},
r.textPos)||(this!==u.owner&&this.addMorph(u),u.position=r.bounds.topLeft(),q&&q.useTextFlowPlaceholder&&(u.remove(),u._textPos=r.textPos,this.insertText([u,null],r.textPos))))}else g=this.textPositionFromPoint(a.positionIn(this)),this.focus(),this.cursorPosition=g}}},{key:"onDropHoverOut",value:function(a){var g=a.hand.grabbedMorphs[0];g&&(g.opacity=a.state.originalOpacity||1);if(a=a.state.dropHover)if(g=a.get(this))a.delete(this),g.dropGrid&&(g.dropGrid.forEach(function(l){return l.morph&&l.morph.remove()}),
g.dropGrid=null),g.placeholder&&(g.placeholder.remove(),g.placeholder=null)}},{key:"menuItems",value:function(){var a=this,g,l,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return g=$jscomp,l=g.makeIterator,v.yield(Promise.all([Sb._get(Object.getPrototypeOf(m.prototype),"menuItems",a).call(a),a.menuItemsForContextMenu()]),2);q=l.call(g,v.yieldResult);r=q.next().value;u=q.next().value;return v.return(r.concat({isDivider:!0}).concat(u))})}},{key:"menuItemsForContextMenu",
value:function(){var a=this,g,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:g=[{command:"text undo",alias:"undo",target:a,showKeyShortcuts:!0},{command:"text redo",alias:"redo",target:a,showKeyShortcuts:!0},{command:"manual clipboard copy",alias:"copy",target:a,showKeyShortcuts:a.keysForCommand("clipboard copy"),args:{collapseSelection:!1,delete:!1}},{command:"manual clipboard paste",alias:"paste",target:a,showKeyShortcuts:a.keysForCommand("clipboard paste")},
{command:"open text attribute controls",alias:"edit text attributes",target:a},{isDivider:!0},{command:"toggle line wrapping",alias:(a.lineWrapping?"disable":"enable")+" line wrapping",target:a,showKeyShortcuts:!0},["run command",function(){a.focus();a.world().execCommand("run command")}]],l=$jscomp.makeIterator(a.plugins),q=l.next();case 2:if(q.done){u.jumpTo(4);break}r=q.value;if("function"!==typeof r.getMenuItems){u.jumpTo(3);break}return u.yield(r.getMenuItems(g),6);case 6:g=u.yieldResult;case 3:q=
l.next();u.jumpTo(2);break;case 4:return u.return(g)}})}},{key:"keybindings",get:function(){var a=this.world();a=a&&a.getCurrentUser()&&a.getCurrentUser().config&&a.getCurrentUser().config.textKeyBindings||[];a=Sb._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat(a).concat(jd.config.text.defaultKeyBindings);return this.pluginCollect("getKeyBindings",a)}},{key:"keybindings",set:function(a){Sb._set(Object.getPrototypeOf(m.prototype),"keybindings",a,this)}},{key:"keyhandlers",get:function(){if(this._cachedKeyhandlers)return this._cachedKeyhandlers;
var a=Sb._get(Object.getPrototypeOf(m.prototype),"keyhandlers",this).concat(this._keyhandlers||[]);return this._cachedKeyhandlers=a=this.pluginCollect("getKeyHandlers",a)}},{key:"snippets",get:function(){return this.pluginCollect("getSnippets",[])}},{key:"onHoverIn",value:function(a){this.scrollActive=!0;this.makeDirty()}},{key:"onHoverOut",value:function(a){jd.touchInputDevice||(this.scrollActive=!1,this.makeDirty())}},{key:"onKeyDown",value:function(a){this.compositionRange||a.targetMorph!=this||
(this.selection.cursorBlinkStart(),jd.KeyHandler.invokeKeyHandlers(this,a,!0))}},{key:"onTextInput",value:function(a){jd.KeyHandler.invokeKeyHandlers(this,a,!1)}},{key:"onCompositionStart",value:function(a){this.insertTextAndSelect(a.data);this.compositionRange=this.selection.range}},{key:"onCompositionUpdate",value:function(a){this.selection.range=this.compositionRange;this.selection.text=[a.data,{textDecoration:"underline"}];this.compositionRange=this.selection.range}},{key:"onCompositionEnd",value:function(a){this.selection.range=
this.compositionRange;this.selection.text=a.data;this.cursorPosition=this.compositionRange.end;this.compositionRange=null}},{key:"onCut",value:function(a){if(!this.rejectsInput()&&this.isFocused()&&!jd.config.emacs)this.onCopy(a,!this.rejectsInput())}},{key:"onCopy",value:function(a,g){g=void 0===g?!1:g;if(this.isFocused()){a.stop();var l=this.selection;try{for(var q=this.textAndAttributesInRange(this.selection.range),r=this.defaultTextStyle,u={},v=0;v<q.length;v+=2){var y=q[v];if(y.isMorph)if(y.isDisplacementMorph)q[v]=
"";else{var z=u[v]=jd.serializeMorph(q[v]);q[v]=jd.deserializeMorph(z,{reinitializeIds:!0})}}var A=jd.extractHTMLFromTextMorph(this,q);a.domEvt.clipboardData.setData("text/html",A);for(var B in u)q[B]=u[B];var G=JSON.stringify({textAndAttributes:q,defaultTextStyle:r});a.domEvt.clipboardData.setData("application/x-lively-text",G)}catch(E){$world.logError(E)}a.domEvt.clipboardData.setData("text/plain",l.text);this.execCommand("manual clipboard copy",{collapseSelection:jd.config.codeEditor.collapseSelection||
!1,delete:g,dontTryNativeClipboard:!0})}}},{key:"onPaste",value:function(a){var g=this;if(!this.rejectsInput()){a.stop();var l="";try{l=a.domEvt.clipboardData.getData("text")}catch(v){console.warn(v)}if(!this.editorPlugin)try{var q=a.domEvt.clipboardData.getData("application/x-lively-text");var r=q&&JSON.parse(q);var u=r.textAndAttributes;for(a=0;a<u.length;a+=2)"string"!==typeof u[a]&&(u[a]=jd.deserializeMorph(u[a],{reinitializeIds:!0}))}catch(v){console.warn(v)}u=this.selection;u=u.isMultiSelection?
u.selections:[u];r&&this.undoManager.group();u.forEach(function(v){r?g.replace(v.range,r.textAndAttributes,!1,!0,!0):v.text=l;g.saveMark(v.start);v.collapseToEnd()});r&&this.undoManager.group()}}},{key:"onFocus",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onFocus",this).call(this,a);this.makeDirty();this.selection.cursorBlinkStart();this._originalShadow||((a=this.haloShadow||this.propertiesAndPropertySettings().properties.haloShadow.defaultValue)&&!a.equals&&(a=new jd.ShadowObject(a)),
a&&!a.equals(this.dropShadow)&&(this._originalShadow=this.dropShadow),this.highlightWhenFocused&&this.animate({dropShadow:a,duration:200}))}},{key:"onBlur",value:function(a){this.makeDirty();this.selection.cursorBlinkStop();this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});this._originalShadow=null;Sb._get(Object.getPrototypeOf(m.prototype),"onBlur",this).call(this,a)}},{key:"onScroll",value:function(a){this.isFocused()&&this.ensureKeyInputHelperAtCursor();
(a=this.env.renderer.getNodeForMorph(this))&&jd.signal(this,"viewChanged",{prop:"scroll",value:jd.pt(a.scrollLeft,a.scrollTop)})}},{key:"ensureKeyInputHelperAtCursor",value:function(){this.env.eventDispatcher.keyInputHelper&&this.env.eventDispatcher.keyInputHelper.ensureBeingAtCursorOfText(this)}},{key:"textPageHeight",value:function(){var a=this.padding,g=this.borderWidthBottom,l=this.borderWidthTop;return this.height-a.top()-a.bottom()-g-l}},{key:"scrollPageDown",value:function(){this.scrollDown(this.textPageHeight())}},
{key:"scrollPageUp",value:function(){this.scrollUp(this.textPageHeight())}},{key:"pageUpOrDown",value:function(a){var g=a=void 0===a?{direction:"up",select:!1}:a;a=g.direction;g=g.select;var l=this.textLayout["down"===a?"lastFullVisibleLine":"firstFullVisibleLine"](this),q=this.cursorPosition.column,r=this.padding;g?this.selection.lead={row:l,column:q}:this.cursorPosition={row:l,column:q};"down"===a?this.alignRowAtTop(l,jd.pt(0,-r.top()-r.bottom())):(this.alignRowAtBottom(l,jd.pt(0,0)),this.alignRowAtBottom(l,
jd.pt(0,r.top()+r.bottom())))}},{key:"gotoDocumentStart",value:function(a){a=void 0===a?{select:!1}:a;this.selection.lead={row:0,column:0};a&&a.select||(this.selection.anchor=this.selection.lead)}},{key:"gotoDocumentEnd",value:function(a){a=void 0===a?{select:!1}:a;this.selection.lead=this.documentEndPosition;a&&a.select||(this.selection.anchor=this.selection.lead)}},{key:"paragraphRangeAbove",value:function(a){if(this.isLineEmpty(a)){for(var g=a-1;0<=g;g--)if(!this.isLineEmpty(g)){var l=g;break}if(void 0===
l)return{start:{row:a,column:0},end:{row:a,column:0}}}else l=a;return this.paragraphRange(l)}},{key:"paragraphRangeBelow",value:function(a){var g=this.isLineEmpty(a),l=this.documentEndPosition;if(g){for(g=a+1;g<=l.row;g++)if(!this.isLineEmpty(g)){var q=g;break}if(void 0===q)return{start:{row:a,column:0},end:{row:a,column:0}}}else q=a;return this.paragraphRange(q)}},{key:"paragraphRange",value:function(a){if(this.isLineEmpty(a))return{start:{row:a,column:0},end:{row:a,column:0}};var g=this.documentEndPosition;
for(a+=1;a<=g.row;a++)if(this.isLineEmpty(a)){var l={row:a-1,column:this.getLine(a-1).length};break}l||(l=g);for(a=l.row-1;0<=a;a--)if(this.isLineEmpty(a)){var q={row:a+1,column:0};break}q||(q={row:0,column:0});return{start:q,end:l}}},{key:"astNodeRange",value:function(a){return{start:this.document.indexToPosition(a.start),end:this.document.indexToPosition(a.end)}}},{key:"parseIntoLines",value:function(a){return a.split("\n")}},{key:"computeTextRangeForChanges",value:function(a){function g(v,y){for(var z=
"",A=0;A<v.length;A+=2)z+="string"===typeof v[A]?v[A]:jd.objectReplacementChar;v=q.parseIntoLines(z);return 1===v.length?jd.Range.fromPositions(y,{row:y.row,column:y.column+v[0].length}):1<v.length?jd.Range.fromPositions(y,{row:y.row+v.length-1,column:jd.arr.last(v).length}):jd.Range.at(y)}var l=jd.Range.at(this.cursorPosition);if(!a.length)return l;var q=this,r=a[0];l="replace"===r.selector?g(r.args[1],r.args[0].start):l;for(r=1;r<a.length;r++){var u=a[r];l="replace"===u.selector?l.merge(g(u.args[1],
u.args[0].start)):l}return l}},{key:"ensureUndoManager",value:function(){if(this.undoManager)return this.undoManager;var a=["addTextAttribute","removeTextAttribute","setStyleInRange","replace"];return this.undoManager=new jd.UndoManager(function(g){return a.includes(g.selector)})}},{key:"textUndo",value:function(){var a=this.undoManager.undo();a&&(a=a.changes.slice().reverse().map(function(g){return g.undo}),this.selection=this.computeTextRangeForChanges(a))}},{key:"textRedo",value:function(){var a=
this.undoManager.redo();a&&(a=a.changes.slice(),this.selection=this.computeTextRangeForChanges(a))}},{key:"findMatchingForward",value:function(a,g,l){g=void 0===g?"right":g;l=void 0===l?{}:l;var q=this["right"===g?"charRight":"charLeft"](a),r=l[q];if(!r)return null;var u="right"===g?-1:0;return this.document.scanForward(a,function(v,y){if(v===r){if(0===u)return"right"===g?{row:y.row,column:y.column+1}:y;u--}else v===q&&u++;return null})}},{key:"findMatchingBackward",value:function(a,g,l){g=void 0===
g?"right":g;l=void 0===l?{}:l;var q=this["right"===g?"charRight":"charLeft"](a),r=l[q];if(!r)return null;var u="left"===g?-1:0;return this.document.scanBackward(a,function(v,y){if(v===r){if(0===u)return"right"===g?{row:y.row,column:y.column+1}:y;u--}else v===q&&u++;return null})}},{key:"search",value:function(a,g){g=void 0===g?{start:this.cursorPosition,backwards:!1,caseSensitive:!1}:g;return(new jd.TextSearcher(this)).search(Object.assign({needle:a},g))}},{key:"searchForAll",value:function(a,g){g=
void 0===g?{caseSensitive:!1}:g;return(new jd.TextSearcher(this)).searchForAll(Object.assign({needle:a},g))}},{key:"tokenAt",value:function(a){return this.pluginInvokeFirst("tokenAt",a)}},{key:"astAt",value:function(a){return this.pluginInvokeFirst("astAt",a)}},{key:"evalEnvironment",get:function(){var a=this.editorPlugin;return a&&a.evalEnvironment}},{key:"evalEnvironment",set:function(a){var g=this.editorPlugin;g&&(g.evalEnvironment=a)}},{key:"doitContext",get:function(){return(this.evalEnvironment||
{}).context}},{key:"doitContext",set:function(a){(this.evalEnvironment||{}).context=a}},{key:"logDoit",value:function(a,g){g=void 0===g?{}:g;g=void 0===g.time?Date.now():g.time;if(!(12E4<a.length)){try{var l=JSON.parse(localStorage["lively.next-js-ide-doitlog"])}catch(q){}l||(l=[]);if(!l.some(function(q){return"string"===typeof q?q===a:q.source===a})){l.push({source:a,time:g});50<l.length&&(l=l.slice(-50));try{localStorage["lively.next-js-ide-doitlog"]=JSON.stringify(l)}catch(q){}}}}},{key:"doEval",
value:function(a,g,l){a=void 0===a?this.selection.isEmpty()?this.lineRange():this.selection.range:a;l=void 0===l?this.textInRange(a):l;a=this.pluginFind(function(q){return q.isEditorPlugin&&"function"===typeof q.runEval});if(!a)throw Error("doit not possible: cannot find js editor plugin of !"+this);g&&g.logDoit&&this.logDoit(l,g);return a.runEval(l,g)}},{key:"maybeSelectCommentOrLine",value:function(){var a=this.selection,g=a.lead,l=g.row;g=g.column;var q=this.selectionOrLineString();if(a.isEmpty()){var r=
q.indexOf("//");-1===r||g<r||0<r&&0<=":\"'".indexOf(q[r-1])?this.selectLine(l):a.range={start:{row:l,column:r+2},end:{row:l,column:q.length}}}}},{key:"debugHelper",value:function(a){a=Object.assign({debugDocumentUpdate:!0,debugTextLayout:!0},a);return this._debugHelper?Object.assign(this._debugHelper,a):this._debugHelper=Object.assign({},a,{logged:[],groups:[],reset:function(){this.groups=[[]];this.logged=this.groups[0]},log:function(g){for(var l=[],q=0;q<arguments.length;++q)l[q-0]=arguments[q];
console.log.apply(console,$jscomp.arrayFromIterable(l));this.logged.push({args:l})},dump:function(g){console.log(g.split("\n").map(function(l){return l.slice(0,100)}).join("\n"));this.logged.push({dump:g})},group:function(g){this.groups.push([]);this.logged=jd.arr.last(this.groups);console.group(g)},groupEnd:function(g){console.groupEnd(g)},steps:function(g){for(var l=[];g.length;){var q=jd.arr.takeWhile(g,function(u){return!u.dump});g=g.slice(q.length);var r=(g.shift()||{}).dump;l.push({actions:q,
dump:r})}return l},printToConsole:function(){var g=this;console.clear();this.groups.forEach(function(l){var q=g.steps(l);console.group(q.length);g.steps(l).forEach(function(r,u){r=r.actions;console.group("step "+(u+1));r.forEach(function(v){return console.log.apply(console,$jscomp.arrayFromIterable(v.args))});console.groupEnd("step "+(u+1))});console.groupEnd(q.length)})},report:function(){var g=this,l,q,r,u,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(System.import("jsdiff",
System.decanonicalize("lively.morphic")),2);if(3!=A.nextAddress)return l=A.yieldResult,A.yield(System.import("lively.ide/diff/editor-plugin.js"),3);q=A.yieldResult;r=q.default;u=0;v="";y=[];z=0;g.groups.forEach(function(B,G){v+=">>> group "+(G+1)+"\n";z++;u++;var E=g.steps(B);E.forEach(function(K,J){var P=K.actions;K=K.dump;v+=jd.string.indent(">>> step "+(J+1)," ",u)+"\n";z++;u++;P.forEach(function(ea){ea=jd.string.indent(jd.string.formatFromArray(ea.args.slice()).trim()," ",u);z+=ea.split("\n").length;
v+=ea+"\n"});1<=J&&K&&E[J-1].dump&&(P=new r,K=l.createPatch(String(J),E[J-1].dump,K),P.tokenize(K),y.push.apply(y,$jscomp.arrayFromIterable(P.styledRanges(z,u))),v+=K,z+=K.split("\n").length-1);v+=jd.string.indent("<< step "+(J+1)," ",u)+"\n";z++;u--});v+="<<< group "+(G+1)+"\n";z++;u--});return A.return({report:v,reportStyles:y})})},openReport:function(){var g=this,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(g.report(),2);l=u.yieldResult;
q=l.reportStyles;r=l.report;return u.return($world.execCommand("open text window",{title:"text debug",fontFamily:"monospace",content:r,rangesAndStyles:q}))})}})}},{key:"consistencyCheck",value:function(){if(this.debug)return this.document.consistencyCheck();try{return this.document.consistencyCheck()}catch(q){var a=this.document;this.brokenDocument||(this.brokenDocument=a);var g=this.world()||$world;try{var l=new jd.Document([]);l.textAndAttributes=a.textAndAttributes;this.changeDocument(l)}catch(r){g?
g.logError("Broken document could not be fixed"):console.error("Broken document could not be fixed")}g?g.logError(q):console.error(q)}}}],[{key:"className",get:function(){return"Text"}},{key:"makeLabel",value:function(a,g){return new jd.morph(Object.assign({type:"label",value:a,fontFamily:"IBM Plex, Helvetica Neue, Arial, sans-serif",fontColor:jd.Color.almostBlack,fontSize:11},g))}},{key:"makeInputLine",value:function(a){return new (System.get(System.decanonicalize("lively.morphic")).InputLine)(a)}},
{key:"defaultTextStyle",get:function(){if(this._defaultTextStyle)return this._defaultTextStyle;for(var a=this.prototype.propertiesAndPropertySettings().properties,g=this.defaultTextStyleProps,l={},q=0;q<g.length;q++){var r=g[q];l[r]=a[r].defaultValue}return this._defaultTextStyle=l}},{key:"defaultTextStyleProps",get:function(){if(this._defaultTextStyleProps)return this._defaultTextStyleProps;var a=this.prototype.propertiesAndPropertySettings().properties,g=[],l;for(l in a)a[l].isDefaultTextStyleProp&&
g.push(l);return this._defaultTextStyleProps=g}},{key:"properties",get:function(){return{clipMode:{isStyleProp:!0,defaultValue:"visible",set:function(a){this.setProperty("clipMode",a);this.fixedWidth=this.fixedHeight=this.isClip()}},fontMetric:{group:"_rendering",serialize:!1,get:function(){return this.getProperty("fontMetric")||this.env.fontMetric}},undoManager:{group:"core",before:["document"],initialize:function(){this.ensureUndoManager()}},textRenderer:{group:"_rendering",after:["viewState"],
initialize:function(){this.textRenderer=new jd.Renderer(this.env.domEnv)}},debug:{group:"_debugging",isStyleProp:!0,after:["textRenderer","textLayout"],defaultValue:!1,doc:"For visualizing and debugging text layout and rendering"},defaultViewState:{group:"_rendering",derived:!0,readOnly:!0,get:function(){return{_needsFit:!0,text_layer_node:null,fontmetric_text_layer_node:null,dom_nodes:[],dom_nodeFirstRow:[],scrollTop:0,scrollHeight:0,scrollBottom:0,textHeight:0,textWidth:0,firstVisibleRow:0,lastVisibleRow:0,
heightBefore:0,wasScrolled:!1,afterTextRenderHook:null,fastScroll:!0}}},viewState:{group:"_rendering",initialize:function(){this.viewState=this.defaultViewState}},displacingMorphMap:{group:"_rendering",initialize:function(){this.displacingMorphMap=new Map}},embeddedMorphMap:{group:"_rendering",initialize:function(){this.embeddedMorphMap=new Map}},embeddedMorphs:{group:"text",derived:!0,readOnly:!0,after:["embeddedMorphMap"],get:function(){return this.embeddedMorphMap?Array.from(this.embeddedMorphMap.keys()):
[]}},textLayout:{group:"_rendering",after:["textRenderer"],initialize:function(){this.textLayout=new jd.TextLayout(this)}},document:{group:"text",initialize:function(){this.document=jd.Document.fromString("",{maxLeafSize:50,minLeafSize:25,maxNodeSize:35,minNodeSize:7});this.consistencyCheck()}},draggable:{defaultValue:!1},useSoftTabs:{group:"text",isStyleProp:!0,defaultValue:void 0!==jd.config.text.useSoftTabs?jd.config.text.useSoftTabs:!0},tabWidth:{group:"text",isStyleProp:!0,defaultValue:jd.config.text.tabWidth||
2},tab:{group:"text",after:["useSoftTabs","tabWidth"],readOnly:!0,derived:!0,get:function(){return this.useSoftTabs?" ".repeat(this.tabWidth):"\t"}},autoInsertPairs:{group:"text",defaultValue:!0},extent:{get:function(){var a=this,g=this.getProperty("extent");!this._textChange&&this.viewState&&this.viewState._needsFit&&!this._rendering&&!this._measuringTextBox&&g&&this.owner&&(this._measuringTextBox=!0,jd.noUpdate(function(){a.directRender()}),this._measuringTextBox=!1);return this.getProperty("extent")}},
fixedWidth:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},fixedHeight:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},readOnly:{group:"text",isStyleProp:!0,defaultValue:!1,set:function(a){this.nativeCursor=a?"default":"auto";this.setProperty("readOnly",a)}},selectable:{group:"selection",isStyleProp:!0,after:["selection"],defaultValue:!0,set:function(a){this.setProperty("selectable",a);a||this.selection.collapse()}},padding:{group:"styling",
type:"Rectangle",isStyleProp:!0,after:["textLayout","viewState"],defaultValue:jd.Rectangle.inset(0),set:function(a){this.setProperty("padding","number"===typeof a?jd.Rectangle.inset(a):a)}},haloShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null},highlightWhenFocused:{group:"styling",defaultValue:!1,after:["haloShadow"],set:function(a){this.setProperty("highlightWhenFocused",a);a&&!this.haloShadow&&(this.haloShadow={blur:6,color:jd.Color.rgb(52,152,219),distance:0,rotation:45})}},
cursorPosition:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.lead},set:function(a){this.selection.range={start:a,end:a}}},selection:{group:"selection",derived:!0,after:["document","anchors"],get:function(){var a=this.getProperty("selection");if(a)return a;a=new (jd.config.text.useMultiSelect?jd.MultiSelection:jd.Selection)(this);this.setProperty("selection",a);return a},set:function(a){this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,
this);a?a.isSelection?this.setProperty("selection",a):this.selection.range=a:(this.selection.isMultiSelection&&this.selection.disableMultiSelect(),this.selection.collapse())}},selections:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.isMultiSelection?this.selection.selections:[this.selection]},set:function(a){var g=this;this.selection=a[0];this.selection.isMultiSelection&&a.slice(1).forEach(function(l){return g.selection.addRange(l)})}},textString:{group:"text",
after:["document"],derived:!0,get:function(){return this.document?this.document.textString:""},set:function(a){a=null!=a?String(a):"";this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);this.deleteText({start:{column:0,row:0},end:this.document.endPosition});this.insertText(a,{column:0,row:0})}},value:{group:"text",after:["document","embeddedMorphMap"],derived:!0,get:function(){var a=this.textAndAttributes;if(1===a.length){var g=$jscomp.makeIterator(a[0]),
l=g.next().value;g=g.next().value;if(!Object.keys(g||{}).length)return l}return a},set:function(a){"string"===typeof a?this.textString=a:this.textAndAttributes=a}},textAndAttributes:{group:"text",derived:!0,after:["document"],get:function(){return this.document.textAndAttributes},set:function(a){this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);this.replace({start:{row:0,column:0},end:this.documentEndPosition},a)}},defaultTextStyleProps:{group:"_internal",
readOnly:!0,derived:!0,get:function(){return this.constructor.defaultTextStyleProps}},defaultTextStyle:{group:"styling",after:["viewState"],derived:!0,get:function(){return jd.obj.select(this,this.defaultTextStyleProps)},set:function(a){Object.assign(this,a)}},customizedTextStyle:{group:"styling",readOnly:!0,derived:!0,get:function(){for(var a={},g=this.defaultTextStyleProps,l=this.constructor.defaultTextStyle,q=0;q<g.length;q++){var r=g[q],u=this[r];u!==l[r]&&(a[r]=u)}return a}},nativeCursor:{defaultValue:"",
isDefaultTextStyleProp:!0},fontFamily:{group:"text styling",type:"Enum",values:jd.config.text.basicFontItems,defaultValue:"IBM Plex Sans, Sans-Serif",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontSize:{group:"text styling",type:"Number",min:1,unit:"pt",defaultValue:12,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},selectionColor:{group:"text styling",type:"Color",defaultValue:jd.Color.rgba(212,230,241,.8),isStyleProp:!0,after:["defaultTextStyle"]},
cursorColor:{group:"text styling",type:"Color",isStyleProp:!0,after:["defaultTextStyle"],defaultValue:jd.Color.black},fontColor:{group:"text styling",type:"Color",defaultValue:jd.Color.black,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontWeight:{group:"text styling",type:"Enum",values:["bold","bolder","light","lighter","normal"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontStyle:{group:"text styling",type:"Enum",values:["normal",
"italic","oblique"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textDecoration:{group:"text styling",type:"Enum",values:["none","underline"],defaultValue:"none",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textStyleClasses:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},backgroundColor:{group:"text styling",type:"Color",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},
textAlign:{group:"text styling",type:"Enum",values:["center","justify","left","right"],isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineHeight:{group:"text styling",type:"Number",min:1,isFloat:!0,isStyleProp:!0,isDefaultTextStyleProp:!0,defaultValue:1.4,after:["document","defaultTextStyle","viewState"]},letterSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},wordSpacing:{group:"text styling",
isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineWrapping:{group:"text",type:"Enum",values:[!1,!0,"by-words","anywhere","only-by-words","wider","by-chars"],isStyleProp:!0,defaultValue:!1,after:["document","viewState"]},anchors:{group:"core",defaultValue:[],set:function(a){var g=this,l=jd.arr.withoutAll(a,this.anchors);jd.arr.withoutAll(this.anchors,a).forEach(function(q){return g.removeAnchor(q)});l.forEach(function(q){return g.addAnchor(q)})}},markers:{group:"core",
defaultValue:[]},savedMarks:{group:"core",defaultValue:[],after:["anchors"],set:function(a){var g=this;a=a.map(function(q){return q.isAnchor?q:g.addAnchor(Object.assign({},q,{id:"saved-mark-"+jd.string.newUUID()}))});var l=this.savedMarks.filter(function(q){return!a.includes(q)});a>jd.config.text.markStackSize&&l.push.apply(l,$jscomp.arrayFromIterable(a.splice(0,a.length-jd.config.text.markStackSize)));l.map(function(q){return g.removeAnchor(q)});return this.setProperty("savedMarks",a)}},activeMarkPosition:{group:"_internal",
after:["activeMark"],derived:!0,get:function(){var a=this.activeMark;return a?a.position:null}},activeMark:{group:"core",after:["anchors"],set:function(a){if(a)a=this.addAnchor(a.isAnchor?a:Object.assign({},a,{id:"saved-mark-"+jd.string.newUUID()}));else{var g=this.activeMark;this.savedMarks.includes(g)||this.removeAnchor(g)}this.setProperty("activeMark",a)}},plugins:{group:"plugins",defaultValue:[],after:["value"],set:function(a){var g=this,l=this.getProperty("plugins");jd.arr.withoutAll(l,a).forEach(function(q){return q&&
g.removePlugin(q)});a.forEach(function(q){return q&&g.addPlugin(q)})}},editorModeName:{group:"plugins",derived:!0,after:["plugins"],get:function(){var a=this.editorPlugin;return a?a.shortName:null},set:function(a){this.changeEditorMode(a)}}}}}],e,{pathInPackage:function(){return"text/morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:1301,end:112456})}(jd.Morph));jd.Text=rr;jd.Text=rr;jd.Text=rr;var Qka=Object.freeze({__proto__:null,Text:rr}),lh=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js");lh.obj=Pf;lh.promise=yg;lh.arr=vf;lh.string=vh;lh.properties=$m;lh.Rectangle=ee;lh.Color=Wf;lh.signal=tl;lh.vdom=oD;lh.Morph=nk;lh.config=wk;lh.defaultStyle=Zt;lh.defaultAttributes=Av;lh.Icon=sn;lh.Icons=ZH;lh.splitTextAndAttributesIntoLines=LC;lh.h=lh.vdom.h;var sr=sa("av",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js"),
m=e.hasOwnProperty("Label")&&"function"===typeof e.Label?e.Label:e.Label=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=a=void 0===a?{}:a,l=g.fontMetric,q=g.position,r=g.rightCenter,u=g.leftCenter,v=g.topCenter,y=g.bottom,z=g.top,A=g.right,B=g.left,G=g.bottomCenter,E=g.bottomLeft,K=g.bottomRight,J=g.topRight,P=g.topLeft,ea=g.center;g=
g.extent;Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,lh.obj.dissoc(a,["fontMetric"]));l&&(this._fontMetric=l);this._cachedTextBounds=null;this.fit();void 0!==g&&(this.extent=g);void 0!==q&&(this.position=q);void 0!==r&&(this.rightCenter=r);void 0!==u&&(this.leftCenter=u);void 0!==v&&(this.topCenter=v);void 0!==y&&(this.bottom=y);void 0!==z&&(this.top=z);void 0!==A&&(this.right=A);void 0!==B&&(this.left=B);void 0!==G&&(this.bottomCenter=G);void 0!==
E&&(this.bottomLeft=E);void 0!==K&&(this.bottomRight=K);void 0!==J&&(this.topRight=J);void 0!==P&&(this.topLeft=P);void 0!==ea&&(this.center=ea)}},{key:"__additionally_serialize__",value:function(a,g,l,q){Sb._get(Object.getPrototypeOf(m.prototype),"__additionally_serialize__",this).call(this,a,g,l,q);this.fit();a._cachedTextBounds=this._cachedTextBounds&&this._cachedTextBounds.toTuple()}},{key:"__after_deserialize__",value:function(a,g){Sb._get(Object.getPrototypeOf(m.prototype),"__after_deserialize__",
this).call(this,a,g);a._cachedTextBounds&&(this.changeMetaData("deserializeInfo",{recoveredTextBounds:!0}),this._cachedTextBounds=lh.Rectangle.fromTuple(a._cachedTextBounds))}},{key:"isLabel",get:function(){return!0}},{key:"textStyle",get:function(){return lh.obj.select(this,"textStyleClasses textDecoration fontStyle fontWeight textShadow fontColor fontSize fontFamily".split(" "))}},{key:"fit",value:function(){this.extent=this.textBounds().extent();this.visible?this._needsFit=!1:this._cachedTextBounds=
null;return this}},{key:"fitIfNeeded",value:function(){this._needsFit&&this.allFontsLoaded()&&this.fit()}},{key:"textAndAttributesOfLines",get:function(){return lh.splitTextAndAttributesIntoLines(this.textAndAttributes,"\n")}},{key:"allFontsLoaded",value:function(){var a=this,g=this.env.fontMetric;return[this].concat($jscomp.arrayFromIterable(this.textAndAttributes.map(function(l,q){if(q%2)return{fontFamily:l&&l.fontFamily||a.fontFamily,fontWeight:l&&l.fontWeight||a.fontWeight}}).filter(Boolean))).every(function(l){return g.isFontSupported(l.fontFamily,
l.fontWeight)})}},{key:"whenFontLoaded",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return g.return(lh.promise.waitFor(5E3,function(){return a.allFontsLoaded()}))})}},{key:"textBoundsSingleChunk",value:function(){var a=this._fontMetric||this.env.fontMetric,g=$jscomp.makeIterator(this.textAndAttributes),l=g.next().value;g=g.next().value;var q=Object.assign({},this.textStyle,{},g);g=this.padding;a.isProportional(q.fontFamily)?(a=a.sizeFor(q,l),l=a.width,
a=a.height):(q=a.sizeFor(q,"x"),a=q.height,l=l.length*q.width);return new lh.Rectangle(0,0,Math.ceil(g.left()+g.right()+l),Math.ceil(g.top()+g.bottom()+a))}},{key:"textBoundsAllChunks",value:function(){for(var a=this._fontMetric||this.env.fontMetric,g=this.padding,l=this.textStyle,q=this.textAndAttributesOfLines,r=!a.isProportional(l.fontFamily),u=a.sizeFor(l,"x").height,v=0,y=0,z=0;z<q.length;z++){var A=q[z];if(A.length){for(var B=0,G=0,E=0;E<A.length;E+=2){var K=A[E],J=A[E+1]||{},P=Object.assign({},
l,{},J);r&&!J.fontFamily||!a.isProportional(P.fontFamily)?(J=a.sizeFor(P,"x"),P=J.height,G+=K.length*J.width,B=Math.max(B,P)):(K=a.sizeFor(P,K),J=K.height,G+=K.width,B=Math.max(B,J))}v+=B;y=Math.max(y,G)}else v+=u}return new lh.Rectangle(0,0,Math.ceil(g.left()+g.right()+y),Math.ceil(g.top()+g.bottom()+v))}},{key:"invalidateTextLayout",value:function(){this._cachedTextBounds=null;this.autofit&&(this._needsFit=!0);this.makeDirty()}},{key:"textBounds",value:function(){var a=this.textAndAttributes,g=
this._cachedTextBounds;return g?g:this._cachedTextBounds=2>=a.length?this.textBoundsSingleChunk():this.textBoundsAllChunks()}},{key:"forceRerender",value:function(){this._cachedTextBounds=null;this.makeDirty()}},{key:"applyLayoutIfNeeded",value:function(){this.fitIfNeeded();Sb._get(Object.getPrototypeOf(m.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);for(var g=
[],l=this.textAndAttributesOfLines.length,q=0;q<l;q++){for(var r=this.textAndAttributesOfLines[q],u=0;u<r.length;u+=2){var v=r[u+1];g.push(this.renderChunk(r[u],v))}q<l-1&&g.push(lh.h("br"))}v=this.textStyle;var y=v.fontColor,z=v.fontSize;l=v.fontStyle;q=v.fontWeight;r=v.textShadow;u=v.textDecoration;var A=v.textStyleClasses,B=this.padding;v={fontFamily:v.fontFamily,fontSize:"number"===typeof z?z+"px":z,color:y?String(y):"transparent",position:"absolute",cursor:this.nativeCursor};y=lh.defaultAttributes(this,
a);r&&(v.textShadow=r);"normal"!==q&&(v.fontWeight=q);"normal"!==l&&(v.fontStyle=l);"none"!==u&&(v.textDecoration=u);A&&A.length&&(y.className=(y.className||"")+" "+A.join(" "));y.style=Object.assign({},lh.defaultStyle(this),{},v);return lh.h("div",y,[lh.h("div",{style:{pointerEvents:"none",position:"absolute",paddingLeft:B.left()+"px",paddingRight:B.right()+"px",paddingTop:B.top()+"px",paddingBottom:B.bottom()+"px",width:"calc(100% - "+B.left()+"px - "+B.right()+"px)"}},g),a.renderSubmorphs(this)])}},
{key:"renderChunk",value:function(a,g){var l=g=g||{},q=l.backgroundColor,r=l.fontColor,u=l.fontFamily,v=l.fontStyle,y=l.fontWeight,z=l.textShadow,A=l.textDecoration,B=l.textStyleClasses,G=l.textAlign,E=l.float,K=l.display,J=l.lineHeight,P=l.opacity;l={};var ea={style:l};E&&(l.float=E);K&&(l.display=K);q&&(l.backgroundColor=String(q));u&&(l.fontFamily=u);r&&(l.color=String(r));z&&(l.textShadow=z);"normal"!==y&&(l.fontWeight=y);"normal"!==v&&(l.fontStyle=v);"none"!==A&&(l.textDecoration=A);G&&(l.textAlign=
G);J&&(l.lineHeight=J);P&&(l.opacity=P);B&&B.length&&(ea.className=B.join(" "));q="fontSize width height maxWidth maxHeight top left padding paddingLeft paddingRight paddingBottom paddingTop marginTop marginRight marginLeft marginBottom".split(" ");for(r=0;r<q.length;r++)u=q[r],g.hasOwnProperty(u)&&(v=g[u],l[u]="number"===typeof v?v+"px":v);return lh.h("span",ea,a)}},{key:"interactivelyChangeLabel",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return l.yield(a.world().prompt("edit label",{input:a.textString,historyId:"lively.morphic-label-edit-hist"}),2);g=l.yieldResult;"string"===typeof g&&(a.textString=g);l.jumpToEnd()})}},{key:"menuItems",value:function(){var a=this,g=Sb._get(Object.getPrototypeOf(m.prototype),"menuItems",this).call(this);g.unshift({isDivider:!0});g.unshift(["change label",function(){return a.interactivelyChangeLabel()}]);return g}}],[{key:"className",get:function(){return"Label"}},{key:"properties",get:function(){return{fill:{defaultValue:lh.Color.transparent},
draggable:{defaultValue:!1},nativeCursor:{defaultValue:"default"},isIcon:{derived:!0,get:function(){return lh.properties.values(lh.Icons).map(function(a){return a.code}).includes(this.textString)}},value:{derived:!0,after:["textAndAttributes","textString"],get:function(){var a=this.textAndAttributes;if(2>=a.length){var g=$jscomp.makeIterator(a),l=g.next().value;g=g.next().value;if(!Object.keys(g||{}).length)return l||""}return a},set:function(a){"string"===typeof a?this.textString=a:this.textAndAttributes=
a}},textString:{derived:!0,after:["textAndAttributes"],get:function(){return this.textAndAttributes.map(function(a,g){return 0==g%2?a:""}).join("")},set:function(a){this.textAndAttributes=[a,null]}},textAndAttributes:{get:function(){var a=this.getProperty("textAndAttributes");if(!a||1>a.length)a=["",null];return a},set:function(a){Array.isArray(a)||(a=[String(a),{}]);0===a.length&&(a=["",{}]);this.setProperty("textAndAttributes",a);this.autofit&&this.invalidateTextLayout();lh.signal(this,"value",
a)}},valueAndAnnotation:{derived:!0,after:["textAndAttributes"],get:function(){var a=this.textAndAttributes,g=null;if(2<a.length){var l=$jscomp.makeIterator(a.slice(-2)),q=l.next().value;(l=l.next().value)&&l.textStyleClasses&&l.textStyleClasses.includes("annotation")&&(a=a.slice(0,-2),g=[q,l])}return{value:a,annotation:g}},set:function(a){var g=a.value;a=a.annotation;g||(g="");"string"===typeof g&&(g=[g,null]);Array.isArray(g)||(g=[String(g),null]);g=g.slice();if(a){"string"===typeof a&&(a=[a,null]);
var l=a[1];l||(l=a[1]={});g.push.apply(g,$jscomp.arrayFromIterable(a));l.textStyleClasses=(l.textStyleClasses||[]).concat("annotation");l.textStyleClasses.includes("annotation")||l.textStyleClasses.push("annotation")}this.textAndAttributes=g}},autofit:{defaultValue:!0,set:function(a){this.setProperty("autofit",a);a&&(this._needsFit=!0)}},padding:{type:"Rectangle",isStyleProp:!0,defaultValue:lh.Rectangle.inset(0),initialize:function(a){this.padding=a},set:function(a){a||(a=lh.Rectangle.inset(0));var g=
this.padding;this.setProperty("padding","number"===typeof a?lh.Rectangle.inset(a):a);this.autofit&&!g.equals(a)&&this.invalidateTextLayout()}},fontFamily:{isStyleProp:!0,type:"Enum",values:lh.config.text.basicFontItems,defaultValue:"IBM Plex Sans, Sans-Serif",set:function(a){var g=this.fontFamily;this.setProperty("fontFamily",a);this.autofit&&g!=a&&this.invalidateTextLayout()}},fontSize:{type:"Number",min:1,isStyleProp:!0,defaultValue:12,set:function(a){var g=this.fontSize;this.setProperty("fontSize",
a);this.autofit&&a!=g&&this.invalidateTextLayout()}},fontColor:{type:"Color",isStyleProp:!0,defaultValue:lh.Color.black},fontWeight:{type:"Enum",values:["bold","bolder","light","lighter"],isStyleProp:!0,defaultValue:"normal",set:function(a){var g=this.fontWeight;this.setProperty("fontWeight",a);this.autofit&&g!=a&&this.invalidateTextLayout()}},fontStyle:{type:"Enum",values:["normal","italic","oblique"],isStyleProp:!0,defaultValue:"normal",set:function(a){var g=this.fontStyle;this.setProperty("fontStyle",
a);this.autofit&&g!=a&&this.invalidateTextLayout()}},textShadow:{type:"String",isStyleProp:!0,defaultValue:""},textDecoration:{defaultValue:"none"},textStyleClasses:{defaultValue:void 0,set:function(a){this.setProperty("textStyleClasses",a);this.autofit&&this.invalidateTextLayout()}}}}},{key:"icon",value:function(a,g){g=void 0===g?{prefix:"",suffix:""}:g;return lh.Icon.makeLabel(a,g)}}],e,{pathInPackage:function(){return"text/label.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:490,end:17354})}(lh.Morph));lh.Label=sr;lh.Label=sr;lh.Label=sr;for(var Rka=Object.freeze({__proto__:null,Label:sr}),K4={},L4=!1,oQ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,nN={},j_=!1,Kaa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,m_={},l_=!1,pN={},n_=!1,oN="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,qN={},o_=!1,cw="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,fH={},p_=!1,gH={},r_=!1,vm={},s_=!1,rN={},u_=!1,wm="undefined"!==typeof self?self:global,sN={},v_=!1,Up="undefined"!==typeof self?self:global,tN={},x_=!1,Ah="undefined"!==typeof self?self:global,dw={},y_=!1,uN={},z_=!1,NC={},A_=!1,De="undefined"!==typeof self?self:global,vN={},B_=!1,ni="undefined"!==typeof self?self:global,OC={},D_=!1,Is=[],lq=[],Ska="undefined"!=
typeof Uint8Array?Uint8Array:Array,bB=0;64>bB;++bB)Is[bB]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[bB],lq["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(bB)]=bB;lq[45]=62;lq[95]=63;var pA=sa("bj",{}),AN={byteLength:function(b){b=E_(b);var e=b[1];return 3*(b[0]+e)/4-e},toByteArray:function(b){var e=E_(b);var m=e[0];e=e[1];var a=new Ska(3*(m+e)/4-e),g=0,l=0<e?m-4:m;for(m=0;m<l;m+=4){var q=lq[b.charCodeAt(m)]<<18|lq[b.charCodeAt(m+1)]<<12|lq[b.charCodeAt(m+
2)]<<6|lq[b.charCodeAt(m+3)];a[g++]=q>>16&255;a[g++]=q>>8&255;a[g++]=255&q}2===e&&(q=lq[b.charCodeAt(m)]<<2|lq[b.charCodeAt(m+1)]>>4,a[g++]=255&q);1===e&&(q=lq[b.charCodeAt(m)]<<10|lq[b.charCodeAt(m+1)]<<4|lq[b.charCodeAt(m+2)]>>2,a[g++]=q>>8&255,a[g++]=255&q);return a},fromByteArray:function(b){for(var e,m=b.length,a=m%3,g=[],l=0,q=m-a;l<q;l+=16383)g.push(Taa(b,l,l+16383>q?q:l+16383));1===a?(e=b[m-1],g.push(Is[e>>2]+Is[e<<4&63]+"==")):2===a&&(e=(b[m-2]<<8)+b[m-1],g.push(Is[e>>10]+Is[e>>4&63]+Is[e<<
2&63]+"="));return g.join("")}},oA={read:function(b,e,m,a,g){var l=8*g-a-1;var q=(1<<l)-1,r=q>>1,u=-7;g=m?g-1:0;var v=m?-1:1,y=b[e+g];g+=v;m=y&(1<<-u)-1;y>>=-u;for(u+=l;0<u;m=256*m+b[e+g],g+=v,u-=8);l=m&(1<<-u)-1;m>>=-u;for(u+=a;0<u;l=256*l+b[e+g],g+=v,u-=8);if(0===m)m=1-r;else{if(m===q)return l?NaN:1/0*(y?-1:1);l+=Math.pow(2,a);m-=r}return(y?-1:1)*l*Math.pow(2,m-a)},write:function(b,e,m,a,g,l){var q,r,u,v=8*l-g-1,y=(1<<v)-1,z=y>>1,A=23===g?Math.pow(2,-24)-Math.pow(2,-77):0;l=a?0:l-1;a=a?1:-1;var B=
0>e||0===e&&0>1/e?1:0;e=Math.abs(e);for(isNaN(e)||e===1/0?(r=isNaN(e)?1:0,q=y):(q=Math.floor(Math.log(e)/Math.LN2),1>e*(u=Math.pow(2,-q))&&(q--,u*=2),2<=(e+=1<=q+z?A/u:A*Math.pow(2,1-z))*u&&(q++,u/=2),q+z>=y?(r=0,q=y):1<=q+z?(r=(e*u-1)*Math.pow(2,g),q+=z):(r=e*Math.pow(2,z-1)*Math.pow(2,g),q=0));8<=g;b[m+l]=255&r,l+=a,r/=256,g-=8);q=q<<g|r;for(v+=g;0<v;b[m+l]=255&q,l+=a,q/=256,v-=8);b[m+l-a]|=128*B}},M4="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):
null;pA.Buffer=ve;pA.SlowBuffer=function(b){+b!=b&&(b=0);return ve.alloc(+b)};pA.INSPECT_MAX_BYTES=50;pA.kMaxLength=2147483647;ve.TYPED_ARRAY_SUPPORT=function(){try{var b=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(b,e),42===b.foo()}catch(m){return!1}}();ve.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(ve.prototype,"parent",{enumerable:!0,get:function(){if(ve.isBuffer(this))return this.buffer}});Object.defineProperty(ve.prototype,"offset",{enumerable:!0,get:function(){if(ve.isBuffer(this))return this.byteOffset}});ve.poolSize=8192;ve.from=function(b,e,m){return F_(b,e,m)};Object.setPrototypeOf(ve.prototype,Uint8Array.prototype);Object.setPrototypeOf(ve,Uint8Array);ve.alloc=function(b,e,m){return H_(b),0>=b?xu(b):void 0!==e?"string"==typeof m?xu(b).fill(e,m):xu(b).fill(e):xu(b)};
ve.allocUnsafe=function(b){return wN(b)};ve.allocUnsafeSlow=function(b){return wN(b)};ve.isBuffer=function(b){return null!=b&&!0===b._isBuffer&&b!==ve.prototype};ve.compare=function(b,e){if(yu(b,Uint8Array)&&(b=ve.from(b,b.offset,b.byteLength)),yu(e,Uint8Array)&&(e=ve.from(e,e.offset,e.byteLength)),!ve.isBuffer(b)||!ve.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===e)return 0;for(var m=b.length,a=e.length,g=0,l=Math.min(m,a);g<l;++g)if(b[g]!==
e[g]){m=b[g];a=e[g];break}return m<a?-1:a<m?1:0};ve.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};ve.concat=function(b,e){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return ve.alloc(0);var m;if(void 0===e)for(m=e=0;m<b.length;++m)e+=b[m].length;e=ve.allocUnsafe(e);
var a=0;for(m=0;m<b.length;++m){var g=b[m];if(yu(g,Uint8Array)&&(g=ve.from(g)),!ve.isBuffer(g))throw new TypeError('"list" argument must be an Array of Buffers');g.copy(e,a);a+=g.length}return e};ve.byteLength=G_;ve.prototype._isBuffer=!0;ve.prototype.swap16=function(){var b=this.length;if(0!=b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<b;e+=2)Xx(this,e,e+1);return this};ve.prototype.swap32=function(){var b=this.length;if(0!=b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");
for(var e=0;e<b;e+=4)Xx(this,e,e+3),Xx(this,e+1,e+2);return this};ve.prototype.swap64=function(){var b=this.length;if(0!=b%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<b;e+=8)Xx(this,e,e+7),Xx(this,e+1,e+6),Xx(this,e+2,e+5),Xx(this,e+3,e+4);return this};ve.prototype.toString=function(){var b=this.length;return 0===b?"":0===arguments.length?J_(this,0,b):Vaa.apply(this,arguments)};ve.prototype.toLocaleString=ve.prototype.toString;ve.prototype.equals=function(b){if(!ve.isBuffer(b))throw new TypeError("Argument must be a Buffer");
return this===b||0===ve.compare(this,b)};ve.prototype.inspect=function(){var b="",e=pA.INSPECT_MAX_BYTES;return b=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(b+=" ... "),"<Buffer "+b+">"};M4&&(ve.prototype[M4]=ve.prototype.inspect);ve.prototype.compare=function(b,e,m,a,g){if(yu(b,Uint8Array)&&(b=ve.from(b,b.offset,b.byteLength)),!ve.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);if(void 0===e&&
(e=0),void 0===m&&(m=b?b.length:0),void 0===a&&(a=0),void 0===g&&(g=this.length),0>e||m>b.length||0>a||g>this.length)throw new RangeError("out of range index");if(a>=g&&e>=m)return 0;if(a>=g)return-1;if(e>=m)return 1;if(this===b)return 0;var l=(g>>>=0)-(a>>>=0),q=(m>>>=0)-(e>>>=0),r=Math.min(l,q);a=this.slice(a,g);b=b.slice(e,m);for(e=0;e<r;++e)if(a[e]!==b[e]){l=a[e];q=b[e];break}return l<q?-1:q<l?1:0};ve.prototype.includes=function(b,e,m){return-1!==this.indexOf(b,e,m)};ve.prototype.indexOf=function(b,
e,m){return K_(this,b,e,m,!0)};ve.prototype.lastIndexOf=function(b,e,m){return K_(this,b,e,m,!1)};ve.prototype.write=function(b,e,m,a){if(void 0===e)a="utf8",m=this.length,e=0;else if(void 0===m&&"string"==typeof e)a=e,m=this.length,e=0;else{if(!isFinite(e))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0;isFinite(m)?(m>>>=0,void 0===a&&(a="utf8")):(a=m,m=void 0)}var g=this.length-e;if((void 0===m||m>g)&&(m=g),0<b.length&&(0>m||0>e)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");
a||(a="utf8");for(g=!1;;)switch(a){case "hex":a:{e=Number(e)||0;a=this.length-e;m?(m=Number(m))>a&&(m=a):m=a;a=b.length;m>a/2&&(m=a/2);for(a=0;a<m;++a){g=parseInt(b.substr(2*a,2),16);if(g!=g){m=a;break a}this[e+a]=g}m=a}return m;case "utf8":case "utf-8":return hH(zN(b,this.length-e),this,e,m);case "ascii":return M_(this,b,e,m);case "latin1":case "binary":return M_(this,b,e,m);case "base64":return hH(I_(b),this,e,m);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=m;g=this.length-e;for(var l=
[],q=0;q<b.length&&!(0>(g-=2));++q){var r=b.charCodeAt(q);m=r>>8;r%=256;l.push(r);l.push(m)}return hH(l,this,e,a);default:if(g)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase();g=!0}};ve.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};ve.prototype.slice=function(b,e){var m=this.length;0>(b=~~b)?0>(b+=m)&&(b=0):b>m&&(b=m);0>(e=void 0===e?m:~~e)?0>(e+=m)&&(e=0):e>m&&(e=m);e<b&&(e=b);b=this.subarray(b,e);return Object.setPrototypeOf(b,
ve.prototype),b};ve.prototype.readUIntLE=function(b,e,m){b>>>=0;e>>>=0;m||dm(b,e,this.length);m=this[b];for(var a=1,g=0;++g<e&&(a*=256);)m+=this[b+g]*a;return m};ve.prototype.readUIntBE=function(b,e,m){b>>>=0;e>>>=0;m||dm(b,e,this.length);m=this[b+--e];for(var a=1;0<e&&(a*=256);)m+=this[b+--e]*a;return m};ve.prototype.readUInt8=function(b,e){return b>>>=0,e||dm(b,1,this.length),this[b]};ve.prototype.readUInt16LE=function(b,e){return b>>>=0,e||dm(b,2,this.length),this[b]|this[b+1]<<8};ve.prototype.readUInt16BE=
function(b,e){return b>>>=0,e||dm(b,2,this.length),this[b]<<8|this[b+1]};ve.prototype.readUInt32LE=function(b,e){return b>>>=0,e||dm(b,4,this.length),(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};ve.prototype.readUInt32BE=function(b,e){return b>>>=0,e||dm(b,4,this.length),16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};ve.prototype.readIntLE=function(b,e,m){b>>>=0;e>>>=0;m||dm(b,e,this.length);m=this[b];for(var a=1,g=0;++g<e&&(a*=256);)m+=this[b+g]*a;return m>=128*a&&(m-=Math.pow(2,
8*e)),m};ve.prototype.readIntBE=function(b,e,m){b>>>=0;e>>>=0;m||dm(b,e,this.length);m=e;for(var a=1,g=this[b+--m];0<m&&(a*=256);)g+=this[b+--m]*a;return g>=128*a&&(g-=Math.pow(2,8*e)),g};ve.prototype.readInt8=function(b,e){return b>>>=0,e||dm(b,1,this.length),128&this[b]?-1*(255-this[b]+1):this[b]};ve.prototype.readInt16LE=function(b,e){b>>>=0;e||dm(b,2,this.length);b=this[b]|this[b+1]<<8;return 32768&b?4294901760|b:b};ve.prototype.readInt16BE=function(b,e){b>>>=0;e||dm(b,2,this.length);b=this[b+
1]|this[b]<<8;return 32768&b?4294901760|b:b};ve.prototype.readInt32LE=function(b,e){return b>>>=0,e||dm(b,4,this.length),this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};ve.prototype.readInt32BE=function(b,e){return b>>>=0,e||dm(b,4,this.length),this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};ve.prototype.readFloatLE=function(b,e){return b>>>=0,e||dm(b,4,this.length),oA.read(this,b,!0,23,4)};ve.prototype.readFloatBE=function(b,e){return b>>>=0,e||dm(b,4,this.length),oA.read(this,b,!1,23,4)};ve.prototype.readDoubleLE=
function(b,e){return b>>>=0,e||dm(b,8,this.length),oA.read(this,b,!0,52,8)};ve.prototype.readDoubleBE=function(b,e){return b>>>=0,e||dm(b,8,this.length),oA.read(this,b,!1,52,8)};ve.prototype.writeUIntLE=function(b,e,m,a){(b=+b,e>>>=0,m>>>=0,a)||Zn(this,b,e,m,Math.pow(2,8*m)-1,0);a=1;var g=0;for(this[e]=255&b;++g<m&&(a*=256);)this[e+g]=b/a&255;return e+m};ve.prototype.writeUIntBE=function(b,e,m,a){(b=+b,e>>>=0,m>>>=0,a)||Zn(this,b,e,m,Math.pow(2,8*m)-1,0);a=m-1;var g=1;for(this[e+a]=255&b;0<=--a&&
(g*=256);)this[e+a]=b/g&255;return e+m};ve.prototype.writeUInt8=function(b,e,m){return b=+b,e>>>=0,m||Zn(this,b,e,1,255,0),this[e]=255&b,e+1};ve.prototype.writeUInt16LE=function(b,e,m){return b=+b,e>>>=0,m||Zn(this,b,e,2,65535,0),this[e]=255&b,this[e+1]=b>>>8,e+2};ve.prototype.writeUInt16BE=function(b,e,m){return b=+b,e>>>=0,m||Zn(this,b,e,2,65535,0),this[e]=b>>>8,this[e+1]=255&b,e+2};ve.prototype.writeUInt32LE=function(b,e,m){return b=+b,e>>>=0,m||Zn(this,b,e,4,4294967295,0),this[e+3]=b>>>24,this[e+
2]=b>>>16,this[e+1]=b>>>8,this[e]=255&b,e+4};ve.prototype.writeUInt32BE=function(b,e,m){return b=+b,e>>>=0,m||Zn(this,b,e,4,4294967295,0),this[e]=b>>>24,this[e+1]=b>>>16,this[e+2]=b>>>8,this[e+3]=255&b,e+4};ve.prototype.writeIntLE=function(b,e,m,a){(b=+b,e>>>=0,a)||(a=Math.pow(2,8*m-1),Zn(this,b,e,m,a-1,-a));a=0;var g=1,l=0;for(this[e]=255&b;++a<m&&(g*=256);)0>b&&0===l&&0!==this[e+a-1]&&(l=1),this[e+a]=(b/g>>0)-l&255;return e+m};ve.prototype.writeIntBE=function(b,e,m,a){(b=+b,e>>>=0,a)||(a=Math.pow(2,
8*m-1),Zn(this,b,e,m,a-1,-a));a=m-1;var g=1,l=0;for(this[e+a]=255&b;0<=--a&&(g*=256);)0>b&&0===l&&0!==this[e+a+1]&&(l=1),this[e+a]=(b/g>>0)-l&255;return e+m};ve.prototype.writeInt8=function(b,e,m){return b=+b,e>>>=0,m||Zn(this,b,e,1,127,-128),0>b&&(b=255+b+1),this[e]=255&b,e+1};ve.prototype.writeInt16LE=function(b,e,m){return b=+b,e>>>=0,m||Zn(this,b,e,2,32767,-32768),this[e]=255&b,this[e+1]=b>>>8,e+2};ve.prototype.writeInt16BE=function(b,e,m){return b=+b,e>>>=0,m||Zn(this,b,e,2,32767,-32768),this[e]=
b>>>8,this[e+1]=255&b,e+2};ve.prototype.writeInt32LE=function(b,e,m){return b=+b,e>>>=0,m||Zn(this,b,e,4,2147483647,-2147483648),this[e]=255&b,this[e+1]=b>>>8,this[e+2]=b>>>16,this[e+3]=b>>>24,e+4};ve.prototype.writeInt32BE=function(b,e,m){return b=+b,e>>>=0,m||Zn(this,b,e,4,2147483647,-2147483648),0>b&&(b=4294967295+b+1),this[e]=b>>>24,this[e+1]=b>>>16,this[e+2]=b>>>8,this[e+3]=255&b,e+4};ve.prototype.writeFloatLE=function(b,e,m){return O_(this,b,e,!0,m)};ve.prototype.writeFloatBE=function(b,e,m){return O_(this,
b,e,!1,m)};ve.prototype.writeDoubleLE=function(b,e,m){return P_(this,b,e,!0,m)};ve.prototype.writeDoubleBE=function(b,e,m){return P_(this,b,e,!1,m)};ve.prototype.copy=function(b,e,m,a){if(!ve.isBuffer(b))throw new TypeError("argument should be a Buffer");if((m||(m=0),a||0===a||(a=this.length),e>=b.length&&(e=b.length),e||(e=0),0<a&&a<m&&(a=m),a===m)||0===b.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>m||m>=this.length)throw new RangeError("Index out of range");
if(0>a)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length);b.length-e<a-m&&(a=b.length-e+m);var g=a-m;if(this===b&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,m,a);else if(this===b&&m<e&&e<a)for(a=g-1;0<=a;--a)b[a+e]=this[a+m];else Uint8Array.prototype.set.call(b,this.subarray(m,a),e);return g};ve.prototype.fill=function(b,e,m,a){if("string"==typeof b){if("string"==typeof e?(a=e,e=0,m=this.length):"string"==typeof m&&(a=m,m=this.length),void 0!==
a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!ve.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===b.length){var g=b.charCodeAt(0);("utf8"===a&&128>g||"latin1"===a)&&(b=g)}}else"number"==typeof b?b&=255:"boolean"==typeof b&&(b=Number(b));if(0>e||this.length<e||this.length<m)throw new RangeError("Out of range index");if(m<=e)return this;if(e>>>=0,m=void 0===m?this.length:m>>>0,b||(b=0),"number"==typeof b)for(a=e;a<m;++a)this[a]=b;else{g=
ve.isBuffer(b)?b:ve.from(b,a);var l=g.length;if(0===l)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(a=0;a<m-e;++a)this[a+e]=g[a%l]}return this};var Xaa=/[^+/0-9A-Za-z-_]/g,Waa=function(){for(var b=Array(256),e=0;16>e;++e)for(var m=16*e,a=0;16>a;++a)b[m+a]="0123456789abcdef"[e]+"0123456789abcdef"[a];return b}(),Q_=!1,iH={exports:{}},Tka=/^xn--/,Uka=/[^\0-\x7E]/,$aa=/[\x2E\u3002\uFF0E\uFF61]/g,Zaa={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)",
"invalid-input":"Invalid input"},ct=Math.floor,pQ=String.fromCharCode,N4=function(b,e){return b+22+75*(26>b)-((0!=e)<<5)},O4=function(b,e,m){var a=0;b=m?ct(b/700):b>>1;for(b+=ct(b/e);455<b;a+=36)b=ct(b/35);return ct(a+36*b/(b+38))},P4=function(b){var e=[],m=b.length,a=0,g=128,l=72,q=b.lastIndexOf("-");0>q&&(q=0);for(var r=0;r<q;++r)128<=b.charCodeAt(r)&&Yx("not-basic"),e.push(b.charCodeAt(r));for(q=0<q?q+1:0;q<m;){r=a;for(var u=1,v=36;;v+=36){q>=m&&Yx("invalid-input");var y=10>(A=b.charCodeAt(q++))-
48?A-22:26>A-65?A-65:26>A-97?A-97:36;(36<=y||y>ct((2147483647-a)/u))&&Yx("overflow");a+=y*u;var z=v<=l?1:v>=l+26?26:v-l;if(y<z)break;y=36-z;u>ct(2147483647/y)&&Yx("overflow");u*=y}u=e.length+1;l=O4(a-r,u,0==r);ct(a/u)>2147483647-g&&Yx("overflow");g+=ct(a/u);a%=u;e.splice(a++,0,g)}var A;return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(e))},Q4=function(b){for(var e=[],m=(b=S_(b)).length,a=128,g=0,l=72,q=$jscomp.makeIterator(b),r=q.next();!r.done;r=q.next()){var u=r.value;128>u&&e.push(pQ(u))}for((u=
q=e.length)&&e.push("-");u<m;){var v=2147483647,y=$jscomp.makeIterator(b);for(r=y.next();!r.done;r=y.next())r=r.value,r>=a&&r<v&&(v=r);r=u+1;v-a>ct((2147483647-g)/r)&&Yx("overflow");g+=(v-a)*r;a=v;v=$jscomp.makeIterator(b);for(y=v.next();!y.done;y=v.next())if(y=y.value,y<a&&2147483647<++g&&Yx("overflow"),y==a){var z=g;for(y=36;;y+=36){var A=y<=l?1:y>=l+26?26:y-l;if(z<A)break;z-=A;var B=36-A;e.push(pQ(N4(A+z%B,0)));z=ct(z/B)}e.push(pQ(N4(z,0)));l=O4(g,r,u==q);g=0;++u}++g;++a}return e.join("")},Vka=
{version:"2.1.0",ucs2:{decode:S_,encode:function(b){return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(b))}},decode:P4,encode:Q4,toASCII:function(b){return R_(b,function(e){return Uka.test(e)?"xn--"+Q4(e):e})},toUnicode:function(b){return R_(b,function(e){return Tka.test(e)?P4(e.slice(4).toLowerCase()):e})}},kE=function(b){switch(typeof b){case "string":return b;case "boolean":return b?"true":"false";case "number":return isFinite(b)?b:"";default:return""}},Ky={};Ky.decode=Ky.parse=
function(b,e,m,a){m=m||"=";var g={};if("string"!=typeof b||0===b.length)return g;var l=/\+/g;b=b.split(e||"&");e=1E3;a&&"number"==typeof a.maxKeys&&(e=a.maxKeys);a=b.length;0<e&&a>e&&(a=e);for(e=0;e<a;++e){var q,r;var u=b[e].replace(l,"%20");var v=u.indexOf(m);0<=v?(q=u.substr(0,v),r=u.substr(v+1)):(q=u,r="");u=decodeURIComponent(q);v=decodeURIComponent(r);Object.prototype.hasOwnProperty.call(g,u)?Array.isArray(g[u])?g[u].push(v):g[u]=[g[u],v]:g[u]=v}return g};Ky.encode=Ky.stringify=function(b,e,
m,a){return e=e||"&",m=m||"=",null===b&&(b=void 0),"object"==typeof b?Object.keys(b).map(function(g){var l=encodeURIComponent(kE(g))+m;return Array.isArray(b[g])?b[g].map(function(q){return l+encodeURIComponent(kE(q))}).join(e):l+encodeURIComponent(kE(b[g]))}).join(e):a?encodeURIComponent(kE(a))+m+encodeURIComponent(kE(b)):""};var qA={},Js={isString:function(b){return"string"==typeof b},isObject:function(b){return"object"==typeof b&&null!==b},isNull:function(b){return null===b},isNullOrUndefined:function(b){return null==
b}};qA.parse=PC;qA.resolve=function(b,e){return PC(b,!1,!0).resolve(e)};qA.resolveObject=function(b,e){return b?PC(b,!1,!0).resolveObject(e):e};qA.format=function(b){Js.isString(b)&&(b=PC(b));return b instanceof Vp?b.format():Vp.prototype.format.call(b)};qA.Url=Vp;var Wka=/^([a-z0-9.+-]+:)/i,Xka=/:[0-9]*$/,Yka=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Zka="{}|\\^`".split("").concat('<>"` \r\n\t'.split("")),qQ=["'"].concat(Zka),R4=["%","/","?",";","#"].concat(qQ),S4=["/","?","#"],T4=/^[+a-z0-9A-Z_-]{0,63}$/,
$ka=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ala={javascript:!0,"javascript:":!0},rQ={javascript:!0,"javascript:":!0},cB={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};Vp.prototype.parse=function(b,e,m){if(!Js.isString(b))throw new TypeError("Parameter 'url' must be a string, not "+typeof b);var a=b.indexOf("?");a=-1!==a&&a<b.indexOf("#")?"?":"#";b=b.split(a);b[0]=b[0].replace(/\\/g,"/");a=b=b.join(a);if(a=a.trim(),!m&&1===b.split("#").length)if(b=Yka.exec(a))return this.path=
a,this.href=a,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?Ky.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this;if(b=Wka.exec(a)){var g=(b=b[0]).toLowerCase();this.protocol=g;a=a.substr(b.length)}if(m||b||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===a.substr(0,2);!l||b&&rQ[b]||(a=a.substr(2),this.slashes=!0)}if(!rQ[b]&&(l||b&&!cB[b])){var q,r;l=-1;for(m=0;m<S4.length;m++)-1!==(u=a.indexOf(S4[m]))&&(-1===l||u<l)&&(l=u);-1!==(r=-1===l?a.lastIndexOf("@"):
a.lastIndexOf("@",l))&&(q=a.slice(0,r),a=a.slice(r+1),this.auth=decodeURIComponent(q));l=-1;for(m=0;m<R4.length;m++){var u;-1!==(u=a.indexOf(R4[m]))&&(-1===l||u<l)&&(l=u)}-1===l&&(l=a.length);this.host=a.slice(0,l);a=a.slice(l);this.parseHost();this.hostname=this.hostname||"";q="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!q)for(l=this.hostname.split(/\./),r=(m=0,l.length);m<r;m++)if((u=l[m])&&!u.match(T4)){b="";for(var v=0,y=u.length;v<y;v++)127<u.charCodeAt(v)?b+="x":b+=
u[v];if(!b.match(T4)){r=l.slice(0,m);m=l.slice(m+1);(u=u.match($ka))&&(r.push(u[1]),m.unshift(u[2]));m.length&&(a="/"+m.join(".")+a);this.hostname=r.join(".");break}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase();q||(this.hostname=Vka.toASCII(this.hostname));m=this.port?":"+this.port:"";this.host=(this.hostname||"")+m;this.href+=this.host;q&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!ala[g])for(m=0,r=qQ.length;m<r;m++)q=
qQ[m],-1!==a.indexOf(q)&&(u=encodeURIComponent(q),u===q&&(u=escape(q)),a=a.split(q).join(u));m=a.indexOf("#");-1!==m&&(this.hash=a.substr(m),a=a.slice(0,m));m=a.indexOf("?");if(-1!==m?(this.search=a.substr(m),this.query=a.substr(m+1),e&&(this.query=Ky.parse(this.query)),a=a.slice(0,m)):e&&(this.search="",this.query={}),a&&(this.pathname=a),cB[g]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search)m=this.pathname||"",this.path=m+(this.search||"");return this.href=this.format(),
this};Vp.prototype.format=function(){var b=this.auth||"";b&&(b=(b=encodeURIComponent(b)).replace(/%3A/i,":"),b+="@");var e=this.protocol||"",m=this.pathname||"",a=this.hash||"",g=!1,l="";this.host?g=b+this.host:this.hostname&&(g=b+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(g+=":"+this.port));this.query&&Js.isObject(this.query)&&Object.keys(this.query).length&&(l=Ky.stringify(this.query));b=this.search||l&&"?"+l||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||
(!e||cB[e])&&!1!==g?(g="//"+(g||""),m&&"/"!==m.charAt(0)&&(m="/"+m)):g||(g=""),a&&"#"!==a.charAt(0)&&(a="#"+a),b&&"?"!==b.charAt(0)&&(b="?"+b),e+g+(m=m.replace(/[?#]/g,function(q){return encodeURIComponent(q)}))+(b=b.replace("#","%23"))+a};Vp.prototype.resolve=function(b){return this.resolveObject(PC(b,!1,!0)).format()};Vp.prototype.resolveObject=function(b){if(Js.isString(b)){var e=new Vp;e.parse(b,!1,!0);b=e}e=new Vp;for(var m=Object.keys(this),a=0;a<m.length;a++){var g=m[a];e[g]=this[g]}if(e.hash=
b.hash,""===b.href)return e.href=e.format(),e;if(b.slashes&&!b.protocol){var l=Object.keys(b);for(m=0;m<l.length;m++)a=l[m],"protocol"!==a&&(e[a]=b[a]);return cB[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(b.protocol&&b.protocol!==e.protocol){if(!cB[b.protocol]){l=Object.keys(b);for(m=0;m<l.length;m++)a=l[m],e[a]=b[a];return e.href=e.format(),e}if(e.protocol=b.protocol,b.host||rQ[b.protocol])e.pathname=b.pathname;else{for(var q=(b.pathname||"").split("/");q.length&&
!(b.host=q.shift()););b.host||(b.host="");b.hostname||(b.hostname="");""!==q[0]&&q.unshift("");2>q.length&&q.unshift("");e.pathname=q.join("/")}if(e.search=b.search,e.query=b.query,e.host=b.host||"",e.auth=b.auth,e.hostname=b.hostname||b.host,e.port=b.port,e.pathname||e.search)e.path=(e.pathname||"")+(e.search||"");return e.slashes=e.slashes||b.slashes,e.href=e.format(),e}m=e.pathname&&"/"===e.pathname.charAt(0);var r=b.host||b.pathname&&"/"===b.pathname.charAt(0),u=m=r||m||e.host&&b.pathname;a=e.pathname&&
e.pathname.split("/")||[];g=(q=b.pathname&&b.pathname.split("/")||[],e.protocol&&!cB[e.protocol]);if(g&&(e.hostname="",e.port=null,e.host&&(""===a[0]?a[0]=e.host:a.unshift(e.host)),e.host="",b.protocol&&(b.hostname=null,b.port=null,b.host&&(""===q[0]?q[0]=b.host:q.unshift(b.host)),b.host=null),m=m&&(""===q[0]||""===a[0])),r)e.host=b.host||""===b.host?b.host:e.host,e.hostname=b.hostname||""===b.hostname?b.hostname:e.hostname,e.search=b.search,e.query=b.query,a=q;else if(q.length)a||(a=[]),a.pop(),
a=a.concat(q),e.search=b.search,e.query=b.query;else if(!Js.isNullOrUndefined(b.search))return g&&(e.hostname=e.host=a.shift(),(l=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=l.shift(),e.host=e.hostname=l.shift())),e.search=b.search,e.query=b.query,Js.isNull(e.pathname)&&Js.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e;if(!a.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;r=a.slice(-1)[0];
q=(e.host||b.host||1<a.length)&&("."===r||".."===r)||""===r;for(var v=0,y=a.length;0<=y;y--)"."===(r=a[y])?a.splice(y,1):".."===r?(a.splice(y,1),v++):v&&(a.splice(y,1),v--);if(!m&&!u)for(;v--;v)a.unshift("..");!m||""===a[0]||a[0]&&"/"===a[0].charAt(0)||a.unshift("");q&&"/"!==a.join("/").substr(-1)&&a.push("");u=""===a[0]||a[0]&&"/"===a[0].charAt(0);g&&(e.hostname=e.host=u?"":a.length?a.shift():"",(l=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=l.shift(),e.host=e.hostname=l.shift()));
return(m||e.host&&a.length)&&!u&&a.unshift(""),a.length?e.pathname=a.join("/"):(e.pathname=null,e.path=null),Js.isNull(e.pathname)&&Js.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=b.auth||e.auth,e.slashes=e.slashes||b.slashes,e.href=e.format(),e};Vp.prototype.parseHost=function(){var b=this.host,e=Xka.exec(b);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),b=b.substr(0,b.length-e.length));b&&(this.hostname=b)};var bla=KQ,lE={resolve:function(){for(var b,e="",m=!1,
a=arguments.length-1;-1<=a&&!m;a--){var g;0<=a?g=arguments[a]:(void 0===b&&(b=bla.cwd()),g=b);Ks(g);0!==g.length&&(e=g+"/"+e,m=47===g.charCodeAt(0))}return e=T_(e,!m),m?0<e.length?"/"+e:"/":0<e.length?e:"."},normalize:function(b){if(Ks(b),0===b.length)return".";var e=47===b.charCodeAt(0),m=47===b.charCodeAt(b.length-1);return 0!==(b=T_(b,!e)).length||e||(b="."),0<b.length&&m&&(b+="/"),e?"/"+b:b},isAbsolute:function(b){return Ks(b),0<b.length&&47===b.charCodeAt(0)},join:function(){if(0===arguments.length)return".";
for(var b,e=0;e<arguments.length;++e){var m=arguments[e];Ks(m);0<m.length&&(void 0===b?b=m:b+="/"+m)}return void 0===b?".":lE.normalize(b)},relative:function(b,e){if((Ks(b),Ks(e),b===e)||(b=lE.resolve(b))===(e=lE.resolve(e)))return"";for(var m=1;m<b.length&&47===b.charCodeAt(m);++m);for(var a=b.length,g=a-m,l=1;l<e.length&&47===e.charCodeAt(l);++l);for(var q=e.length-l,r=g<q?g:q,u=-1,v=0;v<=r;++v){if(v===r){if(q>r){if(47===e.charCodeAt(l+v))return e.slice(l+v+1);if(0===v)return e.slice(l+v)}else g>
r&&(47===b.charCodeAt(m+v)?u=v:0===v&&(u=0));break}var y=b.charCodeAt(m+v);if(y!==e.charCodeAt(l+v))break;47===y&&(u=v)}g="";for(v=m+u+1;v<=a;++v)v!==a&&47!==b.charCodeAt(v)||(0===g.length?g+="..":g+="/..");return 0<g.length?g+e.slice(l+u):(l+=u,47===e.charCodeAt(l)&&++l,e.slice(l))},_makeLong:function(b){return b},dirname:function(b){if(Ks(b),0===b.length)return".";for(var e=47===b.charCodeAt(0),m=-1,a=!0,g=b.length-1;1<=g;--g)if(47===b.charCodeAt(g)){if(!a){m=g;break}}else a=!1;return-1===m?e?"/":
".":e&&1===m?"//":b.slice(0,m)},basename:function(b,e){if(void 0!==e&&"string"!=typeof e)throw new TypeError('"ext" argument must be a string');Ks(b);var m,a=0,g=-1,l=!0;if(void 0!==e&&0<e.length&&e.length<=b.length){if(e.length===b.length&&e===b)return"";var q=e.length-1,r=-1;for(m=b.length-1;0<=m;--m){var u=b.charCodeAt(m);if(47===u){if(!l){a=m+1;break}}else-1===r&&(l=!1,r=m+1),0<=q&&(u===e.charCodeAt(q)?-1==--q&&(g=m):(q=-1,g=r))}return a===g?g=r:-1===g&&(g=b.length),b.slice(a,g)}for(m=b.length-
1;0<=m;--m)if(47===b.charCodeAt(m)){if(!l){a=m+1;break}}else-1===g&&(l=!1,g=m+1);return-1===g?"":b.slice(a,g)},extname:function(b){Ks(b);for(var e=-1,m=0,a=-1,g=!0,l=0,q=b.length-1;0<=q;--q){var r=b.charCodeAt(q);if(47!==r)-1===a&&(g=!1,a=q+1),46===r?-1===e?e=q:1!==l&&(l=1):-1!==e&&(l=-1);else if(!g){m=q+1;break}}return-1===e||-1===a||0===l||1===l&&e===a-1&&e===m+1?"":b.slice(e,a)},format:function(b){if(null===b||"object"!=typeof b)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+
typeof b);var e=b.dir||b.root,m=b.base||(b.name||"")+(b.ext||"");return e?e===b.root?e+m:e+"/"+m:m},parse:function(b){Ks(b);var e={root:"",dir:"",base:"",ext:"",name:""};if(0===b.length)return e;var m,a=b.charCodeAt(0),g=47===a;g?(e.root="/",m=1):m=0;for(var l=-1,q=0,r=-1,u=!0,v=b.length-1,y=0;v>=m;--v)if(47!==(a=b.charCodeAt(v)))-1===r&&(u=!1,r=v+1),46===a?-1===l?l=v:1!==y&&(y=1):-1!==l&&(y=-1);else if(!u){q=v+1;break}return-1===l||-1===r||0===y||1===y&&l===r-1&&l===q+1?-1!==r&&(e.base=e.name=0===
q&&g?b.slice(1,r):b.slice(q,r)):(0===q&&g?(e.name=b.slice(1,l),e.base=b.slice(1,r)):(e.name=b.slice(q,l),e.base=b.slice(q,r)),e.ext=b.slice(l,r)),0<q?e.dir=b.slice(0,q-1):g&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null},Y_=lE.posix=lE,V_={},U_=!1,X_={},W_=!1,dba={appendFile:le,appendFileSync:le,access:le,accessSync:le,chown:le,chownSync:le,chmod:le,chmodSync:le,close:le,closeSync:le,copyFile:le,copyFileSync:le,createReadStream:le,createWriteStream:le,exists:le,existsSync:le,fchown:le,
fchownSync:le,fchmod:le,fchmodSync:le,fdatasync:le,fdatasyncSync:le,fstat:le,fstatSync:le,fsync:le,fsyncSync:le,ftruncate:le,ftruncateSync:le,futimes:le,futimesSync:le,lchown:le,lchownSync:le,lchmod:le,lchmodSync:le,link:le,linkSync:le,lstat:le,lstatSync:le,mkdir:le,mkdirSync:le,mkdtemp:le,mkdtempSync:le,open:le,openSync:le,opendir:le,opendirSync:le,readdir:le,readdirSync:le,read:le,readSync:le,readFile:le,readFileSync:le,readlink:le,readlinkSync:le,realpath:le,realpathSync:le,rename:le,renameSync:le,
rmdir:le,rmdirSync:le,stat:le,statSync:le,symlink:le,symlinkSync:le,truncate:le,truncateSync:le,unwatchFile:le,unlink:le,unlinkSync:le,utimes:le,utimesSync:le,watch:le,watchFile:le,writeFile:le,writeFileSync:le,write:le,writeSync:le,writev:le,writevSync:le,Dir:le,Dirent:le,Stats:le,ReadStream:le,WriteStream:le,FileReadStream:le,FileWriteStream:le,_toUnixTimestamp:le,F_OK:null,R_OK:null,W_OK:null,X_OK:null,constants:null,promises:{access:le,copyFile:le,open:le,opendir:le,rename:le,truncate:le,rmdir:le,
mkdir:le,readdir:le,readlink:le,symlink:le,lstat:le,stat:le,link:le,unlink:le,chmod:le,lchmod:le,lchown:le,chown:le,utimes:le,realpath:le,mkdtemp:le,writeFile:le,appendFile:le,readFile:le}},Ls={},Z_=!1,pn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,U4={},V4=!1,sQ={},W4=!1;W4||(W4=!0,sQ.parse=function(){function b(a){return a?a.replace(/^\s+|\s+$/g,""):""}function e(a,g){var l=a&&"string"===typeof a.type,q=l?a:g,r;for(r in a){var u=a[r];Array.isArray(u)?u.forEach(function(v){e(v,
q)}):u&&"object"===typeof u&&e(u,q)}l&&Object.defineProperty(a,"parent",{configurable:!0,writable:!0,enumerable:!1,value:g||null});return a}if(L4)return K4;L4=!0;var m=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;return K4=function(a,g){function l(Qa){var X=Qa.match(/\n/g);X&&(L+=X.length);X=Qa.lastIndexOf("\n");N=~X?Qa.length-X:N+Qa.length}function q(){var Qa={line:L,column:N};return function(X){X.position=new r(Qa);A(/^\s*/);return X}}function r(Qa){(this||oQ).start=Qa;(this||oQ).end={line:L,column:N};(this||
oQ).source=g.source}function u(Qa){var X=Error(g.source+":"+L+":"+N+": "+Qa);X.reason=Qa;X.filename=g.source;X.line=L;X.column=N;X.source=a;if(g.silent)aa.push(X);else throw X;}function v(){return A(/^{\s*/)}function y(){return A(/^}/)}function z(){var Qa,X=[];A(/^\s*/);for(B(X);a.length&&"}"!=a.charAt(0)&&(Qa=D()||O());)!1!==Qa&&(X.push(Qa),B(X));return X}function A(Qa){if(Qa=Qa.exec(a)){var X=Qa[0];l(X);a=a.slice(X.length);return Qa}}function B(Qa){var X;for(Qa=Qa||[];X=G();)!1!==X&&Qa.push(X);
return Qa}function G(){var Qa=q();if("/"==a.charAt(0)&&"*"==a.charAt(1)){for(var X=2;""!=a.charAt(X)&&("*"!=a.charAt(X)||"/"!=a.charAt(X+1));)++X;X+=2;if(""===a.charAt(X-1))return u("End of comment missing");var V=a.slice(2,X-2);N+=2;l(V);a=a.slice(X);N+=2;return Qa({type:"comment",comment:V})}}function E(){var Qa=A(/^([^{]+)/);if(Qa)return b(Qa[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(X){return X.replace(/,/g,"\u200c")}).split(/\s*(?![^(]*\)),\s*/).map(function(X){return X.replace(/\u200C/g,
",")})}function K(){var Qa=q(),X=A(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(X){X=b(X[0]);if(!A(/^:\s*/))return u("property missing ':'");var V=A(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/);Qa=Qa({type:"declaration",property:X.replace(m,""),value:V?b(V[0]).replace(m,""):""});A(/^[;\s]*/);return Qa}}function J(){var Qa=[];if(!v())return u("missing '{'");B(Qa);for(var X;X=K();)!1!==X&&(Qa.push(X),B(Qa));return y()?Qa:u("missing '}'")}function P(){for(var Qa,X=[],V=q();Qa=A(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)X.push(Qa[1]),
A(/^,\s*/);if(X.length)return V({type:"keyframe",values:X,declarations:J()})}function ea(){var Qa=q(),X=A(/^@([-\w]+)?keyframes\s*/);if(X){var V=X[1];X=A(/^([-\w]+)\s*/);if(!X)return u("@keyframes missing name");X=X[1];if(!v())return u("@keyframes missing '{'");for(var ha,xa=B();ha=P();)xa.push(ha),xa=xa.concat(B());return y()?Qa({type:"keyframes",name:X,vendor:V,keyframes:xa}):u("@keyframes missing '}'")}}function ra(Qa){var X=new RegExp("^@"+Qa+"\\s*([^;]+);");return function(){var V=q(),ha=A(X);
if(ha){var xa={type:Qa};xa[Qa]=ha[1].trim();return V(xa)}}}function D(){if("@"==a[0]){var Qa;if(!(Qa=ea())){Qa=q();var X=A(/^@media *([^{]+)/);if(X)if(X=b(X[1]),v()){var V=B().concat(z());Qa=y()?Qa({type:"media",media:X,rules:V}):u("@media missing '}'")}else Qa=u("@media missing '{'");else Qa=void 0}Qa||(Qa=q(),Qa=(X=A(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/))?Qa({type:"custom-media",name:b(X[1]),media:b(X[2])}):void 0);Qa||(Qa=q(),(X=A(/^@supports *([^{]+)/))?(X=b(X[1]),v()?(V=B().concat(z()),
Qa=y()?Qa({type:"supports",supports:X,rules:V}):u("@supports missing '}'")):Qa=u("@supports missing '{'")):Qa=void 0);if(!(Qa=Qa||Y()||ma()||bb()))if(Qa=q(),V=A(/^@([-\w]+)?document *([^{]+)/))if(X=b(V[1]),V=b(V[2]),v()){var ha=B().concat(z());Qa=y()?Qa({type:"document",document:V,vendor:X,rules:ha}):u("@document missing '}'")}else Qa=u("@document missing '{'");else Qa=void 0;if(!Qa)if(Qa=q(),A(/^@page */))if(X=E()||[],v()){for(V=B();ha=K();)V.push(ha),V=V.concat(B());Qa=y()?Qa({type:"page",selectors:X,
declarations:V}):u("@page missing '}'")}else Qa=u("@page missing '{'");else Qa=void 0;Qa||(Qa=q(),A(/^@host\s*/)?v()?(X=B().concat(z()),Qa=y()?Qa({type:"host",rules:X}):u("@host missing '}'")):Qa=u("@host missing '{'"):Qa=void 0);if(!Qa)if(Qa=q(),A(/^@font-face\s*/))if(v()){for(X=B();V=K();)X.push(V),X=X.concat(B());Qa=y()?Qa({type:"font-face",declarations:X}):u("@font-face missing '}'")}else Qa=u("@font-face missing '{'");else Qa=void 0;return Qa}}function O(){var Qa=q(),X=E();if(!X)return u("selector missing");
B();return Qa({type:"rule",selectors:X,declarations:J()})}g=g||{};var L=1,N=1;r.prototype.content=a;var aa=[],Y=ra("import"),ma=ra("charset"),bb=ra("namespace");return e(function(){var Qa=z();return{type:"stylesheet",stylesheet:{source:g.source,rules:Qa,parsingErrors:aa}}}())}}(),sQ.stringify=function(){if(V4)return U4;V4=!0;var b=Laa(),e=Maa();return U4=function(m,a){a=a||{};var g=a.compress?new b(a):new e(a);return a.sourcemap?(cba()(g),m=g.compile(m),g.applySourceMaps(),a="generator"===a.sourcemap?
g.map:g.map.toJSON(),{code:m,map:a}):m=g.compile(m)}}());var ii=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js");ii.obj=Pf;ii.promise=yg;ii.string=vh;ii.pt=oh;ii.Morph=nk;ii.vdom=oD;ii.addOrChangeCSSDeclaration=ne;ii.css=sQ;var tJ=ii.vdom;ii.diff=tJ.diff;ii.patch=tJ.patch;ii.h=tJ.h;ii.createElement=tJ.create;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),m=e.hasOwnProperty("CustomVNode")&&"function"===typeof e.CustomVNode?e.CustomVNode:e.CustomVNode=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){this.morph=a;this.renderer=g;this.morphVtree=null;this.key="custom-"+a.id}},{key:"type",get:function(){return"Widget"}},{key:"renderMorph",value:function(){var a=this.morph,g=this.morphVtree=this.renderer.renderMorph(a),l="customNode-key-"+a.id;g.children[0]&&g.children[0].key===l||g.children.unshift(ii.h(a.domNodeTagName||
"div",{key:l},[]));return g}},{key:"init",value:function(){var a=ii.createElement(this.renderMorph(),this.renderer.domEnvironment);a.childNodes[0].appendChild(this.morph.domNode);this.morph.cssDeclaration&&this.morph.ensureCSSDeclaration();return a}},{key:"update",value:function(a,g){a=a.morphVtree||this.renderMorph();var l=this.renderMorph();a=ii.diff(a,l);ii.patch(g,a);return null}},{key:"destroy",value:function(a){(a=this.renderer.domEnvironment.document.getElementById("css-for-"+this.morph.id))&&
a.remove();console.log("[HTMLMorph] node of "+this.morph.name+" gets removed from DOM")}}],[{key:"className",get:function(){return"CustomVNode"}}],e,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:424,end:2280})})(void 0);var Hw=sa("au",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),
m=e.hasOwnProperty("HTMLMorph")&&"function"===typeof e.HTMLMorph?e.HTMLMorph:e.HTMLMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"isHTMLMorph",get:function(){return!0}},{key:"ensureCSSDeclaration",value:function(){var a=this;try{var g=ii.css.parse(this.cssDeclaration);this.whenRendered().then(function(){g.stylesheet.rules.forEach(function(l){l.selectors&&(l.selectors=l.selectors.map(function(q){return"#"+
a.id+" "+q}))});ii.addOrChangeCSSDeclaration("css-for-"+a.id,ii.css.stringify(g))})}catch(l){console.error("Error setting cssDeclaration of "+this+": "+l)}}},{key:"defaultHTML",get:function(){return'\n<div style="display: flex;\n            align-items: center;\n            justify-content: center;\n            height: 100%;\n            background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n  <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;HTML&#x2F;&gt;</p>\n</div>'}},
{key:"render",value:function(a){return new ii.CustomVNode(this,a)}},{key:"menuItems",value:function(){var a=this,g=Sb._get(Object.getPrototypeOf(m.prototype),"menuItems",this).call(this);g.unshift(["edit CSS...",function(){return a.world().execCommand("open workspace",{language:"css",content:a.cssDeclaration,target:a})}],["edit html...",function(){return a.world().execCommand("open workspace",{language:"html",content:a.html,target:a})}],{isDivider:!0});return g}}],[{key:"className",get:function(){return"HTMLMorph"}},
{key:"properties",get:function(){return{extent:{defaultValue:ii.pt(420,330)},html:{after:["cssDeclaration"],isStyleProp:!0,initialize:function(){this.html=this.defaultHTML},get:function(){return this.domNode.innerHTML},set:function(a){this.domNode.innerHTML=a;if(a.includes("<script")){a=this.domNode.querySelectorAll("script");a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;g=a.next()){var l=g.value;g=l.parentNode;l.remove();for(var q=document.createElement("script"),r=$jscomp.makeIterator(l.attributes),
u=r.next();!u.done;u=r.next())u=u.value,q.setAttribute(u.name,u.value);l=$jscomp.makeIterator(l.childNodes);for(r=l.next();!r.done;r=l.next())q.appendChild(r.value);g.appendChild(q)}}}},domNodeTagName:{readOnly:!0,get:function(){return"div"}},domNodeStyle:{readOnly:!0,get:function(){return"position: absolute; width: 100%; height: 100%;"}},domNode:{derived:!0,get:function(){this._domNode||(this._domNode=this.document.createElement(this.domNodeTagName),this._domNode.setAttribute("style",this.domNodeStyle));
return this._domNode},set:function(a){this.domNode.parentNode&&this.domNode.parentNode.replaceChild(a,this.domNode);return this._domNode=a}},document:{readOnly:!0,get:function(){return this.env.domEnv.document}},scrollExtent:{readOnly:!0,get:function(){return ii.pt(this.domNode.scrollWidth,this.domNode.scrollHeight)}},cssDeclaration:{isStyleProp:!0,set:function(a){this.setProperty("cssDeclaration",a);a?this.ensureCSSDeclaration():(a=this.env.domEnv.document.getElementById("css-for-"+this.id))&&a.remove()}}}}}],
e,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2605,end:6528})}(ii.Morph));ii.HTMLMorph=Hw;ii.HTMLMorph=Hw;ii.HTMLMorph=Hw;var mE=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),m=e.hasOwnProperty("IFrameMorph")&&"function"===typeof e.IFrameMorph?
e.IFrameMorph:e.IFrameMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"isIFrameMorph",get:function(){return!0}},{key:"reload",value:function(){return this.src?this.loadURL(this.src):this.srcDoc?this.displayHTML(this.srcDoc):null}},{key:"whenLoaded",value:function(){return this._whenLoaded||Promise.resolve()}},{key:"displayHTML",value:function(a,g){g=void 0===g?{}:g;var l=this,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==
v.nextAddress){q=g;if(r=void 0===q.keepScroll?!0:q.keepScroll)u=l.iframeScroll;l.srcDoc=a;return v.yield(l.whenLoaded(),2)}r&&u&&(l.iframeScroll=u);return v.return(l)})}},{key:"loadURL",value:function(a,g){g=void 0===g?{}:g;var l=this,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){q=g;if(r=void 0===q.keepScroll?!0:q.keepScroll)u=l.iframeScroll;l.src=a;return v.yield(l.whenLoaded(),2)}r&&u&&(l.iframeScroll=u);return v.return(l)})}},{key:"defaultSrcDoc",get:function(){return'\n    <div style="display: flex;\n                align-items: center;\n                justify-content: center;\n                height: 100%;\n                background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n      <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;iFrame&#x2F;&gt;</p>\n    </div>'}},
{key:"defaultHTML",get:function(){return'<iframe width="100%" height="100%" frameBorder="false" srcdoc=""></iframe>'}}],[{key:"className",get:function(){return"IFrameMorph"}},{key:"example",value:function(){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return a=(new ii.IFrameMorph).openInWindow({title:"iframe"}).targetMorph,a.srcDoc="",a.src="http://localhost:9011/worlds/html%20export",g.yield(a.loadURL("https://google.com"),2);a.iframe.src;a.iframe.srcDoc;
a.src="";a.srcDoc="fooo";return g.yield(a.reload(),0)})}},{key:"properties",get:function(){return{html:{initialize:function(){this.html=this.defaultHTML;this.srcDoc=this.defaultSrcDoc}},iframe:{derived:!0,readOnly:!0,after:["domNode"],get:function(){return this.domNode.querySelector("iframe")}},src:{derived:!0,after:["iframe"],get:function(){return this.iframe.src},set:function(a){this.iframe.removeAttribute("srcDoc");this.iframe.src=a;var g=ii.promise.deferred().resolve;this._whenLoaded=ii.promise;
this.iframe.onload=function(l){return g(l)}}},srcDoc:{derived:!0,after:["iframe"],get:function(){return this.iframe.srcdoc},set:function(a){this.iframe.removeAttribute("src");this.iframe.srcdoc=a;this._whenLoaded=this.whenRendered().then(function(){return ii.promise.delay(20)})}},iframeScroll:{derived:!0,after:["iframe"],get:function(){try{var a=this.iframe.contentWindow;return ii.pt(a.scrollX,a.scrollY)}catch(g){return ii.pt(0,0)}},set:function(a){try{this.iframe.contentWindow.scrollTo(a.x,a.y)}catch(g){}}}}}}],
e,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6538,end:9730})}(ii.HTMLMorph);ii.IFrameMorph=mE;ii.IFrameMorph=mE;ii.IFrameMorph=mE;var cla=Object.freeze({__proto__:null,HTMLMorph:Hw,IFrameMorph:mE}),xk=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js");xk.arr=vf;
xk.obj=Pf;xk.rect=Ii;xk.ShadowObject=bq;xk.morph=wa;var dt=sa("aS",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js"),m=e.hasOwnProperty("StyleSheet")&&"function"===typeof e.StyleSheet?e.StyleSheet:e.StyleSheet=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){xk.obj.isObject(a)&&!g&&(g=a,a=null);this.rules=
g;for(var l in g)g[l]=this.unwrapFoldedProps(g[l]);this.name=a}},{key:"copy",value:function(){var a={},g;for(g in this.rules)a[g]=Object.assign({},this.rules[g]);return new xk.StyleSheet(this.name,a)}},{key:"__only_serialize__",get:function(){return["rules","context"]}},{key:"context",set:function(a){this._context=a}},{key:"context",get:function(){return this._context}},{key:"unwrapFoldedProps",value:function(a){["borderRadius","borderWidth","borderColor","borderStyle"].forEach(function(g){if(g in
a){var l=a[g];l||(l=0);a[g]=4==xk.arr.intersect(xk.obj.keys(l),["top","left","bottom","right"]).length?l:{top:l,bottom:l,right:l,left:l,valueOf:function(){return l}}}});return a}},{key:"removeRule",value:function(a){delete this.rules[a];this.context.requestStyling()}},{key:"setRule",value:function(a,g){this.rules[a]=this.unwrapFoldedProps(g);this.context.requestStyling()}},{key:"toggleRule",value:function(a,g){this.rules[a]._deactivated=!g;this.context.requestStyling()}},{key:"applicableRules",value:function(){var a=
{},g;for(g in this.rules)a[g]={styleSheet:this,rule:g};return a}},{key:"toJSExpr",value:function(){return"new StyleSheet("+xk.obj.inspect(this.rules,{customPrinter:function(a,g,l){return a&&a.isColor||a&&a.isGradient?a.toJSExpr():a&&a.isPoint?a.toString():a&&xk.arr.all([a.top,a.left,a.right,a.bottom],function(q){return q&&xk.obj.equals(q,a.top)})?l(a.top):a&&xk.obj.keys(a).includes("_rev")?l(xk.obj.dissoc(a,["_rev","_deactivated"])):g},escapeKeys:!0})+")"}},{key:"applyRule",value:function(a,g,l){var q=
this.rules[a];if(q._deactivated)return{};q=xk.obj.dissoc(q,["_deactivated"]);return g.withMetaDo({styleSheetChange:!0},function(){if("layout"in q){var r=q.layout.copy();r.container=g;q.layout=r}"dropShadow"in q&&(q.dropShadow=new xk.ShadowObject(q.dropShadow),q.dropShadow.morph=g);"padding"in q&&(q.padding=q.padding.isRect?q.padding:xk.rect(q.padding,q.padding));r=xk.obj.keys(q).filter(function(z){return!xk.obj.equals(g[z],q[z])});r=xk.obj.select(q,r);var u=g.propertiesAndPropertySettings().properties,
v={},y;for(y in q)v[y]=u[y]&&u[y].defaultValue||g[y];l?g.animate(Object.assign({},r,{duration:l.duration,easing:l.easing})):Object.assign(g,r);return v})}}],[{key:"className",get:function(){return"StyleSheet"}}],e,{pathInPackage:function(){return"style-sheets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:203,end:3669})}(void 0));
xk.StyleSheet=dt;xk.StyleSheet=dt;xk.StyleSheet=dt;var og=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js");og.obj=Pf;og.arr=vf;og.num=Bk;og.Rectangle=ee;og.rect=Ii;og.Color=Wf;og.pt=oh;og.connect=fk;og.noUpdate=yp;og.signal=tl;og.disconnect=Jm;og.Text=rr;og.Range=Gw;og.HTMLMorph=Hw;og.Icon=sn;og.morph=wa;var tQ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),m=e.hasOwnProperty("InputLine")&&"function"===typeof e.InputLine?e.InputLine:
e.InputLine=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);og.connect(this,"textChange",this,"onInputChanged");og.connect(this,"selectionChange",this,"fixCursor")}},{key:"onChange",value:function(a){"extent fontSize padding fontFamily position selection".split(" ").includes(a.prop)&&
this.updatePlaceholder();return Sb._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a)}},{key:"isInputLine",get:function(){return!0}},{key:"allowDuplicatesInHistory",get:function(){return!1}},{key:"resetHistory",value:function(){this.inputHistory={items:[],max:50,index:0}}},{key:"inputHistory",get:function(){return this._inputHistory?this._inputHistory:this._inputHistory=this.historyId?this.constructor.getHistory(this.historyId):{items:[],max:30,index:0}}},{key:"inputHistory",set:function(a){this._inputHistory=
a;this.historyId&&this.constructor.setHistory(this.historyId,this._inputHistory)}},{key:"clear",value:function(){this.input=""}},{key:"focus",value:function(){this.fixCursor();Sb._get(Object.getPrototypeOf(m.prototype),"focus",this).call(this)}},{key:"onBlur",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onBlur",this).call(this,a);this.updatePlaceholder()}},{key:"fitToLineHeight",value:function(){this.height=this.defaultLineHeight+this.padding.top()+this.padding.bottom()}},{key:"indicateError",
value:function(a){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return g.borderWidth=3,g.borderColor=og.Color.red,g._errorIcon=g.addMorph(g._errorIcon||og.morph({type:"label",value:[" "+a,{fontSize:18}," ",{}].concat($jscomp.arrayFromIterable(og.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:20,fontColor:og.Color.red,opacity:0,reactsToPointer:!1,fill:og.Color.white.withA(.9)})),l.yield(g.whenRendered(),2);g._errorIcon.opacity=
1;g._errorIcon.rightCenter=g.innerBounds().insetBy(10).rightCenter();l.jumpToEnd()})}},{key:"clearError",value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=og.Color.transparent)}},{key:"updatePlaceholder",value:function(){var a=this.getSubmorphNamed("placeholder");if(a)if(this.input.length)a.visible=!1;else{var g=this.innerBounds();a.fontSize=this.fontSize;a.visible=!0;a.height=this.height;a.padding=this.padding;a.defaultTextStyle=this.defaultTextStyle;
a.lineHeight=this.height+"px";a.fit();a.leftCenter=this.label.length?g.rightCenter().addXY(0,this.borderWidth):g.leftCenter().withX(0)}}},{key:"fixCursor",value:function(){this.label&&(this.positionToIndex(this.selection.lead)<this.label.length&&(this.selection.lead=this.indexToPosition(this.label.length)),this.positionToIndex(this.selection.anchor)<this.label.length&&(this.selection.anchor=this.indexToPosition(this.label.length)))}},{key:"acceptInput",value:function(){var a=this.input;this.onInput(a);
return a}},{key:"onInput",value:function(a){0<this.input.length&&this.addInputToHistory(this.input);this.clearOnInput&&this.clear();og.signal(this,"inputAccepted",a)}},{key:"onInputChanged",value:function(a){og.signal(this,"inputChanged",a);this.clearError();this.updatePlaceholder()}},{key:"onMouseDown",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onMouseDown",this).call(this,a);this._errorIcon&&this._errorIcon.remove()}},{key:"deleteText",value:function(a){a=a.isRange?a:new og.Range(a);
if(!a.isEmpty())return a=a.subtract({start:{row:0,column:0},end:{row:0,column:this.label.length}})[0],Sb._get(Object.getPrototypeOf(m.prototype),"deleteText",this).call(this,a)}},{key:"addInputToHistory",value:function(a){var g=this.inputHistory,l=g.items;if(og.arr.last(l)!==a){l.push(a);l.length>g.max&&(g.items=l=l.slice(-g.max));g.index=l.length-1;if(!this.allowDuplicatesInHistory)for(l=g.items.length-1;l--;)g.items[l]===a&&(g.items.splice(l,1),g.index--);this.historyId&&this.constructor.addHistoryToLocalStorage(this.historyId,
g)}}},{key:"browseHistory",value:function(){var a=this,g,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return g=a.inputHistory.items.map(function(v,y){return{isListItem:!0,string:v,value:y}}).reverse(),u.yield(a.world().filterableListPrompt("Choose item:",g,{commands:[a.histEditCommandForHistBrowse()]}),2);l=u.yieldResult;q=$jscomp.makeIterator(l.selected);r=q.next().value;"number"===typeof r&&a.setAndShowHistItem(r);a.focus();u.jumpToEnd()})}},{key:"histEditCommandForHistBrowse",
value:function(){var a=this;return{name:"edit history "+this.historyId,exec:function(g){var l,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return l=a.inputHistory.items.slice().reverse(),v.yield(g.world().editListPrompt("edit history "+a.historyId,l),2);q=v.yieldResult;r=q.status;u=q.list;if("canceled"===r)return v.return(!0);l=l.filter(function(y){return y.isListItem?u.includes(y.value):u.includes(y)});a.inputHistory=Object.assign({},a.inputHistory,{items:l});
g.get("list").items=l.map(function(y,z){return{isListItem:!0,string:y,value:z}}).reverse();return v.return(!0)})}}}},{key:"setAndShowHistItem",value:function(a){var g=this.inputHistory,l=g.items,q=l.length-1;og.num.between(a,0,q+1)?g.index=a:g.index=a=q;this.input!==l[a]&&"undefined"!==typeof l[a]&&(this.input=l[a])}},{key:"showHistItem",value:function(a){a=a||"next";var g=this.inputHistory,l=g.items,q=l.length-1,r=g.index;og.num.between(r,0,q+1)||(g.index=r=q);if(this.input!==l[r]&&"undefined"!==
typeof l[r])this.input=l[r];else{if("next"===a){if(r>q)return;r=++g.index}else{if(0>=r)return;r=--g.index}this.input=l[r]||""}}},{key:"commands",get:function(){var a=this;return[{name:"accept input",exec:function(){a.acceptInput();return!0}},{name:"show previous input from history",exec:function(){a.showHistItem("prev");return!0}},{name:"show next input from history",exec:function(){a.showHistItem("next");return!0}},{name:"browse history",exec:function(){a.browseHistory();return!0}},{name:"remove items from history",
exec:function(g){var l,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return l=g.inputHistory,q=l.items.map(function(y,z){return{isListItem:!0,string:y,value:z}}).reverse(),v.yield(g.world().filterableListPrompt("Choose items to delete:",q,{multiSelect:!0}),2);r=v.yieldResult;u=r.selected;og.arr.sort(u).reverse().forEach(function(y){y<l.index&&l.index--;l.items.splice(y,1)});g.inputHistory=l;return v.return(!0)})}}].concat(Sb._get(Object.getPrototypeOf(m.prototype),
"commands",this))}},{key:"keybindings",get:function(){return Sb._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"},{keys:"Up|Ctrl-Up|Alt-P",command:"show previous input from history"},{keys:"Down|Ctrl-Down|Alt-N",command:"show next input from history"},{keys:"Alt-H",command:"browse history"},{keys:"Alt-Shift-H",command:"remove items from history"}])}},{key:"htmlExport_transformNode",value:function(a){var g=
a.ownerDocument.createElement("input"),l=a.querySelector(".newtext-text-layer.actual");g.id=a.id;g.className=a.className;g.style=a.style.cssText;Object.assign(g.style,og.obj.select(l.style,"padding font-family font-weight font-style text-decoration font-size color".split(" ")));g.placeholder=this.placeholder;g.type="text";g.autocomplete=g.name=this.name.replace(/[\s"]/g,"-");return g}}],[{key:"className",get:function(){return"InputLine"}},{key:"getHistoryFromLocalSorage",value:function(a){if("undefined"===
typeof localStorage)return null;try{var g=localStorage.getItem("lively.morphic-inputline-"+a);return g?JSON.parse(g):null}catch(l){return null}}},{key:"addHistoryToLocalStorage",value:function(a,g){if("undefined"!==typeof localStorage)try{localStorage.setItem("lively.morphic-inputline-"+a,JSON.stringify(g))}catch(l){console.error(l)}}},{key:"histories",get:function(){this._histories||(this._histories=new Map);return this._histories}},{key:"getHistory",value:function(a){var g=this.histories.get(a);
if(g)return g;g=this.getHistoryFromLocalSorage(a)||{items:[],max:50,index:0};this.histories.set(a,g);return g}},{key:"setHistory",value:function(a,g){g=void 0===g?{items:[],max:50,index:0}:g;this.histories.set(a,g);this.addHistoryToLocalStorage(a,g);return g}},{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},extent:{defaultValue:og.pt(100,20)},padding:{defaultValue:og.Rectangle.inset(2,4)},clipMode:{defaultValue:"hidden"},lineWrapping:{defaultValue:!1},
historyId:{defaultValue:null},clearOnInput:{defaultValue:!1},label:{after:["textAndAttributes","extent","padding","submorphs"],defaultValue:"",set:function(a){var g=this;this.setProperty("label",a);this.textString.startsWith(a)||og.noUpdate(function(){g.textString=a+g.input})}},input:{after:["label"],derived:!0,get:function(){return this.textString.slice(this.label.length)},set:function(a){this.textString=this.label+(a?String(a):"");this.updatePlaceholder()}},placeholder:{after:["submorphs","label",
"defaultTextStyle"],dervied:!0,get:function(){var a=this.getSubmorphNamed("placeholder");return a?a.value:null},set:function(a){var g=this.getSubmorphNamed("placeholder");a?g?(g.defaultTextStyle=Object.assign({},this.defaultTextStyle,{fontColor:og.Color.gray}),g.value=a):this.addMorph(og.Text.makeLabel(a,Object.assign({},this.defaultTextStyle,{name:"placeholder",reactsToPointer:!1,fontColor:og.Color.gray}))):g&&g.remove();this.updatePlaceholder()}}}}}],e,{pathInPackage:function(){return"text/input-line.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:461,end:14346})}(og.Text);tQ=og.InputLine;var nE=sa("aZ",tQ),Iw=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),m=e.hasOwnProperty("PasswordInputLine")&&"function"===typeof e.PasswordInputLine?e.PasswordInputLine:e.PasswordInputLine=function(a){a&&
a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"onChange",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a);"borderRadius"==a.prop&&this.updateHtml(this.input)}},{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.onLoad()}},{key:"onChange",
value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a);["fill","borderRadius"].includes(a.prop)&&this.updateHtml(this.input)}},{key:"onLoad",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield(a.whenRendered(),2);a.ensureInputNode().then(function(l){a.updateHtml(a.input);l.onkeydown=function(q){return a.env.eventDispatcher.dispatchDOMEvent(q,a,"onKeyDown")};l.onkeyup=function(q){return a.env.eventDispatcher.dispatchDOMEvent(q,
a,"onKeyUp")}});g.jumpToEnd()})}},{key:"onMouseDown",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onMouseDown",this).call(this,a);this._errorIcon&&this._errorIcon.remove()}},{key:"onAfterRender",value:function(a){this.ensureInputNode()}},{key:"ensureInputNode",value:function(){var a=this;return this.whenRendered().then(function(){var g=a.domNode;g.parentNode&&"INPUT"==g.parentNode.tagName&&(g.parentNode.remove(),g=a.env.renderer.getNodeForMorph(a),g.insertBefore(a.domNode,g.firstChild));
return a.domNode})}},{key:"onKeyDown",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onKeyDown",this).call(this,a);if(this.input!=this.lastInput)this.onInputChanged(this.input);this.lastInput=this.input}},{key:"focus",value:function(){Sb._get(Object.getPrototypeOf(m.prototype),"focus",this).call(this);this.domNode&&this.domNode.focus()}},{key:"onFocus",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onFocus",this).call(this,a);this._originalShadow||(this._originalShadow=
this.dropShadow,this.highlightWhenFocused&&this.animate({dropShadow:this.haloShadow,duration:200}))}},{key:"onBlur",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onBlur",this).call(this,a);this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});this._originalShadow=null}},{key:"indicateError",value:function(a){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return g.borderWidth=3,g.borderColor=og.Color.red,
g._errorIcon=g.addMorph(g._errorIcon||og.morph({type:"label",value:[" "+a,{fontSize:18}," ",{}].concat($jscomp.arrayFromIterable(og.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:20,fontColor:og.Color.red,opacity:0,reactsToPointer:!1,fill:og.Color.white.withA(.9)})),l.yield(g.whenRendered(),2);g._errorIcon.opacity=1;g._errorIcon.rightCenter=g.innerBounds().insetBy(10).rightCenter();l.jumpToEnd()})}},{key:"clearError",value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),
this._errorIcon=null,this.borderColor=og.Color.transparent)}},{key:"acceptInput",value:function(){var a=this.input;og.signal(this,"inputAccepted",a);return a}},{key:"onInputChanged",value:function(a){this.clearError();og.signal(this,"inputChanged",a)}},{key:"updateHtml",value:function(a){var g=this,l,q,r,u,v,y,z,A,B,G,E,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){if(1==J.nextAddress)return l=g,q=l.fontSize,r=l.fontFamily,u=l.padding,v=l.placeholder,y=void 0===l.fill?Wf.white:
l.fill,z=l.borderRadius,A=u.top(),B=u.right(),G=u.bottom(),E=u.left(),J.yield(g.ensureInputNode(),2);K=J.yieldResult;K.setAttribute("type","password");K.setAttribute("placeholder",v);K.setAttribute("value",a);Object.assign(K.style,{position:"absolute",width:"calc(100% - "+E+"px - "+B+"px)","border-width":0,outline:"none","border-radius":z.valueOf()+"px",background:y.toString(),padding:A+"px "+B+"px "+G+"px "+E+"px","font-size":q+"px","font-family":""+r});J.jumpToEnd()})}},{key:"commands",get:function(){var a=
this;return[{name:"accept input",exec:function(){a.acceptInput();return!0}}].concat(Sb._get(Object.getPrototypeOf(m.prototype),"commands",this))}},{key:"keybindings",get:function(){return Sb._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"}])}},{key:"htmlExport_transformNode",value:function(a){var g=a.ownerDocument,l=g.createElement("div"),q=a.querySelector("input");g=g.createElement("input");
q.childNodes[0]&&"INPUT"===q.childNodes[0].tagName&&(q=q.childNodes[0]);g.id=a.id;g.className=a.className;l.style=a.style.cssText;Object.assign(g.style,og.obj.select(q.style,"padding font-family font-weight font-style text-decoration font-size border-radius color".split(" ")));g.style.position="absolute";g.style.width=a.style.width;g.style.height=a.style.height;g.style["border-width"]=a.style["border-width"];g.placeholder=this.placeholder;g.type="password";g.autocomplete=g.name=this.name.replace(/[\s"]/g,
"-");l.appendChild(g);l.appendChild(a.childNodes[1]);return l}}],[{key:"className",get:function(){return"PasswordInputLine"}},{key:"properties",get:function(){return{extent:{defaultValue:og.pt(100,20)},html:{derived:!0,initialize:function(){},get:function(){return""},set:function(a){}},highlightWhenFocused:{defaultValue:!0},haloShadow:{type:"Shadow"},domNodeTagName:{readOnly:!0,get:function(){return"input"}},domNodeStyle:{readOnly:!0,get:function(){return"background: grey"}},input:{derived:!0,after:["domNode"],
get:function(){return this.domNode&&this.domNode.value||""},set:function(a){this.domNode.value=a;this.updateHtml(this.input)}},placeholder:{after:["domNode"],set:function(a){this.setProperty("placeholder",a);this.updateHtml(this.input)}},fontSize:{defaultValue:12,after:["input"],set:function(a){this.setProperty("fontSize",a);this.updateHtml(this.input)}},fontFamily:{defaultValue:"sans-serif",after:["input"],set:function(a){this.setProperty("fontFamily",a);this.updateHtml(this.input)}},padding:{defaultValue:og.Rectangle.inset(2),
after:["input"],set:function(a){this.setProperty("padding",a);this.updateHtml(this.input)}}}}}],e,{pathInPackage:function(){return"text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14421,end:21250})}(og.HTMLMorph);og.PasswordInputLine=Iw;og.PasswordInputLine=Iw;og.PasswordInputLine=Iw;og.default=tQ;var Df=lively.FreezerRuntime.recorderFor("lively.morphic/index.js");
Df.default=wk;Df.config=wk;Object.assign(Df,Hka);Object.assign(Df,Lka);Object.assign(Df,Qka);Object.assign(Df,Rka);Object.assign(Df,Nka);Object.assign(Df,cla);Object.assign(Df,ofa);Object.assign(Df,F4);Df.StyleSheet=dt;Df.StyleSheet=dt;Df.ShadowObject=bq;Df.ShadowObject=bq;Df.addOrChangeCSSDeclaration=ne;Df.addOrChangeCSSDeclaration=ne;Df.addOrChangeLinkedCSS=js;Df.addOrChangeLinkedCSS=js;Df.easings=cq;Df.easings=cq;Df.stringToEasing=is;Df.stringToEasing=is;Object.assign(Df,Ika);Df.Icon=sn;Df.Icon=
sn;Df.loadMorphFromSnapshot=ps;Df.loadMorphFromSnapshot=ps;Object.assign(Df,Jka);Df.World=ew;Df.Hand=$A;Df.Morph=nk;Df.Image=Fy;Df.Ellipse=Ey;Df.Triangle=VA;Df.Path=Gy;Df.Polygon=WA;Df.LineMorph=XA;Df.Text=rr;Df.Label=sr;Df.HTMLMorph=Hw;Df.InputLine=nE;Df.PasswordInputLine=Iw;Df.InputLine=nE;Df.InputLine=nE;Df.PasswordInputLine=Iw;Df.PasswordInputLine=Iw;Df.locateClass=kj;Df.morph=wa;Df.addClassMappings=fa;Df.inspect=ky;Df.touchInputDevice=Qo;Df.addClassMappings({"default":Df.Morph,world:Df.World,
hand:Df.Hand,image:Df.Image,ellipse:Df.Ellipse,triangle:Df.Triangle,path:Df.Path,text:Df.Text,input:Df.InputLine,label:Df.Label,polygon:Df.Polygon,line:Df.LineMorph,html:Df.HTMLMorph});Df.morph=wa;Df.morph=wa;Df.inspect=ky;Df.inspect=ky;Df.touchInputDevice=Qo;Df.touchInputDevice=Qo;var dla=Object.freeze({__proto__:null,config:wk,StyleSheet:dt,ShadowObject:bq,addOrChangeCSSDeclaration:ne,addOrChangeLinkedCSS:js,easings:cq,stringToEasing:is,Icon:sn,loadMorphFromSnapshot:ps,InputLine:nE,PasswordInputLine:Iw,
morph:wa,inspect:ky,touchInputDevice:Qo,Morph:nk,Ellipse:Ey,Triangle:VA,Image:Fy,PathPoint:aE,Path:Gy,Polygon:WA,LineMorph:XA,World:ew,Hand:$A,Text:rr,Label:sr,Anchor:aB,HTMLMorph:Hw,IFrameMorph:mE,MorphicEnv:Wp,CustomLayout:bE,SnapLayout:cE,VerticalLayout:Dw,HorizontalLayout:bt,ProportionalLayout:dE,CenteredTilingLayout:eE,TilingLayout:fE,CellGroup:gE,LayoutColumn:hE,LayoutRow:iE,LayoutCell:jE,GridLayout:Ew,TooltipViewer:YA,Tooltip:Hy,MorphicDB:Ku}),Il=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js");
Il.Morph=nk;Il.stringToEasing=is;Il.easings=cq;Il.pt=oh;Il.num=Bk;Il.Path=nh;Il.promise=yg;Il.fun=nl;var X4=function(b){var e=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js"),m=e.hasOwnProperty("ModuleProgress")&&"function"===typeof e.ModuleProgress?e.ModuleProgress:e.ModuleProgress=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"relayout",value:function(){!this.isComponent&&Il.Path("owner.isWorld").get(this)&&
(this.bottomCenter=$world.visibleBounds().center().subXY(0,100))}},{key:"reset",value:function(){var a=this.getAllNamed(/stage/);this.stages=new Map(a.map(function(g){return[g,"not loaded"]}));this.updateProgressVisualization();this.getAllNamed(/label/).map(function(g){g._cachedTextBounds=null;g.fit()})}},{key:"updateProgressBar",value:function(){if(this._lastWidth){this.relayout();var a=this.get("progress path"),g=Il.stringToEasing(Il.easings.inOutExpo)(Il.num.clamp(Date.now()-this._timeStamp,0,
1E3)/1E3);a.width=Il.num.interpolate(g,this._lastWidth,this._currentProgress)}}},{key:"fastLoadTest",value:function(){var a=this,g,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){1==u.nextAddress&&(a.reset(),g="lively.lang lively.ast lively.source-transform lively.classes lively.vm lively.modules lively.user lively.storage lively.morphic".split(" "),l=$jscomp.makeIterator(g),q=l.next());if(3!=u.nextAddress){if(q.done)return u.jumpTo(0);r=q.value;a.finishPackage({packageName:r,
loaded:!0});return u.yield(Il.promise.delay(200),3)}q=l.next();return u.jumpTo(2)})}},{key:"finishPackage",value:function(a){var g=this,l=a.frozen,q=a.loaded;a="stage "+a.packageName.replace("lively.","");a=this.get(a);l&&this.stages.set(a,"frozen");q&&this.stages.set(a,"loaded");Il.fun.debounceNamed("update progress",200,function(){g.updateProgressVisualization()})()}},{key:"updateProgressVisualization",value:function(){var a=this,g=this.getSubmorphNamed("progress path"),l=this.getAllNamed(/stage/),
q=l[0];l.forEach(function(r){var u=r.get("checkmark"),v=r.get("frozen indicator"),y=r.get("icon");r=a.stages.get(r);if("not loaded"!=r){q=u;if("loaded"==r){if(u.visible)return;u.animate({duration:300,visible:!0})}if("frozen"==r){if(v.visible)return;v.animate({duration:300,visible:!0})}y.opacity=1}else u.visible=!1,v.visible=!1,y.opacity=.2});l=this.localizePointFrom(Il.pt(-20,0),q).x;l=Math.max(20,l-g.left);g.visible=20==l?!1:!0;this._lastWidth=g.width;this._timeStamp=Date.now();this._currentProgress=
l}}],[{key:"className",get:function(){return"ModuleProgress"}},{key:"properties",get:function(){return{stages:{serialize:!1,after:["submorphs"],initialize:function(){var a=this;this.whenRendered().then(function(){a.reset()})}}}}}],e,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ModuleProgress",version:"0.1.1-108"}}},{start:192,
end:3478})}(Il.Morph);X4=Il.ModuleProgress;Il.default=X4;var th=lively.FreezerRuntime.recorderFor("lively.components/buttons.js");th.Morph=nk;th.morph=wa;th.Icon=sn;th.touchInputDevice=Qo;th.Rectangle=ee;th.LinearGradient=El;th.Color=Wf;th.pt=oh;th.signal=tl;th.connect=fk;th.arr=vf;th.obj=Pf;th.Closure=Ei;var dB=sa("b1",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),m=e.hasOwnProperty("Button")&&"function"===typeof e.Button?e.Button:e.Button=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a)}},{key:"isButton",get:function(){return!0}},{key:"enable",value:function(){this.deactivated=!1}},{key:"disable",value:function(){this.deactivated=!0}},{key:"onChange",value:function(a){var g=a.prop;if(this.label)switch(g){case "extent":case "fontSize":case "fontFamily":this.relayout();
break;case "padding":this.fit()}return Sb._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a)}},{key:"onSubmorphChange",value:function(a,g){g===this.labelMorph&&"extent"===a.prop&&this.relayout();return Sb._get(Object.getPrototypeOf(m.prototype),"onSubmorphChange",this).call(this,a,g)}},{key:"fitLabelMorph",value:function(){var a=this;this.labelMorph.whenFontLoaded().then(function(){a.labelMorph.invalidateTextLayout();a.labelMorph.fit()})}},{key:"relayout",value:function(){var a=
this.labelMorph;if(a&&!this._relayouting){this._relayouting=!0;try{var g=this.padding,l=g.top(),q=g.bottom(),r=g.left(),u=g.right(),v=a.height+l+q,y=a.width+r+u;v>this.height&&(this.height=v);y>this.width&&(this.width=y);var z=this.innerBounds().insetByRect(g);a.center=z.center().subPt(this.origin)}finally{this._relayouting=!1}}}},{key:"fit",value:function(){var a=this.padding,g=this.labelMorph;g.fit();this.extent=a.bottomLeft().addPt(a.bottomRight()).addPt(g.extent);this.relayout();return this}},
{key:"trigger",value:function(){try{th.signal(this,"fire"),"function"==typeof this.action&&this.action()}catch(g){var a=this.world();a?a.logError(g):console.error(g)}}},{key:"considerPress",value:function(a){return th.touchInputDevice?!0:this.innerBoundsContainsPoint(a.positionIn(this))}},{key:"onMouseDown",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onMouseDown",this).call(this,a);a.isAltDown()||this.deactivated||!this.considerPress(a)||(this.pressed={originalFill:this.fill})}},
{key:"onMouseUp",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onMouseUp",this).call(this,a);a.isClickTarget(this)&&this.pressed&&(this.trigger(),this.pressed=null)}},{key:"onDragStart",value:function(a){th.touchInputDevice?(this.draggable=!0,this.pressed=null):Sb._get(Object.getPrototypeOf(m.prototype),"onDragStart",this).call(this,a)}},{key:"onDrag",value:function(a){}},{key:"onHoverOut",value:function(a){!th.touchInputDevice&&this.pressed&&a.isClickTarget(this)&&(this.pressed=null)}},
{key:"onHoverIn",value:function(a){th.touchInputDevice||this.deactivated||!a.isClickTarget(this)||(this.pressed={originalFill:this.fill})}},{key:"interactivelyChangeLabel",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(a.world().prompt("edit button label",{input:a.labelMorph.textString,historyId:"lively.morphic-button-edit-label-hist"}),2);g=l.yieldResult;"string"===typeof g&&(a.label=g);l.jumpToEnd()})}},{key:"menuItems",
value:function(){var a=this,g=Sb._get(Object.getPrototypeOf(m.prototype),"menuItems",this).call(this);g.unshift({isDivider:!0});g.unshift(["change label",function(){return a.interactivelyChangeLabel()}]);return g}}],[{key:"className",get:function(){return"Button"}},{key:"properties",get:function(){return{padding:{isStyleProp:!0,defaultValue:th.Rectangle.inset(5,2)},draggable:{defaultValue:!1},extent:{defaultValue:th.pt(100,20)},borderColor:{defaultValue:th.Color.gray},borderWidth:{defaultValue:1},
borderRadius:{defaultValue:5},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:new th.LinearGradient({stops:[{offset:0,color:th.Color.white},{offset:1,color:th.Color.rgb(236,240,241)}],vector:0})},deactivated:{group:"button",defaultValue:!1,after:["labelMorph"],set:function(a){this.setProperty("deactivated",a);this.nativeCursor=a?"not-allowed":"pointer";this.labelMorph.opacity=a?.3:1}},pressed:{group:"_internal",defaultValue:null,set:function(a){this.getProperty("pressed");this.setProperty("pressed",
a)}},fontSize:{group:"button styling",derived:!0,type:"Number",min:4,isStyleProp:!0,after:["label"],set:function(a){this.labelMorph.fontSize=a;this.labelMorph._parametrizedProps&&(this.labelMorph._parametrizedProps.fontSize=a)},get:function(){return this.labelMorph.fontSize}},fontColor:{group:"button styling",derived:!0,isStyleProp:!0,after:["labelMorph"],set:function(a){this.labelMorph.fontColor=a},get:function(){return this.labelMorph.fontColor}},labelMorph:{group:"_internal",after:["submorphs"],
serialize:!1,initialize:function(){this.labelMorph=this.getSubmorphNamed("label")||this.addMorph({type:"label",name:"label",value:"no label yet"})},get:function(){return this.getSubmorphNamed("label")},set:function(a){var g=this.labelMorph;g&&g.remove();a.name="label";a.reactsToPointer=!1;this.addMorphAt(a,0)}},labelWithTextAttributes:{group:"_internal",after:["labelMorph"],derived:!0,get:function(){return this.labelMorph.textAndAttributes},set:function(a){this.labelMorph.textAndAttributes=a}},label:{group:"button",
after:["labelMorph"],isStyleProp:!0,type:"RichText",set:function(a){a.isMorph?(this.setProperty("label",a.value),this.labelMorph=a):(this.setProperty("label",a),this.labelMorph.value=a,this.labelMorph._parametrizedProps&&(this.labelMorph._parametrizedProps.value=a));this.fitLabelMorph()}},fire:{group:"button",derived:!0,readOnly:!0,isSignal:!0},action:{serialize:!1}}}}],e,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:251,end:8297})}(th.Morph));th.Button=dB;th.Button=dB;th.Button=dB;var oE=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),m=e.hasOwnProperty("RadioButton")&&"function"===typeof e.RadioButton?e.RadioButton:e.RadioButton=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"getMaster",value:function(a){return a?
"styleguide://SystemPrompts/prompts/buttons/selection/selected":"styleguide://SystemPrompts/prompts/buttons/selection/unselected"}},{key:"reset",value:function(){var a=this.indicator;a.borderWidth=1;a.borderColor=th.Color.gray;this.selected=!1;th.connect(a,"onMouseUp",this,"select")}},{key:"morph",get:function(){var a=this.indicator;return this.submorphs.find(function(g){return g!==a})}},{key:"morph",set:function(a){var g=this.indicator;this.submorphs.forEach(function(l){l!==g&&l.remove()});a.position=
th.pt(50,0);this.addMorph(a)}},{key:"value",get:function(){if(!this.valueFn){try{var a=JSON.parse(this.valueFunctionString)}catch(g){a=this.valueFunctionString}this.valueFn=th.Closure.fromSource(a).recreateFunc()}return this.morph?this.valueFn(this.morph):void 0}},{key:"onMouseDown",value:function(a){this.select()}},{key:"select",value:function(){this.selected=!0;this.owner.setSelection(this)}}],[{key:"className",get:function(){return"RadioButton"}},{key:"properties",get:function(){return{indicator:{get:function(){return this.getSubmorphNamed("indicator")}},
master:{after:["selected"],initialize:function(){this.master={auto:this.getMaster(this.selected)}}},selectionColor:{},selectionStyle:{},selected:{after:["indicator"],defaultValue:!1,set:function(a){var g=this;this.whenRendered().then(function(l){g.master={auto:g.getMaster(a)}});this.setProperty("selected",!!a)}},valueFunctionString:{defaultValue:'"function (morph) { return morph.value; }"',set:function(a){this.setProperty("valueFunctionString",a.toString());this.valueFn=void 0}},submorphs:{initialize:function(){this.submorphs=
[{type:"ellipse",name:"indicator"}]}}}}}],e,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8306,end:10657})}(th.Morph);th.RadioButton=oE;th.RadioButton=oE;th.RadioButton=oE;var pE=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),m=e.hasOwnProperty("RadioButtonGroup")&&
"function"===typeof e.RadioButtonGroup?e.RadioButtonGroup:e.RadioButtonGroup=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"reset",value:function(){this.submorphs.forEach(function(a){return a.reset()});this.layout.layoutableSubmorphs[0].selected=!0}},{key:"removeAllButtons",value:function(){this.removeAllMorphs();this.height=10}},{key:"addButton",value:function(a,g){var l=new th.RadioButton;l.reset();
l.morph=a;void 0!=g&&(l.internalValue=g,l.valueFunctionString="function (morph) { return morph.owner.internalValue; }");this.addMorph(l);return l}},{key:"setSelection",value:function(a){this.submorphs.forEach(function(g){g!==a&&(g.selected=!1)});a.selected=!0}},{key:"selectedButton",get:function(){return this.submorphs.find(function(a){return a.selected})}},{key:"value",get:function(){var a=this.selectedButton;return a?a.value:null}},{key:"value",set:function(a){var g=this.submorphs.find(function(l){try{return l.value===
a}catch(q){return!1}});g?g.select():this.setSelection(null)}}],[{key:"className",get:function(){return"RadioButtonGroup"}},{key:"properties",get:function(){return{choices:{derived:!0,defaultValue:[],get:function(){return this.submorphs.map(function(a){return a.value})},set:function(a){var g=this;this.removeAllButtons();th.obj.isArray(a)?a.forEach(function(l){g.addButton(th.morph({name:"label",type:"label",value:l,reactsToPointer:!1}))}):[].concat($jscomp.arrayFromIterable(a.entries())).forEach(function(l){var q=
$jscomp.makeIterator(l);l=q.next().value;q=q.next().value;g.addButton(th.morph({name:"label",type:"label",value:l,reactsToPointer:!1}),q)});this.submorphs[0]&&this.setSelection(this.submorphs[0])},value:{derived:!0,after:["submorphs"],get:function(){var a=this.selectedButton;return a?a.value:null},set:function(a){var g=this.submorphs.find(function(l){try{return l.value===a}catch(q){return!1}});g?g.select():this.setSelection(null)}}}}}}],e,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:10666,end:13321})}(th.Morph);th.RadioButtonGroup=pE;th.RadioButtonGroup=pE;th.RadioButtonGroup=pE;var ela=Object.freeze({__proto__:null,Button:dB,RadioButton:oE,RadioButtonGroup:pE}),uJ={},Y4=!1,fla="undefined"!==typeof self?self:global,Z4=function(){if(Y4)return uJ;Y4=!0;!function(b,e){uJ?uJ=e():"function"==typeof define&&define.amd?define(e):(this||fla)[b]=
e()}("bowser",function(){function b(l){function q(Y){return(Y=l.match(Y))&&1<Y.length&&Y[1]||""}function r(Y){return(Y=l.match(Y))&&1<Y.length&&Y[2]||""}var u=q(/(ipod|iphone|ipad)/i).toLowerCase(),v=!/like android/i.test(l)&&/android/i.test(l),y=/nexus\s*[0-6]\s*/i.test(l),z=!y&&/nexus\s*[0-9]+/i.test(l),A=/CrOS/.test(l),B=/silk/i.test(l),G=/sailfish/i.test(l),E=/tizen/i.test(l),K=/(web|hpw)os/i.test(l),J=/windows phone/i.test(l),P=!J&&/windows/i.test(l),ea=!u&&!B&&/macintosh/i.test(l),ra=!v&&!G&&
!E&&!K&&/linux/i.test(l),D=q(/edge\/(\d+(\.\d+)?)/i),O=q(/version\/(\d+(\.\d+)?)/i),L=/tablet/i.test(l),N=!L&&/[^-]mobi/i.test(l),aa=/xbox/i.test(l);/opera|opr|opios/i.test(l)?A={name:"Opera",opera:!0,version:O||q(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(l)?A={name:"Opera Coast",coast:!0,version:O||q(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(l)?A={name:"Yandex Browser",yandexbrowser:!0,version:O||q(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(l)?A={name:"UC Browser",
ucbrowser:!0,version:q(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(l)?A={name:"Maxthon",maxthon:!0,version:q(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(l)?A={name:"Epiphany",epiphany:!0,version:q(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(l)?A={name:"Puffin",puffin:!0,version:q(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(l)?A={name:"Sleipnir",sleipnir:!0,version:q(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(l)?A={name:"K-Meleon",kMeleon:!0,version:q(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:
J?(A={name:"Windows Phone",windowsphone:!0},D?(A.msedge=!0,A.version=D):(A.msie=!0,A.version=q(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(l)?A={name:"Internet Explorer",msie:!0,version:q(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:A?A={name:"Chrome",chromeos:!0,chromeBook:!0,chrome:!0,version:q(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(l)?A={name:"Microsoft Edge",msedge:!0,version:D}:/vivaldi/i.test(l)?A={name:"Vivaldi",vivaldi:!0,version:q(/vivaldi\/(\d+(\.\d+)?)/i)||O}:G?A={name:"Sailfish",
sailfish:!0,version:q(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(l)?A={name:"SeaMonkey",seamonkey:!0,version:q(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(l)?(A={name:"Firefox",firefox:!0,version:q(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(l)&&(A.firefoxos=!0)):B?A={name:"Amazon Silk",silk:!0,version:q(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(l)?A={name:"PhantomJS",phantom:!0,version:q(/phantomjs\/(\d+(\.\d+)?)/i)}:
/slimerjs/i.test(l)?A={name:"SlimerJS",slimer:!0,version:q(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(l)||/rim\stablet/i.test(l)?A={name:"BlackBerry",blackberry:!0,version:O||q(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:K?(A={name:"WebOS",webos:!0,version:O||q(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(l)&&(A.touchpad=!0)):/bada/i.test(l)?A={name:"Bada",bada:!0,version:q(/dolfin\/(\d+(\.\d+)?)/i)}:E?A={name:"Tizen",tizen:!0,version:q(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||O}:
/qupzilla/i.test(l)?A={name:"QupZilla",qupzilla:!0,version:q(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||O}:/chromium/i.test(l)?A={name:"Chromium",chromium:!0,version:q(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||O}:/chrome|crios|crmo/i.test(l)?A={name:"Chrome",chrome:!0,version:q(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:v?A={name:"Android",version:O}:/safari|applewebkit/i.test(l)?(A={name:"Safari",safari:!0},O&&(A.version=O)):u?(A={name:"iphone"==u?"iPhone":"ipad"==u?"iPad":"iPod"},O&&(A.version=O)):A=/googlebot/i.test(l)?
{name:"Googlebot",googlebot:!0,version:q(/googlebot\/(\d+(\.\d+))/i)||O}:{name:q(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)};!A.msedge&&/(apple)?webkit/i.test(l)?(/(apple)?webkit\/537\.36/i.test(l)?(A.name=A.name||"Blink",A.blink=!0):(A.name=A.name||"Webkit",A.webkit=!0),!A.version&&O&&(A.version=O)):!A.opera&&/gecko\//i.test(l)&&(A.name=A.name||"Gecko",A.gecko=!0,A.version=A.version||q(/gecko\/(\d+(\.\d+)?)/i));A.msedge||!v&&!A.silk?u?(A[u]=!0,A.ios=!0):ea?A.mac=!0:aa?A.xbox=!0:P?A.windows=!0:ra&&
(A.linux=!0):A.android=!0;P="";A.windowsphone?P=q(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):u?(P=q(/os (\d+([_\s]\d+)*) like mac os x/i),P=P.replace(/[_\s]/g,".")):v?P=q(/android[ \/-](\d+(\.\d+)*)/i):A.webos?P=q(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):A.blackberry?P=q(/rim\stablet\sos\s(\d+(\.\d+)*)/i):A.bada?P=q(/bada\/(\d+(\.\d+)*)/i):A.tizen&&(P=q(/tizen[\/\s](\d+(\.\d+)*)/i));P&&(A.osversion=P);P=P.split(".")[0];if(L||z||"ipad"==u||v&&(3==P||4<=P&&!N)||A.silk)A.tablet=!0;else if(N||"iphone"==u||"ipod"==
u||v||y||A.blackberry||A.webos||A.bada)A.mobile=!0;A.msedge||A.msie&&10<=A.version||A.yandexbrowser&&15<=A.version||A.vivaldi&&1<=A.version||A.chrome&&20<=A.version||A.firefox&&20<=A.version||A.safari&&6<=A.version||A.opera&&10<=A.version||A.ios&&A.osversion&&6<=A.osversion.split(".")[0]||A.blackberry&&10.1<=A.version||A.chromium&&20<=A.version?A.a=!0:A.msie&&10>A.version||A.chrome&&20>A.version||A.firefox&&20>A.version||A.safari&&6>A.version||A.opera&&10>A.version||A.ios&&A.osversion&&6>A.osversion.split(".")[0]||
A.chromium&&20>A.version?A.c=!0:A.x=!0;return A}function e(l,q){var r=[],u;if(Array.prototype.map)return Array.prototype.map.call(l,q);for(u=0;u<l.length;u++)r=q(l[u]);return r}function m(l){var q=Math.max(l[0].split(".").length,l[1].split(".").length);for(l=e(l,function(r){var u=q-r.split(".").length;r+=Array(u+1).join(".0");return e(r.split("."),function(v){return Array(20-v.length).join("0")+v}).reverse()});0<=--q;){if(l[0][q]>l[1][q])return 1;if(l[0][q]===l[1][q]){if(0===q)return 0}else return-1}}
function a(l,q,r){var u=g;"string"===typeof q&&(r=q,q=void 0);void 0===q&&(q=!1);r&&(u=b(r));r=""+u.version;for(var v in l)if(l.hasOwnProperty(v)&&u[v])return 0>m([r,l[v]]);return q}var g=b("undefined"!==typeof navigator?navigator.userAgent:"");g.test=function(l){for(var q=0;q<l.length;++q){var r=l[q];if("string"===typeof r&&r in g)return!0}return!1};g.isUnsupportedBrowser=a;g.compareVersions=m;g.check=function(l,q,r){return!a(l,q,r)};g._detect=b;return g});return uJ}(),wd=lively.FreezerRuntime.recorderFor("lively.components/list.js");
wd.asItem=QC;wd.Morph=nk;wd.Text=rr;wd.StyleSheet=dt;wd.Label=sr;wd.Icon=sn;wd.morph=wa;wd.touchInputDevice=Qo;wd.pt=oh;wd.LinearGradient=El;wd.Color=Wf;wd.Rectangle=ee;wd.rect=Ii;wd.arr=vf;wd.Path=nh;wd.string=vh;wd.signal=tl;wd.once=Xe;wd.Button=dB;wd.bowser=Z4;wd.asItem=QC;wd.asItem=QC;var vJ=sa("bN",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),m=e.hasOwnProperty("ListItemMorph")&&"function"===typeof e.ListItemMorph?e.ListItemMorph:e.ListItemMorph=function(a){a&&
a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"displayItem",value:function(a,g,l,q,r,u,v){u=void 0===u?!1:u;var y=a.morph,z=y?"":a.label||a.string||"no item.string";a.annotation?this.valueAndAnnotation={value:z,annotation:a.annotation}:"string"===typeof z?this.textString=z:this.value=z;this.tooltip=this.tooltip||this.textString;this.itemIndex=g;this.position=r;if(v){g=v.fontFamily;r=v.selectionColor;z=v.selectionFontColor;
var A=v.nonSelectionFontColor,B=v.borderRadius,G=v.fontSize;v=v.padding;z&&this.selectionFontColor!==z&&(this.selectionFontColor=z);A&&this.nonSelectionFontColor!==A&&(this.nonSelectionFontColor=A);r&&this.selectionColor!==r&&(this.selectionColor=r);B&&B!=this.borderRadius&&(this.borderRadius=B);G&&this.fontSize!==G&&(this.fontSize=G);g&&this.fontFamily!==g&&(this.fontFamily=g);v&&!this.padding.equals(v)&&(this.padding=v)}a.autoFit&&(y.width=l);this.extent=wd.pt(y?Math.max(y.width,l):l,q);y?(a=y.getTransform().copy(),
this.submorphs=[y],y.setTransform(a),y.position=wd.pt(0,0)):this.submorphs.length&&(this.submorphs=[]);this.isSelected=u}},{key:"onDragStart",value:function(a){var g=this.owner.owner;this._dragState={sourceIsSelected:this.isSelected,source:this,itemsTouched:[]};if(!g.multiSelect||!g.multiSelectViaDrag)g.onItemMorphDragged(a,this)}},{key:"onMouseDown",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onMouseDown",this).call(this,a);this.owner.owner.clickOnItem(a)}},{key:"onDrag",value:function(a){var g=
this.owner.owner;if(g.multiSelect&&g.multiSelectViaDrag){a=a.hand.morphBeneath(a.position);var l=g.selectedIndexes,q=g.itemMorphs;a!==this&&q.includes(a)&&(this._dragState.sourceIsSelected&&!a.isSelected?(wd.arr.pushIfNotIncluded(l,a.itemIndex),g.selectedIndexes=l):!this._dragState.sourceIsSelected&&a.isSelected&&(wd.arr.remove(l,a.itemIndex),g.selectedIndexes=l))}}}],[{key:"className",get:function(){return"ListItemMorph"}},{key:"properties",get:function(){return{clipMode:{defaultValue:"hidden"},
autofit:{defaultValue:!1},isSelected:{defaultValue:!1},draggable:{defaultValue:!wd.touchInputDevice},fill:{derived:!0,get:function(){return wd.touchInputDevice&&this.pressed?wd.Color.gray.withA(.5):this.isSelected?this.selectionColor:wd.Color.transparent}},itemIndex:{defaultValue:void 0},selectionFontColor:{isStyleProp:!0,defaultValue:wd.Color.white},selectionColor:{type:"ColorGradient",isStyleProp:!0,defaultValue:wd.Color.blue},nonSelectionFontColor:{isStyleProp:!0,defaultValue:wd.Color.rgbHex("333")},
fontColor:{derived:!0,get:function(){return this.isSelected?this.selectionFontColor:this.nonSelectionFontColor}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:900,end:5139})}(wd.Label));wd.ListItemMorph=vJ;wd.ListItemMorph=vJ;wd.ListItemMorph=vJ;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),
m=e.hasOwnProperty("ListScroller")&&"function"===typeof e.ListScroller?e.ListScroller:e.ListScroller=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"onScroll",value:function(a){return this.owner.update()}},{key:"onMouseDown",value:function(a){var g=this,l=this.scroll.y;if(wd.touchInputDevice){var q=this.owner.itemForClick(a);q&&(q.pressed=!0,q.makeDirty(),setTimeout(function(){q.pressed=!1;if(0==l-
g.scroll.y)return g.owner.clickOnItem(a)},300))}else return this.owner.clickOnItem(a)}}],[{key:"className",get:function(){return"ListScroller"}},{key:"properties",get:function(){return{name:{defaultValue:"scroller"},fill:{defaultValue:wd.Color.transparent},clipMode:{defaultValue:"auto"},scrollbar:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.submorphs[0]}},submorphs:{initialize:function(){this.submorphs=[{name:"scrollbar"}]}}}}}],e,{pathInPackage:function(){return"list.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5141,end:6080})})(wd.Morph);wd.listCommands=[{name:"page up",exec:function(b){b.gotoIndex(Math.max(0,b.selectedIndex-Math.round(b.height/b.itemHeight)));return!0}},{name:"page down",exec:function(b){b.gotoIndex(Math.min(b.items.length-1,b.selectedIndex+Math.round(b.height/b.itemHeight)));
return!0}},{name:"goto first item",exec:function(b){b.gotoIndex(0);return!0}},{name:"goto last item",exec:function(b){b.gotoIndex(b.items.length-1);return!0}},{name:"arrow up",exec:function(b){b.gotoIndex(b.indexUp());return!0}},{name:"arrow down",exec:function(b){b.gotoIndex(b.indexDown());return!0}},{name:"select up",exec:function(b){var e=b.selectedIndexes;if(!b.multiSelect||!e.length)return b.execCommand("arrow up");var m=e[0];if("number"!==typeof m)b.selectedIndexes=[m];else{var a=b.indexUp(m);
e.includes(m)&&e.includes(a)?b.selectedIndexes=e.filter(function(g){return g!==m}):b.selectedIndexes=[a].concat(e.filter(function(g){return g!==a}))}return!0}},{name:"select down",exec:function(b){var e=b.selectedIndexes;if(!b.multiSelect||!e.length)return b.execCommand("arrow down");var m=e[0],a=b.indexDown(m);e.includes(m)&&e.includes(a)?b.selectedIndexes=e.filter(function(g){return g!==m}):b.selectedIndexes=[a].concat(e.filter(function(g){return g!==a}));return!0}},{name:"select all",exec:function(b){b.selectedIndexes=
wd.arr.range(b.items.length-1,0);b.scrollIndexIntoView(b.selectedIndexes[0]);return!0}},{name:"select via filter",exec:function(b){var e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return e=b.selectedIndex||0,g.yield(b.world().filterableListPrompt("Select item",b.items,{preselect:e,requester:b.getWindow()||b,itemPadding:wd.Rectangle.inset(0,2),multiSelect:!0}),2);m=g.yieldResult;a=m.selected;a.length&&(b.multiSelect?b.selections=a:b.selection=a[0],b.scrollSelectionIntoView(),
b.update());return g.return(!0)})}},{name:"realign top-bottom-center",exec:function(b){if(b.selection){var e=b.padding,m=b.itemHeight,a=b.scroll,g=a.x;a=a.y;var l=wd.pt(0,b.selectedIndex*m);e=b.height-m-e.top()-e.bottom();a=2>Math.abs(l.y-a)?l.y-e:2>Math.abs(l.y-a-.5*e)?l.y:l.y-.5*e;b.scroll=wd.pt(g,a);return!0}}},{name:"print contents in text window",exec:function(b){var e="items of "+b.name,m=b.items.map(function(a){if("string"===typeof a)return a;var g=a.string,l=a.label;a=a.annotation;var q="";
l?q="string"===typeof l?q+l:q+l.map(function(r,u){return 0==u%2?r:""}).join(""):g&&(q+=g);a&&(q+=" ",q="string"===typeof a?q+a:q+a[0]);return q}).join("\n");return b.world().execCommand("open text window",{title:e,content:m,name:e,fontFamily:"Monaco, monospace"})}}];var eB=sa("aM",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),m=e.hasOwnProperty("List")&&"function"===typeof e.List?e.List:e.List=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;a.bounds||a.extent||(a.extent=wd.pt(400,360));Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.update()}},{key:"__additionally_serialize__",value:function(a,g,l,q){var r=this;Sb._get(Object.getPrototypeOf(m.prototype),"__additionally_serialize__",this).call(this,a,g,l,q);this.whenRendered().then(function(){return r.update()})}},{key:"onLoad",
value:function(){this.scroller.visible=wd.touchInputDevice}},{key:"initializeSubmorphs",value:function(a){this.submorphs=a=a||this.submorphs||[];for(var g=0;g<a.length;g++)switch(a[g].name){case "listItemContainer":var l=a[g];continue;case "scroller":var q=a[g]}q||(q=this.addMorph(new wd.ListScroller({draggable:!1,grabbable:!1,acceptsDrops:!1,halosEnabled:!1,name:"scroller"})));l||this.addMorph({name:"listItemContainer",fill:wd.Color.transparent,halosEnabled:!1,reactsToPointer:!1,acceptsDrops:!1,
draggable:!1});(l||q)&&this.update()}},{key:"isList",get:function(){return!0}},{key:"onChange",value:function(a){"fontFamily fontColor fontSize padding selectionFontColor selectionColor nonSelectionFontColor itemPadding items".split(" ").includes(a.prop)&&this.update();return Sb._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a)}},{key:"itemForClick",value:function(a){a=a.positionIn(this.world()).subPt(this.scroll);a=this.listItemContainer.morphsContainingPoint(a);return a.find(function(g){return g.isListItem})||
a[0]}},{key:"clickOnItem",value:function(a){var g=this.itemForClick(a);this[2===a.state.clickCount?"onItemMorphDoubleClicked":"onItemMorphClicked"](a,g)}},{key:"connections",get:function(){return{selection:{signalOnAssignment:!1}}}},{key:"invalidateCache",value:function(){this.manualItemHeight||this.setProperty("itemHeight",null)}},{key:"find",value:function(a){return this.items.find(function(g){return g===a||g.value===a})}},{key:"findIndex",value:function(a){return this.items.findIndex(function(g){return g===
a||g.value===a})}},{key:"addItem",value:function(a){return this.addItemAt(a)}},{key:"addItemAt",value:function(a,g){var l=this;g=void 0===g?this.items.length:g;var q=this.items;g=Math.min(q.length,Math.max(0,g));q.splice(g,0,wd.asItem(a));this.addMethodCallChangeDoing({target:this,selector:"addItemAt",args:[a,g],undo:{target:this,selector:"removeItem",args:[a]}},function(){return l.update()})}},{key:"removeItem",value:function(a){var g=this;a=this.find(a);var l=this.items,q=l.indexOf(a);-1!==q&&(l.splice(q,
1),this.addMethodCallChangeDoing({target:this,selector:"removeItem",args:[a],undo:{target:this,selector:"addItemAt",args:[a,q]}},function(){return g.update()}))}},{key:"selectItemMorph",value:function(a){this.selectedIndexes=[a.itemIndex]}},{key:"gotoIndex",value:function(a){this.scrollIndexIntoView(this.selectedIndex=a)}},{key:"indexUp",value:function(a){a="number"===typeof a?a:this.selectedIndex;return(a||this.items.length)-1}},{key:"indexDown",value:function(a){a=void 0===a?this.selectedIndex:
a;return(("number"===typeof a?a:-1)+1)%this.items.length}},{key:"update",value:function(){var a=this,g=this.items;g&&this.scroller&&this.dontRecordChangesWhile(function(){var l=a.itemHeight,q=a.itemMorphs,r=a.listItemContainer,u=a.selectedIndexes,v=a.extent.y,y=a.fontSize,z=a.fontFamily,A=a.fontColor,B=a.padding,G=a.itemPadding,E=a.selectionColor,K=a.selectionFontColor,J=a.nonSelectionFontColor,P=a.itemBorderRadius,ea=a.scrollBar,ra=a.scroller,D=a.scrollable,O=ra.scroll.y;B=B||wd.Rectangle.inset(0);
var L=B.top(),N=B.left(),aa=B.bottom();B=B.right();var Y=Math.max(0,Math.floor(O/l)),ma=Math.min(g.length,Y+v/l+2);v=0;B=a.width-(N+B);q=wd.arr.sortBy(q,function(xa){return xa.itemIndex});var bb=$jscomp.makeIterator(wd.arr.partition(q,function(xa){return xa.itemIndex<Y}));q=bb.next().value;var Qa=bb.next().value;Qa=$jscomp.makeIterator(wd.arr.partition(Qa,function(xa){return xa.itemIndex>ma-1}));bb=Qa.next().value;Qa=Qa.next().value;q=[].concat($jscomp.arrayFromIterable(bb),$jscomp.arrayFromIterable(Qa),
$jscomp.arrayFromIterable(q));for(bb=0;bb<ma-Y;bb++){Qa=Y+bb;var X=g[Qa];if(!X){q.slice(bb).forEach(function(xa){xa.remove()});break}var V={fontSize:y,fontFamily:z,fontColor:J||A,padding:G,borderRadius:P||0,selectionFontColor:K,nonSelectionFontColor:J,selectionColor:E},ha=q[bb];ha||(ha=q[bb]=r.addMorph(new wd.ListItemMorph(V)));ha.reactsToPointer=!D;ha.displayItem(X,Qa,B,l,wd.pt(0,l*Qa),u.includes(Qa),V);v=Math.max(v,ha.width)}q.slice(ma-Y).forEach(function(xa){return xa.remove()});l=Math.max(L+aa+
l*g.length,a.height);r.setBounds(wd.pt(N,L).subXY(0,O).extent(wd.pt(a.width,l)));ra.extent=a.extent;ea.left=v-1;ra.position=wd.pt(0,0);ea.extent=wd.pt(1,l)})}},{key:"scrollSelectionIntoView",value:function(){this.selection&&this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",value:function(a){var g=this.itemHeight,l=this.itemScroll;a=new wd.Rectangle(0,a*g,this.width,g);g=this.innerBounds().insetByRect(this.padding).translatedBy(l);var q=0;a.bottom()>g.bottom()&&(q=a.bottom()-
g.bottom());a.top()<g.top()&&(q=a.top()-g.top());this.itemScroll=l.addXY(0,q);this.update()}},{key:"onItemMorphDoubleClicked",value:function(a,g){}},{key:"onItemMorphClicked",value:function(a,g){var l=g.itemIndex;g=this.selectedIndexes;var q=g.includes(l),r=[];if(this.multiSelect)if(a.isShiftDown())if(q)r=g.filter(function(v){return v!=l});else{a=g[0];var u="number"===typeof a?wd.arr.range(l,a):[l];r=u.concat(g.filter(function(v){return!u.includes(v)}))}else r=this.multiSelectWithSimpleClick||a.isCommandKey()?
q?g.filter(function(v){return v!=l}):[l].concat(g.filter(function(v){return v!=l})):[l];else r=[l];this.selectedIndexes=r}},{key:"onItemMorphDragged",value:function(a,g){}},{key:"onHoverIn",value:function(a){this.scrollable&&(this.scroller.visible=!0)}},{key:"onHoverOut",value:function(a){wd.touchInputDevice||(this.scroller.visible=!1)}},{key:"onDragStart",value:function(a){}},{key:"onDrag",value:function(a){}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",
command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-A",mac:"Meta-A"},command:"select all"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"}].concat(Sb._get(Object.getPrototypeOf(m.prototype),"keybindings",this))}},
{key:"commands",get:function(){return wd.listCommands}}],[{key:"className",get:function(){return"List"}},{key:"properties",get:function(){return{fill:{defaultValue:wd.Color.white},clipMode:{defaultValue:"hidden"},selectionFontColor:{isStyleProp:!0,defaultValue:wd.Color.white},selectionColor:{type:"ColorGradient",isStyleProp:!0,defaultValue:wd.Color.rgb(21,101,192)},nonSelectionFontColor:{isStyleProp:!0,defaultValue:wd.Color.rgbHex("333")},fontColor:{isStyleProp:!0,defaultValue:wd.Color.rgbHex("333")},
styleClasses:{defaultValue:["default"]},itemScroll:{derived:!0,after:["submorphs"],get:function(){return this.scroller?this.scroller.scroll:wd.pt(0,0)},set:function(a){this.scroller&&(this.scroller.scroll=a)}},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/list/light"}}},extent:{set:function(a){a.eqPt(this.extent)||(this.setProperty("extent",a),this.update())}},fontFamily:{isStyleProp:!0,defaultValue:"Helvetica Neue, Arial, sans-serif",set:function(a){this.setProperty("fontFamily",
a);this.invalidateCache()}},fontSize:{isStyleProp:!0,defaultValue:12,set:function(a){this.setProperty("fontSize",a);this.invalidateCache()}},padding:{isStyleProp:!0,defaultValue:wd.Rectangle.inset(3)},itemBorderRadius:{isStyleProp:!0,defaultValue:0,set:function(a){this.setProperty("itemBorderRadius",a);this.invalidateCache()}},itemPadding:{isStyleProp:!0,defaultValue:wd.Rectangle.inset(1),set:function(a){this.setProperty("itemPadding",a);this.invalidateCache()}},items:{group:"list",defaultValue:[],
after:["submorphs"],set:function(a){this.setProperty("items",a.map(wd.asItem));this.update();this.attributeConnections&&wd.signal(this,"values",this.values)}},multiSelect:{defaultValue:!1},multiSelectWithSimpleClick:{description:"Does a simple click toggle selections without deselecting?",defaultValue:!1},multiSelectViaDrag:{description:"Does dragging extend selection?",defaultValue:!0},values:{group:"list",after:["items"],readOnly:!0,get:function(){return this.items.map(function(a){return a.value})}},
selectedIndex:{group:"list",defaultValue:[],after:["selectedIndexes"],get:function(){return this.selectedIndexes[0]},set:function(a){return this.selectedIndexes="number"===typeof a?[a]:[]}},selectedIndexes:{get:function(){return this.getProperty("selectedIndexes")||[]},set:function(a){var g=this.items.length;this.setProperty("selectedIndexes",(a||[]).filter(function(l){return 0<=l&&l<g}));this.update();wd.signal(this,"selection",this.selection)}},selection:{group:"list",after:["selections"],get:function(){return this.selections[0]},
set:function(a){this.selections=[a]}},selections:{group:"list",after:["selectedIndexes"],get:function(){var a=this;return this.selectedIndexes.map(function(g){return a.items[g]&&a.items[g].value})},set:function(a){var g=this;this.selectedIndexes=a.map(function(l){return g.findIndex(l)})}},selectedItems:{after:["selectedIndexes"],readOnly:!0,get:function(){var a=this;return this.selectedIndexes.map(function(g){return a.items[g]})}},submorphs:{initialize:function(a){this.initializeSubmorphs(a)}},listItemContainer:{after:["submorphs"],
readOnly:!0,get:function(){return this.getSubmorphNamed("listItemContainer")}},itemMorphs:{after:["submorphs"],readOnly:!0,get:function(){return this.listItemContainer.submorphs}},scrollBar:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scrollbar")}},scroller:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scroller")}},scrollable:{derived:!0,get:function(){return this.padding.top()+this.items.length*this.itemHeight>this.height}},manualItemHeight:{type:"Boolean"},
itemHeight:{after:["fontFamily","fontSize","itemPadding"],defaultValue:10,set:function(a){this.setProperty("itemHeight",a);this.manualItemHeight="number"===typeof a},get:function(){var a=this.getProperty("itemHeight");if(a)return a;a=this.env.fontMetric.defaultLineHeight({fontFamily:this.fontFamily,fontSize:this.fontSize});var g=this.itemPadding;g&&(a+=g.top()+g.bottom());this.setProperty("itemHeight",a);return a}},theme:{after:["styleClasses"],defaultValue:"default",set:function(a){this.removeStyleClass(this.theme);
this.addStyleClass(a);this.setProperty("theme",a)}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:10477,end:26899})}(wd.Morph));wd.List=eB;wd.List=eB;wd.List=eB;wd.connect=fk;var qE=sa("aN",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),m=e.hasOwnProperty("FilterableList")&&
"function"===typeof e.FilterableList?e.FilterableList:e.FilterableList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;a.bounds||a.extent||(a.extent=wd.pt(400,360));Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);wd.connect(this.inputMorph,"inputChanged",this,"updateFilter");
wd.connect(this.listMorph,"selection",this,"selectionChanged");wd.connect(this.listMorph,"onItemMorphDoubleClicked",this,"acceptInput");this.updateFilter();wd.connect(this,"extent",this,"relayout")}},{key:"resetConnections",value:function(){var a=this,g=this.attributeConnections;if(g){var l=["accepted","canceled","remove"];g.filter(function(q){return l.includes(q.sourceAttrName)&&q.targetObj!==a}).forEach(function(q){return q.disconnect()})}}},{key:"isList",get:function(){return!0}},{key:"relayout",
value:function(){var a=this.listMorph,g=this.inputMorph,l=this.paddingMorph,q=this.borderWidth;g.topLeft=wd.pt(q,q);g.width=a.width=this.width-2*q;l&&(l.topLeft=g.bottomLeft);a.position=l?l.bottomLeft:g.bottomLeft;a.height=this.height-a.top-q}},{key:"focus",value:function(){this.get("input").focus()}},{key:"selectionChanged",value:function(a){wd.signal(this,"selection",a)}},{key:"scrollSelectionIntoView",value:function(){return this.listMorph.scrollSelectionIntoView()}},{key:"parseInput",value:function(){var a=
this.get("input").textString,g=Array.from(a).reduce(function(q,r){if("\\"===r&&!q.escaped)return q.escaped=!0,q;" "!==r||q.escaped?(q.spaceSeen=!1,q.current+=r):(!q.spaceSeen&&q.current&&(q.tokens.push(q.current),q.current=""),q.spaceSeen=!0);q.escaped=!1;return q},{tokens:[],current:"",escaped:!1,spaceSeen:!1});g.current&&g.tokens.push(g.current);var l=g.tokens.map(function(q){return q.toLowerCase()});return{tokens:g.tokens,lowercasedTokens:l,input:a}}},{key:"updateFilter",value:function(){var a=
this,g=this.parseInput(),l=this.filterFunction,q=this.sortFunction,r=this.items.filter(function(y){return l.call(a,g,y)});q&&(r=wd.arr.sortBy(r,function(y){return q.call(a,g,y)}));var u=this.listMorph,v=this.updateSelectionsAfterFilter?u.selectedIndexes.map(function(y){return r.indexOf(u.items[y])}).filter(function(y){return-1!==y}):u.selectedIndexes;u.items=r;u.selectedIndexes=v.length?v:r.length?[0]:[];this.scrollSelectionIntoView();wd.signal(this,"filterChanged",{parsedInput:g,items:u.items})}},
{key:"acceptInput",value:function(){var a=this.listMorph;this.get("input").acceptInput();a={filtered:this.items,selected:a.selections,action:this.selectedAction,status:"accepted"};wd.signal(this,"accepted",a);return a}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},
{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Enter",command:"accept input"},{keys:"Escape|Ctrl-G",command:"cancel"},{keys:"Tab",command:"choose action"}].concat($jscomp.arrayFromIterable(wd.arr.range(0,8).map(function(a){return{keys:"Alt-"+(a+1),command:{command:"choose action and accept input",args:{actionNo:a}}}}))).concat(Sb._get(Object.getPrototypeOf(m.prototype),"keybindings",this))}},{key:"commands",get:function(){var a=this;return Sb._get(Object.getPrototypeOf(m.prototype),
"commands",this).concat([{name:"accept input",exec:function(g){a.acceptInput();return!0}},{name:"cancel",exec:function(g){wd.signal(g,"canceled");return!0}},{name:"choose action and accept input",exec:function(g,l){l=void 0===l?{}:l;g.selectedAction=(g.actions||[])[void 0===l.actionNo?0:l.actionNo];return g.execCommand("accept input")}},{name:"choose action",exec:function(g){var l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(!g.actions)return u.return(!0);l=Object.assign({},
g.style,{extent:g.extent});q=new wd.FilterableList(l);q.openInWorld(g.globalPosition);q.items=g.actions;r=g.actions.indexOf(g.selectedAction);-1===r&&(r=0);q.selectedIndex=r;wd.connect(q,"accepted",g,"selectedAction",{converter:function(v){this.targetObj.focus();this.disconnect();this.sourceObj.remove();return v.selected[0]}});wd.connect(q,"canceled",g,"selectedAction",{converter:function(v){this.targetObj.focus();this.disconnect();this.sourceObj.remove();return this.targetObj.selectedAction}});q.focus();
return u.return(!0)})}}].concat($jscomp.arrayFromIterable(wd.listCommands.map(function(g){return Object.assign({},g,{exec:function(l,q,r){return g.exec(a.listMorph,q,r)}})}))))}}],[{key:"className",get:function(){return"FilterableList"}},{key:"properties",get:function(){return{fill:{defaultValue:wd.Color.transparent},borderWidth:{defaultValue:1},updateSelectionsAfterFilter:{defaultValue:!1},theme:{after:["styleClasses","listMorph"],defaultValue:"default",set:function(a){this.removeStyleClass(this.theme);
this.listMorph.removeStyleClass(this.theme);this.addStyleClass(a);this.listMorph.addStyleClass(a);this.setProperty("theme",a)}},submorphs:{initialize:function(){var a=this;this.submorphs=[wd.Text.makeInputLine({name:"input",highlightWhenFocused:!1,fixedHeight:!1,autofit:!1}),new wd.morph({name:"padding",fill:wd.Color.transparent,height:5}),new wd.List({name:"list",items:[],clipMode:"auto"})];this.get("list").whenRendered().then(function(){return a.get("list").update()})}},paddingMorph:{derived:!0,
readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("padding")}},listMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("list")}},inputMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("input")}},fontFamily:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontFamily},set:function(a){this.listMorph.fontFamily=a;this.inputMorph.fontFamily=a}},padding:{isStyleProp:!0,
derived:!0,after:["submorphs"],get:function(){return this.listMorph.padding},set:function(a){this.listMorph.padding=a;this.inputMorph.padding=a}},fontSize:{isStyleProp:!0,group:"styling",derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontSize},set:function(a){this.listMorph.fontSize=a}},itemPadding:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.itemPadding},set:function(a){this.listMorph.itemPadding=a}},inputPadding:{isStyleProp:!0,derived:!0,
after:["submorphs","padding"],get:function(){return this.inputMorph.padding},set:function(a){this.inputMorph.padding=a}},input:{derived:!0,after:["submorphs"],defaultValue:"",get:function(){return this.inputMorph.input},set:function(a){this.inputMorph.input=a}},historyId:{derived:!0,after:["submorphs"],defaultValue:null,get:function(){return this.inputMorph.historyId},set:function(a){this.inputMorph.historyId=a}},multiSelect:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.multiSelect},
set:function(a){this.listMorph.multiSelect=a}},items:{after:["submorphs","fuzzy","fuzzySortFunction","fuzzyFilterFunction"],defaultValue:[],set:function(a){this.setProperty("items",a.map(wd.asItem));this.updateFilter()}},visibleItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.items}},selection:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selection},set:function(a){this.listMorph.selection=a}},selectedIndex:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndex},
set:function(a){this.listMorph.selectedIndex=a}},selectedIndexes:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndexes},set:function(a){this.listMorph.selectedIndexes=a}},selectedItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedItems},set:function(a){this.listMorph.selectedItems=a}},selections:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selections},set:function(a){this.listMorph.selections=a}},fuzzy:{derived:!0,
after:["filterFunction","sortFunction"],set:function(a){this.setProperty("fuzzy",a);a?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var a=this.getProperty("filterFunction");if(!a)return this.defaultFilterFunction;
"string"===typeof a&&(a=eval("("+a+")"));return a}},sortFunction:{},defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(a,g){return a.lowercasedTokens.every(function(l){return g.string.toLowerCase().includes(l)})})}},fuzzySortFunction:{get:function(){var a=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(g,l){var q=String(wd.Path("string"===typeof a.fuzzy?a.fuzzy:"string").get(l)).toLowerCase(),r=0;g.lowercasedTokens.forEach(function(u){q.startsWith(u)?
r-=10:q.includes(u)&&(r-=5)});return wd.arr.sum(g.lowercasedTokens.map(function(u){return wd.string.levenshtein(q.toLowerCase(),u)}))+r})}},fuzzyFilterFunction:{get:function(){var a=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=function(g,l){var q="string"===typeof a.fuzzy?a.fuzzy:"string";if(g.lowercasedTokens.every(function(u){return l.string.toLowerCase().includes(u)}))return!0;var r=String(wd.Path(q).get(l)).toLowerCase();return 3>=wd.arr.sum(g.lowercasedTokens.map(function(u){return wd.string.levenshtein(r,
u)}))})}},selectedAction:{get:function(){return this.getProperty("selectedAction")||"default"}},actions:{}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:27012,end:41362})}(wd.Morph));wd.FilterableList=qE;wd.FilterableList=qE;wd.FilterableList=qE;var rE=sa("bq",function(b){var e=
lively.FreezerRuntime.recorderFor("lively.components/list.js"),m=e.hasOwnProperty("DropDownList")&&"function"===typeof e.DropDownList?e.DropDownList:e.DropDownList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"fitLabelMorph",value:function(){}},{key:Symbol.for("lively-instance-initialize"),value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,
a);wd.connect(this,"fire",this,"toggleList")}},{key:"onLoad",value:function(){this.listMorph.selection||(this.listMorph.selection=this.labelMorph.value[0])}},{key:"isListVisible",value:function(){return!!this.listMorph.world()}},{key:"removeWhenFocusLost",value:function(a){var g=this;setTimeout(function(){var l=g.listMorph,q=g.world()&&g.world().focusedMorph;if(l!==q&&q!==g&&l.world()&&!l.withAllSubmorphsDetect(function(r){return r==q}))l.fadeOut(200);else wd.once(wd.touchInputDevice?l.scroller:l,
"onBlur",g,"removeWhenFocusLost")},100)}},{key:"toggleList",value:function(){var a=this,g,l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress){g=a.listMorph;if(a.isListVisible())return wd.signal(a,"deactivated"),a.selection=g.selection,g.epiMorph=!1,g.remove(),r.jumpTo(0);wd.signal(a,"activated");a.openListInWorld?(g.openInWorld(),g.epiMorph=!0,g.hasFixedPosition=!0,g.setTransform(a.getGlobalTransform()),l=a.globalBounds()):(l=a.innerBounds(),a.addMorph(g));q=g.items.length*
g.itemHeight+g.padding.top()+g.padding.bottom();g.extent=wd.pt(a.width,Math.min(a.listHeight,q));"top"===a.listAlign?g.bottomLeft=l.topLeft():g.topLeft=l.bottomLeft();wd.once(g,"onItemMorphClicked",a,"toggleList");wd.once(wd.touchInputDevice?g.scroller:g,"onBlur",a,"removeWhenFocusLost");return r.yield(g.whenRendered(),3)}if(4!=r.nextAddress)return r.yield(g.whenRendered(),4);wd.touchInputDevice?g.scroller.focus():g.focus();g.scrollSelectionIntoView();r.jumpToEnd()})}},{key:"commands",get:function(){var a=
this;return[{name:"accept",exec:function(){a.isListVisible()&&a.toggleList();return!0}},{name:"cancel",exec:function(){a.isListVisible()&&a.listMorph.remove();return!0}}].concat(Sb._get(Object.getPrototypeOf(m.prototype),"commands",this))}},{key:"keybindings",get:function(){return Sb._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept"},{keys:"Escape|Ctrl-G",command:"cancel"}])}}],[{key:"className",get:function(){return"DropDownList"}},{key:"properties",
get:function(){return{padding:{defaultValue:wd.Rectangle.inset(3,2)},listHeight:{defaultValue:100},listAlign:{type:"Enum",values:["bottom","top"],defaultValue:"bottom"},openListInWorld:{defaultValue:!1},listMorph:{after:["labelMorph"],get:function(){var a=this.getProperty("listMorph");if(a)return a;a=new wd.List({name:"dropDownList"});this.setProperty("listMorph",a);return a}},items:{derived:!0,after:["listMorph"],get:function(){return this.listMorph.items},set:function(a){this.listMorph.items=a}},
selection:{after:["listMorph","items"],derived:!0,get:function(){return this.listMorph.selection},set:function(a){var g=this.listAlign,l=this.listMorph;if(a){var q=l.items,r=l.find(a);r||"string"!==typeof a||(r=q.find(function(v){return v.string===a}));if(!r)return;var u=r.label||[r.string,null];u=[].concat($jscomp.arrayFromIterable(u),[" ",null],$jscomp.arrayFromIterable(wd.Icon.textAttribute("caret-"+("bottom"===g?"down":"up"))));u[5]&&(u[5].textStyleClasses=["fa","annotation"]);this.label=u;this.relayout();
l.selectedIndex=q.indexOf(r)}else l.selection=null,this.label="";wd.signal(this,"selection",l.selection)}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:41372,end:45893})}(wd.Button));wd.DropDownList=rE;wd.DropDownList=rE;wd.DropDownList=rE;var wJ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),
m=e.hasOwnProperty("InteractiveItem")&&"function"===typeof e.InteractiveItem?e.InteractiveItem:e.InteractiveItem=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"fit",value:function(){}},{key:"onHaloGrabover",value:function(a){this.list.showDropPreviewFor(this,a)}},{key:"onDrop",value:function(a){var g=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress){if(!g.item.isPreview)return q.jumpTo(0);
l=a.hand.grabbedMorphs[0];Sb._get(Object.getPrototypeOf(m.prototype),"onDrop",g).call(g,a);return q.yield(g.list.whenRendered(),3)}g.list.addItemAt({morph:l,isListItem:!0},g.itemIndex);g.list.clearPreviews();q.jumpToEnd()})}},{key:"select",value:function(){this.list.selectedIndex=this.itemIndex;this.item.morph.focus()}},{key:"onMouseDown",value:function(a){wd.touchInputDevice?this._touchDown=Date.now():this.select()}},{key:"onMouseUp",value:function(a){wd.touchInputDevice&&500>Date.now()-this._touchDown&&
this.select()}},{key:"displayItem",value:function(a,g,l,q,r,u,v){u=void 0===u?!1:u;Sb._get(Object.getPrototypeOf(m.prototype),"displayItem",this).call(this,a,g,l,q,r,u,v);a.morph&&(a.morph.selected=u)}},{key:"onGrab",value:function(a){var g=this.list,l=a.halo&&a.halo.target===this;l&&a.halo.detachFromTarget();var q=this.submorphs.length?this.submorphs[0]:wd.morph({type:"label",value:this.value});a.hand.grab(q);q.position=a.hand.localize(this.globalPosition);l&&a.halo.refocus(q);g.removeItem(this.list.items[this.itemIndex]);
g.itemMorphs.forEach(function(r){return r.remove()});g.update()}}],[{key:"className",get:function(){return"InteractiveItem"}},{key:"properties",get:function(){return{draggable:{defaultValue:wd.touchInputDevice?!1:!0},item:{derived:!0,get:function(){return this.list.items[this.itemIndex]}},list:{drived:!0,get:function(){return this.owner.owner}},isListItem:{get:function(){return!0}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:45902,end:48176})}(wd.ListItemMorph);wd.InteractiveItem=wJ;wd.InteractiveItem=wJ;wd.InteractiveItem=wJ;var xJ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),m=e.hasOwnProperty("MorphList")&&"function"===typeof e.MorphList?e.MorphList:e.MorphList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(m,b,[{key:"onLoad",value:function(){Sb._get(Object.getPrototypeOf(m.prototype),"onLoad",this).call(this);this.clipMode=this.touchInput?"auto":"hidden"}},{key:"showDropPreviewFor",value:function(a,g){a=a.itemIndex;this.items[a].isPreview&&g||(this.clearPreviews(),g&&this.addItemAt({isListItem:!0,isPreview:!0,morph:wd.morph({reactsToPointer:!1,acceptsDrops:!1,width:this.width-5,height:this.itemHeight,fill:wd.Color.orange.withA(.5)})},a))}},{key:"clearPreviews",value:function(){var a=
this;this.items.filter(function(g){return g.morph&&g.morph.owner&&!wd.Path("morph.owner.isListItem").get(g)}).map(function(g){return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(a.removeItem(g))})});this.items.filter(function(g){return g.isPreview}).map(function(g){return a.removeItem(g)})}},{key:"update",value:function(){var a=this,g=this.items;g&&this.listItemContainer&&(this.scroller&&(this.scroller.visible=!1),this.dontRecordChangesWhile(function(){var l=a.itemHeight,
q=a.itemMorphs,r=a.listItemContainer,u=a.selectedIndexes,v=a.extent.y,y=a.fontSize,z=a.fontFamily,A=a.fontColor,B=a.padding,G=a.itemPadding,E=a.selectionColor,K=a.selectionFontColor,J=a.nonSelectionFontColor,P=a.itemBorderRadius,ea=a.scrollBar,ra=a.scroll.y;B=B||wd.Rectangle.inset(0);var D=B.top(),O=B.left(),L=B.bottom();B=B.right();var N=Math.max(0,Math.floor(ra/l)),aa=Math.min(g.length,Math.ceil((ra+v)/l));v=0;ra=a.width-(O+B);q=wd.arr.sortBy(q,function(bb){return bb.itemIndex});var Y=$jscomp.makeIterator(wd.arr.partition(q,
function(bb){return bb.itemIndex<N}));q=Y.next().value;var ma=Y.next().value;ma=$jscomp.makeIterator(wd.arr.partition(ma,function(bb){return bb.itemIndex>aa}));Y=ma.next().value;ma=ma.next().value;q=[].concat($jscomp.arrayFromIterable(Y),$jscomp.arrayFromIterable(ma),$jscomp.arrayFromIterable(q));y={fontSize:y,fontFamily:z,fontColor:J||A,padding:G,borderRadius:P||0,selectionFontColor:K,nonSelectionFontColor:J,selectionColor:E};q.length&&aa-N>q.length&&(N!=q[0].itemIndex?wd.arr.pushAt(q,r.addMorph(new wd.InteractiveItem(y)),
0):aa!=wd.arr.last(q).itemIndex&&q.push(r.addMorph(new wd.InteractiveItem(y))));for(z=0;z<aa-N;z++){A=N+z;G=g[A];if(!G){q.slice(z).forEach(function(bb){return bb.remove()});break}E=q[z];E||(E=q[z]=r.addMorph(new wd.InteractiveItem(y)),E.clipMode="visible");E.displayItem(G,A,ra,l,wd.pt(0,l*A),u.includes(A),y);v=Math.max(v,E.width)}l=Math.max(D+L+l*g.length,a.height);u=wd.pt(a.width,l).subPt(wd.pt(O+B,0));r.setBounds(wd.pt(O,D).extent(u));ea.left=v-10;ea.fill=null;ea.top=0;ea.extent=wd.pt(1,l)}))}},
{key:"onHoverIn",value:function(a){this.clipMode="auto"}},{key:"onHoverOut",value:function(a){this.touchInput||(this.clipMode="hidden")}},{key:"onScroll",value:function(a){this.update()}}],[{key:"className",get:function(){return"MorphList"}},{key:"properties",get:function(){return{touchInput:{get:function(){return wd.touchInputDevice}},items:{group:"list",defaultValue:[],after:["submorphs"],set:function(a){this.setProperty("items",a.map(wd.asItem));this.itemMorphs.forEach(function(g){return g.remove()});
this.update();this.attributeConnections&&wd.signal(this,"values",this.values)}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:48185,end:53412})}(wd.List);wd.MorphList=xJ;wd.MorphList=xJ;wd.MorphList=xJ;var gla=Object.freeze({__proto__:null,asItem:QC,ListItemMorph:vJ,List:eB,FilterableList:qE,
DropDownList:rE,InteractiveItem:wJ,MorphList:xJ}),xg=lively.FreezerRuntime.recorderFor("lively.components/menus.js");xg.Label=sr;xg.config=wk;xg.Morph=nk;xg.obj=Pf;xg.promise=yg;xg.fun=nl;xg.pt=oh;xg.Color=Wf;xg.Rectangle=ee;var yJ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),m=e.hasOwnProperty("MenuDivider")&&"function"===typeof e.MenuDivider?e.MenuDivider:e.MenuDivider=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(m,b,void 0,[{key:"className",get:function(){return"MenuDivider"}},{key:"properties",get:function(){return{isMenuDevider:{defaultValue:!0},fill:{defaultValue:xg.Color.gray.lighter()},extent:{defaultValue:xg.pt(100,5)},reactsToPointer:{defaultValue:!1}}}}],e,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:168,end:437})}(xg.Morph);xg.MenuDivider=yJ;xg.MenuDivider=yJ;xg.MenuDivider=yJ;var zJ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),m=e.hasOwnProperty("MenuItem")&&"function"===typeof e.MenuItem?e.MenuItem:e.MenuItem=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"onHoverIn",value:function(a){var g=this;this.owner.itemMorphs.forEach(function(l){return l!==
g&&(l.selected=!1)});this.selected=!0;this.submenu&&this.owner.openSubMenuDelayed(a,this,this.submenu)}},{key:"onHoverOut",value:function(a){var g=this,l=a.hand;setTimeout(function(){(g.owner?g.owner.submenus:[]).some(function(q){return q.fullContainsWorldPoint(l.globalPosition)})||(g.selected=!1)},20);this.owner.maybeRemoveSubmenu()}},{key:"onMouseDown",value:function(a){var g=this,l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress){if(g.submenu)return r.return();
r.setCatchFinallyBlocks(2);g.owner.startFinish();if("function"!==typeof g.action)throw Error("Menu item "+g.textString+" has no executable action!");return r.yield(g.action(),4)}if(2!=r.nextAddress)return g.owner.completeFinish(),r.leaveTryBlock(0);l=r.enterCatchBlock();(q=g.world())?q.logError(l):console.error(l);r.jumpToEnd()})}}],[{key:"className",get:function(){return"MenuItem"}},{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},
fill:{defaultValue:xg.Color.transparent},fontSize:{defaultValue:14},draggable:{defaultValue:!1},readOnly:{defaultValue:!0},nativeCursor:{defaultValue:"pointer"},selected:{defaultValue:!1,set:function(a){this.selected!==a&&(this.addValueChange("selected",a),a?(this.fontColor=xg.Color.white,this.fill=xg.Color.rgb(21,101,192)):(this.fill=xg.Color.transparent,this.fontColor=xg.Color.black))}},isMenuItem:{derived:!0,readOnly:!0,get:function(){return!0}},label:{get:function(){return this.valueAndAnnotation.value.map(function(a,
g){return 0===g%2?a:""}).join("\n")},set:function(a){this.valueAndAnnotation={value:a,annotation:this.annotation}}},annotation:{get:function(){return this.valueAndAnnotation.annotation},set:function(a){this.valueAndAnnotation={value:this.value,annotation:a}}},action:{},submenu:{}}}}],e,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:446,end:2937})}(xg.Label);xg.MenuItem=zJ;xg.MenuItem=zJ;xg.MenuItem=zJ;xg.invalidItem={string:"invalid item",action:function(){return $world.setStatusMessage("invalid item")}};var AJ=sa("aO",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),m=e.hasOwnProperty("Menu")&&"function"===typeof e.Menu?e.Menu:e.Menu=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,
b,[{key:"startFinish",value:function(){this.ownerMenu&&this.ownerMenu.startFinish();this._waitingForFinish=!0}},{key:"completeFinish",value:function(){this.ownerMenu&&this.ownerMenu.completeFinish();this.finishedPromise.resolve(!0)}},{key:"whenFinished",value:function(){return this.finishedPromise.promise}},{key:"onChange",value:function(a){switch(a.prop){case "itemPadding":case "fontSize":case "fontFamily":this.updateMorphs()}Sb._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,
a)}},{key:"remove",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield(a.animate({opacity:0,duration:300}),2);a._waitingForFinish||a.completeFinish();Sb._get(Object.getPrototypeOf(m.prototype),"remove",a).call(a);g.jumpToEnd()})}},{key:"ensureItem",value:function(a){if(!a)return xg.invalidItem;if(a.title)return this.title=a.title,null;if(a.isDivider)return a;if(a.hasOwnProperty("string")&&a.hasOwnProperty("action"))return xg.obj.select(a,
["string","action","annotation"]);if(Array.isArray(a)){var g=$jscomp.makeIterator(a),l=g.next().value;g=g.next().value;return"string"===typeof l||Array.isArray(l)?g&&"function"!==typeof g?"object"===typeof g&&g.getItems?{label:l,submenu:g.getItems,annotation:[" ",{textStyleClasses:["fa","fa-caret-right"]}]}:Array.isArray(g)?{label:l,submenu:g,annotation:[" ",{textStyleClasses:["fa","fa-caret-right"]}]}:xg.invalidItem:{label:l,action:g||function(){return $world.setStatusMessage(l)}}:xg.invalidItem}if(a.command){var q=
a.command,r=a.showKeyShortcuts,u=a.target;g=a.alias;var v=a.args;if(!q||!u)return xg.invalidItem;void 0===r&&(r=!0);a=r?"string"===typeof r?r:u.keysForCommand(q):null;return{string:g||q,annotation:a?["\t"+a,{fontSize:"70%"}]:["",{}],action:function(){return u.execCommand(q,v)}}}return xg.invalidItem}},{key:"updateMorphs",value:function(){var a=this;this.submorphs=[];var g=this.padding.left(),l=this.padding.right(),q=this.padding.top(),r=this.padding.bottom(),u=0,v=xg.pt(g,q),y={};this.fontFamily&&
(y.fontFamily=this.fontFamily);this.fontSize&&(y.fontSize=this.fontSize);this.itemPadding&&(y.padding=this.itemPadding);this.title&&(q=this.addMorph(Object.assign({type:"label",value:this.title,name:"title",position:v,fontWeight:"bold"},y)),v=q.bottomLeft,u=Math.max(q.width,u));this.items.forEach(function(z){var A=z.label,B=z.string,G=z.annotation,E=z.action,K=z.submenu;z=a.addMorph(z.isDivider?new xg.MenuDivider({position:v}):new xg.MenuItem(Object.assign({label:A||B,annotation:G,action:E,submenu:K,
position:v},y)));v=z.bottomLeft;u=Math.max(z.width,u)});this.submorphs.forEach(function(z){z.isLabel&&(z.fit(),z.autofit=!1,z.fixedWidth=!0,z.fixedHeight=!0);z.width=u});this.extent=xg.pt(u+l+g,v.y+r)}},{key:"openSubMenuDelayed",value:function(a,g,l){var q=this;this.openingSubMenuProcess&&clearTimeout(this.openingSubMenuProcess);this.openingSubMenuProcess=setTimeout(function(){try{q.openSubMenu(a,g,l)}catch(u){var r=q.world();r?r.logError(u):console.error(u)}},200)}},{key:"openSubMenu",value:function(a,
g,l){if(g.selected){var q=this.submenu;if(q){if(q.ownerItemMorph===g||this.morphsContainingPoint(a.position).includes(q))return;this.removeSubMenu()}"function"===typeof l&&(l=l());a=this.submenu=this.addMorph(new xg.Menu({items:l,ownerItemMorph:g,ownerMenu:this}));a.updateMorphs();a.offsetForOwnerMenu()}}},{key:"maybeRemoveSubmenu",value:function(){var a=this;xg.fun.debounceNamed(this.id+"-maybeRemoveSubmenu",300,function(){var g=a.world();if(g){var l=a.submenu,q=a.selectedItemMorph;g=g&&l&&l.fullContainsWorldPoint(g.firstHand.position);
l&&l.ownerItemMorph!==q&&!l.ownerItemMorph.selected&&(g?(q&&(q.selected=!1),l.ownerItemMorph.selected=!0):a.removeSubMenu())}})();return this.removeOnMouseOut}},{key:"removeSubMenu",value:function(){if(this.submenu){var a=this.submenu;this.submenu=a.ownerMenu=null;a.remove()}}},{key:"moveBoundsForVisibility",value:function(a,g){var l=0,q=0;a.right()>g.right()&&(l=-1*(a.right()-g.right()));var r=a.left()+l;0>r&&(l+=-r);a.bottom()>g.bottom()&&(q=-1*(a.bottom()-g.bottom()),l+=1);g=a.top()+q;0>g&&(q+=
-g);return a.translatedBy(xg.pt(l,q))}},{key:"moveSubMenuBoundsForVisibility",value:function(a,g,l,q){q||(q=g.right()+a.width>l.right()?"left":"right");a=a.extent();a="left"===q?g.topLeft().addXY(-a.x,0).extent(a):g.topRight().extent(a);a.bottom()>l.bottom()&&(g=-1*(a.bottom()-l.bottom()),a=a.translatedBy(xg.pt(0,g)));a.top()<l.top()&&(l=l.top()-a.top(),a=a.translatedBy(xg.pt(0,l)));return a}},{key:"offsetForOwnerMenu",value:function(){var a=this.ownerMenu,g=this.world().visibleBounds(),l=a.getGlobalTransform().inverse().transformRectToRect(g);
a=this.clipForVisibility(this.moveSubMenuBoundsForVisibility(this.innerBounds(),a.selectedItemMorph?a.selectedItemMorph.bounds():a.innerBounds(),l),g);this.setBounds(a)}},{key:"clipForVisibility",value:function(a,g){a=void 0===a?this.bounds():a;g=void 0===g?this.world().visibleBounds():g;var l=this.transformRectToMorph(this.world(),a.withX(0).withY(0));g.containsRect(l.insetBy(10))||(a=a.withExtent(xg.pt(5+a.width,Math.min(l.height,g.height))));return a}},{key:"offsetForWorld",value:function(a){a=
this.innerBounds().translatedBy(a);if(this.owner.visibleBounds){var g=this.owner.visibleBounds();a=this.clipForVisibility(this.moveBoundsForVisibility(a,g),g)}this.setBounds(a)}},{key:"onHoverOut",value:function(){this.removeOnMouseOut&&this.remove()}}],[{key:"className",get:function(){return"Menu"}},{key:"forItems",value:function(a,g){g=void 0===g?{title:""}:g;return new this(Object.assign({},g,{items:a}))}},{key:"openAt",value:function(a,g,l){l=void 0===l?{title:""}:l;g=this.forItems(g,l).openInWorldNear(a);
g.offsetForWorld(a);return g}},{key:"openAtHand",value:function(a,g){g=void 0===g?{title:""}:g;var l=g.hand;a=this.forItems(a,xg.obj.dissoc(g,["hand"]));l=l?l.position:xg.pt(0,0);a.titleMorph&&(l=l.addXY(0,-a.titleMorph.height));a.openInWorld(l);a.offsetForWorld(l);return a}},{key:"properties",get:function(){return{dropShadow:{initialize:function(){if(xg.config.fastShadows||!this.ownerMenu)this.dropShadow=!0,this.dropShadow.fast=!1}},submorphs:{initialize:function(){this.updateMorphs()}},epiMorph:{defaultValue:!0},
acceptsDrops:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},padding:{defaultValue:xg.Rectangle.inset(0,2)},itemPadding:{defaultValue:xg.Rectangle.inset(8,4)},borderWidth:{defaultValue:1},fill:{defaultValue:xg.Color.white},borderColor:{defaultValue:xg.Color.gray.lighter()},borderRadius:{defaultValue:4},opacity:{defaultValue:.95},fontSize:{defaultValue:16},fontFamily:{defaultValue:"Helvetica Neue, Arial, sans-serif"},title:{get:function(){return this.getProperty("title")},set:function(a){this.addValueChange("title",
a)}},finishedPromise:{initialize:function(){this.finishedPromise=xg.promise.deferred()}},ownerMenu:{},submenu:{},submenus:{readOnly:!0,get:function(){return this.submenu?[this.submenu].concat(this.submenu.submenus):[]}},ownerItemMorph:{},removeOnMouseOut:{},items:{set:function(a){a=a.map(this.ensureItem.bind(this)).filter(Boolean);this.setProperty("items",a)}},selectedItemMorph:{derived:!0,readOnly:!0,get:function(){return this.itemMorphs.find(function(a){return a.selected})}},titleMorph:{derived:!0,
readOnly:!0,get:function(){return this.getSubmorphNamed("title")}},itemMorphs:{derived:!0,readOnly:!0,get:function(){return this.submorphs.filter(function(a){return a.isMenuItem})}}}}}],e,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3047,end:15736})}(xg.Morph));xg.Menu=AJ;xg.Menu=AJ;
xg.Menu=AJ;var hla=Object.freeze({__proto__:null,MenuDivider:yJ,MenuItem:zJ,Menu:AJ}),zj=lively.FreezerRuntime.recorderFor("lively.components/resizers.js");zj.arr=vf;zj.pt=oh;zj.Color=Wf;zj.Morph=nk;var BJ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),m=e.hasOwnProperty("VerticalResizer")&&"function"===typeof e.VerticalResizer?e.VerticalResizer:e.VerticalResizer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(m,b,[{key:"onDrag",value:function(a){this.movedHorizontallyBy(a.position.x-a.state.lastDragPosition.x)}},{key:"divideRelativeToParent",value:function(a){if(!(!this.owner||"number"!==typeof a||0>a||1<a)){var g=this.owner.extent.x-this.extent.x;if(!(0>g)){var l=this.getRelativeDivide();this.movedHorizontallyBy(g*(a-l))}}}},{key:"getRelativeDivide",value:function(a){var g=this.bounds();a=g.left();g=this.owner.extent.x-g.width;return 0>g?NaN:a/g}},{key:"movedHorizontallyBy",value:function(a){this.resizeIsSave(a)&&
(this.fixed.concat(this.scalingRight).forEach(function(g){var l=g.position;g.position=zj.pt(l.x+a,l.y)}),this.scalingLeft.forEach(function(g){var l=g.extent;g.extent=zj.pt(l.x+a,l.y)}),this.scalingRight.forEach(function(g){var l=g.extent;g.extent=zj.pt(l.x-a,l.y)}),this.position=this.position.addPt(zj.pt(a,0)))}},{key:"resizeIsSave",value:function(a){var g=this;return this.scalingLeft.every(function(l){return l.extent.x+a>=g.minWidth})&&this.scalingRight.every(function(l){return l.extent.x-a>=g.minWidth})}},
{key:"addFixed",value:function(a){zj.arr.pushIfNotIncluded(this.fixed,a)}},{key:"addScalingLeft",value:function(a){zj.arr.pushIfNotIncluded(this.scalingLeft,a)}},{key:"addScalingRight",value:function(a){zj.arr.pushIfNotIncluded(this.scalingRight,a)}}],[{key:"className",get:function(){return"VerticalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:zj.Color.gray.lighter()},nativeCursor:{defaultValue:"ew-resize"},fixed:{defaultValue:[]},scalingLeft:{defaultValue:[]},scalingRight:{defualtValue:[]},
minWidth:{defaultValue:20},draggable:{defaultValue:!0}}}}],e,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:128,end:2703})}(zj.Morph);zj.VerticalResizer=BJ;zj.VerticalResizer=BJ;zj.VerticalResizer=BJ;var CJ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),
m=e.hasOwnProperty("HorizontalResizer")&&"function"===typeof e.HorizontalResizer?e.HorizontalResizer:e.HorizontalResizer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"onDrag",value:function(a){this.movedVerticallyBy(a.position.y-a.state.lastDragPosition.y)}},{key:"divideRelativeToParent",value:function(a){if(!(!this.owner||"number"!==typeof a||0>a||1<a)){var g=this.owner.extent.y-this.extent.y;if(!(0>
g)){var l=this.getRelativeDivide();this.movedVerticallyBy(g*(a-l))}}}},{key:"getRelativeDivide",value:function(a){var g=this.bounds();a=g.top();g=this.owner.extent.y-g.height;return 0>g?NaN:a/g}},{key:"movedVerticallyBy",value:function(a){this.resizeIsSave(a)&&(this.fixed.concat(this.scalingBelow).forEach(function(g){var l=g.position;g.position=zj.pt(l.x,l.y+a)}),this.scalingAbove.forEach(function(g){var l=g.extent;g.extent=zj.pt(l.x,l.y+a)}),this.scalingBelow.forEach(function(g){var l=g.extent;g.extent=
zj.pt(l.x,l.y-a)}),this.position=this.position.addPt(zj.pt(0,a)))}},{key:"resizeIsSave",value:function(a){var g=this;return this.scalingAbove.every(function(l){return l.extent.y+a>=g.minHeight})&&this.scalingBelow.every(function(l){return l.extent.y-a>=g.minHeight})}},{key:"addFixed",value:function(a){zj.arr.pushIfNotIncluded(this.fixed,a)}},{key:"addScalingAbove",value:function(a){zj.arr.pushIfNotIncluded(this.scalingAbove,a)}},{key:"addScalingBelow",value:function(a){zj.arr.pushIfNotIncluded(this.scalingBelow,
a)}}],[{key:"className",get:function(){return"HorizontalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:zj.Color.gray.lighter()},nativeCursor:{defaultValue:"ns-resize"},fixed:{defaultValue:[]},scalingBelow:{defaultValue:[]},scalingAbove:{defaultValue:[]},minHeight:{defaultValue:20},draggable:{defaultValue:!0}}}}],e,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:2713,end:5319})}(zj.Morph);zj.HorizontalResizer=CJ;zj.HorizontalResizer=CJ;zj.HorizontalResizer=CJ;var ila=Object.freeze({__proto__:null,VerticalResizer:BJ,HorizontalResizer:CJ}),Uf=lively.FreezerRuntime.recorderFor("lively.components/tree.js");Uf.arr=vf;Uf.fun=nl;Uf.obj=Pf;Uf.tree=Hr;Uf.string=vh;Uf.promise=yg;Uf.pt=oh;Uf.Rectangle=ee;Uf.Color=Wf;Uf.Morph=nk;Uf.Text=rr;Uf.config=wk;Uf.touchInputDevice=Qo;Uf.Label=sr;Uf.connect=
fk;Uf.signal=tl;Uf.bowser=Z4;var DJ=sa("bp",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),m=e.hasOwnProperty("Tree")&&"function"===typeof e.Tree?e.Tree:e.Tree=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;if(!a.treeData)throw Error("Cannot create tree without TreeData!");Sb._get(Object.getPrototypeOf(m.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);this.resetCache();this.update()}},{key:"onChange",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a);"fontSize fontColor selectionColor disableIndent nonSelectionFontColor selectionFontColor".split(" ").includes(a.prop)&&this.update(!0)}},{key:"resetCache",value:function(){this._lineHeightCache=null}},{key:"isTree",get:function(){return!0}},{key:"nodeStyle",get:function(){return{fontFamily:this.fontFamily,
fontSize:this.fontSize,fontWeight:this.fontWeight,autofit:!this.resizeNodes}}},{key:"lineBounds",value:function(a){var g=this.textLayout.charBoundsOfRow(this,a);a=Uf.Rectangle.fromLiteral(Uf.arr.first(g)).topLeft();g=Uf.Rectangle.fromLiteral(Uf.arr.last(g)).bottomRight();return Uf.Rectangle.fromAny(a,g)}},{key:"recoverOriginalLine",value:function(a){for(var g=this.document.getTextAndAttributesOfLine(a),l=0;l<g.length;l++){var q=this._originalColor[l];q&&!Uf.obj.isString(g[l])&&(g[l]?g[l].fontColor=
q:g[l]={fontColor:q})}this.document.setTextAndAttributesOfLine(a,g)}},{key:"renderSelectedLine",value:function(a){var g=this.document.getTextAndAttributesOfLine(a);this._originalColor=Array(g.length);for(var l=0;l<g.length;l++)0===l%2?g[l]&&g[l].isMorph&&(this._originalColor[l]=g[l]?g[l].fontColor||this.nonSelectionFontColor:null,g[l].fontColor=this.selectionFontColor,g[l].isSelected=!0):(this._originalColor[l]=(g[l]?g[l].fontColor:null)||this.nonSelectionFontColor,g[l]?g[l].fontColor=this.selectionFontColor:
g[l]={fontColor:this.selectionFontColor});this.document.setTextAndAttributesOfLine(a,g);this.selectLine(a,!0);this._lastSelectedIndex=this.selectedIndex}},{key:"computeTreeAttributes",value:function(a){if(!a.length)return[];for(var g=Uf.arr.genN(8*(a.length-1),function(){return null}),l=1,q,r,u=this.disableIndent?0:1.3*this.fontSize;l<a.length;l++){q=8*(l-1);r=this.selectedIndex==l;a[l].node.isSelected=r;g[q]=" ";g[q+1]={fontSize:u,fontColor:Uf.Color.transparent,textStyleClasses:["fas"],paddingRight:u*
(a[l].depth-1)+"px"};g[q+3]={fontColor:Uf.Color.transparent,textStyleClasses:["fas"],paddingTop:this.fontSize/10+"px",paddingRight:this.fontSize/8+"px"};this.treeData.isLeaf(a[l].node)?g[q+2]=this.disableIndent?"":"    ":(g[q+2]=this.treeData.isCollapsed(a[l].node)?" \uf0da ":" \uf0d7 ",Object.assign(g[q+3],{paddingRight:this.treeData.isCollapsed(a[l].node)?this.fontSize/4+"px":"0px",paddingTop:"0px",nativeCursor:"pointer",fontColor:this.fontColor}));var v=this.treeData.safeDisplay(a[l].node);v.isMorph&&
(v._capturedProps&&Object.assign(v,v._capturedProps),r&&(v._capturedProps=Uf.obj.select(v,["fontColor"])),v.fontColor=this.nonSelectionFontColor);g[q+4]=v;Uf.arr.isArray(v)?g[q+5]=[]:g[q+5]={fontColor:this.fontColor};g[q+6]="\n";g[q+7]={}}g.push(" ",{fontSize:1.3*this.fontSize,textStyleClasses:["far"]});return 1<a.length?Uf.arr.flatten(g):[]}},{key:"update",value:function(a){var g=this;if(!this._updating&&this.treeData&&this.nodeItemContainer){this._updating=!0;try{this.withMetaDo({isLayoutAction:!0},
function(){var l=g.treeData.asListWithIndexAndDepth();g.treeData!==g.lastTreeData||g.lastNumberOfNodes!==l.length||a?(g.replace({start:{row:0,column:0},end:g.documentEndPosition},g.computeTreeAttributes(l),!1,!1),g.invalidateTextLayout(!0,!1),g.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){g.makeDirty();q.jumpToEnd()})})):g._lastSelectedIndex&&g.recoverOriginalLine(g._lastSelectedIndex-1);g.lastTreeData=g.treeData;g.lastNumberOfNodes=l.length;g.cursorPosition=
{row:0,column:0};0<g.selectedIndex&&g.renderSelectedLine(g.selectedIndex-1)})}finally{this._updating=!1}}}},{key:"buildViewState",value:function(a){var g=this;"function"!==typeof a&&(a=function(r){return r});var l=this.selectedNode?a(this.selectedNode):null,q=new Map;Uf.tree.prewalk(this.treeData.root,function(r){return q.set(a(r),g.treeData.isCollapsed(r))},function(r){return g.treeData.getChildrenIfUncollapsed(r)});return{selectionId:l,collapsedMap:q,scroll:this.scroll}}},{key:"applyViewState",
value:function(a,g){var l=this,q,r,u,v,y,z,A,B;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:"function"!==typeof g&&(g=function(E){return E}),q=a,r=q.selectionId,u=q.collapsedMap,v=q.scroll,y=0,z=-1;case 2:A=l.nodes;if(y>=A.length){G.jumpTo(3);break}B=g(A[y]);r===B&&(z=y);if(!u.has(B)||u.get(B)){G.jumpTo(4);break}return G.yield(l.treeData.collapse(A[y],!1),4);case 4:y++;G.jumpTo(2);break;case 3:return l.selectedIndex=z,l.update(),l.scroll=v,l.scrollSelectionIntoView(),
G.yield(Uf.promise.delay(0),0)}})}},{key:"maintainViewStateWhile",value:function(a,g){var l=this,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(q=l.buildViewState(g),r.yield(a(),2)):r.yield(l.applyViewState(q,g),0)})}},{key:"onNodeCollapseChanged",value:function(a){var g=a.node,l=a.isCollapsed,q=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return q.resetCache(),u.setCatchFinallyBlocks(2),u.yield(q.treeData.collapse(g,
l),4);if(2!=u.nextAddress)return Uf.signal(q,"nodeCollapseChanged",{node:g,isCollapsed:l}),q.update(),u.leaveTryBlock(0);r=u.enterCatchBlock();q.showError(r);u.jumpToEnd()})}},{key:"uncollapse",value:function(a){a=void 0===a?this.selectedNode:a;var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?a&&g.treeData.isCollapsed(a)?l.yield(g.onNodeCollapseChanged({node:a,isCollapsed:!1}),2):l.return():l.return(a)})}},{key:"collapse",value:function(a){a=void 0===
a?this.selectedNode:a;var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?!a||g.treeData.isCollapsed(a)?l.return():l.yield(g.onNodeCollapseChanged({node:a,isCollapsed:!0}),2):l.return(a)})}},{key:"selectedPath",value:function(){return this.treeData.pathOf(this.selectedNode)}},{key:"selectPath",value:function(a){var g=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?(l=g,q.yield(g.treeData.followPath(a),2)):
q.return(l.selectedNode=q.yieldResult)})}},{key:"gotoIndex",value:function(a){this.selectedNode=this.nodes[a];this.scrollIndexIntoView(a)}},{key:"scrollSelectionIntoView",value:function(){this.selectedNode&&this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",value:function(a){this.scrollToIndex(a,"into view")}},{key:"centerSelection",value:function(){this.selectedNode&&this.scrollToIndex(this.selectedIndex,"center")}},{key:"scrollToIndex",value:function(a){this.scrollPositionIntoView({row:a-
1,column:0})}},{key:"contextMenuForNode",value:function(a,g){Uf.signal(this,"contextMenuRequested",{node:a,evt:g})}},{key:"onKeyDown",value:function(a){var g=this.world().focusedMorph;if(!g.isText||g.readOnly)return Sb._get(Object.getPrototypeOf(m.prototype),"onKeyDown",this).call(this,a)}},{key:"onDragStart",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onDragStart",this).call(this,a);var g=this.textAttributeAtPoint(a.positionIn(this))||{},l=g.onDragStart,q=g.onDrag;g=g.onDragEnd;
q&&(this._onDragHandler=q);g&&(this._onDragEndHandler=g);l&&l(a)}},{key:"onDrag",value:function(a){this._onDragHandler?this._onDragHandler(a):Sb._get(Object.getPrototypeOf(m.prototype),"onDrag",this).call(this,a)}},{key:"onDragEnd",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onDragEnd",this).call(this,a);delete this._onDragHandler;this._onDragEndHandler&&this._onDragEndHandler(a);delete this._onDragEndHandler}},{key:"onMouseDown",value:function(a){var g=this,l,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==
z.nextAddress)return l=g.textPositionFromPoint(a.positionIn(g)),q=l.row,r=l.column,u=g.nodes[q+1],u?!g.treeData.isLeaf(u)&&4>r?z.yield(u.isCollapsed,3):(g.selectedIndex!=q+1&&(g.selectedIndex=q+1),z.jumpTo(2)):z.return();2!=z.nextAddress&&(z.yieldResult?g.uncollapse(u):g.collapse(u));v=g.textAttributeAt({row:q,column:r})||{};(y=v.onMouseDown)&&y(a);z.jumpToEnd()})}},{key:"onMouseUp",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onMouseUp",this).call(this,a);var g=(this.textAttributeAtPoint(a.positionIn(this))||
{}).onMouseUp;g&&g(a)}},{key:"onHoverIn",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onHoverIn",this).call(this,a);this.activateOnHover&&(this.clipMode="auto")}},{key:"onHoverOut",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onHoverOut",this).call(this,a);!Uf.touchInputDevice&&this.activateOnHover&&(this.clipMode="hidden")}},{key:"onContextMenu",value:function(a){if(a.targetMorph===this){a.stop();var g=this.textPositionFromPoint(a.positionIn(this));(g=this.nodes[g.row+
1])&&this.contextMenuForNode(g,a)}}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"select node above"},{keys:"Down|Ctrl-N",command:"select node below"},{keys:"Left",command:"collapse selected node"},{keys:"Right",command:"uncollapse selected node"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",
command:"realign top-bottom-center"},{keys:{mac:"Meta-[",win:"Ctrl-["},command:{command:"collapse or uncollapse all siblings",args:{what:"collapse"}}},{keys:{mac:"Meta-]",win:"Ctrl-]"},command:{command:"collapse or uncollapse all siblings",args:{what:"uncollapse"}}},{keys:"Alt-N",command:"goto next sibling"},{keys:"Alt-P",command:"goto prev sibling"},{keys:"Alt-U",command:"goto parent"}]}},{key:"commands",get:function(){return Uf.treeCommands}},{key:"highlightChangedNodes",value:function(a){this.treeData.diff(a).forEach(function(g){g=
$jscomp.makeIterator(g);var l=g.next().value;g.next();return l.renderedNode&&l.renderedNode.highlight()})}}],[{key:"className",get:function(){return"Tree"}},{key:"properties",get:function(){return{selectionColor:{type:"ColorGradient",defaultValue:Uf.Color.rgb(21,101,192)},fontFamily:{defaultValue:Uf.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"auto"},selectable:{defaultValue:!1},acceptsDrops:{defaultValue:!1},readOnly:{defaultValue:!0},fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},
disableIndent:{defaultValue:!1},activateOnHover:{defaultValue:!0},lineHeight:{defaultValue:1.5},clipMode:{defaultValue:"auto"},padding:{defaultValue:Uf.Rectangle.inset(3)},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/tree/light"}}},resizeNodes:{defaultValue:!1,set:function(a){this.setProperty("resizeNodes",a);this.resetCache();this.update()}},treeData:{after:["selection"],set:function(a){this.setProperty("treeData",a);this.resetCache();this.update()}},selectedIndex:{derived:!0,
after:["selectedNode","nodes"],get:function(){return this.selectedNode?this.nodes.indexOf(this.selectedNode):-1},set:function(a){this.selectedNode=this.nodes[a]}},nodes:{derived:!0,after:["treeData"],get:function(){return this.treeData.asList()}},defaultViewState:{get:function(){return Object.assign({},Sb._get(Object.getPrototypeOf(m),"prototype",this).defaultViewState,{fastScroll:!1})}},selectedNode:{set:function(a){this.setProperty("selectedNode",a);this.update()}},selectedNodeAndSiblings:{readOnly:!0,
derived:!0,after:["selectedNode","treeData"],get:function(){return this.selectedNode?this.treeData.nodeWithSiblings(this.selectedNode):[]}},selectionFontColor:{isStyleProp:!0,defaultValue:Uf.Color.white,set:function(a){this.setProperty("selectionFontColor",a)}},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Uf.Color.rgbHex("333"),set:function(a){this.setProperty("nonSelectionFontColor",a)}},nodeItemContainer:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this}},nodeMorphs:{derived:!0,
readOnly:!0,after:["submorphs"],get:function(){return this.nodeItemContainer.submorphs.slice()}}}}}],e,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:1470,end:17455})}(Uf.Text));Uf.Tree=DJ;Uf.Tree=DJ;Uf.Tree=DJ;var EJ=sa("bn",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),
m=e.hasOwnProperty("TreeData")&&"function"===typeof e.TreeData?e.TreeData:e.TreeData=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.root=a;this.parentMap=new WeakMap}},{key:"__dont_serialize__",get:function(){return["parentMap"]}},{key:"__deserialize__",value:function(){this.parentMap=new WeakMap}},{key:"display",value:function(a){throw Error("Not yet implemented");
}},{key:"isCollapsed",value:function(a){throw Error("Not yet implemented");}},{key:"collapse",value:function(a,g){throw Error("Not yet implemented");}},{key:"getChildren",value:function(a){throw Error("Not yet implemented");}},{key:"isLeaf",value:function(a){throw Error("Not yet implemented");}},{key:"getChildrenIfUncollapsed",value:function(a){return this.isCollapsed(a)?[]:this.getChildren(a)}},{key:"safeDisplay",value:function(a){try{return this.display(a)}catch(g){return"[TreeData] Error when trying to display node: "+
g}}},{key:"nodeToString",value:function(a){a=this.safeDisplay(a);return"string"===typeof a?a:a&&Array.isArray(a)?a.map(function(g,l){return 0===l%2?g:""}).join(""):String(a)}},{key:"parentNode",value:function(a){var g=this;return this.parentMap.get(a)||Uf.tree.detect(this.root,function(l){return!g.isLeaf(l)&&g.getChildrenIfUncollapsed(l).includes(a)},function(l){return g.getChildrenIfUncollapsed(l)})}},{key:"nodeWithSiblings",value:function(a){return(a=this.parentNode(a))?this.getChildrenIfUncollapsed(a):
[]}},{key:"asList",value:function(){return this.asListWithIndexAndDepth().map(function(a){return a.node})}},{key:"asListWithIndexAndDepth",value:function(a){var g=this;a=void 0===a?!1:a;var l=[];Uf.tree.prewalk(this.root,function(q,r,u){return l.push({node:q,depth:u,i:r})},function(q){return g.getChildrenIfUncollapsed(q)});return a?Uf.arr.filter(l,a):l}},{key:"pathOf",value:function(a){for(var g=[];a;)g.unshift(a),a=this.parentNode(a);return g}},{key:"followPath",value:function(a,g,l){l=void 0===
l?this.root:l;var q=this,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:g||(g=function(A,B){return A===B});r=a.findIndex(function(A){return g(A,l)});a=a.slice(r+1);if(!a.length)return z.return(null);u=l;case 2:if(!a.length){z.jumpTo(3);break}if(!q.isCollapsed(u)){z.jumpTo(4);break}return z.yield(q.collapse(u,!1),4);case 4:v=a.shift();y=q.getChildrenIfUncollapsed(u).find(function(A){return g(v,A)});if(!y)throw Error("Cannot descend into tree, next node of "+
a.join(".")+" not found at "+q.safeDisplay(u));u=y;z.jumpTo(2);break;case 3:return z.return(u)}})}},{key:"diff",value:function(a){var g=[],l=this.asListWithIndexAndDepth();a=a.asListWithIndexAndDepth();if(l.length!=a.length)return[];l=$jscomp.makeIterator(Uf.arr.zip(l,a));for(a=l.next();!a.done;a=l.next()){var q=$jscomp.makeIterator(a.value);a=q.next().value;q=q.next().value;Uf.obj.equals(a.node.value,q&&q.node.value)||g.push([a.node,q.node])}return g}},{key:"patch",value:function(a){var g=this.diff(a);
if(0<g.length){a=$jscomp.makeIterator(g);for(g=a.next();!g.done;g=a.next()){var l=$jscomp.makeIterator(g.value);g=l.next().value;l=l.next().value;g.value=l.value}return this}return a}},{key:"uncollapseAll",value:function(a,g,l){g=void 0===g?0:g;var q=this,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:if(l){v.jumpTo(2);break}return v.yield(q.uncollapseAll(a,g,q.root),3);case 3:return v.return(v.yieldResult);case 2:if(!a(l,g)){v.jumpTo(0);break}if(!l.isCollapsed){v.jumpTo(5);
break}return v.yield(q.collapse(l,!1),6);case 6:case 5:u=v.forIn(l.children);case 7:if(null==(r=u.getNext()))v.jumpTo(0);else return v.yield(q.uncollapseAll(a,g+1,l.children[r]),7)}})}}],[{key:"className",get:function(){return"TreeData"}}],e,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:17465,
end:22466})}(void 0));Uf.TreeData=EJ;Uf.TreeData=EJ;Uf.TreeData=EJ;Uf.treeCommands=[{name:"select via filter",exec:function(b){var e,m,a,g,l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return e=b.treeData,e.asListWithIndexAndDepth(),e.asListWithIndexAndDepth().map(function(u){return Object.assign(u,{string:e.nodeToString(u.node)})}),m=Uf.string.lines(Uf.string.printTree(e.root,e.nodeToString.bind(e),e.getChildrenIfUncollapsed.bind(e))),a=e.asList().map(function(u,
v){return{isListItem:!0,string:m[v],value:u}}),r.yield(b.world().filterableListPrompt("Select item",a),2);g=r.yieldResult;l=$jscomp.makeIterator(g.selected);if(q=l.next().value)b.selectedNode=q,b.scrollSelectionIntoView();return r.return(!0)})}},{name:"page up",exec:function(b){b.scrollPageUp(1);var e=b.scroll,m=b.padding.top(),a=e.y;e=b.lineHeightCache.findIndex(function(g){return a<=(m+=g)});e--;b.gotoIndex(Math.max(1,e));return!0}},{name:"page down",exec:function(b){b.scrollPageDown(1);var e=b.scroll,
m=b.padding.top(),a=e.y+b.height;e=b.lineHeightCache.findIndex(function(g){return a<=(m+=g)});e--;b.gotoIndex(Math.min(e,b.nodes.length-1));return!0}},{name:"goto first item",exec:function(b){b.gotoIndex(1);return!0}},{name:"goto last item",exec:function(b){b.gotoIndex(b.nodes.length-1);return!0}},{name:"goto next sibling",exec:function(b){var e=b.selectedNodeAndSiblings;if(e=e[e.indexOf(b.selectedNode)+1])b.selectedNode=e,b.scrollSelectionIntoView();return!0}},{name:"goto prev sibling",exec:function(b){var e=
b.selectedNodeAndSiblings;if(e=e[e.indexOf(b.selectedNode)-1])b.selectedNode=e,b.scrollSelectionIntoView();return!0}},{name:"goto parent",exec:function(b){b.selectedNode&&(b.selectedNode=b.treeData.parentNode(b.selectedNode),b.scrollSelectionIntoView());return!0}},{name:"collapse selected node",exec:function(b){var e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?(e=b.selectedNode,e?b.treeData.isCollapsed(e)?(b.selectedNode=b.treeData.parentNode(e),b.scrollSelectionIntoView(),
m.jumpTo(2)):m.yield(b.onNodeCollapseChanged({node:b.selectedNode,isCollapsed:!0}),2):m.return(!0)):m.return(!0)})}},{name:"uncollapse selected node",exec:function(b){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?b.selectedNode?e.yield(b.onNodeCollapseChanged({node:b.selectedNode,isCollapsed:!1}),2):e.jumpTo(2):e.return(!0)})}},{name:"collapse or uncollapse all siblings",exec:function(b,e){function m(z){return Uf.arr.filter(l.getChildrenIfUncollapsed(z),function(A){return!l.isLeaf(A)})}
function a(z,A){return Promise.all(z.map(function(B){return b.onNodeCollapseChanged({node:B,isCollapsed:A})}))}e=void 0===e?{what:"collapse"}:e;var g,l,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress){g="collapse"===e.what;l=b.treeData;if(g){if(l.isCollapsed(b.selectedNode))return z.return(!0);r=l.parentNode(b.selectedNode);u=-1;Uf.tree.prewalk(r,function(A,B,G){G<u||(G>u&&(u=G,q=[]),G===u&&Uf.arr.pushIfNotIncluded(q,l.parentNode(A)))},l.getChildrenIfUncollapsed.bind(l))}else for(v=
Uf.arr.compact([l.parentNode(b.selectedNode)]);v.length;){q=Uf.arr.flatmap(v,function(A){return m(A)});y=q.every(function(A){return l.isCollapsed(A)===g});if(!y)break;v=q}return z.yield(a(q,g),2)}b.scrollSelectionIntoView();return z.return(!0)})}},{name:"select node above",exec:function(b){var e=b.nodes,m=b.selectedIndex;1>=m&&(m=e.length);b.selectedNode=e[m-1];b.scrollSelectionIntoView();return!0}},{name:"select node below",exec:function(b){var e=b.nodes,m=b.selectedIndex;if(-1>=m||m>=e.length-1)m=
0;b.selectedNode=e[m+1];b.scrollSelectionIntoView();return!0}},{name:"realign top-bottom-center",exec:function(b){if(b.selectedNode){var e=b.scroll,m=e.x;e=e.y;var a=b.lineBounds(b.selectedIndex),g=a.topLeft();a=b.height-a.height;e=2>Math.abs(g.y-e)?g.y-a:2>Math.abs(g.y-e-.5*a)?g.y:g.y-.5*a;b.scroll=Uf.pt(m,e);return!0}}},{name:"print contents in text window",exec:function(b){var e=b.treeData;e=Uf.string.printTree(e.root,e.nodeToString.bind(e),e.getChildrenIfUncollapsed.bind(e));var m=b.getWindow()?
"printed "+b.getWindow().title:b.name;return b.world().execCommand("open text window",{title:m,content:e,name:m,fontFamily:Uf.config.codeEditor.defaultStyle.fontFamily})}}];var jla=Object.freeze({__proto__:null,Tree:DJ,TreeData:EJ}),Jw=lively.FreezerRuntime.recorderFor("lively.components/iframe.js");Jw.promise=yg;Jw.HTMLMorph=Hw;var FJ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/iframe.js"),m=e.hasOwnProperty("IFrameMorph")&&"function"===typeof e.IFrameMorph?e.IFrameMorph:
e.IFrameMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a.src||a.srcdoc||(a.srcdoc="<p>Empty iframe</p>");Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a)}},{key:"changeSrc",value:function(a,g){var l=this,q=this.iframe,r=this._loadPromise;r&&!r.loaded&&r.reject();this._loadPromise=
Jw.promise.deferred();this._loadPromise.loaded=!1;q.onload=function(u){l._loadPromise.loaded=!0;l._loadPromise.resolve(u)};g=a||g;r=a?"src":"srcdoc";a=a?"srcdoc":"src";this.addValueChange(a,null);this.addValueChange(r,g);q.removeAttribute(a);q.setAttribute(r,g);this._loadPromise[r]=g}},{key:"whenLoaded",value:function(){return this._loadPromise.promise}},{key:"reload",value:function(){return this.iframe.src=this.src}},{key:"run",value:function(a){return this.innerWindow.eval("("+a+")();")}}],[{key:"className",
get:function(){return"IFrameMorph"}},{key:"printTextMorph",value:function(a){var g,l,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(a.whenRendered(),2);if(3!=v.nextAddress)return g=a.env.renderer.getNodeForMorph(a),l=Jw.IFrameMorph.open({srcdoc:g.outerHTML}),v.yield(l.whenLoaded(),3);q=l.innerWindow.document;q.body.style.whiteSpace="normal";q.body.style.margin="0.5cm";q.querySelector(".Text").style.width="100%";q.querySelector(".Text").style.overflow=
"visible";q.querySelectorAll(".marker-layer-part").forEach(function(y){return y.parentNode.removeChild(y)});r=q.querySelector(".text-layer");r.style.whiteSpace="pre-wrap";u=Array.from(r.querySelectorAll("div"));u.forEach(function(y){y.childNodes[0]&&(Array.from(y.childNodes).forEach(function(z){return r.insertBefore(z,y)}),r.insertBefore(q.createElement("br"),y),r.removeChild(y))});l.innerWindow.print();l.getWindow().remove();v.jumpToEnd()})}},{key:"open",value:function(a){a=void 0===a?{}:a;return(new this(a)).openInWindow({title:a.title||
"iframe"}).targetMorph}},{key:"properties",get:function(){return{iframe:{after:["domNode"],readOnly:!0,get:function(){return this.domNode}},innerWindow:{after:["iframe"],readOnly:!0,get:function(){return this.iframe.contentWindow}},innerWorld:{after:["innerWindow"],readOnly:!0,get:function(){return this.innerWindow.$world}},src:{after:["domNode"],set:function(a){this.changeSrc(a,null)}},srcdoc:{after:["domNode"],set:function(a){this.changeSrc(null,a)}},domNode:{get:function(){this._domNode||(this._domNode=
this.document.createElement("iframe"),this._domNode.setAttribute("style","position: absolute; width: 100%; height: 100%;"),this._domNode.setAttribute("allowfullscreen",!0));return this._domNode},set:function(a){return this._domNode=a}}}}}],e,{pathInPackage:function(){return"iframe.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:622,
end:6160})}(Jw.HTMLMorph);Jw.IFrameMorph=FJ;Jw.IFrameMorph=FJ;Jw.IFrameMorph=FJ;var kla=Object.freeze({__proto__:null,IFrameMorph:FJ}),Ff=lively.FreezerRuntime.recorderFor("lively.components/window.js");Ff.arr=vf;Ff.promise=yg;Ff.pt=oh;Ff.LinearGradient=El;Ff.Color=Wf;Ff.Rectangle=ee;Ff.Label=sr;Ff.morph=wa;Ff.Morph=nk;Ff.HorizontalLayout=bt;Ff.StyleSheet=dt;Ff.connect=fk;Ff.signal=tl;Ff.easings=cq;var uQ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/window.js"),m=e.hasOwnProperty("Window")&&
"function"===typeof e.Window?e.Window:e.Window=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"build",value:function(){this.submorphs=[this.buildHeader(),this.buildResizer()]}},{key:"openWindowMenu",value:function(){var a=this,g,l,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){return 1==z.nextAddress?(g=a.world()||a.env.world,l=a.targetMorph.world(),q=l.openMenu,r=[["Change Window Title",
function(){var A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){if(1==B.nextAddress)return B.yield(g.prompt("Enter New Name",{input:a.title}),2);if(A=B.yieldResult)a.title=A;B.jumpToEnd()})}],["Align and resize",[{alias:"left",target:g,command:"resize active window",args:{window:a,how:"left"}},{alias:"center",target:g,command:"resize active window",args:{window:a,how:"center"}},{alias:"right",target:g,command:"resize active window",args:{window:a,how:"right"}},{alias:"reset",target:g,
command:"resize active window",args:{window:a,how:"reset"}}]],{isDivider:!0}],u=r.concat,v=$jscomp,y=v.arrayFromIterable,z.yield(a.targetMorph.menuItems(),2)):z.return(q.call(l,u.call(r,y.call(v,z.yieldResult))))})}},{key:"toggleFader",value:function(a){var g=this,l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:l=g.getSubmorphNamed("fader")||g.addMorph({name:"fader",fill:Ff.Color.black.withA(.5),opacity:0,extent:g.extent});if(a){q=g.world().visibleBounds().translateForInclusion(g.bounds());
g._originalBounds=g.bounds();g.animate({bounds:q,duration:300});g.borderColor=Ff.Color.gray.darker();g._faderTriggered=!0;l.opacity=1;r.jumpTo(0);break}g._originalBounds&&(g.animate({bounds:g._originalBounds,duration:300}),g._originalBounds=null);g._faderTriggered=!1;return r.yield(g.whenRendered(),3);case 3:return r.yield(Ff.promise.delay(100),4);case 4:return g.borderColor=Ff.Color.gray,g._faderTriggered?r.return():r.yield(l.animate({opacity:0,duration:300}),5);case 5:l.remove(),r.jumpToEnd()}})}},
{key:"isWindow",get:function(){return!0}},{key:"targetMorphBounds",value:function(){return new Ff.Rectangle(0,25,this.width,this.height-25)}},{key:"relayoutWindowControls",value:function(){var a=this.innerBounds(),g=this.ui.windowTitle,l=this.ui.resizer,q=a.withHeight(25),r=this.ui.header,u=this.ui.windowControls.bounds().right()+3,v=q.withLeftCenter(Ff.pt(u,q.height/2));l.bottomRight=a.bottomRight();!this.minimized&&this.targetMorph&&this.targetMorph.isLayoutable&&this.targetMorph.setBounds(this.targetMorphBounds());
g.textBounds().width<q.width-2*u?g.center=q.center():g.leftCenter=v.leftCenter();r.width=this.width}},{key:"ensureNotOverTheTop",value:function(){var a=this.world();if(a){var g=this.globalBounds();g.top()<a.innerBounds().top()&&this.moveBy(Ff.pt(0,a.innerBounds().top()-g.top()))}}},{key:"buildHeader",value:function(){return Ff.morph({name:"header",extent:Ff.pt(this.width,50),submorphs:[Ff.morph({name:"window controls",styleClasses:["buttonGroup"],submorphs:this.buildButtons()}),this.buildTitleLabel()]})}},
{key:"buildButtons",value:function(){var a=this.getSubmorphNamed("close")||Ff.morph({name:"close",styleClasses:["windowButton","closeButton"],tooltip:"close window",submorphs:[Ff.Label.icon("times",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});Ff.connect(a,"onMouseDown",this,"close");var g=this.getSubmorphNamed("minimize")||Ff.morph({name:"minimize",styleClasses:["windowButton","minimizeButton"],tooltip:"collapse window",submorphs:[Ff.Label.icon("minus",{name:"label",styleClasses:["defaultLabelStyle",
"default"]})]});Ff.connect(g,"onMouseDown",this,"minimized",{updater:function(q){q(!this.targetObj.minimized)}});if(this.resizable){var l=this.getSubmorphNamed("menu")||Ff.morph({name:"menu",styleClasses:["windowButton","windowMenuButton"],tooltip:"Open Window Menu",submorphs:[Ff.Label.icon("chevron-down",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});Ff.connect(l,"onMouseDown",this,"openWindowMenu")}return Ff.arr.compact([a,g,l])}},{key:"buildTitleLabel",value:function(){return this.addMorph({padding:Ff.Rectangle.inset(0,
2,0,0),styleClasses:["windowTitleLabel"],type:"label",name:"window title",reactsToPointer:!1,value:""})}},{key:"resizeBy",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"resizeBy",this).call(this,a);this.relayoutWindowControls()}},{key:"resizeAt",value:function(a){var g=$jscomp.makeIterator(a);a=g.next().value;g=g.next().value;switch(a){case "right":this.resizeBy(g.withY(0));break;case "bottom right":this.resizeBy(g);break;case "bottom":this.resizeBy(g.withX(0));break;case "left":a=
this.right;this.resizeBy(g.withY(0).negated());this.right=a;break;case "bottom left":a=this.right,this.resizeBy(g.scaleByPt(Ff.pt(-1,1))),this.right=a}this.relayoutResizer()}},{key:"relayoutResizer",value:function(){var a=this.getSubmorphNamed("resizer"),g=$jscomp.makeIterator(a.submorphs),l=g.next().value,q=g.next().value,r=g.next().value,u=g.next().value;g=g.next().value;l.height=this.height;l.bottomRight=this.extent;q.bottomRight=this.extent;r.height=this.height;r.bottomLeft=Ff.pt(0,this.height);
u.bottomLeft=Ff.pt(0,this.height);g.width=this.width;g.bottomLeft=Ff.pt(0,this.height);a.position=Ff.pt(0,0)}},{key:"buildResizer",value:function(){var a,g,l,q;var r=Ff.Color.transparent;var u=Ff.morph({name:"resizer",fill:Ff.Color.transparent,position:Ff.pt(0,0),submorphs:[a=Ff.morph({name:"right resizer",fill:r,width:5,draggable:!0,nativeCursor:"ew-resize"}),g=Ff.morph({name:"bottom right resizer",fill:r,extent:Ff.pt(10,10),draggable:!0,nativeCursor:"nwse-resize"}),l=Ff.morph({name:"right resizer",
fill:r,width:5,draggable:!0,nativeCursor:"ew-resize"}),q=Ff.morph({name:"bottom left resizer",draggable:!0,fill:r,extent:Ff.pt(10,10),nativeCursor:"nesw-resize"}),r=Ff.morph({name:"bottom resizer",draggable:!0,fill:r,height:5,nativeCursor:"ns-resize"})]});Ff.connect(g,"onDrag",this,"resizeAt",{converter:function(v){return["bottom right",v.state.dragDelta]}});Ff.connect(a,"onDrag",this,"resizeAt",{converter:function(v){return["right",v.state.dragDelta]}});Ff.connect(r,"onDrag",this,"resizeAt",{converter:function(v){return["bottom",
v.state.dragDelta]}});Ff.connect(l,"onDrag",this,"resizeAt",{converter:function(v){return["left",v.state.dragDelta]}});Ff.connect(q,"onDrag",this,"resizeAt",{converter:function(v){return["bottom left",v.state.dragDelta]}});this.addMorph(u);this.relayoutResizer();return u}},{key:"toggleMinimize",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){a.minimized=!a.minimized;g.jumpToEnd()})}},{key:"applyMinimize",value:function(){var a=this,g,l,q,r,u,v,y,z,A,B,G,
E,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){if(1==J.nextAddress){if(!a.targetMorph)return J.return();g=a;l=g.nonMinizedBounds;q=g.minimized;r=g.width;u=a.ui;v=u.windowTitle;y=u.resizer;z=a.bounds();A=a.getSubmorphNamed("minimize");B=Ff.easings.outQuad;if(!q)return a.minimizedBounds=z,a.targetMorph&&(a.targetMorph.visible=!0),l=a.world().bounds().translateForInclusion(l||z),a.animate({bounds:l,styleClasses:["neutral","active"].concat($jscomp.arrayFromIterable(Ff.arr.without(a.styleClasses,
"minimzed"))),duration:100,easing:B}),A.tooltip="collapse window",J.jumpTo(2);a.nonMinizedBounds=z;G=(a.minimizedBounds||z).withExtent(Ff.pt(r,28));E=v.textBounds();K=a.get("window controls").bounds().right()+3;E.width+2*K<G.width&&(G=G.withWidth(E.width+K+5));a.minimizedBounds=G;A.tooltip="uncollapse window";return J.yield(a.animate({styleClasses:["minimized","active"].concat($jscomp.arrayFromIterable(Ff.arr.without(a.styleClasses,"neutral"))),bounds:G,duration:100,easing:B}),3)}2!=J.nextAddress&&
a.targetMorph&&(a.targetMorph.visible=!1);y.visible=!a.minimized;a.relayoutWindowControls();J.jumpToEnd()})}},{key:"close",value:function(){var a=this,g,l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return a.targetMorph&&"function"===typeof a.targetMorph.onWindowClose?r.yield(a.targetMorph.onWindowClose(),3):r.jumpTo(2);2!=r.nextAddress&&(g=r.yieldResult);if(!1===g)return r.return();l=a.world();a.deactivate();a.remove();(q=l.activeWindow()||Ff.arr.last(l.getWindows()))&&
q.activate();Ff.signal(a,"windowClosed",a);r.jumpToEnd()})}},{key:"onMouseDown",value:function(a){this.activate(a)}},{key:"onDragStart",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onDragStart",this).call(this,a);this.targetMorph&&(a.state.origReactsToPointer=this.targetMorph.reactsToPointer,this.targetMorph.reactsToPointer=!1)}},{key:"onDragEnd",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onDragEnd",this).call(this,a);this.targetMorph&&(this.targetMorph.reactsToPointer=
a.state.origReactsToPointer)}},{key:"onDrag",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onDrag",this).call(this,a);this.ensureNotOverTheTop()}},{key:"focus",value:function(){var a=this.world(),g=this.targetMorph;a&&g&&(!a.focusedMorph||a.focusedMorph!==g&&!g.isAncestorOf(a.focusedMorph))&&g.focus()}},{key:"isActive",value:function(){var a=this.world();return a&&"bold"==this.ui.windowTitle.fontWeight?Ff.arr.last(a.getWindows())===this:!1}},{key:"activate",value:function(a){var g=
this;if(this.isActive())return this.bringToFront(),this.focus(a),this.renderOnGPU=!0,this.relayoutWindowControls(),this;this.master={auto:"styleguide://System/window/light/active"};this.world()?this.bringToFront():this.openInWorldNearHand();var l=this.world()||this.env.world;Ff.arr.without(l.getWindows(),this).forEach(function(q){return q.deactivate()});this.focus(a);Ff.signal(this,"windowActivated",this);Promise.resolve(this.master.applyIfNeeded(!0)).then(function(){return g.relayoutWindowControls()});
return this}},{key:"deactivate",value:function(){this.master&&"styleguide://System/window/light/inactive"==this.master.auto||(this.master={auto:"styleguide://System/window/light/inactive"},this.relayoutWindowControls(),this.renderOnGPU=!1)}},{key:"keybindings",get:function(){return Sb._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Shift-L R E N",win:"Ctrl-Shift-L R E N"},command:"[window] change title"}])}},{key:"commands",get:function(){return Sb._get(Object.getPrototypeOf(m.prototype),
"commands",this).concat([{name:"[window] change title",exec:function(a,g){g=void 0===g?{}:g;var l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return(l=g.title)?r.jumpTo(2):r.yield(a.world().prompt("Enter new title",{input:a.title,historyId:"lively.morphic-window-title-hist"}),3);2!=r.nextAddress&&(l=r.yieldResult);if(q=l)a.title=q;return r.return(!0)})}}])}}],[{key:"className",get:function(){return"Window"}},{key:"properties",get:function(){return{submorphs:{initialize:function(){this.build()}},
ui:{derived:!0,get:function(){return{header:this.get("header"),resizer:this.get("resizer"),windowControls:this.get("window controls"),windowTitle:this.get("window title")}}},master:{initialize:function(){this.master={auto:"styleguide://System/window/light/active"}}},styleClasses:{defaultValue:["active"]},clipMode:{defaultValue:"hidden"},resizable:{defaultValue:!0},title:{after:["submorphs"],derived:!0,get:function(){return this.ui.windowTitle.textString},set:function(a){var g=this,l,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==
z.nextAddress){l="string"===typeof a?[a,{}]:a;q=[];for(r=0;r<l.length;r+=2)u=l[r],v=l[r+1],u=u.replace(/\n/g,""),y=u.length+0-100,0<y&&(u=u.slice(0,-y)),q.push(u,v||{});g.ui.windowTitle.value=q;return z.yield(g.whenRendered(),2)}g.relayoutWindowControls();z.jumpToEnd()})}},targetMorph:{after:["submorphs"],derived:!0,get:function(){return Ff.arr.withoutAll(this.submorphs,[this.get("header"),this.get("resizer")])[0]},set:function(a){var g=[this.get("header"),this.get("resizer")];Ff.arr.withoutAll(this.submorphs,
g).forEach(function(l){return l.remove()});a&&this.addMorph(a,this.resizable?this.get("resizer"):!1);this.relayoutWindowControls()}},minimizedBounds:{serialize:!1},nonMinizedBounds:{},nonMaximizedBounds:{},minimized:{set:function(a){this.setProperty("minimized",a);this.applyMinimize()}},maximized:{}}}}],e,{pathInPackage:function(){return"window.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:343,end:15977})}(Ff.Morph);uQ=Ff.Window;var vQ=sa("aL",uQ);Ff.default=uQ;var re=lively.FreezerRuntime.recorderFor("lively.components/prompts.js");re.Rectangle=ee;re.rect=Ii;re.Color=Wf;re.pt=oh;re.morph=wa;re.VerticalLayout=Dw;re.Morph=nk;re.StyleSheet=dt;re.Text=rr;re.GridLayout=Ew;re.Icon=sn;re.HorizontalLayout=bt;re.InputLine=nE;re.PasswordInputLine=Iw;re.arr=vf;re.obj=Pf;re.promise=yg;re.connect=fk;re.List=eB;re.FilterableList=qE;re.RadioButtonGroup=pE;re.RadioButton=
oE;var GJ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("AbstractPrompt")&&"function"===typeof e.AbstractPrompt?e.AbstractPrompt:e.AbstractPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,re.obj.dissoc(a,["label","commands","keybindings"]));this.build(a);a.commands&&this.addCommands(a.commands);a.keybindings&&this.addKeyBindings(a.keybindings)}},{key:"isPrompt",get:function(){return!0}},{key:"resolve",value:function(a){return this.answer.resolve(a)}},{key:"reject",value:function(a){return this.answer.resolve(a)}},{key:"activate",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){a.focus();a.answer=re.promise.deferred();a._isActive=
!0;re.promise.finally(a.answer.promise,function(){return a._isActive=!1});a.autoRemove&&re.promise.finally(a.answer.promise,function(){return a.fadeOut(200)});return g.return(a.answer.promise)})}},{key:"isActive",value:function(){return!!this.world()&&this._isActive}},{key:"build",value:function(){throw Error("Not yet implemented");}},{key:"applyLayout",value:function(){throw Error("Not yet implemented");}},{key:"keybindings",get:function(){return Sb._get(Object.getPrototypeOf(m.prototype),"keybindings",
this).concat([{keys:"Enter",command:"resolve"},{keys:"Escape",command:"reject"},{keys:{mac:"Meta-."},command:"reject"}])}},{key:"commands",get:function(){var a=this;return Sb._get(Object.getPrototypeOf(m.prototype),"commands",this).concat([{name:"resolve",exec:function(g,l){a.resolve(l);return!0}},{name:"reject",exec:function(g,l){a.reject(l);return!0}}])}},{key:"transitionTo",value:function(a,g){g=void 0===g?300:g;var l=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){q=re.morph({fill:l.fill,
borderRadius:l.borderRadius});r=re.morph({fill:null,origin:re.pt(5,5)});a.opacity=0;a.fill=re.Color.transparent;a.openInWorld();l.fill=re.Color.transparent;$world.addMorph(q,l);q.setBounds(l.bounds());r.openInWorld();r.addMorph(a);a.center=r.origin;r.center=q.center=l.center;r.scale=a.width/l.width;q.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return l.animate({scale:l.width/a.width,opacity:0,duration:g}),a.animate({opacity:1,duration:g}),
r.animate({scale:1,duration:g}),v.yield(q.animate({bounds:r.bounds(),duration:g}),2);a.fill=q.fill;$world.addMorph(a);q.remove();l.remove();r.remove();v.jumpToEnd()})});u.jumpToEnd()})}},{key:"addNamed",value:function(a,g){var l=this.getSubmorphNamed(a)||this.addMorph(g.isMorph?g:re.morph(Object.assign({},g,{name:a})));g.label&&(l.label=g.label);g.isMorph&&(l.name=a);return l}}],[{key:"className",get:function(){return"AbstractPrompt"}},{key:"properties",get:function(){return{fill:{defaultValue:re.Color.black.withA(.6)},
extent:{defaultValue:re.pt(300,80)},borderRadius:{defaultValue:5},dropShadow:{initialize:function(){this.dopShadow=!0}},clipMode:{defaultValue:"hidden"},_isActive:{defaultValue:!1},autoRemove:{defaultValue:!0},epiMorph:{defaultValue:!0},answer:{defaultValue:null,derived:!0},label:{derived:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("promptTitle").value},set:function(a){this.getSubmorphNamed("promptTitle").value=a}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:442,end:3898})}(re.Morph);re.AbstractPrompt=GJ;re.AbstractPrompt=GJ;re.AbstractPrompt=GJ;var HJ=sa("aD",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("InformPrompt")&&"function"===typeof e.InformPrompt?e.InformPrompt:e.InformPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(m,b,[{key:"build",value:function(a){var g=this,l=a=void 0===a?{}:a,q=l.label,r=this.addNamed("promptTitle",{type:"text",lineWrapping:l.lineWrapping});l=this.addNamed("ok button",{type:"button",label:"OK",width:100});this.addNamed("button wrapper",{submorphs:[l]});r.textString=q;re.connect(l,"fire",this,"resolve");a.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){if(r.document){var u=g.center;g.width=Math.max(g.width,r.document.width+100);g.align(g.center,u)}g.opacity=
1}))}},{key:"keybindings",get:function(){return Sb._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat([{keys:"Escape",command:"resolve"}])}}],[{key:"className",get:function(){return"InformPrompt"}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/inform"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3907,end:5141})}(re.AbstractPrompt));re.InformPrompt=HJ;re.InformPrompt=HJ;re.InformPrompt=HJ;var IJ=sa("aE",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("ConfirmPrompt")&&"function"===typeof e.ConfirmPrompt?e.ConfirmPrompt:e.ConfirmPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"build",value:function(a){var g=this,l=this.addNamed("promptTitle",{type:"text"});l.value=a.label;a=this.addNamed("ok button",{type:"button",label:this.confirmLabel});var q=this.addNamed("cancel button",{type:"button",label:this.rejectLabel});this.addNamed("button wrapper",{submorphs:[a,q]});re.connect(a,"fire",this,"resolve");re.connect(q,"fire",this,"reject");l.lineWrapping=this.lineWrapping;this.lineWrapping||
(this.opacity=0,this.whenRendered().then(function(){l.lineWrapping=g.lineWrapping;var r=g.center;g.width=Math.max(g.width,l.document.width+100);g.center=r;g.opacity=1}))}},{key:"resolve",value:function(){Sb._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,!0)}},{key:"reject",value:function(){Sb._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,!1)}}],[{key:"className",get:function(){return"ConfirmPrompt"}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},
confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/confirm"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5188,end:6560})}(re.AbstractPrompt));re.ConfirmPrompt=IJ;re.ConfirmPrompt=
IJ;re.ConfirmPrompt=IJ;var JJ=sa("aF",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("MultipleChoicePrompt")&&"function"===typeof e.MultipleChoicePrompt?e.MultipleChoicePrompt:e.MultipleChoicePrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"resolve",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,a||
this.getSubmorphNamed("choices").value)}},{key:"build",value:function(a){var g=a=void 0===a?{choices:["No choice"]}:a;a=g.label;g=g.choices;var l=this.addNamed("ok button",{type:"button"}),q=this.addNamed("cancel button",{type:"button"});a&&(this.addNamed("promptTitle",{type:"text"}).value=a);this.addNamed("choices",{name:"choices",type:re.RadioButtonGroup,choices:g});this.addNamed("button wrapper",{submorphs:[l,q]});l&&re.connect(l,"fire",this,"resolve");q&&re.connect(q,"fire",this,"reject")}},{key:"onKeyDown",
value:function(a){if(/^[0-9]$/.test(a.keyCombo)){var g=this.getSubmorphNamed("button "+(Number(a.keyCombo)-1));if(g)return g.trigger(),a.stop()}return Sb._get(Object.getPrototypeOf(m.prototype),"onKeyDown",this).call(this,a)}}],[{key:"className",get:function(){return"MultipleChoicePrompt"}},{key:"properties",get:function(){return{title:{derived:!0,after:["submorphs"],set:function(a){this.getSubmorphNamed("title").value=a}},choices:{after:["submorphs"],derived:!0,set:function(a){var g;if(g=this.getSubmorphNamed("choices"))g.choices=
a}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/multiple choice"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:6649,end:8777})}(re.AbstractPrompt));re.MultipleChoicePrompt=JJ;re.MultipleChoicePrompt=JJ;re.MultipleChoicePrompt=JJ;var KJ=
sa("aG",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("TextPrompt")&&"function"===typeof e.TextPrompt?e.TextPrompt:e.TextPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"maxWidth",get:function(){return this.env.world.visibleBounds().width-20}},{key:"build",value:function(a){var g=this,l=a.label,q=a.input,r=a.historyId;a=a.useLastInput;
var u=this.addNamed("promptTitle",{type:"text"});u.value=l;l=this.addNamed("input",re.Text.makeInputLine({historyId:r,highlightWhenFocused:!1}));l.viewState.fastScroll=!1;l.textString=q||"";r&&a&&(q=re.arr.last(l.inputHistory.items))&&(l.textString=q);this.width=Math.max(this.width,u.textBounds().width+50);q=this.addNamed("ok button",{type:"button",label:"OK"});r=this.addNamed("cancel button",{type:"button",label:"CANCEL"});this.addNamed("button wrapper",{submorphs:[q,r]});re.connect(q,"fire",this,
"resolve");re.connect(r,"fire",this,"reject");u.lineWrapping=this.lineWrapping;this.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){var v=g.center;g.width=Math.max(350,u.document.width+100);g.opacity=1;g.center=v}));l.gotoDocumentEnd();l.scrollCursorIntoView()}},{key:"resolve",value:function(){Sb._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,this.getSubmorphNamed("input").acceptInput())}},{key:"initLayout",value:function(){var a=this;if(!this.layout){var g=this.getSubmorphNamed("promptTitle"),
l=this.getSubmorphNamed("input");g.fit();this.whenRendered().then(function(){var q=Math.max(l.textBounds().width,g.textBounds().width)+20;a.width=Math.min(a.maxWidth,q);a.opacity=1});this.layout=new re.GridLayout({columns:[0,{paddingLeft:5},1,{paddingLeft:5,paddingRight:2.5,fixed:100},2,{paddingRight:5,paddingLeft:2.5,fixed:100},3,{paddingRight:5}],rows:[0,{fixed:g.textBounds().height+5,paddingBottom:5},1,{fixed:l.height},2,{fixed:35,paddingTop:5,paddingBottom:5}],grid:[["promptTitle","promptTitle",
"promptTitle","promptTitle"],["input","input","input","input"],[null,"ok button","cancel button",null]]})}}},{key:"focus",value:function(){this.getSubmorphNamed("input").focus()}}],[{key:"className",get:function(){return"TextPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?a.yield($world.prompt("enter",{input:"a little longer text"}),2):a.yield($world.prompt("enter\nsomething",{input:"???"}),0)})}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},
master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/text"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8786,end:11839})}(re.AbstractPrompt));re.TextPrompt=KJ;re.TextPrompt=KJ;re.TextPrompt=KJ;var LJ=sa("aH",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),
m=e.hasOwnProperty("EditPrompt")&&"function"===typeof e.EditPrompt?e.EditPrompt:e.EditPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"maxWidth",get:function(){return this.env.world.visibleBounds().width-20}},{key:"build",value:function(a){var g=a.input,l=a.mode,q=a.textStyle,r=a.evalEnvironment;this.addNamed("promptTitle",{type:"text",textString:a.label});q||(q={});l&&!q.fontFamily&&(q.fontFamily=
"Monaco, monospace");var u=this.addNamed("editor",{type:"text"});u.textString=g||"";Object.assign(u,q);u.changeEditorMode(l).then(function(){r&&u.editorPlugin&&Object.assign(u.editorPlugin.evalEnvironment,r)});a=u.textBounds().width+50;a>this.width-25&&(this.width=Math.min(this.maxWidth,a+125));a=this.addNamed("ok button",{type:"button"});g=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",{submorphs:[a,g]});re.connect(a,"fire",this,"resolve");re.connect(g,"fire",this,
"reject");u.gotoDocumentEnd();u.scrollCursorIntoView()}},{key:"resolve",value:function(a){var g=this.getSubmorphNamed("editor").textString.trim();if(this.historyId){a=re.InputLine.getHistory(this.historyId);a.items=a.items.filter(function(l){return l!==g});for(a.items.push(g);a.items.length>a.items.max;)a.items.shift();a.index=a.items.length;re.InputLine.setHistory(this.historyId,a)}return Sb._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,g)}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-Enter|Meta-S",
win:"Ctrl-Enter|Ctrl-S"},command:"resolve"},{keys:"Escape",command:"reject"},{keys:"Alt-P|Alt-Up",command:"history back"},{keys:"Alt-N|Alt-Down",command:"history forward"},{keys:"Alt-H",command:"browse history"}]}},{key:"commands",get:function(){var a=this;return Sb._get(Object.getPrototypeOf(m.prototype),"commands",this).concat([{name:"history back",exec:function(g,l){if(a.historyId){g=re.InputLine.getHistory(a.historyId);l=g.items;var q=g.index;g.index=--q;0>q&&(g.index=q=l.length-1);a.get("editor").undoManager.group();
a.get("editor").textString=l[q];a.get("editor").undoManager.group()}return!0}},{name:"browse history",exec:function(g,l){var q,r,u,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress){if(!a.historyId)return A.jumpTo(2);q=re.InputLine.getHistory(a.historyId);return A.yield(a.world().editListPrompt("input history "+a.historyId,q.items,{requester:a}),3)}2!=A.nextAddress&&(r=A.yieldResult,u=r.status,v=r.list,y=$jscomp.makeIterator(r.selections),z=y.next().value,"canceled"!==
u&&(q.items=v,re.InputLine.setHistory(a.historyId,q),z&&(q.index=q.items.indexOf(z),a.get("editor").textString=z)));return A.return(!0)})}},{name:"history forward",exec:function(g,l){if(a.historyId){g=re.InputLine.getHistory(a.historyId);l=g.items;var q=g.index;g.index=++q;q>=l.length&&(g.index=q=0);a.get("editor").undoManager.group();a.get("editor").textString=l[q];a.get("editor").undoManager.group()}return!0}}])}},{key:"focus",value:function(){this.getSubmorphNamed("editor").focus()}}],[{key:"className",
get:function(){return"EditPrompt"}},{key:"example",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield($world.editPrompt("enter",{input:"$world.show()",mode:"js",evalEnvironment:{context:23}}),2);a.editorPlugin.evalEnvironment;g.jumpToEnd()})}},{key:"properties",get:function(){return{extent:{defaultValue:re.pt(500,300)},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/edit"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:11848,end:16304})}(re.AbstractPrompt));re.EditPrompt=LJ;re.EditPrompt=LJ;re.EditPrompt=LJ;var MJ=sa("aI",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("PasswordPrompt")&&"function"===typeof e.PasswordPrompt?e.PasswordPrompt:e.PasswordPrompt=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"build",value:function(a){var g=a.placeholder;this.addNamed("promptTitle",{type:"text",value:a.label,fixedHeight:!0});this.addNamed("input",{type:re.PasswordInputLine,name:"input",placeholder:g||""});a=this.addNamed("ok button",{type:"button",label:"OK"});g=this.addNamed("cancel button",{type:"button",label:"CANCEL"});re.connect(a,"fire",this,"resolve");
re.connect(g,"fire",this,"reject");this.addNamed("button wrapper",{submorphs:[a,g]})}},{key:"resolve",value:function(){Sb._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,this.get("input").acceptInput())}},{key:"focus",value:function(){var a=this.get("input");a.whenRendered().then(function(){return a.focus()})}}],[{key:"className",get:function(){return"PasswordPrompt"}},{key:"properties",get:function(){return{maxWidth:{readOnly:!0,get:function(){return 800}},master:{initialize:function(){this.master=
{auto:"styleguide://SystemPrompts/prompts/password"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:16313,end:17551})}(re.AbstractPrompt));re.PasswordPrompt=MJ;re.PasswordPrompt=MJ;re.PasswordPrompt=MJ;var NJ=sa("aJ",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),
m=e.hasOwnProperty("ListPrompt")&&"function"===typeof e.ListPrompt?e.ListPrompt:e.ListPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"onChange",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a);"extent"==a.prop&&this.layout&&!this.layout.active&&(a=a.value.subPt(a.prevValue),this.getSubmorphNamed("prompt list").height+=a.y)}},{key:"getMaster",value:function(){return this.filterable?
"styleguide://SystemPrompts/prompts/list":"styleguide://SystemPrompts/prompts/edit list"}},{key:"reset",value:function(){this.items=[]}},{key:"build",value:function(a){var g=a.label,l=a.filterable,q=a.multiSelect,r=a.historyId,u=a.useLastInput,v=a.fuzzy,y=a.filterFunction,z=a.sortFunction,A=a.actions,B=a.selectedAction,G=a.items,E=a.onSelection;this.extent=a.extent||re.pt(500,400);this.addNamed("promptTitle",{type:"text"}).textString=g;var K=this.addNamed("prompt list",{type:l?re.FilterableList:re.List,
multiSelect:q,historyId:r,useLastInput:u});l?this.get("list").master=!1:this.get("prompt list").master=!1;K.items=G;l&&v&&(K.fuzzy=v);l&&"function"===typeof y&&(K.filterFunction=y);l&&"function"===typeof z&&(K.sortFunction=z);E&&"function"===typeof E&&(this.onSelection=E);l&&A&&(K.actions=A);l&&B&&(K.selectedAction=B);a=this.addNamed("ok button",{type:"button"});g=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",{submorphs:[a,g]});re.connect(a,"fire",this,"resolve");re.connect(g,
"fire",this,"reject");l&&(re.connect(K,"accepted",this,"resolve"),re.connect(K,"canceled",this,"reject"),K.whenRendered().then(function(){return K.relayout()}))}},{key:"resolve",value:function(a){var g=this.getSubmorphNamed("prompt list");a=a||g instanceof re.FilterableList?g.acceptInput():{selected:g.selections,status:"accepted",actions:"default"};return this.answer.resolve(a)}},{key:"reject",value:function(){return this.answer.resolve({prompt:this,selected:[],filtered:[],status:"canceled"})}},{key:"focus",
value:function(){this.getSubmorphNamed("prompt list").focus()}}],[{key:"className",get:function(){return"ListPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.yield($world.listPrompt("hello",[1,2,3,4],{multiSelect:!0}),0)})}},{key:"properties",get:function(){return{items:{derived:!0,after:["submorphs"],set:function(a){0<this.submorphs.length&&(this.getSubmorphNamed("prompt list").items=a||[])}},filterable:{},master:{after:["filterable"],
initialize:function(){this.master={auto:this.getMaster()}}},preselect:{derived:!0,after:["items"],set:function(a){var g=this.getSubmorphNamed("prompt list");g&&(g.selectedIndex=a,g.scrollSelectionIntoView)}},onSelection:{derived:!0,after:["preselect","submorphs"],set:function(a){var g=this,l=this.getSubmorphNamed("prompt list");l&&re.connect(l,"selection",function(q){return a(q,g)})}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:17649,end:21747})}(re.AbstractPrompt));re.ListPrompt=NJ;re.ListPrompt=NJ;re.ListPrompt=NJ;var OJ=sa("aK",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("EditListPrompt")&&"function"===typeof e.EditListPrompt?e.EditListPrompt:e.EditListPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"build",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"build",this).call(this,a);this.getSubmorphNamed("prompt list").items=a.items;a=this.addNamed("add item button",{type:"button",label:re.Icon.makeLabel("plus")});var g=this.addNamed("remove item button",{type:"button",label:re.Icon.makeLabel("minus")});this.getSubmorphNamed("button wrapper").addMorph(a);this.getSubmorphNamed("button wrapper").addMorph(g);
re.connect(a,"fire",this,"addItemToList");re.connect(g,"fire",this,"removeSelectedItemsFromList")}},{key:"removeSelectedItemsFromList",value:function(){var a=this,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){g=a.get("prompt list");l=1!=g.selectedItems.length?-1:0===g.selectedIndex?0:g.selectedIndex-1;g.items=re.arr.withoutAll(g.items,g.selectedItems);0>l?g.selection=null:g.selectedIndex=l;g.focus();q.jumpToEnd()})}},{key:"addItemToList",value:function(){var a=this,g,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==
u.nextAddress)return g=a.get("prompt list"),l=g.selection?g.items[g.selectedIndex].string:"",u.yield(a.world().prompt("Input to add to the list",{historyId:a.historyId||"EditListPrompt-input-history",input:l}),2);q=u.yieldResult;if(!q)return u.return();g=a.get("list");r=g.selection?g.selectedIndex+1:g.items.length;g.addItemAt(q,r);g.focus();g.selectedIndex=r;u.jumpToEnd()})}},{key:"keybindings",get:function(){return Sb._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Enter",
win:"Ctrl-Enter"},command:"resolve"},{keys:"Ctrl-G",command:"deselect"},{keys:"Shift-=|+",command:"add item to list"},{keys:"Delete|-|Backspace",command:"remove item from list"}])}},{key:"commands",get:function(){var a=this;return Sb._get(Object.getPrototypeOf(m.prototype),"commands",this).concat([{name:"deselect",exec:function(){a.get("list").selection=null;return!0}},{name:"add item to list",exec:function(){a.addItemToList();return!0}},{name:"remove item from list",exec:function(){a.removeSelectedItemsFromList();
return!0}}])}},{key:"resolve",value:function(){var a=this.get("prompt list");return this.answer.resolve({list:a.values,selections:a.selections})}},{key:"reject",value:function(){return this.answer.resolve({list:[],selections:[],status:"canceled"})}}],[{key:"className",get:function(){return"EditListPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.yield($world.editListPrompt("hello",[1,2,3,4],{multiSelect:!0}),0)})}},{key:"properties",
get:function(){return{master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/edit list"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:21756,end:24611})}(re.ListPrompt));re.EditListPrompt=OJ;re.EditListPrompt=OJ;re.EditListPrompt=OJ;var wQ=Object.freeze({__proto__:null,
AbstractPrompt:GJ,InformPrompt:HJ,ConfirmPrompt:IJ,MultipleChoicePrompt:JJ,TextPrompt:KJ,EditPrompt:LJ,PasswordPrompt:MJ,ListPrompt:NJ,EditListPrompt:OJ}),ld=lively.FreezerRuntime.recorderFor("lively.components/widgets.js");ld.obj=Pf;ld.PropertyPath=nh;ld.string=vh;ld.num=Bk;ld.arr=vf;ld.properties=$m;ld.pt=oh;ld.Color=Wf;ld.Rectangle=ee;ld.rect=Ii;ld.signal=tl;ld.connect=fk;ld.disconnect=Jm;ld.Morph=nk;ld.ShadowObject=bq;ld.morph=wa;ld.Text=rr;ld.GridLayout=Ew;ld.HorizontalLayout=bt;ld.Path=Gy;ld.Ellipse=
Ey;ld.Label=sr;ld.Tooltip=Hy;ld.Icon=sn;ld.kld=Eb;var $4=ld.kld;ld.Shapes=$4.Shapes;ld.Intersection=$4.Intersection;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("LeashEndpoint")&&"function"===typeof e.LeashEndpoint?e.LeashEndpoint:e.LeashEndpoint=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"dragTriggerDistance",get:function(){return this.connectedMorph?
20:0}},{key:"onDragStart",value:function(a){var g=a.state;a.state.dragDelta=g.lastDragPosition.subPt(g.clickedOnPosition);a.state.endpoint=this;this.leash.onEndpointDrag(a)}},{key:"canConnectTo",value:function(a){return!a.isWorld&&!a.isHaloItem&&this.leash.canConnectTo(a)&&!a.isHighlighter&&!a.ownerChain().some(function(g){return g.isHaloItem})}},{key:"onDrag",value:function(a){var g=this;if(this.connectedMorph)this.clearConnection();else{var l=a.hand.findDropTarget(a.hand.globalPosition,[this.leash,
this.leash.endPoint,this.leash.startPoint],function(q){return g.canConnectTo(q)});this.possibleTarget!=l&&this.highlighter&&this.highlighter.deactivate();if(this.possibleTarget=l)this.closestSide=this.possibleTarget.globalBounds().partNameNearest(ld.obj.keys(ld.Leash.connectionPoints),this.globalPosition),this.highlighter=$world.highlightMorph($world,this.possibleTarget,!1,[this.closestSide]),this.highlighter.show(),"MorphContainer"==this.possibleTarget.constructor.className&&(this.highlighter.get("name tag").value=
this.possibleTarget.target.name)}a.state.endpoint=this;this.leash.onEndpointDrag(a)}},{key:"onDragEnd",value:function(){$world.removeHighlighters();this.possibleTarget&&this.closestSide&&this.attachTo(this.possibleTarget,this.closestSide)}},{key:"getConnectionPoint",value:function(){var a=this.connectedMorph,g=a.isPath,l=a.isPolygon,q=a.vertices,r=a.origin;a=this.connectedMorph.globalBounds();if((g||l)&&"center"!=this.attachedSide){g=q.map(function(v){return ld.pt(v.x,v.y).addPt(r)});l=ld.Rectangle.unionPts(g);
var u=l[this.attachedSide]();l=l.center().addPt(l.center().subPt(u));l=ld.Shapes.line(u.x,u.y,l.x,l.y);g=ld.Shapes.polyline(ld.arr.flatten(g.map(function(v){return[v.x,v.y]})));g=ld.arr.min(ld.Intersection.intersect(g,l).points,function(v){return ld.pt(v.x,v.y).dist(u)});return ld.pt(g.x,g.y).addPt(a.topLeft())}return a[this.attachedSide]()}},{key:"update",value:function(a){a&&!["position","extent","rotation","scale"].includes(a.prop)&&a.target!=this.connectedMorph||!this.connectedMorph||(a=this.getConnectionPoint(),
a=this.leash.localize(a),this.hasFixedPosition&&(a=a.subPt($world.scroll)),this.vertex.position=a,this.relayout())}},{key:"clearConnection",value:function(){this.connectedMorph&&(ld.disconnect(this.connectedMorph,"onChange",this,"update"),this.connectedMorph=null)}},{key:"relayout",value:function(a){var g=this.vertex.position,l=g.x;g=g.y;var q=this.leash.borderWidth;a&&a.meta&&a.meta.animation?this.animate({center:ld.pt(l+q,g+q),duration:a.duration}):this.center=ld.pt(l+q,g+q)}},{key:"attachTo",value:function(a,
g){this.clearConnection();this.leash.openInWorld(this.leash.position);this.connectedMorph=a;this.attachedSide=g;this.vertex.controlPoints=this.leash.controlPointsFor(g,this);this.update();ld.connect(this.connectedMorph,"onChange",this,"update")}}],[{key:"className",get:function(){return"LeashEndpoint"}},{key:"properties",get:function(){return{index:{},leash:{},nativeCursor:{defaultValue:"-webkit-grab"},attachedSide:{},connectedMorph:{},draggable:{defaultValue:!0},vertex:{after:["leash"],get:function(){return this.leash.vertices[this.index]},
set:function(a){this.leash.vertices[this.index]=a;this.leash.vertices=this.leash.vertices}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:444,end:4584})})(ld.Ellipse);var PJ=sa("bQ",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("Leash")&&
"function"===typeof e.Leash?e.Leash:e.Leash=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"onMouseDown",value:function(a){this.updateEndpointStyles()}},{key:"updateEndpointStyles",value:function(){Object.assign(this.startPoint,this.getEndpointStyle(0));Object.assign(this.endPoint,this.getEndpointStyle(1));this.relayout()}},{key:"remove",value:function(){Sb._get(Object.getPrototypeOf(m.prototype),
"remove",this).call(this);this.startPoint.clearConnection();this.endPoint.clearConnection()}},{key:"onEndpointDrag",value:function(a){a.state.endpoint.vertex.position=a.state.endpoint.vertex.position.addPt(a.state.dragDelta);this.relayout()}},{key:"getEndpointStyle",value:function(a){return Object.assign({},this.endpointStyle,{},0==a?this.endpointStyle.start:this.endpointStyle.end)}},{key:"endpoint",value:function(a){var g=this.vertices[a];return new ld.LeashEndpoint({index:a,leash:this,position:ld.pt(g.x,
g.y)})}},{key:"controlPointsFor",value:function(a,g){a=ld.Leash.connectionPoints[a];a=g==this.startPoint?a.negated():a;return{previous:a.scaleBy(100),next:a.negated().scaleBy(100)}}},{key:"relayout",value:function(a){if(!a||["vertices","position"].includes(a.prop))this.startPoint.relayout(a),this.endPoint.relayout(a)}}],[{key:"className",get:function(){return"Leash"}},{key:"connectionPoints",get:function(){return{topCenter:ld.pt(0,-1),topLeft:ld.pt(-1,-1),rightCenter:ld.pt(1,0),bottomRight:ld.pt(1,
1),bottomCenter:ld.pt(0,1),bottomLeft:ld.pt(-1,1),leftCenter:ld.pt(-1,0),topRight:ld.pt(1,-1),center:ld.pt(0,0)}}},{key:"properties",get:function(){return{start:{defaultValue:ld.pt(0,0)},end:{defaultValue:ld.pt(0,0)},canConnectTo:{defaultValue:function(a){return!0}},reactsToPointer:{defaultValue:!1},acceptsDroppedMorphs:{defaultValue:!1},direction:{type:"Enum",values:["unidirectional","outward","inward"],defaultValue:"unidirectional"},endpointStyle:{isStyleProp:!0,defaultValue:{fill:ld.Color.black,
origin:ld.pt(3.5,3.5),extent:ld.pt(10,10),nativeCursor:"-webkit-grab"}},borderWidth:{defaultValue:2},borderColor:{defaultValue:ld.Color.black},fill:{defaultValue:ld.Color.transparent},vertices:{after:["start","end","borderWidth"],initialize:function(){this.vertices=[this.start,this.end]}},submorphs:{initialize:function(){this.submorphs=[this.startPoint=this.endpoint(0),this.endPoint=this.endpoint(1)];ld.connect(this,"onChange",this,"relayout");this.updateEndpointStyles()}}}}}],e,{pathInPackage:function(){return"widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:4593,end:7383})}(ld.Path));ld.Leash=PJ;ld.Leash=PJ;ld.Leash=PJ;var QJ=sa("bc",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("Slider")&&"function"===typeof e.Slider?e.Slider:e.Slider=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"normalize",value:function(a){return Math.abs(a/(this.max-this.min))}},{key:"update",value:function(a){a=void 0===a?this.value:a;a=(this.width-15)*this.normalize(a);this.getSubmorphNamed("slideHandle").center=ld.pt(a+7.5,10)}},{key:"onSlide",value:function(a,g){a=ld.num.roundTo(this.value+g.x/this.width,.01);this.value=a=Math.max(this.min,Math.min(this.max,a));this.update(a)}}],[{key:"className",get:function(){return"Slider"}},
{key:"properties",get:function(){return{value:{},min:{},max:{},height:{defaultValue:20},fill:{defaultValue:ld.Color.transparent},draggable:{defaultValue:!1},submorphs:{after:["value","max","min"],initialize:function(){var a=new ld.SliderHandle({slider:this,name:"slideHandle"});this.submorphs=[new ld.Path({borderColor:ld.Color.gray.darker(),borderWidth:2,vertices:[ld.pt(0,0),ld.pt(this.width,0)],position:ld.pt(0,this.height/2)}),a];ld.connect(this,"extent",this,"update");this.update()}}}}}],e,{pathInPackage:function(){return"widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:7392,end:8677})}(ld.Morph));ld.Slider=QJ;ld.Slider=QJ;ld.Slider=QJ;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("SliderHandle")&&"function"===typeof e.SliderHandle?e.SliderHandle:e.SliderHandle=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"onDragStart",value:function(a){this.valueView=(new ld.Tooltip({description:""})).openInWorld(a.hand.position.addXY(10,10))}},{key:"onDrag",value:function(a){this.slider.onSlide(this,a.state.dragDelta);this.valueView.description=this.slider.value;this.valueView.position=a.hand.position.addXY(10,10)}},{key:"onDragEnd",value:function(a){this.valueView.remove()}}],[{key:"className",get:function(){return"SliderHandle"}},
{key:"properties",get:function(){return{slider:{},fill:{defaultValue:ld.Color.gray},borderColor:{defaultValue:ld.Color.gray.darker()},borderWidth:{defaultValue:1},dropShadow:{defaultValue:new ld.ShadowObject({blur:5})},extent:{defaultValue:ld.pt(15,15)},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8679,end:9535})})(ld.Ellipse);var RJ=sa("a_",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("ValueScrubber")&&"function"===typeof e.ValueScrubber?e.ValueScrubber:e.ValueScrubber=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"relayout",value:function(){this.scaleToBounds&&
(this.scale=Math.min(1,this.width/(this.textBounds().width+0)))}},{key:"onKeyDown",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onKeyDown",this).call(this,a);if("Enter"==a.keyCombo){var g=$jscomp.makeIterator(this.textString.replace("\n","").split(" ")),l=g.next().value;g.next();"string"==typeof l&&(this.value=parseFloat(l),ld.signal(this,"scrub",this.scrubbedValue));a.stop()}}},{key:"onDragStart",value:function(a){this.execCommand("toggle active mark");this.initPos=a.position;this.factorLabel=
(new ld.Tooltip({description:"1x"})).openInWorld(a.hand.position.addXY(10,10))}},{key:"getScaleAndOffset",value:function(a){var g=a.position.subPt(this.initPos);a=g.x;g=ld.num.roundTo(Math.exp(-g.y/$world.height*4),.01)*this.baseFactor;return{offset:a,scale:g}}},{key:"onDrag",value:function(a){var g=this.getScaleAndOffset(a),l=g.scale;g=this.getCurrentValue(g.offset,l);ld.signal(this,"scrub",g);g=this.floatingPoint?g.toFixed(3):ld.obj.safeToString(g);this.unit&&(g+=" "+this.unit);this.replace(this.documentRange,
g,!1,this.scaleToBounds,!1,!1);this.factorLabel.description=l.toFixed(3)+"x";this.factorLabel.position=a.hand.position.addXY(10,10);this.relayout()}},{key:"getCurrentValue",value:function(a,g){return Math.max(this.min,Math.min(this.max,this.scrubbedValue+(this.floatingPoint?a*g:Math.round(a*g))))}},{key:"onDragEnd",value:function(a){a=this.getScaleAndOffset(a);this.value=this.getCurrentValue(a.offset,a.scale);this.factorLabel.softRemove()}},{key:"value",set:function(a){this.scrubbedValue=a=Math.max(this.min,
Math.min(this.max,a));a=this.floatingPoint?a.toFixed(3):ld.obj.safeToString(a);a=this.unit?a+(" "+this.unit):a+"";this.replace(this.documentRange,a,!1,!0);this.relayout()}}],[{key:"className",get:function(){return"ValueScrubber"}},{key:"properties",get:function(){return{scaleToBounds:{defaultValue:!1,set:function(a){this.fixedWidth=!0;this.setProperty("scaleToBounds",a)}},value:{defaultValue:0},fill:{defaultValue:ld.Color.transparent},draggable:{defaultValue:!0},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},
baseFactor:{defaultValue:1},floatingPoint:{defaultValue:!1}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:9544,end:12254})}(ld.Text));ld.ValueScrubber=RJ;ld.ValueScrubber=RJ;ld.ValueScrubber=RJ;var sE=sa("bg",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),
m=e.hasOwnProperty("CheckBox")&&"function"===typeof e.CheckBox?e.CheckBox:e.CheckBox=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"trigger",value:function(){try{this.checked=!this.checked,ld.signal(this,"toggle",this.checked)}catch(g){var a=this.world();a?a.logError(g):console.error(g)}}},{key:"onMouseDown",value:function(a){this.active&&this.trigger()}},{key:"render",value:function(a){return a.renderCheckBox(this)}}],
[{key:"className",get:function(){return"CheckBox"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},extent:{defaultValue:ld.pt(15,15)},borderWidth:{defaultValue:0},active:{defaultValue:!0},checked:{defaultValue:!1},fill:{defaultValue:ld.Color.transparent},nativeCursor:{defaultValue:"pointer"}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:12263,end:12989})}(ld.Morph));ld.CheckBox=sE;ld.CheckBox=sE;ld.CheckBox=sE;var SJ=sa("a$",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("LabeledCheckBox")&&"function"===typeof e.LabeledCheckBox?e.LabeledCheckBox:e.LabeledCheckBox=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,
b,[{key:"disable",value:function(){this.active=!1;this.labelMorph.opacity=.5}},{key:"enable",value:function(){this.active=!0;this.labelMorph.opacity=1}},{key:"trigger",value:function(){this.checkboxMorph.trigger()}},{key:"onMouseDown",value:function(a){this.active&&this.trigger();a.stop()}}],[{key:"className",get:function(){return"LabeledCheckBox"}},{key:"example",value:function(){(new ld.LabeledCheckBox({label:"foo"})).openInWorld()}},{key:"properties",get:function(){return{name:{defaultValue:"LabeledCheckBox"},
alignCheckBox:{defaultValue:"left",type:"Enum",values:["left","right"],set:function(a){this.layout=new ld.HorizontalLayout({direction:"left"==a?"leftToRight":"rightToLeft"});this.setProperty("alignCheckBox",a)}},layout:{initialize:function(){this.layout=new ld.HorizontalLayout({direction:"left"==this.alignCheckBox?"leftToRight":"rightToLeft"})}},label:{defaultValue:"label",after:["submorphs"],derived:!0,get:function(){return this.labelMorph.value},set:function(a){this.labelMorph.value=a}},checked:{after:["submorphs"],
derived:!0,get:function(){return this.checkboxMorph.checked},set:function(a){this.checkboxMorph.checked=a;ld.signal(this,"checked",a)}},active:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.active},set:function(a){this.checkboxMorph.active=a}},labelMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("label")}},checkboxMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("checkbox")}},submorphs:{initialize:function(){this.submorphs=
[new ld.CheckBox({name:"checkbox"}),new ld.Label({nativeCursor:"pointer",name:"label",padding:ld.Rectangle.inset(5,3)})];ld.connect(this,"alignCheckBox",this,"extent");ld.connect(this.checkboxMorph,"checked",this,"checked")}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:12998,
end:15531})}(ld.Morph));ld.LabeledCheckBox=SJ;ld.LabeledCheckBox=SJ;ld.LabeledCheckBox=SJ;var TJ=sa("bb",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("ModeSelector")&&"function"===typeof e.ModeSelector?e.ModeSelector:e.ModeSelector=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"createLabels",value:function(a,g,l){var q=this;l=void 0===l?{}:
l;return ld.arr.zip(a,g).map(function(r){r=$jscomp.makeIterator(r);var u=r.next().value,v=r.next().value;r=l[u];r=ld.morph(Object.assign({name:u+"Label",master:{auto:"styleguide://SystemWidgets/mode label"},type:"label",value:u},r&&{tooltip:r}));ld.connect(r,"onMouseDown",q,"update",{updater:function(y){y(u,v)},varMapping:{name:u,value:v}});return r})}},{key:"relayout",value:function(a){a=void 0===a?!0:a;var g=this,l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return g.layout.forceLayout(),
l=g.get("typeMarker"),q=g.currentLabel.bounds(),a?r.yield(l.animate({bounds:q,duration:200}),3):(l.setBounds(q),r.jumpTo(2));r.jumpToEnd()})}},{key:"animateFontColor",value:function(a,g,l){var q=a.fontColor;a.animate({customTween:function(r){return a.fontColor=q.interpolate(r,g)},duration:l})}},{key:"update",value:function(a,g,l){l=void 0===l?!1:l;var q=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){r=q.get(a+"Label");if(r==q.currentLabel)return u.return();q.getSubmorphsByStyleClassName("Label").forEach(function(v){v!=
r&&q.animateFontColor(v,q.fontColor,200)});q.currentLabel=r;!l&&ld.signal(q,a,g);!l&&ld.signal(q,"switchLabel",g);q.relayout(!l);return u.yield(q.animateFontColor(r,q.selectionFontColor,200),0)})}}],[{key:"className",get:function(){return"ModeSelector"}},{key:"example",value:function(){(new ld.ModeSelector({items:{foo:{},trottel:{},babbel:{}}})).openInWorld()}},{key:"properties",get:function(){return{items:{derived:!0,set:function(a){ld.obj.isArray(a)?this.keys=this.values=a:(this.keys=ld.obj.keys(a),
this.values=ld.obj.values(a))}},height:{defaultValue:30},init:{},keys:{before:["layout"]},values:{before:["layout"]},tooltips:{},fontColor:{defaultValue:ld.Color.black},selectionFontColor:{defaultValue:ld.Color.white},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/mode selector"}}},layout:{after:["items","keys","values"],initialize:function(){this.keys&&(this.layout=new ld.GridLayout({rows:[0,{paddingBottom:10}],columns:[0,{fixed:5},this.keys.length+2,{fixed:5}],grid:[[null].concat($jscomp.arrayFromIterable(ld.arr.interpose(this.keys.map(function(a){return a+
"Label"}),null)),[null])],autoAssign:!1,fitToCell:!1}))}},submorphs:{after:["items","keys","values","fontColor"],initialize:function(){this.keys&&(this.submorphs=[{name:"typeMarker",isLayoutable:!1}].concat($jscomp.arrayFromIterable(this.createLabels(this.keys,this.values,this.tooltips))),ld.connect(this,"extent",this,"relayout"),this.update(this.init?this.init:this.keys[0],this.values[this.keys.includes(this.init)?this.keys.indexOf(this.init):0],!0))}}}}}],e,{pathInPackage:function(){return"widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:15540,end:19173})}(ld.Morph));ld.ModeSelector=TJ;ld.ModeSelector=TJ;ld.ModeSelector=TJ;var UJ=sa("b0",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("DropDownSelector")&&"function"===typeof e.DropDownSelector?e.DropDownSelector:
e.DropDownSelector=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"build",value:function(){this.dropDownLabel=ld.Icon.makeLabel("chevron-circle-down",{opacity:0,name:"dropDownIcon"});this.submorphs=[{type:"label",name:"currentValue"},this.dropDownLabel]}},{key:"getMenuEntries",value:function(){var a=this,g=this.getNameFor(this.selectedValue);return[].concat($jscomp.arrayFromIterable(void 0!=this.selectedValue?
[{command:g,target:this}]:[]),$jscomp.arrayFromIterable(ld.arr.compact(this.commands.map(function(l){return l.name!=g&&{command:l.name,target:a}}))))}},{key:"commands",get:function(){var a=this;return ld.obj.isArray(this.values)?this.values.map(function(g){return{name:String(g),exec:function(){ld.signal(a,"update",g);a.selectedValue=g}}}):ld.properties.forEachOwn(this.values,function(g,l){return{name:g,exec:function(){ld.signal(a,"update",l);a.selectedValue=l}}})}},{key:"getNameFor",value:function(a){return this.getCurrentValue?
this.getCurrentValue():ld.obj.isArray(this.values)?ld.obj.safeToString(a):ld.obj.safeToString(ld.properties.nameFor(this.values,a))}},{key:"relayout",value:function(){var a=this.getNameFor(this.selectedValue),g=this.get("currentValue");"undefined"==a?(g.value="Not set",g.fontColor=ld.Color.gray):(g.value=a,g.fontColor=ld.Color.black)}},{key:"onHoverIn",value:function(){this.dropDownLabel.animate({opacity:1,duration:300})}},{key:"onHoverOut",value:function(){this.dropDownLabel.animate({opacity:0,duration:200})}},
{key:"onMouseDown",value:function(a){this.menu=this.world().openWorldMenu(a,this.getMenuEntries());this.menu.hasFixedPosition=!0;this.menu.topLeft=this.globalPosition}}],[{key:"className",get:function(){return"DropDownSelector"}},{key:"properties",get:function(){return{values:{defaultValue:[]},getCurrentValue:{defaultValue:void 0},selectedValue:{after:["submorphs","values","getCurrentValue"],set:function(a){this.setProperty("selectedValue",a);this.relayout()}},fontColor:{isStyleProp:!0,defaultValue:ld.Color.black},
fontSize:{isStyleProp:!0,defaultValue:12},fontFamily:{isStyleProp:!0,defaultValue:"Sans-Serif"},border:{defaultValue:{radius:3,color:ld.Color.gray.darker(),style:"solid"}},padding:{defaultValue:1},isSelected:{defaultValue:"false",set:function(a){this.setProperty("isSelected",a);this.fontColor=a?ld.Color.white:ld.Color.black}},layout:{initialize:function(){this.layout=new ld.HorizontalLayout({spacing:this.padding})}},submorphs:{initialize:function(){this.build()}}}}}],e,{pathInPackage:function(){return"widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:19182,end:22419})}(ld.Morph));ld.DropDownSelector=UJ;ld.DropDownSelector=UJ;ld.DropDownSelector=UJ;var VJ=sa("bf",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("SearchField")&&"function"===typeof e.SearchField?e.SearchField:e.SearchField=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"parseInput",value:function(){var a=Array.from(this.textString).reduce(function(l,q){if("\\"===q&&!l.escaped)return l.escaped=!0,l;" "!==q||l.escaped?(l.spaceSeen=!1,l.current+=q):(!l.spaceSeen&&l.current&&(l.tokens.push(l.current),l.current=""),l.spaceSeen=!0);l.escaped=!1;return l},{tokens:[],current:"",escaped:!1,spaceSeen:!1});a.current&&a.tokens.push(a.current);
var g=a.tokens.map(function(l){return l.toLowerCase()});return{tokens:a.tokens,lowercasedTokens:g}}},{key:"clearInput",value:function(){this.textString="";ld.signal(this,"searchInput",this.parseInput());this.onBlur()}},{key:"matches",value:function(a){return this.textString?this.filterFunction.call(this,this.parseInput(),{string:a}):!0}},{key:"onChange",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a);a="replace"===a.selector;this.isFocused();this.get("placeholder icon")&&
(this.get("placeholder icon").visible=!!this.textString);this.textString.includes("\n")&&(this.textString=this.textString.replace("\n",""),this.owner.focus());this.active&&a&&ld.signal(this,"searchInput",this.parseInput())}},{key:"onBlur",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),"onBlur",this).call(this,a);this.active=!1;this.get("placeholder").visible=!this.textString;this.animate({styleClasses:["idle"],duration:300})}},{key:"onFocus",value:function(a){Sb._get(Object.getPrototypeOf(m.prototype),
"onFocus",this).call(this,a);this.animate({styleClasses:["selected"],duration:300});this.get("placeholder").visible=!1;this.active=!0}}],[{key:"className",get:function(){return"SearchField"}},{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/search field"}}},selectedFontColor:{isStyleProp:!0,defaultValue:ld.Color.black},idleFontColor:{isStyleProp:!0,defaultValue:ld.Color.gray},borderColor:{defaultValue:ld.Color.gray},
layout:{initialize:function(){this.layout=new ld.HorizontalLayout({autoResize:!1,direction:"rightToLeft"})}},fuzzy:{derived:!0,after:["filterFunction","sortFunction"],set:function(a){this.setProperty("fuzzy",a);a?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=
this.defaultFilterFunction))}},filterFunction:{get:function(){var a=this.getProperty("filterFunction");if(!a)return this.defaultFilterFunction;"string"===typeof a&&(a=eval("("+a+")"));return a}},sortFunction:{},defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(a,g){return a.lowercasedTokens.every(function(l){return g.string.toLowerCase().includes(l)})})}},fuzzySortFunction:{get:function(){var a=this;return this._fuzzySortFunction||
(this._fuzzySortFunction=function(g,l){var q=String(ld.PropertyPath("string"===typeof a.fuzzy?a.fuzzy:"string").get(l)).toLowerCase(),r=0;g.lowercasedTokens.forEach(function(u){q.startsWith(u)?r-=10:q.includes(u)&&(r-=5)});return ld.arr.sum(g.lowercasedTokens.map(function(u){return ld.string.levenshtein(q.toLowerCase(),u)}))+r})}},fuzzyFilterFunction:{get:function(){var a=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=function(g,l){var q="string"===typeof a.fuzzy?a.fuzzy:"string";
if(g.lowercasedTokens.every(function(u){return l.string.toLowerCase().includes(u)}))return!0;var r=String(ld.PropertyPath(q).get(l)).toLowerCase();return 3>=ld.arr.sum(g.lowercasedTokens.map(function(u){return ld.string.levenshtein(r,u)}))})}},placeHolder:{defaultValue:"Search"},submorphs:{after:["placeHolder"],initialize:function(){this.submorphs=[{type:"label",name:"placeholder",isLayoutable:!1,value:this.placeHolder,reactsToPointer:!1},ld.Icon.makeLabel("times-circle",{padding:ld.rect(2,4,3,0),
fontSize:14,visible:!1,fixedHeight:!0,autofit:!1,extent:ld.pt(20,22),name:"placeholder icon",fontColor:ld.Color.gray,nativeCursor:"pointer"})];ld.connect(this.get("placeholder icon"),"onMouseDown",this,"clearInput")}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:22462,end:29049})}(ld.Text));
ld.SearchField=VJ;ld.SearchField=VJ;ld.SearchField=VJ;var xQ=Object.freeze({__proto__:null,Leash:PJ,Slider:QJ,ValueScrubber:RJ,CheckBox:sE,LabeledCheckBox:SJ,ModeSelector:TJ,DropDownSelector:UJ,SearchField:VJ}),Gg=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js");Gg.promise=yg;Gg.fun=nl;Gg.num=Bk;Gg.Icon=sn;Gg.stringToEasing=is;Gg.easings=cq;Gg.VerticalLayout=Dw;Gg.ShadowObject=bq;Gg.HorizontalLayout=bt;Gg.morph=wa;Gg.Morph=nk;Gg.StyleSheet=dt;Gg.Image=Fy;Gg.pt=oh;Gg.RadialGradient=
rn;Gg.rect=Ii;Gg.Rectangle=ee;Gg.Color=Wf;Gg.connect=fk;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),m=e.hasOwnProperty("ProgressBar")&&"function"===typeof e.ProgressBar?e.ProgressBar:e.ProgressBar=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"test",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){1==g.nextAddress&&
(a.progress=0);if(!(1>a.progress))return g.jumpTo(0);a.progress+=.1;return g.yield(Gg.promise.delay(1E3),2)})}},{key:"update",value:function(){var a=this;if(this._lastWidth){var g=this.get("progress path"),l=Gg.stringToEasing(Gg.easings.inOutExpo)(Gg.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3),q=this._targetWidth;g.topLeft=Gg.pt(0,0);g.height=this.height;g.width=this._lastWidth>q?q:Gg.num.interpolate(l,this._lastWidth,q);setTimeout(function(){a.world()||a.stopStepping()},1E3)}}}],[{key:"className",
get:function(){return"ProgressBar"}},{key:"properties",get:function(){return{progress:{after:["submorphs"],initialize:function(){this.progress=0;this.startStepping("update")},set:function(a){var g=this.get("progress path");this._lastWidth=Math.max(g.width,this._targetWidth,1);this._targetWidth=this.width*a;this._timeStamp=Date.now();this.setProperty("progress",a)}},fill:{defaultValue:Gg.Color.darkGray},borderRadius:{defaultValue:5},clipMode:{defaultValue:"hidden"},submorphs:{initialize:function(){this.submorphs=
[{name:"progress path",fill:Gg.Color.orange,width:1}]}}}}}],e,{pathInPackage:function(){return"loading-indicator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:336,end:1929})})(Gg.Morph);var yQ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),m=e.hasOwnProperty("LoadingIndicator")&&
"function"===typeof e.LoadingIndicator?e.LoadingIndicator:e.LoadingIndicator=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Sb._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);var g=this.ui;a=g.label;var l=g.closeButton;if(g=g.progressBar)g.opacity=0,g.isLayoutable=!1;Gg.connect(this,
"extent",this,"relayout");Gg.connect(a,"extent",this,"relayout");Gg.connect(a,"value",this,"updateLabel");Gg.connect(a,"fontSize",this,"updateLabel");Gg.connect(a,"fontFamily",this,"updateLabel");Gg.connect(l,"fire",this,"remove");l.fit();this.relayout()}},{key:"animateProgress",value:function(a){var g=this,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return l=g.ui,(q=l.progressBar)||(q=g.addMorph(new Gg.ProgressBar({name:"progress bar"}))),r=g.center,0==
a?(q.isLayoutable=!1,q.opacity=0):(q.isLayoutable=!0,q.opacity=1),q.progress=a,u.yield(g.whenRendered(),2);g.center=r;u.jumpToEnd()})}},{key:"isEpiMorph",get:function(){return!0}},{key:"updateLabel",value:function(){var a=this.center;this.relayout();this.center=a}},{key:"relayout",value:function(){Gg.Rectangle.inset(20,12);var a=this.ui,g=a.label,l=a.progressBar,q=a.status;a.closeButton.topRight=this.innerBounds().insetBy(2).topRight();l.extent=Gg.pt(g.owner.bounds().width,5);q[q.visible?"top":"bottom"]=
g.height}},{key:"onHoverIn",value:function(a){this.ui.closeButton.visible=!0}},{key:"onHoverOut",value:function(a){this.ui.closeButton.visible=!1}}],[{key:"className",get:function(){return"LoadingIndicator"}},{key:"open",value:function(a,g){var l=Gg.morph(Object.assign({type:Gg.LoadingIndicator},g,{label:a}));if(g&&g.animated)return Gg.promise.delay(g.delay||0).then(function(){l.openInWorld();l.opacity=0;l.whenRendered().then(function(){l.ui.spinner.visible=!0;l.top+=25;l.animate({top:l.top-25,easing:Gg.easings.outExpo});
l.animate({opacity:1,easing:Gg.easings.outExpo})})}),l;l.openInWorld();l.ui.label.whenRendered().then(function(){l.ui.spinner.visible=!0;l.ui.label.fit()});return l}},{key:"forPromise",value:function(a,g,l){var q=this.open(g,l);Gg.promise.finally(Promise.resolve(a),function(){return q.remove()});return q}},{key:"runFn",value:function(a,g,l){var q=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return r=q.open(g,l),u.yield(r.whenRendered(),2);case 2:return u.setFinallyBlock(3),
u.yield(a(r),5);case 5:return u.return(u.yieldResult);case 3:u.enterFinallyBlock(),r.remove(),u.leaveFinallyBlock(0)}})}},{key:"properties",get:function(){return{name:{defaultValue:"LoadingIndicator"},styleClasses:{defaultValue:["Halo"]},hasFixedPosition:{defaultValue:!0},ui:{derived:!0,get:function(){return{progressBar:this.getSubmorphNamed("progress bar"),closeButton:this.getSubmorphNamed("closeButton"),spinner:this.getSubmorphNamed("spinner"),label:this.getSubmorphNamed("ld label"),status:this.getSubmorphNamed("status")}}},
progress:{derived:!0,set:function(a){this.animateProgress(Gg.num.clamp(a,0,1))}},label:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.value},set:function(a){this.ui.label.value=a}},status:{derived:!0,after:["submorphs"],defaultValue:!1,get:function(){return this.getSubmorphNamed("status").value},set:function(a){var g=this.ui.status;a?(g.visible=!0,g.value=a):(g.visible=!1,g.value="");this.relayout()}},fontFamily:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontFamily},
set:function(a){this.ui.label.fontFamily=a}},fontSize:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontSize},set:function(a){this.ui.label.fontSize=a}},loadingImage:{defaultValue:System.decanonicalize("lively.morphic/")+"lively-web-logo-small-animate.svg"},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/loading indicator"}}},submorphs:{initialize:function(){this.submorphs=[{name:"wrapper",submorphs:[{type:"html",name:"spinner",extent:Gg.pt(86.2,70.2)},
{type:"label",name:"ld label",extent:Gg.pt(20,100),submorphs:[{type:"label",name:"status"}]}]},{type:"button",name:"closeButton",label:Gg.Icon.textAttribute("times")},{type:Gg.ProgressBar,name:"progress bar"}]}}}}}],e,{pathInPackage:function(){return"loading-indicator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:2085,end:7909})}(Gg.Morph);
yQ=Gg.LoadingIndicator;var tE=sa("L",yQ);Gg.default=yQ;var vj=lively.FreezerRuntime.recorderFor("lively.components/index.js");Object.assign(vj,gla);Object.assign(vj,ela);Object.assign(vj,hla);Object.assign(vj,ila);Object.assign(vj,jla);Object.assign(vj,kla);vj.Window=vQ;vj.prompts=wQ;vj.widgets=xQ;vj.LoadingIndicator=tE;vj.addClassMappings=fa;vj.List=eB;vj.DropDownList=rE;vj.Button=dB;vj.CheckBox=sE;vj.addClassMappings({list:vj.List,dropdownlist:vj.DropDownList,button:vj.Button,checkbox:vj.CheckBox,
labeledcheckbox:vj.widgets.LabeledCheckBox});vj.Window=vQ;vj.Window=vQ;vj.LoadingIndicator=tE;vj.LoadingIndicator=tE;vj.prompts=wQ;vj.prompts=wQ;vj.widgets=xQ;vj.widgets=xQ;var Wo=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js");Wo.Morph=nk;Wo.MorphicDB=Ku;Wo.LoadingIndicator=tE;Wo.resource=p;var fB=function(b){var e=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js"),m=e.hasOwnProperty("WorldLoadingScreen")&&"function"===typeof e.WorldLoadingScreen?e.WorldLoadingScreen:
e.WorldLoadingScreen=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"commands",get:function(){var a=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=null;a.setBounds($world.windowBounds());a.get("json target indicator").topRight=a.innerBounds().insetBy(25).topRight()}}]}},{key:"__head_html__",get:function(){return'<style type="text/css">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},
{key:"onLoad",value:function(){var a=this,g,l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress){if(!lively.FreezerRuntime)return r.jumpTo(0);g=a.get("package loading indicator");g.startStepping("updateProgressBar");document.body.style.backgroundColor="black";l=a.getWorldName();(q=a.getFilePath())&&a.get("json target indicator").animate({opacity:1,duration:300});return r.yield(a.transitionToLivelyWorld({worldName:l,filePath:q},g),3)}g.stopStepping();r.jumpToEnd()})}},
{key:"transitionToLivelyWorld",value:function(a,g){var l=a.worldName,q=a.filePath,r=this,u,v,y,z,A,B;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:return u=r.get("package loading indicator"),G.yield(Promise.resolve().then(function(){return a5}),2);case 2:v=G.yieldResult;y=v.bootstrap;if(!(z=l&&"__newWorld__"!=l)){G.jumpTo(3);break}return G.yield(Wo.MorphicDB.default.exists("world",l),4);case 4:z=!G.yieldResult.exists;case 3:if(z)return G.return(r.indicateMissingWorld(!0));
if(!(A=q)){G.jumpTo(5);break}return G.yield(Wo.resource(document.location.origin).join(q).exists(),6);case 6:A=!G.yieldResult;case 5:if(A)return G.return(r.indicateMissingWorld(!0));B=Wo.LoadingIndicator.open("...starting bootstrap process...",{animated:!0,delay:1E3});g.opacity=1;return G.yield(y({worldName:l,filePath:q,loadingIndicator:B,progress:u}),0)}})}},{key:"getWorldName",value:function(){return document.location.href.endsWith("worlds/new")?"__newWorld__":Wo.resource(document.location.href).query().name||
!1}},{key:"getFilePath",value:function(){return Wo.resource(document.location.href).query().file||!1}},{key:"indicateMissingWorld",value:function(a){this.get("package loading indicator").visible=!a;this.get("broken heart").visible=this.get("broken heart").isLayoutable=a}}],[{key:"className",get:function(){return"WorldLoadingScreen"}},{key:"properties",get:function(){return{title:{derived:!0,get:function(){return"lively.next ("+document.location.hostname+")"}}}}}],e,{pathInPackage:function(){return"loading-page.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-28"}}},{start:158,end:2907})}(Wo.Morph);Wo.WorldLoadingScreen=fB;Wo.WorldLoadingScreen=fB;Wo.WorldLoadingScreen=fB;var Jh=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js");Jh.Morph=nk;Jh.MorphicDB=Ku;Jh.World=ew;Jh.easings=cq;Jh.morph=wa;Jh.promise=yg;Jh.string=vh;Jh.date=Jr;
Jh.Color=Wf;Jh.pt=oh;Jh.LoadingIndicator=tE;Jh.resource=p;var gB=function(b){var e=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),m=e.hasOwnProperty("WorldPreview")&&"function"===typeof e.WorldPreview?e.WorldPreview:e.WorldPreview=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"relayout",value:function(){this.setBounds(this.world().visibleBounds())}},{key:"onLoad",value:function(){this.ui.spinner.visible=
!1}},{key:"displayPreview",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return g.yield(a.initWithCommit(a._commit),0)})}},{key:"initWithCommit",value:function(a){var g=this,l,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return l=g.ui,q=l.preview,r=l.timestamp,u=l.title,v=l.description,y=l.previewContainer,g.opacity=.5,y.opacity=0,z.yield(g.whenRendered(),2);if(3!=z.nextAddress)return g._commit=a,q.imageUrl=
a.preview,r.value=[a.author.name,{fontSize:13,fontWeight:"bold",paddingTop:"1px"},Jh.date.format(a.timestamp," - d.m.yy HH:MM"),{fontWeight:"bold",fontSize:12,paddingTop:"2px"}],u.value=Jh.string.truncate(a.name,18,"..."),v.value=a.description,z.yield(g.whenRendered(),3);y.opacity=1;g.animate({opacity:1,duration:300});z.jumpToEnd()})}},{key:"openAnimated",value:function(a){a=void 0===a?$world.visibleBounds():a;var g=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return l=
Jh.morph(Object.assign({},g.spec(),{reactsToPointer:!1,renderOnGPU:!0,submorphs:[g.ui.spinner.spec()]})).openInWorld(),l.hasFixedPosition=!0,l.globalPosition=g.globalPosition,l.opacity=0,q.yield(l.whenRendered(),2);case 2:return q.yield(l.animate({opacity:1,duration:300}),3);case 3:return l.dropShadow=!1,l.animate({bounds:a,borderRadius:0,duration:500,easing:Jh.easings.inOutQuint}),l.respondsToVisibleWindow=!0,q.yield(l.ui.spinner.animate({center:l.innerBounds().center(),duration:500,easing:Jh.easings.inOutQuint}),
4);case 4:return q.yield(Jh.promise.delay(1E3),5);case 5:return q.return(l)}})}},{key:"openWorld",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield(a.openAnimated(),2);a.loadWorld();g.jumpToEnd()})}},{key:"loadWorld",value:function(){var a=this,g,l,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){g=a._commit;l=g._id;q=g.name;if(lively.FreezerRuntime)return r=Jh.LoadingIndicator.open("...starting bootstrap process...",
{animated:!0,delay:1E3}),a.transitionToLivelyWorld(document.location.origin,a._commit,r),v.return();u=Jh.LoadingIndicator.open("loading "+q);return v.yield(Jh.World.loadFromCommit(l,void 0,{morphicDB:Jh.MorphicDB.default}),3)}u.remove();v.jumpToEnd()})}},{key:"transitionToLivelyWorld",value:function(a,g,l){var q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(lb.import("./package loading progress indicator-be16ee6e.js"),3);case 3:if(!(q=
y.yieldResult)){y.jumpTo(4);break}return y.yield(Jh.resource("part://partial freezing/package loading progress indicator"),5);case 5:q=y.yieldResult;case 4:return y.yield(q.read(),2);case 2:return r=y.yieldResult,y.yield(Promise.resolve().then(function(){return a5}),6);case 6:return u=y.yieldResult,v=u.bootstrap,y.yield(v({commit:g,loadingIndicator:l,progress:r}),0)}})}},{key:"showVersions",value:function(){var a=this,g,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return g=
Jh.easings.inOutExpo,l=a.ui,q=l.previewContainer,r=a.versionContainer,a.addMorph(r),r.reactsToPointer=r.visible=!0,r.initializeFromStartCommit(a._commit),a.animate({width:515,duration:200,easing:g}),q.animate({opacity:0,duration:200}),u.yield(r.animate({opacity:1,duration:200}),2);q.reactsToPointer=q.visible=!1;u.jumpToEnd()})}},{key:"hideVersions",value:function(){var a=this,g,l,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return g=Jh.easings.inOutExpo,l=
a.ui,q=l.previewContainer,r=a.versionContainer,q.reactsToPointer=q.visible=!0,a.animate({width:245,duration:200,easing:g}),q.animate({opacity:1,duration:200}),u.yield(r.animate({opacity:0,duration:200}),2);r.reset();r.remove();u.jumpToEnd()})}},{key:"toggleDeleteButton",value:function(a){this.ui.deleteButton.visible=a}},{key:"onHoverIn",value:function(a){this.toggleDeleteButton(!0)}},{key:"onHoverOut",value:function(a){this.toggleDeleteButton(!1)}},{key:"tryToDelete",value:function(){var a=this.ui.previewContainer,
g=this.deleteWorldPrompt;this.addMorph(g);g.visible=!0;g.animate({top:0,left:0,opacity:1,duration:100});a.animate({opacity:.3,duration:100})}},{key:"confirmDelete",value:function(){}},{key:"cancelDelete",value:function(){var a=this,g,l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return g=a.ui,l=g.previewContainer,q=a.deleteWorldPrompt,l.animate({opacity:1,duration:300}),r.yield(q.animate({opacity:0,duration:300}),2);q.remove();r.jumpToEnd()})}},{key:"onMouseUp",
value:function(a){var g=this.ui,l=g.openButton,q=g.versionButton,r=g.deleteButton,u=g.closeVersionsButton,v=g.cancelDeleteButton;g=g.confirmDeleteButton;switch(a.targetMorph){case l:this.openWorld();break;case q:this.showVersions();break;case r:this.tryToDelete();break;case u:this.hideVersions();break;case g:this.confirmDelete();break;case v:this.cancelDelete()}}}],[{key:"className",get:function(){return"WorldPreview"}},{key:"properties",get:function(){return{deleteWorldPrompt:{set:function(a){a.isMorph||
(a=Jh.morph(a));this.setProperty("deleteWorldPrompt",a)}},versionContainer:{set:function(a){a.isMorph||(a=Jh.morph(a));this.setProperty("versionContainer",a)}},ui:{readOnly:!0,get:function(){return{previewContainer:this.getSubmorphNamed("preview container"),versionContainer:this.getSubmorphNamed("version container"),preview:this.getSubmorphNamed("preview"),timestamp:this.getSubmorphNamed("timestamp"),title:this.getSubmorphNamed("title"),description:this.getSubmorphNamed("description"),openButton:this.getSubmorphNamed("open button"),
versionButton:this.getSubmorphNamed("version button"),spinner:this.getSubmorphNamed("spinner"),deleteButton:this.getSubmorphNamed("delete button"),closeVersionsButton:this.getSubmorphNamed("close versions button"),versionList:this.getSubmorphNamed("version list"),deleteWorldPrompt:this.getSubmorphNamed("delete world prompt"),cancelDeleteButton:this.getSubmorphNamed("cancel delete button"),confirmDeleteButton:this.getSubmorphNamed("confirm delete button")}}}}}}],e,{pathInPackage:function(){return"landing-page.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-28"}}},{start:279,end:7598})}(Jh.Morph);Jh.WorldPreview=gB;Jh.WorldPreview=gB;Jh.WorldPreview=gB;var hB=function(b){var e=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),m=e.hasOwnProperty("WorldLandingPage")&&"function"===typeof e.WorldLandingPage?e.WorldLandingPage:e.WorldLandingPage=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(m,b,[{key:"__loading_html__",get:function(){return"\n      <style>\n        "+this.loadingScreen.cssDeclaration+"\n      </style>\n      "+this.loadingScreen.html+"\n    "}},{key:"__head_html__",get:function(){return'\n<link type="text/css" rel="stylesheet" id="lively-font-awesome" href="/lively.morphic/assets/font-awesome/css/font-awesome.css">\n<link type="text/css" rel="stylesheet" id="lively-font-inconsolata" href="/lively.morphic/assets/inconsolata/inconsolata.css">\n<style type="text/css" id="WorldLandingPage_7068CDA9_749E_4EC1_9BC4_50DF06EAA2BA-Nunito">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},
{key:"commands",get:function(){var a=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=null;document.body.style.overflowY="hidden";a.setBounds($world.windowBounds());a.getSubmorphNamed("globe").extent=a.extent;a.ensureUserFlap();var g=a.getSubmorphNamed("a project browser");g&&(g.center=a.extent.scaleBy(.5))}}]}},{key:"ensureUserFlap",value:function(){var a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return $world.get("user flap")?
l.return():l.yield(lb.import("./dark-2dbf2d2a.js"),3);case 3:if(!(a=l.yieldResult)){l.jumpTo(4);break}return l.yield(Jh.resource("part://SystemIDE/user flap master/dark"),5);case 5:a=l.yieldResult;case 4:return l.yield(a.read(),2);case 2:return g=l.yieldResult,g.showMorphControls=!1,g.visible=!1,g.openInWorld(),g.hasFixedPosition=!0,g.get("fast load toggler").refresh(),l.yield(Jh.promise.delay(1E3),6);case 6:g.animate({visible:!0}),l.jumpToEnd()}})}},{key:"beforePublish",value:function(){var a=this.getSubmorphNamed("a project browser");
a&&a.remove()}},{key:"onLoad",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(a.whenRendered(),2);if(!lively.FreezerRuntime)return l.return();$world.fill=Jh.Color.black;document.documentElement.style.background=Jh.Color.black;a.showWorldList().then(function(){return document.getElementById("loading-screen").remove()});a.getSubmorphNamed("globe").fullyLoaded();(g=document.getElementById("loading screen"))&&g.remove();l.jumpToEnd()})}},
{key:"showWorldList",value:function(){var a=this,g,l,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:if(g=a.getSubmorphNamed("a poject browser")){y.jumpTo(2);break}l=a;q=l.addMorph;r=l;return y.yield(lb.import("./project browser-127bd736.js"),4);case 4:if(!(u=y.yieldResult)){y.jumpTo(5);break}return y.yield(Jh.resource("part://partial freezing/project browser"),6);case 6:u=y.yieldResult;case 5:return y.yield(u.read(),3);case 3:g=q.call(r,y.yieldResult);
case 2:v=g,v.name="a project browser",a.reset(),v.showCloseButton=!1,v.extent=Jh.pt(1110,800).minPt(a.extent.subPt(Jh.pt(50,150))),v.animate({opacity:1,duration:300}),v.animate({center:a.innerBounds().center(),duration:500}),v.displayWorlds(),v.hasFixedPosition=!1,y.jumpToEnd()}})}},{key:"reset",value:function(){var a=this.getSubmorphNamed("a project browser");a.opacity=0;a.center=this.innerBounds().center()}}],[{key:"className",get:function(){return"WorldLandingPage"}},{key:"properties",get:function(){return{title:{derived:!0,
get:function(){return"lively.next ("+document.location.hostname+")"}},loadingScreen:{}}}}],e,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-28"}}},{start:7607,end:10915})}(Jh.Morph);Jh.WorldLandingPage=hB;Jh.WorldLandingPage=hB;Jh.WorldLandingPage=hB;var Lu=lively.FreezerRuntime.recorderFor("PartialFreezing/index.js");
Lu.WorldLoadingScreen=fB;Lu.WorldLandingPage=hB;Lu.WorldPreview=gB;Lu.WorldLoadingScreen=fB;Lu.WorldLoadingScreen=fB;Lu.WorldLandingPage=hB;Lu.WorldLandingPage=hB;Lu.WorldPreview=gB;Lu.WorldPreview=gB;var pe=lively.FreezerRuntime.recorderFor("PartialFreezing/bootstrap.js");pe.bootstrap=jH;pe.fastPrepLivelySystem=function(b){return Promise.resolve().then(function(){b.status="starting fast system preparation..."}).then(function(){return pe.resource(document.location.origin).join("package-registry.json").readJson()}).then(function(e){System["__lively.modules__packageRegistry"]=
lively.modules.PackageRegistry.fromJSON(System,e);return System}).then(function(){return pe.loadViaScript("/lively.user/dist/lively.user-client.js")})};pe.installFetchHook=function(b){lively.modules.installHook("fetch",function(e,m){pe.loads++;b.status="loading "+pe.string.truncateLeft(m.name.replace(window.System.baseURL,""),25,"...");b.progress=pe.loads/(800-4*Object.keys(pe.extractedModules).length);b.center=$world.innerBounds().center();return e(m)})};pe.extractModules=function(b){Object.keys(lively.FreezerRuntime.registry).filter(function(e){return e.startsWith(b)}).forEach(function(e){pe.extractedModules[window.origin+
"/"+e]=Object.assign({},lively.FreezerRuntime.registry[e].exports)})};pe.loadComponents=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:return b.yield(lb.import("./world-cb5e7622.js"),2);case 2:return b.yield(lb.import("./editor-plugin-96b552ff.js").then(function(e){return e.e}),3);case 3:return b.yield(lb.import("./editor-plugin-b26d0f93.js"),4);case 4:return b.yield(lb.import("./index-a98bf65c.js"),5);case 5:return b.yield(lb.import("./client-command-0b340c5b.js"),
6);case 6:return b.yield(lb.import("./client-resource-b3f84c88.js"),7);case 7:return b.yield(Promise.resolve().then(function(){return Qda}),8);case 8:pe.extractModules("lively.bindings"),pe.extractModules("lively.shell"),pe.extractModules("lively.ide"),pe.extractModules("lively.components"),b.jumpToEnd()}})};pe.bootstrapLivelySystem=function(b,e,m){return Promise.resolve().then(function(){b.status="starting bootstrap process..."}).then(function(){var a,g,l,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.yield(e.whenRendered(),
2);case 2:if("frozen"!=m["lively.lang"]&&!pe.fastLoad){v.jumpTo(3);break}return v.yield(Promise.resolve().then(function(){return a0}),4);case 4:a=v.yieldResult,pe.extractModules("lively.lang"),e.finishPackage({packageName:"lively.lang",frozen:!0}),delete a._prevLivelyGlobal;case 3:if("frozen"!=m["lively.ast"]&&!pe.fastLoad){v.jumpTo(5);break}g=lively;return v.yield(Promise.resolve().then(function(){return m0}),6);case 6:g.ast=v.yieldResult,pe.extractModules("lively.ast"),e.finishPackage({packageName:"lively.ast",
frozen:!0});case 5:if("frozen"!=m["lively.source-transform"]&&!pe.fastLoad){v.jumpTo(7);break}l=lively;return v.yield(Promise.resolve().then(function(){return Kda}),8);case 8:l.sourceTransform=v.yieldResult,pe.extractModules("lively.source-transform"),e.finishPackage({packageName:"lively.source-transform",frozen:!0});case 7:if("frozen"!=m["lively.classes"]&&!pe.fastLoad){v.jumpTo(9);break}return v.yield(lb.import("./object-classes-b4eddc4d.js"),10);case 10:return q=lively,v.yield(Promise.resolve().then(function(){return qfa}),
11);case 11:q.classes=v.yieldResult,pe.extractModules("lively.class"),e.finishPackage({packageName:"lively.classes",frozen:!0});case 9:if("frozen"!=m["lively.vm"]&&!pe.fastLoad){v.jumpTo(12);break}r=lively;return v.yield(Promise.resolve().then(function(){return f1}),13);case 13:r.vm=v.yieldResult,pe.extractModules("lively.vm"),e.finishPackage({packageName:"lively.vm",frozen:!0});case 12:if("frozen"!=m["lively.modules"]&&!pe.fastLoad){v.jumpTo(14);break}return v.yield(Promise.resolve().then(function(){return mI}),
15);case 15:pe.extractModules("lively.modules"),e.finishPackage({packageName:"lively.modules",frozen:!0});case 14:if("frozen"!=m["lively.user"]&&!pe.fastLoad){v.jumpTo(16);break}return v.yield(Promise.resolve().then(function(){return Kka}),17);case 17:return v.yield(lb.import("./user-ui-7ca0ad68.js"),18);case 18:pe.extractModules("lively.user"),e.finishPackage({packageName:"lively.user",frozen:!0});case 16:if("frozen"!=m["lively.storage"]&&!pe.fastLoad){v.jumpTo(19);break}return v.yield(Promise.resolve().then(function(){return Gka}),
20);case 20:pe.extractModules("lively.storage"),e.finishPackage({packageName:"lively.storage",frozen:!0});case 19:if("frozen"!=m["lively.morphic"]&&!pe.fastLoad){v.jumpTo(0);break}return v.yield(Promise.resolve().then(function(){return ifa}),22);case 22:return pe.extractModules("lively.resources"),v.yield(lb.import("./client-53929a93.js"),23);case 23:return v.yield(lb.import("./index-792c91c7.js"),24);case 24:return pe.extractModules("lively.2lively"),v.yield(Promise.resolve().then(function(){return Sda}),
25);case 25:return pe.extractModules("lively.serializer2"),v.yield(pe.loadComponents(),26);case 26:return v.yield(lb.import("./index-82fd0049.js").then(function(y){return y.i}),27);case 27:return pe.extractModules("lively.halos"),v.yield(lb.import("./index-80650824.js"),28);case 28:return pe.extractModules("lively-system-interface"),v.yield(Promise.resolve().then(function(){return Oda}),29);case 29:return pe.extractModules("lively.graphics"),u=lively,v.yield(Promise.resolve().then(function(){return dla}),
30);case 30:u.morphic=v.yieldResult,pe.extractModules("lively.morphic"),e.finishPackage({packageName:"lively.morphic",frozen:!0}),v.jumpToEnd()}})}).then(function(){var a,g,l,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return r.yield(pe.resource(document.location.origin).join("package-registry.json").readJson(),2);case 2:return a=r.yieldResult,r.yield(pe.loadViaScript("/lively.next-node_modules/babel-standalone/babel.js"),3);case 3:return r.yield(pe.loadViaScript("/lively.next-node_modules/systemjs/dist/system.src.js"),
4);case 4:return window.System.config({baseURL:document.location.origin}),r.yield(pe.loadViaScript("/lively.modules/systemjs-init.js"),5);case 5:g=lively.modules.getSystem("bootstrapped",{baseURL:document.location.origin});lively.modules.changeSystem(g,!0);g["__lively.modules__packageRegistry"]=lively.modules.PackageRegistry.fromJSON(g,a);for(l in pe.extractedModules)g.set(l,g.newModule(pe.extractedModules[l])),q=lively.modules.module(l),q._recorder=pe.extractedModules[l],q._frozenModule=!0;pe.installFetchHook(b);
r.jumpToEnd()}})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==m["lively.lang"]&&!pe.fastLoad)return a.return(pe.importPackageAndDo("lively.lang",function(g){e.finishPackage({packageName:"lively.lang",loaded:!0});delete g._prevLivelyGlobal},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){e.animate({opacity:1,easing:pe.easings.outExpo,duration:300});if("dynamic"==m["lively.ast"]&&!pe.fastLoad)return a.return(pe.importPackageAndDo("lively.ast",
function(g){e.finishPackage({packageName:"lively.ast",loaded:!0});lively.ast=g},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==m["lively.source-transform"]&&!pe.fastLoad)return a.return(pe.importPackageAndDo("lively.source-transform",function(g){e.finishPackage({packageName:"lively.source-transform",loaded:!0});lively.sourceTransform=g},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==
m["lively.classes"]&&!pe.fastLoad)return a.return(pe.importPackageAndDo("lively.classes",function(g){e.finishPackage({packageName:"lively.classes",loaded:!0});lively.classes=g},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==m["lively.vm"]&&!pe.fastLoad)return a.return(pe.importPackageAndDo("lively.vm",function(g){e.finishPackage({packageName:"lively.vm",loaded:!0});lively.vm=g},b));a.jumpToEnd()})}).then(function(){function a(g){lively.modules=
g;lively.modules.unwrapModuleLoad();lively.modules.unwrapModuleResolution();lively.modules.wrapModuleLoad();lively.modules.wrapModuleResolution();pe.installFetchHook(b);var l=System["__lively.modules__packageRegistry"];delete System["__lively.modules__packageRegistry"];g=System["__lively.modules__packageRegistry"]=g.PackageRegistry.ofSystem(System);Object.assign(g,pe.obj.select(l,["packageMap","individualPackageDirs","devPackageDirs","packageBaseDirs"]));g.resetByURL();l=g.allPackages();var q=lively.modules.module("lively.modules/src/packages/package.js").recorder.Package;
l.filter(function(u){return!u.constructor[Symbol.for("lively-module-meta")]}).forEach(function(u){pe.adoptObject(u,q)});l=Object.values(System["__lively.modules__loadedModules"]);var r=lively.modules.module("lively.modules/src/module.js").recorder.ModuleInterface;l.filter(function(u){return!u.constructor[Symbol.for("lively-module-meta")]}).forEach(function(u){pe.adoptObject(u,r)})}return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return"frozen"==m["lively.modules"]||
pe.fastLoad?(System._scripting=lively.modules.scripting,g.jumpTo(2)):g.yield(pe.importPackageAndDo("lively.modules",a,b),2);e.finishPackage({packageName:"lively.modules",loaded:!0});g.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==m["lively.user"]&&!pe.fastLoad)return a.return(pe.importPackageAndDo("lively.user",function(g){e.finishPackage({packageName:"lively.user",loaded:!0});lively.user=g},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==
m["lively.storage"]&&!pe.fastLoad)return a.return(pe.importPackageAndDo("lively.storage",function(g){e.finishPackage({packageName:"lively.storage",loaded:!0});lively.storage=g},b));a.jumpToEnd()})})};pe.importPackageAndDo=function(b,e,m){var a=b.split("/").slice(-1)[0];m.label="loading "+a;return lively.modules.importPackage(b).then(e||function(){})};pe.polyfills=function(){var b=[];"PointerEvent"in window||b.push(pe.loadViaScript(document.location.origin+"/lively.next-node_modules/pepjs/dist/pep.js"));
"fetch"in window||b.push(pe.loadViaScript("//cdnjs.cloudflare.com/ajax/libs/fetch/1.0.0/fetch.js"));return Promise.all(b)};pe.resource=p;pe.loadViaScript=M;pe.promise=yg;pe.string=vh;pe.obj=Pf;pe.modulePackage=mI;pe.easings=cq;pe.adoptObject=wo;pe.Color=Wf;lively.modules=pe.modulePackage;pe.loginDone=!0;pe.doBootstrap=!0;pe.askBeforeQuit=!0;pe.worldLoaded=!1;pe.loc=document.location;pe.query=pe.resource(pe.loc.href).query();pe.fastLoad=1==pe.query.fastLoad;pe.bootstrap=jH;pe.bootstrap=jH;pe.loads=
0;pe.extractedModules={};var a5=Object.freeze({__proto__:null,bootstrap:jH});wk.users.authServerURL="https://auth.typeshift.io";wk.css.fontAwesome="/lively.morphic/assets/fontawesome-free-5.12.1/css/all.css";wk.css.inconsolata="/lively.morphic/assets/inconsolata/inconsolata.css";var $_=JSON.parse('{"id":"WorldLoadingScreen_8D2001D1_D118_46B5_B29D_FB407980FCFF","snapshot":{"WorldLoadingScreen_8D2001D1_D118_46B5_B29D_FB407980FCFF":{"rev":958220,"props":{"name":{"value":"world loading screen"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(67.99453124999991,685.8828125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1012.7413741929706,539.71484375)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_A06B0418_51C4_4A32_A039_1F2FAF0CD30F","rev":588307},{"__ref__":true,"id":"Label_852C5C86_95BA_4D4C_A47C_75AA24048EE0","rev":588308},{"__ref__":true,"id":"ModuleProgress_175528C5_665F_4B96_B73E_876682398205","rev":3560}]},"styleClasses":{"value":["WorldLoadingScreen","Morph","WorldLandingPage","morph"]},"layout":{"value":"__lv_expr__:{VerticalLayout}:lively.morphic:new VerticalLayout({\\n  align: \\"center\\",\\n  autoResize: false,\\n  direction: \\"centered\\",\\n  orderByIndex: false,\\n  padding: null,\\n  reactToSubmorphAnimations: false,\\n  resizeSubmorphs: false,\\n  spacing: 0\\n})"},"metadata":{"value":{"__ref__":true,"id":"7908C1CB-0692-49EB-A425-FA2CFB56CF1C","rev":0}}},"lively.serializer-class-info":{"className":"WorldLoadingScreen","module":{"package":{"name":"PartialFreezing","version":"0.1.1-25"},"pathInPackage":"loading-page.js"}}},"Label_A06B0418_51C4_4A32_A039_1F2FAF0CD30F":{"rev":588307,"props":{"name":{"value":"json target indicator"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(919.7413741929706,25)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(68,31)"},"opacity":{"value":0},"styleClasses":{"value":["Label","Morph","morph"]},"isLayoutable":{"value":false},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":2,"right":2,"bottom":2,"left":2}},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":6,"right":6,"bottom":6,"left":6}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0,0,0,1],"right":[0,0,0,1],"bottom":[0,0,0,1],"left":[0,0,0,1]}},"metadata":{"value":{"__ref__":true,"id":"BF96F043-608D-4547-8DCB-3126A9B254D7","rev":0}},"textAndAttributes":{"value":["JSON",null]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(5,2,5,2)"},"fontSize":{"value":20},"fontWeight":{"value":"bold"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,68,31]},"BF96F043-608D-4547-8DCB-3126A9B254D7":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"779F9CB4-967A-4B11-B8AE-3372254279E8","rev":0}}}},"779F9CB4-967A-4B11-B8AE-3372254279E8":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Label_852C5C86_95BA_4D4C_A47C_75AA24048EE0":{"rev":588308,"props":{"name":{"value":"broken heart"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(400.37068709648537,111.970703125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(212,211)"},"visible":{"value":false},"submorphs":{"value":[{"__ref__":true,"id":"Text_11DBF8B7_EDFA_4066_A750_9FF9FD324419","rev":865}]},"styleClasses":{"value":["Label","Morph","morph"]},"isLayoutable":{"value":false},"textAndAttributes":{"value":["\uf7a9",{"__ref__":true,"id":"D188F79F-89A4-4752-A56E-91285836058D","rev":0}]},"fontSize":{"value":211.064},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(231,76,60)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"Text_11DBF8B7_EDFA_4066_A750_9FF9FD324419":{"rev":865,"props":{"name":{"value":"error text"},"nativeCursor":{"value":"default"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(-66.55859375,211)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(345.1171875,104.7734375)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(0,0,0,0)"},"styleClasses":{"value":["Text","Morph","morph"]},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.09019607843137255,0.6274509803921569,0.984313725490196,1],"right":[0.09019607843137255,0.6274509803921569,0.984313725490196,1],"bottom":[0.09019607843137255,0.6274509803921569,0.984313725490196,1],"left":[0.09019607843137255,0.6274509803921569,0.984313725490196,1]}},"fixedWidth":{"value":true},"fixedHeight":{"value":true},"readOnly":{"value":true},"fontSize":{"value":22},"fontWeight":{"value":"bold"},"textAlign":{"value":"center"},"lineWrapping":{"value":true},"anchors":{"value":[]},"selections":{"key":"selections","verbatim":true,"value":[{"start":{"row":0,"column":62},"end":{"row":0,"column":62}}]},"textAndAttributes":{"key":"textAndAttributes","value":["Sorry, the world you requested can not be found on the server.",null]}},"lively.serializer-class-info":{"className":"Text","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/morph.js"}},"cachedLineBounds":[[0,[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0]]]},"D188F79F-89A4-4752-A56E-91285836058D":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"heart-broken"}}},"ModuleProgress_175528C5_665F_4B96_B73E_876682398205":{"rev":3560,"props":{"_tickingScripts":{"value":[{"__ref__":true,"id":"D89EEDF0-832F-46F6-9034-A639A8B1CAF0","rev":0}]},"name":{"value":"package loading indicator"},"master":{"value":{"__ref__":true,"id":"FAB68714-4A58-4B55-BEE0-5D0054484DD2","rev":0}},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(-2.122070312499659,193.2900390625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1002.8603515624998,163.8603515625)"},"opacity":{},"visible":{"value":true},"submorphs":{"value":[{"__ref__":true,"id":"Path_79E7E0B5_DA82_45F7_BAB3_81C5A14F4634","rev":958235},{"__ref__":true,"id":"Morph_9F3A6E54_E114_4CF9_AA38_944F2CE0F4F2","rev":970},{"__ref__":true,"id":"Morph_13401D9B_2D4C_4B8C_B1D0_2A8930BB0506","rev":1064},{"__ref__":true,"id":"Morph_2D3ECCAA_331C_4E74_B7FC_844563201FBA","rev":1158},{"__ref__":true,"id":"Morph_EAEED9CD_F1AB_4311_AE0B_14CC1DF82933","rev":1252},{"__ref__":true,"id":"Morph_E092F4E0_4675_4C1E_818E_EDEC6406CA47","rev":1346},{"__ref__":true,"id":"Morph_6C304E63_6AA6_4EC5_8AAB_1417148FCE53","rev":1440},{"__ref__":true,"id":"Morph_0175A811_E616_4A81_91A0_A31335F24517","rev":1534},{"__ref__":true,"id":"Morph_4C57EE28_1834_4D8A_9090_92DA6279AC07","rev":1628},{"__ref__":true,"id":"Morph_2B0417EC_CA67_4CCF_A348_D62E72293276","rev":1722},{"__ref__":true,"id":"Morph_47DE3B3A_50D2_4AE6_8135_1798C563890B","rev":1816}]},"isLayoutable":{"value":false},"metadata":{"value":{"__ref__":true,"id":"45F7FA46-CD5C-4424-933D-F0663903BCEB","rev":0}}},"lively.serializer-class-info":{"className":"ModuleProgress","module":{"package":{"name":"ModuleProgress","version":"0.1.1-108"},"pathInPackage":"index.js"}}},"D89EEDF0-832F-46F6-9034-A639A8B1CAF0":{"rev":0,"props":{"_rev":{"value":0},"suspended":{"value":true},"stopped":{"value":false},"tickTime":{"value":null},"type":{"value":"requestAnimationFrame"},"currentTimeout":{"value":772930},"target":{"value":{"__ref__":true,"id":"ModuleProgress_175528C5_665F_4B96_B73E_876682398205","rev":3560}},"selector":{"value":"updateProgressBar"},"args":{"value":[]}},"lively.serializer-class-info":{"className":"TargetScript","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"ticking.js"}}},"FAB68714-4A58-4B55-BEE0-5D0054484DD2":{"rev":0,"props":{"_rev":{"value":0},"derivedMorph":{"value":{"__ref__":true,"id":"ModuleProgress_175528C5_665F_4B96_B73E_876682398205","rev":3560}},"auto":{"value":"styleguide://partial freezing/package loading progress indicator"}},"lively.serializer-class-info":{"className":"ComponentPolicy","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"style-guide.js"}}},"end-marker":{"rev":0,"props":{"_rev":{"value":0},"tagName":{"value":"marker"},"id":{"value":"end-marker"},"viewBox":{"value":"0 0 10 10"},"refX":{"value":"5"},"refY":{"value":"5"},"markerWidth":{"value":"5"},"markerHeight":{"value":"5"},"orient":{"value":"auto"},"children":{"value":[{"__ref__":true,"id":"F03AA26E-9DF3-468D-A71F-181BE6BCC49C","rev":0}]},"fill":{"value":"rgba(127,140,141,1)"}}},"F03AA26E-9DF3-468D-A71F-181BE6BCC49C":{"rev":0,"props":{"_rev":{"value":0},"tagName":{"value":"path"},"d":{"value":"M0,0 L10,5 L0,10 z"}}},"234700E0-2697-48B6-B647-348117E424C8":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"Path_79E7E0B5_DA82_45F7_BAB3_81C5A14F4634":{"rev":958235,"props":{"name":{"value":"progress path"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(20,0)"},"visible":{"value":false},"borderColor":{"key":"borderColor","value":"__lv_expr__:{Color,Color}:lively.graphics/color.js:{pt,rect}:lively.graphics/geometry-2d.js:Color.rgb(127,140,141)"},"metadata":{"value":{"__ref__":true,"id":"FAF9CE19-C43A-44B9-9DD3-7FE835B85E6C","rev":0}},"vertices":{"value":["__lv_expr__:{pt}:lively.graphics/geometry-2d.js:({position:pt(0,0),isSmooth:false,controlPoints:{next:pt(0,0),previous:pt(0,0)}})","__lv_expr__:{pt}:lively.graphics/geometry-2d.js:({position:pt(20,0),isSmooth:false,controlPoints:{next:pt(0,0),previous:pt(0,0)}})"]},"endMarker":{"value":{"__ref__":true,"id":"end-marker","rev":0}}},"lively.serializer-class-info":{"className":"Path","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"FAF9CE19-C43A-44B9-9DD3-7FE835B85E6C":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"arrow\\", _id: \\"f5486b4a5f64aed6413e16fdb4e4def6b7648b7f\\"})"}}},"Morph_9F3A6E54_E114_4CF9_AA38_944F2CE0F4F2":{"rev":970,"props":{"name":{"value":"stage lang"},"tooltip":{"value":""},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(23,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(58,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_1A07CB6A_F0B8_4602_A296_F03EFC4524E3","rev":588369},{"__ref__":true,"id":"Label_2F1CAF15_5D09_49AA_8CA3_0FBFB2A97764","rev":588370},{"__ref__":true,"id":"Ellipse_E95E52A9_2089_4898_80D5_07087D99E918","rev":967}]},"metadata":{"value":{"__ref__":true,"id":"3E7B492F-B627-4A58-A95A-1DAB2AC4DF92","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_1A07CB6A_F0B8_4602_A296_F03EFC4524E3":{"rev":588369,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"metadata":{"value":{"__ref__":true,"id":"D8D79DB4-A09D-4D27-93F9-23B4B72780FA","rev":0}},"textAndAttributes":{"value":["\uf1ab",{"__ref__":true,"id":"090417AA-EB20-4CA4-A54E-685DBB65402C","rev":0}]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,38,30]},"D8D79DB4-A09D-4D27-93F9-23B4B72780FA":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"A634F01B-3560-49F1-A7B0-270A8B32BAEB","rev":0}}}},"A634F01B-3560-49F1-A7B0-270A8B32BAEB":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"090417AA-EB20-4CA4-A54E-685DBB65402C":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"language"}}},"Label_2F1CAF15_5D09_49AA_8CA3_0FBFB2A97764":{"rev":588370,"props":{"name":{"value":"label"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(33,20)"},"metadata":{"value":{"__ref__":true,"id":"B7479850-7E65-43A9-BDC7-C72D21B171C1","rev":0}},"textAndAttributes":{"value":["lang",null]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,33,20]},"B7479850-7E65-43A9-BDC7-C72D21B171C1":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"A9D87177-5835-486C-A049-C15DFE18BE23","rev":0}}}},"A9D87177-5835-486C-A049-C15DFE18BE23":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_E95E52A9_2089_4898_80D5_07087D99E918":{"rev":967,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10.860351562499591,80.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_84DBB493_BED2_4832_87DA_6D3278287D90","rev":588373},{"__ref__":true,"id":"Label_41ED4B61_42BE_41C5_90DE_432DE30F81E3","rev":588374}]},"installedFonts":{"value":{"__ref__":true,"id":"BB4C42B3-695E-4AA9-8888-C5589D4EEAF2","rev":0}},"metadata":{"value":{"__ref__":true,"id":"982D0BAF-D8BF-454B-A42D-D1339535B867","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_84DBB493_BED2_4832_87DA_6D3278287D90":{"rev":588373,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500409,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"metadata":{"value":{"__ref__":true,"id":"4FDBD27C-3D81-43C1-9E24-F49FB1F1DC95","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"90FECB07-9DC0-4E3F-82C8-14F08645E368","rev":0}]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"4FDBD27C-3D81-43C1-9E24-F49FB1F1DC95":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"5C6D5E9D-E3C1-4B6F-BC55-27342CDFF160","rev":0}}}},"5C6D5E9D-E3C1-4B6F-BC55-27342CDFF160":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"90FECB07-9DC0-4E3F-82C8-14F08645E368":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_41ED4B61_42BE_41C5_90DE_432DE30F81E3":{"rev":588374,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"visible":{"value":false},"metadata":{"value":{"__ref__":true,"id":"5BE4E8CE-184A-43D9-B2BE-622396A25D41","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"234700E0-2697-48B6-B647-348117E424C8","rev":0}]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"5BE4E8CE-184A-43D9-B2BE-622396A25D41":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"7470518F-8F1E-4465-89F2-D1BC7ACB59B7","rev":0}}}},"7470518F-8F1E-4465-89F2-D1BC7ACB59B7":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"BB4C42B3-695E-4AA9-8888-C5589D4EEAF2":{"rev":0,"props":{"_rev":{"value":0}}},"982D0BAF-D8BF-454B-A42D-D1339535B867":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"3E7B492F-B627-4A58-A95A-1DAB2AC4DF92":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_13401D9B_2D4C_4B8C_B1D0_2A8930BB0506":{"rev":1064,"props":{"name":{"value":"stage ast"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(104,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(46.86035156249977,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Ellipse_6AACEB73_6726_433F_BE9D_644EA0055DA2","rev":1028},{"__ref__":true,"id":"Label_8CB15E66_68D7_47BE_92F2_C2EBE4FAEFB0","rev":588379},{"__ref__":true,"id":"Label_8BE783FD_45F4_4DA6_BC9B_16614EEE4FFE","rev":588380}]},"metadata":{"value":{"__ref__":true,"id":"AC345845-2811-4240-95A9-C4C8334543C9","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Ellipse_6AACEB73_6726_433F_BE9D_644EA0055DA2":{"rev":1028,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10.860351562499773,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_D270A45C_5DFA_4C51_A7DB_FF93268F6B12","rev":588377},{"__ref__":true,"id":"Label_5A449667_6523_4D4D_9DE0_1F855FD4396C","rev":588378}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"00E6D38D-2F02-4A48-8CBD-28FDC070863E","rev":0}},"metadata":{"value":{"__ref__":true,"id":"F8DF4173-6334-4222-B5BD-6ACC84CDD890","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_D270A45C_5DFA_4C51_A7DB_FF93268F6B12":{"rev":588377,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500227,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"CDF84F94-60F7-4598-AFDE-D54B5357F662","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"A7532805-4887-46DA-8E5C-384C4E85C2A5","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"CDF84F94-60F7-4598-AFDE-D54B5357F662":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"95F62A28-164C-4767-8F62-019C72E75468","rev":0}}}},"95F62A28-164C-4767-8F62-019C72E75468":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"A7532805-4887-46DA-8E5C-384C4E85C2A5":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_5A449667_6523_4D4D_9DE0_1F855FD4396C":{"rev":588378,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"70A0EF31-B93D-4F3B-B3BE-E2162858D21D","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"234700E0-2697-48B6-B647-348117E424C8","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"70A0EF31-B93D-4F3B-B3BE-E2162858D21D":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"430B57AF-49A6-4A8A-9682-439AEEBBFF2F","rev":0}}}},"430B57AF-49A6-4A8A-9682-439AEEBBFF2F":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"00E6D38D-2F02-4A48-8CBD-28FDC070863E":{"rev":0,"props":{"_rev":{"value":0}}},"F8DF4173-6334-4222-B5BD-6ACC84CDD890":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_8CB15E66_68D7_47BE_92F2_C2EBE4FAEFB0":{"rev":588379,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(23,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"06DA7B0B-6BEA-4641-9F81-298EA0BCCAA3","rev":0}},"textAndAttributes":{"value":["\uf1bb",{"__ref__":true,"id":"FCF3D487-BA78-4B28-BD49-81C21FF0080F","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,23,30]},"06DA7B0B-6BEA-4641-9F81-298EA0BCCAA3":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"76500270-F9A3-4F68-B1E0-19EB3125C455","rev":0}}}},"76500270-F9A3-4F68-B1E0-19EB3125C455":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"FCF3D487-BA78-4B28-BD49-81C21FF0080F":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"tree"}}},"Label_8BE783FD_45F4_4DA6_BC9B_16614EEE4FFE":{"rev":588380,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"38953B1A-C9E6-49AE-ABE0-128AD537E542","rev":0}},"textAndAttributes":{"value":["ast",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,24,20]},"38953B1A-C9E6-49AE-ABE0-128AD537E542":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"3BDBA834-1222-41A0-A64D-D9B1E63F9E86","rev":0}}}},"3BDBA834-1222-41A0-A64D-D9B1E63F9E86":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"AC345845-2811-4240-95A9-C4C8334543C9":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_2D3ECCAA_331C_4E74_B7FC_844563201FBA":{"rev":1158,"props":{"name":{"value":"stage source-transform"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(173.86035156249977,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(149,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_6401E5CF_AF89_4E71_ACC0_54332C14BEF4","rev":588381},{"__ref__":true,"id":"Ellipse_CAD3CCA2_BC8B_4FA3_AEEA_2C7AEE9C4387","rev":1140},{"__ref__":true,"id":"Label_12ACCA1A_8687_4251_A4C2_D499B9F79487","rev":588386}]},"metadata":{"value":{"__ref__":true,"id":"718C6C0F-2530-4001-AA82-DC653EE5B918","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_6401E5CF_AF89_4E71_ACC0_54332C14BEF4":{"rev":588381,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(129,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"2936E122-B46D-459A-9E32-0682CCA6F657","rev":0}},"textAndAttributes":{"value":["source transform",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,129,20]},"2936E122-B46D-459A-9E32-0682CCA6F657":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"9C47686A-1E73-412D-A065-0FB6D2606A1B","rev":0}}}},"9C47686A-1E73-412D-A065-0FB6D2606A1B":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_CAD3CCA2_BC8B_4FA3_AEEA_2C7AEE9C4387":{"rev":1140,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(61.930175781249815,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_2D206049_D429_4571_A0F5_DA94EB84C838","rev":588384},{"__ref__":true,"id":"Label_59A431B6_B182_4F0A_B8B3_D210FCDBF141","rev":588385}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"C9F306BF-5678-44AE-847B-C66DC53C559A","rev":0}},"metadata":{"value":{"__ref__":true,"id":"73EDDEB3-97C5-4FF2-85BA-264EE7A40E63","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_2D206049_D429_4571_A0F5_DA94EB84C838":{"rev":588384,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500355,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"991F798A-2EC4-4CE2-B2E1-C6EAF7C530A4","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"26F0AFC8-4E24-4DC2-ADF1-047A5ACE4555","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"991F798A-2EC4-4CE2-B2E1-C6EAF7C530A4":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"27F0AED8-4BF9-442A-8D38-878D1FC073D8","rev":0}}}},"27F0AED8-4BF9-442A-8D38-878D1FC073D8":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"26F0AFC8-4E24-4DC2-ADF1-047A5ACE4555":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_59A431B6_B182_4F0A_B8B3_D210FCDBF141":{"rev":588385,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"D3CF975D-33FE-4F42-9538-440B19533A48","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"896E7398-42A8-4204-93B9-7261231CA548","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"D3CF975D-33FE-4F42-9538-440B19533A48":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"67E7E901-04B8-446D-9E6F-783A4A86CBC8","rev":0}}}},"67E7E901-04B8-446D-9E6F-783A4A86CBC8":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"896E7398-42A8-4204-93B9-7261231CA548":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"C9F306BF-5678-44AE-847B-C66DC53C559A":{"rev":0,"props":{"_rev":{"value":0}}},"73EDDEB3-97C5-4FF2-85BA-264EE7A40E63":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_12ACCA1A_8687_4251_A4C2_D499B9F79487":{"rev":588386,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(55.5,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"30C7589C-510F-4217-B2CE-D8C6D7EA52D2","rev":0}},"textAndAttributes":{"value":["\uf079",{"__ref__":true,"id":"1196B65C-63C9-483F-B3C7-04087B76315F","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,38,30]},"30C7589C-510F-4217-B2CE-D8C6D7EA52D2":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"1D239A91-DB6E-4146-B791-2C67528AE420","rev":0}}}},"1D239A91-DB6E-4146-B791-2C67528AE420":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"1196B65C-63C9-483F-B3C7-04087B76315F":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"retweet"}}},"718C6C0F-2530-4001-AA82-DC653EE5B918":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_EAEED9CD_F1AB_4311_AE0B_14CC1DF82933":{"rev":1252,"props":{"name":{"value":"stage classes"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(345.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(76,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_FD405EB4_7764_47AF_92A4_F219335E6DAD","rev":588387},{"__ref__":true,"id":"Ellipse_398689D8_5137_421B_AEB2_22173E10DE1B","rev":1234},{"__ref__":true,"id":"Label_0F79DFB1_F36B_4081_B5C7_82588E835029","rev":588392}]},"metadata":{"value":{"__ref__":true,"id":"4832F2E1-8A3F-4A1B-958C-6322A274C4A2","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_FD405EB4_7764_47AF_92A4_F219335E6DAD":{"rev":588387,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(56,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"B397380B-F959-4533-B43A-51BF44E8FEEC","rev":0}},"textAndAttributes":{"value":["classes",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,56,20]},"B397380B-F959-4533-B43A-51BF44E8FEEC":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"3AC6EE25-98F3-4FD3-9194-5E1A1E6C0922","rev":0}}}},"3AC6EE25-98F3-4FD3-9194-5E1A1E6C0922":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_398689D8_5137_421B_AEB2_22173E10DE1B":{"rev":1234,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(25.43017578124988,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_4A5F5196_950B_4184_99C7_B8274E2E3522","rev":588390},{"__ref__":true,"id":"Label_3B36FAF3_6211_4FD5_9A8F_9AE8D373B61B","rev":588391}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"E902D2E9-8394-465B-8464-6239C65988BE","rev":0}},"metadata":{"value":{"__ref__":true,"id":"3C3DB48C-91BC-4877-A5FA-C4A5D235B344","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_4A5F5196_950B_4184_99C7_B8274E2E3522":{"rev":588390,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500234,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"A963A6AD-5A8F-4516-8A81-B6BFC13555CE","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"CF80FBA6-CEC3-417B-810F-F9B1CE6A67FB","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"A963A6AD-5A8F-4516-8A81-B6BFC13555CE":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"591FD5C9-42EA-420C-9C12-C8491AD703F9","rev":0}}}},"591FD5C9-42EA-420C-9C12-C8491AD703F9":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"CF80FBA6-CEC3-417B-810F-F9B1CE6A67FB":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_3B36FAF3_6211_4FD5_9A8F_9AE8D373B61B":{"rev":588391,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"6401B81D-FFA7-4E99-84C3-765418A7323B","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"721180CD-DB85-4A4D-AED8-2042651887A7","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"6401B81D-FFA7-4E99-84C3-765418A7323B":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"86DB83F1-764D-4E09-A8F1-3DDFDC9F73AD","rev":0}}}},"86DB83F1-764D-4E09-A8F1-3DDFDC9F73AD":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"721180CD-DB85-4A4D-AED8-2042651887A7":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"E902D2E9-8394-465B-8464-6239C65988BE":{"rev":0,"props":{"_rev":{"value":0}}},"3C3DB48C-91BC-4877-A5FA-C4A5D235B344":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_0F79DFB1_F36B_4081_B5C7_82588E835029":{"rev":588392,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(19,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"D9CA2C0B-708A-469A-ADAA-A51EB7D23F82","rev":0}},"textAndAttributes":{"value":["\uf0e8",{"__ref__":true,"id":"55F226EF-3782-4318-8027-02F8357D0072","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,38,30]},"D9CA2C0B-708A-469A-ADAA-A51EB7D23F82":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"C5BCD25E-8716-46B2-BD45-C0CE8437A5F8","rev":0}}}},"C5BCD25E-8716-46B2-BD45-C0CE8437A5F8":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"55F226EF-3782-4318-8027-02F8357D0072":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"sitemap"}}},"4832F2E1-8A3F-4A1B-958C-6322A274C4A2":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_E092F4E0_4675_4C1E_818E_EDEC6406CA47":{"rev":1346,"props":{"name":{"value":"stage vm"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(444.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(58,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_2627C3CF_07D0_4C07_B9D5_873923C0661E","rev":588393},{"__ref__":true,"id":"Ellipse_62E9BD8B_7913_4D40_B22F_0EE26AACC454","rev":1328},{"__ref__":true,"id":"Label_3899013E_9DB6_40A0_8C02_5D7C40044F40","rev":588398}]},"metadata":{"value":{"__ref__":true,"id":"926FFABA-8267-4788-88F7-F48015240B3B","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_2627C3CF_07D0_4C07_B9D5_873923C0661E":{"rev":588393,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(17,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"48B1C0B3-E96F-4161-B98B-ABE257C5592E","rev":0}},"textAndAttributes":{"value":["VM",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,24,20]},"48B1C0B3-E96F-4161-B98B-ABE257C5592E":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"71659892-CF60-4143-AFC7-698063A1DC94","rev":0}}}},"71659892-CF60-4143-AFC7-698063A1DC94":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_62E9BD8B_7913_4D40_B22F_0EE26AACC454":{"rev":1328,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(16.430175781249883,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_71B706D6_18BD_4E3A_9809_1C392584463A","rev":588396},{"__ref__":true,"id":"Label_15E9B9C8_8810_49EF_93DB_F6B207EE26BE","rev":588397}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"39640CB7-E2B6-430F-8314-AF4B7180C414","rev":0}},"metadata":{"value":{"__ref__":true,"id":"098049BC-159C-4D86-8A32-85AD6F5F2984","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_71B706D6_18BD_4E3A_9809_1C392584463A":{"rev":588396,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500231,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"E5BCD35E-4C9E-4599-B9A0-0D1F502DB521","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"7948916C-0466-4E14-A1F0-4A149B362F0C","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"E5BCD35E-4C9E-4599-B9A0-0D1F502DB521":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"F553ED75-B454-490C-9FE6-12326DEF245C","rev":0}}}},"F553ED75-B454-490C-9FE6-12326DEF245C":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"7948916C-0466-4E14-A1F0-4A149B362F0C":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_15E9B9C8_8810_49EF_93DB_F6B207EE26BE":{"rev":588397,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"8E90B50C-765A-4C3B-9012-62F840523206","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"78AD2769-7140-4F75-8621-097ED375547A","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"8E90B50C-765A-4C3B-9012-62F840523206":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"14534EBA-6967-40D7-9C35-D07EC25B0BBA","rev":0}}}},"14534EBA-6967-40D7-9C35-D07EC25B0BBA":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"78AD2769-7140-4F75-8621-097ED375547A":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"39640CB7-E2B6-430F-8314-AF4B7180C414":{"rev":0,"props":{"_rev":{"value":0}}},"098049BC-159C-4D86-8A32-85AD6F5F2984":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_3899013E_9DB6_40A0_8C02_5D7C40044F40":{"rev":588398,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"E3CE3584-6D1B-4169-B976-79D15F23A712","rev":0}},"textAndAttributes":{"value":["\uf085",{"__ref__":true,"id":"268D22CC-FE7F-45F9-A9BB-03149D07AFC9","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,38,30]},"E3CE3584-6D1B-4169-B976-79D15F23A712":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"1E9C3B84-F94A-4046-AA63-0A1186AB9B36","rev":0}}}},"1E9C3B84-F94A-4046-AA63-0A1186AB9B36":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"268D22CC-FE7F-45F9-A9BB-03149D07AFC9":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cogs"}}},"926FFABA-8267-4788-88F7-F48015240B3B":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_6C304E63_6AA6_4EC5_8AAB_1417148FCE53":{"rev":1440,"props":{"name":{"value":"stage modules"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(525.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(85,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_EB748F43_A82B_4332_9E04_F9EA8DBEA891","rev":588399},{"__ref__":true,"id":"Ellipse_6F98574D_2D61_49AE_A5E1_A364B4B60CD8","rev":1422},{"__ref__":true,"id":"Label_096B413B_22F2_49FD_AA7E_51549B2FBBB9","rev":588404}]},"metadata":{"value":{"__ref__":true,"id":"55F2CBD3-103F-43D5-A869-40C81C0BFAB1","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_EB748F43_A82B_4332_9E04_F9EA8DBEA891":{"rev":588399,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(65,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"62B2EB5F-7B7C-49D7-A6C5-255B7D2BA50B","rev":0}},"textAndAttributes":{"value":["modules",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,65,20]},"62B2EB5F-7B7C-49D7-A6C5-255B7D2BA50B":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"5F518F20-B37F-41D5-8270-A09A2FC7BA2E","rev":0}}}},"5F518F20-B37F-41D5-8270-A09A2FC7BA2E":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_6F98574D_2D61_49AE_A5E1_A364B4B60CD8":{"rev":1422,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(29.93017578124978,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_C0137436_5212_4E55_ABF4_D246167569A2","rev":588402},{"__ref__":true,"id":"Label_8596EE3B_AA0B_4E65_9EEA_93A5E42799D7","rev":588403}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"C27829D7-4E51-44DB-A5F9-0EDDB6516745","rev":0}},"metadata":{"value":{"__ref__":true,"id":"D71282A1-781E-49FC-A26A-DC2EA962F851","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_C0137436_5212_4E55_ABF4_D246167569A2":{"rev":588402,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500448,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"3E76B151-A95F-472E-A49B-EF5CF267BCF0","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"5EDE1971-8EB5-4E9E-ACA2-CDFB7B167F0E","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"3E76B151-A95F-472E-A49B-EF5CF267BCF0":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"391DFCEE-1F17-4CF7-A602-C119775780C6","rev":0}}}},"391DFCEE-1F17-4CF7-A602-C119775780C6":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"5EDE1971-8EB5-4E9E-ACA2-CDFB7B167F0E":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_8596EE3B_AA0B_4E65_9EEA_93A5E42799D7":{"rev":588403,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"A2A2056C-A660-4FF5-92A8-58621F385C40","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"05137B95-3BAE-45AA-88B5-8B824F328E13","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"A2A2056C-A660-4FF5-92A8-58621F385C40":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"D5D19AB2-A16A-4644-A5B4-D74ECA375BFB","rev":0}}}},"D5D19AB2-A16A-4644-A5B4-D74ECA375BFB":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"05137B95-3BAE-45AA-88B5-8B824F328E13":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"C27829D7-4E51-44DB-A5F9-0EDDB6516745":{"rev":0,"props":{"_rev":{"value":0}}},"D71282A1-781E-49FC-A26A-DC2EA962F851":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_096B413B_22F2_49FD_AA7E_51549B2FBBB9":{"rev":588404,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(23.5,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"EE678BC2-8AAE-4A8A-8E75-A8714CD044BE","rev":0}},"textAndAttributes":{"value":["\uf49e",{"__ref__":true,"id":"6C4DD94B-BD37-4E8F-BAE5-5B66B1702CFB","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,38,30]},"EE678BC2-8AAE-4A8A-8E75-A8714CD044BE":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"72F8BB44-72B0-427E-8C28-B122345FAC92","rev":0}}}},"72F8BB44-72B0-427E-8C28-B122345FAC92":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"6C4DD94B-BD37-4E8F-BAE5-5B66B1702CFB":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cogs"}}},"55F2CBD3-103F-43D5-A869-40C81C0BFAB1":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_0175A811_E616_4A81_91A0_A31335F24517":{"rev":1534,"props":{"name":{"value":"stage user"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(633.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(54,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_DA875B6F_B059_4E34_9D2C_63DA228D796C","rev":588405},{"__ref__":true,"id":"Ellipse_1A80BC91_17EC_4CF1_A8E6_9885B09BD993","rev":1516},{"__ref__":true,"id":"Label_36B115EB_0622_45C2_855F_D63E8F0532E2","rev":588410}]},"metadata":{"value":{"__ref__":true,"id":"715EFFC6-E50D-45D9-AB1E-C85E29346BD9","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_DA875B6F_B059_4E34_9D2C_63DA228D796C":{"rev":588405,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(34,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"C3FEC3EC-54E5-40CB-9BED-27467BDDA8F5","rev":0}},"textAndAttributes":{"value":["user",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,34,20]},"C3FEC3EC-54E5-40CB-9BED-27467BDDA8F5":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"14CF7E28-4526-4714-8EBA-150553DA5111","rev":0}}}},"14CF7E28-4526-4714-8EBA-150553DA5111":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_1A80BC91_17EC_4CF1_A8E6_9885B09BD993":{"rev":1516,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(14.430175781249776,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_B8CC9217_8D6E_4FDB_A0EC_8B0615805E75","rev":588408},{"__ref__":true,"id":"Label_AD459AA5_D166_4310_802F_D49A126C294B","rev":588409}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"7E338B08-B6AB-4FA5-AF7C-BFE089981269","rev":0}},"metadata":{"value":{"__ref__":true,"id":"629F8C1E-2F70-4937-B351-30FDBE11568A","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_B8CC9217_8D6E_4FDB_A0EC_8B0615805E75":{"rev":588408,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500451,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"943D6CEC-41F9-4841-925A-CF7B582833AD","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"85534015-8785-4799-AB08-4532731BC542","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"943D6CEC-41F9-4841-925A-CF7B582833AD":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"02B3A5D7-1586-4886-848E-ECCACF3F6A87","rev":0}}}},"02B3A5D7-1586-4886-848E-ECCACF3F6A87":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"85534015-8785-4799-AB08-4532731BC542":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_AD459AA5_D166_4310_802F_D49A126C294B":{"rev":588409,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"FBC68F3D-14D1-4B5C-8423-99155D594FC4","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"8D4C6C0E-475C-4BF8-A9C4-02C8E51C8192","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"FBC68F3D-14D1-4B5C-8423-99155D594FC4":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"9EA59775-6DAE-45FC-9848-5DBD458FDAEB","rev":0}}}},"9EA59775-6DAE-45FC-9848-5DBD458FDAEB":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"8D4C6C0E-475C-4BF8-A9C4-02C8E51C8192":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"7E338B08-B6AB-4FA5-AF7C-BFE089981269":{"rev":0,"props":{"_rev":{"value":0}}},"629F8C1E-2F70-4937-B351-30FDBE11568A":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_36B115EB_0622_45C2_855F_D63E8F0532E2":{"rev":588410,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(30,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"F0BC9079-23B3-4512-8831-3911BC3FBF81","rev":0}},"textAndAttributes":{"value":["\uf2bd",{"__ref__":true,"id":"EBEFFFF4-0199-4300-93E5-EBD674A956B0","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,30,30]},"F0BC9079-23B3-4512-8831-3911BC3FBF81":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"C288D7CB-BE3A-44D6-90E9-E4A8D37132A1","rev":0}}}},"C288D7CB-BE3A-44D6-90E9-E4A8D37132A1":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"EBEFFFF4-0199-4300-93E5-EBD674A956B0":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"user-circle"}}},"715EFFC6-E50D-45D9-AB1E-C85E29346BD9":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_4C57EE28_1834_4D8A_9090_92DA6279AC07":{"rev":1628,"props":{"name":{"value":"stage storage"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(710.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(77,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_58422FF5_F284_4792_B8FB_9620B79704D0","rev":588411},{"__ref__":true,"id":"Ellipse_802107F0_6789_4E3D_BD87_8A3B0388BFA8","rev":1610},{"__ref__":true,"id":"Label_99B1DB2D_3AC3_4B8A_9273_FF12098F562C","rev":588416}]},"metadata":{"value":{"__ref__":true,"id":"F5CBB018-6963-4540-9D52-5900DB029627","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_58422FF5_F284_4792_B8FB_9620B79704D0":{"rev":588411,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(57,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"59C140A4-AC57-494B-B6C3-CECB6179C221","rev":0}},"textAndAttributes":{"value":["storage",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,57,20]},"59C140A4-AC57-494B-B6C3-CECB6179C221":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"E1DC1482-883C-473B-984A-07B35042CE31","rev":0}}}},"E1DC1482-883C-473B-984A-07B35042CE31":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_802107F0_6789_4E3D_BD87_8A3B0388BFA8":{"rev":1610,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(25.93017578124978,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_DFE99555_8FD6_420C_AD68_813E5C5F31DB","rev":588414},{"__ref__":true,"id":"Label_FF1EFBFA_83C1_4560_9F81_79F2E851A73F","rev":588415}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"A818B9A4-E479-43A0-9D6A-D7D1512DC9FF","rev":0}},"metadata":{"value":{"__ref__":true,"id":"79176E69-E843-4695-B3CD-3AA794BC5E06","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_DFE99555_8FD6_420C_AD68_813E5C5F31DB":{"rev":588414,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500448,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"F9BF7F5E-4FF9-4BE8-96CB-659295729FF2","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"2DB69771-EF1C-49C9-8DEE-84AE85798289","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"F9BF7F5E-4FF9-4BE8-96CB-659295729FF2":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"2961D881-5941-407A-B413-E02975A7D260","rev":0}}}},"2961D881-5941-407A-B413-E02975A7D260":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"2DB69771-EF1C-49C9-8DEE-84AE85798289":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_FF1EFBFA_83C1_4560_9F81_79F2E851A73F":{"rev":588415,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"1493DF8D-EA57-424D-8EF2-350D6E6350DD","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"51EB50A8-FCD1-4125-B00B-2DE1BFB3CC68","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"1493DF8D-EA57-424D-8EF2-350D6E6350DD":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"F87A97C6-91AC-40D8-ADA9-82530701635A","rev":0}}}},"F87A97C6-91AC-40D8-ADA9-82530701635A":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"51EB50A8-FCD1-4125-B00B-2DE1BFB3CC68":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"A818B9A4-E479-43A0-9D6A-D7D1512DC9FF":{"rev":0,"props":{"_rev":{"value":0}}},"79176E69-E843-4695-B3CD-3AA794BC5E06":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_99B1DB2D_3AC3_4B8A_9273_FF12098F562C":{"rev":588416,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(25,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(27,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"35817097-297F-4994-AAFD-698CA0D7D1E1","rev":0}},"textAndAttributes":{"value":["\uf1c0",{"__ref__":true,"id":"BF0DD4B3-08B6-457B-84B0-14E84CEEE7AD","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,27,30]},"35817097-297F-4994-AAFD-698CA0D7D1E1":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"0AB9EEB0-8C8F-41FE-BA7D-508C104A829E","rev":0}}}},"0AB9EEB0-8C8F-41FE-BA7D-508C104A829E":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"BF0DD4B3-08B6-457B-84B0-14E84CEEE7AD":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"database"}}},"F5CBB018-6963-4540-9D52-5900DB029627":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_2B0417EC_CA67_4CCF_A348_D62E72293276":{"rev":1722,"props":{"name":{"value":"stage morphic"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(810.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(82,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_8B2F9C7A_DB0B_4452_A481_15741AD58C0B","rev":588417},{"__ref__":true,"id":"Ellipse_2F2E6DF1_C625_4297_9E26_E3E038269074","rev":1704},{"__ref__":true,"id":"Label_FD1B33B0_D391_462D_A542_BDE065E4F4AA","rev":588422}]},"metadata":{"value":{"__ref__":true,"id":"5C1C430D-358A-42AC-8C61-21DCC6FDEB24","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_8B2F9C7A_DB0B_4452_A481_15741AD58C0B":{"rev":588417,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(62,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"5212F1C7-E43B-48A2-BA1F-1705938697C8","rev":0}},"textAndAttributes":{"value":["morphic",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,62,20]},"5212F1C7-E43B-48A2-BA1F-1705938697C8":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"C5AE1EA3-7BF7-45B6-9657-3B8611E1D01C","rev":0}}}},"C5AE1EA3-7BF7-45B6-9657-3B8611E1D01C":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_2F2E6DF1_C625_4297_9E26_E3E038269074":{"rev":1704,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(28.43017578124978,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_AFE069B7_7BC3_480C_AF48_AAF8B975A5D5","rev":588420},{"__ref__":true,"id":"Label_FA773C95_FA65_4FEB_A3FD_07BC922139C9","rev":588421}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"83B5DDD8-E48F-4275-87FD-E85DAB99797D","rev":0}},"metadata":{"value":{"__ref__":true,"id":"9FD1C102-6D46-4AF8-B6D8-D39D9D3FF0E6","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_AFE069B7_7BC3_480C_AF48_AAF8B975A5D5":{"rev":588420,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500448,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"32332722-25E4-46BF-9C11-80896F609E15","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"39EF74D0-DCD7-4F54-B21C-3777A0DD595C","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"32332722-25E4-46BF-9C11-80896F609E15":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"6C955FED-7E9C-4674-B539-A69CF57FC1E5","rev":0}}}},"6C955FED-7E9C-4674-B539-A69CF57FC1E5":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"39EF74D0-DCD7-4F54-B21C-3777A0DD595C":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_FA773C95_FA65_4FEB_A3FD_07BC922139C9":{"rev":588421,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"8EAD8108-2546-40C8-B44C-391B197314F4","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"614A8298-662C-468B-9D3D-8B366B06F1F8","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"8EAD8108-2546-40C8-B44C-391B197314F4":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"D9A15A3A-85F8-4F6D-BCB9-B1864E7E1EDF","rev":0}}}},"D9A15A3A-85F8-4F6D-BCB9-B1864E7E1EDF":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"614A8298-662C-468B-9D3D-8B366B06F1F8":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"83B5DDD8-E48F-4275-87FD-E85DAB99797D":{"rev":0,"props":{"_rev":{"value":0}}},"9FD1C102-6D46-4AF8-B6D8-D39D9D3FF0E6":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_FD1B33B0_D391_462D_A542_BDE065E4F4AA":{"rev":588422,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(25.5,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(31,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"A6018526-E8CB-4436-86CD-D836EB4B57CA","rev":0}},"textAndAttributes":{"value":["\uf1b2",{"__ref__":true,"id":"59D17E8D-A622-4883-9B04-2223815A8B5A","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,31,30]},"A6018526-E8CB-4436-86CD-D836EB4B57CA":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"32A9AE04-5E06-4675-B6D5-CD082CA27F4B","rev":0}}}},"32A9AE04-5E06-4675-B6D5-CD082CA27F4B":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"59D17E8D-A622-4883-9B04-2223815A8B5A":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cube"}}},"5C1C430D-358A-42AC-8C61-21DCC6FDEB24":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_47DE3B3A_50D2_4AE6_8135_1798C563890B":{"rev":1816,"props":{"name":{"value":"stage world"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(915.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(64,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_713CCC39_59CA_4DFD_9360_D6C17BBEF12C","rev":588423},{"__ref__":true,"id":"Ellipse_779871D8_2EC9_454C_9F89_3E634F6B8BD1","rev":1798},{"__ref__":true,"id":"Label_32F4C735_874C_4535_A3B9_E2BDA3864AEB","rev":588428}]},"metadata":{"value":{"__ref__":true,"id":"1213E681-8F2D-48F3-9BB2-DC0C48D93C9C","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_713CCC39_59CA_4DFD_9360_D6C17BBEF12C":{"rev":588423,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(44,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"A684CA8E-3864-4F51-9274-059D47D0A597","rev":0}},"textAndAttributes":{"value":["world",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,44,20]},"A684CA8E-3864-4F51-9274-059D47D0A597":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"48BDF418-91C7-4A91-AC11-232358C3E6B0","rev":0}}}},"48BDF418-91C7-4A91-AC11-232358C3E6B0":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_779871D8_2EC9_454C_9F89_3E634F6B8BD1":{"rev":1798,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(19.430175781249662,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_32EAD9F4_7FF2_4B9B_A2A7_8E6C35748EA6","rev":588426},{"__ref__":true,"id":"Label_A89C60F6_EA19_4762_8748_16CCD325F33E","rev":588427}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"C404F8CE-F2B1-436E-AF0C-032E502FEEAD","rev":0}},"metadata":{"value":{"__ref__":true,"id":"6B875753-D4C4-46AB-B7B4-339791467F22","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_32EAD9F4_7FF2_4B9B_A2A7_8E6C35748EA6":{"rev":588426,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500679,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"7AD4134D-69B9-41AC-A7B0-1E5463C081C2","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"FE3B8808-B9B9-47BF-A10F-CB8BB89FFB31","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"7AD4134D-69B9-41AC-A7B0-1E5463C081C2":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"FBFBDAEC-AFA6-4CC9-B7F2-6D555244A97D","rev":0}}}},"FBFBDAEC-AFA6-4CC9-B7F2-6D555244A97D":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"FE3B8808-B9B9-47BF-A10F-CB8BB89FFB31":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_A89C60F6_EA19_4762_8748_16CCD325F33E":{"rev":588427,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"760546E2-9C8D-4495-BB72-6688DE038C96","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"6F305456-0B06-4D4E-999E-94C0F4F8CBC4","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"760546E2-9C8D-4495-BB72-6688DE038C96":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"3A5F5755-B5F0-4A9C-A245-68DA8449044C","rev":0}}}},"3A5F5755-B5F0-4A9C-A245-68DA8449044C":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"6F305456-0B06-4D4E-999E-94C0F4F8CBC4":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"C404F8CE-F2B1-436E-AF0C-032E502FEEAD":{"rev":0,"props":{"_rev":{"value":0}}},"6B875753-D4C4-46AB-B7B4-339791467F22":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_32F4C735_874C_4535_A3B9_E2BDA3864AEB":{"rev":588428,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(17,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(30,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"FB50D386-0702-44DC-ACF6-4660AD985F32","rev":0}},"textAndAttributes":{"value":["\uf7a2",{"__ref__":true,"id":"4EF7BFB5-09AA-46C5-BFA3-A25390E48123","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,30,30]},"FB50D386-0702-44DC-ACF6-4660AD985F32":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"63BD474F-CA9D-43CD-81F5-B1A34E0D1124","rev":0}}}},"63BD474F-CA9D-43CD-81F5-B1A34E0D1124":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"4EF7BFB5-09AA-46C5-BFA3-A25390E48123":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cube"}}},"1213E681-8F2D-48F3-9BB2-DC0C48D93C9C":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"45F7FA46-CD5C-4424-933D-F0663903BCEB":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"package loading progress indicator\\", _id: \\"f64ec4ab4ac2da6a67007e4f1ef82de8a479a583\\"})"}}},"7908C1CB-0692-49EB-A425-FA2CFB56CF1C":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"},"publishedAlias":{"value":"world-loading-screen"},"excludedPackages":{"value":["kld-intersections"]},"publishedLocation":{"value":"/lively.freezer/loading-screen/"}}}},"requiredVersion":">=0.1","packagesToRegister":[],"packages":{"local://lively-object-modules/":{"ModuleProgress":{"package.json":"{\\n  \\"name\\": \\"ModuleProgress\\",\\n  \\"version\\": \\"0.1.1-108\\",\\n  \\"lively\\": {\\n    \\"isObjectPackage\\": true\\n  },\\n  \\"dependencies\\": {},\\n  \\"devDependencies\\": {},\\n  \\"main\\": \\"index.js\\"\\n}","index.js":"import { Morph, stringToEasing, easings } from \\"lively.morphic\\";\\nimport { pt } from \\"lively.graphics/index.js\\";\\nimport { num, Path, promise, fun } from \\"lively.lang/index.js\\";\\n\\nexport default class ModuleProgress extends Morph {\\n  static get properties() {\\n    return {\\n      stages: {\\n        serialize: false,\\n        after: [\'submorphs\'],\\n        initialize() {\\n          this.whenRendered().then(() => {\\n            this.reset();\\n          })\\n        }\\n      }\\n    }\\n  }\\n\\n  relayout() {\\n    if (this.isComponent || !Path(\'owner.isWorld\').get(this)) return;\\n    this.bottomCenter = $world.visibleBounds().center().subXY(0, 100);\\n  }\\n\\n  reset() {\\n    let stageMorphs = this.getAllNamed(/stage/);\\n    this.stages = new Map(stageMorphs.map(stage => [stage, \\"not loaded\\"]));\\n    this.updateProgressVisualization();\\n    this.getAllNamed(/label/).map(m => {\\n      m._cachedTextBounds = null;\\n      m.fit()\\n    });\\n  }\\n\\n  updateProgressBar() {\\n    if (!this._lastWidth) return;\\n    this.relayout();\\n    let pb = this.get(\'progress path\');\\n    let p = stringToEasing(easings.inOutExpo)(num.clamp(Date.now() - this._timeStamp, 0, 1000) / 1000);\\n    let targetWidth = this._currentProgress;\\n    pb.width = num.interpolate(p, this._lastWidth, targetWidth);\\n  }\\n\\n  async fastLoadTest() {\\n    this.reset();\\n    let mods = [\'lively.lang\', \'lively.ast\', \'lively.source-transform\', \'lively.classes\', \'lively.vm\', \'lively.modules\', \'lively.user\', \'lively.storage\', \'lively.morphic\'];\\n    for (let mod of mods) {\\n      this.finishPackage({packageName: mod, loaded: true });\\n      await promise.delay(200);\\n    }\\n    \\n  }\\n\\n  // this.finishPackage({ packageName: \'lively.classes\', loaded: true });\\n  // this.reset()\\n\\n  finishPackage({\\n    packageName, frozen, loaded\\n  }) {\\n    let stageName = \'stage \' + packageName.replace(\'lively.\', \'\');\\n    let stageMorph = this.get(stageName);\\n    if (frozen) this.stages.set(stageMorph, \\"frozen\\");\\n    if (loaded) this.stages.set(stageMorph, \\"loaded\\");\\n    fun.debounceNamed(\'update progress\', 200, () => {\\n      this.updateProgressVisualization();\\n    })()\\n  }\\n\\n  updateProgressVisualization() {\\n    let progressPath = this.getSubmorphNamed(\'progress path\');\\n    let stages = this.getAllNamed(/stage/);\\n\\n    let stop = stages[0];\\n    stages.forEach(stage => {\\n      let checkmark = stage.get(\'checkmark\');\\n      let frozenIndicator = stage.get(\'frozen indicator\');\\n      let icon = stage.get(\'icon\');\\n      \\n      let state = this.stages.get(stage);\\n      if (state != \'not loaded\') {\\n        stop = checkmark;\\n        if (state == \'loaded\') {\\n          if (checkmark.visible) return;\\n          checkmark.animate({\\n            duration: 300,\\n            visible: true\\n          });\\n        }\\n        if (state == \'frozen\') {\\n          if (frozenIndicator.visible) return;\\n          frozenIndicator.animate({\\n            duration: 300,\\n            visible: true\\n          });\\n        }\\n        icon.opacity = 1;\\n      } else {\\n        checkmark.visible = false;\\n        frozenIndicator.visible = false;\\n        icon.opacity = .2;\\n      }\\n      \\n    });\\n\\n    let progress = this.localizePointFrom(pt(-20,0), stop).x;\\n    let dist = Math.max(20, progress - progressPath.left);\\n    let currentWidth = progressPath.width;\\n\\n    if (dist == 20) {\\n      progressPath.visible = false;\\n    } else {\\n      progressPath.visible = true;\\n    }\\n\\n    this._lastWidth = progressPath.width;\\n    this._timeStamp = Date.now();\\n    this._currentProgress = dist;\\n    \\n  }\\n  \\n}\\n\\n"},"PartialFreezing":{"package.json":"{\\n  \\"name\\": \\"PartialFreezing\\",\\n  \\"version\\": \\"0.1.1-28\\",\\n  \\"lively\\": {\\n    \\"isObjectPackage\\": true\\n  },\\n  \\"dependencies\\": {},\\n  \\"devDependencies\\": {},\\n  \\"main\\": \\"index.js\\"\\n}","index.js":"import { WorldLoadingScreen } from \\"./loading-page.js\\";\\nimport { WorldLandingPage, WorldPreview } from \\"./landing-page.js\\";\\n\\nexport {\\n  WorldLoadingScreen,\\n  WorldLandingPage,\\n  WorldPreview,\\n}","bootstrap.js":"/*global System*/\\nimport { resource, loadViaScript } from \'lively.resources\';\\nimport { promise, string, obj } from \'lively.lang\';\\nimport * as modulePackage from \'lively.modules\';\\nimport { easings } from \\"lively.morphic\\";\\nimport { adoptObject } from \\"lively.classes/runtime.js\\";\\nimport { Color } from \\"lively.graphics\\";\\n\\nlively.modules = modulePackage; // temporary modules package used for bootstrapping\\n\\nvar loginDone = true, doBootstrap = true, askBeforeQuit = true, worldLoaded = false;\\n\\nconst loc = document.location,\\n      query = resource(loc.href).query(),\\n      fastLoad = query.fastLoad == true;\\n\\nexport async function bootstrap({filePath, worldName, commit, loadingIndicator: li, progress, logError= (err) => console.log(err)}) {\\n  try {\\n    let loadConfig = JSON.parse(localStorage.getItem(\'lively.load-config\') || `{\\"lively.lang\\":\\"dynamic\\",\\"lively.ast\\":\\"dynamic\\",\\"lively.source-transform\\":\\"dynamic\\",\\"lively.classes\\":\\"dynamic\\",\\"lively.vm\\":\\"dynamic\\",\\"lively.modules\\":\\"dynamic\\",\\"lively.user\\":\\"dynamic\\",\\"lively.storage\\":\\"dynamic\\",\\"lively.morphic\\":\\"dynamic\\"}`);\\n    progress.opacity = 0;\\n    progress.hasFixedPosition = true;\\n    progress.openInWorld();\\n    progress.bottomCenter = li.topCenter;\\n    await polyfills();\\n    let loads = 0;\\n    let oldEnv = $world.env;\\n    doBootstrap ? await bootstrapLivelySystem(li, progress, loadConfig) : await fastPrepLivelySystem(li);\\n    li.label = \\"Loading lively.2lively...\\";\\n    await lively.modules.registerPackage(\'lively.2lively\');\\n    if (askBeforeQuit) {\\n      window.addEventListener(\'beforeunload\', function(evt) {\\n        var msg = \\"Really?\\";\\n        evt.returnValue = msg;\\n        return msg;\\n      }, true);\\n    }\\n\\n    let morphic;\\n    if (loadConfig[\'lively.morphic\'] == \'dynamic\' && !fastLoad) {\\n      li.label = \\"Loading lively.morphic...\\";\\n      morphic = await lively.modules.importPackage(\'lively.morphic\');\\n      progress.finishPackage({packageName: \'lively.morphic\', loaded: true })\\n    } else {\\n      morphic = lively.morphic;\\n    }\\n    \\n    li.label = \\"Loading world...\\";\\n    window.onresize = null;\\n    window.loadCompiledFrozenPart = lively.modules.module(\\"lively.morphic/partsbin.js\\")._recorder.loadPart\\n    lively.FreezerRuntime = false;\\n    const landingPageUrl = document.location;\\n    try {\\n      const opts = {\\n        verbose: true,\\n        localconfig: true,\\n        l2l: true,\\n        shell: true,\\n      };\\n      if (commit) {\\n        await morphic.World.loadFromCommit(commit, undefined, {\\n          ...opts,\\n          browserURL: \\"/worlds/load?name=\\" + commit.name\\n        });\\n      } else if (worldName) {\\n\\n        if (worldName == \'__newWorld__\') {\\n          let LivelyWorld, loadWorld; \\n          if (Object.values(loadConfig).every(v => v == \'frozen\') || fastLoad) {\\n            ({ LivelyWorld } = await lively.modules.module(\'lively.ide/world.js\').recorder);\\n            ({ loadWorld } = await lively.modules.module(\'lively.morphic/world-loading.js\').recorder);\\n          } else {\\n            ({ LivelyWorld } = await lively.modules.System.import(\'lively.ide/world.js\'));\\n            ({ loadWorld } = await lively.modules.System.import(\'lively.morphic/world-loading.js\'));\\n          }\\n          await loadWorld(new LivelyWorld({ openNewProjectPrompt: true }));\\n        } else {\\n          await morphic.World.loadFromDB(worldName, undefined, undefined, {\\n            ...opts,\\n            browserURL: \\"/worlds/load?name=\\" + worldName.replace(/\\\\.json($|\\\\?)/, \\"\\")\\n          }); \\n        }\\n      } else if (filePath) {\\n        await morphic.World.loadFromResource(\\n          resource(System.baseURL).join(filePath), \\n          undefined, {\\n            ...opts,\\n            browserURL: \\"/worlds/load?file=\\" + filePath\\n          }\\n        );\\n      }\\n      \\n    } catch(err) {\\n      window.__loadError__ = err;\\n    }\\n    window.addEventListener(\'popstate\', (event) => {\\n      if (document.location == landingPageUrl)\\n         document.location.reload();\\n    });\\n    li.remove();\\n    worldLoaded = true;\\n    lively.modules.removeHook(\'fetch\', \'logFetch\');\\n    await oldEnv.renderer.worldMorph.whenRendered();\\n    if (loadConfig[\'lively.morphic\'] == \'dynamic\' && !fastLoad) {\\n      oldEnv.renderer.clear();\\n      oldEnv.fontMetric.uninstall();\\n      oldEnv.eventDispatcher.uninstall(); \\n    }\\n  } catch(err) {\\n    if (err.originalErr) err = err.originalErr;  // do not hide vital information!\\n    var printed = err.message;\\n    if (err.stack !== err.message) {\\n      printed += err.stack.includes(err.message) ? err.stack.replace(err.message, \\"\\\\n\\") : err.stack;\\n    }\\n    logError(printed);\\n    throw err;\\n  }\\n}\\n\\nfunction fastPrepLivelySystem(li) {\\n  return Promise.resolve()\\n    .then(function() { li.status = \\"starting fast system preparation...\\"; })\\n    .then(function() { return resource(document.location.origin).join(\\"package-registry.json\\").readJson(); })\\n    .then(function (packageCached) {\\n      System[\\"__lively.modules__packageRegistry\\"] = lively.modules.PackageRegistry.fromJSON(System, packageCached);\\n      return System;\\n    })\\n    .then(function() { return loadViaScript(\\"/lively.user/dist/lively.user-client.js\\"); });\\n}\\n\\nlet loads = 0;\\nfunction installFetchHook(li) {\\n  lively.modules.installHook(\'fetch\', function logFetch(proceed, load) {\\n    loads++;\\n    li.status = `loading ${string.truncateLeft(load.name.replace(window.System.baseURL, \'\'), 25, \'...\')}`;\\n    li.progress = loads / (800 - 4 * Object.keys(extractedModules).length);\\n    li.center = $world.innerBounds().center();\\n    return proceed(load);\\n  });\\n}\\n\\nconst extractedModules = {};\\n\\nfunction extractModules(packageName) {\\n  Object.keys(lively.FreezerRuntime.registry)\\n        .filter(k => k.startsWith(packageName))\\n        .forEach(id => {\\n          extractedModules[window.origin + \\"/\\" + id] = {\\n              ...lively.FreezerRuntime.registry[id].exports\\n            };\\n        });\\n}\\n\\nasync function loadComponents() {\\n  await System.import(\\"lively.ide/world.js\\");\\n  await System.import(\\"lively.ide/editor-plugin.js\\");\\n  await System.import(\\"lively.ide/js/editor-plugin.js\\");\\n  await System.import(\\"lively.shell/index.js\\");\\n  await System.import(\\"lively.shell/client-command.js\\");\\n  await System.import(\\"lively.shell/client-resource.js\\");\\n  await System.import(\\"lively.bindings\\");\\n  extractModules(\\"lively.bindings\\");\\n  extractModules(\\"lively.shell\\");\\n  extractModules(\\"lively.ide\\");\\n  extractModules(\\"lively.components\\");\\n}\\n\\nfunction bootstrapLivelySystem(li, progress, loadConfig) {\\n  // for loading an instrumented version of the packages comprising the lively.system\\n  return Promise.resolve()\\n    .then(function() { li.status = \\"starting bootstrap process...\\"; })\\n    .then(async function() {\\n       // fixme: still expensive fetching of index.js files when registering each package on deserialization\\n       // fixme: freeze halos, components and lively.ide stuff to further speed up performance\\n    \\n       await progress.whenRendered();\\n       // before resetting systemjs, load all frozen modules\\n       if (loadConfig[\\"lively.lang\\"] == \'frozen\' || fastLoad) {\\n          let m = await System.import(\'lively.lang\');\\n          extractModules(\\"lively.lang\\");\\n          progress.finishPackage({packageName: \'lively.lang\', frozen: true });\\n          delete m._prevLivelyGlobal;\\n       }\\n       if (loadConfig[\'lively.ast\'] == \'frozen\' || fastLoad) {\\n         lively.ast = await System.import(\'lively.ast\'); \\n         extractModules(\\"lively.ast\\");\\n         progress.finishPackage({packageName: \'lively.ast\', frozen: true });\\n       }\\n       if (loadConfig[\'lively.source-transform\'] == \'frozen\' || fastLoad) {\\n         lively.sourceTransform = await System.import(\'lively.source-transform\');\\n         extractModules(\\"lively.source-transform\\");\\n         progress.finishPackage({packageName: \'lively.source-transform\', frozen: true });\\n       }\\n       if (loadConfig[\'lively.classes\'] == \'frozen\' || fastLoad) {\\n         await System.import(\'lively.classes/object-classes.js\'); \\n         lively.classes = await System.import(\'lively.classes\'); \\n         extractModules(\\"lively.class\\");\\n         progress.finishPackage({packageName: \'lively.classes\', frozen: true });\\n       }\\n       if (loadConfig[\'lively.vm\'] == \'frozen\' || fastLoad) {\\n         lively.vm = await System.import(\'lively.vm\');\\n         extractModules(\\"lively.vm\\");\\n         progress.finishPackage({packageName: \'lively.vm\', frozen: true });\\n       }\\n       if (loadConfig[\'lively.modules\'] == \'frozen\' || fastLoad) {\\n         // lively.modules is already fully imported due to the bootstrap, so no need to do that here\\n         await System.import(\\"lively.modules\\");\\n         extractModules(\\"lively.modules\\");\\n         progress.finishPackage({packageName: \'lively.modules\', frozen: true });\\n       }\\n       if (loadConfig[\'lively.user\'] == \'frozen\' || fastLoad) {\\n         await System.import(\'lively.user\');\\n         await System.import(\'lively.user/morphic/user-ui.js\');\\n         extractModules(\\"lively.user\\");\\n         progress.finishPackage({packageName: \'lively.user\', frozen: true });\\n       }\\n       if (loadConfig[\'lively.storage\'] == \'frozen\' || fastLoad) {\\n         await System.import(\'lively.storage\'); \\n         extractModules(\\"lively.storage\\");\\n         progress.finishPackage({packageName: \'lively.storage\', frozen: true });\\n       }\\n       if (loadConfig[\'lively.morphic\'] == \'frozen\' || fastLoad) {\\n         await System.import(\\"lively.resources\\");\\n         extractModules(\\"lively.resources\\");\\n         await System.import(\\"lively.2lively/client.js\\");\\n         await System.import(\\"lively.2lively/index.js\\");\\n         extractModules(\\"lively.2lively\\");\\n         await System.import(\\"lively.serializer2\\");\\n         extractModules(\\"lively.serializer2\\");\\n         await loadComponents();\\n         await System.import(\\"lively.halos\\");\\n         extractModules(\\"lively.halos\\");\\n         await System.import(\\"lively-system-interface\\");\\n         extractModules(\\"lively-system-interface\\");\\n         await System.import(\\"lively.graphics/index.js\\");\\n         extractModules(\\"lively.graphics\\");\\n         lively.morphic = await System.import(\\"lively.morphic/index.js\\");\\n         extractModules(\\"lively.morphic\\");\\n         progress.finishPackage({packageName: \'lively.morphic\', frozen: true });\\n       }\\n    })\\n    .then(async function () {\\n      let packageCached = await resource(document.location.origin).join(\\"package-registry.json\\").readJson();\\n      await loadViaScript(\'/lively.next-node_modules/babel-standalone/babel.js\');\\n      await loadViaScript(\'/lively.next-node_modules/systemjs/dist/system.src.js\');\\n      window.System.config({baseURL: document.location.origin});\\n      await loadViaScript(\'/lively.modules/systemjs-init.js\');\\n      var System = lively.modules.getSystem(\\"bootstrapped\\", {baseURL: document.location.origin});\\n      // System.debug = true;\\n      lively.modules.changeSystem(System, true);\\n      System[\\"__lively.modules__packageRegistry\\"] = lively.modules.PackageRegistry.fromJSON(System, packageCached);\\n      for (let mod in extractedModules) {\\n        System.set(mod, System.newModule(extractedModules[mod]));\\n        let m = lively.modules.module(mod);\\n        m._recorder = extractedModules[mod];\\n        m._frozenModule = true;\\n      }\\n      installFetchHook(li);\\n    })\\n    .then(async function() {\\n      if (loadConfig[\'lively.lang\'] == \'dynamic\' && !fastLoad) {\\n        return importPackageAndDo(\\n          \\"lively.lang\\",\\n          function(m) {\\n            progress.finishPackage({packageName: \'lively.lang\', loaded: true });\\n            delete m._prevLivelyGlobal;\\n          },\\n          li\\n        );\\n      }\\n     }).then(async function() {\\n      progress.animate({ opacity: 1, easing: easings.outExpo, duration: 300 });\\n      if (loadConfig[\'lively.ast\'] == \'dynamic\' && !fastLoad) {\\n        return importPackageAndDo(\\n          \\"lively.ast\\",\\n          function(m) {\\n            progress.finishPackage({packageName: \'lively.ast\', loaded: true });\\n            lively.ast = m;\\n          },\\n        li);\\n      }\\n    }).then(async function() {\\n      if (loadConfig[\'lively.source-transform\'] == \'dynamic\' && !fastLoad) {\\n        return importPackageAndDo(\\n          \\"lively.source-transform\\",\\n          function(m) {\\n            progress.finishPackage({packageName: \'lively.source-transform\', loaded: true });\\n            lively.sourceTransform = m;\\n          }, li);\\n       }\\n     }).then(async function() {\\n      if (loadConfig[\'lively.classes\'] == \'dynamic\' && !fastLoad) {\\n        return importPackageAndDo(\\n          \\"lively.classes\\",\\n          function(m) {\\n            progress.finishPackage({packageName: \'lively.classes\', loaded: true });\\n            lively.classes = m;\\n          }, li);\\n      }\\n    }).then(async function() {\\n      if (loadConfig[\'lively.vm\'] == \'dynamic\' && !fastLoad) {\\n        return importPackageAndDo(\\n          \\"lively.vm\\",\\n          function(m) {\\n            progress.finishPackage({packageName: \'lively.vm\', loaded: true })\\n            lively.vm = m;\\n          }, li); \\n      }\\n    }).then(async function() {\\n      function afterImport(m) {\\n        lively.modules = m;\\n        lively.modules.unwrapModuleLoad();\\n        lively.modules.unwrapModuleResolution();\\n        lively.modules.wrapModuleLoad();\\n        lively.modules.wrapModuleResolution();\\n        installFetchHook(li);\\n        let oldRegistry = System[\\"__lively.modules__packageRegistry\\"];\\n        delete System[\\"__lively.modules__packageRegistry\\"];\\n        let newRegistry = System[\\"__lively.modules__packageRegistry\\"] = m.PackageRegistry.ofSystem(System);\\n        Object.assign(newRegistry, obj.select(oldRegistry, [\\"packageMap\\", \\"individualPackageDirs\\", \\"devPackageDirs\\", \\"packageBaseDirs\\"]))\\n        newRegistry.resetByURL();\\n\\n        // All Module and Package objects that were instantiated\\n        // during bootstrapping still have the non instrumented\\n        // prototypes.\\n        // Since re-importing all of these affected packages with the\\n        // now fully instrumented module system would be too time consuming\\n        // it is faster to just walk through all module and package objects\\n        // and adopt each to use the instrumented version of the module and package class.\\n        \\n        // Note, that although the module and packacke classes themselves require the adjustemnt\\n        // the objects and classes of the packages *themselves* do not need that update. They\\n        // already went through the instrumentation, since that has also happened in the\\n        // static version of lively.modules that these came from.\\n        const loadedPackages = newRegistry.allPackages();\\n        const instrumentedPackageClass = lively.modules.module(\\"lively.modules/src/packages/package.js\\").recorder.Package\\n        loadedPackages\\n          .filter(pkg => !pkg.constructor[Symbol.for(\\"lively-module-meta\\")])\\n          .forEach(pkg => {\\n          adoptObject(pkg, instrumentedPackageClass);\\n        });\\n\\n        const loadedModules = Object.values(System[\\"__lively.modules__loadedModules\\"]);\\n        const instrumentedModuleInterface = lively.modules.module(\\"lively.modules/src/module.js\\").recorder.ModuleInterface;\\n        loadedModules\\n          .filter(mod => !mod.constructor[Symbol.for(\\"lively-module-meta\\")])\\n          .forEach(mod => {\\n          adoptObject(mod, instrumentedModuleInterface);\\n        });\\n      }\\n      if (loadConfig[\'lively.modules\'] == \'frozen\' || fastLoad) {\\n        System._scripting = lively.modules.scripting;\\n      } else {\\n        await importPackageAndDo(\\"lively.modules\\", afterImport, li);\\n      }\\n      progress.finishPackage({packageName: \'lively.modules\', loaded: true });  \\n    })\\n    .then(async function() {\\n       if (loadConfig[\'lively.user\'] == \'dynamic\' && !fastLoad) {\\n         return importPackageAndDo(\\n           \\"lively.user\\",\\n           function(m) {\\n             progress.finishPackage({packageName: \'lively.user\', loaded: true })\\n             lively.user = m;\\n           },\\n         li);\\n       } \\n     }).then(async function() {\\n      if (loadConfig[\'lively.storage\'] == \'dynamic\' && !fastLoad) {\\n        return importPackageAndDo(\\n            \\"lively.storage\\",\\n            function(m) {\\n              progress.finishPackage({packageName: \'lively.storage\', loaded: true })\\n              lively.storage = m;\\n            }, \\n        li);\\n      }\\n    })\\n}\\n\\nfunction importPackageAndDo(packageURL, doFunc, li) {\\n  var name = packageURL.split(\\"/\\").slice(-1)[0];\\n  li.label = `loading ${name}`;\\n  return lively.modules.importPackage(packageURL)\\n    .then(doFunc || function() {});\\n}\\n\\nfunction polyfills() {\\n  var loads = [];\\n  if (!(\\"PointerEvent\\" in window))\\n    loads.push(loadViaScript(`${document.location.origin}/lively.next-node_modules/pepjs/dist/pep.js`));\\n  if (!(\\"fetch\\" in window))\\n    loads.push(loadViaScript(`//cdnjs.cloudflare.com/ajax/libs/fetch/1.0.0/fetch.js`));\\n  return Promise.all(loads);\\n}","landing-page.js":"import { Morph, MorphicDB, World, easings, morph } from \\"lively.morphic\\";\\nimport { promise, string, date } from \\"lively.lang\\";\\nimport { Color, pt } from \\"lively.graphics\\";\\nimport { LoadingIndicator } from \\"lively.components\\";\\nimport { resource } from \\"lively.resources\\";\\n\\nexport class WorldPreview extends Morph {\\n\\n  static get properties() {\\n    return {\\n      deleteWorldPrompt: {\\n        set(spec) {\\n          if (!spec.isMorph) spec = morph(spec);\\n          this.setProperty(\'deleteWorldPrompt\', spec)\\n        }\\n      },\\n      versionContainer: {\\n        set(spec) {\\n          if (!spec.isMorph) spec = morph(spec);\\n          this.setProperty(\'versionContainer\', spec)\\n        }\\n      },\\n      ui: {\\n        readOnly: true,\\n        get() {\\n          return {\\n            previewContainer: this.getSubmorphNamed(\'preview container\'),\\n            versionContainer: this.getSubmorphNamed(\'version container\'),\\n            preview: this.getSubmorphNamed(\'preview\'),\\n            timestamp: this.getSubmorphNamed(\'timestamp\'),\\n            title: this.getSubmorphNamed(\'title\'),\\n            description: this.getSubmorphNamed(\'description\'),\\n            openButton: this.getSubmorphNamed(\'open button\'),\\n            versionButton: this.getSubmorphNamed(\'version button\'),\\n            spinner: this.getSubmorphNamed(\'spinner\'),\\n            deleteButton: this.getSubmorphNamed(\'delete button\'),\\n            closeVersionsButton: this.getSubmorphNamed(\'close versions button\'),\\n            versionList: this.getSubmorphNamed(\'version list\'),\\n            deleteWorldPrompt: this.getSubmorphNamed(\'delete world prompt\'),\\n            cancelDeleteButton: this.getSubmorphNamed(\'cancel delete button\'),\\n            confirmDeleteButton: this.getSubmorphNamed(\'confirm delete button\')\\n          }\\n        }\\n      }\\n    }\\n  }\\n\\n  \\n  relayout() {\\n     // fit to world\\n    this.setBounds(this.world().visibleBounds());\\n  }\\n\\n  onLoad() {\\n    this.ui.spinner.visible = false; // this causes the fan to spin\\n  }\\n\\n  async displayPreview() {\\n    await this.initWithCommit(this._commit);\\n  }\\n  \\n  async initWithCommit(commit) {\\n    let { preview, timestamp, title, description,\\n          previewContainer } = this.ui;\\n    this.opacity = .5;\\n    previewContainer.opacity = 0;\\n    await this.whenRendered();\\n    this._commit = commit;\\n    preview.imageUrl = commit.preview;\\n    timestamp.value = [commit.author.name, {fontSize: 13, fontWeight: \'bold\', paddingTop: \'1px\'}, date.format(commit.timestamp, \' - d.m.yy HH:MM\'), {\\n      fontWeight: \'bold\', fontSize: 12, paddingTop: \'2px\'\\n    }];\\n    title.value = string.truncate(commit.name, 18, \'...\')\\n    description.value = commit.description;\\n    await this.whenRendered();\\n    previewContainer.opacity = 1;\\n    this.animate({ opacity: 1, duration: 300 });\\n  }\\n\\n  async openAnimated(targetBounds = $world.visibleBounds()) {\\n    let copy = morph({\\n       ...this.spec(), \\n       reactsToPointer: false,\\n       renderOnGPU: true,\\n       submorphs: [this.ui.spinner.spec()]\\n    }).openInWorld();\\n    copy.hasFixedPosition = true;\\n    copy.globalPosition = this.globalPosition;\\n    copy.opacity = 0;\\n    await copy.whenRendered();\\n    await copy.animate({ opacity: 1, duration: 300 });\\n    let duration = 500;\\n    copy.dropShadow = false;\\n    copy.animate({\\n      bounds: targetBounds,\\n      borderRadius: 0,\\n      duration,\\n      easing: easings.inOutQuint\\n    });\\n    copy.respondsToVisibleWindow = true;\\n    await copy.ui.spinner.animate({\\n      center: copy.innerBounds().center(),\\n      duration,\\n      easing: easings.inOutQuint\\n    });\\n    await promise.delay(1000);\\n    return copy;\\n  }\\n\\n  async openWorld() {\\n    await this.openAnimated();\\n    this.loadWorld();\\n  }\\n\\n  async loadWorld() {\\n    let { _id, name } = this._commit;\\n    let dbQuery = \'\'; // fixme\\n    if (lively.FreezerRuntime) {\\n      // open the world via url redirect\\n      // rms: instead of redirect load within world\\n      //window.location = `/worlds/${name}${dbQuery}`;\\n      let li = LoadingIndicator.open(\'...starting bootstrap process...\', {\\n        animated: true, delay: 1000,\\n      });\\n      this.transitionToLivelyWorld(\\n        document.location.origin,\\n        this._commit,\\n        li\\n      );\\n      return;\\n    } else {\\n      let li = LoadingIndicator.open(\'loading \' + name);\\n      await World.loadFromCommit(_id, undefined, {morphicDB: MorphicDB.default});\\n      li.remove();\\n    }\\n  }\\n  \\n  async transitionToLivelyWorld(baseURL, commit, loadingIndicator) {\\n    let progress = await resource(\'part://partial freezing/package loading progress indicator\').read();\\n    let { bootstrap } = await System.import(\'local://lively-object-modules/PartialFreezing/bootstrap.js\');\\n    await bootstrap({ commit, loadingIndicator, progress });\\n  }\\n\\n  async showVersions() {\\n    let duration = 200, easing = easings.inOutExpo;\\n    let { previewContainer } = this.ui;\\n    let versionContainer = this.versionContainer;\\n    this.addMorph(versionContainer);\\n    versionContainer.reactsToPointer = versionContainer.visible = true;\\n    versionContainer.initializeFromStartCommit(this._commit);\\n    this.animate({\\n      width: 515, duration, easing\\n    });\\n    previewContainer.animate({\\n      opacity: 0, duration\\n    });\\n    await versionContainer.animate({\\n      opacity: 1, duration\\n    });\\n    previewContainer.reactsToPointer = previewContainer.visible = false;\\n  }\\n\\n  async hideVersions() {\\n    let duration = 200, easing = easings.inOutExpo;\\n    let { previewContainer } = this.ui;\\n    let versionContainer = this.versionContainer;\\n    previewContainer.reactsToPointer = previewContainer.visible = true;\\n    this.animate({\\n      width: 245, duration, easing\\n    });\\n    previewContainer.animate({\\n      opacity: 1, duration\\n    });\\n    await versionContainer.animate({\\n      opacity: 0, duration\\n    });\\n    versionContainer.reset();\\n    versionContainer.remove();\\n  }\\n\\n  toggleDeleteButton(active) {\\n    this.ui.deleteButton.visible = active;\\n  }\\n\\n  onHoverIn(evt) {\\n    this.toggleDeleteButton(true);\\n  }\\n\\n  onHoverOut(evt) {\\n    this.toggleDeleteButton(false);\\n  }\\n\\n  tryToDelete() {\\n    let duration = 100;\\n    let { previewContainer } = this.ui;\\n    let deleteWorldPrompt = this.deleteWorldPrompt;\\n    this.addMorph(deleteWorldPrompt);\\n    deleteWorldPrompt.visible = true;\\n    deleteWorldPrompt.animate({\\n      top: 0, left: 0,\\n      opacity: 1, duration\\n    });\\n    previewContainer.animate({\\n      opacity: .3, duration\\n    })\\n  }\\n\\n  confirmDelete() {\\n    \\n  }\\n\\n  async cancelDelete() {\\n    let duration = 300;\\n    let { previewContainer } = this.ui;\\n    let deleteWorldPrompt = this.deleteWorldPrompt;\\n    previewContainer.animate({\\n      opacity: 1, duration\\n    })\\n    await deleteWorldPrompt.animate({\\n      opacity: 0, duration\\n    });\\n    deleteWorldPrompt.remove();\\n  }\\n\\n  onMouseUp(evt) {\\n    let { openButton, versionButton, deleteButton, \\n          closeVersionsButton, cancelDeleteButton,\\n          confirmDeleteButton } = this.ui;\\n    // we want to initialize this from the spec, so we dont use connections\\n    switch (evt.targetMorph) {\\n      case openButton:\\n        this.openWorld();\\n        break;\\n      case versionButton:\\n        this.showVersions();        \\n        break;\\n      case deleteButton:\\n        this.tryToDelete();\\n        break;\\n      case closeVersionsButton:\\n        this.hideVersions();\\n        break;\\n      case confirmDeleteButton:\\n        this.confirmDelete();\\n        break;\\n      case cancelDeleteButton:\\n        this.cancelDelete();\\n        break;\\n    }\\n  }\\n  \\n}\\n\\nexport class WorldLandingPage extends Morph {\\n\\n  static get properties() {\\n    return {\\n      title: {\\n        derived: true,\\n        get() {\\n          return `lively.next (${document.location.hostname})`;\\n        }\\n      },\\n      loadingScreen: {}\\n    }\\n  }\\n\\n  get __loading_html__() {\\n    return `\\n      <style>\\n        ${this.loadingScreen.cssDeclaration}\\n      </style>\\n      ${this.loadingScreen.html}\\n    `;\\n  }\\n\\n  get __head_html__() {\\n    return `\\n<link type=\\"text/css\\" rel=\\"stylesheet\\" id=\\"lively-font-awesome\\" href=\\"/lively.morphic/assets/font-awesome/css/font-awesome.css\\">\\n<link type=\\"text/css\\" rel=\\"stylesheet\\" id=\\"lively-font-inconsolata\\" href=\\"/lively.morphic/assets/inconsolata/inconsolata.css\\">\\n<style type=\\"text/css\\" id=\\"WorldLandingPage_7068CDA9_749E_4EC1_9BC4_50DF06EAA2BA-Nunito\\">@import url(\\"https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap\\");</style>`;\\n  }\\n\\n  get commands() {\\n    return [\\n       {\\n         name: \'resize on client\',\\n         exec: () => {\\n           $world._cachedWindowBounds = null;\\n           document.body.style.overflowY = \'hidden\';\\n           this.setBounds($world.windowBounds());\\n           this.getSubmorphNamed(\'globe\').extent = this.extent;\\n           this.ensureUserFlap();\\n           let worldList = this.getSubmorphNamed(\'a project browser\');\\n           if (worldList) worldList.center = this.extent.scaleBy(.5);\\n         }\\n       }\\n    ]\\n  }\\n\\n  async ensureUserFlap() {\\n    if ($world.get(\'user flap\')) return;\\n    let flap = await resource(\'part://SystemIDE/user flap master/dark\').read();\\n    flap.showMorphControls = false;\\n    flap.visible = false;\\n    flap.openInWorld();\\n    flap.hasFixedPosition = true;\\n    flap.get(\'fast load toggler\').refresh()\\n    await promise.delay(1000);\\n    flap.animate({ visible: true });\\n  }\\n\\n  beforePublish() {\\n    let worldList = this.getSubmorphNamed(\'a project browser\');\\n    if (worldList) worldList.remove();\\n  }\\n\\n  async onLoad() {\\n    await this.whenRendered();\\n    if (!lively.FreezerRuntime) return;\\n    $world.fill = Color.black;\\n    document.documentElement.style.background = Color.black;\\n    this.showWorldList().then(() => document.getElementById(\'loading-screen\').remove())\\n    this.getSubmorphNamed(\'globe\').fullyLoaded();\\n    let ld = document.getElementById(\'loading screen\');\\n    if (ld) ld.remove();\\n  }\\n  \\n  async showWorldList() {\\n    let dashboard = this.getSubmorphNamed(\'a poject browser\') || this.addMorph(await resource(\'part://partial freezing/project browser\').read());\\n    dashboard.name = \'a project browser\';\\n    this.reset();\\n    dashboard.showCloseButton = false;\\n    dashboard.extent = pt(1110,800).minPt(this.extent.subPt(pt(50,150)));\\n    dashboard.animate({\\n      opacity: 1, duration: 300\\n    });\\n    dashboard.animate({\\n      center: this.innerBounds().center(), duration: 500\\n    })\\n    dashboard.displayWorlds();\\n    dashboard.hasFixedPosition = false;\\n  }\\n\\n  reset() {\\n    let dashboard = this.getSubmorphNamed(\'a project browser\');\\n    dashboard.opacity = 0;\\n    //dashboard.scale = 1.2;\\n    dashboard.center = this.innerBounds().center();\\n  }\\n}","loading-page.js":"import { Morph, MorphicDB } from \\"lively.morphic\\";\\nimport { LoadingIndicator } from \\"lively.components\\";\\nimport { resource } from \\"lively.resources\\";\\n\\nexport class WorldLoadingScreen extends Morph {\\n\\n  static get properties() {\\n    return {\\n      title: {\\n        derived: true,\\n        get() {\\n          return `lively.next (${document.location.hostname})`;\\n        }\\n      },\\n    }\\n  }\\n\\n  get commands() {\\n    return [\\n       {\\n         name: \'resize on client\',\\n         exec: () => {\\n           $world._cachedWindowBounds = null;\\n           this.setBounds($world.windowBounds());\\n           this.get(\'json target indicator\').topRight = this.innerBounds().insetBy(25).topRight();\\n         }\\n       }\\n    ]\\n  }\\n\\n  get __head_html__() {\\n    return `<style type=\\"text/css\\">@import url(\\"https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap\\");</style>`;\\n  }\\n  \\n  async onLoad() {\\n    if (lively.FreezerRuntime) {\\n      const progressBar = this.get(\'package loading indicator\');\\n      progressBar.startStepping(\'updateProgressBar\');\\n      document.body.style.backgroundColor = \'black\';\\n      const worldName = this.getWorldName();\\n      const filePath = this.getFilePath();\\n      if (filePath) {\\n        this.get(\'json target indicator\').animate({\\n          opacity: 1, duration: 300\\n        });\\n      }\\n      await this.transitionToLivelyWorld({ worldName, filePath }, progressBar);\\n      progressBar.stopStepping();\\n    }\\n  }\\n\\n  async transitionToLivelyWorld({ worldName, filePath }, progressBar) {\\n    let progress = this.get(\'package loading indicator\');\\n    let { bootstrap } = await System.import(\'local://lively-object-modules/PartialFreezing/bootstrap.js\');\\n\\n    if (worldName && worldName != \\"__newWorld__\\" && !(await MorphicDB.default.exists(\'world\', worldName)).exists)\\n      return this.indicateMissingWorld(true);\\n\\n    if (filePath && !await resource(document.location.origin).join(filePath).exists())\\n      return this.indicateMissingWorld(true);\\n\\n    const loadingIndicator = LoadingIndicator.open(\'...starting bootstrap process...\', {\\n      animated: true, delay: 1000,\\n    });\\n    progressBar.opacity = 1;\\n    \\n    await bootstrap({worldName, filePath, loadingIndicator, progress});\\n  }\\n\\n  getWorldName() {\\n    if (document.location.href.endsWith(\'worlds/new\')) return \'__newWorld__\';\\n    var loc = document.location,\\n        query = resource(loc.href).query(),\\n        worldNameMatch = query.name,\\n        worldName = worldNameMatch || false;\\n     return worldName;\\n  }\\n\\n  getFilePath() {\\n    var loc = document.location,\\n        query = resource(loc.href).query();\\n     return query.file || false;\\n  }\\n\\n  // this.indicateMissingWorld(false)\\n\\n  indicateMissingWorld(active) {\\n    this.get(\'package loading indicator\').visible = !active;\\n    this.get(\'broken heart\').visible = this.get(\'broken heart\').isLayoutable = active;\\n  }\\n}"}}},"packageDepMap":{"local://lively-object-modules/ModuleProgress":[],"local://lively-object-modules/PartialFreezing":[]},"preview":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAGCUlEQVR4Xu2c+08TWRTHvy0tj5JCeZQCVcQAKiwIahUxur/wN7s/k3V3w6PLawFhYSnbWtouIETLqwW6OaM1nbbTe0lubm7CmYQfdM6cc+bzuefOCBUX+DCKgMuobrgZsBDDFgELYSGGETCsHZ4QFmIYAcPa4QlhIYYRMKwdnhAWYhgBw9rhCWEhhhEwrB2eEBZiGAHD2uEJYSGGETCsHZ4QFmIYAcPa4QlhIYYRMKwdnhAWYhgBw9pxFQqFOQDPDevrzrZTFPLqzhIw7MZZCAsxjIBh7fCEsBDDCBjWDk8ICzGMgGHt8ISwEMMIGNYOTwgLMYyAYe3whLAQwwgY1g5PCAsxjIBh7fCEsBDDCBjWDk+IaUJuCoUjFArthvV1Z9txXd/c3AD8CwRMWQEsxBQT3/uwCSkUCj/ac7mqf2SrGON0vvT+bhN72+tkcsvEUF2ZOJmY2+ai+HKONiGHh4doaGhAPp9He3vlY+X4+BgejwcXFxcIBoPCtZVJp9Hk81n7ob+lRRhPATI1ZGIol0x9mVwyMVTv7OwMl5eX1lcoFKqAXQRQi7NNyMHBAerr63F9fe0oxO12WwW7urqEgNOpFJqamkDX3EaIqAYBEsVQczL1ZXLJxBSF0GLNkZDubkchtTjzM0S4rPQG2IRcXV1ZW5LooBczWqGig/bd0j2SVk9jY2PNy2R7yOVyOD8/tyaaptDpoHx0yNyXUw7Z+y1eL1uzWpxNyOrqKna2t9EVCqE7FMLg0JCtx83NTSwvLeHp+DhGRkZs5zY2NrC7u2sBr3O7cXxygkgkgng8jv8yGbR3dIAgkqTrqyuMT0wgHA7bclDtdCaDbDaLq3weF5eXaGtrw/T0dAWraDSKT4mEtTVMTU3Z8+zsWHW/fvkC73dhtE2MDA9jdGzMFhuLxbCwsIDm5mY8fvSo4p5nZmaQ2t/HwOAgjo6OcHZ6iheRCPr7+215fnn/3uqV6hADX3Mz6urqKnojTqlUyjpH99gbDttYVmxZBIyA0IqqtvLKV32xq/K/L/2z7BtKaa7S62Xe6GSmlWKq5arVX2kftKDowR0IBBzL0Xmfzydqx/F8hZB4MgkUgL579tVbzJBMp5HL5fGw775U0czhIbKnpxh48EAqvhj0z94eAq2t6Ghrc7xOJkam/tdsFpmDQzx80GdNd7Xj88kJ6GuwbDLKYy9zOSSS+wj3dKOpxvbsxNEmJLqyiu5gJ1xuN/bTabycmLDV+7i9jXqvF36/HzuxGN5EIjUhk1y62Z5QCOtbW3g3OSkl5dfZOTwdGUbs3zju9fYg2NFRcZ1MjEx9WvWLa2sYGRrCysZG1R4/H58glohbMlY2PuLn18738fv8AsaGn2BtcwtvXlbnU4ujTchv8/N4++rbB+E/zM3j3aT9Q/Gzfy7i9Ytv/3OBgNRqjGKW19YtsPQCUJpbZOWPaNSSnT09QzKdwuOBgYpLZGJk6mcODkAP13BPD5b+WsPE6E8V29pObA/Bzg60+v0oZVDe1OnZORL7STwZHMR2LIZQZyda/P6K3mtxtAlJplLYS3yyvrN1v7cXfWUPXXpQr2/9DXedG+2BgFW41kHjO7+4BI/Xg8b6BjwbGxW5sM7PLy/j5voGuXzeUbpMjGz9D7Nz8Hq9oLcpp1VNC5B2B3oGTT5/5ngftPA8dR5L8tuyBV28qBZH/neI1BLRF8RC9LGWqkRCjl2A83ucVBoOUkWAf2KoiqSiPCxEEUhVaViIKpKK8rAQRSBVpWEhqkgqysNCFIFUlYaFqCKpKA8LUQRSVRoWooqkojwsRBFIVWlYiCqSivKwEEUgVaVhIapIKsrDQhSBVJWGhagiqSgPC1EEUlUaFqKKpKI8LEQRSFVpSIj4w7yqqnEeIQH+RcpCRHoDWIhe3sJqLESISG8AC9HLW1iNhQgR6Q1gIXp5C6uxECEivQEsRC9vYTUWIkSkN4CF6OUtrMZChIj0BrAQvbyF1ViIEJHeABail7ewGgsRItIbwEL08hZWYyFCRHoDWIhe3sJqLESISG8AC9HLW1iNhQgR6Q1gIXp5C6v9D5QuIHVMOtAWAAAAAElFTkSuQmCC"}');
lively.resources={resource:p,loadViaScript:M};lively.morphic={loadMorphFromSnapshot:ps}}}});