System.register("./__root_module__-a4bfb546.js kld-intersections ./index-8925a56f.js ./index-5e766f8e.js ./index-164fc5db.js ./color-picker-60ab8665.js ./editor-plugin-2a7f8211.js ./index-fa81bc5d.js ./editor-plugin-fbf0d9b8.js ./index-a97ff283.js".split(" "),function(){var ta,cb,mb,Sb,Jb,sd,vc,wd,wc,Cc,Gc,Cd,pe,Je,ce,Qb,pc,ld,Rb,xd,Hd,Dc,bc,Ib,gc,sc,dd,bd,oc,$a,fb,ya,Ca,Aa,xa,Oa,wb,dc,Ya,jb,Za,U;return{setters:[function(va){ta=va.aw;cb=va.an;mb=va.aC;Sb=va.aa;Jb=va.a3;sd=va.ax;vc=va.au;wd=va.aj;
wc=va.C;Cc=va.a2;Gc=va.a6;Cd=va.$;pe=va.a_;Je=va.P;ce=va.a8;Qb=va.aD;pc=va.ap;ld=va.aZ;Rb=va.as;xd=va.aq;Hd=va.ab;Dc=va.bp;bc=va.br;Ib=va.bO;gc=va.b4;sc=va.bk;dd=va.aP;bd=va.l;oc=va.a1;$a=va.bP;fb=va.aY;ya=va.a$;Ca=va.at;Aa=va.a4;xa=va.aV;Oa=va.av;wb=va.bQ},function(){},function(){},function(){},function(va){dc=va.d;Ya=va.s;jb=va.I;Za=va.M},function(){},function(va){U=va.I},function(){},function(){},function(){}],execute:function(){function va(ab){var zc=ab.sourceObj,Fc=ab.targetObj;zc.isMorph&&Fc.isMorph?
(zc.show(),Fc.show(),Sa.showConnector&&Sa.showConnector(zc,Fc)):Sa.show(String(ab))}function M(ab){var zc=ab.sourceObj,Fc=ab.sourceAttrName,Xa=ab.targetObj,db=ab.targetMethodName,hb=ab.getConverter();ab=ab.getUpdater();return Sa.printConnectionElements(zc,Fc,Xa,db,hb,ab)}function da(ab,zc,Fc,Xa,db,hb){ab="/* global connect, source, target */\nconnect(source, '"+zc+"', target, '"+Xa+"'";if(db||hb)ab+=", {\n";db&&(ab+="  converter: "+db);db&&hb&&(ab+=",");db&&(ab+="\n");hb&&(ab+="  updater: "+hb+"\n");
if(db||hb)ab+="}";return ab+");"}function Ia(ab,zc){var Fc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xa){if(1==Xa.nextAddress)return Xa.yield(Sa.InteractiveMorphSelector.selectMorph(),2);Fc=Xa.yieldResult;return Xa.return(Fc?Sa.interactiveConnectGivenSourceAndTarget(ab,zc,Fc):null)})}function Wa(ab,zc,Fc,Xa){var db,hb,Rc,qd,Xd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hc){switch(hc.nextAddress){case 1:db=Fc&&Fc.world().targetDataBindings(Fc);hb=ab.world();if(!db||
!db.length)return hb.setStatusMessage("connect canceled"),hc.return();if(zc){hc.jumpTo(2);break}Rc=[{isListItem:!0,string:"[Enter custom attribute..]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(Sa.arr.flatten(ab.world().targetDataBindings(ab)).map(function(Id){return{isListItem:!0,string:Id.signature||Id.name,value:Id}})));return hc.yield(hb.listPrompt(["Select Source Attribute\n",{},"Choose the attribute of the morph that is supposed to invoke the connection. This can be a method, property or a custom signal that is invoked upon the morph.",
{paddingTop:"10px",fontSize:14,textAlign:"left",fontWeight:"normal"}],Rc,{filterable:!0}),3);case 3:zc=hc.yieldResult;if("canceled"==zc.status)return hc.return();zc=zc.selected[0];zc=zc.custom?"sourceAttribute":zc.name;case 2:return qd=[{isListItem:!0,string:"[Enter custom attribute...]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(Sa.arr.flatten(db).map(function(Id){return{isListItem:!0,value:Id,string:Id.signature||Id.name}}))),hc.yield(hb.listPrompt(["Select Target Attribute\n",{},"Choose the attribute of the morph that is supposed to invoked once the connection is triggered. This can be either a method or a property of the morph. When selecting a property, keep in mind that the value of the source attribute will be assigned to the property or passed to the method as an argument.",
{fontSize:14,textAlign:"left",fontWeight:"normal",paddingTop:"10px"}],qd,{filterable:!0}),4);case 4:Xd=hc.yieldResult;if("canceled"==Xd.status)return hc.return();Xd=Xd.selected[0];return hc.yield(Sa.interactivelyEvaluateConnection({sourceObj:ab,sourceAttr:zc,targetObj:Fc,targetAttr:Xd.custom?"targetAttribute":Xd.name,onConnect:Xa,prompt:"Edit and confirm connection:"}),0)}})}function Zb(ab,zc,Fc,Xa){zc=void 0===zc?"confirm connection":zc;var db,hb,Rc,qd,Xd,hc,Id;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pc){db=
ab;hb=db.sourceObj;Rc=db.sourceAttrName;qd=db.targetObj;Xd=db.targetMethodName;hc=ab.getConverter();Id=ab.getUpdater();return Pc.return(Sa.interactivelyEvaluateConnection({sourceObj:hb,sourceAttr:Rc,targetObj:qd,targetAttr:Xd,converter:hc,updater:Id,prompt:zc,highlight:Fc,onConnect:Xa}))})}function Oc(ab,zc,Fc,Xa,db){Xa=void 0===Xa?{}:Xa;db=Sa.rect(0).sides.concat(Sa.rect(0).corners);Fc=Fc||new Sa.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Sa.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Sa.Color.transparent,
nativeCursor:"auto"},end:{fill:Sa.Color.orange}}},Xa,{hasFixedPosition:!0}));Fc.startPoint.attachTo(ab,"rightCenter");zc.isMorph?(Xa=zc.globalBounds().partNameNearest(db,ab.globalPosition),ab.globalPosition.equals(zc.globalBounds().partNamed(Xa))&&zc.globalBounds().partNameNearest(Sa.arr.without(db,Xa),ab.globalPosition),Fc.endPoint.attachTo(zc,"leftCenter")):(db=ab.globalBounds().topRight().addPt(Sa.pt(100,0)),zc=Sa.morph({type:"label",value:zc.toString(),styleClasses:["Tooltip"],padding:Sa.rect(8,
4)}).openInWorld(db),zc.position=ab.world().bounds().translateForInclusion(zc.bounds()).topLeft(),Sa.once(Fc,"remove",zc,"remove"),Fc.endPoint.attachTo(zc,"leftCenter"));return Fc}function Ub(ab){var zc,Fc,Xa,db,hb,Rc,qd,Xd,hc,Id,Pc,Jd,fa,Qa,Ja,bb,H,aa,Ma,tb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Lb){switch(Lb.nextAddress){case 1:zc=ab;Fc=zc.sourceObj;Xa=zc.sourceAttr;db=zc.targetObj;hb=zc.targetAttr;Rc=zc.converter;qd=zc.updater;Xd=zc.prompt;hc=void 0===zc.highlight?!0:zc.highlight;
Id=zc.onConnect;Pc="lively://lively.bindings-interactive-connect/x"+Fc.id;Jd={context:window,format:"esm",targetModule:Pc,classTransform:Sa.classToFunctionTransform};fa=Sa.printConnectionElements(Fc,Xa,db,hb,Rc,qd);db.isMorph&&Fc.isMorph&&(Qa=db.propertiesAndPropertySettings().properties[hb]||{type:typeof db[hb]},Ja=Qa.type,bb=Fc.propertiesAndPropertySettings().properties[Xa]||{type:typeof Fc[Xa]},H=bb.type,H!==Ja&&(Xd=["Edit and confirm connection:\n",{},"Source: ",{fontSize:14,fontWeight:"normal"},
Fc.toString(),{fontSize:14,fontWeight:"normal",fontStyle:"italic"},"\nTarget: ",{fontSize:14,fontWeight:"normal"},db.toString(),{fontSize:14,fontWeight:"normal",fontStyle:"italic"}]));aa={};Object.assign(lively.modules.module(Pc).recorder,(aa.source=Fc,aa.target=db,aa.connect=vc,aa.once=wd,aa[Xa]=Fc[Xa],aa));if(!Xd){Ma=fa;Lb.jumpTo(2);break}return Lb.yield($world.editPrompt(Xd,{input:fa,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:Jd,animated:!1}),
3);case 3:if(Ma=Lb.yieldResult,!Ma)return $world.setStatusMessage("connect canceled"),Lb.return();case 2:return Lb.yield(lively.vm.runEval(Ma,Jd),4);case 4:tb=Lb.yieldResult;if(tb.isError)return $world.logError(tb.value),Lb.return(Ub({sourceObj:Fc,sourceAttr:Xa,targetObj:db,targetAttr:hb,converter:Rc,updater:qd,prompt:"confirm connection",highlight:hc,onConnect:Id}));hc&&($world.setStatusMessage("connected!",Sa.Color.green),Sa.interactivelyShowConnection(tb.value));"function"===typeof Id&&Id(tb);
Lb.jumpToEnd()}})}var vb=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");vb.Inspector=U;var pd=function(ab){var zc=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),Fc=zc.hasOwnProperty("ProtoInspector")&&"function"===typeof zc.ProtoInspector?zc.ProtoInspector:zc.ProtoInspector=function(Xa){Xa&&Xa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(Fc,ab,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProtoInspector"}},
{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],zc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoInspector",version:"0.1.1-0"}}},{start:68,end:210})}(vb.Inspector);pd=vb.ProtoInspector;vb.default=pd;var $c=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");$c.Morph=cb;$c.touchInputDevice=
mb;$c.easings=Sb;$c.pt=Jb;$c.fun=sd;$c.connect=vc;vb=function(ab){var zc=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),Fc=zc.hasOwnProperty("MorphicSideBar")&&"function"===typeof zc.MorphicSideBar?zc.MorphicSideBar:zc.MorphicSideBar=function(Xa){Xa&&Xa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(Fc,ab,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"onWorldResize",value:function(Xa){Xa=void 0===
Xa?!0:Xa;if(this.respondsToVisibleWindow){var db=$world.visibleBounds(),hb=navigator.standalone&&$c.touchInputDevice?25:0;this.height=db.height-hb;this.top=hb+db.top();hb=this.get("horizontal resizer");hb.height=this.height;hb.top=0;Xa&&(this.visible?this.topLeft=db.topLeft():this.topRight=db.topLeft())}}},{key:"switchMode",value:function(Xa){"inspector"==Xa&&this.showInspector();"connections"==Xa&&this.showConnections()}},{key:"showInspector",value:function(){this.get("inspector").visible=!0;this.get("connections tree").visible=
!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(Xa){var db=this,hb,Rc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qd){switch(qd.nextAddress){case 1:hb=$world.visibleBounds();Rc=navigator.standalone&&$c.touchInputDevice?25:0;db.height=hb.height-Rc;db.top=Rc+hb.top();if(Xa)return $world.addMorph(db,$world.get("lively top bar")),db.topRight=hb.topLeft(),db.attachToWorld($world),db.visible=
!0,qd.yield(db.whenRendered(),5);db.detachFromWorld($world);return qd.yield(db.animate({opacity:0,topRight:hb.topLeft(),duration:300}),4);case 4:db.visible=!1;db.remove();qd.jumpTo(0);break;case 5:return db.onWorldResize(!1),db.get("scene graph").adjustProportions(),qd.yield(db.animate({opacity:1,easing:$c.easings.outCirc,topLeft:hb.topLeft(),duration:300}),6);case 6:db.get("scene graph").refresh(),qd.jumpToEnd()}})}},{key:"attachToWorld",value:function(Xa){$c.connect(Xa,"onChange",this,"onHierarchyChange",
{garbageCollect:!0});$c.connect(Xa,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});$c.connect(Xa,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(Xa){var db=this;Xa.attributeConnections.forEach(function(hb){hb.targetObj===db&&hb.disconnect()})}},{key:"selectNode",value:function(Xa){this.getSubmorphNamed("scene graph").selectMorphInTarget(Xa);this.getSubmorphNamed("connections tree").inspectConnectionsOf(Xa)}},{key:"onHierarchyChange",value:function(Xa){var db=
this,hb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rc){if("addMorphAt"===Xa.selector||"removeMorph"===Xa.selector||"name"===Xa.prop){hb=db._sceneGraph||(db._sceneGraph=db.getSubmorphNamed("scene graph"));if(!hb||!hb.owner.visible||Xa.target&&Xa.target.isHand||Xa.target&&hb.ignoreMorph(Xa.target)||Xa.args&&!Xa.args[0].isHalo&&hb.ignoreMorph(Xa.args[0])||Xa.target.ownerChain().find(function(qd){return hb.ignoreMorph(qd)}))return Rc.return();$c.fun.debounceNamed("scene-graph-update",
50,function(){return hb.refresh()})()}Rc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],zc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-76"}}},{start:226,end:3668})}($c.Morph);
vb=$c.MorphicSideBar;$c.default=vb;var Sa=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");Sa.interactivelyShowConnection=va;Sa.printConnection=M;Sa.printConnectionElements=da;Sa.interactiveConnectGivenSource=Ia;Sa.interactiveConnectGivenSourceAndTarget=Wa;Sa.interactivelyReEvaluateConnection=Zb;Sa.visualizeConnection=Oc;Sa.interactivelyEvaluateConnection=Ub;Sa.connect=vc;Sa.once=wd;Sa.Color=wc;Sa.rect=Cc;Sa.pt=Jb;Sa.arr=Gc;Sa.promise=Cd;Sa.properties=pe;Sa.Path=Je;Sa.obj=ce;Sa.HorizontalLayout=
Qb;Sa.Morph=cb;Sa.VerticalLayout=pc;Sa.StyleSheet=ld;Sa.Icon=Rb;Sa.GridLayout=xd;Sa.morph=Hd;Sa.TreeData=Dc;Sa.Tree=bc;Sa.Leash=Ib;Sa.LabeledCheckBox=gc;Sa.SearchField=sc;Sa.showConnector=dc;Sa.show=Ya;Sa.InteractiveMorphSelector=jb;Sa.MorphHighlighter=Za;Sa.Window=dd;Sa.classToFunctionTransform=bd;Sa.interactivelyShowConnection=va;Sa.interactivelyShowConnection=va;Sa.printConnection=M;Sa.printConnection=M;Sa.printConnectionElements=da;Sa.printConnectionElements=da;Sa.interactiveConnectGivenSource=
Ia;Sa.interactiveConnectGivenSource=Ia;Sa.interactiveConnectGivenSourceAndTarget=Wa;Sa.interactiveConnectGivenSourceAndTarget=Wa;Sa.interactivelyReEvaluateConnection=Zb;Sa.interactivelyReEvaluateConnection=Zb;Sa.visualizeConnection=Oc;Sa.visualizeConnection=Oc;Sa.interactivelyEvaluateConnection=Ub;Sa.interactivelyEvaluateConnection=Ub;var nb=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");nb.Tree=bc;nb.TreeData=Dc;nb.morph=Hd;nb.Icon=Rb;nb.HorizontalLayout=Qb;nb.easings=Sb;nb.Morph=
cb;nb.Color=wc;nb.Rectangle=oc;nb.rect=Cc;nb.pt=Jb;nb.connect=vc;nb.noUpdate=$a;nb.disconnect=fb;nb.disconnectAll=ya;nb.once=wd;nb.arr=Gc;nb.num=Ca;nb.fun=sd;nb.tree=Aa;nb.promise=Cd;nb.ConnectionHalo=_missingExportShim;nb.getClassName=xa;vb=function(ab){var zc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Fc=zc.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof zc.InteractiveTreeContainer?zc.InteractiveTreeContainer:zc.InteractiveTreeContainer=function(Xa){Xa&&Xa[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(Fc,ab,[{key:"onChildRemoved",value:function(Xa){}},{key:"onChildAdded",value:function(Xa){}},{key:"toggleSelected",value:function(Xa){if(this.tree){var db=this.tree,hb=db.selectionFontColor,Rc=db.nonSelectionFontColor;this.submorphs.filter(function(qd){return!qd._isControlElement&&qd.styleClasses.includes("Label")}).forEach(function(qd){qd.fontColor=Xa?hb:Rc})}}},{key:"onGrab",value:function(Xa){var db=this.tree,hb=this.node;
this.fill=nb.Color.gray.withA(.5);this.fontColor=db.selectionFontColor;this.opacity=.8;ta._get(Object.getPrototypeOf(Fc.prototype),"onGrab",this).call(this,Xa);hb&&(this.toggleSelected(!1),db.collapse(hb),db.treeData.parentNode(hb).container.onChildRemoved(this),this._data=db.treeData.remove(hb),hb.container.target.remove(),db.update(!0))}},{key:"wantsToBeDroppedOn",value:function(Xa){this.showPreviewOn(Xa);return!0}},{key:"showPreviewOn",value:function(Xa){if(Xa.isContainer)var db=Xa.tree;Xa.isTree&&
(db=Xa);db&&db.showDropPreviewFor&&db.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(Xa){var db=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hb){if(1==hb.nextAddress)return db.tree.treeData.add(Xa._data,db.node,db.node.children[0]),db.tree.uncollapse(db.node),db.tree.treeData.remove(db.tree._previewNode),hb.yield(db.tree.whenRendered(),2);db.tree.update(!0);db.onChildAdded(Xa);hb.jumpToEnd()})}},{key:"onBeingDroppedOn",value:function(Xa,db){var hb=this;debugger;
this.tree._dropInProgress=!0;ta._get(Object.getPrototypeOf(Fc.prototype),"onBeingDroppedOn",this).call(this,Xa,db);Xa=function(){hb.fill=nb.Color.gray.withA(.5);hb.opacity=1;hb.tree._dropInProgress=!1;hb.tree.refresh()};db.isTree?db.insertAtPlaceholder(this).then(Xa):db.isContainer?db.insertAsChild(this).then(Xa):Xa()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:nb.Color.transparent},isContainer:{get:function(){return!0}},
tree:{},node:{readOnly:!0,get:function(){var Xa=this,db=this.tree.treeData;return db&&db.asList().find(function(hb){return hb.container===Xa})}}}}}],zc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1104"}}},{start:498,end:2975})}(nb.Morph);nb.InteractiveTreeContainer=vb;nb.InteractiveTreeContainer=
vb;nb.InteractiveTreeContainer=vb;vb=function(ab){var zc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Fc=zc.hasOwnProperty("InteractiveTreeData")&&"function"===typeof zc.InteractiveTreeData?zc.InteractiveTreeData:zc.InteractiveTreeData=function(Xa){Xa&&Xa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(Fc,ab,[{key:"display",value:function(Xa){return[Xa.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(Xa){return Xa.isCollapsed}},
{key:"collapse",value:function(Xa,db){Xa.isCollapsed=db}},{key:"getChildren",value:function(Xa){var db=this;return Xa.isLeaf?null:Xa.children.filter(function(hb){return hb&&(db.filterActive?hb.visible:!0)})}},{key:"isLeaf",value:function(Xa){var db=this;return!Xa.children||0==Xa.children.filter(function(hb){return hb&&(db.filterActive?hb.visible:!0)}).length}},{key:"add",value:function(Xa,db,hb){db=void 0===db?this.root:db;db.children||(db.children=[]);hb?nb.arr.pushAt(db.children,Xa,db.children.indexOf(hb)):
db.children.push(Xa);db.isLeaf=!1}},{key:"replace",value:function(Xa,db){var hb=this.parentNode(Xa);Xa=hb.children.indexOf(Xa);hb.children[Xa]=db}},{key:"next",value:function(Xa){var db=this.parentNode(Xa);return db&&db.children[db.children.indexOf(Xa)+1]}},{key:"isBefore",value:function(Xa,db){this.next(Xa)===db}},{key:"isAfter",value:function(Xa,db){this.next(db)===Xa}},{key:"addBefore",value:function(Xa,db){this.add(Xa,this.parentNode(db),db)}},{key:"addAfter",value:function(Xa,db){var hb=this.parentNode(db);
db=hb.children.indexOf(db)+1;this.add(Xa,hb,hb.children[db])}},{key:"remove",value:function(Xa){var db=this.parentNode(Xa);if(db)return nb.arr.remove(db.children,Xa),db.children==[]&&(db.children=null),Xa}},{key:"filter",value:function(Xa,db){db=void 0===db?1:db;var hb=this,Rc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qd){if(1==qd.nextAddress)return qd.yield(hb.uncollapseAll(function(Xd,hc){return hc<db+1}),2);Rc=hb.filterActive;hb.filterActive=!1;hb.asListWithIndexAndDepth(!1).reverse().forEach(function(Xd){var hc=
Xd.node;if(0==Xd.depth)return hc.visible=!0;hc.visible=Xa(hc);hc.visible||hc.isCollapsed||!hc.children.find(function(Id){return Id.visible})?hc.container.opacity=1:(hc.visible=!0,hc.container.opacity=.5);return hc.visible});hb.filterActive=Rc;qd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeData"}}],zc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"InteractiveTree",version:"0.1.1-1104"}}},{start:2984,end:5441})}(nb.TreeData);nb.InteractiveTreeData=vb;nb.InteractiveTreeData=vb;nb.InteractiveTreeData=vb;vb=function(ab){var zc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Fc=zc.hasOwnProperty("InteractiveTree")&&"function"===typeof zc.InteractiveTree?zc.InteractiveTree:zc.InteractiveTree=function(Xa){Xa&&Xa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ta(Fc,ab,[{key:"update",value:function(Xa){var db=this;ta._get(Object.getPrototypeOf(Fc.prototype),"update",this).call(this,Xa);this.treeData&&this.relayoutContainers();Xa&&this.embeddedMorphs.forEach(function(hb){hb.isContainer&&(hb.fill=nb.Color.transparent,hb.fontFamily=db.fontFamily,hb.fontSize=db.fontSize)})}},{key:"onDrop",value:function(Xa){ta._get(Object.getPrototypeOf(Fc.prototype),"onDrop",this).call(this,Xa);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",
value:function(Xa){}},{key:"onDropHoverUpdate",value:function(Xa){}},{key:"onDropHoverOut",value:function(Xa){}},{key:"onHoverOut",value:function(Xa){var db=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hb){ta._get(Object.getPrototypeOf(Fc.prototype),"onHoverOut",db).call(db,Xa);db._previewNode&&db._previewNode.container.world()&&db.treeData.remove(db._previewNode);db.resetContainerSelection();db.update(!0);hb.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(Xa){var db=
this,hb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rc){if(1==Rc.nextAddress)return hb=db.treeData.parentNode(db._previewNode),db.treeData.replace(db._previewNode,Xa._data),db.treeData.remove(db._previewNode),Rc.yield(db.whenRendered(),2);db.update(!0);hb.container.onChildAdded(Xa);Rc.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var Xa=this;if(!this._scrollingUp){this._scrollingUp=!0;var db=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(hb){if(1==
hb.nextAddress)return Xa._scrollingUp&&0<Xa.scroll.y?hb.yield(Xa.animate({scroll:Xa.scroll.subXY(0,30),duration:300,easing:nb.easings.linear}),3):(Xa._scrollingUp=!1,hb.jumpTo(0));db();hb.jumpToEnd()})};db()}}},{key:"scrollDownSlowly",value:function(){var Xa=this;if(!this._scrollingDown){this._scrollingDown=!0;var db=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(hb){if(1==hb.nextAddress)return Xa._scrollingDown&&Xa.scroll.y<Xa.scrollExtent.y-Xa.height?hb.yield(Xa.animate({scroll:Xa.scroll.addXY(0,
30),duration:300,easing:nb.easings.linear}),3):(Xa._scrollingDown=!1,hb.jumpTo(0));db();hb.jumpToEnd()})};db()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(Xa){Xa.isContainer&&(Xa.fill=nb.Color.transparent)})}},{key:"showDropPreviewFor",value:function(Xa){var db=this;Xa=this.localize(Xa.globalBounds().center());var hb=this.textPositionFromPoint(Xa),Rc=this.treeData.asListWithIndexAndDepth(function(Jd){Jd=
Jd.node;return Jd!=db._previewNode&&Jd.container.world()}),qd=(Rc.find(function(Jd){return Jd.i-1===hb.row})||{}).node,Xd=qd&&qd.container,hc=this.ensurePlaceholder(),Id=!!hc.container.world(),Pc=Xa.subPt(this.scroll).subPt(this.scrollbarOffset);10>Pc.y?this.scrollUpSlowly():Pc.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!Xd){if(Rc.length>hb.row||nb.arr.last(this.treeData.root.children)===hc)return;this.treeData.remove(hc);this.treeData.add(hc);
this.update(!0)}if(Xd){Rc=this.textLayout.boundsFor(this,hb);if(4>Math.abs(Rc.top()-Xa.y)){if(this.treeData.isBefore(hc,qd))return;this.treeData.remove(hc);this.treeData.addBefore(hc,qd)}else if(4>Math.abs(Rc.bottom()-Xa.y)&&(qd.isCollapsed||this.treeData.isLeaf(qd))){if(this.treeData.isAfter(hc,qd))return;this.treeData.remove(hc);this.treeData.addAfter(hc,qd)}else{Xd.fill=nb.Color.gray;if(!Id)return;this.treeData.remove(hc)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var Xa=nb.pt(this.width-
100,this.document.getLine(0).height);this._previewNode||(this._previewNode={container:nb.morph({acceptsDrops:!1,reactsToPointer:!1,fill:nb.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=Xa;return this._previewNode}},{key:"relayoutContainers",value:function(){var Xa=this;this.charBoundsFromTextPosition({row:0,column:6});this.textLayout.charBoundsOfRow(this,0).map(function(db){return db.height});this.treeData.asListWithIndexAndDepth().forEach(function(db){var hb=
db.node;db=db.i;hb.container.nativeCursor="grab";hb.container.width=Xa.width-25-hb.container.left;hb.container.toggleSelected&&hb.container.toggleSelected(db==Xa.selectedIndex)});this.anchors.forEach(function(db){return db.position=db.position})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTree"}}],zc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"InteractiveTree",version:"0.1.1-1104"}}},{start:5450,end:10824})}(nb.Tree);nb.InteractiveTree=vb;nb.InteractiveTree=vb;nb.InteractiveTree=vb;vb=function(ab){var zc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Fc=zc.hasOwnProperty("SceneGraphTree")&&"function"===typeof zc.SceneGraphTree?zc.SceneGraphTree:zc.SceneGraphTree=function(Xa){Xa&&Xa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return ta(Fc,ab,[{key:"beforePublish",value:function(){this.submorphs=[];this.reset()}},{key:"selectMorphInTarget",value:function(Xa){var db=this.treeData.asList().find(function(hb){return hb.container.target===Xa});db&&this.selectedNode!=db&&this.selectPath(this.treeData.pathOf(db))}},{key:"onLoad",value:function(){var Xa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(db){if(1==db.nextAddress)return db.yield(Xa.whenRendered(),2);if(3!=db.nextAddress){if(Xa.ownerChain().find(function(hb){return hb.isComponent}))return db.return();
Xa.submorphs=[];return db.yield(Xa.whenRendered(),3)}Xa.get("inspector").makeEditorVisible(!0);Xa.get("inspector").makeEditorVisible(!1);Xa.setTarget($world);db.jumpToEnd()})}},{key:"adjustProportions",value:function(Xa){Xa=(Xa?Xa.state.dragDelta:{y:0}).y;var db=this.get("inspector"),hb=this.get("scene graph resizer"),Rc=this.get("mode selector"),qd=this.get("connections tree");this.height+=Xa;db.height-=Xa;qd.height-=Xa;hb.top=this.bottom;hb.left=0;Rc.top=hb.bottom;qd.top=db.top=Rc.bottom+5}},{key:"reset",
value:function(){var Xa=this;this.treeData=new nb.InteractiveTreeData({children:[],container:nb.morph()});this.get("inspector").targetObject={};this.selectedNode=null;this.anchors.filter(function(db){return null==db.id}).forEach(function(db){return Xa.removeAnchor(db)})}},{key:"setTarget",value:function(Xa){this.target=Xa;this.treeData=this.getTreeFromSubmorphHierarchy(Xa);this.uncollapse(this.treeData.root)}},{key:"isNodeOutOfSync",value:function(Xa){var db=this;if(Xa===this._previewNode)return!1;
if(Xa.container.nameNeedsUpdate)return!0;var hb=Xa.container.target.submorphs.filter(function(Rc){return!db.ignoreMorph(Rc)});return hb.length!=Xa.children.length||hb.map(function(Rc){return Rc.name}).join("")!=Xa.children.map(function(Rc){return Rc.target?Rc.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(Xa){var db=this,hb=Xa.container.target.submorphs.map(function(Id){return Id.__scene_graph_target__?Id.__scene_graph_target__():Id}).filter(function(Id){return!db.ignoreMorph(Id)}),
Rc=[],qd={},Xd;for(Xd in hb){qd.$jscomp$loop$prop$m$2614=hb[Xd];var hc=nb.arr.without(Xa.children,this._previewNode).find(function(Id){return function(Pc){return Pc.container.target.id==Id.$jscomp$loop$prop$m$2614.id}}(qd));Rc[Xd]=hc?hc:this.readMorphHierarchy(qd.$jscomp$loop$prop$m$2614);qd={$jscomp$loop$prop$m$2614:qd.$jscomp$loop$prop$m$2614}}return Rc}},{key:"refresh",value:function(){var Xa=this;if(!this._updating&&!this._dropInProgress){var db=!1;nb.tree.prewalk(this.treeData.root,function(hb){Xa.isNodeOutOfSync(hb)&&
(db=!0,hb.name=hb.container.target.name,hb.container.refresh(),hb.children=Xa.getNewChildren(hb))},function(hb){return hb.children});this.update(db)}}},{key:"ignoreMorph",value:function(Xa){return Xa.isMorph?Xa.isContainer||Xa.isWindow||Xa.getWindow()||Xa.isEpiMorph||Xa.isHand||["lively.halos"].includes(Xa.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler","UserFlap","Menu"].includes(Xa.constructor.name):!1}},{key:"onDropHoverOut",value:function(Xa){var db=
Xa.hand.grabbedMorphs[0];Xa=Xa.hand.findDropTarget();if(!(Xa===this||Xa&&Xa.ownerChain().includes(this))&&db&&db.isContainer)db.onDragOutside()}},{key:"onDropHoverIn",value:function(Xa){var db=Xa.hand.grabbedMorphs[0];db&&!db.isContainer&&($world.halos().forEach(function(hb){return hb.remove()}),db.remove(),Object.assign(db,Xa.hand._grabbedMorphProperties.get(db).pointerAndShadow),db=this.renderContainerFor(db,!1),Xa.hand.grab(db),db.leftCenter=nb.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",
value:function(Xa){return new nb.InteractiveTreeData(this.readMorphHierarchy(Xa))}},{key:"readMorphHierarchy",value:function(Xa){var db=this;return nb.tree.mapTree(Xa,function(hb,Rc){return{name:hb.name,isCollapsed:!0,container:db.renderContainerFor(hb),visible:!0,children:Rc}},function(hb){return hb.submorphs.filter(function(Rc){return hb.isWorld?!db.ignoreMorph(Rc):!0})})}},{key:"renderContainerFor",value:function(Xa,db){Xa=void 0===Xa?nb.morph({name:"root"}):Xa;db=new nb.MorphContainer({tree:this,
fill:void 0===db||db?nb.Color.transparent:nb.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:Xa,opacity:Xa.visible?1:.5});Xa._data?(db._data=Xa._data,Xa._data.container=db):db._data={name:Xa.name,isCollapsed:!0,container:db,children:[]};return db}},{key:"collapseAll",value:function(){var Xa=this;this.treeData.asList().forEach(function(db){return db!=Xa.treeData.root?db.isCollapsed=!0:db.isCollapsed=!1})}},{key:"filterMorphs",value:function(Xa){var db=this,
hb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rc){if(1==Rc.nextAddress)return hb=Xa.tokens[0],db.treeData.filterActive||(db._collapseState=new WeakMap(db.treeData.asList().map(function(qd){return[qd,qd.isCollapsed]}))),db.treeData.filterActive=!!hb,Rc.yield(db.treeData.filter(function(qd){var Xd=!hb||qd.container.target.name.includes(hb);qd.container.highlightTerm(hb);return Xd},3),2);db.treeData.filterActive||db.treeData.asList().forEach(function(qd){return qd.isCollapsed=db._collapseState.has(qd)?
db._collapseState.get(qd):!0});db.refresh();Rc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1}}}}],zc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1104"}}},{start:10833,end:17441})}(nb.InteractiveTree);
nb.SceneGraphTree=vb;nb.SceneGraphTree=vb;nb.SceneGraphTree=vb;vb=function(ab){var zc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Fc=zc.hasOwnProperty("MorphContainer")&&"function"===typeof zc.MorphContainer?zc.MorphContainer:zc.MorphContainer=function(Xa){Xa&&Xa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(Fc,ab,[{key:"refresh",value:function(){var Xa=this,db,hb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rc){db=
Xa.target;if(!db)return Rc.return();Xa.reactsToPointer=!0;Xa.dropShadow=!1;Xa.submorphs=[Xa.getLabel(),db.layout&&Xa.getLayoutControls(),Xa.getConnectionControls()].filter(Boolean).map(function(qd,Xd){qd.fitIfNeeded();qd.left=hb?hb.right+5:0;qd.top=2;return hb=qd});Xa.height=20;Xa.opacity=db.visible?1:.5;Rc.jumpToEnd()})}},{key:"getLabel",value:function(){var Xa=this.getSubmorphNamed("name label")||nb.morph({type:"label",name:"name label",reactsToPointer:!1,padding:nb.rect(0,0,0,0),acceptsDrops:!1,
fontSize:this.tree.fontSize}),db=Xa.textString.slice(2,-1);db&&db==this.target.name||(Xa.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return Xa}},{key:"getIcon",value:function(Xa){return nb.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[nb.getClassName(Xa)]||"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},
{key:"getLayoutControls",value:function(){var Xa=this.getSubmorphNamed("layout label")||nb.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:nb.Rectangle.inset(4,2,4,2),fill:nb.Color.orange,fontColor:nb.Color.white});Xa._isControlElement=!0;Xa.textString!=this.target.layout.name()&&(Xa.value=this.target.layout.name());return Xa}},{key:"getConnectionControls",value:function(){this.connectionCount=this.target.attributeConnections?this.target.attributeConnections.filter(function(hb){return!hb.targetObj.isHalo}).length:
0;var Xa=this.getSubmorphNamed("connections label")||nb.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:nb.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:nb.Color.red,fontColor:nb.Color.white});Xa._isControlElement=!0;Xa.visible=!this.connectionHalo&&!!this.connectionCount;var db=this.connectionCount?this.connectionCount+" connection"+(1<this.connectionCount?"s":""):"Manage Connections";Xa.textString!=db&&(Xa.value=db);return Xa}},{key:"highlightTerm",value:function(Xa){var db=
this.submorphs[0],hb=db.textAndAttributes.slice(0,2),Rc=db.textString.slice(1).split(Xa);db.textAndAttributes=1===Rc.length?[].concat($jscomp.arrayFromIterable(hb),[Rc[0]]):[].concat($jscomp.arrayFromIterable(hb),$jscomp.arrayFromIterable(nb.arr.flatten(nb.arr.interpose(Rc.map(function(qd){return[qd,{}]}),[Xa,{fontWeight:"900"}]))))}},{key:"getClassControls",value:function(){}},{key:"wantsToBeDroppedOn",value:function(Xa){var db=ta._get(Object.getPrototypeOf(Fc.prototype),"wantsToBeDroppedOn",this).call(this,
Xa);if(![Xa].concat($jscomp.arrayFromIterable(Xa.ownerChain())).includes(this.tree))this.onDragOutside();return db}},{key:"onGrab",value:function(Xa){var db=this,hb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rc){if(1==Rc.nextAddress)return db.tree._dropInProgress=!0,hb=db.target.globalPosition,ta._get(Object.getPrototypeOf(Fc.prototype),"onGrab",db).call(db,Xa),db._data.globalTargetPosition=hb,Rc.yield(db.whenRendered(),2);if(db.tree.fullContainsWorldPoint(db.globalPosition))db.leftCenter=
nb.pt(-20,0);else db.onDragOutside();db.tree._dropInProgress=!1;Rc.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=nb.fun.createQueue("container-hover-queue",function(Xa,db){var hb,Rc,qd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xd){if(1==Xd.nextAddress)return hb=Xa.target,Rc=hb.opacity,qd=hb.scale,Xa.target.opacity=0,Xa.target.scale=.5,$world.halos().forEach(function(hc){return hc.remove()}),$world.firstHand.grab(Xa.target),
Xa.target._data=Xa._data,Xa.remove(),Xa.target.position=nb.pt(0,0),Xd.yield(Xa.target.animate({opacity:Rc,scale:qd,duration:200}),2);db();Xd.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(Xa){var db=this.node.children.indexOf(Xa.node||Xa._data)+1;db=this.node.children[db];Xa.target.remove();db?(db=this.target.submorphs.indexOf(db.container.target),this.target.addMorphAt(Xa.target,db)):this.target.addMorph(Xa.target);Xa._data.globalTargetPosition&&(Xa.target.position=
this.target.localize(Xa._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(Xa){}},{key:"toggleConnectionControl",value:function(Xa){this.getSubmorphNamed("connections label").visible=Xa}},{key:"toggleSelected",value:function(Xa){var db=this,hb,Rc,qd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xd){if(1==Xd.nextAddress)return ta._get(Object.getPrototypeOf(Fc.prototype),"toggleSelected",db).call(db,Xa),db._active===Xa?Xd.return():(db._active=Xa)&&db.target&&db.target.isMorph&&
db.world()?Xd.yield(db.target.whenRendered(),3):Xd.jumpTo(0);db.get("inspector").targetObject=db.target;db.get("connections tree").inspectConnectionsOf(db.target);if(db.connectionHalo)return Xd.return();hb=$jscomp.makeIterator(db.world().halos());for(Rc=hb.next();!Rc.done;Rc=hb.next()){qd=Rc.value;if(qd.target===db.target)return Xd.return();qd.remove()}nb.noUpdate({sourceObj:db.world(),targetObj:db.sideBar,sourceAttribute:"showHaloFor",targetAttribute:"selectNode"},function(){return db.world().showHaloFor(db.target)});
Xd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphContainer"}},{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(Xa){this.submorphs[0].fontFamily=Xa}},fontColor:{after:["submorphs"],derived:!0,set:function(Xa){this.submorphs[0].fontColor=Xa}},fontSize:{derived:!0,set:function(Xa){this.submorphs[0].fontSize=Xa}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,
get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}},sideBar:{derived:!0,get:function(){return this.owner.owner}}}}}],zc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"InteractiveTree",version:"0.1.1-1104"}}},{start:17452,end:25124})}(nb.InteractiveTreeContainer);nb.MorphContainer=vb;nb.MorphContainer=vb;nb.MorphContainer=vb;var tc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");tc.visualizeConnection=function(ab,zc,Fc,Xa,db){Xa=void 0===Xa?{}:Xa;db=tc.rect(0).sides.concat(tc.rect(0).corners);Fc=Fc||new tc.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:tc.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:tc.Color.transparent,
nativeCursor:"auto"},end:{fill:tc.Color.orange}}},Xa,{hasFixedPosition:!0}));Fc.startPoint.attachTo(ab,"rightCenter");zc.isMorph?(Xa=zc.globalBounds().partNameNearest(db,ab.globalPosition),ab.globalPosition.equals(zc.globalBounds().partNamed(Xa))&&zc.globalBounds().partNameNearest(tc.arr.without(db,Xa),ab.globalPosition),Fc.endPoint.attachTo(zc,"leftCenter")):(db=ab.globalBounds().topRight().addPt(tc.pt(100,0)),zc=tc.morph({type:"label",value:zc.toString(),styleClasses:["Tooltip"],padding:tc.rect(8,
4)}).openInWorld(db),zc.position=ab.world().bounds().translateForInclusion(zc.bounds()).topLeft(),tc.once(Fc,"remove",zc,"remove"),Fc.endPoint.attachTo(zc,"leftCenter"));return Fc};tc.startConnecting=function(ab,zc){ab.animate({opacity:.8,duration:300});ab.startPoint.attachTo(zc,"center");ab.vertices[0].position=tc.pt(2,2)};tc.stopConnecting=function(ab,zc,Fc,Xa){function db(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xd){if(1==Xd.nextAddress)return Xd.yield(ab.animate({opacity:0,
duration:300}),2);ab.startPoint.clearConnection();ab.endPoint.clearConnection();ab.remove();Xd.jumpToEnd()})}Xa=void 0===Xa?!1:Xa;var hb,Rc,qd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xd){return 1==Xd.nextAddress?(hb=ab,Rc=hb.endPoint,(qd=Rc.connectedMorph)&&"MorphContainer"==tc.getClassName(qd)&&(qd=qd.target),qd?Xd.yield(tc.interactiveConnectGivenSourceAndTarget(Fc,Xa,qd),2):Xd.jumpTo(2)):Xd.yield(db(),0)})};tc.editConnection=function(ab){var zc=ab.connection,Fc=ab.connectionPoint,
Xa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(db){if(1==db.nextAddress)return Xa=tc.visualizeConnection(Fc,zc.targetObj,!1,{borderColor:tc.Color.gray.darker(),endpointStyle:{start:{fill:tc.Color.transparent,nativeCursor:"auto"},end:{fill:tc.Color.gray.darker()}}}),db.yield(tc.interactivelyReEvaluateConnection(zc,"Edit Connection",!1),2);Xa.remove();db.jumpToEnd()})};tc.Tree=bc;tc.TreeData=Dc;tc.Icon=Rb;tc.morph=Hd;tc.pt=Jb;tc.Rectangle=oc;tc.rect=Cc;tc.Color=wc;tc.arr=Gc;tc.connect=
vc;tc.signal=Oa;tc.Leash=Ib;tc.once=wb;tc.interactivelyReEvaluateConnection=Zb;tc.interactiveConnectGivenSource=Ia;tc.interactiveConnectGivenSourceAndTarget=Wa;tc.getClassName=xa;(function(ab){var zc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Fc=zc.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof zc.ConnectionsTreeData?zc.ConnectionsTreeData:zc.ConnectionsTreeData=function(Xa){Xa&&Xa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ta(Fc,ab,[{key:"parseMorphConnections",value:function(Xa){for(var db={},hb=$jscomp.makeIterator(void 0===Xa.attributeConnections?[]:Xa.attributeConnections),Rc=hb.next();!Rc.done;Rc=hb.next())Rc=Rc.value,Rc.targetObj.isHalo||(db[Rc.sourceAttrName]=db[Rc.sourceAttrName]||[{name:["      New Connection  ",{fontColor:tc.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(Xa,Rc.sourceAttrName),{}]}],tc.arr.pushAt(db[Rc.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(Rc)))},
0));return{children:Object.entries(db).map(function(qd){var Xd=$jscomp.makeIterator(qd);qd=Xd.next().value;Xd=Xd.next().value;return{name:[qd,{fontWeight:"bold"}," ",{},tc.morph({fill:tc.Color.white,opacity:.7,value:""+(Xd.length-1),borderRadius:15,fontWeight:"bold",padding:tc.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],children:Xd}}).concat([{name:["New Connection  ",{fontColor:tc.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(Xa),{}]}])}}},{key:"renderExistingConnection",
value:function(Xa){var db=this,hb=tc.morph({type:"label",fontColor:tc.Color.gray,fontSize:16,nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(tc.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},Xa.targetMethodName,{}])}),Rc=this.renderDeadPin(),qd=Rc.submorphs[0];tc.connect(hb,"onHoverIn",function(){hb.fontColor=tc.Color.orange;hb._leash=tc.visualizeConnection(qd,Xa.targetObj,hb._leash);qd.fill=tc.Color.orange;qd.border={color:tc.Color.orange,width:3}});tc.connect(hb,
"onMouseDown",function(Xd){return $jscomp.asyncExecutePromiseGeneratorProgram(function(hc){if(1==hc.nextAddress)return Xd.stop(),hc.yield(tc.interactivelyReEvaluateConnection(Xa),2);tc.signal(db,"refresh");hc.jumpToEnd()})});tc.connect(hb,"onHoverOut",function(){hb.fontColor=tc.Color.gray;qd.fill=tc.Color.gray;qd.border={color:tc.Color.white,width:1};hb._leash.remove();hb._leash=void 0});return[hb,{},"  ",{}].concat($jscomp.arrayFromIterable(tc.Icon.textAttribute("times",{nativeCursor:"pointer ",
onMouseDown:function(){Xa.disconnect();tc.signal(db,"refresh")}})),["  ",{},Rc,{}])}},{key:"renderDeadPin",value:function(){var Xa=tc.morph({type:"ellipse",fill:tc.Color.gray,extent:tc.pt(10,10),center:tc.pt(8,12),borderWidth:1});return tc.morph({extent:tc.pt(20,20),fill:tc.Color.transparent,reactsToPointer:!1,submorphs:[Xa]})}},{key:"renderPin",value:function(Xa,db){var hb=this,Rc=tc.morph({type:"ellipse",fill:tc.Color.gray.withA(.5),extent:tc.pt(10,10),center:tc.pt(8,12),draggable:!1,borderWidth:1}),
qd=new tc.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:tc.Color.gray.darker(),endpointStyle:{fill:tc.Color.gray.darker()},position:tc.pt(1,1),vertices:[tc.pt(0,0),tc.pt(0,0)],canConnectTo:function(Xd){return"MorphContainer"==tc.getClassName(Xd)||2>tc.arr.intersect([Xd].concat($jscomp.arrayFromIterable(Xd.ownerChain())),[Rc].concat($jscomp.arrayFromIterable(Rc.ownerChain()))).length}});Rc.addMorph(qd);tc.connect(qd.endPoint,"onDragStart",function(){tc.startConnecting(qd,
Rc)});tc.connect(qd.endPoint,"onDragEnd",function(Xd){return $jscomp.asyncExecutePromiseGeneratorProgram(function(hc){if(1==hc.nextAddress)return Rc.center=tc.pt(8,12),hc.yield(tc.stopConnecting(qd,Rc,Xa,db),2);tc.signal(hb,"refresh");hc.jumpToEnd()})});return tc.morph({extent:tc.pt(20,20),fill:tc.Color.transparent,reactsToPointer:!1,submorphs:[Rc]})}},{key:"display",value:function(Xa){return Xa.name}},{key:"collapse",value:function(Xa,db){Xa.isCollapsed=db}},{key:"isCollapsed",value:function(Xa){return Xa.isCollapsed}},
{key:"isLeaf",value:function(Xa){return!Xa.children}},{key:"getChildren",value:function(Xa){return Xa.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(Xa){var db=new this;db.root=db.parseMorphConnections(Xa);return db}}],zc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",
version:"0.1.1-16"}}},{start:3542,end:8147})})(tc.TreeData);vb=function(ab){var zc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Fc=zc.hasOwnProperty("ConnectionsTree")&&"function"===typeof zc.ConnectionsTree?zc.ConnectionsTree:zc.ConnectionsTree=function(Xa){Xa&&Xa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(Fc,ab,[{key:"inspectConnectionsOf",value:function(Xa){if(this.targetMorph=Xa)this.treeData=tc.ConnectionsTreeData.for(Xa),
tc.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=tc.ConnectionsTreeData.for(this.targetMorph),tc.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTree"}},{key:"properties",get:function(){return{}}}],zc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8164,end:8717})}(tc.Tree);vb=tc.ConnectionsTree;tc.default=vb}}});