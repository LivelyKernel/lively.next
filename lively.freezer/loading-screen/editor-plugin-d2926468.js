System.register(["./__root_module__-28353364.js","./index-2245b428.js","./index-4fd2821f.js","./editor-plugin-85896541.js"],function(Ia){var mb,vb,Vb,Eb,Jc,Bc,Uc,tc,oc,sc,Tc,Fd,Rd,ee,Dc,rd,Ab,qc,Xc,zc,ed,wd,xb,hc;return{setters:[function(Cc){mb=Cc.i;vb=Cc.bJ;Vb=Cc.bK;Eb=Cc.bL;Jc=Cc.bM;Bc=Cc.c;Uc=Cc._;tc=Cc.s;oc=Cc.a3;sc=Cc.bz;Tc=Cc.a;Fd=Cc.p;Rd=Cc.bN;ee=Cc.a_},function(Cc){Dc=Cc.s},function(Cc){rd=Cc.localInterface;Ab=Cc.systemInterfaceNamed;qc=Cc.serverInterfaceFor;Xc=Cc.l2lInterfaceFor},function(Cc){zc=
Cc.p;ed=Cc.d;wd=Cc.a;xb=Cc.r;hc=Cc.C}],execute:function(){var Cc=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js");Cc.warnStyle={"border-bottom":"2px dotted orange"};Cc.errorStyle={"background-color":"red"};var ic=function(Qb){var Lb=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js"),Kb=Lb.hasOwnProperty("JavaScriptChecker")&&"function"===typeof Lb.JavaScriptChecker?Lb.JavaScriptChecker:Lb.JavaScriptChecker=function(za){za&&za[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return mb(Kb,Qb,[{key:"uninstall",value:function(za){var bb=za.text||za;(bb.markers||[]).forEach(function(P){return P.id.startsWith("js-checker-")&&bb.removeMarker(P)});bb.removeMarker("js-syntax-error")}},{key:"hasEmbeddedMorphInRange",value:function(za,bb){return[].concat($jscomp.arrayFromIterable(za.embeddedMorphMap.values())).find(function(P){return bb.containsPosition(P.anchor.position)})}},{key:"onDocumentChange",value:function(za,bb,P){var X=bb.document;try{var ya=P.parse()}catch(Ga){ya=
Ga}ya&&(za=(bb.markers||[]).filter(function(Ga){return Ga.id.startsWith("js-checker-")}),P=P.undeclaredVariables().map(function(Ga,wa){var ja=Ga.start;Ga=Ga.end;ja=X.indexToPosition(ja);Ga=X.indexToPosition(Ga);return bb.addMarker({id:"js-checker-"+wa,style:Cc.warnStyle,range:{start:ja,end:Ga},type:"js-undeclared-var"})}),za.slice(P.length).forEach(function(Ga){return bb.removeMarker(Ga)}),ya.parseError?(za=ya.parseError.loc,P=za.column,za=za.line-1,ya=X.indexToPosition(ya.parseError.pos),P=ya.column,
za=ya.row,ya={start:{column:P-1,row:za},end:{column:P+1,row:za}},this.hasEmbeddedMorphInRange(bb,ya)||bb.addMarker({id:"js-syntax-error",range:ya,style:Cc.errorStyle,type:"js-syntax-error"})):bb.removeMarker("js-syntax-error"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptChecker"}}],Lb,{pathInPackage:function(){return"js/checker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:126,end:1896})}(void 0),Qc=ic=Cc.JavaScriptChecker;Cc.default=ic;var jb=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js");jb.query=vb;jb.fuzzyParse=Vb;jb.acorn=Eb;jb.custom=Jc;var fb=function(Qb){var Lb=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js"),Kb=Lb.hasOwnProperty("JavaScriptNavigator")&&"function"===typeof Lb.JavaScriptNavigator?Lb.JavaScriptNavigator:Lb.JavaScriptNavigator=function(za){za&&
za[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return mb(Kb,Qb,[{key:"ensureAST",value:function(za){return this.parse(za.textString)}},{key:"parse",value:function(za){return jb.fuzzyParse(za)}},{key:"move",value:function(za,bb){var P=!!bb.activeMark||!bb.selection.isEmpty(),X=bb.selection,ya=bb.positionToIndex(X.lead);za=this[za](bb.textString,ya);za=bb.indexToPosition(za);X.lead=za;P||(X.anchor=za);bb.scrollCursorIntoView()}},{key:"forwardSexp",
value:function(za){this.move("_forwardSexp",za)}},{key:"backwardSexp",value:function(za){this.move("_backwardSexp",za)}},{key:"backwardUpSexp",value:function(za){this.move("_backwardUpSexp",za)}},{key:"forwardDownSexp",value:function(za){this.move("_forwardDownSexp",za)}},{key:"_forwardSexp",value:function(za,bb){za=this.parse(za);za=jb.custom.findNodesIncluding(za,bb).reverse().find(function(X){return X.end!==bb});if(!za)return bb;if("BlockStatement"===za.type){var P=za.body.find(function(X){return X.start>
bb});if(P)return P.start}return za.end}},{key:"_backwardSexp",value:function(za,bb){za=this.parse(za);za=jb.custom.findNodesIncluding(za,bb).reverse().find(function(X){return X.start!==bb});if(!za)return bb;if("BlockStatement"===za.type){var P=za.body.slice().reverse().find(function(X){return X.end<bb});if(P)return P.end}return za?za.start:bb}},{key:"_backwardUpSexp",value:function(za,bb){za=this.parse(za);return(za=jb.custom.findNodesIncluding(za,bb).reverse().find(function(P){return P.start!==bb}))?
za.start:bb}},{key:"_forwardDownSexp",value:function(za,bb){za=this.parse(za);return(za=jb.custom.findNodeAfter(za,bb,function(P,X){return X.start>bb}))?za.node.start:bb}},{key:"markDefun",value:function(za){var bb=this.rangeForFunctionOrDefinition(za.textString,[za.positionToIndex(za.selection.range.start),za.positionToIndex(za.selection.range.end)]);bb&&za.execCommand("expandRegion",{start:bb[0],end:bb[1]})}},{key:"rangeForNodesMatching",value:function(za,bb,P){za=this.parse(za);return(bb=jb.custom.findNodesIncluding(za,
bb).reverse().find(P))?[bb.start,bb.end]:null}},{key:"rangeForFunctionOrDefinition",value:function(za,bb){var P=bb[0]===bb[1];return this.rangeForNodesMatching(za,bb[1],function(X){return["AssignmentExpression","FunctionDeclaration","FunctionExpression","MethodDefinition"].includes(X.type)&&(P&&X.end!==bb[1]||!P&&X.start<bb[0])?!0:!1})}},{key:"resolveIdentifierAt",value:function(za,bb){"number"!==typeof bb&&(bb=za.positionToIndex(bb));za=this.ensureAST(za);var P=jb.query.nodesAt(bb,za).reverse(),
X=P.find(function(Ga){return"Identifier"===Ga.type});if(!X&&((P=P[0])&&P.type.includes("Specifier")&&P.local&&"Identifier"===P.local.type&&(X=P.local),!X))return;bb=(P=jb.query.findDeclarationClosestToIndex(za,X.name,bb))?jb.query.scopeAtIndex(za,P.start):jb.query.scopeAtIndex(za,bb);var ya=jb.query.findReferencesAndDeclsInScope(bb,X.name).refs;return{parsed:za,scope:bb,id:X,name:X.name,decl:P,refs:ya}}},{key:"expandRegion",value:function(za,bb,P,X){function ya(lb){lb=za.positionToIndex({column:0,
row:wa.row});return{range:[lb+ja.start,lb+ja.start+ja.value.length],prev:X}}var Ga=X.range[0]!==X.range[1],wa=za.indexToPosition(X.range[0]),ja=za.tokenAt(wa);if(!Ga&&ja&&["keyword","identifier"].includes(ja.type))return ya();P=P||this.parse(bb);bb=jb.query.nodesAtIndex(P,X.range[0]).reverse().find(function(lb){return lb.start<X.range[0]||lb.end>X.range[1]});if(!bb)return X;P=bb.start;Ga=bb.end;return"Literal"===bb.type&&(bb.raw||"").match(/^['"`]/)&&X.range[0]!==bb.start&&X.range[1]!==bb.end&&(bb.start+
1<X.range[0]||bb.end-1>X.range[1])?{range:[P+1,Ga-1],prev:X}:{range:[P,Ga],prev:X}}},{key:"contractRegion",value:function(za,bb,P,X){return X.prev||X}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptNavigator"}}],Lb,{pathInPackage:function(){return"js/navigator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:121,
end:6780})}(void 0);ic=fb=jb.JavaScriptNavigator;jb.default=fb;var Ob=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js");Ob.addIndexToTextPos=function(Qb,Lb,Kb){return Qb.indexToPosition(Qb.positionToIndex(Lb)+Kb)};Ob.connect=Bc;Ob.disconnect=Uc;Ob.string=tc;Ob.KeyHandler=oc;Ob.Range=sc;fb=function(Qb){var Lb=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js"),Kb=Lb.hasOwnProperty("Snippet")&&"function"===typeof Lb.Snippet?Lb.Snippet:Lb.Snippet=function(za){za&&za[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return mb(Kb,Qb,[{key:Symbol.for("lively-instance-initialize"),value:function(za){za=void 0===za?{trigger:null,expansion:""}:za;var bb=za.expansion;this.trigger=za.trigger;this.expansion=bb;this.resetExpansionState()}},{key:"isTextSnippet",get:function(){return!0}},{key:"attach",value:function(za){this.isExpanding&&(this.textMorph=za,Ob.connect(this.textMorph,"selectionChange",this,"onCursorMove"))}},{key:"detach",value:function(za){this.isExpanding&&
(Ob.disconnect(za,"selectionChange",this,"onCursorMove"),this.textMorph=null)}},{key:"onCursorMove",value:function(){var za=this.expansionState,bb=za.startAnchor,P=za.endAnchor;za.isExpanding?Ob.Range.fromPositions(bb.position,P.position).containsPosition(this.textMorph.cursorPosition)||this.resetExpansionState():this.resetExpansionState()}},{key:"resetExpansionState",value:function(){var za=this.textMorph;if(za){var bb=this.expansionState||{},P=bb.marker,X=bb.startAnchor,ya=bb.endAnchor;bb=bb.steps;
X&&za.removeAnchor(X);ya&&za.removeAnchor(ya);P&&za.removeMarker(P);bb.forEach(function(Ga){return za.removeAnchor(Ga.anchor)})}this.expansionState={stepIndex:-1,steps:[],isExpanding:!1,startMarker:null,endMarker:null};za&&za.removePlugin(this)}},{key:"isExpanding",get:function(){return this.expansionState.isExpanding}},{key:"createExpansionSteps",value:function(za){var bb=[],P=0;Ob.string.reMatches(za,/\$[0-9]+|\$\{[0-9]+:[^\}]*\}/g).forEach(function(X){var ya=X.start,Ga=X.end;X=X.match;var wa="";
X.startsWith("${")?(wa=$jscomp.makeIterator(X.match(/^\$\{([0-9]+):([^\}]*)\}/)),wa.next(),X=wa.next().value,wa=wa.next().value,X=Number(X)):X=Number(X.replace(/^\$/,""));za=za.slice(0,ya-P)+wa+za.slice(Ga-P);bb[X]={index:ya-P,prefill:wa,anchor:null};P+=Ga-ya-wa.length});return{steps:bb,expansion:za}}},{key:"expandAtCursor",value:function(za){var bb=za.selection,P=za.cursorPosition.column,X=this.expansion;this.trigger&&(P-=this.trigger.length);if(P=Math.max(0,P))X=Ob.string.lines(X),X=[X[0]].concat($jscomp.arrayFromIterable(X.slice(1).map(function(Ja){return Ob.string.indent(Ja,
" ",P)}))),X=X.join("\n");var ya=this.createExpansionSteps(X);X=ya.expansion;ya=ya.steps;this.trigger&&bb.growLeft(this.trigger.length);bb.text=X;var Ga=bb.start;X=bb.end;bb.collapseToEnd();if(ya.length){var wa=Ob.string.newUUID();ya.forEach(function(Ja,Xb){return Ja.anchor=za.addAnchor(Object.assign({id:"snippet-step-"+Xb+"-"+wa},Ob.addIndexToTextPos(za,Ga,Ja.index)))});var ja=za.addAnchor(Object.assign({id:"snippet-start-"+wa},Ga,{insertBehavior:"stay"})),lb=za.addAnchor(Object.assign({id:"snippet-end-"+
wa},X));this.expansionState={marker:za.addMarker({id:"snippet-marker-"+wa,get range(){return{start:ja.position,end:lb.position}},style:{"border-radius":"4px","background-color":"rgba(30, 200, 140, 0.3)","box-shadow":"0 0 4px rgba(30, 200, 140, 0.3)","pointer-events":"none",content:"fooooo"}}),startAnchor:ja,endAnchor:lb,stepIndex:0,steps:ya,isExpanding:!0};za.addPlugin(this);this.nextStep()}}},{key:"nextStep",value:function(){var za=this.expansionState,bb=za.steps,P=this.textMorph;if(za.isExpanding&&
P){P=P.selection;za=bb[za.stepIndex];var X=za.prefill;P.lead=P.anchor=za.anchor.position;P.growRight(X.length);this.expansionState.stepIndex++;this.expansionState.stepIndex>=bb.length&&(this.resetExpansionState(),console.log("[snippet] expansion of "+this.expansion+" done"))}}},{key:"canExpand",value:function(za,bb){bb=za.positionToIndex(za.cursorPosition);return za.textString.slice(bb-this.trigger.length,bb)===this.trigger}},{key:"tryTrigger",value:function(za,bb){if(!this.canExpand(za,za.cursorPosition))return!1;
this.expandAtCursor(za);return!0}},{key:"getCommands",value:function(za){var bb=this;return za.concat([{name:"[snippet] next expansion step",exec:function(P){bb.nextStep();return!0}},{name:"[snippet] cancel expansion",exec:function(P){bb.resetExpansionState();return!0}}])}},{key:"getKeyHandlers",value:function(za){return za.concat(Ob.KeyHandler.withBindings([{keys:"Tab",command:"[snippet] next expansion step"},{keys:"Escape",command:"[snippet] cancel expansion"}]))}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"Snippet"}}],Lb,{pathInPackage:function(){return"text/snippets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:357,end:6029})}(void 0);Ob.Snippet=fb;Ob.Snippet=fb;Ob.Snippet=fb;var Cb=[{name:"get snippets",exec:function(Qb){return Qb.pluginCollect("getSnippets",[])}}];Ob.snippetCommands=Cb;Ob.snippetCommands=Cb;
Ob.snippetCommands=Cb;var ob=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js");ob.buildEvalOpts=function(Qb,Lb){return Qb.plugins.find(function(Kb){return Kb.isJSEditorPlugin}).sanatizedJsEnv(Lb)};ob.Snippet=fb;Cb=function(Qb){var Lb=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Kb=Lb.hasOwnProperty("ModuleTopLevelVarCompleter")&&"function"===typeof Lb.ModuleTopLevelVarCompleter?Lb.ModuleTopLevelVarCompleter:Lb.ModuleTopLevelVarCompleter=function(za){za&&za[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return mb(Kb,Qb,[{key:"compute",value:function(za,bb){var P,X,ya,Ga,wa,ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(lb){if(1==lb.nextAddress){X=(P=za.pluginFind(function(Ja){return Ja.isJSEditorPlugin}))&&P.systemInterface();if(!X)return lb.return([]);ya=ob.buildEvalOpts(za);Ga=ya.targetModule;return"local"===X.name?(wa=Object.getOwnPropertyNames(X.getModule(Ga).recorder),lb.jumpTo(2)):lb.yield(X.runEval('\n        var result, livelySystem = typeof System !== "undefined"\n                      && System.get(System.decanonicalize("lively-system-interface"));\n        if (livelySystem) {\n          result = JSON.stringify(\n            Object.getOwnPropertyNames(livelySystem.localInterface.getModule("'+
Ga+'").recorder));\n        } else {\n          var G = typeof window !== "undefined" ?\n            window : typeof global !== "undefined" ? global : this;\n          result = JSON.stringify(Object.getOwnPropertyNames(G));\n        }\n        result;\n      ',{targetModule:"lively://module-recorder-completer"}),3)}if(2!=lb.nextAddress){ja=lb.yieldResult;if(ja.isError)return lb.return([]);wa=JSON.parse(ja.value)}wa=wa.filter(function(Ja){return!Ja.startsWith("defVar_")&&!["System","__currentLivelyModule",
"initializeES6ClassForLively","_moduleExport","_moduleImport"].includes(Ja)});return lb.return(wa.map(function(Ja){return{priority:1100,completion:Ja}}))})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModuleTopLevelVarCompleter"}}],Lb,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:227,end:1700})}(void 0);ob.ModuleTopLevelVarCompleter=Cb;ob.ModuleTopLevelVarCompleter=Cb;ob.ModuleTopLevelVarCompleter=Cb;Cb=function(Qb){var Lb=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Kb=Lb.hasOwnProperty("DynamicJavaScriptCompleter")&&"function"===typeof Lb.DynamicJavaScriptCompleter?Lb.DynamicJavaScriptCompleter:Lb.DynamicJavaScriptCompleter=function(za){za&&za[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return mb(Kb,Qb,[{key:"isValidPrefix",value:function(za){return/\.[a-z0-9_]*$/i.test(za)}},{key:"isMethodCallCompletion",value:function(za){return za.endsWith(")")&&0<za.indexOf("(")}},{key:"isValidIdentifier",value:function(za){if("string"!==typeof za)return!1;this.isMethodCallCompletion(za)&&(za=za.slice(0,za.indexOf("(")));return/^[a-z_\$][0-9a-z_\$]*$/i.test(za)?!0:!1}},{key:"wrapInBrackets",value:function(za){if(!isNaN(Number(za))||za.startsWith("Symbol."))return"["+za+"]";var bb="";this.isMethodCallCompletion(za)&&
(bb=za.slice(za.indexOf("(")),za=za.slice(0,za.indexOf("(")));return'["'+za.replace(/"/g,'\\"')+'"]'+bb}},{key:"compute",value:function(za){var bb=this,P,X,ya,Ga,wa,ja,lb,Ja,Xb,Kc,Hb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oc){if(1==Oc.nextAddress){P=za.selection;P.isEmpty()?(X=za.getLine(P.lead.row),X=X.slice(X.lastIndexOf(":")+1,P.lead.column)):X=P.text.slice(Math.max(0,P.text.indexOf(":")),0);if(!bb.isValidPrefix(X))return Oc.return([]);Ga=(ya=za.pluginFind(function(qb){return qb.isJSEditorPlugin}))&&
ya.systemInterface();if(!Ga)return Oc.return([]);wa=ob.buildEvalOpts(za);return Oc.yield(Ga.dynamicCompletionsForPrefix(wa.targetModule,X,wa),2)}ja=Oc.yieldResult;lb=ja.isError;Ja=ja.value;Xb=ja.completions;Kc=ja.prefix;if(lb)return console.warn("javascript completer encountered error: "+(Ja.stack||Ja)),Oc.return([]);Xb.reduce(function(qb,xd){xd=$jscomp.makeIterator(xd);xd.next();xd=xd.next().value;return qb+xd.length},0);Hb=Xb.reduce(function(qb,xd,he){xd=$jscomp.makeIterator(xd);var xc=xd.next().value;
xd=xd.next().value;return qb.concat(xd.map(function(rb){var Ld=bb.isValidIdentifier(rb);return{info:xc,completion:rb,prefix:Ld?Kc:"."+Kc,customInsertionFn:Ld?bb.isMethodCallCompletion(rb)?function(sb,hb,Ba,J){hb=J.start;J=J.end;sb=sb.replace(/\((.*)\)/,function(ta){return"("+ta.slice(1,-1).split(", ").map(function(Ta,tb){return"${"+tb+":"+Ta+"}"}).join(", ")+")"});sb=new ob.Snippet({expansion:sb});Ba.replace({start:hb,end:J},"");sb.expandAtCursor(Ba)}:null:function(sb,hb,Ba,J){sb=J.start;J=J.end;
hb={row:sb.row,column:sb.column-1};J="."===Ba.textInRange({start:hb,end:sb})?{start:hb,end:J}:{start:sb,end:J};Ba.replace(J,bb.wrapInBrackets(rb))}}}))},[]);Hb.forEach(function(qb,xd){return Object.assign(qb,{priority:2E3+Hb.length-xd})});return Oc.return(Hb)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DynamicJavaScriptCompleter"}}],Lb,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1709,end:5155})}(void 0);ob.DynamicJavaScriptCompleter=Cb;ob.DynamicJavaScriptCompleter=Cb;ob.DynamicJavaScriptCompleter=Cb;ob.keywords="arguments boolean break case catch class const continue debugger default delete eval export import extends false true finally instanceof static super this throw typeof while with yield await Array Date eval function hasOwnProperty Infinity isFinite isNaN isPrototypeOf length Math NaN name Number Object prototype String toString undefined valueOf alert assign clearInterval clearTimeout decodeURI decodeURIComponent document encodeURI encodeURIComponent escape navigator parseFloat parseInt setInterval setTimeout window document requestAnimationFrame cancelAnimationFrame".split(" ");
Cb=function(Qb){var Lb=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Kb=Lb.hasOwnProperty("JavaScriptKeywordCompleter")&&"function"===typeof Lb.JavaScriptKeywordCompleter?Lb.JavaScriptKeywordCompleter:Lb.JavaScriptKeywordCompleter=function(za){za&&za[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return mb(Kb,Qb,[{key:"compute",value:function(za,bb){return ob.keywords.map(function(P){return{completion:P,priority:0}})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptKeywordCompleter"}}],Lb,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:6157,end:6295})}(void 0);ob.JavaScriptKeywordCompleter=Cb;ob.JavaScriptKeywordCompleter=Cb;ob.JavaScriptKeywordCompleter=Cb;Cb=[new ob.DynamicJavaScriptCompleter,
new ob.JavaScriptKeywordCompleter,new ob.ModuleTopLevelVarCompleter];ob.completers=Cb;ob.completers=Cb;ob.completers=Cb;var bc=lively.FreezerRuntime.recorderFor("lively.ide/js/snippets.js");bc.Snippet=fb;var Ma=[["typef",'typeof ${0:object} === "function"$1'],["types",'typeof ${0:object} === "string"$1'],["typen",'typeof ${0:object} === "number"$1'],["typeu",'typeof ${0:object} === "undefined"$1'],["typenu",'typeof ${0:object} !== "undefined"$1'],["import",'import { ${0:name} } from "${1:module}";'],
["importd",'import ${0:name} from "${1:module}";'],["import*",'import * as ${0:name} from "${1:module}";'],["subclass","class ${0:name} extends ${1:base} {\n  constructor(${2:args}) {\n    super(${3:args})\n    $4\n  }\n}"],["class","class ${0:name} {\n  constructor(${1:args}) {\n    $2\n  }\n}"],["switch","switch (${0:expression}) {\n  case '${2:case}':\n    ${3:// code}\n    break;\n    $4\n    default:\n    ${1:// code}\n}"],["tryf","try {${0:/* code */}} finally {}"],["try","try {${0:/* code */}} catch (err) {}"],
["do","do {${1:/* code */}} while (${0:/* condition */});"],["fori","for (let ${0:prop} in ${1:obj}) {\n  ${2:obj[prop]}\n}"],["foro","for (let ${0:value} of ${1:iterable}) {\n  ${2:value}\n}"],["for-","for (let ${0:i} = ${1:list}.length; ${2:i}--; ) {\n  $3\n}"],["for","for (let ${0:i} = 0; ${1:i} < ${3:list}.length; ${2:i}++) {\n  $4\n}"],["Prom","new Promise((resolve, reject) => {$0})"],["keys","Object.keys($0)"],["assign","Object.assign(${0:dest}, ${1:source})"],["stringi","JSON.stringify(${0:object})"],
["forE","forEach(${0:ea} => $1)"],["map","map(${0:ea} => $1)"],["reduce","reduce((${1:all}, ${2:ea}) => {$3}, ${0:init})"],["from","Array.from(${0:list})"],["last","arr.last(${0:list})"],["pluck",'arr.pluck(${0:list}, "${1:key}")'],["sortBy","arr.sortBy(${0:list}, ($1) => $2)"],["join",'join("\\n")'],["con","connect(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["once","once(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["sig","signal(${0:source}, '${1:sourceAttr}', ${2:value});"],
["ll","lively.lang."],["lls","lively.lang.string."],["lla","lively.lang.arr."],["llo","lively.lang.obj."],["llf","lively.lang.fun."],["llp","lively.lang.promise."],["withA","withAllSubmorphsDo(ea => { return ${0:ea}; })"],["$w","$world"],["$m","$morph('${0:name}')"],["get",'get("${0:name}")'],["$","${$0}"],["cl","console.log($0)"],["cw","console.warn($0)"],["ce","console.error($0)"],["s","show(`$0`);"],["l2lC",'import L2LClient from "lively.2lively/client.js";\nlet l2lClient = L2LClient.default();$0'],
["fun","function ${0:functionName}($1) {$2}"],["fn","function($0) {$1}"],["f","($0) => $1"],["aw","await $0"]];bc.snippets=Ma;bc.snippets=Ma;bc.snippets=Ma;var Db=lively.FreezerRuntime.recorderFor("lively.ide/js/commands.js");Db.getEvalEnv=function(Qb){return(Qb=Qb.pluginFind(function(Lb){return Lb.isJSEditorPlugin}))?Qb.evalEnvironment:null};Db.setEvalEnv=function(Qb,Lb){(Qb=Qb.pluginFind(function(Kb){return Kb.isJSEditorPlugin}))&&Object.assign(Qb.evalEnvironment,Lb);return Qb.evalEnvironment};
Db.pToI=function(Qb,Lb){return Qb.positionToIndex(Lb)};Db.iToP=function(Qb,Lb){return Qb.indexToPosition(Lb)};Db.arr=Tc;Db.promise=Fd;Db.string=tc;Db.show=Dc;Db.Range=sc;Db.query=vb;Db.BaseVisitor=Rd;bc=[{name:"undefine variable",doc:"Finds the variable at cursor position (or position passed) and undefines it in the module toplevel scope.",exec:function(Qb,Lb){Lb=void 0===Lb?{varName:null,position:null}:Lb;var Kb,za,bb,P,X,ya,Ga,wa,ja,lb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ja){switch(Ja.nextAddress){case 1:Kb=
Lb;za=Kb.varName;bb=Kb.position;if(!za){bb||(bb=Qb.cursorPosition);P=Qb.pluginInvokeFirst("getNavigator");X=P.ensureAST(Qb);ya=Db.query.nodesAt(Qb.positionToIndex(bb),X).reverse().find(function(Xb){return"Identifier"===Xb.type});if(!ya)return Qb.showError(Error("no identifier found!")),Ja.return(!0);za=ya.name}Lb=Qb.pluginFind(function(Xb){return Xb.isJSEditorPlugin}).sanatizedJsEnv();Ga='lively.modules.module("'+Lb.targetModule+'").undefine("'+za+'")';Ja.setCatchFinallyBlocks(2);return Ja.yield(Qb.doEval(null,
Lb,Ga),4);case 4:wa=Ja.yieldResult;ja=wa.error?wa.error:wa.isError?wa.value:null;Ja.leaveTryBlock(3);break;case 2:ja=lb=Ja.enterCatchBlock();case 3:return ja?Qb.showError(ja):Qb.setStatusMessage(za+" undefined"),Ja.return(!0)}})}},{name:"change doitContext",exec:function(Qb){var Lb,Kb,za,bb,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(X){if(1==X.nextAddress)return Lb=$jscomp,Kb=Lb.makeIterator,X.yield(Qb.world().execCommand("select morph",{prompt:"select morph for doitContext",justReturn:!0,
prependItems:["reset"],filterFn:function(ya){return!ya.isUsedAsEpiMorph()}}),2);za=Kb.call(Lb,X.yieldResult);if(bb=za.next().value)P="reset"===bb,Qb.doitContext=P?null:bb,Qb.setStatusMessage(P?"doitContext is now\n"+bb:"doitContext reset");return X.return(!0)})}},{name:"change eval backend",exec:function(Qb,Lb){Lb=void 0===Lb?{backend:void 0}:Lb;var Kb,za;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return Kb=Lb,za=Kb.backend,void 0!==za?bb.jumpTo(2):bb.yield(Qb.world().prompt("choose eval backend",
{historyId:"js-eval-backend-history"}),3);if(2!=bb.nextAddress&&(za=bb.yieldResult,!za))return Qb.setStatusMessage("Canceled"),bb.return(!0);"local"===za&&(za=null);Qb.setStatusMessage("Eval backend is now "+(za||"local"));return bb.return(Db.setEvalEnv(Qb,{remote:za}))})}},{name:"copy current module name to clipboard",exec:function(Qb){var Lb=Qb.evalEnvironment.targetModule;Qb.setStatusMessage(Lb||"Cannot find module name");Qb.env.eventDispatcher.killRing.add(Qb);Qb.env.eventDispatcher.doCopy(Lb);
return!0}}];Db.jsEditorCommands=bc;Db.jsEditorCommands=bc;Db.jsEditorCommands=bc;var gb=[{name:"[javascript] list errors and warnings",exec:function(Qb){var Lb,Kb,za,bb,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(X){if(1==X.nextAddress){Lb=(Qb.markers||[]).filter(function(ya){ya=ya.type;return"js-undeclared-var"===ya||"js-syntax-error"===ya});if(!Lb.length)return Db.show("no warnings or errors"),X.return(!0);Kb=Lb.map(function(ya){var Ga=ya.range;return{isListItem:!0,string:"["+
ya.type.split("-").slice(1).join(" ")+"] "+Qb.textInRange(Ga),value:Ga}});return X.yield(Qb.world().filterableListPrompt("jump to warning or error",Kb),2)}za=X.yieldResult;bb=$jscomp.makeIterator(za.selected);if(P=bb.next().value)Qb.saveMark(),Qb.selection=P,Qb.centerRow(P.start.row);return X.return(!0)})}},{name:"[javascript] inject import",exec:function(Qb,Lb){Lb=void 0===Lb?{gotoImport:!1,insertImportAtCursor:!0}:Lb;var Kb,za,bb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){switch(P.nextAddress){case 1:return P.yield(Db.promise.delay(0),
2);case 2:return P.yield(System.import("lively.ide/js/import-helper.js"),3);case 3:return Kb=P.yieldResult,za=Kb.interactivelyInjectImportIntoText,P.yield(za(Qb,Lb),4);case 4:return(bb=P.yieldResult)||Qb.setStatusMessage("canceled"),P.return(bb)}})}},{name:"[javascript] fix undeclared variables",exec:function(Qb,Lb){Lb=void 0===Lb?{ignore:[],autoApplyIfSingleChoice:!1,requester:Qb}:Lb;var Kb,za,bb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){if(1==P.nextAddress)return P.yield(System.import("lively.ide/js/import-helper.js"),
2);if(3!=P.nextAddress)return Kb=P.yieldResult,za=Kb.interactivlyFixUndeclaredVariables,P.yield(za(Qb,Lb),3);bb=P.yieldResult;Qb.focus();return P.return(bb)})}},{name:"[javascript] remove unused imports",exec:function(Qb,Lb){Lb=void 0===Lb?{query:!0}:Lb;var Kb,za,bb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){if(1==P.nextAddress)return P.yield(System.import("lively.ide/js/import-helper.js"),2);if(3!=P.nextAddress)return Kb=P.yieldResult,za=Kb.cleanupUnusedImports,P.yield(za(Qb,
Lb),3);bb=P.yieldResult;Qb.setStatusMessage(bb);return P.return(!0)})}},{name:"[javascript] eslint report",exec:function(Qb){var Lb,Kb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(za){if(1==za.nextAddress)return za.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);Lb=za.yieldResult;Kb=Lb.default;try{return za.return(Kb.reportOnMorph(Qb))}catch(bb){Qb.showError(bb)}za.jumpToEnd()})}},{name:"[javascript] eslint preview fixes",exec:function(Qb){var Lb,Kb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(za){if(1==
za.nextAddress)return za.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);Lb=za.yieldResult;Kb=Lb.default;try{return za.return(Kb.previewFixesOnMorph(Qb))}catch(bb){Qb.showError(bb)}za.jumpToEnd()})}},{name:"[javascript] auto format code",handlesCount:!0,exec:function(Qb,Lb,Kb){function za(Oc,qb){qb||(qb=wa(Oc,{allowReturnOutsideFunction:!0}));var xd=Db.string.lineRanges(Oc),he=Oc.split("\n"),xc=[],rb=new Db.BaseVisitor,Ld=rb.visitVariableDeclaration;rb.visitVariableDeclaration=
function(J,ta,Ta){if(1<J.declarations.length)for(var tb=Db.string.findLineWithIndexInLineRanges(xd,J.start),Rb=J.declarations[0].start-xd[tb][0],mc={},Zb=1;Zb<J.declarations.length;mc={$jscomp$loop$prop$actionType$2754:mc.$jscomp$loop$prop$actionType$2754,$jscomp$loop$prop$arg$2755:mc.$jscomp$loop$prop$arg$2755},Zb++){var Rc=J.declarations[Zb],Sc=Db.string.findLineWithIndexInLineRanges(xd,Rc.start);if(tb!==Sc){var $d=he[Sc].match(/\s*/)[0].length;$d=Rb-$d;0!==$d&&(Rc=Db.string.findLineWithIndexInLineRanges(xd,
Rc.end),mc.$jscomp$loop$prop$actionType$2754=0<$d?"insert":"delete",mc.$jscomp$loop$prop$arg$2755=0<$d?" ".repeat($d):-$d,xc.push.apply(xc,$jscomp.arrayFromIterable(Db.arr.range(Sc,Rc).map(function(r){return function(Ud){return[r.$jscomp$loop$prop$actionType$2754,xd[Ud][0],r.$jscomp$loop$prop$arg$2755]}}(mc)))))}}return Ld.call(rb,J,ta,Ta)};rb.accept(qb,{},[]);for(qb=xc.length;qb--;){var sb=$jscomp.makeIterator(xc[qb]),hb=sb.next().value,Ba=sb.next().value;sb=sb.next().value;"insert"===hb?Oc=Oc.slice(0,
Ba)+sb+Oc.slice(Ba):"delete"===hb&&(Oc=Oc.slice(0,Ba)+Oc.slice(Ba+sb))}return Oc}var bb,P,X,ya,Ga,wa,ja,lb,Ja,Xb,Kc,Hb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oc){switch(Oc.nextAddress){case 1:return bb=Kb||Math.floor(Qb.width/Qb.defaultCharExtent().width),Lb=Object.assign({printWidth:bb,tabWidth:2,useTabs:!1,bracketSpacing:!1},Lb),P=lively.modules.module,X=System.normalizeSync("prettier/standalone.js"),Oc.yield(P(X).load({format:"global",instrument:!1}),2);case 2:return ya=Oc.yieldResult,
Oc.yield(P("lively.ast/lib/acorn-extension.js").load(),3);case 3:return Oc.yield(P("lively.ast").load(),4);case 4:return Ga=Oc.yieldResult,wa=Ga.parse,Oc.yield(P("lively.ast/lib/query.js").load(),5);case 5:return Oc.yield(System.import("jsdiff",System.decanonicalize("lively.morphic")),6);case 6:return ja=Oc.yieldResult,lb=Qb.selection.isEmpty()?Qb.documentRange:Qb.selection.range,Ja=Qb.positionToIndex(lb.start),Xb=Qb.positionToIndex(lb.end),Kc=ya.format(Qb.textString,Object.assign({},Lb,{rangeStart:Ja,
rangeEnd:Xb,parser:function(qb,xd,he){return wa(qb,{allowReturnOutsideFunction:!0})}})),Qb.undoManager.group(),Hb=ja.diffChars(Qb.textString,Kc),Qb.applyJsDiffPatch(Hb),Qb.selection.text=za(Qb.selection.text),Qb.undoManager.group(),Oc.return(!0)}})}}];Db.jsIdeCommands=gb;Db.jsIdeCommands=gb;Db.jsIdeCommands=gb;var zb=[{name:"selectDefinition",readOnly:!0,bindKey:"Alt-.",exec:function(Qb,Lb){Lb=Qb.pluginInvokeFirst("getNavigator");if(!Lb)return!0;Lb=Lb.resolveIdentifierAt(Qb,Qb.cursorPosition);if(!Lb||
!Lb.id)return Db.show("No symbol identifier selected"),!0;if(!Lb.decl)return Db.show("Cannot find declaration of "+Lb.name),!0;Qb.saveMark();Qb.selection={start:Qb.indexToPosition(Lb.decl.start),end:Qb.indexToPosition(Lb.decl.end)};Qb.scrollCursorIntoView();return!0}},{name:"selectSymbolReferenceOrDeclarationNext",readOnly:!0,multiSelectAction:"single",exec:function(Qb){Qb.execCommand("selectSymbolReferenceOrDeclaration",{direction:"next"})}},{name:"selectSymbolReferenceOrDeclarationPrev",readOnly:!0,
multiSelectAction:"single",exec:function(Qb){Qb.execCommand("selectSymbolReferenceOrDeclaration",{direction:"prev"})}},{name:"selectSymbolReferenceOrDeclaration",doc:"Finds the name of the currently selected symbol and will use the JS ast to select references and declarations whose name matches the symbol in the current scope.",readOnly:!0,multiSelectAction:"single",exec:function(Qb,Lb){Lb=void 0===Lb?{direction:null}:Lb;var Kb=Qb.pluginInvokeFirst("getNavigator");if(!Kb)return!0;Kb=Kb.resolveIdentifierAt(Qb,
Qb.cursorPosition);if(!Kb||!Kb.refs)return Db.show("No symbol identifier selected"),!0;var za=Qb.selection;Kb=Kb.refs.map(function(P){var X=P.end;return Db.Range.fromPositions(Db.iToP(Qb,P.start),Db.iToP(Qb,X))}).concat(Kb.decl?Db.Range.fromPositions(Db.iToP(Qb,Kb.decl.start),Db.iToP(Qb,Kb.decl.end)):[]).sort(Db.Range.compare);if(!Kb.length)return!0;var bb=Kb.map(String).indexOf(String(za.range));if("next"===Lb.direction||"prev"===Lb.direction)-1===bb&&Kb.length?Kb=[Kb[0]]:(Lb=bb+("next"===Lb.direction?
1:-1),0>Lb?Lb=Kb.length-1:Lb>=Kb.length&&(Lb=0),Kb=[Kb[Lb]]);Kb.forEach(function(P){var X=za.selections.findIndex(function(Ga){return Ga.range.equals(P)}),ya=za.selections.length-1;-1<X?Db.arr.swap(za.selections,X,ya):za.addRange(P,!1)});za.mergeSelections();return!0}}];Db.astEditorCommands=zb;Db.astEditorCommands=zb;Db.astEditorCommands=zb;lively.modules&&!lively.FreezerRuntime&&lively.modules.module("lively.ide/js/editor-plugin.js").reload({reloadDeps:!1,resetEnv:!1});var ec=lively.FreezerRuntime.recorderFor("lively.ide/js/mode.js");
ec.expressionAllowed=function(Qb,Lb,Kb){return/^(?:operator|sof|keyword c|case|new|export|default|[\[{}\(,;:]|=>)$/.test(Lb.lastType)||"quasi"==Lb.lastType&&/\{\s*$/.test(Qb.string.slice(0,Qb.pos-(Kb||0)))};ec.passIndent=zc;ec.defineMode=ed;ec.defineMIME=wd;ec.registerHelper=xb;ec.defaultConfig={indentUnit:2};ec.defaultParserConfig={name:"javascript",statementIndent:2,jsonld:!1,json:!1,typescript:!1,wordCharacters:/[\w$\xa1-\uffff]/,globalVars:[],localVars:[],doubleIndentSwitch:null};ec.defineMode("javascript",
function(Qb,Lb){function Kb(Fb,uc,td){fh=Fb;yf=td;return uc}function za(Fb,uc){var td=Fb.next();if('"'==td||"'"==td)return uc.tokenize=bb(td),uc.tokenize(Fb,uc);if("."==td&&Fb.match(/^\d+(?:[eE][+\-]?\d+)?/))return Kb("number","number");if("."==td&&Fb.match(".."))return Kb("spread","meta");if(/[\[\]{}\(\),;:\.]/.test(td))return Kb(td);if("="==td&&Fb.eat(">"))return Kb("=>","operator");if("0"==td&&Fb.eat(/x/i))return Fb.eatWhile(/[\da-f]/i),Kb("number","number");if("0"==td&&Fb.eat(/o/i))return Fb.eatWhile(/[0-7]/i),
Kb("number","number");if("0"==td&&Fb.eat(/b/i))return Fb.eatWhile(/[01]/i),Kb("number","number");if(/\d/.test(td))return Fb.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),Kb("number","number");if("/"==td){if(Fb.eat("*"))return uc.tokenize=P,P(Fb,uc);if(Fb.eat("/"))return Fb.skipToEnd(),Kb("comment","comment");if(ec.expressionAllowed(Fb,uc,1)){a:for(var ud=uc=!1;null!=(td=Fb.next());){if(!uc){if("/"==td&&!ud)break a;"["==td?ud=!0:ud&&"]"==td&&(ud=!1)}uc=!uc&&"\\"==td}Fb.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);
return Kb("regexp","string-2")}Fb.eatWhile(Yg);return Kb("operator","operator",Fb.current())}if("`"==td)return uc.tokenize=X,X(Fb,uc);if("#"==td)return Fb.skipToEnd(),Kb("error","error");if(Yg.test(td))return">"==td&&uc.lexical&&">"==uc.lexical.type||Fb.eatWhile(Yg),Kb("operator","operator",Fb.current());if(ag.test(td))return Fb.eatWhile(ag),Fb=Fb.current(),(td=Oe.propertyIsEnumerable(Fb)&&Oe[Fb])&&"."!=uc.lastType?Kb(td.type,td.style,Fb):Kb("variable","variable",Fb)}function bb(Fb){return function(uc,
td){var ud=!1,Pe;if(Ge&&"@"==uc.peek()&&uc.match(Dg))return td.tokenize=za,Kb("jsonld-keyword","meta");for(;null!=(Pe=uc.next())&&(Pe!=Fb||ud);)ud=!ud&&"\\"==Pe;ud||(td.tokenize=za);return Kb("string","string")}}function P(Fb,uc){for(var td=!1,ud;ud=Fb.next();){if("/"==ud&&td){uc.tokenize=za;break}td="*"==ud}return Kb("comment","comment")}function X(Fb,uc){for(var td=!1,ud;null!=(ud=Fb.next());){if(!td&&("`"==ud||"$"==ud&&Fb.eat("{"))){uc.tokenize=za;break}td=!td&&"\\"==ud}return Kb("quasi","string-2",
Fb.current())}function ya(Fb,uc){uc.fatArrowAt&&(uc.fatArrowAt=null);var td=Fb.string.indexOf("=>",Fb.start);if(!(0>td)){if(Ag){var ud=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Fb.string.slice(Fb.start,td));ud&&(td=ud.index)}ud=0;var Pe=!1;for(--td;0<=td;--td){var sf=Fb.string.charAt(td),Zg="([{}])".indexOf(sf);if(0<=Zg&&3>Zg){if(!ud){++td;break}if(0==--ud){"("==sf&&(Pe=!0);break}}else if(3<=Zg&&6>Zg)++ud;else if(ag.test(sf))Pe=!0;else{if(/["'\/]/.test(sf))return;if(Pe&&!ud){++td;break}}}Pe&&
!ud&&(uc.fatArrowAt=td)}}function Ga(Fb,uc,td,ud,Pe,sf){this.indented=Fb;this.column=uc;this.type=td;this.prev=Pe;this.info=sf;null!=ud&&(this.align=ud)}function wa(){for(var Fb=arguments.length-1;0<=Fb;Fb--)Zd.cc.push(arguments[Fb])}function ja(){wa.apply(null,arguments);return!0}function lb(Fb){function uc(ud){for(;ud;ud=ud.next)if(ud.name==Fb)return!0;return!1}var td=Zd.state;Zd.marked="def";td.context?uc(td.localVars)||(td.localVars={name:Fb,next:td.localVars}):!uc(td.globalVars)&&Lb.globalVars&&
(td.globalVars={name:Fb,next:td.globalVars})}function Ja(){Zd.state.context={prev:Zd.state.context,vars:Zd.state.localVars};Zd.state.localVars=Fh}function Xb(){Zd.state.localVars=Zd.state.context.vars;Zd.state.context=Zd.state.context.prev}function Kc(Fb,uc){var td=function(){var ud=Zd.state,Pe=ud.indented;if("stat"==ud.lexical.type)Pe=ud.lexical.indented;else for(var sf=ud.lexical;sf&&")"==sf.type&&sf.align;sf=sf.prev)Pe=sf.indented;ud.lexical=new Ga(Pe,Zd.stream.column(),Fb,null,ud.lexical,uc)};
td.lex=!0;return td}function Hb(){var Fb=Zd.state;Fb.lexical.prev&&(")"==Fb.lexical.type&&(Fb.indented=Fb.lexical.indented),Fb.lexical=Fb.lexical.prev)}function Oc(Fb){function uc(td){return td==Fb?ja():";"==Fb?wa():ja(uc)}return uc}function qb(Fb,uc){return"var"==Fb?ja(Kc("vardef",uc.length),lc,Oc(";"),Hb):"keyword a"==Fb?ja(Kc("form"),xc,qb,Hb):"keyword b"==Fb?ja(Kc("form"),qb,Hb):"{"==Fb?ja(Kc("}"),ie,Hb):";"==Fb?ja():"if"==Fb?("else"==Zd.state.lexical.info&&Zd.state.cc[Zd.state.cc.length-1]==
Hb&&Zd.state.cc.pop()(),ja(Kc("form"),xc,qb,Hb,Oa)):"function"==Fb?ja(N):"for"==Fb?ja(Kc("form"),Xa,qb,Hb):"variable"==Fb?Ag&&"type"==uc?(Zd.marked="keyword",ja(Wd,Oc("operator"),Wd,Oc(";"))):ja(Kc("stat"),Rc):"switch"==Fb?ja(Kc("form"),xc,Oc("{"),Kc("}","switch"),ie,Hb,Hb):"case"==Fb?ja(xd,Oc(":")):"default"==Fb?ja(Oc(":")):"catch"==Fb?ja(Kc("form"),Ja,Oc("("),oa,Oc(")"),qb,Hb,Xb):"class"==Fb?ja(Kc("form"),cb,Hb):"export"==Fb?ja(Kc("stat"),cc,Hb):"import"==Fb?ja(Kc("stat"),od,Hb):"module"==Fb?ja(Kc("form"),
kd,Oc("{"),Kc("}"),ie,Hb,Hb):"async"==Fb?ja(qb):"@"==uc?ja(xd,qb):wa(Kc("stat"),xd,Oc(";"),Hb)}function xd(Fb){return rb(Fb,!1)}function he(Fb){return rb(Fb,!0)}function xc(Fb){return"("!=Fb?wa():ja(Kc(")"),xd,Oc(")"),Hb)}function rb(Fb,uc){if(Zd.state.fatArrowAt==Zd.stream.start){var td=uc?tb:Ta;if("("==Fb)return ja(Ja,Kc(")"),ke(kd,")"),Hb,Oc("=>"),td,Xb);if("variable"==Fb)return wa(Ja,kd,Oc("=>"),td,Xb)}td=uc?Ba:hb;return Jf.hasOwnProperty(Fb)?ja(td):"function"==Fb?ja(N,td):"class"==Fb?ja(Kc("form"),
Ca,Hb):"keyword c"==Fb||"async"==Fb?ja(uc?sb:Ld):"("==Fb?ja(Kc(")"),Ld,Oc(")"),Hb,td):"operator"==Fb||"spread"==Fb?ja(uc?he:xd):"["==Fb?ja(Kc("]"),Gd,Hb,td):"{"==Fb?le($d,"}",null,td):"quasi"==Fb?wa(J,td):"new"==Fb?ja(Rb(uc)):ja()}function Ld(Fb){return Fb.match(/[;\}\)\],]/)?wa():wa(xd)}function sb(Fb){return Fb.match(/[;\}\)\],]/)?wa():wa(he)}function hb(Fb,uc){return","==Fb?ja(xd):Ba(Fb,uc,!1)}function Ba(Fb,uc,td){var ud=0==td?hb:Ba,Pe=0==td?xd:he;if("=>"==Fb)return ja(Ja,td?tb:Ta,Xb);if("operator"==
Fb)return/\+\+|--/.test(uc)?ja(ud):"?"==uc?ja(xd,Oc(":"),Pe):ja(Pe);if("quasi"==Fb)return wa(J,ud);if(";"!=Fb){if("("==Fb)return le(he,")","call",ud);if("."==Fb)return ja(Sc,ud);if("["==Fb)return ja(Kc("]"),Ld,Oc("]"),Hb,ud)}}function J(Fb,uc){return"quasi"!=Fb?wa():"${"!=uc.slice(uc.length-2)?ja(J):ja(xd,ta)}function ta(Fb){if("}"==Fb)return Zd.marked="string-2",Zd.state.tokenize=X,ja(J)}function Ta(Fb){ya(Zd.stream,Zd.state);return wa("{"==Fb?qb:xd)}function tb(Fb){ya(Zd.stream,Zd.state);return wa("{"==
Fb?qb:he)}function Rb(Fb){return function(uc){return"."==uc?ja(Fb?Zb:mc):wa(Fb?he:xd)}}function mc(Fb,uc){if("target"==uc)return Zd.marked="keyword",ja(hb)}function Zb(Fb,uc){if("target"==uc)return Zd.marked="keyword",ja(Ba)}function Rc(Fb){return":"==Fb?ja(Hb,qb):wa(hb,Oc(";"),Hb)}function Sc(Fb){if("variable"==Fb)return Zd.marked="property",ja()}function $d(Fb,uc){if("async"==Fb)return Zd.marked="property",ja($d);if("variable"==Fb||"keyword"==Zd.style)return Zd.marked="property","get"==uc||"set"==
uc?ja(r):ja(Ud);if("number"==Fb||"string"==Fb)return Zd.marked=Ge?"property":Zd.style+" property",ja(Ud);if("jsonld-keyword"==Fb)return ja(Ud);if("modifier"==Fb)return ja($d);if("["==Fb)return ja(xd,Oc("]"),Ud);if("spread"==Fb)return ja(xd);if(":"==Fb)return wa(Ud)}function r(Fb){if("variable"!=Fb)return wa(Ud);Zd.marked="property";return ja(N)}function Ud(Fb){if(":"==Fb)return ja(he);if("("==Fb)return wa(N)}function ke(Fb,uc,td){function ud(Pe,sf){return(td?-1<td.indexOf(Pe):","==Pe)?(Pe=Zd.state.lexical,
"call"==Pe.info&&(Pe.pos=(Pe.pos||0)+1),ja(function(Zg,rg){return Zg==uc||rg==uc?wa():wa(Fb)},ud)):Pe==uc||sf==uc?ja():ja(Oc(uc))}return function(Pe,sf){return Pe==uc||sf==uc?ja():wa(Fb,ud)}}function le(Fb,uc,td){for(var ud=3;ud<arguments.length;ud++)Zd.cc.push(arguments[ud]);return ja(Kc(uc,td),ke(Fb,uc),Hb)}function ie(Fb){return"}"==Fb?ja():wa(qb,ie)}function yd(Fb,uc){if(Ag){if(":"==Fb)return ja(Wd);if("?"==uc)return ja(yd)}}function Wd(Fb){if("variable"==Fb)return Zd.marked="variable-3",ja(tf);
if("string"==Fb||"number"==Fb||"atom"==Fb)return ja(tf);if("{"==Fb)return ja(Kc("}"),ke(Fe,"}",",;"),Hb);if("("==Fb)return ja(ke(md,")"),De)}function De(Fb){if("=>"==Fb)return ja(Wd)}function Fe(Fb,uc){if("variable"==Fb||"keyword"==Zd.style)return Zd.marked="property",ja(Fe);if("?"==uc)return ja(Fe);if(":"==Fb)return ja(Wd)}function md(Fb){if("variable"==Fb)return ja(md);if(":"==Fb)return ja(Wd)}function tf(Fb,uc){if("<"==uc)return ja(Kc(">"),ke(Wd,">"),Hb,tf);if("|"==uc||"."==Fb)return ja(Wd);if("["==
Fb)return ja(Oc("]"),tf);if("extends"==uc)return ja(Wd)}function lc(){return wa(kd,yd,Ic,qe)}function kd(Fb,uc){if("modifier"==Fb)return ja(kd);if("variable"==Fb)return lb(uc),ja();if("spread"==Fb)return ja(kd);if("["==Fb)return le(kd,"]");if("{"==Fb)return le(ge,"}")}function ge(Fb,uc){if("variable"==Fb&&!Zd.stream.match(/^\s*:/,!1))return lb(uc),ja(Ic);"variable"==Fb&&(Zd.marked="property");return"spread"==Fb?ja(kd):"}"==Fb?wa():ja(Oc(":"),kd,Ic)}function Ic(Fb,uc){if("="==uc)return ja(he)}function qe(Fb){if(","==
Fb)return ja(lc)}function Oa(Fb,uc){if("keyword b"==Fb&&"else"==uc)return ja(Kc("form","else"),qb,Hb)}function Xa(Fb){if("("==Fb)return ja(Kc(")"),Sa,Oc(")"),Hb)}function Sa(Fb){return"var"==Fb?ja(lc,Oc(";"),G):";"==Fb?ja(G):"variable"==Fb?ja(O):wa(xd,Oc(";"),G)}function O(Fb,uc){return"in"==uc||"of"==uc?(Zd.marked="keyword",ja(xd)):ja(hb,G)}function G(Fb,uc){return";"==Fb?ja(Ea):"in"==uc||"of"==uc?(Zd.marked="keyword",ja(xd)):wa(xd,Oc(";"),Ea)}function Ea(Fb){")"!=Fb&&ja(xd)}function N(Fb,uc){if("*"==
uc)return Zd.marked="keyword",ja(N);if("variable"==Fb)return lb(uc),ja(N);if("("==Fb)return ja(Ja,Kc(")"),ke(oa,")"),Hb,yd,qb,Xb);if(Ag&&"<"==uc)return ja(Kc(">"),ke(Wd,">"),Hb,N)}function oa(Fb){return"spread"==Fb?ja(oa):wa(kd,yd,Ic)}function Ca(Fb,uc){return"variable"==Fb?cb(Fb,uc):pb(Fb,uc)}function cb(Fb,uc){if("variable"==Fb)return lb(uc),ja(pb)}function pb(Fb,uc){if("<"==uc)return ja(Kc(">"),ke(Wd,">"),Hb,pb);if("extends"==uc||"implements"==uc||Ag&&","==Fb)return ja(Ag?Wd:xd,pb);if("{"==Fb)return ja(Kc("}"),
yb,Hb)}function yb(Fb,uc){if("variable"==Fb||"keyword"==Zd.style){if(("async"==uc||"static"==uc||"get"==uc||"set"==uc||Ag&&("public"==uc||"private"==uc||"protected"==uc||"readonly"==uc||"abstract"==uc))&&Zd.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return Zd.marked="keyword",ja(yb);Zd.marked="property";return ja(Ag?Yb:N,yb)}if("["==Fb)return ja(xd,Oc("]"),Ag?Yb:N,yb);if("*"==uc)return Zd.marked="keyword",ja(yb);if(";"==Fb)return ja(yb);if("}"==Fb)return ja();if("@"==uc)return ja(xd,yb)}function Yb(Fb,
uc){return"?"==uc?ja(Yb):":"==Fb?ja(Wd,Ic):"="==uc?ja(he):wa(N)}function cc(Fb,uc){return"*"==uc?(Zd.marked="keyword",ja(Td,Oc(";"))):"default"==uc?(Zd.marked="keyword",ja(xd,Oc(";"))):"{"==Fb?ja(ke(Ec,"}"),Td,Oc(";")):wa(qb)}function Ec(Fb,uc){if("as"==uc)return Zd.marked="keyword",ja(Oc("variable"));if("variable"==Fb)return wa(he,Ec)}function od(Fb){return"string"==Fb?ja():wa(Dd,ad,Td)}function Dd(Fb,uc){if("{"==Fb)return le(Dd,"}");"variable"==Fb&&lb(uc);"*"==uc&&(Zd.marked="keyword");return ja(Vd)}
function ad(Fb){if(","==Fb)return ja(Dd,ad)}function Vd(Fb,uc){if("as"==uc)return Zd.marked="keyword",ja(Dd)}function Td(Fb,uc){if("from"==uc)return Zd.marked="keyword",ja(xd)}function Gd(Fb){return"]"==Fb?ja():wa(ke(he,"]"))}Qb=Object.assign({},ec.defaultConfig,{},Qb);Lb=Object.assign({},ec.defaultParserConfig,{},Lb);var Cd=Qb.indentUnit,ve=Lb.statementIndent,Ge=Lb.jsonld,ng=Lb.json||Ge,Ag=Lb.typescript,ag=Lb.wordCharacters||/[\w$\xa1-\uffff]/,Oe=function(){function Fb(rg){return{type:rg,style:"keyword"}}
var uc=Fb("keyword a"),td=Fb("keyword b"),ud=Fb("keyword c"),Pe=Fb("operator"),sf={type:"atom",style:"atom"};uc={if:Fb("if"),while:uc,with:uc,else:td,do:td,try:td,finally:td,return:ud,break:ud,continue:ud,new:Fb("new"),delete:ud,throw:ud,debugger:ud,var:Fb("var"),const:Fb("var"),let:Fb("var"),function:Fb("function"),catch:Fb("catch"),for:Fb("for"),switch:Fb("switch"),case:Fb("case"),default:Fb("default"),in:Pe,typeof:Pe,instanceof:Pe,true:sf,false:sf,null:sf,undefined:sf,NaN:sf,Infinity:sf,this:Fb("this"),
class:Fb("class"),super:Fb("atom"),yield:ud,export:Fb("export"),import:Fb("import"),extends:ud,await:ud,async:Fb("async")};if(Ag){td={type:"variable",style:"variable-3"};ud={interface:Fb("class"),implements:ud,namespace:ud,module:Fb("module"),enum:Fb("module"),public:Fb("modifier"),private:Fb("modifier"),protected:Fb("modifier"),abstract:Fb("modifier"),as:Pe,string:td,number:td,boolean:td,any:td};for(var Zg in ud)uc[Zg]=ud[Zg]}return uc}(),Yg=/[+\-*&%=<>!?|~^@]/,Dg=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,
fh,yf,Jf={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0},Zd={state:null,column:null,marked:null,cc:null},Fh={name:"this",next:{name:"arguments"}};Hb.lex=!0;return{startState:function(Fb){Fb={tokenize:za,lastType:"sof",cc:[],lexical:new Ga((Fb||0)-Cd,0,"block",!1),localVars:Lb.localVars,context:Lb.localVars&&{vars:Lb.localVars},indented:Fb||0};Lb.globalVars&&"object"===typeof Lb.globalVars&&(Fb.globalVars=Lb.globalVars);return Fb},token:function(Fb,uc){Fb.sol()&&(uc.lexical.hasOwnProperty("align")||
(uc.lexical.align=!1),uc.indented=Fb.indentation(),ya(Fb,uc));if(uc.tokenize!=P&&Fb.eatSpace())return null;var td=uc.tokenize(Fb,uc);if("comment"==fh)return td;uc.lastType="operator"!=fh||"++"!=yf&&"--"!=yf?fh:"incdec";a:{var ud=fh,Pe=yf,sf=uc.cc;Zd.state=uc;Zd.stream=Fb;Zd.marked=null;Zd.cc=sf;Zd.style=td;uc.lexical.hasOwnProperty("align")||(uc.lexical.align=!0);for(Fb=0;;){if(1E5<Fb++)throw Error("endless");if((sf.length?sf.pop():ng?xd:qb)(ud,Pe)){for(;sf.length&&sf[sf.length-1].lex;)sf.pop()();
if(Zd.marked){td=Zd.marked;break a}if(ud="variable"==ud)b:{for(ud=uc.localVars;ud;ud=ud.next)if(ud.name==Pe){ud=!0;break b}for(uc=uc.context;uc;uc=uc.prev)for(ud=uc.vars;ud;ud=ud.next)if(ud.name==Pe){ud=!0;break b}ud=void 0}if(ud){td="variable-2";break a}break a}}}return td},indent:function(Fb,uc){if(Fb.tokenize==P)return ec.passIndent;if(Fb.tokenize!=za)return 0;var td=uc&&uc.charAt(0),ud=Fb.lexical,Pe;if(!/^\s*else\b/.test(uc))for(var sf=Fb.cc.length-1;0<=sf;--sf){var Zg=Fb.cc[sf];if(Zg==Hb)ud=
ud.prev;else if(Zg!=Oa)break}for(;!("stat"!=ud.type&&"form"!=ud.type||"}"!=td&&(!(Pe=Fb.cc[Fb.cc.length-1])||Pe!=hb&&Pe!=Ba||/^[,\.=+\-*:?[\(]/.test(uc)));)ud=ud.prev;ve&&")"==ud.type&&"stat"==ud.prev.type&&(ud=ud.prev);Pe=ud.type;sf=td==Pe;return(Zg=Fb._string)&&Zg.trimLeft().startsWith("?")&&":"===td?Zg.indexOf("?"):Zg&&":"===Fb.lastType&&"}"!==ud.type?Zg.match(/^\s*/)[0].length:"vardef"==Pe?(uc=ud.indented+ud.info+2+Fb.localVars.name.length,"?"===td||":"===td||"|"===td||"&"===td?uc:","==Fb.lastType?
ud.indented+ud.info+1:"operator"==Fb.lastType?uc+3:ud.indented):"form"==Pe&&"{"==td?ud.indented:"form"==Pe?ud.indented+Cd:"stat"==Pe?(td=ud.indented,Fb="operator"==Fb.lastType||","==Fb.lastType||Yg.test(uc.charAt(0))||/[,.]/.test(uc.charAt(0)),td+(Fb?ve||Cd:0)):"switch"!=ud.info||sf||0==Lb.doubleIndentSwitch?ud.align?ud.column+(sf?0:1):ud.indented+(sf?0:Cd):ud.indented+(/^(?:case|default)\b/.test(uc)?Cd:2*Cd)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:ng?null:"/*",blockCommentEnd:ng?
null:"*/",lineComment:ng?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:ng?"json":"javascript",jsonldMode:Ge,jsonMode:ng,expressionAllowed:ec.expressionAllowed,skipExpression:function(Fb){var uc=Fb.cc[Fb.cc.length-1];uc!=xd&&uc!=he||Fb.cc.pop()}}});ec.registerHelper("wordChars","javascript",/[\w$]/);ec.defineMIME("text/javascript","javascript");ec.defineMIME("text/ecmascript","javascript");ec.defineMIME("application/javascript","javascript");ec.defineMIME("application/x-javascript",
"javascript");ec.defineMIME("application/ecmascript","javascript");ec.defineMIME("application/json",{name:"javascript",json:!0});ec.defineMIME("application/x-json",{name:"javascript",json:!0});ec.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});ec.defineMIME("text/typescript",{name:"javascript",typescript:!0});ec.defineMIME("application/typescript",{name:"javascript",typescript:!0});var rc=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js");rc.string=tc;rc.JavaScriptChecker=
Qc;rc.JavaScriptNavigator=ic;rc.completers=Cb;rc.jsSnippets=Ma;rc.jsIdeCommands=gb;rc.jsEditorCommands=bc;rc.astEditorCommands=zb;rc.CodeMirrorEnabledEditorPlugin=hc;rc.Snippet=fb;rc.parser=ee;rc.localInterface=rd;rc.systemInterfaceNamed=Ab;rc.serverInterfaceFor=qc;rc.l2lInterfaceFor=Xc;Qc=function(Qb){var Lb=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js"),Kb=Lb.hasOwnProperty("JavaScriptEditorPlugin")&&"function"===typeof Lb.JavaScriptEditorPlugin?Lb.JavaScriptEditorPlugin:Lb.JavaScriptEditorPlugin=
function(za){za&&za[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return mb(Kb,Qb,[{key:Symbol.for("lively-instance-initialize"),value:function(){mb._get(Object.getPrototypeOf(Kb.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.checker=new rc.JavaScriptChecker;this.evalEnvironment={format:"esm",targetModule:null,context:null}}},{key:"isJSEditorPlugin",get:function(){return!0}},{key:"shortName",get:function(){return"js"}},
{key:"longName",get:function(){return"javascript"}},{key:"attach",value:function(za){mb._get(Object.getPrototypeOf(Kb.prototype),"attach",this).call(this,za);this.evalEnvironment=Object.assign({},this.evalEnvironment,{context:za})}},{key:"detach",value:function(za){this.checker.uninstall(this.textMorph);mb._get(Object.getPrototypeOf(Kb.prototype),"detach",this).call(this,za)}},{key:"getNavigator",value:function(){return new rc.JavaScriptNavigator}},{key:"getCompleters",value:function(za){return rc.completers.concat(za)}},
{key:"getCommands",value:function(za){return[].concat($jscomp.arrayFromIterable(mb._get(Object.getPrototypeOf(Kb.prototype),"getCommands",this).call(this,za)),$jscomp.arrayFromIterable(rc.jsIdeCommands),$jscomp.arrayFromIterable(rc.jsEditorCommands),$jscomp.arrayFromIterable(rc.astEditorCommands))}},{key:"getKeyBindings",value:function(za){return[].concat($jscomp.arrayFromIterable(za),[{keys:"Shift-Tab",command:{command:"[javascript] auto format code"}},{keys:"Ctrl-C E",command:"[javascript] list errors and warnings"},
{keys:{mac:"Meta-Shift-L L I N T R",win:"Ctrl-Shift-L L I N T R"},command:"[javascript] eslint report"},{keys:{mac:"Meta-Shift-L L I N T P",win:"Ctrl-Shift-L L I N T P"},command:"[javascript] eslint preview fixes"},{keys:{mac:"Meta-Shift-L L I N T F",win:"Ctrl-Shift-L L I N T F"},command:"[javascript] eslint fix"},{keys:{mac:"Meta-Shift-L M O D E",win:"Ctrl-Shift-L M O D E"},command:"change editor mode"},{keys:"Ctrl-C I",command:"[javascript] inject import"},{keys:"Ctrl-C C I",command:"[javascript] fix undeclared variables"}])}},
{key:"getMenuItems",value:function(za){var bb=this,P,X,ya,Ga,wa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ja){P=bb.textMorph;X=[{command:"doit",target:P,showKeyShortcuts:!0},{command:"inspectit",target:P,showKeyShortcuts:!0},{command:"editit",target:P,showKeyShortcuts:!0},{command:"printit",target:P,showKeyShortcuts:!0},{command:"print inspectit",alias:"print inspect",target:P,showKeyShortcuts:!0},{command:"eval all",target:P,showKeyShortcuts:!0},{command:"text completion",alias:"code completion",
target:P,showKeyShortcuts:!0},{command:"[javascript] list errors and warnings",alias:"list errors and warnings",target:P,showKeyShortcuts:!0},{isDivider:!0}];bb.evalEnvironment.targetModule&&X.push({command:"[javascript] inject import",alias:"add import",target:P},{command:"[javascript] fix undeclared variables",alias:"fix undeclared variables",target:P},{command:"[javascript] remove unused imports",alias:"remove unused imports",target:P});ya=bb.getNavigator();(Ga=ya.resolveIdentifierAt(P,P.cursorPosition))&&
X.push({command:"selectDefinition",alias:'jump to definition of "'+Ga.name+'"',target:P},{command:"selectSymbolReferenceOrDeclaration",alias:'select all occurrences of "'+Ga.name+'"',target:P});(wa=P.selection.text.trim())&&X.push({command:"open code search",alias:'code search for "'+rc.string.truncate(wa,30)+'"',target:P.world(),args:{input:wa,backend:bb.backend()}});X.push({isDivider:!0});return ja.return(X.concat(za))})}},{key:"getSnippets",value:function(){return rc.jsSnippets.map(function(za){var bb=
$jscomp.makeIterator(za);za=bb.next().value;bb=bb.next().value;return new rc.Snippet({trigger:za,expansion:bb})})}},{key:"sanatizedJsEnv",value:function(za){za=Object.assign({},this.evalEnvironment,{},za);za.format||(za.formatd="esm");za.context||(za.context=this.textMorph);za.sourceURL||(za.sourceURL=za.targetModule+"_doit_"+Date.now());za.systemInterface||(za.systemInterface=rc.localInterface);return za}},{key:"backend",value:function(za){za=this.sanatizedJsEnv(za);return za.remote?za.remote:"local"}},
{key:"systemInterface",value:function(za){return this.sanatizedJsEnv(za).systemInterface||rc.localInterface}},{key:"setSystemInterface",value:function(za){return this.evalEnvironment.systemInterface=za}},{key:"setSystemInterfaceNamed",value:function(za){return this.setSystemInterface(rc.systemInterfaceNamed(za))}},{key:"runEval",value:function(za,bb){bb=this.sanatizedJsEnv(bb);return this.systemInterface(bb).runEval(za,bb)}},{key:"parser",get:function(){return rc.parser}},{key:"parse",value:function(za){za=
void 0===za?null:za;if(this._ast&&this._ast._astType===za)return this._ast;var bb=this.parser,P=this.textMorph.textString;if(!bb)return null;var X={withComments:!0,allowReturnOutsideFunction:!0};za&&(X.type=za);if(P.startsWith("#!")){var ya=P.indexOf("\n");P=" ".repeat(ya)+P.slice(ya)}bb=bb.fuzzyParse(P,X);bb._astType=za;return this._ast=bb}},{key:"undeclaredVariables",value:function(za){var bb=this.parser,P=this.evalEnvironment.knownGlobals||[];za=this.parse(void 0===za?null:za);return bb&&za?bb.query.findGlobalVarRefs(za,
{jslintGlobalComment:!0}).filter(function(X){return!P.includes(X.name)}):[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptEditorPlugin"}}],Lb,{pathInPackage:function(){return"js/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:664,end:6857})}(rc.CodeMirrorEnabledEditorPlugin);Qc=rc.JavaScriptEditorPlugin;
Ia("default",Qc);rc.default=Qc}}});