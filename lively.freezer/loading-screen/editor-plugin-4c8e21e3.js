System.register(["./__root_module__-cc486366.js","kld-intersections","./index-cf58f727.js","./editor-plugin-18318b1e.js","./index-a2859d96.js"],function(ta){var mb,tb,Tb,Jb,rd,yc,vd,zc,Ec,Mc,zd,ne,De,Xd,Qb,qc,ld,Pb,ud,Ed,vc,ac,Eb,ec;return{setters:[function(wc){mb=wc.aw;tb=wc.bA;Tb=wc.bB;Jb=wc.bC;rd=wc.E;yc=wc.au;vd=wc.aY;zc=wc.a7;Ec=wc.ae;Mc=wc.bn;zd=wc.a6;ne=wc.$;De=wc.bD;Xd=wc.bu},function(){},function(wc){Qb=wc.s},function(wc){qc=wc.p;ld=wc.d;Pb=wc.a;ud=wc.r;Ed=wc.C},function(wc){vc=wc.localInterface;
ac=wc.systemInterfaceNamed;Eb=wc.serverInterfaceFor;ec=wc.l2lInterfaceFor}],execute:function(){var wc=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js");wc.warnStyle={"border-bottom":"2px dotted orange"};wc.errorStyle={"background-color":"red"};var fd=function(ab){var U=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js"),ua=U.hasOwnProperty("JavaScriptChecker")&&"function"===typeof U.JavaScriptChecker?U.JavaScriptChecker:U.JavaScriptChecker=function(M){M&&M[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return mb(ua,ab,[{key:"uninstall",value:function(M){var ea=M.text||M;(ea.markers||[]).forEach(function(Ka){return Ka.id.startsWith("js-checker-")&&ea.removeMarker(Ka)});ea.removeMarker("js-syntax-error")}},{key:"hasEmbeddedMorphInRange",value:function(M,ea){return[].concat($jscomp.arrayFromIterable(M.embeddedMorphMap.values())).find(function(Ka){return ea.containsPosition(Ka.anchor.position)})}},{key:"onDocumentChange",value:function(M,
ea,Ka){var Za=ea.document;try{var $b=Ka.parse()}catch(Qc){$b=Qc}$b&&(M=(ea.markers||[]).filter(function(Qc){return Qc.id.startsWith("js-checker-")}),Ka=Ka.undeclaredVariables().map(function(Qc,Ub){var vb=Qc.start;Qc=Qc.end;vb=Za.indexToPosition(vb);Qc=Za.indexToPosition(Qc);return ea.addMarker({id:"js-checker-"+Ub,style:wc.warnStyle,range:{start:vb,end:Qc},type:"js-undeclared-var"})}),M.slice(Ka.length).forEach(function(Qc){return ea.removeMarker(Qc)}),$b.parseError?(M=$b.parseError.loc,Ka=M.column,
M=M.line-1,$b=Za.indexToPosition($b.parseError.pos),Ka=$b.column,M=$b.row,$b={start:{column:Ka-1,row:M},end:{column:Ka+1,row:M}},this.hasEmbeddedMorphInRange(ea,$b)||ea.addMarker({id:"js-syntax-error",range:$b,style:wc.errorStyle,type:"js-syntax-error"})):ea.removeMarker("js-syntax-error"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptChecker"}}],U,{pathInPackage:function(){return"js/checker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:126,end:1896})}(void 0),cd=fd=wc.JavaScriptChecker;wc.default=fd;var pc=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js");pc.query=tb;pc.fuzzyParse=Tb;pc.acorn=Jb;pc.custom=rd;var cb=function(ab){var U=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js"),ua=U.hasOwnProperty("JavaScriptNavigator")&&"function"===typeof U.JavaScriptNavigator?
U.JavaScriptNavigator:U.JavaScriptNavigator=function(M){M&&M[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return mb(ua,ab,[{key:"ensureAST",value:function(M){return this.parse(M.textString)}},{key:"parse",value:function(M){return pc.fuzzyParse(M)}},{key:"move",value:function(M,ea){var Ka=!!ea.activeMark||!ea.selection.isEmpty(),Za=ea.selection,$b=ea.positionToIndex(Za.lead);M=this[M](ea.textString,$b);M=ea.indexToPosition(M);Za.lead=
M;Ka||(Za.anchor=M);ea.scrollCursorIntoView()}},{key:"forwardSexp",value:function(M){this.move("_forwardSexp",M)}},{key:"backwardSexp",value:function(M){this.move("_backwardSexp",M)}},{key:"backwardUpSexp",value:function(M){this.move("_backwardUpSexp",M)}},{key:"forwardDownSexp",value:function(M){this.move("_forwardDownSexp",M)}},{key:"_forwardSexp",value:function(M,ea){M=this.parse(M);M=pc.custom.findNodesIncluding(M,ea).reverse().find(function(Za){return Za.end!==ea});if(!M)return ea;if("BlockStatement"===
M.type){var Ka=M.body.find(function(Za){return Za.start>ea});if(Ka)return Ka.start}return M.end}},{key:"_backwardSexp",value:function(M,ea){M=this.parse(M);M=pc.custom.findNodesIncluding(M,ea).reverse().find(function(Za){return Za.start!==ea});if(!M)return ea;if("BlockStatement"===M.type){var Ka=M.body.slice().reverse().find(function(Za){return Za.end<ea});if(Ka)return Ka.end}return M?M.start:ea}},{key:"_backwardUpSexp",value:function(M,ea){M=this.parse(M);return(M=pc.custom.findNodesIncluding(M,
ea).reverse().find(function(Ka){return Ka.start!==ea}))?M.start:ea}},{key:"_forwardDownSexp",value:function(M,ea){M=this.parse(M);return(M=pc.custom.findNodeAfter(M,ea,function(Ka,Za){return Za.start>ea}))?M.node.start:ea}},{key:"markDefun",value:function(M){var ea=this.rangeForFunctionOrDefinition(M.textString,[M.positionToIndex(M.selection.range.start),M.positionToIndex(M.selection.range.end)]);ea&&M.execCommand("expandRegion",{start:ea[0],end:ea[1]})}},{key:"rangeForNodesMatching",value:function(M,
ea,Ka){M=this.parse(M);return(ea=pc.custom.findNodesIncluding(M,ea).reverse().find(Ka))?[ea.start,ea.end]:null}},{key:"rangeForFunctionOrDefinition",value:function(M,ea){var Ka=ea[0]===ea[1];return this.rangeForNodesMatching(M,ea[1],function(Za){return["AssignmentExpression","FunctionDeclaration","FunctionExpression","MethodDefinition"].includes(Za.type)&&(Ka&&Za.end!==ea[1]||!Ka&&Za.start<ea[0])?!0:!1})}},{key:"resolveIdentifierAt",value:function(M,ea){"number"!==typeof ea&&(ea=M.positionToIndex(ea));
M=this.ensureAST(M);var Ka=pc.query.nodesAt(ea,M).reverse(),Za=Ka.find(function(Qc){return"Identifier"===Qc.type});if(!Za&&((Ka=Ka[0])&&Ka.type.includes("Specifier")&&Ka.local&&"Identifier"===Ka.local.type&&(Za=Ka.local),!Za))return;ea=(Ka=pc.query.findDeclarationClosestToIndex(M,Za.name,ea))?pc.query.scopeAtIndex(M,Ka.start):pc.query.scopeAtIndex(M,ea);var $b=pc.query.findReferencesAndDeclsInScope(ea,Za.name).refs;return{parsed:M,scope:ea,id:Za,name:Za.name,decl:Ka,refs:$b}}},{key:"expandRegion",
value:function(M,ea,Ka,Za){function $b(pd){pd=M.positionToIndex({column:0,row:Ub.row});return{range:[pd+vb.start,pd+vb.start+vb.value.length],prev:Za}}var Qc=Za.range[0]!==Za.range[1],Ub=M.indexToPosition(Za.range[0]),vb=M.tokenAt(Ub);if(!Qc&&vb&&["keyword","identifier"].includes(vb.type))return $b();Ka=Ka||this.parse(ea);ea=pc.query.nodesAtIndex(Ka,Za.range[0]).reverse().find(function(pd){return pd.start<Za.range[0]||pd.end>Za.range[1]});if(!ea)return Za;Ka=ea.start;Qc=ea.end;return"Literal"===ea.type&&
(ea.raw||"").match(/^['"`]/)&&Za.range[0]!==ea.start&&Za.range[1]!==ea.end&&(ea.start+1<Za.range[0]||ea.end-1>Za.range[1])?{range:[Ka+1,Qc-1],prev:Za}:{range:[Ka,Qc],prev:Za}}},{key:"contractRegion",value:function(M,ea,Ka,Za){return Za.prev||Za}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptNavigator"}}],U,{pathInPackage:function(){return"js/navigator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:121,end:6780})}(void 0);fd=cb=pc.JavaScriptNavigator;pc.default=cb;var fb=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js");fb.addIndexToTextPos=function(ab,U,ua){return ab.indexToPosition(ab.positionToIndex(U)+ua)};fb.connect=yc;fb.disconnect=vd;fb.string=zc;fb.KeyHandler=Ec;fb.Range=Mc;cb=function(ab){var U=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js"),ua=U.hasOwnProperty("Snippet")&&"function"===
typeof U.Snippet?U.Snippet:U.Snippet=function(M){M&&M[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return mb(ua,ab,[{key:Symbol.for("lively-instance-initialize"),value:function(M){M=void 0===M?{trigger:null,expansion:""}:M;var ea=M.expansion;this.trigger=M.trigger;this.expansion=ea;this.resetExpansionState()}},{key:"isTextSnippet",get:function(){return!0}},{key:"attach",value:function(M){this.isExpanding&&(this.textMorph=M,fb.connect(this.textMorph,
"selectionChange",this,"onCursorMove"))}},{key:"detach",value:function(M){this.isExpanding&&(fb.disconnect(M,"selectionChange",this,"onCursorMove"),this.textMorph=null)}},{key:"onCursorMove",value:function(){var M=this.expansionState,ea=M.startAnchor,Ka=M.endAnchor;M.isExpanding?fb.Range.fromPositions(ea.position,Ka.position).containsPosition(this.textMorph.cursorPosition)||this.resetExpansionState():this.resetExpansionState()}},{key:"resetExpansionState",value:function(){var M=this.textMorph;if(M){var ea=
this.expansionState||{},Ka=ea.marker,Za=ea.startAnchor,$b=ea.endAnchor;ea=ea.steps;Za&&M.removeAnchor(Za);$b&&M.removeAnchor($b);Ka&&M.removeMarker(Ka);ea.forEach(function(Qc){return M.removeAnchor(Qc.anchor)})}this.expansionState={stepIndex:-1,steps:[],isExpanding:!1,startMarker:null,endMarker:null};M&&M.removePlugin(this)}},{key:"isExpanding",get:function(){return this.expansionState.isExpanding}},{key:"createExpansionSteps",value:function(M){var ea=[],Ka=0;fb.string.reMatches(M,/\$[0-9]+|\$\{[0-9]+:[^\}]*\}/g).forEach(function(Za){var $b=
Za.start,Qc=Za.end;Za=Za.match;var Ub="";Za.startsWith("${")?(Ub=$jscomp.makeIterator(Za.match(/^\$\{([0-9]+):([^\}]*)\}/)),Ub.next(),Za=Ub.next().value,Ub=Ub.next().value,Za=Number(Za)):Za=Number(Za.replace(/^\$/,""));M=M.slice(0,$b-Ka)+Ub+M.slice(Qc-Ka);ea[Za]={index:$b-Ka,prefill:Ub,anchor:null};Ka+=Qc-$b-Ub.length});return{steps:ea,expansion:M}}},{key:"expandAtCursor",value:function(M){var ea=M.selection,Ka=M.cursorPosition.column,Za=this.expansion;this.trigger&&(Ka-=this.trigger.length);if(Ka=
Math.max(0,Ka))Za=fb.string.lines(Za),Za=[Za[0]].concat($jscomp.arrayFromIterable(Za.slice(1).map(function($c){return fb.string.indent($c," ",Ka)}))),Za=Za.join("\n");var $b=this.createExpansionSteps(Za);Za=$b.expansion;$b=$b.steps;this.trigger&&ea.growLeft(this.trigger.length);ea.text=Za;var Qc=ea.start;Za=ea.end;ea.collapseToEnd();if($b.length){var Ub=fb.string.newUUID();$b.forEach(function($c,Ta){return $c.anchor=M.addAnchor(Object.assign({id:"snippet-step-"+Ta+"-"+Ub},fb.addIndexToTextPos(M,Qc,
$c.index)))});var vb=M.addAnchor(Object.assign({id:"snippet-start-"+Ub},Qc,{insertBehavior:"stay"})),pd=M.addAnchor(Object.assign({id:"snippet-end-"+Ub},Za));this.expansionState={marker:M.addMarker({id:"snippet-marker-"+Ub,get range(){return{start:vb.position,end:pd.position}},style:{"border-radius":"4px","background-color":"rgba(30, 200, 140, 0.3)","box-shadow":"0 0 4px rgba(30, 200, 140, 0.3)","pointer-events":"none",content:"fooooo"}}),startAnchor:vb,endAnchor:pd,stepIndex:0,steps:$b,isExpanding:!0};
M.addPlugin(this);this.nextStep()}}},{key:"nextStep",value:function(){var M=this.expansionState,ea=M.steps,Ka=this.textMorph;if(M.isExpanding&&Ka){Ka=Ka.selection;M=ea[M.stepIndex];var Za=M.prefill;Ka.lead=Ka.anchor=M.anchor.position;Ka.growRight(Za.length);this.expansionState.stepIndex++;this.expansionState.stepIndex>=ea.length&&(this.resetExpansionState(),console.log("[snippet] expansion of "+this.expansion+" done"))}}},{key:"canExpand",value:function(M,ea){ea=M.positionToIndex(M.cursorPosition);
return M.textString.slice(ea-this.trigger.length,ea)===this.trigger}},{key:"tryTrigger",value:function(M,ea){if(!this.canExpand(M,M.cursorPosition))return!1;this.expandAtCursor(M);return!0}},{key:"getCommands",value:function(M){var ea=this;return M.concat([{name:"[snippet] next expansion step",exec:function(Ka){ea.nextStep();return!0}},{name:"[snippet] cancel expansion",exec:function(Ka){ea.resetExpansionState();return!0}}])}},{key:"getKeyHandlers",value:function(M){return M.concat(fb.KeyHandler.withBindings([{keys:"Tab",
command:"[snippet] next expansion step"},{keys:"Escape",command:"[snippet] cancel expansion"}]))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Snippet"}}],U,{pathInPackage:function(){return"text/snippets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:357,end:6029})}(void 0);fb.Snippet=cb;fb.Snippet=cb;fb.Snippet=
cb;var ya=[{name:"get snippets",exec:function(ab){return ab.pluginCollect("getSnippets",[])}}];fb.snippetCommands=ya;fb.snippetCommands=ya;fb.snippetCommands=ya;var Ea=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js");Ea.buildEvalOpts=function(ab,U){return ab.plugins.find(function(ua){return ua.isJSEditorPlugin}).sanatizedJsEnv(U)};Ea.Snippet=cb;ya=function(ab){var U=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),ua=U.hasOwnProperty("ModuleTopLevelVarCompleter")&&
"function"===typeof U.ModuleTopLevelVarCompleter?U.ModuleTopLevelVarCompleter:U.ModuleTopLevelVarCompleter=function(M){M&&M[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return mb(ua,ab,[{key:"compute",value:function(M,ea){var Ka,Za,$b,Qc,Ub,vb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pd){if(1==pd.nextAddress){Za=(Ka=M.pluginFind(function($c){return $c.isJSEditorPlugin}))&&Ka.systemInterface();if(!Za)return pd.return([]);
$b=Ea.buildEvalOpts(M);Qc=$b.targetModule;return"local"===Za.name?(Ub=Object.getOwnPropertyNames(Za.getModule(Qc).recorder),pd.jumpTo(2)):pd.yield(Za.runEval('\n        var result, livelySystem = typeof System !== "undefined"\n                      && System.get(System.decanonicalize("lively-system-interface"));\n        if (livelySystem) {\n          result = JSON.stringify(\n            Object.getOwnPropertyNames(livelySystem.localInterface.getModule("'+Qc+'").recorder));\n        } else {\n          var G = typeof window !== "undefined" ?\n            window : typeof global !== "undefined" ? global : this;\n          result = JSON.stringify(Object.getOwnPropertyNames(G));\n        }\n        result;\n      ',
{targetModule:"lively://module-recorder-completer"}),3)}if(2!=pd.nextAddress){vb=pd.yieldResult;if(vb.isError)return pd.return([]);Ub=JSON.parse(vb.value)}Ub=Ub.filter(function($c){return!$c.startsWith("defVar_")&&!["System","__currentLivelyModule","initializeES6ClassForLively","_moduleExport","_moduleImport"].includes($c)});return pd.return(Ub.map(function($c){return{priority:1100,completion:$c}}))})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModuleTopLevelVarCompleter"}}],
U,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:227,end:1700})}(void 0);Ea.ModuleTopLevelVarCompleter=ya;Ea.ModuleTopLevelVarCompleter=ya;Ea.ModuleTopLevelVarCompleter=ya;ya=function(ab){var U=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),ua=U.hasOwnProperty("DynamicJavaScriptCompleter")&&
"function"===typeof U.DynamicJavaScriptCompleter?U.DynamicJavaScriptCompleter:U.DynamicJavaScriptCompleter=function(M){M&&M[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return mb(ua,ab,[{key:"isValidPrefix",value:function(M){return/\.[a-z0-9_]*$/i.test(M)}},{key:"isMethodCallCompletion",value:function(M){return M.endsWith(")")&&0<M.indexOf("(")}},{key:"isValidIdentifier",value:function(M){if("string"!==typeof M)return!1;this.isMethodCallCompletion(M)&&
(M=M.slice(0,M.indexOf("(")));return/^[a-z_\$][0-9a-z_\$]*$/i.test(M)?!0:!1}},{key:"wrapInBrackets",value:function(M){if(!isNaN(Number(M))||M.startsWith("Symbol."))return"["+M+"]";var ea="";this.isMethodCallCompletion(M)&&(ea=M.slice(M.indexOf("(")),M=M.slice(0,M.indexOf("(")));return'["'+M.replace(/"/g,'\\"')+'"]'+ea}},{key:"compute",value:function(M){var ea=this,Ka,Za,$b,Qc,Ub,vb,pd,$c,Ta,nb,xc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress){Ka=M.selection;
Ka.isEmpty()?(Za=M.getLine(Ka.lead.row),Za=Za.slice(Za.lastIndexOf(":")+1,Ka.lead.column)):Za=Ka.text.slice(Math.max(0,Ka.text.indexOf(":")),0);if(!ea.isValidPrefix(Za))return bb.return([]);Qc=($b=M.pluginFind(function(Bc){return Bc.isJSEditorPlugin}))&&$b.systemInterface();if(!Qc)return bb.return([]);Ub=Ea.buildEvalOpts(M);return bb.yield(Qc.dynamicCompletionsForPrefix(Ub.targetModule,Za,Ub),2)}vb=bb.yieldResult;pd=vb.isError;$c=vb.value;Ta=vb.completions;nb=vb.prefix;if(pd)return console.warn("javascript completer encountered error: "+
($c.stack||$c)),bb.return([]);Ta.reduce(function(Bc,uc){uc=$jscomp.makeIterator(uc);uc.next();uc=uc.next().value;return Bc+uc.length},0);xc=Ta.reduce(function(Bc,uc,Sa){uc=$jscomp.makeIterator(uc);var Da=uc.next().value;uc=uc.next().value;return Bc.concat(uc.map(function(Ya){var Na=ea.isValidIdentifier(Ya);return{info:Da,completion:Ya,prefix:Na?nb:"."+nb,customInsertionFn:Na?ea.isMethodCallCompletion(Ya)?function(oc,aa,na,gb){aa=gb.start;gb=gb.end;oc=oc.replace(/\((.*)\)/,function(H){return"("+H.slice(1,
-1).split(", ").map(function(ha,Ga){return"${"+Ga+":"+ha+"}"}).join(", ")+")"});oc=new Ea.Snippet({expansion:oc});na.replace({start:aa,end:gb},"");oc.expandAtCursor(na)}:null:function(oc,aa,na,gb){oc=gb.start;gb=gb.end;aa={row:oc.row,column:oc.column-1};gb="."===na.textInRange({start:aa,end:oc})?{start:aa,end:gb}:{start:oc,end:gb};na.replace(gb,ea.wrapInBrackets(Ya))}}}))},[]);xc.forEach(function(Bc,uc){return Object.assign(Bc,{priority:2E3+xc.length-uc})});return bb.return(xc)})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"DynamicJavaScriptCompleter"}}],U,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1709,end:5085})}(void 0);Ea.DynamicJavaScriptCompleter=ya;Ea.DynamicJavaScriptCompleter=ya;Ea.DynamicJavaScriptCompleter=ya;Ea.keywords="arguments boolean break case catch class const continue debugger default delete eval export import extends false true finally instanceof static super this throw typeof while with yield await Array Date eval function hasOwnProperty Infinity isFinite isNaN isPrototypeOf length Math NaN name Number Object prototype String toString undefined valueOf alert assign clearInterval clearTimeout decodeURI decodeURIComponent document encodeURI encodeURIComponent escape navigator parseFloat parseInt setInterval setTimeout window document requestAnimationFrame cancelAnimationFrame".split(" ");
ya=function(ab){var U=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),ua=U.hasOwnProperty("JavaScriptKeywordCompleter")&&"function"===typeof U.JavaScriptKeywordCompleter?U.JavaScriptKeywordCompleter:U.JavaScriptKeywordCompleter=function(M){M&&M[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return mb(ua,ab,[{key:"compute",value:function(M,ea){return Ea.keywords.map(function(Ka){return{completion:Ka,priority:0}})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"JavaScriptKeywordCompleter"}}],U,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:6087,end:6225})}(void 0);Ea.JavaScriptKeywordCompleter=ya;Ea.JavaScriptKeywordCompleter=ya;Ea.JavaScriptKeywordCompleter=ya;ya=[new Ea.DynamicJavaScriptCompleter,new Ea.JavaScriptKeywordCompleter,
new Ea.ModuleTopLevelVarCompleter];Ea.completers=ya;Ea.completers=ya;Ea.completers=ya;var Ba=lively.FreezerRuntime.recorderFor("lively.ide/js/snippets.js");Ba.Snippet=cb;var xa=[["typef",'typeof ${0:object} === "function"$1'],["types",'typeof ${0:object} === "string"$1'],["typen",'typeof ${0:object} === "number"$1'],["typeu",'typeof ${0:object} === "undefined"$1'],["typenu",'typeof ${0:object} !== "undefined"$1'],["import",'import { ${0:name} } from "${1:module}";'],["importd",'import ${0:name} from "${1:module}";'],
["import*",'import * as ${0:name} from "${1:module}";'],["subclass","class ${0:name} extends ${1:base} {\n  constructor(${2:args}) {\n    super(${3:args})\n    $4\n  }\n}"],["class","class ${0:name} {\n  constructor(${1:args}) {\n    $2\n  }\n}"],["switch","switch (${0:expression}) {\n  case '${2:case}':\n    ${3:// code}\n    break;\n    $4\n    default:\n    ${1:// code}\n}"],["tryf","try {${0:/* code */}} finally {}"],["try","try {${0:/* code */}} catch (err) {}"],["do","do {${1:/* code */}} while (${0:/* condition */});"],
["fori","for (let ${0:prop} in ${1:obj}) {\n  ${2:obj[prop]}\n}"],["foro","for (let ${0:value} of ${1:iterable}) {\n  ${2:value}\n}"],["for-","for (let ${0:i} = ${1:list}.length; ${2:i}--; ) {\n  $3\n}"],["for","for (let ${0:i} = 0; ${1:i} < ${3:list}.length; ${2:i}++) {\n  $4\n}"],["Prom","new Promise((resolve, reject) => {$0})"],["keys","Object.keys($0)"],["assign","Object.assign(${0:dest}, ${1:source})"],["stringi","JSON.stringify(${0:object})"],["forE","forEach(${0:ea} => $1)"],["map","map(${0:ea} => $1)"],
["reduce","reduce((${1:all}, ${2:ea}) => {$3}, ${0:init})"],["from","Array.from(${0:list})"],["last","arr.last(${0:list})"],["pluck",'arr.pluck(${0:list}, "${1:key}")'],["sortBy","arr.sortBy(${0:list}, ($1) => $2)"],["join",'join("\\n")'],["con","connect(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["once","once(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["sig","signal(${0:source}, '${1:sourceAttr}', ${2:value});"],["ll","lively.lang."],["lls","lively.lang.string."],
["lla","lively.lang.arr."],["llo","lively.lang.obj."],["llf","lively.lang.fun."],["llp","lively.lang.promise."],["withA","withAllSubmorphsDo(ea => { return ${0:ea}; })"],["$w","$world"],["$m","$morph('${0:name}')"],["get",'get("${0:name}")'],["$","${$0}"],["cl","console.log($0)"],["cw","console.warn($0)"],["ce","console.error($0)"],["s","show(`$0`);"],["l2lC",'import L2LClient from "lively.2lively/client.js";\nlet l2lClient = L2LClient.default();$0'],["fun","function ${0:functionName}($1) {$2}"],
["fn","function($0) {$1}"],["f","($0) => $1"],["aw","await $0"]];Ba.snippets=xa;Ba.snippets=xa;Ba.snippets=xa;var Qa=lively.FreezerRuntime.recorderFor("lively.ide/js/commands.js");Qa.getEvalEnv=function(ab){return(ab=ab.pluginFind(function(U){return U.isJSEditorPlugin}))?ab.evalEnvironment:null};Qa.setEvalEnv=function(ab,U){(ab=ab.pluginFind(function(ua){return ua.isJSEditorPlugin}))&&Object.assign(ab.evalEnvironment,U);return ab.evalEnvironment};Qa.pToI=function(ab,U){return ab.positionToIndex(U)};
Qa.iToP=function(ab,U){return ab.indexToPosition(U)};Qa.arr=zd;Qa.promise=ne;Qa.string=zc;Qa.show=Qb;Qa.Range=Mc;Qa.query=tb;Qa.BaseVisitor=De;Ba=[{name:"undefine variable",doc:"Finds the variable at cursor position (or position passed) and undefines it in the module toplevel scope.",exec:function(ab,U){U=void 0===U?{varName:null,position:null}:U;var ua,M,ea,Ka,Za,$b,Qc,Ub,vb,pd;return $jscomp.asyncExecutePromiseGeneratorProgram(function($c){switch($c.nextAddress){case 1:ua=U;M=ua.varName;ea=ua.position;
if(!M){ea||(ea=ab.cursorPosition);Ka=ab.pluginInvokeFirst("getNavigator");Za=Ka.ensureAST(ab);$b=Qa.query.nodesAt(ab.positionToIndex(ea),Za).reverse().find(function(Ta){return"Identifier"===Ta.type});if(!$b)return ab.showError(Error("no identifier found!")),$c.return(!0);M=$b.name}U=ab.pluginFind(function(Ta){return Ta.isJSEditorPlugin}).sanatizedJsEnv();Qc='lively.modules.module("'+U.targetModule+'").undefine("'+M+'")';$c.setCatchFinallyBlocks(2);return $c.yield(ab.doEval(null,U,Qc),4);case 4:Ub=
$c.yieldResult;vb=Ub.error?Ub.error:Ub.isError?Ub.value:null;$c.leaveTryBlock(3);break;case 2:vb=pd=$c.enterCatchBlock();case 3:return vb?ab.showError(vb):ab.setStatusMessage(M+" undefined"),$c.return(!0)}})}},{name:"change doitContext",exec:function(ab){var U,ua,M,ea,Ka;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Za){if(1==Za.nextAddress)return U=$jscomp,ua=U.makeIterator,Za.yield(ab.world().execCommand("select morph",{prompt:"select morph for doitContext",justReturn:!0,prependItems:["reset"],
filterFn:function($b){return!$b.isUsedAsEpiMorph()}}),2);M=ua.call(U,Za.yieldResult);if(ea=M.next().value)Ka="reset"===ea,ab.doitContext=Ka?null:ea,ab.setStatusMessage(Ka?"doitContext is now\n"+ea:"doitContext reset");return Za.return(!0)})}},{name:"change eval backend",exec:function(ab,U){U=void 0===U?{backend:void 0}:U;var ua,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){if(1==ea.nextAddress)return ua=U,M=ua.backend,void 0!==M?ea.jumpTo(2):ea.yield(ab.world().prompt("choose eval backend",
{historyId:"js-eval-backend-history"}),3);if(2!=ea.nextAddress&&(M=ea.yieldResult,!M))return ab.setStatusMessage("Canceled"),ea.return(!0);"local"===M&&(M=null);ab.setStatusMessage("Eval backend is now "+(M||"local"));return ea.return(Qa.setEvalEnv(ab,{remote:M}))})}},{name:"copy current module name to clipboard",exec:function(ab){var U=ab.evalEnvironment.targetModule;ab.setStatusMessage(U||"Cannot find module name");ab.env.eventDispatcher.killRing.add(ab);ab.env.eventDispatcher.doCopy(U);return!0}}];
Qa.jsEditorCommands=Ba;Qa.jsEditorCommands=Ba;Qa.jsEditorCommands=Ba;var wb=[{name:"[javascript] list errors and warnings",exec:function(ab){var U,ua,M,ea,Ka;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Za){if(1==Za.nextAddress){U=(ab.markers||[]).filter(function($b){$b=$b.type;return"js-undeclared-var"===$b||"js-syntax-error"===$b});if(!U.length)return Qa.show("no warnings or errors"),Za.return(!0);ua=U.map(function($b){var Qc=$b.range;return{isListItem:!0,string:"["+$b.type.split("-").slice(1).join(" ")+
"] "+ab.textInRange(Qc),value:Qc}});return Za.yield(ab.world().filterableListPrompt("jump to warning or error",ua),2)}M=Za.yieldResult;ea=$jscomp.makeIterator(M.selected);if(Ka=ea.next().value)ab.saveMark(),ab.selection=Ka,ab.centerRow(Ka.start.row);return Za.return(!0)})}},{name:"[javascript] inject import",exec:function(ab,U){U=void 0===U?{gotoImport:!1,insertImportAtCursor:!0}:U;var ua,M,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ka){switch(Ka.nextAddress){case 1:return Ka.yield(Qa.promise.delay(0),
2);case 2:return Ka.yield(System.import("lively.ide/js/import-helper.js"),3);case 3:return ua=Ka.yieldResult,M=ua.interactivelyInjectImportIntoText,Ka.yield(M(ab,U),4);case 4:return(ea=Ka.yieldResult)||ab.setStatusMessage("canceled"),Ka.return(ea)}})}},{name:"[javascript] fix undeclared variables",exec:function(ab,U){U=void 0===U?{ignore:[],autoApplyIfSingleChoice:!1,requester:ab}:U;var ua,M,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ka){if(1==Ka.nextAddress)return Ka.yield(System.import("lively.ide/js/import-helper.js"),
2);if(3!=Ka.nextAddress)return ua=Ka.yieldResult,M=ua.interactivlyFixUndeclaredVariables,Ka.yield(M(ab,U),3);ea=Ka.yieldResult;ab.focus();return Ka.return(ea)})}},{name:"[javascript] remove unused imports",exec:function(ab,U){U=void 0===U?{query:!0}:U;var ua,M,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ka){if(1==Ka.nextAddress)return Ka.yield(System.import("lively.ide/js/import-helper.js"),2);if(3!=Ka.nextAddress)return ua=Ka.yieldResult,M=ua.cleanupUnusedImports,Ka.yield(M(ab,
U),3);ea=Ka.yieldResult;ab.setStatusMessage(ea);return Ka.return(!0)})}},{name:"[javascript] eslint report",exec:function(ab){var U,ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){if(1==M.nextAddress)return M.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);U=M.yieldResult;ua=U.default;try{return M.return(ua.reportOnMorph(ab))}catch(ea){ab.showError(ea)}M.jumpToEnd()})}},{name:"[javascript] eslint preview fixes",exec:function(ab){var U,ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){if(1==
M.nextAddress)return M.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);U=M.yieldResult;ua=U.default;try{return M.return(ua.previewFixesOnMorph(ab))}catch(ea){ab.showError(ea)}M.jumpToEnd()})}},{name:"[javascript] auto format code",handlesCount:!0,exec:function(ab,U,ua){function M(bb,Bc){Bc||(Bc=Ub(bb,{allowReturnOutsideFunction:!0}));var uc=Qa.string.lineRanges(bb),Sa=bb.split("\n"),Da=[],Ya=new Qa.BaseVisitor,Na=Ya.visitVariableDeclaration;Ya.visitVariableDeclaration=function(gb,
H,ha){if(1<gb.declarations.length)for(var Ga=Qa.string.findLineWithIndexInLineRanges(uc,gb.start),lb=gb.declarations[0].start-uc[Ga][0],Sb={},Ab=1;Ab<gb.declarations.length;Sb={$jscomp$loop$prop$actionType$2650:Sb.$jscomp$loop$prop$actionType$2650,$jscomp$loop$prop$arg$2651:Sb.$jscomp$loop$prop$arg$2651},Ab++){var sc=gb.declarations[Ab],Fc=Qa.string.findLineWithIndexInLineRanges(uc,sc.start);if(Ga!==Fc){var Fd=Sa[Fc].match(/\s*/)[0].length;Fd=lb-Fd;0!==Fd&&(sc=Qa.string.findLineWithIndexInLineRanges(uc,
sc.end),Sb.$jscomp$loop$prop$actionType$2650=0<Fd?"insert":"delete",Sb.$jscomp$loop$prop$arg$2651=0<Fd?" ".repeat(Fd):-Fd,Da.push.apply(Da,$jscomp.arrayFromIterable(Qa.arr.range(Fc,sc).map(function(Ee){return function(Cd){return[Ee.$jscomp$loop$prop$actionType$2650,uc[Cd][0],Ee.$jscomp$loop$prop$arg$2651]}}(Sb)))))}}return Na.call(Ya,gb,H,ha)};Ya.accept(Bc,{},[]);for(Bc=Da.length;Bc--;){var oc=$jscomp.makeIterator(Da[Bc]),aa=oc.next().value,na=oc.next().value;oc=oc.next().value;"insert"===aa?bb=bb.slice(0,
na)+oc+bb.slice(na):"delete"===aa&&(bb=bb.slice(0,na)+bb.slice(na+oc))}return bb}var ea,Ka,Za,$b,Qc,Ub,vb,pd,$c,Ta,nb,xc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){switch(bb.nextAddress){case 1:return ea=ua||Math.floor(ab.width/ab.defaultCharExtent().width),U=Object.assign({printWidth:ea,tabWidth:2,useTabs:!1,bracketSpacing:!1},U),Ka=lively.modules.module,Za=System.normalizeSync("prettier/standalone.js"),bb.yield(Ka(Za).load({format:"global",instrument:!1}),2);case 2:return $b=
bb.yieldResult,bb.yield(Ka("lively.ast/lib/acorn-extension.js").load(),3);case 3:return bb.yield(Ka("lively.ast").load(),4);case 4:return Qc=bb.yieldResult,Ub=Qc.parse,bb.yield(Ka("lively.ast/lib/query.js").load(),5);case 5:return bb.yield(System.import("jsdiff",System.decanonicalize("lively.morphic")),6);case 6:return vb=bb.yieldResult,pd=ab.selection.isEmpty()?ab.documentRange:ab.selection.range,$c=ab.positionToIndex(pd.start),Ta=ab.positionToIndex(pd.end),nb=$b.format(ab.textString,Object.assign({},
U,{rangeStart:$c,rangeEnd:Ta,parser:function(Bc,uc,Sa){return Ub(Bc,{allowReturnOutsideFunction:!0})}})),ab.undoManager.group(),xc=vb.diffChars(ab.textString,nb),ab.applyJsDiffPatch(xc),ab.selection.text=M(ab.selection.text),ab.undoManager.group(),bb.return(!0)}})}}];Qa.jsIdeCommands=wb;Qa.jsIdeCommands=wb;Qa.jsIdeCommands=wb;var fc=[{name:"selectDefinition",readOnly:!0,bindKey:"Alt-.",exec:function(ab,U){U=ab.pluginInvokeFirst("getNavigator");if(!U)return!0;U=U.resolveIdentifierAt(ab,ab.cursorPosition);
if(!U||!U.id)return Qa.show("No symbol identifier selected"),!0;if(!U.decl)return Qa.show("Cannot find declaration of "+U.name),!0;ab.saveMark();ab.selection={start:ab.indexToPosition(U.decl.start),end:ab.indexToPosition(U.decl.end)};ab.scrollCursorIntoView();return!0}},{name:"selectSymbolReferenceOrDeclarationNext",readOnly:!0,multiSelectAction:"single",exec:function(ab){ab.execCommand("selectSymbolReferenceOrDeclaration",{direction:"next"})}},{name:"selectSymbolReferenceOrDeclarationPrev",readOnly:!0,
multiSelectAction:"single",exec:function(ab){ab.execCommand("selectSymbolReferenceOrDeclaration",{direction:"prev"})}},{name:"selectSymbolReferenceOrDeclaration",doc:"Finds the name of the currently selected symbol and will use the JS ast to select references and declarations whose name matches the symbol in the current scope.",readOnly:!0,multiSelectAction:"single",exec:function(ab,U){U=void 0===U?{direction:null}:U;var ua=ab.pluginInvokeFirst("getNavigator");if(!ua)return!0;ua=ua.resolveIdentifierAt(ab,
ab.cursorPosition);if(!ua||!ua.refs)return Qa.show("No symbol identifier selected"),!0;var M=ab.selection;ua=ua.refs.map(function(Ka){var Za=Ka.end;return Qa.Range.fromPositions(Qa.iToP(ab,Ka.start),Qa.iToP(ab,Za))}).concat(ua.decl?Qa.Range.fromPositions(Qa.iToP(ab,ua.decl.start),Qa.iToP(ab,ua.decl.end)):[]).sort(Qa.Range.compare);if(!ua.length)return!0;var ea=ua.map(String).indexOf(String(M.range));if("next"===U.direction||"prev"===U.direction)-1===ea&&ua.length?ua=[ua[0]]:(U=ea+("next"===U.direction?
1:-1),0>U?U=ua.length-1:U>=ua.length&&(U=0),ua=[ua[U]]);ua.forEach(function(Ka){var Za=M.selections.findIndex(function(Qc){return Qc.range.equals(Ka)}),$b=M.selections.length-1;-1<Za?Qa.arr.swap(M.selections,Za,$b):M.addRange(Ka,!1)});M.mergeSelections();return!0}}];Qa.astEditorCommands=fc;Qa.astEditorCommands=fc;Qa.astEditorCommands=fc;lively.modules&&!lively.FreezerRuntime&&lively.modules.module("lively.ide/js/editor-plugin.js").reload({reloadDeps:!1,resetEnv:!1});var $a=lively.FreezerRuntime.recorderFor("lively.ide/js/mode.js");
$a.expressionAllowed=function(ab,U,ua){return/^(?:operator|sof|keyword c|case|new|export|default|[\[{}\(,;:]|=>)$/.test(U.lastType)||"quasi"==U.lastType&&/\{\s*$/.test(ab.string.slice(0,ab.pos-(ua||0)))};$a.passIndent=qc;$a.defineMode=ld;$a.defineMIME=Pb;$a.registerHelper=ud;$a.defaultConfig={indentUnit:2};$a.defaultParserConfig={name:"javascript",statementIndent:2,jsonld:!1,json:!1,typescript:!1,wordCharacters:/[\w$\xa1-\uffff]/,globalVars:[],localVars:[],doubleIndentSwitch:null};$a.defineMode("javascript",
function(ab,U){function ua(zb,Cb,Dd){Yj=zb;th=Dd;return Cb}function M(zb,Cb){var Dd=zb.next();if('"'==Dd||"'"==Dd)return Cb.tokenize=ea(Dd),Cb.tokenize(zb,Cb);if("."==Dd&&zb.match(/^\d+(?:[eE][+\-]?\d+)?/))return ua("number","number");if("."==Dd&&zb.match(".."))return ua("spread","meta");if(/[\[\]{}\(\),;:\.]/.test(Dd))return ua(Dd);if("="==Dd&&zb.eat(">"))return ua("=>","operator");if("0"==Dd&&zb.eat(/x/i))return zb.eatWhile(/[\da-f]/i),ua("number","number");if("0"==Dd&&zb.eat(/o/i))return zb.eatWhile(/[0-7]/i),
ua("number","number");if("0"==Dd&&zb.eat(/b/i))return zb.eatWhile(/[01]/i),ua("number","number");if(/\d/.test(Dd))return zb.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),ua("number","number");if("/"==Dd){if(zb.eat("*"))return Cb.tokenize=Ka,Ka(zb,Cb);if(zb.eat("/"))return zb.skipToEnd(),ua("comment","comment");if($a.expressionAllowed(zb,Cb,1)){a:for(var yd=Cb=!1;null!=(Dd=zb.next());){if(!Cb){if("/"==Dd&&!yd)break a;"["==Dd?yd=!0:yd&&"]"==Dd&&(yd=!1)}Cb=!Cb&&"\\"==Dd}zb.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);
return ua("regexp","string-2")}zb.eatWhile(jl);return ua("operator","operator",zb.current())}if("`"==Dd)return Cb.tokenize=Za,Za(zb,Cb);if("#"==Dd)return zb.skipToEnd(),ua("error","error");if(jl.test(Dd))return">"==Dd&&Cb.lexical&&">"==Cb.lexical.type||zb.eatWhile(jl),ua("operator","operator",zb.current());if(Wj.test(Dd))return zb.eatWhile(Wj),zb=zb.current(),(Dd=Bk.propertyIsEnumerable(zb)&&Bk[zb])&&"."!=Cb.lastType?ua(Dd.type,Dd.style,zb):ua("variable","variable",zb)}function ea(zb){return function(Cb,
Dd){var yd=!1,mf;if(Ah&&"@"==Cb.peek()&&Cb.match(kk))return Dd.tokenize=M,ua("jsonld-keyword","meta");for(;null!=(mf=Cb.next())&&(mf!=zb||yd);)yd=!yd&&"\\"==mf;yd||(Dd.tokenize=M);return ua("string","string")}}function Ka(zb,Cb){for(var Dd=!1,yd;yd=zb.next();){if("/"==yd&&Dd){Cb.tokenize=M;break}Dd="*"==yd}return ua("comment","comment")}function Za(zb,Cb){for(var Dd=!1,yd;null!=(yd=zb.next());){if(!Dd&&("`"==yd||"$"==yd&&zb.eat("{"))){Cb.tokenize=M;break}Dd=!Dd&&"\\"==yd}return ua("quasi","string-2",
zb.current())}function $b(zb,Cb){Cb.fatArrowAt&&(Cb.fatArrowAt=null);var Dd=zb.string.indexOf("=>",zb.start);if(!(0>Dd)){if(Cj){var yd=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(zb.string.slice(zb.start,Dd));yd&&(Dd=yd.index)}yd=0;var mf=!1;for(--Dd;0<=Dd;--Dd){var Rf=zb.string.charAt(Dd),si="([{}])".indexOf(Rf);if(0<=si&&3>si){if(!yd){++Dd;break}if(0==--yd){"("==Rf&&(mf=!0);break}}else if(3<=si&&6>si)++yd;else if(Wj.test(Rf))mf=!0;else{if(/["'\/]/.test(Rf))return;if(mf&&!yd){++Dd;break}}}mf&&
!yd&&(Cb.fatArrowAt=Dd)}}function Qc(zb,Cb,Dd,yd,mf,Rf){this.indented=zb;this.column=Cb;this.type=Dd;this.prev=mf;this.info=Rf;null!=yd&&(this.align=yd)}function Ub(){for(var zb=arguments.length-1;0<=zb;zb--)He.cc.push(arguments[zb])}function vb(){Ub.apply(null,arguments);return!0}function pd(zb){function Cb(yd){for(;yd;yd=yd.next)if(yd.name==zb)return!0;return!1}var Dd=He.state;He.marked="def";Dd.context?Cb(Dd.localVars)||(Dd.localVars={name:zb,next:Dd.localVars}):!Cb(Dd.globalVars)&&U.globalVars&&
(Dd.globalVars={name:zb,next:Dd.globalVars})}function $c(){He.state.context={prev:He.state.context,vars:He.state.localVars};He.state.localVars=Pm}function Ta(){He.state.localVars=He.state.context.vars;He.state.context=He.state.context.prev}function nb(zb,Cb){var Dd=function(){var yd=He.state,mf=yd.indented;if("stat"==yd.lexical.type)mf=yd.lexical.indented;else for(var Rf=yd.lexical;Rf&&")"==Rf.type&&Rf.align;Rf=Rf.prev)mf=Rf.indented;yd.lexical=new Qc(mf,He.stream.column(),zb,null,yd.lexical,Cb)};
Dd.lex=!0;return Dd}function xc(){var zb=He.state;zb.lexical.prev&&(")"==zb.lexical.type&&(zb.indented=zb.lexical.indented),zb.lexical=zb.lexical.prev)}function bb(zb){function Cb(Dd){return Dd==zb?vb():";"==zb?Ub():vb(Cb)}return Cb}function Bc(zb,Cb){return"var"==zb?vb(nb("vardef",Cb.length),Vb,bb(";"),xc):"keyword a"==zb?vb(nb("form"),Da,Bc,xc):"keyword b"==zb?vb(nb("form"),Bc,xc):"{"==zb?vb(nb("}"),Fe,xc):";"==zb?vb():"if"==zb?("else"==He.state.lexical.info&&He.state.cc[He.state.cc.length-1]==
xc&&He.state.cc.pop()(),vb(nb("form"),Da,Bc,xc,za)):"function"==zb?vb(hb):"for"==zb?vb(nb("form"),Pa,Bc,xc):"variable"==zb?Cj&&"type"==Cb?(He.marked="keyword",vb(fe,bb("operator"),fe,bb(";"))):vb(nb("stat"),sc):"switch"==zb?vb(nb("form"),Da,bb("{"),nb("}","switch"),Fe,xc,xc):"case"==zb?vb(uc,bb(":")):"default"==zb?vb(bb(":")):"catch"==zb?vb(nb("form"),$c,bb("("),hc,bb(")"),Bc,xc,Ta):"class"==zb?vb(nb("form"),Gc,xc):"export"==zb?vb(nb("stat"),lf,xc):"import"==zb?vb(nb("stat"),zg,xc):"module"==zb?vb(nb("form"),
ng,bb("{"),nb("}"),Fe,xc,xc):"async"==zb?vb(Bc):"@"==Cb?vb(uc,Bc):Ub(nb("stat"),uc,bb(";"),xc)}function uc(zb){return Ya(zb,!1)}function Sa(zb){return Ya(zb,!0)}function Da(zb){return"("!=zb?Ub():vb(nb(")"),uc,bb(")"),xc)}function Ya(zb,Cb){if(He.state.fatArrowAt==He.stream.start){var Dd=Cb?Ga:ha;if("("==zb)return vb($c,nb(")"),ce(ng,")"),xc,bb("=>"),Dd,Ta);if("variable"==zb)return Ub($c,ng,bb("=>"),Dd,Ta)}Dd=Cb?na:aa;return Om.hasOwnProperty(zb)?vb(Dd):"function"==zb?vb(hb,Dd):"class"==zb?vb(nb("form"),
cc,xc):"keyword c"==zb||"async"==zb?vb(Cb?oc:Na):"("==zb?vb(nb(")"),Na,bb(")"),xc,Dd):"operator"==zb||"spread"==zb?vb(Cb?Sa:uc):"["==zb?vb(nb("]"),Zj,xc,Dd):"{"==zb?je(Fd,"}",null,Dd):"quasi"==zb?Ub(gb,Dd):"new"==zb?vb(lb(Cb)):vb()}function Na(zb){return zb.match(/[;\}\)\],]/)?Ub():Ub(uc)}function oc(zb){return zb.match(/[;\}\)\],]/)?Ub():Ub(Sa)}function aa(zb,Cb){return","==zb?vb(uc):na(zb,Cb,!1)}function na(zb,Cb,Dd){var yd=0==Dd?aa:na,mf=0==Dd?uc:Sa;if("=>"==zb)return vb($c,Dd?Ga:ha,Ta);if("operator"==
zb)return/\+\+|--/.test(Cb)?vb(yd):"?"==Cb?vb(uc,bb(":"),mf):vb(mf);if("quasi"==zb)return Ub(gb,yd);if(";"!=zb){if("("==zb)return je(Sa,")","call",yd);if("."==zb)return vb(Fc,yd);if("["==zb)return vb(nb("]"),Na,bb("]"),xc,yd)}}function gb(zb,Cb){return"quasi"!=zb?Ub():"${"!=Cb.slice(Cb.length-2)?vb(gb):vb(uc,H)}function H(zb){if("}"==zb)return He.marked="string-2",He.state.tokenize=Za,vb(gb)}function ha(zb){$b(He.stream,He.state);return Ub("{"==zb?Bc:uc)}function Ga(zb){$b(He.stream,He.state);return Ub("{"==
zb?Bc:Sa)}function lb(zb){return function(Cb){return"."==Cb?vb(zb?Ab:Sb):Ub(zb?Sa:uc)}}function Sb(zb,Cb){if("target"==Cb)return He.marked="keyword",vb(aa)}function Ab(zb,Cb){if("target"==Cb)return He.marked="keyword",vb(na)}function sc(zb){return":"==zb?vb(xc,Bc):Ub(aa,bb(";"),xc)}function Fc(zb){if("variable"==zb)return He.marked="property",vb()}function Fd(zb,Cb){if("async"==zb)return He.marked="property",vb(Fd);if("variable"==zb||"keyword"==He.style)return He.marked="property","get"==Cb||"set"==
Cb?vb(Ee):vb(Cd);if("number"==zb||"string"==zb)return He.marked=Ah?"property":He.style+" property",vb(Cd);if("jsonld-keyword"==zb)return vb(Cd);if("modifier"==zb)return vb(Fd);if("["==zb)return vb(uc,bb("]"),Cd);if("spread"==zb)return vb(uc);if(":"==zb)return Ub(Cd)}function Ee(zb){if("variable"!=zb)return Ub(Cd);He.marked="property";return vb(hb)}function Cd(zb){if(":"==zb)return vb(Sa);if("("==zb)return Ub(hb)}function ce(zb,Cb,Dd){function yd(mf,Rf){return(Dd?-1<Dd.indexOf(mf):","==mf)?(mf=He.state.lexical,
"call"==mf.info&&(mf.pos=(mf.pos||0)+1),vb(function(si,Ql){return si==Cb||Ql==Cb?Ub():Ub(zb)},yd)):mf==Cb||Rf==Cb?vb():vb(bb(Cb))}return function(mf,Rf){return mf==Cb||Rf==Cb?vb():Ub(zb,yd)}}function je(zb,Cb,Dd){for(var yd=3;yd<arguments.length;yd++)He.cc.push(arguments[yd]);return vb(nb(Cb,Dd),ce(zb,Cb),xc)}function Fe(zb){return"}"==zb?vb():Ub(Bc,Fe)}function Pc(zb,Cb){if(Cj){if(":"==zb)return vb(fe);if("?"==Cb)return vb(Pc)}}function fe(zb){if("variable"==zb)return He.marked="variable-3",vb(Nf);
if("string"==zb||"number"==zb||"atom"==zb)return vb(Nf);if("{"==zb)return vb(nb("}"),ce(ef,"}",",;"),xc);if("("==zb)return vb(ce(ff,")"),ie)}function ie(zb){if("=>"==zb)return vb(fe)}function ef(zb,Cb){if("variable"==zb||"keyword"==He.style)return He.marked="property",vb(ef);if("?"==Cb)return vb(ef);if(":"==zb)return vb(fe)}function ff(zb){if("variable"==zb)return vb(ff);if(":"==zb)return vb(fe)}function Nf(zb,Cb){if("<"==Cb)return vb(nb(">"),ce(fe,">"),xc,Nf);if("|"==Cb||"."==zb)return vb(fe);if("["==
zb)return vb(bb("]"),Nf);if("extends"==Cb)return vb(fe)}function Vb(){return Ub(ng,Pc,hg,Re)}function ng(zb,Cb){if("modifier"==zb)return vb(ng);if("variable"==zb)return pd(Cb),vb();if("spread"==zb)return vb(ng);if("["==zb)return je(ng,"]");if("{"==zb)return je(og,"}")}function og(zb,Cb){if("variable"==zb&&!He.stream.match(/^\s*:/,!1))return pd(Cb),vb(hg);"variable"==zb&&(He.marked="property");return"spread"==zb?vb(ng):"}"==zb?Ub():vb(bb(":"),ng,hg)}function hg(zb,Cb){if("="==Cb)return vb(Sa)}function Re(zb){if(","==
zb)return vb(Vb)}function za(zb,Cb){if("keyword b"==zb&&"else"==Cb)return vb(nb("form","else"),Bc,xc)}function Pa(zb){if("("==zb)return vb(nb(")"),qb,bb(")"),xc)}function qb(zb){return"var"==zb?vb(Vb,bb(";"),wa):";"==zb?vb(wa):"variable"==zb?vb(R):Ub(uc,bb(";"),wa)}function R(zb,Cb){return"in"==Cb||"of"==Cb?(He.marked="keyword",vb(uc)):vb(aa,wa)}function wa(zb,Cb){return";"==zb?vb(Wa):"in"==Cb||"of"==Cb?(He.marked="keyword",vb(uc)):Ub(uc,bb(";"),Wa)}function Wa(zb){")"!=zb&&vb(uc)}function hb(zb,
Cb){if("*"==Cb)return He.marked="keyword",vb(hb);if("variable"==zb)return pd(Cb),vb(hb);if("("==zb)return vb($c,nb(")"),ce(hc,")"),xc,Pc,Bc,Ta);if(Cj&&"<"==Cb)return vb(nb(">"),ce(fe,">"),xc,hb)}function hc(zb){return"spread"==zb?vb(hc):Ub(ng,Pc,hg)}function cc(zb,Cb){return"variable"==zb?Gc(zb,Cb):Oc(zb,Cb)}function Gc(zb,Cb){if("variable"==zb)return pd(Cb),vb(Oc)}function Oc(zb,Cb){if("<"==Cb)return vb(nb(">"),ce(fe,">"),xc,Oc);if("extends"==Cb||"implements"==Cb||Cj&&","==zb)return vb(Cj?fe:uc,
Oc);if("{"==zb)return vb(nb("}"),Hc,xc)}function Hc(zb,Cb){if("variable"==zb||"keyword"==He.style){if(("async"==Cb||"static"==Cb||"get"==Cb||"set"==Cb||Cj&&("public"==Cb||"private"==Cb||"protected"==Cb||"readonly"==Cb||"abstract"==Cb))&&He.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return He.marked="keyword",vb(Hc);He.marked="property";return vb(Cj?ye:hb,Hc)}if("["==zb)return vb(uc,bb("]"),Cj?ye:hb,Hc);if("*"==Cb)return He.marked="keyword",vb(Hc);if(";"==zb)return vb(Hc);if("}"==zb)return vb();if("@"==
Cb)return vb(uc,Hc)}function ye(zb,Cb){return"?"==Cb?vb(ye):":"==zb?vb(fe,hg):"="==Cb?vb(Sa):Ub(hb)}function lf(zb,Cb){return"*"==Cb?(He.marked="keyword",vb(Tg,bb(";"))):"default"==Cb?(He.marked="keyword",vb(uc,bb(";"))):"{"==zb?vb(ce(Ye,"}"),Tg,bb(";")):Ub(Bc)}function Ye(zb,Cb){if("as"==Cb)return He.marked="keyword",vb(bb("variable"));if("variable"==zb)return Ub(Sa,Ye)}function zg(zb){return"string"==zb?vb():Ub(Ie,sg,Tg)}function Ie(zb,Cb){if("{"==zb)return je(Ie,"}");"variable"==zb&&pd(Cb);"*"==
Cb&&(He.marked="keyword");return vb(Gi)}function sg(zb){if(","==zb)return vb(Ie,sg)}function Gi(zb,Cb){if("as"==Cb)return He.marked="keyword",vb(Ie)}function Tg(zb,Cb){if("from"==Cb)return He.marked="keyword",vb(uc)}function Zj(zb){return"]"==zb?vb():Ub(ce(Sa,"]"))}ab=Object.assign({},$a.defaultConfig,{},ab);U=Object.assign({},$a.defaultParserConfig,{},U);var xf=ab.indentUnit,zi=U.statementIndent,Ah=U.jsonld,mj=U.json||Ah,Cj=U.typescript,Wj=U.wordCharacters||/[\w$\xa1-\uffff]/,Bk=function(){function zb(Ql){return{type:Ql,
style:"keyword"}}var Cb=zb("keyword a"),Dd=zb("keyword b"),yd=zb("keyword c"),mf=zb("operator"),Rf={type:"atom",style:"atom"};Cb={if:zb("if"),while:Cb,with:Cb,else:Dd,do:Dd,try:Dd,finally:Dd,return:yd,break:yd,continue:yd,new:zb("new"),delete:yd,throw:yd,debugger:yd,var:zb("var"),const:zb("var"),let:zb("var"),function:zb("function"),catch:zb("catch"),for:zb("for"),switch:zb("switch"),case:zb("case"),default:zb("default"),in:mf,typeof:mf,instanceof:mf,true:Rf,false:Rf,null:Rf,undefined:Rf,NaN:Rf,Infinity:Rf,
this:zb("this"),class:zb("class"),super:zb("atom"),yield:yd,export:zb("export"),import:zb("import"),extends:yd,await:yd,async:zb("async")};if(Cj){Dd={type:"variable",style:"variable-3"};yd={interface:zb("class"),implements:yd,namespace:yd,module:zb("module"),enum:zb("module"),public:zb("modifier"),private:zb("modifier"),protected:zb("modifier"),abstract:zb("modifier"),as:mf,string:Dd,number:Dd,boolean:Dd,any:Dd};for(var si in yd)Cb[si]=yd[si]}return Cb}(),jl=/[+\-*&%=<>!?|~^@]/,kk=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,
Yj,th,Om={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0},He={state:null,column:null,marked:null,cc:null},Pm={name:"this",next:{name:"arguments"}};xc.lex=!0;return{startState:function(zb){zb={tokenize:M,lastType:"sof",cc:[],lexical:new Qc((zb||0)-xf,0,"block",!1),localVars:U.localVars,context:U.localVars&&{vars:U.localVars},indented:zb||0};U.globalVars&&"object"===typeof U.globalVars&&(zb.globalVars=U.globalVars);return zb},token:function(zb,Cb){zb.sol()&&(Cb.lexical.hasOwnProperty("align")||
(Cb.lexical.align=!1),Cb.indented=zb.indentation(),$b(zb,Cb));if(Cb.tokenize!=Ka&&zb.eatSpace())return null;var Dd=Cb.tokenize(zb,Cb);if("comment"==Yj)return Dd;Cb.lastType="operator"!=Yj||"++"!=th&&"--"!=th?Yj:"incdec";a:{var yd=Yj,mf=th,Rf=Cb.cc;He.state=Cb;He.stream=zb;He.marked=null;He.cc=Rf;He.style=Dd;Cb.lexical.hasOwnProperty("align")||(Cb.lexical.align=!0);for(zb=0;;){if(1E5<zb++)throw Error("endless");if((Rf.length?Rf.pop():mj?uc:Bc)(yd,mf)){for(;Rf.length&&Rf[Rf.length-1].lex;)Rf.pop()();
if(He.marked){Dd=He.marked;break a}if(yd="variable"==yd)b:{for(yd=Cb.localVars;yd;yd=yd.next)if(yd.name==mf){yd=!0;break b}for(Cb=Cb.context;Cb;Cb=Cb.prev)for(yd=Cb.vars;yd;yd=yd.next)if(yd.name==mf){yd=!0;break b}yd=void 0}if(yd){Dd="variable-2";break a}break a}}}return Dd},indent:function(zb,Cb){if(zb.tokenize==Ka)return $a.passIndent;if(zb.tokenize!=M)return 0;var Dd=Cb&&Cb.charAt(0),yd=zb.lexical,mf;if(!/^\s*else\b/.test(Cb))for(var Rf=zb.cc.length-1;0<=Rf;--Rf){var si=zb.cc[Rf];if(si==xc)yd=
yd.prev;else if(si!=za)break}for(;!("stat"!=yd.type&&"form"!=yd.type||"}"!=Dd&&(!(mf=zb.cc[zb.cc.length-1])||mf!=aa&&mf!=na||/^[,\.=+\-*:?[\(]/.test(Cb)));)yd=yd.prev;zi&&")"==yd.type&&"stat"==yd.prev.type&&(yd=yd.prev);mf=yd.type;Rf=Dd==mf;return(si=zb._string)&&si.trimLeft().startsWith("?")&&":"===Dd?si.indexOf("?"):si&&":"===zb.lastType&&"}"!==yd.type?si.match(/^\s*/)[0].length:"vardef"==mf?(Cb=yd.indented+yd.info+2+zb.localVars.name.length,"?"===Dd||":"===Dd||"|"===Dd||"&"===Dd?Cb:","==zb.lastType?
yd.indented+yd.info+1:"operator"==zb.lastType?Cb+3:yd.indented):"form"==mf&&"{"==Dd?yd.indented:"form"==mf?yd.indented+xf:"stat"==mf?(Dd=yd.indented,zb="operator"==zb.lastType||","==zb.lastType||jl.test(Cb.charAt(0))||/[,.]/.test(Cb.charAt(0)),Dd+(zb?zi||xf:0)):"switch"!=yd.info||Rf||0==U.doubleIndentSwitch?yd.align?yd.column+(Rf?0:1):yd.indented+(Rf?0:xf):yd.indented+(/^(?:case|default)\b/.test(Cb)?xf:2*xf)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:mj?null:"/*",blockCommentEnd:mj?
null:"*/",lineComment:mj?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:mj?"json":"javascript",jsonldMode:Ah,jsonMode:mj,expressionAllowed:$a.expressionAllowed,skipExpression:function(zb){var Cb=zb.cc[zb.cc.length-1];Cb!=uc&&Cb!=Sa||zb.cc.pop()}}});$a.registerHelper("wordChars","javascript",/[\w$]/);$a.defineMIME("text/javascript","javascript");$a.defineMIME("text/ecmascript","javascript");$a.defineMIME("application/javascript","javascript");$a.defineMIME("application/x-javascript",
"javascript");$a.defineMIME("application/ecmascript","javascript");$a.defineMIME("application/json",{name:"javascript",json:!0});$a.defineMIME("application/x-json",{name:"javascript",json:!0});$a.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});$a.defineMIME("text/typescript",{name:"javascript",typescript:!0});$a.defineMIME("application/typescript",{name:"javascript",typescript:!0});var ib=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js");ib.string=zc;ib.JavaScriptChecker=
cd;ib.JavaScriptNavigator=fd;ib.completers=ya;ib.jsSnippets=xa;ib.jsIdeCommands=wb;ib.jsEditorCommands=Ba;ib.astEditorCommands=fc;ib.CodeMirrorEnabledEditorPlugin=Ed;ib.Snippet=cb;ib.parser=Xd;ib.localInterface=vc;ib.systemInterfaceNamed=ac;ib.serverInterfaceFor=Eb;ib.l2lInterfaceFor=ec;cd=function(ab){var U=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js"),ua=U.hasOwnProperty("JavaScriptEditorPlugin")&&"function"===typeof U.JavaScriptEditorPlugin?U.JavaScriptEditorPlugin:U.JavaScriptEditorPlugin=
function(M){M&&M[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return mb(ua,ab,[{key:Symbol.for("lively-instance-initialize"),value:function(){mb._get(Object.getPrototypeOf(ua.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.checker=new ib.JavaScriptChecker;this.evalEnvironment={format:"esm",targetModule:null,context:null}}},{key:"isJSEditorPlugin",get:function(){return!0}},{key:"shortName",get:function(){return"js"}},
{key:"longName",get:function(){return"javascript"}},{key:"attach",value:function(M){mb._get(Object.getPrototypeOf(ua.prototype),"attach",this).call(this,M);this.evalEnvironment=Object.assign({},this.evalEnvironment,{context:M})}},{key:"detach",value:function(M){this.checker.uninstall(this.textMorph);mb._get(Object.getPrototypeOf(ua.prototype),"detach",this).call(this,M)}},{key:"getNavigator",value:function(){return new ib.JavaScriptNavigator}},{key:"getCompleters",value:function(M){return ib.completers.concat(M)}},
{key:"getCommands",value:function(M){return[].concat($jscomp.arrayFromIterable(mb._get(Object.getPrototypeOf(ua.prototype),"getCommands",this).call(this,M)),$jscomp.arrayFromIterable(ib.jsIdeCommands),$jscomp.arrayFromIterable(ib.jsEditorCommands),$jscomp.arrayFromIterable(ib.astEditorCommands))}},{key:"getKeyBindings",value:function(M){return[].concat($jscomp.arrayFromIterable(M),[{keys:"Shift-Tab",command:{command:"[javascript] auto format code"}},{keys:"Ctrl-C E",command:"[javascript] list errors and warnings"},
{keys:{mac:"Meta-Shift-L L I N T R",win:"Ctrl-Shift-L L I N T R"},command:"[javascript] eslint report"},{keys:{mac:"Meta-Shift-L L I N T P",win:"Ctrl-Shift-L L I N T P"},command:"[javascript] eslint preview fixes"},{keys:{mac:"Meta-Shift-L L I N T F",win:"Ctrl-Shift-L L I N T F"},command:"[javascript] eslint fix"},{keys:{mac:"Meta-Shift-L M O D E",win:"Ctrl-Shift-L M O D E"},command:"change editor mode"},{keys:"Ctrl-C I",command:"[javascript] inject import"},{keys:"Ctrl-C C I",command:"[javascript] fix undeclared variables"}])}},
{key:"getMenuItems",value:function(M){var ea=this,Ka,Za,$b,Qc,Ub;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vb){Ka=ea.textMorph;Za=[{command:"doit",target:Ka,showKeyShortcuts:!0},{command:"inspectit",target:Ka,showKeyShortcuts:!0},{command:"editit",target:Ka,showKeyShortcuts:!0},{command:"printit",target:Ka,showKeyShortcuts:!0},{command:"print inspectit",alias:"print inspect",target:Ka,showKeyShortcuts:!0},{command:"eval all",target:Ka,showKeyShortcuts:!0},{command:"text completion",
alias:"code completion",target:Ka,showKeyShortcuts:!0},{command:"[javascript] list errors and warnings",alias:"list errors and warnings",target:Ka,showKeyShortcuts:!0},{isDivider:!0}];ea.evalEnvironment.targetModule&&Za.push({command:"[javascript] inject import",alias:"add import",target:Ka},{command:"[javascript] fix undeclared variables",alias:"fix undeclared variables",target:Ka},{command:"[javascript] remove unused imports",alias:"remove unused imports",target:Ka});$b=ea.getNavigator();(Qc=$b.resolveIdentifierAt(Ka,
Ka.cursorPosition))&&Za.push({command:"selectDefinition",alias:'jump to definition of "'+Qc.name+'"',target:Ka},{command:"selectSymbolReferenceOrDeclaration",alias:'select all occurrences of "'+Qc.name+'"',target:Ka});(Ub=Ka.selection.text.trim())&&Za.push({command:"open code search",alias:'code search for "'+ib.string.truncate(Ub,30)+'"',target:Ka.world(),args:{input:Ub,backend:ea.backend()}});Za.push({isDivider:!0});return vb.return(Za.concat(M))})}},{key:"getSnippets",value:function(){return ib.jsSnippets.map(function(M){var ea=
$jscomp.makeIterator(M);M=ea.next().value;ea=ea.next().value;return new ib.Snippet({trigger:M,expansion:ea})})}},{key:"sanatizedJsEnv",value:function(M){M=Object.assign({},this.evalEnvironment,{},M);M.format||(M.formatd="esm");M.context||(M.context=this.textMorph);M.sourceURL||(M.sourceURL=M.targetModule+"_doit_"+Date.now());M.systemInterface||(M.systemInterface=ib.localInterface);return M}},{key:"backend",value:function(M){M=this.sanatizedJsEnv(M);return M.remote?M.remote:"local"}},{key:"systemInterface",
value:function(M){return this.sanatizedJsEnv(M).systemInterface||ib.localInterface}},{key:"setSystemInterface",value:function(M){return this.evalEnvironment.systemInterface=M}},{key:"setSystemInterfaceNamed",value:function(M){return this.setSystemInterface(ib.systemInterfaceNamed(M))}},{key:"runEval",value:function(M,ea){ea=this.sanatizedJsEnv(ea);return this.systemInterface(ea).runEval(M,ea)}},{key:"parser",get:function(){return ib.parser}},{key:"parse",value:function(M){M=void 0===M?null:M;if(this._ast&&
this._ast._astType===M)return this._ast;var ea=this.parser,Ka=this.textMorph.textString;if(!ea)return null;var Za={withComments:!0,allowReturnOutsideFunction:!0};M&&(Za.type=M);if(Ka.startsWith("#!")){var $b=Ka.indexOf("\n");Ka=" ".repeat($b)+Ka.slice($b)}ea=ea.fuzzyParse(Ka,Za);ea._astType=M;return this._ast=ea}},{key:"undeclaredVariables",value:function(M){var ea=this.parser,Ka=this.evalEnvironment.knownGlobals||[];M=this.parse(void 0===M?null:M);return ea&&M?ea.query.findGlobalVarRefs(M,{jslintGlobalComment:!0}).filter(function(Za){return!Ka.includes(Za.name)}):
[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptEditorPlugin"}}],U,{pathInPackage:function(){return"js/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:664,end:6857})}(ib.CodeMirrorEnabledEditorPlugin);cd=ib.JavaScriptEditorPlugin;ta("default",cd);ib.default=cd}}});