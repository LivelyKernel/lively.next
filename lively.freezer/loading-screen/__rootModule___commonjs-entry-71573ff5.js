System.register(["@babel/plugin-syntax-import-meta"],function(Lc,pd){var Nd;return{setters:[function(Tc){Nd=Tc["default"]}],execute:function(){function Tc(e,h){h.forEach(function(l){l&&"string"!==typeof l&&!Array.isArray(l)&&Object.keys(l).forEach(function(b){if("default"!==b&&!(b in e)){var c=Object.getOwnPropertyDescriptor(l,b);Object.defineProperty(e,b,c.get?c:{enumerable:!0,get:function(){return l[b]}})}})});return Object.freeze(e)}function Jc(e){"@babel/helpers - typeof";"function"===typeof Symbol&&
"symbol"===typeof Symbol.iterator?Lc("D",Jc=function(h){return typeof h}):Lc("D",Jc=function(h){return h&&"function"===typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h});return Jc(e)}function $d(e,h,l,b,c,g,a){try{var d=e[g](a),f=d.value}catch(k){l(k);return}d.done?h(f):Promise.resolve(f).then(b,c)}function Bb(e){return function(){var h=this,l=arguments;return new Promise(function(b,c){function g(f){$d(d,b,c,g,a,"next",f)}function a(f){$d(d,b,c,g,a,"throw",f)}var d=e.apply(h,
l);g(void 0)})}}function rd(e,h){if(!(e instanceof h))throw new TypeError("Cannot call a class as a function");}function Id(e,h){for(var l=0;l<h.length;l++){var b=h[l];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(e,b.key,b)}}function Ac(e,h,l){h&&Id(e.prototype,h);l&&Id(e,l);return e}function Pc(e,h,l){h in e?Object.defineProperty(e,h,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[h]=l;return e}function gd(e,h){if("function"!==typeof h&&
null!==h)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(h&&h.prototype,{constructor:{value:e,writable:!0,configurable:!0}});h&&Fd(e,h)}function nd(e){Lc("am",nd=Object.setPrototypeOf?Object.getPrototypeOf:function(h){return h.__proto__||Object.getPrototypeOf(h)});return nd(e)}function Fd(e,h){Fd=Object.setPrototypeOf||function(l,b){l.__proto__=b;return l};return Fd(e,h)}function ic(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;
if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function vd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sb(e){var h=ic();return function(){var l=nd(e);if(h){var b=nd(this).constructor;l=Reflect.construct(l,arguments,b)}else l=l.apply(this,arguments);l=!l||"object"!==typeof l&&"function"!==typeof l?vd(this):l;return l}}function Xb(e,
h,l){"undefined"!==typeof Reflect&&Reflect.get?Lc("al",Xb=Reflect.get):Lc("al",Xb=function(b,c,g){for(;!Object.prototype.hasOwnProperty.call(b,c)&&(b=nd(b),null!==b););if(b)return c=Object.getOwnPropertyDescriptor(b,c),c.get?c.get.call(g):c.value});return Xb(e,h,l||e)}function Nb(e,h){var l;if(!(l=cb(e)))if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){l=[];var b=!0,c=!1,g=void 0;try{for(var a=e[Symbol.iterator](),d;!(b=(d=a.next()).done)&&(l.push(d.value),!h||l.length!==h);b=!0);}catch(f){c=
!0,g=f}finally{try{if(!b&&null!=a["return"])a["return"]()}finally{if(c)throw g;}}}else l=void 0;return l||ec(e,h)||yb()}function bc(e){return cb(e)||Hb(e)||ec(e)||yb()}function hb(e){var h=Array.isArray(e)?ub(e):void 0;if(!(e=h||Hb(e)||ec(e)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return e}function cb(e){if(Array.isArray(e))return e}function Hb(e){if("undefined"!==typeof Symbol&&Symbol.iterator in
Object(e))return Array.from(e)}function ec(e,h){if(e){if("string"===typeof e)return ub(e,h);var l=Object.prototype.toString.call(e).slice(8,-1);"Object"===l&&e.constructor&&(l=e.constructor.name);if("Map"===l||"Set"===l)return Array.from(e);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return ub(e,h)}}function ub(e,h){if(null==h||h>e.length)h=e.length;for(var l=0,b=Array(h);l<h;l++)b[l]=e[l];return b}function yb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function ba(e,h){var l;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(l=ec(e))||h&&e&&"number"===typeof e.length){l&&(e=l);var b=0;h=function(){};return{s:h,n:function(){return b>=e.length?{done:!0}:{done:!1,value:e[b++]}},e:function(d){throw d;},f:h}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var c=!0,g=!1,a;return{s:function(){l=e[Symbol.iterator]()},
n:function(){var d=l.next();c=d.done;return d},e:function(d){g=!0;a=d},f:function(){try{c||null==l.return||l.return()}finally{if(g)throw a;}}}}function wb(){return function(){}}function Xa(){return function(e){return e}}function Za(){return function(){return null}}function Sb(){return function(){return!1}}function Cb(){return function(){return!0}}function Da(){return function(){throw Error("Not yet implemented");}}function zb(e){var h=[],l;for(l in e)e.__lookupGetter__(l)||"function"!==typeof e[l]||
h.push(l);return h}function db(e){var h=[],l;for(l in e)!e.__lookupGetter__(l)&&e.hasOwnProperty(l)&&"function"===typeof e[l]&&h.push(l);return h}function ib(e){if(e.superclass)return[];var h=e.toString();e="";var l=h.match(/(?:\(([^\)]*)\)|([^\(\)-+!]+))\s*=>/);l?e=l[1]||l[2]||"":(h=h.match(/^[\s\(]*function[^(]*\(([^)]*)\)/))&&h[1]&&(e=h[1]);return e.replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",").map(function(b){return b.trim()}).filter(function(b){return!!b})}
function Ea(e){var h="";e.declaredClass?h+=e.declaredClass+">>":e.declaredObject&&(h+=e.declaredObject+".");return h+(e.methodName||e.displayName||e.name||"anonymous")}function W(e){e=String(e).replace(/^function[^\{]+\{\s*/,"").replace(/\}$/,"").trim();for(var h=e.split(/\n|\r/),l,b=0;b<h.length;b++){var c=h[b].match(/^(\s+)[^\s]/);c&&(void 0===l||c[1].length<l.length)&&(l=c[1])}return l?e.replace(new RegExp("^"+l,"gm"),""):e}function T(e){var h=Date.now();e();return Date.now()-h}function ia(e,h){for(var l=
Date.now(),b=0;b<h;b++)e();return(Date.now()-l)/h}function ka(e,h){var l=Array.prototype.slice.call(arguments),b=l.shift();h=1E3*l.shift();return setTimeout(function(){return b.apply(b,l)},h)}function K(e,h){var l,b,c,g,a,d,f=ef.debounce(h,function(){a=g=!1});return function(){l=this;b=arguments;c||(c=setTimeout(function(){c=null;a&&e.apply(l,b);f()},h));g?a=!0:d=e.apply(l,b);f();g=!0;return d}}function ya(e,h,l){var b;return function(){var c=this,g=arguments;l&&!b&&h.apply(c,g);clearTimeout(b);b=
setTimeout(function(){b=null;l||h.apply(c,g)},e)}}function pb(e,h,l){var b=ef._throttledByName;return b[e]?b[e]:b[e]=ef.throttle(function(){ef.debounceNamed(e,h,function(){delete b[e]})();return l.apply(this,arguments)},h)}function La(e,h,l,b){var c=ef._debouncedByName;return c[e]?c[e]:c[e]=ef.debounce(h,function(){delete c[e];return l.apply(this,arguments)},b)}function eb(e,h){var l=ef._queues,b=l[e]||(l[e]={_workerActive:!1,worker:h,tasks:[],drain:null,push:function(c){b.tasks.push(c);b._workerActive||
b.activateWorker()},pushAll:function(c){c.forEach(function(g){b.tasks.push(g)});b._workerActive||b.activateWorker()},pushNoActivate:function(c){b.tasks.push(c)},handleError:function(c){c&&console.error("Error in queue: "+c)},activateWorker:function(){function c(d){b.handleError(d);b.activateWorker()}var g=b.tasks,a=b._workerActive;if(0===g.length)a&&(b._workerActive=!1,"function"===typeof b.drain&&b.drain()),delete l[e];else{a||(b._workerActive=!0);try{b.worker(g.shift(),c)}catch(d){c(d)}}}});return b}
function jb(e,h,l){function b(){k&&clearTimeout(k);d=!0;delete g[e]}function c(n){d||(b(),a.callbacks.forEach(function(p){try{p.apply(null,n)}catch(q){console.error("Error when invoking callbacks in queueUntil ["+e+"]:\n"+String(q.stack||q))}}))}var g=ef._queueUntilCallbacks,a=g[e];if(a)return a;var d=!1,f=!1,k;l&&(k=setTimeout(function(){d||c([Error("timeout")])},l));a=g[e]={callbacks:[],cancel:function(){f=!0;b()},whenDone:function(n){a.callbacks.push(n);return a}};setTimeout(function(){if(!f)try{h(function(){c(arguments)})}catch(n){c([n])}},
0);return a}function E(){var e=Array.prototype.slice,h=e.call(arguments),l=ef._composeAsyncDefaultEndCallback,b=l,c,g,a=new Promise(function(d,f){c=d;g=f});return h.reverse().reduce(function(d,f,k){var n=!1;return function(){function p(){n=!0;var t=e.call(arguments),w=t.shift();w?(b(w),g(w)):d.apply(null,t)}var q=e.call(arguments);if(b===l&&k===h.length-1){for(;q.length&&"function"!==typeof q[q.length-1];)q.pop();"function"===typeof q[q.length-1]&&(b=q.pop())}if("function"===typeof f)try{var r=f.apply(this,
q.concat([p]));if(r&&"function"===typeof r.then&&"function"===typeof r["catch"])r.then(function(t){return p(null,t)})["catch"](function(t){return p(t)})}catch(t){console.error("composeAsync: ",t.stack||t),n||(b(t),g(t))}else if(f&&"function"===typeof f.then&&"function"===typeof f["catch"])f.then(function(t){p(null,t)})["catch"](function(t){p(t)});else q=Error("Invalid argument to composeAsync: "+f),b(q),g(q);return a}},function(){var d=e.call(arguments);b.apply(null,[null].concat(d));c(d[0])})}function Wb(){return Array.prototype.slice.call(arguments).reverse().reduce(function(e,
h){return function(){return e(h.apply(this,arguments))}},function(e){return e})}function R(e){return function(){var h=Array.prototype.slice.call(arguments);h=[h[1],h[0]].concat(h.slice(2));return e.apply(null,h)}}function xb(e){e=e||function(){};return function(){var h=Array.from(arguments);e.apply(null,[null].concat(h))}}function Ja(e,h,l){var b=Date.now(),c=50;l||(l=h,h=e,e=void 0);(function a(){if(h())return l();if(e){var d=Date.now()-b;d=e-d;if(0>=d)return l(Error("timeout"));d<c&&(c=d)}setTimeout(a,
c)})()}function Ga(e,h,l){function b(a,d,f,k){if(g.length){var n=null;a=g.indexOf(a);-1<a&&g.splice(a,1);f?(g.length=0,n=Error("in waitForAll at"+("number"===typeof d?" "+d:"")+": \n"+(f.stack||String(f)))):k&&(c[d]=k);g.length||setTimeout(function(){l(n,c)},0)}}l||(l=h,h=e,e=null);e=e||{};var c=h.map(function(){return null});if(h.length){var g=Array.prototype.slice.call(h);h.forEach(function(a,d){try{a(function(){var f=Array.prototype.slice.call(arguments),k=f.shift();b(a,d,k,f)})}catch(f){b(a,d,
f,null)}});e.timeout&&setTimeout(function(){if(g.length){var a=c.map(function(d,f){return null===d&&f}).filter(function(d){return"number"===typeof d}).join(", ");b(null,null,Error("waitForAll timed out, functions at "+a+" not done"),null)}},e.timeout)}else l(null,c)}function sa(e){function h(){return e.apply(this,g.concat(Array.prototype.slice.call(arguments)))}for(var l=arguments.length,b=Array(1<l?l-1:0),c=1;c<l;c++)b[c-1]=arguments[c];if(1>=arguments.length)return arguments[0];var g=Array.prototype.slice.call(arguments);
e=g.shift();h.isWrapper=!0;h.originalFunction=e;return h}function Ub(e,h){var l=function(){var b=Array.prototype.slice.call(arguments);b=h.isWrapper?b:[e.bind(this)].concat(b);return h.apply(this,b)};l.isWrapper=!0;l.originalFunction=e;return l}function vc(e){for(;e.originalFunction;)e=e.originalFunction;return e}function Oc(e){var h=[];do h.push(e),e=e.originalFunction;while(e);return h}function aa(e,h,l){l.originalFunction=e[h];var b=e.hasOwnProperty(h);e[h]=function(){b?e[h]=l.originalFunction:
delete e[h];return l.apply(this,arguments)};return e}function Ma(e){if(e){if("function"!==typeof e)throw Error("once() expecting a function");var h=!1,l;return function(){if(h)return l;h=!0;return l=e.apply(this,arguments)}}}function qb(){var e=!1;return Array.prototype.slice.call(arguments).map(function(h){return function(){if(!e)return e=!0,h.apply(this,arguments)}})}function Vb(e,h){var l=Array.prototype.slice.call(arguments),b=ef._eitherNameRegistry;e=l.shift();var c=b[e]||(b[e]={wasCalled:!1,
callsLeft:0});c.callsLeft++;return function(){c.callsLeft--;0>=c.callsLeft&&delete b[e];if(!c.wasCalled)return c.wasCalled=!0,h.apply(this,arguments)}}function Lb(e){return eval(e)}function Kb(e){return ef.evalJS("("+e.toString()+");")}function Db(e,h){return ef.Closure.fromFunction(e,h).recreateFunc()}function Ra(e,h,l,b){var c=l||e.name;if(!c)throw Error("Function that wants to be a script needs a name: "+this);l=Object.getPrototypeOf(h);var g={"this":h};b&&(g=ef.objectMerge([g,b]));l&&l[c]&&(g.$super=
ef.Closure.fromFunction(function(){try{return Object.getPrototypeOf(h)[c].apply(h,arguments)}catch(a){return"undefined"!==typeof $world?$world.logError(a,"Error in $super call"):console.error("Error in $super call: "+a+"\n"+a.stack),null}},{obj:h,name:c}).recreateFunc());return ef.addToObject(ef.asScript(e,g),h,c)}function N(e,h,l){e.displayName=l;var b=h.attributeConnections?h.attributeConnections.filter(function(c){return"update"===c.getSourceAttrName()}):[];b&&b.forEach(function(c){c.disconnect()});
h[l]=e;Jc(h)&&(e.declaredObject=ef.safeToString(h));"undefined"!==typeof lively&&h&&lively.Tracing&&lively.Tracing.stackTracingEnabled&&lively.Tracing.instrumentMethod(h,l,{declaredObject:ef.safeToString(h)});b&&b.forEach(function(c){c.connect()});return e}function va(e,h,l){e.hasLivelyClosure&&(e.livelyClosure.funcProperties[h]=l)}function Wa(e){return e.hasLivelyClosure?e.livelyClosure.varMapping:e.isWrapper?e.originalFunction.varMapping:e.varMapping?e.varMapping:{}}function pa(e,h,l){e[h]=l;e.hasLivelyClosure&&
(e.livelyClosure.funcProperties[h]=l)}function tb(e){for(var h=[],l=e.prototype;l;)h=Object.keys(l).reduce(function(b,c){"function"===typeof l[c]&&-1===b.indexOf(c)&&b.push(c);return b},h),l=Object.getPrototypeOf(l);return h}function ab(e){return Object.keys(e.prototype).filter(function(h){return"function"===typeof e.prototype[h]})}function Ob(e,h){var l=function(b){var c=Array.prototype.slice.call(arguments);c.shift();try{return b.apply(e,c)}catch(g){if("undefined"!==typeof lively&&lively.morphic&&
lively.morphic.World&&lively.morphic.World.current())throw lively.morphic.World.current().logError(g),g;h?console.warn("ERROR: %s.%s(%s): err: %s %s",e,h,c,g,g.stack||""):console.warn("ERROR: %s %s",g,g.stack||"");throw g;}};l.methodName="$logErrorsAdvice";l=ef.wrap(e,l);l.originalFunction=e;l.methodName="$logErrorsWrapper";return l}function yc(e,h){var l=function(b){var c=Array.prototype.slice.call(arguments);c.shift();try{var g=b.apply(e,c)}catch(a){throw console.warn("failed to load "+h+": "+a),
"undefined"!==typeof lively&&lively.lang.Execution&&lively.lang.Execution.showStack(),a;}console.log("completed "+h);return g};l.methodName="$logCompletionAdvice::"+h;l=ef.wrap(e,l);l.methodName="$logCompletionWrapper::"+h;l.originalFunction=e;return l}function Ta(e,h){var l=function(c){var g=Array.prototype.slice.call(arguments);g.shift();b=c.apply(e,g);h?console.warn("%s(%s) -> %s",ef.qualifiedMethodName(e),g,b):console.log("%s(%s) -> %s",ef.qualifiedMethodName(e),g,b);return b};l.methodName="$logCallsAdvice::"+
ef.qualifiedMethodName(e);var b=ef.wrap(e,l);b.originalFunction=e;b.methodName="$logCallsWrapper::"+ef.qualifiedMethodName(e);return b}function Bd(e,h){return ef.wrap(e,function(l){var b=Array.prototype.slice.call(arguments);b.shift();h.push(b);b=l.apply(e,b);h.pop();return b})}function Eb(){try{throw Error();}catch(e){return String(e.stack).split(/\n/).slice(2).map(function(h){return h.replace(/^\s*at\s*([^\s]+).*/,"$1")}).join("\n")}}function fe(e,h,l){l=l||0;var b=[];if(e<=h)for(0>=l&&(l=-l||1);e<=
h;e+=l)b.push(e);else for(0<=l&&(l=-l||-1);e>=h;e+=l)b.push(e);return b}function Od(e,h){for(var l=Array(e);0<e;)l[--e]=h;return l}function Hd(e,h){for(var l=Array(e);0<e;)l[--e]=h(e);return l}function Qc(e,h,l){var b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;if(e&&Array.isArray(e)){for(var c=0,g=e.length-1;c<=g;){var a=c+Math.floor((g-c)/2),d=l?l(e[a]):e[a];if(d===h)return e[a];d>h?g=a-1:c=a+1}if(b){if(!e[c])return e[g];if(!e[g])return e[c];b=l?l(e[c]):e[c];a=l?l(e[g]):e[g];return 0>
Math.abs(b-h)-Math.abs(a-h)?e[c]:e[g]}}}function Xd(e,h){var l;e.find(function(b,c){return l=h(b,c)});return l}function oc(e,h){return e.filter(function(l){return!!l[h]})}function rf(e,h){"string"===typeof h&&(h=new RegExp(h,"i"));return e.filter(function(l){return String(l).match(h)})}function Dd(e,h){return e.filter(function(l,b){return!!h[b]})}function ld(e,h,l){return e.filter(function(b,c){return!h.call(l,b,c)})}function Td(e,h){return e.filter(function(l){return!l[h]})}function gb(e,h){return e.filter(function(l){return l!==
h})}function Vc(e,h){return e.filter(function(l){return-1===h.indexOf(l)})}function vb(e,h){if(!e.length)return e;var l=[e[0]];if(h)for(h=1;h<e.length;h++){var b=e[h];b!==l[l.length]&&l.push(b)}else for(h=1;h<e.length;h++)b=e[h],-1===l.indexOf(b)&&l.push(b);return l}function cc(e,h,l){for(var b=e.slice(),c=b.length;c--;)for(var g=e[c],a=c+1;a<b.length;a++)h.call(l,g,b[a])&&b.splice(a--,1);return b}function ob(e,h){for(var l={},b=[],c=0;c<e.length;c++){var g=e[c];l[g[h]]||(l[g[h]]=!0,b.push(g))}return b}
function ac(e){return e.filter(Boolean)}function ae(e){for(var h=0,l=0,b=e.length;h<b;)e.hasOwnProperty(h)&&(e[l++]=e[h]),h++;for(;l++<b;)e.pop();return e}function qe(){var e=Array.from(arguments),h=e.shift(),l="function"===typeof Oe.last(e)?e.pop():function(c){return c},b=[h].concat(e).map(function(c){return Array.from(c)});return h.map(function(c,g){return l(Oe.pluck(b,g),g)})}function lc(e,h){return e.reduce(function(l,b){0<l.length&&l.push(h);l.push(b);return l},[])}function nc(e,h,l,b,c,g,a,
d){return e.map(function(f){return f[h](l,b,c,g,a,d)})}function Yc(e,h){return e.map(function(l){return l[h]})}function fd(e,h){var l=e.length;if(!h||l!==h.length)return!1;for(var b=0;b<l;b++){if(e[b]&&h[b]&&e[b].equals&&h[b].equals)if(e[b].equals(h[b]))continue;else return!1;if(e[b]!==h[b])return!1}return!0}function ua(e,h){var l=e.length;if(!h||l!==h.length)return!1;for(var b=0;b<l;b++)if(!Oe.objectEquals(e[b],h[b]))return!1;return!0}function Ab(e,h){if(h)for(h=1;h<e.length;h++){if(e[h-1]<e[h])return!1}else for(h=
1;h<e.length;h++)if(e[h-1]>e[h])return!1;return!0}function Fa(e,h,l){return Oe.pluck(e.map(function(b,c){return{value:b,criteria:h.call(l,b,c)}}).sort(function(b,c){b=b.criteria;c=c.criteria;return b<c?-1:b>c?1:0}),"value")}function za(e,h){return Oe.sortBy(e,function(l){return l[h]})}function Ka(e){return e.slice().reverse()}function Ib(e,h,l){l=l||String;return e.map(function(b){return l(b).match(h)})}function C(e){return e[0]}function Pb(e){return e[e.length-1]}function da(e,h){return Oe.uniq(e).filter(function(l){return-1<
h.indexOf(l)})}function wa(e,h){e=e.slice();for(var l=0;l<h.length;l++){var b=h[l];-1===e.indexOf(b)&&e.push(b)}return e}function ca(e,h,l){e.splice(l,0,h)}function ma(e,h){e.splice(h,1)}function u(e,h){var l=e.indexOf(h);0<=l&&Oe.removeAt(e,l);return h}function O(e,h){e.push.apply(e,h);return e}function P(e,h,l){e.splice.apply(e,[l,0].concat(h))}function fa(e,h){e.includes(h)||e.push(h)}function Qa(e,h,l){e.splice(l,1,h)}function Ua(e){e.length=0;return e}function Gb(e,h){for(var l=0;l<e.length;l++)if(!h.includes(e[l]))return!1;
return!0}function ta(e,h,l,b){l=l||Oe.NullFunction;h=h||function(c,g,a){g.call(b,c,a)};return e.reduceRight(function(c,g,a){return function(){h.call(b,c,g,a)}},l)()}function mc(e,h,l,b,c,g){b=b||function(){};return e.clone().reverse().reduce(function(a,d,f){return function(){h.call(c,d,f);g&&0!==f%g?a():a.delay(l)}},b)()}function pc(e,h,l){0>h&&(h=e.length+h);0>l&&(l=e.length+l);var b=e[h];e[h]=e[l];e[l]=b;return e}function zd(e,h){h=h||1;return e.slice(h).concat(e.slice(0,h))}function Pd(e,h,l){return Oe.Group.fromArray(e,
h,l)}function bd(e,h){return Oe.groupBy(e,function(l){return l[h]})}function Yd(e,h,l){h=h||function(g){return g};var b=[],c=[];e.forEach(function(g,a){(h.call(l,g,a)?b:c).push(g)});return[b,c]}function le(e,h,l){function b(g,a){if(!a.length)return[g,[]];var d=a[0];a=a.slice(1);var f=g.concat([d]);if(h.call(l,f))return b(f,a);g=b(g,a);return[g[0],[d].concat(g[1])]}function c(g,a){if(!a.length)return g;a=b([],a);if(!a[0].length)throw Error("Batchify constrained does not ensure consumption of at least one item per batch!");
return c(g.concat([a[0]]),a[1])}return c([],e)}function Be(e,h){h=h||1;return Oe.range(0,Math.ceil(e.length/h)-1).map(function(l){return e.slice(l*h,l*h+h)},e)}function Ne(e,h){for(var l=e.map(function(a,d){return a[h[d]]}),b=h.slice(),c=e.length;c--;0<=c){var g=b[c]+1;if(e[c][g]){b[c]=g;break}else if(0===c){b=void 0;break}else b[c]=0}return[l,b]}function Re(e){for(var h=e.reduce(function(g,a){return g*a.length},1),l=e.map(function(g){return 0}),b=Array(h),c=0;c<h;c++)l=Oe.combinationsPick(e,l),b[c]=
l[0],l=l[1];return b}function nf(e,h){return e.slice(0,h)}function af(e,h){return e.slice(h)}function yf(e,h,l){for(var b=0;b<e.length&&h.call(l,e[b],b);b++);return e.slice(0,b)}function Ig(e,h,l){for(var b=0;b<e.length&&h.call(l,e[b],b);b++);return e.slice(b)}function re(e){for(var h=Oe.range(0,e.length-1),l=Array(e.length),b=0;b<e.length;b++){var c=h.splice(Math.round(Math.random()*(h.length-1)),1);l[c]=e[b]}return l}function Ld(e,h,l){h=h||function(c){return c};var b;e.reduce(function(c,g,a){a=
h.call(l,g,a);if("number"!==typeof a||a<=c)return c;b=g;return a},-Infinity);return b}function fc(e,h,l){h=h||function(b){return b};return Oe.max(e,function(b,c){return-h.call(l,b,c)})}function wd(e){for(var h=0,l=0;l<e.length;l++)h+=e[l];return h}function Ie(e,h){return e.reduce(function(l,b){return b===h?l+1:l},0)}function ff(e,h){if("undefined"===typeof h||"number"===typeof h){var l=h||Math.ceil(Math.log(e.length)/Math.log(2)+1),b=Math.ceil(Math.round(e.length/l));return Oe.range(0,l-1).map(function(c){return e.slice(c*
b,(c+1)*b)})}if(h instanceof Array)return e.reduce(function(c,g){if(g<h[1])return c[0].push(g),c;for(var a=1;a<h.length;a++)if(g>=h[a]&&(!h[a+1]||g<=h[a+1]))return c[a].push(g),c;throw Error("Histogram creation: Cannot group data ".concat(g," into thresholds ").concat(h));},Oe.range(1,h.length).map(function(){return[]}))}function Pe(e){return[].concat(e)}function Gf(e,h,l){return e.filter(h,l)}function Vf(e,h,l){return e.find(h,l)}function cd(e,h,l){return e.map(h,l)}function Y(e,h){return e.flat(h)}
function Ba(e,h,l){return e.flatMap(h,l)}function mb(e,h,l){return e.slice(h,l)}function Ca(e){if(e&&Array.isArray(e))return"["+e.map(Ca)+"]";if("string"!==typeof e)return String(e);e=String(e);e=e.replace(/\n/g,"\\n\\\n");e=e.replace(/(")/g,"\\$1");return'"'+e+'"'}function Cc(e){return Array.isArray(e)}function Fc(e){return e&&1===e.nodeType}function ud(e){return e instanceof Function}function ke(e){return"boolean"===typeof e}function ze(e){return"string"===typeof e}function xe(e){return"number"===
typeof e}function qd(e){return"undefined"===typeof e}function We(e){return e instanceof RegExp}function of(e){return"object"===Jc(e)}function Ef(e){if(!e)return!0;switch(Jc(e)){case "string":case "number":case "boolean":return!0}return!1}function v(e){for(var h in e)if(e.hasOwnProperty(h))return!1;return!0}function na(e,h){if(e===h)return!0;if(!e||!h)return e===h;if(Array.isArray(e))return Jf.arrayDeepEquals(e,h);switch(e.constructor){case String:case Date:case Boolean:case Number:return e===h}if("function"===
typeof e.isEqualNode)return e.isEqualNode(h);if("function"===typeof e.equals)return e.equals(h);var l=[],b;for(b in e)if(l.push(b),"function"!==typeof e[b]&&!na(e[b],h[b]))return!1;for(var c in h)if(-1===l.indexOf(c)&&"function"!==typeof h[c]&&!na(h[c],e[c]))return!1;return!0}function Hc(e){return e?Object.keys(e).map(function(h){return e[h]}):[]}function Nc(e,h){for(var l={},b=0;b<h.length;b++)l[h[b]]=e[h[b]];return l}function Ud(e,h){e=e||{};e=Jf.getOwnPropertyDescriptors(e);for(var l=0;l<h.length;l++)h[l]in
e&&delete e[h[l]];return Object.defineProperties({},e)}function ue(e,h,l,b){h=Jf.functionFromString(h);return Jf.asScriptOf(h,e,l,b)}function bf(e,h){for(var l=null,b=1;b<arguments.length;b++)if("string"===typeof arguments[b])l=arguments[b],e.categories||(e.categories={}),e.categories[l]||(e.categories[l]=[]),l=e.categories[l];else{h=arguments[b];for(var c in h){var g=h.__lookupGetter__(c),a=h.__lookupSetter__(c);g&&e.__defineGetter__(c,g);a&&e.__defineSetter__(c,a);g||a||(g=h[c],e[c]=g,l&&l.push(c),
"function"===typeof g&&(g.displayName||(g.displayName=c),"undefined"!==typeof lively&&lively.Module&&lively.Module.current&&(g.sourceModule=lively.Module.current())))}}return e}function pf(e){if(Jf.isPrimitive(e))return e;if(Array.isArray(e))return Array.prototype.slice.call(e);var h={},l;for(l in e)e.hasOwnProperty(l)&&(h[l]=e[l]);h.__proto__=e.__proto__;return h}function mg(e,h,l){for(var b={},c=0;c<h.length;c++)h[c]in e&&(b[h[c]]=l?l(h[c],e[h[c]]):e[h[c]]);return b}function Zd(e,h,l){h=h||{};l=
l||0;if(h.customPrinter){var b=h._ignoreSignal||(h._ignoreSignal={}),c=h.customPrinter(e,b,function(q){return Zd(q,h,l+1)});if(c!==b)return c}if(!e)return Jf.print(e);if("function"===typeof e)return h.printFunctionSource?String(e):"function"+(e.name?" "+e.name:"")+"("+Jf.argumentNames(e).join(",")+") {/*...*/}";switch(e.constructor){case String:case Boolean:case RegExp:case Number:return Jf.print(e)}if("function"===typeof e.serializeExpr)return e.serializeExpr();var g=e&&Array.isArray(e);b=g?"[":
"{";c=g?"]":"}";if(h.maxDepth&&l>=h.maxDepth)return b+"/*...*/"+c;var a=[];if(g)a=e.map(function(q){return Zd(q,h,l+1)});else{var d=Object.keys(e).sort(function(q,r){var t="function"===typeof e[q];return t===("function"===typeof e[r])?q<r?-1:q>r?1:0:t?1:-1});"function"===typeof h.keySorter&&(d=d.sort(h.keySorter));for(var f=0;f<d.length;f++){if(f>(h.maxNumberOfKeys||Infinity)){d=d.length-f;a.push("...".concat(d," hidden ").concat(1<d?"entries":"entry","..."));break}var k=d[f];g&&Zd(e[k],h,l+1);var n=
Zd(e[k],h,l+1);a.push((h.escapeKeys?JSON.stringify(k):k)+": "+n)}}if(0===a.length)return b+c;d=a.join(", ");f=(!g||h.newLineInArrays)&&(!h.minLengthForNewLine||d.length>=h.minLengthForNewLine);var p=Jf.indent("",h.indent||"  ",l);k=Jf.indent("",h.indent||"  ",l+1);n=f&&!g?"\n"+k:"";g=f&&!g?"\n"+p:"";f&&(d=a.join(","+(f?"\n"+k:"")));return b+n+d+g+c}function tg(e){return 1<arguments.length?tg(Array.prototype.slice.call(arguments)):Array.isArray(e[0])?Array.prototype.concat.apply([],e):e.reduce(function(h,
l){for(var b in l)l.hasOwnProperty(b)&&(h[b]=l[b]);return h},{})}function Sg(e,h){if(!e)return h;if(!h)return e;if(Array.isArray(e)){if(!Array.isArray(h))return h;var l=e.map(function(b,c){return Sg(b,h[c])});h.length>e.length&&(l=l.concat(h.slice(e.length)));return l}return e.constructor!==Object||h.constructor!==Object?h:Object.keys(e).concat(Object.keys(h)).reduce(function(b,c){e[c]?h[c]?"object"!==Jc(e[c])||"object"!==Jc(h[c])?b[c]=h[c]:b[c]=Sg(e[c],h[c]):b[c]=e[c]:b[c]=h[c];return b},{})}function oh(e){var h=
[];for(f in e){var l=e[f],b=l.hasOwnProperty("before")?l.before:l.before=[];l=l.hasOwnProperty("after")?l.after:l.after=[];var c="";try{c=String(this)}catch(k){}for(var g=b.length;g--;){var a=b[g],d=e[a];d?(d.hasOwnProperty("after")||(d.after=[]),d.after.push(f)):(console.warn("[initializeProperties] ".concat(c," sortProperties: ")+"Property ".concat(f," requires to be initialized before ").concat(a," ")+"but that property cannot be found."),b.splice(g,1))}for(b=l.length;b--;)g=l[b],e[g]||(console.warn("[initializeProperties] ".concat(c,
" sortProperties: ")+"Property ".concat(f," requires to be initialized after ").concat(g," ")+"but that property cannot be found."),l.splice(b,1));h.push(f)}var f=[];l=[];for(c=h.length+1;h.length;){if(c===h.length)throw Error("Circular dependencies in handler order, could not resolve properties "+h.map(function(k){var n=e[k].before,p=e[k].after;if(!(n&&n.length||p&&p.length))return"";k="".concat(k,"\n");n&&n.length&&(k+="  - before ".concat(n.join(","),"\n"));p&&p.length&&(k+="  - after ".concat(p.join(","),
"\n"));return k}).join(""));c=h.length;b=[];for(g=h.length;g--;)a=h[g],Jf.isSubset(e[a].after,l)&&(h.splice(g,1),l.push(a),b.push(a));f.push(b)}return f.flat()}function Hf(e){return Object.create(e)}function Bh(e,h){for(var l=[];e;)e.hasOwnProperty(h)&&l.unshift(e[h]),e=Object.getPrototypeOf(e);return l}function ah(e,h){return Jf.merge(Jf.valuesInPropertyHierarchy(e,h))}function th(e){if(!e||"object"!==Jc(e)||e instanceof RegExp)return e;var h=Array.isArray(e)?Array(e.length):{},l;for(l in e)e.hasOwnProperty(l)&&
(h[l]=th(e[l]));return h}function Xg(e){return null===e?"null":"undefined"===typeof e?"undefined":e.constructor.name}function ti(e){return-1===["null","undefined","Boolean","Number","String"].indexOf(Jf.typeStringOf(e))}function Af(e){function h(b,c,g,a){if(b.constructor.name===c){l+=g;if(b.length||Object.keys(b).length)l+="...";l+=a}}if(!Jf.isMutableType(e))return Jf.safeToString(e);if("Object"!==e.constructor.name&&!Array.isArray(e)&&e.constructor.name)return e.constructor.name?e.constructor.name:
Object.prototype.toString.call(e).split(" ")[1].split("]")[0];var l="";h(e,"Object","{","}");h(e,"Array","[","]");return l}function vh(e){try{return(e?e.toString():String(e)).replace("\n","")}catch(h){return"<error printing object>"}}function Md(e){switch(Jc(e)){case "string":return new String(e);case "boolean":return new Boolean(e);case "number":return new Number(e);default:return e}}function Bf(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"_",l=1;do var b=h+"-"+l++;while(b in
e);return b}function xg(e,h){h!==e.constructor&&(e.constructor=h,Jf.setPrototypeOf(e,h.prototype))}function df(){return De.formatFromArray(Array.prototype.slice.call(arguments))}function y(e){function h(q,r){return""+q}function l(q,r){return q.toString()}function b(q,r){return De.inspectObject(q)}var c=e.shift();c||console.log("Error in Strings>>formatFromArray, first arg is undefined");var g={s:h,d:l,i:l,f:function(q,r,t){return-1<t?q.toFixed(t):q.toString()},o:b},a=/((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/;
c=function(q){for(var r=[],t=a.exec(q);t;t=a.exec(q)){var w=t[8]||t[5];w=w in g?g[w]:b;var x=t[3]?parseInt(t[3]):"."==t[4]?-1:0;r.push(q.substr(0,"%"==t[0][0]?t.index:t.index+1));r.push({appender:w,precision:x});q=q.substr(t.index+t[0].length)}q&&r.push(q.toString());return r}(c);for(var d="",f=0,k=0;k<c.length;++k){var n=c[k];if(n&&"object"===Jc(n)){var p=e[f++];d+=(n.appender||h)(p,d,n.precision)}else d+=""+n}return d}function A(e,h,l){if(!l||0>=l)return e;for(var b="";0<l;)l--,b+=h;return De.lines(e).map(function(c){return b+
c}).join("\n")}function H(e,h){h||(h="  ");return De.min(e.match(new RegExp("^("+h+")*","gm")).map(function(l){return Math.floor(l.length/h.length)}))}function Z(e,h,l){h||(h="  ");l||(l=0);var b=De.minIndent(e,h);if(b===l)return e;if(b<l)return De.indent(e,h,l-b);var c=h.repeat(b-l);return De.lines(e).map(function(g){return g.slice(c.length)}).join("\n")}function M(e){return'"'+e.replace(/"/g,'\\"')+'"'}function qa(e){return De.articles.articlize(e)}function Pa(e){return De.articles.find(e)}function Yb(e){if(e&&
Array.isArray(e))return"["+e.map(Yb)+"]";if("string"!==typeof e)return String(e);e=String(e);e=e.replace(/\n/g,"\\n\\\n");e=e.replace(/(")/g,"\\$1");return'"'+e+'"'}function $b(e,h){h=h||0;return e.reduce(function(l,b){return l+(Array.isArray(b)?$b(b,h+1):De.indent(b+"\n","  ",h))},"")}function zc(e,h,l){return l?" ".repeat(h)+e:e+" ".repeat(h)}function id(e,h){function l(d){return g?!1:a?!0:h&&Array.isArray(h.align)&&"right"===h.align[d]}var b=[],c=h&&h.separator||" ",g=!h||!h.align||"left"===h.align,
a=h&&"right"===h.align;e.forEach(function(d){d.forEach(function(f,k){void 0===b[k]&&(b[k]=0);b[k]=Math.max(b[k],String(f).length)})});return e.map(function(d){return d.map(function(f,k){f=String(f);return De.pad(f,b[k]-f.length,l(k))}).join(c)}).join("\n")}function jd(e,h,l,b){function c(a,d,f){g[d]=b.repeat(a)+h(f,a);f=l(f,a);var k=d+1;if(!f||!f.length)return k;var n=k,p=f.length-1;f.forEach(function(q,r){k=c(a+1,k,q);q=p===r;var t=g[n].split(""),w=a*b.length+b.length;for(r=a*b.length+1;r<w;r++)t[r]=
"-";q&&(t[a*b.length]="\\");g[n]=t.join("");q||g.slice(n,k).forEach(function(x,B){x=x.split("");x[a*b.length]="|";g[n+B]=x.join("")});n=k});return k}var g=[];b=b||"  ";c(0,0,e);return g.join("\n")}function kd(e){return e.split("")}function be(e){return e.split(/\n\r?/)}function te(e,h){var l=h?h.sep:"\n\n";return h&&h.keepEmptyLines?e.split("\n").concat("").reduce(function(b,c){var g=b[0];b=b[1];/^\s*$/.test(b)===/^\s*$/.test(c)?b+="\n"+c:(b.length&&g.push(b),b=c);return[g,b]},[[],""])[0]:e.split(new RegExp(l+
"+"))}function Ce(e){return De.lines(e).compact()}function me(e,h){return e.split(h||/\s+/).filter(function(l){return!/^\s*$/.test(l)})}function ve(e,h){h=h||{};var l=h.cellSplitter||/\s+/,b=/^\s*$/;h=h.hasOwnProperty("convertTypes")?!!h.convertTypes:!0;e=De.lines(e);for(var c=[],g=0;g<e.length;g++){var a=De.tokens(e[g],l);h&&(a=a.map(function(d){if(d.match(b))return d;var f=Number(d);if(!isNaN(f))return f;f=new Date(d);return isNaN(+f)?d.trim():f}));0<a.length&&c.push(a)}return c}function qg(e){if("undefined"===
typeof document)throw Error("Cannot unescapeCharacterEntities");var h=document.createElement("div");h.innerHTML=e;return h.textContent}function Eg(e,h){return(e=e.trim().match(/([^?#]*)(#.*)?$/))?e[1].split(h||"&").inject({},function(l,b){if((b=b.split("="))[0]){var c=decodeURIComponent(b.shift());b=1<b.length?b.join("="):b[0];void 0!=b&&(b=decodeURIComponent(b));c in l?(Array.isArray(l[c])||(l[c]=[l[c]]),l[c].push(b)):l[c]=b}return l}):{}}function Wf(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,
function(h,l){return String.fromCharCode("0x"+l)}))}function $f(e){return decodeURIComponent(atob(e).split("").map(function(h){return"%"+("00"+h.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function Lf(e){var h=e.match(De.urlStartRe),l=(h=h?h[0]:null)?e.slice(h.length):e;do e=l,l=e.replace(De.pathDoubleDotRe,"");while(l!=e);l=l.replace(De.pathDoubleSlashRe,"$1/");l=l.replace(De.pathDotRe,"/");h&&(l=h+l);return l}function jf(){return De.normalizePath(Array.prototype.slice.call(arguments).reduce(function(e,
h){return"string"===typeof h?e.replace(/\/*$/,"")+"/"+h.replace(/^\/*/,""):e}))}function wh(e){return e.replace(De.slashEndRe,"")+"/"}function yg(){return De.newUUIDTemplate.replace(De.newUUIDRe,De.newUUIDReplacer).toUpperCase()}function Gg(e,h){return"data:"+(h||"text/plain")+";base64,"+De.base64EncodeUnicode(e)}function zf(e){var h=0,l=e.length;if(0==l)return h;for(var b=0;b<l;b++){var c=e.charCodeAt(b);h=(h<<5)-h+c;h&=h}return h}function Kh(e){function h(f,k,n,p,q,r){k=a(a(k,f),a(p,r));return a(k<<
q|k>>>32-q,n)}function l(f,k,n,p,q,r,t){return h(k&n|~k&p,f,k,q,r,t)}function b(f,k,n,p,q,r,t){return h(k&p|n&~p,f,k,q,r,t)}function c(f,k,n,p,q,r,t){return h(n^(k|~p),f,k,q,r,t)}function g(f,k){var n=f[0],p=f[1],q=f[2],r=f[3];n=l(n,p,q,r,k[0],7,-680876936);r=l(r,n,p,q,k[1],12,-389564586);q=l(q,r,n,p,k[2],17,606105819);p=l(p,q,r,n,k[3],22,-1044525330);n=l(n,p,q,r,k[4],7,-176418897);r=l(r,n,p,q,k[5],12,1200080426);q=l(q,r,n,p,k[6],17,-1473231341);p=l(p,q,r,n,k[7],22,-45705983);n=l(n,p,q,r,k[8],7,1770035416);
r=l(r,n,p,q,k[9],12,-1958414417);q=l(q,r,n,p,k[10],17,-42063);p=l(p,q,r,n,k[11],22,-1990404162);n=l(n,p,q,r,k[12],7,1804603682);r=l(r,n,p,q,k[13],12,-40341101);q=l(q,r,n,p,k[14],17,-1502002290);p=l(p,q,r,n,k[15],22,1236535329);n=b(n,p,q,r,k[1],5,-165796510);r=b(r,n,p,q,k[6],9,-1069501632);q=b(q,r,n,p,k[11],14,643717713);p=b(p,q,r,n,k[0],20,-373897302);n=b(n,p,q,r,k[5],5,-701558691);r=b(r,n,p,q,k[10],9,38016083);q=b(q,r,n,p,k[15],14,-660478335);p=b(p,q,r,n,k[4],20,-405537848);n=b(n,p,q,r,k[9],5,568446438);
r=b(r,n,p,q,k[14],9,-1019803690);q=b(q,r,n,p,k[3],14,-187363961);p=b(p,q,r,n,k[8],20,1163531501);n=b(n,p,q,r,k[13],5,-1444681467);r=b(r,n,p,q,k[2],9,-51403784);q=b(q,r,n,p,k[7],14,1735328473);p=b(p,q,r,n,k[12],20,-1926607734);n=h(p^q^r,n,p,k[5],4,-378558);r=h(n^p^q,r,n,k[8],11,-2022574463);q=h(r^n^p,q,r,k[11],16,1839030562);p=h(q^r^n,p,q,k[14],23,-35309556);n=h(p^q^r,n,p,k[1],4,-1530992060);r=h(n^p^q,r,n,k[4],11,1272893353);q=h(r^n^p,q,r,k[7],16,-155497632);p=h(q^r^n,p,q,k[10],23,-1094730640);n=h(p^
q^r,n,p,k[13],4,681279174);r=h(n^p^q,r,n,k[0],11,-358537222);q=h(r^n^p,q,r,k[3],16,-722521979);p=h(q^r^n,p,q,k[6],23,76029189);n=h(p^q^r,n,p,k[9],4,-640364487);r=h(n^p^q,r,n,k[12],11,-421815835);q=h(r^n^p,q,r,k[15],16,530742520);p=h(q^r^n,p,q,k[2],23,-995338651);n=c(n,p,q,r,k[0],6,-198630844);r=c(r,n,p,q,k[7],10,1126891415);q=c(q,r,n,p,k[14],15,-1416354905);p=c(p,q,r,n,k[5],21,-57434055);n=c(n,p,q,r,k[12],6,1700485571);r=c(r,n,p,q,k[3],10,-1894986606);q=c(q,r,n,p,k[10],15,-1051523);p=c(p,q,r,n,k[1],
21,-2054922799);n=c(n,p,q,r,k[8],6,1873313359);r=c(r,n,p,q,k[15],10,-30611744);q=c(q,r,n,p,k[6],15,-1560198380);p=c(p,q,r,n,k[13],21,1309151649);n=c(n,p,q,r,k[4],6,-145523070);r=c(r,n,p,q,k[11],10,-1120210379);q=c(q,r,n,p,k[2],15,718787259);p=c(p,q,r,n,k[9],21,-343485551);f[0]=a(n,f[0]);f[1]=a(p,f[1]);f[2]=a(q,f[2]);f[3]=a(r,f[3])}var a=function(f,k){var n=(f&65535)+(k&65535);return(f>>16)+(k>>16)+(n>>16)<<16|n&65535},d="0123456789abcdef".split("");return function(f){for(var k=f.length,n=0;n<k;n++){for(var p=
n,q=f[n],r="",t=0;4>t;t++)r+=d[q>>8*t+4&15]+d[q>>8*t&15];f[p]=r}return f.join("")}(function(f){var k=f.length,n=[1732584193,-271733879,-1732584194,271733878],p;for(p=64;p<=k;p+=64){var q,r=f.substring(p-64,p),t=[];for(q=0;64>q;q+=4)t[q>>2]=r.charCodeAt(q)+(r.charCodeAt(q+1)<<8)+(r.charCodeAt(q+2)<<16)+(r.charCodeAt(q+3)<<24);g(n,t)}f=f.substring(p-64);q=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];r=f.length;for(p=0;p<r;p++)q[p>>2]|=f.charCodeAt(p)<<(p%4<<3);q[p>>2]|=128<<(p%4<<3);if(55<p)for(g(n,q),p=16;p--;)q[p]=
0;q[14]=8*k;g(n,q);return n}(e))}function cg(e,h){var l=[];e.replace(h,function(b,c){l.push({match:b,start:c,end:c+b.length})});return l}function Ag(e,h,l){function b(a,d){if(d.constructor!==RegExp){if(0===a.indexOf(d))return{match:d,rest:a.slice(d.length)};for(var f=0;f<d.length;f++)if(d[f]!=a[f])return{match:null,pos:f};return{match:null}}return(d=De.reMatches(a,d))&&d.length&&0===d[0].start?{match:d[0].match,rest:a.slice(d[0].end)}:{match:null}}function c(a){var d=De.reMatches(a,/__\//g),f=De.reMatches(a,
/\/__/g);if(d.length!==f.length)throw Error("pattern invalid: "+a+" cannot be split into __/.../__ embedded RegExps\nstarts: "+JSON.stringify(d)+"\nvs ends:\n"+JSON.stringify(f));var k=0;return d.reduce(function(n,p,q){var r=f[q];q=n.pop();p=p.start-k;r=r.end-k;var t;var w=t=3;q=[q.slice(0,p),q.slice(p+t,r-w),q.slice(r)];q[0].length&&(n.push(q[0]),k+=q[0].length);try{q[1].length&&(n.push(new RegExp(q[1])),k+=q[1].length+3+3)}catch(x){throw Error("Cannot create pattern re from: "+De.inspectObject(q));
}q[2].length&&n.push(q[2]);return n},[a])}function g(a,d){d=c(d);a:{for(var f=a,k=0,n=0;n<d.length;n++){var p=d[n];f=b(f,p);if(!f.match){d={matched:!1,pos:k+(f.pos||0),pattern:p};break a}k+=f.match.length;f=f.rest}d=f.length?{matched:!1,pos:k}:{matched:!0}}if(d.matched)return d;d.error=a.slice(0,d.pos)+"<--UNMATCHED--\x3e"+a.slice(d.pos);return d}l=l||{};l.normalizeWhiteSpace&&(e=e.replace(/\s+/g," "));l.ignoreIndent&&(e=e.replace(/^\s+/gm,""),h=h.replace(/^\s+/gm,""));return e==h?{matched:!0}:g(e,
h)}function Uf(e,h,l){e=e.slice(h);return"string"===typeof l?(e=e.indexOf(l),-1===e?null:e+h):l.constructor===RegExp?(h=De.reMatches(e,l),h[0]?h[0].start:null):null}function Lh(e,h,l){e=e.slice(0,h);return"string"===typeof l?(e=e.lastIndexOf(l),-1===e?null:e):l.constructor===RegExp?(e=De.reMatches(e,l),De.last(e)?De.last(e).start:null):null}function Mj(e){var h=De.lineRanges(e);return function(l){for(var b=0;b<h.length;b++){var c=h[b];if(l>=c[0]&&l<c[1])return b}return-1}}function Dl(e){return function(h){return De.lineRanges(e)[h]}}
function El(e){for(var h=0,l=De.lines(e),b=[],c=0;c<l.length;c++)e=h+l[c].length+1,b.push([h,e]),h=e;return b}function pj(e,h){var l=e.length;if(0===l)return-1;for(var b=0;;){var c=b+Math.floor((l-b)/2),g=Nb(e[c],2),a=g[1];if(h<g[0]){if(0===c)break;l=c}else if(h>a)b=c;else return c}return-1}function Dk(e,h){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,b=this.substring(l||0).search(h);return 0<=b?b+(l||0):b}function pk(e,h){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:
e.length;h=h.global?h:new RegExp(h.source,"g"+(h.ignoreCase?"i":"")+(h.multiLine?"m":""));l=this.substring(0,l+1);for(var b=-1,c=0,g;null!=(g=h.exec(l));)b=g.index,h.lastIndex=++c;return b}function km(e,h){return"undefined"===typeof JsDiff?"diff not supported":JsDiff.convertChangesToXML(JsDiff.diffWordsWithSpace(e,h))}function Pm(e){return""==e}function lm(e){e=e[0];return"A"===e||"E"===e||"I"===e||"O"===e||"U"===e||"a"===e||"e"===e||"i"===e||"o"===e||"u"===e||!1}function Qm(e,h){var l=parseFloat(e);
return isNaN(l)?e:l.toFixed(h)}function mm(e){return e.length?e.charAt(0).toUpperCase()+e.slice(1):e}function Pl(e){return e.split(" ").map(De.capitalize).join("")}function Fn(e){var h=e.split("-"),l=h.length;if(1==l)return h[0];e="-"==e.charAt(0)?h[0].charAt(0).toUpperCase()+h[0].substring(1):h[0];for(var b=1;b<l;b++)e+=h[b].charAt(0).toUpperCase()+h[b].substring(1);return e}function Gn(e){for(var h=e.length,l=0,b=[],c=0;c<h;c++)" "!=e[c]&&e[c]==e[c].toUpperCase()&&(b.push(e.slice(l,c).toLowerCase()),
l=c);b.push(e.slice(l).toLowerCase());return b.join(" ")}function dl(e,h,l){h=h||30;l=void 0===l?"...":l;return e.length>h?e.slice(0,h-l.length)+l:String(e)}function el(e,h,l){h=h||30;return e.length>h?(void 0===l?"...":l)+e.slice(-h):String(e)}function nm(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function ol(e){return e.slice(0,e.length-1)+String.fromCharCode(e.charCodeAt(e.length-1)+1)}function om(e){return e.charCodeAt(0)-48}function fl(e,h){for(var l=
[],b=0;b<e.length;b++){l[b]=[];for(var c=0;c<h.length;c++)l[b][c]=0}for(b=0;b<e.length;b++)l[b][0]=0;for(b=1;b<e.length;b++)for(c=1;c<h.length;c++)l[b][c]=e[b-1]==h[c-1]?l[b-1][c-1]+1:0;for(var g=c=b=-1,a=0;a<e.length;a++)for(var d=0;d<h.length;d++){var f=l[a][d];b<f&&(b=f,c=a-f,g=d-f)}return{length:b,indexA:c,indexB:g,string:0<b?e.slice(c,c+b):""}}function Hn(e,h){return"insert"===h.action?e.slice(0,h.start)+h.lines.join("\n")+e.slice(h.start):"remove"===h.action?e.slice(0,h.start)+e.slice(h.end):
e}function pm(e,h){return h.reduce(function(l,b){return De.applyChange(l,b)},e)}function qm(e,h){if(0===e.length)return h.length;if(0===h.length)return e.length;var l;if(e.length>h.length){var b=e;e=h;h=b}var c=Array(e.length+1);for(b=0;b<=e.length;b++)c[b]=b;for(b=1;b<=h.length;b++){var g=b;for(l=1;l<=e.length;l++){var a=h[b-1]===e[l-1]?c[l-1]:Math.min(c[l-1]+1,Math.min(g+1,c[l]+1));c[l-1]=g;g=a}c[e.length]=g}return c[e.length]}function Ql(e,h){e=e||0;return Math.round(Math.random()*((h||100)-e)+
e)}function Rl(e,h){var l,b=!1;return function(c,g){if(b)return b=!1,l*g+c;do{var a=2*Math.random()-1;var d=2*Math.random()-1;var f=a*a+d*d}while(1<=f||0===f);f=Math.sqrt(-2*Math.log(f)/f);l=d*f;b=!0;return c+g*a*f}}function Rd(e){return Math.floor(Math.random()*e)}function Je(e){if(1E3>e)return String(Math.round(100*e)/100)+"B";e/=1024;return 1E3>e?String(Math.round(100*e)/100)+"KB":String(Math.round(e/1024*100)/100)+"MB"}function Ve(e){return e.reduce(function(h,l){return h+l},0)/e.length}function lf(e,
h,l){return(e-h)/l+h}function fh(e){var h=e.sort(function(l,b){return b-l});e=e.length;return 0===e%2?.5*(h[e/2-1]+h[e/2]):h[(e-1)/2]}function Wh(e,h,l,b){b=b||0;if(h<l)var c=l;else c=h,h=l;return 0<=c-e+b&&0>=h-e-b}function ki(e,h,l){return Math.max(h,Math.min(l,e))}function qk(e){return e.sort(function(h,l){return h-l})}function Nj(e,h){h=h||"px";if((e=e.match(/([0-9\.]+)\s*(.*)/))&&e[1]){var l=parseFloat(e[1]);return Xh.convertLength(l,e[2],h)}}function kj(e){if(!isFinite(e))return 0;for(var h=
1,l=0;Math.round(e*h)/h!==e;)h*=10,l++;return l}function dk(e,h){h=1/h;return Math.round(e*h)/h}function Tj(e,h,l,b){var c=Xh.roundTo(e,l);return Math.abs(e-c)<h/2?c:b?e:c+(e-(e<c?c-h/2:c+h/2))*l/(l-h)}function Rm(e){return 180*e/Math.PI%360}function up(e){return e/180*Math.PI}function Jq(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:5,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:3E4,b=Math.min(l,h*Math.pow(2,e));return Math.min(l,h+Math.random()*(3*(b/2+Math.round(b/
2*Math.random()))-h))}function In(e,h,l){return h+e*(l-h)}function Eo(e,h){var l=[],b;for(b in e)(e.__lookupGetter__(b)||"function"!==typeof e[b])&&(h?h(b,e):1)&&l.push(b);return l}function Fo(e){for(var h={};e=e.__proto__;)Object.assign(h,Object.getOwnPropertyDescriptors(e));return h}function Kq(e,h){return Object.getOwnPropertyNames(e).reduce(function(l,b){(h?h(e,b):1)&&l.push(b);return l},[])}function Lq(e){var h=[],l;for(l in e)e.hasOwnProperty(l)&&(e.__lookupGetter__(l)||"function"!==e[l])&&
h.push(l);return h}function Mq(e,h,l){var b=[],c;for(c in e)if(e.hasOwnProperty(c)){var g=e[c];"function"!==g&&b.push(h.call(l||this,c,g))}return b}function Jn(e,h){for(var l in e)if(e[l]===h)return l}function vp(e){var h=[],l;for(l in e)h.push(e[l]);return h}function Nq(e){var h=[],l;for(l in e)e.hasOwnProperty(l)&&h.push(e[l]);return h}function Kn(e,h){for(var l in e)if(h(e,l))return!0;return!1}function wp(e,h){var l=[],b;for(b in e)(h?h(e,b):1)&&l.push(b);return l}function Oq(e){return Object.keys(e).sort().join("").hashCode()}
function Pq(e,h,l){return Ln.dateFormat(e,h,l)}function Qq(e,h){return h&&h instanceof Date&&h.getTime()===e.getTime()}function Mn(e,h){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(!(h instanceof Date)||h<e)return"";if(h===e)return"now";var b="min",c="sec",g="hour",a="day",d=Math.round((h-e)/1E3),f=d%60,k=Math.floor(d/60)%60,n=Math.floor(d/60/60)%24;d=Math.floor(d/60/60/24);var p=[];0<d&&(p.push(d),1<d&&(a+="s"),p.push(a));if(l.forceHours||0<n&&2>d)p.push(n),1<n&&(g+="s"),p.push(g);
if(l.forceMinutes||0<k&&3>n&&0===d)p.push(k),1<k&&(b+="s"),p.push(b);if(l.forceSeconds||0<f&&3>k&&0===n&&0===d)p.push(f),1<f&&(c+="s"),p.push(c);return p.join(" ")}function ai(e){return"function"===typeof e?ai.convertCallbackFun(e):Promise.resolve(e)}function Sm(e,h){return new Promise(function(l){return setTimeout(l,e,h)})}function xp(e,h){return new Promise(function(l,b){return setTimeout(b,e,h)})}function Rq(e,h){return new Promise(function(l,b){var c=!1;setTimeout(function(){return!c&&(c=!0)&&
b(Error("Promise timed out"))},e);h.then(function(g){return!c&&(c=!0)&&l(g)},function(g){return!c&&(c=!0)&&b(g)})})}function Sq(e){var h=Date.now();return Promise.resolve(e).then(function(){return Date.now()-h})}function Go(e,h,l){"function"===typeof e&&(h=e,e=void 0);var b;return(b=h())?Promise.resolve(b):new Promise(function(c,g){var a=!1,d=!1,f,k,n=setInterval(function(){if(a){var p=n;clearInterval(p);delete Mh.waitForClosures[p]}else{try{k=h()}catch(q){f=q}if(k||f||d)return a=!0,p=n,clearInterval(p),
delete Mh.waitForClosures[p],f?g(f):d?"undefined"===typeof l?g(Error("timeout")):c(l):c(k)}},10);Mh.waitForClosures[n]=n;"number"===typeof e&&setTimeout(function(){return d=!0},e)})}function Tq(){var e,h,l=new Promise(function(b,c){e=b;h=c});return{resolve:e,reject:h,promise:l}}function Uq(e){return function(){var h=Array.from(arguments),l=this;return new Promise(function(b,c){h.push(function(g,a){return g?c(g):b(a)});e.apply(l,h)})}}function Us(e){return function(){var h=Array.from(arguments),l=
this;return new Promise(function(b,c){h.push(function(){var g=Array.from(arguments),a=g.shift();return a?c(a):b(g)});e.apply(l,h)})}}function Vs(e,h,l,b,c){var g=e.shift();if(g)try{Promise.resolve(g(h,l)).then(function(a){return Vs(e,a,l,b,c)})["catch"](function(a){c(a)})}catch(a){c(a)}else b(h)}function Ws(e){return new Promise(function(h,l){return Mh._chainResolveNext(e.slice(),void 0,{},h,l)})}function rm(e,h){return Promise.resolve(e).then(function(l){try{h()}catch(b){console.error("Error in promise finally: "+
b.stack||b)}return l})["catch"](function(l){try{h()}catch(b){console.error("Error in promise finally: "+b.stack||b)}throw l;})}function Vq(e){function h(){b--;try{var n=a++;e[n]().then(function(p){b++;c[n]=p;0===--d?f():l()})["catch"](function(p){return k(p)})}catch(p){k(p)}}function l(){for(;!g&&0<d&&a<e.length&&0<b;)h()}var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Infinity;if(!e.length)return Promise.resolve([]);var c=[],g=null,a=0,d=e.length,f,k;return new Promise(function(n,p){f=
function(){return n(c)};k=function(q){return p(g=q)};l()})}function Nh(e,h){if(e instanceof Nh)return e;if(!(this instanceof Nh))return new Nh(e,h);this.setSplitter(h||".");this.fromPath(e)}function Sl(e){var h={},l;for(l in e)h[l]=e[l].slice();return h}function Wq(e,h){var l={},b;for(b in e)if(!h.includes(b)){l[b]=[];for(var c=e[b],g=0;g<c.length;g++){var a=c[g];h.includes(a)||l[b].push(a)}}return l}function yp(e,h){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],b=3<arguments.length&&
void 0!==arguments[3]?arguments[3]:Infinity;if(!Array.isArray(e[h]))return[];for(var c=[],g={},a={},d=0;d<l.length;d++)a[l[d]]=!0;d=e[h].slice();for(var f={},k=d.length;k--;){var n=d[k];n in a?d.splice(k,1):f[n]=1}if(l)for(;0!==d.length;)for(l=0;l<d.length;l++)if(n=d.shift(),!(n in g||n in a)&&(k=f[n]||0,!(k>b)&&(c.push(n),g[n]=!0,n=e[n])))for(var p=0;p<n.length;p++){var q=n[p];q in g||q in f||(f[q]=k+1,d.push(q))}return c}function Ho(e,h,l){var b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:
Infinity;l&&(e=Fj.without(e,l));for(var c=[h],g=0,a={};c.length&&g++<b;){var d=c.shift();if(!a[d]){var f=e[d]||[];a[d]=f;c.push.apply(c,hb(f))}}return a}function Io(e){var h={},l;for(l in e)for(var b=e[l],c=0;c<b.length;c++){var g=b[c];h[g]?h[g].push(l):h[g]=[l]}return h}function Xq(e,h){var l=[];h={};var b={},c={},g;for(g in e){h.hasOwnProperty(g)||(h[g]=!0,l.push(g));var a=e[g],d={};if(a){b[g]=[];a=ba(a);var f;try{for(a.s();!(f=a.n()).done;){var k=f.value;if(!d.hasOwnProperty(k)&&g!==k){var n=c[k]||
(c[k]=[]);n.includes(g)||n.push(g);d[k]=!0;b[g].push(k);h.hasOwnProperty(k)||(h[k]=!0,l.push(k))}}}catch(q){a.e(q)}finally{a.f()}}}var p=[];for(e=function(){for(var q=Infinity,r=[],t=[],w=[],x=0;x<l.length;x++){var B=l[x],D=b[B]||[];if(!(D.length>q))if(D.length!==q||D.some(function(oa){return r.includes(oa)}))q=D.length,r=[B],t=[x],w=(c[B]||[]).slice();else{var F;r.push(B);t.push(x);(F=w).push.apply(F,hb(c[B]||[]))}}for(q=t.length;q--;)c[l[t[q]]]=[],l.splice(t[q],1);t=ba(w);var L;try{for(t.s();!(L=
t.n()).done;){var G=L.value;b[G]=b[G].filter(function(oa){return!r.includes(oa)})}}catch(oa){t.e(oa)}finally{t.f()}p.push(r)};l.length;)e();return p}function Yq(e,h,l,b,c,g){function a(k){-1<d.indexOf(k)||(b=e.call(g,b,k,f++),d=d.concat([k]),Fj.withoutAll(h[k]||[],d).forEach(function(n){return a(n)}))}var d=c||[],f=0;a(l);return b}function Zq(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10,h={},l=Fj.range(1,e).map(String),b=0;b<l.length;b++){var c=Math.floor(Math.random()*e);
h[l[b]]=Fj.shuffle(l).slice(0,c)}return h}function zp(e){return Array.isArray(e)&&2<=e.length&&e[0]<=e[1]}function $q(e){return e.sort(wi.compare)}function Tm(e,h){return e[0]<h[0]?e[1]<h[0]?-3:e[1]===h[0]?-2:-1:e[0]===h[0]?e[1]===h[1]?0:e[1]<h[1]?-1:1:-1*Tm(h,e)}function ar(e,h,l){switch(this.compare(e,h)){case -3:case 3:return null;case 0:return l&&l(e,h,e),e;case 2:case 1:var b=e;e=h;h=b;case -2:case -1:return b=[e[0],Math.max(e[1],h[1])],l&&l(e,h,b),b;default:throw Error("Interval compare failed");
}}function Um(e,h){for(var l=[],b=e.length;0<b;){var c=e.shift();b--;for(var g=0;g<b;g++){var a=wi.coalesce(c,e[g],h);a&&(c=a,e.splice(g,1),b--,g--)}l.push(c)}return this.sort(l)}function br(e,h,l){for(var b=[],c=function(){var g=e.shift(),a=h.map(function(d){d=wi.compare(g,d);return-1===d||0===d||1===d});b.push(l(g,a[0]));b.push(g)};0<e.length;)c();return b}function Nn(e,h,l,b,c,g){g=g||wi.GLOB;l=this.sort(l);for(var a,d=[];a=l.shift();)if(!(a[1]<e)){a[0]<e&&(a=Array.prototype.slice.call(a),a[0]=
e);var f=h<a[0]?h:a[0];e<f&&d.push(b.call(g,[e,f],!0));h<a[1]&&(a=Array.prototype.slice.call(a),a[1]=h);a[0]===a[1]?(e=void 0,c&&(e=d.slice(-1)[0])&&c.call(g,e,a,e)):d.push(b.call(g,a,!1));e=a[1];if(e>=h)break}e<h&&d.push(b.call(g,[e,h],!0));return d}function Vm(e,h,l){return wi.intervalsInRangeDo(e,h,wi.coalesceOverlapping(Array.prototype.slice.call(l)),function(b,c){return c?b:null}).filter(Boolean)}function Tl(e,h){var l=0,b,c;return h.map(function(g){for(;c=e[l];)if(c[0]<g[0])l++;else break;if(c&&
c[0]===g[0]){for(b=l;c=e[b];)if(c[1]<g[1])b++;else break;if(c&&c[1]===g[1])return wi.range(l,b)}return[]})}function Ap(e,h,l){l=l||0;l+h>e.length&&(l-=l+h-e.length);return{array:e,from:l,to:l+h}}function Bp(e){return e.array.slice(e.from,e.to)}function Cp(e,h){return h<e.from||h>=e.to?null:h-e.from}function cr(e,h){return 0>h||h>e.to-e.from?null:e.from+h}function Jo(e,h){if(!(h in e.array))return null;var l=0;h<e.from&&(l=-e.from+h);h>=e.to&&(l=h-e.to+1);return 0===l?e:Wm.create(e.array,e.to-e.from,
e.from+l)}function dr(e,h,l){return(e=e[h])?e[l]:void 0}function On(e,h,l,b){(e=e[h])&&(e[l]=b);return b}function Ko(e,h){return e[h]}function Lo(e,h,l){return e[h]=l}function er(e,h){return e.reduce(function(l,b){l.push(b[h]);return l},[])}function xc(e,h,l){return e.map(function(b,c){return b[h]?b[h]=l[c]:void 0})}function Bc(e,h,l){for(var b=Array(e);0<e;)b[--e]=pi.arrayWithN(h,l);return b}function Rc(e,h,l,b){for(var c=Array(e),g=0;g<e;g++){c[g]=Array(h);for(var a=0;a<h;a++)c[g][a]=l.call(b||
this,g,a)}return c}function Ec(e,h,l){e.forEach(function(b,c){b.forEach(function(g,a){h.call(l||this,g,c,a)})})}function Dc(e,h,l){var b=Array(e.length);e.forEach(function(c,g){b[g]=Array(c.length);c.forEach(function(a,d){b[g][d]=h.call(l||this,a,g,d)})});return b}function sd(e){for(var h=e[0],l=Array(e.length-1),b=1;b<e.length;b++)for(var c=l[b-1]={},g=0;g<h.length;g++)c[h[g]]=e[b][g];return l}function ce(e,h){Array.isArray(e)||(e=[e]);var l=[[]],b=l[0],c=e.reduce(function(g,a){return g.concat([Object.keys(a).reduce(function(d,
f){var k=b.indexOf(f);-1===k&&(k=b.length,b.push(f));d[k]=a[f];return d},[])])},[]);h=1===arguments.length?null:h;c.forEach(function(g){for(var a=0;a<b.length;a++)g[a]||(g[a]=h)});return l.concat(c)}function pe(e,h,l){var b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{i:0},c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,g=b.i++;h(e,g,c);(l(e,g,c)||[]).forEach(function(a){return pe(a,h,l,b,c+1)})}function He(e,h,l){var b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:
{i:0},c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,g=b.i++;(l(e,g,c)||[]).forEach(function(a){return He(a,h,l,b,c)});h(e,g,c)}function Ze(e,h,l){if(h(e))return e;if((e=l(e))&&e.length)for(var b=0;b<e.length;b++){var c=Ze(e[b],h,l);if(c)return c}}function fg(e,h,l){var b=[];h(e)&&b.push(e);return b.concat((l(e)||[]).map(function(c){return fg(c,h,l)}).flat())}function gg(e,h,l){var b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return[h(e,b)].concat((l(e)||[]).map(function(c){return gg(c,
h,l,b+1)}).flat())}function Og(e,h,l){var b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,c=(l(e)||[]).map(function(g){return Og(g,h,l,b+1)});return h(e,c,b)}function hh(){}function vg(){vg.init.call(this)}function ph(e,h,l,b){var c;if("function"!==typeof l)throw new TypeError('"listener" argument must be a function');if(c=e._events){c.newListener&&(e.emit("newListener",h,l.listener?l.listener:l),c=e._events);var g=c[h]}else c=e._events=new hh,e._eventsCount=0;g?("function"===typeof g?
g=c[h]=b?[l,g]:[g,l]:b?g.unshift(l):g.push(l),g.warned||(l=void 0===e._maxListeners?vg.defaultMaxListeners:e._maxListeners)&&0<l&&g.length>l&&(g.warned=!0,l=Error("Possible EventEmitter memory leak detected. "+g.length+" "+h+" listeners added. Use emitter.setMaxListeners() to increase limit"),l.name="MaxListenersExceededWarning",l.emitter=e,l.type=h,l.count=g.length,"function"===typeof console.warn?console.warn(l):console.log(l))):(c[h]=l,++e._eventsCount);return e}function qj(e,h,l){function b(){e.removeListener(h,
b);c||(c=!0,l.apply(e,arguments))}var c=!1;b.listener=l;return b}function fj(e){var h=this._events;if(h){e=h[e];if("function"===typeof e)return 1;if(e)return e.length}return 0}function Li(e,h){for(var l=Array(h);h--;)l[h]=e[h];return l}function pl(e){var h=[{name:"send",args:["msg","callback"]},{name:"listen",args:["messenger","callback"]},{name:"close",args:["messenger","callback"]},{name:"isOnline",args:[]}],l=h.map(function(a){return a.name}).concat("id sendHeartbeat heartbeatInterval ignoreUnknownMessages allowConcurrentSends sendTimeout services".split(" "));
h.forEach(function(a){if(!e[a.name])throw a="message implementation needs function "+a.name+"("+a.args.join(",")+")",Error(a);});h=e.sendHeartbeat&&(e.heartbeatInterval||1E3);var b=e.hasOwnProperty("ignoreUnknownMessages")?e.ignoreUnknownMessages:!1,c={_outgoing:[],_inflight:[],_id:e.id||Uj.newUUID(),_ignoreUnknownMessages:b,_services:{},_messageCounter:0,_messageResponseCallbacks:{},_whenOnlineCallbacks:[],_statusWatcherProc:null,_startHeartbeatProcessProc:null,_listenInProgress:null,_heartbeatInterval:h,
_status:Uj.OFFLINE,_runWhenOnlineCallbacks:function(){var a=c._whenOnlineCallbacks.slice();c._whenOnlineCallbacks=[];a.forEach(function(d){try{d.call(null,null,c)}catch(f){console.error("error in _runWhenOnlineCallbacks: %s",f)}})},_ensureStatusWatcher:function(){c._statusWatcherProc||(c._statusWatcherProc=setInterval(function(){c.isOnline()&&c._whenOnlineCallbacks.length&&c._runWhenOnlineCallbacks();var a=c._status;c._status=c.isOnline()?Uj.ONLINE:Uj.OFFLINE;c._status!==Uj.ONLINE&&c._statusWatcherProc&&
c.reconnect();if(c._status!==a&&c.onStatusChange)c.onStatusChange()},20))},_addMissingData:function(a){if(!a.target)throw Error("Message needs target!");if(!a.action)throw Error("Message needs action!");a.data||(a.data=null);a.messageId||(a.messageId=Uj.newUUID());a.sender=c.id();a.messageIndex=c._messageCounter++;return a},_queueSend:function(a,d){if(d&&"function"!==typeof d)throw Error("Expecing a when send callback, got: "+d);c._outgoing.push([a,d])},_deliverMessageQueue:function(){function a(k){if(-1!==
c._inflight.indexOf(k)){var n=k[0],p=k[1];p&&(c._messageResponseCallbacks[n.messageId]=p);e.send.call(c,n,function(q){Uj.remove(c._inflight,k);q&&d(q,k);c._deliverMessageQueue()})}}function d(k,n){var p=n[1];delete c._messageResponseCallbacks[n[0].messageId];console.error(k);p&&p(k)}if(e.allowConcurrentSends||!c._inflight.length){var f=c._outgoing.shift();f&&(c._inflight.push(f),c.isOnline()?a(f):c.whenOnline(function(){a(f)}),function(k){"number"===typeof e.sendTimeout&&setTimeout(function(){-1!==
c._inflight.indexOf(k)&&(Uj.remove(c._inflight,k),d(Error("Timeout sending message"),k),c._deliverMessageQueue())},e.sendTimeout)}(f),e.allowConcurrentSends&&c._outgoing.length&&c._deliverMessageQueue())}},_startHeartbeatProcess:function(){c._startHeartbeatProcessProc||(c._startHeartbeatProcessProc=setTimeout(function(){e.sendHeartbeat.call(c,function(a,d){c._startHeartbeatProcessProc=null;c._startHeartbeatProcess()})},c._heartbeatInterval))},id:function(){return c._id},isOnline:function(){return e.isOnline.call(c)},
heartbeatEnabled:function(){return"number"===typeof c._heartbeatInterval},listen:function(a){if(!c._listenInProgress)return c._listenInProgress=!0,c._ensureStatusWatcher(),e.listen.call(c,function(d){c._listenInProgress=null;a&&a(d);c.heartbeatEnabled()&&c._startHeartbeatProcess()})},reconnect:function(){if(c._status!==Uj.ONLINE)return c.listen(),c},send:function(a,d){c._addMissingData(a);c._queueSend(a,d);c._deliverMessageQueue();return a},sendTo:function(a,d,f,k){return c.send({target:a,action:d,
data:f},k)},onMessage:function(a){c.emit("message",a);if(a.inResponseTo){var d=c._messageResponseCallbacks[a.inResponseTo];d&&!a.expectMoreResponses&&delete c._messageResponseCallbacks[a.inResponseTo];d&&d(null,a)}else if(d=c._services[a.action])try{d.call(null,a,c)}catch(f){d=String(f.stack||f),console.error("Error invoking service: "+d),c.answer(a,{error:d})}else c._ignoreUnknownMessages||c.answer(a,{error:String(Error("messageNotUnderstood: "+a.action))})},answer:function(a,d,f,k){"function"===
typeof f&&(k=f,f=!1);a={target:a.sender,action:a.action+"Result",inResponseTo:a.messageId,data:d};f&&(a.expectMoreResponses=!0);return c.send(a,k)},close:function(a){clearInterval(c._statusWatcherProc);c._statusWatcherProc=null;e.close.call(c,function(d){c._status=Uj.OFFLINE;a&&a(d)});return c},whenOnline:function(a){c._whenOnlineCallbacks.push(a);c.isOnline()&&c._runWhenOnlineCallbacks();return c},outgoingMessages:function(){return Uj.pluck(c._inflight.concat(c._outgoing),0)},addServices:function(a){Object.assign(c._services,
a);return c}};e.services&&c.addServices(e.services);Uj.makeEmitter(c);for(var g in e)-1===l.indexOf(g)&&e.hasOwnProperty(g)&&(c[g]=e[g]);return c}function Qk(e){var h=e.default;if("function"==typeof h){var l=function(){return h.apply(this,arguments)};l.prototype=h.prototype}else l={};Object.defineProperty(l,"__esModule",{value:!0});Object.keys(e).forEach(function(b){var c=Object.getOwnPropertyDescriptor(e,b);Object.defineProperty(l,b,c.get?c:{enumerable:!0,get:function(){return e[b]}})});return l}
function sm(){if(Xm.hasRequiredLib)return Xm.lib;Xm.hasRequiredLib=1;return Xm.lib}function Mo(){return JI||(JI={"/lively.next-node_modules/babel-plugin-transform-es2015-modules-systemjs/6.19.0/lib/index.js":sm})}function my(e){function h(l){var b=jv(l,e);if(null!==b)return Mo()[b]();throw Error('Could not dynamically require "'+l+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');}h.resolve=
function(l){var b=jv(l,e);return null!==b?b:require.resolve(l)};return h}function jv(e,h){var l=e[0];if("/"===l||"\\"===l)l=!1;else{var b=e[1],c=e[2];l=("."!==l||b&&"/"!==b&&"\\"!==b)&&("."!==l||"."!==b||c&&"/"!==c&&"\\"!==c)&&(":"!==b||"/"!==c&&"\\"!==c)?!0:!1}e=Xs(e);"/"===e[0]&&(h="");b=Mo();for(c=["",".js",".json"];;){var g=l?Xs(h+"/node_modules/"+e):Xs(h+"/"+e);if(g.endsWith("/.."))break;for(var a=0;a<c.length;a++){var d=g+c[a];if(b[d])return d}if(!l)break;g=Xs(h+"/..");if(g===h)break;h=g}return null}
function Xs(e){e=e.replace(/\\/g,"/");e=e.split("/");for(var h=""===e[0],l=1;l<e.length;l++)"."!==e[l]&&""!==e[l]||e.splice(l--,1);for(l=1;l<e.length;l++)".."===e[l]&&0<l&&".."!==e[l-1]&&"."!==e[l-1]&&(e.splice(--l,2),l--);e=e.join("/");h&&"/"!==e[0]?e="/"+e:0===e.length&&(e=".");return e}function kv(e,h){for(var l=0,b=e.length-1;0<=b;b--){var c=e[b];"."===c?e.splice(b,1):".."===c?(e.splice(b,1),l++):l&&(e.splice(b,1),l--)}if(h)for(;l--;l)e.unshift("..");return e}function Dp(){for(var e="",h=!1,l=
arguments.length-1;-1<=l&&!h;l--){var b=0<=l?arguments[l]:"/";if("string"!==typeof b)throw new TypeError("Arguments to path.resolve must be strings");b&&(e=b+"/"+e,h="/"===b.charAt(0))}e=kv(lv(e.split("/"),function(c){return!!c}),!h).join("/");return(h?"/":"")+e||"."}function fr(e){var h=mv(e),l="/"===$V(e,-1);(e=kv(lv(e.split("/"),function(b){return!!b}),!h).join("/"))||h||(e=".");e&&l&&(e+="/");return(h?"/":"")+e}function mv(e){return"/"===e.charAt(0)}function ny(){var e=Array.prototype.slice.call(arguments,
0);return fr(lv(e,function(h,l){if("string"!==typeof h)throw new TypeError("Arguments to path.join must be strings");return h}).join("/"))}function oy(e,h){function l(a){for(var d=0;d<a.length&&""===a[d];d++);for(var f=a.length-1;0<=f&&""===a[f];f--);return d>f?[]:a.slice(d,f-d+1)}e=Dp(e).substr(1);h=Dp(h).substr(1);e=l(e.split("/"));h=l(h.split("/"));for(var b=Math.min(e.length,h.length),c=b,g=0;g<b;g++)if(e[g]!==h[g]){c=g;break}b=[];for(g=c;g<e.length;g++)b.push("..");b=b.concat(h.slice(c));return b.join("/")}
function nv(e){var h=HB.exec(e).slice(1);e=h[0];h=h[1];if(!e&&!h)return".";h&&(h=h.substr(0,h.length-1));return e+h}function py(e,h){e=HB.exec(e).slice(1)[2];h&&e.substr(-1*h.length)===h&&(e=e.substr(0,e.length-h.length));return e}function Ep(e){return HB.exec(e).slice(1)[3]}function lv(e,h){if(e.filter)return e.filter(h);for(var l=[],b=0;b<e.length;b++)h(e[b],b,e)&&l.push(e[b]);return l}function qy(){if("undefined"===typeof ry){var e=new ArrayBuffer(2),h=new Uint8Array(e);e=new Uint16Array(e);h[0]=
1;h[1]=2;if(258===e[0])ry="BE";else if(513===e[0])ry="LE";else throw Error("unable to figure out endianess");}return ry}function sy(){return"undefined"!==typeof Pn.location?Pn.location.hostname:""}function ty(){return[]}function uy(){return 0}function vy(){return Number.MAX_VALUE}function Qn(){return Number.MAX_VALUE}function ov(){return[]}function wy(){return"Browser"}function xy(){return"undefined"!==typeof Pn.navigator?Pn.navigator.appVersion:""}function yy(){return{}}function pv(){return{}}function zy(){return"javascript"}
function xi(){return"browser"}function No(){return"/tmp"}function Ay(){IB=!0;for(var e=0;64>e;++e)Rn[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e],tm["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=e;tm[45]=62;tm[95]=63}function JB(e,h,l){for(var b=[],c=h;c<l;c+=3)h=(e[c]<<16)+(e[c+1]<<8)+e[c+2],b.push(Rn[h>>18&63]+Rn[h>>12&63]+Rn[h>>6&63]+Rn[h&63]);return b.join("")}function By(e){IB||Ay();for(var h=e.length,l=h%3,b="",c=[],g=0,a=h-l;g<
a;g+=16383)c.push(JB(e,g,g+16383>a?a:g+16383));1===l?(e=e[h-1],b+=Rn[e>>2],b+=Rn[e<<4&63],b+="=="):2===l&&(e=(e[h-2]<<8)+e[h-1],b+=Rn[e>>10],b+=Rn[e>>4&63],b+=Rn[e<<2&63],b+="=");c.push(b);return c.join("")}function Ys(e,h,l,b,c){var g=8*c-b-1;var a=(1<<g)-1,d=a>>1,f=-7;c=l?c-1:0;var k=l?-1:1,n=e[h+c];c+=k;l=n&(1<<-f)-1;n>>=-f;for(f+=g;0<f;l=256*l+e[h+c],c+=k,f-=8);g=l&(1<<-f)-1;l>>=-f;for(f+=b;0<f;g=256*g+e[h+c],c+=k,f-=8);if(0===l)l=1-d;else{if(l===a)return g?NaN:Infinity*(n?-1:1);g+=Math.pow(2,
b);l-=d}return(n?-1:1)*g*Math.pow(2,l-b)}function Oj(e,h,l,b,c,g){var a,d=8*g-c-1,f=(1<<d)-1,k=f>>1,n=23===c?Math.pow(2,-24)-Math.pow(2,-77):0;g=b?0:g-1;var p=b?1:-1,q=0>h||0===h&&0>1/h?1:0;h=Math.abs(h);isNaN(h)||Infinity===h?(h=isNaN(h)?1:0,b=f):(b=Math.floor(Math.log(h)/Math.LN2),1>h*(a=Math.pow(2,-b))&&(b--,a*=2),h=1<=b+k?h+n/a:h+n*Math.pow(2,1-k),2<=h*a&&(b++,a/=2),b+k>=f?(h=0,b=f):1<=b+k?(h=(h*a-1)*Math.pow(2,c),b+=k):(h=h*Math.pow(2,k-1)*Math.pow(2,c),b=0));for(;8<=c;e[l+g]=h&255,g+=p,h/=256,
c-=8);b=b<<c|h;for(d+=c;0<d;e[l+g]=b&255,g+=p,b/=256,d-=8);e[l+g-p]|=128*q}function Fl(e,h){if((Ff.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<h)throw new RangeError("Invalid typed array length");Ff.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(h),e.__proto__=Ff.prototype):(null===e&&(e=new Ff(h)),e.length=h);return e}function Ff(e,h,l){if(!(Ff.TYPED_ARRAY_SUPPORT||this instanceof Ff))return new Ff(e,h,l);if("number"===typeof e){if("string"===typeof h)throw Error("If encoding is specified then the first argument must be a string");
return um(this,e)}return Zs(this,e,h,l)}function Zs(e,h,l,b){if("number"===typeof h)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&h instanceof ArrayBuffer){h.byteLength;if(0>l||h.byteLength<l)throw new RangeError("'offset' is out of bounds");if(h.byteLength<l+(b||0))throw new RangeError("'length' is out of bounds");h=void 0===l&&void 0===b?new Uint8Array(h):void 0===b?new Uint8Array(h,l):new Uint8Array(h,l,b);Ff.TYPED_ARRAY_SUPPORT?(e=h,e.__proto__=
Ff.prototype):e=$s(e,h);return e}if("string"===typeof h){b=e;e=l;if("string"!==typeof e||""===e)e="utf8";if(!Ff.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');l=hi(h,e)|0;b=Fl(b,l);h=b.write(h,e);h!==l&&(b=b.slice(0,h));return b}return aj(e,h)}function Vj(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(0>e)throw new RangeError('"size" argument must not be negative');}function um(e,h){Vj(h);e=Fl(e,0>h?0:gr(h)|0);if(!Ff.TYPED_ARRAY_SUPPORT)for(var l=
0;l<h;++l)e[l]=0;return e}function $s(e,h){var l=0>h.length?0:gr(h.length)|0;e=Fl(e,l);for(var b=0;b<l;b+=1)e[b]=h[b]&255;return e}function aj(e,h){if(Ul(h)){var l=gr(h.length)|0;e=Fl(e,l);if(0===e.length)return e;h.copy(e,0,0,l);return e}if(h){if("undefined"!==typeof ArrayBuffer&&h.buffer instanceof ArrayBuffer||"length"in h)return(l="number"!==typeof h.length)||(l=h.length,l=l!==l),l?Fl(e,0):$s(e,h);if("Buffer"===h.type&&KI(h.data))return $s(e,h.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
}function gr(e){if(e>=(Ff.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(Ff.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return e|0}function Ul(e){return!(null==e||!e._isBuffer)}function hi(e,h){if(Ul(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var l=e.length;
if(0===l)return 0;for(var b=!1;;)switch(h){case "ascii":case "latin1":case "binary":return l;case "utf8":case "utf-8":case void 0:return Fp(e).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*l;case "hex":return l>>>1;case "base64":return at(e).length;default:if(b)return Fp(e).length;h=(""+h).toLowerCase();b=!0}}function Cy(e,h,l){var b=!1;if(void 0===h||0>h)h=0;if(h>this.length)return"";if(void 0===l||l>this.length)l=this.length;if(0>=l)return"";l>>>=0;h>>>=0;if(l<=h)return"";
for(e||(e="utf8");;)switch(e){case "hex":e=h;h=l;l=this.length;if(!e||0>e)e=0;if(!h||0>h||h>l)h=l;b="";for(l=e;l<h;++l)e=b,b=this[l],b=16>b?"0"+b.toString(16):b.toString(16),b=e+b;return b;case "utf8":case "utf-8":return hr(this,h,l);case "ascii":e="";for(l=Math.min(this.length,l);h<l;++h)e+=String.fromCharCode(this[h]&127);return e;case "latin1":case "binary":e="";for(l=Math.min(this.length,l);h<l;++h)e+=String.fromCharCode(this[h]);return e;case "base64":return h=0===h&&l===this.length?By(this):
By(this.slice(h,l)),h;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":h=this.slice(h,l);l="";for(e=0;e<h.length;e+=2)l+=String.fromCharCode(h[e]+256*h[e+1]);return l;default:if(b)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();b=!0}}function Sn(e,h,l){var b=e[h];e[h]=e[l];e[l]=b}function ir(e,h,l,b,c){if(0===e.length)return-1;"string"===typeof l?(b=l,l=0):2147483647<l?l=2147483647:-2147483648>l&&(l=-2147483648);l=+l;isNaN(l)&&(l=c?0:e.length-1);0>l&&(l=e.length+l);if(l>=
e.length){if(c)return-1;l=e.length-1}else if(0>l)if(c)l=0;else return-1;"string"===typeof h&&(h=Ff.from(h,b));if(Ul(h))return 0===h.length?-1:bt(e,h,l,b,c);if("number"===typeof h)return h&=255,Ff.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?c?Uint8Array.prototype.indexOf.call(e,h,l):Uint8Array.prototype.lastIndexOf.call(e,h,l):bt(e,[h],l,b,c);throw new TypeError("val must be string, number or Buffer");}function bt(e,h,l,b,c){function g(k,n){return 1===a?k[n]:k.readUInt16BE(n*
a)}var a=1,d=e.length,f=h.length;if(void 0!==b&&(b=String(b).toLowerCase(),"ucs2"===b||"ucs-2"===b||"utf16le"===b||"utf-16le"===b)){if(2>e.length||2>h.length)return-1;a=2;d/=2;f/=2;l/=2}if(c)for(b=-1;l<d;l++)if(g(e,l)===g(h,-1===b?0:l-b)){if(-1===b&&(b=l),l-b+1===f)return b*a}else-1!==b&&(l-=l-b),b=-1;else for(l+f>d&&(l=d-f);0<=l;l--){d=!0;for(b=0;b<f;b++)if(g(e,l+b)!==g(h,b)){d=!1;break}if(d)return l}return-1}function hr(e,h,l){l=Math.min(e.length,l);for(var b=[];h<l;){var c=e[h],g=null,a=239<c?
4:223<c?3:191<c?2:1;if(h+a<=l)switch(a){case 1:128>c&&(g=c);break;case 2:var d=e[h+1];128===(d&192)&&(c=(c&31)<<6|d&63,127<c&&(g=c));break;case 3:d=e[h+1];var f=e[h+2];128===(d&192)&&128===(f&192)&&(c=(c&15)<<12|(d&63)<<6|f&63,2047<c&&(55296>c||57343<c)&&(g=c));break;case 4:d=e[h+1];f=e[h+2];var k=e[h+3];128===(d&192)&&128===(f&192)&&128===(k&192)&&(c=(c&15)<<18|(d&63)<<12|(f&63)<<6|k&63,65535<c&&1114112>c&&(g=c))}null===g?(g=65533,a=1):65535<g&&(g-=65536,b.push(g>>>10&1023|55296),g=56320|g&1023);
b.push(g);h+=a}e=b.length;if(e<=LI)b=String.fromCharCode.apply(String,b);else{l="";for(h=0;h<e;)l+=String.fromCharCode.apply(String,b.slice(h,h+=LI));b=l}return b}function Wj(e,h,l){if(0!==e%1||0>e)throw new RangeError("offset is not uint");if(e+h>l)throw new RangeError("Trying to access beyond buffer length");}function ne(e,h,l,b,c,g){if(!Ul(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>c||h<g)throw new RangeError('"value" argument is out of bounds');if(l+b>e.length)throw new RangeError("Index out of range");
}function Gp(e,h,l,b){0>h&&(h=65535+h+1);for(var c=0,g=Math.min(e.length-l,2);c<g;++c)e[l+c]=(h&255<<8*(b?c:1-c))>>>8*(b?c:1-c)}function Hp(e,h,l,b){0>h&&(h=4294967295+h+1);for(var c=0,g=Math.min(e.length-l,4);c<g;++c)e[l+c]=h>>>8*(b?c:3-c)&255}function Ip(e,h,l,b,c,g){if(l+b>e.length)throw new RangeError("Index out of range");if(0>l)throw new RangeError("Index out of range");}function Fp(e,h){h=h||Infinity;for(var l,b=e.length,c=null,g=[],a=0;a<b;++a){l=e.charCodeAt(a);if(55295<l&&57344>l){if(!c){if(56319<
l){-1<(h-=3)&&g.push(239,191,189);continue}else if(a+1===b){-1<(h-=3)&&g.push(239,191,189);continue}c=l;continue}if(56320>l){-1<(h-=3)&&g.push(239,191,189);c=l;continue}l=(c-55296<<10|l-56320)+65536}else c&&-1<(h-=3)&&g.push(239,191,189);c=null;if(128>l){if(0>--h)break;g.push(l)}else if(2048>l){if(0>(h-=2))break;g.push(l>>6|192,l&63|128)}else if(65536>l){if(0>(h-=3))break;g.push(l>>12|224,l>>6&63|128,l&63|128)}else if(1114112>l){if(0>(h-=4))break;g.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw Error("Invalid code point");
}return g}function ct(e){for(var h=[],l=0;l<e.length;++l)h.push(e.charCodeAt(l)&255);return h}function at(e){e=(e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(aW,"");if(2>e.length)e="";else for(;0!==e.length%4;)e+="=";IB||Ay();var h=e.length;if(0<h%4)throw Error("Invalid string. Length must be a multiple of 4");var l="="===e[h-2]?2:"="===e[h-1]?1:0;var b=new bW(3*h/4-l);var c=0<l?h-4:h;var g=0;for(h=0;h<c;h+=4){var a=tm[e.charCodeAt(h)]<<18|tm[e.charCodeAt(h+1)]<<12|tm[e.charCodeAt(h+2)]<<6|
tm[e.charCodeAt(h+3)];b[g++]=a>>16&255;b[g++]=a>>8&255;b[g++]=a&255}2===l?(a=tm[e.charCodeAt(h)]<<2|tm[e.charCodeAt(h+1)]>>4,b[g++]=a&255):1===l&&(a=tm[e.charCodeAt(h)]<<10|tm[e.charCodeAt(h+1)]<<4|tm[e.charCodeAt(h+2)]>>2,b[g++]=a>>8&255,b[g++]=a&255);return b}function jr(e,h,l,b){for(var c=0;c<b&&!(c+l>=h.length||c>=e.length);++c)h[c+l]=e[c];return c}function J(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function ja(){throw Error("setTimeout has not been defined");
}function Rb(){throw Error("clearTimeout has not been defined");}function Q(e){if(Jp===setTimeout)return setTimeout(e,0);if((Jp===ja||!Jp)&&setTimeout)return Jp=setTimeout,setTimeout(e,0);try{return Jp(e,0)}catch(h){try{return Jp.call(null,e,0)}catch(l){return Jp.call(this,e,0)}}}function nb(e){if(Kp===clearTimeout)return clearTimeout(e);if((Kp===Rb||!Kp)&&clearTimeout)return Kp=clearTimeout,clearTimeout(e);try{return Kp(e)}catch(h){try{return Kp.call(null,e)}catch(l){return Kp.call(this,e)}}}function Ia(){dt&&
kr&&(dt=!1,kr.length?Oo=kr.concat(Oo):Dy=-1,Oo.length&&lb())}function lb(){if(!dt){var e=Q(Ia);dt=!0;for(var h=Oo.length;h;){kr=Oo;for(Oo=[];++Dy<h;)kr&&kr[Dy].run();Dy=-1;h=Oo.length}kr=null;dt=!1;nb(e)}}function fb(e){var h=Array(arguments.length-1);if(1<arguments.length)for(var l=1;l<arguments.length;l++)h[l-1]=arguments[l];Oo.push(new kb(e,h));1!==Oo.length||dt||Q(lb)}function kb(e,h){this.fun=e;this.array=h}function kc(){}function Mc(e){if(!bj(e)){for(var h=[],l=0;l<arguments.length;l++)h.push(ad(arguments[l]));
return h.join(" ")}l=1;var b=arguments,c=b.length;h=String(e).replace(cW,function(a){if("%%"===a)return"%";if(l>=c)return a;switch(a){case "%s":return String(b[l++]);case "%d":return Number(b[l++]);case "%j":try{return JSON.stringify(b[l++])}catch(d){return"[Circular]"}default:return a}});for(var g=b[l];l<c;g=b[++l])h=null!==g&&Ed(g)?h+(" "+ad(g)):h+(" "+g);return h}function Gc(e,h){if(Pj(Pn.process))return function(){return Gc(e,h).apply(this,arguments)};if(!0===MI.noDeprecation)return e;var l=!1;
return function(){l||(console.error(h),l=!0);return e.apply(this,arguments)}}function Xc(e){Pj(KB)&&(KB=MI.env.NODE_DEBUG||"");e=e.toUpperCase();Ey[e]||((new RegExp("\\b"+e+"\\b","i")).test(KB)?Ey[e]=function(){var h=Mc.apply(null,arguments);console.error("%s %d: %s",e,0,h)}:Ey[e]=function(){});return Ey[e]}function ad(e,h){var l={seen:[],stylize:we};3<=arguments.length&&(l.depth=arguments[2]);4<=arguments.length&&(l.colors=arguments[3]);zj(h)?l.showHidden=h:h&&et(l,h);Pj(l.showHidden)&&(l.showHidden=
!1);Pj(l.depth)&&(l.depth=2);Pj(l.colors)&&(l.colors=!1);Pj(l.customInspect)&&(l.customInspect=!0);l.colors&&(l.stylize=he);return Qe(l,e,l.depth)}function he(e,h){return(h=ad.styles[h])?"\u001b["+ad.colors[h][0]+"m"+e+"\u001b["+ad.colors[h][1]+"m":e}function we(e,h){return e}function $e(e){var h={};e.forEach(function(l,b){h[l]=!0});return h}function Qe(e,h,l){if(e.customInspect&&h&&rk(h.inspect)&&h.inspect!==ad&&(!h.constructor||h.constructor.prototype!==h)){var b=h.inspect(l,e);bj(b)||(b=Qe(e,b,
l));return b}if(b=dg(e,h))return b;var c=Object.keys(h),g=$e(c);e.showHidden&&(c=Object.getOwnPropertyNames(h));if(Di(h)&&(0<=c.indexOf("message")||0<=c.indexOf("description")))return Cf(h);if(0===c.length){if(rk(h))return e.stylize("[Function"+(h.name?": "+h.name:"")+"]","special");if(ge(h))return e.stylize(RegExp.prototype.toString.call(h),"regexp");if(Kf(h))return e.stylize(Date.prototype.toString.call(h),"date");if(Di(h))return Cf(h)}b="";var a=!1,d=["{","}"];Gj(h)&&(a=!0,d=["[","]"]);rk(h)&&
(b=" [Function"+(h.name?": "+h.name:"")+"]");ge(h)&&(b=" "+RegExp.prototype.toString.call(h));Kf(h)&&(b=" "+Date.prototype.toUTCString.call(h));Di(h)&&(b=" "+Cf(h));if(0===c.length&&(!a||0==h.length))return d[0]+b+d[1];if(0>l)return ge(h)?e.stylize(RegExp.prototype.toString.call(h),"regexp"):e.stylize("[Object]","special");e.seen.push(h);c=a?Fh(e,h,l,g,c):c.map(function(f){return ag(e,h,l,g,f,a)});e.seen.pop();return ng(c,b,d)}function dg(e,h){if(Pj(h))return e.stylize("undefined","undefined");if(bj(h))return h=
"'"+JSON.stringify(h).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",e.stylize(h,"string");if(ek(h))return e.stylize(""+h,"number");if(zj(h))return e.stylize(""+h,"boolean");if(null===h)return e.stylize("null","null")}function Cf(e){return"["+Error.prototype.toString.call(e)+"]"}function Fh(e,h,l,b,c){for(var g=[],a=0,d=h.length;a<d;++a)Object.prototype.hasOwnProperty.call(h,String(a))?g.push(ag(e,h,l,b,String(a),!0)):g.push("");c.forEach(function(f){f.match(/^\d+$/)||g.push(ag(e,
h,l,b,f,!0))});return g}function ag(e,h,l,b,c,g){var a,d;h=Object.getOwnPropertyDescriptor(h,c)||{value:h[c]};h.get?d=h.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):h.set&&(d=e.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(b,c)||(a="["+c+"]");d||(0>e.seen.indexOf(h.value)?(d=null===l?Qe(e,h.value,null):Qe(e,h.value,l-1),-1<d.indexOf("\n")&&(d=g?d.split("\n").map(function(f){return"  "+f}).join("\n").substr(2):"\n"+d.split("\n").map(function(f){return"   "+
f}).join("\n"))):d=e.stylize("[Circular]","special"));if(Pj(a)){if(g&&c.match(/^\d+$/))return d;a=JSON.stringify(""+c);a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+d}function ng(e,h,l){return 60<e.reduce(function(b,c){c.indexOf("\n");return b+c.replace(/\u001b\[\d\d?m/g,"").length+1},0)?l[0]+(""===h?"":h+"\n ")+" "+e.join(",\n  ")+" "+l[1]:l[0]+h+
" "+e.join(", ")+" "+l[1]}function Gj(e){return Array.isArray(e)}function zj(e){return"boolean"===typeof e}function gl(e){return null===e}function og(e){return null==e}function ek(e){return"number"===typeof e}function bj(e){return"string"===typeof e}function Ym(e){return"symbol"===typeof e}function Pj(e){return void 0===e}function ge(e){return Ed(e)&&"[object RegExp]"===Object.prototype.toString.call(e)}function Ed(e){return"object"===typeof e&&null!==e}function Kf(e){return Ed(e)&&"[object Date]"===
Object.prototype.toString.call(e)}function Di(e){return Ed(e)&&("[object Error]"===Object.prototype.toString.call(e)||e instanceof Error)}function rk(e){return"function"===typeof e}function cj(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function Hj(e){return Ff.isBuffer(e)}function vm(e){return 10>e?"0"+e.toString(10):e.toString(10)}function Po(){var e=new Date,h=[vm(e.getHours()),vm(e.getMinutes()),vm(e.getSeconds())].join(":");
return[e.getDate(),dW[e.getMonth()],h].join(" ")}function Zm(){console.log("%s - %s",Po(),Mc.apply(null,arguments))}function et(e,h){if(!h||!Ed(h))return e;for(var l=Object.keys(h),b=l.length;b--;)e[l[b]]=h[l[b]];return e}function $m(e,h,l){l||(l=h,h=e,e=null);e=e||{};var b=e.args||[];e=Pg.create(e);e.run.apply(e,[h].concat(b).concat(l));return e}function lr(e){e=e||{};e.useMessenger=!0;var h=e.workerId||Pg.newUUID(),l=Pg.messengerCreate({sendTimeout:5E3,send:function(b,c){l.worker.postMessage(b);
c()},listen:function(b){var c=l.worker=Pg.isNodejs?Pg.NodejsWorker.create(e):Pg.BrowserWorker.create(e);c.on("message",function(g){l.onMessage(g)});c.on("ready",function(){Pg.NodejsWorker.debug&&console.log("WORKER READY!!!")});c.on("close",function(){Pg.NodejsWorker.debug&&console.log("WORKER CLOSED...!!!")});c.once("ready",b)},close:function(b){return l.worker.ready?l.sendTo(h,"close",{},function(c,g){(c=c||g.data.error)&&console.error("Error in worker messenger close: "+c.stack||c);if(c)b(c);else{var a=
!1;l.worker.once("close",function(){a=!0});Pg.waitFor(1E3,function(){return!!a},b)}}):b(null)},isOnline:function(){return l.worker&&l.worker.ready}});Object.assign(l,{eval:function(b,c){l.sendTo(h,"remoteEval",{expr:b},function(g,a){c(g,a?a.data.result:null)})},run:function(){var b=Array.prototype.slice.call(arguments),c=b.shift(),g=b.pop();if("function"!==typeof c)throw Error("run: no function that should run in worker passed");if("function"!==typeof g)throw Error("run: no callback passed");return l.sendTo(h,
"run",{func:String(c),args:b},function(a,d){g(a||d.data.error,d?d.data.result:null)})}});l.listen();return l}function ft(){if(!gf.isNode||gf.GLOB.lively||gf.GLOB.lively)if(gf.livelyLang._prevLivelyGlobal=gf.GLOB.lively,gf.GLOB.lively||(gf.GLOB.lively={}),gf.GLOB.lively.lang)for(var e in gf.livelyLang)gf.GLOB.lively.lang[e]=gf.livelyLang[e];else gf.GLOB.lively.lang=gf.livelyLang}function Tn(e){if(!e)return e;if(Array.isArray(e))return gf.createChain(gf.arr,e);if("Date"===e.constructor.name)return gf.createChain(gf.date,
e);switch(Jc(e)){case "string":return gf.createChain(gf.string,e);case "object":return gf.createChain(gf.obj,e);case "function":return gf.createChain(gf.fun,e);case "number":return gf.createChain(gf.num,e)}throw Error("Chain for object "+e+" ("+e.constructor.name+") no supported");}function gt(){gf.isNode||(gf.livelyLang._prevLivelyGlobal?delete gf.GLOB.lively.lang:delete gf.GLOB.lively);return gf.livelyLang}function ht(){Object.assign(gf.livelyLang,{worker:gf.worker,messenger:gf.messenger,events:gf.events,
tree:gf.tree,grid:gf.grid,arrayProjection:gf.arrayProjection,interval:gf.interval,graph:gf.graph,date:gf.date,properties:gf.properties,obj:gf.obj,arr:gf.arr,fun:gf.fun,num:gf.num,string:gf.string,Closure:gf.Closure,promise:gf.promise,Path:gf.Path,Group:gf.Group});gf.globalInterfaceSpec.forEach(function(e){if("installMethods"===e.action){var h=gf.Path(e.target);h.isIn(gf.GLOB)||h.set(gf.GLOB,{},!0);var l=gf.Path(e.sources[0]);e.methods.forEach(function(b){gf.installProperty(l.concat([b]),h.concat([b]))});
e.alias&&e.alias.forEach(function(b){gf.installProperty(l.concat([b[1]]),h.concat([b[0]]))})}else if("installObject"===e.action)h=gf.Path(e.target),e=gf.Path(e.source).get(gf.livelyLang),h.set(gf.GLOB,e,!0);else throw Error("Cannot deal with global setup action: "+e.action);})}function it(){gf.globalInterfaceSpec.forEach(function(e){if("installMethods"===e.action){var h=gf.Path(e.target),l=gf.Path(e.source).get(gf.livelyLang),b=h.get(gf.GLOB);b&&(e.methods.filter(function(c){return l===b[c]}).forEach(function(c){delete b[c]}),
e.alias&&e.alias.filter(function(c){return l===b[c]}).forEach(function(c){delete b[c[0]]}))}else if("installObject"===e.action)h=gf.Path(e.target),h.del(gf.GLOB);else throw Error("Cannot deal with global setup action: "+e.action);})}function Ek(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=Object.assign({indent:{style:"  ",base:0,adjustMultilineComment:!1,optsIndent:h&&h.format&&h.format.indent||{}},quotes:"double"},bi.obj.dissoc(h&&h.format||{},["indent"]));h=Object.assign({format:l,
comment:!1},bi.obj.dissoc(h,["format"]));return bi.es.generate(e,h)}function Fk(){if(ql.hasRequiredAcorn)return ql.acorn;ql.hasRequiredAcorn=1;(function(e,h){(function(l,b){b(h)})(ql.commonjsHelpers.commonjsGlobal,function(l){function b(I,Na){for(var z=65536,X=0;X<Na.length;X+=2){z+=Na[X];if(z>I)return!1;z+=Na[X+1];if(z>=I)return!0}}function c(I,Na){return 65>I?36===I:91>I?!0:97>I?95===I:123>I?!0:65535>=I?170<=I&&Ya.test(String.fromCharCode(I)):!1===Na?!1:b(I,tc)}function g(I,Na){return 48>I?36===
I:58>I?!0:65>I?!1:91>I?!0:97>I?95===I:123>I?!0:65535>=I?170<=I&&xa.test(String.fromCharCode(I)):!1===Na?!1:b(I,tc)||b(I,Qb)}function a(I,Na){return new wc(I,{beforeExpr:!0,binop:Na})}function d(I,Na){void 0===Na&&(Na={});Na.keyword=I;return $c[I]=new wc(I,Na)}function f(I,Na){return 10===I||13===I||!Na&&(8232===I||8233===I)}function k(I){return new RegExp("^(?:"+I.replace(/ /g,"|")+")$")}function n(I,Na){for(var z=1,X=0;;){la.lastIndex=X;var rb=la.exec(I);if(rb&&rb.index<Na)++z,X=rb.index+rb[0].length;
else return new V(z,Na-X)}}function p(I){var Na={},z;for(z in Mb)Na[z]=I&&Kd.call(I,z)?I[z]:Mb[z];"latest"===Na.ecmaVersion?Na.ecmaVersion=1E8:null==Na.ecmaVersion?(!U&&"object"===("undefined"===typeof console?"undefined":Jc(console))&&console.warn&&(U=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),Na.ecmaVersion=11):2015<=Na.ecmaVersion&&(Na.ecmaVersion-=2009);null==Na.allowReserved&&(Na.allowReserved=5>Na.ecmaVersion);
if(Aa(Na.onToken)){var X=Na.onToken;Na.onToken=function(rb){return X.push(rb)}}Aa(Na.onComment)&&(Na.onComment=q(Na,Na.onComment));return Na}function q(I,Na){return function(z,X,rb,Wc,Sd,hf){z={type:z?"Block":"Line",value:X,start:rb,end:Wc};I.locations&&(z.loc=new ea(this,Sd,hf));I.ranges&&(z.range=[rb,Wc]);Na.push(z)}}function r(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function t(I,Na,z,X){I.type=Na;I.end=z;this.options.locations&&
(I.loc.end=X);this.options.ranges&&(I.range[1]=z);return I}function w(I){I=Xj[I]={binary:k(Rh[I]+" Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
nonBinary:{General_Category:k("Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
Script:k(Ei[I])}};I.nonBinary.Script_Extensions=I.nonBinary.Script;I.nonBinary.gc=I.nonBinary.General_Category;I.nonBinary.sc=I.nonBinary.Script;I.nonBinary.scx=I.nonBinary.Script_Extensions}function x(I){if(65535>=I)return String.fromCharCode(I);I-=65536;return String.fromCharCode((I>>10)+55296,(I&1023)+56320)}function B(I){return 36===I||40<=I&&43>=I||46===I||63===I||91<=I&&94>=I||123<=I&&125>=I}function D(I){return 65<=I&&90>=I||97<=I&&122>=I||95===I}function F(I){return D(I)||L(I)}function L(I){return 48<=
I&&57>=I}function G(I){return 48<=I&&57>=I||65<=I&&70>=I||97<=I&&102>=I}function oa(I){return 65<=I&&70>=I?10+(I-65):97<=I&&102>=I?10+(I-97):I-48}function ha(I){return"function"!==typeof BigInt?null:BigInt(I.replace(/_/g,""))}function Ha(I){if(65535>=I)return String.fromCharCode(I);I-=65536;return String.fromCharCode((I>>10)+55296,(I&1023)+56320)}var Va={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",
5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},hc={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this","5module":"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this export import",
6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},qc=/^in(stanceof)?$/,jc="\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
Ya=new RegExp("["+jc+"]"),xa=new RegExp("["+jc+"\u200c\u200d\u00b7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]");
jc=null;var tc=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,
19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,
6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],Qb=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,
2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239],wc=function(I,Na){void 0===Na&&(Na={});this.label=
I;this.keyword=Na.keyword;this.beforeExpr=!!Na.beforeExpr;this.startsExpr=!!Na.startsExpr;this.isLoop=!!Na.isLoop;this.isAssign=!!Na.isAssign;this.prefix=!!Na.prefix;this.postfix=!!Na.postfix;this.binop=Na.binop||null;this.updateContext=null};jc={beforeExpr:!0};var Zb={startsExpr:!0},$c={},Oa={num:new wc("num",Zb),regexp:new wc("regexp",Zb),string:new wc("string",Zb),name:new wc("name",Zb),eof:new wc("eof"),bracketL:new wc("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new wc("]"),braceL:new wc("{",
{beforeExpr:!0,startsExpr:!0}),braceR:new wc("}"),parenL:new wc("(",{beforeExpr:!0,startsExpr:!0}),parenR:new wc(")"),comma:new wc(",",jc),semi:new wc(";",jc),colon:new wc(":",jc),dot:new wc("."),question:new wc("?",jc),questionDot:new wc("?."),arrow:new wc("=>",jc),template:new wc("template"),invalidTemplate:new wc("invalidTemplate"),ellipsis:new wc("...",jc),backQuote:new wc("`",Zb),dollarBraceL:new wc("${",{beforeExpr:!0,startsExpr:!0}),eq:new wc("=",{beforeExpr:!0,isAssign:!0}),assign:new wc("_=",
{beforeExpr:!0,isAssign:!0}),incDec:new wc("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new wc("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:a("||",1),logicalAND:a("&&",2),bitwiseOR:a("|",3),bitwiseXOR:a("^",4),bitwiseAND:a("&",5),equality:a("==/!=/===/!==",6),relational:a("</>/<=/>=",7),bitShift:a("<</>>/>>>",8),plusMin:new wc("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:a("%",10),star:a("*",10),slash:a("/",10),starstar:new wc("**",{beforeExpr:!0}),coalesce:a("??",
1),_break:d("break"),_case:d("case",jc),_catch:d("catch"),_continue:d("continue"),_debugger:d("debugger"),_default:d("default",jc),_do:d("do",{isLoop:!0,beforeExpr:!0}),_else:d("else",jc),_finally:d("finally"),_for:d("for",{isLoop:!0}),_function:d("function",Zb),_if:d("if"),_return:d("return",jc),_switch:d("switch"),_throw:d("throw",jc),_try:d("try"),_var:d("var"),_const:d("const"),_while:d("while",{isLoop:!0}),_with:d("with"),_new:d("new",{beforeExpr:!0,startsExpr:!0}),_this:d("this",Zb),_super:d("super",
Zb),_class:d("class",Zb),_extends:d("extends",jc),_export:d("export"),_import:d("import",Zb),_null:d("null",Zb),_true:d("true",Zb),_false:d("false",Zb),_in:d("in",{beforeExpr:!0,binop:7}),_instanceof:d("instanceof",{beforeExpr:!0,binop:7}),_typeof:d("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:d("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:d("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},md=/\r\n?|\n|\u2028|\u2029/,la=new RegExp(md.source,"g"),$a=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,
dd=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g;jc=Object.prototype;var Kd=jc.hasOwnProperty,ra=jc.toString,Aa=Array.isArray||function(I){return"[object Array]"===ra.call(I)},V=function(I,Na){this.line=I;this.column=Na};V.prototype.offset=function(I){return new V(this.line,this.column+I)};var ea=function(I,Na,z){this.start=Na;this.end=z;null!==I.sourceFile&&(this.source=I.sourceFile)},Mb={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,
allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},U=!1,Sa=function(I,Na,z){this.options=I=p(I);this.sourceFile=I.sourceFile;this.keywords=k(hc[6<=I.ecmaVersion?6:"module"===I.sourceType?"5module":5]);var X="";!0!==I.allowReserved&&(X=Va[6<=I.ecmaVersion?6:5===I.ecmaVersion?5:3],"module"===I.sourceType&&(X+=" await"));this.reservedWords=k(X);X=(X?X+" ":
"")+Va.strict;this.reservedWordsStrict=k(X);this.reservedWordsStrictBind=k(X+" "+Va.strictBind);this.input=String(Na);this.containsEsc=!1;z?(this.pos=z,this.lineStart=this.input.lastIndexOf("\n",z-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(md).length):(this.pos=this.lineStart=0,this.curLine=1);this.type=Oa.eof;this.value=null;this.start=this.end=this.pos;this.startLoc=this.endLoc=this.curPosition();this.lastTokEndLoc=this.lastTokStartLoc=null;this.lastTokStart=this.lastTokEnd=this.pos;
this.context=this.initialContext();this.exprAllowed=!0;this.strict=(this.inModule="module"===I.sourceType)||this.strictDirective(this.pos);this.potentialArrowAt=-1;this.yieldPos=this.awaitPos=this.awaitIdentPos=0;this.labels=[];this.undefinedExports={};0===this.pos&&I.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2);this.scopeStack=[];this.enterScope(1);this.regexpState=null};jc={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},
allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};Sa.prototype.parse=function(){var I=this.options.program||this.startNode();this.nextToken();return this.parseTopLevel(I)};jc.inFunction.get=function(){return 0<(this.currentVarScope().flags&2)};jc.inGenerator.get=function(){return 0<(this.currentVarScope().flags&8)};jc.inAsync.get=function(){return 0<(this.currentVarScope().flags&4)};jc.allowSuper.get=function(){return 0<(this.currentThisScope().flags&
64)};jc.allowDirectSuper.get=function(){return 0<(this.currentThisScope().flags&128)};jc.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};jc.inNonArrowFunction.get=function(){return 0<(this.currentThisScope().flags&2)};Sa.extend=function(){for(var I=[],Na=arguments.length;Na--;)I[Na]=arguments[Na];Na=this;for(var z=0;z<I.length;z++)Na=I[z](Na);return Na};Sa.parse=function(I,Na){return(new this(Na,I)).parse()};Sa.parseExpressionAt=function(I,Na,z){I=new this(z,
I,Na);I.nextToken();return I.parseExpression()};Sa.tokenizer=function(I,Na){return new this(Na,I)};Object.defineProperties(Sa.prototype,jc);jc=Sa.prototype;var S=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;jc.strictDirective=function(I){for(;;){dd.lastIndex=I;I+=dd.exec(this.input)[0].length;var Na=S.exec(this.input.slice(I));if(!Na)return!1;if("use strict"===(Na[1]||Na[2])){dd.lastIndex=I+Na[0].length;I=dd.exec(this.input);Na=I.index+I[0].length;var z=this.input.charAt(Na);return";"===z||"}"===
z||md.test(I[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(z)||"!"===z&&"="===this.input.charAt(Na+1))}I+=Na[0].length;dd.lastIndex=I;I+=dd.exec(this.input)[0].length;";"===this.input[I]&&I++}};jc.eat=function(I){return this.type===I?(this.next(),!0):!1};jc.isContextual=function(I){return this.type===Oa.name&&this.value===I&&!this.containsEsc};jc.eatContextual=function(I){if(!this.isContextual(I))return!1;this.next();return!0};jc.expectContextual=function(I){this.eatContextual(I)||this.unexpected()};jc.canInsertSemicolon=
function(){return this.type===Oa.eof||this.type===Oa.braceR||md.test(this.input.slice(this.lastTokEnd,this.start))};jc.insertSemicolon=function(){if(this.canInsertSemicolon()){if(this.options.onInsertedSemicolon)this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc);return!0}};jc.semicolon=function(){this.eat(Oa.semi)||this.insertSemicolon()||this.unexpected()};jc.afterTrailingComma=function(I,Na){if(this.type===I){if(this.options.onTrailingComma)this.options.onTrailingComma(this.lastTokStart,
this.lastTokStartLoc);Na||this.next();return!0}};jc.expect=function(I){this.eat(I)||this.unexpected()};jc.unexpected=function(I){this.raise(null!=I?I:this.start,"Unexpected token")};jc.checkPatternErrors=function(I,Na){I&&(-1<I.trailingComma&&this.raiseRecoverable(I.trailingComma,"Comma is not permitted after the rest element"),I=Na?I.parenthesizedAssign:I.parenthesizedBind,-1<I&&this.raiseRecoverable(I,"Parenthesized pattern"))};jc.checkExpressionErrors=function(I,Na){if(!I)return!1;var z=I.shorthandAssign;
I=I.doubleProto;if(!Na)return 0<=z||0<=I;0<=z&&this.raise(z,"Shorthand property assignments are valid only in destructuring patterns");0<=I&&this.raiseRecoverable(I,"Redefinition of __proto__ property")};jc.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value");this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};jc.isSimpleAssignTarget=function(I){return"ParenthesizedExpression"===
I.type?this.isSimpleAssignTarget(I.expression):"Identifier"===I.type||"MemberExpression"===I.type};jc=Sa.prototype;jc.parseTopLevel=function(I){var Na={};I.body||(I.body=[]);for(;this.type!==Oa.eof;){var z=this.parseStatement(null,!0,Na);I.body.push(z)}if(this.inModule)for(Na=0,z=Object.keys(this.undefinedExports);Na<z.length;Na+=1){var X=z[Na];this.raiseRecoverable(this.undefinedExports[X].start,"Export '"+X+"' is not defined")}this.adaptDirectivePrologue(I.body);this.next();I.sourceType=this.options.sourceType;
return this.finishNode(I,"Program")};var Sc={kind:"loop"},xd={kind:"switch"};jc.isLet=function(I){if(6>this.options.ecmaVersion||!this.isContextual("let"))return!1;dd.lastIndex=this.pos;var Na=dd.exec(this.input);Na=this.pos+Na[0].length;var z=this.input.charCodeAt(Na);if(91===z)return!0;if(I)return!1;if(123===z)return!0;if(c(z,!0)){for(I=Na+1;g(this.input.charCodeAt(I),!0);)++I;I=this.input.slice(Na,I);if(!qc.test(I))return!0}return!1};jc.isAsyncFunction=function(){if(8>this.options.ecmaVersion||
!this.isContextual("async"))return!1;dd.lastIndex=this.pos;var I=dd.exec(this.input);I=this.pos+I[0].length;return!md.test(this.input.slice(this.pos,I))&&"function"===this.input.slice(I,I+8)&&(I+8===this.input.length||!g(this.input.charAt(I+8)))};jc.parseStatement=function(I,Na,z){var X=this.type,rb=this.startNode();if(this.isLet(I)){X=Oa._var;var Wc="let"}switch(X){case Oa._break:case Oa._continue:return this.parseBreakContinueStatement(rb,X.keyword);case Oa._debugger:return this.parseDebuggerStatement(rb);
case Oa._do:return this.parseDoStatement(rb);case Oa._for:return this.parseForStatement(rb);case Oa._function:return I&&(this.strict||"if"!==I&&"label"!==I)&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(rb,!1,!I);case Oa._class:return I&&this.unexpected(),this.parseClass(rb,!0);case Oa._if:return this.parseIfStatement(rb);case Oa._return:return this.parseReturnStatement(rb);case Oa._switch:return this.parseSwitchStatement(rb);case Oa._throw:return this.parseThrowStatement(rb);
case Oa._try:return this.parseTryStatement(rb);case Oa._const:case Oa._var:return Wc=Wc||this.value,I&&"var"!==Wc&&this.unexpected(),this.parseVarStatement(rb,Wc);case Oa._while:return this.parseWhileStatement(rb);case Oa._with:return this.parseWithStatement(rb);case Oa.braceL:return this.parseBlock(!0,rb);case Oa.semi:return this.parseEmptyStatement(rb);case Oa._export:case Oa._import:if(10<this.options.ecmaVersion&&X===Oa._import&&(dd.lastIndex=this.pos,I=dd.exec(this.input),I=this.input.charCodeAt(this.pos+
I[0].length),40===I||46===I))return this.parseExpressionStatement(rb,this.parseExpression());this.options.allowImportExportEverywhere||(Na||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"));return X===Oa._import?this.parseImport(rb):this.parseExport(rb,z);default:if(this.isAsyncFunction())return I&&this.unexpected(),this.next(),this.parseFunctionStatement(rb,!0,!I);
Na=this.value;z=this.parseExpression();return X===Oa.name&&"Identifier"===z.type&&this.eat(Oa.colon)?this.parseLabeledStatement(rb,Na,z,I):this.parseExpressionStatement(rb,z)}};jc.parseBreakContinueStatement=function(I,Na){var z="break"===Na;this.next();this.eat(Oa.semi)||this.insertSemicolon()?I.label=null:this.type!==Oa.name?this.unexpected():(I.label=this.parseIdent(),this.semicolon());for(var X=0;X<this.labels.length;++X){var rb=this.labels[X];if(null==I.label||rb.name===I.label.name){if(null!=
rb.kind&&(z||"loop"===rb.kind))break;if(I.label&&z)break}}X===this.labels.length&&this.raise(I.start,"Unsyntactic "+Na);return this.finishNode(I,z?"BreakStatement":"ContinueStatement")};jc.parseDebuggerStatement=function(I){this.next();this.semicolon();return this.finishNode(I,"DebuggerStatement")};jc.parseDoStatement=function(I){this.next();this.labels.push(Sc);I.body=this.parseStatement("do");this.labels.pop();this.expect(Oa._while);I.test=this.parseParenExpression();6<=this.options.ecmaVersion?
this.eat(Oa.semi):this.semicolon();return this.finishNode(I,"DoWhileStatement")};jc.parseForStatement=function(I){this.next();var Na=9<=this.options.ecmaVersion&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;this.labels.push(Sc);this.enterScope(0);this.expect(Oa.parenL);if(this.type===Oa.semi)return-1<Na&&this.unexpected(Na),this.parseFor(I,null);var z=this.isLet();if(this.type===Oa._var||this.type===Oa._const||z){var X=
this.startNode();z=z?"let":this.value;this.next();this.parseVar(X,!0,z);this.finishNode(X,"VariableDeclaration");if((this.type===Oa._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===X.declarations.length)return 9<=this.options.ecmaVersion&&(this.type===Oa._in?-1<Na&&this.unexpected(Na):I.await=-1<Na),this.parseForIn(I,X);-1<Na&&this.unexpected(Na);return this.parseFor(I,X)}X=new r;z=this.parseExpression(!0,X);if(this.type===Oa._in||6<=this.options.ecmaVersion&&this.isContextual("of"))return 9<=
this.options.ecmaVersion&&(this.type===Oa._in?-1<Na&&this.unexpected(Na):I.await=-1<Na),this.toAssignable(z,!1,X),this.checkLValPattern(z),this.parseForIn(I,z);this.checkExpressionErrors(X,!0);-1<Na&&this.unexpected(Na);return this.parseFor(I,z)};jc.parseFunctionStatement=function(I,Na,z){this.next();return this.parseFunction(I,ee|(z?0:Fe),!1,Na)};jc.parseIfStatement=function(I){this.next();I.test=this.parseParenExpression();I.consequent=this.parseStatement("if");I.alternate=this.eat(Oa._else)?this.parseStatement("if"):
null;return this.finishNode(I,"IfStatement")};jc.parseReturnStatement=function(I){this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function");this.next();this.eat(Oa.semi)||this.insertSemicolon()?I.argument=null:(I.argument=this.parseExpression(),this.semicolon());return this.finishNode(I,"ReturnStatement")};jc.parseSwitchStatement=function(I){this.next();I.discriminant=this.parseParenExpression();I.cases=[];this.expect(Oa.braceL);this.labels.push(xd);
this.enterScope(0);for(var Na,z=!1;this.type!==Oa.braceR;)if(this.type===Oa._case||this.type===Oa._default){var X=this.type===Oa._case;Na&&this.finishNode(Na,"SwitchCase");I.cases.push(Na=this.startNode());Na.consequent=[];this.next();X?Na.test=this.parseExpression():(z&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),z=!0,Na.test=null);this.expect(Oa.colon)}else Na||this.unexpected(),Na.consequent.push(this.parseStatement(null));this.exitScope();Na&&this.finishNode(Na,"SwitchCase");
this.next();this.labels.pop();return this.finishNode(I,"SwitchStatement")};jc.parseThrowStatement=function(I){this.next();md.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw");I.argument=this.parseExpression();this.semicolon();return this.finishNode(I,"ThrowStatement")};var Ae=[];jc.parseTryStatement=function(I){this.next();I.block=this.parseBlock();I.handler=null;if(this.type===Oa._catch){var Na=this.startNode();this.next();if(this.eat(Oa.parenL)){Na.param=
this.parseBindingAtom();var z="Identifier"===Na.param.type;this.enterScope(z?32:0);this.checkLValPattern(Na.param,z?4:2);this.expect(Oa.parenR)}else 10>this.options.ecmaVersion&&this.unexpected(),Na.param=null,this.enterScope(0);Na.body=this.parseBlock(!1);this.exitScope();I.handler=this.finishNode(Na,"CatchClause")}I.finalizer=this.eat(Oa._finally)?this.parseBlock():null;I.handler||I.finalizer||this.raise(I.start,"Missing catch or finally clause");return this.finishNode(I,"TryStatement")};jc.parseVarStatement=
function(I,Na){this.next();this.parseVar(I,!1,Na);this.semicolon();return this.finishNode(I,"VariableDeclaration")};jc.parseWhileStatement=function(I){this.next();I.test=this.parseParenExpression();this.labels.push(Sc);I.body=this.parseStatement("while");this.labels.pop();return this.finishNode(I,"WhileStatement")};jc.parseWithStatement=function(I){this.strict&&this.raise(this.start,"'with' in strict mode");this.next();I.object=this.parseParenExpression();I.body=this.parseStatement("with");return this.finishNode(I,
"WithStatement")};jc.parseEmptyStatement=function(I){this.next();return this.finishNode(I,"EmptyStatement")};jc.parseLabeledStatement=function(I,Na,z,X){for(var rb=0,Wc=this.labels;rb<Wc.length;rb+=1)Wc[rb].name===Na&&this.raise(z.start,"Label '"+Na+"' is already declared");rb=this.type.isLoop?"loop":this.type===Oa._switch?"switch":null;for(Wc=this.labels.length-1;0<=Wc;Wc--){var Sd=this.labels[Wc];if(Sd.statementStart===I.start)Sd.statementStart=this.start,Sd.kind=rb;else break}this.labels.push({name:Na,
kind:rb,statementStart:this.start});I.body=this.parseStatement(X?-1===X.indexOf("label")?X+"label":X:"label");this.labels.pop();I.label=z;return this.finishNode(I,"LabeledStatement")};jc.parseExpressionStatement=function(I,Na){I.expression=Na;this.semicolon();return this.finishNode(I,"ExpressionStatement")};jc.parseBlock=function(I,Na,z){void 0===I&&(I=!0);void 0===Na&&(Na=this.startNode());Na.body=[];this.expect(Oa.braceL);for(I&&this.enterScope(0);this.type!==Oa.braceR;){var X=this.parseStatement(null);
Na.body.push(X)}z&&(this.strict=!1);this.next();I&&this.exitScope();return this.finishNode(Na,"BlockStatement")};jc.parseFor=function(I,Na){I.init=Na;this.expect(Oa.semi);I.test=this.type===Oa.semi?null:this.parseExpression();this.expect(Oa.semi);I.update=this.type===Oa.parenR?null:this.parseExpression();this.expect(Oa.parenR);I.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(I,"ForStatement")};jc.parseForIn=function(I,Na){var z=this.type===Oa._in;this.next();
"VariableDeclaration"===Na.type&&null!=Na.declarations[0].init&&(!z||8>this.options.ecmaVersion||this.strict||"var"!==Na.kind||"Identifier"!==Na.declarations[0].id.type)&&this.raise(Na.start,(z?"for-in":"for-of")+" loop variable declaration may not have an initializer");I.left=Na;I.right=z?this.parseExpression():this.parseMaybeAssign();this.expect(Oa.parenR);I.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(I,z?"ForInStatement":"ForOfStatement")};jc.parseVar=
function(I,Na,z){I.declarations=[];for(I.kind=z;;){var X=this.startNode();this.parseVarId(X,z);this.eat(Oa.eq)?X.init=this.parseMaybeAssign(Na):"const"!==z||this.type===Oa._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"===X.id.type||Na&&(this.type===Oa._in||this.isContextual("of"))?X.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected();I.declarations.push(this.finishNode(X,"VariableDeclarator"));if(!this.eat(Oa.comma))break}return I};
jc.parseVarId=function(I,Na){I.id=this.parseBindingAtom();this.checkLValPattern(I.id,"var"===Na?1:2,!1)};var ee=1,Fe=2;jc.parseFunction=function(I,Na,z,X){this.initFunction(I);if(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!X)this.type===Oa.star&&Na&Fe&&this.unexpected(),I.generator=this.eat(Oa.star);8<=this.options.ecmaVersion&&(I.async=!!X);Na&ee&&(I.id=Na&4&&this.type!==Oa.name?null:this.parseIdent(),!I.id||Na&Fe||this.checkLValSimple(I.id,this.strict||I.generator||I.async?this.treatFunctionsAsVar?
1:2:3));X=this.yieldPos;var rb=this.awaitPos,Wc=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(I.async?4:0)|(I.generator?8:0));Na&ee||(I.id=this.type===Oa.name?this.parseIdent():null);this.parseFunctionParams(I);this.parseFunctionBody(I,z,!1);this.yieldPos=X;this.awaitPos=rb;this.awaitIdentPos=Wc;return this.finishNode(I,Na&ee?"FunctionDeclaration":"FunctionExpression")};jc.parseFunctionParams=function(I){this.expect(Oa.parenL);I.params=this.parseBindingList(Oa.parenR,
!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams()};jc.parseClass=function(I,Na){this.next();var z=this.strict;this.strict=!0;this.parseClassId(I,Na);this.parseClassSuper(I);var X=this.startNode(),rb=!1;X.body=[];for(this.expect(Oa.braceL);this.type!==Oa.braceR;){var Wc=this.parseClassElement(null!==I.superClass);Wc&&(X.body.push(Wc),"MethodDefinition"===Wc.type&&"constructor"===Wc.kind&&(rb&&this.raise(Wc.start,"Duplicate constructor in the same class"),rb=!0))}this.strict=z;this.next();
I.body=this.finishNode(X,"ClassBody");return this.finishNode(I,Na?"ClassDeclaration":"ClassExpression")};jc.parseClassElement=function(I){var Na=this;if(this.eat(Oa.semi))return null;var z=this.startNode(),X=function(hf,vf){void 0===vf&&(vf=!1);var Xf=Na.start,uh=Na.startLoc;if(!Na.eatContextual(hf))return!1;if(!(Na.type===Oa.parenL||vf&&Na.canInsertSemicolon()))return!0;z.key&&Na.unexpected();z.computed=!1;z.key=Na.startNodeAt(Xf,uh);z.key.name=hf;Na.finishNode(z.key,"Identifier");return!1};z.kind=
"method";z["static"]=X("static");var rb=this.eat(Oa.star),Wc=!1;rb||(8<=this.options.ecmaVersion&&X("async",!0)?(Wc=!0,rb=9<=this.options.ecmaVersion&&this.eat(Oa.star)):X("get")?z.kind="get":X("set")&&(z.kind="set"));z.key||this.parsePropertyName(z);X=z.key;var Sd=!1;z.computed||z["static"]||!("Identifier"===X.type&&"constructor"===X.name||"Literal"===X.type&&"constructor"===X.value)?z["static"]&&"Identifier"===X.type&&"prototype"===X.name&&this.raise(X.start,"Classes may not have a static property named prototype"):
("method"!==z.kind&&this.raise(X.start,"Constructor can't have get/set modifier"),rb&&this.raise(X.start,"Constructor can't be a generator"),Wc&&this.raise(X.start,"Constructor can't be an async method"),z.kind="constructor",Sd=I);this.parseClassMethod(z,rb,Wc,Sd);"get"===z.kind&&0!==z.value.params.length&&this.raiseRecoverable(z.value.start,"getter should have no params");"set"===z.kind&&1!==z.value.params.length&&this.raiseRecoverable(z.value.start,"setter should have exactly one param");"set"===
z.kind&&"RestElement"===z.value.params[0].type&&this.raiseRecoverable(z.value.params[0].start,"Setter cannot use rest params");return z};jc.parseClassMethod=function(I,Na,z,X){I.value=this.parseMethod(Na,z,X);return this.finishNode(I,"MethodDefinition")};jc.parseClassId=function(I,Na){this.type===Oa.name?(I.id=this.parseIdent(),Na&&this.checkLValSimple(I.id,2,!1)):(!0===Na&&this.unexpected(),I.id=null)};jc.parseClassSuper=function(I){I.superClass=this.eat(Oa._extends)?this.parseExprSubscripts():null};
jc.parseExport=function(I,Na){this.next();if(this.eat(Oa.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?(I.exported=this.parseIdent(!0),this.checkExport(Na,I.exported.name,this.lastTokStart)):I.exported=null),this.expectContextual("from"),this.type!==Oa.string&&this.unexpected(),I.source=this.parseExprAtom(),this.semicolon(),this.finishNode(I,"ExportAllDeclaration");if(this.eat(Oa._default)){this.checkExport(Na,"default",this.lastTokStart);var z;this.type===Oa._function||(z=
this.isAsyncFunction())?(Na=this.startNode(),this.next(),z&&this.next(),I.declaration=this.parseFunction(Na,ee|4,!1,z)):this.type===Oa._class?(z=this.startNode(),I.declaration=this.parseClass(z,"nullableID")):(I.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(I,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())I.declaration=this.parseStatement(null),"VariableDeclaration"===I.declaration.type?this.checkVariableExport(Na,I.declaration.declarations):this.checkExport(Na,
I.declaration.id.name,I.declaration.id.start),I.specifiers=[],I.source=null;else{I.declaration=null;I.specifiers=this.parseExportSpecifiers(Na);if(this.eatContextual("from"))this.type!==Oa.string&&this.unexpected(),I.source=this.parseExprAtom();else{z=0;for(Na=I.specifiers;z<Na.length;z+=1){var X=Na[z];this.checkUnreserved(X.local);this.checkLocalExport(X.local)}I.source=null}this.semicolon()}return this.finishNode(I,"ExportNamedDeclaration")};jc.checkExport=function(I,Na,z){I&&(Kd.call(I,Na)&&this.raiseRecoverable(z,
"Duplicate export '"+Na+"'"),I[Na]=!0)};jc.checkPatternExport=function(I,Na){var z=Na.type;if("Identifier"===z)this.checkExport(I,Na.name,Na.start);else if("ObjectPattern"===z)for(z=0,Na=Na.properties;z<Na.length;z+=1)this.checkPatternExport(I,Na[z]);else if("ArrayPattern"===z)for(z=0,Na=Na.elements;z<Na.length;z+=1){var X=Na[z];X&&this.checkPatternExport(I,X)}else"Property"===z?this.checkPatternExport(I,Na.value):"AssignmentPattern"===z?this.checkPatternExport(I,Na.left):"RestElement"===z?this.checkPatternExport(I,
Na.argument):"ParenthesizedExpression"===z&&this.checkPatternExport(I,Na.expression)};jc.checkVariableExport=function(I,Na){if(I)for(var z=0;z<Na.length;z+=1)this.checkPatternExport(I,Na[z].id)};jc.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()};jc.parseExportSpecifiers=function(I){var Na=[],z=!0;for(this.expect(Oa.braceL);!this.eat(Oa.braceR);){if(z)z=
!1;else if(this.expect(Oa.comma),this.afterTrailingComma(Oa.braceR))break;var X=this.startNode();X.local=this.parseIdent(!0);X.exported=this.eatContextual("as")?this.parseIdent(!0):X.local;this.checkExport(I,X.exported.name,X.exported.start);Na.push(this.finishNode(X,"ExportSpecifier"))}return Na};jc.parseImport=function(I){this.next();this.type===Oa.string?(I.specifiers=Ae,I.source=this.parseExprAtom()):(I.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),I.source=this.type===
Oa.string?this.parseExprAtom():this.unexpected());this.semicolon();return this.finishNode(I,"ImportDeclaration")};jc.parseImportSpecifiers=function(){var I=[],Na=!0;if(this.type===Oa.name){var z=this.startNode();z.local=this.parseIdent();this.checkLValSimple(z.local,2);I.push(this.finishNode(z,"ImportDefaultSpecifier"));if(!this.eat(Oa.comma))return I}if(this.type===Oa.star)return Na=this.startNode(),this.next(),this.expectContextual("as"),Na.local=this.parseIdent(),this.checkLValSimple(Na.local,
2),I.push(this.finishNode(Na,"ImportNamespaceSpecifier")),I;for(this.expect(Oa.braceL);!this.eat(Oa.braceR);){if(Na)Na=!1;else if(this.expect(Oa.comma),this.afterTrailingComma(Oa.braceR))break;z=this.startNode();z.imported=this.parseIdent(!0);this.eatContextual("as")?z.local=this.parseIdent():(this.checkUnreserved(z.imported),z.local=z.imported);this.checkLValSimple(z.local,2);I.push(this.finishNode(z,"ImportSpecifier"))}return I};jc.adaptDirectivePrologue=function(I){for(var Na=0;Na<I.length&&this.isDirectiveCandidate(I[Na]);++Na)I[Na].directive=
I[Na].expression.raw.slice(1,-1)};jc.isDirectiveCandidate=function(I){return"ExpressionStatement"===I.type&&"Literal"===I.expression.type&&"string"===typeof I.expression.value&&('"'===this.input[I.start]||"'"===this.input[I.start])};jc=Sa.prototype;jc.toAssignable=function(I,Na,z){if(6<=this.options.ecmaVersion&&I)switch(I.type){case "Identifier":this.inAsync&&"await"===I.name&&this.raise(I.start,"Cannot use 'await' as identifier inside an async function");break;case "ObjectPattern":case "ArrayPattern":case "AssignmentPattern":case "RestElement":break;
case "ObjectExpression":I.type="ObjectPattern";z&&this.checkPatternErrors(z,!0);z=0;for(var X=I.properties;z<X.length;z+=1){var rb=X[z];this.toAssignable(rb,Na);"RestElement"!==rb.type||"ArrayPattern"!==rb.argument.type&&"ObjectPattern"!==rb.argument.type||this.raise(rb.argument.start,"Unexpected token")}break;case "Property":"init"!==I.kind&&this.raise(I.key.start,"Object pattern can't contain getter or setter");this.toAssignable(I.value,Na);break;case "ArrayExpression":I.type="ArrayPattern";z&&
this.checkPatternErrors(z,!0);this.toAssignableList(I.elements,Na);break;case "SpreadElement":I.type="RestElement";this.toAssignable(I.argument,Na);"AssignmentPattern"===I.argument.type&&this.raise(I.argument.start,"Rest elements cannot have a default value");break;case "AssignmentExpression":"="!==I.operator&&this.raise(I.left.end,"Only '=' operator can be used for specifying default value.");I.type="AssignmentPattern";delete I.operator;this.toAssignable(I.left,Na);break;case "ParenthesizedExpression":this.toAssignable(I.expression,
Na,z);break;case "ChainExpression":this.raiseRecoverable(I.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":if(!Na)break;default:this.raise(I.start,"Assigning to rvalue")}else z&&this.checkPatternErrors(z,!0);return I};jc.toAssignableList=function(I,Na){for(var z=I.length,X=0;X<z;X++){var rb=I[X];rb&&this.toAssignable(rb,Na)}z&&(z=I[z-1],6===this.options.ecmaVersion&&Na&&z&&"RestElement"===z.type&&"Identifier"!==z.argument.type&&this.unexpected(z.argument.start));
return I};jc.parseSpread=function(I){var Na=this.startNode();this.next();Na.argument=this.parseMaybeAssign(!1,I);return this.finishNode(Na,"SpreadElement")};jc.parseRestBinding=function(){var I=this.startNode();this.next();6===this.options.ecmaVersion&&this.type!==Oa.name&&this.unexpected();I.argument=this.parseBindingAtom();return this.finishNode(I,"RestElement")};jc.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case Oa.bracketL:var I=this.startNode();this.next();I.elements=
this.parseBindingList(Oa.bracketR,!0,!0);return this.finishNode(I,"ArrayPattern");case Oa.braceL:return this.parseObj(!0)}return this.parseIdent()};jc.parseBindingList=function(I,Na,z){for(var X=[],rb=!0;!this.eat(I);)if(rb?rb=!1:this.expect(Oa.comma),Na&&this.type===Oa.comma)X.push(null);else if(z&&this.afterTrailingComma(I))break;else if(this.type===Oa.ellipsis){Na=this.parseRestBinding();this.parseBindingListItem(Na);X.push(Na);this.type===Oa.comma&&this.raise(this.start,"Comma is not permitted after the rest element");
this.expect(I);break}else{var Wc=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(Wc);X.push(Wc)}return X};jc.parseBindingListItem=function(I){return I};jc.parseMaybeDefault=function(I,Na,z){z=z||this.parseBindingAtom();if(6>this.options.ecmaVersion||!this.eat(Oa.eq))return z;I=this.startNodeAt(I,Na);I.left=z;I.right=this.parseMaybeAssign();return this.finishNode(I,"AssignmentPattern")};jc.checkLValSimple=function(I,Na,z){void 0===Na&&(Na=0);var X=0!==Na;switch(I.type){case "Identifier":this.strict&&
this.reservedWordsStrictBind.test(I.name)&&this.raiseRecoverable(I.start,(X?"Binding ":"Assigning to ")+I.name+" in strict mode");X&&(2===Na&&"let"===I.name&&this.raiseRecoverable(I.start,"let is disallowed as a lexically bound name"),z&&(Kd.call(z,I.name)&&this.raiseRecoverable(I.start,"Argument name clash"),z[I.name]=!0),5!==Na&&this.declareName(I.name,Na,I.start));break;case "ChainExpression":this.raiseRecoverable(I.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":X&&
this.raiseRecoverable(I.start,"Binding member expression");break;case "ParenthesizedExpression":return X&&this.raiseRecoverable(I.start,"Binding parenthesized expression"),this.checkLValSimple(I.expression,Na,z);default:this.raise(I.start,(X?"Binding":"Assigning to")+" rvalue")}};jc.checkLValPattern=function(I,Na,z){void 0===Na&&(Na=0);switch(I.type){case "ObjectPattern":var X=0;for(I=I.properties;X<I.length;X+=1)this.checkLValInnerPattern(I[X],Na,z);break;case "ArrayPattern":X=0;for(I=I.elements;X<
I.length;X+=1){var rb=I[X];rb&&this.checkLValInnerPattern(rb,Na,z)}break;default:this.checkLValSimple(I,Na,z)}};jc.checkLValInnerPattern=function(I,Na,z){void 0===Na&&(Na=0);switch(I.type){case "Property":this.checkLValInnerPattern(I.value,Na,z);break;case "AssignmentPattern":this.checkLValPattern(I.left,Na,z);break;case "RestElement":this.checkLValPattern(I.argument,Na,z);break;default:this.checkLValPattern(I,Na,z)}};jc=Sa.prototype;jc.checkPropClash=function(I,Na,z){if(!(9<=this.options.ecmaVersion&&
"SpreadElement"===I.type||6<=this.options.ecmaVersion&&(I.computed||I.method||I.shorthand))){var X=I.key;switch(X.type){case "Identifier":var rb=X.name;break;case "Literal":rb=String(X.value);break;default:return}I=I.kind;6<=this.options.ecmaVersion?"__proto__"===rb&&"init"===I&&(Na.proto&&(z?0>z.doubleProto&&(z.doubleProto=X.start):this.raiseRecoverable(X.start,"Redefinition of __proto__ property")),Na.proto=!0):(rb="$"+rb,(z=Na[rb])?("init"===I?this.strict&&z.init||z.get||z.set:z.init||z[I])&&this.raiseRecoverable(X.start,
"Redefinition of property"):z=Na[rb]={init:!1,get:!1,set:!1},z[I]=!0)}};jc.parseExpression=function(I,Na){var z=this.start,X=this.startLoc,rb=this.parseMaybeAssign(I,Na);if(this.type===Oa.comma){z=this.startNodeAt(z,X);for(z.expressions=[rb];this.eat(Oa.comma);)z.expressions.push(this.parseMaybeAssign(I,Na));return this.finishNode(z,"SequenceExpression")}return rb};jc.parseMaybeAssign=function(I,Na,z){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(I);this.exprAllowed=!1}var X=
!1,rb=-1,Wc=-1;Na?(rb=Na.parenthesizedAssign,Wc=Na.trailingComma,Na.parenthesizedAssign=Na.trailingComma=-1):(Na=new r,X=!0);var Sd=this.start,hf=this.startLoc;if(this.type===Oa.parenL||this.type===Oa.name)this.potentialArrowAt=this.start;var vf=this.parseMaybeConditional(I,Na);z&&(vf=z.call(this,vf,Sd,hf));if(this.type.isAssign)return z=this.startNodeAt(Sd,hf),z.operator=this.value,this.type===Oa.eq&&(vf=this.toAssignable(vf,!1,Na)),X||(Na.parenthesizedAssign=Na.trailingComma=Na.doubleProto=-1),
Na.shorthandAssign>=vf.start&&(Na.shorthandAssign=-1),this.type===Oa.eq?this.checkLValPattern(vf):this.checkLValSimple(vf),z.left=vf,this.next(),z.right=this.parseMaybeAssign(I),this.finishNode(z,"AssignmentExpression");X&&this.checkExpressionErrors(Na,!0);-1<rb&&(Na.parenthesizedAssign=rb);-1<Wc&&(Na.trailingComma=Wc);return vf};jc.parseMaybeConditional=function(I,Na){var z=this.start,X=this.startLoc,rb=this.parseExprOps(I,Na);return this.checkExpressionErrors(Na)?rb:this.eat(Oa.question)?(Na=this.startNodeAt(z,
X),Na.test=rb,Na.consequent=this.parseMaybeAssign(),this.expect(Oa.colon),Na.alternate=this.parseMaybeAssign(I),this.finishNode(Na,"ConditionalExpression")):rb};jc.parseExprOps=function(I,Na){var z=this.start,X=this.startLoc,rb=this.parseMaybeUnary(Na,!1);return this.checkExpressionErrors(Na)?rb:rb.start===z&&"ArrowFunctionExpression"===rb.type?rb:this.parseExprOp(rb,z,X,-1,I)};jc.parseExprOp=function(I,Na,z,X,rb){var Wc=this.type.binop;if(null!=Wc&&(!rb||this.type!==Oa._in)&&Wc>X){var Sd=this.type===
Oa.logicalOR||this.type===Oa.logicalAND,hf=this.type===Oa.coalesce;hf&&(Wc=Oa.logicalAND.binop);var vf=this.value;this.next();var Xf=this.start,uh=this.startLoc;Wc=this.parseExprOp(this.parseMaybeUnary(null,!1),Xf,uh,Wc,rb);I=this.buildBinary(Na,z,I,Wc,vf,Sd||hf);(Sd&&this.type===Oa.coalesce||hf&&(this.type===Oa.logicalOR||this.type===Oa.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses");return this.parseExprOp(I,
Na,z,X,rb)}return I};jc.buildBinary=function(I,Na,z,X,rb,Wc){I=this.startNodeAt(I,Na);I.left=z;I.operator=rb;I.right=X;return this.finishNode(I,Wc?"LogicalExpression":"BinaryExpression")};jc.parseMaybeUnary=function(I,Na){var z=this.start,X=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var rb=this.parseAwait();Na=!0}else if(this.type.prefix){rb=this.startNode();var Wc=this.type===Oa.incDec;rb.operator=this.value;rb.prefix=!0;
this.next();rb.argument=this.parseMaybeUnary(null,!0);this.checkExpressionErrors(I,!0);Wc?this.checkLValSimple(rb.argument):this.strict&&"delete"===rb.operator&&"Identifier"===rb.argument.type?this.raiseRecoverable(rb.start,"Deleting local variable in strict mode"):Na=!0;rb=this.finishNode(rb,Wc?"UpdateExpression":"UnaryExpression")}else{rb=this.parseExprSubscripts(I);if(this.checkExpressionErrors(I))return rb;for(;this.type.postfix&&!this.canInsertSemicolon();)I=this.startNodeAt(z,X),I.operator=
this.value,I.prefix=!1,I.argument=rb,this.checkLValSimple(rb),this.next(),rb=this.finishNode(I,"UpdateExpression")}return!Na&&this.eat(Oa.starstar)?this.buildBinary(z,X,rb,this.parseMaybeUnary(null,!1),"**",!1):rb};jc.parseExprSubscripts=function(I){var Na=this.start,z=this.startLoc,X=this.parseExprAtom(I);if("ArrowFunctionExpression"===X.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return X;Na=this.parseSubscripts(X,Na,z);I&&"MemberExpression"===Na.type&&(I.parenthesizedAssign>=
Na.start&&(I.parenthesizedAssign=-1),I.parenthesizedBind>=Na.start&&(I.parenthesizedBind=-1));return Na};jc.parseSubscripts=function(I,Na,z,X){for(var rb=8<=this.options.ecmaVersion&&"Identifier"===I.type&&"async"===I.name&&this.lastTokEnd===I.end&&!this.canInsertSemicolon()&&5===I.end-I.start&&this.potentialArrowAt===I.start,Wc=!1;;){var Sd=this.parseSubscript(I,Na,z,X,rb,Wc);Sd.optional&&(Wc=!0);if(Sd===I||"ArrowFunctionExpression"===Sd.type)return Wc&&(I=this.startNodeAt(Na,z),I.expression=Sd,
Sd=this.finishNode(I,"ChainExpression")),Sd;I=Sd}};jc.parseSubscript=function(I,Na,z,X,rb,Wc){var Sd=11<=this.options.ecmaVersion,hf=Sd&&this.eat(Oa.questionDot);X&&hf&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var vf=this.eat(Oa.bracketL);if(vf||hf&&this.type!==Oa.parenL&&this.type!==Oa.backQuote||this.eat(Oa.dot))Na=this.startNodeAt(Na,z),Na.object=I,Na.property=vf?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),
Na.computed=!!vf,vf&&this.expect(Oa.bracketR),Sd&&(Na.optional=hf),I=this.finishNode(Na,"MemberExpression");else if(!X&&this.eat(Oa.parenL)){X=new r;Wc=this.yieldPos;var Xf=this.awaitPos,uh=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;vf=this.parseExprList(Oa.parenR,8<=this.options.ecmaVersion,!1,X);if(rb&&!hf&&!this.canInsertSemicolon()&&this.eat(Oa.arrow))return this.checkPatternErrors(X,!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,
"Cannot use 'await' as identifier inside an async function"),this.yieldPos=Wc,this.awaitPos=Xf,this.awaitIdentPos=uh,this.parseArrowExpression(this.startNodeAt(Na,z),vf,!0);this.checkExpressionErrors(X,!0);this.yieldPos=Wc||this.yieldPos;this.awaitPos=Xf||this.awaitPos;this.awaitIdentPos=uh||this.awaitIdentPos;Na=this.startNodeAt(Na,z);Na.callee=I;Na.arguments=vf;Sd&&(Na.optional=hf);I=this.finishNode(Na,"CallExpression")}else this.type===Oa.backQuote&&((hf||Wc)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),
Sd=this.startNodeAt(Na,z),Sd.tag=I,Sd.quasi=this.parseTemplate({isTagged:!0}),I=this.finishNode(Sd,"TaggedTemplateExpression"));return I};jc.parseExprAtom=function(I){this.type===Oa.slash&&this.readRegexp();var Na=this.potentialArrowAt===this.start;switch(this.type){case Oa._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),Na=this.startNode(),this.next(),this.type!==Oa.parenL||this.allowDirectSuper||this.raise(Na.start,"super() call outside constructor of a subclass"),
this.type!==Oa.dot&&this.type!==Oa.bracketL&&this.type!==Oa.parenL&&this.unexpected(),this.finishNode(Na,"Super");case Oa._this:return Na=this.startNode(),this.next(),this.finishNode(Na,"ThisExpression");case Oa.name:I=this.start;var z=this.startLoc,X=this.containsEsc,rb=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!X&&"async"===rb.name&&!this.canInsertSemicolon()&&this.eat(Oa._function))return this.parseFunction(this.startNodeAt(I,z),0,!1,!0);if(Na&&!this.canInsertSemicolon()){if(this.eat(Oa.arrow))return this.parseArrowExpression(this.startNodeAt(I,
z),[rb],!1);if(8<=this.options.ecmaVersion&&"async"===rb.name&&this.type===Oa.name&&!X)return rb=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(Oa.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(I,z),[rb],!0)}return rb;case Oa.regexp:return I=this.value,Na=this.parseLiteral(I.value),Na.regex={pattern:I.pattern,flags:I.flags},Na;case Oa.num:case Oa.string:return this.parseLiteral(this.value);case Oa._null:case Oa._true:case Oa._false:return Na=this.startNode(),Na.value=
this.type===Oa._null?null:this.type===Oa._true,Na.raw=this.type.keyword,this.next(),this.finishNode(Na,"Literal");case Oa.parenL:return z=this.start,Na=this.parseParenAndDistinguishExpression(Na),I&&(0>I.parenthesizedAssign&&!this.isSimpleAssignTarget(Na)&&(I.parenthesizedAssign=z),0>I.parenthesizedBind&&(I.parenthesizedBind=z)),Na;case Oa.bracketL:return Na=this.startNode(),this.next(),Na.elements=this.parseExprList(Oa.bracketR,!0,!0,I),this.finishNode(Na,"ArrayExpression");case Oa.braceL:return this.parseObj(!1,
I);case Oa._function:return Na=this.startNode(),this.next(),this.parseFunction(Na,0);case Oa._class:return this.parseClass(this.startNode(),!1);case Oa._new:return this.parseNew();case Oa.backQuote:return this.parseTemplate();case Oa._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.unexpected();default:this.unexpected()}};jc.parseExprImport=function(){var I=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var Na=this.parseIdent(!0);
switch(this.type){case Oa.parenL:return this.parseDynamicImport(I);case Oa.dot:return I.meta=Na,this.parseImportMeta(I);default:this.unexpected()}};jc.parseDynamicImport=function(I){this.next();I.source=this.parseMaybeAssign();if(!this.eat(Oa.parenR)){var Na=this.start;this.eat(Oa.comma)&&this.eat(Oa.parenR)?this.raiseRecoverable(Na,"Trailing comma is not allowed in import()"):this.unexpected(Na)}return this.finishNode(I,"ImportExpression")};jc.parseImportMeta=function(I){this.next();var Na=this.containsEsc;
I.property=this.parseIdent(!0);"meta"!==I.property.name&&this.raiseRecoverable(I.property.start,"The only valid meta property for import is 'import.meta'");Na&&this.raiseRecoverable(I.start,"'import.meta' must not contain escaped characters");"module"!==this.options.sourceType&&this.raiseRecoverable(I.start,"Cannot use 'import.meta' outside a module");return this.finishNode(I,"MetaProperty")};jc.parseLiteral=function(I){var Na=this.startNode();Na.value=I;Na.raw=this.input.slice(this.start,this.end);
110===Na.raw.charCodeAt(Na.raw.length-1)&&(Na.bigint=Na.raw.slice(0,-1).replace(/_/g,""));this.next();return this.finishNode(Na,"Literal")};jc.parseParenExpression=function(){this.expect(Oa.parenL);var I=this.parseExpression();this.expect(Oa.parenR);return I};jc.parseParenAndDistinguishExpression=function(I){var Na=this.start,z=this.startLoc,X=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();var rb=this.start,Wc=this.startLoc,Sd=[],hf=!0,vf=!1,Xf=new r,uh=this.yieldPos,Yh=this.awaitPos;
for(this.awaitPos=this.yieldPos=0;this.type!==Oa.parenR;)if(hf?hf=!1:this.expect(Oa.comma),X&&this.afterTrailingComma(Oa.parenR,!0)){vf=!0;break}else if(this.type===Oa.ellipsis){var Mi=this.start;Sd.push(this.parseParenItem(this.parseRestBinding()));this.type===Oa.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else Sd.push(this.parseMaybeAssign(!1,Xf,this.parseParenItem));X=this.start;hf=this.startLoc;this.expect(Oa.parenR);if(I&&!this.canInsertSemicolon()&&this.eat(Oa.arrow))return this.checkPatternErrors(Xf,
!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=uh,this.awaitPos=Yh,this.parseParenArrowList(Na,z,Sd);Sd.length&&!vf||this.unexpected(this.lastTokStart);Mi&&this.unexpected(Mi);this.checkExpressionErrors(Xf,!0);this.yieldPos=uh||this.yieldPos;this.awaitPos=Yh||this.awaitPos;1<Sd.length?(I=this.startNodeAt(rb,Wc),I.expressions=Sd,this.finishNodeAt(I,"SequenceExpression",X,hf)):I=Sd[0]}else I=this.parseParenExpression();return this.options.preserveParens?(Na=this.startNodeAt(Na,z),Na.expression=
I,this.finishNode(Na,"ParenthesizedExpression")):I};jc.parseParenItem=function(I){return I};jc.parseParenArrowList=function(I,Na,z){return this.parseArrowExpression(this.startNodeAt(I,Na),z)};var Mf=[];jc.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var I=this.startNode(),Na=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Oa.dot))return I.meta=Na,Na=this.containsEsc,I.property=this.parseIdent(!0),"target"!==I.property.name&&
this.raiseRecoverable(I.property.start,"The only valid meta property for new is 'new.target'"),Na&&this.raiseRecoverable(I.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(I.start,"'new.target' can only be used in functions"),this.finishNode(I,"MetaProperty");Na=this.start;var z=this.startLoc,X=this.type===Oa._import;I.callee=this.parseSubscripts(this.parseExprAtom(),Na,z,!0);X&&"ImportExpression"===I.callee.type&&this.raise(Na,"Cannot use new with import()");
this.eat(Oa.parenL)?I.arguments=this.parseExprList(Oa.parenR,8<=this.options.ecmaVersion,!1):I.arguments=Mf;return this.finishNode(I,"NewExpression")};jc.parseTemplateElement=function(I){I=I.isTagged;var Na=this.startNode();this.type===Oa.invalidTemplate?(I||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),Na.value={raw:this.value,cooked:null}):Na.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value};this.next();Na.tail=this.type===
Oa.backQuote;return this.finishNode(Na,"TemplateElement")};jc.parseTemplate=function(I){void 0===I&&(I={});I=I.isTagged;void 0===I&&(I=!1);var Na=this.startNode();this.next();Na.expressions=[];var z=this.parseTemplateElement({isTagged:I});for(Na.quasis=[z];!z.tail;)this.type===Oa.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Oa.dollarBraceL),Na.expressions.push(this.parseExpression()),this.expect(Oa.braceR),Na.quasis.push(z=this.parseTemplateElement({isTagged:I}));this.next();
return this.finishNode(Na,"TemplateLiteral")};jc.isAsyncProp=function(I){return!I.computed&&"Identifier"===I.key.type&&"async"===I.key.name&&(this.type===Oa.name||this.type===Oa.num||this.type===Oa.string||this.type===Oa.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===Oa.star)&&!md.test(this.input.slice(this.lastTokEnd,this.start))};jc.parseObj=function(I,Na){var z=this.startNode(),X=!0,rb={};z.properties=[];for(this.next();!this.eat(Oa.braceR);){if(X)X=!1;else if(this.expect(Oa.comma),
5<=this.options.ecmaVersion&&this.afterTrailingComma(Oa.braceR))break;var Wc=this.parseProperty(I,Na);I||this.checkPropClash(Wc,rb,Na);z.properties.push(Wc)}return this.finishNode(z,I?"ObjectPattern":"ObjectExpression")};jc.parseProperty=function(I,Na){var z=this.startNode(),X;if(9<=this.options.ecmaVersion&&this.eat(Oa.ellipsis)){if(I)return z.argument=this.parseIdent(!1),this.type===Oa.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(z,"RestElement");
this.type===Oa.parenL&&Na&&(0>Na.parenthesizedAssign&&(Na.parenthesizedAssign=this.start),0>Na.parenthesizedBind&&(Na.parenthesizedBind=this.start));z.argument=this.parseMaybeAssign(!1,Na);this.type===Oa.comma&&Na&&0>Na.trailingComma&&(Na.trailingComma=this.start);return this.finishNode(z,"SpreadElement")}if(6<=this.options.ecmaVersion){z.method=!1;z.shorthand=!1;if(I||Na){var rb=this.start;var Wc=this.startLoc}I||(X=this.eat(Oa.star))}var Sd=this.containsEsc;this.parsePropertyName(z);if(!I&&!Sd&&
8<=this.options.ecmaVersion&&!X&&this.isAsyncProp(z)){var hf=!0;X=9<=this.options.ecmaVersion&&this.eat(Oa.star);this.parsePropertyName(z,Na)}else hf=!1;this.parsePropertyValue(z,I,X,hf,rb,Wc,Na,Sd);return this.finishNode(z,"Property")};jc.parsePropertyValue=function(I,Na,z,X,rb,Wc,Sd,hf){(z||X)&&this.type===Oa.colon&&this.unexpected();this.eat(Oa.colon)?(I.value=Na?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,Sd),I.kind="init"):6<=this.options.ecmaVersion&&this.type===
Oa.parenL?(Na&&this.unexpected(),I.kind="init",I.method=!0,I.value=this.parseMethod(z,X)):Na||hf||!(5<=this.options.ecmaVersion)||I.computed||"Identifier"!==I.key.type||"get"!==I.key.name&&"set"!==I.key.name||this.type===Oa.comma||this.type===Oa.braceR||this.type===Oa.eq?6<=this.options.ecmaVersion&&!I.computed&&"Identifier"===I.key.type?((z||X)&&this.unexpected(),this.checkUnreserved(I.key),"await"!==I.key.name||this.awaitIdentPos||(this.awaitIdentPos=rb),I.kind="init",Na?I.value=this.parseMaybeDefault(rb,
Wc,this.copyNode(I.key)):this.type===Oa.eq&&Sd?(0>Sd.shorthandAssign&&(Sd.shorthandAssign=this.start),I.value=this.parseMaybeDefault(rb,Wc,this.copyNode(I.key))):I.value=this.copyNode(I.key),I.shorthand=!0):this.unexpected():((z||X)&&this.unexpected(),I.kind=I.key.name,this.parsePropertyName(I),I.value=this.parseMethod(!1),I.value.params.length!==("get"===I.kind?0:1)?(Na=I.value.start,"get"===I.kind?this.raiseRecoverable(Na,"getter should have no params"):this.raiseRecoverable(Na,"setter should have exactly one param")):
"set"===I.kind&&"RestElement"===I.value.params[0].type&&this.raiseRecoverable(I.value.params[0].start,"Setter cannot use rest params"))};jc.parsePropertyName=function(I){if(6<=this.options.ecmaVersion){if(this.eat(Oa.bracketL))return I.computed=!0,I.key=this.parseMaybeAssign(),this.expect(Oa.bracketR),I.key;I.computed=!1}return I.key=this.type===Oa.num||this.type===Oa.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)};jc.initFunction=function(I){I.id=null;6<=this.options.ecmaVersion&&
(I.generator=I.expression=!1);8<=this.options.ecmaVersion&&(I.async=!1)};jc.parseMethod=function(I,Na,z){var X=this.startNode(),rb=this.yieldPos,Wc=this.awaitPos,Sd=this.awaitIdentPos;this.initFunction(X);6<=this.options.ecmaVersion&&(X.generator=I);8<=this.options.ecmaVersion&&(X.async=!!Na);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(Na?4:0)|(X.generator?8:0)|64|(z?128:0));this.expect(Oa.parenL);X.params=this.parseBindingList(Oa.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams();
this.parseFunctionBody(X,!1,!0);this.yieldPos=rb;this.awaitPos=Wc;this.awaitIdentPos=Sd;return this.finishNode(X,"FunctionExpression")};jc.parseArrowExpression=function(I,Na,z){var X=this.yieldPos,rb=this.awaitPos,Wc=this.awaitIdentPos;this.enterScope((z?4:0)|18);this.initFunction(I);8<=this.options.ecmaVersion&&(I.async=!!z);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;I.params=this.toAssignableList(Na,!0);this.parseFunctionBody(I,!0,!1);this.yieldPos=X;this.awaitPos=rb;this.awaitIdentPos=Wc;
return this.finishNode(I,"ArrowFunctionExpression")};jc.parseFunctionBody=function(I,Na,z){var X=this.strict,rb=!1;if(Na&&this.type!==Oa.braceL)I.body=this.parseMaybeAssign(),I.expression=!0,this.checkParams(I,!1);else{var Wc=7<=this.options.ecmaVersion&&!this.isSimpleParamList(I.params);(!X||Wc)&&(rb=this.strictDirective(this.end))&&Wc&&this.raiseRecoverable(I.start,"Illegal 'use strict' directive in function with non-simple parameter list");Wc=this.labels;this.labels=[];rb&&(this.strict=!0);this.checkParams(I,
!X&&!rb&&!Na&&!z&&this.isSimpleParamList(I.params));this.strict&&I.id&&this.checkLValSimple(I.id,5);I.body=this.parseBlock(!1,void 0,rb&&!X);I.expression=!1;this.adaptDirectivePrologue(I.body.body);this.labels=Wc}this.exitScope()};jc.isSimpleParamList=function(I){for(var Na=0;Na<I.length;Na+=1)if("Identifier"!==I[Na].type)return!1;return!0};jc.checkParams=function(I,Na){var z={},X=0;for(I=I.params;X<I.length;X+=1)this.checkLValInnerPattern(I[X],1,Na?null:z)};jc.parseExprList=function(I,Na,z,X){for(var rb=
[],Wc=!0;!this.eat(I);){if(Wc)Wc=!1;else if(this.expect(Oa.comma),Na&&this.afterTrailingComma(I))break;if(z&&this.type===Oa.comma)var Sd=null;else this.type===Oa.ellipsis?(Sd=this.parseSpread(X),X&&this.type===Oa.comma&&0>X.trailingComma&&(X.trailingComma=this.start)):Sd=this.parseMaybeAssign(!1,X);rb.push(Sd)}return rb};jc.checkUnreserved=function(I){var Na=I.start,z=I.end;I=I.name;this.inGenerator&&"yield"===I&&this.raiseRecoverable(Na,"Cannot use 'yield' as identifier inside a generator");this.inAsync&&
"await"===I&&this.raiseRecoverable(Na,"Cannot use 'await' as identifier inside an async function");this.keywords.test(I)&&this.raise(Na,"Unexpected keyword '"+I+"'");6>this.options.ecmaVersion&&-1!==this.input.slice(Na,z).indexOf("\\")||!(this.strict?this.reservedWordsStrict:this.reservedWords).test(I)||(this.inAsync||"await"!==I||this.raiseRecoverable(Na,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(Na,"The keyword '"+I+"' is reserved"))};jc.parseIdent=function(I,
Na){Na=this.startNode();this.type===Oa.name?Na.name=this.value:this.type.keyword?(Na.name=this.type.keyword,"class"!==Na.name&&"function"!==Na.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected();this.next(!!I);this.finishNode(Na,"Identifier");I||(this.checkUnreserved(Na),"await"!==Na.name||this.awaitIdentPos||(this.awaitIdentPos=Na.start));return Na};jc.parseYield=function(I){this.yieldPos||(this.yieldPos=this.start);var Na=
this.startNode();this.next();this.type===Oa.semi||this.canInsertSemicolon()||this.type!==Oa.star&&!this.type.startsExpr?(Na.delegate=!1,Na.argument=null):(Na.delegate=this.eat(Oa.star),Na.argument=this.parseMaybeAssign(I));return this.finishNode(Na,"YieldExpression")};jc.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var I=this.startNode();this.next();I.argument=this.parseMaybeUnary(null,!0);return this.finishNode(I,"AwaitExpression")};jc=Sa.prototype;jc.raise=function(I,Na){var z=
n(this.input,I);Na+=" ("+z.line+":"+z.column+")";Na=new SyntaxError(Na);Na.pos=I;Na.loc=z;Na.raisedAt=this.pos;throw Na;};jc.raiseRecoverable=jc.raise;jc.curPosition=function(){if(this.options.locations)return new V(this.curLine,this.pos-this.lineStart)};jc=Sa.prototype;var Tg=function(I){this.flags=I;this["var"]=[];this.lexical=[];this.functions=[]};jc.enterScope=function(I){this.scopeStack.push(new Tg(I))};jc.exitScope=function(){this.scopeStack.pop()};jc.treatFunctionsAsVarInScope=function(I){return I.flags&
2||!this.inModule&&I.flags&1};jc.declareName=function(I,Na,z){var X=!1;if(2===Na)Na=this.currentScope(),X=-1<Na.lexical.indexOf(I)||-1<Na.functions.indexOf(I)||-1<Na["var"].indexOf(I),Na.lexical.push(I),this.inModule&&Na.flags&1&&delete this.undefinedExports[I];else if(4===Na)this.currentScope().lexical.push(I);else if(3===Na)Na=this.currentScope(),X=this.treatFunctionsAsVar?-1<Na.lexical.indexOf(I):-1<Na.lexical.indexOf(I)||-1<Na["var"].indexOf(I),Na.functions.push(I);else for(Na=this.scopeStack.length-
1;0<=Na;--Na){var rb=this.scopeStack[Na];if(-1<rb.lexical.indexOf(I)&&!(rb.flags&32&&rb.lexical[0]===I)||!this.treatFunctionsAsVarInScope(rb)&&-1<rb.functions.indexOf(I)){X=!0;break}rb["var"].push(I);this.inModule&&rb.flags&1&&delete this.undefinedExports[I];if(rb.flags&3)break}X&&this.raiseRecoverable(z,"Identifier '"+I+"' has already been declared")};jc.checkLocalExport=function(I){-1===this.scopeStack[0].lexical.indexOf(I.name)&&-1===this.scopeStack[0]["var"].indexOf(I.name)&&(this.undefinedExports[I.name]=
I)};jc.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};jc.currentVarScope=function(){for(var I=this.scopeStack.length-1;;I--){var Na=this.scopeStack[I];if(Na.flags&3)return Na}};jc.currentThisScope=function(){for(var I=this.scopeStack.length-1;;I--){var Na=this.scopeStack[I];if(Na.flags&3&&!(Na.flags&16))return Na}};var pg=function(I,Na,z){this.type="";this.start=Na;this.end=0;I.options.locations&&(this.loc=new ea(I,z));I.options.directSourceFile&&(this.sourceFile=I.options.directSourceFile);
I.options.ranges&&(this.range=[Na,0])};jc=Sa.prototype;jc.startNode=function(){return new pg(this,this.start,this.startLoc)};jc.startNodeAt=function(I,Na){return new pg(this,I,Na)};jc.finishNode=function(I,Na){return t.call(this,I,Na,this.lastTokEnd,this.lastTokEndLoc)};jc.finishNodeAt=function(I,Na,z,X){return t.call(this,I,Na,z,X)};jc.copyNode=function(I){var Na=new pg(this,I.start,this.startLoc),z;for(z in I)Na[z]=I[z];return Na};jc=function(I,Na,z,X,rb){this.token=I;this.isExpr=!!Na;this.preserveSpace=
!!z;this.override=X;this.generator=!!rb};var Yg={b_stat:new jc("{",!1),b_expr:new jc("{",!0),b_tmpl:new jc("${",!1),p_stat:new jc("(",!1),p_expr:new jc("(",!0),q_tmpl:new jc("`",!0,!0,function(I){return I.tryReadTemplateToken()}),f_stat:new jc("function",!1),f_expr:new jc("function",!0),f_expr_gen:new jc("function",!0,!1,null,!0),f_gen:new jc("function",!1,!1,null,!0)};Zb=Sa.prototype;Zb.initialContext=function(){return[Yg.b_stat]};Zb.braceIsBlock=function(I){var Na=this.curContext();return Na===
Yg.f_expr||Na===Yg.f_stat?!0:I!==Oa.colon||Na!==Yg.b_stat&&Na!==Yg.b_expr?I===Oa._return||I===Oa.name&&this.exprAllowed?md.test(this.input.slice(this.lastTokEnd,this.start)):I===Oa._else||I===Oa.semi||I===Oa.eof||I===Oa.parenR||I===Oa.arrow?!0:I===Oa.braceL?Na===Yg.b_stat:I===Oa._var||I===Oa._const||I===Oa.name?!1:!this.exprAllowed:!Na.isExpr};Zb.inGeneratorContext=function(){for(var I=this.context.length-1;1<=I;I--){var Na=this.context[I];if("function"===Na.token)return Na.generator}return!1};Zb.updateContext=
function(I){var Na,z=this.type;z.keyword&&I===Oa.dot?this.exprAllowed=!1:(Na=z.updateContext)?Na.call(this,I):this.exprAllowed=z.beforeExpr};Oa.parenR.updateContext=Oa.braceR.updateContext=function(){if(1===this.context.length)this.exprAllowed=!0;else{var I=this.context.pop();I===Yg.b_stat&&"function"===this.curContext().token&&(I=this.context.pop());this.exprAllowed=!I.isExpr}};Oa.braceL.updateContext=function(I){this.context.push(this.braceIsBlock(I)?Yg.b_stat:Yg.b_expr);this.exprAllowed=!0};Oa.dollarBraceL.updateContext=
function(){this.context.push(Yg.b_tmpl);this.exprAllowed=!0};Oa.parenL.updateContext=function(I){this.context.push(I===Oa._if||I===Oa._for||I===Oa._with||I===Oa._while?Yg.p_stat:Yg.p_expr);this.exprAllowed=!0};Oa.incDec.updateContext=function(){};Oa._function.updateContext=Oa._class.updateContext=function(I){!I.beforeExpr||I===Oa._else||I===Oa.semi&&this.curContext()!==Yg.p_stat||I===Oa._return&&md.test(this.input.slice(this.lastTokEnd,this.start))||(I===Oa.colon||I===Oa.braceL)&&this.curContext()===
Yg.b_stat?this.context.push(Yg.f_stat):this.context.push(Yg.f_expr);this.exprAllowed=!1};Oa.backQuote.updateContext=function(){this.curContext()===Yg.q_tmpl?this.context.pop():this.context.push(Yg.q_tmpl);this.exprAllowed=!1};Oa.star.updateContext=function(I){I===Oa._function&&(I=this.context.length-1,this.context[I]=this.context[I]===Yg.f_expr?Yg.f_expr_gen:Yg.f_gen);this.exprAllowed=!0};Oa.name.updateContext=function(I){var Na=!1;6<=this.options.ecmaVersion&&I!==Oa.dot&&("of"===this.value&&!this.exprAllowed||
"yield"===this.value&&this.inGeneratorContext())&&(Na=!0);this.exprAllowed=Na};var Rh={9:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",
10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},
Ei={9:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",
10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",
11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",
12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},
Xj={};w(9);w(10);w(11);w(12);Zb=Sa.prototype;var Aj=function(I){this.parser=I;this.validFlags="gim"+(6<=I.options.ecmaVersion?"uy":"")+(9<=I.options.ecmaVersion?"s":"");this.unicodeProperties=Xj[12<=I.options.ecmaVersion?12:I.options.ecmaVersion];this.flags=this.source="";this.start=0;this.switchN=this.switchU=!1;this.lastIntValue=this.pos=0;this.lastStringValue="";this.lastAssertionIsQuantifiable=!1;this.maxBackReference=this.numCapturingParens=0;this.groupNames=[];this.backReferenceNames=[]};Aj.prototype.reset=
function(I,Na,z){var X=-1!==z.indexOf("u");this.start=I|0;this.source=Na+"";this.flags=z;this.switchU=X&&6<=this.parser.options.ecmaVersion;this.switchN=X&&9<=this.parser.options.ecmaVersion};Aj.prototype.raise=function(I){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+I)};Aj.prototype.at=function(I,Na){void 0===Na&&(Na=!1);var z=this.source,X=z.length;if(I>=X)return-1;var rb=z.charCodeAt(I);if(!Na&&!this.switchU||55295>=rb||57344<=rb||I+1>=X)return rb;I=
z.charCodeAt(I+1);return 56320<=I&&57343>=I?(rb<<10)+I-56613888:rb};Aj.prototype.nextIndex=function(I,Na){void 0===Na&&(Na=!1);var z=this.source,X=z.length;if(I>=X)return X;var rb=z.charCodeAt(I),Wc;return!Na&&!this.switchU||55295>=rb||57344<=rb||I+1>=X||56320>(Wc=z.charCodeAt(I+1))||57343<Wc?I+1:I+2};Aj.prototype.current=function(I){void 0===I&&(I=!1);return this.at(this.pos,I)};Aj.prototype.lookahead=function(I){void 0===I&&(I=!1);return this.at(this.nextIndex(this.pos,I),I)};Aj.prototype.advance=
function(I){void 0===I&&(I=!1);this.pos=this.nextIndex(this.pos,I)};Aj.prototype.eat=function(I,Na){void 0===Na&&(Na=!1);return this.current(Na)===I?(this.advance(Na),!0):!1};Zb.validateRegExpFlags=function(I){for(var Na=I.validFlags,z=I.flags,X=0;X<z.length;X++){var rb=z.charAt(X);-1===Na.indexOf(rb)&&this.raise(I.start,"Invalid regular expression flag");-1<z.indexOf(rb,X+1)&&this.raise(I.start,"Duplicate regular expression flag")}};Zb.validateRegExpPattern=function(I){this.regexp_pattern(I);!I.switchN&&
9<=this.options.ecmaVersion&&0<I.groupNames.length&&(I.switchN=!0,this.regexp_pattern(I))};Zb.regexp_pattern=function(I){I.pos=0;I.lastIntValue=0;I.lastStringValue="";I.lastAssertionIsQuantifiable=!1;I.numCapturingParens=0;I.maxBackReference=0;I.groupNames.length=0;I.backReferenceNames.length=0;this.regexp_disjunction(I);I.pos!==I.source.length&&(I.eat(41)&&I.raise("Unmatched ')'"),(I.eat(93)||I.eat(125))&&I.raise("Lone quantifier brackets"));I.maxBackReference>I.numCapturingParens&&I.raise("Invalid escape");
for(var Na=0,z=I.backReferenceNames;Na<z.length;Na+=1)-1===I.groupNames.indexOf(z[Na])&&I.raise("Invalid named capture referenced")};Zb.regexp_disjunction=function(I){for(this.regexp_alternative(I);I.eat(124);)this.regexp_alternative(I);this.regexp_eatQuantifier(I,!0)&&I.raise("Nothing to repeat");I.eat(123)&&I.raise("Lone quantifier brackets")};Zb.regexp_alternative=function(I){for(;I.pos<I.source.length&&this.regexp_eatTerm(I););};Zb.regexp_eatTerm=function(I){return this.regexp_eatAssertion(I)?
(I.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(I)&&I.switchU&&I.raise("Invalid quantifier"),!0):(I.switchU?this.regexp_eatAtom(I):this.regexp_eatExtendedAtom(I))?(this.regexp_eatQuantifier(I),!0):!1};Zb.regexp_eatAssertion=function(I){var Na=I.pos;I.lastAssertionIsQuantifiable=!1;if(I.eat(94)||I.eat(36))return!0;if(I.eat(92)){if(I.eat(66)||I.eat(98))return!0;I.pos=Na}if(I.eat(40)&&I.eat(63)){var z=!1;9<=this.options.ecmaVersion&&(z=I.eat(60));if(I.eat(61)||I.eat(33))return this.regexp_disjunction(I),
I.eat(41)||I.raise("Unterminated group"),I.lastAssertionIsQuantifiable=!z,!0}I.pos=Na;return!1};Zb.regexp_eatQuantifier=function(I,Na){void 0===Na&&(Na=!1);return this.regexp_eatQuantifierPrefix(I,Na)?(I.eat(63),!0):!1};Zb.regexp_eatQuantifierPrefix=function(I,Na){return I.eat(42)||I.eat(43)||I.eat(63)||this.regexp_eatBracedQuantifier(I,Na)};Zb.regexp_eatBracedQuantifier=function(I,Na){var z=I.pos;if(I.eat(123)){var X=-1;if(this.regexp_eatDecimalDigits(I)){var rb=I.lastIntValue;I.eat(44)&&this.regexp_eatDecimalDigits(I)&&
(X=I.lastIntValue);if(I.eat(125))return-1!==X&&X<rb&&!Na&&I.raise("numbers out of order in {} quantifier"),!0}I.switchU&&!Na&&I.raise("Incomplete quantifier");I.pos=z}return!1};Zb.regexp_eatAtom=function(I){return this.regexp_eatPatternCharacters(I)||I.eat(46)||this.regexp_eatReverseSolidusAtomEscape(I)||this.regexp_eatCharacterClass(I)||this.regexp_eatUncapturingGroup(I)||this.regexp_eatCapturingGroup(I)};Zb.regexp_eatReverseSolidusAtomEscape=function(I){var Na=I.pos;if(I.eat(92)){if(this.regexp_eatAtomEscape(I))return!0;
I.pos=Na}return!1};Zb.regexp_eatUncapturingGroup=function(I){var Na=I.pos;if(I.eat(40)){if(I.eat(63)&&I.eat(58)){this.regexp_disjunction(I);if(I.eat(41))return!0;I.raise("Unterminated group")}I.pos=Na}return!1};Zb.regexp_eatCapturingGroup=function(I){if(I.eat(40)){9<=this.options.ecmaVersion?this.regexp_groupSpecifier(I):63===I.current()&&I.raise("Invalid group");this.regexp_disjunction(I);if(I.eat(41))return I.numCapturingParens+=1,!0;I.raise("Unterminated group")}return!1};Zb.regexp_eatExtendedAtom=
function(I){return I.eat(46)||this.regexp_eatReverseSolidusAtomEscape(I)||this.regexp_eatCharacterClass(I)||this.regexp_eatUncapturingGroup(I)||this.regexp_eatCapturingGroup(I)||this.regexp_eatInvalidBracedQuantifier(I)||this.regexp_eatExtendedPatternCharacter(I)};Zb.regexp_eatInvalidBracedQuantifier=function(I){this.regexp_eatBracedQuantifier(I,!0)&&I.raise("Nothing to repeat");return!1};Zb.regexp_eatSyntaxCharacter=function(I){var Na=I.current();return B(Na)?(I.lastIntValue=Na,I.advance(),!0):!1};
Zb.regexp_eatPatternCharacters=function(I){for(var Na=I.pos,z=0;-1!==(z=I.current())&&!B(z);)I.advance();return I.pos!==Na};Zb.regexp_eatExtendedPatternCharacter=function(I){var Na=I.current();return-1===Na||36===Na||40<=Na&&43>=Na||46===Na||63===Na||91===Na||94===Na||124===Na?!1:(I.advance(),!0)};Zb.regexp_groupSpecifier=function(I){I.eat(63)&&(this.regexp_eatGroupName(I)?(-1!==I.groupNames.indexOf(I.lastStringValue)&&I.raise("Duplicate capture group name"),I.groupNames.push(I.lastStringValue)):
I.raise("Invalid group"))};Zb.regexp_eatGroupName=function(I){I.lastStringValue="";if(I.eat(60)){if(this.regexp_eatRegExpIdentifierName(I)&&I.eat(62))return!0;I.raise("Invalid capture group name")}return!1};Zb.regexp_eatRegExpIdentifierName=function(I){I.lastStringValue="";if(this.regexp_eatRegExpIdentifierStart(I)){for(I.lastStringValue+=x(I.lastIntValue);this.regexp_eatRegExpIdentifierPart(I);)I.lastStringValue+=x(I.lastIntValue);return!0}return!1};Zb.regexp_eatRegExpIdentifierStart=function(I){var Na=
I.pos,z=11<=this.options.ecmaVersion,X=I.current(z);I.advance(z);92===X&&this.regexp_eatRegExpUnicodeEscapeSequence(I,z)&&(X=I.lastIntValue);z=X;if(c(z,!0)||36===z||95===z)return I.lastIntValue=X,!0;I.pos=Na;return!1};Zb.regexp_eatRegExpIdentifierPart=function(I){var Na=I.pos,z=11<=this.options.ecmaVersion,X=I.current(z);I.advance(z);92===X&&this.regexp_eatRegExpUnicodeEscapeSequence(I,z)&&(X=I.lastIntValue);z=X;if(g(z,!0)||36===z||95===z||8204===z||8205===z)return I.lastIntValue=X,!0;I.pos=Na;return!1};
Zb.regexp_eatAtomEscape=function(I){if(this.regexp_eatBackReference(I)||this.regexp_eatCharacterClassEscape(I)||this.regexp_eatCharacterEscape(I)||I.switchN&&this.regexp_eatKGroupName(I))return!0;I.switchU&&(99===I.current()&&I.raise("Invalid unicode escape"),I.raise("Invalid escape"));return!1};Zb.regexp_eatBackReference=function(I){var Na=I.pos;if(this.regexp_eatDecimalEscape(I)){var z=I.lastIntValue;if(I.switchU)return z>I.maxBackReference&&(I.maxBackReference=z),!0;if(z<=I.numCapturingParens)return!0;
I.pos=Na}return!1};Zb.regexp_eatKGroupName=function(I){if(I.eat(107)){if(this.regexp_eatGroupName(I))return I.backReferenceNames.push(I.lastStringValue),!0;I.raise("Invalid named reference")}return!1};Zb.regexp_eatCharacterEscape=function(I){return this.regexp_eatControlEscape(I)||this.regexp_eatCControlLetter(I)||this.regexp_eatZero(I)||this.regexp_eatHexEscapeSequence(I)||this.regexp_eatRegExpUnicodeEscapeSequence(I,!1)||!I.switchU&&this.regexp_eatLegacyOctalEscapeSequence(I)||this.regexp_eatIdentityEscape(I)};
Zb.regexp_eatCControlLetter=function(I){var Na=I.pos;if(I.eat(99)){if(this.regexp_eatControlLetter(I))return!0;I.pos=Na}return!1};Zb.regexp_eatZero=function(I){return 48!==I.current()||L(I.lookahead())?!1:(I.lastIntValue=0,I.advance(),!0)};Zb.regexp_eatControlEscape=function(I){var Na=I.current();return 116===Na?(I.lastIntValue=9,I.advance(),!0):110===Na?(I.lastIntValue=10,I.advance(),!0):118===Na?(I.lastIntValue=11,I.advance(),!0):102===Na?(I.lastIntValue=12,I.advance(),!0):114===Na?(I.lastIntValue=
13,I.advance(),!0):!1};Zb.regexp_eatControlLetter=function(I){var Na=I.current();return 65<=Na&&90>=Na||97<=Na&&122>=Na?(I.lastIntValue=Na%32,I.advance(),!0):!1};Zb.regexp_eatRegExpUnicodeEscapeSequence=function(I,Na){void 0===Na&&(Na=!1);var z=I.pos;Na=Na||I.switchU;if(I.eat(117)){if(this.regexp_eatFixedHexDigits(I,4)){z=I.lastIntValue;if(Na&&55296<=z&&56319>=z){Na=I.pos;if(I.eat(92)&&I.eat(117)&&this.regexp_eatFixedHexDigits(I,4)){var X=I.lastIntValue;if(56320<=X&&57343>=X)return I.lastIntValue=
1024*(z-55296)+(X-56320)+65536,!0}I.pos=Na;I.lastIntValue=z}return!0}if(X=Na&&I.eat(123)&&this.regexp_eatHexDigits(I)&&I.eat(125))X=I.lastIntValue,X=0<=X&&1114111>=X;if(X)return!0;Na&&I.raise("Invalid unicode escape");I.pos=z}return!1};Zb.regexp_eatIdentityEscape=function(I){if(I.switchU)return this.regexp_eatSyntaxCharacter(I)?!0:I.eat(47)?(I.lastIntValue=47,!0):!1;var Na=I.current();return 99===Na||I.switchN&&107===Na?!1:(I.lastIntValue=Na,I.advance(),!0)};Zb.regexp_eatDecimalEscape=function(I){I.lastIntValue=
0;var Na=I.current();if(49<=Na&&57>=Na){do I.lastIntValue=10*I.lastIntValue+(Na-48),I.advance();while(48<=(Na=I.current())&&57>=Na);return!0}return!1};Zb.regexp_eatCharacterClassEscape=function(I){var Na=I.current();if(100===Na||68===Na||115===Na||83===Na||119===Na||87===Na)return I.lastIntValue=-1,I.advance(),!0;if(I.switchU&&9<=this.options.ecmaVersion&&(80===Na||112===Na)){I.lastIntValue=-1;I.advance();if(I.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(I)&&I.eat(125))return!0;I.raise("Invalid property name")}return!1};
Zb.regexp_eatUnicodePropertyValueExpression=function(I){var Na=I.pos;if(this.regexp_eatUnicodePropertyName(I)&&I.eat(61)){var z=I.lastStringValue;if(this.regexp_eatUnicodePropertyValue(I))return this.regexp_validateUnicodePropertyNameAndValue(I,z,I.lastStringValue),!0}I.pos=Na;return this.regexp_eatLoneUnicodePropertyNameOrValue(I)?(this.regexp_validateUnicodePropertyNameOrValue(I,I.lastStringValue),!0):!1};Zb.regexp_validateUnicodePropertyNameAndValue=function(I,Na,z){Kd.call(I.unicodeProperties.nonBinary,
Na)||I.raise("Invalid property name");I.unicodeProperties.nonBinary[Na].test(z)||I.raise("Invalid property value")};Zb.regexp_validateUnicodePropertyNameOrValue=function(I,Na){I.unicodeProperties.binary.test(Na)||I.raise("Invalid property name")};Zb.regexp_eatUnicodePropertyName=function(I){var Na;for(I.lastStringValue="";D(Na=I.current());)I.lastStringValue+=x(Na),I.advance();return""!==I.lastStringValue};Zb.regexp_eatUnicodePropertyValue=function(I){var Na;for(I.lastStringValue="";F(Na=I.current());)I.lastStringValue+=
x(Na),I.advance();return""!==I.lastStringValue};Zb.regexp_eatLoneUnicodePropertyNameOrValue=function(I){return this.regexp_eatUnicodePropertyValue(I)};Zb.regexp_eatCharacterClass=function(I){if(I.eat(91)){I.eat(94);this.regexp_classRanges(I);if(I.eat(93))return!0;I.raise("Unterminated character class")}return!1};Zb.regexp_classRanges=function(I){for(;this.regexp_eatClassAtom(I);){var Na=I.lastIntValue;if(I.eat(45)&&this.regexp_eatClassAtom(I)){var z=I.lastIntValue;!I.switchU||-1!==Na&&-1!==z||I.raise("Invalid character class");
-1!==Na&&-1!==z&&Na>z&&I.raise("Range out of order in character class")}}};Zb.regexp_eatClassAtom=function(I){var Na=I.pos;if(I.eat(92)){if(this.regexp_eatClassEscape(I))return!0;if(I.switchU){var z=I.current();(99===z||48<=z&&55>=z)&&I.raise("Invalid class escape");I.raise("Invalid escape")}I.pos=Na}Na=I.current();return 93!==Na?(I.lastIntValue=Na,I.advance(),!0):!1};Zb.regexp_eatClassEscape=function(I){var Na=I.pos;if(I.eat(98))return I.lastIntValue=8,!0;if(I.switchU&&I.eat(45))return I.lastIntValue=
45,!0;if(!I.switchU&&I.eat(99)){if(this.regexp_eatClassControlLetter(I))return!0;I.pos=Na}return this.regexp_eatCharacterClassEscape(I)||this.regexp_eatCharacterEscape(I)};Zb.regexp_eatClassControlLetter=function(I){var Na=I.current();return L(Na)||95===Na?(I.lastIntValue=Na%32,I.advance(),!0):!1};Zb.regexp_eatHexEscapeSequence=function(I){var Na=I.pos;if(I.eat(120)){if(this.regexp_eatFixedHexDigits(I,2))return!0;I.switchU&&I.raise("Invalid escape");I.pos=Na}return!1};Zb.regexp_eatDecimalDigits=function(I){var Na=
I.pos,z;for(I.lastIntValue=0;L(z=I.current());)I.lastIntValue=10*I.lastIntValue+(z-48),I.advance();return I.pos!==Na};Zb.regexp_eatHexDigits=function(I){var Na=I.pos,z;for(I.lastIntValue=0;G(z=I.current());)I.lastIntValue=16*I.lastIntValue+oa(z),I.advance();return I.pos!==Na};Zb.regexp_eatLegacyOctalEscapeSequence=function(I){if(this.regexp_eatOctalDigit(I)){var Na=I.lastIntValue;if(this.regexp_eatOctalDigit(I)){var z=I.lastIntValue;3>=Na&&this.regexp_eatOctalDigit(I)?I.lastIntValue=64*Na+8*z+I.lastIntValue:
I.lastIntValue=8*Na+z}else I.lastIntValue=Na;return!0}return!1};Zb.regexp_eatOctalDigit=function(I){var Na=I.current();if(48<=Na&&55>=Na)return I.lastIntValue=Na-48,I.advance(),!0;I.lastIntValue=0;return!1};Zb.regexp_eatFixedHexDigits=function(I,Na){for(var z=I.pos,X=I.lastIntValue=0;X<Na;++X){var rb=I.current();if(!G(rb))return I.pos=z,!1;I.lastIntValue=16*I.lastIntValue+oa(rb);I.advance()}return!0};var yi=function(I){this.type=I.type;this.value=I.value;this.start=I.start;this.end=I.end;I.options.locations&&
(this.loc=new ea(I,I.startLoc,I.endLoc));I.options.ranges&&(this.range=[I.start,I.end])};Zb=Sa.prototype;Zb.next=function(I){!I&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword);if(this.options.onToken)this.options.onToken(new yi(this));this.lastTokEnd=this.end;this.lastTokStart=this.start;this.lastTokEndLoc=this.endLoc;this.lastTokStartLoc=this.startLoc;this.nextToken()};Zb.getToken=function(){this.next();return new yi(this)};
"undefined"!==typeof Symbol&&(Zb[Symbol.iterator]=function(){var I=this;return{next:function(){var Na=I.getToken();return{done:Na.type===Oa.eof,value:Na}}}});Zb.curContext=function(){return this.context[this.context.length-1]};Zb.nextToken=function(){var I=this.curContext();I&&I.preserveSpace||this.skipSpace();this.start=this.pos;this.options.locations&&(this.startLoc=this.curPosition());if(this.pos>=this.input.length)return this.finishToken(Oa.eof);if(I.override)return I.override(this);this.readToken(this.fullCharCodeAtPos())};
Zb.readToken=function(I){return c(I,6<=this.options.ecmaVersion)||92===I?this.readWord():this.getTokenFromCode(I)};Zb.fullCharCodeAtPos=function(){var I=this.input.charCodeAt(this.pos);if(55295>=I||57344<=I)return I;var Na=this.input.charCodeAt(this.pos+1);return(I<<10)+Na-56613888};Zb.skipBlockComment=function(){var I=this.options.onComment&&this.curPosition(),Na=this.pos,z=this.input.indexOf("*/",this.pos+=2);-1===z&&this.raise(this.pos-2,"Unterminated comment");this.pos=z+2;if(this.options.locations){la.lastIndex=
Na;for(var X;(X=la.exec(this.input))&&X.index<this.pos;)++this.curLine,this.lineStart=X.index+X[0].length}if(this.options.onComment)this.options.onComment(!0,this.input.slice(Na+2,z),Na,this.pos,I,this.curPosition())};Zb.skipLineComment=function(I){for(var Na=this.pos,z=this.options.onComment&&this.curPosition(),X=this.input.charCodeAt(this.pos+=I);this.pos<this.input.length&&!f(X);)X=this.input.charCodeAt(++this.pos);if(this.options.onComment)this.options.onComment(!1,this.input.slice(Na+I,this.pos),
Na,this.pos,z,this.curPosition())};Zb.skipSpace=function(){a:for(;this.pos<this.input.length;){var I=this.input.charCodeAt(this.pos);switch(I){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos;this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;default:if(8<
I&&14>I||5760<=I&&$a.test(String.fromCharCode(I)))++this.pos;else break a}}};Zb.finishToken=function(I,Na){this.end=this.pos;this.options.locations&&(this.endLoc=this.curPosition());var z=this.type;this.type=I;this.value=Na;this.updateContext(z)};Zb.readToken_dot=function(){var I=this.input.charCodeAt(this.pos+1);if(48<=I&&57>=I)return this.readNumber(!0);var Na=this.input.charCodeAt(this.pos+2);if(6<=this.options.ecmaVersion&&46===I&&46===Na)return this.pos+=3,this.finishToken(Oa.ellipsis);++this.pos;
return this.finishToken(Oa.dot)};Zb.readToken_slash=function(){var I=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===I?this.finishOp(Oa.assign,2):this.finishOp(Oa.slash,1)};Zb.readToken_mult_modulo_exp=function(I){var Na=this.input.charCodeAt(this.pos+1),z=1,X=42===I?Oa.star:Oa.modulo;7<=this.options.ecmaVersion&&42===I&&42===Na&&(++z,X=Oa.starstar,Na=this.input.charCodeAt(this.pos+2));return 61===Na?this.finishOp(Oa.assign,z+1):this.finishOp(X,z)};Zb.readToken_pipe_amp=
function(I){var Na=this.input.charCodeAt(this.pos+1);return Na===I?12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Oa.assign,3):this.finishOp(124===I?Oa.logicalOR:Oa.logicalAND,2):61===Na?this.finishOp(Oa.assign,2):this.finishOp(124===I?Oa.bitwiseOR:Oa.bitwiseAND,1)};Zb.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(Oa.assign,2):this.finishOp(Oa.bitwiseXOR,1)};Zb.readToken_plus_min=function(I){var Na=this.input.charCodeAt(this.pos+
1);return Na===I?45!==Na||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!md.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(Oa.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===Na?this.finishOp(Oa.assign,2):this.finishOp(Oa.plusMin,1)};Zb.readToken_lt_gt=function(I){var Na=this.input.charCodeAt(this.pos+1),z=1;if(Na===I)return z=62===I&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+z)?this.finishOp(Oa.assign,
z+1):this.finishOp(Oa.bitShift,z);if(33===Na&&60===I&&!this.inModule&&45===this.input.charCodeAt(this.pos+2)&&45===this.input.charCodeAt(this.pos+3))return this.skipLineComment(4),this.skipSpace(),this.nextToken();61===Na&&(z=2);return this.finishOp(Oa.relational,z)};Zb.readToken_eq_excl=function(I){var Na=this.input.charCodeAt(this.pos+1);return 61===Na?this.finishOp(Oa.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===I&&62===Na&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(Oa.arrow)):
this.finishOp(61===I?Oa.eq:Oa.prefix,1)};Zb.readToken_question=function(){var I=this.options.ecmaVersion;if(11<=I){var Na=this.input.charCodeAt(this.pos+1);if(46===Na){var z=this.input.charCodeAt(this.pos+2);if(48>z||57<z)return this.finishOp(Oa.questionDot,2)}if(63===Na)return 12<=I&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Oa.assign,3):this.finishOp(Oa.coalesce,2)}return this.finishOp(Oa.question,1)};Zb.getTokenFromCode=function(I){switch(I){case 46:return this.readToken_dot();case 40:return++this.pos,
this.finishToken(Oa.parenL);case 41:return++this.pos,this.finishToken(Oa.parenR);case 59:return++this.pos,this.finishToken(Oa.semi);case 44:return++this.pos,this.finishToken(Oa.comma);case 91:return++this.pos,this.finishToken(Oa.bracketL);case 93:return++this.pos,this.finishToken(Oa.bracketR);case 123:return++this.pos,this.finishToken(Oa.braceL);case 125:return++this.pos,this.finishToken(Oa.braceR);case 58:return++this.pos,this.finishToken(Oa.colon);case 96:if(6>this.options.ecmaVersion)break;++this.pos;
return this.finishToken(Oa.backQuote);case 48:I=this.input.charCodeAt(this.pos+1);if(120===I||88===I)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===I||79===I)return this.readRadixNumber(8);if(98===I||66===I)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(I);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(I);case 124:case 38:return this.readToken_pipe_amp(I);
case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(I);case 60:case 62:return this.readToken_lt_gt(I);case 61:case 33:return this.readToken_eq_excl(I);case 63:return this.readToken_question();case 126:return this.finishOp(Oa.prefix,1)}this.raise(this.pos,"Unexpected character '"+Ha(I)+"'")};Zb.finishOp=function(I,Na){var z=this.input.slice(this.pos,this.pos+Na);this.pos+=Na;return this.finishToken(I,z)};Zb.readRegexp=function(){for(var I,Na,z=this.pos;;){this.pos>=
this.input.length&&this.raise(z,"Unterminated regular expression");var X=this.input.charAt(this.pos);md.test(X)&&this.raise(z,"Unterminated regular expression");if(I)I=!1;else{if("["===X)Na=!0;else if("]"===X&&Na)Na=!1;else if("/"===X&&!Na)break;I="\\"===X}++this.pos}I=this.input.slice(z,this.pos);++this.pos;X=this.pos;Na=this.readWord1();this.containsEsc&&this.unexpected(X);X=this.regexpState||(this.regexpState=new Aj(this));X.reset(z,I,Na);this.validateRegExpFlags(X);this.validateRegExpPattern(X);
z=null;try{z=new RegExp(I,Na)}catch(rb){}return this.finishToken(Oa.regexp,{pattern:I,flags:Na,value:z})};Zb.readInt=function(I,Na,z){var X=12<=this.options.ecmaVersion&&void 0===Na;z=z&&48===this.input.charCodeAt(this.pos);for(var rb=this.pos,Wc=0,Sd=0,hf=0,vf=null==Na?Infinity:Na;hf<vf;++hf,++this.pos){var Xf=this.input.charCodeAt(this.pos);if(X&&95===Xf)z&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===Sd&&this.raiseRecoverable(this.pos,
"Numeric separator must be exactly one underscore"),0===hf&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),Sd=Xf;else{var uh=97<=Xf?Xf-97+10:65<=Xf?Xf-65+10:48<=Xf&&57>=Xf?Xf-48:Infinity;if(uh>=I)break;Sd=Xf;Wc=Wc*I+uh}}X&&95===Sd&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits");return this.pos===rb||null!=Na&&this.pos-rb!==Na?null:Wc};Zb.readRadixNumber=function(I){var Na=this.pos;this.pos+=2;var z=this.readInt(I);
null==z&&this.raise(this.start+2,"Expected number in radix "+I);11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(z=ha(this.input.slice(Na,this.pos)),++this.pos):c(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");return this.finishToken(Oa.num,z)};Zb.readNumber=function(I){var Na=this.pos;I||null!==this.readInt(10,void 0,!0)||this.raise(Na,"Invalid number");var z=2<=this.pos-Na&&48===this.input.charCodeAt(Na);z&&this.strict&&this.raise(Na,"Invalid number");
var X=this.input.charCodeAt(this.pos);if(!z&&!I&&11<=this.options.ecmaVersion&&110===X)return z=ha(this.input.slice(Na,this.pos)),++this.pos,c(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Oa.num,z);z&&/[89]/.test(this.input.slice(Na,this.pos))&&(z=!1);46!==X||z||(++this.pos,this.readInt(10),X=this.input.charCodeAt(this.pos));69!==X&&101!==X||z||(X=this.input.charCodeAt(++this.pos),43!==X&&45!==X||++this.pos,null===this.readInt(10)&&this.raise(Na,
"Invalid number"));c(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");I=this.input.slice(Na,this.pos);z=z?parseInt(I,8):parseFloat(I.replace(/_/g,""));return this.finishToken(Oa.num,z)};Zb.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>this.options.ecmaVersion&&this.unexpected();var I=++this.pos;var Na=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos;1114111<Na&&this.invalidStringToken(I,"Code point out of bounds")}else Na=
this.readHexChar(4);return Na};Zb.readString=function(I){for(var Na="",z=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var X=this.input.charCodeAt(this.pos);if(X===I)break;92===X?(Na+=this.input.slice(z,this.pos),Na+=this.readEscapedChar(!1),z=this.pos):(f(X,10<=this.options.ecmaVersion)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}Na+=this.input.slice(z,this.pos++);return this.finishToken(Oa.string,Na)};var dj={};Zb.tryReadTemplateToken=
function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(I){if(I===dj)this.readInvalidTemplateToken();else throw I;}this.inTemplateElement=!1};Zb.invalidStringToken=function(I,Na){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw dj;this.raise(I,Na)};Zb.readTmplToken=function(){for(var I="",Na=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var z=this.input.charCodeAt(this.pos);if(96===z||36===z&&123===this.input.charCodeAt(this.pos+1)){if(this.pos===
this.start&&(this.type===Oa.template||this.type===Oa.invalidTemplate)){if(36===z)return this.pos+=2,this.finishToken(Oa.dollarBraceL);++this.pos;return this.finishToken(Oa.backQuote)}I+=this.input.slice(Na,this.pos);return this.finishToken(Oa.template,I)}if(92===z)I+=this.input.slice(Na,this.pos),I+=this.readEscapedChar(!0),Na=this.pos;else if(f(z)){I+=this.input.slice(Na,this.pos);++this.pos;switch(z){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:I+="\n";break;default:I+=String.fromCharCode(z)}this.options.locations&&
(++this.curLine,this.lineStart=this.pos);Na=this.pos}else++this.pos}};Zb.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case "\\":++this.pos;break;case "$":if("{"!==this.input[this.pos+1])break;case "`":return this.finishToken(Oa.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Zb.readEscapedChar=function(I){var Na=this.input.charCodeAt(++this.pos);++this.pos;switch(Na){case 110:return"\n";
case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Ha(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),I)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),
null;default:if(48<=Na&&55>=Na){var z=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],X=parseInt(z,8);255<X&&(z=z.slice(0,-1),X=parseInt(z,8));this.pos+=z.length-1;Na=this.input.charCodeAt(this.pos);"0"===z&&56!==Na&&57!==Na||!this.strict&&!I||this.invalidStringToken(this.pos-1-z.length,I?"Octal literal in template string":"Octal literal in strict mode");return String.fromCharCode(X)}return f(Na)?"":String.fromCharCode(Na)}};Zb.readHexChar=function(I){var Na=this.pos;I=this.readInt(16,I);null===
I&&this.invalidStringToken(Na,"Bad character escape sequence");return I};Zb.readWord1=function(){this.containsEsc=!1;for(var I="",Na=!0,z=this.pos,X=6<=this.options.ecmaVersion;this.pos<this.input.length;){var rb=this.fullCharCodeAtPos();if(g(rb,X))this.pos+=65535>=rb?1:2;else if(92===rb)this.containsEsc=!0,I+=this.input.slice(z,this.pos),z=this.pos,117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,rb=this.readCodePoint(),
(Na?c:g)(rb,X)||this.invalidStringToken(z,"Invalid Unicode escape"),I+=Ha(rb),z=this.pos;else break;Na=!1}return I+this.input.slice(z,this.pos)};Zb.readWord=function(){var I=this.readWord1(),Na=Oa.name;this.keywords.test(I)&&(Na=$c[I]);return this.finishToken(Na,I)};Sa.acorn={Parser:Sa,version:"8.0.4",defaultOptions:Mb,Position:V,SourceLocation:ea,getLineInfo:n,Node:pg,TokenType:wc,tokTypes:Oa,keywordTypes:$c,TokContext:jc,tokContexts:Yg,isIdentifierChar:g,isIdentifierStart:c,Token:yi,isNewLine:f,
lineBreak:md,lineBreakG:la,nonASCIIwhitespace:$a};l.Node=pg;l.Parser=Sa;l.Position=V;l.SourceLocation=ea;l.TokContext=jc;l.Token=yi;l.TokenType=wc;l.defaultOptions=Mb;l.getLineInfo=n;l.isIdentifierChar=g;l.isIdentifierStart=c;l.isNewLine=f;l.keywordTypes=$c;l.lineBreak=md;l.lineBreakG=la;l.nonASCIIwhitespace=$a;l.parse=function(I,Na){return Sa.parse(I,Na)};l.parseExpressionAt=function(I,Na,z){return Sa.parseExpressionAt(I,Na,z)};l.tokContexts=Yg;l.tokTypes=Oa;l.tokenizer=function(I,Na){return Sa.tokenizer(I,
Na)};l.version="8.0.4";Object.defineProperty(l,"__esModule",{value:!0})})})(ql.acornModule,ql.acorn);return ql.acorn}function wm(){if(rl.hasRequiredAcorn)return rl.acorn;rl.hasRequiredAcorn=1;(function(e,h){(function(l,b){b(h)})(rl.commonjsHelpers.commonjsGlobal,function(l){function b(z,X){for(var rb=65536,Wc=0;Wc<X.length;Wc+=2){rb+=X[Wc];if(rb>z)return!1;rb+=X[Wc+1];if(rb>=z)return!0}}function c(z,X){return 65>z?36===z:91>z?!0:97>z?95===z:123>z?!0:65535>=z?170<=z&&tc.test(String.fromCharCode(z)):
!1===X?!1:b(z,wc)}function g(z,X){return 48>z?36===z:58>z?!0:65>z?!1:91>z?!0:97>z?95===z:123>z?!0:65535>=z?170<=z&&Qb.test(String.fromCharCode(z)):!1===X?!1:b(z,wc)||b(z,Zb)}function a(z,X){return new $c(z,{beforeExpr:!0,binop:X})}function d(z,X){void 0===X&&(X={});X.keyword=z;return md[z]=new $c(z,X)}function f(z){return 10===z||13===z||8232===z||8233===z}function k(z){return new RegExp("^(?:"+z.replace(/ /g,"|")+")$")}function n(z,X){for(var rb=1,Wc=0;;){dd.lastIndex=Wc;var Sd=dd.exec(z);if(Sd&&
Sd.index<X)++rb,Wc=Sd.index+Sd[0].length;else return new Mb(rb,X-Wc)}}function p(z){var X={},rb;for(rb in Sa)X[rb]=z&&Aa.call(z,rb)?z[rb]:Sa[rb];"latest"===X.ecmaVersion?X.ecmaVersion=1E8:null==X.ecmaVersion?(!S&&"object"===("undefined"===typeof console?"undefined":Jc(console))&&console.warn&&(S=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),X.ecmaVersion=11):2015<=X.ecmaVersion&&(X.ecmaVersion-=2009);null==X.allowReserved&&
(X.allowReserved=5>X.ecmaVersion);if(ea(X.onToken)){var Wc=X.onToken;X.onToken=function(Sd){return Wc.push(Sd)}}ea(X.onComment)&&(X.onComment=q(X,X.onComment));return X}function q(z,X){return function(rb,Wc,Sd,hf,vf,Xf){rb={type:rb?"Block":"Line",value:Wc,start:Sd,end:hf};z.locations&&(rb.loc=new U(this,vf,Xf));z.ranges&&(rb.range=[Sd,hf]);X.push(rb)}}function r(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function t(z,X){var rb=z.key;
return!z.computed&&("Identifier"===rb.type&&rb.name===X||"Literal"===rb.type&&rb.value===X)}function w(z){return"MemberExpression"===z.type&&"PrivateIdentifier"===z.property.type||"ChainExpression"===z.type&&w(z.expression)}function x(z,X,rb,Wc){z.type=X;z.end=rb;this.options.locations&&(z.loc.end=Wc);this.options.ranges&&(z.range[1]=rb);return z}function B(z){z=yi[z]={binary:k(Xj[z]+" Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
nonBinary:{General_Category:k("Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
Script:k(Aj[z])}};z.nonBinary.Script_Extensions=z.nonBinary.Script;z.nonBinary.gc=z.nonBinary.General_Category;z.nonBinary.sc=z.nonBinary.Script;z.nonBinary.scx=z.nonBinary.Script_Extensions}function D(z){if(65535>=z)return String.fromCharCode(z);z-=65536;return String.fromCharCode((z>>10)+55296,(z&1023)+56320)}function F(z){return 36===z||40<=z&&43>=z||46===z||63===z||91<=z&&94>=z||123<=z&&125>=z}function L(z){return 65<=z&&90>=z||97<=z&&122>=z||95===z}function G(z){return L(z)||oa(z)}function oa(z){return 48<=
z&&57>=z}function ha(z){return 48<=z&&57>=z||65<=z&&70>=z||97<=z&&102>=z}function Ha(z){return 65<=z&&70>=z?10+(z-65):97<=z&&102>=z?10+(z-97):z-48}function Va(z){return"function"!==typeof BigInt?null:BigInt(z.replace(/_/g,""))}function hc(z){if(65535>=z)return String.fromCharCode(z);z-=65536;return String.fromCharCode((z>>10)+55296,(z&1023)+56320)}var qc={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",
5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},jc={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this","5module":"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this export import",
6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},Ya=/^in(stanceof)?$/,xa="\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
tc=new RegExp("["+xa+"]"),Qb=new RegExp("["+xa+"\u200c\u200d\u00b7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]");
xa=null;var wc=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,
19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,
6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],Zb=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,
2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239],$c=function(z,X){void 0===X&&(X={});this.label=
z;this.keyword=X.keyword;this.beforeExpr=!!X.beforeExpr;this.startsExpr=!!X.startsExpr;this.isLoop=!!X.isLoop;this.isAssign=!!X.isAssign;this.prefix=!!X.prefix;this.postfix=!!X.postfix;this.binop=X.binop||null;this.updateContext=null};xa={beforeExpr:!0};var Oa={startsExpr:!0},md={},la={num:new $c("num",Oa),regexp:new $c("regexp",Oa),string:new $c("string",Oa),name:new $c("name",Oa),privateId:new $c("privateId",Oa),eof:new $c("eof"),bracketL:new $c("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new $c("]"),
braceL:new $c("{",{beforeExpr:!0,startsExpr:!0}),braceR:new $c("}"),parenL:new $c("(",{beforeExpr:!0,startsExpr:!0}),parenR:new $c(")"),comma:new $c(",",xa),semi:new $c(";",xa),colon:new $c(":",xa),dot:new $c("."),question:new $c("?",xa),questionDot:new $c("?."),arrow:new $c("=>",xa),template:new $c("template"),invalidTemplate:new $c("invalidTemplate"),ellipsis:new $c("...",xa),backQuote:new $c("`",Oa),dollarBraceL:new $c("${",{beforeExpr:!0,startsExpr:!0}),eq:new $c("=",{beforeExpr:!0,isAssign:!0}),
assign:new $c("_=",{beforeExpr:!0,isAssign:!0}),incDec:new $c("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new $c("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:a("||",1),logicalAND:a("&&",2),bitwiseOR:a("|",3),bitwiseXOR:a("^",4),bitwiseAND:a("&",5),equality:a("==/!=/===/!==",6),relational:a("</>/<=/>=",7),bitShift:a("<</>>/>>>",8),plusMin:new $c("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:a("%",10),star:a("*",10),slash:a("/",10),starstar:new $c("**",{beforeExpr:!0}),
coalesce:a("??",1),_break:d("break"),_case:d("case",xa),_catch:d("catch"),_continue:d("continue"),_debugger:d("debugger"),_default:d("default",xa),_do:d("do",{isLoop:!0,beforeExpr:!0}),_else:d("else",xa),_finally:d("finally"),_for:d("for",{isLoop:!0}),_function:d("function",Oa),_if:d("if"),_return:d("return",xa),_switch:d("switch"),_throw:d("throw",xa),_try:d("try"),_var:d("var"),_const:d("const"),_while:d("while",{isLoop:!0}),_with:d("with"),_new:d("new",{beforeExpr:!0,startsExpr:!0}),_this:d("this",
Oa),_super:d("super",Oa),_class:d("class",Oa),_extends:d("extends",xa),_export:d("export"),_import:d("import",Oa),_null:d("null",Oa),_true:d("true",Oa),_false:d("false",Oa),_in:d("in",{beforeExpr:!0,binop:7}),_instanceof:d("instanceof",{beforeExpr:!0,binop:7}),_typeof:d("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:d("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:d("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},$a=/\r\n?|\n|\u2028|\u2029/,dd=new RegExp($a.source,"g"),Kd=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,
ra=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g;xa=Object.prototype;var Aa=xa.hasOwnProperty,V=xa.toString,ea=Array.isArray||function(z){return"[object Array]"===V.call(z)},Mb=function(z,X){this.line=z;this.column=X};Mb.prototype.offset=function(z){return new Mb(this.line,this.column+z)};var U=function(z,X,rb){this.start=X;this.end=rb;null!==z.sourceFile&&(this.source=z.sourceFile)},Sa={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,
allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},S=!1,Sc=function(z,X,rb){this.options=z=p(z);this.sourceFile=z.sourceFile;this.keywords=k(jc[6<=z.ecmaVersion?6:"module"===z.sourceType?"5module":5]);var Wc="";!0!==z.allowReserved&&(Wc=qc[6<=z.ecmaVersion?6:5===z.ecmaVersion?5:3],"module"===z.sourceType&&(Wc+=" await"));
this.reservedWords=k(Wc);Wc=(Wc?Wc+" ":"")+qc.strict;this.reservedWordsStrict=k(Wc);this.reservedWordsStrictBind=k(Wc+" "+qc.strictBind);this.input=String(X);this.containsEsc=!1;rb?(this.pos=rb,this.lineStart=this.input.lastIndexOf("\n",rb-1)+1,this.curLine=this.input.slice(0,this.lineStart).split($a).length):(this.pos=this.lineStart=0,this.curLine=1);this.type=la.eof;this.value=null;this.start=this.end=this.pos;this.startLoc=this.endLoc=this.curPosition();this.lastTokEndLoc=this.lastTokStartLoc=
null;this.lastTokStart=this.lastTokEnd=this.pos;this.context=this.initialContext();this.exprAllowed=!0;this.strict=(this.inModule="module"===z.sourceType)||this.strictDirective(this.pos);this.potentialArrowAt=-1;this.potentialArrowInForAwait=!1;this.yieldPos=this.awaitPos=this.awaitIdentPos=0;this.labels=[];this.undefinedExports=Object.create(null);0===this.pos&&z.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2);this.scopeStack=[];this.enterScope(1);this.regexpState=null;this.privateNameStack=
[]};xa={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Sc.prototype.parse=function(){var z=this.options.program||this.startNode();this.nextToken();return this.parseTopLevel(z)};xa.inFunction.get=function(){return 0<(this.currentVarScope().flags&2)};xa.inGenerator.get=
function(){return 0<(this.currentVarScope().flags&8)&&!this.currentVarScope().inClassFieldInit};xa.inAsync.get=function(){return 0<(this.currentVarScope().flags&4)&&!this.currentVarScope().inClassFieldInit};xa.canAwait.get=function(){for(var z=this.scopeStack.length-1;0<=z;z--){var X=this.scopeStack[z];if(X.inClassFieldInit||X.flags&256)return!1;if(X.flags&2)return 0<(X.flags&4)}return this.inModule&&13<=this.options.ecmaVersion||this.options.allowAwaitOutsideFunction};xa.allowSuper.get=function(){var z=
this.currentThisScope(),X=z.inClassFieldInit;return 0<(z.flags&64)||X||this.options.allowSuperOutsideMethod};xa.allowDirectSuper.get=function(){return 0<(this.currentThisScope().flags&128)};xa.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};xa.allowNewDotTarget.get=function(){var z=this.currentThisScope(),X=z.inClassFieldInit;return 0<(z.flags&258)||X};xa.inClassStaticBlock.get=function(){return 0<(this.currentVarScope().flags&256)};Sc.extend=function(){for(var z=
[],X=arguments.length;X--;)z[X]=arguments[X];X=this;for(var rb=0;rb<z.length;rb++)X=z[rb](X);return X};Sc.parse=function(z,X){return(new this(X,z)).parse()};Sc.parseExpressionAt=function(z,X,rb){z=new this(rb,z,X);z.nextToken();return z.parseExpression()};Sc.tokenizer=function(z,X){return new this(X,z)};Object.defineProperties(Sc.prototype,xa);xa=Sc.prototype;var xd=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;xa.strictDirective=function(z){for(;;){ra.lastIndex=z;z+=ra.exec(this.input)[0].length;
var X=xd.exec(this.input.slice(z));if(!X)return!1;if("use strict"===(X[1]||X[2])){ra.lastIndex=z+X[0].length;z=ra.exec(this.input);X=z.index+z[0].length;var rb=this.input.charAt(X);return";"===rb||"}"===rb||$a.test(z[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(rb)||"!"===rb&&"="===this.input.charAt(X+1))}z+=X[0].length;ra.lastIndex=z;z+=ra.exec(this.input)[0].length;";"===this.input[z]&&z++}};xa.eat=function(z){return this.type===z?(this.next(),!0):!1};xa.isContextual=function(z){return this.type===la.name&&
this.value===z&&!this.containsEsc};xa.eatContextual=function(z){if(!this.isContextual(z))return!1;this.next();return!0};xa.expectContextual=function(z){this.eatContextual(z)||this.unexpected()};xa.canInsertSemicolon=function(){return this.type===la.eof||this.type===la.braceR||$a.test(this.input.slice(this.lastTokEnd,this.start))};xa.insertSemicolon=function(){if(this.canInsertSemicolon()){if(this.options.onInsertedSemicolon)this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc);return!0}};
xa.semicolon=function(){this.eat(la.semi)||this.insertSemicolon()||this.unexpected()};xa.afterTrailingComma=function(z,X){if(this.type===z){if(this.options.onTrailingComma)this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc);X||this.next();return!0}};xa.expect=function(z){this.eat(z)||this.unexpected()};xa.unexpected=function(z){this.raise(null!=z?z:this.start,"Unexpected token")};xa.checkPatternErrors=function(z,X){z&&(-1<z.trailingComma&&this.raiseRecoverable(z.trailingComma,"Comma is not permitted after the rest element"),
z=X?z.parenthesizedAssign:z.parenthesizedBind,-1<z&&this.raiseRecoverable(z,"Parenthesized pattern"))};xa.checkExpressionErrors=function(z,X){if(!z)return!1;var rb=z.shorthandAssign;z=z.doubleProto;if(!X)return 0<=rb||0<=z;0<=rb&&this.raise(rb,"Shorthand property assignments are valid only in destructuring patterns");0<=z&&this.raiseRecoverable(z,"Redefinition of __proto__ property")};xa.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,
"Yield expression cannot be a default value");this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};xa.isSimpleAssignTarget=function(z){return"ParenthesizedExpression"===z.type?this.isSimpleAssignTarget(z.expression):"Identifier"===z.type||"MemberExpression"===z.type};xa=Sc.prototype;xa.parseTopLevel=function(z){var X=Object.create(null);z.body||(z.body=[]);for(;this.type!==la.eof;){var rb=this.parseStatement(null,!0,X);z.body.push(rb)}if(this.inModule)for(X=0,rb=
Object.keys(this.undefinedExports);X<rb.length;X+=1){var Wc=rb[X];this.raiseRecoverable(this.undefinedExports[Wc].start,"Export '"+Wc+"' is not defined")}this.adaptDirectivePrologue(z.body);this.next();z.sourceType=this.options.sourceType;return this.finishNode(z,"Program")};var Ae={kind:"loop"},ee={kind:"switch"};xa.isLet=function(z){if(6>this.options.ecmaVersion||!this.isContextual("let"))return!1;ra.lastIndex=this.pos;var X=ra.exec(this.input);X=this.pos+X[0].length;var rb=this.input.charCodeAt(X);
if(91===rb||92===rb||55295<rb&&56320>rb)return!0;if(z)return!1;if(123===rb)return!0;if(c(rb,!0)){for(z=X+1;g(rb=this.input.charCodeAt(z),!0);)++z;if(92===rb||55295<rb&&56320>rb)return!0;z=this.input.slice(X,z);if(!Ya.test(z))return!0}return!1};xa.isAsyncFunction=function(){if(8>this.options.ecmaVersion||!this.isContextual("async"))return!1;ra.lastIndex=this.pos;var z=ra.exec(this.input);z=this.pos+z[0].length;var X;return!$a.test(this.input.slice(this.pos,z))&&"function"===this.input.slice(z,z+8)&&
(z+8===this.input.length||!(g(X=this.input.charCodeAt(z+8))||55295<X&&56320>X))};xa.parseStatement=function(z,X,rb){var Wc=this.type,Sd=this.startNode();if(this.isLet(z)){Wc=la._var;var hf="let"}switch(Wc){case la._break:case la._continue:return this.parseBreakContinueStatement(Sd,Wc.keyword);case la._debugger:return this.parseDebuggerStatement(Sd);case la._do:return this.parseDoStatement(Sd);case la._for:return this.parseForStatement(Sd);case la._function:return z&&(this.strict||"if"!==z&&"label"!==
z)&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(Sd,!1,!z);case la._class:return z&&this.unexpected(),this.parseClass(Sd,!0);case la._if:return this.parseIfStatement(Sd);case la._return:return this.parseReturnStatement(Sd);case la._switch:return this.parseSwitchStatement(Sd);case la._throw:return this.parseThrowStatement(Sd);case la._try:return this.parseTryStatement(Sd);case la._const:case la._var:return hf=hf||this.value,z&&"var"!==hf&&this.unexpected(),this.parseVarStatement(Sd,
hf);case la._while:return this.parseWhileStatement(Sd);case la._with:return this.parseWithStatement(Sd);case la.braceL:return this.parseBlock(!0,Sd);case la.semi:return this.parseEmptyStatement(Sd);case la._export:case la._import:if(10<this.options.ecmaVersion&&Wc===la._import&&(ra.lastIndex=this.pos,z=ra.exec(this.input),z=this.input.charCodeAt(this.pos+z[0].length),40===z||46===z))return this.parseExpressionStatement(Sd,this.parseExpression());this.options.allowImportExportEverywhere||(X||this.raise(this.start,
"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"));return Wc===la._import?this.parseImport(Sd):this.parseExport(Sd,rb);default:if(this.isAsyncFunction())return z&&this.unexpected(),this.next(),this.parseFunctionStatement(Sd,!0,!z);X=this.value;rb=this.parseExpression();return Wc===la.name&&"Identifier"===rb.type&&this.eat(la.colon)?this.parseLabeledStatement(Sd,X,rb,z):this.parseExpressionStatement(Sd,
rb)}};xa.parseBreakContinueStatement=function(z,X){var rb="break"===X;this.next();this.eat(la.semi)||this.insertSemicolon()?z.label=null:this.type!==la.name?this.unexpected():(z.label=this.parseIdent(),this.semicolon());for(var Wc=0;Wc<this.labels.length;++Wc){var Sd=this.labels[Wc];if(null==z.label||Sd.name===z.label.name){if(null!=Sd.kind&&(rb||"loop"===Sd.kind))break;if(z.label&&rb)break}}Wc===this.labels.length&&this.raise(z.start,"Unsyntactic "+X);return this.finishNode(z,rb?"BreakStatement":
"ContinueStatement")};xa.parseDebuggerStatement=function(z){this.next();this.semicolon();return this.finishNode(z,"DebuggerStatement")};xa.parseDoStatement=function(z){this.next();this.labels.push(Ae);z.body=this.parseStatement("do");this.labels.pop();this.expect(la._while);z.test=this.parseParenExpression();6<=this.options.ecmaVersion?this.eat(la.semi):this.semicolon();return this.finishNode(z,"DoWhileStatement")};xa.parseForStatement=function(z){this.next();var X=9<=this.options.ecmaVersion&&this.canAwait&&
this.eatContextual("await")?this.lastTokStart:-1;this.labels.push(Ae);this.enterScope(0);this.expect(la.parenL);if(this.type===la.semi)return-1<X&&this.unexpected(X),this.parseFor(z,null);var rb=this.isLet();if(this.type===la._var||this.type===la._const||rb){var Wc=this.startNode();rb=rb?"let":this.value;this.next();this.parseVar(Wc,!0,rb);this.finishNode(Wc,"VariableDeclaration");if((this.type===la._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===Wc.declarations.length)return 9<=this.options.ecmaVersion&&
(this.type===la._in?-1<X&&this.unexpected(X):z.await=-1<X),this.parseForIn(z,Wc);-1<X&&this.unexpected(X);return this.parseFor(z,Wc)}Wc=this.isContextual("let");rb=!1;var Sd=new r,hf=this.parseExpression(-1<X?"await":!0,Sd);if(this.type===la._in||(rb=6<=this.options.ecmaVersion&&this.isContextual("of")))return 9<=this.options.ecmaVersion&&(this.type===la._in?-1<X&&this.unexpected(X):z.await=-1<X),Wc&&rb&&this.raise(hf.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(hf,
!1,Sd),this.checkLValPattern(hf),this.parseForIn(z,hf);this.checkExpressionErrors(Sd,!0);-1<X&&this.unexpected(X);return this.parseFor(z,hf)};xa.parseFunctionStatement=function(z,X,rb){this.next();return this.parseFunction(z,Mf|(rb?0:Tg),!1,X)};xa.parseIfStatement=function(z){this.next();z.test=this.parseParenExpression();z.consequent=this.parseStatement("if");z.alternate=this.eat(la._else)?this.parseStatement("if"):null;return this.finishNode(z,"IfStatement")};xa.parseReturnStatement=function(z){this.inFunction||
this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function");this.next();this.eat(la.semi)||this.insertSemicolon()?z.argument=null:(z.argument=this.parseExpression(),this.semicolon());return this.finishNode(z,"ReturnStatement")};xa.parseSwitchStatement=function(z){this.next();z.discriminant=this.parseParenExpression();z.cases=[];this.expect(la.braceL);this.labels.push(ee);this.enterScope(0);for(var X,rb=!1;this.type!==la.braceR;)if(this.type===la._case||this.type===
la._default){var Wc=this.type===la._case;X&&this.finishNode(X,"SwitchCase");z.cases.push(X=this.startNode());X.consequent=[];this.next();Wc?X.test=this.parseExpression():(rb&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),rb=!0,X.test=null);this.expect(la.colon)}else X||this.unexpected(),X.consequent.push(this.parseStatement(null));this.exitScope();X&&this.finishNode(X,"SwitchCase");this.next();this.labels.pop();return this.finishNode(z,"SwitchStatement")};xa.parseThrowStatement=
function(z){this.next();$a.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw");z.argument=this.parseExpression();this.semicolon();return this.finishNode(z,"ThrowStatement")};var Fe=[];xa.parseTryStatement=function(z){this.next();z.block=this.parseBlock();z.handler=null;if(this.type===la._catch){var X=this.startNode();this.next();if(this.eat(la.parenL)){X.param=this.parseBindingAtom();var rb="Identifier"===X.param.type;this.enterScope(rb?32:
0);this.checkLValPattern(X.param,rb?4:2);this.expect(la.parenR)}else 10>this.options.ecmaVersion&&this.unexpected(),X.param=null,this.enterScope(0);X.body=this.parseBlock(!1);this.exitScope();z.handler=this.finishNode(X,"CatchClause")}z.finalizer=this.eat(la._finally)?this.parseBlock():null;z.handler||z.finalizer||this.raise(z.start,"Missing catch or finally clause");return this.finishNode(z,"TryStatement")};xa.parseVarStatement=function(z,X){this.next();this.parseVar(z,!1,X);this.semicolon();return this.finishNode(z,
"VariableDeclaration")};xa.parseWhileStatement=function(z){this.next();z.test=this.parseParenExpression();this.labels.push(Ae);z.body=this.parseStatement("while");this.labels.pop();return this.finishNode(z,"WhileStatement")};xa.parseWithStatement=function(z){this.strict&&this.raise(this.start,"'with' in strict mode");this.next();z.object=this.parseParenExpression();z.body=this.parseStatement("with");return this.finishNode(z,"WithStatement")};xa.parseEmptyStatement=function(z){this.next();return this.finishNode(z,
"EmptyStatement")};xa.parseLabeledStatement=function(z,X,rb,Wc){for(var Sd=0,hf=this.labels;Sd<hf.length;Sd+=1)hf[Sd].name===X&&this.raise(rb.start,"Label '"+X+"' is already declared");Sd=this.type.isLoop?"loop":this.type===la._switch?"switch":null;for(hf=this.labels.length-1;0<=hf;hf--){var vf=this.labels[hf];if(vf.statementStart===z.start)vf.statementStart=this.start,vf.kind=Sd;else break}this.labels.push({name:X,kind:Sd,statementStart:this.start});z.body=this.parseStatement(Wc?-1===Wc.indexOf("label")?
Wc+"label":Wc:"label");this.labels.pop();z.label=rb;return this.finishNode(z,"LabeledStatement")};xa.parseExpressionStatement=function(z,X){z.expression=X;this.semicolon();return this.finishNode(z,"ExpressionStatement")};xa.parseBlock=function(z,X,rb){void 0===z&&(z=!0);void 0===X&&(X=this.startNode());X.body=[];this.expect(la.braceL);for(z&&this.enterScope(0);this.type!==la.braceR;){var Wc=this.parseStatement(null);X.body.push(Wc)}rb&&(this.strict=!1);this.next();z&&this.exitScope();return this.finishNode(X,
"BlockStatement")};xa.parseFor=function(z,X){z.init=X;this.expect(la.semi);z.test=this.type===la.semi?null:this.parseExpression();this.expect(la.semi);z.update=this.type===la.parenR?null:this.parseExpression();this.expect(la.parenR);z.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(z,"ForStatement")};xa.parseForIn=function(z,X){var rb=this.type===la._in;this.next();"VariableDeclaration"===X.type&&null!=X.declarations[0].init&&(!rb||8>this.options.ecmaVersion||
this.strict||"var"!==X.kind||"Identifier"!==X.declarations[0].id.type)&&this.raise(X.start,(rb?"for-in":"for-of")+" loop variable declaration may not have an initializer");z.left=X;z.right=rb?this.parseExpression():this.parseMaybeAssign();this.expect(la.parenR);z.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(z,rb?"ForInStatement":"ForOfStatement")};xa.parseVar=function(z,X,rb){z.declarations=[];for(z.kind=rb;;){var Wc=this.startNode();this.parseVarId(Wc,
rb);this.eat(la.eq)?Wc.init=this.parseMaybeAssign(X):"const"!==rb||this.type===la._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"===Wc.id.type||X&&(this.type===la._in||this.isContextual("of"))?Wc.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected();z.declarations.push(this.finishNode(Wc,"VariableDeclarator"));if(!this.eat(la.comma))break}return z};xa.parseVarId=function(z,X){z.id=this.parseBindingAtom();this.checkLValPattern(z.id,
"var"===X?1:2,!1)};var Mf=1,Tg=2;xa.parseFunction=function(z,X,rb,Wc,Sd){this.initFunction(z);if(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!Wc)this.type===la.star&&X&Tg&&this.unexpected(),z.generator=this.eat(la.star);8<=this.options.ecmaVersion&&(z.async=!!Wc);X&Mf&&(z.id=X&4&&this.type!==la.name?null:this.parseIdent(),!z.id||X&Tg||this.checkLValSimple(z.id,this.strict||z.generator||z.async?this.treatFunctionsAsVar?1:2:3));Wc=this.yieldPos;var hf=this.awaitPos,vf=this.awaitIdentPos;
this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(z.async?4:0)|(z.generator?8:0));X&Mf||(z.id=this.type===la.name?this.parseIdent():null);this.parseFunctionParams(z);this.parseFunctionBody(z,rb,!1,Sd);this.yieldPos=Wc;this.awaitPos=hf;this.awaitIdentPos=vf;return this.finishNode(z,X&Mf?"FunctionDeclaration":"FunctionExpression")};xa.parseFunctionParams=function(z){this.expect(la.parenL);z.params=this.parseBindingList(la.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams()};
xa.parseClass=function(z,X){this.next();var rb=this.strict;this.strict=!0;this.parseClassId(z,X);this.parseClassSuper(z);var Wc=this.enterClassBody(),Sd=this.startNode(),hf=!1;Sd.body=[];for(this.expect(la.braceL);this.type!==la.braceR;){var vf=this.parseClassElement(null!==z.superClass);if(vf)if(Sd.body.push(vf),"MethodDefinition"===vf.type&&"constructor"===vf.kind)hf&&this.raise(vf.start,"Duplicate constructor in the same class"),hf=!0;else{var Xf;if(Xf=vf.key&&"PrivateIdentifier"===vf.key.type){Xf=
Wc;var uh=vf.key.name,Yh=Xf[uh],Mi="true";"MethodDefinition"!==vf.type||"get"!==vf.kind&&"set"!==vf.kind||(Mi=(vf["static"]?"s":"i")+vf.kind);"iget"===Yh&&"iset"===Mi||"iset"===Yh&&"iget"===Mi||"sget"===Yh&&"sset"===Mi||"sset"===Yh&&"sget"===Mi?(Xf[uh]="true",Xf=!1):Yh?Xf=!0:(Xf[uh]=Mi,Xf=!1)}Xf&&this.raiseRecoverable(vf.key.start,"Identifier '#"+vf.key.name+"' has already been declared")}}this.strict=rb;this.next();z.body=this.finishNode(Sd,"ClassBody");this.exitClassBody();return this.finishNode(z,
X?"ClassDeclaration":"ClassExpression")};xa.parseClassElement=function(z){if(this.eat(la.semi))return null;var X=this.options.ecmaVersion,rb=this.startNode(),Wc="",Sd=!1,hf=!1,vf="method",Xf=!1;if(this.eatContextual("static")){if(13<=X&&this.eat(la.braceL))return this.parseClassStaticBlock(rb),rb;this.isClassElementNameStart()||this.type===la.star?Xf=!0:Wc="static"}rb["static"]=Xf;!Wc&&8<=X&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==la.star||this.canInsertSemicolon()?
Wc="async":hf=!0);!Wc&&(9<=X||!hf)&&this.eat(la.star)&&(Sd=!0);Wc||hf||Sd||(Xf=this.value,!this.eatContextual("get")&&!this.eatContextual("set"))||(this.isClassElementNameStart()?vf=Xf:Wc=Xf);Wc?(rb.computed=!1,rb.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),rb.key.name=Wc,this.finishNode(rb.key,"Identifier")):this.parseClassElementName(rb);13>X||this.type===la.parenL||"method"!==vf||Sd||hf?(z=(X=!rb["static"]&&t(rb,"constructor"))&&z,X&&"method"!==vf&&this.raise(rb.key.start,"Constructor can't have get/set modifier"),
rb.kind=X?"constructor":vf,this.parseClassMethod(rb,Sd,hf,z)):this.parseClassField(rb);return rb};xa.isClassElementNameStart=function(){return this.type===la.name||this.type===la.privateId||this.type===la.num||this.type===la.string||this.type===la.bracketL||this.type.keyword};xa.parseClassElementName=function(z){this.type===la.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),z.computed=!1,z.key=this.parsePrivateIdent()):this.parsePropertyName(z)};
xa.parseClassMethod=function(z,X,rb,Wc){var Sd=z.key;"constructor"===z.kind?(X&&this.raise(Sd.start,"Constructor can't be a generator"),rb&&this.raise(Sd.start,"Constructor can't be an async method")):z["static"]&&t(z,"prototype")&&this.raise(Sd.start,"Classes may not have a static property named prototype");X=z.value=this.parseMethod(X,rb,Wc);"get"===z.kind&&0!==X.params.length&&this.raiseRecoverable(X.start,"getter should have no params");"set"===z.kind&&1!==X.params.length&&this.raiseRecoverable(X.start,
"setter should have exactly one param");"set"===z.kind&&"RestElement"===X.params[0].type&&this.raiseRecoverable(X.params[0].start,"Setter cannot use rest params");return this.finishNode(z,"MethodDefinition")};xa.parseClassField=function(z){t(z,"constructor")?this.raise(z.key.start,"Classes can't have a field named 'constructor'"):z["static"]&&t(z,"prototype")&&this.raise(z.key.start,"Classes can't have a static field named 'prototype'");if(this.eat(la.eq)){var X=this.currentThisScope(),rb=X.inClassFieldInit;
X.inClassFieldInit=!0;z.value=this.parseMaybeAssign();X.inClassFieldInit=rb}else z.value=null;this.semicolon();return this.finishNode(z,"PropertyDefinition")};xa.parseClassStaticBlock=function(z){z.body=[];var X=this.labels;this.labels=[];for(this.enterScope(320);this.type!==la.braceR;){var rb=this.parseStatement(null);z.body.push(rb)}this.next();this.exitScope();this.labels=X;return this.finishNode(z,"StaticBlock")};xa.parseClassId=function(z,X){this.type===la.name?(z.id=this.parseIdent(),X&&this.checkLValSimple(z.id,
2,!1)):(!0===X&&this.unexpected(),z.id=null)};xa.parseClassSuper=function(z){z.superClass=this.eat(la._extends)?this.parseExprSubscripts(!1):null};xa.enterClassBody=function(){var z={declared:Object.create(null),used:[]};this.privateNameStack.push(z);return z.declared};xa.exitClassBody=function(){var z=this.privateNameStack.pop(),X=z.declared;z=z.used;var rb=this.privateNameStack.length;rb=0===rb?null:this.privateNameStack[rb-1];for(var Wc=0;Wc<z.length;++Wc){var Sd=z[Wc];Aa.call(X,Sd.name)||(rb?
rb.used.push(Sd):this.raiseRecoverable(Sd.start,"Private field '#"+Sd.name+"' must be declared in an enclosing class"))}};xa.parseExport=function(z,X){this.next();if(this.eat(la.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?(z.exported=this.parseIdent(!0),this.checkExport(X,z.exported.name,this.lastTokStart)):z.exported=null),this.expectContextual("from"),this.type!==la.string&&this.unexpected(),z.source=this.parseExprAtom(),this.semicolon(),this.finishNode(z,"ExportAllDeclaration");
if(this.eat(la._default)){this.checkExport(X,"default",this.lastTokStart);var rb;this.type===la._function||(rb=this.isAsyncFunction())?(X=this.startNode(),this.next(),rb&&this.next(),z.declaration=this.parseFunction(X,Mf|4,!1,rb)):this.type===la._class?(rb=this.startNode(),z.declaration=this.parseClass(rb,"nullableID")):(z.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(z,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())z.declaration=this.parseStatement(null),
"VariableDeclaration"===z.declaration.type?this.checkVariableExport(X,z.declaration.declarations):this.checkExport(X,z.declaration.id.name,z.declaration.id.start),z.specifiers=[],z.source=null;else{z.declaration=null;z.specifiers=this.parseExportSpecifiers(X);if(this.eatContextual("from"))this.type!==la.string&&this.unexpected(),z.source=this.parseExprAtom();else{rb=0;for(X=z.specifiers;rb<X.length;rb+=1){var Wc=X[rb];this.checkUnreserved(Wc.local);this.checkLocalExport(Wc.local)}z.source=null}this.semicolon()}return this.finishNode(z,
"ExportNamedDeclaration")};xa.checkExport=function(z,X,rb){z&&(Aa.call(z,X)&&this.raiseRecoverable(rb,"Duplicate export '"+X+"'"),z[X]=!0)};xa.checkPatternExport=function(z,X){var rb=X.type;if("Identifier"===rb)this.checkExport(z,X.name,X.start);else if("ObjectPattern"===rb)for(rb=0,X=X.properties;rb<X.length;rb+=1)this.checkPatternExport(z,X[rb]);else if("ArrayPattern"===rb)for(rb=0,X=X.elements;rb<X.length;rb+=1){var Wc=X[rb];Wc&&this.checkPatternExport(z,Wc)}else"Property"===rb?this.checkPatternExport(z,
X.value):"AssignmentPattern"===rb?this.checkPatternExport(z,X.left):"RestElement"===rb?this.checkPatternExport(z,X.argument):"ParenthesizedExpression"===rb&&this.checkPatternExport(z,X.expression)};xa.checkVariableExport=function(z,X){if(z)for(var rb=0;rb<X.length;rb+=1)this.checkPatternExport(z,X[rb].id)};xa.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()};
xa.parseExportSpecifiers=function(z){var X=[],rb=!0;for(this.expect(la.braceL);!this.eat(la.braceR);){if(rb)rb=!1;else if(this.expect(la.comma),this.afterTrailingComma(la.braceR))break;var Wc=this.startNode();Wc.local=this.parseIdent(!0);Wc.exported=this.eatContextual("as")?this.parseIdent(!0):Wc.local;this.checkExport(z,Wc.exported.name,Wc.exported.start);X.push(this.finishNode(Wc,"ExportSpecifier"))}return X};xa.parseImport=function(z){this.next();this.type===la.string?(z.specifiers=Fe,z.source=
this.parseExprAtom()):(z.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),z.source=this.type===la.string?this.parseExprAtom():this.unexpected());this.semicolon();return this.finishNode(z,"ImportDeclaration")};xa.parseImportSpecifiers=function(){var z=[],X=!0;if(this.type===la.name){var rb=this.startNode();rb.local=this.parseIdent();this.checkLValSimple(rb.local,2);z.push(this.finishNode(rb,"ImportDefaultSpecifier"));if(!this.eat(la.comma))return z}if(this.type===la.star)return X=
this.startNode(),this.next(),this.expectContextual("as"),X.local=this.parseIdent(),this.checkLValSimple(X.local,2),z.push(this.finishNode(X,"ImportNamespaceSpecifier")),z;for(this.expect(la.braceL);!this.eat(la.braceR);){if(X)X=!1;else if(this.expect(la.comma),this.afterTrailingComma(la.braceR))break;rb=this.startNode();rb.imported=this.parseIdent(!0);this.eatContextual("as")?rb.local=this.parseIdent():(this.checkUnreserved(rb.imported),rb.local=rb.imported);this.checkLValSimple(rb.local,2);z.push(this.finishNode(rb,
"ImportSpecifier"))}return z};xa.adaptDirectivePrologue=function(z){for(var X=0;X<z.length&&this.isDirectiveCandidate(z[X]);++X)z[X].directive=z[X].expression.raw.slice(1,-1)};xa.isDirectiveCandidate=function(z){return"ExpressionStatement"===z.type&&"Literal"===z.expression.type&&"string"===typeof z.expression.value&&('"'===this.input[z.start]||"'"===this.input[z.start])};xa=Sc.prototype;xa.toAssignable=function(z,X,rb){if(6<=this.options.ecmaVersion&&z)switch(z.type){case "Identifier":this.inAsync&&
"await"===z.name&&this.raise(z.start,"Cannot use 'await' as identifier inside an async function");break;case "ObjectPattern":case "ArrayPattern":case "AssignmentPattern":case "RestElement":break;case "ObjectExpression":z.type="ObjectPattern";rb&&this.checkPatternErrors(rb,!0);rb=0;for(var Wc=z.properties;rb<Wc.length;rb+=1){var Sd=Wc[rb];this.toAssignable(Sd,X);"RestElement"!==Sd.type||"ArrayPattern"!==Sd.argument.type&&"ObjectPattern"!==Sd.argument.type||this.raise(Sd.argument.start,"Unexpected token")}break;
case "Property":"init"!==z.kind&&this.raise(z.key.start,"Object pattern can't contain getter or setter");this.toAssignable(z.value,X);break;case "ArrayExpression":z.type="ArrayPattern";rb&&this.checkPatternErrors(rb,!0);this.toAssignableList(z.elements,X);break;case "SpreadElement":z.type="RestElement";this.toAssignable(z.argument,X);"AssignmentPattern"===z.argument.type&&this.raise(z.argument.start,"Rest elements cannot have a default value");break;case "AssignmentExpression":"="!==z.operator&&this.raise(z.left.end,
"Only '=' operator can be used for specifying default value.");z.type="AssignmentPattern";delete z.operator;this.toAssignable(z.left,X);break;case "ParenthesizedExpression":this.toAssignable(z.expression,X,rb);break;case "ChainExpression":this.raiseRecoverable(z.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":if(!X)break;default:this.raise(z.start,"Assigning to rvalue")}else rb&&this.checkPatternErrors(rb,!0);return z};xa.toAssignableList=function(z,X){for(var rb=
z.length,Wc=0;Wc<rb;Wc++){var Sd=z[Wc];Sd&&this.toAssignable(Sd,X)}rb&&(rb=z[rb-1],6===this.options.ecmaVersion&&X&&rb&&"RestElement"===rb.type&&"Identifier"!==rb.argument.type&&this.unexpected(rb.argument.start));return z};xa.parseSpread=function(z){var X=this.startNode();this.next();X.argument=this.parseMaybeAssign(!1,z);return this.finishNode(X,"SpreadElement")};xa.parseRestBinding=function(){var z=this.startNode();this.next();6===this.options.ecmaVersion&&this.type!==la.name&&this.unexpected();
z.argument=this.parseBindingAtom();return this.finishNode(z,"RestElement")};xa.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case la.bracketL:var z=this.startNode();this.next();z.elements=this.parseBindingList(la.bracketR,!0,!0);return this.finishNode(z,"ArrayPattern");case la.braceL:return this.parseObj(!0)}return this.parseIdent()};xa.parseBindingList=function(z,X,rb){for(var Wc=[],Sd=!0;!this.eat(z);)if(Sd?Sd=!1:this.expect(la.comma),X&&this.type===la.comma)Wc.push(null);
else if(rb&&this.afterTrailingComma(z))break;else if(this.type===la.ellipsis){X=this.parseRestBinding();this.parseBindingListItem(X);Wc.push(X);this.type===la.comma&&this.raise(this.start,"Comma is not permitted after the rest element");this.expect(z);break}else{var hf=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(hf);Wc.push(hf)}return Wc};xa.parseBindingListItem=function(z){return z};xa.parseMaybeDefault=function(z,X,rb){rb=rb||this.parseBindingAtom();if(6>this.options.ecmaVersion||
!this.eat(la.eq))return rb;z=this.startNodeAt(z,X);z.left=rb;z.right=this.parseMaybeAssign();return this.finishNode(z,"AssignmentPattern")};xa.checkLValSimple=function(z,X,rb){void 0===X&&(X=0);var Wc=0!==X;switch(z.type){case "Identifier":this.strict&&this.reservedWordsStrictBind.test(z.name)&&this.raiseRecoverable(z.start,(Wc?"Binding ":"Assigning to ")+z.name+" in strict mode");Wc&&(2===X&&"let"===z.name&&this.raiseRecoverable(z.start,"let is disallowed as a lexically bound name"),rb&&(Aa.call(rb,
z.name)&&this.raiseRecoverable(z.start,"Argument name clash"),rb[z.name]=!0),5!==X&&this.declareName(z.name,X,z.start));break;case "ChainExpression":this.raiseRecoverable(z.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":Wc&&this.raiseRecoverable(z.start,"Binding member expression");break;case "ParenthesizedExpression":return Wc&&this.raiseRecoverable(z.start,"Binding parenthesized expression"),this.checkLValSimple(z.expression,X,rb);default:this.raise(z.start,
(Wc?"Binding":"Assigning to")+" rvalue")}};xa.checkLValPattern=function(z,X,rb){void 0===X&&(X=0);switch(z.type){case "ObjectPattern":var Wc=0;for(z=z.properties;Wc<z.length;Wc+=1)this.checkLValInnerPattern(z[Wc],X,rb);break;case "ArrayPattern":Wc=0;for(z=z.elements;Wc<z.length;Wc+=1){var Sd=z[Wc];Sd&&this.checkLValInnerPattern(Sd,X,rb)}break;default:this.checkLValSimple(z,X,rb)}};xa.checkLValInnerPattern=function(z,X,rb){void 0===X&&(X=0);switch(z.type){case "Property":this.checkLValInnerPattern(z.value,
X,rb);break;case "AssignmentPattern":this.checkLValPattern(z.left,X,rb);break;case "RestElement":this.checkLValPattern(z.argument,X,rb);break;default:this.checkLValPattern(z,X,rb)}};xa=function(z,X,rb,Wc,Sd){this.token=z;this.isExpr=!!X;this.preserveSpace=!!rb;this.override=Wc;this.generator=!!Sd};var pg={b_stat:new xa("{",!1),b_expr:new xa("{",!0),b_tmpl:new xa("${",!1),p_stat:new xa("(",!1),p_expr:new xa("(",!0),q_tmpl:new xa("`",!0,!0,function(z){return z.tryReadTemplateToken()}),f_stat:new xa("function",
!1),f_expr:new xa("function",!0),f_expr_gen:new xa("function",!0,!1,null,!0),f_gen:new xa("function",!1,!1,null,!0)};Oa=Sc.prototype;Oa.initialContext=function(){return[pg.b_stat]};Oa.curContext=function(){return this.context[this.context.length-1]};Oa.braceIsBlock=function(z){var X=this.curContext();return X===pg.f_expr||X===pg.f_stat?!0:z!==la.colon||X!==pg.b_stat&&X!==pg.b_expr?z===la._return||z===la.name&&this.exprAllowed?$a.test(this.input.slice(this.lastTokEnd,this.start)):z===la._else||z===
la.semi||z===la.eof||z===la.parenR||z===la.arrow?!0:z===la.braceL?X===pg.b_stat:z===la._var||z===la._const||z===la.name?!1:!this.exprAllowed:!X.isExpr};Oa.inGeneratorContext=function(){for(var z=this.context.length-1;1<=z;z--){var X=this.context[z];if("function"===X.token)return X.generator}return!1};Oa.updateContext=function(z){var X,rb=this.type;rb.keyword&&z===la.dot?this.exprAllowed=!1:(X=rb.updateContext)?X.call(this,z):this.exprAllowed=rb.beforeExpr};Oa.overrideContext=function(z){this.curContext()!==
z&&(this.context[this.context.length-1]=z)};la.parenR.updateContext=la.braceR.updateContext=function(){if(1===this.context.length)this.exprAllowed=!0;else{var z=this.context.pop();z===pg.b_stat&&"function"===this.curContext().token&&(z=this.context.pop());this.exprAllowed=!z.isExpr}};la.braceL.updateContext=function(z){this.context.push(this.braceIsBlock(z)?pg.b_stat:pg.b_expr);this.exprAllowed=!0};la.dollarBraceL.updateContext=function(){this.context.push(pg.b_tmpl);this.exprAllowed=!0};la.parenL.updateContext=
function(z){this.context.push(z===la._if||z===la._for||z===la._with||z===la._while?pg.p_stat:pg.p_expr);this.exprAllowed=!0};la.incDec.updateContext=function(){};la._function.updateContext=la._class.updateContext=function(z){!z.beforeExpr||z===la._else||z===la.semi&&this.curContext()!==pg.p_stat||z===la._return&&$a.test(this.input.slice(this.lastTokEnd,this.start))||(z===la.colon||z===la.braceL)&&this.curContext()===pg.b_stat?this.context.push(pg.f_stat):this.context.push(pg.f_expr);this.exprAllowed=
!1};la.backQuote.updateContext=function(){this.curContext()===pg.q_tmpl?this.context.pop():this.context.push(pg.q_tmpl);this.exprAllowed=!1};la.star.updateContext=function(z){z===la._function&&(z=this.context.length-1,this.context[z]=this.context[z]===pg.f_expr?pg.f_expr_gen:pg.f_gen);this.exprAllowed=!0};la.name.updateContext=function(z){var X=!1;6<=this.options.ecmaVersion&&z!==la.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(X=!0);this.exprAllowed=
X};Oa=Sc.prototype;Oa.checkPropClash=function(z,X,rb){if(!(9<=this.options.ecmaVersion&&"SpreadElement"===z.type||6<=this.options.ecmaVersion&&(z.computed||z.method||z.shorthand))){var Wc=z.key;switch(Wc.type){case "Identifier":var Sd=Wc.name;break;case "Literal":Sd=String(Wc.value);break;default:return}z=z.kind;6<=this.options.ecmaVersion?"__proto__"===Sd&&"init"===z&&(X.proto&&(rb?0>rb.doubleProto&&(rb.doubleProto=Wc.start):this.raiseRecoverable(Wc.start,"Redefinition of __proto__ property")),X.proto=
!0):(Sd="$"+Sd,(rb=X[Sd])?("init"===z?this.strict&&rb.init||rb.get||rb.set:rb.init||rb[z])&&this.raiseRecoverable(Wc.start,"Redefinition of property"):rb=X[Sd]={init:!1,get:!1,set:!1},rb[z]=!0)}};Oa.parseExpression=function(z,X){var rb=this.start,Wc=this.startLoc,Sd=this.parseMaybeAssign(z,X);if(this.type===la.comma){rb=this.startNodeAt(rb,Wc);for(rb.expressions=[Sd];this.eat(la.comma);)rb.expressions.push(this.parseMaybeAssign(z,X));return this.finishNode(rb,"SequenceExpression")}return Sd};Oa.parseMaybeAssign=
function(z,X,rb){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(z);this.exprAllowed=!1}var Wc=!1,Sd=-1,hf=-1;X?(Sd=X.parenthesizedAssign,hf=X.trailingComma,X.parenthesizedAssign=X.trailingComma=-1):(X=new r,Wc=!0);var vf=this.start,Xf=this.startLoc;if(this.type===la.parenL||this.type===la.name)this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===z;var uh=this.parseMaybeConditional(z,X);rb&&(uh=rb.call(this,uh,vf,Xf));if(this.type.isAssign)return rb=this.startNodeAt(vf,
Xf),rb.operator=this.value,this.type===la.eq&&(uh=this.toAssignable(uh,!1,X)),Wc||(X.parenthesizedAssign=X.trailingComma=X.doubleProto=-1),X.shorthandAssign>=uh.start&&(X.shorthandAssign=-1),this.type===la.eq?this.checkLValPattern(uh):this.checkLValSimple(uh),rb.left=uh,this.next(),rb.right=this.parseMaybeAssign(z),this.finishNode(rb,"AssignmentExpression");Wc&&this.checkExpressionErrors(X,!0);-1<Sd&&(X.parenthesizedAssign=Sd);-1<hf&&(X.trailingComma=hf);return uh};Oa.parseMaybeConditional=function(z,
X){var rb=this.start,Wc=this.startLoc,Sd=this.parseExprOps(z,X);return this.checkExpressionErrors(X)?Sd:this.eat(la.question)?(X=this.startNodeAt(rb,Wc),X.test=Sd,X.consequent=this.parseMaybeAssign(),this.expect(la.colon),X.alternate=this.parseMaybeAssign(z),this.finishNode(X,"ConditionalExpression")):Sd};Oa.parseExprOps=function(z,X){var rb=this.start,Wc=this.startLoc,Sd=this.parseMaybeUnary(X,!1,!1,z);return this.checkExpressionErrors(X)?Sd:Sd.start===rb&&"ArrowFunctionExpression"===Sd.type?Sd:
this.parseExprOp(Sd,rb,Wc,-1,z)};Oa.parseExprOp=function(z,X,rb,Wc,Sd){var hf=this.type.binop;if(null!=hf&&(!Sd||this.type!==la._in)&&hf>Wc){var vf=this.type===la.logicalOR||this.type===la.logicalAND,Xf=this.type===la.coalesce;Xf&&(hf=la.logicalAND.binop);var uh=this.value;this.next();var Yh=this.start,Mi=this.startLoc;hf=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,Sd),Yh,Mi,hf,Sd);z=this.buildBinary(X,rb,z,hf,uh,vf||Xf);(vf&&this.type===la.coalesce||Xf&&(this.type===la.logicalOR||this.type===
la.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses");return this.parseExprOp(z,X,rb,Wc,Sd)}return z};Oa.buildBinary=function(z,X,rb,Wc,Sd,hf){z=this.startNodeAt(z,X);z.left=rb;z.operator=Sd;z.right=Wc;return this.finishNode(z,hf?"LogicalExpression":"BinaryExpression")};Oa.parseMaybeUnary=function(z,X,rb,Wc){var Sd=this.start,hf=this.startLoc;if(this.isContextual("await")&&this.canAwait){var vf=this.parseAwait(Wc);
X=!0}else if(this.type.prefix){vf=this.startNode();var Xf=this.type===la.incDec;vf.operator=this.value;vf.prefix=!0;this.next();vf.argument=this.parseMaybeUnary(null,!0,Xf,Wc);this.checkExpressionErrors(z,!0);Xf?this.checkLValSimple(vf.argument):this.strict&&"delete"===vf.operator&&"Identifier"===vf.argument.type?this.raiseRecoverable(vf.start,"Deleting local variable in strict mode"):"delete"===vf.operator&&w(vf.argument)?this.raiseRecoverable(vf.start,"Private fields can not be deleted"):X=!0;vf=
this.finishNode(vf,Xf?"UpdateExpression":"UnaryExpression")}else{vf=this.parseExprSubscripts(z,Wc);if(this.checkExpressionErrors(z))return vf;for(;this.type.postfix&&!this.canInsertSemicolon();)z=this.startNodeAt(Sd,hf),z.operator=this.value,z.prefix=!1,z.argument=vf,this.checkLValSimple(vf),this.next(),vf=this.finishNode(z,"UpdateExpression")}if(!rb&&this.eat(la.starstar))if(X)this.unexpected(this.lastTokStart);else return this.buildBinary(Sd,hf,vf,this.parseMaybeUnary(null,!1,!1,Wc),"**",!1);else return vf};
Oa.parseExprSubscripts=function(z,X){var rb=this.start,Wc=this.startLoc,Sd=this.parseExprAtom(z,X);if("ArrowFunctionExpression"===Sd.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return Sd;X=this.parseSubscripts(Sd,rb,Wc,!1,X);z&&"MemberExpression"===X.type&&(z.parenthesizedAssign>=X.start&&(z.parenthesizedAssign=-1),z.parenthesizedBind>=X.start&&(z.parenthesizedBind=-1),z.trailingComma>=X.start&&(z.trailingComma=-1));return X};Oa.parseSubscripts=function(z,X,rb,Wc,Sd){for(var hf=
8<=this.options.ecmaVersion&&"Identifier"===z.type&&"async"===z.name&&this.lastTokEnd===z.end&&!this.canInsertSemicolon()&&5===z.end-z.start&&this.potentialArrowAt===z.start,vf=!1;;){var Xf=this.parseSubscript(z,X,rb,Wc,hf,vf,Sd);Xf.optional&&(vf=!0);if(Xf===z||"ArrowFunctionExpression"===Xf.type)return vf&&(z=this.startNodeAt(X,rb),z.expression=Xf,Xf=this.finishNode(z,"ChainExpression")),Xf;z=Xf}};Oa.parseSubscript=function(z,X,rb,Wc,Sd,hf,vf){var Xf=11<=this.options.ecmaVersion,uh=Xf&&this.eat(la.questionDot);
Wc&&uh&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var Yh=this.eat(la.bracketL);if(Yh||uh&&this.type!==la.parenL&&this.type!==la.backQuote||this.eat(la.dot))X=this.startNodeAt(X,rb),X.object=z,Yh?(X.property=this.parseExpression(),this.expect(la.bracketR)):X.property=this.type===la.privateId&&"Super"!==z.type?this.parsePrivateIdent():this.parseIdent("never"!==this.options.allowReserved),X.computed=!!Yh,Xf&&(X.optional=uh),z=this.finishNode(X,"MemberExpression");
else if(!Wc&&this.eat(la.parenL)){Wc=new r;hf=this.yieldPos;var Mi=this.awaitPos,Gl=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;Yh=this.parseExprList(la.parenR,8<=this.options.ecmaVersion,!1,Wc);if(Sd&&!uh&&!this.canInsertSemicolon()&&this.eat(la.arrow))return this.checkPatternErrors(Wc,!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=hf,this.awaitPos=Mi,
this.awaitIdentPos=Gl,this.parseArrowExpression(this.startNodeAt(X,rb),Yh,!0,vf);this.checkExpressionErrors(Wc,!0);this.yieldPos=hf||this.yieldPos;this.awaitPos=Mi||this.awaitPos;this.awaitIdentPos=Gl||this.awaitIdentPos;X=this.startNodeAt(X,rb);X.callee=z;X.arguments=Yh;Xf&&(X.optional=uh);z=this.finishNode(X,"CallExpression")}else this.type===la.backQuote&&((uh||hf)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),Xf=this.startNodeAt(X,rb),Xf.tag=
z,Xf.quasi=this.parseTemplate({isTagged:!0}),z=this.finishNode(Xf,"TaggedTemplateExpression"));return z};Oa.parseExprAtom=function(z,X){this.type===la.slash&&this.readRegexp();var rb=this.potentialArrowAt===this.start;switch(this.type){case la._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),X=this.startNode(),this.next(),this.type!==la.parenL||this.allowDirectSuper||this.raise(X.start,"super() call outside constructor of a subclass"),this.type!==la.dot&&this.type!==
la.bracketL&&this.type!==la.parenL&&this.unexpected(),this.finishNode(X,"Super");case la._this:return X=this.startNode(),this.next(),this.finishNode(X,"ThisExpression");case la.name:z=this.start;var Wc=this.startLoc,Sd=this.containsEsc,hf=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!Sd&&"async"===hf.name&&!this.canInsertSemicolon()&&this.eat(la._function))return this.overrideContext(pg.f_expr),this.parseFunction(this.startNodeAt(z,Wc),0,!1,!0,X);if(rb&&!this.canInsertSemicolon()){if(this.eat(la.arrow))return this.parseArrowExpression(this.startNodeAt(z,
Wc),[hf],!1,X);if(8<=this.options.ecmaVersion&&"async"===hf.name&&this.type===la.name&&!Sd&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return hf=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(la.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(z,Wc),[hf],!0,X)}return hf;case la.regexp:return rb=this.value,X=this.parseLiteral(rb.value),X.regex={pattern:rb.pattern,flags:rb.flags},X;case la.num:case la.string:return this.parseLiteral(this.value);
case la._null:case la._true:case la._false:return X=this.startNode(),X.value=this.type===la._null?null:this.type===la._true,X.raw=this.type.keyword,this.next(),this.finishNode(X,"Literal");case la.parenL:return Wc=this.start,X=this.parseParenAndDistinguishExpression(rb,X),z&&(0>z.parenthesizedAssign&&!this.isSimpleAssignTarget(X)&&(z.parenthesizedAssign=Wc),0>z.parenthesizedBind&&(z.parenthesizedBind=Wc)),X;case la.bracketL:return X=this.startNode(),this.next(),X.elements=this.parseExprList(la.bracketR,
!0,!0,z),this.finishNode(X,"ArrayExpression");case la.braceL:return this.overrideContext(pg.b_expr),this.parseObj(!1,z);case la._function:return X=this.startNode(),this.next(),this.parseFunction(X,0);case la._class:return this.parseClass(this.startNode(),!1);case la._new:return this.parseNew();case la.backQuote:return this.parseTemplate();case la._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.unexpected();default:this.unexpected()}};Oa.parseExprImport=function(){var z=this.startNode();
this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var X=this.parseIdent(!0);switch(this.type){case la.parenL:return this.parseDynamicImport(z);case la.dot:return z.meta=X,this.parseImportMeta(z);default:this.unexpected()}};Oa.parseDynamicImport=function(z){this.next();z.source=this.parseMaybeAssign();if(!this.eat(la.parenR)){var X=this.start;this.eat(la.comma)&&this.eat(la.parenR)?this.raiseRecoverable(X,"Trailing comma is not allowed in import()"):this.unexpected(X)}return this.finishNode(z,
"ImportExpression")};Oa.parseImportMeta=function(z){this.next();var X=this.containsEsc;z.property=this.parseIdent(!0);"meta"!==z.property.name&&this.raiseRecoverable(z.property.start,"The only valid meta property for import is 'import.meta'");X&&this.raiseRecoverable(z.start,"'import.meta' must not contain escaped characters");"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(z.start,"Cannot use 'import.meta' outside a module");return this.finishNode(z,
"MetaProperty")};Oa.parseLiteral=function(z){var X=this.startNode();X.value=z;X.raw=this.input.slice(this.start,this.end);110===X.raw.charCodeAt(X.raw.length-1)&&(X.bigint=X.raw.slice(0,-1).replace(/_/g,""));this.next();return this.finishNode(X,"Literal")};Oa.parseParenExpression=function(){this.expect(la.parenL);var z=this.parseExpression();this.expect(la.parenR);return z};Oa.parseParenAndDistinguishExpression=function(z,X){var rb=this.start,Wc=this.startLoc,Sd=8<=this.options.ecmaVersion;if(6<=
this.options.ecmaVersion){this.next();var hf=this.start,vf=this.startLoc,Xf=[],uh=!0,Yh=!1,Mi=new r,Gl=this.yieldPos,an=this.awaitPos;for(this.awaitPos=this.yieldPos=0;this.type!==la.parenR;)if(uh?uh=!1:this.expect(la.comma),Sd&&this.afterTrailingComma(la.parenR,!0)){Yh=!0;break}else if(this.type===la.ellipsis){var Qo=this.start;Xf.push(this.parseParenItem(this.parseRestBinding()));this.type===la.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else Xf.push(this.parseMaybeAssign(!1,
Mi,this.parseParenItem));Sd=this.lastTokEnd;uh=this.lastTokEndLoc;this.expect(la.parenR);if(z&&!this.canInsertSemicolon()&&this.eat(la.arrow))return this.checkPatternErrors(Mi,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=Gl,this.awaitPos=an,this.parseParenArrowList(rb,Wc,Xf,X);Xf.length&&!Yh||this.unexpected(this.lastTokStart);Qo&&this.unexpected(Qo);this.checkExpressionErrors(Mi,!0);this.yieldPos=Gl||this.yieldPos;this.awaitPos=an||this.awaitPos;1<Xf.length?(z=this.startNodeAt(hf,vf),
z.expressions=Xf,this.finishNodeAt(z,"SequenceExpression",Sd,uh)):z=Xf[0]}else z=this.parseParenExpression();return this.options.preserveParens?(rb=this.startNodeAt(rb,Wc),rb.expression=z,this.finishNode(rb,"ParenthesizedExpression")):z};Oa.parseParenItem=function(z){return z};Oa.parseParenArrowList=function(z,X,rb,Wc){return this.parseArrowExpression(this.startNodeAt(z,X),rb,Wc)};var Yg=[];Oa.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");
var z=this.startNode(),X=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(la.dot))return z.meta=X,X=this.containsEsc,z.property=this.parseIdent(!0),"target"!==z.property.name&&this.raiseRecoverable(z.property.start,"The only valid meta property for new is 'new.target'"),X&&this.raiseRecoverable(z.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(z.start,"'new.target' can only be used in functions and class static block"),this.finishNode(z,
"MetaProperty");X=this.start;var rb=this.startLoc,Wc=this.type===la._import;z.callee=this.parseSubscripts(this.parseExprAtom(),X,rb,!0,!1);Wc&&"ImportExpression"===z.callee.type&&this.raise(X,"Cannot use new with import()");this.eat(la.parenL)?z.arguments=this.parseExprList(la.parenR,8<=this.options.ecmaVersion,!1):z.arguments=Yg;return this.finishNode(z,"NewExpression")};Oa.parseTemplateElement=function(z){z=z.isTagged;var X=this.startNode();this.type===la.invalidTemplate?(z||this.raiseRecoverable(this.start,
"Bad escape sequence in untagged template literal"),X.value={raw:this.value,cooked:null}):X.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value};this.next();X.tail=this.type===la.backQuote;return this.finishNode(X,"TemplateElement")};Oa.parseTemplate=function(z){void 0===z&&(z={});z=z.isTagged;void 0===z&&(z=!1);var X=this.startNode();this.next();X.expressions=[];var rb=this.parseTemplateElement({isTagged:z});for(X.quasis=[rb];!rb.tail;)this.type===la.eof&&this.raise(this.pos,
"Unterminated template literal"),this.expect(la.dollarBraceL),X.expressions.push(this.parseExpression()),this.expect(la.braceR),X.quasis.push(rb=this.parseTemplateElement({isTagged:z}));this.next();return this.finishNode(X,"TemplateLiteral")};Oa.isAsyncProp=function(z){return!z.computed&&"Identifier"===z.key.type&&"async"===z.key.name&&(this.type===la.name||this.type===la.num||this.type===la.string||this.type===la.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===la.star)&&!$a.test(this.input.slice(this.lastTokEnd,
this.start))};Oa.parseObj=function(z,X){var rb=this.startNode(),Wc=!0,Sd={};rb.properties=[];for(this.next();!this.eat(la.braceR);){if(Wc)Wc=!1;else if(this.expect(la.comma),5<=this.options.ecmaVersion&&this.afterTrailingComma(la.braceR))break;var hf=this.parseProperty(z,X);z||this.checkPropClash(hf,Sd,X);rb.properties.push(hf)}return this.finishNode(rb,z?"ObjectPattern":"ObjectExpression")};Oa.parseProperty=function(z,X){var rb=this.startNode(),Wc;if(9<=this.options.ecmaVersion&&this.eat(la.ellipsis)){if(z)return rb.argument=
this.parseIdent(!1),this.type===la.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(rb,"RestElement");this.type===la.parenL&&X&&(0>X.parenthesizedAssign&&(X.parenthesizedAssign=this.start),0>X.parenthesizedBind&&(X.parenthesizedBind=this.start));rb.argument=this.parseMaybeAssign(!1,X);this.type===la.comma&&X&&0>X.trailingComma&&(X.trailingComma=this.start);return this.finishNode(rb,"SpreadElement")}if(6<=this.options.ecmaVersion){rb.method=!1;rb.shorthand=
!1;if(z||X){var Sd=this.start;var hf=this.startLoc}z||(Wc=this.eat(la.star))}var vf=this.containsEsc;this.parsePropertyName(rb);if(!z&&!vf&&8<=this.options.ecmaVersion&&!Wc&&this.isAsyncProp(rb)){var Xf=!0;Wc=9<=this.options.ecmaVersion&&this.eat(la.star);this.parsePropertyName(rb,X)}else Xf=!1;this.parsePropertyValue(rb,z,Wc,Xf,Sd,hf,X,vf);return this.finishNode(rb,"Property")};Oa.parsePropertyValue=function(z,X,rb,Wc,Sd,hf,vf,Xf){(rb||Wc)&&this.type===la.colon&&this.unexpected();this.eat(la.colon)?
(z.value=X?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,vf),z.kind="init"):6<=this.options.ecmaVersion&&this.type===la.parenL?(X&&this.unexpected(),z.kind="init",z.method=!0,z.value=this.parseMethod(rb,Wc)):X||Xf||!(5<=this.options.ecmaVersion)||z.computed||"Identifier"!==z.key.type||"get"!==z.key.name&&"set"!==z.key.name||this.type===la.comma||this.type===la.braceR||this.type===la.eq?6<=this.options.ecmaVersion&&!z.computed&&"Identifier"===z.key.type?((rb||Wc)&&this.unexpected(),
this.checkUnreserved(z.key),"await"!==z.key.name||this.awaitIdentPos||(this.awaitIdentPos=Sd),z.kind="init",X?z.value=this.parseMaybeDefault(Sd,hf,this.copyNode(z.key)):this.type===la.eq&&vf?(0>vf.shorthandAssign&&(vf.shorthandAssign=this.start),z.value=this.parseMaybeDefault(Sd,hf,this.copyNode(z.key))):z.value=this.copyNode(z.key),z.shorthand=!0):this.unexpected():((rb||Wc)&&this.unexpected(),z.kind=z.key.name,this.parsePropertyName(z),z.value=this.parseMethod(!1),z.value.params.length!==("get"===
z.kind?0:1)?(X=z.value.start,"get"===z.kind?this.raiseRecoverable(X,"getter should have no params"):this.raiseRecoverable(X,"setter should have exactly one param")):"set"===z.kind&&"RestElement"===z.value.params[0].type&&this.raiseRecoverable(z.value.params[0].start,"Setter cannot use rest params"))};Oa.parsePropertyName=function(z){if(6<=this.options.ecmaVersion){if(this.eat(la.bracketL))return z.computed=!0,z.key=this.parseMaybeAssign(),this.expect(la.bracketR),z.key;z.computed=!1}return z.key=
this.type===la.num||this.type===la.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)};Oa.initFunction=function(z){z.id=null;6<=this.options.ecmaVersion&&(z.generator=z.expression=!1);8<=this.options.ecmaVersion&&(z.async=!1)};Oa.parseMethod=function(z,X,rb){var Wc=this.startNode(),Sd=this.yieldPos,hf=this.awaitPos,vf=this.awaitIdentPos;this.initFunction(Wc);6<=this.options.ecmaVersion&&(Wc.generator=z);8<=this.options.ecmaVersion&&(Wc.async=!!X);this.awaitIdentPos=
this.awaitPos=this.yieldPos=0;this.enterScope(2|(X?4:0)|(Wc.generator?8:0)|64|(rb?128:0));this.expect(la.parenL);Wc.params=this.parseBindingList(la.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams();this.parseFunctionBody(Wc,!1,!0,!1);this.yieldPos=Sd;this.awaitPos=hf;this.awaitIdentPos=vf;return this.finishNode(Wc,"FunctionExpression")};Oa.parseArrowExpression=function(z,X,rb,Wc){var Sd=this.yieldPos,hf=this.awaitPos,vf=this.awaitIdentPos;this.enterScope((rb?4:0)|18);this.initFunction(z);
8<=this.options.ecmaVersion&&(z.async=!!rb);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;z.params=this.toAssignableList(X,!0);this.parseFunctionBody(z,!0,!1,Wc);this.yieldPos=Sd;this.awaitPos=hf;this.awaitIdentPos=vf;return this.finishNode(z,"ArrowFunctionExpression")};Oa.parseFunctionBody=function(z,X,rb,Wc){var Sd=this.strict,hf=!1;X&&this.type!==la.braceL?(z.body=this.parseMaybeAssign(Wc),z.expression=!0,this.checkParams(z,!1)):(Wc=7<=this.options.ecmaVersion&&!this.isSimpleParamList(z.params),
(!Sd||Wc)&&(hf=this.strictDirective(this.end))&&Wc&&this.raiseRecoverable(z.start,"Illegal 'use strict' directive in function with non-simple parameter list"),Wc=this.labels,this.labels=[],hf&&(this.strict=!0),this.checkParams(z,!Sd&&!hf&&!X&&!rb&&this.isSimpleParamList(z.params)),this.strict&&z.id&&this.checkLValSimple(z.id,5),z.body=this.parseBlock(!1,void 0,hf&&!Sd),z.expression=!1,this.adaptDirectivePrologue(z.body.body),this.labels=Wc);this.exitScope()};Oa.isSimpleParamList=function(z){for(var X=
0;X<z.length;X+=1)if("Identifier"!==z[X].type)return!1;return!0};Oa.checkParams=function(z,X){var rb=Object.create(null),Wc=0;for(z=z.params;Wc<z.length;Wc+=1)this.checkLValInnerPattern(z[Wc],1,X?null:rb)};Oa.parseExprList=function(z,X,rb,Wc){for(var Sd=[],hf=!0;!this.eat(z);){if(hf)hf=!1;else if(this.expect(la.comma),X&&this.afterTrailingComma(z))break;if(rb&&this.type===la.comma)var vf=null;else this.type===la.ellipsis?(vf=this.parseSpread(Wc),Wc&&this.type===la.comma&&0>Wc.trailingComma&&(Wc.trailingComma=
this.start)):vf=this.parseMaybeAssign(!1,Wc);Sd.push(vf)}return Sd};Oa.checkUnreserved=function(z){var X=z.start,rb=z.end;z=z.name;this.inGenerator&&"yield"===z&&this.raiseRecoverable(X,"Cannot use 'yield' as identifier inside a generator");this.inAsync&&"await"===z&&this.raiseRecoverable(X,"Cannot use 'await' as identifier inside an async function");this.currentThisScope().inClassFieldInit&&"arguments"===z&&this.raiseRecoverable(X,"Cannot use 'arguments' in class field initializer");!this.inClassStaticBlock||
"arguments"!==z&&"await"!==z||this.raise(X,"Cannot use "+z+" in class static initialization block");this.keywords.test(z)&&this.raise(X,"Unexpected keyword '"+z+"'");6>this.options.ecmaVersion&&-1!==this.input.slice(X,rb).indexOf("\\")||!(this.strict?this.reservedWordsStrict:this.reservedWords).test(z)||(this.inAsync||"await"!==z||this.raiseRecoverable(X,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(X,"The keyword '"+z+"' is reserved"))};Oa.parseIdent=function(z,X){X=
this.startNode();this.type===la.name?X.name=this.value:this.type.keyword?(X.name=this.type.keyword,"class"!==X.name&&"function"!==X.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected();this.next(!!z);this.finishNode(X,"Identifier");z||(this.checkUnreserved(X),"await"!==X.name||this.awaitIdentPos||(this.awaitIdentPos=X.start));return X};Oa.parsePrivateIdent=function(){var z=this.startNode();this.type===la.privateId?z.name=
this.value:this.unexpected();this.next();this.finishNode(z,"PrivateIdentifier");0===this.privateNameStack.length?this.raise(z.start,"Private field '#"+z.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(z);return z};Oa.parseYield=function(z){this.yieldPos||(this.yieldPos=this.start);var X=this.startNode();this.next();this.type===la.semi||this.canInsertSemicolon()||this.type!==la.star&&!this.type.startsExpr?(X.delegate=!1,X.argument=null):
(X.delegate=this.eat(la.star),X.argument=this.parseMaybeAssign(z));return this.finishNode(X,"YieldExpression")};Oa.parseAwait=function(z){this.awaitPos||(this.awaitPos=this.start);var X=this.startNode();this.next();X.argument=this.parseMaybeUnary(null,!0,!1,z);return this.finishNode(X,"AwaitExpression")};Oa=Sc.prototype;Oa.raise=function(z,X){var rb=n(this.input,z);X+=" ("+rb.line+":"+rb.column+")";X=new SyntaxError(X);X.pos=z;X.loc=rb;X.raisedAt=this.pos;throw X;};Oa.raiseRecoverable=Oa.raise;Oa.curPosition=
function(){if(this.options.locations)return new Mb(this.curLine,this.pos-this.lineStart)};Oa=Sc.prototype;var Rh=function(z){this.flags=z;this["var"]=[];this.lexical=[];this.functions=[];this.inClassFieldInit=!1};Oa.enterScope=function(z){this.scopeStack.push(new Rh(z))};Oa.exitScope=function(){this.scopeStack.pop()};Oa.treatFunctionsAsVarInScope=function(z){return z.flags&2||!this.inModule&&z.flags&1};Oa.declareName=function(z,X,rb){var Wc=!1;if(2===X)X=this.currentScope(),Wc=-1<X.lexical.indexOf(z)||
-1<X.functions.indexOf(z)||-1<X["var"].indexOf(z),X.lexical.push(z),this.inModule&&X.flags&1&&delete this.undefinedExports[z];else if(4===X)this.currentScope().lexical.push(z);else if(3===X)X=this.currentScope(),Wc=this.treatFunctionsAsVar?-1<X.lexical.indexOf(z):-1<X.lexical.indexOf(z)||-1<X["var"].indexOf(z),X.functions.push(z);else for(X=this.scopeStack.length-1;0<=X;--X){var Sd=this.scopeStack[X];if(-1<Sd.lexical.indexOf(z)&&!(Sd.flags&32&&Sd.lexical[0]===z)||!this.treatFunctionsAsVarInScope(Sd)&&
-1<Sd.functions.indexOf(z)){Wc=!0;break}Sd["var"].push(z);this.inModule&&Sd.flags&1&&delete this.undefinedExports[z];if(Sd.flags&259)break}Wc&&this.raiseRecoverable(rb,"Identifier '"+z+"' has already been declared")};Oa.checkLocalExport=function(z){-1===this.scopeStack[0].lexical.indexOf(z.name)&&-1===this.scopeStack[0]["var"].indexOf(z.name)&&(this.undefinedExports[z.name]=z)};Oa.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Oa.currentVarScope=function(){for(var z=this.scopeStack.length-
1;;z--){var X=this.scopeStack[z];if(X.flags&259)return X}};Oa.currentThisScope=function(){for(var z=this.scopeStack.length-1;;z--){var X=this.scopeStack[z];if(X.flags&259&&!(X.flags&16))return X}};var Ei=function(z,X,rb){this.type="";this.start=X;this.end=0;z.options.locations&&(this.loc=new U(z,rb));z.options.directSourceFile&&(this.sourceFile=z.options.directSourceFile);z.options.ranges&&(this.range=[X,0])};Oa=Sc.prototype;Oa.startNode=function(){return new Ei(this,this.start,this.startLoc)};Oa.startNodeAt=
function(z,X){return new Ei(this,z,X)};Oa.finishNode=function(z,X){return x.call(this,z,X,this.lastTokEnd,this.lastTokEndLoc)};Oa.finishNodeAt=function(z,X,rb,Wc){return x.call(this,z,X,rb,Wc)};Oa.copyNode=function(z){var X=new Ei(this,z.start,this.startLoc),rb;for(rb in z)X[rb]=z[rb];return X};var Xj={9:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",
10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},
Aj={9:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",
10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",
11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",
12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},
yi={};B(9);B(10);B(11);B(12);Oa=Sc.prototype;var dj=function(z){this.parser=z;this.validFlags="gim"+(6<=z.options.ecmaVersion?"uy":"")+(9<=z.options.ecmaVersion?"s":"")+(13<=z.options.ecmaVersion?"d":"");this.unicodeProperties=yi[12<=z.options.ecmaVersion?12:z.options.ecmaVersion];this.flags=this.source="";this.start=0;this.switchN=this.switchU=!1;this.lastIntValue=this.pos=0;this.lastStringValue="";this.lastAssertionIsQuantifiable=!1;this.maxBackReference=this.numCapturingParens=0;this.groupNames=
[];this.backReferenceNames=[]};dj.prototype.reset=function(z,X,rb){var Wc=-1!==rb.indexOf("u");this.start=z|0;this.source=X+"";this.flags=rb;this.switchU=Wc&&6<=this.parser.options.ecmaVersion;this.switchN=Wc&&9<=this.parser.options.ecmaVersion};dj.prototype.raise=function(z){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+z)};dj.prototype.at=function(z,X){void 0===X&&(X=!1);var rb=this.source,Wc=rb.length;if(z>=Wc)return-1;var Sd=rb.charCodeAt(z);if(!X&&
!this.switchU||55295>=Sd||57344<=Sd||z+1>=Wc)return Sd;z=rb.charCodeAt(z+1);return 56320<=z&&57343>=z?(Sd<<10)+z-56613888:Sd};dj.prototype.nextIndex=function(z,X){void 0===X&&(X=!1);var rb=this.source,Wc=rb.length;if(z>=Wc)return Wc;var Sd=rb.charCodeAt(z),hf;return!X&&!this.switchU||55295>=Sd||57344<=Sd||z+1>=Wc||56320>(hf=rb.charCodeAt(z+1))||57343<hf?z+1:z+2};dj.prototype.current=function(z){void 0===z&&(z=!1);return this.at(this.pos,z)};dj.prototype.lookahead=function(z){void 0===z&&(z=!1);return this.at(this.nextIndex(this.pos,
z),z)};dj.prototype.advance=function(z){void 0===z&&(z=!1);this.pos=this.nextIndex(this.pos,z)};dj.prototype.eat=function(z,X){void 0===X&&(X=!1);return this.current(X)===z?(this.advance(X),!0):!1};Oa.validateRegExpFlags=function(z){for(var X=z.validFlags,rb=z.flags,Wc=0;Wc<rb.length;Wc++){var Sd=rb.charAt(Wc);-1===X.indexOf(Sd)&&this.raise(z.start,"Invalid regular expression flag");-1<rb.indexOf(Sd,Wc+1)&&this.raise(z.start,"Duplicate regular expression flag")}};Oa.validateRegExpPattern=function(z){this.regexp_pattern(z);
!z.switchN&&9<=this.options.ecmaVersion&&0<z.groupNames.length&&(z.switchN=!0,this.regexp_pattern(z))};Oa.regexp_pattern=function(z){z.pos=0;z.lastIntValue=0;z.lastStringValue="";z.lastAssertionIsQuantifiable=!1;z.numCapturingParens=0;z.maxBackReference=0;z.groupNames.length=0;z.backReferenceNames.length=0;this.regexp_disjunction(z);z.pos!==z.source.length&&(z.eat(41)&&z.raise("Unmatched ')'"),(z.eat(93)||z.eat(125))&&z.raise("Lone quantifier brackets"));z.maxBackReference>z.numCapturingParens&&z.raise("Invalid escape");
for(var X=0,rb=z.backReferenceNames;X<rb.length;X+=1)-1===z.groupNames.indexOf(rb[X])&&z.raise("Invalid named capture referenced")};Oa.regexp_disjunction=function(z){for(this.regexp_alternative(z);z.eat(124);)this.regexp_alternative(z);this.regexp_eatQuantifier(z,!0)&&z.raise("Nothing to repeat");z.eat(123)&&z.raise("Lone quantifier brackets")};Oa.regexp_alternative=function(z){for(;z.pos<z.source.length&&this.regexp_eatTerm(z););};Oa.regexp_eatTerm=function(z){return this.regexp_eatAssertion(z)?
(z.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(z)&&z.switchU&&z.raise("Invalid quantifier"),!0):(z.switchU?this.regexp_eatAtom(z):this.regexp_eatExtendedAtom(z))?(this.regexp_eatQuantifier(z),!0):!1};Oa.regexp_eatAssertion=function(z){var X=z.pos;z.lastAssertionIsQuantifiable=!1;if(z.eat(94)||z.eat(36))return!0;if(z.eat(92)){if(z.eat(66)||z.eat(98))return!0;z.pos=X}if(z.eat(40)&&z.eat(63)){var rb=!1;9<=this.options.ecmaVersion&&(rb=z.eat(60));if(z.eat(61)||z.eat(33))return this.regexp_disjunction(z),
z.eat(41)||z.raise("Unterminated group"),z.lastAssertionIsQuantifiable=!rb,!0}z.pos=X;return!1};Oa.regexp_eatQuantifier=function(z,X){void 0===X&&(X=!1);return this.regexp_eatQuantifierPrefix(z,X)?(z.eat(63),!0):!1};Oa.regexp_eatQuantifierPrefix=function(z,X){return z.eat(42)||z.eat(43)||z.eat(63)||this.regexp_eatBracedQuantifier(z,X)};Oa.regexp_eatBracedQuantifier=function(z,X){var rb=z.pos;if(z.eat(123)){var Wc=-1;if(this.regexp_eatDecimalDigits(z)){var Sd=z.lastIntValue;z.eat(44)&&this.regexp_eatDecimalDigits(z)&&
(Wc=z.lastIntValue);if(z.eat(125))return-1!==Wc&&Wc<Sd&&!X&&z.raise("numbers out of order in {} quantifier"),!0}z.switchU&&!X&&z.raise("Incomplete quantifier");z.pos=rb}return!1};Oa.regexp_eatAtom=function(z){return this.regexp_eatPatternCharacters(z)||z.eat(46)||this.regexp_eatReverseSolidusAtomEscape(z)||this.regexp_eatCharacterClass(z)||this.regexp_eatUncapturingGroup(z)||this.regexp_eatCapturingGroup(z)};Oa.regexp_eatReverseSolidusAtomEscape=function(z){var X=z.pos;if(z.eat(92)){if(this.regexp_eatAtomEscape(z))return!0;
z.pos=X}return!1};Oa.regexp_eatUncapturingGroup=function(z){var X=z.pos;if(z.eat(40)){if(z.eat(63)&&z.eat(58)){this.regexp_disjunction(z);if(z.eat(41))return!0;z.raise("Unterminated group")}z.pos=X}return!1};Oa.regexp_eatCapturingGroup=function(z){if(z.eat(40)){9<=this.options.ecmaVersion?this.regexp_groupSpecifier(z):63===z.current()&&z.raise("Invalid group");this.regexp_disjunction(z);if(z.eat(41))return z.numCapturingParens+=1,!0;z.raise("Unterminated group")}return!1};Oa.regexp_eatExtendedAtom=
function(z){return z.eat(46)||this.regexp_eatReverseSolidusAtomEscape(z)||this.regexp_eatCharacterClass(z)||this.regexp_eatUncapturingGroup(z)||this.regexp_eatCapturingGroup(z)||this.regexp_eatInvalidBracedQuantifier(z)||this.regexp_eatExtendedPatternCharacter(z)};Oa.regexp_eatInvalidBracedQuantifier=function(z){this.regexp_eatBracedQuantifier(z,!0)&&z.raise("Nothing to repeat");return!1};Oa.regexp_eatSyntaxCharacter=function(z){var X=z.current();return F(X)?(z.lastIntValue=X,z.advance(),!0):!1};
Oa.regexp_eatPatternCharacters=function(z){for(var X=z.pos,rb=0;-1!==(rb=z.current())&&!F(rb);)z.advance();return z.pos!==X};Oa.regexp_eatExtendedPatternCharacter=function(z){var X=z.current();return-1===X||36===X||40<=X&&43>=X||46===X||63===X||91===X||94===X||124===X?!1:(z.advance(),!0)};Oa.regexp_groupSpecifier=function(z){z.eat(63)&&(this.regexp_eatGroupName(z)?(-1!==z.groupNames.indexOf(z.lastStringValue)&&z.raise("Duplicate capture group name"),z.groupNames.push(z.lastStringValue)):z.raise("Invalid group"))};
Oa.regexp_eatGroupName=function(z){z.lastStringValue="";if(z.eat(60)){if(this.regexp_eatRegExpIdentifierName(z)&&z.eat(62))return!0;z.raise("Invalid capture group name")}return!1};Oa.regexp_eatRegExpIdentifierName=function(z){z.lastStringValue="";if(this.regexp_eatRegExpIdentifierStart(z)){for(z.lastStringValue+=D(z.lastIntValue);this.regexp_eatRegExpIdentifierPart(z);)z.lastStringValue+=D(z.lastIntValue);return!0}return!1};Oa.regexp_eatRegExpIdentifierStart=function(z){var X=z.pos,rb=11<=this.options.ecmaVersion,
Wc=z.current(rb);z.advance(rb);92===Wc&&this.regexp_eatRegExpUnicodeEscapeSequence(z,rb)&&(Wc=z.lastIntValue);rb=Wc;if(c(rb,!0)||36===rb||95===rb)return z.lastIntValue=Wc,!0;z.pos=X;return!1};Oa.regexp_eatRegExpIdentifierPart=function(z){var X=z.pos,rb=11<=this.options.ecmaVersion,Wc=z.current(rb);z.advance(rb);92===Wc&&this.regexp_eatRegExpUnicodeEscapeSequence(z,rb)&&(Wc=z.lastIntValue);rb=Wc;if(g(rb,!0)||36===rb||95===rb||8204===rb||8205===rb)return z.lastIntValue=Wc,!0;z.pos=X;return!1};Oa.regexp_eatAtomEscape=
function(z){if(this.regexp_eatBackReference(z)||this.regexp_eatCharacterClassEscape(z)||this.regexp_eatCharacterEscape(z)||z.switchN&&this.regexp_eatKGroupName(z))return!0;z.switchU&&(99===z.current()&&z.raise("Invalid unicode escape"),z.raise("Invalid escape"));return!1};Oa.regexp_eatBackReference=function(z){var X=z.pos;if(this.regexp_eatDecimalEscape(z)){var rb=z.lastIntValue;if(z.switchU)return rb>z.maxBackReference&&(z.maxBackReference=rb),!0;if(rb<=z.numCapturingParens)return!0;z.pos=X}return!1};
Oa.regexp_eatKGroupName=function(z){if(z.eat(107)){if(this.regexp_eatGroupName(z))return z.backReferenceNames.push(z.lastStringValue),!0;z.raise("Invalid named reference")}return!1};Oa.regexp_eatCharacterEscape=function(z){return this.regexp_eatControlEscape(z)||this.regexp_eatCControlLetter(z)||this.regexp_eatZero(z)||this.regexp_eatHexEscapeSequence(z)||this.regexp_eatRegExpUnicodeEscapeSequence(z,!1)||!z.switchU&&this.regexp_eatLegacyOctalEscapeSequence(z)||this.regexp_eatIdentityEscape(z)};Oa.regexp_eatCControlLetter=
function(z){var X=z.pos;if(z.eat(99)){if(this.regexp_eatControlLetter(z))return!0;z.pos=X}return!1};Oa.regexp_eatZero=function(z){return 48!==z.current()||oa(z.lookahead())?!1:(z.lastIntValue=0,z.advance(),!0)};Oa.regexp_eatControlEscape=function(z){var X=z.current();return 116===X?(z.lastIntValue=9,z.advance(),!0):110===X?(z.lastIntValue=10,z.advance(),!0):118===X?(z.lastIntValue=11,z.advance(),!0):102===X?(z.lastIntValue=12,z.advance(),!0):114===X?(z.lastIntValue=13,z.advance(),!0):!1};Oa.regexp_eatControlLetter=
function(z){var X=z.current();return 65<=X&&90>=X||97<=X&&122>=X?(z.lastIntValue=X%32,z.advance(),!0):!1};Oa.regexp_eatRegExpUnicodeEscapeSequence=function(z,X){void 0===X&&(X=!1);var rb=z.pos;X=X||z.switchU;if(z.eat(117)){if(this.regexp_eatFixedHexDigits(z,4)){rb=z.lastIntValue;if(X&&55296<=rb&&56319>=rb){X=z.pos;if(z.eat(92)&&z.eat(117)&&this.regexp_eatFixedHexDigits(z,4)){var Wc=z.lastIntValue;if(56320<=Wc&&57343>=Wc)return z.lastIntValue=1024*(rb-55296)+(Wc-56320)+65536,!0}z.pos=X;z.lastIntValue=
rb}return!0}if(Wc=X&&z.eat(123)&&this.regexp_eatHexDigits(z)&&z.eat(125))Wc=z.lastIntValue,Wc=0<=Wc&&1114111>=Wc;if(Wc)return!0;X&&z.raise("Invalid unicode escape");z.pos=rb}return!1};Oa.regexp_eatIdentityEscape=function(z){if(z.switchU)return this.regexp_eatSyntaxCharacter(z)?!0:z.eat(47)?(z.lastIntValue=47,!0):!1;var X=z.current();return 99===X||z.switchN&&107===X?!1:(z.lastIntValue=X,z.advance(),!0)};Oa.regexp_eatDecimalEscape=function(z){z.lastIntValue=0;var X=z.current();if(49<=X&&57>=X){do z.lastIntValue=
10*z.lastIntValue+(X-48),z.advance();while(48<=(X=z.current())&&57>=X);return!0}return!1};Oa.regexp_eatCharacterClassEscape=function(z){var X=z.current();if(100===X||68===X||115===X||83===X||119===X||87===X)return z.lastIntValue=-1,z.advance(),!0;if(z.switchU&&9<=this.options.ecmaVersion&&(80===X||112===X)){z.lastIntValue=-1;z.advance();if(z.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(z)&&z.eat(125))return!0;z.raise("Invalid property name")}return!1};Oa.regexp_eatUnicodePropertyValueExpression=
function(z){var X=z.pos;if(this.regexp_eatUnicodePropertyName(z)&&z.eat(61)){var rb=z.lastStringValue;if(this.regexp_eatUnicodePropertyValue(z))return this.regexp_validateUnicodePropertyNameAndValue(z,rb,z.lastStringValue),!0}z.pos=X;return this.regexp_eatLoneUnicodePropertyNameOrValue(z)?(this.regexp_validateUnicodePropertyNameOrValue(z,z.lastStringValue),!0):!1};Oa.regexp_validateUnicodePropertyNameAndValue=function(z,X,rb){Aa.call(z.unicodeProperties.nonBinary,X)||z.raise("Invalid property name");
z.unicodeProperties.nonBinary[X].test(rb)||z.raise("Invalid property value")};Oa.regexp_validateUnicodePropertyNameOrValue=function(z,X){z.unicodeProperties.binary.test(X)||z.raise("Invalid property name")};Oa.regexp_eatUnicodePropertyName=function(z){var X;for(z.lastStringValue="";L(X=z.current());)z.lastStringValue+=D(X),z.advance();return""!==z.lastStringValue};Oa.regexp_eatUnicodePropertyValue=function(z){var X;for(z.lastStringValue="";G(X=z.current());)z.lastStringValue+=D(X),z.advance();return""!==
z.lastStringValue};Oa.regexp_eatLoneUnicodePropertyNameOrValue=function(z){return this.regexp_eatUnicodePropertyValue(z)};Oa.regexp_eatCharacterClass=function(z){if(z.eat(91)){z.eat(94);this.regexp_classRanges(z);if(z.eat(93))return!0;z.raise("Unterminated character class")}return!1};Oa.regexp_classRanges=function(z){for(;this.regexp_eatClassAtom(z);){var X=z.lastIntValue;if(z.eat(45)&&this.regexp_eatClassAtom(z)){var rb=z.lastIntValue;!z.switchU||-1!==X&&-1!==rb||z.raise("Invalid character class");
-1!==X&&-1!==rb&&X>rb&&z.raise("Range out of order in character class")}}};Oa.regexp_eatClassAtom=function(z){var X=z.pos;if(z.eat(92)){if(this.regexp_eatClassEscape(z))return!0;if(z.switchU){var rb=z.current();(99===rb||48<=rb&&55>=rb)&&z.raise("Invalid class escape");z.raise("Invalid escape")}z.pos=X}X=z.current();return 93!==X?(z.lastIntValue=X,z.advance(),!0):!1};Oa.regexp_eatClassEscape=function(z){var X=z.pos;if(z.eat(98))return z.lastIntValue=8,!0;if(z.switchU&&z.eat(45))return z.lastIntValue=
45,!0;if(!z.switchU&&z.eat(99)){if(this.regexp_eatClassControlLetter(z))return!0;z.pos=X}return this.regexp_eatCharacterClassEscape(z)||this.regexp_eatCharacterEscape(z)};Oa.regexp_eatClassControlLetter=function(z){var X=z.current();return oa(X)||95===X?(z.lastIntValue=X%32,z.advance(),!0):!1};Oa.regexp_eatHexEscapeSequence=function(z){var X=z.pos;if(z.eat(120)){if(this.regexp_eatFixedHexDigits(z,2))return!0;z.switchU&&z.raise("Invalid escape");z.pos=X}return!1};Oa.regexp_eatDecimalDigits=function(z){var X=
z.pos,rb;for(z.lastIntValue=0;oa(rb=z.current());)z.lastIntValue=10*z.lastIntValue+(rb-48),z.advance();return z.pos!==X};Oa.regexp_eatHexDigits=function(z){var X=z.pos,rb;for(z.lastIntValue=0;ha(rb=z.current());)z.lastIntValue=16*z.lastIntValue+Ha(rb),z.advance();return z.pos!==X};Oa.regexp_eatLegacyOctalEscapeSequence=function(z){if(this.regexp_eatOctalDigit(z)){var X=z.lastIntValue;if(this.regexp_eatOctalDigit(z)){var rb=z.lastIntValue;3>=X&&this.regexp_eatOctalDigit(z)?z.lastIntValue=64*X+8*rb+
z.lastIntValue:z.lastIntValue=8*X+rb}else z.lastIntValue=X;return!0}return!1};Oa.regexp_eatOctalDigit=function(z){var X=z.current();if(48<=X&&55>=X)return z.lastIntValue=X-48,z.advance(),!0;z.lastIntValue=0;return!1};Oa.regexp_eatFixedHexDigits=function(z,X){for(var rb=z.pos,Wc=z.lastIntValue=0;Wc<X;++Wc){var Sd=z.current();if(!ha(Sd))return z.pos=rb,!1;z.lastIntValue=16*z.lastIntValue+Ha(Sd);z.advance()}return!0};var I=function(z){this.type=z.type;this.value=z.value;this.start=z.start;this.end=z.end;
z.options.locations&&(this.loc=new U(z,z.startLoc,z.endLoc));z.options.ranges&&(this.range=[z.start,z.end])};Oa=Sc.prototype;Oa.next=function(z){!z&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword);if(this.options.onToken)this.options.onToken(new I(this));this.lastTokEnd=this.end;this.lastTokStart=this.start;this.lastTokEndLoc=this.endLoc;this.lastTokStartLoc=this.startLoc;this.nextToken()};Oa.getToken=function(){this.next();return new I(this)};
"undefined"!==typeof Symbol&&(Oa[Symbol.iterator]=function(){var z=this;return{next:function(){var X=z.getToken();return{done:X.type===la.eof,value:X}}}});Oa.nextToken=function(){var z=this.curContext();z&&z.preserveSpace||this.skipSpace();this.start=this.pos;this.options.locations&&(this.startLoc=this.curPosition());if(this.pos>=this.input.length)return this.finishToken(la.eof);if(z.override)return z.override(this);this.readToken(this.fullCharCodeAtPos())};Oa.readToken=function(z){return c(z,6<=
this.options.ecmaVersion)||92===z?this.readWord():this.getTokenFromCode(z)};Oa.fullCharCodeAtPos=function(){var z=this.input.charCodeAt(this.pos);if(55295>=z||56320<=z)return z;var X=this.input.charCodeAt(this.pos+1);return 56319>=X||57344<=X?z:(z<<10)+X-56613888};Oa.skipBlockComment=function(){var z=this.options.onComment&&this.curPosition(),X=this.pos,rb=this.input.indexOf("*/",this.pos+=2);-1===rb&&this.raise(this.pos-2,"Unterminated comment");this.pos=rb+2;if(this.options.locations){dd.lastIndex=
X;for(var Wc;(Wc=dd.exec(this.input))&&Wc.index<this.pos;)++this.curLine,this.lineStart=Wc.index+Wc[0].length}if(this.options.onComment)this.options.onComment(!0,this.input.slice(X+2,rb),X,this.pos,z,this.curPosition())};Oa.skipLineComment=function(z){for(var X=this.pos,rb=this.options.onComment&&this.curPosition(),Wc=this.input.charCodeAt(this.pos+=z);this.pos<this.input.length&&!f(Wc);)Wc=this.input.charCodeAt(++this.pos);if(this.options.onComment)this.options.onComment(!1,this.input.slice(X+z,
this.pos),X,this.pos,rb,this.curPosition())};Oa.skipSpace=function(){a:for(;this.pos<this.input.length;){var z=this.input.charCodeAt(this.pos);switch(z){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos;this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;
default:if(8<z&&14>z||5760<=z&&Kd.test(String.fromCharCode(z)))++this.pos;else break a}}};Oa.finishToken=function(z,X){this.end=this.pos;this.options.locations&&(this.endLoc=this.curPosition());var rb=this.type;this.type=z;this.value=X;this.updateContext(rb)};Oa.readToken_dot=function(){var z=this.input.charCodeAt(this.pos+1);if(48<=z&&57>=z)return this.readNumber(!0);var X=this.input.charCodeAt(this.pos+2);if(6<=this.options.ecmaVersion&&46===z&&46===X)return this.pos+=3,this.finishToken(la.ellipsis);
++this.pos;return this.finishToken(la.dot)};Oa.readToken_slash=function(){var z=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===z?this.finishOp(la.assign,2):this.finishOp(la.slash,1)};Oa.readToken_mult_modulo_exp=function(z){var X=this.input.charCodeAt(this.pos+1),rb=1,Wc=42===z?la.star:la.modulo;7<=this.options.ecmaVersion&&42===z&&42===X&&(++rb,Wc=la.starstar,X=this.input.charCodeAt(this.pos+2));return 61===X?this.finishOp(la.assign,rb+1):this.finishOp(Wc,
rb)};Oa.readToken_pipe_amp=function(z){var X=this.input.charCodeAt(this.pos+1);return X===z?12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(la.assign,3):this.finishOp(124===z?la.logicalOR:la.logicalAND,2):61===X?this.finishOp(la.assign,2):this.finishOp(124===z?la.bitwiseOR:la.bitwiseAND,1)};Oa.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(la.assign,2):this.finishOp(la.bitwiseXOR,1)};Oa.readToken_plus_min=function(z){var X=
this.input.charCodeAt(this.pos+1);return X===z?45!==X||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!$a.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(la.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===X?this.finishOp(la.assign,2):this.finishOp(la.plusMin,1)};Oa.readToken_lt_gt=function(z){var X=this.input.charCodeAt(this.pos+1),rb=1;if(X===z)return rb=62===z&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+
rb)?this.finishOp(la.assign,rb+1):this.finishOp(la.bitShift,rb);if(33===X&&60===z&&!this.inModule&&45===this.input.charCodeAt(this.pos+2)&&45===this.input.charCodeAt(this.pos+3))return this.skipLineComment(4),this.skipSpace(),this.nextToken();61===X&&(rb=2);return this.finishOp(la.relational,rb)};Oa.readToken_eq_excl=function(z){var X=this.input.charCodeAt(this.pos+1);return 61===X?this.finishOp(la.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===z&&62===X&&6<=this.options.ecmaVersion?(this.pos+=
2,this.finishToken(la.arrow)):this.finishOp(61===z?la.eq:la.prefix,1)};Oa.readToken_question=function(){var z=this.options.ecmaVersion;if(11<=z){var X=this.input.charCodeAt(this.pos+1);if(46===X){var rb=this.input.charCodeAt(this.pos+2);if(48>rb||57<rb)return this.finishOp(la.questionDot,2)}if(63===X)return 12<=z&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(la.assign,3):this.finishOp(la.coalesce,2)}return this.finishOp(la.question,1)};Oa.readToken_numberSign=function(){var z=35;if(13<=this.options.ecmaVersion&&
(++this.pos,z=this.fullCharCodeAtPos(),c(z,!0)||92===z))return this.finishToken(la.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+hc(z)+"'")};Oa.getTokenFromCode=function(z){switch(z){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(la.parenL);case 41:return++this.pos,this.finishToken(la.parenR);case 59:return++this.pos,this.finishToken(la.semi);case 44:return++this.pos,this.finishToken(la.comma);case 91:return++this.pos,this.finishToken(la.bracketL);
case 93:return++this.pos,this.finishToken(la.bracketR);case 123:return++this.pos,this.finishToken(la.braceL);case 125:return++this.pos,this.finishToken(la.braceR);case 58:return++this.pos,this.finishToken(la.colon);case 96:if(6>this.options.ecmaVersion)break;++this.pos;return this.finishToken(la.backQuote);case 48:z=this.input.charCodeAt(this.pos+1);if(120===z||88===z)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===z||79===z)return this.readRadixNumber(8);if(98===z||66===
z)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(z);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(z);case 124:case 38:return this.readToken_pipe_amp(z);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(z);case 60:case 62:return this.readToken_lt_gt(z);case 61:case 33:return this.readToken_eq_excl(z);
case 63:return this.readToken_question();case 126:return this.finishOp(la.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+hc(z)+"'")};Oa.finishOp=function(z,X){var rb=this.input.slice(this.pos,this.pos+X);this.pos+=X;return this.finishToken(z,rb)};Oa.readRegexp=function(){for(var z,X,rb=this.pos;;){this.pos>=this.input.length&&this.raise(rb,"Unterminated regular expression");var Wc=this.input.charAt(this.pos);$a.test(Wc)&&this.raise(rb,"Unterminated regular expression");
if(z)z=!1;else{if("["===Wc)X=!0;else if("]"===Wc&&X)X=!1;else if("/"===Wc&&!X)break;z="\\"===Wc}++this.pos}z=this.input.slice(rb,this.pos);++this.pos;Wc=this.pos;X=this.readWord1();this.containsEsc&&this.unexpected(Wc);Wc=this.regexpState||(this.regexpState=new dj(this));Wc.reset(rb,z,X);this.validateRegExpFlags(Wc);this.validateRegExpPattern(Wc);rb=null;try{rb=new RegExp(z,X)}catch(Sd){}return this.finishToken(la.regexp,{pattern:z,flags:X,value:rb})};Oa.readInt=function(z,X,rb){var Wc=12<=this.options.ecmaVersion&&
void 0===X;rb=rb&&48===this.input.charCodeAt(this.pos);for(var Sd=this.pos,hf=0,vf=0,Xf=0,uh=null==X?Infinity:X;Xf<uh;++Xf,++this.pos){var Yh=this.input.charCodeAt(this.pos);if(Wc&&95===Yh)rb&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===vf&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===Xf&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),vf=Yh;else{var Mi=
97<=Yh?Yh-97+10:65<=Yh?Yh-65+10:48<=Yh&&57>=Yh?Yh-48:Infinity;if(Mi>=z)break;vf=Yh;hf=hf*z+Mi}}Wc&&95===vf&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits");return this.pos===Sd||null!=X&&this.pos-Sd!==X?null:hf};Oa.readRadixNumber=function(z){var X=this.pos;this.pos+=2;var rb=this.readInt(z);null==rb&&this.raise(this.start+2,"Expected number in radix "+z);11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(rb=Va(this.input.slice(X,this.pos)),
++this.pos):c(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");return this.finishToken(la.num,rb)};Oa.readNumber=function(z){var X=this.pos;z||null!==this.readInt(10,void 0,!0)||this.raise(X,"Invalid number");var rb=2<=this.pos-X&&48===this.input.charCodeAt(X);rb&&this.strict&&this.raise(X,"Invalid number");var Wc=this.input.charCodeAt(this.pos);if(!rb&&!z&&11<=this.options.ecmaVersion&&110===Wc)return rb=Va(this.input.slice(X,this.pos)),++this.pos,c(this.fullCharCodeAtPos())&&
this.raise(this.pos,"Identifier directly after number"),this.finishToken(la.num,rb);rb&&/[89]/.test(this.input.slice(X,this.pos))&&(rb=!1);46!==Wc||rb||(++this.pos,this.readInt(10),Wc=this.input.charCodeAt(this.pos));69!==Wc&&101!==Wc||rb||(Wc=this.input.charCodeAt(++this.pos),43!==Wc&&45!==Wc||++this.pos,null===this.readInt(10)&&this.raise(X,"Invalid number"));c(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");z=this.input.slice(X,this.pos);rb=rb?parseInt(z,8):parseFloat(z.replace(/_/g,
""));return this.finishToken(la.num,rb)};Oa.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>this.options.ecmaVersion&&this.unexpected();var z=++this.pos;var X=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos;1114111<X&&this.invalidStringToken(z,"Code point out of bounds")}else X=this.readHexChar(4);return X};Oa.readString=function(z){for(var X="",rb=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var Wc=this.input.charCodeAt(this.pos);
if(Wc===z)break;92===Wc?(X+=this.input.slice(rb,this.pos),X+=this.readEscapedChar(!1),rb=this.pos):8232===Wc||8233===Wc?(10>this.options.ecmaVersion&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(f(Wc)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}X+=this.input.slice(rb,this.pos++);return this.finishToken(la.string,X)};var Na={};Oa.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(z){if(z===
Na)this.readInvalidTemplateToken();else throw z;}this.inTemplateElement=!1};Oa.invalidStringToken=function(z,X){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw Na;this.raise(z,X)};Oa.readTmplToken=function(){for(var z="",X=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var rb=this.input.charCodeAt(this.pos);if(96===rb||36===rb&&123===this.input.charCodeAt(this.pos+1)){if(this.pos===this.start&&(this.type===la.template||this.type===la.invalidTemplate)){if(36===
rb)return this.pos+=2,this.finishToken(la.dollarBraceL);++this.pos;return this.finishToken(la.backQuote)}z+=this.input.slice(X,this.pos);return this.finishToken(la.template,z)}if(92===rb)z+=this.input.slice(X,this.pos),z+=this.readEscapedChar(!0),X=this.pos;else if(f(rb)){z+=this.input.slice(X,this.pos);++this.pos;switch(rb){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:z+="\n";break;default:z+=String.fromCharCode(rb)}this.options.locations&&(++this.curLine,this.lineStart=this.pos);
X=this.pos}else++this.pos}};Oa.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case "\\":++this.pos;break;case "$":if("{"!==this.input[this.pos+1])break;case "`":return this.finishToken(la.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Oa.readEscapedChar=function(z){var X=this.input.charCodeAt(++this.pos);++this.pos;switch(X){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));
case 117:return hc(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),z)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),null;default:if(48<=X&&55>=X){var rb=this.input.substr(this.pos-
1,3).match(/^[0-7]+/)[0],Wc=parseInt(rb,8);255<Wc&&(rb=rb.slice(0,-1),Wc=parseInt(rb,8));this.pos+=rb.length-1;X=this.input.charCodeAt(this.pos);"0"===rb&&56!==X&&57!==X||!this.strict&&!z||this.invalidStringToken(this.pos-1-rb.length,z?"Octal literal in template string":"Octal literal in strict mode");return String.fromCharCode(Wc)}return f(X)?"":String.fromCharCode(X)}};Oa.readHexChar=function(z){var X=this.pos;z=this.readInt(16,z);null===z&&this.invalidStringToken(X,"Bad character escape sequence");
return z};Oa.readWord1=function(){this.containsEsc=!1;for(var z="",X=!0,rb=this.pos,Wc=6<=this.options.ecmaVersion;this.pos<this.input.length;){var Sd=this.fullCharCodeAtPos();if(g(Sd,Wc))this.pos+=65535>=Sd?1:2;else if(92===Sd)this.containsEsc=!0,z+=this.input.slice(rb,this.pos),rb=this.pos,117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,Sd=this.readCodePoint(),(X?c:g)(Sd,Wc)||this.invalidStringToken(rb,"Invalid Unicode escape"),
z+=hc(Sd),rb=this.pos;else break;X=!1}return z+this.input.slice(rb,this.pos)};Oa.readWord=function(){var z=this.readWord1(),X=la.name;this.keywords.test(z)&&(X=md[z]);return this.finishToken(X,z)};Sc.acorn={Parser:Sc,version:"8.5.0",defaultOptions:Sa,Position:Mb,SourceLocation:U,getLineInfo:n,Node:Ei,TokenType:$c,tokTypes:la,keywordTypes:md,TokContext:xa,tokContexts:pg,isIdentifierChar:g,isIdentifierStart:c,Token:I,isNewLine:f,lineBreak:$a,lineBreakG:dd,nonASCIIwhitespace:Kd};l.Node=Ei;l.Parser=Sc;
l.Position=Mb;l.SourceLocation=U;l.TokContext=xa;l.Token=I;l.TokenType=$c;l.defaultOptions=Sa;l.getLineInfo=n;l.isIdentifierChar=g;l.isIdentifierStart=c;l.isNewLine=f;l.keywordTypes=md;l.lineBreak=$a;l.lineBreakG=dd;l.nonASCIIwhitespace=Kd;l.parse=function(z,X){return Sc.parse(z,X)};l.parseExpressionAt=function(z,X,rb){return Sc.parseExpressionAt(z,X,rb)};l.tokContexts=pg;l.tokTypes=la;l.tokenizer=function(z,X){return Sc.tokenizer(z,X)};l.version="8.5.0";Object.defineProperty(l,"__esModule",{value:!0})})})(rl.acornModule,
rl.acorn);return rl.acorn}function jt(e,h,l,b){var c=[];b=b||sf.walk.make(sf.custom.visitors.withMemberExpression);Object.keys(sf.walk.base).forEach(function(g){var a=b[g];b[g]=function(d,f,k){sf.arr.pushIfNotIncluded(c,d);return a(d,f,k)}});b.Property=function(g,a,d){sf.arr.pushIfNotIncluded(c,g);d(g.key,a,"Expression");d(g.value,a,"Expression")};b.LabeledStatement=function(g,a,d){g.label&&d(g.label,a,"Expression");d(g.body,a,"Statement")};sf.walk.findNodeAround(e,h,l,b);return c}function Ro(e,h){function l(c){return null===
c?null:b[c.type](c,l)}var b=sf.obj.extend({Program:function(c,g){return{start:c.start,end:c.end,type:"Program",body:c.body.map(g),source:c.source,astIndex:c.astIndex}},FunctionDeclaration:function(c,g){return{start:c.start,end:c.end,type:"FunctionDeclaration",id:g(c.id),params:c.params.map(g),body:g(c.body),source:c.source,astIndex:c.astIndex}},BlockStatement:function(c,g){return{start:c.start,end:c.end,type:"BlockStatement",body:c.body.map(g),source:c.source,astIndex:c.astIndex}},ExpressionStatement:function(c,
g){return{start:c.start,end:c.end,type:"ExpressionStatement",expression:g(c.expression),source:c.source,astIndex:c.astIndex}},CallExpression:function(c,g){return{start:c.start,end:c.end,type:"CallExpression",callee:g(c.callee),arguments:c.arguments.map(g),source:c.source,astIndex:c.astIndex}},MemberExpression:function(c,g){return{start:c.start,end:c.end,type:"MemberExpression",object:g(c.object),property:g(c.property),computed:c.computed,source:c.source,astIndex:c.astIndex}},NewExpression:function(c,
g){return{start:c.start,end:c.end,type:"NewExpression",callee:g(c.callee),arguments:c.arguments.map(g),source:c.source,astIndex:c.astIndex}},VariableDeclaration:function(c,g){return{start:c.start,end:c.end,type:"VariableDeclaration",declarations:c.declarations.map(g),kind:c.kind,source:c.source,astIndex:c.astIndex}},VariableDeclarator:function(c,g){return{start:c.start,end:c.end,type:"VariableDeclarator",id:g(c.id),init:g(c.init),source:c.source,astIndex:c.astIndex}},FunctionExpression:function(c,
g){return{start:c.start,end:c.end,type:"FunctionExpression",id:g(c.id),params:c.params.map(g),body:g(c.body),source:c.source,astIndex:c.astIndex}},IfStatement:function(c,g){return{start:c.start,end:c.end,type:"IfStatement",test:g(c.test),consequent:g(c.consequent),alternate:g(c.alternate),source:c.source,astIndex:c.astIndex}},ConditionalExpression:function(c,g){return{start:c.start,end:c.end,type:"ConditionalExpression",test:g(c.test),consequent:g(c.consequent),alternate:g(c.alternate),source:c.source,
astIndex:c.astIndex}},SwitchStatement:function(c,g){return{start:c.start,end:c.end,type:"SwitchStatement",discriminant:g(c.discriminant),cases:c.cases.map(g),source:c.source,astIndex:c.astIndex}},SwitchCase:function(c,g){return{start:c.start,end:c.end,type:"SwitchCase",test:g(c.test),consequent:c.consequent.map(g),source:c.source,astIndex:c.astIndex}},BreakStatement:function(c,g){return{start:c.start,end:c.end,type:"BreakStatement",label:c.label,source:c.source,astIndex:c.astIndex}},ContinueStatement:function(c,
g){return{start:c.start,end:c.end,type:"ContinueStatement",label:c.label,source:c.source,astIndex:c.astIndex}},TryStatement:function(c,g){return{start:c.start,end:c.end,type:"TryStatement",block:g(c.block),handler:g(c.handler),finalizer:g(c.finalizer),guardedHandlers:c.guardedHandlers.map(g),source:c.source,astIndex:c.astIndex}},CatchClause:function(c,g){return{start:c.start,end:c.end,type:"CatchClause",param:g(c.param),guard:g(c.guard),body:g(c.body),source:c.source,astIndex:c.astIndex}},ThrowStatement:function(c,
g){return{start:c.start,end:c.end,type:"ThrowStatement",argument:g(c.argument),source:c.source,astIndex:c.astIndex}},ForStatement:function(c,g){return{start:c.start,end:c.end,type:"ForStatement",init:g(c.init),test:g(c.test),update:g(c.update),body:g(c.body),source:c.source,astIndex:c.astIndex}},ForInStatement:function(c,g){return{start:c.start,end:c.end,type:"ForInStatement",left:g(c.left),right:g(c.right),body:g(c.body),source:c.source,astIndex:c.astIndex}},WhileStatement:function(c,g){return{start:c.start,
end:c.end,type:"WhileStatement",test:g(c.test),body:g(c.body),source:c.source,astIndex:c.astIndex}},DoWhileStatement:function(c,g){return{start:c.start,end:c.end,type:"DoWhileStatement",test:g(c.test),body:g(c.body),source:c.source,astIndex:c.astIndex}},WithStatement:function(c,g){return{start:c.start,end:c.end,type:"WithStatement",object:g(c.object),body:g(c.body),source:c.source,astIndex:c.astIndex}},UnaryExpression:function(c,g){return{start:c.start,end:c.end,type:"UnaryExpression",argument:g(c.argument),
operator:c.operator,prefix:c.prefix,source:c.source,astIndex:c.astIndex}},BinaryExpression:function(c,g){return{start:c.start,end:c.end,type:"BinaryExpression",left:g(c.left),operator:c.operator,right:g(c.right),source:c.source,astIndex:c.astIndex}},LogicalExpression:function(c,g){return{start:c.start,end:c.end,type:"LogicalExpression",left:g(c.left),operator:c.operator,right:g(c.right),source:c.source,astIndex:c.astIndex}},AssignmentExpression:function(c,g){return{start:c.start,end:c.end,type:"AssignmentExpression",
left:g(c.left),operator:c.operator,right:g(c.right),source:c.source,astIndex:c.astIndex}},UpdateExpression:function(c,g){return{start:c.start,end:c.end,type:"UpdateExpression",argument:g(c.argument),operator:c.operator,prefix:c.prefix,source:c.source,astIndex:c.astIndex}},ReturnStatement:function(c,g){return{start:c.start,end:c.end,type:"ReturnStatement",argument:g(c.argument),source:c.source,astIndex:c.astIndex}},Identifier:function(c,g){return{start:c.start,end:c.end,type:"Identifier",name:c.name,
source:c.source,astIndex:c.astIndex}},Literal:function(c,g){return{start:c.start,end:c.end,type:"Literal",value:c.value,raw:c.raw,source:c.source,astIndex:c.astIndex}},ObjectExpression:function(c,g){return{start:c.start,end:c.end,type:"ObjectExpression",properties:c.properties.map(function(a){return{key:g(a.key),value:g(a.value),kind:a.kind}}),source:c.source,astIndex:c.astIndex}},ArrayExpression:function(c,g){return{start:c.start,end:c.end,type:"ArrayExpression",elements:c.elements.map(g),source:c.source,
astIndex:c.astIndex}},SequenceExpression:function(c,g){return{start:c.start,end:c.end,type:"SequenceExpression",expressions:c.expressions.map(g),source:c.source,astIndex:c.astIndex}},EmptyStatement:function(c,g){return{start:c.start,end:c.end,type:"EmptyStatement",source:c.source,astIndex:c.astIndex}},ThisExpression:function(c,g){return{start:c.start,end:c.end,type:"ThisExpression",source:c.source,astIndex:c.astIndex}},DebuggerStatement:function(c,g){return{start:c.start,end:c.end,type:"DebuggerStatement",
source:c.source,astIndex:c.astIndex}},LabeledStatement:function(c,g){return{start:c.start,end:c.end,type:"LabeledStatement",label:c.label,body:g(c.body),source:c.source,astIndex:c.astIndex}}},h||{});return l(e)}function qv(e,h,l){if(!h)return[];e=sf.findNodesIncluding(e,h.start);var b=e.indexOf(h);e=e.slice(0,b).reverse().find(function(c){return Array.isArray(c.body)}).body;if(!l)return sf.arr.without(e,h);h=e.indexOf(h);return"before"===l?e.slice(0,h):e.slice(h+1)}function rv(e,h,l){e.astIndex||
null!=l&&!l||sf.addAstIndex(e);var b=null;sf.withMozillaAstDo(e,null,function(c,g,a){b||g.astIndex<h||(g.astIndex===h?b=g:c())});return b}function xm(e,h,l){l||(l=h,h=e,e=null);e||(e={});h.astIndex||sf.addAstIndex(h);var b,c=!1,g="EmptyStatement BlockStatement ExpressionStatement IfStatement LabeledStatement BreakStatement ContinueStatement WithStatement SwitchStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration".split(" ");
sf.withMozillaAstDo(h,{},function(a,d,f,k){if(!(c||d.astIndex<l.astIndex)){if(d===l||d.astIndex===l.astIndex)if(c=!0,e.asPath)b=k;else{d=sf.Path(k);do b=d.get(h),d=d.slice(0,d.size()-1);while(-1==g.indexOf(b.type)&&0<d.size())}!c&&a()}});return b}function Lp(e){sf.withMozillaAstDo(e,{index:0},function(h,l,b){h();l.astIndex=b.index++});return e}function kt(e,h){"string"===typeof e&&(h=e,e=Zh.parse(e));h&&Zh.AllNodesVisitor.run(e,function(l,b,c){return!l.source&&(l.source=h.slice(l.start,l.end))});
return e}function So(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=Zh.parse("("+e+")",h);Zh.AllNodesVisitor.run(l,function(b,c,g){if(!b._positionFixed){b._positionFixed=!0;if(b.start||0===b.start)b.start+=-1,b.end+=-1;h.addSource&&!b.source&&(b.source=e.slice(b.start,b.end))}});return l.body[0].expression}function To(e,h){h=h||{};h.ecmaVersion=h.ecmaVersion||11;h.sourceType=h.sourceType||"module";h.plugins=h.plugins||{};var l=[];h.withComments&&(h.onComment=function(a,d){return l.push({isBlock:a,
text:d})});h.plugins.jsx=h.plugins.hasOwnProperty("jsx")?h.plugins.jsx:!0;h.plugins.asyncawait=h.plugins.hasOwnProperty("asyncawait")?h.plugins.asyncawait:{inAsyncFunction:!0};h.plugins.objectSpread=h.plugins.hasOwnProperty("objectSpread")?h.plugins.objectSpread:!0;var b;"LabeledStatement"===h.type&&(b="$={"+e+"}");try{var c=Zh.parse(b||e,h);b?c=null:h.addSource&&Zh.addSource(c,e)}catch(a){var g=a}g&&void 0!==g.raisedAt?(b&&(g.pos-=3,g.raisedAt-=3,g.loc.column-=3),b=""+e.slice(g.raisedAt-20,g.raisedAt),
b=b+"<-error->"+e.slice(g.raisedAt,g.raisedAt+20),h.verbose&&console.log("parse error: "+b),g.parseErrorSource=b):g&&h.verbose&&console.log(""+g+g.stack);c||(c=Zh.loose.parse(e,h),h.addSource&&Zh.addSource(c,e),c.isFuzzy=!0,c.parseError=g);h.withComments&&(c.comments=l);return c}function Qj(e,h){function l(p){p=c(b(p));a.allComments=p.comments}function b(p){g.forEach(function(q){var r=Zh.nodesAt(q.start,a).reverse().find(function(t){return"BlockStatement"===t.type||"Program"===t.type});r||(r=a);r.comments||
(r.comments=[]);r.comments.push(q);p.nodesWithComments.push(r)});return p}function c(p){p.nodesWithComments.forEach(function(q){Zh.arr.clone(q.comments).reduce(function(r,t){if(t.isBlock)return r.lastComment=null,r;if(!r.lastComment)return r.lastComment=t,r;var w=r.lastComment;if(q.body.find(function(B){return B.start>=w.end&&B.end<=t.start}))return r.lastComment=t,r;var x=e.slice(w.end,t.start);if(/[\n\r][\n\r]+/.test(x))return r.lastComment=t,r;w.text+="\n"+t.text;w.end=t.end;Zh.arr.remove(q.comments,
t);Zh.arr.remove(p.comments,t);return r},{lastComment:null})});return p}h=h||{};h.ecmaVersion=h.ecmaVersion||11;h.allowAwaitOutsideFunction=!0;h.sourceType=h.sourceType||"module";h.hasOwnProperty("allowImportExportEverywhere")||(h.allowImportExportEverywhere=!0);h.plugins=h.plugins||{};h.plugins.jsx=h.plugins.hasOwnProperty("jsx")?h.plugins.jsx:!0;h.plugins.asyncawait=h.plugins.hasOwnProperty("asyncawait")?h.plugins.asyncawait:{inAsyncFunction:!0};h.plugins.objectSpread=h.plugins.hasOwnProperty("objectSpread")?
h.plugins.objectSpread:!0;if(h.withComments){delete h.withComments;var g=[];h.onComment=function(p,q,r,t,w,x){g.push({isBlock:p,text:q,node:null,start:r,end:t,line:w,column:x})}}try{var a=Zh.acorn.parse(e,h)}catch(p){if("undefined"!==typeof SyntaxError&&p instanceof SyntaxError&&p.loc){var d=e.split("\n"),f=p.message,k=p.loc;h=k.line;k=k.column;var n=p.pos;d=d[h-1];f="Syntax error at line ".concat(h," column ").concat(k," (index ").concat(n,') "').concat(f,'"\nsource: ').concat(d.slice(0,k),"<--SyntaxError--\x3e").concat(d.slice(k));
f=new SyntaxError(f);f.loc={line:h,column:k};f.pos=n;throw f;}throw p;}h.addSource&&Zh.addSource(a,e);h.addAstIndex&&!a.hasOwnProperty("astIndex")&&Zh.addAstIndex(a);a&&g&&l({ast:a,comments:g,nodesWithComments:[]});return a}function sv(e){return wg.identifierRe.test(e)&&-1===e.indexOf("-")}function mr(e){return"this"===e?{type:"ThisExpression"}:{name:String(e),type:"Identifier"}}function nr(e){return{type:"Literal",value:e}}function Uo(e){return{type:"ExpressionStatement",expression:e}}function or(){for(var e=
arguments.length,h=Array(e),l=0;l<e;l++)h[l]=arguments[l];return{type:"SequenceExpression",expressions:h}}function Mp(e){return{type:"ReturnStatement",argument:e}}function pr(){return{type:"EmptyStatement"}}function lt(e,h,l){return{left:e,right:l,operator:h,type:"BinaryExpression"}}function qr(e){var h=e.arrow,l=e.id,b=e.expression,c=e.generator,g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];g=g.map(function(k){return"string"===typeof k?wg.id(k):k});for(var a=arguments.length,d=Array(2<
a?a-2:0),f=2;f<a;f++)d[f-2]=arguments[f];return{type:(h?"Arrow":"")+"FunctionExpression",id:l?"string"===typeof l?wg.id(l):l:void 0,params:g,body:b&&1===d.length?d[0]:{body:d,type:"BlockStatement"},expression:b||!1,generator:c||!1}}function Un(e){"string"===typeof e&&(e=wg.id(e));for(var h=arguments.length,l=Array(1<h?h-1:0),b=1;b<h;b++)l[b-1]=arguments[b];return{type:"CallExpression",callee:e,arguments:l}}function Np(e,h,l){"string"===typeof e&&(e={name:e,type:"Identifier"});return{type:"VariableDeclaration",
kind:l||"var",declarations:[{type:"VariableDeclarator",id:e,init:h}]}}function rr(e,h,l){"string"===typeof e&&(e=wg.id(e));"string"===typeof h?(l||wg.isIdentifier(h)||(l=!0),h=l?wg.literal(h):wg.id(h)):"number"===typeof h?(h=wg.literal(h),l=!0):"Literal"===h.type&&(l=!0);return{type:"MemberExpression",computed:!!l,object:e,property:h}}function mt(e){for(var h=arguments.length,l=Array(1<h?h-1:0),b=1;b<h;b++)l[b-1]=arguments[b];return l.reduce(function(c,g){return wg.member(c,g)},"object"===Jc(e)?e:
wg.id(e))}function Vo(e,h){return{type:"AssignmentExpression",operator:"=",right:h?"string"===typeof h?wg.id(h):h:wg.id("undefined"),left:"string"===typeof e?wg.id(e):e}}function Vn(){for(var e=arguments.length,h=Array(e),l=0;l<e;l++)h[l]=arguments[l];return{body:Array.isArray(h[0])?h[0]:h,type:"BlockStatement"}}function nt(){return Object.assign(wg.block.apply(wg,arguments),{sourceType:"module",type:"Program"})}function sr(e,h,l){for(var b=arguments.length,c=Array(3<b?b-3:0),g=3;g<b;g++)c[g-3]=arguments[g];
Array.isArray(l)||(c.unshift(l),l=null);return{block:wg.block(c),finalizer:l?wg.block(l):null,handler:{body:wg.block(h),param:wg.id(e),type:"CatchClause"},type:"TryStatement"}}function tv(e,h){return{type:"Property",key:e,computed:"Identifier"!==e.type,shorthand:!1,value:h}}function uv(e){for(var h=[],l=0;l<e.length;l+=2){var b=e[l];"string"===typeof b&&(b=wg.id(b));h.push(wg.prop(b,e[l+1]))}return{properties:h,type:"ObjectExpression"}}function ot(e){var h=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:wg.block(),l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:wg.block();return{consequent:h,alternate:l,test:e,type:"IfStatement"}}function pt(e,h,l){return{type:"ForInStatement",left:"string"===typeof e?wg.varDecl(e):e,right:"string"===typeof h?wg.id(h):h,body:l}}function qt(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:wg.id("undefined"),l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:wg.id("undefined");return{consequent:h,alternate:l,test:e,type:"ConditionalExpression"}}
function vv(e,h,l){return{operator:e,left:h,right:l,type:"LogicalExpression"}}function rt(e){var h=new wf.ScopeVisitor,l=h.newScope(e,null);h.accept(e,l,[]);return l}function st(e,h){return wf.withMozillaAstDo(e,[],function(l,b,c){b.start<=h&&h<=b.end&&(c.push(b),l());return c})}function tt(e,h){return wf.tree.filter(wf.scopes(e),function(l){l=l.node;var b=l.start,c=l.end;"FunctionDeclaration"===l.type&&(b=l.params.length?l.params[0].start:l.body.start,c=l.body.end);return b<=h&&h<=c},function(l){return l.subScopes})}
function wv(e,h){return wf.arr.last(wf.scopesAtIndex(e,h))}function tr(e,h){return wf.nodesAt(e,h).filter(function(l){return"Program"===l.type||"FunctionDeclaration"===l.type||"FunctionExpression"===l.type})}function ut(e){return wf.withMozillaAstDo(e,{root:e,result:[]},function(h,l,b){b.result.push(l);if(l!==b.root&&("Program"===l.type||"FunctionDeclaration"===l.type||"FunctionExpression"===l.type))return b;h();return b}).result}function xv(e,h){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:
[];h&&e.node.id&&e.node.id.name&&l.push(e.node.id);wf.helpers.declIds(e.params,l);for(var b=0;b<e.funcDecls.length;b++){var c=e.funcDecls[b].id;c&&l.push(c)}wf.helpers.varDeclIds(e,l);l.push.apply(l,hb(e.catches));for(b=0;b<e.classDecls.length;b++)(c=e.classDecls[b].id)&&l.push(c);l.push.apply(l,hb(e.importSpecifiers));return wf.arr.compact(l)}function yv(e,h){var l=[],b=ba(wf.declarationsOfScope(e,!0)),c;try{for(b.s();!(c=b.n()).done;)l.push(c.value.name)}catch(g){b.e(g)}finally{b.f()}h&&wf._findJsLintGlobalDeclarations("Program"===
e.node.type?e.node:e.node.body,l);return l}function zv(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(!e||!e.comments)return h;var l=ba(e.comments),b;try{for(l.s();!(b=l.n()).done;){var c=b.value.text.trim();if(c.startsWith("global")){var g=ba(c.replace(wf.globalDeclRe,"").split(",")),a;try{for(g.s();!(a=g.n()).done;)h.push(a.value.trim())}catch(d){g.e(d)}finally{g.f()}}}}catch(d){l.e(d)}finally{l.f()}return h}function ur(e){return wf.FindToplevelFuncDeclVisitor.run(e)}function Av(e,
h){if(0==h.length)return[null,null];var l=bc(h);h=l[0];l=l.slice(1);var b=h.decls||wf.declarationsWithIdsOfScope(h);h.decls=b;return b.find(function(c){c=Nb(c,2);c[0];return c[1].name==e})||Av(e,l)}function vt(e){function h(b,c){var g=[b].concat(c);b.refs.forEach(function(a){var d=wf.resolveReference(a.name,g);d=Nb(d,2);l.set(a,{decl:d[0],declId:d[1],ref:a})});b.subScopes.forEach(function(a){return h(a,g)})}if(e.referencesResolvedSafely)return e;var l=e.resolvedRefMap||(e.resolvedRefMap=new Map);
h(e,[]);e.referencesResolvedSafely=!0;return e}function Bv(e,h){h=ba(h.resolvedRefMap.values());var l;try{for(h.s();!(l=h.n()).done;){var b=l.value,c=b.ref,g=c.end;if(c.start<=e&&e<=g)return b}}catch(a){h.e(a)}finally{h.f()}}function Yj(e,h){function l(a){var d=wf._declaredVarNames(a,b);return a.subScopes.map(l).reduce(function(f,k){return f.concat(k)},a.refs).filter(function(f){return-1===d.indexOf(f.name)})}h=h||{};h.withComments=!0;"string"===typeof e&&(e=wf.parse(e,h));e=wf.scopes(e);var b=!!h.jslintGlobalComment;
h=wf._declaredVarNames(e,b);var c=e.refs.concat(e.subScopes.map(l).flat()),g=wf.arr.withoutAll(c.map(function(a){return a.name}),h);return{scope:e,varDecls:e.varDecls,funcDecls:e.funcDecls.filter(function(a){return a.id}),classDecls:e.classDecls.filter(function(a){return a.id}),declaredNames:h,undeclaredNames:g,refs:c,thisRefs:e.thisRefs}}function wt(e,h){e=wf.topLevelDeclsAndRefs(e,h);var l=e.declaredNames.concat(wf.knownGlobals);return e.refs.filter(function(b){return-1===l.indexOf(b.name)})}function xt(e,
h,l,b){if(!h&&!e)throw Error("Need at least ast or code");h=h||wf.stringify(e);e=e&&e.loc?e:wf.parse(h,{locations:!0});return wf.withMozillaAstDo(e,[],function(c,g,a){l.every(function(d){return wf.num.between(d,g.loc.start.line,g.loc.end.line)})&&(wf.arr.pushIfNotIncluded(a,g),c());return a})}function Op(e,h){var l,b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{refs:[],decls:[]};if("this"===h){var g;(g=c.refs).push.apply(g,hb(e.thisRefs));
return c}g=wf.__varDeclIdsFor(e,h);if(!b&&g.length)return c;b=ba(e.refs);var a;try{for(b.s();!(a=b.n()).done;){var d=a.value;d.name===h&&c.refs.push(d)}}catch(k){b.e(k)}finally{b.f()}(l=c.decls).push.apply(l,hb(g));l=ba(e.subScopes);var f;try{for(l.s();!(f=l.n()).done;)Op(f.value,h,!1,c)}catch(k){l.e(k)}finally{l.f()}return c}function Cv(e,h,l){var b=null;wf.scopesAtIndex(e,l).reverse().find(function(c){c=wf.declarationsOfScope(c,!0);var g=wf.arr.pluck(c,"name").indexOf(h);if(-1===g)return!1;b=c[g];
return!0});return b}function Pp(e,h){h="string"===typeof h?wf.parse(h):h;return wf.custom.findNodesIncluding(h,e)}function ym(e,h,l){var b=wf.nodesAt(h.start,e).reverse().find(function(g){return wf._stmtTypes.includes(g.type)});if(l&&l.asPath){h=new wf.BaseVisitor;var c;h.accept=wf.fun.wrap(h.accept,function(g,a,d,f){if(a===b)throw c=f,Error("stop search");return g(a,d,f)});try{h.accept(e,{},[])}catch(g){}return c}return b}function vr(e){var h=[];e=e.node.body||[];for(var l=0;l<e.length;l++){var b=
e[l];if("ImportDeclaration"===b.type)if(0===b.specifiers.length)h.push({local:null,imported:null,fromModule:b.source.value,node:b});else{var c=b.source?b.source.value:"unknown module";h.push.apply(h,hb(b.specifiers.map(function(g){return{local:g.local?g.local.name:null,imported:"ImportNamespaceSpecifier"===g.type?"*":"ImportDefaultSpecifier"===g.type?"default":"ImportSpecifier"===g.type?g.imported.name:null,fromModule:c,node:b}})))}}return h}function wr(e){1<arguments.length&&void 0!==arguments[1]&&
arguments[1]&&wf.resolveReferences(e);var h=[],l=ba(e.exportDecls),b;try{var c=function(){var d=b.value;g=wf.statementOf(e.node,d);if(!g)return"continue";a=g.source?g.source.value:null;if("ExportAllDeclaration"===g.type)return h.push({local:null,exported:"*",imported:"*",fromModule:a,node:d,type:"all"}),"continue";if("ExportDefaultDeclaration"===g.type){if(wf.helpers.isDeclaration(g.declaration))return h.push({local:g.declaration.id?g.declaration.id.name:null,exported:"default",type:"FunctionDeclaration"===
g.declaration.type?"function":"ClassDeclaration"===g.declaration.type?"class":null,fromModule:null,node:d,decl:g.declaration,declId:g.declaration.id}),"continue";if("Identifier"===g.declaration.type){var f=e.resolvedRefMap.get(g.declaration)||{};h.push({local:g.declaration.name,exported:"default",fromModule:null,node:d,type:"id",decl:f.decl,declId:f.declId});return"continue"}h.push({local:null,exported:"default",fromModule:null,node:d,type:"expr",decl:g.declaration,declId:g.declaration});return"continue"}if(g.specifiers&&
g.specifiers.length)return h.push.apply(h,hb(g.specifiers.map(function(k){if(a){var n=d;var p=k.exported}else k.local&&(n=(p=e.resolvedRefMap.get(k.local))?p.decl:null,p=p?p.declId:null);return{local:!a&&k.local?k.local.name:null,exported:k.exported?k.exported.name:null,imported:a&&k.local?k.local.name:null,fromModule:a||null,type:"id",node:d,decl:n,declId:p}}))),"continue";if(g.declaration&&g.declaration.declarations)return h.push.apply(h,hb(g.declaration.declarations.map(function(k){return{local:k.id?
k.id.name:"default",exported:k.id?k.id.name:"default",type:g.declaration.kind,fromModule:null,node:d,decl:k,declId:k.id}}))),"continue";if(g.declaration)return h.push({local:g.declaration.id?g.declaration.id.name:"default",exported:g.declaration.id?g.declaration.id.name:"default",type:"FunctionDeclaration"===g.declaration.type?"function":"ClassDeclaration"===g.declaration.type?"class":null,fromModule:null,node:d,decl:g.declaration,declId:g.declaration.id}),"continue"};for(l.s();!(b=l.n()).done;){var g,
a;c()}}catch(d){l.e(d)}finally{l.f()}return wf.arr.uniqBy(h,function(d,f){return d.local==f.local&&d.exported==f.exported&&d.fromModule==f.fromModule})}function bn(e){return(new cn.ObjectSpreadTransformer).accept(e,{},[])}function Dv(e,h){if(e.start===h.start&&e.end===h.end)return 0;if(e.end<=h.start)return-1;if(e.start>=h.end||e.start<=h.start&&e.end>=h.end)return 1;if(h.start<=e.start&&h.end>=e.end)return-1;throw Error("Comparing nodes");}function Ev(e,h,l){l="object"===Jc(l)?l:{changes:[],source:l};
var b=!1,c=l.changes.reduce(function(a,d){if(a.end<d.pos)return a;var f=d.pos<a.start;b=b||d.pos>=a.start&&d.pos<=a.end;if("add"===d.type)return{start:f?a.start+d.string.length:a.start,end:a.end+d.string.length};if("del"===d.type)return{start:f?a.start-d.length:a.start,end:a.end-d.length};throw Error("Cannot deal with change "+xf.obj.inspect(d));},{start:e.start,end:e.end}),g=l.source;e=h(e,g.slice(c.start,c.end),b);e="string"===typeof e?e:Array.isArray(e)?e.map(xf._node2string).join("\n"+xf._findIndentAt(g,
c.start)):e=xf._node2string(e);c=[{type:"del",pos:c.start,length:c.end-c.start},{type:"add",pos:c.start,string:e}];return{changes:l.changes.concat(c),source:xf._applyChanges(c,g)}}function yt(e,h){e=e.sort(function(c,g){return xf._compareNodesForReplacement(c.target,g.target)});h="object"===Jc(h)?h:{changes:[],source:h};for(var l=0;l<e.length;l++){var b=e[l];h=xf.replaceNode(b.target,b.replacementFunc,h)}return h}function Gk(e,h,l,b){b="object"===Jc(e)?e:null;e="string"===typeof e?e:b.source||xf._node2string(b);
return xf.replaceNode(h,l,e)}function zt(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];h.push.apply(h,hb(e.varDecls));var l=ba(e.subScopes),b;try{for(l.s();!(b=l.n()).done;)zt(b.value,h)}catch(c){l.e(c)}finally{l.f()}return h}function xr(e){var h="object"===Jc(e)?e:xf.parse(e);e="string"===typeof e?e:h.source||xf._node2string(h);h=xf.scopes(h);var l=xf.__findVarDecls(h);h=[];l=ba(l);var b;try{for(l.s();!(b=l.n()).done;)h.push({target:b.value,replacementFunc:function(c,g,a){a&&
(c=xf.parse(g).body[0]);return c.declarations.map(function(d){return{type:"VariableDeclaration",kind:"var",declarations:[d]}})}})}catch(c){l.e(c)}finally{l.f()}return xf.replaceNodes(h,e)}function At(e){var h="object"===Jc(e)?e:xf.parse(e);e="string"===typeof e?e:h.source||xf._node2string(h);h=xf.scopes(h);var l=xf.__findVarDecls(h);h=[];l=ba(l);var b;try{for(l.s();!(b=l.n()).done;)h.push({target:b.value,replacementFunc:function(c,g,a){a&&(c=xf.parse(g).body[0]);g=[];c=ba(c.declarations);var d;try{for(c.s();!(d=
c.n()).done;){var f=d.value;a={type:"Identifier",name:"__temp"};g.push({type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:a,init:f.init}]});var k=ba(xf.helpers.objPropertiesAsList(f.id,[],!1)),n;try{for(k.s();!(n=k.n()).done;){var p=n.value.key;g.push(xf.varDecl(p[p.length-2],xf.memberChain.apply(xf,[a.name].concat(hb(p))),"var"))}}catch(q){k.e(q)}finally{k.f()}}}catch(q){c.e(q)}finally{c.f()}return g}})}catch(c){l.e(c)}finally{l.f()}return xf.replaceNodes(h,e)}function Fv(e,
h){h=h||{};var l=xf.parse(e,h),b=xf.arr.last(l.body);if("ExpressionStatement"!==b.type)return h.asAST?l:e;l.body.splice(l.body.length-1,1,xf.returnStmt(b.expression));return h.asAST?l:xf.stringify(l)}function Bt(e,h){h=h||{};e=xf.returnLastStatement(e,h);return h.asAST?xf.program(xf.funcExpr.apply(xf,[{id:h.id||void 0},[]].concat(hb(e.body)))):"function".concat(h.id?" "+h.id:"","() {\n").concat(e,"\n}")}function Gv(e,h){"string"===typeof e&&(e=xf.parse(e));h=h||{};var l="Program"===e.type,b=h.startFuncNode||
xf.id("__start_execution");h=h.endFuncNode||xf.id("__end_execution");var c=xf.topLevelFuncDecls(e),g=e.body,a=[];c.forEach(function(d){var f=d.node;xf.Path(d.path).set(e,xf.exprStmt(f.id));a.push(f)});g.unshift(xf.exprStmt(xf.funcCall(b)));b=xf.arr.last(g);"ExpressionStatement"===b.type?(g.pop(),g.push(xf.exprStmt(xf.funcCall(h,xf.id("null"),b.expression)))):"VariableDeclaration"===b.type&&"Identifier"===xf.arr.last(b.declarations).id.type?g.push(xf.exprStmt(xf.funcCall(h,xf.id("null"),xf.arr.last(b.declarations).id))):
g.push(xf.exprStmt(xf.funcCall(h,xf.id("null"),xf.id("undefined"))));a.push(xf.tryStmt.apply(xf,["err",[xf.exprStmt(xf.funcCall(h,xf.id("err"),xf.id("undefined")))]].concat(hb(g))));return l?xf.program.apply(xf,a):xf.block.apply(xf,a)}function Hv(e){if(!xf.isProbablySingleExpressionRe.test(e)||30<e.split("\n").length)return e;try{var h=xf.fuzzyParse(e);1===h.body.length&&("FunctionDeclaration"===h.body[0].type||"BlockStatement"===h.body[0].type&&"LabeledStatement"===h.body[0].body[0].type)&&(e="("+
e.replace(/;\s*$/,"")+")")}catch(l){"undefined"!==typeof $world?$world.logError(l):console.error("Eval preprocess error: %s",l.stack||l)}return e}function Iv(e,h){var l=Ng.statementOf(e,h,{asPath:!0}).slice(0,-2);l=Ng.Path(l).get(e);return l.comments&&l.comments.length?Ng.chain(Ng.extractComments(e)).reversed().find(function(b){return b.followingNode===h}).value():null}function Jv(e,h){function l(r){return r.node.body.find(function(t){return t.start>r.comment.end})}function b(r){return{type:"unknown",
comment:r.comment.text}}function c(r){r=Ng.Path(r.path.slice(0,-1)).get(n);return{name:r.id?r.id.name:"<error: no name for function>",args:Ng.arr.pluck(r.params,"name")}}function g(r){for(var t=Ng.Path(r.path.slice(0,-2)).get(n),w=t.key?t.key.name:"<error: no name for method>",x=r.path.slice(),B="<error: no object found for method>";x.length&&"init"!==Ng.arr.last(x);)x.pop();x.length&&(B=Ng.Path(x.slice(0,-1).concat(["id","name"])).get(n));if(Ng.string.startsWith(B,"<error")){for(x=r.path.slice();x.length&&
"right"!==Ng.arr.last(x);)x.pop();x.length&&(B=Ng.Path(x.slice(0,-1).concat(["left"])).get(n),B=p.slice(B.start,B.end))}Ng.string.startsWith(B,"<error")&&(x=r.path.slice(),(r=(r=Ng.Path(x.slice(0,-6)).get(n))&&"CallExpression"===r.type&&r.arguments[0])&&(B=p.slice(r.start,r.end)));return{name:w,args:Ng.arr.pluck(t.value.params,"name"),objectName:B}}function a(r){r=Ng.Path(r.path.slice(0,-1)).get(n);if("FunctionExpression"!==r.type&&"FunctionDeclaration"!==r.type)return{};var t=Ng.statementOf(n,r);
if("ExpressionStatement"!==t.type||"AssignmentExpression"!==t.expression.type)return{};var w=p.slice(t.expression.left.object.start,t.expression.left.object.end);return{name:p.slice(t.expression.left.property.start,t.expression.left.property.end),objectName:w,args:Ng.arr.pluck(r.params,"name")}}function d(r){var t=r.path.slice(0,-3);var w=Ng.Path(t).get(n);if(w&&"Property"===w.type){var x=Ng.arr.pluck(w.value.callee.params,"name");var B=w.key?w.key.name:"<error: no name for method>"}B||(t=r.path.slice(0,
-2),(w=Ng.Path(t).get(n))&&"Property"===w.type&&(x=Ng.arr.pluck(w.value.params,"name"),B=w.key?w.key.name:"<error: no name for method>"));B||(B="<error: no name for method>",x=[],t=r.path);w=Ng.arr.clone(t);for(r="<error: no object found for method>";w.length&&"init"!==Ng.arr.last(w);)w.pop();w.length&&(r=Ng.Path(w.slice(0,-1).concat(["id","name"])).get(n));if(Ng.string.startsWith(r,"<error")){for(w=Ng.arr.clone(t);w.length&&"right"!==Ng.arr.last(w);)w.pop();w.length&&(r=Ng.Path(w.slice(0,-1).concat(["left"])).get(n),
r=p.slice(r.start,r.end))}Ng.string.startsWith(r,"<error")&&(w=Ng.arr.clone(t),(t=(t=Ng.Path(w.slice(0,-4)).get(n))&&"CallExpression"===t.type&&t.arguments[0])&&(r=p.slice(t.start,t.end)));return{name:B,args:x,objectName:r}}function f(r){return r&&"VariableDeclaration"===r.type&&1===r.declarations.length}function k(r){return"AssignmentExpression"!==r.type?!1:"ObjectExpression"===r.right.type?!0:"AssignmentExpression"===r.right.type?k(r.right):!1}var n="string"===typeof e?Ng.parse(e,{withComments:!0}):
e,p=h||("string"===typeof e?e:Ng.stringify(e)),q=Ng.arr.sortBy(function(r){var t=[],w=new Ng.Visitor;w.accept=Ng.fun.wrap(w.accept,function(x,B,D,F){B.comments&&Ng.arr.pushAll(t,B.comments.map(function(L){return{path:F,comment:L,node:B}}));return x(B,D,F)});w.accept(r,t,[]);return t}(n),function(r){return r.comment.start});return q.map(function(r,t){if(Ng.arr.equals(r.path.slice(-2),["value","body"]))return Ng.obj.merge([r,r.comment,{type:"method",comment:r.comment.text},g(r)]);var w=r.path.slice(-5);
Ng.arr.removeAt(w,1);if(Ng.arr.equals(w,["properties","value","callee","body"]))return Ng.obj.merge([r,r.comment,{type:"method",comment:r.comment.text},d(r)]);if((w=Ng.Path(r.path.slice(0,-1)).get(n))&&"FunctionDeclaration"===w.type)return Ng.obj.merge([r,r.comment,{type:"function",comment:r.comment.text},c(r)]);if(Ng.arr.equals(r.path.slice(-2),["right","body"]))return Ng.obj.merge([r,r.comment,{type:"method",comment:r.comment.text},a(r)]);w=l(r);return w?(t=q[t+1])&&t.comment.start<=w.start?Ng.obj.merge([r,
r.comment,{followingNode:w},b(r)]):f(w)&&("ObjectExpression"===w.declarations[0].init.type||k(w.declarations[0].init))?Ng.obj.merge([r,r.comment,{followingNode:w},{type:"object",comment:r.comment.text},{name:w.declarations[0].id.name}]):f(w)?Ng.obj.merge([r,r.comment,{followingNode:w},{type:"var",comment:r.comment.text},{name:w.declarations[0].id.name}]):Ng.obj.merge([r,r.comment,{followingNode:w},b(r)]):Ng.obj.merge([r,r.comment,{followingNode:w},b(r)])})}function Kv(e,h){h=h||ih.obj.merge({hideOneLiners:!1},
h);"string"===typeof e&&(e=ih.parse(e,{addSource:!0}));var l=[],b=ba("Program"===e.type?e.body:e.body.body),c;try{for(b.s();!(c=b.n()).done;){var g=c.value;g=ih.unwrapExport(g);var a=ih.functionWrapper(g,h)||ih.varDefs(g)||ih.funcDef(g)||ih.es6ClassDef(g)||ih.someObjectExpressionCall(g)||ih.describe(g);if(a){if(h.hideOneLiners)if(e.loc)a=a.filter(function(p){return!p.node.loc||p.node.loc.start.line!==p.node.loc.end.line});else if(e.source){var d=[],f=ba(a),k;try{for(f.s();!(k=f.n()).done;){var n=
k.value;(n.parent&&d.includes(n.parent)||(n.node.source||"").includes("\n"))&&d.push(n)}}catch(p){f.e(p)}finally{f.f()}a=d}l.push.apply(l,hb(a))}}}catch(p){b.e(p)}finally{b.f()}return l}function Lv(e){var h="describe xdescribe it xit after afterEach before beforeEach".split(" "),l=[];e.expression.arguments[1].body.body.forEach(function(b){if("ExpressionStatement"!==b.type||!b.expression.callee)return null;var c=b.expression.callee.name;if(h.includes(c)){c={name:b.expression.arguments[0].value||b.expression.callee.name,
node:b,type:c,parent:e};if("describe"===b.expression.callee.name||"xdescribe"===b.expression.callee.name)c.children=Lv(b);l.push(c)}});return l}function Qp(e){return e.flatMap(function(h){return h?"Identifier"===h.type?[h]:"RestElement"===h.type?[h.argument]:"ObjectPattern"===h.type?Qp(ih.arr.pluck(h.properties,"value")):"ArrayPattern"===h.type?Qp(h.elements):[]:[]})}function yr(e){return ci.isValidIdentifierRe.test(e)}function zm(){return"undefined"!==typeof System?System.global:"undefined"!==typeof window?
window:"undefined"!==typeof global?global:"undefined"!==typeof Global?Global:"undefined"!==typeof self?self:function(){return this}()}function Ct(e,h){h=String(h).match(/function\s*[a-zA-Z0-9_$]*\s*\(([^\)]*)\)/);return e+"("+(h&&h[1]||"")+")"}function Fy(e){return e===e||e===Array||e===Function||e===String||e===Boolean||e===Date||e===RegExp||e===Number||e===Promise?!0:e instanceof Function&&(void 0!==e.superclass||void 0!==e._superclass)}function Mv(e,h){return e.map(function(l){return l[h]})}function Nv(e){if(Symbol.keyFor(e))return'Symbol.for("'.concat(Symbol.keyFor(e),
'")');if(li.knownSymbols.get(e))return li.knownSymbols.get(e);String(e).match(li.symMatcher);return String(e)}function Dt(e){if(!e)return String(e);if(Array.isArray(e))return"[".concat(e.map(Dt).join(","),"]");if("symbol"===Jc(e))return li.printSymbol(e);try{return String(e)}catch(h){throw Error("Cannot print object: ".concat(h.stack));}}function Rp(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=e.value,b=e.isPromise,c=e.promisedValue,g=e.promiseStatus;return e.isError||l instanceof
Error?(h=String(l),(c=l.stack||"")&&l.message!==l.stack&&(c=String(c),0===c.indexOf(h)&&(c=c.slice(h.length)),h+="\n"+c),h):b?(b=li.string.print(g),h="pending"===g?void 0:Rp({value:c},h),"Promise({status: ".concat(b,", ").concat(void 0===l?"":"value: "+h,"})")):l instanceof Promise?'Promise({status: "unknown"})':h.inspect?li.printInspectEvalValue(l,h.inspectDepth||2):String(l)}function Ov(e,h){var l="";return Promise.resolve().then(function(){var b=h.lastIndexOf(".");0<=b?(l=h.slice(b+1),h=h.slice(0,
b)):(l=h,h='(typeof window === "undefined" ? global : window)');return e(h)}).then(function(b){return{evalResult:b,startLetters:l,code:h}})}function Pv(e,h,l){e=ii.getObjectForCompletion(e,h).then(function(b){var c=b.evalResult;b={completions:ii.descriptorsOfObjAndProtoProperties(c&&c.isEvalResult?c.value:c),startLetters:b.startLetters,code:b.code};c&&c.isPromise&&("fulfilled"===c.promiseStatus?b.promiseResolvedCompletions=ii.descriptorsOfObjAndProtoProperties(c.promisedValue):"rejected"===c.promiseStatus&&
(b.promiseRejectedCompletions=ii.descriptorsOfObjAndProtoProperties(c.promisedValue)));return b});if("function"===typeof l)e.then(function(b){return l(null,b)})["catch"](function(b){return l(b)});return e}function Et(e,h,l){h||(h={type:"Identifier",name:"__rec"});l=Object.assign({ignoreUndeclaredExcept:null,includeRefs:null,excludeRefs:l&&l.exclude||[],includeDecls:null,excludeDecls:l&&l.exclude||[],recordDefRanges:!1,es6ExportFuncId:null,es6ImportFuncId:null,captureObj:h,moduleExportFunc:{name:l&&
l.es6ExportFuncId||"_moduleExport",type:"Identifier"},moduleImportFunc:{name:l&&l.es6ImportFuncId||"_moduleImport",type:"Identifier"},declarationWrapper:void 0,classTransform:function(c){return c}},l);h=Gd.removeJspmGlobalRef(e,l);if(l.ignoreUndeclaredExcept){var b=Gd.topLevelDeclsAndRefs(e);l.excludeRefs=Gd.arr.withoutAll(b.undeclaredNames,l.ignoreUndeclaredExcept).concat(l.excludeRefs);l.excludeDecls=Gd.arr.withoutAll(b.undeclaredNames,l.ignoreUndeclaredExcept).concat(l.excludeDecls)}l.excludeRefs=
l.excludeRefs.concat(l.captureObj.name);l.excludeDecls=l.excludeDecls.concat(l.captureObj.name);l.recordDefRanges?Gd.computeDefRanges(h,l):null;l.excludeRefs=l.excludeRefs.concat(Gd.additionalIgnoredRefs(e,l));l.excludeDecls=l.excludeDecls.concat(Gd.additionalIgnoredDecls(e,l));h=Gd.fixDefaultAsyncFunctionExportForRegeneratorBug(h,l);l.es6ExportFuncId&&(l.excludeRefs.push(l.es6ExportFuncId),l.excludeRefs.push(l.es6ImportFuncId),h=Gd.es6ModuleTransforms(h,l));h=Gd.replaceRefs(h,l);h=Gd.replaceVarDecls(h,
l);h=Gd.clearEmptyExports(h,l);h=Gd.replaceClassDecls(h,l);h=Gd.splitExportDeclarations(h,l);h=Gd.insertCapturesForExportDeclarations(h,l);h=Gd.insertCapturesForImportDeclarations(h,l);h=Gd.insertDeclarationsForExports(h,l);h=Gd.putFunctionDeclsInFront(h,l);return h=Gd.transformImportMeta(h,l)}function Qv(e,h,l){l=Object.assign({captureObj:h||{type:"Identifier",name:"__rec"},exclude:[],declarationWrapper:void 0},l);h=Gd.Path("body.0.expression").get(e);if("System"!==h.callee.object.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: ".concat(Gd.stringify(e).slice(0,
300),"..."));if("register"!==h.callee.property.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: ".concat(Gd.stringify(e).slice(0,300),"..."));h=Gd.Path("arguments.1.body.body").get(h);var b=Gd.arr.last(h);if("ReturnStatement"!==b.type)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at return statement: ".concat(Gd.stringify(e).slice(0,300),"..."));var c=b.argument.properties.find(function(g){return"setters"===
g.key.name});if(!c)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding setters: ".concat(Gd.stringify(e).slice(0,300),"..."));b=b.argument.properties.find(function(g){return"execute"===g.key.name});if(!b)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding execute: ".concat(Gd.stringify(e).slice(0,300),"..."));c.value.elements.forEach(function(g){g.params[0]=Gd.assign(g.params[0],
Gd.nodes.objectLiteral({}));g.body.body=g.body.body.map(function(a){if("ExpressionStatement"!==a.type||"AssignmentExpression"!==a.expression.type||"Identifier"!==a.expression.left.type||l.exclude.includes(a.expression.left.name))return a;var d=a.expression.left;a=l.declarationWrapper?Gd.declarationWrapperCall(l.declarationWrapper,null,Gd.literal(d.name),Gd.literal("var"),a.expression,l.captureObj,l):a.expression;return Gd.exprStmt(Gd.assign(Gd.member(l.captureObj,d),a))})});(c=b.value.body.body.find(function(g){return"ExpressionStatement"===
g.type&&"AssignmentExpression"==g.expression.type&&g.expression.left.name===l.captureObj.name}))||(c=b.value.body.body.find(function(g){return"VariableDeclaration"===g.type&&g.declarations[0].id&&g.declarations[0].id.name===l.captureObj.name}));c&&(Gd.arr.remove(b.value.body.body,c),Gd.arr.pushAt(h,c,h.length-1));l.sourceAccessorName&&((c=b.value.body.body.find(function(g){return"ExpressionStatement"===g.type&&"AssignmentExpression"==g.expression.type&&g.expression.left.name===l.sourceAccessorName}))||
(c=b.value.body.body.find(function(g){return"VariableDeclaration"===g.type&&g.declarations[0].id&&g.declarations[0].id.name===l.sourceAccessorName})),c&&(Gd.arr.remove(b.value.body.body,c),Gd.arr.pushAt(h,c,h.length-1)));return e}function dn(e,h){var l=Gd.stringify(h.captureObj),b=0;e.body=e.body.reduce(function(c,g){var a=[g],d="",f=!1;if("ExportNamedDeclaration"===g.type){if(g.source){var k=g.specifiers.map(function(n){return[n.local.name,n.exported.name]});d="import { ".concat(k.map(function(n){var p=
Nb(n,2);n=p[0];p=p[1];return n===p?p:"".concat(n," as ").concat(p)}).join(",")," } from ").concat(g.source.raw,";\n");f="export { ".concat(k.map(function(n){n=Nb(n,2);n[0];return n[1]}).join(",")," };\n")}else g.declaration?(k=g.declaration.declarations||[],k=k.map(function(n){return[n.id.name,n.id.name]})):k=g.specifiers.map(function(n){return[n.exported.name,n.local.name]});f&&(a=[],d+=f);a=a.concat(Gd.parse(d+k.map(function(n){var p=Nb(n,2);n=p[0];p=p[1];return"".concat(l,".").concat(n," = ").concat(p,
";\n")+(p!==n?"".concat(l,".").concat(p," = ").concat(p,";\n"):"")}).join("\n")))}"ExportAllDeclaration"===g.type&&(b++,a=a.concat(Gd.parse("\n       import * as __captured".concat(b,"__ from ").concat(g.source.raw,";\n       Object.assign(").concat(l,", __captured").concat(b,"__);\n      "))));return c.concat(a)},[]);return e}function Sp(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"__lvVarRecorder";"function"===typeof e&&(e=String(e));if(lively.FreezerRuntime)return e.split(h+
".").join("");"string"===typeof e&&e.endsWith(";")&&(e=e.slice(0,-1));var l="string"===typeof e?di.parseFunction(e):e;l=di.ReplaceVisitor.run(l,function(b){return"MemberExpression"===b.type&&"Identifier"===b.object.type&&b.object.name===h?b.property:b});return di.stringify(l)}function sk(e){if("undefined"===typeof babel)return console.warn("[lively.freezer] Skipped async/await transpilation because babel not loaded."),e;di.ensureOptionalCatchBinding();di.ensureImportMeta();e=babel.transform(e,{sourceMap:void 0,
inputSourceMap:void 0,babelrc:!1,presets:[["es2015",{modules:!1}]],plugins:["transform-exponentiation-operator","transform-async-to-generator","syntax-object-rest-spread","transform-object-rest-spread"],code:!0,ast:!1}).code;e=e.replace(/\}\)\.call\(undefined\);$/,"}).call(this)");e.startsWith("(function")&&e.endsWith(");")&&(e=e.slice(1,-2));return e}function Rv(e,h,l){return di.QueryReplaceManyVisitor.run("string"==typeof e?di.parse(e):e,"\n         // ExpressionStatement [\n              /:expression AssignmentExpression [\n                  /:left MemberExpression [\n                    /:property Identifier [ @name ]\n                  ]\n               && /:right CallExpression [\n                     (/:callee MemberExpression [\n                           /:property Identifier [ @name == 'component' ]\n                        && /:object Identifier [ @name == '".concat(l,
"' ]\n                       ])\n                     ||\n                     (/:arguments \"*\" [\n                       CallExpression [\n                        /:callee MemberExpression [\n                           /:property Identifier [ @name == 'component' ]\n                        && /:object Identifier [ @name == '").concat(l,"' ]\n                          ]\n                       ]\n                     ])\n                   ]\n                ]\n              ]"),function(b){b=b.expression;
return[b].concat(hb(di.parse("".concat(di.stringify(b.left),"[Symbol.for('lively-module-meta')] = { module: \"").concat(h,'", export: "').concat(b.left.property.name,'"};')).body))})}function Tp(e,h){e="string"==typeof e?di.parse(e):e;var l=di.topLevelDeclsAndRefs(e).varDecls;l=di.arr.compact(l.map(function(b){return b.declarations&&b.declarations[0]}));return di.QueryReplaceManyVisitor.run(e,"\n         // VariableDeclarator [\n              /:id Identifier [ @name ]\n               && /:init CallExpression [\n                   (/:callee Identifier [ @name == 'component'])\n                 ]\n              ]",
function(b){var c=l.includes(b),g=b.id.name,a=b.init.arguments.map(function(d){return di.stringify(d)}).join(",");return di.parse("const ".concat(g," = component.for(() => component(").concat(a,'), { module: "').concat(h,'", export: "').concat(g,'", range: { start: ').concat(b.start,", end: ").concat(b.end,"}}").concat(c?", "+g:"",")")).body[0].declarations})}function Up(e,h){e=gh.transform.transformSingleExpression(e);e=gh.parse(e,{withComments:!0});h=gh.processInlineCodeTransformOptions(e,h);var l=
h.declarationWrapperName&&h.declarationWrapperName.includes(System.baseURL)&&h.declarationWrapperName.split(System.baseURL)[1];l&&(e=gh.ensureComponentDescriptors(e,l));var b=gh.query.topLevelDeclsAndRefs(e);l=b.classDecls;var c=b.funcDecls;b=b.varDecls;var g={};h.hasOwnProperty("evalId")&&(g.evalId=h.evalId);h.sourceAccessorName&&(g.sourceAccessorName=h.sourceAccessorName);[].concat(hb(l),hb(c)).forEach(function(f){return f["x-lively-object-meta"]=Object.assign({},g,{start:f.start,end:f.end})});
b.forEach(function(f){return f.declarations.forEach(function(k){return k["x-lively-object-meta"]=Object.assign({},g,{start:k.start,end:k.end})})});e=gh.transform.objectSpreadTransform(e);!h.topLevelVarRecorder&&h.topLevelVarRecorderName&&(l=gh.getGlobal(),h.topLevelVarRecorder="GLOBAL"===h.topLevelVarRecorderName?gh.getGlobal():gh.Path(h.topLevelVarRecorderName).get(l));if(h.topLevelVarRecorder){l=(h.dontTransform||[]).concat(["arguments"]);c=h.recordGlobals?null:gh.arr.withoutAll(Object.keys(h.topLevelVarRecorder),
l);b=gh.id(h.varRecorderName||"__lvVarRecorder");if(h.declarationWrapperName||"function"===typeof h.declarationCallback){var a=h.declarationWrapperName||gh.defaultDeclarationWrapperName;h.declarationWrapper=gh.member(gh.id(h.varRecorderName||"__lvVarRecorder"),gh.literal(a),!0);h.declarationCallback&&(h.topLevelVarRecorder[a]=h.declarationCallback)}if(h.hasOwnProperty("transformES6Classes")?h.transformES6Classes:1)var d={currentModuleAccessor:h.currentModuleAccessor,classHolder:b,functionNode:gh.member(b,
gh.defaultClassToFunctionConverterName),declarationWrapper:h.declarationWrapper,evalId:h.evalId,sourceAccessorName:h.sourceAccessorName,transform:h.classTransform};e=gh.capturing.rewriteToCaptureTopLevelVariables(e,b,{es6ImportFuncId:h.es6ImportFuncId,es6ExportFuncId:h.es6ExportFuncId,ignoreUndeclaredExcept:c,exclude:l,declarationWrapper:h.declarationWrapper||void 0,classToFunction:d,evalId:h.evalId,sourceAccessorName:h.sourceAccessorName,keepTopLevelVarDecls:h.keepTopLevelVarDecls})}h.wrapInStartEndCall&&
(e=gh.transform.wrapInStartEndCall(e,{startFuncNode:h.startFuncNode,endFuncNode:h.endFuncNode}));d=gh.stringify(e);h.jsx&&(d=gh.es5Transpilation(d));h.sourceURL&&(d+="\n//# sourceURL="+h.sourceURL.replace(/\s/g,"_"));return d}function zr(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!h.topLevelVarRecorder)return e;if("function"===typeof h.declarationCallback||h.declarationWrapperName){var l=h.declarationWrapperName||gh.defaultDeclarationWrapperName;h.declarationWrapper=gh.member(gh.id(h.varRecorderName),
gh.literal(l),!0);h.declarationCallback&&(h.topLevelVarRecorder[l]=h.declarationCallback)}l=gh.parse(e);var b=(h.dontTransform||[]).concat(["arguments"]);h.recordGlobals?null:gh.arr.withoutAll(Object.keys(h.topLevelVarRecorder),b);h=gh.capturing.rewriteToRegisterModuleToCaptureSetters(l,gh.id(h.varRecorderName||"__lvVarRecorder"),Object.assign({exclude:b},h));return gh.stringify(h)}function Vp(e,h,l){"function"===typeof h&&2===arguments.length&&(l=h,h=null);var b=new xh.EvalResult,c=!1,g=!1;h=xh._normalizeEvalOptions(h);
var a=xh.promise.deferred(),d=h.topLevelVarRecorder||xh.getGlobal(),f=e;h.wrapInStartEndCall&&(d[xh.startEvalFunctionName]&&console.warn(b.addWarning("startEvalFunctionName ".concat(xh.startEvalFunctionName," already exists in recorder!"))),d[xh.endEvalFunctionName]&&console.warn(b.addWarning("endEvalFunctionName ".concat(xh.endEvalFunctionName," already exists in recorder!"))),d[xh.startEvalFunctionName]=function(){if(c)console.warn(b.addWarning("onEvalStartCalled multiple times!"));else if(c=!0,
"function"===typeof h.onStartEval)h.onStartEval()},d[xh.endEvalFunctionName]=function(p,q){g?console.warn(b.addWarning("onEvalEndCalled multiple times!")):(g=!0,xh.finishEval(p,q,b,h,d,a,l))});try{e=xh.evalCodeTransform(e,h),h.header&&(e=h.header+e),h.footer&&(e+=h.footer),h.transpiler&&(e=h.transpiler(e,h.transpilerOptions))}catch(p){console.warn(b.addWarning("lively.vm evalCodeTransform not working: "+p))}try{"undefined"!==typeof $world&&$world.get("log")&&($world.get("log").textString=e);var k=
xh._eval.call(h.context,e,h.topLevelVarRecorder,h.originalSource||f)}catch(p){var n=p}if(h.wrapInStartEndCall){if(n&&!g)d[xh.endEvalFunctionName](n,void 0)}else xh.finishEval(n,n||k,b,h,d,a,l);return h.sync?b:a.promise}function Ft(e,h){h=Object.assign(h||{},{sync:!0});return xh.runEval(e,h)}function Wp(e,h,l){Ch.getEnv(l).emitter.on(e,h);return h}function Gy(e,h,l){Ch.getEnv(l).emitter.once(e,h);return h}function Am(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:Date.now(),b=3<arguments.length?arguments[3]:void 0;h=Object.assign({type:e,time:l},h);l=Ch.getEnv(b);b=l.emitter;l=l.notifications;b.emit(e,h);b.isLogging&&Ch.log(h);b.isRecording&&Ch.record(l,h);return h}function Ar(e,h,l){Ch.getEnv(l).emitter.removeListener(e,h);return h}function Hy(e,h){Ch.getEnv(h).emitter.removeAllListeners(e)}function Iy(e){Ch.getEnv(e).emitter.isRecording=!0}function Jy(e){Ch.getEnv(e).emitter.isRecording=!1}function Ky(e){e=Ch.getEnv(e).notifications;
e.splice(0,e.length)}function Ly(e){return Ch.getEnv(e).notifications}function My(e){Ch.getEnv(e).emitter.isLogging=!0}function Sv(e){Ch.getEnv(e).emitter.isLogging=!1}function Tv(){Tv=Bb(regeneratorRuntime.mark(function c(h,l,b){var g,a,d;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return g=Sh.parse(l),a=g.body,d=a.filter(function(k){return"ImportDeclaration"===k.type}),f.next=5,Promise.all(d.map(function(k){return h.normalize(k.source.value,b).then(function(n){k.source.value=
n;return h.get(n)||h["import"](n)})}))["catch"](function(k){console.error("Error ensuring imports: "+k.message);throw k;});case 5:return f.abrupt("return",Sh.stringify(g));case 6:case "end":return f.stop()}},c)}));return Tv.apply(this,arguments)}function Wo(e,h,l){l=Object.assign({targetModule:null,parentModule:null,es6Transpile:!0,transpiler:null,transpilerOptions:null,format:"esm"},l);e.debug&&console.log("[lively.module] runEval: ".concat(h.slice(0,100).replace(/\n/mg," "),"..."));var b=l,c=b.format,
g=b.targetModule;g=e.decanonicalize(g||"*scratch*",b.parentModule);l.targetModule=g;c&&((b=e.getConfig().meta[g])||(b={}),b[g]||(b[g]={}),b[g].format||(b[g].format=c,e.config(b)));c=e.get("@lively-env").moduleEnv(g);b=c.recorder;var a=c.recorderName,d=c.dontTransform,f=Sh.getEs6Transpiler(e,l,c),k="var _moduleExport = ".concat(a,"._moduleExport,\n")+"    _moduleImport = ".concat(a,"._moduleImport;\n");l=Object.assign({waitForPromise:!0,sync:!1,evalId:l.evalId||c.nextEvalId(),sourceAccessorName:(l.hasOwnProperty("embedOriginalCode")?
l.embedOriginalCode:1)?"__lvOriginalCode":void 0,originalSource:h},l,{header:k,recordGlobals:!0,dontTransform:d,varRecorderName:a,topLevelVarRecorder:b,sourceURL:l.sourceURL||l.targetModule,context:l.context||b,wrapInStartEndCall:!0,es6ExportFuncId:"_moduleExport",es6ImportFuncId:"_moduleImport",transpiler:f,declarationWrapperName:c.varDefinitionCallbackName,currentModuleAccessor:Sh.funcCall(Sh.member(Sh.funcCall(Sh.member(Sh.member("__lvVarRecorder","System"),"get"),Sh.literal("@lively-env")),"moduleEnv"),
Sh.literal(l.targetModule))});if(!l.sync&&!l.importsEnsured&&Sh.hasUnimportedImports(e,h,g))return Sh.ensureImportsAreImported(e,h,g)["catch"](function(n){return null}).then(function(n){return Wo(e,n,Object.assign({},l,{importsEnsured:!0}))});if(!c.record()){if(!l.sync&&!l._moduleImported)return e["import"](g)["catch"](function(n){return null}).then(function(){return Wo(e,h,Object.assign({},l,{_moduleImported:!0}))});c.ensureRecord()}if(l.es6Transpile&&l.transpiler instanceof Promise)if(l.sync||l._transpilerLoaded)console.warn("[lively.vm] sync eval requested but transpiler is not yet loaded, will continue without transpilation!"),
l.transpiler=null;else return l.transpiler["catch"](function(n){return console.error(n)}).then(function(n){return Wo(e,h,Object.assign({},l,{transpiler:n,_transpilerLoaded:!0}))});e.debug&&console.log("[lively.module] runEval in module ".concat(g," started"));Sh.emit("lively.vm/doitrequest",{code:h,waitForPromise:l.waitForPromise,targetModule:l.targetModule},Date.now(),e);e.get("@lively-env").evaluationStart(g);g=Sh.vmRunEval(h,l);return l.sync?Sh.evalEnd(e,h,l,g):Promise.resolve(g).then(function(n){return Sh.evalEnd(e,
h,l,n)})}function Br(e,h){var l=h=Object.assign({format:"esm",System:null,targetModule:null},h),b=l.format,c=l.System;l=l.targetModule;c||"undefined"===typeof System||(c=System);return!c&&l?Promise.reject(Error("options to runEval have targetModule but cannot find system loader!")):l&&["esm","es6","register"].includes(b)?Rk.esmEval.runEval(c,e,h):Rk.globalEval.runEval(e,h)}function Gt(e,h){return Rk.globalEval.syncEval(e,h)}function Uv(e){return Jg.withSuperclasses(e).slice(1)}function Cr(e){var h=
[];do h.push(e),e=e[Jg.superclassSymbol];while(e&&e.name);return h.map(function(l){return l.name}).join("->")}function sc(e){for(var h=[];e;)h.push(e),e=e[Jg.superclassSymbol];return h}function Uc(e,h){do if(e===h)return!0;while(e=e[Jg.superclassSymbol]);return!1}function Cd(e,h){if(e.constructor===h&&e.__proto__===h.prototype)return e;e.constructor=h;e.__proto__=h.prototype;return e}function de(e){return e&&"function"===typeof e}function se(e){var h=Jg.RuntimeSourceDescriptor["for"](e),l=h.ast;h=
h.type;if("ClassDeclaration"!==h)throw Error("Expected class but got ".concat(h));return Jg.Path("body.body").get(l).map(function(b){var c=b["static"],g=b.kind;b=b.key;b.type;var a=b.value;b=b.name||a;a=Jg.isOverridden(e,b);var d=c?e:e.prototype;d="get"===g?d.__lookupGetter__(b):"set"===g?d.__lookupSetter__(b):d[b];return{"static":c,name:b,value:d,kind:g,owner:e,overridden:a}})}function Ke(e){return Jg.runtimeNonStaticMembers(e).concat(Jg.runtimeNonStaticMembers(e))}function Yf(e){var h=Jg.obj.getOwnPropertyDescriptors(e);
return Jg.arr.withoutAll(Object.keys(h),["prototype","name","length","toString"]).map(function(l){var b=h[l],c="function"===typeof b.value?"method":"get"in b?"get":"set"in b?"set":"unknown";return{"static":!0,name:l,value:"method"===c?b.value:"get"===c?b.get:"set"===c?b.set:null,kind:c,owner:e}})}function Bg(e){return Jg.arr.uniq(Jg.arr.without(Jg.withSuperclasses(e),Object).flatMap(function(h){return Jg.runtimeStaticClassMembers(h)}))}function ui(e){var h=Th.propertiesAndSettingsInHierarchyOf(e),
l=h.properties;h=h.propertySettings;e[Th.propertiesAndSettingsCacheSym]={properties:l,order:Th.obj.sortKeysWithBeforeAndAfterConstraints(l),propertySettings:h,classHierarchy:Th.getClassHierarchy(e)};l&&"object"===Jc(l)?Th.prepareClassForProperties(e,h,l):console.warn("Class ".concat(e.name," indicates it has managed properties but its ")+"properties accessor (".concat(Th.defaultPropertiesKey,") does not return ")+"a valid property descriptor map")}function rj(e,h){h=h?"function"===typeof h?h:h.value?
h.value:Object:Object;var l=e&&e[Qg.superclassSymbol];l&&l===h||(Qg.ensureInitializeStub(h),e[Qg.superclassSymbol]=h,Qg.setPrototypeOf(e.prototype,h.prototype),h!==Object&&Qg.setPrototypeOf(e,h));return h}function ie(e,h){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},g=5<arguments.length?arguments[5]:void 0,a=6<arguments.length?arguments[6]:void 0,d=e.name,f=d&&
c.hasOwnProperty(d)&&c[d];c=f&&f[Qg.superclassSymbol];f&&"function"===typeof f&&c||(f=e);Qg.setSuperclass(f,h);Qg.installMethods(f,l,b);f[Qg.objMetaSymbol]=a;g&&(a=g["package"](),c=f[Qg.moduleMetaSymbol],d=Date.now(),f[Qg.moduleMetaSymbol]={"package":a?{name:a.name,version:a.version}:{},pathInPackage:a?g.pathInPackage():g.id,lastChange:c&&c.lastChange&&d<=c.lastChange?c.lastChange+1:d,lastSuperclassChange:0},h&&h.referencedAs&&(f.hasOwnProperty(Qg.moduleSubscribeToToplevelChangesSym)&&g.unsubscribeFromToplevelDefinitionChanges(f[Qg.moduleSubscribeToToplevelChangesSym]),
f[Qg.moduleSubscribeToToplevelChangesSym]=g.subscribeToToplevelDefinitionChanges(function(k,n){if(k===h.referencedAs){k=n&&n[Qg.moduleMetaSymbol];var p=f[Qg.moduleMetaSymbol];if(k){if(k.lastChange===p.lastSuperclassChange)return;p.lastSuperclassChange=k.lastChange}Qg.setSuperclass(f,n);Qg.installMethods(f,l,b);Qg.prepareClassForManagedPropertiesAfterCreation(f)}})));f.toString=function(){var k=String(this.prototype[Qg.initializeSymbol]).match(Qg.constructorArgMatcher),n=this[Qg.superclassSymbol];
return"class ".concat(this.name," ").concat(n?"extends ".concat(n.name):""," {\n")+"  constructor".concat(k?k[0]:"()"," { /*...*/ }")+"\n}"};Qg.prepareClassForManagedPropertiesAfterCreation(f);return f}function Dr(e){e=new Me.Color(e);return{red:e.red()/255,green:e.green()/255,blue:e.blue()/255,alpha:e.alpha()}}function NI(e){return function(h,l,b,c){null==b&&(b=e);null==c&&(c=b);null==l&&(l=qi.unit(h));var g=qi.unit(h);if(g===l)return h;var a=qi.unitLess(h);"px"!==qi.unit(b)&&console.warn("Parameter fromContext must resolve to a value in pixel units.");
"px"!==qi.unit(c)&&console.warn("Parameter toContext must resolve to a value in pixel units.");if("px"!==g)if("em"===g)a=qi.unitLess(h)*qi.unitLess(b);else if("rem"===g)a=qi.unitLess(h)*qi.unitLess(e);else if("ex"===g)a=qi.unitLess(h)*qi.unitLess(b)*2;else return"ch"===g||"vw"===g||"vh"===g||"vmin"===g?console.warn(g+" units can't be reliably converted; Returning original value."):console.warn(g+" is an unknown or unsupported length unit; Returning original value."),h;b=a;if("px"!==l)if("em"===l)b=
a/qi.unitLess(c);else if("rem"===l)b=a/qi.unitLess(e);else if("ex"===l)b=a/qi.unitLess(c)/2;else return"ch"===l||"vw"===l||"vh"===l||"vmin"===l?console.warn(l+" units can't be reliably converted; Returning original value."):console.warn(l+" is an unknown or unsupported length unit; Returning original value."),h;return parseFloat(b.toFixed(5))+l}}function LB(e){return Number(qi.parseCssLength(e,"px").slice(0,-2))}function Bm(e,h,l,b){if("number"===typeof e){var c=e;e=h;h=b}else c=e.x,e=e.y,l=h.x-c,
h=h.y-e;return new Xe.Rectangle(c,e,l,h)}function Ij(e,h){return new Xe.Point(e,h)}function en(e){return e.constructor[Ni.classNameProp]||e.constructor.name}function Ht(e){if(e&&e.constructor){var h=Ni.getClassName(e);if(h){if(e=e.constructor[Ni.moduleMetaInClassProp],"Object"!==h||e)return e&&(delete e.lastChange,delete e.lastSuperclassChange),{className:h,module:e}}else console.warn("Cannot serialize class info of anonymous class of instance ".concat(e))}}function Er(e){var h=e.module;if(h){var l=
h.pathInPackage;if(h["package"]&&h["package"].name&&"no group"!==h["package"].name){var b=System.decanonicalize(h["package"].name.replace(/\/*$/,"/"));l=Ni.string.joinPath(b,l)}b=System.get("@lively-env");if(h=b.moduleEnv(l)||b.moduleEnv(h.pathInPackage))return h.recorder[e.className];console.warn("Trying to deserialize instance of class ".concat(e.className," but the module ").concat(l," is not yet loaded"))}return System.global[e.className]}function Xo(e){var h=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:function(x){return x},l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},b=new Kg.ExpressionSerializer,c=l.isMorph?l.propertiesAndPropertySettings().order:[];c=c.length?c:Kg.obj.keys(e);var g=ba(c),a;try{for(g.s();!(a=g.n()).done;){var d=a.value,f=e[d];if("_env"===d||"env"===d||"__connections__"===d||"__refs__"===d)return;Kg.obj.isString(f)&&b.isSerializedExpression(f)&&(f=b.deserializeExpr(f));["borderColor","borderWidth","borderStyle","borderRadius"].includes(d)&&(f=Xo(f,h));
f&&f._id&&(f=h(Xo(f,h)));l[d]=f}}catch(x){g.e(x)}finally{g.f()}e.submorphs&&(l.submorphs=e.submorphs.map(function(x){return Xo(x,h)}));if(l){b=ba(c.filter(function(x){return!!e[x]}));var k;try{for(b.s();!(k=b.n()).done;){var n=k.value;l[n]=l[n]}}catch(x){b.e(x)}finally{b.f()}}if(e.__refs__){k=ba(e.__refs__);var p;try{for(k.s();!(p=k.n()).done;){var q=Nb(p.value,2),r=q[1];Kg.Path(q[0]).set(l,Kg.Path(r).get(l))}}catch(x){k.e(x)}finally{k.f()}}if(e.__connections__){p=ba(e.__connections__);var t;try{for(p.s();!(t=
p.n()).done;){var w=t.value;Kg.connect(Kg.Path(w.pathToSource).get(l),w.sourceAttrName,Kg.Path(w.pathToTarget).get(l),w.targetMethodName,Object.assign({},Kg.obj.select(w,["garbageCollect","converterString","updaterString","varMapping"])))}}catch(x){p.e(x)}finally{p.f()}}return l}function OI(e,h,l){var b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:["top","left","right","bottom"],c=l.asExpression,g=l.exprSerializer,a=l.nestedExpressions,d={};if(1===Kg.arr.uniqBy(Object.values(h).filter(function(n){return"function"!==
typeof n}),Kg.obj.equals).length)d=Kg.getExpression(e,h[b[0]],l);else{b=ba(b);var f;try{for(b.s();!(f=b.n()).done;){var k=f.value;d[k]=g.embedValue(h[k],c&&a)}}catch(n){b.e(n)}finally{b.f()}}return d}function Wn(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=h.dropMorphsWithNameOnly;l=void 0===l?!1:l;var b=h.keepFunctions;b=void 0===b?!0:b;var c=h.skipAttributes;c=void 0===c?[]:c;var g=h.keepConnections,a=void 0===g?!0:g;g=h.asExpression;g=void 0===g?!1:g;var d=h.exposeMasterRefs,
f=void 0===d?!1:d;d=h.root;var k=void 0===d?!0:d;d=h.path;var n=void 0===d?"":d;d=h.skipUnchangedFromMaster;var p=void 0===d?!1:d;d=h.skipUnchangedFromDefault;var q=void 0===d?!1:d;d=h.nestedExpressions;var r=void 0===d?{}:d;d=h.objToPath;d=void 0===d?new WeakMap:d;var t=h.objRefs;t=void 0===t?[]:t;var w=h.connections;w=void 0===w?[]:w;var x=h.exprSerializer,B=void 0===x?new Xn:x;x=h.masterInScope;var D=void 0===x?e.master:x;x=h.valueTransform;x=void 0===x?function($c,Oa){return Oa}:x;h=h.onlyInclude;
var F={skipAttributes:c,dropMorphsWithNameOnly:l,skipUnchangedFromDefault:q,skipUnchangedFromMaster:p,root:!1,keepFunctions:b,asExpression:g,nestedExpressions:r,connections:w,objRefs:t,objToPath:d,keepConnections:a,valueTransform:x,exposeMasterRefs:f,masterInScope:e.master||D,exprSerializer:B,onlyInclude:h};if(d.has(e))return t.push([n,d.get(e)]),null;d.set(e,n);var L={};d.set(e,n);a&&e.attributeConnections&&w.push.apply(w,hb(e.attributeConnections));var G;p&&D&&D.managesMorph(e)&&(G=D.auto.get(e.name)||
D.auto);e.isText&&""!==e.textString&&G&&G.textString!==e.textString&&(L.textAndAttributes=e.textAndAttributes.map(function($c,Oa){return $c&&$c.isMorph?Wn($c,Object.assign({},F,{path:n?n+".textAndAttributes."+Oa:"textAndAttributes."+Oa})):$c}));e.submorphs&&0<e.submorphs.length&&(L.submorphs=e.submorphs.map(function($c,Oa){return Wn($c,Object.assign({},F,{path:n?n+".submorphs."+Oa:"submorphs."+Oa}))}).filter(Boolean),0===L.submorphs.length&&delete L.submorphs);var oa;D&&(oa=D.propsToSerializeForMorph(e,
e.__only_serialize__));for(var ha in e.spec(q))if("name"===ha||!G||!Kg.obj.equals(G[ha],e[ha]))if(p=x(ha,e[ha]),!p||"object"!==Jc(p)||Array.isArray(p)||p.isMorph||d.set(p,n?n+"."+ha:ha),!(oa&&!oa.includes(ha)||"master"===ha&&f||"position"===ha&&Kg.Path("owner.layout.renderViaCSS").get(e)||"submorphs"===ha||"type"===ha||e.isLabel&&"extent"===ha||c.includes(ha)))if("metadata"===ha&&Kg.Path("commit.__serialize__").get(p))L[ha]=Object.assign({},p,{commit:Kg.getExpression(ha+".commit",p.commit,F)});else if(["borderColor",
"borderWidth","borderStyle"].includes(ha))L[ha]=Kg.serializeNestedProp(ha,p,F);else if("borderRadius"===ha)L[ha]=Kg.serializeNestedProp(ha,p,F,["topLeft","topRight","bottomRight","bottomLeft"]);else if(p&&p.isMorph)L[ha]=Wn(p,Object.assign({},F,{path:n?n+"."+ha:ha}));else if(p&&p.__serialize__)G&&Kg.getExpression(ha,p,Object.assign({},F,{asExpression:!1}))===Kg.getExpression(ha,x(ha,G[ha]),Object.assign({},F,{asExpression:!1}))||(L[ha]=Kg.getExpression(ha,p,F));else if(Array.isArray(p)){p=Kg.getArrayExpression(ha,
p,n,F);if(G&&(q=function($c,Oa){return"_rev"===$c?void 0:Oa},B=JSON.stringify(Kg.getArrayExpression(ha,G[ha],n,F),q),JSON.stringify(p,q)===B))continue;L[ha]=p}else{if(p&&!Kg.obj.isString(p)&&!Kg.obj.isNumber(p)&&0<Kg.properties.allOwnPropertiesOrFunctions(p).length)for(var Ha in p)p[Ha]&&p[Ha].isMorph&&(p[Ha]=Wn(p[Ha],Object.assign({},F,{path:n?n+"."+ha+"."+Ha:ha+"."+Ha})));L[ha]=p}e.isText&&delete L.textString;g||(L._id=e._id);if(a&&k){G=[];oa=ba(w);var Va;try{for(oa.s();!(Va=oa.n()).done;){var hc=
Va.value,qc=hc.sourceAttrName,jc=hc.targetMethodName,Ya=hc.targetObj,xa=hc.updaterString,tc=hc.converterString,Qb=hc.garbageCollect,wc=d.get(hc.sourceObj),Zb=d.get(Ya);"string"===typeof wc&&"string"===typeof Zb&&G.push({pathToSource:wc,pathToTarget:Zb,garbageCollect:Qb,updaterString:xa,converterString:tc,sourceAttrName:qc,targetMethodName:jc,varMapping:{properties:Kg.properties}})}}catch($c){oa.e($c)}finally{oa.f()}g||(L.__connections__=G)}if(l&&Kg.arr.isSubset(Object.keys(L),["type","name"])||h&&
!h.includes(e))return null;b?(Object.keys(e).forEach(function($c){return"function"===typeof e[$c]&&!e[$c].isConnectionWrapper&&(L[$c]=e[$c])}),L.type=g?Kg.getExpression("type",e.constructor,F):e.constructor.name):(L.styleSheets&&(L.styleSheets=[]),L.type=Kg.getSerializableClassMeta(e));("Morph"===Kg.getClassName(e)||c.includes("type"))&&delete L.type;if(g&&(Va=function(){if(k){var $c="morph(".concat(Kg.obj.inspect(L,{keySorter:function(Kd,ra){return"name"===Kd||"type"===Kd?-1:"submorphs"===Kd?1:0}}),
")");var Oa={"lively.morphic":["morph"]}}else if(f&&e.master){var md,la=e.master.auto[Symbol["for"]("lively-module-meta")],$a=la["export"];la=la.module;L&&($c="part(".concat($a,", ").concat(Kg.obj.inspect(L,{keySorter:function(Kd,ra){return"name"===Kd||"type"===Kd||"tooltip"===Kd?-1:0}}),")"));Oa=(md={},Pc(md,la,$a),Pc(md,"lively.morphic",["part"]),md)}if($c){for(var dd in r)$c=$c.replace('"'+dd+'"',r[dd].__expr__),Object.entries(r[dd].bindings||{}).forEach(function(Kd){var ra=Nb(Kd,2);Kd=ra[0];ra=
ra[1];Oa[Kd]=Oa[Kd]?Kg.arr.uniq([].concat(hb(Oa[Kd]),hb(ra))):ra});return f&&e.master&&!k?(md=Kg.string.newUUID(),r[md]={__expr__:$c,bindings:Oa},{v:md}):{v:{__expr__:$c,bindings:Oa}}}}(),"object"===Jc(Va)))return Va.v;if(Kg.obj.isEmpty(L))return null;k&&(L.__refs__=t);return L}function Xp(e,h,l,b,c){"function"!==typeof l||"undefined"!==typeof b&&"object"!==Jc(b)||(c=b,b="call",c||(c={}),c.updater||(c.updater=function(f,k){return f(null,k)}));var g=e.getConnectionPoints&&e.getConnectionPoints()||
e.connections,a=(g=g&&g[h])&&g.map&&lively.morphic&&lively.morphic.GeometryConnection||g&&g.connectionClassType&&lively.Class.forName(g.connectionClassType)||Dh.AttributeConnection;"function"===typeof c&&(console.warn("Directly passing a converter function to connect() is deprecated! Use spec object instead!"),c={converter:c});g&&(c=Dh.obj.merge(g,c));a=new a(e,h,l,b,c);var d=a.getExistingConnection();if(d)return d.resetSpec(),d.init(e,h,l,b,c),d;c=a.connect();if("function"===typeof e.onConnect)e.onConnect(h,
l,b);g&&g.updateOnConnect&&a.update(e[h]);return c}function Vv(e,h,l,b,c){e=Dh.connect(e,h,l,b,c);e._isEpiConnection=!0;return e}function It(e,h,l,b){"function"!==typeof l||"undefined"!==typeof b&&"object"!==Jc(b)||(b="call");if(e.attributeConnections){var c=ba(e.attributeConnections.slice()),g;try{for(c.s();!(g=c.n()).done;){var a=g.value;a.getSourceAttrName()===h&&a.getTargetObj()===l&&a.getTargetMethodName()===b&&a.disconnect()}}catch(d){c.e(d)}finally{c.f()}if("function"===typeof e.onDisconnect)e.onDisconnect(h,
l,b)}}function Wv(e){for(var h;e.attributeConnections&&(h=e.attributeConnections[0]);)h.disconnect()}function Jt(e,h,l,b,c){"function"!==typeof l||"undefined"!==typeof b&&"object"!==Jc(b)?c=c||{}:(c=b,b="call",c=c||{},c.updater||(c.updater=function(g,a){return g(null,a)}));c=c||{};c.removeAfterUpdate=!0;return Dh.connect(e,h,l,b,c)}function Vl(e,h,l){var b=e.attributeConnections;if(b){e=e[h];for(var c=0,g=b.length;c<g;c++){var a=b[c];a.getSourceAttrName()===h&&a.update(l,e)}}}function MB(e,h,l,b){if(e[h])l[b](e[h]);
else Dh.connect(e,h,l,b,{removeAfterUpdate:!0})}function NB(e,h,l,b){for(var c={key:h.pop(),whenDefined:function(g){Dh.callWhenNotNull(g,this.key,l,b)}};0<h.length;)c={key:h.pop(),next:c,whenDefined:function(g){Dh.callWhenNotNull(g,this.key,this.next,"whenDefined")}};c.whenDefined(e)}function Kt(e,h){var l=!1;h||"function"!==typeof e||(h=e,l=!0);if(l){e=Dh.AttributeConnection.prototype;e.isActive||(e.isActive=0);e.isActive++;try{var b=h()}finally{e.isActive--,0>=e.isActive&&delete e.isActive}}else{l=
e.sourceObj;var c=e.sourceAttribute,g=e.targetObj,a=e.targetAttribute;e=g&&a?function(d){return d.getSourceAttrName()===c&&g===d.getTargetObj()&&a===d.getTargetMethodName()}:function(d){return d.getSourceAttrName()===c};(e=l.attributeConnections&&l.attributeConnections.filter(e))&&Dh.arr.invoke(e,"activate");try{b=h()}finally{e&&Dh.arr.invoke(e,"deactivate")}}return b}function OB(e){if(null==e)return!0;e=Jc(e);return"boolean"===e||"number"===e||"string"===e?!0:!1}function PB(e){var h={},l;for(l in e)h[l]=
Fg.referencesOfId(e,l);return h}function QB(e){return e&&e.__ref__}function PI(e,h){return Fg.referencesOfId(Pc({},e.id,e.currentSnapshot),e.id,h)}function RB(e,h,l){e=e[h];h=[];for(var b in e.props){var c=e.props[b]||{},g=c.value;c=c.verbatim;Array.isArray(g)?h.push.apply(h,hb(Fg.referencesInArray(g,l&&b))):!c&&g&&Fg.isReference(g)&&h.push(l?{key:b,id:g.id}:g.id)}if(e.hasOwnProperty("entries"))for(b=0;b<e.entries.length;b++)g=e.entries[b],Array.isArray(g)?h.push.apply(h,hb(Fg.referencesInArray(g,
l&&g))):g&&Fg.isReference(g)&&h.push(l?{key:g,id:g.id}:g.id);return h}function QI(e,h){for(var l=[],b=0;b<e.length;b++){var c=e[b];Array.isArray(c)?l.push.apply(l,hb(QI(c,h?h+"["+b+"]":void 0))):c&&Fg.isReference(c)&&l.push(h?{key:h+"["+b+"]",id:c.id}:c.id)}return l}function SB(e,h){return(e[h][Fg.ClassHelper.classMetaForSerializationProp]||{}).module||{}}function TB(e,h){return Fg.referencesOfId(e,h).map(function(l){return l+":"+Fg.classNameOfId(e,l)})}function UB(e,h){return(e[h][Fg.ClassHelper.classMetaForSerializationProp]||
{}).className||"Object"}function VB(e,h,l){function b(x,B,D){if(!n)if(50<D)alert(""+f);else if(x===B)f.push(x),n=f.slice();else if(!k[x]){k[x]=!0;f.push(x);x=Fg.referencesOfId(e,x);for(var F=0;F<x.length;F++)b(x[F],B,D+1);f.pop()}}var c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},g=void 0===c.showPath?!0:c.showPath,a=c.hasOwnProperty("showClassNames")?c.showClassNames:!g,d=c.hasOwnProperty("showPropNames")?c.showPropNames:g;c=c.hasOwnProperty("hideId")?c.hideId:g;var f=[],k={},n;b(h,
l,0);if(!n)return null;if(!a&&!d)return n;for(var p=[],q=0;q<n.length-1;q++){var r=n[q],t=n[q+1],w=[];c||w.push(r);a&&w.push((e[r][Fg.ClassHelper.classMetaForSerializationProp]||{}).className||"Object");d&&(r=Fg.referencesOfId(e,r,!0).find(function(x){return x.id===t})||{key:"????"},w.push(r.key));p.push(w.join(":"))}g&&(p="."+p.join("."));return p}function WB(e,h,l){l=l.replace(/^\./,"");l=l.replace(/\[([^\]])+\]/g,".$1");l=Fg.Path(l).parts();var b=e[h];for(h=0;;){if(1E3<h++)throw"stop";var c=l.shift();
if(!c)break;if(!b.props||!b.props[c])throw Error("Property ".concat(c," not found for ref ").concat(JSON.stringify(b)));b=b.props[c].value;if(!b)throw Error("Property ".concat(c," has no value"));for(;Array.isArray(b);)b=b[l.shift()];if(!b||!b.__ref__)return b;b=e[b.id]}return b}function XB(e,h,l,b){l=l.replace(/^\./,"");l=l.replace(/\[([^\]])+\]/g,".$1");l=Fg.Path(l).parts();e=e[h];h=l.shift();if(!e.props||!e.props[h])throw Error("Property ".concat(h," not found for ref ").concat(JSON.stringify(e)));
var c=(e.props[h]||{}).value;if(!c)throw Error("Property ".concat(h," has no value"));if(l.length){var g=Fg.Path(l).get(c);Fg.Path(l).set(c,b(e,h,g))}else e.props[h].value=b(e,h,c)}function Fr(e,h){var l=Fg.arr.withoutAll(Object.keys(h),e),b=l.filter(function(g){if("AttributeConnection"===Fg.classNameOfId(h,g))return h[g].props.garbageCollect.value}),c=Fg.referenceGraph(Fg.obj.dissoc(Object.assign({},h),b));e.forEach(function(g){g=Fg.graph.subgraphReachableBy(c,g);for(var a=l.length;a--;)l[a]in g&&
l.splice(a,1)});l.forEach(function(g){return delete h[g]});return l}function YB(e){var h=function(b){if("AttributeConnection"===Fg.classNameOfId(e,b)){var c=e[b];if(e[Fg.Path("props.targetObj.value.id").get(c)])return"continue";if(c=e[Fg.Path("props.sourceObj.value.id").get(c)])c.props.attributeConnections.value=c.props.attributeConnections.value.filter(function(g){return g.id!=b});delete e[b]}},l;for(l in e)h(l)}function ZB(e){var h=function(b){if("AttributeConnection"===Fg.classNameOfId(e,b)){var c=
e[b],g=e[Fg.Path("props.sourceObj.value.id").get(c)];c.props._isEpiConnection&&(g.props.attributeConnections.value=g.props.attributeConnections.value.filter(function(a){return a.id!=b}),delete e[b])}},l;for(l in e)h(l)}function Gr(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Fg.defaultExprSerializer;e.snapshot&&(e=e.snapshot);for(var l=[],b=0,c=Object.keys(e);b<c.length;b++){var g=e[c[b]];if(g.__expr__){var a;(g=h.requiredModulesOf__expr__(g.__expr__))&&(a=l).push.apply(a,hb(g))}else{var d=
Fg.ClassHelper.sourceModulesInObjRef(g);if(d&&d.length){var f;(f=l).push.apply(f,hb(d.map(function(q){return(q["package"]&&q["package"].name||"")+"/"+q.pathInPackage})))}if(g.props)for(var k in g.props){d=g.props[k].value;if("string"===typeof d){var n,p=h.requiredModulesOf__expr__(d);p&&(n=l).push.apply(n,hb(p))}Fg.obj.isArray(d)&&d.forEach(function(q){if("string"===typeof q){var r;(q=h.requiredModulesOf__expr__(q))&&(r=l).push.apply(r,hb(q))}})}}}return l=Fg.arr.uniq(l)}function $B(e){throw Error("Node.js process "+
e+" is not supported by JSPM core outside of Node.js");}function eW(){Lt&&Hr&&(Lt=!1,Hr.length?Yo=Hr.concat(Yo):Ny=-1,Yo.length&&RI())}function RI(){if(!Lt){var e=setTimeout(eW,0);Lt=!0;for(var h=Yo.length;h;){Hr=Yo;for(Yo=[];++Ny<h;)Hr&&Hr[Ny].run();Ny=-1;h=Yo.length}Hr=null;Lt=!1;clearTimeout(e)}}function SI(e,h){this.fun=e;this.array=h}function hl(){}function aC(e){var h=Math.floor(.001*(Date.now()-Yp.now())),l=.001*Yp.now();h=Math.floor(l)+h;l=Math.floor(l%1*1E9);e&&(h-=e[0],l-=e[1],0>l&&(h--,
l+=1E9));return[h,l]}function Zp(){return fk}function Oy(){if(TI)return UI;TI=!0;return UI={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16}}function Py(){if(VI)return WI;VI=!0;var e=fk;return WI="object"===Jc(e)&&e.env&&e.env.NODE_DEBUG&&/\bsemver\b/i.test(e.env.NODE_DEBUG)?function(){for(var h,l=arguments.length,b=Array(l),c=0;c<l;c++)b[c]=arguments[c];return(h=console).error.apply(h,["SEMVER"].concat(b))}:function(){}}
function Mt(){if(XI)return Yn;XI=!0;var e=Oy().MAX_SAFE_COMPONENT_LENGTH,h=Py();Yn=Yn={};var l=Yn.re=[],b=Yn.src=[],c=Yn.t={},g=0,a=function(d,f,k){var n=g++;h(d,n,f);c[d]=n;b[n]=f;l[n]=new RegExp(f,k?"g":void 0)};a("NUMERICIDENTIFIER","0|[1-9]\\d*");a("NUMERICIDENTIFIERLOOSE","[0-9]+");a("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");a("MAINVERSION","(".concat(b[c.NUMERICIDENTIFIER],")\\.")+"(".concat(b[c.NUMERICIDENTIFIER],")\\.")+"(".concat(b[c.NUMERICIDENTIFIER],")"));a("MAINVERSIONLOOSE",
"(".concat(b[c.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(b[c.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(b[c.NUMERICIDENTIFIERLOOSE],")"));a("PRERELEASEIDENTIFIER","(?:".concat(b[c.NUMERICIDENTIFIER],"|").concat(b[c.NONNUMERICIDENTIFIER],")"));a("PRERELEASEIDENTIFIERLOOSE","(?:".concat(b[c.NUMERICIDENTIFIERLOOSE],"|").concat(b[c.NONNUMERICIDENTIFIER],")"));a("PRERELEASE","(?:-(".concat(b[c.PRERELEASEIDENTIFIER],"(?:\\.").concat(b[c.PRERELEASEIDENTIFIER],")*))"));a("PRERELEASELOOSE","(?:-?(".concat(b[c.PRERELEASEIDENTIFIERLOOSE],
"(?:\\.").concat(b[c.PRERELEASEIDENTIFIERLOOSE],")*))"));a("BUILDIDENTIFIER","[0-9A-Za-z-]+");a("BUILD","(?:\\+(".concat(b[c.BUILDIDENTIFIER],"(?:\\.").concat(b[c.BUILDIDENTIFIER],")*))"));a("FULLPLAIN","v?".concat(b[c.MAINVERSION]).concat(b[c.PRERELEASE],"?").concat(b[c.BUILD],"?"));a("FULL","^".concat(b[c.FULLPLAIN],"$"));a("LOOSEPLAIN","[v=\\s]*".concat(b[c.MAINVERSIONLOOSE]).concat(b[c.PRERELEASELOOSE],"?").concat(b[c.BUILD],"?"));a("LOOSE","^".concat(b[c.LOOSEPLAIN],"$"));a("GTLT","((?:<|>)?=?)");
a("XRANGEIDENTIFIERLOOSE","".concat(b[c.NUMERICIDENTIFIERLOOSE],"|x|X|\\*"));a("XRANGEIDENTIFIER","".concat(b[c.NUMERICIDENTIFIER],"|x|X|\\*"));a("XRANGEPLAIN","[v=\\s]*(".concat(b[c.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(b[c.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(b[c.XRANGEIDENTIFIER],")")+"(?:".concat(b[c.PRERELEASE],")?").concat(b[c.BUILD],"?")+")?)?");a("XRANGEPLAINLOOSE","[v=\\s]*(".concat(b[c.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(b[c.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(b[c.XRANGEIDENTIFIERLOOSE],
")")+"(?:".concat(b[c.PRERELEASELOOSE],")?").concat(b[c.BUILD],"?")+")?)?");a("XRANGE","^".concat(b[c.GTLT],"\\s*").concat(b[c.XRANGEPLAIN],"$"));a("XRANGELOOSE","^".concat(b[c.GTLT],"\\s*").concat(b[c.XRANGEPLAINLOOSE],"$"));a("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(e,"})")+"(?:\\.(\\d{1,".concat(e,"}))?")+"(?:\\.(\\d{1,".concat(e,"}))?")+"(?:$|[^\\d])");a("COERCERTL",b[c.COERCE],!0);a("LONETILDE","(?:~>?)");a("TILDETRIM","(\\s*)".concat(b[c.LONETILDE],"\\s+"),!0);Yn.tildeTrimReplace="$1~";
a("TILDE","^".concat(b[c.LONETILDE]).concat(b[c.XRANGEPLAIN],"$"));a("TILDELOOSE","^".concat(b[c.LONETILDE]).concat(b[c.XRANGEPLAINLOOSE],"$"));a("LONECARET","(?:\\^)");a("CARETTRIM","(\\s*)".concat(b[c.LONECARET],"\\s+"),!0);Yn.caretTrimReplace="$1^";a("CARET","^".concat(b[c.LONECARET]).concat(b[c.XRANGEPLAIN],"$"));a("CARETLOOSE","^".concat(b[c.LONECARET]).concat(b[c.XRANGEPLAINLOOSE],"$"));a("COMPARATORLOOSE","^".concat(b[c.GTLT],"\\s*(").concat(b[c.LOOSEPLAIN],")$|^$"));a("COMPARATOR","^".concat(b[c.GTLT],
"\\s*(").concat(b[c.FULLPLAIN],")$|^$"));a("COMPARATORTRIM","(\\s*)".concat(b[c.GTLT],"\\s*(").concat(b[c.LOOSEPLAIN],"|").concat(b[c.XRANGEPLAIN],")"),!0);Yn.comparatorTrimReplace="$1$2$3";a("HYPHENRANGE","^\\s*(".concat(b[c.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(b[c.XRANGEPLAIN],")")+"\\s*$");a("HYPHENRANGELOOSE","^\\s*(".concat(b[c.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(b[c.XRANGEPLAINLOOSE],")")+"\\s*$");a("STAR","(<|>)?=?\\s*\\*");a("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");a("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$");
return Yn}function Qy(){if(YI)return ZI;YI=!0;var e=["includePrerelease","loose","rtl"];return ZI=function(h){return h?"object"!==Jc(h)?{loose:!0}:e.filter(function(l){return h[l]}).reduce(function(l,b){l[b]=!0;return l},{}):{}}}function bC(){if($I)return aJ;$I=!0;var e=/^[0-9]+$/,h=function(l,b){var c=e.test(l),g=e.test(b);c&&g&&(l=+l,b=+b);return l===b?0:c&&!g?-1:g&&!c?1:l<b?-1:1};return aJ={compareIdentifiers:h,rcompareIdentifiers:function(l,b){return h(b,l)}}}function sl(){if(bJ)return cJ;bJ=
!0;var e=Py(),h=Oy(),l=h.MAX_LENGTH,b=h.MAX_SAFE_INTEGER;h=Mt();var c=h.re,g=h.t,a=Qy(),d=bC().compareIdentifiers;return cJ=function(){function f(k,n){rd(this,f);n=a(n);if(k instanceof f){if(k.loose===!!n.loose&&k.includePrerelease===!!n.includePrerelease)return k;k=k.version}else if("string"!==typeof k)throw new TypeError("Invalid Version: ".concat(k));if(k.length>l)throw new TypeError("version is longer than ".concat(l," characters"));e("SemVer",k,n);this.options=n;this.loose=!!n.loose;this.includePrerelease=
!!n.includePrerelease;n=k.trim().match(n.loose?c[g.LOOSE]:c[g.FULL]);if(!n)throw new TypeError("Invalid Version: ".concat(k));this.raw=k;this.major=+n[1];this.minor=+n[2];this.patch=+n[3];if(this.major>b||0>this.major)throw new TypeError("Invalid major version");if(this.minor>b||0>this.minor)throw new TypeError("Invalid minor version");if(this.patch>b||0>this.patch)throw new TypeError("Invalid patch version");this.prerelease=n[4]?n[4].split(".").map(function(p){if(/^[0-9]+$/.test(p)){var q=+p;if(0<=
q&&q<b)return q}return p}):[];this.build=n[5]?n[5].split("."):[];this.format()}Ac(f,[{key:"format",value:function(){this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch);this.prerelease.length&&(this.version+="-".concat(this.prerelease.join(".")));return this.version}},{key:"toString",value:function(){return this.version}},{key:"compare",value:function(k){e("SemVer.compare",this.version,this.options,k);if(!(k instanceof f)){if("string"===typeof k&&k===this.version)return 0;
k=new f(k,this.options)}return k.version===this.version?0:this.compareMain(k)||this.comparePre(k)}},{key:"compareMain",value:function(k){k instanceof f||(k=new f(k,this.options));return d(this.major,k.major)||d(this.minor,k.minor)||d(this.patch,k.patch)}},{key:"comparePre",value:function(k){k instanceof f||(k=new f(k,this.options));if(this.prerelease.length&&!k.prerelease.length)return-1;if(!this.prerelease.length&&k.prerelease.length)return 1;if(!this.prerelease.length&&!k.prerelease.length)return 0;
var n=0;do{var p=this.prerelease[n],q=k.prerelease[n];e("prerelease compare",n,p,q);if(void 0===p&&void 0===q)return 0;if(void 0===q)return 1;if(void 0===p)return-1;if(p!==q)return d(p,q)}while(++n)}},{key:"compareBuild",value:function(k){k instanceof f||(k=new f(k,this.options));var n=0;do{var p=this.build[n],q=k.build[n];e("prerelease compare",n,p,q);if(void 0===p&&void 0===q)return 0;if(void 0===q)return 1;if(void 0===p)return-1;if(p!==q)return d(p,q)}while(++n)}},{key:"inc",value:function(k,n){switch(k){case "premajor":this.minor=
this.patch=this.prerelease.length=0;this.major++;this.inc("pre",n);break;case "preminor":this.patch=this.prerelease.length=0;this.minor++;this.inc("pre",n);break;case "prepatch":this.prerelease.length=0;this.inc("patch",n);this.inc("pre",n);break;case "prerelease":0===this.prerelease.length&&this.inc("patch",n);this.inc("pre",n);break;case "major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++;this.patch=this.minor=0;this.prerelease=[];break;case "minor":0===this.patch&&
0!==this.prerelease.length||this.minor++;this.patch=0;this.prerelease=[];break;case "patch":0===this.prerelease.length&&this.patch++;this.prerelease=[];break;case "pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(k=this.prerelease.length;0<=--k;)"number"===typeof this.prerelease[k]&&(this.prerelease[k]++,k=-2);-1===k&&this.prerelease.push(0)}n&&(0===d(this.prerelease[0],n)?isNaN(this.prerelease[1])&&(this.prerelease=[n,0]):this.prerelease=[n,0]);break;default:throw Error("invalid increment argument: ".concat(k));
}this.format();this.raw=this.version;return this}}]);return f}()}function Nt(){if(dJ)return eJ;dJ=!0;var e=Oy().MAX_LENGTH,h=Mt(),l=h.re,b=h.t,c=sl(),g=Qy();return eJ=function(a,d){d=g(d);if(a instanceof c)return a;if("string"!==typeof a||a.length>e||!(d.loose?l[b.LOOSE]:l[b.FULL]).test(a))return null;try{return new c(a,d)}catch(f){return null}}}function fW(){if(fJ)return gJ;fJ=!0;var e=Nt();return gJ=function(h,l){return(h=e(h,l))?h.version:null}}function gW(){if(hJ)return iJ;hJ=!0;var e=Nt();return iJ=
function(h,l){return(h=e(h.trim().replace(/^[=v]+/,""),l))?h.version:null}}function hW(){if(jJ)return kJ;jJ=!0;var e=sl();return kJ=function(h,l,b,c){"string"===typeof b&&(c=b,b=void 0);try{return(new e(h instanceof e?h.version:h,b)).inc(l,c).version}catch(g){return null}}}function fn(){if(lJ)return mJ;lJ=!0;var e=sl();return mJ=function(h,l,b){return(new e(h,b)).compare(new e(l,b))}}function cC(){if(nJ)return oJ;nJ=!0;var e=fn();return oJ=function(h,l,b){return 0===e(h,l,b)}}function iW(){if(pJ)return qJ;
pJ=!0;var e=sl();return qJ=function(h,l){return(new e(h,l)).major}}function jW(){if(rJ)return sJ;rJ=!0;var e=sl();return sJ=function(h,l){return(new e(h,l)).minor}}function kW(){if(tJ)return uJ;tJ=!0;var e=Nt();return uJ=function(h,l){return(h=e(h,l))&&h.prerelease.length?h.prerelease:null}}function lW(){if(vJ)return wJ;vJ=!0;var e=fn();return wJ=function(h,l,b){return e(l,h,b)}}function dC(){if(xJ)return yJ;xJ=!0;var e=sl();return yJ=function(h,l,b){h=new e(h,b);l=new e(l,b);return h.compare(l)||
h.compareBuild(l)}}function mW(){if(zJ)return AJ;zJ=!0;var e=dC();return AJ=function(h,l){return h.sort(function(b,c){return e(c,b,l)})}}function Ry(){if(BJ)return CJ;BJ=!0;var e=fn();return CJ=function(h,l,b){return 0<e(h,l,b)}}function eC(){if(DJ)return EJ;DJ=!0;var e=fn();return EJ=function(h,l,b){return 0>e(h,l,b)}}function fC(){if(FJ)return GJ;FJ=!0;var e=fn();return GJ=function(h,l,b){return 0<=e(h,l,b)}}function HJ(){if(IJ)return JJ;IJ=!0;var e=fn();return JJ=function(h,l,b){return 0!==e(h,
l,b)}}function gC(){if(KJ)return LJ;KJ=!0;var e=fn();return LJ=function(h,l,b){return 0>=e(h,l,b)}}function MJ(){if(NJ)return OJ;NJ=!0;var e=cC(),h=HJ(),l=Ry(),b=fC(),c=eC(),g=gC();return OJ=function(a,d,f,k){switch(d){case "===":return"object"===Jc(a)&&(a=a.version),"object"===Jc(f)&&(f=f.version),a===f;case "!==":return"object"===Jc(a)&&(a=a.version),"object"===Jc(f)&&(f=f.version),a!==f;case "":case "=":case "==":return e(a,f,k);case "!=":return h(a,f,k);case ">":return l(a,f,k);case ">=":return b(a,
f,k);case "<":return c(a,f,k);case "<=":return g(a,f,k);default:throw new TypeError("Invalid operator: ".concat(d));}}}function nW(){if(PJ)return QJ;PJ=!0;var e=sl(),h=Nt(),l=Mt(),b=l.re,c=l.t;return QJ=function(g,a){if(g instanceof e)return g;"number"===typeof g&&(g=String(g));if("string"!==typeof g)return null;a=a||{};var d=null;if(a.rtl){for(var f;(f=b[c.COERCERTL].exec(g))&&(!d||d.index+d[0].length!==g.length);)d&&f.index+f[0].length===d.index+d[0].length||(d=f),b[c.COERCERTL].lastIndex=f.index+
f[1].length+f[2].length;b[c.COERCERTL].lastIndex=-1}else d=g.match(b[c.COERCE]);return null===d?null:h("".concat(d[2],".").concat(d[3]||"0",".").concat(d[4]||"0"),a)}}function Fi(e){var h=this;h instanceof Fi||(h=new Fi);h.tail=null;h.head=null;h.length=0;if(e&&"function"===typeof e.forEach)e.forEach(function(c){h.push(c)});else if(0<arguments.length)for(var l=0,b=arguments.length;l<b;l++)h.push(arguments[l]);return h}function Ir(e,h,l,b){if(!(this instanceof Ir))return new Ir(e,h,l,b);this.list=
b;this.value=e;h?(h.next=this,this.prev=h):this.prev=null;l?(l.prev=this,this.next=l):this.next=null}function gn(){if(RJ)return hC;RJ=!0;hC=function(){function L(G,oa){var ha=this;rd(this,L);oa=h(oa);if(G instanceof L)return G.loose===!!oa.loose&&G.includePrerelease===!!oa.includePrerelease?G:new L(G.raw,oa);if(G instanceof l)return this.raw=G.value,this.set=[[G]],this.format(),this;this.options=oa;this.loose=!!oa.loose;this.includePrerelease=!!oa.includePrerelease;this.raw=G;this.set=G.split("||").map(function(hc){return ha.parseRange(hc.trim())}).filter(function(hc){return hc.length});
if(!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(G));if(1<this.set.length)if(G=this.set[0],this.set=this.set.filter(function(hc){return"<0.0.0-0"!==hc[0].value}),0===this.set.length)this.set=[G];else if(1<this.set.length){G=ba(this.set);var Ha;try{for(G.s();!(Ha=G.n()).done;){var Va=Ha.value;if(1===Va.length&&""===Va[0].value){this.set=[Va];break}}}catch(hc){G.e(hc)}finally{G.f()}}this.format()}Ac(L,[{key:"format",value:function(){return this.range=this.set.map(function(G){return G.join(" ").trim()}).join("||").trim()}},
{key:"toString",value:function(){return this.range}},{key:"parseRange",value:function(G){var oa=this;G=G.trim();var ha=Object.keys(this.options).join(",");ha="parseRange:".concat(ha,":").concat(G);var Ha=e.get(ha);if(Ha)return Ha;Ha=this.options.loose;G=G.replace(Ha?a[d.HYPHENRANGELOOSE]:a[d.HYPHENRANGE],F(this.options.includePrerelease));b("hyphen replace",G);G=G.replace(a[d.COMPARATORTRIM],f);b("comparator trim",G);G=G.replace(a[d.TILDETRIM],k);G=G.replace(a[d.CARETTRIM],n);G=G.split(/\s+/).join(" ");
var Va=G.split(" ").map(function(jc){var Ya=jc;jc=oa.options;b("comp",Ya,jc);Ya=w(Ya,jc);b("caret",Ya);Ya=r(Ya,jc);b("tildes",Ya);Ya=B(Ya,jc);b("xrange",Ya);b("replaceStars",Ya,jc);Ya=Ya.trim().replace(a[d.STAR],"");b("stars",Ya);return Ya}).join(" ").split(/\s+/).map(function(jc){var Ya=oa.options;b("replaceGTE0",jc,Ya);return jc.trim().replace(a[Ya.includePrerelease?d.GTE0PRE:d.GTE0],"")});Ha&&(Va=Va.filter(function(jc){b("loose invalid filter",jc,oa.options);return!!jc.match(a[d.COMPARATORLOOSE])}));
b("range list",Va);G=new Map;Ha=Va.map(function(jc){return new l(jc,oa.options)});Ha=ba(Ha);var hc;try{for(Ha.s();!(hc=Ha.n()).done;){var qc=hc.value;if("<0.0.0-0"===qc.value)return[qc];G.set(qc.value,qc)}}catch(jc){Ha.e(jc)}finally{Ha.f()}if(1<G.size&&G.has(""))G["delete"]("");hc=hb(G.values());e.set(ha,hc);return hc}},{key:"intersects",value:function(G,oa){if(!(G instanceof L))throw new TypeError("a Range is required");return this.set.some(function(ha){return p(ha,oa)&&G.set.some(function(Ha){return p(Ha,
oa)&&ha.every(function(Va){return Ha.every(function(hc){return Va.intersects(hc,oa)})})})})}},{key:"test",value:function(G){if(!G)return!1;if("string"===typeof G)try{G=new c(G,this.options)}catch(qc){return!1}for(var oa=0;oa<this.set.length;oa++){a:{var ha=this.set[oa];for(var Ha=G,Va=this.options,hc=0;hc<ha.length;hc++)if(!ha[hc].test(Ha)){ha=!1;break a}if(Ha.prerelease.length&&!Va.includePrerelease){for(Va=0;Va<ha.length;Va++)if(b(ha[Va].semver),ha[Va].semver!==l.ANY&&0<ha[Va].semver.prerelease.length&&
(hc=ha[Va].semver,hc.major===Ha.major&&hc.minor===Ha.minor&&hc.patch===Ha.patch)){ha=!0;break a}ha=!1}else ha=!0}if(ha)return!0}return!1}}]);return L}();var e=new oW({max:1E3}),h=Qy(),l=Sy(),b=Py(),c=sl(),g=Mt(),a=g.re,d=g.t,f=g.comparatorTrimReplace,k=g.tildeTrimReplace,n=g.caretTrimReplace,p=function(L,G){var oa=!0;L=L.slice();for(var ha=L.pop();oa&&L.length;)oa=L.every(function(Ha){return ha.intersects(Ha,G)}),ha=L.pop();return oa},q=function(L){return!L||"x"===L.toLowerCase()||"*"===L},r=function(L,
G){return L.trim().split(/\s+/).map(function(oa){return t(oa,G)}).join(" ")},t=function(L,G){return L.replace(G.loose?a[d.TILDELOOSE]:a[d.TILDE],function(oa,ha,Ha,Va,hc){b("tilde",L,oa,ha,Ha,Va,hc);q(ha)?oa="":q(Ha)?oa=">=".concat(ha,".0.0 <").concat(+ha+1,".0.0-0"):q(Va)?oa=">=".concat(ha,".").concat(Ha,".0 <").concat(ha,".").concat(+Ha+1,".0-0"):hc?(b("replaceTilde pr",hc),oa=">=".concat(ha,".").concat(Ha,".").concat(Va,"-").concat(hc," <").concat(ha,".").concat(+Ha+1,".0-0")):oa=">=".concat(ha,
".").concat(Ha,".").concat(Va," <").concat(ha,".").concat(+Ha+1,".0-0");b("tilde return",oa);return oa})},w=function(L,G){return L.trim().split(/\s+/).map(function(oa){return x(oa,G)}).join(" ")},x=function(L,G){b("caret",L,G);var oa=G.includePrerelease?"-0":"";return L.replace(G.loose?a[d.CARETLOOSE]:a[d.CARET],function(ha,Ha,Va,hc,qc){b("caret",L,ha,Ha,Va,hc,qc);q(Ha)?ha="":q(Va)?ha=">=".concat(Ha,".0.0").concat(oa," <").concat(+Ha+1,".0.0-0"):q(hc)?ha="0"===Ha?">=".concat(Ha,".").concat(Va,".0").concat(oa,
" <").concat(Ha,".").concat(+Va+1,".0-0"):">=".concat(Ha,".").concat(Va,".0").concat(oa," <").concat(+Ha+1,".0.0-0"):qc?(b("replaceCaret pr",qc),ha="0"===Ha?"0"===Va?">=".concat(Ha,".").concat(Va,".").concat(hc,"-").concat(qc," <").concat(Ha,".").concat(Va,".").concat(+hc+1,"-0"):">=".concat(Ha,".").concat(Va,".").concat(hc,"-").concat(qc," <").concat(Ha,".").concat(+Va+1,".0-0"):">=".concat(Ha,".").concat(Va,".").concat(hc,"-").concat(qc," <").concat(+Ha+1,".0.0-0")):(b("no pr"),ha="0"===Ha?"0"===
Va?">=".concat(Ha,".").concat(Va,".").concat(hc).concat(oa," <").concat(Ha,".").concat(Va,".").concat(+hc+1,"-0"):">=".concat(Ha,".").concat(Va,".").concat(hc).concat(oa," <").concat(Ha,".").concat(+Va+1,".0-0"):">=".concat(Ha,".").concat(Va,".").concat(hc," <").concat(+Ha+1,".0.0-0"));b("caret return",ha);return ha})},B=function(L,G){b("replaceXRanges",L,G);return L.split(/\s+/).map(function(oa){return D(oa,G)}).join(" ")},D=function(L,G){L=L.trim();return L.replace(G.loose?a[d.XRANGELOOSE]:a[d.XRANGE],
function(oa,ha,Ha,Va,hc,qc){b("xRange",L,oa,ha,Ha,Va,hc,qc);var jc=q(Ha),Ya=jc||q(Va);hc=Ya||q(hc);"="===ha&&hc&&(ha="");qc=G.includePrerelease?"-0":"";jc?oa=">"===ha||"<"===ha?"<0.0.0-0":"*":ha&&hc?(Ya&&(Va=0),hc=0,">"===ha?(ha=">=",Ya?(Ha=+Ha+1,Va=0):Va=+Va+1,hc=0):"<="===ha&&(ha="<",Ya?Ha=+Ha+1:Va=+Va+1),"<"===ha&&(qc="-0"),oa="".concat(ha+Ha,".").concat(Va,".").concat(hc).concat(qc)):Ya?oa=">=".concat(Ha,".0.0").concat(qc," <").concat(+Ha+1,".0.0-0"):hc&&(oa=">=".concat(Ha,".").concat(Va,".0").concat(qc,
" <").concat(Ha,".").concat(+Va+1,".0-0"));b("xRange return",oa);return oa})},F=function(L){return function(G,oa,ha,Ha,Va,hc,qc,jc,Ya,xa,tc,Qb,wc){oa=q(ha)?"":q(Ha)?">=".concat(ha,".0.0").concat(L?"-0":""):q(Va)?">=".concat(ha,".").concat(Ha,".0").concat(L?"-0":""):hc?">=".concat(oa):">=".concat(oa).concat(L?"-0":"");jc=q(Ya)?"":q(xa)?"<".concat(+Ya+1,".0.0-0"):q(tc)?"<".concat(Ya,".").concat(+xa+1,".0-0"):Qb?"<=".concat(Ya,".").concat(xa,".").concat(tc,"-").concat(Qb):L?"<".concat(Ya,".").concat(xa,
".").concat(+tc+1,"-0"):"<=".concat(jc);return"".concat(oa," ").concat(jc).trim()}};return hC}function Sy(){if(SJ)return iC;SJ=!0;var e=Symbol("SemVer ANY");iC=function(){function k(n,p){rd(this,k);p=h(p);if(n instanceof k){if(n.loose===!!p.loose)return n;n=n.value}a("comparator",n,p);this.options=p;this.loose=!!p.loose;this.parse(n);this.value=this.semver===e?"":this.operator+this.semver.version;a("comp",this)}Ac(k,null,[{key:"ANY",get:function(){return e}}]);Ac(k,[{key:"parse",value:function(n){var p=
n.match(this.options.loose?b[c.COMPARATORLOOSE]:b[c.COMPARATOR]);if(!p)throw new TypeError("Invalid comparator: ".concat(n));this.operator=void 0!==p[1]?p[1]:"";"="===this.operator&&(this.operator="");this.semver=p[2]?new d(p[2],this.options.loose):e}},{key:"toString",value:function(){return this.value}},{key:"test",value:function(n){a("Comparator.test",n,this.options.loose);if(this.semver===e||n===e)return!0;if("string"===typeof n)try{n=new d(n,this.options)}catch(p){return!1}return g(n,this.operator,
this.semver,this.options)}},{key:"intersects",value:function(n,p){if(!(n instanceof k))throw new TypeError("a Comparator is required");p&&"object"===Jc(p)||(p={loose:!!p,includePrerelease:!1});if(""===this.operator)return""===this.value?!0:(new f(n.value,p)).test(this.value);if(""===n.operator)return""===n.value?!0:(new f(this.value,p)).test(n.semver);var q=(">="===this.operator||">"===this.operator)&&(">="===n.operator||">"===n.operator),r=("<="===this.operator||"<"===this.operator)&&("<="===n.operator||
"<"===n.operator),t=this.semver.version===n.semver.version,w=(">="===this.operator||"<="===this.operator)&&(">="===n.operator||"<="===n.operator),x=g(this.semver,"<",n.semver,p)&&(">="===this.operator||">"===this.operator)&&("<="===n.operator||"<"===n.operator);n=g(this.semver,">",n.semver,p)&&("<="===this.operator||"<"===this.operator)&&(">="===n.operator||">"===n.operator);return q||r||t&&w||x||n}}]);return k}();var h=Qy(),l=Mt(),b=l.re,c=l.t,g=MJ(),a=Py(),d=sl(),f=gn();return iC}function Ty(){if(TJ)return UJ;
TJ=!0;var e=gn();return UJ=function(h,l,b){try{l=new e(l,b)}catch(c){return!1}return l.test(h)}}function pW(){if(VJ)return WJ;VJ=!0;var e=sl(),h=gn();return WJ=function(l,b,c){var g=null,a=null,d=null;try{d=new h(b,c)}catch(f){return null}l.forEach(function(f){!d.test(f)||g&&-1!==a.compare(f)||(g=f,a=new e(g,c))});return g}}function qW(){if(XJ)return YJ;XJ=!0;var e=gn();return YJ=function(h,l){try{return(new e(h,l)).range||"*"}catch(b){return null}}}function rW(){if(ZJ)return $J;ZJ=!0;var e=gn();
return $J=function(h,l,b){h=new e(h,b);l=new e(l,b);return h.intersects(l)}}function sW(){if(aK)return bK;aK=!0;var e=Nt(),h=cC();return bK=function(l,b){if(h(l,b))return null;l=e(l);b=e(b);var c=l.prerelease.length||b.prerelease.length,g=c?"pre":"",a;for(a in l)if(("major"===a||"minor"===a||"patch"===a)&&l[a]!==b[a])return g+a;return c?"prerelease":""}}function tW(){if(cK)return dK;cK=!0;var e=sl();return dK=function(h,l){return(new e(h,l)).patch}}function uW(){if(eK)return fK;eK=!0;var e=fn();return fK=
function(h,l){return e(h,l,!0)}}function vW(){if(gK)return hK;gK=!0;var e=dC();return hK=function(h,l){return h.sort(function(b,c){return e(b,c,l)})}}function wW(){if(iK)return jK;iK=!0;var e=gn();return jK=function(h,l){return(new e(h,l)).set.map(function(b){return b.map(function(c){return c.value}).join(" ").trim().split(" ")})}}function xW(){if(kK)return lK;kK=!0;var e=sl(),h=gn();return lK=function(l,b,c){var g=null,a=null,d=null;try{d=new h(b,c)}catch(f){return null}l.forEach(function(f){!d.test(f)||
g&&1!==a.compare(f)||(g=f,a=new e(g,c))});return g}}function yW(){if(mK)return nK;mK=!0;var e=sl(),h=gn(),l=Ry();return nK=function(b,c){b=new h(b,c);var g=new e("0.0.0");if(b.test(g))return g;g=new e("0.0.0-0");if(b.test(g))return g;g=null;c=function(d){var f=null;b.set[d].forEach(function(k){var n=new e(k.semver.version);switch(k.operator){case ">":0===n.prerelease.length?n.patch++:n.prerelease.push(0),n.raw=n.format();case "":case ">=":if(!f||l(n,f))f=n;break;case "<":case "<=":break;default:throw Error("Unexpected operation: ".concat(k.operator));
}});!f||g&&!l(g,f)||(g=f)};for(var a=0;a<b.set.length;++a)c(a);return g&&b.test(g)?g:null}}function jC(){if(oK)return pK;oK=!0;var e=sl(),h=Sy(),l=h.ANY,b=gn(),c=Ty(),g=Ry(),a=eC(),d=gC(),f=fC();return pK=function(k,n,p,q){k=new e(k,q);n=new b(n,q);switch(p){case ">":var r=g;var t=d;var w=a;var x=">";var B=">=";break;case "<":r=a;t=f;w=g;x="<";B="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"');}if(c(k,n,q))return!1;p=function(L){var G=null,oa=null;n.set[L].forEach(function(ha){ha.semver===
l&&(ha=new h(">=0.0.0"));G=G||ha;oa=oa||ha;r(ha.semver,G.semver,q)?G=ha:w(ha.semver,oa.semver,q)&&(oa=ha)});if(G.operator===x||G.operator===B||(!oa.operator||oa.operator===x)&&t(k,oa.semver)||oa.operator===B&&w(k,oa.semver))return{v:!1}};for(var D=0;D<n.set.length;++D){var F=p(D);if("object"===Jc(F))return F.v}return!0}}function zW(){if(qK)return rK;qK=!0;var e=jC();return rK=function(h,l,b){return e(h,l,">",b)}}function AW(){if(sK)return tK;sK=!0;var e=jC();return tK=function(h,l,b){return e(h,l,
"<",b)}}function BW(){if(uK)return vK;uK=!0;var e=Ty(),h=fn();return vK=function(l,b,c){var g=[],a=null,d=null;l=l.sort(function(p,q){return h(p,q,c)});var f=ba(l),k;try{for(f.s();!(k=f.n()).done;){var n=k.value;e(n,b,c)?(d=n,a||(a=n)):(d&&g.push([a,d]),a=d=null)}}catch(p){f.e(p)}finally{f.f()}a&&g.push([a,null]);a=[];for(d=0;d<g.length;d++)n=Nb(g[d],2),k=n[0],n=n[1],k===n?a.push(k):n||k!==l[0]?n?k===l[0]?a.push("<=".concat(n)):a.push("".concat(k," - ").concat(n)):a.push(">=".concat(k)):a.push("*");
g=a.join(" || ");return g.length<("string"===typeof b.raw?b.raw:String(b)).length?g:b}}function CW(){if(wK)return xK;wK=!0;var e=gn(),h=Sy(),l=h.ANY,b=Ty(),c=fn(),g=function(f,k,n){if(f===k)return!0;if(1===f.length&&f[0].semver===l){if(1===k.length&&k[0].semver===l)return!0;f=n.includePrerelease?[new h(">=0.0.0-0")]:[new h(">=0.0.0")]}if(1===k.length&&k[0].semver===l){if(n.includePrerelease)return!0;k=[new h(">=0.0.0")]}var p=new Set,q,r;f=ba(f);var t;try{for(f.s();!(t=f.n()).done;){var w=t.value;
">"===w.operator||">="===w.operator?q=a(q,w,n):"<"===w.operator||"<="===w.operator?r=d(r,w,n):p.add(w.semver)}}catch(qc){f.e(qc)}finally{f.f()}if(1<p.size)return null;if(q&&r){var x=c(q.semver,r.semver,n);if(0<x||0===x&&(">="!==q.operator||"<="!==r.operator))return null}p=ba(p);var B;try{for(p.s();!(B=p.n()).done;){var D=B.value;if(q&&!b(D,String(q),n)||r&&!b(D,String(r),n))return null;var F=ba(k),L;try{for(F.s();!(L=F.n()).done;)if(!b(D,String(L.value),n))return!1}catch(qc){F.e(qc)}finally{F.f()}return!0}}catch(qc){p.e(qc)}finally{p.f()}B=
r&&!n.includePrerelease&&r.semver.prerelease.length?r.semver:!1;D=q&&!n.includePrerelease&&q.semver.prerelease.length?q.semver:!1;B&&1===B.prerelease.length&&"<"===r.operator&&0===B.prerelease[0]&&(B=!1);k=ba(k);var G;try{for(k.s();!(G=k.n()).done;){var oa=G.value;var ha=ha||">"===oa.operator||">="===oa.operator;var Ha=Ha||"<"===oa.operator||"<="===oa.operator;if(q)if(D&&oa.semver.prerelease&&oa.semver.prerelease.length&&oa.semver.major===D.major&&oa.semver.minor===D.minor&&oa.semver.patch===D.patch&&
(D=!1),">"===oa.operator||">="===oa.operator){var Va=a(q,oa,n);if(Va===oa&&Va!==q)return!1}else if(">="===q.operator&&!b(q.semver,String(oa),n))return!1;if(r)if(B&&oa.semver.prerelease&&oa.semver.prerelease.length&&oa.semver.major===B.major&&oa.semver.minor===B.minor&&oa.semver.patch===B.patch&&(B=!1),"<"===oa.operator||"<="===oa.operator){var hc=d(r,oa,n);if(hc===oa&&hc!==r)return!1}else if("<="===r.operator&&!b(r.semver,String(oa),n))return!1;if(!oa.operator&&(r||q)&&0!==x)return!1}}catch(qc){k.e(qc)}finally{k.f()}return q&&
Ha&&!r&&0!==x||r&&ha&&!q&&0!==x||D||B?!1:!0},a=function(f,k,n){if(!f)return k;n=c(f.semver,k.semver,n);return 0<n?f:0>n?k:">"===k.operator&&">="===f.operator?k:f},d=function(f,k,n){if(!f)return k;n=c(f.semver,k.semver,n);return 0>n?f:0<n?k:"<"===k.operator&&"<="===f.operator?k:f};return xK=function(f,k){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(f===k)return!0;f=new e(f,n);k=new e(k,n);var p=!1,q=ba(f.set),r;try{a:for(q.s();!(r=q.n()).done;){var t=r.value,w=ba(k.set),x;try{for(w.s();!(x=
w.n()).done;){var B=g(t,x.value,n);p=p||null!==B;if(B)continue a}}catch(D){w.e(D)}finally{w.f()}if(p)return!1}}catch(D){q.e(D)}finally{q.f()}return!0}}function kC(e){e=Object.assign({plugins:bh.allPlugins,reinitializeIds:!1,skipMigrations:!0},e);if(e.reinitializeIds&&"function"!==typeof e.reinitializeIds)throw Error("serializer option 'reinitializeIds' needs to be a function(id, ref) => id");return e}function Xv(e,h){h=bh.normalizeOptions(h);var l=h.objPool||new bh.ObjectPool(h);h=">="+bh.serializerVersion.replace(bh.majorAndMinorVersionRe,
"");e=l.snapshotObject(e);bh.removeUnreachableObjects([e.id],e.snapshot);bh.clearDanglingConnections(e.snapshot);bh.removeEpiConnections(e.snapshot);e.requiredVersion=h;return e}function Uy(e,h){h=bh.normalizeOptions(h);var l=e.requiredVersion;l&&!bh.semver.satisfies(bh.serializerVersion,l)&&console.warn("[lively.serializer deserialization] snapshot requires version "+"".concat(l," but serializer has incompatible version ")+"".concat(bh.serializerVersion,". Deserialization might fail...!"));return(h.objPool||
new bh.ObjectPool(h)).resolveFromSnapshotAndId(e)}function Vy(e,h,l){function b(){var d=bh.deserialize(e,l);bh.runMigrations(g,"objectConverter",e,c);return d}l=bh.normalizeOptions(l);h.length&&(l.skipMigrations=!1);var c=l.objPool||(l.objPool=new bh.ObjectPool(l));h=bh.normalizeMigrations(h);var g=h.after,a;bh.runMigrations(h.before,"snapshotConverter",e,c);"function"===typeof l.onDeserializationStart&&(a=l.onDeserializationStart(e,l));return a instanceof Promise?a.then(b):b()}function lC(e,h){return bh.deserialize(bh.serialize(e,
h),h)}function DW(e){return"[object Array]"===EW.call(e)}function Cm(e,h,l){(this||mC).type=Number(e);(this||mC).vNode=h;(this||mC).patch=l}function yK(e,h){var l=e.vnode;l||(l=e.vnode=e.render(h));if(!(FW(l)||GW(l)||HW(l)))throw Error("thunk did not return a valid node");return l}function zK(e,h){var l;for(l in e){if(!(l in h)){var b=b||{};b[l]=void 0}var c=e[l],g=h[l];if(c!==g)if(AK(c)&&AK(g))if(BK(g)!==BK(c))b=b||{},b[l]=g;else if(IW(g))b=b||{},b[l]=g;else{if(c=zK(c,g))b=b||{},b[l]=c}else b=b||
{},b[l]=g}for(var a in h)a in e||(b=b||{},b[a]=h[a]);return b}function BK(e){if(Object.getPrototypeOf)return Object.getPrototypeOf(e);if(e.__proto__)return e.__proto__;if(e.constructor)return e.constructor.prototype}function CK(e,h){var l={a:e};DK(e,h,l,0);return l}function DK(e,h,l,b){if(e!==h){var c=l[b],g=!1;if(Wy(e)||Wy(h))nC(e,h,l,b);else if(null==h)Xy(e)||(oC(e,l,b),pC(e,l,b),c=l[b]),c=hn(c,new Bj(Bj.REMOVE,e,h));else if(Jr(h))if(Jr(e))if(e.tagName===h.tagName&&e.namespace===h.namespace&&e.key===
h.key){var a=JW(e.properties,h.properties);a&&(c=hn(c,new Bj(Bj.PROPS,e,a)));a=b;var d=e.children;h=h.children;var f=EK(h),k=f.keys,n=f.free;if(n.length===h.length)h={children:h,moves:null};else{f=EK(d);var p=f.keys;if(f.free.length===d.length)h={children:h,moves:null};else{f=[];for(var q=0,r=n.length,t=0,w=0;w<d.length;w++){var x=d[w];x.key?k.hasOwnProperty(x.key)?(x=k[x.key],f.push(h[x])):(t++,f.push(null)):q<r?(x=n[q++],f.push(h[x])):(t++,f.push(null))}n=q>=n.length?h.length:n[q];for(q=0;q<h.length;q++)r=
h[q],r.key?p.hasOwnProperty(r.key)||f.push(r):q>=n&&f.push(r);p=f.slice();n=0;q=[];r=[];for(x=0;x<h.length;){var B=h[x];for(w=p[n];null===w&&p.length;)q.push(Yy(p,n,null)),w=p[n];w&&w.key===B.key?(n++,x++):B.key?(w&&w.key?k[w.key]!==x+1?(q.push(Yy(p,n,w.key)),(w=p[n])&&w.key===B.key?n++:r.push({key:B.key,to:x})):r.push({key:B.key,to:x}):r.push({key:B.key,to:x}),x++):w&&w.key&&q.push(Yy(p,n,w.key))}for(;n<p.length;)w=p[n],q.push(Yy(p,n,w&&w.key));h=q.length!==t||r.length?{children:f,moves:{removes:q,
inserts:r}}:{children:f,moves:null}}}k=h.children;f=d.length;t=k.length;f=f>t?f:t;for(t=0;t<f;t++)p=d[t],n=k[t],a+=1,p?DK(p,n,l,a):n&&(c=hn(c,new Bj(Bj.INSERT,null,n))),Jr(p)&&p.count&&(a+=p.count);h.moves&&(c=hn(c,new Bj(Bj.ORDER,e,h.moves)))}else c=hn(c,new Bj(Bj.VNODE,e,h)),g=!0;else c=hn(c,new Bj(Bj.VNODE,e,h)),g=!0;else FK(h)?FK(e)?e.text!==h.text&&(c=hn(c,new Bj(Bj.VTEXT,e,h))):(c=hn(c,new Bj(Bj.VTEXT,e,h)),g=!0):Xy(h)&&(Xy(e)||(g=!0),c=hn(c,new Bj(Bj.WIDGET,e,h)));c&&(l[b]=c);g&&(oC(e,l,b),
pC(e,l,b))}}function pC(e,h,l){if(Xy(e))"function"===typeof e.destroy&&(h[l]=hn(h[l],new Bj(Bj.REMOVE,e,null)));else if(Jr(e)&&(e.hasWidgets||e.hasThunks)){e=e.children;for(var b=e.length,c=0;c<b;c++){var g=e[c];l+=1;pC(g,h,l);Jr(g)&&g.count&&(l+=g.count)}}else Wy(e)&&nC(e,null,h,l)}function nC(e,h,l,b){e=KW(e,h);e=CK(e.a,e.b);a:{for(c in e)if("a"!==c){var c=!0;break a}c=!1}c&&(l[b]=new Bj(Bj.THUNK,null,e))}function oC(e,h,l){if(Jr(e)){if(e.hooks){var b=h[l],c=Bj.PROPS,g=e.hooks,a={},d;for(d in g)a[d]=
void 0;h[l]=hn(b,new Bj(c,e,a))}if(e.descendantHooks||e.hasThunks)for(e=e.children,b=e.length,c=0;c<b;c++)g=e[c],l+=1,oC(g,h,l),Jr(g)&&g.count&&(l+=g.count)}else Wy(e)&&nC(e,null,h,l)}function Yy(e,h,l){e.splice(h,1);return{from:h,key:l}}function EK(e){for(var h={},l=[],b=e.length,c=0;c<b;c++){var g=e[c];g.key?h[g.key]=c:l.push(c)}return{keys:h,free:l}}function hn(e,h){return e?(LW(e)?e.push(h):e=[e,h],e):h}function GK(e,h,l,b){if(b)if(b=b[h],HK(b))b.unhook&&b.unhook(e,h,l);else if("attributes"===
h)for(var c in b)e.removeAttribute(c);else if("style"===h)for(var g in b)e.style[g]="";else e[h]="string"===typeof b?"":null}function IK(e){if(Object.getPrototypeOf)return Object.getPrototypeOf(e);if(e.__proto__)return e.__proto__;if(e.constructor)return e.constructor.prototype}function JK(e,h){var l=h?h.document||KK:KK,b=h?h.warn:null;e=MW(e).a;if(NW(e))return e.init();if(OW(e))return l.createTextNode(e.text);if(!PW(e))return b&&b("Item is not a valid virtual dom node",e),null;l=null===e.namespace?
l.createElement(e.tagName):l.createElementNS(e.namespace,e.tagName);QW(l,e.properties);e=e.children;for(b=0;b<e.length;b++){var c=JK(e[b],h);c&&l.appendChild(c)}return l}function LK(e,h,l,b,c){b=b||{};if(e){MK(l,c,c)&&(b[c]=e);var g=h.children;if(g){e=e.childNodes;for(var a=0;a<h.children.length;a++){c+=1;var d=g[a]||RW,f=c+(d.count||0);MK(l,c,f)&&LK(e[a],d,l,b,c);c=f}}}return b}function MK(e,h,l){if(0===e.length)return!1;for(var b=0,c=e.length-1,g,a;b<=c;){g=(c+b)/2>>0;a=e[g];if(b===c)return a>=
h&&a<=l;if(a<h)b=g+1;else if(a>l)c=g-1;else return!0}return!1}function SW(e,h){return e>h?1:-1}function NK(e,h){"function"===typeof h.destroy&&TW(h)&&h.destroy(e)}function OK(e,h,l){l=l||{};l.patch=l.patch&&l.patch!==OK?l.patch:UW;l.render=l.render||VW;return l.patch(e,h,l)}function UW(e,h,l){var b=[];for(c in h)"a"!==c&&b.push(Number(c));if(0===b.length)return e;var c=WW(e,h.a,b);var g=e.ownerDocument;l.document||g===XW||(l.document=g);for(g=0;g<b.length;g++){var a=b[g];var d=c[a],f=h[a],k=l;if(d)if(YW(f))for(var n=
0;n<f.length;n++)a=PK(f[n],d,k),d===e&&(e=a);else a=PK(f,d,k),d===e&&(e=a)}return e}function qC(e,h,l,b,c){(this||Zn).tagName=e;(this||Zn).properties=h||ZW;(this||Zn).children=l||$W;(this||Zn).key=null!=b?String(b):void 0;(this||Zn).namespace="string"===typeof c?c:null;e=l&&l.length||0;b=0;var g=c=!1,a=!1,d;for(k in h)if(h.hasOwnProperty(k)){var f=h[k];aX(f)&&f.unhook&&(d||(d={}),d[k]=f)}for(h=0;h<e;h++){var k=l[h];bX(k)?(b+=k.count||0,!c&&k.hasWidgets&&(c=!0),!g&&k.hasThunks&&(g=!0),a||!k.hooks&&
!k.descendantHooks||(a=!0)):!c&&cX(k)?"function"===typeof k.destroy&&(c=!0):!g&&dX(k)&&(g=!0)}(this||Zn).count=e+b;(this||Zn).hasWidgets=c;(this||Zn).hasThunks=g;(this||Zn).hooks=d;(this||Zn).descendantHooks=a}function rC(e){(this||eX).text=String(e)}function Zy(e){if(!(this instanceof Zy))return new Zy(e);this.value=e}function Yv(e){if(!(this instanceof Yv))return new Yv(e);this.value=e}function QK(e,h,l,b){if("string"===typeof e)h.push(new RK(e));else if("number"===typeof e)h.push(new RK(String(e)));
else if(SK(e))h.push(e);else if(TK(e))for(var c=0;c<e.length;c++)QK(e[c],h,l,b);else if(null!==e&&void 0!==e)throw h={tagName:l,properties:b},l=Error(),l.type="virtual-hyperscript.unexpected.virtual-element",l.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+UK(e)+".\nThe parent vnode is:\n"+UK(h),l.foreignObject=e,l.parentVnode=h,l;}function SK(e){return fX(e)||gX(e)||hX(e)||iX(e)}function UK(e){try{return JSON.stringify(e,null,"    ")}catch(h){return String(e)}}
function sC(e,h){if(3===e.nodeType)return new VK(e.nodeValue);if(1===e.nodeType||9===e.nodeType){var l="http://www.w3.org/1999/xhtml"!==e.namespaceURI?e.namespaceURI:null,b=h&&e.getAttribute(h)?e.getAttribute(h):null,c=e.tagName;var g,a={};if(e.hasAttributes()){if(e.namespaceURI&&"http://www.w3.org/1999/xhtml"!==e.namespaceURI)var d=e.namespaceURI;for(var f=0;f<e.attributes.length;f++){if("style"==e.attributes[f].name){var k=e.style;var n={};for(g=0;g<k.length;++g){var p=k.item(g);n[p]=String(k[p]);
-1<n[p].indexOf("url")&&(n[p]=n[p].replace(/"/g,""))}k="style";p=g=void 0}else d?(g=e.attributes[f],k=g.name,n=g.value,g=jX[g.name]||"",p=void 0):(g=void 0,n=e.attributes[f],k=WK[n.name]?WK[n.name]:n.name,0===k.indexOf("data-")||0===k.indexOf("aria-")?(n=n.value,g=!0):n=n.value,p=g||!1,g=void 0);g?a[k]={namespace:g,value:n}:p?(a.attributes||(a.attributes={}),a.attributes[k]=n):a[k]=n}}d=[];for(f=0;f<e.childNodes.length;f++)d.push(sC(e.childNodes[f],h));return new kX(c,a,d,b,l)}return new VK("")}function $y(e){var h=
{};Uh.addFill(e,h);Uh.addTransform(e,h);Uh.addTransformOrigin(e,h);Uh.addDisplay(e,h);Uh.addExtentStyle(e,h);Uh.addBorder(e,h);Uh.addBorderRadius(e,h);Uh.addShadowStyle(e,h);e.grayscale&&(h.filter="".concat(h.filter||""," grayscale(").concat(100*e.grayscale,"%)"));e.blur&&(h.filter="".concat(h.filter||""," blur(").concat(e.blur,"px)"));null!=e.opacity&&(h.opacity=e.opacity);e.draggable&&!e.isWorld&&(h["touch-action"]="none");return h}function tC(e){return(e.renderOnGPU||e.dropShadow&&!e.dropShadow.fast||
0<e.grayscale)&&!Uh.Path("owner.layout.renderViaCSS").get(e)}function XK(e,h){var l=e.position,b=e.origin,c=e.scale,g=e.rotation,a=e.flipped,d=e.tilted,f=e.perspective,k=e.owner,n=l.x-b.x-(e._skipWrapping&&k?k.borderWidthLeft:0);l=l.y-b.y-(e._skipWrapping&&k?k.borderWidthTop:0);b=Uh.canBePromotedToCompositionLayer(e);n=e.renderOnGPU?n:Math.round(n);l=e.renderOnGPU?l:Math.round(l);b&&(h.willChange="transform");k&&k.isText&&!Uh.Path("layout.renderViaCSS").get(k)||b?h.transform="translate(".concat(n,
"px, ").concat(l,"px)"):(h.transform="",h.top="".concat(l,"px"),h.left="".concat(n,"px"));h.transform+=" rotate(".concat(g.toFixed(2),"rad) scale(").concat(c.toFixed(5),",").concat(c.toFixed(5),")");f&&(h.perspective="".concat(f,"px"));a&&(h.transform+=" rotateY(".concat(180*a,"deg)"));d&&(h.transform+=" rotateX(".concat(180*d,"deg)"))}function uC(e,h){var l=e.width,b=e.height;e.borderWidth;h.width=l||1;h.height=b||1;h.viewBox=[0,0,l||1,b||1].join(" ");return h}function Zv(e){var h="";if(0<e.length){var l=
e[0];var b=l.position;var c=b.y;b=b.x;h+="M ".concat(b," ").concat(c," ")}for(var g=1;g<e.length-1;g++){var a=e[g],d=a.position,f=d.x;d=d.y;var k=a.isSmooth,n=a.controlPoints,p=n.previous;n.next;h=k?h+"C ".concat(b+l.controlPoints.next.x," ").concat(c+l.controlPoints.next.y," ").concat(f+p.x," ").concat(d+p.y," ").concat(f," ").concat(d," "):h+"L ".concat(f," ").concat(d," ");l=a;b=f;c=d}0<e.length&&(a=e[e.length-1].position,g=a.x,a=a.y,e=e[e.length-1],f=e.controlPoints.previous,h=e.isSmooth?h+"C ".concat(b+
l.controlPoints.next.x," ").concat(c+l.controlPoints.next.y," ").concat(g+f.x," ").concat(a+f.y," ").concat(g," ").concat(a):h+"L ".concat(g," ").concat(a));return h}function az(e,h){var l=e.id,b=e.vertices,c=e.fill,g=e.borderColor,a=e.borderWidth;b.length&&(h.d=Uh.getSvgVertices(b));Uh.addSvgBorderStyle(e,h);h["stroke-width"]=a.valueOf();h.fill=c?c.isGradient?"url(#gradient-fill"+l+")":c.toString():"transparent";h.stroke=g.valueOf().isGradient?"url(#gradient-borderColor"+l+")":g.valueOf().toString();
return h}function $v(e){var h=e.reactsToPointer,l=e.nativeCursor,b=e.clipMode,c={};Sf.Path("owner.layout.renderViaCSS").get(e)&&e.owner.layout.addSubmorphCSS(e,c);Sf.Path("layout.renderViaCSS").get(e)&&e.layout.addContainerCSS(e,c);var g=Sf.styleProps(e),a=e._animationQueue.maskedProps("css");"backgroundImage"in a&&delete g.background;"visible"!==b&&(g.overflow=b,g["-webkit-overflow-scrolling"]="touch",g["clip-path"]=e.dropShadow?"none":"border-box",e.isImage&&(g["will-change"]="transform"),g["overflow-anchor"]=
"none");Object.assign(g,a);g.position="absolute";g["pointer-events"]=h?"auto":"none";g.cursor=l;Object.assign(g,c);return g}function YK(e,h){this.morph=e;this.type=h}function aw(e,h){h={animation:new Sf.Animation(e),key:e.id,id:e.id,attributes:{},className:(e.hideScrollbars?e.styleClasses.concat("hiddenScrollbar"):e.styleClasses).join(" "),draggable:!1,"morph-after-render-hook":new Sf.MorphAfterRenderHook(e,h)};h.attributes["touch-action"]=Sf.bowser.ios&&e.draggable&&!e.isWorld?"none":Sf.bowser.ios&&
"visible"!==e.clipMode&&!e.isWorld?"auto":"manipulation";return h}function vC(e){var h=new Sf.SvgAnimation(e,"svg"),l={};Sf.addSvgAttributes(e,l);Object.assign(l,e._animationQueue.maskedProps("svg"));return{animation:h,attributes:l}}function wC(e){var h=new Sf.SvgAnimation(e,"path"),l={mask:0!==e.drawnProportion?"url(#mask"+e.id+")":""};Sf.addPathAttributes(e,l);Object.assign(l,e._animationQueue.maskedProps("path"));return{animation:h,attributes:l}}function xC(e,h,l){var b=l=l.valueOf(),c=b.bounds,
g=b.focus,a=b.vector;b=b.stops;var d=h.x;h=h.y;e={namespace:"http://www.w3.org/2000/svg",attributes:{id:"gradient-"+e,gradientUnits:"userSpaceOnUse",r:"50%"}};a&&(e.attributes.gradientTransform="rotate(".concat(Sf.num.toDegrees(a.extent().theta()),", ").concat(d/2,", ").concat(h/2,")"));if(g&&c){a=c.width;c=c.height;var f=g.x;g=g.y;e.attributes.gradientTransform="matrix(\n".concat(a/d,", 0, 0, ").concat(c/h,",\n").concat(d/2-a/d*(d/2)+f*d-d/2,",\n").concat(h/2-c/h*(h/2)+g*h-h/2,")")}return Sf.h(l.type,
e,b.map(function(k){return Sf.h("stop",{namespace:"http://www.w3.org/2000/svg",attributes:{offset:100*k.offset+"%","stop-opacity":k.color.a,"stop-color":k.color.withA(1).toString()}})}))}function yC(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e.env.renderer;return Sf.createNode(e.render(h),h.domEnvironment)}function zC(e,h){var l=h.renderMap.get(e),b=h.getNodeForMorph(e);if(b&&l){var c=h.render(e),g=Sf.diff(l,c);if(e=h.renderMap.get(e.owner))e=e.children[0].children,l=e.indexOf(l),
e[l]=c,Sf.patch(b,g)}}function AC(e,h){if(e.needsRerender()){var l=!1,b=h.domNode,c=h.renderMap.get(e)||b&&(l=!0)&&Sf.parser(b)||h.render(e),g=h.render(e);l&&(c.key=g.key);l=Sf.diff(c,g);b=b||(h.domNode=Sf.createNode(c,h.domEnvironment));b.parentNode||Sf.initDOMState(h,e);Sf.patch(b,l);h.renderFixedMorphs(g.fixedMorphs,e)}}function bz(e,h,l){return(((1-3*l+3*h)*e+(3*l-6*h))*e+3*h)*e}function lX(e){return e}function bw(e){return Cg.obj.isFunction(e)?e:Cg.Bezier.apply(Cg,hb(eval("([".concat(e.match(/\((.*)\)/)[1],
"])"))))}function cw(e){var h=0,l=0;do h+=e.offsetTop||0,l+=e.offsetLeft||0,e=e.offsetParent;while(e);return{top:h,left:l}}function BC(){BC=Bb(regeneratorRuntime.mark(function h(){return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.t0=Oh.IFramedDomEnvironment,l.next=3,Oh.createIFrame(document.body);case 3:return l.t1=l.sent,l.abrupt("return",new l.t0(l.t1));case 5:case "end":return l.stop()}},h)}));return BC.apply(this,arguments)}function ZK(){return System.get("@system-env").browser?
Oh.createDOMEnvironment_browser():Oh.createDOMEnvironment_node()}function CC(){return Oh._defaultEnv||(Oh._defaultEnv=System.get("@system-env").browser?new Oh.DomEnvironment(window,document,function(){}):Oh.createDOMEnvironment())}function Zo(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"lively-css",h=1<arguments.length?arguments[1]:void 0,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document,b=l.getElementById(e);return b?Oh.setCSSDef(b,h,l):Oh.addCSSDef(e,h,l)}function Ot(e,
h){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document,b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0,c=l.getElementById(e),g=!1;return c?b&&c.getAttribute("href")!==h?(c.setAttribute("href",h),c.onload=function(){return g=!0},Oh.promise.waitFor(3E4,function(){return!!g&&c})):Promise.resolve():(c=document.createElement("link"),c.type="text/css",c.rel="stylesheet",c.setAttribute("id",e),c.setAttribute("href",h),c.onload=function(){return g=!0},(l.head||l).appendChild(c),
Oh.promise.waitFor(3E4,function(){return!!g&&c}))}function dw(e,h){return Array.isArray(e)?e.reduce(function(l,b){return dw(b,l)},h):"string"===typeof e?h.filter(function(l){return l.path()!==e&&l.name()!==e}):e instanceof RegExp?h.filter(function(l){return!e.test(l.path())&&!e.test(l.name())}):"function"===typeof e?h.filter(function(l){return!e(l)}):h}function Kr(e){e=e.split("?");e=Nb(e,2);e[0];var h=e[1];e={};if(!h)return e;if(h=h.split("&"))for(var l=0;l<h.length;l++){var b=h[l].split("="),c=
b[0],g=!0;if(1<b.length)if(g=decodeURIComponent(b.slice(1).join("=")),"undefined"===g)g=void 0;else if(g.match(/^(true|false|null|[0-9"[{].*)$/))try{g=JSON.parse(g)}catch(a){"["===g[0]&&(g=g.slice(1,-1).split(","))}e[c]=g}return e}function cz(e){return Object.keys(e).map(function(h){return"".concat(h,"=").concat(encodeURIComponent(String(e[h])))}).join("&")}function DC(e){var h=e.replace(Ug.pathDoubleSlashRe,"$1/");h=h.replace(Ug.pathDotRe,"/");do e=h,h=e.replace(Ug.pathDoubleDotRe,"");while(h!=e);
return h}function EC(e,h){var l=e.match(Ug.urlRe),b=h.match(Ug.urlRe),c=!0;if(l&&!b||!l&&b)c=!1;if(l&&b){var g=l[1];var a=l[2];var d=b[1];var f=b[2];g!==d?c=!1:a!==f?c=!1:(e=l[3],h=b[3])}if(!c)throw Error("[relativePathBetween] incompatible paths: ".concat(e," vs. ").concat(h));e=Ug.withRelativePartsResolved(e);h=Ug.withRelativePartsResolved(h);if(e==h)return"";l=Ug._relativePathBetween_checkPathes(h,e);if(!l)throw Error("pathname differs in relativePathFrom "+e+" vs "+h);return l}function $K(e,h){return Ug.withRelativePartsResolved(e.replace(Ug.slashEndRe,
"")+"/"+h.replace(Ug.slashStartRe,""))}function aL(e){return e.startsWith("/")?e.replace(Ug.slashEndRe,"").split("/").slice(0,-1).join("/")+"/":""}function bL(e){var h=[];for(e=Ug.parent(e);e&&(h.unshift(e),e=Ug.parent(e),"/"!==e););return h}function Sk(e,h){if(!e)throw Error("lively.resource resource constructor: expects url but got "+e);if(e.isResource)return e;e=String(e);for(var l=0;l<Ug.extensions.length;l++)if(Ug.extensions[l].matches(e))return new Ug.extensions[l].resourceClass(e,h);throw Error("Cannot find resource type for url ".concat(e));
}function $o(e,h,l){return FC.apply(this,arguments)}function FC(){FC=Bb(regeneratorRuntime.mark(function c(h,l,b){var g,a,d;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return g=Sk(h,b).asDirectory(),f.next=3,g.ensureExistance();case 3:f.t0=regeneratorRuntime.keys(l);case 4:if((f.t1=f.t0()).done){f.next=18;break}a=f.t1.value;if(l.hasOwnProperty(a)){f.next=8;break}return f.abrupt("continue",4);case 8:d=g.join(a);if("object"!==Jc(l[a])){f.next=14;break}f.next=12;return $o(d,
l[a],b);case 12:f.next=16;break;case 14:return f.next=16,d.write(l[a]);case 16:f.next=4;break;case 18:return f.abrupt("return",g);case 19:case "end":return f.stop()}},c)}));return FC.apply(this,arguments)}function ap(e){var h=e.name;Ug.extensions=Ug.extensions.filter(function(l){return l.name!==h}).concat(e)}function Pt(e){var h="string"===typeof e?e:e.name;Ug.extensions=Ug.extensions.filter(function(l){return l.name!==h})}function cL(e,h){var l=e.useProxy;l=void 0===l?!0:l;var b=e.useCors;b=void 0===
b?!0:b;var c=e.url,g=e.onLoad,a=e.headers,d=e.onProgress,f=new XMLHttpRequest,k=Gh.promise.deferred();f.open("PUT",c);l&&(Object.assign(a,{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":c}),c=e.proxyDomain||Gh.defaultOrigin());for(var n in a)f.setRequestHeader(n,a[n]);f.upload.addEventListener("progress",d);f.responseType="json";f.onload=function(){g(f.response);k.resolve(f)};b&&(f.withCredentials=!0);f.send(h);return k.promise}function GC(e){return HC.apply(this,arguments)}
function HC(){HC=Bb(regeneratorRuntime.mark(function l(h){var b,c,g,a,d,f,k,n,p,q,r,t,w,x=arguments;return regeneratorRuntime.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return b=1<x.length&&void 0!==x[1]?x[1]:"infinity",c=2<x.length?x[2]:void 0,B.next=4,h.dirList(b,c);case 4:g=B.sent,a={},d=ba(g),B.prev=7,d.s();case 9:if((f=d.n()).done){B.next=26;break}k=f.value;if(!k.isDirectory()){B.next=15;break}B.t0={};B.next=18;break;case 15:return B.next=17,k.read();case 17:B.t0=B.sent;case 18:n=B.t0;
p=k.asFile().relativePathFrom(h).split("/");q=a;r=ba(p.slice(0,-1));try{for(r.s();!(t=r.n()).done;)w=t.value,q[w]||(q[w]={}),q=q[w]}catch(D){r.e(D)}finally{r.f()}q[p[p.length-1]]=n;case 24:B.next=9;break;case 26:B.next=31;break;case 28:B.prev=28,B.t1=B["catch"](7),d.e(B.t1);case 31:return B.prev=31,d.f(),B.finish(31);case 34:return B.abrupt("return",a);case 35:case "end":return B.stop()}},l,null,[[7,28,31,34]])}));return HC.apply(this,arguments)}function dz(e){return IC.apply(this,arguments)}function IC(){IC=
Bb(regeneratorRuntime.mark(function l(h){var b,c,g,a,d;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return b=document.head,c=b.namespaceURI,g=ei.newUUID(),a=document.createElementNS(c,"script"),a.setAttribute("type","module"),b.appendChild(a),a.innerText="import m from '".concat(h,"'; window['").concat(g,"'] = m;"),a.setAttributeNS(null,"async",!0),f.next=13,ei.waitFor(3E4,function(){return window[g]});case 13:return d=f.sent,delete window[g],a.remove(),f.abrupt("return",
d);case 17:case "end":return f.stop()}},l)}));return IC.apply(this,arguments)}function ez(e,h){var l=document.head,b=l.namespaceURI;return new Promise(function(c,g){var a=document.createElementNS(b,"script");a.setAttribute("type","text/ecmascript");l.appendChild(a);a.setAttributeNS(null,"id",e);"http://www.w3.org/2000/svg"===a.namespaceURI?a.setAttributeNS("http://www.w3.org/1999/xlink","href",e):a.setAttribute("src",e);a.onload=c;a.onerror=g;a.setAttributeNS(null,"async",!0)})}function JC(){return KC.apply(this,
arguments)}function KC(){KC=Bb(regeneratorRuntime.mark(function h(){var l,b,c;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!("fetch"in System.global&&"Headers"in System.global)){g.next=2;break}return g.abrupt("return",Promise.resolve());case 2:l=System.decanonicalize("lively.resources");if(!System.get("@system-env").node){g.next=19;break}g.prev=4;b=System._nodeRequire("fetch-ponyfill");g.next=17;break;case 8:return g.prev=8,g.t0=g["catch"](4),g.next=12,System.normalize("fetch-ponyfill",
l);case 12:return c=g.sent.replace("file://",""),g.next=15,pd.import(c);case 15:ei.__inter0__=g.sent,b=ei.__inter0__["default"];case 17:g.next=22;break;case 19:return g.next=21,System["import"]("fetch-ponyfill",l);case 21:b=g.sent;case 22:Object.assign(System.global,b());case 23:case "end":return g.stop()}},h,null,[[4,8]])}));return KC.apply(this,arguments)}function LC(e){return Dg.nameToClassMapping[e]||Object}function Qt(e){return e&&e.split(",").map(function(h){h=h.split(" ").filter(function(l){return""!==
l}).join(" ");h.includes(" ")&&(h.startsWith("'")&&(h=h.slice(1)),h.endsWith("'")&&(h=h.slice(0,-1)),h.startsWith('"')||(h='"'+h),h.endsWith('"')||(h+='"'));return h}).join(",")}function ew(e,h){h||(h="undefined"!==typeof document?document.location.search:"");h=(h=h.trim())&&"?"!==h?Dg.parseQuery(h):{};e.endsWith(".json")?(h.file=e,delete h.name):(delete h.file,h.name=e);return"".concat("/worlds/load","?").concat(Dg.stringifyQuery(h))}function fz(e){Object.assign(Dg.nameToClassMapping,e)}function MC(e){Dg.CachedStyleProperties.forEach(function(h){h=
Nb(h,2);var l=h[0];if(e.endsWith(h[1].moduleId))Dg.CachedStyleProperties["delete"](l)})}function NC(e){if(Dg.CachedStyleProperties.has(e))return Dg.CachedStyleProperties.get(e);var h=Dg.getPropSettings(e),l=h.props,b=[];b.moduleId=h.moduleId;h=function(g){l[g].isStyleProp&&b.push(g);l[g].foldable&&b.push.apply(b,hb(l[g].foldable.map(function(a){return g+Dg.string.capitalize(a)})));"geometry"===l[g].group&&l[g].derived&&b.push(g)};for(var c in l)h(c);Dg.CachedStyleProperties.set(e,b);return b}function OC(e,
h){if(Dg.CachedDefaultValues.has(e))return Dg.CachedDefaultValues.get(e)[h];var l=Dg.getPropSettings(e).props,b={},c;for(c in l)l[c].isStyleProp&&"defaultValue"in l[c]&&(b[c]=l[c].defaultValue);Dg.CachedDefaultValues.set(e,b);return b[h]}function il(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{restore:!1},l=Dg.nameToClassMapping["default"];e.type&&("function"===typeof e.type&&(l=e.type),"object"===Jc(e.type)?l=Dg.locateClass(e.type):
"string"===typeof e.type&&(l=Dg.nameToClassMapping[e.type.toLowerCase()]||l));return h.restore?(new l(Pc({},Symbol["for"]("lively-instance-restorer"),!0))).initFromJSON(e):new l(e)}function gz(e){return("function"===typeof e?e[Symbol["for"]("__LivelyClassName__")]:"string"===typeof e?e.toLowerCase():"")+"_"+Dg.string.newUUID().replace(/-/g,"_")}function PC(){PC=Bb(regeneratorRuntime.mark(function l(h){var b,c;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=
2,pd.import("./ui.cp-6289a670.js").then(function(a){return a.I});case 2:return b=g.sent,c=b.openInWindow,Dg.inspect=c,g.abrupt("return",c({targetObject:h}));case 6:case "end":return g.stop()}},l)}));return PC.apply(this,arguments)}function QC(){QC=Bb(regeneratorRuntime.mark(function b(h,l){var c,g,a,d,f,k=arguments;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:c=2<k.length&&void 0!==k[2]?k[2]:{keyChain:void 0,count:void 0},g=1===l.length?[l]:l.split(/ /g).map(Zg.ensureSpaces),
a=ba(g),n.prev=3,a.s();case 5:if((d=a.n()).done){n.next=11;break}f=d.value;n.next=9;return Zg.simulateKey(h,f,c);case 9:n.next=5;break;case 11:n.next=16;break;case 13:n.prev=13,n.t0=n["catch"](3),a.e(n.t0);case 16:return n.prev=16,a.f(),n.finish(16);case 19:case "end":return n.stop()}},b,null,[[3,13,16,19]])}));return QC.apply(this,arguments)}function RC(e,h){if("string"===typeof e)return e;if(!e||"object"!==Jc(e))return null;switch(h){case "ios":return e.ios||e.mac;case "mac":return e.mac||e.ios;
case "win":case "windows":case "windowsphone":return e.win||e.windows;case "linux":return e.linux||e.win||e.windows;case "chromeos":return e.chromeos||e.linux||e.win||e.windows;case "android":return e.android||e.linux||e.win||e.windows;default:return e.linux||e.win||e.windows}}function dL(e){return e&&e.__ref__}function fw(e,h){return hg.serialize(e,hg.normalizeOptions(h))}function SC(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return hg.deserializeWithMigrations(e,h.migrations||
hg.migrations,hg.normalizeOptions(h))}function TC(e){if(!(1<arguments.length&&void 0!==arguments[1]&&arguments[1]))return hg.deserializeMorph(hg.serializeMorph(e),{migrations:hg.migrations,reinitializeIds:!0});var h=[];e.attributeConnections&&(h=e.attributeConnections.filter(function(b){return b.targetObj.isCommentIndicator}),e.attributeConnections=e.attributeConnections.filter(function(b){return!(b.targetObj.isCommentIndicator||b.targetObj.isHalo)}));var l=hg.serializeMorph(e);e.attributeConnections&&
(e.attributeConnections=e.attributeConnections.concat(h));return hg.deserializeMorph(l,{migrations:hg.migrations,reinitializeIds:!0})}function eL(e){return UC.apply(this,arguments)}function UC(){UC=Bb(regeneratorRuntime.mark(function l(h){var b,c,g,a,d,f,k=arguments;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:b=1<k.length&&void 0!==k[1]?k[1]:{};if(h.isDirectory()){n.next=8;break}n.next=4;return h.read();case 4:return b[h.name()]=n.sent,n.abrupt("return",b);case 8:return c=
b[h.name()]={},n.next=11,h.dirList();case 11:g=n.sent,a=ba(g),n.prev=13,a.s();case 15:if((d=a.n()).done){n.next=21;break}f=d.value;n.next=19;return eL(f,c);case 19:n.next=15;break;case 21:n.next=26;break;case 23:n.prev=23,n.t0=n["catch"](13),a.e(n.t0);case 26:return n.prev=26,a.f(),n.finish(26);case 29:return n.abrupt("return",b);case 30:case "end":return n.stop()}},l,null,[[13,23,26,29]])}));return UC.apply(this,arguments)}function fL(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:
[],l=[];if(e.hasOwnProperty("package.json")){var b=h.slice(1).reduceRight(function(g,a){return g.join(a)},hg.resource(h[0])).url;l.push({files:e,url:b,requiredPackages:e.requiredPackages})}for(var c in e)"object"===Jc(e[c])&&l.push.apply(l,hb(fL(e[c],h.concat(c))));return l}function VC(e){var h=hg.findPackagesInFileSpec(e.packages),l={};e=e.packageDepMap;if(!e)return h;h=ba(h);var b;try{for(h.s();!(b=h.n()).done;){var c=b.value;l[c.url]=c}}catch(g){h.e(g)}finally{h.f()}return hg.graph.sortByReference(e).flat().map(function(g){return l[g]})}
function gL(e,h){return WC.apply(this,arguments)}function WC(){WC=Bb(regeneratorRuntime.mark(function b(h,l){var c,g,a,d,f,k,n,p,q,r,t,w,x,B,D,F,L;return regeneratorRuntime.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(c=l.moduleManager){G.next=3;break}throw Error("You need to provide a module manager in order to load packages and modules.");case 3:if(!h.packagesToRegister){G.next=27;break}g=ba(h.packagesToRegister);G.prev=5;g.s();case 7:if((a=g.n()).done){G.next=19;break}d=a.value;G.prev=
9;G.next=12;return c.registerPackage(d);case 12:G.next=17;break;case 14:G.prev=14,G.t0=G["catch"](9),console.error("Failed to register package ".concat(d));case 17:G.next=7;break;case 19:G.next=24;break;case 21:G.prev=21,G.t1=G["catch"](5),g.e(G.t1);case 24:return G.prev=24,g.f(),G.finish(24);case 27:if(!h.packages){G.next=71;break}f=hg.packagesOfSnapshot(h);k=ba(f);G.prev=30;k.s();case 32:if((n=k.n()).done){G.next=63;break}p=n.value;q=p.files;r=p.url;w=(t=c.lookupPackage(r))&&t.pkg;if(!w){G.next=
48;break}x=w.version;B=JSON.parse(q["package.json"]);D=B.version;G.prev=39;if(!(D&&x&&c.semver.lte(D,x,!0))){G.next=43;break}console.log("[load morph] Package ".concat(r," is loaded in version ").concat(x)+" which is newer than ".concat(D,". Will NOT load older variant."));return G.abrupt("continue",61);case 43:G.next=48;break;case 45:G.prev=45,G.t2=G["catch"](39),console.warn("Error in package version comparison: ",G.t2);case 48:return G.next=50,hg.createFiles(r,q);case 50:return G.next=52,c.ensurePackage(r);
case 52:return w=G.sent,G.next=55,w.reload({forgetEnv:!1,forgetDeps:!1});case 55:return G.next=57,pd.import("./object-classes-c0823978.js");case 57:F=G.sent,L=F["default"],hg.objectScriptingEnabled=!!L,hg.objectScriptingEnabled&&L.withId(w.name);case 61:G.next=32;break;case 63:G.next=68;break;case 65:G.prev=65,G.t3=G["catch"](30),k.e(G.t3);case 68:return G.prev=68,k.f(),G.finish(68);case 71:return G.next=73,Promise.all(hg.requiredModulesOfSnapshot(h).map(function(oa){return(System.get(oa)?null:System["import"](oa))["catch"](function(ha){return console.error("Error loading ".concat(oa),
ha)})}));case 73:case "end":return G.stop()}},b,null,[[5,21,24,27],[9,14],[30,65,68,71],[39,45]])}));return WC.apply(this,arguments)}function Lr(e,h){return hg.deserializeMorph(e,Object.assign({reinitializeIds:!0,ignoreClassNotFound:!1,onDeserializationStart:hg.loadPackagesAndModulesOfSnapshot,migrations:hg.migrations},h))}function hL(e){return XC.apply(this,arguments)}function XC(){XC=Bb(regeneratorRuntime.mark(function l(h){return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.t0=
hg,b.next=3,h.readJson();case 3:return b.t1=b.sent,b.abrupt("return",b.t0.loadMorphFromSnapshot.call(b.t0,b.t1));case 5:case "end":return b.stop()}},l)}));return XC.apply(this,arguments)}function iL(e,h){return YC.apply(this,arguments)}function YC(){YC=Bb(regeneratorRuntime.mark(function b(h,l){var c,g,a,d,f,k,n,p,q,r,t,w,x,B,D,F,L,G,oa,ha,Ha,Va,hc,qc,jc;return regeneratorRuntime.wrap(function(Ya){for(;;)switch(Ya.prev=Ya.next){case 0:c={},g=h.snapshot,a=[],d={},f=!0,k={},Ya.t0=regeneratorRuntime.keys(g);
case 7:if((Ya.t1=Ya.t0()).done){Ya.next=18;break}n=Ya.t1.value;p=g[n]["lively.serializer-class-info"];if(!(p&&p.module&&p.module["package"])){Ya.next=14;break}q=l.getPackage(p.module["package"].name);if(!q.address.startsWith("local://")){Ya.next=14;break}return Ya.delegateYield(regeneratorRuntime.mark(function tc(){var Qb,wc,Zb,$c,Oa,md,la,$a;return regeneratorRuntime.wrap(function(dd){for(;;)switch(dd.prev=dd.next){case 0:return dd.next=2,pd.import("./object-classes-c0823978.js");case 2:return Qb=
dd.sent,wc=Qb["default"],dd.next=6,Promise.resolve().then(function(){return mX});case 6:return Zb=dd.sent,$c=Zb.withSuperclasses,hg.objectScriptingEnabled=!!wc,Oa=wc.forSystemPackage(q),dd.next=12,Oa.ensureSubModule(p.module.pathInPackage);case 12:md=dd.sent,la=md.systemModule._recorder[p.className],$a=$c(la),$a.forEach(function(Kd){(Kd=wc.lookupPackageForClass(Kd))&&a.push(Kd.systemPackage)});case 16:case "end":return dd.stop()}},tc)})(),"t2",14);case 14:if(r=g[n].props.metadata)if(t=void 0,r.value&&
r.value.__ref__?(w=g[r.value.id],w.props.externalPackages&&(t=w.props.externalPackages.value)):t=r.externalPackages,t)for(f=!0,x=0;x<t.length;x++)d[t[x]]=!0;Ya.next=7;break;case 18:f&&(h.packagesToRegister=Object.keys(d)),B=[],D=0,F=a;case 21:if(!(D<F.length)){Ya.next=67;break}L=F[D];G=ba(L.modules());Ya.prev=24;G.s();case 26:if((oa=G.n()).done){Ya.next=56;break}ha=oa.value;if(!ha.id.endsWith(".json")){Ya.next=30;break}return Ya.abrupt("continue",54);case 30:return Ya.t3=ba,Ya.next=33,ha.imports();
case 33:Ya.t4=Ya.sent,Ha=(0,Ya.t3)(Ya.t4),Ya.prev=35,Ha.s();case 37:if((Va=Ha.n()).done){Ya.next=46;break}hc=Va.value.fromModule;if(qc=l.module(hc)["package"]()){Ya.next=42;break}return Ya.abrupt("continue",44);case 42:jc=qc.config,jc.lively&&jc.lively.isObjectPackage&&(B.push(qc),k[L.url]?hg.arr.pushIfNotIncluded(k[L.url],qc.url):k[L.url]=[qc.url]);case 44:Ya.next=37;break;case 46:Ya.next=51;break;case 48:Ya.prev=48,Ya.t5=Ya["catch"](35),Ha.e(Ya.t5);case 51:return Ya.prev=51,Ha.f(),Ya.finish(51);
case 54:Ya.next=26;break;case 56:Ya.next=61;break;case 58:Ya.prev=58,Ya.t6=Ya["catch"](24),G.e(Ya.t6);case 61:return Ya.prev=61,G.f(),Ya.finish(61);case 64:D++;Ya.next=21;break;case 67:return a=[].concat(B,hb(a)),Ya.next=70,Promise.all(a.map(function(){var tc=Bb(regeneratorRuntime.mark(function Zb(wc){var $c,Oa;return regeneratorRuntime.wrap(function(md){for(;;)switch(md.prev=md.next){case 0:return $c=hg.resource(wc.address).asDirectory(),md.next=3,hg.resourceToJSON($c);case 3:Oa=md.sent,c[$c.parent().url]||
(c[$c.parent().url]={}),Object.assign(c[$c.parent().url],Oa),k[wc.url]||(k[wc.url]=[]);case 7:case "end":return md.stop()}},Zb)}));return function(wc){return tc.apply(this,arguments)}}()));case 70:return Ya.abrupt("return",{packages:c,depMap:k});case 71:case "end":return Ya.stop()}},b,null,[[24,58,61,64],[35,48,51,54]])}));return YC.apply(this,arguments)}function Rt(e){return ZC.apply(this,arguments)}function ZC(){ZC=Bb(regeneratorRuntime.mark(function l(h){var b,c,g,a,d,f,k,n,p,q,r,t,w,x,B,D,F,L,
G,oa,ha,Ha,Va,hc,qc,jc,Ya,xa,tc,Qb=arguments;return regeneratorRuntime.wrap(function(wc){for(;;)switch(wc.prev=wc.next){case 0:b=1<Qb.length&&void 0!==Qb[1]?Qb[1]:{};c=b.addPreview;g=void 0===c?!1:c;a=b.previewWidth;d=void 0===a?100:a;f=b.previewHeight;k=void 0===f?100:f;n=b.previewType;p=void 0===n?"png":n;q=b.testLoad;r=void 0===q?!0:q;t=b.addPackages;w=void 0===t?!0:t;x=b.ignoreMorphs;B=void 0===x?[]:x;D=b.frozenSnapshot;F=void 0===D?!1:D;L=b.moduleManager;G=hg.serializeMorph(h,{frozenSnapshot:F});
if(!w){wc.next=13;break}wc.next=6;return hg.findRequiredPackagesOfSnapshot(G,L);case 6:oa=wc.sent,ha=oa.packages,Ha=oa.depMap,G.packages=ha,Va=[],Object.values(ha["local://lively-object-modules/"]||{}).forEach(function(Zb){Object.entries(Zb).forEach(function($c){var Oa=Nb($c,2);$c=Oa[0];Oa=Oa[1];if(!$c.endsWith(".json")){var md=hg.ast.parse(Oa),la=[],$a=hg.Path("metadata.commit.name").get($world);hg.ast.AllNodesVisitor.run(md,function(dd,Kd){"Literal"===dd.type&&"string"===typeof dd.value&&(dd.value.match(/^styleguide:\/\/\$world\/.+/)&&
!Va.includes(dd.value.replace("styleguide://$world/",""))&&la.push({target:dd,replacementFunc:function(){return JSON.stringify(dd.value.replace("$world",$a))}}),dd.value.match(/^part:\/\/\$world\/.+/)&&!Va.includes(dd.value.replace("part://$world/",""))&&la.push({target:dd,replacementFunc:function(){return JSON.stringify(dd.value.replace("$world",$a))}}))});Zb[$c]=hg.ast.transform.replaceNodes(la,Oa).source}})}),G.packageDepMap=Ha;case 13:if(!g){wc.next=33;break}wc.next=16;return pd.import("./morph-to-image-ab078be2.js");
case 16:return hc=wc.sent,qc=hc.renderMorphToDataURI,jc=d||h.width,Ya=k||h.height,xa=p||"png",wc.prev=21,wc.next=24,qc(h,{width:jc,height:Ya,type:xa,ignoreMorphs:[]});case 24:G.preview=wc.sent;wc.next=33;break;case 27:return wc.prev=27,wc.t0=wc["catch"](21),console.error("Error generating morph preview: ".concat(wc.t0)),wc.next=32,qc(hg.morph({fill:h.fill,width:jc,height:Ya}),{width:jc,height:Ya,type:xa,ignoreMorphs:B});case 32:G.preview=wc.sent;case 33:G.preview||(G.preview="");if(!r){wc.next=46;
break}wc.prev=35;wc.next=38;return hg.loadMorphFromSnapshot(G,{highlightBuggyMorphs:!0,rootObject:h,moduleManager:L});case 38:if((tc=wc.sent)&&tc.isMorph){wc.next=41;break}throw Error("reloading snapshot does not create a morph!");case 41:wc.next=46;break;case 43:throw wc.prev=43,wc.t1=wc["catch"](35),Error("Error snapshotting morph: Cannot recreate morph from snapshot!\n"+wc.t1.stack);case 46:return wc.abrupt("return",G);case 47:case "end":return wc.stop()}},l,null,[[21,27],[35,43]])}));return ZC.apply(this,
arguments)}function jL(){return $C.apply(this,arguments)}function $C(){$C=Bb(regeneratorRuntime.mark(function h(){var l,b,c,g,a,d,f,k,n,p,q,r,t,w,x,B,D=arguments;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:l=0<D.length&&void 0!==D[0]?D[0]:hg.MorphicEnv["default"]().world;b=1<D.length?D[1]:void 0;g=(c=2<D.length?D[2]:void 0)||{};a=g.showIndicator;d=void 0===a?!0:a;f=g.changeName;k=void 0===f?!0:f;n=g.changeBrowserURL;p=void 0===n?!0:n;b||(q=hg.resource(document.location.href),
r=q.name(),b=q.join("../"+r.replace(/\.[^\.]+/,"-world.json")).withRelativePartsResolved());"string"===typeof b&&(b=hg.resource(b));k&&(l.name=b.nameWithoutExt());p&&(t=encodeURI(c.pathForBrowserHistory||hg.pathForBrowserHistory(b.path())),window.location.pathname!==t&&window.history.pushState({},"lively.next",t));if(!d){F.next=17;break}F.next=11;return pd.import("./loading-indicator.cp-b18e3b89.js").then(function(L){return L.L});case 11:return x=F.sent,w=x.open("string"===typeof d?d:"Snapshotting..."),
F.next=15,w.whenRendered();case 15:return F.next=17,hg.promise.delay(100);case 17:return F.prev=17,F.next=20,hg.createMorphSnapshot(l,c);case 20:return B=F.sent,w.label="Uploading...",F.next=24,w.whenRendered();case 24:return F.abrupt("return",b.writeJson(B));case 25:return F.prev=25,w&&w.remove(),F.finish(25);case 28:case "end":return F.stop()}},h,null,[[17,,25,28]])}));return $C.apply(this,arguments)}function kL(e,h,l){var b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1,c=4<arguments.length&&
void 0!==arguments[4]?arguments[4]:function(q,r){return r.remove()},g=5<arguments.length&&void 0!==arguments[5]?arguments[5]:function(q,r,t){return q.addMorph(r,t).__wasAddedToDerived__=!0};l(e,h);var a=ig.arr.partition(hb(h.submorphs||[]),function(q){return!!q.COMMAND}),d=Nb(a,2);a=d[0];d=d[1];h=d.shift();var f=ba(e.submorphs||[]),k;try{for(f.s();!(k=f.n()).done;){var n=k.value;if(!h)break;n.name===h.name&&(kL(n,h,l,b,c,g),h=d.shift())}}catch(q){f.e(q)}finally{f.f()}if(b){b=ba(a);var p;try{for(k=
function(){var q=p.value;if("remove"===q.COMMAND&&e.submorphs){var r=e.submorphs.find(function(t){return t.name===q.target});r&&c(e,r)}"add"===q.COMMAND&&(e.submorphs||(e.submorphs=[]),r=q.before&&e.submorphs.find(function(t){return t.name===q.before}),g(e,q.props,r))},b.s();!(p=b.n()).done;)k()}catch(q){b.e(q)}finally{b.f()}}}function nX(e,h){var l={};h.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(b,c,g){c&&(l[c]=g)});return l}function gk(e){if(e){for(var h in gk.prototype)e[h]=gk.prototype[h];return e}}
function aD(e){var h="";do h=lL[e%64]+h,e=Math.floor(e/64);while(0<e);return h}function bD(){var e=aD(+new Date);return e!==mL?(nL=0,mL=e):e+"."+aD(nL++)}function oL(e){e=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!e||oX))return new XMLHttpRequest}catch(h){}if(!e)try{return new ($p[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(h){}}function pL(e,...h){return h.reduce((l,b)=>{e.hasOwnProperty(b)&&(l[b]=e[b]);return l},{})}function hz(e,h){h.useNativeTimers?(e.setTimeoutFn=
pX.bind($p),e.clearTimeoutFn=qX.bind($p)):(e.setTimeoutFn=setTimeout.bind($p),e.clearTimeoutFn=clearTimeout.bind($p))}function rX(){}function qL(){for(let e in bp.requests)bp.requests.hasOwnProperty(e)&&bp.requests[e].abort()}function cD(e){var h;if(h=sX)(h=e instanceof ArrayBuffer)||(h="function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer);return h||tX&&e instanceof Blob||uX&&e instanceof File}function iz(e,h){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let l=
0,b=e.length;l<b;l++)if(iz(e[l]))return!0;return!1}if(cD(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return iz(e.toJSON(),!0);for(const l in e)if(Object.prototype.hasOwnProperty.call(e,l)&&iz(e[l]))return!0;return!1}function dD(e,h){if(!e)return e;if(cD(e)){var l={_placeholder:!0,num:h.length};h.push(e);return l}if(Array.isArray(e)){l=Array(e.length);for(var b=0;b<e.length;b++)l[b]=dD(e[b],h);return l}if("object"===typeof e&&!(e instanceof Date)){l={};for(b in e)Object.prototype.hasOwnProperty.call(e,
b)&&(l[b]=dD(e[b],h));return l}return e}function eD(e,h){if(!e)return e;if(e&&e._placeholder)return h[e.num];if(Array.isArray(e))for(var l=0;l<e.length;l++)e[l]=eD(e[l],h);else if("object"===typeof e)for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&(e[l]=eD(e[l],h));return e}function St(e){e=e||{};(this||tl).ms=e.min||100;(this||tl).max=e.max||1E4;(this||tl).factor=e.factor||2;(this||tl).jitter=0<e.jitter&&1>=e.jitter?e.jitter:0;(this||tl).attempts=0}function vX(e,h="",l){let b=e;l=l||"undefined"!==
typeof location&&location;null==e&&(e=l.protocol+"//"+l.host);"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?l.protocol+e:l.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof l?l.protocol+"//"+e:"https://"+e),b=fD(e));b.port||(/^(http|ws)$/.test(b.protocol)?b.port="80":/^(http|ws)s$/.test(b.protocol)&&(b.port="443"));b.path=b.path||"/";e=-1!==b.host.indexOf(":")?"["+b.host+"]":b.host;b.id=b.protocol+"://"+e+":"+b.port+h;b.href=b.protocol+"://"+e+(l&&l.port===b.port?"":":"+
b.port);return b}function jn(e,h,l){e.on(h,l);return function(){e.off(h,l)}}function jz(e,h){"object"===typeof e&&(h=e,e=void 0);h=h||{};e=vX(e,h.path||"/socket.io");var l=e.source;const b=e.id;var c=e.path;c=gw[b]&&c in gw[b].nsps;h.forceNew||h["force new connection"]||!1===h.multiplex||c?l=new gD(l,h):(gw[b]||(gw[b]=new gD(l,h)),l=gw[b]);e.query&&!h.query&&(h.query=e.queryKey);return l.socket(e.path,h)}function Tt(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=h.l2lClient;
if(!l)throw Error("lively.shell client side runCommand needs opts.l2lClient!");$g.ClientCommand.installLively2LivelyServices(l);l=new $g.ClientCommand(l);l.spawn(Object.assign({command:e},$g.obj.dissoc(h,["l2lClient"])));return l}function kz(e){return $g.dirCache[e.trackerId]?$g.dirCache[e.trackerId]:e.whenRegistered().then(Bb(regeneratorRuntime.mark(function l(){var b,c;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,e.sendToAndWait(e.trackerId,"lively.shell.info",
{});case 2:return b=g.sent,c=b.data.defaultDirectory,g.abrupt("return",$g.dirCache[e.trackerId]=c);case 5:case "end":return g.stop()}},l)})))}function lz(e){return hD.apply(this,arguments)}function hD(){hD=Bb(regeneratorRuntime.mark(function l(h){var b,c;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,h.sendToAndWait(h.trackerId,"lively.shell.env",{});case 2:return b=g.sent,c=b.data.env,g.abrupt("return",c);case 5:case "end":return g.stop()}},l)}));return hD.apply(this,
arguments)}function iD(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};h=h||{};var l=$g.runCommand('cat "'.concat(e,'"'),h);return l.whenDone().then(function(){if(l.exitCode)throw Error("Read ".concat(e," failed: ").concat(l.stderr));return l.output})}function jD(e,h,l){!l&&h&&h.content&&(l=h,h=l.content);h=h||"";var b=$g.runCommand('tee "'.concat(e,'"'),Object.assign({stdin:h},l));return b.whenDone().then(function(){if(b.exitCode)throw Error("Write ".concat(e," failed: ").concat(b.stderr));
return b})}function mz(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Gi._runCommand(e,Object.assign({l2lClient:Gi.L2LClient.ensure(Gi.defaultConnection)},h))}function hw(){return kD.apply(this,arguments)}function kD(){kD=Bb(regeneratorRuntime.mark(function h(){return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Gi._defaultDirectory(Gi.L2LClient.ensure(Gi.defaultConnection));case 2:return l.abrupt("return",l.sent);case 3:case "end":return l.stop()}},
h)}));return kD.apply(this,arguments)}function lD(){return Gi._env(Gi.L2LClient.ensure(Gi.defaultConnection))}function mD(e){function h(){0<b.length&&l.push(b);b=""}for(var l=[],b="",c="normal",g=0,a;a=e[g];g++)if("normal"===c&&/\s/.test(a))h();else{if('"'===a||"'"===a){if("normal"===c){c=a;continue}if(c===a){c="normal";continue}}"\\"===a&&c===e[g+1]&&(g++,a=e[g]);b+=a}h();return l}function nD(e,h){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},b=l.exclusions,c=l.fileTypes;c=void 0===
c?[]:c;var g=l.sizeLimit,a=void 0===g?"+1M":g;g=l.charsBefore;g=void 0===g?80:g;l=l.charsAfter;l=void 0===l?80:l;b||(b=Gi.defaultGrepExclusions);b=(b=[b.length?"-iname "+b.map(JSON.stringify).join(" -o -iname "):"",a?"-size "+a:""].filter(Boolean).join(" -o "))?"\\( ".concat(b," \\) -prune -o"):"";c=(c=c.length?"-iname "+c.map(JSON.stringify).join(" -o -iname "):"")?"-a \\( ".concat(c," \\)"):"";a='find %s %s -type f %s -a -print0 | xargs -0 grep -IinH -o ".\\{0,%s\\}%s.\\{0,%s\\}" '.replace(/([\(\);])/g,
"\\$1");b=Gi.string.format(a,h,b,c,g,e,l);var d=Gi.runCommand(b);d.whenDone().then(function(f){var k=f.exitCode,n=f.stdout;f.stderr;k&&1!==k||(d.results=n.split("\n").map(function(p){p=p.match(/(.*):([0-9]+):(.*)/);if(!p)return null;p=Nb(p,4);p[0];return{filename:p[1],lineno:Number(p[2])-1,match:p[3]}}).filter(Boolean))});return d}function rL(e,h){return ri.string.lines(e).map(function(l){return l.trim().length?(new ri.FileInfo(h)).readFromDirectoryListLine(l):null}).filter(Boolean)}function oD(e,
h){return pD.apply(this,arguments)}function pD(){pD=Bb(regeneratorRuntime.mark(function b(h,l){var c,g,a,d,f,k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return c=ri.fileInfoCommandString(h,l),g=ri.runCommand(c,l),n.next=4,g.whenDone();case 4:a=0!==g.exitCode?g.output:null;if(!a){n.next=7;break}throw a;case 7:return d=ri.parseDirectoryListFromLs(g.stdout,l.rootDirectory||"."),f=Nb(d,1),k=f[0],n.abrupt("return",k);case 9:case "end":return n.stop()}},b)}));return pD.apply(this,
arguments)}function qD(e,h){return rD.apply(this,arguments)}function rD(){rD=Bb(regeneratorRuntime.mark(function b(h,l){var c,g,a,d,f,k,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return c=Object.assign({findFilesGroup:"default-find-files-process"},l),g=c.findFilesGroup,a=c.rootDirectory,d=ri.findFilesProcesses[g]||(ri.findFilesProcesses[g]={promiseState:null,commands:[]}),f=d.commands,k=d.promiseState,k||(d.promiseState=k=ri.promise.deferred()),n=ri.findFilesCommandString(h,
l),f.forEach(function(r){return r.kill()}),p=ri.runCommand(n,l),f.push(p),p.whenDone().then(function(){ri.arr.remove(f,p);if(f.some(function(t){return t.startTime>p.startTime}))console.log("[findFiles] command ".concat(p," exited but a newer findFiles command was started for group ").concat(g,", discarding output"));else{var r=0!==p.exitCode?p.output:null;r&&console.warn(r);r=r?[]:ri.parseDirectoryListFromLs(p.stdout,a)||[];k.resolve(r);Object.assign(d,{promiseState:null,commands:[]})}})["catch"](function(r){return console.error(r)}),
q.abrupt("return",k.promise);case 10:case "end":return q.stop()}},b)}));return rD.apply(this,arguments)}function sL(e){function h(l){return Array.prototype.concat.apply([l],l.children?l.children.map(h):[])}return h(e).map(function(l){var b=l.fullPath.replace(/^\//,"");return{fileName:b,path:b,rootDirectory:"./",isDirectory:l.isDirectory,isLink:void 0,lastModified:void 0,linkCount:void 0,mode:void 0,size:void 0,group:void 0,user:void 0}})}function nz(){sD=!0;for(var e,h,l=iw.length;l;){h=iw;iw=[];
for(e=-1;++e<l;)h[e]();l=iw.length}sD=!1}function Ut(e,h,l){var b=l[l.length-1];e===b.element&&(l.pop(),b=l[l.length-1]);l=b.element;b=b.index;Array.isArray(l)?l.push(e):b===h.length-2?(h=h.pop(),l[h]=e):h.push(e)}function Wi(){Wi.init.call(this)}function oz(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+Jc(e));}function tL(e,h,l,b){var c,g,a;if(oz(l),void 0===(g=e._events)?(g=e._events=Object.create(null),e._eventsCount=0):(void 0!==
g.newListener&&(e.emit("newListener",h,l.listener?l.listener:l),g=e._events),a=g[h]),void 0===a)g[h]=l,++e._eventsCount;else if("function"==typeof a?a=g[h]=b?[l,a]:[a,l]:b?a.unshift(l):a.push(l),0<(c=void 0===e._maxListeners?Wi.defaultMaxListeners:e._maxListeners)&&a.length>c&&!a.warned)a.warned=!0,l=Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(h)+" listeners added. Use emitter.setMaxListeners() to increase limit"),l.name="MaxListenersExceededWarning",l.emitter=e,l.type=
h,l.count=a.length,console&&console.warn&&console.warn(l);return e}function wX(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function uL(e,h,l){e={fired:!1,wrapFn:void 0,target:e,type:h,listener:l};h=wX.bind(e);return h.listener=l,e.wrapFn=h,h}function vL(e,h,l){e=e._events;if(void 0===e)return[];h=e[h];if(void 0===h)l=[];else if("function"==typeof h)l=l?[h.listener||
h]:[h];else if(l)for(l=Array(h.length),e=0;e<l.length;++e)l[e]=h[e].listener||h[e];else l=wL(h,h.length);return l}function xL(e){var h=this._events;if(void 0!==h){e=h[e];if("function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function wL(e,h){for(var l=Array(h),b=0;b<h;++b)l[b]=e[b];return l}function Vt(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}function aq(){this._store={}}function jw(e){this._store=new aq;if(e&&Array.isArray(e))for(var h=0,l=e.length;h<l;h++)this.add(e[h])}
function tk(e){var h;if(!e||"object"!==typeof e)return e;if(Array.isArray(e)){var l=[];var b=0;for(h=e.length;b<h;b++)l[b]=tk(e[b]);return l}if(e instanceof Date)return e.toISOString();if("undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!==typeof Blob&&e instanceof Blob)return e instanceof ArrayBuffer?"function"===typeof e.slice?e=e.slice(0):(b=new ArrayBuffer(e.byteLength),l=new Uint8Array(b),e=new Uint8Array(e),l.set(e),e=b):(b=e.size,l=e.type,e="function"===typeof e.slice?
e.slice(0,b,l):e.webkitSlice(0,b,l)),e;l=Object.getPrototypeOf(e);null===l?l=!0:(l=l.constructor,l="function"==typeof l&&l instanceof l&&yL.call(l)==xX);if(!l)return e;l={};for(b in e)Object.prototype.hasOwnProperty.call(e,b)&&(h=tk(e[b]),"undefined"!==typeof h&&(l[b]=h));return l}function zL(e){var h=!1;return Wt(function(l){if(h)throw Error("once called more than once");h=!0;e.apply(this,l)})}function AL(e){return Wt(function(h){h=tk(h);var l=this,b="function"===typeof h[h.length-1]?h.pop():!1,
c=new Promise(function(g,a){var d;try{var f=zL(function(k,n){k?a(k):g(n)});h.push(f);(d=e.apply(l,h))&&"function"===typeof d.then&&g(d)}catch(k){a(k)}});b&&c.then(function(g){b(null,g)},b);return c})}function yX(e,h,l){if(e.constructor.listeners("debug").length){for(var b=["api",e.name,h],c=0;c<l.length-1;c++)b.push(l[c]);e.constructor.emit("debug",b);var g=l[l.length-1];l[l.length-1]=function(a,d){var f=["api",e.name,h];f=f.concat(a?["error",a]:["success",d]);e.constructor.emit("debug",f);g(a,d)}}}
function hk(e,h){return AL(Wt(function(l){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));var b=this;yX(b,e,l);return this.taskqueue.isReady?h.apply(this,l):new Promise(function(c,g){b.taskqueue.addTask(function(a){a?g(a):c(b[e].apply(b,l))})})}))}function kw(e,h){for(var l={},b=0,c=h.length;b<c;b++){var g=h[b];g in e&&(l[g]=e[g])}return l}function BL(e){return e}function zX(e){return[{ok:e}]}function CL(e,
h,l){function b(){var r=[];n.forEach(function(t){t.docs.forEach(function(w){r.push({id:t.id,docs:[w]})})});l(null,{results:r})}function c(){if(!(q>=p.length)){var r=p.slice(q,Math.min(q+6,p.length));g(r,q);q+=r.length}}function g(r,t){r.forEach(function(w,x){var B=t+x;x=d.get(w);var D=kw(x[0],["atts_since","attachments"]);D.open_revs=x.map(function(L){return L.rev});D.open_revs=D.open_revs.filter(BL);var F=BL;0===D.open_revs.length&&(delete D.open_revs,F=zX);["revs","attachments","binary","ajax",
"latest"].forEach(function(L){L in h&&(D[L]=h[L])});e.get(w,D,function(L,G){L=L?[{error:L}]:F(G);n[B]={id:w,docs:L};++k===f&&b();c()})})}var a=h.docs,d=new Wl;a.forEach(function(r){d.has(r.id)?d.get(r.id).push(r):d.set(r.id,[r])});var f=d.size,k=0,n=Array(f),p=[];d.forEach(function(r,t){p.push(t)});var q=0;c()}function AX(e){lw&&addEventListener("storage",function(h){e.emit(h.key)})}function Xt(){Hl.EventEmitter.call(this);this._listeners={};AX(this)}function Dm(e){if("undefined"!==typeof console&&
"function"===typeof console[e]){var h=Array.prototype.slice.call(arguments,1);console[e].apply(console,h)}}function BX(e){var h=0;e||(h=2E3);e=parseInt(e,10)||0;h=parseInt(h,10);h=h!==h||h<=e?(e||1)<<1:h+1;6E5<h&&(e=3E5,h=6E5);return~~((h-e)*Math.random()+e)}function tD(e,h){Dm("info","The above "+e+" is totally normal. "+h)}function gj(e,h,l){Error.call(this,l);this.status=e;this.name=h;this.message=l;this.error=!0}function fi(e,h){function l(b){for(var c in e)"function"!==typeof e[c]&&(this[c]=
e[c]);void 0!==b&&(this.reason=b)}l.prototype=gj.prototype;return new l(h)}function Yt(e){if("object"!==typeof e){var h=e;e=DL;e.data=h}"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409);"name"in e||(e.name=e.error||"unknown");"status"in e||(e.status=500);"message"in e||(e.message=e.message||e.reason);return e}function uD(e){var h={},l=e.filter&&"function"===typeof e.filter;h.query=e.query_params;return function(b){b.doc||(b.doc={});var c;if(c=l)try{c=!(0,e.filter)(b.doc,h)}catch(a){c=
fi(pz,"Filter function threw: "+a.toString())}if("object"===typeof c)return c;if(c)return!1;if(!e.include_docs)delete b.doc;else if(!e.attachments)for(var g in b.doc._attachments)b.doc._attachments.hasOwnProperty(g)&&(b.doc._attachments[g].stub=!0);return!0}}function qz(e){for(var h=[],l=0,b=e.length;l<b;l++)h=h.concat(e[l]);return h}function EL(e){var h;e?"string"!==typeof e?h=fi(FL):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(h=fi(CX)):h=fi(DX);if(h)throw h;}function $n(e){return"boolean"===typeof e._remote?
e._remote:"function"===typeof e.type?(Dm("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===e.type()):!1}function vD(e){if(!e)return null;var h=e.split("/");return 2===h.length?h:1===h.length?[e,e]:null}function GL(e){return(e=vD(e))?e.join("/"):null}function HL(e){e=EX.exec(e);for(var h={},l=14;l--;){var b=IL[l],c=e[l]||"",g=-1!==["user","password"].indexOf(b);h[b]=g?decodeURIComponent(c):c}h.queryKey={};h[IL[12]].replace(FX,function(a,d,f){d&&(h.queryKey[d]=
f)});return h}function wD(e,h){var l=[],b=[],c;for(c in h)h.hasOwnProperty(c)&&(l.push(c),b.push(h[c]));l.push(e);return Function.apply(null,l).apply(null,b)}function rz(e,h,l){return new Promise(function(b,c){e.get(h,function(g,a){if(g){if(404!==g.status)return c(g);a={}}g=a._rev;a=l(a);if(!a)return b({updated:!1,rev:g});a._id=h;a._rev=g;b(GX(e,a,l))})})}function GX(e,h,l){return e.put(h).then(function(b){return{updated:!0,rev:b.rev}},function(b){if(409!==b.status)throw b;return rz(e,h._id,l)})}
function xD(e,h){e=e||[];h=h||{};try{return new Blob(e,h)}catch(c){if("TypeError"!==c.name)throw c;for(var l=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),b=0;b<e.length;b+=1)l.append(e[b]);return l.getBlob(h.type)}}function yD(e,h){for(var l=e.length,b=new ArrayBuffer(l),c=new Uint8Array(b),g=0;g<l;g++)c[g]=e.charCodeAt(g);return xD([b],{type:h})}function zD(e,h){return yD(atob(e),
h)}function JL(e,h){var l=new FileReader,b="function"===typeof l.readAsBinaryString;l.onloadend=function(c){var g=c.target.result||"";if(b)return h(g);c="";g=new Uint8Array(g);for(var a=g.byteLength,d=0;d<a;d++)c+=String.fromCharCode(g[d]);h(c)};b?l.readAsBinaryString(e):l.readAsArrayBuffer(e)}function KL(e,h){JL(e,function(l){h(l)})}function AD(e,h){KL(e,function(l){h(btoa(l))})}function HX(e,h){var l=new FileReader;l.onloadend=function(b){b=b.target.result||new ArrayBuffer(0);h(b)};l.readAsArrayBuffer(e)}
function IX(e,h,l){return e.webkitSlice?e.webkitSlice(h,l):e.slice(h,l)}function JX(e,h,l,b,c){if(0<l||b<h.size)h=IX(h,l,b);HX(h,function(g){e.append(g);c()})}function KX(e,h,l,b,c){if(0<l||b<h.length)h=h.substring(l,b);e.appendBinary(h);c()}function BD(e,h){function l(){LX(c)}function b(){var q=n.end(!0);q=btoa(q);h(q);n.destroy()}function c(){var q=k*d,r=q+d;k++;k<f?p(n,e,q,r,l):p(n,e,q,r,b)}var g="string"===typeof e,a=g?e.length:e.size,d=Math.min(32768,a),f=Math.ceil(a/d),k=0,n=g?new sz:new sz.ArrayBuffer,
p=g?KX:JX;c()}function LL(e,h){e=tk(e);if(!h)return ML.v4().replace(/-/g,"").toLowerCase();delete e._rev_tree;return sz.hash(JSON.stringify(e))}function Mr(e){e=e.rev_tree.slice();for(var h;h=e.pop();){var l=h.ids,b=l[2];h=h.pos;if(b.length){l=0;for(var c=b.length;l<c;l++)e.push({pos:h+1,ids:b[l]})}else if(b=!!l[1].deleted,l=l[0],!g||(d!==b?d:a!==h?a<h:g<l)){var g=l;var a=h;var d=b}}return a+"-"+g}function Nr(e,h){e=e.slice();for(var l;l=e.pop();){var b=l.pos,c=l.ids,g=c[2];l=h(0===g.length,b,c[0],
l.ctx,c[1]);c=0;for(var a=g.length;c<a;c++)e.push({pos:b+1,ids:g[c],ctx:l})}}function MX(e,h){return e.pos-h.pos}function CD(e){var h=[];Nr(e,function(b,c,g,a,d){b&&h.push({rev:c+"-"+g,pos:c,opts:d})});h.sort(MX).reverse();e=0;for(var l=h.length;e<l;e++)delete h[e].pos;return h}function DD(e){var h=Mr(e);e=CD(e.rev_tree);for(var l=[],b=0,c=e.length;b<c;b++){var g=e[b];g.rev===h||g.opts.deleted||l.push(g.rev)}return l}function NX(e){var h=[];Nr(e.rev_tree,function(l,b,c,g,a){"available"!==a.status||
l||(h.push(b+"-"+c),a.status="missing")});return h}function NL(e){var h=[];e=e.slice();for(var l;l=e.pop();){var b=l.pos,c=l.ids,g=c[0],a=c[1];c=c[2];var d=0===c.length;l=l.history?l.history.slice():[];l.push({id:g,opts:a});d&&h.push({pos:b+1-l.length,ids:l});g=0;for(a=c.length;g<a;g++)e.push({pos:b+1,ids:c[g],history:l})}return h.reverse()}function OX(e,h){return e.pos-h.pos}function OL(e,h){for(var l,b,c=e.length;h<c;h++){var g=e[h];g=[g.id,g.opts,[]];b?(b[2].push(g),b=g):l=b=g}return l}function PX(e,
h){return e[0]<h[0]?-1:1}function PL(e,h){h=[{tree1:e,tree2:h}];for(var l=!1;0<h.length;){var b=h.pop(),c=b.tree1;b=b.tree2;if(c[1].status||b[1].status)c[1].status="available"===c[1].status||"available"===b[1].status?"available":"missing";for(var g=0;g<b[2].length;g++)if(c[2][0]){for(var a=!1,d=0;d<c[2].length;d++)c[2][d][0]===b[2][g][0]&&(h.push({tree1:c[2][d],tree2:b[2][g]}),a=!0);if(!a){l="new_branch";a=c[2];d=b[2][g];for(var f,k=a,n=d,p=PX,q=0,r=k.length;q<r;)f=q+r>>>1,0>p(k[f],n)?q=f+1:r=f;a.splice(q,
0,d)}}else l="new_leaf",c[2][0]=b[2][g]}return{conflicts:l,tree:e}}function QL(e,h,l){var b=[],c=!1,g=!1;if(!e.length)return{tree:[h],conflicts:"new_leaf"};for(var a=0,d=e.length;a<d;a++){var f=e[a];if(f.pos===h.pos&&f.ids[0]===h.ids[0])g=PL(f.ids,h.ids),b.push({pos:f.pos,ids:g.tree}),c=c||g.conflicts,g=!0;else if(!0!==l){var k=f.pos<h.pos?f:h,n=f.pos<h.pos?h:f,p=[],q=[];for(q.push({ids:k.ids,diff:n.pos-k.pos,parent:null,parentIdx:null});0<q.length;){var r=q.pop();if(0===r.diff)r.ids[0]===n.ids[0]&&
p.push(r);else for(var t=r.ids[2],w=0,x=t.length;w<x;w++)q.push({ids:t[w],diff:r.diff-1,parent:r.ids,parentIdx:w})}(p=p[0])?(g=PL(p.ids,n.ids),p.parent[2][p.parentIdx]=g.tree,b.push({pos:k.pos,ids:k.ids}),c=c||g.conflicts,g=!0):b.push(f)}else b.push(f)}g||b.push(h);b.sort(OX);return{tree:b,conflicts:c||"internal_node"}}function QX(e,h){e=NL(e);for(var l,b,c=0,g=e.length;c<g;c++){var a=e[c],d=a.ids;if(d.length>h){l||(l={});var f=d.length-h;var k={pos:a.pos+f,ids:OL(d,f)};for(var n=0;n<f;n++)l[a.pos+
n+"-"+d[n].id]=!0}else k={pos:a.pos,ids:OL(d,0)};b=b?QL(b,k,!0).tree:[k]}l&&Nr(b,function(p,q,r){delete l[q+"-"+r]});return{tree:b,revs:l?Object.keys(l):[]}}function RL(e,h,l){e=QL(e,h);l=QX(e.tree,l);return{tree:l.tree,stemmedRevs:l.revs,conflicts:e.conflicts}}function RX(e){return e.ids}function cp(e,h){h||(h=Mr(e));h=h.substring(h.indexOf("-")+1);e=e.rev_tree.map(RX);for(var l;l=e.pop();){if(l[0]===h)return!!l[1].deleted;e=e.concat(l[2])}}function Or(e){return/^_local/.test(e)}function SX(e,h){for(var l=
h.rev_tree.slice(),b;b=l.pop();){var c=b.pos,g=b.ids,a=g[0],d=g[1];g=g[2];var f=0===g.length;b=b.history?b.history.slice():[];b.push({id:a,pos:c,opts:d});if(f)for(d=0,f=b.length;d<f;d++){var k=b[d];if(k.pos+"-"+k.id===e)return c+"-"+a}a=0;for(d=g.length;a<d;a++)l.push({pos:c+1,ids:g[a],history:b})}throw Error("Unable to resolve latest revision for id "+h.id+", rev "+e);}function mw(e,h,l){function b(){c.cancel()}Hl.EventEmitter.call(this);var c=this;this.db=e;h=h?tk(h):{};var g=h.complete=zL(function(d,
f){d?(f=c,0<("listenerCount"in f?f.listenerCount("error"):Hl.EventEmitter.listenerCount(f,"error"))&&c.emit("error",d)):c.emit("complete",f);c.removeAllListeners();e.removeListener("destroyed",b)});l&&(c.on("complete",function(d){l(null,d)}),c.on("error",l));e.once("destroyed",b);h.onChange=function(d,f,k){if(!c.isCancelled)try{c.emit("change",d,f,k)}catch(n){Dm("error",'Error in .on("change", function):',n)}};var a=new Promise(function(d,f){h.complete=function(k,n){k?f(k):d(n)}});c.once("cancel",
function(){e.removeListener("destroyed",b);h.complete(null,{status:"cancelled"})});this.then=a.then.bind(a);this["catch"]=a["catch"].bind(a);this.then(function(d){g(null,d)},g);e.taskqueue.isReady?c.validateChanges(h):e.taskqueue.addTask(function(d){d?h.complete(d):c.isCancelled?c.emit("cancel"):c.validateChanges(h)})}function TX(e,h,l){var b=[{rev:e._rev}];"all_docs"===l.style&&(b=CD(h.rev_tree).map(function(c){return{rev:c.rev}}));b={id:h.id,changes:b,doc:e};cp(h,e._rev)&&(b.deleted=!0);l.conflicts&&
(b.doc._conflicts=DD(h),b.doc._conflicts.length||delete b.doc._conflicts);return b}function ED(e,h){return function(l,b){l||b[0]&&b[0].error?(l=l||b[0],l.docId=h,e(l)):e(null,b.length?b[0]:b)}}function UX(e){for(var h=0;h<e.length;h++){var l=e[h];if(l._deleted)delete l._attachments;else if(l._attachments)for(var b=Object.keys(l._attachments),c=0;c<b.length;c++){var g=b[c];l._attachments[g]=kw(l._attachments[g],"data digest content_type length revpos stub".split(" "))}}}function VX(e,h){var l=e._id;
var b=h._id;l=l<b?-1:l>b?1:0;if(0!==l)return l;e=e._revisions?e._revisions.start:0;h=h._revisions?h._revisions.start:0;return e<h?-1:e>h?1:0}function WX(e){var h={},l=[];Nr(e,function(b,c,g,a){c=c+"-"+g;b&&(h[c]=0);void 0!==a&&l.push({from:a,to:c});return c});l.reverse();l.forEach(function(b){h[b.from]=void 0===h[b.from]?1+h[b.to]:Math.min(h[b.from],1+h[b.to])});return h}function XX(e){var h="limit"in e?e.keys.slice(e.skip,e.limit+e.skip):0<e.skip?e.keys.slice(e.skip):e.keys;e.keys=h;e.skip=0;delete e.limit;
e.descending&&(h.reverse(),e.descending=!1)}function SL(e){var h=e._compactionQueue[0],l=h.opts,b=h.callback;e.get("_local/compaction").catch(function(){return!1}).then(function(c){c&&c.last_seq&&(l.last_seq=c.last_seq);e._compact(l,function(g,a){g?b(g):b(null,a);ao(function(){e._compactionQueue.shift();e._compactionQueue.length&&SL(e)})})})}function sj(){Hl.EventEmitter.call(this);for(var e in sj.prototype)"function"===typeof this[e]&&(this[e]=this[e].bind(this))}function nw(){this.failed=this.isReady=
!1;this.queue=[]}function YX(e,h){var l=e.match(/([a-z-]*):\/\/(.*)/);if(l)return{name:/https?/.test(l[1])?l[1]+"://"+l[2]:l[2],adapter:l[1]};var b=$h.adapters,c=$h.preferredAdapters;l=$h.prefix;h=h.adapter;if(!h)for(var g=0;g<c.length;++g)if(h=c[g],"idb"===h&&"websql"in b&&lw&&localStorage["_pouch__websqldb_"+l+e])Dm("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');else break;b=b[h];return{name:(b&&"use_prefix"in b?b.use_prefix:1)?l+
e:e,adapter:h}}function ZX(e){function h(b){e.removeListener("closed",l);b||e.constructor.emit("destroyed",e.name)}function l(){e.removeListener("destroyed",h);e.constructor.emit("unref",e)}e.once("destroyed",h);e.once("closed",l);e.constructor.emit("ref",e)}function $h(e,h){if(!(this instanceof $h))return new $h(e,h);var l=this;h=h||{};e&&"object"===typeof e&&(h=e,e=h.name,delete h.name);void 0===h.deterministic_revs&&(h.deterministic_revs=!0);this.__opts=h=tk(h);l.auto_compaction=h.auto_compaction;
l.prefix=$h.prefix;if("string"!==typeof e)throw Error("Missing/invalid DB name");var b=YX((h.prefix||"")+e,h);h.name=b.name;h.adapter=h.adapter||b.adapter;l.name=e;l._adapter=h.adapter;$h.emit("debug",["adapter","Picked adapter: ",h.adapter]);if(!$h.adapters[h.adapter]||!$h.adapters[h.adapter].valid())throw Error("Invalid Adapter: "+h.adapter);sj.call(l);l.taskqueue=new nw;l.adapter=h.adapter;$h.adapters[h.adapter].call(l,h,function(c){if(c)return l.taskqueue.fail(c);ZX(l);l.emit("created",l);$h.emit("created",
l.name);l.taskqueue.ready(l)})}function TL(e,h){for(var l=0,b=h.length;l<b&&(e=e[h[l]],e);l++);return e}function UL(e){for(var h=[],l="",b=0,c=e.length;b<c;b++){var g=e[b];"."===g?0<b&&"\\"===e[b-1]?l=l.substring(0,l.length-1)+".":(h.push(l),l=""):l+=g}h.push(l);return h}function $X(e){return e[Object.keys(e)[0]]}function ow(e){var h={};e.forEach(function(l){Object.keys(l).forEach(function(b){var c=l[b];"object"!==typeof c&&(c={$eq:c});if(-1<VL.indexOf(b))h[b]=c instanceof Array?c.map(function(a){return ow([a])}):
ow([c]);else{var g=h[b]=h[b]||{};Object.keys(c).forEach(function(a){var d=c[a];"$gt"===a||"$gte"===a?"undefined"===typeof g.$eq&&("undefined"!==typeof g.$gte?"$gte"===a?d>g.$gte&&(g.$gte=d):d>=g.$gte&&(delete g.$gte,g.$gt=d):"undefined"!==typeof g.$gt?"$gte"===a?d>g.$gt&&(delete g.$gt,g.$gte=d):d>g.$gt&&(g.$gt=d):g[a]=d):"$lt"===a||"$lte"===a?"undefined"===typeof g.$eq&&("undefined"!==typeof g.$lte?"$lte"===a?d<g.$lte&&(g.$lte=d):d<=g.$lte&&(delete g.$lte,g.$lt=d):"undefined"!==typeof g.$lt?"$lte"===
a?d<g.$lt&&(delete g.$lt,g.$lte=d):d<g.$lt&&(g.$lt=d):g[a]=d):"$ne"===a?"$ne"in g?g.$ne.push(d):g.$ne=[d]:"$eq"===a?(delete g.$gt,delete g.$gte,delete g.$lt,delete g.$lte,delete g.$ne,g.$eq=d):g[a]=d})}})});return h}function WL(e){for(var h in e){if(Array.isArray(e))for(var l in e)e[l].$and&&(e[l]=ow(e[l].$and));var b=e[h];"object"===typeof b&&WL(b)}return e}function XL(e,h){for(var l in e){"$and"===l&&(h=!0);var b=e[l];"object"===typeof b&&(h=XL(b,h))}return h}function aY(e){var h=tk(e);e=!1;XL(h,
!1)&&(h=WL(h),"$and"in h&&(h=ow(h.$and)),e=!0);["$or","$nor"].forEach(function(a){a in h&&h[a].forEach(function(d){for(var f=Object.keys(d),k=0;k<f.length;k++){var n=f[k],p=d[n];if("object"!==typeof p||null===p)d[n]={$eq:p}}})});"$not"in h&&(h.$not=ow([h.$not]));for(var l=Object.keys(h),b=0;b<l.length;b++){var c=l[b],g=h[c];"object"!==typeof g||null===g?g={$eq:g}:"$ne"in g&&!e&&(g.$ne=[g.$ne]);h[c]=g}return h}function Hk(e,h){if(e===h)return 0;e=Pr(e);h=Pr(h);var l=FD(e),b=FD(h);if(0!==l-b)return l-
b;switch(typeof e){case "number":return e-h;case "boolean":return e<h?-1:1;case "string":return e===h?0:e>h?1:-1}if(Array.isArray(e))a:{l=Math.min(e.length,h.length);for(b=0;b<l;b++){var c=Hk(e[b],h[b]);if(0!==c){e=c;break a}}e=e.length===h.length?0:e.length>h.length?1:-1}else a:{l=Object.keys(e);b=Object.keys(h);c=Math.min(l.length,b.length);for(var g=0;g<c;g++){var a=Hk(l[g],b[g]);if(0!==a){e=a;break a}a=Hk(e[l[g]],h[b[g]]);if(0!==a){e=a;break a}}e=l.length===b.length?0:l.length>b.length?1:-1}return e}
function Pr(e){switch(typeof e){case "undefined":return null;case "number":if(Infinity===e||-Infinity===e||isNaN(e))return null;break;case "object":var h=e;if(Array.isArray(e)){var l=e.length;e=Array(l);for(var b=0;b<l;b++)e[b]=Pr(h[b])}else{if(e instanceof Date)return e.toJSON();if(null!==e)for(l in e={},h)h.hasOwnProperty(l)&&(b=h[l],"undefined"!==typeof b&&(e[l]=Pr(b)))}}return e}function bY(e){if(null!==e)switch(typeof e){case "boolean":return e?1:0;case "number":if(0===e)e="1";else{var h=e.toExponential().split(/e\+?/),
l=parseInt(h[1],10);e=0>e;l=((e?-l:l)- -324).toString();for(var b="",c=3-l.length;b.length<c;)b+="0";l=(e?"0":"2")+(""+(b+l));h=Math.abs(parseFloat(h[0]));e&&(h=10-h);e=h.toFixed(20);e=e.replace(/\.?0+$/,"");e=l+=""+e}return e;case "string":return e.replace(/\u0002/g,"\u0002\u0002").replace(/\u0001/g,"\u0001\u0002").replace(/\u0000/g,"\u0001\u0001");case "object":var g=Array.isArray(e);h=g?e:Object.keys(e);l=-1;b=h.length;c="";if(g)for(;++l<b;)c+=kn(h[l]);else for(;++l<b;)g=h[l],c+=kn(g)+kn(e[g]);
return c}return""}function kn(e){e=Pr(e);return FD(e)+""+bY(e)+"\x00"}function FD(e){var h=["boolean","number","string","object"].indexOf(typeof e);if(~h)return null===e?1:Array.isArray(e)?5:3>h?h+2:h+3;if(Array.isArray(e))return 5}function cY(e){function h(l){return e.map(function(b){b=Object.keys(b)[0];b=UL(b);return TL(l,b)})}return function(l,b){var c=h(l.doc),g=h(b.doc);c=Hk(c,g);if(0!==c)return c;l=l.doc._id;b=b.doc._id;return l<b?-1:l>b?1:0}}function dY(e,h,l){e=e.filter(function(c){return Zt(c.doc,
h.selector,l)});if(h.sort){var b=cY(h.sort);e=e.sort(b);"string"!==typeof h.sort[0]&&"desc"===$X(h.sort[0])&&(e=e.reverse())}if("limit"in h||"skip"in h)b=h.skip||0,e=e.slice(b,("limit"in h?h.limit:e.length)+b);return e}function Zt(e,h,l){return l.every(function(b){var c=h[b],g=UL(b),a=TL(e,g);return-1<VL.indexOf(b)?eY(b,c,e):GD(c,e,g,a)})}function GD(e,h,l,b){return e?"object"===typeof e?Object.keys(e).every(function(c){var g=e[c];if(!YL[c])throw Error('unknown operator "'+c+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');
return YL[c](h,g,l,b)}):e===b:!0}function eY(e,h,l){return"$or"===e?h.some(function(b){return Zt(l,b,Object.keys(b))}):"$not"===e?!Zt(l,h,Object.keys(h)):!h.find(function(b){return Zt(l,b,Object.keys(b))})}function pw(e){return"undefined"!==typeof e&&null!==e}function Qr(e){return"undefined"!==typeof e}function ZL(e,h){return h.some(function(l){return e instanceof Array?-1<e.indexOf(l):e===l})}function fY(e,h){return h.every(function(l){return-1<e.indexOf(l)})}function gY(e,h){switch(h){case "null":return null===
e;case "boolean":return"boolean"===typeof e;case "number":return"number"===typeof e;case "string":return"string"===typeof e;case "array":return e instanceof Array;case "object":return"[object Object]"==={}.toString.call(e)}throw Error(h+" not supported as a type.Please use one of object, string, array, number, boolean or null.");}function hY(e,h){if(e.selector&&e.filter&&"_selector"!==e.filter)return h(Error('selector invalid for filter "'+("string"===typeof e.filter?e.filter:"function")+'"'));h()}
function iY(e){e.view&&!e.filter&&(e.filter="_view");e.selector&&!e.filter&&(e.filter="_selector");e.filter&&"string"===typeof e.filter&&("_view"===e.filter?e.view=GL(e.view):e.filter=GL(e.filter))}function jY(e,h){return h.filter&&"string"===typeof h.filter&&!h.doc_ids&&!$n(e.db)}function kY(e,h){var l=h.complete;if("_view"===h.filter){if(!h.view||"string"!==typeof h.view){var b=fi(pz,"`view` filter parameter not found or invalid.");return l(b)}var c=vD(h.view);e.db.get("_design/"+c[0],function(a,
d){if(e.isCancelled)return l(null,{status:"cancelled"});if(a)return l(Yt(a));a=d&&d.views&&d.views[c[1]]&&d.views[c[1]].map;if(!a)return l(fi(ln,d.views?"missing json key: "+c[1]:"missing json key: views"));d=['return function(doc) {\n  "use strict";\n  var emitted = false;\n  var emit = function (a, b) {\n    emitted = true;\n  };',"  var view = "+a+";","  view(doc);\n  if (emitted) {\n    return true;\n  }\n};"].join("\n");d=wD(d,{});h.filter=d;e.doChanges(h)})}else if(h.selector)h.filter=function(a){var d=
h.selector;if("object"!==typeof d)throw Error("Selector error: expected a JSON object");d=aY(d);return(a=dY([{doc:a}],{selector:d},Object.keys(d)))&&1===a.length},e.doChanges(h);else{var g=vD(h.filter);e.db.get("_design/"+g[0],function(a,d){if(e.isCancelled)return l(null,{status:"cancelled"});if(a)return l(Yt(a));a=d&&d.filters&&d.filters[g[1]];if(!a)return l(fi(ln,d&&d.filters?"missing json key: "+g[1]:"missing json key: filters"));h.filter=wD('"use strict";\nreturn '+a+";",{});e.doChanges(h)})}}
function $L(e){return e.reduce(function(h,l){h[l]=!0;return h},{})}function aM(e){if(!/^\d+-/.test(e))return fi(bM);var h=e.indexOf("-"),l=e.substring(0,h);e=e.substring(h+1);return{prefix:parseInt(l,10),id:e}}function cM(e,h,l){l||(l={deterministic_revs:!0});var b={status:"available"};e._deleted&&(b.deleted=!0);if(h){e._id||(e._id=tz());var c=LL(e,l.deterministic_revs);if(e._rev){h=aM(e._rev);if(h.error)return h;e._rev_tree=[{pos:h.prefix,ids:[h.id,{status:"missing"},[[c,b,[]]]]}];var g=h.prefix+
1}else e._rev_tree=[{pos:1,ids:[c,b,[]]}],g=1}else{if(e._revisions){c=e._revisions;g=c.start-c.ids.length+1;c=c.ids;h=[c[0],b,[]];l=1;for(var a=c.length;l<a;l++)h=[c[l],{status:"missing"},[h]];e._rev_tree=[{pos:g,ids:h}];g=e._revisions.start;c=e._revisions.ids[0]}if(!e._rev_tree){h=aM(e._rev);if(h.error)return h;g=h.prefix;c=h.id;e._rev_tree=[{pos:g,ids:[c,b,[]]}]}}EL(e._id);e._rev=g+"-"+c;b={metadata:{},data:{}};for(var d in e)if(Object.prototype.hasOwnProperty.call(e,d)){if((g="_"===d[0])&&!lY[d])throw e=
fi(dM,d),e.message=dM.message+": "+d,e;g&&!mY[d]?b.metadata[d.slice(1)]=e[d]:b.data[d]=e[d]}return b}function nY(e,h,l){try{var b=atob(e.data)}catch(c){b={error:fi(eM,"Attachment is not a valid base64 string")}}if(b.error)return l(b.error);e.length=b.length;e.data="blob"===h?yD(b,e.content_type):"base64"===h?btoa(b):b;BD(b,function(c){e.digest="md5-"+c;l()})}function oY(e,h,l){BD(e.data,function(b){e.digest="md5-"+b;e.length=e.data.size||e.data.length||0;"binary"===h?KL(e.data,function(c){e.data=
c;l()}):"base64"===h?AD(e.data,function(c){e.data=c;l()}):l()})}function pY(e,h,l){if(e.stub)return l();"string"===typeof e.data?nY(e,h,l):oY(e,h,l)}function qY(e,h,l){function b(){c++;e.length===c&&(g?l(g):l())}if(!e.length)return l();var c=0,g;e.forEach(function(a){function d(p){g=p;k++;k===f.length&&b()}var f=a.data&&a.data._attachments?Object.keys(a.data._attachments):[],k=0;if(!f.length)return b();for(var n in a.data._attachments)a.data._attachments.hasOwnProperty(n)&&pY(a.data._attachments[n],
h,d)})}function rY(e,h,l,b,c,g,a,d,f){e=e||1E3;var k=d.new_edits,n=new Wl,p=0,q=h.length;h.forEach(function(r,t){if(r._id&&Or(r._id))l[r._deleted?"_removeLocal":"_putLocal"](r,{ctx:c},function(x,B){g[t]=x||B;++p===q&&f&&f()});else{var w=r.metadata.id;n.has(w)?(q--,n.get(w).push([r,t])):n.set(w,[[r,t]])}});n.forEach(function(r,t){function w(){++B<r.length?x():++p===q&&f&&f()}function x(){var D=r[B],F=D[0];D=D[1];if(b.has(t)){var L=e,G=b.get(t);b:{var oa=F.metadata.rev;var ha=G.rev_tree.slice();var Ha=
oa.split("-");oa=parseInt(Ha[0],10);Ha=Ha[1];for(var Va;Va=ha.pop();){if(Va.pos===oa&&Va.ids[0]===Ha){ha=!0;break b}for(var hc=Va.ids[2],qc=0,jc=hc.length;qc<jc;qc++)ha.push({pos:Va.pos+1,ids:hc[qc]})}ha=!1}ha&&!k?(g[D]=F,w()):(Ha=G.winningRev||Mr(G),ha="deleted"in G?G.deleted:cp(G,Ha),oa="deleted"in F.metadata?F.metadata.deleted:cp(F.metadata),Va=/^1-/.test(F.metadata.rev),ha&&!oa&&k&&Va&&(Va=F.data,Va._rev=Ha,Va._id=F.metadata.id,F=cM(Va,k)),Ha=RL(G.rev_tree,F.metadata.rev_tree[0],L),k&&(ha&&oa&&
"new_leaf"!==Ha.conflicts||!ha&&"new_leaf"!==Ha.conflicts||ha&&!oa&&"new_branch"===Ha.conflicts)?(F=fi($t),g[D]=F,w()):(L=F.metadata.rev,F.metadata.rev_tree=Ha.tree,F.stemmedRevs=Ha.stemmedRevs||[],G.rev_map&&(F.metadata.rev_map=G.rev_map),G=Mr(F.metadata),oa=cp(F.metadata,G),ha=ha===oa?0:ha<oa?-1:1,L=L===G?oa:cp(F.metadata,L),a(F,G,oa,L,!0,ha,D,w)))}else G=RL([],F.metadata.rev_tree[0],e),F.metadata.rev_tree=G.tree,F.stemmedRevs=G.stemmedRevs||[],G=Mr(F.metadata),L=cp(F.metadata,G),"was_delete"in
d&&L?(g[D]=fi(ln,"deleted"),w()):k&&"missing"===F.metadata.rev_tree[0].ids[1].status?(F=fi($t),g[D]=F,w()):a(F,G,L,L,!1,L?0:1,D,w)}var B=0;x()})}function bo(e){return function(h){var l="unknown_error";h.target&&h.target.error&&(l=h.target.error.name||h.target.error.message);e(fi(HD,l,h.type))}}function ID(e,h,l){try{var b=JSON.stringify(e)}catch(c){b=fM.stringify(e)}return{data:b,winningRev:h,deletedOrLocal:l?"1":"0",seq:e.seq,id:e.id}}function Rr(e){if(!e)return null;var h=e.data;try{var l=JSON.parse(h)}catch(b){l=
fM.parse(h)}l.winningRev=e.winningRev;l.deleted="1"===e.deletedOrLocal;l.seq=e.seq;return l}function uz(e){if(!e)return e;var h=e._doc_id_rev.lastIndexOf(":");e._id=e._doc_id_rev.substring(0,h-1);e._rev=e._doc_id_rev.substring(h+1);delete e._doc_id_rev;return e}function gM(e,h,l,b){l?e?"string"!==typeof e?b(e):b(zD(e,h)):b(xD([""],{type:h})):e?"string"!==typeof e?JL(e,function(c){b(btoa(c))}):b(e):b("")}function hM(e,h,l,b){function c(d,f){var k=d._attachments[f];d=k.digest;l.objectStore("attach-store").get(d).onsuccess=
function(n){k.body=n.target.result.body;++a===g.length&&b&&b()}}var g=Object.keys(e._attachments||{});if(!g.length)return b&&b();var a=0;g.forEach(function(d){h.attachments&&h.include_docs?c(e,d):(e._attachments[d].stub=!0,++a===g.length&&b&&b())})}function JD(e,h){return Promise.all(e.map(function(l){if(l.doc&&l.doc._attachments){var b=Object.keys(l.doc._attachments);return Promise.all(b.map(function(c){var g=l.doc._attachments[c];if("body"in g){var a=g.body,d=g.content_type;return new Promise(function(f){gM(a,
d,h,function(k){l.doc._attachments[c]=au(kw(g,["digest","content_type"]),{data:k});f()})})}}))}}))}function iM(e,h,l){function b(){c.length&&c.forEach(function(k){d.index("digestSeq").count(IDBKeyRange.bound(k+"::",k+"::\uffff",!1,!1)).onsuccess=function(n){n.target.result||a.delete(k)}})}var c=[],g=l.objectStore("by-sequence"),a=l.objectStore("attach-store"),d=l.objectStore("attach-seq-store"),f=e.length;e.forEach(function(k){g.index("_doc_id_rev").getKey(h+"::"+k).onsuccess=function(n){n=n.target.result;
"number"!==typeof n?(f--,f||b()):(g.delete(n),d.index("seq").openCursor(IDBKeyRange.only(n)).onsuccess=function(p){if(p=p.target.result){var q=p.value.digestSeq.split("::")[0];c.push(q);d.delete(p.primaryKey);p.continue()}else f--,f||b()})}})}function mn(e,h,l){try{return{txn:e.transaction(h,l)}}catch(b){return{error:b}}}function sY(e,h,l,b,c,g){function a(){var $c=mn(c,"document-store by-sequence attach-store local-store attach-seq-store meta-store".split(" "),"readwrite");if($c.error)return g($c.error);
L=$c.txn;L.onabort=bo(g);L.ontimeout=bo(g);L.oncomplete=p;G=L.objectStore("document-store");oa=L.objectStore("by-sequence");ha=L.objectStore("attach-store");Ha=L.objectStore("attach-seq-store");Va=L.objectStore("meta-store");Va.get("meta-store").onsuccess=function(Oa){qc=Oa.target.result;k()};r(function(Oa){if(Oa)return Zb=!0,g(Oa);n()})}function d(){xa=!0;k()}function f(){rY(e.revs_limit,F,b,wc,L,Qb,t,l,d)}function k(){qc&&xa&&(qc.docCount+=tc,Va.put(qc))}function n(){function $c(dd){(dd=Rr(dd.target.result))&&
wc.set(dd.id,dd);++Oa===F.length&&f()}if(F.length)for(var Oa=0,md=0,la=F.length;md<la;md++){var $a=F[md];$a._id&&Or($a._id)?++Oa===F.length&&f():G.get($a.metadata.id).onsuccess=$c}}function p(){Zb||(qw.notify(b._meta.name),g(null,Qb))}function q($c,Oa){ha.get($c).onsuccess=function(md){md.target.result?Oa():(md=fi(tY,"unknown stub attachment with digest "+$c),md.status=412,Oa(md))}}function r($c){var Oa=[];F.forEach(function($a){$a.data&&$a.data._attachments&&Object.keys($a.data._attachments).forEach(function(dd){dd=
$a.data._attachments[dd];dd.stub&&Oa.push(dd.digest)})});if(!Oa.length)return $c();var md=0,la;Oa.forEach(function($a){q($a,function(dd){dd&&!la&&(la=dd);++md===Oa.length&&$c(la)})})}function t($c,Oa,md,la,$a,dd,Kd,ra){$c.metadata.winningRev=Oa;$c.metadata.deleted=md;var Aa=$c.data;Aa._id=$c.metadata.id;Aa._rev=$c.metadata.rev;la&&(Aa._deleted=!0);if(Aa._attachments&&Object.keys(Aa._attachments).length)return x($c,Oa,md,$a,Kd,ra);tc+=dd;k();w($c,Oa,md,$a,Kd,ra)}function w($c,Oa,md,la,$a,dd){function Kd(Mb){var U=
$c.stemmedRevs||[];la&&b.auto_compaction&&(U=U.concat(NX($c.metadata)));U&&U.length&&iM(U,$c.metadata.id,L);V.seq=Mb.target.result;Mb=ID(V,Oa,md);G.put(Mb).onsuccess=ra}function ra(){Qb[$a]={ok:!0,id:V.id,rev:V.rev};wc.set($c.metadata.id,$c.metadata);B($c,V.seq,dd)}var Aa=$c.data,V=$c.metadata;Aa._doc_id_rev=V.id+"::"+V.rev;delete Aa._id;delete Aa._rev;var ea=oa.put(Aa);ea.onsuccess=Kd;ea.onerror=function(Mb){Mb.preventDefault();Mb.stopPropagation();oa.index("_doc_id_rev").getKey(Aa._doc_id_rev).onsuccess=
function(U){oa.put(Aa,U.target.result).onsuccess=Kd}}}function x($c,Oa,md,la,$a,dd){function Kd(){Aa===V.length&&w($c,Oa,md,la,$a,dd)}function ra(){Aa++;Kd()}var Aa=0,V=Object.keys($c.data._attachments);V.forEach(function(ea){ea=$c.data._attachments[ea];if(ea.stub)Aa++,Kd();else{var Mb=ea.data;delete ea.data;ea.revpos=parseInt(Oa,10);D(ea.digest,Mb,ra)}})}function B($c,Oa,md){function la(){++dd===Kd.length&&md()}function $a(Aa){Aa=Ha.put({seq:Oa,digestSeq:$c.data._attachments[Aa].digest+"::"+Oa});
Aa.onsuccess=la;Aa.onerror=function(V){V.preventDefault();V.stopPropagation();la()}}var dd=0,Kd=Object.keys($c.data._attachments||{});if(!Kd.length)return md();for(var ra=0;ra<Kd.length;ra++)$a(Kd[ra])}function D($c,Oa,md){ha.count($c).onsuccess=function(la){if(la.target.result)return md();ha.put({digest:$c,body:Oa}).onsuccess=md}}var F=h.docs,L,G,oa,ha,Ha,Va,hc,qc;h=0;for(var jc=F.length;h<jc;h++){var Ya=F[h];Ya._id&&Or(Ya._id)||(Ya=F[h]=cM(Ya,l.new_edits,e),Ya.error&&!hc&&(hc=Ya))}if(hc)return g(hc);
var xa=!1,tc=0,Qb=Array(F.length),wc=new Wl,Zb=!1;qY(F,b._meta.blobSupport?"blob":"base64",function($c){if($c)return g($c);a()})}function jM(e,h,l,b,c){function g(q){n=q.target.result;k&&c(k,n,p)}function a(q){k=q.target.result;n&&c(k,n,p)}function d(){if(!k.length)return c();var q=k[k.length-1];if(h&&h.upper)try{var r=IDBKeyRange.bound(q,h.upper,!0,h.upperOpen)}catch(t){if("DataError"===t.name&&0===t.code)return c()}else r=IDBKeyRange.lowerBound(q,!0);h=r;n=k=null;e.getAll(h,b).onsuccess=g;e.getAllKeys(h,
b).onsuccess=a}function f(q){q=q.target.result;if(!q)return c();c([q.key],[q.value],q)}-1===b&&(b=1E3);var k,n;if("function"===typeof e.getAll&&"function"===typeof e.getAllKeys&&1<b&&!l){var p={"continue":d};e.getAll(h,b).onsuccess=g;e.getAllKeys(h,b).onsuccess=a}else l?e.openCursor(h,"prev").onsuccess=f:e.openCursor(h).onsuccess=f}function uY(e,h,l){if("function"===typeof e.getAll)e.getAll(h).onsuccess=l;else{var b=[];e.openCursor(h).onsuccess=function(c){(c=c.target.result)?(b.push(c.value),c.continue()):
l({target:{result:b}})}}}function vY(e,h,l){var b=Array(e.length),c=0;e.forEach(function(g,a){h.get(g).onsuccess=function(d){b[a]=d.target.result?d.target.result:{key:g,error:"not_found"};c++;c===e.length&&l(e,b,{})}})}function wY(e,h,l,b,c){try{if(e&&h)return c?IDBKeyRange.bound(h,e,!l,!1):IDBKeyRange.bound(e,h,!1,!l);if(e)return c?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(h)return c?IDBKeyRange.lowerBound(h,!l):IDBKeyRange.upperBound(h,!l);if(b)return IDBKeyRange.only(b)}catch(g){return{error:g}}return null}
function xY(e,h,l){function b(ha,Ha){ha.openCursor(null,"prev").onsuccess=function(Va){Va=Va.target.result;var hc=void 0;Va&&Va.key&&(hc=Va.key);return Ha({target:{result:[hc]}})}}function c(ha,Ha,Va){F.get(ha.id+"::"+Va).onsuccess=function(hc){Ha.doc=uz(hc.target.result)||{};e.conflicts&&(hc=DD(ha),hc.length&&(Ha.doc._conflicts=hc));hM(Ha.doc,e,D)}}function g(ha){for(var Ha=0,Va=ha.length;Ha<Va&&L.length!==t;Ha++){var hc=ha[Ha];if(hc.error&&q)L.push(hc);else{var qc=Rr(hc);hc=qc.winningRev;var jc=
{id:qc.id,key:qc.id,value:{rev:hc}};qc.deleted?q&&(L.push(jc),jc.value.deleted=!0,jc.doc=null):0>=r--&&(L.push(jc),e.include_docs&&c(qc,jc,hc))}}}function a(ha,Ha,Va){Va&&(g(Ha),L.length<t&&Va.continue())}function d(ha){ha=ha.target.result;e.descending&&(ha=ha.reverse());g(ha)}function f(){var ha={total_rows:G,offset:e.skip,rows:L};e.update_seq&&void 0!==oa&&(ha.update_seq=oa);l(null,ha)}var k="startkey"in e?e.startkey:!1,n="endkey"in e?e.endkey:!1,p="key"in e?e.key:!1,q="keys"in e?e.keys:!1,r=e.skip||
0,t="number"===typeof e.limit?e.limit:-1,w=!1!==e.inclusive_end,x,B;if(!q&&(B=(x=wY(k,n,w,p,e.descending))&&x.error)&&("DataError"!==B.name||0!==B.code))return l(fi(HD,B.name,B.message));k=["document-store","by-sequence","meta-store"];e.attachments&&k.push("attach-store");h=mn(h,k,"readonly");if(h.error)return l(h.error);var D=h.txn;D.oncomplete=function(){e.attachments?JD(L,e.binary).then(f):f()};D.onabort=bo(l);h=D.objectStore("document-store");k=D.objectStore("by-sequence");n=D.objectStore("meta-store");
var F=k.index("_doc_id_rev"),L=[],G,oa;n.get("meta-store").onsuccess=function(ha){G=ha.target.result.docCount};e.update_seq&&b(k,function(ha){ha.target.result&&0<ha.target.result.length&&(oa=ha.target.result[0])});if(!B&&0!==t){if(q)return vY(e.keys,h,a);if(-1===t)return uY(h,x,d);jM(h,x,e.descending,t+r,a)}}function yY(e){return(new Promise(function(h){var l=xD([""]);l=e.objectStore("detect-blob-support").put(l,"key");l.onsuccess=function(){var b=navigator.userAgent.match(/Chrome\/(\d+)/),c=navigator.userAgent.match(/Edge\//);
h(c||!b||43<=parseInt(b[1],10))};l.onerror=e.onabort=function(b){b.preventDefault();b.stopPropagation();h(!1)}})).catch(function(){return!1})}function zY(e,h){e.objectStore("document-store").index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(l){h(l.target.result)}}function AY(e,h,l,b){try{e(h,l)}catch(c){b.emit("error",c)}}function kM(){!KD&&LD.length&&(KD=!0,LD.shift()())}function BY(e,h,l){LD.push(function(){e(function(b,c){AY(h,b,c,l);KD=!1;ao(function(){kM()})})});kM()}function CY(e,
h,l,b){function c(D,F,L,G){if(L.seq!==F)return G();if(L.winningRev===D._rev)return G(L,D);B.get(D._id+"::"+L.winningRev).onsuccess=function(oa){G(L,uz(oa.target.result))}}function g(D,F,L){if(f&&!f.has(D._id))return L();var G=t.get(D._id);if(G)return c(D,F,G,L);x.get(D._id).onsuccess=function(oa){G=Rr(oa.target.result);t.set(D._id,G);c(D,F,G,L)}}function a(){e.complete(null,{results:p,last_seq:k})}e=tk(e);if(e.continuous){var d=l+":"+tz();qw.addListener(l,d,h,e);qw.notify(l);return{cancel:function(){qw.removeListener(l,
d)}}}var f=e.doc_ids&&new rw(e.doc_ids);e.since=e.since||0;var k=e.since,n="limit"in e?e.limit:-1;0===n&&(n=1);var p=[],q=0,r=uD(e),t=new Wl;h=["document-store","by-sequence"];e.attachments&&h.push("attach-store");b=mn(b,h,"readonly");if(b.error)return e.complete(b.error);var w=b.txn;w.onabort=bo(e.complete);w.oncomplete=function(){!e.continuous&&e.attachments?JD(p).then(a):a()};b=w.objectStore("by-sequence");var x=w.objectStore("document-store");var B=b.index("_doc_id_rev");h=e.since&&!e.descending?
IDBKeyRange.lowerBound(e.since,!0):null;jM(b,h,e.descending,n,function(D,F,L){function G(hc,qc){var jc=e.processChange(qc,hc,e);k=jc.seq=hc.seq;hc=r(jc);if("object"===typeof hc)return Promise.reject(hc);if(!hc)return Promise.resolve();q++;e.return_docs&&p.push(jc);return e.attachments&&e.include_docs?new Promise(function(Ya){hM(qc,e,w,function(){JD([jc],e.binary).then(function(){Ya(jc)})})}):Promise.resolve(jc)}function oa(){for(var hc=[],qc=0,jc=ha.length;qc<jc&&q!==n;qc++){var Ya=ha[qc];Ya&&hc.push(G(Ha[qc],
Ya))}Promise.all(hc).then(function(xa){for(var tc=0,Qb=xa.length;tc<Qb;tc++)if(xa[tc])e.onChange(xa[tc])}).catch(e.complete);q!==n&&L.continue()}if(L&&D.length){var ha=Array(D.length),Ha=Array(D.length),Va=0;F.forEach(function(hc,qc){hc=uz(hc);g(hc,D[qc],function(jc,Ya){Ha[qc]=jc;ha[qc]=Ya;++Va===D.length&&oa()})})}})}function lM(e,h){var l=this;BY(function(b){DY(l,e,b)},h,l.constructor)}function DY(e,h,l){function b(q){var r=q.createObjectStore("document-store",{keyPath:"id"});q.createObjectStore("by-sequence",
{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0});q.createObjectStore("attach-store",{keyPath:"digest"});q.createObjectStore("meta-store",{keyPath:"id",autoIncrement:!1});q.createObjectStore("detect-blob-support");r.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1});q.createObjectStore("local-store",{keyPath:"_id"});q=q.createObjectStore("attach-seq-store",{autoIncrement:!0});q.createIndex("seq","seq");q.createIndex("digestSeq","digestSeq",{unique:!0})}function c(q,
r){var t=q.objectStore("document-store");t.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1});t.openCursor().onsuccess=function(w){if(w=w.target.result){var x=w.value,B=cp(x);x.deletedOrLocal=B?"1":"0";t.put(x);w.continue()}else r()}}function g(q,r){var t=q.objectStore("local-store"),w=q.objectStore("document-store"),x=q.objectStore("by-sequence");w.openCursor().onsuccess=function(B){var D=B.target.result;if(D){var F=D.value;B=F.id;var L=Or(B);F=Mr(F);if(L){var G=B+"::"+F;L=B+"::";F=B+"::~";
B=x.index("_doc_id_rev");L=IDBKeyRange.bound(L,F,!1,!1);var oa=B.openCursor(L);oa.onsuccess=function(ha){(oa=ha.target.result)?(ha=oa.value,ha._doc_id_rev===G&&t.put(ha),x.delete(oa.primaryKey),oa.continue()):(w.delete(D.primaryKey),D.continue())}}else D.continue()}else r&&r()}}function a(q){q=q.createObjectStore("attach-seq-store",{autoIncrement:!0});q.createIndex("seq","seq");q.createIndex("digestSeq","digestSeq",{unique:!0})}function d(q,r){var t=q.objectStore("by-sequence"),w=q.objectStore("attach-store"),
x=q.objectStore("attach-seq-store");w.count().onsuccess=function(B){if(!B.target.result)return r();t.openCursor().onsuccess=function(D){D=D.target.result;if(!D)return r();for(var F=D.value,L=D.primaryKey,G=Object.keys(F._attachments||{}),oa={},ha=0;ha<G.length;ha++)oa[F._attachments[G[ha]].digest]=!0;F=Object.keys(oa);for(ha=0;ha<F.length;ha++)x.put({seq:L,digestSeq:F[ha]+"::"+L});D.continue()}}}function f(q){function r(x){return x.data?Rr(x):(x.deleted="1"===x.deletedOrLocal,x)}var t=q.objectStore("by-sequence"),
w=q.objectStore("document-store");w.openCursor().onsuccess=function(x){function B(){var L=ID(F,F.winningRev,F.deleted);w.put(L).onsuccess=function(){D.continue()}}var D=x.target.result;if(D){var F=r(D.value);F.winningRev=F.winningRev||Mr(F);if(F.seq)return B();(function(){var L=F.id+"::",G=F.id+"::\uffff",oa=0;t.index("_doc_id_rev").openCursor(IDBKeyRange.bound(L,G)).onsuccess=function(ha){ha=ha.target.result;if(!ha)return F.seq=oa,B();var Ha=ha.primaryKey;Ha>oa&&(oa=Ha);ha.continue()}})()}}}var k=
h.name,n=null;e._meta=null;e._remote=!1;e.type=function(){return"idb"};e._id=AL(function(q){q(null,e._meta.instanceId)});e._bulkDocs=function(q,r,t){sY(h,q,r,e,n,t)};e._get=function(q,r,t){function w(){t(D,{doc:x,metadata:B,ctx:F})}var x,B,D,F=r.ctx;if(!F){var L=mn(n,["document-store","by-sequence","attach-store"],"readonly");if(L.error)return t(L.error);F=L.txn}F.objectStore("document-store").get(q).onsuccess=function(G){B=Rr(G.target.result);if(!B)return D=fi(ln,"missing"),w();if(r.rev)var oa=r.latest?
SX(r.rev,B):r.rev;else if(oa=B.winningRev,cp(B))return D=fi(ln,"deleted"),w();G=F.objectStore("by-sequence");oa=B.id+"::"+oa;G.index("_doc_id_rev").get(oa).onsuccess=function(ha){(x=ha.target.result)&&(x=uz(x));if(!x)return D=fi(ln,"missing"),w();w()}}};e._getAttachment=function(q,r,t,w,x){if(w.ctx)q=w.ctx;else{q=mn(n,["document-store","by-sequence","attach-store"],"readonly");if(q.error)return x(q.error);q=q.txn}r=t.digest;var B=t.content_type;q.objectStore("attach-store").get(r).onsuccess=function(D){gM(D.target.result.body,
B,w.binary,function(F){x(null,F)})}};e._info=function(q){var r,t,w=mn(n,["meta-store","by-sequence"],"readonly");if(w.error)return q(w.error);w=w.txn;w.objectStore("meta-store").get("meta-store").onsuccess=function(x){t=x.target.result.docCount};w.objectStore("by-sequence").openCursor(null,"prev").onsuccess=function(x){r=(x=x.target.result)?x.key:0};w.oncomplete=function(){q(null,{doc_count:t,update_seq:r,idb_attachment_format:e._meta.blobSupport?"binary":"base64"})}};e._allDocs=function(q,r){xY(q,
n,r)};e._changes=function(q){return CY(q,e,k,n)};e._close=function(q){n.close();bu.delete(k);q()};e._getRevisionTree=function(q,r){var t=mn(n,["document-store"],"readonly");if(t.error)return r(t.error);t.txn.objectStore("document-store").get(q).onsuccess=function(w){(w=Rr(w.target.result))?r(null,w.rev_tree):r(fi(ln))}};e._doCompaction=function(q,r,t){var w=mn(n,["document-store","by-sequence","attach-store","attach-seq-store"],"readwrite");if(w.error)return t(w.error);var x=w.txn;x.objectStore("document-store").get(q).onsuccess=
function(B){B=Rr(B.target.result);Nr(B.rev_tree,function(L,G,oa,ha,Ha){-1!==r.indexOf(G+"-"+oa)&&(Ha.status="missing")});iM(r,q,x);var D=B.winningRev,F=B.deleted;x.objectStore("document-store").put(ID(B,D,F))};x.onabort=bo(t);x.oncomplete=function(){t()}};e._getLocal=function(q,r){var t=mn(n,["local-store"],"readonly");if(t.error)return r(t.error);q=t.txn.objectStore("local-store").get(q);q.onerror=bo(r);q.onsuccess=function(w){(w=w.target.result)?(delete w._doc_id_rev,r(null,w)):r(fi(ln))}};e._putLocal=
function(q,r,t){"function"===typeof r&&(t=r,r={});delete q._revisions;var w=q._rev,x=q._id;q._rev=w?"0-"+(parseInt(w.split("-")[1],10)+1):"0-1";var B=r.ctx,D;if(!B){B=mn(n,["local-store"],"readwrite");if(B.error)return t(B.error);B=B.txn;B.onerror=bo(t);B.oncomplete=function(){D&&t(null,D)}}var F=B.objectStore("local-store");w?(x=F.get(x),x.onsuccess=function(L){(L=L.target.result)&&L._rev===w?F.put(q).onsuccess=function(){D={ok:!0,id:q._id,rev:q._rev};r.ctx&&t(null,D)}:t(fi($t))}):(x=F.add(q),x.onerror=
function(L){t(fi($t));L.preventDefault();L.stopPropagation()},x.onsuccess=function(){D={ok:!0,id:q._id,rev:q._rev};r.ctx&&t(null,D)})};e._removeLocal=function(q,r,t){"function"===typeof r&&(t=r,r={});var w=r.ctx;if(!w){w=mn(n,["local-store"],"readwrite");if(w.error)return t(w.error);w=w.txn;w.oncomplete=function(){x&&t(null,x)}}var x,B=q._id,D=w.objectStore("local-store");w=D.get(B);w.onerror=bo(t);w.onsuccess=function(F){(F=F.target.result)&&F._rev===q._rev?(D.delete(B),x={ok:!0,id:B,rev:"0-0"},
r.ctx&&t(null,x)):t(fi(ln))}};e._destroy=function(q,r){qw.removeAllListeners(k);(q=MD.get(k))&&q.result&&(q.result.close(),bu.delete(k));q=indexedDB.deleteDatabase(k);q.onsuccess=function(){MD.delete(k);lw&&k in localStorage&&delete localStorage[k];r(null,{ok:!0})};q.onerror=bo(r)};var p=bu.get(k);if(p)return n=p.idb,e._meta=p.global,ao(function(){l(null,e)});p=indexedDB.open(k,5);MD.set(k,p);p.onupgradeneeded=function(q){function r(){var D=x[B-1];B++;D&&D(w,r)}var t=q.target.result;if(1>q.oldVersion)return b(t);
var w=q.currentTarget.transaction;3>q.oldVersion&&t.createObjectStore("local-store",{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0});4>q.oldVersion&&a(t);var x=[c,g,d,f],B=q.oldVersion;r()};p.onsuccess=function(q){function r(){"undefined"!==typeof F&&x&&(e._meta={name:k,instanceId:L,blobSupport:F},bu.set(k,{idb:n,global:e._meta}),l(null,e))}function t(){if("undefined"!==typeof D&&"undefined"!==typeof B){var G=k+"_id";G in B?L=B[G]:B[G]=L=tz();B.docCount=D;w.objectStore("meta-store").put(B)}}
n=q.target.result;n.onversionchange=function(){n.close();bu.delete(k)};n.onabort=function(G){Dm("error","Database has a global failure",G.target.error);n.close();bu.delete(k)};var w=n.transaction(["meta-store","detect-blob-support","document-store"],"readwrite"),x=!1,B,D,F,L;w.objectStore("meta-store").get("meta-store").onsuccess=function(G){B=G.target.result||{id:"meta-store"};t()};zY(w,function(G){D=G;t()});ND||(ND=yY(w));ND.then(function(G){F=G;r()});w.oncomplete=function(){x=!0;r()};w.onabort=
bo(l)};p.onerror=function(q){(q=q.target.error&&q.target.error.message)?-1!==q.indexOf("stored database is a higher version")&&(q=Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):q="Failed to open indexedDB, are you in private browsing mode?";Dm("error",q);l(fi(HD,q))}}function EY(e,h){return new Promise(function(l,b){function c(){f++;e[k++]().then(a,d)}function g(){if(++n===p)q?b(q):l();else for(;f<h&&k<p;)c()}function a(){f--;
g()}function d(r){f--;q=q||r;g()}for(var f=0,k=0,n=0,p=e.length,q;f<h&&k<p;)c()})}function OD(e){var h=(e=e.doc||e.ok)&&e._attachments;h&&Object.keys(h).forEach(function(l){l=h[l];l.data=zD(l.data,l.content_type)})}function Sr(e){return/^_design/.test(e)?"_design/"+encodeURIComponent(e.slice(8)):/^_local/.test(e)?"_local/"+encodeURIComponent(e.slice(7)):encodeURIComponent(e)}function mM(e){return e._attachments&&Object.keys(e._attachments)?Promise.all(Object.keys(e._attachments).map(function(h){var l=
e._attachments[h];if(l.data&&"string"!==typeof l.data)return(new Promise(function(b){AD(l.data,b)})).then(function(b){l.data=b})})):Promise.resolve()}function FY(e,h){if(h.prefix){var l=HL(h.prefix).protocol;l="http"===l||"https"===l}else l=!1;l&&(e=h.name.substr(h.prefix.length),e=h.prefix.replace(/\/?$/,"/")+encodeURIComponent(e));h=HL(e);if(h.user||h.password)h.auth={username:h.user,password:h.password};e=h.path.replace(/(^\/|\/$)/g,"").split("/");h.db=e.pop();-1===h.db.indexOf("%")&&(h.db=encodeURIComponent(h.db));
h.path=e.join("/");return h}function uk(e,h){return vz(e,e.db+"/"+h)}function vz(e,h){return e.protocol+"://"+e.host+(e.port?":"+e.port:"")+"/"+e.path+(e.path?"/":"")+h}function wz(e){return"?"+Object.keys(e).map(function(h){return h+"="+encodeURIComponent(e[h])}).join("&")}function GY(e){var h="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",l=-1!==h.indexOf("msie"),b=-1!==h.indexOf("trident");h=-1!==h.indexOf("edge");e=!("method"in e)||"GET"===e.method;return(l||
b||h)&&e}function PD(e,h){function l(p,q){return hk(p,Wt(function(r){c().then(function(){return q.apply(this,r)}).catch(function(t){r.pop()(t)})})).bind(a)}function b(p,q,r){var t={};q=q||{};q.headers=q.headers||new cu;q.headers.get("Content-Type")||q.headers.set("Content-Type","application/json");q.headers.get("Accept")||q.headers.set("Accept","application/json");return k(p,q).then(function(w){t.ok=w.ok;t.status=w.status;return w.json()}).then(function(w){t.data=w;if(!t.ok){t.data.status=t.status;
w=Yt(t.data);if(r)return r(w);throw w;}Array.isArray(t.data)&&(t.data=t.data.map(function(x){return x.error||x.missing?Yt(x):x}));if(r)r(null,t.data);else return t})}function c(){if(e.skip_setup)return Promise.resolve();if(n)return n;n=b(f).catch(function(p){return p&&p.status&&404===p.status?(tD(404,"PouchDB is just detecting if the remote exists."),b(f,{method:"PUT"})):Promise.reject(p)}).catch(function(p){return p&&p.status&&412===p.status?!0:Promise.reject(p)});n.catch(function(){n=null});return n}
function g(p){return p.split("/").map(encodeURIComponent).join("/")}var a=this,d=FY(e.name,e),f=uk(d,"");e=tk(e);var k=function(p,q){q=q||{};q.headers=q.headers||new cu;q.credentials="include";if(e.auth||d.auth){var r=e.auth||d.auth;r=btoa(unescape(encodeURIComponent(r.username+":"+r.password)));q.headers.set("Authorization","Basic "+r)}var t=e.headers||{};Object.keys(t).forEach(function(w){q.headers.append(w,t[w])});GY(q)&&(p+=(-1===p.indexOf("?")?"?":"&")+"_nonce="+Date.now());return(e.fetch||nM)(p,
q)},n;ao(function(){h(null,a)});a._remote=!0;a.type=function(){return"http"};a.id=l("id",function(p){k(vz(d,"")).then(function(q){return q.json()}).catch(function(){return{}}).then(function(q){q=q&&q.uuid?q.uuid+d.db:uk(d,"");p(null,q)})});a.compact=l("compact",function(p,q){"function"===typeof p&&(q=p,p={});p=tk(p);b(uk(d,"_compact"),{method:"POST"}).then(function(){function r(){a.info(function(t,w){w&&!w.compact_running?q(null,{ok:!0}):setTimeout(r,p.interval||200)})}r()})});a.bulkGet=hk("bulkGet",
function(p,q){function r(D){var F={};p.revs&&(F.revs=!0);p.attachments&&(F.attachments=!0);p.latest&&(F.latest=!0);b(uk(d,"_bulk_get"+wz(F)),{method:"POST",body:JSON.stringify({docs:p.docs})}).then(function(L){p.attachments&&p.binary&&L.data.results.forEach(function(G){G.docs.forEach(OD)});D(null,L.data)}).catch(D)}function t(){function D(Ha){return function(Va,hc){G[Ha]=hc.results;++L===F&&q(null,{results:qz(G)})}}for(var F=Math.ceil(p.docs.length/50),L=0,G=Array(F),oa=0;oa<F;oa++){var ha=kw(p,["revs",
"attachments","binary","latest"]);ha.docs=p.docs.slice(50*oa,Math.min(p.docs.length,50*(oa+1)));CL(w,ha,D(oa))}}var w=this,x=vz(d,""),B=QD[x];"boolean"!==typeof B?r(function(D,F){D?(QD[x]=!1,tD(D.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),t()):(QD[x]=!0,q(null,F))}):B?r(q):t()});a._info=function(p){c().then(function(){return k(uk(d,""))}).then(function(q){return q.json()}).then(function(q){q.host=uk(d,"");p(null,q)}).catch(p)};a.fetch=function(p,q){return c().then(function(){var r=
"/"===p.substring(0,1)?vz(d,p.substring(1)):uk(d,p);return k(r,q)})};a.get=l("get",function(p,q,r){function t(B){function D(G){var oa=F[G];G=Sr(B._id)+"/"+g(G)+"?rev="+B._rev;return k(uk(d,G)).then(function(ha){return"buffer"in ha?ha.buffer():ha.blob()}).then(function(ha){if(q.binary){var Ha=Object.getOwnPropertyDescriptor(ha.__proto__,"type");if(!Ha||Ha.set)ha.type=oa.content_type;return ha}return new Promise(function(Va){AD(ha,Va)})}).then(function(ha){delete oa.stub;delete oa.length;oa.data=ha})}
var F=B._attachments,L=F&&Object.keys(F);if(F&&L.length)return L=L.map(function(G){return function(){return D(G)}}),EY(L,5)}function w(B){return Array.isArray(B)?Promise.all(B.map(function(D){if(D.ok)return t(D.ok)})):t(B)}"function"===typeof q&&(r=q,q={});q=tk(q);var x={};q.revs&&(x.revs=!0);q.revs_info&&(x.revs_info=!0);q.latest&&(x.latest=!0);q.open_revs&&("all"!==q.open_revs&&(q.open_revs=JSON.stringify(q.open_revs)),x.open_revs=q.open_revs);q.rev&&(x.rev=q.rev);q.conflicts&&(x.conflicts=q.conflicts);
q.update_seq&&(x.update_seq=q.update_seq);p=Sr(p);x=uk(d,p+wz(x));b(x).then(function(B){return Promise.resolve().then(function(){if(q.attachments)return w(B.data)}).then(function(){r(null,B.data)})}).catch(function(B){B.docId=p;r(B)})});a.remove=l("remove",function(p,q,r,t){"string"===typeof q?(p={_id:p,_rev:q},"function"===typeof r&&(t=r,r={})):"function"===typeof q?(t=q,r={}):(t=r,r=q);q=p._rev||r.rev;q=uk(d,Sr(p._id))+"?rev="+q;b(q,{method:"DELETE"},t).catch(t)});a.getAttachment=l("getAttachment",
function(p,q,r,t){"function"===typeof r&&(t=r,r={});r=r.rev?"?rev="+r.rev:"";p=uk(d,Sr(p))+"/"+g(q)+r;var w;k(p,{method:"GET"}).then(function(x){w=x.headers.get("content-type");if(x.ok)return"undefined"===typeof xz||xz.browser||"function"!==typeof x.buffer?x.blob():x.buffer();throw x;}).then(function(x){"undefined"===typeof xz||xz.browser||(x.type=w);t(null,x)}).catch(function(x){t(x)})});a.removeAttachment=l("removeAttachment",function(p,q,r,t){p=uk(d,Sr(p)+"/"+g(q))+"?rev="+r;b(p,{method:"DELETE"},
t).catch(t)});a.putAttachment=l("putAttachment",function(p,q,r,t,w,x){"function"===typeof w&&(x=w,w=t,t=r,r=null);p=Sr(p)+"/"+g(q);p=uk(d,p);r&&(p+="?rev="+r);if("string"===typeof t){try{var B=atob(t)}catch(D){return x(fi(eM,"Attachment is not a valid base64 string"))}t=B?yD(B,w):""}b(p,{headers:new cu({"Content-Type":w}),method:"PUT",body:t},x).catch(x)});a._bulkDocs=function(p,q,r){p.new_edits=q.new_edits;c().then(function(){return Promise.all(p.docs.map(mM))}).then(function(){return b(uk(d,"_bulk_docs"),
{method:"POST",body:JSON.stringify(p)},r)}).catch(r)};a._put=function(p,q,r){c().then(function(){return mM(p)}).then(function(){return b(uk(d,Sr(p._id)),{method:"PUT",body:JSON.stringify(p)})}).then(function(t){r(null,t.data)}).catch(function(t){t.docId=p&&p._id;r(t)})};a.allDocs=l("allDocs",function(p,q){"function"===typeof p&&(q=p,p={});p=tk(p);var r={},t="GET";p.conflicts&&(r.conflicts=!0);p.update_seq&&(r.update_seq=!0);p.descending&&(r.descending=!0);p.include_docs&&(r.include_docs=!0);p.attachments&&
(r.attachments=!0);p.key&&(r.key=JSON.stringify(p.key));p.start_key&&(p.startkey=p.start_key);p.startkey&&(r.startkey=JSON.stringify(p.startkey));p.end_key&&(p.endkey=p.end_key);p.endkey&&(r.endkey=JSON.stringify(p.endkey));"undefined"!==typeof p.inclusive_end&&(r.inclusive_end=!!p.inclusive_end);"undefined"!==typeof p.limit&&(r.limit=p.limit);"undefined"!==typeof p.skip&&(r.skip=p.skip);r=wz(r);if("undefined"!==typeof p.keys){t="POST";var w={keys:p.keys}}b(uk(d,"_all_docs"+r),{method:t,body:JSON.stringify(w)}).then(function(x){p.include_docs&&
p.attachments&&p.binary&&x.data.rows.forEach(OD);q(null,x.data)}).catch(q)});a._changes=function(p){var q="batch_size"in p?p.batch_size:25;p=tk(p);!p.continuous||"heartbeat"in p||(p.heartbeat=1E4);var r="timeout"in p?p.timeout:3E4;"timeout"in p&&p.timeout&&5E3>r-p.timeout&&(r=p.timeout+5E3);"heartbeat"in p&&p.heartbeat&&5E3>r-p.heartbeat&&(r=p.heartbeat+5E3);var t={};"timeout"in p&&p.timeout&&(t.timeout=p.timeout);var w="undefined"!==typeof p.limit?p.limit:!1,x=w;p.style&&(t.style=p.style);if(p.include_docs||
p.filter&&"function"===typeof p.filter)t.include_docs=!0;p.attachments&&(t.attachments=!0);p.continuous&&(t.feed="longpoll");p.seq_interval&&(t.seq_interval=p.seq_interval);p.conflicts&&(t.conflicts=!0);p.descending&&(t.descending=!0);p.update_seq&&(t.update_seq=!0);"heartbeat"in p&&p.heartbeat&&(t.heartbeat=p.heartbeat);p.filter&&"string"===typeof p.filter&&(t.filter=p.filter);p.view&&"string"===typeof p.view&&(t.filter="_view",t.view=p.view);if(p.query_params&&"object"===typeof p.query_params)for(var B in p.query_params)p.query_params.hasOwnProperty(B)&&
(t[B]=p.query_params[B]);var D="GET";if(p.doc_ids){t.filter="_doc_ids";D="POST";var F={doc_ids:p.doc_ids}}else p.selector&&(t.filter="_selector",D="POST",F={selector:p.selector});var L=new HY,G,oa=function(Va,hc){if(!p.aborted){t.since=Va;"object"===typeof t.since&&(t.since=JSON.stringify(t.since));p.descending?w&&(t.limit=x):t.limit=!w||x>q?q:x;var qc=uk(d,"_changes"+wz(t)),jc={signal:L.signal,method:D,body:JSON.stringify(F)};G=Va;p.aborted||c().then(function(){return b(qc,jc,hc)}).catch(hc)}},ha=
{results:[]},Ha=function(Va,hc){if(!p.aborted){var qc=0;if(hc&&hc.results){qc=hc.results.length;ha.last_seq=hc.last_seq;var jc=null,Ya=null;"number"===typeof hc.pending&&(jc=hc.pending);if("string"===typeof ha.last_seq||"number"===typeof ha.last_seq)Ya=ha.last_seq;hc.results=hc.results.filter(function(xa){x--;var tc=uD(p)(xa);tc&&(p.include_docs&&p.attachments&&p.binary&&OD(xa),p.return_docs&&ha.results.push(xa),p.onChange(xa,jc,Ya));return tc})}else if(Va){p.aborted=!0;p.complete(Va);return}hc&&
hc.last_seq&&(G=hc.last_seq);Va=w&&0>=x||hc&&qc<q||p.descending;(!p.continuous||w&&0>=x)&&Va?p.complete(null,ha):ao(function(){oa(G,Ha)})}};oa(p.since||0,Ha);return{cancel:function(){p.aborted=!0;L.abort()}}};a.revsDiff=l("revsDiff",function(p,q,r){"function"===typeof q&&(r=q);b(uk(d,"_revs_diff"),{method:"POST",body:JSON.stringify(p)},r).catch(r)});a._close=function(p){p()};a._destroy=function(p,q){b(uk(d,""),{method:"DELETE"}).then(function(r){q(null,r)}).catch(function(r){404===r.status?q(null,
{ok:!0}):q(r)})}}function Tr(e){this.status=400;this.name="query_parse_error";this.message=e;this.error=!0;try{Error.captureStackTrace(this,Tr)}catch(h){}}function yz(e){this.status=404;this.name="not_found";this.message=e;this.error=!0;try{Error.captureStackTrace(this,yz)}catch(h){}}function zz(e){this.status=500;this.name="invalid_value";this.message=e;this.error=!0;try{Error.captureStackTrace(this,zz)}catch(h){}}function oM(e,h){h&&e.then(function(l){ao(function(){h(null,l)})},function(l){ao(function(){h(l)})});
return e}function IY(e){return Wt(function(h){var l=h.pop();h=e.apply(this,h);"function"===typeof l&&oM(h,l);return h})}function JY(e,h){return e.then(function(l){return h().then(function(){return l})},function(l){return h().then(function(){throw l;})})}function RD(e,h){return function(){var l=arguments,b=this;return e.add(function(){return h.apply(b,l)})}}function pM(e){e=new rw(e);var h=Array(e.size),l=-1;e.forEach(function(b){h[++l]=b});return h}function SD(e){var h=Array(e.size),l=-1;e.forEach(function(b,
c){h[++l]=c});return h}function qM(e){return new zz("builtin "+e+" function requires map values to be numbers or number arrays")}function TD(e){for(var h=0,l=0,b=e.length;l<b;l++){var c=e[l];if("number"!==typeof c)if(Array.isArray(c)){h="number"===typeof h?[h]:h;for(var g=0,a=c.length;g<a;g++){var d=c[g];if("number"!==typeof d)throw qM("_sum");"undefined"===typeof h[g]?h.push(d):h[g]+=d}}else throw qM("_sum");else"number"===typeof h?h+=c:h[0]+=c}return h}function rM(e,h){return wD("return ("+e.replace(/;\s*$/,
"")+");",{emit:h,sum:TD,log:KY,isArray:LY,toJSON:MY})}function sw(){this.promise=new Promise(function(e){e()})}function sM(e){if(!e)return"undefined";switch(typeof e){case "function":return e.toString();case "string":return e.toString();default:return JSON.stringify(e)}}function NY(e,h){return sM(e)+sM(h)+"undefined"}function tM(e,h,l,b,c,g){var a=NY(l,b);if(!c){var d=e._cachedViews=e._cachedViews||{};if(d[a])return d[a]}var f=e.info().then(function(k){var n=k.db_name+"-mrview-"+(c?"temp":sz.hash(a));
return rz(e,"_local/"+g,function(p){p.views=p.views||{};var q=h;-1===q.indexOf("/")&&(q=h+"/"+h);q=p.views[q]=p.views[q]||{};if(!q[n])return q[n]=!0,p}).then(function(){return e.registerDependentDatabase(n).then(function(p){p=p.db;p.auto_compaction=!0;var q={name:n,db:p,sourceDB:e,adapter:e.adapter,mapFun:l,reduceFun:b};return q.db.get("_local/lastSeq").catch(function(r){if(404!==r.status)throw r;}).then(function(r){q.seq=r?r.seq:0;if(d)q.db.once("destroyed",function(){delete d[a]});return q})})})});
d&&(d[a]=f);return f}function UD(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function OY(e){return 1===e.length&&/^1-/.test(e[0].rev)}function uM(e,h){try{e.emit("error",h)}catch(l){Dm("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),Dm("error",h)}}function vM(e,h){var l=Object.keys(h._attachments);return Promise.all(l.map(function(b){return e.getAttachment(h._id,
b,{rev:h._rev})}))}function PY(e,h,l){var b=$n(h)&&!$n(e),c=Object.keys(l._attachments);return b?e.get(l._id).then(function(g){return Promise.all(c.map(function(a){return g._attachments&&g._attachments[a]&&g._attachments[a].digest===l._attachments[a].digest?e.getAttachment(g._id,a):h.getAttachment(l._id,a)}))}).catch(function(g){if(404!==g.status)throw g;return vM(h,l)}):vM(h,l)}function QY(e){var h=[];Object.keys(e).forEach(function(l){e[l].missing.forEach(function(b){h.push({id:l,rev:b})})});return{docs:h,
revs:!0,latest:!0}}function RY(e,h,l,b){function c(d){return e.allDocs({keys:d,include_docs:!0,conflicts:!0}).then(function(f){if(b.cancelled)throw Error("cancelled");f.rows.forEach(function(k){var n;(n=k.deleted||!k.doc||!/^1-/.test(k.value.rev))||(n=k.doc,n=n._attachments&&0<Object.keys(n._attachments).length);n||(n=k.doc,n=n._conflicts&&0<n._conflicts.length);n||(k.doc._conflicts&&delete k.doc._conflicts,g.push(k.doc),delete l[k.id])})})}l=tk(l);var g=[],a=!0;return Promise.resolve().then(function(){var d=
Object.keys(l).filter(function(f){f=l[f].missing;return 1===f.length&&/^1-/.test(f[0])});if(0<d.length)return c(d)}).then(function(){var d=QY(l);if(d.docs.length)return e.bulkGet(d).then(function(f){if(b.cancelled)throw Error("cancelled");return Promise.all(f.results.map(function(k){return Promise.all(k.docs.map(function(n){var p=n.ok;n.error&&(a=!1);return p&&p._attachments?PY(h,e,p).then(function(q){var r=Object.keys(p._attachments);q.forEach(function(t,w){w=p._attachments[r[w]];delete w.stub;delete w.length;
w.data=t});return p}):p}))})).then(function(k){g=g.concat(qz(k).filter(Boolean))})})}).then(function(){return{ok:a,docs:g}})}function VD(e,h,l,b,c){return e.get(h).catch(function(g){if(404===g.status)return"http"!==e.adapter&&"https"!==e.adapter||tD(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:b,_id:h,history:[],replicator:"pouchdb",version:1};throw g;}).then(function(g){if(!c.cancelled&&g.last_seq!==l)return g.history=(g.history||[]).filter(function(a){return a.session_id!==
b}),g.history.unshift({last_seq:l,session_id:b}),g.history=g.history.slice(0,5),g.version=1,g.replicator="pouchdb",g.session_id=b,g.last_seq=l,e.put(g).catch(function(a){if(409===a.status)return VD(e,h,l,b,c);throw a;})})}function tw(e,h,l,b,c){this.src=e;this.target=h;this.id=l;this.returnValue=b;this.opts=c||{}}function wM(e,h){var l=e[0],b=e.slice(1),c=h[0],g=h.slice(1);return l&&0!==h.length?WD(l.session_id,h)?{last_seq:l.last_seq,history:e}:WD(c.session_id,b)?{last_seq:c.last_seq,history:g}:
wM(b,g):{last_seq:0,history:[]}}function WD(e,h){var l=h[0],b=h.slice(1);return e&&0!==h.length?e===l.session_id?!0:WD(e,b):!1}function xM(e){return"number"===typeof e.status&&4===Math.floor(e.status/100)}function SY(e,h,l,b){if(!1===e.retry)h.emit("error",l),h.removeAllListeners();else{"function"!==typeof e.back_off_function&&(e.back_off_function=BX);h.emit("requestError",l);if("active"===h.state||"pending"===h.state){h.emit("paused",l);h.state="stopped";var c=function(){e.current_back_off=0};h.once("paused",
function(){h.removeListener("active",c)});h.once("active",c)}e.current_back_off=e.current_back_off||0;e.current_back_off=e.back_off_function(e.current_back_off);setTimeout(b,e.current_back_off)}}function TY(e){return Object.keys(e).sort(Hk).reduce(function(h,l){h[l]=e[l];return h},{})}function UY(e,h,l){var b=l.doc_ids?l.doc_ids.sort(Hk):"",c=l.filter?l.filter.toString():"",g="",a="",d="";l.selector&&(d=JSON.stringify(l.selector));l.filter&&l.query_params&&(g=JSON.stringify(TY(l.query_params)));l.filter&&
"_view"===l.filter&&(a=l.view.toString());return Promise.all([e.id(),h.id()]).then(function(f){var k=f[0]+f[1]+c+a+g+b+d;return new Promise(function(n){BD(k,n)})}).then(function(f){f=f.replace(/\//g,".").replace(/\+/g,"_");return"_local/"+f})}function yM(e,h,l,b,c){function g(){return Zb?Promise.resolve():UY(e,h,l).then(function(la){wc=la;Zb=new tw(e,h,wc,b,!1===l.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===l.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:
"target"===l.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0})})}function a(){$c=[];if(0!==G.docs.length){var la=G.docs;return h.bulkDocs({docs:la,new_edits:!1},{timeout:l.timeout}).then(function($a){if(b.cancelled)throw r(),Error("cancelled");var dd=Object.create(null);$a.forEach(function(Kd){Kd.error&&(dd[Kd.id]=Kd)});$a=Object.keys(dd).length;c.doc_write_failures+=$a;c.docs_written+=la.length-$a;la.forEach(function(Kd){var ra=dd[Kd._id];
if(ra)if(c.errors.push(ra),Kd=(ra.name||"").toLowerCase(),"unauthorized"===Kd||"forbidden"===Kd)b.emit("denied",tk(ra));else throw ra;else $c.push(Kd)})},function($a){c.doc_write_failures+=la.length;throw $a;})}}function d(){if(G.error)throw Error("There was a problem getting docs.");c.last_seq=hc=G.seq;var la=tk(c);$c.length&&(la.docs=$c,"number"===typeof G.pending&&(la.pending=G.pending,delete G.pending),b.emit("change",la));ha=!0;return Zb.writeCheckpoint(G.seq,Oa).then(function(){ha=!1;if(b.cancelled)throw r(),
Error("cancelled");G=void 0;B()}).catch(function($a){F($a);throw $a;})}function f(){var la={};G.changes.forEach(function($a){"_user/"!==$a.id&&(la[$a.id]=$a.changes.map(function(dd){return dd.rev}))});return h.revsDiff(la).then(function($a){if(b.cancelled)throw r(),Error("cancelled");G.diffs=$a})}function k(){return RY(e,h,G.diffs,b).then(function(la){G.error=!la.ok;la.docs.forEach(function($a){delete G.diffs[$a._id];c.docs_read++;G.docs.push($a)})})}function n(){b.cancelled||G||(0===L.length?p(!0):
(G=L.shift(),f().then(k).then(a).then(d).then(n).catch(function(la){q("batch processing terminated with error",la)})))}function p(la){if(0===oa.changes.length){if(0===L.length&&!G){if(qc&&md.live||Ha)b.state="pending",b.emit("paused");Ha&&r()}}else if(la||Ha||oa.changes.length>=jc){L.push(oa);oa={seq:0,changes:[],docs:[]};if("pending"===b.state||"stopped"===b.state)b.state="active",b.emit("active");n()}}function q(la,$a){Va||($a.message||($a.message=la),c.ok=!1,c.status="aborting",L=[],oa={seq:0,
changes:[],docs:[]},r($a))}function r(la){if(!Va){if(b.cancelled&&(c.status="cancelled",ha))return;c.status=c.status||"complete";c.end_time=(new Date).toISOString();c.last_seq=hc;Va=!0;if(la){la=fi(la);la.result=c;var $a=(la.name||"").toLowerCase();"unauthorized"===$a||"forbidden"===$a?(b.emit("error",la),b.removeAllListeners()):SY(l,b,la,function(){yM(e,h,l,b)})}else b.emit("complete",c),b.removeAllListeners()}}function t(la,$a,dd){if(b.cancelled)return r();"number"===typeof $a&&(oa.pending=$a);
uD(l)(la)&&(oa.seq=la.seq||dd,oa.changes.push(la),ao(function(){p(0===L.length&&md.live)}))}function w(la){xa=!1;if(b.cancelled)return r();if(0<la.results.length)md.since=la.results[la.results.length-1].seq,B(),p(!0);else{var $a=function(){qc?(md.live=!0,B()):Ha=!0;p(!0)};G||0!==la.results.length?$a():(ha=!0,Zb.writeCheckpoint(la.last_seq,Oa).then(function(){ha=!1;c.last_seq=hc=la.last_seq;$a()}).catch(F))}}function x(la){xa=!1;if(b.cancelled)return r();q("changes rejected",la)}function B(){function la(){dd.cancel()}
function $a(){b.removeListener("cancel",la)}if(!xa&&!Ha&&L.length<Ya){xa=!0;b._changes&&(b.removeListener("cancel",b._abortChanges),b._changes.cancel());b.once("cancel",la);var dd=e.changes(md).on("change",t);dd.then($a,$a);dd.then(w).catch(x);l.retry&&(b._changes=dd,b._abortChanges=la)}}function D(){g().then(function(){if(b.cancelled)r();else return Zb.getCheckpoint().then(function(la){hc=la;md={since:hc,limit:jc,batch_size:jc,style:"all_docs",doc_ids:tc,selector:Qb,return_docs:!0};l.filter&&("string"!==
typeof l.filter?md.include_docs=!0:md.filter=l.filter);"heartbeat"in l&&(md.heartbeat=l.heartbeat);"timeout"in l&&(md.timeout=l.timeout);l.query_params&&(md.query_params=l.query_params);l.view&&(md.view=l.view);B()})}).catch(function(la){q("getCheckpoint rejected with ",la)})}function F(la){ha=!1;q("writeCheckpoint completed with error",la)}var L=[],G,oa={seq:0,changes:[],docs:[]},ha=!1,Ha=!1,Va=!1,hc=0,qc=l.continuous||l.live||!1,jc=l.batch_size||100,Ya=l.batches_limit||10,xa=!1,tc=l.doc_ids,Qb=
l.selector,wc,Zb,$c=[],Oa=tz();c=c||{ok:!0,start_time:(new Date).toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var md={};b.ready(e,h);b.cancelled?r():(b._addedListeners||(b.once("cancel",r),"function"===typeof l.complete&&(b.once("error",l.complete),b.once("complete",function(la){l.complete(null,la)})),b._addedListeners=!0),"undefined"===typeof l.since?D():g().then(function(){ha=!0;return Zb.writeCheckpoint(l.since,Oa)}).then(function(){ha=!1;b.cancelled?r():(hc=l.since,
D())}).catch(F))}function Az(){Hl.EventEmitter.call(this);this.cancelled=!1;this.state="pending";var e=this,h=new Promise(function(l,b){e.once("complete",l);e.once("error",b)});e.then=function(l,b){return h.then(l,b)};e.catch=function(l){return h.catch(l)};e.catch(function(){})}function Bz(e,h){var l=h.PouchConstructor;return"string"===typeof e?new l(e,h):e}function XD(e,h,l,b){"function"===typeof l&&(b=l,l={});"undefined"===typeof l&&(l={});if(l.doc_ids&&!Array.isArray(l.doc_ids))throw fi(pz,"`doc_ids` filter parameter is not a list.");
l.complete=b;l=tk(l);l.continuous=l.continuous||l.live;l.retry="retry"in l?l.retry:!1;l.PouchConstructor=l.PouchConstructor||this;b=new Az(l);e=Bz(e,l);h=Bz(h,l);yM(e,h,l,b);return b}function VY(e,h,l,b){"function"===typeof l&&(b=l,l={});"undefined"===typeof l&&(l={});l=tk(l);l.PouchConstructor=l.PouchConstructor||this;e=Bz(e,l);h=Bz(h,l);return new YD(e,h,l,b)}function YD(e,h,l,b){function c(F){t.emit("change",{direction:"pull",change:F})}function g(F){t.emit("change",{direction:"push",change:F})}
function a(F){t.emit("denied",{direction:"push",doc:F})}function d(F){t.emit("denied",{direction:"pull",doc:F})}function f(){t.pushPaused=!0;t.pullPaused&&t.emit("paused")}function k(){t.pullPaused=!0;t.pushPaused&&t.emit("paused")}function n(){t.pushPaused=!1;t.pullPaused&&t.emit("active",{direction:"push"})}function p(){t.pullPaused=!1;t.pushPaused&&t.emit("active",{direction:"pull"})}function q(F){return function(L,G){var oa="denied"===L&&(G===d||G===a),ha="paused"===L&&(G===k||G===f),Ha="active"===
L&&(G===p||G===n);if("change"===L&&(G===c||G===g)||oa||ha||Ha)L in B||(B[L]={}),B[L][F]=!0,2===Object.keys(B[L]).length&&t.removeAllListeners(L)}}function r(F,L,G){if(-1==F.listeners(L).indexOf(G))F.on(L,G)}var t=this;this.canceled=!1;var w=l.push?au({},l,l.push):l,x=l.pull?au({},l,l.pull):l;this.push=XD(e,h,w);this.pull=XD(h,e,x);this.pullPaused=this.pushPaused=!0;var B={};l.live&&(this.push.on("complete",t.pull.cancel.bind(t.pull)),this.pull.on("complete",t.push.cancel.bind(t.push)));this.on("newListener",
function(F){"change"===F?(r(t.pull,"change",c),r(t.push,"change",g)):"denied"===F?(r(t.pull,"denied",d),r(t.push,"denied",a)):"active"===F?(r(t.pull,"active",p),r(t.push,"active",n)):"paused"===F&&(r(t.pull,"paused",k),r(t.push,"paused",f))});this.on("removeListener",function(F){"change"===F?(t.pull.removeListener("change",c),t.push.removeListener("change",g)):"denied"===F?(t.pull.removeListener("denied",d),t.push.removeListener("denied",a)):"active"===F?(t.pull.removeListener("active",p),t.push.removeListener("active",
n)):"paused"===F&&(t.pull.removeListener("paused",k),t.push.removeListener("paused",f))});this.pull.on("removeListener",q("pull"));this.push.on("removeListener",q("push"));var D=Promise.all([this.push,this.pull]).then(function(F){F={push:F[0],pull:F[1]};t.emit("complete",F);b&&b(null,F);t.removeAllListeners();return F},function(F){t.cancel();b?b(F):t.emit("error",F);t.removeAllListeners();if(b)throw F;});this.then=function(F,L){return D.then(F,L)};this.catch=function(F){return D.catch(F)}}function bq(){this._store=
{}}function uw(e){this._store=new bq;if(e&&Array.isArray(e))for(var h=0,l=e.length;h<l;h++)this.add(e[h])}function hj(e,h,l){Error.call(this,l);this.status=e;this.name=h;this.message=l;this.error=!0}function zM(e,h){e=e||[];h=h||{};try{return new Blob(e,h)}catch(c){if("TypeError"!==c.name)throw c;for(var l=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),b=0;b<e.length;b+=1)l.append(e[b]);
return l.getBlob(h.type)}}function AM(e){for(var h=e.length,l=new ArrayBuffer(h),b=new Uint8Array(l),c=0;c<h;c++)b[c]=e.charCodeAt(c);return l}function BM(e,h){return zM([AM(e)],{type:h})}function CM(e,h){var l=new FileReader,b="function"===typeof l.readAsBinaryString;l.onloadend=function(c){var g=c.target.result||"";if(b)return h(g);c="";g=new Uint8Array(g);for(var a=g.byteLength,d=0;d<a;d++)c+=String.fromCharCode(g[d]);h(c)};b?l.readAsBinaryString(e):l.readAsArrayBuffer(e)}function DM(e,h){CM(e,
function(l){h(l)})}function WY(e,h,l){return e.webkitSlice?e.webkitSlice(h,l):e.slice(h,l)}function XY(e,h,l,b,c){if(0<l||b<h.size)h=WY(h,l,b);EM.readAsArrayBuffer(h,function(g){e.append(g);c()})}function YY(e,h,l,b,c){if(0<l||b<h.length)h=h.substring(l,b);e.appendBinary(h);c()}function Cz(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}function vw(e){var h;if(!e||"object"!==typeof e)return e;if(Array.isArray(e)){var l=[];var b=0;for(h=e.length;b<h;b++)l[b]=vw(e[b]);return l}if(e instanceof
Date)return e.toISOString();if("undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!==typeof Blob&&e instanceof Blob)return e instanceof ArrayBuffer?"function"===typeof e.slice?e=e.slice(0):(b=new ArrayBuffer(e.byteLength),l=new Uint8Array(b),e=new Uint8Array(e),l.set(e),e=b):(b=e.size,l=e.type,e="function"===typeof e.slice?e.slice(0,b,l):e.webkitSlice(0,b,l)),e;l=Object.getPrototypeOf(e);null===l?l=!0:(l=l.constructor,l="function"==typeof l&&l instanceof l&&FM.call(l)==ZY);if(!l)return e;
l={};for(b in e)Object.prototype.hasOwnProperty.call(e,b)&&(h=vw(e[b]),"undefined"!==typeof h&&(l[b]=h));return l}function GM(e){var h=!1;return ZD(function(l){if(h)throw Error("once called more than once");h=!0;e.apply(this,l)})}function HM(e){return ZD(function(h){h=vw(h);var l=this,b="function"===typeof h[h.length-1]?h.pop():!1,c=new Promise(function(g,a){var d;try{var f=GM(function(k,n){k?a(k):g(n)});h.push(f);(d=e.apply(l,h))&&"function"===typeof d.then&&g(d)}catch(k){a(k)}});b&&c.then(function(g){b(null,
g)},b);return c})}function $Y(e,h,l){if(e.constructor.listeners("debug").length){for(var b=["api",e.name,h],c=0;c<l.length-1;c++)b.push(l[c]);e.constructor.emit("debug",b);var g=l[l.length-1];l[l.length-1]=function(a,d){var f=["api",e.name,h];f=f.concat(a?["error",a]:["success",d]);e.constructor.emit("debug",f);g(a,d)}}}function $D(e,h){for(var l={},b=0,c=h.length;b<c;b++){var g=h[b];g in e&&(l[g]=e[g])}return l}function IM(e){return e}function aZ(e){return[{ok:e}]}function bZ(e){Dz&&addEventListener("storage",
function(h){e.emit(h.key)})}function du(){Ez.EventEmitter.call(this);this._listeners={};bZ(this)}function aE(e){if("undefined"!==typeof console&&"function"===typeof console[e]){var h=Array.prototype.slice.call(arguments,1);console[e].apply(console,h)}}function JM(e){if(!e)return null;var h=e.split("/");return 2===h.length?h:1===h.length?[e,e]:null}function KM(e,h,l){return new Promise(function(b,c){e.get(h,function(g,a){if(g){if(404!==g.status)return c(g);a={}}g=a._rev;a=l(a);if(!a)return b({updated:!1,
rev:g});a._id=h;a._rev=g;b(cZ(e,a,l))})})}function cZ(e,h,l){return e.put(h).then(function(b){return{updated:!0,rev:b.rev}},function(b){if(409!==b.status)throw b;return KM(e,h._id,l)})}function bE(){throw Error("setTimeout has not been defined");}function cE(){throw Error("clearTimeout has not been defined");}function LM(e){if(cq===setTimeout)return setTimeout(e,0);if((cq===bE||!cq)&&setTimeout)return cq=setTimeout,setTimeout(e,0);try{return cq(e,0)}catch(h){try{return cq.call(null,e,0)}catch(l){return cq.call(this||
eu,e,0)}}}function dZ(){fu&&Ur&&(fu=!1,Ur.length?dp=Ur.concat(dp):Fz=-1,dp.length&&MM())}function MM(){if(!fu){var e=LM(dZ);fu=!0;for(var h=dp.length;h;){Ur=dp;for(dp=[];++Fz<h;)Ur&&Ur[Fz].run();Fz=-1;h=dp.length}Ur=null;fu=!1;(function(l){if(dq===clearTimeout)return clearTimeout(l);if((dq===cE||!dq)&&clearTimeout)return dq=clearTimeout,clearTimeout(l);try{dq(l)}catch(b){try{return dq.call(null,l)}catch(c){return dq.call(this||eu,l)}}})(e)}}function NM(e,h){(this||eu).fun=e;(this||eu).array=h}function ep(){}
function Vr(e){return e.call.bind(e)}function ww(e,h){if("object"!=Jc(e))return!1;try{return h(e),!0}catch(l){return!1}}function OM(e){return Il&&Xl?void 0!==Em(e):PM(e)||QM(e)||RM(e)||SM(e)||TM(e)||UM(e)||VM(e)||WM(e)||XM(e)||YM(e)||ZM(e)}function PM(e){return Il&&Xl?"Uint8Array"===Em(e):"[object Uint8Array]"===Jj(e)||eZ(e)&&void 0!==e.buffer}function QM(e){return Il&&Xl?"Uint8ClampedArray"===Em(e):"[object Uint8ClampedArray]"===Jj(e)}function RM(e){return Il&&Xl?"Uint16Array"===Em(e):"[object Uint16Array]"===
Jj(e)}function SM(e){return Il&&Xl?"Uint32Array"===Em(e):"[object Uint32Array]"===Jj(e)}function TM(e){return Il&&Xl?"Int8Array"===Em(e):"[object Int8Array]"===Jj(e)}function UM(e){return Il&&Xl?"Int16Array"===Em(e):"[object Int16Array]"===Jj(e)}function VM(e){return Il&&Xl?"Int32Array"===Em(e):"[object Int32Array]"===Jj(e)}function WM(e){return Il&&Xl?"Float32Array"===Em(e):"[object Float32Array]"===Jj(e)}function XM(e){return Il&&Xl?"Float64Array"===Em(e):"[object Float64Array]"===Jj(e)}function YM(e){return Il&&
Xl?"BigInt64Array"===Em(e):"[object BigInt64Array]"===Jj(e)}function ZM(e){return Il&&Xl?"BigUint64Array"===Em(e):"[object BigUint64Array]"===Jj(e)}function Gz(e){return"[object Map]"===Jj(e)}function Hz(e){return"[object Set]"===Jj(e)}function Iz(e){return"[object WeakMap]"===Jj(e)}function dE(e){return"[object WeakSet]"===Jj(e)}function Jz(e){return"[object ArrayBuffer]"===Jj(e)}function $M(e){return"undefined"!=typeof ArrayBuffer&&(Jz.working?Jz(e):e instanceof ArrayBuffer)}function Kz(e){return"[object DataView]"===
Jj(e)}function aN(e){return"undefined"!=typeof DataView&&(Kz.working?Kz(e):e instanceof DataView)}function Lz(e){return"[object SharedArrayBuffer]"===Jj(e)}function bN(e){return"undefined"!=typeof SharedArrayBuffer&&(Lz.working?Lz(e):e instanceof SharedArrayBuffer)}function cN(e){return ww(e,fZ)}function dN(e){return ww(e,gZ)}function eN(e){return ww(e,hZ)}function fN(e){return gN&&ww(e,iZ)}function hN(e){return eE&&ww(e,jZ)}function eq(e,h){var l={seen:[],stylize:kZ};return 3<=arguments.length&&
(l.depth=arguments[2]),4<=arguments.length&&(l.colors=arguments[3]),fE(h)?l.showHidden=h:h&&tf._extend(l,h),Wr(l.showHidden)&&(l.showHidden=!1),Wr(l.depth)&&(l.depth=2),Wr(l.colors)&&(l.colors=!1),Wr(l.customInspect)&&(l.customInspect=!0),l.colors&&(l.stylize=lZ),Mz(l,e,l.depth)}function lZ(e,h){return(h=eq.styles[h])?"\u001b["+eq.colors[h][0]+"m"+e+"\u001b["+eq.colors[h][1]+"m":e}function kZ(e,h){return e}function Mz(e,h,l){if(e.customInspect&&h&&Nz(h.inspect)&&h.inspect!==tf.inspect&&(!h.constructor||
h.constructor.prototype!==h)){var b=h.inspect(l,e);return Oz(b)||(b=Mz(e,b,l)),b}var c=function(k,n){if(Wr(n))return k.stylize("undefined","undefined");if(Oz(n))return n="'"+JSON.stringify(n).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",k.stylize(n,"string");if(iN(n))return k.stylize(""+n,"number");if(fE(n))return k.stylize(""+n,"boolean");if(null===n)return k.stylize("null","null")}(e,h);if(c)return c;c=Object.keys(h);var g=function(k){var n={};return k.forEach(function(p,q){n[p]=
!0}),n}(c);if(e.showHidden&&(c=Object.getOwnPropertyNames(h)),xw(h)&&(0<=c.indexOf("message")||0<=c.indexOf("description")))return gE(h);if(0===c.length){if(Nz(h))return e.stylize("[Function"+(h.name?": "+h.name:"")+"]","special");if(yw(h))return e.stylize(RegExp.prototype.toString.call(h),"regexp");if(Pz(h))return e.stylize(Date.prototype.toString.call(h),"date");if(xw(h))return gE(h)}var a="",d=!1,f=["{","}"];(jN(h)&&(d=!0,f=["[","]"]),Nz(h))&&(a=" [Function"+(h.name?": "+h.name:"")+"]");return yw(h)&&
(a=" "+RegExp.prototype.toString.call(h)),Pz(h)&&(a=" "+Date.prototype.toUTCString.call(h)),xw(h)&&(a=" "+gE(h)),0!==c.length||d&&0!=h.length?0>l?yw(h)?e.stylize(RegExp.prototype.toString.call(h),"regexp"):e.stylize("[Object]","special"):(e.seen.push(h),b=d?function(k,n,p,q,r){for(var t=[],w=0,x=n.length;w<x;++w)Object.prototype.hasOwnProperty.call(n,String(w))?t.push(hE(k,n,p,q,String(w),!0)):t.push("");return r.forEach(function(B){B.match(/^\d+$/)||t.push(hE(k,n,p,q,B,!0))}),t}(e,h,l,g,c):c.map(function(k){return hE(e,
h,l,g,k,d)}),e.seen.pop(),function(k,n,p){var q=0;return 60<k.reduce(function(r,t){return q++,0<=t.indexOf("\n")&&q++,r+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)?p[0]+(""===n?"":n+"\n ")+" "+k.join(",\n  ")+" "+p[1]:p[0]+n+" "+k.join(", ")+" "+p[1]}(b,a,f)):f[0]+a+f[1]}function gE(e){return"["+Error.prototype.toString.call(e)+"]"}function hE(e,h,l,b,c,g){var a,d,f;if((f=Object.getOwnPropertyDescriptor(h,c)||{value:h[c]}).get?d=f.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):
f.set&&(d=e.stylize("[Setter]","special")),Object.prototype.hasOwnProperty.call(b,c)||(a="["+c+"]"),d||(0>e.seen.indexOf(f.value)?-1<(d=null===l?Mz(e,f.value,null):Mz(e,f.value,l-1)).indexOf("\n")&&(d=g?d.split("\n").map(function(k){return"  "+k}).join("\n").substr(2):"\n"+d.split("\n").map(function(k){return"   "+k}).join("\n")):d=e.stylize("[Circular]","special")),Wr(a)){if(g&&c.match(/^\d+$/))return d;(a=JSON.stringify(""+c)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,
"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+d}function jN(e){return Array.isArray(e)}function fE(e){return"boolean"==typeof e}function iN(e){return"number"==typeof e}function Oz(e){return"string"==typeof e}function Wr(e){return void 0===e}function yw(e){return gu(e)&&"[object RegExp]"===Object.prototype.toString.call(e)}function gu(e){return"object"==Jc(e)&&null!==e}function Pz(e){return gu(e)&&"[object Date]"===Object.prototype.toString.call(e)}
function xw(e){return gu(e)&&("[object Error]"===Object.prototype.toString.call(e)||e instanceof Error)}function Nz(e){return"function"==typeof e}function iE(e){return 10>e?"0"+e.toString(10):e.toString(10)}function mZ(){var e=new Date,h=[iE(e.getHours()),iE(e.getMinutes()),iE(e.getSeconds())].join(":");return[e.getDate(),nZ[e.getMonth()],h].join(" ")}function oZ(e,h){if(!e){var l=Error("Promise was rejected with a falsy value");l.reason=e;e=l}return h(e)}function Xr(e){if("object"!==typeof e||null===
e)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||fp).db=e;(this||fp)._ended=!1;(this||fp)._nexting=!1}function co(e){if("object"!==typeof e||null===e)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||vk).db=e;(this||vk)._operations=[];(this||vk)._written=!1}function pZ(){function e(a){var d=a.length;if(0<d%4)throw Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("=");-1===a&&(a=d);return[a,a===
d?0:4-a%4]}function h(a,d,f){for(var k=[],n=d;n<f;n+=3)d=(a[n]<<16&16711680)+(a[n+1]<<8&65280)+(a[n+2]&255),k.push(l[d>>18&63]+l[d>>12&63]+l[d>>6&63]+l[d&63]);return k.join("")}if(kN)return zw;kN=!0;zw.byteLength=function(a){a=e(a);var d=a[1];return 3*(a[0]+d)/4-d};zw.toByteArray=function(a){var d=e(a);var f=d[0];d=d[1];var k=new c(3*(f+d)/4-d),n=0,p=0<d?f-4:f,q;for(q=0;q<p;q+=4)f=b[a.charCodeAt(q)]<<18|b[a.charCodeAt(q+1)]<<12|b[a.charCodeAt(q+2)]<<6|b[a.charCodeAt(q+3)],k[n++]=f>>16&255,k[n++]=
f>>8&255,k[n++]=f&255;2===d&&(f=b[a.charCodeAt(q)]<<2|b[a.charCodeAt(q+1)]>>4,k[n++]=f&255);1===d&&(f=b[a.charCodeAt(q)]<<10|b[a.charCodeAt(q+1)]<<4|b[a.charCodeAt(q+2)]>>2,k[n++]=f>>8&255,k[n++]=f&255);return k};zw.fromByteArray=function(a){for(var d=a.length,f=d%3,k=[],n=0,p=d-f;n<p;n+=16383)k.push(h(a,n,n+16383>p?p:n+16383));1===f?(a=a[d-1],k.push(l[a>>2]+l[a<<4&63]+"==")):2===f&&(a=(a[d-2]<<8)+a[d-1],k.push(l[a>>10]+l[a>>4&63]+l[a<<2&63]+"="));return k.join("")};for(var l=[],b=[],c="undefined"!==
typeof Uint8Array?Uint8Array:Array,g=0;64>g;++g)l[g]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g],b["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(g)]=g;b[45]=62;b[95]=63;return zw}function qZ(){if(lN)return Qz;lN=!0;Qz.read=function(e,h,l,b,c){var g=8*c-b-1;var a=(1<<g)-1,d=a>>1,f=-7;c=l?c-1:0;var k=l?-1:1,n=e[h+c];c+=k;l=n&(1<<-f)-1;n>>=-f;for(f+=g;0<f;l=256*l+e[h+c],c+=k,f-=8);g=l&(1<<-f)-1;l>>=-f;for(f+=b;0<f;g=256*g+e[h+c],c+=k,f-=8);if(0===
l)l=1-d;else{if(l===a)return g?NaN:Infinity*(n?-1:1);g+=Math.pow(2,b);l-=d}return(n?-1:1)*g*Math.pow(2,l-b)};Qz.write=function(e,h,l,b,c,g){var a,d=8*g-c-1,f=(1<<d)-1,k=f>>1,n=23===c?Math.pow(2,-24)-Math.pow(2,-77):0;g=b?0:g-1;var p=b?1:-1,q=0>h||0===h&&0>1/h?1:0;h=Math.abs(h);isNaN(h)||Infinity===h?(h=isNaN(h)?1:0,b=f):(b=Math.floor(Math.log(h)/Math.LN2),1>h*(a=Math.pow(2,-b))&&(b--,a*=2),h=1<=b+k?h+n/a:h+n*Math.pow(2,1-k),2<=h*a&&(b++,a/=2),b+k>=f?(h=0,b=f):1<=b+k?(h=(h*a-1)*Math.pow(2,c),b+=k):
(h=h*Math.pow(2,k-1)*Math.pow(2,c),b=0));for(;8<=c;e[l+g]=h&255,g+=p,h/=256,c-=8);b=b<<c|h;for(d+=c;0<d;e[l+g]=b&255,g+=p,b/=256,d-=8);e[l+g-p]|=128*q};return Qz}function Zj(){(this||eo).status="new"}function hu(e){mN.call(this||nn,e);(this||nn)._options=e;(this||nn)._iterator=null;(this||nn)._operations=[]}function iu(e){nN.call(this||jl,"");(this||jl)._db=e;(this||jl)._operations=[];(this||jl)._iterators=[];oN(this||jl)}function rZ(e){pN.concat("iterator").forEach(function(h){e["_"+h]=function(){return(this||
jl)._db[h].apply((this||jl)._db,arguments)}});e._db.approximateSize&&(e.approximateSize=function(){return(this||jl)._db.approximateSize.apply((this||jl)._db,arguments)})}function oN(e){pN.forEach(function(h){e["_"+h]=function(){(this||jl)._operations.push({method:h,args:arguments})}});"function"===typeof e._db.approximateSize&&(e.approximateSize=function(){(this||jl)._operations.push({method:"approximateSize",args:arguments})});e._iterator=function(h){h=new qN(h);(this||jl)._iterators.push(h);return h}}
function rN(){if(sN)return tN;sN=!0;return tN=Rj.EventEmitter}function ju(){function e(b,c,g){g||(g=Error);var a=function(d){function f(n,p,q){rd(this,f);return k.call(this,"string"===typeof c?c:c(n,p,q))}gd(f,d);var k=sb(f);return f}(g);a.prototype.name=g.name;a.prototype.code=b;l[b]=a}function h(b,c){if(Array.isArray(b)){var g=b.length;b=b.map(function(a){return String(a)});return 2<g?"one of ".concat(c," ").concat(b.slice(0,g-1).join(", "),", or ")+b[g-1]:2===g?"one of ".concat(c," ").concat(b[0],
" or ").concat(b[1]):"of ".concat(c," ").concat(b[0])}return"of ".concat(c," ").concat(String(b))}if(uN)return jE;uN=!0;var l={};e("ERR_INVALID_OPT_VALUE",function(b,c){return'The value "'+c+'" is invalid for option "'+b+'"'},TypeError);e("ERR_INVALID_ARG_TYPE",function(b,c,g){var a;if(a="string"===typeof c)a="not "===c.substr(0,4);a?(a="must not be",c=c.replace(/^not /,"")):a="must be";var d=void 0;if(void 0===d||d>b.length)d=b.length;" argument"===b.substring(d-9,d)?b="The ".concat(b," ").concat(a,
" ").concat(h(c,"type")):(d=void 0,"number"!==typeof d&&(d=0),d=d+1>b.length?!1:-1!==b.indexOf(".",d),d=d?"property":"argument",b='The "'.concat(b,'" ').concat(d," ").concat(a," ").concat(h(c,"type")));return b+=". Received type ".concat(Jc(g))},TypeError);e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");e("ERR_METHOD_NOT_IMPLEMENTED",function(b){return"The "+b+" method is not implemented"});e("ERR_STREAM_PREMATURE_CLOSE","Premature close");e("ERR_STREAM_DESTROYED",function(b){return"Cannot call "+
b+" after a stream was destroyed"});e("ERR_MULTIPLE_CALLBACK","Callback called multiple times");e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");e("ERR_STREAM_WRITE_AFTER_END","write after end");e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);e("ERR_UNKNOWN_ENCODING",function(b){return"Unknown encoding: "+b},TypeError);e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");jE.codes=l;return jE}function kE(e){try{if(!lE.localStorage)return!1}catch(h){return!1}e=
lE.localStorage[e];return null==e?!1:"true"===String(e).toLowerCase()}function vN(e,h){for(var l in e)h[l]=e[l]}function Yr(e,h,l){return fo(e,h,l)}function sZ(e){if(!e)return"utf8";for(var h;;)switch(e){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return e;default:if(h)return;e=(""+e).toLowerCase();h=!0}}function Aw(e){var h=sZ(e);if("string"!==typeof h&&
(mE.isEncoding===wN||!wN(e)))throw Error("Unknown encoding: "+e);this.encoding=h||e;switch(this.encoding){case "utf16le":this.text=tZ;this.end=uZ;e=4;break;case "utf8":this.fillLast=vZ;e=4;break;case "base64":this.text=wZ;this.end=xZ;e=3;break;default:this.write=yZ;this.end=zZ;return}this.lastTotal=this.lastNeed=0;this.lastChar=mE.allocUnsafe(e)}function nE(e){return 127>=e?0:6===e>>5?2:14===e>>4?3:30===e>>3?4:2===e>>6?-1:-2}function AZ(e,h,l){var b=h.length-1;if(b<l)return 0;var c=nE(h[b]);if(0<=
c)return 0<c&&(e.lastNeed=c-1),c;if(--b<l||-2===c)return 0;c=nE(h[b]);if(0<=c)return 0<c&&(e.lastNeed=c-2),c;if(--b<l||-2===c)return 0;c=nE(h[b]);return 0<=c?(0<c&&(2===c?c=0:e.lastNeed=c-3),c):0}function vZ(e){var h=this.lastTotal-this.lastNeed;a:if(128!==(e[0]&192)){this.lastNeed=0;var l="\ufffd"}else{if(1<this.lastNeed&&1<e.length){if(128!==(e[1]&192)){this.lastNeed=1;l="\ufffd";break a}if(2<this.lastNeed&&2<e.length&&128!==(e[2]&192)){this.lastNeed=2;l="\ufffd";break a}}l=void 0}if(void 0!==l)return l;
if(this.lastNeed<=e.length)return e.copy(this.lastChar,h,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,h,0,e.length);this.lastNeed-=e.length}function tZ(e,h){if(0===(e.length-h)%2){if(h=e.toString("utf16le",h)){var l=h.charCodeAt(h.length-1);if(55296<=l&&56319>=l)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],h.slice(0,-1)}return h}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=e[e.length-1];return e.toString("utf16le",
h,e.length-1)}function uZ(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):e}function wZ(e,h){var l=(e.length-h)%3;if(0===l)return e.toString("base64",h);this.lastNeed=3-l;this.lastTotal=3;1===l?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]);return e.toString("base64",h,e.length-l)}function xZ(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("base64",
0,3-this.lastNeed):e}function yZ(e){return e.toString(this.encoding)}function zZ(e){return e&&e.length?this.write(e):""}function oE(){function e(c){var g=!1;return function(){if(!g){g=!0;for(var a=arguments.length,d=Array(a),f=0;f<a;f++)d[f]=arguments[f];c.apply(this,d)}}}function h(){}function l(c,g,a){if("function"===typeof g)return l(c,null,g);g||(g={});a=e(a||h);var d=g.readable||!1!==g.readable&&c.readable,f=g.writable||!1!==g.writable&&c.writable,k=function(){c.writable||p()},n=c._writableState&&
c._writableState.finished,p=function(){f=!1;n=!0;d||a.call(c)},q=c._readableState&&c._readableState.endEmitted,r=function(){d=!1;q=!0;f||a.call(c)},t=function(B){a.call(c,B)},w=function(){var B;if(d&&!q)return c._readableState&&c._readableState.ended||(B=new b),a.call(c,B);if(f&&!n)return c._writableState&&c._writableState.ended||(B=new b),a.call(c,B)},x=function(){c.req.on("finish",p)};if(c.setHeader&&"function"===typeof c.abort)if(c.on("complete",p),c.on("abort",w),c.req)x();else c.on("request",
x);else f&&!c._writableState&&(c.on("end",k),c.on("close",k));c.on("end",r);c.on("finish",p);if(!1!==g.error)c.on("error",t);c.on("close",w);return function(){c.removeListener("complete",p);c.removeListener("abort",w);c.removeListener("request",x);c.req&&c.req.removeListener("finish",p);c.removeListener("end",k);c.removeListener("close",k);c.removeListener("finish",p);c.removeListener("end",r);c.removeListener("error",t);c.removeListener("close",w)}}if(xN)return yN;xN=!0;var b=ju().codes.ERR_STREAM_PREMATURE_CLOSE;
return yN=l}function BZ(){if(zN)return AN;zN=!0;return AN=function(){throw Error("Readable.from is not available in the browser");}}function CZ(){function e(d,f){var k=Object.keys(d);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(d);f&&(n=n.filter(function(p){return Object.getOwnPropertyDescriptor(d,p).enumerable}));k.push.apply(k,n)}return k}function h(d){for(var f=1;f<arguments.length;f++){var k=null!=arguments[f]?arguments[f]:{};f%2?e(Object(k),!0).forEach(function(n){var p=
k[n];n in d?Object.defineProperty(d,n,{value:p,enumerable:!0,configurable:!0,writable:!0}):d[n]=p}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(k)):e(Object(k)).forEach(function(n){Object.defineProperty(d,n,Object.getOwnPropertyDescriptor(k,n))})}return d}function l(d,f){for(var k=0;k<f.length;k++){var n=f[k];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(d,n.key,n)}}function b(d,f,k){f&&l(d.prototype,
f);k&&l(d,k);return d}if(BN)return CN;BN=!0;var c=Cj.Buffer,g=DN.inspect,a=g&&g.custom||"inspect";return CN=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.tail=this.head=null;this.length=0}b(d,[{key:"push",value:function(f){f={data:f,next:null};0<this.length?this.tail.next=f:this.head=f;this.tail=f;++this.length}},{key:"unshift",value:function(f){f={data:f,next:this.head};0===this.length&&(this.tail=f);this.head=f;++this.length}},{key:"shift",
value:function(){if(0!==this.length){var f=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return f}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(f){if(0===this.length)return"";for(var k=this.head,n=""+k.data;k=k.next;)n+=f+k.data;return n}},{key:"concat",value:function(f){if(0===this.length)return c.alloc(0);f=c.allocUnsafe(f>>>0);for(var k=this.head,n=0;k;)c.prototype.copy.call(k.data,f,n),n+=k.data.length,
k=k.next;return f}},{key:"consume",value:function(f,k){f<this.head.data.length?(k=this.head.data.slice(0,f),this.head.data=this.head.data.slice(f)):k=f===this.head.data.length?this.shift():k?this._getString(f):this._getBuffer(f);return k}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(f){var k=this.head,n=1,p=k.data;for(f-=p.length;k=k.next;){var q=k.data,r=f>q.length?q.length:f;p=r===q.length?p+q:p+q.slice(0,f);f-=r;if(0===f){r===q.length?(++n,this.head=k.next?
k.next:this.tail=null):(this.head=k,k.data=q.slice(r));break}++n}this.length-=n;return p}},{key:"_getBuffer",value:function(f){var k=c.allocUnsafe(f),n=this.head,p=1;n.data.copy(k);for(f-=n.data.length;n=n.next;){var q=n.data,r=f>q.length?q.length:f;q.copy(k,k.length-f,0,r);f-=r;if(0===f){r===q.length?(++p,this.head=n.next?n.next:this.tail=null):(this.head=n,n.data=q.slice(r));break}++p}this.length-=p;return k}},{key:a,value:function(f,k){return g(this,h({},k,{depth:0,customInspect:!1}))}}]);return d}()}
function EN(){function e(c,g){l(c,g);h(c)}function h(c){c._writableState&&!c._writableState.emitClose||c._readableState&&!c._readableState.emitClose||c.emit("close")}function l(c,g){c.emit("error",g)}if(FN)return GN;FN=!0;var b=fk;return GN={destroy:function(c,g){var a=this,d=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||d)return g?g(c):c&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,b.nextTick(l,
this,c)):b.nextTick(l,this,c)),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(c||null,function(f){!g&&f?a._writableState?a._writableState.errorEmitted?b.nextTick(h,a):(a._writableState.errorEmitted=!0,b.nextTick(e,a,f)):b.nextTick(e,a,f):g?(b.nextTick(h,a),g(f)):b.nextTick(h,a)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=
!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(c,g){var a=c._readableState,d=c._writableState;a&&a.autoDestroy||d&&d.autoDestroy?c.destroy(g):c.emit("error",g)}}}function HN(){if(IN)return JN;IN=!0;var e=ju().codes.ERR_INVALID_OPT_VALUE;
return JN={getHighWaterMark:function(h,l,b,c){l=null!=l.highWaterMark?l.highWaterMark:c?l[b]:null;if(null!=l){if(!isFinite(l)||Math.floor(l)!==l||0>l)throw new e(c?b:"highWaterMark",l);return Math.floor(l)}return h.objectMode?16:16384}}}function KN(){function e(Ya){var xa=this;this.entry=this.next=null;this.finish=function(){var tc=xa.entry;for(xa.entry=null;tc;){var Qb=tc.callback;Ya.pendingcb--;Qb(void 0);tc=tc.next}Ya.corkedRequestsFree.next=xa}}function h(){}function l(Ya,xa,tc){p=p||ku();Ya=
Ya||{};"boolean"!==typeof tc&&(tc=xa instanceof p);this.objectMode=!!Ya.objectMode;tc&&(this.objectMode=this.objectMode||!!Ya.writableObjectMode);this.highWaterMark=B(this,Ya,"writableHighWaterMark",tc);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==Ya.decodeStrings;this.defaultEncoding=Ya.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(Qb){var wc=xa._writableState,
Zb=wc.sync,$c=wc.writecb;if("function"!==typeof $c)throw new G;wc.writing=!1;wc.writecb=null;wc.length-=wc.writelen;wc.writelen=0;Qb?(--wc.pendingcb,Zb?(n.nextTick($c,Qb),n.nextTick(k,xa,wc),xa._writableState.errorEmitted=!0,qc(xa,Qb)):($c(Qb),xa._writableState.errorEmitted=!0,qc(xa,Qb),k(xa,wc))):((Qb=d(wc)||xa.destroyed)||wc.corked||wc.bufferProcessing||!wc.bufferedRequest||a(xa,wc),Zb?n.nextTick(g,xa,wc,Qb,$c):g(xa,wc,Qb,$c))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=
null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==Ya.emitClose;this.autoDestroy=!!Ya.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new e(this)}function b(Ya){p=p||ku();var xa=this instanceof p;if(!xa&&!jc.call(b,this))return new b(Ya);this._writableState=new l(Ya,this,xa);this.writable=!0;Ya&&("function"===typeof Ya.write&&(this._write=Ya.write),"function"===typeof Ya.writev&&(this._writev=Ya.writev),"function"===typeof Ya.destroy&&(this._destroy=Ya.destroy),
"function"===typeof Ya["final"]&&(this._final=Ya["final"]));r.call(this)}function c(Ya,xa,tc,Qb,wc,Zb,$c){xa.writelen=Qb;xa.writecb=$c;xa.writing=!0;xa.sync=!0;if(xa.destroyed)xa.onwrite(new ha("write"));else tc?Ya._writev(wc,xa.onwrite):Ya._write(wc,Zb,xa.onwrite);xa.sync=!1}function g(Ya,xa,tc,Qb){!tc&&0===xa.length&&xa.needDrain&&(xa.needDrain=!1,Ya.emit("drain"));xa.pendingcb--;Qb();k(Ya,xa)}function a(Ya,xa){xa.bufferProcessing=!0;var tc=xa.bufferedRequest;if(Ya._writev&&tc&&tc.next){var Qb=
Array(xa.bufferedRequestCount),wc=xa.corkedRequestsFree;wc.entry=tc;for(var Zb=0,$c=!0;tc;)Qb[Zb]=tc,tc.isBuf||($c=!1),tc=tc.next,Zb+=1;Qb.allBuffers=$c;c(Ya,xa,!0,xa.length,Qb,"",wc.finish);xa.pendingcb++;xa.lastBufferedRequest=null;wc.next?(xa.corkedRequestsFree=wc.next,wc.next=null):xa.corkedRequestsFree=new e(xa);xa.bufferedRequestCount=0}else{for(;tc&&(Qb=tc.chunk,c(Ya,xa,!1,xa.objectMode?1:Qb.length,Qb,tc.encoding,tc.callback),tc=tc.next,xa.bufferedRequestCount--,!xa.writing););null===tc&&(xa.lastBufferedRequest=
null)}xa.bufferedRequest=tc;xa.bufferProcessing=!1}function d(Ya){return Ya.ending&&0===Ya.length&&null===Ya.bufferedRequest&&!Ya.finished&&!Ya.writing}function f(Ya,xa){Ya._final(function(tc){xa.pendingcb--;tc&&qc(Ya,tc);xa.prefinished=!0;Ya.emit("prefinish");k(Ya,xa)})}function k(Ya,xa){var tc=d(xa);tc&&(xa.prefinished||xa.finalCalled||("function"!==typeof Ya._final||xa.destroyed?(xa.prefinished=!0,Ya.emit("prefinish")):(xa.pendingcb++,xa.finalCalled=!0,n.nextTick(f,Ya,xa))),0===xa.pendingcb&&(xa.finished=
!0,Ya.emit("finish"),xa.autoDestroy&&(xa=Ya._readableState,(!xa||xa.autoDestroy&&xa.endEmitted)&&Ya.destroy())));return tc}if(LN)return pE;LN=!0;var n=fk;pE=b;var p;b.WritableState=l;var q={deprecate:DZ},r=rN(),t=Cj.Buffer,w=EZ.Uint8Array||function(){},x=EN(),B=HN().getHighWaterMark,D=ju().codes,F=D.ERR_INVALID_ARG_TYPE,L=D.ERR_METHOD_NOT_IMPLEMENTED,G=D.ERR_MULTIPLE_CALLBACK,oa=D.ERR_STREAM_CANNOT_PIPE,ha=D.ERR_STREAM_DESTROYED,Ha=D.ERR_STREAM_NULL_VALUES,Va=D.ERR_STREAM_WRITE_AFTER_END,hc=D.ERR_UNKNOWN_ENCODING,
qc=x.errorOrDestroy;Dj(b,r);l.prototype.getBuffer=function(){for(var Ya=this.bufferedRequest,xa=[];Ya;)xa.push(Ya),Ya=Ya.next;return xa};(function(){try{Object.defineProperty(l.prototype,"buffer",{get:q.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(Ya){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var jc=Function.prototype[Symbol.hasInstance];
Object.defineProperty(b,Symbol.hasInstance,{value:function(Ya){return jc.call(this,Ya)?!0:this!==b?!1:Ya&&Ya._writableState instanceof l}})}else jc=function(Ya){return Ya instanceof this};b.prototype.pipe=function(){qc(this,new oa)};b.prototype.write=function(Ya,xa,tc){var Qb=this._writableState,wc=!1,Zb;if(Zb=!Qb.objectMode)Zb=Ya,Zb=t.isBuffer(Zb)||Zb instanceof w;Zb&&!t.isBuffer(Ya)&&(Ya=t.from(Ya));"function"===typeof xa&&(tc=xa,xa=null);Zb?xa="buffer":xa||(xa=Qb.defaultEncoding);"function"!==
typeof tc&&(tc=h);if(Qb.ending)Qb=tc,tc=new Va,qc(this,tc),n.nextTick(Qb,tc);else{var $c;if(!($c=Zb)){$c=Ya;var Oa=tc,md;null===$c?md=new Ha:"string"===typeof $c||Qb.objectMode||(md=new F("chunk",["string","Buffer"],$c));md?(qc(this,md),n.nextTick(Oa,md),$c=!1):$c=!0}$c&&(Qb.pendingcb++,wc=Zb,wc||(md=Ya,Qb.objectMode||!1===Qb.decodeStrings||"string"!==typeof md||(md=t.from(md,xa)),Ya!==md&&(wc=!0,xa="buffer",Ya=md)),Zb=Qb.objectMode?1:Ya.length,Qb.length+=Zb,md=Qb.length<Qb.highWaterMark,md||(Qb.needDrain=
!0),Qb.writing||Qb.corked?(Zb=Qb.lastBufferedRequest,Qb.lastBufferedRequest={chunk:Ya,encoding:xa,isBuf:wc,callback:tc,next:null},Zb?Zb.next=Qb.lastBufferedRequest:Qb.bufferedRequest=Qb.lastBufferedRequest,Qb.bufferedRequestCount+=1):c(this,Qb,!1,Zb,Ya,xa,tc),wc=md)}return wc};b.prototype.cork=function(){this._writableState.corked++};b.prototype.uncork=function(){var Ya=this._writableState;Ya.corked&&(Ya.corked--,Ya.writing||Ya.corked||Ya.bufferProcessing||!Ya.bufferedRequest||a(this,Ya))};b.prototype.setDefaultEncoding=
function(Ya){"string"===typeof Ya&&(Ya=Ya.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((Ya+"").toLowerCase())))throw new hc(Ya);this._writableState.defaultEncoding=Ya;return this};Object.defineProperty(b.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});
b.prototype._write=function(Ya,xa,tc){tc(new L("_write()"))};b.prototype._writev=null;b.prototype.end=function(Ya,xa,tc){var Qb=this._writableState;"function"===typeof Ya?(tc=Ya,xa=Ya=null):"function"===typeof xa&&(tc=xa,xa=null);null!==Ya&&void 0!==Ya&&this.write(Ya,xa);Qb.corked&&(Qb.corked=1,this.uncork());if(!Qb.ending){Ya=tc;Qb.ending=!0;k(this,Qb);if(Ya)if(Qb.finished)n.nextTick(Ya);else this.once("finish",Ya);Qb.ended=!0;this.writable=!1}return this};Object.defineProperty(b.prototype,"writableLength",
{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?!1:this._writableState.destroyed},set:function(Ya){this._writableState&&(this._writableState.destroyed=Ya)}});b.prototype.destroy=x.destroy;b.prototype._undestroy=x.undestroy;b.prototype._destroy=function(Ya,xa){xa(Ya)};return pE}function ku(){function e(k){if(!(this instanceof e))return new e(k);g.call(this,k);a.call(this,
k);this.allowHalfOpen=!0;k&&(!1===k.readable&&(this.readable=!1),!1===k.writable&&(this.writable=!1),!1===k.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||b.nextTick(l,this)}function l(k){k.end()}if(MN)return qE;MN=!0;var b=fk,c=Object.keys||function(k){var n=[],p;for(p in k)n.push(p);return n};qE=e;var g=NN(),a=KN();Dj(e,g);c=c(a.prototype);for(var d=0;d<c.length;d++){var f=c[d];e.prototype[f]||(e.prototype[f]=a.prototype[f])}Object.defineProperty(e.prototype,
"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(e.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?
!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(k){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=k,this._writableState.destroyed=k)}});return qE}function FZ(){function e(B,D,F){D in B?Object.defineProperty(B,D,{value:F,enumerable:!0,configurable:!0,writable:!0}):B[D]=F;return B}function h(B,D){return{value:B,done:D}}function l(B){var D=B[f];if(null!==D){var F=B[t].read();null!==F&&(B[q]=null,B[f]=null,B[k]=null,D(h(F,!1)))}}
function b(B){g.nextTick(l,B)}function c(B,D){return function(F,L){B.then(function(){if(D[p])F(h(void 0,!0));else D[r](F,L)},L)}}if(ON)return PN;ON=!0;var g=fk,a,d=oE(),f=Symbol("lastResolve"),k=Symbol("lastReject"),n=Symbol("error"),p=Symbol("ended"),q=Symbol("lastPromise"),r=Symbol("handlePromise"),t=Symbol("stream"),w=Object.getPrototypeOf(function(){}),x=Object.setPrototypeOf((a={get stream(){return this[t]},next:function(){var B=this,D=this[n];if(null!==D)return Promise.reject(D);if(this[p])return Promise.resolve(h(void 0,
!0));if(this[t].destroyed)return new Promise(function(F,L){g.nextTick(function(){B[n]?L(B[n]):F(h(void 0,!0))})});if(D=this[q])D=new Promise(c(D,this));else{D=this[t].read();if(null!==D)return Promise.resolve(h(D,!1));D=new Promise(this[r])}return this[q]=D}},e(a,Symbol.asyncIterator,function(){return this}),e(a,"return",function(){var B=this;return new Promise(function(D,F){B[t].destroy(null,function(L){L?F(L):D(h(void 0,!0))})})}),a),w);return PN=function(B){var D,F=Object.create(x,(D={},e(D,t,
{value:B,writable:!0}),e(D,f,{value:null,writable:!0}),e(D,k,{value:null,writable:!0}),e(D,n,{value:null,writable:!0}),e(D,p,{value:B._readableState.endEmitted,writable:!0}),e(D,r,{value:function(L,G){var oa=F[t].read();oa?(F[q]=null,F[f]=null,F[k]=null,L(h(oa,!1))):(F[f]=L,F[k]=G)},writable:!0}),D));F[q]=null;d(B,function(L){if(L&&"ERR_STREAM_PREMATURE_CLOSE"!==L.code){var G=F[k];null!==G&&(F[q]=null,F[f]=null,F[k]=null,G(L));F[n]=L}else L=F[f],null!==L&&(F[q]=null,F[f]=null,F[k]=null,L(h(void 0,
!0))),F[p]=!0});B.on("readable",b.bind(null,F));return F}}function NN(){function e(la,$a,dd){if("function"===typeof la.prependListener)return la.prependListener($a,dd);if(la._events&&la._events[$a])Array.isArray(la._events[$a])?la._events[$a].unshift(dd):la._events[$a]=[dd,la._events[$a]];else la.on($a,dd)}function h(la,$a,dd){L=L||ku();la=la||{};"boolean"!==typeof dd&&(dd=$a instanceof L);this.objectMode=!!la.objectMode;dd&&(this.objectMode=this.objectMode||!!la.readableObjectMode);this.highWaterMark=
qc(this,la,"readableHighWaterMark",dd);this.buffer=new hc;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==la.emitClose;this.autoDestroy=!!la.autoDestroy;this.destroyed=!1;this.defaultEncoding=la.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;la.encoding&&(wc||
(wc=rE.StringDecoder),this.decoder=new wc(la.encoding),this.encoding=la.encoding)}function l(la){L=L||ku();if(!(this instanceof l))return new l(la);this._readableState=new h(la,this,this instanceof L);this.readable=!0;la&&("function"===typeof la.read&&(this._read=la.read),"function"===typeof la.destroy&&(this._destroy=la.destroy));G.call(this)}function b(la,$a,dd,Kd,ra){Va("readableAddChunk",$a);var Aa=la._readableState;if(null===$a)Aa.reading=!1,Va("onEofChunk"),Aa.ended||(Aa.decoder&&($a=Aa.decoder.end())&&
$a.length&&(Aa.buffer.push($a),Aa.length+=Aa.objectMode?1:$a.length),Aa.ended=!0,Aa.sync?a(la):(Aa.needReadable=!1,Aa.emittedReadable||(Aa.emittedReadable=!0,d(la))));else{if(!ra){ra=$a;var V;oa.isBuffer(ra)||ra instanceof ha||"string"===typeof ra||void 0===ra||Aa.objectMode||(V=new Ya("chunk",["string","Buffer","Uint8Array"],ra));var ea=V}if(ea)Oa(la,ea);else if(Aa.objectMode||$a&&0<$a.length)if("string"===typeof $a||Aa.objectMode||Object.getPrototypeOf($a)===oa.prototype||($a=oa.from($a)),Kd)Aa.endEmitted?
Oa(la,new Qb):c(la,Aa,$a,!0);else if(Aa.ended)Oa(la,new xa);else{if(Aa.destroyed)return!1;Aa.reading=!1;Aa.decoder&&!dd?($a=Aa.decoder.write($a),Aa.objectMode||0!==$a.length?c(la,Aa,$a,!1):f(la,Aa)):c(la,Aa,$a,!1)}else Kd||(Aa.reading=!1,f(la,Aa))}return!Aa.ended&&(Aa.length<Aa.highWaterMark||0===Aa.length)}function c(la,$a,dd,Kd){$a.flowing&&0===$a.length&&!$a.sync?($a.awaitDrain=0,la.emit("data",dd)):($a.length+=$a.objectMode?1:dd.length,Kd?$a.buffer.unshift(dd):$a.buffer.push(dd),$a.needReadable&&
a(la));f(la,$a)}function g(la,$a){if(0>=la||0===$a.length&&$a.ended)return 0;if($a.objectMode)return 1;if(la!==la)return $a.flowing&&$a.length?$a.buffer.head.data.length:$a.length;if(la>$a.highWaterMark){var dd=la;1073741824<=dd?dd=1073741824:(dd--,dd|=dd>>>1,dd|=dd>>>2,dd|=dd>>>4,dd|=dd>>>8,dd|=dd>>>16,dd++);$a.highWaterMark=dd}return la<=$a.length?la:$a.ended?$a.length:($a.needReadable=!0,0)}function a(la){var $a=la._readableState;Va("emitReadable",$a.needReadable,$a.emittedReadable);$a.needReadable=
!1;$a.emittedReadable||(Va("emitReadable",$a.flowing),$a.emittedReadable=!0,F.nextTick(d,la))}function d(la){var $a=la._readableState;Va("emitReadable_",$a.destroyed,$a.length,$a.ended);$a.destroyed||!$a.length&&!$a.ended||(la.emit("readable"),$a.emittedReadable=!1);$a.needReadable=!$a.flowing&&!$a.ended&&$a.length<=$a.highWaterMark;t(la)}function f(la,$a){$a.readingMore||($a.readingMore=!0,F.nextTick(k,la,$a))}function k(la,$a){for(;!$a.reading&&!$a.ended&&($a.length<$a.highWaterMark||$a.flowing&&
0===$a.length);){var dd=$a.length;Va("maybeReadMore read 0");la.read(0);if(dd===$a.length)break}$a.readingMore=!1}function n(la){return function(){var $a=la._readableState;Va("pipeOnDrain",$a.awaitDrain);$a.awaitDrain&&$a.awaitDrain--;0===$a.awaitDrain&&la.listeners("data").length&&($a.flowing=!0,t(la))}}function p(la){var $a=la._readableState;$a.readableListening=0<la.listenerCount("readable");$a.resumeScheduled&&!$a.paused?$a.flowing=!0:0<la.listenerCount("data")&&la.resume()}function q(la){Va("readable nexttick read 0");
la.read(0)}function r(la,$a){Va("resume",$a.reading);$a.reading||la.read(0);$a.resumeScheduled=!1;la.emit("resume");t(la);$a.flowing&&!$a.reading&&la.read(0)}function t(la){var $a=la._readableState;for(Va("flow",$a.flowing);$a.flowing&&null!==la.read(););}function w(la,$a){if(0===$a.length)return null;$a.objectMode?la=$a.buffer.shift():!la||la>=$a.length?(la=$a.decoder?$a.buffer.join(""):1===$a.buffer.length?$a.buffer.first():$a.buffer.concat($a.length),$a.buffer.clear()):la=$a.buffer.consume(la,
$a.decoder);return la}function x(la){var $a=la._readableState;Va("endReadable",$a.endEmitted);$a.endEmitted||($a.ended=!0,F.nextTick(B,$a,la))}function B(la,$a){Va("endReadableNT",la.endEmitted,la.length);la.endEmitted||0!==la.length||(la.endEmitted=!0,$a.readable=!1,$a.emit("end"),la.autoDestroy&&(la=$a._writableState,(!la||la.autoDestroy&&la.finished)&&$a.destroy()))}function D(la,$a){for(var dd=0,Kd=la.length;dd<Kd;dd++)if(la[dd]===$a)return dd;return-1}if(QN)return sE;QN=!0;var F=fk;sE=l;var L;
l.ReadableState=h;Rj.EventEmitter;var G=rN(),oa=Cj.Buffer,ha=GZ.Uint8Array||function(){},Ha=DN;var Va=Ha&&Ha.debuglog?Ha.debuglog("stream"):function(){};var hc=CZ();Ha=EN();var qc=HN().getHighWaterMark,jc=ju().codes,Ya=jc.ERR_INVALID_ARG_TYPE,xa=jc.ERR_STREAM_PUSH_AFTER_EOF,tc=jc.ERR_METHOD_NOT_IMPLEMENTED,Qb=jc.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,wc,Zb,$c;Dj(l,G);var Oa=Ha.errorOrDestroy,md=["error","close","destroy","pause","resume"];Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===
this._readableState?!1:this._readableState.destroyed},set:function(la){this._readableState&&(this._readableState.destroyed=la)}});l.prototype.destroy=Ha.destroy;l.prototype._undestroy=Ha.undestroy;l.prototype._destroy=function(la,$a){$a(la)};l.prototype.push=function(la,$a){var dd=this._readableState;if(dd.objectMode)var Kd=!0;else"string"===typeof la&&($a=$a||dd.defaultEncoding,$a!==dd.encoding&&(la=oa.from(la,$a),$a=""),Kd=!0);return b(this,la,$a,!1,Kd)};l.prototype.unshift=function(la){return b(this,
la,null,!0,!1)};l.prototype.isPaused=function(){return!1===this._readableState.flowing};l.prototype.setEncoding=function(la){wc||(wc=rE.StringDecoder);la=new wc(la);this._readableState.decoder=la;this._readableState.encoding=this._readableState.decoder.encoding;for(var $a=this._readableState.buffer.head,dd="";null!==$a;)dd+=la.write($a.data),$a=$a.next;this._readableState.buffer.clear();""!==dd&&this._readableState.buffer.push(dd);this._readableState.length=dd.length;return this};l.prototype.read=
function(la){Va("read",la);la=parseInt(la,10);var $a=this._readableState,dd=la;0!==la&&($a.emittedReadable=!1);if(0===la&&$a.needReadable&&((0!==$a.highWaterMark?$a.length>=$a.highWaterMark:0<$a.length)||$a.ended))return Va("read: emitReadable",$a.length,$a.ended),0===$a.length&&$a.ended?x(this):a(this),null;la=g(la,$a);if(0===la&&$a.ended)return 0===$a.length&&x(this),null;var Kd=$a.needReadable;Va("need readable",Kd);if(0===$a.length||$a.length-la<$a.highWaterMark)Kd=!0,Va("length less than watermark",
Kd);$a.ended||$a.reading?Va("reading or ended",!1):Kd&&(Va("do read"),$a.reading=!0,$a.sync=!0,0===$a.length&&($a.needReadable=!0),this._read($a.highWaterMark),$a.sync=!1,$a.reading||(la=g(dd,$a)));Kd=0<la?w(la,$a):null;null===Kd?($a.needReadable=$a.length<=$a.highWaterMark,la=0):($a.length-=la,$a.awaitDrain=0);0===$a.length&&($a.ended||($a.needReadable=!0),dd!==la&&$a.ended&&x(this));null!==Kd&&this.emit("data",Kd);return Kd};l.prototype._read=function(la){Oa(this,new tc("_read()"))};l.prototype.pipe=
function(la,$a){function dd(xd,Ae){Va("onunpipe");xd===U&&Ae&&!1===Ae.hasUnpiped&&(Ae.hasUnpiped=!0,Va("cleanup"),la.removeListener("close",V),la.removeListener("finish",ea),la.removeListener("drain",S),la.removeListener("error",Aa),la.removeListener("unpipe",dd),U.removeListener("end",Kd),U.removeListener("end",Mb),U.removeListener("data",ra),Sc=!0,!Sa.awaitDrain||la._writableState&&!la._writableState.needDrain||S())}function Kd(){Va("onend");la.end()}function ra(xd){Va("ondata");xd=la.write(xd);
Va("dest.write",xd);!1===xd&&((1===Sa.pipesCount&&Sa.pipes===la||1<Sa.pipesCount&&-1!==D(Sa.pipes,la))&&!Sc&&(Va("false write response, pause",Sa.awaitDrain),Sa.awaitDrain++),U.pause())}function Aa(xd){Va("onerror",xd);Mb();la.removeListener("error",Aa);0===la.listeners("error").length&&Oa(la,xd)}function V(){la.removeListener("finish",ea);Mb()}function ea(){Va("onfinish");la.removeListener("close",V);Mb()}function Mb(){Va("unpipe");U.unpipe(la)}var U=this,Sa=this._readableState;switch(Sa.pipesCount){case 0:Sa.pipes=
la;break;case 1:Sa.pipes=[Sa.pipes,la];break;default:Sa.pipes.push(la)}Sa.pipesCount+=1;Va("pipe count=%d opts=%j",Sa.pipesCount,$a);$a=$a&&!1===$a.end||la===F.stdout||la===F.stderr?Mb:Kd;if(Sa.endEmitted)F.nextTick($a);else U.once("end",$a);la.on("unpipe",dd);var S=n(U);la.on("drain",S);var Sc=!1;U.on("data",ra);e(la,"error",Aa);la.once("close",V);la.once("finish",ea);la.emit("pipe",U);Sa.flowing||(Va("pipe resume"),U.resume());return la};l.prototype.unpipe=function(la){var $a=this._readableState,
dd={hasUnpiped:!1};if(0===$a.pipesCount)return this;if(1===$a.pipesCount){if(la&&la!==$a.pipes)return this;la||(la=$a.pipes);$a.pipes=null;$a.pipesCount=0;$a.flowing=!1;la&&la.emit("unpipe",this,dd);return this}if(!la){la=$a.pipes;dd=$a.pipesCount;$a.pipes=null;$a.pipesCount=0;$a.flowing=!1;for($a=0;$a<dd;$a++)la[$a].emit("unpipe",this,{hasUnpiped:!1});return this}var Kd=D($a.pipes,la);if(-1===Kd)return this;$a.pipes.splice(Kd,1);--$a.pipesCount;1===$a.pipesCount&&($a.pipes=$a.pipes[0]);la.emit("unpipe",
this,dd);return this};l.prototype.on=function(la,$a){$a=G.prototype.on.call(this,la,$a);var dd=this._readableState;"data"===la?(dd.readableListening=0<this.listenerCount("readable"),!1!==dd.flowing&&this.resume()):"readable"!==la||dd.endEmitted||dd.readableListening||(dd.readableListening=dd.needReadable=!0,dd.flowing=!1,dd.emittedReadable=!1,Va("on readable",dd.length,dd.reading),dd.length?a(this):dd.reading||F.nextTick(q,this));return $a};l.prototype.addListener=l.prototype.on;l.prototype.removeListener=
function(la,$a){$a=G.prototype.removeListener.call(this,la,$a);"readable"===la&&F.nextTick(p,this);return $a};l.prototype.removeAllListeners=function(la){var $a=G.prototype.removeAllListeners.apply(this,arguments);"readable"!==la&&void 0!==la||F.nextTick(p,this);return $a};l.prototype.resume=function(){var la=this._readableState;la.flowing||(Va("resume"),la.flowing=!la.readableListening,la.resumeScheduled||(la.resumeScheduled=!0,F.nextTick(r,this,la)));la.paused=!1;return this};l.prototype.pause=
function(){Va("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(Va("pause"),this._readableState.flowing=!1,this.emit("pause"));this._readableState.paused=!0;return this};l.prototype.wrap=function(la){var $a=this,dd=this._readableState,Kd=!1;la.on("end",function(){Va("wrapped end");if(dd.decoder&&!dd.ended){var Aa=dd.decoder.end();Aa&&Aa.length&&$a.push(Aa)}$a.push(null)});la.on("data",function(Aa){Va("wrapped data");dd.decoder&&(Aa=dd.decoder.write(Aa));dd.objectMode&&
(null===Aa||void 0===Aa)||!(dd.objectMode||Aa&&Aa.length)||$a.push(Aa)||(Kd=!0,la.pause())});for(var ra in la)void 0===this[ra]&&"function"===typeof la[ra]&&(this[ra]=function(Aa){return function(){return la[Aa].apply(la,arguments)}}(ra));for(ra=0;ra<md.length;ra++)la.on(md[ra],this.emit.bind(this,md[ra]));this._read=function(Aa){Va("wrapped _read",Aa);Kd&&(Kd=!1,la.resume())};return this};"function"===typeof Symbol&&(l.prototype[Symbol.asyncIterator]=function(){void 0===Zb&&(Zb=FZ());return Zb(this)});
Object.defineProperty(l.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(l.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(l.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(la){this._readableState&&(this._readableState.flowing=la)}});l._fromList=w;Object.defineProperty(l.prototype,
"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(l.from=function(la,$a){void 0===$c&&($c=BZ());return $c(l,la,$a)});return sE}function RN(){function e(n,p){var q=this._transformState;q.transforming=!1;var r=q.writecb;if(null===r)return this.emit("error",new a);q.writechunk=null;q.writecb=null;null!=p&&this.push(p);r(n);n=this._readableState;n.reading=!1;(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function h(n){if(!(this instanceof
h))return new h(n);k.call(this,n);this._transformState={afterTransform:e.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;n&&("function"===typeof n.transform&&(this._transform=n.transform),"function"===typeof n.flush&&(this._flush=n.flush));this.on("prefinish",l)}function l(){var n=this;"function"!==typeof this._flush||this._readableState.destroyed?b(this,null,null):this._flush(function(p,q){b(n,
p,q)})}function b(n,p,q){if(p)return n.emit("error",p);null!=q&&n.push(q);if(n._writableState.length)throw new f;if(n._transformState.transforming)throw new d;return n.push(null)}if(SN)return tE;SN=!0;tE=h;var c=ju().codes,g=c.ERR_METHOD_NOT_IMPLEMENTED,a=c.ERR_MULTIPLE_CALLBACK,d=c.ERR_TRANSFORM_ALREADY_TRANSFORMING,f=c.ERR_TRANSFORM_WITH_LENGTH_0,k=ku();Dj(h,k);h.prototype.push=function(n,p){this._transformState.needTransform=!1;return k.prototype.push.call(this,n,p)};h.prototype._transform=function(n,
p,q){q(new g("_transform()"))};h.prototype._write=function(n,p,q){var r=this._transformState;r.writecb=q;r.writechunk=n;r.writeencoding=p;r.transforming||(n=this._readableState,(r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark))};h.prototype._read=function(n){n=this._transformState;null===n.writechunk||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};h.prototype._destroy=function(n,p){k.prototype._destroy.call(this,
n,function(q){p(q)})};return tE}function lu(e,h){if(!((this||on)instanceof lu))return new lu(e,h);h=h||{};TN.call(this||on,HZ(h,{objectMode:!0}));(this||on)._iterator=e;(this||on)._options=h;this.on("end",(this||on).destroy.bind(this||on,null,null))}function UN(e,h,l){h&&"string"!=typeof h&&(h=h.message||h.name);IZ(this||ik,{type:e,name:e,cause:"string"!=typeof h?h:l,message:h},"ewr")}function uE(e,h){Error.call(this||ik);Error.captureStackTrace&&Error.captureStackTrace(this||ik,(this||ik).constructor);
UN.call(this||ik,"CustomError",e,h)}function JZ(e,h,l){var b=function(c,g){UN.call(this||ik,h,c,g);"FilesystemError"==h&&((this||ik).code=(this||ik).cause.code,(this||ik).path=(this||ik).cause.path,(this||ik).errno=(this||ik).cause.errno,(this||ik).message=(e.errno[(this||ik).cause.errno]?e.errno[(this||ik).cause.errno].description:(this||ik).cause.message)+((this||ik).cause.path?" ["+(this||ik).cause.path+"]":""));Error.call(this||ik);Error.captureStackTrace&&Error.captureStackTrace(this||ik,b)};
b.prototype=l?new l:new uE;return b}function Bw(e){(this||wk)._levelup=e;(this||wk).batch=e.db.batch();(this||wk).ops=[];(this||wk).length=0}function VN(e,h){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var l=Object(e),b=1;b<arguments.length;b++){var c=arguments[b];if(null!=c)for(var g=Object.keys(Object(c)),a=0,d=g.length;a<d;a++){var f=g[a],k=Object.getOwnPropertyDescriptor(c,f);void 0!==k&&k.enumerable&&(l[f]=c[f])}}return l}function WN(){function e(f){return(e=
"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(f)}function h(f){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(f)}function l(f,k){return(l=Object.setPrototypeOf||function(n,p){return n.__proto__=p,n})(f,k)}function b(f,k,n){n||(n=Error);n=function(p){function q(r,t,w){if(!(this instanceof
q))throw new TypeError("Cannot call a class as a function");!0;r=h(q).call(this,"string"==typeof k?k:k(r,t,w));if(!r||"object"!==e(r)&&"function"!=typeof r){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");r=this}return r.code=f,r}return!function(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}});
t&&l(r,t)}(q,p),q}(n);d[f]=n}function c(f,k){if(Array.isArray(f)){var n=f.length;return f=f.map(function(p){return String(p)}),2<n?"one of ".concat(k," ").concat(f.slice(0,n-1).join(", "),", or ")+f[n-1]:2===n?"one of ".concat(k," ").concat(f[0]," or ").concat(f[1]):"of ".concat(k," ").concat(f[0])}return"of ".concat(k," ").concat(String(f))}if(XN)return vE;XN=!0;var g,a,d={};return b("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),b("ERR_INVALID_ARG_TYPE",function(f,k,n){var p;
if(void 0===g&&(g=wE()),g("string"==typeof f,"'name' must be a string"),"string"==typeof k&&"not "===k.substr(0,4)?(p="must not be",k=k.replace(/^not /,"")):p="must be",function(r,t,w){return(void 0===w||w>r.length)&&(w=r.length),r.substring(w-t.length,w)===t}(f," argument"))f="The ".concat(f," ").concat(p," ").concat(c(k,"type"));else{var q=function(r,t,w){return"number"!=typeof w&&(w=0),!(w+t.length>r.length)&&-1!==r.indexOf(t,w)}(f,".")?"property":"argument";f='The "'.concat(f,'" ').concat(q," ").concat(p,
" ").concat(c(k,"type"))}return f+=". Received type ".concat(e(n))},TypeError),b("ERR_INVALID_ARG_VALUE",function(f,k){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===a&&(a=tf);var p=a.inspect(k);return 128<p.length&&(p="".concat(p.slice(0,128),"...")),"The argument '".concat(f,"' ").concat(n,". Received ").concat(p)},TypeError),b("ERR_INVALID_RETURN_VALUE",function(f,k,n){var p;return p=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):
"type ".concat(e(n)),"Expected ".concat(f,' to be returned from the "').concat(k,'"')+" function but got ".concat(p,".")},TypeError),b("ERR_MISSING_ARGS",function(){for(var f=arguments.length,k=Array(f),n=0;n<f;n++)k[n]=arguments[n];void 0===g&&(g=wE());g(0<k.length,"At least one arg needs to be specified");f="The ";n=k.length;switch(k=k.map(function(p){return'"'.concat(p,'"')}),n){case 1:f+="".concat(k[0]," argument");break;case 2:f+="".concat(k[0]," and ").concat(k[1]," arguments");break;default:f+=
k.slice(0,n-1).join(", "),f+=", and ".concat(k[n-1]," arguments")}return"".concat(f," must be specified")},TypeError),vE.codes=d,vE}function KZ(){function e(G,oa){for(var ha=0;ha<oa.length;ha++){var Ha=oa[ha];Ha.enumerable=Ha.enumerable||!1;Ha.configurable=!0;"value"in Ha&&(Ha.writable=!0);Object.defineProperty(G,Ha.key,Ha)}}function h(G,oa){return!oa||"object"!==f(oa)&&"function"!=typeof oa?l(G):oa}function l(G){if(void 0===G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return G}function b(G){var oa="function"==typeof Map?new Map:void 0;return(b=function(ha){function Ha(){return g(ha,arguments,d(this).constructor)}if(null===ha||(Va=ha,-1===Function.toString.call(Va).indexOf("[native code]")))return ha;var Va;if("function"!=typeof ha)throw new TypeError("Super expression must either be null or a function");if(void 0!==oa){if(oa.has(ha))return oa.get(ha);oa.set(ha,Ha)}return Ha.prototype=Object.create(ha.prototype,{constructor:{value:Ha,enumerable:!1,writable:!0,configurable:!0}}),
a(Ha,ha)})(G)}function c(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(G){return!1}}function g(G,oa,ha){return(g=c()?Reflect.construct:function(Ha,Va,hc){var qc=[null];qc.push.apply(qc,Va);Ha=new (Function.bind.apply(Ha,qc));return hc&&a(Ha,hc.prototype),Ha}).apply(null,arguments)}function a(G,oa){return(a=Object.setPrototypeOf||function(ha,
Ha){return ha.__proto__=Ha,ha})(G,oa)}function d(G){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(oa){return oa.__proto__||Object.getPrototypeOf(oa)})(G)}function f(G){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(oa){return typeof oa}:function(oa){return oa&&"function"==typeof Symbol&&oa.constructor===Symbol&&oa!==Symbol.prototype?"symbol":typeof oa})(G)}function k(G,oa,ha){return(void 0===ha||ha>G.length)&&(ha=G.length),G.substring(ha-oa.length,ha)===
oa}function n(G){var oa=Object.keys(G),ha=Object.create(Object.getPrototypeOf(G));return oa.forEach(function(Ha){ha[Ha]=G[Ha]}),Object.defineProperty(ha,"message",{value:G.message}),ha}function p(G){return t(G,{compact:!1,customInspect:!1,depth:1E3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function q(G,oa,ha){var Ha="",Va="",hc=0,qc="",jc=!1,Ya=p(G),xa=Ya.split("\n"),tc=p(oa).split("\n"),Qb=0,wc="";if("strictEqual"===ha&&"object"===f(G)&&"object"===f(oa)&&
null!==G&&null!==oa&&(ha="strictEqualObject"),1===xa.length&&1===tc.length&&xa[0]!==tc[0]){var Zb=xa[0].length+tc[0].length;if(10>=Zb){if(!("object"===f(G)&&null!==G||"object"===f(oa)&&null!==oa||0===G&&0===oa))return"".concat(L[ha],"\n\n")+"".concat(xa[0]," !== ").concat(tc[0],"\n")}else if("strictEqualObject"!==ha&&Zb<(r.stderr&&r.stderr.isTTY?r.stderr.columns:80)){for(;xa[0][Qb]===tc[0][Qb];)Qb++;2<Qb&&(wc="\n  ".concat(function(la,$a){if($a=Math.floor($a),0==la.length||0==$a)return"";var dd=la.length*
$a;for($a=Math.floor(Math.log($a)/Math.log(2));$a;)la+=la,$a--;return la+la.substring(0,dd-la.length)}(" ",Qb),"^"),Qb=0)}}G=xa[xa.length-1];for(oa=tc[tc.length-1];G===oa&&(2>Qb++?qc="\n  ".concat(G).concat(qc):Ha=G,xa.pop(),tc.pop(),0!==xa.length&&0!==tc.length);)G=xa[xa.length-1],oa=tc[tc.length-1];G=Math.max(xa.length,tc.length);if(0===G){Ha=Ya.split("\n");if(30<Ha.length)for(Ha[26]="".concat(x,"...").concat(F);27<Ha.length;)Ha.pop();return"".concat(L.notIdentical,"\n\n").concat(Ha.join("\n"),
"\n")}3<Qb&&(qc="\n".concat(x,"...").concat(F).concat(qc),jc=!0);""!==Ha&&(qc="\n  ".concat(Ha).concat(qc),Ha="");Ya=0;ha=L[ha]+"\n".concat(B,"+ actual").concat(F," ").concat(D,"- expected").concat(F);oa=" ".concat(x,"...").concat(F," Lines skipped");for(Qb=0;Qb<G;Qb++){Zb=Qb-hc;if(xa.length<Qb+1)1<Zb&&2<Qb&&(4<Zb?(Va+="\n".concat(x,"...").concat(F),jc=!0):3<Zb&&(Va+="\n  ".concat(tc[Qb-2]),Ya++),Va+="\n  ".concat(tc[Qb-1]),Ya++),hc=Qb,Ha+="\n".concat(D,"-").concat(F," ").concat(tc[Qb]),Ya++;else if(tc.length<
Qb+1)1<Zb&&2<Qb&&(4<Zb?(Va+="\n".concat(x,"...").concat(F),jc=!0):3<Zb&&(Va+="\n  ".concat(xa[Qb-2]),Ya++),Va+="\n  ".concat(xa[Qb-1]),Ya++),hc=Qb,Va+="\n".concat(B,"+").concat(F," ").concat(xa[Qb]),Ya++;else{var $c=tc[Qb],Oa=xa[Qb],md=Oa!==$c&&(!k(Oa,",")||Oa.slice(0,-1)!==$c);md&&k($c,",")&&$c.slice(0,-1)===Oa&&(md=!1,Oa+=",");md?(1<Zb&&2<Qb&&(4<Zb?(Va+="\n".concat(x,"...").concat(F),jc=!0):3<Zb&&(Va+="\n  ".concat(xa[Qb-2]),Ya++),Va+="\n  ".concat(xa[Qb-1]),Ya++),hc=Qb,Va+="\n".concat(B,"+").concat(F,
" ").concat(Oa),Ha+="\n".concat(D,"-").concat(F," ").concat($c),Ya+=2):(Va+=Ha,Ha="",1!==Zb&&0!==Qb||(Va+="\n  ".concat(Oa),Ya++))}if(20<Ya&&Qb<G-2)return"".concat(ha).concat(oa,"\n").concat(Va,"\n").concat(x,"...").concat(F).concat(Ha,"\n")+"".concat(x,"...").concat(F)}return"".concat(ha).concat(jc?oa:"","\n").concat(Va).concat(Ha).concat(qc).concat(wc)}if(YN)return ZN;YN=!0;var r=tj,t=tf.inspect,w=WN().codes.ERR_INVALID_ARG_TYPE,x="",B="",D="",F="",L={deepStrictEqual:"Expected values to be strictly deep-equal:",
strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',
notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};return ZN=function(G){function oa(Ha){if(!(this instanceof oa))throw new TypeError("Cannot call a class as a function");if(!0,"object"!==f(Ha)||null===Ha)throw new w("options","Object",Ha);var Va=Ha.message,hc=Ha.operator,qc=Ha.stackStartFn,jc=Ha.actual;Ha=Ha.expected;var Ya=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=Va)var xa=h(this,d(oa).call(this,String(Va)));else if(r.stderr&&
r.stderr.isTTY&&(r.stderr&&r.stderr.getColorDepth&&1!==r.stderr.getColorDepth()?(x="\u001b[34m",B="\u001b[32m",F="\u001b[39m",D="\u001b[31m"):(x="",B="",F="",D="")),"object"===f(jc)&&null!==jc&&"object"===f(Ha)&&null!==Ha&&"stack"in jc&&jc instanceof Error&&"stack"in Ha&&Ha instanceof Error&&(jc=n(jc),Ha=n(Ha)),"deepStrictEqual"===hc||"strictEqual"===hc)xa=h(this,d(oa).call(this,q(jc,Ha,hc)));else if("notDeepStrictEqual"===hc||"notStrictEqual"===hc){xa=L[hc];var tc=p(jc).split("\n");if("notStrictEqual"===
hc&&"object"===f(jc)&&null!==jc&&(xa=L.notStrictEqualObject),30<tc.length)for(tc[26]="".concat(x,"...").concat(F);27<tc.length;)tc.pop();xa=1===tc.length?h(this,d(oa).call(this,"".concat(xa," ").concat(tc[0]))):h(this,d(oa).call(this,"".concat(xa,"\n\n").concat(tc.join("\n"),"\n")))}else{xa=p(jc);tc="";var Qb=L[hc];"notDeepEqual"===hc||"notEqual"===hc?1024<(xa="".concat(L[hc],"\n\n").concat(xa)).length&&(xa="".concat(xa.slice(0,1021),"...")):(tc="".concat(p(Ha)),512<xa.length&&(xa="".concat(xa.slice(0,
509),"...")),512<tc.length&&(tc="".concat(tc.slice(0,509),"...")),"deepEqual"===hc||"equal"===hc?xa="".concat(Qb,"\n\n").concat(xa,"\n\nshould equal\n\n"):tc=" ".concat(hc," ").concat(tc));xa=h(this,d(oa).call(this,"".concat(xa).concat(tc)))}return Error.stackTraceLimit=Ya,xa.generatedMessage=!Va,Object.defineProperty(l(xa),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),xa.code="ERR_ASSERTION",xa.actual=jc,xa.expected=Ha,xa.operator=hc,Error.captureStackTrace&&
Error.captureStackTrace(l(xa),qc),xa.stack,xa.name="AssertionError",h(xa)}var ha;return!function(Ha,Va){if("function"!=typeof Va&&null!==Va)throw new TypeError("Super expression must either be null or a function");Ha.prototype=Object.create(Va&&Va.prototype,{constructor:{value:Ha,writable:!0,configurable:!0}});Va&&a(Ha,Va)}(oa,G),ha=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:t.custom,value:function(Ha,Va){return t(this,function(hc){for(var qc=
1;qc<arguments.length;qc++){var jc=null!=arguments[qc]?arguments[qc]:{},Ya=Object.keys(jc);"function"==typeof Object.getOwnPropertySymbols&&(Ya=Ya.concat(Object.getOwnPropertySymbols(jc).filter(function(xa){return Object.getOwnPropertyDescriptor(jc,xa).enumerable})));Ya.forEach(function(xa){var tc=jc[xa];xa in hc?Object.defineProperty(hc,xa,{value:tc,enumerable:!0,configurable:!0,writable:!0}):hc[xa]=tc})}return hc}({},Va,{customInspect:!1,depth:0}))}}],e(oa.prototype,ha),oa}(b(Error))}function $N(e,
h){if(!(e=function(l){if(Array.isArray(l))return l}(e)||function(l,b){var c=[],g=!0,a=!1,d=void 0;try{for(var f,k=l[Symbol.iterator]();!(g=(f=k.next()).done)&&(c.push(f.value),!b||c.length!==b);g=!0);}catch(n){a=!0,d=n}finally{try{g||null==k.return||k.return()}finally{if(a)throw d;}}return c}(e,h)))throw new TypeError("Invalid attempt to destructure non-iterable instance");return e}function pn(e){return(pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&
"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(e)}function xE(e){return e.call.bind(e)}function LZ(e){if(0===e.length||10<e.length)return!0;for(var h=0;h<e.length;h++){var l=e.charCodeAt(h);if(48>l||57<l)return!0}return 10===e.length&&e>=Math.pow(2,32)}function Rz(e){return Object.keys(e).filter(LZ).concat(Sz(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function aO(e,h){if(e===h)return 0;for(var l=e.length,b=h.length,c=0,g=Math.min(l,b);c<
g;++c)if(e[c]!==h[c]){l=e[c];b=h[c];break}return l<b?-1:b<l?1:0}function Fm(e,h,l,b){if(e===h)return 0!==e||!l||bO(e,h);if(l){if("object"!==pn(e))return"number"==typeof e&&yE(e)&&yE(h);if("object"!==pn(h)||null===e||null===h||Object.getPrototypeOf(e)!==Object.getPrototypeOf(h))return!1}else{if(null===e||"object"!==pn(e))return(null===h||"object"!==pn(h))&&e==h;if(null===h||"object"!==pn(h))return!1}var c=cO(e);if(c!==cO(h))return!1;if(Array.isArray(e)){if(e.length!==h.length)return!1;c=Rz(e);var g=
Rz(h);return c.length===g.length&&Cw(e,h,l,b,1,c)}if("[object Object]"===c&&(!Tz(e)&&Tz(h)||!Uz(e)&&Uz(h)))return!1;if(dO(e)){if(!dO(h)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(h))return!1}else if(eO(e)){if(!eO(h)||(MZ?e.source!==h.source||e.flags!==h.flags:RegExp.prototype.toString.call(e)!==RegExp.prototype.toString.call(h)))return!1}else if(NZ(e)||e instanceof Error){if(e.message!==h.message||e.name!==h.name)return!1}else{if(OZ(e)){if(l||!PZ(e)&&!QZ(e)){if(!function(a,d){return a.byteLength===
d.byteLength&&0===aO(new Uint8Array(a.buffer,a.byteOffset,a.byteLength),new Uint8Array(d.buffer,d.byteOffset,d.byteLength))}(e,h))return!1}else if(!function(a,d){if(a.byteLength!==d.byteLength)return!1;for(var f=0;f<a.byteLength;f++)if(a[f]!==d[f])return!1;return!0}(e,h))return!1;c=Rz(e);g=Rz(h);return c.length===g.length&&Cw(e,h,l,b,0,c)}if(Uz(e))return!(!Uz(h)||e.size!==h.size)&&Cw(e,h,l,b,2);if(Tz(e))return!(!Tz(h)||e.size!==h.size)&&Cw(e,h,l,b,3);if(RZ(e)){if(e.byteLength!==h.byteLength||0!==
aO(new Uint8Array(e),new Uint8Array(h)))return!1}else if(SZ(e)&&!function(a,d){return fO(a)?fO(d)&&bO(Number.prototype.valueOf.call(a),Number.prototype.valueOf.call(d)):gO(a)?gO(d)&&String.prototype.valueOf.call(a)===String.prototype.valueOf.call(d):hO(a)?hO(d)&&Boolean.prototype.valueOf.call(a)===Boolean.prototype.valueOf.call(d):iO(a)?iO(d)&&BigInt.prototype.valueOf.call(a)===BigInt.prototype.valueOf.call(d):TZ(d)&&Symbol.prototype.valueOf.call(a)===Symbol.prototype.valueOf.call(d)}(e,h))return!1}return Cw(e,
h,l,b,0)}function jO(e,h){return h.filter(function(l){return Vz(e,l)})}function Cw(e,h,l,b,c,g){if(5===arguments.length){g=Object.keys(e);var a=Object.keys(h);if(g.length!==a.length)return!1}for(var d=0;d<g.length;d++)if(!Dw(h,g[d]))return!1;if(l&&5===arguments.length)if(a=Sz(e),0!==a.length){var f=0;for(d=0;d<a.length;d++){var k=a[d];if(Vz(e,k)){if(!Vz(h,k))return!1;g.push(k);f++}else if(Vz(h,k))return!1}d=Sz(h);if(a.length!==d.length&&jO(h,d).length!==f)return!1}else if(a=Sz(h),0!==a.length&&0!==
jO(h,a).length)return!1;if(0===g.length&&(0===c||1===c&&0===e.length||0===e.size))return!0;if(void 0===b)b={val1:new Map,val2:new Map,position:0};else{a=b.val1.get(e);if(void 0!==a&&(f=b.val2.get(h),void 0!==f))return a===f;b.position++}b.val1.set(e,b.position);b.val2.set(h,b.position);a=UZ(e,h,l,g,b,c);return b.val1.delete(e),b.val2.delete(h),a}function kO(e,h,l,b){for(var c=Wz(e),g=0;g<c.length;g++){var a=c[g];if(Fm(h,a,l,b))return e.delete(a),!0}return!1}function lO(e){switch(pn(e)){case "undefined":return null;
case "object":return;case "symbol":return!1;case "string":e=+e;case "number":if(yE(e))return!1}return!0}function mO(e,h,l,b,c,g){for(var a=Wz(e),d=0;d<a.length;d++){var f=a[d];if(Fm(l,f,c,g)&&Fm(b,h.get(f),c,g))return e.delete(f),!0}return!1}function UZ(e,h,l,b,c,g){var a=0;if(2===g){if(!function(d,f,k,n){for(var p=null,q=Wz(d),r=0;r<q.length;r++){var t=q[r];if("object"===pn(t)&&null!==t)null===p&&(p=new Set),p.add(t);else if(!f.has(t)){if(k)return!1;var w=d,x=f,B=lO(t);if(null!=B?!B:!x.has(B)||w.has(B))return!1;
null===p&&(p=new Set);p.add(t)}}if(null!==p){f=Wz(f);for(q=0;q<f.length;q++)if(r=f[q],"object"===pn(r)&&null!==r){if(!kO(p,r,k,n))return!1}else if(!k&&!d.has(r)&&!kO(p,r,k,n))return!1;return 0===p.size}return!0}(e,h,l,c))return!1}else if(3===g){if(!function(d,f,k,n){for(var p=null,q=nO(d),r=0;r<q.length;r++){var t=$N(q[r],2),w=t[0],x=t[1];if("object"===pn(w)&&null!==w)null===p&&(p=new Set),p.add(w);else if(t=f.get(w),void 0===t&&!f.has(w)||!Fm(x,t,k,n)){if(k)return!1;t=d;var B=f,D=n,F=lO(w);if(null!=
F)t=F;else{var L=B.get(F);t=!(void 0===L&&!B.has(F)||!Fm(x,L,!1,D))&&!t.has(F)&&Fm(x,L,!1,D)}if(!t)return!1;null===p&&(p=new Set);p.add(w)}}if(null!==p){f=nO(f);for(q=0;q<f.length;q++)if(r=$N(f[q],2),r=(w=r[0],r[1]),"object"===pn(w)&&null!==w){if(!mO(p,d,w,r,k,n))return!1}else if(!(k||d.has(w)&&Fm(d.get(w),r,!1,n)||mO(p,d,w,r,!1,n)))return!1;return 0===p.size}return!0}(e,h,l,c))return!1}else if(1===g)for(;a<e.length;a++){if(!Dw(e,a)){if(Dw(h,a))return!1;for(b=Object.keys(e);a<b.length;a++)if(g=b[a],
!Dw(h,g)||!Fm(e[g],h[g],l,c))return!1;return b.length===Object.keys(h).length}if(!Dw(h,a)||!Fm(e[a],h[a],l,c))return!1}for(a=0;a<b.length;a++)if(g=b[a],!Fm(e[g],h[g],l,c))return!1;return!0}function wE(){function e(xa){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(tc){return typeof tc}:function(tc){return tc&&"function"==typeof Symbol&&tc.constructor===Symbol&&tc!==Symbol.prototype?"symbol":typeof tc})(xa)}function h(){r=oO.isDeepEqual;t=oO.isDeepStrictEqual}function l(xa){if(xa.message instanceof
Error)throw xa.message;throw new G(xa);}function b(xa,tc,Qb,wc){if(!Qb){var Zb=!1;if(0===tc)Zb=!0,wc="No value argument passed to `assert.ok()`";else if(wc instanceof Error)throw wc;xa=new G({actual:Qb,expected:!0,message:wc,operator:"==",stackStartFn:xa});throw xa.generatedMessage=Zb,xa;}}function c(){for(var xa=arguments.length,tc=Array(xa),Qb=0;Qb<xa;Qb++)tc[Qb]=arguments[Qb];b.apply(void 0,[c,tc.length].concat(tc))}function g(xa,tc,Qb,wc){if("function"!=typeof tc){if(Ha(tc))return tc.test(xa);
if(2===arguments.length)throw new B("expected",["Function","RegExp"],tc);if("object"!==e(xa)||null===xa){var Zb=new G({actual:xa,expected:tc,message:Qb,operator:"deepStrictEqual",stackStartFn:wc});throw Zb.operator=wc.name,Zb;}var $c=Object.keys(tc);if(tc instanceof Error)$c.push("name","message");else if(0===$c.length)throw new D("error",tc,"may not be an empty object");return void 0===r&&h(),$c.forEach(function(Oa){if(!("string"==typeof xa[Oa]&&Ha(tc[Oa])&&tc[Oa].test(xa[Oa])||Oa in xa&&t(xa[Oa],
tc[Oa]))){if(!Qb){Oa=new Ya(xa,$c);var md=new Ya(tc,$c,xa);Oa=new G({actual:Oa,expected:md,operator:"deepStrictEqual",stackStartFn:wc});throw Oa.actual=xa,Oa.expected=tc,Oa.operator=wc.name,Oa;}l({actual:xa,expected:tc,message:Qb,operator:wc.name,stackStartFn:wc})}}),!0}return void 0!==tc.prototype&&xa instanceof tc||!Error.isPrototypeOf(tc)&&!0===tc.call({},xa)}function a(xa){if("function"!=typeof xa)throw new B("fn","Function",xa);try{xa()}catch(tc){return tc}return jc}function d(xa){return ha(xa)||
null!==xa&&"object"===e(xa)&&"function"==typeof xa.then&&"function"==typeof xa.catch}function f(xa){return Promise.resolve().then(function(){var tc;if("function"==typeof xa){if(!d(tc=xa()))throw new F("instance of Promise","promiseFn",tc);}else{if(!d(xa))throw new B("promiseFn",["Function","Promise"],xa);tc=xa}return Promise.resolve().then(function(){return tc}).then(function(){return jc}).catch(function(Qb){return Qb})})}function k(xa,tc,Qb,wc){if("string"==typeof Qb){if(4===arguments.length)throw new B("error",
["Object","Error","Function","RegExp"],Qb);if("object"===e(tc)&&null!==tc){if(tc.message===Qb)throw new x("error/message",'The error message "'.concat(tc.message,'" is identical to the message.'));}else if(tc===Qb)throw new x("error/message",'The error "'.concat(tc,'" is identical to the message.'));wc=Qb;Qb=void 0}else if(null!=Qb&&"object"!==e(Qb)&&"function"!=typeof Qb)throw new B("error",["Object","Error","Function","RegExp"],Qb);if(tc===jc){var Zb="";Qb&&Qb.name&&(Zb+=" (".concat(Qb.name,")"));
Zb+=wc?": ".concat(wc):".";l({actual:void 0,expected:Qb,operator:xa.name,message:"Missing expected ".concat("rejects"===xa.name?"rejection":"exception").concat(Zb),stackStartFn:xa})}if(Qb&&!g(tc,Qb,wc,xa))throw tc;}function n(xa,tc,Qb,wc){if(tc!==jc){if("string"==typeof Qb&&(wc=Qb,Qb=void 0),!Qb||g(tc,Qb))wc=wc?": ".concat(wc):".",l({actual:tc,expected:Qb,operator:xa.name,message:"Got unwanted ".concat("doesNotReject"===xa.name?"rejection":"exception").concat(wc,"\n")+'Actual message: "'.concat(tc&&
tc.message,'"'),stackStartFn:xa});throw tc;}}function p(){for(var xa=arguments.length,tc=Array(xa),Qb=0;Qb<xa;Qb++)tc[Qb]=arguments[Qb];b.apply(void 0,[p,tc.length].concat(tc))}if(pO)return zE;pO=!0;var q=tj,r,t,w=WN().codes,x=w.ERR_AMBIGUOUS_ARGUMENT,B=w.ERR_INVALID_ARG_TYPE,D=w.ERR_INVALID_ARG_VALUE,F=w.ERR_INVALID_RETURN_VALUE,L=w.ERR_MISSING_ARGS,G=KZ(),oa=tf.inspect;w=tf.types;var ha=w.isPromise,Ha=w.isRegExp;w=Object.assign?Object.assign:VZ.assign;var Va=Object.is?Object.is:qO,hc=!1,qc=zE=c,
jc={};qc.fail=function Oa(tc,Qb,wc,Zb,$c){var md=arguments.length;if(0===md)var la="Failed";else 1===md?(wc=tc,tc=void 0):(!1===hc&&(hc=!0,(q.emitWarning?q.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===md&&(Zb="!="));if(wc instanceof Error)throw wc;md={actual:tc,expected:Qb,operator:void 0===Zb?"fail":Zb,stackStartFn:$c||Oa};void 0!==wc&&(md.message=
wc);md=new G(md);throw la&&(md.message=la,md.generatedMessage=!0),md;};qc.AssertionError=G;qc.ok=c;qc.equal=function $c(Qb,wc,Zb){if(2>arguments.length)throw new L("actual","expected");Qb!=wc&&l({actual:Qb,expected:wc,message:Zb,operator:"==",stackStartFn:$c})};qc.notEqual=function Oa(wc,Zb,$c){if(2>arguments.length)throw new L("actual","expected");wc==Zb&&l({actual:wc,expected:Zb,message:$c,operator:"!=",stackStartFn:Oa})};qc.deepEqual=function md(Zb,$c,Oa){if(2>arguments.length)throw new L("actual",
"expected");void 0===r&&h();r(Zb,$c)||l({actual:Zb,expected:$c,message:Oa,operator:"deepEqual",stackStartFn:md})};qc.notDeepEqual=function la($c,Oa,md){if(2>arguments.length)throw new L("actual","expected");void 0===r&&h();r($c,Oa)&&l({actual:$c,expected:Oa,message:md,operator:"notDeepEqual",stackStartFn:la})};qc.deepStrictEqual=function $a(Oa,md,la){if(2>arguments.length)throw new L("actual","expected");void 0===r&&h();t(Oa,md)||l({actual:Oa,expected:md,message:la,operator:"deepStrictEqual",stackStartFn:$a})};
qc.notDeepStrictEqual=function dd(md,la,$a){if(2>arguments.length)throw new L("actual","expected");void 0===r&&h();t(md,la)&&l({actual:md,expected:la,message:$a,operator:"notDeepStrictEqual",stackStartFn:dd})};qc.strictEqual=function Kd(la,$a,dd){if(2>arguments.length)throw new L("actual","expected");Va(la,$a)||l({actual:la,expected:$a,message:dd,operator:"strictEqual",stackStartFn:Kd})};qc.notStrictEqual=function ra($a,dd,Kd){if(2>arguments.length)throw new L("actual","expected");Va($a,dd)&&l({actual:$a,
expected:dd,message:Kd,operator:"notStrictEqual",stackStartFn:ra})};var Ya=function Aa(dd,Kd,ra){var V=this;if(!(this instanceof Aa))throw new TypeError("Cannot call a class as a function");!0;Kd.forEach(function(ea){ea in dd&&(void 0!==ra&&"string"==typeof ra[ea]&&Ha(dd[ea])&&dd[ea].test(ra[ea])?V[ea]=ra[ea]:V[ea]=dd[ea])})};return qc.throws=function ra(Kd){for(var Aa=arguments.length,V=Array(1<Aa?Aa-1:0),ea=1;ea<Aa;ea++)V[ea-1]=arguments[ea];k.apply(void 0,[ra,a(Kd)].concat(V))},qc.rejects=function Aa(ra){for(var V=
arguments.length,ea=Array(1<V?V-1:0),Mb=1;Mb<V;Mb++)ea[Mb-1]=arguments[Mb];return f(ra).then(function(U){return k.apply(void 0,[Aa,U].concat(ea))})},qc.doesNotThrow=function V(Aa){for(var ea=arguments.length,Mb=Array(1<ea?ea-1:0),U=1;U<ea;U++)Mb[U-1]=arguments[U];n.apply(void 0,[V,a(Aa)].concat(Mb))},qc.doesNotReject=function ea(V){for(var Mb=arguments.length,U=Array(1<Mb?Mb-1:0),Sa=1;Sa<Mb;Sa++)U[Sa-1]=arguments[Sa];return f(V).then(function(S){return n.apply(void 0,[ea,S].concat(U))})},qc.ifError=
function Mb(ea){if(null!=ea){var U="ifError got unwanted exception: ";"object"===e(ea)&&"string"==typeof ea.message?0===ea.message.length&&ea.constructor?U+=ea.constructor.name:U+=ea.message:U+=oa(ea);U=new G({actual:ea,expected:null,operator:"ifError",message:U,stackStartFn:Mb});ea=ea.stack;if("string"==typeof ea){ea=ea.split("\n");ea.shift();for(var Sa=U.stack.split("\n"),S=0;S<ea.length;S++){var Sc=Sa.indexOf(ea[S]);if(-1!==Sc){Sa=Sa.slice(0,Sc);break}}U.stack="".concat(Sa.join("\n"),"\n").concat(ea.join("\n"))}throw U;
}},qc.strict=w(p,qc,{equal:qc.strictEqual,deepEqual:qc.deepStrictEqual,notEqual:qc.notStrictEqual,notDeepEqual:qc.notDeepStrictEqual}),qc.strict.strict=qc.strict,zE}function uj(e,h,l){if(!((this||Ri)instanceof uj))return new uj(e,h,l);Xz.call(this||Ri);this.setMaxListeners(Infinity);"function"===typeof h&&(l=h,h={});h=h||{};if(!e||"object"!==typeof e){e=new WZ("First argument must be an abstract-leveldown compliant store");if("function"===typeof l)return Yz.nextTick(l,e);throw e;}XZ.strictEqual(typeof e.status,
"string",".status required, old abstract-leveldown");(this||Ri).options=Ew(h);(this||Ri)._db=e;(this||Ri).db=new rO(e);this.open(l)}function Zz(e,h){if(!e._isOpening()&&!e.isOpen())return Yz.nextTick(h,new AE("Database is not open")),!0}function go(e,h){return Object.hasOwnProperty.call(e,h)&&h}function YZ(e){return e}function $z(e){return e}function BE(e){return void 0===e||null===e||CE.isBuffer(e)}function ul(e){if(!((this||gp)instanceof ul))return new ul(e);(this||gp).opts=e||{};(this||gp).encodings=
DE}function sO(e){var h=e.length;if(0<h%4)throw Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("=");return-1===e&&(e=h),[e,e===h?0:4-e%4]}function ZZ(e,h,l){for(var b,c=[],g=h;g<l;g+=3)h=(e[g]<<16&16711680)+(e[g+1]<<8&65280)+(255&e[g+2]),c.push(ho[(b=h)>>18&63]+ho[b>>12&63]+ho[b>>6&63]+ho[63&b]);return c.join("")}function hp(e){if(2147483647<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return Object.setPrototypeOf(e,If.prototype),
e}function If(e,h,l){if("number"==typeof e){if("string"==typeof h)throw new TypeError('The "string" argument must be of type string. Received type number');return EE(e)}return tO(e,h,l)}function tO(e,h,l){if("string"==typeof e)return function(c,g){"string"==typeof g&&""!==g||(g="utf8");if(!If.isEncoding(g))throw new TypeError("Unknown encoding: "+g);var a=0|uO(c,g),d=hp(a);c=d.write(c,g);c!==a&&(d=d.slice(0,c));return d}(e,h);if(ArrayBuffer.isView(e))return FE(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
Jc(e));if(ip(e,ArrayBuffer)||e&&ip(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(ip(e,SharedArrayBuffer)||e&&ip(e.buffer,SharedArrayBuffer)))return $Z(e,h,l);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var b=e.valueOf&&e.valueOf();if(null!=b&&b!==e)return If.from(b,h,l);if(b=function(c){if(If.isBuffer(c)){var g=0|GE(c.length),a=hp(g);return 0===a.length||c.copy(a,0,0,g),a}if(void 0!==c.length)return(g="number"!=
typeof c.length)||(g=c.length,g=g!=g),g?hp(0):FE(c);if("Buffer"===c.type&&Array.isArray(c.data))return FE(c.data)}(e))return b;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return If.from(e[Symbol.toPrimitive]("string"),h,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+Jc(e));}function vO(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');
if(0>e)throw new RangeError('The value "'+e+'" is invalid for option "size"');}function EE(e){return vO(e),hp(0>e?0:0|GE(e))}function FE(e){for(var h=0>e.length?0:0|GE(e.length),l=hp(h),b=0;b<h;b+=1)l[b]=255&e[b];return l}function $Z(e,h,l){if(0>h||e.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<h+(l||0))throw new RangeError('"length" is outside of buffer bounds');var b;return b=void 0===h&&void 0===l?new Uint8Array(e):void 0===l?new Uint8Array(e,h):new Uint8Array(e,
h,l),Object.setPrototypeOf(b,If.prototype),b}function GE(e){if(2147483647<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return 0|e}function uO(e,h){if(If.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ip(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+Jc(e));var l=e.length,b=2<arguments.length&&!0===arguments[2];
if(!b&&0===l)return 0;for(var c=!1;;)switch(h){case "ascii":case "latin1":case "binary":return l;case "utf8":case "utf-8":return HE(e).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*l;case "hex":return l>>>1;case "base64":return wO(e).length;default:if(c)return b?-1:HE(e).length;h=(""+h).toLowerCase();c=!0}}function a_(e,h,l){var b=!1;if(((void 0===h||0>h)&&(h=0),h>this.length)||((void 0===l||l>this.length)&&(l=this.length),0>=l)||(l>>>=0)<=(h>>>=0))return"";for(e||(e="utf8");;)switch(e){case "hex":e=
this.length;(!h||0>h)&&(h=0);(!l||0>l||l>e)&&(l=e);for(e="";h<l;++h)e+=b_[this[h]];return e;case "utf8":case "utf-8":return xO(this,h,l);case "ascii":e="";for(l=Math.min(this.length,l);h<l;++h)e+=String.fromCharCode(127&this[h]);return e;case "latin1":case "binary":e="";for(l=Math.min(this.length,l);h<l;++h)e+=String.fromCharCode(this[h]);return e;case "base64":return 0===h&&l===this.length?IE.fromByteArray(this):IE.fromByteArray(this.slice(h,l));case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":h=
this.slice(h,l);l="";for(e=0;e<h.length;e+=2)l+=String.fromCharCode(h[e]+256*h[e+1]);return l;default:if(b)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();b=!0}}function Zr(e,h,l){var b=e[h];e[h]=e[l];e[l]=b}function yO(e,h,l,b,c){if(0===e.length)return-1;"string"==typeof l?(b=l,l=0):2147483647<l?l=2147483647:-2147483648>l&&(l=-2147483648);var g=l=+l;if(g!=g&&(l=c?0:e.length-1),0>l&&(l=e.length+l),l>=e.length){if(c)return-1;l=e.length-1}else if(0>l){if(!c)return-1;l=0}if("string"==
typeof h&&(h=If.from(h,b)),If.isBuffer(h))return 0===h.length?-1:zO(e,h,l,b,c);if("number"==typeof h)return h&=255,"function"==typeof Uint8Array.prototype.indexOf?c?Uint8Array.prototype.indexOf.call(e,h,l):Uint8Array.prototype.lastIndexOf.call(e,h,l):zO(e,[h],l,b,c);throw new TypeError("val must be string, number or Buffer");}function zO(e,h,l,b,c){function g(k,n){return 1===a?k[n]:k.readUInt16BE(n*a)}var a=1,d=e.length,f=h.length;if(void 0!==b&&("ucs2"===(b=String(b).toLowerCase())||"ucs-2"===b||
"utf16le"===b||"utf-16le"===b)){if(2>e.length||2>h.length)return-1;a=2;d/=2;f/=2;l/=2}if(c)for(b=-1;l<d;l++)if(g(e,l)===g(h,-1===b?0:l-b)){if(-1===b&&(b=l),l-b+1===f)return b*a}else-1!==b&&(l-=l-b),b=-1;else for(l+f>d&&(l=d-f);0<=l;l--){d=!0;for(b=0;b<f;b++)if(g(e,l+b)!==g(h,b)){d=!1;break}if(d)return l}return-1}function AO(e,h,l,b){for(var c=[],g=0;g<h.length;++g)c.push(255&h.charCodeAt(g));return aA(c,e,l,b)}function xO(e,h,l){l=Math.min(e.length,l);for(var b=[];h<l;){var c,g,a=e[h],d=null,f=239<
a?4:223<a?3:191<a?2:1;if(h+f<=l)switch(f){case 1:128>a&&(d=a);break;case 2:128==(192&(c=e[h+1]))&&127<(g=(31&a)<<6|63&c)&&(d=g);break;case 3:c=e[h+1];var k=e[h+2];128==(192&c)&&128==(192&k)&&2047<(g=(15&a)<<12|(63&c)<<6|63&k)&&(55296>g||57343<g)&&(d=g);break;case 4:c=e[h+1];k=e[h+2];var n=e[h+3];128==(192&c)&&128==(192&k)&&128==(192&n)&&65535<(g=(15&a)<<18|(63&c)<<12|(63&k)<<6|63&n)&&1114112>g&&(d=g)}null===d?(d=65533,f=1):65535<d&&(d-=65536,b.push(d>>>10&1023|55296),d=56320|1023&d);b.push(d);h+=
f}e=b.length;if(4096>=e)b=String.fromCharCode.apply(String,b);else{l="";for(c=0;c<e;)l+=String.fromCharCode.apply(String,b.slice(c,c+=4096));b=l}return b}function Ik(e,h,l){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+h>l)throw new RangeError("Trying to access beyond buffer length");}function Jl(e,h,l,b,c,g){if(!If.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>c||h<g)throw new RangeError('"value" argument is out of bounds');if(l+b>e.length)throw new RangeError("Index out of range");
}function BO(e,h,l,b,c,g){if(l+b>e.length)throw new RangeError("Index out of range");if(0>l)throw new RangeError("Index out of range");}function CO(e,h,l,b,c){return h=+h,l>>>=0,c||BO(e,0,l,4),mu.write(e,h,l,b,23,4),l+4}function DO(e,h,l,b,c){return h=+h,l>>>=0,c||BO(e,0,l,8),mu.write(e,h,l,b,52,8),l+8}function HE(e,h){var l;h=h||1/0;for(var b=e.length,c=null,g=[],a=0;a<b;++a){if(55295<(l=e.charCodeAt(a))&&57344>l){if(!c){if(56319<l){-1<(h-=3)&&g.push(239,191,189);continue}if(a+1===b){-1<(h-=3)&&
g.push(239,191,189);continue}c=l;continue}if(56320>l){-1<(h-=3)&&g.push(239,191,189);c=l;continue}l=65536+(c-55296<<10|l-56320)}else c&&-1<(h-=3)&&g.push(239,191,189);if(c=null,128>l){if(0>--h)break;g.push(l)}else if(2048>l){if(0>(h-=2))break;g.push(l>>6|192,63&l|128)}else if(65536>l){if(0>(h-=3))break;g.push(l>>12|224,l>>6&63|128,63&l|128)}else{if(!(1114112>l))throw Error("Invalid code point");if(0>(h-=4))break;g.push(l>>18|240,l>>12&63|128,l>>6&63|128,63&l|128)}}return g}function wO(e){return IE.toByteArray(function(h){if(2>
(h=(h=h.split("=")[0]).trim().replace(c_,"")).length)return"";for(;0!=h.length%4;)h+="=";return h}(e))}function aA(e,h,l,b){for(var c=0;c<b&&!(c+l>=h.length||c>=e.length);++c)h[c+l]=e[c];return c}function ip(e,h){return e instanceof h||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===h.name}function EO(e,h){for(var l in e)h[l]=e[l]}function $r(e,h,l){return io(e,h,l)}function Fw(e){switch(this.encoding=function(h){var l=function(b){if(!b)return"utf8";for(var c;;)switch(b){case "utf8":case "utf-8":return"utf8";
case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return b;default:if(c)return;b=(""+b).toLowerCase();c=!0}}(h);if("string"!=typeof l&&(JE.isEncoding===FO||!FO(h)))throw Error("Unknown encoding: "+h);return l||h}(e),this.encoding){case "utf16le":this.text=d_;this.end=e_;e=4;break;case "utf8":this.fillLast=f_;e=4;break;case "base64":this.text=g_;this.end=h_;e=3;break;default:return this.write=i_,
this.end=j_,void 0}this.lastTotal=this.lastNeed=0;this.lastChar=JE.allocUnsafe(e)}function KE(e){return 127>=e?0:6==e>>5?2:14==e>>4?3:30==e>>3?4:2==e>>6?-1:-2}function f_(e){var h=this.lastTotal-this.lastNeed;a:if(128!=(192&e[0]))var l=(this.lastNeed=0,"\ufffd");else{if(1<this.lastNeed&&1<e.length){if(128!=(192&e[1])){l=(this.lastNeed=1,"\ufffd");break a}if(2<this.lastNeed&&2<e.length&&128!=(192&e[2])){l=(this.lastNeed=2,"\ufffd");break a}}l=void 0}return void 0!==l?l:this.lastNeed<=e.length?(e.copy(this.lastChar,
h,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,h,0,e.length),this.lastNeed-=e.length,void 0)}function d_(e,h){if(0==(e.length-h)%2){if(h=e.toString("utf16le",h)){var l=h.charCodeAt(h.length-1);if(55296<=l&&56319>=l)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],h.slice(0,-1)}return h}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",h,e.length-1)}function e_(e){e=
e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):e}function g_(e,h){var l=(e.length-h)%3;return 0===l?e.toString("base64",h):(this.lastNeed=3-l,this.lastTotal=3,1===l?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",h,e.length-l))}function h_(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function i_(e){return e.toString(this.encoding)}
function j_(e){return e&&e.length?this.write(e):""}function k_(){function e(a){var d=a.length;if(0<d%4)throw Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("=");-1===a&&(a=d);return[a,a===d?0:4-a%4]}function h(a,d,f){for(var k=[],n=d;n<f;n+=3)d=(a[n]<<16&16711680)+(a[n+1]<<8&65280)+(a[n+2]&255),k.push(l[d>>18&63]+l[d>>12&63]+l[d>>6&63]+l[d&63]);return k.join("")}if(GO)return Gw;GO=!0;Gw.byteLength=function(a){a=e(a);var d=a[1];return 3*(a[0]+d)/4-d};Gw.toByteArray=function(a){var d=
e(a);var f=d[0];d=d[1];var k=new c(3*(f+d)/4-d),n=0,p=0<d?f-4:f,q;for(q=0;q<p;q+=4)f=b[a.charCodeAt(q)]<<18|b[a.charCodeAt(q+1)]<<12|b[a.charCodeAt(q+2)]<<6|b[a.charCodeAt(q+3)],k[n++]=f>>16&255,k[n++]=f>>8&255,k[n++]=f&255;2===d&&(f=b[a.charCodeAt(q)]<<2|b[a.charCodeAt(q+1)]>>4,k[n++]=f&255);1===d&&(f=b[a.charCodeAt(q)]<<10|b[a.charCodeAt(q+1)]<<4|b[a.charCodeAt(q+2)]>>2,k[n++]=f>>8&255,k[n++]=f&255);return k};Gw.fromByteArray=function(a){for(var d=a.length,f=d%3,k=[],n=0,p=d-f;n<p;n+=16383)k.push(h(a,
n,n+16383>p?p:n+16383));1===f?(a=a[d-1],k.push(l[a>>2]+l[a<<4&63]+"==")):2===f&&(a=(a[d-2]<<8)+a[d-1],k.push(l[a>>10]+l[a>>4&63]+l[a<<2&63]+"="));return k.join("")};for(var l=[],b=[],c="undefined"!==typeof Uint8Array?Uint8Array:Array,g=0;64>g;++g)l[g]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g],b["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(g)]=g;b[45]=62;b[95]=63;return Gw}function l_(){if(HO)return bA;HO=!0;bA.read=function(e,h,l,b,c){var g=
8*c-b-1;var a=(1<<g)-1,d=a>>1,f=-7;c=l?c-1:0;var k=l?-1:1,n=e[h+c];c+=k;l=n&(1<<-f)-1;n>>=-f;for(f+=g;0<f;l=256*l+e[h+c],c+=k,f-=8);g=l&(1<<-f)-1;l>>=-f;for(f+=b;0<f;g=256*g+e[h+c],c+=k,f-=8);if(0===l)l=1-d;else{if(l===a)return g?NaN:Infinity*(n?-1:1);g+=Math.pow(2,b);l-=d}return(n?-1:1)*g*Math.pow(2,l-b)};bA.write=function(e,h,l,b,c,g){var a,d=8*g-c-1,f=(1<<d)-1,k=f>>1,n=23===c?Math.pow(2,-24)-Math.pow(2,-77):0;g=b?0:g-1;var p=b?1:-1,q=0>h||0===h&&0>1/h?1:0;h=Math.abs(h);isNaN(h)||Infinity===h?(h=
isNaN(h)?1:0,b=f):(b=Math.floor(Math.log(h)/Math.LN2),1>h*(a=Math.pow(2,-b))&&(b--,a*=2),h=1<=b+k?h+n/a:h+n*Math.pow(2,1-k),2<=h*a&&(b++,a/=2),b+k>=f?(h=0,b=f):1<=b+k?(h=(h*a-1)*Math.pow(2,c),b+=k):(h=h*Math.pow(2,k-1)*Math.pow(2,c),b=0));for(;8<=c;e[l+g]=h&255,g+=p,h/=256,c-=8);b=b<<c|h;for(d+=c;0<d;e[l+g]=b&255,g+=p,b/=256,d-=8);e[l+g-p]|=128*q};return bA}function nu(){if(IO)return JO;IO=!0;return JO="function"===typeof Object.create?function(e,h){h&&(e.super_=h,e.prototype=Object.create(h.prototype,
{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,h){if(h){e.super_=h;var l=function(){};l.prototype=h.prototype;e.prototype=new l;e.prototype.constructor=e}}}function KO(){if(LO)return MO;LO=!0;return MO=Rj.EventEmitter}function m_(){function e(d,f){var k=Object.keys(d);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(d);f&&(n=n.filter(function(p){return Object.getOwnPropertyDescriptor(d,p).enumerable}));k.push.apply(k,n)}return k}function h(d){for(var f=
1;f<arguments.length;f++){var k=null!=arguments[f]?arguments[f]:{};f%2?e(Object(k),!0).forEach(function(n){var p=k[n];n in d?Object.defineProperty(d,n,{value:p,enumerable:!0,configurable:!0,writable:!0}):d[n]=p}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(k)):e(Object(k)).forEach(function(n){Object.defineProperty(d,n,Object.getOwnPropertyDescriptor(k,n))})}return d}function l(d,f){for(var k=0;k<f.length;k++){var n=f[k];n.enumerable=n.enumerable||!1;
n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(d,n.key,n)}}function b(d,f,k){f&&l(d.prototype,f);k&&l(d,k);return d}if(NO)return OO;NO=!0;var c=as.Buffer,g=tf.inspect,a=g&&g.custom||"inspect";return OO=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.tail=this.head=null;this.length=0}b(d,[{key:"push",value:function(f){f={data:f,next:null};0<this.length?this.tail.next=f:this.head=f;this.tail=f;++this.length}},{key:"unshift",
value:function(f){f={data:f,next:this.head};0===this.length&&(this.tail=f);this.head=f;++this.length}},{key:"shift",value:function(){if(0!==this.length){var f=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return f}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(f){if(0===this.length)return"";for(var k=this.head,n=""+k.data;k=k.next;)n+=f+k.data;return n}},{key:"concat",value:function(f){if(0===this.length)return c.alloc(0);
f=c.allocUnsafe(f>>>0);for(var k=this.head,n=0;k;)c.prototype.copy.call(k.data,f,n),n+=k.data.length,k=k.next;return f}},{key:"consume",value:function(f,k){f<this.head.data.length?(k=this.head.data.slice(0,f),this.head.data=this.head.data.slice(f)):k=f===this.head.data.length?this.shift():k?this._getString(f):this._getBuffer(f);return k}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(f){var k=this.head,n=1,p=k.data;for(f-=p.length;k=k.next;){var q=k.data,r=
f>q.length?q.length:f;p=r===q.length?p+q:p+q.slice(0,f);f-=r;if(0===f){r===q.length?(++n,this.head=k.next?k.next:this.tail=null):(this.head=k,k.data=q.slice(r));break}++n}this.length-=n;return p}},{key:"_getBuffer",value:function(f){var k=c.allocUnsafe(f),n=this.head,p=1;n.data.copy(k);for(f-=n.data.length;n=n.next;){var q=n.data,r=f>q.length?q.length:f;q.copy(k,k.length-f,0,r);f-=r;if(0===f){r===q.length?(++p,this.head=n.next?n.next:this.tail=null):(this.head=n,n.data=q.slice(r));break}++p}this.length-=
p;return k}},{key:a,value:function(f,k){return g(this,h({},k,{depth:0,customInspect:!1}))}}]);return d}()}function PO(){function e(c,g){l(c,g);h(c)}function h(c){c._writableState&&!c._writableState.emitClose||c._readableState&&!c._readableState.emitClose||c.emit("close")}function l(c,g){c.emit("error",g)}if(QO)return RO;QO=!0;var b=Hi;return RO={destroy:function(c,g){var a=this,d=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||d)return g?g(c):
c&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,b.nextTick(l,this,c)):b.nextTick(l,this,c)),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(c||null,function(f){!g&&f?a._writableState?a._writableState.errorEmitted?b.nextTick(h,a):(a._writableState.errorEmitted=!0,b.nextTick(e,a,f)):b.nextTick(e,a,f):g?(b.nextTick(h,a),g(f)):b.nextTick(h,a)});return this},undestroy:function(){this._readableState&&
(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(c,g){var a=c._readableState,d=c._writableState;a&&a.autoDestroy||d&&d.autoDestroy?c.destroy(g):
c.emit("error",g)}}}function ou(){function e(b,c,g){g||(g=Error);var a=function(d){function f(n,p,q){rd(this,f);return k.call(this,"string"===typeof c?c:c(n,p,q))}gd(f,d);var k=sb(f);return f}(g);a.prototype.name=g.name;a.prototype.code=b;l[b]=a}function h(b,c){if(Array.isArray(b)){var g=b.length;b=b.map(function(a){return String(a)});return 2<g?"one of ".concat(c," ").concat(b.slice(0,g-1).join(", "),", or ")+b[g-1]:2===g?"one of ".concat(c," ").concat(b[0]," or ").concat(b[1]):"of ".concat(c," ").concat(b[0])}return"of ".concat(c,
" ").concat(String(b))}if(SO)return LE;SO=!0;var l={};e("ERR_INVALID_OPT_VALUE",function(b,c){return'The value "'+c+'" is invalid for option "'+b+'"'},TypeError);e("ERR_INVALID_ARG_TYPE",function(b,c,g){var a;if(a="string"===typeof c)a="not "===c.substr(0,4);a?(a="must not be",c=c.replace(/^not /,"")):a="must be";var d=void 0;if(void 0===d||d>b.length)d=b.length;" argument"===b.substring(d-9,d)?b="The ".concat(b," ").concat(a," ").concat(h(c,"type")):(d=void 0,"number"!==typeof d&&(d=0),d=d+1>b.length?
!1:-1!==b.indexOf(".",d),d=d?"property":"argument",b='The "'.concat(b,'" ').concat(d," ").concat(a," ").concat(h(c,"type")));return b+=". Received type ".concat(Jc(g))},TypeError);e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");e("ERR_METHOD_NOT_IMPLEMENTED",function(b){return"The "+b+" method is not implemented"});e("ERR_STREAM_PREMATURE_CLOSE","Premature close");e("ERR_STREAM_DESTROYED",function(b){return"Cannot call "+b+" after a stream was destroyed"});e("ERR_MULTIPLE_CALLBACK","Callback called multiple times");
e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");e("ERR_STREAM_WRITE_AFTER_END","write after end");e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);e("ERR_UNKNOWN_ENCODING",function(b){return"Unknown encoding: "+b},TypeError);e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");LE.codes=l;return LE}function TO(){if(UO)return VO;UO=!0;var e=ou().codes.ERR_INVALID_OPT_VALUE;return VO={getHighWaterMark:function(h,l,b,c){l=null!=l.highWaterMark?
l.highWaterMark:c?l[b]:null;if(null!=l){if(!isFinite(l)||Math.floor(l)!==l||0>l)throw new e(c?b:"highWaterMark",l);return Math.floor(l)}return h.objectMode?16:16384}}}function n_(){function e(h){try{if(!ME.localStorage)return!1}catch(l){return!1}h=ME.localStorage[h];return null==h?!1:"true"===String(h).toLowerCase()}if(WO)return XO;WO=!0;return XO=function(h,l){if(e("noDeprecation"))return h;var b=!1;return function(){if(!b){if(e("throwDeprecation"))throw Error(l);e("traceDeprecation")?console.trace(l):
console.warn(l);b=!0}return h.apply(this||ME,arguments)}}}function YO(){function e(Ya){var xa=this;this.entry=this.next=null;this.finish=function(){var tc=xa.entry;for(xa.entry=null;tc;){var Qb=tc.callback;Ya.pendingcb--;Qb(void 0);tc=tc.next}Ya.corkedRequestsFree.next=xa}}function h(){}function l(Ya,xa,tc){p=p||pu();Ya=Ya||{};"boolean"!==typeof tc&&(tc=xa instanceof p);this.objectMode=!!Ya.objectMode;tc&&(this.objectMode=this.objectMode||!!Ya.writableObjectMode);this.highWaterMark=B(this,Ya,"writableHighWaterMark",
tc);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==Ya.decodeStrings;this.defaultEncoding=Ya.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(Qb){var wc=xa._writableState,Zb=wc.sync,$c=wc.writecb;if("function"!==typeof $c)throw new G;wc.writing=!1;wc.writecb=null;wc.length-=wc.writelen;wc.writelen=0;Qb?(--wc.pendingcb,Zb?(n.nextTick($c,Qb),n.nextTick(k,xa,wc),
xa._writableState.errorEmitted=!0,qc(xa,Qb)):($c(Qb),xa._writableState.errorEmitted=!0,qc(xa,Qb),k(xa,wc))):((Qb=d(wc)||xa.destroyed)||wc.corked||wc.bufferProcessing||!wc.bufferedRequest||a(xa,wc),Zb?n.nextTick(g,xa,wc,Qb,$c):g(xa,wc,Qb,$c))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==Ya.emitClose;this.autoDestroy=!!Ya.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=
new e(this)}function b(Ya){p=p||pu();var xa=this instanceof p;if(!xa&&!jc.call(b,this))return new b(Ya);this._writableState=new l(Ya,this,xa);this.writable=!0;Ya&&("function"===typeof Ya.write&&(this._write=Ya.write),"function"===typeof Ya.writev&&(this._writev=Ya.writev),"function"===typeof Ya.destroy&&(this._destroy=Ya.destroy),"function"===typeof Ya["final"]&&(this._final=Ya["final"]));r.call(this)}function c(Ya,xa,tc,Qb,wc,Zb,$c){xa.writelen=Qb;xa.writecb=$c;xa.writing=!0;xa.sync=!0;if(xa.destroyed)xa.onwrite(new ha("write"));
else tc?Ya._writev(wc,xa.onwrite):Ya._write(wc,Zb,xa.onwrite);xa.sync=!1}function g(Ya,xa,tc,Qb){!tc&&0===xa.length&&xa.needDrain&&(xa.needDrain=!1,Ya.emit("drain"));xa.pendingcb--;Qb();k(Ya,xa)}function a(Ya,xa){xa.bufferProcessing=!0;var tc=xa.bufferedRequest;if(Ya._writev&&tc&&tc.next){var Qb=Array(xa.bufferedRequestCount),wc=xa.corkedRequestsFree;wc.entry=tc;for(var Zb=0,$c=!0;tc;)Qb[Zb]=tc,tc.isBuf||($c=!1),tc=tc.next,Zb+=1;Qb.allBuffers=$c;c(Ya,xa,!0,xa.length,Qb,"",wc.finish);xa.pendingcb++;
xa.lastBufferedRequest=null;wc.next?(xa.corkedRequestsFree=wc.next,wc.next=null):xa.corkedRequestsFree=new e(xa);xa.bufferedRequestCount=0}else{for(;tc&&(Qb=tc.chunk,c(Ya,xa,!1,xa.objectMode?1:Qb.length,Qb,tc.encoding,tc.callback),tc=tc.next,xa.bufferedRequestCount--,!xa.writing););null===tc&&(xa.lastBufferedRequest=null)}xa.bufferedRequest=tc;xa.bufferProcessing=!1}function d(Ya){return Ya.ending&&0===Ya.length&&null===Ya.bufferedRequest&&!Ya.finished&&!Ya.writing}function f(Ya,xa){Ya._final(function(tc){xa.pendingcb--;
tc&&qc(Ya,tc);xa.prefinished=!0;Ya.emit("prefinish");k(Ya,xa)})}function k(Ya,xa){var tc=d(xa);tc&&(xa.prefinished||xa.finalCalled||("function"!==typeof Ya._final||xa.destroyed?(xa.prefinished=!0,Ya.emit("prefinish")):(xa.pendingcb++,xa.finalCalled=!0,n.nextTick(f,Ya,xa))),0===xa.pendingcb&&(xa.finished=!0,Ya.emit("finish"),xa.autoDestroy&&(xa=Ya._readableState,(!xa||xa.autoDestroy&&xa.endEmitted)&&Ya.destroy())));return tc}if(ZO)return NE;ZO=!0;var n=Hi;NE=b;var p;b.WritableState=l;var q={deprecate:n_()},
r=KO(),t=as.Buffer,w=o_.Uint8Array||function(){},x=PO(),B=TO().getHighWaterMark,D=ou().codes,F=D.ERR_INVALID_ARG_TYPE,L=D.ERR_METHOD_NOT_IMPLEMENTED,G=D.ERR_MULTIPLE_CALLBACK,oa=D.ERR_STREAM_CANNOT_PIPE,ha=D.ERR_STREAM_DESTROYED,Ha=D.ERR_STREAM_NULL_VALUES,Va=D.ERR_STREAM_WRITE_AFTER_END,hc=D.ERR_UNKNOWN_ENCODING,qc=x.errorOrDestroy;nu()(b,r);l.prototype.getBuffer=function(){for(var Ya=this.bufferedRequest,xa=[];Ya;)xa.push(Ya),Ya=Ya.next;return xa};(function(){try{Object.defineProperty(l.prototype,
"buffer",{get:q.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(Ya){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var jc=Function.prototype[Symbol.hasInstance];Object.defineProperty(b,Symbol.hasInstance,{value:function(Ya){return jc.call(this,Ya)?!0:this!==b?!1:Ya&&Ya._writableState instanceof l}})}else jc=function(Ya){return Ya instanceof
this};b.prototype.pipe=function(){qc(this,new oa)};b.prototype.write=function(Ya,xa,tc){var Qb=this._writableState,wc=!1,Zb;if(Zb=!Qb.objectMode)Zb=Ya,Zb=t.isBuffer(Zb)||Zb instanceof w;Zb&&!t.isBuffer(Ya)&&(Ya=t.from(Ya));"function"===typeof xa&&(tc=xa,xa=null);Zb?xa="buffer":xa||(xa=Qb.defaultEncoding);"function"!==typeof tc&&(tc=h);if(Qb.ending)Qb=tc,tc=new Va,qc(this,tc),n.nextTick(Qb,tc);else{var $c;if(!($c=Zb)){$c=Ya;var Oa=tc,md;null===$c?md=new Ha:"string"===typeof $c||Qb.objectMode||(md=
new F("chunk",["string","Buffer"],$c));md?(qc(this,md),n.nextTick(Oa,md),$c=!1):$c=!0}$c&&(Qb.pendingcb++,wc=Zb,wc||(md=Ya,Qb.objectMode||!1===Qb.decodeStrings||"string"!==typeof md||(md=t.from(md,xa)),Ya!==md&&(wc=!0,xa="buffer",Ya=md)),Zb=Qb.objectMode?1:Ya.length,Qb.length+=Zb,md=Qb.length<Qb.highWaterMark,md||(Qb.needDrain=!0),Qb.writing||Qb.corked?(Zb=Qb.lastBufferedRequest,Qb.lastBufferedRequest={chunk:Ya,encoding:xa,isBuf:wc,callback:tc,next:null},Zb?Zb.next=Qb.lastBufferedRequest:Qb.bufferedRequest=
Qb.lastBufferedRequest,Qb.bufferedRequestCount+=1):c(this,Qb,!1,Zb,Ya,xa,tc),wc=md)}return wc};b.prototype.cork=function(){this._writableState.corked++};b.prototype.uncork=function(){var Ya=this._writableState;Ya.corked&&(Ya.corked--,Ya.writing||Ya.corked||Ya.bufferProcessing||!Ya.bufferedRequest||a(this,Ya))};b.prototype.setDefaultEncoding=function(Ya){"string"===typeof Ya&&(Ya=Ya.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((Ya+"").toLowerCase())))throw new hc(Ya);
this._writableState.defaultEncoding=Ya;return this};Object.defineProperty(b.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});b.prototype._write=function(Ya,xa,tc){tc(new L("_write()"))};b.prototype._writev=null;b.prototype.end=function(Ya,xa,tc){var Qb=this._writableState;"function"===typeof Ya?(tc=
Ya,xa=Ya=null):"function"===typeof xa&&(tc=xa,xa=null);null!==Ya&&void 0!==Ya&&this.write(Ya,xa);Qb.corked&&(Qb.corked=1,this.uncork());if(!Qb.ending){Ya=tc;Qb.ending=!0;k(this,Qb);if(Ya)if(Qb.finished)n.nextTick(Ya);else this.once("finish",Ya);Qb.ended=!0;this.writable=!1}return this};Object.defineProperty(b.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?
!1:this._writableState.destroyed},set:function(Ya){this._writableState&&(this._writableState.destroyed=Ya)}});b.prototype.destroy=x.destroy;b.prototype._undestroy=x.undestroy;b.prototype._destroy=function(Ya,xa){xa(Ya)};return NE}function pu(){function e(k){if(!(this instanceof e))return new e(k);g.call(this,k);a.call(this,k);this.allowHalfOpen=!0;k&&(!1===k.readable&&(this.readable=!1),!1===k.writable&&(this.writable=!1),!1===k.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||
b.nextTick(l,this)}function l(k){k.end()}if($O)return OE;$O=!0;var b=Hi,c=Object.keys||function(k){var n=[],p;for(p in k)n.push(p);return n};OE=e;var g=aP(),a=YO();nu()(e,g);c=c(a.prototype);for(var d=0;d<c.length;d++){var f=c[d];e.prototype[f]||(e.prototype[f]=a.prototype[f])}Object.defineProperty(e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&
this._writableState.getBuffer()}});Object.defineProperty(e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(e.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(k){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=k,this._writableState.destroyed=k)}});
return OE}function PE(){function e(c){var g=!1;return function(){if(!g){g=!0;for(var a=arguments.length,d=Array(a),f=0;f<a;f++)d[f]=arguments[f];c.apply(this,d)}}}function h(){}function l(c,g,a){if("function"===typeof g)return l(c,null,g);g||(g={});a=e(a||h);var d=g.readable||!1!==g.readable&&c.readable,f=g.writable||!1!==g.writable&&c.writable,k=function(){c.writable||p()},n=c._writableState&&c._writableState.finished,p=function(){f=!1;n=!0;d||a.call(c)},q=c._readableState&&c._readableState.endEmitted,
r=function(){d=!1;q=!0;f||a.call(c)},t=function(B){a.call(c,B)},w=function(){var B;if(d&&!q)return c._readableState&&c._readableState.ended||(B=new b),a.call(c,B);if(f&&!n)return c._writableState&&c._writableState.ended||(B=new b),a.call(c,B)},x=function(){c.req.on("finish",p)};if(c.setHeader&&"function"===typeof c.abort)if(c.on("complete",p),c.on("abort",w),c.req)x();else c.on("request",x);else f&&!c._writableState&&(c.on("end",k),c.on("close",k));c.on("end",r);c.on("finish",p);if(!1!==g.error)c.on("error",
t);c.on("close",w);return function(){c.removeListener("complete",p);c.removeListener("abort",w);c.removeListener("request",x);c.req&&c.req.removeListener("finish",p);c.removeListener("end",k);c.removeListener("close",k);c.removeListener("finish",p);c.removeListener("end",r);c.removeListener("error",t);c.removeListener("close",w)}}if(bP)return cP;bP=!0;var b=ou().codes.ERR_STREAM_PREMATURE_CLOSE;return cP=l}function p_(){function e(B,D,F){D in B?Object.defineProperty(B,D,{value:F,enumerable:!0,configurable:!0,
writable:!0}):B[D]=F;return B}function h(B,D){return{value:B,done:D}}function l(B){var D=B[f];if(null!==D){var F=B[t].read();null!==F&&(B[q]=null,B[f]=null,B[k]=null,D(h(F,!1)))}}function b(B){g.nextTick(l,B)}function c(B,D){return function(F,L){B.then(function(){if(D[p])F(h(void 0,!0));else D[r](F,L)},L)}}if(dP)return eP;dP=!0;var g=Hi,a,d=PE(),f=Symbol("lastResolve"),k=Symbol("lastReject"),n=Symbol("error"),p=Symbol("ended"),q=Symbol("lastPromise"),r=Symbol("handlePromise"),t=Symbol("stream"),w=
Object.getPrototypeOf(function(){}),x=Object.setPrototypeOf((a={get stream(){return this[t]},next:function(){var B=this,D=this[n];if(null!==D)return Promise.reject(D);if(this[p])return Promise.resolve(h(void 0,!0));if(this[t].destroyed)return new Promise(function(F,L){g.nextTick(function(){B[n]?L(B[n]):F(h(void 0,!0))})});if(D=this[q])D=new Promise(c(D,this));else{D=this[t].read();if(null!==D)return Promise.resolve(h(D,!1));D=new Promise(this[r])}return this[q]=D}},e(a,Symbol.asyncIterator,function(){return this}),
e(a,"return",function(){var B=this;return new Promise(function(D,F){B[t].destroy(null,function(L){L?F(L):D(h(void 0,!0))})})}),a),w);return eP=function(B){var D,F=Object.create(x,(D={},e(D,t,{value:B,writable:!0}),e(D,f,{value:null,writable:!0}),e(D,k,{value:null,writable:!0}),e(D,n,{value:null,writable:!0}),e(D,p,{value:B._readableState.endEmitted,writable:!0}),e(D,r,{value:function(L,G){var oa=F[t].read();oa?(F[q]=null,F[f]=null,F[k]=null,L(h(oa,!1))):(F[f]=L,F[k]=G)},writable:!0}),D));F[q]=null;
d(B,function(L){if(L&&"ERR_STREAM_PREMATURE_CLOSE"!==L.code){var G=F[k];null!==G&&(F[q]=null,F[f]=null,F[k]=null,G(L));F[n]=L}else L=F[f],null!==L&&(F[q]=null,F[f]=null,F[k]=null,L(h(void 0,!0))),F[p]=!0});B.on("readable",b.bind(null,F));return F}}function q_(){if(fP)return gP;fP=!0;return gP=function(){throw Error("Readable.from is not available in the browser");}}function aP(){function e(la,$a,dd){if("function"===typeof la.prependListener)return la.prependListener($a,dd);if(la._events&&la._events[$a])Array.isArray(la._events[$a])?
la._events[$a].unshift(dd):la._events[$a]=[dd,la._events[$a]];else la.on($a,dd)}function h(la,$a,dd){L=L||pu();la=la||{};"boolean"!==typeof dd&&(dd=$a instanceof L);this.objectMode=!!la.objectMode;dd&&(this.objectMode=this.objectMode||!!la.readableObjectMode);this.highWaterMark=qc(this,la,"readableHighWaterMark",dd);this.buffer=new hc;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=
this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==la.emitClose;this.autoDestroy=!!la.autoDestroy;this.destroyed=!1;this.defaultEncoding=la.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;la.encoding&&(wc||(wc=QE.StringDecoder),this.decoder=new wc(la.encoding),this.encoding=la.encoding)}function l(la){L=L||pu();if(!(this instanceof l))return new l(la);this._readableState=new h(la,this,this instanceof L);this.readable=!0;la&&("function"===
typeof la.read&&(this._read=la.read),"function"===typeof la.destroy&&(this._destroy=la.destroy));G.call(this)}function b(la,$a,dd,Kd,ra){Va("readableAddChunk",$a);var Aa=la._readableState;if(null===$a)Aa.reading=!1,Va("onEofChunk"),Aa.ended||(Aa.decoder&&($a=Aa.decoder.end())&&$a.length&&(Aa.buffer.push($a),Aa.length+=Aa.objectMode?1:$a.length),Aa.ended=!0,Aa.sync?a(la):(Aa.needReadable=!1,Aa.emittedReadable||(Aa.emittedReadable=!0,d(la))));else{if(!ra){ra=$a;var V;oa.isBuffer(ra)||ra instanceof ha||
"string"===typeof ra||void 0===ra||Aa.objectMode||(V=new Ya("chunk",["string","Buffer","Uint8Array"],ra));var ea=V}if(ea)Oa(la,ea);else if(Aa.objectMode||$a&&0<$a.length)if("string"===typeof $a||Aa.objectMode||Object.getPrototypeOf($a)===oa.prototype||($a=oa.from($a)),Kd)Aa.endEmitted?Oa(la,new Qb):c(la,Aa,$a,!0);else if(Aa.ended)Oa(la,new xa);else{if(Aa.destroyed)return!1;Aa.reading=!1;Aa.decoder&&!dd?($a=Aa.decoder.write($a),Aa.objectMode||0!==$a.length?c(la,Aa,$a,!1):f(la,Aa)):c(la,Aa,$a,!1)}else Kd||
(Aa.reading=!1,f(la,Aa))}return!Aa.ended&&(Aa.length<Aa.highWaterMark||0===Aa.length)}function c(la,$a,dd,Kd){$a.flowing&&0===$a.length&&!$a.sync?($a.awaitDrain=0,la.emit("data",dd)):($a.length+=$a.objectMode?1:dd.length,Kd?$a.buffer.unshift(dd):$a.buffer.push(dd),$a.needReadable&&a(la));f(la,$a)}function g(la,$a){if(0>=la||0===$a.length&&$a.ended)return 0;if($a.objectMode)return 1;if(la!==la)return $a.flowing&&$a.length?$a.buffer.head.data.length:$a.length;if(la>$a.highWaterMark){var dd=la;1073741824<=
dd?dd=1073741824:(dd--,dd|=dd>>>1,dd|=dd>>>2,dd|=dd>>>4,dd|=dd>>>8,dd|=dd>>>16,dd++);$a.highWaterMark=dd}return la<=$a.length?la:$a.ended?$a.length:($a.needReadable=!0,0)}function a(la){var $a=la._readableState;Va("emitReadable",$a.needReadable,$a.emittedReadable);$a.needReadable=!1;$a.emittedReadable||(Va("emitReadable",$a.flowing),$a.emittedReadable=!0,F.nextTick(d,la))}function d(la){var $a=la._readableState;Va("emitReadable_",$a.destroyed,$a.length,$a.ended);$a.destroyed||!$a.length&&!$a.ended||
(la.emit("readable"),$a.emittedReadable=!1);$a.needReadable=!$a.flowing&&!$a.ended&&$a.length<=$a.highWaterMark;t(la)}function f(la,$a){$a.readingMore||($a.readingMore=!0,F.nextTick(k,la,$a))}function k(la,$a){for(;!$a.reading&&!$a.ended&&($a.length<$a.highWaterMark||$a.flowing&&0===$a.length);){var dd=$a.length;Va("maybeReadMore read 0");la.read(0);if(dd===$a.length)break}$a.readingMore=!1}function n(la){return function(){var $a=la._readableState;Va("pipeOnDrain",$a.awaitDrain);$a.awaitDrain&&$a.awaitDrain--;
0===$a.awaitDrain&&la.listeners("data").length&&($a.flowing=!0,t(la))}}function p(la){var $a=la._readableState;$a.readableListening=0<la.listenerCount("readable");$a.resumeScheduled&&!$a.paused?$a.flowing=!0:0<la.listenerCount("data")&&la.resume()}function q(la){Va("readable nexttick read 0");la.read(0)}function r(la,$a){Va("resume",$a.reading);$a.reading||la.read(0);$a.resumeScheduled=!1;la.emit("resume");t(la);$a.flowing&&!$a.reading&&la.read(0)}function t(la){var $a=la._readableState;for(Va("flow",
$a.flowing);$a.flowing&&null!==la.read(););}function w(la,$a){if(0===$a.length)return null;$a.objectMode?la=$a.buffer.shift():!la||la>=$a.length?(la=$a.decoder?$a.buffer.join(""):1===$a.buffer.length?$a.buffer.first():$a.buffer.concat($a.length),$a.buffer.clear()):la=$a.buffer.consume(la,$a.decoder);return la}function x(la){var $a=la._readableState;Va("endReadable",$a.endEmitted);$a.endEmitted||($a.ended=!0,F.nextTick(B,$a,la))}function B(la,$a){Va("endReadableNT",la.endEmitted,la.length);la.endEmitted||
0!==la.length||(la.endEmitted=!0,$a.readable=!1,$a.emit("end"),la.autoDestroy&&(la=$a._writableState,(!la||la.autoDestroy&&la.finished)&&$a.destroy()))}function D(la,$a){for(var dd=0,Kd=la.length;dd<Kd;dd++)if(la[dd]===$a)return dd;return-1}if(hP)return RE;hP=!0;var F=Hi;RE=l;var L;l.ReadableState=h;Rj.EventEmitter;var G=KO(),oa=as.Buffer,ha=r_.Uint8Array||function(){},Ha=tf;var Va=Ha&&Ha.debuglog?Ha.debuglog("stream"):function(){};var hc=m_();Ha=PO();var qc=TO().getHighWaterMark,jc=ou().codes,Ya=
jc.ERR_INVALID_ARG_TYPE,xa=jc.ERR_STREAM_PUSH_AFTER_EOF,tc=jc.ERR_METHOD_NOT_IMPLEMENTED,Qb=jc.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,wc,Zb,$c;nu()(l,G);var Oa=Ha.errorOrDestroy,md=["error","close","destroy","pause","resume"];Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(la){this._readableState&&(this._readableState.destroyed=la)}});l.prototype.destroy=Ha.destroy;l.prototype._undestroy=Ha.undestroy;
l.prototype._destroy=function(la,$a){$a(la)};l.prototype.push=function(la,$a){var dd=this._readableState;if(dd.objectMode)var Kd=!0;else"string"===typeof la&&($a=$a||dd.defaultEncoding,$a!==dd.encoding&&(la=oa.from(la,$a),$a=""),Kd=!0);return b(this,la,$a,!1,Kd)};l.prototype.unshift=function(la){return b(this,la,null,!0,!1)};l.prototype.isPaused=function(){return!1===this._readableState.flowing};l.prototype.setEncoding=function(la){wc||(wc=QE.StringDecoder);la=new wc(la);this._readableState.decoder=
la;this._readableState.encoding=this._readableState.decoder.encoding;for(var $a=this._readableState.buffer.head,dd="";null!==$a;)dd+=la.write($a.data),$a=$a.next;this._readableState.buffer.clear();""!==dd&&this._readableState.buffer.push(dd);this._readableState.length=dd.length;return this};l.prototype.read=function(la){Va("read",la);la=parseInt(la,10);var $a=this._readableState,dd=la;0!==la&&($a.emittedReadable=!1);if(0===la&&$a.needReadable&&((0!==$a.highWaterMark?$a.length>=$a.highWaterMark:0<
$a.length)||$a.ended))return Va("read: emitReadable",$a.length,$a.ended),0===$a.length&&$a.ended?x(this):a(this),null;la=g(la,$a);if(0===la&&$a.ended)return 0===$a.length&&x(this),null;var Kd=$a.needReadable;Va("need readable",Kd);if(0===$a.length||$a.length-la<$a.highWaterMark)Kd=!0,Va("length less than watermark",Kd);$a.ended||$a.reading?Va("reading or ended",!1):Kd&&(Va("do read"),$a.reading=!0,$a.sync=!0,0===$a.length&&($a.needReadable=!0),this._read($a.highWaterMark),$a.sync=!1,$a.reading||(la=
g(dd,$a)));Kd=0<la?w(la,$a):null;null===Kd?($a.needReadable=$a.length<=$a.highWaterMark,la=0):($a.length-=la,$a.awaitDrain=0);0===$a.length&&($a.ended||($a.needReadable=!0),dd!==la&&$a.ended&&x(this));null!==Kd&&this.emit("data",Kd);return Kd};l.prototype._read=function(la){Oa(this,new tc("_read()"))};l.prototype.pipe=function(la,$a){function dd(xd,Ae){Va("onunpipe");xd===U&&Ae&&!1===Ae.hasUnpiped&&(Ae.hasUnpiped=!0,Va("cleanup"),la.removeListener("close",V),la.removeListener("finish",ea),la.removeListener("drain",
S),la.removeListener("error",Aa),la.removeListener("unpipe",dd),U.removeListener("end",Kd),U.removeListener("end",Mb),U.removeListener("data",ra),Sc=!0,!Sa.awaitDrain||la._writableState&&!la._writableState.needDrain||S())}function Kd(){Va("onend");la.end()}function ra(xd){Va("ondata");xd=la.write(xd);Va("dest.write",xd);!1===xd&&((1===Sa.pipesCount&&Sa.pipes===la||1<Sa.pipesCount&&-1!==D(Sa.pipes,la))&&!Sc&&(Va("false write response, pause",Sa.awaitDrain),Sa.awaitDrain++),U.pause())}function Aa(xd){Va("onerror",
xd);Mb();la.removeListener("error",Aa);0===la.listeners("error").length&&Oa(la,xd)}function V(){la.removeListener("finish",ea);Mb()}function ea(){Va("onfinish");la.removeListener("close",V);Mb()}function Mb(){Va("unpipe");U.unpipe(la)}var U=this,Sa=this._readableState;switch(Sa.pipesCount){case 0:Sa.pipes=la;break;case 1:Sa.pipes=[Sa.pipes,la];break;default:Sa.pipes.push(la)}Sa.pipesCount+=1;Va("pipe count=%d opts=%j",Sa.pipesCount,$a);$a=$a&&!1===$a.end||la===F.stdout||la===F.stderr?Mb:Kd;if(Sa.endEmitted)F.nextTick($a);
else U.once("end",$a);la.on("unpipe",dd);var S=n(U);la.on("drain",S);var Sc=!1;U.on("data",ra);e(la,"error",Aa);la.once("close",V);la.once("finish",ea);la.emit("pipe",U);Sa.flowing||(Va("pipe resume"),U.resume());return la};l.prototype.unpipe=function(la){var $a=this._readableState,dd={hasUnpiped:!1};if(0===$a.pipesCount)return this;if(1===$a.pipesCount){if(la&&la!==$a.pipes)return this;la||(la=$a.pipes);$a.pipes=null;$a.pipesCount=0;$a.flowing=!1;la&&la.emit("unpipe",this,dd);return this}if(!la){la=
$a.pipes;dd=$a.pipesCount;$a.pipes=null;$a.pipesCount=0;$a.flowing=!1;for($a=0;$a<dd;$a++)la[$a].emit("unpipe",this,{hasUnpiped:!1});return this}var Kd=D($a.pipes,la);if(-1===Kd)return this;$a.pipes.splice(Kd,1);--$a.pipesCount;1===$a.pipesCount&&($a.pipes=$a.pipes[0]);la.emit("unpipe",this,dd);return this};l.prototype.on=function(la,$a){$a=G.prototype.on.call(this,la,$a);var dd=this._readableState;"data"===la?(dd.readableListening=0<this.listenerCount("readable"),!1!==dd.flowing&&this.resume()):
"readable"!==la||dd.endEmitted||dd.readableListening||(dd.readableListening=dd.needReadable=!0,dd.flowing=!1,dd.emittedReadable=!1,Va("on readable",dd.length,dd.reading),dd.length?a(this):dd.reading||F.nextTick(q,this));return $a};l.prototype.addListener=l.prototype.on;l.prototype.removeListener=function(la,$a){$a=G.prototype.removeListener.call(this,la,$a);"readable"===la&&F.nextTick(p,this);return $a};l.prototype.removeAllListeners=function(la){var $a=G.prototype.removeAllListeners.apply(this,arguments);
"readable"!==la&&void 0!==la||F.nextTick(p,this);return $a};l.prototype.resume=function(){var la=this._readableState;la.flowing||(Va("resume"),la.flowing=!la.readableListening,la.resumeScheduled||(la.resumeScheduled=!0,F.nextTick(r,this,la)));la.paused=!1;return this};l.prototype.pause=function(){Va("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(Va("pause"),this._readableState.flowing=!1,this.emit("pause"));this._readableState.paused=!0;return this};l.prototype.wrap=
function(la){var $a=this,dd=this._readableState,Kd=!1;la.on("end",function(){Va("wrapped end");if(dd.decoder&&!dd.ended){var Aa=dd.decoder.end();Aa&&Aa.length&&$a.push(Aa)}$a.push(null)});la.on("data",function(Aa){Va("wrapped data");dd.decoder&&(Aa=dd.decoder.write(Aa));dd.objectMode&&(null===Aa||void 0===Aa)||!(dd.objectMode||Aa&&Aa.length)||$a.push(Aa)||(Kd=!0,la.pause())});for(var ra in la)void 0===this[ra]&&"function"===typeof la[ra]&&(this[ra]=function(Aa){return function(){return la[Aa].apply(la,
arguments)}}(ra));for(ra=0;ra<md.length;ra++)la.on(md[ra],this.emit.bind(this,md[ra]));this._read=function(Aa){Va("wrapped _read",Aa);Kd&&(Kd=!1,la.resume())};return this};"function"===typeof Symbol&&(l.prototype[Symbol.asyncIterator]=function(){void 0===Zb&&(Zb=p_());return Zb(this)});Object.defineProperty(l.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(l.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&
this._readableState.buffer}});Object.defineProperty(l.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(la){this._readableState&&(this._readableState.flowing=la)}});l._fromList=w;Object.defineProperty(l.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(l.from=function(la,$a){void 0===$c&&($c=q_());return $c(l,la,$a)});return RE}function iP(){function e(n,p){var q=this._transformState;
q.transforming=!1;var r=q.writecb;if(null===r)return this.emit("error",new a);q.writechunk=null;q.writecb=null;null!=p&&this.push(p);r(n);n=this._readableState;n.reading=!1;(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function h(n){if(!(this instanceof h))return new h(n);k.call(this,n);this._transformState={afterTransform:e.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=
!1;n&&("function"===typeof n.transform&&(this._transform=n.transform),"function"===typeof n.flush&&(this._flush=n.flush));this.on("prefinish",l)}function l(){var n=this;"function"!==typeof this._flush||this._readableState.destroyed?b(this,null,null):this._flush(function(p,q){b(n,p,q)})}function b(n,p,q){if(p)return n.emit("error",p);null!=q&&n.push(q);if(n._writableState.length)throw new f;if(n._transformState.transforming)throw new d;return n.push(null)}if(jP)return SE;jP=!0;SE=h;var c=ou().codes,
g=c.ERR_METHOD_NOT_IMPLEMENTED,a=c.ERR_MULTIPLE_CALLBACK,d=c.ERR_TRANSFORM_ALREADY_TRANSFORMING,f=c.ERR_TRANSFORM_WITH_LENGTH_0,k=pu();nu()(h,k);h.prototype.push=function(n,p){this._transformState.needTransform=!1;return k.prototype.push.call(this,n,p)};h.prototype._transform=function(n,p,q){q(new g("_transform()"))};h.prototype._write=function(n,p,q){var r=this._transformState;r.writecb=q;r.writechunk=n;r.writeencoding=p;r.transforming||(n=this._readableState,(r.needTransform||n.needReadable||n.length<
n.highWaterMark)&&this._read(n.highWaterMark))};h.prototype._read=function(n){n=this._transformState;null===n.writechunk||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};h.prototype._destroy=function(n,p){k.prototype._destroy.call(this,n,function(q){p(q)})};return SE}function s_(){function e(l){if(!(this instanceof e))return new e(l);h.call(this,l)}if(kP)return TE;kP=!0;TE=e;var h=iP();nu()(e,h);e.prototype._transform=function(l,
b,c){c(null,l)};return TE}function t_(){function e(k){var n=!1;return function(){n||(n=!0,k.apply(void 0,arguments))}}function h(k){if(k)throw k;}function l(k,n,p,q){q=e(q);var r=!1;k.on("close",function(){r=!0});void 0===g&&(g=PE());g(k,{readable:n,writable:p},function(w){if(w)return q(w);r=!0;q()});var t=!1;return function(w){if(!r&&!t){t=!0;if(k.setHeader&&"function"===typeof k.abort)return k.abort();if("function"===typeof k.destroy)return k.destroy();q(w||new f("pipe"))}}}function b(k){k()}function c(k,
n){return k.pipe(n)}if(lP)return mP;lP=!0;var g,a=ou().codes,d=a.ERR_MISSING_ARGS,f=a.ERR_STREAM_DESTROYED;return mP=function(){for(var k=arguments.length,n=Array(k),p=0;p<k;p++)n[p]=arguments[p];var q=n.length?"function"!==typeof n[n.length-1]?h:n.pop():h;Array.isArray(n[0])&&(n=n[0]);if(2>n.length)throw new d("streams");var r,t=n.map(function(w,x){var B=x<n.length-1;return l(w,B,0<x,function(D){r||(r=D);D&&t.forEach(b);B||(t.forEach(b),q(r))})});return n.reduce(c)}}function u_(e){return e.toString((this||
ch).encoding)}function v_(e){(this||ch).charReceived=e.length%2;(this||ch).charLength=(this||ch).charReceived?2:0}function w_(e){(this||ch).charReceived=e.length%3;(this||ch).charLength=(this||ch).charReceived?3:0}function nP(){function e(L,G){L=L||{};G=L.highWaterMark;(this||Lg).highWaterMark=G||0===G?G:16384;(this||Lg).highWaterMark=~~(this||Lg).highWaterMark;(this||Lg).buffer=[];(this||Lg).length=0;(this||Lg).pipes=null;(this||Lg).pipesCount=0;(this||Lg).flowing=!1;(this||Lg).ended=!1;(this||Lg).endEmitted=
!1;(this||Lg).reading=!1;(this||Lg).calledRead=!1;(this||Lg).sync=!0;(this||Lg).needReadable=!1;(this||Lg).emittedReadable=!1;(this||Lg).readableListening=!1;(this||Lg).objectMode=!!L.objectMode;(this||Lg).defaultEncoding=L.defaultEncoding||"utf8";(this||Lg).ranOut=!1;(this||Lg).awaitDrain=0;(this||Lg).readingMore=!1;(this||Lg).decoder=null;(this||Lg).encoding=null;L.encoding&&(F||(F=UE.StringDecoder),(this||Lg).decoder=new F(L.encoding),(this||Lg).encoding=L.encoding)}function h(L){if(!((this||Lg)instanceof
h))return new h(L);(this||Lg)._readableState=new e(L,this||Lg);(this||Lg).readable=!0;B.call(this||Lg)}function l(L,G,oa,ha,Ha){var Va=oa;var hc=null;w.isBuffer(Va)||"string"===typeof Va||null===Va||void 0===Va||G.objectMode||(hc=new TypeError("Invalid non-string/buffer chunk"));(Va=hc)?L.emit("error",Va):null===oa||void 0===oa?(G.reading=!1,G.ended||(G.decoder&&!G.ended&&(oa=G.decoder.end())&&oa.length&&(G.buffer.push(oa),G.length+=G.objectMode?1:oa.length),G.ended=!0,0<G.length?c(L):p(L))):G.objectMode||
oa&&0<oa.length?G.ended&&!Ha?(oa=Error("stream.push() after EOF"),L.emit("error",oa)):G.endEmitted&&Ha?(oa=Error("stream.unshift() after end event"),L.emit("error",oa)):(!G.decoder||Ha||ha||(oa=G.decoder.write(oa)),G.length+=G.objectMode?1:oa.length,Ha?G.buffer.unshift(oa):(G.reading=!1,G.buffer.push(oa)),G.needReadable&&c(L),g(L,G)):Ha||(G.reading=!1);return!G.ended&&(G.needReadable||G.length<G.highWaterMark||0===G.length)}function b(L,G){if(0===G.length&&G.ended)return 0;if(G.objectMode)return 0===
L?0:1;if(null===L||isNaN(L))return G.flowing&&G.buffer.length?G.buffer[0].length:G.length;if(0>=L)return 0;if(L>G.highWaterMark){var oa=L;if(8388608<=oa)oa=8388608;else{oa--;for(var ha=1;32>ha;ha<<=1)oa|=oa>>ha;oa++}G.highWaterMark=oa}if(L>G.length){if(G.ended)return G.length;G.needReadable=!0;return 0}return L}function c(L){var G=L._readableState;G.needReadable=!1;G.emittedReadable||(G.emittedReadable=!0,G.sync?r.nextTick(function(){L.emit("readable")}):L.emit("readable"))}function g(L,G){G.readingMore||
(G.readingMore=!0,r.nextTick(function(){for(var oa=G.length;!G.reading&&!G.flowing&&!G.ended&&G.length<G.highWaterMark&&(L.read(0),oa!==G.length);)oa=G.length;G.readingMore=!1}))}function a(L){return function(){var G=L._readableState;G.awaitDrain--;0===G.awaitDrain&&d(L)}}function d(L){function G(Ha,Va,hc){!1===Ha.write(ha)&&oa.awaitDrain++}var oa=L._readableState,ha;for(oa.awaitDrain=0;oa.pipesCount&&null!==(ha=L.read());)if(1===oa.pipesCount?G(oa.pipes):q(oa.pipes,G),L.emit("data",ha),0<oa.awaitDrain)return;
0===oa.pipesCount?(oa.flowing=!1,0<x.listenerCount(L,"data")&&k(L)):oa.ranOut=!0}function f(){(this||Lg)._readableState.ranOut&&((this||Lg)._readableState.ranOut=!1,d(this||Lg))}function k(L,G){if(L._readableState.flowing)throw Error("Cannot switch to old mode now.");var oa=G||!1,ha=!1;L.readable=!0;L.pipe=B.prototype.pipe;L.on=L.addListener=B.prototype.on;L.on("readable",function(){ha=!0;for(var Ha;!oa&&null!==(Ha=L.read());)L.emit("data",Ha);null===Ha&&(ha=!1,L._readableState.needReadable=!0)});
L.pause=function(){oa=!0;this.emit("pause")};L.resume=function(){oa=!1;ha?r.nextTick(function(){L.emit("readable")}):this.read(0);this.emit("resume")};L.emit("readable")}function n(L,G){var oa=G.buffer,ha=G.length,Ha=!!G.decoder;G=!!G.objectMode;if(0===oa.length)return null;if(0===ha)ha=null;else if(G)ha=oa.shift();else if(!L||L>=ha)ha=Ha?oa.join(""):w.concat(oa,ha),oa.length=0;else if(L<oa[0].length)G=oa[0],ha=G.slice(0,L),oa[0]=G.slice(L);else if(L===oa[0].length)ha=oa.shift();else{ha=Ha?"":new w(L);
for(var Va=0,hc=0,qc=oa.length;hc<qc&&Va<L;hc++){G=oa[0];var jc=Math.min(L-Va,G.length);Ha?ha+=G.slice(0,jc):G.copy(ha,Va,0,jc);jc<G.length?oa[0]=G.slice(jc):oa.shift();Va+=jc}}return ha}function p(L){var G=L._readableState;if(0<G.length)throw Error("endReadable called on non-empty stream");!G.endEmitted&&G.calledRead&&(G.ended=!0,r.nextTick(function(){G.endEmitted||0!==G.length||(G.endEmitted=!0,L.readable=!1,L.emit("end"))}))}function q(L,G){for(var oa=0,ha=L.length;oa<ha;oa++)G(L[oa],oa)}if(oP)return VE;
oP=!0;var r=fk;VE=h;var t=x_,w=Cj.Buffer;h.ReadableState=e;var x=Rj.EventEmitter;x.listenerCount||(x.listenerCount=function(L,G){return L.listeners(G).length});var B=Kl,D=ak;D.inherits=Dj;var F;D.inherits(h,B);h.prototype.push=function(L,G){var oa=(this||Lg)._readableState;"string"!==typeof L||oa.objectMode||(G=G||oa.defaultEncoding,G!==oa.encoding&&(L=new w(L,G),G=""));return l(this||Lg,oa,L,G,!1)};h.prototype.unshift=function(L){return l(this||Lg,(this||Lg)._readableState,L,"",!0)};h.prototype.setEncoding=
function(L){F||(F=UE.StringDecoder);(this||Lg)._readableState.decoder=new F(L);(this||Lg)._readableState.encoding=L};h.prototype.read=function(L){var G=(this||Lg)._readableState;G.calledRead=!0;var oa=L;if("number"!==typeof L||0<L)G.emittedReadable=!1;if(0===L&&G.needReadable&&(G.length>=G.highWaterMark||G.ended))return c(this||Lg),null;L=b(L,G);if(0===L&&G.ended)return oa=null,0<G.length&&G.decoder&&(oa=n(L,G),G.length-=oa.length),0===G.length&&p(this||Lg),oa;var ha=G.needReadable;G.length-L<=G.highWaterMark&&
(ha=!0);if(G.ended||G.reading)ha=!1;ha&&(G.reading=!0,G.sync=!0,0===G.length&&(G.needReadable=!0),this._read(G.highWaterMark),G.sync=!1);ha&&!G.reading&&(L=b(oa,G));oa=0<L?n(L,G):null;null===oa&&(G.needReadable=!0,L=0);G.length-=L;0!==G.length||G.ended||(G.needReadable=!0);G.ended&&!G.endEmitted&&0===G.length&&p(this||Lg);return oa};h.prototype._read=function(L){this.emit("error",Error("not implemented"))};h.prototype.pipe=function(L,G){function oa(tc){tc===jc&&Ha()}function ha(){L.end()}function Ha(){L.removeListener("close",
hc);L.removeListener("finish",qc);L.removeListener("drain",xa);L.removeListener("error",Va);L.removeListener("unpipe",oa);jc.removeListener("end",ha);jc.removeListener("end",Ha);L._writableState&&!L._writableState.needDrain||xa()}function Va(tc){jc.unpipe(L);L.removeListener("error",Va);0===x.listenerCount(L,"error")&&L.emit("error",tc)}function hc(){L.removeListener("finish",qc);jc.unpipe(L)}function qc(){L.removeListener("close",hc);jc.unpipe(L)}var jc=this||Lg,Ya=(this||Lg)._readableState;switch(Ya.pipesCount){case 0:Ya.pipes=
L;break;case 1:Ya.pipes=[Ya.pipes,L];break;default:Ya.pipes.push(L)}Ya.pipesCount+=1;G=G&&!1===G.end||L===r.stdout||L===r.stderr?Ha:ha;if(Ya.endEmitted)r.nextTick(G);else jc.once("end",G);L.on("unpipe",oa);var xa=a(jc);L.on("drain",xa);if(L._events&&L._events.error)t(L._events.error)?L._events.error.unshift(Va):L._events.error=[Va,L._events.error];else L.on("error",Va);L.once("close",hc);L.once("finish",qc);L.emit("pipe",jc);Ya.flowing||(this.on("readable",f),Ya.flowing=!0,r.nextTick(function(){d(jc)}));
return L};h.prototype.unpipe=function(L){var G=(this||Lg)._readableState;if(0===G.pipesCount)return this||Lg;if(1===G.pipesCount){if(L&&L!==G.pipes)return this||Lg;L||(L=G.pipes);G.pipes=null;G.pipesCount=0;this.removeListener("readable",f);G.flowing=!1;L&&L.emit("unpipe",this||Lg);return this||Lg}if(!L){L=G.pipes;var oa=G.pipesCount;G.pipes=null;G.pipesCount=0;this.removeListener("readable",f);G.flowing=!1;for(var ha=0;ha<oa;ha++)L[ha].emit("unpipe",this||Lg);return this||Lg}a:{ha=G.pipes;oa=0;for(var Ha=
ha.length;oa<Ha;oa++)if(ha[oa]===L){ha=oa;break a}ha=-1}if(-1===ha)return this||Lg;G.pipes.splice(ha,1);--G.pipesCount;1===G.pipesCount&&(G.pipes=G.pipes[0]);L.emit("unpipe",this||Lg);return this||Lg};h.prototype.on=function(L,G){G=B.prototype.on.call(this||Lg,L,G);"data"!==L||(this||Lg)._readableState.flowing||k(this||Lg);"readable"===L&&(this||Lg).readable&&(L=(this||Lg)._readableState,L.readableListening||(L.readableListening=!0,L.emittedReadable=!1,L.needReadable=!0,L.reading?L.length&&c(this||
Lg):this.read(0)));return G};h.prototype.addListener=h.prototype.on;h.prototype.resume=function(){k(this||Lg);this.read(0);this.emit("resume")};h.prototype.pause=function(){k(this||Lg,!0);this.emit("pause")};h.prototype.wrap=function(L){var G=(this||Lg)._readableState,oa=!1,ha=this||Lg;L.on("end",function(){if(G.decoder&&!G.ended){var Va=G.decoder.end();Va&&Va.length&&ha.push(Va)}ha.push(null)});L.on("data",function(Va){G.decoder&&(Va=G.decoder.write(Va));G.objectMode&&(null===Va||void 0===Va)||!(G.objectMode||
Va&&Va.length)||ha.push(Va)||(oa=!0,L.pause())});for(var Ha in L)"function"===typeof L[Ha]&&"undefined"===typeof(this||Lg)[Ha]&&((this||Lg)[Ha]=function(Va){return function(){return L[Va].apply(L,arguments)}}(Ha));q(["error","close","destroy","pause","resume"],function(Va){L.on(Va,ha.emit.bind(ha,Va))});ha._read=function(Va){oa&&(oa=!1,L.resume())};return ha};h._fromList=n;return VE}function WE(){function e(d){if(!((this||qn)instanceof e))return new e(d);g.call(this||qn,d);a.call(this||qn,d);d&&!1===
d.readable&&((this||qn).readable=!1);d&&!1===d.writable&&((this||qn).writable=!1);(this||qn).allowHalfOpen=!0;d&&!1===d.allowHalfOpen&&((this||qn).allowHalfOpen=!1);this.once("end",h)}function h(){(this||qn).allowHalfOpen||(this||qn)._writableState.ended||l.nextTick((this||qn).end.bind(this||qn))}if(pP)return XE;pP=!0;var l=fk;XE=e;var b=Object.keys||function(d){var f=[],k;for(k in d)f.push(k);return f},c=ak;c.inherits=Dj;var g=nP(),a=qP();c.inherits(e,g);(function(d,f){for(var k=0,n=d.length;k<n;k++)f(d[k],
k)})(b(a.prototype),function(d){e.prototype[d]||(e.prototype[d]=a.prototype[d])});return XE}function qP(){function e(x,B,D){(this||zi).chunk=x;(this||zi).encoding=B;(this||zi).callback=D}function h(x,B){x=x||{};var D=x.highWaterMark;(this||zi).highWaterMark=D||0===D?D:16384;(this||zi).objectMode=!!x.objectMode;(this||zi).highWaterMark=~~(this||zi).highWaterMark;(this||zi).needDrain=!1;(this||zi).ending=!1;(this||zi).ended=!1;(this||zi).finished=!1;(this||zi).decodeStrings=!1!==x.decodeStrings;(this||
zi).defaultEncoding=x.defaultEncoding||"utf8";(this||zi).length=0;(this||zi).writing=!1;(this||zi).sync=!0;(this||zi).bufferProcessing=!1;(this||zi).onwrite=function(F){f(B,F)};(this||zi).writecb=null;(this||zi).writelen=0;(this||zi).buffer=[];(this||zi).errorEmitted=!1}function l(x){var B=WE();if(!((this||zi)instanceof l||(this||zi)instanceof B))return new l(x);(this||zi)._writableState=new h(x,this||zi);(this||zi).writable=!0;w.call(this||zi)}function b(x,B,D){var F=Error("write after end");x.emit("error",
F);q.nextTick(function(){D(F)})}function c(x,B,D,F){var L=!0;if(!r.isBuffer(D)&&"string"!==typeof D&&null!==D&&void 0!==D&&!B.objectMode){var G=new TypeError("Invalid non-string/buffer chunk");x.emit("error",G);q.nextTick(function(){F(G)});L=!1}return L}function g(x,B,D,F,L){B.objectMode||!1===B.decodeStrings||"string"!==typeof D||(D=new r(D,F));r.isBuffer(D)&&(F="buffer");var G=B.objectMode?1:D.length;B.length+=G;var oa=B.length<B.highWaterMark;oa||(B.needDrain=!0);B.writing?B.buffer.push(new e(D,
F,L)):(B.writelen=G,B.writecb=L,B.writing=!0,B.sync=!0,x._write(D,F,B.onwrite),B.sync=!1);return oa}function a(x,B,D,F,L){D?q.nextTick(function(){L(F)}):L(F);x._writableState.errorEmitted=!0;x.emit("error",F)}function d(x){x.writing=!1;x.writecb=null;x.length-=x.writelen;x.writelen=0}function f(x,B){var D=x._writableState,F=D.sync,L=D.writecb;d(D);if(B)a(x,D,F,B,L);else{var G=D.ending&&0===D.length&&!D.finished&&!D.writing;G||D.bufferProcessing||!D.buffer.length||n(x,D);F?q.nextTick(function(){k(x,
D,G,L)}):k(x,D,G,L)}}function k(x,B,D,F){!D&&0===B.length&&B.needDrain&&(B.needDrain=!1,x.emit("drain"));F();D&&p(x,B)}function n(x,B){B.bufferProcessing=!0;for(var D=0;D<B.buffer.length;D++){var F=B.buffer[D],L=F.chunk,G=x,oa=B,ha=L,Ha=F.encoding;F=F.callback;oa.writelen=B.objectMode?1:L.length;oa.writecb=F;oa.writing=!0;oa.sync=!0;G._write(ha,Ha,oa.onwrite);oa.sync=!1;if(B.writing){D++;break}}B.bufferProcessing=!1;D<B.buffer.length?B.buffer=B.buffer.slice(D):B.buffer.length=0}function p(x,B){var D=
B.ending&&0===B.length&&!B.finished&&!B.writing;D&&(B.finished=!0,x.emit("finish"));return D}if(rP)return YE;rP=!0;var q=fk;YE=l;var r=Cj.Buffer;l.WritableState=h;var t=ak;t.inherits=Dj;var w=Kl;t.inherits(l,w);l.prototype.pipe=function(){this.emit("error",Error("Cannot pipe. Not readable."))};l.prototype.write=function(x,B,D){var F=(this||zi)._writableState,L=!1;"function"===typeof B&&(D=B,B=null);r.isBuffer(x)?B="buffer":B||(B=F.defaultEncoding);"function"!==typeof D&&(D=function(){});F.ended?b(this||
zi,F,D):c(this||zi,F,x,D)&&(L=g(this||zi,F,x,B,D));return L};l.prototype._write=function(x,B,D){D(Error("not implemented"))};l.prototype.end=function(x,B,D){var F=(this||zi)._writableState;"function"===typeof x?(D=x,B=x=null):"function"===typeof B&&(D=B,B=null);"undefined"!==typeof x&&null!==x&&this.write(x,B);if(!F.ending&&!F.finished){x=this||zi;F.ending=!0;p(x,F);if(D)if(F.finished)q.nextTick(D);else x.once("finish",D);F.ended=!0}};return YE}function sP(){function e(g,a){(this||Jk).afterTransform=
function(d,f){var k=a._transformState;k.transforming=!1;var n=k.writecb;n?(k.writechunk=null,k.writecb=null,null!==f&&void 0!==f&&a.push(f),n&&n(d),d=a._readableState,d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&a._read(d.highWaterMark),d=void 0):d=a.emit("error",Error("no writecb in Transform class"));return d};(this||Jk).needTransform=!1;(this||Jk).transforming=!1;(this||Jk).writecb=null;(this||Jk).writechunk=null}function h(g){if(!((this||Jk)instanceof h))return new h(g);b.call(this||
Jk,g);(this||Jk)._transformState=new e(g,this||Jk);var a=this||Jk;(this||Jk)._readableState.needReadable=!0;(this||Jk)._readableState.sync=!1;this.once("finish",function(){"function"===typeof(this||Jk)._flush?this._flush(function(d){l(a,d)}):l(a)})}function l(g,a){if(a)return g.emit("error",a);a=g._writableState;g._readableState;var d=g._transformState;if(a.length)throw Error("calling transform done when ws.length != 0");if(d.transforming)throw Error("calling transform done when still transforming");
return g.push(null)}if(tP)return ZE;tP=!0;ZE=h;var b=WE(),c=ak;c.inherits=Dj;c.inherits(h,b);h.prototype.push=function(g,a){(this||Jk)._transformState.needTransform=!1;return b.prototype.push.call(this||Jk,g,a)};h.prototype._transform=function(g,a,d){throw Error("not implemented");};h.prototype._write=function(g,a,d){var f=(this||Jk)._transformState;f.writecb=d;f.writechunk=g;f.writeencoding=a;f.transforming||(g=(this||Jk)._readableState,(f.needTransform||g.needReadable||g.length<g.highWaterMark)&&
this._read(g.highWaterMark))};h.prototype._read=function(g){g=(this||Jk)._transformState;null!==g.writechunk&&g.writecb&&!g.transforming?(g.transforming=!0,this._transform(g.writechunk,g.writeencoding,g.afterTransform)):g.needTransform=!0};return ZE}function y_(){function e(b){if(!((this||uP)instanceof e))return new e(b);h.call(this||uP,b)}if(vP)return $E;vP=!0;$E=e;var h=sP(),l=ak;l.inherits=Dj;l.inherits(e,h);e.prototype._transform=function(b,c,g){g(null,b)};return $E}function Hw(e){return e&&"object"===
typeof e&&"default"in e?e["default"]:e}function z_(e){var h={},l;for(l in e)h[l]=e[l];return h}function A_(e,h,l){e.open(function(){});return{apply:function(b,c,g){c=c||{};for(var a=[],d=-1,f=b.length;++d<f;){var k=b[d],n=k,p=k.prefix;p&&p.options&&(n.keyEncoding=n.keyEncoding||p.options.keyEncoding,n.valueEncoding=n.valueEncoding||p.options.valueEncoding);n=k;p=k.prefix;p="function"===typeof p.prefix?p.prefix():p;n.prefix=p;a.push({key:h.encode([k.prefix,l.encodeKey(k.key,c,k)]),value:"del"!==k.type&&
l.encodeValue(k.value,c,k),type:k.type})}e.db.batch(a,c,g)},get:function(b,c,g,a){g.asBuffer=l.valueAsBuffer(g);return e.db.get(h.encode([c,l.encodeKey(b,g,void 0)]),g,function(d,f){d?a(d):a(null,l.decodeValue(f,g))})},createDecoder:function(b){return function(c,g){return{key:l.decodeKey(h.decode(c)[1],b),value:l.decodeValue(g,b)}}},isClosed:function(){return e.isClosed()},close:function(b){return e.close(b)},iterator:function(b){var c=z_(b||{}),g=b.prefix||[];B_.toLtgt(b,c,function(a){return h.encode([g,
l.encodeKey(a,c,{})])},h.lowerBound,h.upperBound);c.prefix=null;c.keyAsBuffer=c.valueAsBuffer=!1;"number"!==typeof c.limit&&(c.limit=-1);c.keyAsBuffer=h.buffer;c.valueAsBuffer=l.valueAsBuffer(c);return function(a){return{next:function(d){return a.next(d)},end:function(d){a.end(d)}}}(e.db.iterator(c))}}}function aF(){Error.call(this)}function fq(e,h){if(!(this instanceof fq))return new fq(e,h);wP.call(this,{objectMode:!0,highWaterMark:e.highWaterMark});this._waiting=!1;this._options=e;this._makeData=
h}function qu(e){xP.call(this||jp,e);(this||jp)._destroyed=!1}function C_(e,h,l){l(null,e)}function bF(e){return function(h,l,b){"function"==typeof h&&(b=l,l=h,h={});"function"!=typeof l&&(l=C_);"function"!=typeof b&&(b=null);return e(h,l,b)}}function Oi(e){this._capacity=yP(e);this._front=this._length=0;if(zP(e)){for(var h=e.length,l=0;l<h;++l)this[l]=e[l];this._length=h}}function yP(e){if("number"!==typeof e)if(zP(e))e=e.length;else return 16;e=Math.min(Math.max(16,e),1073741824);e=(e>>>0)-1;e|=
e>>1;e|=e>>2;e|=e>>4;e|=e>>8;return(e|e>>16)+1}function cF(e){e=e.rev_tree.slice();for(var h;h=e.pop();){var l=h.ids,b=l[2];h=h.pos;if(b.length){l=0;for(var c=b.length;l<c;l++)e.push({pos:h+1,ids:b[l]})}else if(b=!!l[1].deleted,l=l[0],!g||(d!==b?d:a!==h?a<h:g<l)){var g=l;var a=h;var d=b}}return a+"-"+g}function cA(e,h){e=e.slice();for(var l;l=e.pop();){var b=l.pos,c=l.ids,g=c[2];l=h(0===g.length,b,c[0],l.ctx,c[1]);c=0;for(var a=g.length;c<a;c++)e.push({pos:b+1,ids:g[c],ctx:l})}}function D_(e,h){return e.pos-
h.pos}function AP(e){var h=[];cA(e,function(b,c,g,a,d){b&&h.push({rev:c+"-"+g,pos:c,opts:d})});h.sort(D_).reverse();e=0;for(var l=h.length;e<l;e++)delete h[e].pos;return h}function BP(e){var h=[];e=e.slice();for(var l;l=e.pop();){var b=l.pos,c=l.ids,g=c[0],a=c[1];c=c[2];var d=0===c.length;l=l.history?l.history.slice():[];l.push({id:g,opts:a});d&&h.push({pos:b+1-l.length,ids:l});g=0;for(a=c.length;g<a;g++)e.push({pos:b+1,ids:c[g],history:l})}return h.reverse()}function E_(e,h){return e.pos-h.pos}function CP(e,
h){for(var l,b,c=e.length;h<c;h++){var g=e[h];g=[g.id,g.opts,[]];b?(b[2].push(g),b=g):l=b=g}return l}function F_(e,h){return e[0]<h[0]?-1:1}function DP(e,h){h=[{tree1:e,tree2:h}];for(var l=!1;0<h.length;){var b=h.pop(),c=b.tree1;b=b.tree2;if(c[1].status||b[1].status)c[1].status="available"===c[1].status||"available"===b[1].status?"available":"missing";for(var g=0;g<b[2].length;g++)if(c[2][0]){for(var a=!1,d=0;d<c[2].length;d++)c[2][d][0]===b[2][g][0]&&(h.push({tree1:c[2][d],tree2:b[2][g]}),a=!0);
if(!a){l="new_branch";a=c[2];d=b[2][g];for(var f,k=a,n=d,p=F_,q=0,r=k.length;q<r;)f=q+r>>>1,0>p(k[f],n)?q=f+1:r=f;a.splice(q,0,d)}}else l="new_leaf",c[2][0]=b[2][g]}return{conflicts:l,tree:e}}function EP(e,h,l){var b=[],c=!1,g=!1;if(!e.length)return{tree:[h],conflicts:"new_leaf"};for(var a=0,d=e.length;a<d;a++){var f=e[a];if(f.pos===h.pos&&f.ids[0]===h.ids[0])g=DP(f.ids,h.ids),b.push({pos:f.pos,ids:g.tree}),c=c||g.conflicts,g=!0;else if(!0!==l){var k=f.pos<h.pos?f:h,n=f.pos<h.pos?h:f,p=[],q=[];for(q.push({ids:k.ids,
diff:n.pos-k.pos,parent:null,parentIdx:null});0<q.length;){var r=q.pop();if(0===r.diff)r.ids[0]===n.ids[0]&&p.push(r);else for(var t=r.ids[2],w=0,x=t.length;w<x;w++)q.push({ids:t[w],diff:r.diff-1,parent:r.ids,parentIdx:w})}(p=p[0])?(g=DP(p.ids,n.ids),p.parent[2][p.parentIdx]=g.tree,b.push({pos:k.pos,ids:k.ids}),c=c||g.conflicts,g=!0):b.push(f)}else b.push(f)}g||b.push(h);b.sort(E_);return{tree:b,conflicts:c||"internal_node"}}function G_(e,h){e=BP(e);for(var l,b,c=0,g=e.length;c<g;c++){var a=e[c],
d=a.ids;if(d.length>h){l||(l={});var f=d.length-h;var k={pos:a.pos+f,ids:CP(d,f)};for(var n=0;n<f;n++)l[a.pos+n+"-"+d[n].id]=!0}else k={pos:a.pos,ids:CP(d,0)};b=b?EP(b,k,!0).tree:[k]}l&&cA(b,function(p,q,r){delete l[q+"-"+r]});return{tree:b,revs:l?Object.keys(l):[]}}function H_(e){return e.ids}function FP(e){return e.reduce(function(h,l){h[l]=!0;return h},{})}function GP(e){if(!/^\d+-/.test(e))return Yl.createError(Yl.INVALID_REV);var h=e.indexOf("-"),l=e.substring(0,h);e=e.substring(h+1);return{prefix:parseInt(l,
10),id:e}}function HP(e,h,l){l||(l={deterministic_revs:!0});var b={status:"available"};e._deleted&&(b.deleted=!0);if(h){e._id||(e._id=bs.uuid());var c=bs.rev(e,l.deterministic_revs);if(e._rev){h=GP(e._rev);if(h.error)return h;e._rev_tree=[{pos:h.prefix,ids:[h.id,{status:"missing"},[[c,b,[]]]]}];var g=h.prefix+1}else e._rev_tree=[{pos:1,ids:[c,b,[]]}],g=1}else{if(e._revisions){c=e._revisions;g=c.start-c.ids.length+1;c=c.ids;h=[c[0],b,[]];l=1;for(var a=c.length;l<a;l++)h=[c[l],{status:"missing"},[h]];
e._rev_tree=[{pos:g,ids:h}];g=e._revisions.start;c=e._revisions.ids[0]}if(!e._rev_tree){h=GP(e._rev);if(h.error)return h;g=h.prefix;c=h.id;e._rev_tree=[{pos:g,ids:[c,b,[]]}]}}bs.invalidIdError(e._id);e._rev=g+"-"+c;b={metadata:{},data:{}};for(var d in e)if(Object.prototype.hasOwnProperty.call(e,d)){if((g="_"===d[0])&&!I_[d])throw e=Yl.createError(Yl.DOC_VALIDATION,d),e.message=Yl.DOC_VALIDATION.message+": "+d,e;g&&!J_[d]?b.metadata[d.slice(1)]=e[d]:b.data[d]=e[d]}return b}function K_(e,h,l){try{var b=
Iw.atob(e.data)}catch(c){b={error:Yl.createError(Yl.BAD_ARG,"Attachment is not a valid base64 string")}}if(b.error)return l(b.error);e.length=b.length;e.data="blob"===h?Iw.binaryStringToBlobOrBuffer(b,e.content_type):"base64"===h?Iw.btoa(b):b;IP.binaryMd5(b,function(c){e.digest="md5-"+c;l()})}function L_(e,h,l){IP.binaryMd5(e.data,function(b){e.digest="md5-"+b;e.length=e.data.size||e.data.length||0;"binary"===h?Iw.blobOrBufferToBinaryString(e.data,function(c){e.data=c;l()}):"base64"===h?Iw.blobOrBufferToBase64(e.data,
function(c){e.data=c;l()}):l()})}function M_(e,h,l){if(e.stub)return l();"string"===typeof e.data?K_(e,h,l):L_(e,h,l)}function JP(e,h,l,b,c,g,a,d){if(Ll.revExists(h.rev_tree,l.metadata.rev)&&!d)return b[c]=l,g();var f=h.winningRev||Ll.winningRev(h),k="deleted"in h?h.deleted:Ll.isDeleted(h,f),n="deleted"in l.metadata?l.metadata.deleted:Ll.isDeleted(l.metadata),p=/^1-/.test(l.metadata.rev);k&&!n&&d&&p&&(p=l.data,p._rev=f,p._id=l.metadata.id,l=HP(p,d));e=Ll.merge(h.rev_tree,l.metadata.rev_tree[0],e);
if(d&&(k&&n&&"new_leaf"!==e.conflicts||!k&&"new_leaf"!==e.conflicts||k&&!n&&"new_branch"===e.conflicts))return l=Yl.createError(Yl.REV_CONFLICT),b[c]=l,g();b=l.metadata.rev;l.metadata.rev_tree=e.tree;l.stemmedRevs=e.stemmedRevs||[];h.rev_map&&(l.metadata.rev_map=h.rev_map);h=Ll.winningRev(l.metadata);d=Ll.isDeleted(l.metadata,h);k=k===d?0:k<d?-1:1;b=b===h?d:Ll.isDeleted(l.metadata,b);a(l,h,d,b,!0,k,c,g)}function Jw(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}function KP(e,h){e=
new Uint8Array(e);return Kw.blob([e],{type:h})}function N_(e,h){Kw.readAsBinaryString(e,h)}function LP(e,h){h=h.prefix()[0];e=e._cache;var l=e.get(h);l||(l=new rn.Map,e.set(h,l));return l}function cs(){this._batch=[];this._cache=new rn.Map}function dF(e){return"winningRev"in e?e.winningRev:Lw.winningRev(e)}function O_(e,h,l){var b=e.content_type;return new Promise(function(c,g){h.binaryStore.get(e.digest,function(a,d){if(a){if("NotFoundError"!==a.name)return g(a);a=l.binary?Kw.binaryStringToBlobOrBuffer("",
b):""}else a=l.binary?KP(d,b):d.toString("base64");delete e.stub;delete e.length;e.data=a;c()})})}function eF(e,h,l){var b=[];e.forEach(function(c){c.doc&&c.doc._attachments&&Object.keys(c.doc._attachments).forEach(function(g){g=c.doc._attachments[g];"data"in g||b.push(g)})});return Promise.all(b.map(function(c){return O_(c,h,l)}))}function fF(e){(this||ds).db=e;(this||ds)._ended=!1;(this||ds)._nexting=!1}function ru(e){(this||vj)._db=e;(this||vj)._operations=[];(this||vj)._written=!1}function Zl(e){if(!arguments.length||
void 0===e)throw Error("constructor requires at least a location argument");if("string"!=typeof e)throw Error("constructor requires a location string argument");(this||lj).location=e;(this||lj).status="new"}function jo(e,h){return Object.hasOwnProperty.call(e,h)&&h}function P_(e){return e}function $l(e,h,l,b,c,g){this._color=e;this.key=h;this.value=l;this.left=b;this.right=c;this._count=g}function ko(e){return new $l(e._color,e.key,e.value,e.left,e.right,e._count)}function gq(e,h){return new $l(e,
h.key,h.value,h.left,h.right,h._count)}function Ej(e){e._count=1+(e.left?e.left._count:0)+(e.right?e.right._count:0)}function su(e,h){this._compare=e;this.root=h}function gF(e,h){if(h.left){var l=gF(e,h.left);if(l)return l}if(l=e(h.key,h.value))return l;if(h.right)return gF(e,h.right)}function hF(e,h,l,b){if(0>=h(e,b.key)){if(b.left){var c=hF(e,h,l,b.left);if(c)return c}if(c=l(b.key,b.value))return c}if(b.right)return hF(e,h,l,b.right)}function iF(e,h,l,b,c){var g=l(e,c.key),a=l(h,c.key);if(0>=g&&
(c.left&&(g=iF(e,h,l,b,c.left))||0<a&&(g=b(c.key,c.value))))return g;if(0<a&&c.right)return iF(e,h,l,b,c.right)}function am(e,h){this.tree=e;this._stack=h}function MP(e,h){e.key=h.key;e.value=h.value;e.left=h.left;e.right=h.right;e._color=h._color;e._count=h._count}function Q_(e,h){return e<h?-1:e>h?1:0}function R_(){tu&&es&&(tu=!1,es.length?hq=es.concat(hq):Mw=-1,hq.length&&NP())}function NP(){if(!tu){jF=!1;tu=!0;for(var e=hq.length,h=setTimeout(R_);e;){es=hq;for(hq=[];es&&++Mw<e;)es[Mw].run();Mw=
-1;e=hq.length}es=null;Mw=-1;tu=!1;clearTimeout(h)}}function OP(e,h){this.fun=e;this.array=h}function S_(e){return 0<bm.compare(e,(this||rg)._end)}function T_(e){return 0<=bm.compare(e,(this||rg)._end)}function U_(e){return 0>bm.compare(e,(this||rg)._end)}function V_(e){return 0>=bm.compare(e,(this||rg)._end)}function dA(e,h){PP.call(this||rg,e);(this||rg)._limit=h.limit;-1===(this||rg)._limit&&((this||rg)._limit=Infinity);e=e._store[e._location];(this||rg).keyAsBuffer=!1!==h.keyAsBuffer;(this||rg).valueAsBuffer=
!1!==h.valueAsBuffer;(this||rg)._reverse=h.reverse;(this||rg)._options=h;(this||rg)._done=0;(this||rg)._reverse?((this||rg)._incr="prev",(this||rg)._start=bm.upperBound(h),(this||rg)._end=bm.lowerBound(h),"undefined"===typeof(this||rg)._start?(this||rg)._tree=e.end:bm.upperBoundInclusive(h)?(this||rg)._tree=e.le((this||rg)._start):(this||rg)._tree=e.lt((this||rg)._start),(this||rg)._end&&(bm.lowerBoundInclusive(h)?(this||rg)._test=T_:(this||rg)._test=S_)):((this||rg)._incr="next",(this||rg)._start=
bm.lowerBound(h),(this||rg)._end=bm.upperBound(h),"undefined"===typeof(this||rg)._start?(this||rg)._tree=e.begin:bm.lowerBoundInclusive(h)?(this||rg)._tree=e.ge((this||rg)._start):(this||rg)._tree=e.gt((this||rg)._start),(this||rg)._end&&(bm.upperBoundInclusive(h)?(this||rg)._test=V_:(this||rg)._test=U_))}function cm(e){if(!((this||rg)instanceof cm))return new cm(e);QP.call(this||rg,"string"==typeof e?e:"");(this||rg)._location=(this||rg).location?"$"+(this||rg).location:"_tree";(this||rg)._store=
(this||rg).location?uu:this||rg;(this||rg)._store[(this||rg)._location]=(this||rg)._store[(this||rg)._location]||W_(bm.compare)}function RP(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}function kF(e,h){e=X_.assign({db:Y_},e);Z_.call(this,e,h)}function SP(e){e&&(e.__serialize__=function(){var h=e.name,l=e._id;return{__expr__:'({type: "'.concat(e.type,'", name: "').concat(h,'", _id: "').concat(l,'"})')}});return e}function Nw(e){return lF.apply(this,arguments)}function lF(){lF=Bb(regeneratorRuntime.mark(function l(h){var b,
c,g;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(h&&!yh.obj.isEmpty(h)){a.next=2;break}return a.abrupt("return",!1);case 2:if(!h||!h._rev){a.next=4;break}return a.abrupt("return",h);case 4:return b=h.type,c=h.name,g=h._id,a.prev=5,a.t0=Object,a.t1=h,a.next=10,yh.MorphicDB["default"].fetchCommit(b,c,g);case 10:a.t2=a.sent,a.t0.assign.call(a.t0,a.t1,a.t2);case 12:return a.prev=12,a.abrupt("return",h);case 15:case "end":return a.stop()}},l,null,[[5,,12,15]])}));return lF.apply(this,
arguments)}function mF(e){return[]}function eA(e){return nF.apply(this,arguments)}function nF(){nF=Bb(regeneratorRuntime.mark(function l(h){var b,c,g,a,d,f=arguments;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return b=1<f.length&&void 0!==f[1]?f[1]:{},c=b.morphicDB||Qf.MorphicDB["default"],k.next=4,c.load("part","string"===typeof h?h:h.name,b,"string"===typeof h?void 0:h);case 4:g=k.sent;if(!g.isWindow||!g.targetMorph){k.next=11;break}a=g.targetMorph;k.next=9;return Qf.ensureCommitInfo(g.metadata&&
g.metadata.commit);case 9:(d=k.sent)&&a.changeMetaData("commit",d,!0,!1);case 11:return k.abrupt("return",g);case 12:case "end":return k.stop()}},l)}));return nF.apply(this,arguments)}function oF(e,h,l,b,c,g){return pF.apply(this,arguments)}function pF(){pF=Bb(regeneratorRuntime.mark(function d(h,l,b,c,g,a){var f,k,n,p,q,r,t,w;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:x.prev=0;if(!h.isMorph){x.next=14;break}f=[];h.withAllSubmorphsDo(function(B){"function"===typeof B.beforePublish&&
f.push(B)});k=0;n=f;case 5:if(!(k<n.length)){x.next=12;break}p=n[k];x.next=9;return p.beforePublish();case 9:k++;x.next=5;break;case 12:x.next=17;break;case 14:if("function"!==typeof h.beforePublish){x.next=17;break}x.next=17;return h.beforePublish(l,h);case 17:x.next=23;break;case 19:x.prev=19,x.t0=x["catch"](0),q="Error in beforePublish of ".concat(h,"\n").concat(x.t0.stack),"function"===typeof h.world&&h.world()?h.world().logError(Error(q)):console.error(q);case 23:return r=Object.assign({previewWidth:100,
previewHeight:100,previewType:"png"},b),t=b.morphicDB||Qf.MorphicDB["default"],x.next=27,t.snapshotAndCommit("part",l,h,r,c,g,a);case 27:return w=x.sent,Qf.emit("lively.partsbin/partpublished",w),x.abrupt("return",w);case 30:case "end":return x.stop()}},d,null,[[0,19]])}));return pF.apply(this,arguments)}function vu(e){return qF.apply(this,arguments)}function qF(){qF=Bb(regeneratorRuntime.mark(function l(h){var b,c,g,a,d,f,k,n,p,q,r,t,w,x,B,D,F,L,G,oa,ha,Ha,Va,hc,qc,jc,Ya,xa,tc,Qb,wc,Zb,$c,Oa,md,
la,$a,dd,Kd,ra,Aa,V,ea,Mb,U,Sa,S,Sc,xd,Ae=arguments;return regeneratorRuntime.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return b=1<Ae.length&&void 0!==Ae[1]?Ae[1]:{},c=b.showPublishDialog,g=void 0===c?!0:c,a=b.notifications,d=void 0===a?!0:a,f=b.loadingIndicator,k=void 0===f?!0:f,n=b.preferWindow,p=void 0===n?!0:n,t=h,w=h.world()||h.env.world,x=h.name,B=[],D="",ee.next=9,Qf.ensureCommitInfo(Qf.Path("metadata.commit").get(h)||Qf.Path("metadata.commit").get(t));case 9:F=ee.sent;L=b.morphicDB||
Qf.MorphicDB["default"];F||(F={type:"part",name:h.name,author:w.getCurrentUser(),tags:[],description:"no description"});if(!g){ee.next=29;break}ee.t0=w;ee.next=16;return Qf.loadPart("publish part dialog");case 16:return ee.t1=ee.sent,ee.t2={part:h},ee.next=20,ee.t0.openPrompt.call(ee.t0,ee.t1,ee.t2);case 20:G=ee.sent;oa=G.db;if(ha=G.commit){ee.next=25;break}return ee.abrupt("return",null);case 25:oa&&(b.morphicDB=L=oa);Qf.__inter0__=ha;x=Qf.__inter0__.name;B=Qf.__inter0__.tags;D=Qf.__inter0__.description;
ee.next=30;break;case 29:F&&(Qf.__inter1__=F,x=Qf.__inter1__.name,B=Qf.__inter1__.tags,D=Qf.__inter1__.description);case 30:if(!k){ee.next=34;break}Ha=$world.execCommand("open loading indicator","saving ".concat(x,"..."));ee.next=34;return Qf.promise.delay(80);case 34:ee.prev=34;Va="HEAD";hc=F?F.name:h.name;if(hc===x){ee.next=53;break}ee.next=40;return L.exists("part",x);case 40:jc=ee.sent;Ya=jc.exists;xa=jc.commitId;if(!Ya){ee.next=50;break}ee.next=46;return w.confirm('A part "'.concat(x,'" already exists, overwrite?'));
case 46:if(tc=ee.sent){ee.next=49;break}return ee.abrupt("return",null);case 49:qc=xa;case 50:t.name=x;ee.next=54;break;case 53:qc=F?F._id:void 0;case 54:return p&&!h.isWindow&&(Qb=h.getWindow())&&Qb.targetMorph===h&&(h=Qb,r=Qb.metadata,q=!0),wc={author:h.world().getCurrentUser(),message:"published",tags:B,description:D},ee.next=58,Qf.savePart(h,x,b,wc,Va,qc);case 58:Zb=ee.sent;if(!q){ee.next=71;break}if(!t.metadata){ee.next=66;break}ee.next=63;return Qf.ensureCommitInfo(win.metadata.commit);case 63:t.metadata.commit=
ee.sent;ee.next=70;break;case 66:return ee.next=68,Qf.ensureCommitInfo(win.metadata.commit);case 68:ee.t3=ee.sent,t.metadata={commit:ee.t3};case 70:win.metadata=r;case 71:return d&&h.setStatusMessage("saved part ".concat(x)),ee.abrupt("return",Zb);case 75:ee.prev=75;ee.t4=ee["catch"](34);$c=ee.t4.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||[];Oa=Nb($c,4);md=Oa[2];la=Oa[3];if(!md||!la){ee.next=94;break}ee.next=81;return L.log(la,
1,!0);case 81:return $a=ee.sent,dd=Nb($a,1),Kd=dd[0],ra=Kd.author.name,Aa=Kd.timestamp,V='The current version of part "'.concat(x,'" is not the most recent!\n')+"A newer version by ".concat(ra," was saved on ")+"".concat(Qf.date.format(new Date(Aa),"yyyy-mm-dd HH:MM"),". Overwrite?"),ee.next=88,w.confirm(["Version Mismatch\n",{},V,{fontWeight:"normal",fontSize:16}]);case 88:if(ea=ee.sent){ee.next=91;break}return ee.abrupt("return",null);case 91:return Mb=Qf.obj.dissoc(Kd,["preview"]),t.changeMetaData("commit",
Mb,!0,!1),ee.abrupt("return",vu(t,Object.assign({},b,{morphicDB:L,showPublishDialog:!1})));case 94:U=ee.t4.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but no version entry exists/)||[];Sa=Nb(U,3);S=Sa[2];if(!S){ee.next=104;break}Sc="Part ".concat(x," no longer exist in the object database.\n")+"Do you still want to publish it?";ee.next=99;return w.confirm(Sc);case 99:if(xd=ee.sent){ee.next=102;break}return ee.abrupt("return",null);case 102:return t.changeMetaData("commit",
null,!0,!1),ee.abrupt("return",vu(t,Object.assign({},b,{morphicDB:L,showPublishDialog:!1})));case 104:throw console.error(ee.t4),d&&w.logError("Error saving part: "+ee.t4),ee.t4;case 107:return ee.prev=107,Ha&&Ha.remove(),ee.finish(107);case 110:case "end":return ee.stop()}},l,null,[[34,75,107,110]])}));return qF.apply(this,arguments)}function rF(){return sF.apply(this,arguments)}function sF(){sF=Bb(regeneratorRuntime.mark(function h(){var l,b,c,g,a,d,f,k=arguments;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=
n.next){case 0:return l=0<k.length&&void 0!==k[0]?k[0]:{},b=l.morphicDB||Qf.MorphicDB["default"],n.next=4,b.latestCommits("part");case 4:return c=n.sent,g=c.map(function(p){return{isListItem:!0,string:p.name,value:p}}),n.next=8,$world.filterableListPrompt("Select part to load",g,{fuzzy:!0});case 8:return a=n.sent,d=Nb(a.selected,1),f=d[0],n.abrupt("return",f?Qf.loadPart(f):null);case 12:case "end":return n.stop()}},h)}));return sF.apply(this,arguments)}function tF(e){return uF.apply(this,arguments)}
function uF(){uF=Bb(regeneratorRuntime.mark(function l(h){var b;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,$world.prompt("Enter part name to publish object under",{input:h.name||"part-name",historyId:"lively.partsbin-partname-publish-to-folder-input-hist"});case 2:if(b=c.sent){c.next=5;break}throw"canceled";case 5:return c.abrupt("return",Qf.saveObjectToPartsbinFolder(h,b,{previewWidth:h.width,previewHeight:h.height}));case 6:case "end":return c.stop()}},
l)}));return uF.apply(this,arguments)}function vF(e,h){return wF.apply(this,arguments)}function wF(){wF=Bb(regeneratorRuntime.mark(function b(h,l){var c,g,a,d,f,k,n,p,q,r=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:c=2<r.length&&void 0!==r[2]?r[2]:{};c=Object.assign({preferWindow:!0},c);c.preferWindow&&(h=(g=h.getWindow())&&g.targetMorph===h?g:h);t.prev=3;if(!h.isMorph){t.next=17;break}a=[];h.withAllSubmorphsDo(function(w){"function"===typeof w.beforePublish&&
a.push(w)});d=0;f=a;case 8:if(!(d<f.length)){t.next=15;break}k=f[d];t.next=12;return k.beforePublish();case 12:d++;t.next=8;break;case 15:t.next=20;break;case 17:if("function"!==typeof h.beforePublish){t.next=20;break}t.next=20;return h.beforePublish(l,h);case 20:t.next=26;break;case 22:t.prev=22,t.t0=t["catch"](3),n="Error in beforePublish of ".concat(h,"\n").concat(t.t0.stack),"function"===typeof h.world&&h.world()?h.world().logError(Error(n)):console.error(n);case 26:return t.next=28,Qf.resource(c.partsbinFolder).ensureExistance();
case 28:return p=Qf.resource(c.partsbinFolder).join(l+".json"),t.next=31,Qf.createMorphSnapshot(h,c);case 31:return q=t.sent,t.next=34,p.write(JSON.stringify(q,null,2));case 34:return t.abrupt("return",{partName:l,url:p.url});case 35:case "end":return t.stop()}},b,null,[[3,22]])}));return wF.apply(this,arguments)}function fA(e){return xF.apply(this,arguments)}function xF(){xF=Bb(regeneratorRuntime.mark(function l(h){var b,c=arguments;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=
g.next){case 0:return b=1<c.length&&void 0!==c[1]?c[1]:{},g.abrupt("return",Qf.loadPart(h,b));case 2:case "end":return g.stop()}},l)}));return xF.apply(this,arguments)}function yF(e){return new Qf.CommitEditor(e)}function fs(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(Hg.evaluateAsSpec)return e.extend(h);if(e.isComponentDescriptor)return e.getInstance(h);if(e.isPolicy)return e.instantiate(h)}function Ow(e,h){var l;if(h)var b=h;else b=e,e=null;if(Hg.evaluateAsSpec)return e?
new Hg.PolicyApplicator(b,e):b;console.log("[COMPONENT] Defining: "+b.name);if(e){var c=Hg.part(e,h);c.defaultViewModel=e.defaultViewModel;c.viewModelClass=e.viewModelClass}else c=Hg.morph(Object.assign({},b));h&&(l=h.type)&&(Hg.obj.isString(l)&&(l=Hg.getClassForName(l)),Hg.obj.adoptObject(c,l));if(b.defaultViewModel||b.viewModelClass)c.defaultViewModel=b.defaultViewModel,c.viewModelClass=b.viewModelClass;c.withAllSubmorphsDo(function(g){if(g.viewModel)g.viewModel.onDeactivate();g.master&&g.master.applyIfNeeded(!g.master._appliedMaster)});
c.updateDerivedMorphs();c._snap=Hg.serializeMorph(c);delete c._snap.snapshot[c.id].props.isComponent;delete c._snap.snapshot[c.id].props.master;c.isComponent=!0;return c}function Pw(e){return{COMMAND:"remove",target:e}}function Qw(e){return{COMMAND:"add",props:e,before:1<arguments.length&&void 0!==arguments[1]?arguments[1]:null}}function gA(e){return Hg.morph(e.stylePolicy.asBuildSpecSimple())}function Rw(e){if("undefined"!==typeof $world)for(var h in e)$world.env.fontMetric.isFontSupported(Hg.sanitizeFont(h))||
Hg.insertFontCSS(h,e[h])}function zF(){zF=Bb(regeneratorRuntime.mark(function l(h){var b,c,g,a,d;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return b=h.getCurrentUser(),c={world:h.name},b&&(c.userToken=b.token,c.userRealm=b.realm),f.next=5,lively.modules.importPackage("lively.2lively");case 5:return f.next=7,Promise.resolve().then(function(){return TP});case 7:return g=f.sent,a=g["default"],f.next=11,a.forLivelyInBrowser(c);case 11:return d=f.sent,console.log("[lively] lively2lively client created ".concat(d)),
d._onUserChange?zg.reportWorldLoad(h,b):(d._onUserChange=function(k){d.isOnline()&&k.user&&(k=k.user,d.info=Object.assign({},d.info,{userToken:k.token,userRealm:k.realm}),d.unregister().then(function(){return d.register()}).then(function(){return console.log("re-registered after user change")}))},zg.subscribe("lively.user/userchanged",d._onUserChange,System),d.once("registered",function(){zg.reportWorldLoad(h,b)}),d.on("registered",function(){var k=h.get("user flap");k&&k.updateNetworkIndicator(d)}),
d.on("connected",function(){var k=h.get("user flap");k&&k.updateNetworkIndicator(d)}),d.on("reconnecting",function(){var k=h.get("user flap");k&&k.updateNetworkIndicator(d)}),d.on("disconnected",function(){var k=h.get("user flap");k&&k.updateNetworkIndicator(d)})),f.abrupt("return",d);case 15:case "end":return f.stop()}},l)}));return zF.apply(this,arguments)}function AF(){AF=Bb(regeneratorRuntime.mark(function l(h){var b,c,g,a,d;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=
2,lively.modules.importPackage("lively.shell");case 2:return f.next=4,Promise.resolve().then(function(){return UP});case 4:return b=f.sent,c=b["default"],f.next=8,Promise.resolve().then(function(){return VP});case 8:g=f.sent,a=g.resourceExtension,d=h.l2lClient,c.installLively2LivelyServices(d),a.resourceClass.defaultL2lClient=d,zg.registerResourceExension(a),console.log("[lively] lively.shell setup");case 15:case "end":return f.stop()}},l)}));return AF.apply(this,arguments)}function BF(){BF=Bb(regeneratorRuntime.mark(function h(){var l;
return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return l=lively.modules.module("localconfig.js"),b.prev=1,b.next=4,zg.resource(l.id).exists();case 4:if(!b.sent){b.next=7;break}b.next=7;return l.reload({resetEnv:!1,reloadDeps:!1});case 7:b.next=13;break;case 9:b.prev=9,b.t0=b["catch"](1),console.error("Error loading localconfig:",b.t0),"undefined"!==typeof $world&&$world.showError("Error loading localconfig.js: ".concat(b.t0));case 13:case "end":return b.stop()}},h,null,
[[1,9]])}));return BF.apply(this,arguments)}function CF(e,h){return DF.apply(this,arguments)}function DF(){DF=Bb(regeneratorRuntime.mark(function b(h,l){var c,g,a,d,f,k,n,p,q,r,t,w,x,B,D,F,L,G,oa=arguments;return regeneratorRuntime.wrap(function(ha){for(;;)switch(ha.prev=ha.next){case 0:c=2<oa.length&&void 0!==oa[2]?oa[2]:{};g=c.env;a=c.root;d=c.verbose;f=void 0===d?!0:d;k=c.localconfig;n=void 0===k?!0:k;p=c.l2l;q=void 0===p?!0:p;r=c.shell;t=void 0===r?!0:r;w=c.worldLoadDialog;x=void 0===w?!1:w;B=
c.showUserFlap;D=void 0===B?"undefined"===typeof h.showsUserFlap?!0:h.showsUserFlap:B;g=g||(l?l.env:zg.MorphicEnv["default"]());F=g.domEnv.document||document;L=F.getElementById("dom-loading-indicator");ha.prev=5;ha.t0=q;if(!ha.t0){ha.next=11;break}ha.next=10;return zg.setupLively2Lively(h);case 10:ha.t0=ha.sent;case 11:G=ha.t0;if(!G||!t){ha.next=15;break}ha.next=15;return zg.setupLivelyShell({l2lClient:G});case 15:f&&L&&(L.style.display="");ha.t1=n;if(!ha.t1){ha.next=20;break}ha.next=20;return zg.loadLocalConfig();
case 20:return ha.next=22,g.setWorld(h,a);case 22:x&&h.execCommand("load world");c.pathForBrowserHistory&&window.history.pushState({},"lively.next",c.pathForBrowserHistory);h.showsUserFlap=D;if(l)l.onUnload();zg.emit("world/loaded",h);return ha.abrupt("return",h);case 30:ha.prev=30;ha.t2=ha["catch"](5);console.error("Error loading world: ",ha.t2);if(!l){ha.next=37;break}ha.next=36;return g.setWorld(l);case 36:l.showError(ha.t2);case 37:throw ha.t2;case 38:return ha.prev=38,L&&(L.style.display="none"),
ha.finish(38);case 41:case "end":return ha.stop()}},b,null,[[5,30,38,41]])}));return DF.apply(this,arguments)}function EF(e,h,l){return FF.apply(this,arguments)}function FF(){FF=Bb(regeneratorRuntime.mark(function c(h,l,b){var g,a,d;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return l&&(l.name=null,l.metadata&&(l.metadata.commit={})),g=zg.MorphicDB["default"],f.next=4,g.load("world",void 0,b,h);case 4:return a=f.sent,d="undefined"!==typeof document?document.location.search:
"",b=Object.assign({pathForBrowserHistory:zg.pathForBrowserHistory(a.name,d)},b),f.abrupt("return",zg.loadWorld(a,l,b));case 8:case "end":return f.stop()}},c)}));return FF.apply(this,arguments)}function GF(e,h,l,b){return HF.apply(this,arguments)}function HF(){HF=Bb(regeneratorRuntime.mark(function g(h,l,b,c){var a,d,f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return b&&(b.name=null,b.metadata&&(b.metadata.commit={})),a=zg.MorphicDB["default"],k.next=4,a.load("world",
h,c,void 0,l||void 0);case 4:return d=k.sent,f="undefined"!==typeof document?document.location.search:"",c=Object.assign({pathForBrowserHistory:zg.pathForBrowserHistory(h,f)},c),k.abrupt("return",zg.loadWorld(d,b,c));case 8:case "end":return k.stop()}},g)}));return HF.apply(this,arguments)}function IF(e,h,l){return JF.apply(this,arguments)}function JF(){JF=Bb(regeneratorRuntime.mark(function c(h,l,b){var g,a;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return g=h.isResource?
h:zg.resource(System.decanonicalize(h)),a=g.nameWithoutExt(),d.abrupt("return",zg.loadWorldFromDB(a,void 0,l,b));case 3:case "end":return d.stop()}},c)}));return JF.apply(this,arguments)}function Sw(e,h){return KF.apply(this,arguments)}function KF(){KF=Bb(regeneratorRuntime.mark(function b(h,l){var c,g,a,d,f,k,n,p,q,r,t,w,x,B,D,F,L,G,oa,ha,Ha,Va,hc,qc,jc,Ya,xa,tc,Qb,wc,Zb,$c,Oa,md,la,$a,dd,Kd,ra,Aa,V;return regeneratorRuntime.wrap(function(ea){for(;;)switch(ea.prev=ea.next){case 0:return l=Object.assign({showSaveDialog:!0,
useExpectedCommit:!0,errorOnMissingExpectedCommit:!1,confirmOverwrite:!0},l),ea.next=3,pd.import("./dialogs.cp-75967216.js");case 3:return c=ea.sent,g=c.SaveWorldDialog,a=h.name,d=[],f="",ea.next=10,zg.ensureCommitInfo(zg.Path("metadata.commit").get(h));case 10:k=ea.sent;n=l.morphicdb||zg.MorphicDB["default"];p="";q="db";if(!l.showSaveDialog){ea.next=31;break}r=zg.part(g,{viewModel:k||{}});ea.next=18;return h.openPrompt(r,{targetWorld:h});case 18:t=ea.sent;w=t.commit;x=t.db;B=t.mode;D=t.filePath;
x&&(n=x);q=B;p=D;zg.__inter0__=w||{};a=zg.__inter0__.name;d=zg.__inter0__.tags;f=zg.__inter0__.description;if(a){ea.next=29;break}return ea.abrupt("return",null);case 29:ea.next=32;break;case 31:k&&(zg.__inter1__=k,a=zg.__inter1__.name,d=zg.__inter1__.tags,f=zg.__inter1__.description);case 32:return F=$world.execCommand("open loading indicator","saving ".concat(a,"...")),ea.next=35,zg.promise.delay(80);case 35:if("json"!==q){ea.next=71;break}L=zg.resource(System.baseURL).join(p).withRelativePartsResolved();
ea.next=39;return L.exists();case 39:if(!ea.sent){ea.next=50;break}F.visible=!1;ea.next=43;return $world.confirm(["File Conflict\n",{},"The file you want to save the world to\n",{fontSize:15,fontWeight:"normal"},L.url,{textStyle:"italic",fontSize:15,fontWeight:"normal"},"\n already exists. Overwrite?",{fontSize:15,fontWeight:"normal"}],{lineWrapping:!1});case 43:if(G=ea.sent){ea.next=47;break}F.remove();return ea.abrupt("return");case 47:F.visible=!0;ea.next=52;break;case 50:return ea.next=52,L.ensureExistance();
case 52:return h.changeMetaData("file",p,!1,!1),ea.next=55,zg.createMorphSnapshot(h);case 55:return oa=ea.sent,ea.next=58,L.writeJson(oa);case 58:return ea.t0=zg,ea.next=61,zg.defaultDirectory(zg.ShellClientResource.defaultL2lClient);case 61:return ea.t1=ea.sent,ea.t2=ea.t1+"/..",ea.t3=p.replace(".json",".br.json"),ea.t4=JSON.stringify(oa),ea.next=67,ea.t0.resource.call(ea.t0,ea.t2).join(ea.t3).withRelativePartsResolved().brotli(ea.t4);case 67:return zg.resource(System.baseURL).join("/subserver/ComponentsBrowser/refresh").join(a).read(),
F.remove(),h.setStatusMessage("saved world ".concat(a," to file: ").concat(L.url)),ea.abrupt("return");case 71:ea.prev=71;ha={previewWidth:200,previewHeight:200,previewType:"png",ignoreMorphs:[F],moduleManager:l.moduleManager};Ha="HEAD";Va=k?k.name:h.name;if(!l.useExpectedCommit){ea.next=96;break}if(Va===a||!l.confirmOverwrite){ea.next=95;break}ea.next=79;return n.exists("world",a);case 79:qc=ea.sent;jc=qc.exists;Ya=qc.commitId;if(!jc){ea.next=92;break}F.center=h.windowBounds().center();F.visible=
!1;ea.next=87;return h.confirm(["The world\n",{fontWeight:"normal"},'"'.concat(a,'"'),{},"\nalready exists, overwrite?",{fontWeight:"normal"}],{hasFixedPosition:!0,width:350});case 87:xa=ea.sent;F.visible=!0;if(xa){ea.next=91;break}return ea.abrupt("return",null);case 91:hc=Ya;case 92:h.name=a;ea.next=96;break;case 95:hc=k?k._id:void 0;case 96:return tc={author:h.getCurrentUser(),message:"world save",tags:d,description:f},ea.next=99,n.snapshotAndCommit("world",a,h,ha,tc,Ha,hc);case 99:return Qb=ea.sent,
window.history&&(wc=zg.pathForBrowserHistory(a),window.history.pushState({},"lively.next",wc)),zg.resource(System.baseURL).join("/subserver/ComponentsBrowser/refresh").join(a).read(),h.setStatusMessage("saved world ".concat(a)),h.get("world-list")&&h.get("world-list").onWorldSaved(a),ea.abrupt("return",Qb);case 107:ea.prev=107;ea.t5=ea["catch"](71);if(!ea.t5.message.includes("but no version entry exists")||l.errorOnMissingExpectedCommit){ea.next=111;break}return ea.abrupt("return",Sw(h,Object.assign({},
l,{morphicdb:n,useExpectedCommit:!1,showSaveDialog:!1})));case 111:Zb=ea.t5.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||[];$c=Nb(Zb,4);Oa=$c[2];md=$c[3];if(!Oa||!md){ea.next=129;break}ea.next=115;return n.log(md,1,!0);case 115:la=ea.sent;$a=Nb(la,1);dd=$a[0];Kd=!0;if(!l.confirmOverwrite){ea.next=125;break}ra=dd.author.name;Aa=dd.timestamp;V="The current version of world ".concat(a," is not the most recent!\n")+"A newer version by ".concat(ra,
" was saved on ")+"".concat(zg.date.format(new Date(Aa),"yyyy-mm-dd HH:MM"),". Overwrite?");ea.next=124;return h.confirm(["Version Conflict\n",null,V,{fontSize:16,fontWeight:"normal"}],{width:600});case 124:Kd=ea.sent;case 125:if(Kd){ea.next=127;break}return ea.abrupt("return",null);case 127:return h.changeMetaData("commit",zg.obj.dissoc(dd,["preview"]),!0,!1),ea.abrupt("return",Sw(h,Object.assign({},l,{morphicdb:n,showSaveDialog:!1})));case 129:console.error(ea.t5),h.logError("Error saving world: "+
ea.t5);case 131:return ea.prev=131,F.remove(),ea.finish(131);case 134:case "end":return ea.stop()}},b,null,[[71,107,131,134]])}));return KF.apply(this,arguments)}function LF(){LF=Bb(regeneratorRuntime.mark(function b(h,l){var c,g,a;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return"string"!==typeof l&&(l=JSON.stringify(l)),d.next=3,Xi.makeRequest(h,"POST",l,{});case 3:return c=d.sent,d.prev=4,d.next=7,c.text();case 7:g=d.sent;d.next=12;break;case 10:d.prev=10,d.t0=
d["catch"](4);case 12:if(g&&"application/json"===c.headers.get("content-type"))try{a=JSON.parse(g)}catch(f){}if(a){d.next=15;break}throw Error("Unexpected response: "+g);case 15:return d.abrupt("return",a);case 16:case "end":return d.stop()}},b,null,[[4,10]])}));return LF.apply(this,arguments)}function WP(e,h){var l=e.row;e=e.column;var b=h.row;h=h.column;return l<b?-2:l===b?e<h?-1:e===h?0:1:2}function lo(e,h){return 0>Tk.comparePosition(e,h)}function wu(e,h){return 0>=Tk.comparePosition(e,h)}function kp(e,
h){return 0===Tk.comparePosition(e,h)}function Tw(e,h){return Tk.lessPosition(e,h)?e:h}function Uw(e,h){return Tk.lessPosition(e,h)?h:e}function XP(e,h){if(!e||!h)return e==h;var l=!0,b={},c;for(c in e)if(b[c]=!0,!h.hasOwnProperty(c)||e[c]!==h[c]){l=!1;break}if(l)for(var g in h)if(!(b[g]||e.hasOwnProperty(g)&&e[g]===h[g])){l=!1;break}return l}function MF(e,h,l,b){var c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"",g="string"!==typeof e,a="string"!==typeof l;if(g||a){var d=[];g?d.push(e,
h):d.push(e+c,h);a?d.push(l,b):d.push(l+c,b);return d}return!h&&!b||h==b?[e+c+l,h]:h&&b?gi.shallowEquals(h,b)?[e+c+l,h]:[e+c,h,l,b]:[e+c,h,l,b]}function NF(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";if(2>=e.length)return e;var l=[],b=Nb(e,2),c=b[0],g=b[1];for(b=2;b<e.length;b+=2)g=gi.concatAttributePair(c,g,e[b],e[b+1],h),2>=g.length?(c=g[0],g=g[1]):(l.push.apply(l,hb(g.slice(0,-2))),c=g.slice(-2),g=Nb(c,2),c=g[0],g=g[1]);l.push(c,g);return l}function OF(e,h){for(var l=0,b=
0;b<e.length;b+=2){var c=e[b],g=l+("string"===typeof c?c.length:1);if(g<h)l=g;else{if(l===h)return[e.slice(0,b),e.slice(b)];if(g===h)return[e.slice(0,b+2),e.slice(b+2)];if("string"!==typeof c)throw Error("Assuming text is a string for splitting it, got ".concat(c," instead!"));var a=e[b+1],d=h-l;g=[].concat(hb(e.slice(0,b)),[c.slice(0,d),a]);e=c.length===d?e.slice(b+2):[c.slice(h-l),a].concat(hb(e.slice(b+2)));return[g,e]}}return[e,[]]}function PF(e,h){var l=e;e=0;for(var b=[],c=0;c<h.length;c++){l=
gi.splitTextAndAttributesAt(l,h[c]-e);var g=Nb(l,2);l=g[0];g=g[1];b.push(l);for(var a=0;a<l.length;a+=2)e+="string"===typeof l[a]?l[a].length:1;l=g}b.push(l);return b}function QF(e,h){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;if(!e.length||2===e.length&&""==e[0])return l?h:h.slice();if(!h.length||2===h.length&&""==h[0])return l?e:e.slice();l=l?e:e.slice();for(var b=0;b<h.length;b+=2)l.push(h[b],h[b+1]);return l}function RF(e,h,l){var b=h.start;h=h.end;if(gi.eqPosition(b,h))return null;
gi.lessPosition(h,b)&&(h=[h,b],b=h[0],h=h[1]);var c=b;b=c.row;var g=c.column;c=h;h=c.row;c=c.column;var a=e.getLine(b),d=a.textAndAttributes,f=0;e=gi.splitTextAndAttributesAt(d,g);g=Nb(e,2);e=g[0];g=g[1];d.length=0;gi.textAndAttributesDo(e,function(p,q){f+="string"===typeof p?p.length:1;d.push(p,q)});if(b===h){var k=gi.splitTextAndAttributesAt(g,c-f);k=Nb(k,2);g=k[0];k=k[1]}gi.textAndAttributesDo(g,function(p,q){return d.push(p,l(a,q))});b===h&&gi.textAndAttributesDo(k,function(p,q){return d.push(p,
q)});a._textAttributes=null;a.textAndAttributes=gi.joinTextAttributes(d);if(b!==h){k=function(p){a=a.nextLine();var q=a.textAndAttributes;p=q.slice();q.length=0;gi.textAndAttributesDo(p,function(r,t){return q.push(r,l(a,t))});a._textAttributes=null;a.textAndAttributes=gi.joinTextAttributes(q)};for(b+=1;b<h;b++)k();a=a.nextLine();var n=a.textAndAttributes;b=gi.splitTextAndAttributesAt(n,c);k=Nb(b,2);b=k[0];k=k[1];n.length=0;gi.textAndAttributesDo(b,function(p,q){return n.push(p,l(a,q))});gi.textAndAttributesDo(k,
function(p,q){return n.push(p,q)});a._textAttributes=null;a.textAndAttributes=gi.joinTextAttributes(n)}}function SF(e,h){var l=e.column;e=e.row;var b=[],c=[];h=ba(gi.splitTextAndAttributesIntoLines(h));var g;try{for(h.s();!(g=h.n()).done;){for(var a=g.value,d=0;d<a.length;d+=2){var f=a[d],k=l+("string"===typeof f?f.length:1);b.push({start:{row:e,column:l},end:{row:e,column:k}});c.push(a[d],a[d+1]);l=k}l=0;e++}}catch(n){h.e(n)}finally{h.f()}return{ranges:b,textAndAttributes:c}}function Vw(e){var h=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:"\n";if(!e.length)return[];for(var l=[],b=[],c=0;c<e.length;c+=2){var g=e[c],a=e[c+1];if("string"!==typeof g)b.push(g,a);else for(;g.length;){var d=g.indexOf(h);if(-1===d){b.push(g,a);break}0<d&&b.push(g.slice(0,d),a);l.push(b);g=g.slice(d+1);b=[]}}b.length?l.push(b):(b=e.slice(-2),c=Nb(b,2),b=c[0],c=c[1],"string"===typeof b&&b.endsWith(h)&&l.push(["",c]));return l}function TF(){TF=Bb(regeneratorRuntime.mark(function l(h){var b;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=
c.next){case 0:return Rf.cssInstalled=!0,c.next=3,Rf.waitFor(2E4,function(){return h.renderer&&h.renderer.domNode});case 3:b=c.sent,Rf.addOrChangeCSSDeclaration("new-text-css","\n\n    /* markers */\n\n    .newtext-marker-layer {\n      position: absolute;\n    }\n\n    /* selection / cursor */\n\n    .newtext-cursor {\n      z-index: 5;\n      pointer-events: none;\n      position: absolute;\n      background-color: black;\n    }\n\n    .hidden-cursor .newtext-cursor {\n      background-color: transparent !important;\n    }\n\n    .newtext-cursor.diminished {\n      background-color: gray;\n    }\n\n    .newtext-selection-layer {\n      position: absolute;\n    }\n\n    /*-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* text layer / content */\n\n    .newtext-text-layer {\n      box-sizing: border-box;\n      position: absolute;\n      white-space: pre;\n      z-index: 0;\n      min-width: 100%;\n      pointer-events: none;\n    }\n\n    .newtext-before-filler {}\n\n    .newtext-text-layer.wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-word;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.only-wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.wrap-by-chars {\n      white-space: pre-wrap;\n      word-break: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.no-wrapping {\n    }\n\n    .newtext-text-layer a {\n       pointer-events: auto;\n    }\n\n    .newtext-text-layer.auto-width .line {\n      width: fit-content;\n    }\n\n    .newtext-text-layer .line {\n      -moz-border-radius: 0;\n      -webkit-border-radius: 0;\n      border-radius: 0;\n      border-width: 0;\n      background: transparent;\n      font-family: inherit;\n      font-size: inherit;\n      margin: 0;\n      word-wrap: normal;\n      line-height: inherit;\n      color: inherit;\n      position: relative;\n      overflow: visible;\n      -webkit-tap-highlight-color: transparent;\n      -webkit-font-variant-ligatures: contextual;\n      font-variant-ligatures: contextual;\n    }\n\n    .line > .Morph {\n      display: inline-block !important;\n      vertical-align: top !important;\n    }\n\n    blockquote {\n      margin: 0;\n      -webkit-margin-start: 0;\n      -webkit-margin-end: 0;\n    }\n\n    .newtext-text-layer blockquote {\n      margin-left: 2em;\n      margin-right: 2em;\n      border-left: 2px lightgray solid;\n      padding-left: 2%;\n    }\n\n    /* -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* debug styling */\n\n    .debug-info {\n      position: absolute;\n      outline: 1px solid green;\n      pointer-events: none;\n      z-index: 4;\n      text-align: center;\n      font-family: monospace;\n      color: green;\n      background-color: white;\n      font-size: small;\n      vertical-align: baseline;\n    }\n\n    .debug-line {\n      position: absolute;\n      outline: 1px solid red;\n      pointer-events: none;\n      z-index: 4,\n      text-align: right;\n      font-family: monospace;\n      font-size: small;\n      vertical-align: baseline;\n      color: red;\n    }\n\n    .debug-char {\n      position: absolute;\n      outline: 1px solid orange;\n      pointer-events: none;\n      z-index: 3\n    }\n\n  ",
b.getRootNode());case 5:case "end":return c.stop()}},l)}));return TF.apply(this,arguments)}function UF(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e.textAndAttributesInRange(e.selection.range),l=new e.constructor(Object.assign({},e.defaultTextStyle,{width:e.width,textAndAttributes:h})),b=l.textRenderer.directRenderTextLayerFn(l);h=l.textRenderer.directRenderLineFn(l);b=b();var c=System.global&&System.global.getComputedStyle?System.global.getComputedStyle(b):null;c&&(b.ownerDocument.body.appendChild(b),
b.style.whiteSpace=c.whiteSpace,b.style.overflowWrap=c.overflowWrap,b.style.wordBreak=c.wordBreak,b.style.minWidth=c.minWidth,b.parentNode.removeChild(b));l=ba(l.document.lines);var g;try{for(l.s();!(g=l.n()).done;)b.appendChild(h(g.value))}catch(a){l.e(a)}finally{l.f()}return b.outerHTML}function lp(e){return e?e.replace(/^\s+|\s+$/g,""):""}function VF(e,h){var l=e&&"string"===typeof e.type,b=l?e:h,c;for(c in e){var g=e[c];Array.isArray(g)?g.forEach(function(a){VF(a,b)}):g&&"object"===typeof g&&
VF(g,b)}l&&Object.defineProperty(e,"parent",{configurable:!0,writable:!0,enumerable:!1,value:h||null});return e}function hA(e){(this||$_).options=e||{}}function jk(e){e=e||{};YP.call(this||iq,e);(this||iq).indentation=e.indent}function Ww(e){return(e=e.match(ZP))?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}function xu(e){var h="";e.scheme&&(h+=e.scheme+":");h+="//";e.auth&&(h+=e.auth+"@");e.host&&(h+=e.host);e.port&&(h+=":"+e.port);e.path&&(h+=e.path);return h}function WF(e){var h=
e,l=Ww(e);if(l){if(!l.path)return e;h=l.path}e=Ii.isAbsolute(h);h=h.split(/\/+/);for(var b,c=0,g=h.length-1;0<=g;g--)b=h[g],"."===b?h.splice(g,1):".."===b?c++:0<c&&(""===b?(h.splice(g+1,c),c=0):(h.splice(g,2),c--));h=h.join("/");""===h&&(h=e?"/":".");return l?(l.path=h,xu(l)):h}function $P(e,h){""===e&&(e=".");""===h&&(h=".");var l=Ww(h),b=Ww(e);b&&(e=b.path||"/");if(l&&!l.scheme)return b&&(l.scheme=b.scheme),xu(l);if(l||h.match(a0))return h;if(b&&!b.host&&!b.path)return b.host=h,xu(b);e="/"===h.charAt(0)?
h:WF(e.replace(/\/+$/,"")+"/"+h);return b?(b.path=e,xu(b)):e}function aQ(e){return e}function b0(e){return bQ(e)?"$"+e:e}function c0(e){return bQ(e)?e.slice(1):e}function bQ(e){if(!e)return!1;var h=e.length;if(9>h||95!==e.charCodeAt(h-1)||95!==e.charCodeAt(h-2)||111!==e.charCodeAt(h-3)||116!==e.charCodeAt(h-4)||111!==e.charCodeAt(h-5)||114!==e.charCodeAt(h-6)||112!==e.charCodeAt(h-7)||95!==e.charCodeAt(h-8)||95!==e.charCodeAt(h-9))return!1;for(h-=10;0<=h;h--)if(36!==e.charCodeAt(h))return!1;return!0}
function yu(e,h){return e===h?0:null===e?1:null===h?-1:e>h?1:-1}function mo(){(this||Uk)._array=[];(this||Uk)._set=gs?new Map:Object.create(null)}function iA(){(this||Gm)._array=[];(this||Gm)._sorted=!0;(this||Gm)._last={generatedLine:-1,generatedColumn:0}}function Hm(e){e||(e={});(this||Ph)._file=kk.getArg(e,"file",null);(this||Ph)._sourceRoot=kk.getArg(e,"sourceRoot",null);(this||Ph)._skipValidation=kk.getArg(e,"skipValidation",!1);(this||Ph)._sources=new jA;(this||Ph)._names=new jA;(this||Ph)._mappings=
new d0;(this||Ph)._sourcesContents=null}function XF(e,h,l,b,c,g){var a=Math.floor((h-e)/2)+e,d=c(l,b[a],!0);return 0===d?a:0<d?1<h-a?XF(a,h,l,b,c,g):g==kA.LEAST_UPPER_BOUND?h<b.length?h:-1:a:1<a-e?XF(e,a,l,b,c,g):g==kA.LEAST_UPPER_BOUND?a:0>e?-1:e}function YF(e,h,l){var b=e[h];e[h]=e[l];e[l]=b}function ZF(e,h,l,b){if(l<b){var c=l-1;YF(e,Math.round(l+Math.random()*(b-l)),b);for(var g=e[b],a=l;a<b;a++)0>=h(e[a],g)&&(c+=1,YF(e,c,a));YF(e,c+1,a);c+=1;ZF(e,h,l,c-1);ZF(e,h,c+1,b)}}function wj(e,h){var l=
e;"string"===typeof e&&(l=Vg.parseSourceMapInput(e));return null!=l.sections?new no(l,h):new kl(l,h)}function kl(e,h){var l=e;"string"===typeof e&&(l=Vg.parseSourceMapInput(e));e=Vg.getArg(l,"version");var b=Vg.getArg(l,"sources"),c=Vg.getArg(l,"names",[]),g=Vg.getArg(l,"sourceRoot",null),a=Vg.getArg(l,"sourcesContent",null),d=Vg.getArg(l,"mappings");l=Vg.getArg(l,"file",null);if(e!=(this||Of)._version)throw Error("Unsupported version: "+e);g&&(g=Vg.normalize(g));b=b.map(String).map(Vg.normalize).map(function(f){return g&&
Vg.isAbsolute(g)&&Vg.isAbsolute(f)?Vg.relative(g,f):f});(this||Of)._names=zu.fromArray(c.map(String),!0);(this||Of)._sources=zu.fromArray(b,!0);(this||Of)._absoluteSources=(this||Of)._sources.toArray().map(function(f){return Vg.computeSourceURL(g,f,h)});(this||Of).sourceRoot=g;(this||Of).sourcesContent=a;(this||Of)._mappings=d;(this||Of)._sourceMapURL=h;(this||Of).file=l}function cQ(){(this||Of).generatedLine=0;(this||Of).generatedColumn=0;(this||Of).source=null;(this||Of).originalLine=null;(this||
Of).originalColumn=null;(this||Of).name=null}function no(e,h){var l=e;"string"===typeof e&&(l=Vg.parseSourceMapInput(e));e=Vg.getArg(l,"version");l=Vg.getArg(l,"sections");if(e!=(this||Of)._version)throw Error("Unsupported version: "+e);(this||Of)._sources=new zu;(this||Of)._names=new zu;var b={line:-1,column:0};(this||Of)._sections=l.map(function(c){if(c.url)throw Error("Support for url field in sections not implemented.");var g=Vg.getArg(c,"offset"),a=Vg.getArg(g,"line"),d=Vg.getArg(g,"column");
if(a<b.line||a===b.line&&d<b.column)throw Error("Section offsets must be ordered and non-overlapping.");b=g;return{generatedOffset:{generatedLine:a+1,generatedColumn:d+1},consumer:new wj(Vg.getArg(c,"map"),h)}})}function hs(e){throw new RangeError(e0[e]);}function dQ(e,h){var l=e.split("@"),b="";1<l.length&&(b=l[0]+"@",e=l[1]);e=e.replace(f0,".").split(".");l=[];for(var c=e.length;c--;)l[c]=h(e[c]);h=l.join(".");return b+h}function eQ(e){for(var h=[],l=0,b=e.length;l<b;){var c=e.charCodeAt(l++);if(55296<=
c&&56319>=c&&l<b){var g=e.charCodeAt(l++);56320==(64512&g)?h.push(((1023&c)<<10)+(1023&g)+65536):(h.push(c),l--)}else h.push(c)}return h}function Im(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function Xw(e,h,l){if(e&&oo.isObject(e)&&e instanceof Im)return e;var b=new Im;return b.parse(e,h,l),b}function fQ(e){if("string"===typeof e)e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");
if("file:"!==e.protocol)throw new Deno.errors.InvalidData("invalid url scheme");if($F){var h=e.hostname;e=e.pathname;for(var l=0;l<e.length;l++)if("%"===e[l]){const b=e.codePointAt(l+2)||32;if("2"===e[l+1]&&102===b||"5"===e[l+1]&&99===b)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters");}e=e.replace(g0,"\\");e=decodeURIComponent(e);if(""!==h)e=`\\\\${h}${e}`;else{h=e.codePointAt(1)|32;l=e[2];if(97>h||122<h||":"!==l)throw new Deno.errors.InvalidData("file url path must be absolute");
e=e.slice(1)}}else{if(""!==e.hostname)throw new Deno.errors.InvalidData("invalid file url hostname");e=e.pathname;for(h=0;h<e.length;h++)if("%"===e[h]&&(l=e.codePointAt(h+2)||32,"2"===e[h+1]&&102===l))throw new Deno.errors.InvalidData("must not include encoded / characters");e=decodeURIComponent(e)}return e}function aG(e,h){try{return decodeURIComponent(e.join(""))}catch(b){}if(1===e.length)return e;h=h||1;var l=e.slice(0,h);e=e.slice(h);return Array.prototype.concat.call([],aG(l),aG(e))}function bG(){return Array.prototype.reduce.call(arguments,
function(e,h){return h0.resolve(e,h)})}function gQ(e){return"\\"===i0.sep?e.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):e}function Yw(e){return j0(e.replace(/\+/g,"%2B"))}function lA(e,h,l){k0.nextTick(function(){e(h,l)})}function Au(e,h){try{return JSON.parse(e.replace(/^\)\]\}'/,""))}catch(l){throw l.sourceMapData=h,l;}}function hQ(e,h,l){h=Yw(h);try{return String(e(h))}catch(b){throw b.sourceMapData=l,b;}}function iQ(e,h,l,b){try{var c=jQ(e,h)}catch(g){return lA(b,g)}if(!c||c.map)return lA(b,
null,c);e=Yw(c.url);l(e,function(g,a){if(g)return g.sourceMapData=c,b(g);c.map=String(a);try{c.map=Au(c.map,c)}catch(d){return b(d)}b(null,c)})}function kQ(e,h,l){e=jQ(e,h);if(!e||e.map)return e;e.map=hQ(l,e.url,e);e.map=Au(e.map,e);return e}function jQ(e,h){h=gQ(h);e=(e=e.match(l0))?e[1]||e[2]||"":null;if(!e)return null;var l=e.match(m0);if(l){var b=l[1]||"text/plain",c=l[2]||"";l=l[3]||"";h={sourceMappingURL:e,url:null,sourcesRelativeTo:h,map:l};if(!n0.test(b)){var g=Error("Unuseful data uri mime type: "+
b);g.sourceMapData=h;throw g;}try{if(";base64"===c)if("undefined"===typeof TextDecoder||"undefined"===typeof Uint8Array)g=lQ(l);else{var a=lQ(l),d=a.length,f=new Uint8Array(d);for(e=0;e<d;e++)f[e]=a.charCodeAt(e);g=(new TextDecoder(o0,{fatal:!0})).decode(f)}else g=decodeURIComponent(l);h.map=Au(g,h)}catch(k){throw k.sourceMapData=h,k;}return h}g=bG(h,e);return{sourceMappingURL:e,url:g,sourcesRelativeTo:g,map:null}}function mQ(e,h,l,b,c){"function"===typeof b&&(c=b,b={});var g=e.sources?e.sources.length:
0,a={sourcesResolved:[],sourcesContent:[]};if(0===g)lA(c,null,a);else{var d=function(){g--;0===g&&c(null,a)};nQ(e,h,b,function(f,k,n){a.sourcesResolved[n]=f;"string"===typeof k?(a.sourcesContent[n]=k,lA(d,null)):(f=Yw(f),l(f,function(p,q){a.sourcesContent[n]=p?p:String(q);d()}))})}}function oQ(e,h,l,b){var c={sourcesResolved:[],sourcesContent:[]};if(!e.sources||0===e.sources.length)return c;nQ(e,h,b,function(g,a,d){c.sourcesResolved[d]=g;if(null!==l)if("string"===typeof a)c.sourcesContent[d]=a;else{g=
Yw(g);try{c.sourcesContent[d]=String(l(g))}catch(f){c.sourcesContent[d]=f}}});return c}function nQ(e,h,l,b){l=l||{};h=gQ(h);for(var c,g,a=0,d=e.sources.length;a<d;a++)c=null,"string"===typeof l.sourceRoot?c=l.sourceRoot:"string"===typeof e.sourceRoot&&!1!==l.sourceRoot&&(c=e.sourceRoot),c=null===c||""===c?bG(h,e.sources[a]):bG(h,c.replace(p0,"/"),e.sources[a]),g=(e.sourcesContent||[])[a],b(c,g,a)}function Zw(){if(pQ)return mA;pQ=!0;Object.defineProperty(mA,"__esModule",{value:!0});mA.constants={O_RDONLY:0,
O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,
UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4};return mA}function q0(){if(qQ)return cG;qQ=!0;cG.default="function"===typeof BigInt?BigInt:function(){throw Error("BigInt is not supported in this environment.");};return cG}function dG(){if(rQ)return Bu;rQ=!0;Object.defineProperty(Bu,"__esModule",{value:!0});Bu.Stats=void 0;var e=Zw(),h=q0(),l=e.constants.S_IFMT,b=e.constants.S_IFDIR,c=e.constants.S_IFREG,g=e.constants.S_IFBLK,a=e.constants.S_IFCHR,
d=e.constants.S_IFLNK,f=e.constants.S_IFIFO,k=e.constants.S_IFSOCK;e=function(){function n(){}n.build=function(p,q){void 0===q&&(q=!1);var r=new n,t=p.gid,w=p.atime,x=p.mtime,B=p.ctime;q=q?h.default:function(D){return D};r.uid=q(p.uid);r.gid=q(t);r.rdev=q(0);r.blksize=q(4096);r.ino=q(p.ino);r.size=q(p.getSize());r.blocks=q(1);r.atime=w;r.mtime=x;r.ctime=B;r.birthtime=B;r.atimeMs=q(w.getTime());r.mtimeMs=q(x.getTime());t=q(B.getTime());r.ctimeMs=t;r.birthtimeMs=t;r.dev=q(0);r.mode=q(p.mode);r.nlink=
q(p.nlink);return r};n.prototype._checkModeProperty=function(p){return(Number(this.mode)&l)===p};n.prototype.isDirectory=function(){return this._checkModeProperty(b)};n.prototype.isFile=function(){return this._checkModeProperty(c)};n.prototype.isBlockDevice=function(){return this._checkModeProperty(g)};n.prototype.isCharacterDevice=function(){return this._checkModeProperty(a)};n.prototype.isSymbolicLink=function(){return this._checkModeProperty(d)};n.prototype.isFIFO=function(){return this._checkModeProperty(f)};
n.prototype.isSocket=function(){return this._checkModeProperty(k)};return n}();Bu.Stats=e;Bu.default=e;return Bu}function eG(){function e(b){for(var c=[],g=1;g<arguments.length;g++)c[g-1]=arguments[g];return new (l.Buffer.bind.apply(l.Buffer,h([void 0,b],c,!1)))}if(sQ)return sn;sQ=!0;var h=sn&&sn.__spreadArray||function(b,c,g){if(g||2===arguments.length)for(var a=0,d=c.length,f;a<d;a++)!f&&a in c||(f||(f=Array.prototype.slice.call(c,0,a)),f[a]=c[a]);return b.concat(f||Array.prototype.slice.call(c))};
Object.defineProperty(sn,"__esModule",{value:!0});sn.bufferFrom=sn.bufferAllocUnsafe=sn.Buffer=void 0;var l=as;Object.defineProperty(sn,"Buffer",{enumerable:!0,get:function(){return l.Buffer}});sn.bufferAllocUnsafe=l.Buffer.allocUnsafe||e;sn.bufferFrom=l.Buffer.from||e;return sn}function tQ(){function e(p){return function(q){function r(t){for(var w=[],x=1;x<arguments.length;x++)w[x-1]=arguments[x];w=q.call(this,h(t,w))||this;w.code=t;w[d]=t;w.name=q.prototype.name+" ["+w[d]+"]";return w}c(r,q);return r}(p)}
function h(p,q){g.strictEqual(typeof p,"string");var r=f[p];g(r,"An invalid error message key was used: "+p+".");if("function"===typeof r)p=r;else{p=a.format;if(void 0===q||0===q.length)return r;q.unshift(r)}return String(p.apply(null,q))}function l(p,q){f[p]="function"===typeof q?q:String(q)}function b(p,q){g(p,"expected is required");g("string"===typeof q,"thing is required");if(Array.isArray(p)){var r=p.length;g(0<r,"At least one expected value needs to be specified");p=p.map(function(t){return String(t)});
return 2<r?"one of "+q+" "+p.slice(0,r-1).join(", ")+", or "+p[r-1]:2===r?"one of "+q+" "+p[0]+" or "+p[1]:"of "+q+" "+p[0]}return"of "+q+" "+String(p)}if(uQ)return xk;uQ=!0;var c=xk&&xk.__extends||function(){var p=function(q,r){p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,w){t.__proto__=w}||function(t,w){for(var x in w)Object.prototype.hasOwnProperty.call(w,x)&&(t[x]=w[x])};return p(q,r)};return function(q,r){function t(){this.constructor=q}if("function"!==typeof r&&null!==
r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");p(q,r);q.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}}();Object.defineProperty(xk,"__esModule",{value:!0});xk.E=xk.AssertionError=xk.message=xk.RangeError=xk.TypeError=xk.Error=void 0;var g=kh,a=tf,d="undefined"===typeof Symbol?"_kCode":Symbol("code"),f={},k="undefined"!==typeof globalThis?globalThis:r0,n=function(p){function q(r){if("object"!==typeof r||null===r)throw new xk.TypeError("ERR_INVALID_ARG_TYPE",
"options","object");var t=r.message?p.call(this,r.message)||this:p.call(this,a.inspect(r.actual).slice(0,128)+" "+(r.operator+" "+a.inspect(r.expected).slice(0,128)))||this;t.generatedMessage=!r.message;t.name="AssertionError [ERR_ASSERTION]";t.code="ERR_ASSERTION";t.actual=r.actual;t.expected=r.expected;t.operator=r.operator;xk.Error.captureStackTrace(t,r.stackStartFunction);return t}c(q,p);return q}(k.Error);xk.AssertionError=n;xk.message=h;xk.E=l;xk.Error=e(k.Error);xk.TypeError=e(k.TypeError);
xk.RangeError=e(k.RangeError);l("ERR_ARG_NOT_ITERABLE","%s must be iterable");l("ERR_ASSERTION","%s");l("ERR_BUFFER_OUT_OF_BOUNDS",function(p,q){return q?"Attempt to write outside buffer bounds":'"'+p+'" is outside of buffer bounds'});l("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received");l("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s");l("ERR_CPU_USAGE","Unable to obtain cpu usage %s");l("ERR_DNS_SET_SERVERS_FAILED",function(p,q){return'c-ares failed to set servers: "'+
p+'" ['+q+"]"});l("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value");l("ERR_ENCODING_NOT_SUPPORTED",function(p){return'The "'+p+'" encoding is not supported'});l("ERR_ENCODING_INVALID_ENCODED_DATA",function(p){return"The encoded data was not valid for encoding "+p});l("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client");l("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s");l("ERR_HTTP_TRAILER_INVALID","Trailers are invalid with this transfer encoding");
l("ERR_INDEX_OUT_OF_RANGE","Index out of range");l("ERR_INVALID_ARG_TYPE",function(p,q,r){g(p,"name is required");if(q.includes("not ")){var t="must not be";q=q.split("not ")[1]}else t="must be";if(Array.isArray(p))t="The "+p.map(function(x){return'"'+x+'"'}).join(", ")+" arguments "+t+" "+b(q,"type");else if(p.includes(" argument"))t="The "+p+" "+t+" "+b(q,"type");else{var w=p.includes(".")?"property":"argument";t='The "'+p+'" '+w+" "+t+" "+b(q,"type")}3<=arguments.length&&(t+=". Received type "+
(null!==r?typeof r:"null"));return t});l("ERR_INVALID_ARRAY_LENGTH",function(p,q,r){g.strictEqual(typeof r,"number");return'The array "'+p+'" (length '+r+") must be of length "+q+"."});l("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s");l("ERR_INVALID_CALLBACK","Callback must be a function");l("ERR_INVALID_CHAR","Invalid character in %s");l("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column");l("ERR_INVALID_FD",'"fd" must be a positive integer: %s');l("ERR_INVALID_FILE_URL_HOST",
'File URL host must be "localhost" or empty on %s');l("ERR_INVALID_FILE_URL_PATH","File URL path %s");l("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent");l("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s");l("ERR_INVALID_OPT_VALUE",function(p,q){return'The value "'+String(q)+'" is invalid for option "'+p+'"'});l("ERR_INVALID_OPT_VALUE_ENCODING",function(p){return'The value "'+String(p)+'" is invalid for option "encoding"'});l("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL');
l("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s");l("ERR_INVALID_THIS",'Value of "this" must be of type %s');l("ERR_INVALID_TUPLE","%s must be an iterable %s tuple");l("ERR_INVALID_URL","Invalid URL: %s");l("ERR_INVALID_URL_SCHEME",function(p){return"The URL must be "+b(p,"scheme")});l("ERR_IPC_CHANNEL_CLOSED","Channel closed");l("ERR_IPC_DISCONNECTED","IPC channel is already disconnected");l("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe");
l("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks");l("ERR_MISSING_ARGS",function(){for(var p=[],q=0;q<arguments.length;q++)p[q]=arguments[q];g(0<p.length,"At least one arg needs to be specified");q="The ";var r=p.length;p=p.map(function(t){return'"'+t+'"'});switch(r){case 1:q+=p[0]+" argument";break;case 2:q+=p[0]+" and "+p[1]+" arguments";break;default:q+=p.slice(0,r-1).join(", "),q+=", and "+p[r-1]+" arguments"}return q+" must be specified"});l("ERR_MULTIPLE_CALLBACK","Callback called multiple times");
l("ERR_NAPI_CONS_FUNCTION","Constructor must be a function");l("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object");l("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support");l("ERR_NO_LONGER_SUPPORTED","%s is no longer supported");l("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s");l("ERR_SOCKET_ALREADY_BOUND","Socket is already bound");l("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536");l("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6");
l("ERR_SOCKET_CANNOT_SEND","Unable to send data");l("ERR_SOCKET_CLOSED","Socket is closed");l("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running");l("ERR_STDERR_CLOSE","process.stderr cannot be closed");l("ERR_STDOUT_CLOSE","process.stdout cannot be closed");l("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode");l("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s");l("ERR_TLS_DH_PARAM_SIZE",function(p){return"DH parameter size "+p+" is less than 2048"});
l("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout");l("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate");l("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext');l("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected");l("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming");l("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0");l("ERR_UNKNOWN_ENCODING","Unknown encoding: %s");
l("ERR_UNKNOWN_SIGNAL","Unknown signal: %s");l("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type");l("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type");l("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl");return xk}function vQ(){if(wQ)return po;wQ=!0;Object.defineProperty(po,"__esModule",{value:!0});po.strToEncoding=po.assertEncoding=po.ENCODING_UTF8=void 0;var e=eG(),h=tQ();po.ENCODING_UTF8="utf8";po.assertEncoding=function(l){if(l&&!e.Buffer.isEncoding(l))throw new h.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",
l);};po.strToEncoding=function(l,b){return b&&b!==po.ENCODING_UTF8?"buffer"===b?new e.Buffer(l):(new e.Buffer(l)).toString(b):l};return po}function xQ(){if(yQ)return Cu;yQ=!0;Object.defineProperty(Cu,"__esModule",{value:!0});Cu.Dirent=void 0;var e=Zw(),h=vQ(),l=e.constants.S_IFMT,b=e.constants.S_IFDIR,c=e.constants.S_IFREG,g=e.constants.S_IFBLK,a=e.constants.S_IFCHR,d=e.constants.S_IFLNK,f=e.constants.S_IFIFO,k=e.constants.S_IFSOCK;e=function(){function n(){this.name="";this.mode=0}n.build=function(p,
q){var r=new n,t=p.getNode().mode;r.name=(0,h.strToEncoding)(p.getName(),q);r.mode=t;return r};n.prototype._checkModeProperty=function(p){return(this.mode&l)===p};n.prototype.isDirectory=function(){return this._checkModeProperty(b)};n.prototype.isFile=function(){return this._checkModeProperty(c)};n.prototype.isBlockDevice=function(){return this._checkModeProperty(g)};n.prototype.isCharacterDevice=function(){return this._checkModeProperty(a)};n.prototype.isSymbolicLink=function(){return this._checkModeProperty(d)};
n.prototype.isFIFO=function(){return this._checkModeProperty(f)};n.prototype.isSocket=function(){return this._checkModeProperty(k)};return n}();Cu.Dirent=e;Cu.default=e;return Cu}function zQ(){if(AQ)return nA;AQ=!0;var e=Hi;Object.defineProperty(nA,"__esModule",{value:!0});e="function"===typeof e.nextTick?e.nextTick.bind("undefined"!==typeof globalThis?globalThis:BQ):setTimeout.bind("undefined"!==typeof globalThis?globalThis:BQ);nA.default=e;return nA}function CQ(){function e(){var l="undefined"!==
typeof h?h:Hi;l=l||{};l.getuid||(l.getuid=function(){return 0});l.getgid||(l.getgid=function(){return 0});l.cwd||(l.cwd=function(){return"/"});l.nextTick||(l.nextTick=zQ().default);l.emitWarning||(l.emitWarning=function(b,c){console.warn(""+c+(c?": ":"")+b)});l.env||(l.env={});return l}if(DQ)return Du;DQ=!0;var h=Hi;Object.defineProperty(Du,"__esModule",{value:!0});Du.createProcess=void 0;Du.createProcess=e;Du.default=e();return Du}function s0(){if(EQ)return Ml;EQ=!0;var e=Ml&&Ml.__extends||function(){var p=
function(q,r){p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,w){t.__proto__=w}||function(t,w){for(var x in w)Object.prototype.hasOwnProperty.call(w,x)&&(t[x]=w[x])};return p(q,r)};return function(q,r){function t(){this.constructor=q}if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");p(q,r);q.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}}();Object.defineProperty(Ml,"__esModule",{value:!0});
Ml.File=Ml.Link=Ml.Node=Ml.SEP=void 0;var h=CQ(),l=eG(),b=Zw(),c=Rj,g=dG(),a=b.constants.S_IFMT,d=b.constants.S_IFDIR,f=b.constants.S_IFREG,k=b.constants.S_IFLNK,n=b.constants.O_APPEND;Ml.SEP="/";b=function(p){function q(r,t){void 0===t&&(t=438);var w=p.call(this)||this;w.uid=h.default.getuid();w.gid=h.default.getgid();w.atime=new Date;w.mtime=new Date;w.ctime=new Date;w.perm=438;w.mode=f;w.nlink=1;w.perm=t;w.mode|=t;w.ino=r;return w}e(q,p);q.prototype.getString=function(r){void 0===r&&(r="utf8");
return this.getBuffer().toString(r)};q.prototype.setString=function(r){this.buf=(0,l.bufferFrom)(r,"utf8");this.touch()};q.prototype.getBuffer=function(){this.buf||this.setBuffer((0,l.bufferAllocUnsafe)(0));return(0,l.bufferFrom)(this.buf)};q.prototype.setBuffer=function(r){this.buf=(0,l.bufferFrom)(r);this.touch()};q.prototype.getSize=function(){return this.buf?this.buf.length:0};q.prototype.setModeProperty=function(r){this.mode=this.mode&~a|r};q.prototype.setIsFile=function(){this.setModeProperty(f)};
q.prototype.setIsDirectory=function(){this.setModeProperty(d)};q.prototype.setIsSymlink=function(){this.setModeProperty(k)};q.prototype.isFile=function(){return(this.mode&a)===f};q.prototype.isDirectory=function(){return(this.mode&a)===d};q.prototype.isSymlink=function(){return(this.mode&a)===k};q.prototype.makeSymlink=function(r){this.symlink=r;this.setIsSymlink()};q.prototype.write=function(r,t,w,x){void 0===t&&(t=0);void 0===w&&(w=r.length);void 0===x&&(x=0);this.buf||(this.buf=(0,l.bufferAllocUnsafe)(0));
if(x+w>this.buf.length){var B=(0,l.bufferAllocUnsafe)(x+w);this.buf.copy(B,0,0,this.buf.length);this.buf=B}r.copy(this.buf,x,t,t+w);this.touch();return w};q.prototype.read=function(r,t,w,x){void 0===t&&(t=0);void 0===w&&(w=r.byteLength);void 0===x&&(x=0);this.buf||(this.buf=(0,l.bufferAllocUnsafe)(0));w>r.byteLength&&(w=r.byteLength);w+x>this.buf.length&&(w=this.buf.length-x);this.buf.copy(r,t,x,x+w);return w};q.prototype.truncate=function(r){void 0===r&&(r=0);if(r)if(this.buf||(this.buf=(0,l.bufferAllocUnsafe)(0)),
r<=this.buf.length)this.buf=this.buf.slice(0,r);else{var t=(0,l.bufferAllocUnsafe)(0);this.buf.copy(t);t.fill(0,r)}else this.buf=(0,l.bufferAllocUnsafe)(0);this.touch()};q.prototype.chmod=function(r){this.perm=r;this.mode=this.mode&-512|r;this.touch()};q.prototype.chown=function(r,t){this.uid=r;this.gid=t;this.touch()};q.prototype.touch=function(){this.mtime=new Date;this.emit("change",this)};q.prototype.canRead=function(r,t){void 0===r&&(r=h.default.getuid());void 0===t&&(t=h.default.getgid());return this.perm&
4||t===this.gid&&this.perm&32||r===this.uid&&this.perm&256?!0:!1};q.prototype.canWrite=function(r,t){void 0===r&&(r=h.default.getuid());void 0===t&&(t=h.default.getgid());return this.perm&2||t===this.gid&&this.perm&16||r===this.uid&&this.perm&128?!0:!1};q.prototype.del=function(){this.emit("delete",this)};q.prototype.toJSON=function(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,
symlink:this.symlink,data:this.getString()}};return q}(c.EventEmitter);Ml.Node=b;c=function(p){function q(r,t,w){var x=p.call(this)||this;x.children={};x.steps=[];x.ino=0;x.length=0;x.vol=r;x.parent=t;x.steps=t?t.steps.concat([w]):[w];return x}e(q,p);q.prototype.setNode=function(r){this.node=r;this.ino=r.ino};q.prototype.getNode=function(){return this.node};q.prototype.createChild=function(r,t){void 0===t&&(t=this.vol.createNode());var w=new q(this.vol,this,r);w.setNode(t);t.isDirectory();this.setChild(r,
w);return w};q.prototype.setChild=function(r,t){void 0===t&&(t=new q(this.vol,this,r));this.children[r]=t;t.parent=this;this.length++;this.emit("child:add",t,this);return t};q.prototype.deleteChild=function(r){delete this.children[r.getName()];this.length--;this.emit("child:delete",r,this)};q.prototype.getChild=function(r){if(Object.hasOwnProperty.call(this.children,r))return this.children[r]};q.prototype.getPath=function(){return this.steps.join(Ml.SEP)};q.prototype.getName=function(){return this.steps[this.steps.length-
1]};q.prototype.walk=function(r,t,w){void 0===t&&(t=r.length);void 0===w&&(w=0);if(w>=r.length||w>=t)return this;var x=this.getChild(r[w]);return x?x.walk(r,t,w+1):null};q.prototype.toJSON=function(){return{steps:this.steps,ino:this.ino,children:Object.keys(this.children)}};return q}(c.EventEmitter);Ml.Link=c;c=function(){function p(q,r,t,w){this.position=0;this.link=q;this.node=r;this.flags=t;this.fd=w}p.prototype.getString=function(q){return this.node.getString()};p.prototype.setString=function(q){this.node.setString(q)};
p.prototype.getBuffer=function(){return this.node.getBuffer()};p.prototype.setBuffer=function(q){this.node.setBuffer(q)};p.prototype.getSize=function(){return this.node.getSize()};p.prototype.truncate=function(q){this.node.truncate(q)};p.prototype.seekTo=function(q){this.position=q};p.prototype.stats=function(){return g.default.build(this.node)};p.prototype.write=function(q,r,t,w){void 0===r&&(r=0);void 0===t&&(t=q.length);"number"!==typeof w&&(w=this.position);this.flags&n&&(w=this.getSize());q=
this.node.write(q,r,t,w);this.position=w+q;return q};p.prototype.read=function(q,r,t,w){void 0===r&&(r=0);void 0===t&&(t=q.byteLength);"number"!==typeof w&&(w=this.position);q=this.node.read(q,r,t,w);this.position=w+q;return q};p.prototype.chmod=function(q){this.node.chmod(q)};p.prototype.chown=function(q,r){this.node.chown(q,r)};return p}();Ml.File=c;return Ml}function t0(){if(FQ)return oA;FQ=!0;Object.defineProperty(oA,"__esModule",{value:!0});oA.default=function(e,h,l){var b=setTimeout.apply("undefined"!==
typeof globalThis?globalThis:u0,arguments);b&&"object"===typeof b&&"function"===typeof b.unref&&b.unref();return b};return oA}function v0(){function e(b,c,g){void 0===g&&(g=function(a){return a});return function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];return new Promise(function(f,k){b[c].bind(b).apply(void 0,h(h([],a,!1),[function(n,p){return n?k(n):f(g(p))}],!1))})}}if(GQ)return jq;GQ=!0;var h=jq&&jq.__spreadArray||function(b,c,g){if(g||2===arguments.length)for(var a=0,d=c.length,
f;a<d;a++)!f&&a in c||(f||(f=Array.prototype.slice.call(c,0,a)),f[a]=c[a]);return b.concat(f||Array.prototype.slice.call(c))};Object.defineProperty(jq,"__esModule",{value:!0});jq.FileHandle=void 0;var l=function(){function b(c,g){this.vol=c;this.fd=g}b.prototype.appendFile=function(c,g){return e(this.vol,"appendFile")(this.fd,c,g)};b.prototype.chmod=function(c){return e(this.vol,"fchmod")(this.fd,c)};b.prototype.chown=function(c,g){return e(this.vol,"fchown")(this.fd,c,g)};b.prototype.close=function(){return e(this.vol,
"close")(this.fd)};b.prototype.datasync=function(){return e(this.vol,"fdatasync")(this.fd)};b.prototype.read=function(c,g,a,d){return e(this.vol,"read",function(f){return{bytesRead:f,buffer:c}})(this.fd,c,g,a,d)};b.prototype.readFile=function(c){return e(this.vol,"readFile")(this.fd,c)};b.prototype.stat=function(c){return e(this.vol,"fstat")(this.fd,c)};b.prototype.sync=function(){return e(this.vol,"fsync")(this.fd)};b.prototype.truncate=function(c){return e(this.vol,"ftruncate")(this.fd,c)};b.prototype.utimes=
function(c,g){return e(this.vol,"futimes")(this.fd,c,g)};b.prototype.write=function(c,g,a,d){return e(this.vol,"write",function(f){return{bytesWritten:f,buffer:c}})(this.fd,c,g,a,d)};b.prototype.writeFile=function(c,g){return e(this.vol,"writeFile")(this.fd,c,g)};return b}();jq.FileHandle=l;jq.default=function(b){return"undefined"===typeof Promise?null:{FileHandle:l,access:function(c,g){return e(b,"access")(c,g)},appendFile:function(c,g,a){return e(b,"appendFile")(c instanceof l?c.fd:c,g,a)},chmod:function(c,
g){return e(b,"chmod")(c,g)},chown:function(c,g,a){return e(b,"chown")(c,g,a)},copyFile:function(c,g,a){return e(b,"copyFile")(c,g,a)},lchmod:function(c,g){return e(b,"lchmod")(c,g)},lchown:function(c,g,a){return e(b,"lchown")(c,g,a)},link:function(c,g){return e(b,"link")(c,g)},lstat:function(c,g){return e(b,"lstat")(c,g)},mkdir:function(c,g){return e(b,"mkdir")(c,g)},mkdtemp:function(c,g){return e(b,"mkdtemp")(c,g)},open:function(c,g,a){return e(b,"open",function(d){return new l(b,d)})(c,g,a)},readdir:function(c,
g){return e(b,"readdir")(c,g)},readFile:function(c,g){return e(b,"readFile")(c instanceof l?c.fd:c,g)},readlink:function(c,g){return e(b,"readlink")(c,g)},realpath:function(c,g){return e(b,"realpath")(c,g)},rename:function(c,g){return e(b,"rename")(c,g)},rmdir:function(c){return e(b,"rmdir")(c)},stat:function(c,g){return e(b,"stat")(c,g)},symlink:function(c,g,a){return e(b,"symlink")(c,g,a)},truncate:function(c,g){return e(b,"truncate")(c,g)},unlink:function(c){return e(b,"unlink")(c)},utimes:function(c,
g,a){return e(b,"utimes")(c,g,a)},writeFile:function(c,g,a){return e(b,"writeFile")(c instanceof l?c.fd:c,g,a)}}};return jq}function w0(){function e(c,g){c=c[g];return 0<g&&("/"===c||b&&"\\"===c)}function h(c){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;if(b){var a=c;if("string"!==typeof a)throw new TypeError("expected a string");a=a.replace(/[\\\/]+/g,"/");if(!1!==g)if(g=a,a=g.length-1,2>a)a=g;else{for(;e(g,a);)a--;a=g.substr(0,a+1)}return a.replace(/^([a-zA-Z]+:|\.\/)/,"")}return c}
if(HQ)return $w;HQ=!0;var l=Hi;Object.defineProperty($w,"__esModule",{value:!0});$w.unixify=h;$w.correctPath=function(c){return h(c.replace(/^\\\\\?\\.:\\/,"\\"))};var b="win32"===l.platform;return $w}function IQ(){function e(ed,Jb,gc,Kc){void 0===Jb&&(Jb="");void 0===gc&&(gc="");void 0===Kc&&(Kc="");var Wd="";gc&&(Wd=" '"+gc+"'");Kc&&(Wd+=" -> '"+Kc+"'");switch(ed){case "ENOENT":return"ENOENT: no such file or directory, "+Jb+Wd;case "EBADF":return"EBADF: bad file descriptor, "+Jb+Wd;case "EINVAL":return"EINVAL: invalid argument, "+
Jb+Wd;case "EPERM":return"EPERM: operation not permitted, "+Jb+Wd;case "EPROTO":return"EPROTO: protocol error, "+Jb+Wd;case "EEXIST":return"EEXIST: file already exists, "+Jb+Wd;case "ENOTDIR":return"ENOTDIR: not a directory, "+Jb+Wd;case "EISDIR":return"EISDIR: illegal operation on a directory, "+Jb+Wd;case "EACCES":return"EACCES: permission denied, "+Jb+Wd;case "ENOTEMPTY":return"ENOTEMPTY: directory not empty, "+Jb+Wd;case "EMFILE":return"EMFILE: too many open files, "+Jb+Wd;case "ENOSYS":return"ENOSYS: function not implemented, "+
Jb+Wd;default:return ed+": error occurred, "+Jb+Wd}}function h(ed,Jb,gc,Kc,Wd){void 0===Jb&&(Jb="");void 0===gc&&(gc="");void 0===Kc&&(Kc="");void 0===Wd&&(Wd=Error);Jb=new Wd(e(ed,Jb,gc,Kc));Jb.code=ed;return Jb}function l(ed){if("number"===typeof ed)return ed;if("string"===typeof ed){var Jb=Ei[ed];if("undefined"!==typeof Jb)return Jb}throw new la.TypeError("ERR_INVALID_OPT_VALUE","flags",ed);}function b(ed,Jb){if(Jb){var gc=typeof Jb;switch(gc){case "string":ed=Object.assign({},ed,{encoding:Jb});
break;case "object":ed=Object.assign({},ed,Jb);break;default:throw TypeError("Expected options to be either an object or a string, but got "+gc+" instead");}}else return ed;"buffer"!==ed.encoding&&(0,md.assertEncoding)(ed.encoding);return ed}function c(ed){return function(Jb){return b(ed,Jb)}}function g(ed){if("function"!==typeof ed)throw TypeError(Rh.CB);return ed}function a(ed){return function(Jb,gc){return"function"===typeof Jb?[ed(),Jb]:[ed(Jb),g(gc)]}}function d(ed){if("string"!==typeof ed&&
!xa.Buffer.isBuffer(ed)){try{if(!(ed instanceof ej.URL))throw new TypeError(Rh.PATH_STR);}catch(Kc){throw new TypeError(Rh.PATH_STR);}if(""!==ed.hostname)throw new la.TypeError("ERR_INVALID_FILE_URL_HOST",Qb.default.platform);ed=ed.pathname;for(var Jb=0;Jb<ed.length;Jb++)if("%"===ed[Jb]){var gc=ed.codePointAt(Jb+2)|32;if("2"===ed[Jb+1]&&102===gc)throw new la.TypeError("ERR_INVALID_FILE_URL_PATH","must not include encoded / characters");}ed=decodeURIComponent(ed)}ed=String(ed);q(ed);return ed}function f(ed,
Jb){return(ed=an(ed,Jb).substr(1))?ed.split(Fe):[]}function k(ed){return f(d(ed))}function n(ed,Jb){void 0===Jb&&(Jb=md.ENCODING_UTF8);return xa.Buffer.isBuffer(ed)?ed:ed instanceof Uint8Array?(0,xa.bufferFrom)(ed):(0,xa.bufferFrom)(String(ed),Jb)}function p(ed,Jb){return Jb&&"buffer"!==Jb?ed.toString(Jb):ed}function q(ed,Jb){if(-1!==(""+ed).indexOf("\x00")){ed=Error("Path must be a string without null bytes");ed.code="ENOENT";if("function"!==typeof Jb)throw ed;Qb.default.nextTick(Jb,ed);return!1}return!0}
function r(ed,Jb){ed="number"===typeof ed?ed:"string"===typeof ed?parseInt(ed,8):Jb?r(Jb):void 0;if("number"!==typeof ed||isNaN(ed))throw new TypeError(Rh.MODE_INT);return ed}function t(ed){if(ed>>>0!==ed)throw TypeError(Rh.FD);}function w(ed){if("string"===typeof ed&&+ed==ed)return+ed;if(ed instanceof Date)return ed.getTime()/1E3;if(isFinite(ed))return 0>ed?Date.now()/1E3:ed;throw Error("Cannot parse time: "+ed);}function x(ed){if("number"!==typeof ed)throw TypeError(Rh.UID);}function B(ed){if("number"!==
typeof ed)throw TypeError(Rh.GID);}function D(ed){function Jb(Kc,Wd){for(var Ye in Wd){var Zf=Wd[Ye],Yi=Tg(Kc,Ye);"string"===typeof Zf?gc[Yi]=Zf:"object"===typeof Zf&&null!==Zf&&0<Object.keys(Zf).length?Jb(Yi,Zf):gc[Yi]=null}}var gc={};Jb("",ed);return gc}function F(ed){ed.emit("stop")}function L(ed){Vk=(0,xa.bufferAllocUnsafe)(ed);Vk.used=0}function G(ed,Jb,gc){if(!(this instanceof G))return new G(ed,Jb,gc);this._vol=ed;gc=Object.assign({},b(gc,{}));void 0===gc.highWaterMark&&(gc.highWaterMark=65536);
Zb.Readable.call(this,gc);this.path=d(Jb);this.fd=void 0===gc.fd?null:gc.fd;this.flags=void 0===gc.flags?"r":gc.flags;this.mode=void 0===gc.mode?438:gc.mode;this.start=gc.start;this.end=gc.end;this.autoClose=void 0===gc.autoClose?!0:gc.autoClose;this.pos=void 0;this.bytesRead=0;if(void 0!==this.start){if("number"!==typeof this.start)throw new TypeError('"start" option must be a Number');if(void 0===this.end)this.end=Infinity;else if("number"!==typeof this.end)throw new TypeError('"end" option must be a Number');
if(this.start>this.end)throw Error('"start" option must be <= "end" option');this.pos=this.start}"number"!==typeof this.fd&&this.open();this.on("end",function(){this.autoClose&&this.destroy&&this.destroy()})}function oa(ed){this.close()}function ha(ed,Jb,gc){if(!(this instanceof ha))return new ha(ed,Jb,gc);this._vol=ed;gc=Object.assign({},b(gc,{}));Zb.Writable.call(this,gc);this.path=d(Jb);this.fd=void 0===gc.fd?null:gc.fd;this.flags=void 0===gc.flags?"w":gc.flags;this.mode=void 0===gc.mode?438:gc.mode;
this.start=gc.start;this.autoClose=void 0===gc.autoClose?!0:!!gc.autoClose;this.pos=void 0;this.bytesWritten=0;if(void 0!==this.start){if("number"!==typeof this.start)throw new TypeError('"start" option must be a Number');if(0>this.start)throw Error('"start" must be >= zero');this.pos=this.start}gc.encoding&&this.setDefaultEncoding(gc.encoding);"number"!==typeof this.fd&&this.open();this.once("finish",function(){this.autoClose&&this.close()})}if(JQ)return Ai;JQ=!0;var Ha=Ai&&Ai.__extends||function(){var ed=
function(Jb,gc){ed=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Kc,Wd){Kc.__proto__=Wd}||function(Kc,Wd){for(var Ye in Wd)Object.prototype.hasOwnProperty.call(Wd,Ye)&&(Kc[Ye]=Wd[Ye])};return ed(Jb,gc)};return function(Jb,gc){function Kc(){this.constructor=Jb}if("function"!==typeof gc&&null!==gc)throw new TypeError("Class extends value "+String(gc)+" is not a constructor or null");ed(Jb,gc);Jb.prototype=null===gc?Object.create(gc):(Kc.prototype=gc.prototype,new Kc)}}(),Va=Ai&&Ai.__spreadArray||
function(ed,Jb,gc){if(gc||2===arguments.length)for(var Kc=0,Wd=Jb.length,Ye;Kc<Wd;Kc++)!Ye&&Kc in Jb||(Ye||(Ye=Array.prototype.slice.call(Jb,0,Kc)),Ye[Kc]=Jb[Kc]);return ed.concat(Ye||Array.prototype.slice.call(Jb))};Object.defineProperty(Ai,"__esModule",{value:!0});Ai.FSWatcher=Ai.StatWatcher=Ai.Volume=Ai.toUnixTimestamp=Ai.bufferToEncoding=Ai.dataToBuffer=Ai.dataToStr=Ai.pathToSteps=Ai.filenameToSteps=Ai.pathToFilename=Ai.flagsToNumber=Ai.FLAGS=void 0;var hc=lk,qc=s0(),jc=dG(),Ya=xQ(),xa=eG(),tc=
zQ(),Qb=CQ(),wc=t0(),Zb=Kl,$c=Zw(),Oa=Rj,md=vQ(),la=tQ(),$a=tf,dd=v0(),Kd=hc.resolve,ra=$c.constants.O_RDONLY,Aa=$c.constants.O_WRONLY,V=$c.constants.O_RDWR,ea=$c.constants.O_CREAT,Mb=$c.constants.O_EXCL,U=$c.constants.O_TRUNC,Sa=$c.constants.O_APPEND,S=$c.constants.O_SYNC,Sc=$c.constants.O_DIRECTORY,xd=$c.constants.F_OK,Ae=$c.constants.COPYFILE_EXCL,ee=$c.constants.COPYFILE_FICLONE_FORCE;hc=hc.posix?hc.posix:hc;var Fe=hc.sep,Mf=hc.relative,Tg=hc.join,pg=hc.dirname,Yg="win32"===Qb.default.platform,
Rh={PATH_STR:"path must be a string or Buffer",FD:"fd must be a file descriptor",MODE_INT:"mode must be an int",CB:"callback must be a function",UID:"uid must be an unsigned int",GID:"gid must be an unsigned int",LEN:"len must be an integer",ATIME:"atime must be an integer",MTIME:"mtime must be an integer",PREFIX:"filename prefix is required",BUFFER:"buffer must be an instance of Buffer or StaticBuffer",OFFSET:"offset must be an integer",LENGTH:"length must be an integer",POSITION:"position must be an integer"},
Ei;(function(ed){ed[ed.r=ra]="r";ed[ed["r+"]=V]="r+";ed[ed.rs=ra|S]="rs";ed[ed.sr=ed.rs]="sr";ed[ed["rs+"]=V|S]="rs+";ed[ed["sr+"]=ed["rs+"]]="sr+";ed[ed.w=Aa|ea|U]="w";ed[ed.wx=Aa|ea|U|Mb]="wx";ed[ed.xw=ed.wx]="xw";ed[ed["w+"]=V|ea|U]="w+";ed[ed["wx+"]=V|ea|U|Mb]="wx+";ed[ed["xw+"]=ed["wx+"]]="xw+";ed[ed.a=Aa|Sa|ea]="a";ed[ed.ax=Aa|Sa|ea|Mb]="ax";ed[ed.xa=ed.ax]="xa";ed[ed["a+"]=V|Sa|ea]="a+";ed[ed["ax+"]=V|Sa|ea|Mb]="ax+";ed[ed["xa+"]=ed["ax+"]]="xa+"})(Ei=Ai.FLAGS||(Ai.FLAGS={}));Ai.flagsToNumber=
l;hc={encoding:"utf8"};var Xj=c(hc),Aj=a(Xj),yi=c({flag:"r"}),dj={encoding:"utf8",mode:438,flag:Ei[Ei.w]},I=c(dj),Na={encoding:"utf8",mode:438,flag:Ei[Ei.a]},z=c(Na),X=a(z),rb=c(hc),Wc=a(rb),Sd={mode:511,recursive:!1},hf=function(ed){return"number"===typeof ed?Object.assign({},Sd,{mode:ed}):Object.assign({},Sd,ed)},vf={recursive:!1},Xf=c({encoding:"utf8",withFileTypes:!1}),uh=a(Xf),Yh={bigint:!1},Mi=function(ed){void 0===ed&&(ed={});return Object.assign({},Yh,ed)},Gl=function(ed,Jb){return"function"===
typeof ed?[Mi(),ed]:[Mi(ed),g(Jb)]};Ai.pathToFilename=d;var an=function(ed,Jb){void 0===Jb&&(Jb=Qb.default.cwd());return Kd(Jb,ed)};if(Yg){var Qo=an,ax=w0().unixify;an=function(ed,Jb){return ax(Qo(ed,Jb))}}Ai.filenameToSteps=f;Ai.pathToSteps=k;Ai.dataToStr=function(ed,Jb){void 0===Jb&&(Jb=md.ENCODING_UTF8);return xa.Buffer.isBuffer(ed)?ed.toString(Jb):ed instanceof Uint8Array?(0,xa.bufferFrom)(ed).toString(Jb):String(ed)};Ai.dataToBuffer=n;Ai.bufferToEncoding=p;Ai.toUnixTimestamp=w;hc=function(){function ed(Jb){void 0===
Jb&&(Jb={});this.ino=0;this.inodes={};this.releasedInos=[];this.fds={};this.releasedFds=[];this.maxFiles=1E4;this.openFiles=0;this.promisesApi=(0,dd.default)(this);this.statWatchers={};this.props=Object.assign({Node:qc.Node,Link:qc.Link,File:qc.File},Jb);Jb=this.createLink();Jb.setNode(this.createNode(!0));var gc=this;this.StatWatcher=function(Kc){function Wd(){return Kc.call(this,gc)||this}Ha(Wd,Kc);return Wd}(tn);this.ReadStream=function(Kc){function Wd(){for(var Ye=[],Zf=0;Zf<arguments.length;Zf++)Ye[Zf]=
arguments[Zf];return Kc.apply(this,Va([gc],Ye,!1))||this}Ha(Wd,Kc);return Wd}(G);this.WriteStream=function(Kc){function Wd(){for(var Ye=[],Zf=0;Zf<arguments.length;Zf++)Ye[Zf]=arguments[Zf];return Kc.apply(this,Va([gc],Ye,!1))||this}Ha(Wd,Kc);return Wd}(ha);this.FSWatcher=function(Kc){function Wd(){return Kc.call(this,gc)||this}Ha(Wd,Kc);return Wd}(kq);this.root=Jb}ed.fromJSON=function(Jb,gc){var Kc=new ed;Kc.fromJSON(Jb,gc);return Kc};ed.fromNestedJSON=function(Jb,gc){var Kc=new ed;Kc.fromNestedJSON(Jb,
gc);return Kc};Object.defineProperty(ed.prototype,"promises",{get:function(){if(null===this.promisesApi)throw Error("Promise is not supported in this environment.");return this.promisesApi},enumerable:!1,configurable:!0});ed.prototype.createLink=function(Jb,gc,Kc,Wd){void 0===Kc&&(Kc=!1);if(!Jb)return new this.props.Link(this,null,"");if(!gc)throw Error("createLink: name cannot be empty");return Jb.createChild(gc,this.createNode(Kc,Wd))};ed.prototype.deleteLink=function(Jb){var gc=Jb.parent;return gc?
(gc.deleteChild(Jb),!0):!1};ed.prototype.newInoNumber=function(){var Jb=this.releasedInos.pop();return Jb?Jb:this.ino=(this.ino+1)%4294967295};ed.prototype.newFdNumber=function(){var Jb=this.releasedFds.pop();return"number"===typeof Jb?Jb:ed.fd--};ed.prototype.createNode=function(Jb,gc){void 0===Jb&&(Jb=!1);gc=new this.props.Node(this.newInoNumber(),gc);Jb&&gc.setIsDirectory();return this.inodes[gc.ino]=gc};ed.prototype.getNode=function(Jb){return this.inodes[Jb]};ed.prototype.deleteNode=function(Jb){Jb.del();
delete this.inodes[Jb.ino];this.releasedInos.push(Jb.ino)};ed.prototype.genRndStr=function(){var Jb=(Math.random()+1).toString(36).substr(2,6);return 6===Jb.length?Jb:this.genRndStr()};ed.prototype.getLink=function(Jb){return this.root.walk(Jb)};ed.prototype.getLinkOrThrow=function(Jb,gc){var Kc=f(Jb);Kc=this.getLink(Kc);if(!Kc)throw h("ENOENT",gc,Jb);return Kc};ed.prototype.getResolvedLink=function(Jb){Jb="string"===typeof Jb?f(Jb):Jb;for(var gc=this.root,Kc=0;Kc<Jb.length;){gc=gc.getChild(Jb[Kc]);
if(!gc)return null;var Wd=gc.getNode();Wd.isSymlink()?(Jb=Wd.symlink.concat(Jb.slice(Kc+1)),gc=this.root,Kc=0):Kc++}return gc};ed.prototype.getResolvedLinkOrThrow=function(Jb,gc){var Kc=this.getResolvedLink(Jb);if(!Kc)throw h("ENOENT",gc,Jb);return Kc};ed.prototype.resolveSymlinks=function(Jb){return this.getResolvedLink(Jb.steps.slice(1))};ed.prototype.getLinkAsDirOrThrow=function(Jb,gc){var Kc=this.getLinkOrThrow(Jb,gc);if(!Kc.getNode().isDirectory())throw h("ENOTDIR",gc,Jb);return Kc};ed.prototype.getLinkParent=
function(Jb){return this.root.walk(Jb,Jb.length-1)};ed.prototype.getLinkParentAsDirOrThrow=function(Jb,gc){Jb=Jb instanceof Array?Jb:f(Jb);var Kc=this.getLinkParent(Jb);if(!Kc)throw h("ENOENT",gc,Fe+Jb.join(Fe));if(!Kc.getNode().isDirectory())throw h("ENOTDIR",gc,Fe+Jb.join(Fe));return Kc};ed.prototype.getFileByFd=function(Jb){return this.fds[String(Jb)]};ed.prototype.getFileByFdOrThrow=function(Jb,gc){if(Jb>>>0!==Jb)throw TypeError(Rh.FD);Jb=this.getFileByFd(Jb);if(!Jb)throw h("EBADF",gc);return Jb};
ed.prototype.getNodeByIdOrCreate=function(Jb,gc,Kc){if("number"===typeof Jb){Jb=this.getFileByFd(Jb);if(!Jb)throw Error("File nto found");return Jb.node}var Wd=k(Jb),Ye=this.getLink(Wd);if(Ye)return Ye.getNode();if(gc&ea&&(gc=this.getLinkParent(Wd)))return Ye=this.createLink(gc,Wd[Wd.length-1],!1,Kc),Ye.getNode();throw h("ENOENT","getNodeByIdOrCreate",d(Jb));};ed.prototype.wrapAsync=function(Jb,gc,Kc){var Wd=this;g(Kc);(0,tc.default)(function(){try{var Ye=Jb.apply(Wd,gc)}catch(Zf){Kc(Zf);return}Kc(null,
Ye)})};ed.prototype._toJSON=function(Jb,gc,Kc){var Wd;void 0===Jb&&(Jb=this.root);void 0===gc&&(gc={});var Ye=!0,Zf=Jb.children;Jb.getNode().isFile()&&(Zf=(Wd={},Wd[Jb.getName()]=Jb.parent.getChild(Jb.getName()),Wd),Jb=Jb.parent);for(var Yi in Zf){Ye=!1;Zf=Jb.getChild(Yi);if(!Zf)throw Error("_toJSON: unexpected undefined");Wd=Zf.getNode();Wd.isFile()?(Zf=Zf.getPath(),Kc&&(Zf=Mf(Kc,Zf)),gc[Zf]=Wd.getString()):Wd.isDirectory()&&this._toJSON(Zf,gc,Kc)}Jb=Jb.getPath();Kc&&(Jb=Mf(Kc,Jb));Jb&&Ye&&(gc[Jb]=
null);return gc};ed.prototype.toJSON=function(Jb,gc,Kc){void 0===gc&&(gc={});void 0===Kc&&(Kc=!1);var Wd=[];if(Jb){Jb instanceof Array||(Jb=[Jb]);for(var Ye=0;Ye<Jb.length;Ye++){var Zf=d(Jb[Ye]);(Zf=this.getResolvedLink(Zf))&&Wd.push(Zf)}}else Wd.push(this.root);if(!Wd.length)return gc;for(Ye=0;Ye<Wd.length;Ye++)Zf=Wd[Ye],this._toJSON(Zf,gc,Kc?Zf.getPath():"");return gc};ed.prototype.fromJSON=function(Jb,gc){void 0===gc&&(gc=Qb.default.cwd());for(var Kc in Jb){var Wd=Jb[Kc];Kc=an(Kc,gc);if("string"===
typeof Wd){var Ye=pg(Kc);this.mkdirpBase(Ye,511);this.writeFileSync(Kc,Wd)}else this.mkdirpBase(Kc,511)}};ed.prototype.fromNestedJSON=function(Jb,gc){this.fromJSON(D(Jb),gc)};ed.prototype.reset=function(){this.ino=0;this.inodes={};this.releasedInos=[];this.fds={};this.releasedFds=[];this.openFiles=0;this.root=this.createLink();this.root.setNode(this.createNode(!0))};ed.prototype.mountSync=function(Jb,gc){this.fromJSON(gc,Jb)};ed.prototype.openLink=function(Jb,gc,Kc){void 0===Kc&&(Kc=!0);if(this.openFiles>=
this.maxFiles)throw h("EMFILE","open",Jb.getPath());var Wd=Jb;Kc&&(Wd=this.resolveSymlinks(Jb));if(!Wd)throw h("ENOENT","open",Jb.getPath());Kc=Wd.getNode();if(Kc.isDirectory()){if((gc&(ra|V|Aa))!==ra)throw h("EISDIR","open",Jb.getPath());}else if(gc&Sc)throw h("ENOTDIR","open",Jb.getPath());if(!(gc&Aa||Kc.canRead()))throw h("EACCES","open",Jb.getPath());Jb=new this.props.File(Jb,Kc,gc,this.newFdNumber());this.fds[Jb.fd]=Jb;this.openFiles++;gc&U&&Jb.truncate();return Jb};ed.prototype.openFile=function(Jb,
gc,Kc,Wd){void 0===Wd&&(Wd=!0);var Ye=f(Jb),Zf=Wd?this.getResolvedLink(Ye):this.getLink(Ye);if(!Zf&&gc&ea){var Yi=this.getResolvedLink(Ye.slice(0,Ye.length-1));if(!Yi)throw h("ENOENT","open",Fe+Ye.join(Fe));gc&ea&&"number"===typeof Kc&&(Zf=this.createLink(Yi,Ye[Ye.length-1],!1,Kc))}if(Zf)return this.openLink(Zf,gc,Wd);throw h("ENOENT","open",Jb);};ed.prototype.openBase=function(Jb,gc,Kc,Wd){void 0===Wd&&(Wd=!0);gc=this.openFile(Jb,gc,Kc,Wd);if(!gc)throw h("ENOENT","open",Jb);return gc.fd};ed.prototype.openSync=
function(Jb,gc,Kc){void 0===Kc&&(Kc=438);Kc=r(Kc);Jb=d(Jb);gc=l(gc);return this.openBase(Jb,gc,Kc)};ed.prototype.open=function(Jb,gc,Kc,Wd){var Ye=Kc;"function"===typeof Kc&&(Ye=438,Wd=Kc);Kc=r(Ye||438);Jb=d(Jb);gc=l(gc);this.wrapAsync(this.openBase,[Jb,gc,Kc],Wd)};ed.prototype.closeFile=function(Jb){this.fds[Jb.fd]&&(this.openFiles--,delete this.fds[Jb.fd],this.releasedFds.push(Jb.fd))};ed.prototype.closeSync=function(Jb){t(Jb);Jb=this.getFileByFdOrThrow(Jb,"close");this.closeFile(Jb)};ed.prototype.close=
function(Jb,gc){t(Jb);this.wrapAsync(this.closeSync,[Jb],gc)};ed.prototype.openFileOrGetById=function(Jb,gc,Kc){if("number"===typeof Jb){Jb=this.fds[Jb];if(!Jb)throw h("ENOENT");return Jb}return this.openFile(d(Jb),gc,Kc)};ed.prototype.readBase=function(Jb,gc,Kc,Wd,Ye){return this.getFileByFdOrThrow(Jb).read(gc,Number(Kc),Number(Wd),Ye)};ed.prototype.readSync=function(Jb,gc,Kc,Wd,Ye){t(Jb);return this.readBase(Jb,gc,Kc,Wd,Ye)};ed.prototype.read=function(Jb,gc,Kc,Wd,Ye,Zf){var Yi=this;g(Zf);if(0===
Wd)return Qb.default.nextTick(function(){Zf&&Zf(null,0,gc)});(0,tc.default)(function(){try{var Wk=Yi.readBase(Jb,gc,Kc,Wd,Ye);Zf(null,Wk,gc)}catch(Xk){Zf(Xk)}})};ed.prototype.readFileBase=function(Jb,gc,Kc){var Wd="number"===typeof Jb&&Jb>>>0===Jb;if(!Wd){var Ye=d(Jb);Ye=f(Ye);if((Ye=this.getResolvedLink(Ye))&&Ye.getNode().isDirectory())throw h("EISDIR","open",Ye.getPath());Jb=this.openSync(Jb,gc)}try{var Zf=p(this.getFileByFdOrThrow(Jb).getBuffer(),Kc)}finally{Wd||this.closeSync(Jb)}return Zf};ed.prototype.readFileSync=
function(Jb,gc){gc=yi(gc);var Kc=l(gc.flag);return this.readFileBase(Jb,Kc,gc.encoding)};ed.prototype.readFile=function(Jb,gc,Kc){Kc=a(yi)(gc,Kc);gc=Kc[0];Kc=Kc[1];var Wd=l(gc.flag);this.wrapAsync(this.readFileBase,[Jb,Wd,gc.encoding],Kc)};ed.prototype.writeBase=function(Jb,gc,Kc,Wd,Ye){return this.getFileByFdOrThrow(Jb,"write").write(gc,Kc,Wd,Ye)};ed.prototype.writeSync=function(Jb,gc,Kc,Wd,Ye){t(Jb);var Zf="string"!==typeof gc;if(Zf){var Yi=(Kc||0)|0;var Wk=Wd;Kc=Ye}else var Xk=Wd;gc=n(gc,Xk);Zf?
"undefined"===typeof Wk&&(Wk=gc.length):(Yi=0,Wk=gc.length);return this.writeBase(Jb,gc,Yi,Wk,Kc)};ed.prototype.write=function(Jb,gc,Kc,Wd,Ye,Zf){var Yi=this;t(Jb);var Wk=typeof gc,Xk=typeof Kc,Eu=typeof Wd,is=typeof Ye;if("string"!==Wk)if("function"===Xk)var yk=Kc;else if("function"===Eu){var mp=Kc|0;yk=Wd}else if("function"===is){mp=Kc|0;var un=Wd;yk=Ye}else{mp=Kc|0;un=Wd;var lq=Ye;yk=Zf}else if("function"===Xk)yk=Kc;else if("function"===Eu)lq=Kc,yk=Wd;else if("function"===is){lq=Kc;var Fu=Wd;yk=
Ye}var mq=n(gc,Fu);"string"!==Wk?"undefined"===typeof un&&(un=mq.length):(mp=0,un=mq.length);var js=g(yk);(0,tc.default)(function(){try{var Gu=Yi.writeBase(Jb,mq,mp,un,lq);"string"!==Wk?js(null,Gu,mq):js(null,Gu,gc)}catch(nq){js(nq)}})};ed.prototype.writeFileBase=function(Jb,gc,Kc,Wd){var Ye="number"===typeof Jb;Jb=Ye?Jb:this.openBase(d(Jb),Kc,Wd);Wd=0;var Zf=gc.length;Kc=Kc&Sa?void 0:0;try{for(;0<Zf;){var Yi=this.writeSync(Jb,gc,Wd,Zf,Kc);Wd+=Yi;Zf-=Yi;void 0!==Kc&&(Kc+=Yi)}}finally{Ye||this.closeSync(Jb)}};
ed.prototype.writeFileSync=function(Jb,gc,Kc){var Wd=I(Kc);Kc=l(Wd.flag);var Ye=r(Wd.mode);gc=n(gc,Wd.encoding);this.writeFileBase(Jb,gc,Kc,Ye)};ed.prototype.writeFile=function(Jb,gc,Kc,Wd){var Ye=Kc;"function"===typeof Kc&&(Ye=dj,Wd=Kc);Kc=g(Wd);var Zf=I(Ye);Ye=l(Zf.flag);Wd=r(Zf.mode);gc=n(gc,Zf.encoding);this.wrapAsync(this.writeFileBase,[Jb,gc,Ye,Wd],Kc)};ed.prototype.linkBase=function(Jb,gc){var Kc=f(Jb),Wd=this.getLink(Kc);if(!Wd)throw h("ENOENT","link",Jb,gc);var Ye=f(gc);Kc=this.getLinkParent(Ye);
if(!Kc)throw h("ENOENT","link",Jb,gc);Ye=Ye[Ye.length-1];if(Kc.getChild(Ye))throw h("EEXIST","link",Jb,gc);Jb=Wd.getNode();Jb.nlink++;Kc.createChild(Ye,Jb)};ed.prototype.copyFileBase=function(Jb,gc,Kc){var Wd=this.readFileSync(Jb);if(Kc&Ae&&this.existsSync(gc))throw h("EEXIST","copyFile",Jb,gc);if(Kc&ee)throw h("ENOSYS","copyFile",Jb,gc);this.writeFileBase(gc,Wd,Ei.w,438)};ed.prototype.copyFileSync=function(Jb,gc,Kc){Jb=d(Jb);gc=d(gc);return this.copyFileBase(Jb,gc,(Kc||0)|0)};ed.prototype.copyFile=
function(Jb,gc,Kc,Wd){Jb=d(Jb);gc=d(gc);if("function"===typeof Kc)var Ye=0;else Ye=Kc,Kc=Wd;g(Kc);this.wrapAsync(this.copyFileBase,[Jb,gc,Ye],Kc)};ed.prototype.linkSync=function(Jb,gc){Jb=d(Jb);gc=d(gc);this.linkBase(Jb,gc)};ed.prototype.link=function(Jb,gc,Kc){Jb=d(Jb);gc=d(gc);this.wrapAsync(this.linkBase,[Jb,gc],Kc)};ed.prototype.unlinkBase=function(Jb){var gc=f(Jb);gc=this.getLink(gc);if(!gc)throw h("ENOENT","unlink",Jb);if(gc.length)throw Error("Dir not empty...");this.deleteLink(gc);Jb=gc.getNode();
Jb.nlink--;0>=Jb.nlink&&this.deleteNode(Jb)};ed.prototype.unlinkSync=function(Jb){Jb=d(Jb);this.unlinkBase(Jb)};ed.prototype.unlink=function(Jb,gc){Jb=d(Jb);this.wrapAsync(this.unlinkBase,[Jb],gc)};ed.prototype.symlinkBase=function(Jb,gc){var Kc=f(gc),Wd=this.getLinkParent(Kc);if(!Wd)throw h("ENOENT","symlink",Jb,gc);Kc=Kc[Kc.length-1];if(Wd.getChild(Kc))throw h("EEXIST","symlink",Jb,gc);gc=Wd.createChild(Kc);gc.getNode().makeSymlink(f(Jb));return gc};ed.prototype.symlinkSync=function(Jb,gc,Kc){Jb=
d(Jb);gc=d(gc);this.symlinkBase(Jb,gc)};ed.prototype.symlink=function(Jb,gc,Kc,Wd){Kc=g("function"===typeof Kc?Kc:Wd);Jb=d(Jb);gc=d(gc);this.wrapAsync(this.symlinkBase,[Jb,gc],Kc)};ed.prototype.realpathBase=function(Jb,gc){var Kc=f(Jb);Kc=this.getResolvedLink(Kc);if(!Kc)throw h("ENOENT","realpath",Jb);return(0,md.strToEncoding)(Kc.getPath(),gc)};ed.prototype.realpathSync=function(Jb,gc){return this.realpathBase(d(Jb),rb(gc).encoding)};ed.prototype.realpath=function(Jb,gc,Kc){Kc=Wc(gc,Kc);gc=Kc[0];
Kc=Kc[1];Jb=d(Jb);this.wrapAsync(this.realpathBase,[Jb,gc.encoding],Kc)};ed.prototype.lstatBase=function(Jb,gc){void 0===gc&&(gc=!1);var Kc=this.getLink(f(Jb));if(!Kc)throw h("ENOENT","lstat",Jb);return jc.default.build(Kc.getNode(),gc)};ed.prototype.lstatSync=function(Jb,gc){return this.lstatBase(d(Jb),Mi(gc).bigint)};ed.prototype.lstat=function(Jb,gc,Kc){Kc=Gl(gc,Kc);gc=Kc[0];Kc=Kc[1];this.wrapAsync(this.lstatBase,[d(Jb),gc.bigint],Kc)};ed.prototype.statBase=function(Jb,gc){void 0===gc&&(gc=!1);
var Kc=this.getResolvedLink(f(Jb));if(!Kc)throw h("ENOENT","stat",Jb);return jc.default.build(Kc.getNode(),gc)};ed.prototype.statSync=function(Jb,gc){return this.statBase(d(Jb),Mi(gc).bigint)};ed.prototype.stat=function(Jb,gc,Kc){Kc=Gl(gc,Kc);gc=Kc[0];Kc=Kc[1];this.wrapAsync(this.statBase,[d(Jb),gc.bigint],Kc)};ed.prototype.fstatBase=function(Jb,gc){void 0===gc&&(gc=!1);Jb=this.getFileByFd(Jb);if(!Jb)throw h("EBADF","fstat");return jc.default.build(Jb.node,gc)};ed.prototype.fstatSync=function(Jb,
gc){return this.fstatBase(Jb,Mi(gc).bigint)};ed.prototype.fstat=function(Jb,gc,Kc){gc=Gl(gc,Kc);this.wrapAsync(this.fstatBase,[Jb,gc[0].bigint],gc[1])};ed.prototype.renameBase=function(Jb,gc){var Kc=this.getLink(f(Jb));if(!Kc)throw h("ENOENT","rename",Jb,gc);var Wd=f(gc),Ye=this.getLinkParent(Wd);if(!Ye)throw h("ENOENT","rename",Jb,gc);(Jb=Kc.parent)&&Jb.deleteChild(Kc);Wd=Wd[Wd.length-1];Kc.steps=Va(Va([],Ye.steps,!0),[Wd],!1);Ye.setChild(Kc.getName(),Kc)};ed.prototype.renameSync=function(Jb,gc){Jb=
d(Jb);gc=d(gc);this.renameBase(Jb,gc)};ed.prototype.rename=function(Jb,gc,Kc){Jb=d(Jb);gc=d(gc);this.wrapAsync(this.renameBase,[Jb,gc],Kc)};ed.prototype.existsBase=function(Jb){return!!this.statBase(Jb)};ed.prototype.existsSync=function(Jb){try{return this.existsBase(d(Jb))}catch(gc){return!1}};ed.prototype.exists=function(Jb,gc){var Kc=this,Wd=d(Jb);if("function"!==typeof gc)throw Error(Rh.CB);(0,tc.default)(function(){try{gc(Kc.existsBase(Wd))}catch(Ye){gc(!1)}})};ed.prototype.accessBase=function(Jb,
gc){this.getLinkOrThrow(Jb,"access")};ed.prototype.accessSync=function(Jb,gc){void 0===gc&&(gc=xd);Jb=d(Jb);this.accessBase(Jb,gc|0)};ed.prototype.access=function(Jb,gc,Kc){var Wd=xd;"function"!==typeof gc&&(Wd=gc|0,gc=g(Kc));Jb=d(Jb);this.wrapAsync(this.accessBase,[Jb,Wd],gc)};ed.prototype.appendFileSync=function(Jb,gc,Kc){void 0===Kc&&(Kc=Na);Kc=z(Kc);Kc.flag&&Jb>>>0!==Jb||(Kc.flag="a");this.writeFileSync(Jb,gc,Kc)};ed.prototype.appendFile=function(Jb,gc,Kc,Wd){Wd=X(Kc,Wd);Kc=Wd[0];Wd=Wd[1];Kc.flag&&
Jb>>>0!==Jb||(Kc.flag="a");this.writeFile(Jb,gc,Kc,Wd)};ed.prototype.readdirBase=function(Jb,gc){var Kc=f(Jb);Kc=this.getResolvedLink(Kc);if(!Kc)throw h("ENOENT","readdir",Jb);if(!Kc.getNode().isDirectory())throw h("ENOTDIR","scandir",Jb);if(gc.withFileTypes){var Wd=[];for(Ye in Kc.children)(Jb=Kc.getChild(Ye))&&Wd.push(Ya.default.build(Jb,gc.encoding));Yg||"buffer"===gc.encoding||Wd.sort(function(Zf,Yi){return Zf.name<Yi.name?-1:Zf.name>Yi.name?1:0});return Wd}var Ye=[];for(Wd in Kc.children)Ye.push((0,
md.strToEncoding)(Wd,gc.encoding));Yg||"buffer"===gc.encoding||Ye.sort();return Ye};ed.prototype.readdirSync=function(Jb,gc){gc=Xf(gc);Jb=d(Jb);return this.readdirBase(Jb,gc)};ed.prototype.readdir=function(Jb,gc,Kc){Kc=uh(gc,Kc);gc=Kc[0];Kc=Kc[1];Jb=d(Jb);this.wrapAsync(this.readdirBase,[Jb,gc],Kc)};ed.prototype.readlinkBase=function(Jb,gc){var Kc=this.getLinkOrThrow(Jb,"readlink").getNode();if(!Kc.isSymlink())throw h("EINVAL","readlink",Jb);Jb=Fe+Kc.symlink.join(Fe);return(0,md.strToEncoding)(Jb,
gc)};ed.prototype.readlinkSync=function(Jb,gc){gc=Xj(gc);Jb=d(Jb);return this.readlinkBase(Jb,gc.encoding)};ed.prototype.readlink=function(Jb,gc,Kc){Kc=Aj(gc,Kc);gc=Kc[0];Kc=Kc[1];Jb=d(Jb);this.wrapAsync(this.readlinkBase,[Jb,gc.encoding],Kc)};ed.prototype.fsyncBase=function(Jb){this.getFileByFdOrThrow(Jb,"fsync")};ed.prototype.fsyncSync=function(Jb){this.fsyncBase(Jb)};ed.prototype.fsync=function(Jb,gc){this.wrapAsync(this.fsyncBase,[Jb],gc)};ed.prototype.fdatasyncBase=function(Jb){this.getFileByFdOrThrow(Jb,
"fdatasync")};ed.prototype.fdatasyncSync=function(Jb){this.fdatasyncBase(Jb)};ed.prototype.fdatasync=function(Jb,gc){this.wrapAsync(this.fdatasyncBase,[Jb],gc)};ed.prototype.ftruncateBase=function(Jb,gc){this.getFileByFdOrThrow(Jb,"ftruncate").truncate(gc)};ed.prototype.ftruncateSync=function(Jb,gc){this.ftruncateBase(Jb,gc)};ed.prototype.ftruncate=function(Jb,gc,Kc){var Wd="number"===typeof gc?gc:0;gc=g("number"===typeof gc?Kc:gc);this.wrapAsync(this.ftruncateBase,[Jb,Wd],gc)};ed.prototype.truncateBase=
function(Jb,gc){Jb=this.openSync(Jb,"r+");try{this.ftruncateSync(Jb,gc)}finally{this.closeSync(Jb)}};ed.prototype.truncateSync=function(Jb,gc){if(Jb>>>0===Jb)return this.ftruncateSync(Jb,gc);this.truncateBase(Jb,gc)};ed.prototype.truncate=function(Jb,gc,Kc){var Wd="number"===typeof gc?gc:0;gc=g("number"===typeof gc?Kc:gc);if(Jb>>>0===Jb)return this.ftruncate(Jb,Wd,gc);this.wrapAsync(this.truncateBase,[Jb,Wd],gc)};ed.prototype.futimesBase=function(Jb,gc,Kc){Jb=this.getFileByFdOrThrow(Jb,"futimes").node;
Jb.atime=new Date(1E3*gc);Jb.mtime=new Date(1E3*Kc)};ed.prototype.futimesSync=function(Jb,gc,Kc){this.futimesBase(Jb,w(gc),w(Kc))};ed.prototype.futimes=function(Jb,gc,Kc,Wd){this.wrapAsync(this.futimesBase,[Jb,w(gc),w(Kc)],Wd)};ed.prototype.utimesBase=function(Jb,gc,Kc){Jb=this.openSync(Jb,"r+");try{this.futimesBase(Jb,gc,Kc)}finally{this.closeSync(Jb)}};ed.prototype.utimesSync=function(Jb,gc,Kc){this.utimesBase(d(Jb),w(gc),w(Kc))};ed.prototype.utimes=function(Jb,gc,Kc,Wd){this.wrapAsync(this.utimesBase,
[d(Jb),w(gc),w(Kc)],Wd)};ed.prototype.mkdirBase=function(Jb,gc){var Kc=f(Jb);if(!Kc.length)throw h("EEXIST","mkdir",Jb);var Wd=this.getLinkParentAsDirOrThrow(Jb,"mkdir");Kc=Kc[Kc.length-1];if(Wd.getChild(Kc))throw h("EEXIST","mkdir",Jb);Wd.createChild(Kc,this.createNode(!0,gc))};ed.prototype.mkdirpBase=function(Jb,gc){Jb=f(Jb);for(var Kc=this.root,Wd=0;Wd<Jb.length;Wd++){var Ye=Jb[Wd];if(!Kc.getNode().isDirectory())throw h("ENOTDIR","mkdir",Kc.getPath());var Zf=Kc.getChild(Ye);if(Zf)if(Zf.getNode().isDirectory())Kc=
Zf;else throw h("ENOTDIR","mkdir",Zf.getPath());else Kc=Kc.createChild(Ye,this.createNode(!0,gc))}};ed.prototype.mkdirSync=function(Jb,gc){gc=hf(gc);var Kc=r(gc.mode,511);Jb=d(Jb);gc.recursive?this.mkdirpBase(Jb,Kc):this.mkdirBase(Jb,Kc)};ed.prototype.mkdir=function(Jb,gc,Kc){var Wd=hf(gc);gc=g("function"===typeof gc?gc:Kc);Kc=r(Wd.mode,511);Jb=d(Jb);Wd.recursive?this.wrapAsync(this.mkdirpBase,[Jb,Kc],gc):this.wrapAsync(this.mkdirBase,[Jb,Kc],gc)};ed.prototype.mkdirpSync=function(Jb,gc){this.mkdirSync(Jb,
{mode:gc,recursive:!0})};ed.prototype.mkdirp=function(Jb,gc,Kc){var Wd="function"===typeof gc?void 0:gc;gc=g("function"===typeof gc?gc:Kc);this.mkdir(Jb,{mode:Wd,recursive:!0},gc)};ed.prototype.mkdtempBase=function(Jb,gc,Kc){void 0===Kc&&(Kc=5);var Wd=Jb+this.genRndStr();try{return this.mkdirBase(Wd,511),(0,md.strToEncoding)(Wd,gc)}catch(Ye){if("EEXIST"===Ye.code){if(1<Kc)return this.mkdtempBase(Jb,gc,Kc-1);throw Error("Could not create temp dir.");}throw Ye;}};ed.prototype.mkdtempSync=function(Jb,
gc){gc=Xj(gc).encoding;if(!Jb||"string"!==typeof Jb)throw new TypeError("filename prefix is required");q(Jb);return this.mkdtempBase(Jb,gc)};ed.prototype.mkdtemp=function(Jb,gc,Kc){Kc=Aj(gc,Kc);gc=Kc[0].encoding;Kc=Kc[1];if(!Jb||"string"!==typeof Jb)throw new TypeError("filename prefix is required");q(Jb)&&this.wrapAsync(this.mkdtempBase,[Jb,gc],Kc)};ed.prototype.rmdirBase=function(Jb,gc){gc=Object.assign({},vf,gc);var Kc=this.getLinkAsDirOrThrow(Jb,"rmdir");if(Kc.length&&!gc.recursive)throw h("ENOTEMPTY",
"rmdir",Jb);this.deleteLink(Kc)};ed.prototype.rmdirSync=function(Jb,gc){this.rmdirBase(d(Jb),gc)};ed.prototype.rmdir=function(Jb,gc,Kc){var Wd=Object.assign({},vf,gc);gc=g("function"===typeof gc?gc:Kc);this.wrapAsync(this.rmdirBase,[d(Jb),Wd],gc)};ed.prototype.fchmodBase=function(Jb,gc){this.getFileByFdOrThrow(Jb,"fchmod").chmod(gc)};ed.prototype.fchmodSync=function(Jb,gc){this.fchmodBase(Jb,r(gc))};ed.prototype.fchmod=function(Jb,gc,Kc){this.wrapAsync(this.fchmodBase,[Jb,r(gc)],Kc)};ed.prototype.chmodBase=
function(Jb,gc){Jb=this.openSync(Jb,"r+");try{this.fchmodBase(Jb,gc)}finally{this.closeSync(Jb)}};ed.prototype.chmodSync=function(Jb,gc){gc=r(gc);Jb=d(Jb);this.chmodBase(Jb,gc)};ed.prototype.chmod=function(Jb,gc,Kc){gc=r(gc);Jb=d(Jb);this.wrapAsync(this.chmodBase,[Jb,gc],Kc)};ed.prototype.lchmodBase=function(Jb,gc){Jb=this.openBase(Jb,V,0,!1);try{this.fchmodBase(Jb,gc)}finally{this.closeSync(Jb)}};ed.prototype.lchmodSync=function(Jb,gc){gc=r(gc);Jb=d(Jb);this.lchmodBase(Jb,gc)};ed.prototype.lchmod=
function(Jb,gc,Kc){gc=r(gc);Jb=d(Jb);this.wrapAsync(this.lchmodBase,[Jb,gc],Kc)};ed.prototype.fchownBase=function(Jb,gc,Kc){this.getFileByFdOrThrow(Jb,"fchown").chown(gc,Kc)};ed.prototype.fchownSync=function(Jb,gc,Kc){x(gc);B(Kc);this.fchownBase(Jb,gc,Kc)};ed.prototype.fchown=function(Jb,gc,Kc,Wd){x(gc);B(Kc);this.wrapAsync(this.fchownBase,[Jb,gc,Kc],Wd)};ed.prototype.chownBase=function(Jb,gc,Kc){this.getResolvedLinkOrThrow(Jb,"chown").getNode().chown(gc,Kc)};ed.prototype.chownSync=function(Jb,gc,
Kc){x(gc);B(Kc);this.chownBase(d(Jb),gc,Kc)};ed.prototype.chown=function(Jb,gc,Kc,Wd){x(gc);B(Kc);this.wrapAsync(this.chownBase,[d(Jb),gc,Kc],Wd)};ed.prototype.lchownBase=function(Jb,gc,Kc){this.getLinkOrThrow(Jb,"lchown").getNode().chown(gc,Kc)};ed.prototype.lchownSync=function(Jb,gc,Kc){x(gc);B(Kc);this.lchownBase(d(Jb),gc,Kc)};ed.prototype.lchown=function(Jb,gc,Kc,Wd){x(gc);B(Kc);this.wrapAsync(this.lchownBase,[d(Jb),gc,Kc],Wd)};ed.prototype.watchFile=function(Jb,gc,Kc){Jb=d(Jb);var Wd=gc;"function"===
typeof Wd&&(Kc=gc,Wd=null);if("function"!==typeof Kc)throw Error('"watchFile()" requires a listener function');gc=5007;var Ye=!0;Wd&&"object"===typeof Wd&&("number"===typeof Wd.interval&&(gc=Wd.interval),"boolean"===typeof Wd.persistent&&(Ye=Wd.persistent));Wd=this.statWatchers[Jb];Wd||(Wd=new this.StatWatcher,Wd.start(Jb,Ye,gc),this.statWatchers[Jb]=Wd);Wd.addListener("change",Kc);return Wd};ed.prototype.unwatchFile=function(Jb,gc){Jb=d(Jb);var Kc=this.statWatchers[Jb];Kc&&("function"===typeof gc?
Kc.removeListener("change",gc):Kc.removeAllListeners("change"),0===Kc.listenerCount("change")&&(Kc.stop(),delete this.statWatchers[Jb]))};ed.prototype.createReadStream=function(Jb,gc){return new this.ReadStream(Jb,gc)};ed.prototype.createWriteStream=function(Jb,gc){return new this.WriteStream(Jb,gc)};ed.prototype.watch=function(Jb,gc,Kc){Jb=d(Jb);var Wd=gc;"function"===typeof gc&&(Kc=gc,Wd=null);var Ye=Xj(Wd);gc=Ye.persistent;Wd=Ye.recursive;Ye=Ye.encoding;void 0===gc&&(gc=!0);void 0===Wd&&(Wd=!1);
var Zf=new this.FSWatcher;Zf.start(Jb,gc,Wd,Ye);Kc&&Zf.addListener("change",Kc);return Zf};ed.fd=2147483647;return ed}();Ai.Volume=hc;var tn=function(ed){function Jb(gc){var Kc=ed.call(this)||this;Kc.onInterval=function(){try{var Wd=Kc.vol.statSync(Kc.filename);Kc.hasChanged(Wd)&&(Kc.emit("change",Wd,Kc.prev),Kc.prev=Wd)}finally{Kc.loop()}};Kc.vol=gc;return Kc}Ha(Jb,ed);Jb.prototype.loop=function(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)};Jb.prototype.hasChanged=function(gc){return gc.mtimeMs>
this.prev.mtimeMs||gc.nlink!==this.prev.nlink?!0:!1};Jb.prototype.start=function(gc,Kc,Wd){void 0===Kc&&(Kc=!0);void 0===Wd&&(Wd=5007);this.filename=d(gc);this.setTimeout=Kc?setTimeout.bind("undefined"!==typeof globalThis?globalThis:x0):wc.default;this.interval=Wd;this.prev=this.vol.statSync(this.filename);this.loop()};Jb.prototype.stop=function(){clearTimeout(this.timeoutRef);Qb.default.nextTick(F,this)};return Jb}(Oa.EventEmitter);Ai.StatWatcher=tn;var Vk;$a.inherits(G,Zb.Readable);Ai.ReadStream=
G;G.prototype.open=function(){var ed=this;this._vol.open(this.path,this.flags,this.mode,function(Jb,gc){Jb?(ed.autoClose&&ed.destroy&&ed.destroy(),ed.emit("error",Jb)):(ed.fd=gc,ed.emit("open",gc),ed.read())})};G.prototype._read=function(ed){if("number"!==typeof this.fd)return this.once("open",function(){this._read(ed)});if(!this.destroyed){(!Vk||128>Vk.length-Vk.used)&&L(this._readableState.highWaterMark);var Jb=Vk,gc=Math.min(Vk.length-Vk.used,ed),Kc=Vk.used;void 0!==this.pos&&(gc=Math.min(this.end-
this.pos+1,gc));if(0>=gc)return this.push(null);var Wd=this;this._vol.read(this.fd,Vk,Vk.used,gc,this.pos,function(Ye,Zf){Ye?(Wd.autoClose&&Wd.destroy&&Wd.destroy(),Wd.emit("error",Ye)):(Ye=null,0<Zf&&(Wd.bytesRead+=Zf,Ye=Jb.slice(Kc,Kc+Zf)),Wd.push(Ye))});void 0!==this.pos&&(this.pos+=gc);Vk.used+=gc}};G.prototype._destroy=function(ed,Jb){this.close(function(gc){Jb(ed||gc)})};G.prototype.close=function(ed){var Jb=this;if(ed)this.once("close",ed);if(this.closed||"number"!==typeof this.fd){if("number"!==
typeof this.fd){this.once("open",oa);return}return Qb.default.nextTick(function(){return Jb.emit("close")})}this.closed=!0;this._vol.close(this.fd,function(gc){gc?Jb.emit("error",gc):Jb.emit("close")});this.fd=null};$a.inherits(ha,Zb.Writable);Ai.WriteStream=ha;ha.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,function(ed,Jb){ed?(this.autoClose&&this.destroy&&this.destroy(),this.emit("error",ed)):(this.fd=Jb,this.emit("open",Jb))}.bind(this))};ha.prototype._write=function(ed,
Jb,gc){if(!(ed instanceof xa.Buffer))return this.emit("error",Error("Invalid data"));if("number"!==typeof this.fd)return this.once("open",function(){this._write(ed,Jb,gc)});var Kc=this;this._vol.write(this.fd,ed,0,ed.length,this.pos,function(Wd,Ye){if(Wd)return Kc.autoClose&&Kc.destroy&&Kc.destroy(),gc(Wd);Kc.bytesWritten+=Ye;gc()});void 0!==this.pos&&(this.pos+=ed.length)};ha.prototype._writev=function(ed,Jb){if("number"!==typeof this.fd)return this.once("open",function(){this._writev(ed,Jb)});for(var gc=
this,Kc=ed.length,Wd=Array(Kc),Ye=0,Zf=0;Zf<Kc;Zf++){var Yi=ed[Zf].chunk;Wd[Zf]=Yi;Ye+=Yi.length}Kc=xa.Buffer.concat(Wd);this._vol.write(this.fd,Kc,0,Kc.length,this.pos,function(Wk,Xk){if(Wk)return gc.destroy&&gc.destroy(),Jb(Wk);gc.bytesWritten+=Xk;Jb()});void 0!==this.pos&&(this.pos+=Ye)};ha.prototype._destroy=G.prototype._destroy;ha.prototype.close=G.prototype.close;ha.prototype.destroySoon=ha.prototype.end;var kq=function(ed){function Jb(gc){var Kc=ed.call(this)||this;Kc._filename="";Kc._filenameEncoded=
"";Kc._recursive=!1;Kc._encoding=md.ENCODING_UTF8;Kc._onNodeChange=function(){Kc._emit("change")};Kc._onParentChild=function(Wd){Wd.getName()===Kc._getName()&&Kc._emit("rename")};Kc._emit=function(Wd){Kc.emit("change",Wd,Kc._filenameEncoded)};Kc._persist=function(){Kc._timer=setTimeout(Kc._persist,1E6)};Kc._vol=gc;return Kc}Ha(Jb,ed);Jb.prototype._getName=function(){return this._steps[this._steps.length-1]};Jb.prototype.start=function(gc,Kc,Wd,Ye){void 0===Kc&&(Kc=!0);void 0===Wd&&(Wd=!1);void 0===
Ye&&(Ye=md.ENCODING_UTF8);this._filename=d(gc);this._steps=f(this._filename);this._filenameEncoded=(0,md.strToEncoding)(this._filename);this._recursive=Wd;this._encoding=Ye;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(Zf){throw Kc=Error("watch "+this._filename+" "+Zf.code),Kc.code=Zf.code,Kc.errno=Zf.code,Kc;}this._link.getNode().on("change",this._onNodeChange);this._link.on("child:add",this._onNodeChange);this._link.on("child:delete",this._onNodeChange);if(gc=this._link.parent)gc.setMaxListeners(gc.getMaxListeners()+
1),gc.on("child:delete",this._onParentChild);Kc&&this._persist()};Jb.prototype.close=function(){clearTimeout(this._timer);this._link.getNode().removeListener("change",this._onNodeChange);var gc=this._link.parent;gc&&gc.removeListener("child:delete",this._onParentChild)};return Jb}(Oa.EventEmitter);Ai.FSWatcher=kq;return Ai}function dm(e){throw Error(`Node.js fs ${e} is not supported by JSPM core in the browser`);}function KQ(e,h,l){let b=0;const c=new TextDecoder;np.watch(e,"utf8",()=>{const {size:g}=
np.fstatSync(h),a=fG.alloc(g-b);np.readSync(h,a,0,a.length,b);b=g;l(c.decode(a,{stream:!0}))})}function gG(e,h){if("file:"===e.protocol)return fQ(e);if("https:"===e.protocol||"http:"===e.protocol){const l="\\\\url\\"+e.href.replaceAll(/\//g,"\\\\");if(y0(l))return l;if(h)throw Error(`Cannot sync request URL ${e} via FS. JSPM FS support for network URLs requires using async FS methods or priming the MemFS cache first with an async request before a sync request.`);return(async()=>{var b=await fetch(e);
if(!b.ok)throw Error(`Unable to fetch ${e.href}, ${b.status}`);b=await b.arrayBuffer();z0(l,fG.from(b));return l})()}throw Error("URL "+e+" not supported in JSPM FS implementation.");}function Kk(e){LQ.call(this||hG,e)}Lc({D:Jc,G:ba,Q:Qw,X:It,Z:fz,_:Bb,a1:ew,a2:Lr,a3:Rt,a6:yr,a7:So,a8:Br,aA:lo,aB:hw,aC:mz,aE:Tn,aH:Wv,aI:yg,aJ:Gt,aP:Rw,aR:jf,aT:Pw,aU:$o,a_:Nw,ab:sc,ac:Ac,ad:rd,ae:Qj,af:Ek,aj:gd,ak:sb,al:Xb,am:nd,ao:Am,ap:To,ar:Wp,at:nm,au:Up,av:zr,ax:ap,ay:Ar,az:wu,b:Ij,b3:Pt,b4:ez,b6:xg,b7:en,bA:Gc,
bC:Sp,bE:Uy,bG:Qt,bH:Vv,bN:WB,bO:TB,bP:XB,bQ:PB,bR:VB,bW:VC,bY:Ot,ba:fA,bb:eA,bc:Sw,be:Xv,bf:sk,bg:Tp,bh:Et,bi:dn,bj:Er,bk:Gr,bl:UB,bm:SB,bn:wh,bo:bc,bp:Fr,bq:fw,br:QB,bs:RB,bt:Yj,bv:Ff,bw:Xc,by:vg,bz:fb,c:Ow,c1:dz,c2:se,c3:de,c4:vu,c6:async function(e=document.body){const {main:h,WORLD_CLASS:l=Hu,TITLE:b}=await pd.import("./loading-screen.cp-8b7813c4.js");if(!qo.default().world){let c=window.$world=window.$$world=new l({extent:Ij(window.innerWidth,window.innerHeight),name:b});c.stealFocus=!0;qo.default().setWorldRenderedOn(c,
e,window.prerenderNode)}System.trace=!1;h()},d:ai,g:Sk,h:Vl,i:ie,l:Nh,p:fs,q:il,r:Bm,s:bw,u:Kt,v:Jt,w:Xp,x:Nb,y:hb,z:Pc});var ks=window.lively.FreezerRuntime.recorderFor("lively.lang/closure.js");ks.evalJS=Lb;ks.parameterRegex=/function[^\(]*\(([^\)]*)\)|\(?([^\)=]*)\)?\s*=>/;var vn=Lc("$",function(){function e(h,l,b,c){rd(this,e);this.originalFunc=h;this.varMapping=l||{};this.setFuncSource(b||h);this.setFuncProperties(h||c)}Ac(e,null,[{key:"fromFunction",value:function(h,l){return new ks.Closure(h,
l||{})}},{key:"fromSource",value:function(h,l){return new this(null,l||{},h)}}]);Ac(e,[{key:"setFuncSource",value:function(h){return this.source=h="undefined"!==typeof lively&&lively.sourceTransform&&"function"===typeof lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder?lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder(h):String(h)}},{key:"getFuncSource",value:function(){return this.source||this.setFuncSource(this.originalFunc)}},{key:"hasFuncSource",value:function(){return this.source&&
!0}},{key:"getFunc",value:function(){return this.originalFunc||this.recreateFunc()}},{key:"getFuncProperties",value:function(){return this.funcProperties||(this.funcProperties={})}},{key:"setFuncProperties",value:function(h){var l=this.getFuncProperties(),b;for(b in h)h.hasOwnProperty(b)&&(l[b]=h[b])}},{key:"lookup",value:function(h){return this.varMapping[h]}},{key:"parameterNames",value:function(h){return"undefined"!==typeof lively&&lively.ast&&lively.ast.parseFunction?(lively.ast.parseFunction(h).params||
[]).map(function(l){return"Identifier"===l.type?l.name:l.left&&"Identifier"===l.left.type?l.left.name:null}).filter(Boolean):(h=ks.parameterRegex.exec(h))?(h[1]||h[2]||"").split(",").map(function(l){return l.trim()}):[]}},{key:"firstParameter",value:function(h){return this.parameterNames(h)[0]||null}},{key:"recreateFunc",value:function(){return this.recreateFuncFromSource(this.getFuncSource(),this.originalFunc)}},{key:"recreateFuncFromSource",value:function(h,l){l=[];var b="$super"===this.firstParameter(h);
for(c in this.varMapping)this.varMapping.hasOwnProperty(c)&&"this"!==c&&l.push("var "+c+" = this.varMapping."+c+";\n");var c="";0<l.length&&(c+=l.join("\n"));b&&(c+="(function superWrapperForClosure() { return ");c+="("+h+")";b&&(c+=".apply(this, [$super.bind(this)].concat(Array.from(arguments))) })");try{var g=ks.evalJS.call(this,c)||this.couldNotCreateFunc(c);this.addFuncProperties(g);return this.originalFunc=g}catch(a){throw h="Cannot create function "+a+" src: "+c,console.error(h),Error(h);}}},
{key:"addFuncProperties",value:function(h){var l=this.getFuncProperties(),b;for(b in l)l.hasOwnProperty(b)&&(h[b]=l[b]);this.addClosureInformation(h)}},{key:"couldNotCreateFunc",value:function(h){var l="Could not recreate closure from source: \n"+h;console.error(l);return function(){throw Error(l);}}},{key:"asFunction",value:function(){return this.recreateFunc()}},{key:"addClosureInformation",value:function(h){h.hasLivelyClosure=!0;h.livelyClosure=this;return h}},{key:"isLivelyClosure",get:function(){return!0}},
{key:"doNotSerialize",get:function(){return["originalFunc"]}}]);return e}());ks.Closure=vn;ks["default"]=vn;var ef=window.lively.FreezerRuntime.recorderFor("lively.lang/function.js");ef.Empty=wb;ef.K=Xa;ef.Null=Za;ef.False=Sb;ef.True=Cb;ef.notYetImplemented=Da;ef.all=zb;ef.own=db;ef.argumentNames=ib;ef.qualifiedMethodName=Ea;ef.extractBody=W;ef.timeToRun=T;ef.timeToRunN=ia;ef.delay=ka;ef.throttle=K;ef.debounce=ya;ef.throttleNamed=pb;ef.debounceNamed=La;ef.createQueue=eb;ef.workerWithCallbackQueue=
jb;ef._composeAsyncDefaultEndCallback=function(e,h){e&&console.error("lively.lang.composeAsync error",e)};ef.composeAsync=E;ef.compose=Wb;ef.flip=R;ef.withNull=xb;ef.waitFor=Ja;ef.waitForAll=Ga;ef.curry=sa;ef.wrap=Ub;ef.getOriginal=vc;ef.wrapperChain=Oc;ef.replaceMethodForOneCall=aa;ef.once=Ma;ef.either=qb;ef.eitherNamed=Vb;ef.evalJS=Lb;ef.fromString=Kb;ef.asScript=Db;ef.asScriptOf=Ra;ef.addToObject=N;ef.setLocalVarValue=va;ef.getVarMapping=Wa;ef.setProperty=pa;ef.functionNames=tb;ef.localFunctionNames=
ab;ef.logErrors=Ob;ef.logCompletion=yc;ef.logCalls=Ta;ef.traceCalls=Bd;ef.webkitStack=Eb;ef.objectMerge=tg;ef.safeToString=vh;ef.Closure=vn;ef._throttledByName={};ef._debouncedByName={};ef._queues={};ef._queueUntilCallbacks={};ef._eitherNameRegistry={};ef.binds=ef.asScript;var MQ=ef.binds;ef.Empty=wb;ef.K=Xa;ef.Null=Za;ef.False=Sb;ef.True=Cb;ef.notYetImplemented=Da;ef.withNull=xb;ef.all=zb;ef.own=db;ef.argumentNames=ib;ef.qualifiedMethodName=Ea;ef.extractBody=W;ef.timeToRun=T;ef.timeToRunN=ia;ef.delay=
ka;ef.throttle=K;ef.debounce=ya;ef.throttleNamed=pb;ef.debounceNamed=La;ef.createQueue=eb;ef.workerWithCallbackQueue=jb;ef.composeAsync=E;ef.compose=Wb;ef.waitFor=Ja;ef.waitForAll=Ga;ef.flip=R;ef.curry=sa;ef.wrap=Ub;ef.binds=MQ;ef.getOriginal=vc;ef.wrapperChain=Oc;ef.replaceMethodForOneCall=aa;ef.once=Ma;ef.either=qb;ef.eitherNamed=Vb;ef.evalJS=Lb;ef.fromString=Kb;ef.asScript=Db;ef.asScriptOf=Ra;ef.addToObject=N;ef.setLocalVarValue=va;ef.getVarMapping=Wa;ef.setProperty=pa;ef.functionNames=tb;ef.localFunctionNames=
ab;ef.logErrors=Ob;ef.logCompletion=yc;ef.logCalls=Ta;ef.traceCalls=Bd;ef.webkitStack=Eb;var wn=Object.freeze({__proto__:null,Empty:wb,K:Xa,Null:Za,False:Sb,True:Cb,notYetImplemented:Da,withNull:xb,all:zb,own:db,argumentNames:ib,qualifiedMethodName:Ea,extractBody:W,timeToRun:T,timeToRunN:ia,delay:ka,throttle:K,debounce:ya,throttleNamed:pb,debounceNamed:La,createQueue:eb,workerWithCallbackQueue:jb,composeAsync:E,compose:Wb,waitFor:Ja,waitForAll:Ga,flip:R,curry:sa,wrap:Ub,binds:MQ,getOriginal:vc,wrapperChain:Oc,
replaceMethodForOneCall:aa,once:Ma,either:qb,eitherNamed:Vb,evalJS:Lb,fromString:Kb,asScript:Db,asScriptOf:Ra,addToObject:N,setLocalVarValue:va,getVarMapping:Wa,setProperty:pa,functionNames:tb,localFunctionNames:ab,logErrors:Ob,logCompletion:yc,logCalls:Ta,traceCalls:Bd,webkitStack:Eb});Lc("f",wn);var oq=window.lively.FreezerRuntime.recorderFor("lively.lang/Group.js");oq.groupBy=Pd;var Iu=function(){function e(){rd(this,e)}Ac(e,[{key:"toArray",value:function(){return this.reduceGroups(function(h,
l,b){return h.concat([b])},[])}},{key:"forEach",value:function(h,l){var b=this;Object.keys(b).forEach(function(c){b[c].forEach(h.bind(l,c))});return b}},{key:"forEachGroup",value:function(h,l){var b=this;Object.keys(b).forEach(function(c){h.call(l,c,b[c])});return b}},{key:"map",value:function(h,l){var b=new oq.Group;this.forEachGroup(function(c,g){b[c]=g.map(h.bind(l,c))});return b}},{key:"mapGroups",value:function(h,l){var b=new oq.Group;this.forEachGroup(function(c,g){b[c]=h.call(l,c,g)});return b}},
{key:"keys",value:function(){return Object.keys(this)}},{key:"reduceGroups",value:function(h,l,b){this.forEachGroup(function(c,g){l=h.call(b,l,c,g)});return l}},{key:"count",value:function(){return this.reduceGroups(function(h,l,b){h[l]=b.length;return h},{})}}],[{key:"fromArray",value:function(h,l,b){for(var c=new oq.Group,g=0,a=h.length;g<a;g++){var d=l.call(b,h[g],g);oq.Group.prototype.hasOwnProperty(d)&&(d="_"+d);c[d]||(c[d]=[]);c[d].push(h[g])}return c}},{key:"by",get:function(){return oq.groupBy}}]);
return e}();oq.Group=Iu;oq["default"]=Iu;var Oe=window.lively.FreezerRuntime.recorderFor("lively.lang/array.js");Oe.range=fe;Oe.withN=Od;Oe.genN=Hd;Oe.binarySearchFor=Qc;Oe.findAndGet=Xd;Oe.filterByKey=oc;Oe.grep=rf;Oe.mask=Dd;Oe.reject=ld;Oe.rejectByKey=Td;Oe.without=gb;Oe.withoutAll=Vc;Oe.uniq=vb;Oe.uniqBy=cc;Oe.uniqByKey=ob;Oe.compact=ac;Oe.mutableCompact=ae;Oe.zip=qe;Oe.interpose=lc;Oe.invoke=nc;Oe.pluck=Yc;Oe.equals=fd;Oe.deepEquals=ua;Oe.isSorted=Ab;Oe.sortBy=Fa;Oe.sortByKey=za;Oe.reversed=
Ka;Oe.reMatches=Ib;Oe.first=C;Oe.last=Pb;Oe.intersect=da;Oe.union=wa;Oe.pushAt=ca;Oe.removeAt=ma;Oe.remove=u;Oe.pushAll=O;Oe.pushAllAt=P;Oe.pushIfNotIncluded=fa;Oe.replaceAt=Qa;Oe.clear=Ua;Oe.isSubset=Gb;Oe.doAndContinue=ta;Oe.nestedDelay=mc;Oe.swap=pc;Oe.rotate=zd;Oe.groupBy=Pd;Oe.groupByKey=bd;Oe.partition=Yd;Oe.batchify=le;Oe.toTuples=Be;Oe.combinationsPick=Ne;Oe.combinations=Re;Oe.take=nf;Oe.drop=af;Oe.takeWhile=yf;Oe.dropWhile=Ig;Oe.shuffle=re;Oe.max=Ld;Oe.min=fc;Oe.sum=wd;Oe.count=Ie;Oe.histogram=
ff;Oe.clone=Pe;Oe.filter=Gf;Oe.find=Vf;Oe.map=cd;Oe.flat=Y;Oe.flatMap=Ba;Oe.slice=mb;Oe.objectEquals=na;Oe.NullFunction=Za;Oe.Group=Iu;Oe.permutations=function(){function e(h,l){return h.length?h.flatMap(function(b,c){return e(h.slice(0,c).concat(h.slice(c+1)),l.concat([b]))}):[l]}return function(h){return e(h,[])}}();var NQ=Oe.permutations;Oe.range=fe;Oe.withN=Od;Oe.genN=Hd;Oe.binarySearchFor=Qc;Oe.findAndGet=Xd;Oe.filterByKey=oc;Oe.grep=rf;Oe.mask=Dd;Oe.reject=ld;Oe.rejectByKey=Td;Oe.without=gb;
Oe.withoutAll=Vc;Oe.uniq=vb;Oe.uniqBy=cc;Oe.uniqByKey=ob;Oe.compact=ac;Oe.mutableCompact=ae;Oe.zip=qe;Oe.interpose=lc;Oe.invoke=nc;Oe.pluck=Yc;Oe.equals=fd;Oe.deepEquals=ua;Oe.isSorted=Ab;Oe.sortBy=Fa;Oe.sortByKey=za;Oe.reversed=Ka;Oe.reMatches=Ib;Oe.first=C;Oe.last=Pb;Oe.intersect=da;Oe.union=wa;Oe.pushAt=ca;Oe.removeAt=ma;Oe.remove=u;Oe.pushAll=O;Oe.pushAllAt=P;Oe.pushIfNotIncluded=fa;Oe.replaceAt=Qa;Oe.clear=Ua;Oe.isSubset=Gb;Oe.doAndContinue=ta;Oe.nestedDelay=mc;Oe.swap=pc;Oe.rotate=zd;Oe.groupBy=
Pd;Oe.groupByKey=bd;Oe.partition=Yd;Oe.batchify=le;Oe.toTuples=Be;Oe.permutations=NQ;Oe.combinationsPick=Ne;Oe.combinations=Re;Oe.take=nf;Oe.drop=af;Oe.takeWhile=yf;Oe.dropWhile=Ig;Oe.shuffle=re;Oe.max=Ld;Oe.min=fc;Oe.sum=wd;Oe.count=Ie;Oe.histogram=ff;Oe.clone=Pe;Oe.flat=Y;Oe.filter=Gf;Oe.find=Vf;Oe.map=cd;Oe.flatMap=Ba;Oe.slice=mb;var mh=Object.freeze({__proto__:null,range:fe,withN:Od,genN:Hd,binarySearchFor:Qc,findAndGet:Xd,filterByKey:oc,grep:rf,mask:Dd,reject:ld,rejectByKey:Td,without:gb,withoutAll:Vc,
uniq:vb,uniqBy:cc,uniqByKey:ob,compact:ac,mutableCompact:ae,zip:qe,interpose:lc,invoke:nc,pluck:Yc,equals:fd,deepEquals:ua,isSorted:Ab,sortBy:Fa,sortByKey:za,reversed:Ka,reMatches:Ib,first:C,last:Pb,intersect:da,union:wa,pushAt:ca,removeAt:ma,remove:u,pushAll:O,pushAllAt:P,pushIfNotIncluded:fa,replaceAt:Qa,clear:Ua,isSubset:Gb,doAndContinue:ta,nestedDelay:mc,swap:pc,rotate:zd,groupBy:Pd,groupByKey:bd,partition:Yd,batchify:le,toTuples:Be,permutations:NQ,combinationsPick:Ne,combinations:Re,take:nf,
drop:af,takeWhile:yf,dropWhile:Ig,shuffle:re,max:Ld,min:fc,sum:wd,count:Ie,histogram:ff,clone:Pe,flat:Y,filter:Gf,find:Vf,map:cd,flatMap:Ba,slice:mb});Lc("j",mh);var Jf=window.lively.FreezerRuntime.recorderFor("lively.lang/object.js");Jf.print=Ca;Jf.indent=function(e,h,l){if(!l||0>=l)return e;for(;0<l;)l--,e=h+e;return e};Jf.isArray=Cc;Jf.isElement=Fc;Jf.isFunction=ud;Jf.isBoolean=ke;Jf.isString=ze;Jf.isNumber=xe;Jf.isUndefined=qd;Jf.isRegExp=We;Jf.isObject=of;Jf.isPrimitive=Ef;Jf.isEmpty=v;Jf.equals=
na;Jf.values=Hc;Jf.select=Nc;Jf.dissoc=Ud;Jf.addScript=ue;Jf.extend=bf;Jf.clone=pf;Jf.extract=mg;Jf.inspect=Zd;Jf.merge=tg;Jf.deepMerge=Sg;Jf.sortKeysWithBeforeAndAfterConstraints=oh;Jf.inherit=Hf;Jf.valuesInPropertyHierarchy=Bh;Jf.mergePropertyInHierarchy=ah;Jf.deepCopy=th;Jf.typeStringOf=Xg;Jf.isMutableType=ti;Jf.shortPrintStringOf=Af;Jf.safeToString=vh;Jf.asObject=Md;Jf.newKeyIn=Bf;Jf.adoptObject=xg;Jf.functionFromString=Kb;Jf.asScriptOf=Ra;Jf.argumentNames=ib;Jf.arrayDeepEquals=ua;Jf.isSubset=
Gb;Jf.getOwnPropertyDescriptors="function"===typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:function(e){var h={},l;for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&Object.defineProperty(h,l,{configurable:!0,enumerable:!0,writable:!0,value:Object.getOwnPropertyDescriptor(e,l)});return h};Jf.keys=Object.keys;Jf.setPrototypeOf="function"===typeof Object.setPrototypeOf?function(e,h){return Object.setPrototypeOf(e,h)}:function(e,h){return e.__proto__=h};var OQ=Jf.keys,PQ=
Jf.getOwnPropertyDescriptors,iG=Jf.setPrototypeOf;Jf.isArray=Cc;Jf.isElement=Fc;Jf.isFunction=ud;Jf.isBoolean=ke;Jf.isString=ze;Jf.isNumber=xe;Jf.isUndefined=qd;Jf.isRegExp=We;Jf.isObject=of;Jf.isPrimitive=Ef;Jf.isEmpty=v;Jf.equals=na;Jf.keys=OQ;Jf.values=Hc;Jf.select=Nc;Jf.dissoc=Ud;Jf.addScript=ue;Jf.extend=bf;Jf.clone=pf;Jf.extract=mg;Jf.inspect=Zd;Jf.merge=tg;Jf.deepMerge=Sg;Jf.inherit=Hf;Jf.valuesInPropertyHierarchy=Bh;Jf.mergePropertyInHierarchy=ah;Jf.sortKeysWithBeforeAndAfterConstraints=oh;
Jf.deepCopy=th;Jf.typeStringOf=Xg;Jf.shortPrintStringOf=Af;Jf.isMutableType=ti;Jf.safeToString=vh;Jf.asObject=Md;Jf.newKeyIn=Bf;Jf.getOwnPropertyDescriptors=PQ;Jf.adoptObject=xg;Jf.setPrototypeOf=iG;var nh=Object.freeze({__proto__:null,isArray:Cc,isElement:Fc,isFunction:ud,isBoolean:ke,isString:ze,isNumber:xe,isUndefined:qd,isRegExp:We,isObject:of,isPrimitive:Ef,isEmpty:v,equals:na,keys:OQ,values:Hc,select:Nc,dissoc:Ud,addScript:ue,extend:bf,clone:pf,extract:mg,inspect:Zd,merge:tg,deepMerge:Sg,inherit:Hf,
valuesInPropertyHierarchy:Bh,mergePropertyInHierarchy:ah,sortKeysWithBeforeAndAfterConstraints:oh,deepCopy:th,typeStringOf:Xg,shortPrintStringOf:Af,isMutableType:ti,safeToString:vh,asObject:Md,newKeyIn:Bf,getOwnPropertyDescriptors:PQ,adoptObject:xg,setPrototypeOf:iG});Lc("B",nh);var bx={};(function(){var e=[].slice;var h={0:{8:{_:"an"},9:{_:"an"},"-":{1:{1:{_:"an"}},4:{" ":{_:"a"},_:"an"},6:{"-":{_:"an"}},8:{_:"an"}}},1:{1:{0:{_:"a"},1:{_:"a"},2:{_:"a"},3:{_:"a"},4:{_:"a"},5:{_:"a"},6:{_:"a"},7:{_:"a"},
8:{_:"a"},9:{_:"a"},_:"an",".":{4:{_:"a"}}},8:{0:{0:{_:"an"},1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},7:{_:"an"},8:{_:"an"},9:{_:"an"},_:"a"},1:{"-":{_:"a"}," ":{_:"a"}},2:{"-":{_:"a"}," ":{_:"a"}},3:{"-":{_:"a"}," ":{_:"a"}},4:{"-":{_:"a"}," ":{_:"a"}},5:{"-":{_:"a"}," ":{_:"a"}},6:{"-":{_:"a"}," ":{_:"a"}},7:{"-":{_:"a"}," ":{_:"a"}},8:{"-":{_:"a"}," ":{_:"a"}},9:{"-":{_:"a"}," ":{_:"a"}},_:"an"}},8:{0:{0:{x:{_:"a"}}},9:{0:{_:"a"}},_:"an",",":{1:{_:"a"}}},"`":{a:{_:"an"}},
"\u00a3":{8:{_:"an"}},"\u221e":{_:"an"},a:{" ":{_:"a"},b:{o:{u:{t:{"-":{_:"an"}},_:"a"}}},g:{a:{i:{_:"a"}}},l:{"-":{I:{_:"a"}},g:{u:{_:"a"}},t:{h:{_:"a"}}},m:{o:{n:{_:"a"}}},n:{" ":{_:"a"},d:{a:{_:"an"},e:{_:"an"},r:{_:"an"},_:"a"},o:{t:{_:"a"}},y:{w:{_:"a"}}},p:{r:{e:{_:"a"}}},r:{e:{" ":{_:"a"},":":{_:"a"}},t:{"\u00ed":{_:"a"}}},_:"an"},A:{$:{_:"a"},A:{A:{_:"a"}},n:{d:{a:{l:{u:{c:{_:"a"}}}}}},r:{m:{a:{t:{_:"a"}}}},s:{t:{u:{r:{i:{a:{s:{_:"a"}}}}}}},t:{h:{l:{e:{t:{i:{_:"an"}}},o:{_:"an"},_:"a"}}},
U:{$:{_:"a"},D:{_:"a"},S:{C:{_:"a"}}},_:"an"},"\u00c1":{_:"an"},"\u00e1":{";":{_:"an"}},"\u00e0":{_:"an"},"\u00c4":{_:"an"},"\u0101":{_:"an"},"\u00c5":{_:"an"},"\u00e6":{_:"an"},"\u00c6":{n:{_:"a"},_:"an"},D:{"\u00fa":{n:{_:"a"}}},e:{".":{g:{_:"a"}},a:{c:{h:{" ":{_:"a"}}}},i:{t:{h:{e:{r:{" ":{_:"a"},".":{_:"a"}}}}}},l:{"-":{_:"a"},l:{a:{_:"a"}}},m:{p:{e:{z:{_:"a"}}}},n:{o:{u:{g:{_:"a"}}}},u:{p:{" ":{_:"an"}},_:"a"},w:{_:"a"},x:{i:{s:{t:{s:{_:"a"}}}}},_:"an"},E:{m:{p:{e:{z:{_:"a"}}}},n:{a:{m:{_:"a"}}},
s:{p:{a:{d:{_:"an"}},e:{_:"an"},o:{_:"an"},_:"a"}},u:{l:{_:"an"},_:"a"},U:{R:{_:"a"}},_:"an"},"\u00e9":{g:{_:"a"},t:{a:{_:"an"},u:{_:"an"},_:"a"},_:"an"},"\u00c9":{_:"an"},f:{"-":{_:"an"}," ":{_:"an"},"/":{_:"an"},M:{_:"an"},p:{_:"an"},t:{_:"an"}},F:{0:{_:"an"},1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},9:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"#":{_:"an"},",":{_:"an"},".":{_:"an"},"/":{_:"an"},"\u201d":{_:"an"},A:{C:{_:"a"},D:{_:"a"},I:{R:{_:"a"}},L:{_:"a"},
M:{_:"a"},N:{_:"a"},P:{_:"a"},Q:{_:"a"},R:{_:"a"},S:{_:"a"},T:{_:"a"},_:"an"},B:{_:"an"},C:{_:"an"},c:{_:"an"},D:{_:"an"},E:{C:{_:"an"},I:{_:"an"}},F:{" ":{_:"a"},_:"an"},f:{_:"an"},h:{_:"an"},H:{_:"an"},I:{A:{T:{_:"a"},_:"an"},D:{" ":{_:"an"}},R:{" ":{_:"an"}},S:{" ":{_:"an"}}},K:{_:"an"},L:{C:{_:"an"},N:{_:"an"},P:{_:"an"}},M:{R:{_:"a"},_:"an"},O:{" ":{_:"an"},I:{" ":{_:"an"}}},P:{".":{_:"a"},"?":{_:"a"},C:{"?":{_:"a"}},_:"an"},R:{C:{_:"an"},S:{_:"an"}},S:{_:"an"},T:{S:{_:"a"},T:{_:"a"},_:"an"},
U:{" ":{_:"an"},",":{_:"an"},".":{_:"an"}},V:{_:"an"},W:{D:{_:"a"},_:"an"},X:{_:"an"},Y:{_:"an"},"\u03c3":{_:"an"}},G:{h:{a:{e:{_:"an"},i:{_:"an"}}}},h:{"'":{_:"an"},"-":{U:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},",":{_:"an"},C:{_:"an"},e:{i:{r:{a:{_:"a"},_:"an"}}},i:{m:{s:{_:"an"}},s:{t:{o:{r:{i:{c:{_:"a"}}}}}}},o:{m:{a:{_:"an"},m:{_:"an"}},n:{e:{y:{_:"a"}},k:{_:"a"},v:{_:"a"},_:"an"},r:{s:{" ":{_:"an"}}},u:{r:{_:"an"}}},t:{t:{p:{" ":{_:"an"}},_:"a"},_:"an"}},H:{1:{_:"an"},2:{_:"an"},3:{_:"an"},
4:{_:"an"},5:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{A:{_:"a"},_:"an"},"+":{_:"an"},a:{b:{i:{l:{i:{t:{a:{t:{i:{o:{n:{s:{_:"an"}}}}}}}}}}}},B:{_:"an"},C:{_:"an"},D:{B:{_:"a"},_:"an"},e:{i:{r:{_:"an"}}},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{D:{_:"a"},G:{_:"a"},M:{_:"a"},P:{_:"a"},_:"an"},L:{A:{"-":{D:{_:"a"}}},_:"an"},M:{_:"an"},N:{_:"an"},o:{n:{d:{_:"a"},e:{s:{_:"an"},_:"a"},g:{_:"a"},k:{_:"a"},o:{l:{_:"a"}},_:"an"},u:{r:{_:"an"}}},O:{" ":{_:"an"},
V:{_:"an"}},P:{_:"an"},Q:{_:"an"},R:{T:{_:"a"},_:"an"},S:{" ":{_:"a"},R:{_:"a"},T:{_:"a"},_:"an"},T:{P:{_:"a"},_:"an"},V:{_:"an"},W:{T:{_:"an"}}},i:{".":{e:{_:"a"}},b:{n:{_:"a"}},f:{" ":{_:"a"}},i:{_:"a"},n:{c:{l:{u:{d:{i:{_:"a"}}}}},d:{i:{c:{a:{t:{e:{s:{_:"a"}}}}}}},s:{t:{e:{a:{d:{"?":{_:"an"}},_:"a"}}}}},s:{" ":{_:"a"},".":{_:"a"}},t:{" ":{_:"a"}},u:{_:"a"},_:"an"},I:{"-":{A:{_:"a"},I:{_:"a"}},I:{I:{_:"a"}},l:{b:{_:"a"}},M:{H:{_:"a"}},m:{a:{m:{s:{_:"a"}}}},R:{"\u00a3":{_:"a"}},s:{l:{a:{m:{" ":{_:"a"},
",":{_:"a"},".":{_:"a"}},n:{d:{s:{_:"a"}}}}}},_:"an"},"\u0130":{_:"an"},J:{i:{a:{n:{_:"a"},_:"an"}}},k:{u:{" ":{_:"an"}}},l:{" ":{_:"an"},'"':{_:"an"},p:{_:"an"}},L:{1:{_:"an"},2:{_:"an"},3:{_:"an"},5:{_:"an"},"'":{A:{_:"a"},_:"an"},"-":{a:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{_:"an"},"/":{_:"an"},a:{e:{_:"an"},o:{i:{g:{_:"an"}}}},A:{" ":{_:"an"},L:{_:"an"},P:{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{A:{_:"a"},E:{_:"a"},G:{_:"a"},O:{_:"a"},P:{_:"a"},T:{_:"a"},
_:"an"},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{R:{_:"an"}},L:{_:"an"},M:{X:{_:"a"},_:"an"},N:{_:"an"},o:{c:{h:{a:{_:"an"}}}},O:{E:{_:"an"}},P:{_:"an"},R:{_:"an"},S:{_:"an"},T:{_:"an"},U:{" ":{_:"an"}},V:{_:"an"},X:{_:"an"},Z:{_:"an"}},m:{"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},a:{k:{e:{s:{" ":{_:"an"}}}}},b:{_:"an"},e:{i:{n:{_:"an"}},n:{t:{i:{o:{n:{s:{_:"an"}}}}}}},f:{_:"an"},p:{_:"an"},R:{_:"an"},t:{_:"an"}},M:{1:{9:{0:{_:"an"},_:"a"},_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},
6:{_:"an"},7:{_:"an"},8:{_:"an"},9:{_:"an"},"'":{_:"an"},"-":{t:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{A:{".":{S:{_:"a"}}},_:"an"},"/":{_:"an"},A:{C:{_:"a"},D:{_:"a"},F:{_:"a"},G:{_:"a"},J:{_:"a"},L:{_:"a"},M:{_:"a"},N:{_:"a"},P:{_:"a"},R:{_:"a"},S:{_:"a"},T:{_:"a"},X:{_:"a"},Y:{_:"a"},_:"an"},B:{_:"an"},C:{_:"an"},D:{_:"an"},e:{"-":{_:"an"}},E:{d:{_:"an"},n:{_:"an"},P:{_:"an"}},F:{_:"an"},f:{_:"an"},G:{_:"an"},H:{_:"an"},h:{_:"an"},i:{e:{_:"an"}},I:{5:{_:"an"},6:{_:"an"},
" ":{_:"an"},A:{_:"an"},T:{_:"an"}},K:{_:"an"},L:{_:"an"},M:{T:{_:"a"},_:"an"},N:{_:"an"},o:{U:{_:"an"}},O:{" ":{_:"an"},T:{" ":{_:"an"}},U:{_:"an"}},P:{_:"an"},R:{_:"an"},S:{_:"an"},s:{c:{_:"an"}},T:{R:{_:"a"},_:"an"},U:{V:{_:"an"}},V:{_:"an"},X:{_:"an"}},N:{4:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{a:{_:"a"},S:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},",":{_:"an"},".":{Y:{_:"a"},_:"an"},"=":{_:"an"},"\u00b2":{_:"an"},a:{o:{_:"an"}},A:{" ":{_:"an"},A:{F:{_:"a"},_:"an"},I:{_:"an"},S:{L:{_:"an"}}},B:{_:"an"},
C:{_:"an"},D:{_:"an"},E:{A:{_:"an"},H:{_:"an"},S:{" ":{_:"an"}}},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{C:{_:"a"},L:{_:"a"},M:{H:{_:"an"},_:"a"},N:{_:"a"},S:{_:"a"},_:"an"},J:{C:{_:"an"}},K:{_:"an"},L:{S:{_:"a"},_:"an"},M:{_:"an"},N:{R:{_:"an"},T:{_:"an"}},P:{O:{V:{"-":{_:"an"}},_:"a"},_:"an"},R:{J:{_:"a"},T:{_:"a"},_:"an"},S:{W:{_:"a"},_:"an"},T:{$:{_:"a"},_:"an"},U:{S:{_:"an"}},V:{_:"an"},v:{_:"an"},W:{A:{_:"an"}},X:{_:"an"},Y:{P:{_:"an"},U:{_:"an"}}},n:{"-":{_:"an"},"\u2212":{_:"an"}," ":{_:"an"},
'"':{_:"an"},"&":{_:"an"},",":{_:"an"},"+":{_:"an"},"\u00d7":{_:"an"},d:{a:{_:"an"}},p:{a:{_:"an"}},t:{_:"an"},V:{_:"an"},W:{_:"an"}},o:{b:{r:{_:"a"}},c:{c:{u:{r:{s:{_:"a"}}}},h:{o:{_:"a"}}},f:{" ":{_:"a"}},n:{"-":{_:"an"},"/":{_:"an"},b:{_:"an"},c:{o:{_:"an"}},d:{_:"an"},e:{r:{_:"an"}},g:{_:"an"},i:{_:"an"},l:{_:"an"},m:{_:"an"},o:{_:"an"},r:{_:"an"},s:{_:"an"},t:{_:"an"},u:{_:"an"},w:{_:"an"},y:{_:"an"},_:"a"},r:{" ":{_:"a"},",":{_:"a"}},u:{i:{_:"a"}},_:"an"},O:{b:{e:{r:{s:{t:{" ":{_:"an"},l:{_:"an"}},
_:"a"}}}},l:{v:{_:"a"}},n:{e:{i:{_:"an"},_:"a"}},N:{E:{_:"a"}},o:{p:{_:"a"}},u:{i:{_:"a"}},_:"an"},"\u00d3":{_:"an"},"\u00d6":{_:"an"},"\u00f6":{_:"an"},"\u014c":{_:"an"},"\u014d":{_:"an"},P:{h:{o:{b:{_:"an"},i:{_:"an"}}}},r:{"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},".":{_:"an"},e:{f:{e:{r:{s:{_:"an"}}}}},f:{_:"an"},m:{_:"an"},s:{_:"an"}},R:{1:{0:{_:"a"},_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},
",":{_:"an"},".":{C:{_:"a"},_:"an"},"/":{_:"an"},A:{" ":{_:"an"},F:{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{" ":{_:"an"},R:{_:"an"}},F:{_:"an"},f:{_:"an"},G:{_:"an"},H:{S:{_:"an"}},I:{A:{_:"an"},C:{" ":{_:"an"}}},J:{_:"an"},K:{_:"an"},L:{" ":{_:"a"},_:"an"},M:{1:{_:"a"},_:"an"},N:{G:{_:"a"},_:"an"},O:{T:{_:"an"}},P:{_:"an"},Q:{_:"an"},R:{_:"an"},S:{" ":{_:"a"},")":{_:"a"},",":{_:"a"},".":{_:"a"},"?":{_:"a"},T:{_:"a"},_:"an"},T:{_:"an"},U:{_:"an"},V:{_:"an"},X:{_:"an"}},s:{"-":{_:"an"},'"':{_:"an"},
")":{_:"an"},",":{_:"an"},".":{_:"an"},a:{y:{s:{_:"an"}}},i:{c:{h:{_:"an"}}},p:{3:{_:"an"},r:{o:{t:{_:"an"}}}},s:{h:{_:"an"}},t:{a:{t:{e:{s:{" ":{_:"an"},":":{_:"an"}}}}}},v:{a:{_:"a"},e:{_:"a"},_:"an"}},S:{1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{W:{_:"a"},_:"an"},",":{_:"an"},".":{B:{_:"an"},M:{_:"an"},O:{_:"an"}},"\u201d":{_:"an"},A:{"-":{1:{_:"a"},_:"an"}," ":{_:"an"},C:{D:{_:"an"}},E:{_:"an"},S:{E:{_:"a"},_:"an"},
T:{" ":{_:"an"},B:{_:"an"}}},B:{_:"an"},C:{A:{" ":{_:"an"}},C:{_:"an"},M:{_:"an"},O:{" ":{_:"an"}},R:{A:{_:"a"},_:"an"},T:{_:"an"}},D:{_:"an"},E:{" ":{_:"an"},C:{O:{_:"a"},R:{_:"a"},_:"an"},I:{_:"an"},O:{_:"an"}},F:{_:"an"},G:{_:"an"},H:{2:{_:"an"},3:{_:"an"},"-":{_:"an"}},I:{" ":{_:"an"}},J:{_:"an"},K:{_:"an"},L:{A:{_:"a"},I:{_:"a"},O:{_:"a"},_:"an"},M:{A:{_:"a"},E:{" ":{_:"an"},_:"a"},I:{_:"a"},_:"an"},N:{A:{_:"a"},E:{_:"a"},O:{_:"a"},_:"an"},O:{"(":{_:"an"},A:{" ":{_:"an"},I:{_:"an"}},E:{_:"an"},
I:{_:"an"},S:{_:"an"},V:{_:"an"}},P:{A:{C:{_:"a"},D:{_:"a"},M:{_:"a"},N:{_:"a"},R:{_:"a"}},E:{" ":{_:"an"},_:"a"},I:{C:{_:"a"}},O:{_:"a"},U:{_:"a"},_:"an"},R:{_:"an"},S:{_:"an"},T:{"-":{_:"an"},A:{" ":{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},F:{_:"an"},L:{_:"an"},M:{_:"an"},S:{_:"an"},V:{_:"an"}},u:{r:{a:{" ":{_:"an"}}}},U:{B:{_:"a"},L:{_:"a"},N:{_:"a"},P:{_:"a"},S:{_:"a"},_:"an"},V:{_:"an"},W:{F:{_:"an"},P:{_:"an"},R:{_:"an"}},X:{S:{_:"a"},_:"an"}},t:{"-":{S:{_:"an"}},S:{_:"an"}},T:{a:{v:{e:{s:{_:"an"}}}},
"\u00e0":{_:"an"}},u:{"-":{_:"a"}," ":{_:"a"},'"':{_:"a"},".":{_:"a"},b:{e:{_:"an"},_:"a"},f:{_:"a"},k:{a:{_:"an"},_:"a"},l:{u:{_:"a"}},m:{" ":{_:"a"}},n:{" ":{_:"a"},a:{" ":{_:"a"},n:{a:{_:"an"},n:{_:"an"},s:{_:"an"},t:{_:"an"},_:"a"},r:{y:{_:"a"}}},e:{" ":{_:"a"}},i:{c:{o:{r:{p:{_:"an"}}}},d:{i:{_:"a"},_:"an"},m:{o:{_:"a"},_:"an"},n:{_:"an"},v:{o:{_:"an"}},_:"a"},l:{e:{s:{_:"a"}}}},p:{o:{_:"a"}},r:{a:{_:"a"},e:{_:"a"},i:{_:"a"},l:{_:"a"},o:{_:"a"}},s:{"-":{_:"an"}," ":{_:"an"},h:{_:"an"},_:"a"},
t:{m:{_:"an"},t:{_:"an"},_:"a"},v:{_:"a"},w:{_:"a"},_:"an"},U:{1:{_:"an"},"-":{B:{o:{_:"a"},_:"an"}},a:{_:"an"},b:{i:{_:"a"},_:"an"},D:{P:{"-":{_:"an"}}},d:{_:"an"},g:{l:{_:"an"}},h:{_:"an"},i:{_:"an"},l:{i:{_:"a"},_:"an"},m:{_:"an"},M:{N:{_:"an"}},n:{"-":{_:"an"},a:{n:{_:"a"},_:"an"},b:{_:"an"},c:{_:"an"},d:{_:"an"},e:{s:{_:"a"},_:"an"},f:{_:"an"},g:{_:"an"},h:{_:"an"},i:{d:{_:"an"},n:{_:"an"}},k:{_:"an"},l:{_:"an"},m:{_:"an"},n:{_:"an"},o:{_:"an"},p:{_:"an"},r:{_:"an"},s:{_:"an"},t:{e:{r:{s:{_:"a"}}},
_:"an"},u:{_:"an"},w:{_:"an"}},p:{_:"an"},r:{a:{_:"a"},i:{_:"a"},u:{g:{u:{a:{y:{a:{n:{"-":{_:"an"}}}}}}},k:{_:"an"},_:"a"},_:"an"},s:{h:{_:"an"},t:{_:"an"}},t:{n:{_:"an"},o:{"-":{_:"an"}},r:{_:"an"},t:{_:"an"}},x:{_:"an"},z:{_:"an"}},"\u00fc":{_:"an"},"\u00dc":{_:"an"},V:{I:{I:{_:"an"}}},x:{a:{_:"a"},e:{_:"a"},i:{_:"a"},o:{_:"a"},x:{_:"a"},y:{_:"a"},_:"an"},X:{a:{_:"a"},A:{_:"a"},e:{_:"a"},h:{_:"a"},i:{_:"a"},I:{V:{_:"a"},X:{_:"a"}},o:{_:"a"},u:{_:"a"},U:{_:"a"},V:{_:"a"},X:{" ":{_:"an"},_:"a"},y:{_:"a"},
_:"an"},Y:{p:{_:"an"}},"\u03b1":{_:"an"},"\u03b5":{_:"an"},"\u03c9":{_:"an"}};var l=function(b,c,g){null==c&&(c=h);null==g&&(g="a");if(null==b)return g;var a=b.slice(0,1);c=c[a];return null!=a&&null!=c?l(b.slice(1),c,c._||g):g};bx={find:l,articlize:function(){var b=1<=arguments.length?e.call(arguments,0):[];var c;var g=[];var a=0;for(c=b.length;a<c;a++){var d=b[a];null!=d&&g.push(l(d)+" "+d)}return 1===b.length?g[0]:g}}}).call(bx);var A0=bx;bx.find;bx.articlize;var De=window.lively.FreezerRuntime.recorderFor("lively.lang/string.js");
De.format=df;De.formatFromArray=y;De.indent=A;De.minIndent=H;De.changeIndent=Z;De.quote=M;De.articlize=qa;De.findArticle=Pa;De.print=Yb;De.printNested=$b;De.pad=zc;De.printTable=id;De.printTree=jd;De.toArray=kd;De.lines=be;De.paragraphs=te;De.nonEmptyLines=Ce;De.tokens=me;De.tableize=ve;De.unescapeCharacterEntities=qg;De.toQueryParams=Eg;De.base64EncodeUnicode=Wf;De.base64DecodeUnicode=$f;De.normalizePath=Lf;De.joinPath=jf;De.ensureFolder=wh;De.newUUID=yg;De.createDataURI=Gg;De.hashCode=zf;De.md5=
Kh;De.reMatches=cg;De.stringMatch=Ag;De.peekRight=Uf;De.peekLeft=Lh;De.lineIndexComputer=Mj;De.lineNumberToIndexesComputer=Dl;De.lineRanges=El;De.findLineWithIndexInLineRanges=pj;De.regexIndexOf=Dk;De.regexLastIndexOf=pk;De.diff=km;De.empty=Pm;De.startsWithVowel=lm;De.withDecimalPrecision=Qm;De.capitalize=mm;De.camelCaseString=Pl;De.camelize=Fn;De.decamelize=Gn;De.truncate=dl;De.truncateLeft=el;De.regExpEscape=nm;De.succ=ol;De.digitValue=om;De.longestCommonSubstring=fl;De.applyChange=Hn;De.applyChanges=
pm;De.levenshtein=qm;De.inspectObject=Zd;De.min=fc;De.last=Pb;De.articles=A0;De.features={repeat:!!String.prototype.repeat,includes:!!String.prototype.includes,startsWith:!!String.prototype.startsWith,endsWith:!!String.prototype.endsWith};De.pathDotRe=/\/\.\//g;De.pathDoubleDotRe=/\/[^\/]+\/\.\./;De.pathDoubleSlashRe=/(^|[^:])[\/]+/g;De.urlStartRe=/^[a-z0-9-_\.]+:\/\//;De.slashEndRe=/\/+$/;De.newUUIDTemplate="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";De.newUUIDRe=/[xy]/g;De.newUUIDReplacer=function(e){var h=
16*Math.random()|0;return("x"==e?h:h&3|8).toString(16)};De.includes=De.features.includes?function(e,h){return e.includes(h)}:function(e,h){return-1<e.indexOf(h)};De.include=De.includes;De.startsWith=De.features.startsWith?function(e,h){return e.startsWith(h)}:function(e,h){return 0===e.indexOf(h)};De.endsWith=De.features.endsWith?function(e,h){return e.endsWith(h)}:function(e,h){var l=e.length-h.length;return 0<=l&&e.lastIndexOf(h)===l};De.times=De.features.repeat?function(e,h){return e.repeat(h)}:
function(e,h){return 1>h?"":Array(h+1).join(e)};var QQ=De.includes,RQ=De.include,SQ=De.startsWith,TQ=De.endsWith,UQ=De.times;De.format=df;De.formatFromArray=y;De.indent=A;De.minIndent=H;De.changeIndent=Z;De.quote=M;De.articlize=qa;De.findArticle=Pa;De.print=Yb;De.printNested=$b;De.pad=zc;De.printTable=id;De.printTree=jd;De.toArray=kd;De.lines=be;De.paragraphs=te;De.nonEmptyLines=Ce;De.tokens=me;De.tableize=ve;De.unescapeCharacterEntities=qg;De.base64EncodeUnicode=Wf;De.base64DecodeUnicode=$f;De.toQueryParams=
Eg;De.normalizePath=Lf;De.joinPath=jf;De.newUUID=yg;De.createDataURI=Gg;De.hashCode=zf;De.md5=Kh;De.reMatches=cg;De.stringMatch=Ag;De.peekRight=Uf;De.peekLeft=Lh;De.lineIndexComputer=Mj;De.lineNumberToIndexesComputer=Dl;De.findLineWithIndexInLineRanges=pj;De.regexIndexOf=Dk;De.regexLastIndexOf=pk;De.lineRanges=El;De.diff=km;De.empty=Pm;De.includes=QQ;De.include=RQ;De.startsWith=SQ;De.startsWithVowel=lm;De.endsWith=TQ;De.withDecimalPrecision=Qm;De.capitalize=mm;De.camelCaseString=Pl;De.camelize=Fn;
De.truncate=dl;De.truncateLeft=el;De.regExpEscape=nm;De.succ=ol;De.digitValue=om;De.times=UQ;De.longestCommonSubstring=fl;De.applyChange=Hn;De.applyChanges=pm;De.levenshtein=qm;De.decamelize=Gn;De.ensureFolder=wh;var ji=Object.freeze({__proto__:null,format:df,formatFromArray:y,indent:A,minIndent:H,changeIndent:Z,quote:M,articlize:qa,findArticle:Pa,print:Yb,printNested:$b,pad:zc,printTable:id,printTree:jd,toArray:kd,lines:be,paragraphs:te,nonEmptyLines:Ce,tokens:me,tableize:ve,unescapeCharacterEntities:qg,
base64EncodeUnicode:Wf,base64DecodeUnicode:$f,toQueryParams:Eg,normalizePath:Lf,joinPath:jf,newUUID:yg,createDataURI:Gg,hashCode:zf,md5:Kh,reMatches:cg,stringMatch:Ag,peekRight:Uf,peekLeft:Lh,lineIndexComputer:Mj,lineNumberToIndexesComputer:Dl,findLineWithIndexInLineRanges:pj,regexIndexOf:Dk,regexLastIndexOf:pk,lineRanges:El,diff:km,empty:Pm,includes:QQ,include:RQ,startsWith:SQ,startsWithVowel:lm,endsWith:TQ,withDecimalPrecision:Qm,capitalize:mm,camelCaseString:Pl,camelize:Fn,truncate:dl,truncateLeft:el,
regExpEscape:nm,succ:ol,digitValue:om,times:UQ,longestCommonSubstring:fl,applyChange:Hn,applyChanges:pm,levenshtein:qm,decamelize:Gn,ensureFolder:wh});Lc("k",ji);var Xh=window.lively.FreezerRuntime.recorderFor("lively.lang/number.js");Xh.random=Ql;Xh.normalRandom=Rl;Xh.randomSmallerInteger=Rd;Xh.humanReadableByteSize=Je;Xh.average=Ve;Xh.averageInc=lf;Xh.median=fh;Xh.between=Wh;Xh.clamp=ki;Xh.sort=qk;Xh.parseLength=Nj;Xh.precision=kj;Xh.roundTo=dk;Xh.detent=Tj;Xh.toDegrees=Rm;Xh.toRadians=up;Xh.backoff=
Jq;Xh.interpolate=In;Xh.convertLength=function(){function e(h,l){if("cm"===l)return h;if("mm"===l)return.1*h;if("in"===l)return 2.54*h;if("px"===l)return h*e(1/96,"in");if("pt"===l)return h*e(1/72,"in");if("pc"===l)return h*e(12,"pt")}return function g(l,b,c){return b===c?l:"cm"===c?e(l,b):"cm"===b?l/e(1,c):g(g(l,b,"cm"),"cm",c)}}();var VQ=Xh.convertLength;Xh.random=Ql;Xh.normalRandom=Rl;Xh.randomSmallerInteger=Rd;Xh.humanReadableByteSize=Je;Xh.average=Ve;Xh.averageInc=lf;Xh.median=fh;Xh.between=
Wh;Xh.sort=qk;Xh.parseLength=Nj;Xh.convertLength=VQ;Xh.roundTo=dk;Xh.detent=Tj;Xh.toDegrees=Rm;Xh.toRadians=up;Xh.backoff=Jq;Xh.interpolate=In;Xh.clamp=ki;Xh.precision=kj;var Yk=Object.freeze({__proto__:null,random:Ql,normalRandom:Rl,randomSmallerInteger:Rd,humanReadableByteSize:Je,average:Ve,averageInc:lf,median:fh,between:Wh,sort:qk,parseLength:Nj,convertLength:VQ,roundTo:dk,detent:Tj,toDegrees:Rm,toRadians:up,backoff:Jq,interpolate:In,clamp:ki,precision:kj});Lc("n",Yk);var Sj=window.lively.FreezerRuntime.recorderFor("lively.lang/properties.js");
Sj.all=Eo;Sj.allPropertyDescriptors=Fo;Sj.allOwnPropertiesOrFunctions=Kq;Sj.own=Lq;Sj.forEachOwn=Mq;Sj.nameFor=Jn;Sj.values=vp;Sj.ownValues=Nq;Sj.any=Kn;Sj.allProperties=wp;Sj.hash=Oq;Sj.all=Eo;Sj.allOwnPropertiesOrFunctions=Kq;Sj.allPropertyDescriptors=Fo;Sj.own=Lq;Sj.forEachOwn=Mq;Sj.nameFor=Jn;Sj.values=vp;Sj.ownValues=Nq;Sj.any=Kn;Sj.allProperties=wp;Sj.hash=Oq;var op=Object.freeze({__proto__:null,all:Eo,allOwnPropertiesOrFunctions:Kq,allPropertyDescriptors:Fo,own:Lq,forEachOwn:Mq,nameFor:Jn,
values:vp,ownValues:Nq,any:Kn,allProperties:wp,hash:Oq});Lc("U",op);var Ln=window.lively.FreezerRuntime.recorderFor("lively.lang/date.js");Ln.format=Pq;Ln.equals=Qq;Ln.relativeTo=Mn;Ln.dateFormat=function(){var e=function(){var h=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,l=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,b=/[^-+\dA-Z]/g,c=function(g,a){g=String(g);for(a=a||2;g.length<a;)g=
"0"+g;return g};return function(g,a,d){var f=e;1!=arguments.length||"[object String]"!=Object.prototype.toString.call(g)||/\d/.test(g)||(a=g,g=void 0);g=g?new Date(g):new Date;if(isNaN(g))throw SyntaxError("invalid date");a=String(f.masks[a]||a||f.masks["default"]);"UTC:"==a.slice(0,4)&&(a=a.slice(4),d=!0);var k=d?"getUTC":"get",n=g[k+"Date"](),p=g[k+"Day"](),q=g[k+"Month"](),r=g[k+"FullYear"](),t=g[k+"Hours"](),w=g[k+"Minutes"](),x=g[k+"Seconds"]();k=g[k+"Milliseconds"]();var B=d?0:g.getTimezoneOffset(),
D={d:n,dd:c(n),ddd:f.i18n.dayNames[p],dddd:f.i18n.dayNames[p+7],m:q+1,mm:c(q+1),mmm:f.i18n.monthNames[q],mmmm:f.i18n.monthNames[q+12],yy:String(r).slice(2),yyyy:r,h:t%12||12,hh:c(t%12||12),H:t,HH:c(t),M:w,MM:c(w),s:x,ss:c(x),l:c(k,3),L:c(99<k?Math.round(k/10):k),t:12>t?"a":"p",tt:12>t?"am":"pm",T:12>t?"A":"P",TT:12>t?"AM":"PM",Z:d?"UTC":(String(g).match(l)||[""]).pop().replace(b,""),o:(0<B?"-":"+")+c(100*Math.floor(Math.abs(B)/60)+Math.abs(B)%60,4),S:["th","st","nd","rd"][3<n%10?0:(10!=n%100-n%10)*
n%10]};return a.replace(h,function(F){return F in D?D[F]:F.slice(1,F.length-1)})}}();e.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};e.i18n={dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ")};return e}();var WQ=Ln.dateFormat;Ln.format=Pq;Ln.equals=Qq;Ln.relativeTo=Mn;Ln.dateFormat=WQ;var ls=Object.freeze({__proto__:null,format:Pq,equals:Qq,relativeTo:Mn,dateFormat:WQ});Lc("b8",ls);var Mh=window.lively.FreezerRuntime.recorderFor("lively.lang/promise.js");Mh.promise=ai;Mh.delay=Sm;Mh.delayReject=xp;Mh.timeout=Rq;Mh.timeToRun=Sq;Mh.waitFor=
Go;Mh.deferred=Tq;Mh.convertCallbackFun=Uq;Mh.convertCallbackFunWithManyArgs=Us;Mh._chainResolveNext=Vs;Mh.chain=Ws;Mh.promise_finally=rm;Mh.parallel=Vq;Mh.waitForClosures={};Object.assign(Mh.promise,{delay:Mh.delay,delayReject:Mh.delayReject,timeout:Mh.timeout,waitFor:Mh.waitFor,deferred:Mh.deferred,convertCallbackFun:Mh.convertCallbackFun,convertCallbackFunWithManyArgs:Mh.convertCallbackFunWithManyArgs,chain:Mh.chain,"finally":Mh.promise_finally,parallel:Mh.parallel});Mh.promise=ai;Mh.delay=Sm;
Mh.delayReject=xp;Mh.timeout=Rq;Mh.timeToRun=Sq;Mh.waitFor=Go;Mh.deferred=Tq;Mh.convertCallbackFun=Uq;Mh.convertCallbackFunWithManyArgs=Us;Mh.chain=Ws;Mh["finally"]=rm;Mh.promise_finally=rm;Mh.parallel=Vq;Mh["default"]=ai;var ro=window.lively.FreezerRuntime.recorderFor("lively.lang/Path.js");ro.Path=Nh;ro.inspect=Zd;Object.assign(ro.Path.prototype,{get isPathAccessor(){return!0},fromPath:function(e){"string"===typeof e&&""!==e&&e!==this.splitter?(this._parts=e.split(this.splitter),this._path=e):Array.isArray(e)?
(this._parts=[].concat(e),this._path=e.join(this.splitter)):(this._parts=[],this._path="");return this},setSplitter:function(e){e&&(this.splitter=e);return this},map:function(e){this._mapper=e;return this},parts:function(){return this._parts},size:function(){return this._parts.length},slice:function(e,h){return ro.Path(this.parts().slice(e,h))},normalizePath:function(){return this._path},isRoot:function(e){return 0===this._parts.length},isIn:function(e){return this.isRoot()?!0:(e=this.get(e,-1))&&
e.hasOwnProperty(this._parts[this._parts.length-1])},equals:function(e){return e&&e.isPathAccessor&&this.parts().equals(e.parts())},isParentPathOf:function(e){e=e&&e.isPathAccessor?e:ro.Path(e);var h=this.parts();e=e.parts();for(var l=0;l<h.length;l++)if(h[l]!=e[l])return!1;return!0},relativePathTo:function(e){e=ro.Path(e);return this.isParentPathOf(e)?e.slice(this.size(),e.size()):void 0},del:function(e){if(this.isRoot())return!1;for(var h=0;h<this._parts.length-1;h++){var l=this._parts[h];if(e.hasOwnProperty(l))e=
e[l];else return!1}return delete e[this._parts[this._parts.length-1]]},withParentAndKeyDo:function(e,h,l){if(this.isRoot())return l(null,null);for(var b=0;b<this._parts.length-1;b++){var c=this._parts[b];if(!e.hasOwnProperty(c)||"object"!==Jc(e[c])&&"function"!==typeof e[c])if(h)e=e[c]={};else return l(null,c);else e=e[c]}return l(e,this._parts[this._parts.length-1])},set:function(e,h,l){return this.withParentAndKeyDo(e,l,function(b,c){return b?b[c]=h:void 0})},defineProperty:function(e,h,l){return this.withParentAndKeyDo(e,
l,function(b,c){return b?Object.defineProperty(b,c,h):void 0})},get:function(e,h){var l=this;return(h?this._parts.slice(0,h):this._parts).reduce(function(b,c){return b?l._mapper?l._mapper(c,b[c]):b[c]:b},e)},concat:function(e,h){return ro.Path(this.parts().concat(ro.Path(e,h).parts()))},toString:function(){return this.normalizePath()},serializeExpr:function(){return"lively.lang.Path("+ro.inspect(this.parts())+")"},watch:function(e){if(e&&!this.isRoot()){var h=e.target,l=this.get(h,-1),b=this.parts().slice(-1)[0],
c="propertyWatcher$"+b,g=l&&l.hasOwnProperty(c),a=e.uninstall,d=e.haltWhenChanged,f=e.showStack,k=l.__lookupGetter__(b),n=l.__lookupSetter__(b);h&&b&&l&&(a?g&&(delete l[b],l[b]=l[c],delete l[c]):g||(k||n?console.log(l+'["'+b+'"] is a getter/setter, watching not support'):(l[c]=l[b],l.__defineSetter__(b,function(p){var q=l[c];if(e.onSet)e.onSet(p,q);q=l+"."+b+" changed: "+q+" -> "+p;f&&(q+="\n"+("undefined"!==typeof lively?lively.printStack():console.trace()));e.verbose&&console.log(q);if(d)debugger;
return l[c]=p}),l.__defineGetter__(b,function(){if(e.onGet)e.onGet(l[c]);return l[c]}),console.log("Watcher for "+l+"."+b+" installed"))))}},debugFunctionWrapper:function(e){var h=e.target,l=this.get(h,-1),b=this.parts().slice(-1)[0],c=e.uninstall,g=void 0===e.haltWhenChanged?!0:e.haltWhenChanged;e.showStack;var a=(e=l&&b&&l[b])&&e.isDebugFunctionWrapper;h&&b&&e&&l&&(c?a&&(l[b]=l[b].debugTargetFunction,console.log("Uninstalled debugFunctionWrapper for "+l+"."+b)):a?console.log("debugFunctionWrapper for "+
l+"."+b+" already installed"):(h=l[b]=e.wrap(function(d){var f=Array.from(arguments);if(g)debugger;return f.shift().apply(l,f)}),h.isDebugFunctionWrapper=!0,h.debugTargetFunction=e,console.log("debugFunctionWrapper for "+l+"."+b+" installed")))}});ro["default"]=Nh;var Fj=window.lively.FreezerRuntime.recorderFor("lively.lang/graph.js");Fj.clone=Sl;Fj.without=Wq;Fj.hull=yp;Fj.subgraphReachableBy=Ho;Fj.invert=Io;Fj.sortByReference=Xq;Fj.reduce=Yq;Fj.random=Zq;Fj.range=fe;Fj.shuffle=re;Fj.withoutAll=
Vc;Fj.clone=Sl;Fj.without=Wq;Fj.hull=yp;Fj.subgraphReachableBy=Ho;Fj.invert=Io;Fj.sortByReference=Xq;Fj.reduce=Yq;Fj.random=Zq;var Ju=Object.freeze({__proto__:null,clone:Sl,without:Wq,hull:yp,subgraphReachableBy:Ho,invert:Io,sortByReference:Xq,reduce:Yq,random:Zq});Lc("aq",Ju);var wi=window.lively.FreezerRuntime.recorderFor("lively.lang/interval.js");wi.isInterval=zp;wi.sort=$q;wi.compare=Tm;wi.coalesce=ar;wi.coalesceOverlapping=Um;wi.mergeOverlapping=br;wi.intervalsInRangeDo=Nn;wi.intervalsInbetween=
Vm;wi.mapToMatchingIndexes=Tl;wi.benchmark=function(){function e(h,l,b){return"".concat(h.name," ").concat(wi.timeToRunN(function(){return h.apply(null,l,1E5)},b),"ms")}return["Friday, 20. July 2012:\ncoalesceOverlapping: 0.0003ms\nintervalsInbetween: 0.002ms\nmapToMatchingIndexes: 0.02ms","vs.\n"+new Date+":",e(wi.coalesceOverlapping,[[[9,10],[1,8],[3,7],[15,20],[14,21]]],1E5),e(wi.intervalsInbetween,[0,10,[[8,10],[0,2],[3,5]]],1E5),e(wi.mapToMatchingIndexes,[wi.range(0,1E3).map(function(h){return[h,
h+1]}),[[4,8],[500,504],[900,1004]]],1E3)].join("\n")};wi.range=fe;wi.timeToRunN=ia;wi.GLOB="undefined"!==typeof System?System.global:"undefined"!==typeof window?window:global;wi.isInterval=zp;wi.sort=$q;wi.compare=Tm;wi.coalesce=ar;wi.coalesceOverlapping=Um;wi.mergeOverlapping=br;wi.intervalsInRangeDo=Nn;wi.intervalsInbetween=Vm;wi.mapToMatchingIndexes=Tl;var jG=Object.freeze({__proto__:null,isInterval:zp,sort:$q,compare:Tm,coalesce:ar,coalesceOverlapping:Um,mergeOverlapping:br,intervalsInRangeDo:Nn,
intervalsInbetween:Vm,mapToMatchingIndexes:Tl}),Wm=window.lively.FreezerRuntime.recorderFor("lively.lang/array-projection.js");Wm.create=Ap;Wm.toArray=Bp;Wm.originalToProjectedIndex=Cp;Wm.projectedToOriginalIndex=cr;Wm.transformToIncludeIndex=Jo;Wm.create=Ap;Wm.toArray=Bp;Wm.originalToProjectedIndex=Cp;Wm.projectedToOriginalIndex=cr;Wm.transformToIncludeIndex=Jo;var kG=Object.freeze({__proto__:null,create:Ap,toArray:Bp,originalToProjectedIndex:Cp,projectedToOriginalIndex:cr,transformToIncludeIndex:Jo}),
pi=window.lively.FreezerRuntime.recorderFor("lively.lang/grid.js");pi.get=dr;pi.set=On;pi.getRow=Ko;pi.setRow=Lo;pi.getCol=er;pi.setCol=xc;pi.create=Bc;pi.mapCreate=Rc;pi.forEach=Ec;pi.map=Dc;pi.toObjects=sd;pi.tableFromObjects=ce;pi.benchmark=function(){var e=[],h=pi.create(1E3,200,1);var l=pi.timeToRunN(function(){pi.forEach(h,function(c){})},10);e.push("forEach: ".concat(l.toFixed(2),"ms"));l=pi.timeToRunN(function(){pi.map(h,function(c,g,a){return g+a+Math.round(100*Math.random())})},10);e.push("map: ".concat(l.toFixed(2),
"ms"));var b=pi.create(1E3,2E3);l=pi.timeToRunN(function(){b=Array(1E3);for(var c=0;1E3>c;c++)b[c]=Array(2E3);pi.forEach(h,function(g,a,d){b[a][d]=a+d+Math.round(100*Math.random())})},10);e.push("map with forEach: "+l+"ms");e.push("--= 2012-09-22 =--\nforEach: 14.9ms\nmap: 19.8ms\nmap with forEach: 38.7ms\n");return e.join("\n")};pi.arrayWithN=Od;pi.timeToRunN=ia;pi.get=dr;pi.set=On;pi.getRow=Ko;pi.setRow=Lo;pi.getCol=er;pi.setCol=xc;pi.create=Bc;pi.mapCreate=Rc;pi.forEach=Ec;pi.map=Dc;pi.toObjects=
sd;pi.tableFromObjects=ce;var pA=Object.freeze({__proto__:null,get:dr,set:On,getRow:Ko,setRow:Lo,getCol:er,setCol:xc,create:Bc,mapCreate:Rc,forEach:Ec,map:Dc,toObjects:sd,tableFromObjects:ce}),ll=window.lively.FreezerRuntime.recorderFor("lively.lang/tree.js");ll.prewalk=pe;ll.postwalk=He;ll.find=Ze;ll.filter=fg;ll.map=gg;ll.mapTree=Og;ll.detect=ll.find;var XQ=ll.detect;ll.prewalk=pe;ll.postwalk=He;ll.find=Ze;ll.detect=XQ;ll.filter=fg;ll.map=gg;ll.mapTree=Og;var pq=Object.freeze({__proto__:null,prewalk:pe,
postwalk:He,find:Ze,detect:XQ,filter:fg,map:gg,mapTree:Og});Lc("F",pq);hh.prototype=Object.create(null);vg.EventEmitter=vg;vg.usingDomains=!1;vg.prototype.domain=void 0;vg.prototype._events=void 0;vg.prototype._maxListeners=void 0;vg.defaultMaxListeners=10;vg.init=function(){this.domain=null;this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new hh,this._eventsCount=0);this._maxListeners=this._maxListeners||void 0};vg.prototype.setMaxListeners=function(e){if("number"!==
typeof e||0>e||isNaN(e))throw new TypeError('"n" argument must be a positive number');this._maxListeners=e;return this};vg.prototype.getMaxListeners=function(){return void 0===this._maxListeners?vg.defaultMaxListeners:this._maxListeners};vg.prototype.emit=function(e){var h,l;var b="error"===e;if(h=this._events)b=b&&null==h.error;else if(!b)return!1;var c=this.domain;if(b){h=arguments[1];if(c)h||(h=Error('Uncaught, unspecified "error" event')),h.domainEmitter=this,h.domain=c,h.domainThrown=!1,c.emit("error",
h);else{if(h instanceof Error)throw h;c=Error('Uncaught, unspecified "error" event. ('+h+")");c.context=h;throw c;}return!1}c=h[e];if(!c)return!1;h="function"===typeof c;var g=arguments.length;switch(g){case 1:if(h)c.call(this);else for(h=c.length,c=Li(c,h),b=0;b<h;++b)c[b].call(this);break;case 2:b=arguments[1];if(h)c.call(this,b);else for(h=c.length,c=Li(c,h),g=0;g<h;++g)c[g].call(this,b);break;case 3:b=arguments[1];g=arguments[2];if(h)c.call(this,b,g);else for(h=c.length,c=Li(c,h),l=0;l<h;++l)c[l].call(this,
b,g);break;case 4:b=arguments[1];g=arguments[2];l=arguments[3];if(h)c.call(this,b,g,l);else{h=c.length;c=Li(c,h);for(var a=0;a<h;++a)c[a].call(this,b,g,l)}break;default:b=Array(g-1);for(l=1;l<g;l++)b[l-1]=arguments[l];if(h)c.apply(this,b);else for(h=c.length,c=Li(c,h),g=0;g<h;++g)c[g].apply(this,b)}return!0};vg.prototype.addListener=function(e,h){return ph(this,e,h,!1)};vg.prototype.on=vg.prototype.addListener;vg.prototype.prependListener=function(e,h){return ph(this,e,h,!0)};vg.prototype.once=function(e,
h){if("function"!==typeof h)throw new TypeError('"listener" argument must be a function');this.on(e,qj(this,e,h));return this};vg.prototype.prependOnceListener=function(e,h){if("function"!==typeof h)throw new TypeError('"listener" argument must be a function');this.prependListener(e,qj(this,e,h));return this};vg.prototype.removeListener=function(e,h){var l;if("function"!==typeof h)throw new TypeError('"listener" argument must be a function');var b=this._events;if(!b)return this;var c=b[e];if(!c)return this;
if(c===h||c.listener&&c.listener===h)0===--this._eventsCount?this._events=new hh:(delete b[e],b.removeListener&&this.emit("removeListener",e,c.listener||h));else if("function"!==typeof c){var g=-1;for(l=c.length;0<l--;)if(c[l]===h||c[l].listener&&c[l].listener===h){var a=c[l].listener;g=l;break}if(0>g)return this;if(1===c.length){c[0]=void 0;if(0===--this._eventsCount)return this._events=new hh,this;delete b[e]}else{l=g+1;for(var d=c.length;l<d;g+=1,l+=1)c[g]=c[l];c.pop()}b.removeListener&&this.emit("removeListener",
e,a||h)}return this};vg.prototype.off=function(e,h){return this.removeListener(e,h)};vg.prototype.removeAllListeners=function(e){var h=this._events;if(!h)return this;if(!h.removeListener)return 0===arguments.length?(this._events=new hh,this._eventsCount=0):h[e]&&(0===--this._eventsCount?this._events=new hh:delete h[e]),this;if(0===arguments.length){h=Object.keys(h);for(var l=0,b;l<h.length;++l)b=h[l],"removeListener"!==b&&this.removeAllListeners(b);this.removeAllListeners("removeListener");this._events=
new hh;this._eventsCount=0;return this}h=h[e];if("function"===typeof h)this.removeListener(e,h);else if(h){do this.removeListener(e,h[h.length-1]);while(h[0])}return this};vg.prototype.listeners=function(e){var h=this._events;if(h)if(e=h[e])if("function"===typeof e)e=[e.listener||e];else{h=Array(e.length);for(var l=0;l<h.length;++l)h[l]=e[l].listener||e[l];e=h}else e=[];else e=[];return e};vg.listenerCount=function(e,h){return"function"===typeof e.listenerCount?e.listenerCount(h):fj.call(e,h)};vg.prototype.listenerCount=
fj;vg.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var ms=window.lively.FreezerRuntime.recorderFor("lively.lang/events.js");ms._events=vg;ms.isNode="undefined"!==typeof process&&process.versions&&process.versions.node;ms.makeEmitter=ms.isNode?function(e,h){if(e.on&&e.removeListener)return e;var l=ms._events;l||(l=System._nodeRequire("events"));Object.assign(e,l.EventEmitter.prototype);l.EventEmitter.call(e);h&&h.maxListenerLimit&&e.setMaxListeners(h.maxListenerLimit);
return e}:function(e){if(e.on&&e.removeListener)return e;e.listeners={};e.on=function(h,l){l&&(e.listeners[h]||(e.listeners[h]=[]),e.listeners[h].push(l))};e.once=function(h,l){function b(){e.removeListener(h,b);l.apply(this,arguments)}if(l)e.on(h,b)};e.removeListener=function(h,l){e.listeners[h]&&(e.listeners[h]=e.listeners[h].filter(function(b){return b!==l}))};e.removeAllListeners=function(h){e.listeners[h]&&(e.listeners[h]=[])};e.emit=function(){var h=Array.prototype.slice.call(arguments),l=h.shift();
(l=e.listeners[l])&&l.length&&l.forEach(function(b){try{b.apply(null,h)}catch(c){console.error("Error in event handler: %s",c.stack||String(c))}})};return e};var qA=ms.makeEmitter;ms.makeEmitter=qA;var ns=Object.freeze({__proto__:null,makeEmitter:qA}),Uj=window.lively.FreezerRuntime.recorderFor("lively.lang/messenger.js");Uj.create=pl;Uj.remove=u;Uj.pluck=Yc;Uj.makeEmitter=qA;Uj.newUUID=yg;Uj.OFFLINE="offline";Uj.ONLINE="online";Uj.CONNECTING="connecting";Uj.create=pl;var lG=Object.freeze({__proto__:null,
create:pl}),mk=Object.freeze({__proto__:null,commonjsGlobal:"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},getDefaultExportFromCjs:function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e},getDefaultExportFromNamespaceIfPresent:function(e){return e&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e},getDefaultExportFromNamespaceIfNotNamed:function(e){return e&&
Object.prototype.hasOwnProperty.call(e,"default")&&1===Object.keys(e).length?e["default"]:e},getAugmentedNamespace:Qk});Lc("a0",mk);var Xm=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/babel-plugin-transform-es2015-modules-systemjs/6.19.0/lib/index.js");Xm.requireLib=sm;Xm.commonjsHelpers=mk;Xm.lib={};Xm.hasRequiredLib=Xm.hasRequiredLib||void 0;Xm.__require=sm;Xm.requireLib=sm;var JI,HB=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,B0={extname:Ep,basename:py,
dirname:nv,sep:"/",delimiter:":",relative:oy,join:ny,isAbsolute:mv,normalize:fr,resolve:Dp},$V="b"==="ab".substr(-1)?function(e,h,l){return e.substr(h,l)}:function(e,h,l){0>h&&(h=e.length+h);return e.substr(h,l)},C0=Object.freeze({__proto__:null,resolve:Dp,normalize:fr,isAbsolute:mv,join:ny,relative:oy,sep:"/",delimiter:":",dirname:nv,basename:py,extname:Ep,"default":B0}),D0=Qk(C0),Pn="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},ry,E0=Object.freeze({__proto__:null,
endianness:qy,hostname:sy,loadavg:ty,uptime:uy,freemem:vy,totalmem:Qn,cpus:ov,type:wy,release:xy,networkInterfaces:yy,getNetworkInterfaces:pv,arch:zy,platform:xi,tmpDir:No,tmpdir:No,EOL:"\n","default":{EOL:"\n",arch:zy,platform:xi,tmpdir:No,tmpDir:No,networkInterfaces:yy,getNetworkInterfaces:pv,release:xy,type:wy,cpus:ov,totalmem:Qn,freemem:vy,uptime:uy,loadavg:ty,hostname:sy,endianness:qy}}),F0=Qk(E0),G0=Object.freeze({__proto__:null,"default":{},createWriteStream:void 0,createReadStream:void 0,
readFile:void 0,writeFile:void 0,exists:void 0,mkdir:void 0,rmdir:void 0,unlink:void 0,readdir:void 0,lstat:void 0,rename:void 0}),H0=Qk(G0),I0=Object.freeze({__proto__:null,"default":{}}),J0=Qk(I0),Rn=[],tm=[],bW="undefined"!==typeof Uint8Array?Uint8Array:Array,IB=!1,K0={}.toString,KI=Array.isArray||function(e){return"[object Array]"==K0.call(e)};Ff.TYPED_ARRAY_SUPPORT=void 0!==Pn.TYPED_ARRAY_SUPPORT?Pn.TYPED_ARRAY_SUPPORT:!0;Ff.poolSize=8192;Ff._augment=function(e){e.__proto__=Ff.prototype;return e};
Ff.from=function(e,h,l){return Zs(null,e,h,l)};Ff.TYPED_ARRAY_SUPPORT&&(Ff.prototype.__proto__=Uint8Array.prototype,Ff.__proto__=Uint8Array);Ff.alloc=function(e,h,l){Vj(e);e=0>=e?Fl(null,e):void 0!==h?"string"===typeof l?Fl(null,e).fill(h,l):Fl(null,e).fill(h):Fl(null,e);return e};Ff.allocUnsafe=function(e){return um(null,e)};Ff.allocUnsafeSlow=function(e){return um(null,e)};Ff.isBuffer=function(e){return null!=e&&(!!e._isBuffer||J(e)||"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&
J(e.slice(0,0)))};Ff.compare=function(e,h){if(!Ul(e)||!Ul(h))throw new TypeError("Arguments must be Buffers");if(e===h)return 0;for(var l=e.length,b=h.length,c=0,g=Math.min(l,b);c<g;++c)if(e[c]!==h[c]){l=e[c];b=h[c];break}return l<b?-1:b<l?1:0};Ff.isEncoding=function(e){switch(String(e).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};Ff.concat=function(e,h){if(!KI(e))throw new TypeError('"list" argument must be an Array of Buffers');
if(0===e.length)return Ff.alloc(0);var l;if(void 0===h)for(l=h=0;l<e.length;++l)h+=e[l].length;h=Ff.allocUnsafe(h);var b=0;for(l=0;l<e.length;++l){var c=e[l];if(!Ul(c))throw new TypeError('"list" argument must be an Array of Buffers');c.copy(h,b);b+=c.length}return h};Ff.byteLength=hi;Ff.prototype._isBuffer=!0;Ff.prototype.swap16=function(){var e=this.length;if(0!==e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var h=0;h<e;h+=2)Sn(this,h,h+1);return this};Ff.prototype.swap32=
function(){var e=this.length;if(0!==e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var h=0;h<e;h+=4)Sn(this,h,h+3),Sn(this,h+1,h+2);return this};Ff.prototype.swap64=function(){var e=this.length;if(0!==e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var h=0;h<e;h+=8)Sn(this,h,h+7),Sn(this,h+1,h+6),Sn(this,h+2,h+5),Sn(this,h+3,h+4);return this};Ff.prototype.toString=function(){var e=this.length|0;return 0===e?"":0===arguments.length?hr(this,0,e):
Cy.apply(this,arguments)};Ff.prototype.equals=function(e){if(!Ul(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===Ff.compare(this,e)};Ff.prototype.inspect=function(){var e="";0<this.length&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(e+=" ... "));return"<Buffer "+e+">"};Ff.prototype.compare=function(e,h,l,b,c){if(!Ul(e))throw new TypeError("Argument must be a Buffer");void 0===h&&(h=0);void 0===l&&(l=e?e.length:0);void 0===b&&(b=0);void 0===c&&
(c=this.length);if(0>h||l>e.length||0>b||c>this.length)throw new RangeError("out of range index");if(b>=c&&h>=l)return 0;if(b>=c)return-1;if(h>=l)return 1;h>>>=0;l>>>=0;b>>>=0;c>>>=0;if(this===e)return 0;var g=c-b,a=l-h,d=Math.min(g,a);b=this.slice(b,c);e=e.slice(h,l);for(h=0;h<d;++h)if(b[h]!==e[h]){g=b[h];a=e[h];break}return g<a?-1:a<g?1:0};Ff.prototype.includes=function(e,h,l){return-1!==this.indexOf(e,h,l)};Ff.prototype.indexOf=function(e,h,l){return ir(this,e,h,l,!0)};Ff.prototype.lastIndexOf=
function(e,h,l){return ir(this,e,h,l,!1)};Ff.prototype.write=function(e,h,l,b){if(void 0===h)b="utf8",l=this.length,h=0;else if(void 0===l&&"string"===typeof h)b=h,l=this.length,h=0;else if(isFinite(h))h|=0,isFinite(l)?(l|=0,void 0===b&&(b="utf8")):(b=l,l=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var c=this.length-h;if(void 0===l||l>c)l=c;if(0<e.length&&(0>l||0>h)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");
b||(b="utf8");for(c=!1;;)switch(b){case "hex":a:{h=Number(h)||0;b=this.length-h;l?(l=Number(l),l>b&&(l=b)):l=b;b=e.length;if(0!==b%2)throw new TypeError("Invalid hex string");l>b/2&&(l=b/2);for(b=0;b<l;++b){c=parseInt(e.substr(2*b,2),16);if(isNaN(c)){e=b;break a}this[h+b]=c}e=b}return e;case "utf8":case "utf-8":return jr(Fp(e,this.length-h),this,h,l);case "ascii":return jr(ct(e),this,h,l);case "latin1":case "binary":return jr(ct(e),this,h,l);case "base64":return jr(at(e),this,h,l);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=
e;c=this.length-h;for(var g=[],a=0;a<b.length&&!(0>(c-=2));++a){var d=b.charCodeAt(a);e=d>>8;d%=256;g.push(d);g.push(e)}return jr(g,this,h,l);default:if(c)throw new TypeError("Unknown encoding: "+b);b=(""+b).toLowerCase();c=!0}};Ff.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var LI=4096;Ff.prototype.slice=function(e,h){var l=this.length;e=~~e;h=void 0===h?l:~~h;0>e?(e+=l,0>e&&(e=0)):e>l&&(e=l);0>h?(h+=l,0>h&&(h=0)):h>l&&(h=l);h<e&&(h=e);if(Ff.TYPED_ARRAY_SUPPORT)h=
this.subarray(e,h),h.__proto__=Ff.prototype;else{l=h-e;h=new Ff(l,void 0);for(var b=0;b<l;++b)h[b]=this[b+e]}return h};Ff.prototype.readUIntLE=function(e,h,l){e|=0;h|=0;l||Wj(e,h,this.length);l=this[e];for(var b=1,c=0;++c<h&&(b*=256);)l+=this[e+c]*b;return l};Ff.prototype.readUIntBE=function(e,h,l){e|=0;h|=0;l||Wj(e,h,this.length);l=this[e+--h];for(var b=1;0<h&&(b*=256);)l+=this[e+--h]*b;return l};Ff.prototype.readUInt8=function(e,h){h||Wj(e,1,this.length);return this[e]};Ff.prototype.readUInt16LE=
function(e,h){h||Wj(e,2,this.length);return this[e]|this[e+1]<<8};Ff.prototype.readUInt16BE=function(e,h){h||Wj(e,2,this.length);return this[e]<<8|this[e+1]};Ff.prototype.readUInt32LE=function(e,h){h||Wj(e,4,this.length);return(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]};Ff.prototype.readUInt32BE=function(e,h){h||Wj(e,4,this.length);return 16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Ff.prototype.readIntLE=function(e,h,l){e|=0;h|=0;l||Wj(e,h,this.length);l=this[e];for(var b=
1,c=0;++c<h&&(b*=256);)l+=this[e+c]*b;l>=128*b&&(l-=Math.pow(2,8*h));return l};Ff.prototype.readIntBE=function(e,h,l){e|=0;h|=0;l||Wj(e,h,this.length);l=h;for(var b=1,c=this[e+--l];0<l&&(b*=256);)c+=this[e+--l]*b;c>=128*b&&(c-=Math.pow(2,8*h));return c};Ff.prototype.readInt8=function(e,h){h||Wj(e,1,this.length);return this[e]&128?-1*(255-this[e]+1):this[e]};Ff.prototype.readInt16LE=function(e,h){h||Wj(e,2,this.length);e=this[e]|this[e+1]<<8;return e&32768?e|4294901760:e};Ff.prototype.readInt16BE=
function(e,h){h||Wj(e,2,this.length);e=this[e+1]|this[e]<<8;return e&32768?e|4294901760:e};Ff.prototype.readInt32LE=function(e,h){h||Wj(e,4,this.length);return this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Ff.prototype.readInt32BE=function(e,h){h||Wj(e,4,this.length);return this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Ff.prototype.readFloatLE=function(e,h){h||Wj(e,4,this.length);return Ys(this,e,!0,23,4)};Ff.prototype.readFloatBE=function(e,h){h||Wj(e,4,this.length);return Ys(this,e,!1,23,
4)};Ff.prototype.readDoubleLE=function(e,h){h||Wj(e,8,this.length);return Ys(this,e,!0,52,8)};Ff.prototype.readDoubleBE=function(e,h){h||Wj(e,8,this.length);return Ys(this,e,!1,52,8)};Ff.prototype.writeUIntLE=function(e,h,l,b){e=+e;h|=0;l|=0;b||ne(this,e,h,l,Math.pow(2,8*l)-1,0);b=1;var c=0;for(this[h]=e&255;++c<l&&(b*=256);)this[h+c]=e/b&255;return h+l};Ff.prototype.writeUIntBE=function(e,h,l,b){e=+e;h|=0;l|=0;b||ne(this,e,h,l,Math.pow(2,8*l)-1,0);b=l-1;var c=1;for(this[h+b]=e&255;0<=--b&&(c*=256);)this[h+
b]=e/c&255;return h+l};Ff.prototype.writeUInt8=function(e,h,l){e=+e;h|=0;l||ne(this,e,h,1,255,0);Ff.TYPED_ARRAY_SUPPORT||(e=Math.floor(e));this[h]=e&255;return h+1};Ff.prototype.writeUInt16LE=function(e,h,l){e=+e;h|=0;l||ne(this,e,h,2,65535,0);Ff.TYPED_ARRAY_SUPPORT?(this[h]=e&255,this[h+1]=e>>>8):Gp(this,e,h,!0);return h+2};Ff.prototype.writeUInt16BE=function(e,h,l){e=+e;h|=0;l||ne(this,e,h,2,65535,0);Ff.TYPED_ARRAY_SUPPORT?(this[h]=e>>>8,this[h+1]=e&255):Gp(this,e,h,!1);return h+2};Ff.prototype.writeUInt32LE=
function(e,h,l){e=+e;h|=0;l||ne(this,e,h,4,4294967295,0);Ff.TYPED_ARRAY_SUPPORT?(this[h+3]=e>>>24,this[h+2]=e>>>16,this[h+1]=e>>>8,this[h]=e&255):Hp(this,e,h,!0);return h+4};Ff.prototype.writeUInt32BE=function(e,h,l){e=+e;h|=0;l||ne(this,e,h,4,4294967295,0);Ff.TYPED_ARRAY_SUPPORT?(this[h]=e>>>24,this[h+1]=e>>>16,this[h+2]=e>>>8,this[h+3]=e&255):Hp(this,e,h,!1);return h+4};Ff.prototype.writeIntLE=function(e,h,l,b){e=+e;h|=0;b||(b=Math.pow(2,8*l-1),ne(this,e,h,l,b-1,-b));b=0;var c=1,g=0;for(this[h]=
e&255;++b<l&&(c*=256);)0>e&&0===g&&0!==this[h+b-1]&&(g=1),this[h+b]=(e/c>>0)-g&255;return h+l};Ff.prototype.writeIntBE=function(e,h,l,b){e=+e;h|=0;b||(b=Math.pow(2,8*l-1),ne(this,e,h,l,b-1,-b));b=l-1;var c=1,g=0;for(this[h+b]=e&255;0<=--b&&(c*=256);)0>e&&0===g&&0!==this[h+b+1]&&(g=1),this[h+b]=(e/c>>0)-g&255;return h+l};Ff.prototype.writeInt8=function(e,h,l){e=+e;h|=0;l||ne(this,e,h,1,127,-128);Ff.TYPED_ARRAY_SUPPORT||(e=Math.floor(e));0>e&&(e=255+e+1);this[h]=e&255;return h+1};Ff.prototype.writeInt16LE=
function(e,h,l){e=+e;h|=0;l||ne(this,e,h,2,32767,-32768);Ff.TYPED_ARRAY_SUPPORT?(this[h]=e&255,this[h+1]=e>>>8):Gp(this,e,h,!0);return h+2};Ff.prototype.writeInt16BE=function(e,h,l){e=+e;h|=0;l||ne(this,e,h,2,32767,-32768);Ff.TYPED_ARRAY_SUPPORT?(this[h]=e>>>8,this[h+1]=e&255):Gp(this,e,h,!1);return h+2};Ff.prototype.writeInt32LE=function(e,h,l){e=+e;h|=0;l||ne(this,e,h,4,2147483647,-2147483648);Ff.TYPED_ARRAY_SUPPORT?(this[h]=e&255,this[h+1]=e>>>8,this[h+2]=e>>>16,this[h+3]=e>>>24):Hp(this,e,h,!0);
return h+4};Ff.prototype.writeInt32BE=function(e,h,l){e=+e;h|=0;l||ne(this,e,h,4,2147483647,-2147483648);0>e&&(e=4294967295+e+1);Ff.TYPED_ARRAY_SUPPORT?(this[h]=e>>>24,this[h+1]=e>>>16,this[h+2]=e>>>8,this[h+3]=e&255):Hp(this,e,h,!1);return h+4};Ff.prototype.writeFloatLE=function(e,h,l){l||Ip(this,e,h,4);Oj(this,e,h,!0,23,4);return h+4};Ff.prototype.writeFloatBE=function(e,h,l){l||Ip(this,e,h,4);Oj(this,e,h,!1,23,4);return h+4};Ff.prototype.writeDoubleLE=function(e,h,l){l||Ip(this,e,h,8);Oj(this,
e,h,!0,52,8);return h+8};Ff.prototype.writeDoubleBE=function(e,h,l){l||Ip(this,e,h,8);Oj(this,e,h,!1,52,8);return h+8};Ff.prototype.copy=function(e,h,l,b){l||(l=0);b||0===b||(b=this.length);h>=e.length&&(h=e.length);h||(h=0);0<b&&b<l&&(b=l);if(b===l||0===e.length||0===this.length)return 0;if(0>h)throw new RangeError("targetStart out of bounds");if(0>l||l>=this.length)throw new RangeError("sourceStart out of bounds");if(0>b)throw new RangeError("sourceEnd out of bounds");b>this.length&&(b=this.length);
e.length-h<b-l&&(b=e.length-h+l);var c=b-l;if(this===e&&l<h&&h<b)for(b=c-1;0<=b;--b)e[b+h]=this[b+l];else if(1E3>c||!Ff.TYPED_ARRAY_SUPPORT)for(b=0;b<c;++b)e[b+h]=this[b+l];else Uint8Array.prototype.set.call(e,this.subarray(l,l+c),h);return c};Ff.prototype.fill=function(e,h,l,b){if("string"===typeof e){"string"===typeof h?(b=h,h=0,l=this.length):"string"===typeof l&&(b=l,l=this.length);if(1===e.length){var c=e.charCodeAt(0);256>c&&(e=c)}if(void 0!==b&&"string"!==typeof b)throw new TypeError("encoding must be a string");
if("string"===typeof b&&!Ff.isEncoding(b))throw new TypeError("Unknown encoding: "+b);}else"number"===typeof e&&(e&=255);if(0>h||this.length<h||this.length<l)throw new RangeError("Out of range index");if(l<=h)return this;h>>>=0;l=void 0===l?this.length:l>>>0;e||(e=0);if("number"===typeof e)for(b=h;b<l;++b)this[b]=e;else for(e=Ul(e)?e:Fp((new Ff(e,b)).toString()),c=e.length,b=0;b<l-h;++b)this[b+h]=e[b%c];return this};var aW=/[^+\/0-9A-Za-z-_]/g,Jp=ja,Kp=Rb;"function"===typeof Pn.setTimeout&&(Jp=setTimeout);
"function"===typeof Pn.clearTimeout&&(Kp=clearTimeout);var Oo=[],dt=!1,kr,Dy=-1;kb.prototype.run=function(){this.fun.apply(null,this.array)};var Ku=Pn.performance||{},L0=Ku.now||Ku.mozNow||Ku.msNow||Ku.oNow||Ku.webkitNow||function(){return(new Date).getTime()},M0=new Date,MI=Lc("bB",{nextTick:fb,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:kc,addListener:kc,once:kc,off:kc,removeListener:kc,removeAllListeners:kc,emit:kc,binding:function(e){throw Error("process.binding is not supported");
},cwd:function(){return"/"},chdir:function(e){throw Error("process.chdir is not supported");},umask:function(){return 0},hrtime:function(e){var h=.001*L0.call(Ku),l=Math.floor(h);h=Math.floor(h%1*1E9);e&&(l-=e[0],h-=e[1],0>h&&(l--,h+=1E9));return[l,h]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-M0)/1E3}}),YQ=Lc("bx","function"===typeof Object.create?function(e,h){e.super_=h;e.prototype=Object.create(h.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:
function(e,h){e.super_=h;var l=function(){};l.prototype=h.prototype;e.prototype=new l;e.prototype.constructor=e}),cW=/%[sdj%]/g,Ey={},KB;ad.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};ad.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};var dW="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
N0=Object.freeze({__proto__:null,format:Mc,deprecate:Gc,debuglog:Xc,inspect:ad,isArray:Gj,isBoolean:zj,isNull:gl,isNullOrUndefined:og,isNumber:ek,isString:bj,isSymbol:Ym,isUndefined:Pj,isRegExp:ge,isObject:Ed,isDate:Kf,isError:Di,isFunction:rk,isPrimitive:cj,isBuffer:Hj,log:Zm,inherits:YQ,_extend:et,"default":{inherits:YQ,_extend:et,log:Zm,isBuffer:Hj,isPrimitive:cj,isFunction:rk,isError:Di,isDate:Kf,isObject:Ed,isRegExp:ge,isUndefined:Pj,isSymbol:Ym,isString:bj,isNumber:ek,isNullOrUndefined:og,isNull:gl,
isBoolean:zj,isArray:Gj,inspect:ad,deprecate:Gc,format:Mc,debuglog:Xc}}),O0=Qk(N0),Pg=window.lively.FreezerRuntime.recorderFor("lively.lang/worker.js");Pg.fork=$m;Pg.create=lr;Pg.commonjsHelpers=mk;Pg.createCommonjsRequire=my;Pg.require$$0=D0;Pg.require$$1=F0;Pg.require$$2=H0;Pg.require$$3=J0;Pg.require$$4=O0;Pg.makeEmitter=qA;Pg.newUUID=yg;Pg.waitFor=Ja;Pg.messengerCreate=pl;Pg.Closure=vn;Pg.isNodejs="undefined"!==typeof Pg.createCommonjsRequire("/lively.lang")&&"undefined"!==typeof process;Pg.WorkerSetup=
{loadDependenciesBrowser:function(e){importScripts.apply("undefined"!==typeof self?self:this,e.scriptsToLoad||[])},loadDependenciesNodejs:function(e){(global.lively||(global.lively={})).lang=Pg.createCommonjsRequire("/lively.lang")(Pg.require$$0.join(e.libLocation,"index"))},initBrowserGlobals:function(e){remoteWorker.send=function(h){postMessage(h)};e="undefined"!==typeof self?self:this;e=e.Global=e;e.window=e;e.console=e.console||function(){var h={};["log","error","warn"].forEach(function(l){h[l]=
function(){for(var b=arguments[0],c=1;c<arguments.length;c++)b=b.replace("%s",arguments[c]);remoteWorker.send({type:l,message:["[",l.toUpperCase(),"] ",b].join("")})}});return h}()},initOnMessageHandler:function(e){function h(l){l=l.data.data?l.data:l;if(remoteWorker.messenger)remoteWorker.messenger.onMessage(l);else"close"==l.action&&(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())}if(remoteWorker.on)remoteWorker.on("message",h);else remoteWorker.onmessage=h},initWorkerInterface:function(e){remoteWorker.callStringifiedFunction=
function(h,l,b){try{var c=eval("("+h+")")}catch(d){b(Error("Cannot create function from string: "+d.stack||d));return}h=c.length===l.length+1;var g=lively.lang.fun.once(function(d,f){remoteWorker.isBusy=!1;b(d,f)});remoteWorker.isBusy=!0;h&&l.push(g);try{var a=c.apply(remoteWorker,l.concat([g]))}catch(d){g(d,null);return}h||g(null,a)};remoteWorker.httpRequest=function(h){if(h.url){var l=new XMLHttpRequest,b=h.method||"GET";l.onreadystatechange=function(){4===l.readyState&&h.done&&h.done(l)};l.open(b,
h.url);l.send()}else console.log("Error, httpRequest needs url")};remoteWorker.terminateIfNotBusyIn=function(h){setTimeout(function(){remoteWorker.isBusy?remoteWorker.terminateIfNotBusyIn(h):(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())},h)}},initWorkerMessenger:function(e){if(!e.useMessenger)return null;if(!lively.lang.messenger)throw Error("worker.create requires messenger.js to be loaded!");if(!lively.lang.events)throw Error("worker.create requires events.js to be loaded!");
return remoteWorker.messenger=lively.lang.messenger.create({services:{remoteEval:function(h,l){try{var b=eval(h.data.expr)}catch(c){b=c.stack||c}l.answer(h,{result:String(b)})},run:function(h,l){var b=h.data.func,c=h.data.args;b?remoteWorker.callStringifiedFunction(b,c,function(g,a){l.answer(h,{error:g?String(g):null,result:a})}):l.answer(h,{error:"no funcString"})},close:function(h,l){l.answer(h,{status:"OK"});remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}},isOnline:function(){return!0},
send:function(h,l){remoteWorker.send(h);l()},listen:function(h){h()},close:function(h){remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}})}};Pg.BrowserWorker={create:function(e){e=e||{};if(!e.libLocation&&!e.scriptsToLoad){var h=document.querySelector('script[src$="worker.js"]');if(!h)throw Error('Cannot find library path to start worker. Use worker.create({libLocation: "..."}) to explicitly define the path!');e.libLocation=h.src.replace(/worker.js$/,"")}h=String(function(){self.onmessage=
function(l){if("setup"!==l.data.action)throw Error("expected setup to be first message but got "+JSON.stringify(l.data));l=l.data.options||{};initBrowserGlobals(l);loadDependenciesBrowser(l);initOnMessageHandler(l);initWorkerInterface(l);initWorkerMessenger(l);postMessage({workerReady:!0})};__FUNCTIONDECLARATIONS__}).split("__lvVarRecorder.").join("").replace("__FUNCTIONDECLARATIONS__",[Pg.WorkerSetup.initBrowserGlobals,Pg.WorkerSetup.loadDependenciesBrowser,Pg.WorkerSetup.initOnMessageHandler,Pg.WorkerSetup.initWorkerInterface,
Pg.WorkerSetup.initWorkerMessenger].join("\n"));h="("+Pg.Closure.fromSource(h).getFuncSource()+")();";h=new Worker(function(l){try{var b=new Blob([l],{type:"text/javascript"})}catch(c){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,b=new BlobBuilder,b.append(l),b=b.getBlob()}return("undefined"!==typeof webkitURL?webkitURL:URL).createObjectURL(b)}(h));(function(l,b){Pg.makeEmitter(b);l.scriptsToLoad||(l.scriptsToLoad="base.js events.js object.js collection.js function.js string.js number.js date.js messenger.js worker.js".split(" ").map(function(g){return l.libLocation+
g}));var c=Object.keys(l).reduce(function(g,a){"function"!==typeof l[a]&&(g[a]=l[a]);return g},{});b.onmessage=function(g){void 0!==g.data.workerReady?(b.ready=!!g.data.workerReady,b.ready?b.emit("ready"):b.emit("close")):b.emit("message",g.data)};b.errors=[];b.onerror=function(g){console.error(g);b.errors.push(g);b.emit("error",g)};b.postMessage({action:"setup",options:c})})(e,h);return h}};Pg.NodejsWorker={debug:!1,initCodeFileCreated:!1,create:function(e){e=e||{};var h,l=Pg.makeEmitter({ready:!1,
errors:[],postMessage:function(b){h?l.ready?h.send(b):l.emit("error",Error("nodejs worker process not ready or already closed")):l.emit("error",Error("nodejs worker process not yet created"))}});Pg.NodejsWorker.startWorker(e,function(b,c){b?(l.ready=!1,l.emit("error",b)):(h=c,h.on("message",function(g){Pg.NodejsWorker.debug&&console.log("[WORKER PARENT] got message:",g);l.emit("message",g)}),h.on("close",function(){console.log("[WORKER PARENT] worker closed");l.emit("close")}),h.on("error",function(g){console.log("[WORKER PARENT] error ",
g);l.errors.push(g);l.emit("error",g)}),l.ready=!0,l.emit("ready"))});return l},workerSetupFunction:function(){var e=process;console.log("[WORKER] Starting init");e.on("message",function(h){if("setup"!==h.action)throw Error("expected setup to be first message but got "+JSON.stringify(h.data));e.removeAllListeners("message");h=h.data.options||{};console.log("[WORKER] running setup with options",h);loadDependenciesNodejs(h);initOnMessageHandler(h);initWorkerInterface(h);initWorkerMessenger(h);e.send({workerReady:!0})});
__FUNCTIONDECLARATIONS__},ensureInitCodeFile:function(e,h,l){var b=Pg.require$$0,c=Pg.require$$2,g=b.join(Pg.require$$1.tmpDir(),"lively-nodejs-workers/"),a=b.join(g,"nodejs-worker-init.js");Pg.NodejsWorker.initCodeFileCreated?c.exists(a,function(d){d?l(null,a):Pg.NodejsWorker.createWorkerCodeFile(e,a,h,l)}):Pg.NodejsWorker.createWorkerCodeFile(e,a,h,l)},createWorkerCodeFile:function(e,h,l,b){var c=Pg.require$$2;e=Pg.require$$3.exec;e("mkdir -p "+Pg.require$$0.dirname(h),function(g,a,d){g?b(Error(["[WORKER PARENT] Could not create worker temp dir:",
a,d].join("\n"))):c.writeFile(h,l,function(f){Pg.NodejsWorker.debug&&console.log("worker code file %s created",h);Pg.NodejsWorker.initCodeFileCreated=!0;b(f,h)})})},startWorker:function(e,h){var l=Pg.require$$4,b=Pg.require$$3.fork,c=String(Pg.NodejsWorker.workerSetupFunction).replace("__FUNCTIONDECLARATIONS__",[Pg.WorkerSetup.loadDependenciesNodejs,Pg.WorkerSetup.initOnMessageHandler,Pg.WorkerSetup.initWorkerInterface,Pg.WorkerSetup.initWorkerMessenger].join("\n"));l=l.format("(%s)();\n",c);Pg.NodejsWorker.ensureInitCodeFile(e,
l,function(g,a){if(g)return h(g);var d=b(a,{});Pg.NodejsWorker.debug&&console.log("worker forked");d.on("message",function(f){"pong"===f.action?console.log("[WORKER pong] ",f):"log"===f.action&&console.log("[Message from WORKER] ",f.data)});d.once("message",function(f){Pg.NodejsWorker.debug&&console.log("worker setup done");h(null,d,f)});d.on("close",function(){Pg.NodejsWorker.debug&&console.log("[WORKER PARENT] worker closed")});d.send({action:"setup",data:{options:e}});global.WORKER=d})}};Pg.fork=
$m;Pg.create=lr;var rA=Object.freeze({__proto__:null,fork:$m,create:lr});Lc("bF",rA);var gf=window.lively.FreezerRuntime.recorderFor("lively.lang/index.js");gf.createLivelyLangObject=function(){return{chain:gf.chain,noConflict:gf.noConflict,installGlobals:gf.installGlobals,uninstallGlobals:gf.uninstallGlobals,globalInterfaceSpec:gf.globalInterfaceSpec,toString:function(){return"[object lively.lang]"}}};gf.globalInstall=ft;gf.chain=Tn;gf.createChain=function(e,h){return Object.keys(e).reduce(function(l,
b){l[b]=function(){var c=Array.from(arguments);c=e[b].apply(null,[h].concat(c));return gf.chain(c)};return l},{value:function(){return h}})};gf.noConflict=gt;gf.installGlobals=ht;gf.installProperty=function(e,h){if(!e.isIn(gf.livelyLang))throw h=Error("property not provided by lively.lang: "+e),console.error(h.stack||h),h;e=e.get(gf.livelyLang);if("function"===typeof e&&"prototype"===h.slice(-2,-1).toString()){var l=e;e=function(){var b=Array.prototype.slice.call(arguments);b.unshift(this);return l.apply(null,
b)};e.toString=function(){return l.toString()}}h.set(gf.GLOB,e,!0)};gf.uninstallGlobals=it;gf.string=ji;gf.num=Yk;gf.fun=wn;gf.Closure=vn;gf.arr=mh;gf.obj=nh;gf.properties=op;gf.date=ls;gf.promise=ai;gf.Path=Nh;gf.graph=Ju;gf.interval=jG;gf.arrayProjection=kG;gf.Group=Iu;gf.grid=pA;gf.tree=pq;gf.events=ns;gf.messenger=lG;gf.worker=rA;gf.worker=rA;gf.messenger=lG;gf.events=ns;gf.tree=pq;gf.grid=pA;gf.arrayProjection=kG;gf.interval=jG;gf.graph=Ju;gf.date=ls;gf.properties=op;gf.obj=nh;gf.arr=mh;gf.fun=
wn;gf.num=Yk;gf.string=ji;gf.Closure=vn;gf.promise=ai;gf.Path=Nh;gf.Group=Iu;gf.GLOB="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;gf.isNode="undefined"!==typeof process&&process.env&&"function"===typeof process.exit;gf.globalInterfaceSpec=[{action:"installMethods",target:"Array",sources:["arr"],methods:["genN","range","withN"]},{action:"installMethods",target:"Array.prototype",sources:["arr"],methods:"batchify clear clone compact doAndContinue equals filterByKey first grep groupByKey histogram intersect invoke last mask max min mutableCompact nestedDelay partition pluck pushAll pushAllAt pushAt pushIfNotIncluded reMatches reject rejectByKey remove removeAt replaceAt rotate shuffle sortBy sortByKey sum swap toTuples union uniq uniqBy uniqByKey without withoutAll zip".split(" "),
alias:[["select","filter"]]},{action:"installMethods",target:"Date",sources:["date"],methods:[]},{action:"installMethods",target:"Date.prototype",sources:["date"],methods:["equals","format","relativeTo"]},{action:"installMethods",target:"Function",sources:["fun"],methods:["fromString"]},{action:"installMethods",target:"Function.prototype",sources:["fun"],methods:"addToObject argumentNames asScript asScriptOf binds curry delay functionNames localFunctionNames getOriginal getVarMapping logCalls logCompletion logErrors qualifiedMethodName setProperty traceCalls wrap".split(" ")},
{action:"installMethods",target:"Number",sources:["num"],methods:[]},{action:"installMethods",target:"Number.prototype",sources:["num"],methods:["detent","randomSmallerInteger","roundTo","toDegrees","toRadians"]},{action:"installMethods",target:"Object",sources:["obj"],methods:"addScript clone deepCopy extend inherit isArray isBoolean isElement isEmpty isFunction isNumber isObject isRegExp isString isUndefined merge mergePropertyInHierarchy values valuesInPropertyHierarchy".split(" ")},{action:"installMethods",
target:"Object.prototype",sources:["obj"],methods:[]},{action:"installMethods",target:"String.prototype",sources:["string"],methods:"camelize capitalize digitValue empty hashCode include pad regExpEscape startsWithVowel succ times toArray toQueryParams truncate".split(" ")},{action:"installObject",target:"Numbers",source:"num",methods:"average between convertLength humanReadableByteSize median normalRandom parseLength random sort".split(" ")},{action:"installObject",target:"Properties",source:"properties",
methods:"all allOwnPropertiesOrFunctions allProperties any forEachOwn hash nameFor own ownValues values".split(" ")},{action:"installObject",target:"Strings",source:"string",methods:"camelCaseString createDataURI diff format formatFromArray indent lineIndexComputer lines md5 newUUID nonEmptyLines pad paragraphs peekLeft peekRight print printNested printTable printTree quote reMatches stringMatch tableize tokens unescapeCharacterEntities withDecimalPrecision".split(" ")},{action:"installObject",target:"Objects",
source:"obj",methods:"asObject equals inspect isMutableType safeToString shortPrintStringOf typeStringOf".split(" ")},{action:"installObject",target:"Functions",source:"fun",methods:"all compose composeAsync createQueue debounce debounceNamed either extractBody flip notYetImplemented once own throttle throttleNamed timeToRun timeToRunN waitFor workerWithCallbackQueue wrapperChain".split(" ")},{action:"installObject",target:"Grid",source:"grid"},{action:"installObject",target:"Interval",source:"interval"},
{action:"installObject",target:"lively.ArrayProjection",source:"arrayProjection"},{action:"installObject",target:"lively.Closure",source:"Closure"},{action:"installObject",target:"lively.Grouping",source:"Group"},{action:"installObject",target:"lively.PropertyPath",source:"Path"},{action:"installObject",target:"lively.Worker",source:"worker"},{action:"installObject",target:"lively.Class",source:"classHelper"}];var mG=gf.createLivelyLangObject();gf.livelyLang=mG;gf.livelyLang=mG;gf.globalInstall=ft;
gf.chain=Tn;gf.noConflict=gt;gf.installGlobals=ht;gf.uninstallGlobals=it;var ZQ=Object.freeze({__proto__:null,worker:rA,messenger:lG,events:ns,tree:pq,grid:pA,arrayProjection:kG,interval:jG,graph:Ju,date:ls,properties:op,obj:nh,arr:mh,fun:wn,num:Yk,string:ji,Closure:vn,promise:ai,Path:Nh,Group:Iu,livelyLang:mG,globalInstall:ft,chain:Tn,noConflict:gt,installGlobals:ht,uninstallGlobals:it});Lc("c7",ZQ);var $Q=window.lively.FreezerRuntime.recorderFor("lively.ast/generated/estree-visitor.js"),em=Lc("ai",
function(){function e(){rd(this,e)}Ac(e,[{key:"accept",value:function(h,l,b){if(!h)throw Error("Undefined AST node in Visitor.accept:\n  "+b.join(".")+"\n  "+h);if(!h.type)throw Error("Strangee AST node without type in Visitor.accept:\n  "+b.join(".")+"\n  "+JSON.stringify(h));switch(h.type){case "Node":return this.visitNode(h,l,b);case "SourceLocation":return this.visitSourceLocation(h,l,b);case "Position":return this.visitPosition(h,l,b);case "Program":return this.visitProgram(h,l,b);case "Function":return this.visitFunction(h,
l,b);case "Statement":return this.visitStatement(h,l,b);case "SwitchCase":return this.visitSwitchCase(h,l,b);case "CatchClause":return this.visitCatchClause(h,l,b);case "VariableDeclarator":return this.visitVariableDeclarator(h,l,b);case "Expression":return this.visitExpression(h,l,b);case "Property":return this.visitProperty(h,l,b);case "Pattern":return this.visitPattern(h,l,b);case "Super":return this.visitSuper(h,l,b);case "SpreadElement":return this.visitSpreadElement(h,l,b);case "TemplateElement":return this.visitTemplateElement(h,
l,b);case "Class":return this.visitClass(h,l,b);case "ClassBody":return this.visitClassBody(h,l,b);case "MethodDefinition":return this.visitMethodDefinition(h,l,b);case "ModuleDeclaration":return this.visitModuleDeclaration(h,l,b);case "ModuleSpecifier":return this.visitModuleSpecifier(h,l,b);case "JSXEmptyExpression":return this.visitJSXEmptyExpression(h,l,b);case "JSXExpressionContainer":return this.visitJSXExpressionContainer(h,l,b);case "JSXSpreadChild":return this.visitJSXSpreadChild(h,l,b);
case "JSXBoundaryElement":return this.visitJSXBoundaryElement(h,l,b);case "JSXAttribute":return this.visitJSXAttribute(h,l,b);case "JSXText":return this.visitJSXText(h,l,b);case "JSXOpeningFragment":return this.visitJSXOpeningFragment(h,l,b);case "JSXClosingFragment":return this.visitJSXClosingFragment(h,l,b);case "ChainElement":return this.visitChainElement(h,l,b);case "PropertyDefinition":return this.visitPropertyDefinition(h,l,b);case "PrivateIdentifier":return this.visitPrivateIdentifier(h,l,
b);case "Decorator":return this.visitDecorator(h,l,b);case "AccessorProperty":return this.visitAccessorProperty(h,l,b);case "Identifier":return this.visitIdentifier(h,l,b);case "Literal":return this.visitLiteral(h,l,b);case "ExpressionStatement":return this.visitExpressionStatement(h,l,b);case "BlockStatement":return this.visitBlockStatement(h,l,b);case "EmptyStatement":return this.visitEmptyStatement(h,l,b);case "DebuggerStatement":return this.visitDebuggerStatement(h,l,b);case "WithStatement":return this.visitWithStatement(h,
l,b);case "ReturnStatement":return this.visitReturnStatement(h,l,b);case "LabeledStatement":return this.visitLabeledStatement(h,l,b);case "BreakStatement":return this.visitBreakStatement(h,l,b);case "ContinueStatement":return this.visitContinueStatement(h,l,b);case "IfStatement":return this.visitIfStatement(h,l,b);case "SwitchStatement":return this.visitSwitchStatement(h,l,b);case "ThrowStatement":return this.visitThrowStatement(h,l,b);case "TryStatement":return this.visitTryStatement(h,l,b);case "WhileStatement":return this.visitWhileStatement(h,
l,b);case "DoWhileStatement":return this.visitDoWhileStatement(h,l,b);case "ForStatement":return this.visitForStatement(h,l,b);case "ForInStatement":return this.visitForInStatement(h,l,b);case "Declaration":return this.visitDeclaration(h,l,b);case "ThisExpression":return this.visitThisExpression(h,l,b);case "ArrayExpression":return this.visitArrayExpression(h,l,b);case "ObjectExpression":return this.visitObjectExpression(h,l,b);case "FunctionExpression":return this.visitFunctionExpression(h,l,b);
case "UnaryExpression":return this.visitUnaryExpression(h,l,b);case "UpdateExpression":return this.visitUpdateExpression(h,l,b);case "BinaryExpression":return this.visitBinaryExpression(h,l,b);case "AssignmentExpression":return this.visitAssignmentExpression(h,l,b);case "LogicalExpression":return this.visitLogicalExpression(h,l,b);case "MemberExpression":return this.visitMemberExpression(h,l,b);case "ConditionalExpression":return this.visitConditionalExpression(h,l,b);case "CallExpression":return this.visitCallExpression(h,
l,b);case "NewExpression":return this.visitNewExpression(h,l,b);case "SequenceExpression":return this.visitSequenceExpression(h,l,b);case "ArrowFunctionExpression":return this.visitArrowFunctionExpression(h,l,b);case "YieldExpression":return this.visitYieldExpression(h,l,b);case "TemplateLiteral":return this.visitTemplateLiteral(h,l,b);case "TaggedTemplateExpression":return this.visitTaggedTemplateExpression(h,l,b);case "AssignmentProperty":return this.visitAssignmentProperty(h,l,b);case "ObjectPattern":return this.visitObjectPattern(h,
l,b);case "ArrayPattern":return this.visitArrayPattern(h,l,b);case "RestElement":return this.visitRestElement(h,l,b);case "AssignmentPattern":return this.visitAssignmentPattern(h,l,b);case "ClassExpression":return this.visitClassExpression(h,l,b);case "MetaProperty":return this.visitMetaProperty(h,l,b);case "ImportDeclaration":return this.visitImportDeclaration(h,l,b);case "ImportSpecifier":return this.visitImportSpecifier(h,l,b);case "ImportDefaultSpecifier":return this.visitImportDefaultSpecifier(h,
l,b);case "ImportNamespaceSpecifier":return this.visitImportNamespaceSpecifier(h,l,b);case "ExportNamedDeclaration":return this.visitExportNamedDeclaration(h,l,b);case "ExportSpecifier":return this.visitExportSpecifier(h,l,b);case "AnonymousDefaultExportedFunctionDeclaration":return this.visitAnonymousDefaultExportedFunctionDeclaration(h,l,b);case "AnonymousDefaultExportedClassDeclaration":return this.visitAnonymousDefaultExportedClassDeclaration(h,l,b);case "ExportDefaultDeclaration":return this.visitExportDefaultDeclaration(h,
l,b);case "ExportAllDeclaration":return this.visitExportAllDeclaration(h,l,b);case "AwaitExpression":return this.visitAwaitExpression(h,l,b);case "JSXMemberExpression":return this.visitJSXMemberExpression(h,l,b);case "JSXNamespacedName":return this.visitJSXNamespacedName(h,l,b);case "JSXOpeningElement":return this.visitJSXOpeningElement(h,l,b);case "JSXClosingElement":return this.visitJSXClosingElement(h,l,b);case "JSXSpreadAttribute":return this.visitJSXSpreadAttribute(h,l,b);case "JSXElement":return this.visitJSXElement(h,
l,b);case "JSXFragment":return this.visitJSXFragment(h,l,b);case "ChainExpression":return this.visitChainExpression(h,l,b);case "ImportExpression":return this.visitImportExpression(h,l,b);case "RegExpLiteral":return this.visitRegExpLiteral(h,l,b);case "Directive":return this.visitDirective(h,l,b);case "FunctionBody":return this.visitFunctionBody(h,l,b);case "FunctionDeclaration":return this.visitFunctionDeclaration(h,l,b);case "VariableDeclaration":return this.visitVariableDeclaration(h,l,b);case "ForOfStatement":return this.visitForOfStatement(h,
l,b);case "ClassDeclaration":return this.visitClassDeclaration(h,l,b);case "JSXIdentifier":return this.visitJSXIdentifier(h,l,b);case "BigIntLiteral":return this.visitBigIntLiteral(h,l,b);case "StaticBlock":return this.visitStaticBlock(h,l,b)}throw Error("No visit function in AST visitor Visitor for:\n  "+b.join(".")+"\n  "+JSON.stringify(h));}},{key:"visitNode",value:function(h,l,b){return h}},{key:"visitSourceLocation",value:function(h,l,b){h.start=this.accept(h.start,l,b.concat(["start"]));h.end=
this.accept(h.end,l,b.concat(["end"]));return h}},{key:"visitPosition",value:function(h,l,b){return h}},{key:"visitProgram",value:function(h,l,b){for(var c=[],g=0;g<h.body.length;g++){var a=h.body[g];a=a?this.accept(a,l,b.concat(["body",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.body=c;return h}},{key:"visitFunction",value:function(h,l,b){h.id&&(h.id=this.accept(h.id,l,b.concat(["id"])));for(var c=[],g=0;g<h.params.length;g++){var a=h.params[g];a=a?this.accept(a,l,b.concat(["params",g])):
a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.params=c;h.body=this.accept(h.body,l,b.concat(["body"]));return h}},{key:"visitStatement",value:function(h,l,b){return h}},{key:"visitSwitchCase",value:function(h,l,b){h.test&&(h.test=this.accept(h.test,l,b.concat(["test"])));for(var c=[],g=0;g<h.consequent.length;g++){var a=h.consequent[g];a=a?this.accept(a,l,b.concat(["consequent",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.consequent=c;return h}},{key:"visitCatchClause",value:function(h,
l,b){h.param&&(h.param=this.accept(h.param,l,b.concat(["param"])));h.body=this.accept(h.body,l,b.concat(["body"]));return h}},{key:"visitVariableDeclarator",value:function(h,l,b){h.id=this.accept(h.id,l,b.concat(["id"]));h.init&&(h.init=this.accept(h.init,l,b.concat(["init"])));return h}},{key:"visitExpression",value:function(h,l,b){return h}},{key:"visitProperty",value:function(h,l,b){h.key=this.accept(h.key,l,b.concat(["key"]));h.value=this.accept(h.value,l,b.concat(["value"]));return h}},{key:"visitPattern",
value:function(h,l,b){return h}},{key:"visitSuper",value:function(h,l,b){return h}},{key:"visitSpreadElement",value:function(h,l,b){h.argument=this.accept(h.argument,l,b.concat(["argument"]));return h}},{key:"visitTemplateElement",value:function(h,l,b){return h}},{key:"visitClass",value:function(h,l,b){h.id&&(h.id=this.accept(h.id,l,b.concat(["id"])));h.superClass&&(h.superClass=this.accept(h.superClass,l,b.concat(["superClass"])));h.body=this.accept(h.body,l,b.concat(["body"]));for(var c=[],g=0;g<
h.decorators.length;g++){var a=h.decorators[g];a=a?this.accept(a,l,b.concat(["decorators",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.decorators=c;return h}},{key:"visitClassBody",value:function(h,l,b){for(var c=[],g=0;g<h.body.length;g++){var a=h.body[g];a=a?this.accept(a,l,b.concat(["body",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.body=c;return h}},{key:"visitMethodDefinition",value:function(h,l,b){h.key=this.accept(h.key,l,b.concat(["key"]));h.value=this.accept(h.value,l,
b.concat(["value"]));for(var c=[],g=0;g<h.decorators.length;g++){var a=h.decorators[g];a=a?this.accept(a,l,b.concat(["decorators",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.decorators=c;return h}},{key:"visitModuleDeclaration",value:function(h,l,b){return h}},{key:"visitModuleSpecifier",value:function(h,l,b){h.local=this.accept(h.local,l,b.concat(["local"]));return h}},{key:"visitJSXEmptyExpression",value:function(h,l,b){return h}},{key:"visitJSXExpressionContainer",value:function(h,l,
b){h.expression=this.accept(h.expression,l,b.concat(["expression"]));return h}},{key:"visitJSXSpreadChild",value:function(h,l,b){h.expression=this.accept(h.expression,l,b.concat(["expression"]));return h}},{key:"visitJSXBoundaryElement",value:function(h,l,b){h.name=this.accept(h.name,l,b.concat(["name"]));return h}},{key:"visitJSXAttribute",value:function(h,l,b){h.name=this.accept(h.name,l,b.concat(["name"]));h.value&&(h.value=this.accept(h.value,l,b.concat(["value"])));return h}},{key:"visitJSXText",
value:function(h,l,b){return h}},{key:"visitJSXOpeningFragment",value:function(h,l,b){return h}},{key:"visitJSXClosingFragment",value:function(h,l,b){return h}},{key:"visitChainElement",value:function(h,l,b){return h}},{key:"visitPropertyDefinition",value:function(h,l,b){h.key=this.accept(h.key,l,b.concat(["key"]));h.value&&(h.value=this.accept(h.value,l,b.concat(["value"])));for(var c=[],g=0;g<h.decorators.length;g++){var a=h.decorators[g];a=a?this.accept(a,l,b.concat(["decorators",g])):a;Array.isArray(a)?
c.push.apply(c,a):c.push(a)}h.decorators=c;return h}},{key:"visitPrivateIdentifier",value:function(h,l,b){return h}},{key:"visitDecorator",value:function(h,l,b){h.expression=this.accept(h.expression,l,b.concat(["expression"]));return h}},{key:"visitAccessorProperty",value:function(h,l,b){h.key=this.accept(h.key,l,b.concat(["key"]));h.value&&(h.value=this.accept(h.value,l,b.concat(["value"])));for(var c=[],g=0;g<h.decorators.length;g++){var a=h.decorators[g];a=a?this.accept(a,l,b.concat(["decorators",
g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.decorators=c;return h}},{key:"visitIdentifier",value:function(h,l,b){return h}},{key:"visitLiteral",value:function(h,l,b){return h}},{key:"visitExpressionStatement",value:function(h,l,b){h.expression=this.accept(h.expression,l,b.concat(["expression"]));return h}},{key:"visitBlockStatement",value:function(h,l,b){for(var c=[],g=0;g<h.body.length;g++){var a=h.body[g];a=a?this.accept(a,l,b.concat(["body",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.body=
c;return h}},{key:"visitEmptyStatement",value:function(h,l,b){return h}},{key:"visitDebuggerStatement",value:function(h,l,b){return h}},{key:"visitWithStatement",value:function(h,l,b){h.object=this.accept(h.object,l,b.concat(["object"]));h.body=this.accept(h.body,l,b.concat(["body"]));return h}},{key:"visitReturnStatement",value:function(h,l,b){h.argument&&(h.argument=this.accept(h.argument,l,b.concat(["argument"])));return h}},{key:"visitLabeledStatement",value:function(h,l,b){h.label=this.accept(h.label,
l,b.concat(["label"]));h.body=this.accept(h.body,l,b.concat(["body"]));return h}},{key:"visitBreakStatement",value:function(h,l,b){h.label&&(h.label=this.accept(h.label,l,b.concat(["label"])));return h}},{key:"visitContinueStatement",value:function(h,l,b){h.label&&(h.label=this.accept(h.label,l,b.concat(["label"])));return h}},{key:"visitIfStatement",value:function(h,l,b){h.test=this.accept(h.test,l,b.concat(["test"]));h.consequent=this.accept(h.consequent,l,b.concat(["consequent"]));h.alternate&&
(h.alternate=this.accept(h.alternate,l,b.concat(["alternate"])));return h}},{key:"visitSwitchStatement",value:function(h,l,b){h.discriminant=this.accept(h.discriminant,l,b.concat(["discriminant"]));for(var c=[],g=0;g<h.cases.length;g++){var a=h.cases[g];a=a?this.accept(a,l,b.concat(["cases",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.cases=c;return h}},{key:"visitThrowStatement",value:function(h,l,b){h.argument=this.accept(h.argument,l,b.concat(["argument"]));return h}},{key:"visitTryStatement",
value:function(h,l,b){h.block=this.accept(h.block,l,b.concat(["block"]));h.handler&&(h.handler=this.accept(h.handler,l,b.concat(["handler"])));h.finalizer&&(h.finalizer=this.accept(h.finalizer,l,b.concat(["finalizer"])));return h}},{key:"visitWhileStatement",value:function(h,l,b){h.test=this.accept(h.test,l,b.concat(["test"]));h.body=this.accept(h.body,l,b.concat(["body"]));return h}},{key:"visitDoWhileStatement",value:function(h,l,b){h.body=this.accept(h.body,l,b.concat(["body"]));h.test=this.accept(h.test,
l,b.concat(["test"]));return h}},{key:"visitForStatement",value:function(h,l,b){h.init&&(h.init=this.accept(h.init,l,b.concat(["init"])));h.test&&(h.test=this.accept(h.test,l,b.concat(["test"])));h.update&&(h.update=this.accept(h.update,l,b.concat(["update"])));h.body=this.accept(h.body,l,b.concat(["body"]));return h}},{key:"visitForInStatement",value:function(h,l,b){h.left=this.accept(h.left,l,b.concat(["left"]));h.right=this.accept(h.right,l,b.concat(["right"]));h.body=this.accept(h.body,l,b.concat(["body"]));
return h}},{key:"visitDeclaration",value:function(h,l,b){return h}},{key:"visitThisExpression",value:function(h,l,b){return h}},{key:"visitArrayExpression",value:function(h,l,b){if(h.elements){for(var c=[],g=0;g<h.elements.length;g++){var a=h.elements[g];a=a?this.accept(a,l,b.concat(["elements",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.elements=c}return h}},{key:"visitObjectExpression",value:function(h,l,b){for(var c=[],g=0;g<h.properties.length;g++){var a=h.properties[g];a=a?this.accept(a,
l,b.concat(["properties",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.properties=c;return h}},{key:"visitFunctionExpression",value:function(h,l,b){h.id&&(h.id=this.accept(h.id,l,b.concat(["id"])));for(var c=[],g=0;g<h.params.length;g++){var a=h.params[g];a=a?this.accept(a,l,b.concat(["params",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.params=c;h.body=this.accept(h.body,l,b.concat(["body"]));return h}},{key:"visitUnaryExpression",value:function(h,l,b){h.argument=this.accept(h.argument,
l,b.concat(["argument"]));return h}},{key:"visitUpdateExpression",value:function(h,l,b){h.argument=this.accept(h.argument,l,b.concat(["argument"]));return h}},{key:"visitBinaryExpression",value:function(h,l,b){h.left=this.accept(h.left,l,b.concat(["left"]));h.right=this.accept(h.right,l,b.concat(["right"]));return h}},{key:"visitAssignmentExpression",value:function(h,l,b){h.left=this.accept(h.left,l,b.concat(["left"]));h.right=this.accept(h.right,l,b.concat(["right"]));return h}},{key:"visitLogicalExpression",
value:function(h,l,b){h.left=this.accept(h.left,l,b.concat(["left"]));h.right=this.accept(h.right,l,b.concat(["right"]));return h}},{key:"visitMemberExpression",value:function(h,l,b){h.object=this.accept(h.object,l,b.concat(["object"]));h.property=this.accept(h.property,l,b.concat(["property"]));return h}},{key:"visitConditionalExpression",value:function(h,l,b){h.test=this.accept(h.test,l,b.concat(["test"]));h.alternate=this.accept(h.alternate,l,b.concat(["alternate"]));h.consequent=this.accept(h.consequent,
l,b.concat(["consequent"]));return h}},{key:"visitCallExpression",value:function(h,l,b){h.callee=this.accept(h.callee,l,b.concat(["callee"]));for(var c=[],g=0;g<h.arguments.length;g++){var a=h.arguments[g];a=a?this.accept(a,l,b.concat(["arguments",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.arguments=c;return h}},{key:"visitNewExpression",value:function(h,l,b){h.callee=this.accept(h.callee,l,b.concat(["callee"]));for(var c=[],g=0;g<h.arguments.length;g++){var a=h.arguments[g];a=a?this.accept(a,
l,b.concat(["arguments",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.arguments=c;return h}},{key:"visitSequenceExpression",value:function(h,l,b){for(var c=[],g=0;g<h.expressions.length;g++){var a=h.expressions[g];a=a?this.accept(a,l,b.concat(["expressions",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.expressions=c;return h}},{key:"visitArrowFunctionExpression",value:function(h,l,b){h.body=this.accept(h.body,l,b.concat(["body"]));h.id&&(h.id=this.accept(h.id,l,b.concat(["id"])));
for(var c=[],g=0;g<h.params.length;g++){var a=h.params[g];a=a?this.accept(a,l,b.concat(["params",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.params=c;return h}},{key:"visitYieldExpression",value:function(h,l,b){h.argument&&(h.argument=this.accept(h.argument,l,b.concat(["argument"])));return h}},{key:"visitTemplateLiteral",value:function(h,l,b){for(var c=[],g=0;g<h.quasis.length;g++){var a=h.quasis[g];a=a?this.accept(a,l,b.concat(["quasis",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.quasis=
c;c=[];for(g=0;g<h.expressions.length;g++)a=(a=h.expressions[g])?this.accept(a,l,b.concat(["expressions",g])):a,Array.isArray(a)?c.push.apply(c,a):c.push(a);h.expressions=c;return h}},{key:"visitTaggedTemplateExpression",value:function(h,l,b){h.tag=this.accept(h.tag,l,b.concat(["tag"]));h.quasi=this.accept(h.quasi,l,b.concat(["quasi"]));return h}},{key:"visitAssignmentProperty",value:function(h,l,b){h.value=this.accept(h.value,l,b.concat(["value"]));h.key=this.accept(h.key,l,b.concat(["key"]));return h}},
{key:"visitObjectPattern",value:function(h,l,b){for(var c=[],g=0;g<h.properties.length;g++){var a=h.properties[g];a=a?this.accept(a,l,b.concat(["properties",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.properties=c;return h}},{key:"visitArrayPattern",value:function(h,l,b){if(h.elements){for(var c=[],g=0;g<h.elements.length;g++){var a=h.elements[g];a=a?this.accept(a,l,b.concat(["elements",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.elements=c}return h}},{key:"visitRestElement",value:function(h,
l,b){h.argument=this.accept(h.argument,l,b.concat(["argument"]));return h}},{key:"visitAssignmentPattern",value:function(h,l,b){h.left=this.accept(h.left,l,b.concat(["left"]));h.right=this.accept(h.right,l,b.concat(["right"]));return h}},{key:"visitClassExpression",value:function(h,l,b){h.id&&(h.id=this.accept(h.id,l,b.concat(["id"])));h.superClass&&(h.superClass=this.accept(h.superClass,l,b.concat(["superClass"])));h.body=this.accept(h.body,l,b.concat(["body"]));for(var c=[],g=0;g<h.decorators.length;g++){var a=
h.decorators[g];a=a?this.accept(a,l,b.concat(["decorators",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.decorators=c;return h}},{key:"visitMetaProperty",value:function(h,l,b){h.meta=this.accept(h.meta,l,b.concat(["meta"]));h.property=this.accept(h.property,l,b.concat(["property"]));return h}},{key:"visitImportDeclaration",value:function(h,l,b){for(var c=[],g=0;g<h.specifiers.length;g++){var a=h.specifiers[g];a=a?this.accept(a,l,b.concat(["specifiers",g])):a;Array.isArray(a)?c.push.apply(c,
a):c.push(a)}h.specifiers=c;h.source=this.accept(h.source,l,b.concat(["source"]));return h}},{key:"visitImportSpecifier",value:function(h,l,b){h.imported=this.accept(h.imported,l,b.concat(["imported"]));h.local=this.accept(h.local,l,b.concat(["local"]));return h}},{key:"visitImportDefaultSpecifier",value:function(h,l,b){h.local=this.accept(h.local,l,b.concat(["local"]));return h}},{key:"visitImportNamespaceSpecifier",value:function(h,l,b){h.local=this.accept(h.local,l,b.concat(["local"]));return h}},
{key:"visitExportNamedDeclaration",value:function(h,l,b){h.declaration&&(h.declaration=this.accept(h.declaration,l,b.concat(["declaration"])));for(var c=[],g=0;g<h.specifiers.length;g++){var a=h.specifiers[g];a=a?this.accept(a,l,b.concat(["specifiers",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.specifiers=c;h.source&&(h.source=this.accept(h.source,l,b.concat(["source"])));return h}},{key:"visitExportSpecifier",value:function(h,l,b){h.exported=this.accept(h.exported,l,b.concat(["exported"]));
h.local=this.accept(h.local,l,b.concat(["local"]));return h}},{key:"visitAnonymousDefaultExportedFunctionDeclaration",value:function(h,l,b){h.id&&(h.id=this.accept(h.id,l,b.concat(["id"])));for(var c=[],g=0;g<h.params.length;g++){var a=h.params[g];a=a?this.accept(a,l,b.concat(["params",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.params=c;h.body=this.accept(h.body,l,b.concat(["body"]));return h}},{key:"visitAnonymousDefaultExportedClassDeclaration",value:function(h,l,b){h.id&&(h.id=this.accept(h.id,
l,b.concat(["id"])));h.superClass&&(h.superClass=this.accept(h.superClass,l,b.concat(["superClass"])));h.body=this.accept(h.body,l,b.concat(["body"]));for(var c=[],g=0;g<h.decorators.length;g++){var a=h.decorators[g];a=a?this.accept(a,l,b.concat(["decorators",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.decorators=c;return h}},{key:"visitExportDefaultDeclaration",value:function(h,l,b){h.declaration=this.accept(h.declaration,l,b.concat(["declaration"]));return h}},{key:"visitExportAllDeclaration",
value:function(h,l,b){h.source=this.accept(h.source,l,b.concat(["source"]));h.exported&&(h.exported=this.accept(h.exported,l,b.concat(["exported"])));return h}},{key:"visitAwaitExpression",value:function(h,l,b){h.argument=this.accept(h.argument,l,b.concat(["argument"]));return h}},{key:"visitJSXMemberExpression",value:function(h,l,b){h.object=this.accept(h.object,l,b.concat(["object"]));h.property=this.accept(h.property,l,b.concat(["property"]));return h}},{key:"visitJSXNamespacedName",value:function(h,
l,b){h.namespace=this.accept(h.namespace,l,b.concat(["namespace"]));h.name=this.accept(h.name,l,b.concat(["name"]));return h}},{key:"visitJSXOpeningElement",value:function(h,l,b){for(var c=[],g=0;g<h.attributes.length;g++){var a=h.attributes[g];a=a?this.accept(a,l,b.concat(["attributes",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.attributes=c;h.name=this.accept(h.name,l,b.concat(["name"]));return h}},{key:"visitJSXClosingElement",value:function(h,l,b){h.name=this.accept(h.name,l,b.concat(["name"]));
return h}},{key:"visitJSXSpreadAttribute",value:function(h,l,b){h.argument=this.accept(h.argument,l,b.concat(["argument"]));return h}},{key:"visitJSXElement",value:function(h,l,b){h.openingElement=this.accept(h.openingElement,l,b.concat(["openingElement"]));for(var c=[],g=0;g<h.children.length;g++){var a=h.children[g];a=a?this.accept(a,l,b.concat(["children",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.children=c;h.closingElement&&(h.closingElement=this.accept(h.closingElement,l,b.concat(["closingElement"])));
return h}},{key:"visitJSXFragment",value:function(h,l,b){h.openingFragment=this.accept(h.openingFragment,l,b.concat(["openingFragment"]));for(var c=[],g=0;g<h.children.length;g++){var a=h.children[g];a=a?this.accept(a,l,b.concat(["children",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.children=c;h.closingFragment=this.accept(h.closingFragment,l,b.concat(["closingFragment"]));return h}},{key:"visitChainExpression",value:function(h,l,b){h.expression=this.accept(h.expression,l,b.concat(["expression"]));
return h}},{key:"visitImportExpression",value:function(h,l,b){h.source=this.accept(h.source,l,b.concat(["source"]));return h}},{key:"visitRegExpLiteral",value:function(h,l,b){return h}},{key:"visitDirective",value:function(h,l,b){h.expression=this.accept(h.expression,l,b.concat(["expression"]));return h}},{key:"visitFunctionBody",value:function(h,l,b){for(var c=[],g=0;g<h.body.length;g++){var a=h.body[g];a=a?this.accept(a,l,b.concat(["body",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.body=
c;return h}},{key:"visitFunctionDeclaration",value:function(h,l,b){h.id&&(h.id=this.accept(h.id,l,b.concat(["id"])));for(var c=[],g=0;g<h.params.length;g++){var a=h.params[g];a=a?this.accept(a,l,b.concat(["params",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.params=c;h.body=this.accept(h.body,l,b.concat(["body"]));return h}},{key:"visitVariableDeclaration",value:function(h,l,b){for(var c=[],g=0;g<h.declarations.length;g++){var a=h.declarations[g];a=a?this.accept(a,l,b.concat(["declarations",
g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.declarations=c;return h}},{key:"visitForOfStatement",value:function(h,l,b){h.left=this.accept(h.left,l,b.concat(["left"]));h.right=this.accept(h.right,l,b.concat(["right"]));h.body=this.accept(h.body,l,b.concat(["body"]));return h}},{key:"visitClassDeclaration",value:function(h,l,b){h.id=this.accept(h.id,l,b.concat(["id"]));h.superClass&&(h.superClass=this.accept(h.superClass,l,b.concat(["superClass"])));h.body=this.accept(h.body,l,b.concat(["body"]));
var c=[];if(!h.decorators)debugger;for(var g=0;g<h.decorators.length;g++){var a=h.decorators[g];a=a?this.accept(a,l,b.concat(["decorators",g])):a;Array.isArray(a)?c.push.apply(c,a):c.push(a)}h.decorators=c;return h}},{key:"visitJSXIdentifier",value:function(h,l,b){return h}},{key:"visitBigIntLiteral",value:function(h,l,b){return h}},{key:"visitStaticBlock",value:function(h,l,b){for(var c=[],g=0;g<h.body.length;g++){var a=h.body[g];a=a?this.accept(a,l,b.concat(["body",g])):a;Array.isArray(a)?c.push.apply(c,
a):c.push(a)}h.body=c;return h}}]);return e}());$Q.Visitor=em;$Q["default"]=em;var ml=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitors.js");ml.obj=nh;ml.Path=Nh;ml.Visitor=em;var nG=function(e){function h(){rd(this,h);return l.apply(this,arguments)}gd(h,e);var l=sb(h);Ac(h,[{key:"accept",value:function(b,c,g){var a=g.map(function(f){return"string"===typeof f?".".concat(f):"[".concat(f,"]")}).join(""),d=[];g=Xb(nd(h.prototype),"accept",this).call(this,b,{index:c.index,
tree:d},g);c.tree.push({node:b,path:a,index:c.index++,children:d});return g}}]);return h}(ml.Visitor);ml.PrinterVisitor=nG;var oG=function(e){function h(){rd(this,h);return l.apply(this,arguments)}gd(h,e);var l=sb(h);Ac(h,[{key:"recordNotEqual",value:function(b,c,g,a){g.comparisons.errors.push({node1:b,node2:c,path:g.completePath,msg:a})}},{key:"compareType",value:function(b,c,g){return this.compareField("type",b,c,g)}},{key:"compareField",value:function(b,c,g,a){g=ml.Path(a.completePath.join(".")).get(g);
if(c&&g&&c[b]===g[b]||c&&"*"===c[b]||g&&"*"===g[b])return!0;var d=a.completePath.join(".")+"."+b;this.recordNotEqual(c,g,a,c?g?d+" is not equal: "+c[b]+" vs. "+g[b]:"node2 not defined but node1 ("+d+") is: "+c[b]:"node1 on "+d+" not defined");return!1}},{key:"accept",value:function(b,c,g,a){var d=ml.Path(a.join(".")).get(c);if("*"!==b&&"*"!==d&&(g={completePath:a,comparisons:g.comparisons},this.compareType(b,c,g)))this["visit"+b.type](b,c,g,a)}},{key:"visitFunction",value:function(b,c,g,a){b.generator&&
this.compareField("generator",b,c,g);b.expression&&this.compareField("expression",b,c,g);return Xb(nd(h.prototype),"visitFunction",this).call(this,b,c,g,a)}},{key:"visitSwitchStatement",value:function(b,c,g,a){b.lexical&&this.compareField("lexical",b,c,g);return Xb(nd(h.prototype),"visitSwitchStatement",this).call(this,b,c,g,a)}},{key:"visitForInStatement",value:function(b,c,g,a){b.each&&this.compareField("each",b,c,g);return Xb(nd(h.prototype),"visitForInStatement",this).call(this,b,c,g,a)}},{key:"visitFunctionDeclaration",
value:function(b,c,g,a){b.generator&&this.compareField("generator",b,c,g);b.expression&&this.compareField("expression",b,c,g);return Xb(nd(h.prototype),"visitFunctionDeclaration",this).call(this,b,c,g,a)}},{key:"visitVariableDeclaration",value:function(b,c,g,a){this.compareField("kind",b,c,g);return Xb(nd(h.prototype),"visitVariableDeclaration",this).call(this,b,c,g,a)}},{key:"visitUnaryExpression",value:function(b,c,g,a){this.compareField("operator",b,c,g);b.prefix&&this.compareField("prefix",b,
c,g);return Xb(nd(h.prototype),"visitUnaryExpression",this).call(this,b,c,g,a)}},{key:"visitBinaryExpression",value:function(b,c,g,a){this.compareField("operator",b,c,g);return Xb(nd(h.prototype),"visitBinaryExpression",this).call(this,b,c,g,a)}},{key:"visitAssignmentExpression",value:function(b,c,g,a){this.compareField("operator",b,c,g);return Xb(nd(h.prototype),"visitAssignmentExpression",this).call(this,b,c,g,a)}},{key:"visitUpdateExpression",value:function(b,c,g,a){this.compareField("operator",
b,c,g);b.prefix&&this.compareField("prefix",b,c,g);return Xb(nd(h.prototype),"visitUpdateExpression",this).call(this,b,c,g,a)}},{key:"visitLogicalExpression",value:function(b,c,g,a){this.compareField("operator",b,c,g);return Xb(nd(h.prototype),"visitLogicalExpression",this).call(this,b,c,g,a)}},{key:"visitMemberExpression",value:function(b,c,g,a){b.computed&&this.compareField("computed",b,c,g);return Xb(nd(h.prototype),"visitMemberExpression",this).call(this,b,c,g,a)}},{key:"visitComprehensionBlock",
value:function(b,c,g,a){b.each&&this.compareField("each",b,c,g);return Xb(nd(h.prototype),"visitComprehensionBlock",this).call(this,b,c,g,a)}},{key:"visitIdentifier",value:function(b,c,g,a){this.compareField("name",b,c,g);return Xb(nd(h.prototype),"visitIdentifier",this).call(this,b,c,g,a)}},{key:"visitLiteral",value:function(b,c,g,a){this.compareField("value",b,c,g);return Xb(nd(h.prototype),"visitLiteral",this).call(this,b,c,g,a)}},{key:"visitClassDeclaration",value:function(b,c,g,a){this.compareField("id",
b,c,g);b.superClass&&this.compareField("superClass",b,c,g);this.compareField("body",b,c,g);return Xb(nd(h.prototype),"visitClassDeclaration",this).call(this,b,c,g,a)}},{key:"visitClassBody",value:function(b,c,g,a){this.compareField("body",b,c,g);return Xb(nd(h.prototype),"visitClassBody",this).call(this,b,c,g,a)}},{key:"visitMethodDefinition",value:function(b,c,g,a){this.compareField("static",b,c,g);this.compareField("computed",b,c,g);this.compareField("kind",b,c,g);this.compareField("key",b,c,g);
this.compareField("value",b,c,g);return Xb(nd(h.prototype),"visitMethodDefinition",this).call(this,b,c,g,a)}}]);return h}(ml.Visitor);ml.ComparisonVisitor=oG;var pG=function(e){function h(){rd(this,h);return l.apply(this,arguments)}gd(h,e);var l=sb(h);Ac(h,[{key:"newScope",value:function(b,c){b={node:b,varDecls:[],varDeclPaths:[],funcDecls:[],funcDeclPaths:[],classDecls:[],classDeclPaths:[],classExprs:[],classExprPaths:[],methodDecls:[],methodDeclPaths:[],importSpecifiers:[],importSpecifierPaths:[],
exportDecls:[],exportDeclPaths:[],refs:[],thisRefs:[],params:[],catches:[],subScopes:[],resolvedRefMap:new Map};c&&c.subScopes.push(b);return b}},{key:"visitVariableDeclaration",value:function(b,c,g){c.varDecls.push(b);c.varDeclPaths.push(g);return Xb(nd(h.prototype),"visitVariableDeclaration",this).call(this,b,c,g)}},{key:"visitVariableDeclarator",value:function(b,c,g){b.init&&(b.init=this.accept(b.init,c,g.concat(["init"])));return b}},{key:"visitFunction",value:function(b,c,g){var a=this,d=this.newScope(b,
c);b.params.forEach(function(f,k){"AssignmentPattern"===f.type&&a.accept(f.right,d,g.concat("params",k,"right"))});d.params=Array.prototype.slice.call(b.params);return d}},{key:"visitFunctionDeclaration",value:function(b,c,g){var a=this.visitFunction(b,c,g);c.funcDecls.push(b);c.funcDeclPaths.push(g);var d=this;b.defaults&&(b.defaults=b.defaults.reduce(function(f,k,n){k=d.accept(k,a,g.concat(["defaults",n]));Array.isArray(k)?f.push.apply(f,k):f.push(k);return f},[]));b.rest&&(b.rest=d.accept(b.rest,
a,g.concat(["rest"])));b.body=d.accept(b.body,a,g.concat(["body"]));b.loc&&(b.loc=d.accept(b.loc,a,g.concat(["loc"])));return b}},{key:"visitFunctionExpression",value:function(b,c,g){var a=this.visitFunction(b,c,g),d=this;b.defaults&&(b.defaults=b.defaults.reduce(function(f,k,n){k=d.accept(k,a,g.concat(["defaults",n]));Array.isArray(k)?f.push.apply(f,k):f.push(k);return f},[]));b.rest&&(b.rest=d.accept(b.rest,a,g.concat(["rest"])));b.body=d.accept(b.body,a,g.concat(["body"]));b.loc&&(b.loc=d.accept(b.loc,
a,g.concat(["loc"])));return b}},{key:"visitArrowFunctionExpression",value:function(b,c,g){var a=this.visitFunction(b,c,g),d=this;b.defaults&&(b.defaults=b.defaults.reduce(function(f,k,n){k=d.accept(k,a,g.concat(["defaults",n]));Array.isArray(k)?f.push.apply(f,k):f.push(k);return f},[]));b.rest&&(b.rest=d.accept(b.rest,a,g.concat(["rest"])));b.body=d.accept(b.body,a,g.concat(["body"]));b.loc&&(b.loc=d.accept(b.loc,a,g.concat(["loc"])));return b}},{key:"visitIdentifier",value:function(b,c,g){c.refs.push(b);
return Xb(nd(h.prototype),"visitIdentifier",this).call(this,b,c,g)}},{key:"visitMemberExpression",value:function(b,c,g){b.object=this.accept(b.object,c,g.concat(["object"]));b.computed&&(b.property=this.accept(b.property,c,g.concat(["property"])));return b}},{key:"visitProperty",value:function(b,c,g){b.computed&&(b.key=this.accept(b.key,c,g.concat(["key"])));b.value=this.accept(b.value,c,g.concat(["value"]));return b}},{key:"visitThisExpression",value:function(b,c,g){c.thisRefs.push(b);return Xb(nd(h.prototype),
"visitThisExpression",this).call(this,b,c,g)}},{key:"visitTryStatement",value:function(b,c,g){b.block=this.accept(b.block,c,g.concat(["block"]));b.handler&&(b.handler=this.accept(b.handler,c,g.concat(["handler"])),c.catches.push(b.handler.param));b.finalizer&&(b.finalizer=this.accept(b.finalizer,c,g.concat(["finalizer"])));return b}},{key:"visitLabeledStatement",value:function(b,c,g){b.body=this.accept(b.body,c,g.concat(["body"]));return b}},{key:"visitClassDeclaration",value:function(b,c,g){c.classDecls.push(b);
c.classDeclPaths.push(g);b.superClass&&(b.superClass=this.accept(b.superClass,c,g.concat(["superClass"])));b.body=this.accept(b.body,c,g.concat(["body"]));return b}},{key:"visitClassExpression",value:function(b,c,g){b.id&&(c.classExprs.push(b),c.classExprPaths.push(g));b.superClass&&(b.superClass=this.accept(b.superClass,c,g.concat(["superClass"])));b.body=this.accept(b.body,c,g.concat(["body"]));return b}},{key:"visitMethodDefinition",value:function(b,c,g){b.value=this.accept(b.value,c,g.concat(["value"]));
return b}},{key:"visitMetaProperty",value:function(b,c,g){return b}},{key:"visitBreakStatement",value:function(b,c,g){return b}},{key:"visitContinueStatement",value:function(b,c,g){return b}},{key:"visitImportSpecifier",value:function(b,c,g){c.importSpecifiers.push(b.local);c.importSpecifierPaths.push(g);return b}},{key:"visitImportDefaultSpecifier",value:function(b,c,g){c.importSpecifiers.push(b.local);c.importSpecifierPaths.push(g);return b}},{key:"visitImportNamespaceSpecifier",value:function(b,
c,g){c.importSpecifiers.push(b.local);c.importSpecifierPaths.push(g);return b}},{key:"visitExportSpecifier",value:function(b,c,g){b.local=this.accept(b.local,c,g.concat(["local"]));return b}},{key:"visitExportNamedDeclaration",value:function(b,c,g){c.exportDecls.push(b);c.exportDeclPaths.push(g);b.source||Xb(nd(h.prototype),"visitExportNamedDeclaration",this).call(this,b,c,g);return b}},{key:"visitExportDefaultDeclaration",value:function(b,c,g){c.exportDecls.push(b);c.exportDeclPaths.push(g);return Xb(nd(h.prototype),
"visitExportDefaultDeclaration",this).call(this,b,c,g)}},{key:"visitExportAllDeclaration",value:function(b,c,g){c.exportDecls.push(b);c.exportDeclPaths.push(g);return Xb(nd(h.prototype),"visitExportAllDeclaration",this).call(this,b,c,g)}}]);return h}(ml.Visitor);ml.ScopeVisitor=pG;ml.BaseVisitor=em;ml.Visitor=em;ml.PrinterVisitor=nG;ml.ComparisonVisitor=oG;ml.ScopeVisitor=pG;var cx={},Lu=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/@javascript-obfuscator__SLASH__estraverse/5.4.0/estraverse.js");
Lu.commonjsHelpers=mk;Lu.estraverse=cx;(function(e){(function b(l){function c(F){var L={},G;for(G in F)if(F.hasOwnProperty(G)){var oa=F[G];"object"===Jc(oa)&&null!==oa?L[G]=c(oa):L[G]=oa}return L}function g(F,L){var G;var oa=F.length;for(G=0;oa;){var ha=oa>>>1;var Ha=G+ha;L(F[Ha])?oa=ha:(G=Ha+1,oa-=ha+1)}return G}function a(F,L){this.parent=F;this.key=L}function d(F,L,G,oa){this.node=F;this.path=L;this.wrap=G;this.ref=oa}function f(){}function k(F){return null==F?!1:"object"===Jc(F)&&"string"===typeof F.type}
function n(F,L){for(var G=F.length-1;0<=G;--G)if(F[G].node===L)return!0;return!1}function p(F,L){return(new f).traverse(F,L)}function q(F,L){var G=g(L,function(oa){return oa.range[0]>F.range[0]});F.extendedRange=[F.range[0],F.range[1]];G!==L.length&&(F.extendedRange[1]=L[G].range[0]);--G;0<=G&&(F.extendedRange[0]=L[G].range[1]);return F}var r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",
AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",
DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",
GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",
NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",PrivateIdentifier:"PrivateIdentifier",Program:"Program",Property:"Property",PropertyDefinition:"PropertyDefinition",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",StaticBlock:"StaticBlock",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",
TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};var t={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],
ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],
ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id",
"params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],
NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],StaticBlock:["body"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis",
"expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};var w={};var x={};var B={};var D={Break:w,Skip:x,Remove:B};a.prototype.replace=function(F){this.parent[this.key]=F};a.prototype.remove=function(){if(Array.isArray(this.parent))return this.parent.splice(this.key,
1),!0;this.replace(null);return!1};f.prototype.path=function(){function F(hc,qc){if(Array.isArray(qc))for(G=0,oa=qc.length;G<oa;++G)hc.push(qc[G]);else hc.push(qc)}var L,G,oa;if(!this.__current.path)return null;var ha=[];var Ha=2;for(L=this.__leavelist.length;Ha<L;++Ha){var Va=this.__leavelist[Ha];F(ha,Va.path)}F(ha,this.__current.path);return ha};f.prototype.type=function(){return this.current().type||this.__current.wrap};f.prototype.parents=function(){var F;var L=[];var G=1;for(F=this.__leavelist.length;G<
F;++G)L.push(this.__leavelist[G].node);return L};f.prototype.current=function(){return this.__current.node};f.prototype.__execute=function(F,L){var G=void 0;var oa=this.__current;this.__current=L;this.__state=null;F&&(G=F.call(this,L.node,this.__leavelist[this.__leavelist.length-1].node));this.__current=oa;return G};f.prototype.notify=function(F){this.__state=F};f.prototype.skip=function(){this.notify(x)};f.prototype["break"]=function(){this.notify(w)};f.prototype.remove=function(){this.notify(B)};
f.prototype.__initialize=function(F,L){this.visitor=L;this.root=F;this.__worklist=[];this.__leavelist=[];this.__fallback=this.__state=this.__current=null;"iteration"===L.fallback?this.__fallback=Object.keys:"function"===typeof L.fallback&&(this.__fallback=L.fallback);this.__keys=t;L.keys&&(this.__keys=Object.assign(Object.create(this.__keys),L.keys))};f.prototype.traverse=function(F,L){var G,oa,ha;this.__initialize(F,L);var Ha={};var Va=this.__worklist;var hc=this.__leavelist;Va.push(new d(F,null,
null,null));for(hc.push(new d(null,null,null,null));Va.length;)if(F=Va.pop(),F===Ha){F=hc.pop();var qc=this.__execute(L.leave,F);if(this.__state===w||qc===w)break}else if(F.node){qc=this.__execute(L.enter,F);if(this.__state===w||qc===w)break;Va.push(Ha);hc.push(F);if(this.__state!==x&&qc!==x){qc=F.node;var jc=qc.type||F.wrap;var Ya=this.__keys[jc];if(!Ya)if(this.__fallback)Ya=this.__fallback(qc);else throw Error("Unknown node type "+jc+".");for(G=Ya.length;0<=--G;){var xa=Ya[G];if(ha=qc[xa])if(Array.isArray(ha))for(oa=
ha.length;0<=--oa;){if(ha[oa]&&!n(hc,ha[oa])){if(jc!==r.ObjectExpression&&jc!==r.ObjectPattern||"properties"!==Ya[G])if(k(ha[oa]))F=new d(ha[oa],[xa,oa],null,null);else continue;else F=new d(ha[oa],[xa,oa],"Property",null);Va.push(F)}}else k(ha)&&!n(hc,ha)&&Va.push(new d(ha,xa,null,null))}}}};f.prototype.replace=function(F,L){function G(wc){if(wc.ref.remove()){var Zb=wc.ref.key;var $c=wc.ref.parent;for(wc=hc.length;wc--;){var Oa=hc[wc];if(Oa.ref&&Oa.ref.parent===$c){if(Oa.ref.key<Zb)break;--Oa.ref.key}}}}
var oa,ha,Ha;this.__initialize(F,L);var Va={};var hc=this.__worklist;var qc=this.__leavelist;var jc={root:F};var Ya=new d(F,null,null,new a(jc,"root"));hc.push(Ya);for(qc.push(Ya);hc.length;)if(Ya=hc.pop(),Ya===Va){Ya=qc.pop();var xa=this.__execute(L.leave,Ya);void 0!==xa&&xa!==w&&xa!==x&&xa!==B&&Ya.ref.replace(xa);this.__state!==B&&xa!==B||G(Ya);if(this.__state===w||xa===w)break}else{xa=this.__execute(L.enter,Ya);void 0!==xa&&xa!==w&&xa!==x&&xa!==B&&(Ya.ref.replace(xa),Ya.node=xa);if(this.__state===
B||xa===B)G(Ya),Ya.node=null;if(this.__state===w||xa===w)break;if(F=Ya.node)if(hc.push(Va),qc.push(Ya),this.__state!==x&&xa!==x){xa=F.type||Ya.wrap;var tc=this.__keys[xa];if(!tc)if(this.__fallback)tc=this.__fallback(F);else throw Error("Unknown node type "+xa+".");for(oa=tc.length;0<=--oa;){var Qb=tc[oa];if(Ha=F[Qb])if(Array.isArray(Ha))for(ha=Ha.length;0<=--ha;){if(Ha[ha]){if(xa!==r.ObjectExpression&&xa!==r.ObjectPattern||"properties"!==tc[oa])if(k(Ha[ha]))Ya=new d(Ha[ha],[Qb,ha],null,new a(Ha,ha));
else continue;else Ya=new d(Ha[ha],[Qb,ha],"Property",new a(Ha,ha));hc.push(Ya)}}else k(Ha)&&hc.push(new d(Ha,Qb,null,new a(F,Qb)))}}}return jc.root};l.Syntax=r;l.traverse=p;l.replace=function(F,L){return(new f).replace(F,L)};l.attachComments=function(F,L,G){var oa=[],ha;if(!F.range)throw Error("attachComments needs range information");if(!G.length){if(L.length){var Ha=0;for(ha=L.length;Ha<ha;Ha+=1)G=c(L[Ha]),G.extendedRange=[0,F.range[0]],oa.push(G);F.leadingComments=oa}return F}Ha=0;for(ha=L.length;Ha<
ha;Ha+=1)oa.push(q(c(L[Ha]),G));var Va=0;p(F,{enter:function(hc){for(var qc;Va<oa.length;){qc=oa[Va];if(qc.extendedRange[1]>hc.range[0])break;qc.extendedRange[1]===hc.range[0]?(hc.leadingComments||(hc.leadingComments=[]),hc.leadingComments.push(qc),oa.splice(Va,1)):Va+=1}if(Va===oa.length)return D.Break;if(oa[Va].extendedRange[0]>hc.range[1])return D.Skip}});Va=0;p(F,{leave:function(hc){for(var qc;Va<oa.length;){qc=oa[Va];if(hc.range[1]<qc.extendedRange[0])break;hc.range[1]===qc.extendedRange[0]?
(hc.trailingComments||(hc.trailingComments=[]),hc.trailingComments.push(qc),oa.splice(Va,1)):Va+=1}if(Va===oa.length)return D.Break;if(oa[Va].extendedRange[0]>hc.range[1])return D.Skip}});return F};l.VisitorKeys=t;l.VisitorOption=D;l.Controller=f;l.cloneEnvironment=function(){return b({})};return l})(e)})(Lu.estraverse);Lu.__moduleExports=cx;Lu.estraverse=cx;Lu["default"]=cx;var Mu={},os={exports:{}},qq=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/esutils/2.0.3/lib/ast.js");
qq.commonjsHelpers=mk;qq.astModule=os;qq.ast=os.exports;(function(){function e(l){if(null==l)return!1;switch(l.type){case "BlockStatement":case "BreakStatement":case "ContinueStatement":case "DebuggerStatement":case "DoWhileStatement":case "EmptyStatement":case "ExpressionStatement":case "ForInStatement":case "ForStatement":case "IfStatement":case "LabeledStatement":case "ReturnStatement":case "SwitchStatement":case "ThrowStatement":case "TryStatement":case "VariableDeclaration":case "WhileStatement":case "WithStatement":return!0}return!1}
function h(l){switch(l.type){case "IfStatement":return null!=l.alternate?l.alternate:l.consequent;case "LabeledStatement":case "ForStatement":case "ForInStatement":case "WhileStatement":case "WithStatement":return l.body}return null}qq.astModule.exports={isExpression:function(l){if(null==l)return!1;switch(l.type){case "ArrayExpression":case "AssignmentExpression":case "BinaryExpression":case "CallExpression":case "ConditionalExpression":case "FunctionExpression":case "Identifier":case "Literal":case "LogicalExpression":case "MemberExpression":case "NewExpression":case "ObjectExpression":case "SequenceExpression":case "ThisExpression":case "UnaryExpression":case "UpdateExpression":return!0}return!1},
isStatement:e,isIterationStatement:function(l){if(null==l)return!1;switch(l.type){case "DoWhileStatement":case "ForInStatement":case "ForStatement":case "WhileStatement":return!0}return!1},isSourceElement:function(l){return e(l)||null!=l&&"FunctionDeclaration"===l.type},isProblematicIfStatement:function(l){if("IfStatement"!==l.type||null==l.alternate)return!1;l=l.consequent;do{if("IfStatement"===l.type&&null==l.alternate)return!0;l=h(l)}while(l);return!1},trailingStatement:h}})();qq.__moduleExports=
os.exports;qq.ast=os.exports;qq["default"]=os.exports;qq.ast=os.exports;var rq={exports:{}},sq=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/esutils/2.0.3/lib/code.js");sq.commonjsHelpers=mk;sq.codeModule=rq;sq.code=rq.exports;(function(){function e(k){if(65535>=k)return String.fromCharCode(k);var n=String.fromCharCode(Math.floor((k-65536)/1024)+55296);k=String.fromCharCode((k-65536)%1024+56320);return n+k}var h;var l=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var b=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var c=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/;
var g=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
var a=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];var d=Array(128);for(h=0;128>h;++h)d[h]=97<=h&&122>=h||65<=h&&90>=h||36===h||95===h;var f=Array(128);for(h=0;128>h;++h)f[h]=97<=h&&122>=h||65<=h&&90>=h||48<=h&&57>=h||36===h||95===h;sq.codeModule.exports={isDecimalDigit:function(k){return 48<=k&&57>=k},isHexDigit:function(k){return 48<=k&&57>=k||97<=k&&102>=k||65<=k&&70>=k},isOctalDigit:function(k){return 48<=k&&55>=k},isWhiteSpace:function(k){return 32===k||
9===k||11===k||12===k||160===k||5760<=k&&0<=a.indexOf(k)},isLineTerminator:function(k){return 10===k||13===k||8232===k||8233===k},isIdentifierStartES5:function(k){return 128>k?d[k]:l.test(e(k))},isIdentifierPartES5:function(k){return 128>k?f[k]:b.test(e(k))},isIdentifierStartES6:function(k){return 128>k?d[k]:c.test(e(k))},isIdentifierPartES6:function(k){return 128>k?f[k]:g.test(e(k))}}})();sq.__moduleExports=rq.exports;sq.code=rq.exports;sq["default"]=rq.exports;sq.code=rq.exports;var ps={exports:{}},
so=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/esutils/2.0.3/lib/keyword.js");so.commonjsHelpers=mk;so.keywordModule=ps;so.keyword=ps.exports;so.require$$0=rq.exports;(function(){function e(d,f){return f||"yield"!==d?h(d,f):!1}function h(d,f){if(f)a:switch(d){case "implements":case "interface":case "package":case "private":case "protected":case "public":case "static":case "let":f=!0;break a;default:f=!1}if(f)return!0;switch(d.length){case 2:return"if"===d||"in"===d||"do"===
d;case 3:return"var"===d||"for"===d||"new"===d||"try"===d;case 4:return"this"===d||"else"===d||"case"===d||"void"===d||"with"===d||"enum"===d;case 5:return"while"===d||"break"===d||"catch"===d||"throw"===d||"const"===d||"yield"===d||"class"===d||"super"===d;case 6:return"return"===d||"typeof"===d||"delete"===d||"switch"===d||"export"===d||"import"===d;case 7:return"default"===d||"finally"===d||"extends"===d;case 8:return"function"===d||"continue"===d||"debugger"===d;case 10:return"instanceof"===d;
default:return!1}}function l(d,f){return"null"===d||"true"===d||"false"===d||e(d,f)}function b(d,f){return"null"===d||"true"===d||"false"===d||h(d,f)}function c(d){var f;if(0===d.length)return!1;var k=d.charCodeAt(0);if(!a.isIdentifierStartES5(k))return!1;var n=1;for(f=d.length;n<f;++n)if(k=d.charCodeAt(n),!a.isIdentifierPartES5(k))return!1;return!0}function g(d){var f;if(0===d.length)return!1;var k=a.isIdentifierStartES6;var n=0;for(f=d.length;n<f;++n){var p=d.charCodeAt(n);if(55296<=p&&56319>=p){++n;
if(n>=f)return!1;var q=d.charCodeAt(n);if(!(56320<=q&&57343>=q))return!1;p=1024*(p-55296)+(q-56320)+65536}if(!k(p))return!1;k=a.isIdentifierPartES6}return!0}var a=so.require$$0;so.keywordModule.exports={isKeywordES5:e,isKeywordES6:h,isReservedWordES5:l,isReservedWordES6:b,isRestrictedWord:function(d){return"eval"===d||"arguments"===d},isIdentifierNameES5:c,isIdentifierNameES6:g,isIdentifierES5:function(d,f){return c(d)&&!l(d,f)},isIdentifierES6:function(d,f){return g(d)&&!b(d,f)}}})();so.__moduleExports=
ps.exports;so.keyword=ps.exports;so["default"]=ps.exports;so.keyword=ps.exports;var Si=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/esutils/2.0.3/lib/utils.js");Si.commonjsHelpers=mk;Si.utils=Mu;Si.require$$0=os.exports;Si.require$$1=rq.exports;Si.require$$2=ps.exports;Si.keyword=Si.keyword||void 0;Si.code=Si.code||void 0;Si.ast=Si.ast||void 0;Si.ast=Si.utils.ast=Si.require$$0;Si.code=Si.utils.code=Si.require$$1;Si.keyword=Si.utils.keyword=Si.require$$2;var P0=Si.ast,Q0=Si.code,
R0=Si.keyword;Si.__moduleExports=Mu;Si.utils=Mu;Si.ast=P0;Si.code=Q0;Si.keyword=R0;Si["default"]=Mu;Si.utils=Mu;var bi=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/stringify.js");bi.ESCODEGEN=function(){function e(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},
moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function h(U,Sa){var S="";for(Sa|=0;0<Sa;Sa>>>=1,U+=U)Sa&1&&(S+=U);return S}function l(U){var Sa=U.length;return Sa&&bi.esutils.code.isLineTerminator(U.charCodeAt(Sa-1))}function b(U,Sa){for(var S in Sa)Sa.hasOwnProperty(S)&&(U[S]=Sa[S]);return U}function c(U,Sa){function S(Ae){return"object"===Jc(Ae)&&Ae instanceof Object&&
!(Ae instanceof RegExp)}var Sc;for(Sc in Sa)if(Sa.hasOwnProperty(Sc)){var xd=Sa[Sc];S(xd)?S(U[Sc])?c(U[Sc],xd):U[Sc]=c({},xd):U[Sc]=xd}return U}function g(U,Sa){return 8232===(U&-2)?(Sa?"u":"\\u")+(8232===U?"2028":"2029"):10===U||13===U?(Sa?"":"\\")+(10===U?"n":"r"):String.fromCharCode(U)}function a(U,Sa){if(8===U)return"\\b";if(12===U)return"\\f";if(9===U)return"\\t";var S=U.toString(16).toUpperCase();return hc||255<U?"\\u"+"0000".slice(S.length)+S:0!==U||bi.esutils.code.isDecimalDigit(Sa)?11===
U?"\\x0B":"\\x"+"00".slice(S.length)+S:"\\0"}function d(U){if(92===U)return"\\\\";if(10===U)return"\\n";if(13===U)return"\\r";if(8232===U)return"\\u2028";if(8233===U)return"\\u2029";throw Error("Incorrectly classified character");}function f(U){var Sa,S="";var Sc=0;for(Sa=U.length;Sc<Sa;++Sc){var xd=U[Sc];S+=Array.isArray(xd)?f(xd):xd}return S}function k(U,Sa){if(!$a)return Array.isArray(U)?f(U):U;if(null==Sa){if(U instanceof ha)return U;Sa={}}return null==Sa.loc?new ha(null,null,$a,U,Sa.name||null):
new ha(Sa.loc.start.line,Sa.loc.start.column,!0===$a?Sa.loc.source||null:$a,U,Sa.name||null)}function n(){return Qb||" "}function p(U,Sa){var S=k(U).toString();if(0===S.length)return[Sa];var Sc=k(Sa).toString();if(0===Sc.length)return[U];S=S.charCodeAt(S.length-1);Sc=Sc.charCodeAt(0);return(43===S||45===S)&&S===Sc||bi.esutils.code.isIdentifierPartES5(S)&&bi.esutils.code.isIdentifierPartES5(Sc)||47===S&&105===Sc?[U,n(),Sa]:bi.esutils.code.isWhiteSpace(S)||bi.esutils.code.isLineTerminator(S)||bi.esutils.code.isWhiteSpace(Sc)||
bi.esutils.code.isLineTerminator(Sc)?[U,Sa]:[U,Qb,Sa]}function q(U){var Sa=Ha;Ha+=Va;U(Ha);Ha=Sa}function r(U,Sa){if("Line"===U.type){if(l(U.value))return"//"+U.value;Sa="//"+U.value;Kd||(Sa+="\n");return Sa}if(md.format.indent.adjustMultilineComment&&/[\n\r]/.test(U.value)){var S,Sc;U=("/*"+U.value+"*/").split(/\r\n|[\r\n]/);var xd=Number.MAX_VALUE;var Ae=1;for(S=U.length;Ae<S;++Ae){var ee=U[Ae];for(Sc=0;Sc<ee.length&&bi.esutils.code.isWhiteSpace(ee.charCodeAt(Sc));)++Sc;xd>Sc&&(xd=Sc)}"undefined"!==
typeof Sa?(ee=Ha,"*"===U[1][xd]&&(Sa+=" "),Ha=Sa):(xd&1&&--xd,ee=Ha);Ae=1;for(S=U.length;Ae<S;++Ae)Sa=k([Ha,U[Ae].slice(xd)]),U[Ae]=$a?Sa.join(""):Sa;Ha=ee;return U.join("\n")}return"/*"+U.value+"*/"}function t(U,Sa){var S;if(U.leadingComments&&0<U.leadingComments.length){var Sc=Sa;if(Kd){var xd=U.leadingComments[0];Sa=[];var Ae=xd.extendedRange;var ee=xd.range;var Fe=dd.substring(Ae[0],ee[0]);var Mf=(Fe.match(/\n/g)||[]).length;0<Mf?(Sa.push(h("\n",Mf)),Sa.push([Ha,r(xd)])):(Sa.push(Fe),Sa.push(r(xd)));
Mf=ee;Fe=1;for(S=U.leadingComments.length;Fe<S;Fe++)xd=U.leadingComments[Fe],ee=xd.range,Mf=dd.substring(Mf[1],ee[0]),Mf=(Mf.match(/\n/g)||[]).length,Sa.push(h("\n",Mf)),Sa.push([Ha,r(xd)]),Mf=ee;Fe=dd.substring(ee[1],Ae[1]);Mf=(Fe.match(/\n/g)||[]).length;Sa.push(h("\n",Mf))}else for(xd=U.leadingComments[0],Sa=[],$c&&U.type===ra.Program&&0===U.body.length&&Sa.push("\n"),Sa.push(r(xd)),l(k(Sa).toString())||Sa.push("\n"),Fe=1,S=U.leadingComments.length;Fe<S;++Fe)xd=U.leadingComments[Fe],xd=[r(xd)],
l(k(xd).toString())||xd.push("\n"),Sa.push([Ha,xd]);Sa.push([Ha,Sc])}if(U.trailingComments)if(Kd)xd=U.trailingComments[0],Ae=xd.extendedRange,ee=xd.range,Fe=dd.substring(Ae[0],ee[0]),Mf=(Fe.match(/\n/g)||[]).length,0<Mf?(Sa.push(h("\n",Mf)),Sa.push([Ha,r(xd)])):(Sa.push(Fe),Sa.push(r(xd)));else{Sc=!l(k(Sa).toString());Fe=k([Ha,Sa,Va]).toString();for(S=Fe.length-1;0<=S&&!bi.esutils.code.isLineTerminator(Fe.charCodeAt(S));--S);Ae=h(" ",Fe.length-1-S);Fe=0;for(S=U.trailingComments.length;Fe<S;++Fe)xd=
U.trailingComments[Fe],Sc?(Sa=0===Fe?[Sa,Va]:[Sa,Ae],Sa.push(r(xd,Ae))):Sa=[Sa,[Ha,r(xd)]],Fe===S-1||l(k(Sa).toString())||(Sa=[Sa,"\n"])}return Sa}function w(U,Sa,S){for(var Sc=0;U<Sa;U++)"\n"===dd[U]&&Sc++;for(U=1;U<Sc;U++)S.push(tc)}function x(U,Sa,S){return Sa<S?["(",U,")"]:U}function B(U){var Sa;var S=U.split(/\r\n|\n/);U=1;for(Sa=S.length;U<Sa;U++)S[U]=tc+Ha+S[U];return S}function D(){}function F(U){var Sa=U.name;U.type===ra.PrivateIdentifier&&(Sa="#"+Sa);return k(Sa,U)}function L(U,Sa){return U.async?
"async"+(Sa?n():Qb):""}function G(U){return U.generator&&!md.moz.starlessGenerator?"*"+Qb:""}function oa(U){var Sa=U.value,S="";Sa.async&&(S+=L(Sa,!U.computed));Sa.generator&&(S+=G(Sa)?"*":"");return S}var ha,Ha,Va,hc,qc,jc,Ya,xa,tc,Qb,wc,Zb,$c,Oa,md,la,$a,dd,Kd;var ra=bi.estraverse.Syntax;var Aa={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,NullishCoalescing:3,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,
Exponentiation:13,Await:14,Unary:14,Postfix:15,OptionalChaining:16,Call:17,New:18,TaggedTemplate:19,Member:20,Primary:21};var V={"??":Aa.NullishCoalescing,"||":Aa.LogicalOR,"&&":Aa.LogicalAND,"|":Aa.BitwiseOR,"^":Aa.BitwiseXOR,"&":Aa.BitwiseAND,"==":Aa.Equality,"!=":Aa.Equality,"===":Aa.Equality,"!==":Aa.Equality,is:Aa.Equality,isnt:Aa.Equality,"<":Aa.Relational,">":Aa.Relational,"<=":Aa.Relational,">=":Aa.Relational,"in":Aa.Relational,"instanceof":Aa.Relational,"<<":Aa.BitwiseSHIFT,">>":Aa.BitwiseSHIFT,
">>>":Aa.BitwiseSHIFT,"+":Aa.Additive,"-":Aa.Additive,"*":Aa.Multiplicative,"%":Aa.Multiplicative,"/":Aa.Multiplicative,"**":Aa.Exponentiation};D.prototype.maybeBlock=function(U,Sa){var S,Sc=this;var xd=!md.comment||!U.leadingComments;if(U.type===ra.BlockStatement&&xd)return[Qb,this.generateStatement(U,Sa)];if(U.type===ra.EmptyStatement&&xd)return";";q(function(){S=[tc,[Ha,Sc.generateStatement(U,Sa)]]});return S};D.prototype.maybeBlockSuffix=function(U,Sa){var S=l(k(Sa).toString());return U.type!==
ra.BlockStatement||md.comment&&U.leadingComments||S?S?[Sa,Ha]:[Sa,tc,Ha]:[Sa,Qb]};D.prototype.generatePattern=function(U,Sa,S){return U.type===ra.Identifier?F(U):this.generateExpression(U,Sa,S)};D.prototype.generateFunctionParams=function(U){var Sa;var S=!1;if(U.type!==ra.ArrowFunctionExpression||U.rest||U.defaults&&0!==U.defaults.length||1!==U.params.length||U.params[0].type!==ra.Identifier){var Sc=U.type===ra.ArrowFunctionExpression?[L(U,!1)]:[];Sc.push("(");U.defaults&&(S=!0);var xd=0;for(Sa=U.params.length;xd<
Sa;++xd)S&&U.defaults[xd]?Sc.push(this.generateAssignment(U.params[xd],U.defaults[xd],"=",Aa.Assignment,7)):Sc.push(this.generatePattern(U.params[xd],Aa.Assignment,7)),xd+1<Sa&&Sc.push(","+Qb);U.rest&&(U.params.length&&Sc.push(","+Qb),Sc.push("..."),Sc.push(F(U.rest)));Sc.push(")")}else Sc=[L(U,!0),F(U.params[0])];return Sc};D.prototype.generateFunctionBody=function(U){var Sa=this.generateFunctionParams(U);U.type===ra.ArrowFunctionExpression&&(Sa.push(Qb),Sa.push("=>"));U.expression?(Sa.push(Qb),
U=this.generateExpression(U.body,Aa.Assignment,7),"{"===U.toString().charAt(0)&&(U=["(",U,")"]),Sa.push(U)):Sa.push(this.maybeBlock(U.body,9));return Sa};D.prototype.generateIterationForStatement=function(U,Sa,S){var Sc=["for"+(Sa.await?n()+"await":"")+Qb+"("],xd=this;q(function(){Sa.left.type===ra.VariableDeclaration?q(function(){Sc.push(Sa.left.kind+n());Sc.push(xd.generateStatement(Sa.left.declarations[0],0))}):Sc.push(xd.generateExpression(Sa.left,Aa.Call,7));Sc=p(Sc,U);Sc=[p(Sc,xd.generateExpression(Sa.right,
Aa.Assignment,7)),")"]});Sc.push(this.maybeBlock(Sa.body,S));return Sc};D.prototype.generatePropertyKey=function(U,Sa){var S=[];Sa&&S.push("[");S.push(this.generateExpression(U,Aa.Assignment,7));Sa&&S.push("]");return S};D.prototype.generateAssignment=function(U,Sa,S,Sc,xd){Aa.Assignment<Sc&&(xd|=1);return x([this.generateExpression(U,Aa.Call,xd),Qb+S+Qb,this.generateExpression(Sa,Aa.Assignment,xd)],Aa.Assignment,Sc)};D.prototype.semicolon=function(U){return!Zb&&U&32?"":";"};D.Statement={BlockStatement:function(U,
Sa){var S,Sc,xd=["{",tc],Ae=this;q(function(){0===U.body.length&&Kd&&(S=U.range,2<S[1]-S[0]&&(Sc=dd.substring(S[0]+1,S[1]-1),"\n"===Sc[0]&&(xd=["{"]),xd.push(Sc)));var ee;var Fe=1;Sa&8&&(Fe|=16);var Mf=0;for(ee=U.body.length;Mf<ee;++Mf){Kd&&(0===Mf&&(U.body[0].leadingComments&&(S=U.body[0].leadingComments[0].extendedRange,Sc=dd.substring(S[0],S[1]),"\n"===Sc[0]&&(xd=["{"])),U.body[0].leadingComments||w(U.range[0],U.body[0].range[0],xd)),0<Mf&&(U.body[Mf-1].trailingComments||U.body[Mf].leadingComments||
w(U.body[Mf-1].range[1],U.body[Mf].range[0],xd)));Mf===ee-1&&(Fe|=32);var Tg=U.body[Mf].leadingComments&&Kd?Ae.generateStatement(U.body[Mf],Fe):[Ha,Ae.generateStatement(U.body[Mf],Fe)];xd.push(Tg);l(k(Tg).toString())||(Kd&&Mf<ee-1?U.body[Mf+1].leadingComments||xd.push(tc):xd.push(tc));Kd&&Mf===ee-1&&(U.body[Mf].trailingComments||w(U.body[Mf].range[1],U.range[1],xd))}});xd.push([Ha,"}"]);return xd},BreakStatement:function(U,Sa){return U.label?"break "+U.label.name+this.semicolon(Sa):"break"+this.semicolon(Sa)},
ContinueStatement:function(U,Sa){return U.label?"continue "+U.label.name+this.semicolon(Sa):"continue"+this.semicolon(Sa)},ClassBody:function(U,Sa){var S=["{",tc],Sc=this;q(function(xd){var Ae;var ee=0;for(Ae=U.body.length;ee<Ae;++ee)S.push(xd),S.push(Sc.generateExpression(U.body[ee],Aa.Sequence,7)),ee+1<Ae&&S.push(tc)});l(k(S).toString())||S.push(tc);S.push(Ha);S.push("}");return S},ClassDeclaration:function(U,Sa){Sa=[];var S;if(U.decorators.length){var Sc=ba(U.decorators);try{for(Sc.s();!(S=Sc.n()).done;)Sa.push(this.generateStatement(S.value)),
Sa.push(Ha)}catch(xd){Sc.e(xd)}finally{Sc.f()}}Sa.push("class");U.id&&(Sa=p(Sa,this.generateExpression(U.id,Aa.Sequence,7)));U.superClass&&(S=p("extends",this.generateExpression(U.superClass,Aa.Unary,7)),Sa=p(Sa,S));Sa.push(Qb);Sa.push(this.generateStatement(U.body,33));return Sa},DirectiveStatement:function(U,Sa){if(md.raw&&U.raw)return U.raw+this.semicolon(Sa);U=U.directive;var S;var Sc="double"===Ya?'"':"'";var xd=0;for(S=U.length;xd<S;++xd){var Ae=U.charCodeAt(xd);if(39===Ae){Sc='"';break}else if(34===
Ae){Sc="'";break}else 92===Ae&&++xd}return Sc+U+Sc+this.semicolon(Sa)},DoWhileStatement:function(U,Sa){var S=p("do",this.maybeBlock(U.body,1));S=this.maybeBlockSuffix(U.body,S);return p(S,["while"+Qb+"(",this.generateExpression(U.test,Aa.Sequence,7),")"+this.semicolon(Sa)])},CatchClause:function(U,Sa){var S,Sc=this;q(function(){if(U.param){if(S=["catch"+Qb+"(",Sc.generateExpression(U.param,Aa.Sequence,7),")"],U.guard){var xd=Sc.generateExpression(U.guard,Aa.Sequence,7);S.splice(2,0," if ",xd)}}else S=
["catch"]});S.push(this.maybeBlock(U.body,1));return S},DebuggerStatement:function(U,Sa){return"debugger"+this.semicolon(Sa)},EmptyStatement:function(U,Sa){return";"},ExportDefaultDeclaration:function(U,Sa){var S=["export"];var Sc=Sa&32?33:1;S=p(S,"default");return S=D.Statement.hasOwnProperty(U.declaration.type)?p(S,this.generateStatement(U.declaration,Sc)):p(S,this.generateExpression(U.declaration,Aa.Assignment,7)+this.semicolon(Sa))},ExportNamedDeclaration:function(U,Sa){var S=["export"],Sc=this;
var xd=Sa&32?33:1;if(U.declaration)return p(S,this.generateStatement(U.declaration,xd));U.specifiers&&(0===U.specifiers.length?S=p(S,"{"+Qb+"}"):U.specifiers[0].type===ra.ExportBatchSpecifier?S=p(S,this.generateExpression(U.specifiers[0],Aa.Sequence,7)):(S=p(S,"{"),q(function(Ae){var ee;S.push(tc);var Fe=0;for(ee=U.specifiers.length;Fe<ee;++Fe)S.push(Ae),S.push(Sc.generateExpression(U.specifiers[Fe],Aa.Sequence,7)),Fe+1<ee&&S.push(","+tc)}),l(k(S).toString())||S.push(tc),S.push(Ha+"}")),U.source?
S=p(S,["from"+Qb,this.generateExpression(U.source,Aa.Sequence,7),this.semicolon(Sa)]):S.push(this.semicolon(Sa)));return S},ExportAllDeclaration:function(U,Sa){var S=["export"+Qb,"*"+Qb];U.exported&&S.push("as "+U.exported.name+" ");return S=p(S,["from"+Qb,this.generateExpression(U.source,Aa.Sequence,7),this.semicolon(Sa)])},ExpressionStatement:function(U,Sa){function S(Fe){if("class"!==Fe.slice(0,5))return!1;Fe=Fe.charCodeAt(5);return 123===Fe||bi.esutils.code.isWhiteSpace(Fe)||bi.esutils.code.isLineTerminator(Fe)}
function Sc(Fe){if("function"!==Fe.slice(0,8))return!1;Fe=Fe.charCodeAt(8);return 40===Fe||bi.esutils.code.isWhiteSpace(Fe)||42===Fe||bi.esutils.code.isLineTerminator(Fe)}function xd(Fe){var Mf;if("async"!==Fe.slice(0,5)||!bi.esutils.code.isWhiteSpace(Fe.charCodeAt(5)))return!1;var Tg=6;for(Mf=Fe.length;Tg<Mf&&bi.esutils.code.isWhiteSpace(Fe.charCodeAt(Tg));++Tg);if(Tg===Mf||"function"!==Fe.slice(Tg,Tg+8))return!1;Fe=Fe.charCodeAt(Tg+8);return 40===Fe||bi.esutils.code.isWhiteSpace(Fe)||42===Fe||bi.esutils.code.isLineTerminator(Fe)}
var Ae=[this.generateExpression(U.expression,Aa.Sequence,7)];var ee=k(Ae).toString();123===ee.charCodeAt(0)||S(ee)||Sc(ee)||xd(ee)||Oa&&Sa&16&&U.expression.type===ra.Literal&&"string"===typeof U.expression.value?Ae=["(",Ae,")"+this.semicolon(Sa)]:Ae.push(this.semicolon(Sa));return Ae},ImportDeclaration:function(U,Sa){var S=this;if(0===U.specifiers.length)return["import",Qb,this.generateExpression(U.source,Aa.Sequence,7),this.semicolon(Sa)];var Sc=["import"];var xd=0;U.specifiers[xd].type===ra.ImportDefaultSpecifier&&
(Sc=p(Sc,[this.generateExpression(U.specifiers[xd],Aa.Sequence,7)]),++xd);U.specifiers[xd]&&(0!==xd&&Sc.push(","),U.specifiers[xd].type===ra.ImportNamespaceSpecifier?Sc=p(Sc,[Qb,this.generateExpression(U.specifiers[xd],Aa.Sequence,7)]):(Sc.push(Qb+"{"),1===U.specifiers.length-xd?(Sc.push(Qb),Sc.push(this.generateExpression(U.specifiers[xd],Aa.Sequence,7)),Sc.push(Qb+"}"+Qb)):(q(function(Ae){var ee;Sc.push(tc);var Fe=xd;for(ee=U.specifiers.length;Fe<ee;++Fe)Sc.push(Ae),Sc.push(S.generateExpression(U.specifiers[Fe],
Aa.Sequence,7)),Fe+1<ee&&Sc.push(","+tc)}),l(k(Sc).toString())||Sc.push(tc),Sc.push(Ha+"}"+Qb))));return Sc=p(Sc,["from"+Qb,this.generateExpression(U.source,Aa.Sequence,7),this.semicolon(Sa)])},VariableDeclarator:function(U,Sa){Sa=Sa&1?7:6;return U.init?[this.generateExpression(U.id,Aa.Assignment,Sa),Qb,"=",Qb,this.generateExpression(U.init,Aa.Assignment,Sa)]:this.generatePattern(U.id,Aa.Assignment,Sa)},VariableDeclaration:function(U,Sa){function S(){Ae=U.declarations[0];md.comment&&Ae.leadingComments?
(Fe.push("\n"),Fe.push([Ha,ee.generateStatement(Ae,Mf)])):(Fe.push(n()),Fe.push(ee.generateStatement(Ae,Mf)));Sc=1;for(xd=U.declarations.length;Sc<xd;++Sc)Ae=U.declarations[Sc],md.comment&&Ae.leadingComments?(Fe.push(","+tc),Fe.push([Ha,ee.generateStatement(Ae,Mf)])):(Fe.push(","+Qb),Fe.push(ee.generateStatement(Ae,Mf)))}var Sc,xd,Ae,ee=this;var Fe=[U.kind];var Mf=Sa&1?1:0;1<U.declarations.length?q(S):S();Fe.push(this.semicolon(Sa));return Fe},StaticBlock:function(U,Sa){return["static"+Qb,this.BlockStatement(U,
Sa)]},ThrowStatement:function(U,Sa){return[p("throw",this.generateExpression(U.argument,Aa.Sequence,7)),this.semicolon(Sa)]},TryStatement:function(U,Sa){var S;Sa=["try",this.maybeBlock(U.block,1)];Sa=this.maybeBlockSuffix(U.block,Sa);if(U.handlers){var Sc=0;for(S=U.handlers.length;Sc<S;++Sc)if(Sa=p(Sa,this.generateStatement(U.handlers[Sc],1)),U.finalizer||Sc+1!==S)Sa=this.maybeBlockSuffix(U.handlers[Sc].body,Sa)}else{var xd=U.guardedHandlers||[];Sc=0;for(S=xd.length;Sc<S;++Sc)if(Sa=p(Sa,this.generateStatement(xd[Sc],
1)),U.finalizer||Sc+1!==S)Sa=this.maybeBlockSuffix(xd[Sc].body,Sa);if(U.handler)if(Array.isArray(U.handler))for(Sc=0,S=U.handler.length;Sc<S;++Sc){if(Sa=p(Sa,this.generateStatement(U.handler[Sc],1)),U.finalizer||Sc+1!==S)Sa=this.maybeBlockSuffix(U.handler[Sc].body,Sa)}else Sa=p(Sa,this.generateStatement(U.handler,1)),U.finalizer&&(Sa=this.maybeBlockSuffix(U.handler.body,Sa))}U.finalizer&&(Sa=p(Sa,["finally",this.maybeBlock(U.finalizer,1)]));return Sa},SwitchStatement:function(U,Sa){var S,Sc,xd=this;
q(function(){S=["switch"+Qb+"(",xd.generateExpression(U.discriminant,Aa.Sequence,7),")"+Qb+"{"+tc]});if(U.cases){var Ae=1;var ee=0;for(Sc=U.cases.length;ee<Sc;++ee)ee===Sc-1&&(Ae|=32),Sa=[Ha,this.generateStatement(U.cases[ee],Ae)],S.push(Sa),l(k(Sa).toString())||S.push(tc)}S.push([Ha,"}"]);return S},SwitchCase:function(U,Sa){var S,Sc,xd,Ae,ee,Fe=this;q(function(){S=U.test?[p("case",Fe.generateExpression(U.test,Aa.Sequence,7)),":"]:["default:"];xd=0;(Ae=U.consequent.length)&&U.consequent[0].type===
ra.BlockStatement&&(Sc=Fe.maybeBlock(U.consequent[0],1),S.push(Sc),xd=1);xd===Ae||l(k(S).toString())||S.push(tc);for(ee=1;xd<Ae;++xd)xd===Ae-1&&Sa&32&&(ee|=32),Sc=[Ha,Fe.generateStatement(U.consequent[xd],ee)],S.push(Sc),xd+1===Ae||l(k(Sc).toString())||S.push(tc)});return S},IfStatement:function(U,Sa){var S=this;q(function(){xd=["if"+Qb+"(",S.generateExpression(U.test,Aa.Sequence,7),")"]});var Sc=1;Sa&32&&(Sc|=32);if(U.alternate){xd.push(this.maybeBlock(U.consequent,1));var xd=this.maybeBlockSuffix(U.consequent,
xd);xd=U.alternate.type===ra.IfStatement?p(xd,["else ",this.generateStatement(U.alternate,Sc)]):p(xd,p("else",this.maybeBlock(U.alternate,Sc)))}else xd.push(this.maybeBlock(U.consequent,Sc));return xd},ForStatement:function(U,Sa){var S,Sc=this;q(function(){S=["for"+Qb+"("];U.init?U.init.type===ra.VariableDeclaration?S.push(Sc.generateStatement(U.init,0)):(S.push(Sc.generateExpression(U.init,Aa.Sequence,6)),S.push(";")):S.push(";");U.test&&(S.push(Qb),S.push(Sc.generateExpression(U.test,Aa.Sequence,
7)));S.push(";");U.update&&(S.push(Qb),S.push(Sc.generateExpression(U.update,Aa.Sequence,7)));S.push(")")});S.push(this.maybeBlock(U.body,Sa&32?33:1));return S},ForInStatement:function(U,Sa){return this.generateIterationForStatement("in",U,Sa&32?33:1)},ForOfStatement:function(U,Sa){return this.generateIterationForStatement("of",U,Sa&32?33:1)},LabeledStatement:function(U,Sa){return[U.label.name+":",this.maybeBlock(U.body,Sa&32?33:1)]},Program:function(U,Sa){var S;var Sc=U.body.length;Sa=[$c&&0<Sc?
"\n":""];var xd=17;for(S=0;S<Sc;++S){$c||S!==Sc-1||(xd|=32);Kd&&(0===S&&(U.body[0].leadingComments||w(U.range[0],U.body[S].range[0],Sa)),0<S&&(U.body[S-1].trailingComments||U.body[S].leadingComments||w(U.body[S-1].range[1],U.body[S].range[0],Sa)));var Ae=[Ha,this.generateStatement(U.body[S],xd)];Sa.push(Ae);S+1<Sc&&!l(k(Ae).toString())&&(Kd?U.body[S+1].leadingComments||Sa.push(tc):Sa.push(tc));Kd&&S===Sc-1&&(U.body[S].trailingComments||w(U.body[S].range[1],U.range[1],Sa))}return Sa},FunctionDeclaration:function(U,
Sa){return[L(U,!0),"function",G(U)||n(),U.id?F(U.id):"",this.generateFunctionBody(U)]},ReturnStatement:function(U,Sa){return U.argument?[p("return",this.generateExpression(U.argument,Aa.Sequence,7)),this.semicolon(Sa)]:["return"+this.semicolon(Sa)]},WhileStatement:function(U,Sa){var S,Sc=this;q(function(){S=["while"+Qb+"(",Sc.generateExpression(U.test,Aa.Sequence,7),")"]});S.push(this.maybeBlock(U.body,Sa&32?33:1));return S},WithStatement:function(U,Sa){var S,Sc=this;q(function(){S=["with"+Qb+"(",
Sc.generateExpression(U.object,Aa.Sequence,7),")"]});S.push(this.maybeBlock(U.body,Sa&32?33:1));return S}};b(D.prototype,D.Statement);D.Expression={SequenceExpression:function(U,Sa,S){var Sc;Aa.Sequence<Sa&&(S|=1);var xd=[];var Ae=0;for(Sc=U.expressions.length;Ae<Sc;++Ae)xd.push(this.generateExpression(U.expressions[Ae],Aa.Assignment,S)),Ae+1<Sc&&xd.push(","+Qb);return x(xd,Aa.Sequence,Sa)},AssignmentExpression:function(U,Sa,S){return this.generateAssignment(U.left,U.right,U.operator,Sa,S)},ArrowFunctionExpression:function(U,
Sa,S){return x(this.generateFunctionBody(U),Aa.ArrowFunction,Sa)},ConditionalExpression:function(U,Sa,S){Aa.Conditional<Sa&&(S|=1);return x([this.generateExpression(U.test,Aa.LogicalOR,S),Qb+"?"+Qb,this.generateExpression(U.consequent,Aa.Assignment,S),Qb+":"+Qb,this.generateExpression(U.alternate,Aa.Assignment,S)],Aa.Conditional,Sa)},LogicalExpression:function(U,Sa,S){return this.BinaryExpression(U,Sa,S)},BinaryExpression:function(U,Sa,S){var Sc;var xd=Sc=V[U.operator];var Ae=Sc+1;switch(U.operator){case "**":xd=
Aa.Postfix;Ae=Sc;break;case "??":U.left.type!==ra.LogicalExpression||"||"!==U.left.operator&&"&&"!==U.left.operator||(xd=V[U.left.operator]+1);U.right.type===ra.LogicalExpression&&"&&"===U.right.operator&&(Ae=V[U.right.operator]+1);break;case "||":U.left.type===ra.LogicalExpression&&"??"===U.left.operator&&(xd=V[U.left.operator]+1)}Sc<Sa&&(S|=1);xd=this.generateExpression(U.left,xd,S);var ee=xd.toString();ee=47===ee.charCodeAt(ee.length-1)&&bi.esutils.code.isIdentifierPartES5(U.operator.charCodeAt(0))?
[xd,n(),U.operator]:p(xd,U.operator);xd=this.generateExpression(U.right,Ae,S);"/"===U.operator&&"/"===xd.toString().charAt(0)||"<"===U.operator.slice(-1)&&"!--"===xd.toString().slice(0,3)?(ee.push(n()),ee.push(xd)):ee=p(ee,xd);return"in"!==U.operator||S&1?x(ee,Sc,Sa):["(",ee,")"]},CallExpression:function(U,Sa,S){var Sc;var xd=[this.generateExpression(U.callee,Aa.Call,3)];U.optional&&xd.push("?.");xd.push("(");var Ae=0;for(Sc=U.arguments.length;Ae<Sc;++Ae)xd.push(this.generateExpression(U.arguments[Ae],
Aa.Assignment,7)),Ae+1<Sc&&xd.push(","+Qb);xd.push(")");return S&2?null===U.callee.id&&0===U.callee.params.length?x(xd,Sa,Aa.Call):x(xd,Aa.Call,Sa):["(",xd,")"]},ChainExpression:function(U,Sa,S){Aa.OptionalChaining<Sa&&(S|=2);U=this.generateExpression(U.expression,Aa.OptionalChaining,S);return x(U,Aa.OptionalChaining,Sa)},NewExpression:function(U,Sa,S){var Sc=U.arguments.length;var xd=p("new",this.generateExpression(U.callee,Aa.New,S&4&&!wc&&0===Sc?5:1));if(!(S&4)||wc||0<Sc){xd.push("(");for(S=0;S<
Sc;++S)xd.push(this.generateExpression(U.arguments[S],Aa.Assignment,7)),S+1<Sc&&xd.push(","+Qb);xd.push(")")}return x(xd,Aa.New,Sa)},MemberExpression:function(U,Sa,S){var Sc=[this.generateExpression(U.object,Aa.Call,S&2?3:1)];U.computed?(U.optional&&Sc.push("?."),Sc.push("["),Sc.push(this.generateExpression(U.property,Aa.Sequence,S&2?7:5)),Sc.push("]")):(U.optional||U.object.type!==ra.Literal||"number"!==typeof U.object.value||(S=k(Sc).toString(),0>S.indexOf(".")&&!/[eExX]/.test(S)&&bi.esutils.code.isDecimalDigit(S.charCodeAt(S.length-
1))&&!(2<=S.length&&48===S.charCodeAt(0))&&Sc.push(" ")),Sc.push(U.optional?"?.":"."),Sc.push(F(U.property)));return x(Sc,Aa.Member,Sa)},MetaProperty:function(U,Sa,S){S=[];S.push("string"===typeof U.meta?U.meta:F(U.meta));S.push(".");S.push("string"===typeof U.property?U.property:F(U.property));return x(S,Aa.Member,Sa)},UnaryExpression:function(U,Sa,S){var Sc=this.generateExpression(U.argument,Aa.Unary,7);if(""===Qb)S=p(U.operator,Sc);else if(S=[U.operator],2<U.operator.length)S=p(S,Sc);else{U=k(S).toString();
var xd=U.charCodeAt(U.length-1);U=Sc.toString().charCodeAt(0);((43===xd||45===xd)&&xd===U||bi.esutils.code.isIdentifierPartES5(xd)&&bi.esutils.code.isIdentifierPartES5(U))&&S.push(n());S.push(Sc)}return x(S,Aa.Unary,Sa)},YieldExpression:function(U,Sa,S){S=U.delegate?"yield*":"yield";U.argument&&(S=p(S,this.generateExpression(U.argument,Aa.Yield,7)));return x(S,Aa.Yield,Sa)},AwaitExpression:function(U,Sa,S){U=p(U.all?"await*":"await",this.generateExpression(U.argument,Aa.Await,7));return x(U,Aa.Await,
Sa)},UpdateExpression:function(U,Sa,S){return U.prefix?x([U.operator,this.generateExpression(U.argument,Aa.Unary,7)],Aa.Unary,Sa):x([this.generateExpression(U.argument,Aa.Postfix,7),U.operator],Aa.Postfix,Sa)},FunctionExpression:function(U,Sa,S){Sa=[L(U,!0),"function"];U.id?(Sa.push(G(U)||n()),Sa.push(F(U.id))):Sa.push(G(U)||Qb);Sa.push(this.generateFunctionBody(U));return Sa},ArrayPattern:function(U,Sa,S){return this.ArrayExpression(U,Sa,S,!0)},ArrayExpression:function(U,Sa,S,Sc){var xd=this;if(!U.elements.length)return"[]";
var Ae=Sc?!1:1<U.elements.length;var ee=["[",Ae?tc:""];q(function(Fe){var Mf;var Tg=0;for(Mf=U.elements.length;Tg<Mf;++Tg)U.elements[Tg]?(ee.push(Ae?Fe:""),ee.push(xd.generateExpression(U.elements[Tg],Aa.Assignment,7))):(Ae&&ee.push(Fe),Tg+1===Mf&&ee.push(",")),Tg+1<Mf&&ee.push(","+(Ae?tc:Qb))});Ae&&!l(k(ee).toString())&&ee.push(tc);ee.push(Ae?Ha:"");ee.push("]");return ee},RestElement:function(U,Sa,S){return"..."+this.generatePattern(U.argument)},ClassExpression:function(U,Sa,S){Sa=["class"];U.id&&
(Sa=p(Sa,this.generateExpression(U.id,Aa.Sequence,7)));U.superClass&&(S=p("extends",this.generateExpression(U.superClass,Aa.Unary,7)),Sa=p(Sa,S));Sa.push(Qb);Sa.push(this.generateStatement(U.body,33));return Sa},MethodDefinition:function(U,Sa,S){Sa=[];if(U.decorators.length){S=ba(U.decorators);var Sc;try{for(S.s();!(Sc=S.n()).done;)Sa.push(this.generateStatement(Sc.value)),Sa.push(Ha)}catch(xd){S.e(xd)}finally{S.f()}}U["static"]&&Sa.push("static"+Qb);U="get"===U.kind||"set"===U.kind?[p(U.kind,this.generatePropertyKey(U.key,
U.computed)),this.generateFunctionBody(U.value)]:[oa(U),this.generatePropertyKey(U.key,U.computed),this.generateFunctionBody(U.value)];return p(Sa,U)},PrivateIdentifier:function(U,Sa,S){return F(U)},Decorator:function(U,Sa,S){return["@",this.generateExpression(U.expression,Aa.Call,2),tc]},Property:function(U,Sa,S){return"get"===U.kind||"set"===U.kind?[U.kind,n(),this.generatePropertyKey(U.key,U.computed),this.generateFunctionBody(U.value)]:U.shorthand?"AssignmentPattern"===U.value.type?this.AssignmentPattern(U.value,
Aa.Sequence,7):this.generatePropertyKey(U.key,U.computed):U.method?[oa(U),this.generatePropertyKey(U.key,U.computed),this.generateFunctionBody(U.value)]:[this.generatePropertyKey(U.key,U.computed),":"+Qb,this.generateExpression(U.value,Aa.Assignment,7)]},PropertyDefinition:function(U,Sa,S){Sa=U["static"]?["static "]:[];Sa.push(this.generatePropertyKey(U.key,U.computed));U.value&&(Sa.push(Qb+"="+Qb),Sa.push(this.generateExpression(U.value,Aa.Assignment,7)));Sa.push(this.semicolon(S));return Sa},ObjectExpression:function(U,
Sa,S){var Sc,xd,Ae=this;if(!U.properties.length)return"{}";var ee=1<U.properties.length;q(function(){xd=Ae.generateExpression(U.properties[0],Aa.Sequence,7)});if(!ee&&!/[\r\n]/g.test(k(xd).toString()))return["{",Qb,xd,Qb,"}"];q(function(Fe){var Mf;Sc=["{",tc,Fe,xd];if(ee){Sc.push(","+tc);var Tg=1;for(Mf=U.properties.length;Tg<Mf;++Tg)Sc.push(Fe),Sc.push(Ae.generateExpression(U.properties[Tg],Aa.Sequence,7)),Tg+1<Mf&&Sc.push(","+tc)}});l(k(Sc).toString())||Sc.push(tc);Sc.push(Ha);Sc.push("}");return Sc},
AssignmentPattern:function(U,Sa,S){return this.generateAssignment(U.left,U.right,"=",Sa,S)},ObjectPattern:function(U,Sa,S){var Sc=this;if(!U.properties.length)return"{}";var xd=!1;if(1===U.properties.length){var Ae=U.properties[0];Ae.type===ra.Property&&Ae.value.type!==ra.Identifier&&(xd=!0)}else for(Sa=0,S=U.properties.length;Sa<S;++Sa)if(Ae=U.properties[Sa],Ae.type===ra.Property&&!Ae.shorthand){xd=!0;break}var ee=["{",xd?tc:""];q(function(Fe){var Mf;var Tg=0;for(Mf=U.properties.length;Tg<Mf;++Tg)ee.push(xd?
Fe:""),ee.push(Sc.generateExpression(U.properties[Tg],Aa.Sequence,7)),Tg+1<Mf&&ee.push(","+(xd?tc:Qb))});xd&&!l(k(ee).toString())&&ee.push(tc);ee.push(xd?Ha:"");ee.push("}");return ee},ThisExpression:function(U,Sa,S){return"this"},Super:function(U,Sa,S){return"super"},Identifier:function(U,Sa,S){return F(U)},ImportDefaultSpecifier:function(U,Sa,S){return F(U.id||U.local)},ImportNamespaceSpecifier:function(U,Sa,S){Sa=["*"];(U=U.id||U.local)&&Sa.push(Qb+"as"+n()+F(U));return Sa},ImportSpecifier:function(U,
Sa,S){Sa=U.imported;S=[Sa.name];(U=U.local)&&U.name!==Sa.name&&S.push(n()+"as"+n()+F(U));return S},ExportSpecifier:function(U,Sa,S){Sa=U.local;S=[Sa.name];(U=U.exported)&&U.name!==Sa.name&&S.push(n()+"as"+n()+F(U));return S},Literal:function(U,Sa,S){if(U.hasOwnProperty("raw")&&la&&md.raw)try{var Sc=la(U.raw).body[0].expression;if(Sc.type===ra.Literal&&Sc.value===U.value)return U.raw}catch(Tg){}if(U.regex)return"/"+U.regex.pattern+"/"+U.regex.flags;if("string"===typeof U.bigint&&U.raw)return U.raw;
if(null===U.value)return"null";if("string"===typeof U.value){U=U.value;Sa="";var xd=0,Ae=0,ee;S=0;for(Sc=U.length;S<Sc;++S){var Fe=U.charCodeAt(S);if(39===Fe)++xd;else if(34===Fe)++Ae;else if(47===Fe&&hc)Sa+="\\";else if(bi.esutils.code.isLineTerminator(Fe)||92===Fe){Sa+=d(Fe);continue}else if(!bi.esutils.code.isIdentifierPartES5(Fe)&&(hc&&32>Fe||!hc&&!xa&&(32>Fe||126<Fe))){Sa+=a(Fe,U.charCodeAt(S+1));continue}Sa+=String.fromCharCode(Fe)}var Mf=(ee=!("double"===Ya||"auto"===Ya&&Ae<xd))?"'":'"';if(ee?
xd:Ae){U=Sa;Sa=Mf;S=0;for(Sc=U.length;S<Sc;++S){Fe=U.charCodeAt(S);if(39===Fe&&ee||34===Fe&&!ee)Sa+="\\";Sa+=String.fromCharCode(Fe)}U=Sa+Mf}else U=Mf+Sa+Mf;return U}if("number"===typeof U.value){if(U.raw&&-1!==U.raw.indexOf("_"))return U.raw;U=U.value;if(U!==U)throw Error("Numeric literal whose value is NaN");if(0>U||0===U&&0>1/U)throw Error("Numeric literal whose value is negative");if(U===1/0)U=hc?"null":qc?"1e400":"1e+400";else{Sa=""+U;if(qc&&!(3>Sa.length)){S=Sa.indexOf(".");hc||48!==Sa.charCodeAt(0)||
1!==S||(S=0,Sa=Sa.slice(1));Sc=Sa;Sa=Sa.replace("e+","e");Fe=0;0<(xd=Sc.indexOf("e"))&&(Fe=+Sc.slice(xd+1),Sc=Sc.slice(0,xd));0<=S&&(Fe-=Sc.length-S-1,Sc=+(Sc.slice(0,S)+Sc.slice(S+1))+"");for(xd=0;48===Sc.charCodeAt(Sc.length+xd-1);)--xd;0!==xd&&(Fe-=xd,Sc=Sc.slice(0,xd));0!==Fe&&(Sc+="e"+Fe);(Sc.length<Sa.length||jc&&1E12<U&&Math.floor(U)===U&&(Sc="0x"+U.toString(16)).length<Sa.length)&&+Sc===U&&(Sa=Sc)}U=Sa}return U}if("boolean"===typeof U.value)return U.value?"true":"false";U=U.value;Sa=U.toString();
if(U.source)if(S=Sa.match(/\/([^/]*)$/)){S=S[1];Sa="";ee=Ae=!1;Sc=0;for(Fe=U.source.length;Sc<Fe;++Sc)xd=U.source.charCodeAt(Sc),ee?(Sa+=g(xd,ee),ee=!1):(Ae?93===xd&&(Ae=!1):47===xd?Sa+="\\":91===xd&&(Ae=!0),Sa+=g(xd,ee),ee=92===xd);U="/"+Sa+"/"+S}else U=Sa;else U=Sa;return U},GeneratorExpression:function(U,Sa,S){return this.ComprehensionExpression(U,Sa,S)},ComprehensionExpression:function(U,Sa,S){var Sc,xd,Ae=this;var ee=U.type===ra.GeneratorExpression?["("]:["["];if(md.moz.comprehensionExpressionStartsWithAssignment){var Fe=
this.generateExpression(U.body,Aa.Assignment,7);ee.push(Fe)}U.blocks&&q(function(){Sc=0;for(xd=U.blocks.length;Sc<xd;++Sc)Fe=Ae.generateExpression(U.blocks[Sc],Aa.Sequence,7),0<Sc||md.moz.comprehensionExpressionStartsWithAssignment?ee=p(ee,Fe):ee.push(Fe)});U.filter&&(ee=p(ee,"if"+Qb),Fe=this.generateExpression(U.filter,Aa.Sequence,7),ee=p(ee,["(",Fe,")"]));md.moz.comprehensionExpressionStartsWithAssignment||(Fe=this.generateExpression(U.body,Aa.Assignment,7),ee=p(ee,Fe));ee.push(U.type===ra.GeneratorExpression?
")":"]");return ee},ComprehensionBlock:function(U,Sa,S){Sa=U.left.type===ra.VariableDeclaration?[U.left.kind,n(),this.generateStatement(U.left.declarations[0],0)]:this.generateExpression(U.left,Aa.Call,7);Sa=p(Sa,U.of?"of":"in");Sa=p(Sa,this.generateExpression(U.right,Aa.Sequence,7));return["for"+Qb+"(",Sa,")"]},SpreadElement:function(U,Sa,S){return["...",this.generateExpression(U.argument,Aa.Assignment,7)]},TaggedTemplateExpression:function(U,Sa,S){var Sc=3;S&2||(Sc=1);U=[this.generateExpression(U.tag,
Aa.Call,Sc),this.generateExpression(U.quasi,Aa.Primary,4)];return x(U,Aa.TaggedTemplate,Sa)},TemplateElement:function(U,Sa,S){return U.value.raw},TemplateLiteral:function(U,Sa,S){var Sc;Sa=["`"];S=0;for(Sc=U.quasis.length;S<Sc;++S)Sa.push(this.generateExpression(U.quasis[S],Aa.Primary,7)),S+1<Sc&&(Sa.push("${"+Qb),Sa.push(this.generateExpression(U.expressions[S],Aa.Sequence,7)),Sa.push(Qb+"}"));Sa.push("`");return Sa},ModuleSpecifier:function(U,Sa,S){return this.Literal(U,Sa,S)},ImportExpression:function(U,
Sa,S){return x(["import(",this.generateExpression(U.source,Aa.Assignment,7),")"],Aa.Call,Sa)}};b(D.prototype,D.Expression);D.prototype.generateExpression=function(U,Sa,S){var Sc=U.type||ra.Property;if(md.verbatim&&U.hasOwnProperty(md.verbatim))return Sc=U[md.verbatim],"string"===typeof Sc?S=x(B(Sc),Aa.Sequence,Sa):(S=B(Sc.content),Sc=null!=Sc.precedence?Sc.precedence:Aa.Sequence,S=x(S,Sc,Sa)),k(S,U);Sa=this[Sc](U,Sa,S);md.comment&&(Sa=t(U,Sa));return k(Sa,U)};D.prototype.generateStatement=function(U,
Sa){Sa=this[U.type](U,Sa);md.comment&&(Sa=t(U,Sa));var S=k(Sa).toString();U.type!==ra.Program||$c||""!==tc||"\n"!==S.charAt(S.length-1)||(Sa=$a?k(Sa).replaceRight(/\s+$/,""):S.replace(/\s+$/,""));return k(Sa,U)};var ea={};var Mb=e().format;ea.generate=function(U,Sa){var S=e();null!=Sa?("string"===typeof Sa.indent&&(S.format.indent.style=Sa.indent),"number"===typeof Sa.base&&(S.format.indent.base=Sa.base),Sa=c(S,Sa),Va=Sa.format.indent.style,Ha="string"===typeof Sa.base?Sa.base:h(Va,Sa.format.indent.base)):
(Sa=S,Va=Sa.format.indent.style,Ha=h(Va,Sa.format.indent.base));hc=Sa.format.json;qc=Sa.format.renumber;jc=hc?!1:Sa.format.hexadecimal;Ya=hc?"double":Sa.format.quotes;xa=Sa.format.escapeless;tc=Sa.format.newline;Qb=Sa.format.space;Sa.format.compact&&(tc=Qb=Va=Ha="");wc=Sa.format.parentheses;Zb=Sa.format.semicolons;$c=Sa.format.safeConcatenation;Oa=Sa.directive;la=hc?null:Sa.parse;$a=Sa.sourceMap;dd=Sa.sourceCode;Kd=Sa.format.preserveBlankLines&&null!==dd;md=Sa;$a&&(ha=ea.browser?global.sourceMap.SourceNode:
System._nodeRequire("source-map").SourceNode);S=new D;if(D.Statement.hasOwnProperty(U.type))U=S.generateStatement(U,1);else if(D.Expression.hasOwnProperty(U.type))U=S.generateExpression(U,Aa.Sequence,7);else throw Error("Unknown node type: "+U.type);if(!$a)return U={code:U.toString(),map:null},Sa.sourceMapWithCode?U:U.code;U=U.toStringWithSourceMap({file:Sa.file,sourceRoot:Sa.sourceMapRoot});Sa.sourceContent&&U.map.setSourceContent(Sa.sourceMap,Sa.sourceContent);return Sa.sourceMapWithCode?U:U.map.toString()};
ea.attachComments=bi.estraverse.attachComments;ea.Precedence=c({},Aa);ea.browser=!1;ea.FORMAT_MINIFY={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1};ea.FORMAT_DEFAULTS=Mb;return ea};bi.stringify=Ek;bi.obj=nh;bi.estraverse=cx;bi.esutils=Mu;bi.es=bi.ESCODEGEN();var dx=bi.es;bi.escodegen=dx;bi.es=dx;bi["default"]=Ek;var aR={exports:{}},ql=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/acorn/8.0.4/dist/acorn.js");
ql.requireAcorn=Fk;ql.commonjsHelpers=mk;ql.acornModule=aR;ql.acorn=aR.exports;ql.hasRequiredAcorn=ql.hasRequiredAcorn||void 0;ql.__require=Fk;ql.requireAcorn=Fk;const zk=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/acorn-decorators.cjs");zk.commonjsHelpers=mk;zk.require$$0=Fk;zk.acorn=zk.require$$0();zk.getAcorn=e=>{if(e.acorn)return e.acorn;if(0!==zk.acorn.version.indexOf("6.")&&0===zk.acorn.version.indexOf("6.0.")&&0!==zk.acorn.version.indexOf("7."))throw Error(`acorn-private-class-elements requires acorn@^6.1.0 or acorn@7.0.0, not ${zk.acorn.version}`);
for(;e&&e!==zk.acorn.Parser;e=Object.getPrototypeOf(e))if(e!==zk.acorn.Parser)throw Error("acorn-private-class-elements does not support mixing different acorn copies");return zk.acorn};zk.acornDecorators=function(e){if(e.prototype._parseDecorator)return e;const h=zk.getAcorn(e);class l extends e{_parseDecorator(){let b=this.startNode();this.next();b.expression=this.parseMaybeUnary();return this.finishNode(b,"Decorator")}getTokenFromCode(b){return 64===b?(++this.pos,this.finishToken(this.decoratorIdentifier)):
super.getTokenFromCode(b)}parseStatement(b,c,g){let a=[];switch(this.type){case this.decoratorIdentifier:for(;this.type===this.decoratorIdentifier;)a.push(this._parseDecorator());this.type!==h.tokTypes._class&&this.raise(this.start,"Leading decorators must be attached to a class declaration");case h.tokTypes._class:return b&&this.unexpected(),b=super.parseStatement(b,c,g),b.decorators=a,a.length&&(b.start=b.decorators[0].start),b}return super.parseStatement(b,c,g)}parseClass(b,c){b=super.parseClass(b,
c);b.decorators=[];return b}parseClassElement(b){let c=[];switch(this.type){case this.decoratorIdentifier:for(;this.type===this.decoratorIdentifier;)c.push(this._parseDecorator());this.type!==h.tokTypes.name&&this.type!==h.tokTypes.star&&this.raise(this.start,"Inline decorators must be attached to a property declaration");case this.privateIdentifierToken:case h.tokTypes.star:case h.tokTypes.bracketL:case h.tokTypes.name:case h.tokTypes._with:case h.tokTypes._delete:return b=super.parseClassElement(b),
b.decorators=c,c.length&&(b.start=b.decorators[0].start),b}return super.parseClassElement(b)}}l.prototype.decoratorIdentifier=new h.TokenType("decorator-Identifier");return l};var ex=zk.acornDecorators,S0=ex;ex=zk.acornDecorators;zk.__moduleExports=ex;zk.acornDecorators=ex;zk.default=ex;var fm=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/acorn-private-class-elements/1.0.0/index.js");fm.commonjsHelpers=mk;fm.require$$0=Fk;fm.getPrototype=Object.getPrototypeOf||function(e){return e.__proto__};
fm.getAcorn=function(e){if(e.acorn)return e.acorn;var h=fm.require$$0();if(0!=h.version.indexOf("6.")&&0==h.version.indexOf("6.0.")&&0!=h.version.indexOf("7."))throw Error("acorn-private-class-elements requires acorn@^6.1.0 or acorn@7.0.0, not ".concat(h.version));for(;e&&e!==h.Parser;e=fm.getPrototype(e))if(e!==h.Parser)throw Error("acorn-private-class-elements does not support mixing different acorn copies");return h};fm._1_0_0=function(e){if(e.prototype.parsePrivateName)return e;var h=fm.getAcorn(e);
e=function(l){function b(){rd(this,b);return c.apply(this,arguments)}gd(b,l);var c=sb(b);Ac(b,[{key:"_branch",value:function(){this.__branch=this.__branch||new e({ecmaVersion:this.options.ecmaVersion},this.input);this.__branch.end=this.end;this.__branch.pos=this.pos;this.__branch.type=this.type;this.__branch.value=this.value;this.__branch.containsEsc=this.containsEsc;return this.__branch}},{key:"parsePrivateClassElementName",value:function(g){g.computed=!1;g.key=this.parsePrivateName();"constructor"==
g.key.name&&this.raise(g.key.start,"Classes may not have a private element named constructor");var a={get:"set",set:"get"}[g.kind],d=this._privateBoundNames;Object.prototype.hasOwnProperty.call(d,g.key.name)&&d[g.key.name]!==a&&this.raise(g.start,"Duplicate private element");d[g.key.name]=g.kind||!0;delete this._unresolvedPrivateNames[g.key.name];return g.key}},{key:"parsePrivateName",value:function(){var g=this.startNode();g.name=this.value;this.next();this.finishNode(g,"PrivateIdentifier");"never"==
this.options.allowReserved&&this.checkUnreserved(g);return g}},{key:"getTokenFromCode",value:function(g){return 35===g?(++this.pos,g=this.readWord1(),this.finishToken(this.privateIdentifierToken,g)):Xb(nd(b.prototype),"getTokenFromCode",this).call(this,g)}},{key:"parseClass",value:function(g,a){var d=this._outerPrivateBoundNames;this._outerPrivateBoundNames=this._privateBoundNames;this._privateBoundNames=Object.create(this._privateBoundNames||null);var f=this._outerUnresolvedPrivateNames;this._outerUnresolvedPrivateNames=
this._unresolvedPrivateNames;this._unresolvedPrivateNames=Object.create(null);g=Xb(nd(b.prototype),"parseClass",this).call(this,g,a);var k=this._unresolvedPrivateNames;this._privateBoundNames=this._outerPrivateBoundNames;this._outerPrivateBoundNames=d;this._unresolvedPrivateNames=this._outerUnresolvedPrivateNames;this._outerUnresolvedPrivateNames=f;this._unresolvedPrivateNames?Object.assign(this._unresolvedPrivateNames,k):(d=Object.keys(k),d.length&&(d.sort(function(n,p){return k[n]-k[p]}),this.raise(k[d[0]],
"Usage of undeclared private name")));return g}},{key:"parseClassSuper",value:function(g){var a=this._privateBoundNames;this._privateBoundNames=this._outerPrivateBoundNames;var d=this._unresolvedPrivateNames;this._unresolvedPrivateNames=this._outerUnresolvedPrivateNames;g=Xb(nd(b.prototype),"parseClassSuper",this).call(this,g);this._privateBoundNames=a;this._unresolvedPrivateNames=d;return g}},{key:"parseSubscript",value:function(g,a,d,f,k,n){var p=11<=this.options.ecmaVersion&&h.tokTypes.questionDot,
q=this._branch();if(!(q.eat(h.tokTypes.dot)||p&&q.eat(h.tokTypes.questionDot))||q.type!=this.privateIdentifierToken)return Xb(nd(b.prototype),"parseSubscript",this).apply(this,arguments);q=!1;this.eat(h.tokTypes.dot)||(this.expect(h.tokTypes.questionDot),q=!0);var r=this.startNodeAt(a,d);r.object=g;r.computed=!1;p&&(r.optional=q);this.type==this.privateIdentifierToken?("Super"==g.type&&this.raise(this.start,"Cannot access private element on super"),r.property=this.parsePrivateName(),this._privateBoundNames&&
this._privateBoundNames[r.property.name]||(this._unresolvedPrivateNames||this.raise(r.property.start,"Usage of undeclared private name"),this._unresolvedPrivateNames[r.property.name]=r.property.start)):r.property=this.parseIdent(!0);return this.finishNode(r,"MemberExpression")}},{key:"parseMaybeUnary",value:function(g,a){g=Xb(nd(b.prototype),"parseMaybeUnary",this).call(this,g,a);"delete"==g.operator&&"MemberExpression"==g.argument.type&&"PrivateIdentifier"==g.argument.property.type&&this.raise(g.start,
"Private elements may not be deleted");return g}}]);return b}(e);e.prototype.privateIdentifierToken=new h.TokenType("privateIdentifier");return e};var qs=fm._1_0_0;qs=fm._1_0_0;fm.__moduleExports=qs;fm._1_0_0=qs;fm["default"]=qs;var gm=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/acorn-class-fields/1.0.0/index.js");gm.commonjsHelpers=mk;gm.require$$0=qs;gm.require$$1=Fk;gm.privateClassElements=gm.require$$0;gm._1_0_0=function(e){var h=(e.acorn||gm.require$$1()).tokTypes;e=gm.privateClassElements(e);
return function(l){function b(){rd(this,b);return c.apply(this,arguments)}gd(b,l);var c=sb(b);Ac(b,[{key:"_maybeParseFieldValue",value:function(g){if(this.eat(h.eq)){var a=this._inFieldValue;this._inFieldValue=!0;g.value=this.type===h.name&&"await"===this.value&&(this.inAsync||this.options.allowAwaitOutsideFunction)?this.parseAwait():this.parseExpression();this._inFieldValue=a}else g.value=null}},{key:"parseClassElement",value:function(g){if(8<=this.options.ecmaVersion&&(this.type==h.name||this.type.keyword||
this.type==this.privateIdentifierToken||this.type==h.bracketL||this.type==h.string||this.type==h.num)){var a=this._branch();if(a.type==h.bracketL){var d=0;do a.eat(h.bracketL)?++d:a.eat(h.bracketR)?--d:a.next();while(0<d)}else a.next(!0);d=a.type==h.eq||a.type==h.semi;!d&&a.canInsertSemicolon()&&(d=a.type!=h.parenL);if(d)return a=this.startNode(),this.type==this.privateIdentifierToken?this.parsePrivateClassElementName(a):this.parsePropertyName(a),("Identifier"===a.key.type&&"constructor"===a.key.name||
"Literal"===a.key.type&&"constructor"===a.key.value)&&this.raise(a.key.start,"Classes may not have a field called constructor"),this.enterScope(67),this._maybeParseFieldValue(a),this.exitScope(),this.finishNode(a,"PropertyDefinition"),this.semicolon(),a}return Xb(nd(b.prototype),"parseClassElement",this).apply(this,arguments)}},{key:"parseIdent",value:function(g,a){g=Xb(nd(b.prototype),"parseIdent",this).call(this,g,a);this._inFieldValue&&"arguments"==g.name&&this.raise(g.start,"A class field initializer may not contain arguments");
return g}}]);return b}(e)};var fx=gm._1_0_0,T0=fx;fx=gm._1_0_0;gm.__moduleExports=fx;gm._1_0_0=fx;gm["default"]=fx;var hm=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/acorn-static-class-features/1.0.0/index.js");hm.commonjsHelpers=mk;hm.require$$0=qs;hm.require$$1=Fk;hm.privateClassElements=hm.require$$0;hm._1_0_0=function(e){var h=hm.privateClassElements(e),l=(e.acorn||hm.require$$1()).tokTypes;return function(b){function c(){rd(this,c);return g.apply(this,arguments)}gd(c,b);
var g=sb(c);Ac(c,[{key:"_maybeParseFieldValue",value:function(a){if(this.eat(l.eq)){var d=this._inStaticFieldScope;this._inStaticFieldScope=this.currentThisScope();a.value=this.parseExpression();this._inStaticFieldScope=d}else a.value=null}},{key:"parseClassElement",value:function(a){if(8>this.options.ecmaVersion||!this.isContextual("static"))return Xb(nd(c.prototype),"parseClassElement",this).apply(this,arguments);var d=this._branch();d.next();if(-1==[l.name,l.bracketL,l.string,l.num,this.privateIdentifierToken].indexOf(d.type)&&
!d.type.keyword)return Xb(nd(c.prototype),"parseClassElement",this).apply(this,arguments);if(d.type==l.bracketL){var f=0;do d.eat(l.bracketL)?++f:d.eat(l.bracketR)?--f:d.next();while(0<f)}else d.next();if(d.type!=l.eq&&!d.canInsertSemicolon()&&d.type!=l.semi)return Xb(nd(c.prototype),"parseClassElement",this).apply(this,arguments);d=this.startNode();d["static"]=this.eatContextual("static");this.type==this.privateIdentifierToken?this.parsePrivateClassElementName(d):this.parsePropertyName(d);("Identifier"===
d.key.type&&"constructor"===d.key.name||"Literal"===d.key.type&&!d.computed&&"constructor"===d.key.value)&&this.raise(d.key.start,"Classes may not have a field called constructor");"prototype"!==(d.key.name||d.key.value)||d.computed||this.raise(d.key.start,"Classes may not have a static property named prototype");this.enterScope(67);this._maybeParseFieldValue(d);this.exitScope();this.finishNode(d,"PropertyDefinition");this.semicolon();return d}},{key:"parsePropertyName",value:function(a){a["static"]&&
this.type==this.privateIdentifierToken?this.parsePrivateClassElementName(a):Xb(nd(c.prototype),"parsePropertyName",this).call(this,a)}},{key:"parseIdent",value:function(a,d){a=Xb(nd(c.prototype),"parseIdent",this).call(this,a,d);this._inStaticFieldScope&&this.currentThisScope()===this._inStaticFieldScope&&"arguments"==a.name&&this.raise(a.start,"A static class field initializer may not contain arguments");return a}}]);return c}(h)};var gx=hm._1_0_0,U0=gx;gx=hm._1_0_0;hm.__moduleExports=gx;hm._1_0_0=
gx;hm["default"]=gx;var Zk=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/acorn-private-methods/1.0.0/dist/acorn-private-methods.js");Zk._interopDefaultLegacy=function(e){return e&&"object"===Jc(e)&&"default"in e?e:{"default":e}};Zk.privateMethods=function(e){return function(h){function l(){rd(this,l);return b.apply(this,arguments)}gd(l,h);var b=sb(l);Ac(l,[{key:"parseClassElement",value:function(c){var g=this._inClassMemberName;this._inClassMemberName=!0;var a=Xb(nd(l.prototype),
"parseClassElement",this).apply(this,arguments);this._inClassMemberName=g;return a}},{key:"parsePropertyName",value:function(c){var g=8<=this.options.ecmaVersion&&this._inClassMemberName&&this.type==this.privateIdentifierToken&&!c["static"];this._inClassMemberName=!1;return g?this.parsePrivateClassElementName(c):Xb(nd(l.prototype),"parsePropertyName",this).call(this,c)}}]);return l}(Zk.privateClassElements__default["default"](e))};Zk.commonjsHelpers=mk;Zk.require$$0=qs;Zk.privateClassElements=Zk.require$$0;
Zk.privateClassElements__default=Zk._interopDefaultLegacy(Zk.privateClassElements);Zk.acornPrivateMethods=Zk.privateMethods;var hx=Zk.acornPrivateMethods,V0=hx;hx=Zk.acornPrivateMethods;Zk.__moduleExports=hx;Zk.acornPrivateMethods=hx;Zk["default"]=hx;var bR=Fk(),W0=Object.freeze(Tc({__proto__:null,"default":bR},[bR])),rs={exports:{}},pp=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/acorn-walk/8.2.0/dist/walk.js");pp.commonjsHelpers=mk;pp.walkModule=rs;pp.walk=rs.exports;(function(e,
h){(function(l,b){b(h)})(pp.commonjsHelpers.commonjsGlobal,function(l){function b(k){return"string"===typeof k?function(n){return n===k}:k?k:function(){return!0}}function c(k,n){n=Object.create(n||f);for(var p in k)n[p]=k[p];return n}function g(k,n,p){p(k,n)}function a(k,n,p){}var d=function(k,n){this.node=k;this.state=n},f={};f.Program=f.BlockStatement=f.StaticBlock=function(k,n,p){var q=0;for(k=k.body;q<k.length;q+=1)p(k[q],n,"Statement")};f.Statement=g;f.EmptyStatement=a;f.ExpressionStatement=
f.ParenthesizedExpression=f.ChainExpression=function(k,n,p){return p(k.expression,n,"Expression")};f.IfStatement=function(k,n,p){p(k.test,n,"Expression");p(k.consequent,n,"Statement");k.alternate&&p(k.alternate,n,"Statement")};f.LabeledStatement=function(k,n,p){return p(k.body,n,"Statement")};f.BreakStatement=f.ContinueStatement=a;f.WithStatement=function(k,n,p){p(k.object,n,"Expression");p(k.body,n,"Statement")};f.SwitchStatement=function(k,n,p){p(k.discriminant,n,"Expression");var q=0;for(k=k.cases;q<
k.length;q+=1){var r=k[q];r.test&&p(r.test,n,"Expression");var t=0;for(r=r.consequent;t<r.length;t+=1)p(r[t],n,"Statement")}};f.SwitchCase=function(k,n,p){k.test&&p(k.test,n,"Expression");var q=0;for(k=k.consequent;q<k.length;q+=1)p(k[q],n,"Statement")};f.ReturnStatement=f.YieldExpression=f.AwaitExpression=function(k,n,p){k.argument&&p(k.argument,n,"Expression")};f.ThrowStatement=f.SpreadElement=function(k,n,p){return p(k.argument,n,"Expression")};f.TryStatement=function(k,n,p){p(k.block,n,"Statement");
k.handler&&p(k.handler,n);k.finalizer&&p(k.finalizer,n,"Statement")};f.CatchClause=function(k,n,p){k.param&&p(k.param,n,"Pattern");p(k.body,n,"Statement")};f.WhileStatement=f.DoWhileStatement=function(k,n,p){p(k.test,n,"Expression");p(k.body,n,"Statement")};f.ForStatement=function(k,n,p){k.init&&p(k.init,n,"ForInit");k.test&&p(k.test,n,"Expression");k.update&&p(k.update,n,"Expression");p(k.body,n,"Statement")};f.ForInStatement=f.ForOfStatement=function(k,n,p){p(k.left,n,"ForInit");p(k.right,n,"Expression");
p(k.body,n,"Statement")};f.ForInit=function(k,n,p){"VariableDeclaration"===k.type?p(k,n):p(k,n,"Expression")};f.DebuggerStatement=a;f.FunctionDeclaration=function(k,n,p){return p(k,n,"Function")};f.VariableDeclaration=function(k,n,p){var q=0;for(k=k.declarations;q<k.length;q+=1)p(k[q],n)};f.VariableDeclarator=function(k,n,p){p(k.id,n,"Pattern");k.init&&p(k.init,n,"Expression")};f.Function=function(k,n,p){k.id&&p(k.id,n,"Pattern");for(var q=0,r=k.params;q<r.length;q+=1)p(r[q],n,"Pattern");p(k.body,
n,k.expression?"Expression":"Statement")};f.Pattern=function(k,n,p){"Identifier"===k.type?p(k,n,"VariablePattern"):"MemberExpression"===k.type?p(k,n,"MemberPattern"):p(k,n)};f.VariablePattern=a;f.MemberPattern=g;f.RestElement=function(k,n,p){return p(k.argument,n,"Pattern")};f.ArrayPattern=function(k,n,p){var q=0;for(k=k.elements;q<k.length;q+=1){var r=k[q];r&&p(r,n,"Pattern")}};f.ObjectPattern=function(k,n,p){var q=0;for(k=k.properties;q<k.length;q+=1){var r=k[q];"Property"===r.type?(r.computed&&
p(r.key,n,"Expression"),p(r.value,n,"Pattern")):"RestElement"===r.type&&p(r.argument,n,"Pattern")}};f.Expression=g;f.ThisExpression=f.Super=f.MetaProperty=a;f.ArrayExpression=function(k,n,p){var q=0;for(k=k.elements;q<k.length;q+=1){var r=k[q];r&&p(r,n,"Expression")}};f.ObjectExpression=function(k,n,p){var q=0;for(k=k.properties;q<k.length;q+=1)p(k[q],n)};f.FunctionExpression=f.ArrowFunctionExpression=f.FunctionDeclaration;f.SequenceExpression=function(k,n,p){var q=0;for(k=k.expressions;q<k.length;q+=
1)p(k[q],n,"Expression")};f.TemplateLiteral=function(k,n,p){for(var q=0,r=k.quasis;q<r.length;q+=1)p(r[q],n);q=0;for(k=k.expressions;q<k.length;q+=1)p(k[q],n,"Expression")};f.TemplateElement=a;f.UnaryExpression=f.UpdateExpression=function(k,n,p){p(k.argument,n,"Expression")};f.BinaryExpression=f.LogicalExpression=function(k,n,p){p(k.left,n,"Expression");p(k.right,n,"Expression")};f.AssignmentExpression=f.AssignmentPattern=function(k,n,p){p(k.left,n,"Pattern");p(k.right,n,"Expression")};f.ConditionalExpression=
function(k,n,p){p(k.test,n,"Expression");p(k.consequent,n,"Expression");p(k.alternate,n,"Expression")};f.NewExpression=f.CallExpression=function(k,n,p){p(k.callee,n,"Expression");if(k.arguments){var q=0;for(k=k.arguments;q<k.length;q+=1)p(k[q],n,"Expression")}};f.MemberExpression=function(k,n,p){p(k.object,n,"Expression");k.computed&&p(k.property,n,"Expression")};f.ExportNamedDeclaration=f.ExportDefaultDeclaration=function(k,n,p){k.declaration&&p(k.declaration,n,"ExportNamedDeclaration"===k.type||
k.declaration.id?"Statement":"Expression");k.source&&p(k.source,n,"Expression")};f.ExportAllDeclaration=function(k,n,p){k.exported&&p(k.exported,n);p(k.source,n,"Expression")};f.ImportDeclaration=function(k,n,p){for(var q=0,r=k.specifiers;q<r.length;q+=1)p(r[q],n);p(k.source,n,"Expression")};f.ImportExpression=function(k,n,p){p(k.source,n,"Expression")};f.ImportSpecifier=f.ImportDefaultSpecifier=f.ImportNamespaceSpecifier=f.Identifier=f.PrivateIdentifier=f.Literal=a;f.TaggedTemplateExpression=function(k,
n,p){p(k.tag,n,"Expression");p(k.quasi,n,"Expression")};f.ClassDeclaration=f.ClassExpression=function(k,n,p){return p(k,n,"Class")};f.Class=function(k,n,p){k.id&&p(k.id,n,"Pattern");k.superClass&&p(k.superClass,n,"Expression");p(k.body,n)};f.ClassBody=function(k,n,p){var q=0;for(k=k.body;q<k.length;q+=1)p(k[q],n)};f.MethodDefinition=f.PropertyDefinition=f.Property=function(k,n,p){k.computed&&p(k.key,n,"Expression");k.value&&p(k.value,n,"Expression")};l.ancestor=function(k,n,p,q,r){var t=[];p||(p=
f);(function F(x,B,D){D=D||x.type;var L=n[D],G=x!==t[t.length-1];G&&t.push(x);p[D](x,B,F);L&&L(x,B||t,t);G&&t.pop()})(k,q,r)};l.base=f;l.findNodeAfter=function(k,n,p,q,r){p=b(p);q||(q=f);try{(function D(w,x,B){if(!(w.end<n)){B=B||w.type;if(w.start>=n&&p(B,w))throw new d(w,x);q[B](w,x,D)}})(k,r)}catch(t){if(t instanceof d)return t;throw t;}};l.findNodeAround=function(k,n,p,q,r){p=b(p);q||(q=f);try{(function D(w,x,B){B=B||w.type;if(!(w.start>n||w.end<n)&&(q[B](w,x,D),p(B,w)))throw new d(w,x);})(k,r)}catch(t){if(t instanceof
d)return t;throw t;}};l.findNodeAt=function(k,n,p,q,r,t){r||(r=f);q=b(q);try{(function F(x,B,D){D=D||x.type;if((null==n||x.start<=n)&&(null==p||x.end>=p))r[D](x,B,F);if(!(null!=n&&x.start!==n||null!=p&&x.end!==p)&&q(D,x))throw new d(x,B);})(k,t)}catch(w){if(w instanceof d)return w;throw w;}};l.findNodeBefore=function(k,n,p,q,r){p=b(p);q||(q=f);var t;(function F(x,B,D){x.start>n||(D=D||x.type,x.end<=n&&(!t||t.node.end<x.end)&&p(D,x)&&(t=new d(x,B)),q[D](x,B,F))})(k,r);return t};l.full=function(k,n,
p,q,r){p||(p=f);var t;(function F(x,B,D){D=D||x.type;p[D](x,B,F);t!==x&&(n(x,B,D),t=x)})(k,q,r)};l.fullAncestor=function(k,n,p,q){p||(p=f);var r=[],t;(function F(x,B,D){D=D||x.type;var L=x!==r[r.length-1];L&&r.push(x);p[D](x,B,F);t!==x&&(n(x,B||r,r,D),t=x);L&&r.pop()})(k,q)};l.make=c;l.recursive=function(k,n,p,q,r){var t=p?c(p,q||void 0):q;(function F(x,B,D){t[D||x.type](x,B,F)})(k,n,r)};l.simple=function(k,n,p,q,r){p||(p=f);(function D(w,x,B){B=B||w.type;var F=n[B];p[B](w,x,D);F&&F(w,x)})(k,q,r)};
Object.defineProperty(l,"__esModule",{value:!0})})})(pp.walkModule,pp.walk);var X0=rs.exports;pp.__moduleExports=rs.exports;pp.walk=rs.exports;pp["default"]=rs.exports;var tq=Object.freeze(Tc({__proto__:null,"default":X0},[rs.exports]));Lc("bK",tq);var ss={exports:{}},cR={exports:{}},rl=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/acorn/8.5.0/dist/acorn.js");rl.requireAcorn=wm;rl.commonjsHelpers=mk;rl.acornModule=cR;rl.acorn=cR.exports;rl.hasRequiredAcorn=rl.hasRequiredAcorn||
void 0;rl.__require=wm;rl.requireAcorn=wm;var xn=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/acorn-loose/8.3.0/dist/acorn-loose.js");xn.commonjsHelpers=mk;xn.acornLooseModule=ss;xn.acornLoose=ss.exports;xn.require$$0=wm;(function(e,h){(function(l,b){b(h,xn.require$$0())})(xn.commonjsHelpers.commonjsGlobal,function(l,b){function c(k){return"\u2716"===k.name}function g(){}function a(k){return 14>k&&8<k||32===k||160===k||b.isNewLine(k)}var d=function(k,n){void 0===n&&(n={});this.toks=
this.constructor.BaseParser.tokenizer(k,n);this.options=this.toks.options;this.input=this.toks.input;this.tok=this.last={type:b.tokTypes.eof,start:0,end:0};this.tok.validateRegExpFlags=g;this.tok.validateRegExpPattern=g;this.options.locations&&(k=this.toks.curPosition(),this.tok.loc=new b.SourceLocation(this.toks,k,k));this.ahead=[];this.context=[];this.curLineStart=this.curIndent=0;this.nextLineStart=this.lineEnd(this.curLineStart)+1;this.inFunction=this.inGenerator=this.inAsync=!1};d.prototype.startNode=
function(){return new b.Node(this.toks,this.tok.start,this.options.locations?this.tok.loc.start:null)};d.prototype.storeCurrentPos=function(){return this.options.locations?[this.tok.start,this.tok.loc.start]:this.tok.start};d.prototype.startNodeAt=function(k){return this.options.locations?new b.Node(this.toks,k[0],k[1]):new b.Node(this.toks,k)};d.prototype.finishNode=function(k,n){k.type=n;k.end=this.last.end;this.options.locations&&(k.loc.end=this.last.loc.end);this.options.ranges&&(k.range[1]=this.last.end);
return k};d.prototype.dummyNode=function(k){var n=this.startNode();n.type=k;n.end=n.start;this.options.locations&&(n.loc.end=n.loc.start);this.options.ranges&&(n.range[1]=n.start);this.last={type:b.tokTypes.name,start:n.start,end:n.start,loc:n.loc};return n};d.prototype.dummyIdent=function(){var k=this.dummyNode("Identifier");k.name="\u2716";return k};d.prototype.dummyString=function(){var k=this.dummyNode("Literal");k.value=k.raw="\u2716";return k};d.prototype.eat=function(k){return this.tok.type===
k?(this.next(),!0):!1};d.prototype.isContextual=function(k){return this.tok.type===b.tokTypes.name&&this.tok.value===k};d.prototype.eatContextual=function(k){return this.tok.value===k&&this.eat(b.tokTypes.name)};d.prototype.canInsertSemicolon=function(){return this.tok.type===b.tokTypes.eof||this.tok.type===b.tokTypes.braceR||b.lineBreak.test(this.input.slice(this.last.end,this.tok.start))};d.prototype.semicolon=function(){return this.eat(b.tokTypes.semi)};d.prototype.expect=function(k){if(this.eat(k))return!0;
for(var n=1;2>=n;n++)if(this.lookAhead(n).type===k){for(k=0;k<n;k++)this.next();return!0}};d.prototype.pushCx=function(){this.context.push(this.curIndent)};d.prototype.popCx=function(){this.curIndent=this.context.pop()};d.prototype.lineEnd=function(k){for(;k<this.input.length&&!b.isNewLine(this.input.charCodeAt(k));)++k;return k};d.prototype.indentationAfter=function(k){for(var n=0;;++k){var p=this.input.charCodeAt(k);if(32===p)++n;else if(9===p)n+=this.options.tabSize;else return n}};d.prototype.closes=
function(k,n,p,q){return this.tok.type===k||this.tok.type===b.tokTypes.eof?!0:p!==this.curLineStart&&this.curIndent<n&&this.tokenStartsLine()&&(!q||this.nextLineStart>=this.input.length||this.indentationAfter(this.nextLineStart)<n)};d.prototype.tokenStartsLine=function(){for(var k=this.tok.start-1;k>=this.curLineStart;--k){var n=this.input.charCodeAt(k);if(9!==n&&32!==n)return!1}return!0};d.prototype.extend=function(k,n){this[k]=n(this[k])};d.prototype.parse=function(){this.next();return this.parseTopLevel()};
d.extend=function(){for(var k=[],n=arguments.length;n--;)k[n]=arguments[n];n=this;for(var p=0;p<k.length;p++)n=k[p](n);return n};d.parse=function(k,n){return(new this(k,n)).parse()};d.BaseParser=b.Parser;var f=d.prototype;f.next=function(){this.last=this.tok;this.tok=this.ahead.length?this.ahead.shift():this.readToken();if(this.tok.start>=this.nextLineStart){for(;this.tok.start>=this.nextLineStart;)this.curLineStart=this.nextLineStart,this.nextLineStart=this.lineEnd(this.curLineStart)+1;this.curIndent=
this.indentationAfter(this.curLineStart)}};f.readToken=function(){for(;;)try{return this.toks.next(),this.toks.type===b.tokTypes.dot&&"."===this.input.substr(this.toks.end,1)&&6<=this.options.ecmaVersion&&(this.toks.end++,this.toks.type=b.tokTypes.ellipsis),new b.Token(this.toks)}catch(q){if(!(q instanceof SyntaxError))throw q;var k=q.message,n=q.raisedAt,p=!0;if(/unterminated/i.test(k))if(n=this.lineEnd(q.pos+1),/string/.test(k))p={start:q.pos,end:n,type:b.tokTypes.string,value:this.input.slice(q.pos+
1,n)};else if(/regular expr/i.test(k)){p=this.input.slice(q.pos,n);try{p=new RegExp(p)}catch(r){}p={start:q.pos,end:n,type:b.tokTypes.regexp,value:p}}else p=/template/.test(k)?{start:q.pos,end:n,type:b.tokTypes.template,value:this.input.slice(q.pos,n)}:!1;else if(/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number|expected number in radix/i.test(k))for(;n<this.input.length&&!a(this.input.charCodeAt(n));)++n;else if(/character escape|expected hexadecimal/i.test(k))for(;n<
this.input.length&&(k=this.input.charCodeAt(n++),34!==k&&39!==k&&!b.isNewLine(k)););else if(/unexpected character/i.test(k))n++,p=!1;else if(/regular expression/i.test(k))p=!0;else throw q;this.resetTo(n);!0===p&&(p={start:n,end:n,type:b.tokTypes.name,value:"\u2716"});if(p)return this.options.locations&&(p.loc=new b.SourceLocation(this.toks,b.getLineInfo(this.input,p.start),b.getLineInfo(this.input,p.end))),p}};f.resetTo=function(k){this.toks.pos=k;var n=this.input.charAt(k-1);this.toks.exprAllowed=
!n||/[[{(,;:?/*=+\-~!|&%^<>]/.test(n)||/[enwfd]/.test(n)&&/\b(case|else|return|throw|new|in|(instance|type)?of|delete|void)$/.test(this.input.slice(k-10,k));if(this.options.locations){this.toks.curLine=1;this.toks.lineStart=b.lineBreakG.lastIndex=0;for(var p;(p=b.lineBreakG.exec(this.input))&&p.index<k;)++this.toks.curLine,this.toks.lineStart=p.index+p[0].length}};f.lookAhead=function(k){for(;k>this.ahead.length;)this.ahead.push(this.readToken());return this.ahead[k-1]};f=d.prototype;f.parseTopLevel=
function(){var k=this.startNodeAt(this.options.locations?[0,b.getLineInfo(this.input,0)]:0);for(k.body=[];this.tok.type!==b.tokTypes.eof;)k.body.push(this.parseStatement());this.toks.adaptDirectivePrologue(k.body);this.last=this.tok;k.sourceType=this.options.sourceType;return this.finishNode(k,"Program")};f.parseStatement=function(){var k=this.tok.type,n=this.startNode();if(this.toks.isLet()){k=b.tokTypes._var;var p="let"}switch(k){case b.tokTypes._break:case b.tokTypes._continue:this.next();var q=
k===b.tokTypes._break;this.semicolon()||this.canInsertSemicolon()?n.label=null:(n.label=this.tok.type===b.tokTypes.name?this.parseIdent():null,this.semicolon());return this.finishNode(n,q?"BreakStatement":"ContinueStatement");case b.tokTypes._debugger:return this.next(),this.semicolon(),this.finishNode(n,"DebuggerStatement");case b.tokTypes._do:return this.next(),n.body=this.parseStatement(),n.test=this.eat(b.tokTypes._while)?this.parseParenExpression():this.dummyIdent(),this.semicolon(),this.finishNode(n,
"DoWhileStatement");case b.tokTypes._for:this.next();q=9<=this.options.ecmaVersion&&this.eatContextual("await");this.pushCx();this.expect(b.tokTypes.parenL);if(this.tok.type===b.tokTypes.semi)return this.parseFor(n,null);if((k=this.toks.isLet())||this.tok.type===b.tokTypes._var||this.tok.type===b.tokTypes._const)return k=this.parseVar(this.startNode(),!0,k?"let":this.tok.value),1!==k.declarations.length||this.tok.type!==b.tokTypes._in&&!this.isContextual("of")?this.parseFor(n,k):(9<=this.options.ecmaVersion&&
this.tok.type!==b.tokTypes._in&&(n.await=q),this.parseForIn(n,k));k=this.parseExpression(!0);return this.tok.type===b.tokTypes._in||this.isContextual("of")?(9<=this.options.ecmaVersion&&this.tok.type!==b.tokTypes._in&&(n.await=q),this.parseForIn(n,this.toAssignable(k))):this.parseFor(n,k);case b.tokTypes._function:return this.next(),this.parseFunction(n,!0);case b.tokTypes._if:return this.next(),n.test=this.parseParenExpression(),n.consequent=this.parseStatement(),n.alternate=this.eat(b.tokTypes._else)?
this.parseStatement():null,this.finishNode(n,"IfStatement");case b.tokTypes._return:return this.next(),this.eat(b.tokTypes.semi)||this.canInsertSemicolon()?n.argument=null:(n.argument=this.parseExpression(),this.semicolon()),this.finishNode(n,"ReturnStatement");case b.tokTypes._switch:k=this.curIndent;p=this.curLineStart;this.next();n.discriminant=this.parseParenExpression();n.cases=[];this.pushCx();for(this.expect(b.tokTypes.braceL);!this.closes(b.tokTypes.braceR,k,p,!0);)if(this.tok.type===b.tokTypes._case||
this.tok.type===b.tokTypes._default){var r=this.tok.type===b.tokTypes._case;q&&this.finishNode(q,"SwitchCase");n.cases.push(q=this.startNode());q.consequent=[];this.next();q.test=r?this.parseExpression():null;this.expect(b.tokTypes.colon)}else q||(n.cases.push(q=this.startNode()),q.consequent=[],q.test=null),q.consequent.push(this.parseStatement());q&&this.finishNode(q,"SwitchCase");this.popCx();this.eat(b.tokTypes.braceR);return this.finishNode(n,"SwitchStatement");case b.tokTypes._throw:return this.next(),
n.argument=this.parseExpression(),this.semicolon(),this.finishNode(n,"ThrowStatement");case b.tokTypes._try:return this.next(),n.block=this.parseBlock(),n.handler=null,this.tok.type===b.tokTypes._catch&&(q=this.startNode(),this.next(),this.eat(b.tokTypes.parenL)?(q.param=this.toAssignable(this.parseExprAtom(),!0),this.expect(b.tokTypes.parenR)):q.param=null,q.body=this.parseBlock(),n.handler=this.finishNode(q,"CatchClause")),n.finalizer=this.eat(b.tokTypes._finally)?this.parseBlock():null,n.handler||
n.finalizer?this.finishNode(n,"TryStatement"):n.block;case b.tokTypes._var:case b.tokTypes._const:return this.parseVar(n,!1,p||this.tok.value);case b.tokTypes._while:return this.next(),n.test=this.parseParenExpression(),n.body=this.parseStatement(),this.finishNode(n,"WhileStatement");case b.tokTypes._with:return this.next(),n.object=this.parseParenExpression(),n.body=this.parseStatement(),this.finishNode(n,"WithStatement");case b.tokTypes.braceL:return this.parseBlock();case b.tokTypes.semi:return this.next(),
this.finishNode(n,"EmptyStatement");case b.tokTypes._class:return this.parseClass(!0);case b.tokTypes._import:return 10<this.options.ecmaVersion&&(q=this.lookAhead(1).type,q===b.tokTypes.parenL||q===b.tokTypes.dot)?(n.expression=this.parseExpression(),this.semicolon(),this.finishNode(n,"ExpressionStatement")):this.parseImport();case b.tokTypes._export:return this.parseExport();default:if(this.toks.isAsyncFunction())return this.next(),this.next(),this.parseFunction(n,!0,!0);q=this.parseExpression();
if(c(q))return this.next(),this.tok.type===b.tokTypes.eof?this.finishNode(n,"EmptyStatement"):this.parseStatement();if(k===b.tokTypes.name&&"Identifier"===q.type&&this.eat(b.tokTypes.colon))return n.body=this.parseStatement(),n.label=q,this.finishNode(n,"LabeledStatement");n.expression=q;this.semicolon();return this.finishNode(n,"ExpressionStatement")}};f.parseBlock=function(){var k=this.startNode();this.pushCx();this.expect(b.tokTypes.braceL);var n=this.curIndent,p=this.curLineStart;for(k.body=[];!this.closes(b.tokTypes.braceR,
n,p,!0);)k.body.push(this.parseStatement());this.popCx();this.eat(b.tokTypes.braceR);return this.finishNode(k,"BlockStatement")};f.parseFor=function(k,n){k.init=n;k.test=k.update=null;this.eat(b.tokTypes.semi)&&this.tok.type!==b.tokTypes.semi&&(k.test=this.parseExpression());this.eat(b.tokTypes.semi)&&this.tok.type!==b.tokTypes.parenR&&(k.update=this.parseExpression());this.popCx();this.expect(b.tokTypes.parenR);k.body=this.parseStatement();return this.finishNode(k,"ForStatement")};f.parseForIn=function(k,
n){var p=this.tok.type===b.tokTypes._in?"ForInStatement":"ForOfStatement";this.next();k.left=n;k.right=this.parseExpression();this.popCx();this.expect(b.tokTypes.parenR);k.body=this.parseStatement();return this.finishNode(k,p)};f.parseVar=function(k,n,p){k.kind=p;this.next();k.declarations=[];do p=this.startNode(),p.id=6<=this.options.ecmaVersion?this.toAssignable(this.parseExprAtom(),!0):this.parseIdent(),p.init=this.eat(b.tokTypes.eq)?this.parseMaybeAssign(n):null,k.declarations.push(this.finishNode(p,
"VariableDeclarator"));while(this.eat(b.tokTypes.comma));k.declarations.length||(p=this.startNode(),p.id=this.dummyIdent(),k.declarations.push(this.finishNode(p,"VariableDeclarator")));n||this.semicolon();return this.finishNode(k,"VariableDeclaration")};f.parseClass=function(k){var n=this.startNode();this.next();n.id=this.tok.type===b.tokTypes.name?this.parseIdent():!0===k?this.dummyIdent():null;n.superClass=this.eat(b.tokTypes._extends)?this.parseExpression():null;n.body=this.startNode();n.body.body=
[];this.pushCx();var p=this.curIndent+1,q=this.curLineStart;this.eat(b.tokTypes.braceL);this.curIndent+1<p&&(p=this.curIndent,q=this.curLineStart);for(;!this.closes(b.tokTypes.braceR,p,q);){var r=this.parseClassElement();r&&n.body.body.push(r)}this.popCx();this.eat(b.tokTypes.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));this.semicolon();this.finishNode(n.body,"ClassBody");return this.finishNode(n,k?"ClassDeclaration":"ClassExpression")};f.parseClassElement=
function(){if(this.eat(b.tokTypes.semi))return null;var k=this.options,n=k.ecmaVersion,p=k.locations,q=this.curIndent,r=this.curLineStart;k=this.startNode();var t="",w=!1,x=!1,B="method",D=!1;if(this.eatContextual("static")){if(13<=n&&this.eat(b.tokTypes.braceL))return this.parseClassStaticBlock(k),k;this.isClassElementNameStart()||this.toks.type===b.tokTypes.star?D=!0:t="static"}k["static"]=D;!t&&8<=n&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.toks.type!==b.tokTypes.star||
this.canInsertSemicolon()?t="async":x=!0);!t&&(w=this.eat(b.tokTypes.star),D=this.toks.value,this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?B=D:t=D);if(t)k.computed=!1,k.key=this.startNodeAt(p?[this.toks.lastTokStart,this.toks.lastTokStartLoc]:this.toks.lastTokStart),k.key.name=t,this.finishNode(k.key,"Identifier");else if(this.parseClassElementName(k),c(k.key))return c(this.parseMaybeAssign())&&this.next(),this.eat(b.tokTypes.comma),null;13>n||this.toks.type===
b.tokTypes.parenL||"method"!==B||w||x?(k.kind=k.computed||k["static"]||w||x||"method"!==B||!("Identifier"===k.key.type&&"constructor"===k.key.name||"Literal"===k.key.type&&"constructor"===k.key.value)?B:"constructor",k.value=this.parseMethod(w,x),this.finishNode(k,"MethodDefinition")):(this.eat(b.tokTypes.eq)?this.curLineStart!==r&&this.curIndent<=q&&this.tokenStartsLine()?k.value=null:(n=this.inAsync,p=this.inGenerator,this.inGenerator=this.inAsync=!1,k.value=this.parseMaybeAssign(),this.inAsync=
n,this.inGenerator=p):k.value=null,this.semicolon(),this.finishNode(k,"PropertyDefinition"));return k};f.parseClassStaticBlock=function(k){var n=this.curIndent,p=this.curLineStart;k.body=[];for(this.pushCx();!this.closes(b.tokTypes.braceR,n,p,!0);)k.body.push(this.parseStatement());this.popCx();this.eat(b.tokTypes.braceR);return this.finishNode(k,"StaticBlock")};f.isClassElementNameStart=function(){return this.toks.isClassElementNameStart()};f.parseClassElementName=function(k){this.toks.type===b.tokTypes.privateId?
(k.computed=!1,k.key=this.parsePrivateIdent()):this.parsePropertyName(k)};f.parseFunction=function(k,n,p){var q=this.inAsync,r=this.inGenerator,t=this.inFunction;this.initFunction(k);6<=this.options.ecmaVersion&&(k.generator=this.eat(b.tokTypes.star));8<=this.options.ecmaVersion&&(k.async=!!p);this.tok.type===b.tokTypes.name?k.id=this.parseIdent():!0===n&&(k.id=this.dummyIdent());this.inAsync=k.async;this.inGenerator=k.generator;this.inFunction=!0;k.params=this.parseFunctionParams();k.body=this.parseBlock();
this.toks.adaptDirectivePrologue(k.body.body);this.inAsync=q;this.inGenerator=r;this.inFunction=t;return this.finishNode(k,n?"FunctionDeclaration":"FunctionExpression")};f.parseExport=function(){var k=this.startNode();this.next();if(this.eat(b.tokTypes.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?k.exported=this.parseExprAtom():k.exported=null),k.source=this.eatContextual("from")?this.parseExprAtom():this.dummyString(),this.semicolon(),this.finishNode(k,"ExportAllDeclaration");
if(this.eat(b.tokTypes._default)){var n;if(this.tok.type===b.tokTypes._function||(n=this.toks.isAsyncFunction())){var p=this.startNode();this.next();n&&this.next();k.declaration=this.parseFunction(p,"nullableID",n)}else this.tok.type===b.tokTypes._class?k.declaration=this.parseClass("nullableID"):(k.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(k,"ExportDefaultDeclaration")}this.tok.type.keyword||this.toks.isLet()||this.toks.isAsyncFunction()?(k.declaration=this.parseStatement(),
k.specifiers=[],k.source=null):(k.declaration=null,k.specifiers=this.parseExportSpecifierList(),k.source=this.eatContextual("from")?this.parseExprAtom():null,this.semicolon());return this.finishNode(k,"ExportNamedDeclaration")};f.parseImport=function(){var k=this.startNode();this.next();if(this.tok.type===b.tokTypes.string)k.specifiers=[],k.source=this.parseExprAtom();else{if(this.tok.type===b.tokTypes.name&&"from"!==this.tok.value){var n=this.startNode();n.local=this.parseIdent();this.finishNode(n,
"ImportDefaultSpecifier");this.eat(b.tokTypes.comma)}k.specifiers=this.parseImportSpecifiers();k.source=this.eatContextual("from")&&this.tok.type===b.tokTypes.string?this.parseExprAtom():this.dummyString();n&&k.specifiers.unshift(n)}this.semicolon();return this.finishNode(k,"ImportDeclaration")};f.parseImportSpecifiers=function(){var k=[];if(this.tok.type===b.tokTypes.star){var n=this.startNode();this.next();n.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent();k.push(this.finishNode(n,
"ImportNamespaceSpecifier"))}else{n=this.curIndent;var p=this.curLineStart,q=this.nextLineStart;this.pushCx();this.eat(b.tokTypes.braceL);this.curLineStart>q&&(q=this.curLineStart);for(;!this.closes(b.tokTypes.braceR,n+(this.curLineStart<=q?1:0),p);){var r=this.startNode();if(this.eat(b.tokTypes.star))r.local=this.eatContextual("as")?this.parseModuleExportName():this.dummyIdent(),this.finishNode(r,"ImportNamespaceSpecifier");else{if(this.isContextual("from"))break;r.imported=this.parseModuleExportName();
if(c(r.imported))break;r.local=this.eatContextual("as")?this.parseModuleExportName():r.imported;this.finishNode(r,"ImportSpecifier")}k.push(r);this.eat(b.tokTypes.comma)}this.eat(b.tokTypes.braceR);this.popCx()}return k};f.parseExportSpecifierList=function(){var k=[],n=this.curIndent,p=this.curLineStart,q=this.nextLineStart;this.pushCx();this.eat(b.tokTypes.braceL);this.curLineStart>q&&(q=this.curLineStart);for(;!this.closes(b.tokTypes.braceR,n+(this.curLineStart<=q?1:0),p)&&!this.isContextual("from");){var r=
this.startNode();r.local=this.parseModuleExportName();if(c(r.local))break;r.exported=this.eatContextual("as")?this.parseModuleExportName():r.local;this.finishNode(r,"ExportSpecifier");k.push(r);this.eat(b.tokTypes.comma)}this.eat(b.tokTypes.braceR);this.popCx();return k};f.parseModuleExportName=function(){return 13<=this.options.ecmaVersion&&this.tok.type===b.tokTypes.string?this.parseExprAtom():this.parseIdent()};f=d.prototype;f.checkLVal=function(k){if(!k)return k;switch(k.type){case "Identifier":case "MemberExpression":return k;
case "ParenthesizedExpression":return k.expression=this.checkLVal(k.expression),k;default:return this.dummyIdent()}};f.parseExpression=function(k){var n=this.storeCurrentPos(),p=this.parseMaybeAssign(k);if(this.tok.type===b.tokTypes.comma){n=this.startNodeAt(n);for(n.expressions=[p];this.eat(b.tokTypes.comma);)n.expressions.push(this.parseMaybeAssign(k));return this.finishNode(n,"SequenceExpression")}return p};f.parseParenExpression=function(){this.pushCx();this.expect(b.tokTypes.parenL);var k=this.parseExpression();
this.popCx();this.expect(b.tokTypes.parenR);return k};f.parseMaybeAssign=function(k){if(this.inGenerator&&this.toks.isContextual("yield"))return k=this.startNode(),this.next(),this.semicolon()||this.canInsertSemicolon()||this.tok.type!==b.tokTypes.star&&!this.tok.type.startsExpr?(k.delegate=!1,k.argument=null):(k.delegate=this.eat(b.tokTypes.star),k.argument=this.parseMaybeAssign()),this.finishNode(k,"YieldExpression");var n=this.storeCurrentPos(),p=this.parseMaybeConditional(k);return this.tok.type.isAssign?
(n=this.startNodeAt(n),n.operator=this.tok.value,n.left=this.tok.type===b.tokTypes.eq?this.toAssignable(p):this.checkLVal(p),this.next(),n.right=this.parseMaybeAssign(k),this.finishNode(n,"AssignmentExpression")):p};f.parseMaybeConditional=function(k){var n=this.storeCurrentPos(),p=this.parseExprOps(k);return this.eat(b.tokTypes.question)?(n=this.startNodeAt(n),n.test=p,n.consequent=this.parseMaybeAssign(),n.alternate=this.expect(b.tokTypes.colon)?this.parseMaybeAssign(k):this.dummyIdent(),this.finishNode(n,
"ConditionalExpression")):p};f.parseExprOps=function(k){var n=this.storeCurrentPos(),p=this.curIndent,q=this.curLineStart;return this.parseExprOp(this.parseMaybeUnary(!1),n,-1,k,p,q)};f.parseExprOp=function(k,n,p,q,r,t){if(this.curLineStart!==t&&this.curIndent<r&&this.tokenStartsLine())return k;var w=this.tok.type.binop;if(null!=w&&(!q||this.tok.type!==b.tokTypes._in)&&w>p){var x=this.startNodeAt(n);x.left=k;x.operator=this.tok.value;this.next();this.curLineStart!==t&&this.curIndent<r&&this.tokenStartsLine()?
x.right=this.dummyIdent():(k=this.storeCurrentPos(),x.right=this.parseExprOp(this.parseMaybeUnary(!1),k,w,q,r,t));this.finishNode(x,/&&|\|\||\?\?/.test(x.operator)?"LogicalExpression":"BinaryExpression");return this.parseExprOp(x,n,p,q,r,t)}return k};f.parseMaybeUnary=function(k){var n=this.storeCurrentPos();if(8<=this.options.ecmaVersion&&this.toks.isContextual("await")&&(this.inAsync||this.toks.inModule&&13<=this.options.ecmaVersion||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var p=
this.parseAwait();k=!0}else if(this.tok.type.prefix){p=this.startNode();var q=this.tok.type===b.tokTypes.incDec;q||(k=!0);p.operator=this.tok.value;p.prefix=!0;this.next();p.argument=this.parseMaybeUnary(!0);q&&(p.argument=this.checkLVal(p.argument));p=this.finishNode(p,q?"UpdateExpression":"UnaryExpression")}else if(this.tok.type===b.tokTypes.ellipsis)p=this.startNode(),this.next(),p.argument=this.parseMaybeUnary(k),p=this.finishNode(p,"SpreadElement");else if(k||this.tok.type!==b.tokTypes.privateId)for(p=
this.parseExprSubscripts();this.tok.type.postfix&&!this.canInsertSemicolon();)q=this.startNodeAt(n),q.operator=this.tok.value,q.prefix=!1,q.argument=this.checkLVal(p),this.next(),p=this.finishNode(q,"UpdateExpression");else p=this.parsePrivateIdent();return!k&&this.eat(b.tokTypes.starstar)?(k=this.startNodeAt(n),k.operator="**",k.left=p,k.right=this.parseMaybeUnary(!1),this.finishNode(k,"BinaryExpression")):p};f.parseExprSubscripts=function(){var k=this.storeCurrentPos();return this.parseSubscripts(this.parseExprAtom(),
k,!1,this.curIndent,this.curLineStart)};f.parseSubscripts=function(k,n,p,q,r){for(var t=11<=this.options.ecmaVersion,w=!1;;){if(this.curLineStart!==r&&this.curIndent<=q&&this.tokenStartsLine())if(this.tok.type===b.tokTypes.dot&&this.curIndent===q)--q;else break;var x="Identifier"===k.type&&"async"===k.name&&!this.canInsertSemicolon(),B=t&&this.eat(b.tokTypes.questionDot);B&&(w=!0);if(B&&this.tok.type!==b.tokTypes.parenL&&this.tok.type!==b.tokTypes.bracketL&&this.tok.type!==b.tokTypes.backQuote||this.eat(b.tokTypes.dot)){var D=
this.startNodeAt(n);D.object=k;this.curLineStart!==r&&this.curIndent<=q&&this.tokenStartsLine()?D.property=this.dummyIdent():D.property=this.parsePropertyAccessor()||this.dummyIdent();D.computed=!1;t&&(D.optional=B);k=this.finishNode(D,"MemberExpression")}else if(this.tok.type===b.tokTypes.bracketL)this.pushCx(),this.next(),D=this.startNodeAt(n),D.object=k,D.property=this.parseExpression(),D.computed=!0,t&&(D.optional=B),this.popCx(),this.expect(b.tokTypes.bracketR),k=this.finishNode(D,"MemberExpression");
else if(p||this.tok.type!==b.tokTypes.parenL)if(this.tok.type===b.tokTypes.backQuote)B=this.startNodeAt(n),B.tag=k,B.quasi=this.parseTemplate(),k=this.finishNode(B,"TaggedTemplateExpression");else break;else{D=this.parseExprList(b.tokTypes.parenR);if(x&&this.eat(b.tokTypes.arrow))return this.parseArrowExpression(this.startNodeAt(n),D,!0);x=this.startNodeAt(n);x.callee=k;x.arguments=D;t&&(x.optional=B);k=this.finishNode(x,"CallExpression")}}w&&(n=this.startNodeAt(n),n.expression=k,k=this.finishNode(n,
"ChainExpression"));return k};f.parseExprAtom=function(){switch(this.tok.type){case b.tokTypes._this:case b.tokTypes._super:var k=this.tok.type===b.tokTypes._this?"ThisExpression":"Super";var n=this.startNode();this.next();return this.finishNode(n,k);case b.tokTypes.name:n=this.storeCurrentPos();k=this.parseIdent();var p=!1;if("async"===k.name&&!this.canInsertSemicolon()){if(this.eat(b.tokTypes._function))return this.toks.overrideContext(b.tokContexts.f_expr),this.parseFunction(this.startNodeAt(n),
!1,!0);this.tok.type===b.tokTypes.name&&(k=this.parseIdent(),p=!0)}return this.eat(b.tokTypes.arrow)?this.parseArrowExpression(this.startNodeAt(n),[k],p):k;case b.tokTypes.regexp:return n=this.startNode(),k=this.tok.value,n.regex={pattern:k.pattern,flags:k.flags},n.value=k.value,n.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(n,"Literal");case b.tokTypes.num:case b.tokTypes.string:return n=this.startNode(),n.value=this.tok.value,n.raw=this.input.slice(this.tok.start,
this.tok.end),this.tok.type===b.tokTypes.num&&110===n.raw.charCodeAt(n.raw.length-1)&&(n.bigint=n.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(n,"Literal");case b.tokTypes._null:case b.tokTypes._true:case b.tokTypes._false:return n=this.startNode(),n.value=this.tok.type===b.tokTypes._null?null:this.tok.type===b.tokTypes._true,n.raw=this.tok.type.keyword,this.next(),this.finishNode(n,"Literal");case b.tokTypes.parenL:n=this.storeCurrentPos();this.next();k=this.parseExpression();this.expect(b.tokTypes.parenR);
if(this.eat(b.tokTypes.arrow))return k=k.expressions||[k],k.length&&c(k[k.length-1])&&k.pop(),this.parseArrowExpression(this.startNodeAt(n),k);this.options.preserveParens&&(n=this.startNodeAt(n),n.expression=k,k=this.finishNode(n,"ParenthesizedExpression"));return k;case b.tokTypes.bracketL:return n=this.startNode(),n.elements=this.parseExprList(b.tokTypes.bracketR,!0),this.finishNode(n,"ArrayExpression");case b.tokTypes.braceL:return this.toks.overrideContext(b.tokContexts.b_expr),this.parseObj();
case b.tokTypes._class:return this.parseClass(!1);case b.tokTypes._function:return n=this.startNode(),this.next(),this.parseFunction(n,!1);case b.tokTypes._new:return this.parseNew();case b.tokTypes.backQuote:return this.parseTemplate();case b.tokTypes._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.dummyIdent();default:return this.dummyIdent()}};f.parseExprImport=function(){var k=this.startNode(),n=this.parseIdent(!0);switch(this.tok.type){case b.tokTypes.parenL:return this.parseDynamicImport(k);
case b.tokTypes.dot:return k.meta=n,this.parseImportMeta(k);default:return k.name="import",this.finishNode(k,"Identifier")}};f.parseDynamicImport=function(k){k.source=this.parseExprList(b.tokTypes.parenR)[0]||this.dummyString();return this.finishNode(k,"ImportExpression")};f.parseImportMeta=function(k){this.next();k.property=this.parseIdent(!0);return this.finishNode(k,"MetaProperty")};f.parseNew=function(){var k=this.startNode(),n=this.curIndent,p=this.curLineStart,q=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&
this.eat(b.tokTypes.dot))return k.meta=q,k.property=this.parseIdent(!0),this.finishNode(k,"MetaProperty");q=this.storeCurrentPos();k.callee=this.parseSubscripts(this.parseExprAtom(),q,!0,n,p);k.arguments=this.tok.type===b.tokTypes.parenL?this.parseExprList(b.tokTypes.parenR):[];return this.finishNode(k,"NewExpression")};f.parseTemplateElement=function(){var k=this.startNode();k.value=this.tok.type===b.tokTypes.invalidTemplate?{raw:this.tok.value,cooked:null}:{raw:this.input.slice(this.tok.start,this.tok.end).replace(/\r\n?/g,
"\n"),cooked:this.tok.value};this.next();k.tail=this.tok.type===b.tokTypes.backQuote;return this.finishNode(k,"TemplateElement")};f.parseTemplate=function(){var k=this.startNode();this.next();k.expressions=[];var n=this.parseTemplateElement();for(k.quasis=[n];!n.tail;)this.next(),k.expressions.push(this.parseExpression()),this.expect(b.tokTypes.braceR)?n=this.parseTemplateElement():(n=this.startNode(),n.value={cooked:"",raw:""},n.tail=!0,this.finishNode(n,"TemplateElement")),k.quasis.push(n);this.expect(b.tokTypes.backQuote);
return this.finishNode(k,"TemplateLiteral")};f.parseObj=function(){var k=this.startNode();k.properties=[];this.pushCx();var n=this.curIndent+1,p=this.curLineStart;this.eat(b.tokTypes.braceL);this.curIndent+1<n&&(n=this.curIndent,p=this.curLineStart);for(;!this.closes(b.tokTypes.braceR,n,p);){var q=this.startNode(),r=void 0,t=void 0;if(9<=this.options.ecmaVersion&&this.eat(b.tokTypes.ellipsis))q.argument=this.parseMaybeAssign(),k.properties.push(this.finishNode(q,"SpreadElement"));else{6<=this.options.ecmaVersion&&
(t=this.storeCurrentPos(),q.method=!1,q.shorthand=!1,r=this.eat(b.tokTypes.star));this.parsePropertyName(q);if(this.toks.isAsyncProp(q)){var w=!0;r=9<=this.options.ecmaVersion&&this.eat(b.tokTypes.star);this.parsePropertyName(q)}else w=!1;c(q.key)?c(this.parseMaybeAssign())&&this.next():(this.eat(b.tokTypes.colon)?(q.kind="init",q.value=this.parseMaybeAssign()):6<=this.options.ecmaVersion&&(this.tok.type===b.tokTypes.parenL||this.tok.type===b.tokTypes.braceL)?(q.kind="init",q.method=!0,q.value=this.parseMethod(r,
w)):5<=this.options.ecmaVersion&&"Identifier"===q.key.type&&!q.computed&&("get"===q.key.name||"set"===q.key.name)&&this.tok.type!==b.tokTypes.comma&&this.tok.type!==b.tokTypes.braceR&&this.tok.type!==b.tokTypes.eq?(q.kind=q.key.name,this.parsePropertyName(q),q.value=this.parseMethod(!1)):(q.kind="init",6<=this.options.ecmaVersion?this.eat(b.tokTypes.eq)?(r=this.startNodeAt(t),r.operator="=",r.left=q.key,r.right=this.parseMaybeAssign(),q.value=this.finishNode(r,"AssignmentExpression")):q.value=q.key:
q.value=this.dummyIdent(),q.shorthand=!0),k.properties.push(this.finishNode(q,"Property")))}this.eat(b.tokTypes.comma)}this.popCx();this.eat(b.tokTypes.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return this.finishNode(k,"ObjectExpression")};f.parsePropertyName=function(k){if(6<=this.options.ecmaVersion){if(this.eat(b.tokTypes.bracketL)){k.computed=!0;k.key=this.parseExpression();this.expect(b.tokTypes.bracketR);return}k.computed=!1}var n=
this.tok.type===b.tokTypes.num||this.tok.type===b.tokTypes.string?this.parseExprAtom():this.parseIdent();k.key=n||this.dummyIdent()};f.parsePropertyAccessor=function(){if(this.tok.type===b.tokTypes.name||this.tok.type.keyword)return this.parseIdent();if(this.tok.type===b.tokTypes.privateId)return this.parsePrivateIdent()};f.parseIdent=function(){var k=this.tok.type===b.tokTypes.name?this.tok.value:this.tok.type.keyword;if(!k)return this.dummyIdent();var n=this.startNode();this.next();n.name=k;return this.finishNode(n,
"Identifier")};f.parsePrivateIdent=function(){var k=this.startNode();k.name=this.tok.value;this.next();return this.finishNode(k,"PrivateIdentifier")};f.initFunction=function(k){k.id=null;k.params=[];6<=this.options.ecmaVersion&&(k.generator=!1,k.expression=!1);8<=this.options.ecmaVersion&&(k.async=!1)};f.toAssignable=function(k,n){if(k&&"Identifier"!==k.type&&("MemberExpression"!==k.type||n))if("ParenthesizedExpression"===k.type)this.toAssignable(k.expression,n);else{if(6>this.options.ecmaVersion)return this.dummyIdent();
if("ObjectExpression"===k.type){k.type="ObjectPattern";for(var p=0,q=k.properties;p<q.length;p+=1)this.toAssignable(q[p],n)}else if("ArrayExpression"===k.type)k.type="ArrayPattern",this.toAssignableList(k.elements,n);else if("Property"===k.type)this.toAssignable(k.value,n);else if("SpreadElement"===k.type)k.type="RestElement",this.toAssignable(k.argument,n);else if("AssignmentExpression"===k.type)k.type="AssignmentPattern",delete k.operator;else return this.dummyIdent()}return k};f.toAssignableList=
function(k,n){for(var p=0;p<k.length;p+=1)this.toAssignable(k[p],n);return k};f.parseFunctionParams=function(k){k=this.parseExprList(b.tokTypes.parenR);return this.toAssignableList(k,!0)};f.parseMethod=function(k,n){var p=this.startNode(),q=this.inAsync,r=this.inGenerator,t=this.inFunction;this.initFunction(p);6<=this.options.ecmaVersion&&(p.generator=!!k);8<=this.options.ecmaVersion&&(p.async=!!n);this.inAsync=p.async;this.inGenerator=p.generator;this.inFunction=!0;p.params=this.parseFunctionParams();
p.body=this.parseBlock();this.toks.adaptDirectivePrologue(p.body.body);this.inAsync=q;this.inGenerator=r;this.inFunction=t;return this.finishNode(p,"FunctionExpression")};f.parseArrowExpression=function(k,n,p){var q=this.inAsync,r=this.inGenerator,t=this.inFunction;this.initFunction(k);8<=this.options.ecmaVersion&&(k.async=!!p);this.inAsync=k.async;this.inGenerator=!1;this.inFunction=!0;k.params=this.toAssignableList(n,!0);k.expression=this.tok.type!==b.tokTypes.braceL;k.expression?k.body=this.parseMaybeAssign():
(k.body=this.parseBlock(),this.toks.adaptDirectivePrologue(k.body.body));this.inAsync=q;this.inGenerator=r;this.inFunction=t;return this.finishNode(k,"ArrowFunctionExpression")};f.parseExprList=function(k,n){this.pushCx();var p=this.curIndent,q=this.curLineStart,r=[];for(this.next();!this.closes(k,p+1,q);)if(this.eat(b.tokTypes.comma))r.push(n?null:this.dummyIdent());else{var t=this.parseMaybeAssign();if(c(t)){if(this.closes(k,p,q))break;this.next()}else r.push(t);this.eat(b.tokTypes.comma)}this.popCx();
this.eat(k)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return r};f.parseAwait=function(){var k=this.startNode();this.next();k.argument=this.parseMaybeUnary();return this.finishNode(k,"AwaitExpression")};b.defaultOptions.tabSize=4;l.LooseParser=d;l.isDummy=c;l.parse=function(k,n){return d.parse(k,n)};Object.defineProperty(l,"__esModule",{value:!0})})})(xn.acornLooseModule,xn.acornLoose);var Y0=ss.exports;xn.__moduleExports=ss.exports;xn.acornLoose=
ss.exports;xn["default"]=ss.exports;var qG=Object.freeze(Tc({__proto__:null,"default":Y0},[ss.exports])),sf=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/acorn-extension.js");sf.forEachNode=function(e,h,l,b){b=b||{};var c=b.traversal||"preorder",g=sf.obj.clone(b.visitors?b.visitors:sf.walk.make(sf.custom.visitors.withMemberExpression)),a="preorder"===c?function(d,f,k,n,p){h(k,l,n,f);return d(k,n+1,p)}:function(d,f,k,n,p){d=d(k,n+1,p);h(k,l,n,f);return d};Object.keys(g).forEach(function(d){var f=
g[d];g[d]=function(k,n,p){return a(f,d,k,n,p)}});sf.walk.recursive(e,0,null,g);return e};sf.matchNodes=function(e,h,l,b){return sf.forEachNode(e,function(c,g,a,d){if(h[c.type])h[c.type](c,g,a,d)},l,b)};sf.findNodesIncluding=jt;sf.withParentInfo=function(e,h,l){function b(f){var k={id:sf.string.newUUID(),parentScope:f,containingScopes:[]};f&&f.containingScopes.push(k);return k}l=l||{};var c=sf.walk.make({Function:function(f,k,n){k&&k.scope&&(k.scope=b(k.scope));n(f.body,k,"ScopeBody")},VariableDeclarator:function(f,
k,n){f.init&&n(f.init,k,"Expression")},VariableDeclaration:function(f,k,n){for(var p=0;p<f.declarations.length;++p){var q=f.declarations[p];q&&n(q,k,"VariableDeclarator")}},ObjectExpression:function(f,k,n){for(var p=0;p<f.properties.length;++p){var q=f.properties[p];n(q.key,k,"Expression");n(q.value,k,"Expression")}},MemberExpression:function(f,k,n){n(f.object,k,"Expression");n(f.property,k,"Expression")}},sf.walk.base),g,a=[];sf.forEachNode(e,function(f){sf.arr.withoutAll(Object.keys(f),["end","start",
"type","source","raw"]).forEach(function(k){if(!f.__lookupGetter__(k)){var n=f[k];f.__defineGetter__(k,function(){g=k;return n});a.push([f,k,f[k]])}})},null,{visitors:c});var d=[];Object.keys(c).forEach(function(f){var k=c[f];c[f]=function(n,p,q){return f===n.type||l.visitAllNodes?(d.push(h.call(null,n,{scope:p.scope,depth:p.depth,parent:p.parent,type:f,propertyInParent:g})),k(n,{scope:p.scope,parent:n,depth:p.depth+1},q)):k(n,p,q)}});sf.walk.recursive(e,{scope:b(),parent:null,propertyInParent:"",
depth:0},null,c);a.forEach(function(f){delete f[0][f[1]];f[0][f[1]]=f[2]});return d};sf.copy=Ro;sf.findSiblings=qv;sf.findNodeByAstIndex=rv;sf.findStatementOfNode=xm;sf.addAstIndex=Lp;sf.obj=nh;sf.arr=mh;sf.string=ji;sf.Path=Nh;sf.withMozillaAstDo=ix;sf._Decorators=S0;sf._ClassFields=T0;sf._StaticClassFeatures=U0;sf._PrivateMethods=V0;sf.acornDefault=W0;sf.walk=tq;sf.loose=qG;sf.isNode="undefined"!==typeof System?System.get("@system-env").node:!1;sf.Decorators=sf.Decorators||void 0;sf.ClassFields=
sf.ClassFields||void 0;sf.StaticClassFeatures=sf.StaticClassFeatures||void 0;sf.PrivateMethods=sf.PrivateMethods||void 0;sf.isNode?(sf.Decorators=sf._ClassFields?sf._Decorators:System._nodeRequire("lively.ast/lib/acorn-decorators.cjs"),sf.ClassFields=sf._ClassFields||System._nodeRequire("acorn-class-fields"),sf.StaticClassFeatures=sf._StaticClassFeatures||System._nodeRequire("acorn-static-class-features"),sf.PrivateMethods=sf._PrivateMethods||System._nodeRequire("acorn-private-methods")):(sf.Decorators=
sf._Decorators,sf.ClassFields=sf._ClassFields,sf.StaticClassFeatures=sf._StaticClassFeatures,sf.PrivateMethods=sf._PrivateMethods);sf.custom={};sf.custom.forEachNode=sf.forEachNode;sf.custom.matchNodes=sf.matchNodes;sf.custom.findNodesIncluding=sf.findNodesIncluding;sf.custom.withParentInfo=sf.withParentInfo;sf.custom.copy=sf.copy;sf.custom.findSiblings=sf.findSiblings;sf.custom.findNodeByAstIndex=sf.findNodeByAstIndex;sf.custom.findStatementOfNode=sf.findStatementOfNode;sf.custom.addAstIndex=sf.addAstIndex;
sf.Parser=sf.acornDefault.Parser.extend(sf.ClassFields,sf.StaticClassFeatures,sf.PrivateMethods,sf.Decorators);sf.acorn={};Object.assign(sf.acorn,sf.acornDefault);sf.acorn.Parser=sf.Parser;sf.acorn.parse=function(e,h){return sf.Parser.parse(e,h)};var jx=Lc("bI",sf.acorn),Nu=Lc("bJ",sf.custom);sf.walk=tq;sf.loose=qG;sf.acorn=jx;sf.custom=Nu;sf.findStatementOfNode=xm;sf.addAstIndex=Lp;sf.findNodesIncluding=jt;sf.findSiblings=qv;sf.findNodeByAstIndex=rv;sf.copy=Ro;sf.custom.visitors={stopAtFunctions:sf.walk.make(Object.assign({Function:function(){}},
sf.walk.base)),withMemberExpression:sf.walk.make({MemberExpression:function(e,h,l){l(e.object,h,"Expression");l(e.property,h,"Expression")}},sf.walk.base)};var Ou={exports:{}},Ak=window.lively.FreezerRuntime.recorderFor("lively.next-node_modules/astq/2.7.5/lib/astq.browser.js");Ak.commonjsHelpers=mk;Ak.createCommonjsRequire=my;Ak.astq_browserModule=Ou;Ak.astq_browser=Ou.exports;(function(e,h){e.exports=function(){return function(){function l(b,c,g){function a(k,n){if(!c[k]){if(!b[k]){var p="function"==
typeof Ak.createCommonjsRequire("/lively.next-node_modules/astq/2.7.5/lib")&&Ak.createCommonjsRequire("/lively.next-node_modules/astq/2.7.5/lib");if(!n&&p)return p(k,!0);if(d)return d(k,!0);n=Error("Cannot find module '"+k+"'");throw n.code="MODULE_NOT_FOUND",n;}n=c[k]={exports:{}};b[k][0].call(n.exports,function(q){return a(b[k][1][q]||q)},n,n.exports,l,b,c,g)}return c[k].exports}for(var d="function"==typeof Ak.createCommonjsRequire("/lively.next-node_modules/astq/2.7.5/lib")&&Ak.createCommonjsRequire("/lively.next-node_modules/astq/2.7.5/lib"),
f=0;f<g.length;f++)a(g[f]);return a}return l}()({1:[function(l,b,c){(function(g){(function(){!function(a){"object"==Jc(c)&&"undefined"!=typeof b?b.exports=a():("undefined"!=typeof window?window:"undefined"!=typeof g?g:"undefined"!=typeof self?self:this).ASTY=a()}(function(){return function(){return function n(d,f,k){function p(t,w){if(!f[t]){if(!d[t]){var x="function"==typeof l&&l;if(!w&&x)return x(t,!0);if(q)return q(t,!0);w=Error("Cannot find module '"+t+"'");throw w.code="MODULE_NOT_FOUND",w;}w=
f[t]={exports:{}};d[t][0].call(w.exports,function(B){return p(d[t][1][B]||B)},w,w.exports,n,d,f,k)}return f[t].exports}for(var q="function"==typeof l&&l,r=0;r<k.length;r++)p(k[r]);return p}}()({1:[function(a,d,f){function k(p){return(k="function"==typeof Symbol&&"symbol"==Jc(Symbol.iterator)?function(q){return Jc(q)}:function(q){return q&&"function"==typeof Symbol&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":Jc(q)})(p)}function n(p,q){for(var r=0;r<q.length;r++){var t=q[r];t.enumerable=
t.enumerable||!1;t.configurable=!0;"value"in t&&(t.writable=!0);Object.defineProperty(p,t.key,t)}}Object.defineProperty(f,"__esModule",{value:!0});f["default"]=void 0;a=function(){function p(){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");!0}return function(q,r,t){r&&n(q.prototype,r);t&&n(q,t)}(p,[{key:"init",value:function(q,r,t,w){if(2>arguments.length)throw Error("init: invalid number of arguments");if(this.ctx=q,this.ASTy=!0,this.T=r,this.L={L:0,C:0,O:0},this.A=
{},this.C=[],this.P=null,"object"===k(t))for(var x in t)Object.prototype.hasOwnProperty.call(t,x)&&this.set(x,t[x]);return"object"===k(w)&&w instanceof Array&&this.add(w),this}},{key:"create",value:function(q,r,t){return this.ctx.create(q,r,t)}},{key:"type",value:function(q){if(0===arguments.length)return this.T;if(1===arguments.length)return this.T=q,this;throw Error("type: invalid number of arguments");}},{key:"pos",value:function(q,r,t){if(0===arguments.length)return{line:this.L.L,column:this.L.C,
offset:this.L.O};if(3>=arguments.length)return this.L.L=q||0,this.L.C=r||0,this.L.O=t||0,this;throw Error("pos: invalid number of arguments");}},{key:"set",value:function(){for(var q=this,r=arguments.length,t=Array(r),w=0;w<r;w++)t[w]=arguments[w];if(1===t.length&&"object"===k(t[0]))Object.keys(t[0]).forEach(function(x){void 0!==t[0][x]?q.A[x]=t[0][x]:delete q.A[x]});else{if(2!==t.length)throw Error("set: invalid number of arguments");void 0!==t[1]?this.A[t[0]]=t[1]:delete this.A[t[0]]}return this}},
{key:"unset",value:function(){for(var q=this,r=arguments.length,t=Array(r),w=0;w<r;w++)t[w]=arguments[w];if(1===t.length&&"object"===k(t[0])&&t[0]instanceof Array)t[0].forEach(function(x){delete q.A[x]});else{if(1!==t.length)throw Error("unset: invalid number of arguments");delete this.A[t[0]]}return this}},{key:"get",value:function(){for(var q=this,r=arguments.length,t=Array(r),w=0;w<r;w++)t[w]=arguments[w];if(1!==t.length)throw Error("get: invalid number of arguments");if("object"===k(t[0])&&t[0]instanceof
Array)return t[0].map(function(x){if("string"!=typeof x)throw Error("get: invalid key argument");return q.A[x]});r=t[0];if("string"!=typeof r)throw Error("get: invalid key argument");return this.A[r]}},{key:"attrs",value:function(){return Object.keys(this.A)}},{key:"nth",value:function(){if(null===this.P)return 1;var q=this.P.C.indexOf(this);if(0>q)throw Error("nth: internal error -- node not in childs of its parent");return q}},{key:"ins",value:function(q){for(var r=this,t=arguments.length,w=Array(1<
t?t-1:0),x=1;x<t;x++)w[x-1]=arguments[x];if(0===w.length)throw Error("ins: invalid number of arguments");if(0>q&&(q=this.C.length+1-q),!(0<=q&&q<=this.C.length))throw Error("ins: invalid position");var B=function(D){if(!r.ctx.isA(D))throw Error("ins: invalid AST node argument");r.C.splice(q++,0,D);D.P=r};return w.forEach(function(D){"object"===k(D)&&D instanceof Array?D.forEach(function(F){B(F)}):null!==D&&B(D)}),this}},{key:"add",value:function(){for(var q=this,r=arguments.length,t=Array(r),w=0;w<
r;w++)t[w]=arguments[w];if(0===t.length)throw Error("add: invalid number of arguments");var x=function(B){if(!q.ctx.isA(B))throw Error("add: invalid AST node argument");q.C.push(B);B.P=q};return t.forEach(function(B){"object"===k(B)&&B instanceof Array?B.forEach(function(D){x(D)}):null!==B&&x(B)}),this}},{key:"del",value:function(){for(var q=this,r=arguments.length,t=Array(r),w=0;w<r;w++)t[w]=arguments[w];if(0===t.length)throw Error("del: invalid number of arguments");return t.forEach(function(x){if(!q.ctx.isA(x))throw Error("del: invalid AST node argument");
for(var B=!1,D=0;D<q.C.length;D++)if(q.C[D]===x){q.C.splice(D,1);x.P=null;B=!0;break}if(!B)throw Error("del: AST node not found in childs");}),this}},{key:"childs",value:function(){if(2<arguments.length)throw Error("childs: invalid number of arguments");if(2===arguments.length&&"number"==typeof(0>=arguments.length?void 0:arguments[0])&&"number"==typeof(1>=arguments.length?void 0:arguments[1]))return this.C.slice(0>=arguments.length?void 0:arguments[0],1>=arguments.length?void 0:arguments[1]);if(1===
arguments.length&&"number"==typeof(0>=arguments.length?void 0:arguments[0]))return this.C.slice(0>=arguments.length?void 0:arguments[0]);if(0===arguments.length)return this.C;throw Error("childs: invalid type of arguments");}},{key:"child",value:function(q){if("number"!=typeof q)throw Error("child: invalid argument");return q<this.C.length?this.C[q]:null}},{key:"parent",value:function(){return this.P}},{key:"serialize",value:function(){return this.ctx.__serialize(this)}}]),p}();f["default"]=a},{}],
2:[function(a,d,f){function k(w){return(k="function"==typeof Symbol&&"symbol"==Jc(Symbol.iterator)?function(x){return Jc(x)}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":Jc(x)})(w)}function n(w,x){for(var B=0;B<x.length;B++){var D=x[B];D.enumerable=D.enumerable||!1;D.configurable=!0;"value"in D&&(D.writable=!0);Object.defineProperty(w,D.key,D)}}Object.defineProperty(f,"__esModule",{value:!0});f["default"]=void 0;var p=String.fromCharCode(9500),
q=String.fromCharCode(9492),r=String.fromCharCode(9474),t=String.fromCharCode(9472);a=function(){function w(){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");!0}return function(x,B,D){B&&n(x.prototype,B);D&&n(x,D)}(w,[{key:"dump",value:function(){var x=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1/0,B=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(G,oa){return oa},D=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],F="",L=this;
return this.walk(function(G,oa){if(!(oa>x)){if(0<oa){oa=function(qc){var jc=0,Ya=0;return null!==qc.P&&(jc=qc.P.C.indexOf(qc),Ya=qc.P.C.length-1),{nth:jc,max:Ya}};var ha=oa(G),Ha=ha.nth,Va=ha.max;ha=" ";ha=D?"".concat(t).concat(t).concat(ha):"".concat("-").concat("-").concat(ha);ha=Ha<Va?"".concat(D?p:"+").concat(ha):"".concat(D?q:"+").concat(ha);for(Ha=G.P;null!==Ha&&Ha!==L;Ha=Ha.P)null!==Ha.P&&(Va=oa(Ha),ha=Va.nth<Va.max?"".concat(D?r:"|","   ").concat(ha):"    ".concat(ha));F+=B("tree",ha)}F+=
B("type",G.T)+" ";oa=Object.keys(G.A).filter(function(qc){return!qc.match(/^__/)});if(0<oa.length){F+=B("parenthesis","(");var hc=!0;oa.forEach(function(qc){hc?hc=!1:F+=B("comma",",")+" ";F+=B("key",qc)+B("colon",":")+" ";qc=G.A[qc];switch(k(qc)){case "boolean":case "number":F+=B("value",qc.toString());break;case "string":var jc=function(Ya){return Ya.charCodeAt(0).toString(16).toUpperCase()};F+=B("value",'"'+qc.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,
"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(Ya){return"\\x0"+jc(Ya)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(Ya){return"\\x"+jc(Ya)}).replace(/[\u0100-\u0FFF]/g,function(Ya){return"\\u0"+jc(Ya)}).replace(/[\u1000-\uFFFF]/g,function(Ya){return"\\u"+jc(Ya)})+'"');break;case "object":qc instanceof RegExp?F+=B("value","/"+qc.source+"/"):F+=B("value",JSON.stringify(qc));break;default:F+=B("value",JSON.stringify(qc))}});F+=B("parenthesis",")")+" "}F+=B("position",
B("bracket","[")+B("line",G.L.L)+B("slash",",")+B("column",G.L.C)+B("bracket","]"));F+="\n"}},"downward"),F}}]),w}();f["default"]=a},{}],3:[function(a,d,f){function k(n,p){for(var q=0;q<p.length;q++){var r=p[q];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(n,r.key,r)}}Object.defineProperty(f,"__esModule",{value:!0});f["default"]=void 0;a=function(){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");!0}
return function(p,q,r){q&&k(p.prototype,q);r&&k(p,r)}(n,[{key:"merge",value:function(p){var q=this,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(null===p)return this;if(!this.ctx.isA(p))throw Error("merge: invalid AST node argument");r&&(r=p.pos(),this.pos(r.line,r.column,r.offset));p.attrs().forEach(function(w){var x=void 0!==t[w]?t[w]:w;null!==x&&q.set(x,p.get(w))});p.childs().forEach(function(w){p.del(w);q.add(w)});r=p.parent();
return null!==r&&r.del(p),this}}]),n}();f["default"]=a},{}],4:[function(a,d,f){function k(p){return(k="function"==typeof Symbol&&"symbol"==Jc(Symbol.iterator)?function(q){return Jc(q)}:function(q){return q&&"function"==typeof Symbol&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":Jc(q)})(p)}function n(p,q){for(var r=0;r<q.length;r++){var t=q[r];t.enumerable=t.enumerable||!1;t.configurable=!0;"value"in t&&(t.writable=!0);Object.defineProperty(p,t.key,t)}}Object.defineProperty(f,"__esModule",
{value:!0});f["default"]=void 0;a=function(){function p(){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");!0}return function(q,r,t){r&&n(q.prototype,r);t&&n(q,t)}(p,null,[{key:"serialize",value:function(q,r){if(!q.isA(r))throw Error("serialize: not an ASTy node");return JSON.stringify({ASTy:function x(w){var B={T:w.T,L:{L:w.L.L,C:w.L.C,O:w.L.O}},D=Object.keys(w.A);return 0<D.length&&(B.A={},D.forEach(function(F){var L=w.A[F];switch(k(L)){case "boolean":case "number":case "string":B.A[F]=
L;break;default:B.A[F]=JSON.parse(JSON.stringify(L))}})),0<w.C.length&&(B.C=w.C.map(function(F){return x(F)})),B}(r)})}},{key:"unserialize",value:function(q,r){r=JSON.parse(r);if("object"!==k(r)||"object"!==k(r.ASTy))throw Error("unserialize: not an ASTy JSON export");return function x(w){var B=q.create(w.T);return B.pos(w.L.L,w.L.C,w.L.O),"object"===k(w.A)&&Object.keys(w.A).forEach(function(D){var F=w.A[D];switch(k(F)){case "boolean":case "number":case "string":B.set(D,F);break;default:B.set(D,JSON.parse(JSON.stringify(F)))}}),
"object"===k(w.C)&&w.C instanceof Array&&B.add(w.C.map(function(D){return x(D)})),B}(r.ASTy)}}]),p}();f["default"]=a},{}],5:[function(a,d,f){Object.defineProperty(f,"__esModule",{value:!0});f["default"]=void 0;f["default"]={major:1,minor:8,micro:13,date:20210107}},{}],6:[function(a,d,f){function k(n,p){for(var q=0;q<p.length;q++){var r=p[q];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(n,r.key,r)}}Object.defineProperty(f,"__esModule",{value:!0});
f["default"]=void 0;a=function(){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");!0}return function(p,q,r){q&&k(p.prototype,q);r&&k(p,r)}(n,[{key:"walk",value:function(p){var q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"downward";return function B(t,w,x){"downward"!==q&&"both"!==q||p(t,w,x,"downward");t.C.forEach(function(D){B(D,w+1,t)});"upward"!==q&&"both"!==q||p(t,w,x,"upward")}(this,0,null),this}}]),n}();f["default"]=a},{}],7:[function(a,
d,f){function k(F){return F&&F.__esModule?F:{"default":F}}function n(F){return(n="function"==typeof Symbol&&"symbol"==Jc(Symbol.iterator)?function(L){return Jc(L)}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":Jc(L)})(F)}function p(F,L){if(!(F instanceof L))throw new TypeError("Cannot call a class as a function");}function q(F,L){for(var G=0;G<L.length;G++){var oa=L[G];oa.enumerable=oa.enumerable||!1;oa.configurable=!0;"value"in oa&&(oa.writable=
!0);Object.defineProperty(F,oa.key,oa)}}var r=k(a("./asty-base.js")),t=k(a("./asty-merge.js")),w=k(a("./asty-walk.js")),x=k(a("./asty-dump.js")),B=k(a("./asty-serialize.js")),D=k(a("./asty-version.js"));a=function(){function F(){var L=this;return p(this,F),this.ASTYNode=function oa(){p(this,oa)},[[r["default"],"init","create","type","pos","set","unset","get","attrs","nth","ins","add","del","childs","child","parent","serialize"],[t["default"],"merge"],[w["default"],"walk"],[x["default"],"dump"]].forEach(function(oa){var ha=
oa[0].prototype;oa.slice(1).forEach(function(Ha){L.ASTYNode.prototype[Ha]=ha[Ha]})}),this}return function(L,G,oa){G&&q(L.prototype,G);oa&&q(L,oa)}(F,[{key:"version",value:function(){return D["default"]}},{key:"extend",value:function(L){for(var G in L)Object.prototype.hasOwnProperty.call(L,G)&&(this.ASTYNode.prototype[G]=L[G]);return this}},{key:"create",value:function(L,G,oa){return(new this.ASTYNode).init(this,L,G,oa)}},{key:"isA",value:function(L){return"object"===n(L)&&L instanceof this.ASTYNode&&
"boolean"==typeof L.ASTy&&!0===L.ASTy}},{key:"__serialize",value:function(L){return F.serialize(L)}}],[{key:"serialize",value:function(L){return B["default"].serialize(L.ctx,L)}},{key:"unserialize",value:function(L){return B["default"].unserialize(new this,L)}}]),F}();d.exports=a},{"./asty-base.js":1,"./asty-dump.js":2,"./asty-merge.js":3,"./asty-serialize.js":4,"./asty-version.js":5,"./asty-walk.js":6}]},{},[1,2,3,4,5,6,7])(7)})}).call(this)}).call(this,"undefined"!==typeof Ak.commonjsHelpers.commonjsGlobal?
Ak.commonjsHelpers.commonjsGlobal:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],2:[function(l,b,c){(function(g){(function(){!function(a){"object"==Jc(c)&&"undefined"!=typeof b?b.exports=a():("undefined"!=typeof window?window:"undefined"!=typeof g?g:"undefined"!=typeof self?self:this).CacheLRU=a()}(function(){return function(){return function n(d,f,k){function p(t,w){if(!f[t]){if(!d[t]){var x="function"==typeof l&&l;if(!w&&x)return x(t,!0);if(q)return q(t,!0);w=Error("Cannot find module '"+
t+"'");throw w.code="MODULE_NOT_FOUND",w;}w=f[t]={exports:{}};d[t][0].call(w.exports,function(B){return p(d[t][1][B]||B)},w,w.exports,n,d,f,k)}return f[t].exports}for(var q="function"==typeof l&&l,r=0;r<k.length;r++)p(k[r]);return p}}()({1:[function(a,d,f){function k(n,p){for(var q=0;q<p.length;q++){var r=p[q];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(n,r.key,r)}}a=function(){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");
return this._index={},this._LRU={newer:null},this._MRU={older:null},this._LRU.newer=this._MRU,this._MRU.older=this._LRU,this._cur=0,this._max=1/0,this._dispose=function(){},this}return function(p,q,r){q&&k(p.prototype,q);r&&k(p,r)}(n,[{key:"limit",value:function(p){var q=this._max;return 0<arguments.length&&(this._max=p,this._purge()),q}},{key:"dispose",value:function(p){return this._dispose=p,this}},{key:"length",value:function(){return this._cur}},{key:"keys",value:function(){return this.each(function(p,
q){this.push(q)},[])}},{key:"values",value:function(){return this.each(function(p){this.push(p)},[])}},{key:"each",value:function(p,q){2>arguments&&(q=this);for(var r=0,t=this._MRU.older;t!==this._LRU;)p.call(q,t.val,t.key,r++),t=t.older;return q}},{key:"has",value:function(p){p=this._index[p];return void 0!==p&&p.expires>=Date.now()}},{key:"peek",value:function(p){p=this._index[p];if(void 0!==p){if(!(p.expires<Date.now()))return p.val;this.del(p.key)}}},{key:"touch",value:function(p){p=this._index[p];
if(void 0===p)throw Error("touch: no such item");return this._promote(p),this}},{key:"get",value:function(p){p=this._index[p];if(void 0!==p){if(!(p.expires<Date.now()))return this._promote(p),p.val;this.del(p.key)}}},{key:"set",value:function(p,q,r){3>arguments.length&&(r=1/0);r+=Date.now();var t=this._index[p];if(void 0===t)t={older:null,newer:null,key:p,val:q,expires:r},this._index[p]=t,this._attach(t),this._cur++,this._purge();else{var w=t.val;t.val=q;this._promote(t);this._dispose.call(void 0,
t.key,w,"set")}return this}},{key:"del",value:function(p){var q=this._index[p];if(void 0===q)throw Error("del: no such item");return delete this._index[p],this._detach(q),this._cur--,this._dispose.call(void 0,p,q.val,"del"),this}},{key:"clear",value:function(){for(;0<this._cur;)this.del(this._LRU.newer.key);return this}},{key:"_purge",value:function(){for(;this._cur>this._max;)this.del(this._LRU.newer.key)}},{key:"_promote",value:function(p){this._detach(p);this._attach(p)}},{key:"_detach",value:function(p){p.older.newer=
p.newer;p.newer.older=p.older;p.older=null;p.newer=null}},{key:"_attach",value:function(p){p.older=this._MRU.older;p.newer=this._MRU;p.newer.older=p;p.older.newer=p}}]),n}();d.exports=a},{}]},{},[1])(1)})}).call(this)}).call(this,"undefined"!==typeof Ak.commonjsHelpers.commonjsGlobal?Ak.commonjsHelpers.commonjsGlobal:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],3:[function(l,b,c){(function(g){(function(){!function(a,d,f){"object"==Jc(b)&&"object"==Jc(b.exports)?b.exports=
f():a.PEGUtil=f()}("undefined"!=typeof g?g:"undefined"!=typeof window?window:this,0,function(){var a={makeAST:function(f,k){return function(){return k.util.__makeAST.call(null,f().start.line,f().start.column,f().start.offset,arguments)}},makeUnroll:function(f,k){return function(n,p,q){if("object"!=Jc(p)||!(p instanceof Array))throw new k.util.__SyntaxError("unroll: invalid list argument for unrolling",Jc(p),"Array",f());if(void 0!==q){"number"==typeof q&&(q=[q]);var r=[];null!==n&&r.push(n);for(n=
0;n<p.length;n++)for(var t=0;t<q.length;t++)r.push(p[n][q[t]]);return r}return null!==n&&p.unshift(n),p}}},d=function(f,k){var n=f.length,p=k-20;0>p&&(p=0);var q=k+20;q>n&&(q=n);var r=function(t){return t.charCodeAt(0).toString(16).toUpperCase()};n=function(t,w,x){return t.substr(w,x).replace(/\\/g,"\\\\").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(B){return"\\x0"+r(B)}).replace(/[\x10-\x1F\x80-\xFF]/g,
function(B){return"\\x"+r(B)}).replace(/[\u0100-\u0FFF]/g,function(B){return"\\u0"+r(B)}).replace(/[\u1000-\uFFFF]/g,function(B){return"\\u"+r(B)})};return{prolog:n(f,p,k-p),token:n(f,k,1),epilog:n(f,k+1,q-(k+1))}};return a.parse=function(f,k,n){if("object"!=Jc(f))throw Error("invalid parser object (not an object)");if("function"!=typeof f.parse)throw Error('invalid parser object (no "parse" function)');if("string"!=typeof k)throw Error("invalid input text (not a string)");if(void 0!==n&&"object"!=
Jc(n))throw Error("invalid options (not an object)");void 0===n&&(n={});var p={ast:null,error:null};try{n.util={makeUnroll:a.makeUnroll,makeAST:a.makeAST,__makeAST:"function"==typeof n.makeAST?n.makeAST:function(q,r){return{line:q().start.line,column:q().start.column,offset:q().start.offset,args:r}},__SyntaxError:f.SyntaxError},p.ast=f.parse(k,n),p.error=null}catch(q){(p.ast=null,q instanceof f.SyntaxError)?(f=function(r,t){return void 0!==r?r:t},p.error={line:f(q.location.start.line,0),column:f(q.location.start.column,
0),message:q.message,found:f(q.found,""),expected:f(q.expected,""),location:d(k,f(q.location.start.offset,0))}):p.error={line:0,column:0,message:q.message,found:"",expected:"",location:d("",0)}}return p},a.errorMessage=function(f,k){for(var n=f.location,p="line "+f.line+" (column "+f.column+"): ",q="",r=0;r<p.length+n.prolog.length;r++)q+="-";return p+n.prolog+n.token+n.epilog+"\n"+q+"^\n"+f.message+(k?"":"\n")},a})}).call(this)}).call(this,"undefined"!==typeof Ak.commonjsHelpers.commonjsGlobal?Ak.commonjsHelpers.commonjsGlobal:
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],4:[function(l,b,c){function g(f){return(g="function"==typeof Symbol&&"symbol"==Jc(Symbol.iterator)?function(k){return Jc(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":Jc(k)})(f)}function a(f,k){for(var n=0;n<k.length;n++){var p=k[n];p.enumerable=p.enumerable||!1;p.configurable=!0;"value"in p&&(p.writable=!0);Object.defineProperty(f,p.key,p)}}function d(f,k,n){return k&&
a(f.prototype,k),n&&a(f,n),f}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;l=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");}return d(f,null,[{key:"taste",value:function(k){return"object"===g(k)&&null!==k&&"boolean"==typeof k.ASTy}},{key:"getParentNode",value:function(k){return k.parent()}},{key:"getChildNodes",value:function(k){return k.childs()}},{key:"getNodeType",value:function(k){return k.type()}},{key:"getNodeAttrNames",
value:function(k){return k.attrs()}},{key:"getNodeAttrValue",value:function(k,n){return k.get(n)}}]),f}();c["default"]=l},{}],5:[function(l,b,c){function g(f){return(g="function"==typeof Symbol&&"symbol"==Jc(Symbol.iterator)?function(k){return Jc(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":Jc(k)})(f)}function a(f,k){for(var n=0;n<k.length;n++){var p=k[n];p.enumerable=p.enumerable||!1;p.configurable=!0;"value"in p&&(p.writable=!0);Object.defineProperty(f,
p.key,p)}}function d(f,k,n){return k&&a(f.prototype,k),n&&a(f,n),f}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;l=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");}return d(f,null,[{key:"taste",value:function(k){return"object"===g(k)&&null!==k&&!("object"===("undefined"==typeof Node?"undefined":g(Node))&&k instanceof Node)&&"string"==typeof k.tagName&&""!==k.tagName}},{key:"getParentNode",value:function(k){return k.parentNode}},
{key:"getChildNodes",value:function(k){return"object"===g(k.childNodes)&&k.childNodes instanceof Array?k.childNodes:[]}},{key:"getNodeType",value:function(k){return k.tagName||"#".concat(k.type||"unknown")}},{key:"getNodeAttrNames",value:function(k){var n=["value"];return"object"===g(k.attribs)&&(n=n.concat(Object.keys(k.attribs))),n}},{key:"getNodeAttrValue",value:function(k,n){var p;return"value"===n?p=k.nodeValue:"object"===g(k.attribs)&&(p=k.attribs[n]),p}}]),f}();c["default"]=l},{}],6:[function(l,
b,c){function g(f){return(g="function"==typeof Symbol&&"symbol"==Jc(Symbol.iterator)?function(k){return Jc(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":Jc(k)})(f)}function a(f,k){for(var n=0;n<k.length;n++){var p=k[n];p.enumerable=p.enumerable||!1;p.configurable=!0;"value"in p&&(p.writable=!0);Object.defineProperty(f,p.key,p)}}function d(f,k,n){return k&&a(f.prototype,k),n&&a(f,n),f}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=
void 0;l=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");}return d(f,null,[{key:"taste",value:function(k){return"object"===g(k)&&null!==k&&"string"==typeof k.kind&&""!==k.kind}},{key:"getParentNode",value:function(k,n){throw Error("GraphQL AST does not support parent node traversal");}},{key:"getChildNodes",value:function(k,n){var p=this,q=[],r=function(w,x){Object.prototype.hasOwnProperty.call(w,x)&&p.taste(w[x])?q.push(w[x]):Object.prototype.hasOwnProperty.call(w,
x)&&"object"===g(w[x])&&w[x]instanceof Array&&w[x].forEach(function(B){p.taste(B)&&q.push(B)})};if("*"===n)for(var t in k)r(k,t);else void 0!==k[n]&&r(k,n);return q}},{key:"getNodeType",value:function(k){return k.kind}},{key:"getNodeAttrNames",value:function(k){var n=[],p;for(p in k)Object.prototype.hasOwnProperty.call(k,p)&&"object"!==g(k[p])&&"kind"!==p&&"loc"!==p&&n.push(p);return n}},{key:"getNodeAttrValue",value:function(k,n){return Object.prototype.hasOwnProperty.call(k,n)&&"object"!==g(k[n])&&
"kind"!==n&&"loc"!==n?k[n]:void 0}}]),f}();c["default"]=l},{}],7:[function(l,b,c){function g(f){return(g="function"==typeof Symbol&&"symbol"==Jc(Symbol.iterator)?function(k){return Jc(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":Jc(k)})(f)}function a(f,k){for(var n=0;n<k.length;n++){var p=k[n];p.enumerable=p.enumerable||!1;p.configurable=!0;"value"in p&&(p.writable=!0);Object.defineProperty(f,p.key,p)}}function d(f,k,n){return k&&a(f.prototype,
k),n&&a(f,n),f}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;l=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");}return d(f,null,[{key:"taste",value:function(k){return"object"===g(k)&&null!==k}},{key:"getParentNode",value:function(k,n){throw Error("JSON does not support parent node traversal");}},{key:"getChildNodes",value:function(k,n){var p=this,q=[],r=function(w,x){Object.prototype.hasOwnProperty.call(w,x)&&p.taste(w[x])?
q.push(w[x]):Object.prototype.hasOwnProperty.call(w,x)&&"object"===g(w[x])&&w[x]instanceof Array&&w[x].forEach(function(B){p.taste(B)&&q.push(B)})};if("*"===n)for(var t in k)r(k,t);else void 0!==k[n]&&r(k,n);return q}},{key:"getNodeType",value:function(k){return null===k?"Null":k instanceof Boolean?"Boolean":k instanceof Number?"Number":k instanceof String?"String":"object"===g(k)?k instanceof Array?"Array":"function"==typeof k.constructor&&"string"==typeof k.constructor.name?k.constructor.name:"Object":
"Unknown"}},{key:"getNodeAttrNames",value:function(k){var n=[],p;for(p in k)Object.prototype.hasOwnProperty.call(k,p)&&"object"!==g(k[p])&&n.push(p);return n}},{key:"getNodeAttrValue",value:function(k,n){return Object.prototype.hasOwnProperty.call(k,n)&&"object"!==g(k[n])?k[n]:void 0}}]),f}();c["default"]=l},{}],8:[function(l,b,c){function g(f){return(g="function"==typeof Symbol&&"symbol"==Jc(Symbol.iterator)?function(k){return Jc(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===
Symbol&&k!==Symbol.prototype?"symbol":Jc(k)})(f)}function a(f,k){for(var n=0;n<k.length;n++){var p=k[n];p.enumerable=p.enumerable||!1;p.configurable=!0;"value"in p&&(p.writable=!0);Object.defineProperty(f,p.key,p)}}function d(f,k,n){return k&&a(f.prototype,k),n&&a(f,n),f}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;l=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");}return d(f,null,[{key:"taste",value:function(k){return"object"===
g(k)&&null!==k&&"string"==typeof k.type&&""!==k.type}},{key:"getParentNode",value:function(k,n){if("*"!==n&&"parent"!==n)throw Error('no such axis named "'+n+'" for walking to parent nodes');if(void 0!==k.parent)return k.parent;throw Error("Your Mozilla SpiderMonkey AST does not support parent node traversal");}},{key:"getChildNodes",value:function(k,n){var p=this,q=[],r=function(w,x){Object.prototype.hasOwnProperty.call(w,x)&&p.taste(w[x])?q.push(w[x]):Object.prototype.hasOwnProperty.call(w,x)&&
"object"===g(w[x])&&w[x]instanceof Array&&w[x].forEach(function(B){p.taste(B)&&q.push(B)})};if("*"===n)for(var t in k)r(k,t);else void 0!==k[n]&&r(k,n);return q}},{key:"getNodeType",value:function(k){return k.type}},{key:"getNodeAttrNames",value:function(k){var n=[],p;for(p in k)Object.prototype.hasOwnProperty.call(k,p)&&"object"!==g(k[p])&&"type"!==p&&"loc"!==p&&n.push(p);return n}},{key:"getNodeAttrValue",value:function(k,n){return Object.prototype.hasOwnProperty.call(k,n)&&"object"!==g(k[n])&&
"type"!==n&&"loc"!==n?k[n]:void 0}}]),f}();c["default"]=l},{}],9:[function(l,b,c){function g(f){return(g="function"==typeof Symbol&&"symbol"==Jc(Symbol.iterator)?function(k){return Jc(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":Jc(k)})(f)}function a(f,k){for(var n=0;n<k.length;n++){var p=k[n];p.enumerable=p.enumerable||!1;p.configurable=!0;"value"in p&&(p.writable=!0);Object.defineProperty(f,p.key,p)}}function d(f,k,n){return k&&a(f.prototype,
k),n&&a(f,n),f}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;l=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");}return d(f,null,[{key:"taste",value:function(k){return"object"===g(k)&&null!==k&&!("object"===("undefined"==typeof Node?"undefined":g(Node))&&k instanceof Node)&&"string"==typeof k.nodeName&&""!==k.nodeName}},{key:"getParentNode",value:function(k){return k.parentNode}},{key:"getChildNodes",value:function(k){return"object"===
g(k.childNodes)&&k.childNodes instanceof Array?k.childNodes:[]}},{key:"getNodeType",value:function(k){return k.nodeName}},{key:"getNodeAttrNames",value:function(k){var n=["value"];return"object"===g(k.attrs)&&k.attrs instanceof Array&&(n=n.concat(k.attrs.map(function(p){return p.name}))),n}},{key:"getNodeAttrValue",value:function(k,n){if("value"===n)var p=k.value;else"object"===g(k.attrs)&&k.attrs instanceof Array&&(k=k.attrs.filter(function(q){return q.name===n}).map(function(q){return q.value}),
1===k.length&&(p=k[0]));return p}}]),f}();c["default"]=l},{}],10:[function(l,b,c){function g(f){return(g="function"==typeof Symbol&&"symbol"==Jc(Symbol.iterator)?function(k){return Jc(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":Jc(k)})(f)}function a(f,k){for(var n=0;n<k.length;n++){var p=k[n];p.enumerable=p.enumerable||!1;p.configurable=!0;"value"in p&&(p.writable=!0);Object.defineProperty(f,p.key,p)}}function d(f,k,n){return k&&a(f.prototype,
k),n&&a(f,n),f}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;l=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");}return d(f,null,[{key:"taste",value:function(k){return"object"===g(k)&&null!==k&&"string"==typeof k.type&&""!==k.type}},{key:"getParentNode",value:function(k){if("object"===g(k.parent)&&null!==k.parent)return k.parent;throw Error("Your UniST AST does not support parent node traversal");}},{key:"getChildNodes",
value:function(k){return"object"===g(k.children)&&k.children instanceof Array?k.children:[]}},{key:"getNodeType",value:function(k){return k.type}},{key:"getNodeAttrNames",value:function(k){var n=[],p;for(p in k)Object.prototype.hasOwnProperty.call(k,p)&&"type"!==p&&"data"!==p&&"position"!==p&&"children"!==p&&"object"!==g(k[p])&&n.push(p);return n}},{key:"getNodeAttrValue",value:function(k,n){return Object.prototype.hasOwnProperty.call(k,n)&&"type"!==n&&"data"!==n&&"position"!==n&&"children"!==n&&
"object"!==g(k[n])?k[n]:void 0}}]),f}();c["default"]=l},{}],11:[function(l,b,c){function g(f){return(g="function"==typeof Symbol&&"symbol"==Jc(Symbol.iterator)?function(k){return Jc(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":Jc(k)})(f)}function a(f,k){for(var n=0;n<k.length;n++){var p=k[n];p.enumerable=p.enumerable||!1;p.configurable=!0;"value"in p&&(p.writable=!0);Object.defineProperty(f,p.key,p)}}function d(f,k,n){return k&&a(f.prototype,
k),n&&a(f,n),f}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;l=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");}return d(f,null,[{key:"taste",value:function(k){return"object"===("undefined"==typeof Node?"undefined":g(Node))&&null!==k&&k instanceof Node&&"object"===g(k)&&"number"==typeof k.nodeType&&"string"==typeof k.nodeName}},{key:"getParentNode",value:function(k){return k.parentNode}},{key:"getChildNodes",value:function(k){return"object"===
g(k.childNodes)&&null!==k.childNodes&&k.hasChildNodes()?Array.prototype.slice.call(k.childNodes,0):[]}},{key:"getNodeType",value:function(k){return"string"==typeof k.nodeName?k.nodeName:"unknown"}},{key:"getNodeAttrNames",value:function(k){return"object"===g(k.attributes)&&null!==k.attributes&&k.hasAttributes()?Array.prototype.slice.call(k.attributes,0).map(function(n){return n.nodeName}):[]}},{key:"getNodeAttrValue",value:function(k,n){return"object"===g(k.attributes)&&null!==k.attributes&&k.hasAttributes()?
k.getAttribute(n):void 0}}]),f}();c["default"]=l},{}],12:[function(l,b,c){function g(d,f){for(var k=0;k<f.length;k++){var n=f[k];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(d,n.key,n)}}function a(d,f,k){return f&&g(d.prototype,f),k&&g(d,k),d}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;l=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");return this._adapters=[],this}
return a(d,[{key:"register",value:function(f){return this._adapters.unshift({adapter:f,force:1<arguments.length&&void 0!==arguments[1]&&arguments[1]}),this}},{key:"unregister",value:function(f){if(void 0===f)this._adapters=[];else{for(var k=[],n=0;n<this._adapters.length;n++)this._adapters[n].adapter!==f&&k.push(this._adapters[n]);this._adapters=k}return this}},{key:"select",value:function(f){for(var k=0;k<this._adapters.length;k++)if(this._adapters[k].force||this._adapters[k].adapter.taste(f))return this._adapters[k].adapter}}]),
d}();c["default"]=l},{}],13:[function(l,b,c){function g(k){return(g="function"==typeof Symbol&&"symbol"==Jc(Symbol.iterator)?function(n){return Jc(n)}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":Jc(n)})(k)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var a=function(k,n){var p=k.getParentNode(n,"*");if(null===p)return 1;k=k.getChildNodes(p,"*");for(p=0;p<k.length;p++)if(k[p]===n)return p+1;throw Error("cannot find myself");
},d=function(k,n){for(var p=[];null!==(n=k.getParentNode(n,"*"));)p.push(n);return p},f={type:function(k,n){return k.getNodeType(n)},attrs:function(k,n,p){return void 0===p&&(p=" "),p+k.getNodeAttrNames(n).join(p)+p},depth:function(k,n){for(var p=1;null!==(n=k.getParentNode(n,"*"));)p++;return p},pos:function(k,n){return a(k,n)},nth:function(k,n,p){p=parseInt(p,10);var q=k.getParentNode(n,"*");if(null!==q){k=k.getChildNodes(q,"*");0>p&&(p=k.length-(p+1));for(q=0;q<k.length;q++)if(k[q]===n)return q+
1===p;return!1}return 1===p},first:function(k,n){return f.nth(k,n,1)},last:function(k,n){return f.nth(k,n,-1)},count:function(k,n,p){return"object"===g(p)&&p instanceof Array?p.length:"object"===g(p)?Object.keys(p).length:"string"==typeof p?p.length:String(p).length},below:function(k,n,p){if(!k.taste(p))throw Error('invalid argument to function "below" (node expected)');for(;null!==(n=k.getParentNode(n,"*"));)if(n===p)return!0;return!1},follows:function(k,n,p){if(!k.taste(p))throw Error('invalid argument to function "follows" (node expected)');
if(n===p)return!1;n=[n].concat(d(k,n)).reverse();var q=[p].concat(d(k,p)).reverse(),r=Math.min(n.length,q.length);for(p=0;p<r&&n[p]===q[p];p++);if(0===p)throw Error("internal error: root nodes have to be same same");return p===r?q.length<n.length:a(k,n[p])>a(k,q[p])},"in":function(k,n,p){if(!("object"===g(p)&&p instanceof Array))throw Error('invalid argument to function "in" (array expected)');for(k=0;k<p.length;k++)if(p[k]===n)return!0;return!1},substr:function(k,n,p,q,r){return String(p).substr(q,
r)},index:function(k,n,p,q,r){return String(p).indexOf(q,r)},trim:function(k,n,p){return String(p).trim()},lc:function(k,n,p){return String(p).toLowerCase()},uc:function(k,n,p){return String(p).toUpperCase()}};c["default"]=f},{}],14:[function(l,b,c){function g(d,f){for(var k=0;k<f.length;k++){var n=f[k];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(d,n.key,n)}}function a(d,f,k){return f&&g(d.prototype,f),k&&g(d,k),d}Object.defineProperty(c,"__esModule",
{value:!0});c["default"]=void 0;l=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");return this._funcs={},this}return a(d,[{key:"register",value:function(f,k){this._funcs[f]=k}},{key:"run",value:function(f,k){var n=this._funcs[f];if("function"!=typeof n)throw Error('invalid function "'+f+'"');return n.apply(null,k)}}]),d}();c["default"]=l},{}],15:[function(l,b,c){function g(x){return(g="function"==typeof Symbol&&"symbol"==Jc(Symbol.iterator)?
function(B){return Jc(B)}:function(B){return B&&"function"==typeof Symbol&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":Jc(B)})(x)}function a(x){return x&&x.__esModule?x:{"default":x}}function d(x,B){for(var D=0;D<B.length;D++){var F=B[D];F.enumerable=F.enumerable||!1;F.configurable=!0;"value"in F&&(F.writable=!0);Object.defineProperty(x,F.key,F)}}function f(x,B,D){return B&&d(x.prototype,B),D&&d(x,D),x}function k(x,B){if("function"!=typeof B&&null!==B)throw new TypeError("Super expression must either be null or a function");
x.prototype=Object.create(B&&B.prototype,{constructor:{value:x,writable:!0,configurable:!0}});B&&n(x,B)}function n(x,B){return(n=Object.setPrototypeOf||function(D,F){return D.__proto__=F,D})(x,B)}function p(x){var B=q();return function(){var D=r(x);if(B){var F=r(this).constructor;D=Reflect.construct(D,arguments,F)}else D=D.apply(this,arguments);if(!D||"object"!==g(D)&&"function"!=typeof D){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");D=this}return D}}
function q(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(x){return!1}}function r(x){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(B){return B.__proto__||Object.getPrototypeOf(B)})(x)}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var t=a(l("./astq-util.js")),w=a(l("./astq-query-trace.js"));l=function(x){function B(F,
L,G,oa){var ha;if(!(this instanceof B))throw new TypeError("Cannot call a class as a function");return(ha=D.call(this)).adapter=F,ha.params=L,ha.funcs=G,ha.trace=oa,ha}k(B,w["default"]);var D=p(B);return f(B,[{key:"execQuery",value:function(F,L){var G=this;this.traceBegin(F,L);var oa=[];return F.childs().forEach(function(ha){oa=oa.concat(G.execPath(ha,L))}),this.traceEnd(F,L,oa),oa}},{key:"execPath",value:function(F,L){var G=this;this.traceBegin(F,L);var oa=[L],ha=[],Ha=!1;return F.childs().forEach(function(Va){var hc=
[];oa.forEach(function(qc){hc=hc.concat(G.execStep(Va,qc))});oa=hc;Va.get("isResult")&&(Ha=!0,ha=ha.concat(oa))}),this.traceEnd(F,L,oa),Ha?ha:oa}},{key:"execStep",value:function(F,L){var G=this;this.traceBegin(F,L);var oa=F.childs(),ha=null,Ha=null,Va=null,hc=0;if(hc<oa.length&&"Axis"===oa[hc].type()&&(ha=oa[hc++]),hc<oa.length&&"Match"===oa[hc].type()&&(Ha=oa[hc++]),hc<oa.length&&"Filter"===oa[hc].type()&&(Va=oa[hc++]),null===Ha)throw Error("no matching part in query step");var qc=[],jc=Ha.get("id"),
Ya=function($c){var Oa=G.adapter.getNodeType($c);if("*"===jc||jc===Oa)Oa=!0,null!==Va&&(G.execFilter(Va,$c)||(Oa=!1)),Oa&&qc.push($c)};if(null!==ha){oa=ha.get("op");var xa=ha.get("type");if("/"===oa)this.adapter.getChildNodes(L,xa).forEach(function($c){return Ya($c)});else if("//"===oa)this.adapter.getChildNodes(L,xa).forEach(function($c){return function la(md){Ya(md);G.adapter.getChildNodes(md,xa).forEach(function($a){return la($a)})}($c)});else if("./"===oa)Ya(L),this.adapter.getChildNodes(L,xa).forEach(function($c){return Ya($c)});
else if(".//"===oa)Ya(L),this.adapter.getChildNodes(L,xa).forEach(function($c){return function la(md){Ya(md);G.adapter.getChildNodes(md,xa).forEach(function($a){return la($a)})}($c)});else if("-/"===oa){if(ha=this.adapter.getParentNode(L,"*"),null!==ha){ha=this.adapter.getChildNodes(ha,xa);oa=null;for(Ha=0;Ha<ha.length&&ha[Ha]!==L;Ha++)oa=ha[Ha];null!==oa&&Ya(oa)}}else if("-//"===oa){if(ha=this.adapter.getParentNode(L,"*"),null!==ha){ha=this.adapter.getChildNodes(ha,xa);for(oa=0;oa<ha.length&&ha[oa]!==
L;oa++);for(oa--;0<=oa;oa--)Ya(ha[oa])}}else if("+/"===oa){if(ha=this.adapter.getParentNode(L,"*"),null!==ha){oa=this.adapter.getChildNodes(ha,xa);for(ha=0;ha<oa.length&&oa[ha]!==L;ha++);ha<oa.length&&Ya(oa[++ha])}}else if("+//"===oa){if(ha=this.adapter.getParentNode(L,"*"),null!==ha){oa=this.adapter.getChildNodes(ha,xa);for(ha=0;ha<oa.length&&oa[ha]!==L;ha++);if(ha<oa.length)for(ha++;ha<oa.length;ha++)Ya(oa[ha])}}else if("~/"===oa){if(ha=this.adapter.getParentNode(L,"*"),null!==ha){oa=this.adapter.getChildNodes(ha,
xa);for(ha=0;ha<oa.length&&oa[ha]!==L;ha++);0<ha&&Ya(oa[ha-1]);ha<oa.length-1&&Ya(oa[ha+1])}}else if("~//"===oa){if(ha=this.adapter.getParentNode(L,"*"),null!==ha)for(ha=this.adapter.getChildNodes(ha,xa),oa=0;oa<ha.length;oa++)ha[oa]!==L&&Ya(ha[oa])}else if("../"===oa)ha=this.adapter.getParentNode(L,xa),null!==ha&&Ya(ha);else if("..//"===oa)for(ha=L;;){ha=this.adapter.getParentNode(ha,xa);if(null===ha)break;Ya(ha)}else if("<//"===oa){for(var tc=L,Qb=!0;;){ha=this.adapter.getParentNode(L,"*");if(null===
ha)break;L=ha}L!==tc&&(Ya(L),this.adapter.getChildNodes(L,xa).forEach(function($c){return function la(md){md===tc&&(Qb=!1);Qb&&Ya(md);Qb&&G.adapter.getChildNodes(md,xa).forEach(function($a){return la($a)})}($c)}));qc=qc.reverse()}else if(">//"===oa){for(var wc=L,Zb=!1;;){ha=this.adapter.getParentNode(L,"*");if(null===ha)break;L=ha}this.adapter.getChildNodes(L,xa).forEach(function($c){return function la(md){Zb&&Ya(md);md===wc&&(Zb=!0);G.adapter.getChildNodes(md,xa).forEach(function($a){return la($a)})}($c)})}}else Ya(L);
return this.traceEnd(F,L,qc),qc}},{key:"execFilter",value:function(F,L){this.traceBegin(F,L);var G=F.childs()[0];G=this.execExpr(G,L);return G=t["default"].truthy(G),this.traceEnd(F,L,G),G}},{key:"execExpr",value:function(F,L){switch(F.type()){case "ConditionalBinary":return this.execExprConditionalBinary(F,L);case "ConditionalTernary":return this.execExprConditionalTernary(F,L);case "Logical":return this.execExprLogical(F,L);case "Bitwise":return this.execExprBitwise(F,L);case "Relational":return this.execExprRelational(F,
L);case "Arithmetical":return this.execExprArithmetical(F,L);case "Unary":return this.execExprUnary(F,L);case "FuncCall":return this.execExprFuncCall(F,L);case "Attribute":return this.execExprAttribute(F,L);case "Param":return this.execExprParam(F,L);case "LiteralString":return this.execExprLiteralString(F,L);case "LiteralRegExp":return this.execExprLiteralRegExp(F,L);case "LiteralNumber":return this.execExprLiteralNumber(F,L);case "LiteralValue":return this.execExprLiteralValue(F,L);case "Path":return this.execExprPath(F,
L)}}},{key:"execExprConditionalBinary",value:function(F,L){this.traceBegin(F,L);var G=this.execExpr(F.childs()[0],L);return t["default"].truthy(G)||(G=this.execExpr(F.childs()[1],L)),this.traceEnd(F,L,G),G}},{key:"execExprConditionalTernary",value:function(F,L){this.traceBegin(F,L);var G=this.execExpr(F.childs()[0],L);return G=t["default"].truthy(G)?this.execExpr(F.childs()[1],L):this.execExpr(F.childs()[2],L),this.traceEnd(F,L,G),G}},{key:"execExprLogical",value:function(F,L){this.traceBegin(F,L);
var G=!1;switch(F.get("op")){case "&&":(G=t["default"].truthy(this.execExpr(F.childs()[0],L)))&&(G=G&&t["default"].truthy(this.execExpr(F.childs()[1],L)));break;case "||":(G=t["default"].truthy(this.execExpr(F.childs()[0],L)))||(G=G||t["default"].truthy(this.execExpr(F.childs()[1],L)))}return this.traceEnd(F,L,G),G}},{key:"execExprBitwise",value:function(F,L){this.traceBegin(F,L);var G=t["default"].coerce(this.execExpr(F.childs()[0],L),"number"),oa=t["default"].coerce(this.execExpr(F.childs()[1],
L),"number");switch(F.get("op")){case "&":var ha=G&oa;break;case "|":ha=G|oa;break;case "<<":ha=G<<oa;break;case ">>":ha=G>>oa}return this.traceEnd(F,L,ha),ha}},{key:"execExprRelational",value:function(F,L){this.traceBegin(F,L);var G=this.execExpr(F.childs()[0],L),oa=this.execExpr(F.childs()[1],L);switch(F.get("op")){case "==":var ha=G===oa;break;case "!=":ha=G!==oa;break;case "<=":ha=t["default"].coerce(G,"number")<=t["default"].coerce(oa,"number");break;case ">=":ha=t["default"].coerce(G,"number")>=
t["default"].coerce(oa,"number");break;case "<":ha=t["default"].coerce(G,"number")<t["default"].coerce(oa,"number");break;case ">":ha=t["default"].coerce(G,"number")>t["default"].coerce(oa,"number");break;case "=~":ha=null!==t["default"].coerce(G,"string").match(t["default"].coerce(oa,"regexp"));break;case "!~":ha=null===t["default"].coerce(G,"string").match(t["default"].coerce(oa,"regexp"))}return this.traceEnd(F,L,ha),ha}},{key:"execExprArithmetical",value:function(F,L){this.traceBegin(F,L);var G=
this.execExpr(F.childs()[0],L),oa=this.execExpr(F.childs()[1],L);switch(F.get("op")){case "+":var ha="string"==typeof G?G+t["default"].coerce(oa,"string"):t["default"].coerce(G,"number")+t["default"].coerce(oa,"number");break;case "-":ha=t["default"].coerce(G,"number")+t["default"].coerce(oa,"number");break;case "*":ha=t["default"].coerce(G,"number")*t["default"].coerce(oa,"number");break;case "/":ha=t["default"].coerce(G,"number")/t["default"].coerce(oa,"number");break;case "%":ha=t["default"].coerce(G,
"number")%t["default"].coerce(oa,"number");break;case "**":ha=Math.pow(t["default"].coerce(G,"number"),t["default"].coerce(oa,"number"))}return this.traceEnd(F,L,ha),ha}},{key:"execExprUnary",value:function(F,L){this.traceBegin(F,L);var G=this.execExpr(F.childs()[0],L);switch(F.get("op")){case "!":var oa=!t["default"].coerce(G,"boolean");break;case "~":oa=~t["default"].coerce(G,"number")}return this.traceEnd(F,L,oa),oa}},{key:"execExprFuncCall",value:function(F,L){var G=this;this.traceBegin(F,L);
var oa=F.get("id"),ha=[this.adapter,L];F.childs().forEach(function(Ha){ha.push(G.execExpr(Ha,L))});oa=this.funcs.run(oa,ha);return this.traceEnd(F,L,oa),oa}},{key:"execExprAttribute",value:function(F,L){this.traceBegin(F,L);var G=F.get("id");G=this.adapter.getNodeAttrValue(L,G);return this.traceEnd(F,L,G),G}},{key:"execExprParam",value:function(F,L){this.traceBegin(F,L);var G=F.get("id");if(void 0===this.params[G])throw Error('invalid parameter "'+G+'"');G=this.params[G];return this.traceEnd(F,L,
G),G}},{key:"execExprLiteralString",value:function(F,L){this.traceBegin(F,L);var G=F.get("value");return this.traceEnd(F,L,G),G}},{key:"execExprLiteralRegExp",value:function(F,L){this.traceBegin(F,L);var G=F.get("value");return this.traceEnd(F,L,G),G}},{key:"execExprLiteralNumber",value:function(F,L){this.traceBegin(F,L);var G=F.get("value");return this.traceEnd(F,L,G),G}},{key:"execExprLiteralValue",value:function(F,L){this.traceBegin(F,L);var G=F.get("value");return this.traceEnd(F,L,G),G}},{key:"execExprPath",
value:function(F,L){this.traceBegin(F,L);var G=this.execPath(F,L);return this.traceEnd(F,L,G),G}}]),B}();c["default"]=l},{"./astq-query-trace.js":16,"./astq-util.js":18}],16:[function(l,b,c){function g(k){return(g="function"==typeof Symbol&&"symbol"==Jc(Symbol.iterator)?function(n){return Jc(n)}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":Jc(n)})(k)}function a(k,n){for(var p=0;p<n.length;p++){var q=n[p];q.enumerable=q.enumerable||!1;q.configurable=
!0;"value"in q&&(q.writable=!0);Object.defineProperty(k,q.key,q)}}function d(k,n,p){return n&&a(k.prototype,n),p&&a(k,p),k}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var f=function(k){return k&&k.__esModule?k:{"default":k}}(l("./astq-util.js"));l=function(){function k(){if(!(this instanceof k))throw new TypeError("Cannot call a class as a function");}return d(k,[{key:"prefixOf",value:function(n,p){for(var q=0;null!==(n=n.parent());)q++;var r=f["default"].pad("",4*q);q=0;
for(n=p;null!==(n=this.adapter.getParentNode(n,"*"));)q++;return{prefix1:r,prefix2:f["default"].pad("",4*q)}}},{key:"traceBegin",value:function(n,p){if(this.trace){var q=this.prefixOf(n,p),r=q.prefix2;console.log("ASTQ: execute: | "+f["default"].pad(q.prefix1+n.type()+" (",-60)+" | "+r+this.adapter.getNodeType(p))}}},{key:"traceEnd",value:function(n,p,q){var r=this;if(this.trace){var t,w=this.prefixOf(n,p);n=w.prefix1;w=w.prefix2;void 0===q?t="undefined":"object"===g(q)&&q instanceof Array?(t="[",
q.forEach(function(x){t+="node("+r.adapter.getNodeType(x)+"),"}),t=t.replace(/,$/,"")+"]"):t=g(q)+"("+q+")";60<t.length&&(t=t.substr(0,60)+"...");console.log("ASTQ: execute: | "+f["default"].pad(n+"): "+t,-60)+" | "+w+this.adapter.getNodeType(p))}}}]),k}();c["default"]=l},{"./astq-util.js":18}],17:[function(l,b,c){function g(q){return q&&q.__esModule?q:{"default":q}}function a(q,r){for(var t=0;t<r.length;t++){var w=r[t];w.enumerable=w.enumerable||!1;w.configurable=!0;"value"in w&&(w.writable=!0);
Object.defineProperty(q,w.key,w)}}function d(q,r,t){return r&&a(q.prototype,r),t&&a(q,t),q}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;var f=g(l("asty")),k=g(l("pegjs-util")),n=g(l("./astq-query-exec.js")),p=function(){function q(r,t,w,x){this.message=r;this.expected=t;this.found=w;this.location=x;this.name="SyntaxError";"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,q)}return function(r,t){function w(){this.constructor=r}w.prototype=t.prototype;
r.prototype=new w}(q,Error),q.buildMessage=function(r,t){function w(F){return F.charCodeAt(0).toString(16).toUpperCase()}function x(F){return F.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(L){return"\\x0"+w(L)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(L){return"\\x"+w(L)})}function B(F){return F.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,
"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(L){return"\\x0"+w(L)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(L){return"\\x"+w(L)})}var D={literal:function(F){return'"'+x(F.text)+'"'},"class":function(F){var L,G="";for(L=0;L<F.parts.length;L++)G+=F.parts[L]instanceof Array?B(F.parts[L][0])+"-"+B(F.parts[L][1]):B(F.parts[L]);return"["+(F.inverted?"^":"")+G+"]"},any:function(F){return"any character"},end:function(F){return"end of input"},other:function(F){return F.description}};
return"Expected "+function(F){var L,G,oa=Array(F.length);for(L=0;L<F.length;L++)oa[L]=(G=F[L],D[G.type](G));if(oa.sort(),0<oa.length){for(F=L=1;L<oa.length;L++)oa[L-1]!==oa[L]&&(oa[F]=oa[L],F++);oa.length=F}switch(oa.length){case 1:return oa[0];case 2:return oa[0]+" or "+oa[1];default:return oa.slice(0,-1).join(", ")+", or "+oa[oa.length-1]}}(r)+" but "+(t?'"'+x(t)+'"':"end of input")+" found."},{SyntaxError:q,parse:function(r,t){function w(){return L(dh,Fb)}function x(Zc,Ad){return{type:"literal",
text:Zc,ignoreCase:Ad}}function B(Zc,Ad,ye){return{type:"class",parts:Zc,inverted:Ad,ignoreCase:ye}}function D(Zc){return{type:"other",description:Zc}}function F(Zc){var Ad,ye=sA[Zc];if(ye)return ye;for(Ad=Zc-1;!sA[Ad];)Ad--;for(ye={line:(ye=sA[Ad]).line,column:ye.column};Ad<Zc;)10===r.charCodeAt(Ad)?(ye.line++,ye.column=1):ye.column++,Ad++;return sA[Zc]=ye,ye}function L(Zc,Ad){var ye=F(Zc),oe=F(Ad);return{start:{offset:Zc,line:ye.line,column:ye.column},end:{offset:Ad,line:oe.line,column:oe.column}}}
function G(Zc){Fb<to||(Fb>to&&(to=Fb,rG=[]),rG.push(Zc))}function oa(){var Zc,Ad,ye=38*Fb,oe=ug[ye];return oe?(Fb=oe.nextPos,oe.result):(Zc=Fb,ea()!==S&&(Ad=function(){var Ue,Pf,Le,Tf,Nf,jh,zh,Eh=38*Fb+1;if(Le=ug[Eh])return Fb=Le.nextPos,Le.result;if(Ue=Fb,(Pf=ha())!==S){Le=[];var mj=Fb;for((Tf=ea())!==S?(44===r.charCodeAt(Fb)?(Nf=Ae,Fb++):(Nf=S,0===Ee&&G(ee)),Nf!==S&&(jh=ea())!==S&&(zh=ha())!==S?mj=Tf=[Tf,Nf,jh,zh]:(Fb=mj,mj=S)):(Fb=mj,mj=S);mj!==S;)Le.push(mj),mj=Fb,(Tf=ea())!==S?(44===r.charCodeAt(Fb)?
(Nf=Ae,Fb++):(Nf=S,0===Ee&&G(ee)),Nf!==S&&(jh=ea())!==S&&(zh=ha())!==S?mj=Tf=[Tf,Nf,jh,zh]:(Fb=mj,mj=S)):(Fb=mj,mj=S);Le!==S?(dh=Ue,Tf=Pf,Ue=Pf=Ji("Query").add(sG(Tf,Le,3))):(Fb=Ue,Ue=S)}else Fb=Ue,Ue=S;return ug[Eh]={nextPos:Fb,result:Ue},Ue}())!==S&&ea()!==S&&function(){var Ue,Pf,Le=38*Fb+37,Tf=ug[Le];return Tf?(Fb=Tf.nextPos,Tf.result):(Ee++,Ue=Fb,Ee++,r.length>Fb?(Pf=r.charAt(Fb),Fb++):(Pf=S,0===Ee&&G(tG)),Ee--,Pf===S?Ue=void 0:(Fb=Ue,Ue=S),Ee--,Ue===S&&0===Ee&&G(Z0),ug[Le]={nextPos:Fb,result:Ue},
Ue)}()!==S?(dh=Zc,Zc=Ad):(Fb=Zc,Zc=S),ug[ye]={nextPos:Fb,result:Zc},Zc)}function ha(){var Zc,Ad,ye,oe,Ue,Pf=38*Fb+2;if(Zc=ug[Pf])return Fb=Zc.nextPos,Zc.result;Zc=Fb;var Le,Tf,Nf;var jh=38*Fb+3;var zh=ug[jh];if((jh=zh?(Fb=zh.nextPos,zh.result):(Ad=Fb,(ye=Va())===S&&(ye=null),ye!==S&&ea()!==S&&(Le=hc())!==S&&ea()!==S?(33===r.charCodeAt(Fb)?(Tf=Fe,Fb++):(Tf=S,0===Ee&&G(Mf)),Tf===S&&(Tf=null),Tf!==S&&ea()!==S?((Nf=qc())===S&&(Nf=null),Nf!==S?(dh=Ad,ye=Tg(ye,Le,Tf,Nf),Ad=ye):(Fb=Ad,Ad=S)):(Fb=Ad,Ad=S)):
(Fb=Ad,Ad=S),ug[jh]={nextPos:Fb,result:Ad},Ad))!==S){Ad=[];ye=Fb;for((oe=ea())!==S&&(Ue=Ha())!==S?ye=oe=[oe,Ue]:(Fb=ye,ye=S);ye!==S;)Ad.push(ye),ye=Fb,(oe=ea())!==S&&(Ue=Ha())!==S?ye=oe=[oe,Ue]:(Fb=ye,ye=S);Ad!==S?(dh=Zc,Zc=Ji("Path").add(sG(jh,Ad,1))):(Fb=Zc,Zc=S)}else Fb=Zc,Zc=S;return ug[Pf]={nextPos:Fb,result:Zc},Zc}function Ha(){var Zc,Ad,ye,oe,Ue,Pf=38*Fb+4,Le=ug[Pf];return Le?(Fb=Le.nextPos,Le.result):(Zc=Fb,(Ad=Va())!==S&&ea()!==S&&(ye=hc())!==S&&ea()!==S?(33===r.charCodeAt(Fb)?(oe=Fe,Fb++):
(oe=S,0===Ee&&G(Mf)),oe===S&&(oe=null),oe!==S&&ea()!==S?((Ue=qc())===S&&(Ue=null),Ue!==S?(dh=Zc,Zc=Tg(Ad,ye,oe,Ue)):(Fb=Zc,Zc=S)):(Fb=Zc,Zc=S)):(Fb=Zc,Zc=S),ug[Pf]={nextPos:Fb,result:Zc},Zc)}function Va(){var Zc,Ad,ye=38*Fb+5;if(Zc=ug[ye])ye=(Fb=Zc.nextPos,Zc.result);else{Ee++;var oe=Zc=Fb;r.substr(Fb,2)===Yg?(Ad=Yg,Fb+=2):(Ad=S,0===Ee&&G(Rh));Ad===S&&(47===r.charCodeAt(Fb)?(Ad=Ei,Fb++):(Ad=S,0===Ee&&G(Xj)),Ad===S&&(r.substr(Fb,3)===Aj?(Ad=Aj,Fb+=3):(Ad=S,0===Ee&&G(yi)),Ad===S&&(r.substr(Fb,2)===
dj?(Ad=dj,Fb+=2):(Ad=S,0===Ee&&G(I)),Ad===S&&(r.substr(Fb,3)===Na?(Ad=Na,Fb+=3):(Ad=S,0===Ee&&G(z)),Ad===S&&(r.substr(Fb,2)===X?(Ad=X,Fb+=2):(Ad=S,0===Ee&&G(rb)),Ad===S&&(r.substr(Fb,3)===Wc?(Ad=Wc,Fb+=3):(Ad=S,0===Ee&&G(Sd)),Ad===S&&(r.substr(Fb,2)===hf?(Ad=hf,Fb+=2):(Ad=S,0===Ee&&G(vf)),Ad===S&&(r.substr(Fb,4)===Xf?(Ad=Xf,Fb+=4):(Ad=S,0===Ee&&G(uh)),Ad===S&&(r.substr(Fb,3)===Yh?(Ad=Yh,Fb+=3):(Ad=S,0===Ee&&G(Mi)),Ad===S&&(r.substr(Fb,3)===Gl?(Ad=Gl,Fb+=3):(Ad=S,0===Ee&&G(an)),Ad===S&&(r.substr(Fb,
2)===Qo?(Ad=Qo,Fb+=2):(Ad=S,0===Ee&&G(ax)),Ad===S&&(r.substr(Fb,3)===tn?(Ad=tn,Fb+=3):(Ad=S,0===Ee&&G(Vk)),Ad===S&&(r.substr(Fb,3)===kq?(Ad=kq,Fb+=3):(Ad=S,0===Ee&&G(ed)))))))))))))));if((oe=Ad!==S?r.substring(oe,Fb):Ad)!==S){var Ue,Pf,Le;Ad=38*Fb+6;var Tf=ug[Ad];(Ad=Tf?(Fb=Tf.nextPos,Tf.result):(Ue=Fb,58===r.charCodeAt(Fb)?(Pf=Jb,Fb++):(Pf=S,0===Ee&&G(gc)),Pf!==S&&(Le=dd())!==S?(dh=Ue,Pf=Le.get("id"),Ue=Pf):(Fb=Ue,Ue=S),Ue===S&&(Ue=Fb,58===r.charCodeAt(Fb)?(Pf=Jb,Fb++):(Pf=S,0===Ee&&G(gc)),Pf!==
S&&(Le=Kd())!==S?(dh=Ue,Pf=Le.get("value"),Ue=Pf):(Fb=Ue,Ue=S)),ug[Ad]={nextPos:Fb,result:Ue},Ue))===S&&(Ad=null);Ad!==S?(dh=Zc,Ue=oe,Pf=Ad,Zc=Ji("Axis").set({op:Ue,type:null!==Pf?Pf:"*"})):(Fb=Zc,Zc=S)}else Fb=Zc,Zc=S;ye=(Ee--,Zc===S&&0===Ee&&G(pg),ug[ye]={nextPos:Fb,result:Zc},Zc)}return ye}function hc(){var Zc,Ad,ye=38*Fb+7;(Zc=ug[ye])?ye=(Fb=Zc.nextPos,Zc.result):(Zc=Fb,(Ad=dd())!==S&&(dh=Zc,Zc=Ad,Ad=Ji("Match").merge(Zc)),(Zc=Ad)===S&&(Zc=Fb,(Ad=Kd())!==S&&(dh=Zc,Ad=Ji("Match").set({id:Ad.get("value")})),
(Zc=Ad)===S&&(Zc=Fb,42===r.charCodeAt(Fb)?(Ad=Kc,Fb++):(Ad=S,0===Ee&&G(Wd)),Ad!==S&&(dh=Zc,Ad=Ji("Match").set({id:"*"})),Zc=Ad)),ye=(ug[ye]={nextPos:Fb,result:Zc},Zc));return ye}function qc(){var Zc,Ad,ye,oe,Ue=38*Fb+8;(Zc=ug[Ue])?Ue=(Fb=Zc.nextPos,Zc.result):(Zc=Fb,91===r.charCodeAt(Fb)?(Ad=Ye,Fb++):(Ad=S,0===Ee&&G(Zf)),Ad!==S&&ea()!==S&&(ye=jc())!==S&&ea()!==S?(93===r.charCodeAt(Fb)?(oe=Yi,Fb++):(oe=S,0===Ee&&G(Wk)),oe!==S?(dh=Zc,Ad=ye,Zc=Ji("Filter").add(Ad)):(Fb=Zc,Zc=S)):(Fb=Zc,Zc=S),Ue=(ug[Ue]=
{nextPos:Fb,result:Zc},Zc));return Ue}function jc(){var Zc,Ad,ye,oe,Ue,Pf,Le=38*Fb+9;(Zc=ug[Le])?Le=(Fb=Zc.nextPos,Zc.result):(Zc=Fb,(Ad=Ya())!==S&&ea()!==S?(r.substr(Fb,2)===Xk?(ye=Xk,Fb+=2):(ye=S,0===Ee&&G(Eu)),ye!==S&&ea()!==S&&(oe=jc())!==S?(dh=Zc,Zc=Ad,Ad=oe,Zc=Ji("ConditionalBinary").add(Zc,Ad)):(Fb=Zc,Zc=S)):(Fb=Zc,Zc=S),Zc===S&&(Zc=Fb,(Ad=Ya())!==S&&ea()!==S?(63===r.charCodeAt(Fb)?(ye=is,Fb++):(ye=S,0===Ee&&G(yk)),ye!==S&&ea()!==S&&(oe=jc())!==S&&ea()!==S?(58===r.charCodeAt(Fb)?(Ue=Jb,Fb++):
(Ue=S,0===Ee&&G(gc)),Ue!==S&&ea()!==S&&(Pf=jc())!==S?(dh=Zc,ye=Ad,Zc=Ji("ConditionalTernary").add(ye,oe,Pf)):(Fb=Zc,Zc=S)):(Fb=Zc,Zc=S)):(Fb=Zc,Zc=S),Zc===S&&(Zc=Ya())),Le=(ug[Le]={nextPos:Fb,result:Zc},Zc));return Le}function Ya(){var Zc,Ad,ye,oe,Ue,Pf=38*Fb+10,Le=ug[Pf];return Le?(Fb=Le.nextPos,Le.result):(Zc=Fb,(Ad=xa())!==S&&ea()!==S?(ye=Fb,r.substr(Fb,2)===mp?(oe=mp,Fb+=2):(oe=S,0===Ee&&G(un)),(ye=oe!==S?r.substring(ye,Fb):oe)!==S&&ea()!==S&&(Ue=Ya())!==S?(dh=Zc,Zc=lq(Ad,ye,Ue)):(Fb=Zc,Zc=S)):
(Fb=Zc,Zc=S),Zc===S&&(Zc=xa()),ug[Pf]={nextPos:Fb,result:Zc},Zc)}function xa(){var Zc,Ad,ye,oe,Ue,Pf=38*Fb+11,Le=ug[Pf];return Le?(Fb=Le.nextPos,Le.result):(Zc=Fb,(Ad=tc())!==S&&ea()!==S?(ye=Fb,r.substr(Fb,2)===Fu?(oe=Fu,Fb+=2):(oe=S,0===Ee&&G(mq)),(ye=oe!==S?r.substring(ye,Fb):oe)!==S&&ea()!==S&&(Ue=xa())!==S?(dh=Zc,Zc=lq(Ad,ye,Ue)):(Fb=Zc,Zc=S)):(Fb=Zc,Zc=S),Zc===S&&(Zc=tc()),ug[Pf]={nextPos:Fb,result:Zc},Zc)}function tc(){var Zc,Ad,ye,oe,Ue,Pf=38*Fb+12,Le=ug[Pf];return Le?(Fb=Le.nextPos,Le.result):
(Zc=Fb,(Ad=Qb())!==S&&ea()!==S?(ye=Fb,124===r.charCodeAt(Fb)?(oe=js,Fb++):(oe=S,0===Ee&&G(Gu)),(ye=oe!==S?r.substring(ye,Fb):oe)!==S&&ea()!==S&&(Ue=tc())!==S?(dh=Zc,Zc=nq(Ad,ye,Ue)):(Fb=Zc,Zc=S)):(Fb=Zc,Zc=S),Zc===S&&(Zc=Qb()),ug[Pf]={nextPos:Fb,result:Zc},Zc)}function Qb(){var Zc,Ad,ye,oe,Ue,Pf=38*Fb+13,Le=ug[Pf];return Le?(Fb=Le.nextPos,Le.result):(Zc=Fb,(Ad=wc())!==S&&ea()!==S?(ye=Fb,94===r.charCodeAt(Fb)?(oe=tA,Fb++):(oe=S,0===Ee&&G(uG)),(ye=oe!==S?r.substring(ye,Fb):oe)!==S&&ea()!==S&&(Ue=Qb())!==
S?(dh=Zc,Zc=nq(Ad,ye,Ue)):(Fb=Zc,Zc=S)):(Fb=Zc,Zc=S),Zc===S&&(Zc=wc()),ug[Pf]={nextPos:Fb,result:Zc},Zc)}function wc(){var Zc,Ad,ye,oe,Ue,Pf=38*Fb+14,Le=ug[Pf];return Le?(Fb=Le.nextPos,Le.result):(Zc=Fb,(Ad=Zb())!==S&&ea()!==S?(ye=Fb,38===r.charCodeAt(Fb)?(oe=uA,Fb++):(oe=S,0===Ee&&G(vA)),(ye=oe!==S?r.substring(ye,Fb):oe)!==S&&ea()!==S&&(Ue=wc())!==S?(dh=Zc,Zc=nq(Ad,ye,Ue)):(Fb=Zc,Zc=S)):(Fb=Zc,Zc=S),Zc===S&&(Zc=Zb()),ug[Pf]={nextPos:Fb,result:Zc},Zc)}function Zb(){var Zc,Ad,ye,oe=38*Fb+15;if(Zc=
ug[oe])oe=(Fb=Zc.nextPos,Zc.result);else{var Ue=Fb;if((Zc=$c())!==S&&ea()!==S){var Pf=Fb;r.substr(Fb,2)===wA?(Ad=wA,Fb+=2):(Ad=S,0===Ee&&G(vG));Ad===S&&(r.substr(Fb,2)===bb?(Ad=bb,Fb+=2):(Ad=S,0===Ee&&G(dc)),Ad===S&&(r.substr(Fb,2)===Tb?(Ad=Tb,Fb+=2):(Ad=S,0===Ee&&G(rc)),Ad===S&&(r.substr(Fb,2)===Ic?(Ad=Ic,Fb+=2):(Ad=S,0===Ee&&G(yd)),Ad===S&&(60===r.charCodeAt(Fb)?(Ad=uc,Fb++):(Ad=S,0===Ee&&G(td)),Ad===S&&(62===r.charCodeAt(Fb)?(Ad=hd,Fb++):(Ad=S,0===Ee&&G(je)),Ad===S&&(r.substr(Fb,2)===od?(Ad=od,
Fb+=2):(Ad=S,0===Ee&&G(Se)),Ad===S&&(r.substr(Fb,2)===qf?(Ad=qf,Fb+=2):(Ad=S,0===Ee&&G(lg)))))))));(Pf=Ad!==S?r.substring(Pf,Fb):Ad)!==S&&ea()!==S&&(ye=Zb())!==S?(dh=Ue,Ue=Pf,Ue=Ji("Relational").set({op:Ue}).add(Zc,ye)):(Fb=Ue,Ue=S)}else Fb=Ue,Ue=S;oe=(Ue===S&&(Ue=$c()),ug[oe]={nextPos:Fb,result:Ue},Ue)}return oe}function $c(){var Zc,Ad,ye,oe,Ue,Pf=38*Fb+16,Le=ug[Pf];return Le?(Fb=Le.nextPos,Le.result):(Zc=Fb,(Ad=Oa())!==S&&ea()!==S?(ye=Fb,r.substr(Fb,2)===jg?(oe=jg,Fb+=2):(oe=S,0===Ee&&G(Df)),oe===
S&&(r.substr(Fb,2)===kg?(oe=kg,Fb+=2):(oe=S,0===Ee&&G(nl))),(ye=oe!==S?r.substring(ye,Fb):oe)!==S&&ea()!==S&&(Ue=$c())!==S?(dh=Zc,Zc=nq(Ad,ye,Ue)):(Fb=Zc,Zc=S)):(Fb=Zc,Zc=S),Zc===S&&(Zc=Oa()),ug[Pf]={nextPos:Fb,result:Zc},Zc)}function Oa(){var Zc,Ad,ye,oe,Ue,Pf=38*Fb+17,Le=ug[Pf];return Le?(Fb=Le.nextPos,Le.result):(Zc=Fb,(Ad=md())!==S&&ea()!==S?(ye=Fb,43===r.charCodeAt(Fb)?(oe=wG,Fb++):(oe=S,0===Ee&&G(xG)),oe===S&&(45===r.charCodeAt(Fb)?(oe=$0,Fb++):(oe=S,0===Ee&&G(a1))),(ye=oe!==S?r.substring(ye,
Fb):oe)!==S&&ea()!==S&&(Ue=Oa())!==S?(dh=Zc,Zc=dR(Ad,ye,Ue)):(Fb=Zc,Zc=S)):(Fb=Zc,Zc=S),Zc===S&&(Zc=md()),ug[Pf]={nextPos:Fb,result:Zc},Zc)}function md(){var Zc,Ad,ye,oe,Ue,Pf=38*Fb+18,Le=ug[Pf];return Le?(Fb=Le.nextPos,Le.result):(Zc=Fb,(Ad=la())!==S&&ea()!==S?(ye=Fb,r.substr(Fb,2)===eR?(oe=eR,Fb+=2):(oe=S,0===Ee&&G(b1)),oe===S&&(42===r.charCodeAt(Fb)?(oe=Kc,Fb++):(oe=S,0===Ee&&G(Wd)),oe===S&&(47===r.charCodeAt(Fb)?(oe=Ei,Fb++):(oe=S,0===Ee&&G(Xj)),oe===S&&(37===r.charCodeAt(Fb)?(oe=c1,Fb++):(oe=
S,0===Ee&&G(d1))))),(ye=oe!==S?r.substring(ye,Fb):oe)!==S&&ea()!==S&&(Ue=md())!==S?(dh=Zc,Zc=dR(Ad,ye,Ue)):(Fb=Zc,Zc=S)):(Fb=Zc,Zc=S),Zc===S&&(Zc=la()),ug[Pf]={nextPos:Fb,result:Zc},Zc)}function la(){var Zc,Ad,ye=38*Fb+19;if(Zc=ug[ye])ye=(Fb=Zc.nextPos,Zc.result);else{var oe=Zc=Fb;33===r.charCodeAt(Fb)?(Ad=Fe,Fb++):(Ad=S,0===Ee&&G(Mf));Ad===S&&(126===r.charCodeAt(Fb)?(Ad=e1,Fb++):(Ad=S,0===Ee&&G(f1)));(oe=Ad!==S?r.substring(oe,Fb):Ad)!==S&&(Ad=$a())!==S?(dh=Zc,Zc=oe,Zc=Ji("Unary").set({op:Zc}).add(Ad)):
(Fb=Zc,Zc=S);ye=(Zc===S&&(Zc=$a()),ug[ye]={nextPos:Fb,result:Zc},Zc)}return ye}function $a(){var Zc,Ad=38*Fb+20,ye=ug[Ad];return ye?(Fb=ye.nextPos,ye.result):((Zc=function(){var oe,Ue,Pf,Le=38*Fb+21;if(oe=ug[Le])Le=(Fb=oe.nextPos,oe.result);else{var Tf=Fb;if((oe=dd())!==S&&ea()!==S)if(40===r.charCodeAt(Fb)?(Ue=fR,Fb++):(Ue=S,0===Ee&&G(gR)),Ue!==S&&ea()!==S){var Nf,jh,zh,Eh,mj;Ue=38*Fb+22;if(Nf=ug[Ue])var Ci=(Fb=Nf.nextPos,Nf.result);else{if(Nf=Fb,(jh=jc())!==S){var uq=[];var nk=Fb;for((Ci=ea())!==
S?(44===r.charCodeAt(Fb)?(zh=Ae,Fb++):(zh=S,0===Ee&&G(ee)),zh!==S&&(Eh=ea())!==S&&(mj=jc())!==S?nk=Ci=[Ci,zh,Eh,mj]:(Fb=nk,nk=S)):(Fb=nk,nk=S);nk!==S;)uq.push(nk),nk=Fb,(Ci=ea())!==S?(44===r.charCodeAt(Fb)?(zh=Ae,Fb++):(zh=S,0===Ee&&G(ee)),zh!==S&&(Eh=ea())!==S&&(mj=jc())!==S?nk=Ci=[Ci,zh,Eh,mj]:(Fb=nk,nk=S)):(Fb=nk,nk=S);uq!==S?(dh=Nf,jh=sG(jh,uq,3),Nf=jh):(Fb=Nf,Nf=S)}else Fb=Nf,Nf=S;Ci=(ug[Ue]={nextPos:Fb,result:Nf},Nf)}Ci===S&&(Ci=null);Ci!==S&&ea()!==S?(41===r.charCodeAt(Fb)?(Pf=hR,Fb++):(Pf=
S,0===Ee&&G(iR)),Pf!==S?(dh=Tf,Pf=oe,Tf=Ci,Tf=oe=Ji("FuncCall").merge(Pf).add(Tf)):(Fb=Tf,Tf=S)):(Fb=Tf,Tf=S)}else Fb=Tf,Tf=S;else Fb=Tf,Tf=S;Le=(ug[Le]={nextPos:Fb,result:Tf},Tf)}return Le}())===S&&(Zc=function(){var oe,Ue,Pf,Le=38*Fb+23;(oe=ug[Le])?Le=(Fb=oe.nextPos,oe.result):(Ee++,oe=Fb,64===r.charCodeAt(Fb)?(Ue=jR,Fb++):(Ue=S,0===Ee&&G(kR)),Ue!==S&&(Pf=dd())!==S?(dh=oe,Ue=Pf,oe=Ue=Ji("Attribute").merge(Ue)):(Fb=oe,oe=S),oe===S&&(oe=Fb,64===r.charCodeAt(Fb)?(Ue=jR,Fb++):(Ue=S,0===Ee&&G(kR)),Ue!==
S&&(Pf=Kd())!==S?(dh=oe,oe=Ue=Ji("Attribute").set({id:Pf.get("value")})):(Fb=oe,oe=S)),Le=(Ee--,oe===S&&0===Ee&&G(g1),ug[Le]={nextPos:Fb,result:oe},oe));return Le}())===S&&(Zc=function(){var oe,Ue,Pf,Le,Tf=38*Fb+24;(oe=ug[Tf])?Tf=(Fb=oe.nextPos,oe.result):(Ee++,oe=Fb,123===r.charCodeAt(Fb)?(Ue=h1,Fb++):(Ue=S,0===Ee&&G(i1)),Ue!==S&&ea()!==S&&(Pf=dd())!==S&&ea()!==S?(125===r.charCodeAt(Fb)?(Le=j1,Fb++):(Le=S,0===Ee&&G(k1)),Le!==S?(dh=oe,Ue=Pf,oe=Ue=Ji("Param").merge(Ue)):(Fb=oe,oe=S)):(Fb=oe,oe=S),
Tf=(Ee--,oe===S&&0===Ee&&G(l1),ug[Tf]={nextPos:Fb,result:oe},oe));return Tf}())===S&&(Zc=function(){var oe,Ue=38*Fb+25,Pf=ug[Ue];return Pf?(Fb=Pf.nextPos,Pf.result):((oe=Kd())===S&&(oe=function(){var Le,Tf,Nf,jh=38*Fb+31;if(Le=ug[jh])return Fb=Le.nextPos,Le.result;if(Ee++,Le=Fb,96===r.charCodeAt(Fb)?(Tf=lR,Fb++):(Tf=S,0===Ee&&G(mR)),Tf!==S){Tf=Fb;var zh=[];r.substr(Fb,2)===xA?(Nf=xA,Fb+=2):(Nf=S,0===Ee&&G(nR));for(Nf===S&&(oR.test(r.charAt(Fb))?(Nf=r.charAt(Fb),Fb++):(Nf=S,0===Ee&&G(pR)));Nf!==S;)zh.push(Nf),
r.substr(Fb,2)===xA?(Nf=xA,Fb+=2):(Nf=S,0===Ee&&G(nR)),Nf===S&&(oR.test(r.charAt(Fb))?(Nf=r.charAt(Fb),Fb++):(Nf=S,0===Ee&&G(pR)));if((Tf=zh!==S?r.substring(Tf,Fb):zh)!==S)if(96===r.charCodeAt(Fb)?(zh=lR,Fb++):(zh=S,0===Ee&&G(mR)),zh!==S){dh=Le;try{var Eh=new RegExp(Tf.replace(/\\`/g,"`"))}catch(mj){throw Nf=mj.message,jh=void 0,jh=void 0!==jh?jh:L(dh,Fb),new q(Nf,null,null,jh);}Le=Tf=Ji("LiteralRegExp").set({value:Eh})}else Fb=Le,Le=S;else Fb=Le,Le=S}else Fb=Le,Le=S;return Ee--,Le===S&&0===Ee&&G(m1),
ug[jh]={nextPos:Fb,result:Le},Le}())===S&&(oe=function(){var Le,Tf,Nf,jh,zh,Eh,mj,Ci,uq,nk,kx,ts,qR=38*Fb+32;if(Le=ug[qR])return Fb=Le.nextPos,Le.result;if(Ee++,Le=Fb,Tf=Fb,Pu.test(r.charAt(Fb))?(Nf=r.charAt(Fb),Fb++):(Nf=S,0===Ee&&G(Qu)),Nf===S&&(Nf=null),(Tf=Nf!==S?r.substring(Tf,Fb):Nf)!==S)if(r.substr(Fb,2)===rR?(Nf=rR,Fb+=2):(Nf=S,0===Ee&&G(n1)),Nf!==S){if(jh=Fb,zh=[],sR.test(r.charAt(Fb))?(Eh=r.charAt(Fb),Fb++):(Eh=S,0===Ee&&G(tR)),Eh!==S)for(;Eh!==S;)zh.push(Eh),sR.test(r.charAt(Fb))?(Eh=r.charAt(Fb),
Fb++):(Eh=S,0===Ee&&G(tR));else zh=S;(jh=zh!==S?r.substring(jh,Fb):zh)!==S?(dh=Le,Le=jh,Le=Tf=Ji("LiteralNumber").set({value:parseInt(Tf+Le,2)})):(Fb=Le,Le=S)}else Fb=Le,Le=S;else Fb=Le,Le=S;if(Le===S){if(Le=Fb,Tf=Fb,Pu.test(r.charAt(Fb))?(Nf=r.charAt(Fb),Fb++):(Nf=S,0===Ee&&G(Qu)),Nf===S&&(Nf=null),(Tf=Nf!==S?r.substring(Tf,Fb):Nf)!==S)if(r.substr(Fb,2)===uR?(Nf=uR,Fb+=2):(Nf=S,0===Ee&&G(o1)),Nf!==S){if(jh=Fb,zh=[],vR.test(r.charAt(Fb))?(Eh=r.charAt(Fb),Fb++):(Eh=S,0===Ee&&G(wR)),Eh!==S)for(;Eh!==
S;)zh.push(Eh),vR.test(r.charAt(Fb))?(Eh=r.charAt(Fb),Fb++):(Eh=S,0===Ee&&G(wR));else zh=S;(jh=zh!==S?r.substring(jh,Fb):zh)!==S?(dh=Le,Le=jh,Le=Tf=Ji("LiteralNumber").set({value:parseInt(Tf+Le,8)})):(Fb=Le,Le=S)}else Fb=Le,Le=S;else Fb=Le,Le=S;if(Le===S){if(Le=Fb,Tf=Fb,Pu.test(r.charAt(Fb))?(Nf=r.charAt(Fb),Fb++):(Nf=S,0===Ee&&G(Qu)),Nf===S&&(Nf=null),(Tf=Nf!==S?r.substring(Tf,Fb):Nf)!==S)if(r.substr(Fb,2)===xR?(Nf=xR,Fb+=2):(Nf=S,0===Ee&&G(p1)),Nf!==S){if(jh=Fb,zh=[],vq.test(r.charAt(Fb))?(Eh=r.charAt(Fb),
Fb++):(Eh=S,0===Ee&&G(wq)),Eh!==S)for(;Eh!==S;)zh.push(Eh),vq.test(r.charAt(Fb))?(Eh=r.charAt(Fb),Fb++):(Eh=S,0===Ee&&G(wq));else zh=S;(jh=zh!==S?r.substring(jh,Fb):zh)!==S?(dh=Le,Nf=Tf,Tf=jh,Le=Tf=Ji("LiteralNumber").set({value:parseInt(Nf+Tf,16)})):(Fb=Le,Le=S)}else Fb=Le,Le=S;else Fb=Le,Le=S;if(Le===S){if(Le=Fb,Tf=Fb,Nf=Fb,Pu.test(r.charAt(Fb))?(jh=r.charAt(Fb),Fb++):(jh=S,0===Ee&&G(Qu)),jh===S&&(jh=null),jh!==S){zh=[];for(xq.test(r.charAt(Fb))?(Eh=r.charAt(Fb),Fb++):(Eh=S,0===Ee&&G(yq));Eh!==
S;)zh.push(Eh),xq.test(r.charAt(Fb))?(Eh=r.charAt(Fb),Fb++):(Eh=S,0===Ee&&G(yq));if(zh!==S)if(46===r.charCodeAt(Fb)?(Eh=q1,Fb++):(Eh=S,0===Ee&&G(r1)),Eh!==S){if(mj=[],xq.test(r.charAt(Fb))?(Ci=r.charAt(Fb),Fb++):(Ci=S,0===Ee&&G(yq)),Ci!==S)for(;Ci!==S;)mj.push(Ci),xq.test(r.charAt(Fb))?(Ci=r.charAt(Fb),Fb++):(Ci=S,0===Ee&&G(yq));else mj=S;if(mj!==S){if(Ci=Fb,s1.test(r.charAt(Fb))?(uq=r.charAt(Fb),Fb++):(uq=S,0===Ee&&G(t1)),uq!==S)if(Pu.test(r.charAt(Fb))?(nk=r.charAt(Fb),Fb++):(nk=S,0===Ee&&G(Qu)),
nk===S&&(nk=null),nk!==S){if(kx=[],xq.test(r.charAt(Fb))?(ts=r.charAt(Fb),Fb++):(ts=S,0===Ee&&G(yq)),ts!==S)for(;ts!==S;)kx.push(ts),xq.test(r.charAt(Fb))?(ts=r.charAt(Fb),Fb++):(ts=S,0===Ee&&G(yq));else kx=S;kx!==S?Ci=[uq,nk,kx]:(Fb=Ci,Ci=S)}else Fb=Ci,Ci=S;else Fb=Ci,Ci=S;Ci===S&&(Ci=null);Ci!==S?Nf=jh=[jh,zh,Eh,mj,Ci]:(Fb=Nf,Nf=S)}else Fb=Nf,Nf=S}else Fb=Nf,Nf=S;else Fb=Nf,Nf=S}else Fb=Nf,Nf=S;(Tf=Nf!==S?r.substring(Tf,Fb):Nf)!==S&&(dh=Le,Ci=Tf,Tf=Ji("LiteralNumber").set({value:parseFloat(Ci)}));
if((Le=Tf)===S){if(Le=Fb,Tf=Fb,Nf=Fb,Pu.test(r.charAt(Fb))?(jh=r.charAt(Fb),Fb++):(jh=S,0===Ee&&G(Qu)),jh===S&&(jh=null),jh!==S){if(zh=[],xq.test(r.charAt(Fb))?(Eh=r.charAt(Fb),Fb++):(Eh=S,0===Ee&&G(yq)),Eh!==S)for(;Eh!==S;)zh.push(Eh),xq.test(r.charAt(Fb))?(Eh=r.charAt(Fb),Fb++):(Eh=S,0===Ee&&G(yq));else zh=S;zh!==S?Nf=[jh,zh]:(Fb=Nf,Nf=S)}else Fb=Nf,Nf=S;(Tf=Nf!==S?r.substring(Tf,Fb):Nf)!==S&&(dh=Le,jh=Tf,Tf=Ji("LiteralNumber").set({value:parseInt(jh,10)}));Le=Tf}}}}return Ee--,Le===S&&0===Ee&&
G(u1),ug[qR]={nextPos:Fb,result:Le},Le}())===S&&(oe=V()),ug[Ue]={nextPos:Fb,result:oe},oe)}())===S&&(Zc=function(){var oe,Ue,Pf,Le,Tf=38*Fb+26,Nf=ug[Tf];return Nf?(Fb=Nf.nextPos,Nf.result):(oe=Fb,40===r.charCodeAt(Fb)?(Ue=fR,Fb++):(Ue=S,0===Ee&&G(gR)),Ue!==S&&ea()!==S&&(Pf=jc())!==S&&ea()!==S?(41===r.charCodeAt(Fb)?(Le=hR,Fb++):(Le=S,0===Ee&&G(iR)),Le!==S?(dh=oe,Ue=Pf,oe=Ue):(Fb=oe,oe=S)):(Fb=oe,oe=S),ug[Tf]={nextPos:Fb,result:oe},oe)}())===S&&(Zc=ha()),ug[Ad]={nextPos:Fb,result:Zc},Zc)}function dd(){var Zc,
Ad,ye,oe,Ue,Pf,Le=38*Fb+27;if(Zc=ug[Le])return Fb=Zc.nextPos,Zc.result;if(Ee++,Zc=Fb,Ad=Fb,ye=Fb,oe=Fb,Ee++,Ue=V(),Ee--,Ue===S?oe=void 0:(Fb=oe,oe=S),oe!==S)if(v1.test(r.charAt(Fb))?(Ue=r.charAt(Fb),Fb++):(Ue=S,0===Ee&&G(w1)),Ue!==S){var Tf=[];for(yR.test(r.charAt(Fb))?(Pf=r.charAt(Fb),Fb++):(Pf=S,0===Ee&&G(zR));Pf!==S;)Tf.push(Pf),yR.test(r.charAt(Fb))?(Pf=r.charAt(Fb),Fb++):(Pf=S,0===Ee&&G(zR));Tf!==S?ye=[oe,Ue,Tf]:(Fb=ye,ye=S)}else Fb=ye,ye=S;else Fb=ye,ye=S;(Ad=ye!==S?r.substring(Ad,Fb):ye)!==
S&&(dh=Zc,oe=Ad,Ad=Ji("Identifier").set({id:oe}));return Ee--,(Zc=Ad)===S&&0===Ee&&G(x1),ug[Le]={nextPos:Fb,result:Zc},Zc}function Kd(){var Zc,Ad,ye,oe=38*Fb+28;if(Zc=ug[oe])return Fb=Zc.nextPos,Zc.result;if(Ee++,Zc=Fb,34===r.charCodeAt(Fb)?(Ad=AR,Fb++):(Ad=S,0===Ee&&G(BR)),Ad!==S){var Ue=[];for((ye=ra())===S&&(CR.test(r.charAt(Fb))?(ye=r.charAt(Fb),Fb++):(ye=S,0===Ee&&G(DR)));ye!==S;)Ue.push(ye),(ye=ra())===S&&(CR.test(r.charAt(Fb))?(ye=r.charAt(Fb),Fb++):(ye=S,0===Ee&&G(DR)));Ue!==S?(34===r.charCodeAt(Fb)?
(ye=AR,Fb++):(ye=S,0===Ee&&G(BR)),ye!==S?(dh=Zc,Zc=Ad=ER(Ue)):(Fb=Zc,Zc=S)):(Fb=Zc,Zc=S)}else Fb=Zc,Zc=S;if(Zc===S)if(Zc=Fb,39===r.charCodeAt(Fb)?(Ad=FR,Fb++):(Ad=S,0===Ee&&G(GR)),Ad!==S){Ue=[];for((ye=Aa())===S&&(HR.test(r.charAt(Fb))?(ye=r.charAt(Fb),Fb++):(ye=S,0===Ee&&G(IR)));ye!==S;)Ue.push(ye),(ye=Aa())===S&&(HR.test(r.charAt(Fb))?(ye=r.charAt(Fb),Fb++):(ye=S,0===Ee&&G(IR)));Ue!==S?(39===r.charCodeAt(Fb)?(ye=FR,Fb++):(ye=S,0===Ee&&G(GR)),ye!==S?(dh=Zc,Zc=ER(Ue)):(Fb=Zc,Zc=S)):(Fb=Zc,Zc=S)}else Fb=
Zc,Zc=S;return Ee--,Zc===S&&0===Ee&&G(y1),ug[oe]={nextPos:Fb,result:Zc},Zc}function ra(){var Zc,Ad,ye,oe,Ue,Pf,Le,Tf,Nf=38*Fb+29,jh=ug[Nf];return jh?(Fb=jh.nextPos,jh.result):(Ee++,Zc=Fb,r.substr(Fb,2)===JR?(Ad=JR,Fb+=2):(Ad=S,0===Ee&&G(z1)),Ad!==S&&(dh=Zc,Ad="\\"),(Zc=Ad)===S&&(Zc=Fb,r.substr(Fb,2)===KR?(Ad=KR,Fb+=2):(Ad=S,0===Ee&&G(A1)),Ad!==S&&(dh=Zc,Ad='"'),(Zc=Ad)===S&&(Zc=Fb,r.substr(Fb,2)===LR?(Ad=LR,Fb+=2):(Ad=S,0===Ee&&G(B1)),Ad!==S&&(dh=Zc,Ad="\b"),(Zc=Ad)===S&&(Zc=Fb,r.substr(Fb,2)===MR?
(Ad=MR,Fb+=2):(Ad=S,0===Ee&&G(C1)),Ad!==S&&(dh=Zc,Ad="\x0B"),(Zc=Ad)===S&&(Zc=Fb,r.substr(Fb,2)===NR?(Ad=NR,Fb+=2):(Ad=S,0===Ee&&G(D1)),Ad!==S&&(dh=Zc,Ad="\f"),(Zc=Ad)===S&&(Zc=Fb,r.substr(Fb,2)===OR?(Ad=OR,Fb+=2):(Ad=S,0===Ee&&G(E1)),Ad!==S&&(dh=Zc,Ad="\t"),(Zc=Ad)===S&&(Zc=Fb,r.substr(Fb,2)===PR?(Ad=PR,Fb+=2):(Ad=S,0===Ee&&G(F1)),Ad!==S&&(dh=Zc,Ad="\r"),(Zc=Ad)===S&&(Zc=Fb,r.substr(Fb,2)===QR?(Ad=QR,Fb+=2):(Ad=S,0===Ee&&G(G1)),Ad!==S&&(dh=Zc,Ad="\n"),(Zc=Ad)===S&&(Zc=Fb,r.substr(Fb,2)===RR?(Ad=
RR,Fb+=2):(Ad=S,0===Ee&&G(H1)),Ad!==S&&(dh=Zc,Ad="\u001b"),(Zc=Ad)===S&&(Zc=Fb,r.substr(Fb,2)===SR?(Ad=SR,Fb+=2):(Ad=S,0===Ee&&G(I1)),Ad!==S?(ye=Fb,oe=Fb,vq.test(r.charAt(Fb))?(Ue=r.charAt(Fb),Fb++):(Ue=S,0===Ee&&G(wq)),Ue!==S?(vq.test(r.charAt(Fb))?(Pf=r.charAt(Fb),Fb++):(Pf=S,0===Ee&&G(wq)),Pf!==S?oe=[Ue,Pf]:(Fb=oe,oe=S)):(Fb=oe,oe=S),(ye=oe!==S?r.substring(ye,Fb):oe)!==S?(dh=Zc,Zc=String.fromCharCode(parseInt(ye,16))):(Fb=Zc,Zc=S)):(Fb=Zc,Zc=S),Zc===S&&(Zc=Fb,r.substr(Fb,2)===TR?(Ad=TR,Fb+=2):
(Ad=S,0===Ee&&G(J1)),Ad!==S?(ye=Fb,oe=Fb,vq.test(r.charAt(Fb))?(Ue=r.charAt(Fb),Fb++):(Ue=S,0===Ee&&G(wq)),Ue!==S?(vq.test(r.charAt(Fb))?(Pf=r.charAt(Fb),Fb++):(Pf=S,0===Ee&&G(wq)),Pf!==S?(vq.test(r.charAt(Fb))?(Le=r.charAt(Fb),Fb++):(Le=S,0===Ee&&G(wq)),Le!==S?(vq.test(r.charAt(Fb))?(Tf=r.charAt(Fb),Fb++):(Tf=S,0===Ee&&G(wq)),Tf!==S?oe=[Ue,Pf,Le,Tf]:(Fb=oe,oe=S)):(Fb=oe,oe=S)):(Fb=oe,oe=S)):(Fb=oe,oe=S),(ye=oe!==S?r.substring(ye,Fb):oe)!==S?(dh=Zc,Zc=String.fromCharCode(parseInt(ye,16))):(Fb=Zc,
Zc=S)):(Fb=Zc,Zc=S))))))))))),Ee--,Zc===S&&0===Ee&&G(K1),ug[Nf]={nextPos:Fb,result:Zc},Zc)}function Aa(){var Zc,Ad,ye=38*Fb+30,oe=ug[ye];return oe?(Fb=oe.nextPos,oe.result):(Ee++,Zc=Fb,r.substr(Fb,2)===UR?(Ad=UR,Fb+=2):(Ad=S,0===Ee&&G(L1)),Ad!==S&&(dh=Zc,Ad="'"),Ee--,(Zc=Ad)===S&&0===Ee&&G(M1),ug[ye]={nextPos:Fb,result:Zc},Zc)}function V(){var Zc,Ad,ye=38*Fb+33,oe=ug[ye];return oe?(Fb=oe.nextPos,oe.result):(Ee++,Zc=Fb,r.substr(Fb,4)===VR?(Ad=VR,Fb+=4):(Ad=S,0===Ee&&G(N1)),Ad!==S&&(dh=Zc,Ad=Ji("LiteralValue").set({value:!0})),
(Zc=Ad)===S&&(Zc=Fb,r.substr(Fb,5)===WR?(Ad=WR,Fb+=5):(Ad=S,0===Ee&&G(O1)),Ad!==S&&(dh=Zc,Ad=Ji("LiteralValue").set({value:!1})),(Zc=Ad)===S&&(Zc=Fb,r.substr(Fb,4)===YR?(Ad=YR,Fb+=4):(Ad=S,0===Ee&&G(P1)),Ad!==S&&(dh=Zc,Ad=Ji("LiteralValue").set({value:null})),(Zc=Ad)===S&&(Zc=Fb,r.substr(Fb,3)===ZR?(Ad=ZR,Fb+=3):(Ad=S,0===Ee&&G(Q1)),Ad!==S&&(dh=Zc,Ad=Ji("LiteralValue").set({value:NaN})),(Zc=Ad)===S&&(Zc=Fb,r.substr(Fb,9)===$R?(Ad=$R,Fb+=9):(Ad=S,0===Ee&&G(R1)),Ad!==S&&(dh=Zc,Ad=Ji("LiteralValue").set({value:void 0})),
Zc=Ad)))),Ee--,Zc===S&&0===Ee&&G(S1),ug[ye]={nextPos:Fb,result:Zc},Zc)}function ea(){var Zc,Ad,ye=38*Fb+34;if(Zc=ug[ye])return Fb=Zc.nextPos,Zc.result;Ee++;Zc=[];for((Ad=Mb())===S&&(Ad=U());Ad!==S;)Zc.push(Ad),(Ad=Mb())===S&&(Ad=U());return Ee--,Zc===S&&0===Ee&&G(T1),ug[ye]={nextPos:Fb,result:Zc},Zc}function Mb(){var Zc,Ad,ye,oe,Ue=38*Fb+35;if(Zc=ug[Ue])return Fb=Zc.nextPos,Zc.result;if(Ee++,Zc=Fb,r.substr(Fb,2)===aS?(Ad=aS,Fb+=2):(Ad=S,0===Ee&&G(U1)),Ad!==S){var Pf=[];var Le=ye=Fb;Ee++;r.substr(Fb,
2)===Ru?(oe=Ru,Fb+=2):(oe=S,0===Ee&&G(yG));Ee--;oe===S?Le=void 0:(Fb=Le,Le=S);for(Le!==S?(r.length>Fb?(oe=r.charAt(Fb),Fb++):(oe=S,0===Ee&&G(tG)),oe!==S?ye=[Le,oe]:(Fb=ye,ye=S)):(Fb=ye,ye=S);ye!==S;)Pf.push(ye),Le=ye=Fb,Ee++,r.substr(Fb,2)===Ru?(oe=Ru,Fb+=2):(oe=S,0===Ee&&G(yG)),Ee--,oe===S?Le=void 0:(Fb=Le,Le=S),Le!==S?(r.length>Fb?(oe=r.charAt(Fb),Fb++):(oe=S,0===Ee&&G(tG)),oe!==S?ye=[Le,oe]:(Fb=ye,ye=S)):(Fb=ye,ye=S);Pf!==S?(r.substr(Fb,2)===Ru?(ye=Ru,Fb+=2):(ye=S,0===Ee&&G(yG)),ye!==S?Zc=[Ad,
Pf,ye]:(Fb=Zc,Zc=S)):(Fb=Zc,Zc=S)}else Fb=Zc,Zc=S;return Ee--,Zc===S&&0===Ee&&G(V1),ug[Ue]={nextPos:Fb,result:Zc},Zc}function U(){var Zc,Ad,ye=38*Fb+36;if(Zc=ug[ye])return Fb=Zc.nextPos,Zc.result;if(Ee++,Zc=[],bS.test(r.charAt(Fb))?(Ad=r.charAt(Fb),Fb++):(Ad=S,0===Ee&&G(cS)),Ad!==S)for(;Ad!==S;)Zc.push(Ad),bS.test(r.charAt(Fb))?(Ad=r.charAt(Fb),Fb++):(Ad=S,0===Ee&&G(cS));else Zc=S;return Ee--,Zc===S&&0===Ee&&G(W1),ug[ye]={nextPos:Fb,result:Zc},Zc}t=void 0!==t?t:{};var Sa,S={},Sc={query:oa},xd=oa,
Ae=",",ee=x(",",!1),Fe="!",Mf=x("!",!1),Tg=function(Zc,Ad,ye,oe){return Ji("Step").add(Zc,Ad,oe).set(null!==ye?{isResult:!0}:{})},pg=D("axis"),Yg="//",Rh=x("//",!1),Ei="/",Xj=x("/",!1),Aj="-//",yi=x("-//",!1),dj="-/",I=x("-/",!1),Na="+//",z=x("+//",!1),X="+/",rb=x("+/",!1),Wc="~//",Sd=x("~//",!1),hf="~/",vf=x("~/",!1),Xf="..//",uh=x("..//",!1),Yh="../",Mi=x("../",!1),Gl=".//",an=x(".//",!1),Qo="./",ax=x("./",!1),tn="<//",Vk=x("<//",!1),kq=">//",ed=x(">//",!1),Jb=":",gc=x(":",!1),Kc="*",Wd=x("*",!1),
Ye="[",Zf=x("[",!1),Yi="]",Wk=x("]",!1),Xk="?:",Eu=x("?:",!1),is="?",yk=x("?",!1),mp="||",un=x("||",!1),lq=function(Zc,Ad,ye){return Ji("Logical").set({op:Ad}).add(Zc,ye)},Fu="&&",mq=x("&&",!1),js="|",Gu=x("|",!1),nq=function(Zc,Ad,ye){return Ji("Bitwise").set({op:Ad}).add(Zc,ye)},tA="^",uG=x("^",!1),uA="&",vA=x("&",!1),wA="==",vG=x("==",!1),bb="!=",dc=x("!=",!1),Tb="<=",rc=x("<=",!1),Ic=">=",yd=x(">=",!1),uc="<",td=x("<",!1),hd=">",je=x(">",!1),od="=~",Se=x("=~",!1),qf="!~",lg=x("!~",!1),jg="<<",
Df=x("<<",!1),kg=">>",nl=x(">>",!1),wG="+",xG=x("+",!1),$0="-",a1=x("-",!1),dR=function(Zc,Ad,ye){return Ji("Arithmetical").set({op:Ad}).add(Zc,ye)},eR="**",b1=x("**",!1),c1="%",d1=x("%",!1),e1="~",f1=x("~",!1),fR="(",gR=x("(",!1),hR=")",iR=x(")",!1),g1=D("node attribute"),jR="@",kR=x("@",!1),l1=D("query parameter reference"),h1="{",i1=x("{",!1),j1="}",k1=x("}",!1),x1=D("identifier"),v1=/^[a-zA-Z_]/,w1=B([["a","z"],["A","Z"],"_"],!1,!1),yR=/^[a-zA-Z0-9_\-]/,zR=B([["a","z"],["A","Z"],["0","9"],"_",
"-"],!1,!1),y1=D("quoted string literal"),AR='"',BR=x('"',!1),CR=/^[^"]/,DR=B(['"'],!0,!1),ER=function(Zc){return Ji("LiteralString").set({value:Zc.join("")})},FR="'",GR=x("'",!1),HR=/^[^']/,IR=B(["'"],!0,!1),K1=D("escaped double-quoted-string character"),JR="\\\\",z1=x("\\\\",!1),KR='\\"',A1=x('\\"',!1),LR="\\b",B1=x("\\b",!1),MR="\\v",C1=x("\\v",!1),NR="\\f",D1=x("\\f",!1),OR="\\t",E1=x("\\t",!1),PR="\\r",F1=x("\\r",!1),QR="\\n",G1=x("\\n",!1),RR="\\e",H1=x("\\e",!1),SR="\\x",I1=x("\\x",!1),vq=
/^[0-9a-fA-F]/,wq=B([["0","9"],["a","f"],["A","F"]],!1,!1),TR="\\u",J1=x("\\u",!1),M1=D("escaped single-quoted-string character"),UR="\\'",L1=x("\\'",!1),m1=D("regular expression literal"),lR="`",mR=x("`",!1),xA="\\`",nR=x("\\`",!1),oR=/^[^`]/,pR=B(["`"],!0,!1),u1=D("numeric literal"),Pu=/^[+\-]/,Qu=B(["+","-"],!1,!1),rR="0b",n1=x("0b",!1),sR=/^[01]/,tR=B(["0","1"],!1,!1),uR="0o",o1=x("0o",!1),vR=/^[0-7]/,wR=B([["0","7"]],!1,!1),xR="0x",p1=x("0x",!1),xq=/^[0-9]/,yq=B([["0","9"]],!1,!1),q1=".",r1=
x(".",!1),s1=/^[eE]/,t1=B(["e","E"],!1,!1),S1=D("global value"),VR="true",N1=x("true",!1),WR="false",O1=x("false",!1),YR="null",P1=x("null",!1),ZR="NaN",Q1=x("NaN",!1),$R="undefined",R1=x("undefined",!1),T1=D("optional blank"),V1=D("multi-line comment"),aS="/*",U1=x("/*",!1),Ru="*/",yG=x("*/",!1),tG={type:"any"},W1=D("any whitespaces"),bS=/^[ \t\r\n]/,cS=B([" ","\t","\r","\n"],!1,!1),Z0=D("end of file"),Fb=0,dh=0,sA=[{line:1,column:1}],to=0,rG=[],Ee=0,ug={};if("startRule"in t){if(!(t.startRule in
Sc))throw Error("Can't start parsing from rule \""+t.startRule+'".');xd=Sc[t.startRule]}var sG=t.util.makeUnroll(w,t),Ji=t.util.makeAST(w,t);if((Sa=xd())!==S&&Fb===r.length)return Sa;throw Sa!==S&&Fb<r.length&&G({type:"end"}),function(Zc,Ad,ye){return new q(q.buildMessage(Zc,Ad),Zc,Ad,ye)}(rG,to<r.length?r.charAt(to):null,to<r.length?L(to,to+1):L(to,to));}}}();l=function(){function q(r){if(!(this instanceof q))throw new TypeError("Cannot call a class as a function");this.asty=new f["default"];this.ast=
null;r&&this.compile(r)}return d(q,[{key:"compile",value:function(r,t){var w=this;t&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\nASTQ: compile: | "+r);r=k["default"].parse(p,r,{startRule:"query",makeAST:function(x,B,D,F){return w.asty.create.apply(w.asty,F).pos(x,B,D)}});if(null!==r.error)throw Error("ASTQ: compile: query parsing failed:\n"+k["default"].errorMessage(r.error,!0).replace(/^/gm,"ERROR: "));return this.ast=
r.ast,t&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\n"+this.dump().replace(/\n$/,"").replace(/^/gm,"ASTQ: compile: | ")),this}},{key:"dump",value:function(){return this.ast.dump()}},{key:"execute",value:function(r,t,w,x,B){return B&&console.log("ASTQ: execute: +-------------------------------------------------------------------------------------------------------"),(new n["default"](t,w,x,B)).execQuery(this.ast,
r)}}]),q}();c["default"]=l},{"./astq-query-exec.js":15,asty:1,"pegjs-util":3}],18:[function(l,b,c){function g(f){return(g="function"==typeof Symbol&&"symbol"==Jc(Symbol.iterator)?function(k){return Jc(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":Jc(k)})(f)}function a(f,k){for(var n=0;n<k.length;n++){var p=k[n];p.enumerable=p.enumerable||!1;p.configurable=!0;"value"in p&&(p.writable=!0);Object.defineProperty(f,p.key,p)}}function d(f,k,n){return k&&
a(f.prototype,k),n&&a(f,n),f}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=void 0;l=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");}return d(f,null,[{key:"pad",value:function(k,n){var p=0>n?-n:n;k.length>p?k=k.substr(0,p):(p=Array(p+1-k.length).join(" "),k=0>n?k+p:p+k);return k}},{key:"truthy",value:function(k){switch(g(k)){case "boolean":var n=k;break;case "number":n=0!==k&&!isNaN(k);break;case "string":n=""!==k;break;case "object":n=
!1;null!==k&&(n=!0,k instanceof Array&&(n=0<k.length));break;default:n=!1}return n}},{key:"coerce",value:function(k,n){if(g(k)!==n)try{switch(n){case "boolean":"boolean"!=typeof k&&(k=!!k);break;case "number":"number"!=typeof k&&(k=Number(k));break;case "string":"string"!=typeof k&&(k=String(k));break;case "regexp":"object"===g(k)&&k instanceof RegExp||(k=new RegExp(k))}}catch(p){throw Error("cannot coerce value into type "+n);}return k}}]),f}();c["default"]=l},{}],19:[function(l,b,c){Object.defineProperty(c,
"__esModule",{value:!0});c["default"]=void 0;c["default"]={major:2,minor:7,micro:5,date:20210107}},{}],20:[function(l,b,c){function g(Ha){return Ha&&Ha.__esModule?Ha:{"default":Ha}}function a(Ha){return(a="function"==typeof Symbol&&"symbol"==Jc(Symbol.iterator)?function(Va){return Jc(Va)}:function(Va){return Va&&"function"==typeof Symbol&&Va.constructor===Symbol&&Va!==Symbol.prototype?"symbol":Jc(Va)})(Ha)}function d(Ha,Va){if(!(Ha instanceof Va))throw new TypeError("Cannot call a class as a function");
}function f(Ha,Va){for(var hc=0;hc<Va.length;hc++){var qc=Va[hc];qc.enumerable=qc.enumerable||!1;qc.configurable=!0;"value"in qc&&(qc.writable=!0);Object.defineProperty(Ha,qc.key,qc)}}function k(Ha,Va,hc){return Va&&f(Ha.prototype,Va),hc&&f(Ha,hc),Ha}var n=g(l("cache-lru")),p=g(l("./astq-adapter.js")),q=g(l("./astq-adapter-xmldom.js")),r=g(l("./astq-adapter-parse5.js")),t=g(l("./astq-adapter-mozast.js")),w=g(l("./astq-adapter-graphql.js")),x=g(l("./astq-adapter-json.js")),B=g(l("./astq-adapter-cheerio.js")),
D=g(l("./astq-adapter-unist.js")),F=g(l("./astq-adapter-asty.js")),L=g(l("./astq-funcs.js")),G=g(l("./astq-funcs-std.js")),oa=g(l("./astq-query.js")),ha=g(l("./astq-version.js"));l=function(){function Ha(){for(var Va in d(this,Ha),this._adapter=(new p["default"]).register(q["default"],!1).register(r["default"],!1).register(t["default"],!1).register(w["default"],!1).register(x["default"],!1).register(B["default"],!1).register(D["default"],!1).register(F["default"],!1),this._funcs=new L["default"],
G["default"])this.func(Va,G["default"][Va]);this._cache=new n["default"]}return k(Ha,[{key:"version",value:function(){return ha["default"]}},{key:"adapter",value:function(Va){var hc=this,qc=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(1>arguments.length||2<arguments.length)throw Error("ASTQ#adapter: invalid number of arguments");if(this._adapter.unregister(),"object"===a(Va)&&Va instanceof Array||(Va=[Va]),1<Va.length&&qc)throw Error("ASTQ#adapter: you can force just a single adapter to not taste the AST node");
return Va.forEach(function(jc){if("string"==typeof jc)if("mozast"===jc)jc=t["default"];else if("graphql"===jc)jc=w["default"];else if("xmldom"===jc)jc=q["default"];else if("parse5"===jc)jc=r["default"];else if("json"===jc)jc=x["default"];else if("cheerio"===jc)jc=B["default"];else if("unist"===jc)jc=D["default"];else{if("asty"!==jc)throw Error("ASTQ#adapter: unknown built-in adapter");jc=F["default"]}hc._adapter.register(jc,qc)}),this}},{key:"func",value:function(Va,hc){if(2!==arguments.length)throw Error("ASTQ#func: invalid number of arguments");
return this._funcs.register(Va,hc),this}},{key:"cache",value:function(Va){if(1!==arguments.length)throw Error("ASTQ#cache: invalid number of arguments");return this._cache.limit(Va),this}},{key:"compile",value:function(Va,hc){if(1>arguments.length)throw Error("ASTQ#compile: too less arguments");if(2<arguments.length)throw Error("ASTQ#compile: too many arguments");void 0===hc&&(hc=!1);var qc=this._cache.get(Va);return void 0===qc&&((qc=new oa["default"]).compile(Va,hc),this._cache.set(Va,qc)),qc}},
{key:"execute",value:function(Va,hc,qc,jc){if(2>arguments.length)throw Error("ASTQ#execute: too less arguments");if(4<arguments.length)throw Error("ASTQ#execute: too many arguments");void 0===qc&&(qc={});void 0===jc&&(jc=!1);var Ya=this._adapter.select(Va);if(void 0===Ya)throw Error("ASTQ#execute: no suitable adapter found for node");return hc.execute(Va,Ya,qc,this._funcs,jc)}},{key:"query",value:function(Va,hc,qc,jc){if(2>arguments.length)throw Error("ASTQ#query: too less arguments");if(4<arguments.length)throw Error("ASTQ#query: too many arguments");
return void 0===qc&&(qc={}),void 0===jc&&(jc=!1),this.execute(Va,this.compile(hc,jc),qc,jc)}}]),Ha}();b.exports=l},{"./astq-adapter-asty.js":4,"./astq-adapter-cheerio.js":5,"./astq-adapter-graphql.js":6,"./astq-adapter-json.js":7,"./astq-adapter-mozast.js":8,"./astq-adapter-parse5.js":9,"./astq-adapter-unist.js":10,"./astq-adapter-xmldom.js":11,"./astq-adapter.js":12,"./astq-funcs-std.js":13,"./astq-funcs.js":14,"./astq-query.js":17,"./astq-version.js":19,"cache-lru":2}]},{},[4,5,6,7,8,9,10,11,12,
13,14,15,16,17,18,19,20])(20)}()})(Ak.astq_browserModule,Ak.astq_browser);var X1=Ou.exports;Ak.__moduleExports=Ou.exports;Ak.astq_browser=Ou.exports;Ak["default"]=Ou.exports;var Ti=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/visitors.js");Ti.blockInliner=function(e){if(Array.isArray(e.body))for(var h=e.body.length-1;0<=h;h--){var l=e.body[h];"BlockStatement"===l.type&&l[Ti.canBeInlinedSym]&&e.body.splice.apply(e.body,[h,1].concat(l.body))}return e};Ti.block=function(e){return{type:"BlockStatement",
body:e}};Ti.Visitor=em;Ti._ASTQ=X1;Ti.ASTQ=Ti._ASTQ||System._nodeRequire("astq");var lx=function(e){function h(){rd(this,h);return l.apply(this,arguments)}gd(h,e);var l=sb(h);Ac(h,[{key:"accept",value:function(b,c,g){this.doFunc(b,c,g);return Xb(nd(h.prototype),"accept",this).call(this,b,c,g)}}],[{key:"run",value:function(b,c,g){var a=new this;a.doFunc=c;a.accept(b,g,[]);return g}}]);return h}(Ti.Visitor);Ti.AllNodesVisitor=lx;var zG=function(e){function h(){rd(this,h);return l.apply(this,arguments)}
gd(h,e);var l=sb(h);Ac(h,[{key:"accept",value:function(b,c,g){switch(b.type){case "ArrowFunctionExpression":return b;case "FunctionExpression":return b;case "FunctionDeclaration":return c.unshift({node:b,path:g}),b;default:return Xb(nd(h.prototype),"accept",this).call(this,b,c,g)}}}],[{key:"run",value:function(b){var c=[];(new this).accept(b,c,[]);return c}}]);return h}(Ti.Visitor);Ti.FindToplevelFuncDeclVisitor=zG;Ti.canBeInlinedSym=Symbol("canBeInlined");var mx=function(e){function h(){rd(this,
h);return l.apply(this,arguments)}gd(h,e);var l=sb(h);Ac(h,[{key:"accept",value:function(b,c,g){b=this.replacer(Xb(nd(h.prototype),"accept",this).call(this,b,c,g));return Array.isArray(b)?1===b.length?b[0]:Object.assign(Ti.block(b),Pc({},Ti.canBeInlinedSym,!0)):b}},{key:"visitBlockStatement",value:function(b,c,g){return Ti.blockInliner(Xb(nd(h.prototype),"visitBlockStatement",this).call(this,b,c,g))}},{key:"visitProgram",value:function(b,c,g){return Ti.blockInliner(Xb(nd(h.prototype),"visitProgram",
this).call(this,b,c,g))}}],[{key:"run",value:function(b,c){var g=new this;g.replacer=c;return g.accept(b,null,[])}}]);return h}(Ti.Visitor);Ti.ReplaceManyVisitor=mx;var Su=function(e){function h(){rd(this,h);return l.apply(this,arguments)}gd(h,e);var l=sb(h);Ac(h,[{key:"accept",value:function(b,c,g){return this.replacer(Xb(nd(h.prototype),"accept",this).call(this,b,c,g),g)}}],[{key:"run",value:function(b,c){var g=new this;g.replacer=c;return g.accept(b,null,[])}}]);return h}(Ti.Visitor);Ti.ReplaceVisitor=
Su;Ti.astq=new Ti.ASTQ;Ti.astq.adapter("mozast");var dS=function(e){function h(){rd(this,h);return l.apply(this,arguments)}gd(h,e);var l=sb(h);Ac(h,null,[{key:"run",value:function(b,c,g){var a=Ti.astq.query(b,c);return Xb(nd(h),"run",this).call(this,b,function(d){return a.includes(d)?g(d):d})}}]);return h}(Ti.ReplaceManyVisitor);Ti.QueryReplaceManyVisitor=dS;Ti.AllNodesVisitor=lx;Ti.FindToplevelFuncDeclVisitor=zG;Ti.ReplaceVisitor=Su;Ti.ReplaceManyVisitor=mx;var Zh=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/parser.js");
Zh.addSource=kt;Zh.nodesAt=function(e,h){h="string"===typeof h?this.parse(h):h;return Zh.findNodesIncluding(h,e)};Zh.parseFunction=So;Zh.fuzzyParse=To;Zh.acornParseAsyncAware=function(e,h){var l="async () => {\n".concat(e,"\n}");if(h.onComment){var b=h.onComment;h.onComment=function(g,a,d,f,k,n){return b.call(this,g,a,d-14,f-14,k,n)}}l=Zh.acorn.parse(l,h);if(l.loc)var c=l.loc.constructor;l={body:l.body[0].expression.body.body,sourceType:"module",type:"Program"};Zh.AllNodesVisitor.run(l,function(g,
a,d){if(!g._positionFixed){g._positionFixed=!0;if(g.start||0===g.start)g.start-=14,g.end-=14;g.loc&&c&&(d=g.loc,a=d.start,d=d.end,g.loc=new c(h,{column:a.column,line:a.line-1},{column:d.column,line:d.line-1}));h.addSource&&!g.source&&(g.source=e.slice(g.start,g.end))}});l.start=l.body[0].start;l.end=Zh.arr.last(l.body).end;h.addSource&&(l.source=e);l.body[0].loc&&c&&(l.loc=new c(h,l.body[0].loc.start,Zh.arr.last(l.body).loc.end));return l};Zh.parse=Qj;Zh.arr=mh;Zh.acorn=jx;Zh.loose=qG;Zh.walk=tq;
Zh.addAstIndex=Lp;Zh.findNodesIncluding=jt;Zh.custom=Nu;Zh.AllNodesVisitor=lx;Zh.walk=tq;Zh.parse=Qj;Zh.parseFunction=So;Zh.fuzzyParse=To;Zh.addSource=kt;Zh.custom.addSource=Zh.addSource;var Jh=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitor-interface.js");Jh.string=ji;Jh.Path=Nh;Jh.BaseVisitor=em;Jh.PrinterVisitor=nG;Jh.ComparisonVisitor=oG;Jh.stringify=Ek;Jh.addAstIndex=Lp;Jh.parse=Qj;Jh.addSource=kt;Jh.methods={withMozillaAstDo:function(e,h,l){var b=new Jh.BaseVisitor,
c=b.accept;b.accept=function(g,a,d){h=l(function(){c.call(b,g,a,d)},g,a,d);return g};b.accept(e,h,[]);return h},printAst:function(e,h){h=h||{};var l=h.printSource||!1,b=h.printPositions||!1,c=h.printIndex||!1,g=[];if("string"===typeof e){var a=e;e=Jh.parse(e)}else a=h.source||e.source;l&&!e.source&&(a||(a=Jh.stringify(e),e=Jh.parse(a)),Jh.addSource(e,a));(new Jh.PrinterVisitor).accept(e,{index:0,tree:g},[]);return Jh.string.printTree(g[0],function(d){var f=d.path+":"+d.node.type,k=[];c&&k.push(d.index);
b&&k.push(d.node.start+"-"+d.node.end);l&&(d=d.node.source||a.slice(d.node.start,d.node.end),d=Jh.string.print(d.truncate(60).replace(/\n/g,"").replace(/\s+/g," ")),k.push(d));k.length&&(f+="("+k.join(",")+")");return f},function(d){return d.children},"  ")},compareAst:function(e,h){if(!e||!h)throw Error("node"+(e?"1":"2")+" not defined");var l={completePath:[],comparisons:{errors:[]}};(new Jh.ComparisonVisitor).accept(e,h,l,[]);return l.comparisons.errors.length?l.comparisons.errors.pluck("msg"):
null},pathToNode:function(e,h,l){e.astIndex||Jh.addAstIndex(e);l=new Jh.BaseVisitor;var b=null;(l.accept=function(c,g,a,d){if(!b)return g=g.concat(d),c.astIndex===h&&(b={pathString:g.map(function(f){return"string"===typeof f?"."+f:"["+f+"]"}).join(""),path:g,node:c}),this["visit"+c.type](c,g,a,d)}).call(l,e,[],{},[]);return b},rematchAstWithSource:function(e,h,l,b){l=!!l;h=Jh.parse(h,l?{locations:!0}:void 0);var c=new Jh.BaseVisitor;b&&(h=Jh.Path(b).get(h));c.accept=function(g,a,d){d=d||[];var f=
d.reduce(function(k,n){return k[n]},e);f.start=g.start;f.end=g.end;l&&(f.loc=g.loc);return this["visit"+g.type](g,a,d)};c.accept(h)}};Jh.withMozillaAstDo=Jh.methods.withMozillaAstDo;Jh.printAst=Jh.methods.printAst;Jh.compareAst=Jh.methods.compareAst;Jh.pathToNode=Jh.methods.pathToNode;Jh.rematchAstWithSource=Jh.methods.rematchAstWithSource;var ix=Jh.withMozillaAstDo,AG=Jh.printAst,BG=Jh.compareAst,CG=Jh.pathToNode,DG=Jh.rematchAstWithSource;Jh.BaseVisitor=em;Jh.withMozillaAstDo=ix;Jh.printAst=AG;
Jh.compareAst=BG;Jh.pathToNode=CG;Jh.rematchAstWithSource=DG;var wg=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/nodes.js");wg.isIdentifier=sv;wg.id=mr;wg.literal=nr;wg.exprStmt=Uo;wg.sqncExpr=or;wg.returnStmt=Mp;wg.empty=pr;wg.binaryExpr=lt;wg.funcExpr=qr;wg.funcCall=Un;wg.varDecl=Np;wg.member=rr;wg.memberChain=mt;wg.assign=Vo;wg.block=Vn;wg.program=nt;wg.tryStmt=sr;wg.prop=tv;wg.objectLiteral=uv;wg.ifStmt=ot;wg.forIn=pt;wg.conditional=qt;wg.logical=vv;wg.identifierRe=/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;
wg.isIdentifier=sv;wg.id=mr;wg.literal=nr;wg.objectLiteral=uv;wg.prop=tv;wg.exprStmt=Uo;wg.returnStmt=Mp;wg.empty=pr;wg.sqncExpr=or;wg.binaryExpr=lt;wg.funcExpr=qr;wg.funcCall=Un;wg.varDecl=Np;wg.member=rr;wg.memberChain=mt;wg.assign=Vo;wg.block=Vn;wg.program=nt;wg.tryStmt=sr;wg.ifStmt=ot;wg.forIn=pt;wg.conditional=qt;wg.logical=vv;var us=Object.freeze({__proto__:null,isIdentifier:sv,id:mr,literal:nr,objectLiteral:uv,prop:tv,exprStmt:Uo,returnStmt:Mp,empty:pr,sqncExpr:or,binaryExpr:lt,funcExpr:qr,
funcCall:Un,varDecl:Np,member:rr,memberChain:mt,assign:Vo,block:Vn,program:nt,tryStmt:sr,ifStmt:ot,forIn:pt,conditional:qt,logical:vv});Lc("ah",us);var wf=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/query.js");wf.scopes=rt;wf.nodesAtIndex=st;wf.scopesAtIndex=tt;wf.scopeAtIndex=wv;wf.scopesAtPos=tr;wf.nodesInScopeOf=ut;wf.declarationsOfScope=xv;wf.declarationsWithIdsOfScope=function(e){var h=wf.arr.compact(wf.helpers.declIds(e.params).concat(e.catches)),l=[].concat(hb(e.node.id&&e.node.id.name?
[e.node]:[]),hb(e.funcDecls.filter(function(b){return b.id})),hb(e.classDecls.filter(function(b){return b.id})));return h.map(function(b){return[b,b]}).concat(l.map(function(b){return[b,b.id]})).concat(wf.helpers.varDecls(e)).concat(e.importSpecifiers.map(function(b){return[wf.statementOf(e.node,b),b]}))};wf._declaredVarNames=yv;wf._findJsLintGlobalDeclarations=zv;wf.topLevelFuncDecls=ur;wf.resolveReference=Av;wf.resolveReferences=vt;wf.refWithDeclAt=Bv;wf.topLevelDeclsAndRefs=Yj;wf.findGlobalVarRefs=
wt;wf.findNodesIncludingLines=xt;wf.__varDeclIdsFor=function(e,h){var l=[],b=ba(e.params),c;try{for(b.s();!(c=b.n()).done;){var g=c.value;g.name===h&&l.push(g)}}catch(n){b.e(n)}finally{b.f()}b=ba(e.funcDecls);var a;try{for(b.s();!(a=b.n()).done;)g=a.value,g.id&&g.id.name===h&&l.push(g.id)}catch(n){b.e(n)}finally{b.f()}a=ba(e.classDecls);var d;try{for(a.s();!(d=a.n()).done;)g=d.value,g.id&&g.id.name===h&&l.push(g.id)}catch(n){a.e(n)}finally{a.f()}d=ba(e.importSpecifiers);var f;try{for(d.s();!(f=d.n()).done;)g=
f.value,g.name===h&&l.push(g)}catch(n){d.e(n)}finally{d.f()}e=ba(wf.helpers.varDeclIds(e));var k;try{for(e.s();!(k=e.n()).done;)g=k.value,g.name===h&&l.push(g)}catch(n){e.e(n)}finally{e.f()}return l};wf.findReferencesAndDeclsInScope=Op;wf.findDeclarationClosestToIndex=Cv;wf.nodesAt=Pp;wf.statementOf=ym;wf.imports=vr;wf.exports=wr;wf.arr=mh;wf.num=Yk;wf.tree=pq;wf.fun=wn;wf.BaseVisitor=em;wf.ScopeVisitor=pG;wf.FindToplevelFuncDeclVisitor=zG;wf.withMozillaAstDo=ix;wf.parse=Qj;wf.custom=Nu;wf.stringify=
Ek;wf.helpers={declIds:function(e){for(var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],l=0;l<e.length;l++){var b=e[l];if(b)if("Identifier"===b.type)h.push(b);else if("RestElement"===b.type)h.push(b.argument);else if("AssignmentPattern"===b.type)wf.helpers.declIds([b.left],h);else if("ObjectPattern"===b.type)for(var c=0;c<b.properties.length;c++){var g=b.properties[c];wf.helpers.declIds([g.value||g],h)}else"ArrayPattern"===b.type&&wf.helpers.declIds(b.elements,h)}return h},varDecls:function(e){var h=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],l=ba(e.varDecls),b;try{for(l.s();!(b=l.n()).done;){var c=ba(b.value.declarations),g;try{for(c.s();!(g=c.n()).done;){var a=g.value,d=ba(wf.helpers.declIds([a.id])),f;try{for(d.s();!(f=d.n()).done;)h.push([a,f.value])}catch(k){d.e(k)}finally{d.f()}}}catch(k){c.e(k)}finally{c.f()}}}catch(k){l.e(k)}finally{l.f()}return h},varDeclIds:function(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],l=ba(e.varDecls),b;try{for(l.s();!(b=
l.n()).done;){var c=ba(b.value.declarations),g;try{for(c.s();!(g=c.n()).done;)wf.helpers.declIds([g.value.id],h)}catch(a){c.e(a)}finally{c.f()}}}catch(a){l.e(a)}finally{l.f()}return h},objPropertiesAsList:function(e,h,l){var b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],c=ba(e.properties),g;try{for(c.s();!(g=c.n()).done;){var a=g.value,d=a.key.name,f={key:h.concat([d]),value:a.value};switch(a.value.type){case "ArrayExpression":case "ArrayPattern":l||b.push(f);for(var k=0;k<a.value.elements.length;k++)wf.helpers.objPropertiesAsList(a.value.elements[k],
h.concat([d,k]),l,b);break;case "ObjectExpression":case "ObjectPattern":l||b.push(f);wf.helpers.objPropertiesAsList(a.value,h.concat([d]),l,b);break;case "AssignmentPattern":l||b.push(f);wf.helpers.objPropertiesAsList(a.left,h.concat([d]),l,b);break;default:b.push(f)}}}catch(n){c.e(n)}finally{c.f()}return b},isDeclaration:function(e){return"FunctionDeclaration"===e.type||"VariableDeclaration"===e.type||"ClassDeclaration"===e.type}};wf.knownGlobals="closed true false null undefined arguments Object Function Array Number parseFloat parseInt Infinity NaN Boolean String Symbol Date Promise RegExp Error EvalError RangeError ReferenceError SyntaxError TypeError URIError JSON Math console ArrayBuffer Uint8Array Int8Array Uint16Array Int16Array Uint32Array Int32Array Float32Array Float64Array Uint8ClampedArray DataView Map Set WeakMap WeakSet Proxy Reflect decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape eval isFinite isNaN Intl navigator window document Blob setTimeout clearTimeout setInterval clearInterval requestAnimationFrame cancelAnimationFrame btoa atob sessionStorage localStorage $world lively System customElements performance addEventListener closed".split(" ");
wf.globalDeclRe=/^\s*global\s*/;wf._stmtTypes="EmptyStatement BlockStatement ExpressionStatement IfStatement BreakStatement ContinueStatement WithStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement ForOfStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration ImportDeclaration ImportDeclaration ExportNamedDeclaration ExportDefaultDeclaration ExportAllDeclaration".split(" ");var EG=wf.helpers,eS=wf.knownGlobals;
wf.helpers=EG;wf.knownGlobals=eS;wf.scopes=rt;wf.nodesAtIndex=st;wf.scopesAtIndex=tt;wf.scopeAtIndex=wv;wf.scopesAtPos=tr;wf.nodesInScopeOf=ut;wf.declarationsOfScope=xv;wf._declaredVarNames=yv;wf._findJsLintGlobalDeclarations=zv;wf.topLevelDeclsAndRefs=Yj;wf.topLevelFuncDecls=ur;wf.findGlobalVarRefs=wt;wf.findNodesIncludingLines=xt;wf.findReferencesAndDeclsInScope=Op;wf.findDeclarationClosestToIndex=Cv;wf.nodesAt=Pp;wf.statementOf=ym;wf.resolveReferences=vt;wf.refWithDeclAt=Bv;wf.imports=vr;wf.exports=
wr;var vs=Object.freeze({__proto__:null,helpers:EG,knownGlobals:eS,scopes:rt,nodesAtIndex:st,scopesAtIndex:tt,scopeAtIndex:wv,scopesAtPos:tr,nodesInScopeOf:ut,declarationsOfScope:xv,_declaredVarNames:yv,_findJsLintGlobalDeclarations:zv,topLevelDeclsAndRefs:Yj,topLevelFuncDecls:ur,findGlobalVarRefs:wt,findNodesIncludingLines:xt,findReferencesAndDeclsInScope:Op,findDeclarationClosestToIndex:Cv,nodesAt:Pp,statementOf:ym,resolveReferences:vt,refWithDeclAt:Bv,imports:vr,exports:wr});Lc("ag",vs);var cn=
window.lively.FreezerRuntime.recorderFor("lively.ast/lib/object-spread-transform.js");cn.objectSpreadTransform=bn;cn.Visitor=em;cn.funcCall=Un;cn.member=rr;var Y1=function(e){function h(){rd(this,h);return l.apply(this,arguments)}gd(h,e);var l=sb(h);Ac(h,[{key:"accept",value:function(b,c,g){"ObjectExpression"===b.type&&(b=this.transformSpreadElement(b));return Xb(nd(h.prototype),"accept",this).call(this,b,c,g)}},{key:"transformSpreadElement",value:function(b){var c=[],g=[c];b.properties.forEach(function(a){"SpreadElement"!==
a.type?(a.shorthand=!1,c.push(a)):(g.push(a),c=[],g.push(c))});if(1===g.length)return b;c.length||g.pop();return cn.funcCall.apply(cn,[cn.member("Object","assign")].concat(hb(g.map(function(a){return"SpreadElement"===a.type?a.argument:{properties:a,type:"ObjectExpression"}}))))}}]);return h}(cn.Visitor);cn.ObjectSpreadTransformer=Y1;cn["default"]=bn;var xf=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/transform.js");xf._node2string=function(e){return e.source||xf.stringify(e)};xf._findIndentAt=
function(e,h){var l=xf.string.peekLeft(e,h,/\s+$/);e="number"===typeof l?e.slice(l,h):"";"\n"===e[0]&&(e=e.slice(1));return e};xf._applyChanges=function(e,h){for(var l=0;l<e.length;l++){var b=e[l];if("del"===b.type)h=h.slice(0,b.pos)+h.slice(b.pos+b.length);else if("add"===b.type)h=h.slice(0,b.pos)+b.string+h.slice(b.pos);else throw Error("Unexpected change "+xf.obj.inspect(b));}return h};xf._compareNodesForReplacement=Dv;xf.replaceNode=Ev;xf.replaceNodes=yt;xf.replace=Gk;xf.__findVarDecls=zt;xf.oneDeclaratorPerVarDecl=
xr;xf.oneDeclaratorForVarsInDestructoring=At;xf.returnLastStatement=Fv;xf.wrapInFunction=Bt;xf.wrapInStartEndCall=Gv;xf.transformSingleExpression=Hv;xf.arr=mh;xf.obj=nh;xf.string=ji;xf.Path=Nh;xf.helpers=EG;xf.scopes=rt;xf.topLevelFuncDecls=ur;xf.parse=Qj;xf.fuzzyParse=To;xf.objectSpreadTransform=bn;xf.varDecl=Np;xf.memberChain=mt;xf.id=mr;xf.exprStmt=Uo;xf.funcCall=Un;xf.returnStmt=Mp;xf.tryStmt=sr;xf.program=nt;xf.block=Vn;xf.funcExpr=qr;xf.stringify=Ek;xf.isProbablySingleExpressionRe=/^\s*(\{|function\s*\()/;
xf.replaceNode=Ev;xf.replaceNodes=yt;xf.replace=Gk;xf._compareNodesForReplacement=Dv;xf.oneDeclaratorPerVarDecl=xr;xf.oneDeclaratorForVarsInDestructoring=At;xf.returnLastStatement=Fv;xf.wrapInFunction=Bt;xf.wrapInStartEndCall=Gv;xf.transformSingleExpression=Hv;xf.objectSpreadTransform=bn;var Tu=Object.freeze({__proto__:null,replaceNode:Ev,replaceNodes:yt,replace:Gk,_compareNodesForReplacement:Dv,oneDeclaratorPerVarDecl:xr,oneDeclaratorForVarsInDestructoring:At,returnLastStatement:Fv,wrapInFunction:Bt,
wrapInStartEndCall:Gv,transformSingleExpression:Hv,objectSpreadTransform:bn});Lc("aY",Tu);var Ng=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/comments.js");Ng.getCommentPrecedingNode=Iv;Ng.extractComments=Jv;Ng.obj=nh;Ng.string=ji;Ng.Path=Nh;Ng.chain=Tn;Ng.arr=mh;Ng.fun=wn;Ng.parse=Qj;Ng.statementOf=ym;Ng.Visitor=em;Ng.stringify=Ek;Ng.getCommentPrecedingNode=Iv;Ng.extractComments=Jv;var FG=Object.freeze({__proto__:null,getCommentPrecedingNode:Iv,extractComments:Jv}),ih=window.lively.FreezerRuntime.recorderFor("lively.ast/lib/code-categorizer.js");
ih.findDecls=Kv;ih.es6ClassDef=function(e){var h;if("ClassDeclaration"!==e.type)return null;var l={type:"class-decl",name:e.id.name,node:e,children:[]};(h=l.children).push.apply(h,hb(ih.arr.compact(e.body.body.map(function(b,c){return ih.es6ClassMethod(b,l,c)}))));return[l].concat(hb(l.children))};ih.es6ClassMethod=function(e,h,l){if("MethodDefinition"!==e.type)return null;var b;"constructor"===e.kind?b="class-constructor":"method"===e.kind?b=e["static"]?"class-class-method":"class-instance-method":
"get"===e.kind?b=e["static"]?"class-class-getter":"class-instance-getter":"set"===e.kind&&(b=e["static"]?"class-class-setter":"class-instance-setter");return"class-instance-getter"===b&&"commands"===e.key.name?ih.parseCommandsMethod(e,h,b):"class-class-getter"===b&&"properties"===e.key.name?ih.parsePropertiesMethod(e,h,b):b?{type:b,parent:h,node:e,name:e.key.name}:null};ih.parsePropertiesMethod=function(e,h,l){var b={type:l,parent:h,node:e,name:e.key.name};try{var c=[];b.node.value.body.body[0].argument.properties.forEach(function(g){c.push({type:g.type,
parent:b,node:g,name:g.key?g.key.name:g.argument.arguments[0].value})});b.children=c}finally{return b}};ih.parseCommandsMethod=function(e,h,l){var b={type:l,parent:h,node:e,name:e.key.name};try{var c=[];if(b.node.value.body.body){var g=b.node.value.body.body[0].argument.elements;g&&(g.forEach(function(a){c.push({type:a.type,parent:b,node:a,name:a.properties[0].value.value})}),b.children=c)}}finally{return b}};ih.varDefs=function(e){if("VariableDeclaration"!==e.type)return null;var h=[];e=ba(ih.withVarDeclIds(e));
var l;try{var b=function(){var c=l.value,g={name:c.id.name,node:c.node,type:"var-decl"};h.push(g);if(!g.node.init)return"continue";for(c=g.node.init;"AssignmentExpression"===c.type;)c=c.right;if("ObjectExpression"===c.type)return g.type="object-decl",g.children=ih.objectKeyValsAsDefs(c).map(function(a){return Object.assign({},a,{type:"object-"+a.type,parent:g})}),h.push.apply(h,hb(g.children)),"continue";if("ArrayExpression"===c.type){g.type="array-decl";try{g.children=ih.arrayEntriesAsDefs(c).map(function(a){return Object.assign({},
a,{type:"object-"+a.type,parent:g})}),h.push.apply(h,hb(g.children))}finally{return"continue"}}if(c=ih.someObjectExpressionCall(c,g))g.children=c.map(function(a){return Object.assign({},a,{parent:g})}),h.push.apply(h,hb(g.children))};for(e.s();!(l=e.n()).done;)b()}catch(c){e.e(c)}finally{e.f()}return h};ih.funcDef=function(e){return"FunctionStatement"!==e.type&&"FunctionDeclaration"!==e.type||!e.id?null:[{name:e.id.name,node:e,type:"function-decl"}]};ih.someObjectExpressionCall=function(e,h){"ExpressionStatement"===
e.type&&(e=e.expression);return"CallExpression"!==e.type?null:(e=e.arguments.find(function(l){return"ObjectExpression"===l.type}))?ih.objectKeyValsAsDefs(e,h):null};ih.parseDescribeBlock=Lv;ih.describe=function(e){if("ExpressionStatement"!==e.type||e.expression&&"describe"!==ih.Path("expression.callee.name").get(e)&&"xdescribe"!==ih.Path("expression.callee.name").get(e))return null;var h={name:e.expression.arguments[0].value,node:e,type:e.expression.callee.name};h.children=ih.parseDescribeBlock(e);
return[h]};ih.functionWrapper=function(e,h){if(!ih.isFunctionWrapper(e))return null;var l=ih.Path("expression.arguments.0").get(e);h=l&&"FunctionExpression"===l.type&&5<ih.string.lines(l.source||"").length?ih.findDecls(l,h):ih.findDecls(ih.Path("expression.callee").get(e),h);var b={node:e,name:ih.Path("expression.callee.id.name").get(e)};h.forEach(function(c){return c.parent||(c.parent=b)});return h};ih.unwrapExport=function(e){return"ExportNamedDeclaration"!==e.type&&"ExportDefaultDeclaration"!==
e.type||!e.declaration?e:e.declaration};ih.objectKeyValsAsDefs=function(e,h){return e.properties.map(function(l){return{name:l.key.name||l.key.value,type:"FunctionExpression"===l.value.type?"method":"property",node:l,parent:h}})};ih.arrayEntriesAsDefs=function(e,h){return e.elements.map(function(l){return{name:l.value||l.properties[0].value.value,type:l.type,node:l,parent:h}})};ih.isFunctionWrapper=function(e){return"CallExpression"===ih.Path("expression.type").get(e)&&"FunctionExpression"===ih.Path("expression.callee.type").get(e)};
ih.declIds=Qp;ih.withVarDeclIds=function(e){return e.declarations.map(function(h){!h.source&&h.init&&(h.source=h.id.name+" = "+h.init.source);return{node:h,id:h.id}})};ih.parse=Qj;ih.arr=mh;ih.Path=Nh;ih.string=ji;ih.obj=nh;ih.findDecls=Kv;var nx=Object.freeze({__proto__:null,findDecls:Kv});Lc("bZ",nx);var ci=window.lively.FreezerRuntime.recorderFor("lively.ast/index.js");ci.isValidIdentifier=yr;ci.BaseVisitor=em;ci.withMozillaAstDo=ix;ci.printAst=AG;ci.compareAst=BG;ci.pathToNode=CG;ci.rematchAstWithSource=
DG;ci.ReplaceManyVisitor=mx;ci.ReplaceVisitor=Su;ci.AllNodesVisitor=lx;ci.parse=Qj;ci.parseFunction=So;ci.fuzzyParse=To;ci.acorn=jx;ci.walk=tq;ci.custom=Nu;ci.stringify=Ek;ci.escodegen=dx;ci.escodegen=dx;ci.acorn=jx;ci.walk=tq;ci.nodes=us;ci.query=vs;ci.transform=Tu;ci.comments=FG;ci.categorizer=nx;ci.query=vs;ci.transform=Tu;ci.comments=FG;ci.categorizer=nx;ci.stringify=Ek;ci.nodes=us;ci.custom=Nu;ci.isValidIdentifierRe=/^(?!(?:do|if|in|for|let|new|try|var|case|default|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/;
ci.isValidIdentifier=yr;ci.parse=Qj;ci.Node=ci.parse("").constructor;Object.defineProperty(ci.Node.prototype,"__serialize__",{configurable:!0,value:function(){return{__expr__:"("+JSON.stringify(this)+")"}}});var fS=Object.freeze({__proto__:null,BaseVisitor:em,withMozillaAstDo:ix,printAst:AG,compareAst:BG,pathToNode:CG,rematchAstWithSource:DG,ReplaceManyVisitor:mx,ReplaceVisitor:Su,AllNodesVisitor:lx,parse:Qj,parseFunction:So,fuzzyParse:To,escodegen:dx,acorn:jx,walk:tq,query:vs,transform:Tu,comments:FG,
categorizer:nx,stringify:Ek,nodes:us,custom:Nu,isValidIdentifier:yr});Lc("aV",fS);var li=window.lively.FreezerRuntime.recorderFor("lively.vm/lib/util.js");li.getGlobal=zm;li.signatureOf=Ct;li.isClass=Fy;li.pluck=Mv;li.printSymbol=Nv;li.safeToString=Dt;li.printEvalResult=Rp;li.obj=nh;li.string=ji;li.getGlobal=zm;li.signatureOf=Ct;li.isClass=Fy;li.pluck=Mv;li.knownSymbols=function(){return Object.getOwnPropertyNames(Symbol).filter(function(e){return"symbol"===Jc(Symbol[e])}).reduce(function(e,h){return e.set(Symbol[h],
"Symbol."+h)},new Map)}();li.symMatcher=/^Symbol\((.*)\)$/;li.printSymbol=Nv;li.safeToString=Dt;li.printEvalResult=Rp;var gS=function(){function e(c,g){"object"===Jc(g)&&(g=g.maxDepth||2);if(!c)return String(c);if("string"===typeof c)return g=c.includes("\n")?"`":'"',c=c.split("\n").slice(0,1E3).join("\n"),g+c+g;if(c instanceof Error)return c.stack||li.safeToString(c);if(!li.obj.isObject(c))return li.safeToString(c);try{var a=li.obj.inspect(c,{customPrinter:l,maxNumberOfKeys:100,maxDepth:g,printFunctionSource:!0})}catch(d){}return"{}"===
a?li.safeToString(c):a}function h(c,g){if("string"===typeof c||Array.isArray(c)||!b||"function"!==typeof c[b])return g;var a="function"===typeof c.entries,d=a?c.entries():c[b](),f=[];g=a?"{":"[";var k=a?"}":"]";c=c.constructor&&c.constructor.name||"Iterable";for(var n=0,p;10>n;n++){p=d.next();if(p.done)break;f.push(p.value)}d=f.map(function(q){return a?"".concat(String(q[0]),": ").concat(String(q[1])):e(q,2)}).join(", ");return"".concat(c,"(").concat(g).concat(d).concat(k,")")}function l(c,g,a){if(!c)return g;
if("symbol"===Jc(c))return li.printSymbol(c);if("string"===typeof c)return li.string.print(li.string.truncate(c,100));if(c.isMorph)return li.safeToString(c);if(c instanceof Promise)return"Promise()";if("undefined"!==typeof Node&&c instanceof Node||"undefined"!==typeof ImageData&&c instanceof ImageData)return li.safeToString(c);var d=c.length||c.byteLength;if(void 0!==d&&10<d&&c.slice)return"["+("string"===typeof c||c.byteLength?li.safeToString(c.slice(0,10)):c.slice(0,10).map(a))+",...]";c=h(c,g);
return c!==g?c:g}var b="undefined"!==typeof Symbol&&Symbol.iterator;return e}();li.printInspectEvalValue=gS;li.printInspectEvalValue=gS;var ii=window.lively.FreezerRuntime.recorderFor("lively.vm/lib/completions.js");ii.getObjectForCompletion=Ov;ii.propertyExtract=function(e,h,l){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h).map(ii.printSymbol)).filter(function(b){return-1===e.indexOf(b)}).map(l).filter(function(b){return!!b}).sort(function(b,c){return b.name<c.name?-1:
b.name>c.name?1:0})};ii.getMethodsOf=function(e,h){return ii.propertyExtract(e,h,function(l){return h.__lookupGetter__&&h.__lookupGetter__(l)||"function"!==typeof h[l]?null:{name:l,completion:ii.signatureOf(l,h[l])}})};ii.getAttributesOf=function(e,h){return ii.propertyExtract(e,h,function(l){return h.__lookupGetter__&&!h.__lookupGetter__(l)&&"function"===typeof h[l]?null:{name:l,completion:l}})};ii.getProtoChain=function(e){for(var h=[];e;)h.push(e),e=e.__proto__;return h};ii.getDescriptorOf=function(e,
h){function l(b,c){b.length>c&&(b=b.slice(0,c)+"...");return b.replace(/\n/g,"").replace(/\s+/g," ")}if(e===h){if("function"!==typeof e)return l(ii.safeToString(e),50);h=e.toString();h=l(h.slice(h.indexOf("{")+1,h.lastIndexOf("}")),50);return ii.signatureOf(e.displayName||e.name||"function",e)+" {"+h+"}"}return(e=h.hasOwnProperty("constructor")&&h.constructor)?"string"===typeof e.type&&e.type.length?l(e.type,50):"string"===typeof e.name&&e.name.length?l(e.name,50):"anonymous class":"prototype"};ii.getCompletionsOfObj=
function(e,h){try{var l=[];var b=ii.getProtoChain(e).map(function(g){var a=ii.getDescriptorOf(e,g);g=ii.getMethodsOf(l,g).concat(ii.getAttributesOf(l,g));l=l.concat(ii.pluck(g,"name"));return[a,ii.pluck(g,"completion")]})}catch(g){var c=g}h(c,b)};ii.descriptorsOfObjAndProtoProperties=function(e){var h=[];return ii.getProtoChain(e).map(function(l){var b=ii.getDescriptorOf(e,l);l=ii.getMethodsOf(h,l).concat(ii.getAttributesOf(h,l));h=h.concat(ii.pluck(l,"name"));return[b,ii.pluck(l,"completion")]})};
ii.getCompletions=Pv;ii.lang=ZQ;ii.signatureOf=Ct;ii.pluck=Mv;ii.safeToString=Dt;ii.printSymbol=Nv;ii.getObjectForCompletion=Ov;ii.getCompletions=Pv;var yA=Object.freeze({__proto__:null,getObjectForCompletion:Ov,getCompletions:Pv});Lc("bd",yA);var Gd=window.lively.FreezerRuntime.recorderFor("lively.source-transform/capturing.js");Gd.rewriteToCaptureTopLevelVariables=Et;Gd.removeJspmGlobalRef=function(e){var h=!1;return Gd.ReplaceVisitor.run(e,function(l){h||"VariableDeclarator"!=l.type||"_global"!=
l.id.name||(h='_global = typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : global'==Gd.stringify(l));return h&&"LogicalExpression"==l.type&&"_global"==l.right.name?l.left:l})};Gd.transformImportMeta=function(e,h){return Gd.ReplaceVisitor.run(e,function(l){return"MetaProperty"==l.type&&"import"==l.meta.name?h.classToFunction.currentModuleAccessor?Gd.nodes.objectLiteral(["url",Gd.nodes.member(h.classToFunction.currentModuleAccessor,"id")]):Gd.parse('({url: eval("_context").id})').body[0].expression:
l})};Gd.rewriteToRegisterModuleToCaptureSetters=Qv;Gd.clearEmptyExports=function(e,h){h=Gd.topLevelDeclsAndRefs(e);h=ba(h.scope.exportDecls);var l;try{for(h.s();!(l=h.n()).done;){var b=l.value;b.declaration||!b.specifiers||b.specifiers.length||Gd.arr.remove(e.body,b)}}catch(c){h.e(c)}finally{h.f()}return e};Gd.replaceRefs=function(e,h){var l=Gd.topLevelDeclsAndRefs(e),b=l.refs.filter(function(a){return Gd.shouldRefBeCaptured(a,l,h)}),c=[],g=0;e=Gd.ReplaceVisitor.run(e,function(a,d){if("Property"===
a.type&&b.includes(a.key)&&a.shorthand)return Gd.prop(Gd.id(a.key.name),a.value);if("ExportNamedDeclaration"===a.type){d=a.declaration;var f=a.specifiers;d&&(d.id?c.push(d.id):d.declarations&&c.push.apply(c,hb(d.declarations.map(function(n){return n.id}))));f&&f.forEach(function(n){return c.push(n.local)});return a}if("AssignmentExpression"===a.type&&b.includes(a.left)&&h.declarationWrapper)return Object.assign({},a,{right:Gd.declarationWrapperCall(h.declarationWrapper,null,Gd.literal(a.left.name),
Gd.literal("assignment"),a.right,h.captureObj,h)});if("AssignmentExpression"===a.type&&"ObjectPattern"===a.left.type){var k=Gd.id("__inter".concat(g++,"__"));return(f=Gd.nodes).sqncExpr.apply(f,[Gd.assign(Gd.member(h.captureObj,k),a.right)].concat(hb(a.left.properties.map(function(n){return Gd.assign(n.value||n.key,Gd.member(Gd.member(h.captureObj,k),n.key))}))))}return a});return Gd.ReplaceVisitor.run(e,function(a,d,f){return b.includes(a)&&!c.includes(a)?Gd.member(h.captureObj,a):a})};Gd.replaceVarDecls=
function(e,h){var l=Gd.topLevelDeclsAndRefs(e);return Gd.ReplaceManyVisitor.run(e,function(b){if(!l.varDecls.includes(b)||b.declarations.every(function(n){return!Gd.shouldDeclBeCaptured(n,h)}))return b;for(var c=[],g=0;g<b.declarations.length;g++){var a=b.declarations[g];if(Gd.shouldDeclBeCaptured(a,h)){var d=a.init||{operator:"||",type:"LogicalExpression",left:{computed:!1,object:h.captureObj,property:a.id,type:"MemberExpression"},right:{name:"undefined",type:"Identifier"}};d=h.declarationWrapper&&
a.id.name?Gd.declarationWrapperCall(h.declarationWrapper,a,Gd.literal(a.id.name),Gd.literal(b.kind),d,h.captureObj,h):d;if(a.id.type.includes("Pattern")){var f=Gd.generateUniqueName(l.declaredNames,"destructured_1"),k={type:"Identifier",name:f};a=Gd.transformPattern(a.id,{parent:k,declaredNames:l.declaredNames}).map(function(n){return n[Gd.annotationSym]&&n[Gd.annotationSym].capture?Gd.assignExpr(h.captureObj,n.declarations[0].id,h.declarationWrapper?Gd.declarationWrapperCall(h.declarationWrapper,
null,Gd.literal(n.declarations[0].id.name),Gd.literal(b.kind),n.declarations[0].init,h.captureObj,h):n.declarations[0].init,!1):n});l.declaredNames.push(f);c.push.apply(c,hb([Gd.varDecl(k,d,b.kind)].concat(a)))}else c.push(Gd.assignExpr(h.captureObj,a.id,d,!1)),h.keepTopLevelVarDecls&&c.push(Gd.varDecl(a.id,Gd.member(h.captureObj,a.id)))}else c.push({type:"VariableDeclaration",kind:b.kind||"var",declarations:[a]})}return c})};Gd.generateUniqueName=function(e,h){for(var l=1;-1<e.indexOf(h);){if(1E3<
l)throw Error("Endless loop searching for unique variable "+h);h=h.replace(/_[0-9]+$|$/,"_"+ ++l)}return h};Gd.additionalIgnoredDecls=function(e,h){h=Gd.topLevelDeclsAndRefs(e);for(var l=[],b=0;b<h.scope.varDecls.length;b++){var c=h.scope.varDecls[b],g=Gd.Path(h.scope.varDeclPaths[b]).slice(0,-1).get(e);"ForStatement"!==g.type&&"ForInStatement"!==g.type&&"ForOfStatement"!==g.type&&"ExportNamedDeclaration"!==g.type||l.push.apply(l,hb(c.declarations))}return h.scope.catches.map(function(a){return a.name}).concat(l.map(function(a){return a.id.name}))};
Gd.additionalIgnoredRefs=function(e,h){h=Gd.topLevelDeclsAndRefs(e);for(var l=[],b=0;b<h.scope.varDecls.length;b++){var c=h.scope.varDecls[b],g=Gd.Path(h.scope.varDeclPaths[b]).slice(0,-1).get(e);"ForStatement"!==g.type&&"ForInStatement"!==g.type&&"ForOfStatement"!==g.type||l.push.apply(l,hb(c.declarations))}return h.scope.catches.map(function(a){return a.name}).concat(Gd.queryHelpers.declIds(l.map(function(a){return a.id})).map(function(a){return a.name}))};Gd.shouldDeclBeCaptured=function(e,h){return-1===
h.excludeDecls.indexOf(e.id.name)&&(!h.includeDecls||-1<h.includeDecls.indexOf(e.id.name))};Gd.shouldRefBeCaptured=function(e,h,l){if(h.scope.importSpecifiers.includes(e))return!1;for(var b=0;b<h.scope.exportDecls.length;b++){var c=h.scope.exportDecls[b];if(c.declarations&&c.declarations.includes(e)||c.declaration===e)return!1}return l.excludeRefs.includes(e.name)||l.includeRefs&&!l.includeRefs.includes(e.name)?!1:!0};Gd.replaceClassDecls=function(e,h){if(h.classToFunction&&h.classToFunction.transform)return h.classToFunction.transform(e,
h.classToFunction);var l=Gd.topLevelDeclsAndRefs(e);if(!l.classDecls.length)return e;for(var b=e.body.length-1;0<=b;b--){var c=e.body[b];c.id&&l.classDecls.includes(c)&&e.body.splice(b+1,0,Gd.assignExpr(h.captureObj,c.id,c.id,!1))}return e};Gd.splitExportDeclarations=function(e,h){h=e.body;for(var l=e.body=[],b=0;b<h.length;b++){var c=h[b];if("ExportNamedDeclaration"!==c.type||!c.declaration||"VariableDeclaration"!==c.declaration.type||1>=c.declaration.declarations.length)l.push(c);else for(var g=
c.declaration.declarations,a=0;a<g.length;a++)l.push({type:"ExportNamedDeclaration",specifiers:[],declaration:Gd.varDecl(g[a].id,g[a].init,c.declaration.kind)})}return e};Gd.insertCapturesForExportedImports=dn;Gd.insertCapturesForExportDeclarations=function(e,h){for(var l=[],b=0;b<e.body.length;b++){var c=e.body[b];l.push(c);if(("ExportNamedDeclaration"===c.type||"ExportDefaultDeclaration"===c.type)&&c.declaration)if("ExportDefaultDeclaration"===c.type&&"Literal"===c.declaration.type){var g=c.declaration;
g.raw;var a=Gd.generateUniqueName(Gd.topLevelDeclsAndRefs(e).declaredNames,"$"+g.raw.split('"').join(""));c.declaration=Gd.id(a);Gd.arr.pushAt(l,Gd.assignExpr(h.captureObj,a,g.raw,!1),l.indexOf(c))}else c.declaration.declarations?l.push.apply(l,hb(c.declaration.declarations.map(function(d){var f=d.id;h.declarationWrapper&&(d.init.callee&&d.init.callee.name===h.declarationWrapper.name||(f=Gd.declarationWrapperCall(h.declarationWrapper,d,Gd.literal(d.id.name),Gd.literal("assignment"),d.id,h.captureObj,
h)));return Gd.assignExpr(h.captureObj,d.id,f,!1)}))):"FunctionDeclaration"!==c.declaration.type&&"ClassDeclaration"===c.declaration.type&&l.push(Gd.assignExpr(h.captureObj,c.declaration.id,c.declaration.id,!1))}e.body=l;return e};Gd.insertCapturesForImportDeclarations=function(e,h){e.body=e.body.reduce(function(l,b){return l.concat("ImportDeclaration"===b.type&&b.specifiers.length?[b].concat(b.specifiers.map(function(c){return Gd.assignExpr(h.captureObj,c.local,c.local,!1)})):[b])},[]);return e};
Gd.insertDeclarationsForExports=function(e,h){for(var l=Gd.topLevelDeclsAndRefs(e),b=[],c=0;c<e.body.length;c++){var g=e.body[c];"ExportDefaultDeclaration"!==g.type||!g.declaration||g.declaration.type.includes("Declaration")||"Identifier"!==g.declaration.type&&!g.declaration.id||l.declaredNames.includes(g.declaration.name)?"ExportNamedDeclaration"!==g.type||!g.specifiers.length||g.source?b.push(g):b=b.concat(g.specifiers.map(function(a){return l.declaredNames.includes(a.local.name)?null:Gd.varDeclOrAssignment(e,
{type:"VariableDeclarator",id:a.local,init:Gd.member(h.captureObj,a.local)})}).filter(Boolean)).concat(g):b=b.concat([Gd.varDeclOrAssignment(e,{type:"VariableDeclarator",id:g.declaration,init:Gd.member(h.captureObj,g.declaration)}),g])}e.body=b;return e};Gd.fixDefaultAsyncFunctionExportForRegeneratorBug=function(e,h){h=[];for(var l=0;l<e.body.length;l++){var b=e.body[l];"ExportDefaultDeclaration"===b.type&&"FunctionDeclaration"===b.declaration.type&&b.declaration.id&&b.declaration.async&&(h.push(b.declaration),
b.declaration={type:"Identifier",name:b.declaration.id.name});h.push(b)}e.body=h;return e};Gd.es6ModuleTransforms=function(e,h){e.body=e.body.reduce(function(l,b){if("ExportNamedDeclaration"===b.type)if(b.source){var c=a=b.source;var g=b.specifiers.map(function(d){return{type:"ExpressionStatement",expression:Gd.exportFromImport({type:"Literal",value:d.exported.name},{type:"Literal",value:d.local.name},a,h.moduleExportFunc,h.moduleImportFunc)}})}else g=b.declaration?(g=b.declaration.declarations)?
g.map(function(d){h.excludeDecls.push(d.id);return Gd.varDecl(d.id,Gd.assignExpr(h.captureObj,d.id,h.declarationWrapper?Gd.declarationWrapperCall(h.declarationWrapper,null,Gd.literal(d.id.name),Gd.literal(b.declaration.kind),d,h.captureObj,h):d.init,!1),b.declaration.kind)}).concat(g.map(function(d){return Gd.exportCallStmt(h.moduleExportFunc,d.id.name,d.id)})):[b.declaration].concat(Gd.exportCallStmt(h.moduleExportFunc,b.declaration.id.name,b.declaration.id)):b.specifiers.map(function(d){return Gd.exportCallStmt(h.moduleExportFunc,
d.exported.name,Gd.shouldDeclBeCaptured({id:d.local},h)?Gd.member(h.captureObj,d.local):d.local)});else if("ExportDefaultDeclaration"===b.type)g=b.declaration&&b.declaration.id?[b.declaration].concat(Gd.exportCallStmt(h.moduleExportFunc,"default",b.declaration.id)):[Gd.exportCallStmt(h.moduleExportFunc,"default",b.declaration)];else if("ExportAllDeclaration"===b.type){c={name:h.es6ExportFuncId+"__iterator__",type:"Identifier"};var a=b.source;g=[{type:"ForInStatement",body:{type:"ExpressionStatement",
expression:Gd.exportFromImport(c,c,a,h.moduleExportFunc,h.moduleImportFunc)},left:{type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:c,init:null}]},right:Gd.importCall(null,a,h.moduleImportFunc)}];h.excludeRefs.push(c.name);h.excludeDecls.push(c.name)}else g="ImportDeclaration"===b.type?b.specifiers.length?b.specifiers.map(function(d){return Gd.varDeclAndImportCall(e,d.local,"ImportSpecifier"===d.type&&d.imported.name||"ImportDefaultSpecifier"===d.type&&"default"||
null,b.source,h.moduleImportFunc)}):Gd.importCallStmt(null,b.source,h.moduleImportFunc):[b];return l.concat(g)},[]);return e};Gd.putFunctionDeclsInFront=function(e,h){var l=Gd.topLevelDeclsAndRefs(e).scope,b=l.funcDecls;if(!b.length)return e;for(var c=[],g=b.length;g--;){var a=b[g];if(a.id&&Gd.shouldDeclBeCaptured(a,h)){var d=l.funcDeclPaths[g].slice(0,-1),f=Gd.Path(d).get(l.node);d={type:"Identifier",name:a.id.name};var k=h.declarationWrapper?Gd.declarationWrapperCall(h.declarationWrapper,a,Gd.literal(d.name),
Gd.literal("function"),d,h.captureObj,h):d,n=Object.assign({},a);Array.isArray(f)?f.splice(f.indexOf(a),1,Gd.exprStmt(a.id)):"ExportNamedDeclaration"===f.type?(f=l.node.body.indexOf(f),-1<f&&l.node.body.splice(f,1,{type:"ExportNamedDeclaration",specifiers:[{type:"ExportSpecifier",exported:a.id,local:a.id}]})):"ExportDefaultDeclaration"===f.type&&(f.declaration=a.id);c.unshift(Gd.assignExpr(h.captureObj,d,k,!1));c.unshift(n)}}e.body=c.concat(e.body);return e};Gd.computeDefRanges=function(e,h){e=Gd.topLevelDeclsAndRefs(e);
return Gd.chain(e.scope.varDecls).pluck("declarations").flat().value().concat(e.scope.funcDecls.filter(function(l){return l.id})).reduce(function(l,b){l[b.id.name]||(l[b.id.name]=[]);l[b.id.name].push({type:b.type,start:b.start,end:b.end});return l},{})};Gd.transformPattern=function(e,h){return"ArrayPattern"===e.type?Gd.transformArrayPattern(e,h):"ObjectPattern"===e.type?Gd.transformObjectPattern(e,h):[]};Gd.transformArrayPattern=function(e,h){for(var l=h.declaredNames,b=Gd.annotationSym,c=[],g=0;g<
e.elements.length;g++){var a=e.elements[g];if("Identifier"===a.type)a=Gd.varDecl(a,Gd.member(h.parent,Gd.id(g),!0)),a[b]={capture:!0},c.push(a);else if("RestElement"===a.type)a=Gd.varDecl(a.argument,{type:"CallExpression",arguments:[{type:"Literal",value:g}],callee:Gd.member(h.parent,Gd.id("slice"),!1)}),a[b]={capture:!0},c.push(a);else if("AssignmentPattern"==a.type)a=Gd.varDecl(a.left,Gd.conditional(Gd.binaryExpr(Gd.member(h.parent,Gd.id(g),!0),"===",Gd.id("undefined")),a.right,Gd.member(h.parent,
Gd.id(g),!0))),a[b]={capture:!0},c.push(a);else{var d=Gd.id(Gd.generateUniqueName(l,h.parent.name+"$"+g)),f=Gd.varDecl(d,Gd.member(h.parent,g));l.push(d.name);c.push(f);c.push.apply(c,hb(Gd.transformPattern(a,{parent:d,declaredNames:l})))}}return c};Gd.transformObjectPattern=function(e,h){for(var l=h.declaredNames,b=Gd.annotationSym,c=[],g=0;g<e.properties.length;g++){var a=e.properties[g];if("RestElement"==a.type){var d,f=e.properties.map(function(p){return p.key&&p.key.name}).filter(Boolean),k=
Gd.nodes.varDecl(a.argument.name,Gd.nodes.objectLiteral([])),n=Gd.nodes.varDecl(a.argument.name,Gd.id(a.argument.name));a=Gd.nodes.exprStmt(Gd.nodes.funcCall(Gd.nodes.funcExpr({},[],Gd.nodes.forIn("__key",h.parent,(d=Gd.nodes).block.apply(d,hb(f.length?f.map(function(p){return Gd.nodes.ifStmt(Gd.nodes.binaryExpr(Gd.nodes.id("__key"),"===",Gd.nodes.literal(p)),{type:"ContinueStatement",label:null},null)}):[]).concat([Gd.nodes.exprStmt(Gd.nodes.assign(Gd.nodes.member(a.argument.name,Gd.nodes.id("__key"),
!0),Gd.nodes.member(h.parent,Gd.nodes.id("__key"),!0)))]))))));n[b]={capture:!0};c.push(k,n,a)}else"Identifier"==a.value.type?(k=Gd.varDecl(a.value,Gd.member(h.parent,a.key)),k[b]={capture:!0},c.push(k)):"AssignmentPattern"==a.value.type?(k=Gd.varDecl(a.value.left,Gd.conditional(Gd.binaryExpr(Gd.member(h.parent,a.key),"===",Gd.id("undefined")),a.value.right,Gd.member(h.parent,a.key))),k[b]={capture:!0},c.push(k)):(k=Gd.id(Gd.generateUniqueName(l,h.parent.name+"$"+a.key.name)),n=Gd.varDecl(k,Gd.member(h.parent,
a.key)),n[b]={capture:!1},l.push(k.name),c.push.apply(c,hb([n].concat(Gd.transformPattern(a.value,{parent:k,declaredNames:l})))))}return c};Gd.varDeclOrAssignment=function(e,h,l){return-1<Gd.topLevelDeclsAndRefs(e).declaredNames.indexOf(h.id.name)?Gd.exprStmt(Gd.assign(h.id,h.init)):{declarations:[h],kind:l||"var",type:"VariableDeclaration"}};Gd.assignExpr=function(e,h,l,b){return Gd.exprStmt(Gd.assign(Gd.member(e,h,b),l||Gd.id("undefined")))};Gd.exportFromImport=function(e,h,l,b,c){return Gd.exportCall(b,
e,Gd.importCall(h,l,c))};Gd.varDeclAndImportCall=function(e,h,l,b,c){return Gd.varDecl(h,Gd.importCall(l,b,c))};Gd.importCall=function(e,h,l){"string"===typeof e&&(e=Gd.literal(e));return{arguments:[h].concat(e||[]),callee:l,type:"CallExpression"}};Gd.importCallStmt=function(e,h,l){return Gd.exprStmt(Gd.importCall(e,h,l))};Gd.exportCall=function(e,h,l){"string"===typeof h&&(h=Gd.literal(h));l=Gd.obj.deepCopy(l);return Gd.funcCall(e,h,l)};Gd.exportCallStmt=function(e,h,l){return Gd.exprStmt(Gd.exportCall(e,
h,l))};Gd.declarationWrapperCall=function(e,h,l,b,c,g,a){if(h){var d=[],f=!1;if(h["x-lively-object-meta"]){f=h["x-lively-object-meta"];h=f.start;var k=f.end,n=f.evalId,p=f.sourceAccessorName;f=!0;d.push("start",Gd.nodes.literal(h),"end",Gd.nodes.literal(k))}void 0===n&&a.hasOwnProperty("evalId")&&(n=a.evalId,f=!0);void 0===p&&a.hasOwnProperty("sourceAccessorName")&&(p=a.sourceAccessorName,f=!0);void 0!==n&&d.push("evalId",Gd.nodes.literal(n));p&&d.push("moduleSource",Gd.nodes.id(p));if(f)return Gd.funcCall(e,
l,b,c,g,Gd.nodes.objectLiteral(d))}return Gd.funcCall(e,l,b,c,g)};Gd.obj=nh;Gd.chain=Tn;Gd.arr=mh;Gd.Path=Nh;Gd.parse=Qj;Gd.stringify=Ek;Gd.query=vs;Gd.transform=Tu;Gd.nodes=us;Gd.ReplaceManyVisitor=mx;Gd.ReplaceVisitor=Su;var yn=Gd.nodes;Gd.member=yn.member;Gd.prop=yn.prop;Gd.varDecl=yn.varDecl;Gd.assign=yn.assign;Gd.id=yn.id;Gd.literal=yn.literal;Gd.exprStmt=yn.exprStmt;Gd.conditional=yn.conditional;Gd.binaryExpr=yn.binaryExpr;Gd.funcCall=yn.funcCall;Gd.block=yn.block;var hS=Gd.query;Gd.topLevelDeclsAndRefs=
hS.topLevelDeclsAndRefs;Gd.queryHelpers=hS.helpers;var iS=Gd.transform;Gd.transformSingleExpression=iS.transformSingleExpression;Gd.wrapInStartEndCall=iS.wrapInStartEndCall;Gd.rewriteToCaptureTopLevelVariables=Et;Gd.rewriteToRegisterModuleToCaptureSetters=Qv;Gd.insertCapturesForExportedImports=dn;Gd.annotationSym=Symbol("lively.ast-destructuring-transform");var zA=Object.freeze({__proto__:null,rewriteToCaptureTopLevelVariables:Et,rewriteToRegisterModuleToCaptureSetters:Qv,insertCapturesForExportedImports:dn}),
di=window.lively.FreezerRuntime.recorderFor("lively.source-transform/index.js");di.ensureOptionalCatchBinding=function(){di.catchBinding&&("undefined"===typeof babel||babel.availablePlugins["optional-catch-binding"]||(lively||global.lively).FreezerRuntime||babel.registerPlugin("optional-catch-binding",di.catchBinding["default"]))};di.ensureImportMeta=function(){di.importMeta&&("undefined"===typeof babel||babel.availablePlugins["syntax-import-meta"]||(lively||global.lively).FreezerRuntime||babel.registerPlugin("syntax-import-meta",
di.importMeta["default"]))};di.stringifyFunctionWithoutToplevelRecorder=Sp;di.es5Transpilation=sk;di.ensureModuleMetaForComponentDefinition=Rv;di.ensureComponentDescriptors=Tp;di.parseFunction=So;di.parse=Qj;di.stringify=Ek;di.ReplaceVisitor=Su;di.QueryReplaceManyVisitor=dS;di.catchBinding=Nd;di.importMeta=Nd;di.capturing=zA;di.topLevelDeclsAndRefs=Yj;di.arr=mh;di.capturing=zA;di.stringifyFunctionWithoutToplevelRecorder=Sp;di.es5Transpilation=sk;di.ensureModuleMetaForComponentDefinition=Rv;di.ensureComponentDescriptors=
Tp;var Z1=Object.freeze({__proto__:null,capturing:zA,stringifyFunctionWithoutToplevelRecorder:Sp,es5Transpilation:sk,ensureModuleMetaForComponentDefinition:Rv,ensureComponentDescriptors:Tp});Lc("c8",Z1);var gh=window.lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-support.js");gh.processInlineCodeTransformOptions=function(e,h){if(!e.comments)return h;e=e.comments.find(function(b){return b.text.startsWith("lively.vm ")});if(!e)return h;try{var l=eval("({"+e.text.slice(10)+"});");return Object.assign(h,
l)}catch(b){return h}};gh.evalCodeTransform=Up;gh.evalCodeTransformOfSystemRegisterSetters=zr;gh.copyProperties=function(e,h){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e)).forEach(function(b){return-1===l.indexOf(b)&&Object.defineProperty(h,b,Object.getOwnPropertyDescriptor(e,b))})};gh.arr=mh;gh.Path=Nh;gh.parse=Qj;gh.stringify=Ek;gh.transform=Tu;gh.query=vs;gh.nodes=us;gh.capturing=zA;gh.es5Transpilation=sk;gh.ensureComponentDescriptors=
Tp;gh.getGlobal=zm;var AA=gh.nodes;gh.id=AA.id;gh.literal=AA.literal;gh.member=AA.member;gh.objectLiteral=AA.objectLiteral;gh.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";gh.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";var BA=Lc("as","initializeES6ClassForLively");gh.defaultClassToFunctionConverterName=BA;gh.defaultClassToFunctionConverterName=BA;gh.evalCodeTransform=Up;gh.evalCodeTransformOfSystemRegisterSetters=zr;var xh=window.lively.FreezerRuntime.recorderFor("lively.vm/lib/eval.js");
xh._normalizeEvalOptions=function(e){e||(e={});e=Object.assign({targetModule:null,sourceURL:e.targetModule,runtime:null,context:xh.getGlobal(),varRecorderName:xh.defaultTopLevelVarRecorderName,dontTransform:[],recordGlobals:null,returnPromise:!0,promiseTimeout:200,waitForPromise:!0,wrapInStartEndCall:!1,onStartEval:null,onEndEval:null},e);if(e.targetModule){var h=e.runtime&&e.runtime.modules&&e.runtime.modules[e.targetModule];h&&(e=Object.assign(e,h))}e.wrapInStartEndCall&&(e.startFuncNode={type:"MemberExpression",
object:{type:"Identifier",name:e.varRecorderName},property:{type:"Literal",value:xh.startEvalFunctionName},computed:!0},e.endFuncNode={type:"MemberExpression",object:{type:"Identifier",name:e.varRecorderName},property:{type:"Literal",value:xh.endEvalFunctionName},computed:!0});return e};xh.runEval=Vp;xh.finishEval=function(e,h,l,b,c,g,a){b.wrapInStartEndCall&&(delete c[xh.startEvalFunctionName],delete c[xh.endEvalFunctionName]);e?(l.isError=!0,l.value=e):l.value=h;l.value instanceof Promise&&(l.isPromise=
!0);if(b.sync){if(l.processSync(b),"function"===typeof b.onEndEval)b.onEndEval(e,h)}else l.process(b).then(function(){"function"===typeof a&&a(null,l);"function"===typeof b.onEndEval&&b.onEndEval(e,h);return l},function(d){"function"===typeof a&&a(d,void 0);"function"===typeof b.onEndEval&&b.onEndEval(d,void 0);return l}).then(g.resolve,g.reject)};xh.syncEval=Ft;xh.tryToWaitForPromise=function(e,h){console.assert(e.isPromise,"no promise in tryToWaitForPromise???");var l={},b=new Promise(function(c){return setTimeout(c,
h,l)});return Promise.race([b,e.value]).then(function(c){return Object.assign(e,c!==l?{promiseStatus:"fulfilled",promisedValue:c}:{promiseStatus:"pending"})})["catch"](function(c){return Object.assign(e,{promiseStatus:"rejected",promisedValue:c})})};xh.arr=mh;xh.obj=nh;xh.string=ji;xh.Path=Nh;xh.promise=ai;xh.Closure=vn;xh.evalCodeTransform=Up;xh.printEvalResult=Rp;xh.getGlobal=zm;xh.defaultTopLevelVarRecorderName="__lvVarRecorder";xh.startEvalFunctionName="lively.vm-on-eval-start";xh.endEvalFunctionName=
"lively.vm-on-eval-end";xh._eval=xh.Closure.fromSource("function _eval(__lvEvalStatement, __lvVarRecorder/*needed as arg for capturing*/, __lvOriginalCode) {\n  return eval(__lvEvalStatement);\n}").getFunc();var $1=function(){function e(){rd(this,e);this.isEvalResult=!0;this.value=void 0;this.warnings=[];this.isPromise=this.isError=!1;this.promisedValue=void 0;this.promiseStatus="unknown"}Ac(e,[{key:"addWarning",value:function(h){this.warnings.push(h);return h}},{key:"printed",value:function(){this.value=
xh.printEvalResult(this,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"processSync",value:function(h){if(h.inspect||h.asString)this.value=this.print(this.value,h);return this}},{key:"process",value:function(h){var l=this;if(l.isPromise&&h.waitForPromise)return xh.tryToWaitForPromise(l,h.promiseTimeout).then(function(){(h.inspect||h.asString)&&l.printed(h);return l});(h.inspect||h.asString)&&l.printed(h);return Promise.resolve(l)}}]);return e}();xh.EvalResult=$1;var CA=xh.defaultTopLevelVarRecorderName;
xh.defaultTopLevelVarRecorderName=CA;xh.getGlobal=zm;xh.runEval=Vp;xh.syncEval=Ft;var a2=Object.freeze({__proto__:null,defaultTopLevelVarRecorderName:CA,getGlobal:zm,runEval:Vp,syncEval:Ft}),Ch=window.lively.FreezerRuntime.recorderFor("lively.notifications/index.js");Ch.getEnv=function(e){if(void 0===e){if("undefined"===typeof System)return void 0!==Ch.env?Ch.env:Ch.env||(Ch.env={emitter:Ch.events.makeEmitter({},{maxListenerLimit:1E4}),notifications:[]});e=System}var h=e.get("@lively-env");h||e.set("@lively-env",
e.newModule({options:{}}));h=h.options;if(!h)throw Error("@lively-env registered read-only");h.emitter||Object.assign(h,{emitter:e["__lively.notifications_emitter"]||(e["__lively.notifications_emitter"]=Ch.events.makeEmitter({},{maxListenerLimit:1E4})),notifications:e["__lively.notifications_notifications"]||(e["__lively.notifications_notifications"]=[])});return{emitter:h.emitter,notifications:h.notifications}};Ch.subscribe=Wp;Ch.subscribeOnce=Gy;Ch.emit=Am;Ch.unsubscribe=Ar;Ch.unsubscribeAll=Hy;
Ch.record=function(e,h){e.push(h);e.limit&&e.splice(0,e.length-e.limit)};Ch.startRecording=Iy;Ch.stopRecording=Jy;Ch.clearRecord=Ky;Ch.getRecord=Ly;Ch.log=function(e){var h=e.type+" ".repeat(Math.max(0,32-e.type.length));console.log(h+" "+Ch.obj.inspect(e,{maxDepth:2}))};Ch.startLogging=My;Ch.stopLogging=Sv;Ch.events=ns;Ch.obj=nh;Ch.env=null;Ch.subscribe=Wp;Ch.subscribeOnce=Gy;Ch.emit=Am;Ch.unsubscribe=Ar;Ch.unsubscribeAll=Hy;Ch.startRecording=Iy;Ch.stopRecording=Jy;Ch.clearRecord=Ky;Ch.getRecord=
Ly;Ch.startLogging=My;Ch.stopLogging=Sv;var Sh=window.lively.FreezerRuntime.recorderFor("lively.vm/lib/esm-eval.js");Sh.ensureImportsAreImported=function(e,h,l){return Tv.apply(this,arguments)};Sh.hasUnimportedImports=function(e,h,l){h=Sh.parse(h).body.filter(function(b){return"ImportDeclaration"===b.type});return 0<Sh.arr.uniq(h.map(function(b){return b.source.value})).filter(Boolean).filter(function(b){return!e.get(e.decanonicalize(b,l))}).length};Sh.babelTranspilerForAsyncAwaitCode=function(e,
h,l,b){return function(c,g){g=Object.assign({sourceMap:void 0,inputSourceMap:void 0,filename:l,code:!0,ast:!1},g);c="(async function(__rec) {\n".concat(c,"\n}).call(this);");g=h.transform(c,g).code;return g=g.replace(/\}\)\.call\(undefined\);$/,"}).call(this)")}};Sh.babelPluginTranspilerForAsyncAwaitCode=function(e,h,l,b){return function(c,g){var a=e.babelOptions||{},d=[];d.push(h.presetES2015);a.stage3&&d.push({plugins:h.pluginsStage3});a.stage2&&d.push({plugins:h.pluginsStage2});a.stage1&&d.push({plugins:h.pluginsStage1});
g=Object.assign({sourceMap:void 0,inputSourceMap:void 0,filename:l,babelrc:!1,presets:d,moduleIds:!1,code:!0,ast:!1},g);c="(async function(__rec) {\n".concat(c,"\n}).call(this);");g=h.babel.transform(c,g).code;return g=g.replace(/\}\)\.call\(undefined\);$/,"}).call(this)")}};Sh.getEs6Transpiler=function(e,h,l){if(h.transpiler)return h.transpiler;if(!h.es6Transpile)return null;if("babel"===e.transpiler){var b=e.global[e.transpiler]||e.get(e.decanonicalize(e.transpiler));return b?Sh.babelTranspilerForAsyncAwaitCode(e,
b,h.targetModule,l):e["import"](e.transpiler).then(function(a){return Sh.babelTranspilerForAsyncAwaitCode(e,a,h.targetModule,l)})}if("plugin-babel"===e.transpiler){b=e.decanonicalize("plugin-babel").split("/").slice(0,-1).concat("systemjs-babel-browser.js").join("/");var c=e.get(b);return c?Sh.babelPluginTranspilerForAsyncAwaitCode(e,c,h.targetModule,l):e["import"](b).then(function(a){return Sh.babelPluginTranspilerForAsyncAwaitCode(e,a,h.targetModule,l)})}if("lively.transpiler"===e.transpiler){var g=
new (e.get(e.decanonicalize("lively.transpiler"))["default"])(e,h.targetModule,l);return function(a,d){return g.transpileDoit(a,d)}}throw Error("Sorry, currently only babel is supported as es6 transpiler for runEval!");};Sh.runEval=Wo;Sh.evalEnd=function(e,h,l,b){e.get("@lively-env").evaluationEnd(l.targetModule);e.debug&&console.log("[lively.module] runEval in module ".concat(l.targetModule," done"));Sh.emit("lively.vm/doitresult",{code:h,result:b,waitForPromise:l.waitForPromise,targetModule:l.targetModule},
Date.now(),e);return b};Sh.parse=Qj;Sh.nodes=us;Sh.stringify=Ek;Sh.emit=Am;var DA=Sh.nodes;Sh.funcCall=DA.funcCall;Sh.member=DA.member;Sh.id=DA.id;Sh.literal=DA.literal;Sh.arr=mh;Sh.vmRunEval=Vp;Sh.runEval=Wo;var b2=Object.freeze({__proto__:null,runEval:Wo}),Bk=window.lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-strategies.js");Bk.obj=nh;var GG=function(){function e(){rd(this,e)}Ac(e,[{key:"runEval",value:function(){var h=Bb(regeneratorRuntime.mark(function g(b,c){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=
a.next){case 0:return a.abrupt("return",Promise.reject("runEval(source, options) not yet implemented for ".concat(this.constructor.name)));case 1:case "end":return a.stop()}},g,this)}));return function(b,c){return h.apply(this,arguments)}}()},{key:"keysOfObject",value:function(){var h=Bb(regeneratorRuntime.mark(function g(b,c){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.reject("keysOfObject(prefix, options) not yet implemented for ".concat(this.constructor.name)));
case 1:case "end":return a.stop()}},g,this)}));return function(b,c){return h.apply(this,arguments)}}()}]);return e}();Bk.EvalStrategy=GG;var HG=function(e){function h(){rd(this,h);return l.apply(this,arguments)}gd(h,e);var l=sb(h);Ac(h,[{key:"runEval",value:function(){var b=Bb(regeneratorRuntime.mark(function d(g,a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",Promise.resolve().then(function(){try{return Promise.resolve({value:eval(g)})}catch(k){return{isError:!0,
value:k}}}));case 1:case "end":return f.stop()}},d)}));return function(g,a){return b.apply(this,arguments)}}()},{key:"keysOfObject",value:function(){var b=Bb(regeneratorRuntime.mark(function d(g,a){var f=this,k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,lively.vm.completions.getCompletions(function(p){return f.runEval(p,a)},g);case 2:return k=n.sent,n.abrupt("return",{completions:k.completions,prefix:k.startLetters});case 4:case "end":return n.stop()}},
d)}));return function(g,a){return b.apply(this,arguments)}}()}]);return h}(Bk.EvalStrategy);Bk.SimpleEvalStrategy=HG;var IG=function(e){function h(){rd(this,h);return l.apply(this,arguments)}gd(h,e);var l=sb(h);Ac(h,[{key:"normalizeOptions",value:function(b){if(!b.targetModule)throw Error("runEval called but options.targetModule not specified!");return Object.assign({sourceURL:b.targetModule+"_doit_"+Date.now()},b)}},{key:"runEval",value:function(){var b=Bb(regeneratorRuntime.mark(function d(g,a){var f;
return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return a=this.normalizeOptions(a),f=a.System||lively.modules.System,f.config({meta:Pc({},a.targetModule,{format:"esm"})}),k.abrupt("return",lively.vm.runEval(g,a));case 4:case "end":return k.stop()}},d,this)}));return function(g,a){return b.apply(this,arguments)}}()},{key:"keysOfObject",value:function(){var b=Bb(regeneratorRuntime.mark(function d(g,a){var f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=
k.next){case 0:return k.next=2,lively.vm.completions.getCompletions(function(n){return lively.vm.runEval(n,a)},g);case 2:return f=k.sent,k.abrupt("return",{completions:f.completions,prefix:f.startLetters});case 4:case "end":return k.stop()}},d)}));return function(g,a){return b.apply(this,arguments)}}()}]);return h}(Bk.EvalStrategy);Bk.LivelyVmEvalStrategy=IG;var jS=function(e){function h(){rd(this,h);return l.apply(this,arguments)}gd(h,e);var l=sb(h);Ac(h,[{key:"sourceForRemote",value:function(b,
c,g){var a=Bk.obj.isString(g.context)?g.context:!1;g=Bk.obj.dissoc(g,["systemInterface","System","context","classTransform"]);return"\n(async function() {\n  var arg = ".concat(JSON.stringify(c),",\n      options = ").concat(JSON.stringify(g),';\n  const { runEval, completions } = await System.import("lively.vm");\n  const { classToFunctionTransform } = await System.import("lively.classes");\n  var hasSystem = typeof System !== "undefined"\n  options.context = ').concat(a,';\n  options.classTransform = classToFunctionTransform;\n  if (!options.context) {\n    options.context = hasSystem\n      ? System.global\n      : typeof window !== "undefined"\n          ? window\n          : typeof global !== "undefined"\n              ? global\n              : typeof self !== "undefined" ? self : this;\n  }\n  async function evalFunction(source, options) {\n    if (hasSystem) {\n      var conf = {meta: {}}; conf.meta[options.targetModule] = {format: "esm"};\n      System.config(conf);\n    } else {\n      options = Object.assign({topLevelVarRecorderName: "GLOBAL"}, options);\n      delete options.targetModule;\n    }\n    let res = await runEval(source, options);\n    try {\n       JSON.stringify(res.value);\n    } catch(e) {\n       res.value = String(res.value);\n    }\n    return res;\n  }\n  function keysOfObjectFunction(prefix, options) {\n    return completions.getCompletions(code => evalFunction(code, options), prefix)\n      .then(result => ({isEvalResult: true, completions: result.completions, prefix: result.startLetters}));\n  }\n  return ').concat("eval"===
b?"evalFunction":"keysOfObjectFunction","(arg, options)\n    .catch(err => ({isEvalResult: true, isError: true, value: String(err.stack || err)}));\n})();\n")}},{key:"runEval",value:function(){var b=Bb(regeneratorRuntime.mark(function d(g,a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this.remoteEval(this.sourceForRemote("eval",g,a),a));case 1:case "end":return f.stop()}},d,this)}));return function(g,a){return b.apply(this,arguments)}}()},
{key:"keysOfObject",value:function(){var b=Bb(regeneratorRuntime.mark(function d(g,a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this.remoteEval(this.sourceForRemote("keysOfObject",g,a),a));case 1:case "end":return f.stop()}},d,this)}));return function(g,a){return b.apply(this,arguments)}}()},{key:"remoteEval",value:function(){var b=Bb(regeneratorRuntime.mark(function d(g,a){var f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=
k.next){case 0:return k.prev=0,k.next=3,this.basicRemoteEval(g,a);case 3:return f=k.sent,k.abrupt("return","string"===typeof f?JSON.parse(f):f);case 7:return k.prev=7,k.t0=k["catch"](0),k.abrupt("return",{isError:!0,value:"Remote eval failed: ".concat(f||k.t0)});case 10:case "end":return k.stop()}},d,this,[[0,7]])}));return function(g,a){return b.apply(this,arguments)}}()},{key:"basicRemoteEval",value:function(){var b=Bb(regeneratorRuntime.mark(function d(g,a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=
f.next){case 0:throw Error("Not yet implemented");case 1:case "end":return f.stop()}},d)}));return function(g,a){return b.apply(this,arguments)}}()}]);return h}(Bk.LivelyVmEvalStrategy);Bk.RemoteEvalStrategy=jS;var JG=function(e){function h(b){rd(this,h);var c=l.call(this);c.url=b||c.constructor.defaultURL;return c}gd(h,e);var l=sb(h);Ac(h,null,[{key:"defaultURL",get:function(){return"http://localhost:3000/lively"}}]);Ac(h,[{key:"normalizeOptions",value:function(b){b=Xb(nd(h.prototype),"normalizeOptions",
this).call(this,b);return Object.assign({serverEvalURL:this.url},b,{context:null})}},{key:"basicRemoteEval",value:function(){var b=Bb(regeneratorRuntime.mark(function d(g,a){var f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return a=this.normalizeOptions(a),f="basicRemoteEval_"+(System.get("@system-env").node?"node":"web"),k.next=4,this[f]({method:"POST",body:g},a.serverEvalURL);case 4:return k.abrupt("return",k.sent);case 5:case "end":return k.stop()}},d,this)}));
return function(g,a){return b.apply(this,arguments)}}()},{key:"basicRemoteEval_web",value:function(){var b=Bb(regeneratorRuntime.mark(function d(g,a){var f,k,n,p,q,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:f=a.match(/[^:]+:\/\/[^\/]+/)||[a];k=Nb(f,1);n=k[0];p=System.get("@system-env").worker?window.location:document.location;if(q=p.origin!==n)g.headers=Object.assign({},g.headers,{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":a}),a=p.origin;
t.prev=4;t.next=7;return window.fetch(a,g);case 7:r=t.sent;t.next=13;break;case 10:throw t.prev=10,t.t0=t["catch"](4),Error("Cannot reach server at ".concat(a,": ").concat(t.t0.message));case 13:if(r.ok){t.next=15;break}throw Error("Server at ".concat(a,": ").concat(r.statusText));case 15:return t.abrupt("return",r.text());case 16:case "end":return t.stop()}},d,null,[[4,10]])}));return function(g,a){return b.apply(this,arguments)}}()},{key:"basicRemoteEval_node",value:function(){var b=Bb(regeneratorRuntime.mark(function d(g,
a){var f,k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return f=System._nodeRequire("url").parse,k=System._nodeRequire(a.startsWith("https:")?"https":"http"),n=Object.assign({method:g.method||"GET"},f(a)),p.abrupt("return",new Promise(function(q,r){var t=k.request(n,function(w){w.setEncoding("utf8");var x="";w.on("data",function(B){return x+=B});w.on("end",function(){return q(x)});w.on("error",function(B){return r(B)})});t.on("error",function(w){return r(w)});
t.end(g.body)}));case 4:case "end":return p.stop()}},d)}));return function(g,a){return b.apply(this,arguments)}}()}]);return h}(Bk.RemoteEvalStrategy);Bk.HttpEvalStrategy=JG;var KG=function(e){function h(b,c){rd(this,h);var g=l.call(this);g.l2lClient=b;g.targetId=c;return g}gd(h,e);var l=sb(h);Ac(h,[{key:"basicRemoteEval",value:function(){var b=Bb(regeneratorRuntime.mark(function d(g,a){var f,k,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return f=this.l2lClient,
k=this.targetId,q.next=3,f.sendToAndWait(k,"remote-eval",{source:g},{ackTimeout:a.ackTimeout||3500});case 3:return n=q.sent,(p=n.data)&&p.value&&p.value.isEvalResult&&(p=p.value),q.abrupt("return",p);case 7:case "end":return q.stop()}},d,this)}));return function(g,a){return b.apply(this,arguments)}}()}]);return h}(Bk.RemoteEvalStrategy);Bk.L2LEvalStrategy=KG;Bk.EvalStrategy=GG;Bk.SimpleEvalStrategy=HG;Bk.LivelyVmEvalStrategy=IG;Bk.HttpEvalStrategy=JG;Bk.L2LEvalStrategy=KG;var EA=Object.freeze({__proto__:null,
RemoteEvalStrategy:jS,EvalStrategy:GG,SimpleEvalStrategy:HG,LivelyVmEvalStrategy:IG,HttpEvalStrategy:JG,L2LEvalStrategy:KG});Lc("aX",EA);var Rk=window.lively.FreezerRuntime.recorderFor("lively.vm/index.js");Rk.runEval=Br;Rk.syncEval=Gt;Rk.completions=yA;Rk.completions=yA;Rk.globalEval=a2;Rk.esmEval=b2;Rk.defaultTopLevelVarRecorderName=CA;Rk.defaultClassToFunctionConverterName=BA;Rk.evalCodeTransform=Up;Rk.evalCodeTransformOfSystemRegisterSetters=zr;Rk.runEval=Br;Rk.syncEval=Gt;Rk.evalStrategies=EA;
Rk.evalStrategies=EA;var c2=Object.freeze({__proto__:null,completions:yA,defaultTopLevelVarRecorderName:CA,defaultClassToFunctionConverterName:BA,evalCodeTransform:Up,evalCodeTransformOfSystemRegisterSetters:zr,runEval:Br,syncEval:Gt,evalStrategies:EA});Lc("aW",c2);var Vh=window.lively.FreezerRuntime.recorderFor("lively.classes/source-descriptors.js");Vh.string=ji;Vh.arr=mh;Vh.parse=Qj;Vh.query=vs;Vh.runEval=Br;Vh.objMetaSym=Symbol["for"]("lively-object-meta");Vh.moduleSym=Symbol["for"]("lively-module-meta");
Vh.G="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;Vh.descriptorCache=new Map;Vh.localSystem=Vh.G.System;var d2=function(){function e(h,l){rd(this,e);h&&l?this.update(l,h):this.reset()}Ac(e,[{key:"reset",value:function(){this._sourceLocation=null;this._source="";this._ast=null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null}},{key:"update",value:function(h,l){this._moduleSource===
h&&l&&this._sourceLocation&&l.start===this._sourceLocation.start&&l.end===this._sourceLocation.end||(this.reset(),this._moduleSource=h,this._sourceLocation=l)}},{key:"changeSource",value:function(h){var l=this.moduleSource,b=this.sourceLocation,c=b.start;b=b.end;l=l.slice(0,c)+h+l.slice(b);this.update(l,{start:c,end:c+h.length});this._source=h;return this}},{key:"toString",value:function(){var h=Vh.string.truncate(this._source||"NO SOURCE",35).replace(/\n/g,"");return"".concat(this.constructor.name,
"(").concat(h,")")}},{key:"sourceLocation",get:function(){if(!this._sourceLocation)throw Error("_sourceLocation not defined");return this._sourceLocation}},{key:"moduleSource",get:function(){if(!this._moduleSource)throw Error("_moduleSource not defined!");return this._moduleSource}},{key:"moduleAst",get:function(){return this._moduleAst||(this._moduleAst=Vh.parse(this.moduleSource,{withComments:!0}))}},{key:"moduleScope",get:function(){return this._moduleScope||(this._moduleScope=Vh.query.topLevelDeclsAndRefs(this.ast).scope)}},
{key:"moduleImports",get:function(){return this._moduleImports||(this._moduleImports=Vh.query.imports(this.moduleScope))}},{key:"ast",get:function(){if(this._ast)return this._ast;var h=Vh.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===h.type&&(h=h.expression);return this._ast=h}},{key:"source",get:function(){if(this._source)return this._source;var h=this.sourceLocation;return this._source=this.moduleSource.slice(h.start,h.end)}},{key:"type",get:function(){return this.ast.type}},
{key:"declaredAndUndeclaredNames",get:function(){if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var h=this.ast,l=Vh.query.topLevelDeclsAndRefs(this.moduleAst).declaredNames,b=Vh.arr.uniq(this.moduleImports.map(function(g){return g.local})),c=Vh.arr.withoutAll(l,b);h=Vh.arr.withoutAll(Vh.query.findGlobalVarRefs(h).map(function(g){return g.name}),l);return this._declaredAndUndeclaredNames={declaredNames:l,declaredImports:b,localDeclaredNames:c,undeclaredNames:h}}}]);return e}();
Vh.SourceDescriptor=d2;var kS=Lc("a9",function(){function e(h,l){rd(this,e);this.obj=h;this.System=l;this.reset()}Ac(e,null,[{key:"forObjectWithModuleSource",value:function(h,l,b){h=this["for"](h,b);h.ensureSourceDescriptor(h.sourceLocation,l);return h}},{key:"for",value:function(h,l){var b=Vh.descriptorCache.get(h);b||(b=new this(h,l),Vh.descriptorCache.set(h,b));return b}}]);Ac(e,[{key:"reset",value:function(){this._source="";this._ast=this._sourceLocation=null;this._moduleSource="";this._declaredAndUndeclaredNames=
this._moduleImports=this._moduleScope=this._moduleAst=null}},{key:"resetIfChanged",value:function(){var h=this.meta.moduleSource;this._moduleSource&&h&&this._moduleSource!==h&&this.reset()}},{key:"changeSourceSync",value:function(h){var l=this.System;this._basicChangeSource(h);this.module.changeSource(this.moduleSource,{doSave:!0});h=Vh.runEval(h,{sync:!0,targetModule:this.module.id,System:l});if(h.isError)throw h.value;return this}},{key:"changeSource",value:function(){var h=Bb(regeneratorRuntime.mark(function c(b){var g=
this,a;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return a=this.module,d.next=3,a.changeSourceAction(function(f){if(f!==g.moduleSource)throw Error("source of module ".concat(a.id," and source of ").concat(g," don't match"));g._basicChangeSource(b);return g.moduleSource});case 3:return d.abrupt("return",this);case 4:case "end":return d.stop()}},c,this)}));return function(b){return h.apply(this,arguments)}}()},{key:"_modifiedSource",value:function(h){var l=this.moduleSource,
b=this.sourceLocation,c=b.start;b=b.end;return{moduleSource:l.slice(0,c)+h+l.slice(b),sourceLocation:{start:c,end:c+h.length}}}},{key:"_renamedSource",value:function(h){var l=this.ast,b=l.type,c=l.id;l=c.start;c=c.end;if("ClassDeclaration"!==b)throw Error("Don't know how to rename ".concat(b));return this._modifiedSource(this.source.slice(0,l)+h+this.source.slice(c))}},{key:"_basicChangeSource",value:function(h){var l=this.meta,b=this._modifiedSource(h),c=b.moduleSource;b=b.sourceLocation;this.reset();
this.meta=Object.assign({},l,{moduleSource:c},b);this._sourceLocation=b;this._moduleSource=c;this._source=h;return this}},{key:"toString",value:function(){var h=Vh.string.truncate(this.source||String(this.obj),35).replace(/\n/g,"");try{var l=this.module.shortName()}catch(b){l="NO MODULE!"}return"".concat(this.constructor.name,"(").concat(h," in ").concat(l,")")}},{key:"System",get:function(){return this._System||Vh.localSystem},set:function(h){this._System=h}},{key:"module",get:function(){var h=this.obj,
l=this.System;if(!h[Vh.moduleSym])throw Error("runtime object of source descriptor has no module data");var b=h[Vh.moduleSym];h=b["package"].name;b=b.pathInPackage;h=b.includes("://")?b:h+"/"+b;l=this.System._scripting.module(l,h);l._frozenModule||l._source||!this.moduleSource||l.setSource(this.moduleSource);return l}},{key:"meta",get:function(){var h=this.obj;if(!h[Vh.objMetaSym])throw Error("runtime object of source descriptor has no lively meta data");return h[Vh.objMetaSym]},set:function(h){this.obj[Vh.objMetaSym]=
h;h.hasOwnProperty("start")&&h.hasOwnProperty("end")&&(this._sourceLocation={start:h.start,end:h.end});h.hasOwnProperty("moduleSource")&&(this._moduleSource=h.moduleSource)}},{key:"sourceLocation",get:function(){this.resetIfChanged();if(this._sourceLocation)return this._sourceLocation;var h=this.meta,l=h.start;h=h.end;if(void 0===l||void 0===h)throw Error("lively meta data has no start/end");return this._sourceLocation={start:l,end:h}}},{key:"moduleSource",get:function(){this.resetIfChanged();if(this._moduleSource)return this._moduleSource;
var h=this.meta.moduleSource;if(void 0===h)throw Error("lively meta data has no moduleSource");return this._moduleSource=h}},{key:"moduleAst",get:function(){this.resetIfChanged();return this._moduleAst||(this._moduleAst=Vh.parse(this.moduleSource,{withComments:!0}))}},{key:"moduleScope",get:function(){this.resetIfChanged();return this._moduleScope||(this._moduleScope=Vh.query.topLevelDeclsAndRefs(this.moduleAst).scope)}},{key:"moduleImports",get:function(){this.resetIfChanged();return this._moduleImports||
(this._moduleImports=Vh.query.imports(this.moduleScope))}},{key:"declaredAndUndeclaredNames",get:function(){this.resetIfChanged();if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var h=this.ast,l=Vh.query.topLevelDeclsAndRefs(this.moduleAst,{jslintGlobalComment:!0}).declaredNames,b=Vh.arr.uniq(this.moduleImports.map(function(g){return g.local})),c=Vh.arr.withoutAll(l,b);h=Vh.arr.withoutAll(Vh.query.findGlobalVarRefs(h).map(function(g){return g.name}),l);return this._declaredAndUndeclaredNames=
{declaredNames:l,declaredImports:b,localDeclaredNames:c,undeclaredNames:h}}},{key:"source",get:function(){this.resetIfChanged();if(this._source)return this._source;var h=this.sourceLocation;return this._source=this.moduleSource.slice(h.start,h.end)}},{key:"ast",get:function(){this.resetIfChanged();if(this._ast)return this._ast;var h=Vh.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===h.type&&(h=h.expression);return this._ast=h}},{key:"type",get:function(){return this.ast.type}},
{key:"name",get:function(){if("ClassDeclaration"===this.type){var h=this.ast.id;return this.source.slice(h.start,h.end)}return"unknown"}}]);return e}());Vh.RuntimeSourceDescriptor=kS;var Jg=window.lively.FreezerRuntime.recorderFor("lively.classes/util.js");Jg.superclasses=Uv;Jg.getClassHierarchy=Cr;Jg.withSuperclasses=sc;Jg.inheritsFrom=Uc;Jg.changeClass=Cd;Jg.isClass=de;Jg.isOverridden=function(e,h){for(;e!=Object;)if(e=e[Symbol["for"]("lively-instance-superclass")],e.prototype.hasOwnProperty(h))return!0;
return!1};Jg.lexicalClassMembers=se;Jg.runtimeClassMembers=Ke;Jg.runtimeClassMembersInProtoChain=function(e){return Jg.arr.uniq(Jg.arr.without(Jg.withSuperclasses(e),Object).flatMap(function(h){return Jg.runtimeClassMembers(h)}))};Jg.runtimeNonStaticMembers=function(e){var h=e.prototype,l=Jg.obj.getOwnPropertyDescriptors(h);return Jg.arr.withoutAll(Object.keys(l),["constructor"]).map(function(b){var c=l[b],g="function"===typeof c.value?"method":"get"in c?"get":"set"in c?"set":"unknown";return{"static":!1,
name:b,value:"method"===g?c.value:"get"===g?c.get:"set"===g?c.set:null,kind:g,owner:h}})};Jg.runtimeNonstaticClassMembersInProtoChain=function(e){return Jg.arr.uniq(Jg.arr.without(Jg.withSuperclasses(e),Object).flatMap(function(h){return Jg.runtimeNonStaticMembers(h)}))};Jg.runtimeStaticClassMembers=Yf;Jg.runtimeStaticClassMembersInProtoChain=Bg;Jg.arr=mh;Jg.obj=nh;Jg.Path=Nh;Jg.RuntimeSourceDescriptor=kS;Jg.superclasses=Uv;var FA=Symbol["for"]("lively-instance-initialize");Jg.initializeSymbol=FA;
Jg.initializeSymbol=FA;var LG=Symbol["for"]("lively-instance-restorer");Jg.instanceRestorerSymbol=LG;Jg.instanceRestorerSymbol=LG;var GA=Symbol["for"]("lively-instance-superclass");Jg.superclassSymbol=GA;Jg.superclassSymbol=GA;var HA=Symbol["for"]("lively-module-meta");Jg.moduleMetaSymbol=HA;Jg.moduleMetaSymbol=HA;var IA=Symbol["for"]("lively-object-meta");Jg.objMetaSymbol=IA;Jg.objMetaSymbol=IA;var JA=Symbol["for"]("lively-klass-changes-subscriber");Jg.moduleSubscribeToToplevelChangesSym=JA;Jg.moduleSubscribeToToplevelChangesSym=
JA;Jg.getClassHierarchy=Cr;Jg.withSuperclasses=sc;Jg.inheritsFrom=Uc;Jg.changeClass=Cd;Jg.isClass=de;Jg.lexicalClassMembers=se;Jg.runtimeClassMembers=Ke;Jg.runtimeStaticClassMembers=Yf;Jg.runtimeStaticClassMembersInProtoChain=Bg;var MG=Lc("aa",function(){function e(a){return a.replace(g,function(d,f){return f[f.length-1].toUpperCase()})}var h="break case catch class const continue debugger default delete do else enum export extends false finally for function if implements import in instanceof interface let new null package private protected public return static switch super this throw true try typeof undefined var void while with yield".split(" "),
l={"~":"_tilde_","`":"_backtick_","!":"_exclamationmark_","@":"_at_","#":"_pound_","%":"_percent_","^":"_carat_","&":"_amperstand_","*":"_asterisk_","(":"_leftparen_",")":"_rightparen_","+":"_plus_","=":"_equals_","{":"_leftcurly_","}":"_rightcurly_","[":"_leftsquare_","]":"_rightsquare_","|":"_pipe_","-":"_dash_","\\":"_backslash_",'"':"_doublequote_","'":"_singlequote_",":":"_colon_",";":"_semicolon_","<":"_leftangle_",">":"_rightangle_",",":"_comma_",".":"_period_","?":"_questionmark_","/":"_forwardslash_",
"\t":"_tab_","\n":"_newline_","\r":"_carriagereturn_"},b={0:"_zero_",1:"_one_",2:"_two_",3:"_three_",4:"_four_",5:"_five_",6:"_siz_",7:"_seven_",8:"_eight_",9:"_nine_"},c=function(a){return l[a]||"ASCII_"+a.charCodeAt(0)},g=/([\s-]+.)/g;return function(a){a=e(a);return 0<=h.indexOf(a)?a:0===a.length?"_null_":a.replace(/^\d/,function(d){return b[d]}).replace(/[^\w\$_]/g,c)}}());Jg.toJsIdentifier=MG;Jg.toJsIdentifier=MG;var mX=Object.freeze({__proto__:null,superclasses:Uv,initializeSymbol:FA,instanceRestorerSymbol:LG,
superclassSymbol:GA,moduleMetaSymbol:HA,objMetaSymbol:IA,moduleSubscribeToToplevelChangesSym:JA,getClassHierarchy:Cr,withSuperclasses:sc,inheritsFrom:Uc,changeClass:Cd,isClass:de,lexicalClassMembers:se,runtimeClassMembers:Ke,runtimeStaticClassMembers:Yf,runtimeStaticClassMembersInProtoChain:Bg,toJsIdentifier:MG}),Th=window.lively.FreezerRuntime.recorderFor("lively.classes/properties.js");Th.hasManagedProperties=function(e){return e.hasOwnProperty(Th.defaultPropertiesKey)};Th.prepareClassForManagedPropertiesAfterCreation=
ui;Th.prepareClassForProperties=function(e,h,l){Th.ensurePropertyInitializer(e);var b=h.valueStoreProperty,c=h.defaultGetter,g=h.defaultSetter,a=e.prototype;Object.keys(l).forEach(function(d){var f=l[d],k=a.hasOwnProperty(d)&&a.__lookupGetter__(d);if(!k||k._wasGenerated)k=f.get||"function"===typeof c&&function(){return c.call(this,d)}||function(){return this[b][d]},k._wasGenerated=!0,a.__defineGetter__(d,k);k=a.hasOwnProperty(d)&&a.__lookupSetter__(d);if(!k||k._wasGenerated)if(f.hasOwnProperty("set")||
!f.readOnly)f=f.set||"function"===typeof g&&function(n){g.call(this,d,n)}||function(n){this[b][d]=n},f._wasGenerated=!0,a.__defineSetter__(d,f)})};Th.ensurePropertyInitializer=function(e){Object.defineProperty(e.prototype,"propertiesAndPropertySettings",{enumerable:!1,configurable:!0,writable:!0,value:function(){var h=this.constructor,l=h[Th.propertiesAndSettingsCacheSym];if(l)if(l.classHierarchy!=Th.getClassHierarchy(h)){var b=Th.propertiesAndSettingsInHierarchyOf(h);l=b.properties;b=b.propertySettings;
h[Th.propertiesAndSettingsCacheSym]={properties:l,propertySettings:b,order:Th.obj.sortKeysWithBeforeAndAfterConstraints(l),classHierarchy:Th.getClassHierarchy(h)};Th.prepareClassForProperties(h,b,l)}else return l;return h[Th.propertiesAndSettingsCacheSym]||Th.propertiesAndSettingsInHierarchyOf(h)}});Object.defineProperty(e.prototype,"initializeProperties",{enumerable:!1,configurable:!0,writable:!0,value:function(h){var l=this.propertiesAndPropertySettings();Th.prepareInstanceForProperties(this,l.propertySettings,
l.properties,h,l.order);return this}});Object.defineProperty(e.prototype,"defaultProperties",{configurable:!0,get:function(){var h=e[Symbol["for"]("lively-instance-superclass")];if(!e[Th.defaultPropertiesCacheSym]||e[Th.defaultPropertiesCacheSym]==(h&&h[Th.defaultPropertiesCacheSym])){h=e[Th.defaultPropertiesCacheSym]={};var l=this.propertiesAndPropertySettings().properties,b;for(b in l){var c=l[b];c.hasOwnProperty("defaultValue")&&(c=c.defaultValue,Array.isArray(c)&&(c=c.slice()),h[b]=c)}}return e[Th.defaultPropertiesCacheSym]}})};
Th.propertiesAndSettingsInHierarchyOf=function(e){for(var h=Object.assign({},Th.defaultPropertySettings),l={},b=Th.obj.valuesInPropertyHierarchy(e,"propertySettings"),c=Th.obj.valuesInPropertyHierarchy(e,"properties"),g=0;g<b.length;g++){var a=b[g];a&&"object"===Jc(a)&&Object.assign(h,a)}for(g=0;g<c.length;g++)if(b=c[g],"object"!==Jc(b))console.error("[initializeProperties] ".concat(e," encountered property declaration ")+"that is not a JS object: ".concat(b));else for(var d in b)l.hasOwnProperty(d)?
Object.assign(l[d],b[d]):l[d]=b[d];return{properties:l,propertySettings:h}};Th.prepareInstanceForProperties=function(e,h,l,b,c){var g=h.valueStoreProperty;c=c||Th.obj.sortKeysWithBeforeAndAfterConstraints(l);h=[];var a={};"undefined"===typeof e[g]&&(e[g]={});for(var d=0;d<c.length;d++){var f=c[d],k=l[f],n=k.derived,p=!!k.foldable,q="undefined"!==typeof k.defaultValue?k.defaultValue:void 0;Array.isArray(q)&&(q=q.slice());n||p||(e[g][f]=q);var r=void 0;"undefined"!==typeof k.initialize?(r=a[f]={initialize:q},
h.push(f)):n&&void 0!==q?(r=a[f]={derived:q},h.push(f)):p&&void 0!==q&&(r=a[f]={folded:q},h.push(f));b&&f in b&&(k.readOnly?console.warn("Trying to initialize read-only property ".concat(f," in ").concat(e,", ")+"skipping setting value"):(r||(r=a[f]={},h.push(f)),r.value=b[f]))}for(d=0;d<h.length;d++)b=h[d],c=a[b],g=c.hasOwnProperty("value"),c.hasOwnProperty("initialize")?(l[b].initialize.call(e,g?c.value:c.initialize),g&&(e[b]=c.value)):c.hasOwnProperty("derived")?e[b]=g?c.value:c.derived:c.hasOwnProperty("folded")?
e[b]=g?c.value:c.folded:g&&(e[b]=c.value)};Th.obj=nh;Th.getClassHierarchy=Cr;Th.defaultPropertiesSettingKey="propertySettings";Th.defaultPropertiesKey="properties";Th.defaultInstanceInitializerMethod="initializeProperties";Th.propertiesAndSettingsCacheSym=Symbol["for"]("lively.classes-properties-and-settings");Th.defaultPropertiesCacheSym=Symbol["for"]("lively.classes-default-properties");Th.defaultPropertySettings={defaultSetter:null,defaultGetter:null,valueStoreProperty:"_state"};Th.prepareClassForManagedPropertiesAfterCreation=
ui;var Qg=window.lively.FreezerRuntime.recorderFor("lively.classes/runtime.js");Qg.setSuperclass=rj;Qg.installValueDescriptor=function(e,h,l){l=Object.assign(l,Qg.defaultPropertyDescriptorForValue);l.value.displayName=l.key;if(l.needsDeclaringClass){var b=l.value.originalFunction||l.value;l.value=Object.assign(function(){return b.call.apply(b,[this,h].concat(Array.prototype.slice.call(arguments)))},{originalFunction:b,toString:function(){return b.toString()},displayName:l.key})}Object.defineProperty(e,
l.key,l)};Qg.installGetterSetterDescriptor=function(e,h){h=Object.assign(h,Qg.defaultPropertyDescriptorForGetterSetter);Object.defineProperty(e,h.key,h)};Qg.installMethods=function(e,h,l){l&&l.forEach(function(a){a.value?Qg.installValueDescriptor(e,e,a):Qg.installGetterSetterDescriptor(e,a)});h&&h.forEach(function(a){a.value?Qg.installValueDescriptor(e.prototype,e,a):Qg.installGetterSetterDescriptor(e.prototype,a)});if(e.prototype[Qg.initializeSymbol]){var b=Object.getOwnPropertySymbols(e.prototype).includes(Qg.initializeSymbol),
c=h.find(function(a){return a.key==Qg.initializeSymbol});b&&(b=e[Qg.superclassSymbol].prototype[Qg.initializeSymbol],e.prototype[Qg.initializeSymbol].isDefaultInitializer&&b?delete e.prototype[Qg.initializeSymbol]:c||(b?delete e.prototype[Qg.initializeSymbol]:e.prototype[Qg.initializeSymbol]=function(){}))}else Object.defineProperty(e.prototype,Qg.initializeSymbol,{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),e.prototype[Qg.initializeSymbol].isDefaultInitializer=!0,e.prototype[Qg.initializeSymbol].displayName=
"lively-initialize";h=h.map(function(a){return a.key}).concat(["constructor","arguments","caller"]);c=Object.getOwnPropertyNames(e.prototype);for(b=0;b<c.length;b++){var g=c[b];h.includes(g)||delete e.prototype[g]}l=l.map(function(a){return a.key}).concat(["length","name","prototype","arguments","caller"]);h=Object.getOwnPropertyNames(e);for(c=0;c<h.length;c++)b=h[c],l.includes(b)||delete e[b]};Qg.ensureInitializeStub=function(e){e===Object||e.prototype[Qg.initializeSymbol]||(Object.defineProperty(e.prototype,
Qg.initializeSymbol,{enumerable:!1,configurable:!0,writable:!0,value:function(){e.apply(this,arguments)}}),e.prototype[Qg.initializeSymbol].displayName="lively-initialize-stub")};Qg.initializeClass=ie;Qg.prepareClassForManagedPropertiesAfterCreation=ui;Qg.superclassSymbol=GA;Qg.moduleSubscribeToToplevelChangesSym=JA;Qg.moduleMetaSymbol=HA;Qg.objMetaSymbol=IA;Qg.initializeSymbol=FA;Qg.setPrototypeOf=iG;Qg.constructorArgMatcher=/\([^\\)]*\)/;Qg.defaultPropertyDescriptorForGetterSetter={enumerable:!1,
configurable:!0};Qg.defaultPropertyDescriptorForValue={enumerable:!1,configurable:!0,writable:!0};Qg.setSuperclass=rj;Qg.initializeClass=ie;Qg.initializeClass._get=function c(h,l,b){null===h&&(h=Function.prototype);var g=Object.getOwnPropertyDescriptor(h,l);if(void 0===g)return h=Object.getPrototypeOf(h),null===h?void 0:c(h,l,b);if("value"in g)return g.value;l=g.get;return void 0===l?void 0:l.call(b)};Qg.initializeClass._set=function a(l,b,c,g){var d=Object.getOwnPropertyDescriptor(l,b);void 0===
d?(l=Object.getPrototypeOf(l),null!==l&&a(l,b,c,g)):"value"in d&&d.writable?d.value=c:(b=d.set,void 0!==b&&b.call(g,c));return c};var e2=Object.freeze({__proto__:null,setSuperclass:rj,initializeClass:ie,adoptObject:void 0});Lc("an",e2);var Me=window.lively.FreezerRuntime.recorderFor("lively.graphics/color-parser.js");Me.parse=Dr;Me.Color=function(l){this._listeners={};this.subscribe(Me.Events.RGB_UPDATED,this._RGBUpdated);this.subscribe(Me.Events.HEX_UPDATED,this._HEXUpdated);this.subscribe(Me.Events.HSL_UPDATED,
this._HSLUpdated);this.subscribe(Me.Events.HSV_UPDATED,this._HSVUpdated);this.subscribe(Me.Events.INT_UPDATED,this._INTUpdated);this.parse(l)};Me.parse=Dr;Me.Events={RGB_UPDATED:"RGBUpdated",HSL_UPDATED:"HSLUpdated",HSV_UPDATED:"HSVUpdated",HEX_UPDATED:"HexUpdated",INT_UPDATED:"IntUpdated",UPDATED:"updated"};Me.namedColors={transparent:"rgba(0, 0, 0, 0)",aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",
blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",
darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",
indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",
limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370D8",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",
orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#D87093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",
springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE"};Me.absround=function(l){return.5+l<<0};Me.hue2rgb=function(l,b,c){0>c&&(c+=1);1<c&&--c;return c<1/6?l+6*(b-l)*c:.5>c?b:c<2/3?l+(b-l)*(2/3-c)*6:l};Me.p2v=function(l){return Me.isPercent.test(l)?Me.absround(2.55*parseInt(l)):l};Me.isHex=/^#?([0-9a-f]{3}|[0-9a-f]{6})$/i;Me.isHSL=/^hsla?\((\d{1,3}?),\s*(\d{1,3}%),\s*(\d{1,3}%)(,\s*[01]?\.?\d*)?\)$/;Me.isRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*[01]?\.?\d*)?\)$/;
Me.isPercent=/^\d+(\.\d+)*%$/;Me.hexBit=/([0-9a-f])/gi;Me.leadHex=/^#/;Me.matchHSL=/^hsla?\((\d{1,3}),\s*(\d{1,3})%,\s*(\d{1,3})%(,\s*([01]?\.?\d*))?\)$/;Me.matchRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*([01]?\.?\d*))?\)$/;Me.Color.prototype._decimal=0;Me.Color.prototype._hex="#000000";Me.Color.prototype._red=0;Me.Color.prototype._green=0;Me.Color.prototype._blue=0;Me.Color.prototype._hue=0;Me.Color.prototype._saturation=0;Me.Color.prototype._lightness=0;Me.Color.prototype._brightness=
0;Me.Color.prototype._alpha=1;Me.Color.prototype.parse=function(l){if("undefined"===typeof l)return this;switch(!0){case isFinite(l):this.decimal(l);this.output=Me.Color.INT;break;case l instanceof Me.Color:this.copy(l);break;default:switch(Jc(l)){case "object":this.set(l);break;case "string":switch(!0){case Me.namedColors.hasOwnProperty(l):l=Me.namedColors[l];l=l.replace(Me.leadHex,"");this.decimal(parseInt(l,16));break;case Me.isHex.test(l):l=l.replace(Me.leadHex,"");3==l.length&&(l=l.replace(Me.hexBit,
"$1$1"));this.decimal(parseInt(l,16));break;case Me.isRGB.test(l):l=l.match(Me.matchRGB);this.red(Me.p2v(l[1]));this.green(Me.p2v(l[2]));this.blue(Me.p2v(l[3]));this.alpha(parseFloat(l[5])||1);this.output=(Me.isPercent.test(l[1])?2:1)+(l[5]?2:0);break;case Me.isHSL.test(l):l=l.match(Me.matchHSL),this.hue(parseInt(l[1])),this.saturation(parseInt(l[2])),this.lightness(parseInt(l[3])),this.alpha(parseFloat(l[5])||1),this.output=l[5]?6:5}}}return this};Me.Color.prototype.clone=function(){return new Me.Color(this.decimal())};
Me.Color.prototype.copy=function(l){this.set(l.decimal());return this};Me.Color.prototype.set=function(l,b){if(1==arguments.length)if("object"===Jc(l))for(var c in l){if("function"===typeof this[c])this[c](l[c])}else isFinite(l)&&this.decimal(l);else if("function"===typeof this[l])this[l](b);return this};Me.Color.prototype.interpolate=function(l,b){l instanceof Me.Color||(l=new Me.Color(l));this._red=Me.absround(+this._red+(l._red-this._red)*b);this._green=Me.absround(+this._green+(l._green-this._green)*
b);this._blue=Me.absround(+this._blue+(l._blue-this._blue)*b);this._alpha=Me.absround(+this._alpha+(l._alpha-this._alpha)*b);this.broadcast(Me.Events.RGB_UPDATED);this.broadcast(Me.Events.UPDATED);return this};Me.Color.prototype._RGB2HSL=function(){var l=this._red/255,b=this._green/255,c=this._blue/255,g=Math.max(l,b,c),a=Math.min(l,b,c),d=(g+a)/2;if(g==a)this._saturation=this._hue=0;else{var f=g-a;a=f/(.5>=d?g+a:2-g-a);this._hue=Me.absround((g==l?(b-c)/f+(b<c?6:0):g==b?(c-l)/f+2:(l-b)/f+4)/6*360);
this._saturation=Me.absround(100*a)}this._lightness=Me.absround(100*d);this._brightness=Me.absround(100*g)};Me.Color.prototype._HSL2RGB=function(){var l=this._hue/360,b=this._saturation/100,c=this._lightness/100;b=.5>c?c*(1+b):c+b-c*b;c=2*c-b;this._red=Me.absround(255*Me.hue2rgb(c,b,l+1/3));this._green=Me.absround(255*Me.hue2rgb(c,b,l));this._blue=Me.absround(255*Me.hue2rgb(c,b,l-1/3))};Me.Color.prototype._HSV2RGB=function(){var l=this._hue/360,b=this._saturation/100,c=this._brightness/100,g=0,a=
0,d=0,f=Math.floor(6*l),k=6*l-f;l=c*(1-b);var n=c*(1-k*b);b=c*(1-(1-k)*b);switch(f%6){case 0:g=c;a=b;d=l;break;case 1:g=n;a=c;d=l;break;case 2:g=l;a=c;d=b;break;case 3:g=l;a=n;d=c;break;case 4:g=b;a=l;d=c;break;case 5:g=c,a=l,d=n}this._red=Me.absround(255*g);this._green=Me.absround(255*a);this._blue=Me.absround(255*d)};Me.Color.prototype._INT2HEX=function(){var l=this._decimal.toString(16);l="000000".substr(0,6-l.length)+l;this._hex="#"+l.toUpperCase()};Me.Color.prototype._INT2RGB=function(){this._red=
this._decimal>>16;this._green=this._decimal>>8&255;this._blue=this._decimal&255};Me.Color.prototype._HEX2INT=function(){this._decimal=parseInt(this._hex,16)};Me.Color.prototype._RGB2INT=function(){this._decimal=this._red<<16|this._green<<8&65535|this._blue};Me.Color.prototype._RGBUpdated=function(){this._RGB2INT();this._RGB2HSL();this._INT2HEX()};Me.Color.prototype._HSLUpdated=function(){this._HSL2RGB();this._RGB2INT();this._INT2HEX()};Me.Color.prototype._HSVUpdated=function(){this._HSV2RGB();this._RGB2INT();
this._INT2HEX()};Me.Color.prototype._HEXUpdated=function(){this._HEX2INT();this._INT2RGB();this._RGB2HSL()};Me.Color.prototype._INTUpdated=function(){this._INT2RGB();this._RGB2HSL();this._INT2HEX()};Me.Color.prototype._broadcastUpdate=function(){this.broadcast(Me.Events.UPDATED)};Me.Color.prototype.decimal=function(l){return this._handle("_decimal",l,Me.Events.INT_UPDATED)};Me.Color.prototype.hex=function(l){return this._handle("_hex",l,Me.Events.HEX_UPDATED)};Me.Color.prototype.red=function(l){return this._handle("_red",
l,Me.Events.RGB_UPDATED)};Me.Color.prototype.green=function(l){return this._handle("_green",l,Me.Events.RGB_UPDATED)};Me.Color.prototype.blue=function(l){return this._handle("_blue",l,Me.Events.RGB_UPDATED)};Me.Color.prototype.hue=function(l){return this._handle("_hue",l,Me.Events.HSL_UPDATED)};Me.Color.prototype.saturation=function(l){return this._handle("_saturation",l,Me.Events.HSL_UPDATED)};Me.Color.prototype.lightness=function(l){return this._handle("_lightness",l,Me.Events.HSL_UPDATED)};Me.Color.prototype.brightness=
function(l){return this._handle("_brightness",l,Me.Events.HSV_UPDATED)};Me.Color.prototype.alpha=function(l){return this._handle("_alpha",l)};Me.Color.prototype._handle=function(l,b,c){"undefined"!==typeof this[l]&&"undefined"!==typeof b&&(b!=this[l]&&(this[l]=b,c&&this.broadcast(c)),this.broadcast(Me.Events.UPDATED));return this[l]};Me.Color.prototype.getHex=function(){return this._hex};Me.Color.prototype.getRGB=function(){return"rgb("+[Me.absround(this._red),Me.absround(this._green),Me.absround(this._blue)].join(", ")+
")"};Me.Color.prototype.getPRGB=function(){return"rgb("+[Me.absround(100*this._red/255)+"%",Me.absround(100*this._green/255)+"%",Me.absround(100*this._blue/255)+"%"].join(", ")+")"};Me.Color.prototype.getRGBA=function(){return"rgba("+[Me.absround(this._red),Me.absround(this._green),Me.absround(this._blue),this._alpha].join(", ")+")"};Me.Color.prototype.getPRGBA=function(){return"rgba("+[Me.absround(100*this._red/255)+"%",Me.absround(100*this._green/255)+"%",Me.absround(100*this._blue/255)+"%",this._alpha].join(", ")+
")"};Me.Color.prototype.getHSL=function(){return"hsl("+[Me.absround(this._hue),Me.absround(this._saturation)+"%",Me.absround(this._lightness)+"%"].join(", ")+")"};Me.Color.prototype.getHSLA=function(){return"hsla("+[Me.absround(this._hue),Me.absround(this._saturation)+"%",Me.absround(this._lightness)+"%",this._alpha].join(", ")+")"};Me.Color.prototype.format=function(l){var b={r:this._red,g:this._green,b:this._blue,h:this._hue,s:this._saturation,l:this._lightness,v:this._brightness,a:this._alpha,
x:this._hex,d:this._decimal},c;for(c in b)l=l.split("%"+c+"%").join(b[c]);return l};Me.Color.prototype.output=0;Me.Color.HEX=0;Me.Color.RGB=1;Me.Color.PRGB=2;Me.Color.RGBA=3;Me.Color.PRGBA=4;Me.Color.HSL=5;Me.Color.HSLA=6;Me.Color.INT=7;Me.Color.prototype.toString=function(){switch(this.output){case 1:return this.getRGB();case 2:return this.getPRGB();case 3:return this.getRGBA();case 4:return this.getPRGBA();case 5:return this.getHSL();case 6:return this.getHSLA();case 7:return this._decimal}return this.getHex()};
Me.Color.prototype._listeners=null;Me.Color.prototype._isSubscribed=function(l){return null!=this._listeners[l]};Me.Color.prototype.subscribe=function(l,b){this._isSubscribed(l)||(this._listeners[l]=[]);this._listeners[l].push(b)};Me.Color.prototype.unsubscribe=function(l,b){if(this._isSubscribed(l))for(var c=this._listeners[l],g=0,a=c.length;g<a;g++)if(c[g]===b)return c.splice(g,1),this.unsubscribe(l,b)};Me.Color.prototype.broadcast=function(l,b){if(this._isSubscribed(l)){l=this._listeners[l];for(var c=
l.length,g=0;g<c;g++)l[g].apply(this,b)}};Me.Color.prototype.tween=function(l,b){b instanceof Me.Color||(b=new Me.Color(b));var c=+new Date,g=this;this.broadcast("tweenStart");var a=setInterval(function(){var d=Math.min(1,(+new Date-c)/l);g.interpolate(b,d);g.broadcast("tweenProgress");1==d&&(clearInterval(a),g.broadcast("tweenComplete"))},20);return a};Me.Color.prototype.bind=function(l,b){var c=this;this.subscribe("updated",function(){l[b]=c.toString()})};Me.Color.random=function(){return new Me.Color(Me.absround(16777215*
Math.random()))};Me.Color.bind=function(l,b){var c=new Me.Color(l[b]);c.bind(l,b);return c};var qi=window.lively.FreezerRuntime.recorderFor("lively.graphics/convert-css-length.js");qi.parseUnit=function(l,b){b||(b=[0,""]);l=String(l);var c=parseFloat(l,10);b[0]=c;b[1]=l.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return b};qi.unit=function(l){return qi.parseUnit(l)[1]};qi.unitLess=function(l){return qi.parseUnit(l)[0]};qi.genericCssLengthParser=NI;qi.cssLengthToPixels=LB;qi.baseFontSize="16px";if("undefined"!==
typeof System&&System.get("@system-env").browser)try{qi.newBaseFontSize=qi.genericCssLengthParser(qi.baseFontSize)(window.getComputedStyle(document.body).fontSize),qi.newBaseFontSize&&"NaN"!==qi.newBaseFontSize.slice(0,3)&&(qi.baseFontSize=qi.newBaseFontSize)}catch(l){}qi.genericCssLengthParser=NI;var lS=qi.genericCssLengthParser(qi.baseFontSize);qi.parseCssLength=lS;qi.parseCssLength=lS;qi.cssLengthToPixels=LB;var Xe=window.lively.FreezerRuntime.recorderFor("lively.graphics/geometry-2d.js");Xe.rect=
Bm;Xe.pt=Ij;Xe.num=Yk;Xe.string=ji;Xe.grid=pA;Xe.cssLengthToPixels=LB;var ws=Lc("aQ",function(){function l(b,c){rd(this,l);this.x=b||0;this.y=c||0}Ac(l,null,[{key:"ensure",value:function(b){return b&&b.isPoint?b:new Xe.Point(b.x,b.y)}},{key:"polar",value:function(b,c){return new Xe.Point(b*Math.cos(c),b*Math.sin(c))}},{key:"random",value:function(b){return new Xe.Point(Xe.num.randomSmallerInteger(b.x),Xe.num.randomSmallerInteger(b.y))}},{key:"fromLiteral",value:function(b){return Xe.pt(b.x,b.y)}},
{key:"fromTuple",value:function(b){return Xe.pt(b[0],b[1])}}]);Ac(l,[{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"toFixed",value:function(b){return new Xe.Point(this.x.toFixed(b),this.y.toFixed(b))}},{key:"addPt",value:function(b){return new Xe.Point(this.x+b.x,this.y+b.y)}},{key:"addXY",value:function(b,c){return new Xe.Point(this.x+b,this.y+c)}},{key:"midPt",value:function(b){return new Xe.Point((this.x+b.x)/2,(this.y+b.y)/2)}},{key:"subPt",value:function(b){return new Xe.Point(this.x-
b.x,this.y-b.y)}},{key:"subXY",value:function(b,c){return new Xe.Point(this.x-b,this.y-c)}},{key:"scaleBy",value:function(b,c){return new Xe.Point(this.x*b,this.y*(c||b))}},{key:"scaleByPt",value:function(b){return new Xe.Point(this.x*b.x,this.y*b.y)}},{key:"negated",value:function(){return new Xe.Point(-this.x,-this.y)}},{key:"inverted",value:function(){return new Xe.Point(1/this.x,1/this.y)}},{key:"invertedSafely",value:function(){return new Xe.Point(this.x&&1/this.x,this.y&&1/this.y)}},{key:"lessPt",
value:function(b){return this.x<b.x&&this.y<b.y}},{key:"leqPt",value:function(b){return this.x<=b.x&&this.y<=b.y}},{key:"eqPt",value:function(b){return this.x==b.x&&this.y==b.y}},{key:"equals",value:function(b){return this.x==b.x&&this.y==b.y}},{key:"withX",value:function(b){return Xe.pt(b,this.y)}},{key:"withY",value:function(b){return Xe.pt(this.x,b)}},{key:"copy",value:function(){return new Xe.Point(this.x,this.y)}},{key:"minPt",value:function(b,c){c||(c=new Xe.Point(0,0));c.x=Math.min(this.x,
b.x);c.y=Math.min(this.y,b.y);return c}},{key:"maxPt",value:function(b,c){c||(c=new Xe.Point(0,0));c.x=Math.max(this.x,b.x);c.y=Math.max(this.y,b.y);return c}},{key:"random",value:function(){return Xe.Point.random(this)}},{key:"normalized",value:function(){var b=this.r();return Xe.pt(this.x/b,this.y/b)}},{key:"fastNormalized",value:function(){var b=this.fastR();return Xe.pt(this.x/b,this.y/b)}},{key:"dotProduct",value:function(b){return this.x*b.x+this.y*b.y}},{key:"matrixTransform",value:function(b,
c){var g=b.a*this.x+b.c*this.y+b.e;b=b.b*this.x+b.d*this.y+b.f;return c?Object.assign(c,{x:g,y:b}):Xe.pt(g,b)}},{key:"matrixTransformDirection",value:function(b,c){var g=b.a*this.x+b.c*this.y;b=b.b*this.x+b.d*this.y;return c?Object.assign(c,{x:g,y:b}):Xe.pt(g,b)}},{key:"griddedBy",value:function(b){return Xe.pt(this.x-this.x%b.x,this.y-this.y%b.y)}},{key:"roundTo",value:function(b){return new Xe.Point(Xe.num.roundTo(this.x,b),Xe.num.roundTo(this.y,b))}},{key:"dist",value:function(b){var c=this.x-
b.x;b=this.y-b.y;return Math.sqrt(c*c+b*b)}},{key:"distSquared",value:function(b){var c=this.x-b.x;b=this.y-b.y;return c*c+b*b}},{key:"nearestPointOnLineBetween",value:function(b,c){if(b.x==c.x)return Xe.pt(b.x,this.y);if(b.y==c.y)return Xe.pt(this.x,b.y);var g=b.x;b=b.y;var a=c.x-g;c=c.y-b;var d=((this.y-b)/a+(this.x-g)/c)/(a/c+c/a);return Xe.pt(g+d*a,b+d*c)}},{key:"interpolate",value:function(b,c){return(2<arguments.length&&void 0!==arguments[2]?arguments[2]:1)?Xe.pt(Xe.num.interpolate(b,this.x,
c.x),Xe.num.interpolate(b,this.y,c.y)):Xe.Point.polar(Xe.num.interpolate(b,this.r(),c.r()),Xe.num.interpolate(b,this.theta(),c.theta()))}},{key:"r",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"fastR",value:function(){for(var b=this.x*this.x+this.y*this.y,c=17,g=0;6>g;g++)c=(c+b/c)/2;return c}},{key:"theta",value:function(){return Math.atan2(this.y,this.x)}},{key:"asRectangle",value:function(){return new Xe.Rectangle(this.x,this.y,0,0)}},{key:"extent",value:function(b){return new Xe.Rectangle(this.x,
this.y,b.x,b.y)}},{key:"extentAsRectangle",value:function(){return new Xe.Rectangle(0,0,this.x,this.y)}},{key:"lineTo",value:function(b){return new Xe.Line(this,b)}},{key:"toTuple",value:function(){return[this.x,this.y]}},{key:"toLiteral",value:function(){return{x:this.x,y:this.y}}},{key:"toString",value:function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1)?Xe.string.format("pt(%1.f,%1.f)",this.x,this.y):Xe.string.format("pt(%10.d,%10.d)",this.x,this.y)}},{key:"inspect",value:function(){return JSON.stringify(this)}},
{key:"__serialize__",value:function(){return{__expr__:this.toString(!1),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}}},{key:"isPoint",get:function(){return!0}}]);return l}());Xe.Point=ws;var vl=Lc("R",function(){function l(b,c,g,a){rd(this,l);this.x=b||0;this.y=c||0;this.width=g||0;this.height=a||0}Ac(l,[{key:"corners",get:function(){return["topLeft","topRight","bottomRight","bottomLeft"]}},{key:"sides",get:function(){return["leftCenter","rightCenter","topCenter","bottomCenter"]}}],[{key:"fromAny",
value:function(b,c){return Xe.rect(b.minPt(c),b.maxPt(c))}},{key:"fromLiteral",value:function(b){return new Xe.Rectangle(b.x,b.y,b.width,b.height)}},{key:"fromTuple",value:function(b){return new Xe.Rectangle(b[0],b[1],b[2],b[3])}},{key:"unionPts",value:function(b){for(var c=b[0],g=b[0],a=1;a<b.length;a++)c=c.minPt(b[a]),g=g.maxPt(b[a]);return Xe.rect(c,g)}},{key:"ensure",value:function(b){return b&&b.isRectangle?b:new Xe.Rectangle(b.x,b.y,b.width,b.height)}},{key:"fromElement",value:function(b){if("function"===
typeof b.getBoundingClientRect){var c=b.getBoundingClientRect();return Xe.rect(c.left,c.top,c.width,c.height)}if("http://www.w3.org/1999/xhtml"==b.namespaceURI){c=Xe.cssLengthToPixels(b.style.left||"0px");var g=Xe.cssLengthToPixels(b.style.top||"0px"),a=Xe.cssLengthToPixels(b.style.width||"0px");b=Xe.cssLengthToPixels(b.style.hieght||"0px");return new Xe.Rectangle(c,g,a,b)}if("http://www.w3.org/2000/svg"==b.namespaceURI)return new Xe.Rectangle(b.x.baseVal.value,b.y.baseVal.value,b.width.baseVal.value,
b.height.baseVal.value);throw Error("Cannot create Rectangle from "+b);}},{key:"inset",value:function(b,c,g,a){void 0===c&&(c=b);void 0===g&&(g=b);void 0===a&&(a=c);return new Xe.Rectangle(b,c,g-b,a-c)}}]);Ac(l,[{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"copy",value:function(){return new Xe.Rectangle(this.x,this.y,this.width,this.height)}},
{key:"toFixed",value:function(b){return new Xe.Rectangle(this.x.toFixed(b),this.y.toFixed(b),this.width.toFixed(b),this.height.toFixed(b))}},{key:"withWidth",value:function(b){return new Xe.Rectangle(this.x,this.y,b,this.height)}},{key:"withHeight",value:function(b){return new Xe.Rectangle(this.x,this.y,this.width,b)}},{key:"withX",value:function(b){return new Xe.Rectangle(b,this.y,this.width,this.height)}},{key:"withY",value:function(b){return new Xe.Rectangle(this.x,b,this.width,this.height)}},
{key:"withExtent",value:function(b){return new Xe.Rectangle(this.x,this.y,b.x,b.y)}},{key:"withTopLeft",value:function(b){return Xe.Rectangle.fromAny(b,this.bottomRight())}},{key:"withTopRight",value:function(b){return Xe.Rectangle.fromAny(this.bottomLeft(),b)}},{key:"withBottomRight",value:function(b){return Xe.Rectangle.fromAny(b,this.topLeft())}},{key:"withBottomLeft",value:function(b){return Xe.Rectangle.fromAny(b,this.topRight())}},{key:"withLeftCenter",value:function(b){return new Xe.Rectangle(b.x,
this.y,this.width+(this.x-b.x),this.height)}},{key:"withRightCenter",value:function(b){return new Xe.Rectangle(this.x,this.y,b.x-this.x,this.height)}},{key:"withTopCenter",value:function(b){return new Xe.Rectangle(this.x,b.y,this.width,this.height+(this.y-b.y))}},{key:"withBottomCenter",value:function(b){return new Xe.Rectangle(this.x,this.y,this.width,b.y-this.y)}},{key:"withCenter",value:function(b){return new Xe.Rectangle(b.x-this.width/2,b.y-this.height/2,this.width,this.height)}},{key:"insetBy",
value:function(b){return new Xe.Rectangle(this.x+b,this.y+b,this.width-2*b,this.height-2*b)}},{key:"insetByPt",value:function(b){return new Xe.Rectangle(this.x+b.x,this.y+b.y,this.width-2*b.x,this.height-2*b.y)}},{key:"grid",value:function(b,c){var g=this.width/c,a=this.height/b;return Xe.grid.mapCreate(b,c,function(d,f){return new Xe.Rectangle(g*f,a*d,g,a)})}},{key:"divide",value:function(b){var c=this;return b.map(function(g){return Xe.rect(c.x+c.width*g.x,c.y+c.height*g.y,c.width*g.width,c.height*
g.height)})}},{key:"toTuple",value:function(){return[this.x,this.y,this.width,this.height]}},{key:"lineTo",value:function(b){var c=this.center(),g=b.center();g=c.lineTo(g);c=this.lineIntersection(g)[0];b=b.lineIntersection(g)[0];return c&&b&&c.lineTo(b)}},{key:"equals",value:function(b){return b?this.x==b.x&&this.y==b.y&&this.width==b.width&&this.height==b.height:!1}},{key:"inspect",value:function(){return JSON.stringify(this)}},{key:"topLeft",value:function(){return new Xe.Point(this.x,this.y)}},
{key:"topRight",value:function(){return new Xe.Point(this.maxX(),this.y)}},{key:"bottomRight",value:function(){return new Xe.Point(this.maxX(),this.maxY())}},{key:"bottomLeft",value:function(){return new Xe.Point(this.x,this.maxY())}},{key:"leftCenter",value:function(){return new Xe.Point(this.x,this.center().y)}},{key:"rightCenter",value:function(){return new Xe.Point(this.maxX(),this.center().y)}},{key:"topCenter",value:function(){return new Xe.Point(this.center().x,this.y)}},{key:"bottomCenter",
value:function(){return new Xe.Point(this.center().x,this.maxY())}},{key:"extent",value:function(){return new Xe.Point(this.width,this.height)}},{key:"center",value:function(){return new Xe.Point(this.x+this.width/2,this.y+this.height/2)}},{key:"topEdge",value:function(){return new Xe.Line(this.topLeft(),this.topRight())}},{key:"bottomEdge",value:function(){return new Xe.Line(this.bottomLeft(),this.bottomRight())}},{key:"leftEdge",value:function(){return new Xe.Line(this.topLeft(),this.bottomLeft())}},
{key:"rightEdge",value:function(){return new Xe.Line(this.topRight(),this.bottomRight())}},{key:"edges",value:function(){return[this.topEdge(),this.rightEdge(),this.bottomEdge(),this.leftEdge()]}},{key:"allPoints",value:function(){for(var b=this.x,c=this.y,g=this.width,a=this.height,d=[],f=c;f<c+a;f++)for(var k=b;k<b+g;k++)d.push(Xe.pt(k,f));return d}},{key:"isNonEmpty",value:function(b){return 0<this.width&&0<this.height}},{key:"containsRect",value:function(b){return this.x<=b.x&&this.y<=b.y&&b.maxX()<=
this.maxX()&&b.maxY()<=this.maxY()}},{key:"intersects",value:function(b){return this.intersection(b).isNonEmpty()}},{key:"containsPoint",value:function(b){return this.x<=b.x&&b.x<=this.x+this.width&&this.y<=b.y&&b.y<=this.y+this.height}},{key:"translatedBy",value:function(b){return new Xe.Rectangle(this.x+b.x,this.y+b.y,this.width,this.height)}},{key:"scaleByRect",value:function(b){return new Xe.Rectangle(this.x+b.x*this.width,this.y+b.y*this.height,b.width*this.width,b.height*this.height)}},{key:"scaleRectIn",
value:function(b){return new Xe.Rectangle((this.x-b.x)/b.width,(this.y-b.y)/b.height,this.width/b.width,this.height/b.height)}},{key:"scaleRectTo",value:function(b){var c,g;this.width>this.height?g=this.width:c=this.height;b=g?b.width/g:b.height/c;return this.withExtent(this.extent().scaleBy(b)).withCenter(this.center())}},{key:"expandBy",value:function(b){return this.insetBy(0-b)}},{key:"translateForInclusion",value:function(b){var c=b.x,g=b.y,a=c+b.width,d=g+b.height;a>this.right()&&(c-=a-this.right());
d>this.bottom()&&(g-=d-this.bottom());c<this.x&&(c=this.x);g<this.y&&(g=this.y);return Xe.rect(c,g,b.width,b.height)}},{key:"transformRectForInclusion",value:function(b){var c=this.topLeft().maxPt(b.topLeft());b=c.addPt(b.extent());b=this.bottomRight().minPt(b);return Xe.rect(c,b)}},{key:"insetByRect",value:function(b){return new Xe.Rectangle(this.x+b.left(),this.y+b.top(),this.width-(b.left()+b.right()),this.height-(b.top()+b.bottom()))}},{key:"outsetByRect",value:function(b){return new Xe.Rectangle(this.x-
b.left(),this.y-b.top(),this.width+(b.left()+b.right()),this.height+(b.top()+b.bottom()))}},{key:"interpolate",value:function(b,c){var g=this.topLeft(),a=this.bottomRight(),d=c.topLeft();c=c.bottomRight();return Xe.Rectangle.fromAny(g.interpolate(b,d),a.interpolate(b,c))}},{key:"intersection",value:function(b){var c=Math.max(this.x,b.x),g=Math.max(this.y,b.y);return new Xe.Rectangle(c,g,Math.min(this.x+this.width,b.x+b.width)-c,Math.min(this.y+this.height,b.y+b.height)-g)}},{key:"union",value:function(b){return Xe.rect(this.topLeft().minPt(b.topLeft()),
this.bottomRight().maxPt(b.bottomRight()))}},{key:"lineIntersection",value:function(b){return this.edges().map(function(c){return c.intersection(b)}).filter(function(c){return!!c})}},{key:"dist",value:function(b){var c=this.closestPointToPt(b.center());b=b.closestPointToPt(c);return c.dist(b)}},{key:"relativeToAbsPoint",value:function(b){return new Xe.Point(this.x+this.width*b.x,this.y+this.height*b.y)}},{key:"closestPointToPt",value:function(b){return Xe.pt(Math.min(Math.max(this.x,b.x),this.maxX()),
Math.min(Math.max(this.y,b.y),this.maxY()))}},{key:"maxX",value:function(){return this.x+this.width}},{key:"maxY",value:function(){return this.y+this.height}},{key:"realWidth",value:function(){return 0>this.x?-this.x+this.width:this.width}},{key:"realHeight",value:function(){return 0>this.y?-this.y+this.height:this.height}},{key:"area",value:function(){return(0>this.width&&0>this.height?-1:1)*this.width*this.height}},{key:"randomPoint",value:function(){return Xe.Point.random(Xe.pt(this.width,this.height)).addPt(this.topLeft())}},
{key:"constrainPt",value:function(b){return b.maxPt(this.topLeft()).minPt(this.bottomRight())}},{key:"left",value:function(){return this.x}},{key:"right",value:function(){return this.maxX()}},{key:"top",value:function(){return this.y}},{key:"bottom",value:function(){return this.maxY()}},{key:"toInsetTuple",value:function(){return[this.left(),this.top(),this.right(),this.bottom()]}},{key:"toAttributeValue",value:function(b){b=.01;var c=[this.left()];this.top()===this.bottom()&&this.left()===this.right()?
this.top()===this.left()&&c.push(this.top()):c=c.concat([this.top(),this.right(),this.bottom()]);return c.invoke("roundTo",b||.01)}},{key:"toLiteral",value:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},{key:"partNamed",value:function(b){return this[b].call(this)}},{key:"withPartNamed",value:function(b,c){return this[this.setterName(b)].call(this,c)}},{key:"setterName",value:function(b){return"with"+b[0].toUpperCase()+b.slice(1)}},{key:"partNameNear",value:function(b,c,
g){b=this.partNameNearest(b,c);return c.dist(this.partNamed(b))<g?b:null}},{key:"partNameNearest",value:function(b,c){for(var g=1E99,a,d=0;d<b.length;d++){a=b[d];var f=c.dist(this.partNamed(a));if(f<g){var k=a;g=f}}return k}},{key:"toString",value:function(){return Xe.string.format("rect(%s,%s,%s,%s)",this.x,this.y,this.width,this.height)}},{key:"__serialize__",value:function(){return{__expr__:this.toString(),bindings:{"lively.graphics/geometry-2d.js":["rect"]}}}},{key:"isRectangle",get:function(){return!0}}]);
return l}());Xe.Rectangle=vl;var ox=function(){function l(b,c,g){rd(this,l);b?b.isPoint?(c=c||0,void 0===g&&(g=Xe.pt(1,1)),this.a=this.ensureNumber(g.x*Math.cos(c)),this.b=this.ensureNumber(g.y*Math.sin(c)),this.c=this.ensureNumber(g.x*-Math.sin(c)),this.d=this.ensureNumber(g.y*Math.cos(c)),this.e=this.ensureNumber(b.x),this.f=this.ensureNumber(b.y),1<this.a&&(this.a=Math.round(this.a*Math.pow(10,2))/Math.pow(10,2)),1<this.d&&(this.d=Math.round(this.d*Math.pow(10,2))/Math.pow(10,2))):this.fromMatrix(b):
(this.a=this.d=1,this.b=this.c=this.e=this.f=0)}Ac(l,[{key:"exp",get:function(){return 1E-4}}]);Ac(l,[{key:"copy",value:function(){return new Xe.Transform(this)}},{key:"fromMatrix",value:function(b){this.a=this.ensureNumber(b.a);this.b=this.ensureNumber(b.b);this.c=this.ensureNumber(b.c);this.d=this.ensureNumber(b.d);this.e=this.ensureNumber(b.e);this.f=this.ensureNumber(b.f)}},{key:"getRotation",value:function(){var b=Xe.num.toDegrees(Math.atan2(-this.c,this.a));return Math.abs(b)<this.eps?0:b}},
{key:"getScale",value:function(){var b=this.a,c=this.c;b=Math.sqrt(b*b+c*c);return Math.abs(b-1)<this.eps?1:b}},{key:"getScalePoint",value:function(){var b=this.a,c=this.b,g=this.c,a=this.d,d=Math.atan2(-g,b);return Xe.pt(Math.sqrt(b*b+g*g),Math.abs(c)>Math.abs(a)?c/Math.sin(d):a/Math.cos(d))}},{key:"getTranslation",value:function(){return Xe.pt(this.e,this.f)}},{key:"isTranslation",value:function(){return 1==this.a&&0==this.b&&0==this.c&&1==this.d}},{key:"toSVGAttributeValue",value:function(){var b=
this.getTranslation();b="translate("+b.x+","+b.y+")";var c=this.getRotation(),g=this.getScalePoint();0!=c&&(b+=" rotate("+this.getRotation()+")");if(1!=g.x||1!=g.y)b+=" scale("+g.x+","+g.y+")";return b}},{key:"toCSSValue",value:function(b){var c="",g=this.getTranslation();c+="translate("+g.x.toFixed(2)+"px,"+g.y.toFixed(2)+"px)";if(b){g=b.width/2;var a=b.height/2;c+=" translate("+g.toFixed(2)+"px,"+a.toFixed(2)+"px)"}0!=this.getRotation()&&(c+=" rotate("+this.getRotation().toFixed(2)+"deg)");b&&(g=
b.width/2,a=b.height/2,c+=" translate("+(-1*g).toFixed(2)+"px,"+(-1*a).toFixed(2)+"px)");b=this.getScalePoint();if(1!=b.x||1!=b.y)c+=" scale("+b.x.toFixed(2)+","+b.y.toFixed(2)+")";return c}},{key:"toCSSTransformString",value:function(){var b=this.getRotation(),c=this.getScale();return"translate(".concat(this.e,"px,").concat(this.f,"px) rotate(").concat(b,"deg) scale(").concat(c,",").concat(c,")")}},{key:"toString",value:function(){return this.toCSSTransformString()}},{key:"toMatrix",value:function(){return this.copy()}},
{key:"transformPoint",value:function(b,c){return b.matrixTransform(this,c)}},{key:"transformDirection",value:function(b,c){return b.matrixTransformDirection(this,c)}},{key:"matrixTransformForMinMax",value:function(b,c,g){var a=this.a*b.x+this.c*b.y+this.e;b=this.b*b.x+this.d*b.y+this.f;a>g.x&&(g.x=a);b>g.y&&(g.y=b);a<c.x&&(c.x=a);b<c.y&&(c.y=b)}},{key:"transformRectToRect",value:function(b){var c=Xe.pt(Infinity,Infinity),g=Xe.pt(-Infinity,-Infinity);this.matrixTransformForMinMax(b.topLeft(),c,g);
this.matrixTransformForMinMax(b.bottomRight(),c,g);this.isTranslation()||(this.matrixTransformForMinMax(b.topRight(),c,g),this.matrixTransformForMinMax(b.bottomLeft(),c,g));return Xe.rect(c,g)}},{key:"preConcatenate",value:function(b){var c=this.matrix_||this.toMatrix();this.a=b.a*c.a+b.c*c.b;this.b=b.b*c.a+b.d*c.b;this.c=b.a*c.c+b.c*c.d;this.d=b.b*c.c+b.d*c.d;this.e=b.a*c.e+b.c*c.f+b.e;this.f=b.b*c.e+b.d*c.f+b.f;this.matrix_=this.toMatrix();return this}},{key:"invert",value:function(){var b=this.copy(),
c=1/(b.a*b.d-b.c*b.b);this.a=b.d*c;this.b=-b.b*c;this.c=-b.c*c;this.d=b.a*c;this.e=(b.c*b.f-b.e*b.d)*c;this.f=-(b.a*b.f-b.b*b.e)*c;return this}},{key:"inverse",value:function(){var b=this.matrix_||this.toMatrix();b=new this.constructor(b);b.invert();return b}},{key:"ensureNumber",value:function(b){if(isNaN(b))throw Error("not a number");return b}},{key:"__serialize__",value:function(){return{__expr__:"new Transform({a: ".concat(this.a,", b: ").concat(this.b,", c: ").concat(this.c,", d: ").concat(this.d,
", e: ").concat(this.e,", f: ").concat(this.f,"})"),bindings:{"lively.graphics/geometry-2d.js":["Transform"]}}}},{key:"isTransform",get:function(){return!0}}]);return l}();Xe.Transform=ox;var KA=function(){function l(b,c){rd(this,l);this.start=b;this.end=c}Ac(l,null,[{key:"fromCoords",value:function(b,c,g,a){return new Xe.Line(Xe.pt(b,c),Xe.pt(g,a))}}]);Ac(l,[{key:"withStart",value:function(b){return new Xe.Line(b,this.end)}},{key:"withEnd",value:function(b){return new Xe.Line(this.start,b)}},{key:"sampleN",
value:function(b){b=b||10;for(var c=this.end.subPt(this.start).scaleBy(1/b),g=[],a=0;a<=b;a++)g.push(this.start.addPt(c.scaleBy(a)));return g}},{key:"sample",value:function(b){return this.sampleN(this.length()/b)}},{key:"length",value:function(){return this.start.dist(this.end)}},{key:"equals",value:function(b){return b?this.start.eqPt(b.start)&&this.end.eqPt(b.end):!1}},{key:"distanceFromLine",value:function(b){var c=this.start.x,g=this.start.y,a=this.end.x,d=this.end.y;return Math.abs((d-g)*b.x-
(a-c)*b.y+a*g-d*c)/Math.sqrt(Math.pow(d-g,2)+Math.pow(a-c,2))}},{key:"includesPoint",value:function(b,c){var g=this.start.x,a=this.start.y,d=this.end.x,f=this.end.y,k=b.x;b=b.y;var n=0===(d-g)*(b-a)-(k-g)*(f-a);if(c||!n)return n;c=Math.min(a,f);n=Math.max(g,d);a=Math.max(a,f);return Math.min(g,d)<=k&&k<=n&&c<=b&&b<=a}},{key:"intersection",value:function(b,c){var g=this.start,a=this.end,d=b.start,f=b.end;b=g.x;g=g.y;var k=a.x;a=a.y;var n=d.x;d=d.y;var p=f.x;f=f.y;var q=((b*a-g*k)*(n-p)-(b-k)*(n*f-
d*p))/((b-k)*(d-f)-(g-a)*(n-p)),r=((b*a-g*k)*(d-f)-(g-a)*(n*f-d*p))/((b-k)*(d-f)-(g-a)*(n-p));return Infinity!==q&&Infinity!==r&&(c||Xe.num.between(q,b,k,1E-4)&&Xe.num.between(r,g,a,1E-4)&&Xe.num.between(q,n,p,1E-4)&&Xe.num.between(r,d,f,1E-4))?Xe.pt(q,r):null}},{key:"perpendicularLine",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"cc",a=this.start,
d=this.toVector();b=a.addPt(d.scaleBy(b));g=d.theta()+("cc"===g?-1:1)*Math.PI/2;return new Xe.Line(b,b.addPt(Xe.Point.polar(c,g)))}},{key:"toVector",value:function(){return this.end.subPt(this.start)}},{key:"toString",value:function(){return Xe.string.format("Line((%s,%s), (%s,%s))",this.start.x,this.start.y,this.end.x,this.end.y)}},{key:"__serialize__",value:function(){return{__expr__:"Line.fromCoords(".concat(this.start.x,", ").concat(this.start.y,", ").concat(this.end.x,", ").concat(this.end.y,
")"),bindings:{"lively.graphics/geometry-2d.js":["Line"]}}}},{key:"isLine",get:function(){return!0}}]);return l}();Xe.Line=KA;Xe.rect=Bm;Xe.pt=Ij;var f2=Object.freeze({__proto__:null,Point:ws,Rectangle:vl,Transform:ox,Line:KA,rect:Bm,pt:Ij}),Te=window.lively.FreezerRuntime.recorderFor("lively.graphics/color.js");Te.floor=function(l){return Math.floor(255.99*l)};Te.pad=function(l,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Te.arr.last;return[].concat(hb(l),hb(Array(Math.max(b-l.length,
0)).fill(c(l))))};Te.num=Yk;Te.obj=nh;Te.arr=mh;Te.parse=Dr;Te.Rectangle=vl;Te.rect=Bm;Te.pt=Ij;Te.Point=ws;Te.rgbaRegex=/\s*rgba?\s*\(\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*(?:,\s*([0-9\.]+)\s*)?\)\s*/;var g2=function(){function l(){rd(this,l)}Ac(l,[{key:"offsets",value:function(){return null}},{key:"stepCount",value:function(){return 0}},{key:"stepSize",value:function(){return 0}},{key:"chord",value:function(b){var c=this,g=b.hue,a=b.saturation,d=b.brightness;return(this.offsets()||Te.arr.range(0,
this.steps()).map(function(f){return f*c.stepSize()})).map(function(f){return Te.Color.hsb(g+f%360,a,d)})}},{key:"name",get:function(){return"Color Harmony"}}]);return l}();Te.ColorHarmony=g2;var NG=function(l){function b(){rd(this,b);return c.apply(this,arguments)}gd(b,l);var c=sb(b);Ac(b,[{key:"steps",value:function(){return 1}},{key:"stepSize",value:function(){return 180}},{key:"name",get:function(){return"Complement"}}]);return b}(Te.ColorHarmony);Te.Complementary=NG;var OG=function(l){function b(){rd(this,
b);return c.apply(this,arguments)}gd(b,l);var c=sb(b);Ac(b,[{key:"steps",value:function(){return 2}},{key:"stepSize",value:function(){return 120}},{key:"name",get:function(){return"Triadic"}}]);return b}(Te.ColorHarmony);Te.Triadic=OG;var PG=function(l){function b(){rd(this,b);return c.apply(this,arguments)}gd(b,l);var c=sb(b);Ac(b,[{key:"offsets",value:function(){return[0,60,180,240]}},{key:"name",get:function(){return"Tetradic"}}]);return b}(Te.ColorHarmony);Te.Tetradic=PG;var QG=function(l){function b(){rd(this,
b);return c.apply(this,arguments)}gd(b,l);var c=sb(b);Ac(b,[{key:"steps",value:function(){return 3}},{key:"stepSize",value:function(){return 90}},{key:"name",get:function(){return"Quadratic"}}]);return b}(Te.ColorHarmony);Te.Quadratic=QG;var RG=function(l){function b(){rd(this,b);return c.apply(this,arguments)}gd(b,l);var c=sb(b);Ac(b,[{key:"steps",value:function(){return 5}},{key:"offsets",value:function(){return[-60,-30,0,30,60]}},{key:"name",get:function(){return"Analogous"}}]);return b}(Te.ColorHarmony);
Te.Analogous=RG;var SG=function(l){function b(){rd(this,b);return c.apply(this,arguments)}gd(b,l);var c=sb(b);Ac(b,[{key:"offsets",value:function(){return[-30,-15,0,15,30]}},{key:"name",get:function(){return"Neutral"}}]);return b}(Te.ColorHarmony);Te.Neutral=SG;var Nl=Lc("C",function(){function l(b,c,g,a){rd(this,l);this.r=b?Te.num.roundTo(Number.parseFloat(b),1E-4):0;this.g=c?Te.num.roundTo(Number.parseFloat(c),1E-4):0;this.b=g?Te.num.roundTo(Number.parseFloat(g),1E-4):0;this.a=a?Te.num.roundTo(Number.parseFloat(a),
1E-4):0===a?0:1}Ac(l,[{key:"isColor",get:function(){return!0}}],[{key:"random",value:function(b,c){void 0===b&&(b=0);void 0===c&&(c=255);return Te.Color.rgb(Te.num.random(b,c),Te.num.random(b,c),Te.num.random(b,c))}},{key:"hsb",value:function(b,c,g){if(0==c)return new Te.Color(g,g,g);var a=b%360/60;b=Math.floor(a);var d=a-b;a=(1-c)*g;var f=(1-c*d)*g;c=(1-c*(1-d))*g;switch(b){case 0:return new Te.Color(g,c,a);case 1:return new Te.Color(f,g,a);case 2:return new Te.Color(a,g,c);case 3:return new Te.Color(a,
f,g);case 4:return new Te.Color(c,a,g);case 5:return new Te.Color(g,a,f);default:return new Te.Color(0,0,0)}}},{key:"wheel",value:function(){return Te.Color.wheelHsb(0<arguments.length&&void 0!==arguments[0]?arguments[0]:10,0,.9,.7)}},{key:"wheelHsb",value:function(b,c,g,a){for(var d=Array(b),f=360/Math.max(b,1),k=0;k<b;k++)d[k]=Te.Color.hsb(c+k*f,g,a);return d}},{key:"rgb",value:function(b,c,g){return new Te.Color(b/255,c/255,g/255)}},{key:"rgbHex",value:function(b){return(b=this.parseHex(b))&&0<=
b[0]&&0<=b[1]&&0<=b[2]?new Te.Color(b[0],b[1],b[2]):null}},{key:"rgba",value:function(b,c,g,a){return new Te.Color(b/255,c/255,g/255,a)}},{key:"fromLiteral",value:function(b){return new Te.Color(b.r,b.g,b.b,b.a)}},{key:"fromTuple",value:function(b){return new Te.Color(b[0],b[1],b[2],b[3])}},{key:"fromTuple8Bit",value:function(b){return new Te.Color(b[0]/255,b[1]/255,b[2]/255,b[3]/255)}},{key:"fromString",value:function(b){return b&&"none"!==b?this.fromTuple(this.parse(b)):null}},{key:"parse",value:function(b){return b&&
"none"!==b?(b=Te.parse(b),[b.red,b.green,b.blue,b.alpha]):null}},{key:"parseRGB",value:function(b){var c=b.match(this.rgbaRegex);if(c){b=parseInt(c[1])/(c[2]?100:255);var g=parseInt(c[3])/(c[4]?100:255),a=parseInt(c[5])/(c[6]?100:255);c=c[7]?parseFloat(c[7]):1;return[b,g,a,c]}return null}},{key:"parseHex",value:function(b){var c;var g="";for(c=0;c<b.length;c++){var a=b[c].toLowerCase();if("a"==a||"b"==a||"c"==a||"d"==a||"e"==a||"f"==a||"0"==a||"1"==a||"2"==a||"3"==a||"4"==a||"5"==a||"6"==a||"7"==
a||"8"==a||"9"==a)g+=a}if(6==g.length)c=g.substring(0,2),b=g.substring(2,4),g=g.substring(4,6);else if(3==g.length)c=g.substring(0,1),c+=c,b=g.substring(1,2),b+=b,g=g.substring(2,3),g+=g;else return null;c=parseInt(c,16)/255;b=parseInt(b,16)/255;g=parseInt(g,16)/255;return[c,b,g]}},{key:"rgbaRegex",get:function(){return Te.rgbaRegex}},{key:"named",get:function(){return this._named?this._named:this._named={black:new Te.Color(0,0,0),almostBlack:Te.Color.rgb(64,64,64),white:new Te.Color(1,1,1),gray:new Te.Color(.8,
.8,.8),red:new Te.Color(.8,0,0),green:new Te.Color(0,.8,0),yellow:new Te.Color(.8,.8,0),blue:new Te.Color(0,0,.8),purple:new Te.Color(.5,0,.5),magenta:new Te.Color(1,0,1),pink:Te.Color.rgb(255,30,153),turquoise:Te.Color.rgb(0,240,255),tangerine:Te.Color.rgb(242,133,0),orange:Te.Color.rgb(255,153,0),cyan:Te.Color.rgb(0,255,255),brown:Te.Color.rgb(182,67,0),limeGreen:Te.Color.rgb(51,255,0),darkGray:Te.Color.rgb(102,102,102),lightGray:Te.Color.rgb(230,230,230),veryLightGray:Te.Color.rgb(243,243,243),
transparent:Te.Color.rgba(69,85,134,0),lively:Te.Color.rgb(245,124,0)}}}]);Ac(l,[{key:"grayValue",value:function(){return(this.r+this.g+this.b)/3}},{key:"luma",value:function(){return.299*this.r+.587*this.g+.114*this.b}},{key:"equals",value:function(b){return b?this.r===b.r&&this.g===b.g&&this.b===b.b&&this.a===b.a:!1}},{key:"darker",value:function(b){var c=this.mixedWith(Te.Color.black,.5);return 1<b?c.darker(b-1):c}},{key:"lighter",value:function(b){if(0==b)return this;var c=this.mixedWith(Te.Color.white,
.5);return 1<b?c.lighter(b-1):c}},{key:"interpolate",value:function(b,c){if(c.isGradient)return c.interpolate(1-b,this);c=Te.obj.isArray(c)?c:c.toTuple();return Te.Color.fromTuple(this.toTuple().map(function(g,a){return Te.num.interpolate(b,g,c[a])}))}},{key:"toString",value:function(){return 1===this.a?"rgb("+Te.floor(this.r)+","+Te.floor(this.g)+","+Te.floor(this.b)+")":this.toRGBAString()}},{key:"toRGBAString",value:function(){return"rgba("+Math.floor(255.99*this.r)+","+Math.floor(255.99*this.g)+
","+Math.floor(255.99*this.b)+","+this.a+")"}},{key:"toHexString",value:function(){function b(c){for(;2>c.length;)c="0"+c;return c}return b(Math.floor(255.99*this.r).toString(16))+b(Math.floor(255.99*this.g).toString(16))+b(Math.floor(255.99*this.b).toString(16))}},{key:"toTuple",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toTuple8Bit",value:function(){return[255*this.r,255*this.g,255*this.b,255*this.a]}},{key:"toHSB",value:function(){var b=Math.max(this.r,this.g,this.b),c=Math.min(this.r,
this.g,this.b),g;b==c?g=0:b==this.r?g=(this.g-this.b)/(b-c)*60:b==this.g?g=60*(2+(this.b-this.r)/(b-c)):b==this.b&&(g=60*(4+(this.r-this.g)/(b-c)));return[(g+360)%360,0==b?0:(b-c)/b,b]}},{key:"withA",value:function(b){return new Te.Color(this.r,this.g,this.b,b)}},{key:"mixedWith",value:function(b,c){var g=1-c;return new Te.Color(this.r*c+b.r*g,this.g*c+b.g*g,this.b*c+b.b*g,this.a*c+b.a*g)}},{key:"invert",value:function(){return Te.Color.rgb(255*(1-this.r),255*(1-this.g),255*(1-this.b))}},{key:"toCSSString",
value:function(){return this.toRGBAString()}},{key:"__serialize__",value:function(){return{__expr__:"Color."+this.toString(),bindings:{"lively.graphics/color.js":["Color"]}}}},{key:"toJSExpr",value:function(){return"Color.".concat(this.name||this.toString())}},{key:"name",get:function(){var b=this,c=Te.Color.named;return Object.keys(c).find(function(g){return c[g].equals(b)})}}]);return l}());Te.Color=Nl;Object.assign(Te.Color,Te.Color.named);var h2=function(){function l(b){rd(this,l);this.stops=
b?b.map(function(c){return c}):[]}Ac(l,null,[{key:"create",value:function(b){var c=[],g;for(g in b)c.push({offset:Number(g),color:b[g]});return new this({stops:c})}},{key:"parse",value:function(b){return b.startsWith("radial-gradient")?Te.RadialGradient.parse(b):b.startsWith("linear-gradient")?Te.LinearGradient.parse(b):Te.Color.fromTuple(Te.Color.parse(b))}}]);Ac(l,[{key:"equals",value:function(b){return b&&b.isGradient?this.toString()==b.toString():!1}},{key:"getStopsLighter",value:function(b){return this.stops.map(function(c){return{offset:c.offset,
color:c.color.lighter(b)}})}},{key:"getStopsDarker",value:function(b){return this.stops.map(function(c){return{offset:c.offset,color:c.color.darker(b)}})}},{key:"interpolateStops",value:function(b,c){var g=Te.pad(this.stops,c.length);c=Te.pad(c,this.stops.length);var a=[],d;for(d=0;d<g.length;d++){Te.__inter0__=g[d];var f=Te.__inter0__.color;var k=Te.__inter0__.offset;Te.__inter1__=c[d];var n=Te.__inter1__.color;var p=Te.__inter1__.offset;a.push({color:f.interpolate(b,n),offset:Te.num.interpolate(b,
k,p)})}return a}},{key:"__serialize__",value:function(){return{__expr__:this.toJSExpr(),bindings:{"lively.graphics/color.js":["Color","RadialGradient","LinearGradient"],"lively.graphics/geometry-2d.js":["pt","rect"]}}}},{key:"isGradient",get:function(){return!0}}]);return l}();Te.Gradient=h2;var TG=Lc("K",function(l){function b(){var g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};var a=g.stops;g=g.vector;rd(this,b);a=c.call(this,a);a.vector=g;return a}gd(b,l);var c=sb(b);Ac(b,null,[{key:"parse",
value:function(g){g.match(/\((.*)\)/)[1].split(",")}}]);Ac(b,[{key:"angleToRect",value:function(g){return Te.Point.polar(1,g).extentAsRectangle().withCenter(Te.pt(.5,.5))}},{key:"vectorAsAngle",value:function(){return this.vector.extent().theta()}},{key:"toString",value:function(){return this.toCSSString()}},{key:"lighter",value:function(g){return new this.constructor({stops:this.getStopsLighter(g),vector:this.vector})}},{key:"darker",value:function(g){return new this.constructor({stops:this.getStopsDarker(g),
vector:this.vector})}},{key:"interpolate",value:function(g,a){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{width:1E3,height:1E3};a.isColor&&(a=new Te.LinearGradient({vector:this.vector,stops:this.stops.map(function(f){return{color:a,offset:f.offset}})}));if("radialGradient"==a.type){if(.5>g)return new Te.LinearGradient({vector:this.vector.interpolate(g,Te.rect(0,0,0,1)),stops:this.interpolateStops(g,a.stops.map(function(f,k){k=f.color;f.offset;return{color:k,offset:1}}))});if(.5<=
g)return new Te.RadialGradient({stops:this.interpolateStops(g,a.stops),focus:Te.pt(.5,0).interpolate(g,a.focus),bounds:Te.rect(0,0,100*d.width,2*d.height).interpolate(g,a.bounds)})}return new Te.LinearGradient({stops:this.interpolateStops(g,a.stops),vector:this.vector.interpolate(g,a.vector)})}},{key:"toCSSString",value:function(){var g="linear-gradient("+(Te.num.toDegrees(this.vectorAsAngle())+90+"deg,")+this.stops.map(function(a){return"".concat(a.color.toRGBAString()," ").concat((100*a.offset).toFixed()+
"%")}).join(",");return g+")"}},{key:"toJSExpr",value:function(){var g=this.stops.map(function(a){return"{offset: ".concat(a.offset,", color: ").concat(a.color.toJSExpr(),"}")}).join(", ");return"new LinearGradient({stops: [".concat(g,"], vector: ").concat(this.vector,"})")}},{key:"type",get:function(){return"linearGradient"}},{key:"vectors",get:function(){return{northsouth:Te.rect(Te.pt(0,0),Te.pt(0,1)),northeast:Te.rect(Te.pt(1,0),Te.pt(0,1)),westeast:Te.rect(Te.pt(1,0),Te.pt(0,0)),southeast:Te.rect(Te.pt(1,
1),Te.pt(0,0)),southnorth:Te.rect(Te.pt(0,1),Te.pt(0,0)),southwest:Te.rect(Te.pt(0,1),Te.pt(1,0)),eastwest:Te.rect(Te.pt(0,0),Te.pt(1,0)),northwest:Te.rect(Te.pt(0,0),Te.pt(1,1))}}},{key:"vector",get:function(){return this._vector},set:function(g){this._vector=g?"string"===typeof g?this.vectors[g.toLowerCase()]:"number"===typeof g?this.angleToRect(g):g:this.vectors.northsouth}}]);return b}(Te.Gradient));Te.LinearGradient=TG;var UG=Lc("aL",function(l){function b(){var g=0<arguments.length&&void 0!==
arguments[0]?arguments[0]:{};var a=g.stops;var d=g.focus;g=g.bounds;rd(this,b);a=c.call(this,a);a.focus=d||Te.pt(.5,.5);a.bounds=g||new Te.Rectangle(0,0,20,20);return a}gd(b,l);var c=sb(b);Ac(b,null,[{key:"parse",value:function(g){g.match(/\((.*)\)/)[1].split(",")}}]);Ac(b,[{key:"toString",value:function(){return this.toCSSString()}},{key:"lighter",value:function(g){return new this.constructor({stops:this.getStopsLighter(g),focus:this.focus,bounds:this.bounds})}},{key:"darker",value:function(){return new this.constructor({stops:this.getStopsDarker(),
focus:this.focus,bounds:this.bounds})}},{key:"interpolate",value:function(g,a){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{height:1E3,width:1E3};a.isColor&&(a=new Te.RadialGradient({vector:this.vector,bounds:this.bounds,stops:this.stops.map(function(f){return{color:a,offset:f.offset}})}));return"linearGradient"==a.type?a.interpolate(1-g,this,d):new Te.RadialGradient({bounds:this.bounds.interpolate(g,a.bounds),stops:this.interpolateStops(g,a.stops),focus:this.focus.interpolate(g,
a.focus)})}},{key:"toCSSString",value:function(){var g=this.focus.scaleBy(100),a=this.bounds.extent();g="radial-gradient(".concat(a.x/2,"px ").concat(a.y/2,"px at ").concat(g.x,"% ").concat(g.y,"%");for(a=0;a<this.stops.length;a++)g+=",".concat(this.stops[a].color.toRGBAString()," ").concat((100*this.stops[a].offset).toFixed()+"%");return g+")"}},{key:"toJSExpr",value:function(){var g=this.stops.map(function(a){return"{offset: ".concat(a.offset,", color: ").concat(a.color.toJSExpr(),"}")}).join(", ");
return"new RadialGradient({stops: [".concat(g,"], bounds: ").concat(this.bounds,", focus: ").concat(this.focus.toString(!1),"})")}},{key:"type",get:function(){return"radialGradient"}}]);return b}(Te.Gradient));Te.RadialGradient=UG;var LA=Lc("aN","#1abc9c #e8f8f5 #d1f2eb #a3e4d7 #76d7c4 #48c9b0 #1abc9c #17a589 #148f77 #117864 #0e6251 #16a085 #e8f6f3 #d0ece7 #a2d9ce #73c6b6 #45b39d #16a085 #138d75 #117a65 #0e6655 #0b5345 #2ecc71 #eafaf1 #d5f5e3 #abebc6 #82e0aa #58d68d #2ecc71 #28b463 #239b56 #1d8348 #186a3b #27ae60 #e9f7ef #d4efdf #a9dfbf #7dcea0 #52be80 #27ae60 #229954 #1e8449 #196f3d #145a32 #3498db #ebf5fb #d6eaf8 #aed6f1 #85c1e9 #5dade2 #3498db #2e86c1 #2874a6 #21618c #1b4f72 #2980b9 #eaf2f8 #d4e6f1 #a9cce3 #7fb3d5 #5499c7 #2980b9 #2471a3 #1f618d #1a5276 #154360 #9b59b6 #f5eef8 #ebdef0 #d7bde2 #c39bd3 #af7ac5 #9b59b6 #884ea0 #76448a #633974 #512e5f #8e44ad #f4ecf7 #e8daef #d2b4de #bb8fce #a569bd #8e44ad #7d3c98 #6c3483 #5b2c6f #4a235a #34495e #ebedef #d6dbdf #aeb6bf #85929e #5d6d7e #34495e #2e4053 #283747 #212f3c #1b2631 #2c3e50 #eaecee #d5d8dc #abb2b9 #808b96 #566573 #2c3e50 #273746 #212f3d #1c2833 #17202a #f1c40f #fef9e7 #fcf3cf #f9e79f #f7dc6f #f4d03f #f1c40f #d4ac0d #b7950b #9a7d0a #7d6608 #f39c12 #fef5e7 #fdebd0 #fad7a0 #f8c471 #f5b041 #f39c12 #d68910 #b9770e #9c640c #7e5109 #e67e22 #fdf2e9 #fae5d3 #f5cba7 #f0b27a #eb984e #e67e22 #ca6f1e #af601a #935116 #784212 #d35400 #fbeee6 #f6ddcc #edbb99 #e59866 #dc7633 #d35400 #ba4a00 #a04000 #873600 #6e2c00 #e74c3c #fdedec #fadbd8 #f5b7b1 #f1948a #ec7063 #e74c3c #cb4335 #b03a2e #943126 #78281f #c0392b #f9ebea #f2d7d5 #e6b0aa #d98880 #cd6155 #c0392b #a93226 #922b21 #7b241c #641e16 #ecf0f1 #fdfefe #fbfcfc #f7f9f9 #f4f6f7 #f0f3f4 #ecf0f1 #d0d3d4 #b3b6b7 #979a9a #7b7d7d #bdc3c7 #f8f9f9 #f2f3f4 #e5e7e9 #d7dbdd #cacfd2 #bdc3c7 #a6acaf #909497 #797d7f #626567 #95a5a6 #f4f6f6 #eaeded #d5dbdb #bfc9ca #aab7b8 #95a5a6 #839192 #717d7e #5f6a6a #4d5656 #7f8c8d #f2f4f4 #e5e8e8 #ccd1d1 #b2babb #99a3a4 #7f8c8d #707b7c #616a6b #515a5a #424949".split(" "));
Te.flatDesignColors=LA;Te.flatDesignColors=LA;var MA=Lc("aO","#f44336 #ffebee #ffcdd2 #ef9a9a #e57373 #ef5350 #f44336 #e53935 #d32f2f #c62828 #b71c1c #ff8a80 #ff5252 #ff1744 #d50000 #e91e63 #fce4ec #f8bbd0 #f48fb1 #f06292 #ec407a #e91e63 #d81b60 #c2185b #ad1457 #880e4f #ff80ab #ff4081 #f50057 #c51162 #9c27b0 #f3e5f5 #e1bee7 #ce93d8 #ba68c8 #ab47bc #9c27b0 #8e24aa #7b1fa2 #6a1b9a #4a148c #ea80fc #e040fb #d500f9 #aa00ff #673ab7 #ede7f6 #d1c4e9 #b39ddb #9575cd #7e57c2 #673ab7 #5e35b1 #512da8 #4527a0 #311b92 #b388ff #7c4dff #651fff #6200ea #3f51b5 #e8eaf6 #c5cae9 #9fa8da #7986cb #5c6bc0 #3f51b5 #3949ab #303f9f #283593 #1a237e #8c9eff #536dfe #3d5afe #304ffe #2196f3 #e3f2fd #bbdefb #90caf9 #64b5f6 #42a5f5 #2196f3 #1e88e5 #1976d2 #1565c0 #0d47a1 #82b1ff #448aff #2979ff #2962ff #03a9f4 #e1f5fe #b3e5fc #81d4fa #4fc3f7 #29b6f6 #03a9f4 #039be5 #0288d1 #0277bd #01579b #80d8ff #40c4ff #00b0ff #0091ea #00bcd4 #e0f7fa #b2ebf2 #80deea #4dd0e1 #26c6da #00bcd4 #00acc1 #0097a7 #00838f #006064 #84ffff #18ffff #00e5ff #00b8d4 #009688 #e0f2f1 #b2dfdb #80cbc4 #4db6ac #26a69a #009688 #00897b #00796b #00695c #004d40 #a7ffeb #64ffda #1de9b6 #00bfa5 #4caf50 #e8f5e9 #c8e6c9 #a5d6a7 #81c784 #66bb6a #4caf50 #43a047 #388e3c #2e7d32 #1b5e20 #b9f6ca #69f0ae #00e676 #00c853 #8bc34a #f1f8e9 #dcedc8 #c5e1a5 #aed581 #9ccc65 #8bc34a #7cb342 #689f38 #558b2f #33691e #ccff90 #b2ff59 #76ff03 #64dd17 #cddc39 #f9fbe7 #f0f4c3 #e6ee9c #dce775 #d4e157 #cddc39 #c0ca33 #afb42b #9e9d24 #827717 #f4ff81 #eeff41 #c6ff00 #aeea00 #ffeb3b #fffde7 #fff9c4 #fff59d #fff176 #ffee58 #ffeb3b #fdd835 #fbc02d #f9a825 #f57f17 #ffff8d #ffff00 #ffea00 #ffd600 #ffc107 #fff8e1 #ffecb3 #ffe082 #ffd54f #ffca28 #ffc107 #ffb300 #ffa000 #ff8f00 #ff6f00 #ffe57f #ffd740 #ffc400 #ffab00 #ff9800 #fff3e0 #ffe0b2 #ffcc80 #ffb74d #ffa726 #ff9800 #fb8c00 #f57c00 #ef6c00 #e65100 #ffd180 #ffab40 #ff9100 #ff6d00 #ff5722 #fbe9e7 #ffccbc #ffab91 #ff8a65 #ff7043 #ff5722 #f4511e #e64a19 #d84315 #bf360c #ff9e80 #ff6e40 #ff3d00 #dd2c00 #795548 #efebe9 #d7ccc8 #bcaaa4 #a1887f #8d6e63 #795548 #6d4c41 #5d4037 #4e342e #3e2723 #9e9e9e #fafafa #f5f5f5 #eeeeee #e0e0e0 #bdbdbd #9e9e9e #757575 #616161 #424242 #212121 #607d8b #eceff1 #cfd8dc #b0bec5 #90a4ae #78909c #607d8b #546e7a #455a64 #37474f #263238 #ffffff #000000".split(" "));
Te.materialDesignColors=MA;Te.materialDesignColors=MA;var NA=Lc("aM","ccff00 ccff33 ccff66 ccff99 ccffcc ccffff ffffff ffffcc ffff99 ffff66 ffff33 ffff00 cccc00 cccc33 cccc66 cccc99 cccccc ccccff ffccff ffcccc ffcc99 ffcc66 ffcc33 ffcc00 cc9900 cc9933 cc9966 cc9999 cc99cc cc99ff ff99ff ff99cc ff9999 ff9966 ff9933 ff9900 cc6600 cc6633 cc6666 cc6699 cc66cc cc66ff ff66ff ff66cc ff6699 ff6666 ff6633 ff6600 cc3300 cc3333 cc3366 cc3399 cc33cc cc33ff ff33ff ff33cc ff3399 ff3366 ff3333 ff3300 cc0000 cc0033 cc0066 cc0099 cc00cc cc00ff ff00ff ff00cc ff0099 ff0066 ff0033 ff0000 660000 660033 660066 660099 6600cc 6600ff 9900ff 9900cc 990099 990066 990033 990000 663300 663333 663366 663399 6633cc 6633ff 9933ff 9933cc 993399 993366 993333 993300 666600 666633 666666 666699 6666cc 6666ff 9966ff 9966cc 996699 996666 996633 996600 669900 669933 669966 669999 6699cc 6699ff 9999ff 9999cc 999999 999966 999933 999900 66cc00 66cc33 66cc66 66cc99 66cccc 66ccff 99ccff 99cccc 99cc99 99cc66 99cc33 99cc00 66ff00 66ff33 66ff66 66ff99 66ffcc 66ffff 99ffff 99ffcc 99ff99 99ff66 99ff33 99ff00 00ff00 00ff33 00ff66 00ff99 00ffcc 00ffff 33ffff 33ffcc 33ff99 33ff66 33ff33 33ff00 00cc00 00cc33 00cc66 00cc99 00cccc 00ccff 33ccff 33cccc 33cc99 33cc66 33cc33 33cc00 009900 009933 009966 009999 0099cc 0099ff 3399ff 3399cc 339999 339966 339933 339900 006600 006633 006666 006699 0066cc 0066ff 3366ff 3366cc 336699 336666 336633 336600 003300 003333 003366 003399 0033cc 0033ff 3333ff 3333cc 333399 333366 333333 333300 000000 000033 000066 000099 0000cc 0000ff 3300ff 3300cc 330099 330066 330033 330000".split(" "));
Te.webSafeColors=NA;Te.webSafeColors=NA;var i2=Object.freeze({__proto__:null,Complementary:NG,Triadic:OG,Tetradic:PG,Quadratic:QG,Analogous:RG,Neutral:SG,Color:Nl,LinearGradient:TG,RadialGradient:UG,flatDesignColors:LA,materialDesignColors:MA,webSafeColors:NA}),mS=window.lively.FreezerRuntime.recorderFor("lively.graphics/index.js");Object.assign(mS,i2);Object.assign(mS,f2);var j2=Object.freeze({__proto__:null,Complementary:NG,Triadic:OG,Tetradic:PG,Quadratic:QG,Analogous:RG,Neutral:SG,Color:Nl,LinearGradient:TG,
RadialGradient:UG,flatDesignColors:LA,materialDesignColors:MA,webSafeColors:NA,Point:ws,Rectangle:vl,Transform:ox,Line:KA,rect:Bm,pt:Ij});Lc("c9",j2);var $k=window.lively.FreezerRuntime.recorderFor("lively.morphic/config.js");$k.parseURLQuery=function(){if("undefined"===typeof document||!document.location)return{};var l=(document.location.hash||document.location.search).slice(1);l=l&&l.split("&");var b={};if(l)for(var c=0;c<l.length;c++){var g=l[c].split("="),a=g[0],d=!0;if(1<g.length&&(d=decodeURIComponent(g.slice(1).join("=")),
d.match(/^(true|false|null|[0-9"[{].*)$/)))try{d=JSON.parse(d)}catch(f){"["===d[0]&&(d=d.slice(1,-1).split(","))}b[a]=d}return b};$k.Rectangle=vl;$k.Color=Nl;$k.joinPath=jf;$k.baseURL="undefined"!==typeof window&&window.SERVER_URL||"undefined"!==typeof System&&System.baseURL||"undefined"!==typeof document&&document.location.origin||"undefined"!==typeof process&&"file://"+process.env.lv_next_dir;"undefined"!==typeof $world&&$world.withAllSubmorphsDo(function(l){return l.hasOwnProperty("_cachedKeyhandlers")&&
(l._cachedKeyhandlers=null)});$k.config={onloadURLQuery:$k.parseURLQuery(),defaultShadow:{fast:!0,distance:18,blur:30,color:$k.Color.black.withA(.2),spread:0},undoLevels:20,halosEnabled:!0,altClickDefinesThat:!0,verboseLogging:!0,maxStatusMessages:5,repeatClickInterval:250,longClick:{minDur:500,maxDur:1E3,maxDist:2},showTooltipsAfter:.8,users:{authServerURL:"undefined"!==typeof window&&window.AUTH_SERVER_URL||"https://auth.lively-next.org",autoLoginAsGuest:!1},ide:{workerEnabled:!1,js:{ignoredPackages:["lively.web",
"no group",function(l){return l.includes("lively.morphic/objectdb")||l.includes("lively.next-node_modules")||l.includes("node_modules")||l.includes("custom-npm-modules")||l.includes("mocha-es6")||l.includes("test-resources/es6")}],defaultInspectorImports:{"lively.graphics":["pt","Color"]}},modes:{aliases:{text:"text",sh:"shell",markdown:"md",javascript:"js",htmlmixed:"html",haskell:"hs",python:"py",less:"css/less"}}},globalKeyBindings:[{keys:{mac:"Meta-Z",win:"Ctrl-Z"},command:"undo"},{keys:{mac:"Meta-Shift-Z",
win:"Ctrl-Shift-Z"},command:"redo"},{keys:"Alt-X",command:"run command"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"save world"},{keys:"Meta-Shift-L s a v e",command:"save this world"},{keys:"Meta-H",command:"show halo for focused morph"},{keys:"Meta-Shift-L C O P Y",command:"copy morph"},{keys:"Alt-M",command:"select morph"},{keys:"Escape",command:"escape"},{keys:{win:"Ctrl-Escape",mac:"Meta-Escape"},command:"close active window or morph"},{keys:"Alt-Shift-C",command:"toggle minimize active window"},
{keys:{mac:"Meta-Shift-L W S",win:"Ctrl-Shift-L W S"},command:"search workspaces"},{keys:{mac:"Meta-O",win:"Ctrl-O"},command:"open status message of focused morph"},{keys:{win:"Ctrl-K",mac:"Meta-K"},command:{command:"open javascript workspace",onlyWhenFocused:!1}},{keys:"Alt-Shift-1",command:{command:"open shell terminal",onlyWhenFocused:!1}},{keys:{win:"Ctrl-B",mac:"Meta-B"},command:{command:"open browser",onlyWhenFocused:!1}},{keys:{win:"Ctrl-P",mac:"Meta-P"},command:{command:"open PartsBin",onlyWhenFocused:!0}},
{keys:"Alt-T",command:{command:"choose and browse module",onlyWhenFocused:!1}},{keys:"Alt-Shift-T",command:{command:"choose and browse package resources",onlyWhenFocused:!1}},{keys:{mac:"Ctrl-X D"},command:"open file browser"},{keys:{mac:"Ctrl-X Ctrl-F"},command:"open file"},{keys:{win:"Ctrl-Shift-F",mac:"Meta-Shift-F"},command:{command:"open code search",onlyWhenFocused:!1}},{keys:"Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:1}}},{keys:"Right",command:{command:"move or resize halo target",
args:{what:"move",direction:"right",offset:1}}},{keys:"Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:1}}},{keys:"Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:1}}},{keys:"Meta-Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:10}}},{keys:"Meta-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:10}}},{keys:"Meta-Up",command:{command:"move or resize halo target",
args:{what:"move",direction:"up",offset:10}}},{keys:"Meta-Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:10}}},{keys:"Alt-Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:100}}},{keys:"Alt-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:100}}},{keys:"Alt-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:100}}},{keys:"Alt-Down",
command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:100}}},{keys:"Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:1}}},{keys:"Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:1}}},{keys:"Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:1}}},{keys:"Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",
direction:"down",offset:1}}},{keys:"Meta-Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:10}}},{keys:"Meta-Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:10}}},{keys:"Meta-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:10}}},{keys:"Meta-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:10}}},
{keys:"Alt-Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:100}}},{keys:"Alt-Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:100}}},{keys:"Alt-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:100}}},{keys:"Alt-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:100}}},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},
command:"close halo target"},{keys:{win:"Ctrl-`|Alt-`",mac:"Meta-1"},command:"window switcher"},{keys:{mac:"Meta-Shift-L R E S 1",win:"Ctrl-Shift-L R E S 1"},command:{command:"resize active window",args:{how:"col1"}}},{keys:{mac:"Meta-Shift-L R E S 2",win:"Ctrl-Shift-L R E S 2"},command:{command:"resize active window",args:{how:"col2"}}},{keys:{mac:"Meta-Shift-L R E S 3",win:"Ctrl-Shift-L R E S 3"},command:{command:"resize active window",args:{how:"col3"}}},{keys:{mac:"Meta-Shift-L R E S C",win:"Ctrl-Shift-L R E S C"},
command:{command:"resize active window",args:{how:"center"}}},{keys:{mac:"Meta-Shift-L R E S L",win:"Ctrl-Shift-L R E S L"},command:{command:"resize active window",args:{how:"left"}}},{keys:{mac:"Meta-Shift-L R E S R",win:"Ctrl-Shift-L R E S R"},command:{command:"resize active window",args:{how:"right"}}},{keys:{mac:"Meta-Shift-L R E S F",win:"Ctrl-Shift-L R E S F"},command:{command:"resize active window",args:{how:"full"}}},{keys:{mac:"Meta-Shift-L R E S T",win:"Ctrl-Shift-L R E S T"},command:{command:"resize active window",
args:{how:"top"}}},{keys:{mac:"Meta-Shift-L R E S B",win:"Ctrl-Shift-L R E S B"},command:{command:"resize active window",args:{how:"bottom"}}},{keys:{mac:"Meta-Shift-L R E S Escape",win:"Ctrl-Shift-L R E S Escape"},command:{command:"resize active window",args:{how:"reset"}}}],text:{basicFontItems:"Sans-serif;serif;Monospace;Arial Black;Arial Narrow;Comic Sans MS;Garamond;Tahoma;Trebuchet MS;Verdana;custom...".split(";"),cursorBlinkPeriod:.5,useSoftTabs:!0,tabWidth:2,markStackSize:16,undoLevels:50,
clipboardBufferLength:100,useMultiSelect:!0,undoGroupDelay:600,defaultKeyBindings:[{keys:{win:"Ctrl-C",mac:"Meta-C"},command:{command:"clipboard copy",passEvent:!0}},{keys:"Ctrl-W",command:{command:"manual clipboard copy",args:{"delete":!0}}},{keys:"Alt-W",command:"manual clipboard copy"},{keys:"Ctrl-Y",command:"manual clipboard paste"},{keys:"Alt-Y",command:{command:"manual clipboard paste",args:{killRingCycleBack:!0}}},{keys:{win:"Ctrl-X",mac:"Meta-X"},command:{command:"clipboard cut",passEvent:!0}},
{keys:{win:"Ctrl-V",mac:"Meta-V"},command:{command:"clipboard paste",passEvent:!0}},{keys:{win:"Ctrl-Z|Ctrl-Shift--",mac:"Meta-Z|Ctrl-Shift--|Ctrl-x u"},command:"text undo"},{keys:{win:"Ctrl-Shift-Z",mac:"Meta-Shift-Z"},command:"text redo"},{keys:{win:"Ctrl-A|Ctrl-X H",mac:"Meta-A|Ctrl-X H"},command:"select all"},{keys:{win:"Alt-Enter",mac:"Meta-D|Alt-Enter"},command:"doit"},{keys:{mac:"Meta-Shift-L X B"},command:"eval all"},{keys:{win:"Alt-Ctrl-Enter",mac:"Meta-P"},command:"printit"},{keys:{win:"Alt-Ctrl-Shift-Enter",
mac:"Meta-I"},command:"print inspectit"},{keys:{win:"Ctrl-Shift-I",mac:"Meta-Shift-I"},command:"inspectit"},{keys:{win:"Ctrl-Shift-E",mac:"Meta-Shift-E"},command:"editit"},{keys:{win:"Ctrl-Shift-U",mac:"Meta-Shift-U"},command:"undefine variable"},{keys:{win:"Alt-B",mac:"Alt-B"},command:"blame line"},{keys:{win:"Shift-Ctrl-B",mac:"Shift-Ctrl-B"},command:"blame selection"},{keys:"Backspace",command:"delete backwards"},{keys:"Shift-Backspace",command:"delete backwards"},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},
command:"delete"},{keys:{win:"Left|Ctrl-B",mac:"Left|Ctrl-B"},command:"go left"},{keys:{win:"Right|Ctrl-F",mac:"Right|Ctrl-F"},command:"go right"},{keys:{win:"Up|Ctrl-P",mac:"Up|Ctrl-P"},command:"go up"},{keys:{win:"Down|Ctrl-N",mac:"Down|Ctrl-N"},command:"go down"},{keys:"Shift-Left",command:"select left"},{keys:"Shift-Right",command:"select right"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-Right",mac:"Alt-Right|Alt-F"},command:"goto word right"},
{keys:{win:"Ctrl-Left",mac:"Alt-Left|Alt-B"},command:"goto word left"},{keys:{win:"Ctrl-Shift-Right",mac:"Alt-Shift-Right|Alt-Shift-F"},command:{command:"goto word right",args:{select:!0}}},{keys:{win:"Ctrl-Shift-Left",mac:"Alt-Shift-Left|Alt-Shift-B"},command:{command:"goto word left",args:{select:!0}}},{keys:{win:"Ctrl-Backspace",mac:"Alt-Backspace"},command:"delete word left"},{keys:"Alt-D",command:"delete word right"},{keys:{win:"Alt-Ctrl-K",mac:"Alt-Ctrl-K"},command:"delete word right"},{keys:"Alt-Shift-2",
command:"select word right"},{keys:"Ctrl-X Ctrl-X",command:"reverse selection"},{keys:{win:"Ctrl-Shift-L",mac:"Meta-L"},command:"select line"},{keys:{win:"Shift-Home",mac:"Shift-Home|Ctrl-Shift-A"},command:{command:"goto line start",args:{select:!0}}},{keys:{win:"Home",mac:"Home|Ctrl-A"},command:{command:"goto line start",args:{select:!1}}},{keys:{win:"Shift-End",mac:"Shift-End|Ctrl-Shift-E"},command:{command:"goto line end",args:{select:!0}}},{keys:{win:"End",mac:"End|Ctrl-E"},command:{command:"goto line end",
args:{select:!1}}},{keys:"Ctrl-C J",command:{command:"join line",args:{withLine:"before"}}},{keys:"Ctrl-C Shift-J",command:{command:"join line",args:{withLine:"after"}}},{keys:{win:"Ctrl-Shift-D",mac:"Meta-Shift-D|Ctrl-C P"},command:"duplicate line or selection"},{keys:{win:"Ctrl-Shift-Backspace",mac:"Meta-Backspace"},command:"delete left until beginning of line"},{keys:"Ctrl-K",command:"delete emtpy line or until end of line"},{keys:{win:"Ctrl-Alt-Up|Ctrl-Alt-P",mac:"Ctrl-Meta-Up|Ctrl-Meta-P"},command:"move lines up"},
{keys:{win:"Ctrl-Alt-Down|Ctrl-Alt-N",mac:"Ctrl-Meta-Down|Ctrl-Meta-N"},command:"move lines down"},{keys:{win:"PageDown",mac:"PageDown|Ctrl-V"},command:"goto page down"},{keys:{win:"PageUp",mac:"PageUp|Alt-V"},command:"goto page up"},{keys:{win:"Shift-PageDown",mac:"Shift-PageDown"},command:"goto page down and select"},{keys:{win:"Shift-PageUp",mac:"Shift-PageUp"},command:"goto page up and select"},{keys:"Alt-Ctrl-,",command:"move cursor to screen top in 1/3 steps"},{keys:"Alt-Ctrl-.",command:"move cursor to screen bottom in 1/3 steps"},
{keys:{win:"Alt-Left",mac:"Meta-Left"},command:"goto matching left"},{keys:{win:"Alt-Shift-Left",mac:"Meta-Shift-Left"},command:{command:"goto matching left",args:{select:!0}}},{keys:{win:"Alt-Right",mac:"Meta-Right"},command:"goto matching right"},{keys:{win:"Alt-Shift-Right",mac:"Meta-Shift-Right"},command:{command:"goto matching right",args:{select:!0}}},{keys:"Alt-Ctrl-B",command:"goto matching left"},{keys:"Alt-Ctrl-F",command:"goto matching right"},{keys:"Ctrl-Up",command:"goto paragraph above"},
{keys:"Ctrl-Down",command:"goto paragraph below"},{keys:{win:"Ctrl-Shift-Home",mac:"Meta-Shift-Up"},command:{command:"goto start",args:{select:!0}}},{keys:{win:"Ctrl-Shift-End",mac:"Meta-Shift-Down"},command:{command:"goto end",args:{select:!0}}},{keys:{win:"Ctrl-Home",mac:"Meta-Up|Meta-Home|Alt-Shift-,"},command:"goto start"},{keys:{win:"Ctrl-End",mac:"Meta-Down|Meta-End|Alt-Shift-."},command:"goto end"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{win:"Ctrl-Shift-L",mac:"Ctrl-Shift-L|Alt-G G"},
command:"goto line"},{keys:"Enter",command:"newline"},{keys:"Space",command:{command:"insertstring",args:{string:" ",undoGroup:!0}}},{keys:"Tab",command:{command:"tab - snippet expand or indent"}},{keys:{win:"Ctrl-]",mac:"Meta-]"},command:"indent"},{keys:{win:"Ctrl-[",mac:"Meta-["},command:"outdent"},{keys:{win:"Ctrl-Enter",mac:"Meta-Enter"},command:{command:"insert line",args:{where:"below"}}},{keys:"Shift-Enter",command:{command:"insert line",args:{where:"above"}}},{keys:"Ctrl-O",command:"split line"},
{keys:{mac:"Ctrl-X Ctrl-T"},command:"transpose chars"},{keys:{mac:"Ctrl-C Ctrl-U"},command:"uppercase"},{keys:{mac:"Ctrl-C Ctrl-L"},command:"lowercase"},{keys:{mac:"Meta-Shift-L W t"},command:"remove trailing whitespace"},{keys:{mac:"Ctrl-Space"},command:"toggle active mark"},{keys:{mac:"Meta-Shift-L M O D E"},command:"change editor mode"},{keys:{mac:"Meta-Shift-L L T"},command:"toggle line wrapping"},{keys:"Esc|Ctrl-G",command:"cancel input"},{keys:{win:"Ctrl-/",mac:"Meta-/"},command:"toggle comment"},
{keys:{win:"Alt-Ctrl-/",mac:"Alt-Meta-/|Alt-Meta-\u00f7"},command:"toggle block comment"},{keys:"Meta-Shift-L /  D",command:"comment box"},{keys:{win:"Ctrl-.",mac:"Meta-."},command:"[IyGotoChar] activate"},{keys:{win:"Ctrl-,",mac:"Meta-,"},command:{command:"[IyGotoChar] activate",args:{backwards:!0}}},{keys:{win:"Ctrl-Space|Ctrl-Shift-P",mac:"Alt-Shift-Space|Alt-Space|Meta-Shift-P"},command:"text completion"},{keys:"\u00f7|Alt-/",command:"text completion first match"},{keys:"Alt-Q",command:"fit text to column"},
{keys:{win:"Ctrl-F|Ctrl-G|F3",mac:"Meta-F|Meta-G|Ctrl-S"},command:"search in text"},{keys:{win:"Ctrl-Shift-F|Ctrl-Shift-G",mac:"Meta-Shift-F|Meta-Shift-G|Ctrl-R"},command:{command:"search in text",args:{backwards:!0}}},{keys:"Ctrl-Shift-/|Ctrl-C Ctrl-Shift-,",command:"[multi select] all like this"},{keys:"Alt-Ctrl-P",command:"[multi select] add cursor above"},{keys:"Alt-Ctrl-N",command:"[multi select] add cursor below"},{keys:"Ctrl-Shift-,",command:"[multi select] more like this backward"},{keys:"Ctrl-Shift-.",
command:"[multi select] more like this forward"},{keys:{mac:"Meta-Shift-,"},command:"[multi select] goto previous focused cursor"},{keys:{mac:"Meta-Shift-."},command:"[multi select] goto next focused cursor"},{keys:"Ctrl-Shift-;",command:"[multi select] remove focused cursor"},{keys:"Alt-Ctrl-A",command:"[multi select] align cursors"},{keys:"Ctrl-X R",command:"[multi select] create rectangular selection"},{keys:{win:"Shift-Ctrl-S|Ctrl-Alt-Space",mac:"Ctrl-Command-space|Ctrl-Alt-Space"},command:"contractRegion"},
{keys:{win:"Shift-Ctrl-E|Ctrl-Shift-Space",mac:"Shift-Command-Space|Ctrl-Shift-Space"},command:"expandRegion"},{keys:"Ctrl-Alt-h",command:"markDefun"},{keys:"Ctrl-Alt-d|Ctrl-Alt-Down",command:"forwardDownSexp"},{keys:"Ctrl-Alt-u|Ctrl-Alt-Up",command:"backwardUpSexp"},{keys:"Ctrl-Alt-b|Ctrl-Alt-Left",command:"backwardSexp"},{keys:"Ctrl-Alt-f|Ctrl-Alt-Right",command:"forwardSexp"},{keys:"Alt-.",command:"selectDefinition"},{keys:"Ctrl-Shift-'",command:"selectSymbolReferenceOrDeclaration"},{keys:"Ctrl-Shift-[",
command:"selectSymbolReferenceOrDeclarationPrev"},{keys:"Ctrl-Shift-]",command:"selectSymbolReferenceOrDeclarationNext"},{keys:{win:"Ctrl-=",mac:"Meta-="},command:"increase font size"},{keys:{win:"Ctrl--",mac:"Meta--"},command:"decrease font size"},{keys:"Alt-K",command:"set link of selection"},{keys:"Alt-O",command:"set doit of selection"},{keys:{win:"Ctrl-\\",mac:"Meta-\\"},command:"reset text style"},{keys:{win:"Ctrl-Shift-L T U I",mac:"Meta-Shift-L T U I"},command:"open text attribute controls"},
{keys:{win:"Ctrl-Shift-L T D",mac:"Meta-Shift-L T D"},command:"[todo] toggle todo marker"},{keys:{win:"Ctrl-Shift-L D A T E",mac:"Meta-Shift-L D A T E"},command:"insert date"},{keys:"Ctrl-C Ctrl-I",command:"change string inflection"},{keys:"Alt-Shift-4",command:"spell check word"},{keys:"Alt-Shift-\\",command:"[shell] run shell command on region"},{keys:"Alt-Shift-;",command:"run code on text morph"},{keys:{win:"Ctrl-Shift-L O P E N",mac:"Meta-Shift-L O P E N"},command:"open file at cursor"},{keys:"Meta-F1",
command:"report token at cursor"}]},codeEditor:{defaultTheme:"default",collapseSelection:!1,search:{maxCharsPerLine:1E4,fastHighlightLineCount:4E3,showTextMap:!0},defaultStyle:{fontFamily:"IBM Plex Mono",padding:$k.Rectangle.inset(4,2,4,2),fontSize:12,clipMode:"auto"},modes:{text:{style:{}}}},systemBrowser:{fixUndeclaredVarsOnSave:!0},objectEditor:{fixUndeclaredVarsOnSave:!0},remotes:{server:"undefined"!==typeof System&&System.get("@system-env").browser?"".concat(document.location.origin,"/eval"):
null},css:{ibmPlex:$k.joinPath($k.baseURL,"lively.morphic/assets/ibm-plex/css/ibm-plex.css"),fontAwesome:$k.joinPath($k.baseURL,"/lively.morphic/assets/fontawesome-free-6.1.1-web/css/all.css"),inconsolata:$k.joinPath($k.baseURL,"/lively.morphic/assets/inconsolata/inconsolata.css")},defaultImage:"data:image/svg+xml;base64,PCEtLT94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8tLT4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHY9IiIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSI+CiAgPHRpdGxlPkxpdmVseSBXZWIgTG9nbzwvdGl0bGU+CiAgPGRlc2NyaXB0aW9uPmh0dHBzOi8vbGl2ZWx5LW5leHQub3JnPC9kZXNjcmlwdGlvbj4KICA8ZGVmcz48L2RlZnM+CiAgPGcgaWQ9ImxvZ28iIHRyYW5zZm9ybT0ic2NhbGUoMikiPgogICAgPHBhdGggZD0iTTU3LjExMzEwNzksMTQuNzA3IEM1Ni4zMDUxMDc5LDE3LjAxNyA1NS42MDcxMDc5LDE5LjM2MiA1NC43OTkxMDc5LDIxLjY3MSBDNTQuMzYxMTA3OSwyMi45MjYgNTMuODk0MTA3OSwyMy41MTggNTMuMjAxMTA3OSwyMy41MTggQzUyLjc0MzEwNzksMjMuNTE4IDUyLjE4NTEwNzksMjMuMjYgNTEuNDc0MTA3OSwyMi43NjcgQzQ5LjQwMTEwNzksMjEuMzIgNDcuNDAzMTA3OSwxOS43NjUgNDUuMzE4MTA3OSwxOC4zMjggQzQ0LjIyNzEwNzksMTcuNTczIDQzLjE4NTEwNzksMTcuMTk2IDQyLjIwMTEwNzksMTcuMTk2IEM0MC44NDcxMDc5LDE3LjE5NiAzOS41OTgxMDc5LDE3LjkwNCAzOC40NTUxMDc5LDE5LjMyNCBDMzcuMzE2MTA3OSwyMC43MzcgMzYuMjY5MTA3OSwyMi4yMzEgMzUuMjMyMTA3OSwyMy43MjUgQzMzLjI3NjEwNzksMjYuNTI1IDMzLjY0NDEwNzksMjguODUgMzYuMzcxMTA3OSwzMC45MDMgQzM4LjMzMTEwNzksMzIuMzc3IDQwLjM1MTEwNzksMzMuNzY4IDQyLjMwOTEwNzksMzUuMjQ0IEM0NC4xNTExMDc5LDM2LjYyOSA0NC4xMjgxMDc5LDM3LjQ2NyA0Mi4yMzcxMDc5LDM4Ljg3IEM0MC4yMDYxMDc5LDQwLjM4MiAzOC4xMDUxMDc5LDQxLjggMzYuMTEyMTA3OSw0My4zNTMgQzMzLjczNDEwNzksNDUuMjAzIDMzLjM1OTEwNzksNDcuNTMzIDM1LjAxNjEwNzksNTAuMDE0IEMzNi4xMTIxMDc5LDUxLjY1NyAzNy4yNjQxMDc5LDUzLjI3MSAzOC41MTkxMDc5LDU0Ljc5NyBDMzkuNjY1MTA3OSw1Ni4xOTggNDAuODcyMTA3OSw1Ni44ODcgNDIuMTgyMTA3OSw1Ni44ODcgQzQzLjE4MDEwNzksNTYuODg3IDQ0LjIzNjEwNzksNTYuNDg4IDQ1LjM4MDEwNzksNTUuNjk1IEM0Ny4zMzAxMDc5LDU0LjM0NCA0OS4yMTcxMDc5LDUyLjkwMSA1MS4xNDIxMDc5LDUxLjUxOSBDNTIuMDg3MTA3OSw1MC44MzggNTIuNzQ0MTA3OSw1MC40NzcgNTMuMjUzMTA3OSw1MC40NzcgQzUzLjk0NzEwNzksNTAuNDc3IDU0LjM2NDEwNzksNTEuMTYgNTQuODcwMTA3OSw1Mi42MzggQzU1LjY3OTEwNzksNTUuMDI4IDU2LjM4NTEwNzksNTcuNDU4IDU3LjI1NTEwNzksNTkuODI1IEM1OC4wNTExMDc5LDYxLjk5NSA1OS41MDUxMDc5LDYzLjA5NCA2MS40NDAxMDc5LDYzLjA5NCBDNjIuMDE4MTA3OSw2My4wOTQgNjIuNjM5MTA3OSw2Mi45OTYgNjMuMzAxMTA3OSw2Mi44IEM2NC45NjQxMDc5LDYyLjMwNyA2Ni42MjAxMDc5LDYxLjc4IDY4LjI2MTEwNzksNjEuMjE2IEM3MS43MjExMDc5LDYwLjAzMSA3Mi44MDQxMDc5LDU3Ljk0NCA3MS43MzYxMDc5LDU0LjQwNyBDNzEuMDI4MTA3OSw1Mi4wNjYgNzAuMjMxMTA3OSw0OS43NTEgNjkuNDQ1MTA3OSw0Ny40MzcgQzY4LjgwNDEwNzksNDUuNTUgNjkuNTU2MTA3OSw0NC43MzcgNzEuNDM4MTA3OSw0NC43MzQgQzcxLjU5NzEwNzksNDQuNzM0IDcxLjc2MDEwNzksNDQuNzMyIDcxLjkyMjEwNzksNDQuNzMyIEM3My4xOTcxMDc5LDQ0LjczMiA3NC40NzMxMDc5LDQ0Ljc0MyA3NS43NTExMDc5LDQ0Ljc0MyBDNzYuOTI0MTA3OSw0NC43NDMgNzguMDk2MTA3OSw0NC43MzQgNzkuMjcwMTA3OSw0NC42OTggQzgyLjM5NDEwNzksNDQuNiA4NC4wNDMxMDc5LDQyLjkwOSA4NC4xNDQxMDc5LDM5Ljc4MSBDODQuMTk1MTA3OSwzOC4xMTkgODQuMTY2MTA3OSwzNi40NTcgODQuMTUzMTA3OSwzNC43OTUgQzg0LjEyMTEwNzksMzEuMTY0IDgyLjQ2NDEwNzksMjkuMzkxIDc4Ljg0NzEwNzksMjkuMjUgQzc4LjAxODEwNzksMjkuMjE5IDc3LjE4ODEwNzksMjkuMjEgNzYuMzU5MTA3OSwyOS4yMSBDNzUuMTMwMTA3OSwyOS4yMSA3My44OTkxMDc5LDI5LjIzIDcyLjY2OTEwNzksMjkuMjMgTDcyLjIwMTEwNzksMjkuMjMgQzY5LjAwODEwNzksMjkuMjE0IDY4Ljc2MzEwNzksMjguODM4IDY5Ljc1NDEwNzksMjUuNzQyIEM3MC42NDMxMDc5LDIyLjk2OSA3MS40OTIxMDc5LDIwLjE4MiA3Mi4xNjExMDc5LDE4LjAzMiBDNzIuMDk2MTA3OSwxNS4zNTQgNzEuMDI4MTA3OSwxMy44NDQgNjguOTQ2MTA3OSwxMy4wNzUgQzY3LjE3MjEwNzksMTIuNDIyIDY1LjM1NzEwNzksMTEuODY1IDYzLjUzODEwNzksMTEuMzM0IEM2Mi43NzcxMDc5LDExLjExMSA2Mi4wODIxMDc5LDExIDYxLjQ1MTEwNzksMTEgQzU5LjM4MjEwNzksMTEgNTcuOTg3MTA3OSwxMi4yMDcgNTcuMTEzMTA3OSwxNC43MDcgWiBNNjIuMTA3MjE5OCwxNS4zMjQ0ODc0IEM2My42NjI2MzIsMTUuNzc5NTA4MSA2NS40OTQ1ODQxLDE2LjMzMTUzMzIgNjcuMjQyNjc1OCwxNi45NzY1NjI1IEM2Ny40OTcyNTIyLDE3LjA3MDU2NjggNjcuNjEyMDYxMiwxNy4xNTM1NzA1IDY3LjYzMTAyOTcsMTcuMTczNTcxNSBDNjcuNjMxMDI5NywxNy4xNzU1NzE1IDY3LjcxMjg5MzUsMTcuMjk3NTc3MSA2Ny43NjU4MDU0LDE3LjY2MDU5MzYgTDY3LjM0MjUwOTcsMTkuMDI4NjU1OCBDNjYuODEyMzkxNywyMC43NDc3MzM5IDY2LjQxNDcyNTYsMjIuNTMyMzQyNCA2NS43OTg3NTA0LDI0LjQ1NzQyOTkgQzY1LjI0ODY2NTYsMjYuMTY4NTA3NyA2NC40MjQwMzc1LDI4Ljc1MzYyNTIgNjYuMDM5MzUwMSwzMC45ODM3MjY1IEM2Ny42NTE2Njc2LDMzLjIxMDgyNzggNzAuMzEwMjQ0NSwzMy4yMjI4MjgzIDcyLjA2OTMxNzksMzMuMjI4ODI4NiBMNzIuNTU2NTA3MywzMy4yMzE4Mjg3IEM3My4xODE0Njc1LDMzLjIzMTgyODcgNzMuODA2NDI3OCwzMy4yMjQ4Mjg0IDc0LjQzMjM4NjQsMzMuMjIwODI4MiBDNzUuMDM0Mzg0OCwzMy4yMTY4MjggNzQuNzE5NjA1NywzMy4xNzc3MzI1IDc1LjMyMTYwNDEsMzMuMTc3NzMyNSBDNzYuMjI5MDk0MywzMy4xNzc3MzI1IDc0LjgzMjY2NTksMzMuMTcwOTkyNCA3NS41MTE1MzY0LDMzLjE5Njk5MzUgQzc2LjM2NjExNDYsMzMuMjI4OTk1IDc2LjY5MDU3NDgsMzMuMzkxMDAyNCA3Ni43MTU1MzMzLDMzLjM5MTAwMjQgQzc2Ljc0MDQ5MTgsMzMuNDM0MDA0MyA3Ni45MTMyMDQ0LDMzLjc3ODAyIDc2LjkyMDE5MjgsMzQuNzMyMDYzMyBMNzYuOTI5MTc3OCwzNS41NTAxMDA1IEM3Ni45NDMxNTQ2LDM2LjkzOTE2MzYgNzYuOTU3MTMxMywzOC4yNDkyMjMyIDc2LjkxNDIwMjgsMzkuNTUxMjgyNCBDNzYuOTAwMjI2LDQwLjA0MDMwNDYgNzYuODIwMzU4OSw0MC4zMTczMTcyIDc2Ljc3MzQzNyw0MC40MjQzMjIxIEM3Ni42NzI2MDQ3LDQwLjQ2NTMyMzkgNzYuNDE1MDMzMiw0MC41MzgzMjcyIDc1Ljk2Mzc4NCw0MC41NTMzMjc5IEM3NC45ODQ0MTM0LDQwLjU4MzMyOTMgNzYuMDc5MzQzNCw0MC42MTYwNzA2IDc0LjcxNDYxNCw0MC42MTYwNzA2IEM3NC4wODE2NjcsNDAuNjE2MDcwNiA3NC4zNzA0ODkzLDQwLjY0NjE2NTcgNzMuNzM5NTM5MSw0MC42NDQxNjU2IEM3My4wOTc2MDcxLDQwLjY0MDE2NTUgNzIuNDUwNjgzNCw0MC42MzYxNjUzIDcxLjgxMDc0ODEsNDAuNjM2MTY1MyBMNzEuMzE2NTcwMiw0MC42MzkxNjU0IEM2OC4zNzk0NTY4LDQwLjY0NDE2NTYgNjYuODQyMDE0Nyw0MS45MzUyMjQzIDY2LjA2ODMwMTksNDMuMDE3MjczNSBDNjUuMzAxNTc3Niw0NC4wOTUzMjI1IDY0LjU4MDc3NjgsNDUuOTU0NDA3IDY1LjUxMDIzMDQsNDguNjkzNTMxNSBMNjUuNzUwODMwMSw0OS4zOTE1NjMzIEM2Ni40MzE2OTczLDUxLjQwNjY1NDggNjUuNTE2MTIzNiw0OC4zMDA1NDIzIDY2LjEyNzEwNzEsNTAuMzM4NjM0OSBDNjYuMzUxNzMzMyw1MS4wODA2Njg2IDY2LjM1NzcyMzQsNTEuNDYxNjg1OSA2Ni4zNDY3NDE3LDUxLjYwMTY5MjMgQzY2LjI0MDkxNzcsNTEuNjkwNjk2NCA2NS45MzU0MjYsNTEuOTAzNzA2IDY1LjIxOTYxNjksNTIuMTQ4NzE3MiBDNjMuNjM3MjQ5NSw1Mi42OTE3NDE5IDYyLjAyNzkyNyw1My4yMDU3NjUyIDYwLjQyNzU4OTUsNTMuNjgwNzg2OCBDNjAuMDU4MjA0MSw1My43ODk3OTE4IDU5LjgyNjU4OTQsNTMuODA2NzkyNSA1OS43MjA3NjU1LDUzLjgwNjc5MjUgQzU5LjU4Nzk4NjQsNTMuNzI5Nzg5IDU5LjQ2MzE5NCw1My41Mzc3ODAzIDU5LjMzNDQwODMsNTMuMTg3NzY0NCBDNTguODM2MjM3MSw1MS44Mjc3MDI2IDU5LjEzNjE0ODcsNTIuOTQzNjQxMSA1OC42Njg5MjYsNTEuNDgyNTc0NiBDNTguMzYwNDM5Myw1MC41MTc1MzA4IDU4LjkzNzE2NjIsNTIuMjQ3NjkzMSA1OC42MTA3MDkzLDUxLjI4NzY0OTQgQzU4LjE5OTM5MzcsNTAuMDc0NTk0MyA1Ni45NDc0NzY1LDQ2LjM4MjQyNjUgNTMuMTcyNzU2Niw0Ni4zODI0MjY1IEM1MS4zNjQ3NjQ2LDQ2LjM4MjQyNjUgNDkuOTIwMTY4MSw0Ny4zMTI0Njg3IDQ4LjcwNzE4NjEsNDguMTgzNTA4MyBDNDcuOTM5NDYzNCw0OC43Mzc1MzM1IDQ5LjM0OTQxNCw0Ny43MjEwNDU4IDQ4LjU4NjY4Myw0OC4yODMwNzE0IEM0Ny40MTc2MjgsNDkuMTQ2MTEwNiA0OC44NTIwMzYxLDQ4LjA1MjEyNzcgNDcuNzE3OTIzLDQ4Ljg0MDE2MzUgQzQ3LjI3OTY1MjIsNDkuMTQ0MTc3MyA0Ny4wMTAxMDA2LDQ5LjI1MzE4MjMgNDYuODk1MjkxNiw0OS4yOTIxODQxIEM0Ni43OTY0NTYxLDQ5LjIyNDE4MSA0Ni41ODg4MDE1LDQ5LjA1NzE3MzQgNDYuMjk4Mjg0OSw0OC43MDIxNTcyIEM0NS4yNjc5OTksNDcuNDQyMSA0NC4yMDE3NzI5LDQ1Ljk4NDAzMzcgNDMuMDM2NzExMyw0NC4yMzU5NTQyIEM0Mi43OTQxMTQ5LDQzLjg3MTkzNzcgNDIuNzI3MjI2Miw0My42NTE5Mjc3IDQyLjcwOTI1NjEsNDMuNTY4OTIzOSBDNDIuNzUyMTg0Niw0My40OTQ5MjA1IDQyLjg4OTk1NTQsNDMuMzAxOTExOCA0My4yNDkzNTc1LDQzLjAxNzg5ODkgQzQ0LjM3MzQ4NzIsNDIuMTQyODU5MSA0Mi45ODk5OTQ0LDQzLjIyMjg0MTQgNDQuMjE1OTU0Nyw0Mi4zNDU4MDE1IEM0NS4wNjY1Mzk2LDQxLjczNDc3MzcgNDMuNzQ3NDM3OCw0Mi42OTkyNTkxIDQ0LjU4NzA0MDksNDIuMDczMjMwNiBDNDUuNDIyNjUwNyw0MS40NTEyMDIzIDQ3LjY0Mjk1NjcsMzkuNzk5MTI3MiA0Ny42NDg5NDY4LDM2Ljk5Njk5OTkgQzQ3LjY1OTkyODUsMzQuMjA4ODczMSA0NS40OTM1MzI4LDMyLjU3Njc5ODkgNDQuNjc4ODg4MSwzMS45NjA3NzA5IEM0My42Nzk1NTA4LDMxLjIwOTczNjggNDIuNjY0MjQsMzAuNDczNzAzNCA0MS42NDQ5MzU4LDI5Ljc0MTY3MDEgQzQwLjY3NTU0ODYsMjkuMDQzNjM4MyA0Mi42MzkxNTI0LDMwLjU5NTkyOTEgNDEuNjg1NzM4NiwyOS44NzY4OTY0IEM0MS4yMDU1Mzc2LDI5LjUxMzg3OTkgNDEuMDEwODYxNCwyOS4yNjY4Njg3IDQwLjk0MTk3NjEsMjkuMTU5ODYzOCBDNDAuOTc1OTE5NiwyOS4wMzY4NTgyIDQxLjA4NTczNjksMjguNzM4ODQ0NyA0MS40MjcxNjg4LDI4LjI0MzgyMjIgQzQyLjQwNjUzOTQsMjYuODQxNzU4NSA0My40MTI4NjUyLDI1LjM5MjY5MjYgNDQuNDc5MDkxMywyNC4wNjk2MzI1IEM0NC43ODA1ODk2LDIzLjY5MjYxNTMgNDUuMDA3MjEyNiwyMy41MTc2MDc0IDQ1LjExMDA0MTUsMjMuNDU5NjA0NyBDNDUuMjI3ODQ1NSwyMy40ODY2MDYgNDUuNDk0NDAyLDIzLjU4OTYxMDYgNDUuODkyNzM5MywyMy44NjQ2MjMxIEM0Ni45MjMwMjUyLDI0LjU3NzY1NTUgNDQuOTk3MzU4MywyMy4wNjYzNjY3IDQ2LjA2MDU4OTQsMjMuODUxNDAyMyBDNDcuMDM5OTU5OSwyNC41NzM0MzUyIDQ4LjA1MjI3NTcsMjUuMzE1NDY4OSA0OS4wODc1NTMzLDI2LjAzOTUwMTggQzQ5Ljk5NjA0MTgsMjYuNjc1NTMwNyA1MS40MDM2OTk5LDI3LjUxODU2OSA1My4xMjA4NDMsMjcuNTE4NTY5IEM1NC44NjE5NDYzLDI3LjUxODU2OSA1Ny4yMTQwMzMsMjYuNzI2NTMzIDU4LjUyOTg0MzksMjIuOTU5MzYxOCBDNTguOTQ0MTU0NiwyMS43NjgzMDc3IDU5LjMzNDUwNTEsMjAuNTcwMjUzMiA1OS43MjM4NTc0LDE5LjM3MDE5ODYgQzYwLjA4NzI1MjgsMTguMjQyMTQ3NCA2MC4yNTMzMDQyLDE3LjI2NDU3NTYgNjAuNjQxNjU4MSwxNi4xNDU1MjQ3IEM2MC44NTQzMDQzLDE1LjU0MjQ5NzMgNjEuMDM3MDAwMywxNS4yNjA0ODQ1IDYxLjEyMzg1NTgsMTUuMTQ5NDc5NSBDNjEuMjkzNTczNSwxNS4xNDk0Nzk1IDYxLjU5NTA3MTksMTUuMTcxNDgwNSA2Mi4xMDcyMTk4LDE1LjMyNDQ4NzQgWiIgaWQ9ImVuZ2luZSIgZmlsbD0iI2ZmNzcwMCI+PC9wYXRoPgogIDwvZz4KPC9zdmc+Cg=="};
var al=Lc("A",$k.config);$k["default"]=al;var Ni=window.lively.FreezerRuntime.recorderFor("lively.serializer2/class-helper.js");Ni.getClassName=en;Ni.getSerializableClassMeta=Ht;Ni.locateClass=Er;Ni.arr=mh;Ni.string=ji;Ni.classMetaForSerializationProp="lively.serializer-class-info";Ni.classSuperClassProp=Symbol["for"]("lively-instance-superclass");Ni.classNameProp=Symbol["for"]("__LivelyClassName__");Ni.moduleMetaInClassProp=Symbol["for"]("lively-module-meta");Ni.getClassName=en;Ni.getSerializableClassMeta=
Ht;Ni.locateClass=Er;var OA=Lc("bS",function(){function l(b){rd(this,l);this.options=Object.assign({ignoreClassNotFound:!0},b);this[Symbol["for"]("lively-instance-restorer")]=!0}Ac(l,[{key:"sourceModuleNameProperty",get:function(){return"__SourceModuleName__"}}],[{key:"moduleMetaInClassProp",get:function(){return Ni.moduleMetaInClassProp}},{key:"classMetaForSerializationProp",get:function(){return Ni.classMetaForSerializationProp}},{key:"classSuperClassProp",get:function(){return Ni.classSuperClassProp}},
{key:"classNameProperty",get:function(){return Ni.classNameProp}}]);Ac(l,[{key:"addClassInfo",value:function(b,c,g){(b=Ni.getSerializableClassMeta(c))&&(g[Ni.classMetaForSerializationProp]=b)}},{key:"restoreIfClassInstance",value:function(b,c){if(c.hasOwnProperty(Ni.classMetaForSerializationProp)&&(b=c[Ni.classMetaForSerializationProp],b.className)){c=Ni.locateClass(b);if(!c||"function"!==typeof c){c="Trying to deserialize instance of ".concat(JSON.stringify(b)," but this class cannot be found!");
if(!this.options.ignoreClassNotFound)throw Error(c);console.error(c);return{isClassPlaceHolder:!0,className:b.className}}return c.hasOwnProperty(Symbol["for"]("lively-instance-superclass"))?new c(this):new c}}}],[{key:"sourceModulesInObjRef",value:function(b){var c=[];(b=b&&b[Ni.classMetaForSerializationProp])&&b.module&&c.push(b.module);return c}},{key:"sourceModulesIn",value:function(b){var c=[];Object.keys(b).forEach(function(g){(g=b[g])&&g[Ni.classMetaForSerializationProp]&&c.push(g[Ni.classMetaForSerializationProp])});
return Ni.arr.uniqBy(c,function(g,a){var d=g.module,f=a.module;return!d&&!f||d&&!f||!d&&f?g.className===a.className:g.className===a.className&&d["package"].name===f["package"].name&&d["package"].pathInPackage===f["package"].pathInPackage})}}]);return l}());Ni.ClassHelper=OA;Ni["default"]=OA;var Kg=window.lively.FreezerRuntime.recorderFor("lively.serializer2/plugins/expression-serializer.js");Kg.deserializeSpec=Xo;Kg.serializeNestedProp=OI;Kg.getExpression=function(l,b,c){var g=c.exprSerializer,a=
c.asExpression;c=c.nestedExpressions;try{if(b=b[Symbol["for"]("__LivelyClassName__")]?g.exprStringDecode(g.getExpressionForFunction(b)):b.__serialize__(),a){var d=Kg.string.newUUID();c[d]=b;b=d}else b=b.__expr__?g.exprStringEncode(b):b}catch(f){console.log("[export to JSON] failed converting ".concat(l," to serialized expression"))}return b};Kg.getArrayExpression=function(l,b,c,g){return b.map(function(a,d){return a&&a.isMorph?Kg.serializeSpec(a,Object.assign({},g,{path:c?c+"."+l+"."+d:l+"."+d})):
a&&a.__serialize__?Kg.getExpression(l+"."+d,a,g):a})};Kg.serializeSpec=Wn;Kg.string=ji;Kg.Closure=vn;Kg.Path=Nh;Kg.obj=nh;Kg.properties=op;Kg.arr=mh;Kg.getSerializableClassMeta=Ht;Kg.getClassName=en;Kg.connect=Xp;Kg.joinPath=jf;var Xn=Lc("aS",function(){function l(b){rd(this,l);b=Object.assign({prefix:"__lv_expr__"},b).prefix;this._decanonicalized={};this.prefix=b+":"}Ac(l,[{key:"isSerializedExpression",value:function(b){return 0===b.indexOf(this.prefix)}},{key:"requiredModulesOf__expr__",value:function(b){return this.isSerializedExpression(b)?
(b=this.exprStringDecode(b).bindings)?Object.keys(b):null:null}},{key:"exprStringDecode",value:function(b){var c=b.indexOf(":");b=b.slice(c+1);for(var g={},a=!1;b&&b.startsWith("{")&&0<=(c=b.indexOf("}:"));){a=!0;var d=b.slice(1,c);b=b.slice(c+2);b.includes("https:")&&b.indexOf("https:")<b.indexOf(":")&&(b=b.replace("https:","__HTTP_PLACEHOLDER__"),c=b.indexOf(":")-20+6,b=b.replace("__HTTP_PLACEHOLDER__","https:"));b.includes("local:")&&b.indexOf("local:")<b.indexOf(":")?(b=b.replace("local:","__HTTP_PLACEHOLDER__"),
c=b.indexOf(":")-20+6,b=b.replace("__HTTP_PLACEHOLDER__","local:")):c=b.indexOf(":");var f=b.slice(0,c);d=d.split(",").filter(function(k){return!!k.trim()}).map(function(k){if(!k.includes(":"))return k;k=k.split(":");k=Nb(k,2);return{exported:k[0],local:k[1]}});g[f]=d;b=b.slice(c+1)}return{__expr__:b,bindings:a?g:null}}},{key:"exprStringEncode",value:function(b){var c=b.bindings;b=String(b.__expr__);if(c)for(var g=Object.keys(c),a=0;a<g.length;a++){var d=g[a],f=c[d];Array.isArray(f)&&(f=f.map(function(k){return"string"===
typeof k?k:k.exported+":"+k.local}).join(","));b="{".concat(f,"}:").concat(d,":").concat(b)}return this.prefix+b}},{key:"getExpressionForFunction",value:function(b){var c=b[Symbol["for"]("lively-module-meta")];return this.exprStringEncode({__expr__:b.name,bindings:Pc({},Kg.joinPath(c["package"].name,c.pathInPackage),[b.name])})}},{key:"convert__expr__obj",value:function(b){console.assert("__expr__"in b,"obj has no property __expr__");return this.prefix+b.__expr__}},{key:"__eval__",value:function(b,
c){return Kg.__eval__(b,c)}},{key:"deserializeExpr",value:function(b){if(!b.startsWith(this.prefix))throw Error('"'.concat(b,'" is not a serialized expression, missing prefix "').concat(this.prefix,'"'));return this.deserializeExprObj(this.exprStringDecode(b))}},{key:"resolveModule",value:function(b){return this._decanonicalized[b]||(this._decanonicalized[b]=System.decanonicalize(b))}},{key:"getModuleRecorder",value:function(b){return(b=System.get("@lively-env").loadedModules[this.resolveModule(b)])?
b.recorder:{}}},{key:"getModuleExports",value:function(b){return(b=System.get("@lively-env").loadedModules[this.resolveModule(b)])?b.record().exports:{}}},{key:"deserializeExprObj",value:function(b){var c=b.__expr__;b=b.bindings;var g={};if(b)for(var a=b?Object.keys(b):[],d=0;d<a.length;d++){var f=a[d],k=b[f];if(lively.FreezerRuntime){var n=lively.FreezerRuntime.get(lively.FreezerRuntime.decanonicalize(f));if(!n){var p=lively.FreezerRuntime.fetchStandaloneFor(f);p&&(n=p.exports)}n.exports&&(n=n.exports)}else(n=
System.get(this.resolveModule(f)))||(n=this.getModuleExports(f));if(!n)throw Error("[lively.serializer] expression eval: bindings specify to import ".concat(f," but this module is not loaded!\nSource: ").concat(c));for(p=0;p<k.length;p++){var q=k[p],r=void 0,t=void 0;"string"===typeof q?t=r=q:"object"===Jc(q)&&(Kg.__inter0__=q,r=Kg.__inter0__.local,t=Kg.__inter0__.exported);g[r]=n[t]?n[t]:this.getModuleRecorder(f)[t];c="var ".concat(r," = __boundValues__.").concat(r,";\n").concat(c)}}return this.__eval__(c,
g)}},{key:"embedValue",value:function(b,c){if(b&&b.__serialize__&&(b=b.__serialize__())&&b.__expr__)if(c){var g=Kg.string.newUUID();c[g]=b;b=g}else b=this.exprStringEncode(b);return b}}]);return l}());Kg.ExpressionSerializer=Xn;Kg.__eval__=Kg.Closure.fromSource("function __eval__(__source__, __boundValues__) { \n  return eval(__source__); \n}").getFunc();Kg.deserializeSpec=Xo;Kg.serializeNestedProp=OI;Kg.serializeSpec=Wn;Kg["default"]=Xn;var Dh=window.lively.FreezerRuntime.recorderFor("lively.bindings/index.js");
Dh.connect=Xp;Dh.epiConnect=Vv;Dh.disconnect=It;Dh.disconnectAll=Wv;Dh.once=Jt;Dh.signal=Vl;Dh.callWhenNotNull=MB;Dh.callWhenPathNotNull=NB;Dh.noUpdate=Kt;Dh.string=ji;Dh.arr=mh;Dh.Closure=vn;Dh.obj=nh;Dh.stringifyFunctionWithoutToplevelRecorder=Sp;Dh.ExpressionSerializer=Xn;var VG=function(l){var b=window.lively.FreezerRuntime.recorderFor("lively.bindings/index.js"),c=b.hasOwnProperty("AttributeConnection")&&"function"===typeof b.AttributeConnection?b.AttributeConnection:b.AttributeConnection=function(g){if(!g||
!g[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(c,l,[{key:Symbol["for"]("lively-instance-initialize"),value:function(g,a,d,f,k){this.init(g,a,d,f,k)}},{key:"init",value:function(g,a,d,f,k){this.doNotSerialize=["isActive","converter","updater"];this.sourceObj=g;this.sourceAttrName=a;this.targetObj=d;this.targetMethodName=f;this.varMapping={source:g,target:d};k=Object.assign({removeAfterUpdate:!1,forceAttributeConnection:!1,
garbageCollect:!1,signalOnAssignment:!0,override:!1},k);k.removeAfterUpdate&&(this.removeAfterUpdate=!0);k.forceAttributeConnection&&(this.forceAttributeConnection=!0);"boolean"===typeof k.garbageCollect&&(this.garbageCollect=k.garbageCollect);"boolean"===typeof k.signalOnAssignment&&(this.signalOnAssignment=k.signalOnAssignment);k.converter&&this.setConverter(k.converter);k.updater&&this.setUpdater(k.updater);k.varMapping&&(this.varMapping=Object.assign(k.varMapping,this.varMapping));k.isEpiConnection&&
(this._isEpiConnection=!0);this.override=k.override;this.getSpec();return this}},{key:"__additionally_serialize__",value:function(g,a,d,f){delete this.varMapping._rev;Dh.arr.equals(Object.keys(this.varMapping),["source","target"])?delete g.props.varMapping:f("varMapping",this._getSerializableVarMapping())}},{key:"__after_deserialize__",value:function(g,a){this.varMapping||(this.varMapping={},this.varMapping.source=this.sourceObj,this.varMapping.target=this.targetObj);this.onSourceAndTargetRestored()}},
{key:"_getSerializableVarMapping",value:function(){for(var g=Object.assign({},this.varMapping),a=0,d=Object.keys(g);a<d.length;a++){var f=d[a];try{Dh.obj.isFunction(g[f])&&(g[f]=(new Dh.ExpressionSerializer).getExpressionForFunction(g[f]))}catch(k){throw Error("Cannot be serialized due to lack of module information: ".concat(f," in ").concat(this));}}return g}},{key:"onSourceAndTargetRestored",value:function(){this.sourceObj&&this.targetObj&&this.connect()}},{key:"copy",value:function(g){return Dh.AttributeConnection.fromLiteral(this.toLiteral(),
g)}},{key:"fixInstanceAfterCopyingFromSite",value:function(g,a,d){this.disconnect()}},{key:"clone",value:function(){var g=new this.constructor(this.getSourceObj(),this.getSourceAttrName(),this.getTargetObj(),this.getTargetMethodName(),this.getSpec());this.dependedBy&&(g.dependedBy=this.dependedBy);return g}},{key:"getTargetObj",value:function(){return this.targetObj}},{key:"getSourceObj",value:function(){return this.sourceObj}},{key:"getSourceAttrName",value:function(){return this.sourceAttrName}},
{key:"getTargetMethodName",value:function(){return this.targetMethodName}},{key:"getSourceValue",value:function(){return this.getSourceObj()[this.getSourceAttrName()]}},{key:"getPrivateSourceValue",value:function(){return this.sourceObj[this.privateAttrName(this.sourceAttrName)]}},{key:"getConverter",value:function(){if(!this.converterString)return null;this.converter||(this.converter=Dh.Closure.fromSource(this.converterString,this.varMapping).recreateFunc());return this.converter}},{key:"setConverter",
value:function(g){delete this.converter;return this.converterString=g?String(g):null}},{key:"getUpdater",value:function(){if(!this.updaterString)return null;this.updater||(this.updater=Dh.Closure.fromSource(this.updaterString,this.varMapping).recreateFunc());return this.updater}},{key:"setUpdater",value:function(g){delete this.updater;return this.updaterString=g?Dh.stringifyFunctionWithoutToplevelRecorder(g):null}},{key:"getSpec",value:function(){var g={};this.updaterString&&(g.updater=this.getUpdater());
this.converterString&&(g.converter=this.getConverter());this.removeAfterUpdate&&(g.removeAfterUpdate=!0);this.forceAttributeConnection&&(g.forceAttributeConnection=!0);this.hasOwnProperty("garbageCollect")&&(g.garbageCollect=this.garbageCollect);this.hasOwnProperty("signalOnAssignment")&&(g.signalOnAssignment=this.signalOnAssignment);g.override=!!this.override;return g}},{key:"resetSpec",value:function(){delete this.garbageCollect;delete this.signalOnAssignment;delete this.removeAfterUpdate;delete this.forceAttributeConnection;
delete this.converter;delete this.converterString;delete this.updater;delete this.updaterString}},{key:"privateAttrName",value:function(g){return"$$"+g}},{key:"activate",value:function(){this.isActive=!0}},{key:"deactivate",value:function(){delete this.isActive}},{key:"connect",value:function(){var g=this.getExistingConnection();g!==this&&(g&&g.disconnect(),this.addAttributeConnection());g=this.sourceObj;var a=this.sourceAttrName,d=this.forceAttributeConnection,f=g.__lookupSetter__(a),k=g.__lookupGetter__(a),
n=!f&&!k&&(this.getSourceValue()||this.getPrivateSourceValue());"function"!==typeof n||d?this.addSourceObjGetterAndSetter(k,f):n.isWrapped||this.addConnectionWrapper(g,a,n);return this}},{key:"disconnect",value:function(){var g=this,a=this.sourceObj;if(!a||!a.attributeConnections)return this.removeSourceObjGetterAndSetter();a.attributeConnections=a.attributeConnections.filter(function(f){return!g.isSimilarConnection(f)});var d=a.attributeConnections.filter(function(f){return g.getSourceAttrName()===
f.getSourceAttrName()});0===a.attributeConnections.length&&delete a.attributeConnections;0===d.length&&this.removeSourceObjGetterAndSetter();return null}},{key:"update",value:function(g,a){if(this.isActive)return null;var d=this,f=this.getUpdater(),k=this.getConverter(),n=this.targetObj,p=this.targetMethodName;if(!n||!p)return a="Cannot update "+this.toString(g)+" because of no target ("+n+") or targetProp ("+p+") ",this.isWeakConnection&&this.disconnect(),console.error(a),null;var q=n[p],r=function(w,
x,B,D,F,L){B=[w,x,B,D,F,L];k&&(g=k.call(d,w,x),w=B[0]=g);w="function"===typeof q?q.apply(n,B):n[p]=w;d.removeAfterUpdate&&d.disconnect();return w};try{return this.isActive=!0,f?f.call(this,r,g,a):r(g,a)}catch(w){var t=this.sourceObj&&"function"===typeof this.sourceObj.world&&this.sourceObj.world()||this.targetObj&&"function"===typeof this.targetObj.world&&this.targetObj.world();t?t.logError(w,"AttributeConnection>>update: "):console.error("Error when trying to update "+this+" with value "+g+":\n"+
w+"\n"+w.stack)}finally{delete this.isActive}return null}},{key:"addSourceObjGetterAndSetter",value:function(g,a){if(!(g&&g.isAttributeConnectionGetter||a&&a.isAttributeConnectionSetter)){var d=this.sourceObj,f=this.sourceAttrName,k=this.privateAttrName(f);d[k]&&console.warn("newAttrName "+k+" already exists.Are there already other connections?");d.hasOwnProperty("doNotSerialize")||(d.doNotSerialize=[]);Dh.arr.pushIfNotIncluded(d.doNotSerialize,k);d.hasOwnProperty("doNotCopyProperties")||(d.doNotCopyProperties=
[]);Dh.arr.pushIfNotIncluded(d.doNotCopyProperties,k);g&&(d.hasOwnProperty(f)?d.__defineGetter__(k,g):d.__defineGetter__(k,function(){return d.constructor.prototype.__lookupGetter__(f).bind(d)()}));a&&(d.hasOwnProperty(f)?d.__defineSetter__(k,a):d.__defineSetter__(k,function(n){d.constructor.prototype.__lookupSetter__(f).bind(d)(n)}));g||a||!d.hasOwnProperty(f)||(d[k]=d[f]);d.__defineSetter__(f,function(n){var p=d[k];d[k]=n;if(void 0===d.attributeConnections)return console.error("Sth wrong with sourceObj, has no attributeConnections"),
null;d.attributeConnections.forEach(function(q){q&&q.getSourceAttrName()===f&&q.signalOnAssignment&&q.update(n,p)});return n});d.__lookupSetter__(f).isAttributeConnectionSetter=!0;d.__defineGetter__(f,function(){return d[k]});d.__lookupGetter__(f).isAttributeConnectionGetter=!0}}},{key:"addConnectionWrapper",value:function(g,a,d){if("function"!==typeof d)throw Error("addConnectionWrapper didnt get a method to wrap");var f;if(f=g.hasOwnProperty(a)){g[this.privateAttrName(a)]=d;var k=function(){return d}}else k=
function(){return Object.getPrototypeOf(g)[a]};g[a]=function(){var n=this;if(void 0===this.attributeConnections)throw Error("[lively.bindings] Something is wrong with connection source object, it has no attributeConnections");var p=this.attributeConnections.filter(function(w){return w.getSourceAttrName()===a}),q=p.find(function(w){return!!w.hasOverride});if(q){var r;var t=(r=q.targetObj)[q.targetMethodName].apply(r,[function(){for(var w=arguments.length,x=Array(w),B=0;B<w;B++)x[B]=arguments[B];return n[a].originalFunction.apply(n,
x)}].concat(Array.prototype.slice.call(arguments)))}else t=this[a].originalFunction.apply(this,arguments);for(r=0;r<p.length;r++)p[r]!==q&&p[r].update(arguments[0]);return t};g[a].isOwnProperty=f;g[a].isWrapped=!0;g[a].isConnectionWrapper=!0;Object.defineProperty(g[a],"originalFunction",{get:k});g[a].toString=function(){return"<Wrapped ".concat(k(),">")}}},{key:"removeSourceObjGetterAndSetter",value:function(){var g=this.sourceAttrName,a=this.privateAttrName(g),d=this.sourceObj;if(d){if(d.__lookupGetter__(g)){if(delete d[g],
d.hasOwnProperty(a)){try{d[g]=d[a]}catch(k){}delete d[a]}}else if(d[g]&&d[g].isConnectionWrapper){var f=d[g];delete d[g];d[g]||(d[g]=f.originalFunction)}d.doNotSerialize&&d.doNotSerialize.includes(a)&&(d.doNotSerialize=Dh.arr.without(d.doNotSerialize,a),0===d.doNotSerialize.length&&delete d.doNotSerialize);d.doNotCopyProperties&&d.doNotCopyProperties.includes(a)&&(d.doNotCopyProperties=Dh.arr.without(d.doNotCopyProperties,a),0===d.doNotCopyProperties.length&&delete d.doNotCopyProperties)}}},{key:"addAttributeConnection",
value:function(){this.sourceObj.attributeConnections||(this.sourceObj.attributeConnections=[]);this.sourceObj.attributeConnections.push(this)}},{key:"getExistingConnection",value:function(){var g=this.sourceObj&&this.sourceObj.attributeConnections;if(!g)return null;for(var a=0,d=g.length;a<d;a++)if(this.isSimilarConnection(g[a]))return g[a];return null}},{key:"isRecursivelyActivated",value:function(){return this.isActive}},{key:"isSimilarConnection",value:function(g){return g&&g.constructor===this.constructor?
this.sourceObj===g.sourceObj&&this.sourceAttrName===g.sourceAttrName&&this.targetObj===g.targetObj&&this.targetMethodName===g.targetMethodName:!1}},{key:"hasOverride",get:function(){return this.override}},{key:"toString",value:function(g){try{return Dh.string.format("AttributeConnection(%s.%s %s %s.%s)",this.getSourceObj(),this.getSourceAttrName(),g?"--\x3e"+String(g)+"--\x3e":"--\x3e",this.getTargetObj(),this.getTargetMethodName())}catch(a){return"<Error in AttributeConnection>>toString>"}}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"AttributeConnection"}}],b,{pathInPackage:function(){return"./index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.bindings",version:"0.1.2"}}},{start:236,end:18276})}(void 0);Dh.AttributeConnection=VG;Dh.AttributeConnection=VG;Dh.callWhenNotNull=MB;Dh.callWhenPathNotNull=NB;Dh.connect=Xp;Dh.epiConnect=Vv;Dh.disconnect=It;Dh.disconnectAll=
Wv;Dh.once=Jt;Dh.signal=Vl;Dh.noUpdate=Kt;var k2=Object.freeze({__proto__:null,AttributeConnection:VG,callWhenNotNull:MB,callWhenPathNotNull:NB,connect:Xp,epiConnect:Vv,disconnect:It,disconnectAll:Wv,once:Jt,signal:Vl,noUpdate:Kt});Lc("ca",k2);var WG=window.lively.FreezerRuntime.recorderFor("lively.serializer2/object-extensions.js");Object.defineProperty(Symbol.prototype,"__serialize__",{configurable:!0,value:function(){var l=function(){return Object.getOwnPropertyNames(Symbol).filter(function(c){return"symbol"===
Jc(Symbol[c])}).reduce(function(c,g){return c.set(Symbol[g],"Symbol."+g)},new Map)}(),b=/^Symbol\((.*)\)$/;return function(){var c="function"===typeof this[Symbol.toPrimitive]?this[Symbol.toPrimitive]():this,g=Symbol.keyFor(c);if(g)return{__expr__:'Symbol.for("'.concat(g,'")')};if(l.get(c))return{__expr__:l.get(c)};c=String(c).match(b);return{__expr__:c?'Symbol("'.concat(c[1],'")'):"Symbol()"}}}()});WG.hasSystem="undefined"!==typeof System;WG.hasSystem&&Object.defineProperty(System,"__serialize__",
{configurable:!0,value:function(){return{__expr__:"System"}}});WG.hasSystem&&Object.defineProperty(System.global,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System.global"}}});Object.defineProperty(Map.prototype,"__serialize__",{configurable:!0,value:function(l,b,c){var g=l.add(this),a=g.currentRev,d=g.currentSnapshot,f=d.entries=[],k=0;b[g.id]=d;l.classHelper.addClassInfo(g,this,d);d=ba(this);var n;try{for(d.s();!(n=d.n()).done;){var p=Nb(n.value,2),q=p[0],r=p[1];k++;var t=
g.snapshotProperty(g.id,q,c.concat("key",String(k)),b,l),w=g.snapshotProperty(g.id,r,c.concat("value",String(k)),b,l);f.push(t,w)}}catch(x){d.e(x)}finally{d.f()}return g.asRefForSerializedObjMap(a)}});Object.defineProperty(Map.prototype,"__deserialize__",{configurable:!0,value:function(l,b,c,g,a){l=l.entries;for(var d=0;d<l.length;d+=2){var f=l[d+1],k=b.recreateProperty("key."+d,l[d],c,g,a.concat("key",d));f=b.recreateProperty("value."+d,f,c,g,a.concat("value",d));this.set(k,f)}}});Object.defineProperty(Set.prototype,
"__serialize__",{configurable:!0,value:function(l,b,c){var g=l.add(this),a=g.currentRev,d=g.currentSnapshot,f=d.entries=[],k=0;b[g.id]=d;l.classHelper.addClassInfo(g,this,d);d=ba(this);var n;try{for(d.s();!(n=d.n()).done;){var p=n.value;k++;var q=g.snapshotProperty(g.id,p,c.concat("entry",String(k)),b,l);f.push(q)}}catch(r){d.e(r)}finally{d.f()}return g.asRefForSerializedObjMap(a)}});Object.defineProperty(Set.prototype,"__deserialize__",{configurable:!0,value:function(l,b,c,g,a){l=l.entries;for(var d=
0;d<l.length;d++){var f=b.recreateProperty("entry."+d,l[d],c,g,a.concat("key",d));this.add(f)}}});var nS=window.lively.FreezerRuntime.recorderFor("lively.serializer2/util.js");nS.isPrimitive=OB;nS.isPrimitive=OB;var si=window.lively.FreezerRuntime.recorderFor("lively.serializer2/plugins.js");si.obj=nh;si.properties=op;si.Plugin=function b(){rd(this,b)};var l2=function(){function b(){rd(this,b)}Ac(b,[{key:"serializeObject",value:function(c,g,a,d,f){if("function"!==typeof c.__serialize__)return null;
(c=c.__serialize__(a,d,f))&&c.hasOwnProperty("__expr__")&&(a=a.expressionSerializer.exprStringEncode(c),c=g?a:{__expr__:a});return c}},{key:"deserializeObject",value:function(c,g,a,d){return(g=a.__expr__)?c.expressionSerializer.deserializeExpr(g):null}}]);return b}();si.CustomSerializePlugin=l2;var m2=function(){function b(){rd(this,b)}Ac(b,[{key:"additionallySerialize",value:function(c,g,a,d){c.classHelper.addClassInfo(g,g.realObj,a)}},{key:"deserializeObject",value:function(c,g,a,d){return c.classHelper.restoreIfClassInstance(g,
a)}}]);return b}();si.ClassPlugin=m2;var n2=function(){function b(){rd(this,b)}Ac(b,[{key:"serializeObject",value:function(c,g,a,d,f){c&&c.isMorph&&(c.__isBeingSerialized__=!0);return null}}]);return b}();si.SerializationIndicationPlugin=n2;var o2=function(){function b(){rd(this,b)}Ac(b,[{key:"additionallySerialize",value:function(c,g,a,d){g.realObj&&g.realObj.isMorph&&(g.realObj.__isBeingSerialized__=!1)}}]);return b}();si.SerializationFinishPlugin=o2;var p2=function(){function b(){rd(this,b)}Ac(b,
[{key:"additionallySerialize",value:function(c,g,a,d){var f=g.realObj;f&&"function"===typeof f.__additionally_serialize__&&f.__additionally_serialize__(a,g,c,d)}},{key:"additionallyDeserializeBeforeProperties",value:function(c,g,a,d,f,k,n){"function"===typeof a.__deserialize__&&a.__deserialize__(f,g,k,c,n)}},{key:"additionallyDeserializeAfterProperties",value:function(c,g,a,d,f,k){"function"===typeof a.__after_deserialize__&&a.__after_deserialize__(d,g,c);delete a._rev}}]);return b}();si.AdditionallySerializePlugin=
p2;var q2=function(){function b(){rd(this,b)}Ac(b,[{key:"propertiesToSerialize",value:function(c,g,a,d){return(c=g.realObj)&&c.__only_serialize__||null}}]);return b}();si.OnlySerializePropsPlugin=q2;var r2=function(){function b(){rd(this,b)}Ac(b,[{key:"propertiesToSerialize",value:function(c,g,a,d){c=g.realObj;if(!c||!c.__dont_serialize__)return null;c=si.obj.mergePropertyInHierarchy(c,"__dont_serialize__");g=[];for(a=0;a<d.length;a++){var f=d[a];c.includes(f)||g.push(f)}return g}}]);return b}();
si.DontSerializePropsPlugin=r2;var s2=function(){function b(){rd(this,b)}Ac(b,[{key:"propertiesToSerialize",value:function(c,g,a,d){var f=g.realObj;g=f.constructor[Symbol["for"]("lively.classes-properties-and-settings")];if(!g)return null;c=g.properties;a=g.propertySettings.valueStoreProperty||"_state";g=[];if(f[a]){if(f.__only_serialize__){for(var k=0;k<d.length;k++){f=d[k];var n=c[f];f!==a&&(n&&n&&(n.derived||n.readOnly||n.hasOwnProperty("serialize")&&!n.serialize)||g.push(f))}return g}a=d.indexOf(a);
-1<a&&d.splice(a,1);for(k in c)a=c[k],f=d.indexOf(k),a.derived||a.readOnly||a.hasOwnProperty("serialize")&&!a.serialize?-1<f&&d.splice(f,1):-1===f&&g.push(k);return g.concat(d)}}},{key:"additionallyDeserializeBeforeProperties",value:function(c,g,a,d,f,k,n){var p=a.constructor[Symbol["for"]("lively.classes-properties-and-settings")];if(!p)return d;var q=p.properties,r=p.order;p=p.propertySettings.valueStoreProperty||"_state";d=f.props;if(d[p])return d;d=si.obj.clone(d);a.hasOwnProperty(p)||a.initializeProperties();
a[p];for(f=0;f<r.length;f++)p=r[f],q[p],d.hasOwnProperty(p)&&(g.recreatePropertyAndSetProperty(a,d,p,k,c,n),delete d[p]);return d}}]);return b}();si.LivelyClassPropertiesPlugin=s2;var t2=function(){function b(){rd(this,b)}Ac(b,[{key:"additionallySerialize",value:function(c,g,a,d){var f=this,k=g.realObj;k&&(this._serializable(k)?si.properties.allOwnPropertiesOrFunctions(k,function(n,p){f._serializable(k[p])||console.warn("Attribute cannot be serialized: ".concat(p," of ").concat(k,". Might be an anonymous function?"))}):
console.warn("Cannot serialize anonymous function ".concat(k)))}},{key:"_serializable",value:function(c){return"function"!==typeof c||!!c.isWrapped||!!c.hasLivelyClosure}}]);return b}();si.SerializableCheckPlugin=t2;var oS={livelyClassPropertiesPlugin:new si.LivelyClassPropertiesPlugin,dontSerializePropsPlugin:new si.DontSerializePropsPlugin,onlySerializePropsPlugin:new si.OnlySerializePropsPlugin,additionallySerializePlugin:new si.AdditionallySerializePlugin,classPlugin:new si.ClassPlugin,customSerializePlugin:new si.CustomSerializePlugin,
indicationPlugin:new si.SerializationIndicationPlugin,serializableCheckPlugin:new si.SerializableCheckPlugin,finishPlugin:new si.SerializationFinishPlugin};si.plugins=oS;si.plugins=oS;var xs=Lc("bD",[si.plugins.indicationPlugin,si.plugins.customSerializePlugin,si.plugins.classPlugin,si.plugins.additionallySerializePlugin,si.plugins.onlySerializePropsPlugin,si.plugins.dontSerializePropsPlugin,si.plugins.livelyClassPropertiesPlugin,si.plugins.finishPlugin]);si.allPlugins=xs;si.allPlugins=xs;var Pi=
window.lively.FreezerRuntime.recorderFor("lively.serializer2/object-pool.js");Pi.__additionally_serialize__addObjectFunction=function(b,c,g,a){var d=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[];return function(f,k){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;return c.props[f]=n?{value:k,verbatim:n}:{value:b.snapshotProperty(b.id,k,d.concat([f]),g,a)}}};Pi.arr=mh;Pi.Path=Nh;Pi.obj=nh;Pi.string=ji;Pi.isPrimitive=OB;Pi.ClassHelper=OA;Pi.ExpressionSerializer=Xn;Pi.allPlugins=
xs;Pi.debugSerialization=!1;Pi.debugDeserialization=!1;var PA=Lc("bM",function(){function b(c){rd(this,b);this.options=Object.assign({checkForLeaks:!1,ignoreClassNotFound:!0,idPropertyName:"id"},c);this.reset()}Ac(b,null,[{key:"withDefaultPlugins",value:function(c){return new this(Object.assign({plugins:Pi.allPlugins},c))}},{key:"resolveFromSnapshotAndId",value:function(c,g){return(new this(g)).resolveFromSnapshotAndId(c)}},{key:"fromSnapshot",value:function(c,g){return(new this(g)).readSnapshot(c)}},
{key:"withObject",value:function(c,g){g=new this(g);g.add(c);return g}}]);Ac(b,[{key:"reset",value:function(){this.uuidGen=Pi.string.newUUID;this._obj_ref_map=new Map;this._id_ref_map={};var c=this.options;this.classHelper=new Pi.ClassHelper(c);this.expressionSerializer=new Pi.ExpressionSerializer;c.idPropertyName&&(this.idPropertyName=c.idPropertyName);c.uuidGen&&(this.uuidGen=c.uuidGen);c.reinitializeIds&&(this.reinitializeIds=c.reinitializeIds);c.hasOwnProperty("ignoreClassNotFound")&&(this.classHelper.options.ignoreClassNotFound=
c.ignoreClassNotFound);var g=this.plugins={serializeObject:[],additionallySerialize:[],propertiesToSerialize:[],deserializeObject:[],additionallyDeserializeBeforeProperties:[],additionallyDeserializeAfterProperties:[],afterDeserialization:[],beforeDeserialization:[],afterSerialization:[],beforeSerialization:[]};c.plugins&&c.plugins.forEach(function(a){"function"===typeof a.serializeObject&&g.serializeObject.push(a);"function"===typeof a.additionallySerialize&&g.additionallySerialize.push(a);"function"===
typeof a.propertiesToSerialize&&g.propertiesToSerialize.push(a);"function"===typeof a.deserializeObject&&g.deserializeObject.push(a);"function"===typeof a.additionallyDeserializeBeforeProperties&&g.additionallyDeserializeBeforeProperties.push(a);"function"===typeof a.additionallyDeserializeAfterProperties&&g.additionallyDeserializeAfterProperties.push(a);"function"===typeof a.beforeDeserialization&&g.beforeDeserialization.push(a);"function"===typeof a.afterDeserialization&&g.afterDeserialization.push(a);
"function"===typeof a.beforeSerialization&&g.beforeSerialization.push(a);"function"===typeof a.afterSerialization&&g.afterSerialization.push(a)})}},{key:"knowsId",value:function(c){return!!this._id_ref_map[c]}},{key:"refForId",value:function(c){return this._id_ref_map[c]}},{key:"resolveToObj",value:function(c){return(c=this._id_ref_map[c])?c.realObj:void 0}},{key:"ref",value:function(c){return this._obj_ref_map.get(c)}},{key:"objects",value:function(){return Array.from(this._obj_ref_map.keys())}},
{key:"objectRefs",value:function(){return Array.from(this._obj_ref_map.values())}},{key:"internalAddRef",value:function(c){c.realObj&&this._obj_ref_map.set(c.realObj,c);return this._id_ref_map[c.id]=c}},{key:"add",value:function(c){var g=this;if(!Pi.isPrimitive(c)){if(Array.isArray(c))return c.map(function(d){return g.add(d)});var a=c.__serialization_id_property__||this.idPropertyName;return this.ref(c)||this.internalAddRef(new Pi.ObjectRef(c[a]||this.uuidGen(),c,void 0,this.idPropertyName))}}},{key:"snapshot",
value:function(c){var g={};this.plugin_beforeSerialization(g,c);for(var a=0,d=Object.keys(this._id_ref_map);a<d.length;a++)this._id_ref_map[d[a]].snapshotObject(g,this);return g=this.plugin_afterSerialization(g,c)}},{key:"snapshotObject",value:function(c){c=this.add(c).id;var g=this.snapshot(c);return{id:c,snapshot:g}}},{key:"readSnapshot",value:function(c,g){if(c.hasOwnProperty("id"))throw Error("readSnapshot expects simple serialized object map, not id-snapshot pair!");if(this.options.skipMigrations)Pi.ObjectRef.fromSnapshot(g,
c,this,[],this.idPropertyName);else{g=0;for(var a=Object.keys(c);g<a.length;g++)this.resolveToObj(a[g])||Pi.ObjectRef.fromSnapshot(a[g],c,this,[],this.idPropertyName)}return this}},{key:"resolveFromSnapshotAndId",value:function(c){if(!c.hasOwnProperty("id"))throw Error("idAndSnapshot does not have id");if(!c.hasOwnProperty("snapshot"))throw Error("idAndSnapshot does not have snapshot");var g=c=this.plugin_beforeDeserialization(c),a=g.id;this.readSnapshot(g.snapshot,a);this.plugin_afterDeserialization(c);
return this.resolveToObj(a)}},{key:"plugin_beforeSerialization",value:function(c,g){for(var a=0;a<this.plugins.beforeSerialization.length;a++)this.plugins.beforeSerialization[a].beforeSerialization(this,c,g)}},{key:"plugin_afterSerialization",value:function(c,g){for(var a=0;a<this.plugins.afterSerialization.length;a++){var d=this.plugins.afterSerialization[a].afterSerialization(this,c,g);d&&(c=d)}return c}},{key:"plugin_beforeDeserialization",value:function(c){for(var g=0;g<this.plugins.beforeDeserialization.length;g++){var a=
this.plugins.beforeDeserialization[g].beforeDeserialization(this,c);a&&(c=a)}return c}},{key:"plugin_afterDeserialization",value:function(c){for(var g=0;g<this.plugins.afterDeserialization.length;g++)this.plugins.afterDeserialization[g].afterDeserialization(this,c)}},{key:"plugin_serializeObject",value:function(c,g,a,d){for(var f=0;f<this.plugins.serializeObject.length;f++){var k=this.plugins.serializeObject[f].serializeObject(c,g,this,a,d);if(k)return k}}},{key:"plugin_propertiesToSerialize",value:function(c,
g,a){for(var d=0;d<this.plugins.propertiesToSerialize.length;d++){var f=this.plugins.propertiesToSerialize[d].propertiesToSerialize(this,c,g,a);f&&(a=f)}return a}},{key:"plugin_additionallySerialize",value:function(c,g,a,d){a=this.plugins.additionallySerialize.length?Pi.__additionally_serialize__addObjectFunction(c,g,a,this,d):null;for(d=0;d<this.plugins.additionallySerialize.length;d++)this.plugins.additionallySerialize[d].additionallySerialize(this,c,g,a)}},{key:"plugin_deserializeObject",value:function(c,
g,a){for(var d=0;d<this.plugins.deserializeObject.length;d++){var f=this.plugins.deserializeObject[d].deserializeObject(this,c,g,a);if(f)return f}}},{key:"plugin_additionallyDeserializeBeforeProperties",value:function(c,g,a,d,f,k){for(var n=0;n<this.plugins.additionallyDeserializeBeforeProperties.length;n++){var p=this.plugins.additionallyDeserializeBeforeProperties[n].additionallyDeserializeBeforeProperties(this,c,g,a,d,f,k);p&&(a=p)}return a}},{key:"plugin_additionallyDeserializeAfterProperties",
value:function(c,g,a,d,f){for(var k=0;k<this.plugins.additionallyDeserializeAfterProperties.length;k++)this.plugins.additionallyDeserializeAfterProperties[k].additionallyDeserializeAfterProperties(this,c,g,a,d,f)}}]);return b}());Pi.ObjectPool=PA;var XG=function(){function b(c,g,a){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"id";rd(this,b);this.id=c;this.idPropertyName=d;this.realObj=g;this.snapshotVersions=[];this.snapshots={};a&&(d=a.rev||0,this.snapshotVersions.push(d),this.snapshots[d]=
a)}Ac(b,null,[{key:"fromSnapshot",value:function(c,g,a){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],f=new this(c,void 0,void 0,4<arguments.length?arguments[4]:void 0);try{return a.internalAddRef(f).recreateObjFromSnapshot(g,a,d)}catch(k){if(a.options.highlightBuggyMorphs)for(;d.length;){if((f=Pi.Path(d).map(function(n,p){return"submorphs"==n?p.filter(function(q){return!q.isHand&&!q.isEpiMorph}):p}).get(a.options.rootObject))&&f.isMorph&&f.world()){f.show(!0);a.options.highlightBuggyMorphs=
!1;break}d.pop()}throw k;}}}]);Ac(b,[{key:"asRefForSerializedObjMap",value:function(){return{__ref__:!0,id:this.id,rev:0<arguments.length&&void 0!==arguments[0]?arguments[0]:"????"}}},{key:"snapshotObject",value:function(c,g){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];Pi.debugSerialization&&console.log("[serialize] ".concat(a.join(".")));if(100<a.length)throw Error("Stopping serializer, encountered a possibly infinit loop: ".concat(a.join(".")));var d=this.id,f=this.realObj,k=
this.snapshots;if(!f)return console.error("Cannot marshall object ref ".concat(d,", no real object!")),Object.assign({},this.asRefForSerializedObjMap(),{isMissing:!0});var n=f._rev||0;var p=this.asRefForSerializedObjMap(n);Pi.arr.pushIfNotIncluded(this.snapshotVersions,n);if(k[n])return c[d]||(c[d]=k[n]),p;var q=Jc(d);"number"===q&&(d=String(d),q="string");if("string"!==q)throw Error("Error snapshoting ".concat(f,": ")+"id is not a string but ".concat(d," ")+"(serialization path: ".concat(a.join("."),
")"));if(q=g.plugin_serializeObject(f,!1,c,a))return k[n]=c[d]=q,p;q=Object.getOwnPropertyNames(f);var r={};k=k[n]=c[d]={rev:n,props:r};(n=g.plugin_propertiesToSerialize(this,k,q))&&(q=n);for(n=0;n<q.length;n++){var t=q[n];r[t]={value:this.snapshotProperty(d,f[t],a.concat([t]),c,g)}}g.plugin_additionallySerialize(this,k,c,a);return p}},{key:"snapshotProperty",value:function(c,g,a,d,f){var k=this;if(Pi.isPrimitive(g))return g;var n=f.plugin_serializeObject(g,!0,d,a);if(n)return n;if("function"!==typeof g)return Array.isArray(g)?
g.map(function(p,q){return k.snapshotProperty(c,p,a.concat(q),d,f)}):(g=f.add(g))&&g.isObjectRef?g.snapshotObject(d,f,a):g}},{key:"recreateObjFromSnapshot",value:function(c,g,a){if(this.realObj)return this;Pi.debugDeserialization&&console.log("[deserialize] ".concat(this.id," (via ").concat(a.join("."),")"));var d=c[this.id];if(!d)return console.error("Cannot recreateObjFromSnapshot ObjectRef "+"".concat(this.id," b/c of missing snapshot in snapshot map!")),this;var f=d.rev,k;f=f||0;this.snapshotVersions.push(f);
this.snapshots[f]=d;(k=g.plugin_deserializeObject(this,d,a))||(k={});"undefined"===typeof k._rev&&"object"===Jc(k)&&(k._rev=f||0);this.realObj=k;g.internalAddRef(this);if(!k)return this;f=d.props;var n=g.plugin_additionallyDeserializeBeforeProperties(this,k,f,d,c,a);n&&(f=n);if(f)for(var p in f)this.recreatePropertyAndSetProperty(k,f,p,c,g,a);p=k.__serialization_id_property__||this.idPropertyName;g.reinitializeIds&&k.hasOwnProperty(p)&&(k[p]=g.reinitializeIds(this.id,this));g.plugin_additionallyDeserializeAfterProperties(this,
k,d,c,a);return this}},{key:"recreatePropertyAndSetProperty",value:function(c,g,a,d,f,k){try{var n=g[a]||{value:"NON EXISTING"},p=n.value;c[a]=n.verbatim?p:this.recreateProperty(a,p,d,f,k.concat(a))}catch(r){try{var q=String(c)}catch(t){q="[some ".concat(c.constructor.name,"]")}r.__seen?console.error("Error deserializing property ".concat(a," of ").concat(q)):(c="".concat(a," of ").concat(q," (").concat(JSON.stringify(p),")"),console.error("Error deserializing property ".concat(c)),r.__seen=!0)}}},
{key:"recreateProperty",value:function(c,g,a,d,f){var k=this;if("string"===typeof g&&d.expressionSerializer.isSerializedExpression(g))return d.expressionSerializer.deserializeExpr(g);if(Pi.isPrimitive(g))return g;if(Array.isArray(g))return g.map(function(n,p){return k.recreateProperty(p,n,a,d,f.concat(p))});c=g.__serialization_id_property__||this.idPropertyName;return(d.refForId(g[c])||Pi.ObjectRef.fromSnapshot(g[c],a,d,f,this.idPropertyName)).realObj}},{key:"isObjectRef",get:function(){return!0}},
{key:"currentSnapshot",get:function(){if(this.snapshotVersions.length)var c=Pi.arr.last(this.snapshotVersions);else c=0,this.snapshotVersions.push(c);return this.snapshots[c]||(this.snapshots[c]={rev:c,props:{}})}},{key:"currentRev",get:function(){return this.snapshotVersions.length?Pi.arr.last(this.snapshotVersions):0}}]);return b}();Pi.ObjectRef=XG;var Fg=window.lively.FreezerRuntime.recorderFor("lively.serializer2/snapshot-navigation.js");Fg.referenceGraph=PB;Fg.isReference=QB;Fg.referencesOfRef=
PI;Fg.referencesOfId=RB;Fg.referencesInArray=QI;Fg.moduleOfId=SB;Fg.referencesAndClassNamesOfId=TB;Fg.classNameOfId=UB;Fg.findPathFromToId=VB;Fg.lookupPath=WB;Fg.modifyProperty=XB;Fg.removeUnreachableObjects=Fr;Fg.clearDanglingConnections=YB;Fg.removeEpiConnections=ZB;Fg.requiredModulesOfSnapshot=Gr;Fg.Path=Nh;Fg.obj=nh;Fg.arr=mh;Fg.graph=Ju;Fg.ClassHelper=OA;Fg.ExpressionSerializer=Xn;Fg.referenceGraph=PB;Fg.isReference=QB;Fg.referencesOfRef=PI;Fg.referencesOfId=RB;Fg.moduleOfId=SB;Fg.referencesAndClassNamesOfId=
TB;Fg.classNameOfId=UB;Fg.findPathFromToId=VB;Fg.lookupPath=WB;Fg.modifyProperty=XB;Fg.removeUnreachableObjects=Fr;Fg.clearDanglingConnections=YB;Fg.removeEpiConnections=ZB;Fg.defaultExprSerializer=new Fg.ExpressionSerializer;Fg.requiredModulesOfSnapshot=Gr;var Yo=[],Lt=!1,Hr,Ny=-1;SI.prototype.run=function(){this.fun.apply(null,this.array)};var u2={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},YG=function(){return{}},Yp={now:"undefined"!==typeof performance?performance.now.bind(performance):
void 0,timing:"undefined"!==typeof performance?performance.timing:void 0};if(void 0===Yp.now){var pS=Date.now();Yp.timing&&Yp.timing.navigationStart&&(pS=Yp.timing.navigationStart);Yp.now=()=>Date.now()-pS}aC.bigint=function(b){b=aC(b);return"undefined"===typeof BigInt?1E9*b[0]+b[1]:BigInt(1E9*b[0])+BigInt(b[1])};var fk={version:"v16.8.0",versions:{},arch:"x64",platform:"browser",release:{name:"node",sourceUrl:"",headersUrl:"",libUrl:""},_rawDebug:hl,moduleLoadList:[],binding:function(b){$B("binding")},
_linkedBinding:function(b){$B("_linkedBinding")},_events:{},_eventsCount:0,_maxListeners:10,on:Zp,addListener:Zp,once:Zp,off:Zp,removeListener:Zp,removeAllListeners:Zp,emit:hl,prependListener:Zp,prependOnceListener:Zp,listeners:function(b){return[]},domain:{},_exiting:!1,config:{},dlopen:function(b){$B("dlopen")},uptime:function(){return Yp.now()/1E3},_getActiveRequests:function(){return[]},_getActiveHandles:function(){return[]},reallyExit:hl,_kill:hl,cpuUsage:YG,resourceUsage:YG,memoryUsage:YG,kill:hl,
exit:hl,openStdin:hl,allowedNodeEnvironmentFlags:{},assert:function(b,c){if(!b)throw Error(c||"assertion error");},features:{inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},_fatalExceptions:hl,setUncaughtExceptionCaptureCallback:hl,hasUncaughtExceptionCaptureCallback:function(){return!1},emitWarning:function(b,c){console.warn((c?c+": ":"")+b)},nextTick:function(b){var c=Array(arguments.length-1);if(1<arguments.length)for(var g=1;g<arguments.length;g++)c[g-
1]=arguments[g];Yo.push(new SI(b,c));1!==Yo.length||Lt||setTimeout(RI,0)},_tickCallback:hl,_debugProcess:hl,_debugEnd:hl,_startProfilerIdleNotifier:hl,_stopProfilerIdleNotifier:hl,stdout:void 0,stdin:void 0,stderr:void 0,abort:hl,umask:function(b){return 0},chdir:function(b){},cwd:function(){return"/"},env:u2,title:"browser",argv:["/usr/bin/node"],execArgv:[],pid:2,ppid:1,execPath:"/bin/usr/node",debugPort:9229,hrtime:aC,argv0:"node",_preload_modules:[],setSourceMapsEnabled:hl},UI={},TI=!1,WI={},
VI=!1,Yn={},XI=!1,ZI={},YI=!1,aJ={},$I=!1,cJ={},bJ=!1,eJ={},dJ=!1,gJ={},fJ=!1,iJ={},hJ=!1,kJ={},jJ=!1,mJ={},lJ=!1,oJ={},nJ=!1,qJ={},pJ=!1,sJ={},rJ=!1,uJ={},tJ=!1,wJ={},vJ=!1,yJ={},xJ=!1,AJ={},zJ=!1,CJ={},BJ=!1,EJ={},DJ=!1,GJ={},FJ=!1,JJ={},IJ=!1,LJ={},KJ=!1,OJ={},NJ=!1,QJ={},PJ=!1,v2={},w2=v2=function(b){b.prototype[Symbol.iterator]=function*(){for(let c=this.head;c;c=c.next)yield c.value}},qS={};qS=Fi;Fi.Node=Ir;Fi.create=Fi;Fi.prototype.removeNode=function(b){if(b.list!==this)throw Error("removing node which does not belong to this list");
var c=b.next,g=b.prev;c&&(c.prev=g);g&&(g.next=c);b===this.head&&(this.head=c);b===this.tail&&(this.tail=g);b.list.length--;b.next=null;b.prev=null;b.list=null;return c};Fi.prototype.unshiftNode=function(b){if(b!==this.head){b.list&&b.list.removeNode(b);var c=this.head;b.list=this;if(b.next=c)c.prev=b;this.head=b;this.tail||(this.tail=b);this.length++}};Fi.prototype.pushNode=function(b){if(b!==this.tail){b.list&&b.list.removeNode(b);var c=this.tail;b.list=this;if(b.prev=c)c.next=b;this.tail=b;this.head||
(this.head=b);this.length++}};Fi.prototype.push=function(){for(var b=0,c=arguments.length;b<c;b++)this.tail=new Ir(arguments[b],this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length};Fi.prototype.unshift=function(){for(var b=0,c=arguments.length;b<c;b++)this.head=new Ir(arguments[b],null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length};Fi.prototype.pop=function(){if(this.tail){var b=this.tail.value;(this.tail=this.tail.prev)?this.tail.next=
null:this.head=null;this.length--;return b}};Fi.prototype.shift=function(){if(this.head){var b=this.head.value;(this.head=this.head.next)?this.head.prev=null:this.tail=null;this.length--;return b}};Fi.prototype.forEach=function(b,c){c=c||this;for(var g=this.head,a=0;null!==g;a++)b.call(c,g.value,a,this),g=g.next};Fi.prototype.forEachReverse=function(b,c){c=c||this;for(var g=this.tail,a=this.length-1;null!==g;a--)b.call(c,g.value,a,this),g=g.prev};Fi.prototype.get=function(b){for(var c=0,g=this.head;null!==
g&&c<b;c++)g=g.next;if(c===b&&null!==g)return g.value};Fi.prototype.getReverse=function(b){for(var c=0,g=this.tail;null!==g&&c<b;c++)g=g.prev;if(c===b&&null!==g)return g.value};Fi.prototype.map=function(b,c){c=c||this;for(var g=new Fi,a=this.head;null!==a;)g.push(b.call(c,a.value,this)),a=a.next;return g};Fi.prototype.mapReverse=function(b,c){c=c||this;for(var g=new Fi,a=this.tail;null!==a;)g.push(b.call(c,a.value,this)),a=a.prev;return g};Fi.prototype.reduce=function(b,c){var g=this.head;if(1<arguments.length)var a=
c;else if(this.head)g=this.head.next,a=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var d=0;null!==g;d++)a=b(a,g.value,d),g=g.next;return a};Fi.prototype.reduceReverse=function(b,c){var g=this.tail;if(1<arguments.length)var a=c;else if(this.tail)g=this.tail.prev,a=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var d=this.length-1;null!==g;d--)a=b(a,g.value,d),g=g.prev;return a};Fi.prototype.toArray=function(){for(var b=
Array(this.length),c=0,g=this.head;null!==g;c++)b[c]=g.value,g=g.next;return b};Fi.prototype.toArrayReverse=function(){for(var b=Array(this.length),c=0,g=this.tail;null!==g;c++)b[c]=g.value,g=g.prev;return b};Fi.prototype.slice=function(b,c){c=c||this.length;0>c&&(c+=this.length);b=b||0;0>b&&(b+=this.length);var g=new Fi;if(c<b||0>c)return g;0>b&&(b=0);c>this.length&&(c=this.length);for(var a=0,d=this.head;null!==d&&a<b;a++)d=d.next;for(;null!==d&&a<c;a++,d=d.next)g.push(d.value);return g};Fi.prototype.sliceReverse=
function(b,c){c=c||this.length;0>c&&(c+=this.length);b=b||0;0>b&&(b+=this.length);var g=new Fi;if(c<b||0>c)return g;0>b&&(b=0);c>this.length&&(c=this.length);for(var a=this.length,d=this.tail;null!==d&&a>c;a--)d=d.prev;for(;null!==d&&a>b;a--,d=d.prev)g.push(d.value);return g};Fi.prototype.splice=function(b,c,...g){b>this.length&&(b=this.length-1);0>b&&(b=this.length+b);for(var a=0,d=this.head;null!==d&&a<b;a++)d=d.next;b=[];for(a=0;d&&a<c;a++)b.push(d.value),d=this.removeNode(d);null===d&&(d=this.tail);
d!==this.head&&d!==this.tail&&(d=d.prev);for(a=0;a<g.length;a++)c=d,d=g[a],c=c===this.head?new Ir(d,null,c,this):new Ir(d,c,c.next,this),null===c.next&&(this.tail=c),null===c.prev&&(this.head=c),this.length++,d=c;return b};Fi.prototype.reverse=function(){for(var b=this.head,c=this.tail,g=b;null!==g;g=g.prev){var a=g.prev;g.prev=g.next;g.next=a}this.head=c;this.tail=b;return this};try{w2(Fi)}catch(b){}var x2={};const y2=qS,ys=Symbol("max"),im=Symbol("length"),Uu=Symbol("lengthCalculator"),px=Symbol("allowStale"),
zs=Symbol("maxAge"),qp=Symbol("dispose"),rS=Symbol("noDisposeOnSet"),Lk=Symbol("lruList"),zn=Symbol("cache"),sS=Symbol("updateAgeOnGet"),ZG=()=>1;class z2{constructor(b){"number"===typeof b&&(b={max:b});b||(b={});if(b.max&&("number"!==typeof b.max||0>b.max))throw new TypeError("max must be a non-negative number");this[ys]=b.max||Infinity;const c=b.length||ZG;this[Uu]="function"!==typeof c?ZG:c;this[px]=b.stale||!1;if(b.maxAge&&"number"!==typeof b.maxAge)throw new TypeError("maxAge must be a number");
this[zs]=b.maxAge||0;this[qp]=b.dispose;this[rS]=b.noDisposeOnSet||!1;this[sS]=b.updateAgeOnGet||!1;this.reset()}set max(b){if("number"!==typeof b||0>b)throw new TypeError("max must be a non-negative number");this[ys]=b||Infinity;qx(this)}get max(){return this[ys]}set allowStale(b){this[px]=!!b}get allowStale(){return this[px]}set maxAge(b){if("number"!==typeof b)throw new TypeError("maxAge must be a non-negative number");this[zs]=b;qx(this)}get maxAge(){return this[zs]}set lengthCalculator(b){"function"!==
typeof b&&(b=ZG);b!==this[Uu]&&(this[Uu]=b,this[im]=0,this[Lk].forEach(c=>{c.length=this[Uu](c.value,c.key);this[im]+=c.length}));qx(this)}get lengthCalculator(){return this[Uu]}get length(){return this[im]}get itemCount(){return this[Lk].length}rforEach(b,c){c=c||this;for(let g=this[Lk].tail;null!==g;){const a=g.prev;tS(this,b,g,c);g=a}}forEach(b,c){c=c||this;for(let g=this[Lk].head;null!==g;){const a=g.next;tS(this,b,g,c);g=a}}keys(){return this[Lk].toArray().map(b=>b.key)}values(){return this[Lk].toArray().map(b=>
b.value)}reset(){this[qp]&&this[Lk]&&this[Lk].length&&this[Lk].forEach(b=>this[qp](b.key,b.value));this[zn]=new Map;this[Lk]=new y2;this[im]=0}dump(){return this[Lk].map(b=>QA(this,b)?!1:{k:b.key,v:b.value,e:b.now+(b.maxAge||0)}).toArray().filter(b=>b)}dumpLru(){return this[Lk]}set(b,c,g){if((g=g||this[zs])&&"number"!==typeof g)throw new TypeError("maxAge must be a number");const a=g?Date.now():0,d=this[Uu](c,b);if(this[zn].has(b)){if(d>this[ys])return Vu(this,this[zn].get(b)),!1;const f=this[zn].get(b).value;
if(this[qp]&&!this[rS])this[qp](b,f.value);f.now=a;f.maxAge=g;f.value=c;this[im]+=d-f.length;f.length=d;this.get(b);qx(this);return!0}g=new A2(b,c,d,a,g);if(g.length>this[ys]){if(this[qp])this[qp](b,c);return!1}this[im]+=g.length;this[Lk].unshift(g);this[zn].set(b,this[Lk].head);qx(this);return!0}has(b){if(!this[zn].has(b))return!1;b=this[zn].get(b).value;return!QA(this,b)}get(b){return $G(this,b,!0)}peek(b){return $G(this,b,!1)}pop(){const b=this[Lk].tail;if(!b)return null;Vu(this,b);return b.value}del(b){Vu(this,
this[zn].get(b))}load(b){this.reset();const c=Date.now();for(let a=b.length-1;0<=a;a--){const d=b[a];var g=d.e||0;0===g?this.set(d.k,d.v):(g-=c,0<g&&this.set(d.k,d.v,g))}}prune(){this[zn].forEach((b,c)=>$G(this,c,!1))}}const $G=(b,c,g)=>{if(c=b[zn].get(c)){const a=c.value;if(QA(b,a)){if(Vu(b,c),!b[px])return}else g&&(b[sS]&&(c.value.now=Date.now()),b[Lk].unshiftNode(c));return a.value}},QA=(b,c)=>{if(!c||!c.maxAge&&!b[zs])return!1;const g=Date.now()-c.now;return c.maxAge?g>c.maxAge:b[zs]&&g>b[zs]},
qx=b=>{if(b[im]>b[ys])for(let c=b[Lk].tail;b[im]>b[ys]&&null!==c;){const g=c.prev;Vu(b,c);c=g}},Vu=(b,c)=>{if(c){const g=c.value;if(b[qp])b[qp](g.key,g.value);b[im]-=g.length;b[zn].delete(g.key);b[Lk].removeNode(c)}};class A2{constructor(b,c,g,a,d){this.key=b;this.value=c;this.length=g;this.now=a;this.maxAge=d||0}}const tS=(b,c,g,a)=>{let d=g.value;QA(b,d)&&(Vu(b,g),b[px]||(d=void 0));d&&c.call(a,d.value,d.key,b)};var uS=x2=z2,vS=Object.freeze({__proto__:null,"default":uS}),oW="default"in vS?uS:vS,
hC={},RJ=!1,iC={},SJ=!1,UJ={},TJ=!1,WJ={},VJ=!1,YJ={},XJ=!1,$J={},ZJ=!1,bK={},aK=!1,dK={},cK=!1,fK={},eK=!1,hK={},gK=!1,jK={},iK=!1,lK={},kK=!1,nK={},mK=!1,pK={},oK=!1,rK={},qK=!1,tK={},sK=!1,vK={},uK=!1,xK={},wK=!1,wS={},xS=!1;const yS=function(){if(xS)return wS;xS=!0;var b=Mt();return wS={re:b.re,src:b.src,tokens:b.t,SEMVER_SPEC_VERSION:Oy().SEMVER_SPEC_VERSION,SemVer:sl(),compareIdentifiers:bC().compareIdentifiers,rcompareIdentifiers:bC().rcompareIdentifiers,parse:Nt(),valid:fW(),clean:gW(),inc:hW(),
diff:sW(),major:iW(),minor:jW(),patch:tW(),prerelease:kW(),compare:fn(),rcompare:lW(),compareLoose:uW(),compareBuild:dC(),sort:vW(),rsort:mW(),gt:Ry(),lt:eC(),eq:cC(),neq:HJ(),gte:fC(),lte:gC(),cmp:MJ(),coerce:nW(),Comparator:Sy(),Range:gn(),satisfies:Ty(),toComparators:wW(),maxSatisfying:pW(),minSatisfying:xW(),minVersion:yW(),validRange:qW(),outside:jC(),gtr:zW(),ltr:AW(),intersects:rW(),simplifyRange:BW(),subset:CW()}}();yS.re;var bh=window.lively.FreezerRuntime.recorderFor("lively.serializer2/index.js");
bh.normalizeOptions=kC;bh.normalizeMigrations=function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return{before:b.filter(function(c){return"function"===typeof c.snapshotConverter}),after:b.filter(function(c){return"function"===typeof c.objectConverter})}};bh.runMigrations=function(b,c,g,a){for(var d=0;d<b.length;d++){var f=b[d];try{g=f[c](g,a)}catch(k){console.error("migration ".concat(f.name," failed:")),console.error(k)}}return g};bh.serialize=Xv;bh.deserialize=Uy;bh.deserializeWithMigrations=
Vy;bh.copy=lC;bh.ObjectPool=PA;bh.requiredModulesOfSnapshot=Gr;bh.removeUnreachableObjects=Fr;bh.clearDanglingConnections=YB;bh.removeEpiConnections=ZB;bh.allPlugins=xs;bh.semver=yS;bh.serializerVersion="0.1.3";bh.normalizeOptions=kC;bh.majorAndMinorVersionRe=/\.[^\.]+$/;bh.ObjectRef=XG;bh.ObjectPool=PA;bh.requiredModulesOfSnapshot=Gr;bh.removeUnreachableObjects=Fr;bh.serialize=Xv;bh.deserialize=Uy;bh.deserializeWithMigrations=Vy;bh.copy=lC;bh.ExpressionSerializer=Xn;bh.serializeSpec=Wn;bh.deserializeSpec=
Xo;bh.getSerializableClassMeta=Ht;bh.locateClass=Er;bh.getClassName=en;bh.ExpressionSerializer=Xn;bh.getSerializableClassMeta=Ht;bh.locateClass=Er;bh.serializeSpec=Wn;bh.deserializeSpec=Xo;bh.getClassName=en;bh.allPlugins=xs;var B2=Object.freeze({__proto__:null,normalizeOptions:kC,ObjectRef:XG,ObjectPool:PA,requiredModulesOfSnapshot:Gr,removeUnreachableObjects:Fr,serialize:Xv,deserialize:Uy,deserializeWithMigrations:Vy,copy:lC,ExpressionSerializer:Xn,getSerializableClassMeta:Ht,locateClass:Er,serializeSpec:Wn,
deserializeSpec:Xo,getClassName:en,allPlugins:xs});Lc("cb",B2);var C2={},EW=Object.prototype.toString,aH=C2=Array.isArray||DW,D2={},rx=D2="2",mC="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,zS={};Cm.NONE=0;Cm.VTEXT=1;Cm.VNODE=2;Cm.WIDGET=3;Cm.PROPS=4;Cm.ORDER=5;Cm.INSERT=6;Cm.REMOVE=7;Cm.THUNK=8;zS=Cm;Cm.prototype.version=rx;Cm.prototype.type="VirtualPatch";var rp=zS,E2={},sx=E2=function(b){return b&&"VirtualNode"===b.type&&b.version===rx},F2={},RA=F2=function(b){return b&&
"VirtualText"===b.type&&b.version===rx},G2={},zq=G2=function(b){return b&&"Widget"===b.type},H2={},tx=H2=function(b){return b&&"Thunk"===b.type},I2={},FW=sx,GW=RA,HW=zq,AS=I2=function(b,c){var g=b,a=c;tx(c)&&(a=yK(c,b));tx(b)&&(g=yK(b,null));return{a:g,b:a}},J2={},SA=J2=function(b){return"object"===typeof b&&null!==b},K2={},ux=K2=function(b){return b&&("function"===typeof b.hook&&!b.hasOwnProperty("hook")||"function"===typeof b.unhook&&!b.hasOwnProperty("unhook"))},BS={},AK=SA,IW=ux;BS=zK;var CS=
{},LW=aH,Bj=rp,Jr=sx,FK=RA,Xy=zq,Wy=tx,KW=AS,JW=BS;CS=CK;var L2={},M2=L2=CS,N2=Object.freeze({}),DS="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,O2={},ES="undefined"!==typeof DS?DS:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var bH=document;else(bH=ES["__GLOBAL_DOCUMENT_CACHE@4"])||(bH=ES["__GLOBAL_DOCUMENT_CACHE@4"]=N2);var FS=O2=bH,P2={},HK=ux,GS=P2=function(b,c,g){for(var a in c){var d=c[a];if(void 0===d)GK(b,a,d,g);else if(HK(d))GK(b,
a,d,g),d.hook&&d.hook(b,a,g?g[a]:void 0);else if(SA(d)){var f=void 0,k=void 0,n=b,p=a,q=g?g[p]:void 0;if("attributes"===p)for(k in d)f=d[k],void 0===f?n.removeAttribute(k):n.setAttribute(k,f);else if(q&&SA(q)&&IK(q)!==IK(d))n[p]=d;else for(f in SA(n[p])||(n[p]={}),k="style"===p?"":void 0,d)q=d[f],n[p][f]=void 0===q?k:q}else b[a]=d}},Q2={},KK=FS,QW=GS,PW=sx,OW=RA,NW=zq,MW=AS,HS=Q2=JK,R2={},S2=R2=function(b,c){return zq(b)&&zq(c)?"name"in b&&"name"in c?b.id===c.id:b.init===c.init:!1},T2={},RW={},U2=
T2=function(b,c,g,a){return g&&0!==g.length?(g.sort(SW),LK(b,c,g,a,0)):{}},IS={},TW=zq;IS=function(b,c,g){var a=b.vNode,d=b.patch;switch(b.type){case rp.REMOVE:return(d=c.parentNode)&&d.removeChild(c),NK(c,a),null;case rp.INSERT:return d=g.render(d,g),c&&c.appendChild(d),c;case rp.VTEXT:return 3===c.nodeType?(c.replaceData(0,c.length,d.text),d=c):(a=c.parentNode,d=g.render(d,g),a&&d!==c&&a.replaceChild(d,c)),d;case rp.WIDGET:return d=(b=S2(a,d))?d.update(a,c)||c:g.render(d,g),(g=c.parentNode)&&d!==
c&&g.replaceChild(d,c),b||NK(c,a),d;case rp.VNODE:return a=c.parentNode,d=g.render(d,g),a&&d!==c&&a.replaceChild(d,c),d;case rp.ORDER:a=c.childNodes;g={};for(var f,k=0;k<d.removes.length;k++)f=d.removes[k],b=a[f.from],f.key&&(g[f.key]=b),c.removeChild(b);k=a.length;for(var n=0;n<d.inserts.length;n++)f=d.inserts[n],b=g[f.key],c.insertBefore(b,f.to>=k++?null:a[f.to]);return c;case rp.PROPS:return GS(c,d,a.properties),c;case rp.THUNK:return d=g.patch(c,d,g),c&&d&&c!==d&&c.parentNode&&c.parentNode.replaceChild(d,
c),d;default:return c}};var JS={},XW=FS,YW=aH,VW=HS,WW=U2,PK=IS;JS=OK;var V2={},W2=V2=JS,Zn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,KS={},bX=sx,cX=zq,dX=tx,aX=ux;KS=qC;var ZW={},$W=[];qC.prototype.version=rx;qC.prototype.type="VirtualNode";var cH=KS,eX="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,LS={};LS=rC;rC.prototype.version=rx;rC.prototype.type="VirtualText";var dH=LS,MS={};MS=function(b){var c=String.prototype.split,
g=/()??/.exec("")[1]===b;return function(a,d,f){if("[object RegExp]"!==Object.prototype.toString.call(d))return c.call(a,d,f);var k=[],n=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.extended?"x":"")+(d.sticky?"y":""),p=0;d=new RegExp(d.source,n+"g");var q,r;a+="";g||(q=new RegExp("^"+d.source+"$(?!\\s)",n));for(f=f===b?4294967295:f>>>0;r=d.exec(a);){n=r.index+r[0].length;if(n>p){k.push(a.slice(p,r.index));!g&&1<r.length&&r[0].replace(q,function(){for(var w=1;w<arguments.length-2;w++)arguments[w]===
b&&(r[w]=b)});1<r.length&&r.index<a.length&&Array.prototype.push.apply(k,r.slice(1));var t=r[0].length;p=n;if(k.length>=f)break}d.lastIndex===r.index&&d.lastIndex++}p===a.length?(t||!d.test(""))&&k.push(""):k.push(a.slice(p));return k.length>f?k.slice(0,f):k}}();var X2={},Y2=MS,Z2=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,$2=/^\.|#/,a3=X2=function(b,c){if(!b)return"DIV";var g=!c.hasOwnProperty("id");b=Y2(b,Z2);var a=null;$2.test(b[1])&&(a="DIV");var d,f;for(f=0;f<b.length;f++)if(d=b[f]){var k=d.charAt(0);
if(a)if("."===k){var n=n||[];n.push(d.substring(1,d.length))}else"#"===k&&g&&(c.id=d.substring(1,d.length));else a=d}n&&(c.className&&n.push(c.className),c.className=n.join(" "));return c.namespace?a:a.toUpperCase()},NS={};NS=Zy;Zy.prototype.hook=function(b,c){b[c]!==this.value&&(b[c]=this.value)};var b3=NS,OS="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,PS={},eH="undefined"!==typeof window?window:"undefined"!==typeof OS?OS:{};PS=function(b,c){return b in eH?eH[b]:
eH[b]=c};var QS={},RS=PS;QS=function(b,c,g){var a="__INDIVIDUAL_ONE_VERSION_"+b,d=RS(a+"_ENFORCE_SINGLETON",c);if(d!==c)throw Error("Can only have one copy of "+b+".\nYou already have version "+d+" installed.\nThis means you cannot install version "+c);return RS(a,g)};var SS={};QS("ev-store","7");SS=function(b){var c=b["__EV_STORE_KEY@7"];c||(c=b["__EV_STORE_KEY@7"]={});return c};var TS={},US=SS;TS=Yv;Yv.prototype.hook=function(b,c){b=US(b);c=c.substr(3);b[c]=this.value};Yv.prototype.unhook=function(b,
c){b=US(b);c=c.substr(3);b[c]=void 0};var VS={},TK=aH,RK=dH,fX=sx,gX=RA,hX=zq,iX=tx,c3=TS;VS=function(b,c,g){var a=[],d;if(d=!g)d="string"===typeof c||TK(c)||SK(c);if(d){g=c;var f={}}f=f||c||{};b=a3(b,f);if(f.hasOwnProperty("key")){var k=f.key;f.key=void 0}if(f.hasOwnProperty("namespace")){var n=f.namespace;f.namespace=void 0}"INPUT"!==b||n||!f.hasOwnProperty("value")||void 0===f.value||ux(f.value)||(f.value=b3(f.value));c=f;for(var p in c)c.hasOwnProperty(p)&&(d=c[p],ux(d)||"ev-"===p.substr(0,3)&&
(c[p]=c3(d)));void 0!==g&&null!==g&&QK(g,a,b,f);return new cH(b,f,a,k,n)};var d3={},e3=d3=VS,WS={};WS=HS;var As={},vx=As={diff:M2,patch:W2,h:e3,create:WS,VNode:cH,VText:dH};As.diff;As.patch;As.h;Lc("bV",As.create);As.VNode;As.VText;var f3={},g3=f3={abbr:"abbr",accept:"accept","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",alt:"alt",async:"async",autocomplete:"autoComplete",autofocus:"autoFocus",autoplay:"autoPlay",
cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charset",checked:"checked",cite:"cite","class":"className",cols:"cols",colspan:"colSpan",command:"command",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",coords:"coords",crossorigin:"crossOrigin",data:"data",datetime:"dateTime","default":"default",defer:"defer",dir:"dir",disabled:"disabled",download:"download",draggable:"draggable",dropzone:"dropzone",enctype:"encType",
"for":"htmlFor",form:"form",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameBorder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang","http-equiv":"httpEquiv",icon:"icon",id:"id",inputmode:"inputMode",ismap:"isMap",itemid:"itemId",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",kind:"kind",label:"label",lang:"lang",list:"list",
loop:"loop",manifest:"manifest",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",ping:"ping",placeholder:"placeholder",poster:"poster",preload:"preload",radiogroup:"radioGroup",readonly:"readOnly",rel:"rel",required:"required",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",
scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",sortable:"sortable",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srcset:"srcSet",start:"start",step:"step",style:"style",tabindex:"tabIndex",target:"target",title:"title",translate:"translate",type:"type",typemustmatch:"typeMustMatch",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap"},XS={};XS={about:null,"accent-height":null,accumulate:null,additive:null,"alignment-baseline":null,
alphabetic:null,amplitude:null,"arabic-form":null,ascent:null,attributeName:null,attributeType:null,azimuth:null,bandwidth:null,baseFrequency:null,baseProfile:null,"baseline-shift":null,bbox:null,begin:null,bias:null,by:null,calcMode:null,"cap-height":null,"class":null,clip:null,"clip-path":null,"clip-rule":null,clipPathUnits:null,color:null,"color-interpolation":null,"color-interpolation-filters":null,"color-profile":null,"color-rendering":null,content:null,contentScriptType:null,contentStyleType:null,
cursor:null,cx:null,cy:null,d:null,datatype:null,defaultAction:null,descent:null,diffuseConstant:null,direction:null,display:null,divisor:null,"dominant-baseline":null,dur:null,dx:null,dy:null,edgeMode:null,editable:null,elevation:null,"enable-background":null,end:null,"ev:event":"http://www.w3.org/2001/xml-events",event:null,exponent:null,externalResourcesRequired:null,fill:null,"fill-opacity":null,"fill-rule":null,filter:null,filterRes:null,filterUnits:null,"flood-color":null,"flood-opacity":null,
focusHighlight:null,focusable:null,"font-family":null,"font-size":null,"font-size-adjust":null,"font-stretch":null,"font-style":null,"font-variant":null,"font-weight":null,format:null,from:null,fx:null,fy:null,g1:null,g2:null,"glyph-name":null,"glyph-orientation-horizontal":null,"glyph-orientation-vertical":null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:null,height:null,"horiz-adv-x":null,"horiz-origin-x":null,"horiz-origin-y":null,id:null,ideographic:null,"image-rendering":null,
"in":null,in2:null,initialVisibility:null,intercept:null,k:null,k1:null,k2:null,k3:null,k4:null,kernelMatrix:null,kernelUnitLength:null,kerning:null,keyPoints:null,keySplines:null,keyTimes:null,lang:null,lengthAdjust:null,"letter-spacing":null,"lighting-color":null,limitingConeAngle:null,local:null,"marker-end":null,"marker-mid":null,"marker-start":null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,
mediaContentEncodings:null,mediaSize:null,mediaTime:null,method:null,min:null,mode:null,name:null,"nav-down":null,"nav-down-left":null,"nav-down-right":null,"nav-left":null,"nav-next":null,"nav-prev":null,"nav-right":null,"nav-up":null,"nav-up-left":null,"nav-up-right":null,numOctaves:null,observer:null,offset:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,"overline-position":null,"overline-thickness":null,"panose-1":null,path:null,pathLength:null,
patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,playbackOrder:null,"pointer-events":null,points:null,pointsAtX:null,pointsAtY:null,pointsAtZ:null,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:null,r:null,radius:null,refX:null,refY:null,rel:null,"rendering-intent":null,repeatCount:null,repeatDur:null,requiredExtensions:null,requiredFeatures:null,requiredFonts:null,requiredFormats:null,resource:null,restart:null,result:null,rev:null,
role:null,rotate:null,rx:null,ry:null,scale:null,seed:null,"shape-rendering":null,slope:null,snapshotTime:null,spacing:null,specularConstant:null,specularExponent:null,spreadMethod:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,"stop-color":null,"stop-opacity":null,"strikethrough-position":null,"strikethrough-thickness":null,string:null,stroke:null,"stroke-dasharray":null,"stroke-dashoffset":null,"stroke-linecap":null,"stroke-linejoin":null,"stroke-miterlimit":null,
"stroke-opacity":null,"stroke-width":null,surfaceScale:null,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:null,tableValues:null,target:null,targetX:null,targetY:null,"text-anchor":null,"text-decoration":null,"text-rendering":null,textLength:null,timelineBegin:null,title:null,to:null,transform:null,transformBehavior:null,type:null,"typeof":null,u1:null,u2:null,"underline-position":null,"underline-thickness":null,unicode:null,
"unicode-bidi":null,"unicode-range":null,"units-per-em":null,"v-alphabetic":null,"v-hanging":null,"v-ideographic":null,"v-mathematical":null,values:null,version:null,"vert-adv-y":null,"vert-origin-x":null,"vert-origin-y":null,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,"word-spacing":null,"writing-mode":null,x:null,"x-height":null,x1:null,x2:null,xChannelSelector:null,"xlink:actuate":"http://www.w3.org/1999/xlink","xlink:arcrole":"http://www.w3.org/1999/xlink","xlink:href":"http://www.w3.org/1999/xlink",
"xlink:role":"http://www.w3.org/1999/xlink","xlink:show":"http://www.w3.org/1999/xlink","xlink:title":"http://www.w3.org/1999/xlink","xlink:type":"http://www.w3.org/1999/xlink","xml:base":"http://www.w3.org/XML/1998/namespace","xml:id":"http://www.w3.org/XML/1998/namespace","xml:lang":"http://www.w3.org/XML/1998/namespace","xml:space":"http://www.w3.org/XML/1998/namespace",y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null};var h3={},kX=cH,VK=dH,fH,WK=g3,jX=XS,i3=h3=function(b,c){if(!b)return sC(document.createTextNode(""));
if("string"===typeof b){if(!("DOMParser"in window))throw Error("DOMParser is not available, so parsing string to DOM node is not possible.");fH=fH||new DOMParser;b=fH.parseFromString(b,"text/html");b=b.body.firstChild?b.getElementsByTagName("body")[0].firstChild:b.head.firstChild&&("TITLE"!==b.head.firstChild.tagName||b.title)?b.head.firstChild:b.firstChild&&"HTML"!==b.firstChild.tagName?b.firstChild:document.createTextNode("")}if("object"!==typeof b||!b||!b.nodeType)throw Error("invalid dom node",
b);return sC(b,c)},j3="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,gH={};!function(b,c){gH?gH=c():(this||j3)[b]=c()}("bowser",function(){function b(f){function k(Ya){return(Ya=f.match(Ya))&&1<Ya.length&&Ya[1]||""}function n(Ya){return(Ya=f.match(Ya))&&1<Ya.length&&Ya[2]||""}var p=k(/(ipod|iphone|ipad)/i).toLowerCase(),q=!/like android/i.test(f)&&/android/i.test(f),r=/nexus\s*[0-6]\s*/i.test(f),t=!r&&/nexus\s*[0-9]+/i.test(f),w=/CrOS/.test(f),x=/silk/i.test(f),B=
/sailfish/i.test(f),D=/tizen/i.test(f),F=/(web|hpw)os/i.test(f),L=/windows phone/i.test(f),G=!L&&/windows/i.test(f),oa=!p&&!x&&/macintosh/i.test(f),ha=!q&&!B&&!D&&!F&&/linux/i.test(f),Ha=k(/edge\/(\d+(\.\d+)?)/i),Va=k(/version\/(\d+(\.\d+)?)/i),hc=/tablet/i.test(f),qc=!hc&&/[^-]mobi/i.test(f),jc=/xbox/i.test(f);/opera|opr|opios/i.test(f)?w={name:"Opera",opera:!0,version:Va||k(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(f)?w={name:"Opera Coast",coast:!0,version:Va||k(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:
/yabrowser/i.test(f)?w={name:"Yandex Browser",yandexbrowser:!0,version:Va||k(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(f)?w={name:"UC Browser",ucbrowser:!0,version:k(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(f)?w={name:"Maxthon",maxthon:!0,version:k(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(f)?w={name:"Epiphany",epiphany:!0,version:k(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(f)?w={name:"Puffin",puffin:!0,version:k(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:
/sleipnir/i.test(f)?w={name:"Sleipnir",sleipnir:!0,version:k(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(f)?w={name:"K-Meleon",kMeleon:!0,version:k(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:L?(w={name:"Windows Phone",windowsphone:!0},Ha?(w.msedge=!0,w.version=Ha):(w.msie=!0,w.version=k(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(f)?w={name:"Internet Explorer",msie:!0,version:k(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:w?w={name:"Chrome",chromeos:!0,chromeBook:!0,chrome:!0,version:k(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:
/chrome.+? edge/i.test(f)?w={name:"Microsoft Edge",msedge:!0,version:Ha}:/vivaldi/i.test(f)?w={name:"Vivaldi",vivaldi:!0,version:k(/vivaldi\/(\d+(\.\d+)?)/i)||Va}:B?w={name:"Sailfish",sailfish:!0,version:k(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(f)?w={name:"SeaMonkey",seamonkey:!0,version:k(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(f)?(w={name:"Firefox",firefox:!0,version:k(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(f)&&
(w.firefoxos=!0)):x?w={name:"Amazon Silk",silk:!0,version:k(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(f)?w={name:"PhantomJS",phantom:!0,version:k(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(f)?w={name:"SlimerJS",slimer:!0,version:k(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(f)||/rim\stablet/i.test(f)?w={name:"BlackBerry",blackberry:!0,version:Va||k(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:F?(w={name:"WebOS",webos:!0,version:Va||k(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(f)&&
(w.touchpad=!0)):/bada/i.test(f)?w={name:"Bada",bada:!0,version:k(/dolfin\/(\d+(\.\d+)?)/i)}:D?w={name:"Tizen",tizen:!0,version:k(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||Va}:/qupzilla/i.test(f)?w={name:"QupZilla",qupzilla:!0,version:k(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||Va}:/chromium/i.test(f)?w={name:"Chromium",chromium:!0,version:k(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||Va}:/chrome|crios|crmo/i.test(f)?w={name:"Chrome",chrome:!0,version:k(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:q?w={name:"Android",
version:Va}:/safari|applewebkit/i.test(f)?(w={name:"Safari",safari:!0},Va&&(w.version=Va)):p?(w={name:"iphone"==p?"iPhone":"ipad"==p?"iPad":"iPod"},Va&&(w.version=Va)):w=/googlebot/i.test(f)?{name:"Googlebot",googlebot:!0,version:k(/googlebot\/(\d+(\.\d+))/i)||Va}:{name:k(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)};!w.msedge&&/(apple)?webkit/i.test(f)?(/(apple)?webkit\/537\.36/i.test(f)?(w.name=w.name||"Blink",w.blink=!0):(w.name=w.name||"Webkit",w.webkit=!0),!w.version&&Va&&(w.version=Va)):!w.opera&&
/gecko\//i.test(f)&&(w.name=w.name||"Gecko",w.gecko=!0,w.version=w.version||k(/gecko\/(\d+(\.\d+)?)/i));w.msedge||!q&&!w.silk?p?(w[p]=!0,w.ios=!0):oa?w.mac=!0:jc?w.xbox=!0:G?w.windows=!0:ha&&(w.linux=!0):w.android=!0;G="";w.windowsphone?G=k(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):p?(G=k(/os (\d+([_\s]\d+)*) like mac os x/i),G=G.replace(/[_\s]/g,".")):q?G=k(/android[ \/-](\d+(\.\d+)*)/i):w.webos?G=k(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):w.blackberry?G=k(/rim\stablet\sos\s(\d+(\.\d+)*)/i):w.bada?G=k(/bada\/(\d+(\.\d+)*)/i):
w.tizen&&(G=k(/tizen[\/\s](\d+(\.\d+)*)/i));G&&(w.osversion=G);G=G.split(".")[0];if(hc||t||"ipad"==p||q&&(3==G||4<=G&&!qc)||w.silk)w.tablet=!0;else if(qc||"iphone"==p||"ipod"==p||q||r||w.blackberry||w.webos||w.bada)w.mobile=!0;w.msedge||w.msie&&10<=w.version||w.yandexbrowser&&15<=w.version||w.vivaldi&&1<=w.version||w.chrome&&20<=w.version||w.firefox&&20<=w.version||w.safari&&6<=w.version||w.opera&&10<=w.version||w.ios&&w.osversion&&6<=w.osversion.split(".")[0]||w.blackberry&&10.1<=w.version||w.chromium&&
20<=w.version?w.a=!0:w.msie&&10>w.version||w.chrome&&20>w.version||w.firefox&&20>w.version||w.safari&&6>w.version||w.opera&&10>w.version||w.ios&&w.osversion&&6>w.osversion.split(".")[0]||w.chromium&&20>w.version?w.c=!0:w.x=!0;return w}function c(f,k){var n=[],p;if(Array.prototype.map)return Array.prototype.map.call(f,k);for(p=0;p<f.length;p++)n=k(f[p]);return n}function g(f){var k=Math.max(f[0].split(".").length,f[1].split(".").length);for(f=c(f,function(n){var p=k-n.split(".").length;n+=Array(p+
1).join(".0");return c(n.split("."),function(q){return Array(20-q.length).join("0")+q}).reverse()});0<=--k;){if(f[0][k]>f[1][k])return 1;if(f[0][k]===f[1][k]){if(0===k)return 0}else return-1}}function a(f,k,n){var p=d;"string"===typeof k&&(n=k,k=void 0);void 0===k&&(k=!1);n&&(p=b(n));n=""+p.version;for(var q in f)if(f.hasOwnProperty(q)&&p[q])return 0>g([n,f[q]]);return k}var d=b("undefined"!==typeof navigator?navigator.userAgent:"");d.test=function(f){for(var k=0;k<f.length;++k){var n=f[k];if("string"===
typeof n&&n in d)return!0}return!1};d.isUnsupportedBrowser=a;d.compareVersions=g;d.check=function(f,k,n){return!a(f,k,n)};d._detect=b;return d});var Bs=gH,Uh=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/property-dom-mapping.js");Uh.styleProps=$y;Uh.canBePromotedToCompositionLayer=tC;Uh.addTransform=XK;Uh.addTransformOrigin=function(b,c){if(b=b.origin)c.transformOrigin="".concat(b.x,"px ").concat(b.y,"px")};Uh.addDisplay=function(b,c){b=b.visible;null!=b&&(c.display=b?"":"none")};
Uh.addBorderRadius=function(b,c){var g=b.borderRadiusTopRight,a=b.borderRadiusBottomRight,d=b.borderRadiusBottomLeft;c.borderRadius="".concat(b.borderRadiusTopLeft,"px ").concat(g,"px ").concat(a,"px ").concat(d,"px")};Uh.addBorder=function(b,c){var g=b.borderWidthLeft,a=b.borderColorLeft,d=b.borderStyleLeft,f=b.borderWidthRight,k=b.borderColorRight,n=b.borderStyleRight,p=b.borderColor,q=b.borderWidthBottom,r=b.borderColorBottom,t=b.borderStyleBottom,w=b.borderWidthTop,x=b.borderColorTop;b=b.borderStyleTop;
var B=function(D){return Uh.bowser.safari?Uh.string.camelize(D):D};c[B("border-left-style")]="".concat(d);c[B("border-right-style")]="".concat(n);c[B("border-bottom-style")]="".concat(t);c[B("border-top-style")]="".concat(b);c[B("border-left-width")]="".concat(g,"px");c[B("border-right-width")]="".concat(f,"px");c[B("border-bottom-width")]="".concat(q,"px");c[B("border-top-width")]="".concat(w,"px");c[B("border-top-color")]=x?x.toString():"transparent";c[B("border-right-color")]=k?k.toString():"transparent";
c[B("border-bottom-color")]=r?r.toString():"transparent";c[B("border-left-color")]=a?a.toString():"transparent";p&&p.isGradient&&(c["border-image"]=p.toString())};Uh.addFill=function(b,c){(b=b.fill)?b.isGradient?c.backgroundImage=b.toString():c.background=b.toString():c.background=Uh.Color.transparent.toString()};Uh.addExtentStyle=function(b,c){b=b.extent;c.width=b.x+"px";c.height=b.y+"px"};Uh.shadowCss=function(b){return b.dropShadow?b.dropShadow.toFilterCss():""};Uh.addShadowStyle=function(b,c){b.isSvgMorph||
b.isImage?c.filter=Uh.shadowCss(b):(b=b.dropShadow)&&b.fast||b&&b.inset?c.boxShadow=b?b.toCss():"none":c.filter=b?b.toFilterCss():""};Uh.addSvgAttributes=uC;Uh.getSvgVertices=Zv;Uh.addPathAttributes=az;Uh.addSvgBorderStyle=function(b,c){var g=b.borderStyle.valueOf();"dashed"===g?(b=b.borderWidth.valueOf(),c["stroke-dasharray"]=1.61*b+" "+b):"dotted"===g&&(c["stroke-dasharray"]="1 "+2*b.borderWidth.valueOf(),c["stroke-linecap"]="round",c["stroke-linejoin"]="round");return c};Uh.Color=Nl;Uh.string=
ji;Uh.Path=Nh;Uh.bowser=Bs;Uh.styleProps=$y;Uh.canBePromotedToCompositionLayer=tC;Uh.addTransform=XK;Uh.addSvgAttributes=uC;Uh.getSvgVertices=Zv;Uh.addPathAttributes=az;var Sf=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js");Sf.defaultStyle=$v;Sf.MorphAfterRenderHook=function(b,c){this.morph=b;this.renderer=c};Sf.Animation=function(b){this.morph=b};Sf.SvgAnimation=YK;Sf.defaultAttributes=aw;Sf.svgAttributes=vC;Sf.pathAttributes=wC;Sf.renderGradient=xC;Sf.initDOMState=
function(b,c){b.rootNode.appendChild(b.domNode);b.ensureDefaultCSS().then(function(){return Sf.promise.delay(500)}).then(function(){return c.env.fontMetric&&c.env.fontMetric.reset()}).then(function(){return c.withAllSubmorphsDo(function(g){if(g.isText||g.isLabel){var a=(g.metadata||{}).serializationInfo;a&&a.recoveredTextBounds||g.forceRerender()}})})["catch"](function(g){return console.error(g)})};Sf.renderMorph=yC;Sf.renderSubTree=zC;Sf.renderRootMorph=AC;Sf.vdom=vx;Sf.parser=i3;Sf.num=Yk;Sf.Path=
Nh;Sf.obj=nh;Sf.arr=mh;Sf.promise=ai;Sf.Color=Nl;Sf.Point=ws;Sf.config=al;Sf.styleProps=$y;Sf.addSvgAttributes=uC;Sf.addPathAttributes=az;Sf.bowser=Bs;var TA=Sf.vdom;Sf.h=TA.h;Sf.diff=TA.diff;Sf.patch=TA.patch;Sf.createNode=TA.create;Sf.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n.hiddenScrollbar {\n  scrollbar-width: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
Sf.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n.hiddenScrollbar {\n  scrollbar-width: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
var Aq=Lc("S",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js"),g=c.hasOwnProperty("ShadowObject")&&"function"===typeof c.ShadowObject?c.ShadowObject:c.ShadowObject=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){Sf.obj.isBoolean(a)&&(a=Sf.config.defaultShadow);var d=
a;a=d.rotation;var f=d.distance,k=d.blur,n=d.color,p=d.morph,q=d.inset,r=d.spread;d=d.fast;this.rotation=Sf.obj.isNumber(a)?a:45;this.distance=Sf.obj.isNumber(f)?f:2;this.blur=Sf.obj.isNumber(k)?k:6;this.inset=q||!1;this.spread=r||0;this.color=n||Sf.Color.gray.darker();this.morph=p;this.fast="boolean"===typeof d?d:!0}},{key:"__dont_serialize__",get:function(){return["morph"]}},{key:"distance",get:function(){return this._distance}},{key:"blur",get:function(){return this._blur}},{key:"rotation",get:function(){return this._rotation}},
{key:"color",get:function(){return this._color}},{key:"inset",get:function(){return this._inset}},{key:"inset",set:function(a){this._inset=a;this.morph&&(this.morph.dropShadow=this)}},{key:"distance",set:function(a){this._distance=a;this.morph&&(this.morph.dropShadow=this)}},{key:"blur",set:function(a){this._blur=a;this.morph&&(this.morph.dropShadow=this)}},{key:"rotation",set:function(a){this._rotation=a;this.morph&&(this.morph.dropShadow=this)}},{key:"color",set:function(a){this._color=a;this.morph&&
(this.morph.dropShadow=this)}},{key:"isShadowObject",get:function(){return!0}},{key:"__serialize__",value:function(){var a=this.toJson(),d=a.distance,f=a.rotation,k=a.color,n=a.inset,p=a.blur,q=a.spread;a=a.fast;k&&(k=k.toJSExpr());return{__expr__:"new ShadowObject({".concat(Sf.arr.compact(Object.entries({distance:d,rotation:f,color:k,inset:n,blur:p,spread:q,fast:a}).map(function(r){var t=Nb(r,2);r=t[0];t=t[1];return void 0===t?null:"".concat(r,":").concat(t)})).join(","),"})"),bindings:{"lively.graphics/color.js":["Color"],
"lively.morphic":["ShadowObject"]}}}},{key:"with",value:function(a){return new Sf.ShadowObject(Object.assign({distance:this.distance,rotation:this.rotation,color:this.color,inset:this.inset,blur:this.blur,spread:this.spread,fast:this.fast},a))}},{key:"toCss",value:function(){var a=this.color,d=this.inset,f=this.blur,k=this.spread,n=Sf.Point.polar(this.distance,Sf.num.toRadians(this.rotation)),p=n.x;n=n.y;return"".concat(d?"inset":""," ").concat(a.toString()," ").concat(p.toFixed(2),"px ").concat(n.toFixed(2),
"px ").concat(f,"px ").concat(k,"px")}},{key:"toJson",value:function(){var a={};45!==this.rotation&&(a.rotation=this.rotation);2!==this.distance&&(a.distance=this.distance);6!==this.blur&&(a.blur=this.blur);this.color.equals(Sf.Color.gray.darker())||(a.color=this.color);!0===this.inset&&(a.inset=this.inset);0!==this.spread&&(a.spread=this.spread);this.fast||(a.fast=this.fast);return a}},{key:"equals",value:function(a){return!!a&&a.isShadowObject&&Sf.obj.equals(this.toJson(),a.toJson())}},{key:"toFilterCss",
value:function(){var a=this.blur,d=this.color,f=Sf.Point.polar(this.distance,Sf.num.toRadians(this.rotation)),k=f.x;f=f.y;a=Sf.bowser.chrome?a/3:a/2;return"drop-shadow(".concat(k.toFixed(2),"px ").concat(f.toFixed(2),"px ").concat(a.toFixed(2),"px ").concat(d.toString(),")")}},{key:"interpolate",value:function(a,d){return new Sf.ShadowObject({distance:Sf.num.interpolate(a,this.distance,d.distance),rotation:Sf.num.interpolate(a,this.rotation,d.rotation),color:this.color.interpolate(a,d.color),blur:Sf.num.interpolate(a,
this.blur,d.blur),spread:Sf.num.interpolate(a,this.spread,d.spread),inset:d.inset,fast:d.fast})}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ShadowObject"}}],c,{pathInPackage:function(){return"./rendering/morphic-default.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3443,end:7949})}(void 0));Sf.ShadowObject=
Aq;Sf.ShadowObject=Aq;Sf.defaultStyle=$v;Sf.MorphAfterRenderHook.prototype.hook=function(b,c,g){var a=this,d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,f=!!b.parentNode;f&&(this.morph._submorphOrderChanged&&this.morph.submorphs.length?(this.morph._submorphOrderChanged=!1,this.updateScrollOfSubmorphs(this.morph,this.renderer)):this.morph.isClip()&&this.updateScroll(this.morph,b),Sf.Path("morph.owner.layout.renderViaCSS").get(this)&&this.morph.owner.layout.ensureBoundsMonitor(b,this.morph),
Sf.Path("morph.layout.renderViaCSS").get(this)&&this.morph.layout.ensureBoundsMonitor(b,this.morph));Sf.Path("morph.owner.layout.renderViaCSS").get(this)&&this.morph.owner.layout.ensureBoundsMonitor(b,this.morph);Sf.Path("morph.layout.renderViaCSS").get(this)&&this.morph.layout.ensureBoundsMonitor(b,this.morph);f||3<d?(this.morph._rendering=!1,this.morph.onAfterRender(b)):(d++,setTimeout(function(){return a.hook(b,c,g,d)},20*d))};Sf.MorphAfterRenderHook.prototype.updateScroll=function(b,c,g){var a=
this,d=b.env.eventDispatcher.eventState.scroll.interactiveScrollInProgress;if(c&&d)return d.then(function(){return a.updateScroll(b,c,!0)});if(!b.isWorld&&c){d=b.scroll;var f=d.x,k=d.y;if(!b._animationQueue.animations.find(function(p){return p.animatedProps.scroll})){var n=b.isText&&b.viewState.fastScroll?c.querySelector(".scrollLayer"):c;!b._skipScrollUpdate&&n&&(n.scrollTop!==k&&(n.scrollTop=k),n.scrollLeft!==f&&(n.scrollLeft=f),!g&&requestAnimationFrame(function(){n.scrollTop!==k&&(n.scrollTop=
k);n.scrollLeft!==f&&(n.scrollLeft=f)},b.id))}}};Sf.MorphAfterRenderHook.prototype.updateScrollOfSubmorphs=function(b,c){var g=this;b.submorphs.forEach(function(a){a.isClip()&&g.updateScroll(a,c.getNodeForMorph(a));g.updateScrollOfSubmorphs(a,c)})};Sf.Animation.prototype.hook=function(b){this.morph._animationQueue.startAnimationsFor(b)};Sf.SvgAnimation=YK;Sf.SvgAnimation.prototype.hook=function(b){this.morph._animationQueue.startSvgAnimationsFor(b,this.type)};Sf.defaultAttributes=aw;Sf.svgAttributes=
vC;Sf.pathAttributes=wC;Sf.renderGradient=xC;Sf.renderMorph=yC;Sf.renderSubTree=zC;Sf.renderRootMorph=AC;var Vd="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,hH={};!function(b,c){c(hH)}(hH,function(b){function c(bb){return 10===bb||13===bb||8232===bb||8233===bb||32===bb||9===bb||11===bb||12===bb||160===bb||5760<=bb&&0<=Mi.indexOf(bb)}function g(bb){return 48<=bb&&57>=bb}function a(bb){(this||Vd).index=0;(this||Vd).path=bb;(this||Vd).max=bb.length;(this||Vd).result=
[];(this||Vd).param=0;(this||Vd).err="";(this||Vd).segmentStart=0;(this||Vd).data=[]}function d(bb){for(;bb.index<bb.max&&c(bb.path.charCodeAt(bb.index));)bb.index++}function f(bb){var dc,Tb=bb.index,rc=Tb,Ic=bb.max,yd=!1,uc=!1,td=!1,hd=!1;if(rc>=Ic)return void(bb.err="SvgPath: missed param (at pos "+rc+")");if(dc=bb.path.charCodeAt(rc),43!==dc&&45!==dc||(rc++,dc=rc<Ic?bb.path.charCodeAt(rc):0),!g(dc)&&46!==dc)return void(bb.err="SvgPath: param should start with 0..9 or `.` (at pos "+rc+")");if(46!==
dc){if(yd=48===dc,rc++,dc=rc<Ic?bb.path.charCodeAt(rc):0,yd&&rc<Ic&&dc&&g(dc))return void(bb.err="SvgPath: numbers started with `0` such as `09` are ilegal (at pos "+Tb+")");for(;rc<Ic&&g(bb.path.charCodeAt(rc));)rc++,uc=!0;dc=rc<Ic?bb.path.charCodeAt(rc):0}if(46===dc){hd=!0;for(rc++;g(bb.path.charCodeAt(rc));)rc++,td=!0;dc=rc<Ic?bb.path.charCodeAt(rc):0}if(101===dc||69===dc){if(hd&&!uc&&!td||(rc++,dc=rc<Ic?bb.path.charCodeAt(rc):0,43!==dc&&45!==dc||rc++,!(rc<Ic&&g(bb.path.charCodeAt(rc)))))return void(bb.err=
"SvgPath: invalid float exponent (at pos "+rc+")");for(;rc<Ic&&g(bb.path.charCodeAt(rc));)rc++}bb.index=rc;bb.param=parseFloat(bb.path.slice(Tb,rc))+0}function k(){if(!((this||Vd)instanceof k))return new k;(this||Vd).queue=[];(this||Vd).cache=null}function n(bb,dc,Tb,rc){var Ic=(bb*Tb+dc*rc)/(Math.sqrt(bb*bb+dc*dc)*Math.sqrt(bb*bb+dc*dc));return 1<Ic&&(Ic=1),-1>Ic&&(Ic=-1),(0>bb*rc-dc*Tb?-1:1)*Math.acos(Ic)}function p(bb,dc,Tb,rc,Ic,yd,uc,td,hd,je){var od=je*(bb-Tb)/2+hd*(dc-rc)/2,Se=-hd*(bb-Tb)/
2+je*(dc-rc)/2,qf=uc*uc,lg=td*td,jg=od*od,Df=Se*Se,kg=qf*lg-qf*Df-lg*jg;0>kg&&(kg=0);kg=Math.sqrt(kg/(qf*Df+lg*jg))*(Ic===yd?-1:1);Ic=kg*uc/td*Se;kg=kg*-td/uc*od;bb=je*Ic-hd*kg+(bb+Tb)/2;dc=hd*Ic+je*kg+(dc+rc)/2;rc=(od-Ic)/uc;hd=(Se-kg)/td;uc=(-od-Ic)/uc;Se=(-Se-kg)/td;td=n(1,0,rc,hd);Se=n(rc,hd,uc,Se);return 0===yd&&0<Se&&(Se-=tn),1===yd&&0>Se&&(Se+=tn),[bb,dc,td,Se]}function q(bb,dc){var Tb=4/3*Math.tan(dc/4),rc=Math.cos(bb),Ic=Math.sin(bb),yd=Math.cos(bb+dc);bb=Math.sin(bb+dc);return[rc,Ic,rc-
Ic*Tb,Ic+rc*Tb,yd+bb*Tb,bb-yd*Tb,yd,bb]}function r(bb,dc,Tb){if(!((this||Vd)instanceof r))return new r(bb,dc,Tb);(this||Vd).rx=bb;(this||Vd).ry=dc;(this||Vd).ax=Tb}function t(bb){if(!((this||Vd)instanceof t))return new t(bb);bb=new a(bb);var dc=bb.max;for(d(bb);bb.index<dc&&!bb.err.length;)a:{var Tb,rc=void 0,Ic=bb,yd=Ic.max;Ic.segmentStart=Ic.index;var uc=Ic.path.charCodeAt(Ic.index);b:{switch(32|uc){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:uc=
!0;break b}uc=!1}if(uc){if(rc=Yh[Ic.path[Ic.index].toLowerCase()],Ic.index++,d(Ic),Ic.data=[],rc)for(uc=!1;;){for(Tb=rc;0<Tb;Tb--){if(f(Ic),Ic.err.length)break a;Ic.data.push(Ic.param);d(Ic);uc=!1;Ic.index<yd&&44===Ic.path.charCodeAt(Ic.index)&&(Ic.index++,d(Ic),uc=!0)}if(!uc){if(Ic.index>=Ic.max)break;Tb=Ic.path.charCodeAt(Ic.index);if(!(48<=Tb&&57>=Tb||43===Tb||45===Tb||46===Tb))break}}yd=Ic;Ic=yd.path[yd.segmentStart];rc=Ic.toLowerCase();uc=yd.data;if("m"===rc&&2<uc.length&&(yd.result.push([Ic,
uc[0],uc[1]]),uc=uc.slice(2),rc="l",Ic="m"===Ic?"l":"L"),"r"===rc)yd.result.push([Ic].concat(uc));else for(;uc.length>=Yh[rc]&&(yd.result.push([Ic].concat(uc.splice(0,Yh[rc]))),Yh[rc]););}else Ic.err="SvgPath: bad command "+Ic.path[Ic.index]+" (at pos "+Ic.index+")"}bb=(bb.err.length?bb.result=[]:bb.result.length&&(0>"mM".indexOf(bb.result[0][0])?(bb.err="SvgPath: string should start with `M` or `m`",bb.result=[]):bb.result[0][0]="M"),{err:bb.err,segments:bb.result});(this||Vd).segments=bb.segments;
(this||Vd).err=bb.err;(this||Vd).__stack=[]}function w(bb,dc,Tb,rc,Ic,yd,uc,td){(this||Vd).a={x:bb,y:dc};(this||Vd).b={x:Tb,y:rc};(this||Vd).c={x:Ic,y:yd};(this||Vd).d={x:uc,y:td};null!==uc&&void 0!==uc&&null!==td&&void 0!==td?((this||Vd).getArcLength=ha,(this||Vd).getPoint=L,(this||Vd).getDerivative=B):((this||Vd).getArcLength=G,(this||Vd).getPoint=F,(this||Vd).getDerivative=x);this.init()}function x(bb,dc,Tb){return{x:2*(1-Tb)*(bb[1]-bb[0])+2*Tb*(bb[2]-bb[1]),y:2*(1-Tb)*(dc[1]-dc[0])+2*Tb*(dc[2]-
dc[1])}}function B(bb,dc,Tb){return F([3*(bb[1]-bb[0]),3*(bb[2]-bb[1]),3*(bb[3]-bb[2])],[3*(dc[1]-dc[0]),3*(dc[2]-dc[1]),3*(dc[3]-dc[2])],Tb)}function D(bb,dc,Tb,rc,Ic){for(var yd=1,uc=bb/dc,td=(bb-Tb(rc,Ic,uc))/dc;.001<yd;){var hd=Tb(rc,Ic,uc+td),je=Tb(rc,Ic,uc-td);hd=Math.abs(bb-hd)/dc;je=Math.abs(bb-je)/dc;hd<yd?(yd=hd,uc+=td):je<yd?(yd=je,uc-=td):td/=2}return uc}function F(bb,dc,Tb){return{x:(1-Tb)*(1-Tb)*bb[0]+2*(1-Tb)*Tb*bb[1]+Tb*Tb*bb[2],y:(1-Tb)*(1-Tb)*dc[0]+2*(1-Tb)*Tb*dc[1]+Tb*Tb*dc[2]}}
function L(bb,dc,Tb){return{x:(1-Tb)*(1-Tb)*(1-Tb)*bb[0]+3*(1-Tb)*(1-Tb)*Tb*bb[1]+3*(1-Tb)*Tb*Tb*bb[2]+Tb*Tb*Tb*bb[3],y:(1-Tb)*(1-Tb)*(1-Tb)*dc[0]+3*(1-Tb)*(1-Tb)*Tb*dc[1]+3*(1-Tb)*Tb*Tb*dc[2]+Tb*Tb*Tb*dc[3]}}function G(bb,dc,Tb){void 0===Tb&&(Tb=1);var rc=bb[0]-2*bb[1]+bb[2],Ic=dc[0]-2*dc[1]+dc[2],yd=2*bb[1]-2*bb[0],uc=2*dc[1]-2*dc[0],td=4*(rc*rc+Ic*Ic);if(0===td)return Tb*Math.sqrt(Math.pow(bb[2]-bb[0],2)+Math.pow(dc[2]-dc[0],2));bb=4*(rc*yd+Ic*uc)/(2*td);Tb+=bb;yd=(yd*yd+uc*uc)/td-bb*bb;return Math.sqrt(td)/
2*(Tb*Math.sqrt(Tb*Tb+yd)-bb*Math.sqrt(bb*bb+yd)+yd*Math.log(Math.abs((Tb+Math.sqrt(Tb*Tb+yd))/(bb+Math.sqrt(bb*bb+yd)))))}function oa(bb,dc,Tb){var rc,Ic=Tb.length-1;if(0===Ic)return 0;if(0===bb){for(rc=bb=0;rc<=Ic;rc++)bb+=Wk[Ic][rc]*Math.pow(1-dc,Ic-rc)*Math.pow(dc,rc)*Tb[rc];return bb}var yd=Array(Ic);for(rc=0;rc<Ic;rc++)yd[rc]=Ic*(Tb[rc+1]-Tb[rc]);return oa(bb-1,dc,yd)}function ha(bb,dc,Tb){var rc,Ic;void 0===Tb&&(Tb=1);Tb/=2;for(Ic=rc=0;20>Ic;Ic++){var yd=Tb*Zf[20][Ic]+Tb;var uc=Yi[20][Ic],
td=dc,hd=yd;yd=oa(1,hd,bb);td=oa(1,hd,td);rc+=uc*Math.sqrt(yd*yd+td*td)}return Tb*rc}function Ha(bb,dc,Tb,rc){var Ic=bb*Tb+dc*rc;return 1<Ic&&(Ic=1),-1>Ic&&(Ic=-1),(0>bb*rc-dc*Tb?-1:1)*Math.acos(Ic)}function Va(bb,dc,Tb,rc,Ic,yd,uc,td,hd,je){var od=je*(bb-Tb)/2+hd*(dc-rc)/2,Se=-hd*(bb-Tb)/2+je*(dc-rc)/2,qf=uc*uc,lg=td*td,jg=od*od,Df=Se*Se,kg=qf*lg-qf*Df-lg*jg;0>kg&&(kg=0);kg=Math.sqrt(kg/(qf*Df+lg*jg))*(Ic===yd?-1:1);Ic=kg*uc/td*Se;kg=kg*-td/uc*od;bb=je*Ic-hd*kg+(bb+Tb)/2;dc=hd*Ic+je*kg+(dc+rc)/2;
rc=(od-Ic)/uc;hd=(Se-kg)/td;uc=(-od-Ic)/uc;Se=(-Se-kg)/td;td=Ha(1,0,rc,hd);Se=Ha(rc,hd,uc,Se);return 0===yd&&0<Se&&(Se-=Xk),1===yd&&0>Se&&(Se+=Xk),[bb,dc,td,Se]}function hc(bb,dc){var Tb=4/3*Math.tan(dc/4),rc=Math.cos(bb),Ic=Math.sin(bb),yd=Math.cos(bb+dc);bb=Math.sin(bb+dc);return[rc,Ic,rc-Ic*Tb,Ic+rc*Tb,yd+bb*Tb,bb-yd*Tb,yd,bb]}function qc(bb,dc,Tb,rc,Ic,yd,uc,td,hd){var je=0,od=[],Se=[];Eu(bb,dc,Tb,rc,Ic,yd,uc,td,hd).forEach(function(qf){qf=new Ye(qf[0],qf[1],qf[2],qf[3],qf[4],qf[5],qf[6],qf[7]);
var lg=qf.getTotalLength();je+=lg;od.push(lg);Se.push(qf)});(this||Vd).length=je;(this||Vd).partialLengths=od;(this||Vd).curves=Se}function jc(bb,dc,Tb,rc){(this||Vd).x0=bb;(this||Vd).x1=dc;(this||Vd).y0=Tb;(this||Vd).y1=rc}function Ya(bb,dc){return Math.sqrt((bb[0]-dc[0])*(bb[0]-dc[0])+(bb[1]-dc[1])*(bb[1]-dc[1]))}function xa(bb,dc,Tb){return[bb[0]+(dc[0]-bb[0])*Tb,bb[1]+(dc[1]-bb[1])*Tb]}function tc(bb,dc,Tb){var rc=bb.map(function(Ic,yd){return Qb(Ic,dc[yd])});return function(Ic){var yd=rc.map(function(uc){return uc(Ic)});
return Tb?Oa(yd):yd}}function Qb(bb,dc){return function(Tb){return bb.map(function(rc,Ic){return rc+Tb*(dc[Ic]-rc)})}}function wc(bb){return"number"==typeof bb&&isFinite(bb)}function Zb(bb){var dc;a:{for(dc=0;dc<bb.length-2;dc++){var Tb=bb[dc],rc=bb[dc+1],Ic=bb[dc+2];if(Tb[0]*(rc[1]-Ic[1])+rc[0]*(Ic[1]-Tb[1])+Ic[0]*(Tb[1]-rc[1])){dc=!0;break a}}dc=!1}if(dc){Ic=-1;var yd=bb.length,uc=0,td=0,hd=bb[yd-1];for(dc=0;++Ic<yd;)Tb=hd,hd=bb[Ic],dc+=rc=Tb[0]*hd[1]-hd[0]*Tb[1],uc+=(Tb[0]+hd[0])*rc,td+=(Tb[1]+
hd[1])*rc;bb=(dc*=3,[uc/dc,td/dc])}else bb=[(bb[0][0]+bb[bb.length-1][0])/2,(bb[0][1]+bb[bb.length-1][1])/2];return bb}function $c(bb){return bb.toString().split("M").map(function(dc,Tb){return dc=dc.trim(),Tb&&dc?"M"+dc:dc}).filter(function(dc){return dc})}function Oa(bb){return"M"+bb.join("L")+"Z"}function md(bb,dc){var Tb=bb.length+dc;dc=uh(bb)/dc;for(var rc=0,Ic=0,yd=dc/2;bb.length<Tb;){var uc=bb[rc],td=bb[(rc+1)%bb.length],hd=Ya(uc,td);yd<=Ic+hd?(bb.splice(rc+1,0,hd?xa(uc,td,(yd-Ic)/hd):uc.slice(0)),
yd+=dc):(Ic+=hd,rc++)}}function la(bb,dc){var Tb;if("string"==typeof bb){bb=(new ed(bb)).abs();a:{var rc=bb.segments||[];var Ic=[];if(rc.length&&"M"===rc[0][0]){for(var yd=0;yd<rc.length;yd++){var uc=rc[yd],td=uc[0],hd=uc[1];uc=uc[2];if("M"===td&&yd||"Z"===td)break;if("M"===td||"L"===td)Ic.push([hd,uc]);else if("H"===td)Ic.push([hd,Ic[Ic.length-1][1]]);else{if("V"!==td){rc=!1;break a}Ic.push([Ic[Ic.length-1][0],hd])}}rc=!!Ic.length&&{ring:Ic}}else rc=!1}if(!rc){Ic=$c(bb)[0];bb=[];rc=3;if(!Ic)throw new TypeError(un);
a:{if("undefined"!=typeof window&&window&&window.document)try{var je=window.document.createElementNS("http://www.w3.org/2000/svg","path");var od=(je.setAttributeNS(null,"d",Ic),je);break a}catch(Se){}od=mp(Ic)}je=od;od=je.getTotalLength();dc&&wc(dc)&&0<dc&&(rc=Math.max(rc,Math.ceil(od/dc)));for(Ic=0;Ic<rc;Ic++)yd=je.getPointAtLength(od*Ic/rc),bb.push([yd.x,yd.y]);rc={ring:bb,skipBisect:!0}}od=rc;bb=od.ring;rc=od.skipBisect}else if(!Array.isArray(bb))throw new TypeError(un);if(Tb=bb.slice(0),!$a(Tb))throw new TypeError(un);
1<Tb.length&&1E-9>Ya(Tb[0],Tb[Tb.length-1])&&Tb.pop();0<Xf(Tb)&&Tb.reverse();if(!rc&&dc&&wc(dc)&&0<dc)for(void 0===dc&&(dc=1/0),od=0;od<Tb.length;od++)for(je=Tb[od],bb=od===Tb.length-1?Tb[0]:Tb[od+1];Ya(je,bb)>dc;)bb=xa(je,bb,.5),Tb.splice(od+1,0,bb);return Tb}function $a(bb){return bb.every(function(dc){return Array.isArray(dc)&&2<=dc.length&&wc(dc[0])&&wc(dc[1])})}function dd(bb,dc,Tb){var rc;return rc=bb.length-dc.length,md(bb,0>rc?-1*rc:0),md(dc,0<rc?rc:0),lq(bb,dc),tc(bb,dc,Tb)}function Kd(bb,
dc,Tb){Tb=Tb||2;var rc=dc&&dc.length,Ic=rc?dc[0]*Tb:bb.length,yd=ra(bb,0,Ic,Tb,!0),uc=[];if(!yd)return uc;var td;if(rc){var hd=Tb,je;var od=[];rc=0;for(je=dc.length;rc<je;rc++){var Se=dc[rc]*hd;var qf=rc<je-1?dc[rc+1]*hd:bb.length;Se=ra(bb,Se,qf,hd,!1);Se===Se.next&&(Se.steiner=!0);od.push(Sa(Se))}od.sort(ea);for(rc=0;rc<od.length;rc++){dc=od[rc];hd=yd;if(hd=Mb(dc,hd))dc=Fe(hd,dc),Aa(dc,dc.next);yd=Aa(yd,yd.next)}}if(bb.length>80*Tb){var lg=td=bb[0];var jg=rc=bb[1];for(hd=Tb;hd<Ic;hd+=Tb)od=bb[hd],
dc=bb[hd+1],od<lg&&(lg=od),dc<jg&&(jg=dc),od>td&&(td=od),dc>rc&&(rc=dc);td=Math.max(td-lg,rc-jg)}return V(yd,uc,Tb,lg,jg,td),uc}function ra(bb,dc,Tb,rc,Ic){if(Ic===0<Yg(bb,dc,Tb,rc))for(Ic=dc;Ic<Tb;Ic+=rc)var yd=Mf(Ic,bb[Ic],bb[Ic+1],yd);else for(Ic=Tb-rc;Ic>=dc;Ic-=rc)yd=Mf(Ic,bb[Ic],bb[Ic+1],yd);return yd&&xd(yd,yd.next)&&(Tg(yd),yd=yd.next),yd}function Aa(bb,dc){if(!bb)return bb;dc||(dc=bb);var Tb=bb;do if(bb=!1,Tb.steiner||!xd(Tb,Tb.next)&&0!==Sc(Tb.prev,Tb,Tb.next))Tb=Tb.next;else{if(Tg(Tb),
(Tb=dc=Tb.prev)===Tb.next)return null;bb=!0}while(bb||Tb!==dc);return dc}function V(bb,dc,Tb,rc,Ic,yd,uc){if(bb){if(!uc&&yd){var td=bb,hd=td;do null===hd.z&&(hd.z=U(hd.x,hd.y,rc,Ic,yd)),hd.prevZ=hd.prev,hd=hd.nextZ=hd.next;while(hd!==td);hd.prevZ.nextZ=null;hd.prevZ=null;td=hd;var je,od,Se,qf,lg=1;do{hd=td;var jg=td=null;for(Se=0;hd;){Se++;var Df=hd;for(je=qf=0;je<lg&&(qf++,Df=Df.nextZ);je++);for(je=lg;0<qf||0<je&&Df;)0===qf?(od=Df,Df=Df.nextZ,je--):0!==je&&Df?hd.z<=Df.z?(od=hd,hd=hd.nextZ,qf--):
(od=Df,Df=Df.nextZ,je--):(od=hd,hd=hd.nextZ,qf--),jg?jg.nextZ=od:td=od,od.prevZ=jg,jg=od;hd=Df}jg.nextZ=null;lg*=2}while(1<Se)}for(hd=bb;bb.prev!==bb.next;){od=bb.prev;td=bb.next;if(yd)a:{Df=bb;je=rc;var kg=Ic,nl=yd;jg=Df.prev;Se=Df;qf=Df.next;if(0<=Sc(jg,Se,qf))Df=!1;else{var wG=jg.x>Se.x?jg.x>qf.x?jg.x:qf.x:Se.x>qf.x?Se.x:qf.x,xG=jg.y>Se.y?jg.y>qf.y?jg.y:qf.y:Se.y>qf.y?Se.y:qf.y;lg=U(jg.x<Se.x?jg.x<qf.x?jg.x:qf.x:Se.x<qf.x?Se.x:qf.x,jg.y<Se.y?jg.y<qf.y?jg.y:qf.y:Se.y<qf.y?Se.y:qf.y,je,kg,nl);je=
U(wG,xG,je,kg,nl);for(kg=Df.nextZ;kg&&kg.z<=je;){if(kg!==Df.prev&&kg!==Df.next&&S(jg.x,jg.y,Se.x,Se.y,qf.x,qf.y,kg.x,kg.y)&&0<=Sc(kg.prev,kg,kg.next)){Df=!1;break a}kg=kg.nextZ}for(kg=Df.prevZ;kg&&kg.z>=lg;){if(kg!==Df.prev&&kg!==Df.next&&S(jg.x,jg.y,Se.x,Se.y,qf.x,qf.y,kg.x,kg.y)&&0<=Sc(kg.prev,kg,kg.next)){Df=!1;break a}kg=kg.prevZ}Df=!0}}else a:if(Df=bb,jg=Df.prev,Se=Df,qf=Df.next,0<=Sc(jg,Se,qf))Df=!1;else{for(lg=Df.next.next;lg!==Df.prev;){if(S(jg.x,jg.y,Se.x,Se.y,qf.x,qf.y,lg.x,lg.y)&&0<=Sc(lg.prev,
lg,lg.next)){Df=!1;break a}lg=lg.next}Df=!0}if(Df)dc.push(od.i/Tb),dc.push(bb.i/Tb),dc.push(td.i/Tb),Tg(bb),hd=bb=td.next;else if((bb=td)===hd){if(uc)if(1===uc){uc=dc;od=Tb;td=bb;do hd=td.prev,Df=td.next.next,!xd(hd,Df)&&Ae(hd,td,td.next,Df)&&ee(hd,Df)&&ee(Df,hd)&&(uc.push(hd.i/od),uc.push(td.i/od),uc.push(Df.i/od),Tg(td),Tg(td.next),td=bb=Df),td=td.next;while(td!==bb);bb=td;V(bb,dc,Tb,rc,Ic,yd,2)}else{if(2===uc)a:{uc=bb;do{for(od=uc.next.next;od!==uc.prev;){if(td=uc.i!==od.i){td=uc;hd=od;if(Df=td.next.i!==
hd.i&&td.prev.i!==hd.i){b:{Df=td;do{if(Df.i!==td.i&&Df.next.i!==td.i&&Df.i!==hd.i&&Df.next.i!==hd.i&&Ae(Df,Df.next,td,hd)){Df=!0;break b}Df=Df.next}while(Df!==td);Df=!1}Df=!Df}if(Df=Df&&ee(td,hd)&&ee(hd,td)){Df=td;jg=!1;Se=(td.x+hd.x)/2;hd=(td.y+hd.y)/2;do Df.y>hd!=Df.next.y>hd&&Se<(Df.next.x-Df.x)*(hd-Df.y)/(Df.next.y-Df.y)+Df.x&&(jg=!jg),Df=Df.next;while(Df!==td);Df=jg}td=Df}if(td){bb=Fe(uc,od);uc=Aa(uc,uc.next);bb=Aa(bb,bb.next);V(uc,dc,Tb,rc,Ic,yd);V(bb,dc,Tb,rc,Ic,yd);break a}od=od.next}uc=uc.next}while(uc!==
bb)}}else V(Aa(bb),dc,Tb,rc,Ic,yd,1);break}}}}function ea(bb,dc){return bb.x-dc.x}function Mb(bb,dc){var Tb=dc,rc=bb.x,Ic=bb.y,yd=-1/0;do{if(Ic<=Tb.y&&Ic>=Tb.next.y){var uc=Tb.x+(Ic-Tb.y)*(Tb.next.x-Tb.x)/(Tb.next.y-Tb.y);if(uc<=rc&&uc>yd){if(yd=uc,uc===rc){if(Ic===Tb.y)return Tb;if(Ic===Tb.next.y)return Tb.next}var td=Tb.x<Tb.next.x?Tb:Tb.next}}Tb=Tb.next}while(Tb!==dc);if(!td)return null;if(rc===yd)return td.prev;var hd;dc=td;uc=td.x;var je=td.y,od=1/0;for(Tb=td.next;Tb!==dc;)rc>=Tb.x&&Tb.x>=uc&&
S(Ic<je?rc:yd,Ic,uc,je,Ic<je?yd:rc,Ic,Tb.x,Tb.y)&&((hd=Math.abs(Ic-Tb.y)/(rc-Tb.x))<od||hd===od&&Tb.x>td.x)&&ee(Tb,bb)&&(td=Tb,od=hd),Tb=Tb.next;return td}function U(bb,dc,Tb,rc,Ic){return bb=32767*(bb-Tb)/Ic,dc=32767*(dc-rc)/Ic,bb=16711935&(bb|bb<<8),bb=252645135&(bb|bb<<4),bb=858993459&(bb|bb<<2),bb=1431655765&(bb|bb<<1),dc=16711935&(dc|dc<<8),dc=252645135&(dc|dc<<4),dc=858993459&(dc|dc<<2),dc=1431655765&(dc|dc<<1),bb|dc<<1}function Sa(bb){var dc=bb,Tb=bb;do dc.x<Tb.x&&(Tb=dc),dc=dc.next;while(dc!==
bb);return Tb}function S(bb,dc,Tb,rc,Ic,yd,uc,td){return 0<=(Ic-uc)*(dc-td)-(bb-uc)*(yd-td)&&0<=(bb-uc)*(rc-td)-(Tb-uc)*(dc-td)&&0<=(Tb-uc)*(yd-td)-(Ic-uc)*(rc-td)}function Sc(bb,dc,Tb){return(dc.y-bb.y)*(Tb.x-dc.x)-(dc.x-bb.x)*(Tb.y-dc.y)}function xd(bb,dc){return bb.x===dc.x&&bb.y===dc.y}function Ae(bb,dc,Tb,rc){return!!(xd(bb,dc)&&xd(Tb,rc)||xd(bb,rc)&&xd(Tb,dc))||0<Sc(bb,dc,Tb)!=0<Sc(bb,dc,rc)&&0<Sc(Tb,rc,bb)!=0<Sc(Tb,rc,dc)}function ee(bb,dc){return 0>Sc(bb.prev,bb,bb.next)?0<=Sc(bb,dc,bb.next)&&
0<=Sc(bb,bb.prev,dc):0>Sc(bb,dc,bb.prev)||0>Sc(bb,bb.next,dc)}function Fe(bb,dc){var Tb=new pg(bb.i,bb.x,bb.y),rc=new pg(dc.i,dc.x,dc.y),Ic=bb.next,yd=dc.prev;return bb.next=dc,dc.prev=bb,Tb.next=Ic,Ic.prev=Tb,rc.next=Tb,Tb.prev=rc,yd.next=rc,rc.prev=yd,rc}function Mf(bb,dc,Tb,rc){bb=new pg(bb,dc,Tb);return rc?(bb.next=rc.next,bb.prev=rc,rc.next.prev=bb,rc.next=bb):(bb.prev=bb,bb.next=bb),bb}function Tg(bb){bb.next.prev=bb.prev;bb.prev.next=bb.next;bb.prevZ&&(bb.prevZ.nextZ=bb.nextZ);bb.nextZ&&(bb.nextZ.prevZ=
bb.prevZ)}function pg(bb,dc,Tb){(this||Vd).i=bb;(this||Vd).x=dc;(this||Vd).y=Tb;(this||Vd).prev=null;(this||Vd).next=null;(this||Vd).z=null;(this||Vd).prevZ=null;(this||Vd).nextZ=null;(this||Vd).steiner=!1}function Yg(bb,dc,Tb,rc){for(var Ic=0,yd=Tb-rc;dc<Tb;dc+=rc)Ic+=(bb[yd]-bb[dc])*(bb[dc+1]+bb[yd+1]),yd=dc;return Ic}function Rh(bb,dc){var Tb=dc.id,rc=dc.bbox,Ic=null==dc.properties?{}:dc.properties;bb=Ei(bb,dc);return null==Tb&&null==rc?{type:"Feature",properties:Ic,geometry:bb}:null==rc?{type:"Feature",
id:Tb,properties:Ic,geometry:bb}:{type:"Feature",id:Tb,bbox:rc,properties:Ic,geometry:bb}}function Ei(bb,dc){function Tb(je){return td(je)}function rc(je){for(var od=[],Se=0,qf=je.length;Se<qf;++Se){var lg=je[Se],jg=od;jg.length&&jg.pop();for(var Df=hd[0>lg?~lg:lg],kg=0,nl=Df.length;kg<nl;++kg)jg.push(td(Df[kg],kg));if(0>lg)for(lg=jg,jg=lg.length,Df=jg-nl;Df<--jg;)nl=lg[Df],lg[Df++]=lg[jg],lg[jg]=nl}return 2>od.length&&od.push(od[0]),od}function Ic(je){for(je=rc(je);4>je.length;)je.push(je[0]);return je}
function yd(je){return je.map(Ic)}function uc(je){var od=je.type;switch(od){case "GeometryCollection":return{type:od,geometries:je.geometries.map(uc)};case "Point":je=td(je.coordinates);break;case "MultiPoint":je=je.coordinates.map(Tb);break;case "LineString":je=rc(je.arcs);break;case "MultiLineString":je=je.arcs.map(rc);break;case "Polygon":je=yd(je.arcs);break;case "MultiPolygon":je=je.arcs.map(yd);break;default:return null}return{type:od,coordinates:je}}var td=js(bb.transform),hd=bb.arcs;return uc(dc)}
function Xj(bb,dc){function Tb(hd){switch(hd.type){case "GeometryCollection":hd.geometries.forEach(Tb);break;case "Polygon":rc(hd.arcs);break;case "MultiPolygon":hd.arcs.forEach(rc)}}function rc(hd){hd.forEach(function(je){je.forEach(function(od){(yd[od=0>od?~od:od]||(yd[od]=[])).push(hd)})});uc.push(hd)}function Ic(hd){hd=Ei(bb,{type:"Polygon",arcs:[hd]}).coordinates[0];for(var je,od=-1,Se=hd.length,qf=hd[Se-1],lg=0;++od<Se;)je=qf,qf=hd[od],lg+=je[0]*qf[1]-je[1]*qf[0];return Math.abs(lg)}var yd=
{},uc=[],td=[];return dc.forEach(Tb),uc.forEach(function(hd){if(!hd._){var je=[],od=[hd];hd._=1;for(td.push(je);hd=od.pop();)je.push(hd),hd.forEach(function(Se){Se.forEach(function(qf){yd[0>qf?~qf:qf].forEach(function(lg){lg._||(lg._=1,od.push(lg))})})})}}),uc.forEach(function(hd){delete hd._}),{type:"MultiPolygon",arcs:td.map(function(hd){var je=[];if(hd.forEach(function(jg){jg.forEach(function(Df){Df.forEach(function(kg){2>yd[0>kg?~kg:kg].length&&je.push(kg)})})}),je=nq(bb,je),1<(hd=je.length))for(var od,
Se,qf=1,lg=Ic(je[0]);qf<hd;++qf)(od=Ic(je[qf]))>lg&&(Se=je[0],je[0]=je[qf],je[qf]=Se,lg=od);return je})}}function Aj(bb){return function(dc,Tb){return uA(bb(dc),Tb)}}function yi(bb,dc){var Tb={},rc={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};return bb.forEach(function(Ic){var yd=[];Ic.forEach(function(uc,td){td=uc[0]<uc[1]?uc.join(","):uc[1]+","+uc[0];uc=uc.map(function(hd){return dc[hd]});td in Tb?yd.push(~Tb[td]):(yd.push(Tb[td]=rc.arcs.length),rc.arcs.push(uc))});
rc.objects.triangles.geometries.push({type:"Polygon",area:Math.abs(Xf(Ic.map(function(uc){return dc[uc[0]]}))),arcs:[yd]})}),rc.objects.triangles.geometries.sort(function(Ic,yd){return Ic.area-yd.area}),rc}function dj(bb,dc){for(var Tb=bb.objects.triangles.geometries,rc=vA(function(Ic){return Ic.area}).left;Tb.length>dc;)!function(){var Ic=Tb[0],yd=uG(Tb)[0][0],uc=Tb[yd],td=Xj(bb,[Ic,uc]);td.area=Ic.area+uc.area;td.type="Polygon";td.arcs=td.arcs[0];Tb.splice(yd,1);Tb.shift();Tb.splice(rc(Tb,td.area),
0,td)}();if(dc>Tb.length)throw new RangeError("Can't collapse topology into "+dc+" pieces.");return Gu(bb,bb.objects.triangles).features.map(function(Ic){return Ic.geometry.coordinates[0].pop(),Ic.geometry.coordinates[0]})}function I(bb){bb=Fu(bb.reduce(function(Ic,yd){return Ic.concat([yd[0]],[yd[1]])},[]));for(var dc=[],Tb=0,rc=bb.length;Tb<rc;Tb+=3)dc.push([[bb[Tb],bb[Tb+1]],[bb[Tb+1],bb[Tb+2]],[bb[Tb+2],bb[Tb]]]);return dc}function Na(bb,dc,Tb){function rc(uc,td,hd){void 0===td&&(td=[]);void 0===
hd&&(hd=0);for(var je=0;je<uc.length;je++){var od=uc.splice(je,1),Se=Tb[od[0]][td.length];hd+Se<Ic&&(uc.length?rc(uc.slice(),td.concat(od),hd+Se):(Ic=hd+Se,yd=td.concat(od)));uc.length&&uc.splice(je,0,od[0])}}var Ic=1/0,yd=bb.map(function(uc,td){return td});return rc(yd),yd}function z(bb,dc,Tb){void 0===Tb&&(Tb={});var rc=Tb.maxSegmentLength;void 0===rc&&(rc=10);var Ic=Tb.string;void 0===Ic&&(Ic=!0);Tb=Tb.single;void 0===Tb&&(Tb=!1);var yd=la(bb,rc);yd.length<dc.length+2&&md(yd,dc.length+2-yd.length);
var uc;yd=wA(yd,dc.length);var td=dc.map(function(hd){return la(hd,rc)});bb="string"==typeof bb&&bb;return Tb&&!dc.every(function(hd){return"string"==typeof hd})||(uc=dc.slice(0)),X(yd,td,{match:!0,string:Ic,single:Tb,t0:bb,t1:uc})}function X(bb,dc,Tb){void 0===Tb&&(Tb={});var rc=Tb.string,Ic=Tb.single,yd=Tb.t0,uc=Tb.t1,td=(Tb=Tb.match)?vG(bb,dc):bb.map(function(od,Se){return Se}),hd=td.map(function(od,Se){return dd(bb[od],dc[Se],rc)});if(Tb&&Array.isArray(yd)&&(yd=td.map(function(od){return yd[od]})),
Ic&&rc&&(Array.isArray(yd)&&(yd=yd.join(" ")),Array.isArray(uc)&&(uc=uc.join(" "))),Ic){var je=rc?function(od){return hd.map(function(Se){return Se(od)}).join(" ")}:function(od){return hd.map(function(Se){return Se(od)})};return rc&&(yd||uc)?function(od){return 1E-4>od&&yd||1E-4>1-od&&uc||je(od)}:je}return rc?(yd=Array.isArray(yd)?yd.map(function(od){return"string"==typeof od&&od}):[],uc=Array.isArray(uc)?uc.map(function(od){return"string"==typeof od&&od}):[],hd.map(function(od,Se){return yd[Se]||
uc[Se]?function(qf){return 1E-4>qf&&yd[Se]||1E-4>1-qf&&uc[Se]||od(qf)}:od})):hd}function rb(bb,dc,Tb,rc,Ic){var yd=hf(bb,dc,Tb),uc=bb-Tb+","+dc,td="A"+Tb+","+Tb+",0,1,1,";return Sd(yd,rc,"M"+uc+td+(bb+Tb+","+dc)+td+uc+"Z",2*Math.PI*Tb,Ic)}function Wc(bb,dc,Tb,rc,Ic,yd){var uc=vf(bb,dc,Tb,rc),td=bb+Tb,hd=dc+rc;return Sd(uc,Ic,"M"+bb+","+dc+"L"+td+","+dc+"L"+td+","+hd+"L"+bb+","+hd+"Z",2*Tb+2*rc,yd)}function Sd(bb,dc,Tb,rc,Ic){void 0===Ic&&(Ic={});var yd=Ic.maxSegmentLength;void 0===yd&&(yd=10);Ic=
Ic.string;void 0===Ic&&(Ic=!0);var uc,td;dc=la(dc,yd);return wc(rc)&&dc.length<rc/yd&&md(dc,Math.ceil(rc/yd-dc.length)),uc=bb(dc),td=tc(uc,dc,Ic),Ic?function(hd){return 1E-4>hd?Tb:td(hd)}:td}function hf(bb,dc,Tb){return function(rc){var Ic=Zb(rc),yd=uh(rc.concat([rc[0]])),uc=Math.atan2(rc[0][1]-Ic[1],rc[0][0]-Ic[0]),td=0;return rc.map(function(hd,je){var od;return je&&(td+=Ya(hd,rc[je-1])),od=uc+2*Math.PI*(yd?td/yd:je/rc.length),[Math.cos(od)*Tb+bb,Math.sin(od)*Tb+dc]})}}function vf(bb,dc,Tb,rc){return function(Ic){var yd=
Zb(Ic),uc=uh(Ic.concat([Ic[0]]));yd=Math.atan2(Ic[0][1]-yd[1],Ic[0][0]-yd[0]);var td=0;0>yd&&(yd=2*Math.PI+yd);var hd=yd/(2*Math.PI);return Ic.map(function(je,od){od&&(td+=Ya(je,Ic[od-1]));je=(hd+(uc?td/uc:od/Ic.length))%1;je=.125>=je?[1,.5+4*je]:.375>=je?[1.5-4*je,1]:.625>=je?[0,2.5-4*je]:.875>=je?[4*je-2.5,0]:[1,4*je-3.5];return[bb+je[0]*Tb,dc+je[1]*rc]})}}var Xf=function(bb){for(var dc,Tb=-1,rc=bb.length,Ic=bb[rc-1],yd=0;++Tb<rc;)dc=Ic,Ic=bb[Tb],yd+=dc[1]*Ic[0]-dc[0]*Ic[1];return yd/2},uh=function(bb){var dc=
-1,Tb=bb.length,rc=bb[Tb-1],Ic=rc[0];rc=rc[1];for(var yd=0;++dc<Tb;){var uc=Ic;var td=rc;rc=bb[dc];Ic=rc[0];rc=rc[1];uc-=Ic;td-=rc;yd+=Math.sqrt(uc*uc+td*td)}return yd},Yh={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},Mi=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];k.prototype.matrix=function(bb){return 1===bb[0]&&0===bb[1]&&0===bb[2]&&1===bb[3]&&0===bb[4]&&0===bb[5]?this||Vd:((this||Vd).cache=null,(this||Vd).queue.push(bb),this||Vd)};k.prototype.translate=
function(bb,dc){return 0===bb&&0===dc||((this||Vd).cache=null,(this||Vd).queue.push([1,0,0,1,bb,dc])),this||Vd};k.prototype.scale=function(bb,dc){return 1===bb&&1===dc||((this||Vd).cache=null,(this||Vd).queue.push([bb,0,0,dc,0,0])),this||Vd};k.prototype.rotate=function(bb,dc,Tb){var rc,Ic,yd;return 0!==bb&&(this.translate(dc,Tb),rc=bb*Math.PI/180,Ic=Math.cos(rc),yd=Math.sin(rc),(this||Vd).queue.push([Ic,yd,-yd,Ic,0,0]),(this||Vd).cache=null,this.translate(-dc,-Tb)),this||Vd};k.prototype.skewX=function(bb){return 0!==
bb&&((this||Vd).cache=null,(this||Vd).queue.push([1,0,Math.tan(bb*Math.PI/180),1,0,0])),this||Vd};k.prototype.skewY=function(bb){return 0!==bb&&((this||Vd).cache=null,(this||Vd).queue.push([1,Math.tan(bb*Math.PI/180),0,1,0,0])),this||Vd};k.prototype.toArray=function(){var bb=this||Vd;if((this||Vd).cache)return(this||Vd).cache;if(!(this||Vd).queue.length)return(this||Vd).cache=[1,0,0,1,0,0],(this||Vd).cache;if((this||Vd).cache=(this||Vd).queue[0],1===(this||Vd).queue.length)return(this||Vd).cache;
for(var dc=1;dc<(this||Vd).queue.length;dc++){var Tb=bb.cache,rc=bb.queue[dc];bb.cache=[Tb[0]*rc[0]+Tb[2]*rc[1],Tb[1]*rc[0]+Tb[3]*rc[1],Tb[0]*rc[2]+Tb[2]*rc[3],Tb[1]*rc[2]+Tb[3]*rc[3],Tb[0]*rc[4]+Tb[2]*rc[5]+Tb[4],Tb[1]*rc[4]+Tb[3]*rc[5]+Tb[5]]}return(this||Vd).cache};k.prototype.calc=function(bb,dc,Tb){var rc;return(this||Vd).queue.length?((this||Vd).cache||((this||Vd).cache=this.toArray()),rc=(this||Vd).cache,[bb*rc[0]+dc*rc[2]+(Tb?0:rc[4]),bb*rc[1]+dc*rc[3]+(Tb?0:rc[5])]):[bb,dc]};var Gl={matrix:!0,
scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},an=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,Qo=/[\s,]+/,ax=function(bb){var dc,Tb,rc=new k;return bb.split(an).forEach(function(Ic){if(Ic.length){if(void 0!==Gl[Ic])return void(dc=Ic);switch(Tb=Ic.split(Qo).map(function(yd){return+yd||0}),dc){case "matrix":return void(6===Tb.length&&rc.matrix(Tb));case "scale":return void(1===Tb.length?rc.scale(Tb[0],Tb[0]):2===Tb.length&&rc.scale(Tb[0],Tb[1]));case "rotate":return void(1===
Tb.length?rc.rotate(Tb[0],0,0):3===Tb.length&&rc.rotate(Tb[0],Tb[1],Tb[2]));case "translate":return void(1===Tb.length?rc.translate(Tb[0],0):2===Tb.length&&rc.translate(Tb[0],Tb[1]));case "skewX":return void(1===Tb.length&&rc.skewX(Tb[0]));case "skewY":return void(1===Tb.length&&rc.skewY(Tb[0]))}}}),rc},tn=2*Math.PI,Vk=function(bb,dc,Tb,rc,Ic,yd,uc,td,hd){var je=Math.sin(hd*tn/360),od=Math.cos(hd*tn/360);hd=od*(bb-Tb)/2+je*(dc-rc)/2;var Se=-je*(bb-Tb)/2+od*(dc-rc)/2;if(0===hd&&0===Se||0===uc||0===
td)return[];uc=Math.abs(uc);td=Math.abs(td);hd=hd*hd/(uc*uc)+Se*Se/(td*td);1<hd&&(uc*=Math.sqrt(hd),td*=Math.sqrt(hd));var qf=p(bb,dc,Tb,rc,Ic,yd,uc,td,je,od);bb=[];dc=qf[2];Tb=qf[3];rc=Math.max(Math.ceil(Math.abs(Tb)/(tn/4)),1);Tb/=rc;for(Ic=0;Ic<rc;Ic++)bb.push(q(dc,Tb)),dc+=Tb;return bb.map(function(lg){for(var jg=0;jg<lg.length;jg+=2){var Df=lg[jg+0],kg=lg[jg+1];Df*=uc;kg*=td;var nl=je*Df+od*kg;lg[jg+0]=od*Df-je*kg+qf[0];lg[jg+1]=nl+qf[1]}return lg})},kq=Math.PI/180;r.prototype.transform=function(bb){var dc=
Math.cos((this||Vd).ax*kq),Tb=Math.sin((this||Vd).ax*kq),rc=[(this||Vd).rx*(bb[0]*dc+bb[2]*Tb),(this||Vd).rx*(bb[1]*dc+bb[3]*Tb),(this||Vd).ry*(-bb[0]*Tb+bb[2]*dc),(this||Vd).ry*(-bb[1]*Tb+bb[3]*dc)];bb=rc[0]*rc[0]+rc[2]*rc[2];dc=rc[1]*rc[1]+rc[3]*rc[3];Tb=((rc[0]-rc[3])*(rc[0]-rc[3])+(rc[2]+rc[1])*(rc[2]+rc[1]))*((rc[0]+rc[3])*(rc[0]+rc[3])+(rc[2]-rc[1])*(rc[2]-rc[1]));var Ic=(bb+dc)/2;if(Tb<1E-10*Ic)return(this||Vd).rx=(this||Vd).ry=Math.sqrt(Ic),(this||Vd).ax=0,this||Vd;rc=rc[0]*rc[1]+rc[2]*rc[3];
Tb=Math.sqrt(Tb);var yd=Ic+Tb/2;Tb=Ic-Tb/2;return(this||Vd).ax=1E-10>Math.abs(rc)&&1E-10>Math.abs(yd-dc)?90:180*Math.atan(Math.abs(rc)>Math.abs(yd-dc)?(yd-bb)/rc:rc/(yd-dc))/Math.PI,0<=(this||Vd).ax?((this||Vd).rx=Math.sqrt(yd),(this||Vd).ry=Math.sqrt(Tb)):((this||Vd).ax+=90,(this||Vd).rx=Math.sqrt(Tb),(this||Vd).ry=Math.sqrt(yd)),this||Vd};r.prototype.isDegenerate=function(){return(this||Vd).rx<1E-10*(this||Vd).ry||(this||Vd).ry<1E-10*(this||Vd).rx};t.prototype.__matrix=function(bb){var dc,Tb=this||
Vd;bb.queue.length&&this.iterate(function(rc,Ic,yd,uc){switch(rc[0]){case "v":var td=bb.calc(0,rc[1],!0);yd=0===td[0]?["v",td[1]]:["l",td[0],td[1]];break;case "V":td=bb.calc(yd,rc[1],!1);yd=td[0]===bb.calc(yd,uc,!1)[0]?["V",td[1]]:["L",td[0],td[1]];break;case "h":td=bb.calc(rc[1],0,!0);yd=0===td[1]?["h",td[0]]:["l",td[0],td[1]];break;case "H":td=bb.calc(rc[1],uc,!1);yd=td[1]===bb.calc(yd,uc,!1)[1]?["H",td[0]]:["L",td[0],td[1]];break;case "a":case "A":td=bb.toArray();var hd=r(rc[1],rc[2],rc[3]).transform(td);
if(0>td[0]*td[3]-td[1]*td[2]&&(rc[5]=rc[5]?"0":"1"),td=bb.calc(rc[6],rc[7],"a"===rc[0]),"A"===rc[0]&&rc[6]===yd&&rc[7]===uc||"a"===rc[0]&&0===rc[6]&&0===rc[7]){yd=["a"===rc[0]?"l":"L",td[0],td[1]];break}yd=hd.isDegenerate()?["a"===rc[0]?"l":"L",td[0],td[1]]:[rc[0],hd.rx,hd.ry,hd.ax,rc[4],rc[5],td[0],td[1]];break;case "m":td=bb.calc(rc[1],rc[2],0<Ic);yd=["m",td[0],td[1]];break;default:for(td=rc[0],yd=[td],uc=td.toLowerCase()===td,dc=1;dc<rc.length;dc+=2)td=bb.calc(rc[dc],rc[dc+1],uc),yd.push(td[0],
td[1])}Tb.segments[Ic]=yd},!0)};t.prototype.__evaluateStack=function(){var bb,dc=this||Vd;if((this||Vd).__stack.length){if(1===(this||Vd).__stack.length)return this.__matrix((this||Vd).__stack[0]),void((this||Vd).__stack=[]);var Tb=k();for(bb=(this||Vd).__stack.length;0<=--bb;)Tb.matrix(dc.__stack[bb].toArray());this.__matrix(Tb);(this||Vd).__stack=[]}};t.prototype.toString=function(){var bb=this||Vd,dc=[];this.__evaluateStack();for(var Tb=0;Tb<(this||Vd).segments.length;Tb++){var rc=bb.segments[Tb][0];
rc=0<Tb&&"m"!==rc&&"M"!==rc&&rc===bb.segments[Tb-1][0];dc=dc.concat(rc?bb.segments[Tb].slice(1):bb.segments[Tb])}return dc.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")};t.prototype.translate=function(bb,dc){return(this||Vd).__stack.push(k().translate(bb,dc||0)),this||Vd};t.prototype.scale=function(bb,dc){return(this||Vd).__stack.push(k().scale(bb,dc||0===dc?dc:bb)),this||Vd};t.prototype.rotate=function(bb,dc,Tb){return(this||Vd).__stack.push(k().rotate(bb,
dc||0,Tb||0)),this||Vd};t.prototype.skewX=function(bb){return(this||Vd).__stack.push(k().skewX(bb)),this||Vd};t.prototype.skewY=function(bb){return(this||Vd).__stack.push(k().skewY(bb)),this||Vd};t.prototype.matrix=function(bb){return(this||Vd).__stack.push(k().matrix(bb)),this||Vd};t.prototype.transform=function(bb){return bb.trim()?((this||Vd).__stack.push(ax(bb)),this||Vd):this||Vd};t.prototype.round=function(bb){var dc,Tb=0,rc=0,Ic=0,yd=0;return bb=bb||0,this.__evaluateStack(),(this||Vd).segments.forEach(function(uc){var td=
uc[0].toLowerCase()===uc[0];switch(uc[0]){case "H":case "h":return td&&(uc[1]+=Ic),Ic=uc[1]-uc[1].toFixed(bb),void(uc[1]=+uc[1].toFixed(bb));case "V":case "v":return td&&(uc[1]+=yd),yd=uc[1]-uc[1].toFixed(bb),void(uc[1]=+uc[1].toFixed(bb));case "Z":case "z":return Ic=Tb,void(yd=rc);case "M":case "m":return td&&(uc[1]+=Ic,uc[2]+=yd),Ic=uc[1]-uc[1].toFixed(bb),yd=uc[2]-uc[2].toFixed(bb),Tb=Ic,rc=yd,uc[1]=+uc[1].toFixed(bb),void(uc[2]=+uc[2].toFixed(bb));case "A":case "a":return td&&(uc[6]+=Ic,uc[7]+=
yd),Ic=uc[6]-uc[6].toFixed(bb),yd=uc[7]-uc[7].toFixed(bb),uc[1]=+uc[1].toFixed(bb),uc[2]=+uc[2].toFixed(bb),uc[3]=+uc[3].toFixed(bb+2),uc[6]=+uc[6].toFixed(bb),void(uc[7]=+uc[7].toFixed(bb));default:return dc=uc.length,td&&(uc[dc-2]+=Ic,uc[dc-1]+=yd),Ic=uc[dc-2]-uc[dc-2].toFixed(bb),yd=uc[dc-1]-uc[dc-1].toFixed(bb),void uc.forEach(function(hd,je){je&&(uc[je]=+uc[je].toFixed(bb))})}}),this||Vd};t.prototype.iterate=function(bb,dc){var Tb,rc=(this||Vd).segments,Ic={},yd=!1,uc=0,td=0,hd=0,je=0;if(dc||
this.__evaluateStack(),rc.forEach(function(Se,qf){var lg=bb(Se,qf,uc,td);Array.isArray(lg)&&(Ic[qf]=lg,yd=!0);qf=Se[0]===Se[0].toLowerCase();switch(Se[0]){case "m":case "M":return uc=Se[1]+(qf?uc:0),td=Se[2]+(qf?td:0),hd=uc,void(je=td);case "h":case "H":return void(uc=Se[1]+(qf?uc:0));case "v":case "V":return void(td=Se[1]+(qf?td:0));case "z":case "Z":return uc=hd,void(td=je);default:uc=Se[Se.length-2]+(qf?uc:0),td=Se[Se.length-1]+(qf?td:0)}}),!yd)return this||Vd;var od=[];for(dc=0;dc<rc.length;dc++)if(void 0!==
Ic[dc])for(Tb=0;Tb<Ic[dc].length;Tb++)od.push(Ic[dc][Tb]);else od.push(rc[dc]);return(this||Vd).segments=od,this||Vd};t.prototype.abs=function(){return this.iterate(function(bb,dc,Tb,rc){dc=bb[0];var Ic=dc.toUpperCase();if(dc!==Ic)switch(bb[0]=Ic,dc){case "v":return void(bb[1]+=rc);case "a":return bb[6]+=Tb,void(bb[7]+=rc);default:for(dc=1;dc<bb.length;dc++)bb[dc]+=dc%2?Tb:rc}},!0),this||Vd};t.prototype.rel=function(){return this.iterate(function(bb,dc,Tb,rc){var Ic=bb[0],yd=Ic.toLowerCase();if(Ic!==
yd&&(0!==dc||"M"!==Ic))switch(bb[0]=yd,Ic){case "V":return void(bb[1]-=rc);case "A":return bb[6]-=Tb,void(bb[7]-=rc);default:for(dc=1;dc<bb.length;dc++)bb[dc]-=dc%2?Tb:rc}},!0),this||Vd};t.prototype.unarc=function(){return this.iterate(function(bb,dc,Tb,rc){var Ic,yd,uc,td=[];dc=bb[0];return"A"!==dc&&"a"!==dc?null:("a"===dc?(yd=Tb+bb[6],uc=rc+bb[7]):(yd=bb[6],uc=bb[7]),Ic=Vk(Tb,rc,yd,uc,bb[4],bb[5],bb[1],bb[2],bb[3]),0===Ic.length?[["a"===bb[0]?"l":"L",bb[6],bb[7]]]:(Ic.forEach(function(hd){td.push(["C",
hd[2],hd[3],hd[4],hd[5],hd[6],hd[7]])}),td))}),this||Vd};t.prototype.unshort=function(){var bb,dc,Tb,rc,Ic,yd=(this||Vd).segments;return this.iterate(function(uc,td,hd,je){var od,Se=uc[0],qf=Se.toUpperCase();td&&("T"===qf?(od="t"===Se,Tb=yd[td-1],"Q"===Tb[0]?(bb=Tb[1]-hd,dc=Tb[2]-je):"q"===Tb[0]?(bb=Tb[1]-Tb[3],dc=Tb[2]-Tb[4]):(bb=0,dc=0),rc=-bb,Ic=-dc,od||(rc+=hd,Ic+=je),yd[td]=[od?"q":"Q",rc,Ic,uc[1],uc[2]]):"S"===qf&&(od="s"===Se,Tb=yd[td-1],"C"===Tb[0]?(bb=Tb[3]-hd,dc=Tb[4]-je):"c"===Tb[0]?(bb=
Tb[3]-Tb[5],dc=Tb[4]-Tb[6]):(bb=0,dc=0),rc=-bb,Ic=-dc,od||(rc+=hd,Ic+=je),yd[td]=[od?"c":"C",rc,Ic,uc[1],uc[2],uc[3],uc[4]]))}),this||Vd};var ed=t,Jb={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},gc=/([astvzqmhlc])([^astvzqmhlc]*)/gi,Kc=function(bb){var dc=[];return bb.replace(gc,function(Tb,rc,Ic){Tb=rc.toLowerCase();Ic=(Ic=Ic.match(Wd))?Ic.map(Number):[];for("m"===Tb&&2<Ic.length&&(dc.push([rc].concat(Ic.splice(0,2))),Tb="l",rc="m"===rc?"l":"L");0<=Ic.length;){if(Ic.length===Jb[Tb])return Ic.unshift(rc),
dc.push(Ic);if(Ic.length<Jb[Tb])throw Error("malformed path data");dc.push([rc].concat(Ic.splice(0,Jb[Tb])))}}),dc},Wd=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,Ye=function(bb,dc,Tb,rc,Ic,yd,uc,td){return new w(bb,dc,Tb,rc,Ic,yd,uc,td)};w.prototype={constructor:w,init:function(){(this||Vd).length=this.getArcLength([(this||Vd).a.x,(this||Vd).b.x,(this||Vd).c.x,(this||Vd).d.x],[(this||Vd).a.y,(this||Vd).b.y,(this||Vd).c.y,(this||Vd).d.y])},getTotalLength:function(){return(this||Vd).length},getPointAtLength:function(bb){bb=
D(bb,(this||Vd).length,(this||Vd).getArcLength,[(this||Vd).a.x,(this||Vd).b.x,(this||Vd).c.x,(this||Vd).d.x],[(this||Vd).a.y,(this||Vd).b.y,(this||Vd).c.y,(this||Vd).d.y]);return this.getPoint([(this||Vd).a.x,(this||Vd).b.x,(this||Vd).c.x,(this||Vd).d.x],[(this||Vd).a.y,(this||Vd).b.y,(this||Vd).c.y,(this||Vd).d.y],bb)},getTangentAtLength:function(bb){bb=D(bb,(this||Vd).length,(this||Vd).getArcLength,[(this||Vd).a.x,(this||Vd).b.x,(this||Vd).c.x,(this||Vd).d.x],[(this||Vd).a.y,(this||Vd).b.y,(this||
Vd).c.y,(this||Vd).d.y]);bb=this.getDerivative([(this||Vd).a.x,(this||Vd).b.x,(this||Vd).c.x,(this||Vd).d.x],[(this||Vd).a.y,(this||Vd).b.y,(this||Vd).c.y,(this||Vd).d.y],bb);var dc=Math.sqrt(bb.x*bb.x+bb.y*bb.y);return 0<dc?{x:bb.x/dc,y:bb.y/dc}:{x:0,y:0}},getPropertiesAtLength:function(bb){bb=D(bb,(this||Vd).length,(this||Vd).getArcLength,[(this||Vd).a.x,(this||Vd).b.x,(this||Vd).c.x,(this||Vd).d.x],[(this||Vd).a.y,(this||Vd).b.y,(this||Vd).c.y,(this||Vd).d.y]);var dc=this.getDerivative([(this||
Vd).a.x,(this||Vd).b.x,(this||Vd).c.x,(this||Vd).d.x],[(this||Vd).a.y,(this||Vd).b.y,(this||Vd).c.y,(this||Vd).d.y],bb);var Tb=Math.sqrt(dc.x*dc.x+dc.y*dc.y);dc=0<Tb?{x:dc.x/Tb,y:dc.y/Tb}:{x:0,y:0};bb=this.getPoint([(this||Vd).a.x,(this||Vd).b.x,(this||Vd).c.x,(this||Vd).d.x],[(this||Vd).a.y,(this||Vd).b.y,(this||Vd).c.y,(this||Vd).d.y],bb);return{x:bb.x,y:bb.y,tangentX:dc.x,tangentY:dc.y}}};var Zf=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,
.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],
[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,
.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,
-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,
.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,
-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,
.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,
.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,
-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,
.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,
-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],Yi=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,
.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,
.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,
.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,
.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,
.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,
.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,
.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,
.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,
.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,
.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,
.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],Wk=[[1],[1,1],[1,2,1],[1,3,3,1]],Xk=2*Math.PI,Eu=function(bb,dc,Tb,rc,Ic,yd,uc,td,hd){var je=Math.sin(Ic*Xk/360),od=Math.cos(Ic*Xk/360);Ic=od*(bb-td)/2+je*(dc-hd)/2;var Se=-je*(bb-td)/2+od*(dc-hd)/2;if(0===Ic&&0===Se||0===Tb||0===rc)return[];
Tb=Math.abs(Tb);rc=Math.abs(rc);Ic=Ic*Ic/(Tb*Tb)+Se*Se/(rc*rc);1<Ic&&(Tb*=Math.sqrt(Ic),rc*=Math.sqrt(Ic));var qf=Va(bb,dc,td,hd,yd,uc,Tb,rc,je,od);bb=[];dc=qf[2];yd=qf[3];uc=Math.max(Math.ceil(Math.abs(yd)/(Xk/4)),1);yd/=uc;for(td=0;td<uc;td++)bb.push(hc(dc,yd)),dc+=yd;return bb.map(function(lg){for(var jg=0;jg<lg.length;jg+=2){var Df=lg[jg+0],kg=lg[jg+1];Df*=Tb;kg*=rc;var nl=je*Df+od*kg;lg[jg+0]=od*Df-je*kg+qf[0];lg[jg+1]=nl+qf[1]}return lg})},is=function(bb,dc,Tb,rc,Ic,yd,uc,td,hd){return new qc(bb,
dc,Tb,rc,Ic,yd,uc,td,hd)};qc.prototype={constructor:qc,init:function(){},getTotalLength:function(){return(this||Vd).length},getPointAtLength:function(bb){var dc=this||Vd;0>bb?bb=0:bb>(this||Vd).length&&(bb=(this||Vd).length);for(var Tb=(this||Vd).partialLengths.length-1;(this||Vd).partialLengths[Tb]>=bb&&0<(this||Vd).partialLengths[Tb];)Tb--;Tb<(this||Vd).partialLengths.length-1&&Tb++;for(var rc=0,Ic=0;Ic<Tb;Ic++)rc+=dc.partialLengths[Ic];return(this||Vd).curves[Tb].getPointAtLength(bb-rc)},getTangentAtLength:function(bb){var dc=
this||Vd;0>bb?bb=0:bb>(this||Vd).length&&(bb=(this||Vd).length);for(var Tb=(this||Vd).partialLengths.length-1;(this||Vd).partialLengths[Tb]>=bb&&0<(this||Vd).partialLengths[Tb];)Tb--;Tb<(this||Vd).partialLengths.length-1&&Tb++;for(var rc=0,Ic=0;Ic<Tb;Ic++)rc+=dc.partialLengths[Ic];return(this||Vd).curves[Tb].getTangentAtLength(bb-rc)},getPropertiesAtLength:function(bb){var dc=this.getTangentAtLength(bb);bb=this.getPointAtLength(bb);return{x:bb.x,y:bb.y,tangentX:dc.x,tangentY:dc.y}}};var yk=function(bb,
dc,Tb,rc){return new jc(bb,dc,Tb,rc)};jc.prototype.getTotalLength=function(){return Math.sqrt(Math.pow((this||Vd).x0-(this||Vd).x1,2)+Math.pow((this||Vd).y0-(this||Vd).y1,2))};jc.prototype.getPointAtLength=function(bb){bb/=Math.sqrt(Math.pow((this||Vd).x0-(this||Vd).x1,2)+Math.pow((this||Vd).y0-(this||Vd).y1,2));return{x:(this||Vd).x0+((this||Vd).x1-(this||Vd).x0)*bb,y:(this||Vd).y0+((this||Vd).y1-(this||Vd).y0)*bb}};jc.prototype.getTangentAtLength=function(){var bb=Math.sqrt(((this||Vd).x1-(this||
Vd).x0)*((this||Vd).x1-(this||Vd).x0)+((this||Vd).y1-(this||Vd).y0)*((this||Vd).y1-(this||Vd).y0));return{x:((this||Vd).x1-(this||Vd).x0)/bb,y:((this||Vd).y1-(this||Vd).y0)/bb}};jc.prototype.getPropertiesAtLength=function(bb){bb=this.getPointAtLength(bb);var dc=this.getTangentAtLength();return{x:bb.x,y:bb.y,tangentX:dc.x,tangentY:dc.y}};var mp=function(bb){function dc(uc){if(!uc)return null;var td;uc=Kc(uc);for(var hd=[0,0],je=[0,0],od=0;od<uc.length;od++)"M"===uc[od][0]?(hd=[uc[od][1],uc[od][2]],
Ic.push(null)):"m"===uc[od][0]?(hd=[uc[od][1]+hd[0],uc[od][2]+hd[1]],Ic.push(null)):"L"===uc[od][0]?(Tb+=Math.sqrt(Math.pow(hd[0]-uc[od][1],2)+Math.pow(hd[1]-uc[od][2],2)),Ic.push(new yk(hd[0],uc[od][1],hd[1],uc[od][2])),hd=[uc[od][1],uc[od][2]]):"l"===uc[od][0]?(Tb+=Math.sqrt(Math.pow(uc[od][1],2)+Math.pow(uc[od][2],2)),Ic.push(new yk(hd[0],uc[od][1]+hd[0],hd[1],uc[od][2]+hd[1])),hd=[uc[od][1]+hd[0],uc[od][2]+hd[1]]):"H"===uc[od][0]?(Tb+=Math.abs(hd[0]-uc[od][1]),Ic.push(new yk(hd[0],uc[od][1],hd[1],
hd[1])),hd[0]=uc[od][1]):"h"===uc[od][0]?(Tb+=Math.abs(uc[od][1]),Ic.push(new yk(hd[0],hd[0]+uc[od][1],hd[1],hd[1])),hd[0]=uc[od][1]+hd[0]):"V"===uc[od][0]?(Tb+=Math.abs(hd[1]-uc[od][1]),Ic.push(new yk(hd[0],hd[0],hd[1],uc[od][1])),hd[1]=uc[od][1]):"v"===uc[od][0]?(Tb+=Math.abs(uc[od][1]),Ic.push(new yk(hd[0],hd[0],hd[1],hd[1]+uc[od][1])),hd[1]=uc[od][1]+hd[1]):"z"===uc[od][0]||"Z"===uc[od][0]?(Tb+=Math.sqrt(Math.pow(uc[0][1]-hd[0],2)+Math.pow(uc[0][2]-hd[1],2)),Ic.push(new yk(hd[0],uc[0][1],hd[1],
uc[0][2])),hd=[uc[0][1],uc[0][2]]):"C"===uc[od][0]?(td=new Ye(hd[0],hd[1],uc[od][1],uc[od][2],uc[od][3],uc[od][4],uc[od][5],uc[od][6]),Tb+=td.getTotalLength(),hd=[uc[od][5],uc[od][6]],Ic.push(td)):"c"===uc[od][0]?(td=new Ye(hd[0],hd[1],hd[0]+uc[od][1],hd[1]+uc[od][2],hd[0]+uc[od][3],hd[1]+uc[od][4],hd[0]+uc[od][5],hd[1]+uc[od][6]),Tb+=td.getTotalLength(),hd=[uc[od][5]+hd[0],uc[od][6]+hd[1]],Ic.push(td)):"S"===uc[od][0]?(td=0<od&&-1<["C","c","S","s"].indexOf(uc[od-1][0])?new Ye(hd[0],hd[1],2*hd[0]-
uc[od-1][uc[od-1].length-4],2*hd[1]-uc[od-1][uc[od-1].length-3],uc[od][1],uc[od][2],uc[od][3],uc[od][4]):new Ye(hd[0],hd[1],hd[0],hd[1],uc[od][1],uc[od][2],uc[od][3],uc[od][4]),Tb+=td.getTotalLength(),hd=[uc[od][3],uc[od][4]],Ic.push(td)):"s"===uc[od][0]?(td=0<od&&-1<["C","c","S","s"].indexOf(uc[od-1][0])?new Ye(hd[0],hd[1],hd[0]+td.d.x-td.c.x,hd[1]+td.d.y-td.c.y,hd[0]+uc[od][1],hd[1]+uc[od][2],hd[0]+uc[od][3],hd[1]+uc[od][4]):new Ye(hd[0],hd[1],hd[0],hd[1],hd[0]+uc[od][1],hd[1]+uc[od][2],hd[0]+uc[od][3],
hd[1]+uc[od][4]),Tb+=td.getTotalLength(),hd=[uc[od][3]+hd[0],uc[od][4]+hd[1]],Ic.push(td)):"Q"===uc[od][0]?(td=new Ye(hd[0],hd[1],uc[od][1],uc[od][2],uc[od][3],uc[od][4]),Tb+=td.getTotalLength(),Ic.push(td),hd=[uc[od][3],uc[od][4]],je=[uc[od][1],uc[od][2]]):"q"===uc[od][0]?(td=new Ye(hd[0],hd[1],hd[0]+uc[od][1],hd[1]+uc[od][2],hd[0]+uc[od][3],hd[1]+uc[od][4]),Tb+=td.getTotalLength(),je=[hd[0]+uc[od][1],hd[1]+uc[od][2]],hd=[uc[od][3]+hd[0],uc[od][4]+hd[1]],Ic.push(td)):"T"===uc[od][0]?(td=0<od&&-1<
["Q","q","T","t"].indexOf(uc[od-1][0])?new Ye(hd[0],hd[1],2*hd[0]-je[0],2*hd[1]-je[1],uc[od][1],uc[od][2]):new yk(hd[0],uc[od][1],hd[1],uc[od][2]),Ic.push(td),Tb+=td.getTotalLength(),je=[2*hd[0]-je[0],2*hd[1]-je[1]],hd=[uc[od][1],uc[od][2]]):"t"===uc[od][0]?(td=0<od&&-1<["Q","q","T","t"].indexOf(uc[od-1][0])?new Ye(hd[0],hd[1],2*hd[0]-je[0],2*hd[1]-je[1],hd[0]+uc[od][1],hd[1]+uc[od][2]):new yk(hd[0],hd[0]+uc[od][1],hd[1],hd[1]+uc[od][2]),Tb+=td.getTotalLength(),je=[2*hd[0]-je[0],2*hd[1]-je[1]],hd=
[uc[od][1]+hd[0],uc[od][2]+hd[0]],Ic.push(td)):"A"===uc[od][0]?(td=new is(hd[0],hd[1],uc[od][1],uc[od][2],uc[od][3],uc[od][4],uc[od][5],uc[od][6],uc[od][7]),Tb+=td.getTotalLength(),hd=[uc[od][6],uc[od][7]],Ic.push(td)):"a"===uc[od][0]&&(td=new is(hd[0],hd[1],uc[od][1],uc[od][2],uc[od][3],uc[od][4],uc[od][5],hd[0]+uc[od][6],hd[1]+uc[od][7]),Tb+=td.getTotalLength(),hd=[hd[0]+uc[od][6],hd[1]+uc[od][7]],Ic.push(td)),rc.push(Tb);return dc}var Tb=0,rc=[],Ic=[];dc.getTotalLength=function(){return Tb};dc.getPointAtLength=
function(uc){uc=yd(uc);return Ic[uc.i].getPointAtLength(uc.fraction)};dc.getTangentAtLength=function(uc){uc=yd(uc);return Ic[uc.i].getTangentAtLength(uc.fraction)};dc.getPropertiesAtLength=function(uc){uc=yd(uc);return Ic[uc.i].getPropertiesAtLength(uc.fraction)};var yd=function(uc){0>uc?uc=0:uc>Tb&&(uc=Tb);for(var td=rc.length-1;rc[td]>=uc&&0<rc[td];)td--;return td++,{fraction:uc-rc[td-1],i:td}};return dc(bb)},un='All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\nExample valid ways of supplying a shape would be:\n[[0, 0], [10, 0], [10, 10]]\n"M0,0 L10,0 L10,10Z"\n',
lq=function(bb,dc){for(var Tb,rc,Ic,yd=bb.length,uc=1/0,td=0;td<yd;td++)!function(hd){rc=0;dc.forEach(function(je,od){je=Ya(bb[(hd+od)%yd],je);rc+=je*je});rc<uc&&(uc=rc,Tb=hd)}(td);Tb&&(Ic=bb.splice(0,Tb),bb.splice.apply(bb,[bb.length,0].concat(Ic)))},Fu=Kd;Kd.deviation=function(bb,dc,Tb,rc){var Ic=dc&&dc.length,yd=Math.abs(Yg(bb,0,Ic?dc[0]*Tb:bb.length,Tb));if(Ic){Ic=0;for(var uc=dc.length;Ic<uc;Ic++)yd-=Math.abs(Yg(bb,dc[Ic]*Tb,Ic<uc-1?dc[Ic+1]*Tb:bb.length,Tb))}for(Ic=dc=0;Ic<rc.length;Ic+=3){uc=
rc[Ic]*Tb;var td=rc[Ic+1]*Tb,hd=rc[Ic+2]*Tb;dc+=Math.abs((bb[uc]-bb[hd])*(bb[td+1]-bb[uc+1])-(bb[uc]-bb[td])*(bb[hd+1]-bb[uc+1]))}return 0===yd&&0===dc?0:Math.abs((dc-yd)/yd)};Kd.flatten=function(bb){for(var dc=bb[0][0].length,Tb={vertices:[],holes:[],dimensions:dc},rc=0,Ic=0;Ic<bb.length;Ic++){for(var yd=0;yd<bb[Ic].length;yd++)for(var uc=0;uc<dc;uc++)Tb.vertices.push(bb[Ic][yd][uc]);0<Ic&&(rc+=bb[Ic-1].length,Tb.holes.push(rc))}return Tb};var mq=function(bb){return bb},js=function(bb){if(null==
bb)return mq;var dc,Tb,rc=bb.scale[0],Ic=bb.scale[1],yd=bb.translate[0],uc=bb.translate[1];return function(td,hd){hd||(dc=Tb=0);hd=2;var je=td.length,od=Array(je);od[0]=(dc+=td[0])*rc+yd;for(od[1]=(Tb+=td[1])*Ic+uc;hd<je;)od[hd]=td[hd],++hd;return od}},Gu=function(bb,dc){return"GeometryCollection"===dc.type?{type:"FeatureCollection",features:dc.geometries.map(function(Tb){return Rh(bb,Tb)})}:Rh(bb,dc)},nq=function(bb,dc){function Tb(je){var od,Se=bb.arcs[0>je?~je:je],qf=Se[0];return bb.transform?
(od=[0,0],Se.forEach(function(lg){od[0]+=lg[0];od[1]+=lg[1]})):od=Se[Se.length-1],0>je?[od,qf]:[qf,od]}function rc(je,od){for(var Se in je){var qf=je[Se];delete od[qf.start];delete qf.start;delete qf.end;qf.forEach(function(lg){Ic[0>lg?~lg:lg]=1});td.push(qf)}}var Ic={},yd={},uc={},td=[],hd=-1;return dc.forEach(function(je,od){var Se,qf=bb.arcs[0>je?~je:je];3>qf.length&&!qf[1][0]&&!qf[1][1]&&(Se=dc[++hd],dc[hd]=je,dc[od]=Se)}),dc.forEach(function(je){var od=Tb(je);var Se=od[0],qf=od[1];(od=uc[Se])?
(delete uc[od.end],od.push(je),od.end=qf,je=yd[qf])?(delete yd[je.start],Se=je===od?od:od.concat(je),yd[Se.start=od.start]=uc[Se.end=je.end]=Se):yd[od.start]=uc[od.end]=od:(od=yd[qf])?(delete yd[od.start],od.unshift(je),od.start=Se,je=uc[Se])?(delete uc[je.end],Se=je===od?od:je.concat(od),yd[Se.start=je.start]=uc[Se.end=od.end]=Se):yd[od.start]=uc[od.end]=od:(od=[je],yd[od.start=Se]=uc[od.end=qf]=od)}),rc(uc,yd),rc(yd,uc),dc.forEach(function(je){Ic[0>je?~je:je]||td.push([je])}),td},tA=function(bb,
dc){for(var Tb=0,rc=bb.length;Tb<rc;){var Ic=Tb+rc>>>1;bb[Ic]<dc?Tb=Ic+1:rc=Ic}return Tb},uG=function(bb){function dc(jg,Df){jg.forEach(function(kg){0>kg&&(kg=~kg);var nl=Ic[kg];nl?nl.push(Df):Ic[kg]=[Df]})}function Tb(jg,Df){jg.forEach(function(kg){dc(kg,Df)})}function rc(jg,Df){"GeometryCollection"===jg.type?jg.geometries.forEach(function(kg){rc(kg,Df)}):jg.type in uc&&uc[jg.type](jg.arcs,Df)}var Ic={},yd=bb.map(function(){return[]}),uc={LineString:dc,MultiLineString:Tb,Polygon:Tb,MultiPolygon:function(jg,
Df){jg.forEach(function(kg){Tb(kg,Df)})}};bb.forEach(rc);for(var td in Ic){bb=Ic[td];for(var hd=bb.length,je=0;je<hd;++je)for(var od=je+1;od<hd;++od){var Se,qf=bb[je],lg=bb[od];(Se=yd[qf])[td=tA(Se,lg)]!==lg&&Se.splice(td,0,lg);(Se=yd[lg])[td=tA(Se,qf)]!==qf&&Se.splice(td,0,qf)}}return yd},uA=function(bb,dc){return bb<dc?-1:bb>dc?1:bb>=dc?0:NaN},vA=function(bb){return 1===bb.length&&(bb=Aj(bb)),{left:function(dc,Tb,rc,Ic){null==rc&&(rc=0);for(null==Ic&&(Ic=dc.length);rc<Ic;){var yd=rc+Ic>>>1;0>bb(dc[yd],
Tb)?rc=yd+1:Ic=yd}return rc},right:function(dc,Tb,rc,Ic){null==rc&&(rc=0);for(null==Ic&&(Ic=dc.length);rc<Ic;){var yd=rc+Ic>>>1;0<bb(dc[yd],Tb)?Ic=yd:rc=yd+1}return rc}}};vA(uA);var wA=function(bb,dc){return dj(yi(I(bb),bb),dc)},vG=function(bb,dc){if(8<bb.length)return bb.map(function(rc,Ic){return Ic});var Tb=bb.map(function(rc){return dc.map(function(Ic){Ic=Ya(Zb(rc),Zb(Ic));return Ic*Ic})});return Na(bb,dc,Tb)};b.interpolate=function(bb,dc,Tb){void 0===Tb&&(Tb={});var rc=Tb.maxSegmentLength;void 0===
rc&&(rc=10);Tb=Tb.string;void 0===Tb&&(Tb=!0);var Ic=la(bb,rc);rc=la(dc,rc);var yd=dd(Ic,rc,Tb);return!Tb||"string"!=typeof bb&&"string"!=typeof dc?yd:function(uc){return 1E-4>uc&&"string"==typeof bb?bb:1E-4>1-uc&&"string"==typeof dc?dc:yd(uc)}};b.separate=z;b.combine=function(bb,dc,Tb){void 0===Tb&&(Tb={});var rc=Tb.maxSegmentLength;void 0===rc&&(rc=10);var Ic=Tb.string;void 0===Ic&&(Ic=!0);Tb=Tb.single;void 0===Tb&&(Tb=!1);var yd=z(dc,bb,{maxSegmentLength:rc,string:Ic,single:Tb});return Tb?function(uc){return yd(1-
uc)}:yd.map(function(uc){return function(td){return uc(1-td)}})};b.interpolateAll=function(bb,dc,Tb){void 0===Tb&&(Tb={});var rc=Tb.maxSegmentLength;void 0===rc&&(rc=10);var Ic=Tb.string;void 0===Ic&&(Ic=!0);Tb=Tb.single;if(void 0===Tb&&(Tb=!1),!Array.isArray(bb)||!Array.isArray(dc)||bb.length!==dc.length||!bb.length)throw new TypeError("flubber.all() expects two arrays of equal length as arguments. Each element in both arrays should be an array of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).");
var yd,uc,td=function(je){return la(je,rc)},hd=bb.map(td);td=dc.map(td);return Tb?(bb.every(function(je){return"string"==typeof je})&&(yd=bb.slice(0)),dc.every(function(je){return"string"==typeof je})&&(uc=dc.slice(0))):(yd=bb.slice(0),uc=dc.slice(0)),X(hd,td,{string:Ic,single:Tb,t0:yd,t1:uc,match:!1})};b.splitPathString=function(bb){return $c((new ed(bb)).abs())};b.toPathString=Oa;b.fromCircle=rb;b.toCircle=function(bb,dc,Tb,rc,Ic){var yd=rb(dc,Tb,rc,bb,Ic);return function(uc){return yd(1-uc)}};
b.fromRect=Wc;b.toRect=function(bb,dc,Tb,rc,Ic,yd){var uc=Wc(dc,Tb,rc,Ic,bb,yd);return function(td){return uc(1-td)}};Object.defineProperty(b,"__esModule",{value:!0})});var k3={},l3="function"===typeof Float32Array,m3=k3=function(b,c,g,a){if(!(0<=b&&1>=b&&0<=g&&1>=g))throw Error("bezier x values must be in [0, 1] range");if(b===c&&g===a)return lX;for(var d=l3?new Float32Array(11):Array(11),f=0;11>f;++f)d[f]=bz(.1*f,b,g);return function(k){if(0===k)return 0;if(1===k)return 1;for(var n=0,p=1;10!==p&&
d[p]<=k;++p)n+=.1;--p;p=n+(k-d[p])/(d[p+1]-d[p])*.1;var q=3*(1-3*g+3*b)*p*p+2*(3*g-6*b)*p+3*b;if(.001<=q){for(n=0;4>n;++n){q=3*(1-3*g+3*b)*p*p+2*(3*g-6*b)*p+3*b;if(0===q)break;var r=bz(p,b,g)-k;p-=r/q}k=p}else if(0===q)k=p;else{p=n;n+=.1;var t=0;do r=p+(n-p)/2,q=bz(r,b,g)-k,0<q?n=r:p=r;while(1E-7<Math.abs(q)&&10>++t);k=r}return bz(k,c,a)}},Jd="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;!function(){var b={},c={};!function(g,a){function d(){(this||Jd)._delay=0;(this||
Jd)._endDelay=0;(this||Jd)._fill="none";(this||Jd)._iterationStart=0;(this||Jd)._iterations=1;(this||Jd)._duration=0;(this||Jd)._playbackRate=1;(this||Jd)._direction="normal";(this||Jd)._easing="linear";(this||Jd)._easingFunction=B}function f(){return g.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function k(xa,tc,Qb){var wc=new d;return tc&&(wc.fill="both",wc.duration="auto"),"number"!=typeof xa||isNaN(xa)?void 0!==xa&&Object.getOwnPropertyNames(xa).forEach(function(Zb){"auto"==
xa[Zb]||("number"==typeof wc[Zb]||"duration"==Zb)&&("number"!=typeof xa[Zb]||isNaN(xa[Zb]))||"fill"==Zb&&-1==w.indexOf(xa[Zb])||"direction"==Zb&&-1==x.indexOf(xa[Zb])||"playbackRate"==Zb&&1!==xa[Zb]&&g.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead.")||(wc[Zb]=xa[Zb])}):wc.duration=xa,wc}function n(xa,tc,Qb,wc){return 0>xa||1<xa||0>Qb||1<Qb?B:function(Zb){if(0>=Zb){var $c=0;return 0<xa?$c=tc/xa:!tc&&0<Qb&&($c=wc/Qb),$c*Zb}if(1<=Zb)return $c=0,1>
Qb?$c=(wc-1)/(Qb-1):1==Qb&&1>xa&&($c=(tc-1)/(xa-1)),1+$c*(Zb-1);$c=0;for(var Oa=1;$c<Oa;){var md=($c+Oa)/2,la=3*xa*(1-md)*(1-md)*md+3*Qb*(1-md)*md*md+md*md*md;if(1E-5>Math.abs(Zb-la))break;la<Zb?$c=md:Oa=md}return 3*tc*(1-md)*(1-md)*md+3*wc*(1-md)*md*md+md*md*md}}function p(xa,tc){return function(Qb){if(1<=Qb)return 1;var wc=1/xa;return(Qb+=tc*wc)-Qb%wc}}function q(xa){oa||(oa=document.createElement("div").style);oa.animationTimingFunction="";oa.animationTimingFunction=xa;var tc=oa.animationTimingFunction;
if(""==tc&&f())throw new TypeError(xa+" is not a valid value for easing");return tc}function r(xa){if("linear"==xa)return B;var tc=ha.exec(xa);return tc?n.apply(this||Jd,tc.slice(1).map(Number)):(tc=Ha.exec(xa))?p(Number(tc[1]),L):(tc=Va.exec(xa))?p(Number(tc[1]),{start:D,middle:F,end:L}[tc[2]]):G[xa]||B}function t(xa,tc,Qb){if(null==tc)return hc;var wc=Qb.delay+xa+Qb.endDelay;return tc<Math.min(Qb.delay,wc)?qc:tc>=Math.min(Qb.delay+xa,wc)?jc:Ya}var w=["backwards","forwards","both","none"],x=["reverse",
"alternate","alternate-reverse"],B=function(xa){return xa};d.prototype={_setMember:function(xa,tc){(this||Jd)["_"+xa]=tc;(this||Jd)._effect&&((this||Jd)._effect._timingInput[xa]=tc,(this||Jd)._effect._timing=g.normalizeTimingInput((this||Jd)._effect._timingInput),(this||Jd)._effect.activeDuration=g.calculateActiveDuration((this||Jd)._effect._timing),(this||Jd)._effect._animation&&(this||Jd)._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return(this||Jd)._playbackRate},set delay(xa){this._setMember("delay",
xa)},get delay(){return(this||Jd)._delay},set endDelay(xa){this._setMember("endDelay",xa)},get endDelay(){return(this||Jd)._endDelay},set fill(xa){this._setMember("fill",xa)},get fill(){return(this||Jd)._fill},set iterationStart(xa){if((isNaN(xa)||0>xa)&&f())throw new TypeError("iterationStart must be a non-negative number, received: "+xa);this._setMember("iterationStart",xa)},get iterationStart(){return(this||Jd)._iterationStart},set duration(xa){if("auto"!=xa&&(isNaN(xa)||0>xa)&&f())throw new TypeError("duration must be non-negative or auto, received: "+
xa);this._setMember("duration",xa)},get duration(){return(this||Jd)._duration},set direction(xa){this._setMember("direction",xa)},get direction(){return(this||Jd)._direction},set easing(xa){(this||Jd)._easingFunction=r(q(xa));this._setMember("easing",xa)},get easing(){return(this||Jd)._easing},set iterations(xa){if((isNaN(xa)||0>xa)&&f())throw new TypeError("iterations must be non-negative, received: "+xa);this._setMember("iterations",xa)},get iterations(){return(this||Jd)._iterations}};var D=1,F=
.5,L=0,G={ease:n(.25,.1,.25,1),"ease-in":n(.42,0,1,1),"ease-out":n(0,0,.58,1),"ease-in-out":n(.42,0,.58,1),"step-start":p(1,D),"step-middle":p(1,F),"step-end":p(1,L)},oa=null,ha=/cubic-bezier\(\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*\)/,Ha=/steps\(\s*(\d+)\s*\)/,Va=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,hc=0,qc=1,jc=2,Ya=3;g.cloneTimingInput=function(xa){if("number"==typeof xa)return xa;var tc={},Qb;for(Qb in xa)tc[Qb]=
xa[Qb];return tc};g.makeTiming=k;g.numericTimingToObject=function(xa){return"number"==typeof xa&&(xa=isNaN(xa)?{duration:0}:{duration:xa}),xa};g.normalizeTimingInput=function(xa,tc){return xa=g.numericTimingToObject(xa),k(xa,tc)};g.calculateActiveDuration=function(xa){return Math.abs((0===xa.duration||0===xa.iterations?0:xa.duration*xa.iterations)/xa.playbackRate)};g.calculateIterationProgress=function(xa,tc,Qb){var wc=t(xa,tc,Qb);a:{var Zb=Qb.fill;switch(wc){case qc:xa="backwards"==Zb||"both"==Zb?
0:null;break a;case Ya:xa=tc-Qb.delay;break a;case jc:xa="forwards"==Zb||"both"==Zb?xa:null;break a;case hc:xa=null;break a}xa=void 0}if(null===xa)return null;tc=Qb.duration;Zb=Qb.iterationStart;tc=(0===tc?wc!==qc&&(Zb+=Qb.iterations):Zb+=xa/tc,Zb);Zb=tc===1/0?Qb.iterationStart%1:tc%1;xa=(0!==Zb||wc!==jc||0===Qb.iterations||0===xa&&0!==Qb.duration||(Zb=1),Zb);Zb=wc===jc&&Qb.iterations===1/0?1/0:1===xa?Math.floor(tc)-1:Math.floor(tc);tc=wc=Qb.direction;"normal"!==wc&&"reverse"!==wc&&("alternate-reverse"===
wc&&(Zb+=1),tc="normal",Zb!==1/0&&0!=Zb%2&&(tc="reverse"));return Qb._easingFunction("normal"===tc?xa:1-xa)};g.calculatePhase=t;g.normalizeEasing=q;g.parseEasingFunction=r}(b);(function(g,a){function d(p){var q=[],r;for(r in p)if(!(r in["easing","offset","composite"])){var t=p[r];Array.isArray(t)||(t=[t]);for(var w,x=t.length,B=0;B<x;B++)w={},w.offset="offset"in p?p.offset:1==x?1:B/(x-1),"easing"in p&&(w.easing=p.easing),"composite"in p&&(w.composite=p.composite),w[r]=t[B],q.push(w)}return q.sort(function(D,
F){return D.offset-F.offset}),q}var f={background:"backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundAttachment backgroundOrigin backgroundClip backgroundColor".split(" "),border:"borderTopColor borderTopStyle borderTopWidth borderRightColor borderRightStyle borderRightWidth borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth".split(" "),borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor",
"borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],
font:"fontFamily fontSize fontStyle fontVariant fontWeight lineHeight".split(" "),margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle","outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},k=document.createElementNS("http://www.w3.org/1999/xhtml","div");a={thin:"1px",medium:"3px",thick:"5px"};var n={borderBottomWidth:a,borderLeftWidth:a,borderRightWidth:a,borderTopWidth:a,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",
medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:a,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};g.convertToArrayForm=d;g.normalizeKeyframes=function(p){function q(){var B=r.length;null==r[B-1].offset&&(r[B-1].offset=1);1<B&&null==r[0].offset&&(r[0].offset=0);for(var D=0,F=r[0].offset,L=1;L<B;L++){var G=r[L].offset;if(null!=G){for(var oa=1;oa<L-D;oa++)r[D+oa].offset=F+(G-F)*oa/(L-D);D=L;F=
G}}}if(null==p)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&p[Symbol.iterator]&&(p=Array.from(p));Array.isArray(p)||(p=d(p));var r=p.map(function(B){var D={},F;for(F in B){var L=B[F];if("offset"==F){if(null!=L){if(L=Number(L),!isFinite(L))throw new TypeError("Keyframe offsets must be numbers.");if(0>L||1<L)throw new TypeError("Keyframe offsets must be between 0 and 1.");}}else if("composite"==F){if("add"==L||"accumulate"==L)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",
message:"add compositing is not supported"};if("replace"!=L)throw new TypeError("Invalid composite mode "+L+".");}else L="easing"==F?g.normalizeEasing(L):""+L;var G=void 0,oa=F,ha=L;L=D;var Ha=oa;if("display"!==Ha&&0!==Ha.lastIndexOf("animation",0)&&0!==Ha.lastIndexOf("transition",0))if(Ha=f[oa])for(G in k.style[oa]=ha,Ha)oa=Ha[G],ha=k.style[oa],L[oa]=oa in n?n[oa][ha]||ha:ha;else L[oa]=oa in n?n[oa][ha]||ha:ha}return void 0==D.offset&&(D.offset=null),void 0==D.easing&&(D.easing="linear"),D});p=!0;
for(var t=-1/0,w=0;w<r.length;w++){var x=r[w].offset;if(null!=x){if(x<t)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");t=x}else p=!1}return r=r.filter(function(B){return 0<=B.offset&&1>=B.offset}),p||q(),r}})(b);(function(g){var a={};g.isDeprecated=function(d,f,k,n){n=n?"are":"is";var p=new Date;f=new Date(f);return f.setMonth(f.getMonth()+3),!(p<f&&(d in a||console.warn("Web Animations: "+d+" "+n+" deprecated and will stop working on "+f.toDateString()+
". "+k),a[d]=!0,1))};g.deprecated=function(d,f,k,n){var p=n?"are":"is";if(g.isDeprecated(d,f,k,n))throw Error(d+" "+p+" no longer supported. "+k);}})(b);(function(){if(document.documentElement.animate){var g=document.documentElement.animate([],0),a=!0;if(g&&(a=!1,"play currentTime pause reverse playbackRate cancel finish startTime playState".split(" ").forEach(function(d){void 0===g[d]&&(a=!0)})),!a)return}!function(d,f,k){function n(q){for(var r={},t=0;t<q.length;t++)for(var w in q[t])if("offset"!=
w&&"easing"!=w&&"composite"!=w){var x={offset:q[t].offset,easing:q[t].easing,value:q[t][w]};r[w]=r[w]||[];r[w].push(x)}for(var B in r)if(q=r[B],0!=q[0].offset||1!=q[q.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"Partial keyframes are not supported"};return r}function p(q){var r=[],t;for(t in q)for(var w=q[t],x=0;x<w.length-1;x++){var B=x,D=x+1,F=w[B].offset,L=w[D].offset,G=F,oa=L;0==x&&(G=-1/0,0==L&&(D=B));x==w.length-2&&(oa=1/0,1==F&&(B=D));r.push({applyFrom:G,
applyTo:oa,startOffset:w[B].offset,endOffset:w[D].offset,easingFunction:d.parseEasingFunction(w[B].easing),property:t,interpolation:f.propertyInterpolation(t,w[B].value,w[D].value)})}return r.sort(function(ha,Ha){return ha.startOffset-Ha.startOffset}),r}f.convertEffectInput=function(q){q=d.normalizeKeyframes(q);var r=n(q),t=p(r);return function(w,x){if(null!=x)t.filter(function(D){return x>=D.applyFrom&&x<D.applyTo}).forEach(function(D){var F=x-D.startOffset,L=D.endOffset-D.startOffset;F=0==L?0:D.easingFunction(F/
L);f.apply(w,D.property,D.interpolation(F))});else for(var B in r)"offset"!=B&&"easing"!=B&&"composite"!=B&&f.clear(w,B)}}}(b,c);(function(d,f,k){function n(r){return r.replace(/-(.)/g,function(t,w){return w.toUpperCase()})}var p={};f.addPropertiesHandler=function(r,t,w){for(var x=0;x<w.length;x++){var B=r,D=t,F=n(w[x]);p[F]=p[F]||[];p[F].push([B,D])}};var q={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",
borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",
maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",strokeDasharray:"none",strokeDashoffset:"0px",textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};f.propertyInterpolation=function(r,t,w){var x=r;/-/.test(r)&&!d.isDeprecated("Hyphenated property names",
"2016-03-22","Use camelCase instead.",!0)&&(x=n(r));"initial"!=t&&"initial"!=w||("initial"==t&&(t=q[x]),"initial"==w&&(w=q[x]));r=t==w?[]:p[x];for(x=0;r&&x<r.length;x++){var B=r[x][0](t),D=r[x][0](w);if(void 0!==B&&void 0!==D&&(B=r[x][1](B,D))){var F=f.Interpolation.apply(null,B);return function(L){return 0==L?t:1==L?w:F(L)}}}return f.Interpolation(!1,!0,function(L){return L?w:t})}})(b,c);(function(d,f,k){function n(p){var q=d.calculateActiveDuration(p),r=function(t){return d.calculateIterationProgress(q,
t,p)};return r._totalDuration=p.delay+q+p.endDelay,r}f.KeyframeEffect=function(p,q,r,t){var w,x=n(d.normalizeTimingInput(r)),B=f.convertEffectInput(q);q=function(){B(p,w)};return q._update=function(D){return null!==(w=x(D))},q._clear=function(){B(p,null)},q._hasSameTarget=function(D){return p===D},q._target=p,q._totalDuration=x._totalDuration,q._id=t,q}})(b,c);(function(d,f){function k(B,D,F){F.enumerable=!0;F.configurable=!0;Object.defineProperty(B,D,F)}function n(B){(this||Jd)._element=B;(this||
Jd)._surrogateStyle=document.createElementNS("http://www.w3.org/1999/xhtml","div").style;(this||Jd)._style=B.style;(this||Jd)._length=0;(this||Jd)._isAnimatedProperty={};var D=window;B=!(!B.namespaceURI||-1==B.namespaceURI.indexOf("/svg"))&&(q in D||(D[q]=/Trident|MSIE|IEMobile|Edge|Android 4/i.test(D.navigator.userAgent)),D[q]);(this||Jd)._updateSvgTransformAttr=B;(this||Jd)._savedTransformAttr=null;for(B=0;B<(this||Jd)._style.length;B++)D=(this||Jd)._style[B],(this||Jd)._surrogateStyle[D]=(this||
Jd)._style[D];this._updateIndices()}function p(B){if(!B._webAnimationsPatchedStyle){var D=new n(B);try{k(B,"style",{get:function(){return D}})}catch(F){B.style._set=function(L,G){B.style[L]=G},B.style._clear=function(L){B.style[L]=""}}B._webAnimationsPatchedStyle=B.style}}var q="_webAnimationsUpdateSvgTransformAttr";f={cssText:1,length:1,parentRule:1};var r={getPropertyCSSValue:1,getPropertyPriority:1,getPropertyValue:1,item:1,removeProperty:1,setProperty:1},t={removeProperty:1,setProperty:1};n.prototype=
{get cssText(){return(this||Jd)._surrogateStyle.cssText},set cssText(B){for(var D={},F=0;F<(this||Jd)._surrogateStyle.length;F++)D[(this||Jd)._surrogateStyle[F]]=!0;(this||Jd)._surrogateStyle.cssText=B;this._updateIndices();for(F=0;F<(this||Jd)._surrogateStyle.length;F++)D[(this||Jd)._surrogateStyle[F]]=!0;for(var L in D)(this||Jd)._isAnimatedProperty[L]||(this||Jd)._style.setProperty(L,(this||Jd)._surrogateStyle.getPropertyValue(L))},get length(){return(this||Jd)._surrogateStyle.length},get parentRule(){return(this||
Jd)._style.parentRule},_updateIndices:function(){for(;(this||Jd)._length<(this||Jd)._surrogateStyle.length;)Object.defineProperty(this||Jd,(this||Jd)._length,{configurable:!0,enumerable:!1,get:function(B){return function(){return(this||Jd)._surrogateStyle[B]}}((this||Jd)._length)}),(this||Jd)._length++;for(;(this||Jd)._length>(this||Jd)._surrogateStyle.length;)(this||Jd)._length--,Object.defineProperty(this||Jd,(this||Jd)._length,{configurable:!0,enumerable:!1,value:void 0})},_set:function(B,D){(this||
Jd)._style[B]=D;(this||Jd)._isAnimatedProperty[B]=!0;(this||Jd)._updateSvgTransformAttr&&"transform"==d.unprefixedPropertyName(B)&&(null==(this||Jd)._savedTransformAttr&&((this||Jd)._savedTransformAttr=(this||Jd)._element.getAttribute("transform")),(this||Jd)._element.setAttribute("transform",d.transformToSvgMatrix(D)))},_clear:function(B){(this||Jd)._style[B]=(this||Jd)._surrogateStyle[B];(this||Jd)._updateSvgTransformAttr&&"transform"==d.unprefixedPropertyName(B)&&((this||Jd)._savedTransformAttr?
(this||Jd)._element.setAttribute("transform",(this||Jd)._savedTransformAttr):(this||Jd)._element.removeAttribute("transform"),(this||Jd)._savedTransformAttr=null);delete (this||Jd)._isAnimatedProperty[B]}};for(var w in r)n.prototype[w]=function(B,D){return function(){var F=(this||Jd)._surrogateStyle[B].apply((this||Jd)._surrogateStyle,arguments);return D&&((this||Jd)._isAnimatedProperty[arguments[0]]||(this||Jd)._style[B].apply((this||Jd)._style,arguments),this._updateIndices()),F}}(w,w in t);for(var x in document.documentElement.style)x in
f||x in r||function(B){k(n.prototype,B,{get:function(){return(this||Jd)._surrogateStyle[B]},set:function(D){(this||Jd)._surrogateStyle[B]=D;this._updateIndices();(this||Jd)._isAnimatedProperty[B]||((this||Jd)._style[B]=D)}})}(x);d.apply=function(B,D,F){p(B);B.style._set(d.propertyName(D),F)};d.clear=function(B,D){B._webAnimationsPatchedStyle&&B.style._clear(d.propertyName(D))}})(c);(function(d){window.Element.prototype.animate=function(f,k){var n="";return k&&k.id&&(n=k.id),d.timeline._play(d.KeyframeEffect(this||
Jd,f,k,n))}})(c);(function(d,f){function k(n,p,q){if("number"==typeof n&&"number"==typeof p)return n*(1-q)+p*q;if("boolean"==typeof n&&"boolean"==typeof p)return.5>q?n:p;if(n.length==p.length){for(var r=[],t=0;t<n.length;t++)r.push(k(n[t],p[t],q));return r}throw"Mismatched interpolation arguments "+n+":"+p;}d.Interpolation=function(n,p,q){return function(r){return q(k(n,p,r))}}})(c);(function(d,f){f=function(){function k(n,p){for(var q=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0;4>r;r++)for(var t=
0;4>t;t++)for(var w=0;4>w;w++)q[r][t]+=p[r][w]*n[w][t];return q}return function(n,p,q,r,t){for(var w=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],x=0;4>x;x++)w[x][3]=t[x];for(x=0;3>x;x++)for(t=0;3>t;t++)w[3][x]+=n[t]*w[t][x];n=r[0];x=r[1];t=r[2];r=r[3];var B=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];B[0][0]=1-2*(x*x+t*t);B[0][1]=2*(n*x-t*r);B[0][2]=2*(n*t+x*r);B[1][0]=2*(n*x+t*r);B[1][1]=1-2*(n*n+t*t);B[1][2]=2*(x*t-n*r);B[2][0]=2*(n*t-x*r);B[2][1]=2*(x*t+n*r);B[2][2]=1-2*(n*n+x*x);w=k(w,B);r=[[1,0,
0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];q[2]&&(r[2][1]=q[2],w=k(w,r));q[1]&&(r[2][1]=0,r[2][0]=q[0],w=k(w,r));q[0]&&(r[2][0]=0,r[1][0]=q[0],w=k(w,r));for(x=0;3>x;x++)for(t=0;3>t;t++)w[x][t]*=p[x];return 0==w[0][2]&&0==w[0][3]&&0==w[1][2]&&0==w[1][3]&&0==w[2][0]&&0==w[2][1]&&1==w[2][2]&&0==w[2][3]&&0==w[3][2]&&1==w[3][3]?[w[0][0],w[0][1],w[1][0],w[1][1],w[3][0],w[3][1]]:w[0].concat(w[1],w[2],w[3])}}();d.composeMatrix=f;d.quat=function(k,n,p){var q=d.dot(k,n);q=Math.max(Math.min(q,1),-1);var r=[];if(1===
q)r=k;else for(var t=Math.acos(q),w=1*Math.sin(p*t)/Math.sqrt(1-q*q),x=0;4>x;x++)r.push(k[x]*(Math.cos(p*t)-q*w)+n[x]*w);return r}})(c);(function(d,f,k){d.sequenceNumber=0;var n=function(p,q,r){(this||Jd).target=p;(this||Jd).currentTime=q;(this||Jd).timelineTime=r;(this||Jd).type="finish";(this||Jd).bubbles=!1;(this||Jd).cancelable=!1;(this||Jd).currentTarget=p;(this||Jd).defaultPrevented=!1;(this||Jd).eventPhase=Event.AT_TARGET;(this||Jd).timeStamp=Date.now()};f.Animation=function(p){(this||Jd).id=
"";p&&p._id&&((this||Jd).id=p._id);(this||Jd)._sequenceNumber=d.sequenceNumber++;(this||Jd)._currentTime=0;(this||Jd)._startTime=null;(this||Jd)._paused=!1;(this||Jd)._playbackRate=1;(this||Jd)._inTimeline=!0;(this||Jd)._finishedFlag=!0;(this||Jd).onfinish=null;(this||Jd)._finishHandlers=[];(this||Jd)._effect=p;(this||Jd)._inEffect=(this||Jd)._effect._update(0);(this||Jd)._idle=!0;(this||Jd)._currentTimePending=!1};f.Animation.prototype={_ensureAlive:function(){0>(this||Jd).playbackRate&&0===(this||
Jd).currentTime?(this||Jd)._inEffect=(this||Jd)._effect._update(-1):(this||Jd)._inEffect=(this||Jd)._effect._update((this||Jd).currentTime);(this||Jd)._inTimeline||!(this||Jd)._inEffect&&(this||Jd)._finishedFlag||((this||Jd)._inTimeline=!0,f.timeline._animations.push(this||Jd))},_tickCurrentTime:function(p,q){p!=(this||Jd)._currentTime&&((this||Jd)._currentTime=p,(this||Jd)._isFinished&&!q&&((this||Jd)._currentTime=0<(this||Jd)._playbackRate?(this||Jd)._totalDuration:0),this._ensureAlive())},get currentTime(){return(this||
Jd)._idle||(this||Jd)._currentTimePending?null:(this||Jd)._currentTime},set currentTime(p){p=+p;isNaN(p)||(f.restart(),(this||Jd)._paused||null==(this||Jd)._startTime||((this||Jd)._startTime=(this||Jd)._timeline.currentTime-p/(this||Jd)._playbackRate),(this||Jd)._currentTimePending=!1,(this||Jd)._currentTime!=p&&((this||Jd)._idle&&((this||Jd)._idle=!1,(this||Jd)._paused=!0),this._tickCurrentTime(p,!0),f.applyDirtiedAnimation(this||Jd)))},get startTime(){return(this||Jd)._startTime},set startTime(p){p=
+p;isNaN(p)||(this||Jd)._paused||(this||Jd)._idle||((this||Jd)._startTime=p,this._tickCurrentTime(((this||Jd)._timeline.currentTime-(this||Jd)._startTime)*(this||Jd).playbackRate),f.applyDirtiedAnimation(this||Jd))},get playbackRate(){return(this||Jd)._playbackRate},set playbackRate(p){if(p!=(this||Jd)._playbackRate){var q=(this||Jd).currentTime;(this||Jd)._playbackRate=p;(this||Jd)._startTime=null;"paused"!=(this||Jd).playState&&"idle"!=(this||Jd).playState&&((this||Jd)._finishedFlag=!1,(this||Jd)._idle=
!1,this._ensureAlive(),f.applyDirtiedAnimation(this||Jd));null!=q&&((this||Jd).currentTime=q)}},get _isFinished(){return!(this||Jd)._idle&&(0<(this||Jd)._playbackRate&&(this||Jd)._currentTime>=(this||Jd)._totalDuration||0>(this||Jd)._playbackRate&&0>=(this||Jd)._currentTime)},get _totalDuration(){return(this||Jd)._effect._totalDuration},get playState(){return(this||Jd)._idle?"idle":null==(this||Jd)._startTime&&!(this||Jd)._paused&&0!=(this||Jd).playbackRate||(this||Jd)._currentTimePending?"pending":
(this||Jd)._paused?"paused":(this||Jd)._isFinished?"finished":"running"},_rewind:function(){if(0<=(this||Jd)._playbackRate)(this||Jd)._currentTime=0;else{if(!((this||Jd)._totalDuration<1/0))throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");(this||Jd)._currentTime=(this||Jd)._totalDuration}},play:function(){(this||Jd)._paused=!1;((this||Jd)._isFinished||(this||Jd)._idle)&&(this._rewind(),(this||Jd)._startTime=null);(this||Jd)._finishedFlag=
!1;(this||Jd)._idle=!1;this._ensureAlive();f.applyDirtiedAnimation(this||Jd)},pause:function(){(this||Jd)._isFinished||(this||Jd)._paused||(this||Jd)._idle?(this||Jd)._idle&&(this._rewind(),(this||Jd)._idle=!1):(this||Jd)._currentTimePending=!0;(this||Jd)._startTime=null;(this||Jd)._paused=!0},finish:function(){(this||Jd)._idle||((this||Jd).currentTime=0<(this||Jd)._playbackRate?(this||Jd)._totalDuration:0,(this||Jd)._startTime=(this||Jd)._totalDuration-(this||Jd).currentTime,(this||Jd)._currentTimePending=
!1,f.applyDirtiedAnimation(this||Jd))},cancel:function(){(this||Jd)._inEffect&&((this||Jd)._inEffect=!1,(this||Jd)._idle=!0,(this||Jd)._paused=!1,(this||Jd)._finishedFlag=!0,(this||Jd)._currentTime=0,(this||Jd)._startTime=null,(this||Jd)._effect._update(null),f.applyDirtiedAnimation(this||Jd))},reverse:function(){(this||Jd).playbackRate*=-1;this.play()},addEventListener:function(p,q){"function"==typeof q&&"finish"==p&&(this||Jd)._finishHandlers.push(q)},removeEventListener:function(p,q){"finish"==
p&&(p=(this||Jd)._finishHandlers.indexOf(q),0<=p&&(this||Jd)._finishHandlers.splice(p,1))},_fireEvents:function(p){if((this||Jd)._isFinished){if(!(this||Jd)._finishedFlag){var q=new n(this||Jd,(this||Jd)._currentTime,p),r=(this||Jd)._finishHandlers.concat((this||Jd).onfinish?[(this||Jd).onfinish]:[]);setTimeout(function(){r.forEach(function(t){t.call(q.target,q)})},0);(this||Jd)._finishedFlag=!0}}else(this||Jd)._finishedFlag=!1},_tick:function(p,q){(this||Jd)._idle||(this||Jd)._paused||(null==(this||
Jd)._startTime?q&&((this||Jd).startTime=p-(this||Jd)._currentTime/(this||Jd).playbackRate):(this||Jd)._isFinished||this._tickCurrentTime((p-(this||Jd)._startTime)*(this||Jd).playbackRate));q&&((this||Jd)._currentTimePending=!1,this._fireEvents(p))},get _needsTick(){return(this||Jd).playState in{pending:1,running:1}||!(this||Jd)._finishedFlag},_targetAnimations:function(){var p=(this||Jd)._effect._target;return p._activeAnimations||(p._activeAnimations=[]),p._activeAnimations},_markTarget:function(){var p=
this._targetAnimations();-1===p.indexOf(this||Jd)&&p.push(this||Jd)},_unmarkTarget:function(){var p=this._targetAnimations(),q=p.indexOf(this||Jd);-1!==q&&p.splice(q,1)}}})(b,c);(function(d,f,k){function n(ha){var Ha=x;x=[];ha<oa.currentTime&&(ha=oa.currentTime);oa._animations.sort(p);oa._animations=t(ha,!0,oa._animations)[0];Ha.forEach(function(Va){Va[1](ha)});r()}function p(ha,Ha){return ha._sequenceNumber-Ha._sequenceNumber}function q(){(this||Jd)._animations=[];(this||Jd).currentTime=window.performance&&
performance.now?performance.now():0}function r(){L.forEach(function(ha){ha()});L.length=0}function t(ha,Ha,Va){G=!0;F=!1;f.timeline.currentTime=ha;D=!1;var hc=[],qc=[],jc=[],Ya=[];return Va.forEach(function(xa){xa._tick(ha,Ha);xa._inEffect?(qc.push(xa._effect),xa._markTarget()):(hc.push(xa._effect),xa._unmarkTarget());xa._needsTick&&(D=!0);var tc=xa._inEffect||xa._needsTick;(xa._inTimeline=tc)?jc.push(xa):Ya.push(xa)}),L.push.apply(L,hc),L.push.apply(L,qc),D&&requestAnimationFrame(function(){}),G=
!1,[jc,Ya]}var w=window.requestAnimationFrame,x=[],B=0;window.requestAnimationFrame=function(ha){var Ha=B++;return 0==x.length&&w(n),x.push([Ha,ha]),Ha};window.cancelAnimationFrame=function(ha){x.forEach(function(Ha){Ha[0]==ha&&(Ha[1]=function(){})})};q.prototype={_play:function(ha){ha._timing=d.normalizeTimingInput(ha.timing);ha=new f.Animation(ha);return ha._idle=!1,ha._timeline=this||Jd,(this||Jd)._animations.push(ha),f.restart(),f.applyDirtiedAnimation(ha),ha}};var D=!1,F=!1;f.restart=function(){return D||
(D=!0,requestAnimationFrame(function(){}),F=!0),F};f.applyDirtiedAnimation=function(ha){G||(ha._markTarget(),ha=ha._targetAnimations(),ha.sort(p),t(f.timeline.currentTime,!1,ha.slice())[1].forEach(function(Ha){Ha=oa._animations.indexOf(Ha);-1!==Ha&&oa._animations.splice(Ha,1)}),r())};var L=[],G=!1,oa=new q;f.timeline=oa})(b,c);(function(d,f){function k(w,x){for(var B=0,D=0;D<w.length;D++)B+=w[D]*x[D];return B}function n(w,x){return[w[0]*x[0]+w[4]*x[1]+w[8]*x[2]+w[12]*x[3],w[1]*x[0]+w[5]*x[1]+w[9]*
x[2]+w[13]*x[3],w[2]*x[0]+w[6]*x[1]+w[10]*x[2]+w[14]*x[3],w[3]*x[0]+w[7]*x[1]+w[11]*x[2]+w[15]*x[3],w[0]*x[4]+w[4]*x[5]+w[8]*x[6]+w[12]*x[7],w[1]*x[4]+w[5]*x[5]+w[9]*x[6]+w[13]*x[7],w[2]*x[4]+w[6]*x[5]+w[10]*x[6]+w[14]*x[7],w[3]*x[4]+w[7]*x[5]+w[11]*x[6]+w[15]*x[7],w[0]*x[8]+w[4]*x[9]+w[8]*x[10]+w[12]*x[11],w[1]*x[8]+w[5]*x[9]+w[9]*x[10]+w[13]*x[11],w[2]*x[8]+w[6]*x[9]+w[10]*x[10]+w[14]*x[11],w[3]*x[8]+w[7]*x[9]+w[11]*x[10]+w[15]*x[11],w[0]*x[12]+w[4]*x[13]+w[8]*x[14]+w[12]*x[15],w[1]*x[12]+w[5]*
x[13]+w[9]*x[14]+w[13]*x[15],w[2]*x[12]+w[6]*x[13]+w[10]*x[14]+w[14]*x[15],w[3]*x[12]+w[7]*x[13]+w[11]*x[14]+w[15]*x[15]]}function p(w){return 2*((w.deg||0)/360+(w.grad||0)/400+(w.turn||0))*Math.PI+(w.rad||0)}function q(w){switch(w.t){case "rotatex":return w=p(w.d[0]),[1,0,0,0,0,Math.cos(w),Math.sin(w),0,0,-Math.sin(w),Math.cos(w),0,0,0,0,1];case "rotatey":return w=p(w.d[0]),[Math.cos(w),0,-Math.sin(w),0,0,1,0,0,Math.sin(w),0,Math.cos(w),0,0,0,0,1];case "rotate":case "rotatez":return w=p(w.d[0]),
[Math.cos(w),Math.sin(w),0,0,-Math.sin(w),Math.cos(w),0,0,0,0,1,0,0,0,0,1];case "rotate3d":var x=w.d[0],B=w.d[1],D=w.d[2];w=p(w.d[3]);var F=x*x+B*B+D*D;0===F?(x=1,D=B=0):1!==F&&(F=Math.sqrt(F),x/=F,B/=F,D/=F);F=Math.sin(w/2);w=F*Math.cos(w/2);F*=F;return[1-2*(B*B+D*D)*F,2*(x*B*F+D*w),2*(x*D*F-B*w),0,2*(x*B*F-D*w),1-2*(x*x+D*D)*F,2*(B*D*F+x*w),0,2*(x*D*F+B*w),2*(B*D*F-x*w),1-2*(x*x+B*B)*F,0,0,0,0,1];case "scale":return[w.d[0],0,0,0,0,w.d[1],0,0,0,0,1,0,0,0,0,1];case "scalex":return[w.d[0],0,0,0,0,
1,0,0,0,0,1,0,0,0,0,1];case "scaley":return[1,0,0,0,0,w.d[0],0,0,0,0,1,0,0,0,0,1];case "scalez":return[1,0,0,0,0,1,0,0,0,0,w.d[0],0,0,0,0,1];case "scale3d":return[w.d[0],0,0,0,0,w.d[1],0,0,0,0,w.d[2],0,0,0,0,1];case "skew":return x=p(w.d[0]),B=p(w.d[1]),[1,Math.tan(B),0,0,Math.tan(x),1,0,0,0,0,1,0,0,0,0,1];case "skewx":return w=p(w.d[0]),[1,0,0,0,Math.tan(w),1,0,0,0,0,1,0,0,0,0,1];case "skewy":return w=p(w.d[0]),[1,Math.tan(w),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "translate":return x=w.d[0].px||0,B=
w.d[1].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,x,B,0,1];case "translatex":return x=w.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,x,0,0,1];case "translatey":return B=w.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,B,0,1];case "translatez":return D=w.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,D,1];case "translate3d":return x=w.d[0].px||0,B=w.d[1].px||0,D=w.d[2].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,x,B,D,1];case "perspective":return[1,0,0,0,0,1,0,0,0,0,1,w.d[0].px?-1/w.d[0].px:0,0,0,0,1];case "matrix":return[w.d[0],w.d[1],0,0,w.d[2],
w.d[3],0,0,0,0,1,0,w.d[4],w.d[5],0,1];case "matrix3d":return w.d}}function r(w){return 0===w.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:w.map(q).reduce(n)}var t=function(){function w(F){return F[0][0]*F[1][1]*F[2][2]+F[1][0]*F[2][1]*F[0][2]+F[2][0]*F[0][1]*F[1][2]-F[0][2]*F[1][1]*F[2][0]-F[1][2]*F[2][1]*F[0][0]-F[2][2]*F[0][1]*F[1][0]}function x(F){var L=B(F);return[F[0]/L,F[1]/L,F[2]/L]}function B(F){return Math.sqrt(F[0]*F[0]+F[1]*F[1]+F[2]*F[2])}function D(F,L,G,oa){return[G*F[0]+oa*L[0],G*F[1]+
oa*L[1],G*F[2]+oa*L[2]]}return function(F){F=[F.slice(0,4),F.slice(4,8),F.slice(8,12),F.slice(12,16)];if(1!==F[3][3])return null;for(var L=[],G=0;4>G;G++)L.push(F[G].slice());for(G=0;3>G;G++)L[G][3]=0;if(0===w(L))return null;var oa=[];if(F[0][3]||F[1][3]||F[2][3]){oa.push(F[0][3]);oa.push(F[1][3]);oa.push(F[2][3]);oa.push(F[3][3]);var ha=1/w(L),Ha=L[0][0],Va=L[0][1];G=L[0][2];var hc=L[1][0],qc=L[1][1],jc=L[1][2],Ya=L[2][0],xa=L[2][1],tc=L[2][2];ha=[[(qc*tc-jc*xa)*ha,(G*xa-Va*tc)*ha,(Va*jc-G*qc)*ha,
0],[(jc*Ya-hc*tc)*ha,(Ha*tc-G*Ya)*ha,(G*hc-Ha*jc)*ha,0],[(hc*xa-qc*Ya)*ha,(Ya*Va-Ha*xa)*ha,(Ha*qc-Va*hc)*ha,0]];Ha=[];for(Va=0;3>Va;Va++){for(hc=G=0;3>hc;hc++)G+=L[3][hc]*ha[hc][Va];Ha.push(G)}L=(Ha.push(1),ha.push(Ha),ha);L=[[L[0][0],L[1][0],L[2][0],L[3][0]],[L[0][1],L[1][1],L[2][1],L[3][1]],[L[0][2],L[1][2],L[2][2],L[3][2]],[L[0][3],L[1][3],L[2][3],L[3][3]]];ha=[];for(Ha=0;4>Ha;Ha++){for(G=Va=0;4>G;G++)Va+=oa[G]*L[G][Ha];ha.push(Va)}oa=ha}else oa=[0,0,0,1];L=F[3].slice(0,3);ha=[];ha.push(F[0].slice(0,
3));Ha=[];Ha.push(B(ha[0]));ha[0]=x(ha[0]);Va=[];ha.push(F[1].slice(0,3));Va.push(k(ha[0],ha[1]));ha[1]=D(ha[1],ha[0],1,-Va[0]);Ha.push(B(ha[1]));ha[1]=x(ha[1]);Va[0]/=Ha[1];ha.push(F[2].slice(0,3));Va.push(k(ha[0],ha[2]));ha[2]=D(ha[2],ha[0],1,-Va[1]);Va.push(k(ha[1],ha[2]));ha[2]=D(ha[2],ha[1],1,-Va[2]);Ha.push(B(ha[2]));ha[2]=x(ha[2]);Va[1]/=Ha[2];Va[2]/=Ha[2];F=ha[1];G=ha[2];if(0>k(ha[0],[F[1]*G[2]-F[2]*G[1],F[2]*G[0]-F[0]*G[2],F[0]*G[1]-F[1]*G[0]]))for(G=0;3>G;G++)Ha[G]*=-1,ha[G][0]*=-1,ha[G][1]*=
-1,ha[G][2]*=-1;var Qb,wc;F=ha[0][0]+ha[1][1]+ha[2][2]+1;return 1E-4<F?(Qb=.5/Math.sqrt(F),wc=[(ha[2][1]-ha[1][2])*Qb,(ha[0][2]-ha[2][0])*Qb,(ha[1][0]-ha[0][1])*Qb,.25/Qb]):ha[0][0]>ha[1][1]&&ha[0][0]>ha[2][2]?(Qb=2*Math.sqrt(1+ha[0][0]-ha[1][1]-ha[2][2]),wc=[.25*Qb,(ha[0][1]+ha[1][0])/Qb,(ha[0][2]+ha[2][0])/Qb,(ha[2][1]-ha[1][2])/Qb]):ha[1][1]>ha[2][2]?(Qb=2*Math.sqrt(1+ha[1][1]-ha[0][0]-ha[2][2]),wc=[(ha[0][1]+ha[1][0])/Qb,.25*Qb,(ha[1][2]+ha[2][1])/Qb,(ha[0][2]-ha[2][0])/Qb]):(Qb=2*Math.sqrt(1+
ha[2][2]-ha[0][0]-ha[1][1]),wc=[(ha[0][2]+ha[2][0])/Qb,(ha[1][2]+ha[2][1])/Qb,.25*Qb,(ha[1][0]-ha[0][1])/Qb]),[L,Ha,Va,wc,oa]}}();d.dot=k;d.makeMatrixDecomposition=function(w){return[t(r(w))]};d.transformListToMatrix=r})(c);(function(d){function f(q,r){var t=q.exec(r);if(t)return t=q.ignoreCase?t[0].toLowerCase():t[0],[t,r.substr(t.length)]}function k(q,r){r=r.replace(/^\s*/,"");if(q=q(r))return[q[0],q[1].replace(/^\s*/,"")]}function n(q,r){for(var t=q,w=r;t&&w;)t>w?t%=w:w%=t;return q*r/(t+w)}function p(q,
r,t,w,x){for(var B=[],D=[],F=[],L=n(w.length,x.length),G=0;G<L;G++){var oa=r(w[G%w.length],x[G%x.length]);if(!oa)return;B.push(oa[0]);D.push(oa[1]);F.push(oa[2])}return[B,D,function(ha){ha=ha.map(function(Ha,Va){return F[Va](Ha)}).join(t);return q?q(ha):ha}]}d.consumeToken=f;d.consumeTrimmed=k;d.consumeRepeated=function(q,r,t){q=k.bind(null,q);for(var w=[];;){var x=q(t);if(!x||(w.push(x[0]),t=x[1],!(x=f(r,t))||""==x[1]))return[w,t];t=x[1]}};d.consumeParenthesised=function(q,r){for(var t=0,w=0;w<r.length&&
(!/\s|,/.test(r[w])||0!=t);w++)if("("==r[w])t++;else if(")"==r[w]&&(t--,0==t&&w++,0>=t))break;q=q(r.substr(0,w));return void 0==q?void 0:[q,r.substr(w)]};d.ignore=function(q){return function(r){r=q(r);return r&&(r[0]=void 0),r}};d.optional=function(q,r){return function(t){return q(t)||[r,t]}};d.consumeList=function(q,r){for(var t=[],w=0;w<q.length;w++){r=d.consumeTrimmed(q[w],r);if(!r||""==r[0])return;void 0!==r[0]&&t.push(r[0]);r=r[1]}if(""==r)return t};d.mergeNestedRepeated=p.bind(null,null);d.mergeWrappedNestedRepeated=
p;d.mergeList=function(q,r,t){for(var w=[],x=[],B=[],D=0,F=0;F<t.length;F++)if("function"==typeof t[F]){var L=t[F](q[D],r[D++]);w.push(L[0]);x.push(L[1]);B.push(L[2])}else!function(G){w.push(!1);x.push(!1);B.push(function(){return t[G]})}(F);return[w,x,function(G){for(var oa="",ha=0;ha<G.length;ha++)oa+=B[ha](G[ha]);return oa}]}})(c);(function(d){function f(n){var p={inset:!1,lengths:[],color:null};if((n=d.consumeRepeated(function(q){var r=d.consumeToken(/^inset/i,q);return r?(p.inset=!0,r):(r=d.consumeLengthOrPercent(q))?
(p.lengths.push(r[0]),r):(r=d.consumeColor(q),r?(p.color=r[0],r):void 0)},/^/,n))&&n[0].length)return[p,n[1]]}var k=function(n,p,q,r){function t(L){return{inset:L,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var w=[],x=[],B=0;B<q.length||B<r.length;B++){var D=q[B]||t(r[B].inset),F=r[B]||t(q[B].inset);w.push(D);x.push(F)}return d.mergeNestedRepeated(n,p,w,x)}.bind(null,function(n,p){for(;n.lengths.length<Math.max(n.lengths.length,p.lengths.length);)n.lengths.push({px:0});for(;p.lengths.length<
Math.max(n.lengths.length,p.lengths.length);)p.lengths.push({px:0});if(n.inset==p.inset&&!!n.color==!!p.color){for(var q,r=[],t=[[],0],w=[[],0],x=0;x<n.lengths.length;x++){var B=d.mergeDimensions(n.lengths[x],p.lengths[x],2==x);t[0].push(B[0]);w[0].push(B[1]);r.push(B[2])}n.color&&p.color&&(p=d.mergeColors(n.color,p.color),t[1]=p[0],w[1]=p[1],q=p[2]);return[t,w,function(D){for(var F=n.inset?"inset ":" ",L=0;L<r.length;L++)F+=r[L](D[0][L])+" ";return q&&(F+=q(D[1])),F}]}},", ");d.addPropertiesHandler(function(n){if((n=
d.consumeRepeated(f,/^,/,n))&&""==n[1])return n[0]},k,["box-shadow","text-shadow"])})(c);(function(d,f){function k(t){return t.toFixed(3).replace(/0+$/,"").replace(/\.$/,"")}function n(t,w,x){return Math.min(w,Math.max(t,x))}function p(t){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(t))return Number(t)}function q(t,w){return function(x,B){return[x,B,function(D){return k(n(t,w,D))}]}}function r(t){t=t.trim().split(/\s*[\s,]\s*/);if(0!==t.length){for(var w=[],x=0;x<t.length;x++){var B=p(t[x]);if(void 0===B)return;
w.push(B)}return w}}d.clamp=n;d.addPropertiesHandler(r,function(t,w){if(t.length==w.length)return[t,w,function(x){return x.map(k).join(" ")}]},["stroke-dasharray"]);d.addPropertiesHandler(p,q(0,1/0),["border-image-width","line-height"]);d.addPropertiesHandler(p,q(0,1),["opacity","shape-image-threshold"]);d.addPropertiesHandler(p,function(t,w){if(0!=t)return q(0,1/0)(t,w)},["flex-grow","flex-shrink"]);d.addPropertiesHandler(p,function(t,w){return[t,w,function(x){return Math.round(n(1,1/0,x))}]},["orphans",
"widows"]);d.addPropertiesHandler(p,function(t,w){return[t,w,Math.round]},["z-index"]);d.parseNumber=p;d.parseNumberList=r;d.mergeNumbers=function(t,w){return[t,w,k]};d.numberToString=k})(c);(function(d,f){d.addPropertiesHandler(String,function(k,n){if("visible"==k||"visible"==n)return[0,1,function(p){return 0>=p?k:1<=p?n:"visible"}]},["visibility"])})(c);(function(d,f){function k(q){q=q.trim();p.fillStyle="#000";p.fillStyle=q;var r=p.fillStyle;if(p.fillStyle="#fff",p.fillStyle=q,r==p.fillStyle)return p.fillRect(0,
0,1,1),q=p.getImageData(0,0,1,1).data,p.clearRect(0,0,1,1),r=q[3]/255,[q[0]*r,q[1]*r,q[2]*r,r]}function n(q,r){return[q,r,function(t){if(t[3])for(var w=0;3>w;w++)t[w]=Math.round(Math.max(0,Math.min(255,t[w]/t[3])));return t[3]=d.numberToString(d.clamp(0,1,t[3])),"rgba("+t.join(",")+")"}]}f=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");f.width=f.height=1;var p=f.getContext("2d");d.addPropertiesHandler(k,n,"background-color border-bottom-color border-left-color border-right-color border-top-color color fill flood-color lighting-color outline-color stop-color stroke text-decoration-color".split(" "));
d.consumeColor=d.consumeParenthesised.bind(null,k);d.mergeColors=n})(c);(function(d,f){function k(x){function B(){var ha=oa.exec(x);G=ha?ha[0]:void 0}function D(){if("("!==G){var ha=Number(G);return B(),ha}B();ha=L();return")"!==G?NaN:(B(),ha)}function F(){for(var ha=D();"*"===G||"/"===G;){var Ha=G;B();var Va=D();"*"===Ha?ha*=Va:ha/=Va}return ha}function L(){for(var ha=F();"+"===G||"-"===G;){var Ha=G;B();var Va=F();"+"===Ha?ha+=Va:ha-=Va}return ha}var G,oa=/([\+\-\w\.]+|[\(\)\*\/])/g;return B(),L()}
function n(x,B){if("0"==(B=B.trim().toLowerCase())&&0<="px".search(x))return{px:0};if(/^[^(]*$|^calc/.test(B)){B=B.replace(/calc\(/g,"(");var D={};B=B.replace(x,function(ha){return D[ha]=null,"U"+ha});x="U("+x.source+")";for(var F=B.replace(/[-+]?(\d*\.)?\d+([Ee][-+]?\d+)?/g,"N").replace(new RegExp("N"+x,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),L=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],G=0;G<L.length;)L[G].test(F)?(F=F.replace(L[G],"$1"),G=0):G++;if("D"==F){for(var oa in D){F=
k(B.replace(new RegExp("U"+oa,"g"),"").replace(new RegExp(x,"g"),"*0"));if(!isFinite(F))return;D[oa]=F}return D}}}function p(x,B){return q(x,B,!0)}function q(x,B,D){var F,L=[];for(F in x)L.push(F);for(F in B)0>L.indexOf(F)&&L.push(F);return x=L.map(function(G){return x[G]||0}),B=L.map(function(G){return B[G]||0}),[x,B,function(G){var oa=G.map(function(ha,Ha){return 1==G.length&&D&&(ha=Math.max(ha,0)),d.numberToString(ha)+L[Ha]}).join(" + ");return 1<G.length?"calc("+oa+")":oa}]}var r=n.bind(null,
/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc/g);f=n.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|%/g);var t=n.bind(null,/deg|rad|grad|turn/g);d.parseLength=r;d.parseLengthOrPercent=f;d.consumeLengthOrPercent=d.consumeParenthesised.bind(null,f);d.parseAngle=t;d.mergeDimensions=q;r=d.consumeParenthesised.bind(null,r);r=d.consumeRepeated.bind(void 0,r,/^/);var w=d.consumeRepeated.bind(void 0,r,/^,/);d.consumeSizePairList=w;r=d.mergeNestedRepeated.bind(void 0,p," ");t=d.mergeNestedRepeated.bind(void 0,
r,",");d.mergeNonNegativeSizePair=r;d.addPropertiesHandler(function(x){if((x=w(x))&&""==x[1])return x[0]},t,["background-size"]);d.addPropertiesHandler(f,p,"border-bottom-width border-image-width border-left-width border-right-width border-top-width flex-basis font-size height line-height max-height max-width outline-width width".split(" "));d.addPropertiesHandler(f,q,"border-bottom-left-radius border-bottom-right-radius border-top-left-radius border-top-right-radius bottom left letter-spacing margin-bottom margin-left margin-right margin-top min-height min-width outline-offset padding-bottom padding-left padding-right padding-top perspective right shape-margin stroke-dashoffset text-indent top vertical-align word-spacing".split(" "))})(c);
(function(d,f){function k(p){return d.consumeLengthOrPercent(p)||d.consumeToken(/^auto/,p)}function n(p){if((p=d.consumeList([d.ignore(d.consumeToken.bind(null,/^rect/)),d.ignore(d.consumeToken.bind(null,/^\(/)),d.consumeRepeated.bind(null,k,/^,/),d.ignore(d.consumeToken.bind(null,/^\)/))],p))&&4==p[0].length)return p[0]}f=d.mergeWrappedNestedRepeated.bind(null,function(p){return"rect("+p+")"},function(p,q){return"auto"==p||"auto"==q?[!0,!1,function(r){r=r?p:q;if("auto"==r)return"auto";r=d.mergeDimensions(r,
r);return r[2](r[0])}]:d.mergeDimensions(p,q)},", ");d.parseBox=n;d.mergeBoxes=f;d.addPropertiesHandler(n,f,["clip"])})(c);(function(d,f){function k(F){return function(L){var G=0;return F.map(function(oa){return oa===w?L[G++]:oa})}}function n(F){return F}function p(F){if("none"==(F=F.toLowerCase().trim()))return[];for(var L,G=/\s*(\w+)\(([^)]*)\)/g,oa=[],ha=0;(L=G.exec(F))&&L.index==ha;){ha=L.index+L[0].length;var Ha=L[1],Va=D[Ha];if(!Va)break;L=L[2].split(",");Va=Va[0];if(Va.length<L.length)break;
for(var hc=[],qc=0;qc<Va.length;qc++){var jc=L[qc];var Ya=Va[qc];if(void 0===(jc=jc?{A:function(xa){return"0"==xa.trim()?B:d.parseAngle(xa)},N:d.parseNumber,T:d.parseLengthOrPercent,L:d.parseLength}[Ya.toUpperCase()](jc):{a:B,n:hc[0],t:x}[Ya]))return;hc.push(jc)}if(oa.push({t:Ha,d:hc}),G.lastIndex==F.length)return oa}}function q(F){return F.toFixed(6).replace(".000000","")}function r(F,L){if(F.decompositionPair!==L){F.decompositionPair=L;var G=d.makeMatrixDecomposition(F)}if(L.decompositionPair!==
F){L.decompositionPair=F;var oa=d.makeMatrixDecomposition(L)}return null==G[0]||null==oa[0]?[[!1],[!0],function(ha){return ha?L[0].d:F[0].d}]:(G[0].push(0),oa[0].push(1),[G,oa,function(ha){var Ha=d.quat(G[0][3],oa[0][3],ha[5]);return d.composeMatrix(ha[0],ha[1],ha[2],Ha,ha[4]).map(q).join(",")}])}function t(F){return F.replace(/(x|y|z|3d)?$/,"3d")}var w=null,x={px:0},B={deg:0},D={matrix:["NNNNNN",[w,w,0,0,w,w,0,0,0,0,1,0,w,w,0,1],n],matrix3d:["NNNNNNNNNNNNNNNN",n],rotate:["A"],rotatex:["A"],rotatey:["A"],
rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",k([w,w,1]),n],scalex:["N",k([w,1,1]),k([w,1])],scaley:["N",k([1,w,1]),k([1,w])],scalez:["N",k([1,1,w])],scale3d:["NNN",n],skew:["Aa",null,n],skewx:["A",null,k([w,B])],skewy:["A",null,k([B,w])],translate:["Tt",k([w,w,x]),n],translatex:["T",k([w,x,x]),k([w,x])],translatey:["T",k([x,w,x]),k([x,w])],translatez:["L",k([x,x,w])],translate3d:["TTL",n]};d.addPropertiesHandler(p,function(F,L){var G=d.makeMatrixDecomposition&&!0,oa=!1;if(!F.length||
!L.length){F.length||(oa=!0,F=L,L=[]);for(var ha=0;ha<F.length;ha++){var Ha=F[ha].t,Va=F[ha].d,hc="scale"==Ha.substr(0,5)?1:0;L.push({t:Ha,d:Va.map(function(Oa){if("number"==typeof Oa)return hc;var md={},la;for(la in Oa)md[la]=hc;return md})})}}Va=[];var qc=[],jc=[];if(F.length!=L.length){if(!G)return;var Ya=r(F,L);Va=[Ya[0]];qc=[Ya[1]];jc=[["matrix",[Ya[2]]]]}else for(ha=0;ha<F.length;ha++){Ha=F[ha].t;var xa=L[ha].t,tc=F[ha].d,Qb=L[ha].d;Ya=D[Ha];var wc=D[xa];if("perspective"==Ha&&"perspective"==
xa||!("matrix"!=Ha&&"matrix3d"!=Ha||"matrix"!=xa&&"matrix3d"!=xa)){if(!G)return;Ya=r([F[ha]],[L[ha]]);Va.push(Ya[0]);qc.push(Ya[1]);jc.push(["matrix",[Ya[2]]])}else{if(Ha!=xa)if(Ya[2]&&wc[2]&&Ha.replace(/[xy]/,"")==xa.replace(/[xy]/,""))Ha=Ha.replace(/[xy]/,""),tc=Ya[2](tc),Qb=wc[2](Qb);else{if(!Ya[1]||!wc[1]||t(Ha)!=t(xa)){if(!G)return;Ya=r(F,L);Va=[Ya[0]];qc=[Ya[1]];jc=[["matrix",[Ya[2]]]];break}Ha=t(Ha);tc=Ya[1](tc);Qb=wc[1](Qb)}wc=[];xa=[];for(var Zb=[],$c=0;$c<tc.length;$c++)Ya=("number"==typeof tc[$c]?
d.mergeNumbers:d.mergeDimensions)(tc[$c],Qb[$c]),wc[$c]=Ya[0],xa[$c]=Ya[1],Zb.push(Ya[2]);Va.push(wc);qc.push(xa);jc.push([Ha,Zb])}}oa&&(F=Va,Va=qc,qc=F);return[Va,qc,function(Oa){return Oa.map(function(md,la){md=md.map(function($a,dd){return jc[la][1][dd]($a)}).join(",");return"matrix"==jc[la][0]&&16==md.split(",").length&&(jc[la][0]="matrix3d"),jc[la][0]+"("+md+")"}).join(" ")}]},["transform"]);d.transformToSvgMatrix=function(F){F=d.transformListToMatrix(p(F));return"matrix("+q(F[0])+" "+q(F[1])+
" "+q(F[4])+" "+q(F[5])+" "+q(F[12])+" "+q(F[13])+")"}})(c);(function(d){function f(k){return k=100*Math.round(k/100),k=d.clamp(100,900,k),400===k?"normal":700===k?"bold":String(k)}d.addPropertiesHandler(function(k){k=Number(k);if(!(isNaN(k)||100>k||900<k||0!=k%100))return k},function(k,n){return[k,n,f]},["font-weight"])})(c);(function(d){function f(r){return d.consumeToken(/^(left|center|right|top|bottom)\b/i,r)||d.consumeLengthOrPercent(r)}function k(r,t){if((t=d.consumeRepeated(f,/^/,t))&&""==
t[1]&&(t=t[0],t[0]=t[0]||"center",t[1]=t[1]||"center",3==r&&(t[2]=t[2]||{px:0}),t.length==r)){if(/top|bottom/.test(t[0])||/left|right/.test(t[1]))r=t[0],t[0]=t[1],t[1]=r;if(/left|right|center|Object/.test(t[0])&&/top|bottom|center|Object/.test(t[1]))return t.map(function(w){return"object"==typeof w?w:p[w]})}}function n(r){if(r=d.consumeRepeated(f,/^/,r)){for(var t=r[0],w=[{"%":50},{"%":50}],x=0,B=!1,D=0;D<t.length;D++){var F=t[D];if("string"==typeof F)B=/bottom|right/.test(F),x={left:0,right:0,center:x,
top:1,bottom:1}[F],w[x]=p[F],"center"==F&&x++;else{if(B){B=void 0;var L={};for(B in F)L[B]=-F[B];F=L;F["%"]=(F["%"]||0)+100}w[x]=F;x++;B=!1}}return[w,r[1]]}}var p={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}},q=d.mergeNestedRepeated.bind(null,d.mergeDimensions," ");d.addPropertiesHandler(k.bind(null,3),q,["transform-origin"]);d.addPropertiesHandler(k.bind(null,2),q,["perspective-origin"]);d.consumePosition=n;d.mergeOffsetList=q;q=d.mergeNestedRepeated.bind(null,q,", ");
d.addPropertiesHandler(function(r){if((r=d.consumeRepeated(n,/^,/,r))&&""==r[1])return r[0]},q,["background-position","object-position"])})(c);(function(d){var f=d.consumeParenthesised.bind(null,d.parseLengthOrPercent),k=d.consumeRepeated.bind(void 0,f,/^/),n=d.mergeNestedRepeated.bind(void 0,d.mergeDimensions," "),p=d.mergeNestedRepeated.bind(void 0,n,",");d.addPropertiesHandler(function(q){var r=d.consumeToken(/^circle/,q);return r&&r[0]?["circle"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,
/^\(/)),f,d.ignore(d.consumeToken.bind(void 0,/^at/)),d.consumePosition,d.ignore(d.consumeToken.bind(void 0,/^\)/))],r[1])):(r=d.consumeToken(/^ellipse/,q))&&r[0]?["ellipse"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,/^\(/)),k,d.ignore(d.consumeToken.bind(void 0,/^at/)),d.consumePosition,d.ignore(d.consumeToken.bind(void 0,/^\)/))],r[1])):(q=d.consumeToken(/^polygon/,q))&&q[0]?["polygon"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,/^\(/)),d.optional(d.consumeToken.bind(void 0,
/^nonzero\s*,|^evenodd\s*,/),"nonzero,"),d.consumeSizePairList,d.ignore(d.consumeToken.bind(void 0,/^\)/))],q[1])):void 0},function(q,r){if(q[0]===r[0])return"circle"==q[0]?d.mergeList(q.slice(1),r.slice(1),["circle(",d.mergeDimensions," at ",d.mergeOffsetList,")"]):"ellipse"==q[0]?d.mergeList(q.slice(1),r.slice(1),["ellipse(",d.mergeNonNegativeSizePair," at ",d.mergeOffsetList,")"]):"polygon"==q[0]&&q[1]==r[1]?d.mergeList(q.slice(2),r.slice(2),["polygon(",q[1],p,")"]):void 0},["shape-outside"])})(c);
(function(d,f){function k(q,r){r.concat([q]).forEach(function(t){t in document.documentElement.style&&(n[q]=t);p[t]=q})}var n={},p={};k("transform",["webkitTransform","msTransform"]);k("transformOrigin",["webkitTransformOrigin"]);k("perspective",["webkitPerspective"]);k("perspectiveOrigin",["webkitPerspectiveOrigin"]);d.propertyName=function(q){return n[q]||q};d.unprefixedPropertyName=function(q){return p[q]||q}})(c)})();(function(){if(void 0===document.createElement("div").animate([]).oncancel){var g=
window.performance&&performance.now?function(){return performance.now()}:function(){return Date.now()};var a=function(f,k,n){(this||Jd).target=f;(this||Jd).currentTime=k;(this||Jd).timelineTime=n;(this||Jd).type="cancel";(this||Jd).bubbles=!1;(this||Jd).cancelable=!1;(this||Jd).currentTarget=f;(this||Jd).defaultPrevented=!1;(this||Jd).eventPhase=Event.AT_TARGET;(this||Jd).timeStamp=Date.now()},d=window.Element.prototype.animate;window.Element.prototype.animate=function(f,k){f=d.call(this||Jd,f,k);
f._cancelHandlers=[];f.oncancel=null;var n=f.cancel;f.cancel=function(){n.call(this||Jd);var r=new a(this||Jd,null,g()),t=(this||Jd)._cancelHandlers.concat((this||Jd).oncancel?[(this||Jd).oncancel]:[]);setTimeout(function(){t.forEach(function(w){w.call(r.target,r)})},0)};var p=f.addEventListener;f.addEventListener=function(r,t){"function"==typeof t&&"cancel"==r?(this||Jd)._cancelHandlers.push(t):p.call(this||Jd,r,t)};var q=f.removeEventListener;return f.removeEventListener=function(r,t){"cancel"==
r?(r=(this||Jd)._cancelHandlers.indexOf(t),0<=r&&(this||Jd)._cancelHandlers.splice(r,1)):q.call(this||Jd,r,t)},f}}})();(function(g){var a=document.documentElement,d=null,f=!1;try{var k="0"==getComputedStyle(a).getPropertyValue("opacity")?"1":"0";d=a.animate({opacity:[k,k]},{duration:1});d.currentTime=0;f=getComputedStyle(a).getPropertyValue("opacity")==k}catch(p){}finally{d&&d.cancel()}if(!f){var n=window.Element.prototype.animate;window.Element.prototype.animate=function(p,q){return window.Symbol&&
Symbol.iterator&&Array.prototype.from&&p[Symbol.iterator]&&(p=Array.from(p)),Array.isArray(p)||null===p||(p=g.convertToArrayForm(p)),n.call(this||Jd,p,q)}}})(b)}();var Cg=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js");Cg.stringToEasing=bw;Cg.obj=nh;Cg.promise=ai;Cg.fun=wn;Cg.num=Yk;Cg.properties=op;Cg.arr=mh;Cg.string=ji;Cg.Color=Nl;Cg.styleProps=$y;Cg.addPathAttributes=az;Cg.flubber=hH;Cg.Bezier=m3;Cg.ShadowObject=Aq;var wx=Lc("e",{inQuad:"cubic-bezier(0.550,  0.085, 0.680, 0.530)",
inCubic:"cubic-bezier(0.550,  0.055, 0.675, 0.190)",inQuart:"cubic-bezier(0.895,  0.030, 0.685, 0.220)",inQuint:"cubic-bezier(0.755,  0.050, 0.855, 0.060)",inSine:"cubic-bezier(0.470,  0.000, 0.745, 0.715)",inExpo:"cubic-bezier(0.950,  0.050, 0.795, 0.035)",inCirc:"cubic-bezier(0.600,  0.040, 0.980, 0.335)",inBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",outQuad:"cubic-bezier(0.250,  0.460, 0.450, 0.940)",outCubic:"cubic-bezier(0.215,  0.610, 0.355, 1.000)",outQuart:"cubic-bezier(0.165,  0.840, 0.440, 1.000)",
outQuint:"cubic-bezier(0.230,  1.000, 0.320, 1.000)",outSine:"cubic-bezier(0.390,  0.575, 0.565, 1.000)",outExpo:"cubic-bezier(0.190,  1.000, 0.220, 1.000)",outCirc:"cubic-bezier(0.075,  0.820, 0.165, 1.000)",outBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",inOutQuad:"cubic-bezier(0.455,  0.030, 0.515, 0.955)",inOutCubic:"cubic-bezier(0.645,  0.045, 0.355, 1.000)",inOutQuart:"cubic-bezier(0.770,  0.000, 0.175, 1.000)",inOutQuint:"cubic-bezier(0.860,  0.000, 0.070, 1.000)",inOutSine:"cubic-bezier(0.445,  0.050, 0.550, 0.950)",
inOutExpo:"cubic-bezier(1.000,  0.000, 0.000, 1.000)",inOutCirc:"cubic-bezier(0.785,  0.135, 0.150, 0.860)",inOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",linear:"cubic-bezier(0.5, 0.5, 0.5, 0.5)"});Cg.easings=wx;Cg.easings=wx;Cg.stringToEasing=bw;var iH=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),g=c.hasOwnProperty("AnimationQueue")&&"function"===typeof c.AnimationQueue?c.AnimationQueue:c.AnimationQueue=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){this.morph=a;this.animations=[]}},{key:"maskedProps",value:function(a){return 0<this.animations.length?Cg.obj.merge(this.animations.map(function(d){return d.getAnimationProps(a)[0]})):{}}},{key:"animationsActive",get:function(){return!0}},{key:"registerAnimation",value:function(a){var d=this,f=new Cg.PropertyAnimation(this,this.morph,a);this.morph.makeDirty();return this.morph.withMetaDo({animation:f},function(){var k=
f.affectsMorph&&d.animations.find(function(p){return p.equals(f)});if(!k){var n;if(n=d.animations.find(function(p){return p.canMerge(f)}))return n.mergeWith(f),n;if(f.affectsMorph)return f.assignProps(),d.animations.push(f),f}return k})}},{key:"startAnimationsFor",value:function(a){for(var d=0;d<this.animations.length;d++)this.animations[d].start(a)}},{key:"startSvgAnimationsFor",value:function(a,d){this.animations.forEach(function(f){return f.startSvg(a,d)})}},{key:"removeAnimation",value:function(a){Cg.arr.remove(this.animations,
a)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"AnimationQueue"}}],c,{pathInPackage:function(){return"./rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2043,end:3399})}(void 0);Cg.AnimationQueue=iH;Cg.AnimationQueue=iH;var YS=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),
g=c.hasOwnProperty("PropertyAnimation")&&"function"===typeof c.PropertyAnimation?c.PropertyAnimation:c.PropertyAnimation=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d,f){var k=this;this.queue=a;this.morph=d;if(d.isPath&&"fill"in f){var n=d.fill||Cg.Color.transparent,p=f.fill;f.customTween=Cg.fun.compose(function(B){d.fill=
n.interpolate(B,p);return B},f.customTween||function(B){});delete f.fill;d.fill=n}if("dropShadow"in f){var q=d.dropShadow||new Cg.ShadowObject({blur:0,distance:0,spread:0}),r=f.dropShadow;f.customTween=Cg.fun.compose(function(B){d.withMetaDo({metaInteraction:!0},function(){d.dropShadow=q.interpolate(B,r||new Cg.ShadowObject({blur:0,distance:0,spread:0}));1===B&&(d.dropShadow=r)});return B},f.customTween||function(B){});delete f.dropShadow;d.dropShadow=q}if("visible"in f&&f.visible!==d.visible){var t=
a.originalOpacity,w=void 0===t?d.opacity:t;a.originalOpacity=w;var x=f.visible;f.customTween=Cg.fun.compose(function(B){if(k._otherVisibleTransformationInProgress)return B;0===B&&!0===x&&(d.visible=!0);d.opacity=x?Cg.num.interpolate(B,0,w):Cg.num.interpolate(B,w,0);1===B&&(d.visible=x,d.opacity=w,delete a.originalOpacity);return B},f.customTween||function(B){});this.queue.animations.forEach(function(B){return B._otherVisibleTransformationInProgress=!0});delete f.visible}this.config=this.convertBounds(f);
this.needsAnimation={svg:d.isSvgMorph,path:d.isPath};this.capturedProperties=Cg.obj.select(this.morph,this.propsToCapture)}},{key:"propsToCapture",get:function(){return["fill","origin"]}},{key:"stillNeedsAnimations",get:function(){return Cg.obj.values(this.needsAnimation).some(Boolean)}},{key:"asPromise",value:function(){var a=this;return this._promise||(this._promise=new Promise(function(d,f){a.resolveCallback=function(){a.onFinish(a);a.subAnimations?a.subAnimations.then(d):d(a.morph)}}))}},{key:"finish",
value:function(a){var d=this;this.config.scale&&this.morph.whenRendered().then(function(){return d.morph.withAllSubmorphsDo(function(f){return f.isText&&f.invalidateTextLayout(!0,!0)})});this.needsAnimation[a]=!1;this.stillNeedsAnimations||(this.queue.removeAnimation(this),this.resolveCallback?this.resolveCallback():this.onFinish())}},{key:"convertBounds",value:function(a){var d=a.bounds,f=a.origin,k=a.rotation,n=a.scale;f=f||this.morph.origin;k=k||this.morph.rotation;n=n||this.morph.scale;return d?
Object.assign({},Cg.obj.dissoc(a,["bounds"]),{origin:f,rotation:k,scale:n,position:d.topLeft().addPt(f),extent:d.extent()}):a}},{key:"equals",value:function(a){return!this.config.customTween&&!a.config.customTweem&&Cg.obj.equals(this.animatedProps,a.animatedProps)}},{key:"canMerge",value:function(a){return this.easing===a.easing&&this.duratio===a.duration}},{key:"mergeWith",value:function(a){var d=this.config.customTween;Object.assign(this.morph,a.animatedProps);Object.assign(this.config,a.config);
this.config.customTween=function(f){d&&d(f);a.config.customTween&&a.config.customTween(f);return f};this.afterProps=this.gatherAnimationProps()}},{key:"affectsMorph",get:function(){var a=this;return!!this.config.customTween||Cg.properties.any(this.animatedProps,function(d,f){return!Cg.obj.equals(d[f],a.morph[f])})}},{key:"animatedProps",get:function(){return Cg.obj.dissoc(this.config,["customTween","easing","onFinish","duration"])}},{key:"easing",get:function(){return this.config.easing||Cg.easings.inOutQuad}},
{key:"onFinish",get:function(){return this.config.onFinish||function(){}}},{key:"setonFinish",value:function(a){this.config.onFinish=a}},{key:"duration",get:function(){return this.config.duration||1E3}},{key:"getChangedProps",value:function(a,d){var f=[],k;for(k in a)Cg.obj.equals(d[k],a[k])&&f.push(k);return[Cg.obj.dissoc(a,f),Cg.obj.dissoc(d,f)]}},{key:"getAnimationProps",value:function(a){var d=this.getChangedProps(this.beforeProps[a],this.afterProps[a]),f=Nb(d,2);d=f[0];f=f[1];var k=this.capturedProperties.fill,
n=this.config.fill;this.morph.isPolygon&&"css"===a&&(k=n=!1,delete d.background,delete f.background,delete d.backgroundImage,delete f.backgroundImage);"none"===d.filter&&f.boxShadow&&(delete d.filter,d.boxShadow="none");"none"===f.filter&&d.boxShadow&&(delete f.filter,f.boxShadow="none");k&&n&&(k.isGradient||n.isGradient)&&(this.tweenGradient=this.interpolate("gradient",k,n));a=ba(Cg.arr.union(Cg.obj.keys(d),Cg.obj.keys(f)));var p;try{for(a.s();!(p=a.n()).done;){var q=p.value;q in d||(d[q]=f[q]);
q in f||(f[q]=d[q])}}catch(r){a.e(r)}finally{a.f()}return[Cg.obj.isEmpty(d)?!1:d,Cg.obj.isEmpty(f)?!1:f]}},{key:"gatherAnimationProps",value:function(){var a=this.morph,d=a.isSvgMorph,f=a.isPath,k=a.isPolygon,n={};n.css=Cg.styleProps(this.morph);d&&(n.svg=addSvgAttributes(a,{}));f&&(n.path=Cg.addPathAttributes(a,{}));k&&(n.polygon=Cg.addPathAttributes(a,{}));return n}},{key:"assignProps",value:function(){var a=this.morph.styleClasses;this.beforeProps=this.gatherAnimationProps();Object.assign(this.morph,
this.animatedProps);this.afterProps=this.gatherAnimationProps();this.config.styleClasses&&(this.morph._animatedStyleClasses={removed:Cg.arr.withoutAll(a,this.morph.styleClasses),added:Cg.arr.withoutAll(this.morph.styleClasses,a),animation:this})}},{key:"interpolate",value:function(a,d,f){var k=this;switch(a){case "scrollTop":case "scrollLeft":return function(n){return Cg.num.interpolate(n,d,f)};case "d":return Cg.flubber.interpolate(d,f);case "stroke-width":return function(n){return Cg.num.interpolate(n,
d,f)};case "stroke":return function(n){return Cg.Color.fromString(d).interpolate(n,Cg.Color.fromString(f),k.morph.bounds())};case "gradient":return function(n){return d.interpolate(n,f,k.morph.bounds())};case "fill":return d=Cg.Color.fromString(d),f=Cg.Color.fromString(f),function(n){return d.interpolate(n,f)}}}},{key:"startSvg",value:function(a,d){var f=this;if(this.needsAnimation[d]){this.needsAnimation[d]=!1;var k=this.getAnimationProps(d),n=Nb(k,2);k=n[0];n=n[1];var p={},q=Cg.stringToEasing(this.easing),
r;for(r in k)p[r]=this.interpolate(r,k[r],n[r]);var t;requestAnimationFrame(function B(x){t||(t=x);x-=t;if(1<x/f.duration)return f.finish(d);for(var D in p)p[D]&&a.setAttribute(D,p[D](q(x/f.duration)));requestAnimationFrame(B)})}}},{key:"start",value:function(a){if(!this.active)try{this.active=!0;var d=this.getAnimationProps("css"),f=Nb(d,2),k=f[0],n=f[1];a&&this.tween(a,k,n);if(this.config.origin){var p=this.capturedProperties.origin,q=this.config.origin,r=a.childNodes[0];r&&this.tween(r,r.style.top?
{left:"".concat(p.x,"px"),top:"".concat(p.y,"px")}:{transform:"translate3d(".concat(p.x,"px, ").concat(p.y,"px, 0px)")},r.style.top?{left:"".concat(p.x,"px"),top:"".concat(p.y,"px")}:{transform:"translate3d(".concat(q.x,"px, ").concat(q.y,"px, 0px)")})}}catch(t){this.active=!1}}},{key:"tween",value:function(a,d,f){var k=this,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0,p=this.animatedProps.scroll,q=this.config.customTween,r=!1,t=function(){n&&(k.finish("css"),k.morph.makeDirty())};
if(q){var w,x=Cg.stringToEasing(this.easing);requestAnimationFrame(function tc(xa){w||(w=xa);var Qb=Math.min(1,(xa-w)/k.duration);k.morph.dontRecordChangesWhile(function(){return q(x(Qb))});if(1<=Qb)return k.finish("css");requestAnimationFrame(tc)});r=!0}if(p){var B,D=this.morph.env.eventDispatcher.eventState;r=Cg.promise.deferred();var F=r.promise,L=r.resolve,G=this.interpolate("scrollLeft",a.scrollLeft,p.x),oa=this.interpolate("scrollTop",a.scrollTop,p.y),ha=Cg.stringToEasing(this.easing);F.debounce=
function(){};requestAnimationFrame(function tc(xa){B||(B=xa);xa-=B;var Qb=Math.min(1,xa/k.duration);a.scrollTop=oa(ha(Qb));a.scrollLeft=G(ha(Qb));if(1<=xa/k.duration)return D.scroll.interactiveScrollInProgress=null,L(),k.finish("css");requestAnimationFrame(tc)});r=!0}if(this.tweenGradient&&!this.morph.isPolygon){var Ha,Va=Cg.stringToEasing(this.easing);delete d.backgroundImage;delete f.backgroundImage;delete d.background;delete f.background;requestAnimationFrame(function tc(xa){Ha||(Ha=xa);xa-=Ha;
if(1<=xa/k.duration)return k.finish("css");a.style.setProperty("background-image",k.tweenGradient(Va(xa/k.duration)));requestAnimationFrame(tc)});r=!0}else this.tweenGradient&&(r=!0);if(a&&d&&f){p={};F={};for(var hc in d)p[Cg.string.camelize(hc)]=d[hc];for(var qc in f)F[Cg.string.camelize(qc)]=f[qc];try{var jc=a.animate([p,F],{duration:this.duration,easing:this.easing,fill:"forwards",composite:"replace"});jc.onfinish=function(){t();setTimeout(function(){return jc.cancel()},200)};r=!0}catch(Ya){r=
!1}}r||t()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PropertyAnimation"}}],c,{pathInPackage:function(){return"./rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3407,end:17073})}(void 0);Cg.PropertyAnimation=YS;Cg.PropertyAnimation=YS;var Oh=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js");
Oh.cumulativeOffset=cw;Oh.createIFrame=function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"about:blank",g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new Oh.Rectangle(0,0,700,700);return new Promise(function(a,d){if(!b)throw Error("Need parent element!");var f=document.createElement("iframe");f.style.position="absolute";f.style.top=g.top()+"px";f.style.left=g.left()+"px";f.style.width=g.width+"px";f.style.height=g.height+"px";f.src=c;var k=!1;f.onload=function(n){k=
!0;f.onload=null;a(f)};Oh.promise.waitFor(1E3,function(){return!!k})["catch"](function(n){return d(Error("iframe load timeout"))});b.appendChild(f)})};Oh.requestAnimationFramePolyfill=function(b){for(var c=0,g=["ms","moz","webkit","o"],a=0;a<g.length&&!b.requestAnimationFrame;++a)b.requestAnimationFrame=b[g[a]+"RequestAnimationFrame"],b.cancelAnimationFrame=b[g[a]+"CancelAnimationFrame"]||b[g[a]+"CancelRequestAnimationFrame"];b.requestAnimationFrame||(b.requestAnimationFrame=function(d,f){var k=Date.now(),
n=Math.max(0,16-(k-c));f=b.setTimeout(function(){d(k+n)},n);c=k+n;return f});b.cancelAnimationFrame||(b.cancelAnimationFrame=function(d){clearTimeout(d)})};Oh.createDOMEnvironment_browser=function(){return BC.apply(this,arguments)};Oh.createDOMEnvironment_node=function(){System.decanonicalize("lively.morphic/").replace(/file:\/\//,"");var b=System._nodeRequire("jsdom"),c=b.createVirtualConsole().sendTo(console);return new Promise(function(g,a){b.env("<div></div>",["https://code.jquery.com/pep/0.4.1/pep.js"],
{virtualConsole:c},function(d,f){return d?a(d):g(new Oh.DomEnvironment(f,f.document,function(){return f.close()}))})})};Oh.createDOMEnvironment=ZK;Oh.defaultDOMEnv=CC;Oh.setCSSDef=function(b,c,g){Array.from(b.childNodes).forEach(function(a){return b.removeChild(a)});c=document.createTextNode(c);b.styleSheet?b.styleSheet.cssText=c.nodeValue:b.appendChild(c);return b};Oh.addCSSDef=function(b,c,g){var a=document.createElement("style");a.type="text/css";b&&a.setAttribute("id",b);Oh.setCSSDef(a,c,g);(g.head||
g).appendChild(a);return a};Oh.addOrChangeCSSDeclaration=Zo;Oh.addOrChangeLinkedCSS=Ot;Oh.promise=ai;Oh.obj=nh;Oh.arr=mh;Oh.Rectangle=vl;Oh.cumulativeOffset=cw;Oh.createDOMEnvironment=ZK;(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),g=c.hasOwnProperty("DomEnvironment")&&"function"===typeof c.DomEnvironment?c.DomEnvironment:c.DomEnvironment=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d,f){Oh.requestAnimationFramePolyfill(a);this.window=a;this.document=d;this.destroyFn=f}},{key:"destroy",value:function(){"function"===typeof this.destroyFn&&this.destroyFn()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DomEnvironment"}}],c,{pathInPackage:function(){return"./rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3057,end:3359})})(void 0);(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),g=c.hasOwnProperty("IFramedDomEnvironment")&&"function"===typeof c.IFramedDomEnvironment?c.IFramedDomEnvironment:c.IFramedDomEnvironment=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),
value:function(a){ie._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,a.contentWindow,a.contentWindow.document,function(){a.contentWindow&&a.contentWindow.close();a.parentNode&&a.parentNode.removeChild(a)});this.iframe=a}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"IFramedDomEnvironment"}}],c,{pathInPackage:function(){return"./rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3361,end:3675})})(Oh.DomEnvironment);Oh._defaultEnv=Oh._defaultEnv||void 0;Oh.defaultDOMEnv=CC;Oh.addOrChangeCSSDeclaration=Zo;Oh.addOrChangeLinkedCSS=Ot;var jH=function(){return function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window.document;return function(c,g,a){var d=g||void 0;"undefined"===typeof a&&(a=g,d=void 0);var f=c.split(".");
if(1<f.length)for(c=f.shift(),g=0;g<f.length;g++){var k=f[g],n;-1<(n=k.indexOf("#"))&&(k.slice(n+1),k.slice(0,n))}g=c.split("#");1<g.length&&(c=g[0]);c=b.createElement(c);if(d){for(var p in d)"style"!==p&&"dataset"!==p&&"attributes"!==p&&(c[p]=d[p]);if(p=d.style)for(var q in p)c.style[q]=p[q];if(q=d.dataset)if(c.dataset)for(var r in q)c.dataset[r]=q[r];else for(r in q)c.setAttribute("data-"+r,q[r]);if(d=d.attributes)for(var t in d)d[t]&&Oh.obj.isBoolean(d[t])?c.toggleAttribute(t):c.setAttribute(t,
d[t])}a||(a="");if("string"===typeof a)c.appendChild(b.createTextNode(a));else if(Array.isArray(a))for(g=0;g<a.length;g++)t=a[g],c.appendChild("string"===typeof t?b.createTextNode(t):t);else c.appendChild("string"===typeof a?b.createTextNode(a):a);return c}}}();Oh.hyperscriptFnForDocument=jH;Oh.hyperscriptFnForDocument=jH;var Ug=window.lively.FreezerRuntime.recorderFor("lively.resources/src/helpers.js");Ug.applyExclude=dw;Ug.parseQuery=Kr;Ug.stringifyQuery=cz;Ug.withRelativePartsResolved=DC;Ug._relativePathBetween_checkPathes=
function(b,c){b.startsWith("/")&&(b=b.slice(1));c.startsWith("/")&&(c=c.slice(1));b=b.split("/");c=c.split("/");for(var g=0;g<c.length&&b[g]&&b[g]==c[g];g++);return"../".repeat(Math.max(0,c.length-g-1))+b.splice(g,b.length).join("/")};Ug.relativePathBetween=EC;Ug.join=$K;Ug.parent=aL;Ug.parents=bL;Ug.resource=Sk;Ug.createFiles=$o;Ug.registerExtension=ap;Ug.unregisterExtension=Pt;Ug.applyExclude=dw;Ug.parseQuery=Kr;Ug.stringifyQuery=cz;Ug.slashEndRe=/\/+$/;Ug.slashStartRe=/^\/+/;Ug.protocolRe=/^[a-z0-9-_\.]+:/;
Ug.urlRe=/^([^:\/]+):\/\/([^\/]*)(.*)/;Ug.slashslashRe=/^\/\/[^\/]+/;Ug.pathDotRe=/\/\.\//g;Ug.pathDoubleDotRe=/\/[^\/]+\/\.\./;Ug.pathDoubleSlashRe=/(^|[^:])[\/]+/g;Ug.withRelativePartsResolved=DC;Ug.relativePathBetween=EC;Ug.join=$K;Ug.parent=aL;Ug.parents=bL;var xx=Ug.extensions||[];Ug.extensions=xx;Ug.extensions=xx;Ug.resource=Sk;Ug.createFiles=$o;Ug.registerExtension=ap;Ug.unregisterExtension=Pt;var kH=/^file:\/\/\/[a-z]:\//i;Ug.windowsURLPrefixRe=kH;Ug.windowsURLPrefixRe=kH;var lH=/^[a-z]:\//i;
Ug.windowsPathPrefixRe=lH;Ug.windowsPathPrefixRe=lH;var mH=/^[a-z]:\/$/i;Ug.windowsRootPathRe=mH;Ug.windowsRootPathRe=mH;var vi=window.lively.FreezerRuntime.recorderFor("lively.resources/src/resource.js");vi.nyi=function(b,c){throw Error("".concat(c," for ").concat(b.constructor.name," not yet implemented"));};vi.resource=Sk;vi.parseQuery=Kr;vi.withRelativePartsResolved=DC;vi.relativePathBetween=EC;vi.windowsPathPrefixRe=lH;vi.stringifyQuery=cz;vi.ensureFolder=wh;vi.slashEndRe=/\/+$/;vi.slashStartRe=
/^\/+/;vi.protocolRe=/^[a-z0-9-_\.]+:/;vi.slashslashRe=/^\/\/[^\/]+/;var Jm=Lc("aw",function(){function b(c){rd(this,b);if(!c)throw Error("Cannot create resource without url");this.url=String(c);this.binary=!1;this.linkCount=this._isLink=this._isDirectory=this.mode=this.group=this.user=this.contentType=this.type=this.size=this.etag=this.created=this.lastModified=void 0}Ac(b,null,[{key:"fromProps",value:function(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(new this(c.url)).assignProperties(c)}}]);
Ac(b,[{key:"equals",value:function(c){if(!c||this.constructor!==c.constructor)return!1;var g=this.url;c=c.url;"/"===g[g.length-1]&&(g=g.slice(0,-1));"/"===c[c.length-1]&&(c=c.slice(0,-1));return g===c}},{key:"toString",value:function(){return"".concat(this.constructor.name,'("').concat(this.url,'")')}},{key:"newResource",value:function(c){return vi.resource(c,this)}},{key:"path",value:function(){var c=this.url.replace(vi.protocolRe,"").replace(vi.slashslashRe,"");return""===c?"/":c}},{key:"pathWithoutQuery",
value:function(){return this.path().split("?")[0]}},{key:"name",value:function(){var c=this.path(),g=c.lastIndexOf("?");-1<g&&(c=c.slice(0,g));c.endsWith("/")&&(c=c.slice(0,-1));c=c.split("/");return decodeURIComponent(c[c.length-1])}},{key:"ext",value:function(){var c=this.url;if(c.endsWith("/"))return"";c=c.match(/\.([^\/\.]+$)/)||["",""];c=Nb(c,2);c[0];return c[1].toLowerCase()}},{key:"nameWithoutExt",value:function(){var c=this.name(),g=c.lastIndexOf(".");0<g&&(c=c.slice(0,g));return c}},{key:"scheme",
value:function(){return this.url.split(":")[0]}},{key:"host",value:function(){var c=this.url.indexOf("://");if(-1===c)return null;c=this.url.slice(c+3);var g=c.indexOf("/");return c.slice(0,-1<g?g:c.length)}},{key:"schemeAndHost",value:function(){return this.isRoot()?this.asFile().url:this.url.slice(0,this.url.length-this.path().length)}},{key:"parent",value:function(){return this.isRoot()?null:this.newResource(this.url.split("?")[0].replace(vi.slashEndRe,"").split("/").slice(0,-1).join("/")+"/")}},
{key:"parents",value:function(){for(var c=[],g=this.parent();g;)c.unshift(g),g=g.parent();return c}},{key:"isParentOf",value:function(c){var g=this;return c.schemeAndHost()===this.schemeAndHost()&&c.parents().some(function(a){return a.equals(g)})}},{key:"query",value:function(){return vi.parseQuery(this.url)}},{key:"withQuery",value:function(c){c=Object.assign({},this.query(),{},c);var g=this.url.split("?");g=Nb(g,1)[0];c=vi.stringifyQuery(c);return this.newResource("".concat(g,"?").concat(c))}},
{key:"commonDirectory",value:function(c){if(c.schemeAndHost()!==this.schemeAndHost())return null;if(this.isDirectory()&&this.equals(c))return this;if(this.isRoot())return this.asDirectory();if(c.isRoot())return c.asDirectory();c=c.parents();for(var g=this.parents(),a=this.root(),d=0;d<g.length;d++){var f=g[d],k=c[d];if(!k||!f.equals(k))break;a=f}return a}},{key:"withRelativePartsResolved",value:function(){var c=this.path(),g=vi.withRelativePartsResolved(c);if(g===c)return this;g.startsWith("/")&&
(g=g.slice(1));g[1]===":".startsWith("/")?g=g.slice(1):":"===g[1]&&g.match(vi.windowsPathPrefixRe)&&(g=g.slice(3));return this.newResource(this.root().url+g)}},{key:"relativePathFrom",value:function(c){return vi.relativePathBetween(c.url,this.url)}},{key:"withPath",value:function(c){return(this.isRoot()?this:this.root()).join(c)}},{key:"join",value:function(c){return this.newResource(this.url.replace(vi.slashEndRe,"")+"/"+c.replace(vi.slashStartRe,""))}},{key:"isRoot",value:function(){return"/"===
this.path()}},{key:"isFile",value:function(){return!this.isRoot()&&!this.url.match(vi.slashEndRe)}},{key:"isDirectory",value:function(){return!this.isFile()}},{key:"asDirectory",value:function(){return this.url.endsWith("/")?this:this.newResource(vi.ensureFolder(this.url))}},{key:"root",value:function(){if(this.isRoot())return this;var c=this.url.slice(0,-this.path().length);return this.newResource(c+"/")}},{key:"asFile",value:function(){return this.url.endsWith("/")?this.newResource(this.url.replace(vi.slashEndRe,
"")):this}},{key:"assignProperties",value:function(c){for(var g in c)if("url"!==g){var a=g;if("isLink"===g||"isDirectory"===g)a="_"+g;this[a]=c[g]}return this}},{key:"ensureExistance",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.exists();case 2:if(!f.sent){f.next=4;break}return f.abrupt("return",this);case 4:return f.next=6,this.parent().ensureExistance();case 6:if(!this.isFile()){f.next=
11;break}f.next=9;return this.write(a||"");case 9:f.next=13;break;case 11:return f.next=13,this.mkdir();case 13:return f.abrupt("return",this);case 14:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"copyTo",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f=this,k,n,p,q,r=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:k=1<r.length&&void 0!==r[1]?r[1]:!0;if(!this.isFile()){t.next=14;break}n=
a.isFile()?a:a.join(this.name());if(!k){t.next=6;break}t.next=6;return n.parent().ensureExistance();case 6:return t.t0=n,t.next=9,this.read();case 9:return t.t1=t.sent,t.next=12,t.t0.write.call(t.t0,t.t1);case 12:t.next=26;break;case 14:if(a.isDirectory()){t.next=16;break}throw Error("Cannot copy a directory to a file!");case 16:return t.next=18,this.dirList("infinity");case 18:return p=t.sent,q=p.map(function(w){return a.join(w.relativePathFrom(f))}),t.next=22,a.ensureExistance();case 22:return t.next=
24,p.reduceRight(function(w,x,B){return function(){return Promise.resolve(x.isDirectory()&&q[B].ensureExistance()).then(w)}},function(){return Promise.resolve()})();case 24:return t.next=26,p.reduceRight(function(w,x,B){return function(){return Promise.resolve(x.isFile()&&x.copyTo(q[B],!1)).then(w)}},function(){return Promise.resolve()})();case 26:return t.abrupt("return",this);case 27:case "end":return t.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"rename",value:function(){var c=
Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.copyTo(a);case 2:return this.remove(),f.abrupt("return",a);case 4:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"beBinary",value:function(c){return this.setBinary(!0)}},{key:"setBinary",value:function(c){this.binary=c;return this}},{key:"read",value:function(){var c=Bb(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=
d.next){case 0:vi.nyi(this,"read");case 1:case "end":return d.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"write",value:function(){var c=Bb(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:vi.nyi(this,"write");case 1:case "end":return d.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"mkdir",value:function(){var c=Bb(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=
d.next){case 0:vi.nyi(this,"mkdir");case 1:case "end":return d.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"exists",value:function(){var c=Bb(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:vi.nyi(this,"exists");case 1:case "end":return d.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"remove",value:function(){var c=Bb(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=
d.next){case 0:vi.nyi(this,"remove");case 1:case "end":return d.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"dirList",value:function(){var c=Bb(regeneratorRuntime.mark(function f(a,d){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:vi.nyi(this,"dirList");case 1:case "end":return k.stop()}},f,this)}));return function(a,d){return c.apply(this,arguments)}}()},{key:"readProperties",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=
f.next){case 0:vi.nyi(this,"readProperties");case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"writeJson",value:function(c){return this.write(1<arguments.length&&void 0!==arguments[1]&&arguments[1]?JSON.stringify(c,null,2):JSON.stringify(c))}},{key:"readJson",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.t0=JSON,f.next=3,this.read();case 3:return f.t1=
f.sent,f.abrupt("return",f.t0.parse.call(f.t0,f.t1));case 5:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"__serialize__",value:function(){return{__expr__:'var r = null; try { r = resource("'.concat(this.url,'");} catch (err) {}; r'),bindings:{"lively.resources":["resource"]}}}},{key:"isResource",get:function(){return!0}},{key:"canDealWithJSON",get:function(){return!1}}]);return b}());vi.Resource=Jm;vi["default"]=Jm;var Gh=window.lively.FreezerRuntime.recorderFor("lively.resources/src/http-resource.js");
Gh.davNs=function(b){return(b=b.match(/\/([a-z]+?):multistatus/i))?b[1]:"d"};Gh.propfindRequestPayload=function(){return'<?xml version="1.0" encoding="utf-8" ?>\n    <D:propfind xmlns:D="DAV:">\n      <D:prop>\n        <D:creationdate/>\n        <D:getcontentlength/>\n        <D:getcontenttype/>\n        <D:getetag/>\n        <D:getlastmodified/>\n        <D:resourcetype/>\n      </D:prop>\n    </D:propfind>'};Gh.readPropertyNode=function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:
{},g=b.tagName.replace(/[^:]+:/,"");g=Gh.propertyNodeMap[g];var a=b.textContent;switch(g){case "lastModified":case "created":a=new Date(a);break;case "size":a=Number(a)}c[g]=a;return c};Gh.readXMLPropfindResult=function(b){var c=(new DOMParser).parseFromString(b,"text/xml");b=Gh.davNs(b);c=(new Gh.XPathQuery("/".concat(b,":multistatus/").concat(b,":response"))).findAll(c.documentElement);var g=new Gh.XPathQuery("".concat(b,":href")),a=new Gh.XPathQuery("".concat(b,":propstat/").concat(b,":prop"));
return c.map(function(d){var f=a.findFirst(d);f=Array.from(f.childNodes).reduce(function(k,n){return Gh.readPropertyNode(n,k)},{});d=g.findFirst(d);f.url=d.textContent||d.text;return f})};Gh.defaultOrigin=function(){return System.baseURL||document.location.origin};Gh.makeRequest=function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"GET",g=2<arguments.length?arguments[2]:void 0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},d=b.url,f=b.useCors,k=b.useProxy,n=b.headers;
f="undefined"!==typeof f?f:!0;c={method:c};if("undefined"!==typeof k?k:1)Object.assign(a,{"cache-control":"no-cache","x-lively-proxy-request":d}),d=b.proxyDomain||Gh.defaultOrigin();f&&(c.mode="cors");g&&(c.body=g);c.redirect="follow";c.headers=Object.assign({},a,{},n);return fetch(d,c)};Gh.upload=cL;Gh.Resource=Jm;Gh.applyExclude=dw;Gh.promise=ai;Gh.num=Yk;var n3=function(){function b(c){rd(this,b);this.expression=c;this.contextNode=null;this.xpe=new XPathEvaluator}Ac(b,[{key:"establishContext",
value:function(c){this.nsResolver||(c=c.ownerDocument?c.ownerDocument.documentElement:c.documentElement,c!==this.contextNode&&(this.contextNode=c,this.nsResolver=this.xpe.createNSResolver(c)))}},{key:"manualNSLookup",value:function(){this.nsResolver=function(c){return Namespace[c.toUpperCase()]||null};return this}},{key:"findAll",value:function(c,g){this.establishContext(c);c=this.xpe.evaluate(this.expression,c,this.nsResolver,XPathResult.ANY_TYPE,null);for(var a=[],d;d=c.iterateNext();)a.push(d);
return 0<a.length||void 0===g?a:g}},{key:"findFirst",value:function(c){this.establishContext(c);return this.xpe.evaluate(this.expression,c,this.nsResolver,XPathResult.ANY_TYPE,null).iterateNext()}}]);return b}();Gh.XPathQuery=n3;Gh.propertyNodeMap={getlastmodified:"lastModified",creationDate:"created",getetag:"etag",getcontentlength:"size",resourcetype:"type",getcontenttype:"contentType"};Gh.binaryExtensions="3ds 3g2 3gp 7z a aac adp ai aif aiff alz ape apk ar arj asf au avi bak bh bin bk bmp btif bz2 bzip2 cab caf cgm class cmx cpio cr2 csv cur dat deb dex djvu dll dmg dng doc docm docx dot dotm dra DS_Store dsk dts dtshd dvb dwg dxf ecelp4800 ecelp7470 ecelp9600 egg eol eot epub exe f4v fbs fh fla flac fli flv fpx fst fvt g3 gif graffle gz gzip h261 h263 h264 icns ico ief img ipa iso jar jpeg jpg jpgv jpm jxr key ktx lha lvp lz lzh lzma lzo m3u m4a m4v mar mdi mht mid midi mj2 mka mkv mmr mng mobi mov movie mp3 mp4 mp4a mpeg mpg mpga mxu nef npx numbers o oga ogg ogv otf pages pbm pcx pdf pea pgm pic png pnm pot potm potx ppa ppam ppm pps ppsm ppsx ppt pptm pptx psd pya pyc pyo pyv qt rar ras raw rgb rip rlc rmf rmvb rtf rz s3m s7z scpt sgi shar sil sketch slk smv so sub swf tar tbz tbz2 tga tgz thmx tif tiff tlz ttc ttf txz udf uvh uvi uvm uvp uvs uvu viv vob war wav wax wbmp wdp weba webm webp whl wim wm wma wmv wmx woff woff2 wvx xbm xif xla xlam xls xlsb xlsm xlsx xlt xltm xltx xm xmind xpi xpm xwd xz z zip zipx".split(" ");
Gh.isNode="undefined"!==typeof System?System.get("@system-env").node:"undefined"!==typeof global&&"undefined"!==typeof process;Gh.upload=cL;var ZS=function(b){function c(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};rd(this,c);var f=g.call(this,a,d);f.onLoad=d.onLoad||function(){};f.onProgress=d.onProgress||function(){};f.useProxy=d.hasOwnProperty("useProxy")?d.useProxy:!1;f.proxyDomain=d.proxyDomain||void 0;f.useCors=d.hasOwnProperty("useCors")?d.useCors:!1;f.headers=d.headers||
{};f.binary=f.isFile()?Gh.binaryExtensions.includes(f.ext()):!1;f.errorOnHTTPStatusCodes=d.hasOwnProperty("errorOnHTTPStatusCodes")?d.errorOnHTTPStatusCodes:!0;return f}gd(c,b);var g=sb(c);Ac(c,[{key:"join",value:function(a){return Object.assign(Xb(nd(c.prototype),"join",this).call(this,a),{headers:this.headers,useCors:this.useCors,useProxy:this.useProxy,proxyDomain:this.proxyDomain})}},{key:"makeProxied",value:function(a){void 0!==a&&(this.proxyDomain=a);return this.useProxy?this:new this.constructor(this.url,
{headers:this.headers,useCors:this.useCors,useProxy:!0,proxyDomain:this.proxyDomain})}},{key:"noErrorOnHTTPStatusCodes",value:function(){this.errorOnHTTPStatusCodes=!1;return this}},{key:"read",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Gh.makeRequest(this);case 2:k=n.sent;if(k.ok||!this.errorOnHTTPStatusCodes){n.next=5;break}throw Error("Cannot read ".concat(this.url,": ").concat(k.statusText,
" ").concat(k.status));case 5:if(this.binary){n.next=7;break}return n.abrupt("return",k.text());case 7:if("blob"!==this.binary){n.next=9;break}return n.abrupt("return",k.blob());case 9:if("function"!==typeof k.arrayBuffer){n.next=11;break}return n.abrupt("return",k.arrayBuffer());case 11:if("function"!==typeof k.buffer){n.next=13;break}return n.abrupt("return",k.buffer());case 13:throw Error("Don't now how to read binary resource ".concat(this,"'"));case 14:case "end":return n.stop()}},f,this)}));
return function(){return a.apply(this,arguments)}}()},{key:"write",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(this.isFile()){p.next=2;break}throw Error("Cannot write a non-file: ".concat(this.url));case 2:return p.next=4,Gh.upload(this,f);case 4:n=p.sent;if(Gh.num.between(n.status,200,300)||!this.errorOnHTTPStatusCodes){p.next=7;break}throw Error("Cannot write ".concat(this.url,": ").concat(n.statusText,
" ").concat(n.status));case 7:return p.abrupt("return",this);case 8:case "end":return p.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"mkdir",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.isFile()){n.next=2;break}throw Error("Cannot mkdir on a file: ".concat(this.url));case 2:return n.next=4,Gh.makeRequest(this,"MKCOL");case 4:k=n.sent;if(k.ok||!this.errorOnHTTPStatusCodes){n.next=
7;break}throw Error("Cannot create directory ".concat(this.url,": ").concat(k.statusText," ").concat(k.status));case 7:return n.abrupt("return",this);case 8:case "end":return n.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"exists",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!this.isRoot()){k.next=4;break}k.t0=!0;k.next=7;break;case 4:return k.next=6,Gh.makeRequest(this,
"HEAD");case 6:k.t0=!!k.sent.ok;case 7:return k.abrupt("return",k.t0);case 8:case "end":return k.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"remove",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,Gh.makeRequest(this,"DELETE");case 2:return k.abrupt("return",this);case 3:case "end":return k.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},
{key:"_propfind",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,Gh.makeRequest(this,"PROPFIND",null,{"Content-Type":"text/xml"});case 2:k=q.sent;if(k.ok||!this.errorOnHTTPStatusCodes){q.next=5;break}throw Error("Error in dirList for ".concat(this.url,": ").concat(k.statusText));case 5:return q.next=7,k.text();case 7:return n=q.sent,p=this.root(),q.abrupt("return",Gh.readXMLPropfindResult(n).map(function(r){return p.join(r.url).assignProperties(r)}));
case 10:case "end":return q.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"dirList",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,t,w=arguments;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:k=0<w.length&&void 0!==w[0]?w[0]:1;n=1<w.length&&void 0!==w[1]?w[1]:{};if("number"===typeof k||"infinity"===k){x.next=4;break}throw Error("dirList \u2013 invalid depth argument: ".concat(k));case 4:p=n.exclude;0>=k&&
(k=1);if(1!==k){x.next=15;break}x.next=9;return this._propfind();case 9:return q=x.sent,q.shift(),p&&(q=Gh.applyExclude(p,q)),x.abrupt("return",q);case 15:return x.next=17,this.dirList(1,n);case 17:return r=x.sent,t=r.filter(function(B){return B.isDirectory()}),x.abrupt("return",Promise.all(t.map(function(B){return B.dirList("number"===typeof k?k-1:k,n)})).then(function(B){return B.reduce(function(D,F){return D.concat(F)},r)}));case 20:case "end":return x.stop()}},f,this)}));return function(){return a.apply(this,
arguments)}}()},{key:"readProperties",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this._propfind();case 2:return n=p.sent[0],p.abrupt("return",this.assignProperties(n));case 4:case "end":return p.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"post",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n,p,q,r=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=
t.next){case 0:return k=0<r.length&&void 0!==r[0]?r[0]:null,"string"!==typeof k&&(k=JSON.stringify(k)),t.next=4,Gh.makeRequest(this,"POST",k,{});case 4:return n=t.sent,t.prev=5,t.next=8,n.text();case 8:p=t.sent;t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](5);case 13:if(p&&"application/json"===n.headers.get("content-type"))try{q=JSON.parse(p)}catch(w){}if(n.ok||!this.errorOnHTTPStatusCodes){t.next=18;break}throw Error("Error in POST ".concat(this.url,": ").concat(p||n.statusText));case 18:return t.abrupt("return",
q||p);case 19:case "end":return t.stop()}},f,this,[[5,11]])}));return function(){return a.apply(this,arguments)}}()},{key:"copyTo",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n,p,q=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=1<q.length&&void 0!==q[1]?q[1]:!0;if(!this.isFile()){r.next=8;break}p=f.isFile()?f:f.join(this.name());if(!Gh.isNode){r.next=8;break}if(!p.isHTTPResource){r.next=6;break}return r.abrupt("return",this._copyTo_file_nodejs_http(p,
n));case 6:if(!p.isNodeJSFileResource){r.next=8;break}return r.abrupt("return",this._copyTo_file_nodejs_fs(p,n));case 8:return r.abrupt("return",Xb(nd(c.prototype),"copyTo",this).call(this,f,n));case 9:case "end":return r.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"_copyFrom_file_nodejs_fs",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n,p,q,r,t=arguments;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:n=1<t.length&&
void 0!==t[1]?t[1]:!0;if(!n){w.next=4;break}w.next=4;return this.parent().ensureExistance();case 4:return q=f._createReadStream(),q.on("error",function(x){return p=x}),w.next=8,Gh.makeRequest(this,"PUT",q);case 8:r=w.sent;if(!p){w.next=11;break}throw p;case 11:if(r.ok||!this.errorOnHTTPStatusCodes){w.next=13;break}throw Error("copyTo: Cannot GET: ".concat(r.statusText," ").concat(r.status));case 13:return w.abrupt("return",this);case 14:case "end":return w.stop()}},k,this)}));return function(f){return a.apply(this,
arguments)}}()},{key:"_copyTo_file_nodejs_fs",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n=this,p,q,r,t=arguments;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:p=1<t.length&&void 0!==t[1]?t[1]:!0;if(!p){w.next=4;break}w.next=4;return f.parent().ensureExistance();case 4:return w.next=6,Gh.makeRequest(this,"GET");case 6:q=w.sent;if(q.ok||!this.errorOnHTTPStatusCodes){w.next=9;break}throw Error("copyTo: Cannot GET: ".concat(q.statusText," ").concat(q.status));
case 9:return w.abrupt("return",new Promise(function(x,B){return q.body.pipe(f._createWriteStream()).on("error",function(D){return r=D}).on("finish",function(){return r?B(r):x(n)})}));case 10:case "end":return w.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"_copyTo_file_nodejs_http",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n,p,q,r=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=1<r.length&&void 0!==
r[1]?r[1]:!0;if(!n){t.next=4;break}t.next=4;return f.parent().ensureExistance();case 4:return t.next=6,Gh.makeRequest(this,"GET");case 6:p=t.sent;if(p.ok||!this.errorOnHTTPStatusCodes){t.next=9;break}throw Error("copyTo: Cannot GET: ".concat(p.statusText," ").concat(p.status));case 9:return t.next=11,Gh.makeRequest(f,"PUT",p.body);case 11:q=t.sent;if(p.ok||!this.errorOnHTTPStatusCodes){t.next=14;break}throw Error("copyTo: Cannot PUT: ".concat(q.statusText," ").concat(q.status));case 14:case "end":return t.stop()}},
k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"isHTTPResource",get:function(){return!0}}]);return c}(Gh.Resource);Gh.WebDAVResource=ZS;var nH={name:"http-webdav-resource",matches:function(b){return b.startsWith("http:")||b.startsWith("https:")},resourceClass:Gh.WebDAVResource};Gh.resourceExtension=nH;Gh.resourceExtension=nH;Gh["default"]=ZS;var Rg=window.lively.FreezerRuntime.recorderFor("lively.resources/src/fs-resource.js");Rg.wrapInPromise=function(b){return function(){for(var c=
arguments.length,g=Array(c),a=0;a<c;a++)g[a]=arguments[a];return new Promise(function(d,f){return b.apply(null,g.concat(function(k,n){return k?f(k):d(n)}))})}};Rg.Resource=Jm;Rg.applyExclude=dw;Rg.windowsURLPrefixRe=kH;Rg.windowsRootPathRe=mH;Rg.createWriteStream=void 0;Rg.createReadStream=void 0;Rg.readFile=void 0;Rg.writeFile=void 0;Rg.exists=void 0;Rg.mkdir=void 0;Rg.rmdir=void 0;Rg.unlink=void 0;Rg.readdir=void 0;Rg.lstat=void 0;Rg.rename=void 0;Rg.readFileP=Rg.wrapInPromise(Rg.readFile);Rg.writeFileP=
Rg.wrapInPromise(Rg.writeFile);Rg.existsP=function(b){return new Promise(function(c,g){return Rg.exists(b,function(a){return c(!!a)})})};Rg.readdirP=Rg.wrapInPromise(Rg.readdir);Rg.mkdirP=Rg.wrapInPromise(Rg.mkdir);Rg.rmdirP=Rg.wrapInPromise(Rg.rmdir);Rg.unlinkP=Rg.wrapInPromise(Rg.unlink);Rg.lstatP=Rg.wrapInPromise(Rg.lstat);Rg.renameP=Rg.wrapInPromise(Rg.rename);var o3=function(b){function c(){rd(this,c);return g.apply(this,arguments)}gd(c,b);var g=sb(c);Ac(c,[{key:"path",value:function(){return this.url.replace("file://",
"")}},{key:"stat",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",Rg.lstatP(this.path()));case 1:case "end":return k.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"read",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return k=Rg.readFileP(this.path()),
n.abrupt("return",this.binary?k:k.then(String));case 2:case "end":return n.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"write",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.isDirectory()){n.next=2;break}throw Error("Cannot write into a directory: ".concat(this.path()));case 2:return n.next=4,Rg.writeFileP(this.path(),f);case 4:return n.abrupt("return",this);
case 5:case "end":return n.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"mkdir",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!this.isFile()){k.next=2;break}throw Error("Cannot mkdir on a file: ".concat(this.path()));case 2:return k.next=4,Rg.mkdirP(this.path());case 4:return k.abrupt("return",this);case 5:case "end":return k.stop()}},f,this)}));return function(){return a.apply(this,
arguments)}}()},{key:"exists",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",this.isRoot()?!0:Rg.existsP(this.path()));case 1:case "end":return k.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"dirList",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,t,w,x,B,D,F,L=arguments;return regeneratorRuntime.wrap(function(G){for(;;)switch(G.prev=
G.next){case 0:k=0<L.length&&void 0!==L[0]?L[0]:1;n=1<L.length&&void 0!==L[1]?L[1]:{};if("number"===typeof k||"infinity"===k){G.next=4;break}throw Error("dirList \u2013 invalid depth argument: ".concat(k));case 4:p=n.exclude;0>=k&&(k=1);if(1!==k){G.next=36;break}q=[];G.t0=ba;G.next=11;return Rg.readdirP(this.path());case 11:G.t1=G.sent,r=(0,G.t0)(G.t1),G.prev=13,r.s();case 15:if((t=r.n()).done){G.next=26;break}w=t.value;x=this.join(w);G.next=20;return x.stat();case 20:B=G.sent,x=B.isDirectory()?x.asDirectory():
x,x._assignPropsFromStat(B),q.push(x);case 24:G.next=15;break;case 26:G.next=31;break;case 28:G.prev=28,G.t2=G["catch"](13),r.e(G.t2);case 31:return G.prev=31,r.f(),G.finish(31);case 34:return p&&(q=Rg.applyExclude(p,q)),G.abrupt("return",q);case 36:return G.next=38,this.dirList(1,n);case 38:return D=G.sent,F=D.filter(function(oa){return oa.isDirectory()}),G.abrupt("return",Promise.all(F.map(function(oa){return oa.dirList("number"===typeof k?k-1:k,n)})).then(function(oa){return oa.reduce(function(ha,
Ha){return ha.concat(Ha)},D)}));case 41:case "end":return G.stop()}},f,this,[[13,28,31,34]])}));return function(){return a.apply(this,arguments)}}()},{key:"isEmptyDirectory",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,this.dirList();case 2:return k.t0=k.sent.length,k.abrupt("return",0===k.t0);case 4:case "end":return k.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},
{key:"rename",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n,p,q,r,t,w,x,B,D,F,L;return regeneratorRuntime.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(f instanceof this.constructor){G.next=2;break}return G.abrupt("return",Xb(nd(c.prototype),"rename",this).call(this,f));case 2:if(!this.isFile()){G.next=7;break}f=f.asFile();Rg.renameP(this.path(),f.path());G.next=36;break;case 7:return f=f.asDirectory(),G.next=10,f.ensureExistance();case 10:return n=[],p=[],G.t0=ba,
G.next=15,this.dirList("infinity");case 15:G.t1=G.sent;q=(0,G.t0)(G.t1);try{for(q.s();!(r=q.n()).done;)t=r.value,t.isDirectory()?p.push(t):n.push(t)}catch(oa){q.e(oa)}finally{q.f()}w=0;x=p;case 19:if(!(w<x.length)){G.next=26;break}B=x[w];G.next=23;return f.join(B.relativePathFrom(this)).ensureExistance();case 23:w++;G.next=19;break;case 26:D=0,F=n;case 27:if(!(D<F.length)){G.next=34;break}L=F[D];G.next=31;return L.rename(f.join(L.relativePathFrom(this)));case 31:D++;G.next=27;break;case 34:return G.next=
36,this.remove();case 36:return G.abrupt("return",f);case 37:case "end":return G.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"remove",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,this.exists();case 2:if(q.sent){q.next=5;break}q.next=33;break;case 5:if(!this.isDirectory()){q.next=31;break}q.t0=ba;q.next=9;return this.dirList();case 9:q.t1=q.sent,
k=(0,q.t0)(q.t1),q.prev=11,k.s();case 13:if((n=k.n()).done){q.next=19;break}p=n.value;q.next=17;return p.remove();case 17:q.next=13;break;case 19:q.next=24;break;case 21:q.prev=21,q.t2=q["catch"](11),k.e(q.t2);case 24:return q.prev=24,k.f(),q.finish(24);case 27:return q.next=29,Rg.rmdirP(this.path());case 29:q.next=33;break;case 31:return q.next=33,Rg.unlinkP(this.path());case 33:return q.abrupt("return",this);case 34:case "end":return q.stop()}},f,this,[[11,21,24,27]])}));return function(){return a.apply(this,
arguments)}}()},{key:"readProperties",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.t0=this,k.next=3,this.stat();case 3:return k.t1=k.sent,k.abrupt("return",k.t0._assignPropsFromStat.call(k.t0,k.t1));case 5:case "end":return k.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"makeProxied",value:function(){return this}},{key:"copyTo",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n,
p,q=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=1<q.length&&void 0!==q[1]?q[1]:!0;if(!this.isFile()){r.next=5;break}p=f.isFile()?f:f.join(this.name());if(!p.isHTTPResource){r.next=5;break}return r.abrupt("return",p._copyFrom_file_nodejs_fs(this,n=!0));case 5:return r.abrupt("return",Xb(nd(c.prototype),"copyTo",this).call(this,f,n));case 6:case "end":return r.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"_assignPropsFromStat",
value:function(a){return this.assignProperties({lastModified:a.mtime,created:a.ctime,size:a.size,type:a.isDirectory()?"directory":"file",isLink:a.isSymbolicLink()})}},{key:"_createWriteStream",value:function(){return Rg.createWriteStream(this.path())}},{key:"_createReadStream",value:function(){return Rg.createReadStream(this.path())}},{key:"isNodeJSFileResource",get:function(){return!0}}]);return c}(Rg.Resource);Rg.NodeJSFileResource=o3;var p3=function(b){function c(a,d){rd(this,c);"file:///"!==a.slice(0,
8)&&"file://"===a.slice(0,7)&&(a="file:///"+a.slice(7));a.includes("\\")&&(a=a.replace(/\\/g,"/"));return g.call(this,a,d)}gd(c,b);var g=sb(c);Ac(c,[{key:"path",value:function(){return this.url.replace("file:///","")}},{key:"isRoot",value:function(){return!!this.path().match(Rg.windowsRootPathRe)}},{key:"root",value:function(){if(this.isRoot())return this;console.log(this.url);var a=this.url.match(Rg.windowsURLPrefixRe);if(a)return this.newResource(a[0]);throw Error("Could not determine root path of windows file resource for url "+
this.url);}}]);return c}(Rg.NodeJSFileResource);Rg.NodeJSWindowsFileResource=p3;var oH={name:"nodejs-file-resource",matches:function(b){return b.startsWith("file:")},resourceClass:"undefined"!==typeof process&&"win32"===process.platform?Rg.NodeJSWindowsFileResource:Rg.NodeJSFileResource};Rg.resourceExtension=oH;Rg.resourceExtension=oH;var Kj=window.lively.FreezerRuntime.recorderFor("lively.resources/src/local-resource.js");Kj.applyExclude=function(b,c){return c?"string"===typeof c?!b.url.includes(c):
"function"===typeof c?!c(b):c instanceof RegExp?!c.test(b.url):!0:!0};Kj.Resource=Jm;Kj.createFiles=$o;Kj.debug=!1;Kj.slashRe=/\//g;var q3=function(){function b(c){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};rd(this,b);if(!c||"string"!==typeof c)throw Error("LocalResourceInMemoryBackend needs name!");this.name=c;this._filespec=g}Ac(b,null,[{key:"removeHost",value:function(c){delete this.hosts[c]}},{key:"ensure",value:function(c){var g=this,a=this.named((1<arguments.length&&void 0!==
arguments[1]?arguments[1]:{}).host);return Promise.resolve().then(function(){return c?Kj.createFiles("local://".concat(a.name),c):null}).then(function(){return g})}},{key:"named",value:function(c){c||(c="default");return this.hosts[c]||(this.hosts[c]=new this(c))}},{key:"hosts",get:function(){return this._hosts||(this._hosts={})}}]);Ac(b,[{key:"get",value:function(c){return this._filespec[c]}},{key:"set",value:function(c,g){this._filespec[c]=g}},{key:"write",value:function(c,g){var a=this._filespec[c];
a||(a=this._filespec[c]={created:new Date});a.content=g;a.isDirectory=!1;a.lastModified=new Date}},{key:"read",value:function(c){return(c=this._filespec[c])&&c.content?c.content:""}},{key:"mkdir",value:function(c){var g=this._filespec[c];g&&g.isDirectory||(g||(g=this._filespec[c]={created:new Date}),g.content&&delete g.content,g.isDirectory=!0,g.lastModified=new Date)}},{key:"partialFilespec",value:function(){for(var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"/",g=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:Infinity,a={},d=this.filespec,f=Object.keys(d),k=0;k<f.length;k++){var n=f[k];if(n.startsWith(c)&&c!==n){var p=n.slice(c.length);(p.includes("/")?p.match(Kj.slashRe).length+1:1)>g||(a[n]=d[n])}}return a}},{key:"filespec",get:function(){return this._filespec},set:function(c){this._filespec=c}}]);return b}();Kj.LocalResourceInMemoryBackend=q3;var $S=function(b){function c(){rd(this,c);return g.apply(this,arguments)}gd(c,b);var g=sb(c);Ac(c,[{key:"read",value:function(){return Promise.resolve(this.localBackend.read(this.path()))}},
{key:"write",value:function(a){Kj.debug&&console.log("[".concat(this,"] write"));if(this.isDirectory())throw Error("Cannot write into a directory! (".concat(this.url,")"));var d=this.localBackend.get(this.path());if(d&&d.isDirectory)throw Error("".concat(this.url," already exists and is a directory (cannot write into it!)"));this.localBackend.write(this.path(),a);return Promise.resolve(this)}},{key:"mkdir",value:function(){Kj.debug&&console.log("[".concat(this,"] mkdir"));if(!this.isDirectory())throw Error("Cannot mkdir a file! (".concat(this.url,
")"));var a=this.localBackend.get(this.path());if(a&&a.isDirectory)return Promise.resolve(this);if(a&&!a.isDirectory)throw Error("".concat(this.url," already exists and is a file (cannot mkdir it!)"));this.localBackend.mkdir(this.path());return Promise.resolve(this)}},{key:"exists",value:function(){Kj.debug&&console.log("[".concat(this,"] exists"));return Promise.resolve(this.isRoot()||this.path()in this.localBackend.filespec)}},{key:"remove",value:function(){var a=this;Kj.debug&&console.log("[".concat(this,
"] remove"));var d=this.path();Object.keys(this.localBackend.filespec).forEach(function(f){return f.startsWith(d)&&delete a.localBackend.filespec[f]});return Promise.resolve(this)}},{key:"readProperties",value:function(){Kj.debug&&console.log("[".concat(this,"] readProperties"));throw Error("not yet implemented");}},{key:"dirList",value:function(){var a=this,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Kj.debug&&console.log("[".concat(this,
"] dirList"));if(!this.isDirectory())return this.asDirectory().dirList(d,f);f=f.exclude;var k=this.path(),n=[],p=Object.keys(this.localBackend.filespec);"infinity"===d&&(d=Infinity);for(var q=0;q<p.length;q++){var r=p[q];if(r.startsWith(k)&&k!==r){var t=r.slice(k.length);(t.includes("/")?t.match(Kj.slashRe).length+1:1)>d&&"continue"===function(){var w=a.join(t.split("/").slice(0,d).join("/")+"/");n.some(function(x){return x.equals(w)})||n.push(w);return"continue"}()||(r=this.join(t),f&&!Kj.applyExclude(r,
f)||n.push(r))}}return Promise.resolve(n)}},{key:"localBackend",get:function(){return Kj.LocalResourceInMemoryBackend.named(this.host())}}]);return c}(Kj.Resource);Kj.LocalResource=$S;var pH={name:"local-resource",matches:function(b){return b.startsWith("local:")},resourceClass:Kj.LocalResource};Kj.resourceExtension=pH;Kj.resourceExtension=pH;Kj["default"]=$S;var Ck=window.lively.FreezerRuntime.recorderFor("lively.resources/src/esm-resource.js");Ck.Resource=Jm;Ck.resource=Sk;Ck.string=ji;Ck.requestMap=
{};var r3=function(b){function c(){rd(this,c);return g.apply(this,arguments)}gd(c,b);var g=sb(c);Ac(c,[{key:"read",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,t,w,x;return regeneratorRuntime.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:n="https://jspm.dev/";p=this.url.replace("esm://cache/","");q=p.split("/").filter(Boolean);if(1===q.length||!q[q.length-1].endsWith("js")&&!q[q.length-1].endsWith("!cjs"))1===q.length&&(q[0]=q[0].replace("!cjs","")),q.push("index.js");
B.next=6;return this.findOrCreatePathStructure(q);case 6:r=B.sent;t=Nb(r,2);w=t[0];if(x=t[1]){B.next=16;break}B.next=13;return w.read();case 13:k=B.sent;B.next=20;break;case 16:return B.next=18,Ck.resource(n+p).read();case 18:k=B.sent,w.write(k);case 20:return B.abrupt("return",k);case 21:case "end":return B.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"findOrCreatePathStructure",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n,p,q,r,t,w,x,B,
D,F,L;return regeneratorRuntime.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:p=n=Ck.string.joinPath(System.baseURL,"/esm_cache/");f[f.length-1].endsWith("js")||f[f.length-1].endsWith("!cjs")||(f[f.length-1]+="/");r=f.join("/");t=Ck.requestMap[n+r];if(!t){G.next=8;break}G.next=8;return t;case 8:return w=Ck.resource(n+r),G.next=11,w.exists();case 11:x=G.sent;if(!x){G.next=14;break}return G.abrupt("return",[w,!1]);case 14:B=ba(f),G.prev=15,B.s();case 17:if((D=B.n()).done){G.next=46;break}F=D.value;
F!==f[f.length-1]&&(F+="/");if(q=Ck.requestMap[p+F]){G.next=40;break}q=Ck.resource(p).join(F);if(!F.endsWith("/")){G.next=38;break}G.next=26;return q.exists();case 26:L=G.sent;if(!Ck.requestMap[p+F]&&!L){G.next=34;break}G.next=30;return Ck.requestMap[p+F];case 30:return p=q.url,G.abrupt("continue",44);case 34:return Ck.requestMap[p+F]=q.mkdir(),G.next=37,Ck.requestMap[p+F];case 37:q=G.sent;case 38:G.next=43;break;case 40:return G.next=42,q;case 42:q=G.sent;case 43:p=q.url;case 44:G.next=17;break;
case 46:G.next=51;break;case 48:G.prev=48,G.t0=G["catch"](15),B.e(G.t0);case 51:return G.prev=51,B.f(),G.finish(51);case 54:return G.abrupt("return",[q,!0]);case 55:case "end":return G.stop()}},k,null,[[15,48,51,54]])}));return function(f){return a.apply(this,arguments)}}()},{key:"write",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:console.error("Not supported by resource type.");case 1:case "end":return n.stop()}},
k)}));return function(f){return a.apply(this,arguments)}}()},{key:"mkdir",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:console.error("Not supported by resource type.");case 1:case "end":return k.stop()}},f)}));return function(){return a.apply(this,arguments)}}()},{key:"exists",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=
k.next){case 0:case "end":return k.stop()}},f)}));return function(){return a.apply(this,arguments)}}()},{key:"remove",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:console.error("Not supported by resource type.");case 1:case "end":return k.stop()}},f)}));return function(){return a.apply(this,arguments)}}()},{key:"isESMResource",get:function(){return!0}}]);return c}(Ck.Resource);Ck.ESMREesource=r3;var qH=
{name:"ecma-script-module-resource",matches:function(b){return b.startsWith("esm://")},resourceClass:Ck.ESMREesource};Ck.resourceExtension=qH;Ck.resourceExtension=qH;var ei=window.lively.FreezerRuntime.recorderFor("lively.resources/index.js");ei.createFileSpec=GC;ei.importModuleViaNative=dz;ei.loadViaScript=ez;ei.ensureFetch=JC;ei["default"]=Jm;ei.Resource=Jm;ei.unregisterExtension=Pt;ei.registerExtension=ap;ei.parseQuery=Kr;ei.extensions=xx;ei.createFiles=$o;ei.resource=Sk;ei.httpResourceExtension=
nH;ei.fileResourceExtension=oH;ei.localResourceExtension=pH;ei.esmResourceExtension=qH;ei.newUUID=yg;ei.waitFor=Go;ei.registerExtension(ei.localResourceExtension);ei.registerExtension(ei.httpResourceExtension);ei.registerExtension(ei.fileResourceExtension);ei.registerExtension(ei.esmResourceExtension);ei.createFileSpec=GC;ei.importModuleViaNative=dz;ei.loadViaScript=ez;ei.ensureFetch=JC;ei.registerExtension=ap;ei.unregisterExtension=Pt;ei.parseQuery=Kr;ei.extensions=xx;ei.createFiles=$o;ei.resource=
Sk;var s3=Object.freeze({__proto__:null,Resource:Jm,createFileSpec:GC,importModuleViaNative:dz,loadViaScript:ez,ensureFetch:JC,registerExtension:ap,unregisterExtension:Pt,parseQuery:Kr,extensions:xx,createFiles:$o,resource:Sk});Lc("cc",s3);var Dg=window.lively.FreezerRuntime.recorderFor("lively.morphic/helpers.js");Dg.getClassForName=LC;Dg.sanitizeFont=Qt;Dg.pathForBrowserHistory=ew;Dg.addClassMappings=fz;Dg.clearStylePropertiesForClassesIn=MC;Dg.getPropSettings=function(b){b=!b||Dg.obj.isString(b)?
Dg.getClassForName(b||"default"):b;var c=b[Symbol["for"]("lively-module-meta")],g=c["package"];c=c.pathInPackage;return{props:b[Symbol["for"]("lively.classes-properties-and-settings")].properties,moduleId:Dg.string.joinPath(g.name,c)}};Dg.getStylePropertiesFor=NC;Dg.getDefaultValueFor=OC;Dg.morph=il;Dg.newMorphId=gz;Dg.lazyInspect=function(b){return PC.apply(this,arguments)};Dg.locateClass=Er;Dg.string=ji;Dg.obj=nh;Dg.parseQuery=Kr;Dg.stringifyQuery=cz;Dg.touchInput=Dg.touchInput||void 0;try{document.createEvent("TouchEvent"),
Dg.touchInput=!0}catch(b){Dg.touchInput=!1}var uo=Lc("t",Dg.touchInput);Dg.touchInputDevice=uo;Dg.touchInputDevice=uo;Dg.CachedDefaultValues=Dg.CachedDefaultValues||void 0;Dg.CachedDefaultValues=Dg.CachedDefaultValues||new Map;Dg.CachedStyleProperties=Dg.CachedStyleProperties||void 0;Dg.CachedStyleProperties=Dg.CachedStyleProperties||new Map;Dg.nameToClassMapping=Dg.nameToClassMapping||void 0;Dg.nameToClassMapping=Dg.nameToClassMapping||{};Dg.getClassForName=LC;Dg.sanitizeFont=Qt;Dg.pathForBrowserHistory=
ew;Dg.addClassMappings=fz;Dg.clearStylePropertiesForClassesIn=MC;Dg.getStylePropertiesFor=NC;Dg.getDefaultValueFor=OC;Dg.morph=il;Dg.newMorphId=gz;var yx=Lc("b9",Dg.lazyInspect);Dg.inspect=yx;Dg.inspect=yx;var vo=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js");vo.obj=nh;vo.morph=il;var Cs=Lc("I",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js"),g=c.hasOwnProperty("Icon")&&"function"===typeof c.Icon?c.Icon:c.Icon=function(a){if(!a||
!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,void 0,[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Icon"}},{key:"makeLabel",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{prefix:"",suffix:""},f=d.prefix,k=d.suffix,n=[];f&&n.push.apply(n,hb("string"===typeof f?[f||"",{}]:f));n.push.apply(n,hb(this.textAttribute(a,vo.obj.dissoc(d,["fontSize"]))));k&&n.push.apply(n,
hb("string"===typeof k?[k||"",{}]:k));return vo.morph(Object.assign({type:"label",value:n},vo.obj.dissoc(d,["prefix","suffix"])))}},{key:"textAttribute",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},f=d.textStyleClasses&&d.textStyleClasses.includes("far");return[vo.Icons[a].code||"icon ".concat(a," not found"),Object.assign({fontFamily:'"Font Awesome 5 Free", "Font Awesome 5 Brands"',fontWeight:f?"400":"900",textStyleClasses:["fas"]},d)]}},{key:"setIcon",value:function(a,
d){a.textAndAttributes=this.textAttribute(d)}}],c,{pathInPackage:function(){return"./text/icons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:673,end:1848})}(void 0));vo.Icon=Cs;vo.Icon=Cs;var rH={0:{code:"0"},1:{code:"1"},2:{code:"2"},3:{code:"3"},4:{code:"4"},5:{code:"5"},6:{code:"6"},7:{code:"7"},8:{code:"8"},9:{code:"9"},
a:{code:'"'},"address-book":{code:"\uf2b9"},"contact-book":{code:"\uf2b9"},"address-card":{code:"\uf2bb"},"contact-card":{code:"\uf2bb"},vcard:{code:"\uf2bb"},"align-center":{code:"\uf037"},"align-justify":{code:"\uf039"},"align-left":{code:"\uf036"},"align-right":{code:"\uf038"},anchor:{code:"\uf13d"},"anchor-circle-check":{code:"\ue4aa"},"anchor-circle-exclamation":{code:"\ue4ab"},"anchor-circle-xmark":{code:"\ue4ac"},"anchor-lock":{code:"\ue4ad"},"angle-down":{code:"\uf107"},"angle-left":{code:"\uf104"},
"angle-right":{code:"\uf105"},"angle-up":{code:"\uf106"},"angles-down":{code:"\uf103"},"angle-double-down":{code:"\uf103"},"angles-left":{code:"\uf100"},"angle-double-left":{code:"\uf100"},"angles-right":{code:"\uf101"},"angle-double-right":{code:"\uf101"},"angles-up":{code:"\uf102"},"angle-double-up":{code:"\uf102"},ankh:{code:"\uf644"},"apple-whole":{code:"\uf5d1"},"apple-alt":{code:"\uf5d1"},archway:{code:"\uf557"},"arrow-down":{code:"\uf063"},"arrow-down-1-9":{code:"\uf162"},"sort-numeric-asc":{code:"\uf162"},
"sort-numeric-down":{code:"\uf162"},"arrow-down-9-1":{code:"\uf886"},"sort-numeric-desc":{code:"\uf886"},"sort-numeric-down-alt":{code:"\uf886"},"arrow-down-a-z":{code:"\uf15d"},"sort-alpha-asc":{code:"\uf15d"},"sort-alpha-down":{code:"\uf15d"},"arrow-down-long":{code:"\uf175"},"long-arrow-down":{code:"\uf175"},"arrow-down-short-wide":{code:"\uf884"},"sort-amount-desc":{code:"\uf884"},"sort-amount-down-alt":{code:"\uf884"},"arrow-down-up-across-line":{code:"\ue4af"},"arrow-down-up-lock":{code:"\ue4b0"},
"arrow-down-wide-short":{code:"\uf160"},"sort-amount-asc":{code:"\uf160"},"sort-amount-down":{code:"\uf160"},"arrow-down-z-a":{code:"\uf881"},"sort-alpha-desc":{code:"\uf881"},"sort-alpha-down-alt":{code:"\uf881"},"arrow-left":{code:"\uf060"},"arrow-left-long":{code:"\uf177"},"long-arrow-left":{code:"\uf177"},"arrow-pointer":{code:"\uf245"},"mouse-pointer":{code:"\uf245"},"arrow-right":{code:"\uf061"},"arrow-right-arrow-left":{code:"\uf0ec"},exchange:{code:"\uf0ec"},"arrow-right-from-bracket":{code:"\uf08b"},
"sign-out":{code:"\uf08b"},"arrow-right-long":{code:"\uf178"},"long-arrow-right":{code:"\uf178"},"arrow-right-to-bracket":{code:"\uf090"},"sign-in":{code:"\uf090"},"arrow-right-to-city":{code:"\ue4b3"},"arrow-rotate-left":{code:"\uf0e2"},"arrow-left-rotate":{code:"\uf0e2"},"arrow-rotate-back":{code:"\uf0e2"},"arrow-rotate-backward":{code:"\uf0e2"},undo:{code:"\uf0e2"},"arrow-rotate-right":{code:"\uf01e"},"arrow-right-rotate":{code:"\uf01e"},"arrow-rotate-forward":{code:"\uf01e"},redo:{code:"\uf01e"},
"arrow-trend-down":{code:"\ue097"},"arrow-trend-up":{code:"\ue098"},"arrow-turn-down":{code:"\uf149"},"level-down":{code:"\uf149"},"arrow-turn-up":{code:"\uf148"},"level-up":{code:"\uf148"},"arrow-up":{code:"\uf062"},"arrow-up-1-9":{code:"\uf163"},"sort-numeric-up":{code:"\uf163"},"arrow-up-9-1":{code:"\uf887"},"sort-numeric-up-alt":{code:"\uf887"},"arrow-up-a-z":{code:"\uf15e"},"sort-alpha-up":{code:"\uf15e"},"arrow-up-from-bracket":{code:"\ue09a"},"arrow-up-from-ground-water":{code:"\ue4b5"},"arrow-up-from-water-pump":{code:"\ue4b6"},
"arrow-up-long":{code:"\uf176"},"long-arrow-up":{code:"\uf176"},"arrow-up-right-dots":{code:"\ue4b7"},"arrow-up-right-from-square":{code:"\uf08e"},"external-link":{code:"\uf08e"},"arrow-up-short-wide":{code:"\uf885"},"sort-amount-up-alt":{code:"\uf885"},"arrow-up-wide-short":{code:"\uf161"},"sort-amount-up":{code:"\uf161"},"arrow-up-z-a":{code:"\uf882"},"sort-alpha-up-alt":{code:"\uf882"},"arrows-down-to-line":{code:"\ue4b8"},"arrows-down-to-people":{code:"\ue4b9"},"arrows-left-right":{code:"\uf07e"},
"arrows-h":{code:"\uf07e"},"arrows-left-right-to-line":{code:"\ue4ba"},"arrows-rotate":{code:"\uf021"},refresh:{code:"\uf021"},sync:{code:"\uf021"},"arrows-spin":{code:"\ue4bb"},"arrows-split-up-and-left":{code:"\ue4bc"},"arrows-to-circle":{code:"\ue4bd"},"arrows-to-dot":{code:"\ue4be"},"arrows-to-eye":{code:"\ue4bf"},"arrows-turn-right":{code:"\ue4c0"},"arrows-turn-to-dots":{code:"\ue4c1"},"arrows-up-down":{code:"\uf07d"},"arrows-v":{code:"\uf07d"},"arrows-up-down-left-right":{code:"\uf047"},arrows:{code:"\uf047"},
"arrows-up-to-line":{code:"\ue4c2"},asterisk:{code:"*"},at:{code:"@"},atom:{code:"\uf5d2"},"audio-description":{code:"\uf29e"},"austral-sign":{code:"\ue0a9"},award:{code:"\uf559"},b:{code:"B"},baby:{code:"\uf77c"},"baby-carriage":{code:"\uf77d"},"carriage-baby":{code:"\uf77d"},backward:{code:"\uf04a"},"backward-fast":{code:"\uf049"},"fast-backward":{code:"\uf049"},"backward-step":{code:"\uf048"},"step-backward":{code:"\uf048"},bacon:{code:"\uf7e5"},bacteria:{code:"\ue059"},bacterium:{code:"\ue05a"},
"bag-shopping":{code:"\uf290"},"shopping-bag":{code:"\uf290"},bahai:{code:"\uf666"},"baht-sign":{code:"\ue0ac"},ban:{code:"\uf05e"},cancel:{code:"\uf05e"},"ban-smoking":{code:"\uf54d"},"smoking-ban":{code:"\uf54d"},bandage:{code:"\uf462"},"band-aid":{code:"\uf462"},barcode:{code:"\uf02a"},bars:{code:"\uf0c9"},navicon:{code:"\uf0c9"},"bars-progress":{code:"\uf828"},"tasks-alt":{code:"\uf828"},"bars-staggered":{code:"\uf550"},reorder:{code:"\uf550"},stream:{code:"\uf550"},baseball:{code:"\uf433"},"baseball-ball":{code:"\uf433"},
"baseball-bat-ball":{code:"\uf432"},"basket-shopping":{code:"\uf291"},"shopping-basket":{code:"\uf291"},basketball:{code:"\uf434"},"basketball-ball":{code:"\uf434"},bath:{code:"\uf2cd"},bathtub:{code:"\uf2cd"},"battery-empty":{code:"\uf244"},"battery-0":{code:"\uf244"},"battery-full":{code:"\uf240"},battery:{code:"\uf240"},"battery-5":{code:"\uf240"},"battery-half":{code:"\uf242"},"battery-3":{code:"\uf242"},"battery-quarter":{code:"\uf243"},"battery-2":{code:"\uf243"},"battery-three-quarters":{code:"\uf241"},
"battery-4":{code:"\uf241"},bed:{code:"\uf236"},"bed-pulse":{code:"\uf487"},procedures:{code:"\uf487"},"beer-mug-empty":{code:"\uf0fc"},beer:{code:"\uf0fc"},bell:{code:"\uf0f3"},"bell-concierge":{code:"\uf562"},"concierge-bell":{code:"\uf562"},"bell-slash":{code:"\uf1f6"},"bezier-curve":{code:"\uf55b"},bicycle:{code:"\uf206"},binoculars:{code:"\uf1e5"},biohazard:{code:"\uf780"},"bitcoin-sign":{code:"\ue0b4"},blender:{code:"\uf517"},"blender-phone":{code:"\uf6b6"},blog:{code:"\uf781"},bold:{code:"\uf032"},
bolt:{code:"\uf0e7"},zap:{code:"\uf0e7"},"bolt-lightning":{code:"\ue0b7"},bomb:{code:"\uf1e2"},bone:{code:"\uf5d7"},bong:{code:"\uf55c"},book:{code:"\uf02d"},"book-atlas":{code:"\uf558"},atlas:{code:"\uf558"},"book-bible":{code:"\uf647"},bible:{code:"\uf647"},"book-bookmark":{code:"\ue0bb"},"book-journal-whills":{code:"\uf66a"},"journal-whills":{code:"\uf66a"},"book-medical":{code:"\uf7e6"},"book-open":{code:"\uf518"},"book-open-reader":{code:"\uf5da"},"book-reader":{code:"\uf5da"},"book-quran":{code:"\uf687"},
quran:{code:"\uf687"},"book-skull":{code:"\uf6b7"},"book-dead":{code:"\uf6b7"},bookmark:{code:"\uf02e"},"border-all":{code:"\uf84c"},"border-none":{code:"\uf850"},"border-top-left":{code:"\uf853"},"border-style":{code:"\uf853"},"bore-hole":{code:"\ue4c3"},"bottle-droplet":{code:"\ue4c4"},"bottle-water":{code:"\ue4c5"},"bowl-food":{code:"\ue4c6"},"bowl-rice":{code:"\ue2eb"},"bowling-ball":{code:"\uf436"},box:{code:"\uf466"},"box-archive":{code:"\uf187"},archive:{code:"\uf187"},"box-open":{code:"\uf49e"},
"box-tissue":{code:"\ue05b"},"boxes-packing":{code:"\ue4c7"},"boxes-stacked":{code:"\uf468"},boxes:{code:"\uf468"},"boxes-alt":{code:"\uf468"},braille:{code:"\uf2a1"},brain:{code:"\uf5dc"},"brazilian-real-sign":{code:"\ue46c"},"bread-slice":{code:"\uf7ec"},bridge:{code:"\ue4c8"},"bridge-circle-check":{code:"\ue4c9"},"bridge-circle-exclamation":{code:"\ue4ca"},"bridge-circle-xmark":{code:"\ue4cb"},"bridge-lock":{code:"\ue4cc"},"bridge-water":{code:"\ue4ce"},briefcase:{code:"\uf0b1"},"briefcase-medical":{code:"\uf469"},
broom:{code:"\uf51a"},"broom-ball":{code:"\uf458"},quidditch:{code:"\uf458"},"quidditch-broom-ball":{code:"\uf458"},brush:{code:"\uf55d"},bucket:{code:"\ue4cf"},bug:{code:"\uf188"},"bug-slash":{code:"\ue490"},bugs:{code:"\ue4d0"},building:{code:"\uf1ad"},"building-circle-arrow-right":{code:"\ue4d1"},"building-circle-check":{code:"\ue4d2"},"building-circle-exclamation":{code:"\ue4d3"},"building-circle-xmark":{code:"\ue4d4"},"building-columns":{code:"\uf19c"},bank:{code:"\uf19c"},institution:{code:"\uf19c"},
museum:{code:"\uf19c"},university:{code:"\uf19c"},"building-flag":{code:"\ue4d5"},"building-lock":{code:"\ue4d6"},"building-ngo":{code:"\ue4d7"},"building-shield":{code:"\ue4d8"},"building-un":{code:"\ue4d9"},"building-user":{code:"\ue4da"},"building-wheat":{code:"\ue4db"},bullhorn:{code:"\uf0a1"},bullseye:{code:"\uf140"},burger:{code:"\uf805"},hamburger:{code:"\uf805"},burst:{code:"\ue4dc"},bus:{code:"\uf207"},"bus-simple":{code:"\uf55e"},"bus-alt":{code:"\uf55e"},"business-time":{code:"\uf64a"},
"briefcase-clock":{code:"\uf64a"},c:{code:"C"},"cake-candles":{code:"\uf1fd"},"birthday-cake":{code:"\uf1fd"},cake:{code:"\uf1fd"},calculator:{code:"\uf1ec"},calendar:{code:"\uf133"},"calendar-check":{code:"\uf274"},"calendar-day":{code:"\uf783"},"calendar-days":{code:"\uf073"},"calendar-alt":{code:"\uf073"},"calendar-minus":{code:"\uf272"},"calendar-plus":{code:"\uf271"},"calendar-week":{code:"\uf784"},"calendar-xmark":{code:"\uf273"},"calendar-times":{code:"\uf273"},camera:{code:"\uf030"},"camera-alt":{code:"\uf030"},
"camera-retro":{code:"\uf083"},"camera-rotate":{code:"\ue0d8"},campground:{code:"\uf6bb"},"candy-cane":{code:"\uf786"},cannabis:{code:"\uf55f"},capsules:{code:"\uf46b"},car:{code:"\uf1b9"},automobile:{code:"\uf1b9"},"car-battery":{code:"\uf5df"},"battery-car":{code:"\uf5df"},"car-burst":{code:"\uf5e1"},"car-crash":{code:"\uf5e1"},"car-on":{code:"\ue4dd"},"car-rear":{code:"\uf5de"},"car-alt":{code:"\uf5de"},"car-side":{code:"\uf5e4"},"car-tunnel":{code:"\ue4de"},caravan:{code:"\uf8ff"},"caret-down":{code:"\uf0d7"},
"caret-left":{code:"\uf0d9"},"caret-right":{code:"\uf0da"},"caret-up":{code:"\uf0d8"},carrot:{code:"\uf787"},"cart-arrow-down":{code:"\uf218"},"cart-flatbed":{code:"\uf474"},"dolly-flatbed":{code:"\uf474"},"cart-flatbed-suitcase":{code:"\uf59d"},"luggage-cart":{code:"\uf59d"},"cart-plus":{code:"\uf217"},"cart-shopping":{code:"\uf07a"},"shopping-cart":{code:"\uf07a"},"cash-register":{code:"\uf788"},cat:{code:"\uf6be"},"cedi-sign":{code:"\ue0df"},"cent-sign":{code:"\ue3f5"},certificate:{code:"\uf0a3"},
chair:{code:"\uf6c0"},chalkboard:{code:"\uf51b"},blackboard:{code:"\uf51b"},"chalkboard-user":{code:"\uf51c"},"chalkboard-teacher":{code:"\uf51c"},"champagne-glasses":{code:"\uf79f"},"glass-cheers":{code:"\uf79f"},"charging-station":{code:"\uf5e7"},"chart-area":{code:"\uf1fe"},"area-chart":{code:"\uf1fe"},"chart-bar":{code:"\uf080"},"bar-chart":{code:"\uf080"},"chart-column":{code:"\ue0e3"},"chart-gantt":{code:"\ue0e4"},"chart-line":{code:"\uf201"},"line-chart":{code:"\uf201"},"chart-pie":{code:"\uf200"},
"pie-chart":{code:"\uf200"},"chart-simple":{code:"\ue473"},check:{code:"\uf00c"},"check-double":{code:"\uf560"},"check-to-slot":{code:"\uf772"},"vote-yea":{code:"\uf772"},cheese:{code:"\uf7ef"},chess:{code:"\uf439"},"chess-bishop":{code:"\uf43a"},"chess-board":{code:"\uf43c"},"chess-king":{code:"\uf43f"},"chess-knight":{code:"\uf441"},"chess-pawn":{code:"\uf443"},"chess-queen":{code:"\uf445"},"chess-rook":{code:"\uf447"},"chevron-down":{code:"\uf078"},"chevron-left":{code:"\uf053"},"chevron-right":{code:"\uf054"},
"chevron-up":{code:"\uf077"},child:{code:"\uf1ae"},"child-dress":{code:"\ue59c"},"child-reaching":{code:"\ue59d"},"child-rifle":{code:"\ue4e0"},children:{code:"\ue4e1"},church:{code:"\uf51d"},circle:{code:"\uf111"},"circle-arrow-down":{code:"\uf0ab"},"arrow-circle-down":{code:"\uf0ab"},"circle-arrow-left":{code:"\uf0a8"},"arrow-circle-left":{code:"\uf0a8"},"circle-arrow-right":{code:"\uf0a9"},"arrow-circle-right":{code:"\uf0a9"},"circle-arrow-up":{code:"\uf0aa"},"arrow-circle-up":{code:"\uf0aa"},
"circle-check":{code:"\uf058"},"check-circle":{code:"\uf058"},"circle-chevron-down":{code:"\uf13a"},"chevron-circle-down":{code:"\uf13a"},"circle-chevron-left":{code:"\uf137"},"chevron-circle-left":{code:"\uf137"},"circle-chevron-right":{code:"\uf138"},"chevron-circle-right":{code:"\uf138"},"circle-chevron-up":{code:"\uf139"},"chevron-circle-up":{code:"\uf139"},"circle-dollar-to-slot":{code:"\uf4b9"},donate:{code:"\uf4b9"},"circle-dot":{code:"\uf192"},"dot-circle":{code:"\uf192"},"circle-down":{code:"\uf358"},
"arrow-alt-circle-down":{code:"\uf358"},"circle-exclamation":{code:"\uf06a"},"exclamation-circle":{code:"\uf06a"},"circle-h":{code:"\uf47e"},"hospital-symbol":{code:"\uf47e"},"circle-half-stroke":{code:"\uf042"},adjust:{code:"\uf042"},"circle-info":{code:"\uf05a"},"info-circle":{code:"\uf05a"},"circle-left":{code:"\uf359"},"arrow-alt-circle-left":{code:"\uf359"},"circle-minus":{code:"\uf056"},"minus-circle":{code:"\uf056"},"circle-nodes":{code:"\ue4e2"},"circle-notch":{code:"\uf1ce"},"circle-pause":{code:"\uf28b"},
"pause-circle":{code:"\uf28b"},"circle-play":{code:"\uf144"},"play-circle":{code:"\uf144"},"circle-plus":{code:"\uf055"},"plus-circle":{code:"\uf055"},"circle-question":{code:"\uf059"},"question-circle":{code:"\uf059"},"circle-radiation":{code:"\uf7ba"},"radiation-alt":{code:"\uf7ba"},"circle-right":{code:"\uf35a"},"arrow-alt-circle-right":{code:"\uf35a"},"circle-stop":{code:"\uf28d"},"stop-circle":{code:"\uf28d"},"circle-up":{code:"\uf35b"},"arrow-alt-circle-up":{code:"\uf35b"},"circle-user":{code:"\uf2bd"},
"user-circle":{code:"\uf2bd"},"circle-xmark":{code:"\uf057"},"times-circle":{code:"\uf057"},"xmark-circle":{code:"\uf057"},city:{code:"\uf64f"},clapperboard:{code:"\ue131"},clipboard:{code:"\uf328"},"clipboard-check":{code:"\uf46c"},"clipboard-list":{code:"\uf46d"},"clipboard-question":{code:"\ue4e3"},"clipboard-user":{code:"\uf7f3"},clock:{code:"\uf017"},"clock-four":{code:"\uf017"},"clock-rotate-left":{code:"\uf1da"},history:{code:"\uf1da"},clone:{code:"\uf24d"},"closed-captioning":{code:"\uf20a"},
cloud:{code:"\uf0c2"},"cloud-arrow-down":{code:"\uf0ed"},"cloud-download":{code:"\uf0ed"},"cloud-download-alt":{code:"\uf0ed"},"cloud-arrow-up":{code:"\uf0ee"},"cloud-upload":{code:"\uf0ee"},"cloud-upload-alt":{code:"\uf0ee"},"cloud-bolt":{code:"\uf76c"},thunderstorm:{code:"\uf76c"},"cloud-meatball":{code:"\uf73b"},"cloud-moon":{code:"\uf6c3"},"cloud-moon-rain":{code:"\uf73c"},"cloud-rain":{code:"\uf73d"},"cloud-showers-heavy":{code:"\uf740"},"cloud-showers-water":{code:"\ue4e4"},"cloud-sun":{code:"\uf6c4"},
"cloud-sun-rain":{code:"\uf743"},clover:{code:"\ue139"},code:{code:"\uf121"},"code-branch":{code:"\uf126"},"code-commit":{code:"\uf386"},"code-compare":{code:"\ue13a"},"code-fork":{code:"\ue13b"},"code-merge":{code:"\uf387"},"code-pull-request":{code:"\ue13c"},coins:{code:"\uf51e"},"colon-sign":{code:"\ue140"},comment:{code:"\uf075"},"comment-dollar":{code:"\uf651"},"comment-dots":{code:"\uf4ad"},commenting:{code:"\uf4ad"},"comment-medical":{code:"\uf7f5"},"comment-slash":{code:"\uf4b3"},"comment-sms":{code:"\uf7cd"},
sms:{code:"\uf7cd"},comments:{code:"\uf086"},"comments-dollar":{code:"\uf653"},"compact-disc":{code:"\uf51f"},compass:{code:"\uf14e"},"compass-drafting":{code:"\uf568"},"drafting-compass":{code:"\uf568"},compress:{code:"\uf066"},computer:{code:"\ue4e5"},"computer-mouse":{code:"\uf8cc"},mouse:{code:"\uf8cc"},cookie:{code:"\uf563"},"cookie-bite":{code:"\uf564"},copy:{code:"\uf0c5"},copyright:{code:"\uf1f9"},couch:{code:"\uf4b8"},cow:{code:"\uf6c8"},"credit-card":{code:"\uf09d"},"credit-card-alt":{code:"\uf09d"},
crop:{code:"\uf125"},"crop-simple":{code:"\uf565"},"crop-alt":{code:"\uf565"},cross:{code:"\uf654"},crosshairs:{code:"\uf05b"},crow:{code:"\uf520"},crown:{code:"\uf521"},crutch:{code:"\uf7f7"},"cruzeiro-sign":{code:"\ue152"},cube:{code:"\uf1b2"},cubes:{code:"\uf1b3"},"cubes-stacked":{code:"\ue4e6"},d:{code:"D"},database:{code:"\uf1c0"},"delete-left":{code:"\uf55a"},backspace:{code:"\uf55a"},democrat:{code:"\uf747"},desktop:{code:"\uf390"},"desktop-alt":{code:"\uf390"},dharmachakra:{code:"\uf655"},
"diagram-next":{code:"\ue476"},"diagram-predecessor":{code:"\ue477"},"diagram-project":{code:"\uf542"},"project-diagram":{code:"\uf542"},"diagram-successor":{code:"\ue47a"},diamond:{code:"\uf219"},"diamond-turn-right":{code:"\uf5eb"},directions:{code:"\uf5eb"},dice:{code:"\uf522"},"dice-d20":{code:"\uf6cf"},"dice-d6":{code:"\uf6d1"},"dice-five":{code:"\uf523"},"dice-four":{code:"\uf524"},"dice-one":{code:"\uf525"},"dice-six":{code:"\uf526"},"dice-three":{code:"\uf527"},"dice-two":{code:"\uf528"},
disease:{code:"\uf7fa"},display:{code:"\ue163"},divide:{code:"\uf529"},dna:{code:"\uf471"},dog:{code:"\uf6d3"},"dollar-sign":{code:"$"},dollar:{code:"$"},usd:{code:"$"},dolly:{code:"\uf472"},"dolly-box":{code:"\uf472"},"dong-sign":{code:"\ue169"},"door-closed":{code:"\uf52a"},"door-open":{code:"\uf52b"},dove:{code:"\uf4ba"},"down-left-and-up-right-to-center":{code:"\uf422"},"compress-alt":{code:"\uf422"},"down-long":{code:"\uf309"},"long-arrow-alt-down":{code:"\uf309"},download:{code:"\uf019"},dragon:{code:"\uf6d5"},
"draw-polygon":{code:"\uf5ee"},droplet:{code:"\uf043"},tint:{code:"\uf043"},"droplet-slash":{code:"\uf5c7"},"tint-slash":{code:"\uf5c7"},drum:{code:"\uf569"},"drum-steelpan":{code:"\uf56a"},"drumstick-bite":{code:"\uf6d7"},dumbbell:{code:"\uf44b"},dumpster:{code:"\uf793"},"dumpster-fire":{code:"\uf794"},dungeon:{code:"\uf6d9"},e:{code:"E"},"ear-deaf":{code:"\uf2a4"},deaf:{code:"\uf2a4"},deafness:{code:"\uf2a4"},"hard-of-hearing":{code:"\uf2a4"},"ear-listen":{code:"\uf2a2"},"assistive-listening-systems":{code:"\uf2a2"},
"earth-africa":{code:"\uf57c"},"globe-africa":{code:"\uf57c"},"earth-americas":{code:"\uf57d"},earth:{code:"\uf57d"},"earth-america":{code:"\uf57d"},"globe-americas":{code:"\uf57d"},"earth-asia":{code:"\uf57e"},"globe-asia":{code:"\uf57e"},"earth-europe":{code:"\uf7a2"},"globe-europe":{code:"\uf7a2"},"earth-oceania":{code:"\ue47b"},"globe-oceania":{code:"\ue47b"},egg:{code:"\uf7fb"},eject:{code:"\uf052"},elevator:{code:"\ue16d"},ellipsis:{code:"\uf141"},"ellipsis-h":{code:"\uf141"},"ellipsis-vertical":{code:"\uf142"},
"ellipsis-v":{code:"\uf142"},envelope:{code:"\uf0e0"},"envelope-circle-check":{code:"\ue4e8"},"envelope-open":{code:"\uf2b6"},"envelope-open-text":{code:"\uf658"},"envelopes-bulk":{code:"\uf674"},"mail-bulk":{code:"\uf674"},equals:{code:"="},eraser:{code:"\uf12d"},ethernet:{code:"\uf796"},"euro-sign":{code:"\uf153"},eur:{code:"\uf153"},euro:{code:"\uf153"},exclamation:{code:"!"},expand:{code:"\uf065"},explosion:{code:"\ue4e9"},eye:{code:"\uf06e"},"eye-dropper":{code:"\uf1fb"},"eye-dropper-empty":{code:"\uf1fb"},
eyedropper:{code:"\uf1fb"},"eye-low-vision":{code:"\uf2a8"},"low-vision":{code:"\uf2a8"},"eye-slash":{code:"\uf070"},f:{code:"F"},"face-angry":{code:"\uf556"},angry:{code:"\uf556"},"face-dizzy":{code:"\uf567"},dizzy:{code:"\uf567"},"face-flushed":{code:"\uf579"},flushed:{code:"\uf579"},"face-frown":{code:"\uf119"},frown:{code:"\uf119"},"face-frown-open":{code:"\uf57a"},"frown-open":{code:"\uf57a"},"face-grimace":{code:"\uf57f"},grimace:{code:"\uf57f"},"face-grin":{code:"\uf580"},grin:{code:"\uf580"},
"face-grin-beam":{code:"\uf582"},"grin-beam":{code:"\uf582"},"face-grin-beam-sweat":{code:"\uf583"},"grin-beam-sweat":{code:"\uf583"},"face-grin-hearts":{code:"\uf584"},"grin-hearts":{code:"\uf584"},"face-grin-squint":{code:"\uf585"},"grin-squint":{code:"\uf585"},"face-grin-squint-tears":{code:"\uf586"},"grin-squint-tears":{code:"\uf586"},"face-grin-stars":{code:"\uf587"},"grin-stars":{code:"\uf587"},"face-grin-tears":{code:"\uf588"},"grin-tears":{code:"\uf588"},"face-grin-tongue":{code:"\uf589"},
"grin-tongue":{code:"\uf589"},"face-grin-tongue-squint":{code:"\uf58a"},"grin-tongue-squint":{code:"\uf58a"},"face-grin-tongue-wink":{code:"\uf58b"},"grin-tongue-wink":{code:"\uf58b"},"face-grin-wide":{code:"\uf581"},"grin-alt":{code:"\uf581"},"face-grin-wink":{code:"\uf58c"},"grin-wink":{code:"\uf58c"},"face-kiss":{code:"\uf596"},kiss:{code:"\uf596"},"face-kiss-beam":{code:"\uf597"},"kiss-beam":{code:"\uf597"},"face-kiss-wink-heart":{code:"\uf598"},"kiss-wink-heart":{code:"\uf598"},"face-laugh":{code:"\uf599"},
laugh:{code:"\uf599"},"face-laugh-beam":{code:"\uf59a"},"laugh-beam":{code:"\uf59a"},"face-laugh-squint":{code:"\uf59b"},"laugh-squint":{code:"\uf59b"},"face-laugh-wink":{code:"\uf59c"},"laugh-wink":{code:"\uf59c"},"face-meh":{code:"\uf11a"},meh:{code:"\uf11a"},"face-meh-blank":{code:"\uf5a4"},"meh-blank":{code:"\uf5a4"},"face-rolling-eyes":{code:"\uf5a5"},"meh-rolling-eyes":{code:"\uf5a5"},"face-sad-cry":{code:"\uf5b3"},"sad-cry":{code:"\uf5b3"},"face-sad-tear":{code:"\uf5b4"},"sad-tear":{code:"\uf5b4"},
"face-smile":{code:"\uf118"},smile:{code:"\uf118"},"face-smile-beam":{code:"\uf5b8"},"smile-beam":{code:"\uf5b8"},"face-smile-wink":{code:"\uf4da"},"smile-wink":{code:"\uf4da"},"face-surprise":{code:"\uf5c2"},surprise:{code:"\uf5c2"},"face-tired":{code:"\uf5c8"},tired:{code:"\uf5c8"},fan:{code:"\uf863"},faucet:{code:"\ue005"},"faucet-drip":{code:"\ue006"},fax:{code:"\uf1ac"},feather:{code:"\uf52d"},"feather-pointed":{code:"\uf56b"},"feather-alt":{code:"\uf56b"},ferry:{code:"\ue4ea"},file:{code:"\uf15b"},
"file-arrow-down":{code:"\uf56d"},"file-download":{code:"\uf56d"},"file-arrow-up":{code:"\uf574"},"file-upload":{code:"\uf574"},"file-audio":{code:"\uf1c7"},"file-circle-check":{code:"\ue493"},"file-circle-exclamation":{code:"\ue4eb"},"file-circle-minus":{code:"\ue4ed"},"file-circle-plus":{code:"\ue4ee"},"file-circle-question":{code:"\ue4ef"},"file-circle-xmark":{code:"\ue494"},"file-code":{code:"\uf1c9"},"file-contract":{code:"\uf56c"},"file-csv":{code:"\uf6dd"},"file-excel":{code:"\uf1c3"},"file-export":{code:"\uf56e"},
"arrow-right-from-file":{code:"\uf56e"},"file-image":{code:"\uf1c5"},"file-import":{code:"\uf56f"},"arrow-right-to-file":{code:"\uf56f"},"file-invoice":{code:"\uf570"},"file-invoice-dollar":{code:"\uf571"},"file-lines":{code:"\uf15c"},"file-alt":{code:"\uf15c"},"file-text":{code:"\uf15c"},"file-medical":{code:"\uf477"},"file-pdf":{code:"\uf1c1"},"file-pen":{code:"\uf31c"},"file-edit":{code:"\uf31c"},"file-powerpoint":{code:"\uf1c4"},"file-prescription":{code:"\uf572"},"file-shield":{code:"\ue4f0"},
"file-signature":{code:"\uf573"},"file-video":{code:"\uf1c8"},"file-waveform":{code:"\uf478"},"file-medical-alt":{code:"\uf478"},"file-word":{code:"\uf1c2"},"file-zipper":{code:"\uf1c6"},"file-archive":{code:"\uf1c6"},fill:{code:"\uf575"},"fill-drip":{code:"\uf576"},film:{code:"\uf008"},filter:{code:"\uf0b0"},"filter-circle-dollar":{code:"\uf662"},"funnel-dollar":{code:"\uf662"},"filter-circle-xmark":{code:"\ue17b"},fingerprint:{code:"\uf577"},fire:{code:"\uf06d"},"fire-burner":{code:"\ue4f1"},"fire-extinguisher":{code:"\uf134"},
"fire-flame-curved":{code:"\uf7e4"},"fire-alt":{code:"\uf7e4"},"fire-flame-simple":{code:"\uf46a"},burn:{code:"\uf46a"},fish:{code:"\uf578"},"fish-fins":{code:"\ue4f2"},flag:{code:"\uf024"},"flag-checkered":{code:"\uf11e"},"flag-usa":{code:"\uf74d"},flask:{code:"\uf0c3"},"flask-vial":{code:"\ue4f3"},"floppy-disk":{code:"\uf0c7"},save:{code:"\uf0c7"},"florin-sign":{code:"\ue184"},folder:{code:"\uf07b"},"folder-blank":{code:"\uf07b"},"folder-closed":{code:"\ue185"},"folder-minus":{code:"\uf65d"},"folder-open":{code:"\uf07c"},
"folder-plus":{code:"\uf65e"},"folder-tree":{code:"\uf802"},font:{code:"\uf031"},football:{code:"\uf44e"},"football-ball":{code:"\uf44e"},forward:{code:"\uf04e"},"forward-fast":{code:"\uf050"},"fast-forward":{code:"\uf050"},"forward-step":{code:"\uf051"},"step-forward":{code:"\uf051"},"franc-sign":{code:"\ue18f"},frog:{code:"\uf52e"},futbol:{code:"\uf1e3"},"futbol-ball":{code:"\uf1e3"},"soccer-ball":{code:"\uf1e3"},g:{code:"G"},gamepad:{code:"\uf11b"},"gas-pump":{code:"\uf52f"},gauge:{code:"\uf624"},
dashboard:{code:"\uf624"},"gauge-med":{code:"\uf624"},"tachometer-alt-average":{code:"\uf624"},"gauge-high":{code:"\uf625"},"tachometer-alt":{code:"\uf625"},"tachometer-alt-fast":{code:"\uf625"},"gauge-simple":{code:"\uf629"},"gauge-simple-med":{code:"\uf629"},"tachometer-average":{code:"\uf629"},"gauge-simple-high":{code:"\uf62a"},tachometer:{code:"\uf62a"},"tachometer-fast":{code:"\uf62a"},gavel:{code:"\uf0e3"},legal:{code:"\uf0e3"},gear:{code:"\uf013"},cog:{code:"\uf013"},gears:{code:"\uf085"},
cogs:{code:"\uf085"},gem:{code:"\uf3a5"},genderless:{code:"\uf22d"},ghost:{code:"\uf6e2"},gift:{code:"\uf06b"},gifts:{code:"\uf79c"},"glass-water":{code:"\ue4f4"},"glass-water-droplet":{code:"\ue4f5"},glasses:{code:"\uf530"},globe:{code:"\uf0ac"},"golf-ball-tee":{code:"\uf450"},"golf-ball":{code:"\uf450"},gopuram:{code:"\uf664"},"graduation-cap":{code:"\uf19d"},"mortar-board":{code:"\uf19d"},"greater-than":{code:">"},"greater-than-equal":{code:"\uf532"},grip:{code:"\uf58d"},"grip-horizontal":{code:"\uf58d"},
"grip-lines":{code:"\uf7a4"},"grip-lines-vertical":{code:"\uf7a5"},"grip-vertical":{code:"\uf58e"},"group-arrows-rotate":{code:"\ue4f6"},"guarani-sign":{code:"\ue19a"},guitar:{code:"\uf7a6"},gun:{code:"\ue19b"},h:{code:"H"},hammer:{code:"\uf6e3"},hamsa:{code:"\uf665"},hand:{code:"\uf256"},"hand-paper":{code:"\uf256"},"hand-back-fist":{code:"\uf255"},"hand-rock":{code:"\uf255"},"hand-dots":{code:"\uf461"},allergies:{code:"\uf461"},"hand-fist":{code:"\uf6de"},"fist-raised":{code:"\uf6de"},"hand-holding":{code:"\uf4bd"},
"hand-holding-dollar":{code:"\uf4c0"},"hand-holding-usd":{code:"\uf4c0"},"hand-holding-droplet":{code:"\uf4c1"},"hand-holding-water":{code:"\uf4c1"},"hand-holding-hand":{code:"\ue4f7"},"hand-holding-heart":{code:"\uf4be"},"hand-holding-medical":{code:"\ue05c"},"hand-lizard":{code:"\uf258"},"hand-middle-finger":{code:"\uf806"},"hand-peace":{code:"\uf25b"},"hand-point-down":{code:"\uf0a7"},"hand-point-left":{code:"\uf0a5"},"hand-point-right":{code:"\uf0a4"},"hand-point-up":{code:"\uf0a6"},"hand-pointer":{code:"\uf25a"},
"hand-scissors":{code:"\uf257"},"hand-sparkles":{code:"\ue05d"},"hand-spock":{code:"\uf259"},handcuffs:{code:"\ue4f8"},hands:{code:"\uf2a7"},"sign-language":{code:"\uf2a7"},signing:{code:"\uf2a7"},"hands-asl-interpreting":{code:"\uf2a3"},"american-sign-language-interpreting":{code:"\uf2a3"},"asl-interpreting":{code:"\uf2a3"},"hands-american-sign-language-interpreting":{code:"\uf2a3"},"hands-bound":{code:"\ue4f9"},"hands-bubbles":{code:"\ue05e"},"hands-wash":{code:"\ue05e"},"hands-clapping":{code:"\ue1a8"},
"hands-holding":{code:"\uf4c2"},"hands-holding-child":{code:"\ue4fa"},"hands-holding-circle":{code:"\ue4fb"},"hands-praying":{code:"\uf684"},"praying-hands":{code:"\uf684"},handshake:{code:"\uf2b5"},"handshake-angle":{code:"\uf4c4"},"hands-helping":{code:"\uf4c4"},"handshake-simple":{code:"\uf4c6"},"handshake-alt":{code:"\uf4c6"},"handshake-simple-slash":{code:"\ue05f"},"handshake-alt-slash":{code:"\ue05f"},"handshake-slash":{code:"\ue060"},hanukiah:{code:"\uf6e6"},"hard-drive":{code:"\uf0a0"},hdd:{code:"\uf0a0"},
hashtag:{code:"#"},"hat-cowboy":{code:"\uf8c0"},"hat-cowboy-side":{code:"\uf8c1"},"hat-wizard":{code:"\uf6e8"},"head-side-cough":{code:"\ue061"},"head-side-cough-slash":{code:"\ue062"},"head-side-mask":{code:"\ue063"},"head-side-virus":{code:"\ue064"},heading:{code:"\uf1dc"},header:{code:"\uf1dc"},headphones:{code:"\uf025"},"headphones-simple":{code:"\uf58f"},"headphones-alt":{code:"\uf58f"},headset:{code:"\uf590"},heart:{code:"\uf004"},"heart-circle-bolt":{code:"\ue4fc"},"heart-circle-check":{code:"\ue4fd"},
"heart-circle-exclamation":{code:"\ue4fe"},"heart-circle-minus":{code:"\ue4ff"},"heart-circle-plus":{code:"\ue500"},"heart-circle-xmark":{code:"\ue501"},"heart-crack":{code:"\uf7a9"},"heart-broken":{code:"\uf7a9"},"heart-pulse":{code:"\uf21e"},heartbeat:{code:"\uf21e"},helicopter:{code:"\uf533"},"helicopter-symbol":{code:"\ue502"},"helmet-safety":{code:"\uf807"},"hard-hat":{code:"\uf807"},"hat-hard":{code:"\uf807"},"helmet-un":{code:"\ue503"},highlighter:{code:"\uf591"},"hill-avalanche":{code:"\ue507"},
"hill-rockslide":{code:"\ue508"},hippo:{code:"\uf6ed"},"hockey-puck":{code:"\uf453"},"holly-berry":{code:"\uf7aa"},horse:{code:"\uf6f0"},"horse-head":{code:"\uf7ab"},hospital:{code:"\uf0f8"},"hospital-alt":{code:"\uf0f8"},"hospital-wide":{code:"\uf0f8"},"hospital-user":{code:"\uf80d"},"hot-tub-person":{code:"\uf593"},"hot-tub":{code:"\uf593"},hotdog:{code:"\uf80f"},hotel:{code:"\uf594"},hourglass:{code:"\uf254"},"hourglass-2":{code:"\uf254"},"hourglass-half":{code:"\uf254"},"hourglass-empty":{code:"\uf252"},
"hourglass-end":{code:"\uf253"},"hourglass-3":{code:"\uf253"},"hourglass-start":{code:"\uf251"},"hourglass-1":{code:"\uf251"},house:{code:"\uf015"},home:{code:"\uf015"},"home-alt":{code:"\uf015"},"home-lg-alt":{code:"\uf015"},"house-chimney":{code:"\ue3af"},"home-lg":{code:"\ue3af"},"house-chimney-crack":{code:"\uf6f1"},"house-damage":{code:"\uf6f1"},"house-chimney-medical":{code:"\uf7f2"},"clinic-medical":{code:"\uf7f2"},"house-chimney-user":{code:"\ue065"},"house-chimney-window":{code:"\ue00d"},
"house-circle-check":{code:"\ue509"},"house-circle-exclamation":{code:"\ue50a"},"house-circle-xmark":{code:"\ue50b"},"house-crack":{code:"\ue3b1"},"house-fire":{code:"\ue50c"},"house-flag":{code:"\ue50d"},"house-flood-water":{code:"\ue50e"},"house-flood-water-circle-arrow-right":{code:"\ue50f"},"house-laptop":{code:"\ue066"},"laptop-house":{code:"\ue066"},"house-lock":{code:"\ue510"},"house-medical":{code:"\ue3b2"},"house-medical-circle-check":{code:"\ue511"},"house-medical-circle-exclamation":{code:"\ue512"},
"house-medical-circle-xmark":{code:"\ue513"},"house-medical-flag":{code:"\ue514"},"house-signal":{code:"\ue012"},"house-tsunami":{code:"\ue515"},"house-user":{code:"\ue1b0"},"home-user":{code:"\ue1b0"},"hryvnia-sign":{code:"\uf6f2"},hryvnia:{code:"\uf6f2"},hurricane:{code:"\uf751"},i:{code:"I"},"i-cursor":{code:"\uf246"},"ice-cream":{code:"\uf810"},icicles:{code:"\uf7ad"},icons:{code:"\uf86d"},"heart-music-camera-bolt":{code:"\uf86d"},"id-badge":{code:"\uf2c1"},"id-card":{code:"\uf2c2"},"drivers-license":{code:"\uf2c2"},
"id-card-clip":{code:"\uf47f"},"id-card-alt":{code:"\uf47f"},igloo:{code:"\uf7ae"},image:{code:"\uf03e"},"image-portrait":{code:"\uf3e0"},portrait:{code:"\uf3e0"},images:{code:"\uf302"},inbox:{code:"\uf01c"},indent:{code:"\uf03c"},"indian-rupee-sign":{code:"\ue1bc"},"indian-rupee":{code:"\ue1bc"},inr:{code:"\ue1bc"},industry:{code:"\uf275"},infinity:{code:"\uf534"},info:{code:"\uf129"},italic:{code:"\uf033"},j:{code:"J"},jar:{code:"\ue516"},"jar-wheat":{code:"\ue517"},jedi:{code:"\uf669"},"jet-fighter":{code:"\uf0fb"},
"fighter-jet":{code:"\uf0fb"},"jet-fighter-up":{code:"\ue518"},joint:{code:"\uf595"},"jug-detergent":{code:"\ue519"},k:{code:"K"},kaaba:{code:"\uf66b"},key:{code:"\uf084"},keyboard:{code:"\uf11c"},khanda:{code:"\uf66d"},"kip-sign":{code:"\ue1c4"},"kit-medical":{code:"\uf479"},"first-aid":{code:"\uf479"},"kitchen-set":{code:"\ue51a"},"kiwi-bird":{code:"\uf535"},l:{code:"L"},"land-mine-on":{code:"\ue51b"},landmark:{code:"\uf66f"},"landmark-dome":{code:"\uf752"},"landmark-alt":{code:"\uf752"},"landmark-flag":{code:"\ue51c"},
language:{code:"\uf1ab"},laptop:{code:"\uf109"},"laptop-code":{code:"\uf5fc"},"laptop-file":{code:"\ue51d"},"laptop-medical":{code:"\uf812"},"lari-sign":{code:"\ue1c8"},"layer-group":{code:"\uf5fd"},leaf:{code:"\uf06c"},"left-long":{code:"\uf30a"},"long-arrow-alt-left":{code:"\uf30a"},"left-right":{code:"\uf337"},"arrows-alt-h":{code:"\uf337"},lemon:{code:"\uf094"},"less-than":{code:"<"},"less-than-equal":{code:"\uf537"},"life-ring":{code:"\uf1cd"},lightbulb:{code:"\uf0eb"},"lines-leaning":{code:"\ue51e"},
link:{code:"\uf0c1"},chain:{code:"\uf0c1"},"link-slash":{code:"\uf127"},"chain-broken":{code:"\uf127"},"chain-slash":{code:"\uf127"},unlink:{code:"\uf127"},"lira-sign":{code:"\uf195"},list:{code:"\uf03a"},"list-squares":{code:"\uf03a"},"list-check":{code:"\uf0ae"},tasks:{code:"\uf0ae"},"list-ol":{code:"\uf0cb"},"list-1-2":{code:"\uf0cb"},"list-numeric":{code:"\uf0cb"},"list-ul":{code:"\uf0ca"},"list-dots":{code:"\uf0ca"},"litecoin-sign":{code:"\ue1d3"},"location-arrow":{code:"\uf124"},"location-crosshairs":{code:"\uf601"},
location:{code:"\uf601"},"location-dot":{code:"\uf3c5"},"map-marker-alt":{code:"\uf3c5"},"location-pin":{code:"\uf041"},"map-marker":{code:"\uf041"},"location-pin-lock":{code:"\ue51f"},lock:{code:"\uf023"},"lock-open":{code:"\uf3c1"},locust:{code:"\ue520"},lungs:{code:"\uf604"},"lungs-virus":{code:"\ue067"},m:{code:"M"},magnet:{code:"\uf076"},"magnifying-glass":{code:"\uf002"},search:{code:"\uf002"},"magnifying-glass-arrow-right":{code:"\ue521"},"magnifying-glass-chart":{code:"\ue522"},"magnifying-glass-dollar":{code:"\uf688"},
"search-dollar":{code:"\uf688"},"magnifying-glass-location":{code:"\uf689"},"search-location":{code:"\uf689"},"magnifying-glass-minus":{code:"\uf010"},"search-minus":{code:"\uf010"},"magnifying-glass-plus":{code:"\uf00e"},"search-plus":{code:"\uf00e"},"manat-sign":{code:"\ue1d5"},map:{code:"\uf279"},"map-location":{code:"\uf59f"},"map-marked":{code:"\uf59f"},"map-location-dot":{code:"\uf5a0"},"map-marked-alt":{code:"\uf5a0"},"map-pin":{code:"\uf276"},marker:{code:"\uf5a1"},mars:{code:"\uf222"},"mars-and-venus":{code:"\uf224"},
"mars-and-venus-burst":{code:"\ue523"},"mars-double":{code:"\uf227"},"mars-stroke":{code:"\uf229"},"mars-stroke-right":{code:"\uf22b"},"mars-stroke-h":{code:"\uf22b"},"mars-stroke-up":{code:"\uf22a"},"mars-stroke-v":{code:"\uf22a"},"martini-glass":{code:"\uf57b"},"glass-martini-alt":{code:"\uf57b"},"martini-glass-citrus":{code:"\uf561"},cocktail:{code:"\uf561"},"martini-glass-empty":{code:"\uf000"},"glass-martini":{code:"\uf000"},mask:{code:"\uf6fa"},"mask-face":{code:"\ue1d7"},"mask-ventilator":{code:"\ue524"},
"masks-theater":{code:"\uf630"},"theater-masks":{code:"\uf630"},"mattress-pillow":{code:"\ue525"},maximize:{code:"\uf31e"},"expand-arrows-alt":{code:"\uf31e"},medal:{code:"\uf5a2"},memory:{code:"\uf538"},menorah:{code:"\uf676"},mercury:{code:"\uf223"},message:{code:"\uf27a"},"comment-alt":{code:"\uf27a"},meteor:{code:"\uf753"},microchip:{code:"\uf2db"},microphone:{code:"\uf130"},"microphone-lines":{code:"\uf3c9"},"microphone-alt":{code:"\uf3c9"},"microphone-lines-slash":{code:"\uf539"},"microphone-alt-slash":{code:"\uf539"},
"microphone-slash":{code:"\uf131"},microscope:{code:"\uf610"},"mill-sign":{code:"\ue1ed"},minimize:{code:"\uf78c"},"compress-arrows-alt":{code:"\uf78c"},minus:{code:"\uf068"},subtract:{code:"\uf068"},mitten:{code:"\uf7b5"},mobile:{code:"\uf3ce"},"mobile-android":{code:"\uf3ce"},"mobile-phone":{code:"\uf3ce"},"mobile-button":{code:"\uf10b"},"mobile-retro":{code:"\ue527"},"mobile-screen":{code:"\uf3cf"},"mobile-android-alt":{code:"\uf3cf"},"mobile-screen-button":{code:"\uf3cd"},"mobile-alt":{code:"\uf3cd"},
"money-bill":{code:"\uf0d6"},"money-bill-1":{code:"\uf3d1"},"money-bill-alt":{code:"\uf3d1"},"money-bill-1-wave":{code:"\uf53b"},"money-bill-wave-alt":{code:"\uf53b"},"money-bill-transfer":{code:"\ue528"},"money-bill-trend-up":{code:"\ue529"},"money-bill-wave":{code:"\uf53a"},"money-bill-wheat":{code:"\ue52a"},"money-bills":{code:"\ue1f3"},"money-check":{code:"\uf53c"},"money-check-dollar":{code:"\uf53d"},"money-check-alt":{code:"\uf53d"},monument:{code:"\uf5a6"},moon:{code:"\uf186"},"mortar-pestle":{code:"\uf5a7"},
mosque:{code:"\uf678"},mosquito:{code:"\ue52b"},"mosquito-net":{code:"\ue52c"},motorcycle:{code:"\uf21c"},mound:{code:"\ue52d"},mountain:{code:"\uf6fc"},"mountain-city":{code:"\ue52e"},"mountain-sun":{code:"\ue52f"},"mug-hot":{code:"\uf7b6"},"mug-saucer":{code:"\uf0f4"},coffee:{code:"\uf0f4"},music:{code:"\uf001"},n:{code:"N"},"naira-sign":{code:"\ue1f6"},"network-wired":{code:"\uf6ff"},neuter:{code:"\uf22c"},newspaper:{code:"\uf1ea"},"not-equal":{code:"\uf53e"},"note-sticky":{code:"\uf249"},"sticky-note":{code:"\uf249"},
"notes-medical":{code:"\uf481"},o:{code:"O"},"object-group":{code:"\uf247"},"object-ungroup":{code:"\uf248"},"oil-can":{code:"\uf613"},"oil-well":{code:"\ue532"},om:{code:"\uf679"},otter:{code:"\uf700"},outdent:{code:"\uf03b"},dedent:{code:"\uf03b"},p:{code:"P"},pager:{code:"\uf815"},"paint-roller":{code:"\uf5aa"},paintbrush:{code:"\uf1fc"},"paint-brush":{code:"\uf1fc"},palette:{code:"\uf53f"},pallet:{code:"\uf482"},panorama:{code:"\ue209"},"paper-plane":{code:"\uf1d8"},paperclip:{code:"\uf0c6"},
"parachute-box":{code:"\uf4cd"},paragraph:{code:"\uf1dd"},passport:{code:"\uf5ab"},paste:{code:"\uf0ea"},"file-clipboard":{code:"\uf0ea"},pause:{code:"\uf04c"},paw:{code:"\uf1b0"},peace:{code:"\uf67c"},pen:{code:"\uf304"},"pen-clip":{code:"\uf305"},"pen-alt":{code:"\uf305"},"pen-fancy":{code:"\uf5ac"},"pen-nib":{code:"\uf5ad"},"pen-ruler":{code:"\uf5ae"},"pencil-ruler":{code:"\uf5ae"},"pen-to-square":{code:"\uf044"},edit:{code:"\uf044"},pencil:{code:"\uf303"},"pencil-alt":{code:"\uf303"},"people-arrows-left-right":{code:"\ue068"},
"people-arrows":{code:"\ue068"},"people-carry-box":{code:"\uf4ce"},"people-carry":{code:"\uf4ce"},"people-group":{code:"\ue533"},"people-line":{code:"\ue534"},"people-pulling":{code:"\ue535"},"people-robbery":{code:"\ue536"},"people-roof":{code:"\ue537"},"pepper-hot":{code:"\uf816"},percent:{code:"%"},percentage:{code:"%"},person:{code:"\uf183"},male:{code:"\uf183"},"person-arrow-down-to-line":{code:"\ue538"},"person-arrow-up-from-line":{code:"\ue539"},"person-biking":{code:"\uf84a"},biking:{code:"\uf84a"},
"person-booth":{code:"\uf756"},"person-breastfeeding":{code:"\ue53a"},"person-burst":{code:"\ue53b"},"person-cane":{code:"\ue53c"},"person-chalkboard":{code:"\ue53d"},"person-circle-check":{code:"\ue53e"},"person-circle-exclamation":{code:"\ue53f"},"person-circle-minus":{code:"\ue540"},"person-circle-plus":{code:"\ue541"},"person-circle-question":{code:"\ue542"},"person-circle-xmark":{code:"\ue543"},"person-digging":{code:"\uf85e"},digging:{code:"\uf85e"},"person-dots-from-line":{code:"\uf470"},diagnoses:{code:"\uf470"},
"person-dress":{code:"\uf182"},female:{code:"\uf182"},"person-dress-burst":{code:"\ue544"},"person-drowning":{code:"\ue545"},"person-falling":{code:"\ue546"},"person-falling-burst":{code:"\ue547"},"person-half-dress":{code:"\ue548"},"person-harassing":{code:"\ue549"},"person-hiking":{code:"\uf6ec"},hiking:{code:"\uf6ec"},"person-military-pointing":{code:"\ue54a"},"person-military-rifle":{code:"\ue54b"},"person-military-to-person":{code:"\ue54c"},"person-praying":{code:"\uf683"},pray:{code:"\uf683"},
"person-pregnant":{code:"\ue31e"},"person-rays":{code:"\ue54d"},"person-rifle":{code:"\ue54e"},"person-running":{code:"\uf70c"},running:{code:"\uf70c"},"person-shelter":{code:"\ue54f"},"person-skating":{code:"\uf7c5"},skating:{code:"\uf7c5"},"person-skiing":{code:"\uf7c9"},skiing:{code:"\uf7c9"},"person-skiing-nordic":{code:"\uf7ca"},"skiing-nordic":{code:"\uf7ca"},"person-snowboarding":{code:"\uf7ce"},snowboarding:{code:"\uf7ce"},"person-swimming":{code:"\uf5c4"},swimmer:{code:"\uf5c4"},"person-through-window":{code:"\ue433"},
"person-walking":{code:"\uf554"},walking:{code:"\uf554"},"person-walking-arrow-loop-left":{code:"\ue551"},"person-walking-arrow-right":{code:"\ue552"},"person-walking-dashed-line-arrow-right":{code:"\ue553"},"person-walking-luggage":{code:"\ue554"},"person-walking-with-cane":{code:"\uf29d"},blind:{code:"\uf29d"},"peseta-sign":{code:"\ue221"},"peso-sign":{code:"\ue222"},phone:{code:"\uf095"},"phone-flip":{code:"\uf879"},"phone-alt":{code:"\uf879"},"phone-slash":{code:"\uf3dd"},"phone-volume":{code:"\uf2a0"},
"volume-control-phone":{code:"\uf2a0"},"photo-film":{code:"\uf87c"},"photo-video":{code:"\uf87c"},"piggy-bank":{code:"\uf4d3"},pills:{code:"\uf484"},"pizza-slice":{code:"\uf818"},"place-of-worship":{code:"\uf67f"},plane:{code:"\uf072"},"plane-arrival":{code:"\uf5af"},"plane-circle-check":{code:"\ue555"},"plane-circle-exclamation":{code:"\ue556"},"plane-circle-xmark":{code:"\ue557"},"plane-departure":{code:"\uf5b0"},"plane-lock":{code:"\ue558"},"plane-slash":{code:"\ue069"},"plane-up":{code:"\ue22d"},
"plant-wilt":{code:"\ue43b"},"plate-wheat":{code:"\ue55a"},play:{code:"\uf04b"},plug:{code:"\uf1e6"},"plug-circle-bolt":{code:"\ue55b"},"plug-circle-check":{code:"\ue55c"},"plug-circle-exclamation":{code:"\ue55d"},"plug-circle-minus":{code:"\ue55e"},"plug-circle-plus":{code:"\ue55f"},"plug-circle-xmark":{code:"\ue560"},plus:{code:"+"},add:{code:"+"},"plus-minus":{code:"\ue43c"},podcast:{code:"\uf2ce"},poo:{code:"\uf2fe"},"poo-storm":{code:"\uf75a"},"poo-bolt":{code:"\uf75a"},poop:{code:"\uf619"},
"power-off":{code:"\uf011"},prescription:{code:"\uf5b1"},"prescription-bottle":{code:"\uf485"},"prescription-bottle-medical":{code:"\uf486"},"prescription-bottle-alt":{code:"\uf486"},print:{code:"\uf02f"},"pump-medical":{code:"\ue06a"},"pump-soap":{code:"\ue06b"},"puzzle-piece":{code:"\uf12e"},q:{code:"Q"},qrcode:{code:"\uf029"},question:{code:"?"},"quote-left":{code:"\uf10d"},"quote-left-alt":{code:"\uf10d"},"quote-right":{code:"\uf10e"},"quote-right-alt":{code:"\uf10e"},r:{code:"R"},radiation:{code:"\uf7b9"},
radio:{code:"\uf8d7"},rainbow:{code:"\uf75b"},"ranking-star":{code:"\ue561"},receipt:{code:"\uf543"},"record-vinyl":{code:"\uf8d9"},"rectangle-ad":{code:"\uf641"},ad:{code:"\uf641"},"rectangle-list":{code:"\uf022"},"list-alt":{code:"\uf022"},"rectangle-xmark":{code:"\uf410"},"rectangle-times":{code:"\uf410"},"times-rectangle":{code:"\uf410"},"window-close":{code:"\uf410"},recycle:{code:"\uf1b8"},registered:{code:"\uf25d"},repeat:{code:"\uf363"},reply:{code:"\uf3e5"},"mail-reply":{code:"\uf3e5"},"reply-all":{code:"\uf122"},
"mail-reply-all":{code:"\uf122"},republican:{code:"\uf75e"},restroom:{code:"\uf7bd"},retweet:{code:"\uf079"},ribbon:{code:"\uf4d6"},"right-from-bracket":{code:"\uf2f5"},"sign-out-alt":{code:"\uf2f5"},"right-left":{code:"\uf362"},"exchange-alt":{code:"\uf362"},"right-long":{code:"\uf30b"},"long-arrow-alt-right":{code:"\uf30b"},"right-to-bracket":{code:"\uf2f6"},"sign-in-alt":{code:"\uf2f6"},ring:{code:"\uf70b"},road:{code:"\uf018"},"road-barrier":{code:"\ue562"},"road-bridge":{code:"\ue563"},"road-circle-check":{code:"\ue564"},
"road-circle-exclamation":{code:"\ue565"},"road-circle-xmark":{code:"\ue566"},"road-lock":{code:"\ue567"},"road-spikes":{code:"\ue568"},robot:{code:"\uf544"},rocket:{code:"\uf135"},rotate:{code:"\uf2f1"},"sync-alt":{code:"\uf2f1"},"rotate-left":{code:"\uf2ea"},"rotate-back":{code:"\uf2ea"},"rotate-backward":{code:"\uf2ea"},"undo-alt":{code:"\uf2ea"},"rotate-right":{code:"\uf2f9"},"redo-alt":{code:"\uf2f9"},"rotate-forward":{code:"\uf2f9"},route:{code:"\uf4d7"},rss:{code:"\uf09e"},feed:{code:"\uf09e"},
"ruble-sign":{code:"\uf158"},rouble:{code:"\uf158"},rub:{code:"\uf158"},ruble:{code:"\uf158"},rug:{code:"\ue569"},ruler:{code:"\uf545"},"ruler-combined":{code:"\uf546"},"ruler-horizontal":{code:"\uf547"},"ruler-vertical":{code:"\uf548"},"rupee-sign":{code:"\uf156"},rupee:{code:"\uf156"},"rupiah-sign":{code:"\ue23d"},s:{code:"S"},"sack-dollar":{code:"\uf81d"},"sack-xmark":{code:"\ue56a"},sailboat:{code:"\ue445"},satellite:{code:"\uf7bf"},"satellite-dish":{code:"\uf7c0"},"scale-balanced":{code:"\uf24e"},
"balance-scale":{code:"\uf24e"},"scale-unbalanced":{code:"\uf515"},"balance-scale-left":{code:"\uf515"},"scale-unbalanced-flip":{code:"\uf516"},"balance-scale-right":{code:"\uf516"},school:{code:"\uf549"},"school-circle-check":{code:"\ue56b"},"school-circle-exclamation":{code:"\ue56c"},"school-circle-xmark":{code:"\ue56d"},"school-flag":{code:"\ue56e"},"school-lock":{code:"\ue56f"},scissors:{code:"\uf0c4"},cut:{code:"\uf0c4"},screwdriver:{code:"\uf54a"},"screwdriver-wrench":{code:"\uf7d9"},tools:{code:"\uf7d9"},
scroll:{code:"\uf70e"},"scroll-torah":{code:"\uf6a0"},torah:{code:"\uf6a0"},"sd-card":{code:"\uf7c2"},section:{code:"\ue447"},seedling:{code:"\uf4d8"},sprout:{code:"\uf4d8"},server:{code:"\uf233"},shapes:{code:"\uf61f"},"triangle-circle-square":{code:"\uf61f"},share:{code:"\uf064"},"arrow-turn-right":{code:"\uf064"},"mail-forward":{code:"\uf064"},"share-from-square":{code:"\uf14d"},"share-square":{code:"\uf14d"},"share-nodes":{code:"\uf1e0"},"share-alt":{code:"\uf1e0"},"sheet-plastic":{code:"\ue571"},
"shekel-sign":{code:"\uf20b"},ils:{code:"\uf20b"},shekel:{code:"\uf20b"},sheqel:{code:"\uf20b"},"sheqel-sign":{code:"\uf20b"},shield:{code:"\uf132"},"shield-blank":{code:"\uf132"},"shield-cat":{code:"\ue572"},"shield-dog":{code:"\ue573"},"shield-halved":{code:"\uf3ed"},"shield-alt":{code:"\uf3ed"},"shield-heart":{code:"\ue574"},"shield-virus":{code:"\ue06c"},ship:{code:"\uf21a"},shirt:{code:"\uf553"},"t-shirt":{code:"\uf553"},tshirt:{code:"\uf553"},"shoe-prints":{code:"\uf54b"},shop:{code:"\uf54f"},
"store-alt":{code:"\uf54f"},"shop-lock":{code:"\ue4a5"},"shop-slash":{code:"\ue070"},"store-alt-slash":{code:"\ue070"},shower:{code:"\uf2cc"},shrimp:{code:"\ue448"},shuffle:{code:"\uf074"},random:{code:"\uf074"},"shuttle-space":{code:"\uf197"},"space-shuttle":{code:"\uf197"},"sign-hanging":{code:"\uf4d9"},sign:{code:"\uf4d9"},signal:{code:"\uf012"},"signal-5":{code:"\uf012"},"signal-perfect":{code:"\uf012"},signature:{code:"\uf5b7"},"signs-post":{code:"\uf277"},"map-signs":{code:"\uf277"},"sim-card":{code:"\uf7c4"},
sink:{code:"\ue06d"},sitemap:{code:"\uf0e8"},skull:{code:"\uf54c"},"skull-crossbones":{code:"\uf714"},slash:{code:"\uf715"},sleigh:{code:"\uf7cc"},sliders:{code:"\uf1de"},"sliders-h":{code:"\uf1de"},smog:{code:"\uf75f"},smoking:{code:"\uf48d"},snowflake:{code:"\uf2dc"},snowman:{code:"\uf7d0"},snowplow:{code:"\uf7d2"},soap:{code:"\ue06e"},socks:{code:"\uf696"},"solar-panel":{code:"\uf5ba"},sort:{code:"\uf0dc"},unsorted:{code:"\uf0dc"},"sort-down":{code:"\uf0dd"},"sort-desc":{code:"\uf0dd"},"sort-up":{code:"\uf0de"},
"sort-asc":{code:"\uf0de"},spa:{code:"\uf5bb"},"spaghetti-monster-flying":{code:"\uf67b"},pastafarianism:{code:"\uf67b"},"spell-check":{code:"\uf891"},spider:{code:"\uf717"},spinner:{code:"\uf110"},splotch:{code:"\uf5bc"},spoon:{code:"\uf2e5"},"utensil-spoon":{code:"\uf2e5"},"spray-can":{code:"\uf5bd"},"spray-can-sparkles":{code:"\uf5d0"},"air-freshener":{code:"\uf5d0"},square:{code:"\uf0c8"},"square-arrow-up-right":{code:"\uf14c"},"external-link-square":{code:"\uf14c"},"square-caret-down":{code:"\uf150"},
"caret-square-down":{code:"\uf150"},"square-caret-left":{code:"\uf191"},"caret-square-left":{code:"\uf191"},"square-caret-right":{code:"\uf152"},"caret-square-right":{code:"\uf152"},"square-caret-up":{code:"\uf151"},"caret-square-up":{code:"\uf151"},"square-check":{code:"\uf14a"},"check-square":{code:"\uf14a"},"square-envelope":{code:"\uf199"},"envelope-square":{code:"\uf199"},"square-full":{code:"\uf45c"},"square-h":{code:"\uf0fd"},"h-square":{code:"\uf0fd"},"square-minus":{code:"\uf146"},"minus-square":{code:"\uf146"},
"square-nfi":{code:"\ue576"},"square-parking":{code:"\uf540"},parking:{code:"\uf540"},"square-pen":{code:"\uf14b"},"pen-square":{code:"\uf14b"},"pencil-square":{code:"\uf14b"},"square-person-confined":{code:"\ue577"},"square-phone":{code:"\uf098"},"phone-square":{code:"\uf098"},"square-phone-flip":{code:"\uf87b"},"phone-square-alt":{code:"\uf87b"},"square-plus":{code:"\uf0fe"},"plus-square":{code:"\uf0fe"},"square-poll-horizontal":{code:"\uf682"},"poll-h":{code:"\uf682"},"square-poll-vertical":{code:"\uf681"},
poll:{code:"\uf681"},"square-root-variable":{code:"\uf698"},"square-root-alt":{code:"\uf698"},"square-rss":{code:"\uf143"},"rss-square":{code:"\uf143"},"square-share-nodes":{code:"\uf1e1"},"share-alt-square":{code:"\uf1e1"},"square-up-right":{code:"\uf360"},"external-link-square-alt":{code:"\uf360"},"square-virus":{code:"\ue578"},"square-xmark":{code:"\uf2d3"},"times-square":{code:"\uf2d3"},"xmark-square":{code:"\uf2d3"},"staff-aesculapius":{code:"\ue579"},"rod-asclepius":{code:"\ue579"},"rod-snake":{code:"\ue579"},
"staff-snake":{code:"\ue579"},stairs:{code:"\ue289"},stamp:{code:"\uf5bf"},star:{code:"\uf005"},"star-and-crescent":{code:"\uf699"},"star-half":{code:"\uf089"},"star-half-stroke":{code:"\uf5c0"},"star-half-alt":{code:"\uf5c0"},"star-of-david":{code:"\uf69a"},"star-of-life":{code:"\uf621"},"sterling-sign":{code:"\uf154"},gbp:{code:"\uf154"},"pound-sign":{code:"\uf154"},stethoscope:{code:"\uf0f1"},stop:{code:"\uf04d"},stopwatch:{code:"\uf2f2"},"stopwatch-20":{code:"\ue06f"},store:{code:"\uf54e"},"store-slash":{code:"\ue071"},
"street-view":{code:"\uf21d"},strikethrough:{code:"\uf0cc"},stroopwafel:{code:"\uf551"},subscript:{code:"\uf12c"},suitcase:{code:"\uf0f2"},"suitcase-medical":{code:"\uf0fa"},medkit:{code:"\uf0fa"},"suitcase-rolling":{code:"\uf5c1"},sun:{code:"\uf185"},"sun-plant-wilt":{code:"\ue57a"},superscript:{code:"\uf12b"},swatchbook:{code:"\uf5c3"},synagogue:{code:"\uf69b"},syringe:{code:"\uf48e"},t:{code:"T"},table:{code:"\uf0ce"},"table-cells":{code:"\uf00a"},th:{code:"\uf00a"},"table-cells-large":{code:"\uf009"},
"th-large":{code:"\uf009"},"table-columns":{code:"\uf0db"},columns:{code:"\uf0db"},"table-list":{code:"\uf00b"},"th-list":{code:"\uf00b"},"table-tennis-paddle-ball":{code:"\uf45d"},"ping-pong-paddle-ball":{code:"\uf45d"},"table-tennis":{code:"\uf45d"},tablet:{code:"\uf3fb"},"tablet-android":{code:"\uf3fb"},"tablet-button":{code:"\uf10a"},"tablet-screen-button":{code:"\uf3fa"},"tablet-alt":{code:"\uf3fa"},tablets:{code:"\uf490"},"tachograph-digital":{code:"\uf566"},"digital-tachograph":{code:"\uf566"},
tag:{code:"\uf02b"},tags:{code:"\uf02c"},tape:{code:"\uf4db"},tarp:{code:"\ue57b"},"tarp-droplet":{code:"\ue57c"},taxi:{code:"\uf1ba"},cab:{code:"\uf1ba"},teeth:{code:"\uf62e"},"teeth-open":{code:"\uf62f"},"temperature-arrow-down":{code:"\ue03f"},"temperature-down":{code:"\ue03f"},"temperature-arrow-up":{code:"\ue040"},"temperature-up":{code:"\ue040"},"temperature-empty":{code:"\uf2cb"},"temperature-0":{code:"\uf2cb"},"thermometer-0":{code:"\uf2cb"},"thermometer-empty":{code:"\uf2cb"},"temperature-full":{code:"\uf2c7"},
"temperature-4":{code:"\uf2c7"},"thermometer-4":{code:"\uf2c7"},"thermometer-full":{code:"\uf2c7"},"temperature-half":{code:"\uf2c9"},"temperature-2":{code:"\uf2c9"},"thermometer-2":{code:"\uf2c9"},"thermometer-half":{code:"\uf2c9"},"temperature-high":{code:"\uf769"},"temperature-low":{code:"\uf76b"},"temperature-quarter":{code:"\uf2ca"},"temperature-1":{code:"\uf2ca"},"thermometer-1":{code:"\uf2ca"},"thermometer-quarter":{code:"\uf2ca"},"temperature-three-quarters":{code:"\uf2c8"},"temperature-3":{code:"\uf2c8"},
"thermometer-3":{code:"\uf2c8"},"thermometer-three-quarters":{code:"\uf2c8"},"tenge-sign":{code:"\uf7d7"},tenge:{code:"\uf7d7"},tent:{code:"\ue57d"},"tent-arrow-down-to-line":{code:"\ue57e"},"tent-arrow-left-right":{code:"\ue57f"},"tent-arrow-turn-left":{code:"\ue580"},"tent-arrows-down":{code:"\ue581"},tents:{code:"\ue582"},terminal:{code:"\uf120"},"text-height":{code:"\uf034"},"text-slash":{code:"\uf87d"},"remove-format":{code:"\uf87d"},"text-width":{code:"\uf035"},thermometer:{code:"\uf491"},"thumbs-down":{code:"\uf165"},
"thumbs-up":{code:"\uf164"},thumbtack:{code:"\uf08d"},"thumb-tack":{code:"\uf08d"},ticket:{code:"\uf145"},"ticket-simple":{code:"\uf3ff"},"ticket-alt":{code:"\uf3ff"},timeline:{code:"\ue29c"},"toggle-off":{code:"\uf204"},"toggle-on":{code:"\uf205"},toilet:{code:"\uf7d8"},"toilet-paper":{code:"\uf71e"},"toilet-paper-slash":{code:"\ue072"},"toilet-portable":{code:"\ue583"},"toilets-portable":{code:"\ue584"},toolbox:{code:"\uf552"},tooth:{code:"\uf5c9"},"torii-gate":{code:"\uf6a1"},tornado:{code:"\uf76f"},
"tower-broadcast":{code:"\uf519"},"broadcast-tower":{code:"\uf519"},"tower-cell":{code:"\ue585"},"tower-observation":{code:"\ue586"},tractor:{code:"\uf722"},trademark:{code:"\uf25c"},"traffic-light":{code:"\uf637"},trailer:{code:"\ue041"},train:{code:"\uf238"},"train-subway":{code:"\uf239"},subway:{code:"\uf239"},"train-tram":{code:"\uf7da"},tram:{code:"\uf7da"},transgender:{code:"\uf225"},"transgender-alt":{code:"\uf225"},trash:{code:"\uf1f8"},"trash-arrow-up":{code:"\uf829"},"trash-restore":{code:"\uf829"},
"trash-can":{code:"\uf2ed"},"trash-alt":{code:"\uf2ed"},"trash-can-arrow-up":{code:"\uf82a"},"trash-restore-alt":{code:"\uf82a"},tree:{code:"\uf1bb"},"tree-city":{code:"\ue587"},"triangle-exclamation":{code:"\uf071"},"exclamation-triangle":{code:"\uf071"},warning:{code:"\uf071"},trophy:{code:"\uf091"},trowel:{code:"\ue589"},"trowel-bricks":{code:"\ue58a"},truck:{code:"\uf0d1"},"truck-arrow-right":{code:"\ue58b"},"truck-droplet":{code:"\ue58c"},"truck-fast":{code:"\uf48b"},"shipping-fast":{code:"\uf48b"},
"truck-field":{code:"\ue58d"},"truck-field-un":{code:"\ue58e"},"truck-front":{code:"\ue2b7"},"truck-medical":{code:"\uf0f9"},ambulance:{code:"\uf0f9"},"truck-monster":{code:"\uf63b"},"truck-moving":{code:"\uf4df"},"truck-pickup":{code:"\uf63c"},"truck-plane":{code:"\ue58f"},"truck-ramp-box":{code:"\uf4de"},"truck-loading":{code:"\uf4de"},tty:{code:"\uf1e4"},teletype:{code:"\uf1e4"},"turkish-lira-sign":{code:"\ue2bb"},"try":{code:"\ue2bb"},"turkish-lira":{code:"\ue2bb"},"turn-down":{code:"\uf3be"},
"level-down-alt":{code:"\uf3be"},"turn-up":{code:"\uf3bf"},"level-up-alt":{code:"\uf3bf"},tv:{code:"\uf26c"},television:{code:"\uf26c"},"tv-alt":{code:"\uf26c"},u:{code:"U"},umbrella:{code:"\uf0e9"},"umbrella-beach":{code:"\uf5ca"},underline:{code:"\uf0cd"},"universal-access":{code:"\uf29a"},unlock:{code:"\uf09c"},"unlock-keyhole":{code:"\uf13e"},"unlock-alt":{code:"\uf13e"},"up-down":{code:"\uf338"},"arrows-alt-v":{code:"\uf338"},"up-down-left-right":{code:"\uf0b2"},"arrows-alt":{code:"\uf0b2"},
"up-long":{code:"\uf30c"},"long-arrow-alt-up":{code:"\uf30c"},"up-right-and-down-left-from-center":{code:"\uf424"},"expand-alt":{code:"\uf424"},"up-right-from-square":{code:"\uf35d"},"external-link-alt":{code:"\uf35d"},upload:{code:"\uf093"},user:{code:"\uf007"},"user-astronaut":{code:"\uf4fb"},"user-check":{code:"\uf4fc"},"user-clock":{code:"\uf4fd"},"user-doctor":{code:"\uf0f0"},"user-md":{code:"\uf0f0"},"user-gear":{code:"\uf4fe"},"user-cog":{code:"\uf4fe"},"user-graduate":{code:"\uf501"},"user-group":{code:"\uf500"},
"user-friends":{code:"\uf500"},"user-injured":{code:"\uf728"},"user-large":{code:"\uf406"},"user-alt":{code:"\uf406"},"user-large-slash":{code:"\uf4fa"},"user-alt-slash":{code:"\uf4fa"},"user-lock":{code:"\uf502"},"user-minus":{code:"\uf503"},"user-ninja":{code:"\uf504"},"user-nurse":{code:"\uf82f"},"user-pen":{code:"\uf4ff"},"user-edit":{code:"\uf4ff"},"user-plus":{code:"\uf234"},"user-secret":{code:"\uf21b"},"user-shield":{code:"\uf505"},"user-slash":{code:"\uf506"},"user-tag":{code:"\uf507"},"user-tie":{code:"\uf508"},
"user-xmark":{code:"\uf235"},"user-times":{code:"\uf235"},users:{code:"\uf0c0"},"users-between-lines":{code:"\ue591"},"users-gear":{code:"\uf509"},"users-cog":{code:"\uf509"},"users-line":{code:"\ue592"},"users-rays":{code:"\ue593"},"users-rectangle":{code:"\ue594"},"users-slash":{code:"\ue073"},"users-viewfinder":{code:"\ue595"},utensils:{code:"\uf2e7"},cutlery:{code:"\uf2e7"},v:{code:"V"},"van-shuttle":{code:"\uf5b6"},"shuttle-van":{code:"\uf5b6"},vault:{code:"\ue2c5"},"vector-square":{code:"\uf5cb"},
venus:{code:"\uf221"},"venus-double":{code:"\uf226"},"venus-mars":{code:"\uf228"},vest:{code:"\ue085"},"vest-patches":{code:"\ue086"},vial:{code:"\uf492"},"vial-circle-check":{code:"\ue596"},"vial-virus":{code:"\ue597"},vials:{code:"\uf493"},video:{code:"\uf03d"},"video-camera":{code:"\uf03d"},"video-slash":{code:"\uf4e2"},vihara:{code:"\uf6a7"},virus:{code:"\ue074"},"virus-covid":{code:"\ue4a8"},"virus-covid-slash":{code:"\ue4a9"},"virus-slash":{code:"\ue075"},viruses:{code:"\ue076"},voicemail:{code:"\uf897"},
volcano:{code:"\uf770"},volleyball:{code:"\uf45f"},"volleyball-ball":{code:"\uf45f"},"volume-high":{code:"\uf028"},"volume-up":{code:"\uf028"},"volume-low":{code:"\uf027"},"volume-down":{code:"\uf027"},"volume-off":{code:"\uf026"},"volume-xmark":{code:"\uf6a9"},"volume-mute":{code:"\uf6a9"},"volume-times":{code:"\uf6a9"},"vr-cardboard":{code:"\uf729"},w:{code:"W"},"walkie-talkie":{code:"\uf8ef"},wallet:{code:"\uf555"},"wand-magic":{code:"\uf0d0"},magic:{code:"\uf0d0"},"wand-magic-sparkles":{code:"\ue2ca"},
"magic-wand-sparkles":{code:"\ue2ca"},"wand-sparkles":{code:"\uf72b"},warehouse:{code:"\uf494"},water:{code:"\uf773"},"water-ladder":{code:"\uf5c5"},"ladder-water":{code:"\uf5c5"},"swimming-pool":{code:"\uf5c5"},"wave-square":{code:"\uf83e"},"weight-hanging":{code:"\uf5cd"},"weight-scale":{code:"\uf496"},weight:{code:"\uf496"},"wheat-awn":{code:"\ue2cd"},"wheat-alt":{code:"\ue2cd"},"wheat-awn-circle-exclamation":{code:"\ue598"},wheelchair:{code:"\uf193"},"wheelchair-move":{code:"\ue2ce"},"wheelchair-alt":{code:"\ue2ce"},
"whiskey-glass":{code:"\uf7a0"},"glass-whiskey":{code:"\uf7a0"},wifi:{code:"\uf1eb"},"wifi-3":{code:"\uf1eb"},"wifi-strong":{code:"\uf1eb"},wind:{code:"\uf72e"},"window-maximize":{code:"\uf2d0"},"window-minimize":{code:"\uf2d1"},"window-restore":{code:"\uf2d2"},"wine-bottle":{code:"\uf72f"},"wine-glass":{code:"\uf4e3"},"wine-glass-empty":{code:"\uf5ce"},"wine-glass-alt":{code:"\uf5ce"},"won-sign":{code:"\uf159"},krw:{code:"\uf159"},won:{code:"\uf159"},worm:{code:"\ue599"},wrench:{code:"\uf0ad"},x:{code:"X"},
"x-ray":{code:"\uf497"},xmark:{code:"\uf00d"},close:{code:"\uf00d"},multiply:{code:"\uf00d"},remove:{code:"\uf00d"},times:{code:"\uf00d"},"xmarks-lines":{code:"\ue59a"},y:{code:"Y"},"yen-sign":{code:"\uf157"},cny:{code:"\uf157"},jpy:{code:"\uf157"},rmb:{code:"\uf157"},yen:{code:"\uf157"},"yin-yang":{code:"\uf6ad"},z:{code:"Z"},"42-group":{code:"\ue080"},innosoft:{code:"\ue080"},"500px":{code:"\uf26e"},"accessible-icon":{code:"\uf368"},accusoft:{code:"\uf369"},adn:{code:"\uf170"},adversal:{code:"\uf36a"},
affiliatetheme:{code:"\uf36b"},airbnb:{code:"\uf834"},algolia:{code:"\uf36c"},alipay:{code:"\uf642"},amazon:{code:"\uf270"},"amazon-pay":{code:"\uf42c"},amilia:{code:"\uf36d"},android:{code:"\uf17b"},angellist:{code:"\uf209"},angrycreative:{code:"\uf36e"},angular:{code:"\uf420"},"app-store":{code:"\uf36f"},"app-store-ios":{code:"\uf370"},apper:{code:"\uf371"},apple:{code:"\uf179"},"apple-pay":{code:"\uf415"},artstation:{code:"\uf77a"},asymmetrik:{code:"\uf372"},atlassian:{code:"\uf77b"},audible:{code:"\uf373"},
autoprefixer:{code:"\uf41c"},avianex:{code:"\uf374"},aviato:{code:"\uf421"},aws:{code:"\uf375"},bandcamp:{code:"\uf2d5"},"battle-net":{code:"\uf835"},behance:{code:"\uf1b4"},"behance-square":{code:"\uf1b5"},bilibili:{code:"\ue3d9"},bimobject:{code:"\uf378"},bitbucket:{code:"\uf171"},bitcoin:{code:"\uf379"},bity:{code:"\uf37a"},"black-tie":{code:"\uf27e"},blackberry:{code:"\uf37b"},blogger:{code:"\uf37c"},"blogger-b":{code:"\uf37d"},bluetooth:{code:"\uf293"},"bluetooth-b":{code:"\uf294"},bootstrap:{code:"\uf836"},
bots:{code:"\ue340"},btc:{code:"\uf15a"},buffer:{code:"\uf837"},buromobelexperte:{code:"\uf37f"},"buy-n-large":{code:"\uf8a6"},buysellads:{code:"\uf20d"},"canadian-maple-leaf":{code:"\uf785"},"cc-amazon-pay":{code:"\uf42d"},"cc-amex":{code:"\uf1f3"},"cc-apple-pay":{code:"\uf416"},"cc-diners-club":{code:"\uf24c"},"cc-discover":{code:"\uf1f2"},"cc-jcb":{code:"\uf24b"},"cc-mastercard":{code:"\uf1f1"},"cc-paypal":{code:"\uf1f4"},"cc-stripe":{code:"\uf1f5"},"cc-visa":{code:"\uf1f0"},centercode:{code:"\uf380"},
centos:{code:"\uf789"},chrome:{code:"\uf268"},chromecast:{code:"\uf838"},cloudflare:{code:"\ue07d"},cloudscale:{code:"\uf383"},cloudsmith:{code:"\uf384"},cloudversify:{code:"\uf385"},cmplid:{code:"\ue360"},codepen:{code:"\uf1cb"},codiepie:{code:"\uf284"},confluence:{code:"\uf78d"},connectdevelop:{code:"\uf20e"},contao:{code:"\uf26d"},"cotton-bureau":{code:"\uf89e"},cpanel:{code:"\uf388"},"creative-commons":{code:"\uf25e"},"creative-commons-by":{code:"\uf4e7"},"creative-commons-nc":{code:"\uf4e8"},
"creative-commons-nc-eu":{code:"\uf4e9"},"creative-commons-nc-jp":{code:"\uf4ea"},"creative-commons-nd":{code:"\uf4eb"},"creative-commons-pd":{code:"\uf4ec"},"creative-commons-pd-alt":{code:"\uf4ed"},"creative-commons-remix":{code:"\uf4ee"},"creative-commons-sa":{code:"\uf4ef"},"creative-commons-sampling":{code:"\uf4f0"},"creative-commons-sampling-plus":{code:"\uf4f1"},"creative-commons-share":{code:"\uf4f2"},"creative-commons-zero":{code:"\uf4f3"},"critical-role":{code:"\uf6c9"},css3:{code:"\uf13c"},
"css3-alt":{code:"\uf38b"},cuttlefish:{code:"\uf38c"},"d-and-d":{code:"\uf38d"},"d-and-d-beyond":{code:"\uf6ca"},dailymotion:{code:"\ue052"},dashcube:{code:"\uf210"},deezer:{code:"\ue077"},delicious:{code:"\uf1a5"},deploydog:{code:"\uf38e"},deskpro:{code:"\uf38f"},dev:{code:"\uf6cc"},deviantart:{code:"\uf1bd"},dhl:{code:"\uf790"},diaspora:{code:"\uf791"},digg:{code:"\uf1a6"},"digital-ocean":{code:"\uf391"},discord:{code:"\uf392"},discourse:{code:"\uf393"},dochub:{code:"\uf394"},docker:{code:"\uf395"},
draft2digital:{code:"\uf396"},dribbble:{code:"\uf17d"},"dribbble-square":{code:"\uf397"},dropbox:{code:"\uf16b"},drupal:{code:"\uf1a9"},dyalog:{code:"\uf399"},earlybirds:{code:"\uf39a"},ebay:{code:"\uf4f4"},edge:{code:"\uf282"},"edge-legacy":{code:"\ue078"},elementor:{code:"\uf430"},ello:{code:"\uf5f1"},ember:{code:"\uf423"},empire:{code:"\uf1d1"},envira:{code:"\uf299"},erlang:{code:"\uf39d"},ethereum:{code:"\uf42e"},etsy:{code:"\uf2d7"},evernote:{code:"\uf839"},expeditedssl:{code:"\uf23e"},facebook:{code:"\uf09a"},
"facebook-f":{code:"\uf39e"},"facebook-messenger":{code:"\uf39f"},"facebook-square":{code:"\uf082"},"fantasy-flight-games":{code:"\uf6dc"},fedex:{code:"\uf797"},fedora:{code:"\uf798"},figma:{code:"\uf799"},firefox:{code:"\uf269"},"firefox-browser":{code:"\ue007"},"first-order":{code:"\uf2b0"},"first-order-alt":{code:"\uf50a"},firstdraft:{code:"\uf3a1"},flickr:{code:"\uf16e"},flipboard:{code:"\uf44d"},fly:{code:"\uf417"},"font-awesome":{code:"\uf2b4"},"font-awesome-flag":{code:"\uf2b4"},"font-awesome-logo-full":{code:"\uf2b4"},
fonticons:{code:"\uf280"},"fonticons-fi":{code:"\uf3a2"},"fort-awesome":{code:"\uf286"},"fort-awesome-alt":{code:"\uf3a3"},forumbee:{code:"\uf211"},foursquare:{code:"\uf180"},"free-code-camp":{code:"\uf2c5"},freebsd:{code:"\uf3a4"},fulcrum:{code:"\uf50b"},"galactic-republic":{code:"\uf50c"},"galactic-senate":{code:"\uf50d"},"get-pocket":{code:"\uf265"},gg:{code:"\uf260"},"gg-circle":{code:"\uf261"},git:{code:"\uf1d3"},"git-alt":{code:"\uf841"},"git-square":{code:"\uf1d2"},github:{code:"\uf09b"},"github-alt":{code:"\uf113"},
"github-square":{code:"\uf092"},gitkraken:{code:"\uf3a6"},gitlab:{code:"\uf296"},gitter:{code:"\uf426"},glide:{code:"\uf2a5"},"glide-g":{code:"\uf2a6"},gofore:{code:"\uf3a7"},golang:{code:"\ue40f"},goodreads:{code:"\uf3a8"},"goodreads-g":{code:"\uf3a9"},google:{code:"\uf1a0"},"google-drive":{code:"\uf3aa"},"google-pay":{code:"\ue079"},"google-play":{code:"\uf3ab"},"google-plus":{code:"\uf2b3"},"google-plus-g":{code:"\uf0d5"},"google-plus-square":{code:"\uf0d4"},"google-wallet":{code:"\uf1ee"},gratipay:{code:"\uf184"},
grav:{code:"\uf2d6"},gripfire:{code:"\uf3ac"},grunt:{code:"\uf3ad"},guilded:{code:"\ue07e"},gulp:{code:"\uf3ae"},"hacker-news":{code:"\uf1d4"},"hacker-news-square":{code:"\uf3af"},hackerrank:{code:"\uf5f7"},hashnode:{code:"\ue499"},hips:{code:"\uf452"},"hire-a-helper":{code:"\uf3b0"},hive:{code:"\ue07f"},hooli:{code:"\uf427"},hornbill:{code:"\uf592"},hotjar:{code:"\uf3b1"},houzz:{code:"\uf27c"},html5:{code:"\uf13b"},hubspot:{code:"\uf3b2"},ideal:{code:"\ue013"},imdb:{code:"\uf2d8"},instagram:{code:"\uf16d"},
"instagram-square":{code:"\ue055"},instalod:{code:"\ue081"},intercom:{code:"\uf7af"},"internet-explorer":{code:"\uf26b"},invision:{code:"\uf7b0"},ioxhost:{code:"\uf208"},"itch-io":{code:"\uf83a"},itunes:{code:"\uf3b4"},"itunes-note":{code:"\uf3b5"},java:{code:"\uf4e4"},"jedi-order":{code:"\uf50e"},jenkins:{code:"\uf3b6"},jira:{code:"\uf7b1"},joget:{code:"\uf3b7"},joomla:{code:"\uf1aa"},js:{code:"\uf3b8"},"js-square":{code:"\uf3b9"},jsfiddle:{code:"\uf1cc"},kaggle:{code:"\uf5fa"},keybase:{code:"\uf4f5"},
keycdn:{code:"\uf3ba"},kickstarter:{code:"\uf3bb"},"kickstarter-k":{code:"\uf3bc"},korvue:{code:"\uf42f"},laravel:{code:"\uf3bd"},lastfm:{code:"\uf202"},"lastfm-square":{code:"\uf203"},leanpub:{code:"\uf212"},less:{code:"\uf41d"},line:{code:"\uf3c0"},linkedin:{code:"\uf08c"},"linkedin-in":{code:"\uf0e1"},linode:{code:"\uf2b8"},linux:{code:"\uf17c"},lyft:{code:"\uf3c3"},magento:{code:"\uf3c4"},mailchimp:{code:"\uf59e"},mandalorian:{code:"\uf50f"},markdown:{code:"\uf60f"},mastodon:{code:"\uf4f6"},maxcdn:{code:"\uf136"},
mdb:{code:"\uf8ca"},medapps:{code:"\uf3c6"},medium:{code:"\uf23a"},"medium-m":{code:"\uf23a"},medrt:{code:"\uf3c8"},meetup:{code:"\uf2e0"},megaport:{code:"\uf5a3"},mendeley:{code:"\uf7b3"},microblog:{code:"\ue01a"},microsoft:{code:"\uf3ca"},mix:{code:"\uf3cb"},mixcloud:{code:"\uf289"},mixer:{code:"\ue056"},mizuni:{code:"\uf3cc"},modx:{code:"\uf285"},monero:{code:"\uf3d0"},napster:{code:"\uf3d2"},neos:{code:"\uf612"},"nfc-directional":{code:"\ue530"},"nfc-symbol":{code:"\ue531"},nimblr:{code:"\uf5a8"},
node:{code:"\uf419"},"node-js":{code:"\uf3d3"},npm:{code:"\uf3d4"},ns8:{code:"\uf3d5"},nutritionix:{code:"\uf3d6"},"octopus-deploy":{code:"\ue082"},odnoklassniki:{code:"\uf263"},"odnoklassniki-square":{code:"\uf264"},"old-republic":{code:"\uf510"},opencart:{code:"\uf23d"},openid:{code:"\uf19b"},opera:{code:"\uf26a"},"optin-monster":{code:"\uf23c"},orcid:{code:"\uf8d2"},osi:{code:"\uf41a"},padlet:{code:"\ue4a0"},page4:{code:"\uf3d7"},pagelines:{code:"\uf18c"},palfed:{code:"\uf3d8"},patreon:{code:"\uf3d9"},
paypal:{code:"\uf1ed"},perbyte:{code:"\ue083"},periscope:{code:"\uf3da"},phabricator:{code:"\uf3db"},"phoenix-framework":{code:"\uf3dc"},"phoenix-squadron":{code:"\uf511"},php:{code:"\uf457"},"pied-piper":{code:"\uf2ae"},"pied-piper-alt":{code:"\uf1a8"},"pied-piper-hat":{code:"\uf4e5"},"pied-piper-pp":{code:"\uf1a7"},"pied-piper-square":{code:"\ue01e"},pinterest:{code:"\uf0d2"},"pinterest-p":{code:"\uf231"},"pinterest-square":{code:"\uf0d3"},pix:{code:"\ue43a"},playstation:{code:"\uf3df"},"product-hunt":{code:"\uf288"},
pushed:{code:"\uf3e1"},python:{code:"\uf3e2"},qq:{code:"\uf1d6"},quinscape:{code:"\uf459"},quora:{code:"\uf2c4"},"r-project":{code:"\uf4f7"},"raspberry-pi":{code:"\uf7bb"},ravelry:{code:"\uf2d9"},react:{code:"\uf41b"},reacteurope:{code:"\uf75d"},readme:{code:"\uf4d5"},rebel:{code:"\uf1d0"},"red-river":{code:"\uf3e3"},reddit:{code:"\uf1a1"},"reddit-alien":{code:"\uf281"},"reddit-square":{code:"\uf1a2"},redhat:{code:"\uf7bc"},renren:{code:"\uf18b"},replyd:{code:"\uf3e6"},researchgate:{code:"\uf4f8"},
resolving:{code:"\uf3e7"},rev:{code:"\uf5b2"},rocketchat:{code:"\uf3e8"},rockrms:{code:"\uf3e9"},rust:{code:"\ue07a"},safari:{code:"\uf267"},salesforce:{code:"\uf83b"},sass:{code:"\uf41e"},schlix:{code:"\uf3ea"},screenpal:{code:"\ue570"},scribd:{code:"\uf28a"},searchengin:{code:"\uf3eb"},sellcast:{code:"\uf2da"},sellsy:{code:"\uf213"},servicestack:{code:"\uf3ec"},shirtsinbulk:{code:"\uf214"},shopify:{code:"\ue057"},shopware:{code:"\uf5b5"},simplybuilt:{code:"\uf215"},sistrix:{code:"\uf3ee"},sith:{code:"\uf512"},
sitrox:{code:"\ue44a"},sketch:{code:"\uf7c6"},skyatlas:{code:"\uf216"},skype:{code:"\uf17e"},slack:{code:"\uf198"},"slack-hash":{code:"\uf198"},slideshare:{code:"\uf1e7"},snapchat:{code:"\uf2ab"},"snapchat-ghost":{code:"\uf2ab"},"snapchat-square":{code:"\uf2ad"},soundcloud:{code:"\uf1be"},sourcetree:{code:"\uf7d3"},speakap:{code:"\uf3f3"},"speaker-deck":{code:"\uf83c"},spotify:{code:"\uf1bc"},"square-font-awesome":{code:"\uf425"},"square-font-awesome-stroke":{code:"\uf35c"},"font-awesome-alt":{code:"\uf35c"},
squarespace:{code:"\uf5be"},"stack-exchange":{code:"\uf18d"},"stack-overflow":{code:"\uf16c"},stackpath:{code:"\uf842"},staylinked:{code:"\uf3f5"},steam:{code:"\uf1b6"},"steam-square":{code:"\uf1b7"},"steam-symbol":{code:"\uf3f6"},"sticker-mule":{code:"\uf3f7"},strava:{code:"\uf428"},stripe:{code:"\uf429"},"stripe-s":{code:"\uf42a"},studiovinari:{code:"\uf3f8"},stumbleupon:{code:"\uf1a4"},"stumbleupon-circle":{code:"\uf1a3"},superpowers:{code:"\uf2dd"},supple:{code:"\uf3f9"},suse:{code:"\uf7d6"},
swift:{code:"\uf8e1"},symfony:{code:"\uf83d"},teamspeak:{code:"\uf4f9"},telegram:{code:"\uf2c6"},"telegram-plane":{code:"\uf2c6"},"tencent-weibo":{code:"\uf1d5"},"the-red-yeti":{code:"\uf69d"},themeco:{code:"\uf5c6"},themeisle:{code:"\uf2b2"},"think-peaks":{code:"\uf731"},tiktok:{code:"\ue07b"},"trade-federation":{code:"\uf513"},trello:{code:"\uf181"},tumblr:{code:"\uf173"},"tumblr-square":{code:"\uf174"},twitch:{code:"\uf1e8"},twitter:{code:"\uf099"},"twitter-square":{code:"\uf081"},typo3:{code:"\uf42b"},
uber:{code:"\uf402"},ubuntu:{code:"\uf7df"},uikit:{code:"\uf403"},umbraco:{code:"\uf8e8"},uncharted:{code:"\ue084"},uniregistry:{code:"\uf404"},unity:{code:"\ue049"},unsplash:{code:"\ue07c"},untappd:{code:"\uf405"},ups:{code:"\uf7e0"},usb:{code:"\uf287"},usps:{code:"\uf7e1"},ussunnah:{code:"\uf407"},vaadin:{code:"\uf408"},viacoin:{code:"\uf237"},viadeo:{code:"\uf2a9"},"viadeo-square":{code:"\uf2aa"},viber:{code:"\uf409"},vimeo:{code:"\uf40a"},"vimeo-square":{code:"\uf194"},"vimeo-v":{code:"\uf27d"},
vine:{code:"\uf1ca"},vk:{code:"\uf189"},vnv:{code:"\uf40b"},vuejs:{code:"\uf41f"},"watchman-monitoring":{code:"\ue087"},waze:{code:"\uf83f"},weebly:{code:"\uf5cc"},weibo:{code:"\uf18a"},weixin:{code:"\uf1d7"},whatsapp:{code:"\uf232"},"whatsapp-square":{code:"\uf40c"},whmcs:{code:"\uf40d"},"wikipedia-w":{code:"\uf266"},windows:{code:"\uf17a"},wirsindhandwerk:{code:"\ue2d0"},wsh:{code:"\ue2d0"},wix:{code:"\uf5cf"},"wizards-of-the-coast":{code:"\uf730"},wodu:{code:"\ue088"},"wolf-pack-battalion":{code:"\uf514"},
wordpress:{code:"\uf19a"},"wordpress-simple":{code:"\uf411"},wpbeginner:{code:"\uf297"},wpexplorer:{code:"\uf2de"},wpforms:{code:"\uf298"},wpressr:{code:"\uf3e4"},xbox:{code:"\uf412"},xing:{code:"\uf168"},"xing-square":{code:"\uf169"},"y-combinator":{code:"\uf23b"},yahoo:{code:"\uf19e"},yammer:{code:"\uf840"},yandex:{code:"\uf413"},"yandex-international":{code:"\uf414"},yarn:{code:"\uf7e3"},yelp:{code:"\uf1e9"},yoast:{code:"\uf2b1"},youtube:{code:"\uf167"},"youtube-square":{code:"\uf431"},zhihu:{code:"\uf63f"}};
vo.Icons=rH;vo.Icons=rH;var mf=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js");mf.vdom=vx;mf.promise=ai;mf.arr=mh;mf.tree=pq;mf.obj=nh;mf.string=ji;mf.addOrChangeCSSDeclaration=Zo;mf.addOrChangeLinkedCSS=Ot;mf.defaultStyle=$v;mf.renderGradient=xC;mf.defaultAttributes=aw;mf.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n.hiddenScrollbar {\n  scrollbar-width: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
mf.pathAttributes=wC;mf.svgAttributes=vC;mf.renderMorph=yC;mf.Transform=ox;mf.pt=Ij;mf.getSvgVertices=Zv;mf.canBePromotedToCompositionLayer=tC;mf.config=al;var UA=mf.vdom;mf.h=UA.h;mf.diff=UA.diff;mf.patch=UA.patch;mf.createNode=UA.create;mf.svgNs="http://www.w3.org/2000/svg";mf.CanvasHook=function(b){this.canvasMorph=b};mf.CanvasHook.prototype.hook=function(b,c,g){this.canvasMorph.afterRender(b,this.canvasMorph._canvas!==b&&"CANVAS"==b.tagName)};mf.InitStroke=function(b,c,g){this.path=b;this.renderer=
c;this.reverse=g};mf.InitStroke.prototype.hook=function(b,c,g){c=this.path.drawnProportion||0;0!=c&&(b.setAttribute("stroke-width",this.path.borderWidth.valueOf()+1),b.setAttribute("stroke-dasharray",b.getTotalLength()),b.setAttribute("stroke-dashoffset",b.getTotalLength()*(this.reverse?1-c:-1+(1-c))))};var sH=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js"),g=c.hasOwnProperty("Renderer")&&"function"===typeof c.Renderer?c.Renderer:c.Renderer=function(a){if(!a||
!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d,f){if(!a||!a.isMorph)throw Error("Trying to initialize renderer with an invalid world morph: ".concat(a));if(!(d&&"nodeType"in d))throw Error("Trying to initialize renderer with an invalid root node: ".concat(d));f||(f=d.getRootNode(),f={window:System.global,document:f});this.worldMorph=a;a._renderer=
this;this.rootNode=d;this.domNode=null;this.domEnvironment=f;this.renderMap=new WeakMap;this.fixedMorphNodeMap=new Map;this.renderWorldLoopLater=this.renderWorldLoopProcess=null;this.requestAnimationFrame=f.window.requestAnimationFrame.bind(f.window)}},{key:"clear",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return k=this.domNode,p.prev=1,p.next=4,this.stopRenderWorldLoop();case 4:p.next=8;break;
case 6:p.prev=6,p.t0=p["catch"](1);case 8:k&&(n=k.parentNode,n.removeChild(k),hb(this.fixedMorphNodeMap.values()).forEach(function(q){return n.removeChild(q)})),this.domNode=null,this.renderMap=new WeakMap;case 11:case "end":return p.stop()}},f,this,[[1,6]])}));return function(){return a.apply(this,arguments)}}()},{key:"ensureDefaultCSS",value:function(){var a=this,d=this.worldMorph.env.fontMetric;return mf.promise.waitFor(3E3,function(){return a.domNode.getRootNode()}).then(function(f){return Promise.all([mf.addOrChangeCSSDeclaration("lively-morphic-css",
mf.defaultCSS,f),mf.promise.waitFor(1E3,function(){return d.isFontSupported("IBM Plex Sans")&&d.isFontSupported("IBM Plex Mono")},!1).then(function(k){return!k&&mf.addOrChangeLinkedCSS("lively-ibm-plex",mf.config.css.ibmPlex)}),mf.addOrChangeLinkedCSS("lively-font-awesome",mf.config.css.fontAwesome,f,!1),mf.addOrChangeLinkedCSS("lively-font-inconsolata",mf.config.css.inconsolata,f,!1)])})}},{key:"startRenderWorldLoop",value:function(){var a=this;this._stopped=!1;this._renderWorldLoopLater=null;this.renderWorldLoopProcess=
this.requestAnimationFrame(function(){return a.startRenderWorldLoop()});return this.renderStep()}},{key:"stopRenderWorldLoop",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this._stopped=!0,this.domEnvironment.window.cancelAnimationFrame(this.renderWorldLoopProcess),this.renderWorldLoopProcess=null,this.domEnvironment.window.cancelAnimationFrame(this.renderWorldLoopLater),this.renderWorldLoopLater=
null,n.next=7,mf.promise.waitFor(2E3,function(){return!k.worldMorph.needsRerender()});case 7:case "end":return n.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"renderLater",value:function(){var a=this;this.renderWorldLoopLaterCounter=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;this.renderWorldLoopLater||this._stopped||(this.renderWorldLoopLater=this.requestAnimationFrame(function(){a.renderWorldLoopLater=null;0<a.renderWorldLoopLaterCounter&&a.renderLater(a.renderWorldLoopLaterCounter-
1);try{a.renderStep()}catch(d){console.error("Error rendering morphs:",d)}}))}},{key:"renderStep",value:function(){this.worldMorph.renderAsRoot(this);return this}},{key:"getNodeForMorph",value:function(a){var d="#"+mf.string.regExpEscape(a.id),f=this.domNode&&this.domNode.querySelector(d);this.domNode&&this.domNode.id==a.id&&(f=this.domNode);if(f)return f;a=ba(this.fixedMorphNodeMap.values());var k;try{for(a.s();!(k=a.n()).done;)if(f=k.value.querySelector(d))return f}catch(n){a.e(n)}finally{a.f()}return null}},
{key:"getMorphForNode",value:function(a){return this.worldMorph?this.worldMorph.withAllSubmorphsDetect(function(d){return d.id===a.id}):null}},{key:"render",value:function(a){if(!a.needsRerender()){var d=this.renderMap.get(a);if(d)return d}a.aboutToRender(this);d=a.render(this);this.renderMap.set(a,d);return d}},{key:"renderAsFixed",value:function(a){var d=this.render(a);a.isHTMLMorph||(d.properties.style.position="fixed");if(this.worldMorph.isEmbedded){var f=this.domNode.getBoundingClientRect(),
k=a.origin,n=a.owner,p=a.position,q=Math.round(p.x-k.x-(a._skipWrapping&&n?n.borderWidthLeft:0));k=Math.round(p.y-k.y-(a._skipWrapping&&n?n.borderWidthTop:0));a=mf.canBePromotedToCompositionLayer(a)?mf.pt(0,0):mf.pt(q,k);q=a.x;d.properties.style.top=a.y+f.y+"px";d.properties.style.left=q+f.x+"px"}return d}},{key:"renderFixedMorphs",value:function(a,d){var f=this;d=this.domNode;var k=this.fixedMorphNodeMap;if((a.length||k.size)&&d&&d.parentNode){d=d.parentNode;var n=ba(k),p;try{for(n.s();!(p=n.n()).done;){var q=
Nb(p.value,2),r=q[0],t=q[1];a.includes(r)||(t.parentNode&&t.parentNode.removeChild(t),k["delete"](r))}}catch(Ha){n.e(Ha)}finally{n.f()}p=a.map(function(Ha){return k.get(Ha)});var w=a.map(function(Ha){return Ha.id});q=hb(d.children).map(function(Ha){return Ha.id}).filter(function(Ha){return w.includes(Ha)});q=!mf.arr.equals(w,q);var x=new WeakMap;if(q){var B=new WeakMap;r=mf.arr.compact(a.map(function(Ha){return Ha.withAllSubmorphsDo(function(Va){return f.getNodeForMorph(Va)})}).flat());r.forEach(function(Ha){return B.set(Ha,
Ha.scrollTop)});p.map(function(Ha){return Ha&&Ha.parentNode&&Ha.parentNode.removeChild(Ha)});r.forEach(function(Ha){B.get(Ha)!=Ha.scrollTop&&x.set(Ha,B.get(Ha))})}a=ba(a);var D;try{for(a.s();!(D=a.n()).done;){var F=D.value,L=this.renderMap.get(F)||this.renderAsFixed(F),G=this.renderAsFixed(F),oa=mf.diff(L,G),ha=k.get(F);ha||(ha=mf.createNode(L,this.domEnvironment),k.set(F,ha));ha.parentNode||d.appendChild(ha);q&&F.withAllSubmorphsDo(function(Ha){return f.getNodeForMorph(Ha)}).forEach(function(Ha){x.has(Ha)&&
(Ha.scrollTop=x.get(Ha))});mf.patch(ha,oa)}}catch(Ha){a.e(Ha)}finally{a.f()}}}},{key:"renderMorph",value:function(a){var d=this.renderSubmorphs(a);return mf.h("div",Object.assign({style:mf.defaultStyle(a)},mf.defaultAttributes(a,this)),d)}},{key:"renderEllipse",value:function(a){var d=this.renderSubmorphs(a),f=mf.defaultStyle(a);delete f.borderRadius;f["border-radius"]="50%";return mf.h("div",Object.assign({style:f},mf.defaultAttributes(a,this)),d)}},{key:"renderSubmorphs",value:function(a){return this.renderSelectedSubmorphs(a,
a.submorphs)}},{key:"renderSelectedSubmorphs",value:function(a,d){var f=a.borderWidthLeft,k=a.borderWidthTop,n=a.origin,p=n.x;n=n.y;for(var q=d.length-1,r=Array(q+1),t=a.layout&&a.layout.renderViaCSS;0<=q;q--)r[q]=this.render(d[q]);return t||0==r.length?r:mf.h("div",{key:"submorphs-"+a.id,style:Object.assign({position:"absolute",left:"".concat(p-(a.isPath?0:f),"px"),top:"".concat(n-(a.isPath?0:k),"px")},a.isPolygon?Object.assign({height:"100%",width:"100%",overflow:a.clipMode},"visible"!==a.clipMode?
Pc({},navigator.userAgent.includes("AppleWebKit")?"-webkit-clip-path":"clip-path","url(#clipPath".concat(a.id,")")):{}):{})},r)}},{key:"renderWorld",value:function(a){for(var d=a.submorphs,f=[],k=[],n=0;n<d.length;n++){var p=d[n];p.hasFixedPosition?k.push(p):f.push(p)}d=this.renderSelectedSubmorphs(a,f);a=mf.h("div",Object.assign({},mf.defaultAttributes(a,this),{style:mf.defaultStyle(a)}),d);a.fixedMorphs=k;return a}},{key:"renderImage",value:function(a){var d=a.imageUrl;if(d.startsWith("data:")){var f=
d.indexOf(","),k=d.substring(5,f).split(";"),n=Nb(k,2);k=n[0];n=n[1];f=d.substring(f+1);"base64"!==n&&(d=mf.string.createDataURI(f,k))}return mf.h("div",Object.assign({},mf.defaultAttributes(a,this),{style:mf.defaultStyle(a)}),[mf.h("img",{src:d,alt:a.tooltip||"",draggable:!1,style:{"pointer-events":"none",position:"absolute",left:0,width:"100%",height:"100%"}}),this.renderSubmorphs(a)])}},{key:"renderCanvas",value:function(a){return mf.h("div",Object.assign({},mf.defaultAttributes(a,this),{style:mf.defaultStyle(a)}),
[mf.h("canvas",{width:a.width,height:a.height,style:{"pointer-events":"none",position:"absolute"},canvasHook:new mf.CanvasHook(a)}),this.renderSubmorphs(a)])}},{key:"renderCheckBox",value:function(a){return mf.h("div",Object.assign({},mf.defaultAttributes(a,this),{style:mf.defaultStyle(a)}),[mf.h("input",{type:"checkbox",checked:a.checked,disabled:!a.active,draggable:!1,style:{"pointer-events":"none",width:"15px",height:"15px",position:"absolute"}}),this.renderSubmorphs(a)])}},{key:"renderPath",value:function(a){a.id;
var d=a.startMarker,f=a.endMarker,k=a.showControlPoints;a.origin;a.drawnProportion;a.borderWidth;var n=mf.getSvgVertices(a.vertices),p=mf.h("path",Object.assign({namespace:mf.svgNs,id:"svg"+a.id},mf.pathAttributes(a))),q=mf.h("mask",{namespace:mf.svgNs,id:"mask"+a.id},[mf.h("rect",{namespace:mf.svgNs,attributes:{fill:"white",x:0,y:0,width:a.width+20,height:a.height+20}}),mf.h("path",{namespace:mf.svgNs,initStroke:new mf.InitStroke(a,this,!0),attributes:{d:n,stroke:"black",fill:"none"}}),mf.h("path",
{namespace:mf.svgNs,initStroke:new mf.InitStroke(a,this,!1),attributes:{d:n,stroke:"white",fill:"none"}})]);n=[mf.h("clipPath",{namespace:mf.svgNs,id:"clipPath"+a.id},mf.h("path",{namespace:mf.svgNs,attributes:{d:n,fill:"white"}})),q];d&&(d.id||(d.id="start-marker"),p.properties.attributes["marker-start"]="url(#".concat(a.id,"-").concat(d.id,")"),n=[],n.push(this._renderPath_Marker(a,d)));f&&(f.id||(f.id="end-marker"),p.properties.attributes["marker-end"]="url(#".concat(a.id,"-").concat(f.id,")"),
n||(n=[]),n.push(this._renderPath_Marker(a,f)));var r;k&&(r=mf.h("g",{namespace:mf.svgNs},this._renderPath_ControlPoints(a)));return this.renderSvgMorph(a,p,n,r)}},{key:"_renderPath_ControlPoints",value:function(a,d){function f(oa,ha,Ha,Va,hc,qc){var jc=Va?12:Math.min(8,Math.max(3,p));Ha="path-point path-point-"+Ha;Va=Va?"orange":q;"string"===typeof hc&&(Ha+="-"+hc);qc&&(jc=Math.max(3,Math.ceil(jc/2)));return qc?mf.h("circle",{namespace:mf.svgNs,style:{fill:"white","stroke-width":2,stroke:Va},attributes:{"class":Ha,
cx:oa,cy:ha,r:jc}}):mf.h("circle",{namespace:mf.svgNs,style:{fill:Va},attributes:{"class":Ha,cx:oa,cy:ha,r:jc}})}var k=a.vertices;d=a.borderWidth;var n=a.showControlPoints;a=a._controlPointDrag;var p=0==d?6:d+2,q="red";d=[];if("object"===Jc(n)){var r=n.radius;(n=n.fill)&&(q=String(n));"number"===typeof r&&(p=r)}if(k.length){n=0;var t=k[0];r=t.x;var w=t.y;t=t.controlPoints.next;var x=a&&a.maybeMerge&&a.maybeMerge.includes(n);d.push(f(r,w,n,x));for(n=1;n<k.length-1;n++){var B=k[n];x=B.isSmooth;var D=
B.x,F=B.y,L=B.controlPoints;B=L.previous;L=L.next;var G=a&&a.maybeMerge&&a.maybeMerge.includes(n);x?d.push(f(D,F,n,G),f(r+t.x,w+t.y,n-1,!1,"control-2",!0),f(D+B.x,F+B.y,n,!1,"control-1",!0)):d.push(f(D,F,n,G));r=D;w=F;t=L}F=k[k.length-1];k=F.isSmooth;x=F.x;D=F.y;F=F.controlPoints.previous;a=a&&a.maybeMerge&&a.maybeMerge.includes(n);k?d.push(f(x,D,n,a),f(r+t.x,w+t.y,n-1,!1,"control-2",!0),f(x+F.x,D+F.y,n,!1,"control-1",!0)):d.push(f(x,D,n,a))}return d}},{key:"_renderPath_Marker",value:function(a,d){function f(k){var n=
k.tagName,p=k.id,q=k.children,r=k.style;q=q?q.map(f):void 0;p&&(p=a.id+"-"+p);return mf.h(n,{namespace:mf.svgNs,id:p,style:r,attributes:mf.obj.dissoc(k,["tagName","id","children","style"])},q)}return f(d)}},{key:"renderSvgMorph",value:function(a,d,f){var k=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],n=mf.svgAttributes(a),p=a.innerBounds(),q=p.width;p=p.height;var r,t=[];a.fill&&a.fill.isGradient&&(r||(r=[]),r.push(mf.renderGradient("fill"+a.id,a.extent,a.fill)));a.borderColor&&a.borderColor.valueOf().isGradient&&
(r||(r=[]),r.push(mf.renderGradient("borderColor"+a.id,a.extent,a.borderColor)));if(f&&f.length){var w;r||(r=[]);(w=r).push.apply(w,hb(f))}t.push(d);r&&t.push(mf.h("defs",{namespace:mf.svgNs},r));r=mf.obj.select(mf.defaultStyle(a),"position filter display opacity transform top left transformOrigin cursor overflow".split(" "));return mf.h("div",Object.assign({},mf.defaultAttributes(a,this),{style:Object.assign({},r,{width:q+"px",height:p+"px","pointer-events":a.reactsToPointer?"auto":"none"})}),[mf.h("svg",
Object.assign({namespace:mf.svgNs,version:"1.1",style:{position:"absolute","stroke-linejoin":a.cornerStyle||"mint","stroke-linecap":a.endStyle||"round",overflow:"visible"}},n),t),this.renderSubmorphs(a),mf.h("svg",Object.assign({namespace:mf.svgNs,version:"1.1",style:{position:"absolute",overflow:"visible"}},n),k)])}},{key:"renderPreview",value:function(a,d){var f=d.width;f=void 0===f?100:f;var k=d.height;k=void 0===k?100:k;var n=d.center;n=void 0===n?!0:n;var p=d.ignoreMorphs,q=void 0===p?[]:p;p=
d.asNode;p=void 0===p?!1:p;d.includeStyles;d.disableScroll;a.borderWidthLeft;a.borderWidthTop;a.borderWidthBottom;a.borderWidthRight;d=a.origin;var r=a.rotation,t=Math.max(.1,1/a.scale);t=(new mf.Transform(a.position.negated(),0,mf.pt(t,t))).transformRectToRect(a.bounds());var w=Math.max(.1,Math.min(f/t.width,k/t.height));d=new mf.Transform(t.topLeft().negated().scaleBy(w).subPt(d),r,mf.pt(w,w));r=(r=this.getNodeForMorph(a))?r.cloneNode(!0):mf.renderMorph(a);n&&(a=d.transformRectToRect(a.extent.extentAsRectangle()),
d=d.preConcatenate(new mf.Transform(mf.pt(a.width<f?(f-a.width)/2:0,a.height<k?(k-a.height)/2:0))));r.style.transform=d.toCSSTransformString();r.style.pointerEvents="";mf.tree.prewalk(r,function(x){if("string"===typeof x.className){var B=x.className.split(" ").map(function(D){return D.trim()}).filter(Boolean);B.includes("Morph")&&(x.className=mf.arr.withoutAll(B,["morph","Morph"]).join(" "),q.find(function(D){return D.id===x.id})&&x.remove(),x.id="")}},function(x){return Array.from(x.childNodes)});
return p?r:r.outerHTML}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Renderer"}},{key:"default",value:function(){return this._default||new this}}],c,{pathInPackage:function(){return"./rendering/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1435,end:22855})}(void 0);mf.Renderer=sH;mf.Renderer=
sH;var VA=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),aT=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),g=c.hasOwnProperty("FontDetector")&&"function"===typeof c.FontDetector?c.FontDetector:c.FontDetector=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),
value:function(a){this.document=a;this.prepared=!1;this.defaultWidth={};this.defaultHeight={};this.possibleFontWeights="normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ");this.namedToNumeric=new Map("Thin;Extra Light;Light;Normal;Medium;Semi Bold;Bold;Extra Bold;Ultra Bold".split(";").map(function(d,f){return[d,String(100*(f+1))]}));this.baseFonts=["monospace","sans-serif","serif","Comic Sans MS"];this.span=null}},{key:"prepare",value:function(){var a=this.defaultWidth,d=this.defaultHeight,
f=this.possibleFontWeights,k=this.baseFonts,n=this.document.getElementsByTagName("body")[0],p=this.span||this.document.createElement("span");p.style.fontSize="72px";p.style.opacity=0;p.innerHTML="mmmmmmmmmmlli";if(!p.parentNode){var q=this.document.createElement("div");q.style.position="absolute";q.style.width="100%";q.style.overflow="hidden";q.style["pointer-events"]="none";q.style["-webkit-user-select"]="none";q.appendChild(p);n.appendChild(q)}for(var r in f)for(var t in k)p.style.fontFamily=k[t],
p.style.fontWeight=f[r],a[k[t]+"@"+f[r]]=p.offsetWidth,d[k[t]+"@"+f[r]]=p.offsetHeight;this.span=p;this.prepared=!0}},{key:"isFontSupported",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"normal";this.possibleFontWeights.includes(d)||(d=this.namedToNumeric.get(d)||"normal");this.prepared||this.prepare();var f=this.defaultWidth,k=this.defaultHeight,n=this.baseFonts,p=this.span,q=this.document.body;p.parentNode||q.appendChild(p);for(var r in n)if(p.style.fontWeight=
d,p.style.fontFamily=a+","+n[r],p.offsetWidth!=f[n[r]+"@"+d]||p.offsetHeight!=k[n[r]+"@"+d])return!0;return!1}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"FontDetector"}},{key:"fonts",get:function(){return VA.fonts}}],c,{pathInPackage:function(){return"./rendering/font-detector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:15,end:3610})}(void 0),bT=[{name:"serif",type:"default"},{name:"sans-serif",type:"default"},{name:"monospace",type:"default"},{name:"Adobe Jenson",type:"serif"},{name:"Albertus",type:"serif"},{name:"Aldus",type:"serif"},{name:"Alexandria",type:"serif"},{name:"Algerian",type:"serif"},{name:"American Typewriter",type:"serif"},{name:"Antiqua",type:"serif"},{name:"Arno",type:"serif"},{name:"Aster",type:"serif"},{name:"Aurora",type:"serif"},{name:"News 706",type:"serif"},{name:"Baskerville",type:"serif"},
{name:"Bell",type:"serif"},{name:"Belwe Roman",type:"serif"},{name:"Bembo",type:"serif"},{name:"Berkeley Old Style",type:"serif"},{name:"Bernhard Modern",type:"serif"},{name:"Bodoni",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Bookman",type:"serif"},{name:"Bulmer",type:"serif"},{name:"Caledonia",type:"serif"},{name:"Californian FB",type:"serif"},{name:"Calisto MT",type:"serif"},{name:"Cambria",type:"serif"},{name:"Capitals",type:"serif"},{name:"Cartier",type:"serif"},{name:"Caslon",type:"serif"},
{name:"Wyld",type:"serif"},{name:"Caslon Antique / Fifteenth Century",type:"serif"},{name:"Catull",type:"serif"},{name:"Centaur",type:"serif"},{name:"Century Old Style",type:"serif"},{name:"Century Schoolbook",type:"serif"},{name:"New Century Schoolbook",type:"serif"},{name:"Century Schoolbook Infant",type:"serif"},{name:"Charis SIL",type:"serif"},{name:"Charter (typeface)",type:"serif"},{name:"Cheltenham",type:"serif"},{name:"Clearface",type:"serif"},{name:"Cochin",type:"serif"},{name:"Colonna",
type:"serif"},{name:"Computer Modern",type:"serif"},{name:"Concrete Roman",type:"serif"},{name:"Constantia",type:"serif"},{name:"Cooper Black",type:"serif"},{name:"Copperplate Gothic",type:"serif"},{name:"Corona",type:"serif"},{name:"News 705",type:"serif"},{name:"DejaVu Serif",type:"serif"},{name:"Didot",type:"serif"},{name:"Droid Serif",type:"serif"},{name:"Elephant",type:"serif"},{name:"Emerson",type:"serif"},{name:"Excelsior",type:"serif"},{name:"News 702",type:"serif"},{name:"Fairfield",type:"serif"},
{name:"FF Scala",type:"serif"},{name:"Footlight",type:"serif"},{name:"FreeSerif",type:"serif"},{name:"Friz Quadrata",type:"serif"},{name:"Garamond",type:"serif"},{name:"Gentium",type:"serif"},{name:"Georgia",type:"serif"},{name:"Gloucester",type:"serif"},{name:"Goudy",type:"serif"},{name:"Granjon",type:"serif"},{name:"High Tower Text",type:"serif"},{name:"Hoefler Text",type:"serif"},{name:"Imprint",type:"serif"},{name:"Ionic No. 5",type:"serif"},{name:"News 701",type:"serif"},{name:"ITC Benguiat",
type:"serif"},{name:"Janson",type:"serif"},{name:"Jokerman",type:"serif"},{name:"Joanna",type:"serif"},{name:"Korinna",type:"serif"},{name:"Lexicon",type:"serif"},{name:"Liberation Serif",type:"serif"},{name:"Linux Libertine",type:"serif"},{name:"Literaturnaya",type:"serif"},{name:"Lucida Bright",type:"serif"},{name:"Melior",type:"serif"},{name:"Memphis",type:"serif"},{name:"Miller",type:"serif"},{name:"Minion",type:"serif"},{name:"Modern",type:"serif"},{name:"Mona Lisa",type:"serif"},{name:"Mrs Eaves",
type:"serif"},{name:"MS Serif",type:"serif"},{name:"New York",type:"serif"},{name:"Nimbus Roman",type:"serif"},{name:"NPS Rawlinson Roadway",type:"serif"},{name:"OCR A Extended",type:"serif"},{name:"Palatino",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Perpetua",type:"serif"},{name:"Plantin",type:"serif"},{name:"Playbill",type:"serif"},{name:"Primer",type:"serif"},{name:"Renault",type:"serif"},{name:"Requiem",type:"serif"},{name:"Rotis Serif",type:"serif"},{name:"Sabon",type:"serif"},
{name:"Sistina",type:"serif"},{name:"Souvenir",type:"serif"},{name:"XITS",type:"serif"},{name:"Sylfaen",type:"serif"},{name:"Times New Roman",type:"serif"},{name:"Times",type:"serif"},{name:"Torino",type:"serif"},{name:"Trajan",type:"serif"},{name:"Trinit\u00e9",type:"serif"},{name:"Trump Mediaeval",type:"serif"},{name:"Utopia",type:"serif"},{name:"Vera Serif",type:"serif"},{name:"Wide Latin",type:"serif"},{name:"Windsor",type:"serif"},{name:"XITS",type:"serif"},{name:"Playfair Display",type:"serif",
isGoogleFont:!0},{name:"Cormorant",type:"serif",isGoogleFont:!0},{name:"Eczar",type:"serif",isGoogleFont:!0},{name:"Alegreya",type:"serif",isGoogleFont:!0},{name:"Lora",type:"serif",isGoogleFont:!0},{name:"Source Serif Pro",type:"serif",isGoogleFont:!0},{name:"Roboto Slab",type:"serif",isGoogleFont:!0},{name:"BioRhyme",type:"serif",isGoogleFont:!0},{name:"Libre Baskerville",type:"serif",isGoogleFont:!0},{name:"Crimson Text",type:"serif",isGoogleFont:!0},{name:"Old Standard TT",type:"serif",isGoogleFont:!0},
{name:"Domine",type:"serif",isGoogleFont:!0},{name:"Bitter",type:"serif",isGoogleFont:!0},{name:"Gentium Basic",type:"serif",isGoogleFont:!0},{name:"PT Serif",type:"serif",isGoogleFont:!0},{name:"Cardo",type:"serif",isGoogleFont:!0},{name:"Neuton",type:"serif",isGoogleFont:!0},{name:"Arvo",type:"serif",isGoogleFont:!0},{name:"Merriweather",type:"serif",isGoogleFont:!0},{name:"Alexandria",type:"slab serif"},{name:"American Typewriter",type:"slab serif"},{name:"Archer",type:"slab serif"},{name:"Athens",
type:"slab serif"},{name:"Candida",type:"slab serif"},{name:"Cholla Slab",type:"slab serif"},{name:"City",type:"slab serif"},{name:"Clarendon",type:"slab serif"},{name:"Concrete Roman",type:"slab serif"},{name:"Courier",type:"slab serif"},{name:"Egyptienne",type:"slab serif"},{name:"Guardian Egyptian",type:"slab serif"},{name:"Ionic No. 5",type:"slab serif"},{name:"Lexia",type:"slab serif"},{name:"Memphis",type:"slab serif"},{name:"Nilland",type:"slab serif"},{name:"Roboto Slab",type:"slab serif"},
{name:"Rockwell",type:"slab serif"},{name:"Schadow",type:"slab serif"},{name:"Serifa",type:"slab serif"},{name:"Skeleton Antique",type:"slab serif"},{name:"Sreda",type:"slab serif"},{name:"Swift",type:"slab serif"},{name:"Tower",type:"slab serif"},{name:"Agency FB",type:"sans-serif"},{name:"Akzidenz-Grotesk",type:"sans-serif"},{name:"Andal\u00e9 Sans",type:"sans-serif"},{name:"Antique Olive",type:"sans-serif"},{name:"Arial",type:"sans-serif"},{name:"Arial Unicode MS",type:"sans-serif"},{name:"Avant Garde Gothic",
type:"sans-serif"},{name:"Avenir",type:"sans-serif"},{name:"Bank Gothic",type:"sans-serif"},{name:"Bauhaus",type:"sans-serif"},{name:"Bell Centennial",type:"sans-serif"},{name:"Bell Gothic",type:"sans-serif"},{name:"Benguiat Gothic",type:"sans-serif"},{name:"Berlin Sans",type:"sans-serif"},{name:"Brandon Grotesque",type:"sans-serif"},{name:"Calibri",type:"sans-serif"},{name:"Casey",type:"sans-serif"},{name:"Century Gothic",type:"sans-serif"},{name:"Charcoal",type:"sans-serif"},{name:"Chicago",type:"sans-serif"},
{name:"Clearview",type:"sans-serif"},{name:"Comic Sans",type:"sans-serif"},{name:"Compacta",type:"sans-serif"},{name:"Corbel",type:"sans-serif"},{name:"DejaVu Sans",type:"sans-serif"},{name:"DIN",type:"sans-serif"},{name:"Dotum",type:"sans-serif"},{name:"Droid Sans",type:"sans-serif"},{name:"Dyslexie",type:"sans-serif"},{name:"Ecofont",type:"sans-serif"},{name:"Eras",type:"sans-serif"},{name:"Esseltub",type:"sans-serif"},{name:"Espy Sans",type:"sans-serif"},{name:"Eurocrat",type:"sans-serif"},{name:"Eurostile",
type:"sans-serif"},{name:"Square 721",type:"sans-serif"},{name:"FF Dax",type:"sans-serif"},{name:"FF Meta",type:"sans-serif"},{name:"FF Scala Sans",type:"sans-serif"},{name:"Fira Sans",type:"sans-serif"},{name:"Folio",type:"sans-serif"},{name:"Franklin Gothic",type:"sans-serif"},{name:"FreeSans",type:"sans-serif"},{name:"Frutiger",type:"sans-serif"},{name:"Futura",type:"sans-serif"},{name:"Geneva",type:"sans-serif"},{name:"Gill Sans",type:"sans-serif"},{name:"Gill Sans Schoolbook",type:"sans-serif"},
{name:"Gotham",type:"sans-serif"},{name:"Haettenschweiler",type:"sans-serif"},{name:"Handel Gothic",type:"sans-serif"},{name:"Hei",type:"sans-serif"},{name:"Helvetica",type:"sans-serif"},{name:"Helvetica Neue",type:"sans-serif"},{name:"Swiss 721",type:"sans-serif"},{name:"Highway Gothic",type:"sans-serif"},{name:"Hobo",type:"sans-serif"},{name:"Impact",type:"sans-serif"},{name:"Industria",type:"sans-serif"},{name:"Interstate",type:"sans-serif"},{name:"Johnston/New Johnston",type:"sans-serif"},{name:"Kabel",
type:"sans-serif"},{name:"Klavika",type:"sans-serif"},{name:"Lexia Readable",type:"sans-serif"},{name:"Liberation Sans",type:"sans-serif"},{name:"Linux Biolinum",type:"sans-serif"},{name:"Lucida Sans",type:"sans-serif"},{name:"Lucida Grande",type:"sans-serif"},{name:"Lucida Sans Unicode",type:"sans-serif"},{name:"Lydian",type:"sans-serif"},{name:"Meiryo",type:"sans-serif"},{name:"Meta",type:"sans-serif"},{name:"Microgramma",type:"sans-serif"},{name:"Modern",type:"sans-serif"},{name:"Motorway",type:"sans-serif"},
{name:"Arial",type:"sans-serif"},{name:"Myriad",type:"sans-serif"},{name:"Neutraface",type:"sans-serif"},{name:"Neuzeit S",type:"sans-serif"},{name:"News Gothic",type:"sans-serif"},{name:"Nimbus Sans L",type:"sans-serif"},{name:"Open Sans",type:"sans-serif"},{name:"Optima",type:"sans-serif"},{name:"Paris",type:"sans-serif"},{name:"Product Sans",type:"sans-serif"},{name:"Proxima Nova",type:"sans-serif"},{name:"Russian Federation",type:"sans-serif"},{name:"Rail Alphabet",type:"sans-serif"},{name:"Roboto",
type:"sans-serif"},{name:"Rotis Sans",type:"sans-serif"},{name:"Segoe UI",type:"sans-serif"},{name:"Skia",type:"sans-serif"},{name:"Source Sans Pro",type:"sans-serif"},{name:"Sweden Sans",type:"sans-serif"},{name:"Syntax",type:"sans-serif"},{name:"Tahoma",type:"sans-serif"},{name:"Template Gothic",type:"sans-serif"},{name:"Thesis Sans",type:"sans-serif"},{name:"Tiresias",type:"sans-serif"},{name:"Trade Gothic",type:"sans-serif"},{name:"Transport",type:"sans-serif"},{name:"Trebuchet MS",type:"sans-serif"},
{name:"Twentieth Century (Tw Cen MT)",type:"sans-serif"},{name:"Ubuntu",type:"sans-serif"},{name:"Univers",type:"sans-serif"},{name:"Zurich",type:"sans-serif"},{name:"Vera Sans",type:"sans-serif"},{name:"Verdana",type:"sans-serif"},{name:"Work Sans",type:"sans-serif",isGoogleFont:!0},{name:"Rubik",type:"sans-serif",isGoogleFont:!0},{name:"Libre Franklin",type:"sans-serif",isGoogleFont:!0},{name:"Fira Sans",type:"sans-serif",isGoogleFont:!0},{name:"Alegreya Sans",type:"sans-serif",isGoogleFont:!0},
{name:"Chivo",type:"sans-serif",isGoogleFont:!0},{name:"Source Sans Pro",type:"sans-serif",isGoogleFont:!0},{name:"Roboto",type:"sans-serif",isGoogleFont:!0},{name:"Poppins",type:"sans-serif",isGoogleFont:!0},{name:"Archivo Narrow",type:"sans-serif",isGoogleFont:!0},{name:"Karla",type:"sans-serif",isGoogleFont:!0},{name:"Montserrat",type:"sans-serif",isGoogleFont:!0},{name:"Rajdhani",type:"sans-serif",isGoogleFont:!0},{name:"PT Sans",type:"sans-serif",isGoogleFont:!0},{name:"Lato",type:"sans-serif",
isGoogleFont:!0},{name:"Open Sans",type:"sans-serif",isGoogleFont:!0},{name:"Cabin",type:"sans-serif",isGoogleFont:!0},{name:"Raleway",type:"sans-serif",isGoogleFont:!0},{name:"Nyala",type:"semi-serif"},{name:"Rotis Semi Serif",type:"semi-serif"},{name:"Easyreading",type:"semi-serif"},{name:"Andal\u00e9 Mono",type:"monospace"},{name:"Arial",type:"monospace"},{name:"Bitstream Vera (Vera Sans Mono)",type:"monospace"},{name:"Consolas",type:"monospace"},{name:"Courier",type:"monospace"},{name:"Courier New",
type:"monospace"},{name:"DejaVu Sans Mono",type:"monospace"},{name:"Droid Sans Mono",type:"monospace"},{name:"Everson Mono",type:"monospace"},{name:"Fixed",type:"monospace"},{name:"Fixedsys",type:"monospace"},{name:"Fixedsys Excelsior",type:"monospace"},{name:"HyperFont",type:"monospace"},{name:"Inconsolata",type:"monospace"},{name:"Letter Gothic",type:"monospace"},{name:"Liberation Mono",type:"monospace"},{name:"Lucida Console",type:"monospace"},{name:"Lucida Sans Typewriter",type:"monospace"},{name:"Lucida Typewriter",
type:"monospace"},{name:"Menlo",type:"monospace"},{name:"MICR",type:"monospace"},{name:"Monaco",type:"monospace"},{name:"Monospace",type:"monospace"},{name:"MS Gothic",type:"monospace"},{name:"MS Mincho",type:"monospace"},{name:"Nimbus Mono L",type:"monospace"},{name:"OCR-A",type:"monospace"},{name:"OCR-B",type:"monospace"},{name:"PragmataPro",type:"monospace"},{name:"Prestige Elite",type:"monospace"},{name:"ProFont",type:"monospace"},{name:"Proggy programming fonts",type:"monospace"},{name:"SimHei",
type:"monospace"},{name:"SimSun",type:"monospace"},{name:"Source Code Pro",type:"monospace"},{name:"Terminal",type:"monospace"},{name:"Trixie",type:"monospace"},{name:"Ubuntu Mono",type:"monospace"},{name:"Vera Sans Mono (Bitstream Vera)",type:"monospace"},{name:"Space Mono",type:"monospace",isGoogleFont:!0},{name:"Inconsolata",type:"monospace",isGoogleFont:!0},{name:"Anonymous Pro",type:"monospace",isGoogleFont:!0},{name:"Balloon",type:"script"},{name:"Brush Script",type:"script"},{name:"Choc",type:"script"},
{name:"Dom Casual",type:"script"},{name:"Mistral",type:"script"},{name:"Papyrus",type:"script"},{name:"Segoe Script",type:"script"},{name:"Utopia",type:"script"},{name:"Coronet",type:"script"},{name:"Curlz",type:"script"},{name:"Gravura",type:"script"},{name:"Script",type:"script"},{name:"Wiesbaden Swing",type:"script"},{name:"American Scribe",type:"script"},{name:"AMS Euler",type:"script"},{name:"Apple Chancery",type:"script"},{name:"Forte",type:"script"},{name:"French Script",type:"script"},{name:"ITC Zapf Chancery",
type:"script"},{name:"Kuenstler Script",type:"script"},{name:"Monotype Corsiva",type:"script"},{name:"Old English Text MT",type:"script"},{name:"Zapfino",type:"script"},{name:"Andy",type:"handwriting"},{name:"Ashley Script",type:"handwriting"},{name:"C\u00e9zanne",type:"handwriting"},{name:"Chalkboard",type:"handwriting"},{name:"Comic Sans MS",type:"handwriting"},{name:"Dom Casual",type:"handwriting"},{name:"Kristen",type:"handwriting"},{name:"Lucida Handwriting",type:"handwriting"},{name:"Bastard",
type:"blackletter"},{name:"Breitkopf Fraktur",type:"blackletter"},{name:"Cloister Black",type:"blackletter"},{name:"Fette Fraktur",type:"blackletter"},{name:"Fletcher",type:"blackletter"},{name:"Fraktur",type:"blackletter"},{name:"Lucida Blackletter",type:"blackletter"},{name:"Old English Text",type:"blackletter"},{name:"Schwabacher",type:"blackletter"},{name:"Aharoni",type:"non-latin"},{name:"Aparajita",type:"non-latin"},{name:"Arial",type:"non-latin"},{name:"Calibri",type:"non-latin"},{name:"Chandas",
type:"non-latin"},{name:"Gadugi",type:"non-latin"},{name:"Grecs du roi",type:"non-latin"},{name:"Javanese script",type:"non-latin"},{name:"Japanese Gothic",type:"non-latin"},{name:"Jomolhari",type:"non-latin"},{name:"Kiran",type:"non-latin"},{name:"Kochi",type:"non-latin"},{name:"Koren",type:"non-latin"},{name:"Kruti Dev",type:"non-latin"},{name:"Malgun Gothic",type:"non-latin"},{name:"Meiryo",type:"non-latin"},{name:"Microsoft JhengHei",type:"non-latin"},{name:"Microsoft YaHei",type:"non-latin"},
{name:"Minch\u014d",type:"non-latin"},{name:"Ming",type:"non-latin"},{name:"Mona",type:"non-latin"},{name:"MS Gothic",type:"non-latin"},{name:"Nastaliq Navees",type:"non-latin"},{name:"Porson",type:"non-latin"},{name:"Segoe UI Symbol",type:"non-latin"},{name:"Shruti",type:"non-latin"},{name:"SimSun",type:"non-latin"},{name:"Sylfaen",type:"non-latin"},{name:"Tahoma",type:"non-latin"},{name:"Tengwar",type:"non-latin"},{name:"Tibetan Machine Uni",type:"non-latin"},{name:"Wilson Greek",type:"non-latin"},
{name:"SMP",type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Bitstream Cyberbit",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"Charis SIL",type:"unicode"},{name:"BMP",type:"unicode"},{name:"SMP",type:"unicode"},{name:"Code2002",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"IPA",type:"unicode"},{name:"Everson Mono",type:"unicode"},{name:"Windows",type:"unicode"},{name:"Fixedsys Excelsior",type:"unicode"},{name:"FreeFont",type:"unicode"},{name:"Gentium",type:"unicode"},
{name:"GNU Unifont",type:"unicode"},{name:"Georgia Ref",type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Junicode",type:"unicode"},{name:"Mac OS 8.5",type:"unicode"},{name:"macOS",type:"unicode"},{name:"ISO 8859-x",type:"unicode"},{name:"MS Gothic",type:"unicode"},{name:"MS Mincho",type:"unicode"},{name:"Nimbus Sans Global",type:"unicode"},{name:"Noto",type:"unicode"},{name:"Fabrizio Schiavi",type:"unicode"},{name:"Squarish Sans CT",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Titus Cyberbit Basic",
type:"unicode"},{name:"Verdana Ref",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Apple Symbols",type:"symbol"},{name:"Asana-Math",type:"symbol"},{name:"Blackboard bold",type:"symbol"},{name:"Bookshelf Symbol 7",type:"symbol"},{name:"Cambria Math",type:"symbol"},{name:"Computer Modern",type:"symbol"},{name:"Lucida Math",type:"symbol"},{name:"Marlett",type:"symbol"},{name:"Symbol",type:"symbol"},{name:"Webdings",type:"symbol"},{name:"Wingdings",type:"symbol"},{name:"Wingdings 2",type:"symbol"},
{name:"Wingdings 3",type:"symbol"},{name:"Zapf Dingbats",type:"symbol"},{name:"Ad Lib",type:"decorative"},{name:"Allegro",type:"decorative"},{name:"Andreas",type:"decorative"},{name:"Arnold B\u00f6cklin",type:"decorative"},{name:"Astur",type:"decorative"},{name:"Banco",type:"decorative"},{name:"Bauhaus",type:"decorative"},{name:"Braggadocio",type:"decorative"},{name:"Broadway",type:"decorative"},{name:"Caslon Antique",type:"decorative"},{name:"Cooper Black",type:"decorative"},{name:"Curlz",type:"decorative"},
{name:"Ellington",type:"decorative"},{name:"Exocet",type:"decorative"},{name:"FIG Script",type:"decorative"},{name:"Forte",type:"decorative"},{name:"Gabriola",type:"decorative"},{name:"Horizon",type:"decorative"},{name:"Jim Crow",type:"decorative"},{name:"Lo-Type",type:"decorative"},{name:"Neuland",type:"decorative"},{name:"Peignot",type:"decorative"},{name:"San Francisco",type:"decorative"},{name:"Stencil",type:"decorative"},{name:"Umbra",type:"decorative"},{name:"Westminster",type:"decorative"},
{name:"Willow",type:"decorative"},{name:"Windsor",type:"decorative"},{name:"Lithos",type:"mimicry"},{name:"Skia",type:"mimicry"},{name:"3x3",type:"misc"},{name:"Compatil",type:"misc"},{name:"Generis",type:"misc"},{name:"Grasset",type:"misc"},{name:"LED",type:"misc"},{name:"Luxi",type:"misc"},{name:"System",type:"misc"}];VA.fonts=bT;VA.fonts=bT;VA["default"]=aT;var Mg=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js");Mg.textlayerNodeForFontMeasure=function(b){var c=
b.viewState,g=c.text_layer_node;c=c.fontmetric_text_layer_node;g&&!g.className.includes("newtext-text-layer")&&(b.viewState.text_layer_node=g=g.parentNode.querySelector(".newtext-text-layer.actual"));c&&!c.className.includes("newtext-text-layer")&&(b.viewState.fontmetric_text_layer_node=c=null);g&&!c&&g.parentNode&&(c=b.viewState.fontmetric_text_layer_node=g.parentNode.querySelector(".newtext-text-layer.font-measure"));return c};Mg.isExtendingChar=function(b){return 768<=b.charCodeAt(0)&&Mg.extendingChars.test(b)};
Mg.skipExtendingChars=function(b,c,g){for(;(0>g?0<c:c<b.length)&&Mg.isExtendingChar(b.charAt(c));)c+=g;return c};Mg.charBoundsOfBigMonospacedLine=function(b,c,g,a){var d=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,f=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,k=6<arguments.length?arguments[6]:void 0,n=7<arguments.length?arguments[7]:void 0,p=g.text.length;if(500>p||c.isProportional(Mg.getComputedFontFamily(a)))return null;var q=Infinity,r=k.defaultTextStyle;k.lineWrapping&&
(Mg.__inter4__=a.getBoundingClientRect(),q=Mg.__inter4__.width,Mg.__inter4__.height);n=c._domMeasure.defaultCharExtent(b,{defaultTextStyle:r},n);k=n.width;n=n.height;r=Array(p);for(var t=0;t<p;t++)d+k>q&&(d=0,f+=n),r[t]={x:d,y:f,width:k,height:n},d+=k;return r};Mg.charBoundsOfLine=function(b,c){var g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,d=c.ELEMENT_NODE,f=c.TEXT_NODE;c.childNodes;var k=c.ownerDocument,n=[],p=0;if(c)if(c.className.includes("line")){g-=
c.offsetLeft;a-=c.offsetTop;var q=c.childNodes[0]}else q=c.getElementsByClassName("line")[0].childNodes[0],g=g-c.offsetLeft+Mg.getComputedMarginLeft(c),a-=c.offsetTop;else q=null;if(!q){var r=q=k.createElement("br");c.appendChild(r)}for(;q&&!(Infinity<p);){var t="BR"!==q.tagName&&q.nodeType===d&&q.childNodes[0]||q;if(t.nodeType===f)for(var w=t.length,x=0;x<w;x++){Mg.__inter5__=Mg.measureCharInner(k,t,x,"right");var B=Mg.__inter5__.left;var D=Mg.__inter5__.top;var F=Mg.__inter5__.width;var L=Mg.__inter5__.height;
B+=g;D+=a;n[p++]={x:B,y:D,width:F,height:L}}else if(q.nodeType===d)Mg.__inter6__=q.getBoundingClientRect(),B=Mg.__inter6__.left,D=Mg.__inter6__.top,F=Mg.__inter6__.width,L=Mg.__inter6__.height,B+=g,D+=a,n[p++]={x:B,y:D,width:F,height:L};else throw Error("Cannot deal with node ".concat(q));q=q.nextSibling}r&&r.parentNode.removeChild(r);return n};Mg.measureCharInner=function(b,c,g){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"left",d=g,f=g+1;if(3==c.nodeType)for(var k=0;4>k;k++){var n=
Mg.getUsefulRect(Mg.range(b,c,d,f).getClientRects(),a);if(n.left||n.right||0==d)break;f=d;--d}return n};Mg.range=function(b,c,g,a,d){b=b.createRange();b.setEnd(d||c,a);b.setStart(c,g);return b};Mg.getUsefulRect=function(b,c){var g={left:0,right:0,top:0,bottom:0};if("left"==c)for(c=0;c<b.length&&(g=b[c]).left==g.right;c++);else for(c=b.length-1;0<=c&&(g=b[c]).left==g.right;c--);return g};Mg.string=ji;Mg.arr=mh;Mg.obj=nh;Mg.FontDetector=aT;Mg.cumulativeOffset=cw;Mg.config=al;Mg.debug=!!Mg.config.onloadURLQuery["debug-font-metric"];
Mg.checkTimeout=1E3;var cT=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),g=c.hasOwnProperty("FontMetric")&&"function"===typeof c.FontMetric?c.FontMetric:c.FontMetric=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){this.charMap={};this.cachedBoundsInfo={};this.supportedFontCache=
{};this.element=null;this.isProportionalCache={}}},{key:"reset",value:function(a){if(this.element){var d=this.element.parentNode;var f=this.element.getRootNode()}this.uninstall();this.charMap={};this.cachedBoundsInfo={};f&&d&&this.install(f,d,a)}},{key:"install",value:function(a,d,f){this.element=a.createElement("div");this.element.name="fontMetric";this.setMeasureNodeStyles(this.element.style,!0);d.appendChild(this.element);this._domMeasure=(new Mg.DOMTextMeasure).install(a,d,f)}},{key:"uninstall",
value:function(){this.element&&(this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this._domMeasure&&this._domMeasure.uninstall())}},{key:"setMeasureNodeStyles",value:function(a,d){a.width=a.height="auto";a.left=a.top="0px";a.visibility="hidden";a.position="absolute";a.whiteSpace="pre";a.font="inherit";a.overflow=d?"hidden":"visible"}},{key:"measure",value:function(a,d){var f=a.fontFamily,k=a.fontSize,n=a.fontWeight,p=a.fontStyle,q=a.textDecoration,r=a.textStyleClasses;
a=a.transform;var t=this.element;a&&(a=a.inverse());t.textContent=d;Object.assign(t.style,{"-webkit-text-size-adjust":"none",fontFamily:f,fontWeight:n,fontStyle:p,textDecoration:q,transform:a,fontSize:k+"px"});t.className=r?r.join(" "):"";try{Mg.__inter0__=t.getBoundingClientRect();var w=Mg.__inter0__.width;var x=Mg.__inter0__.height}catch(B){return{width:0,height:0}}return{height:x,width:w}}},{key:"charBoundsFor",value:function(a,d){var f=d.length,k=Array(f),n=this.cachedBoundsInfo,p=n.bounds,q=
n.str;n=n.style;if(this.isProportional(a.fontFamily)){n=p&&Mg.obj.equals(n,a);for(var r=!a.fixedCharacterSpacing,t=0,w=0;t<f;t++){var x=d[t];if(r)if(n=n&&x===q[t]){Mg.__inter1__=p[t];x=Mg.__inter1__.width;var B=Mg.__inter1__.height}else x=d.substr(0,t+1),Mg.__inter2__=this.measure(a,x),x=Mg.__inter2__.width,B=Mg.__inter2__.height,x-=w;else Mg.__inter3__=this.sizeFor(a,x),x=Mg.__inter3__.width,B=Mg.__inter3__.height;k[t]={x:w,y:0,width:Math.ceil(x),height:Math.ceil(B)};w+=x}r&&(this.cachedBoundsInfo=
{bounds:k,str:d,style:a})}else for(d=this.sizeFor(a,"x",!0),a=this.sizeFor(a,"xx",!0).width-d.width,d=d.height,q=0;q<f;q++)p=a*q,k[q]={x:p,y:0,width:a,height:d};return k}},{key:"isProportional",value:function(a){if(this.isProportionalCache.hasOwnProperty(a))return this.isProportionalCache[a];var d={fontFamily:a,fontSize:12},f=this.sizeFor(d,"w").width;d=this.sizeFor(d,"i").width;return this.isProportionalCache[a]=f!==d}},{key:"sizeFor",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:"",f=a.fontFamily,k=a.fontSize,n=a.fontWeight,p=a.fontStyle,q=a.textDecoration,r=a.textStyleClasses,t={fontFamily:f,fontSize:k,fontWeight:n,fontStyle:p,textDecoration:q,textStyleClasses:r};if(!(2<arguments.length&&void 0!==arguments[2]&&arguments[2])&&1<d.length)return this.measure(t,d);r=r?r.join(" "):"";f=[f,k,n,p,q,r].join("-");this.charMap[f]||(this.charMap[f]={});this.charMap[f][d]||(this.charMap[f][d]=this.measure(t,d));return this.charMap[f][d]}},{key:"defaultLineHeight",value:function(a){return this.sizeFor(a,
" ").height}},{key:"supportedFonts",get:function(){return Mg.arr.uniq(Object.keys(this.supportedFontCache).map(function(a){return a.split(",")[0].replaceAll(/-bold|-Medium|"|-normal/g,"")}))}},{key:"isFontSupported",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"normal",f=this.fontDetector||(this.fontDetector=new Mg.FontDetector(this.element.ownerDocument));if(this.supportedFontCache[a+"-"+d]){var k=this.supportedFontCache[a+"-"+d],n=k.ts;k=k.value;if(Date.now()-n<
Mg.checkTimeout)return k}f=f.isFontSupported(a,d);this.supportedFontCache[a+"-"+d]={ts:Date.now(),value:f};return f}},{key:"defaultCharExtent",value:function(a,d,f){return this._domMeasure.defaultCharExtent(a,d,f)}},{key:"manuallyComputeCharBoundsOfLine",value:function(a,d){return this._domMeasure.computeCharBBoxes(a,d,0,0,4<arguments.length?arguments[4]:void 0,5<arguments.length?arguments[5]:void 0,6<arguments.length?arguments[6]:void 0,this)}},{key:"manuallyComputeBoundsOfLines",value:function(a,
d){return this._domMeasure.computeBBoxesOfLines(a,d,0,0,4<arguments.length?arguments[4]:void 0,5<arguments.length?arguments[5]:void 0,6<arguments.length?arguments[6]:void 0)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"FontMetric"}},{key:"default",value:function(){if(!this._fontMetric)throw Error("FontMetric has not yet been initialized!");return this._fontMetric}},{key:"initDefault",value:function(a){if(!this._fontMetric){if(!a&&"undefined"===typeof document)throw Error("Cannot initialize FontMetric without document");
a||(a={document});this._fontMetric=this.forDOMEnv(a)}return this._fontMetric}},{key:"removeDefault",value:function(){this._fontMetric&&(this._fontMetric.uninstall(),this._fontMetric=null)}},{key:"forDOMEnv",value:function(a){a=a.document;var d=new Mg.FontMetric;d.install(a,a.body);return d}}],c,{pathInPackage:function(){return"./rendering/font-metric.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:318,end:8058})}(void 0);Mg.extendingChars=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),g=c.hasOwnProperty("DOMTextMeasure")&&"function"===typeof c.DOMTextMeasure?c.DOMTextMeasure:c.DOMTextMeasure=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:"reset",value:function(){if(this.element){var a=this.element.parentNode;var d=this.element.ownerDocument}this.uninstall();d&&
a&&this.install(d,a);return this}},{key:"install",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;this.maxLineBBoxCacheCount=(this.debug=f)?1:3E3;this.lineBBoxCacheCount=0;this.lineBBoxCache={};this.maxTextlayerNodeCacheCount=f?1:30;this.textlayerNodeCacheCount=0;this.textlayerNodeCache={};this.defaultCharWidthHeightCache={};this.doc=a;var k=this.element=a.createElement("div");k.className="dom-measure"+(f?" debug":"");this.setMeasureNodeStyles(k.style,!0);d.appendChild(k);
return this}},{key:"uninstall",value:function(){var a=this.element;a&&(a.parentNode&&a.parentNode.removeChild(a),this.element=null)}},{key:"setMeasureNodeStyles",value:function(a,d){a.width=a.height="auto";this.debug||(a.left=a.top="0px",a.visibility="hidden");a.position="absolute";a.whiteSpace="pre";a.font="inherit";a.overflow=d&&!this.debug?"hidden":"visible"}},{key:"generateStyleKey",value:function(a){var d=a.defaultTextStyle;return[d.fontFamily,d.fontSize,d.fontWeight,d.fontStyle,d.textDecoration,
d.textStyleClasses,a.paddingLeft,a.paddingRight,a.paddingTop,a.paddingBottom,a.width,a.height,a.clipMode,a.lineWrapping,a.textAlign].join("-")}},{key:"defaultCharExtent",value:function(a,d,f){var k=this,n=this.generateStyleKey(d),p=this.defaultCharWidthHeightCache[n];if("undefined"!==typeof p&&(0!==p.height||0!==p.width))return p;var q=this.doc;return this.withTextLayerNodeDo(a,f,d,n,function(r){var t=q.createElement("span");t.className="line";t.style.whiteSpace="pre";r.appendChild(t);t.textContent=
"abcdefghijklmnopqrstufwxyz ABCDEFGHIJKLMNOPQRSTUFWXYZ 1234567890 {}[];,./<>?'\"!@#$%^&*()-=_+";var w=t.getBoundingClientRect().width,x=q.createElement("span");x.className="line";x.style.whiteSpace="pre";r.appendChild(x);x.textContent="H\ne\nll\no";var B=x.getBoundingClientRect().height;r.removeChild(t);r.removeChild(x);return k.defaultCharWidthHeightCache[n]={width:w/92,height:Math.ceil(B/4)}})}},{key:"computeBBoxesOfLines",value:function(a,d){for(var f=this,k=2<arguments.length&&void 0!==arguments[2]?
arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,p=4<arguments.length?arguments[4]:void 0,q=5<arguments.length?arguments[5]:void 0,r=6<arguments.length?arguments[6]:void 0,t=this.generateStyleKey(p),w=Array(d.length),x=!0,B=0;B<d.length;B++){var D=!d[B].textAttributes.length&&this.lineBBoxCache[t+"_"+d[B].text];D&&D.height&&D.width?w[B]=D:x=!1}return x?w:this.withTextLayerNodeDo(a,q,p,t,function(F,L,G){var oa=Array(d.length),ha=Array(d.length);f.doc;for(var Ha=0;Ha<d.length;Ha++)if(!ha[Ha]){var Va=
r(d[Ha]);Va.style.display="inline-block";F.appendChild(Va);oa[Ha]=Va}for(Ha=0;Ha<oa.length;Ha++)if(!ha[Ha]){Va=oa[Ha];var hc=Va.getBoundingClientRect();f.lineBBoxCache[t+"_"+d[Ha].text]=ha[Ha]={x:hc.left-Va.offsetLeft+k-L,y:hc.top-Va.offsetTop+n-G,width:hc.width,height:hc.height}}for(L=0;L<oa.length;L++)F.removeChild(oa[L]);return ha})}},{key:"computeCharBBoxes",value:function(a,d){var f=this,k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:
0,p=4<arguments.length?arguments[4]:void 0,q=5<arguments.length?arguments[5]:void 0,r=6<arguments.length?arguments[6]:void 0,t=7<arguments.length?arguments[7]:void 0;return this.withTextLayerNodeDo(a,q,p,this.generateStyleKey(p),function(w,x,B){var D=r(d);w.appendChild(D);f.doc;w=1E4<d.stringSize&&Mg.charBoundsOfBigMonospacedLine(a,t,d,D,k,n,p,q)||Mg.charBoundsOfLine(d,D,k-x,n-B);f.debug||D.parentNode.removeChild(D);return w})}},{key:"withTextLayerNodeDo",value:function(a,d,f,k,n){var p=this.doc,
q=this.textlayerNodeCache,r=this.element,t=Mg.textlayerNodeForFontMeasure(a);t||(t=q[k]);if(!t){this.textlayerNodeCacheCount++;t=q[k]=d(f,[]);t.id=k;d=f.width;var w=f.clipMode;f.width||f.clipMode&&"visible"!==f.clipMode?(f=p.createElement("div"),f.style.position="absolute",w&&(f.style.overflow=w),d&&(f.style.width=d+"px"),f.id=k,f.appendChild(t),r.appendChild(f)):r.appendChild(t)}k=a.getGlobalTransform().inverse();a.env.renderer&&a.env.renderer.getNodeForMorph(a)&&(1!=k.getScale()||0!=k.getRotation())&&
(k.e=k.f=0,t.style.transform=k.toString());k=t.getBoundingClientRect();a=k.left;k=k.top;try{return n(t,a,k)}finally{if(t.style.transform="",!this.debug&&this.textlayerNodeCacheCount>this.maxTextlayerNodeCacheCount){n=Math.ceil(this.maxTextlayerNodeCacheCount/2);for(var x;n--&&(x=r.childNodes[0]);)q[x.id]=null,r.removeChild(x);this.textlayerNodeCacheCount-=n}}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DOMTextMeasure"}}],c,{pathInPackage:function(){return"./rendering/font-metric.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:11739,end:20015})})(void 0);Mg.GLOBAL="undefined"!==typeof System?System.global:window||global||self||void 0;Mg.getComputedFontFamily="function"===typeof Mg.GLOBAL.getComputedStyle?function(b){return Mg.GLOBAL.getComputedStyle(b).fontFamily}:function(){return""};Mg.getComputedMarginLeft=
"function"===typeof Mg.GLOBAL.getComputedStyle?function(b){return parseInt(Mg.GLOBAL.getComputedStyle(b).marginLeft)||0}:function(){return 0};Mg["default"]=cT;var Ui=window.lively.FreezerRuntime.recorderFor("lively.morphic/changes.js");Ui.signalBindings=function(b,c,g){if(b=b.attributeConnections){b=b.slice();for(var a=0;a<b.length;a++)b[a].sourceAttrName===c&&b[a].update(g)}};Ui.informMorph=function(b,c,g){try{g.onChange(c);Ui.signalBindings(g,"change",c);for(var a=g.owner;a;)a.onSubmorphChange(c,
g),a=a.owner}catch(d){console.error("Error in informMorph: ".concat(d.stack))}};Ui.arr=mh;Ui.obj=nh;Ui.signal=Vl;(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),g=c.hasOwnProperty("Change")&&"function"===typeof c.Change?c.Change:c.Change=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){this.target=
a;this.group=null}},{key:"type",get:function(){return"abstract change"}},{key:"apply",value:function(){throw Error("Not yet implemented");}},{key:"reverseApply",value:function(){throw Error("Not yet implemented");}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Change"}}],c,{pathInPackage:function(){return"./changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:750,end:1023})})(void 0);var dT=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),g=c.hasOwnProperty("GroupChange")&&"function"===typeof c.GroupChange?c.GroupChange:c.GroupChange=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){ie._get(Object.getPrototypeOf(g.prototype),
Symbol["for"]("lively-instance-initialize"),this).call(this,a);this.changes=[]}},{key:"consumesChanges",value:function(){return!0}},{key:"addChange",value:function(a){this.changes.push(a);a.group=this}},{key:"apply",value:function(){this.changes.slice().forEach(function(a){return a.apply()});return this}},{key:"reverseApply",value:function(){this.changes.slice().reverse().forEach(function(a){return a.reverseApply()});return this}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"GroupChange"}}],
c,{pathInPackage:function(){return"./changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1032,end:1463})}(Ui.Change);Ui.GroupChange=dT;Ui.GroupChange=dT;var eT=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),g=c.hasOwnProperty("ValueChange")&&"function"===typeof c.ValueChange?c.ValueChange:
c.ValueChange=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:"type",get:function(){return"setter"}},{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d,f,k){ie._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,a);this.prop=d;this.value=f;this.prevValue=null;this.meta=k}},{key:"apply",value:function(){this.target[this.prop]=
this.value}},{key:"reverseApply",value:function(){this.target[this.prop]=this.prevValue}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ValueChange"}}],c,{pathInPackage:function(){return"./changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1471,end:1939})}(Ui.Change);Ui.ValueChange=eT;Ui.ValueChange=
eT;var fT=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),g=c.hasOwnProperty("MethodCallChange")&&"function"===typeof c.MethodCallChange?c.MethodCallChange:c.MethodCallChange=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:"type",get:function(){return"method-call"}},{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d,f,k,n){ie._get(Object.getPrototypeOf(g.prototype),
Symbol["for"]("lively-instance-initialize"),this).call(this,a);this.selector=d;this.args=f;this.undo=k;this.meta=n}},{key:"apply",value:function(){var a=this.target;a[this.selector].apply(a,this.args)}},{key:"reverseApply",value:function(){if(this.undo)if("function"===typeof this.undo)this.undo();else{var a=this.undo,d=a.target;d[a.selector].apply(d,a.args)}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MethodCallChange"}}],c,{pathInPackage:function(){return"./changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1947,end:2581})}(Ui.GroupChange);Ui.MethodCallChange=fT;Ui.MethodCallChange=fT;var tH=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),g=c.hasOwnProperty("ChangeManager")&&"function"===typeof c.ChangeManager?c.ChangeManager:c.ChangeManager=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){this.reset()}},{key:"reset",value:function(){this.changes=[];this.changeRecordedListeners=[];this.revision=0;this.changeRecordersPerMorph=new WeakMap;this.changeRecorders={};this.changeGroupStack=[];this.defaultMeta={};this.metaStack=[]}},{key:"changesFor",value:function(a){return this.changes.filter(function(d){return d.target===a})}},{key:"apply",value:function(a,d){d.apply()}},{key:"doWithValueChangeMeta",
value:function(a,d,f){this.defaultMeta=a;this.metaStack.push(a);try{var k=f(d)}finally{return this.metaStack.pop(),this.defaultMeta=Ui.arr.last(this.metaStack)||{},k}}},{key:"addValueChange",value:function(a,d,f,k){d=new Ui.ValueChange(a,d,f,Object.assign({},this.defaultMeta,{},k));return this._record(a,d)}},{key:"addMethodCallChangeDoing",value:function(a,d,f){var k=a.target,n=a.selector,p=a.args;(a=a.undo)||(a=function(){return console.warn("No undo recorded for ".concat(k,".").concat(n))});p=new Ui.MethodCallChange(k,
n,p,a,this.defaultMeta);d.groupChangesWhile(p,f);return p}},{key:"_record",value:function(a,d){Ui.signal(this,"changeRecorded",d);d.hasOwnProperty("value")&&(d.prevValue=a._morphicState[d.prop],a._morphicState[d.prop]=d.value);a.makeDirty(d);var f=Ui.arr.last(this.changeGroupStack);f&&f.consumesChanges()?f.addChange(d):(this.changes.push(d),a._rev=++this.revision,this.informChangeListeners(d));Ui.informMorph(this,d,a);return d}},{key:"groupChangesWhile",value:function(a,d,f){var k=3<arguments.length&&
void 0!==arguments[3]?arguments[3]:!0;d||(d=new Ui.GroupChange(a));this.changeGroupStack.push(d);try{return f(),Ui.arr.remove(this.changeGroupStack,d),k?this._record(a,d):d}catch(n){throw Ui.arr.remove(this.changeGroupStack,d),n;}}},{key:"dontRecordChangesWhile",value:function(a,d){return this.groupChangesWhile(a,void 0,d,!1)}},{key:"recordChangesWhile",value:function(a,d){var f=this.changes.length;a();a=this.changes.slice(f,this.changes.length);return d?a.filter(d):a}},{key:"addChangeListener",value:function(a){Ui.arr.pushIfNotIncluded(this.changeRecordedListeners,
a)}},{key:"removeChangeListener",value:function(a){Ui.arr.remove(this.changeRecordedListeners,a)}},{key:"informChangeListeners",value:function(a){this.changeRecordedListeners.forEach(function(d){return d(a)})}},{key:"recordChangesStart",value:function(a){var d=Ui.obj.newKeyIn(this.changeRecorders,(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"")+"__change_recorder_"+Date.now()),f=a?function(n){return a(n)&&k.changes.push(n)}:function(n){return k.changes.push(n)},k=this.changeRecorders[d]=
{id:d,filter:a,changes:[],listener:f};this.addChangeListener(f);return k}},{key:"recordChangesStop",value:function(a){if(!(a in this.changeRecorders))return[];var d=this.changeRecorders[a],f=d.changes;d=d.listener;delete this.changeRecorders[a];this.removeChangeListener(d);return f}},{key:"recordChangesStartForMorph",value:function(a,d){d=this.recordChangesStart(d,a.id);var f=this.changeRecordersPerMorph.get(a);f||(f=[],this.changeRecordersPerMorph.set(a,f));f.push(d.id);return d}},{key:"recordChangesStopForMorph",
value:function(a,d){var f=this.changeRecordersPerMorph.get(a);if(!f||!f.length)return console.warn("Cannot endMorphChangeRecorder for morph ".concat(a,": recorder not found")),[];(a=d)?Ui.arr.remove(f,a):a=f.pop();return this.recordChangesStop(a)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ChangeManager"}}],c,{pathInPackage:function(){return"./changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2589,end:7762})}(void 0);Ui.ChangeManager=tH;Ui.ChangeManager=tH;var Mk=window.lively.FreezerRuntime.recorderFor("lively.morphic/undo.js");Mk.printArg=function(b){return Mk.obj.inspect(b,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};Mk.obj=nh;Mk.arr=mh;Mk.events=ns;Mk.fun=wn;(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),g=c.hasOwnProperty("Undo")&&"function"===typeof c.Undo?c.Undo:
c.Undo=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;this.name=a;this.targets=d;this.timestamp=this.changes=this.recorder=null;this.no=f}},{key:"recorded",value:function(){return!!this.changes}},{key:"isRecording",
value:function(){return!!this.recorder}},{key:"startRecording",value:function(a){var d=this;if(this.recorded()||this.isRecording())throw Error("Undo already recorded / recording");if(!this.targets.length)throw Error("Undo has no target morphs");this.timestamp=Date.now();this.recorder=this.targets[0].recordChangesStart(function(f){var k=f.target;return k.isUsedAsEpiMorph()||!d.targets.some(function(n){return n===k||n.isAncestorOf(k)})?!1:"function"===typeof a?a(f):!0});return this}},{key:"stopRecording",
value:function(){this.name;var a=this.recorder,d=a.id;a.changes;this.changes=Nb(this.targets,1)[0].recordChangesStop(d);this.recorder=this.targets=null}},{key:"apply",value:function(){if(!this.recorded())throw Error("Cannot apply undo that has no changes recorded yet");this.changes.slice().forEach(function(a){return a.apply()});return this}},{key:"reverseApply",value:function(){if(!this.recorded())throw Error("Cannot reverseApply undo that has no changes recorded yet");this.changes.slice().reverse().forEach(function(a){return a.reverseApply()});
return this}},{key:"addTarget",value:function(a){Mk.arr.pushIfNotIncluded(this.targets,a)}},{key:"addUndos",value:function(a){a=Mk.arr.sortBy(a.concat(this).filter(function(d){return d.recorded()}),function(d){return d.no});a.length&&(this.changes=a.flatMap(function(d){return d.changes}),this.timestamp=a[0].timestamp,this.no=a[0].no,this.name=a.map(function(d){return d.name}).join("-"))}},{key:"toString",value:function(){var a=this.name,d=this.changes,f=this.no,k=this.isRecording();d=d.length?"\n  "+
d.map(function(n){var p=n.selector,q=n.args,r=n.prop,t=n.value;n=n.target;return p?"".concat(n,".").concat(p,"(").concat(q.map(Mk.printArg),")"):"".concat(n,".").concat(r," = ").concat(Mk.printArg(t))}).join("\n  "):"no changes";return"Undo(".concat(f,":").concat(a," ").concat(k?"RECORDING ":"").concat(d,")")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Undo"}}],c,{pathInPackage:function(){return"./undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:54,end:2646})})(void 0);var WA=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),g=c.hasOwnProperty("UndoManager")&&"function"===typeof c.UndoManager?c.UndoManager:c.UndoManager=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};
return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){this.reset();this.filter=a}},{key:"reset",value:function(){this.undos=[];this.redos=[];this.undoInProgress=null;this.counter=this.applyCount=0;this.grouping={current:[],debounce:null,debouncedCanceled:!1,debounceTime:31}}},{key:"group",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this.groupLaterCancel();a&&this.undos.includes(a)&&(this.grouping.current=Mk.arr.uniq(this.undos.slice(this.undos.indexOf(a)).concat(this.grouping.current)));
this.grouping.current.length&&(a=this.grouping.current.slice(1),this.grouping.current[0].addUndos(a),this.undos=Mk.arr.withoutAll(this.undos,a),this.grouping.current=[])}},{key:"ensureNewGroup",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"new undo group";this.group();this.undoStart(a,d);return this.undoStop()}},{key:"groupLaterCancel",value:function(){var a=this.grouping;a.debounce&&(a.debouncedCanceled=!0,this.grouping=Object.assign({},a,{debounce:null,debouncedCanceled:!1}))}},
{key:"groupLater",value:function(a){var d=this,f=this.grouping;(f.debounce||(f.debounce=Mk.fun.debounce(a||f.debounceTime,function(){f.debounce=null;f.debouncedCanceled||d.group()})))()}},{key:"undoStart",value:function(a,d){if(!this.applyCount)if(this.undoInProgress)console.warn("There is already an undo being recorded. Tried to start undo ".concat(d," for ").concat(a.name,", but ").concat(this.undoInProgress.name," is currently in progress."));else return this.undoInProgress=(new Mk.Undo(d,[a],
this.counter++)).startRecording(this.filter)}},{key:"undoStop",value:function(){var a=this.undoInProgress;if(!a)return null;a.stopRecording();this.undoInProgress=null;this.undos.push(a);this.grouping.current.push(a);this.redos.length&&(this.redos.length=0);return a}},{key:"removeLatestUndo",value:function(){this.undoStop();var a=this.undos.pop();Mk.arr.remove(this.grouping.current,a);return a}},{key:"undo",value:function(){var a=this.removeLatestUndo();if(a){Mk.arr.remove(this.grouping.current,a);
this.redos.unshift(a);this.applyCount++;try{a.reverseApply()}finally{this.applyCount--}return a}}},{key:"redo",value:function(){this.undoStop();var a=this.redos.shift();if(a){this.undos.push(a);this.applyCount++;try{a.apply()}finally{this.applyCount--}return a}}},{key:"toString",value:function(){var a=0===this.undos.length?"":"\n  ".concat(20<this.undos.length?"...\n  ":"").concat(this.undos.slice(-20).join("\n  ")),d=!!this.undoInProgress;return"UndoManager(".concat(this.undos.length," undos, ").concat(this.redos.length,
" redos, ").concat(d?", UNDO IN PROGRESS":"").concat(a,")")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"UndoManager"}}],c,{pathInPackage:function(){return"./undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2786,end:6113})}(void 0);Mk.UndoManager=WA;Mk.UndoManager=WA;var bl=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js");
bl.promise=ai;bl.bowser=Bs;bl.touchInputDevice=uo;bl.placeholderValue="\u0001\u0001";bl.placeholderRe=/\u0001/g;var gT=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js"),g=c.hasOwnProperty("TextInput")&&"function"===typeof c.TextInput?c.TextInput:c.TextInput=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),
value:function(a){this.eventDispatcher=a;this.domState={rootNode:null,textareaNode:null,eventHandlers:[],isInstalled:!1};this.inputState={composition:null,manualCopy:null,manualPaste:null,positionChangedTime:0,scrollLeftWhenChanged:0,scrollTopWhenChanged:0}}},{key:"install",value:function(a,d){var f=this,k=this.domState,n=k.isInstalled,p=k.rootNode;this.world=d;if(n){if(p===a)return;this.uninstall()}k.isInstalled=!0;k.rootNode=a;a.tabIndex=1;d=k.textareaNode=a.ownerDocument.createElement("textarea");
d.setAttribute("style","\n      position: absolute;\n      /*extent cannot be 0, input won't work correctly in Chrome 52.0*/\n      width: 20px; height: 20px;\n      z-index: 0;\n      opacity: 1;\n      background: transparent;\n      -moz-appearance: none;\n      appearance: none;\n      border: none;\n      resize: none;\n      outline: none;\n      overflow: hidden;\n      font: inherit;\n      padding: 0 1px;\n      margin: 0 -1px;\n      text-indent: -1em;\n      -ms-user-select: text;\n      -moz-user-select: text;\n      -webkit-user-select: text;\n      user-select: text;\n      /*with pre-line chrome inserts &nbsp; instead of space*/\n      white-space: pre!important;");
bl.touchInputDevice&&d.setAttribute("x-palm-disable-auto-cap",!0);d.setAttribute("wrap","off");d.setAttribute("autocorrect","off");d.setAttribute("autocapitalize","off");d.setAttribute("spellcheck",!1);d.setAttribute("aria-label","Lively Textinput Node");d.className="lively-text-input";d.value="";a.insertBefore(d,a.firstChild);bl.touchInputDevice&&(d.setAttribute("disabled",!0),d.style.setProperty("transform","scale(0)"));k.eventHandlers=[{type:"focusin",node:a,fn:function(q){return f.onRootNodeFocus(q)},
capturing:!0},{type:"focusin",node:k.textareaNode,fn:function(q){return f.onTextAreaFocus(q)},capturing:!0},{type:"blur",node:k.textareaNode,fn:function(q){return f.onTextAreaBlur(q)},capturing:!0},{type:"keydown",node:k.textareaNode,fn:function(q){return f.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"keyup",node:k.textareaNode,fn:function(q){return f.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"cut",node:k.textareaNode,fn:function(q){return f.eventDispatcher.dispatchDOMEvent(q)},
capturing:!1},{type:"copy",node:k.textareaNode,fn:function(q){return f.inputState.manualCopy?f.inputState.manualCopy.onEvent(q):f.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"paste",node:k.textareaNode,fn:function(q){return f.inputState.manualPaste?f.inputState.manualPaste.onEvent(q):f.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"compositionstart",node:k.textareaNode,fn:function(q){return f.onCompositionStart(q)},capturing:!1},{type:"compositionend",node:k.textareaNode,fn:function(q){return f.onCompositionEnd(q)},
capturing:!1},{type:"compositionupdate",node:k.textareaNode,fn:function(q){return f.onCompositionUpdate(q)},capturing:!1},{type:"input",node:k.textareaNode,fn:function(q){return f.onInput(q)},capturing:!1}];k.eventHandlers.forEach(function(q){return q.node.addEventListener(q.type,q.fn,q.capturing)});return this}},{key:"uninstall",value:function(){var a=this.domState;a.isInstalled=!1;a.eventHandlers.forEach(function(f){return f.node.removeEventListener(f.type,f.fn,f.capturing)});var d=a.textareaNode;
d&&d.parentNode&&d.parentNode.removeChild(d);a.rootNode=null;return this}},{key:"resetValue",value:function(){var a=this.domState.textareaNode;a&&(a.value=bl.placeholderValue)}},{key:"readValue",value:function(){var a=this.domState.textareaNode;return a?a.value.replace(bl.placeholderRe,""):""}},{key:"focus",value:function(a,d){var f=this.domState.textareaNode;f&&(bl.touchInputDevice&&a&&a.isText&&!a.readOnly&&f.removeAttribute("disabled"),a&&a.stealFocus||f.getRootNode().activeElement!==f&&f.focus(),
bl.bowser.firefox&&Promise.resolve().then(function(){return f.getRootNode().activeElement!==f&&f.focus()}),a&&a.isText&&a.focusable?(bl.touchInputDevice&&f.focus(),this.ensureBeingAtCursorOfText(a)):d&&this.ensureBeingInVisibleBoundsOfWorld(d))}},{key:"blur",value:function(){var a=this.domState.textareaNode;bl.touchInputDevice&&a.setAttribute("disabled",!0);a&&a.blur()}},{key:"doCopyWithMimeTypes",value:function(a){var d=this;return this.execCommand("manualCopy",function(){var f=d.domState.textareaNode,
k=function q(p){f.removeEventListener("copy",q);p.preventDefault();a.forEach(function(r){return p.clipboardData.setData(r.type,r.data)})};setTimeout(function(){return f.removeEventListener("copy",k)},300);f.addEventListener("copy",k);f.value="";f.select();f.ownerDocument.execCommand("copy")})}},{key:"doCopy",value:function(a){var d=this;return this.execCommand("manualCopy",function(){var f=d.domState.textareaNode;f.value=a;f.select();f.ownerDocument.execCommand("copy")})}},{key:"doPaste",value:function(){var a=
this;return this.execCommand("manualPaste",function(){var d=a.domState.textareaNode;d.value="";d.select();d.ownerDocument.execCommand("paste")})}},{key:"execCommand",value:function(){var a=Bb(regeneratorRuntime.mark(function n(f,k){var p,q,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.domState.isInstalled){t.next=2;break}throw Error("Cannot copy to clipboard \u2013 input helper is not installed into DOM!");case 2:p=this.inputState;if(!p[f]){t.next=11;break}t.prev=
4;t.next=7;return p[f].promise;case 7:t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](4);case 11:return q=bl.promise.deferred(),r=!1,p[f]={onEvent:function(w){r||(p[f]=null,r=!0,q.resolve(w))},promise:q.promise},k(),t.prev=15,t.next=18,bl.promise.waitFor(1E3,function(){return r});case 18:t.next=25;break;case 20:t.prev=20,t.t1=t["catch"](15),p[f]=null,r=!0,q.reject(t.t1);case 25:return t.abrupt("return",q.promise);case 26:case "end":return t.stop()}},n,this,[[4,9],[15,20]])}));return function(f,k){return a.apply(this,
arguments)}}()},{key:"onTextAreaBlur",value:function(a){var d=this;setTimeout(function(){var f=d.domState||{},k=f.textareaNode;f=f.rootNode;if(k&&f){var n=k.getRootNode(),p=!(d.world.focusedMorph&&d.world.focusedMorph.stealFocus);(n.activeElement===f||d.world.isEmbedded&&!n.activeElement)&&p&&!bl.touchInputDevice&&k.focus()}})}},{key:"onTextAreaFocus",value:function(a){}},{key:"onRootNodeFocus",value:function(a){var d=this.domState||{},f=d.rootNode;if(a.target===d.textareaNode||a.target===f)this.world.focusedMorph&&
this.world.focusedMorph.stealFocus||this.focus();this.inputState.composition=null}},{key:"onInput",value:function(a){if(!this.inputState.composition){if(!a.data){var d=this.readValue();a.__defineGetter__("data",function(){return d})}this.resetValue();this.eventDispatcher.dispatchDOMEvent(a)}}},{key:"onCompositionStart",value:function(a){this.inputState.composition={};this.eventDispatcher.dispatchDOMEvent(a)}},{key:"onCompositionUpdate",value:function(a){var d=this.inputState.composition,f=this.readValue();
d.lastValue!==f&&(d.lastValue=f,this.eventDispatcher.dispatchDOMEvent(a))}},{key:"onCompositionEnd",value:function(a){this.inputState.composition=null;this.eventDispatcher.dispatchDOMEvent(a)}},{key:"setPosition",value:function(a){var d=(this.domState||{}).textareaNode;d&&(d.style.left=a.x+"px",d.style.top=a.y+"px")}},{key:"ensureBeingInVisibleBoundsOfWorld",value:function(a){this.setPosition(a.visibleBounds().center())}},{key:"ensureBeingAtCursorOfText",value:function(a){var d=a.world();if(d){var f=
a.whatsVisible,k=a.cursorPosition,n=k.row;k=k.column;n=Math.max(f.startRow,Math.min(n,f.endRow));f=a.charBoundsFromTextPosition({row:n,column:k}).topLeft();a=d.visibleBounds().insetBy(10).constrainPt(a.worldPoint(f.subPt(a.scroll)));this.inputState.positionChangedTime=Date.now();this.inputState.scrollLeftWhenChanged=document.documentElement.scrollLeft;this.inputState.scrollTopWhenChanged=document.documentElement.scrollTop;this.setPosition(a)}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"TextInput"}}],
c,{pathInPackage:function(){return"./events/TextInput.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:235,end:12837})}(void 0);bl["default"]=gT;var hT=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js");hT.arr=mh;var iT=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js"),
g=c.hasOwnProperty("KillRing")&&"function"===typeof c.KillRing?c.KillRing:c.KillRing=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){this.size=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.buffer=[];this.pointer=-1}},{key:"isCycling",value:function(){return this.pointer!==this.buffer.length-1}},{key:"add",
value:function(a){var d=this.buffer;d.push(a);this.size&&d.length>this.size&&d.splice(0,d.length-this.size);this.pointer=this.buffer.length-1;return a}},{key:"yank",value:function(){return this.buffer[this.pointer]||""}},{key:"back",value:function(){this.pointer=(0>=this.pointer?this.buffer.length:this.pointer)-1;return this.yank()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"KillRing"}}],c,{pathInPackage:function(){return"./events/KillRing.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:50,end:628})}(void 0);hT["default"]=iT;var Qh=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/Keys.js");Qh.canonicalizeFunctionKey=function(b){b&&(b=b.toLowerCase());switch(b){case "space":b="space";break;case "esc":b="escape";break;case "return":b="enter";break;case "arrowleft":b="left";break;case "arrowright":b="right";break;case "arrowup":b=
"up";break;case "arrowdown":b="down"}return Qh.FUNCTION_KEYS.includes(b)?Qh.string.capitalize(b):""};Qh.computeHashIdOfEvent=function(b){var c=b.key;b=0|(b.ctrlKey?1:0)|(b.altKey?2:0)|(b.shiftKey?4:0)|(b.metaKey?8:0);0===b&&!Qh.canonicalizeFunctionKey(c)&&c&&Qh.letterRe.test(c)&&(b=-1);return b};Qh.isModifier=function(b){if(Qh.isNumber(b))return!1;b=b.replace(/-$/,"").toLowerCase();return Qh.arr.withoutAll(Object.keys(Qh.KEY_MODS),["","input-"]).includes(b)};Qh.decodeKeyIdentifier=function(b,c){var g=
/u\+?([\d\w]{4})/gi,a=function(d,f){return String.fromCharCode(parseInt(f,16))};b=b&&b.replace(g,a);if("Command"===b||"Cmd"===b)b="Meta";" "===b&&(b="Space");8===c&&(b="Backspace");return b};Qh.identifyKeyFromCode=function(b){b=b.code;if("string"!==typeof b)return null;if(b.startsWith("Key"))return b.slice(3);if(b.startsWith("Numpad"))return b;if(b.startsWith("Digit")||b.startsWith("Arrow"))return b.slice(5);if(b.match(/^F[0-9]{1-2}$/))return b;switch(b){case "Insert":case "Home":case "PageUp":case "PageDown":return b;
case "Period":return".";case "Comma":return",";case "Help":return"Insert";case "Equal":return"=";case "Backslash":case "IntlBackslash":return"\\";case "Equal":return"=";case "Minus":return"-";case "BracketRight":return"]";case "BracketLeft":return"[";case "Quote":return"'";case "Backquote":return"`";case "Semicolon":return";"}return null};Qh.dedasherize=function(b){for(var c=[];;){var g=b.indexOf("-");if(-1===g)return b&&c.push(b),c;0===g?(c.push(b[0]),b=b.slice(2)):(c.push(b.slice(0,g)),b=b.slice(g+
1))}};Qh.arr=mh;Qh.string=ji;Qh.letterRe=/[a-z]/i;Qh.FUNCTION_KEYS="backspace;tab;enter;pause;escape; ;pageup;pagedown;end;home;left;up;right;down;print;insert;delete;numpad0;numpad1;numpad2;numpad3;numpad4;numpad5;numpad6;numpad7;numpad8;numpad9;numpadenter;f1;f2;f3;f4;f5;f6;f7;f8;f9;f10;f11;f12;numlock;scrolllock".split(";");Qh.MODIFIER_KEYS={16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"};Qh.KEY_MODS=function(){for(var b={control:1,ctrl:1,alt:2,option:2,shift:4,"super":8,win:8,meta:8,command:8,cmd:8},
c=["alt","ctrl","meta","shift"],g=function(d){b[d]=c.filter(function(f){return d&b[f]}).join("-")+"-"},a=Math.pow(2,c.length);a--;)g(a);b[0]="";b[-1]="input-";return b}();Qh.isNumber=function(){var b=/^[0-9]+$/;return function(c){return b.test(c)}}();Qh.Keys={computeHashIdOfEvent:Qh.computeHashIdOfEvent,keyComboToEventSpec:function(b,c){c=Object.assign({_isLivelyKeyEventSpec:!0,keyCombo:"",key:"",ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,isFunctionKey:!1,isModified:!1,onlyModifiers:!1},
c);var g=Qh.dedasherize(b),a={shift:"shiftKey",control:"ctrlKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey",command:"metaKey",cmd:"metaKey"};if("input"===g[0]&&2===g.length)return c.keyCombo=b,c.key=g[1],c;for(var d=g.length-1;0<=d;d--){var f=a[g[d].toLowerCase()];f&&(g.splice(d,1),c.isModified=!0,c[f]=!0)}if(!g.length)return c.keyCombo=Qh.Keys.eventToKeyCombo(c),c.key=Qh.arr.last(Qh.dedasherize(c.keyCombo)),c.onlyModifiers=!0,c;1<g.length&&console.warn('Strange key "'.concat(b,'" encountered in keyComboToEventSpec, parsing probably failed'));
b=Qh.arr.last(g);(g=Qh.canonicalizeFunctionKey(b))?(c.isFunctionKey=!0,c.key=g):c.key=c.isModified?Qh.string.capitalize(b):b;c.keyCombo=Qh.Keys.eventToKeyCombo(c);return c},eventToKeyCombo:function(b,c){c=b.key;var g=b.data,a=b.keyIdentifier;if("string"===typeof g)return"input-"+g;if(!c&&a&&(c=Qh.decodeKeyIdentifier(a,b.which||b.keyCode),b.key=c=c[b.shiftKey?"toUpperCase":"toLowerCase"](),Qh.isModifier(c)))return Qh.string.capitalize(c);g=Qh.KEY_MODS[Qh.computeHashIdOfEvent(b)];if("input-"===g)return g+
c;b.code&&(c=Qh.identifyKeyFromCode(b)||c);b=!c||Qh.isModifier(c)?g.replace(/-$/,""):g+c;b.match(/\s$/)&&(b=b.replace(/\s$/,"Space"));return b.replace(/(^|-)([a-z])/g,function(d,f,k){return f+k.toUpperCase()})},canonicalizeKeyCombo:function(b){return Qh.Keys.eventToKeyCombo(Qh.Keys.keyComboToEventSpec(b))},canonicalizeEvent:function(b){return b._isLivelyKeyEventSpec?b:Qh.Keys.keyComboToEventSpec(Qh.Keys.eventToKeyCombo(b))}};var uH=Qh.Keys;Qh["default"]=uH;var mi=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js");
mi.bowser=Bs;mi.obj=nh;mi.pt=Ij;mi.Keys=uH;mi.cumulativeOffset=cw;var jT="pointerover pointerenter pointerout pointerleave pointerdown pointermove pointerup pointercancel gotpointercapture lostpointercapture".split(" ");mi.pointerEvents=jT;mi.pointerEvents=jT;var kT="mouseover mouseenter mousedown mousemove mouseup mouseout mouseleave click dblclick contextmenu mousewheel".split(" ");mi.mouseEvents=kT;mi.mouseEvents=kT;var lT=["keydown","keyup","keypress"];mi.keyboardEvents=lT;mi.keyboardEvents=lT;
var vH=mi.keyboardEvents.concat("input","compositionstart","compositionupdate","compositionend");mi.keyLikeEvents=vH;mi.keyLikeEvents=vH;var wH=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),g=c.hasOwnProperty("Event")&&"function"===typeof c.Event?c.Event:c.Event=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),
value:function(a,d,f,k,n,p,q){this.type=a;this.domEvt=d;this.dispatcher=f;this.targetMorphs=k;this.hand=n;this.halo=p;this.layoutHalo=q;this.stopped=!1;this._keyCombo=void 0;this.onDispatchCallbacks=[];this.onAfterDispatchCallbacks=[];this.onStopCallbacks=[]}},{key:"onDispatch",value:function(a){this.onDispatchCallbacks.push(a);return this}},{key:"onAfterDispatch",value:function(a){this.onAfterDispatchCallbacks.push(a);return this}},{key:"onStop",value:function(a){this.onStopCallbacks.push(a);return this}},
{key:"data",get:function(){return this.domEvt.data}},{key:"world",get:function(){return this.dispatcher.world}},{key:"state",get:function(){return this.dispatcher.eventState}},{key:"keyInputState",get:function(){return this.state.keyInputState}},{key:"isMouseEvent",value:function(){return mi.pointerEvents.includes(this.type)||mi.mouseEvents.includes(this.type)}},{key:"isKeyboardEvent",value:function(){return!this.isMouseEvent()&&mi.keyboardEvents.includes(this.type)}},{key:"stop",value:function(){this.stopped=
!0;this.domEvt&&"function"===typeof this.domEvt.stopPropagation&&this.domEvt.stopPropagation();this.domEvt&&"function"===typeof this.domEvt.preventDefault&&this.domEvt.preventDefault();this.onStopCallbacks.forEach(function(a){return a()})}},{key:"targetMorph",get:function(){return this.targetMorphs[0]}},{key:"timestamp",get:function(){return this.domEvt.timeStamp}},{key:"position",get:function(){if(!this.domEvt)return mi.pt(0,0);for(var a=this.domEvt.composedPath()[0];a&&a.id!==this.world.id;)a=a.parentNode;
if(!a){a=this.domEvt.composedPath()[0]||this.domEvt.target;var d=this.world.env.domEnv.document;a=(a.nodeType===a.DOCUMENT_NODE?a:d).getElementById(this.world.id)}if(!a)return console.error("event position: cannot find world node for determining the position!"),mi.pt(0,0);a=mi.cumulativeOffset(a);d=this.domEvt;a=mi.pt((d.pageX||0)-a.left,(d.pageY||0)-a.top);1!==this.world.scale&&(a=a.scaleBy(1/this.world.scale));return a}},{key:"startPosition",get:function(){return this.state.clickedOnPosition}},
{key:"pressure",get:function(){return this.domEvt?this.domEvt.pressure:.5}},{key:"positionIn",value:function(a){return a.localize(this.position)}},{key:"isClickTarget",value:function(a){var d=this.state.clickedOnMorph;return d&&(a===d||a.isAncestorOf(d))}},{key:"leftMouseButtonPressed",value:function(){return this.domEvt?1===this.domEvt.buttons:!1}},{key:"rightMouseButtonPressed",value:function(){return this.domEvt?2===this.domEvt.buttons:!1}},{key:"middleMouseButtonPressed",value:function(){return this.domEvt?
4===this.domEvt.buttons:!1}},{key:"isCommandKey",value:function(){var a=this.domEvt;if(!a)return!1;var d=!1;mi.bowser.mac||(d=d||a.ctrlKey);if(mi.bowser.tablet||mi.bowser.tablet)d=d||!1;return d||a.metaKey||"Meta"===a.keyIdentifier}},{key:"isShiftDown",value:function(){return this.domEvt&&!!this.domEvt.shiftKey}},{key:"isCtrlDown",value:function(){return this.domEvt&&!!this.domEvt.ctrlKey}},{key:"isAltDown",value:function(){return this.domEvt&&!!this.domEvt.altKey}},{key:"keyCombo",get:function(){return this._keyCombo||
(this._keyCombo=mi.Keys.eventToKeyCombo(this.domEvt))}},{key:"keyCombo",set:function(a){return this._keyCombo=a}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Event"}}],c,{pathInPackage:function(){return"./events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:907,end:5030})}(void 0);mi.Event=wH;mi.Event=
wH;var xH=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),g=c.hasOwnProperty("KeyEvent")&&"function"===typeof c.KeyEvent?c.KeyEvent:c.KeyEvent=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d,f,k,n,p,q){console.assert(mi.keyLikeEvents.includes(a),"not a keyboard event: "+a);ie._get(Object.getPrototypeOf(g.prototype),
Symbol["for"]("lively-instance-initialize"),this).call(this,a,d,f,k,n,p,q);Object.assign(this,mi.Keys.canonicalizeEvent(d))}},{key:"isKeyEvent",get:function(){return!0}},{key:"hasArrowPressed",get:function(){var a=this.domEvt.keyCode;return 37<=a||40>=a?!0:!1}},{key:"hasCharacterPressed",get:function(){var a=this.domEvt.keyCode;return 48<=a&&57>=a||65<=a&&90>=a||97<=a&&122>=a?!0:!1}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"KeyEvent"}}],c,{pathInPackage:function(){return"./events/Event.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5038,end:5982})}(mi.Event);mi.KeyEvent=xH;mi.KeyEvent=xH;var yH=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),g=c.hasOwnProperty("SimulatedDOMEvent")&&"function"===typeof c.SimulatedDOMEvent?c.SimulatedDOMEvent:c.SimulatedDOMEvent=function(a){if(!a||
!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(a.position){var d=a.position,f=d.x;d=d.y;a=mi.obj.dissoc(a,["position"]);a.pageX=f;a.pageY=d}!a.hasOwnProperty("pointerId")&&mi.mouseEvents.concat(mi.pointerEvents).includes(a.type)&&(a=Object.assign({},a,{pointerId:1}));Object.assign(this,
Object.assign({type:void 0,target:void 0,pageX:void 0,pageY:void 0,pointerId:void 0,pointerType:"mouse",buttons:0,keyCode:void 0,keyString:"",keyIdentifier:void 0,altKey:!1,ctrlKey:!1,shiftKey:!1,metaKey:!1,stopped:!1},a))}},{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"composedPath",value:function(){return[this.target]}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"SimulatedDOMEvent"}}],
c,{pathInPackage:function(){return"./events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5990,end:7010})}(void 0);mi.SimulatedDOMEvent=yH;mi.SimulatedDOMEvent=yH;var bg=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js");bg.dragStartEvent=function(b,c,g,a,d,f,k){var n=(new bg.Event("morphicdragstart",
b,c,[g],d,f,k)).onDispatch(function(){a.draggedMorph=g;a.dragStartMorphPosition=g.position;a.dragStartPosition=n.position;a.lastDragPosition=n.position;a.dragDelta=bg.pt(0,0);a.absDragDelta=bg.pt(0,0)}).onStop(function(){a.draggedMorph=null;c.schedule(bg.dragEndEvent(b,c,g,a,d,f,k))});return n};bg.dragEvent=function(b,c,g,a,d,f,k){var n=(new bg.Event("morphicdrag",b,c,[a.draggedMorph],d,f,k)).onDispatch(function(){a.dragDelta=(a.draggedMorph.owner||c.world).getInverseTransform().transformDirection(n.position.subPt(a.lastDragPosition));
a.absDragDelta=n.position.subPt(a.clickedOnPosition)}).onAfterDispatch(function(){return a.lastDragPosition=n.position}).onStop(function(){a.draggedMorph=null;c.schedule(bg.dragEndEvent(b,c,g,a,d,f,k))});return n};bg.dragEndEvent=function(b,c,g,a,d,f,k){var n=a.draggedMorph||g,p=(new bg.Event("morphicdragend",b,c,[n],d,f,k)).onDispatch(function(){a.dragDelta=(n.owner||c.world).getInverseTransform().transformDirection(p.position.subPt(a.lastDragPosition));a.absDragDelta=p.position.subPt(a.clickedOnPosition)}).onAfterDispatch(function(){a.draggedMorph=
null;a.lastDragPosition=null;a.dragDelta=bg.pt(0,0);a.absDragDelta=bg.pt(0,0);a.dragStartMorphPosition=null;a.dragStartPosition=null});return p};bg.focusEvents=function(b,c){var g=b.eventState;if(g.focusedMorph===c)return[];b=[];g.focusedMorph&&b.push((new bg.Event("blur",null,this,[g.focusedMorph],null,null,null)).onDispatch(function(){return g.focusedMorph=null}));b.push((new bg.Event("focus",null,this,[c],null,null,null)).onDispatch(function(){return g.focusedMorph=c}));return b};bg.arr=mh;bg.fun=
wn;bg.Path=Nh;bg.promise=ai;bg.pt=Ij;bg.config=al;bg.TextInput=gT;bg.KillRing=iT;bg.Event=wH;bg.KeyEvent=xH;bg.SimulatedDOMEvent=yH;bg.keyLikeEvents=vH;bg.cumulativeOffset=cw;bg.bowser=Bs;bg.touchInputDevice=uo;bg.domEventsWeListenTo=[{type:"pointerdown",capturing:!1},{type:"pointerup",capturing:!1},{type:"pointermove",capturing:!1,passive:!1},{type:"pointerover",capturing:!1,passive:!1},{type:"pointerout",capturing:!1,passive:!1},{type:"contextmenu",capturing:!1},{type:"wheel",capturing:!1,passive:!1},
{type:"scroll",capturing:!0,passive:!1},{type:"drag",capturing:!1},{type:"dragstart",capturing:!1},{type:"dragend",capturing:!1},{type:"dragover",capturing:!1},{type:"dragenter",capturing:!1},{type:"dragleave",capturing:!1},{type:"drop",capturing:!1}];bg.eventsCausingImmediateRender=new Set(["pointerdown","pointerup","keydown","keyup","input"]);bg.globalDomEventsWeListenTo=[{type:"resize",capturing:!1,morphMethod:"onWindowResize"},{type:"orientationchange",capturing:!1,morphMethod:"onWindowResize"},
{type:"scroll",capturing:!1,passive:!1,morphMethod:"onWindowScroll"},{type:"wheel",capturing:!1,passive:!1,morphToMethod:"onMouseWheel"},{type:"beforeunload",capturing:!1,passive:!1,morphMethod:"onBeforeUnload"}];bg.typeToMethodMap={pointerdown:"onMouseDown",pointerup:"onMouseUp",pointermove:"onMouseMove",longclick:"onLongClick",hoverin:"onHoverIn",hoverout:"onHoverOut",morphicdrag:"onDrag",morphicdragstart:"onDragStart",morphicdragend:"onDragEnd",grab:"onGrab",morphicdrop:"onDrop",morphicdrophoverin:"onDropHoverIn",
morphicdrophoverout:"onDropHoverOut",morphicdrophoverupdate:"onDropHoverUpdate",keydown:"onKeyDown",keyup:"onKeyUp",input:"onTextInput",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd",blur:"onBlur",focus:"onFocus",contextmenu:"onContextMenu",cut:"onCut",copy:"onCopy",paste:"onPaste",scroll:"onScroll",wheel:"onMouseWheel",drag:"onNativeDrag",dragstart:"onNativeDragstart",dragend:"onNativeDragend",dragover:"onNativeDragover",dragenter:"onNativeDragenter",
dragleave:"onNativeDragleave",drop:"onNativeDrop"};bg.focusTargetingEvents="keydown keyup keypress input compositionstart compositionupdate compositionend cut copy paste".split(" ");bg.textOnlyEvents=["input","compositionstart","compositionupdate","compositionend"];var mT=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js"),g=c.hasOwnProperty("EventDispatcher")&&"function"===typeof c.EventDispatcher?c.EventDispatcher:c.EventDispatcher=function(a){if(!a||
!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d){this.activations=0;this.emitter=a;this.keyInputHelper=null;this.world=d;this.installed=!1;this.handlerFunctions=[];this.killRing=new bg.KillRing(bg.config.text.clipboardBufferLength);this.nodeMorphMap=new WeakMap;this.timestampBase=bg.Path("performance.timing.navigationStart").get(a)||0;this.resetState()}},
{key:"resetState",value:function(){this.eventState={timeOfLastActivity:0,focusedMorph:null,clickedOnPosition:null,clickedOnMorph:null,clickCount:0,prevClick:{},draggedMorph:null,dragDelta:null,absDragDelta:null,lastDragPosition:null,dragStartMorphPosition:null,dragStartPosition:null,hover:{hoveredOverMorphs:[],unresolvedPointerOut:!1},scroll:{interactiveScrollInProgress:null},keyInputState:null,pressedKeys:{},html5Drag:{},dropHoverTarget:null};this.resetKeyInputState()}},{key:"resetKeyInputState",
value:function(){this.eventState.keyInputState={keyChain:"",count:void 0}}},{key:"focusMorph",value:function(a){var d=this;this.keyInputHelper&&this.keyInputHelper.focus(a,this.world);bg.focusEvents(this,a).forEach(function(f){return d.dispatchEvent(f)})}},{key:"isMorphFocused",value:function(a){return this.eventState.focusedMorph===a}},{key:"isMorphHovered",value:function(a){return this.eventState.hover.hoveredOverMorphs.includes(a)}},{key:"isMorphClicked",value:function(a){return this.eventState.clickedMorph==
a}},{key:"isKeyPressed",value:function(a){return Object.keys(this.eventState.pressedKeys).map(function(d){return d.toLowerCase()}).includes(a.toLowerCase())}},{key:"whenIdle",value:function(){var a=this;return bg.promise.waitFor(function(){return 0===a.activations})}},{key:"install",value:function(a){var d=this;if(this.installed)return this;this.installed=!0;var f=this.emitter,k=System.global;bg.domEventsWeListenTo.forEach(function(n){var p=n.type,q=n.capturing;n=n.passive;var r=function(t){return d.dispatchDOMEvent(t)};
d.handlerFunctions.push({node:f,type:p,fn:r,capturing:q});f.addEventListener(p,r,{capture:q,passive:n})});k.addEventListener&&bg.globalDomEventsWeListenTo.forEach(function(n){var p=n.type,q=n.capturing,r=n.morphMethod;n=n.passive;var t=function(w){return d.dispatchDOMEvent(w,d.world,r)};d.handlerFunctions.push({node:k,type:p,fn:t,capturing:q});k.addEventListener(p,t,{capture:q,passive:n})});this.keyInputHelper=(new bg.TextInput(this)).install(a,this.world);bg.bowser.ios&&a.setAttribute("touch-action",
"auto");return this}},{key:"uninstallHandler",value:function(a){var d=this.handlerFuntions.find(function(f){return f.type==a});d&&d.node.removeEventListener(d.node,d.fn,d.capturing)}},{key:"uninstall",value:function(){this.installed=!1;var a=this.handlerFunctions;a.forEach(function(d){d.node.removeEventListener(d.type,d.fn,d.capturing)});a.length=0;this.keyInputHelper&&this.keyInputHelper.uninstall();this.keyInputHelper=null;return this}},{key:"processDOMEvent",value:function(a,d){var f=this,k=a.type,
n=this.eventState,p=[d].concat(d.ownerChain()),q="touch"===a.pointerType,r=a.pointerId,t=a.composedPath()[0],w="number"===typeof r&&(bg.touchInputDevice||a.isPrimary),x=w?this.world.handForPointerId(r,a.isPrimary):this.world.firstHand,B=w&&!q?this.world.haloForPointerId(r):null,D=w&&!q?this.world.layoutHaloForPointerId(r):null,F=new (bg.keyLikeEvents.includes(k)?bg.KeyEvent:bg.Event)(k,a,this,p,x,B,D),L=[F];w=[];switch(k){case "keydown":n.pressedKeys[F.key]=!0;break;case "keyup":"Meta"===F.key?n.pressedKeys=
{}:delete n.pressedKeys[F.key];break;case "click":L=this.processDOMEvent(new bg.SimulatedDOMEvent(Object.assign({},a,{type:"pointerdown"})),d).events;k=this.processDOMEvent(new bg.SimulatedDOMEvent(Object.assign({},a,{type:"pointerup"})),d).events;L=L.concat(k);break;case "pointerdown":F.onDispatch(function(){f.focusMorph(d);n.clickedOnMorph=d;n.clickedOnPosition=F.position;n.downTimeStamp=a.timeStamp;var G=!1,oa=0;if(n.prevClick){oa=n.prevClick;G=oa.clickedOnMorph;oa.clickedOnPosition;var ha=oa.clickedAtTime;
oa=oa.clickCount;ha=Date.now()-ha;G=G===d&&ha<bg.config.repeatClickInterval}n.clickCount=G?oa+1:1});break;case "pointerup":F.onAfterDispatch(function(){var G=n.clickedOnMorph,oa=n.clickedOnPosition,ha=n.clickCount,Ha=Date.now();n.prevClick={clickedOnMorph:G,clickedOnPosition:oa,clickedAtTime:Ha,clickCount:ha};n.clickedOnMorph=null;n.clickCount=0;G=a.timeStamp-n.downTimeStamp;oa=n.clickedOnPosition.dist(F.position);ha=bg.config.longClick;Ha=ha.minDur;var Va=ha.maxDur;oa<ha.maxDist&&G>=Ha&&G<=Va&&(G=
new bg.Event("longclick",a,f,p,x,B,D),f.schedule(G))});n.draggedMorph&&(L.push(bg.dragEndEvent(a,this,d,n,x,B,D)),F.targetMorphs=bg.arr.uniq([n.draggedMorph].concat(hb(F.targetMorphs),[this.world])));x.carriesMorphs()&&(n.dropHoverTarget?(L.push(new bg.Event("morphicdrophoverout",a,this,[n.dropHoverTarget],x,B,D)),d=n.dropHoverTarget,n.dropHoverTarget=null):d=x.findDropTarget(F.position,x.grabbedMorphs),x.isAncestorOf(d)&&(d=this.world),L.push(new bg.Event("morphicdrop",a,this,[d],x,B,D)),F.targetMorphs=
[this.world]);break;case "pointermove":x.carriesMorphs()?(F.targetMorphs=[this.world],k=x.findDropTarget(F.position,x.grabbedMorphs)||this.world,n.dropHoverTarget===k?L.push(new bg.Event("morphicdrophoverupdate",a,this,[k],x,B,D)):(n.dropHoverTarget&&L.push(new bg.Event("morphicdrophoverout",a,this,[n.dropHoverTarget],x,B,D)),n.dropHoverTarget=k,L.push(new bg.Event("morphicdrophoverin",a,this,[k],x,B,D)))):n.draggedMorph?(F.targetMorphs=[this.world],L.push(bg.dragEvent(a,this,d,n,x,B,D))):n.clickedOnMorph&&
n.clickedOnPosition&&n.clickedOnMorph.draggable&&!n.draggedMorph&&!x.carriesMorphs()&&(k=n.clickedOnPosition.dist(F.position),q=n.clickedOnMorph,k>q.dragTriggerDistance&&(q.grabbable?L.push(new bg.Event("grab",a,this,[q],x,B,D)):q.draggable&&L.push(bg.dragStartEvent(a,this,q,n,x,B,D)),F.targetMorphs=[this.world]));break;case "pointerover":n.hover.unresolvedPointerOut&&(n.hover.unresolvedPointerOut=!1);k=[d].concat(d.ownerChain()).reverse();L=bg.arr.withoutAll(n.hover.hoveredOverMorphs,k).map(function(G){return(new bg.Event("hoverout",
a,f,[G],x,B,D)).onDispatch(function(){return bg.arr.remove(n.hover.hoveredOverMorphs,G)})});k=bg.arr.withoutAll(k,n.hover.hoveredOverMorphs).map(function(G){return(new bg.Event("hoverin",a,f,[G],x,B,D)).onDispatch(function(){return bg.arr.pushIfNotIncluded(n.hover.hoveredOverMorphs,G)})});L=L.concat(k);break;case "pointerout":L=[];n.hover.unresolvedPointerOut=!0;w.push(function(){if(n.hover.unresolvedPointerOut)return Promise.all(n.hover.hoveredOverMorphs.map(function(G){return f.schedule((new bg.Event("hoverout",
a,f,[G],x,B,D)).onAfterDispatch(function(){return bg.arr.remove(n.hover.hoveredOverMorphs,G)}))}))});q&&this.world.removeHandForPointerId(r);break;case "blur":L=[(new bg.Event(k,a,this,[d],x,B,D)).onDispatch(function(){return n.focusedMorph=null})];break;case "focus":L=bg.focusEvents(this,d);break;case "scroll":L=[(new bg.Event(k,a,this,[d],x,B,D)).onDispatch(function(){if(!n.scroll.interactiveScrollInProgress){var G=bg.promise.deferred(),oa=G.promise,ha=G.resolve;G="Firefox"==bg.bowser.name?500:
250;"Safari"==bg.bowser.name&&(G=1E3);n.scroll.interactiveScrollInProgress=oa;oa.debounce=bg.fun.debounce(G,function(){n.scroll.interactiveScrollInProgress=null;ha()})}n.scroll.interactiveScrollInProgress.debounce();oa=t.documentElement||t;G=oa.scrollLeft;var Ha=oa.scrollTop,Va=d.scroll,hc=Va.x;Va=Va.y;if("hidden"!=oa.style.overflow&&hc!==G||Va!==Ha)d.scroll=bg.pt(G,Ha)})];break;case "input":case "compositionstart":case "compositionupdate":case "compositionend":d.isText?F.targetMorphs=[d]:L=[];break;
case "drag":case "dragstart":case "dragend":case "dragover":case "dragenter":case "dragleave":case "drop":"drop"!==k&&"dragover"!==k||a.preventDefault()}return{events:L,later:w}}},{key:"schedule",value:function(a){var d=this;this.activations++;return Promise.resolve().then(function(){return d.dispatchEvent(a)}).then(function(){return d.activations--},function(f){d.activations--;throw f;})}},{key:"dispatchEvent",value:function(a,d){d=d||bg.typeToMethodMap[a.type];if(!d)throw Error("dispatchEvent: ".concat(a.type,
" not yet supported!"));a.onDispatchCallbacks.forEach(function(n){return n()});this.activations++;for(var f,k=a.targetMorphs.length-1;0<=k;k--){try{a.targetMorphs[k][d](a)}catch(n){f=Error("Error in event handler ".concat(a.targetMorphs[k],".").concat(d,": ").concat(n.stack||n)),f.originalError=n,"undefined"!==typeof this.world?this.world.logError(f):console.error(f)}if(f||a.stopped)break}this.activations--;a.onAfterDispatchCallbacks.forEach(function(n){return n()});if(f)throw f;}},{key:"dispatchDOMEvent",
value:function(a,d,f){var k=this,n=this.world,p=this.eventState,q=this.nodeMorphMap,r=a.type;p.timeOfLastActivity=this.timestampBase+a.timeStamp;if(!d&&bg.focusTargetingEvents.includes(r))d=p.focusedMorph||n;else if(!d){for(p=a.composedPath()[0];;){d=p.className||"";"string"!==typeof d&&"baseVal"in d&&(d=d.baseVal);if(d&&d.includes("Morph"))break;if(!(p=p.parentNode))return}d=q.get(p);if(!d){var t=p.id;(d=n.withAllSubmorphsDetect(function(w){return w.id===t}))&&q.set(p,d)}}d&&(a=this.processDOMEvent(a,
d),q=a.events,a.later.map(function(w){k.activations++;return bg.promise.delay(0).then(w).then(function(){return k.activations--},function(x){k.activations--;throw x;})}),q.forEach(function(w){return k.dispatchEvent(w,f)}),n&&n.needsRerender()&&bg.eventsCausingImmediateRender.has(r)&&n.env.renderer.renderLater())}},{key:"simulateDOMEvents",value:function(){for(var a=this.emitter.document||this.emitter.ownerDocument,d=[],f=arguments.length,k=Array(f),n=0;n<f;n++)k[n]=arguments[n];for(f=0;f<k.length;f++){var p=
n=k[f],q=p.target,r=p.position;p=p.type;if(bg.focusTargetingEvents.includes(p)){if(!this.keyInputHelper.domState.textareaNode)throw Error("Cannot simulate event of type ".concat(p,", no keyInputHelper installed!"));n=Object.assign({},n,{target:this.keyInputHelper.textareaNode})}q||(q=r?this.world.morphsContainingPoint(r)[0]:this.world);q.isMorph&&(n=Object.assign({},n,{target:a.getElementById(q.id)}));n.position&&(q=bg.cumulativeOffset(a.getElementById(this.world.id)),n.position=n.position.addXY(q.left,
q.top));"scroll"===p&&("scrollLeft"in n||"scrollTop"in n)&&(n.target.scrollLeft=n.scrollLeft||0,n.target.scrollTop=n.scrollTop||0);n=new bg.SimulatedDOMEvent(n);d.push(n);this.dispatchDOMEvent(n)}return d}},{key:"doCopy",value:function(a){return this.keyInputHelper.doCopy(a)}},{key:"doCopyWithMimeTypes",value:function(a){return this.keyInputHelper.doCopyWithMimeTypes(a)}},{key:"doPaste",value:function(){return this.keyInputHelper.doPaste()}},{key:"cancelGrab",value:function(a,d){var f=this,k=[],n=
this.eventState;n.clickedOnMorph=null;n.dropHoverTarget&&(k.push(new bg.Event("morphicdrophoverout",d.domEvt,this,[n.dropHoverTarget],a,null,null)),n.dropHoverTarget=null);k.forEach(function(p){return f.dispatchEvent(p)})}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"EventDispatcher"}}],c,{pathInPackage:function(){return"./events/EventDispatcher.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7012,end:30503})}(void 0);bg["default"]=mT;var Lj=window.lively.FreezerRuntime.recorderFor("lively.morphic/env.js");Lj.defaultDOMEnv=CC;Lj.Renderer=sH;Lj.FontMetric=cT;Lj.ChangeManager=tH;Lj.UndoManager=WA;Lj.EventDispatcher=mT;Lj.subscribe=Wp;Lj.unsubscribe=Ar;Lj.clearStylePropertiesForClassesIn=MC;var qo=Lc("aF",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/env.js"),g=c.hasOwnProperty("MorphicEnv")&&
"function"===typeof c.MorphicEnv?c.MorphicEnv:c.MorphicEnv=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=this,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Lj.defaultDOMEnv();this.initialized=!1;this.synchronizer=this.objPool=this.systemChangeHandlers=this.world=this.eventDispatcher=this.renderer=this.fontMetric=
null;this.changeManager=new Lj.ChangeManager;this.undoManager=new Lj.UndoManager;this.installSystemChangeHandlers();this.whenRenderedRequesters=new Map;this.whenRenderedTickingProcess=null;"function"===typeof d.then?this._waitForDOMEnv=d.then(function(f){a._waitForDOMEnv=null;a.initWithDOMEnv(f);a.initialized=!0})["catch"](function(f){return console.error("Error initializing MorphicEnv with dom env: ".concat(f.stack))}):(this.initWithDOMEnv(d),this.initialized=!0)}},{key:"isDefault",value:function(){return this.constructor["default"]()===
this}},{key:"initWithDOMEnv",value:function(a){this.domEnv=a;this.fontMetric=Lj.FontMetric.forDOMEnv(a)}},{key:"uninstallWorldRelated",value:function(){this.renderer&&this.renderer.clear();this.eventDispatcher&&this.eventDispatcher.uninstall();this.world&&this.world.suspendSteppingAll()}},{key:"uninstall",value:function(){var a=this;if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return a.uninstall()});this.deleteHistory();this.uninstallWorldRelated();this.fontMetric&&(this.fontMetric.uninstall(),
this.fontMetric=null);this.domEnv&&this.whenRenderedTickingProcess&&(this.domEnv.window.cancelAnimationFrame(this.whenRenderedTickingProcess),this.whenRenderedTickingProcess=null);this.whenRenderedRequesters=new Map;this.domEnv&&this.domEnv.destroy();this.initialized=!1;return Promise.resolve()}},{key:"setWorld",value:function(a){var d=this,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.renderer?this.renderer.rootNode:this.domEnv.document.body;return this._waitForDOMEnv?this._waitForDOMEnv.then(function(){return d.setWorld(a)}):
this.setWorldRenderedOn(a,f)}},{key:"setWorldRenderedOn",value:function(a,d){var f=this,k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!a||!a.isWorld)throw Error("world object does not look like a morphic world");if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return f.setWorldRenderedOn(a,d,k)});this.deleteHistory();this.uninstallWorldRelated();this.world=a;this.renderer=new Lj.Renderer(a,d,this.domEnv);this.renderer.domNode=k;this.eventDispatcher=(new Lj.EventDispatcher(a.isEmbedded?
d:this.domEnv.window,a)).install(d);a.resumeSteppingAll();this.isDefault()&&(this.domEnv.window.$world=a);a.stealFocus||a.focus();a.makeDirty();this.renderer.renderLater();return a.whenRendered().then(function(){return f})}},{key:"installSystemChangeHandlers",value:function(){var a=this;if(!this.systemChangeHandlers){var d=this.systemChangeHandlers={};d["lively.modules/moduleloaded"]=[Lj.subscribe("lively.modules/moduleloaded",function(f){return a.getTargetsFor("onModuleLoaded").forEach(function(k){return k.onModuleLoaded(f)})})];
d["lively.modules/modulechanged"]=[Lj.subscribe("lively.modules/modulechanged",function(f){Lj.clearStylePropertiesForClassesIn(f.module);a.getTargetsFor("onModuleChanged").forEach(function(k){return k.onModuleChanged(f)})})];d["lively.partsbin/partpublished"]=[Lj.subscribe("lively.partsbin/partpublished",function(f){return a.getTargetsFor("onPartPublished").forEach(function(k){return k.onPartPublished(f)})})];d["lively.user/userchanged"]=[Lj.subscribe("lively.user/userchanged",function(f){return a.getTargetsFor("onUserChanged").forEach(function(k){return k.onUserChanged(f)})})]}}},
{key:"uninstallSystemChangeHandlers",value:function(){var a=this.systemChangeHandlers;a&&(this.systemChangeHandlers=null,Object.keys(a).forEach(function(d){return a[d].forEach(function(f){return Lj.unsubscribe(d,f)})}))}},{key:"getTargetsFor",value:function(a){var d=this.world,f=[];if(!d||!d.submorphs)return f;"function"===typeof d[a]&&f.push(d);d=ba(d.submorphs);var k;try{for(d.s();!(k=d.n()).done;){var n=k.value;"function"===typeof n[a]&&f.push(n);n.isWindow&&n.targetMorph&&"function"===typeof n.targetMorph[a]&&
f.push(n.targetMorph)}}catch(p){d.e(p)}finally{d.f()}return f}},{key:"cleanupCaches",value:function(){this.world.withAllSubmorphsDo(function(a){return a._pathDependants=a._pathDependants.filter(function(d){return d.world()})})}},{key:"deleteHistory",value:function(){var a=this.changeManager,d=this.world,f=this.fontMetric;a&&(a.changes.length=0);d&&d.withAllSubmorphsDo(function(k){return k.undoManager&&k.undoManager.reset()});f&&f.reset()}},{key:"printStatus",value:function(){var a=this.changeManager,
d=this.world,f=0,k=0;d&&d.withAllSubmorphsDo(function(n){n.undoManager&&(f++,k+=n.undoManager.undos.length+n.undoManager.redos.length)});return"".concat(a.changes.length," changes recorded\n").concat(f," morphs with undos\n").concat(k," undo changes")}},{key:"updateWhenRenderedRequests",value:function(){var a=this,d=this.whenRenderedRequesters,f=0,k=ba(d),n;try{for(k.s();!(n=k.n()).done;){var p=Nb(n.value,2),q=p[0],r=p[1],t=r.maxAttempts,w=r.resolve,x=r.reject;q._dirty||q._rendering?++r.currentAttempt>
t?(d["delete"](q),x(Error("Failed to wait for whenRendered of ".concat(q," (tried ").concat(t,"x)")))):f++:(d["delete"](q),w(q))}}catch(B){k.e(B)}finally{k.f()}this.whenRenderedTickingProcess=f?this.domEnv.window.requestAnimationFrame(function(){return a.updateWhenRenderedRequests()}):null}},{key:"whenRendered",value:function(a){var d=this,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:50,k=this.whenRenderedRequesters,n=this.whenRenderedTickingProcess,p=k.get(a);if(!p){var q,r;p=new Promise(function(t,
w){q=t;r=w});k.set(a,p={maxAttempts:f,currentAttempt:0,resolve:q,reject:r,promise:p})}n||(this.whenRenderedTickingProcess=this.domEnv.window.requestAnimationFrame(function(){return d.updateWhenRenderedRequests()}));return p.promise}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MorphicEnv"}},{key:"reset",value:function(){for(;;){var a=this.popDefault();if(!a)break;try{a.uninstall()}catch(d){console.error("Error uninstalling MorphicEnv: ".concat(d.stack||d))}}}},{key:"default",
value:function(){var a=this.envs;a.length||this.pushDefault(new this);return a[a.length-1]}},{key:"pushDefault",value:function(a){this.envs.push(a);return a}},{key:"popDefault",value:function(){return this.envs.pop()}},{key:"envs",get:function(){return this._envs||(this._envs=[])}}],c,{pathInPackage:function(){return"./env.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:469,end:8637})}(void 0));Lj.MorphicEnv=qo;Lj.MorphicEnv=qo;var t3=Object.freeze({__proto__:null,MorphicEnv:qo}),Ds=window.lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js");Ds.printArg=function(b){return Ds.obj.inspect(b,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};Ds.obj=nh;Ds.promise=ai;var nT=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js"),g=c.hasOwnProperty("CommandHandler")&&"function"===typeof c.CommandHandler?
c.CommandHandler:c.CommandHandler=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){this.history=[];this.maxHistorySize=1E3}},{key:"addToHistory",value:function(a){this.history.push(a);this.history.length>this.maxHistorySize&&this.history.splice(0,this.history.length-this.maxHistorySize)}},{key:"printHistory",value:function(){return this.history.map(this.printCommand).join("\n")}},
{key:"printCommand",value:function(a){var d=a.target.string,f=a.args,k=a.count,n=a.evt,p=a.keyCombo;return'"'.concat(a.name,'" ').concat(n?n+" ":"").concat(p?p+" ":"").concat(f?Ds.printArg(f):"").concat("number"===typeof k?" x".concat(k):""," ").concat(d)}},{key:"lookupCommand",value:function(a,d){var f;if(!a)return{};"string"===typeof a&&(f=a);"string"===typeof a.command&&(f=a.command);if(a.exec){var k=a;f=k.name}k||(k=d.commands.find(function(n){return n.name===f}));return{name:f,command:k}}},{key:"exec",
value:function(a,d,f,k,n){var p=this,q=this.lookupCommand(a,d)||{},r=q.name,t=q.command;if(!t)return console.warn("Cannot find command ".concat(r||a)),null;if(r){if(n){var w=n.type;if(n.isKeyEvent)var x=n.keyCombo}this.addToHistory({name:r,target:{string:String(d),id:d.id},args:f,count:k,time:Date.now(),evt:w,keyCombo:x})}var B=d.world();"string"===typeof t.progressIndicator&&(this.progressIndicator=B.execCommand("open loading indicator",t.progressIndicator));if("function"===typeof t.exec)try{var D=
t.exec(d,f,t.handlesCount?k:void 0,n)}catch(F){D=F,a="Error in interactive command ".concat(r,": ").concat(F.stack||F),B?B.logError(a):console.error(a)}else console.error("command ".concat(r," has no exec function!"));this.progressIndicator&&this.progressIndicator.remove();D&&"function"===typeof D["catch"]?(D["catch"](function(F){var L="Error in interactive command ".concat(r,": ").concat(F,"\n").concat(F.stack||F);B?B.logError(L):console.error(L);throw F;}),this.progressIndicator&&Ds.promise["finally"](D,
function(){return p.progressIndicator.remove()})):this.progressIndicator&&this.progressIndicator.remove();D&&"number"===typeof k&&1<k&&!t.handlesCount&&(D="function"===typeof D.then?D.then(function(){return p.exec(t,d,f,k-1,n,null)}):this.exec(t,d,f,k-1,n,null));return D}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"CommandHandler"}}],c,{pathInPackage:function(){return"./CommandHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:174,end:3752})}(void 0);Ds["default"]=nT;var Zg=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js");Zg.ensureSpaces=function(b){return b.length?b:" "};Zg.invokeKeyHandlers=function(b,c){var g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,a=c=Zg.Keys.canonicalizeEvent(c),d=a.key,f=a.data,k,n=!1,p=b.keyhandlers,q=c.keyInputState||{};a=a.keyCombo.startsWith("input-");var r=!1,t=q.count,
w=q.keyChain||"",x=!1;if(!p||g&&a)return!1;for(g=p.length;g--;)if((k=p[g].eventCommandLookup(b,c))&&k.command){x=k;k=x.command;var B=x.args,D=x.passEvent,F=x.count;r=x.keyChain;var L=x.onlyWhenFocused;x=!0;t=F;w=r;r="null"===k;if(L&&(L=b.world())&&L.focusedMorph&&L.focusedMorph!==b)continue;n=r?!1:b.execCommand(k,B,F,c);!n||a&&"insertstring"===k||D||"function"!==typeof c.stop||c.stop();if(n||r)break}n||r||!a||!b.onTextInput||w||(n=b.execCommand("insertstring",{string:f||d,undoGroup:Zg.config.text.undoGroupDelay},
q.count,c));if(x)if("function"===typeof c.onAfterDispatch)c.onAfterDispatch(function(){q.count=n?void 0:t;q.keyChain=n?"":w});else q.count=n?void 0:t,q.keyChain=n?"":w;return n&&!r};Zg.simulateKeys=function(b,c){return QC.apply(this,arguments)};Zg.simulateKey=function(b,c,g){return Zg.invokeKeyHandlers(b,Object.assign({},Zg.Keys.keyComboToEventSpec(c),{keyInputState:g}))};Zg.bowserOS=function(){return Zg.bowser.mac?"mac":Zg.bowser.windows?"windows":Zg.bowser.windowsphone?"windowsphone":Zg.bowser.linux?
"linux":Zg.bowser.chromeos?"chromeos":Zg.bowser.android?"android":Zg.bowser.ios?"ios":Zg.bowser.blackberry?"blackberry":Zg.bowser.firefoxos?"firefoxos":Zg.bowser.webos?"webos":Zg.bowser.bada?"bada":Zg.bowser.tizen?"tizen":Zg.bowser.sailfish?"sailfish":"unknown"};Zg.findKeysForPlatform=RC;Zg.Keys=uH;Zg.bowser=Bs;Zg.config=al;Zg.arr=mh;Zg.findKeysForPlatform=RC;Zg.regexps={meta:/Meta|Cmd|Command/gi,alt:/Alt/gi,ctrl:/Ctrl|Control/gi,tab:/Tab/gi,enter:/Enter|Return/gi,shift:/Shift/gi,backspace:/Backspace/gi,
"delete":/del(ete)?/gi,left:/left/gi,right:/right/gi,up:/up/gi,down:/down/gi,keySpacer:/([^-])-/g,seqSpacer:/([^\s])\s/g};var XA=Lc("b1",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js"),g=c.hasOwnProperty("KeyHandler")&&"function"===typeof c.KeyHandler?c.KeyHandler:c.KeyHandler=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),
value:function(){this.platform=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Zg.bowserOS();this.keyBindings={}}},{key:"eventCommandLookup",value:function(a,d){return this.lookup(d.keyCombo,d.keyInputState)}},{key:"lookup",value:function(a){var d=this,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{keyChain:void 0,count:void 0};a=Zg.Keys.canonicalizeKeyCombo(a);var k=f.keyChain||"";f=f.count;if(!k&&a.startsWith("Ctrl-")){var n=a.match(/^Ctrl-([0-9]+)/);if(n)return{command:"null",
count:parseInt(("number"===typeof f?f:"")+n[1])};if("Ctrl-U"===a)return{command:"null",count:4,keyChain:"Ctrl-U"}}n=[a];if(!q&&a.startsWith("input-")){q=a.replace(/^(input-)(.*)$/,function(r,t,w){return t+w.toUpperCase()});var p=a.replace(/^(input-)(.*)$/,function(r,t,w){return t+w.toLowerCase()});n.push(q,p)}var q=n.map(function(r){return d.keyBindings[r]})[0];k&&(n=n.find(function(r){return d.keyBindings[k+" "+r]}))&&(k+=" "+n,q=this.keyBindings[k]||q);if(q&&"chainKeys"===q)return k=k||a,q={command:"null",
keyChain:k},void 0!==f&&(q.count=f),q;if(q)return q="object"===Jc(q)?Object.assign({},q):{command:q},void 0!==f&&(q.count=f),q}},{key:"bindKey",value:function(a,d){var f=this;"object"===Jc(a)&&a&&!Array.isArray(a)&&(a=Zg.findKeysForPlatform(a,this.platform));if(a){if("function"===typeof d)return this.addCommand({exec:d,bindKey:a,name:d.name||a});(Array.isArray(a)?a:a.includes("|")?a.split("|"):[a]).forEach(function(k){var n="";if(-1!=k.indexOf(" ")){var p=k.split(/\s+/);k=p.pop();p.forEach(function(q){q=
Zg.Keys.canonicalizeKeyCombo(q);n+=(n?" ":"")+q;f.addCommandToBinding(n,"chainKeys")});n+=" "}f.addCommandToBinding(n+Zg.Keys.canonicalizeKeyCombo(k),d)});this.cleanupUnusedKeyChains()}}},{key:"unbindKey",value:function(a){this.bindKey(a,null)}},{key:"cleanupUnusedKeyChains",value:function(){var a=this,d=Object.keys(this.keyBindings),f=d.filter(function(k){return"chainKeys"===a.keyBindings[k]});f=Zg.arr.sortBy(f,function(k){return k.length}).reverse();f.forEach(function(k){d.some(function(n){return k!==
n&&n.startsWith(k)})||(delete a.keyBindings[k],Zg.arr.remove(d,k),Zg.arr.remove(f,k))})}},{key:"addCommand",value:function(a){return a&&a.bindKey?this.addCommandToBinding(a.bindKey,a):void 0}},{key:"addCommandToBinding",value:function(a,d){var f=this;"chainKeys"===this.keyBindings[a]&&"chainKeys"!=d&&Object.keys(this.keyBindings).forEach(function(k){k.startsWith(a)&&delete f.keyBindings[k]});d?this.keyBindings[a]=d:delete this.keyBindings[a];"chainKeys"!==d&&this.cleanupUnusedKeyChains()}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"KeyHandler"}},{key:"invokeKeyHandlers",value:function(a,d){return Zg.invokeKeyHandlers(a,d,2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1)}},{key:"simulateKeys",value:function(a,d,f){return Zg.simulateKeys(a,d,f)}},{key:"withBindings",value:function(a,d){var f=new this(d);a.forEach(function(k){return f.bindKey(k.keys,k.command)});return f}},{key:"prettyCombo",value:function(a){var d=this._prettyCombos||(this._prettyCombos={});return this._prettyCombos[a]?d[a]:d[a]=
a.replace(Zg.regexps.meta,"mac"==Zg.bowserOS()?"\u2318":"\u229e ").replace(Zg.regexps.alt,"mac"==Zg.bowserOS()?"\u2325":"Alt ").replace(Zg.regexps.ctrl,"mac"==Zg.bowserOS()?"\u2303":"Ctrl ").replace(Zg.regexps.tab,"\u21e5").replace(Zg.regexps.enter,"\u23ce").replace(Zg.regexps.shift,"\u21e7").replace(Zg.regexps.backspace,"\u232b").replace(Zg.regexps["delete"],"\u2326").replace(Zg.regexps.left,"\u2192").replace(Zg.regexps.right,"\u2190").replace(Zg.regexps.up,"\u2191").replace(Zg.regexps.down,"\u2193").replace(Zg.regexps.keySpacer,
"$1").replace(Zg.regexps.seqSpacer,"$1-")}},{key:"generateCommandToKeybindingMap",value:function(a){function d(q){if(p[q.id])return p[q.id];var r=n[q.id]||(n[q.id]=q.keyCommandMap);return p[q.id]=Zg.arr.groupBy(Object.keys(r),function(t){return r[t].name})}var f=this,k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,n={},p={};return(1<arguments.length&&void 0!==arguments[1]&&arguments[1]?a.commandsIncludingOwners:a.commands.map(function(q){return{command:q,target:a}})).map(function(q){var r=
q.target;q=q.command;var t=d(r)[q.name];return{keys:t,target:r,command:q,prettyKeys:t&&k?t.map(function(w){return f.prettyCombo(w)}):null}})}}],c,{pathInPackage:function(){return"./events/KeyHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6162,end:13254})}(void 0));Zg["default"]=XA;var zx=window.lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),
u3=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),g=c.hasOwnProperty("Script")&&"function"===typeof c.Script?c.Script:c.Script=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){this.suspended=!1;this.stopped=!0;this.currentTimeout=this.type=this.tickTime=null}},{key:"__additionally_serialize__",
value:function(a,d,f){a.props.suspended.value=!0}},{key:"isScript",get:function(){return!0}},{key:"global",get:function(){return System.global}},{key:"execute",value:function(){throw Error("subclass responsibility");}},{key:"tick",value:function(){try{this.execute()}catch(a){console.error("Error executing script "+this+": "+a+"\n"+a.stack);return}this.stopped||this.startTicking(this.tickTime)}},{key:"startTicking",value:function(a){this.stopped=!1;this.tickTime=a;this.type="number"===typeof a?"setTimeout":
"requestAnimationFrame";this.currentTimeout="setTimeout"===this.type?this.global.setTimeout(this.tick.bind(this),a):this.global.requestAnimationFrame(this.tick.bind(this))}},{key:"stop",value:function(){this.global["setTimeout"===this.type?"clearTimeout":"cancelAnimationFrame"](this.currentTimeout);this.stopped=!0}},{key:"resume",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.tickTime;this.suspended&&(this.suspended=!1,this.startTicking(this.tickTime=a))}},{key:"suspend",
value:function(){this.stop();this.suspended=!0}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Script"}}],c,{pathInPackage:function(){return"./ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:20,end:1374})}(void 0),oT=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),
g=c.hasOwnProperty("TargetScript")&&"function"===typeof c.TargetScript?c.TargetScript:c.TargetScript=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d,f){ie._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this);this.target=a;this.selector=d;this.args=f||[]}},{key:"execute",value:function(){this.target.isMorph&&
!this.target.tickingScripts.includes(this)&&this.stop();"function"===typeof this.target[this.selector]&&this.target[this.selector].apply(this.target,this.args)}},{key:"equals",value:function(a){return a.isScript&&this.target==a.target&&this.selector==a.selector}},{key:"toString",value:function(){return"Script(".concat(this.target,">>").concat(this.selector,"(").concat(this.args.join(","),"))")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"TargetScript"}}],c,{pathInPackage:function(){return"./ticking.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1376,end:1991})}(zx.Script),v3=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),g=c.hasOwnProperty("FunctionScript")&&"function"===typeof c.FunctionScript?c.FunctionScript:c.FunctionScript=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){ie._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this);this.callback=a}},{key:"execute",value:function(){this.callback()}},{key:"equals",value:function(a){return a.isScript&&this.callback==a.callback}},{key:"toString",value:function(){return"Script(".concat(this.callback.toString().replace(/\n/g,"").slice(0,40)+"...",")")}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"FunctionScript"}}],c,{pathInPackage:function(){return"./ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1993,end:2341})}(zx.Script);zx.Script=u3;zx.TargetScript=oT;zx.FunctionScript=v3;var Nk=window.lively.FreezerRuntime.recorderFor("lively.morphic/object-migration.js");Nk.isReference=dL;Nk.removeUnreachableObjects=
Fr;Nk.obj=nh;Nk.Path=Nh;Nk.connect=Xp;Nk.disconnectAll=Wv;Nk.isReference=dL;var zH=[{date:"2017-04-08",name:"Text and Label textAndAttributes format change",description:"\nChanging the format from\n  [[string1, attr1_1, attr1_2], [string2, attr2_1, attr2_2], ...]\nto\n  [string1, attr1, string2, attr2, ...].\n    ",snapshotConverter:function(b){var c=b.snapshot,g;for(g in c){var a=c[g],d=a.props&&a.props.textAndAttributes;if(d){var f=d.value;if(!Array.isArray(f))console.warn("object migrator found textAndAttributes field but it is not an Array!");
else if(f.length&&"string"!==typeof f[0]){f=[].concat.apply([],f);for(var k=0;k<f.length;k+=2){var n=f[k+1];n&&Array.isArray(n)&&(f[k+1]=Object.assign.apply(Object,[{}].concat(hb(n))))}a.props.textAndAttributes=Object.assign({},d,{value:f})}}}return b}},{date:"2017-04-29",name:"Window button fix",description:'\nA recent change in the structure of windows, that now adds a "button wrapper"\nmorph breaks old windows without it.\n',objectConverter:function(b,c){(c=c.refForId(b.id).realObj)&&c.isMorph&&
c.withAllSubmorphsDo(function(g){g.isWindow&&(g.submorphs.some(function(a){return"button wrapper"===a.name})&&g.get("button wrapper").submorphs.some(function(a){return"window menu button"===a.name}),g.minimizedBounds=null,Nk.disconnectAll(g.get("minimize")),Nk.connect(g.get("minimize"),"onMouseDown",g,"minimized",{updater:function(a){a(!this.targetObj.minimized)}}))});return b}},{date:"2017-05-03",name:"Style Sheet Status Fix",description:"\nState management of the style sheets has changes substantially, moving all of the style sheets that are being applied to the world.\n",
snapshotConverter:function(b){var c=b.id,g=b.snapshot,a;for(a in g){var d=g[a].props;d&&d.styleSheets&&(d.styleSheets.value||(d.styleSheets.value=[]),d.styleSheets.value=d.styleSheets.value&&d.styleSheets.value.filter(function(f){f=g[f.id];var k=g[f.props.rules.value.id];return!f.props.styledMorphs&&!("lively.serializer-class-info"in k)}))}Nk.removeUnreachableObjects([c],g);return b}},{date:"2017-05-22",name:"Removal of ChromeTheme and GithubTheme",description:"\nFor now only a simple default theme...\n",
snapshotConverter:function(b){var c=b.snapshot,g;for(g in c){var a=c[g],d=a["lively.serializer-class-info"];d&&("ChromeTheme"===d.className||"GithubTheme"===d.className?(d.className="DefaultTheme",d.module.pathInPackage="ide/themes/default.js"):"JavaScriptTokenizer"===d.className&&delete a["lively.serializer-class-info"])}return b}},{date:"2017-06-20",name:"Unwrapped Style Sheet Props",description:"Style Sheets now store foldable props in their nested format.",objectConverter:function(b,c){(c=c.refForId(b.id).realObj)&&
c.isMorph&&c.withAllSubmorphsDo(function(g){g.styleSheets&&0<g.styleSheets.length&&g.styleSheets.forEach(function(a){for(var d in Nk.obj.dissoc(a.rules,["_rev"]))a.rules[d]=a.unwrapFoldedProps(a.rules[d])})});return b}},{date:"2017-07-13",name:"Renamed style-rules.js to style-sheets.js",snapshotConverter:function(b){var c=b.snapshot,g;for(g in c){var a=c[g]["lively.serializer-class-info"];a&&"StyleSheet"===a.className&&(a.module.pathInPackage="style-sheets.js")}return b}},{date:"2017-07-26",name:"components, ide, and halo extraction",
snapshotConverter:function(b){var c=b.snapshot,g=b.packages,a=g&&g["local://lively-object-modules/"]||{};g=[["lively.morphic/halo","lively.halos"],["lively.morphic/components/markers.js","lively.halos"],["lively.morphic/components/icons.js","lively.morphic"],["lively.morphic/components/loading-indicator.js","lively.components",function(ha){return"{".concat(ha,"}")}],["lively.components/markers.js","lively.halos"],["lively.morphic/ide","lively.ide"],["lively.morphic/text/ui.js","lively.ide",null,"text/ui.js"]];
for(var d in a){var f=a[d]["index.js"],k=ba(g),n;try{for(k.s();!(n=k.n()).done;){var p=Nb(n.value,3),q=p[0],r=p[1],t=p[2];if(t){var w=new RegExp('(import\\s)(.*)(\\sfrom \\"'+q+")","g"),x=w.exec(f);x&&(f=f.replace(w,"import "+t(x[2])+'from "'+r))}else f=f.replace(new RegExp(q,"g"),r)}}catch(ha){k.e(ha)}finally{k.f()}a[d]["index.js"]=f}for(var B in c)if((d=c[B]["lively.serializer-class-info"])&&d.module){n=d.module["package"].name+"/"+d.module.pathInPackage;p=ba(g);var D;try{for(p.s();!(D=p.n()).done;){var F=
Nb(D.value,3),L=F[0],G=F[1],oa=F[2];if(n.includes(L)){d.module["package"].name=G;d.module["package"].version="0.1.0";d.module.pathInPackage=oa||n.substring(n.indexOf(L)+L.length+1)||"index.js";break}}}catch(ha){p.e(ha)}finally{p.f()}}return b}},{date:"2017-10-16",name:"change scroll implementation of list items",objectConverter:function(b,c){c=ba(c.objectRefs());var g;try{for(c.s();!(g=c.n()).done;){var a=g.value.realObj;a.isList&&"function"===typeof a.initializeSubmorphs&&a.initializeSubmorphs()}}catch(d){c.e(d)}finally{c.f()}return b}},
{date:"2017-10-30",name:"change implementation of tree",snapshotConverter:function(b){var c=b.snapshot,g;for(g in c){var a=c[g],d=a["lively.serializer-class-info"];d&&d.module&&("Tree"===d.className&&a.props.submorphs&&(a.props.submorphs.value=[]),"TreeNode"===d.className&&delete c[g],"InspectorTreeData"===d.className&&delete c[g],["PropertyNode","InspectionNode","MorphNode","FoldedNode"].includes(d.className)&&(d.module.pathInPackage="js/inspector/context.js"),"nodeItemContainer"===a.props.name&&
delete c[g])}return b}},{date:"2019-02-17",name:"change storage of commit metadata",snapshotConverter:function(b){var c=b.id,g=b.snapshot;Object.values(g).map(function(a){if(a.props&&a.props.metadata&&Nk.isReference(a.props.metadata.value)&&(a=g[a.props.metadata.value.id],a.props.commit&&Nk.isReference(a.props.commit.value))){var d=g[a.props.commit.value.id].props,f=d.type,k=d.name;d=d._id;f&&k&&d&&(a.props.commit.value='__lv_expr__:({type: "'.concat(f.value,'", name: "').concat(k.value,'", _id: "').concat(d.value,
'"})'))}});Nk.removeUnreachableObjects([c],g);return b}},{date:"2019-07-25",name:"world superclass extraction",snapshotConverter:function(b){var c=b.packages,g,a=Nk.Path(["local://lively-object-modules/","EmptyWorld","index.js"]);if(g=a.get(c))g=g.replace('import { World, morph } from "lively.morphic";','import { morph } from "lively.morphic";\nimport { LivelyWorld as World } from "lively.ide/world.js"').replace('import { World } from "lively.morphic";','import { LivelyWorld as World } from "lively.ide/world.js"'),
a.set(c,g);return b}},{date:"2019-08-05",name:"remove Camphor from system",snapshotConverter:function(b){Object.values(b.snapshot).map(function(c){c.props.fontFamily&&"Camphor"===c.props.fontFamily.value&&(c.props.fontFamily.value="Nunito")});return b}},{date:"2020-10-09",name:"remove style guide",snapshotConverter:function(b){var c=b.snapshot;Object.values(c).map(function(g){g.props.master&&"string"===typeof g.props.master.value&&(g.props.master.value=g.props.master.value.split("styleguide://style guide").join("styleguide://System"));
g.props.master&&g.props.master.value.id&&(g=c[g.props.master.value.id],g.props.auto&&"string"===typeof g.props.auto.value&&(g.props.auto.value=g.props.auto.value.split("styleguide://style guide").join("styleguide://System")))});return b}},{date:"2022-01-10",name:"change semantic of borderRadius property to allow definiton on per-corner basis",snapshotConverter:function(b){Object.values(b.snapshot).map(function(c){if(c.props.borderRadius&&"object"===Jc(c.props.borderRadius.value)&&!c.props.borderRadius.value.hasOwnProperty("topLeft")){var g=
c.props.borderRadius.value;g=g.left===g.right===g.bottom===g.top?g.left:Math.max(g.left,g.right,g.bottom,g.top);c.props.borderRadius.value={topLeft:g,topRight:g,bottomRight:g,bottomLeft:g}}});return b}},{date:"2022-01-14",name:"migrate comments browser to new components architecture and rebuild rather than save the instances",snapshotConverter:function(b){var c=b.id,g=b.snapshot,a=[],d=[];Object.keys(g).map(function(f){var k=g[f];k.props.commentBrowser&&delete g[f].props.commentBrowser;k["lively.serializer-class-info"]&&
("CommentBrowser"===k["lively.serializer-class-info"].className&&a.push(f),"AttributeConnection"===k["lively.serializer-class-info"].className&&d.push(f))});d.forEach(function(f){g[f].props.targetObj.value.id in a&&delete g[f]});a.forEach(function(f){return delete g[f]});Nk.removeUnreachableObjects([c],g);return b}},{date:"2022-01-11",name:"remove prompts.js",snapshotConverter:function(b){var c=b.snapshot,g;for(g in c){var a,d=c[g],f=d["lively.serializer-class-info"];(null===f||void 0===f?0:null===
(a=f.module)||void 0===a?0:a.pathInPackage.endsWith("prompts.js"))&&delete d["lively.serializer-class-info"]}return b}},{date:"2022-01-18",name:"remove old Browser",snapshotConverter:function(b){var c=b.snapshot,g;for(g in c){var a,d=c[g]["lively.serializer-class-info"];(null===d||void 0===d?0:null===(a=d.module)||void 0===a?0:a.pathInPackage.endsWith("browser/index.js"))&&"Browser"===d.name&&delete c[g]}return b}}];Nk.migrations=zH;Nk.migrations=zH;var hg=window.lively.FreezerRuntime.recorderFor("lively.morphic/serialization.js");
hg.normalizeOptions=function(b){b=Object.assign({reinitializeIds:!1,plugins:hg.allPlugins},b);b.reinitializeIds&&(b.reinitializeIds="function"===typeof b.reinitializeIds?b.reinitializeIds:function(c,g){return g.realObj.isMorph?hg.newMorphId(g.realObj.constructor):null});return b};hg.serializeMorph=fw;hg.deserializeMorph=SC;hg.copyMorph=TC;hg.resourceToJSON=eL;hg.findPackagesInFileSpec=fL;hg.packagesOfSnapshot=VC;hg.loadPackagesAndModulesOfSnapshot=gL;hg.loadMorphFromSnapshot=Lr;hg.loadWorldFromResource=
hL;hg.findRequiredPackagesOfSnapshot=iL;hg.createMorphSnapshot=Rt;hg.saveWorldToResource=jL;hg.requiredModulesOfSnapshot=Gr;hg.deserializeWithMigrations=Vy;hg.serialize=Xv;hg.allPlugins=xs;hg.resource=Sk;hg.ast=fS;hg.createFiles=$o;hg.promise=ai;hg.Path=Nh;hg.graph=Ju;hg.arr=mh;hg.MorphicEnv=qo;hg.newMorphId=gz;hg.morph=il;hg.pathForBrowserHistory=ew;hg.migrations=zH;hg.objectScriptingEnabled=!1;hg.serializeMorph=fw;hg.deserializeMorph=SC;hg.copyMorph=TC;hg.packagesOfSnapshot=VC;hg.loadPackagesAndModulesOfSnapshot=
gL;hg.loadMorphFromSnapshot=Lr;hg.loadWorldFromResource=hL;hg.findRequiredPackagesOfSnapshot=iL;hg.createMorphSnapshot=Rt;hg.saveWorldToResource=jL;var ig=window.lively.FreezerRuntime.recorderFor("lively.morphic/components/policy.js");ig.mergeInHierarchy=kL;ig.getEventState=function(b,c){c||(c=[]);var g=b.env,a=g.world,d=g.eventDispatcher;a=a&&a.colorScheme;g=d&&d.isMorphHovered(b);d=d&&d.isMorphClicked(b);c=c.find(function(f){if(f.minWidth||f.maxWidth){var k=f.minWidth;f=f.maxWidth;f=void 0===f?
Infinity:f;return(void 0===k?-Infinity:k)<=b.width&&b.width<f}if(f.minHeight||f.maxHeight)return k=f.minHeight,f=f.maxHeight,f=void 0===f?Infinity:f,(void 0===k?-Infinity:k)<=b.height&&b.height<f});return{matchingBreakpoint:c&&c.master,mode:a,isHovered:g,isClicked:d}};ig.arr=mh;ig.tree=pq;ig.promise=ai;ig.obj=nh;ig.pt=Ij;ig.morph=il;ig.getStylePropertiesFor=NC;ig.getDefaultValueFor=OC;ig.skippedValue=Symbol["for"]("lively.skip-property");ig.PROPS_TO_RESET=["dropShadow","fill","opacity","borderWidth",
"fontColor"];var pT=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/components/policy.js"),g=c.hasOwnProperty("StylePolicy")&&"function"===typeof c.StylePolicy?c.StylePolicy:c.StylePolicy=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:
!0;d&&(this.parent=d);this.inheritStructure=f;this.spec=this.ensureStylePoliciesInSpec(a);if(this.spec.isPolicy)return this.spec}},{key:"parent",get:function(){var a;return(null===(a=this._parent)||void 0===a?0:a.isComponentDescriptor)?this._parent.stylePolicy:this._parent}},{key:"type",get:function(){return this.spec.type}},{key:"name",get:function(){return this.spec.name}},{key:"parent",set:function(a){if(a.isPolicy||a.isComponentDescriptor)this._parent=a;else{var d=a.click,f=a.hover,k=a.light,
n=a.dark,p=a.breakpoints;a=a.auto;this._autoMaster=this._parent=a=void 0===a?this._parent:a;d&&(this._clickMaster=d);f&&(this._hoverMaster=f);k&&(this._lightModeMaster=k);n&&(this._darkModeMaster=n);p&&(this._breakpointMasters=p)}}},{key:"isPolicy",get:function(){return!0}},{key:"isEventPolicy",get:function(){return this._clickMaster||this._hoverMaster}},{key:"isLightDarkModePolicy",get:function(){return this._lightModeMaster||this._darkModeMaster}},{key:"isBreakpointPolicy",get:function(){return!!this._breakpointMasters}},
{key:"overriddenMaster",get:function(){var a=this._getOverriddenMaster(this.spec,this);return a&&a===this?null:(null===a||void 0===a?0:a.isComponentDescriptor)?a.stylePolicy:a}},{key:"_getOverriddenMaster",value:function(a,d){var f;(a=(null===(f=a.master)||void 0===f?void 0:f.stylePolicy)||a.master)&&ig.arr.isSubset(ig.obj.keys(a),["click","auto","hover"])&&!a.auto&&(a.auto=d.parent);return a&&!a.isPolicy?new ig.PolicyApplicator({},a):a}},{key:"__serialize__",value:function(a){var d=this[Symbol["for"]("lively-module-meta")];
if(d)return a.expressionSerializer.exprStringEncode({__expr__:d.exportedName+(d.path.length?".stylePolicy.getSubSpecAt(".concat(d.path.map(function(f){return JSON.stringify(f)}).join(","),")"):".stylePolicy"),bindings:Pc({},d.moduleId,d.exportedName)})}},{key:"addMetaInfo",value:function(a){var d=a.exportedName,f=a.moduleId,k=a.path;k=void 0===k?[]:k;var n=a.range;n=void 0===n?!1:n;var p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this;p.isPolicy&&(p[Symbol["for"]("lively-module-meta")]=
{exportedName:d,moduleId:f,path:k,range:n},p=p.spec);n=ba(p.submorphs||[]);var q;try{for(n.s();!(q=n.n()).done;){var r,t=q.value;"add"===t.COMMAND&&(t=t.props);t.isPolicy&&(k=[].concat(hb(k),[null===(r=t.spec)||void 0===r?void 0:r.name]));this.addMetaInfo({exportedName:d,moduleId:f,path:k},t)}}catch(w){n.e(w)}finally{n.f()}}},{key:"ensureStylePoliciesInSpec",value:function(a){var d=this,f=this.constructor,k=this._getOverriddenMaster(a,this),n=function(t){t=k&&k.getSubSpecFor(t);return!t||t.isPolicy||
t.isComponentDescriptor?t:!1},p=function(t){return ig.tree.mapTree(t,function(w,x){return w.isPolicy?w:w.master&&w!==t||w.master?new f(Object.assign({},ig.obj.dissoc(w,["master"]),{submorphs:x}),w.master,!1):Object.assign({},w,{submorphs:x})},function(w){return w.submorphs||[]})};if(!this.parent||!this.inheritStructure)return p(a);if(this.parent){var q=ig.tree.mapTree(this.parent.spec,function(t,w){var x;"add"===t.COMMAND&&(t=t.props);if("remove"===t.COMMAND)return null;var B=n(t.name||(null===(x=
t.spec)||void 0===x?void 0:x.name));if(t.isPolicy)return new f(B?{master:B}:{},t);t=ig.obj.dissoc(t,["master","submorphs"].concat(hb(ig.getStylePropertiesFor(t.type))));0<w.length&&(t.submorphs=ig.arr.compact(w));return t},function(t){var w;return t.submorphs||(null===(w=t.props)||void 0===w?void 0:w.submorphs)||[]}),r=new WeakMap;ig.mergeInHierarchy(q,a,function(t,w){if(w===a)w.name||(w.name=t.name);else if(!w.isPolicy){var x=w.master||n(t.name);if(x&&t.isPolicy)x=x.isComponentDescriptor?x.stylePolicy:
x,w=new f(Object.assign({},w,{master:x}),t.parent),r.set(t,w);else if(x){var B=t.name;x=x.isComponentDescriptor?x.stylePolicy:x;w=new f(Object.assign({},w,{master:x}),d.parent.extractInlinePolicyFor(B));r.set(t,w)}else t.isPolicy?(w=new f(w,t.parent),r.set(t,w)):Object.assign(t,ig.obj.dissoc(w,["submorphs"]))}},!0,function(t,w){r.set(w,{COMMAND:"remove",target:w.name})},function(t,w,x){x=x?t.submorphs.indexOf(x):t.submorphs.length;w.isPolicyApplicator||(w=p(w));ig.arr.pushAt(t.submorphs,{COMMAND:"add",
props:w},x)});q.viewModel&&a.viewModel&&(a.viewModel=ig.obj.deepMerge(q.viewModel,a.viewModel));return Object.assign({},ig.obj.dissoc(q,["master","submorphs"].concat(hb(ig.getStylePropertiesFor(q.type)))),{},a,{submorphs:ig.tree.mapTree(q,function(t,w){if(r.has(t))return r.get(t);!t.isPolicy&&0<w.length&&(t.submorphs=w);return t},function(t){return t.submorphs||[]}).submorphs||[]})}}},{key:"extractInlinePolicyFor",value:function(a){var d=this.getSubSpecFor(a),f=this.constructor;return d?new f(d,this.parent?
this.parent.extractInlinePolicyFor(a):null):null}},{key:"instantiate",value:function(){var a=ig.morph((new ig.PolicyApplicator(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},this)).asBuildSpecSimple());a.master.applyIfNeeded(!0);var d=[];a.withAllSubmorphsDo(function(f){f.viewModel&&d.unshift(f)});d.forEach(function(f){return f.viewModel.attach(f)});return a}},{key:"asBuildSpecSimple",value:function(){var a=this,d=ig.tree.mapTree(this.spec,function(f,k){"add"===f.COMMAND&&(f=f.props);if("remove"===
f.COMMAND)return null;if(f.isPolicy)return f.asBuildSpecSimple();var n=f.defaultViewModel||f.viewModelClass,p=f.viewModel||{},q;for(q in p){var r;if(null===(r=p[q])||void 0===r?0:r.isPolicyApplicator)p[q]=p[q].instantiate()}f=ig.obj.dissoc(f,["submorphs","defaultViewModel","viewModelClass","viewModel"].concat(hb(a.parent?ig.getStylePropertiesFor(f.type):[])));0<k.length&&(f.submorphs=ig.arr.compact(k));n&&(f.viewModel=new n(p));return f},function(f){return f.submorphs});if(this.parent||this.overriddenMaster)d.master=
this;return d}},{key:"asBuildSpec",value:function(){function a(p){return ig.tree.mapTree(p,function(q,r){var t=f,w=q;q.isPolicy?q=q.asBuildSpec(t):(t(d)&&(w=Object.assign({},ig.obj.dissoc(q,["master"].concat(hb(ig.getStylePropertiesFor(q.type)))))),0<r.length&&(w.submorphs=r),q=w);return q},function(q){return q.submorphs||[]})}var d=this,f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){return!0};if(this.parent)var k=this.parent.asBuildSpec();else return k=a(this.spec);f(this)&&
(k.master=this);if(!this.inheritStructure){var n=new Set;ig.mergeInHierarchy(k,this.spec,function(p){n.add(p)});k=ig.tree.mapTree(k,function(p,q){p.submorphs=q.filter(function(r){return n.has(r)});return p},function(p){return p.submorphs})}ig.mergeInHierarchy(k,this.spec,function(p,q){var r=ig.getStylePropertiesFor(p.type||q.type);if(q.isPolicy){for(var t in r)delete p[t];f(d)&&(p.master=q);f(d)||(Object.assign(p,q.asBuildSpec(f)),q.parent&&(p.master=q.parent))}else f(d)&&Object.assign(p,ig.obj.dissoc(q,
[].concat(hb(r),["master","submorphs"]))),f(d)||Object.assign(p,ig.obj.dissoc(q,["submorphs"]))},!0,function(p,q){ig.arr.remove(p.submorphs,q)},function(p,q,r){r=r?p.submorphs.indexOf(r):p.submorphs.length;if(q.isPolicy){var t=q.asBuildSpec(f);f(d)?t.master=q:q.parent&&(t.master=q.parent)}else t=a(q);ig.arr.pushAt(p.submorphs,t,r)});return k}},{key:"determineMaster",value:function(a){if(!a)return this._autoMaster||this._parent;var d=ig.getEventState(a,this._breakpointMasters);a=d.isHovered;var f=
d.isClicked,k=d.mode;d=d.breakpointMaster;if(this.isEventPolicy)return f?this._clickMaster||this._autoMaster:a?this._hoverMaster||this._autoMaster:this._autoMaster;if(this.isLightDarkModePolicy)switch(k){case "dark":return this._darkModeMaster;case "light":return this._lightModeMaster;default:return this._autoMaster}return this.isBreakpointPolicy?d||this._autoMaster:this._parent}},{key:"synthesizeSubSpec",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){return!0},
k=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;if(!f(this))return{};var n=this.getSubSpecFor(a)||{},p=this.determineMaster(d);if(!p||n.isPolicy)return n;var q={};p.isComponentDescriptor&&(p=p.stylePolicy);if(f(p)&&(q=p.synthesizeSubSpec(a,d,f,k),q.isPolicy))return q;f={};if(p=this.overriddenMaster){var r=p.synthesizeSubSpec(a,d,function(){return!0},!0);q.fontColor&&!r.fontColor&&p.managesMorph(a)&&(r.fontColor=ig.getDefaultValueFor(q.type,"fontColor"));q.fill&&!r.fill&&p.managesMorph(a)&&
(r.fill=ig.getDefaultValueFor(q.type,"fill"));Object.assign(f,q,ig.obj.dissoc(r,!a&&q.extent?["extent"]:[]),n)}else Object.assign(f,q,n);delete f.submorphs;delete f.master;delete f.name;for(var t in f){var w;if(null===(w=f[t])||void 0===w?0:w.onlyAtInstantiation)k?delete f[t]:f[t]=f[t].value}return f}},{key:"getSubSpecFor",value:function(a){if(!a)return this.spec;var d=ig.tree.find(this.spec,function(f){return"add"===f.COMMAND?f.props.name===a:f.name===a},function(f){var k;return f.submorphs||(null===
(k=f.props)||void 0===k?void 0:k.submorphs)});return d?d.props||d:null}},{key:"getSubSpecAt",value:function(){for(var a=arguments.length,d=Array(a),f=0;f<a;f++)d[f]=arguments[f];return(a=this.getSubSpecFor(d.shift()))&&0<d.length?a.getSubSpecAt(d):a}},{key:"managesMorph",value:function(a){return a?!!ig.tree.find(this.spec,function(d){return d.name===a},function(d){return d.submorphs}):!0}},{key:"propsToSerializeForMorph",value:function(a,d){return d}},{key:"isPositionedByLayout",value:function(a){var d,
f,k=null===(d=a.owner)||void 0===d?void 0:d.layout;return"Proportional"!==(null===k||void 0===k?void 0:k.name())&&(null===k||void 0===k?void 0:null===(f=k.layoutableSubmorphs)||void 0===f?void 0:f.includes(a))}},{key:"isResizedByLayout",value:function(a){var d=a.owner&&a.owner.layout;if(!d)return!1;if(d.resizePolicies){var f=d.getResizeHeightPolicyFor(a);a=d.getResizeWidthPolicyFor(a);if("fill"===f||"fill"===a)return{widthPolicy:a,heightPolicy:f}}return!1}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"StylePolicy"}}],c,{pathInPackage:function(){return"./components/policy.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3048,end:30452})}(void 0);ig.StylePolicy=pT;ig.StylePolicy=pT;var YA=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/components/policy.js"),g=c.hasOwnProperty("PolicyApplicator")&&
"function"===typeof c.PolicyApplicator?c.PolicyApplicator:c.PolicyApplicator=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:"isPolicyApplicator",get:function(){return!0}},{key:"toString",value:function(){return"<PolicyApplicator>"}},{key:"respondsToClick",get:function(){var a,d;return this._clickMaster?!0:!(null===(a=this.parent)||void 0===a||!a.respondsToClick)||!(null===(d=this.overriddenMaster)||
void 0===d||!d.respondsToHover)}},{key:"respondsToHover",get:function(){var a,d;return this._hoverMaster?!0:!(null===(a=this.parent)||void 0===a||!a.respondsToHover)||!(null===(d=this.overriddenMaster)||void 0===d||!d.respondsToHover)}},{key:"asBuildSpec",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){return!0};a=ie._get(Object.getPrototypeOf(g.prototype),"asBuildSpec",this).call(this,a);return ig.tree.mapTree(a,function(d,f){return d.master&&!d.master.isPolicyApplicator?
Object.assign({},d,{submorphs:f,master:new ig.PolicyApplicator({},d.master)}):Object.assign({},d,{submorphs:f})},function(d){return d.submorphs})}},{key:"attach",value:function(a){this.targetMorph=a}},{key:"apply",value:function(a){var d=this,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;a.withMetaDo({metaInteraction:!0},function(){d.withSubmorphsInScopeDo(a,function(k){var n=null;k!==a&&(n=k.name);n=d.synthesizeSubSpec(n,a);if(!ig.obj.isEmpty(n)&&(n.isPolicy?(k.setProperty("master",
n),n.targetMorph=k):d.applySpecToMorph(k,n,f),k!==a&&k.master))return k._requestMasterStyling=!1,k.master.apply(k)})})}},{key:"synthesizeSubSpec",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){return!0},k=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;f=ie._get(Object.getPrototypeOf(g.prototype),"synthesizeSubSpec",this).call(this,a,d,f,k);return f.isPolicy&&!f.isPolicyApplicator?new ig.PolicyApplicator({},f):f}},{key:"applyIfNeeded",value:function(){var a=
this,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,f=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1)&&this.targetMorph;if(d&&f){ig.__inter0__=ig.promise.deferred();this._animating=ig.__inter0__.promise;var k=ig.__inter0__.resolve;this.targetMorph.withAnimationDo(function(){return a.apply(a.targetMorph)},d).then(function(){a._animating=!1;k(!0)});return this._animating}f&&this.apply(this.targetMorph)}},{key:"whenApplied",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=
k.next){case 0:case "end":return k.stop()}},f)}));return function(){return a.apply(this,arguments)}}()},{key:"applyAnimated",value:function(){return this.applyIfNeeded(!0,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{duration:1E3})}},{key:"applySpecToMorph",value:function(a,d,f){var k=this,n=ba(ig.getStylePropertiesFor(a.constructor)),p;try{for(n.s();!(p=n.n()).done;){var q,r=p.value,t=d[r];if(t!==ig.skippedValue){if(void 0===t&&(ig.PROPS_TO_RESET.includes(r)&&(t=ig.getDefaultValueFor(a.constructor,
r)),void 0===t))continue;if("layout"!==r||"continue"!==function(){var x,B,D;if((null===(x=a.layout)||void 0===x?void 0:x.name())===(null===(B=t)||void 0===B?void 0:B.name())&&(null===(D=a.layout)||void 0===D?0:D.equals(t)))return"continue";var F=t?t.copy():void 0;if(k._animating){var L=F.renderViaCSS;F.renderViaCSS=!1;k._animating.then(function(){return F.renderViaCSS=L})}a.layout=F;return"continue"}())if(!this.isPositionedByLayout(a)||"position"!==r){var w=void 0;if("extent"===r&&(w=this.isResizedByLayout(a)))"fixed"===
w.widthPolicy&&(a.width=t.x),"fixed"===w.heightPolicy&&(a.height=t.y);else{if(f){if("extent"===r&&!a.extent.equals(ig.pt(10,10))&&(!a.owner||a.owner.isWorld||a.ownerChain().find(function(x){return x.master&&x.master.managesMorph(a.name)})))continue;if("position"===r)continue}a.isLabel&&"extent"===r||["border","borderTop","borderBottom","borderRight","borderLeft"].includes(r)||(ig.obj.equals(a[r],t)||(a[r]=t),["fixedHeight","fixedWidth"].includes(r)&&(null===(q=a._parametrizedProps)||void 0===q?0:
q.extent)&&(a.extent=a._parametrizedProps.extent))}}}}}catch(x){n.e(x)}finally{n.f()}}},{key:"withSubmorphsInScopeDo",value:function(a,d){return a.withAllSubmorphsDoExcluding(d,function(f){return a!==f&&f.master})}},{key:"onMorphChange",value:function(a,d){var f;if((null===(f=d.meta)||void 0===f||!f.metaInteraction)&&this.targetMorph&&!this._animating){f=this.ensureSubSpecFor(a);if(null===f||void 0===f?0:f.isPolicyApplicator)return f.onMorphChange(a,d);d.value!==this&&("addMorphAt"===d.selector&&
this.insertSpecIfMentioned(d.args[0]),ig.getStylePropertiesFor(a.constructor).includes(d.prop)&&(f[d.prop]=ig.skippedValue),"extent"===d.prop&&(d.value.y!==d.prevValue.y&&(f.height=ig.skippedValue),d.value.x!==d.prevValue.x&&(f.width=ig.skippedValue)))}}},{key:"ensureSubSpecFor",value:function(a){var d=this.targetMorph===a?null:a.name,f=this.getSubSpecFor(d);if(f)return f;f={name:a.name};if(!this.mentionedInHierarchy(d))return f;a=this.ensureSubSpecFor(a.owner);d=a.submorphs;d=void 0===d?[]:d;d.push(f);
a.submorphs=d;return f}},{key:"mentionedInHierarchy",value:function(a){for(var d=!1,f=this;f=f.parent;)d=!!f.getSubSpecFor(a);return d}},{key:"insertSpecIfMentioned",value:function(a){return this.mentionedInHierarchy(a.name)?this.ensureSubSpecFor(a):null}},{key:"adoptOverriddenPropsFrom",value:function(a){ig.mergeInHierarchy(this.spec,a.spec,function(d,f){var k=ba(ig.arr.intersect(ig.obj.keys(f),ig.getStylePropertiesFor(f.type))),n;try{for(k.s();!(n=k.n()).done;){var p=n.value;d[p]=f[p]}}catch(q){k.e(q)}finally{k.f()}})}}],
[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PolicyApplicator"}},{key:"for",value:function(a,d){var f;d.constructor===ig.PolicyApplicator?f=d:d.isComponentDescriptor&&d.stylePolicy?f=new this({},{auto:d}):d.constructor===ig.StylePolicy?f=new this({},d):ig.arr.isSubset(ig.obj.keys(d),["auto","hover","click"])&&(f=new this({},d));a.master&&f.adoptOverriddenPropsFrom(a.master);return f}}],c,{pathInPackage:function(){return"./components/policy.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:31066,end:42552})}(ig.StylePolicy);ig.PolicyApplicator=YA;ig.PolicyApplicator=YA;var Qd=window.lively.FreezerRuntime.recorderFor("lively.morphic/morph.js");Qd.generateUnfolded=function(b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"core",g={},a=ba(1<arguments.length&&void 0!==arguments[1]?arguments[1]:["top","left","right","bottom"]),d;
try{var f=function(){var k=d.value;g[b+Qd.string.capitalize(k)]={group:c,derived:!0,generated:!0,after:[b],get:function(){return this.getProperty(b)[k]},set:function(n){this[b]=Object.assign({},this.getProperty(b),Pc({},k,n))}}};for(a.s();!(d=a.n()).done;)f()}catch(k){a.e(k)}finally{a.f()}return g};Qd.Color=Nl;Qd.Line=KA;Qd.Point=ws;Qd.pt=Ij;Qd.rect=Bm;Qd.Rectangle=vl;Qd.Transform=ox;Qd.string=ji;Qd.obj=nh;Qd.arr=mh;Qd.num=Yk;Qd.promise=ai;Qd.tree=pq;Qd.PropertyPath=Nh;Qd.signal=Vl;Qd.deserializeSpec=
Xo;Qd.ExpressionSerializer=Xn;Qd.serializeSpec=Wn;Qd.getClassName=en;Qd.renderRootMorph=AC;Qd.ShadowObject=Aq;Qd.AnimationQueue=iH;Qd.easings=wx;Qd.addOrChangeCSSDeclaration=Zo;Qd.Icon=Cs;Qd.morph=il;Qd.newMorphId=gz;Qd.sanitizeFont=Qt;Qd.MorphicEnv=qo;Qd.config=al;Qd.CommandHandler=nT;Qd.KeyHandler=XA;Qd.findKeysForPlatform=RC;Qd.TargetScript=oT;Qd.copyMorph=TC;Qd.PolicyApplicator=YA;Qd.defaultCommandHandler=new Qd.CommandHandler;var An=Lc("M",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),
g=c.hasOwnProperty("Morph")&&"function"===typeof c.Morph?c.Morph:c.Morph=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){a||(a={});var d=a.env||Qd.MorphicEnv["default"]();this._env=d;this._rev=d.changeManager.revision;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=Qd.newMorphId(Qd.getClassName(this));
this._animationQueue=new Qd.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=Qd.obj.select(a,Qd.arr.intersect(Object.keys(a),[].concat(hb(this.styleProperties),["master"])));this.initializeProperties(a);a.bounds&&(this.setBounds(a.bounds),this._parametrizedProps.extent=this.extent,this._parametrizedProps.position=this.position);if(void 0!==a.height||void 0!==a.width)this._parametrizedProps.extent=this.extent;if("function"===typeof this.onLoad&&
!this.isComponent)this.onLoad()}},{key:"__serialization_id_property__",get:function(){return"_id"}},{key:"__deserialize__",value:function(a,d,f,k){this._env=Qd.MorphicEnv["default"]();this._rev=a.rev;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=d.id;this._animationQueue=new Qd.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=Qd.obj.select(a.props,Qd.arr.intersect(Object.keys(a.props),hb(this.styleProperties).concat(a._masterOverridden?
["master"]:[])));this._parametrizedProps.__takenFromSnapshot__=!0;a=k.expressionSerializer;for(var n in this._parametrizedProps)(d=this._parametrizedProps[n].value)&&Qd.obj.isString(d)&&a.isSerializedExpression(d)&&(this._parametrizedProps[n]=a.deserializeExpr(d));this.initializeProperties();this._pool=k}},{key:"__after_deserialize__",value:function(a,d,f){this.resumeStepping();if("function"===typeof this.onLoad)try{this.onLoad()}catch(k){console.error("[lively.morphic] ".concat(this,".onLoad() error: ").concat(k.stack))}this.isComponent&&
!this.owner||delete this._pool;this.master&&(f.mastersInSubHierarchy?f.mastersInSubHierarchy.push(this.master):f.mastersInSubHierarchy=[this.master]);this.viewModel&&this.viewModel.attach(this)}},{key:"__only_serialize__",get:function(){var a=this.defaultProperties,d=this.propertiesAndPropertySettings().properties,f=[];0<this._tickingScripts.length&&f.push("_tickingScripts");this.attributeConnections&&f.push("attributeConnections");var k=[this].concat(hb(this.ownerChain())).map(function(q){return q.__isBeingSerialized__&&
q.master}).find(Boolean),n;for(n in d){var p=d[n];k&&k.managesMorph(this)&&void 0!==k._overriddenProps.get(this)[n]?(f.push(n),"master"===n&&(this._masterOverridden=!0)):p.readOnly||p.derived||p.isComponent||p.hasOwnProperty("serialize")&&!p.serialize||Qd.obj.equals(this[n],a[n])||f.push(n)}return k&&!this.isComponent?k.propsToSerializeForMorph(this,f):f}},{key:"__additionally_serialize__",value:function(a,d,f,k){if((d=a.props.submorphs)&&!this.isEpiMorph){d=d.value;for(var n=d.length;n--;){var p=
d[n];p.__ref__&&f.refForId(p.id).realObj.isEpiMorph&&Qd.arr.removeAt(d,n)}}d=ba(Qd.arr.intersect(this.__only_serialize__,["borderColor","borderWidth","borderStyle","borderRadius"]));var q;try{for(d.s();!(q=d.n()).done;){var r=q.value;a.props[r]={key:r,verbatim:!0,value:Qd.obj.extract(this[r],this.propertiesAndPropertySettings().properties[r].foldable,function(w,x){return x&&x.isColor?x.toTuple():x})}}}catch(w){d.e(w)}finally{d.f()}q=this.propertiesAndPropertySettings().properties;for(var t in q)q[t].isComponent&&
this[t]&&(r=this[t][Symbol["for"]("lively-module-meta")])&&k(t,f.expressionSerializer.exprStringEncode({__expr__:r["export"],bindings:Pc({},r.module,r["export"])}));this._masterOverridden&&(a._masterOverridden=!0)}},{key:"isMorph",get:function(){return!0}},{key:"id",get:function(){return this._id}},{key:"env",get:function(){return this._env}},{key:"spec",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new WeakMap,
f=this.defaultProperties,k=this.propertiesAndPropertySettings().properties,n={submorphs:!0},p={};if(d.has(this))return d.get(this);d.set(this,p);for(var q in k){var r=k[q];r&&(r.readOnly||r.derived||r.hasOwnProperty("serialize")&&!r.serialize||q in n||a&&(Qd.obj.equals(this[q],f[q])||this[q]&&f[q]&&this[q].valueOf&&f[q].valueOf&&Qd.obj.equals(this[q].valueOf(),f[q].valueOf()))||(p[q]=this[q]&&this[q].isMorph?this[q].spec(a,d):this[q]&&"layout"===q?this[q].copy():this[q]))}p.submorphs=this.submorphs.map(function(t){return t.spec(a,
d)});p.type=this.constructor;return p}},{key:"printSpec",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;a=a||this.spec();var f={name:!0,type:!0,submorphs:!0},k="  ".repeat(d+1),n="  ".repeat(d)+"{\n"+"".concat(k,'name: "').concat(a.name,'",\n')+"".concat(k,'type: "').concat(a.type,'",\n'),p;for(p in a)f[p]||(n+="".concat(k).concat(p,": ").concat(Qd.string.print(a[p]),",\n"));if(a.submorphs){n+="".concat(k,
"submorphs: [\n");a=ba(a.submorphs);var q;try{for(a.s();!(q=a.n()).done;)n+=this.printSpec(q.value,d+1)}catch(r){a.e(r)}finally{a.f()}n+="]\n"}return n+="  ".repeat(d)+"}\n"}},{key:"defaultProperty",value:function(a){return this.defaultProperties[a]}},{key:"getProperty",value:function(a){return this._morphicState[a]}},{key:"setProperty",value:function(a,d,f){return this.addValueChange(a,d,f)}},{key:"changeMetaData",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,
k=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0,n=this.metadata;n||(n={});(new Qd.PropertyPath(a)).withParentAndKeyDo(n,!0,function(p,q){p[q]=k?Object.assign({},p[q],{},d):d;var r=p.__dont_serialize__;f?r&&r.includes(q)&&(Qd.arr.remove(r,q),0===r.length&&delete p.__dont_serialize__):(r||(r=p.__dont_serialize__=[]),Qd.arr.pushIfNotIncluded(r,q))});this.metadata=n}},{key:"installFont",value:function(a,d){this.installedFonts=Object.assign({},this.installedFonts,Pc({},a,d));this.insertFontCSS(a,
d)}},{key:"uninstallFont",value:function(a){delete this.installedFonts[a];(a=document.getElementById("".concat(this.id,"-").concat(a)))&&a.remove()}},{key:"ensureInstalledFonts",value:function(a,d){a=ba(a);var f;try{for(a.s();!(f=a.n()).done;){var k=f.value,n=document.getElementById("".concat(this.id,"-").concat(k));n&&n.remove()}}catch(r){a.e(r)}finally{a.f()}d=ba(d);var p;try{for(d.s();!(p=d.n()).done;){var q=p.value;this.env.fontMetric.isFontSupported(Qd.sanitizeFont(q))||this.insertFontCSS(q,
this.installedFonts[q])}}catch(r){d.e(r)}finally{d.f()}}},{key:"insertFontCSS",value:function(){var a=Bb(regeneratorRuntime.mark(function n(f,k){return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.whenRendered();case 2:k.endsWith(".otf")?Qd.addOrChangeCSSDeclaration("".concat(this.id,"-").concat(f),"@font-face {\n             font-family: ".concat(f,';\n             src: url("').concat(this.installedFonts[f],'") format("opentype");\n         }')):Qd.addOrChangeCSSDeclaration("".concat(this.id,
"-").concat(f),'@import url("'.concat(this.installedFonts[f],'");'));case 3:case "end":return p.stop()}},n,this)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"toString",value:function(){return"<".concat(Qd.getClassName(this)," - ").concat(this.name?this.name:this.id,">")}},{key:"edit",value:function(a){return this.env.world.execCommand("open object editor",Object.assign({className:Qd.getClassName(this)},a,{target:this}))}},{key:"inspect",value:function(a){if(!Qd.obj.isNumber(a))return this.env.world.execCommand("open object inspector",
Object.assign({},a,{target:this}))}},{key:"livelyCustomInspect",value:function(){var a={_id:!0,_owner:!0},d={},f=this.propertiesAndPropertySettings().properties,k=[],n;for(n in f)a[n]||f[n].derived&&!f[n].showInInspector||(d[n]=!0,k.push({key:n,value:this[n]}));k.push({key:"id",value:this.id});k.push({key:"owner",value:this.owner});k=k.sort(function(t,w){t=t.key.toLowerCase();w=w.key.toLowerCase();return t<w?-1:t===w?0:1});if(this.attributeConnections){f=ba(this.attributeConnections);var p;try{for(f.s();!(p=
f.n()).done;){var q=p.value;a["$$".concat(q.sourceAttrName),"".concat(q.sourceAttrName)]=!0}}catch(t){f.e(t)}finally{f.f()}}Object.assign(d,a);a=0;for(p="attributeConnections _animationQueue _morphicState _dirty doNotCopyProperties doNotSerialize _env _cachedPaths _pathDependants _rendering _rev _submorphOrderChanged _tickingScripts _transform _invTransform _styleSheetProps _renderer _tooltipViewer layout".split(" ");a<p.length;a++)q=p[a],q in this&&(d[q]=!0,k.push({key:q,value:this[q],keyString:"[internal] ".concat(q)}));
for(var r in this)!d[r]&&this.hasOwnProperty(r)&&k.unshift({key:r,value:this[r],keyString:"[UNKNOWN PROPERTY] ".concat(r)});return{sort:!1,includeDefault:!1,properties:k}}},{key:"show",value:function(a){return $world.execCommand("show morph",{morph:this,loop:a})}},{key:"setStatusMessage",value:function(a,d,f,k){var n=this.world();k=Object.assign({maxLines:7,isCompact:!0},k);return n?n.setStatusMessageFor(this,a,d,f,k):console.log(a)}},{key:"showError",value:function(a){var d=this.world();return d?
d.showErrorFor(this,a):console.error(a)}},{key:"onChange",value:function(a){var d=a.meta&&a.meta.animation,f=a.prop,k=a.value;if("position"===f||"rotation"===f||"scale"===f||"origin"===f||"reactsToPointer"===f)this.onBoundsChanged(this.bounds()),this.updateTransform(Pc({},f,k));else if("extent"===f)this.onBoundsChanged(this.bounds());else"layout"===f&&(d?k&&k.attachAnimated(d.duration,this,d.easing):k&&k.attach());this.layout&&this.layout.onChange(a);this.isComponent&&!Qd.PropertyPath("meta.metaInteraction").get(a)&&
this.updateDerivedMorphs();if(this.master)this.master.onMorphChange(this,a)}},{key:"updateDerivedMorphs",value:function(){var a=this,d=this.world()||$world;delete this._preview;(d?d.withAllSubmorphsSelect(function(f){return f.master&&f.master.uses(a)}):[]).forEach(function(f){f.requestMasterStyling()})}},{key:"onBoundsChanged",value:function(a){Qd.signal(this,"bounds",a);var d=ba(a.corners),f;try{for(d.s();!(f=d.n()).done;){var k=f.value;Qd.signal(this,k,a.partNamed(k))}}catch(q){d.e(q)}finally{d.f()}d=
ba(a.sides);var n;try{for(d.s();!(n=d.n()).done;){var p=n.value;Qd.signal(this,p,a.partNamed(p))}}catch(q){d.e(q)}finally{d.f()}}},{key:"onSubmorphChange",value:function(a,d){var f,k;null===(f=this.master)||void 0===f?void 0:f.onMorphChange(d,a);null===(k=this.layout)||void 0===k?void 0:k.onSubmorphChange(d,a)}},{key:"changes",get:function(){return this.env.changeManager.changesFor(this)}},{key:"applyChange",value:function(a){this.env.changeManager.apply(this,a)}},{key:"addValueChange",value:function(a,
d,f){return this.env.changeManager.addValueChange(this,a,d,f)}},{key:"addMethodCallChangeDoing",value:function(a,d){return this.env.changeManager.addMethodCallChangeDoing(a,this,d)}},{key:"groupChangesWhile",value:function(a,d){return this.env.changeManager.groupChangesWhile(this,a,d)}},{key:"dontRecordChangesWhile",value:function(a){return this.env.changeManager.dontRecordChangesWhile(this,a)}},{key:"recordChangesWhile",value:function(a,d){return this.env.changeManager.recordChangesWhile(a,d)}},
{key:"recordChangesStart",value:function(a){return this.env.changeManager.recordChangesStartForMorph(this,a)}},{key:"recordChangesStop",value:function(a){return this.env.changeManager.recordChangesStopForMorph(this,a)}},{key:"withMetaDo",value:function(a,d){return this.env.changeManager.doWithValueChangeMeta(a,this,d)}},{key:"undoStart",value:function(a){return this.env.undoManager.undoStart(this,a)}},{key:"undoStop",value:function(a){return this.env.undoManager.undoStop(this,a)}},{key:"undoInProgress",
get:function(){return this.env.undoManager.undoInProgress}},{key:"animate",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:n=this._animationQueue.registerAnimation(f);if(this._animationQueue.animationsActive){p.next=4;break}n&&n.finish();return p.abrupt("return",Promise.resolve(this));case 4:if(!n){p.next=8;break}p.next=7;return n.asPromise();case 7:return p.abrupt("return",p.sent);case 8:return p.abrupt("return",
Promise.resolve(this));case 9:case "end":return p.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"withAnimationDo",value:function(){var a=Bb(regeneratorRuntime.mark(function n(f,k){var p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return p=this.groupChangesWhile(!1,f),q=p.changes,r.next=3,Promise.all(Object.values(Qd.arr.groupBy(q,function(t){return t.target.id})).map(function(t){var w=Object.assign({},k),x;t.forEach(function(B){x=
B.target;B.reverseApply();w[B.prop]=B.value});return x&&x.animate(w)}));case 3:case "end":return r.stop()}},n,this)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"isClip",value:function(){return"visible"!==this.clipMode}},{key:"scrollExtent",get:function(){return(this.submorphs.length?this.innerBounds().union(this.submorphBounds()):this.innerBounds()).extent().addPt(this.scrollbarOffset)}},{key:"horizontalScrollbarVisible",get:function(){return this.scrollExtent.x-this.scrollbarOffset.x>
this.extent.x||"scroll"===this.clipMode}},{key:"verticalScrollbarVisible",get:function(){return this.scrollExtent.y-this.scrollbarOffset.y>this.extent.y||"scroll"===this.clipMode}},{key:"scrollBounds",value:function(){var a=this.scroll,d=this.scrollExtent;return new Qd.Rectangle(a.x,a.y,d.x,d.y)}},{key:"scrollDown",value:function(a){this.scroll=this.scroll.addXY(0,a)}},{key:"scrollUp",value:function(a){this.scrollDown(50*-a)}},{key:"scrollLeft",value:function(a){this.scroll=this.scroll.addXY(a,0)}},
{key:"scrollRight",value:function(a){this.scrollLeft(-a)}},{key:"scrollPageDown",value:function(){this.scrollDown(this.height)}},{key:"scrollPageUp",value:function(){this.scrollUp(this.height)}},{key:"addStyleClass",value:function(a){this.styleClasses=Qd.arr.uniq(this.styleClasses.concat(a))}},{key:"removeStyleClass",value:function(a){this.styleClasses=this.styleClasses.filter(function(d){return d!==a})}},{key:"adjustOrigin",value:function(a){var d=this.origin,f=this.globalBounds().topLeft();this.origin=
a;this.submorphs.forEach(function(n){return n.position=n.position.subPt(a.subPt(d))});var k=this.globalBounds().topLeft();f=f.subPt(k);this.globalPosition=this.globalPosition.addPt(f)}},{key:"setBounds",value:function(a){this.extent=a.extent();this.position=a.topLeft().addPt(this.origin)}},{key:"innerBounds",value:function(){var a=this.extent;return Qd.rect(0,0,a.x,a.y)}},{key:"relativeBounds",value:function(a){a=a||this.world();var d=this.origin.negated().extent(this.extent);d=a?this.transformRectToMorph(a,
d):this.getGlobalTransform().transformRectToRect(d);this.isClip()||this.submorphs.forEach(function(f){d=d.union(f.relativeBounds(a))});return d}},{key:"bounds",value:function(){return this.relativeBounds(this.owner)}},{key:"relativeSubmorphBounds",value:function(){var a=this.innerBounds();return this.submorphs.map(function(d){d=d.bounds();return Qd.rect(d.x/a.width,d.y/a.height,d.width/a.width,d.height/a.height)})}},{key:"globalBounds",value:function(){return this.relativeBounds(this.world())}},{key:"submorphBounds",
value:function(){var a=this.submorphs.filter(0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){return!0});return 1>a.length?this.innerBounds():a.map(function(d){return d.bounds()}).reduce(function(d,f){return d.union(f)})}},{key:"fitToSubmorphs",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Qd.Rectangle.inset(0),d=this.submorphs;if(d.length){d=d.reduce(function(n,p){return n.union(p.bounds())},d[0].bounds());var f=d.top()-a.top(),k=d.left()-a.left();
this.moveBy(Qd.pt(k,f));Qd.arr.invoke(this.submorphs,"moveBy",Qd.pt(-k,-f));this.extent=Qd.pt(d.width+a.left()+a.right(),d.height+a.top()+a.bottom())}}},{key:"align",value:function(a,d){return this.moveBy(d.subPt(a))}},{key:"moveBy",value:function(a){this.position=this.position.addPt(a);return this}},{key:"rotateBy",value:function(a){this.rotation+=a}},{key:"resizeBy",value:function(a){this.extent=this.extent.addPt(a)}},{key:"snap",value:function(a){this.position=this.position.roundTo(a||1)}},{key:"isEpiMorph",
get:function(){return this.getProperty("epiMorph")&&!this.isComponent}},{key:"isUsedAsEpiMorph",value:function(){for(var a=this;a;){if(a.isEpiMorph)return!0;a=a.owner}return!1}},{key:"replaceWith",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;if(this===a||!a)return a;if(this===a.owner)return a.replaceWith(this),a;var k=this.owner,n=this.submorphs,p=this.getTransform().copy(),q="number"===typeof d?d:k?k.submorphs.indexOf(this):-1,r=a.owner,t=Qd.arr.without(a.submorphs,
this),w=a.getTransform().copy(),x=r?r.submorphs.indexOf(a):-1;k&&this.remove();r&&a.remove();f&&(this.submorphs=[],a.submorphs=[]);k===a?(r&&r.addMorphAt(this,x),f&&(this.submorphs=t.slice(0,q).concat(a).concat(t.slice(q)),a.submorphs=n)):(k&&k.addMorphAt(a,q),r&&r.addMorphAt(this,x),f&&(a.submorphs=n,this.submorphs=t));a.setTransform(p);this.setTransform(w);return a}},{key:"addMorphAt",value:function(a,d){var f=this;if(!a||"object"!==Jc(a))throw Error("".concat(a," cannot be added as a submorph to ").concat(this));
if(a.isMorph){if(a.isAncestorOf(this))return this.env.world.logError(Error("addMorph: Circular relationships between morphs not allowed\ntried to add ".concat(a," to ").concat(this))),null;if(a===this)return this.env.world.logError(Error("addMorph: Trying to add itself as a submorph: ".concat(this))),null}a.isMorph||(a=Qd.morph(a));var k=this.submorphs.indexOf(a);if(!(-1<k&&k===d))return this.requestMasterStyling(),this.addMethodCallChangeDoing({target:this,selector:"addMorphAt",args:[a,d],undo:{target:this,
selector:"removeMorph",args:[a]}},function(){var n=a.owner,p=f.submorphs;if(n&&n!==f){var q=a.transformForNewOwner(f);a.remove()}a._env!==f._env&&(a._env=f._env);d=Math.min(p.length,Math.max(0,d));-1<k&&(p.splice(k,1),k<d&&d--);p.splice(d,0,a);a._owner=f;a._cachedPaths={};q&&a.setTransform(q);a.requestStyling();f._morphicState.submorphs=p;f._submorphOrderChanged=!0;f.makeDirty();a.resumeSteppingAll();a.withAllSubmorphsDo(function(r){return r.onOwnerChanged(f)});f.world()&&a._requestMasterStyling&&
(a.master&&a.master.applyIfNeeded(!0),a._requestMasterStyling=!1)}),a}},{key:"addMorph",value:function(a,d){var f=this.submorphs;d=d?f.indexOf(d):-1;return this.addMorphAt(a,-1===d?f.length:d)}},{key:"addMorphBack",value:function(a){return this.addMorph(a,a===this.submorphs[0]?this.submorphs[1]:this.submorphs[0])}},{key:"removeMorph",value:function(a){var d=this.submorphs.indexOf(a);-1!==d&&((this.getProperty("submorphs")||[]).splice(d,1),this.addMethodCallChangeDoing({target:this,selector:"removeMorph",
args:[a],undo:{target:this,selector:"addMorphAt",args:[a,d]}},function(){a.suspendSteppingAll();a._owner=null}),this._pathDependants=Qd.arr.withoutAll(this._pathDependants,a._pathDependants))}},{key:"remove",value:function(){var a=this;Qd.signal(this,"onRemove");this.ownerChain().forEach(function(d){d._stylingVisitor&&d._stylingVisitor.deleteFromCache(a)});this.owner&&this.owner.removeMorph(this);this._cachedPaths={};this._pathDependants.forEach(function(d){return d._cachedPaths={}});this._pathDependants=
[];this.withAllSubmorphsDo(function(d){return d.onOwnerChanged(null)});return this}},{key:"abandon",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;Qd.signal(this,"onAbandon");$world.isIDEWorld&&$world.emptyCommentsFor(this);a&&this.remove();this.submorphs.forEach(function(d){return d.abandon(!1)})}},{key:"onOwnerChanged",value:function(a){}},{key:"fadeOut",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n=arguments;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=
p.next){case 0:return k=0<n.length&&void 0!==n[0]?n[0]:1E3,p.next=3,this.animate({opacity:0,duration:k,easing:Qd.easings.outQuad});case 3:this.remove(),this.opacity=1;case 5:case "end":return p.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"fadeIn",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n=arguments;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return k=0<n.length&&void 0!==n[0]?n[0]:1E3,this.opacity=0,
this.animate({opacity:1,duration:k}),p.abrupt("return",this);case 4:case "end":return p.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"fadeIntoWorld",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,t=arguments;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return k=0<t.length&&void 0!==t[0]?t[0]:$world.visibleBounds().center(),n=1<t.length&&void 0!==t[1]?t[1]:200,p=new Qd.Morph({opacity:0,scale:0,epiMorph:!0,
hasFixedPosition:!0,fill:Qd.Color.transparent}),q=this.env.world,p.openInWorld(),p.addMorph(this),this.position=p.extent.scaleBy(.5),p.center=k,p.scale=.8,w.next=11,p.animate({opacity:1,scale:1,duration:n});case 11:return r=this.globalBounds(),q.addMorph(this),this.top=r.top(),this.left=r.left(),p.remove(),w.abrupt("return",this);case 17:case "end":return w.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"removeAllMorphs",value:function(){this.submorphs=[]}},{key:"bringToFront",
value:function(){this.owner&&Qd.arr.last(this.owner.submorphs)!==this&&this.owner.addMorph(this);return this}},{key:"owner",get:function(){return this._owner}},{key:"withAllSubmorphsDetect",value:function(a){if(a(this))return this;var d=ba(this.submorphs),f;try{for(d.s();!(f=d.n()).done;){var k=f.value.withAllSubmorphsDetect(a);if(k)return k}}catch(n){d.e(n)}finally{d.f()}}},{key:"withAllSubmorphsDoExcluding",value:function(a,d){var f=[a(this)];if(d(this))return f;var k=ba(this.submorphs),n;try{for(k.s();!(n=
k.n()).done;)Qd.arr.pushAll(f,n.value.withAllSubmorphsDoExcluding(a,d))}catch(p){k.e(p)}finally{k.f()}return f}},{key:"withAllSubmorphsDo",value:function(a){var d=[a(this)],f=ba(this.submorphs),k;try{for(f.s();!(k=f.n()).done;)Qd.arr.pushAll(d,k.value.withAllSubmorphsDo(a))}catch(n){f.e(n)}finally{f.f()}return d}},{key:"withAllSubmorphsSelect",value:function(a){var d=[];this.withAllSubmorphsDo(function(f){return a(f)&&d.push(f)});return d}},{key:"ownerChain",value:function(){return this.owner?[this.owner].concat(this.owner.ownerChain()):
[]}},{key:"world",value:function(){return this.owner?this.owner.world():null}},{key:"getWindow",value:function(){return this.isWindow?this:this.ownerChain().find(function(a){return a.isWindow})}},{key:"openInWorldNear",value:function(a,d){var f=this;d=d||this.world()||this.env.world;if(!d)return this;this.master&&(this.opacity=0,this.master.whenApplied().then(Bb(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,f.whenRendered();
case 2:f.opacity=1;case 3:case "end":return p.stop()}},n)}))));this.center=a;this.setBounds(d.visibleBoundsExcludingTopBar().translateForInclusion(this.bounds()));return this.openInWorld(this.position)}},{key:"openInWorldNearHand",value:function(a){a=a||this.world()||this.env.world;var d=a.firstHand?a.firstHand.position.addPt(this.hasFixedPosition?Qd.pt(0,0):a.scroll):Qd.pt(0,0);return a?this.openInWorldNear(d):void 0}},{key:"openInWorld",value:function(a,d){d=d||this.world()||this.env.world;if(!d)return console.warn("Cannot open morph ".concat(this,
", world morph not found;")),this;a?this.position=a:(this.center=this.hasFixedPosition?d.visibleBounds().extent().scaleBy(.5,.5):d.visibleBounds().center(),this.snap());d.addMorph(this);return this}},{key:"openInHand",value:function(a){a||(a=(this.world()||this.env.world).firstHand);a.grab(this);this.center=Qd.pt(0,0)}},{key:"openInWindow",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{title:this.name,name:"window for "+this.name,world:null};return(a.world||this.world()||
this.env.world).openInWindow(this,Qd.obj.dissoc(a,["world"]))}},{key:"isAncestorOf",value:function(a){for(a=a.owner;a;){if(a===this)return!0;a=a.owner}return!1}},{key:"morphsContainingPoint",value:function(a,d){d||(d=[]);if(!this.fullContainsWorldPoint(a))return d;for(var f=this.submorphs.length-1;0<=f;f--)this.submorphs[f].morphsContainingPoint(a,d);this.innerBoundsContainsWorldPoint(a)&&d.push(this);return d}},{key:"morphBeneath",value:function(a){var d=this.world()||this.owner;if(!d)return null;
a=d.morphsContainingPoint(a);d=a.indexOf(this);return a[d+1]}},{key:"transformTillMorph",value:function(a){if("down"===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"up"))return a.transformTillMorph(this,"up").inverse();for(var d=new Qd.Transform,f=this;f&&f!==a;f=f.owner){var k=f,n=k.origin;k=k.scroll;0===n.x&&0===n.y||d.preConcatenate(new Qd.Transform(f.origin));d.preConcatenate(f.getTransform());f!==this&&(0===k.x&&0===k.y||!f.owner||d.preConcatenate(new Qd.Transform(k.negated())));f.hasFixedPosition&&
f.owner&&d.preConcatenate(new Qd.Transform(f.owner.scroll))}return d}},{key:"localize",value:function(a){var d=this.world(),f=a.x,k=a.y;return d?d.transformPointToMorph(this,Qd.pt(f,k)):a}},{key:"worldPoint",value:function(a){var d=this.world(),f=a.x,k=a.y;return d?this.transformPointToMorph(d,Qd.pt(f,k)):a.addPt(this.position)}},{key:"transformToMorph",value:function(a){var d=this.getGlobalTransform(),f=a.getGlobalTransform().inverse();d.preConcatenate(f);f=a.scroll;0===f.x&&0===f.y||!a.owner||d.preConcatenate(new Qd.Transform(f));
return d}},{key:"transformPointToMorph",value:function(a,d){var f=this.pathToMorph(a),k=!!f.find(function(t){t=Nb(t,2);t[0];t=t[1];return t.hasFixedPosition&&t.owner&&t.owner.isWorld});k&&this.isWorld&&(d.x=d.x+this.position.x-this.scroll.x,d.y=d.y+this.position.y-this.scroll.y);f=ba(f);var n;try{for(f.s();!(n=f.n()).done;){var p=Nb(n.value,2),q=p[0],r=p[1];this!==r&&"up"===q&&(d.x-=r.scroll.x,d.y-=r.scroll.y,r.hasFixedPosition&&r.owner&&r.owner.owner&&(d.x+=r.owner.scroll.x,d.y+=r.owner.scroll.y));
this.applyTransform(q,r,d);this!==r&&"down"===q&&(d.x+=r.scroll.x,d.y+=r.scroll.y,r.hasFixedPosition&&r.owner&&r.owner.owner&&(d.x-=r.owner.scroll.x,d.y-=r.owner.scroll.y))}}catch(t){f.e(t)}finally{f.f()}k&&a.isWorld&&(d.x=d.x-a.position.x+a.scroll.x,d.y=d.y-a.position.y+a.scroll.y);return d}},{key:"transformRectToMorph",value:function(a,d){var f=this,k,n,p;[k=d.topLeft(),n=d.topRight(),p=d.bottomRight(),d=d.bottomLeft()].forEach(function(q){return f.transformPointToMorph(a,q)});return Qd.Rectangle.unionPts([k,
n,p,d])}},{key:"applyTransform",value:function(a,d,f){"up"===a?(f.x+=d.origin.x,f.y+=d.origin.y,f.matrixTransform(d.getTransform(),f)):(f.matrixTransform(d.getInverseTransform(),f),f.x-=d.origin.x,f.y-=d.origin.y)}},{key:"_addPathDependant",value:function(a){this._pathDependants.includes(a)||this._pathDependants.push(a)}},{key:"pathToMorph",value:function(a){var d;if(d=this._cachedPaths[a.id])return d;d=[];var f=this.closestCommonAncestor(a)||this,k=this;for(f._addPathDependant(this);k&&k!==f;)d.push(["up",
k]),k._addPathDependant(this),k=k.owner;k=a;for(var n=d.length;k&&k!==f;)Qd.arr.pushAt(d,["down",k],n),k._addPathDependant(this),k=k.owner;return this._cachedPaths[a.id]=d}},{key:"closestCommonAncestor",value:function(a){return Qd.arr.intersect([this].concat(hb(this.ownerChain())),[a].concat(hb(a.ownerChain())))[0]}},{key:"transformForNewOwner",value:function(a){return new Qd.Transform(this.transformToMorph(a))}},{key:"localizePointFrom",value:function(a,d){var f=a.x;a=a.y;try{return d.transformPointToMorph(this,
Qd.pt(f,a))}catch(k){return console.warn("problem "+k+" in localizePointFrom"),Qd.pt}}},{key:"getGlobalTransform",value:function(){return this.transformTillMorph(this.world())}},{key:"globalPosition",get:function(){return this.worldPoint(Qd.pt(0,0))}},{key:"globalPosition",set:function(a){return this.position=this.owner?this.owner.localize(a):a}},{key:"ensureToBeInWorldBounds",value:function(){var a=this.world();if(a){var d=this.globalBounds();a=a.innerBounds().translateForInclusion(d).topLeft().subPt(d.topLeft());
this.moveBy(a)}}},{key:"getTransform",value:function(){this._transform||this.updateTransform();return this._transform}},{key:"getInverseTransform",value:function(){this._invTransform||this.updateTransform();return this._invTransform}},{key:"updateTransform",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=a.position,f=a.scale,k=a.origin,n=a.rotation;a=this._transform||new Qd.Transform;var p=this._invTransform||new Qd.Transform;d=d||this.position;k=k||this.origin;
f=f||this.scale;n=n||this.rotation;a.a=f*Math.cos(n);a.b=f*Math.sin(n);a.c=f*-Math.sin(n);a.d=f*Math.cos(n);a.e=a.a*-k.x+a.c*-k.y+d.x;a.f=a.b*-k.x+a.d*-k.y+d.y;d=a.a;f=a.b;k=a.c;n=a.d;var q=a.e,r=a.f,t=1/(d*n-k*f);p.a=n*t;p.b=-f*t;p.c=-k*t;p.d=d*t;p.e=(k*r-q*n)*t;p.f=-(d*r-f*q)*t;this._transform=a;this._invTransform=p}},{key:"setTransform",value:function(a){this.position=a.getTranslation();this.rotation=Qd.num.toRadians(a.getRotation());this.scale=a.getScalePoint().x;this.updateTransform(this)}},
{key:"fullContainsWorldPoint",value:function(a){return this.fullContainsPoint(null===this.owner?a:this.owner.localize(a))}},{key:"fullContainsPoint",value:function(a){return this.bounds().containsPoint(a)}},{key:"innerBoundsContainsWorldPoint",value:function(a){return this.innerBoundsContainsPoint(this.localize(a))}},{key:"innerBoundsContainsPoint",value:function(a){return this.innerBounds().containsPoint(a.addPt(this.origin).subPt(this.scroll))}},{key:"get",value:function(a){if(!a)return null;try{return this.getSubmorphNamed(a)||
this.getNameTest(this,a)&&this||this.getOwnerOrOwnerSubmorphNamed(a)}catch(d){if(d.constructor===RangeError&&"Maximum call stack size exceeded"===d.message)throw Error("'get' failed due to a stack overflow. The most\nlikely source of the problem is using 'get' as part of\ntoString, because 'get' calls 'getOwnerOrOwnerSubmorphNamed', which\ncalls 'toString' on this. Try using 'getSubmorphNamed' instead,\nwhich only searches in this' children.\nOriginal error:\n"+d.stack);throw d;}}},{key:"getNameTest",
value:function(a,d){if(Qd.obj.isRegExp(d)){if(d.test(a.name)||d.test(String(a)))return!0}else if(a.name===d||String(a)===d)return!0;return!1}},{key:"getAllNamed",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(!this._morphicState||!this.submorphs.length)return d;for(var f=0;f<this.submorphs.length;f++){var k=this.submorphs[f];this.getNameTest(k,a)&&d.push(k)}for(f=0;f<this.submorphs.length;f++)this.submorphs[f].getAllNamed(a,d);return d}},{key:"getSubmorphNamed",
value:function(a){if(!this._morphicState||!this.submorphs.length)return null;for(var d=0;d<this.submorphs.length;d++){var f=this.submorphs[d];if(this.getNameTest(f,a))return f}for(d=0;d<this.submorphs.length;d++)if(f=this.submorphs[d].getSubmorphNamed(a))return f;return null}},{key:"getSubmorphsByStyleClassName",value:function(a){return this.withAllSubmorphsSelect(function(d){return d.styleClasses.includes(a)})}},{key:"getOwnerNamed",value:function(a){return this.ownerChain().find(function(d){return d.name===
a})}},{key:"getOwnerOrOwnerSubmorphNamed",value:function(a){var d=this.owner;if(!d)return null;if(d.name===a)return d;for(var f=0;f<d.submorphs.length;f++){var k=d.submorphs[f];if(k!==this&&(this.getNameTest(k,a)||(k=k.getSubmorphNamed(a))))return k}return this.owner.getOwnerOrOwnerSubmorphNamed(a)}},{key:"getMorphWithId",value:function(a){return this.withAllSubmorphsDetect(function(d){return a===d.id})}},{key:"setMirrored",value:function(a){a?this.removeStyleClass("hidden-in-mirror"):this.addStyleClass("hidden-in-mirror")}},
{key:"isMirrored",value:function(){return 0<=this.styleClasses.indexOf("hidden-in-mirror")?!0:!1}},{key:"dragTriggerDistance",get:function(){return 0}},{key:"onHaloMouseDown",value:function(a){}},{key:"onMouseDown",value:function(a){if(this===a.targetMorph&&(a.state.clickedMorph=this,1===a.state.prevClick.clickCount&&200>=Date.now()-a.state.prevClick.clickedAtTime)){this.onDoubleMouseDown(a);return}this===a.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onDoubleMouseDown",value:function(a){}},
{key:"onMouseUp",value:function(a){a.state.clickedMorph=null;this===a.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onMouseMove",value:function(a){}},{key:"onLongClick",value:function(a){}},{key:"addKeyBindings",value:function(a){var d=this;this.addMethodCallChangeDoing({target:this,selector:"addKeyBindings",args:[a],undo:null},function(){var f;d._keybindings||(d._keybindings=[]);d._cachedKeyhandlers=null;(f=d._keybindings).unshift.apply(f,hb(a))})}},{key:"keybindings",get:function(){return this._keybindings||
[]}},{key:"keybindings",set:function(a){this._cachedKeyhandlers=null;return this._keybindings=a}},{key:"keyhandlers",get:function(){return this._cachedKeyhandlers||(this._cachedKeyhandlers=[Qd.KeyHandler.withBindings(this.keybindings)])}},{key:"keyCommandMap",get:function(){var a=this.keyhandlers[0].platform;return this.keybindings.reduce(function(d,f){var k=Qd.findKeysForPlatform(f.keys,a),n=f.command,p="string"===typeof n?n:n.command||n.name;return"string"!==typeof k?d:k.split("|").reduce(function(q,
r){return Object.assign(q,Pc({},r,{name:p,command:n,prettyKeys:Qd.KeyHandler.prettyCombo(r)}))},d)},{})}},{key:"keysForCommand",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,f=this.keyCommandMap,k=Object.keys(f).find(function(n){return f[n].name===a});return k&&d?f[k].prettyKeys:k}},{key:"simulateKeys",value:function(a){return Qd.KeyHandler.simulateKeys(this,a)}},{key:"onKeyDown",value:function(a){Qd.KeyHandler.invokeKeyHandlers(this,a,!1)&&a.stop()}},{key:"onKeyUp",
value:function(a){}},{key:"onContextMenu",value:function(a){var d=this;a.targetMorph===this&&(lively.FreezerRuntime||a.stop(),Promise.resolve(this.menuItems(a)).then(function(f){return d.openMenu(f,a)})["catch"](function(f){return $world.logError(f)}))}},{key:"openMenu",value:function(a,d){var f=this.world();return a&&a.length&&f?f.openWorldMenu(d,a):null}},{key:"menuItems",value:function(a){return $world.defaultMenuItems(this,a)}},{key:"onCut",value:function(a){}},{key:"onCopy",value:function(a){}},
{key:"onPaste",value:function(a){}},{key:"onDragStart",value:function(a){this.undoStart("drag-move");a=a.state;this.position=a.dragStartMorphPosition.addPt(a.absDragDelta)}},{key:"onDragEnd",value:function(a){this.undoStop("drag-move");$world.execCommand("remove snap to guides",this)}},{key:"onDrag",value:function(a){var d=a.state;this.position=d.dragStartMorphPosition.addPt(d.absDragDelta);$world.execCommand("show and snap to guides",{target:this,showGuides:a.isCtrlDown(),snap:a.isCtrlDown()})}},
{key:"onGrab",value:function(a){if(a.isShiftDown()){var d=this.copy();d.position=this.transformPointToMorph(a.hand,Qd.pt(0,0));a.hand.grab(d)}else a.hand.grab(this)}},{key:"onDrop",value:function(a){a.hand.dropMorphsOn(this)}},{key:"doNotAcceptDropsForThisAndSubmorphs",value:function(){this.withAllSubmorphsDo(function(a){return a.acceptsDrops=!1})}},{key:"acceptDropsForThisAndSubmorphs",value:function(){this.withAllSubmorphsDo(function(a){return a.acceptsDrops=!0})}},{key:"wantsToBeDroppedOn",value:function(a){return!0}},
{key:"onDropHoverIn",value:function(a){}},{key:"onDropHoverUpdate",value:function(a){}},{key:"onDropHoverOut",value:function(a){}},{key:"onBeingDroppedOn",value:function(a,d){d.addMorph(this)}},{key:"onHoverIn",value:function(a){var d;(null===(d=this.master)||void 0===d?0:d.respondsToHover)&&this.requestMasterStyling()}},{key:"onHoverOut",value:function(a){var d;(null===(d=this.master)||void 0===d?0:d.respondsToHover)&&this.requestMasterStyling()}},{key:"onScroll",value:function(a){}},{key:"onMouseWheel",
value:function(a){}},{key:"onNativeDrop",value:function(a){}},{key:"onNativeDragleave",value:function(a){}},{key:"onNativeDragenter",value:function(a){}},{key:"onNativeDragover",value:function(a){}},{key:"onNativeDragend",value:function(a){}},{key:"onNativeDragstart",value:function(a){}},{key:"onNativeDrag",value:function(a){}},{key:"focus",value:function(){var a=this.env.eventDispatcher;a&&a.focusMorph(this)}},{key:"onWindowActivated",value:function(){}},{key:"onWindowDeactivated",value:function(){}},
{key:"onFocus",value:function(a){}},{key:"onBlur",value:function(a){}},{key:"isFocused",value:function(){var a=this.env.eventDispatcher;return a&&a.isMorphFocused(this)}},{key:"exportToJSON",value:function(a){return Qd.serializeSpec(this,a)}},{key:"initFromJSON",value:function(a){var d=this;this._env=a.env||a._env||Qd.MorphicEnv["default"]();this._rev=0;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=a._id||Qd.newMorphId(Qd.getClassName(this));this._animationQueue=
new Qd.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this.dontRecordChangesWhile(function(){d.initializeProperties();Qd.deserializeSpec(a,function(f){return Qd.morph(f)},d)});return this}},{key:"copyViaJSON",value:function(){var a=this.exportToJSON();Qd.tree.prewalk(a,function(d){return d._id=Qd.newMorphId(d.type)},function(d){return d.submorphs});a.name=a.name.replace(/copy( [0-9]+)?$/,function(d,f){return"copy ".concat(f&&f.trim()?Number(f)+1:"1")});return Qd.morph({type:a.type}).initFromJSON(a)}},
{key:"canBeCopied",value:function(){return!0}},{key:"copy",value:function(){return Qd.copyMorph(this,0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1)}},{key:"interactivelyPublish",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return k=this.world()||this.env.world,r.prev=1,r.next=4,Promise.resolve().then(function(){return qT});case 4:return n=r.sent,p=n.interactivelySavePart,r.next=
8,p(this,{notifications:!1,loadingIndicator:!0});case 8:q=r.sent;k.setStatusMessage(q?"Published ".concat(this," as ").concat(q.name):"Failed to publish part ".concat(this),q?Qd.Color.green:Qd.Color.red);r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](1),"canceled"!==r.t0&&k.showError(r.t0);case 15:case "end":return r.stop()}},f,this,[[1,12]])}));return function(){return a.apply(this,arguments)}}()},{key:"makeDirty",value:function(a){this._dirty=!0;this.owner&&this.owner.makeDirty()}},{key:"needsRerender",
value:function(){return this._dirty}},{key:"aboutToRender",value:function(a){this._dirty=!1;this._rendering=!0}},{key:"onAfterRender",value:function(a){}},{key:"whenRendered",value:function(){return this.env.whenRendered(this,0<arguments.length&&void 0!==arguments[0]?arguments[0]:50).then(function(){return!0})["catch"](function(){return!1})}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return a.renderMorph(this)}},
{key:"applyLayoutIfNeeded",value:function(){if(this._dirty){for(var a=0;a<this.submorphs.length;a++)this.submorphs[a].applyLayoutIfNeeded();this.layout&&!this.layout.manualUpdate&&this.layout.onContainerRender()}}},{key:"requestMasterStyling",value:function(){var a=this;this._rendering||(this.master&&this.master._hasUnresolvedMaster&&(this.master._capturedExtents=new WeakMap,this.withAllSubmorphsDo(function(d){return a.master._capturedExtents.set(d,d.extent)})),this.master&&(this._requestMasterStyling=
!0,this.makeDirty()))}},{key:"requestStyling",value:function(){this.withAllSubmorphsDo(function(a){a._wantsStyling=!0;a.makeDirty()})}},{key:"borderOptions",get:function(){return"none hidden dotted dashed solid double groove ridge inset outset".split(" ")}},{key:"renderAsRoot",value:function(a){var d=this;this.dontRecordChangesWhile(function(){d.applyLayoutIfNeeded()});return Qd.renderRootMorph(this,a)}},{key:"renderPreview",value:function(){return(1<arguments.length&&void 0!==arguments[1]?arguments[1]:
this.env.renderer).renderPreview(this,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"startStepping",value:function(){var a=Array.from(arguments),d="number"===typeof a[0]?a.shift():null,f=a.shift();a=new Qd.TargetScript(this,f,a);this.removeEqualScripts(a);this._tickingScripts.push(a);a.startTicking(d);return a}},{key:"tickingScripts",get:function(){return this._tickingScripts}},{key:"stopStepping",value:function(){Qd.arr.invoke(this._tickingScripts,"stop");this._tickingScripts.length=
[]}},{key:"stopSteppingScriptNamed",value:function(a){var d=this._tickingScripts.filter(function(f){return f.selector===a});this.stopScripts(d)}},{key:"stopScripts",value:function(a){Qd.arr.invoke(a,"stop");this._tickingScripts=Qd.arr.withoutAll(this._tickingScripts,a)}},{key:"suspendStepping",value:function(){this._tickingScripts&&Qd.arr.invoke(this._tickingScripts,"suspend")}},{key:"suspendSteppingAll",value:function(){this.withAllSubmorphsDo(function(a){return a.suspendStepping()})}},{key:"resumeStepping",
value:function(){Qd.arr.invoke(this._tickingScripts,"resume")}},{key:"resumeSteppingAll",value:function(){this.withAllSubmorphsDo(function(a){return Qd.arr.invoke(a._tickingScripts,"resume")})}},{key:"removeEqualScripts",value:function(a){this.stopScripts(this._tickingScripts.filter(function(d){return d.equals(a)}))}},{key:"comments",get:function(){if(!$world.isIDEWorld)return[];var a=$world.morphCommentMap;return a.has(this)?a.get(this):[]}},{key:"commands",get:function(){return this._commands||
[]}},{key:"commands",set:function(a){this._commands&&this.removeCommands(this._commands);this.addCommands(a)}},{key:"commandsIncludingOwners",get:function(){return[this].concat(this.ownerChain()).flatMap(function(a){return Qd.arr.sortByKey(a.commands,"name").map(function(d){return{target:a,command:d}})})}},{key:"addCommands",value:function(a){var d=this;this.addMethodCallChangeDoing({target:this,selector:"addCommands",args:[a],undo:{target:this,selector:"removeCommands",args:[a]}},function(){d.removeCommands(a);
d._commands=(d._commands||[]).concat(a)})}},{key:"removeCommands",value:function(a){var d=this;this.addMethodCallChangeDoing({target:this,selector:"removeCommands",args:[a],undo:{target:this,selector:"addCommands",args:[a]}},function(){var f=a.map(function(n){return"string"===typeof n?n:n.name}),k=(d._commands||[]).filter(function(n){return!f.includes(n.name)});k.length?d._commands=k:delete d._commands})}},{key:"commandHandler",get:function(){return this._commandHandler||Qd.defaultCommandHandler}},
{key:"lookupCommand",value:function(a){return(a=this.commandHandler.lookupCommand(a,this))&&a.command?a:null}},{key:"execCommand",value:function(a,d,f,k){return this.commandHandler.exec(a,this,d,f,k)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Morph"}},{key:"propertySettings",get:function(){return{defaultGetter:function(a){return this.getProperty(a)},defaultSetter:function(a,d){this.setProperty(a,d)},valueStoreProperty:"_morphicState"}}},{key:"properties",get:function(){return Object.assign({name:{group:"core",
initialize:function(a){a||(a=Qd.getClassName(this),a=Qd.string.findArticle(a)+a);this.name=a}},isComponent:{group:"core",defaultValue:!1,after:["master"],set:function(a){this.setProperty("isComponent",a);a&&(this.master||delete this._parametrizedProps)}},master:{before:["metadata"],after:["clipMode"],group:"core",set:function(a){var d,f,k;a=a?Qd.PolicyApplicator["for"](this,a):!1===a?!1:null;(null===(d=this.master)||void 0===d?0:d.isPolicyApplicator)&&(null===(f=this.master)||void 0===f?0:null===
(k=f.parent[Symbol["for"]("lively-module-meta")])||void 0===k?0:k.path.length)?this.master.spec.master=a:(this.setProperty("master",a),(null===a||void 0===a?0:a.isPolicyApplicator)&&a.attach(this));this.master&&this.requestMasterStyling()}},viewModel:{after:["submorphs"],set:function(a){if(this.viewModel&&this.viewModel!==a)this.viewModel.onDeactivate();this.setProperty("viewModel",a)}},renderOnGPU:{group:"core",defaultValue:!1},draggable:{group:"interaction",isStyleProp:!0,defaultValue:!1},grabbable:{group:"interaction",
isStyleProp:!0,defaultValue:!1,set:function(a){a&&!this.draggable&&(this.draggable=!0);this.setProperty("grabbable",a)}},acceptsDrops:{group:"interaction",isStyleProp:!0,defaultValue:!0},grayscale:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,min:0,max:1,isFloat:!0},blur:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,min:0,isFloat:!0},dropShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null,set:function(a){a&&!a.isShadowObject&&(a=new Qd.ShadowObject(a),
a.morph=this);this.setProperty("dropShadow",a)}},tooltip:{group:"core",defaultValue:null},focusable:{group:"interaction",defaultValue:!0},nativeCursor:{group:"interaction",type:"Enum",values:"auto default none context-menu help pointer progress wait cell crosshair text vertical-text alias copy move no-drop not-allowed e-resize n-resize ne-resize nw-resize s-resize se-resize sw-resize w-resize ew-resize ns-resize nesw-resize nwse-resize col-resize row-resize all-scroll zoom-in zoom-out grab grabbing".split(" "),
isStyleProp:!0,defaultValue:"auto"},halosEnabled:{group:"interaction",isStyleProp:!0,defaultValue:!!Qd.config.halosEnabled},reactsToPointer:{group:"interaction",isStyleProp:!0,defaultValue:!0},origin:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:Qd.pt(0,0)},position:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:Qd.pt(0,0),get:function(){this._askLayoutForBounds&&this.owner&&this.owner.layout&&(this._askLayoutForBounds=!1,this.owner.layout.updateBoundsFor(this));return this.getProperty("position")}},
extent:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:Qd.pt(10,10),get:function(){this._askLayoutForBounds&&this.owner&&this.owner.layout&&(this._askLayoutForBounds=!1,this.owner.layout.updateBoundsFor(this));return this.getProperty("extent")},set:function(a){var d=this.extent;this.setProperty("extent",a);this.origin.equals(Qd.pt(0,0))||(a=Qd.pt(a.x/d.x,a.y/d.y),this.adjustOrigin(this.origin.scaleByPt(a)))}},width:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.x},
set:function(a){return this.extent=Qd.pt(a,this.extent.y)}},height:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.y},set:function(a){return this.extent=Qd.pt(this.extent.x,a)}},left:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().left()},set:function(a){return this.moveBy(Qd.pt(a-this.left),0)}},right:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().right()},
set:function(a){return this.moveBy(Qd.pt(a-this.right),0)}},top:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().top()},set:function(a){return this.moveBy(Qd.pt(0,a-this.top))}},bottom:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottom()},set:function(a){return this.moveBy(Qd.pt(0,a-this.bottom))}},center:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().center()},
set:function(a){return this.align(this.center,a)}},topLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topLeft()},set:function(a){return this.align(this.topLeft,a)}},topRight:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topRight()},set:function(a){return this.align(this.topRight,a)}},bottomRight:{group:"geometry",derived:!0,after:["extent","layout"],get:function(){return this.bounds().bottomRight()},
set:function(a){return this.align(this.bottomRight,a)}},bottomLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomLeft()},set:function(a){return this.align(this.bottomLeft,a)}},bottomCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomCenter()},set:function(a){return this.align(this.bottomCenter,a)}},topCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],
get:function(){return this.bounds().topCenter()},set:function(a){return this.align(this.topCenter,a)}},leftCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().leftCenter()},set:function(a){return this.align(this.leftCenter,a)}},rightCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().rightCenter()},set:function(a){return this.align(this.rightCenter,a)}},rotation:{group:"geometry",type:"Number",isFloat:!0,
isStyleProp:!0,defaultValue:0},flipped:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},tilted:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},perspective:{group:"geometry",type:"Number",isStyleProp:!0,defaultValue:0,min:0},scale:{group:"geometry",type:"Number",min:0,isFloat:!0,isStyleProp:!0,defaultValue:1},hasFixedPosition:{group:"geometry",doc:"When morph is submorph of world hasFixedPosition == true will keep the morph at the same position relative to top left of the browser window. This means, when the world is scrolled, the morph keeps its place.",
defaultValue:!1},opacity:{group:"styling",type:"Number",isFloat:!0,min:0,max:1,isStyleProp:!0,defaultValue:1},fill:{group:"styling",type:"ColorGradient",isStyleProp:!0,defaultValue:Qd.Color.white},visible:{group:"styling",isStyleProp:!0,defaultValue:!0,set:function(a){a||this.makeDirty();this.setProperty("visible",a)}},submorphs:{group:"core",defaultValue:[],after:["isLayoutable","origin","position","rotation","scale"],get:function(){return(this.getProperty("submorphs")||[]).concat()},set:function(a){var d=
this,f=this.layout,k=f&&f.isEnabled();k&&f.disable();this.submorphs.forEach(function(n){return a.includes(n)||n.remove()});a.forEach(function(n,p){return d.submorphs[p]!==n&&d.addMorph(n,d.submorphs[p])});k&&f.enable()}},clipMode:{group:"styling",type:"Enum",values:["visible","hidden","scroll","auto"],isStyleProp:!0,defaultValue:"visible",set:function(a){this.setProperty("clipMode",a);this.isClip()||(this.scroll=Qd.pt(0,0))}},hideScrollbars:{group:"styling",type:"Boolean",isStyleProp:!0,defaultValue:!1},
scroll:{group:"geometry",defaultValue:Qd.pt(0,0),after:["clipMode","submorphs"],type:"Point",set:function(a){var d=a.x;a=a.y;if(this.isClip()){var f=this.scrollExtent.subPt(this.extent),k=f.y;d=Math.max(0,Math.min(f.x,d));a=Math.max(0,Math.min(k,a));this.setProperty("scroll",Qd.pt(d,a));this.makeDirty()}}},scrollbarOffset:{group:"styling",defaultValue:Qd.pt(15,15)},styleClasses:{group:"styling",isStyleProp:!0,defaultValue:["morph"],get:function(){return this._cachedStyleClasses||(this._cachedStyleClasses=
this.constructor.styleClasses.concat(this.getProperty("styleClasses")))},set:function(a){this._cachedStyleClasses=null;this.setProperty("styleClasses",Qd.arr.withoutAll(a,this.constructor.styleClasses));this.requestStyling()}},layout:{group:"layouting",isStyleProp:!0,type:"Layout",after:["submorphs","extent","origin","position","isLayoutable"],set:function(a){a&&(a.container=this);this.setProperty("layout",a)}},isLayoutable:{group:"layouting",isStyleProp:!0,defaultValue:!0},borderLeft:{group:"styling",
isStyleProp:!0,derived:!0,after:["borderStyleLeft","borderWidthLeft","borderColorLeft"],get:function(){return{style:this.borderStyleLeft,width:this.borderWidthLeft,color:this.borderColorLeft}},set:function(a){"style"in a&&(this.borderStyleLeft=a.style);"width"in a&&(this.borderWidthLeft=a.width);"color"in a&&(this.borderColorLeft=a.color)}},borderRight:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleRight","borderWidthRight","borderColorRight"],get:function(){return{style:this.borderStyleRight,
width:this.borderWidthRight,color:this.borderColorRight}},set:function(a){"style"in a&&(this.borderStyleRight=a.style);"width"in a&&(this.borderWidthRight=a.width);"color"in a&&(this.borderColorRight=a.color)}},borderBottom:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleBottom","borderWidthBottom","borderColorBottom"],get:function(){return{style:this.borderStyleBottom,width:this.borderWidthBottom,color:this.borderColorBottom}},set:function(a){"style"in a&&(this.borderStyleBottom=a.style);
"width"in a&&(this.borderWidthBottom=a.width);"color"in a&&(this.borderColorBottom=a.color)}},borderTop:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleTop","borderWidthTop","borderColorTop"],get:function(){return{style:this.borderStyleTop,width:this.borderWidthTop,color:this.borderColorTop}},set:function(a){"style"in a&&(this.borderStyleTop=a.style);"width"in a&&(this.borderWidthTop=a.width);"color"in a&&(this.borderColorTop=a.color)}},borderWidth:{group:"styling",isStyleProp:!0,type:"Number",
foldable:["top","left","right","bottom"],min:0,defaultValue:{top:0,bottom:0,left:0,right:0,valueOf:function(){return 0}},get:function(){var a=this.getProperty("borderWidth");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){Qd.obj.isNumber(a)&&(a={left:a,right:a,top:a,bottom:a});this.setProperty("borderWidth",a)}}},Qd.generateUnfolded("borderWidth",void 0,"styling"),{borderRadius:{group:"styling",isStyleProp:!0,type:"Number",min:0,foldable:["topLeft","topRight","bottomRight",
"bottomLeft"],defaultValue:{topLeft:0,topRight:0,bottomRight:0,bottomLeft:0,valueOf:function(){return 0}},get:function(){var a=this.getProperty("borderRadius");return Object.assign({},a,{valueOf:function(){return a.topLeft}})},set:function(a){a||(a=0);Qd.obj.isNumber(a)&&(a={topLeft:a,topRight:a,bottomRight:a,bottomLeft:a});this.setProperty("borderRadius",a)}}},Qd.generateUnfolded("borderRadius",["topLeft","topRight","bottomRight","bottomLeft"],"styling"),{borderStyle:{group:"styling",isStyleProp:!0,
type:"Enum",foldable:["top","left","right","bottom"],values:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),defaultValue:{top:"solid",left:"solid",bottom:"solid",right:"solid",valueOf:function(){return"solid"}},get:function(){var a=this.getProperty("borderStyle");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){Qd.obj.isString(a)&&(a={left:a,right:a,top:a,bottom:a});this.setProperty("borderStyle",a)}}},Qd.generateUnfolded("borderStyle",
void 0,"styling"),{borderColor:{group:"styling",isStyleProp:!0,type:"Color",foldable:["top","left","right","bottom"],defaultValue:{top:Qd.Color.white,left:Qd.Color.white,bottom:Qd.Color.white,right:Qd.Color.white,valueOf:function(){return Qd.Color.white}},get:function(){var a=this.getProperty("borderColor");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){a||(a=Qd.Color.white);a.isColor&&(a={top:a,left:a,right:a,bottom:a});this.setProperty("borderColor",a?Qd.obj.extract(a,
["top","left","right","bottom"],function(d,f){return Qd.obj.isArray(f)?Qd.Color.fromTuple(f):f}):a)}}},Qd.generateUnfolded("borderColor",void 0,"styling"),{border:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyle","borderWidth","borderColor","borderRadius"],get:function(){var a=this;return{get style(){return a.borderStyle},set style(d){a.borderStyle=d},get width(){return a.borderWidth},set width(d){a.borderWidth=d},get color(){return a.borderColor},set color(d){a.borderColor=d},get radius(){return a.borderRadius},
set radius(d){a.borderRadius=d}}},set:function(a){"style"in a&&(this.borderStyle=a.style);"width"in a&&(this.borderWidth=a.width);"color"in a&&(this.borderColor=a.color);"radius"in a&&(this.borderRadius=a.radius)}},styleProperties:{group:"styling",derived:!0,readOnly:!0,get:function(){var a=this.propertiesAndPropertySettings(),d=a.properties,f=[];a=ba(a.order);var k;try{for(a.s();!(k=a.n()).done;){var n=k.value;d[n].isStyleProp&&f.push(n)}}catch(p){a.e(p)}finally{a.f()}return f}},style:{group:"styling",
derived:!0,readOnly:!0,get:function(){for(var a=this.styleProperties,d={},f=0;f<a.length;f++){var k=a[f];d[k]=this[k]}return d}},epiMorph:{group:"core",doc:"epi morphs are 'transient' morphs, i.e. meta objects that should not be serialized like halo items, menus, etc.",defaultValue:!1},respondsToVisibleWindow:{group:"interaction",doc:"Morphs will respond to changes to the visible browser window and a call will be made to the morph's relayout function, supplying the event generated",defaultValue:!1},
installedFonts:{doc:"custom fonts can be installed from a respective morph, and are then kept as part of this morph's state in order to be loaded again the next time the it is cold loaded. (i.e. deserialization of a part)",defaultValue:{},set:function(a){var d=Qd.arr.without(Qd.obj.keys(this.installedFonts||{}),"_rev"),f=Qd.arr.without(Qd.obj.keys(a||{}),"_rev");this.setProperty("installedFonts",a);this.ensureInstalledFonts(d,f)},get:function(){return this.getProperty("installedFonts")||{}}},metadata:{group:"core"}})}},
{key:"styleClasses",get:function(){if(this.hasOwnProperty("_styclassNames"))return this._styleClasses;for(var a=this,d=[];a&&a!==Object;)d.push(a[Symbol["for"]("__LivelyClassName__")]),a=a[Symbol["for"]("lively-instance-superclass")];return this._styleClasses=d}}],c,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:1689,end:87315})}(void 0));Qd.Morph=An;Qd.Morph=An;var Ax=Lc("E",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),g=c.hasOwnProperty("Ellipse")&&"function"===typeof c.Ellipse?c.Ellipse:c.Ellipse=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),
this._requestMasterStyling=!1);return a.renderEllipse(this)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Ellipse"}},{key:"properties",get:function(){return{isEllipse:{get:function(){return!0}}}}}],c,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:87461,end:87830})}(Qd.Morph));
Qd.Ellipse=Ax;Qd.Ellipse=Ax;var Bx=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),g=c.hasOwnProperty("Triangle")&&"function"===typeof c.Triangle?c.Triangle:c.Triangle=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};ie._get(Object.getPrototypeOf(g.prototype),
Symbol["for"]("lively-instance-initialize"),this).call(this,a);this.update()}},{key:"onChange",value:function(a){("extent"===a.prop||"direction"===a.prop||"fill"===a.prop&&a.value)&&this.update();ie._get(Object.getPrototypeOf(g.prototype),"onChange",this).call(this,a)}},{key:"update",value:function(){var a,d=this.extent,f=d.x;d=d.y;f!==d&&(this.extent=Qd.pt(Math.max(f,d),Math.max(f,d)));this.origin=Qd.pt(f/2,d/2);var k=this.triangleFill=this.fill||this.triangleFill;this.fill=null;f={width:f/2,style:"solid",
color:k};d={width:d/2,style:"solid",color:Qd.Color.transparent};switch(this.direction){case "down":var n="borderLeft";var p="borderRight";var q="borderTop";break;case "up":n="borderLeft";p="borderRight";q="borderBottom";break;case "left":n="borderBottom";p="borderTop";q="borderRight";break;case "right":n="borderBottom",p="borderTop",q="borderLeft"}Object.assign(this,(a={},Pc(a,n,d),Pc(a,p,d),Pc(a,q,f),a))}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Triangle"}},{key:"properties",
get:function(){return{direction:{defaultValue:"up"},triangleFill:{after:["fill"],initialize:function(){this.triangleFill=this.fill}}}}}],c,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:87838,end:89553})}(Qd.Morph);Qd.Triangle=Bx;Qd.Triangle=Bx;var Cx=Lc("a$",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),
g=c.hasOwnProperty("Image")&&"function"===typeof c.Image?c.Image:c.Image=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:"__deserialize__",value:function(a,d,f,k){this._isDeserializing=!0;ie._get(Object.getPrototypeOf(g.prototype),"__deserialize__",this).call(this,a,d,f,k)}},{key:"__after_deserialize__",value:function(a,d,f){delete this._isDeserializing;ie._get(Object.getPrototypeOf(g.prototype),
"__after_deserialize__",this).call(this,a,d,f)}},{key:"isImage",get:function(){return!0}},{key:"ratio",get:function(){var a=this.naturalExtent;return a.x/a.y}},{key:"setWidthKeepingRatio",value:function(a){this.width=a;this.height=a/this.ratio}},{key:"setHeightKeepingRatio",value:function(a){this.width=this.ratio*a;this.height=a}},{key:"loadUrl",value:function(a){var d=this,f=this.autoResize;this.autoResize=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.autoResize;this.imageUrl=a;return Qd.promise["finally"](this.whenLoaded(),
function(){return d.autoResize=f})}},{key:"whenLoaded",value:function(){var a=this;return this.isLoaded?Promise.resolve(this):new Promise(function(d,f){var k=a.imageUrl;a.imageElement(function(n){a.imageUrl!==k&&f(Error("url changed (".concat(k," => ").concat(a.imageUrl,")")));a.naturalExtent=Qd.pt(n.width,n.height);a.isLoaded=!0;d(a)})})}},{key:"determineNaturalExtent",value:function(){var a=this;return this.whenLoaded().then(function(){return a.naturalExtent})}},{key:"render",value:function(a){this._requestMasterStyling&&
(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return a.renderImage(this)}},{key:"clear",value:function(){return this.loadUrl("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",!1)}},{key:"imageElement",value:function(a){var d=this;return new Promise(function(f,k){var n=d.env.domEnv.document.createElement("img");n.onload=function(){f(n);"function"===typeof a&&a(n)};n.src=d.imageUrl})}},{key:"canvasElementAndContext",value:function(){var a=
Bb(regeneratorRuntime.mark(function f(){var k,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return k=this.env.domEnv.document,r.next=3,this.imageElement();case 3:return n=r.sent,p=k.createElement("canvas"),q=p.getContext("2d"),p.width=n.width,p.height=n.height,q.drawImage(n,0,0,n.width,n.height),r.abrupt("return",{canvas:p,ctx:q,image:n});case 10:case "end":return r.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"imageData",value:function(){var a=
Bb(regeneratorRuntime.mark(function k(f){var n,p,q,r,t,w,x,B;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,this.canvasElementAndContext();case 2:return n=D.sent,p=n.ctx,q=n.image,f||(f=Qd.rect(0,0,q.width,q.height)),r=f,t=r.x,w=r.y,x=r.width,B=r.height,D.abrupt("return",p.getImageData(t,w,x,B));case 8:case "end":return D.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"pixelAt",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=
n.next){case 0:return n.next=2,this.imageData(f.extent(Qd.pt(1,1)));case 2:return n.abrupt("return",n.sent.data);case 3:case "end":return n.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"colorAt",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Qd.Color,n.next=3,this.pixelAt(f);case 3:return n.t1=n.sent,n.abrupt("return",n.t0.fromTuple8Bit.call(n.t0,n.t1));case 5:case "end":return n.stop()}},
k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"loadArrayBuffer",value:function(a){a=new Uint8Array(a);a=new Blob([a],{type:"image/jpeg"});this.imageUrl=(window.URL||window.webkitURL).createObjectURL(a);this.makeDirty()}},{key:"convertToBase64",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,t,w;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return k=this.imageUrl,n=k.slice(k.lastIndexOf(".")+1,k.length).toLowerCase(),
"jpg"===n?n="jpeg":"svg"===n&&(n="svg+xml"),["gif","jpeg","png","tiff","svg+xml"].includes(n)||(n="gif"),k.startsWith("http")||(k=Qd.string.joinPath(System.baseURL,k)),x.next=7,Promise.resolve().then(function(){return rT});case 7:return p=x.sent,q=p.runCommand,r='curl --silent "'.concat(k,'" | openssl base64'),x.next=12,q(r).whenDone();case 12:return t=x.sent,w=t.stdout,x.abrupt("return",this.loadUrl("data:image/".concat(n,";base64,").concat(w),!1));case 15:case "end":return x.stop()}},f,this)}));
return function(){return a.apply(this,arguments)}}()},{key:"downloadImage",value:function(){var a=this.imageUrl;if(a.match(/^data:image/)){var d=this.name||"image-from-lively";var f=a.match(/image\/([^;]+)/);f&&f[1]&&(d+="."+f[1])}else d||(d=Qd.arr.last(a.split("/")));f=document.createElement("a");f.download=d;f.href=a;f.click()}},{key:"convertTo",value:function(){var a=Bb(regeneratorRuntime.mark(function n(f,k){var p,q,r,t,w,x,B,D,F=arguments;return regeneratorRuntime.wrap(function(L){for(;;)switch(L.prev=
L.next){case 0:return p=2<F.length&&void 0!==F[2]?F[2]:!1,k||(k=1),L.next=4,this.canvasElementAndContext();case 4:return q=L.sent,r=q.ctx,t=q.canvas,w=q.image,L.next=10,this.determineNaturalExtent();case 10:return x=L.sent,B=x.x,D=x.y,t.width=w.width,t.height=w.height,p&&(r.filter=p),r.drawImage(w,0,0,B,D),L.abrupt("return",this.loadUrl(t.toDataURL(f,k),!1));case 18:case "end":return L.stop()}},n,this)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"resampleImageToFitBounds",value:function(){var a=
Bb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,t,w,x,B;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,this.canvasElementAndContext();case 2:return k=D.sent,n=k.ctx,p=k.canvas,q=k.image,r=this.width,t=this.height,w=q.width,x=q.height,p.width=w,p.height=x,n.drawImage(q,0,0,r,t),B=n.getImageData(0,0,w,x),p.width=r,p.height=t,n.putImageData(B,0,0),D.abrupt("return",this.loadUrl(p.toDataURL(),!1));case 16:case "end":return D.stop()}},f,this)}));return function(){return a.apply(this,
arguments)}}()},{key:"crop",value:function(a){var d=this.canvasElementAndContext(),f=d.ctx,k=d.canvas;d=d.image;var n=this.innerBounds(),p=d.width,q=d.height;a=n.intersection(a);a=new Qd.Rectangle(a.x/n.width,a.y/n.height,a.width/n.width,a.height/n.height);a=(new Qd.Rectangle(0,0,p,q)).divide([a]);a=Nb(a,1)[0];k.width=p;k.height=q;f.drawImage(d,0,0,p,q);d=f.getImageData(a.x,a.y,a.width,a.height);k.width=a.width;k.height=a.height;f.putImageData(d,0,0);return this.loadUrl(k.toDataURL(),!1)}},{key:"interactivelyChangeImageURL",
value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.world().prompt("Enter image url",{historyId:"lively.morphic-image-url-inputs",input:this.imageUrl.startsWith("data:")?"":this.imageUrl,requester:this,selectInput:!0});case 2:k=n.sent,"string"===typeof k&&(this.imageUrl=k);case 4:case "end":return n.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"menuItems",
value:function(a){var d=this;a=ie._get(Object.getPrototypeOf(g.prototype),"menuItems",this).call(this,a);a.unshift(["change image url...",function(){return d.interactivelyChangeImageURL()}],["resize image to to fit world",function(){var f=Math.min(d.world().visibleBounds().width/d.naturalExtent.x,d.world().visibleBounds().height/d.naturalExtent.y);d.extent=d.naturalExtent.scaleBy(f)}],["resize image to its real image size",Bb(regeneratorRuntime.mark(function k(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=
n.next){case 0:return n.next=2,d.determineNaturalExtent();case 2:return n.abrupt("return",d.extent=n.sent);case 3:case "end":return n.stop()}},k)}))],["resample image to fit current bounds",function(){return d.resampleImageToFitBounds()}],{isDivider:!0});return a}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Image"}},{key:"properties",get:function(){return{imageUrl:{isStyleProp:!0,copyAssetOnFreeze:!0,after:["extent","autoResize"],defaultValue:Qd.config.defaultImage,set:function(a){var d=
this;this.isLoaded=!1;this.setProperty("imageUrl",a);this.setProperty("naturalExtent",null);var f=this.autoResize&&!this._isDeserializing;this.whenLoaded().then(function(){d.imageUrl===a&&(d.isLoaded=!0,f&&(d.extent=d.naturalExtent))})["catch"](function(k){})}},fill:{defaultValue:Qd.Color.transparent},naturalExtent:{defaultValue:null},isLoaded:{defaultValue:!1,serialize:!1},autoResize:{isStyleProp:!0,defaultValue:!1},clipMode:{defaultValue:"auto"}}}}],c,{pathInPackage:function(){return"./morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:89561,end:99322})}(Qd.Morph));Qd.Image=Cx;Qd.Image=Cx;var ZA=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),g=c.hasOwnProperty("PathPoint")&&"function"===typeof c.PathPoint?c.PathPoint:c.PathPoint=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.path=a;this._isSmooth=d.isSmooth||!1;this.x=d.position?d.position.x:d.x||0;this.y=d.position?d.position.y:d.y||0;this._controlPoints=d.controlPoints}},{key:"__dont_serialize__",get:function(){return["attributeConnections","$$controlPoints","$$position","doNotCopyProperties","doNotSerialize"]}},{key:"isPathPoint",get:function(){return!0}},
{key:"isSmooth",get:function(){return this._isSmooth||!1}},{key:"isSmooth",set:function(a){this._isSmooth!==a&&(this._isSmooth=a,this.adaptControlPoints(a))}},{key:"position",get:function(){return Qd.pt(this.x,this.y)}},{key:"position",set:function(a){var d=a.y;this.x=a.x;this.y=d;this.path.makeDirty()}},{key:"moveBy",value:function(a){this.position=this.position.addPt(a);this.path.onVertexChanged(this);return this}},{key:"copy",value:function(){var a=new Qd.ExpressionSerializer;return new Qd.PathPoint(this.path,
a.deserializeExprObj(this.__serialize__()))}},{key:"__serialize__",value:function(){return{__expr__:"({\n         position: ".concat(this.position.toString(!1),",\n         isSmooth: ").concat(this.isSmooth,",\n         controlPoints: {\n           next: ").concat(this.controlPoints.next.toString(!1),",\n           previous: ").concat(this.controlPoints.previous.toString(!1),"\n         }\n      })").replace(/[\n|\s]/g,""),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}}},{key:"controlPoints",
get:function(){return this._controlPoints||{next:Qd.pt(0,0),previous:Qd.pt(0,0)}}},{key:"controlPoints",set:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=a.next;a=a.previous;this._controlPoints={next:d?Qd.Point.fromLiteral(d):Qd.pt(0,0),previous:a?Qd.Point.fromLiteral(a):Qd.pt(0,0)};this.path.makeDirty()}},{key:"moveNextControlPoint",value:function(a){this.moveControlPoint("next",a)}},{key:"movePreviousControlPoint",value:function(a){this.moveControlPoint("previous",
a)}},{key:"moveControlPoint",value:function(a,d){var f,k=this.controlPoints[a];k=k?k.addPt(d):d;d="next"===a?"previous":"next";var n=this.controlPoints[d];this.isSmooth&&(n=k.negated().normalized().scaleBy(n.r()));this.controlPoints=(f={},Pc(f,a,k),Pc(f,d,n),f);this.path.onVertexChanged(this)}},{key:"pointOnLine",value:function(a,d,f,k){a=Qd.pt(a.x,a.y);d=Qd.pt(d.x,d.y);a=d.subPt(a);var n=a.scaleBy(1/a.r());f=d.subPt(f).dotProduct(n);return d.subPt(n.scaleBy(Math.max(1,Math.min(f,a.r())))).addXY(k,
k)}},{key:"nextVertex",get:function(){return this.path.vertexAfter(this)}},{key:"previousVertex",get:function(){return this.path.vertexBefore(this)}},{key:"interpolate",value:function(a,d){var f=this.copy();f.position=f.position.interpolate(a,d);return f}},{key:"adaptControlPoints",value:function(a){var d=this.nextVertex,f=this.previousVertex,k=this.position,n=this.path,p=n.vertices,q=p.indexOf(this),r=0===q;p=q===p.length-1;f=f?f.position:k;d=d?d.position:k;a?(a=this.pointOnLine(f,d,k,n.borderWidth),
this.controlPoints={previous:r?Qd.pt(0,0):a.subPt(d),next:a.subPt(f)}):this.controlPoints={previous:r?Qd.pt(0,0):f.subPt(k).scaleBy(.5),next:p?Qd.pt(0,0):d.subPt(k).scaleBy(.5)};n.onVertexChanged(this)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PathPoint"}}],c,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:99330,end:103385})}(void 0);Qd.PathPoint=ZA;Qd.PathPoint=ZA;var Dx=Lc("P",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),g=c.hasOwnProperty("Path")&&"function"===typeof c.Path?c.Path:c.Path=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:{};ie._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,Object.assign({},Qd.obj.dissoc(a,"origin")));this.adjustOrigin(a.origin||this.origin);this.position=a.position||this.position;this.updateBounds(this.vertices)}},{key:"__after_deserialize__",value:function(a,d,f){ie._get(Object.getPrototypeOf(g.prototype),"__after_deserialize__",this).call(this,a,d,f);this.updateBounds(this.vertices)}},{key:"__additionally_serialize__",
value:function(a,d,f,k){ie._get(Object.getPrototypeOf(g.prototype),"__additionally_serialize__",this).call(this,a,d,f,k);d=this.getProperty("draggable");d!==this.propertiesAndPropertySettings().properties.draggable.defaultValue&&(a.props.draggable={value:d});if(d=this.borderColor.valueOf())a.props.borderColor={key:"borderColor",value:f.expressionSerializer.exprStringEncode({__expr__:d.toJSExpr(),bindings:{"lively.graphics/geometry-2d.js":["pt","rect"],"lively.graphics/color.js":["Color",Qd.getClassName(d)]}})}}},
{key:"isPath",get:function(){return!0}},{key:"isSvgMorph",get:function(){return!0}},{key:"onVertexChanged",value:function(a){this.makeDirty();this.updateBounds(this.vertices)}},{key:"copyVertices",value:function(){return this.vertices.map(function(a){return a.copy()})}},{key:"updateBounds",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.vertices;if(a.length&&!this._adjustingVertices){this._adjustingVertices=!0;var d=this.origin,f=this.extent,k=d.x/f.x;f=d.y/f.y;
var n=[];a.forEach(function(q,r){var t=q.isSmooth,w=q.position,x=q.controlPoints||{};q=x.next;x=x.previous;n.push(w);t&&0<r&&r<a.length-1&&n.push(w.addPt(q),w.addPt(x))});d=Qd.Rectangle.unionPts(n);k=Qd.pt(d.width*k,d.height*f);var p=d.topLeft();a.forEach(function(q){return q.moveBy(p.negated())});this.moveBy(this.getTransform().transformDirection(p));this.extent=d.extent().maxPt(Qd.pt(this.borderWidth,this.borderWidth));this.origin=k;this._adjustingVertices=!1}}},{key:"onChange",value:function(a){var d=
a.prop,f=a.value,k=a.prevValue,n=this._adjustingVertices,p=this._adjustingOrigin;"extent"===d&&f&&k&&!n&&this.adjustVertices(f.scaleByPt(k.inverted()));(!p&&"vertices"===d||"borderWidthLeft"===d)&&this.updateBounds("vertices"===d?f:this.vertices);n||"origin"!==d||this.updateBounds(this.vertices);ie._get(Object.getPrototypeOf(g.prototype),"onChange",this).call(this,a)}},{key:"vertexBefore",value:function(a){a=this.vertices.indexOf(a)-1;return this.vertices[0<=a?a:this.vertices.length-1]}},{key:"vertexAfter",
value:function(a){a=this.vertices.indexOf(a)+1;return this.vertices[a>this.vertices.length-1?0:a]}},{key:"adjustVertices",value:function(a){var d=this,f=this.vertices;f&&f.forEach(function(k){var n=k.controlPoints,p=n.next;n=n.previous;p=p.scaleByPt(a);n=n.scaleByPt(a);k.position=k.position.addPt(d.origin).scaleByPt(a).subPt(d.origin);k.controlPoints={next:p,previous:n}})}},{key:"adjustOrigin",value:function(a){this._adjustingOrigin=!0;var d=this.origin;this.vertices.forEach(function(f){return f.position=
d.subPt(a).addXY(f.x,f.y)});ie._get(Object.getPrototypeOf(g.prototype),"adjustOrigin",this).call(this,a);this._adjustingOrigin=!1}},{key:"addVertex",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,f=this.vertices;d="number"===typeof d?d:d&&d.isPathPoint?f.indexOf(d):void 0;"number"===typeof d&&-1<d?f.splice(d,0,a):f.push(a);this.vertices=f}},{key:"addVertexCloseTo",value:function(a){var d=this.verticesCloseTo(a),f=d.closest,k=f.length;f=f.vertex;d=d.next;a=this.findClosestPointOnPath(a,
10,3);return this.addVertex(a.point,a.length<=k?f:d?d.vertex:null)}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return a.renderPath(this)}},{key:"_pathNode",get:function(){var a=Qd.PropertyPath("env.renderer").get(this);return(a=a&&a.getNodeForMorph(this))&&a.querySelector("#svg"+Qd.string.regExpEscape(this.id))}},{key:"verticesCloseTo",value:function(a){for(var d=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:!0,f=this.vertices,k=Infinity,n=-1,p=0;p<f.length;p++){var q=f[p].position.dist(a);q>=k||(k=q,n=p)}k=0===n?null:{index:n-1,vertex:f[n-1]};p=n===f.length-1?null:{index:n+1,vertex:f[n+1]};f={index:n,vertex:f[n]};d&&(d=this._pathNode,k&&(n=this.findClosestPointOnPath(k.vertex.position,6,3,d).length,k.length=n),p&&(n=this.findClosestPointOnPath(p.vertex.position,6,3,d).length,p.length=n),d=this.findClosestPointOnPath(f.vertex.position,20,3,d).length,f.length=d);return{previous:k,next:p,closest:f}}},
{key:"findClosestPointOnPath",value:function(a,d,f,k){function n(p,q){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:10,t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:3,w=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,x=5<arguments.length&&void 0!==arguments[5]?arguments[5]:p.getTotalLength(),B=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,D=x;x=[];var F=(w-D)/(r-1),L=0;x.push([Qd.Point.ensure(p.getPointAtLength(D)),D,L]);for(L=1;L<r-1;L++){var G=D+L*F;
x.push([Qd.Point.ensure(p.getPointAtLength(G)),G,L])}x.push([Qd.Point.ensure(p.getPointAtLength(w)),w,L]);w=Infinity;D=-1;F=ba(x);var oa;try{for(F.s();!(oa=F.n()).done;){var ha=Nb(oa.value,3),Ha=ha[2],Va=q.dist(ha[0]);Va>=w||(w=Va,D=Ha)}}catch(hc){F.e(hc)}finally{F.f()}if(B>=t)return r=Nb(x[D],2),{point:r[0],length:r[1]};w=x[Math.max(0,D-1)][1];x=x[Math.min(x.length-1,D+1)][1];return n(p,q,r,t,w,x,B+1)}k||(k=(k=this.env.renderer.getNodeForMorph(this))&&k.querySelector("#svg"+Qd.string.regExpEscape(this.id)));
return k?n(k,a,d,f):{length:0,point:a}}},{key:"onDragStart",value:function(a){var d=a.domEvt.target,f=(new Qd.PropertyPath("attributes.class.value")).get(d);if(f&&f.includes("path-point"))a=f.match(/path-point-([0-9]+)(?:-control-([0-9]+))?$/),a=Nb(a,3),a[0],f=a[2],this._controlPointDrag={marker:d,n:Number(a[1])},void 0!==f&&(this._controlPointDrag.ctrlN=Number(f));else return ie._get(Object.getPrototypeOf(g.prototype),"onDragStart",this).call(this,a)}},{key:"onDrag",value:function(a){if(!this._controlPointDrag)return ie._get(Object.getPrototypeOf(g.prototype),
"onDrag",this).call(this,a);var d=this._controlPointDrag,f=d.n,k=d.ctrlN,n=this.vertices;if(d=n[f])a=this.getInverseTransform().transformDirection(a.state.dragDelta),void 0===k?(d.moveBy(a),a=n[f-1],n=n[f+1],a&&10>a.position.dist(d.position)?this._controlPointDrag.maybeMerge=[f-1,f]:n&&10>n.position.dist(d.position)?this._controlPointDrag.maybeMerge=[f,f+1]:this._controlPointDrag.maybeMerge=void 0):1===k?d.movePreviousControlPoint(a):2===k&&d.moveNextControlPoint(a)}},{key:"onDragEnd",value:function(a){a=
this.vertices;var d=this._controlPointDrag;if(d&&(d=d.maybeMerge,delete this._controlPointDrag,d)){d=Nb(d,2);var f=d[1];a[d[0]].controlPoints.next=a[f].controlPoints.next;a.splice(f,1);this.vertices=a}}},{key:"onDoubleMouseDown",value:function(a){this.showControlPoints&&this.addVertexCloseTo(this.localize(a.position))}},{key:"menuItems",value:function(){var a=this,d=Qd.Icon.textAttribute("check-square",{textStyleClasses:["far"]}),f=Qd.Icon.textAttribute("square",{textStyleClasses:["far"]});f[1].paddingRight=
"7px";d[1].paddingRight="5px";return[[[].concat(hb(this.showControlPoints?d:f),[" control points"]),function(){return a.showControlPoints=!a.showControlPoints}],[[].concat(hb(this.isSmooth?d:f),[" smooth"]),function(){return a.isSmooth=!a.isSmooth}],{isDivider:!0}].concat(hb(ie._get(Object.getPrototypeOf(g.prototype),"menuItems",this).call(this)))}},{key:"getPointOnPath",value:function(a){if(!this._pathNode)return Qd.pt(0,0);a=this._pathNode.getPointAtLength(this._pathNode.getTotalLength()*a)||Qd.pt(0,
0);return Qd.pt(a.x,a.y)}},{key:"borderOptions",get:function(){return["solid","dotted","dashed"]}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Path"}},{key:"properties",get:function(){return{borderColor:{isStyleProp:!0,type:"ColorGradient",foldable:["top","left","right","bottom"],set:function(a){a||(a=Qd.Color.white);if(a.isColor||a.isGradient)a={top:a,left:a,right:a,bottom:a};this.setProperty("borderColor",Qd.obj.extract(a,["top","left","right","bottom"],function(d,f){return Qd.obj.isArray(f)?
Qd.Color.fromTuple(f):f}))}},showControlPoints:{defaultValue:!1},vertices:{defaultValue:[],after:["isSmooth","borderWidth"],before:["extent","origin"],type:"Vertices",set:function(a){var d=this,f=this.isSmooth;this._adjustingVertices=!0;a=a.map(function(k){return k.isPathPoint?Object.assign(k,{path:d}):new Qd.PathPoint(d,Object.assign({isSmooth:f},k))});this.setProperty("vertices",a);this._adjustingVertices=!1;this.updateBounds(a)}},startMarker:{defaultValue:null,type:"Object"},endMarker:{defaultValue:null,
type:"Object"},endStyle:{isStyleProp:!0,type:"Enum",values:["butt","round","square"],defaultValue:"butt"},drawnProportion:{type:"Number",isStyleProp:!0,isFloat:!0,min:-1,max:1,defaultValue:0},cornerStyle:{type:"Enum",isStyleProp:!0,values:["arcs","bevel","miter","miter-clip","round"],defaultValue:"miter"},draggable:{get:function(){return this.getProperty("draggable")||this.showControlPoints}},isSmooth:{defaultValue:!1,before:["vertices"],type:"Boolean",set:function(a){this.setProperty("isSmooth",
a);this.vertices&&(this._adjustingVertices=!0,this.vertices.forEach(function(d){return d.isSmooth=a}),this._adjustingVertices=!1,this.updateBounds(this.vertices))}}}}}],c,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:103393,end:117795})}(Qd.Morph));Qd.Path=Dx;Qd.Path=Dx;var Ex=Lc("aK",
function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),g=c.hasOwnProperty("Polygon")&&"function"===typeof c.Polygon?c.Polygon:c.Polygon=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){if(a.vertices&&2<a.vertices.length)ie._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),
this).call(this,a);else throw Error("A polygon requires 3 or more vertices!");}},{key:"isPolygon",get:function(){return!0}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Polygon"}}],c,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:117803,end:118062})}(Qd.Path));Qd.Polygon=
Ex;Qd.Polygon=Ex;var Fx=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),g=c.hasOwnProperty("LineMorph")&&"function"===typeof c.LineMorph?c.LineMorph:c.LineMorph=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:"isPolygon",get:function(){return!0}},{key:"update",value:function(){if(!this._isUpdating){this._isUpdating=!0;var a=this.line,d=this.height,
f=a.toVector();this.setProperty("position",this.position.addPt(a.perpendicularLine(0,d,"cc").toVector()));this.width=f.fastR();this.rotation=f.theta();this.vec=f;this._isUpdating=!1}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LineMorph"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:0},fill:{defaultValue:Qd.Color.black},height:{defaultValue:1},line:{defaultValue:Qd.Line.fromCoords(0,0,0,0),set:function(a){this.setProperty("line",a);this.update(a)}},start:{derived:!0,
after:["line"],get:function(a){return this.line.start},set:function(a){this.line=this.line.withStart(a)}},end:{derived:!0,after:["line"],get:function(a){return this.line.end},set:function(a){this.line=this.line.withEnd(a)}},position:{derived:!0,after:["line"],get:function(a){return this.start},set:function(a){var d=a.subPt(this.start),f=this.rotation;this.line=new Qd.Line(a,this.end.addPt(d));this.rotation=f}}}}}],c,{pathInPackage:function(){return"./morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:118070,end:119715})}(Qd.Morph);Qd.LineMorph=Fx;Qd.LineMorph=Fx;var w3=Object.freeze({__proto__:null,Morph:An,Ellipse:Ax,Triangle:Bx,Image:Cx,PathPoint:ZA,Path:Dx,Polygon:Ex,LineMorph:Fx}),wl=window.lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js");wl.pt=Ij;wl.Morph=An;wl.morph=il;wl.touchInputDevice=uo;wl.config=al;var Gx=Lc("Y",function(b){var c=
window.lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),g=c.hasOwnProperty("Tooltip")&&"function"===typeof c.Tooltip?c.Tooltip:c.Tooltip=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:"update",value:function(a){this.position=a.globalBounds().bottomCenter().subPt(a.world().scroll).addPt(wl.pt(0,7))}},{key:"softRemove",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=
n.next){case 0:return n.next=2,this.animate({opacity:0,duration:300});case 2:f&&f(this),this.remove();case 4:case "end":return n.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Tooltip"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},reactsToPointer:{defaultValue:!1},isEpiMorph:{defaultValue:!0},description:{after:["submorphs"],derived:!0,get:function(){return Nb(this.submorphs,
1)[0].value},set:function(a){var d=Nb(this.submorphs,1)[0];d.value=a;d.fit()}},submorphs:{initialize:function(){this.submorphs=[new wl.morph({reactsToPointer:!1,type:"label",name:"label",width:200})]}}}}}],c,{pathInPackage:function(){return"./tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:171,end:1294})}(wl.Morph));
wl.Tooltip=Gx;wl.Tooltip=Gx;var Hx=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),g=c.hasOwnProperty("TooltipViewer")&&"function"===typeof c.TooltipViewer?c.TooltipViewer:c.TooltipViewer=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){this.currentMorph=a}},{key:"__dont_serialize__",
get:function(){return["currentTooltip","currentMorph"]}},{key:"notPartOfCurrentTooltip",value:function(a){return!a.ownerChain().includes(this.currentMorph)}},{key:"invalidatesCurrentTooltip",value:function(a){return a.tooltip||this.notPartOfCurrentTooltip(a)}},{key:"mouseMove",value:function(a){var d=this;if(!wl.touchInputDevice&&!a.state.draggedMorph){var f=a.hand,k=$world.morphsContainingPoint(a.positionIn($world)).filter(function(t){return t.reactsToPointer||t.tooltip});k=ba(k.slice(k.indexOf(f)+
1));var n;try{for(k.s();!(n=k.n()).done;){var p=n.value;if(r&&!r.ownerChain().includes(p))break;if(p.tooltip){var q=p;break}var r=p}}catch(t){k.e(t)}finally{k.f()}for(;q&&!q.visible;)q=q.morphBeneath(a.positionIn($world));q?this.currentMorph!==q&&this.invalidatesCurrentTooltip(q)&&(this.hoverOutOfMorph(this.currentMorph),this.hoverIntoMorph(q,f),this.currentMorph=q):this.currentTooltip?this.currentTooltip.softRemove().then(function(){d.currentTooltip&&!d.currentTooltip.owner&&(d.currentTooltip=null)}):
this.currentMorph=null}}},{key:"mouseDown",value:function(a){a.targetMorph;this.currentTooltip&&this.currentTooltip.remove();this.currentTooltip=null}},{key:"hoverIntoMorph",value:function(a,d){this.clearScheduledTooltip();this.currentTooltip?this.showTooltipFor(a,d):this.scheduleTooltipFor(a,d)}},{key:"hoverOutOfMorph",value:function(a){var d=this;(a=this.currentTooltip)&&a.softRemove(function(f){return d.currentTooltip===f&&(d.currentTooltip=null)})}},{key:"scheduleTooltipFor",value:function(a,
d){var f=this;this.timer=setTimeout(function(){f.currentMorph&&f.showTooltipFor(a,d)},1E3*wl.config.showTooltipsAfter)}},{key:"clearScheduledTooltip",value:function(){clearTimeout(this.timer)}},{key:"clearCurrentTooltip",value:function(){var a=this.currentTooltip;a&&a.remove()}},{key:"showTooltipFor",value:function(a,d){var f=this;a.tooltip&&a.world()&&!d.env.eventDispatcher.eventState.draggedMorph&&(this.clearCurrentTooltip(),d=d?d.position.addXY(10,7):a.globalBounds().bottomRight(),this.currentTooltip=
new wl.Tooltip({position:d,description:a.tooltip}),pd.import("./tooltips.cp-6a2406c0.js").then(function(k){f.currentTooltip.master=k.SystemTooltip;$world.addMorph(f.currentTooltip);f.currentTooltip.update(a)}))}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"TooltipViewer"}}],c,{pathInPackage:function(){return"./tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:1302,end:4622})}(void 0);wl.TooltipViewer=Hx;wl.TooltipViewer=Hx;var x3=Object.freeze({__proto__:null,Tooltip:Gx,TooltipViewer:Hx}),ok=window.lively.FreezerRuntime.recorderFor("lively.2lively/interface.js");ok.nyi=function(b){throw Error("Not yet implemented: ".concat(b));};ok.string=ji;ok.promise=ai;ok.debugMessageOrder=!1;var AH=function(){function b(c){rd(this,b);this.id=ok.string.newUUID();this.actions={};this.options={ackTimeout:3500,debug:!1};this._incomingOrderNumberingBySenders=
new Map;this._outgoingOrderNumberingByTargets=new Map;this._outOfOrderCacheBySenders=new Map}Ac(b,[{key:"isOnline",value:function(){ok.nyi("isOnline")}},{key:"open",value:function(){ok.nyi("open")}},{key:"close",value:function(){ok.nyi("close")}},{key:"remove",value:function(){ok.nyi("remove")}},{key:"whenOnline",value:function(c){var g=this;return ok.promise.waitFor(c,function(){return g.isOnline()}).then(function(){return g})["catch"](function(a){return Promise.reject(/timeout/i.test(String(a))?
Error("Timeout in ".concat(g,".whenOnline")):a)})}},{key:"onError",value:function(c){this.debug&&console.log("[".concat(this,"] error: ").concat(c))}},{key:"removeService",value:function(c){delete this.actions[c]}},{key:"removeServices",value:function(c){var g=this;c.forEach(function(a){return g.removeService(a)})}},{key:"addService",value:function(c,g){this.actions[c]=g}},{key:"addServices",value:function(c){var g=this;Object.keys(c).forEach(function(a){return g.addService(a,c[a])})}},{key:"ping",
value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f,k,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return f=Date.now(),q.next=3,this.sendToAndWait(a,"l2l-ping",{timestamp:f});case 3:return k=q.sent,n=k.data.timestamp,p=Date.now(),q.abrupt("return",{to:n-f,from:p-n,roundtrip:p-f});case 7:case "end":return q.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"send",value:function(c,g){ok.nyi("send")}},{key:"sendAndWait",
value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f=this,k,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:k=new Promise(function(t,w){return f.send(a,t)});n={};p=this.options.ackTimeout+400;"ackTimeout"in a&&(p=!a.ackTimeout||0>a.ackTimeout?null:a.ackTimeout+400);if(!p){r.next=8;break}r.next=5;return Promise.race([ok.promise.delay(p,n),k]);case 5:q=r.sent;r.next=11;break;case 8:return r.next=10,k;case 10:q=r.sent;case 11:if(q!==n){r.next=13;
break}throw Error("Timeout sending ".concat(a.action));case 13:return r.abrupt("return",q);case 14:case "end":return r.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"sendTo",value:function(c,g,a,d){return this.send({target:c,action:g,data:a},d)}},{key:"sendToAndWait",value:function(c,g,a,d){return this.sendAndWait(Object.assign({target:c,action:g,data:a},d))}},{key:"prepareSend",value:function(c,g){var a=c.target,d=c.action,f=c.messageId;c.data;var k=c.sender;if(!d)throw Error("Trying to send a message without specifying action!");
if(!a)throw Error("Trying to send message ".concat(d," without specifying target!"));f||(c.messageId=ok.string.newUUID());k||(c.sender=this.id);d=c.n=this._outgoingOrderNumberingByTargets.get(a)||0;this._outgoingOrderNumberingByTargets.set(a,d+1);if("function"===typeof g){k=this;var n=g;g=function(p){var q=k._incomingOrderNumberingBySenders.get(p.sender)||0;k.debug&&ok.debugMessageOrder&&console.log("[MSG ORDER] ".concat(k," received ack for ").concat(p.action," as msg ").concat(q));try{n.apply(null,
arguments)}catch(r){console.error("Error in ack fn of ".concat(k,": ").concat(r.stack))}k._incomingOrderNumberingBySenders.set(p.sender,q+1);setTimeout(function(){return k.invokeOutOfOrderMessages(p.sender)},0)}}this.debug&&ok.debugMessageOrder&&console.log("[MSG ORDER] ".concat(this," sending ").concat(d," (").concat(c.action,") to ").concat(a));return[c,g]}},{key:"prepareAnswerMessage",value:function(c,g){return{action:c.action+"-response",inResponseTo:c.messageId,target:c.sender,data:g,sender:this.id}}},
{key:"installEventToMessageTranslator",value:function(c){var g=this,a=c.onevent;c.onevent=function(d){var f=d.data||[];a.call(this,d);d.data=["*"].concat(f);a.call(this,d)};c.on("*",function(d,f){d&&"object"===Jc(d)&&d.action&&(f=d,d=f.action);var k=arguments[arguments.length-1];k="function"===typeof k?k:null;(f=f===k?null:f)&&f.data&&("number"===typeof f.n||f.broadcast)&&f.sender?g.receive(f,c,k):(console.warn("".concat(g," received non-conformant message ").concat(d,":"),arguments),"function"===
typeof k&&k({data:{error:"invalid l2l message"}}))})}},{key:"receive",value:function(c,g,a){this.dispatchL2LMessageToSelf(c,g,a)}},{key:"dispatchL2LMessageToSelf",value:function(c,g,a){var d=this,f=c.action;if(c.broadcast)this.safeInvokeServiceHandler(f,c,a,g);else try{var k=this._incomingOrderNumberingBySenders.get(c.sender)||0,n="register"===f||"unregister";if(!n&&c.n<k)console.error("[MSG ORDER] [".concat(this,"] received message no. ").concat(c.n," but expected >= ").concat(k,", dropping ").concat(f));
else if(!n&&c.n>k){this.debug&&ok.debugMessageOrder&&console.log("[MSG ORDER] [".concat(this,"] storing out of order message ").concat(f," (").concat(c.n,") for later invocation"));var p=this._outOfOrderCacheBySenders.get(c.sender);p||(p=[],this._outOfOrderCacheBySenders.set(c.sender,p));p.push([f,c,a,g])}else this.safeInvokeServiceHandler(f,c,a,g),setTimeout(function(){return d.invokeOutOfOrderMessages(c.sender)},0)}catch(q){console.error("Error message ordering when handling ".concat(f,": ").concat(q.stack||
q)),"function"===typeof a&&a(this.prepareAnswerMessage(c,{isError:!0,error:String(q.stack||q)}))}}},{key:"invokeOutOfOrderMessages",value:function(c){var g=this._outOfOrderCacheBySenders.get(c);if(g&&g.length){var a=this._incomingOrderNumberingBySenders.get(c)||0;c=g.findIndex(function(d){d=Nb(d,2);d[0];return d[1].n===a});-1!==c&&(g.splice(c,1),this.invokeServiceHandler.apply(this,g[c]))}}},{key:"renameTarget",value:function(c,g){if(c!==g){var a=this._outgoingOrderNumberingByTargets.get(c);this._outgoingOrderNumberingByTargets["delete"](c);
this._outgoingOrderNumberingByTargets.set(g,a)}}},{key:"safeInvokeServiceHandler",value:function(c,g,a,d){try{"function"===typeof this.actions[c]?this.invokeServiceHandler(c,g,a,d):d._events&&Object.keys(d._events).includes(c)||(console.warn("WARNING [".concat(this,"] Unhandled message: ").concat(c)),"function"===typeof a&&a(this.prepareAnswerMessage(g,{isError:!0,error:"message not understood: "+c})))}catch(f){console.error("Error when handling ".concat(c,": ").concat(f.stack||f)),"function"===typeof a&&
a(this.prepareAnswerMessage(g,{isError:!0,error:String(f.stack||f)}))}}},{key:"invokeServiceHandler",value:function(c,g,a,d){var f=this;this.debug&&ok.debugMessageOrder&&console.log("[MSG ORDER] ".concat(this," received ").concat(g.n," (").concat(g.action,") from ").concat(g.sender));this._incomingOrderNumberingBySenders.set(g.sender,g.n+1);if("function"===typeof a){var k=!1,n=!1,p="ackTimeout"in g?g.ackTimeout:this.options.ackTimeout,q=this._outgoingOrderNumberingByTargets.get(g.sender)||0;this._outgoingOrderNumberingByTargets.set(g.sender,
q+1);var r=function(t){n?console.warn("[".concat(f,"] ackFn for ").concat(g.action," called after it timed out, dropping answer!")):k?console.warn("[".concat(f,"] ack function called repeatedly when handling ").concat(g.action)):(k=!0,a(f.prepareAnswerMessage(g,t)),f.debug&&ok.debugMessageOrder&&console.log("[MSG ORDER] ".concat(f," sending ").concat(q," (ack for ").concat(g.action,")")))};p&&setTimeout(function(){k||(r({isError:!0,error:"Timeout error: ".concat(f," did not send answer for ").concat(g.action,
" after ").concat(p,"ms")}),n=!0)},p)}try{this.actions[c].call(this,this,g,r,d)}catch(t){console.error("[".concat(this,"] Error handling ").concat(c,": ").concat(t.stack||t)),r&&r({error:t.stack})}}},{key:"debug",get:function(){return this.options.debug},set:function(c){this.options.debug=c}}]);return b}();ok.L2LConnection=AH;ok["default"]=AH;var Wu=window.lively.FreezerRuntime.recorderFor("lively.2lively/default-actions.js"),BH={"l2l-ping":function(b,c,g,a){a=c.sender;c=c.data.timestamp;var d=Date.now();
"function"===typeof g&&g({timestamp:d});b.debug&&console.log("[".concat(void 0,"] got ping from ").concat(a,", time: ").concat(d-c,"ms"))},"remote-eval":function(b,c,g,a){c.sender;var d=c.data.source;Promise.resolve().then(function(){return eval(d)}).then(function(f){return g({value:f})})["catch"](function(f){f.originalErr&&(f=f.originalErr);console.error("eval error: "+f);"function"===typeof g&&g({isError:!0,value:String(f.stack||f)})})},"remote-eval-2":function(b,c,g,a){c.sender;var d=c.data.source;
Promise.resolve().then(function(){var f=eval(d);if(!(f instanceof Promise))throw console.error("unexpected eval result:"+f),Error("unexpected eval result:"+f);return f}).then(function(f){return g(f)})["catch"](function(f){console.error("eval error: "+f);f.originalErr&&(f=f.originalErr);"function"===typeof g&&g({isError:!0,value:String(f.stack||f)})})}};Wu.defaultActions=BH;Wu.defaultActions=BH;var sT={"[broadcast] send":function(b,c,g,a){return Bb(regeneratorRuntime.mark(function f(){var k,n,p,q,
r,t,w,x,B,D,F,L;return regeneratorRuntime.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:k=c.sender,n=c.data,p=n.action,q=n.broadcast,r=n.room,t=n.namespace,w=n.isSystemBroadcast,x=n.isMultiServerBroadcast,B=[],x?(console.log(".......isMultiServerBroadcast"),D=b.id,F=b.getTrackerList(),console.log(F),B=F.map(function(oa){return oa.id!==D?oa.io._nsps.get("/"+oa.namespace):a.broadcast})):(w&&(t=b.namespace),B.push(t?b.io._nsps.get("/"+t):a.broadcast)),B.forEach(function(oa){console.log(p,{action:p,
sender:k,broadcast:!0,data:q});debugger;oa.to(r).emit(p,{action:p,sender:k,broadcast:!0,data:q})}),g&&"function"===typeof g&&(L="message broadcasted to "+r,t&&(L+=" in namespace "+t),1<B.length&&(L+=" "+B.length+" trackers"),console.log(L),g({status:L}));case 6:case "end":return G.stop()}},f)}))()},"[broadcast] join room":function(b,c,g,a){return Bb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,t;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:k=c.sender;n=c.data.room;
q=!1;r=b.io._nsps.get("/"+b.namespace).adapter.rooms;t=r.get(n)&&r.get(n).has(a.id);if(!t){w.next=8;break}p="".concat(k," already in ").concat(n);w.next=12;break;case 8:return w.next=10,a.join(n);case 10:p="".concat(k," joined ").concat(n),q=!0;case 12:g&&"function"===typeof g&&g({status:p,joined:q});case 13:case "end":return w.stop()}},f)}))()},"[broadcast] leave room":function(b,c,g,a){return Bb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,t;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=
w.next){case 0:k=c.sender;n=c.data.room;q=!1;r=b.io._nsps.get("/"+b.namespace).adapter.rooms;if(t=r.get(n)&&r.get(n).has(a.id)){w.next=8;break}p="".concat(k," not in ").concat(n);w.next=12;break;case 8:return w.next=10,a.leave(n);case 10:p="".concat(k," left room ").concat(n),q=!0;case 12:console.log(p),g&&"function"===typeof g&&g({left:q,status:p});case 14:case "end":return w.stop()}},f)}))()},"[broadcast] my rooms":function(b,c,g,a){if(null==c)throw new TypeError("Cannot destructure undefined");
g(a.rooms)},"[broadcast] all rooms":function(b,c,g,a){c.sender;g(b.io._nsps.get("/"+b.namespace).adapter.rooms)},"[broadcast] list room members":function(b,c,g,a){c.sender;c=c.data.room;a=b.io;c?(b=a._nsps.get("/"+b.namespace).adapter.rooms.get(c),g({room:c,sockets:b?hb(b.entries()).reduce(function(d,f){f=Nb(f,1)[0];return d[f]=!0,d},{}):{},length:b?b.size:0})):g({isError:!0,error:"`room` paramerter missing!"})},getClients:function(b,c,g){c.trackerId;b.removeDisconnectedClients();g(Array.from(b.clients))}};
Wu.defaultTrackerActions=sT;Wu.defaultTrackerActions=sT;var CH={getRoomList:function(b){return Bb(regeneratorRuntime.mark(function g(){var a,d,f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:a=b.client,d=b.ackFn,f=a._socketioClient.rooms,d(f);case 3:case "end":return k.stop()}},g)}))()},"ask for":function(b,c,g,a){var d=this;return Bb(regeneratorRuntime.mark(function k(){var n,p,q,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=
c.sender,p=c.data.query,q=p.match(/password|sudo/i)?"passwordPrompt":"prompt",t.next=4,$world[q](p);case 4:r=t.sent,"function"===typeof g&&g({answer:r}),b.debug&&console.log("[".concat(d,"] message 'ask for' from ").concat(n,", query: ").concat(p));case 7:case "end":return t.stop()}},k)}))()},"open editor":function(b,c,g,a){return Bb(regeneratorRuntime.mark(function f(){var k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:k=c.data.args;if(k.length){p.next=4;break}g({error:"no file specified"});
return p.abrupt("return");case 4:return p.next=6,$world.execCommand("open file for EDITOR",{url:k[0]});case 6:n=p.sent,"function"===typeof g&&g("aborted"===n?{error:String(n)}:{status:n});case 8:case "end":return p.stop()}},f)}))()},changeWorkingDirectory:function(b,c,g,a){return Bb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,t,w,x;return regeneratorRuntime.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:n=(k=c.data.args)||[];p=Nb(n,2);q=p[0];r=p[1];t="OK";try{if(q)if(r){if(w=$world.getMorphWithId(r))if(w.__lookupSetter__("cwd"))w.cwd=
q;else if("function"===typeof w.changeWorkingDirectory)w.changeWorkingDirectory(q);else if("function"===typeof w.pluginFind){if(x=w.pluginFind(function(D){return D.isShellEditorPlugin}))x.cwd=q}else t="[changeWorkingDirectory] cannot figure pout how to set dir"}else t="[changeWorkingDirectory] No command morph";else t="[changeWorkingDirectory] No directory received"}catch(D){t=String(D)}"OK"!==t&&console.warn(t);"function"===typeof g&&g(t);case 6:case "end":return B.stop()}},f)}))()}};Wu.defaultClientActions=
CH;Wu.defaultClientActions=CH;var y3={},z3=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,A3="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),fD=y3=function(b){var c=b,g=b.indexOf("["),a=b.indexOf("]");-1!=g&&-1!=a&&(b=b.substring(0,g)+b.substring(g,
a).replace(/:/g,";")+b.substring(a,b.length));var d=z3.exec(b||"");b={};for(var f=14;f--;)b[A3[f]]=d[f]||"";-1!=g&&-1!=a&&(b.source=c,b.host=b.host.substring(1,b.host.length-1).replace(/;/g,":"),b.authority=b.authority.replace("[","").replace("]","").replace(/;/g,":"),b.ipv6uri=!0);c=b.path;g=c.replace(/\/{2,9}/g,"/").split("/");"/"!=c.substr(0,1)&&0!==c.length||g.splice(0,1);"/"==c.substr(c.length-1,1)&&g.splice(g.length-1,1);b.pathNames=g;b.queryKey=nX(b,b.query);return b},DH={};try{DH="undefined"!==
typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(b){DH=!1}var oX=DH,xj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;gk.prototype.on=gk.prototype.addEventListener=function(b,c){(this||xj)._callbacks=(this||xj)._callbacks||{};((this||xj)._callbacks["$"+b]=(this||xj)._callbacks["$"+b]||[]).push(c);return this||xj};gk.prototype.once=function(b,c){function g(){this.off(b,g);c.apply(this||xj,arguments)}g.fn=c;this.on(b,g);return this||xj};gk.prototype.off=
gk.prototype.removeListener=gk.prototype.removeAllListeners=gk.prototype.removeEventListener=function(b,c){(this||xj)._callbacks=(this||xj)._callbacks||{};if(0==arguments.length)return(this||xj)._callbacks={},this||xj;var g=(this||xj)._callbacks["$"+b];if(!g)return this||xj;if(1==arguments.length)return delete (this||xj)._callbacks["$"+b],this||xj;for(var a,d=0;d<g.length;d++)if(a=g[d],a===c||a.fn===c){g.splice(d,1);break}0===g.length&&delete (this||xj)._callbacks["$"+b];return this||xj};gk.prototype.emit=
function(b){(this||xj)._callbacks=(this||xj)._callbacks||{};for(var c=Array(arguments.length-1),g=(this||xj)._callbacks["$"+b],a=1;a<arguments.length;a++)c[a-1]=arguments[a];if(g){g=g.slice(0);a=0;for(var d=g.length;a<d;++a)g[a].apply(this||xj,c)}return this||xj};gk.prototype.emitReserved=gk.prototype.emit;gk.prototype.listeners=function(b){(this||xj)._callbacks=(this||xj)._callbacks||{};return(this||xj)._callbacks["$"+b]||[]};gk.prototype.hasListeners=function(b){return!!this.listeners(b).length};
const wo=Object.create(null);wo.open="0";wo.close="1";wo.ping="2";wo.pong="3";wo.message="4";wo.upgrade="5";wo.noop="6";const $A=Object.create(null);Object.keys(wo).forEach(b=>{$A[wo[b]]=b});const B3={type:"error",data:"parser error"},C3="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),D3="function"===typeof ArrayBuffer,uT=({type:b,data:c},g,a)=>{if(C3&&c instanceof Blob)return g?a(c):tT(c,a);var d;if(d=D3)(d=c instanceof ArrayBuffer)||
(d="function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(c):c&&c.buffer instanceof ArrayBuffer);return d?g?a(c):tT(new Blob([c]),a):a(wo[b]+(c||""))},tT=(b,c)=>{const g=new FileReader;g.onload=function(){const a=g.result.split(",")[1];c("b"+a)};return g.readAsDataURL(b)},Ix="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let b=0;64>b;b++)Ix["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(b)]=b;const E3="function"===typeof ArrayBuffer,wT=(b,c)=>{if("string"!==
typeof b)return{type:"message",data:vT(b,c)};var g=b.charAt(0);if("b"===g){b=b.substring(1);if(E3){{var a=.75*b.length;g=b.length;let d=0,f,k,n,p;"="===b[b.length-1]&&(a--,"="===b[b.length-2]&&a--);const q=new ArrayBuffer(a),r=new Uint8Array(q);for(a=0;a<g;a+=4)f=Ix[b.charCodeAt(a)],k=Ix[b.charCodeAt(a+1)],n=Ix[b.charCodeAt(a+2)],p=Ix[b.charCodeAt(a+3)],r[d++]=f<<2|k>>4,r[d++]=(k&15)<<4|n>>2,r[d++]=(n&3)<<6|p&63;b=q}c=vT(b,c)}else c={base64:!0,data:b};return{type:"message",data:c}}return $A[g]?1<
b.length?{type:$A[g],data:b.substring(1)}:{type:$A[g]}:B3},vT=(b,c)=>{switch(c){case "blob":return b instanceof ArrayBuffer?new Blob([b]):b;default:return b}},xT=String.fromCharCode(30),F3=(b,c)=>{const g=b.length,a=Array(g);let d=0;b.forEach((f,k)=>{uT(f,!1,n=>{a[k]=n;++d===g&&c(a.join(xT))})})},G3=(b,c)=>{b=b.split(xT);const g=[];for(let a=0;a<b.length;a++){const d=wT(b[a],c);g.push(d);if("error"===d.type)break}return g};for(var H3={},lL="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),
yT={},nL=0,Bq=0,mL;64>Bq;Bq++)yT[lL[Bq]]=Bq;bD.encode=aD;bD.decode=function(b){var c=0;for(Bq=0;Bq<b.length;Bq++)c=64*c+yT[b.charAt(Bq)];return c};var zT=H3=bD,Jx={encode:function(b){var c="",g;for(g in b)b.hasOwnProperty(g)&&(c.length&&(c+="&"),c+=encodeURIComponent(g)+"="+encodeURIComponent(b[g]));return c},decode:function(b){var c={};b=b.split("&");for(var g=0,a=b.length;g<a;g++){var d=b[g].split("=");c[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return c}};Jx.encode;Jx.decode;var $p="undefined"!==
typeof self?self:"undefined"!==typeof window?window:Function("return this")();const pX=setTimeout,qX=clearTimeout;class AT extends gk{constructor(b){super();this.writable=!1;hz(this,b);this.opts=b;this.query=b.query;this.readyState="";this.socket=b.socket}onError(b,c){b=Error(b);b.type="TransportError";b.description=c;super.emit("error",b);return this}open(){if("closed"===this.readyState||""===this.readyState)this.readyState="opening",this.doOpen();return this}close(){if("opening"===this.readyState||
"open"===this.readyState)this.doClose(),this.onClose();return this}send(b){"open"===this.readyState&&this.write(b)}onOpen(){this.readyState="open";this.writable=!0;super.emit("open")}onData(b){b=wT(b,this.socket.binaryType);this.onPacket(b)}onPacket(b){super.emit("packet",b)}onClose(){this.readyState="closed";super.emit("close")}}class I3 extends AT{constructor(){super(...arguments);this.polling=!1}get name(){return"polling"}doOpen(){this.poll()}pause(b){this.readyState="pausing";const c=()=>{this.readyState=
"paused";b()};if(this.polling||!this.writable){let g=0;this.polling&&(g++,this.once("pollComplete",function(){--g||c()}));this.writable||(g++,this.once("drain",function(){--g||c()}))}else c()}poll(){this.polling=!0;this.doPoll();this.emit("poll")}onData(b){G3(b,this.socket.binaryType).forEach(c=>{if("opening"===this.readyState&&"open"===c.type)this.onOpen();if("close"===c.type)return this.onClose(),!1;this.onPacket(c)});"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===
this.readyState&&this.poll())}doClose(){const b=()=>{this.write([{type:"close"}])};if("open"===this.readyState)b();else this.once("open",b)}write(b){this.writable=!1;F3(b,c=>{this.doWrite(c,()=>{this.writable=!0;this.emit("drain")})})}uri(){var b=this.query||{};const c=this.opts.secure?"https":"http";let g="";!1!==this.opts.timestampRequests&&(b[this.opts.timestampParam]=zT());this.supportsBinary||b.sid||(b.b64=1);this.opts.port&&("https"===c&&443!==Number(this.opts.port)||"http"===c&&80!==Number(this.opts.port))&&
(g=":"+this.opts.port);b=Jx.encode(b);const a=-1!==this.opts.hostname.indexOf(":");return c+"://"+(a?"["+this.opts.hostname+"]":this.opts.hostname)+g+this.opts.path+(b.length?"?"+b:"")}}const J3=null!=(new oL({xdomain:!1})).responseType;class K3 extends I3{constructor(b){super(b);if("undefined"!==typeof location){const c="https:"===location.protocol;let g=location.port;g||(g=c?"443":"80");this.xd="undefined"!==typeof location&&b.hostname!==location.hostname||g!==b.port;this.xs=b.secure!==c}b=b&&b.forceBase64;
this.supportsBinary=J3&&!b}request(b={}){Object.assign(b,{xd:this.xd,xs:this.xs},this.opts);return new bp(this.uri(),b)}doWrite(b,c){b=this.request({method:"POST",data:b});b.on("success",c);b.on("error",g=>{this.onError("xhr post error",g)})}doPoll(){const b=this.request();b.on("data",this.onData.bind(this));b.on("error",c=>{this.onError("xhr poll error",c)});this.pollXhr=b}}class bp extends gk{constructor(b,c){super();hz(this,c);this.opts=c;this.method=c.method||"GET";this.uri=b;this.async=!1!==
c.async;this.data=void 0!==c.data?c.data:null;this.create()}create(){const b=pL(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");b.xdomain=!!this.opts.xd;b.xscheme=!!this.opts.xs;const c=this.xhr=new oL(b);try{c.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){c.setDisableHeaderCheck&&c.setDisableHeaderCheck(!0);for(let g in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(g)&&c.setRequestHeader(g,this.opts.extraHeaders[g])}}catch(g){}if("POST"===
this.method)try{c.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(g){}try{c.setRequestHeader("Accept","*/*")}catch(g){}"withCredentials"in c&&(c.withCredentials=this.opts.withCredentials);this.opts.requestTimeout&&(c.timeout=this.opts.requestTimeout);c.onreadystatechange=()=>{if(4===c.readyState)if(200===c.status||1223===c.status)this.onLoad();else this.setTimeoutFn(()=>{this.onError("number"===typeof c.status?c.status:0)},0)};c.send(this.data)}catch(g){this.setTimeoutFn(()=>{this.onError(g)},
0);return}"undefined"!==typeof document&&(this.index=bp.requestsCount++,bp.requests[this.index]=this)}onSuccess(){this.emit("success");this.cleanup()}onData(b){this.emit("data",b);this.onSuccess()}onError(b){this.emit("error",b);this.cleanup(!0)}cleanup(b){if("undefined"!==typeof this.xhr&&null!==this.xhr){this.xhr.onreadystatechange=rX;if(b)try{this.xhr.abort()}catch(c){}"undefined"!==typeof document&&delete bp.requests[this.index];this.xhr=null}}onLoad(){const b=this.xhr.responseText;if(null!==
b)this.onData(b)}abort(){this.cleanup()}}bp.requestsCount=0;bp.requests={};"undefined"!==typeof document&&("function"===typeof attachEvent?attachEvent("onunload",qL):"function"===typeof addEventListener&&addEventListener("onpagehide"in $p?"pagehide":"unload",qL,!1));const L3=(()=>"function"===typeof Promise&&"function"===typeof Promise.resolve?b=>Promise.resolve().then(b):(b,c)=>c(b,0))(),Kx=$p.WebSocket||$p.MozWebSocket,BT="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===
navigator.product.toLowerCase();class CT extends AT{constructor(b){super(b);this.supportsBinary=!b.forceBase64}get name(){return"websocket"}doOpen(){if(this.check()){var b=this.uri(),c=this.opts.protocols,g=BT?{}:pL(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(g.headers=this.opts.extraHeaders);try{this.ws=BT?new Kx(b,c,g):c?new Kx(b,
c):new Kx(b)}catch(a){return this.emit("error",a)}this.ws.binaryType=this.socket.binaryType||"arraybuffer";this.addEventListeners()}}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref();this.onOpen()};this.ws.onclose=this.onClose.bind(this);this.ws.onmessage=b=>this.onData(b.data);this.ws.onerror=b=>this.onError("websocket error",b)}write(b){this.writable=!1;for(let c=0;c<b.length;c++){const g=c===b.length-1;uT(b[c],this.supportsBinary,a=>{try{this.ws.send(a)}catch(d){}g&&
L3(()=>{this.writable=!0;this.emit("drain")},this.setTimeoutFn)})}}doClose(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}uri(){var b=this.query||{};const c=this.opts.secure?"wss":"ws";let g="";this.opts.port&&("wss"===c&&443!==Number(this.opts.port)||"ws"===c&&80!==Number(this.opts.port))&&(g=":"+this.opts.port);this.opts.timestampRequests&&(b[this.opts.timestampParam]=zT());this.supportsBinary||(b.b64=1);b=Jx.encode(b);const a=-1!==this.opts.hostname.indexOf(":");return c+"://"+
(a?"["+this.opts.hostname+"]":this.opts.hostname)+g+this.opts.path+(b.length?"?"+b:"")}check(){return!!Kx&&!("__initialize"in Kx&&this.name===CT.prototype.name)}}const M3={websocket:CT,polling:K3};class Cq extends gk{constructor(b,c={}){super();b&&"object"===typeof b&&(c=b,b=null);b?(b=fD(b),c.hostname=b.host,c.secure="https"===b.protocol||"wss"===b.protocol,c.port=b.port,b.query&&(c.query=b.query)):c.host&&(c.hostname=fD(c.host).host);hz(this,c);this.secure=null!=c.secure?c.secure:"undefined"!==
typeof location&&"https:"===location.protocol;c.hostname&&!c.port&&(c.port=this.secure?"443":"80");this.hostname=c.hostname||("undefined"!==typeof location?location.hostname:"localhost");this.port=c.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80");this.transports=c.transports||["polling","websocket"];this.readyState="";this.writeBuffer=[];this.prevBufferLen=0;this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",
rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},c);this.opts.path=this.opts.path.replace(/\/$/,"")+"/";"string"===typeof this.opts.query&&(this.opts.query=Jx.decode(this.opts.query));this.pingTimeoutTimer=this.pingTimeout=this.pingInterval=this.upgrades=this.id=null;"function"===typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},
!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1)));this.open()}createTransport(b){{var c=this.opts.query;const g={};for(let a in c)c.hasOwnProperty(a)&&(g[a]=c[a]);c=g}c.EIO=4;c.transport=b;this.id&&(c.sid=this.id);c=Object.assign({},this.opts.transportOptions[b],this.opts,{query:c,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new M3[b](c)}open(){let b;if(this.opts.rememberUpgrade&&
Cq.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))b="websocket";else{if(0===this.transports.length){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}b=this.transports[0]}this.readyState="opening";try{b=this.createTransport(b)}catch(c){this.transports.shift();this.open();return}b.open();this.setTransport(b)}setTransport(b){this.transport&&this.transport.removeAllListeners();this.transport=b;b.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",
this.onError.bind(this)).on("close",()=>{this.onClose("transport close")})}probe(b){function c(){k||(k=!0,q(),f.close(),f=null)}function g(){p("transport closed")}function a(){p("socket closed")}function d(r){f&&r.name!==f.name&&c()}let f=this.createTransport(b),k=!1;Cq.priorWebsocketSuccess=!1;const n=()=>{k||(f.send([{type:"ping",data:"probe"}]),f.once("packet",r=>{k||("pong"===r.type&&"probe"===r.data?(this.upgrading=!0,this.emitReserved("upgrading",f),f&&(Cq.priorWebsocketSuccess="websocket"===
f.name,this.transport.pause(()=>{k||"closed"===this.readyState||(q(),this.setTransport(f),f.send([{type:"upgrade"}]),this.emitReserved("upgrade",f),f=null,this.upgrading=!1,this.flush())}))):(r=Error("probe error"),r.transport=f.name,this.emitReserved("upgradeError",r)))}))},p=r=>{r=Error("probe error: "+r);r.transport=f.name;c();this.emitReserved("upgradeError",r)},q=()=>{f.removeListener("open",n);f.removeListener("error",p);f.removeListener("close",g);this.off("close",a);this.off("upgrading",d)};
f.once("open",n);f.once("error",p);f.once("close",g);this.once("close",a);this.once("upgrading",d);f.open()}onOpen(){this.readyState="open";Cq.priorWebsocketSuccess="websocket"===this.transport.name;this.emitReserved("open");this.flush();if("open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let b=0;const c=this.upgrades.length;for(;b<c;b++)this.probe(this.upgrades[b])}}onPacket(b){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",
b),this.emitReserved("heartbeat"),b.type){case "open":this.onHandshake(JSON.parse(b.data));break;case "ping":this.resetPingTimeout();this.sendPacket("pong");this.emitReserved("ping");this.emitReserved("pong");break;case "error":const c=Error("server error");c.code=b.data;this.onError(c);break;case "message":this.emitReserved("data",b.data),this.emitReserved("message",b.data)}}onHandshake(b){this.emitReserved("handshake",b);this.id=b.sid;this.transport.query.sid=b.sid;this.upgrades=this.filterUpgrades(b.upgrades);
this.pingInterval=b.pingInterval;this.pingTimeout=b.pingTimeout;this.onOpen();"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer);this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout);this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){"closed"!==
this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}write(b,c,g){this.sendPacket("message",b,c,g);return this}send(b,c,g){this.sendPacket("message",b,c,g);return this}sendPacket(b,c,g,a){"function"===typeof c&&(a=c,c=void 0);"function"===typeof g&&(a=g,g=null);if("closing"!==this.readyState&&"closed"!==this.readyState){g=g||{};g.compress=!1!==g.compress;b={type:b,
data:c,options:g};this.emitReserved("packetCreate",b);this.writeBuffer.push(b);if(a)this.once("flush",a);this.flush()}}close(){const b=()=>{this.onClose("forced close");this.transport.close()},c=()=>{this.off("upgrade",c);this.off("upgradeError",c);b()},g=()=>{this.once("upgrade",c);this.once("upgradeError",c)};if("opening"===this.readyState||"open"===this.readyState)if(this.readyState="closing",this.writeBuffer.length)this.once("drain",()=>{this.upgrading?g():b()});else this.upgrading?g():b();return this}onError(b){Cq.priorWebsocketSuccess=
!1;this.emitReserved("error",b);this.onClose("transport error",b)}onClose(b,c){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",b,c),this.writeBuffer=[],this.prevBufferLen=
0}filterUpgrades(b){const c=[];let g=0;const a=b.length;for(;g<a;g++)~this.transports.indexOf(b[g])&&c.push(b[g]);return c}}Cq.protocol=4;Cq.protocol;const sX="function"===typeof ArrayBuffer,DT=Object.prototype.toString,tX="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===DT.call(Blob),uX="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===DT.call(File);var Bi;(function(b){b[b.CONNECT=0]="CONNECT";b[b.DISCONNECT=1]="DISCONNECT";b[b.EVENT=
2]="EVENT";b[b.ACK=3]="ACK";b[b.CONNECT_ERROR=4]="CONNECT_ERROR";b[b.BINARY_EVENT=5]="BINARY_EVENT";b[b.BINARY_ACK=6]="BINARY_ACK"})(Bi||(Bi={}));class N3{encode(b){return b.type!==Bi.EVENT&&b.type!==Bi.ACK||!iz(b)?[this.encodeAsString(b)]:(b.type=b.type===Bi.EVENT?Bi.BINARY_EVENT:Bi.BINARY_ACK,this.encodeAsBinary(b))}encodeAsString(b){let c=""+b.type;if(b.type===Bi.BINARY_EVENT||b.type===Bi.BINARY_ACK)c+=b.attachments+"-";b.nsp&&"/"!==b.nsp&&(c+=b.nsp+",");null!=b.id&&(c+=b.id);null!=b.data&&(c+=
JSON.stringify(b.data));return c}encodeAsBinary(b){var c=[];b.data=dD(b.data,c);b.attachments=c.length;b=this.encodeAsString(b);c.unshift(b);return c}}class ET extends gk{constructor(){super()}add(b){if("string"===typeof b)b=this.decodeString(b),b.type===Bi.BINARY_EVENT||b.type===Bi.BINARY_ACK?(this.reconstructor=new O3(b),0===b.attachments&&super.emitReserved("decoded",b)):super.emitReserved("decoded",b);else if(cD(b)||b.base64)if(this.reconstructor){if(b=this.reconstructor.takeBinaryData(b))this.reconstructor=
null,super.emitReserved("decoded",b)}else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+b);}decodeString(b){let c=0;const g={type:Number(b.charAt(0))};if(void 0===Bi[g.type])throw Error("unknown packet type "+g.type);if(g.type===Bi.BINARY_EVENT||g.type===Bi.BINARY_ACK){for(var a=c+1;"-"!==b.charAt(++c)&&c!=b.length;);a=b.substring(a,c);if(a!=Number(a)||"-"!==b.charAt(c))throw Error("Illegal attachments");g.attachments=Number(a)}if("/"===b.charAt(c+
1)){for(a=c+1;++c&&","!==b.charAt(c)&&c!==b.length;);g.nsp=b.substring(a,c)}else g.nsp="/";a=b.charAt(c+1);if(""!==a&&Number(a)==a){for(a=c+1;++c;){const f=b.charAt(c);if(null==f||Number(f)!=f){--c;break}if(c===b.length)break}g.id=Number(b.substring(a,c+1))}if(b.charAt(++c)){b=b.substr(c);try{var d=JSON.parse(b)}catch(f){d=!1}if(ET.isPayloadValid(g.type,d))g.data=d;else throw Error("invalid payload");}return g}static isPayloadValid(b,c){switch(b){case Bi.CONNECT:return"object"===typeof c;case Bi.DISCONNECT:return void 0===
c;case Bi.CONNECT_ERROR:return"string"===typeof c||"object"===typeof c;case Bi.EVENT:case Bi.BINARY_EVENT:return Array.isArray(c)&&0<c.length;case Bi.ACK:case Bi.BINARY_ACK:return Array.isArray(c)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class O3{constructor(b){this.packet=b;this.buffers=[];this.reconPack=b}takeBinaryData(b){this.buffers.push(b);return this.buffers.length===this.reconPack.attachments?(b=this.reconPack,b.data=eD(b.data,this.buffers),b.attachments=
void 0,this.finishedReconstruction(),b):null}finishedReconstruction(){this.reconPack=null;this.buffers=[]}}var P3=Object.freeze({__proto__:null,Decoder:ET,Encoder:N3,get PacketType(){return Bi},protocol:5}),tl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,FT={};FT=St;St.prototype.duration=function(){var b=(this||tl).ms*Math.pow((this||tl).factor,(this||tl).attempts++);if((this||tl).jitter){var c=Math.random(),g=Math.floor(c*(this||tl).jitter*b);b=0==(Math.floor(10*
c)&1)?b-g:b+g}return Math.min(b,(this||tl).max)|0};St.prototype.reset=function(){(this||tl).attempts=0};St.prototype.setMin=function(b){(this||tl).ms=b};St.prototype.setMax=function(b){(this||tl).max=b};St.prototype.setJitter=function(b){(this||tl).jitter=b};var Q3=FT;const R3=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class GT extends gk{constructor(b,c,g){super();this.connected=!1;this.disconnected=!0;this.receiveBuffer=[];this.sendBuffer=
[];this.ids=0;this.acks={};this.flags={};this.io=b;this.nsp=c;g&&g.auth&&(this.auth=g.auth);this.io._autoConnect&&this.open()}subEvents(){if(!this.subs){var b=this.io;this.subs=[jn(b,"open",this.onopen.bind(this)),jn(b,"packet",this.onpacket.bind(this)),jn(b,"error",this.onerror.bind(this)),jn(b,"close",this.onclose.bind(this))]}}get active(){return!!this.subs}connect(){if(this.connected)return this;this.subEvents();this.io._reconnecting||this.io.open();if("open"===this.io._readyState)this.onopen();
return this}open(){return this.connect()}send(...b){b.unshift("message");this.emit.apply(this,b);return this}emit(b,...c){if(R3.hasOwnProperty(b))throw Error('"'+b+'" is a reserved event name');c.unshift(b);b={type:Bi.EVENT,data:c,options:{}};b.options.compress=!1!==this.flags.compress;if("function"===typeof c[c.length-1]){const g=this.ids++;c=c.pop();this._registerAckCallback(g,c);b.id=g}c=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;if(!this.flags.volatile||c&&this.connected)this.connected?
this.packet(b):this.sendBuffer.push(b);this.flags={};return this}_registerAckCallback(b,c){const g=this.flags.timeout;if(void 0===g)this.acks[b]=c;else{var a=this.io.setTimeoutFn(()=>{delete this.acks[b];for(let d=0;d<this.sendBuffer.length;d++)this.sendBuffer[d].id===b&&this.sendBuffer.splice(d,1);c.call(this,Error("operation has timed out"))},g);this.acks[b]=(...d)=>{this.io.clearTimeoutFn(a);c.apply(this,[null,...d])}}}packet(b){b.nsp=this.nsp;this.io._packet(b)}onopen(){"function"==typeof this.auth?
this.auth(b=>{this.packet({type:Bi.CONNECT,data:b})}):this.packet({type:Bi.CONNECT,data:this.auth})}onerror(b){this.connected||this.emitReserved("connect_error",b)}onclose(b){this.connected=!1;this.disconnected=!0;delete this.id;this.emitReserved("disconnect",b)}onpacket(b){if(b.nsp===this.nsp)switch(b.type){case Bi.CONNECT:if(b.data&&b.data.sid)this.onconnect(b.data.sid);else this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));
break;case Bi.EVENT:this.onevent(b);break;case Bi.BINARY_EVENT:this.onevent(b);break;case Bi.ACK:this.onack(b);break;case Bi.BINARY_ACK:this.onack(b);break;case Bi.DISCONNECT:this.ondisconnect();break;case Bi.CONNECT_ERROR:this.destroy();const c=Error(b.data.message);c.data=b.data.data;this.emitReserved("connect_error",c)}}onevent(b){const c=b.data||[];null!=b.id&&c.push(this.ack(b.id));this.connected?this.emitEvent(c):this.receiveBuffer.push(Object.freeze(c))}emitEvent(b){if(this._anyListeners&&
this._anyListeners.length){const c=this._anyListeners.slice();for(const g of c)g.apply(this,b)}super.emit.apply(this,b)}ack(b){const c=this;let g=!1;return function(...a){g||(g=!0,c.packet({type:Bi.ACK,id:b,data:a}))}}onack(b){const c=this.acks[b.id];"function"===typeof c&&(c.apply(this,b.data),delete this.acks[b.id])}onconnect(b){this.id=b;this.connected=!0;this.disconnected=!1;this.emitBuffered();this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(b=>this.emitEvent(b));this.receiveBuffer=
[];this.sendBuffer.forEach(b=>this.packet(b));this.sendBuffer=[]}ondisconnect(){this.destroy();this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(b=>b()),this.subs=void 0);this.io._destroy(this)}disconnect(){this.connected&&this.packet({type:Bi.DISCONNECT});this.destroy();if(this.connected)this.onclose("io client disconnect");return this}close(){return this.disconnect()}compress(b){this.flags.compress=b;return this}get volatile(){this.flags.volatile=!0;return this}timeout(b){this.flags.timeout=
b;return this}onAny(b){this._anyListeners=this._anyListeners||[];this._anyListeners.push(b);return this}prependAny(b){this._anyListeners=this._anyListeners||[];this._anyListeners.unshift(b);return this}offAny(b){if(!this._anyListeners)return this;if(b){const c=this._anyListeners;for(let g=0;g<c.length;g++)if(b===c[g]){c.splice(g,1);break}}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}class gD extends gk{constructor(b,c){var g;super();this.nsps={};this.subs=[];
b&&"object"===typeof b&&(c=b,b=void 0);c=c||{};c.path=c.path||"/socket.io";this.opts=c;hz(this,c);this.reconnection(!1!==c.reconnection);this.reconnectionAttempts(c.reconnectionAttempts||Infinity);this.reconnectionDelay(c.reconnectionDelay||1E3);this.reconnectionDelayMax(c.reconnectionDelayMax||5E3);this.randomizationFactor(null!==(g=c.randomizationFactor)&&void 0!==g?g:.5);this.backoff=new Q3({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==
c.timeout?2E4:c.timeout);this._readyState="closed";this.uri=b;b=c.parser||P3;this.encoder=new b.Encoder;this.decoder=new b.Decoder;(this._autoConnect=!1!==c.autoConnect)&&this.open()}reconnection(b){if(!arguments.length)return this._reconnection;this._reconnection=!!b;return this}reconnectionAttempts(b){if(void 0===b)return this._reconnectionAttempts;this._reconnectionAttempts=b;return this}reconnectionDelay(b){var c;if(void 0===b)return this._reconnectionDelay;this._reconnectionDelay=b;null===(c=
this.backoff)||void 0===c?void 0:c.setMin(b);return this}randomizationFactor(b){var c;if(void 0===b)return this._randomizationFactor;this._randomizationFactor=b;null===(c=this.backoff)||void 0===c?void 0:c.setJitter(b);return this}reconnectionDelayMax(b){var c;if(void 0===b)return this._reconnectionDelayMax;this._reconnectionDelayMax=b;null===(c=this.backoff)||void 0===c?void 0:c.setMax(b);return this}timeout(b){if(!arguments.length)return this._timeout;this._timeout=b;return this}maybeReconnectOnOpen(){!this._reconnecting&&
this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(b){if(~this._readyState.indexOf("open"))return this;const c=this.engine=new Cq(this.uri,this.opts),g=this;this._readyState="opening";this.skipReconnect=!1;const a=jn(c,"open",function(){g.onopen();b&&b()}),d=jn(c,"error",f=>{g.cleanup();g._readyState="closed";this.emitReserved("error",f);b?b(f):g.maybeReconnectOnOpen()});if(!1!==this._timeout){const f=this._timeout;0===f&&a();const k=this.setTimeoutFn(()=>{a();c.close();c.emit("error",
Error("timeout"))},f);this.opts.autoUnref&&k.unref();this.subs.push(function(){clearTimeout(k)})}this.subs.push(a);this.subs.push(d);return this}connect(b){return this.open(b)}onopen(){this.cleanup();this._readyState="open";this.emitReserved("open");const b=this.engine;this.subs.push(jn(b,"ping",this.onping.bind(this)),jn(b,"data",this.ondata.bind(this)),jn(b,"error",this.onerror.bind(this)),jn(b,"close",this.onclose.bind(this)),jn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(b){this.decoder.add(b)}ondecoded(b){this.emitReserved("packet",
b)}onerror(b){this.emitReserved("error",b)}socket(b,c){let g=this.nsps[b];g||(g=new GT(this,b,c),this.nsps[b]=g);return g}_destroy(b){b=Object.keys(this.nsps);for(const c of b)if(this.nsps[c].active)return;this._close()}_packet(b){const c=this.encoder.encode(b);for(let g=0;g<c.length;g++)this.engine.write(c[g],b.options)}cleanup(){this.subs.forEach(b=>b());this.subs.length=0;this.decoder.destroy()}_close(){this.skipReconnect=!0;this._reconnecting=!1;this.onclose("forced close");this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(b){this.cleanup();
this.backoff.reset();this._readyState="closed";this.emitReserved("close",b);this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const b=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const c=this.backoff.duration();this._reconnecting=!0;const g=this.setTimeoutFn(()=>{b.skipReconnect||(this.emitReserved("reconnect_attempt",b.backoff.attempts),
b.skipReconnect||b.open(a=>{if(a)b._reconnecting=!1,b.reconnect(),this.emitReserved("reconnect_error",a);else b.onreconnect()}))},c);this.opts.autoUnref&&g.unref();this.subs.push(function(){clearTimeout(g)})}}onreconnect(){const b=this.backoff.attempts;this._reconnecting=!1;this.backoff.reset();this.emitReserved("reconnect",b)}}const gw={};Object.assign(jz,{Manager:gD,Socket:GT,io:jz,connect:jz});var qh=window.lively.FreezerRuntime.recorderFor("lively.2lively/client.js");qh.determineLocation=function(){return"undefined"!==
typeof document&&document.location?System.baseURL||document.location.origin:qh.isNode?System._nodeRequire("os").hostname():System.baseURL};qh.promise=ai;qh.fun=wn;qh.obj=nh;qh.events=ns;qh.num=Yk;qh.L2LConnection=AH;qh.defaultActions=BH;qh.defaultClientActions=CH;qh.isNode="undefined"!==typeof System?System.get("@system-env").node:"undefined"!==typeof process&&process.env;qh._ioClient=jz;qh.resource=Sk;qh.ioClient=qh.ioClient||void 0;qh.isNode?(qh.require=System._nodeRequire("module")._load,qh.ioClient=
qh.require("socket.io-client")):qh.ioClient=qh._ioClient;qh.urlHelper={isRoot:function(b){return"/"===qh.urlHelper.path(b)},root:function(b){return qh.urlHelper.isRoot(b)?b:b.slice(0,-qh.urlHelper.path(b).length)+"/"},path:function(){var b=/^[a-z0-9-_\.]+:/,c=/^\/\/[^\/]+/;return function(g){g=g.replace(b,"").replace(c,"");return""===g?"/":g}}(),join:function(b,c){b.endsWith("/")&&(b=b.slice(0,-1));c.startsWith("/")&&(c=c.slice(1));return b+"/"+c}};var aB=Lc("c0",function(b){function c(a,d,f,k){rd(this,
c);var n=g.call(this);qh.events.makeEmitter(vd(n));n.info=k;n.origin=a;n.path=d;n.namespace=f.replace(/^\/?/,"/");n.trackerId=null;n._socketioClient=null;n._reconnectState={closed:!1,autoReconnect:!0,isReconnecting:!1,isReconnectingViaSocketio:!1,registerAttempt:0,registerProcess:null,isOpening:!1};Object.keys(qh.defaultActions).forEach(function(p){return n.addService(p,qh.defaultActions[p])});Object.keys(qh.defaultClientActions).forEach(function(p){return n.addService(p,qh.defaultClientActions[p])});
return n}gd(c,b);var g=sb(c);Ac(c,null,[{key:"clientKey",value:function(a,d,f){a=a.replace(/\/$/,"");d=d.replace(/^\//,"");f=f.replace(/^\//,"");return"".concat(a,"-").concat(d,"-").concat(f)}},{key:"forLivelyInBrowser",value:function(a){var d=!!a;a=Object.assign({type:"lively.morphic browser"},a);var f=this["default"]();if(!f)return qh.L2LClient.ensure({url:qh.resource(qh.determineLocation()).join("/lively-socket.io").url,namespace:"l2l",info:a});d&&!qh.obj.equals(f.info,a)&&f.isRegistered()&&(f.info=
a,f.unregister().then(function(){return f.register()})["catch"](function(k){return console.error("l2l re-register on info change errored: "+k)}));return f}},{key:"default",value:function(){var a=qh.L2LClient.clients.keys().next().value;return qh.L2LClient.clients.get(a)}},{key:"create",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=a.debug;d=void 0===d?!1:d;var f=a.url,k=a.namespace,n=a.autoOpen;n=void 0===n?!0:n;a=a.info;a=void 0===a?{}:a;if(!f)throw Error("L2LClient needs server url!");
var p=qh.urlHelper.root(f).replace(/\/+$/,"");f=qh.urlHelper.path(f);k=new this(p,f,k||"",a);n&&k.register();k.debug=d;return k}},{key:"ensure",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=a.url,f=a.namespace;if(!d)throw Error("L2LClient needs server url!");var k=qh.urlHelper.root(d).replace(/\/+$/,""),n=qh.urlHelper.path(d);k=this.clientKey(k,n,f||"");(n=this.clients.get(k))||this.clients.set(k,n=this.create(Object.assign({},a,{url:d,namespace:f})));return n}},
{key:"clients",get:function(){return this._clients||(this._clients=new Map)}}]);Ac(c,[{key:"isOnline",value:function(){return this.socket&&this.socket.connected}},{key:"isRegistered",value:function(){return this.isOnline()&&!!this.trackerId}},{key:"open",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k=this,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.isOnline()){r.next=2;break}return r.abrupt("return",this);case 2:if(!this._reconnectState.isOpening){r.next=
4;break}return r.abrupt("return",this);case 4:return r.next=6,this.close();case 6:return this._reconnectState.closed=!1,n=qh.urlHelper.join(this.origin,this.namespace),p={path:this.path,transports:["websocket","polling"]},q=this._socketioClient=qh.ioClient(n,p),this.debug&&console.log("[".concat(this,"] connecting")),q.on("error",function(t){k._reconnectState.isOpening=!1;k.debug&&console.log("[".concat(k,"] errored: ").concat(t))}),q.on("close",function(t){return k.debug&&console.log("[".concat(k,
"] closed: ").concat(t))}),q.on("reconnect_failed",function(){return k.debug&&console.log("[".concat(k,"] could not reconnect"))}),q.on("reconnect_error",function(t){return k.debug&&console.log("[".concat(k,"] reconnect error ").concat(t))}),q.on("connect",function(){k.debug&&console.log("[".concat(k,"] connected"));k.emit("connected",k);k._reconnectState.isOpening=!1;k._reconnectState.isReconnecting=!1;k._reconnectState.isReconnectingViaSocketio=!1}),q.on("disconnect",function(){k._reconnectState.isOpening=
!1;k.debug&&console.log("[".concat(k,"] disconnected"));k.emit("disconnected",k);k.trackerId?("tracker"!==k.trackerId&&(k.renameTarget(k.trackerId,"tracker"),k.trackerId=null),k._reconnectState.closed?k.debug&&console.log("[".concat(k,"] won't reconnect b/c client is marked as closed")):k._reconnectState.autoReconnect?(k._reconnectState.isReconnecting=!0,setTimeout(function(){k._reconnectState.closed?k.debug&&console.log("[".concat(k,"] won't reconnect b/c client is marked as closed 2")):k._reconnectState.isReconnectingViaSocketio?
k.debug&&console.log("[".concat(k,"] won't reconnect again, client already reconnecting")):(k.debug&&console.log("[".concat(k,"] initiating reconnection to tracker")),k.register())},20)):k.debug&&console.log("[".concat(k,"] won't reconnect b/c client has reconnection disabled"))):(k.debug&&console.log("[".concat(k,"] disconnect: don't have a tracker id, won't try reconnect")),k.trackerId="tracker")}),q.on("reconnecting",function(){k.debug&&console.log("[".concat(k,"] reconnecting"),k._reconnectState);
k.emit("reconnecting",k);k._reconnectState.closed?(k._reconnectState.isReconnecting=!1,k._reconnectState.isReconnectingViaSocketio=!1,q.close(),k.close()):(k._reconnectState.isReconnecting=!0,k._reconnectState.isReconnectingViaSocketio=!0)}),q.on("reconnect",function(){k.debug&&console.log("[".concat(k,"] reconnected"));k._reconnectState.isReconnecting=!1;k._reconnectState.isReconnectingViaSocketio=!1;k.register();if(k.onReconnect&&"function"===typeof k.onReconnect)k.onReconnect()}),this.installEventToMessageTranslator(q),
this._reconnectState.isOpening=!0,r.abrupt("return",(new Promise(function(t,w){q.once("error",w);q.once("connect",t)})).then(function(){return k}));case 22:case "end":return r.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"onReconnect",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:k=(new Date).toTimeString(),console.log("Reconnected at ".concat(k));case 2:case "end":return n.stop()}},
f)}));return function(){return a.apply(this,arguments)}}()},{key:"close",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k=this,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:this._reconnectState.closed=!0;if(n=this.socket)n.removeAllListeners("reconnect"),n.removeAllListeners("reconnecting"),n.removeAllListeners("disconnect"),n.removeAllListeners("connect"),n.removeAllListeners("reconnect_error"),n.removeAllListeners("reconnect_failed"),n.removeAllListeners("close"),
n.removeAllListeners("error"),n.close();this.debug&&console.log("[".concat(this,"] closing..."));if(!this.isRegistered()){q.next=7;break}q.next=7;return this.unregister();case 7:if(this.isOnline()||this.socket){q.next=10;break}this.debug&&(p=this.isOnline()?"no socket":"not online",this.debug&&console.log("[".concat(this,"] cannot close: ").concat(p)));return q.abrupt("return",this);case 10:if(!n||n.connected){q.next=13;break}this.debug&&console.log("[".concat(this,"] socket not connected, considering client closed"));
return q.abrupt("return",this);case 13:return q.abrupt("return",Promise.race([qh.promise.delay(2E3).then(function(){return n.removeAllListeners("disconnect")}),new Promise(function(r){return n.once("disconnect",r)})]).then(function(){k.debug&&console.log("[".concat(k,"] closed"));return k}));case 14:case "end":return q.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"remove",value:function(){var a=this.constructor.clientKey(this.origin,this.path,this.namespace);this.constructor.clients["delete"](a);
return this.close()}},{key:"register",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k=this,n,p,q,r,t,w,x,B;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(!this.isRegistered()){D.next=2;break}return D.abrupt("return");case 2:if(!this._reconnectState.closed){D.next=6;break}this.debug&&console.log("[".concat(this,"] not registering this b/c closed"));this._reconnectState.registerAttempt=0;return D.abrupt("return");case 6:if(!this._reconnectState.registerProcess){D.next=
9;break}this.debug&&console.log("[".concat(this,"] not registering this b/c register process exists"));return D.abrupt("return");case 9:D.prev=9;if(this.isOnline()){D.next=13;break}D.next=13;return this.open();case 13:return this.debug&&console.log("[".concat(this,"] register")),D.next=16,this.sendToAndWait("tracker","register",Object.assign({userName:"unknown",type:"l2l "+(qh.isNode?"node":"browser"),location:qh.determineLocation()},this.info));case 16:n=D.sent;if(n.data){D.next=21;break}p=Error("Register answer is empty!");
this.emit("error",p);throw p;case 21:if(!n.data.isError){D.next=25;break}q=Error(n.data.error);this.emit("error",q);throw q;case 25:this._reconnectState.registerAttempt=0;r=n.data;t=r.trackerId;w=r.messageNumber;this.trackerId=t;this._incomingOrderNumberingBySenders.set(t,w||0);this.emit("registered",{trackerId:t});if(this.onReconnect&&"function"===typeof this.onReconnect)this.onReconnect();D.next=39;break;case 33:D.prev=33,D.t0=D["catch"](9),console.error("Error in register request of ".concat(this,
": ").concat(D.t0)),x=this._reconnectState.registerAttempt++,B=qh.num.backoff(x,4,3E5),this._reconnectState.registerProcess=setTimeout(function(){k._reconnectState.registerProcess=null;k.register()},B);case 39:case "end":return D.stop()}},f,this,[[9,33]])}));return function(){return a.apply(this,arguments)}}()},{key:"unregister",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.isRegistered()){n.next=
2;break}return n.abrupt("return");case 2:return this.debug&&console.log("[".concat(this,"] unregister")),k=this.trackerId,n.prev=4,n.next=7,this.sendToAndWait(this.trackerId,"unregister",{});case 7:n.next=11;break;case 9:n.prev=9,n.t0=n["catch"](4);case 11:this.renameTarget(k,"tracker"),this.trackerId=null,this.emit("unregistered",this);case 14:case "end":return n.stop()}},f,this,[[4,9]])}));return function(){return a.apply(this,arguments)}}()},{key:"whenRegistered",value:function(a){var d=this;return qh.promise.waitFor(a,
function(){return d.isRegistered()})["catch"](function(f){return Promise.reject(/timeout/i.test(String(f))?Error("Timeout in ".concat(d,".whenRegistered")):f)})}},{key:"send",value:function(a,d){var f=this,k=this.prepareSend(a,d);k=Nb(k,2);a=k[0];d=k[1];this.whenOnline().then(function(){var n=f.socket,p=a,q=p.action;p=p.target;if(!n)throw Error("Trying to send message ".concat(q," to ").concat(p," but cannot find a connection to it!"));"function"===typeof d?n.emit(q,a,d):n.emit(q,a)})}},{key:"joinRoom",
value:function(a){var d=this;return this.whenOnline().then(function(){return d.sendToAndWait(d.trackerId,"[broadcast] join room",{room:a})})}},{key:"leaveRoom",value:function(a){var d=this;return this.whenOnline().then(function(){return d.sendToAndWait(d.trackerId,"[broadcast] leave room",{room:a})})}},{key:"broadcast",value:function(a,d,f){var k=this,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:!1,p={action:d,room:a,broadcast:f};3<arguments.length&&void 0!==arguments[3]&&arguments[3]&&
(p.isSystemBroadcast=!0);n&&(p.isMultiServerBroadcast=!0);return this.whenOnline().then(function(){return k.sendToAndWait(k.trackerId,"[broadcast] send",p)})}},{key:"listRoomMembers",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,this.sendToAndWait(this.trackerId,"[broadcast] list room members",{room:f});case 2:return n=q.sent,p=n.data,q.abrupt("return",p);case 5:case "end":return q.stop()}},
k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"joinedRooms",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.sendToAndWait(this.trackerId,"[broadcast] my rooms",{});case 2:return k=p.sent,n=k.data,p.abrupt("return",n);case 5:case "end":return p.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"listRooms",value:function(){var a=
Bb(regeneratorRuntime.mark(function f(){var k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.sendToAndWait(this.trackerId,"[broadcast] all rooms",{});case 2:return k=p.sent,n=k.data,p.abrupt("return",n);case 5:case "end":return p.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"listPeers",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,t,w=arguments;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=
x.next){case 0:k=0<w.length&&void 0!==w[0]?w[0]:!1;n=this._peersCached;p=Date.now();if(!(!k&&n&&1E3>p-n.timestamp)){x.next=6;break}return x.abrupt("return",this._peersCached.sessions);case 6:if(this.isOnline()){x.next=8;break}return x.abrupt("return",[]);case 8:return x.next=10,this.sendToAndWait(this.trackerId,"getClients",{});case 10:return q=x.sent,r=q.data,t=r.map(function(B){var D=Nb(B,2);B=D[0];var F=D[1],L=F.info||{};D=L.userRealm;var G=L.userToken,oa=L.l2lUserToken,ha=L.location,Ha=L.type;
L=L.world;B=Object.assign({},qh.obj.dissoc(F,["info"]),{id:B,world:L,location:ha,type:Ha});(G=G||oa)&&"null"!==G&&(lively.user?B.user=lively.user.ClientUser.fromToken(G,D):(B.userToken=G,B.userRealm=D));return B}),this._peersCached={timestamp:p,sessions:t},x.abrupt("return",t);case 15:case "end":return x.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"toString",value:function(){var a=this.origin,d=this.path,f=this.namespace,k=this.id,n=this.isOnline()?this.isRegistered()?
"registered":"unregistered":"disconnected";k=(k||"").slice(0,5);return"L2LClient(".concat(k," ").concat(a).concat(d," - ").concat(f," ").concat(n,")")}},{key:"socket",get:function(){return this._socketioClient}},{key:"socketId",get:function(){return this.socket?this.socket.id:null}}]);return c}(qh.L2LConnection));qh.L2LClient=aB;qh["default"]=aB;var TP=Object.freeze({__proto__:null,"default":aB});Lc("cd",TP);var Es=window.lively.FreezerRuntime.recorderFor("lively.shell/command-interface.js");Es.promise=
ai;Es.events=ns;var EH=function(){function b(){rd(this,b);this._stderr=this._stdout="";this.exitCode=void 0;this.commandString="";this.process=null;this._whenDone=Es.promise.deferred();this._whenStarted=Es.promise.deferred();this.startTime=0;this.lastSignal=null;Es.events.makeEmitter(this)}Ac(b,null,[{key:"findCommand",value:function(c){return this.commands.find(function(g){return g.pid===c})}},{key:"commands",get:function(){return this._commands||(this._commands=[])}}]);Ac(b,[{key:"isRunning",value:function(){return this.process&&
void 0===this.exitCode}},{key:"isDone",value:function(){return void 0!==this.exitCode}},{key:"whenStarted",value:function(){return this._whenStarted.promise}},{key:"whenDone",value:function(){return this._whenDone.promise}},{key:"spawn",value:function(){throw Error("not yet implemented");}},{key:"kill",value:function(){this.lastSignal=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"KILL"}},{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.commandString,
", ").concat(this.status,")")}},{key:"isShellCommand",get:function(){return!0}},{key:"status",get:function(){return this.process?void 0===this.exitCode?"running, pid ".concat(this.pid):"exited ".concat(this.exitCode,", pid ").concat(this.pid):"not started"}},{key:"pid",get:function(){return this.process?this.process.pid:null}},{key:"output",get:function(){return this.stdout+(this.stderr?"\n"+this.stderr:"")}},{key:"stdout",get:function(){return this._stdout}},{key:"stderr",get:function(){return this._stderr}}]);
return b}();Es.CommandInterface=EH;Es["default"]=EH;var $g=window.lively.FreezerRuntime.recorderFor("lively.shell/client-command.js");$g.runCommand=Tt;$g.defaultDirectory=kz;$g.env=lz;$g.readFile=iD;$g.writeFile=jD;$g.CommandInterface=EH;$g.promise=ai;$g.arr=mh;$g.obj=nh;$g.signal=Vl;$g.debug=!1;var FH=function(b){function c(a){rd(this,c);var d=g.call(this);d.debug=$g.debug;d.l2lClient=a;return d}gd(c,b);var g=sb(c);Ac(c,null,[{key:"installLively2LivelyServices",value:function(a){Object.keys($g.L2LServices).forEach(function(d){return a.addService(d,
function(){var f=Bb(regeneratorRuntime.mark(function r(n,p,q){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",$g.L2LServices[d](n,p,q));case 1:case "end":return t.stop()}},r)}));return function(n,p,q){return f.apply(this,arguments)}}())})}}]);Ac(c,[{key:"envForCommand",value:function(a){var d=this.l2lClient,f=d.id,k=d.origin,n=d.path;d=d.namespace;var p=a||{};a=p.env;p=p.owner;a=a||{};p&&(a.LIVELY_COMMAND_OWNER=p);return Object.assign({ASKPASS_SESSIONID:f,
L2L_EDITOR_SESSIONID:f,L2L_SESSIONTRACKER_SERVER:k,L2L_SESSIONTRACKER_PATH:n,L2L_SESSIONTRACKER_NS:d},a)}},{key:"spawn",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k=this,n,p,q,r,t,w,x,B,D,F=arguments;return regeneratorRuntime.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:n=0<F.length&&void 0!==F[0]?F[0]:{command:null,env:{},cwd:null,stdin:null};p=this.l2lClient;q=n.command;r=n.env;t=n.cwd;w=n.stdin;this.startTime=new Date;r=this.envForCommand(n);this.debug&&console.log("".concat(this,
" spawning ").concat(q));this.debug&&this.whenStarted().then(function(){return console.log("".concat(k," started"))});this.debug&&this.whenDone().then(function(){return console.log("".concat(k," exited"))});$g.arr.pushIfNotIncluded(this.constructor.commands,this);this.commandString=Array.isArray(q)?q.join(""):q;if(p.isOnline()){L.next=14;break}x="L2L not connected";L.next=18;break;case 14:return L.next=16,p.sendToAndWait(p.trackerId,"lively.shell.spawn",{command:q,env:r,cwd:t,stdin:w},{ackTimeout:3E4});
case 16:$g.__inter0__=L.sent,D=$g.__inter0__.data,x=D.error,B=D.pid;case 18:if(!x){L.next=25;break}$g.debug&&console.error("[".concat(this,"] error at start: ").concat(x));this.process={error:x};this.exitCode=1;$g.signal(this,"error",x);this._whenDone.reject(x);return L.abrupt("return");case 25:return this.process={pid:B},$g.debug&&console.log("[".concat(this,"] got pid ").concat(B)),$g.signal(this,"pid",B),this._whenStarted.resolve(),L.abrupt("return",this);case 30:case "end":return L.stop()}},f,
this)}));return function(){return a.apply(this,arguments)}}()},{key:"writeToStdin",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(this.isRunning()){q.next=2;break}return q.abrupt("return");case 2:return n=this.l2lClient,p=this.pid,q.next=5,n.sendToAndWait(n.trackerId,"lively.shell.writeToStdin",{pid:p,stdin:String(f)});case 5:case "end":return q.stop()}},k,this)}));return function(f){return a.apply(this,
arguments)}}()},{key:"kill",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,t,w,x=arguments;return regeneratorRuntime.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:k=0<x.length&&void 0!==x[0]?x[0]:"KILL";if(this.isRunning()){B.next=3;break}return B.abrupt("return");case 3:return $g.debug&&console.log("".concat(this," signaling ").concat(k)),this.lastSignal=k,n=this.pid,p=this.l2lClient,B.next=8,p.sendToAndWait(p.trackerId,"lively.shell.kill",{pid:n});case 8:q=B.sent;
r=q.data;t=r.status;w=r.error;$g.debug&&console.log("".concat(this," kill send: ").concat(w||t));if(!w){B.next=15;break}throw Error(w);case 15:return B.abrupt("return",this.whenDone());case 16:case "end":return B.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"onOutput",value:function(a){var d=a.stdout;a=a.stderr;d&&(this._stdout+=d,$g.signal(this,"stdout",d),this.emit("stdout",d));a&&(this._stderr+=a,$g.signal(this,"stderr",a),this.emit("stderr",a))}},{key:"onClose",
value:function(a){$g.arr.remove(this.constructor.commands,this);this.exitCode=a;this.emit("close",a);$g.signal(this,"close",a);this._whenDone.resolve(this)}},{key:"onError",value:function(a){$g.arr.remove(this.constructor.commands,this);this._stderr+=a.stack;this.exitCode=1;this.emit("error",a.stack);$g.signal(this,"error",a.stack);this._whenDone.reject(a)}}]);return c}($g.CommandInterface);$g.ClientCommand=FH;$g.runCommand=Tt;$g.dirCache={};$g.defaultDirectory=kz;$g.env=lz;$g.readFile=iD;$g.writeFile=
jD;$g.cmd=$g.cmd||void 0;$g.L2LServices={"lively.shell.onOutput":function(){var b=Bb(regeneratorRuntime.mark(function k(g,a,d,f){var n,p,q,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.data,p=n.pid,q=n.stdout,r=n.stderr,$g.debug&&console.log("[lively.shell] client received lively.shell.onOutput for command ".concat(p)),t.prev=2,t.next=5,$g.promise.waitFor(1E3,function(){return $g.ClientCommand.findCommand(p)});case 5:$g.cmd=t.sent;t.next=12;break;case 8:return t.prev=
8,t.t0=t["catch"](2),console.warn("[lively.shell] received output for command ".concat(p," but it isn't registered!'")),t.abrupt("return");case 12:$g.cmd.onOutput({stdout:q,stderr:r});case 13:case "end":return t.stop()}},k,null,[[2,8]])}));return function(g,a,d,f){return b.apply(this,arguments)}}(),"lively.shell.onExit":function(){var b=Bb(regeneratorRuntime.mark(function k(g,a,d,f){var n,p,q,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.data,p=n.pid,
q=n.code,r=n.error,$g.debug&&console.log("[lively.shell] client received lively.shell.onExit for command ".concat(p)),t.prev=2,t.next=5,$g.promise.waitFor(1E3,function(){return $g.ClientCommand.findCommand(p)});case 5:$g.cmd=t.sent;t.next=12;break;case 8:return t.prev=8,t.t0=t["catch"](2),console.warn("[lively.shell] received exit message for command ".concat(p," but it isn't registered!'")),t.abrupt("return");case 12:if(r)"string"===typeof r&&(r=Error(r)),$g.cmd.onError(r);else $g.cmd.onClose(q);
case 13:case "end":return t.stop()}},k,null,[[2,8]])}));return function(g,a,d,f){return b.apply(this,arguments)}}()};$g["default"]=FH;var UP=Object.freeze({__proto__:null,"default":FH,runCommand:Tt,defaultDirectory:kz,env:lz,readFile:iD,writeFile:jD});Lc("ce",UP);var Gi=window.lively.FreezerRuntime.recorderFor("lively.ide/shell/shell-interface.js");Gi.runCommand=mz;Gi.defaultDirectory=hw;Gi.env=lD;Gi.readFile=function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};c=c||{};var g=
Gi.runCommand('cat "'.concat(b,'"'),c);return g.whenDone().then(function(){return g.output})};Gi.writeFile=function(b,c,g){"string"===typeof c&&(c={content:c});c=c||{};c.content=c.content||"";"win32"!==this.PLATFORM&&(b='"'+b+'"');b=this.run("tee "+b,{stdin:c.content,cwd:c.cwd});c.onEnd&&lively.bindings.connect(b,"end",c,"onEnd");g&&lively.bindings.connect(b,"end",{thenDo:g},"thenDo");return b};Gi.parseCommand=mD;Gi.doGrep=nD;Gi.L2LClient=aB;Gi._runCommand=Tt;Gi._env=lz;Gi._defaultDirectory=kz;Gi.string=
ji;Gi.defaultConnection={url:"".concat(document.location.origin,"/lively-socket.io"),namespace:"l2l"};Gi.runCommand=mz;Gi.defaultDirectory=hw;Gi.env=lD;Gi.parseCommand=mD;Gi.defaultGrepExclusions=".svn .git node_modules dist .module_cache lively.next-node_modules".split(" ");Gi.doGrep=nD;var rT=Object.freeze({__proto__:null,runCommand:mz,defaultDirectory:hw,env:lD,parseCommand:mD,doGrep:nD}),ri=window.lively.FreezerRuntime.recorderFor("lively.shell/client-fs-helper.js");ri.fileInfoCommandString=function(b){var c=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},g=c.rootDirectory;g=void 0===g?".":g;c=c.platform;var a="win32"===c?"\\":"/";"win32"===c||g.endsWith(a)||(g+=a);return"win32"===c?"cd ".concat(g,' && ls -lLd --time-style=locale "').concat(b,'"'):'if [ "$(uname)" = "Darwin" ];\n      then timeformat=\'-T\'; else\n      timeformat="--time-style=+%b %d %T %Y";\n    fi && '+"env TZ=GMT LANG=en_US.UTF-8 cd ".concat(g,' && ls -lLd "$timeformat" "').concat(b,'"')};ri.parseDirectoryListFromLs=rL;
ri.fileInfo=oD;ri.findFilesCommandString=function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},g=c.rootDirectory;g=void 0===g?".":g;var a=c.exclude,d=c.depth,f=c.platform;a||(a="-iname "+ri.defaultExcludes.map(ri.string.print).join(" -o -iname "));var k="win32"===f?"\\":"/";"win32"===f||g.endsWith(k)||(g+=k);k=ri.string.format('%s "%s"',c.re?"-iregex":c.matchPath?"-ipath":"-iname",b);d="number"===typeof d?" -maxdepth "+d:"";return"win32"===f?ri.string.format("find %s %s ( %s ) -prune -o %s %s -print0 | xargs -0 -I{} ls -lLd --time-style=locale {}",
g,c.re?"-E ":"",a.replace(/"/g,""),k.replace(/"/g,""),d):'if [ "$(uname)" = "Darwin" ];\n      then timeformat=\'-T\'; else\n      timeformat="--time-style=+%b %d %T %Y";\n    fi && '+ri.string.format('env TZ=GMT LANG=en_US.UTF-8 find %s %s \\( %s \\) -prune -o %s %s -print0 | xargs -0 -I{} ls -lLd "$timeformat" "{}"',g,c.re?"-E ":"",a,k,d)};ri.findFiles=qD;ri.convertDirectoryUploadEntriesToFileInfos=sL;ri.runCommand=Tt;ri.string=ji;ri.promise=ai;ri.arr=mh;var S3=function(){function b(c){rd(this,
b);this.rootDirectory=c;this.fileName=this.path="";this.isDirectory=!1;this.lastModified=null;this.mode="";this.isLink=!1;this.linkCount=0;this.group=this.user="";this.size=0;this.rootDirectory=null}Ac(b,[{key:"readFromDirectoryListLine",value:function(c){var g=this;if(!c.trim().length)return null;var a=c;this.reader.forEach(function(d){return a=d(a,g)});return this}},{key:"toString",value:function(){return this.path}},{key:"reader",get:function(){return[function(c,g){var a=c.indexOf(" ");g.mode=
c.slice(0,a);g.isDirectory="d"===g.mode[0];return c.slice(a+1).trim()},function(c,g){var a=c.indexOf(" ");g.linkCount=Number(c.slice(0,a));return c.slice(a+1).trim()},function(c,g){var a=c.indexOf(" ");g.user=c.slice(0,a);return c.slice(a+1).trim()},function(c,g){var a=ri.string.peekRight(c,0,/\s+[0-9]/);g.group=c.slice(0,a).trim();return c.slice(a).trim()},function(c,g){var a=c.indexOf(" ");g.size=Number(c.slice(0,a));return c.slice(a+1).trim()},function(c,g){var a=ri.string.reMatches(c,/[^s]+\s+[0-9:\s]+/);
if(!a||!a[0])return c;g.lastModified=new Date(a[0].match+" GMT");return c.slice(a[0].end).trim()},function(c,g){var a=(c=c.replace(/^\.\/+/g,"").replace(/\/\//g,"/"))&&c.split(" -> "),d=""===c?!1:c&&2===a.length,f=(a=d?a[0]:c)&&0===a.indexOf(g.rootDirectory)?a.slice(g.rootDirectory.length):a;g.fileName=""===c?".":f;g.path=a;g.isLink=d;return f}]}}]);return b}();ri.FileInfo=S3;ri.parseDirectoryListFromLs=rL;ri.fileInfo=oD;ri.findFilesProcesses={};ri.defaultExcludes=[".svn",".git","node_modules",".module_cache"];
ri.findFiles=qD;ri.convertDirectoryUploadEntriesToFileInfos=sL;var Zi=window.lively.FreezerRuntime.recorderFor("lively.shell/client-resource.js");Zi.Resource=Jm;Zi.runCommand=Tt;Zi.fileInfo=oD;Zi.findFiles=qD;Zi.string=ji;Zi.obj=nh;var bB=function(b){function c(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};rd(this,c);var k=g.call(this,a);k.options=Object.assign({},f,{l2lClient:d||k.constructor.defaultL2lClient});return k}gd(c,b);var g=sb(c);Ac(c,null,[{key:"defaultL2lClient",
get:function(){return this._defaultL2lClient||Zi._defaultL2LClient},set:function(a){this._defaultL2lClient=Zi._defaultL2LClient=a}}]);Ac(c,[{key:"newResource",value:function(a){return new this.constructor(a,this.options.l2lClient,this.options)}},{key:"read",value:function(){var a=this,d=Zi.runCommand('cat "'.concat(this.url,'"'),this.options);return d.whenDone().then(function(){if(d.exitCode)throw Error("Read ".concat(a.url," failed: ").concat(d.stderr));return d.output})}},{key:"write",value:function(){var a=
Bb(regeneratorRuntime.mark(function k(f){var n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(f){p.next=6;break}p.next=3;return Zi.runCommand('echo -n > "'.concat(this.url,'"'),Object.assign({},this.options)).whenDone();case 3:p.t0=p.sent;p.next=9;break;case 6:return p.next=8,Zi.runCommand('touch "'.concat(this.url,'" && tee "').concat(this.url,'"'),Object.assign({stdin:String(f)},this.options)).whenDone();case 8:p.t0=p.sent;case 9:n=p.t0;if(!n.exitCode){p.next=
12;break}throw Error("Write ".concat(this.url," failed: ").concat(n.stderr));case 12:return p.abrupt("return",this);case 13:case "end":return p.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"mkdir",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Zi.runCommand('mkdir -p "'.concat(this.url,'"'),this.options).whenDone();case 2:k=n.sent;if(!k.exitCode){n.next=
5;break}throw Error("".concat(this," cannot create directory: ").concat(k.stderr));case 5:return n.abrupt("return",this);case 6:case "end":return n.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"exists",value:function(){var a=Zi.runCommand('test -d "'.concat(this.url,'" || test -f "').concat(this.url,'"'),this.options);return a.whenDone().then(function(){return 0===a.exitCode})}},{key:"remove",value:function(){var a=this,d=Zi.runCommand('rm -rf "'.concat(this.url,
'"'),this.options);return d.whenDone().then(function(){if(d.exitCode)throw Error("Remove of ".concat(a.url," failed: ").concat(d.stderr));return a})}},{key:"gzip",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n=this,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return p=Zi.runCommand('gzip > "'.concat(this.url,'"'),Object.assign({stdin:String(f)},this.options)),q.abrupt("return",p.whenDone().then(function(){if(p.exitCode)throw Error("Gzip compression of ".concat(n.url,
" failed: ").concat(p.stderr));return n}));case 2:case "end":return q.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"brotli",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n=this,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return p=Zi.runCommand('brotli > "'.concat(this.url,'"'),Object.assign({stdin:String(f)},this.options)),q.abrupt("return",p.whenDone().then(function(){if(p.exitCode)throw Error("Brotli compression of ".concat(n.url,
" failed: ").concat(p.stderr));return n}));case 2:case "end":return q.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"readProperties",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Zi.fileInfo(this.url,this.options);case 2:return k=n.sent,this.assignProperties(Zi.obj.dissoc(k,["fileName","path","rootDirectory"])),n.abrupt("return",this);case 5:case "end":return n.stop()}},
f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"dirList",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k=this,n,p,q,r,t,w,x=arguments;return regeneratorRuntime.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return n=0<x.length&&void 0!==x[0]?x[0]:1,p=1<x.length&&void 0!==x[1]?x[1]:{},q=p.exclude,Array.isArray(q)&&(q="-iname "+q.map(Zi.string.print).join(" -o -iname ")),r=this.url,t=this.options.l2lClient,B.next=7,Zi.findFiles("*",{exclude:q,depth:n,
rootDirectory:r,l2lClient:t});case 7:return w=B.sent,w[0].path.replace(/\/$/,"")===this.url.replace(/\/$/,"")&&w.shift(),B.abrupt("return",w.map(function(D){var F=D.path;D.isDirectory&&(F=F.replace(/\/?$/,"/"));F=new k.constructor(F,t,k.options);F.assignProperties(Zi.obj.dissoc(D,["fileName","path","rootDirectory"]));return F}));case 10:case "end":return B.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()}]);return c}(Zi.Resource);Zi.ShellClientResource=bB;Zi._defaultL2LClient=
Zi._defaultL2LClient||void 0;var GH={name:"shell-client",matches:function(b){return b.startsWith("/")||b.match(/[a-z]:\\/i)},resourceClass:Zi.ShellClientResource};Zi.resourceExtension=GH;Zi.resourceExtension=GH;Zi["default"]=bB;var VP=Object.freeze({__proto__:null,"default":bB,resourceExtension:GH});Lc("cf",VP);var T3=Object.freeze({__proto__:null,"default":{}}),U3=Qk(T3),xo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,V3={},HT=xo.MutationObserver||xo.WebKitMutationObserver;
if(HT){var IT=0,W3=new HT(nz),JT=xo.document.createTextNode("");W3.observe(JT,{characterData:!0});var HH=function(){JT.data=IT=++IT%2}}else if(xo.setImmediate||"undefined"===typeof xo.MessageChannel)HH="document"in xo&&"onreadystatechange"in xo.document.createElement("script")?function(){var b=xo.document.createElement("script");b.onreadystatechange=function(){nz();b.onreadystatechange=null;b.parentNode.removeChild(b);b=null};xo.document.documentElement.appendChild(b)}:function(){setTimeout(nz,0)};
else{var KT=new xo.MessageChannel;KT.port1.onmessage=nz;HH=function(){KT.port2.postMessage(0)}}var sD,iw=[],LT=V3=function(b){1!==iw.push(b)||sD||HH()},IH={},MT="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(MT){var NT=new Uint8Array(16);IH=function(){MT(NT);return NT}}else{var OT=Array(16);IH=function(){for(var b=0,c;16>b;b++)0===(b&
3)&&(c=4294967296*Math.random()),OT[b]=c>>>((b&3)<<3)&255;return OT}}var PT=IH,X3={},cl=[];for(var cB=0;256>cB;++cB)cl[cB]=(cB+256).toString(16).substr(1);var QT=X3=function(b,c){c=c||0;return[cl[b[c++]],cl[b[c++]],cl[b[c++]],cl[b[c++]],"-",cl[b[c++]],cl[b[c++]],"-",cl[b[c++]],cl[b[c++]],"-",cl[b[c++]],cl[b[c++]],"-",cl[b[c++]],cl[b[c++]],cl[b[c++]],cl[b[c++]],cl[b[c++]],cl[b[c++]]].join("")},Y3={},RT,JH,KH=0,LH=0,Z3=Y3=function(b,c,g){g=c&&g||0;var a=c||[];b=b||{};var d=b.node||RT,f=void 0!==b.clockseq?
b.clockseq:JH;if(null==d||null==f){var k=PT();null==d&&(d=RT=[k[0]|1,k[1],k[2],k[3],k[4],k[5]]);null==f&&(f=JH=(k[6]<<8|k[7])&16383)}k=void 0!==b.msecs?b.msecs:(new Date).getTime();var n=void 0!==b.nsecs?b.nsecs:LH+1,p=k-KH+(n-LH)/1E4;0>p&&void 0===b.clockseq&&(f=f+1&16383);(0>p||k>KH)&&void 0===b.nsecs&&(n=0);if(1E4<=n)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");KH=k;LH=n;JH=f;k+=122192928E5;b=(1E4*(k&268435455)+n)%4294967296;a[g++]=b>>>24&255;a[g++]=b>>>16&255;a[g++]=b>>>8&255;
a[g++]=b&255;b=k/4294967296*1E4&268435455;a[g++]=b>>>8&255;a[g++]=b&255;a[g++]=b>>>24&15|16;a[g++]=b>>>16&255;a[g++]=f>>>8|128;a[g++]=f&255;for(f=0;6>f;++f)a[g+f]=d[f];return c?c:QT(a)},ST={};ST=function(b,c,g){g=c&&g||0;"string"==typeof b&&(c="binary"===b?Array(16):null,b=null);b=b||{};b=b.random||(b.rng||PT)();b[6]=b[6]&15|64;b[8]=b[8]&63|128;if(c)for(var a=0;16>a;++a)c[g+a]=b[a];return c||QT(b)};var $3={},MH=ST;MH.v1=Z3;var TT=$3=MH.v4=MH,Hh="undefined"!==typeof globalThis?globalThis:"undefined"!==
typeof self?self:global,a4={},Xu=a4=function(b){function c(r,t){var w=r[0],x=r[1],B=r[2],D=r[3];w+=(x&B|~x&D)+t[0]-680876936|0;w=(w<<7|w>>>25)+x|0;D+=(w&x|~w&B)+t[1]-389564586|0;D=(D<<12|D>>>20)+w|0;B+=(D&w|~D&x)+t[2]+606105819|0;B=(B<<17|B>>>15)+D|0;x+=(B&D|~B&w)+t[3]-1044525330|0;x=(x<<22|x>>>10)+B|0;w+=(x&B|~x&D)+t[4]-176418897|0;w=(w<<7|w>>>25)+x|0;D+=(w&x|~w&B)+t[5]+1200080426|0;D=(D<<12|D>>>20)+w|0;B+=(D&w|~D&x)+t[6]-1473231341|0;B=(B<<17|B>>>15)+D|0;x+=(B&D|~B&w)+t[7]-45705983|0;x=(x<<22|x>>>
10)+B|0;w+=(x&B|~x&D)+t[8]+1770035416|0;w=(w<<7|w>>>25)+x|0;D+=(w&x|~w&B)+t[9]-1958414417|0;D=(D<<12|D>>>20)+w|0;B+=(D&w|~D&x)+t[10]-42063|0;B=(B<<17|B>>>15)+D|0;x+=(B&D|~B&w)+t[11]-1990404162|0;x=(x<<22|x>>>10)+B|0;w+=(x&B|~x&D)+t[12]+1804603682|0;w=(w<<7|w>>>25)+x|0;D+=(w&x|~w&B)+t[13]-40341101|0;D=(D<<12|D>>>20)+w|0;B+=(D&w|~D&x)+t[14]-1502002290|0;B=(B<<17|B>>>15)+D|0;x+=(B&D|~B&w)+t[15]+1236535329|0;x=(x<<22|x>>>10)+B|0;w+=(x&D|B&~D)+t[1]-165796510|0;w=(w<<5|w>>>27)+x|0;D+=(w&B|x&~B)+t[6]-1069501632|
0;D=(D<<9|D>>>23)+w|0;B+=(D&x|w&~x)+t[11]+643717713|0;B=(B<<14|B>>>18)+D|0;x+=(B&w|D&~w)+t[0]-373897302|0;x=(x<<20|x>>>12)+B|0;w+=(x&D|B&~D)+t[5]-701558691|0;w=(w<<5|w>>>27)+x|0;D+=(w&B|x&~B)+t[10]+38016083|0;D=(D<<9|D>>>23)+w|0;B+=(D&x|w&~x)+t[15]-660478335|0;B=(B<<14|B>>>18)+D|0;x+=(B&w|D&~w)+t[4]-405537848|0;x=(x<<20|x>>>12)+B|0;w+=(x&D|B&~D)+t[9]+568446438|0;w=(w<<5|w>>>27)+x|0;D+=(w&B|x&~B)+t[14]-1019803690|0;D=(D<<9|D>>>23)+w|0;B+=(D&x|w&~x)+t[3]-187363961|0;B=(B<<14|B>>>18)+D|0;x+=(B&w|D&~w)+
t[8]+1163531501|0;x=(x<<20|x>>>12)+B|0;w+=(x&D|B&~D)+t[13]-1444681467|0;w=(w<<5|w>>>27)+x|0;D+=(w&B|x&~B)+t[2]-51403784|0;D=(D<<9|D>>>23)+w|0;B+=(D&x|w&~x)+t[7]+1735328473|0;B=(B<<14|B>>>18)+D|0;x+=(B&w|D&~w)+t[12]-1926607734|0;x=(x<<20|x>>>12)+B|0;w+=(x^B^D)+t[5]-378558|0;w=(w<<4|w>>>28)+x|0;D+=(w^x^B)+t[8]-2022574463|0;D=(D<<11|D>>>21)+w|0;B+=(D^w^x)+t[11]+1839030562|0;B=(B<<16|B>>>16)+D|0;x+=(B^D^w)+t[14]-35309556|0;x=(x<<23|x>>>9)+B|0;w+=(x^B^D)+t[1]-1530992060|0;w=(w<<4|w>>>28)+x|0;D+=(w^x^B)+
t[4]+1272893353|0;D=(D<<11|D>>>21)+w|0;B+=(D^w^x)+t[7]-155497632|0;B=(B<<16|B>>>16)+D|0;x+=(B^D^w)+t[10]-1094730640|0;x=(x<<23|x>>>9)+B|0;w+=(x^B^D)+t[13]+681279174|0;w=(w<<4|w>>>28)+x|0;D+=(w^x^B)+t[0]-358537222|0;D=(D<<11|D>>>21)+w|0;B+=(D^w^x)+t[3]-722521979|0;B=(B<<16|B>>>16)+D|0;x+=(B^D^w)+t[6]+76029189|0;x=(x<<23|x>>>9)+B|0;w+=(x^B^D)+t[9]-640364487|0;w=(w<<4|w>>>28)+x|0;D+=(w^x^B)+t[12]-421815835|0;D=(D<<11|D>>>21)+w|0;B+=(D^w^x)+t[15]+530742520|0;B=(B<<16|B>>>16)+D|0;x+=(B^D^w)+t[2]-995338651|
0;x=(x<<23|x>>>9)+B|0;w+=(B^(x|~D))+t[0]-198630844|0;w=(w<<6|w>>>26)+x|0;D+=(x^(w|~B))+t[7]+1126891415|0;D=(D<<10|D>>>22)+w|0;B+=(w^(D|~x))+t[14]-1416354905|0;B=(B<<15|B>>>17)+D|0;x+=(D^(B|~w))+t[5]-57434055|0;x=(x<<21|x>>>11)+B|0;w+=(B^(x|~D))+t[12]+1700485571|0;w=(w<<6|w>>>26)+x|0;D+=(x^(w|~B))+t[3]-1894986606|0;D=(D<<10|D>>>22)+w|0;B+=(w^(D|~x))+t[10]-1051523|0;B=(B<<15|B>>>17)+D|0;x+=(D^(B|~w))+t[1]-2054922799|0;x=(x<<21|x>>>11)+B|0;w+=(B^(x|~D))+t[8]+1873313359|0;w=(w<<6|w>>>26)+x|0;D+=(x^(w|
~B))+t[15]-30611744|0;D=(D<<10|D>>>22)+w|0;B+=(w^(D|~x))+t[6]-1560198380|0;B=(B<<15|B>>>17)+D|0;x+=(D^(B|~w))+t[13]+1309151649|0;x=(x<<21|x>>>11)+B|0;w+=(B^(x|~D))+t[4]-145523070|0;w=(w<<6|w>>>26)+x|0;D+=(x^(w|~B))+t[11]-1120210379|0;D=(D<<10|D>>>22)+w|0;B+=(w^(D|~x))+t[2]+718787259|0;B=(B<<15|B>>>17)+D|0;x+=(D^(B|~w))+t[9]-343485551|0;r[0]=w+r[0]|0;r[1]=((x<<21|x>>>11)+B|0)+r[1]|0;r[2]=B+r[2]|0;r[3]=D+r[3]|0}function g(r){var t=[],w;for(w=0;64>w;w+=4)t[w>>2]=r.charCodeAt(w)+(r.charCodeAt(w+1)<<8)+
(r.charCodeAt(w+2)<<16)+(r.charCodeAt(w+3)<<24);return t}function a(r){var t=[],w;for(w=0;64>w;w+=4)t[w>>2]=r[w]+(r[w+1]<<8)+(r[w+2]<<16)+(r[w+3]<<24);return t}function d(r){var t=r.length,w=[1732584193,-271733879,-1732584194,271733878],x;for(x=64;x<=t;x+=64)c(w,g(r.substring(x-64,x)));r=r.substring(x-64);var B=r.length;var D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(x=0;x<B;x+=1)D[x>>2]|=r.charCodeAt(x)<<(x%4<<3);D[x>>2]|=128<<(x%4<<3);if(55<x)for(c(w,D),x=0;16>x;x+=1)D[x]=0;t=(8*t).toString(16).match(/(.*?)(.{0,8})$/);
r=parseInt(t[2],16);t=parseInt(t[1],16)||0;D[14]=r;D[15]=t;c(w,D);return w}function f(r){var t;for(t=0;t<r.length;t+=1){var w=t,x,B=r[t],D="";for(x=0;4>x;x+=1)D+=q[B>>8*x+4&15]+q[B>>8*x&15];r[w]=D}return r.join("")}function k(r){/[\u0080-\uFFFF]/.test(r)&&(r=unescape(encodeURIComponent(r)));return r}function n(r){var t=[],w=r.length,x;for(x=0;x<w-1;x+=2)t.push(parseInt(r.substr(x,2),16));return String.fromCharCode.apply(String,t)}function p(){this.reset()}var q="0123456789abcdef".split("");f(d("hello"));
"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function r(t,w){t=t|0||0;return 0>t?Math.max(t+w,0):Math.min(t,w)}ArrayBuffer.prototype.slice=function(t,w){var x=(this||Hh).byteLength;t=r(t,x);var B=x;w!==b&&(B=r(w,x));if(t>B)return new ArrayBuffer(0);B-=t;w=new ArrayBuffer(B);x=new Uint8Array(w);t=new Uint8Array(this||Hh,t,B);x.set(t);return w}}();p.prototype.append=function(r){this.appendBinary(k(r));return this||Hh};p.prototype.appendBinary=function(r){(this||Hh)._buff+=
r;(this||Hh)._length+=r.length;r=(this||Hh)._buff.length;var t;for(t=64;t<=r;t+=64)c((this||Hh)._hash,g((this||Hh)._buff.substring(t-64,t)));(this||Hh)._buff=(this||Hh)._buff.substring(t-64);return this||Hh};p.prototype.end=function(r){var t=(this||Hh)._buff,w=t.length,x,B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(x=0;x<w;x+=1)B[x>>2]|=t.charCodeAt(x)<<(x%4<<3);this._finish(B,w);t=f((this||Hh)._hash);r&&(t=n(t));this.reset();return t};p.prototype.reset=function(){(this||Hh)._buff="";(this||Hh)._length=
0;(this||Hh)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Hh};p.prototype.getState=function(){return{buff:(this||Hh)._buff,length:(this||Hh)._length,hash:(this||Hh)._hash}};p.prototype.setState=function(r){(this||Hh)._buff=r.buff;(this||Hh)._length=r.length;(this||Hh)._hash=r.hash;return this||Hh};p.prototype.destroy=function(){delete (this||Hh)._hash;delete (this||Hh)._buff;delete (this||Hh)._length};p.prototype._finish=function(r,t){r[t>>2]|=128<<(t%4<<3);if(55<t)for(c((this||
Hh)._hash,r),t=0;16>t;t+=1)r[t]=0;var w=8*(this||Hh)._length;w=w.toString(16).match(/(.*?)(.{0,8})$/);t=parseInt(w[2],16);w=parseInt(w[1],16)||0;r[14]=t;r[15]=w;c((this||Hh)._hash,r)};p.hash=function(r,t){return p.hashBinary(k(r),t)};p.hashBinary=function(r,t){r=d(r);r=f(r);return t?n(r):r};p.ArrayBuffer=function(){this.reset()};p.ArrayBuffer.prototype.append=function(r){var t=(this||Hh)._buff.buffer,w=new Uint8Array(t.byteLength+r.byteLength);w.set(new Uint8Array(t));w.set(new Uint8Array(r),t.byteLength);
t=w.length;(this||Hh)._length+=r.byteLength;for(r=64;r<=t;r+=64)c((this||Hh)._hash,a(w.subarray(r-64,r)));(this||Hh)._buff=r-64<t?new Uint8Array(w.buffer.slice(r-64)):new Uint8Array(0);return this||Hh};p.ArrayBuffer.prototype.end=function(r){var t=(this||Hh)._buff,w=t.length,x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],B;for(B=0;B<w;B+=1)x[B>>2]|=t[B]<<(B%4<<3);this._finish(x,w);t=f((this||Hh)._hash);r&&(t=n(t));this.reset();return t};p.ArrayBuffer.prototype.reset=function(){(this||Hh)._buff=new Uint8Array(0);
(this||Hh)._length=0;(this||Hh)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Hh};p.ArrayBuffer.prototype.getState=function(){var r=p.prototype.getState.call(this||Hh);r.buff=String.fromCharCode.apply(null,new Uint8Array(r.buff));return r};p.ArrayBuffer.prototype.setState=function(r){var t=r.buff,w=t.length,x=new ArrayBuffer(w);x=new Uint8Array(x);var B;for(B=0;B<w;B+=1)x[B]=t.charCodeAt(B);r.buff=x;return p.prototype.setState.call(this||Hh,r)};p.ArrayBuffer.prototype.destroy=p.prototype.destroy;
p.ArrayBuffer.prototype._finish=p.prototype._finish;p.ArrayBuffer.hash=function(r,t){var w=new Uint8Array(r),x=w.length;r=[1732584193,-271733879,-1732584194,271733878];var B;for(B=64;B<=x;B+=64)c(r,a(w.subarray(B-64,B)));w=B-64<x?w.subarray(B-64):new Uint8Array(0);var D=w.length;var F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(B=0;B<D;B+=1)F[B>>2]|=w[B]<<(B%4<<3);F[B>>2]|=128<<(B%4<<3);if(55<B)for(c(r,F),B=0;16>B;B+=1)F[B]=0;x=(8*x).toString(16).match(/(.*?)(.{0,8})$/);w=parseInt(x[2],16);x=parseInt(x[1],
16)||0;F[14]=w;F[15]=x;c(r,F);r=f(r);return t?n(r):r};return p}(),Dq={stringify:function(b){var c=[];c.push({obj:b});b="";for(var g,a,d,f,k,n,p;g=c.pop();)if(a=g.obj,d=g.prefix||"",g=g.val||"",b+=d,g)b+=g;else if("object"!==typeof a)b+="undefined"===typeof a?null:JSON.stringify(a);else if(null===a)b+="null";else if(Array.isArray(a)){c.push({val:"]"});for(d=a.length-1;0<=d;d--)g=0===d?"":",",c.push({obj:a[d],prefix:g});c.push({val:"["})}else{g=[];for(f in a)a.hasOwnProperty(f)&&g.push(f);c.push({val:"}"});
for(d=g.length-1;0<=d;d--)k=g[d],n=a[k],p=0<d?",":"",p+=JSON.stringify(k)+":",c.push({obj:n,prefix:p});c.push({val:"{"})}return b},parse:function(b){for(var c=[],g=[],a=0,d,f,k,n;;)if(d=b[a++],"}"===d||"]"===d||"undefined"===typeof d){if(1===c.length)return c.pop();Ut(c.pop(),c,g)}else switch(d){case " ":case "\t":case "\n":case ":":case ",":break;case "n":a+=3;Ut(null,c,g);break;case "t":a+=3;Ut(!0,c,g);break;case "f":a+=4;Ut(!1,c,g);break;case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":case "-":d=
"";for(a--;;)if(f=b[a++],/[\d\.\-e\+]/.test(f))d+=f;else{a--;break}Ut(parseFloat(d),c,g);break;case '"':d="";f=void 0;for(k=0;;)if(n=b[a++],'"'!==n||"\\"===f&&1===k%2)d+=n,f=n,"\\"===f?k++:k=0;else break;Ut(JSON.parse('"'+d+'"'),c,g);break;case "[":d={element:[],index:c.length};c.push(d.element);g.push(d);break;case "{":d={element:{},index:c.length};c.push(d.element);g.push(d);break;default:throw Error("unexpectedly reached end of input: "+d);}}};Dq.stringify;Dq.parse;var b4={},NH=b4=function(b){return function(){var c=
arguments.length;if(c){for(var g=[],a=-1;++a<c;)g[a]=arguments[a];return b.call(this,g)}return b.call(this,[])}},c4={},Dj=c4="function"===typeof Object.create?function(b,c){c&&(b.super_=c,b.prototype=Object.create(c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}))}:function(b,c){if(c){b.super_=c;var g=function(){};g.prototype=c.prototype;b.prototype=new g;b.prototype.constructor=b}},Yu="object"==("undefined"===typeof Reflect?"undefined":Jc(Reflect))?Reflect:null,UT=Yu&&
"function"==typeof Yu.apply?Yu.apply:function(b,c,g){return Function.prototype.apply.call(b,c,g)};var d4=Yu&&"function"==typeof Yu.ownKeys?Yu.ownKeys:Object.getOwnPropertySymbols?function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:function(b){return Object.getOwnPropertyNames(b)};var VT=Number.isNaN||function(b){return b!=b};Wi.EventEmitter=Wi;Wi.prototype._events=void 0;Wi.prototype._eventsCount=0;Wi.prototype._maxListeners=void 0;var WT=10;Object.defineProperty(Wi,
"defaultMaxListeners",{enumerable:!0,get:function(){return WT},set:function(b){if("number"!=typeof b||0>b||VT(b))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+b+".");WT=b}});Wi.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0};Wi.prototype.setMaxListeners=function(b){if("number"!=typeof b||
0>b||VT(b))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+b+".");return this._maxListeners=b,this};Wi.prototype.getMaxListeners=function(){return void 0===this._maxListeners?Wi.defaultMaxListeners:this._maxListeners};Wi.prototype.emit=function(b){for(var c=[],g=1;g<arguments.length;g++)c.push(arguments[g]);g="error"===b;var a=this._events;if(void 0!==a)g=g&&void 0===a.error;else if(!g)return!1;if(g){var d;if(0<c.length&&(d=c[0]),d instanceof Error)throw d;
c=Error("Unhandled error."+(d?" ("+d.message+")":""));throw c.context=d,c;}g=a[b];if(void 0===g)return!1;if("function"==typeof g)UT(g,this,c);else for(d=g.length,a=wL(g,d),g=0;g<d;++g)UT(a[g],this,c);return!0};Wi.prototype.addListener=function(b,c){return tL(this,b,c,!1)};Wi.prototype.on=Wi.prototype.addListener;Wi.prototype.prependListener=function(b,c){return tL(this,b,c,!0)};Wi.prototype.once=function(b,c){return oz(c),this.on(b,uL(this,b,c)),this};Wi.prototype.prependOnceListener=function(b,c){return oz(c),
this.prependListener(b,uL(this,b,c)),this};Wi.prototype.removeListener=function(b,c){var g,a,d;if((oz(c),void 0===(a=this._events))||void 0===(g=a[b]))return this;if(g===c||g.listener===c)0==--this._eventsCount?this._events=Object.create(null):(delete a[b],a.removeListener&&this.emit("removeListener",b,g.listener||c));else if("function"!=typeof g){var f=-1;for(d=g.length-1;0<=d;d--)if(g[d]===c||g[d].listener===c){var k=g[d].listener;f=d;break}if(0>f)return this;if(0===f)g.shift();else{for(;f+1<g.length;f++)g[f]=
g[f+1];g.pop();!0}1===g.length&&(a[b]=g[0]);void 0!==a.removeListener&&this.emit("removeListener",b,k||c)}return this};Wi.prototype.off=Wi.prototype.removeListener;Wi.prototype.removeAllListeners=function(b){var c,g;if(void 0===(g=this._events))return this;if(void 0===g.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==g[b]&&(0==--this._eventsCount?this._events=Object.create(null):delete g[b]),this;if(0===arguments.length){var a=Object.keys(g);
for(g=0;g<a.length;++g)"removeListener"!==(c=a[g])&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(c=g[b]))this.removeListener(b,c);else if(void 0!==c)for(g=c.length-1;0<=g;g--)this.removeListener(b,c[g]);return this};Wi.prototype.listeners=function(b){return vL(this,b,!0)};Wi.prototype.rawListeners=function(b){return vL(this,b,!1)};Wi.listenerCount=function(b,c){return"function"==typeof b.listenerCount?
b.listenerCount(c):xL.call(b,c)};Wi.prototype.listenerCount=xL;Wi.prototype.eventNames=function(){return 0<this._eventsCount?d4(this._events):[]};var Rj=Wi;Rj.EventEmitter;Rj.defaultMaxListeners;Rj.init;Rj.listenerCount;Rj.EventEmitter;Rj.defaultMaxListeners;Rj.init;Rj.listenerCount;Rj.once=function(b,c){return new Promise((g,a)=>{function d(...k){void 0!==f&&b.removeListener("error",f);g(k)}let f;"error"!==c&&(f=k=>{b.removeListener(name,d);a(k)},b.once("error",f));b.once(c,d)})};Rj.on=function(b,
c){function g(...q){const r=f.shift();r?r.resolve(createIterResult(q,!1)):d.push(q)}function a(q){n=!0;const r=f.shift();r?r.reject(q):k=q;p.return()}const d=[],f=[];let k=null,n=!1;const p={async next(){var q=d.shift();return q?createIterResult(q,!1):k?(q=Promise.reject(k),k=null,q):n?createIterResult(void 0,!0):new Promise((r,t)=>f.push({resolve:r,reject:t}))},async return(){b.removeListener(c,g);b.removeListener("error",a);n=!0;for(const q of f)q.resolve(createIterResult(void 0,!0));return createIterResult(void 0,
!0)},throw(q){k=q;b.removeListener(c,g);b.removeListener("error",a)},[Symbol.asyncIterator](){return this}};b.on(c,g);b.on("error",a);return p};var XT="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,e4={},xz=fk,ao=Vt(LT),ML=Vt(TT),sz=Vt(Xu),fM=Vt(Dq),Wt=Vt(NH),Bn=Vt(Dj),Hl=Rj;aq.prototype.get=function(b){return this._store["$"+b]};aq.prototype.set=function(b,c){this._store["$"+b]=c;return!0};aq.prototype.has=function(b){return"$"+b in this._store};aq.prototype.delete=
function(b){b="$"+b;var c=b in this._store;delete this._store[b];return c};aq.prototype.forEach=function(b){for(var c=Object.keys(this._store),g=0,a=c.length;g<a;g++){var d=c[g],f=this._store[d];d=d.substring(1);b(f,d)}};Object.defineProperty(aq.prototype,"size",{get:function(){return Object.keys(this._store).length}});jw.prototype.add=function(b){return this._store.set(b,!0)};jw.prototype.has=function(b){return this._store.has(b)};jw.prototype.forEach=function(b){this._store.forEach(function(c,g){b(g)})};
Object.defineProperty(jw.prototype,"size",{get:function(){return this._store.size}});if(function(){if("undefined"===typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var b=Object.getOwnPropertyDescriptor(Map,Symbol.species);return b&&"get"in b&&Map[Symbol.species]===Map}()){var rw=Set;var Wl=Map}else rw=jw,Wl=aq;var yL=Function.prototype.toString,xX=yL.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var lw=!!localStorage.getItem("_pouch_check_localstorage")}catch(b){lw=
!1}Bn(Xt,Hl.EventEmitter);Xt.prototype.addListener=function(b,c,g,a){function d(){if(f._listeners[c])if(k)k="waiting";else{k=!0;var n=kw(a,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));g.changes(n).on("change",function(p){p.seq>a.since&&!a.cancelled&&(a.since=p.seq,a.onChange(p))}).on("complete",function(){"waiting"===k&&ao(d);k=!1}).on("error",function(){k=!1})}}if(!this._listeners[c]){var f=this,k=!1;this._listeners[c]=d;this.on(b,
d)}};Xt.prototype.removeListener=function(b,c){c in this._listeners&&(Hl.EventEmitter.prototype.removeListener.call(this,b,this._listeners[c]),delete this._listeners[c])};Xt.prototype.notifyLocalWindows=function(b){lw&&(localStorage[b]="a"===localStorage[b]?"b":"a")};Xt.prototype.notify=function(b){this.emit(b);this.notifyLocalWindows(b)};var au="function"===typeof Object.assign?Object.assign:function(b){for(var c=Object(b),g=1;g<arguments.length;g++){var a=arguments[g];if(null!=a)for(var d in a)Object.prototype.hasOwnProperty.call(a,
d)&&(c[d]=a[d])}return c};Bn(gj,Error);gj.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new gj(401,"unauthorized","Name or password is incorrect.");var f4=new gj(400,"bad_request","Missing JSON list of 'docs'"),ln=new gj(404,"not_found","missing"),$t=new gj(409,"conflict","Document update conflict"),FL=new gj(400,"bad_request","_id field must contain a string"),DX=new gj(412,"missing_id","_id is required for puts"),
CX=new gj(400,"bad_request","Only reserved document ids may start with underscore.");new gj(412,"precondition_failed","Database not open");var DL=new gj(500,"unknown_error","Database encountered an unknown error"),eM=new gj(500,"badarg","Some query argument is invalid");new gj(400,"invalid_request","Request was invalid");var g4=new gj(400,"query_parse_error","Some query parameter is invalid"),dM=new gj(500,"doc_validation","Bad special document member"),pz=new gj(400,"bad_request","Something wrong with the request"),
OH=new gj(400,"bad_request","Document must be a JSON object");new gj(404,"not_found","Database not found");var HD=new gj(500,"indexed_db_went_bad","unknown");new gj(500,"web_sql_went_bad","unknown");new gj(500,"levelDB_went_went_bad","unknown");new gj(403,"forbidden","Forbidden by design doc validate_doc_update function");var bM=new gj(400,"bad_request","Invalid rev format");new gj(412,"file_exists","The database could not be created, the file already exists.");var tY=new gj(412,"missing_stub","A pre-existing attachment stub wasn't found");
new gj(413,"invalid_url","Provided URL is invalid");var IL="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),FX=/(?:^|&)([^&=]*)=?([^&]*)/g,EX=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,LX=XT.setImmediate||XT.setTimeout,tz=ML.v4;Bn(mw,Hl.EventEmitter);mw.prototype.cancel=function(){this.isCancelled=
!0;this.db.taskqueue.isReady&&this.emit("cancel")};mw.prototype.validateChanges=function(b){var c=b.complete,g=this;$h._changesFilterPlugin?$h._changesFilterPlugin.validate(b,function(a){if(a)return c(a);g.doChanges(b)}):g.doChanges(b)};mw.prototype.doChanges=function(b){var c=this,g=b.complete;b=tk(b);"live"in b&&!("continuous"in b)&&(b.continuous=b.live);b.processChange=TX;"latest"===b.since&&(b.since="now");b.since||(b.since=0);if("now"===b.since)this.db.info().then(function(f){c.isCancelled?g(null,
{status:"cancelled"}):(b.since=f.update_seq,c.doChanges(b))},g);else{if($h._changesFilterPlugin){if($h._changesFilterPlugin.normalize(b),$h._changesFilterPlugin.shouldFilter(this,b))return $h._changesFilterPlugin.filter(this,b)}else["doc_ids","filter","selector","view"].forEach(function(f){f in b&&Dm("warn",'The "'+f+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in
b||(b.descending=!1);b.limit=0===b.limit?1:b.limit;b.complete=g;var a=this.db._changes(b);if(a&&"function"===typeof a.cancel){var d=c.cancel;c.cancel=Wt(function(f){a.cancel();d.apply(this,f)})}}};Bn(sj,Hl.EventEmitter);sj.prototype.post=hk("post",function(b,c,g){"function"===typeof c&&(g=c,c={});if("object"!==typeof b||Array.isArray(b))return g(fi(OH));this.bulkDocs({docs:[b]},c,ED(g,b._id))});sj.prototype.put=hk("put",function(b,c,g){function a(){var k=b._rev.split("-"),n=k[1];k=parseInt(k[0],10)+
1;var p=LL();b._revisions={start:k,ids:[p,n]};b._rev=k+"-"+p;c.new_edits=!1}function d(k){"function"===typeof f._put&&!1!==c.new_edits?f._put(b,c,k):f.bulkDocs({docs:[b]},c,ED(k,b._id))}"function"===typeof c&&(g=c,c={});if("object"!==typeof b||Array.isArray(b))return g(fi(OH));EL(b._id);if(Or(b._id)&&"function"===typeof this._putLocal)return b._deleted?this._removeLocal(b,g):this._putLocal(b,g);var f=this;c.force&&b._rev?(a(),d(function(k){g(k,k?null:{ok:!0,id:b._id,rev:b._rev})})):d(g)});sj.prototype.putAttachment=
hk("putAttachment",function(b,c,g,a,d){function f(n){var p="_rev"in n?parseInt(n._rev,10):0;n._attachments=n._attachments||{};n._attachments[c]={content_type:d,data:a,revpos:++p};return k.put(n)}var k=this;"function"===typeof d&&(d=a,a=g,g=null);"undefined"===typeof d&&(d=a,a=g,g=null);d||Dm("warn","Attachment",c,"on document",b,"is missing content_type");return k.get(b).then(function(n){if(n._rev!==g)throw fi($t);return f(n)},function(n){if(n.reason===ln.message)return f({_id:b});throw n;})});sj.prototype.removeAttachment=
hk("removeAttachment",function(b,c,g,a){var d=this;d.get(b,function(f,k){if(f)a(f);else if(k._rev!==g)a(fi($t));else{if(!k._attachments)return a();delete k._attachments[c];0===Object.keys(k._attachments).length&&delete k._attachments;d.put(k,a)}})});sj.prototype.remove=hk("remove",function(b,c,g,a){"string"===typeof c?(b={_id:b,_rev:c},"function"===typeof g&&(a=g,g={})):"function"===typeof c?(a=c,g={}):(a=g,g=c);g=g||{};g.was_delete=!0;c={_id:b._id,_rev:b._rev||g.rev,_deleted:!0};if(Or(c._id)&&"function"===
typeof this._removeLocal)return this._removeLocal(b,a);this.bulkDocs({docs:[c]},g,ED(a,c._id))});sj.prototype.revsDiff=hk("revsDiff",function(b,c,g){function a(p,q){n.has(p)||n.set(p,{missing:[]});n.get(p).missing.push(q)}function d(p,q){var r=b[p].slice(0);Nr(q,function(t,w,x,B,D){t=w+"-"+x;w=r.indexOf(t);-1!==w&&(r.splice(w,1),"available"!==D.status&&a(p,t))});r.forEach(function(t){a(p,t)})}"function"===typeof c&&(g=c,c={});var f=Object.keys(b);if(!f.length)return g(null,{});var k=0,n=new Wl;f.map(function(p){this._getRevisionTree(p,
function(q,r){if(q&&404===q.status&&"missing"===q.message)n.set(p,{missing:b[p]});else{if(q)return g(q);d(p,r)}if(++k===f.length){var t={};n.forEach(function(w,x){t[x]=w});return g(null,t)}})},this)});sj.prototype.bulkGet=hk("bulkGet",function(b,c){CL(this,b,c)});sj.prototype.compactDocument=hk("compactDocument",function(b,c,g){var a=this;this._getRevisionTree(b,function(d,f){if(d)return g(d);var k=WX(f),n=[],p=[];Object.keys(k).forEach(function(q){k[q]>c&&n.push(q)});Nr(f,function(q,r,t,w,x){q=r+
"-"+t;"available"===x.status&&-1!==n.indexOf(q)&&p.push(q)});a._doCompaction(b,p,g)})});sj.prototype.compact=hk("compact",function(b,c){"function"===typeof b&&(c=b,b={});b=b||{};this._compactionQueue=this._compactionQueue||[];this._compactionQueue.push({opts:b,callback:c});1===this._compactionQueue.length&&SL(this)});sj.prototype._compact=function(b,c){var g=this,a=[];g.changes({return_docs:!1,last_seq:b.last_seq||0}).on("change",function(d){a.push(g.compactDocument(d.id,0))}).on("complete",function(d){var f=
d.last_seq;Promise.all(a).then(function(){return rz(g,"_local/compaction",function(k){return!k.last_seq||k.last_seq<f?(k.last_seq=f,k):!1})}).then(function(){c(null,{ok:!0})}).catch(c)}).on("error",c)};sj.prototype.get=hk("get",function(b,c,g){function a(){var p=[],q=d.length;if(!q)return g(null,p);d.forEach(function(r){f.get(b,{rev:r,revs:c.revs,latest:c.latest,attachments:c.attachments,binary:c.binary},function(t,w){if(t)p.push({missing:r});else{t=0;for(var x=p.length;t<x;t++)if(p[t].ok&&p[t].ok._rev===
w._rev){var B=!0;break}B||p.push({ok:w})}q--;q||g(null,p)})})}"function"===typeof c&&(g=c,c={});if("string"!==typeof b)return g(fi(FL));if(Or(b)&&"function"===typeof this._getLocal)return this._getLocal(b,g);var d=[],f=this;if(c.open_revs)if("all"===c.open_revs)this._getRevisionTree(b,function(p,q){if(p)return g(p);d=CD(q).map(function(r){return r.rev});a()});else if(Array.isArray(c.open_revs)){d=c.open_revs;for(var k=0;k<d.length;k++){var n=d[k];if("string"!==typeof n||!/^\d+-/.test(n))return g(fi(bM))}a()}else return g(fi(DL,
"function_clause"));else return this._get(b,c,function(p,q){if(p)return p.docId=b,g(p);var r=q.doc,t=q.metadata,w=q.ctx;c.conflicts&&(q=DD(t),q.length&&(r._conflicts=q));cp(t,r._rev)&&(r._deleted=!0);if(c.revs||c.revs_info){p=r._rev.split("-");q=parseInt(p[0],10);p=p[1];var x=NL(t.rev_tree);t=null;for(var B=0;B<x.length;B++){var D=x[B],F=D.ids.map(function(Ha){return Ha.id}).indexOf(p);if(F===q-1||!t&&-1!==F)t=D}if(!t)return p=Error("invalid rev tree"),p.docId=b,g(p);q=t.ids.map(function(Ha){return Ha.id}).indexOf(r._rev.split("-")[1])+
1;t.ids.splice(q,t.ids.length-q);t.ids.reverse();c.revs&&(r._revisions={start:t.pos+t.ids.length-1,ids:t.ids.map(function(Ha){return Ha.id})});if(c.revs_info){var L=t.pos+t.ids.length;r._revs_info=t.ids.map(function(Ha){L--;return{rev:L+"-"+Ha.id,status:Ha.opts.status}})}}if(c.attachments&&r._attachments){var G=r._attachments,oa=Object.keys(G).length;if(0===oa)return g(null,r);Object.keys(G).forEach(function(Ha){this._getAttachment(r._id,Ha,G[Ha],{rev:r._rev,binary:c.binary,ctx:w},function(Va,hc){Va=
r._attachments[Ha];Va.data=hc;delete Va.stub;delete Va.length;--oa||g(null,r)})},f)}else{if(r._attachments)for(var ha in r._attachments)r._attachments.hasOwnProperty(ha)&&(r._attachments[ha].stub=!0);g(null,r)}})});sj.prototype.getAttachment=hk("getAttachment",function(b,c,g,a){var d=this;g instanceof Function&&(a=g,g={});this._get(b,g,function(f,k){if(f)return a(f);if(k.doc._attachments&&k.doc._attachments[c])g.ctx=k.ctx,g.binary=!0,d._getAttachment(b,c,k.doc._attachments[c],g,a);else return a(fi(ln))})});
sj.prototype.allDocs=hk("allDocs",function(b,c){"function"===typeof b&&(c=b,b={});b.skip="undefined"!==typeof b.skip?b.skip:0;b.start_key&&(b.startkey=b.start_key);b.end_key&&(b.endkey=b.end_key);if("keys"in b){if(!Array.isArray(b.keys))return c(new TypeError("options.keys must be an array"));var g=["startkey","endkey","key"].filter(function(a){return a in b})[0];if(g){c(fi(g4,"Query parameter `"+g+"` is not compatible with multi-get"));return}if(!$n(this)&&(XX(b),0===b.keys.length))return this._allDocs({limit:0},
c)}return this._allDocs(b,c)});sj.prototype.changes=function(b,c){"function"===typeof b&&(c=b,b={});b=b||{};b.return_docs="return_docs"in b?b.return_docs:!b.live;return new mw(this,b,c)};sj.prototype.close=hk("close",function(b){this._closed=!0;this.emit("closed");return this._close(b)});sj.prototype.info=hk("info",function(b){var c=this;this._info(function(g,a){if(g)return b(g);a.db_name=a.db_name||c.name;a.auto_compaction=!(!c.auto_compaction||$n(c));a.adapter=c.adapter;b(null,a)})});sj.prototype.id=
hk("id",function(b){return this._id(b)});sj.prototype.type=function(){return"function"===typeof this._type?this._type():this.adapter};sj.prototype.bulkDocs=hk("bulkDocs",function(b,c,g){"function"===typeof c&&(g=c,c={});c=c||{};Array.isArray(b)&&(b={docs:b});if(!b||!b.docs||!Array.isArray(b.docs))return g(fi(f4));for(var a=0;a<b.docs.length;++a)if("object"!==typeof b.docs[a]||Array.isArray(b.docs[a]))return g(fi(OH));var d;b.docs.forEach(function(n){n._attachments&&Object.keys(n._attachments).forEach(function(p){var q;
(q=d)||(q="_"===p.charAt(0)?p+" is not a valid attachment name, attachment names cannot start with '_'":!1);d=q;n._attachments[p].content_type||Dm("warn","Attachment",p,"on document",n._id,"is missing content_type")})});if(d)return g(fi(pz,d));"new_edits"in c||(c.new_edits="new_edits"in b?b.new_edits:!0);var f=this;c.new_edits||$n(f)||b.docs.sort(VX);UX(b.docs);var k=b.docs.map(function(n){return n._id});return this._bulkDocs(b,c,function(n,p){if(n)return g(n);c.new_edits||(p=p.filter(function(r){return r.error}));
if(!$n(f)){n=0;for(var q=p.length;n<q;n++)p[n].id=p[n].id||k[n]}g(null,p)})});sj.prototype.registerDependentDatabase=hk("registerDependentDatabase",function(b,c){var g=new this.constructor(b,this.__opts);rz(this,"_local/_pouch_dependentDbs",function(a){a.dependentDbs=a.dependentDbs||{};if(a.dependentDbs[b])return!1;a.dependentDbs[b]=!0;return a}).then(function(){c(null,{db:g})}).catch(c)});sj.prototype.destroy=hk("destroy",function(b,c){function g(){a._destroy(b,function(f,k){if(f)return c(f);a._destroyed=
!0;a.emit("destroyed");c(null,k||{ok:!0})})}"function"===typeof b&&(c=b,b={});var a=this,d="use_prefix"in a?a.use_prefix:!0;if($n(a))return g();a.get("_local/_pouch_dependentDbs",function(f,k){if(f)return 404!==f.status?c(f):g();var n=a.constructor;f=Object.keys(k.dependentDbs).map(function(p){p=d?p.replace(new RegExp("^"+n.prefix),""):p;return(new n(p,a.__opts)).destroy()});Promise.all(f).then(g,c)})});nw.prototype.execute=function(){var b;if(this.failed)for(;b=this.queue.shift();)b(this.failed);
else for(;b=this.queue.shift();)b()};nw.prototype.fail=function(b){this.failed=b;this.execute()};nw.prototype.ready=function(b){this.isReady=!0;this.db=b;this.execute()};nw.prototype.addTask=function(b){this.queue.push(b);this.failed&&this.execute()};Bn($h,sj);var HY="undefined"!==typeof AbortController?AbortController:function(){return{abort:function(){}}},nM=fetch,cu=Headers;$h.adapters={};$h.preferredAdapters=[];$h.prefix="_pouch_";var YT=new Hl.EventEmitter;(function(b){Object.keys(Hl.EventEmitter.prototype).forEach(function(g){"function"===
typeof Hl.EventEmitter.prototype[g]&&(b[g]=YT[g].bind(YT))});var c=b._destructionListeners=new Wl;b.on("ref",function(g){c.has(g.name)||c.set(g.name,[]);c.get(g.name).push(g)});b.on("unref",function(g){if(c.has(g.name)){var a=c.get(g.name),d=a.indexOf(g);0>d||(a.splice(d,1),1<a.length?c.set(g.name,a):c.delete(g.name))}});b.on("destroyed",function(g){if(c.has(g)){var a=c.get(g);c.delete(g);a.forEach(function(d){d.emit("destroyed",!0)})}})})($h);$h.adapter=function(b,c,g){c.valid()&&($h.adapters[b]=
c,g&&$h.preferredAdapters.push(b))};$h.plugin=function(b){if("function"===typeof b)b($h);else{if("object"!==typeof b||0===Object.keys(b).length)throw Error('Invalid plugin: got "'+b+'", expected an object or a function');Object.keys(b).forEach(function(c){$h.prototype[c]=b[c]})}this.__defaults&&($h.__defaults=au({},this.__defaults));return $h};$h.defaults=function(b){function c(g,a){if(!(this instanceof c))return new c(g,a);a=a||{};g&&"object"===typeof g&&(a=g,g=a.name,delete a.name);a=au({},c.__defaults,
a);$h.call(this,g,a)}Bn(c,$h);c.preferredAdapters=$h.preferredAdapters.slice();Object.keys($h).forEach(function(g){g in c||(c[g]=$h[g])});c.__defaults=au({},this.__defaults,b);return c};$h.fetch=function(b,c){return nM(b,c)};var VL=["$or","$nor","$not"],YL={$elemMatch:function(b,c,g,a){return Array.isArray(a)&&0!==a.length?"object"===typeof a[0]?a.some(function(d){return Zt(d,c,Object.keys(c))}):a.some(function(d){return GD(c,b,g,d)}):!1},$allMatch:function(b,c,g,a){return Array.isArray(a)&&0!==a.length?
"object"===typeof a[0]?a.every(function(d){return Zt(d,c,Object.keys(c))}):a.every(function(d){return GD(c,b,g,d)}):!1},$eq:function(b,c,g,a){return Qr(a)&&0===Hk(a,c)},$gte:function(b,c,g,a){return Qr(a)&&0<=Hk(a,c)},$gt:function(b,c,g,a){return Qr(a)&&0<Hk(a,c)},$lte:function(b,c,g,a){return Qr(a)&&0>=Hk(a,c)},$lt:function(b,c,g,a){return Qr(a)&&0>Hk(a,c)},$exists:function(b,c,g,a){return c?Qr(a):!Qr(a)},$mod:function(b,c,g,a){if(b=pw(a)){b=c[0];c=c[1];if(0===b)throw Error("Bad divisor, cannot divide by zero");
if(parseInt(b,10)!==b)throw Error("Divisor is not an integer");if(parseInt(c,10)!==c)throw Error("Modulus is not an integer");b=parseInt(a,10)!==a?!1:a%b===c}return b},$ne:function(b,c,g,a){return c.every(function(d){return 0!==Hk(a,d)})},$in:function(b,c,g,a){return pw(a)&&ZL(a,c)},$nin:function(b,c,g,a){return pw(a)&&!ZL(a,c)},$size:function(b,c,g,a){return pw(a)&&a.length===c},$all:function(b,c,g,a){return Array.isArray(a)&&fY(a,c)},$regex:function(b,c,g,a){if(b=pw(a))b=(new RegExp(c)).test(a);
return b},$type:function(b,c,g,a){return gY(a,c)}};$h.plugin(function(b){b._changesFilterPlugin={validate:hY,normalize:iY,shouldFilter:jY,filter:kY}});$h.version="7.2.1";var lY=$L("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),mY=$L("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" ")),
qw=new Xt,KD=!1,LD=[],bu=new Wl,ND,MD=new Wl;lM.valid=function(){return"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange};var QD={};PD.valid=function(){return!0};Bn(Tr,Error);Bn(yz,Error);Bn(zz,Error);var KY=Dm.bind(null,"log"),LY=Array.isArray,MY=JSON.parse;sw.prototype.add=function(b){return this.promise=this.promise.catch(function(){}).then(function(){return b()})};sw.prototype.finish=function(){return this.promise};var ZT={},$T=new sw,h4=function(b,c){return TD(c)},i4=function(b,
c){return c.length},j4=function(b,c){b=TD(c);for(var g=Math.min.apply(null,c),a=Math.max.apply(null,c),d=c.length,f=0,k=0,n=c.length;k<n;k++){var p=c[k];f+=p*p}return{sum:b,min:g,max:a,count:d,sumsqr:f}},aU=function(b,c,g,a){function d(Qb,wc,Zb,$c,Oa){try{return{output:wc(Zb,$c,Oa)}}catch(md){return uM(Qb,md),{error:md}}}function f(Qb,wc){var Zb=Hk(Qb.key,wc.key);return 0!==Zb?Zb:Hk(Qb.value,wc.value)}function k(Qb,wc,Zb){Zb=Zb||0;return"number"===typeof wc?Qb.slice(Zb,wc+Zb):0<Zb?Qb.slice(Zb):Qb}
function n(Qb){var wc=Qb.value;return wc&&"object"===typeof wc&&wc._id||Qb.id}function p(Qb){Qb.rows.forEach(function(wc){var Zb=wc.doc&&wc.doc._attachments;Zb&&Object.keys(Zb).forEach(function($c){var Oa=Zb[$c];Zb[$c].data=zD(Oa.data,Oa.content_type)})})}function q(Qb){return function(wc){Qb.include_docs&&Qb.attachments&&Qb.binary&&p(wc);return wc}}function r(Qb,wc,Zb,$c){wc=wc[Qb];"undefined"!==typeof wc&&($c&&(wc=encodeURIComponent(JSON.stringify(wc))),Zb.push(Qb+"="+wc))}function t(Qb){if("undefined"!==
typeof Qb){var wc=Number(Qb);return isNaN(wc)||wc!==parseInt(Qb,10)?Qb:wc}}function w(Qb){Qb.group_level=t(Qb.group_level);Qb.limit=t(Qb.limit);Qb.skip=t(Qb.skip);return Qb}function x(Qb,wc){var Zb=Qb.descending?"endkey":"startkey",$c=Qb.descending?"startkey":"endkey";if("undefined"!==typeof Qb[Zb]&&"undefined"!==typeof Qb[$c]&&0<Hk(Qb[Zb],Qb[$c]))throw new Tr("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(wc.reduce&&!1!==Qb.reduce){if(Qb.include_docs)throw new Tr("{include_docs:true} is invalid for reduce");
if(Qb.keys&&1<Qb.keys.length&&!Qb.group&&!Qb.group_level)throw new Tr("Multi-key fetches for reduce views must use {group: true}");}["group_level","limit","skip"].forEach(function(Oa){a:{if(Oa=Qb[Oa]){if("number"!==typeof Oa){Oa=new Tr('Invalid value for integer: "'+Oa+'"');break a}if(0>Oa){Oa=new Tr('Invalid value for positive integer: "'+Oa+'"');break a}}Oa=void 0}if(Oa)throw Oa;})}function B(Qb,wc,Zb){var $c=[],Oa,md="GET",la,$a;r("reduce",Zb,$c);r("include_docs",Zb,$c);r("attachments",Zb,$c);
r("limit",Zb,$c);r("descending",Zb,$c);r("group",Zb,$c);r("group_level",Zb,$c);r("skip",Zb,$c);r("stale",Zb,$c);r("conflicts",Zb,$c);r("startkey",Zb,$c,!0);r("start_key",Zb,$c,!0);r("endkey",Zb,$c,!0);r("end_key",Zb,$c,!0);r("inclusive_end",Zb,$c);r("key",Zb,$c,!0);r("update_seq",Zb,$c);$c=$c.join("&");$c=""===$c?"":"?"+$c;if("undefined"!==typeof Zb.keys){var dd="keys="+encodeURIComponent(JSON.stringify(Zb.keys));2E3>=dd.length+$c.length+1?$c+=("?"===$c[0]?"&":"?")+dd:(md="POST","string"===typeof wc?
Oa={keys:Zb.keys}:wc.keys=Zb.keys)}if("string"===typeof wc)return dd=UD(wc),Qb.fetch("_design/"+dd[0]+"/_view/"+dd[1]+$c,{headers:new cu({"Content-Type":"application/json"}),method:md,body:JSON.stringify(Oa)}).then(function(Kd){la=Kd.ok;$a=Kd.status;return Kd.json()}).then(function(Kd){if(!la)throw Kd.status=$a,Yt(Kd);Kd.rows.forEach(function(ra){if(ra.value&&ra.value.error&&"builtin_reduce_error"===ra.value.error)throw Error(ra.reason);});return Kd}).then(q(Zb));Oa=Oa||{};Object.keys(wc).forEach(function(Kd){Array.isArray(wc[Kd])?
Oa[Kd]=wc[Kd]:Oa[Kd]=wc[Kd].toString()});return Qb.fetch("_temp_view"+$c,{headers:new cu({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(Oa)}).then(function(Kd){la=Kd.ok;$a=Kd.status;return Kd.json()}).then(function(Kd){if(!la)throw Kd.status=$a,Yt(Kd);return Kd}).then(q(Zb))}function D(Qb,wc,Zb){return new Promise(function($c,Oa){Qb._query(wc,Zb,function(md,la){if(md)return Oa(md);$c(la)})})}function F(Qb){return new Promise(function(wc,Zb){Qb._viewCleanup(function($c,Oa){if($c)return Zb($c);
wc(Oa)})})}function L(Qb){return function(wc){if(404===wc.status)return Qb;throw wc;}}function G(Qb,wc,Zb){function $c($a,dd){for(var Kd=[],ra=new rw,Aa=0,V=dd.rows.length;Aa<V;Aa++){var ea=dd.rows[Aa].doc;if(ea&&(Kd.push(ea),ra.add(ea._id),ea._deleted=!la.has(ea._id),!ea._deleted)){var Mb=la.get(ea._id);"value"in Mb&&(ea.value=Mb.value)}}dd=SD(la);dd.forEach(function(U){if(!ra.has(U)){var Sa={_id:U};U=la.get(U);"value"in U&&(Sa.value=U.value);Kd.push(Sa)}});$a.keys=pM(dd.concat($a.keys));Kd.push($a);
return Kd}var Oa="_local/doc_"+Qb,md={_id:Oa,keys:[]};Qb=Zb.get(Qb);var la=Qb[0];Oa=OY(Qb[1])?Promise.resolve(md):wc.db.get(Oa).catch(L(md));return Oa.then(function($a){return($a.keys.length?wc.db.allDocs({keys:$a.keys,include_docs:!0}):Promise.resolve({rows:[]})).then(function(dd){return $c($a,dd)})})}function oa(Qb,wc,Zb){return Qb.db.get("_local/lastSeq").catch(L({_id:"_local/lastSeq",seq:0})).then(function($c){var Oa=SD(wc);return Promise.all(Oa.map(function(md){return G(md,Qb,wc)})).then(function(md){md=
qz(md);$c.seq=Zb;md.push($c);return Qb.db.bulkDocs({docs:md})})})}function ha(Qb){Qb="string"===typeof Qb?Qb:Qb.name;var wc=ZT[Qb];wc||(wc=ZT[Qb]=new sw);return wc}function Ha(Qb){return RD(ha(Qb),function(){return Va(Qb)})()}function Va(Qb){function wc(Kd,ra){return function(){return oa(Qb,Kd,ra)}}function Zb(){return Qb.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:$a,limit:50}).then($c)}function $c(Kd){Kd=Kd.results;if(Kd.length){for(var ra=new Wl,Aa=0,V=
Kd.length;Aa<V;Aa++){var ea=Kd[Aa];if("_"!==ea.doc._id[0]){Oa=[];md=ea.doc;if(!md._deleted){var Mb=Qb.sourceDB;try{la(md)}catch(ee){uM(Mb,ee)}}Oa.sort(f);Mb=void 0;for(var U=Oa,Sa=new Wl,S=0,Sc=U.length;S<Sc;S++){var xd=U[S],Ae=[xd.key,xd.id];0<S&&0===Hk(xd.key,Mb)&&Ae.push(S);Sa.set(kn(Ae),xd);Mb=xd.key}ra.set(ea.doc._id,[Sa,ea.changes])}$a=ea.seq}dd.add(wc(ra,$a));if(!(50>Kd.length))return Zb()}}var Oa,md,la=c(Qb.mapFun,function(Kd,ra){Kd={id:md._id,key:Pr(Kd)};"undefined"!==typeof ra&&null!==ra&&
(Kd.value=Pr(ra));Oa.push(Kd)}),$a=Qb.seq||0,dd=new sw;return Zb().then(function(){return dd.finish()}).then(function(){Qb.seq=$a})}function hc(Qb,wc,Zb){0===Zb.group_level&&delete Zb.group_level;var $c=Zb.group||Zb.group_level,Oa=g(Qb.reduceFun),md=[],la=isNaN(Zb.group_level)?Number.POSITIVE_INFINITY:Zb.group_level;wc.forEach(function(Aa){var V=md[md.length-1],ea=$c?Aa.key:null;$c&&Array.isArray(ea)&&(ea=ea.slice(0,la));V&&0===Hk(V.groupKey,ea)?(V.keys.push([Aa.key,Aa.id]),V.values.push(Aa.value)):
md.push({keys:[[Aa.key,Aa.id]],values:[Aa.value],groupKey:ea})});wc=[];for(var $a=0,dd=md.length;$a<dd;$a++){var Kd=md[$a],ra=d(Qb.sourceDB,Oa,Kd.keys,Kd.values,!1);if(ra.error&&ra.error instanceof zz)throw ra.error;wc.push({value:ra.error?null:ra.output,key:Kd.groupKey})}return{rows:k(wc,Zb.limit,Zb.skip)}}function qc(Qb,wc){return RD(ha(Qb),function(){return jc(Qb,wc)})()}function jc(Qb,wc){function Zb(ra){ra.include_docs=!0;return Qb.db.allDocs(ra).then(function(Aa){Oa=Aa.total_rows;return Aa.rows.map(function(V){if("value"in
V.doc&&"object"===typeof V.doc.value&&null!==V.doc.value){var ea=Object.keys(V.doc.value).sort(),Mb=["id","key","value"];if(!(ea<Mb||ea>Mb))return V.doc.value}a:{ea=V.doc._id;Mb=[];for(var U=[],Sa=0;;){var S=ea[Sa++];if("\x00"===S)if(1===Mb.length){ea=Mb.pop();break a}else{var Sc=Mb;var xd=U;S=Sc.pop();if(xd.length){var Ae=xd[xd.length-1];S===Ae.element&&(xd.pop(),Ae=xd[xd.length-1]);xd=Ae.element;Ae=Ae.index;Array.isArray(xd)?xd.push(S):Ae===Sc.length-2?(Sc=Sc.pop(),xd[Sc]=S):Sc.push(S)}continue}switch(S){case "1":Mb.push(null);
break;case "2":Mb.push("1"===ea[Sa]);Sa++;break;case "3":Ae=ea;Sc=S=Sa;if("1"===Ae[S])Ae=0,S++;else{xd="0"===Ae[S];S++;var ee="",Fe=Ae.substring(S,S+3);Fe=parseInt(Fe,10)+-324;xd&&(Fe=-Fe);for(S+=3;;){var Mf=Ae[S];if("\x00"===Mf)break;else ee+=Mf;S++}ee=ee.split(".");Ae=1===ee.length?parseInt(ee,10):parseFloat(ee[0]+"."+ee[1]);xd&&(Ae-=10);0!==Fe&&(Ae=parseFloat(Ae+"e"+Fe))}xd=Ae;S-=Sc;Mb.push(xd);Sa+=S;break;case "4":for(S="";;){Sc=ea[Sa];if("\x00"===Sc)break;S+=Sc;Sa++}S=S.replace(/\u0001\u0001/g,
"\x00").replace(/\u0001\u0002/g,"\u0001").replace(/\u0002\u0002/g,"\u0002");Mb.push(S);break;case "5":S={element:[],index:Mb.length};Mb.push(S.element);U.push(S);break;case "6":S={element:{},index:Mb.length};Mb.push(S.element);U.push(S);break;default:throw Error("bad collationIndex or unexpectedly reached end of input: "+S);}}}return{key:ea[0],id:ea[1],value:"value"in V.doc?V.doc.value:null}})})}function $c(ra){var Aa=md?hc(Qb,ra,wc):{total_rows:Oa,offset:la,rows:ra};wc.update_seq&&(Aa.update_seq=
Qb.seq);if(wc.include_docs){var V=pM(ra.map(n));return Qb.sourceDB.allDocs({keys:V,include_docs:!0,conflicts:wc.conflicts,attachments:wc.attachments,binary:wc.binary}).then(function(ea){var Mb=new Wl;ea.rows.forEach(function(U){Mb.set(U.id,U.doc)});ra.forEach(function(U){var Sa=n(U);if(Sa=Mb.get(Sa))U.doc=Sa});return Aa})}return Aa}var Oa,md=Qb.reduceFun&&!1!==wc.reduce,la=wc.skip||0;"undefined"===typeof wc.keys||wc.keys.length||(wc.limit=0,delete wc.keys);if("undefined"!==typeof wc.keys){var $a=
wc.keys.map(function(ra){ra={startkey:kn([ra]),endkey:kn([ra,{}])};wc.update_seq&&(ra.update_seq=!0);return Zb(ra)});return Promise.all($a).then(qz).then($c)}$a={descending:wc.descending};wc.update_seq&&($a.update_seq=!0);if("start_key"in wc)var dd=wc.start_key;"startkey"in wc&&(dd=wc.startkey);if("end_key"in wc)var Kd=wc.end_key;"endkey"in wc&&(Kd=wc.endkey);"undefined"!==typeof dd&&($a.startkey=wc.descending?kn([dd,{}]):kn([dd]));"undefined"!==typeof Kd&&(dd=!1!==wc.inclusive_end,wc.descending&&
(dd=!dd),$a.endkey=kn(dd?[Kd,{}]:[Kd]));"undefined"!==typeof wc.key&&(Kd=kn([wc.key]),dd=kn([wc.key,{}]),$a.descending?($a.endkey=Kd,$a.startkey=dd):($a.startkey=Kd,$a.endkey=dd));md||("number"===typeof wc.limit&&($a.limit=wc.limit),$a.skip=la);return Zb($a).then($c)}function Ya(Qb){return Qb.fetch("_view_cleanup",{headers:new cu({"Content-Type":"application/json"}),method:"POST"}).then(function(wc){return wc.json()})}function xa(Qb){return Qb.get("_local/"+b).then(function(wc){var Zb=new Wl;Object.keys(wc.views).forEach(function(Oa){var md=
UD(Oa);Oa="_design/"+md[0];md=md[1];var la=Zb.get(Oa);la||(la=new rw,Zb.set(Oa,la));la.add(md)});var $c={keys:SD(Zb),include_docs:!0};return Qb.allDocs($c).then(function(Oa){var md={};Oa.rows.forEach(function(la){var $a=la.key.substring(8);Zb.get(la.key).forEach(function(dd){var Kd=$a+"/"+dd;wc.views[Kd]||(Kd=dd);Kd=Object.keys(wc.views[Kd]);var ra=la.doc&&la.doc.views&&la.doc.views[dd];Kd.forEach(function(Aa){md[Aa]=md[Aa]||ra})})});Oa=Object.keys(md).filter(function(la){return!md[la]}).map(function(la){return RD(ha(la),
function(){return(new Qb.constructor(la,Qb.__opts)).destroy()})()});return Promise.all(Oa).then(function(){return{ok:!0}})})},L({ok:!0}))}function tc(Qb,wc,Zb){if("function"===typeof Qb._query)return D(Qb,wc,Zb);if($n(Qb))return B(Qb,wc,Zb);if("string"!==typeof wc)return x(Zb,wc),$T.add(function(){return tM(Qb,"temp_view/temp_view",wc.map,wc.reduce,!0,b).then(function(md){return JY(Ha(md).then(function(){return qc(md,Zb)}),function(){return md.db.destroy()})})}),$T.finish();var $c=UD(wc),Oa=$c[1];
return Qb.get("_design/"+$c[0]).then(function(md){var la=md.views&&md.views[Oa];if(!la)throw new yz("ddoc "+md._id+" has no view named "+Oa);a(md,Oa);x(Zb,la);return tM(Qb,wc,la.map,la.reduce,!1,b).then(function($a){return"ok"===Zb.stale||"update_after"===Zb.stale?("update_after"===Zb.stale&&ao(function(){Ha($a)}),qc($a,Zb)):Ha($a).then(function(){return qc($a,Zb)})})})}return{query:function(Qb,wc,Zb){var $c=this;"function"===typeof wc&&(Zb=wc,wc={});wc=wc?w(wc):{};"function"===typeof Qb&&(Qb={map:Qb});
var Oa=Promise.resolve().then(function(){return tc($c,Qb,wc)});oM(Oa,Zb);return Oa},viewCleanup:IY(function(){return"function"===typeof this._viewCleanup?F(this):$n(this)?Ya(this):xa(this)})}}("mrviews",function(b,c){return"function"===typeof b&&2===b.length?function(g){return b(g,c)}:rM(b.toString(),c)},function(b){b=b.toString();if(/^_sum/.test(b))var c=h4;else if(/^_count/.test(b))c=i4;else if(/^_stats/.test(b))c=j4;else{if(/^_/.test(b))throw Error(b+" is not a supported reduce function.");c=void 0}return c?
c:rM(b)},function(b,c){var g=b.views&&b.views[c];if("string"!==typeof g.map)throw new yz("ddoc "+b._id+" has no string view named "+c+", instead found object of type: "+typeof g.map);});tw.prototype.writeCheckpoint=function(b,c){var g=this;return this.updateTarget(b,c).then(function(){return g.updateSource(b,c)})};tw.prototype.updateTarget=function(b,c){return this.opts.writeTargetCheckpoint?VD(this.target,this.id,b,c,this.returnValue):Promise.resolve(!0)};tw.prototype.updateSource=function(b,c){if(this.opts.writeSourceCheckpoint){var g=
this;return VD(this.src,this.id,b,c,this.returnValue).catch(function(a){if(xM(a))return g.opts.writeSourceCheckpoint=!1,!0;throw a;})}return Promise.resolve(!0)};var bU={undefined:function(b,c){return 0===Hk(b.last_seq,c.last_seq)?c.last_seq:0},1:function(b,c){b=c.session_id===b.session_id?{last_seq:c.last_seq,history:c.history}:wM(c.history,b.history);return b.last_seq}};tw.prototype.getCheckpoint=function(){var b=this;return b.opts&&b.opts.writeSourceCheckpoint&&!b.opts.writeTargetCheckpoint?b.src.get(b.id).then(function(c){return c.last_seq||
0}).catch(function(c){if(404!==c.status)throw c;return 0}):b.target.get(b.id).then(function(c){return b.opts&&b.opts.writeTargetCheckpoint&&!b.opts.writeSourceCheckpoint?c.last_seq||0:b.src.get(b.id).then(function(g){if(c.version!==g.version)return 0;var a=c.version?c.version.toString():"undefined";return a in bU?bU[a](c,g):0},function(g){if(404===g.status&&c.last_seq)return b.src.put({_id:b.id,last_seq:0}).then(function(){return 0},function(a){return xM(a)?(b.opts.writeSourceCheckpoint=!1,c.last_seq):
0});throw g;})}).catch(function(c){if(404!==c.status)throw c;return 0})};Bn(Az,Hl.EventEmitter);Az.prototype.cancel=function(){this.cancelled=!0;this.state="cancelled";this.emit("cancel")};Az.prototype.ready=function(b,c){function g(){a.cancel()}var a=this;a._readyCalled||(a._readyCalled=!0,b.once("destroyed",g),c.once("destroyed",g),a.once("complete",function(){b.removeListener("destroyed",g);c.removeListener("destroyed",g)}))};Bn(YD,Hl.EventEmitter);YD.prototype.cancel=function(){this.canceled||
(this.canceled=!0,this.push.cancel(),this.pull.cancel())};$h.plugin(function(b){b.adapter("idb",lM,!0)}).plugin(function(b){b.adapter("http",PD,!1);b.adapter("https",PD,!1)}).plugin({query:function(b,c,g){return aU.query.call(this,b,c,g)},viewCleanup:function(b){return aU.viewCleanup.call(this,b)}}).plugin(function(b){b.replicate=XD;b.sync=VY;Object.defineProperty(b.prototype,"replicate",{get:function(){var c=this;"undefined"===typeof this.replicateMethods&&(this.replicateMethods={from:function(g,
a,d){return c.constructor.replicate(g,c,a,d)},to:function(g,a,d){return c.constructor.replicate(c,g,a,d)}});return this.replicateMethods}});b.prototype.sync=function(c,g,a){return this.constructor.sync(this,c,g,a)}});var cU=e4=$h,k4=Object.freeze({__proto__:null,"default":cU}),l4=Qk(k4),Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});bq.prototype.get=function(b){return this._store["$"+b]};bq.prototype.set=function(b,c){this._store["$"+b]=c;return!0};bq.prototype.has=function(b){return"$"+
b in this._store};bq.prototype.delete=function(b){b="$"+b;var c=b in this._store;delete this._store[b];return c};bq.prototype.forEach=function(b){for(var c=Object.keys(this._store),g=0,a=c.length;g<a;g++){var d=c[g],f=this._store[d];d=d.substring(1);b(f,d)}};Object.defineProperty(bq.prototype,"size",{get:function(){return Object.keys(this._store).length}});uw.prototype.add=function(b){return this._store.set(b,!0)};uw.prototype.has=function(b){return this._store.has(b)};uw.prototype.forEach=function(b){this._store.forEach(function(c,
g){b(g)})};Object.defineProperty(uw.prototype,"size",{get:function(){return this._store.size}});(function(){if("undefined"===typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var b=Object.getOwnPropertyDescriptor(Map,Symbol.species);return b&&"get"in b&&Map[Symbol.species]===Map})()?(Cn.Set=Set,Cn.Map=Map):(Cn.Set=uw,Cn.Map=bq);Cn.__esModule;Cn.Set;Cn.Map;var eg={};Object.defineProperty(eg,"__esModule",{value:!0});(Dj&&"object"===typeof Dj&&"default"in Dj?Dj["default"]:Dj)(hj,
Error);hj.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var m4=new hj(401,"unauthorized","Name or password is incorrect."),n4=new hj(400,"bad_request","Missing JSON list of 'docs'"),o4=new hj(404,"not_found","missing"),p4=new hj(409,"conflict","Document update conflict"),q4=new hj(400,"bad_request","_id field must contain a string"),r4=new hj(412,"missing_id","_id is required for puts"),s4=new hj(400,"bad_request",
"Only reserved document ids may start with underscore."),t4=new hj(412,"precondition_failed","Database not open"),dU=new hj(500,"unknown_error","Database encountered an unknown error"),u4=new hj(500,"badarg","Some query argument is invalid"),v4=new hj(400,"invalid_request","Request was invalid"),w4=new hj(400,"query_parse_error","Some query parameter is invalid"),x4=new hj(500,"doc_validation","Bad special document member"),y4=new hj(400,"bad_request","Something wrong with the request"),z4=new hj(400,
"bad_request","Document must be a JSON object"),A4=new hj(404,"not_found","Database not found"),B4=new hj(500,"indexed_db_went_bad","unknown"),C4=new hj(500,"web_sql_went_bad","unknown"),D4=new hj(500,"levelDB_went_went_bad","unknown"),E4=new hj(403,"forbidden","Forbidden by design doc validate_doc_update function"),F4=new hj(400,"bad_request","Invalid rev format"),G4=new hj(412,"file_exists","The database could not be created, the file already exists."),H4=new hj(412,"missing_stub","A pre-existing attachment stub wasn't found"),
I4=new hj(413,"invalid_url","Provided URL is invalid");eg.UNAUTHORIZED=m4;eg.MISSING_BULK_DOCS=n4;eg.MISSING_DOC=o4;eg.REV_CONFLICT=p4;eg.INVALID_ID=q4;eg.MISSING_ID=r4;eg.RESERVED_ID=s4;eg.NOT_OPEN=t4;eg.UNKNOWN_ERROR=dU;eg.BAD_ARG=u4;eg.INVALID_REQUEST=v4;eg.QUERY_PARSE_ERROR=w4;eg.DOC_VALIDATION=x4;eg.BAD_REQUEST=y4;eg.NOT_AN_OBJECT=z4;eg.DB_MISSING=A4;eg.WSQ_ERROR=C4;eg.LDB_ERROR=D4;eg.FORBIDDEN=E4;eg.INVALID_REV=F4;eg.FILE_EXISTS=G4;eg.MISSING_STUB=H4;eg.IDB_ERROR=B4;eg.INVALID_URL=I4;eg.createError=
function(b,c){function g(a){for(var d in b)"function"!==typeof b[d]&&(this[d]=b[d]);void 0!==a&&(this.reason=a)}g.prototype=hj.prototype;return new g(c)};eg.generateErrorFromResponse=function(b){if("object"!==typeof b){var c=b;b=dU;b.data=c}"error"in b&&"conflict"===b.error&&(b.name="conflict",b.status=409);"name"in b||(b.name=b.error||"unknown");"status"in b||(b.status=500);"message"in b||(b.message=b.message||b.reason);return b};eg.__esModule;eg.UNAUTHORIZED;eg.MISSING_BULK_DOCS;eg.MISSING_DOC;
eg.REV_CONFLICT;eg.INVALID_ID;eg.MISSING_ID;eg.RESERVED_ID;eg.NOT_OPEN;eg.UNKNOWN_ERROR;eg.BAD_ARG;eg.INVALID_REQUEST;eg.QUERY_PARSE_ERROR;eg.DOC_VALIDATION;eg.BAD_REQUEST;eg.NOT_AN_OBJECT;eg.DB_MISSING;eg.WSQ_ERROR;eg.LDB_ERROR;eg.FORBIDDEN;eg.INVALID_REV;eg.FILE_EXISTS;eg.MISSING_STUB;eg.IDB_ERROR;eg.INVALID_URL;eg.createError;eg.generateErrorFromResponse;var ij={};Object.defineProperty(ij,"__esModule",{value:!0});ij.atob=function(b){return eU(b)};ij.btoa=function(b){return fU(b)};ij.base64StringToBlobOrBuffer=
function(b,c){return BM(eU(b),c)};ij.binaryStringToArrayBuffer=AM;ij.binaryStringToBlobOrBuffer=BM;ij.blob=zM;ij.blobOrBufferToBase64=function(b,c){DM(b,function(g){c(fU(g))})};ij.blobOrBufferToBinaryString=DM;ij.readAsArrayBuffer=function(b,c){var g=new FileReader;g.onloadend=function(a){a=a.target.result||new ArrayBuffer(0);c(a)};g.readAsArrayBuffer(b)};ij.readAsBinaryString=CM;ij.typedBuffer=function(){};ij.__esModule;const eU=ij.atob,fU=ij.btoa;ij.base64StringToBlobOrBuffer;ij.binaryStringToBlobOrBuffer;
ij.blob;ij.blobOrBufferToBase64;ij.blobOrBufferToBinaryString;ij.binaryStringToArrayBuffer;ij.readAsArrayBuffer;ij.readAsBinaryString;ij.typedBuffer;var gU="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,sp={};Object.defineProperty(sp,"__esModule",{value:!0});var EM=ij,PH=Xu&&"object"===typeof Xu&&"default"in Xu?Xu["default"]:Xu,J4=gU.setImmediate||gU.setTimeout;sp.binaryMd5=function(b,c){function g(){J4(d)}function a(){var w=r.end(!0);w=EM.btoa(w);c(w);r.destroy()}
function d(){var w=q*n,x=w+n;q++;q<p?t(r,b,w,x,g):t(r,b,w,x,a)}var f="string"===typeof b,k=f?b.length:b.size,n=Math.min(32768,k),p=Math.ceil(k/n),q=0,r=f?new PH:new PH.ArrayBuffer,t=f?YY:XY;d()};sp.stringMd5=function(b){return PH.hash(b)};sp.__esModule;sp.binaryMd5;sp.stringMd5;var sg={};Object.defineProperty(sg,"__esModule",{value:!0});var ZD=Cz(NH),K4=Cz(Dj),hU=Cz(LT),Ez=Rj,iU=Cz(TT),FM=Function.prototype.toString,ZY=FM.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var Dz=
!!localStorage.getItem("_pouch_check_localstorage")}catch(b){Dz=!1}K4(du,Ez.EventEmitter);du.prototype.addListener=function(b,c,g,a){function d(){if(f._listeners[c])if(k)k="waiting";else{k=!0;var n=$D(a,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));g.changes(n).on("change",function(p){p.seq>a.since&&!a.cancelled&&(a.since=p.seq,a.onChange(p))}).on("complete",function(){"waiting"===k&&hU(d);k=!1}).on("error",function(){k=!1})}}if(!this._listeners[c]){var f=
this,k=!1;this._listeners[c]=d;this.on(b,d)}};du.prototype.removeListener=function(b,c){c in this._listeners&&(Ez.EventEmitter.prototype.removeListener.call(this,b,this._listeners[c]),delete this._listeners[c])};du.prototype.notifyLocalWindows=function(b){Dz&&(localStorage[b]="a"===localStorage[b]?"b":"a")};du.prototype.notify=function(b){this.emit(b);this.notifyLocalWindows(b)};var L4="function"===typeof Object.assign?Object.assign:function(b){for(var c=Object(b),g=1;g<arguments.length;g++){var a=
arguments[g];if(null!=a)for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d])}return c},M4=function(){}.name?function(b){return b.name}:function(b){return(b=b.toString().match(/^\s*function\s*(?:(\S+)\s*)?\(/))&&b[1]?b[1]:""},jU="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),N4=/(?:^|&)([^&=]*)=?([^&]*)/g,O4=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
P4=iU.v4;sg.adapterFun=function(b,c){return HM(ZD(function(g){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));var a=this;$Y(a,b,g);return this.taskqueue.isReady?c.apply(this,g):new Promise(function(d,f){a.taskqueue.addTask(function(k){k?f(k):d(a[b].apply(a,g))})})}))};sg.assign=L4;sg.bulkGetShim=function(b,c,g){function a(){var x=[];r.forEach(function(B){B.docs.forEach(function(D){x.push({id:B.id,docs:[D]})})});
g(null,{results:x})}function d(){if(!(w>=t.length)){var x=t.slice(w,Math.min(w+6,t.length));f(x,w);w+=x.length}}function f(x,B){x.forEach(function(D,F){var L=B+F;F=n.get(D);var G=$D(F[0],["atts_since","attachments"]);G.open_revs=F.map(function(ha){return ha.rev});G.open_revs=G.open_revs.filter(IM);var oa=IM;0===G.open_revs.length&&(delete G.open_revs,oa=aZ);["revs","attachments","binary","ajax","latest"].forEach(function(ha){ha in c&&(G[ha]=c[ha])});b.get(D,G,function(ha,Ha){ha=ha?[{error:ha}]:oa(Ha);
r[L]={id:D,docs:ha};++q===p&&a();d()})})}var k=c.docs,n=new Cn.Map;k.forEach(function(x){n.has(x.id)?n.get(x.id).push(x):n.set(x.id,[x])});var p=n.size,q=0,r=Array(p),t=[];n.forEach(function(x,B){t.push(B)});var w=0;d()};sg.changesHandler=du;sg.clone=vw;sg.defaultBackOff=function(b){var c=0;b||(c=2E3);b=parseInt(b,10)||0;c=parseInt(c,10);c=c!==c||c<=b?(b||1)<<1:c+1;6E5<c&&(b=3E5,c=6E5);return~~((c-b)*Math.random()+b)};sg.explainError=function(b,c){aE("info","The above "+b+" is totally normal. "+c)};
sg.filterChange=function(b){var c={},g=b.filter&&"function"===typeof b.filter;c.query=b.query_params;return function(a){a.doc||(a.doc={});var d;if(d=g)try{d=!(0,b.filter)(a.doc,c)}catch(k){d=eg.createError(eg.BAD_REQUEST,"Filter function threw: "+k.toString())}if("object"===typeof d)return d;if(d)return!1;if(!b.include_docs)delete a.doc;else if(!b.attachments)for(var f in a.doc._attachments)a.doc._attachments.hasOwnProperty(f)&&(a.doc._attachments[f].stub=!0);return!0}};sg.flatten=function(b){for(var c=
[],g=0,a=b.length;g<a;g++)c=c.concat(b[g]);return c};sg.functionName=M4;sg.guardedConsole=aE;sg.hasLocalStorage=function(){return Dz};sg.invalidIdError=function(b){var c;b?"string"!==typeof b?c=eg.createError(eg.INVALID_ID):/^_/.test(b)&&!/^_(design|local)/.test(b)&&(c=eg.createError(eg.RESERVED_ID)):c=eg.createError(eg.MISSING_ID);if(c)throw c;};sg.isRemote=function(b){return"boolean"===typeof b._remote?b._remote:"function"===typeof b.type?(aE("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),
"http"===b.type()):!1};sg.listenerCount=function(b,c){return"listenerCount"in b?b.listenerCount(c):Ez.EventEmitter.listenerCount(b,c)};sg.nextTick=hU;sg.normalizeDdocFunctionName=function(b){return(b=JM(b))?b.join("/"):null};sg.once=GM;sg.parseDdocFunctionName=JM;sg.parseUri=function(b){b=O4.exec(b);for(var c={},g=14;g--;){var a=jU[g],d=b[g]||"",f=-1!==["user","password"].indexOf(a);c[a]=f?decodeURIComponent(d):d}c.queryKey={};c[jU[12]].replace(N4,function(k,n,p){n&&(c.queryKey[n]=p)});return c};
sg.pick=$D;sg.rev=function(b,c){b=vw(b);if(!c)return iU.v4().replace(/-/g,"").toLowerCase();delete b._rev_tree;return sp.stringMd5(JSON.stringify(b))};sg.scopeEval=function(b,c){var g=[],a=[],d;for(d in c)c.hasOwnProperty(d)&&(g.push(d),a.push(c[d]));g.push(b);return Function.apply(null,g).apply(null,a)};sg.toPromise=HM;sg.upsert=KM;sg.uuid=P4;sg.__esModule;sg.bulkGetShim;sg.changesHandler;sg.functionName;sg.nextTick;sg.normalizeDdocFunctionName;sg.parseDdocFunctionName;sg.adapterFun;sg.assign;sg.clone;
sg.defaultBackOff;sg.explainError;sg.filterChange;sg.flatten;sg.guardedConsole;sg.hasLocalStorage;sg.invalidIdError;sg.isRemote;sg.listenerCount;sg.once;sg.parseUri;sg.pick;sg.rev;sg.scopeEval;sg.toPromise;sg.upsert;sg.uuid;var kU,eu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,bk=kU={};try{var cq="function"==typeof setTimeout?setTimeout:bE}catch(b){cq=bE}try{var dq="function"==typeof clearTimeout?clearTimeout:cE}catch(b){dq=cE}!0;var Ur,dp=[],fu=!1,Fz=-1;bk.nextTick=
function(b){var c=Array(arguments.length-1);if(1<arguments.length)for(var g=1;g<arguments.length;g++)c[g-1]=arguments[g];dp.push(new NM(b,c));1!==dp.length||fu||LM(MM)};NM.prototype.run=function(){(this||eu).fun.apply(null,(this||eu).array)};bk.title="browser";bk.browser=!0;bk.env={};bk.argv=[];bk.version="";bk.versions={};bk.on=ep;bk.addListener=ep;bk.once=ep;bk.off=ep;bk.removeListener=ep;bk.removeAllListeners=ep;bk.emit=ep;bk.prependListener=ep;bk.prependOnceListener=ep;bk.listeners=function(b){return[]};
bk.binding=function(b){throw Error("process.binding is not supported");};bk.cwd=function(){return"/"};bk.chdir=function(b){throw Error("process.chdir is not supported");};bk.umask=function(){return 0};var tj=kU;tj.addListener;tj.argv;tj.binding;tj.browser;tj.chdir;tj.cwd;tj.emit;tj.env;tj.listeners;tj.nextTick;tj.off;tj.on;tj.once;tj.prependListener;tj.prependOnceListener;tj.removeAllListeners;tj.removeListener;tj.title;tj.umask;tj.version;tj.versions;var Q4="function"==typeof Symbol&&"symbol"==Jc(Symbol.toStringTag),
QH=Object.prototype.toString,dB=function(b){return!(Q4&&b&&"object"==Jc(b)&&Symbol.toStringTag in b)&&"[object Arguments]"===QH.call(b)},lU=function(b){return!!dB(b)||null!==b&&"object"==Jc(b)&&"number"==typeof b.length&&0<=b.length&&"[object Array]"!==QH.call(b)&&"[object Function]"===QH.call(b.callee)},R4=function(){return dB(arguments)}();dB.isLegacyArguments=lU;var S4=R4?dB:lU,T4=Object.prototype.toString,U4=Function.prototype.toString,V4=/^\s*(?:function)?\*/,mU="function"==typeof Symbol&&"symbol"==
Jc(Symbol.toStringTag),nU=Object.getPrototypeOf;a:if(mU){try{var eB=Function("return function*() {}")();break a}catch(b){}eB=void 0}else eB=!1;var W4=eB?nU(eB):{},X4="function"==typeof Object.create?function(b,c){c&&(b.super_=c,b.prototype=Object.create(c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}))}:function(b,c){if(c){b.super_=c;var g=function(){};g.prototype=c.prototype;b.prototype=new g;b.prototype.constructor=b}},oU=function(b){return b&&"object"==Jc(b)&&"function"==
typeof b.copy&&"function"==typeof b.fill&&"function"==typeof b.readUInt8},ni={},eZ=oU,gN="undefined"!=typeof BigInt,eE="undefined"!=typeof Symbol,Xl=eE&&void 0!==Symbol.toStringTag,Il="undefined"!=typeof Uint8Array,Y4="undefined"!=typeof ArrayBuffer;if(Il&&Xl)var Z4=Object.getPrototypeOf(Uint8Array.prototype),Em=Vr(Object.getOwnPropertyDescriptor(Z4,Symbol.toStringTag).get);var Jj=Vr(Object.prototype.toString),fZ=Vr(Number.prototype.valueOf),gZ=Vr(String.prototype.valueOf),hZ=Vr(Boolean.prototype.valueOf);
if(gN)var iZ=Vr(BigInt.prototype.valueOf);if(eE)var jZ=Vr(Symbol.prototype.valueOf);ni.isArgumentsObject=S4;ni.isGeneratorFunction=function(b){return"function"==typeof b&&(!!V4.test(U4.call(b))||(mU?nU(b)===W4:"[object GeneratorFunction]"===T4.call(b)))};ni.isPromise=function(b){return"undefined"!=typeof Promise&&b instanceof Promise||null!==b&&"object"==Jc(b)&&"function"==typeof b.then&&"function"==typeof b["catch"]};ni.isArrayBufferView=function(b){return Y4&&ArrayBuffer.isView?ArrayBuffer.isView(b):
OM(b)||aN(b)};ni.isTypedArray=OM;ni.isUint8Array=PM;ni.isUint8ClampedArray=QM;ni.isUint16Array=RM;ni.isUint32Array=SM;ni.isInt8Array=TM;ni.isInt16Array=UM;ni.isInt32Array=VM;ni.isFloat32Array=WM;ni.isFloat64Array=XM;ni.isBigInt64Array=YM;ni.isBigUint64Array=ZM;Gz.working="undefined"!=typeof Map&&Gz(new Map);ni.isMap=function(b){return"undefined"!=typeof Map&&(Gz.working?Gz(b):b instanceof Map)};Hz.working="undefined"!=typeof Set&&Hz(new Set);ni.isSet=function(b){return"undefined"!=typeof Set&&(Hz.working?
Hz(b):b instanceof Set)};Iz.working="undefined"!=typeof WeakMap&&Iz(new WeakMap);ni.isWeakMap=function(b){return"undefined"!=typeof WeakMap&&(Iz.working?Iz(b):b instanceof WeakMap)};dE.working="undefined"!=typeof WeakSet&&dE(new WeakSet);ni.isWeakSet=function(b){return dE(b)};Jz.working="undefined"!=typeof ArrayBuffer&&Jz(new ArrayBuffer);ni.isArrayBuffer=$M;Kz.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&Kz(new DataView(new ArrayBuffer(1),0,1));ni.isDataView=aN;Lz.working=
"undefined"!=typeof SharedArrayBuffer&&Lz(new SharedArrayBuffer);ni.isSharedArrayBuffer=bN;ni.isAsyncFunction=function(b){return"[object AsyncFunction]"===Jj(b)};ni.isMapIterator=function(b){return"[object Map Iterator]"===Jj(b)};ni.isSetIterator=function(b){return"[object Set Iterator]"===Jj(b)};ni.isGeneratorObject=function(b){return"[object Generator]"===Jj(b)};ni.isWebAssemblyCompiledModule=function(b){return"[object WebAssembly.Module]"===Jj(b)};ni.isNumberObject=cN;ni.isStringObject=dN;ni.isBooleanObject=
eN;ni.isBigIntObject=fN;ni.isSymbolObject=hN;ni.isBoxedPrimitive=function(b){return cN(b)||dN(b)||eN(b)||fN(b)||hN(b)};ni.isAnyArrayBuffer=function(b){return Il&&($M(b)||bN(b))};["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(b){Object.defineProperty(ni,b,{enumerable:!1,value:function(){throw Error(b+" is not supported in userland");}})});var Lx="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,tf={},yo=tj,pU=Object.getOwnPropertyDescriptors||function(b){for(var c=
Object.keys(b),g={},a=0;a<c.length;a++)g[c[a]]=Object.getOwnPropertyDescriptor(b,c[a]);return g},$4=/%[sdj%]/g;tf.format=function(b){if(!Oz(b)){for(var c=[],g=0;g<arguments.length;g++)c.push(eq(arguments[g]));return c.join(" ")}g=1;var a=arguments,d=a.length;c=String(b).replace($4,function(k){if("%%"===k)return"%";if(g>=d)return k;switch(k){case "%s":return String(a[g++]);case "%d":return Number(a[g++]);case "%j":try{return JSON.stringify(a[g++])}catch(n){return"[Circular]"}default:return k}});for(var f=
a[g];g<d;f=a[++g])null!==f&&gu(f)?c+=" "+eq(f):c+=" "+f;return c};tf.deprecate=function(b,c){if(void 0!==yo&&!0===yo.noDeprecation)return b;if(void 0===yo)return function(){return tf.deprecate(b,c).apply(this||Lx,arguments)};var g=!1;return function(){if(!g){if(yo.throwDeprecation)throw Error(c);yo.traceDeprecation?console.trace(c):console.error(c);g=!0}return b.apply(this||Lx,arguments)}};var fB={},qU=/^$/;if(yo.env.NODE_DEBUG){var RH=yo.env.NODE_DEBUG;RH=RH.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,
".*").replace(/,/g,"$|^").toUpperCase();qU=new RegExp("^"+RH+"$","i")}tf.debuglog=function(b){if(b=b.toUpperCase(),!fB[b])if(qU.test(b)){var c=yo.pid;fB[b]=function(){var g=tf.format.apply(tf,arguments);console.error("%s %d: %s",b,c,g)}}else fB[b]=function(){};return fB[b]};tf.inspect=eq;eq.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};eq.styles={special:"cyan",
number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};tf.types=ni;tf.isArray=jN;tf.isBoolean=fE;tf.isNull=function(b){return null===b};tf.isNullOrUndefined=function(b){return null==b};tf.isNumber=iN;tf.isString=Oz;tf.isSymbol=function(b){return"symbol"==Jc(b)};tf.isUndefined=Wr;tf.isRegExp=yw;tf.types.isRegExp=yw;tf.isObject=gu;tf.isDate=Pz;tf.types.isDate=Pz;tf.isError=xw;tf.types.isNativeError=xw;tf.isFunction=Nz;tf.isPrimitive=function(b){return null===
b||"boolean"==typeof b||"number"==typeof b||"string"==typeof b||"symbol"==Jc(b)||void 0===b};tf.isBuffer=oU;var nZ="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");tf.log=function(){console.log("%s - %s",mZ(),tf.format.apply(tf,arguments))};tf.inherits=X4;tf._extend=function(b,c){if(!c||!gu(c))return b;for(var g=Object.keys(c),a=g.length;a--;)b[g[a]]=c[g[a]];return b};var Fs="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;tf.promisify=function(b){function c(){for(var g,
a,d=new Promise(function(n,p){g=n;a=p}),f=[],k=0;k<arguments.length;k++)f.push(arguments[k]);f.push(function(n,p){n?a(n):g(p)});try{b.apply(this||Lx,f)}catch(n){a(n)}return d}if("function"!=typeof b)throw new TypeError('The "original" argument must be of type Function');if(Fs&&b[Fs]){if("function"!=typeof(c=b[Fs]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(c,Fs,{value:c,enumerable:!1,writable:!1,configurable:!0}),c}return Object.setPrototypeOf(c,
Object.getPrototypeOf(b)),Fs&&Object.defineProperty(c,Fs,{value:c,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(c,pU(b))};tf.promisify.custom=Fs;tf.callbackify=function(b){function c(){for(var g=[],a=0;a<arguments.length;a++)g.push(arguments[a]);var d=g.pop();if("function"!=typeof d)throw new TypeError("The last argument must be of type Function");var f=this||Lx,k=function(){return d.apply(f,arguments)};b.apply(this||Lx,g).then(function(n){yo.nextTick(k.bind(null,null,n))},function(n){yo.nextTick(oZ.bind(null,
n,k))})}if("function"!=typeof b)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(c,Object.getPrototypeOf(b)),Object.defineProperties(c,pU(b)),c};tf._extend;tf.callbackify;tf.debuglog;tf.deprecate;tf.format;tf.inherits;tf.inspect;tf.isArray;tf.isBoolean;tf.isBuffer;tf.isDate;tf.isError;tf.isFunction;tf.isNull;tf.isNullOrUndefined;tf.isNumber;tf.isObject;tf.isPrimitive;tf.isRegExp;tf.isString;tf.isSymbol;tf.isUndefined;tf.log;tf.promisify;tf._extend;
tf.callbackify;tf.debuglog;tf.deprecate;tf.format;tf.inherits;tf.inspect;tf.isArray;tf.isBoolean;tf.isBuffer;tf.isDate;tf.isError;tf.isFunction;tf.isNull;tf.isNullOrUndefined;tf.isNumber;tf.isObject;tf.isPrimitive;tf.isRegExp;tf.isString;tf.isSymbol;tf.isUndefined;tf.log;tf.promisify;tf.types;tf._extend;tf.callbackify;tf.debuglog;tf.deprecate;tf.format;tf.inherits;tf.inspect;tf.isArray;tf.isBoolean;tf.isBuffer;tf.isDate;tf.isError;tf.isFunction;tf.isNull;tf.isNullOrUndefined;tf.isNumber;tf.isObject;
tf.isPrimitive;tf.isRegExp;tf.isString;tf.isSymbol;tf.isUndefined;tf.log;var rU=tf.promisify;tf.types;tf.TextEncoder=globalThis.TextEncoder;tf.TextDecoder=globalThis.TextDecoder;var sU={};sU=function(){for(var b={},c=0;c<arguments.length;c++){var g=arguments[c],a;for(a in g)a5.call(g,a)&&(b[a]=g[a])}return b};var a5=Object.prototype.hasOwnProperty,Zu=sU,fp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,b5={},Mx=fk;Xr.prototype.next=function(b){var c=this||fp;if("function"!==
typeof b)throw Error("next() requires a callback argument");if(c._ended)return Mx.nextTick(b,Error("cannot call next() after end()")),c;if(c._nexting)return Mx.nextTick(b,Error("cannot call next() before previous next() has completed")),c;c._nexting=!0;c._next(function(){c._nexting=!1;b.apply(null,arguments)});return c};Xr.prototype._next=function(b){Mx.nextTick(b)};Xr.prototype.seek=function(b){if((this||fp)._ended)throw Error("cannot call seek() after end()");if((this||fp)._nexting)throw Error("cannot call seek() before next() has completed");
b=(this||fp).db._serializeKey(b);this._seek(b)};Xr.prototype._seek=function(b){};Xr.prototype.end=function(b){if("function"!==typeof b)throw Error("end() requires a callback argument");if((this||fp)._ended)return Mx.nextTick(b,Error("end() already called on iterator"));(this||fp)._ended=!0;this._end(b)};Xr.prototype._end=function(b){Mx.nextTick(b)};var tU=b5=Xr,vk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,c5={};co.prototype._checkWritten=function(){if((this||
vk)._written)throw Error("write() already called on this batch");};co.prototype.put=function(b,c){this._checkWritten();var g=(this||vk).db._checkKey(b)||(this||vk).db._checkValue(c);if(g)throw g;b=(this||vk).db._serializeKey(b);c=(this||vk).db._serializeValue(c);this._put(b,c);return this||vk};co.prototype._put=function(b,c){(this||vk)._operations.push({type:"put",key:b,value:c})};co.prototype.del=function(b){this._checkWritten();var c=(this||vk).db._checkKey(b);if(c)throw c;b=(this||vk).db._serializeKey(b);
this._del(b);return this||vk};co.prototype._del=function(b){(this||vk)._operations.push({type:"del",key:b})};co.prototype.clear=function(){this._checkWritten();this._clear();return this||vk};co.prototype._clear=function(){(this||vk)._operations=[]};co.prototype.write=function(b,c){this._checkWritten();"function"===typeof b&&(c=b);if("function"!==typeof c)throw Error("write() requires a callback argument");if("object"!==typeof b||null===b)b={};(this||vk)._written=!0;this._write(b,c)};co.prototype._write=
function(b,c){(this||vk).db._batch((this||vk)._operations,b,c)};var d5=c5=co,zw={},kN=!1,Qz={},lN=!1,Gs={},uU=!1;const Cj=function(){function b(ra){if(2147483647<ra)throw new RangeError('The value "'+ra+'" is invalid for option "size"');ra=new Uint8Array(ra);Object.setPrototypeOf(ra,c.prototype);return ra}function c(ra,Aa,V){if("number"===typeof ra){if("string"===typeof Aa)throw new TypeError('The "string" argument must be of type string. Received type number');return d(ra)}return g(ra,Aa,V)}function g(ra,
Aa,V){if("string"===typeof ra){var ea=Aa;if("string"!==typeof ea||""===ea)ea="utf8";if(!c.isEncoding(ea))throw new TypeError("Unknown encoding: "+ea);Aa=q(ra,ea)|0;V=b(Aa);ra=V.write(ra,ea);ra!==Aa&&(V=V.slice(0,ra));return ra=V}if(ArrayBuffer.isView(ra))return wc(ra,Uint8Array)?(ra=new Uint8Array(ra),ra=k(ra.buffer,ra.byteOffset,ra.byteLength)):ra=f(ra),ra;if(null==ra)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof ra);if(wc(ra,ArrayBuffer)||ra&&wc(ra.buffer,ArrayBuffer)||"undefined"!==typeof SharedArrayBuffer&&(wc(ra,SharedArrayBuffer)||ra&&wc(ra.buffer,SharedArrayBuffer)))return k(ra,Aa,V);if("number"===typeof ra)throw new TypeError('The "value" argument must not be of type number. Received type number');ea=ra.valueOf&&ra.valueOf();if(null!=ea&&ea!==ra)return c.from(ea,Aa,V);if(ea=n(ra))return ea;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof ra[Symbol.toPrimitive])return c.from(ra[Symbol.toPrimitive]("string"),
Aa,V);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ra);}function a(ra){if("number"!==typeof ra)throw new TypeError('"size" argument must be of type number');if(0>ra)throw new RangeError('The value "'+ra+'" is invalid for option "size"');}function d(ra){a(ra);return b(0>ra?0:p(ra)|0)}function f(ra){const Aa=0>ra.length?0:p(ra.length)|0,V=b(Aa);for(let ea=0;ea<Aa;ea+=1)V[ea]=ra[ea]&255;return V}function k(ra,
Aa,V){if(0>Aa||ra.byteLength<Aa)throw new RangeError('"offset" is outside of buffer bounds');if(ra.byteLength<Aa+(V||0))throw new RangeError('"length" is outside of buffer bounds');ra=void 0===Aa&&void 0===V?new Uint8Array(ra):void 0===V?new Uint8Array(ra,Aa):new Uint8Array(ra,Aa,V);Object.setPrototypeOf(ra,c.prototype);return ra}function n(ra){if(c.isBuffer(ra)){var Aa=p(ra.length)|0;const V=b(Aa);if(0===V.length)return V;ra.copy(V,0,0,Aa);return V}if(void 0!==ra.length)return(Aa="number"!==typeof ra.length)||
(Aa=ra.length,Aa=Aa!==Aa),Aa?b(0):f(ra);if("Buffer"===ra.type&&Array.isArray(ra.data))return f(ra.data)}function p(ra){if(2147483647<=ra)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return ra|0}function q(ra,Aa){if(c.isBuffer(ra))return ra.length;if(ArrayBuffer.isView(ra)||wc(ra,ArrayBuffer))return ra.byteLength;if("string"!==typeof ra)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+
typeof ra);const V=ra.length,ea=2<arguments.length&&!0===arguments[2];if(!ea&&0===V)return 0;let Mb=!1;for(;;)switch(Aa){case "ascii":case "latin1":case "binary":return V;case "utf8":case "utf-8":return tc(ra).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*V;case "hex":return V>>>1;case "base64":return Oa.toByteArray(xa(ra)).length;default:if(Mb)return ea?-1:tc(ra).length;Aa=(""+Aa).toLowerCase();Mb=!0}}function r(ra,Aa,V){let ea=!1;if(void 0===Aa||0>Aa)Aa=0;if(Aa>this.length)return"";
if(void 0===V||V>this.length)V=this.length;if(0>=V)return"";V>>>=0;Aa>>>=0;if(V<=Aa)return"";for(ra||(ra="utf8");;)switch(ra){case "hex":ra=Aa;Aa=this.length;if(!ra||0>ra)ra=0;if(!V||0>V||V>Aa)V=Aa;for(Aa="";ra<V;++ra)Aa+=Kd[this[ra]];return V=Aa;case "utf8":case "utf-8":return B(this,Aa,V);case "ascii":ra=Aa;Aa="";for(V=Math.min(this.length,V);ra<V;++ra)Aa+=String.fromCharCode(this[ra]&127);return V=Aa;case "latin1":case "binary":ra=Aa;Aa="";for(V=Math.min(this.length,V);ra<V;++ra)Aa+=String.fromCharCode(this[ra]);
return V=Aa;case "base64":return ra=Aa,V=0===ra&&V===this.length?Oa.fromByteArray(this):Oa.fromByteArray(this.slice(ra,V)),V;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":V=this.slice(Aa,V);ra="";for(Aa=0;Aa<V.length-1;Aa+=2)ra+=String.fromCharCode(V[Aa]+256*V[Aa+1]);return V=ra;default:if(ea)throw new TypeError("Unknown encoding: "+ra);ra=(ra+"").toLowerCase();ea=!0}}function t(ra,Aa,V){const ea=ra[Aa];ra[Aa]=ra[V];ra[V]=ea}function w(ra,Aa,V,ea,Mb){if(0===ra.length)return-1;"string"===
typeof V?(ea=V,V=0):2147483647<V?V=2147483647:-2147483648>V&&(V=-2147483648);V=+V;V!==V&&(V=Mb?0:ra.length-1);0>V&&(V=ra.length+V);if(V>=ra.length){if(Mb)return-1;V=ra.length-1}else if(0>V)if(Mb)V=0;else return-1;"string"===typeof Aa&&(Aa=c.from(Aa,ea));if(c.isBuffer(Aa))return 0===Aa.length?-1:x(ra,Aa,V,ea,Mb);if("number"===typeof Aa)return Aa&=255,"function"===typeof Uint8Array.prototype.indexOf?Mb?Uint8Array.prototype.indexOf.call(ra,Aa,V):Uint8Array.prototype.lastIndexOf.call(ra,Aa,V):x(ra,[Aa],
V,ea,Mb);throw new TypeError("val must be string, number or Buffer");}function x(ra,Aa,V,ea,Mb){function U(xd,Ae){return 1===Sa?xd[Ae]:xd.readUInt16BE(Ae*Sa)}let Sa=1;var S=ra.length;let Sc=Aa.length;if(void 0!==ea&&(ea=String(ea).toLowerCase(),"ucs2"===ea||"ucs-2"===ea||"utf16le"===ea||"utf-16le"===ea)){if(2>ra.length||2>Aa.length)return-1;Sa=2;S/=2;Sc/=2;V/=2}if(Mb)for(ea=-1;V<S;V++)if(U(ra,V)===U(Aa,-1===ea?0:V-ea)){if(-1===ea&&(ea=V),V-ea+1===Sc)return ea*Sa}else-1!==ea&&(V-=V-ea),ea=-1;else for(V+
Sc>S&&(V=S-Sc);0<=V;V--){S=!0;for(ea=0;ea<Sc;ea++)if(U(ra,V+ea)!==U(Aa,ea)){S=!1;break}if(S)return V}return-1}function B(ra,Aa,V){V=Math.min(ra.length,V);for(var ea=[];Aa<V;){var Mb=ra[Aa];let U=null,Sa=239<Mb?4:223<Mb?3:191<Mb?2:1;if(Aa+Sa<=V){let S,Sc,xd;switch(Sa){case 1:128>Mb&&(U=Mb);break;case 2:S=ra[Aa+1];128===(S&192)&&(Mb=(Mb&31)<<6|S&63,127<Mb&&(U=Mb));break;case 3:S=ra[Aa+1];Sc=ra[Aa+2];128===(S&192)&&128===(Sc&192)&&(Mb=(Mb&15)<<12|(S&63)<<6|Sc&63,2047<Mb&&(55296>Mb||57343<Mb)&&(U=Mb));
break;case 4:S=ra[Aa+1],Sc=ra[Aa+2],xd=ra[Aa+3],128===(S&192)&&128===(Sc&192)&&128===(xd&192)&&(Mb=(Mb&15)<<18|(S&63)<<12|(Sc&63)<<6|xd&63,65535<Mb&&1114112>Mb&&(U=Mb))}}null===U?(U=65533,Sa=1):65535<U&&(U-=65536,ea.push(U>>>10&1023|55296),U=56320|U&1023);ea.push(U);Aa+=Sa}Aa=ea.length;if(4096>=Aa)ea=String.fromCharCode.apply(String,ea);else{ra="";for(V=0;V<Aa;)ra+=String.fromCharCode.apply(String,ea.slice(V,V+=4096));ea=ra}return ea}function D(ra,Aa,V){if(0!==ra%1||0>ra)throw new RangeError("offset is not uint");
if(ra+Aa>V)throw new RangeError("Trying to access beyond buffer length");}function F(ra,Aa,V,ea,Mb,U){if(!c.isBuffer(ra))throw new TypeError('"buffer" argument must be a Buffer instance');if(Aa>Mb||Aa<U)throw new RangeError('"value" argument is out of bounds');if(V+ea>ra.length)throw new RangeError("Index out of range");}function L(ra,Aa,V,ea,Mb){qc(Aa,ea,Mb,ra,V,7);ea=Number(Aa&BigInt(4294967295));ra[V++]=ea;ea>>=8;ra[V++]=ea;ea>>=8;ra[V++]=ea;ra[V++]=ea>>8;Aa=Number(Aa>>BigInt(32)&BigInt(4294967295));
ra[V++]=Aa;Aa>>=8;ra[V++]=Aa;Aa>>=8;ra[V++]=Aa;ra[V++]=Aa>>8;return V}function G(ra,Aa,V,ea,Mb){qc(Aa,ea,Mb,ra,V,7);ea=Number(Aa&BigInt(4294967295));ra[V+7]=ea;ea>>=8;ra[V+6]=ea;ea>>=8;ra[V+5]=ea;ra[V+4]=ea>>8;Aa=Number(Aa>>BigInt(32)&BigInt(4294967295));ra[V+3]=Aa;Aa>>=8;ra[V+2]=Aa;Aa>>=8;ra[V+1]=Aa;ra[V]=Aa>>8;return V+8}function oa(ra,Aa,V,ea,Mb,U){if(V+ea>ra.length)throw new RangeError("Index out of range");if(0>V)throw new RangeError("Index out of range");}function ha(ra,Aa,V,ea,Mb){Aa=+Aa;V>>>=
0;Mb||oa(ra,Aa,V,4);md.write(ra,Aa,V,ea,23,4);return V+4}function Ha(ra,Aa,V,ea,Mb){Aa=+Aa;V>>>=0;Mb||oa(ra,Aa,V,8);md.write(ra,Aa,V,ea,52,8);return V+8}function Va(ra,Aa,V){$a[ra]=class extends V{constructor(){super();Object.defineProperty(this,"message",{value:Aa.apply(this,arguments),writable:!0,configurable:!0});this.name=`${this.name} [${ra}]`;this.stack;delete this.name}get code(){return ra}set code(ea){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ea,writable:!0})}toString(){return`${this.name} [${ra}]: ${this.message}`}}}
function hc(ra){let Aa="",V=ra.length;const ea="-"===ra[0]?1:0;for(;V>=ea+4;V-=3)Aa=`_${ra.slice(V-3,V)}${Aa}`;return`${ra.slice(0,V)}${Aa}`}function qc(ra,Aa,V,ea,Mb,U){if(ra>V||ra<Aa)throw ea="bigint"===typeof Aa?"n":"",new $a.ERR_OUT_OF_RANGE("value",3<U?0===Aa||Aa===BigInt(0)?`>= 0${ea} and < 2${ea} ** ${8*(U+1)}${ea}`:`>= -(2${ea} ** ${8*(U+1)-1}${ea}) and < 2 ** `+`${8*(U+1)-1}${ea}`:`>= ${Aa}${ea} and <= ${V}${ea}`,ra);jc(Mb,"offset");void 0!==ea[Mb]&&void 0!==ea[Mb+U]||Ya(Mb,ea.length-(U+
1))}function jc(ra,Aa){if("number"!==typeof ra)throw new $a.ERR_INVALID_ARG_TYPE(Aa,"number",ra);}function Ya(ra,Aa,V){if(Math.floor(ra)!==ra)throw jc(ra,V),new $a.ERR_OUT_OF_RANGE(V||"offset","an integer",ra);if(0>Aa)throw new $a.ERR_BUFFER_OUT_OF_BOUNDS;throw new $a.ERR_OUT_OF_RANGE(V||"offset",`>= ${V?1:0} and <= ${Aa}`,ra);}function xa(ra){ra=ra.split("=")[0];ra=ra.trim().replace(dd,"");if(2>ra.length)return"";for(;0!==ra.length%4;)ra+="=";return ra}function tc(ra,Aa){Aa=Aa||Infinity;let V;const ea=
ra.length;let Mb=null;const U=[];for(let Sa=0;Sa<ea;++Sa){V=ra.charCodeAt(Sa);if(55295<V&&57344>V){if(!Mb){if(56319<V){-1<(Aa-=3)&&U.push(239,191,189);continue}else if(Sa+1===ea){-1<(Aa-=3)&&U.push(239,191,189);continue}Mb=V;continue}if(56320>V){-1<(Aa-=3)&&U.push(239,191,189);Mb=V;continue}V=(Mb-55296<<10|V-56320)+65536}else Mb&&-1<(Aa-=3)&&U.push(239,191,189);Mb=null;if(128>V){if(0>--Aa)break;U.push(V)}else if(2048>V){if(0>(Aa-=2))break;U.push(V>>6|192,V&63|128)}else if(65536>V){if(0>(Aa-=3))break;
U.push(V>>12|224,V>>6&63|128,V&63|128)}else if(1114112>V){if(0>(Aa-=4))break;U.push(V>>18|240,V>>12&63|128,V>>6&63|128,V&63|128)}else throw Error("Invalid code point");}return U}function Qb(ra,Aa,V,ea){let Mb;for(Mb=0;Mb<ea&&!(Mb+V>=Aa.length||Mb>=ra.length);++Mb)Aa[Mb+V]=ra[Mb];return Mb}function wc(ra,Aa){return ra instanceof Aa||null!=ra&&null!=ra.constructor&&null!=ra.constructor.name&&ra.constructor.name===Aa.name}function Zb(ra){return"undefined"===typeof BigInt?$c:ra}function $c(){throw Error("BigInt not supported");
}if(uU)return Gs;uU=!0;const Oa=pZ(),md=qZ(),la="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;Gs.Buffer=c;Gs.SlowBuffer=function(ra){+ra!=ra&&(ra=0);return c.alloc(+ra)};Gs.INSPECT_MAX_BYTES=50;Gs.kMaxLength=2147483647;c.TYPED_ARRAY_SUPPORT=function(){try{const ra=new Uint8Array(1),Aa={foo:function(){return 42}};Object.setPrototypeOf(Aa,Uint8Array.prototype);Object.setPrototypeOf(ra,Aa);return 42===ra.foo()}catch(ra){return!1}}();c.TYPED_ARRAY_SUPPORT||
"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}});Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});c.poolSize=8192;c.from=function(ra,Aa,V){return g(ra,
Aa,V)};Object.setPrototypeOf(c.prototype,Uint8Array.prototype);Object.setPrototypeOf(c,Uint8Array);c.alloc=function(ra,Aa,V){a(ra);ra=0>=ra?b(ra):void 0!==Aa?"string"===typeof V?b(ra).fill(Aa,V):b(ra).fill(Aa):b(ra);return ra};c.allocUnsafe=function(ra){return d(ra)};c.allocUnsafeSlow=function(ra){return d(ra)};c.isBuffer=function(ra){return null!=ra&&!0===ra._isBuffer&&ra!==c.prototype};c.compare=function(ra,Aa){wc(ra,Uint8Array)&&(ra=c.from(ra,ra.offset,ra.byteLength));wc(Aa,Uint8Array)&&(Aa=c.from(Aa,
Aa.offset,Aa.byteLength));if(!c.isBuffer(ra)||!c.isBuffer(Aa))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ra===Aa)return 0;let V=ra.length,ea=Aa.length;for(let Mb=0,U=Math.min(V,ea);Mb<U;++Mb)if(ra[Mb]!==Aa[Mb]){V=ra[Mb];ea=Aa[Mb];break}return V<ea?-1:ea<V?1:0};c.isEncoding=function(ra){switch(String(ra).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};c.concat=function(ra,Aa){if(!Array.isArray(ra))throw new TypeError('"list" argument must be an Array of Buffers');if(0===ra.length)return c.alloc(0);let V;if(void 0===Aa)for(V=Aa=0;V<ra.length;++V)Aa+=ra[V].length;Aa=c.allocUnsafe(Aa);let ea=0;for(V=0;V<ra.length;++V){let Mb=ra[V];if(wc(Mb,Uint8Array))ea+Mb.length>Aa.length?(c.isBuffer(Mb)||(Mb=c.from(Mb)),Mb.copy(Aa,ea)):Uint8Array.prototype.set.call(Aa,Mb,ea);else if(c.isBuffer(Mb))Mb.copy(Aa,ea);else throw new TypeError('"list" argument must be an Array of Buffers');
ea+=Mb.length}return Aa};c.byteLength=q;c.prototype._isBuffer=!0;c.prototype.swap16=function(){const ra=this.length;if(0!==ra%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Aa=0;Aa<ra;Aa+=2)t(this,Aa,Aa+1);return this};c.prototype.swap32=function(){const ra=this.length;if(0!==ra%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Aa=0;Aa<ra;Aa+=4)t(this,Aa,Aa+3),t(this,Aa+1,Aa+2);return this};c.prototype.swap64=function(){const ra=this.length;if(0!==
ra%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Aa=0;Aa<ra;Aa+=8)t(this,Aa,Aa+7),t(this,Aa+1,Aa+6),t(this,Aa+2,Aa+5),t(this,Aa+3,Aa+4);return this};c.prototype.toString=function(){const ra=this.length;return 0===ra?"":0===arguments.length?B(this,0,ra):r.apply(this,arguments)};c.prototype.toLocaleString=c.prototype.toString;c.prototype.equals=function(ra){if(!c.isBuffer(ra))throw new TypeError("Argument must be a Buffer");return this===ra?!0:0===c.compare(this,ra)};c.prototype.inspect=
function(){let ra;const Aa=Gs.INSPECT_MAX_BYTES;ra=this.toString("hex",0,Aa).replace(/(.{2})/g,"$1 ").trim();this.length>Aa&&(ra+=" ... ");return"<Buffer "+ra+">"};la&&(c.prototype[la]=c.prototype.inspect);c.prototype.compare=function(ra,Aa,V,ea,Mb){wc(ra,Uint8Array)&&(ra=c.from(ra,ra.offset,ra.byteLength));if(!c.isBuffer(ra))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ra);void 0===Aa&&(Aa=0);void 0===V&&(V=ra?ra.length:0);void 0===ea&&
(ea=0);void 0===Mb&&(Mb=this.length);if(0>Aa||V>ra.length||0>ea||Mb>this.length)throw new RangeError("out of range index");if(ea>=Mb&&Aa>=V)return 0;if(ea>=Mb)return-1;if(Aa>=V)return 1;Aa>>>=0;V>>>=0;ea>>>=0;Mb>>>=0;if(this===ra)return 0;let U=Mb-ea,Sa=V-Aa;const S=Math.min(U,Sa);ea=this.slice(ea,Mb);ra=ra.slice(Aa,V);for(Aa=0;Aa<S;++Aa)if(ea[Aa]!==ra[Aa]){U=ea[Aa];Sa=ra[Aa];break}return U<Sa?-1:Sa<U?1:0};c.prototype.includes=function(ra,Aa,V){return-1!==this.indexOf(ra,Aa,V)};c.prototype.indexOf=
function(ra,Aa,V){return w(this,ra,Aa,V,!0)};c.prototype.lastIndexOf=function(ra,Aa,V){return w(this,ra,Aa,V,!1)};c.prototype.write=function(ra,Aa,V,ea){if(void 0===Aa)ea="utf8",V=this.length,Aa=0;else if(void 0===V&&"string"===typeof Aa)ea=Aa,V=this.length,Aa=0;else if(isFinite(Aa))Aa>>>=0,isFinite(V)?(V>>>=0,void 0===ea&&(ea="utf8")):(ea=V,V=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Mb=this.length-Aa;if(void 0===V||V>Mb)V=Mb;if(0<ra.length&&
(0>V||0>Aa)||Aa>this.length)throw new RangeError("Attempt to write outside buffer bounds");ea||(ea="utf8");for(Mb=!1;;)switch(ea){case "hex":a:{Aa=Number(Aa)||0;ea=this.length-Aa;V?(V=Number(V),V>ea&&(V=ea)):V=ea;ea=ra.length;V>ea/2&&(V=ea/2);for(ea=0;ea<V;++ea){Mb=parseInt(ra.substr(2*ea,2),16);if(Mb!==Mb){ra=ea;break a}this[Aa+ea]=Mb}ra=ea}return ra;case "utf8":case "utf-8":return Qb(tc(ra,this.length-Aa),this,Aa,V);case "ascii":case "latin1":case "binary":ea=[];for(Mb=0;Mb<ra.length;++Mb)ea.push(ra.charCodeAt(Mb)&
255);ra=ea;return Qb(ra,this,Aa,V);case "base64":return Qb(Oa.toByteArray(xa(ra)),this,Aa,V);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":{var U=void 0;ea=this.length-Aa;const Sa=[];for(let S=0;S<ra.length&&!(0>(ea-=2));++S)U=ra.charCodeAt(S),Mb=U>>8,U%=256,Sa.push(U),Sa.push(Mb);ra=Sa}return Qb(ra,this,Aa,V);default:if(Mb)throw new TypeError("Unknown encoding: "+ea);ea=(""+ea).toLowerCase();Mb=!0}};c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||
this,0)}};c.prototype.slice=function(ra,Aa){const V=this.length;ra=~~ra;Aa=void 0===Aa?V:~~Aa;0>ra?(ra+=V,0>ra&&(ra=0)):ra>V&&(ra=V);0>Aa?(Aa+=V,0>Aa&&(Aa=0)):Aa>V&&(Aa=V);Aa<ra&&(Aa=ra);ra=this.subarray(ra,Aa);Object.setPrototypeOf(ra,c.prototype);return ra};c.prototype.readUintLE=c.prototype.readUIntLE=function(ra,Aa,V){ra>>>=0;Aa>>>=0;V||D(ra,Aa,this.length);V=this[ra];let ea=1,Mb=0;for(;++Mb<Aa&&(ea*=256);)V+=this[ra+Mb]*ea;return V};c.prototype.readUintBE=c.prototype.readUIntBE=function(ra,Aa,
V){ra>>>=0;Aa>>>=0;V||D(ra,Aa,this.length);V=this[ra+--Aa];let ea=1;for(;0<Aa&&(ea*=256);)V+=this[ra+--Aa]*ea;return V};c.prototype.readUint8=c.prototype.readUInt8=function(ra,Aa){ra>>>=0;Aa||D(ra,1,this.length);return this[ra]};c.prototype.readUint16LE=c.prototype.readUInt16LE=function(ra,Aa){ra>>>=0;Aa||D(ra,2,this.length);return this[ra]|this[ra+1]<<8};c.prototype.readUint16BE=c.prototype.readUInt16BE=function(ra,Aa){ra>>>=0;Aa||D(ra,2,this.length);return this[ra]<<8|this[ra+1]};c.prototype.readUint32LE=
c.prototype.readUInt32LE=function(ra,Aa){ra>>>=0;Aa||D(ra,4,this.length);return(this[ra]|this[ra+1]<<8|this[ra+2]<<16)+16777216*this[ra+3]};c.prototype.readUint32BE=c.prototype.readUInt32BE=function(ra,Aa){ra>>>=0;Aa||D(ra,4,this.length);return 16777216*this[ra]+(this[ra+1]<<16|this[ra+2]<<8|this[ra+3])};c.prototype.readBigUInt64LE=Zb(function(ra){ra>>>=0;jc(ra,"offset");var Aa=this[ra];const V=this[ra+7];void 0!==Aa&&void 0!==V||Ya(ra,this.length-8);Aa=Aa+256*this[++ra]+65536*this[++ra]+this[++ra]*
2**24;ra=this[++ra]+256*this[++ra]+65536*this[++ra]+V*2**24;return BigInt(Aa)+(BigInt(ra)<<BigInt(32))});c.prototype.readBigUInt64BE=Zb(function(ra){ra>>>=0;jc(ra,"offset");var Aa=this[ra];const V=this[ra+7];void 0!==Aa&&void 0!==V||Ya(ra,this.length-8);Aa=Aa*2**24+65536*this[++ra]+256*this[++ra]+this[++ra];ra=this[++ra]*2**24+65536*this[++ra]+256*this[++ra]+V;return(BigInt(Aa)<<BigInt(32))+BigInt(ra)});c.prototype.readIntLE=function(ra,Aa,V){ra>>>=0;Aa>>>=0;V||D(ra,Aa,this.length);V=this[ra];let ea=
1,Mb=0;for(;++Mb<Aa&&(ea*=256);)V+=this[ra+Mb]*ea;V>=128*ea&&(V-=Math.pow(2,8*Aa));return V};c.prototype.readIntBE=function(ra,Aa,V){ra>>>=0;Aa>>>=0;V||D(ra,Aa,this.length);V=Aa;let ea=1,Mb=this[ra+--V];for(;0<V&&(ea*=256);)Mb+=this[ra+--V]*ea;Mb>=128*ea&&(Mb-=Math.pow(2,8*Aa));return Mb};c.prototype.readInt8=function(ra,Aa){ra>>>=0;Aa||D(ra,1,this.length);return this[ra]&128?-1*(255-this[ra]+1):this[ra]};c.prototype.readInt16LE=function(ra,Aa){ra>>>=0;Aa||D(ra,2,this.length);ra=this[ra]|this[ra+
1]<<8;return ra&32768?ra|4294901760:ra};c.prototype.readInt16BE=function(ra,Aa){ra>>>=0;Aa||D(ra,2,this.length);ra=this[ra+1]|this[ra]<<8;return ra&32768?ra|4294901760:ra};c.prototype.readInt32LE=function(ra,Aa){ra>>>=0;Aa||D(ra,4,this.length);return this[ra]|this[ra+1]<<8|this[ra+2]<<16|this[ra+3]<<24};c.prototype.readInt32BE=function(ra,Aa){ra>>>=0;Aa||D(ra,4,this.length);return this[ra]<<24|this[ra+1]<<16|this[ra+2]<<8|this[ra+3]};c.prototype.readBigInt64LE=Zb(function(ra){ra>>>=0;jc(ra,"offset");
const Aa=this[ra],V=this[ra+7];void 0!==Aa&&void 0!==V||Ya(ra,this.length-8);return(BigInt(this[ra+4]+256*this[ra+5]+65536*this[ra+6]+(V<<24))<<BigInt(32))+BigInt(Aa+256*this[++ra]+65536*this[++ra]+this[++ra]*2**24)});c.prototype.readBigInt64BE=Zb(function(ra){ra>>>=0;jc(ra,"offset");var Aa=this[ra];const V=this[ra+7];void 0!==Aa&&void 0!==V||Ya(ra,this.length-8);Aa=(Aa<<24)+65536*this[++ra]+256*this[++ra]+this[++ra];return(BigInt(Aa)<<BigInt(32))+BigInt(this[++ra]*2**24+65536*this[++ra]+256*this[++ra]+
V)});c.prototype.readFloatLE=function(ra,Aa){ra>>>=0;Aa||D(ra,4,this.length);return md.read(this,ra,!0,23,4)};c.prototype.readFloatBE=function(ra,Aa){ra>>>=0;Aa||D(ra,4,this.length);return md.read(this,ra,!1,23,4)};c.prototype.readDoubleLE=function(ra,Aa){ra>>>=0;Aa||D(ra,8,this.length);return md.read(this,ra,!0,52,8)};c.prototype.readDoubleBE=function(ra,Aa){ra>>>=0;Aa||D(ra,8,this.length);return md.read(this,ra,!1,52,8)};c.prototype.writeUintLE=c.prototype.writeUIntLE=function(ra,Aa,V,ea){ra=+ra;
Aa>>>=0;V>>>=0;ea||F(this,ra,Aa,V,Math.pow(2,8*V)-1,0);ea=1;let Mb=0;for(this[Aa]=ra&255;++Mb<V&&(ea*=256);)this[Aa+Mb]=ra/ea&255;return Aa+V};c.prototype.writeUintBE=c.prototype.writeUIntBE=function(ra,Aa,V,ea){ra=+ra;Aa>>>=0;V>>>=0;ea||F(this,ra,Aa,V,Math.pow(2,8*V)-1,0);ea=V-1;let Mb=1;for(this[Aa+ea]=ra&255;0<=--ea&&(Mb*=256);)this[Aa+ea]=ra/Mb&255;return Aa+V};c.prototype.writeUint8=c.prototype.writeUInt8=function(ra,Aa,V){ra=+ra;Aa>>>=0;V||F(this,ra,Aa,1,255,0);this[Aa]=ra&255;return Aa+1};
c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(ra,Aa,V){ra=+ra;Aa>>>=0;V||F(this,ra,Aa,2,65535,0);this[Aa]=ra&255;this[Aa+1]=ra>>>8;return Aa+2};c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(ra,Aa,V){ra=+ra;Aa>>>=0;V||F(this,ra,Aa,2,65535,0);this[Aa]=ra>>>8;this[Aa+1]=ra&255;return Aa+2};c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(ra,Aa,V){ra=+ra;Aa>>>=0;V||F(this,ra,Aa,4,4294967295,0);this[Aa+3]=ra>>>24;this[Aa+2]=ra>>>16;this[Aa+1]=ra>>>8;this[Aa]=ra&
255;return Aa+4};c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(ra,Aa,V){ra=+ra;Aa>>>=0;V||F(this,ra,Aa,4,4294967295,0);this[Aa]=ra>>>24;this[Aa+1]=ra>>>16;this[Aa+2]=ra>>>8;this[Aa+3]=ra&255;return Aa+4};c.prototype.writeBigUInt64LE=Zb(function(ra,Aa=0){return L(this,ra,Aa,BigInt(0),BigInt("0xffffffffffffffff"))});c.prototype.writeBigUInt64BE=Zb(function(ra,Aa=0){return G(this,ra,Aa,BigInt(0),BigInt("0xffffffffffffffff"))});c.prototype.writeIntLE=function(ra,Aa,V,ea){ra=+ra;Aa>>>=0;
ea||(ea=Math.pow(2,8*V-1),F(this,ra,Aa,V,ea-1,-ea));ea=0;let Mb=1,U=0;for(this[Aa]=ra&255;++ea<V&&(Mb*=256);)0>ra&&0===U&&0!==this[Aa+ea-1]&&(U=1),this[Aa+ea]=(ra/Mb>>0)-U&255;return Aa+V};c.prototype.writeIntBE=function(ra,Aa,V,ea){ra=+ra;Aa>>>=0;ea||(ea=Math.pow(2,8*V-1),F(this,ra,Aa,V,ea-1,-ea));ea=V-1;let Mb=1,U=0;for(this[Aa+ea]=ra&255;0<=--ea&&(Mb*=256);)0>ra&&0===U&&0!==this[Aa+ea+1]&&(U=1),this[Aa+ea]=(ra/Mb>>0)-U&255;return Aa+V};c.prototype.writeInt8=function(ra,Aa,V){ra=+ra;Aa>>>=0;V||
F(this,ra,Aa,1,127,-128);0>ra&&(ra=255+ra+1);this[Aa]=ra&255;return Aa+1};c.prototype.writeInt16LE=function(ra,Aa,V){ra=+ra;Aa>>>=0;V||F(this,ra,Aa,2,32767,-32768);this[Aa]=ra&255;this[Aa+1]=ra>>>8;return Aa+2};c.prototype.writeInt16BE=function(ra,Aa,V){ra=+ra;Aa>>>=0;V||F(this,ra,Aa,2,32767,-32768);this[Aa]=ra>>>8;this[Aa+1]=ra&255;return Aa+2};c.prototype.writeInt32LE=function(ra,Aa,V){ra=+ra;Aa>>>=0;V||F(this,ra,Aa,4,2147483647,-2147483648);this[Aa]=ra&255;this[Aa+1]=ra>>>8;this[Aa+2]=ra>>>16;
this[Aa+3]=ra>>>24;return Aa+4};c.prototype.writeInt32BE=function(ra,Aa,V){ra=+ra;Aa>>>=0;V||F(this,ra,Aa,4,2147483647,-2147483648);0>ra&&(ra=4294967295+ra+1);this[Aa]=ra>>>24;this[Aa+1]=ra>>>16;this[Aa+2]=ra>>>8;this[Aa+3]=ra&255;return Aa+4};c.prototype.writeBigInt64LE=Zb(function(ra,Aa=0){return L(this,ra,Aa,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});c.prototype.writeBigInt64BE=Zb(function(ra,Aa=0){return G(this,ra,Aa,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});
c.prototype.writeFloatLE=function(ra,Aa,V){return ha(this,ra,Aa,!0,V)};c.prototype.writeFloatBE=function(ra,Aa,V){return ha(this,ra,Aa,!1,V)};c.prototype.writeDoubleLE=function(ra,Aa,V){return Ha(this,ra,Aa,!0,V)};c.prototype.writeDoubleBE=function(ra,Aa,V){return Ha(this,ra,Aa,!1,V)};c.prototype.copy=function(ra,Aa,V,ea){if(!c.isBuffer(ra))throw new TypeError("argument should be a Buffer");V||(V=0);ea||0===ea||(ea=this.length);Aa>=ra.length&&(Aa=ra.length);Aa||(Aa=0);0<ea&&ea<V&&(ea=V);if(ea===V||
0===ra.length||0===this.length)return 0;if(0>Aa)throw new RangeError("targetStart out of bounds");if(0>V||V>=this.length)throw new RangeError("Index out of range");if(0>ea)throw new RangeError("sourceEnd out of bounds");ea>this.length&&(ea=this.length);ra.length-Aa<ea-V&&(ea=ra.length-Aa+V);const Mb=ea-V;this===ra&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(Aa,V,ea):Uint8Array.prototype.set.call(ra,this.subarray(V,ea),Aa);return Mb};c.prototype.fill=function(ra,Aa,V,ea){if("string"===
typeof ra){"string"===typeof Aa?(ea=Aa,Aa=0,V=this.length):"string"===typeof V&&(ea=V,V=this.length);if(void 0!==ea&&"string"!==typeof ea)throw new TypeError("encoding must be a string");if("string"===typeof ea&&!c.isEncoding(ea))throw new TypeError("Unknown encoding: "+ea);if(1===ra.length){var Mb=ra.charCodeAt(0);if("utf8"===ea&&128>Mb||"latin1"===ea)ra=Mb}}else"number"===typeof ra?ra&=255:"boolean"===typeof ra&&(ra=Number(ra));if(0>Aa||this.length<Aa||this.length<V)throw new RangeError("Out of range index");
if(V<=Aa)return this;Aa>>>=0;V=void 0===V?this.length:V>>>0;ra||(ra=0);if("number"===typeof ra)for(ea=Aa;ea<V;++ea)this[ea]=ra;else{Mb=c.isBuffer(ra)?ra:c.from(ra,ea);const U=Mb.length;if(0===U)throw new TypeError('The value "'+ra+'" is invalid for argument "value"');for(ea=0;ea<V-Aa;++ea)this[ea+Aa]=Mb[ea%U]}return this};const $a={};Va("ERR_BUFFER_OUT_OF_BOUNDS",function(ra){return ra?`${ra} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Va("ERR_INVALID_ARG_TYPE",
function(ra,Aa){return`The "${ra}" argument must be of type number. Received type ${typeof Aa}`},TypeError);Va("ERR_OUT_OF_RANGE",function(ra,Aa,V){ra=`The value of "${ra}" is out of range.`;let ea=V;if(Number.isInteger(V)&&Math.abs(V)>2**32)ea=hc(String(V));else if("bigint"===typeof V){ea=String(V);if(V>BigInt(2)**BigInt(32)||V<-(BigInt(2)**BigInt(32)))ea=hc(ea);ea+="n"}return ra+` It must be ${Aa}. Received ${ea}`},RangeError);const dd=/[^+/0-9A-Za-z-_]/g,Kd=function(){const ra=Array(256);for(let Aa=
0;16>Aa;++Aa){const V=16*Aa;for(let ea=0;16>ea;++ea)ra[V+ea]="0123456789abcdef"[Aa]+"0123456789abcdef"[ea]}return ra}();return Gs}();Cj.Buffer;Cj.SlowBuffer;Cj.INSPECT_MAX_BYTES;Cj.kMaxLength;var fG=Cj.Buffer,vU=Object.freeze({__proto__:null,"default":Cj,Buffer:fG,INSPECT_MAX_BYTES:Cj.INSPECT_MAX_BYTES,kMaxLength:Cj.kMaxLength}),eo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,wU={},e5=Cj.Buffer,xl=fk,f5=Object.prototype.hasOwnProperty,g5="start end gt gte lt lte".split(" ");
Zj.prototype.open=function(b,c){var g=this||eo,a=(this||eo).status;"function"===typeof b&&(c=b);if("function"!==typeof c)throw Error("open() requires a callback argument");if("object"!==typeof b||null===b)b={};b.createIfMissing=!1!==b.createIfMissing;b.errorIfExists=!!b.errorIfExists;(this||eo).status="opening";this._open(b,function(d){if(d)return g.status=a,c(d);g.status="open";c()})};Zj.prototype._open=function(b,c){xl.nextTick(c)};Zj.prototype.close=function(b){var c=this||eo,g=(this||eo).status;
if("function"!==typeof b)throw Error("close() requires a callback argument");(this||eo).status="closing";this._close(function(a){if(a)return c.status=g,b(a);c.status="closed";b()})};Zj.prototype._close=function(b){xl.nextTick(b)};Zj.prototype.get=function(b,c,g){"function"===typeof c&&(g=c);if("function"!==typeof g)throw Error("get() requires a callback argument");var a=this._checkKey(b);if(a)return xl.nextTick(g,a);b=this._serializeKey(b);if("object"!==typeof c||null===c)c={};c.asBuffer=!1!==c.asBuffer;
this._get(b,c,g)};Zj.prototype._get=function(b,c,g){xl.nextTick(function(){g(Error("NotFound"))})};Zj.prototype.put=function(b,c,g,a){"function"===typeof g&&(a=g);if("function"!==typeof a)throw Error("put() requires a callback argument");var d=this._checkKey(b)||this._checkValue(c);if(d)return xl.nextTick(a,d);b=this._serializeKey(b);c=this._serializeValue(c);if("object"!==typeof g||null===g)g={};this._put(b,c,g,a)};Zj.prototype._put=function(b,c,g,a){xl.nextTick(a)};Zj.prototype.del=function(b,c,
g){"function"===typeof c&&(g=c);if("function"!==typeof g)throw Error("del() requires a callback argument");var a=this._checkKey(b);if(a)return xl.nextTick(g,a);b=this._serializeKey(b);if("object"!==typeof c||null===c)c={};this._del(b,c,g)};Zj.prototype._del=function(b,c,g){xl.nextTick(g)};Zj.prototype.batch=function(b,c,g){if(!arguments.length)return this._chainedBatch();"function"===typeof c&&(g=c);"function"===typeof b&&(g=b);if("function"!==typeof g)throw Error("batch(array) requires a callback argument");
if(!Array.isArray(b))return xl.nextTick(g,Error("batch(array) requires an array argument"));if(0===b.length)return xl.nextTick(g);if("object"!==typeof c||null===c)c={};for(var a=Array(b.length),d=0;d<b.length;d++){if("object"!==typeof b[d]||null===b[d])return xl.nextTick(g,Error("batch(array) element must be an object and not `null`"));var f=Zu(b[d]);if("put"!==f.type&&"del"!==f.type)return xl.nextTick(g,Error("`type` must be 'put' or 'del'"));var k=this._checkKey(f.key);if(k)return xl.nextTick(g,
k);f.key=this._serializeKey(f.key);if("put"===f.type){if(k=this._checkValue(f.value))return xl.nextTick(g,k);f.value=this._serializeValue(f.value)}a[d]=f}this._batch(a,c,g)};Zj.prototype._batch=function(b,c,g){xl.nextTick(g)};Zj.prototype._setupIteratorOptions=function(b){var c=this||eo,g={},a;for(a in b)if(f5.call(b,a)){var d=b[a];-1!==g5.indexOf(a)&&(d=c._serializeKey(d));g[a]=d}b=g;b.reverse=!!b.reverse;b.keys=!1!==b.keys;b.values=!1!==b.values;b.limit="limit"in b?b.limit:-1;b.keyAsBuffer=!1!==
b.keyAsBuffer;b.valueAsBuffer=!1!==b.valueAsBuffer;return b};Zj.prototype.iterator=function(b){if("object"!==typeof b||null===b)b={};b=this._setupIteratorOptions(b);return this._iterator(b)};Zj.prototype._iterator=function(b){return new tU(this||eo)};Zj.prototype._chainedBatch=function(){return new d5(this||eo)};Zj.prototype._serializeKey=function(b){return b};Zj.prototype._serializeValue=function(b){return b};Zj.prototype._checkKey=function(b){if(null===b||void 0===b)return Error("key cannot be `null` or `undefined`");
if(e5.isBuffer(b)&&0===b.length)return Error("key cannot be an empty Buffer");if(""===b)return Error("key cannot be an empty String");if(Array.isArray(b)&&0===b.length)return Error("key cannot be an empty Array")};Zj.prototype._checkValue=function(b){if(null===b||void 0===b)return Error("value cannot be `null` or `undefined`")};wU=Zj;var h5=wU;var nn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,xU={},mN=tU;Dj(hu,mN);hu.prototype.setDb=function(b){var c=(this||nn)._iterator=
b.iterator((this||nn)._options);(this||nn)._operations.forEach(function(g){c[g.method].apply(c,g.args)})};hu.prototype._operation=function(b,c){if((this||nn)._iterator)return(this||nn)._iterator[b].apply((this||nn)._iterator,c);(this||nn)._operations.push({method:b,args:c})};["next","end"].forEach(function(b){hu.prototype["_"+b]=function(){this._operation(b,arguments)}});hu.prototype.seek=function(){this._operation("seek",arguments)};xU=hu;var jl="undefined"!==typeof globalThis?globalThis:"undefined"!==
typeof self?self:global,gB={},nN=h5,qN=xU,pN=["put","get","del","batch"];Dj(iu,nN);iu.prototype._open=function(b,c){var g=this||jl;(this||jl)._db.open(b,function(a){if(a)return c(a);g._operations.forEach(function(d){g._db[d.method].apply(g._db,d.args)});g._operations=[];g._iterators.forEach(function(d){d.setDb(g._db)});g._iterators=[];rZ(g);c()})};iu.prototype._close=function(b){var c=this||jl;(this||jl)._db.close(function(g){if(g)return b(g);oN(c);b()})};iu.prototype._serializeKey=function(b){return b};
iu.prototype._serializeValue=function(b){return b};gB=iu;gB.DeferredIterator=qN;var i5=gB;gB.DeferredIterator;var tN={},sN=!1,jE={},uN=!1,lE="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,j5={},DZ=j5=function(b,c){if(kE("noDeprecation"))return b;var g=!1;return function(){if(!g){if(kE("throwDeprecation"))throw Error(c);kE("traceDeprecation")?console.trace(c):console.warn(c);g=!0}return b.apply(this||lE,arguments)}},Nx={},hB=Cj,fo=hB.Buffer;fo.from&&fo.alloc&&fo.allocUnsafe&&
fo.allocUnsafeSlow?Nx=hB:(vN(hB,Nx),Nx.Buffer=Yr);Yr.prototype=Object.create(fo.prototype);vN(fo,Yr);Yr.from=function(b,c,g){if("number"===typeof b)throw new TypeError("Argument must not be a number");return fo(b,c,g)};Yr.alloc=function(b,c,g){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=fo(b);void 0!==c?"string"===typeof g?b.fill(c,g):b.fill(c):b.fill(0);return b};Yr.allocUnsafe=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return fo(b)};
Yr.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return hB.SlowBuffer(b)};var k5=Nx;Nx.Buffer;var rE={},mE=k5.Buffer,wN=mE.isEncoding||function(b){b=""+b;switch(b&&b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};rE.StringDecoder=Aw;Aw.prototype.write=function(b){if(0===b.length)return"";if(this.lastNeed){var c=
this.fillLast(b);if(void 0===c)return"";var g=this.lastNeed;this.lastNeed=0}else g=0;return g<b.length?c?c+this.text(b,g):this.text(b,g):c||""};Aw.prototype.end=function(b){b=b&&b.length?this.write(b):"";return this.lastNeed?b+"\ufffd":b};Aw.prototype.text=function(b,c){var g=AZ(this,b,c);if(!this.lastNeed)return b.toString("utf8",c);this.lastTotal=g;g=b.length-(g-this.lastNeed);b.copy(this.lastChar,0,g);return b.toString("utf8",c,g)};Aw.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length);this.lastNeed-=b.length};var yN={},xN=!1,AN={},zN=!1,DN=Object.freeze({}),CN={},BN=!1,GN={},FN=!1,JN={},IN=!1,pE={},LN=!1,EZ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,qE={},MN=!1,PN={},ON=!1,sE={},QN=!1,GZ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,tE={},SN=!1,
SH={},yU=!1,zU={},AU=!1,jm={},BU=!1;BU||(BU=!0,jm=jm=NN(),jm.Stream=jm,jm.Readable=jm,jm.Writable=KN(),jm.Duplex=ku(),jm.Transform=RN(),jm.PassThrough=function(){function b(g){if(!(this instanceof b))return new b(g);c.call(this,g)}if(yU)return SH;yU=!0;SH=b;var c=RN();Dj(b,c);b.prototype._transform=function(g,a,d){d(null,g)};return SH}(),jm.finished=oE(),jm.pipeline=function(){function b(q){var r=!1;return function(){r||(r=!0,q.apply(void 0,arguments))}}function c(q){if(q)throw q;}function g(q,r,
t,w){w=b(w);var x=!1;q.on("close",function(){x=!0});void 0===f&&(f=oE());f(q,{readable:r,writable:t},function(D){if(D)return w(D);x=!0;w()});var B=!1;return function(D){if(!x&&!B){B=!0;if(q.setHeader&&"function"===typeof q.abort)return q.abort();if("function"===typeof q.destroy)return q.destroy();w(D||new p("pipe"))}}}function a(q){q()}function d(q,r){return q.pipe(r)}if(AU)return zU;AU=!0;var f,k=ju().codes,n=k.ERR_MISSING_ARGS,p=k.ERR_STREAM_DESTROYED;return zU=function(){for(var q=arguments.length,
r=Array(q),t=0;t<q;t++)r[t]=arguments[t];var w=r.length?"function"!==typeof r[r.length-1]?c:r.pop():c;Array.isArray(r[0])&&(r=r[0]);if(2>r.length)throw new n("streams");var x,B=r.map(function(D,F){var L=F<r.length-1;return g(D,L,0<F,function(G){x||(x=G);G&&B.forEach(a);L||(B.forEach(a),w(x))})});return r.reduce(d)}}());var zo=jm;zo.Stream;zo.Readable;zo.Writable;zo.Duplex;zo.Transform;zo.PassThrough;zo.finished;zo.pipeline;var on="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,CU={},l5=Dj,TN=zo.Readable,HZ=Zu;CU=lu;l5(lu,TN);lu.prototype._read=function(){var b=this||on,c=(this||on)._options;(this||on).destroyed||(this||on)._iterator.next(function(g,a,d){if(!b.destroyed){if(g)return b.destroy(g);void 0===a&&void 0===d?b.push(null):!1!==c.keys&&!1===c.values?b.push(a):!1===c.keys&&!1!==c.values?b.push(d):b.push({key:a,value:d})}})};lu.prototype._destroy=function(b,c){(this||on)._iterator.end(function(g){c(b||g)})};var m5=CU,iB={};(function(b,c,g){iB?iB=g():c[b]=
g()})("prr",iB,function(){var b="function"==typeof Object.defineProperty?function(g,a,d){Object.defineProperty(g,a,d);return g}:function(g,a,d){g[a]=d.value;return g},c=function(g,a){var d="object"==typeof a,f=!d&&"string"==typeof a,k=function(n){return d?!!a[n]:f?-1<a.indexOf(n[0]):!1};return{enumerable:k("enumerable"),configurable:k("configurable"),writable:k("writable"),value:g}};return function(g,a,d,f){var k;f=c(d,f);if("object"==typeof a){for(k in a)Object.hasOwnProperty.call(a,k)&&(f.value=
a[k],b(g,k,f));return g}return b(g,a,f)}});var ik="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,n5={},IZ=iB;uE.prototype=Error();var o5=n5=function(b){var c=function(g,a){return JZ(b,g,a)};return{CustomError:uE,FilesystemError:c("FilesystemError"),createError:c}},yl={},p5=yl.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},
{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},
{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",
description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},
{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},
{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},
{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},
{errno:52,code:"EXDEV",description:"cross-device link not permitted"},{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];yl.errno={};yl.code={};p5.forEach(function(b){yl.errno[b.errno]=
b;yl.code[b.code]=b});yl.custom=o5(yl);yl.create=yl.custom.createError;yl.errno;yl.code;yl.custom;yl.create;yl.all;var TH={},Hs=yl.create,Is=Hs("LevelUPError"),UH=Hs("NotFoundError",Is);UH.prototype.notFound=!0;UH.prototype.status=404;var Js=TH={LevelUPError:Is,InitializationError:Hs("InitializationError",Is),OpenError:Hs("OpenError",Is),ReadError:Hs("ReadError",Is),WriteError:Hs("WriteError",Is),NotFoundError:UH,EncodingError:Hs("EncodingError",Is)};TH.InitializationError;TH.LevelUPError;var q5=
{},Ks=q5=function(){var b,c=new Promise(function(g,a){b=function(d,f){d?a(d):g(f)}});b.promise=c;return b};var Ox=function(b,c){return"function"===typeof b?b:c};var DU=function(b){return"object"===Jc(b)&&null!==b?b:{}};var wk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,r5={},Px=Js.WriteError;Bw.prototype.put=function(b,c){try{(this||wk).batch.put(b,c)}catch(g){throw new Px(g);}(this||wk).ops.push({type:"put",key:b,value:c});(this||wk).length++;return this||wk};
Bw.prototype.del=function(b){try{(this||wk).batch.del(b)}catch(c){throw new Px(c);}(this||wk).ops.push({type:"del",key:b});(this||wk).length++;return this||wk};Bw.prototype.clear=function(){try{(this||wk).batch.clear()}catch(b){throw new Px(b);}(this||wk).ops=[];(this||wk).length=0;return this||wk};Bw.prototype.write=function(b,c){var g=(this||wk)._levelup,a=(this||wk).ops;c=Ox(b,c);if(!c){c=Ks();var d=c.promise}b=DU(b);try{(this||wk).batch.write(b,function(f){if(f)return c(new Px(f));g.emit("batch",
a);c()})}catch(f){throw new Px(f);}return d};var s5=r5=Bw,VZ={assign:VN,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:VN})}},EU=Object.prototype.toString,FU=function(b){var c=EU.call(b),g="[object Arguments]"===c;return g||(g="[object Array]"!==c&&null!==b&&"object"==typeof b&&"number"==typeof b.length&&0<=b.length&&"[object Function]"===EU.call(b.callee)),g};if(!Object.keys){var jB=Object.prototype.hasOwnProperty,GU=Object.prototype.toString,
HU=Object.prototype.propertyIsEnumerable,t5=!HU.call({toString:null},"toString"),u5=HU.call(function(){},"prototype"),kB="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),VH=function(b){var c=b.constructor;return c&&c.prototype===b},v5={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,
$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},w5=function(){if("undefined"==typeof window)return!1;for(var b in window)try{if(!v5["$"+b]&&jB.call(window,b)&&null!==window[b]&&"object"==typeof window[b])try{VH(window[b])}catch(c){return!0}}catch(c){return!0}return!1}();var x5=function(b){var c=null!==b&&"object"==typeof b,g="[object Function]"===GU.call(b),a=FU(b),d=c&&"[object String]"===GU.call(b),f=
[];if(!c&&!g&&!a)throw new TypeError("Object.keys called on a non-object");c=u5&&g;if(d&&0<b.length&&!jB.call(b,0))for(d=0;d<b.length;++d)f.push(String(d));if(a&&0<b.length)for(a=0;a<b.length;++a)f.push(String(a));else for(var k in b)c&&"prototype"===k||!jB.call(b,k)||f.push(String(k));if(t5){if("undefined"!=typeof window&&w5)try{var n=VH(b)}catch(p){n=!1}else n=VH(b);for(a=0;a<kB.length;++a)n&&"constructor"===kB[a]||!jB.call(b,kB[a])||f.push(kB[a])}return f}}var y5=x5,z5=Array.prototype.slice,IU=
Object.keys,lB=IU?function(b){return IU(b)}:y5,JU=Object.keys;lB.shim=function(){Object.keys?function(){var b=Object.keys(arguments);return b&&b.length===arguments.length}(1,2)||(Object.keys=function(b){return FU(b)?JU(z5.call(b)):JU(b)}):Object.keys=lB;return Object.keys||lB};var A5="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),B5=Object.prototype.toString,C5=Array.prototype.concat,WH=Object.defineProperty,KU=WH&&function(){var b={};try{for(var c in WH(b,"x",{enumerable:!1,value:b}),
b)return!1;return b.x===b}catch(g){return!1}}(),Qx=function(b,c){var g=2<arguments.length?arguments[2]:{},a=lB(c);A5&&(a=C5.call(a,Object.getOwnPropertySymbols(c)));for(var d=0;d<a.length;d+=1){var f=void 0,k=b,n=a[d],p=c[a[d]],q=g[a[d]];(!(n in k)||"function"==typeof(f=q)&&"[object Function]"===B5.call(f)&&q())&&(KU?WH(k,n,{configurable:!0,enumerable:!1,value:p,writable:!0}):k[n]=p)}};Qx.supportsDescriptors=!!KU;var LU=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global).Symbol,
D5=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var b={},c=Symbol("test"),g=Object(c);if("string"==typeof c||"[object Symbol]"!==Object.prototype.toString.call(c)||"[object Symbol]"!==Object.prototype.toString.call(g))return!1;for(c in b[c]=42,b)return!1;if("function"==typeof Object.keys&&0!==Object.keys(b).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(b).length)return!1;
g=Object.getOwnPropertySymbols(b);return 1!==g.length||g[0]!==c||!Object.prototype.propertyIsEnumerable.call(b,c)||"function"==typeof Object.getOwnPropertyDescriptor&&(b=Object.getOwnPropertyDescriptor(b,c),42!==b.value||!0!==b.enumerable)?!1:!0},XH=Array.prototype.slice,E5=Object.prototype.toString,F5=function(b){var c=this;if("function"!=typeof c||"[object Function]"!==E5.call(c))throw new TypeError("Function.prototype.bind called on incompatible "+c);for(var g,a=XH.call(arguments,1),d=Math.max(0,
c.length-a.length),f=[],k=0;k<d;k++)f.push("$"+k);if(g=Function("binder","return function ("+f.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof g){var n=c.apply(this,a.concat(XH.call(arguments)));return Object(n)===n?n:this}return c.apply(b,a.concat(XH.call(arguments)))}),c.prototype)d=function(){},d.prototype=c.prototype,g.prototype=new d,d.prototype=null;return g},YH=Function.prototype.bind||F5,Rx=TypeError,Ls=Object.getOwnPropertyDescriptor;if(Ls)try{Ls({},"")}catch(b){Ls=
null}var ZH=function(){throw new Rx;},G5=Ls?function(){try{return arguments.callee,ZH}catch(b){try{return Ls(arguments,"callee").get}catch(c){return ZH}}}():ZH,Ms="function"==typeof LU&&"function"==typeof Symbol&&"symbol"==typeof LU("foo")&&"symbol"==typeof Symbol("bar")&&D5(),Ns=Object.getPrototypeOf||function(b){return b.__proto__},$H="undefined"==typeof Uint8Array?void 0:Ns(Uint8Array),aI={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==
typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":Ms?Ns([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,
"%AsyncIteratorPrototype%":void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,
"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,
"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,
"%IteratorPrototype%":Ms?Ns(Ns([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%JSONParse%":"object"==typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&Ms?Ns((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,
"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,
"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&Ms?Ns((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:
Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":Ms?Ns(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":Ms?Symbol:void 0,"%SymbolPrototype%":Ms?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":G5,"%TypedArray%":$H,
"%TypedArrayPrototype%":$H?$H.prototype:void 0,"%TypeError%":Rx,"%TypeErrorPrototype%":Rx.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,
"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==
typeof WeakSet?void 0:WeakSet.prototype},MU=YH.call(Function.call,String.prototype.replace),H5=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,I5=/\\(\\)?/g,J5=function(b){var c=[];return MU(b,H5,function(g,a,d,f){c[c.length]=d?MU(f,I5,"$1"):a||g}),c},NU,OU=function(b,c){if("string"!=typeof b||0===b.length)throw new TypeError("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof c)throw new TypeError('"allowMissing" argument must be a boolean');
var g=J5(b);var a="%"+(0<g.length?g[0]:"")+"%";if(!(a in aI))throw new SyntaxError("intrinsic "+a+" does not exist!");if(void 0===aI[a]&&!c)throw new Rx("intrinsic "+a+" exists, but is not available. Please file an issue!");a=aI[a];for(var d=1;d<g.length;d+=1)if(null!=a)if(Ls&&d+1>=g.length){var f=Ls(a,g[d]);if(!(c||g[d]in a))throw new Rx("base intrinsic for "+b+" exists, but the property is not available.");a=f?f.get||f.value:a[g[d]]}else a=a[g[d]];return a}("%Function%"),K5=OU.apply,L5=OU.call;
(NU=function(){return YH.apply(L5,arguments)}).apply=function(){return YH.apply(K5,arguments)};var bI,mB,M5=(bI=function(b,c){return 0===b&&0===c?1/b==1/c:b===c||!(b==b||c==c)},bI),N5=(mB=function(){return"function"==typeof Object.is?Object.is:M5},mB),PU=NU(mB(),Object);Qx(PU,{getPolyfill:mB,implementation:bI,shim:function(){var b=N5();return Qx(Object,{is:b},{is:function(){return Object.is!==b}}),b}});var qO=PU;var QU=function(b){return b!=b};var nB,O5=QU,P5=(nB=function(){return Number.isNaN&&Number.isNaN(NaN)&&
!Number.isNaN("a")?Number.isNaN:O5},Qx),Q5=QU,RU=nB();Qx(RU,{getPolyfill:nB,implementation:Q5,shim:function(){var b=nB();return P5(Number,{isNaN:b},{isNaN:function(){return Number.isNaN!==b}}),b}});var vE={},XN=!1,ZN={},YN=!1,MZ=void 0!==/a/g.flags,Wz=function(b){var c=[];return b.forEach(function(g){return c.push(g)}),c},nO=function(b){var c=[];return b.forEach(function(g,a){return c.push([a,g])}),c},bO=Object.is?Object.is:qO,Sz=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},
yE=Number.isNaN?Number.isNaN:RU,Dw=xE(Object.prototype.hasOwnProperty),Vz=xE(Object.prototype.propertyIsEnumerable),cO=xE(Object.prototype.toString),zl=tf.types,RZ=zl.isAnyArrayBuffer,OZ=zl.isArrayBufferView,dO=zl.isDate,Tz=zl.isMap,eO=zl.isRegExp,Uz=zl.isSet,NZ=zl.isNativeError,SZ=zl.isBoxedPrimitive,fO=zl.isNumberObject,gO=zl.isStringObject,hO=zl.isBooleanObject,iO=zl.isBigIntObject,TZ=zl.isSymbolObject,PZ=zl.isFloat32Array,QZ=zl.isFloat64Array,oO={isDeepEqual:function(b,c){return Fm(b,c,!1)},isDeepStrictEqual:function(b,
c){return Fm(b,c,!0)}},zE={},pO=!1,kh=wE();kh.AssertionError;kh.deepEqual;kh.deepStrictEqual;kh.doesNotReject;kh.doesNotThrow;kh.equal;kh.fail;kh.ifError;kh.notDeepEqual;kh.notDeepStrictEqual;kh.notEqual;kh.notStrictEqual;kh.ok;kh.rejects;kh.strict;kh.strictEqual;kh.throws;kh.AssertionError;kh.deepEqual;kh.deepStrictEqual;kh.doesNotReject;kh.doesNotThrow;kh.equal;kh.fail;kh.ifError;kh.notDeepEqual;kh.notDeepStrictEqual;kh.notEqual;kh.notStrictEqual;kh.ok;kh.rejects;kh.strict;kh.strictEqual;kh.throws;
kh.AssertionError;kh.deepEqual;kh.deepStrictEqual;kh.doesNotReject;kh.doesNotThrow;kh.equal;kh.fail;kh.ifError;kh.notDeepEqual;kh.notDeepStrictEqual;kh.notEqual;kh.notStrictEqual;kh.ok;kh.rejects;kh.strict;kh.strictEqual;kh.throws;var Ri="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,R5={},Yz=fk,Xz=Rj.EventEmitter,S5=tf.inherits,rO=i5,XZ=kh,Ew=DU,$u=Js.WriteError,AE=Js.ReadError,T5=Js.NotFoundError,U5=Js.OpenError,WZ=Js.InitializationError;uj.prototype.emit=Xz.prototype.emit;
uj.prototype.once=Xz.prototype.once;S5(uj,Xz);uj.prototype.open=function(b,c){var g=this||Ri;"function"===typeof b&&(c=b,b=null);if(!c){c=Ks();var a=c.promise}b||(b=(this||Ri).options);if(this.isOpen())return Yz.nextTick(c,null,g),a;if(this._isOpening())return this.once("open",function(){c(null,g)}),a;this.emit("opening");(this||Ri).db.open(b,function(d){if(d)return c(new U5(d));g.db=g._db;c(null,g);g.emit("open");g.emit("ready")});return a};uj.prototype.close=function(b){var c=this||Ri;if(!b){b=
Ks();var g=b.promise}if(this.isOpen())(this||Ri).db.close(function(){c.emit("closed");b.apply(null,arguments)}),this.emit("closing"),(this||Ri).db=new rO((this||Ri)._db);else if(this.isClosed())Yz.nextTick(b);else if("closing"===(this||Ri).db.status)this.once("closed",b);else if(this._isOpening())this.once("open",function(){c.close(b)});return g};uj.prototype.isOpen=function(){return"open"===(this||Ri).db.status};uj.prototype._isOpening=function(){return"opening"===(this||Ri).db.status};uj.prototype.isClosed=
function(){return/^clos|new/.test((this||Ri).db.status)};uj.prototype.get=function(b,c,g){if(null===b||void 0===b)throw new AE("get() requires a key argument");g=Ox(c,g);if(!g){g=Ks();var a=g.promise}if(Zz(this||Ri,g))return a;c=Ew(c);(this||Ri).db.get(b,c,function(d,f){if(d)return d=/notfound/i.test(d)||d.notFound?new T5("Key not found in database ["+b+"]",d):new AE(d),g(d);g(null,f)});return a};uj.prototype.put=function(b,c,g,a){if(null===b||void 0===b)throw new $u("put() requires a key argument");
var d=this||Ri;a=Ox(g,a);if(!a){a=Ks();var f=a.promise}if(Zz(this||Ri,a))return f;g=Ew(g);(this||Ri).db.put(b,c,g,function(k){if(k)return a(new $u(k));d.emit("put",b,c);a()});return f};uj.prototype.del=function(b,c,g){if(null===b||void 0===b)throw new $u("del() requires a key argument");var a=this||Ri;g=Ox(c,g);if(!g){g=Ks();var d=g.promise}if(Zz(this||Ri,g))return d;c=Ew(c);(this||Ri).db.del(b,c,function(f){if(f)return g(new $u(f));a.emit("del",b);g()});return d};uj.prototype.batch=function(b,c,
g){if(!arguments.length)return new s5(this||Ri);if(!Array.isArray(b))throw new $u("batch() requires an array argument");var a=this||Ri;g=Ox(c,g);if(!g){g=Ks();var d=g.promise}if(Zz(this||Ri,g))return d;c=Ew(c);(this||Ri).db.batch(b,c,function(f){if(f)return g(new $u(f));a.emit("batch",b);g()});return d};uj.prototype.iterator=function(b){return(this||Ri).db.iterator(b)};uj.prototype.readStream=uj.prototype.createReadStream=function(b){b=Zu({keys:!0,values:!0},b);"number"!==typeof b.limit&&(b.limit=
-1);return new m5((this||Ri).db.iterator(b),b)};uj.prototype.keyStream=uj.prototype.createKeyStream=function(b){return this.createReadStream(Zu(b,{keys:!0,values:!1}))};uj.prototype.valueStream=uj.prototype.createValueStream=function(b){return this.createReadStream(Zu(b,{keys:!1,values:!0}))};uj.prototype.toString=function(){return"LevelUP"};uj.errors=Js;var V5=R5=uj.default=uj,oi={},W5=Cj.Buffer;oi.compare=function(b,c){if(W5.isBuffer(b)){for(var g=Math.min(b.length,c.length),a=0;a<g;a++){var d=
b[a]-c[a];if(d)return d}return b.length-c.length}return b<c?-1:b>c?1:0};var X5=oi.lowerBoundKey=function(b){return go(b,"gt")||go(b,"gte")||go(b,"min")||(b.reverse?go(b,"end"):go(b,"start"))||void 0},cI=oi.lowerBound=function(b,c){var g=X5(b);return g?b[g]:c},dI=oi.lowerBoundInclusive=function(b){return Object.hasOwnProperty.call(b,"gt")?!1:!0},eI=oi.upperBoundInclusive=function(b){return Object.hasOwnProperty.call(b,"lt")?!1:!0},Y5=oi.lowerBoundExclusive=function(b){return!dI(b)},Z5=oi.upperBoundExclusive=
function(b){return!eI(b)},$5=oi.upperBoundKey=function(b){return go(b,"lt")||go(b,"lte")||go(b,"max")||(b.reverse?go(b,"start"):go(b,"end"))||void 0},fI=oi.upperBound=function(b,c){var g=$5(b);return g?b[g]:c};oi.start=function(b,c){return b.reverse?fI(b,c):cI(b,c)};oi.end=function(b,c){return b.reverse?cI(b,c):fI(b,c)};oi.startInclusive=function(b){return b.reverse?eI(b):dI(b)};oi.endInclusive=function(b){return b.reverse?dI(b):eI(b)};oi.toLtgt=function(b,c,g,a,d){c=c||{};g=g||YZ;var f=3<arguments.length,
k=oi.lowerBoundKey(b),n=oi.upperBoundKey(b);k?"gt"===k?c.gt=g(b.gt,!1):c.gte=g(b[k],!1):f&&(c.gte=g(a,!1));n?"lt"===n?c.lt=g(b.lt,!0):c.lte=g(b[n],!0):f&&(c.lte=g(d,!0));null!=b.reverse&&(c.reverse=!!b.reverse);Object.hasOwnProperty.call(c,"max")&&delete c.max;Object.hasOwnProperty.call(c,"min")&&delete c.min;Object.hasOwnProperty.call(c,"start")&&delete c.start;Object.hasOwnProperty.call(c,"end")&&delete c.end;return c};oi.contains=function(b,c,g){g=g||oi.compare;var a=cI(b);if(void 0!==a&&""!==
a&&(a=g(c,a),0>a||0===a&&Y5(b)))return!1;a=fI(b);return void 0!==a&&""!==a&&(a=g(c,a),0<a||0===a&&Z5(b))?!1:!0};oi.filter=function(b,c){return function(g){return oi.contains(b,g,c)}};oi.compare;oi.start;oi.end;oi.startInclusive;oi.endInclusive;oi.toLtgt;oi.contains;oi.filter;oi.lowerBoundKey;oi.lowerBound;oi.lowerBoundInclusive;oi.upperBoundInclusive;oi.lowerBoundExclusive;oi.upperBoundExclusive;oi.upperBoundKey;oi.upperBound;var Ol={},CE=Cj.Buffer;Ol.utf8=Ol["utf-8"]={encode:function(b){return BE(b)?
b:String(b)},decode:$z,buffer:!1,type:"utf8"};Ol.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"};Ol.binary={encode:function(b){return BE(b)?b:CE.from(b)},decode:$z,buffer:!0,type:"binary"};Ol.none={encode:$z,decode:$z,buffer:!1,type:"id"};Ol.id=Ol.none;"hex ascii base64 ucs2 ucs-2 utf16le utf-16le".split(" ").forEach(function(b){Ol[b]={encode:function(c){return BE(c)?c:CE.from(c,b)},decode:function(c){return c.toString(b)},buffer:!0,type:b}});Ol.utf8;Ol.json;Ol.binary;Ol.none;
Ol.id;var gp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,SU={},DE=Ol;SU=ul;ul.prototype._encoding=function(b){"string"===typeof b&&(b=DE[b]);b||(b=DE.id);return b};ul.prototype._keyEncoding=function(b,c){return this._encoding(c&&c.keyEncoding||b&&b.keyEncoding||(this||gp).opts.keyEncoding)};ul.prototype._valueEncoding=function(b,c){return this._encoding(c&&(c.valueEncoding||c.encoding)||b&&(b.valueEncoding||b.encoding)||(this||gp).opts.valueEncoding||(this||gp).opts.encoding)};
ul.prototype.encodeKey=function(b,c,g){return this._keyEncoding(c,g).encode(b)};ul.prototype.encodeValue=function(b,c,g){return this._valueEncoding(c,g).encode(b)};ul.prototype.decodeKey=function(b,c){return this._keyEncoding(c).decode(b)};ul.prototype.decodeValue=function(b,c){return this._valueEncoding(c).decode(b)};ul.prototype.encodeBatch=function(b,c){var g=this||gp;return b.map(function(a){var d={type:a.type,key:g.encodeKey(a.key,c,a)};g.keyAsBuffer(c,a)&&(d.keyEncoding="binary");a.prefix&&
(d.prefix=a.prefix);"value"in a&&(d.value=g.encodeValue(a.value,c,a),g.valueAsBuffer(c,a)&&(d.valueEncoding="binary"));return d})};var a6="lt gt lte gte start end".split(" ");ul.prototype.encodeLtgt=function(b){var c=this||gp,g={};Object.keys(b).forEach(function(a){g[a]=-1<a6.indexOf(a)?c.encodeKey(b[a],b):b[a]});return g};ul.prototype.createStreamDecoder=function(b){var c=this||gp;return b.keys&&b.values?function(g,a){return{key:c.decodeKey(g,b),value:c.decodeValue(a,b)}}:b.keys?function(g){return c.decodeKey(g,
b)}:b.values?function(g,a){return c.decodeValue(a,b)}:function(){}};ul.prototype.keyAsBuffer=function(b){return this._keyEncoding(b).buffer};ul.prototype.valueAsBuffer=function(b){return this._valueEncoding(b).buffer};var b6=SU,gI={},TU=!1,av="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Hi=function(){function b(){throw Error("setTimeout has not been defined");}function c(){throw Error("clearTimeout has not been defined");}function g(D){if(q===setTimeout)return setTimeout(D,
0);if((q===b||!q)&&setTimeout)return q=setTimeout,setTimeout(D,0);try{return q(D,0)}catch(F){try{return q.call(null,D,0)}catch(L){return q.call(this||av,D,0)}}}function a(D){if(r===clearTimeout)return clearTimeout(D);if((r===c||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(D);try{return r(D)}catch(F){try{return r.call(null,D)}catch(L){return r.call(this||av,D)}}}function d(){w&&x&&(w=!1,x.length?t=x.concat(t):B=-1,t.length&&f())}function f(){if(!w){var D=g(d);w=!0;for(var F=t.length;F;){x=
t;for(t=[];++B<F;)x&&x[B].run();B=-1;F=t.length}x=null;w=!1;a(D)}}function k(D,F){(this||av).fun=D;(this||av).array=F}function n(){}if(TU)return gI;TU=!0;var p=gI={};try{var q="function"===typeof setTimeout?setTimeout:b}catch(D){q=b}try{var r="function"===typeof clearTimeout?clearTimeout:c}catch(D){r=c}var t=[],w=!1,x,B=-1;p.nextTick=function(D){var F=Array(arguments.length-1);if(1<arguments.length)for(var L=1;L<arguments.length;L++)F[L-1]=arguments[L];t.push(new k(D,F));1!==t.length||w||g(f)};k.prototype.run=
function(){(this||av).fun.apply(null,(this||av).array)};p.title="browser";p.browser=!0;p.env={};p.argv=[];p.version="";p.versions={};p.on=n;p.addListener=n;p.once=n;p.off=n;p.removeListener=n;p.removeAllListeners=n;p.emit=n;p.prependListener=n;p.prependOnceListener=n;p.listeners=function(D){return[]};p.binding=function(D){throw Error("process.binding is not supported");};p.cwd=function(){return"/"};p.chdir=function(D){throw Error("process.chdir is not supported");};p.umask=function(){return 0};return gI}();
Hi.platform="browser";Hi.addListener;Hi.argv;Hi.binding;Hi.browser;Hi.chdir;Hi.cwd;Hi.emit;Hi.env;Hi.listeners;Hi.nextTick;Hi.off;Hi.on;Hi.once;Hi.prependListener;Hi.prependOnceListener;Hi.removeAllListeners;Hi.removeListener;Hi.title;Hi.umask;Hi.version;Hi.versions;for(var d6={byteLength:function(b){b=sO(b);var c=b[1];return 3*(b[0]+c)/4-c},toByteArray:function(b){var c=sO(b);var g=c[0];c=c[1];var a=new c6(3*(g+c)/4-c),d=0,f=0<c?g-4:g;for(g=0;g<f;g+=4){var k=Km[b.charCodeAt(g)]<<18|Km[b.charCodeAt(g+
1)]<<12|Km[b.charCodeAt(g+2)]<<6|Km[b.charCodeAt(g+3)];a[d++]=k>>16&255;a[d++]=k>>8&255;a[d++]=255&k}2===c&&(k=Km[b.charCodeAt(g)]<<2|Km[b.charCodeAt(g+1)]>>4,a[d++]=255&k);1===c&&(k=Km[b.charCodeAt(g)]<<10|Km[b.charCodeAt(g+1)]<<4|Km[b.charCodeAt(g+2)]>>2,a[d++]=k>>8&255,a[d++]=255&k);return a},fromByteArray:function(b){for(var c,g=b.length,a=g%3,d=[],f=0,k=g-a;f<k;f+=16383)d.push(ZZ(b,f,f+16383>k?k:f+16383));1===a?(c=b[g-1],d.push(ho[c>>2]+ho[c<<4&63]+"==")):2===a&&(c=(b[g-2]<<8)+b[g-1],d.push(ho[c>>
10]+ho[c>>4&63]+ho[c<<2&63]+"="));return d.join("")}},ho=[],Km=[],c6="undefined"!=typeof Uint8Array?Uint8Array:Array,hI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bv=0,e6=hI.length;bv<e6;++bv)ho[bv]=hI[bv],Km[hI.charCodeAt(bv)]=bv;Km[45]=62;Km[95]=63;var Lm={},IE=d6,mu={read:function(b,c,g,a,d){var f=8*d-a-1;var k=(1<<f)-1,n=k>>1,p=-7;d=g?d-1:0;var q=g?-1:1,r=b[c+d];d+=q;g=r&(1<<-p)-1;r>>=-p;for(p+=f;0<p;g=256*g+b[c+d],d+=q,p-=8);f=g&(1<<-p)-1;g>>=-p;for(p+=a;0<p;f=256*f+b[c+
d],d+=q,p-=8);if(0===g)g=1-n;else{if(g===k)return f?NaN:1/0*(r?-1:1);f+=Math.pow(2,a);g-=n}return(r?-1:1)*f*Math.pow(2,g-a)},write:function(b,c,g,a,d,f){var k,n,p,q=8*f-d-1,r=(1<<q)-1,t=r>>1,w=23===d?Math.pow(2,-24)-Math.pow(2,-77):0;f=a?0:f-1;a=a?1:-1;var x=0>c||0===c&&0>1/c?1:0;c=Math.abs(c);for(isNaN(c)||c===1/0?(n=isNaN(c)?1:0,k=r):(k=Math.floor(Math.log(c)/Math.LN2),1>c*(p=Math.pow(2,-k))&&(k--,p*=2),2<=(c+=1<=k+t?w/p:w*Math.pow(2,1-t))*p&&(k++,p/=2),k+t>=r?(n=0,k=r):1<=k+t?(n=(c*p-1)*Math.pow(2,
d),k+=t):(n=c*Math.pow(2,t-1)*Math.pow(2,d),k=0));8<=d;b[g+f]=255&n,f+=a,n/=256,d-=8);k=k<<d|n;for(q+=d;0<q;b[g+f]=255&k,f+=a,k/=256,q-=8);b[g+f-a]|=128*x}},UU="function"==typeof Symbol&&"function"==typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;Lm.Buffer=If;Lm.SlowBuffer=function(b){+b!=b&&(b=0);return If.alloc(+b)};Lm.INSPECT_MAX_BYTES=50;Lm.kMaxLength=2147483647;If.TYPED_ARRAY_SUPPORT=function(){try{var b=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,
Uint8Array.prototype),Object.setPrototypeOf(b,c),42===b.foo()}catch(g){return!1}}();If.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(If.prototype,"parent",{enumerable:!0,get:function(){if(If.isBuffer(this))return this.buffer}});Object.defineProperty(If.prototype,"offset",{enumerable:!0,
get:function(){if(If.isBuffer(this))return this.byteOffset}});If.poolSize=8192;If.from=function(b,c,g){return tO(b,c,g)};Object.setPrototypeOf(If.prototype,Uint8Array.prototype);Object.setPrototypeOf(If,Uint8Array);If.alloc=function(b,c,g){return vO(b),0>=b?hp(b):void 0!==c?"string"==typeof g?hp(b).fill(c,g):hp(b).fill(c):hp(b)};If.allocUnsafe=function(b){return EE(b)};If.allocUnsafeSlow=function(b){return EE(b)};If.isBuffer=function(b){return null!=b&&!0===b._isBuffer&&b!==If.prototype};If.compare=
function(b,c){if(ip(b,Uint8Array)&&(b=If.from(b,b.offset,b.byteLength)),ip(c,Uint8Array)&&(c=If.from(c,c.offset,c.byteLength)),!If.isBuffer(b)||!If.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===c)return 0;for(var g=b.length,a=c.length,d=0,f=Math.min(g,a);d<f;++d)if(b[d]!==c[d]){g=b[d];a=c[d];break}return g<a?-1:a<g?1:0};If.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};If.concat=function(b,c){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return If.alloc(0);var g;if(void 0===c)for(g=c=0;g<b.length;++g)c+=b[g].length;c=If.allocUnsafe(c);var a=0;for(g=0;g<b.length;++g){var d=b[g];if(ip(d,Uint8Array)&&(d=If.from(d)),!If.isBuffer(d))throw new TypeError('"list" argument must be an Array of Buffers');d.copy(c,a);a+=d.length}return c};If.byteLength=uO;If.prototype._isBuffer=!0;If.prototype.swap16=
function(){var b=this.length;if(0!=b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var c=0;c<b;c+=2)Zr(this,c,c+1);return this};If.prototype.swap32=function(){var b=this.length;if(0!=b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var c=0;c<b;c+=4)Zr(this,c,c+3),Zr(this,c+1,c+2);return this};If.prototype.swap64=function(){var b=this.length;if(0!=b%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var c=0;c<b;c+=8)Zr(this,c,
c+7),Zr(this,c+1,c+6),Zr(this,c+2,c+5),Zr(this,c+3,c+4);return this};If.prototype.toString=function(){var b=this.length;return 0===b?"":0===arguments.length?xO(this,0,b):a_.apply(this,arguments)};If.prototype.toLocaleString=If.prototype.toString;If.prototype.equals=function(b){if(!If.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===If.compare(this,b)};If.prototype.inspect=function(){var b="",c=Lm.INSPECT_MAX_BYTES;return b=this.toString("hex",0,c).replace(/(.{2})/g,
"$1 ").trim(),this.length>c&&(b+=" ... "),"<Buffer "+b+">"};UU&&(If.prototype[UU]=If.prototype.inspect);If.prototype.compare=function(b,c,g,a,d){if(ip(b,Uint8Array)&&(b=If.from(b,b.offset,b.byteLength)),!If.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+Jc(b));if(void 0===c&&(c=0),void 0===g&&(g=b?b.length:0),void 0===a&&(a=0),void 0===d&&(d=this.length),0>c||g>b.length||0>a||d>this.length)throw new RangeError("out of range index");
if(a>=d&&c>=g)return 0;if(a>=d)return-1;if(c>=g)return 1;if(this===b)return 0;var f=(d>>>=0)-(a>>>=0),k=(g>>>=0)-(c>>>=0),n=Math.min(f,k);a=this.slice(a,d);b=b.slice(c,g);for(c=0;c<n;++c)if(a[c]!==b[c]){f=a[c];k=b[c];break}return f<k?-1:k<f?1:0};If.prototype.includes=function(b,c,g){return-1!==this.indexOf(b,c,g)};If.prototype.indexOf=function(b,c,g){return yO(this,b,c,g,!0)};If.prototype.lastIndexOf=function(b,c,g){return yO(this,b,c,g,!1)};If.prototype.write=function(b,c,g,a){if(void 0===c)a="utf8",
g=this.length,c=0;else if(void 0===g&&"string"==typeof c)a=c,g=this.length,c=0;else{if(!isFinite(c))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");c>>>=0;isFinite(g)?(g>>>=0,void 0===a&&(a="utf8")):(a=g,g=void 0)}var d=this.length-c;if((void 0===g||g>d)&&(g=d),0<b.length&&(0>g||0>c)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(d=!1;;)switch(a){case "hex":a:{c=Number(c)||0;a=this.length-c;g?(g=Number(g))>a&&
(g=a):g=a;a=b.length;g>a/2&&(g=a/2);for(a=0;a<g;++a){d=parseInt(b.substr(2*a,2),16);if(d!=d){g=a;break a}this[c+a]=d}g=a}return g;case "utf8":case "utf-8":return aA(HE(b,this.length-c),this,c,g);case "ascii":return AO(this,b,c,g);case "latin1":case "binary":return AO(this,b,c,g);case "base64":return aA(wO(b),this,c,g);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=g;d=this.length-c;for(var f=[],k=0;k<b.length&&!(0>(d-=2));++k){var n=b.charCodeAt(k);g=n>>8;n%=256;f.push(n);f.push(g)}return aA(f,
this,c,a);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase();d=!0}};If.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};If.prototype.slice=function(b,c){var g=this.length;0>(b=~~b)?0>(b+=g)&&(b=0):b>g&&(b=g);0>(c=void 0===c?g:~~c)?0>(c+=g)&&(c=0):c>g&&(c=g);c<b&&(c=b);b=this.subarray(b,c);return Object.setPrototypeOf(b,If.prototype),b};If.prototype.readUIntLE=function(b,c,g){b>>>=0;c>>>=0;g||Ik(b,c,this.length);g=this[b];
for(var a=1,d=0;++d<c&&(a*=256);)g+=this[b+d]*a;return g};If.prototype.readUIntBE=function(b,c,g){b>>>=0;c>>>=0;g||Ik(b,c,this.length);g=this[b+--c];for(var a=1;0<c&&(a*=256);)g+=this[b+--c]*a;return g};If.prototype.readUInt8=function(b,c){return b>>>=0,c||Ik(b,1,this.length),this[b]};If.prototype.readUInt16LE=function(b,c){return b>>>=0,c||Ik(b,2,this.length),this[b]|this[b+1]<<8};If.prototype.readUInt16BE=function(b,c){return b>>>=0,c||Ik(b,2,this.length),this[b]<<8|this[b+1]};If.prototype.readUInt32LE=
function(b,c){return b>>>=0,c||Ik(b,4,this.length),(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};If.prototype.readUInt32BE=function(b,c){return b>>>=0,c||Ik(b,4,this.length),16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};If.prototype.readIntLE=function(b,c,g){b>>>=0;c>>>=0;g||Ik(b,c,this.length);g=this[b];for(var a=1,d=0;++d<c&&(a*=256);)g+=this[b+d]*a;return g>=128*a&&(g-=Math.pow(2,8*c)),g};If.prototype.readIntBE=function(b,c,g){b>>>=0;c>>>=0;g||Ik(b,c,this.length);g=c;for(var a=
1,d=this[b+--g];0<g&&(a*=256);)d+=this[b+--g]*a;return d>=128*a&&(d-=Math.pow(2,8*c)),d};If.prototype.readInt8=function(b,c){return b>>>=0,c||Ik(b,1,this.length),128&this[b]?-1*(255-this[b]+1):this[b]};If.prototype.readInt16LE=function(b,c){b>>>=0;c||Ik(b,2,this.length);b=this[b]|this[b+1]<<8;return 32768&b?4294901760|b:b};If.prototype.readInt16BE=function(b,c){b>>>=0;c||Ik(b,2,this.length);b=this[b+1]|this[b]<<8;return 32768&b?4294901760|b:b};If.prototype.readInt32LE=function(b,c){return b>>>=0,
c||Ik(b,4,this.length),this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};If.prototype.readInt32BE=function(b,c){return b>>>=0,c||Ik(b,4,this.length),this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};If.prototype.readFloatLE=function(b,c){return b>>>=0,c||Ik(b,4,this.length),mu.read(this,b,!0,23,4)};If.prototype.readFloatBE=function(b,c){return b>>>=0,c||Ik(b,4,this.length),mu.read(this,b,!1,23,4)};If.prototype.readDoubleLE=function(b,c){return b>>>=0,c||Ik(b,8,this.length),mu.read(this,b,!0,52,8)};
If.prototype.readDoubleBE=function(b,c){return b>>>=0,c||Ik(b,8,this.length),mu.read(this,b,!1,52,8)};If.prototype.writeUIntLE=function(b,c,g,a){(b=+b,c>>>=0,g>>>=0,a)||Jl(this,b,c,g,Math.pow(2,8*g)-1,0);a=1;var d=0;for(this[c]=255&b;++d<g&&(a*=256);)this[c+d]=b/a&255;return c+g};If.prototype.writeUIntBE=function(b,c,g,a){(b=+b,c>>>=0,g>>>=0,a)||Jl(this,b,c,g,Math.pow(2,8*g)-1,0);a=g-1;var d=1;for(this[c+a]=255&b;0<=--a&&(d*=256);)this[c+a]=b/d&255;return c+g};If.prototype.writeUInt8=function(b,c,
g){return b=+b,c>>>=0,g||Jl(this,b,c,1,255,0),this[c]=255&b,c+1};If.prototype.writeUInt16LE=function(b,c,g){return b=+b,c>>>=0,g||Jl(this,b,c,2,65535,0),this[c]=255&b,this[c+1]=b>>>8,c+2};If.prototype.writeUInt16BE=function(b,c,g){return b=+b,c>>>=0,g||Jl(this,b,c,2,65535,0),this[c]=b>>>8,this[c+1]=255&b,c+2};If.prototype.writeUInt32LE=function(b,c,g){return b=+b,c>>>=0,g||Jl(this,b,c,4,4294967295,0),this[c+3]=b>>>24,this[c+2]=b>>>16,this[c+1]=b>>>8,this[c]=255&b,c+4};If.prototype.writeUInt32BE=function(b,
c,g){return b=+b,c>>>=0,g||Jl(this,b,c,4,4294967295,0),this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=255&b,c+4};If.prototype.writeIntLE=function(b,c,g,a){(b=+b,c>>>=0,a)||(a=Math.pow(2,8*g-1),Jl(this,b,c,g,a-1,-a));a=0;var d=1,f=0;for(this[c]=255&b;++a<g&&(d*=256);)0>b&&0===f&&0!==this[c+a-1]&&(f=1),this[c+a]=(b/d>>0)-f&255;return c+g};If.prototype.writeIntBE=function(b,c,g,a){(b=+b,c>>>=0,a)||(a=Math.pow(2,8*g-1),Jl(this,b,c,g,a-1,-a));a=g-1;var d=1,f=0;for(this[c+a]=255&b;0<=--a&&(d*=
256);)0>b&&0===f&&0!==this[c+a+1]&&(f=1),this[c+a]=(b/d>>0)-f&255;return c+g};If.prototype.writeInt8=function(b,c,g){return b=+b,c>>>=0,g||Jl(this,b,c,1,127,-128),0>b&&(b=255+b+1),this[c]=255&b,c+1};If.prototype.writeInt16LE=function(b,c,g){return b=+b,c>>>=0,g||Jl(this,b,c,2,32767,-32768),this[c]=255&b,this[c+1]=b>>>8,c+2};If.prototype.writeInt16BE=function(b,c,g){return b=+b,c>>>=0,g||Jl(this,b,c,2,32767,-32768),this[c]=b>>>8,this[c+1]=255&b,c+2};If.prototype.writeInt32LE=function(b,c,g){return b=
+b,c>>>=0,g||Jl(this,b,c,4,2147483647,-2147483648),this[c]=255&b,this[c+1]=b>>>8,this[c+2]=b>>>16,this[c+3]=b>>>24,c+4};If.prototype.writeInt32BE=function(b,c,g){return b=+b,c>>>=0,g||Jl(this,b,c,4,2147483647,-2147483648),0>b&&(b=4294967295+b+1),this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=255&b,c+4};If.prototype.writeFloatLE=function(b,c,g){return CO(this,b,c,!0,g)};If.prototype.writeFloatBE=function(b,c,g){return CO(this,b,c,!1,g)};If.prototype.writeDoubleLE=function(b,c,g){return DO(this,
b,c,!0,g)};If.prototype.writeDoubleBE=function(b,c,g){return DO(this,b,c,!1,g)};If.prototype.copy=function(b,c,g,a){if(!If.isBuffer(b))throw new TypeError("argument should be a Buffer");if((g||(g=0),a||0===a||(a=this.length),c>=b.length&&(c=b.length),c||(c=0),0<a&&a<g&&(a=g),a===g)||0===b.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>g||g>=this.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("sourceEnd out of bounds");
a>this.length&&(a=this.length);b.length-c<a-g&&(a=b.length-c+g);var d=a-g;if(this===b&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(c,g,a);else if(this===b&&g<c&&c<a)for(a=d-1;0<=a;--a)b[a+c]=this[a+g];else Uint8Array.prototype.set.call(b,this.subarray(g,a),c);return d};If.prototype.fill=function(b,c,g,a){if("string"==typeof b){if("string"==typeof c?(a=c,c=0,g=this.length):"string"==typeof g&&(a=g,g=this.length),void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");
if("string"==typeof a&&!If.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===b.length){var d=b.charCodeAt(0);("utf8"===a&&128>d||"latin1"===a)&&(b=d)}}else"number"==typeof b?b&=255:"boolean"==typeof b&&(b=Number(b));if(0>c||this.length<c||this.length<g)throw new RangeError("Out of range index");if(g<=c)return this;if(c>>>=0,g=void 0===g?this.length:g>>>0,b||(b=0),"number"==typeof b)for(a=c;a<g;++a)this[a]=b;else{d=If.isBuffer(b)?b:If.from(b,a);var f=d.length;if(0===f)throw new TypeError('The value "'+
b+'" is invalid for argument "value"');for(a=0;a<g-c;++a)this[a+c]=d[a%f]}return this};var c_=/[^+/0-9A-Za-z-_]/g,b_=function(){for(var b=Array(256),c=0;16>c;++c)for(var g=16*c,a=0;16>a;++a)b[g+a]="0123456789abcdef"[c]+"0123456789abcdef"[a];return b}();Lm.Buffer;Lm.INSPECT_MAX_BYTES;Lm.kMaxLength;var oB={},io=Lm.Buffer;io.from&&io.alloc&&io.allocUnsafe&&io.allocUnsafeSlow?oB=Lm:(EO(Lm,oB),oB.Buffer=$r);$r.prototype=Object.create(io.prototype);EO(io,$r);$r.from=function(b,c,g){if("number"==typeof b)throw new TypeError("Argument must not be a number");
return io(b,c,g)};$r.alloc=function(b,c,g){if("number"!=typeof b)throw new TypeError("Argument must be a number");b=io(b);return void 0!==c?"string"==typeof g?b.fill(c,g):b.fill(c):b.fill(0),b};$r.allocUnsafe=function(b){if("number"!=typeof b)throw new TypeError("Argument must be a number");return io(b)};$r.allocUnsafeSlow=function(b){if("number"!=typeof b)throw new TypeError("Argument must be a number");return Lm.SlowBuffer(b)};var QE={},JE=oB.Buffer,FO=JE.isEncoding||function(b){switch((b=""+b)&&
b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};QE.StringDecoder=Fw;Fw.prototype.write=function(b){if(0===b.length)return"";var c;if(this.lastNeed){if(void 0===(c=this.fillLast(b)))return"";var g=this.lastNeed;this.lastNeed=0}else g=0;return g<b.length?c?c+this.text(b,g):this.text(b,g):c||""};Fw.prototype.end=function(b){b=b&&b.length?this.write(b):"";return this.lastNeed?
b+"\ufffd":b};Fw.prototype.text=function(b,c){var g=b.length-1;if(g<c)g=0;else{var a=KE(b[g]);g=0<=a?(0<a&&(this.lastNeed=a-1),a):--g<c||-2===a?0:0<=(a=KE(b[g]))?(0<a&&(this.lastNeed=a-2),a):--g<c||-2===a?0:0<=(a=KE(b[g]))?(0<a&&(2===a?a=0:this.lastNeed=a-3),a):0}if(!this.lastNeed)return b.toString("utf8",c);this.lastTotal=g;a=b.length-(g-this.lastNeed);return b.copy(this.lastChar,0,a),b.toString("utf8",c,a)};Fw.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length);this.lastNeed-=b.length};var Gw={},GO=!1,bA={},HO=!1,Os={},VU=!1,as=function(){function b(V){if(V>$a)throw new RangeError('The value "'+V+'" is invalid for option "size"');V=new Uint8Array(V);Object.setPrototypeOf(V,c.prototype);return V}function c(V,ea,Mb){if("number"===typeof V){if("string"===typeof ea)throw new TypeError('The "string" argument must be of type string. Received type number');
return d(V)}return g(V,ea,Mb)}function g(V,ea,Mb){if("string"===typeof V){var U=ea;if("string"!==typeof U||""===U)U="utf8";if(!c.isEncoding(U))throw new TypeError("Unknown encoding: "+U);ea=q(V,U)|0;Mb=b(ea);V=Mb.write(V,U);V!==ea&&(Mb=Mb.slice(0,V));return Mb}if(ArrayBuffer.isView(V))return wc(V,Uint8Array)?(V=new Uint8Array(V),V=k(V.buffer,V.byteOffset,V.byteLength)):V=f(V),V;if(null==V)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
Jc(V));if(wc(V,ArrayBuffer)||V&&wc(V.buffer,ArrayBuffer)||"undefined"!==typeof SharedArrayBuffer&&(wc(V,SharedArrayBuffer)||V&&wc(V.buffer,SharedArrayBuffer)))return k(V,ea,Mb);if("number"===typeof V)throw new TypeError('The "value" argument must not be of type number. Received type number');U=V.valueOf&&V.valueOf();if(null!=U&&U!==V)return c.from(U,ea,Mb);if(U=n(V))return U;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof V[Symbol.toPrimitive])return c.from(V[Symbol.toPrimitive]("string"),
ea,Mb);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+Jc(V));}function a(V){if("number"!==typeof V)throw new TypeError('"size" argument must be of type number');if(0>V)throw new RangeError('The value "'+V+'" is invalid for option "size"');}function d(V){a(V);return b(0>V?0:p(V)|0)}function f(V){for(var ea=0>V.length?0:p(V.length)|0,Mb=b(ea),U=0;U<ea;U+=1)Mb[U]=V[U]&255;return Mb}function k(V,ea,Mb){if(0>ea||V.byteLength<
ea)throw new RangeError('"offset" is outside of buffer bounds');if(V.byteLength<ea+(Mb||0))throw new RangeError('"length" is outside of buffer bounds');V=void 0===ea&&void 0===Mb?new Uint8Array(V):void 0===Mb?new Uint8Array(V,ea):new Uint8Array(V,ea,Mb);Object.setPrototypeOf(V,c.prototype);return V}function n(V){if(c.isBuffer(V)){var ea=p(V.length)|0,Mb=b(ea);if(0===Mb.length)return Mb;V.copy(Mb,0,0,ea);return Mb}if(void 0!==V.length)return(ea="number"!==typeof V.length)||(ea=V.length,ea=ea!==ea),
ea?b(0):f(V);if("Buffer"===V.type&&Array.isArray(V.data))return f(V.data)}function p(V){if(V>=$a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+$a.toString(16)+" bytes");return V|0}function q(V,ea){if(c.isBuffer(V))return V.length;if(ArrayBuffer.isView(V)||wc(V,ArrayBuffer))return V.byteLength;if("string"!==typeof V)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+Jc(V));var Mb=V.length,U=2<arguments.length&&
!0===arguments[2];if(!U&&0===Mb)return 0;for(var Sa=!1;;)switch(ea){case "ascii":case "latin1":case "binary":return Mb;case "utf8":case "utf-8":return tc(V).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*Mb;case "hex":return Mb>>>1;case "base64":return Oa.toByteArray(xa(V)).length;default:if(Sa)return U?-1:tc(V).length;ea=(""+ea).toLowerCase();Sa=!0}}function r(V,ea,Mb){var U=!1;if(void 0===ea||0>ea)ea=0;if(ea>this.length)return"";if(void 0===Mb||Mb>this.length)Mb=this.length;
if(0>=Mb)return"";Mb>>>=0;ea>>>=0;if(Mb<=ea)return"";for(V||(V="utf8");;)switch(V){case "hex":V=this.length;if(!ea||0>ea)ea=0;if(!Mb||0>Mb||Mb>V)Mb=V;for(V="";ea<Mb;++ea)V+=Aa[this[ea]];return V;case "utf8":case "utf-8":return B(this,ea,Mb);case "ascii":V="";for(Mb=Math.min(this.length,Mb);ea<Mb;++ea)V+=String.fromCharCode(this[ea]&127);return V;case "latin1":case "binary":V="";for(Mb=Math.min(this.length,Mb);ea<Mb;++ea)V+=String.fromCharCode(this[ea]);return V;case "base64":return ea=0===ea&&Mb===
this.length?Oa.fromByteArray(this):Oa.fromByteArray(this.slice(ea,Mb)),ea;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":ea=this.slice(ea,Mb);Mb="";for(V=0;V<ea.length-1;V+=2)Mb+=String.fromCharCode(ea[V]+256*ea[V+1]);return Mb;default:if(U)throw new TypeError("Unknown encoding: "+V);V=(V+"").toLowerCase();U=!0}}function t(V,ea,Mb){var U=V[ea];V[ea]=V[Mb];V[Mb]=U}function w(V,ea,Mb,U,Sa){if(0===V.length)return-1;"string"===typeof Mb?(U=Mb,Mb=0):2147483647<Mb?Mb=2147483647:-2147483648>Mb&&
(Mb=-2147483648);Mb=+Mb;Mb!==Mb&&(Mb=Sa?0:V.length-1);0>Mb&&(Mb=V.length+Mb);if(Mb>=V.length){if(Sa)return-1;Mb=V.length-1}else if(0>Mb)if(Sa)Mb=0;else return-1;"string"===typeof ea&&(ea=c.from(ea,U));if(c.isBuffer(ea))return 0===ea.length?-1:x(V,ea,Mb,U,Sa);if("number"===typeof ea)return ea&=255,"function"===typeof Uint8Array.prototype.indexOf?Sa?Uint8Array.prototype.indexOf.call(V,ea,Mb):Uint8Array.prototype.lastIndexOf.call(V,ea,Mb):x(V,[ea],Mb,U,Sa);throw new TypeError("val must be string, number or Buffer");
}function x(V,ea,Mb,U,Sa){function S(ee,Fe){return 1===Sc?ee[Fe]:ee.readUInt16BE(Fe*Sc)}var Sc=1,xd=V.length,Ae=ea.length;if(void 0!==U&&(U=String(U).toLowerCase(),"ucs2"===U||"ucs-2"===U||"utf16le"===U||"utf-16le"===U)){if(2>V.length||2>ea.length)return-1;Sc=2;xd/=2;Ae/=2;Mb/=2}if(Sa)for(U=-1;Mb<xd;Mb++)if(S(V,Mb)===S(ea,-1===U?0:Mb-U)){if(-1===U&&(U=Mb),Mb-U+1===Ae)return U*Sc}else-1!==U&&(Mb-=Mb-U),U=-1;else for(Mb+Ae>xd&&(Mb=xd-Ae);0<=Mb;Mb--){xd=!0;for(U=0;U<Ae;U++)if(S(V,Mb+U)!==S(ea,U)){xd=
!1;break}if(xd)return Mb}return-1}function B(V,ea,Mb){Mb=Math.min(V.length,Mb);for(var U=[];ea<Mb;){var Sa=V[ea],S=null,Sc=239<Sa?4:223<Sa?3:191<Sa?2:1;if(ea+Sc<=Mb)switch(Sc){case 1:128>Sa&&(S=Sa);break;case 2:var xd=V[ea+1];128===(xd&192)&&(Sa=(Sa&31)<<6|xd&63,127<Sa&&(S=Sa));break;case 3:xd=V[ea+1];var Ae=V[ea+2];128===(xd&192)&&128===(Ae&192)&&(Sa=(Sa&15)<<12|(xd&63)<<6|Ae&63,2047<Sa&&(55296>Sa||57343<Sa)&&(S=Sa));break;case 4:xd=V[ea+1];Ae=V[ea+2];var ee=V[ea+3];128===(xd&192)&&128===(Ae&192)&&
128===(ee&192)&&(Sa=(Sa&15)<<18|(xd&63)<<12|(Ae&63)<<6|ee&63,65535<Sa&&1114112>Sa&&(S=Sa))}null===S?(S=65533,Sc=1):65535<S&&(S-=65536,U.push(S>>>10&1023|55296),S=56320|S&1023);U.push(S);ea+=Sc}V=U.length;if(V<=dd)U=String.fromCharCode.apply(String,U);else{Mb="";for(ea=0;ea<V;)Mb+=String.fromCharCode.apply(String,U.slice(ea,ea+=dd));U=Mb}return U}function D(V,ea,Mb){if(0!==V%1||0>V)throw new RangeError("offset is not uint");if(V+ea>Mb)throw new RangeError("Trying to access beyond buffer length");}
function F(V,ea,Mb,U,Sa,S){if(!c.isBuffer(V))throw new TypeError('"buffer" argument must be a Buffer instance');if(ea>Sa||ea<S)throw new RangeError('"value" argument is out of bounds');if(Mb+U>V.length)throw new RangeError("Index out of range");}function L(V,ea,Mb,U,Sa){qc(ea,U,Sa,V,Mb,7);U=Number(ea&BigInt(4294967295));V[Mb++]=U;U>>=8;V[Mb++]=U;U>>=8;V[Mb++]=U;V[Mb++]=U>>8;ea=Number(ea>>BigInt(32)&BigInt(4294967295));V[Mb++]=ea;ea>>=8;V[Mb++]=ea;ea>>=8;V[Mb++]=ea;V[Mb++]=ea>>8;return Mb}function G(V,
ea,Mb,U,Sa){qc(ea,U,Sa,V,Mb,7);U=Number(ea&BigInt(4294967295));V[Mb+7]=U;U>>=8;V[Mb+6]=U;U>>=8;V[Mb+5]=U;V[Mb+4]=U>>8;ea=Number(ea>>BigInt(32)&BigInt(4294967295));V[Mb+3]=ea;ea>>=8;V[Mb+2]=ea;ea>>=8;V[Mb+1]=ea;V[Mb]=ea>>8;return Mb+8}function oa(V,ea,Mb,U,Sa,S){if(Mb+U>V.length)throw new RangeError("Index out of range");if(0>Mb)throw new RangeError("Index out of range");}function ha(V,ea,Mb,U,Sa){ea=+ea;Mb>>>=0;Sa||oa(V,ea,Mb,4);md.write(V,ea,Mb,U,23,4);return Mb+4}function Ha(V,ea,Mb,U,Sa){ea=+ea;
Mb>>>=0;Sa||oa(V,ea,Mb,8);md.write(V,ea,Mb,U,52,8);return Mb+8}function Va(V,ea,Mb){Kd[V]=function(U){function Sa(){rd(this,Sa);var Sc=S.call(this);Object.defineProperty(vd(Sc),"message",{value:ea.apply(vd(Sc),arguments),writable:!0,configurable:!0});Sc.name="".concat(Sc.name," [").concat(V,"]");Sc.stack;delete Sc.name;return Sc}gd(Sa,U);var S=sb(Sa);Ac(Sa,[{key:"toString",value:function(){return"".concat(this.name," [").concat(V,"]: ").concat(this.message)}},{key:"code",get:function(){return V},
set:function(Sc){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Sc,writable:!0})}}]);return Sa}(Mb)}function hc(V){for(var ea="",Mb=V.length,U="-"===V[0]?1:0;Mb>=U+4;Mb-=3)ea="_".concat(V.slice(Mb-3,Mb)).concat(ea);return"".concat(V.slice(0,Mb)).concat(ea)}function qc(V,ea,Mb,U,Sa,S){if(V>Mb||V<ea)throw U="bigint"===typeof ea?"n":"",ea=3<S?0===ea||ea===BigInt(0)?">= 0".concat(U," and < 2").concat(U," ** ").concat(8*(S+1)).concat(U):">= -(2".concat(U," ** ").concat(8*(S+1)-
1).concat(U,") and < 2 ** ")+"".concat(8*(S+1)-1).concat(U):">= ".concat(ea).concat(U," and <= ").concat(Mb).concat(U),new Kd.ERR_OUT_OF_RANGE("value",ea,V);jc(Sa,"offset");void 0!==U[Sa]&&void 0!==U[Sa+S]||Ya(Sa,U.length-(S+1))}function jc(V,ea){if("number"!==typeof V)throw new Kd.ERR_INVALID_ARG_TYPE(ea,"number",V);}function Ya(V,ea,Mb){if(Math.floor(V)!==V)throw jc(V,Mb),new Kd.ERR_OUT_OF_RANGE(Mb||"offset","an integer",V);if(0>ea)throw new Kd.ERR_BUFFER_OUT_OF_BOUNDS;throw new Kd.ERR_OUT_OF_RANGE(Mb||
"offset",">= ".concat(Mb?1:0," and <= ").concat(ea),V);}function xa(V){V=V.split("=")[0];V=V.trim().replace(ra,"");if(2>V.length)return"";for(;0!==V.length%4;)V+="=";return V}function tc(V,ea){ea=ea||Infinity;for(var Mb,U=V.length,Sa=null,S=[],Sc=0;Sc<U;++Sc){Mb=V.charCodeAt(Sc);if(55295<Mb&&57344>Mb){if(!Sa){if(56319<Mb){-1<(ea-=3)&&S.push(239,191,189);continue}else if(Sc+1===U){-1<(ea-=3)&&S.push(239,191,189);continue}Sa=Mb;continue}if(56320>Mb){-1<(ea-=3)&&S.push(239,191,189);Sa=Mb;continue}Mb=
(Sa-55296<<10|Mb-56320)+65536}else Sa&&-1<(ea-=3)&&S.push(239,191,189);Sa=null;if(128>Mb){if(0>--ea)break;S.push(Mb)}else if(2048>Mb){if(0>(ea-=2))break;S.push(Mb>>6|192,Mb&63|128)}else if(65536>Mb){if(0>(ea-=3))break;S.push(Mb>>12|224,Mb>>6&63|128,Mb&63|128)}else if(1114112>Mb){if(0>(ea-=4))break;S.push(Mb>>18|240,Mb>>12&63|128,Mb>>6&63|128,Mb&63|128)}else throw Error("Invalid code point");}return S}function Qb(V,ea,Mb,U){var Sa;for(Sa=0;Sa<U&&!(Sa+Mb>=ea.length||Sa>=V.length);++Sa)ea[Sa+Mb]=V[Sa];
return Sa}function wc(V,ea){return V instanceof ea||null!=V&&null!=V.constructor&&null!=V.constructor.name&&V.constructor.name===ea.name}function Zb(V){return"undefined"===typeof BigInt?$c:V}function $c(){throw Error("BigInt not supported");}if(VU)return Os;VU=!0;var Oa=k_(),md=l_(),la="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;Os.Buffer=c;Os.SlowBuffer=function(V){+V!=V&&(V=0);return c.alloc(+V)};Os.INSPECT_MAX_BYTES=50;var $a=2147483647;
Os.kMaxLength=$a;c.TYPED_ARRAY_SUPPORT=function(){try{var V=new Uint8Array(1),ea={foo:function(){return 42}};Object.setPrototypeOf(ea,Uint8Array.prototype);Object.setPrototypeOf(V,ea);return 42===V.foo()}catch(Mb){return!1}}();c.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(c.prototype,
"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}});Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});c.poolSize=8192;c.from=function(V,ea,Mb){return g(V,ea,Mb)};Object.setPrototypeOf(c.prototype,Uint8Array.prototype);Object.setPrototypeOf(c,Uint8Array);c.alloc=function(V,ea,Mb){a(V);V=0>=V?b(V):void 0!==ea?"string"===typeof Mb?b(V).fill(ea,Mb):b(V).fill(ea):b(V);return V};c.allocUnsafe=function(V){return d(V)};
c.allocUnsafeSlow=function(V){return d(V)};c.isBuffer=function(V){return null!=V&&!0===V._isBuffer&&V!==c.prototype};c.compare=function(V,ea){wc(V,Uint8Array)&&(V=c.from(V,V.offset,V.byteLength));wc(ea,Uint8Array)&&(ea=c.from(ea,ea.offset,ea.byteLength));if(!c.isBuffer(V)||!c.isBuffer(ea))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(V===ea)return 0;for(var Mb=V.length,U=ea.length,Sa=0,S=Math.min(Mb,U);Sa<S;++Sa)if(V[Sa]!==ea[Sa]){Mb=V[Sa];U=ea[Sa];
break}return Mb<U?-1:U<Mb?1:0};c.isEncoding=function(V){switch(String(V).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};c.concat=function(V,ea){if(!Array.isArray(V))throw new TypeError('"list" argument must be an Array of Buffers');if(0===V.length)return c.alloc(0);var Mb;if(void 0===ea)for(Mb=ea=0;Mb<V.length;++Mb)ea+=V[Mb].length;ea=c.allocUnsafe(ea);var U=
0;for(Mb=0;Mb<V.length;++Mb){var Sa=V[Mb];if(wc(Sa,Uint8Array))U+Sa.length>ea.length?(c.isBuffer(Sa)||(Sa=c.from(Sa)),Sa.copy(ea,U)):Uint8Array.prototype.set.call(ea,Sa,U);else if(c.isBuffer(Sa))Sa.copy(ea,U);else throw new TypeError('"list" argument must be an Array of Buffers');U+=Sa.length}return ea};c.byteLength=q;c.prototype._isBuffer=!0;c.prototype.swap16=function(){var V=this.length;if(0!==V%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ea=0;ea<V;ea+=2)t(this,
ea,ea+1);return this};c.prototype.swap32=function(){var V=this.length;if(0!==V%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ea=0;ea<V;ea+=4)t(this,ea,ea+3),t(this,ea+1,ea+2);return this};c.prototype.swap64=function(){var V=this.length;if(0!==V%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ea=0;ea<V;ea+=8)t(this,ea,ea+7),t(this,ea+1,ea+6),t(this,ea+2,ea+5),t(this,ea+3,ea+4);return this};c.prototype.toString=function(){var V=this.length;return 0===
V?"":0===arguments.length?B(this,0,V):r.apply(this,arguments)};c.prototype.toLocaleString=c.prototype.toString;c.prototype.equals=function(V){if(!c.isBuffer(V))throw new TypeError("Argument must be a Buffer");return this===V?!0:0===c.compare(this,V)};c.prototype.inspect=function(){var V=Os.INSPECT_MAX_BYTES;var ea=this.toString("hex",0,V).replace(/(.{2})/g,"$1 ").trim();this.length>V&&(ea+=" ... ");return"<Buffer "+ea+">"};la&&(c.prototype[la]=c.prototype.inspect);c.prototype.compare=function(V,ea,
Mb,U,Sa){wc(V,Uint8Array)&&(V=c.from(V,V.offset,V.byteLength));if(!c.isBuffer(V))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+Jc(V));void 0===ea&&(ea=0);void 0===Mb&&(Mb=V?V.length:0);void 0===U&&(U=0);void 0===Sa&&(Sa=this.length);if(0>ea||Mb>V.length||0>U||Sa>this.length)throw new RangeError("out of range index");if(U>=Sa&&ea>=Mb)return 0;if(U>=Sa)return-1;if(ea>=Mb)return 1;ea>>>=0;Mb>>>=0;U>>>=0;Sa>>>=0;if(this===V)return 0;var S=Sa-U,Sc=
Mb-ea,xd=Math.min(S,Sc);U=this.slice(U,Sa);V=V.slice(ea,Mb);for(ea=0;ea<xd;++ea)if(U[ea]!==V[ea]){S=U[ea];Sc=V[ea];break}return S<Sc?-1:Sc<S?1:0};c.prototype.includes=function(V,ea,Mb){return-1!==this.indexOf(V,ea,Mb)};c.prototype.indexOf=function(V,ea,Mb){return w(this,V,ea,Mb,!0)};c.prototype.lastIndexOf=function(V,ea,Mb){return w(this,V,ea,Mb,!1)};c.prototype.write=function(V,ea,Mb,U){if(void 0===ea)U="utf8",Mb=this.length,ea=0;else if(void 0===Mb&&"string"===typeof ea)U=ea,Mb=this.length,ea=0;
else if(isFinite(ea))ea>>>=0,isFinite(Mb)?(Mb>>>=0,void 0===U&&(U="utf8")):(U=Mb,Mb=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Sa=this.length-ea;if(void 0===Mb||Mb>Sa)Mb=Sa;if(0<V.length&&(0>Mb||0>ea)||ea>this.length)throw new RangeError("Attempt to write outside buffer bounds");U||(U="utf8");for(Sa=!1;;)switch(U){case "hex":a:{ea=Number(ea)||0;U=this.length-ea;Mb?(Mb=Number(Mb),Mb>U&&(Mb=U)):Mb=U;U=V.length;Mb>U/2&&(Mb=U/2);for(U=0;U<Mb;++U){Sa=
parseInt(V.substr(2*U,2),16);if(Sa!==Sa){V=U;break a}this[ea+U]=Sa}V=U}return V;case "utf8":case "utf-8":return Qb(tc(V,this.length-ea),this,ea,Mb);case "ascii":case "latin1":case "binary":U=[];for(Sa=0;Sa<V.length;++Sa)U.push(V.charCodeAt(Sa)&255);return Qb(U,this,ea,Mb);case "base64":return Qb(Oa.toByteArray(xa(V)),this,ea,Mb);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":U=V;Sa=this.length-ea;for(var S=[],Sc=0;Sc<U.length&&!(0>(Sa-=2));++Sc){var xd=U.charCodeAt(Sc);V=xd>>8;xd%=256;S.push(xd);
S.push(V)}return Qb(S,this,ea,Mb);default:if(Sa)throw new TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase();Sa=!0}};c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var dd=4096;c.prototype.slice=function(V,ea){var Mb=this.length;V=~~V;ea=void 0===ea?Mb:~~ea;0>V?(V+=Mb,0>V&&(V=0)):V>Mb&&(V=Mb);0>ea?(ea+=Mb,0>ea&&(ea=0)):ea>Mb&&(ea=Mb);ea<V&&(ea=V);V=this.subarray(V,ea);Object.setPrototypeOf(V,c.prototype);return V};c.prototype.readUintLE=
c.prototype.readUIntLE=function(V,ea,Mb){V>>>=0;ea>>>=0;Mb||D(V,ea,this.length);Mb=this[V];for(var U=1,Sa=0;++Sa<ea&&(U*=256);)Mb+=this[V+Sa]*U;return Mb};c.prototype.readUintBE=c.prototype.readUIntBE=function(V,ea,Mb){V>>>=0;ea>>>=0;Mb||D(V,ea,this.length);Mb=this[V+--ea];for(var U=1;0<ea&&(U*=256);)Mb+=this[V+--ea]*U;return Mb};c.prototype.readUint8=c.prototype.readUInt8=function(V,ea){V>>>=0;ea||D(V,1,this.length);return this[V]};c.prototype.readUint16LE=c.prototype.readUInt16LE=function(V,ea){V>>>=
0;ea||D(V,2,this.length);return this[V]|this[V+1]<<8};c.prototype.readUint16BE=c.prototype.readUInt16BE=function(V,ea){V>>>=0;ea||D(V,2,this.length);return this[V]<<8|this[V+1]};c.prototype.readUint32LE=c.prototype.readUInt32LE=function(V,ea){V>>>=0;ea||D(V,4,this.length);return(this[V]|this[V+1]<<8|this[V+2]<<16)+16777216*this[V+3]};c.prototype.readUint32BE=c.prototype.readUInt32BE=function(V,ea){V>>>=0;ea||D(V,4,this.length);return 16777216*this[V]+(this[V+1]<<16|this[V+2]<<8|this[V+3])};c.prototype.readBigUInt64LE=
Zb(function(V){V>>>=0;jc(V,"offset");var ea=this[V],Mb=this[V+7];void 0!==ea&&void 0!==Mb||Ya(V,this.length-8);ea=ea+this[++V]*Math.pow(2,8)+this[++V]*Math.pow(2,16)+this[++V]*Math.pow(2,24);V=this[++V]+this[++V]*Math.pow(2,8)+this[++V]*Math.pow(2,16)+Mb*Math.pow(2,24);return BigInt(ea)+(BigInt(V)<<BigInt(32))});c.prototype.readBigUInt64BE=Zb(function(V){V>>>=0;jc(V,"offset");var ea=this[V],Mb=this[V+7];void 0!==ea&&void 0!==Mb||Ya(V,this.length-8);ea=ea*Math.pow(2,24)+this[++V]*Math.pow(2,16)+this[++V]*
Math.pow(2,8)+this[++V];V=this[++V]*Math.pow(2,24)+this[++V]*Math.pow(2,16)+this[++V]*Math.pow(2,8)+Mb;return(BigInt(ea)<<BigInt(32))+BigInt(V)});c.prototype.readIntLE=function(V,ea,Mb){V>>>=0;ea>>>=0;Mb||D(V,ea,this.length);Mb=this[V];for(var U=1,Sa=0;++Sa<ea&&(U*=256);)Mb+=this[V+Sa]*U;Mb>=128*U&&(Mb-=Math.pow(2,8*ea));return Mb};c.prototype.readIntBE=function(V,ea,Mb){V>>>=0;ea>>>=0;Mb||D(V,ea,this.length);Mb=ea;for(var U=1,Sa=this[V+--Mb];0<Mb&&(U*=256);)Sa+=this[V+--Mb]*U;Sa>=128*U&&(Sa-=Math.pow(2,
8*ea));return Sa};c.prototype.readInt8=function(V,ea){V>>>=0;ea||D(V,1,this.length);return this[V]&128?-1*(255-this[V]+1):this[V]};c.prototype.readInt16LE=function(V,ea){V>>>=0;ea||D(V,2,this.length);V=this[V]|this[V+1]<<8;return V&32768?V|4294901760:V};c.prototype.readInt16BE=function(V,ea){V>>>=0;ea||D(V,2,this.length);V=this[V+1]|this[V]<<8;return V&32768?V|4294901760:V};c.prototype.readInt32LE=function(V,ea){V>>>=0;ea||D(V,4,this.length);return this[V]|this[V+1]<<8|this[V+2]<<16|this[V+3]<<24};
c.prototype.readInt32BE=function(V,ea){V>>>=0;ea||D(V,4,this.length);return this[V]<<24|this[V+1]<<16|this[V+2]<<8|this[V+3]};c.prototype.readBigInt64LE=Zb(function(V){V>>>=0;jc(V,"offset");var ea=this[V],Mb=this[V+7];void 0!==ea&&void 0!==Mb||Ya(V,this.length-8);return(BigInt(this[V+4]+this[V+5]*Math.pow(2,8)+this[V+6]*Math.pow(2,16)+(Mb<<24))<<BigInt(32))+BigInt(ea+this[++V]*Math.pow(2,8)+this[++V]*Math.pow(2,16)+this[++V]*Math.pow(2,24))});c.prototype.readBigInt64BE=Zb(function(V){V>>>=0;jc(V,
"offset");var ea=this[V],Mb=this[V+7];void 0!==ea&&void 0!==Mb||Ya(V,this.length-8);ea=(ea<<24)+this[++V]*Math.pow(2,16)+this[++V]*Math.pow(2,8)+this[++V];return(BigInt(ea)<<BigInt(32))+BigInt(this[++V]*Math.pow(2,24)+this[++V]*Math.pow(2,16)+this[++V]*Math.pow(2,8)+Mb)});c.prototype.readFloatLE=function(V,ea){V>>>=0;ea||D(V,4,this.length);return md.read(this,V,!0,23,4)};c.prototype.readFloatBE=function(V,ea){V>>>=0;ea||D(V,4,this.length);return md.read(this,V,!1,23,4)};c.prototype.readDoubleLE=function(V,
ea){V>>>=0;ea||D(V,8,this.length);return md.read(this,V,!0,52,8)};c.prototype.readDoubleBE=function(V,ea){V>>>=0;ea||D(V,8,this.length);return md.read(this,V,!1,52,8)};c.prototype.writeUintLE=c.prototype.writeUIntLE=function(V,ea,Mb,U){V=+V;ea>>>=0;Mb>>>=0;U||F(this,V,ea,Mb,Math.pow(2,8*Mb)-1,0);U=1;var Sa=0;for(this[ea]=V&255;++Sa<Mb&&(U*=256);)this[ea+Sa]=V/U&255;return ea+Mb};c.prototype.writeUintBE=c.prototype.writeUIntBE=function(V,ea,Mb,U){V=+V;ea>>>=0;Mb>>>=0;U||F(this,V,ea,Mb,Math.pow(2,8*
Mb)-1,0);U=Mb-1;var Sa=1;for(this[ea+U]=V&255;0<=--U&&(Sa*=256);)this[ea+U]=V/Sa&255;return ea+Mb};c.prototype.writeUint8=c.prototype.writeUInt8=function(V,ea,Mb){V=+V;ea>>>=0;Mb||F(this,V,ea,1,255,0);this[ea]=V&255;return ea+1};c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(V,ea,Mb){V=+V;ea>>>=0;Mb||F(this,V,ea,2,65535,0);this[ea]=V&255;this[ea+1]=V>>>8;return ea+2};c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(V,ea,Mb){V=+V;ea>>>=0;Mb||F(this,V,ea,2,65535,0);this[ea]=
V>>>8;this[ea+1]=V&255;return ea+2};c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(V,ea,Mb){V=+V;ea>>>=0;Mb||F(this,V,ea,4,4294967295,0);this[ea+3]=V>>>24;this[ea+2]=V>>>16;this[ea+1]=V>>>8;this[ea]=V&255;return ea+4};c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(V,ea,Mb){V=+V;ea>>>=0;Mb||F(this,V,ea,4,4294967295,0);this[ea]=V>>>24;this[ea+1]=V>>>16;this[ea+2]=V>>>8;this[ea+3]=V&255;return ea+4};c.prototype.writeBigUInt64LE=Zb(function(V){return L(this,V,1<arguments.length&&
void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))});c.prototype.writeBigUInt64BE=Zb(function(V){return G(this,V,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))});c.prototype.writeIntLE=function(V,ea,Mb,U){V=+V;ea>>>=0;U||(U=Math.pow(2,8*Mb-1),F(this,V,ea,Mb,U-1,-U));U=0;var Sa=1,S=0;for(this[ea]=V&255;++U<Mb&&(Sa*=256);)0>V&&0===S&&0!==this[ea+U-1]&&(S=1),this[ea+U]=(V/Sa>>0)-S&255;return ea+Mb};c.prototype.writeIntBE=function(V,
ea,Mb,U){V=+V;ea>>>=0;U||(U=Math.pow(2,8*Mb-1),F(this,V,ea,Mb,U-1,-U));U=Mb-1;var Sa=1,S=0;for(this[ea+U]=V&255;0<=--U&&(Sa*=256);)0>V&&0===S&&0!==this[ea+U+1]&&(S=1),this[ea+U]=(V/Sa>>0)-S&255;return ea+Mb};c.prototype.writeInt8=function(V,ea,Mb){V=+V;ea>>>=0;Mb||F(this,V,ea,1,127,-128);0>V&&(V=255+V+1);this[ea]=V&255;return ea+1};c.prototype.writeInt16LE=function(V,ea,Mb){V=+V;ea>>>=0;Mb||F(this,V,ea,2,32767,-32768);this[ea]=V&255;this[ea+1]=V>>>8;return ea+2};c.prototype.writeInt16BE=function(V,
ea,Mb){V=+V;ea>>>=0;Mb||F(this,V,ea,2,32767,-32768);this[ea]=V>>>8;this[ea+1]=V&255;return ea+2};c.prototype.writeInt32LE=function(V,ea,Mb){V=+V;ea>>>=0;Mb||F(this,V,ea,4,2147483647,-2147483648);this[ea]=V&255;this[ea+1]=V>>>8;this[ea+2]=V>>>16;this[ea+3]=V>>>24;return ea+4};c.prototype.writeInt32BE=function(V,ea,Mb){V=+V;ea>>>=0;Mb||F(this,V,ea,4,2147483647,-2147483648);0>V&&(V=4294967295+V+1);this[ea]=V>>>24;this[ea+1]=V>>>16;this[ea+2]=V>>>8;this[ea+3]=V&255;return ea+4};c.prototype.writeBigInt64LE=
Zb(function(V){return L(this,V,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});c.prototype.writeBigInt64BE=Zb(function(V){return G(this,V,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});c.prototype.writeFloatLE=function(V,ea,Mb){return ha(this,V,ea,!0,Mb)};c.prototype.writeFloatBE=function(V,ea,Mb){return ha(this,V,ea,!1,Mb)};c.prototype.writeDoubleLE=function(V,
ea,Mb){return Ha(this,V,ea,!0,Mb)};c.prototype.writeDoubleBE=function(V,ea,Mb){return Ha(this,V,ea,!1,Mb)};c.prototype.copy=function(V,ea,Mb,U){if(!c.isBuffer(V))throw new TypeError("argument should be a Buffer");Mb||(Mb=0);U||0===U||(U=this.length);ea>=V.length&&(ea=V.length);ea||(ea=0);0<U&&U<Mb&&(U=Mb);if(U===Mb||0===V.length||0===this.length)return 0;if(0>ea)throw new RangeError("targetStart out of bounds");if(0>Mb||Mb>=this.length)throw new RangeError("Index out of range");if(0>U)throw new RangeError("sourceEnd out of bounds");
U>this.length&&(U=this.length);V.length-ea<U-Mb&&(U=V.length-ea+Mb);var Sa=U-Mb;this===V&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(ea,Mb,U):Uint8Array.prototype.set.call(V,this.subarray(Mb,U),ea);return Sa};c.prototype.fill=function(V,ea,Mb,U){if("string"===typeof V){"string"===typeof ea?(U=ea,ea=0,Mb=this.length):"string"===typeof Mb&&(U=Mb,Mb=this.length);if(void 0!==U&&"string"!==typeof U)throw new TypeError("encoding must be a string");if("string"===typeof U&&!c.isEncoding(U))throw new TypeError("Unknown encoding: "+
U);if(1===V.length){var Sa=V.charCodeAt(0);if("utf8"===U&&128>Sa||"latin1"===U)V=Sa}}else"number"===typeof V?V&=255:"boolean"===typeof V&&(V=Number(V));if(0>ea||this.length<ea||this.length<Mb)throw new RangeError("Out of range index");if(Mb<=ea)return this;ea>>>=0;Mb=void 0===Mb?this.length:Mb>>>0;V||(V=0);if("number"===typeof V)for(U=ea;U<Mb;++U)this[U]=V;else{Sa=c.isBuffer(V)?V:c.from(V,U);var S=Sa.length;if(0===S)throw new TypeError('The value "'+V+'" is invalid for argument "value"');for(U=0;U<
Mb-ea;++U)this[U+ea]=Sa[U%S]}return this};var Kd={};Va("ERR_BUFFER_OUT_OF_BOUNDS",function(V){return V?"".concat(V," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError);Va("ERR_INVALID_ARG_TYPE",function(V,ea){return'The "'.concat(V,'" argument must be of type number. Received type ').concat(Jc(ea))},TypeError);Va("ERR_OUT_OF_RANGE",function(V,ea,Mb){V='The value of "'.concat(V,'" is out of range.');var U=Mb;if(Number.isInteger(Mb)&&Math.abs(Mb)>Math.pow(2,
32))U=hc(String(Mb));else if("bigint"===typeof Mb){U=String(Mb);if(Mb>Math.pow(BigInt(2),BigInt(32))||Mb<-Math.pow(BigInt(2),BigInt(32)))U=hc(U);U+="n"}return V+=" It must be ".concat(ea,". Received ").concat(U)},RangeError);var ra=/[^+/0-9A-Za-z-_]/g,Aa=function(){for(var V=Array(256),ea=0;16>ea;++ea)for(var Mb=16*ea,U=0;16>U;++U)V[Mb+U]="0123456789abcdef"[ea]+"0123456789abcdef"[U];return V}();return Os}();as.Buffer;as.INSPECT_MAX_BYTES;as.kMaxLength;var JO={},IO=!1,MO={},LO=!1,OO={},NO=!1,RO={},
QO=!1,LE={},SO=!1,VO={},UO=!1,XO={},WO=!1,ME="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,NE={},ZO=!1,o_="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,OE={},$O=!1,cP={},bP=!1,eP={},dP=!1,gP={},fP=!1,RE={},hP=!1,r_="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,SE={},jP=!1,TE={},kP=!1,mP={},lP=!1,iI={},WU=!1,jI="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Kl=
function(){function b(){c.call(this||jI)}if(WU)return iI;WU=!0;iI=b;var c=Rj.EventEmitter;nu()(b,c);b.Readable=aP();b.Writable=YO();b.Duplex=pu();b.Transform=iP();b.PassThrough=s_();b.finished=PE();b.pipeline=t_();b.Stream=b;b.prototype.pipe=function(g,a){function d(w){g.writable&&!1===g.write(w)&&r.pause&&r.pause()}function f(){r.readable&&r.resume&&r.resume()}function k(){t||(t=!0,g.end())}function n(){t||(t=!0,"function"===typeof g.destroy&&g.destroy())}function p(w){q();if(0===c.listenerCount(this||
jI,"error"))throw w;}function q(){r.removeListener("data",d);g.removeListener("drain",f);r.removeListener("end",k);r.removeListener("close",n);r.removeListener("error",p);g.removeListener("error",p);r.removeListener("end",q);r.removeListener("close",q);g.removeListener("close",q)}var r=this||jI;r.on("data",d);g.on("drain",f);g._isStdio||a&&!1===a.end||(r.on("end",k),r.on("close",n));var t=!1;r.on("error",p);g.on("error",p);r.on("end",q);r.on("close",q);g.on("close",q);g.emit("pipe",r);return g};return iI}(),
XU=Kl.Readable;XU.wrap=function(b,c){c=Object.assign({objectMode:null!=b.readableObjectMode||null!=b.objectMode||!0},c);c.destroy=function(g,a){b.destroy(g);a(g)};return(new XU(c)).wrap(b)};Kl.Writable;Kl.Duplex;Kl.Transform;Kl.PassThrough;Kl.finished;Kl.pipeline;Kl.Stream;rU(Kl.finished);rU(Kl.pipeline);var f6={},x_=f6=Array.isArray||function(b){return"[object Array]"==Object.prototype.toString.call(b)},ak={isArray:function(b){return Array.isArray?Array.isArray(b):"[object Array]"===Object.prototype.toString.call(b)},
isBoolean:function(b){return"boolean"===typeof b},isNull:function(b){return null===b},isNullOrUndefined:function(b){return null==b},isNumber:function(b){return"number"===typeof b},isString:function(b){return"string"===typeof b},isSymbol:function(b){return"symbol"===typeof b},isUndefined:function(b){return void 0===b},isRegExp:function(b){return"[object RegExp]"===Object.prototype.toString.call(b)},isObject:function(b){return"object"===typeof b&&null!==b},isDate:function(b){return"[object Date]"===
Object.prototype.toString.call(b)},isError:function(b){return"[object Error]"===Object.prototype.toString.call(b)||b instanceof Error},isFunction:function(b){return"function"===typeof b},isPrimitive:function(b){return null===b||"boolean"===typeof b||"number"===typeof b||"string"===typeof b||"symbol"===typeof b||"undefined"===typeof b}};ak.isBuffer=("default"in vU?Cj:vU).Buffer.isBuffer;ak.isBuffer;ak.isArray;ak.isBoolean;ak.isNull;ak.isNullOrUndefined;ak.isNumber;ak.isString;ak.isSymbol;ak.isUndefined;
ak.isRegExp;ak.isObject;ak.isDate;ak.isError;ak.isFunction;ak.isPrimitive;var ch="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,UE={},YU=Cj.Buffer,g6=YU.isEncoding||function(b){switch(b&&b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}},kI=UE.StringDecoder=function(b){(this||ch).encoding=(b||"utf8").toLowerCase().replace(/[-_]/,
"");if(b&&!g6(b))throw Error("Unknown encoding: "+b);switch((this||ch).encoding){case "utf8":(this||ch).surrogateSize=3;break;case "ucs2":case "utf16le":(this||ch).surrogateSize=2;(this||ch).detectIncompleteChar=v_;break;case "base64":(this||ch).surrogateSize=3;(this||ch).detectIncompleteChar=w_;break;default:(this||ch).write=u_;return}(this||ch).charBuffer=new YU(6);(this||ch).charReceived=0;(this||ch).charLength=0};kI.prototype.write=function(b){for(var c="";(this||ch).charLength;){c=b.length>=
(this||ch).charLength-(this||ch).charReceived?(this||ch).charLength-(this||ch).charReceived:b.length;b.copy((this||ch).charBuffer,(this||ch).charReceived,0,c);(this||ch).charReceived+=c;if((this||ch).charReceived<(this||ch).charLength)return"";b=b.slice(c,b.length);c=(this||ch).charBuffer.slice(0,(this||ch).charLength).toString((this||ch).encoding);var g=c.charCodeAt(c.length-1);if(55296<=g&&56319>=g)(this||ch).charLength+=(this||ch).surrogateSize,c="";else{(this||ch).charReceived=(this||ch).charLength=
0;if(0===b.length)return c;break}}this.detectIncompleteChar(b);var a=b.length;(this||ch).charLength&&(b.copy((this||ch).charBuffer,0,b.length-(this||ch).charReceived,a),a-=(this||ch).charReceived);c+=b.toString((this||ch).encoding,0,a);a=c.length-1;g=c.charCodeAt(a);return 55296<=g&&56319>=g?(g=(this||ch).surrogateSize,(this||ch).charLength+=g,(this||ch).charReceived+=g,(this||ch).charBuffer.copy((this||ch).charBuffer,g,0,g),b.copy((this||ch).charBuffer,0,0,g),c.substring(0,a)):c};kI.prototype.detectIncompleteChar=
function(b){for(var c=3<=b.length?3:b.length;0<c;c--){var g=b[b.length-c];if(1==c&&6==g>>5){(this||ch).charLength=2;break}if(2>=c&&14==g>>4){(this||ch).charLength=3;break}if(3>=c&&30==g>>3){(this||ch).charLength=4;break}}(this||ch).charReceived=c};kI.prototype.end=function(b){var c="";b&&b.length&&(c=this.write(b));(this||ch).charReceived&&(b=(this||ch).encoding,c+=(this||ch).charBuffer.slice(0,(this||ch).charReceived).toString(b));return c};var VE={},oP=!1,Lg="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,XE={},pP=!1,qn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,YE={},rP=!1,zi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,ZE={},tP=!1,Jk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,$E={},vP=!1,uP="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Dn={},ZU=!1;const Ps=function(){if(ZU)return Dn;ZU=!0;var b=Kl;Dn=Dn=nP();Dn.Stream=
b;Dn.Readable=Dn;Dn.Writable=qP();Dn.Duplex=WE();Dn.Transform=sP();Dn.PassThrough=y_();return Dn}();Ps.Stream;Ps.Readable;Ps.Writable;Ps.Duplex;Ps.Transform;Ps.PassThrough;var h6={},B_=Hw(oi),i6=Hw(Rj),j6=Hw(b6),k6=Hw(Ps),$U=Hw(Dj);$U(aF,Error);aF.prototype.name="NotFoundError";var l6=i6.EventEmitter,m6=new aF,aV=function(b,c,g,a){function d(k){var n={},p;if(a)for(p in a)"undefined"!==typeof a[p]&&(n[p]=a[p]);if(k)for(p in k)"undefined"!==typeof k[p]&&(n[p]=k[p]);return n}var f=new l6;f.sublevels=
{};f.options=a;f.version="6.5.4";f.methods={};c=c||[];f.put=function(k,n,p,q){"function"===typeof p&&(q=p,p={});b.apply([{key:k,value:n,prefix:c.slice(),type:"put"}],d(p),function(r){if(r)return q(r);f.emit("put",k,n);q(null)})};f.prefix=function(){return c.slice()};f.batch=function(k,n,p){"function"===typeof n&&(p=n,n={});k=k.map(function(q){return{key:q.key,value:q.value,prefix:q.prefix||c,keyEncoding:q.keyEncoding,valueEncoding:q.valueEncoding,type:q.type}});b.apply(k,d(n),function(q){if(q)return p(q);
f.emit("batch",k);p(null)})};f.get=function(k,n,p){"function"===typeof n&&(p=n,n={});b.get(k,c,d(n),function(q,r){q?p(m6):p(null,r)})};f.sublevel=function(k,n){return f.sublevels[k]=f.sublevels[k]||aV(b,c.concat(k),g,d(n))};f.readStream=f.createReadStream=function(k){k=d(k);k.prefix=c;var n=b.iterator(k);k=g(k,b.createDecoder(k));k.setIterator(n);return k};f.close=function(k){b.close(k)};f.isOpen=b.isOpen;f.isClosed=b.isClosed;return f},wP=k6.Readable;$U(fq,wP);fq.prototype.setIterator=function(b){this._iterator=
b;return this._destroyed?b.end(function(){}):this._waiting?(this._waiting=!1,this._read()):this};fq.prototype._read=function(){var b=this;if(!b._destroyed){if(!b._iterator)return this._waiting=!0;b._iterator.next(function(c,g,a){if(c||void 0===g&&void 0===a)return c||b._destroyed||b.push(null),b._cleanup(c);a=b._makeData(g,a);b._destroyed||b.push(a)})}};fq.prototype._cleanup=function(b){if(!this._destroyed){this._destroyed=!0;var c=this;b&&"iterator has ended"!==b.message&&c.emit("error",b);c._iterator?
c._iterator.end(function(){c._iterator=null;c.emit("close")}):c.emit("close")}};fq.prototype.destroy=function(){this._cleanup()};var n6={encode:function(b){return"\u00ff"+b[0]+"\u00ff"+b[1]},decode:function(b){b=b.toString();var c=b.indexOf("\u00ff",1);return[b.substring(1,c),b.substring(c+1)]},lowerBound:"\x00",upperBound:"\u00ff"},o6=new j6,p6=h6=function(b){return aV(A_(b,n6,o6),[],fq,b.options)},jp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,cv={},q6=fk,xP=
zo.Transform,bV=tf.inherits;bV(qu,xP);qu.prototype.destroy=function(b){if(!(this||jp)._destroyed){(this||jp)._destroyed=!0;var c=this||jp;q6.nextTick(function(){b&&c.emit("error",b);c.emit("close")})}};cv=bF(function(b,c,g){b=new qu(b);b._transform=c;g&&(b._flush=g);return b});cv.ctor=bF(function(b,c,g){function a(d){if(!((this||jp)instanceof a))return new a(d);(this||jp).options=Object.assign({},b,d);qu.call(this||jp,(this||jp).options)}bV(a,qu);a.prototype._transform=c;g&&(a.prototype._flush=g);
return a});cv.obj=bF(function(b,c,g){b=new qu(Object.assign({objectMode:!0,highWaterMark:16},b));b._transform=c;g&&(b._flush=g);return b});var cV=cv;cv.ctor;cv.obj;var r6={};Oi.prototype.toArray=function(){for(var b=this._length,c=Array(b),g=this._front,a=this._capacity,d=0;d<b;++d)c[d]=this[g+d&a-1];return c};Oi.prototype.push=function(b){var c=arguments.length,g=this._length;if(1<c){var a=this._capacity;if(g+c>a){for(var d=0;d<c;++d){this._checkCapacity(g+1);var f=this._front+g&this._capacity-1;
this[f]=arguments[d];g++;this._length=g}return g}f=this._front;for(d=0;d<c;++d)this[f+g&a-1]=arguments[d],f++;this._length=g+c;return g+c}if(0===c)return g;this._checkCapacity(g+1);d=this._front+g&this._capacity-1;this[d]=b;this._length=g+1;return g+1};Oi.prototype.pop=function(){var b=this._length;if(0!==b){var c=this._front+b-1&this._capacity-1,g=this[c];this[c]=void 0;this._length=b-1;return g}};Oi.prototype.shift=function(){var b=this._length;if(0!==b){var c=this._front,g=this[c];this[c]=void 0;
this._front=c+1&this._capacity-1;this._length=b-1;return g}};Oi.prototype.unshift=function(b){var c=this._length,g=arguments.length;if(1<g){var a=this._capacity;if(c+g>a){for(var d=g-1;0<=d;d--){this._checkCapacity(c+1);a=this._capacity;var f=(this._front-1&a-1^a)-a;this[f]=arguments[d];c++;this._length=c;this._front=f}return c}f=this._front;for(d=g-1;0<=d;d--)f=(f-1&a-1^a)-a,this[f]=arguments[d];this._front=f;this._length=c+g;return c+g}if(0===g)return c;this._checkCapacity(c+1);a=this._capacity;
d=(this._front-1&a-1^a)-a;this[d]=b;this._length=c+1;this._front=d;return c+1};Oi.prototype.peekBack=function(){var b=this._length;if(0!==b)return this[this._front+b-1&this._capacity-1]};Oi.prototype.peekFront=function(){if(0!==this._length)return this[this._front]};Oi.prototype.get=function(b){if(b===(b|0)){var c=this._length;0>b&&(b+=c);if(!(0>b||b>=c))return this[this._front+b&this._capacity-1]}};Oi.prototype.isEmpty=function(){return 0===this._length};Oi.prototype.clear=function(){for(var b=this._length,
c=this._front,g=this._capacity,a=0;a<b;++a)this[c+a&g-1]=void 0;this._front=this._length=0};Oi.prototype.toString=function(){return this.toArray().toString()};Oi.prototype.valueOf=Oi.prototype.toString;Oi.prototype.removeFront=Oi.prototype.shift;Oi.prototype.removeBack=Oi.prototype.pop;Oi.prototype.insertFront=Oi.prototype.unshift;Oi.prototype.insertBack=Oi.prototype.push;Oi.prototype.enqueue=Oi.prototype.push;Oi.prototype.dequeue=Oi.prototype.shift;Oi.prototype.toJSON=Oi.prototype.toArray;Object.defineProperty(Oi.prototype,
"length",{get:function(){return this._length},set:function(){throw new RangeError("");}});Oi.prototype._checkCapacity=function(b){this._capacity<b&&this._resizeTo(yP(1.5*this._capacity+16))};Oi.prototype._resizeTo=function(b){var c=this._capacity;this._capacity=b;b=this._front;var g=this._length;if(b+g>c)for(b=b+g&c-1,g=0;g<b;++g)this[g+c]=this[g+0],this[g+0]=void 0};var zP=Array.isArray,s6=r6=Oi,t6={},Ao=Cj.Buffer,u6=Object.prototype.toString,lI="function"===typeof Ao.alloc&&"function"===typeof Ao.allocUnsafe&&
"function"===typeof Ao.from,v6=t6=function(b,c,g){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if("ArrayBuffer"===u6.call(b).slice(8,-1)){c>>>=0;var a=b.byteLength-c;if(0>a)throw new RangeError("'offset' is out of bounds");if(void 0===g)g=a;else if(g>>>=0,g>a)throw new RangeError("'length' is out of bounds");return lI?Ao.from(b.slice(c,c+g)):new Ao(new Uint8Array(b.slice(c,c+g)))}if("string"===typeof b){g=c;if("string"!==typeof g||""===g)g="utf8";if(!Ao.isEncoding(g))throw new TypeError('"encoding" must be a valid string encoding');
return lI?Ao.from(b,g):new Ao(b,g)}return lI?Ao.from(b):new Ao(b)},nj={};Object.defineProperty(nj,"__esModule",{value:!0});nj.collectConflicts=function(b){var c=cF(b);b=AP(b.rev_tree);for(var g=[],a=0,d=b.length;a<d;a++){var f=b[a];f.rev===c||f.opts.deleted||g.push(f.rev)}return g};nj.collectLeaves=AP;nj.compactTree=function(b){var c=[];cA(b.rev_tree,function(g,a,d,f,k){"available"!==k.status||g||(c.push(a+"-"+d),k.status="missing")});return c};nj.isDeleted=function(b,c){c||(c=cF(b));c=c.substring(c.indexOf("-")+
1);b=b.rev_tree.map(H_);for(var g;g=b.pop();){if(g[0]===c)return!!g[1].deleted;b=b.concat(g[2])}};nj.isLocalId=function(b){return/^_local/.test(b)};nj.merge=function(b,c,g){b=EP(b,c);g=G_(b.tree,g);return{tree:g.tree,stemmedRevs:g.revs,conflicts:b.conflicts}};nj.revExists=function(b,c){b=b.slice();var g=c.split("-");c=parseInt(g[0],10);g=g[1];for(var a;a=b.pop();){if(a.pos===c&&a.ids[0]===g)return!0;for(var d=a.ids[2],f=0,k=d.length;f<k;f++)b.push({pos:a.pos+1,ids:d[f]})}return!1};nj.rootToLeaf=BP;
nj.traverseRevTree=cA;nj.winningRev=cF;nj.latest=function(b,c){for(var g=c.rev_tree.slice(),a;a=g.pop();){var d=a.pos,f=a.ids,k=f[0],n=f[1];f=f[2];var p=0===f.length;a=a.history?a.history.slice():[];a.push({id:k,pos:d,opts:n});if(p)for(n=0,p=a.length;n<p;n++){var q=a[n];if(q.pos+"-"+q.id===b)return d+"-"+k}k=0;for(n=f.length;k<n;k++)g.push({pos:d+1,ids:f[k],history:a})}throw Error("Unable to resolve latest revision for id "+c.id+", rev "+b);};nj.__esModule;nj.collectConflicts;nj.collectLeaves;nj.compactTree;
nj.isDeleted;nj.isLocalId;nj.merge;nj.revExists;nj.rootToLeaf;nj.traverseRevTree;nj.winningRev;nj.latest;var Vi={};Object.defineProperty(Vi,"__esModule",{value:!0});var bs=sg,Iw=ij,IP=sp,Yl=eg,Ll=nj,I_=FP("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),J_=FP("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" "));
Vi.invalidIdError=bs.invalidIdError;Vi.normalizeDdocFunctionName=bs.normalizeDdocFunctionName;Vi.parseDdocFunctionName=bs.parseDdocFunctionName;Vi.isDeleted=Ll.isDeleted;Vi.isLocalId=Ll.isLocalId;Vi.allDocsKeysQuery=function(b,c){var g={offset:c.skip};return Promise.all(c.keys.map(function(a){var d=bs.assign({key:a,deleted:"ok"},c);["limit","skip","keys"].forEach(function(f){delete d[f]});return new Promise(function(f,k){b._allDocs(d,function(n,p){if(n)return k(n);c.update_seq&&void 0!==p.update_seq&&
(g.update_seq=p.update_seq);g.total_rows=p.total_rows;f(p.rows[0]||{key:a,error:"not_found"})})})})).then(function(a){g.rows=a;return g})};Vi.parseDoc=HP;Vi.preprocessAttachments=function(b,c,g){function a(){d++;b.length===d&&(f?g(f):g())}if(!b.length)return g();var d=0,f;b.forEach(function(k){function n(t){f=t;q++;q===p.length&&a()}var p=k.data&&k.data._attachments?Object.keys(k.data._attachments):[],q=0;if(!p.length)return a();for(var r in k.data._attachments)k.data._attachments.hasOwnProperty(r)&&
M_(k.data._attachments[r],c,n)})};Vi.processDocs=function(b,c,g,a,d,f,k,n,p){b=b||1E3;var q=n.new_edits,r=new Cn.Map,t=0,w=c.length;c.forEach(function(x,B){if(x._id&&Ll.isLocalId(x._id))g[x._deleted?"_removeLocal":"_putLocal"](x,{ctx:d},function(F,L){f[B]=F||L;++t===w&&p&&p()});else{var D=x.metadata.id;r.has(D)?(w--,r.get(D).push([x,B])):r.set(D,[[x,B]])}});r.forEach(function(x,B){function D(){++L<x.length?F():++t===w&&p&&p()}function F(){var G=x[L],oa=G[0];G=G[1];if(a.has(B))JP(b,a.get(B),oa,f,G,
D,k,q);else{var ha=Ll.merge([],oa.metadata.rev_tree[0],b);oa.metadata.rev_tree=ha.tree;oa.stemmedRevs=ha.stemmedRevs||[];ha=Ll.winningRev(oa.metadata);var Ha=Ll.isDeleted(oa.metadata,ha);"was_delete"in n&&Ha?(f[G]=Yl.createError(Yl.MISSING_DOC,"deleted"),D()):q&&"missing"===oa.metadata.rev_tree[0].ids[1].status?(oa=Yl.createError(Yl.REV_CONFLICT),f[G]=oa,D()):k(oa,ha,Ha,Ha,!1,Ha?0:1,G,D)}}var L=0;F()})};Vi.updateDoc=JP;Vi.__esModule;Vi.invalidIdError;Vi.normalizeDdocFunctionName;Vi.parseDdocFunctionName;
Vi.isDeleted;Vi.isLocalId;Vi.allDocsKeysQuery;Vi.parseDoc;Vi.preprocessAttachments;Vi.processDocs;Vi.updateDoc;var Eq={};Object.defineProperty(Eq,"__esModule",{value:!0});var dV=Dq&&"object"===typeof Dq&&"default"in Dq?Dq["default"]:Dq;Eq.safeJsonParse=function(b){try{return JSON.parse(b)}catch(c){return dV.parse(b)}};Eq.safeJsonStringify=function(b){try{return JSON.stringify(b)}catch(c){return dV.stringify(b)}};Eq.__esModule;Eq.safeJsonParse;Eq.safeJsonStringify;var w6={},x6=Jw(V5),y6=Jw(p6),pB=
Jw(NH),z6=Jw(s6),A6=Jw(v6),Lw=nj,Kw=ij,rn=Cn;cs.prototype.get=function(b,c,g){var a=LP(this,b),d=a.get(c);if(d)return sg.nextTick(function(){g(null,d)});if(null===d)return sg.nextTick(function(){g({name:"NotFoundError"})});b.get(c,function(f,k){if(f)return"NotFoundError"===f.name&&a.set(c,null),g(f);a.set(c,k);g(null,k)})};cs.prototype.batch=function(b){for(var c=0,g=b.length;c<g;c++){var a=b[c],d=LP(this,a.prefix);"put"===a.type?d.set(a.key,a.value):d.set(a.key,null)}this._batch=this._batch.concat(b)};
cs.prototype.execute=function(b,c){for(var g=new rn.Set,a=[],d=this._batch.length-1;0<=d;d--){var f=this._batch[d],k=f.prefix.prefix()[0]+"\u00ff"+f.key;g.has(k)||(g.add(k),a.push(f))}b.batch(a,c)};var Sx=new rn.Map,B6={encode:Eq.safeJsonStringify,decode:Eq.safeJsonParse,buffer:!1,type:"cheap-json"},Tx=new sg.changesHandler,C6=w6=function(b,c){function g(){D.docStore=Ha.sublevel("document-store",{valueEncoding:B6});D.bySeqStore=Ha.sublevel("by-sequence",{valueEncoding:"json"});D.attachmentStore=Ha.sublevel("attach-store",
{valueEncoding:"json"});D.binaryStore=Ha.sublevel("attach-binary-store",{valueEncoding:"binary"});D.localStore=Ha.sublevel("local-store",{valueEncoding:"json"});D.metaStore=Ha.sublevel("meta-store",{valueEncoding:"json"});"object"===typeof b.migrate?b.migrate.doMigrationTwo(Ha,D,a):a()}function a(){D.metaStore.get("_local_last_update_seq",function(Va,hc){"undefined"===typeof Ha._updateSeq&&(Ha._updateSeq=hc||0);D.metaStore.get("_local_doc_count",function(qc,jc){Ha._docCount=qc?0:jc;D.metaStore.get("_local_uuid",
function(Ya,xa){B=Ya?sg.uuid():xa;D.metaStore.put("_local_uuid",B,function(){sg.nextTick(function(){c(null,x)})})})})})}function d(Va){return Ha.isClosed()?Va(Error("database is closed")):Va(null,Ha._docCount)}function f(Va,hc){try{Va.apply(null,hc)}catch(qc){hc[hc.length-1](qc)}}function k(){var Va=Ha._queue.peekFront();"read"===Va.type?n(Va):p(Va)}function n(Va){var hc=[Va];Va=1;for(var qc=Ha._queue.get(Va);"undefined"!==typeof qc&&"read"===qc.type;)hc.push(qc),Va++,qc=Ha._queue.get(Va);var jc=
0;hc.forEach(function(Ya){var xa=Ya.args,tc=xa[xa.length-1];xa[xa.length-1]=pB(function(Qb){tc.apply(null,Qb);++jc===hc.length&&sg.nextTick(function(){hc.forEach(function(){Ha._queue.shift()});Ha._queue.length&&k()})});f(Ya.fun,xa)})}function p(Va){var hc=Va.args,qc=hc[hc.length-1];hc[hc.length-1]=pB(function(jc){qc.apply(null,jc);sg.nextTick(function(){Ha._queue.shift();Ha._queue.length&&k()})});f(Va.fun,hc)}function q(Va){return pB(function(hc){Ha._queue.push({fun:Va,args:hc,type:"write"});1===
Ha._queue.length&&sg.nextTick(k)})}function r(Va){return pB(function(hc){Ha._queue.push({fun:Va,args:hc,type:"read"});1===Ha._queue.length&&sg.nextTick(k)})}function t(Va){return("0000000000000000"+Va).slice(-16)}function w(Va,hc){"destroy"in G?G.destroy(Va,hc):hc(null)}b=sg.clone(b);var x=this,B,D={},F=b.revs_limit,L=b.name;"undefined"===typeof b.createIfMissing&&(b.createIfMissing=!0);var G=b.db,oa=sg.functionName(G);if(Sx.has(oa))var ha=Sx.get(oa);else ha=new rn.Map,Sx.set(oa,ha);if(ha.has(L)){var Ha=
ha.get(L);g()}else ha.set(L,y6(x6(G(L),b,function(Va){if(Va)return ha.delete(L),c(Va);Ha=ha.get(L);Ha._docCount=-1;Ha._queue=new z6;"object"===typeof b.migrate?b.migrate.doMigrationOne(L,Ha,g):g()})));x._remote=!1;x.type=function(){return"leveldb"};x._id=function(Va){Va(null,B)};x._info=function(Va){var hc={doc_count:Ha._docCount,update_seq:Ha._updateSeq,backend_adapter:sg.functionName(G)};return sg.nextTick(function(){Va(null,hc)})};x._get=r(function(Va,hc,qc){hc=sg.clone(hc);D.docStore.get(Va,function(jc,
Ya){if(jc||!Ya)return qc(eg.createError(eg.MISSING_DOC,"missing"));if(hc.rev)var xa=hc.latest?Lw.latest(hc.rev,Ya):hc.rev;else if(xa=dF(Ya),"deleted"in Ya?Ya.deleted:Vi.isDeleted(Ya,xa))return qc(eg.createError(eg.MISSING_DOC,"deleted"));D.bySeqStore.get(t(Ya.rev_map[xa]),function(tc,Qb){if(!Qb)return qc(eg.createError(eg.MISSING_DOC));if("_id"in Qb&&Qb._id!==Ya.id)return qc(Error("wrong doc returned"));Qb._id=Ya.id;if("_rev"in Qb){if(Qb._rev!==xa)return qc(Error("wrong doc returned"))}else Qb._rev=
xa;return qc(null,{doc:Qb,metadata:Ya})})})});x._getAttachment=function(Va,hc,qc,jc,Ya){var xa=qc.content_type;D.binaryStore.get(qc.digest,function(tc,Qb){if(tc)return"NotFoundError"!==tc.name?Ya(tc):Ya(null,jc.binary?Kw.blob([""],{type:xa}):"");jc.binary?Ya(null,KP(Qb,xa)):Ya(null,Qb.toString("base64"))})};x._bulkDocs=q(function(Va,hc,qc){function jc(U,Sa){Kd.get(D.attachmentStore,U,function(S){S?(S=eg.createError(eg.MISSING_STUB,"unknown stub attachment with digest "+U),Sa(S)):Sa()})}function Ya(U){function Sa(){if(++S===
V.length)return U(Sc)}var S=0,Sc;V.forEach(function(xd){if(xd._id&&Vi.isLocalId(xd._id))return Sa();Kd.get(D.docStore,xd._id,function(Ae,ee){Ae?"NotFoundError"!==Ae.name&&(Sc=Ae):$a.set(xd._id,ee);Sa()})})}function xa(U,Sa){var S=Promise.resolve();U.forEach(function(Sc,xd){S=S.then(function(){return new Promise(function(Ae,ee){x._doCompactionNoLock(xd,Sc,{ctx:Kd},function(Fe){if(Fe)return ee(Fe);Ae()})})})});S.then(function(){Sa()},Sa)}function tc(U){var Sa=new rn.Map;$a.forEach(function(S,Sc){Sa.set(Sc,
Lw.compactTree(S))});xa(Sa,U)}function Qb(){xa(dd,function(U){U&&Oa(U);if(x.auto_compaction)return tc(Oa);Oa()})}function wc(U,Sa,S,Sc,xd,Ae,ee,Fe){function Mf(yi){Ei++;Rh||(yi?(Rh=yi,Fe(Rh)):Ei===Xj.length&&Yg())}function Tg(yi,dj,I,Na){return function(z){$c(yi,"md5-"+z,dj,I,Na)}}function pg(yi,dj,I){return function(Na){sp.binaryMd5(Na,Tg(yi,dj,Na,I))}}function Yg(){var yi=U.metadata.rev_map[U.metadata.rev];if(yi)return Fe();yi=++Aa;U.metadata.rev_map[U.metadata.rev]=U.metadata.seq=yi;yi=[{key:t(yi),
value:U.data,prefix:D.bySeqStore,type:"put"},{key:U.metadata.id,value:U.metadata,prefix:D.docStore,type:"put"}];Kd.batch(yi);la[ee]={ok:!0,id:U.metadata.id,rev:U.metadata.rev};$a.set(U.metadata.id,U.metadata);Fe()}ra+=Ae;var Rh=null,Ei=0;U.metadata.winningRev=Sa;U.metadata.deleted=S;U.data._id=U.metadata.id;U.data._rev=U.metadata.rev;Sc&&(U.data._deleted=!0);U.stemmedRevs.length&&dd.set(U.metadata.id,U.stemmedRevs);var Xj=U.data._attachments?Object.keys(U.data._attachments):[];for(Sa=0;Sa<Xj.length;Sa++)if(S=
Xj[Sa],Sc=U.data._attachments[S],Sc.stub)Zb(U.data._id,U.data._rev,Sc.digest,Mf);else if("string"===typeof Sc.data){try{var Aj=Kw.atob(Sc.data)}catch(yi){qc(eg.createError(eg.BAD_ARG,"Attachment is not a valid base64 string"));return}pg(U,S,Mf)(Aj)}else N_(Sc.data,pg(U,S,Mf));Xj.length||Yg()}function Zb(U,Sa,S,Sc){function xd(){return new Promise(function(Fe,Mf){Kd.get(D.attachmentStore,S,function(Tg,pg){if(Tg&&"NotFoundError"!==Tg.name)return Mf(Tg);Fe(pg)})})}function Ae(Fe){var Mf=[U,Sa].join("@"),
Tg={};Fe?Fe.refs&&(Tg.refs=Fe.refs,Tg.refs[Mf]=!0):(Tg.refs={},Tg.refs[Mf]=!0);return new Promise(function(pg){Kd.batch([{type:"put",prefix:D.attachmentStore,key:S,value:Tg}]);pg(!Fe)})}var ee=Mb[S]||Promise.resolve();Mb[S]=ee.then(function(){return xd().then(Ae).then(function(Fe){Sc(null,Fe)},Sc)})}function $c(U,Sa,S,Sc,xd){S=U.data._attachments[S];delete S.data;S.digest=Sa;S.length=Sc.length;var Ae=U.metadata.id;U=U.metadata.rev;S.revpos=parseInt(U,10);Zb(Ae,U,Sa,function(ee,Fe){if(ee||0===Sc.length||
!Fe)return xd(ee);Kd.batch([{type:"put",prefix:D.binaryStore,key:Sa,value:A6(Sc,"binary")}]);xd()})}function Oa(U){if(U)return sg.nextTick(function(){qc(U)});Kd.batch([{prefix:D.metaStore,type:"put",key:"_local_last_update_seq",value:Aa},{prefix:D.metaStore,type:"put",key:"_local_doc_count",value:Ha._docCount+ra}]);Kd.execute(Ha,function(Sa){if(Sa)return qc(Sa);Ha._docCount+=ra;Ha._updateSeq=Aa;Tx.notify(L);sg.nextTick(function(){qc(null,la)})})}var md=hc.new_edits,la=Array(Va.docs.length),$a=new rn.Map,
dd=new rn.Map,Kd=new cs,ra=0,Aa=Ha._updateSeq,V=Va.docs,ea=V.map(function(U){if(U._id&&Vi.isLocalId(U._id))return U;U=Vi.parseDoc(U,md,x.__opts);U.metadata&&!U.metadata.rev_map&&(U.metadata.rev_map={});return U});Va=ea.filter(function(U){return U.error});if(Va.length)return qc(Va[0]);var Mb={};if(!ea.length)return qc(null,[]);(function(U){var Sa=[];V.forEach(function(xd){xd&&xd._attachments&&Object.keys(xd._attachments).forEach(function(Ae){Ae=xd._attachments[Ae];Ae.stub&&Sa.push(Ae.digest)})});if(!Sa.length)return U();
var S=0,Sc;Sa.forEach(function(xd){jc(xd,function(Ae){Ae&&!Sc&&(Sc=Ae);++S===Sa.length&&U(Sc)})})})(function(U){if(U)return qc(U);Ya(function(Sa){if(Sa)return qc(Sa);Vi.processDocs(F,ea,x,$a,Kd,la,wc,hc,Qb)})})});x._allDocs=function(Va,hc){return"keys"in Va?Vi.allDocsKeysQuery(this,Va):r(function(qc,jc){qc=sg.clone(qc);d(function(Ya,xa){if(Ya)return jc(Ya);Ya={};var tc=qc.skip||0;qc.startkey&&(Ya.gte=qc.startkey);qc.endkey&&(Ya.lte=qc.endkey);qc.key&&(Ya.gte=Ya.lte=qc.key);if(qc.descending){Ya.reverse=
!0;var Qb=Ya.lte;Ya.lte=Ya.gte;Ya.gte=Qb}if("number"===typeof qc.limit)var wc=qc.limit;if(0===wc||"gte"in Ya&&"lte"in Ya&&Ya.gte>Ya.lte)return Ya={total_rows:xa,offset:qc.skip,rows:[]},qc.update_seq&&(Ya.update_seq=Ha._updateSeq),jc(null,Ya);var Zb=[],$c=D.docStore.readStream(Ya),Oa=cV.obj(function(md,la,$a){function dd(V){var ea={id:Kd.id,key:Kd.id,value:{rev:ra}};if(qc.include_docs){ea.doc=V;ea.doc._rev=ea.value.rev;qc.conflicts&&(V=Lw.collectConflicts(Kd),V.length&&(ea.doc._conflicts=V));for(var Mb in ea.doc._attachments)ea.doc._attachments.hasOwnProperty(Mb)&&
(ea.doc._attachments[Mb].stub=!0)}if(!1===qc.inclusive_end&&Kd.id===qc.endkey)return $a();if(Aa)if("ok"===qc.deleted)ea.value.deleted=!0,ea.doc=null;else return $a();Zb.push(ea);$a()}var Kd=md.value,ra=dF(Kd),Aa="deleted"in Kd?Kd.deleted:Vi.isDeleted(Kd,ra);if(!Aa){if(0<tc--){$a();return}if("number"===typeof wc&&0>=wc--){$c.unpipe();$c.destroy();$a();return}}else if("ok"!==qc.deleted){$a();return}qc.include_docs?D.bySeqStore.get(t(Kd.rev_map[ra]),function(V,ea){dd(ea)}):dd()},function(md){Promise.resolve().then(function(){if(qc.include_docs&&
qc.attachments)return eF(Zb,D,qc)}).then(function(){var la={total_rows:xa,offset:qc.skip,rows:Zb};qc.update_seq&&(la.update_seq=Ha._updateSeq);jc(null,la)},jc);md()}).on("unpipe",function(){Oa.end()});$c.on("error",jc);$c.pipe(Oa)})})(Va,hc)};x._changes=function(Va){function hc(){Va.done=!0;Va.return_docs&&Va.limit&&Va.limit<Ya.length&&(Ya.length=Va.limit);md.unpipe(la);md.destroy();Va.continuous||Va.cancelled||(Va.include_docs&&Va.attachments&&Va.return_docs?eF(Ya,D,Va).then(function(){Va.complete(null,
{results:Ya,last_seq:xa})}):Va.complete(null,{results:Ya,last_seq:xa}))}Va=sg.clone(Va);if(Va.continuous){var qc=L+":"+sg.uuid();Tx.addListener(L,qc,x,Va);Tx.notify(L);return{cancel:function(){Tx.removeListener(L,qc)}}}var jc=Va.descending,Ya=[],xa=Va.since||0,tc=0,Qb={reverse:jc};if("limit"in Va&&0<Va.limit)var wc=Va.limit;Qb.reverse||(Qb.start=t(Va.since||0));var Zb=Va.doc_ids&&new rn.Set(Va.doc_ids),$c=sg.filterChange(Va),Oa=new rn.Map,md=D.bySeqStore.readStream(Qb),la=cV.obj(function($a,dd,Kd){function ra(ea){function Mb(Sa){var S=
Va.processChange(Sa,ea,Va);S.seq=ea.seq;Sa=$c(S);if("object"===typeof Sa)return Va.complete(Sa);if(Sa){tc++;if(Va.attachments&&Va.include_docs)eF([S],D,Va).then(function(){Va.onChange(S)});else Va.onChange(S);Va.return_docs&&Ya.push(S)}Kd()}var U=dF(ea);if(ea.seq!==Aa)return Kd();xa=Aa;if(U===V._rev)return Mb(V);D.bySeqStore.get(t(ea.rev_map[U]),function(Sa,S){Mb(S)})}if(wc&&tc>=wc)return hc(),Kd();if(Va.cancelled||Va.done)return Kd();var Aa=parseInt($a.key,10),V=$a.value;if(Aa===Va.since&&!jc||Zb&&
!Zb.has(V._id))return Kd();if($a=Oa.get(V._id))return ra($a);D.docStore.get(V._id,function(ea,Mb){if(Va.cancelled||Va.done||Ha.isClosed()||Vi.isLocalId(Mb.id))return Kd();Oa.set(V._id,Mb);ra(Mb)})},function($a){if(Va.cancelled)return $a();Va.return_docs&&Va.limit&&Va.limit<Ya.length&&(Ya.length=Va.limit);$a()}).on("unpipe",function(){la.end();hc()});md.pipe(la);return{cancel:function(){Va.cancelled=!0;hc()}}};x._close=function(Va){if(Ha.isClosed())return Va(eg.createError(eg.NOT_OPEN));Ha.close(function(hc){hc?
Va(hc):(ha.delete(L),Va())})};x._getRevisionTree=function(Va,hc){D.docStore.get(Va,function(qc,jc){qc?hc(eg.createError(eg.MISSING_DOC)):hc(null,jc.rev_tree)})};x._doCompaction=q(function(Va,hc,qc,jc){x._doCompactionNoLock(Va,hc,qc,jc)});x._doCompactionNoLock=function(Va,hc,qc,jc){"function"===typeof qc&&(jc=qc,qc={});if(!hc.length)return jc();var Ya=qc.ctx||new cs;Ya.get(D.docStore,Va,function(xa,tc){function Qb($a){$a&&(la=$a);if(++md===hc.length){if(la)return jc(la);Zb()}}function wc($a){if($a)return jc($a);
Ya.batch($c);if(qc.ctx)return jc();Ya.execute(Ha,jc)}function Zb(){function $a(V){V&&(ra=V);++Kd===dd.length&&wc(ra)}var dd=Object.keys(Oa);if(!dd.length)return wc();var Kd=0,ra,Aa=new rn.Map;hc.forEach(function(V){Aa.set(Va+"@"+V,!0)});dd.forEach(function(V){Ya.get(D.attachmentStore,V,function(ea,Mb){if(ea)return"NotFoundError"===ea.name?$a():$a(ea);ea=Object.keys(Mb.refs||{}).filter(function(Sa){return!Aa.has(Sa)});var U={};ea.forEach(function(Sa){U[Sa]=!0});ea.length?$c.push({key:V,type:"put",
value:{refs:U},prefix:D.attachmentStore}):$c=$c.concat([{key:V,type:"del",prefix:D.attachmentStore},{key:V,type:"del",prefix:D.binaryStore}]);$a()})})}if(xa)return jc(xa);xa=hc.map(function($a){var dd=tc.rev_map[$a];delete tc.rev_map[$a];return dd});Lw.traverseRevTree(tc.rev_tree,function($a,dd,Kd,ra,Aa){-1!==hc.indexOf(dd+"-"+Kd)&&(Aa.status="missing")});var $c=[];$c.push({key:tc.id,value:tc,type:"put",prefix:D.docStore});var Oa={},md=0,la;xa.forEach(function($a){$c.push({key:t($a),type:"del",prefix:D.bySeqStore});
Ya.get(D.bySeqStore,t($a),function(dd,Kd){if(dd)return"NotFoundError"===dd.name?Qb():Qb(dd);Object.keys(Kd._attachments||{}).forEach(function(ra){Oa[Kd._attachments[ra].digest]=!0});Qb()})})})};x._getLocal=function(Va,hc){D.localStore.get(Va,function(qc,jc){qc?hc(eg.createError(eg.MISSING_DOC)):hc(null,jc)})};x._putLocal=function(Va,hc,qc){"function"===typeof hc&&(qc=hc,hc={});hc.ctx?x._putLocalNoLock(Va,hc,qc):x._putLocalWithLock(Va,hc,qc)};x._putLocalWithLock=q(function(Va,hc,qc){x._putLocalNoLock(Va,
hc,qc)});x._putLocalNoLock=function(Va,hc,qc){delete Va._revisions;var jc=Va._rev,Ya=Va._id,xa=hc.ctx||new cs;xa.get(D.localStore,Ya,function(tc,Qb){if(tc&&jc||Qb&&Qb._rev!==jc)return qc(eg.createError(eg.REV_CONFLICT));Va._rev=jc?"0-"+(parseInt(jc.split("-")[1],10)+1):"0-1";xa.batch([{type:"put",prefix:D.localStore,key:Ya,value:Va}]);var wc={ok:!0,id:Va._id,rev:Va._rev};if(hc.ctx)return qc(null,wc);xa.execute(Ha,function(Zb){if(Zb)return qc(Zb);qc(null,wc)})})};x._removeLocal=function(Va,hc,qc){"function"===
typeof hc&&(qc=hc,hc={});hc.ctx?x._removeLocalNoLock(Va,hc,qc):x._removeLocalWithLock(Va,hc,qc)};x._removeLocalWithLock=q(function(Va,hc,qc){x._removeLocalNoLock(Va,hc,qc)});x._removeLocalNoLock=function(Va,hc,qc){var jc=hc.ctx||new cs;jc.get(D.localStore,Va._id,function(Ya,xa){if(Ya)return"NotFoundError"!==Ya.name?qc(Ya):qc(eg.createError(eg.MISSING_DOC));if(xa._rev!==Va._rev)return qc(eg.createError(eg.REV_CONFLICT));jc.batch([{prefix:D.localStore,type:"del",key:Va._id}]);var tc={ok:!0,id:Va._id,
rev:"0-0"};if(hc.ctx)return qc(null,tc);jc.execute(Ha,function(Qb){if(Qb)return qc(Qb);qc(null,tc)})})};x._destroy=function(Va,hc){Va=sg.functionName(G);if(Sx.has(Va))var qc=Sx.get(Va);else return w(L,hc);qc.has(L)?(Tx.removeAllListeners(L),qc.get(L).close(function(){qc.delete(L);w(L,hc)})):w(L,hc)}},ds="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,D6={},eV=fk;fF.prototype.next=function(b){var c=this||ds;if("function"!=typeof b)throw Error("next() requires a callback argument");
if(c._ended)return b(Error("cannot call next() after end()"));if(c._nexting)return b(Error("cannot call next() before previous next() has completed"));c._nexting=!0;if("function"==typeof c._next)return c._next(function(){c._nexting=!1;b.apply(null,arguments)});eV.nextTick(function(){c._nexting=!1;b()})};fF.prototype.end=function(b){if("function"!=typeof b)throw Error("end() requires a callback argument");if((this||ds)._ended)return b(Error("end() already called on iterator"));(this||ds)._ended=!0;
if("function"==typeof(this||ds)._end)return this._end(b);eV.nextTick(b)};var fV=D6=fF,vj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,E6={},F6=fk;ru.prototype._checkWritten=function(){if((this||vj)._written)throw Error("write() already called on this batch");};ru.prototype.put=function(b,c){this._checkWritten();var g=(this||vj)._db._checkKey(b,"key",(this||vj)._db._isBuffer);if(g)throw g;(this||vj)._db._isBuffer(b)||(b=String(b));(this||vj)._db._isBuffer(c)||(c=
String(c));"function"==typeof(this||vj)._put?this._put(b,c):(this||vj)._operations.push({type:"put",key:b,value:c});return this||vj};ru.prototype.del=function(b){this._checkWritten();var c=(this||vj)._db._checkKey(b,"key",(this||vj)._db._isBuffer);if(c)throw c;(this||vj)._db._isBuffer(b)||(b=String(b));"function"==typeof(this||vj)._del?this._del(b):(this||vj)._operations.push({type:"del",key:b});return this||vj};ru.prototype.clear=function(){this._checkWritten();(this||vj)._operations=[];"function"==
typeof(this||vj)._clear&&this._clear();return this||vj};ru.prototype.write=function(b,c){this._checkWritten();"function"==typeof b&&(c=b);if("function"!=typeof c)throw Error("write() requires a callback argument");"object"!=typeof b&&(b={});(this||vj)._written=!0;if("function"==typeof(this||vj)._write)return this._write(c);if("function"==typeof(this||vj)._db._batch)return(this||vj)._db._batch((this||vj)._operations,b,c);F6.nextTick(c)};var G6=E6=ru,lj="undefined"!==typeof globalThis?globalThis:"undefined"!==
typeof self?self:global,gV={},H6=Cj.Buffer,Fq=fk;Zl.prototype.open=function(b,c){var g=this||lj,a=(this||lj).status;"function"==typeof b&&(c=b);if("function"!=typeof c)throw Error("open() requires a callback argument");"object"!=typeof b&&(b={});b.createIfMissing=0!=b.createIfMissing;b.errorIfExists=!!b.errorIfExists;"function"==typeof(this||lj)._open?((this||lj).status="opening",this._open(b,function(d){if(d)return g.status=a,c(d);g.status="open";c()})):((this||lj).status="open",Fq.nextTick(c))};
Zl.prototype.close=function(b){var c=this||lj,g=(this||lj).status;if("function"!=typeof b)throw Error("close() requires a callback argument");"function"==typeof(this||lj)._close?((this||lj).status="closing",this._close(function(a){if(a)return c.status=g,b(a);c.status="closed";b()})):((this||lj).status="closed",Fq.nextTick(b))};Zl.prototype.get=function(b,c,g){var a;"function"==typeof c&&(g=c);if("function"!=typeof g)throw Error("get() requires a callback argument");if(a=this._checkKey(b,"key",(this||
lj)._isBuffer))return g(a);this._isBuffer(b)||(b=String(b));"object"!=typeof c&&(c={});c.asBuffer=0!=c.asBuffer;if("function"==typeof(this||lj)._get)return this._get(b,c,g);Fq.nextTick(function(){g(Error("NotFound"))})};Zl.prototype.put=function(b,c,g,a){var d;"function"==typeof g&&(a=g);if("function"!=typeof a)throw Error("put() requires a callback argument");if(d=this._checkKey(b,"key",(this||lj)._isBuffer))return a(d);this._isBuffer(b)||(b=String(b));null==c||this._isBuffer(c)||Fq.browser||(c=
String(c));"object"!=typeof g&&(g={});if("function"==typeof(this||lj)._put)return this._put(b,c,g,a);Fq.nextTick(a)};Zl.prototype.del=function(b,c,g){var a;"function"==typeof c&&(g=c);if("function"!=typeof g)throw Error("del() requires a callback argument");if(a=this._checkKey(b,"key",(this||lj)._isBuffer))return g(a);this._isBuffer(b)||(b=String(b));"object"!=typeof c&&(c={});if("function"==typeof(this||lj)._del)return this._del(b,c,g);Fq.nextTick(g)};Zl.prototype.batch=function(b,c,g){if(!arguments.length)return this._chainedBatch();
"function"==typeof c&&(g=c);"function"==typeof b&&(g=b);if("function"!=typeof g)throw Error("batch(array) requires a callback argument");if(!Array.isArray(b))return g(Error("batch(array) requires an array argument"));c&&"object"==typeof c||(c={});for(var a=0,d=b.length,f,k;a<d;a++)if(f=b[a],"object"==typeof f&&((k=this._checkKey(f.type,"type",(this||lj)._isBuffer))||(k=this._checkKey(f.key,"key",(this||lj)._isBuffer))))return g(k);if("function"==typeof(this||lj)._batch)return this._batch(b,c,g);Fq.nextTick(g)};
Zl.prototype.approximateSize=function(b,c,g){if(null==b||null==c||"function"==typeof b||"function"==typeof c)throw Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof g)throw Error("approximateSize() requires a callback argument");this._isBuffer(b)||(b=String(b));this._isBuffer(c)||(c=String(c));if("function"==typeof(this||lj)._approximateSize)return this._approximateSize(b,c,g);Fq.nextTick(function(){g(null,0)})};Zl.prototype._setupIteratorOptions=
function(b){var c=this||lj;b=Zu(b);"start end gt gte lt lte".split(" ").forEach(function(g){b[g]&&c._isBuffer(b[g])&&0===b[g].length&&delete b[g]});b.reverse=!!b.reverse;b.keys=0!=b.keys;b.values=0!=b.values;b.limit="limit"in b?b.limit:-1;b.keyAsBuffer=0!=b.keyAsBuffer;b.valueAsBuffer=0!=b.valueAsBuffer;return b};Zl.prototype.iterator=function(b){"object"!=typeof b&&(b={});b=this._setupIteratorOptions(b);return"function"==typeof(this||lj)._iterator?this._iterator(b):new fV(this||lj)};Zl.prototype._chainedBatch=
function(){return new G6(this||lj)};Zl.prototype._isBuffer=function(b){return H6.isBuffer(b)};Zl.prototype._checkKey=function(b,c){if(null===b||void 0===b)return Error(c+" cannot be `null` or `undefined`");if(this._isBuffer(b)){if(0===b.length)return Error(c+" cannot be an empty Buffer")}else if(""===String(b))return Error(c+" cannot be an empty String")};gV=Zl;var I6=gV;var $i={},J6=Cj.Buffer;$i.compare=function(b,c){if(J6.isBuffer(b)){for(var g=Math.min(b.length,c.length),a=0;a<g;a++){var d=b[a]-
c[a];if(d)return d}return b.length-c.length}return b<c?-1:b>c?1:0};var K6=$i.lowerBoundKey=function(b){return jo(b,"gt")||jo(b,"gte")||jo(b,"min")||(b.reverse?jo(b,"end"):jo(b,"start"))||void 0},L6=$i.lowerBound=function(b){var c=K6(b);return c&&b[c]},M6=$i.lowerBoundInclusive=function(b){return Object.hasOwnProperty.call(b,"gt")?!1:!0},N6=$i.upperBoundInclusive=function(b){return Object.hasOwnProperty.call(b,"lt")?!1:!0},O6=$i.lowerBoundExclusive=function(b){return!M6(b)},P6=$i.upperBoundExclusive=
function(b){return!N6(b)},Q6=$i.upperBoundKey=function(b){return jo(b,"lt")||jo(b,"lte")||jo(b,"max")||(b.reverse?jo(b,"start"):jo(b,"end"))||void 0},R6=$i.upperBound=function(b){var c=Q6(b);return c&&b[c]};$i.toLtgt=function(b,c,g,a,d){c=c||{};g=g||P_;var f=3<arguments.length,k=$i.lowerBoundKey(b),n=$i.upperBoundKey(b);k?"gt"===k?c.gt=g(b.gt,!1):c.gte=g(b[k],!1):f&&(c.gte=g(a,!1));n?"lt"===n?c.lt=g(b.lt,!0):c.lte=g(b[n],!0):f&&(c.lte=g(d,!0));null!=b.reverse&&(c.reverse=!!b.reverse);Object.hasOwnProperty.call(c,
"max")&&delete c.max;Object.hasOwnProperty.call(c,"min")&&delete c.min;Object.hasOwnProperty.call(c,"start")&&delete c.start;Object.hasOwnProperty.call(c,"end")&&delete c.end;return c};$i.contains=function(b,c,g){g=g||$i.compare;var a=L6(b);if(void 0!==a&&""!==a&&(a=g(c,a),0>a||0===a&&O6(b)))return!1;a=R6(b);return void 0!==a&&""!==a&&(a=g(c,a),0<a||0===a&&P6(b))?!1:!0};$i.filter=function(b,c){return function(g){return $i.contains(b,g,c)}};$i.compare;$i.toLtgt;$i.contains;$i.filter;$i.lowerBoundKey;
$i.lowerBound;$i.lowerBoundInclusive;$i.upperBoundInclusive;$i.lowerBoundExclusive;$i.upperBoundExclusive;$i.upperBoundKey;$i.upperBound;var hV={};hV=function(b){return new su(b||Q_,null)};var Al=su.prototype;Object.defineProperty(Al,"keys",{get:function(){var b=[];this.forEach(function(c,g){b.push(c)});return b}});Object.defineProperty(Al,"values",{get:function(){var b=[];this.forEach(function(c,g){b.push(g)});return b}});Object.defineProperty(Al,"length",{get:function(){return this.root?this.root._count:
0}});Al.insert=function(b,c){for(var g=this._compare,a=this.root,d=[],f=[];a;){var k=g(b,a.key);d.push(a);f.push(k);a=0>=k?a.left:a.right}d.push(new $l(0,b,c,null,null,1));for(b=d.length-2;0<=b;--b)a=d[b],d[b]=0>=f[b]?new $l(a._color,a.key,a.value,d[b+1],a.right,a._count+1):new $l(a._color,a.key,a.value,a.left,d[b+1],a._count+1);for(b=d.length-1;1<b;--b){f=d[b-1];a=d[b];if(1===f._color||1===a._color)break;c=d[b-2];if(c.left===f)if(f.left===a)if((k=c.right)&&0===k._color)f._color=1,c.right=gq(1,k),
c._color=0,--b;else{c._color=0;c.left=f.right;f._color=1;f.right=c;d[b-2]=f;d[b-1]=a;Ej(c);Ej(f);3<=b&&(b=d[b-3],b.left===c?b.left=f:b.right=f);break}else if((k=c.right)&&0===k._color)f._color=1,c.right=gq(1,k),c._color=0,--b;else{f.right=a.left;c._color=0;c.left=a.right;a._color=1;a.left=f;a.right=c;d[b-2]=a;d[b-1]=f;Ej(c);Ej(f);Ej(a);3<=b&&(b=d[b-3],b.left===c?b.left=a:b.right=a);break}else if(f.right===a)if((k=c.left)&&0===k._color)f._color=1,c.left=gq(1,k),c._color=0,--b;else{c._color=0;c.right=
f.left;f._color=1;f.left=c;d[b-2]=f;d[b-1]=a;Ej(c);Ej(f);3<=b&&(b=d[b-3],b.right===c?b.right=f:b.left=f);break}else if((k=c.left)&&0===k._color)f._color=1,c.left=gq(1,k),c._color=0,--b;else{f.left=a.right;c._color=0;c.right=a.left;a._color=1;a.right=f;a.left=c;d[b-2]=a;d[b-1]=f;Ej(c);Ej(f);Ej(a);3<=b&&(b=d[b-3],b.right===c?b.right=a:b.left=a);break}}d[0]._color=1;return new su(g,d[0])};Al.forEach=function(b,c,g){if(this.root)switch(arguments.length){case 1:return gF(b,this.root);case 2:return hF(c,
this._compare,b,this.root);case 3:if(!(0<=this._compare(c,g)))return iF(c,g,this._compare,b,this.root)}};Object.defineProperty(Al,"begin",{get:function(){for(var b=[],c=this.root;c;)b.push(c),c=c.left;return new am(this,b)}});Object.defineProperty(Al,"end",{get:function(){for(var b=[],c=this.root;c;)b.push(c),c=c.right;return new am(this,b)}});Al.at=function(b){if(0>b)return new am(this,[]);for(var c=this.root,g=[];;){g.push(c);if(c.left){if(b<c.left._count){c=c.left;continue}b-=c.left._count}if(!b)return new am(this,
g);--b;if(c.right){if(b>=c.right._count)break;c=c.right}else break}return new am(this,[])};Al.ge=function(b){for(var c=this._compare,g=this.root,a=[],d=0;g;){var f=c(b,g.key);a.push(g);0>=f&&(d=a.length);g=0>=f?g.left:g.right}a.length=d;return new am(this,a)};Al.gt=function(b){for(var c=this._compare,g=this.root,a=[],d=0;g;){var f=c(b,g.key);a.push(g);0>f&&(d=a.length);g=0>f?g.left:g.right}a.length=d;return new am(this,a)};Al.lt=function(b){for(var c=this._compare,g=this.root,a=[],d=0;g;){var f=c(b,
g.key);a.push(g);0<f&&(d=a.length);g=0>=f?g.left:g.right}a.length=d;return new am(this,a)};Al.le=function(b){for(var c=this._compare,g=this.root,a=[],d=0;g;){var f=c(b,g.key);a.push(g);0<=f&&(d=a.length);g=0>f?g.left:g.right}a.length=d;return new am(this,a)};Al.find=function(b){for(var c=this._compare,g=this.root,a=[];g;){var d=c(b,g.key);a.push(g);if(0===d)return new am(this,a);g=0>=d?g.left:g.right}return new am(this,[])};Al.remove=function(b){return(b=this.find(b))?b.remove():this};Al.get=function(b){for(var c=
this._compare,g=this.root;g;){var a=c(b,g.key);if(0===a)return g.value;g=0>=a?g.left:g.right}};var Mm=am.prototype;Object.defineProperty(Mm,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(Mm,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});Mm.clone=function(){return new am(this.tree,this._stack.slice())};Mm.remove=function(){var b=this._stack;if(0===b.length)return this.tree;var c=Array(b.length),g=b[b.length-1];
c[c.length-1]=new $l(g._color,g.key,g.value,g.left,g.right,g._count);for(var a=b.length-2;0<=a;--a)g=b[a],c[a]=g.left===b[a+1]?new $l(g._color,g.key,g.value,c[a+1],g.right,g._count):new $l(g._color,g.key,g.value,g.left,c[a+1],g._count);g=c[c.length-1];if(g.left&&g.right){b=c.length;for(g=g.left;g.right;)c.push(g),g=g.right;a=c[b-1];c.push(new $l(g._color,a.key,a.value,g.left,g.right,g._count));c[b-1].key=g.key;c[b-1].value=g.value;for(a=c.length-2;a>=b;--a)g=c[a],c[a]=new $l(g._color,g.key,g.value,
g.left,c[a+1],g._count);c[b-1].left=c[b]}g=c[c.length-1];if(0===g._color)for(a=c[c.length-2],a.left===g?a.left=null:a.right===g&&(a.right=null),c.pop(),a=0;a<c.length;++a)c[a]._count--;else if(g.left||g.right)for(g.left?MP(g,g.left):g.right&&MP(g,g.right),g._color=1,a=0;a<c.length-1;++a)c[a]._count--;else{if(1===c.length)return new su(this.tree._compare,null);for(a=0;a<c.length;++a)c[a]._count--;a=c[c.length-2];for(var d,f,k,n=c.length-1;0<=n;--n){b=c[n];if(0===n){b._color=1;break}d=c[n-1];if(d.left===
b){f=d.right;if(f.right&&0===f.right._color){f=d.right=ko(f);k=f.right=ko(f.right);d.right=f.left;f.left=d;f.right=k;f._color=d._color;b._color=1;d._color=1;k._color=1;Ej(d);Ej(f);if(1<n){var p=c[n-2];p.left===d?p.left=f:p.right=f}c[n-1]=f;break}else if(f.left&&0===f.left._color){f=d.right=ko(f);k=f.left=ko(f.left);d.right=k.left;f.left=k.right;k.left=d;k.right=f;k._color=d._color;d._color=1;f._color=1;b._color=1;Ej(d);Ej(f);Ej(k);1<n&&(p=c[n-2],p.left===d?p.left=k:p.right=k);c[n-1]=k;break}if(1===
f._color)if(0===d._color){d._color=1;d.right=gq(0,f);break}else d.right=gq(0,f);else f=ko(f),d.right=f.left,f.left=d,f._color=d._color,d._color=0,Ej(d),Ej(f),1<n&&(p=c[n-2],p.left===d?p.left=f:p.right=f),c[n-1]=f,c[n]=d,n+1<c.length?c[n+1]=b:c.push(b),n+=2}else{f=d.left;if(f.left&&0===f.left._color){f=d.left=ko(f);k=f.left=ko(f.left);d.left=f.right;f.right=d;f.left=k;f._color=d._color;b._color=1;d._color=1;k._color=1;Ej(d);Ej(f);1<n&&(p=c[n-2],p.right===d?p.right=f:p.left=f);c[n-1]=f;break}else if(f.right&&
0===f.right._color){f=d.left=ko(f);k=f.right=ko(f.right);d.left=k.right;f.right=k.left;k.right=d;k.left=f;k._color=d._color;d._color=1;f._color=1;b._color=1;Ej(d);Ej(f);Ej(k);1<n&&(p=c[n-2],p.right===d?p.right=k:p.left=k);c[n-1]=k;break}if(1===f._color)if(0===d._color){d._color=1;d.left=gq(0,f);break}else d.left=gq(0,f);else f=ko(f),d.left=f.right,f.right=d,f._color=d._color,d._color=0,Ej(d),Ej(f),1<n&&(p=c[n-2],p.right===d?p.right=f:p.left=f),c[n-1]=f,c[n]=d,n+1<c.length?c[n+1]=b:c.push(b),n+=2}}a.left===
g?a.left=null:a.right=null}return new su(this.tree._compare,c[0])};Object.defineProperty(Mm,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(Mm,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(Mm,"index",{get:function(){var b=0,c=this._stack;if(0===c.length)return(b=this.tree.root)?b._count:0;c[c.length-1].left&&(b=c[c.length-1].left._count);
for(var g=c.length-2;0<=g;--g)c[g+1]===c[g].right&&(++b,c[g].left&&(b+=c[g].left._count));return b},enumerable:!0});Mm.next=function(){var b=this._stack;if(0!==b.length){var c=b[b.length-1];if(c.right)for(c=c.right;c;)b.push(c),c=c.left;else for(b.pop();0<b.length&&b[b.length-1].right===c;)c=b[b.length-1],b.pop()}};Object.defineProperty(Mm,"hasNext",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].right)return!0;for(var c=b.length-1;0<c;--c)if(b[c-1].left===b[c])return!0;
return!1}});Mm.update=function(b){var c=this._stack;if(0===c.length)throw Error("Can't update empty node!");var g=Array(c.length),a=c[c.length-1];g[g.length-1]=new $l(a._color,a.key,b,a.left,a.right,a._count);for(b=c.length-2;0<=b;--b)a=c[b],g[b]=a.left===c[b+1]?new $l(a._color,a.key,a.value,g[b+1],a.right,a._count):new $l(a._color,a.key,a.value,a.left,g[b+1],a._count);return new su(this.tree._compare,g[0])};Mm.prev=function(){var b=this._stack;if(0!==b.length){var c=b[b.length-1];if(c.left)for(c=
c.left;c;)b.push(c),c=c.right;else for(b.pop();0<b.length&&b[b.length-1].left===c;)c=b[b.length-1],b.pop()}};Object.defineProperty(Mm,"hasPrev",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].left)return!0;for(var c=b.length-1;0<c;--c)if(b[c-1].right===b[c])return!0;return!1}});var S6=hV,Ux={},mI=fk;Ux.test=function(){return"undefined"!==typeof mI&&!mI.browser};Ux.install=function(b){return function(){mI.nextTick(b)}};Ux.test;Ux.install;var iV="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,nI="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,oI={},jV=nI.MutationObserver||nI.WebKitMutationObserver;oI.test=function(){return jV};oI.install=function(b){var c=0;b=new jV(b);var g=nI.document.createTextNode("");b.observe(g,{characterData:!0});return function(){g.data=c=++c%2}};var pI="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,qB="undefined"!==typeof globalThis?globalThis:"undefined"!==
typeof self?self:global,kV={},Vx=[Ux,{test:function(){return"function"===typeof iV.queueMicrotask},install:function(b){return function(){iV.queueMicrotask(b)}}},oI,{test:function(){return pI.setImmediate?!1:"undefined"!==typeof pI.MessageChannel},install:function(b){var c=new pI.MessageChannel;c.port1.onmessage=b;return function(){c.port2.postMessage(0)}}},{test:function(){return"document"in qB&&"onreadystatechange"in qB.document.createElement("script")},install:function(b){return function(){var c=
qB.document.createElement("script");c.onreadystatechange=function(){b();c.onreadystatechange=null;c.parentNode.removeChild(c);c=null};qB.document.documentElement.appendChild(c);return b}}},{test:function(){return!0},install:function(b){return function(){setTimeout(b,0)}}}],tu,es,Mw=-1,hq=[],jF=!1,Wx=-1,T6=Vx.length;for(;++Wx<T6;)if(Vx[Wx]&&Vx[Wx].test&&Vx[Wx].test()){var U6=Vx[Wx].install(NP);break}OP.prototype.run=function(){var b=this.fun,c=this.array;switch(c.length){case 0:return b();case 1:return b(c[0]);
case 2:return b(c[0],c[1]);case 3:return b(c[0],c[1],c[2]);default:return b.apply(null,c)}};kV=function(b){var c=Array(arguments.length-1);if(1<arguments.length)for(var g=1;g<arguments.length;g++)c[g-1]=arguments[g];hq.push(new OP(b,c));jF||tu||(jF=!0,U6())};var rg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,V6={},rB=Cj.Buffer,lV=Dj,QP=I6,PP=fV,bm=$i,W_=S6,uu={},Bo=kV;lV(dA,PP);dA.prototype._next=function(b){if((this||rg)._done++>=(this||rg)._limit||!(this||rg)._tree.valid)return Bo(b);
var c=(this||rg)._tree.key;var g=(this||rg)._tree.value;if(!this._test(c))return Bo(b);(this||rg).keyAsBuffer&&(c=new rB(c));(this||rg).valueAsBuffer&&(g=new rB(g));(this||rg)._tree[(this||rg)._incr]();Bo(function(){b(null,c,g)})};dA.prototype._test=function(){return!0};cm.clearGlobalStore=function(b){b?Object.keys(uu).forEach(function(c){delete uu[c]}):uu={}};lV(cm,QP);cm.prototype._open=function(b,c){var g=this||rg;Bo(function(){c(null,g)})};cm.prototype._put=function(b,c,g,a){if("undefined"===
typeof c||null===c)c="";g=(this||rg)._store[(this||rg)._location].find(b);(this||rg)._store[(this||rg)._location]=g.valid?g.update(c):(this||rg)._store[(this||rg)._location].insert(b,c);Bo(a)};cm.prototype._get=function(b,c,g){var a=(this||rg)._store[(this||rg)._location].get(b);if("undefined"===typeof a)return Bo(function(){g(Error("NotFound"))});!1===c.asBuffer||this._isBuffer(a)||(a=new rB(String(a)));Bo(function(){g(null,a)})};cm.prototype._del=function(b,c,g){(this||rg)._store[(this||rg)._location]=
(this||rg)._store[(this||rg)._location].remove(b);Bo(g)};cm.prototype._batch=function(b,c,g){c=-1;for(var a,d,f,k=b.length,n=(this||rg)._store[(this||rg)._location];++c<k;)b[c]&&(a=this._isBuffer(b[c].key)?b[c].key:String(b[c].key),f=n.find(a),"put"===b[c].type?(d=this._isBuffer(b[c].value)?b[c].value:String(b[c].value),n=f.valid?f.update(d):n.insert(a,d)):n=f.remove());(this||rg)._store[(this||rg)._location]=n;Bo(g)};cm.prototype._iterator=function(b){return new dA(this||rg,b)};cm.prototype._isBuffer=
function(b){return rB.isBuffer(b)};cm.destroy=function(b,c){b="$"+b;b in uu&&delete uu[b];Bo(c)};var W6=V6=cm,X6={},X_=sg,Z_=RP(C6),Y_=RP(W6);kF.valid=function(){return!0};kF.use_prefix=!1;var Y6=X6=function(b){b.adapter("memory",kF,!0)},rh=window.lively.FreezerRuntime.recorderFor("lively.storage/database.js");rh.nodejsRequire=function(b){if(!rh.isNode)throw Error("nodejsRequire can only be used in nodejs!");return"undefined"!==typeof System?System._nodeRequire(b):rh.require$$0._load(b)};rh.nodejs_leveldbPath=
function(b){if(b.startsWith("/"))return b;if(b.match(/[^\/]+:\/\//))return b.startsWith("file:")&&(b=b.replace(/^file:\/\//,"")),b;if(!rh.isNode)throw Error("nodejs_leveldbPath called under non-nodejs environment");var c="undefined"!==typeof System&&System.baseURL.startsWith("file://")?System.baseURL.replace("file://",""):rh.GLOB.process.cwd(),g=rh.nodejsRequire("path").join,a=rh.nodejsRequire("fs"),d=a.mkdirSync,f=a.existsSync;a.readdirSync;a=a.readFileSync;if(b.includes("/"))return g(c,b);try{var k=
a(g(c,"../package.json")),n=JSON.parse(k);if("lively.web"===n.name||"lively.next"===n.name){var p=g(c,"../.livelydbs");f(p)||d(p);return g(p,b)}}catch(q){}c=g(c,".livelydbs");f(c)||d(c);return g(c,b)};rh.nodejs_attemptToLoadProperPouchDB=function(){if(!rh.isNode)throw Error("nodejs_attemptToLoadProperPouchDB called under non-nodejs environment");if("undefined"!==typeof System){var b=System._nodeRequire("path").join,c=System.normalizeSync("lively.storage/index.js");c=System.normalizeSync("pouchdb",
c).replace(/file:\/\//,"");b=b(c,"../../lib/index.js");try{return rh.PouchDB=System._nodeRequire(b),rh.PouchDB.plugin(rh.pouchdbAdapterMem),!0}catch(g){return!1}}try{return rh.PouchDB=rh.require$$1,rh.PouchDB.plugin(rh.pouchdbAdapterMem),!0}catch(g){return!1}};rh.commonjsHelpers=mk;rh.require$$0=U3;rh.require$$1=l4;rh._PouchDB=cU;rh.pouchdbAdapterMem=Y6;rh.Path=Nh;rh.GLOB="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;rh.isNode="undefined"!==
typeof global&&"undefined"!==typeof process;rh.PouchDB=rh._PouchDB;rh.PouchDB&&rh.PouchDB.plugin&&rh.pouchdbAdapterMem&&rh.PouchDB.plugin(rh.pouchdbAdapterMem);rh.createPouchDB=rh.isNode?function(){var b=!1,c=!1;return function(g){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};b||(b=!0,c=rh.nodejs_attemptToLoadProperPouchDB());a.adapter||(a.adapter=g.startsWith("http")?"http":c?"leveldb":"memory");"leveldb"==a.adapter&&(g=rh.nodejs_leveldbPath(g));a=Object.assign({},a,{name:g});return new rh.PouchDB(a)}}():
function(b,c){return new rh.PouchDB(Object.assign({name:b},c))};var Gq=function(){function b(c){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};rd(this,b);this.name=c;this.options=g;this._pouchdb=null}Ac(b,null,[{key:"findDB",value:function(c){return this.databases.get(c)}},{key:"ensureDB",value:function(c,g){var a=this.findDB(c);if(a)return a;a=new this(c,g);this.databases.set(c,a);c.endsWith("lively.storage-meta")||this.createMetaEntryForDB(c,g);return a}},{key:"knownDBs",value:function(c,
g){return rh.Database.ensureDB("lively.storage-meta").getAll().then(function(a){return a.map(function(d){return d._id})})}},{key:"createMetaEntryForDB",value:function(c,g){var a=rh.Database.ensureDB("lively.storage-meta");a.has(c).then(function(d){return!d&&a.set(c,{created:Date.now(),options:g})})}},{key:"knowsDB",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f,k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return f=this.ensureDB(a),n.next=
3,f.docCount();case 3:k=n.sent;if(!(0<k)){n.next=6;break}return n.abrupt("return",!0);case 6:return n.next=8,f.destroy();case 8:return n.abrupt("return",!1);case 9:case "end":return n.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"PouchDB",get:function(){return rh.PouchDB},set:function(c){rh.PouchDB=c}},{key:"databases",get:function(){return this._databases||(this._databases=new Map)}}]);Ac(b,[{key:"close",value:function(){this._pouchdb&&(this._pouchdb.close(),delete this._pouchdb)}},
{key:"isDestroyed",value:function(){return!!this.pouchdb._destroyed}},{key:"destroy",value:function(c){this.constructor.databases["delete"](this.name);return this.isDestroyed()?{ok:!0}:this.pouchdb.destroy(c)}},{key:"update",value:function(){var c=Bb(regeneratorRuntime.mark(function k(a,d,f){var n,p,q,r,t,w,x,B,D,F,L,G,oa,ha,Ha=arguments;return regeneratorRuntime.wrap(function(Va){for(;;)switch(Va.prev=Va.next){case 0:return n=3<Ha.length&&void 0!==Ha[3]?Ha[3]:0,p=f=f||{},q=p.ensure,r=void 0===q?
!0:q,t=p.retryOnConflict,w=void 0===t?!0:t,x=p.maxUpdateAttempts,B=void 0===x?10:x,D={latest:!0},F=this.pouchdb,Va.prev=5,Va.next=8,F.get(a,D);case 8:L=Va.sent;Va.next=15;break;case 11:Va.prev=11;Va.t0=Va["catch"](5);if("not_found"===Va.t0.name&&r){Va.next=15;break}throw Va.t0;case 15:return Va.next=17,d(L);case 17:if((G=Va.sent)&&"object"===Jc(G)){Va.next=20;break}return Va.abrupt("return",null);case 20:return G._id!==a&&(G._id=a),L&&G._rev!==L._rev&&(G._rev=L._rev),Va.prev=22,Va.next=25,F.put(G);
case 25:return oa=Va.sent,ha=oa.rev,Va.abrupt("return",Object.assign(G,{_rev:ha}));case 31:Va.prev=31;Va.t1=Va["catch"](22);if(!("conflict"===Va.t1.name&&w&&n<B)){Va.next=35;break}return Va.abrupt("return",this.update(a,d,f,n+1));case 35:throw Va.t1;case 36:case "end":return Va.stop()}},k,this,[[5,11],[22,31]])}));return function(a,d,f){return c.apply(this,arguments)}}()},{key:"mixin",value:function(){var c=Bb(regeneratorRuntime.mark(function k(a,d,f){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=
n.next){case 0:return n.abrupt("return",this.update(a,function(p){return Object.assign(p||{_id:a},d)},f));case 1:case "end":return n.stop()}},k,this)}));return function(a,d,f){return c.apply(this,arguments)}}()},{key:"set",value:function(){var c=Bb(regeneratorRuntime.mark(function k(a,d,f){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.update(a,function(p){return d},f));case 1:case "end":return n.stop()}},k,this)}));return function(a,d,
f){return c.apply(this,arguments)}}()},{key:"get",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f,k=arguments;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return f=1<k.length&&void 0!==k[1]?k[1]:{},n.prev=1,n.next=4,this.pouchdb.get(a,f);case 4:return n.abrupt("return",n.sent);case 7:n.prev=7;n.t0=n["catch"](1);if("not_found"!==n.t0.name){n.next=11;break}return n.abrupt("return",void 0);case 11:throw n.t0;case 12:case "end":return n.stop()}},
d,this,[[1,7]])}));return function(a){return c.apply(this,arguments)}}()},{key:"has",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.get(a);case 2:return f.abrupt("return",!!f.sent);case 3:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"add",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=
f.next){case 0:return f.abrupt("return",this.pouchdb.post(a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"docList",value:function(){var c=Bb(regeneratorRuntime.mark(function a(){var d,f,k,n,p,q,r,t,w=arguments;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return d=0<w.length&&void 0!==w[0]?w[0]:{},x.next=3,this.pouchdb.allDocs(d);case 3:f=x.sent;k=f.rows;n=[];for(p=0;p<k.length;p++)q=k[p],r=q.id,t=q.value.rev,
n.push({id:r,rev:t});return x.abrupt("return",n);case 8:case "end":return x.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"docCount",value:function(){var c=Bb(regeneratorRuntime.mark(function a(){var d;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.pouchdb.allDocs();case 2:return d=f.sent,f.abrupt("return",d.rows.length);case 4:case "end":return f.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},
{key:"revList",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f,k,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,this.pouchdb.get(a,{revs:!0});case 2:return f=q.sent,k=f._revisions,n=k.start,p=k.ids,q.abrupt("return",p.map(function(r){return"".concat(n--,"-").concat(r)}));case 8:case "end":return q.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"getAllRevisions",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f,
k,n,p,q,r,t,w=arguments;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return f=1<w.length&&void 0!==w[1]?w[1]:{},k=f.skip,n=void 0===k?0:k,p=f.limit,q=void 0===p?0:p,x.next=4,this.revList(a);case 4:return r=x.sent,0<n&&(r=r.slice(n)),0<q&&(r=r.slice(0,q)),t=r.map(function(B){return{rev:B,id:a}}),x.next=10,this.getDocuments(t);case 10:return x.abrupt("return",x.sent);case 11:case "end":return x.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},
{key:"getAll",value:function(){var c=Bb(regeneratorRuntime.mark(function a(){var d,f,k,n=arguments;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return d=0<n.length&&void 0!==n[0]?n[0]:{},p.next=3,this.pouchdb.allDocs(Object.assign({},d,{include_docs:!0}));case 3:return f=p.sent,k=f.rows,p.abrupt("return",k.map(function(q){return q.doc}));case 6:case "end":return p.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"setDocuments",value:function(){var c=
Bb(regeneratorRuntime.mark(function f(a,d){var k,n,p,q,r,t,w;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.pouchdb.bulkDocs(a,d);case 2:k=x.sent,n=0;case 4:if(!(n<k.length)){x.next=17;break}p=a[n];q=k[n];if(q.ok||"conflict"!==q.name||p._rev){x.next=14;break}x.next=10;return this.set(p._id,p);case 10:r=x.sent,t=r._id,w=r._rev,k[n]={ok:!0,id:t,rev:w};case 14:n++;x.next=4;break;case 17:return x.abrupt("return",k);case 18:case "end":return x.stop()}},
f,this)}));return function(a,d){return c.apply(this,arguments)}}()},{key:"updateDocuments",value:function(){var c=Bb(regeneratorRuntime.mark(function k(a,d,f){var n,p,q,r,t,w,x,B;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,this.pouchdb.bulkDocs(a,f);case 2:n=D.sent,p=[],q={},r=0;case 6:if(!(r<n.length)){D.next=19;break}t=a[r];w=n[r];q[w._id||t._id]=w;if(w.ok||"conflict"!==w.name){D.next=16;break}D.next=13;return this.get(t._id);case 13:if(x=D.sent,
B=d(x,t))B._id||(B._id=t._id),B._rev||(B._rev=x._rev),p.push(B);case 16:r++;D.next=6;break;case 19:if(!p.length){D.next=28;break}D.t0=Object;D.t1={};D.t2=q;D.t3={};D.next=26;return this.updateDocuments(p,d,f);case 26:D.t4=D.sent,q=D.t0.assign.call(D.t0,D.t1,D.t2,D.t3,D.t4);case 28:return D.abrupt("return",q);case 29:case "end":return D.stop()}},k,this)}));return function(a,d,f){return c.apply(this,arguments)}}()},{key:"getDocuments",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f,
k,n,p,q,r,t,w,x,B,D,F,L=arguments;return regeneratorRuntime.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return f=1<L.length&&void 0!==L[1]?L[1]:{},k=f.ignoreErrors,n=void 0===k?!0:k,G.next=4,this.pouchdb.bulkGet({docs:a});case 4:p=G.sent,q=p.results,r=[],t=0;case 8:if(!(t<q.length)){G.next=23;break}w=q[t];x=w.docs;B=w.id;console.assert(1===x.length,"getDocuments: expected only one doc for ".concat(B));D=0;case 12:if(!(D<x.length)){G.next=20;break}F=x[D];if(!n||F.ok){G.next=16;break}return G.abrupt("continue",
17);case 16:r.push(F.ok||F.error||F);case 17:D++;G.next=12;break;case 20:t++;G.next=8;break;case 23:return G.abrupt("return",r);case 24:case "end":return G.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"query",value:function(c,g){return this.pouchdb.query(c,g)}},{key:"remove",value:function(){var c=Bb(regeneratorRuntime.mark(function k(a,d,f){var n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if("undefined"===typeof d){p.next=4;break}p.t0=
{_id:a,_rev:d};p.next=7;break;case 4:return p.next=6,this.get(a);case 6:p.t0=p.sent;case 7:return n=p.t0,p.abrupt("return",n?this.pouchdb.remove(n):void 0);case 9:case "end":return p.stop()}},k,this)}));return function(a,d,f){return c.apply(this,arguments)}}()},{key:"removeAll",value:function(){var c=Bb(regeneratorRuntime.mark(function a(){var d,f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return d=this.pouchdb,k.next=3,d.allDocs();case 3:return f=k.sent,k.next=
6,Promise.all(f.rows.map(function(n){return d.remove(n.id,n.value.rev)}));case 6:return k.abrupt("return",k.sent);case 7:case "end":return k.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"replicateTo",value:function(c,g){c instanceof rh.Database&&(c=c.pouchdb);return this.pouchdb.replicate.to(c,g)}},{key:"replicateFrom",value:function(c,g){c instanceof rh.Database&&(c=c.pouchdb);return this.pouchdb.replicate.from(c,g)}},{key:"sync",value:function(c,g){c instanceof
rh.Database&&(c=c.pouchdb);return this.pouchdb.sync(c,g)}},{key:"getConflicts",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f,k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.pouchdb.query("conflict_index/conflict_index",Object.assign({reduce:!1,include_docs:!0,conflicts:!0},a));case 2:return f=n.sent,k=f.rows,n.abrupt("return",k.map(function(p){var q={id:p.id,rev:p.doc._rev,doc:p.doc};p.doc._conflicts&&(q.conflicts=p.doc._conflicts,
delete p.doc._conflicts);return q}));case 5:case "end":return n.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"resolveConflicts",value:function(){var c=Bb(regeneratorRuntime.mark(function f(a,d){var k,n,p,q,r,t,w;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.pouchdb.get(a,{conflicts:!0});case 2:return k=x.sent,n=k._conflicts.map(function(B){return{id:a,rev:B}}),x.next=6,this.getDocuments(n);case 6:p=x.sent,q=k,
r=ba(p),x.prev=9,r.s();case 11:if((t=r.n()).done){x.next=25;break}w=t.value;x.next=15;return d(q,w);case 15:if(q=x.sent){x.next=18;break}return x.abrupt("return",null);case 18:return x.next=20,this.set(a,q);case 20:return q=x.sent,x.next=23,this.pouchdb.remove(w);case 23:x.next=11;break;case 25:x.next=30;break;case 27:x.prev=27,x.t0=x["catch"](9),r.e(x.t0);case 30:return x.prev=30,r.f(),x.finish(30);case 33:return x.abrupt("return",q);case 34:case "end":return x.stop()}},f,this,[[9,27,30,33]])}));
return function(a,d){return c.apply(this,arguments)}}()},{key:"diffWith",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f,k,n,p,q,r,t,w,x,B,D,F,L;return regeneratorRuntime.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,a.docList();case 2:return f=G.sent,G.next=5,this.docList();case 5:k=G.sent;n=f.reduce(function(oa,ha){return Object.assign(oa,Pc({},ha.id,ha.rev))},{});p=k.reduce(function(oa,ha){return Object.assign(oa,Pc({},ha.id,ha.rev))},{});q=[];r=[];
t=[];for(w in n)x=n[w],(B=p[w])?x!=B&&t.push({right:{id:w,rev:x},left:{id:w,rev:B}}):r.push({id:w,rev:x});for(D in p)F=p[D],(L=n[D])||q.push({id:D,rev:F});return G.abrupt("return",{inLeft:q,inRight:r,changed:t});case 14:case "end":return G.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"dump",value:function(){var c=Bb(regeneratorRuntime.mark(function a(){var d,f,k,n,p,q,r,t,w,x,B=arguments;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return d=
0<B.length&&void 0!==B[0]?B[0]:{},f=d.filterFn,k=d.name,n=d.type,p=d.dbInfo,q=this.name,r=this.pouchdb,t=k||q,D.t0=t,D.t1=n||r.type(),D.t2=(new Date).toJSON(),D.t3=Object,D.t4={},D.next=11,r.info();case 11:return D.t5=D.sent,D.t6={db_name:t},D.t7=p,D.t8=D.t3.assign.call(D.t3,D.t4,D.t5,D.t6,D.t7),w={name:D.t0,db_type:D.t1,start_time:D.t2,db_info:D.t8},D.next=18,this.getAll({attachments:!0});case 18:return x=D.sent,"function"===typeof f&&(x=f(x,w)),D.abrupt("return",{header:w,docs:x});case 21:case "end":return D.stop()}},
a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"backup",value:function(){var c=Bb(regeneratorRuntime.mark(function a(){var d,f,k,n=arguments;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return d=0<n.length&&void 0!==n[0]?n[0]:1,f="".concat(this.name,"_backup_").concat(d),k=this.constructor.ensureDB(f),p.next=5,this.replicateTo(k);case 5:return p.abrupt("return",k);case 6:case "end":return p.stop()}},a,this)}));return function(){return c.apply(this,
arguments)}}()},{key:"migrate",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f,k,n,p,q,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAll();case 2:f=t.sent,k=[],n=[],p=0;case 6:if(!(p<f.length)){t.next=18;break}q=f[p];if(r=a(q,p)){t.next=12;break}n.push(q);return t.abrupt("continue",15);case 12:r.hasOwnProperty("_id")||(r._id=q._id),r.hasOwnProperty("_rev")&&delete r._rev,k.push(r);case 15:p++;t.next=6;break;case 18:return t.next=
20,this.setDocuments(k);case 20:return t.abrupt("return",{migrated:k.length,unchanged:n.length});case 21:case "end":return t.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"createDesignDocs",value:function(c){return c.map(this.createDesignDoc)}},{key:"createDesignDoc",value:function(c){var g=c.name,a=c.mapFn,d=c.reduceFn,f=c.filterFn;c=c.version;c={_id:"_design/"+g,version:void 0===c?1:c};f&&rh.Path("filters."+g).set(c,f.toString(),!0);a&&rh.Path("views."+g+".map").set(c,
a.toString(),!0);d&&rh.Path("views."+g+".reduce").set(c,d.toString(),!0);return c}},{key:"addDesignDocs",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f=this,k,n,p,q=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return k=1<q.length&&void 0!==q[1]?q[1]:!1,n=this.createDesignDocs(a),r.next=4,this.updateDocuments(n,function(t,w){return!t.hasOwnProperty("version")||w.hasOwnProperty("version")&&w.version>t.version?w:null});case 4:p=r.sent;
if(!k){r.next=8;break}r.next=8;return Promise.all(n.map(function(t){return f.designDocDoQueryStale(t._id)}));case 8:return r.abrupt("return",p);case 9:case "end":return r.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"addDesignDoc",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f,k,n,p,q,r,t,w=arguments;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return f=a.name,k=a.mapFn,n=a.reduceFn,p=a.version,q=1<w.length&&
void 0!==w[1]?w[1]:!1,r=this.createDesignDoc({name:f,mapFn:k,reduceFn:n,version:p}),x.next=5,this.set(r._id,r);case 5:t=x.sent;if(!q){x.next=9;break}x.next=9;return this.designDocDoQueryStale(r._id);case 9:return x.abrupt("return",t);case 10:case "end":return x.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"removeDesignDoc",value:function(c){return this.remove("_design/"+c)}},{key:"designDocDoQueryStale",value:function(c){c=c.split("/");c=Nb(c,2);c[0];return this.query(c[1],
{stale:"update_after"})}},{key:"pouchdb",get:function(){return this._pouchdb?this._pouchdb:this._pouchdb=rh.createPouchDB(this.name,this.options)}}],[{key:"loadDump",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f,k,n,p,q,r=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return f=1<r.length&&void 0!==r[1]?r[1]:{},k=a.header,n=a.docs,p=f.name||k.name,q=this.ensureDB(p),t.next=6,q.setDocuments(n,{new_edits:!1});case 6:return t.abrupt("return",
q);case 7:case "end":return t.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()}]);return b}();rh.Database=Gq;rh["default"]=Gq;var Z6=Object.freeze({__proto__:null,"default":{}}),$6=Qk(Z6),uf=window.lively.FreezerRuntime.recorderFor("lively.storage/objectdb.js");uf.isHash=function(b){return"string"===typeof b&&40===b.length&&b.match(uf.hashRe)};uf.checkArg=function(b,c,g){if("undefined"===typeof c&&"string"===typeof g&&!g.includes("undefined"))throw Error("parameter ".concat(b,
" is undefined"));if(null===c&&"string"===typeof g&&!g.includes("null"))throw Error("parameter ".concat(b," is null"));if("string"===typeof g){var a=Jc(c),d=c?c.constructor.name:"";if(!g.split("|").some(function(f){return a===f||d===f}))throw Error('parameter "'.concat(b,'" expected to be of type ').concat(g," but is ").concat(d||a));}if("function"===typeof g&&(c=g(c))&&c.error)throw Error('check of parameter "'.concat(b,'" failed: ').concat(c.error));};uf.checkArgs=function(b,c,g){for(var a in c)uf.checkArg(a,
b[a],c[a]);if("function"===typeof g&&(c=g(b))&&c.error)throw Error(c.error);return b};uf.commonjsHelpers=mk;uf.require$$0=$6;uf.Database=Gq;uf.resource=Sk;uf.obj=nh;uf.promise=ai;uf.arr=mh;uf.string=ji;uf.Path=Nh;uf.parse=Qj;uf.categorizer=nx;uf.sha1=function(){function b(){var f=d.createHash("sha1");return{update:function(k){return f.update(k)},digest:function(){return f.digest("hex")}}}function c(f){function k(G){q[D]|=(255&G)<<F;F?F-=8:(D++,F=24);16===D&&n()}function n(){for(var G=16;80>G;G++){var oa=
q[G-3]^q[G-8]^q[G-14]^q[G-16];q[G]=oa<<1|oa>>>31}var ha,Ha;oa=r;var Va=t,hc=w,qc=x,jc=B;for(G=0;80>G;G++){20>G?(ha=qc^Va&(hc^qc),Ha=1518500249):40>G?(ha=Va^hc^qc,Ha=1859775393):60>G?(ha=Va&hc|qc&(Va|hc),Ha=2400959708):(ha=Va^hc^qc,Ha=3395469782);var Ya=(oa<<5|oa>>>27)+ha+jc+Ha+(0|q[G]);jc=qc;qc=hc;hc=Va<<30|Va>>>2;Va=oa;oa=Ya}r=r+oa|0;t=t+Va|0;w=w+hc|0;x=x+qc|0;B=B+jc|0;for(G=D=0;16>G;G++)q[G]=0}function p(G){for(var oa="",ha=28;0<=ha;ha-=4)oa+=(G>>ha&15).toString(16);return oa}var q,r=1732584193,
t=4023233417,w=2562383102,x=271733878,B=3285377520,D=0,F=24,L=0;return q=f?g:new Uint32Array(80),{update:function(G){if("string"===typeof G){var oa=G.length;L+=8*oa;for(var ha=0;ha<oa;ha++)k(G.charCodeAt(ha))}else for(oa=G.length,L+=8*oa,ha=0;ha<oa;ha++)k(G[ha])},digest:function(){k(128);(14<D||14===D&&24>F)&&n();D=14;F=24;k(0);k(0);k(0xffffffffff<L?L/1099511627776:0);k(4294967295<L?L/4294967296:0);for(var G=24;0<=G;G-=8)k(L>>G);return p(r)+p(t)+p(w)+p(x)+p(B)}}}var g,a,d;return"object"===("undefined"===
typeof process?"undefined":Jc(process))&&"object"===Jc(process.versions)&&process.versions.node&&"renderer"!==process.__atom_type?(d="undefined"!==typeof System?System._nodeRequire("crypto"):uf.require$$0,a=b):(g=new Uint32Array(80),a=c),function(f){if(void 0===f)return a(!1);var k=a(!0);return k.update(f),k.digest()}}();uf.hashRe=/^[0-9a-f]+$/i;uf.objectDBs=uf.objectDBs||new Map;var Xx=function(){function b(c,g){rd(this,b);this.name=c;if(!g.snapshotLocation||!g.snapshotLocation.isResource)throw Error("ObjectDB needs snapshotLocation!");
this.snapshotLocation=g.snapshotLocation;this.__versionDB=this.__commitDB=null}Ac(b,null,[{key:"dbList",value:function(){var c=Bb(regeneratorRuntime.mark(function a(){var d;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return d=uf.Database.ensureDB("internal__objectdb-meta"),f.next=3,d.getAll();case 3:return f.t0=function(k){return k._id},f.abrupt("return",f.sent.map(f.t0));case 5:case "end":return f.stop()}},a)}));return function(){return c.apply(this,arguments)}}()},
{key:"find",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f,k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:f=uf.objectDBs.get(a);if(!f){p.next=3;break}return p.abrupt("return",f);case 3:return k=uf.Database.ensureDB("internal__objectdb-meta"),p.next=6,k.get(a);case 6:if(n=p.sent){p.next=9;break}return p.abrupt("return");case 9:return p.abrupt("return",this.named(a,n));case 10:case "end":return p.stop()}},d,this)}));return function(a){return c.apply(this,
arguments)}}()},{key:"named",value:function(c){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=uf.objectDBs.get(c);if(a)return a;if(!g||!g.snapshotLocation)throw Error("need snapshotLocation");if("string"===typeof g.snapshotLocation)try{g.snapshotLocation=uf.resource(g.snapshotLocation)}catch(d){g.snapshotLocation=uf.resource(System.baseURL).join(g.snapshotLocation)}a=new this(c,g);uf.objectDBs.set(c,a);uf.Database.ensureDB("internal__objectdb-meta").set(c,Object.assign({},g,{snapshotLocation:g.snapshotLocation.url}))["catch"](function(d){return console.error("error writing objectdb meta:",
d)});return a}}]);Ac(b,[{key:"destroy",value:function(){var c=Bb(regeneratorRuntime.mark(function a(){var d,f,k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:d=uf.Database.findDB(this.name+"-commits");if(!d){n.next=4;break}n.next=4;return d.destroy();case 4:f=uf.Database.findDB(this.name+"-version-graph");if(!f){n.next=8;break}n.next=8;return f.destroy();case 8:return uf.objectDBs["delete"](this.name),k=uf.Database.ensureDB("internal__objectdb-meta"),n.next=12,k.remove(this.name);
case 12:case "end":return n.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"snapshotResourceFor",value:function(c){var g=c.content.slice(0,2);c=c.content.slice(2);return this.snapshotLocation.join("".concat(g,"/").concat(c,".json"))}},{key:"snapshotObject",value:function(){var c=Bb(regeneratorRuntime.mark(function t(a,d,f,k,n,p,q,r){var w,x;return regeneratorRuntime.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return k=k||{},w=function(D){return D},B.next=4,
w(f,k);case 4:return x=B.sent,B.abrupt("return",this.commit(a,d,x,n,p,q,r));case 6:case "end":return B.stop()}},t,this)}));return function(a,d,f,k,n,p,q,r){return c.apply(this,arguments)}}()},{key:"loadObject",value:function(){var c=Bb(regeneratorRuntime.mark(function p(a,d,f,k,n){var q,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return f=f||{},t.next=3,this.loadSnapshot(a,d,k,n);case 3:return q=t.sent,r=function(w){return w},t.abrupt("return",r(q,f));case 6:case "end":return t.stop()}},
p,this)}));return function(a,d,f,k,n){return c.apply(this,arguments)}}()},{key:"has",value:function(){var c=Bb(regeneratorRuntime.mark(function f(a,d){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,this.objectStats(a,d);case 2:return k.abrupt("return",!!k.sent);case 3:case "end":return k.stop()}},f,this)}));return function(a,d){return c.apply(this,arguments)}}()},{key:"objects",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f,k,
n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.objectStats(a);case 2:f=p.sent;if(!a){p.next=5;break}return p.abrupt("return",Object.keys(f||{}));case 5:k={};for(n in f)k[n]=Object.keys(f[n]);return p.abrupt("return",k);case 8:case "end":return p.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"objectStats",value:function(){var c=Bb(regeneratorRuntime.mark(function f(a,d){var k,n,p,q,r,t,w,x,B,D,F,L,G,oa,ha,Ha,Va,
hc;return regeneratorRuntime.wrap(function(qc){for(;;)switch(qc.prev=qc.next){case 0:k={};qc.t0=this.__commitDB;if(qc.t0){qc.next=6;break}qc.next=5;return this._commitDB();case 5:qc.t0=qc.sent;case 6:return n=qc.t0,p={reduce:!0,group:!0},a&&d?p.key="".concat(a,"\x00").concat(d):a&&(p.startkey="".concat(a,"\x00"),p.endkey="".concat(a,"\ufff0")),qc.prev=9,qc.next=12,n.pouchdb.query("nameWithMaxMinTimestamp_index",p);case 12:q=qc.sent;r=q.rows;t=ba(r);try{for(t.s();!(w=t.n()).done;)x=w.value,B=x.key,
D=x.value,F=D.count,L=D.max,G=D.min,oa=B.split("\x00"),ha=Nb(oa,2),Ha=ha[0],Va=ha[1],hc=k[Ha]||(k[Ha]={}),hc[Va]={count:F,newest:L,oldest:G}}catch(jc){t.e(jc)}finally{t.f()}qc.next=22;break;case 18:return qc.prev=18,qc.t1=qc["catch"](9),console.error(qc.t1),qc.abrupt("return",k);case 22:if(!a||!d){qc.next=24;break}return qc.abrupt("return",(k[a]||{})[d]);case 24:if(!a){qc.next=26;break}return qc.abrupt("return",k[a]);case 26:return qc.abrupt("return",k);case 27:case "end":return qc.stop()}},f,this,
[[9,18]])}));return function(a,d){return c.apply(this,arguments)}}()},{key:"getCommits",value:function(){var c=Bb(regeneratorRuntime.mark(function f(a,d){var k,n,p,q,r,t=arguments;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return k=2<t.length&&void 0!==t[2]?t[2]:"HEAD",n=3<t.length&&void 0!==t[3]?t[3]:Infinity,w.next=4,this._log(a,d,k,n);case 4:p=w.sent;if(p.length){w.next=7;break}return w.abrupt("return",[]);case 7:w.t0=this.__commitDB;if(w.t0){w.next=12;break}w.next=
11;return this._commitDB();case 11:w.t0=w.sent;case 12:return q=w.t0,w.next=15,q.getDocuments(p.map(function(x){return{id:x}}));case 15:return r=w.sent,w.abrupt("return",r);case 17:case "end":return w.stop()}},f,this)}));return function(a,d){return c.apply(this,arguments)}}()},{key:"getCommit",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:k.t0=this.__commitDB;if(k.t0){k.next=5;break}k.next=4;return this._commitDB();
case 4:k.t0=k.sent;case 5:return f=k.t0,k.abrupt("return",f.get(a));case 7:case "end":return k.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"getCommitsWithIds",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(a.length){k.next=2;break}return k.abrupt("return",[]);case 2:k.t0=this.__commitDB;if(k.t0){k.next=7;break}k.next=6;return this._commitDB();case 6:k.t0=k.sent;
case 7:return f=k.t0,k.abrupt("return",f.getDocuments(a.map(function(n){return{id:n}})));case 9:case "end":return k.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"getLatestCommit",value:function(){var c=Bb(regeneratorRuntime.mark(function f(a,d){var k,n,p,q,r,t,w,x=arguments;return regeneratorRuntime.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return k=2<x.length&&void 0!==x[2]?x[2]:"HEAD",n=3<x.length&&void 0!==x[3]?x[3]:!1,B.next=4,this._log(a,d,k,1);case 4:p=
B.sent;q=Nb(p,1);if(r=q[0]){B.next=9;break}return B.abrupt("return",null);case 9:B.t0=this.__commitDB;if(B.t0){B.next=14;break}B.next=13;return this._commitDB();case 13:B.t0=B.sent;case 14:return t=B.t0,B.next=17,t.get(r);case 17:w=B.sent;if(!w||!w.deleted||n){B.next=20;break}return B.abrupt("return",null);case 20:return B.abrupt("return",w);case 21:case "end":return B.stop()}},f,this)}));return function(a,d){return c.apply(this,arguments)}}()},{key:"commit",value:function(){var c=Bb(regeneratorRuntime.mark(function p(a,
d,f,k,n){var q,r,t,w,x,B,D,F,L,G,oa,ha,Ha,Va,hc,qc,jc,Ya,xa,tc,Qb,wc=arguments;return regeneratorRuntime.wrap(function(Zb){for(;;)switch(Zb.prev=Zb.next){case 0:q=5<wc.length&&void 0!==wc[5]?wc[5]:"HEAD";r=6<wc.length?wc[6]:void 0;t=k.author;w=k.description;x=void 0===w?"no description":w;B=k.tags;D=void 0===B?[]:B;F=k.timestamp;L=k.message;G=void 0===L?"":L;oa=k.metadata;ha=k.preview;if(a){Zb.next=5;break}throw Error("object needs a type");case 5:if(d){Zb.next=7;break}throw Error("object needs a name");
case 7:if(t){Zb.next=9;break}throw Error("Cannot commit ".concat(a,"/").concat(d," without user"));case 9:Zb.t0=this.__versionDB;if(Zb.t0){Zb.next=14;break}Zb.next=13;return this._versionDB();case 13:Zb.t0=Zb.sent;case 14:return Ha=Zb.t0,Zb.next=17,this.versionGraph(a,d);case 17:qc=(hc=(Va=Zb.sent)?Va.refs[q]:null)?[hc]:[];if(!r){Zb.next=25;break}if(Va){Zb.next=23;break}throw Error('Trying to store "'.concat(a,"/").concat(d,'" on top of expected version ').concat(r," but no version entry exists!"));
case 23:if(hc===r){Zb.next=25;break}throw Error('Trying to store "'.concat(a,"/").concat(d,'" on top of expected version ').concat(r," but ref ").concat(q," is of version ").concat(hc,"!"));case 25:Ya=(jc=uf.isHash(f))?null:f?JSON.stringify(f):null;xa=this._createCommit(a,d,x,D,oa,t,F,G,qc,jc?null:f,Ya,n||ha,jc?f:null);if(!f||jc){Zb.next=39;break}tc=this.snapshotResourceFor(xa);Zb.next=32;return tc.parent().ensureExistance();case 32:if(!tc.canDealWithJSON){Zb.next=37;break}Zb.next=35;return tc.writeJson(f);
case 35:Zb.next=39;break;case 37:return Zb.next=39,tc.write(Ya);case 39:Zb.t1=this.__commitDB;if(Zb.t1){Zb.next=44;break}Zb.next=43;return this._commitDB();case 43:Zb.t1=Zb.sent;case 44:return Qb=Zb.t1,Zb.next=47,Qb.set(xa._id,xa);case 47:return xa=Zb.sent,Va||(Va={refs:{},history:{}}),Va.refs[q]=xa._id,Va.history[xa._id]=qc,Zb.next=53,Ha.set(a+"/"+d,Va);case 53:return Zb.abrupt("return",xa);case 54:case "end":return Zb.stop()}},p,this)}));return function(a,d,f,k,n){return c.apply(this,arguments)}}()},
{key:"loadSnapshot",value:function(){var c=Bb(regeneratorRuntime.mark(function k(a,d,f){var n,p,q,r=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=3<r.length&&void 0!==r[3]?r[3]:"HEAD";if(!f||"string"===typeof f){t.next=5;break}p=f;t.next=20;break;case 5:if(!f){t.next=17;break}t.t0=this.__commitDB;if(t.t0){t.next=11;break}t.next=10;return this._commitDB();case 10:t.t0=t.sent;case 11:return q=t.t0,t.next=14,q.get(f);case 14:p=t.sent;t.next=20;break;case 17:return t.next=
19,this.getLatestCommit(a,d,n);case 19:p=t.sent;case 20:if(p){t.next=22;break}throw Error("Cannot find commit to loadSnapshot for ".concat(a,"/").concat(d," (using ").concat(f,")"));case 22:return t.abrupt("return",this.snapshotResourceFor(p).readJson());case 23:case "end":return t.stop()}},k,this)}));return function(a,d,f){return c.apply(this,arguments)}}()},{key:"revert",value:function(){var c=Bb(regeneratorRuntime.mark(function n(a,d,f,k){var p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=
r.next){case 0:r.t0=this.__versionDB;if(r.t0){r.next=5;break}r.next=4;return this._versionDB();case 4:r.t0=r.sent;case 5:return p=r.t0,r.next=8,p.get(a+"/"+d);case 8:return q=r.sent,q.refs[f||"HEAD"]=k,delete q.deleted,r.next=13,p.set("".concat(a,"/").concat(d),q);case 13:return r.abrupt("return",q);case 14:case "end":return r.stop()}},n,this)}));return function(a,d,f,k){return c.apply(this,arguments)}}()},{key:"_createCommit",value:function(c,g,a,d,f,k,n){var p=7<arguments.length&&void 0!==arguments[7]?
arguments[7]:"",q=8<arguments.length&&void 0!==arguments[8]?arguments[8]:[],r=9<arguments.length?arguments[9]:void 0,t=10<arguments.length?arguments[10]:void 0,w=11<arguments.length?arguments[11]:void 0,x=12<arguments.length?arguments[12]:void 0;!w&&r&&r.preview&&(w=r.preview);return this._createCommitFromSpec({name:g,type:c,timestamp:n||Date.now(),author:{name:k.name,email:k.email,realm:k.realm},tags:d,description:a,preview:w,message:p,content:x||t&&uf.sha1(t)||null,deleted:!x&&!r,metadata:f,ancestors:q},
!0)}},{key:"_createCommitFromSpec",value:function(c){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(!c.name)throw Error("commit needs name");if(!c.type)throw Error("commit needs type");if(!c.author)throw Error("commit needs author");if(!c.author.name)throw Error("commit needs author.name");c.timestamp||(c.timestamp=Date.now());c.tags||(c.tags=[]);!g&&c.content&&(g=uf.isHash(c.content),g||(c.content=uf.sha1(c.content)));g=uf.obj.dissoc(c,["preview"]);g=uf.sha1(JSON.stringify(g));
return Object.assign(c,{_id:g})}},{key:"_commitDB",value:function(){var c=Bb(regeneratorRuntime.mark(function a(){var d,f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!this.__commitDB){k.next=2;break}return k.abrupt("return",this.__commitDB);case 2:d=this.name+"-commits";f=uf.Database.findDB(d);if(!f){k.next=6;break}return k.abrupt("return",this.__commitDB=f);case 6:return f=uf.Database.ensureDB(d),k.next=9,f.addDesignDocs(this._commitdb_indexes);case 9:return k.abrupt("return",
this.__commitDB=f);case 10:case "end":return k.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"close",value:function(){var c=Bb(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!this.__commitDB){d.next=4;break}d.next=3;return this.__commitDB.close();case 3:this.__commitDB=null;case 4:if(!this.__versionDB){d.next=8;break}d.next=7;return this.__versionDB.close();case 7:this.__versionDB=null;case 8:case "end":return d.stop()}},
a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"versionGraph",value:function(){var c=Bb(regeneratorRuntime.mark(function f(a,d){var k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:p.t0=this.__versionDB;if(p.t0){p.next=5;break}p.next=4;return this._versionDB();case 4:p.t0=p.sent;case 5:return k=p.t0,p.next=8,k.get(a+"/"+d);case 8:return n=p.sent,p.abrupt("return",!n||n.deleted||n._deleted?null:n);case 10:case "end":return p.stop()}},f,this)}));
return function(a,d){return c.apply(this,arguments)}}()},{key:"_log",value:function(){var c=Bb(regeneratorRuntime.mark(function f(a,d){var k,n,p,q,r,t,w=arguments;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return k=3<w.length&&void 0!==w[3]?w[3]:Infinity,x.next=4,this.versionGraph(a,d);case 4:if((n=x.sent)&&!n.deleted&&!n._deleted){x.next=7;break}return x.abrupt("return",[]);case 7:p=n.refs.HEAD,q=[];case 9:if(!q.includes(p)){x.next=12;break}throw Error("cyclic version graph???");
case 12:q.push(p);r=n.history[p]||[];t=Nb(r,1);if((p=t[0])&&!(q.length>=k)){x.next=18;break}return x.abrupt("break",20);case 18:x.next=9;break;case 20:return x.abrupt("return",q);case 21:case "end":return x.stop()}},f,this)}));return function(a,d){return c.apply(this,arguments)}}()},{key:"_findTimestampedVersionsOfObjectNamed",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f,k,n,p,q,r,t,w,x,B,D,F,L,G,oa=arguments;return regeneratorRuntime.wrap(function(ha){for(;;)switch(ha.prev=
ha.next){case 0:f=1<oa.length&&void 0!==oa[1]?oa[1]:{};k=f.include_docs;n=void 0===k?!0:k;p=f.descending;q=void 0===p?!0:p;r=f.startTime;t=void 0===r?"0".repeat(13):r;w=f.endTime;x=void 0===w?"9".repeat(13):w;B="".concat(a,"\x00").concat(q?x:t);D="".concat(a,"\x00").concat(q?t:x);ha.t0=this.__commitDB;if(ha.t0){ha.next=9;break}ha.next=8;return this._commitDB();case 8:ha.t0=ha.sent;case 9:return F=ha.t0,ha.next=12,F.pouchdb.query("nameAndTimestamp_index",Object.assign({},f,{descending:q,include_docs:n,
startkey:B,endkey:D}));case 12:return L=ha.sent,G=L.rows,ha.abrupt("return",n?G.map(function(Ha){return Ha.doc}):G.map(function(Ha){return Ha.id}));case 15:case "end":return ha.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"_versionDB",value:function(){var c=Bb(regeneratorRuntime.mark(function a(){var d,f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!this.__versionDB){k.next=2;break}return k.abrupt("return",this.__versionDB);case 2:d=
this.name+"-version-graph";f=uf.Database.findDB(d);if(!f){k.next=6;break}return k.abrupt("return",this.__versionDB=f);case 6:return f=uf.Database.ensureDB(d),k.next=9,f.addDesignDocs(this._versiondb_indexes);case 9:return k.abrupt("return",this.__versionDB=f);case 10:case "end":return k.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"exportToDir",value:function(){var c=Bb(regeneratorRuntime.mark(function f(a,d){var k=this,n,p,q,r,t,w,x,B,D,F,L,G,oa,ha,Ha,Va,hc,qc,jc,
Ya,xa,tc,Qb,wc,Zb,$c,Oa,md,la,$a,dd,Kd=arguments;return regeneratorRuntime.wrap(function(ra){for(;;)switch(ra.prev=ra.next){case 0:n=2<Kd.length&&void 0!==Kd[2]?Kd[2]:!1;p=3<Kd.length&&void 0!==Kd[3]?Kd[3]:!1;"string"===typeof a&&(a=uf.resource(a));ra.t0=this.__commitDB;if(ra.t0){ra.next=8;break}ra.next=7;return this._commitDB();case 7:ra.t0=ra.sent;case 8:ra.t1=this.__versionDB;if(ra.t1){ra.next=14;break}ra.next=13;return this._versionDB();case 13:ra.t1=ra.sent;case 14:q=ra.t1;r=[];if(d){ra.next=
50;break}ra.next=19;return q.getAll();case 19:t=ra.sent,w=ba(t),ra.prev=21,w.s();case 23:if((x=w.n()).done){ra.next=40;break}B=x.value;D=B.refs;F=B.history;L=B._id;if(!L.startsWith("_")){ra.next=27;break}return ra.abrupt("continue",38);case 27:return ra.next=29,this.getCommit(D.HEAD||Object.keys(F)[0]);case 29:return G=ra.sent,oa=G.type,ha=G.name,Ha=a.join(oa).join(ha).asDirectory(),Va=Object.keys(F),ra.next=36,this.getCommitsWithIds(Va);case 36:hc=ra.sent,r.push({refs:D,history:F,currentExportDir:Ha,
commits:hc,name:ha,type:oa});case 38:ra.next=23;break;case 40:ra.next=45;break;case 42:ra.prev=42,ra.t2=ra["catch"](21),w.e(ra.t2);case 45:return ra.prev=45,w.f(),ra.finish(45);case 48:ra.next=76;break;case 50:qc=ba(d),ra.prev=51,qc.s();case 53:if((jc=qc.n()).done){ra.next=68;break}Ya=jc.value;xa=Ya.name;tc=Ya.type;Qb=a.join(tc).join(xa).asDirectory();ra.next=58;return this.versionGraph(tc,xa);case 58:return wc=ra.sent,Zb=wc.refs,$c=wc.history,Oa=Object.keys($c),ra.next=64,this.getCommitsWithIds(Oa);
case 64:md=ra.sent,r.push({refs:Zb,history:$c,currentExportDir:Qb,commits:md,name:xa,type:tc});case 66:ra.next=53;break;case 68:ra.next=73;break;case 70:ra.prev=70,ra.t3=ra["catch"](51),qc.e(ra.t3);case 73:return ra.prev=73,qc.f(),ra.finish(73);case 76:la=regeneratorRuntime.mark(function V(){var ea,Mb,U,Sa,S,Sc,xd,Ae,ee,Fe,Mf,Tg,pg;return regeneratorRuntime.wrap(function(Yg){for(;;)switch(Yg.prev=Yg.next){case 0:return ea=dd[$a],Mb=ea.refs,U=ea.history,Sa=ea.currentExportDir,S=ea.commits,Sc=ea.name,
xd=ea.type,p||(S=S.filter(function(Rh){return!Rh.deleted})),Ae=n?S.map(function(Rh){if(Rh.deleted||Rh._deleted||!Rh.content)return null;delete Rh._rev;Rh=k.snapshotResourceFor(Rh);var Ei=Sa.join(Rh.parent().name()+"/"+Rh.name());return{from:Rh,to:Ei}}).filter(Boolean):[],n||S.forEach(function(Rh){delete Rh._rev}),Yg.next=6,Sa.ensureExistance();case 6:return Yg.next=8,Sa.join("index.json").writeJson({name:Sc,type:xd});case 8:return Yg.next=10,Sa.join("commits.json").writeJson(S);case 10:return Yg.next=
12,Sa.join("history.json").writeJson({refs:Mb,history:U});case 12:ee=ba(Ae),Yg.prev=13,ee.s();case 15:if((Fe=ee.n()).done){Yg.next=21;break}Mf=Fe.value;Tg=Mf.from;pg=Mf.to;Yg.next=19;return Tg.copyTo(pg);case 19:Yg.next=15;break;case 21:Yg.next=26;break;case 23:Yg.prev=23,Yg.t0=Yg["catch"](13),ee.e(Yg.t0);case 26:return Yg.prev=26,ee.f(),Yg.finish(26);case 29:case "end":return Yg.stop()}},V,null,[[13,23,26,29]])}),$a=0,dd=r;case 78:if(!($a<dd.length)){ra.next=83;break}return ra.delegateYield(la(),
"t4",80);case 80:$a++;ra.next=78;break;case 83:case "end":return ra.stop()}},f,this,[[21,42,45,48],[51,70,73,76]])}));return function(a,d){return c.apply(this,arguments)}}()},{key:"exportToSpecs",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f,k,n,p,q,r,t,w,x,B,D,F,L,G,oa,ha=arguments;return regeneratorRuntime.wrap(function(Ha){for(;;)switch(Ha.prev=Ha.next){case 0:f=1<ha.length&&void 0!==ha[1]?ha[1]:!1;k=[];if(a){Ha.next=11;break}a=[];Ha.next=6;return this.objectStats();case 6:Ha.t0=
Ha.sent;if(Ha.t0){Ha.next=9;break}Ha.t0={};case 9:for(p in n=Ha.t0,n)for(q in n[p])a.push({type:p,name:q});case 11:r=ba(a),Ha.prev=12,r.s();case 14:if((t=r.n()).done){Ha.next=30;break}w=t.value;x=w.name;B=w.type;Ha.next=18;return this.versionGraph(B,x);case 18:return D=Ha.sent,F=D.refs,L=D.history,G=Object.keys(L),Ha.next=24,this.getCommitsWithIds(G);case 24:oa=Ha.sent,f||(oa=oa.filter(function(Va){return!Va.deleted})),oa.forEach(function(Va){delete Va._rev}),k.push({type:B,name:x,commits:oa,history:{refs:F,
history:L}});case 28:Ha.next=14;break;case 30:Ha.next=35;break;case 32:Ha.prev=32,Ha.t1=Ha["catch"](12),r.e(Ha.t1);case 35:return Ha.prev=35,r.f(),Ha.finish(35);case 38:return Ha.abrupt("return",k);case 39:case "end":return Ha.stop()}},d,this,[[12,32,35,38]])}));return function(a){return c.apply(this,arguments)}}()},{key:"importFromDir",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f,k,n,p,q,r,t,w,x,B,D=arguments;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=
F.next){case 0:return B=function(){B=Bb(regeneratorRuntime.mark(function oa(G){var ha,Ha,Va,hc,qc,jc,Ya,xa;return regeneratorRuntime.wrap(function(tc){for(;;)switch(tc.prev=tc.next){case 0:return tc.next=2,Promise.all([G.join("index.json").readJson(),G.join("commits.json").readJson(),G.join("history.json").readJson()]);case 2:ha=tc.sent;Ha=Nb(ha,3);Va=Ha[0];hc=Va.type;qc=Va.name;jc=Ha[1];Ya=Ha[2];if(!k){tc.next=15;break}tc.next=12;return G.dirList(1,{exclude:function(Qb){return!Qb.isDirectory()}});
case 12:tc.t0=tc.sent;tc.next=16;break;case 15:tc.t0=[];case 16:return xa=tc.t0,tc.abrupt("return",{dir:G,type:hc,name:qc,commits:jc,history:Ya,snapshotDirs:xa});case 18:case "end":return tc.stop()}},oa)}));return B.apply(this,arguments)},x=function(L){return B.apply(this,arguments)},f=1<D.length&&void 0!==D[1]?D[1]:!1,k=2<D.length&&void 0!==D[2]?D[2]:!1,F.next=6,a.dirList(3,{exclude:function(L){return!L.isDirectory()&&"index.json"!==L.name()}});case 6:n=F.sent,n=n.filter(function(L){return"index.json"===
L.name()}),p=n.map(function(L){return L.parent()}),q=[],r=ba(p),F.prev=12,r.s();case 14:if((t=r.n()).done){F.next=23;break}w=t.value;F.t0=q;F.next=19;return x(w);case 19:F.t1=F.sent,F.t0.push.call(F.t0,F.t1);case 21:F.next=14;break;case 23:F.next=28;break;case 25:F.prev=25,F.t2=F["catch"](12),r.e(F.t2);case 28:return F.prev=28,r.f(),F.finish(28);case 31:return F.abrupt("return",this.importFromSpecs(q,f,k));case 32:case "end":return F.stop()}},d,this,[[12,25,28,31]])}));return function(a){return c.apply(this,
arguments)}}()},{key:"importFromSpecs",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f,k,n,p,q,r,t,w,x,B,D,F=arguments;return regeneratorRuntime.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:f=1<F.length&&void 0!==F[1]?F[1]:!1;k=2<F.length&&void 0!==F[2]?F[2]:!1;if(f){L.next=28;break}L.t0=this.__versionDB;if(L.t0){L.next=8;break}L.next=7;return this._versionDB();case 7:L.t0=L.sent;case 8:n=L.t0,p=ba(a),L.prev=10,p.s();case 12:if((q=p.n()).done){L.next=20;break}r=q.value;
t=r.type;w=r.name;L.next=16;return n.get("".concat(t,"/").concat(w));case 16:if(!L.sent){L.next=18;break}throw Error("Import failed: object ".concat(t,"/").concat(w," already exists and overwrite is not allowed"));case 18:L.next=12;break;case 20:L.next=25;break;case 22:L.prev=22,L.t1=L["catch"](10),p.e(L.t1);case 25:return L.prev=25,p.f(),L.finish(25);case 28:x=ba(a),L.prev=29,x.s();case 31:if((B=x.n()).done){L.next=37;break}D=B.value;L.next=35;return this.importFromSpec(D,!0,k);case 35:L.next=31;
break;case 37:L.next=42;break;case 39:L.prev=39,L.t2=L["catch"](29),x.e(L.t2);case 42:return L.prev=42,x.f(),L.finish(42);case 45:return L.abrupt("return",a);case 46:case "end":return L.stop()}},d,this,[[10,22,25,28],[29,39,42,45]])}));return function(a){return c.apply(this,arguments)}}()},{key:"importFromSpec",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f,k,n,p,q,r,t,w,x,B,D=arguments;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:f=1<D.length&&
void 0!==D[1]?D[1]:!1;k=2<D.length&&void 0!==D[2]?D[2]:!1;F.t0=this.__versionDB;if(F.t0){F.next=7;break}F.next=6;return this._versionDB();case 6:F.t0=F.sent;case 7:n=F.t0;F.t1=this.__commitDB;if(F.t1){F.next=13;break}F.next=12;return this._commitDB();case 12:F.t1=F.sent;case 13:p=F.t1;q=this.snapshotLocation;r=a.type;t=a.name;w=a.commits;x=a.history;B=a.snapshotDirs;F.t2=!f;if(!F.t2){F.next=21;break}F.next=20;return n.get("".concat(r,"/").concat(t));case 20:F.t2=F.sent;case 21:if(!F.t2){F.next=23;
break}throw Error("Import failed: object ".concat(r,"/").concat(t," already exists and overwrite is not allowed"));case 23:return F.next=25,Promise.all([p.setDocuments(w),n.set("".concat(r,"/").concat(t),x)].concat(hb(B&&k?B.map(function(L){return L.copyTo(q.join(L.name()).asDirectory())}):[])));case 25:return F.abrupt("return",a);case 26:case "end":return F.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"importFromResource",value:function(){var c=Bb(regeneratorRuntime.mark(function n(a,
d,f,k){var p,q,r=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return p=4<r.length&&void 0!==r[4]?r[4]:!1,t.next=3,f.readJson();case 3:q=t.sent;t.t0=p;if(!t.t0){t.next=9;break}t.next=8;return this.has(a,d);case 8:t.t0=t.sent;case 9:if(!t.t0){t.next=12;break}t.next=12;return this["delete"](a,d,!1);case 12:return t.abrupt("return",this.commit(a,d,q,k));case 13:case "end":return t.stop()}},n,this)}));return function(a,d,f,k){return c.apply(this,arguments)}}()},
{key:"replicateTo",value:function(c,g,a,d){return(new uf.Synchronization(this,c,g,a,Object.assign({method:"replicateTo"},d))).start()}},{key:"replicateFrom",value:function(c,g,a,d){return(new uf.Synchronization(this,c,g,a,Object.assign({method:"replicateFrom"},d))).start()}},{key:"sync",value:function(c,g,a,d){return(new uf.Synchronization(this,c,g,a,Object.assign({method:"sync"},d))).start()}},{key:"getConflicts",value:function(){var c=Bb(regeneratorRuntime.mark(function f(a,d){var k,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=
r.next){case 0:q=function(){q=Bb(regeneratorRuntime.mark(function B(w,x){var D;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,w.getConflicts({include_docs:!0});case 2:return D=F.sent,F.next=5,Promise.all(D.map(function(){var L=Bb(regeneratorRuntime.mark(function ha(oa){var Ha,Va,hc,qc,jc;return regeneratorRuntime.wrap(function(Ya){for(;;)switch(Ya.prev=Ya.next){case 0:Ha=oa.id;Va=oa.rev;hc=oa.conflicts;qc=oa.doc;if(!d||!d[x]||d[x][Ha]){Ya.next=3;break}return Ya.abrupt("return",
null);case 3:if(!a){Ya.next=8;break}jc=hc.map(function(xa){return{id:Ha,rev:xa}});Ya.next=7;return w.getDocuments(jc);case 7:hc=Ya.sent;case 8:return a?uf.obj.dissoc(qc,["_conflicts"]):qc=null,Ya.abrupt("return",{id:Ha,rev:Va,conflicts:hc,kind:x,doc:qc});case 10:case "end":return Ya.stop()}},ha)}));return function(oa){return L.apply(this,arguments)}}()));case 5:return F.t0=Boolean,F.abrupt("return",F.sent.filter(F.t0));case 7:case "end":return F.stop()}},B)}));return q.apply(this,arguments)};p=function(t,
w){return q.apply(this,arguments)};r.t0=this.__commitDB;if(r.t0){r.next=7;break}r.next=6;return this._commitDB();case 6:r.t0=r.sent;case 7:k=r.t0;r.t1=this.__versionDB;if(r.t1){r.next=13;break}r.next=12;return this._versionDB();case 12:r.t1=r.sent;case 13:return n=r.t1,r.next=16,p(n,"versions");case 16:return r.t2=r.sent,r.next=19,p(k,"commits");case 19:return r.t3=r.sent,r.abrupt("return",{versionConflicts:r.t2,commitConflicts:r.t3});case 21:case "end":return r.stop()}},f,this)}));return function(a,
d){return c.apply(this,arguments)}}()},{key:"resolveConflict",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f,k,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:f=a.resolved;k=a["delete"];n=a.kind;p=a.id;if("versions"!==n){r.next=10;break}r.t0=this.__versionDB;if(r.t0){r.next=7;break}r.next=6;return this._versionDB();case 6:r.t0=r.sent;case 7:q=r.t0;r.next=20;break;case 10:if("commits"!==n){r.next=19;break}r.t1=this.__commitDB;if(r.t1){r.next=
16;break}r.next=15;return this._commitDB();case 15:r.t1=r.sent;case 16:q=r.t1;r.next=20;break;case 19:throw Error("Unknown conflict kind: ".concat(n));case 20:return r.next=22,q.set(p,f);case 22:return r.next=24,Promise.all(k.map(function(t){return q.pouchdb.remove(p,t)}));case 24:case "end":return r.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"getDiff",value:function(){var c=Bb(regeneratorRuntime.mark(function f(a,d){var k,n,p,q,r,t,w,x,B,D,F,L,G,oa,ha,Ha,Va,hc,
qc,jc,Ya,xa,tc,Qb,wc;return regeneratorRuntime.wrap(function(Zb){for(;;)switch(Zb.prev=Zb.next){case 0:k=a;"string"===typeof a&&(k=uf.Database.ensureDB("".concat(a,"-commits")),d=uf.Database.ensureDB("".concat(a,"-version-graph")));Zb.t0=this.__commitDB;if(Zb.t0){Zb.next=7;break}Zb.next=6;return this._commitDB();case 6:Zb.t0=Zb.sent;case 7:n=Zb.t0;Zb.t1=this.__versionDB;if(Zb.t1){Zb.next=13;break}Zb.next=12;return this._versionDB();case 12:Zb.t1=Zb.sent;case 13:return p=Zb.t1,Zb.next=16,n.diffWith(k);
case 16:return q=Zb.sent,Zb.next=19,p.diffWith(d);case 19:return r=Zb.sent,Zb.next=22,Promise.all(r.inLeft.map(function(){var $c=Bb(regeneratorRuntime.mark(function la(md){return regeneratorRuntime.wrap(function($a){for(;;)switch($a.prev=$a.next){case 0:return $a.t0=md.id,$a.next=3,p.get(md.id);case 3:return $a.t1=$a.sent,$a.abrupt("return",{id:$a.t0,doc:$a.t1});case 5:case "end":return $a.stop()}},la)}));return function(md){return $c.apply(this,arguments)}}()));case 22:return t=Zb.sent,Zb.t2=uf.arr,
Zb.next=26,d.getAll();case 26:return Zb.t3=Zb.sent,Zb.t4=function($c){return $c._id},w=Zb.t2.groupBy.call(Zb.t2,Zb.t3,Zb.t4),Zb.next=31,Promise.all(r.inRight.map(function(){var $c=Bb(regeneratorRuntime.mark(function la(md){return regeneratorRuntime.wrap(function($a){for(;;)switch($a.prev=$a.next){case 0:return $a.abrupt("return",{id:md.id,doc:w[md.id]});case 1:case "end":return $a.stop()}},la)}));return function(md){return $c.apply(this,arguments)}}()));case 31:return x=Zb.sent,Zb.next=34,Promise.all(r.changed.map(function(){var $c=
Bb(regeneratorRuntime.mark(function la(md){return regeneratorRuntime.wrap(function($a){for(;;)switch($a.prev=$a.next){case 0:return $a.t0=Object,$a.t1={},$a.t2=md.left,$a.next=5,p.get(md.left.id);case 5:return $a.t3=$a.sent,$a.next=8,d.get(md.right.id);case 8:return $a.t4=$a.sent,$a.t5={docA:$a.t3,docB:$a.t4},$a.abrupt("return",$a.t0.assign.call($a.t0,$a.t1,$a.t2,$a.t5));case 11:case "end":return $a.stop()}},la)}));return function(md){return $c.apply(this,arguments)}}()));case 34:return B=Zb.sent,
Zb.t5=uf.arr,Zb.next=38,k.getAll();case 38:Zb.t6=Zb.sent,Zb.t7=function($c){return $c._id},D=Zb.t5.groupBy.call(Zb.t5,Zb.t6,Zb.t7),F=[],L=[],G=[],oa=ba(q.inLeft),Zb.prev=45,oa.s();case 47:if((ha=oa.n()).done){Zb.next=56;break}Ha=ha.value;Zb.t8=F;Zb.next=52;return n.get(Ha.id);case 52:Zb.t9=Zb.sent,Zb.t8.push.call(Zb.t8,Zb.t9);case 54:Zb.next=47;break;case 56:Zb.next=61;break;case 58:Zb.prev=58,Zb.t10=Zb["catch"](45),oa.e(Zb.t10);case 61:return Zb.prev=61,oa.f(),Zb.finish(61);case 64:Va=ba(q.inRight),
Zb.prev=65,Va.s();case 67:if((hc=Va.n()).done){Zb.next=76;break}qc=hc.value;Zb.t11=L;Zb.next=72;return D[qc.id];case 72:Zb.t12=Zb.sent,Zb.t11.push.call(Zb.t11,Zb.t12);case 74:Zb.next=67;break;case 76:Zb.next=81;break;case 78:Zb.prev=78,Zb.t13=Zb["catch"](65),Va.e(Zb.t13);case 81:return Zb.prev=81,Va.f(),Zb.finish(81);case 84:jc=ba(q.changed),Zb.prev=85,jc.s();case 87:if((Ya=jc.n()).done){Zb.next=101;break}xa=Ya.value;Zb.t14=G;Zb.next=92;return n.get(xa.left.id);case 92:return Zb.t15=Zb.sent,Zb.t14.push.call(Zb.t14,
Zb.t15),Zb.t16=G,Zb.next=97,k.get(xa.right.id);case 97:Zb.t17=Zb.sent,Zb.t16.push.call(Zb.t16,Zb.t17);case 99:Zb.next=87;break;case 101:Zb.next=106;break;case 103:Zb.prev=103,Zb.t18=Zb["catch"](85),jc.e(Zb.t18);case 106:return Zb.prev=106,jc.f(),Zb.finish(106);case 109:return tc=F.map(function($c){return uf.obj.select($c,["_id","name","type"])}),Qb=L.map(function($c){return uf.obj.select($c,["_id","name","type"])}),wc=G.map(function($c){return uf.obj.select($c,["_id","name","type"])}),Zb.abrupt("return",
{changed:B,remote:x,local:t,changedCommitTypeAndNames:wc,remoteCommitTypeAndNames:Qb,localCommitTypeAndNames:tc});case 113:case "end":return Zb.stop()}},f,this,[[45,58,61,64],[65,78,81,84],[85,103,106,109]])}));return function(a,d){return c.apply(this,arguments)}}()},{key:"delete",value:function(){var c=Bb(regeneratorRuntime.mark(function f(a,d){var k,n,p,q,r,t,w,x,B,D,F,L,G,oa,ha,Ha=arguments;return regeneratorRuntime.wrap(function(Va){for(;;)switch(Va.prev=Va.next){case 0:k=2<Ha.length&&void 0!==
Ha[2]?Ha[2]:!0;n=[];p=[];Va.t0=this.__commitDB;if(Va.t0){Va.next=8;break}Va.next=7;return this._commitDB();case 7:Va.t0=Va.sent;case 8:return q=Va.t0,r={include_docs:!0,startkey:"".concat(a,"\x00").concat(d,"\x00"),endkey:"".concat(a,"\x00").concat(d,"\uffff")},Va.next=12,q.query("nameAndTimestamp_index",r);case 12:t=Va.sent;w=t.rows;x=ba(w);try{for(x.s();!(B=x.n()).done;)D=B.value.doc,D.deleted||D._deleted||!D.content||n.push(this.snapshotResourceFor(D)),p.push(Object.assign({},D,{_deleted:!0}))}catch(hc){x.e(hc)}finally{x.f()}Va.t1=
this.__versionDB;if(Va.t1){Va.next=21;break}Va.next=20;return this._versionDB();case 20:Va.t1=Va.sent;case 21:return F=Va.t1,Va.next=24,F.get(a+"/"+d);case 24:L=Va.sent;G=L._id;oa=L._rev;ha={_id:G,_rev:oa,_deleted:!0};if(k){Va.next=34;break}Va.next=31;return q.setDocuments(p);case 31:return Va.next=33,F.setDocuments([ha]);case 33:Promise.all(n.map(function(hc){return hc.remove()}));case 34:return Va.abrupt("return",{commits:p,history:ha,resources:n});case 35:case "end":return Va.stop()}},f,this)}));
return function(a,d){return c.apply(this,arguments)}}()},{key:"deleteCommit",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f,k,n,p,q,r,t,w,x,B,D,F,L,G,oa,ha=arguments;return regeneratorRuntime.wrap(function(Ha){for(;;)switch(Ha.prev=Ha.next){case 0:f=1<ha.length&&void 0!==ha[1]?ha[1]:!0;k=2<ha.length&&void 0!==ha[2]?ha[2]:"HEAD";if(!a||"string"===typeof a){Ha.next=6;break}n=a;Ha.next=16;break;case 6:if(!a){Ha.next=16;break}Ha.t0=this.__commitDB;if(Ha.t0){Ha.next=12;break}Ha.next=
11;return this._commitDB();case 11:Ha.t0=Ha.sent;case 12:return p=Ha.t0,Ha.next=15,p.get(a);case 15:n=Ha.sent;case 16:if(n){Ha.next=18;break}throw Error("commit needed!");case 18:Ha.t1=this.__versionDB;if(Ha.t1){Ha.next=23;break}Ha.next=22;return this._versionDB();case 22:Ha.t1=Ha.sent;case 23:q=Ha.t1;Ha.t2=this.__commitDB;if(Ha.t2){Ha.next=29;break}Ha.next=28;return this._commitDB();case 28:Ha.t2=Ha.sent;case 29:return r=Ha.t2,t=n,w=t.name,x=t.type,B=n.deleted||n._deleted||!n.content?[]:[this.snapshotResourceFor(n)],
D=[Object.assign({},n,{_deleted:!0})],Ha.next=35,q.get(x+"/"+w);case 35:if(F=Ha.sent){Ha.next=38;break}throw Error("No history for ".concat(x,"/").concat(w,"@").concat(n._id));case 38:if(F.refs[k]){Ha.next=40;break}throw Error("Cannot delete commit ".concat(x,"/").concat(w,"@").concat(n._id," b/c it is not where ref ").concat(k," is pointing!"));case 40:L=F.history[n._id]||[];G=Nb(L,1);if((oa=G[0])||!(1>=Object.keys(F.history).length)){Ha.next=45;break}F._deleted=!0;Ha.next=51;break;case 45:if(oa){Ha.next=
49;break}throw Error("Cannot delete commit ".concat(x,"/").concat(w,"@").concat(n._id," b/c it has no ancestor but there are still other commits!"));case 49:delete F.history[n._id],F.refs[k]=oa;case 51:if(f){Ha.next=58;break}Ha.next=54;return q.set(x+"/"+w,F);case 54:return Ha.next=56,r.setDocuments(D);case 56:return Ha.next=58,Promise.all(B.map(function(Va){return Va.remove()}));case 58:return Ha.abrupt("return",{commits:D,history:F,resources:B});case 59:case "end":return Ha.stop()}},d,this)}));
return function(a){return c.apply(this,arguments)}}()},{key:"_commitdb_indexes",get:function(){return[{name:"name_index",version:4,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name); }'},{name:"nameAndTimestamp_index",version:3,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name + "\x00" + doc.timestamp + "\x00" + doc._id); }'},{name:"nameWithMaxMinTimestamp_index",version:3,mapFn:'function(doc) { emit(doc.type + "\x00" + doc.name, doc.timestamp); }',reduceFn:"_stats"},{name:"nameTypeFilter",
version:9,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames)\n            return !!req.query.onlyTypesAndNames[doc.type + "/" + doc.name];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}},{key:"_versiondb_indexes",get:function(){return[{name:"nameTypeFilter",
version:3,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames) return !!req.query.onlyTypesAndNames[doc._id];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}}]);return b}();uf.ObjectDB=Xx;var a7=function(){function b(c,g,a,d){var f=4<arguments.length&&
void 0!==arguments[4]?arguments[4]:{};rd(this,b);this.options=Object.assign({debug:!1,live:!1,method:"sync",replicationFilter:void 0},f);this.state="not started";this.method="";this.fromObjectDB=c;this.remoteCommitDB=g;this.remoteVersionDB=a;this.remoteLocation=d;this.deferred=uf.promise.deferred();this.conflicts=[];this.changes=[];this.errors=[]}Ac(b,[{key:"whenPaused",value:function(){var c=this;return Promise.resolve().then(function(){return uf.promise.waitFor(function(){return c.isPaused||c.isComplete})}).then(function(){return c})}},
{key:"waitForIt",value:function(){return this.deferred.promise}},{key:"start",value:function(){if(!this.isSynchonizing)this._startReplicationAndCopy()["catch"](function(c){return console.error("Error starting synchronization: ",c)});return this}},{key:"_startReplicationAndCopy",value:function(){var c=Bb(regeneratorRuntime.mark(function a(){var d=this,f,k,n,p,q,r,t,w,x,B,D,F,L,G,oa,ha,Ha,Va,hc,qc,jc,Ya,xa,tc,Qb,wc,Zb,$c,Oa,md,la,$a,dd,Kd;return regeneratorRuntime.wrap(function(ra){for(;;)switch(ra.prev=
ra.next){case 0:Kd=function(Aa){if(!Aa.content)return null;var V=Aa.content.slice(0,2);Aa=Aa.content.slice(2);return"".concat(V,"/").concat(Aa,".json")};dd=function(Aa,V){if(V.length||"complete"===md&&"complete"===la&&Oa.isComplete()){qc.cancel();if(V.length){Aa.state="complete";Aa.errors=V;Zb.cancel();$c.cancel();var ea=Error("Synchronization error:\n  ".concat(V.join("\n  ")));ea.errors=V;console.log("".concat(Aa," errored"))}else console.log("".concat(Aa," completed"));ea?Aa.deferred.reject(ea):
Aa.deferred.resolve(Aa)}};$a=function(Aa){return"paused"===la&&"paused"===md&&0>=Oa.copyCalls&&0>=Oa.copyCallsWaiting?Aa.state="paused":"complete"===la&&"complete"===md&&Oa.isComplete()?Aa.state="complete":Aa.state="running"};f=this.fromObjectDB;k=this.remoteCommitDB;n=this.remoteVersionDB;p=this.remoteLocation;q=this.options;r=q.debug;t=q.live;w=void 0===t?!1:t;x=q.retry;B=void 0===x?!1:x;D=q.method;F=q.replicationFilter;L=q.pushDesignDocToRemote;G=void 0===L?!1:L;ra.t0=f.__versionDB;if(ra.t0){ra.next=
9;break}ra.next=8;return f._versionDB();case 8:ra.t0=ra.sent;case 9:oa=ra.t0;ra.t1=f.__commitDB;if(ra.t1){ra.next=15;break}ra.next=14;return f._commitDB();case 14:ra.t1=ra.sent;case 15:ha=ra.t1;Ha=f._commitdb_indexes;Va=f._versiondb_indexes;hc=f.snapshotLocation;this.method=D;Ya=Ha.find(function(Aa){return"nameTypeFilter"===Aa.name});xa=Va.find(function(Aa){return"nameTypeFilter"===Aa.name});if(!G){ra.next=27;break}console.log("adding commitNameTypeFilter");ra.next=24;return k.addDesignDoc(Ya);case 24:return console.log("adding versionNameTypeFilter"),
ra.next=27,n.addDesignDoc(xa);case 27:return tc={live:w,retry:B},Qb=Object.assign({},tc),wc=Object.assign({},tc),F&&(Qb.filter=eval("(".concat(Ya.filterFn,")")),Qb.query_params=F,wc.filter=eval("(".concat(xa.filterFn,")")),wc.query_params=F),Zb=ha[D](k,Qb),$c=oa[D](n,wc),Oa={copyCalls:0,copyCallsWaiting:0,nFilesToCopy:0,nFilesCopied:0,stopped:!1,isComplete:function(){return this.stopped||0>=this.copyCalls&&0>=this.copyCallsWaiting}},la=md="not started",this.versionReplication=$c,this.commitReplication=
Zb,this.snapshotReplication=Oa,jc=k.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),qc=n.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),jc.on("change",function(Aa){var V=Aa.id,ea=Aa.changes;Aa=Aa.doc._conflicts;r&&console.log("commit changes ".concat(V,":"),ea,Aa);Aa&&(console.log("commit conflict ".concat(V,":"),ea,Aa),d.conflicts.push({db:"commits",id:V,changes:ea,conflicts:Aa}))}),qc.on("change",function(Aa){var V=Aa.id,ea=Aa.changes;Aa=Aa.doc._conflicts;r&&console.log("version changes ".concat(V,
":"),ea,Aa);Aa&&(console.log("version conflict ".concat(V,":"),ea,Aa),d.conflicts.push({db:"versions",id:V,changes:ea,conflicts:Aa}))}),Zb.on("change",function(){var Aa=Bb(regeneratorRuntime.mark(function Mb(ea){var U,Sa,S,Sc,xd,Ae,ee,Fe,Mf,Tg;return regeneratorRuntime.wrap(function(pg){for(;;)switch(pg.prev=pg.next){case 0:"replicateTo"===D?ea={direction:"push",change:ea}:"replicateFrom"===D&&(ea={direction:"pull",change:ea}),U=ea,Sa=U.direction,S=U.change,Sc=S.docs,console.log("".concat(d," ").concat("push"===
Sa?"send":"received"," ").concat(Sc.length," commits")),pg.prev=3,Ae=[],ee=ba(Sc),pg.prev=6,ee.s();case 8:if((Fe=ee.n()).done){pg.next=17;break}Mf=Fe.value;if(!Mf._id.startsWith("_")){pg.next=12;break}return pg.abrupt("continue",15);case 12:d.changes.push({direction:Sa,kind:"commits",id:Mf._id,type:Mf.type,name:Mf.name}),(Tg=Kd(Mf))&&Ae.push(Tg);case 15:pg.next=8;break;case 17:pg.next=22;break;case 19:pg.prev=19,pg.t0=pg["catch"](6),ee.e(pg.t0);case 22:return pg.prev=22,ee.f(),pg.finish(22);case 25:Oa.nFilesToCopy+=
Ae.length;if(!(0<Oa.copyCalls)){pg.next=31;break}Oa.copyCallsWaiting++;pg.next=30;return uf.promise.waitFor(function(){return 0>=Oa.copyCalls});case 30:Oa.copyCallsWaiting--;case 31:return Oa.copyCalls++,$a(d),console.log("".concat(d," copying ").concat(Ae.length," snapshots...")),pg.next=36,uf.promise.parallel(Ae.map(function(Yg){return function(){var Rh=("push"===Sa?hc:p).join(Yg),Ei=("push"===Sa?p:hc).join(Yg);return Oa.stopped?(console.warn("".concat(d," Stopping copying resources b/c synchronization ended (").concat(Oa.copyCalls,
", ").concat(Rh.url," => ").concat(Ei.url,")")),Promise.resolve()):Ei.exists().then(function(Xj){function Aj(){var yi=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return Rh.copyTo(Ei)["catch"](function(dj){if(5<=yi)throw dj;return Aj(yi+1)})}return Xj?(r&&console.log("Skip copying to ".concat(Ei.url,", already exist")),Promise.resolve()):Rh.exists().then(function(yi){if(!yi)return console.warn("Skip copying ".concat(Rh.url,", does not exist")),Promise.resolve();r&&console.log("".concat(d,
" Copying ").concat(Rh.url," => ").concat(Ei.url));return Aj(0).then(function(dj){Oa.nFilesCopied++;Oa.stopped||0!==Oa.nFilesCopied%10||console.log("".concat(d," copied ").concat(Oa.nFilesCopied," of ").concat(Oa.nFilesToCopy," snapshots"));return dj})})})}}),5);case 36:console.log("".concat(d," sending files done"));pg.next=44;break;case 39:throw pg.prev=39,pg.t1=pg["catch"](3),console.error("error in commitReplication onChange",pg.t1),xd=pg.t1,pg.t1;case 44:return pg.prev=44,Oa.copyCalls--,$a(d),
dd(d,xd?[xd]:[]),pg.finish(44);case 49:case "end":return pg.stop()}},Mb,null,[[3,39,44,49],[6,19,22,25]])}));return function(ea){return Aa.apply(this,arguments)}}()).on("paused",function(){md="paused";$a(d);r&&console.log("".concat(d," commit replication paused"))}).on("active",function(){md="active";$a(d);r&&console.log("".concat(d," commit replication active"))}).on("error",function(Aa){md="complete";$a(d);console.error("".concat(d," commit replication error"),Aa);dd(d,[Aa])}).on("complete",function(Aa){md=
"complete";$a(d);Aa="sync"===D?Aa.push.errors.concat(Aa.pull.errors):Aa.errors;dd(d,Aa)}),$c.on("change",function(Aa){"replicateTo"===D?Aa={direction:"push",change:Aa}:"replicateFrom"===D&&(Aa={direction:"pull",change:Aa});var V=Aa.direction;Aa=Aa.change;Aa.ok;var ea=Aa.docs;Aa.errors;r&&console.log("".concat(d," ").concat("push"===V?"send":"received"," ").concat(ea.length," histories"));ea.forEach(function(Mb){Mb._id.startsWith("_")||d.changes.push({direction:V,kind:"versions",id:Mb._id})})}).on("paused",
function(){la="paused";$a(d);r&&console.log("".concat(d," version replication paused"))}).on("active",function(Aa){la="active";$a(d);r&&console.log("".concat(d," version replication active"),Aa)}).on("error",function(Aa){la="complete";$a(d);console.error("".concat(d," version replication error"),Aa);dd(d,[Aa])}).on("complete",function(Aa){la="complete";$a(d);Aa="sync"===D?Aa.push.errors.concat(Aa.pull.errors):Aa.errors;dd(d,Aa)}),this.state="running",ra.abrupt("return",this);case 47:case "end":return ra.stop()}},
a,this)}));return function(){return c.apply(this,arguments)}}()},{key:"safeStop",value:function(){var c=Bb(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if("not started"!==this.state&&this.isSynchonizing){d.next=2;break}return d.abrupt("return",this);case 2:return d.next=4,this.whenPaused();case 4:return d.abrupt("return",this.stop());case 5:case "end":return d.stop()}},a,this)}));return function(){return c.apply(this,arguments)}}()},
{key:"stop",value:function(){if("not started"===this.state||!this.isSynchonizing)return this;this.commitReplication.cancel();this.versionReplication.cancel();this.snapshotReplication.stopped=!0;return this}},{key:"toString",value:function(){var c=this.method,g=this.fromObjectDB.name;c="sync"===c?"<=>":"replicateTo"===c?"=>":"replicateFrom"===c?"<=":"??";return"Synchronization(".concat(this.state,": ").concat(g," ").concat(c,")")}},{key:"isSynchonizing",get:function(){return this.isPaused||this.isRunning}},
{key:"isComplete",get:function(){return"complete"===this.state}},{key:"isRunning",get:function(){return"running"===this.state}},{key:"isPaused",get:function(){return"paused"===this.state}},{key:"changesByTypeAndName",get:function(){var c={push:{},pull:{}};this.changes.forEach(function(g){var a=g.direction,d=g.id,f=g.kind;if("_"!==d[0]){if("versions"===f)var k=c[a][d]||(c[a][d]=[]);else"commits"===f&&(d="".concat(g.type,"/").concat(g.name),k=c[a][d]||(c[a][d]=[]));k.push(g)}});return c}}]);return b}();
uf.Synchronization=a7;var Yx={describe:function(b){var c=this;return Bb(regeneratorRuntime.mark(function a(){var d,f,k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:n=function(q,r){q=q.find(function(G){return G.name===r}).node.value.body;var t=q.body||[],w=(q.comments||[]).find(function(G){return G.end<t[0].start});q={name:r,parameters:[],sideEffect:!1,returns:null,description:""};if(w&&w.text.trim()){w=uf.string.changeIndent(w.text," ",0).split("\n");w=ba(w);var x;
try{for(w.s();!(x=w.n()).done;){var B=x.value;if(B.startsWith("ignore-in-doc")){q.description="";break}B.startsWith("side effect:")?q.sideEffect=JSON.parse(B.split(":")[1]):B.startsWith("returns:")?q.returns=B.split(":")[1].trim():q.description+=B+"\n"}}catch(G){w.e(G)}finally{w.f()}}x=ba(t);var D;try{for(x.s();!(D=x.n()).done;){var F=D.value;if("checkArgs"===uf.Path("declarations.0.init.callee.name").get(F)){var L=uf.Path("declarations.0.id.properties").get(F);L&&(q.parameters=L.map(function(G){return G.key.name}))}}}catch(G){x.e(G)}finally{x.f()}return q};
p.prev=1;if(c._methodSpecs){p.next=9;break}p.next=5;return lively.modules.module("lively.storage/objectdb.js").source();case 5:d=p.sent,f=uf.parse(d,{withComments:!0}),k=uf.categorizer.findDecls(f),c._methodSpecs=k.filter(function(q){return q.parent&&"ObjectDBInterface"===q.parent.name});case 9:return p.abrupt("return",b?n(c._methodSpecs,b):c._methodSpecs.map(function(q){return n(c._methodSpecs,q.name)}).filter(Boolean));case 12:return p.prev=12,p.t0=p["catch"](1),p.abrupt("return","Error in describe ".concat(p.t0));
case 15:case "end":return p.stop()}},a,null,[[1,12]])}))()},ensureDB:function(b){return Bb(regeneratorRuntime.mark(function g(){var a,d,f,k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=uf.checkArgs(b,{db:"string",snapshotLocation:"string|Resource"}),d=a.db,f=a.snapshotLocation,n.next=3,uf.ObjectDB.find(d);case 3:k=n.sent;if(!k){n.next=6;break}return n.abrupt("return",!1);case 6:return uf.ObjectDB.named(d,{snapshotLocation:f}),n.abrupt("return",!0);case 8:case "end":return n.stop()}},
g)}))()},destroyDB:function(b){return Bb(regeneratorRuntime.mark(function g(){var a,d,f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return a=uf.checkArgs(b,{db:"string"}),d=a.db,k.next=3,uf.ObjectDB.find(d);case 3:if(f=k.sent){k.next=6;break}return k.abrupt("return",!1);case 6:return k.next=8,f.destroy();case 8:return k.abrupt("return",!0);case 9:case "end":return k.stop()}},g)}))()},fetchCommits:function(b){return Bb(regeneratorRuntime.mark(function g(){var a,d,
f,k,n,p,q,r,t,w,x,B,D,F,L,G,oa,ha,Ha,Va,hc,qc,jc,Ya,xa,tc,Qb,wc,Zb,$c;return regeneratorRuntime.wrap(function(Oa){for(;;)switch(Oa.prev=Oa.next){case 0:return a=uf.checkArgs(b,{db:"string",ref:"string|undefined",type:"string|undefined",typesAndNames:"Array|undefined",knownCommitIds:"object|undefined",includeDeleted:"boolean|undefined",filterFn:"string|undefined"}),d=a.db,f=a.ref,k=a.type,n=a.typesAndNames,p=a.knownCommitIds,q=a.includeDeleted,r=a.filterFn,Oa.next=3,uf.ObjectDB.find(d);case 3:t=Oa.sent;
f||(f="HEAD");if(t){Oa.next=7;break}throw Error("db ".concat(d," does not exist"));case 7:Oa.t0=t.__commitDB;if(Oa.t0){Oa.next=12;break}Oa.next=11;return t._commitDB();case 11:Oa.t0=Oa.sent;case 12:Oa.t1=t.__versionDB;if(Oa.t1){Oa.next=18;break}Oa.next=17;return t._versionDB();case 17:Oa.t1=Oa.sent;case 18:w=Oa.t1;x={};B={};if(n){D=x.keys=[];F=ba(n);try{for(F.s();!(L=F.n()).done;)G=L.value,oa=G.type,ha=G.name,Ha=G.ref,D.push("".concat(oa,"/").concat(ha)),Ha&&(B["".concat(oa,"/").concat(ha)]=Ha)}catch(md){F.e(md)}finally{F.f()}}else k&&
(x.startkey="".concat(k,'/\x00"'),x.endkey="".concat(k,'/\uffff"'));Oa.next=24;return w.getAll(x);case 24:Va=Oa.sent,hc=[],qc=ba(Va),Oa.prev=27,qc.s();case 29:if((jc=qc.n()).done){Oa.next=42;break}if(Ya=jc.value){Oa.next=33;break}return Oa.abrupt("continue",40);case 33:if(!Ya.deleted&&!Ya._deleted){Oa.next=35;break}return Oa.abrupt("continue",40);case 35:xa=Ya._id;tc=Ya.refs;if(!xa.startsWith("_")){Oa.next=38;break}return Oa.abrupt("continue",40);case 38:Qb=tc[B[xa]||f]||f,!Qb||p&&p.hasOwnProperty(Qb)||
hc.push(Qb);case 40:Oa.next=29;break;case 42:Oa.next=47;break;case 44:Oa.prev=44,Oa.t2=Oa["catch"](27),qc.e(Oa.t2);case 47:return Oa.prev=47,qc.f(),Oa.finish(47);case 50:return Oa.next=52,t.getCommitsWithIds(hc);case 52:wc=Oa.sent;q||(wc=wc.filter(function(md){return md&&!md.deleted}));if(!r){Oa.next=70;break}Oa.prev=55;Zb=eval("(".concat(r,")"));if("function"===typeof Zb){Oa.next=59;break}throw Error("".concat(r," does not eval to a function!"));case 59:$c=wc.filter(Zb);if(Array.isArray($c)){Oa.next=
64;break}throw Error("".concat(r," does not return an array!"));case 64:wc=$c;case 65:Oa.next=70;break;case 67:Oa.prev=67,Oa.t3=Oa["catch"](55),console.error("fetchCommits filterFn failed:",Oa.t3);case 70:return Oa.abrupt("return",wc);case 71:case "end":return Oa.stop()}},g,null,[[27,44,47,50],[55,67]])}))()},fetchVersionGraph:function(b){return Bb(regeneratorRuntime.mark(function g(){var a,d,f,k,n,p,q,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=uf.checkArgs(b,
{db:"string",type:"string",name:"string"}),d=a.db,f=a.type,k=a.name,t.next=3,uf.ObjectDB.find(d);case 3:if(n=t.sent){t.next=6;break}throw Error("db ".concat(d," does not exist"));case 6:return t.next=8,n.versionGraph(f,k);case 8:return p=t.sent,q=p.refs,r=p.history,t.abrupt("return",{refs:q,history:r});case 12:case "end":return t.stop()}},g)}))()},exists:function(b){return Bb(regeneratorRuntime.mark(function g(){var a,d,f,k,n,p,q,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=
uf.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined"}),d=a.db,f=a.type,k=a.name,n=a.ref,t.next=3,uf.ObjectDB.find(d);case 3:return p=t.sent,t.next=6,p.versionGraph(f,k);case 6:if(q=t.sent){t.next=9;break}return t.abrupt("return",{exists:!1,commitId:void 0});case 9:n=n||"HEAD";if(r=q.refs[n]){t.next=13;break}return t.abrupt("return",{exists:!1,commitId:void 0});case 13:return t.abrupt("return",{exists:!0,commitId:r});case 14:case "end":return t.stop()}},g)}))()},fetchLog:function(b){return Bb(regeneratorRuntime.mark(function g(){var a,
d,f,k,n,p,q,r,t,w,x,B,D,F,L,G,oa,ha,Ha,Va;return regeneratorRuntime.wrap(function(hc){for(;;)switch(hc.prev=hc.next){case 0:return a=uf.checkArgs(b,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",commit:"string|undefined",limit:"number|undefined",includeCommits:"boolean|undefined",knownCommitIds:"object|undefined"},function(qc){return qc.type&&qc.name||qc.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),d=a.db,f=a.type,k=a.name,n=a.ref,p=a.commit,
q=a.limit,r=a.includeCommits,t=a.knownCommitIds,hc.next=3,uf.ObjectDB.find(d);case 3:w=hc.sent;x=n||"HEAD";if(w){hc.next=7;break}throw Error("db ".concat(d," does not exist"));case 7:q||(q=Infinity);p||n||(n=x);if(!p){hc.next=18;break}B=p;if(f&&k){hc.next=18;break}hc.next=14;return w.getCommit(p);case 14:if(D=hc.sent){hc.next=17;break}throw Error("fetchLog: specified commit ".concat(p," but no commit with this id is in the database!"));case 17:uf.__inter0__=D,f=uf.__inter0__.type,k=uf.__inter0__.name;
case 18:return hc.next=20,w.versionGraph(f,k);case 20:if(F=hc.sent){hc.next=23;break}throw Error("Unknown object ".concat(f,"/").concat(k));case 23:L=F.refs,G=F.history,B||(B=L[n]),oa=B,ha=[];case 27:if(!(ha.length<q)||ha.includes(oa)){hc.next=36;break}ha.push(oa);if((Ha=G[oa])&&Ha.length){hc.next=32;break}return hc.abrupt("break",36);case 32:Va=Nb(Ha,1);oa=Va[0];hc.next=27;break;case 36:if(!r){hc.next=41;break}t&&(ha=ha.filter(function(qc){return!t.hasOwnProperty(qc)}));hc.next=40;return w.getCommitsWithIds(ha);
case 40:ha=hc.sent;case 41:return hc.abrupt("return",ha);case 42:case "end":return hc.stop()}},g)}))()},fetchSnapshot:function(b){return Bb(regeneratorRuntime.mark(function g(){var a,d,f,k,n,p,q,r,t;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return a=uf.checkArgs(b,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",commit:"string|undefined"},function(x){return x.type&&x.name||x.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),
d=a.db,f=a.type,k=a.name,n=a.ref,p=a.commit,w.next=3,uf.ObjectDB.find(d);case 3:q=w.sent;n=n||"HEAD";if(q){w.next=8;break}throw Error("db ".concat(d," does not exist"));case 8:if(p){w.next=17;break}w.next=11;return q.versionGraph(f,k);case 11:if(r=w.sent){w.next=14;break}throw Error("Unknown object ".concat(f,"/").concat(k));case 14:if(p=r.refs[n]){w.next=17;break}throw Error("Cannot find commit for ref ".concat(n," of ").concat(f,"/").concat(k));case 17:return w.next=19,q.getCommit(p);case 19:if(t=
w.sent){w.next=22;break}throw Error("Cannot find commit ".concat(p));case 22:return w.abrupt("return",q.loadSnapshot(void 0,void 0,t));case 23:case "end":return w.stop()}},g)}))()},revert:function(b){return Bb(regeneratorRuntime.mark(function g(){var a,d,f,k,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=uf.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined",toCommitId:"string"}),d=a.db,f=a.type,k=a.name,n=a.ref,p=a.toCommitId,
r.next=3,uf.ObjectDB.find(d);case 3:return q=r.sent,n||(n="HEAD"),r.abrupt("return",q.revert(f,k,n,p));case 6:case "end":return r.stop()}},g)}))()},commit:function(b){return Bb(regeneratorRuntime.mark(function g(){var a,d,f,k,n,p,q,r,t,w;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return a=uf.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined",snapshot:"object|string|undefined",preview:"string|undefined",commitSpec:"object",expectedParentCommit:"string|undefined"}),
d=a.db,f=a.type,k=a.name,n=a.ref,p=a.expectedParentCommit,q=a.commitSpec,r=a.snapshot,t=a.preview,x.next=3,uf.ObjectDB.find(d);case 3:return w=x.sent,n||(n="HEAD"),x.abrupt("return",w.commit(f,k,r,q,t,n,p));case 6:case "end":return x.stop()}},g)}))()},exportToSpecs:function(b){return Bb(regeneratorRuntime.mark(function g(){var a,d,f,k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=uf.checkArgs(b,{db:"string",nameAndTypes:"Array|undefined",includeDeleted:"boolean|undefined"}),
d=a.db,f=a.nameAndTypes,n.next=3,uf.ObjectDB.find(d);case 3:if(k=n.sent){n.next=6;break}throw Error("db ".concat(d," does not exist"));case 6:return n.abrupt("return",k.exportToSpecs(f));case 7:case "end":return n.stop()}},g)}))()},exportToDir:function(b){return Bb(regeneratorRuntime.mark(function g(){var a,d,f,k,n,p,q,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=uf.checkArgs(b,{db:"string",url:"string",nameAndTypes:"Array|undefined",copyResources:"boolean|undefined",
includeDeleted:"boolean|undefined"}),d=a.db,f=a.url,k=a.nameAndTypes,n=a.copyResources,p=a.includeDeleted,t.next=3,uf.ObjectDB.find(d);case 3:if(q=t.sent){t.next=6;break}throw Error("db ".concat(d," does not exist"));case 6:try{r=uf.resource(f)}catch(w){r=uf.resource(System.baseURL).join(f)}return t.abrupt("return",q.exportToDir(r,k,n,p));case 8:case "end":return t.stop()}},g)}))()},importFromDir:function(b){return Bb(regeneratorRuntime.mark(function g(){var a,d,f,k,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=
r.next){case 0:return a=uf.checkArgs(b,{db:"string",url:"string",overwrite:"boolean|undefined",copyResources:"boolean|undefined"}),d=a.db,f=a.url,k=a.overwrite,n=a.copyResources,r.next=3,uf.ObjectDB.find(d);case 3:if(p=r.sent){r.next=6;break}throw Error("db ".concat(d," does not exist"));case 6:try{q=uf.resource(f)}catch(t){q=uf.resource(System.baseURL).join(f)}return r.abrupt("return",p.importFromDir(q,k,n));case 8:case "end":return r.stop()}},g)}))()},importFromSpecs:function(b){return Bb(regeneratorRuntime.mark(function g(){var a,
d,f,k,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return a=uf.checkArgs(b,{db:"string",specs:"object",overwrite:"boolean|undefined",copyResources:"boolean|undefined"}),d=a.db,f=a.specs,k=a.overwrite,n=a.copyResources,q.next=3,uf.ObjectDB.find(d);case 3:if(p=q.sent){q.next=6;break}throw Error("db ".concat(d," does not exist"));case 6:return q.abrupt("return",p.importFromSpecs(f,k,n));case 7:case "end":return q.stop()}},g)}))()},importFromResource:function(b){return Bb(regeneratorRuntime.mark(function g(){var a,
d,f,k,n,p,q,r,t;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return a=uf.checkArgs(b,{db:"string",type:"string",name:"string",url:"string",commitSpec:"object",purgeHistory:"boolean|undefined"}),d=a.db,f=a.type,k=a.name,n=a.url,p=a.commitSpec,q=a.purgeHistory,w.next=3,uf.ObjectDB.find(d);case 3:if(r=w.sent){w.next=6;break}throw Error("db ".concat(d," does not exist"));case 6:try{t=uf.resource(n)}catch(x){t=uf.resource(System.baseURL).join(n)}return w.abrupt("return",
r.importFromResource(f,k,t,p,q));case 8:case "end":return w.stop()}},g)}))()},"delete":function(b){return Bb(regeneratorRuntime.mark(function g(){var a,d,f,k,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return a=uf.checkArgs(b,{db:"string",type:"string",name:"string",dryRun:"boolean|undefined"}),d=a.db,f=a.type,k=a.name,n=a.dryRun,q.next=3,uf.ObjectDB.find(d);case 3:return p=q.sent,q.abrupt("return",p["delete"](f,k,"undefined"===typeof n||n));case 5:case "end":return q.stop()}},
g)}))()},deleteCommit:function(b){return Bb(regeneratorRuntime.mark(function g(){var a,d,f,k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return a=uf.checkArgs(b,{db:"string",commit:"string",dryRun:"boolean|undefined"}),d=a.db,f=a.commit,k=a.dryRun,p.next=3,uf.ObjectDB.find(d);case 3:return n=p.sent,p.abrupt("return",n.deleteCommit(f,"undefined"===typeof k||k));case 5:case "end":return p.stop()}},g)}))()},fetchConflicts:function(b){return Bb(regeneratorRuntime.mark(function g(){var a,
d,f,k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return a=uf.checkArgs(b,{db:"string",includeDocs:"boolean|undefined",only:"object|undefined"}),d=a.db,f=a.includeDocs,k=a.only,p.next=3,uf.ObjectDB.find(d);case 3:return n=p.sent,p.abrupt("return",n.getConflicts(f,k));case 5:case "end":return p.stop()}},g)}))()},resolveConflict:function(b){return Bb(regeneratorRuntime.mark(function g(){var a,d,f,k,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=
r.next){case 0:return a=uf.checkArgs(b,{db:"string",id:"string",kind:"string","delete":"Array",resolved:"object"}),d=a.db,f=a.resolved,k=a["delete"],n=a.kind,p=a.id,r.next=3,uf.ObjectDB.find(d);case 3:return q=r.sent,r.abrupt("return",q.resolveConflict({resolved:f,"delete":k,kind:n,id:p}));case 5:case "end":return r.stop()}},g)}))()},fetchDiff:function(b){return Bb(regeneratorRuntime.mark(function g(){var a,d,f,k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=
uf.checkArgs(b,{db:"string",otherDB:"string"}),d=a.db,f=a.otherDB,n.next=3,uf.ObjectDB.find(d);case 3:return k=n.sent,n.abrupt("return",k.getDiff(f));case 5:case "end":return n.stop()}},g)}))()},synchronize:function(b){return Bb(regeneratorRuntime.mark(function g(){var a,d,f,k,n,p,q,r,t,w,x,B,D;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return a=uf.checkArgs(b,{db:"string",otherDB:"string",otherDBSnapshotLocation:"string|undefined",onlyTypesAndNames:"object|undefined",
method:"string|undefined"}),d=a.db,f=a.otherDB,k=a.otherDBSnapshotLocation,n=a.onlyTypesAndNames,p=a.method,F.next=3,uf.ObjectDB.find(d);case 3:return k||(k=f.replace(/\/$/,"")+"/snapshots"),p||(p="replicateTo"),F.next=8,uf.ObjectDB.find(d);case 8:return q=F.sent,F.next=11,uf.ObjectDB.named(f,{snapshotLocation:k});case 11:return r=F.sent,F.next=14,r._commitDB();case 14:return t=F.sent,F.next=17,r._versionDB();case 17:return w=F.sent,x=r.snapshotLocation,B={replicationFilter:n?{onlyTypesAndNames:n}:
void 0,retry:!0,live:!0},D=q[p](t,w,x,B),F.next=23,D.whenPaused();case 23:return F.next=25,D.safeStop();case 25:return F.next=27,D.waitForIt();case 27:return F.abrupt("return",uf.obj.select(D,["state","method","conflicts","errors","changesByTypeAndName"]));case 28:case "end":return F.stop()}},g)}))()}};uf.ObjectDBInterface=Yx;uf.ObjectDBInterface=Yx;var Zx=function(){function b(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.location.origin+"/objectdb/";rd(this,b);this.serverURL=
c}Ac(b,[{key:"_processResponse",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f,k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return f=a.headers.get("content-type"),p.next=3,a.text();case 3:k=p.sent;if("application/json"===f)try{n=JSON.parse(k)}catch(q){}if(!(!a.ok||n&&n.error)){p.next=7;break}throw Error(n&&n.error||k||a.statusText);case 7:return p.abrupt("return",n||k);case 8:case "end":return p.stop()}},d)}));return function(a){return c.apply(this,
arguments)}}()},{key:"_GET",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f,k,n,p=arguments;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return f=1<p.length&&void 0!==p[1]?p[1]:{},k=Object.keys(f).map(function(r){var t=f[r];"object"===Jc(t)&&(t=JSON.stringify(t));return"".concat(r,"=").concat(encodeURIComponent(t))}).join("&"),n=this.serverURL+a+"?"+k,q.t0=this,q.next=6,fetch(n);case 6:return q.t1=q.sent,q.abrupt("return",q.t0._processResponse.call(q.t0,
q.t1));case 8:case "end":return q.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"_POST",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){var f,k,n=arguments;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return f=1<n.length&&void 0!==n[1]?n[1]:{},k=this.serverURL+a,p.t0=this,p.next=5,fetch(k,{method:"POST",body:JSON.stringify(f),headers:{"content-type":"application/json"}});case 5:return p.t1=p.sent,p.abrupt("return",
p.t0._processResponse.call(p.t0,p.t1));case 7:case "end":return p.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"describe",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._GET("describe",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"ensureDB",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=
f.next){case 0:return f.abrupt("return",this._POST("ensureDB",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"destroyDB",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._POST("destroyDB",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"fetchCommits",
value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._GET("fetchCommits",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"fetchVersionGraph",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._GET("fetchVersionGraph",
a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"exists",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._GET("exists",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"fetchLog",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=
f.next){case 0:return f.abrupt("return",this._GET("fetchLog",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"fetchSnapshot",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._GET("fetchSnapshot",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"revert",
value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._POST("revert",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"commit",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._POST("commit",a));case 1:case "end":return f.stop()}},
d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"exportToSpecs",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._GET("exportToSpecs",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"exportToDir",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=
f.next){case 0:return f.abrupt("return",this._POST("exportToDir",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"importFromDir",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._POST("importFromDir",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"importFromSpecs",
value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._POST("importFromSpecs",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"importFromResource",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._POST("importFromResource",
a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"delete",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._POST("delete",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"deleteCommit",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=
f.next){case 0:return f.abrupt("return",this._POST("deleteCommit",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"fetchConflicts",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._GET("fetchConflicts",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"resolveConflict",
value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._POST("resolveConflict",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"fetchDiff",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._GET("fetchDiff",
a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()},{key:"synchronize",value:function(){var c=Bb(regeneratorRuntime.mark(function d(a){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this._POST("synchronize",a));case 1:case "end":return f.stop()}},d,this)}));return function(a){return c.apply(this,arguments)}}()}]);return b}();uf.ObjectDBHTTPInterface=Zx;uf["default"]=Xx;var oj=window.lively.FreezerRuntime.recorderFor("lively.storage/storage-resource.js");
oj.applyExclude=function(b,c){return c?"string"===typeof c?!b.url.includes(c):"function"===typeof c?!c(b):c instanceof RegExp?!c.test(b.url):!0:!0};oj.Resource=Jm;oj.Database=Gq;oj.debug=!1;oj.slashRe=/\//g;var b7=function(b){function c(){rd(this,c);return g.apply(this,arguments)}gd(c,b);var g=sb(c);Ac(c,null,[{key:"ensureDB",value:function(a,d){return Xb(nd(c),"ensureDB",this).call(this,"lively.storage-"+a,d)}}]);return c}(oj.Database);oj.StorageDatabase=b7;var mV=function(b){function c(){rd(this,
c);return g.apply(this,arguments)}gd(c,b);var g=sb(c);Ac(c,[{key:"read",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return oj.debug&&console.log("[".concat(this,"] read")),p.next=3,this.db.get(this.pathWithoutQuery());case 3:return n=(k=p.sent)&&k.content,p.abrupt("return",n?"string"===typeof n?n:JSON.stringify(n):"");case 6:case "end":return p.stop()}},f,this)}));return function(){return a.apply(this,
arguments)}}()},{key:"readJson",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.read();case 2:return k=n.sent,n.abrupt("return","string"===typeof k?JSON.parse(k):k);case 4:case "end":return n.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"write",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n=this;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=
p.next){case 0:oj.debug&&console.log("[".concat(this,"] write"));f||(f="");if(!this.isDirectory()){p.next=4;break}throw Error("Cannot write into a directory! (".concat(this.url,")"));case 4:return p.next=6,this.db.update(this.pathWithoutQuery(),function(q){if(q&&q.isDirectory)throw Error("".concat(n.url," already exists and is a directory (cannot write into it!)"));var r=Date.now();return q?Object.assign({},q,{lastModified:r,size:f.length,content:f}):{etag:void 0,type:void 0,contentType:void 0,user:void 0,
group:void 0,mode:void 0,lastModified:r,created:r,size:"string"===typeof f?f.length:0,content:f}});case 6:return p.abrupt("return",this);case 7:case "end":return p.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"writeJson",value:function(a){return this.write(a)}},{key:"mkdir",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:oj.debug&&console.log("[".concat(this,"] mkdir"));
if(this.isDirectory()){p.next=3;break}throw Error("Cannot mkdir a file! (".concat(this.url,")"));case 3:return p.next=5,this.db.get(this.pathWithoutQuery());case 5:k=p.sent;if(!k){p.next=10;break}if(k.isDirectory){p.next=9;break}throw Error("".concat(this.url," already exists and is a file (cannot mkdir it!)"));case 9:return p.abrupt("return",this);case 10:return n=Date.now(),p.next=13,this.db.set(this.pathWithoutQuery(),{etag:void 0,type:void 0,contentType:void 0,user:void 0,group:void 0,mode:void 0,
lastModified:n,created:n,isDirectory:!0});case 13:return p.abrupt("return",this);case 14:case "end":return p.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"exists",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:oj.debug&&console.log("[".concat(this,"] exists"));k.t0=this.isRoot();if(k.t0){k.next=6;break}k.next=5;return this.db.get(this.pathWithoutQuery());case 5:k.t0=!!k.sent;
case 6:return k.abrupt("return",k.t0);case 7:case "end":return k.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"remove",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return oj.debug&&console.log("[".concat(this,"] remove")),k=this.pathWithoutQuery(),n=this.db,q.next=5,n.docList({startkey:k,endkey:k+"\uffff"});case 5:return p=q.sent,q.next=8,n.setDocuments(p.map(function(r){return{_id:r.id,
_rev:r.rev,_deleted:!0}}));case 8:return q.abrupt("return",this);case 9:case "end":return q.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"readProperties",value:function(){oj.debug&&console.log("[".concat(this,"] readProperties"));return this.db.get(this.pathWithoutQuery())}},{key:"dirList",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k=this,n,p,q,r,t,w,x,B,D,F,L,G,oa,ha,Ha,Va=arguments;return regeneratorRuntime.wrap(function(hc){for(;;)switch(hc.prev=
hc.next){case 0:n=0<Va.length&&void 0!==Va[0]?Va[0]:1;p=1<Va.length&&void 0!==Va[1]?Va[1]:{};oj.debug&&console.log("[".concat(this,"] dirList"));if(this.isDirectory()){hc.next=5;break}return hc.abrupt("return",this.asDirectory().dirList(n,p));case 5:return q=p.exclude,r=this.pathWithoutQuery(),t=[],hc.next=10,this.db.getAll({startkey:r,endkey:r+"\uffff"});case 10:w=hc.sent,"infinity"===n&&(n=Infinity),x=0;case 13:if(!(x<w.length)){hc.next=34;break}B=w[x];D=B._id;if(D.startsWith(r)&&r!==D){hc.next=
18;break}return hc.abrupt("continue",31);case 18:F=D.slice(r.length);L=F.includes("/")?F.match(oj.slashRe).length+1:1;if(!(L>n)){hc.next=24;break}G=function(){var qc=k.join(F.split("/").slice(0,n).join("/")+"/");t.some(function(jc){return jc.equals(qc)})||t.push(qc);return"continue"}();if("continue"!==G){hc.next=24;break}return hc.abrupt("continue",31);case 24:oa=this.join(F);if(!q||oj.applyExclude(oa,q)){hc.next=27;break}return hc.abrupt("continue",31);case 27:for(t.push(oa),ha="created lastModified mode group user contentType type etag size".split(" "),
Ha=0;Ha<ha.length;Ha++)oa[ha[Ha]]=B[ha[Ha]];case 31:x++;hc.next=13;break;case 34:return hc.abrupt("return",t);case 35:case "end":return hc.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"canDealWithJSON",get:function(){return!0}},{key:"db",get:function(){return this._db||(this._db=oj.StorageDatabase.ensureDB(this.host()))}}]);return c}(oj.Resource);oj.LivelyStorageResource=mV;var nV={name:"lively.storage",matches:function(b){return b.startsWith("lively.storage:")},
resourceClass:oj.LivelyStorageResource};oj.resourceExtension=nV;oj.resourceExtension=nV;oj.registerExtension=ap;oj.registerExtension(oj.resourceExtension);oj["default"]=mV;var Hq=window.lively.FreezerRuntime.recorderFor("lively.storage/index.js");Hq["default"]=Gq;Hq.Database=Gq;Hq.ObjectDB=Xx;Hq.ObjectDBInterface=Yx;Hq.ObjectDBHTTPInterface=Zx;Hq.ObjectDB=Xx;Hq.ObjectDBInterface=Yx;Hq.ObjectDBHTTPInterface=Zx;var c7=Object.freeze({__proto__:null,Database:Gq,ObjectDB:Xx,ObjectDBInterface:Yx,ObjectDBHTTPInterface:Zx});
Lc("cg",c7);var yh=window.lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js");yh.convertToSerializableCommit=SP;yh.ensureCommitInfo=Nw;yh.ObjectDBHTTPInterface=Zx;yh.Database=Gq;yh.loadMorphFromSnapshot=Lr;yh.createMorphSnapshot=Rt;yh.resource=Sk;yh.obj=nh;yh.Path=Nh;yh.arr=mh;yh.string=ji;yh.morphicDBs=yh.morphicDBs||(yh.morphicDBs=new Map);yh.getDefaultServerUrl=function(){return yh.resource("undefined"!==typeof document?window.SERVER_URL||System.baseURL:"http://localhost:9001").join("objectdb/").url};
yh.convertToSerializableCommit=SP;yh.ensureCommitInfo=Nw;var Qs=Lc("a",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),g=c.hasOwnProperty("MorphicDB")&&"function"===typeof c.MorphicDB?c.MorphicDB:c.MorphicDB=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d){var f=d.snapshotLocation;
d=d.serverURL;this.name=a;this.serverURL=d;this.snapshotLocation=f||"".concat(a,"/snapshots/");this.httpDB=new yh.ObjectDBHTTPInterface(d);this._initialized=!1}},{key:"__serialize__",value:function(){var a=this.serverURL,d=this.snapshotLocation;return{__expr__:'MorphicDB.named("'.concat(this.name,'", {snapshotLocation: "').concat(d,'", serverURL: "').concat(a,'"})'),bindings:{"lively.morphic/morphicdb/index.js":["MorphicDB"]}}}},{key:"initializeIfNecessary",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=
k.next){case 0:if(!this._initialized){k.next=2;break}return k.abrupt("return");case 2:return k.next=4,this.ensureDB();case 4:this._initialized=!0;case 5:case "end":return k.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"snapshotResourceFor",value:function(a){var d=a.content.slice(0,2);a=a.content.slice(2);return yh.resource(System.decanonicalize(this.snapshotLocation)).join("".concat(d,"/").concat(a,".json"))}},{key:"ensureDB",value:function(){return this.httpDB.ensureDB({db:this.name,
snapshotLocation:this.snapshotLocation})}},{key:"destroyDB",value:function(){this._initialized=!1;return this.httpDB.destroyDB({db:this.name})}},{key:"latestCommits",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n,p,q,r=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return k=0<r.length&&void 0!==r[0]?r[0]:"world",n=1<r.length&&void 0!==r[1]?r[1]:!1,t.next=4,this.initializeIfNecessary();case 4:return p=this.name,q={},t.abrupt("return",
this.httpDB.fetchCommits({db:p,type:k,ref:"HEAD",knownCommitIds:q,includeDeleted:n}));case 8:case "end":return t.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"fetchCommit",value:function(){var a=Bb(regeneratorRuntime.mark(function p(f,k,n){var q,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initializeIfNecessary();case 2:return q=[{type:f,name:k,ref:n}],t.next=5,this.httpDB.fetchCommits({db:this.name,ref:n,type:f,
typesAndNames:q,knownCommitIds:{}});case 5:return r=t.sent,t.abrupt("return",yh.convertToSerializableCommit(r[0]));case 8:case "end":return t.stop()}},p,this)}));return function(f,k,n){return a.apply(this,arguments)}}()},{key:"fetchSnapshot",value:function(){var a=Bb(regeneratorRuntime.mark(function q(f,k,n,p){var r,t,w=arguments;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return r=f,1===w.length&&r.type&&r.name&&(f=r.type,k=r.name,n=r._id),x.next=4,this.initializeIfNecessary();
case 4:return t=this.name,x.abrupt("return",this.httpDB.fetchSnapshot({db:t,type:f,name:k,ref:p,commit:n}));case 6:case "end":return x.stop()}},q,this)}));return function(f,k,n,p){return a.apply(this,arguments)}}()},{key:"exists",value:function(){var a=Bb(regeneratorRuntime.mark(function p(f,k,n){var q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.initializeIfNecessary();case 2:return q=this.name,r.abrupt("return",this.httpDB.exists({db:q,type:f,
name:k,ref:n}));case 4:case "end":return r.stop()}},p,this)}));return function(f,k,n){return a.apply(this,arguments)}}()},{key:"history",value:function(){var a=Bb(regeneratorRuntime.mark(function n(f,k){var p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,this.initializeIfNecessary();case 2:return p=this.name,q.abrupt("return",this.httpDB.fetchVersionGraph({db:p,type:f,name:k}));case 4:case "end":return q.stop()}},n,this)}));return function(f,k){return a.apply(this,
arguments)}}()},{key:"log",value:function(){var a=Bb(regeneratorRuntime.mark(function n(f,k){var p,q,r,t=arguments;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return p=2<t.length&&void 0!==t[2]?t[2]:!1,q=3<t.length?t[3]:void 0,w.next=4,this.initializeIfNecessary();case 4:return r=this.name,w.next=7,this.httpDB.fetchLog({db:r,commit:f,limit:k,includeCommits:p,knownCommitIds:q});case 7:return w.t0=yh.convertToSerializableCommit,w.abrupt("return",w.sent.map(w.t0));
case 9:case "end":return w.stop()}},n,this)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"revert",value:function(){var a=Bb(regeneratorRuntime.mark(function p(f,k,n){var q,r,t=arguments;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return q=3<t.length&&void 0!==t[3]?t[3]:"HEAD",w.next=3,this.initializeIfNecessary();case 3:return r=this.name,w.abrupt("return",this.httpDB.revert({db:r,type:f,name:k,toCommitId:n,ref:q}));case 5:case "end":return w.stop()}},
p,this)}));return function(f,k,n){return a.apply(this,arguments)}}()},{key:"snapshotAndCommit",value:function(){var a=Bb(regeneratorRuntime.mark(function w(f,k,n,p,q,r,t){var x,B;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,yh.createMorphSnapshot(n,p);case 2:return x=D.sent,D.next=5,this.commit(f,k,x,q,r,t);case 5:return B=D.sent,B=yh.convertToSerializableCommit(B),n.changeMetaData("commit",yh.obj.dissoc(B,["preview"]),!0,!1),D.abrupt("return",B);
case 9:case "end":return D.stop()}},w,this)}));return function(f,k,n,p,q,r,t){return a.apply(this,arguments)}}()},{key:"commit",value:function(){var a=Bb(regeneratorRuntime.mark(function t(f,k,n,p,q,r){var w,x,B=arguments;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return w=f,1===B.length&&w.type&&w.name&&(f=w.type,k=w.name,n=w.snapshot||w.content,p=yh.obj.dissoc(w,["snapshot","_rev","_id","ancestors","deleted"]),r=w._id),D.next=4,this.initializeIfNecessary();case 4:return x=
this.name,D.abrupt("return",this.httpDB.commit({db:x,type:f,name:k,ref:q,expectedParentCommit:r,commitSpec:p,snapshot:n}));case 6:case "end":return D.stop()}},t,this)}));return function(f,k,n,p,q,r){return a.apply(this,arguments)}}()},{key:"load",value:function(){var a=Bb(regeneratorRuntime.mark(function r(f,k,n,p,q){var t,w,x,B,D,F;return regeneratorRuntime.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:"object"===Jc(f)?p=f:t=f;if(w=p){L.next=8;break}L.next=5;return this.fetchCommit(t,k,q);
case 5:w=L.sent;L.next=14;break;case 8:if("string"!==typeof w){L.next=14;break}L.next=11;return this.log(w,1,!0);case 11:x=L.sent,B=Nb(x,1),w=B[0];case 14:return L.next=16,this.fetchSnapshot(void 0,void 0,w._id);case 16:return D=L.sent,L.next=19,yh.loadMorphFromSnapshot(D,n);case 19:return F=L.sent,w=yh.convertToSerializableCommit(w),F.changeMetaData("commit",yh.obj.dissoc(w,["preview"]),!0,!1),L.abrupt("return",F);case 23:case "end":return L.stop()}},r,this)}));return function(f,k,n,p,q){return a.apply(this,
arguments)}}()},{key:"fetchDiff",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.initializeIfNecessary();case 2:return n=this.name,p.abrupt("return",this.httpDB.fetchDiff({db:n,otherDB:f}));case 4:case "end":return p.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"fetchConflicts",value:function(){var a=Bb(regeneratorRuntime.mark(function n(f,k){var p;
return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,this.initializeIfNecessary();case 2:return p=this.name,q.abrupt("return",this.httpDB.fetchConflicts({db:p,includeDocs:f,only:k}));case 4:case "end":return q.stop()}},n,this)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"resolveConflict",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=
2,this.initializeIfNecessary();case 2:return n=this.name,p.abrupt("return",this.httpDB.resolveConflict(Object.assign({db:n},f)));case 4:case "end":return p.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"synchronize",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n,p,q,r,t;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return n=f.method,p=f.otherDB,q=f.otherDBSnapshotLocation,r=f.onlyTypesAndNames,w.next=3,this.initializeIfNecessary();
case 3:return t=this.name,w.abrupt("return",this.httpDB.synchronize({db:t,method:n,otherDB:p,otherDBSnapshotLocation:q,onlyTypesAndNames:r}));case 5:case "end":return w.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"softDelete",value:function(){var a=Bb(regeneratorRuntime.mark(function r(f,k,n,p,q){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.commit(f,k,void 0,n,p,q));case 1:case "end":return t.stop()}},
r,this)}));return function(f,k,n,p,q){return a.apply(this,arguments)}}()},{key:"delete",value:function(){var a=Bb(regeneratorRuntime.mark(function n(f,k){var p,q,r=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return p=2<r.length&&void 0!==r[2]?r[2]:!0,t.next=3,this.initializeIfNecessary();case 3:return q=this.name,t.abrupt("return",this.httpDB["delete"]({db:q,type:f,name:k,dryRun:p}));case 5:case "end":return t.stop()}},n,this)}));return function(f,k){return a.apply(this,
arguments)}}()},{key:"deleteCommit",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n,p,q=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=1<q.length&&void 0!==q[1]?q[1]:!0,r.next=3,this.initializeIfNecessary();case 3:return p=this.name,r.abrupt("return",this.httpDB.deleteCommit({db:p,commit:f,dryRun:n}));case 5:case "end":return r.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"codeSearchInPackages",
value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n,p,q,r,t,w,x,B,D,F,L=arguments;return regeneratorRuntime.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return n=1<L.length&&void 0!==L[1]?L[1]:"part",p=2<L.length?L[2]:void 0,q=3<L.length?L[3]:void 0,G.next=5,this.latestCommits(n);case 5:r=G.sent,t=[],w=0,"function"===typeof q&&(r=r.filter(q)),x=ba(r),G.prev=10,x.s();case 12:if((B=x.n()).done){G.next=21;break}D=B.value;"function"===typeof p&&p(D.name,w++,r.length);G.next=
17;return this._textSearchInSnapshotOfCommit(f,D);case 17:F=G.sent,F.length&&t.push.apply(t,hb(F));case 19:G.next=12;break;case 21:G.next=26;break;case 23:G.prev=23,G.t0=G["catch"](10),x.e(G.t0);case 26:return G.prev=26,x.f(),G.finish(26);case 29:return G.abrupt("return",t);case 30:case "end":return G.stop()}},k,this,[[10,23,26,29]])}));return function(f){return a.apply(this,arguments)}}()},{key:"_textSearchInSnapshotOfCommit",value:function(){var a=Bb(regeneratorRuntime.mark(function p(f,k,n){var q,
r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:q=k._id;t.t0=n;if(t.t0){t.next=6;break}t.next=5;return this.fetchSnapshot(void 0,void 0,q);case 5:t.t0=t.sent;case 6:return r=t.t0,t.abrupt("return",(new yh.SnapshotPackageHelper(r)).textSearch(f,k));case 8:case "end":return t.stop()}},p,this)}));return function(f,k,n){return a.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MorphicDB"}},{key:"default",get:function(){return this.named("lively.morphic/objectdb/morphicdb",
{serverURL:yh.getDefaultServerUrl()})}},{key:"named",value:function(a,d){var f=yh.morphicDBs.get(a);if(f)return f;if(!d.serverURL)throw Error("Needs serverURL!");d=new this(a,d);yh.morphicDBs.set(a,d);return d}},{key:"wellKnownMorphicDBs",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k=this,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=yh.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs"),r.next=3,n.getAll();case 3:return p=
r.sent,q=p.reduce(function(t,w){return Object.assign(t,Pc({},w._id,k.named(w.name,{serverURL:w.serverURL,snapshotLocation:w.snapshotLocation})))},{}),q["default"]||(q["default"]=this["default"]),r.abrupt("return",q);case 7:case "end":return r.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"addWellKnownMorphicDB",value:function(){var a=Bb(regeneratorRuntime.mark(function n(f,k){var p,q,r,t;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return p=
k.name,q=k.snapshotLocation,r=k.serverURL,t=yh.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs"),w.next=4,t.set(f,{name:p,snapshotLocation:q,serverURL:r});case 4:case "end":return w.stop()}},n)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"removeWellKnownMorphicDB",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return n=yh.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs"),
p.next=3,n.remove(f);case 3:case "end":return p.stop()}},k)}));return function(f){return a.apply(this,arguments)}}()}],c,{pathInPackage:function(){return"./morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1609,end:11119})}(void 0)),qI=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),
g=c.hasOwnProperty("SnapshotPackageHelper")&&"function"===typeof c.SnapshotPackageHelper?c.SnapshotPackageHelper:c.SnapshotPackageHelper=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){this.snapshot=a}},{key:"textSearch",value:function(a,d){var f=this,k=a&&a instanceof RegExp,n=[];if(!a)return n;var p=ba(this.filesInPackages()),
q;try{var r=function(){var t=q.value,w=t.get(f.snapshot),x=yh.string.lineIndexComputer(w),B=yh.string.lineRanges(w);if(k)w=yh.string.reMatches(w,a),w.length&&n.push.apply(n,hb(w.map(function(Va){return Object.assign(Va,{commit:d,file:t})})));else for(var D=0,F=0;0<=(D=w.indexOf(a));){var L,G=D+F,oa=G+a.length,ha=x(G),Ha=(L=w).slice.apply(L,hb(B[ha]));n.push({match:a,start:G,end:oa,length:a.length,line:ha,lineString:Ha,commit:d,file:t});F+=D+a.length;w=w.slice(D+a.length)}};for(p.s();!(q=p.n()).done;)r()}catch(t){p.e(t)}finally{p.f()}return n}},
{key:"filesInPackages",value:function(){function a(k,n,p,q){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[];if(k["package.json"]&&"string"===typeof k["package.json"])try{var t=JSON.parse(k["package.json"]);q={url:p,path:n,name:t.name||yh.arr.last(n)}}catch(x){}t=[];for(var w in k)"string"===typeof k[w]?r.push({path:n.concat(w),url:yh.string.joinPath(p,w),"package":q,get:function(x){return yh.Path(this.path).get(x.packages)},set:function(x,B){yh.Path(this.path).set(x.packages,B)}}):
t.push(w);t.forEach(function(x){return a(k[x],n.concat(x),yh.string.joinPath(p,x),q,r)});return r}var d=[],f;for(f in this.snapshot.packages)a(this.snapshot.packages[f],[f],f,null,d);return d}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"SnapshotPackageHelper"}}],c,{pathInPackage:function(){return"./morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:11127,end:14362})}(void 0);yh.SnapshotPackageHelper=qI;yh.SnapshotPackageHelper=qI;yh["default"]=Qs;var oV=window.lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/index.js");oV["default"]=Qs;oV.MorphicDB=Qs;var d7=Object.freeze({__proto__:null,MorphicDB:Qs}),kf=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js");kf.nyi=function(b){throw Error("Not yet implemented: ".concat(b));};kf.pt=Ij;kf.Rectangle=vl;kf.rect=Bm;kf.arr=mh;kf.Path=Nh;kf.promise=
ai;kf.Closure=vn;kf.num=Yk;kf.obj=nh;kf.once=Jt;kf.signal=Vl;(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),g=c.hasOwnProperty("Layout")&&"function"===typeof c.Layout?c.Layout:c.Layout=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:
{},d=a.spacing,f=a.padding,k=a.border,n=a.container,p=a.manualUpdate,q=a.autoResize,r=a.ignore,t=a.onScheduleApply,w=a.layoutOrder,x=a.reactToSubmorphAnimations;this.config=a;this.applyRequests=!1;this.border=Object.assign({top:0,left:0,right:0,bottom:0},k);this.ignore=r||[];this.active=!1;this.container=n;this.manualUpdate=p;this.reactToSubmorphAnimations=x||!1;this.autoResize=void 0!==q?q:!0;this.onScheduleApply=t||function(B,D,F){};w&&(this.layoutOrder=w,this.layoutOrderSource=JSON.stringify(String(w)));
this.spacing=d||0;this._padding=f?"number"===typeof f?kf.Rectangle.inset(f):kf.Rectangle.fromLiteral(f):kf.Rectangle.inset(0)}},{key:"hasEmbeddedContainer",value:function(){return kf.Path("container.owner.isText").get(this)?this.container.owner.embeddedMorphMap.has(this.container):!1}},{key:"attach",value:function(){var a=this;this.renderViaCSS?this.layoutableSubmorphs.forEach(function(d){return d.makeDirty()}):(this.apply(),this.container.master&&this.container.master.whenApplied().then(function(){a.applyRequests=
!0;a.forceLayout()}),this.refreshBoundsCache())}},{key:"getNodeFor",value:function(a){var d=a.env.renderer;return d?d.getNodeForMorph(a):null}},{key:"copy",value:function(){return new this.constructor(this)}},{key:"with",value:function(a){var d=this.copy();Object.assign(d,a);return d}},{key:"description",value:function(){return"Describe the layout behavior here."}},{key:"name",value:function(){return"Name presented to the user."}},{key:"isEnabled",value:function(){return!this.active}},{key:"disable",
value:function(){this.active=!0}},{key:"enable",value:function(a){this.active=!1;this.scheduleApply(null,a)}},{key:"padding",get:function(){return this._padding}},{key:"padding",set:function(a){"number"===typeof a&&(a=kf.Rectangle.inset(a));this._padding=a;this.apply()}},{key:"boundsChanged",value:function(a){return!(this.lastBoundsExtent&&a.bounds().extent().equals(this.lastBoundsExtent))}},{key:"extentChanged",value:function(a){return!(this.lastExtent&&a.extent.equals(this.lastExtent))}},{key:"equals",
value:function(a){return a.name()===this.name()}},{key:"layoutableSubmorphs",get:function(){var a=this;this.layoutOrder||(this.layoutOrder=kf.Closure.fromSource(JSON.parse(this.layoutOrderSource)).recreateFunc());return this.container?kf.arr.sortBy(this.container.submorphs.filter(function(d){return d.isLayoutable&&!a.ignore.includes(d.name)}),function(d){return a.layoutOrder(d)}):[]}},{key:"layoutOrder",value:function(a){return this.container.submorphs.indexOf(a)}},{key:"submorphBoundsChanged",get:function(){var a=
this.layoutableSubmorphs,d=this.layoutableSubmorphBounds;if(!d||a.length!==d.length)return!0;for(var f=0;f<a.length;f++)if(!d[f].equals(a[f].bounds()))return!0;return!1}},{key:"refreshBoundsCache",value:function(){this.lastExtent=this.container.extent;this.lastBoundsExtent=this.container.bounds().extent();this.layoutableSubmorphBounds=this.layoutableSubmorphs.map(function(a){return a.bounds()})}},{key:"onContainerRender",value:function(){this.forceLayout()}},{key:"noLayoutActionNeeded",get:function(){return!this.submorphBoundsChanged&&
!this.boundsChanged(this.container)&&!this.extentChanged(this.container)&&!this.submorphsChanged}},{key:"__dont_serialize__",get:function(){return["lastAnim","animationPromise"]}},{key:"forceLayout",value:function(){var a=this;this.applyRequests&&(this.applyRequests=!1,this.noLayoutActionNeeded||(this.refreshBoundsCache(),this.container.withMetaDo({isLayoutAction:!0,animation:this.lastAnim},function(){return a.apply(a.lastAnim)}),this.lastAnim=!1))}},{key:"forceLayoutsOfMorph",value:function(a){var d=
this;a.layout?a.layout.forceLayout():a.submorphs.forEach(function(f){return d.forceLayoutsOfMorph(f)})}},{key:"forceLayoutsInNextLevel",value:function(){var a=this;this.layoutableSubmorphs.forEach(function(d){return a.forceLayoutsOfMorph(d)})}},{key:"scheduleApply",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if("function"===typeof this.onScheduleApply)this.onScheduleApply(a,d,f);this.active||(d&&(this.lastAnim=d),this.applyRequests=!0)}},{key:"onSubmorphResized",
value:function(a,d){this.scheduleApply(a,this.reactToSubmorphAnimations&&d.meta.animation,d)}},{key:"onSubmorphAdded",value:function(a,d){this.submorphsChanged=!0;this.scheduleApply(a,d)}},{key:"onSubmorphRemoved",value:function(a,d){this.submorphsChanged=!0;this.scheduleApply(a,d)}},{key:"onChange",value:function(a){var d=a.args,f=a.prop,k=a.value,n=a.prevValue,p=a.meta;p=this.reactToSubmorphAnimations&&p&&p.animation;d=d&&d[0];switch(a.selector){case "removeMorph":this.onSubmorphRemoved(d,p);break;
case "addMorphAt":this.onSubmorphAdded(d,p)}"borderWidth"===f&&this.renderViaCSS&&this.layoutableSubmorphs.forEach(function(q){return q.makeDirty()});"extent"===f&&k&&n&&(n.x!==k.x||n.y!==k.y)&&this.scheduleApply(d,p)}},{key:"affectsLayout",value:function(a,d){a=d.value;var f=d.prevValue;return["position","scale","rotation","isLayoutable","extent"].includes(d.prop)&&!kf.obj.equals(a,f)}},{key:"onSubmorphChange",value:function(a,d){if(d.meta&&d.meta.isLayoutAction)return this.scheduleApply(a,this.reactToSubmorphAnimation&&
d.meta.animation);if(this.affectsLayout(a,d))this.onSubmorphResized(a,d)}},{key:"changePropertyAnimated",value:function(a,d,f,k){if(k){var n,p=k.duration;k=k.easing;this.animationPromise=a.animate((n={},Pc(n,d,f),Pc(n,"duration",p),Pc(n,"easing",k),n))}else a[d]=f}},{key:"attachAnimated",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,d=1<arguments.length?arguments[1]:void 0,f=2<arguments.length?arguments[2]:void 0;this.active||(this.container=d,this.active=!0,d.layout=
this,this.active=!1,this.lastAnim={duration:a,easing:f})}},{key:"apply",value:function(a){this.active||(this.active=!0,this.submorphsChanged=!1,this.lastBoundsExtent=this.container&&this.container.bounds().extent(),this.active=!1)}},{key:"ensureBoundsMonitor",value:function(a,d){}},{key:"resizesMorphVertically",value:function(a){return!1}},{key:"resizesMorphHorizontally",value:function(a){return!1}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Layout"}}],c,{pathInPackage:function(){return"./layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:266,end:8028})})(void 0);var sB=Lc("T",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),g=c.hasOwnProperty("TilingLayout")&&"function"===typeof c.TilingLayout?c.TilingLayout:c.TilingLayout=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};ie._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,a);this._renderViaCSS="undefined"!==typeof a.renderViaCSS?a.renderViaCSS:!0;this._axis=a.axis||"row";this._align=a.align||"left";this._axisAlign=a.axisAlign||"left";this._justifySubmorphs=a.justifySubmorphs||"packed";this._hugContentsVertically=
a.hugContentsVertically||!1;this._hugContentsHorizontally=a.hugContentsHorizontally||!1;this._orderByIndex=a.orderByIndex||!1;this._wrapSubmorphs=!0;"undefined"!==typeof a.wrapSubmorphs&&(this._wrapSubmorphs=a.wrapSubmorphs);this._resizePolicies=a.resizePolicies||new WeakMap}},{key:"equals",value:function(a){return this.__serialize__().__expr__===(a&&a.__serialize__().__expr__)}},{key:"name",value:function(){return"Tiling"}},{key:"inspect",value:function(a){}},{key:"onConfigUpdate",value:function(){this.apply();
this.renderViaCSS&&!this._configChanged&&(this._configChanged=!0,this.layoutableSubmorphs.forEach(function(a){return a.makeDirty()}))}},{key:"__serialize__",value:function(){return{__expr__:"new TilingLayout(".concat(kf.obj.inspect(this.getSpec(),{customPrinter:function(a,d,f){return a&&a.isRectangle?a.toString():d}}),")"),bindings:{"lively.morphic":["TilingLayout"],"lively.graphics/geometry-2d.js":["rect"]}}}},{key:"attach",value:function(){this.initializeResizePolicies();ie._get(Object.getPrototypeOf(g.prototype),
"attach",this).call(this)}},{key:"initializeResizePolicies",value:function(){var a=this,d=this._resizePolicies;if(!d||Array.isArray(d)){var f=this.layoutableSubmorphs;this._resizePolicies=new WeakMap;Array.isArray(d)?d.map(function(k){k=Nb(k,2);var n=k[0];k=k[1];var p=f.find(function(q){return q.name===n});p&&a.setResizePolicyFor(p,k);kf.arr.remove(f,p)}):this.layoutableSubmorphs.forEach(function(k){a.setResizePolicyFor(k,{width:"fixed",height:"fixed"})})}}},{key:"reactToSubmorphAnimations",get:function(){return this._reactToSubmorphAnimations}},
{key:"reactToSubmorphAnimations",set:function(a){this._reactToSubmorphAnimations=a}},{key:"resizePolicies",get:function(){var a=this;return this.layoutableSubmorphs.map(function(d){return[d.name,a._resizePolicies.get(d)||{width:"fixed",height:"fixed"}]})}},{key:"padding",set:function(a){this._padding=a;this.onConfigUpdate()}},{key:"padding",get:function(){return this._padding}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"getSpec",value:function(){if(!this.container)return this.config;
Array.isArray(this._resizePolicies)&&this.initializeResizePolicies();var a=this.axis,d=this.align,f=this.axisAlign,k=this.spacing,n=this.orderByIndex,p=this.reactToSubmorphAnimations,q=this.renderViaCSS,r=this.padding,t=this.wrapSubmorphs,w=this.justifySubmorphs,x=this._hugContentsVertically,B=this._hugContentsHorizontally,D={},F=ba(this.resizePolicies),L;try{for(F.s();!(L=F.n()).done;){var G=Nb(L.value,2),oa=G[0],ha=G[1];if("fixed"!==ha.width||"fixed"!==ha.height)D.resizePolicies||(D.resizePolicies=
[]),D.resizePolicies.push([oa,Object.assign({},ha)])}}catch(Ha){F.e(Ha)}finally{F.f()}0!==k&&(D.spacing=k);!0!==q&&(D.renderViaCSS=q);"row"!==a&&(D.axis=a);"left"!==d&&(D.align=d);"left"!==f&&(D.axisAlign=f);"packed"!==w&&(D.justifySubmorphs=w);!1!==x&&(D.hugContentsVertically=!0);!1!==B&&(D.hugContentsHorizontally=!0);!1!==n&&(D.orderByIndex=!0);!0!==t&&(D.wrapSubmorphs=!1);kf.rect(0).equals(r)||(D.padding=r);p&&(D.reactToSubmorphAnimations=!0);return D}},{key:"possibleAxisValues",get:function(){return["row",
"column"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"orderByIndex",get:function(){return this._orderByIndex||this.renderViaCSS}},{key:"orderByIndex",set:function(a){this._orderByIndex=a;this.onConfigUpdate()}},{key:"axis",get:function(){return this._axis}},{key:"axis",set:function(a){this._axis=a;this.onConfigUpdate()}},{key:"align",get:function(){return this._align}},{key:"align",set:function(a){this._align=a;this.onConfigUpdate()}},{key:"axisAlign",get:function(){return this._axisAlign}},
{key:"axisAlign",set:function(a){this._axisAlign=a;this.onConfigUpdate()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=a;this.onConfigUpdate()}},{key:"wrapSubmorphs",get:function(){return this._wrapSubmorphs}},{key:"wrapSubmorphs",set:function(a){this._wrapSubmorphs=a;this.onConfigUpdate()}},{key:"hugContentsVertically",get:function(){return this.wrapSubmorphs&&"column"===this.axis?!1:this._hugContentsVertically}},{key:"hugContentsVertically",
set:function(a){this._hugContentsVertically=a;this.onConfigUpdate()}},{key:"hugContentsHorizontally",get:function(){return this.wrapSubmorphs&&"row"===this.axis?!1:this._hugContentsHorizontally}},{key:"hugContentsHorizontally",set:function(a){this._hugContentsHorizontally=a;this.onConfigUpdate()}},{key:"justifySubmorphs",get:function(){return this._justifySubmorphs}},{key:"justifySubmorphs",set:function(a){this._justifySubmorphs=a;this.onConfigUpdate()}},{key:"getResizeHeightPolicyFor",value:function(a){a=
this._resizePolicies.get(a)||{width:"fixed",height:"fixed"};return this.wrapSubmorphs||this.hugContentsVertically?"fixed":a.height}},{key:"getResizeWidthPolicyFor",value:function(a){a=this._resizePolicies.get(a)||{width:"fixed",height:"fixed"};return this.wrapSubmorphs||this.hugContentsHorizontally?"fixed":a.width}},{key:"setResizePolicyFor",value:function(a,d){if(Array.isArray(this._resizePolicies)){var f=this._resizePolicies.find(function(k){k=Nb(k,1)[0];return a.name===k});f?f[1]=d:this._resizePolicies.push([a.name,
d])}else this._resizePolicies.set(a,d),this.onConfigUpdate()}},{key:"resizesMorphHorizontally",value:function(a){return"fill"===this.getResizeWidthPolicyFor(a)}},{key:"resizesMorphVertially",value:function(a){return"fill"===this.getResizeHeightPolicyFor(a)}},{key:"renderViaCSS",get:function(){return this._renderViaCSS}},{key:"renderViaCSS",set:function(a){this._renderViaCSS=a;this.onConfigUpdate()}},{key:"onDomResize",value:function(a,d){var f=this;d===this.container?d.withMetaDo({isLayoutAction:!0},
function(){f.updateContainerViaDom(a,!0)}):d&&d.withMetaDo({isLayoutAction:!0},function(){f.updateSubmorphViaDom(d,a,!0)})}},{key:"onSubmorphAdded",value:function(a,d){this._resizePolicies.get(a)||this.setResizePolicyFor(a,{width:"fixed",height:"fixed"})}},{key:"onSubmorphResized",value:function(a,d){var f=this;this.renderViaCSS?(a=[a].concat(hb(a.ownerChain())).find(function(k){return k.owner===f.container}),a.isLayoutable&&this.tryToMeasureNodeNow(a)):ie._get(Object.getPrototypeOf(g.prototype),
"onSubmorphResized",this).call(this,a,d)}},{key:"tryToMeasureNodeNow",value:function(a){var d=this.getNodeFor(a);d&&this.orderByIndex?this.updateSubmorphViaDom(a,d):this.measureAfterRender(a)}},{key:"updateSubmorphViaDom",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,k=this.container,n=Math.floor(d.offsetLeft+k.borderWidthLeft);k=Math.floor(d.offsetTop+k.borderWidthTop);var p=Math.floor(d.offsetWidth),q=Math.floor(d.offsetHeight),r=this.getResizeHeightPolicyFor(a),
t=this.getResizeWidthPolicyFor(a),w=!1;if(n!==a.position.x||k!==a.position.y)f?a.position=kf.pt(n,k):(a._morphicState.position=kf.pt(n,k),w=!0,kf.signal(a,"position",a.position));"fill"===t&&p!==a.width&&(f?a.width=p:(a._morphicState.extent=a.extent.withX(p),w=!0,kf.signal(a,"extent",a.extent),a.layout&&"Proportional"===a.layout.name()&&(a.layout.applyRequests=!0,a.layout.forceLayout())));"fill"===r&&q!==a.height&&(f?a.height=q:(a._morphicState.extent=a.extent.withY(q),w=!0,kf.signal(a,"extent",a.extent)));
if(a.layout&&a.layout.renderViaCSS)a.layout.onDomResize(d,a);w&&a.updateTransform()}},{key:"updateContainerViaDom",value:function(a){var d=this.container,f=this.hugContentsVertically,k=this.hugContentsHorizontally;if(a||(a=this.getNodeFor(d))){a&&this.hasEmbeddedContainer()&&a.style.setProperty("display","inline-flex","important");var n=Math.round(a.offsetWidth);a=Math.round(a.offsetHeight);(0!==n||0!==a)&&0<this.container.submorphs.length&&(f&&d.height!==a&&(d.height=a),k&&d.width!==n&&(d.width=
n))}}},{key:"updateBoundsFor",value:function(a){var d=this.getNodeFor(a);d?this.updateSubmorphViaDom(a,d):(this.measureAfterRender(a),a.makeDirty());a._askLayoutForBounds=!1}},{key:"addSubmorphCSS",value:function(a,d){var f=this;if(a.isLayoutable){var k=this.axis,n=this.layoutableSubmorphs,p=this.getNodeFor(a),q="visible"!==a.clipMode;k="column"===k;p?this.updateSubmorphViaDom(a,p):a._correctRender=function(x){f.addSubmorphCSS(a,x.style)};var r=kf.pt(0,0);q=q?kf.rect(0,0,a.width,a.height):a.submorphBounds().union(a.innerBounds());
1!==a.scale&&(q=q.withWidth(q.width*a.scale).withHeight(q.height*a.scale));0!==a.rotation&&(r=a.getInverseTransform().transformRectToRect(q),q.width=r.width,q.height=r.height,r=a.bounds().topLeft().subPt(a.position).negated());var t=this.computeOffset(a),w={top:0,left:0,bottom:0,right:0};p&&(w.top=Math.max(0,-q.top())+r.y-t.top,w.bottom=q.bottom()-a.height-r.y-t.bottom,w.left=Math.max(0,-q.left())+r.x-t.left,w.right=q.right()-a.width-r.x-t.right);this.adjustMargin(w,a);"fill"===this.getResizeWidthPolicyFor(a)&&
(k?(d.width="calc(100% + ".concat(w.offset,"px)"),w.left=0,w.right=0):(d.width="unset",d.flexGrow=1,d.flexShrink=1));"fill"===this.getResizeHeightPolicyFor(a)&&(k?(d.height="unset",d.flexGrow=1,d.flexShrink=1):(d.height="calc(100% + ".concat(w.offset,"px)"),w.bottom=0,w.top=0));d.position="relative";a.owner&&a.owner.isText&&a.owner.embeddedMorphMap.get(a)&&(d.position="sticky");d.top="unset";d.left="unset";d.order=n.indexOf(a);d.marginTop="".concat(w.top,"px");d.marginBottom="".concat(w.bottom,"px");
d.marginLeft="".concat(w.left,"px");d.marginRight="".concat(w.right,"px");1!==Number.parseInt(d.flexGrow)&&(d.flexShrink=0);this.measureAfterRender(a)}}},{key:"measureAfterRender",value:function(a){var d=this;a.whenRendered().then(function(){var f=d.getNodeFor(a);f&&d.ensureBoundsMonitor(f,a)})}},{key:"ensureBoundsMonitor",value:function(a,d){if(d===this.container||d.isLayoutable)this.onDomResize(a,d),d._correctRender&&(d._correctRender(a),delete d._correctRender)}},{key:"adjustMargin",value:function(a,
d){d=this.container;a.offset="column"===this.axis?d.borderWidthLeft+d.borderWidthRight:d.borderWidthTop+d.borderWidthBottom}},{key:"computeOffset",value:function(a){a=this.container;var d={top:0,bottom:0,left:0,right:0};"column"===this.axis?(d.top=a.borderWidthTop,d.bottom=a.borderWidthBottom,d.left=a.borderWidthLeft,d.right=a.borderWidthRight):(d.left=a.borderWidthLeft,d.right=a.borderWidthRight,d.top=a.borderWidthTop,d.bottom=a.borderWidthBottom);return d}},{key:"addContainerCSS",value:function(a,
d){var f=this.axis,k=this.padding,n=this._align,p=this.axisAlign,q=this.hugContentsHorizontally,r=this.hugContentsVertically,t=this.wrapSubmorphs,w=this.spacing,x=this.justifySubmorphs,B=this.container;this._configChanged=!1;a.visible&&(d.display="flex");d.gap="".concat(w+("row"===f?B.borderWidthLeft+B.borderWidthRight:B.borderWidthTop+B.borderWidthBottom),"px");d.justifyContent={left:"flex-start",center:"center",right:"flex-end"}[n];d.flexFlow=f;t&&(d.flexFlow+=" wrap");d.alignItems={center:"center",
left:"flex-start",right:"flex-end"}[p];d.alignContent={center:"center",left:"flex-start",right:"flex-end"}[p];"spaced"===x&&(d.justifyContent="space-between");d.paddingTop="".concat(k.top(),"px");d.paddingLeft="".concat(k.left(),"px");d.paddingRight="".concat(k.right(),"px");d.paddingBottom="".concat(k.bottom(),"px");q&&(d.width="auto");r&&(d.height="auto");this.measureAfterRender(a);this.delaySubmorphBounds()}},{key:"hasBoundsConnection",value:function(a){return a.attributeConnections&&a.attributeConnections.find(function(d){return["position",
"extent","width","height"].includes(d.sourceAttrName)})}},{key:"delaySubmorphBounds",value:function(){var a=this;this.layoutableSubmorphs.forEach(function(d){a.hasBoundsConnection(d)?a.measureAfterRender(d):d.isEllipse?a.measureAfterRender(d):d._askLayoutForBounds=!0;d.layout&&"Tiling"===d.layout.name()&&d.layout.delaySubmorphBounds()})}},{key:"apply",value:function(){var a=this,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;if(!this.active&&this.container&&!this.renderViaCSS){this.active=
!0;ie._get(Object.getPrototypeOf(g.prototype),"apply",this).call(this,d);var f=this.container,k=this.axis,n=this._align,p=this.spacing,q=this.axisAlign,r=this.layoutableSubmorphs,t=this.padding,w=this.wrapSubmorphs,x=this.justifySubmorphs,B=this.hugContentsVertically,D=this.hugContentsHorizontally,F=hb(r),L="spaced"===x,G=this.getOptimalWidth(f),oa="row"===k,ha=oa?"left":"top",Ha=oa?"x":"y",Va=oa?"y":"x",hc;"left"===q&&(hc="topLeft");"right"===q&&(hc="topRight");"center"===q&&(hc=oa?"leftCenter":
"topCenter");var qc=[],jc;for(k=function(){var Qb=G+p,wc=kf.arr.takeWhile(F,function(ra){ra=ra.bounds().extent();ra=Qb-(Math.round(ra[Ha])+p);if(w&&0>ra)return!1;Qb=ra;return!0});0<wc.length?F.splice(0,wc.length):(wc=[F.shift()],Qb=0);var Zb=t.top()+t.bottom()-a.spacing,$c=t.left()+t.right()-a.spacing,Oa=0;wc.forEach(function(ra){oa&&($c+=a.spacing,"fill"===a.getResizeHeightPolicyFor(ra)&&(ra.height=f.height-t.top()-t.bottom()),"fixed"===a.getResizeWidthPolicyFor(ra)?$c+=ra.width:Oa++);oa||(Zb+=a.spacing,
"fill"===a.getResizeWidthPolicyFor(ra)&&(ra.width=f.width-t.left()-t.right()),"fixed"===a.getResizeHeightPolicyFor(ra)?Zb+=ra.height:Oa++);a.forceLayoutsOfMorph(ra)});wc.forEach(function(ra){oa&&"fill"===a.getResizeWidthPolicyFor(ra)&&(ra.width=Math.max(0,f.width-$c)/Oa);oa||"fill"!==a.getResizeHeightPolicyFor(ra)||(ra.height=Math.max(0,f.height-Zb)/Oa)});var md=void 0;qc.push(jc=[kf.arr.max(wc.map(function(ra){return ra.bounds().extent()[Va]}))]);if(L){if(oa){var la=t.left();var $a=t.right()}else la=
t.top(),$a=t.bottom();md=la;la=(f.extent[Ha]-la-$a-kf.arr.sum(wc.map(function(ra){return ra.bounds().extent()[Ha]})))/Math.max(1,wc.length-1);wc=ba(wc);var dd;try{for(wc.s();!(dd=wc.n()).done;){var Kd=dd.value;jc.push([Kd,md]);md=md+Kd.bounds().extent()[Ha]+la}}catch(ra){wc.e(ra)}finally{wc.f()}}else{switch(n){case "left":md=t[ha]();break;case "center":md=Qb/2+t[ha]();break;case "right":md=Qb+t[ha]()}dd=ba(wc);try{for(dd.s();!(la=dd.n()).done;)$a=la.value,jc.push([$a,kf.num.roundTo(md,1)]),md=md+
p+$a.bounds().extent()[Ha]}catch(ra){dd.e(ra)}finally{dd.f()}}};F.length;)k();var Ya=[];if("center"===this.axisAlign){var xa=-p;qc.forEach(function(Qb){Qb=Nb(Qb,1)[0];return xa+=Qb+p});var tc=f.extent[Va]/2-xa/2;qc.map(function(Qb){Qb=Nb(Qb,1)[0];Ya.push(tc+Qb/2);tc+=Qb+p})}"right"===this.axisAlign&&(tc=f.extent[Va]-(oa?t.bottom():t.right()),qc=qc.reverse(),qc.map(function(Qb){Qb=Nb(Qb,1)[0];Ya.push(tc);tc-=Qb+p}));"left"===this.axisAlign&&(tc=oa?t.top():t.left(),qc.map(function(Qb){Qb=Nb(Qb,1)[0];
Ya.push(tc);tc+=p;tc+=Qb}));qc.forEach(function(Qb,wc){Qb=bc(Qb);Qb[0];Qb.slice(1).forEach(function(Zb){var $c=Nb(Zb,2);Zb=$c[0];$c=$c[1];$c=oa?kf.pt($c,Ya[wc]):kf.pt(Ya[wc],$c);a.changePropertyAnimated(Zb,hc,$c,d)})});B&&(f.height=f.submorphBounds(function(Qb){return r.includes(Qb)}).height+t.top()+t.bottom());D&&(f.width=f.submorphBounds(function(Qb){return r.includes(Qb)}).width+ +t.left()+t.right());this.active=!1;this.forceLayoutsInNextLevel()}}},{key:"forceLayout",value:function(){this.renderViaCSS||
ie._get(Object.getPrototypeOf(g.prototype),"forceLayout",this).call(this)}},{key:"getMinWidth",value:function(){var a=this.padding;return this.layoutableSubmorphs.reduce(function(d,f){return f.bounds().width>d?f.bounds().width:d},0)+a.left()+a.right()}},{key:"getMinHeight",value:function(){var a=this.padding;return this.layoutableSubmorphs.reduce(function(d,f){return f.bounds().height>d?f.bounds().height:d},0)+a.top()+a.bottom()}},{key:"getOptimalWidth",value:function(a){var d=this.axis,f=this.padding;
a="row"===d?a.width-f.left()-f.right():a.height-f.top()-f.bottom();d="row"===d?this.getMinWidth():this.getMinHeight();return Math.max(a,d)}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.getProperty("submorphs").indexOf(a):"row"===this.axis?1E6*(a.top-a.top%15)+a.left:1E6*(a.left-a.left%15)+a.top}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"TilingLayout"}}],c,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:8367,end:39900})}(kf.Layout));kf.TilingLayout=sB;kf.TilingLayout=sB;var $x=Lc("O",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),g=c.hasOwnProperty("VerticalLayout")&&"function"===typeof c.VerticalLayout?c.VerticalLayout:c.VerticalLayout=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){ie._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,{renderViaCSS:a.renderViaCSS,reactToSubmorphAnimations:a.reactToSubmorphAnimations});this.config=a;this.align=a.align||"left";this.resizeSubmorphs=a.resizeSubmorphs||!1;this.direction=a.direction||"topToBottom";this.spacing=a.spacing||0;this.autoResize=void 0!==a.autoResize?a.autoResize:!0}},{key:"possibleDirectionValues",
get:function(){return["topToBottom","bottomToTop","centered"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"name",value:function(){return"Vertical"}},{key:"__serialize__",value:function(){return{__expr__:"new VerticalLayout(".concat(kf.obj.inspect(this.getSpec()),")"),bindings:{"lively.morphic":["VerticalLayout"]}}}},{key:"getSpec",value:function(){if(!this.container)return this.config;var a=this.autoResize,d=this.direction,f=this.resizeSubmorphs;return Object.assign({},
kf.obj.dissoc(ie._get(Object.getPrototypeOf(g.prototype),"getSpec",this).call(this),"hugContentsVertically hugContentsHorizontally axis axisAlign padding wrapSubmorphs".split(" ")),{autoResize:a,resizeSubmorphs:f,direction:d})}},{key:"axis",get:function(){return"column"}},{key:"wrapSubmorphs",get:function(){return!1}},{key:"padding",get:function(){return kf.Rectangle.inset(this._spacing)}},{key:"getResizeHeightPolicyFor",value:function(a){return"fixed"}},{key:"direction",get:function(){return this._direction}},
{key:"direction",set:function(a){this._direction=a;this._align={topToBottom:"left",bottomToTop:"right",centered:"center"}[a];this.onConfigUpdate()}},{key:"align",get:function(){return this.axisAlign}},{key:"align",set:function(a){this.axisAlign=a}},{key:"autoResize",get:function(){return this._autoResize}},{key:"autoResize",set:function(a){this._hugContentsVertically=this._hugContentsHorizontally=this._autoResize=a;this.onConfigUpdate()}},{key:"hugContentsVertically",get:function(){return this.autoResize}},
{key:"hugContentsHorizontally",get:function(){return this.autoResize&&!this.resizeSubmorphs}},{key:"getResizeWidthPolicyFor",value:function(a){return this.resizeSubmorphs?"fill":"fixed"}},{key:"resizeSubmorphs",get:function(){return this._resizeSubmorphs}},{key:"resizeSubmorphs",set:function(a){this._resizeSubmorphs=a;this.onConfigUpdate()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"VerticalLayout"}}],c,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:39908,end:42356})}(kf.TilingLayout));kf.VerticalLayout=$x;kf.VerticalLayout=$x;var ay=Lc("H",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),g=c.hasOwnProperty("HorizontalLayout")&&"function"===typeof c.HorizontalLayout?c.HorizontalLayout:c.HorizontalLayout=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){ie._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,{renderViaCSS:a.renderViaCSS,reactToSubmorphAnimations:a.reactToSubmorphAnimations});this.config=a;this.align=a.align||"top";this.resizeSubmorphs=a.resizeSubmorphs||!1;this.direction=a.direction||"leftToRight";this.spacing=a.spacing||0;this.autoResize=void 0!==a.autoResize?a.autoResize:!0}},{key:"possibleDirectionValues",
get:function(){return["leftToRight","rightToLeft","centered"]}},{key:"possibleAlignValues",get:function(){return["top","center","bottom"]}},{key:"name",value:function(){return"Horizontal"}},{key:"__serialize__",value:function(){return{__expr__:"new HorizontalLayout(".concat(kf.obj.inspect(this.getSpec()),")"),bindings:{"lively.morphic":["HorizontalLayout"]}}}},{key:"axis",get:function(){return"row"}},{key:"wrapSubmorphs",get:function(){return!1}},{key:"padding",get:function(){return kf.Rectangle.inset(this._spacing)}},
{key:"getResizeWidthPolicyFor",value:function(a){return"fixed"}},{key:"direction",get:function(){return this._direction}},{key:"direction",set:function(a){this._direction=a;this._align={leftToRight:"left",rightToLeft:"right",centered:"center"}[a];this.onConfigUpdate()}},{key:"align",get:function(){return{left:"top",right:"bottom",center:"center"}[this.axisAlign]}},{key:"align",set:function(a){this.axisAlign={top:"left",bottom:"right",center:"center"}[a]}},{key:"autoResize",get:function(){return this._autoResize}},
{key:"autoResize",set:function(a){this._hugContentsHorizontally=this._hugContentsVertically=this._autoResize=a;this.onConfigUpdate()}},{key:"hugContentsVertically",get:function(){return this.autoResize&&!this.resizeSubmorphs}},{key:"hugContentsHorizontally",get:function(){return this.autoResize}},{key:"getResizeHeightPolicyFor",value:function(a){return this.resizeSubmorphs?"fill":"fixed"}},{key:"resizeSubmorphs",get:function(){return this._resizeSubmorphs}},{key:"resizeSubmorphs",set:function(a){this._resizeSubmorphs=
a;this.onConfigUpdate()}},{key:"expressMeasure",value:function(a){this.tryToMeasureNodeNow(a)}},{key:"getSpec",value:function(){return this.container?{spacing:this.spacing,resizeSubmorphs:this.resizeSubmorphs,autoResize:this.autoResize,align:this.align,direction:this.direction,padding:this.padding,reactToSubmorphAnimations:this.reactToSubmorphAnimations,orderByIndex:this.orderByIndex,renderViaCSS:this.renderViaCSS}:this.config}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"HorizontalLayout"}}],
c,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:42364,end:45157})}(kf.TilingLayout));kf.HorizontalLayout=ay;kf.HorizontalLayout=ay;var tB=Lc("aZ",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),g=c.hasOwnProperty("ProportionalLayout")&&"function"===
typeof c.ProportionalLayout?c.ProportionalLayout:c.ProportionalLayout=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:"name",value:function(){return"Proportional"}},{key:"description",value:function(){return"Resizes, scales, and moves morphs according to their original position."}},{key:Symbol["for"]("lively-instance-initialize"),value:function(a){ie._get(Object.getPrototypeOf(g.prototype),
Symbol["for"]("lively-instance-initialize"),this).call(this,a);this.extentDelta=kf.pt(0,0);this.proportionalLayoutSettingsForMorphs=new WeakMap;this.submorphSettings=a&&a.submorphSettings||[];this.lastExtent=a.lastExtent;delete this.spacing;delete this.autoResize}},{key:"getSpec",value:function(){return this.container?{submorphSettings:this.submorphSettings,reactToSubmorphAnimations:this.reactToSubmorphAnimations,lastExtent:this.lastExtent}:this.config}},{key:"__serialize__",value:function(){return{__expr__:"new ProportionalLayout(".concat(kf.obj.inspect(this.getSpec()),
")"),bindings:{"lively.morphic":["ProportionalLayout"]}}}},{key:"__dont_serialize__",get:function(){return[].concat(hb(ie._get(Object.getPrototypeOf(g.prototype),"__dont_serialize__",this)),["extentDelta","lastExtent"])}},{key:"__after_deserialize__",value:function(a,d){var f=this._submorphSettings;a=this.container;d=this.proportionalLayoutSettingsForMorphs||new WeakMap;this.extentDelta=kf.pt(0,0);if(f&&a){f=ba(f);var k;try{for(f.s();!(k=f.n()).done;){var n=Nb(k.value,2),p=n[1],q=this._morphsMatchingSelector(a,
n[0]),r=Nb(q,1)[0];r&&d.set(r,p)}}catch(t){f.e(t)}finally{f.f()}this.proportionalLayoutSettingsForMorphs=d}}},{key:"onSubmorphChange",value:function(a,d,f,k){"name"===d.prop&&(f=this.proportionalLayoutSettingsForMorphs.get(a))&&this.changeSettingsFor(a,f,!0);return ie._get(Object.getPrototypeOf(g.prototype),"onSubmorphChange",this).call(this,a,d)}},{key:"settingsFor",value:function(a){return this.proportionalLayoutSettingsForMorphs.get(a)||{x:"scale",y:"scale"}}},{key:"changeSettingsFor",value:function(a,
d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;"string"===typeof d&&(d={x:d,y:d});this.proportionalLayoutSettingsForMorphs.set(a,Object.assign({},this.settingsFor(a),{},d));f&&(f=this.submorphSettings.filter(function(k){return k[0]!==a.name}),f.push([a.name,this.settingsFor(a)]),this._submorphSettings=f)}},{key:"submorphSettings",get:function(){return this._submorphSettings}},{key:"submorphSettings",set:function(a){if(this.container)this._submorphSettings=a,this.changeSubmorphSettings(a);
else kf.once(this,"container",this,"submorphSettings",{converter:"function () { return submorphSettings }",varMapping:{submorphSettings:a}})}},{key:"changeSubmorphSettings",value:function(a){var d=this;a=ba(a);var f;try{var k=function(){var n=Nb(f.value,2),p=n[1];d._morphsMatchingSelector(d.container,n[0]).forEach(function(q){return d.changeSettingsFor(q,p)})};for(a.s();!(f=a.n()).done;)k()}catch(n){a.e(n)}finally{a.f()}}},{key:"_morphsMatchingSelector",value:function(a,d){var f=this,k=[];if(!d)return k;
d.isMorph?k=[d]:d instanceof RegExp?k=a.submorphs.filter(function(n){return n.name.match(d)}):"string"===typeof d?k=a.submorphs.filter(function(n){return n.name===d}):Array.isArray(d)&&(k=d.flatMap(function(n){return f._morphsMatchingSelector(a,n)}));return k}},{key:"refreshBoundsCache",value:function(){var a=this.container.extent,d=this.lastExtent;d&&!a.eqPt(d)&&(this.extentDelta=this.extentDelta.addPt(a.subPt(d)));this.lastExtent=a.copy();this.layoutableSubmorphBounds=this.layoutableSubmorphs.map(function(f){return f.bounds()})}},
{key:"apply",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1,d=this.container,f=this.extentDelta,k=f.x;f=f.y;var n=(d||{}).extent;if(!this.active&&d&&(0!==k||0!==f)){this.extentDelta=kf.pt(0,0);this.active=!0;ie._get(Object.getPrototypeOf(g.prototype),"apply",this).call(this,a);var p=this.layoutableSubmorphs;d=n.scaleByPt(n.addXY(-k,-f).invertedSafely());n=ba(p);var q;try{for(n.s();!(q=n.n()).done;){var r=q.value,t=this.settingsFor(r),w=t.x,x=t.y,B=p=0,D=0,F=0;"move"===
w&&(p=k);"move"===x&&(B=f);"resize"===w&&(D=k);"resize"===x&&(F=f);if("scale"===w||"scale"===x){var L=kf.pt("scale"===w?d.x:1,"scale"===x?d.y:1);this.changePropertyAnimated(r,"position",r.position.scaleByPt(L),a);this.changePropertyAnimated(r,"extent",r.extent.scaleByPt(L),a)}(p||B)&&this.changePropertyAnimated(r,"position",r.position.addXY(p,B),a);(D||F)&&this.changePropertyAnimated(r,"extent",r.extent.addXY(D,F),a)}}catch(G){n.e(G)}finally{n.f()}this.forceLayoutsInNextLevel();this.active=!1}}},
{key:"copy",value:function(){return new this.constructor(this.getSpec())}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ProportionalLayout"}}],c,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:45295,end:51066})}(kf.Layout));kf.ProportionalLayout=tB;kf.ProportionalLayout=
tB;var uB=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),g=c.hasOwnProperty("CellGroup")&&"function"===typeof c.CellGroup?c.CellGroup:c.CellGroup=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){var d=a.morph,f=a.layout,k=a.resize;this.state={cells:[a.cell],layout:f,align:a.align,resize:void 0===
k?f.fitToCell:k};f&&f.addGroup(this);this.morph=d}},{key:"resize",get:function(){return this.state.resize}},{key:"resize",set:function(a){this.state.resize=a;this.layout.apply()}},{key:"align",get:function(){return this.state.align||"topLeft"}},{key:"align",set:function(a){this.state.align=a;this.layout.apply()}},{key:"area",get:function(){var a,d,f,k;this.cells.map(function(q){var r=q.before.length;if(void 0===a||a>r)a=r;if(void 0===d||d<r)d=r;q=q.above.length;if(void 0===f||f>q)f=q;if(void 0===
k||k<q)k=q});var n=this.layout.row(f).col(a).padding,p=this.layout.row(k).col(d).padding;return{minCol:a,maxCol:d,minRow:f,maxRow:k,padding:kf.Rectangle.inset(n.left(),n.top(),p.right(),p.bottom())}}},{key:"morph",get:function(){var a=this.state,d=a.morph;a=a.layout;return d?d.isMorph?d:a.layoutableSubmorphs.find(function(f){return f.name===d}):null}},{key:"morph",set:function(a){var d=a&&this.layout.getCellGroupFor(a);d&&(d.morph=null);this.state.morph=a;this.layout.apply()}},{key:"manages",value:function(a){return this.morph&&
(this.morph===a||this.morph.name===a)}},{key:"apply",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1,d=this.morph;if(d){var f=this.bounds(),k=this.layout.container.origin.negated();if(a){var n,p=this.resize?f.extent():d.extent,q=a.duration;a=a.easing;d.animate((n={},Pc(n,this.alignedProperty||this.align,f[this.align]().addPt(k)),Pc(n,"extent",p),Pc(n,"duration",q),Pc(n,"easing",a),n))}else this.resize&&!d.extent.equals(f.extent())&&(d.extent=f.extent()),d[this.alignedProperty||
this.align]=f[this.align]().addPt(k);this.layout.forceLayoutsInNextLevel()}}},{key:"cells",get:function(){return this.state.cells}},{key:"layout",get:function(){return this.state.layout}},{key:"bounds",value:function(){return 0<this.cells.length?this.cells.map(function(a){return a.bounds()}).reduce(function(a,d){return a.union(d)}):kf.rect(0,0,0,0)}},{key:"includes",value:function(a){return!!this.cells.find(function(d){return d===a})}},{key:"connect",value:function(a){if(void 0===this.morph||null===
this.morph)this.morph=a.group.morph;a.group?a.group.disconnect(a,this):a.group=this;this.cells.push(a)}},{key:"disconnect",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new kf.CellGroup({morph:null,layout:this.layout,cell:a});a.group=d;kf.arr.remove(this.cells,a);1>this.cells.length&&this.layout&&this.layout.removeGroup(this)}},{key:"merge",value:function(a){var d=this;a.cells.forEach(function(f){d.connect(f)})}},{key:"topLeft",get:function(){var a=this;return this.cells.find(function(d){return(null===
d.left||d.left.group!==a)&&(null===d.top||d.top.group!==a)})}},{key:"bottomRight",get:function(){var a=this;return this.cells.find(function(d){return(null===d.right||d.right.group!==a)&&(null===d.bottom||d.bottom.group!==a)})}},{key:"position",get:function(){return this.topLeft.position}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"CellGroup"}}],c,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:51379,end:57927})}(void 0);kf.CellGroup=uB;kf.CellGroup=uB;(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),g=c.hasOwnProperty("LayoutAxis")&&"function"===typeof c.LayoutAxis?c.LayoutAxis:c.LayoutAxis=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),
value:function(a){this.origin=a}},{key:"otherAxis",get:function(){return[].concat(hb(this.axisBefore),hb(this.axisAfter))}},{key:"axisBefore",get:function(){for(var a=this,d=[];a=a.before;)d=[a].concat(hb(d));return d}},{key:"axisAfter",get:function(){for(var a=this,d=[];a=a.after;)d=[].concat(hb(d),[a]);return d}},{key:"before",get:function(){throw Error("before() not implemented!");}},{key:"after",get:function(){throw Error("after() not implemented!");}},{key:"containerLength",get:function(){return this.container[this.dimension]}},
{key:"containerLength",set:function(a){this.container[this.dimension]=a}},{key:"getRoot",value:function(){return(this.axisBefore[0]||this).items[0]}},{key:"container",get:function(){return this.origin.container}},{key:"layout",get:function(){return this.origin.layout}},{key:"frozen",get:function(){return this.origin.frozen[this.dimension]}},{key:"frozen",set:function(a){this.origin.frozen[this.dimension]=a}},{key:"align",set:function(a){this.items.forEach(function(d){return d.group.state.align=a})}},
{key:"fixed",get:function(){return this.origin.fixed[this.dimension]}},{key:"fixed",set:function(a){var d=this;if(kf.obj.isNumber(a)){var f=a;a=!0}this.items.forEach(function(n){n.fixed[d.dimension]=a});var k=this.containerLength;void 0!==f&&(this[this.dimension]=f);this.adjustOtherProportions(a);this.containerLength=k}},{key:"length",get:function(){return this.origin[this.dimension]}},{key:"length",set:function(a){var d=this;this.items.forEach(function(f){f[d.dimension]=kf.num.roundTo(a,1)})}},{key:"proportion",
get:function(){return this.origin.proportion[this.dimension]}},{key:"proportion",set:function(a){var d=this;this.items.forEach(function(f){f.proportion[d.dimension]=a})}},{key:"min",get:function(){return this.origin.min[this.dimension]}},{key:"min",set:function(a){this._adjustMin(a-this.min)}},{key:"_adjustMin",value:function(a){var d=this;this.items.forEach(function(f){f.min[d.dimension]=0>f.min[d.dimension]+a?0:f.min[d.dimension]+a});this.layout.apply()}},{key:"adjustOtherProportions",value:function(a){var d=
this,f=this.axisBefore,k=this.axisAfter,n=kf.arr.sum([].concat(hb(f),hb(k)).filter(function(r){return!r.fixed}).map(function(r){return r.proportion})),p=function(r){return r.proportion/=n},q=function(r){return r.proportion*=d.origin.removedDynamicProportions};a&&(this.origin.removedDynamicProportions=n);f.forEach(a?p:q);k.forEach(a?p:q)}},{key:"adjustLengthToProportion",value:function(a){a=this.proportion*Math.max(0,a-this.staticLength);this.frozen&&a>=this.min?(this.fixed=this.frozen=!1,this.length=
a):!this.frozen&&this.min>a&&(this.fixed=this.frozen=!0,this.length=this.min);return this}},{key:"adjustLength",value:function(a){var d;0>this.length+a&&(a=-this.length);(d=this.axisAfter.find(function(f){return!f.fixed}))?(a=Math.min(a,d.length),this.length+=a,d.length-=a,this.adjustProportion(),d.adjustProportion()):(d=this.axisBefore.reverse().find(function(f){return!f.fixed}))?(d.length-=a,this.length+=a,this.adjustProportion(),d.adjustProportion()):(this.length+=a,this.adjustProportion(),this.otherAxis.forEach(function(f){return f.adjustProportion()}),
this.containerLength+=a)}},{key:"adjustProportion",value:function(){this.fixed||(this.proportion=0<this.dynamicLength?this.length/this.dynamicLength:0)}},{key:"equalizeDynamicAxis",value:function(){var a=[].concat(hb(this.otherAxis.filter(function(f){return!f.fixed})),hb(this.fixed?[]:[this])),d=(this.containerLength-this.staticLength)/a.length;a.map(function(f){f.fixed||(f.length=d);return f}).forEach(function(f){return f.adjustProportion()})}},{key:"addBefore",value:function(){var a=this.emptyAxis();
this.before&&this.before.attachTo(a);a.attachTo(this);this.equalizeDynamicAxis();this.layout.grid=this.getRoot()}},{key:"addAfter",value:function(){var a=this.emptyAxis();this.after&&a.attachTo(this.after);this.attachTo(a);this.equalizeDynamicAxis();this.layout.grid=this.getRoot()}},{key:"emptyAxis",value:function(){kf.nyi("emptyAxis")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LayoutAxis"}}],c,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:58596,end:68536})})(void 0);var vB=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),g=c.hasOwnProperty("LayoutColumn")&&"function"===typeof c.LayoutColumn?c.LayoutColumn:c.LayoutColumn=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){ie._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,a);this.items=[].concat(hb(a.above),[a],hb(a.below))}},{key:"dimension",get:function(){return"width"}},{key:"before",get:function(){return this._before||(this._before=this.origin.left&&new kf.LayoutColumn(this.origin.left))}},{key:"after",get:function(){return this._after||(this._after=this.origin.right&&
new kf.LayoutColumn(this.origin.right))}},{key:"row",value:function(a){return this.items[a]}},{key:"dynamicLength",get:function(){return this.origin.dynamicWidth}},{key:"staticLength",get:function(){return this.origin.totalStaticWidth}},{key:"width",get:function(){return this.length}},{key:"width",set:function(a){a-=this.width;this.fixed?(this.length+=a,this.container.width+=a):this.adjustLength(a);this.layout.renderViaCSS&&(this.layout.patchContainer(),this.layout.measureMorphsIn(this,this.after));
!this.layout.manualUpdate&&this.layout.apply()}},{key:"paddingLeft",set:function(a){this.items.forEach(function(d){d.padding.x=a});this.layout.apply()}},{key:"paddingLeft",get:function(){return this.items[0].padding.x}},{key:"paddingRight",set:function(a){this.items.forEach(function(d){d.padding.width=a});this.layout.apply()}},{key:"paddingRight",get:function(){return this.items[0].padding.width}},{key:"emptyAxis",value:function(){var a=new kf.LayoutColumn(new kf.LayoutCell({column:kf.arr.withN(this.items.length,
null),layout:this.layout}));kf.arr.zip(a.items,this.items).forEach(function(d){var f=Nb(d,2);d=f[0];f=f[1];d.height=f.height;d.fixed.height=f.fixed.height;d.frozen.height=f.frozen.height;d.proportion.height=f.proportion.height;d.min.height=f.min.height});return a}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=null;kf.arr.zip(this.items,a.items).forEach(function(d){var f=Nb(d,2);d=f[0];f=f[1];d.right=f;f.left=d});this.equalizeDynamicAxis();return a}},{key:"remove",
value:function(){var a=this,d=this.before||this.after;this.items.forEach(function(f){f.left&&(f.left.right=f.right);f.right&&(f.right.left=f.left);f.group.disconnect(f);a.layout.removeGroup(f.group)});this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=this.after.getRoot());d.equalizeDynamicAxis()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LayoutColumn"}}],c,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:68624,end:71163})}(kf.LayoutAxis);kf.LayoutColumn=vB;kf.LayoutColumn=vB;var wB=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),g=c.hasOwnProperty("LayoutRow")&&"function"===typeof c.LayoutRow?c.LayoutRow:c.LayoutRow=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){ie._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,a);this.items=[].concat(hb(a.before),[a],hb(a.after))}},{key:"dimension",get:function(){return"height"}},{key:"emptyAxis",value:function(){var a=new kf.LayoutRow(new kf.LayoutCell({row:kf.arr.withN(this.items.length,null),layout:this.layout}));kf.arr.zip(a.items,this.items).forEach(function(d){var f=Nb(d,
2);d=f[0];f=f[1];d.width=f.width;d.fixed.width=f.fixed.width;d.frozen.width=f.frozen.width;d.proportion.width=f.proportion.width;d.min.width=f.min.width});return a}},{key:"paddingTop",set:function(a){this.items.forEach(function(d){d.padding.y=a});this.layout.apply()}},{key:"paddingTop",get:function(){return this.items[0].padding.y}},{key:"paddingBottom",set:function(a){this.items.forEach(function(d){d.padding.height=a});this.layout.apply()}},{key:"paddingBottom",get:function(){return this.items[0].padding.height}},
{key:"before",get:function(){return this._before||(this._before=this.origin.top&&new kf.LayoutRow(this.origin.top))}},{key:"after",get:function(){return this._after||(this._after=this.origin.bottom&&new kf.LayoutRow(this.origin.bottom))}},{key:"dynamicLength",get:function(){return this.origin.dynamicHeight}},{key:"staticLength",get:function(){return this.origin.totalStaticHeight}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=null;kf.arr.zip(this.items,a.items).forEach(function(d){var f=
Nb(d,2);d=f[0];f=f[1];d.bottom=f;f.top=d});this.equalizeDynamicAxis();return a}},{key:"col",value:function(a){return this.items[a]}},{key:"height",get:function(){return this.length}},{key:"height",set:function(a){a-=this.height;this.fixed?(this.length+=a,this.container.height+=a):(this.adjustLength(a),this.proportion=0<this.origin.dynamicHeight?this.height/this.origin.dynamicHeight:0);this.layout.renderViaCSS&&(this.layout.patchContainer(),this.layout.measureMorphsIn(this,this.after));!this.layout.manualUpdate&&
this.layout.apply()}},{key:"remove",value:function(){var a=this,d=this.before||this.after;this.items.forEach(function(f){f.top&&(f.top.bottom=f.bottom);f.bottom&&(f.bottom.top=f.top);f.group.disconnect(f);a.layout.removeGroup(f.group)});this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=this.after.getRoot());d.equalizeDynamicAxis()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LayoutRow"}}],c,{pathInPackage:function(){return"./layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:71247,end:73872})}(kf.LayoutAxis);kf.LayoutRow=wB;kf.LayoutRow=wB;var xB=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),g=c.hasOwnProperty("LayoutCell")&&"function"===typeof c.LayoutCell?c.LayoutCell:c.LayoutCell=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){var d=a.row,f=a.column,k=a.top,n=a.left,p=a.right,q=a.bottom;a=a.layout;var r;d=bc(d||[]);var t=d[0];d=d.slice(1);f=bc(f||[]);var w=f[0];f=f.slice(1);this.layout=a;this.fixed={width:!1,height:!1};this.frozen={width:!1,height:!1};this.min={width:0,height:0};this.top=k;this.left=n;this.bottom=q;this.right=p;this.padding=kf.rect(0,0,0,0);0<d.length?this.right=new kf.LayoutCell({row:d,left:this,layout:a}):0<
f.length&&(this.bottom=new kf.LayoutCell({column:f,top:this,layout:a}));this.proportion={width:1/(1+this.before.length+this.after.length),height:1/(1+this.above.length+this.below.length)};this.height=this.container.height*this.proportion.height;this.width=this.container.width*this.proportion.width;(r=a&&a.getCellGroupFor(t||w))?r.connect(this):this.group=new kf.CellGroup({cell:this,morph:t||w,layout:a})}},{key:"container",get:function(){return this.layout.container}},{key:"above",get:function(){return this.collect({neighbor:"top",
prepend:!0})}},{key:"below",get:function(){return this.collect({neighbor:"bottom",append:!0})}},{key:"before",get:function(){return this.collect({neighbor:"left",prepend:!0})}},{key:"after",get:function(){return this.collect({neighbor:"right",append:!0})}},{key:"collect",value:function(a){var d=a.neighbor,f=a.prepend;a=a.append;for(var k=[],n=this;n=n[d];)f&&(k=[n].concat(hb(k))),a&&(k=[].concat(hb(k),[n]));return k}},{key:"col",value:function(a){for(var d=this,f=a;0<f&&d;)d=d.right,f--;if(!d)throw Error("".concat(a,
" out of bounds! Last column was ").concat(a-f-1));return new kf.LayoutColumn(d)}},{key:"row",value:function(a){for(var d=this,f=a;0<f&&d;)d=d.bottom,f--;if(!d)throw Error("".concat(a," out of bounds! Last row was ").concat(a-f-1));return new kf.LayoutRow(d)}},{key:"staticWidth",get:function(){return this.fixed.width||this.min.width===this.width}},{key:"staticHeight",get:function(){return this.fixed.height||this.min.height===this.height}},{key:"totalStaticWidth",get:function(){return kf.arr.sum([this].concat(hb(this.before),
hb(this.after)).filter(function(a){return a.staticWidth}).map(function(a){return a.width}))}},{key:"totalStaticHeight",get:function(){return kf.arr.sum([this].concat(hb(this.above),hb(this.below)).filter(function(a){return a.staticHeight}).map(function(a){return a.height}))}},{key:"dynamicWidth",get:function(){return kf.arr.sum([this].concat(hb(this.before),hb(this.after)).filter(function(a){return!a.staticWidth}).map(function(a){return a.width}))}},{key:"dynamicHeight",get:function(){return kf.arr.sum([this].concat(hb(this.above),
hb(this.below)).filter(function(a){return!a.staticHeight}).map(function(a){return a.height}))}},{key:"height",get:function(){return Math.max(this.min.height,this._height||0)}},{key:"height",set:function(a){this._height=a}},{key:"width",get:function(){return Math.max(this.min.width,this._width||0)}},{key:"width",set:function(a){this._width=a}},{key:"extent",get:function(){return kf.pt(this.width,this.height)}},{key:"position",get:function(){return kf.pt(kf.arr.sum(this.before.map(function(a){return a.width})),
kf.arr.sum(this.above.map(function(a){return a.height})))}},{key:"bounds",value:function(){return this.position.addPt(this.padding.topLeft()).extent(this.extent.subPt(this.padding.extent()).subPt(this.padding.topLeft()))}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LayoutCell"}}],c,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:73934,end:82018})}(void 0);kf.LayoutCell=xB;kf.LayoutCell=xB;var yB=Lc("aG",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),g=c.hasOwnProperty("GridLayout")&&"function"===typeof c.GridLayout?c.GridLayout:c.GridLayout=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){ie._get(Object.getPrototypeOf(g.prototype),
Symbol["for"]("lively-instance-initialize"),this).call(this,a);a=Object.assign({autoAssign:!0,fitToCell:!0},a);this.cellGroups=[];this.renderViaCSS="undefined"!==typeof a.renderViaCSS?a.renderViaCSS:!0}},{key:"forceLayout",value:function(){this.renderViaCSS||ie._get(Object.getPrototypeOf(g.prototype),"forceLayout",this).call(this)}},{key:"name",value:function(){return"Grid"}},{key:"attach",value:function(){this.renderViaCSS?this.initGrid():ie._get(Object.getPrototypeOf(g.prototype),"attach",this).call(this)}},
{key:"disable",value:function(){this.renderViaCSS&&(this.renderViaCSS=!1,this._revertToCSSOnEnable=!0,this.apply());ie._get(Object.getPrototypeOf(g.prototype),"disable",this).call(this)}},{key:"enable",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n=this;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,ie._get(Object.getPrototypeOf(g.prototype),"enable",this).call(this,f);case 2:if(!f){p.next=5;break}p.next=5;return kf.promise.delay(f.duration);
case 5:this._revertToCSSOnEnable&&(this.renderViaCSS=!0,this.layoutableSubmorphs.forEach(function(q){return n.tryToMeasureNodeNow(q)}),delete this._revertToCSSOnEnble);case 6:case "end":return p.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"getSpec",value:function(){if(!this.container)return this.config;var a=[],d=[],f=[],k={},n=ba(kf.arr.range(0,this.rowCount-1)),p;try{for(n.s();!(p=n.n()).done;)a.push(this.grid.row(p.value).items.map(function(oa){return oa.group.state.morph?
oa.group.state.morph.name||oa.group.state.morph:null}))}catch(oa){n.e(oa)}finally{n.f()}n=ba(kf.arr.range(0,this.rowCount-1));var q;try{for(n.s();!(q=n.n()).done;){var r=q.value,t=this.grid.row(r),w=t.fixed?{fixed:t.length}:{height:t.height};t.paddingTop&&(w.paddingTop=t.paddingTop);t.paddingBottom&&(w.paddingBottom=t.paddingBottom);d.push(r,w)}}catch(oa){n.e(oa)}finally{n.f()}q=ba(kf.arr.range(0,this.columnCount-1));var x;try{for(q.s();!(x=q.n()).done;){var B=x.value,D=this.grid.col(B),F=Object.assign({},
D.fixed?{fixed:D.length}:{width:D.width});D.paddingLeft&&(F.paddingLeft=D.paddingLeft);D.paddingRight&&(F.paddingRight=D.paddingRight);f.push(B,F)}}catch(oa){q.e(oa)}finally{q.f()}x=ba(this.cellGroups);var L;try{for(x.s();!(L=x.n()).done;){var G=L.value;G.state.morph&&(k["string"===typeof G.state.morph?G.state.morph:G.morph.name]=kf.obj.select(G,["align","resize"]))}}catch(oa){x.e(oa)}finally{x.f()}return{autoAssign:!1,grid:a,rows:d,columns:f,groups:k}}},{key:"__serialize__",value:function(){return{__expr__:"new GridLayout(".concat(kf.obj.inspect(this.getSpec(),
{escapeKeys:!0}),")"),bindings:{"lively.morphic":["GridLayout"]}}}},{key:"initGrid",value:function(){var a=this,d=this.sanitizeGrid(this.config).map(function(f){return new kf.LayoutRow(new kf.LayoutCell({row:f,layout:a}))});d.reduce(function(f,k){return f.attachTo(k)});this.config.autoAssign&&this.autoAssign(this.notInLayout);this.grid=d[0].col(0);this.col(0).equalizeDynamicAxis();this.row(0).equalizeDynamicAxis();this._initRowsAndColumns();this._initGroups()}},{key:"_initGroups",value:function(){var a=
this.config.groups;if(a)for(var d in a){var f=this.getCellGroupFor(this.container.getSubmorphNamed(d)),k=a[d],n=k.resize,p=k.align;p=void 0===p?"topLeft":p;k=k.alignedProperty;k=void 0===k?"topLeft":k;f&&(void 0!==n&&(f.resize=n),f.align=p,f.alignedProperty=k)}}},{key:"_initRowsAndColumns",value:function(){var a=this.config,d=a.rows;a=a.columns;a=void 0===a?[]:a;d=ba(kf.arr.toTuples(void 0===d?[]:d,2));var f;try{for(d.s();!(f=d.n()).done;){var k=Nb(f.value,2),n=k[1];Object.assign(this.row(k[0]),n)}}catch(t){d.e(t)}finally{d.f()}f=
ba(kf.arr.toTuples(a,2));var p;try{for(f.s();!(p=f.n()).done;){var q=Nb(p.value,2),r=q[1];Object.assign(this.col(q[0]),r)}}catch(t){f.e(t)}finally{f.f()}}},{key:"fitToCell",get:function(){return this.config.fitToCell}},{key:"fitToCell",set:function(a){this.config.fitToCell=a;this.cellGroups.forEach(function(d){return d.resize=a});this.apply()}},{key:"notInLayout",get:function(){return kf.arr.withoutAll(this.layoutableSubmorphs,this.cellGroups.map(function(a){return a.morph}))}},{key:"col",value:function(a){return this.grid.col(a)}},
{key:"row",value:function(a){return this.grid.row(a)}},{key:"rowCount",get:function(){return this.grid.col(0).items.length}},{key:"columnCount",get:function(){return this.grid.row(0).items.length}},{key:"addGroup",value:function(a){this.cellGroups.push(a)}},{key:"removeGroup",value:function(a){kf.arr.remove(this.cellGroups,a)}},{key:"getCellGroupFor",value:function(a){return a&&this.cellGroups.find(function(d){return d.morph===a})}},{key:"submorphBoundsChanged",get:function(){var a=ba(this.cellGroups),
d;try{for(a.s();!(d=a.n()).done;){var f=d.value;if(f.morph&&!f.bounds().equals(f.morph.bounds()))return!0}}catch(k){a.e(k)}finally{a.f()}return!1}},{key:"sanitizeGrid",value:function(a){var d=this,f=a.grid,k=a.rowCount,n=a.columnCount;f=f||[[]];k=k||f.length;n=n||kf.arr.max(f.map(function(p){return p.length}));f.length<k&&(f=f.concat(kf.arr.withN(k-f.length,[])));return f=f.map(function(p){p.length<n&&(p=p.concat(kf.arr.withN(n-p.length,null)));return p.map(function(q){return q&&q.isMorph?(q.owner!==
d.container&&d.container.addMorph(q),q):q?d.container.getSubmorphNamed(q)||q:q})})}},{key:"autoAssign",value:function(a){var d=this;a.forEach(function(f){var k,n=Infinity;d.cellGroups.forEach(function(p){p.morph||p.cells.forEach(function(q){q=q.position.dist(f.position);q<n&&(k=p,n=q)})});k&&(k.morph=f)})}},{key:"apply",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;this.active||this.renderViaCSS||(this.active=!0,ie._get(Object.getPrototypeOf(g.prototype),"apply",
this).call(this,a),this.grid||this.initGrid(),this.fitAxis(),this.container.extent=kf.pt(Math.max(this.grid.totalStaticWidth,this.container.width),Math.max(this.grid.totalStaticHeight,this.container.height)),this.fitAxis(),this.cellGroups.forEach(function(d){d&&d.apply(a)}),this.lastBoundsExtent=this.container.bounds().extent(),this.active=!1)}},{key:"fitAxis",value:function(){var a=this,d,f;[this.grid.row(0)].concat(hb(this.grid.row(0).axisAfter)).map(function(k){k.adjustLengthToProportion(a.container.height);
d=a.grid.totalStaticHeight;return k}).forEach(function(k){k.fixed||(k.length=k.proportion*Math.max(0,a.container.height-d))});[this.grid.col(0)].concat(hb(this.grid.col(0).axisAfter)).map(function(k){k.adjustLengthToProportion(a.container.width);f=a.grid.totalStaticWidth;return k}).forEach(function(k){k.fixed||(k.length=k.proportion*Math.max(0,a.container.width-f))})}},{key:"renderViaCSS",set:function(a){this._renderViaCSS=a;this.layoutableSubmorphs.forEach(function(d){return d.makeDirty()})}},{key:"renderViaCSS",
get:function(){return this._renderViaCSS}},{key:"onSubmorphAdded",value:function(a,d){ie._get(Object.getPrototypeOf(g.prototype),"onSubmorphAdded",this).call(this,a,d);this.renderViaCSS&&this.measureAfterRender(a)}},{key:"onChange",value:function(a){ie._get(Object.getPrototypeOf(g.prototype),"onChange",this).call(this,a);"extent"===a.prop&&this.renderViaCSS&&this.measureAfterRender(this.container)}},{key:"onSubmorphRemoved",value:function(a,d){var f=this.getCellGroupFor(a);f&&(f.morph=null);ie._get(Object.getPrototypeOf(g.prototype),
"onSubmorphRemoved",this).call(this,a,d)}},{key:"onSubmorphResized",value:function(a,d){this.renderViaCSS?a.isLayoutable&&a.owner===this.container&&this.measureAfterRender(a):ie._get(Object.getPrototypeOf(g.prototype),"onSubmorphResized",this).call(this,a,d)}},{key:"measureAfterRender",value:function(a){var d=this;a.whenRendered().then(function(){d.onDomResize()})}},{key:"tryToMeasureNodeNow",value:function(a){var d=this.getCellGroupFor(a);if(d){var f=this.getNodeFor(a);f?this.updateSubmorphViaDom(a,
f,d.resize):this.measureAfterRender(a)}}},{key:"onDomResize",value:function(){this.updateContainerViaDom();var a=ba(this.cellGroups),d;try{for(a.s();!(d=a.n()).done;){var f=d.value,k=f.resize,n=f.morph;if(n){var p=this.getNodeFor(n);p&&this.updateSubmorphViaDom(n,p,k,!0)}}}catch(q){a.e(q)}finally{a.f()}}},{key:"updateSubmorphViaDom",value:function(a,d,f){var k=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;a.withMetaDo({isLayoutAction:!0},function(){if(f){var n=kf.pt(d.offsetWidth,d.offsetHeight);
a.extent.equals(n)||(k?a.extent=n:(a._morphicState.extent=n,a.updateTransform({extent:n}),kf.signal(a,"extent")))}n=kf.pt(d.offsetLeft,d.offsetTop);a.position.equals(n)||(k?a.position=n:(a._morphicState.position=n,a.updateTransform({position:n}),kf.signal(a,"position")))});if(a.layout&&a.layout.renderViaCSS)a.layout.onDomResize(d,a)}},{key:"updateContainerViaDom",value:function(){if(this.container.env.renderer){var a=this.getNodeFor(this.container);a&&this.hasEmbeddedContainer()&&a.style.setProperty("display",
"inline-grid","important")}}},{key:"addSubmorphCSS",value:function(a,d){if(a.isLayoutable){var f=this.getCellGroupFor(a)||{},k=f.area;a=f.resize;f=f.align;if(k){var n=k.minCol,p=k.maxCol,q=k.minRow,r=k.maxRow;k=k.padding;d.margin=k.top()+"px "+k.right()+"px "+k.bottom()+"px "+k.left()+"px";d.gridColumnStart=n+1;d.gridColumnEnd=p+2;d.gridRowStart=q+1;d.gridRowEnd=r+2;d.position="relative";d.top="unset";d.left="unset";Object.assign(d,{topLeft:{},topRight:{justifySelf:"end",alignSelf:"start"},bottomRight:{justifySelf:"end",
alignSelf:"end"},bottomLeft:{justifySelf:"start",alignSelf:"end"},center:{justifySelf:"center",alignSelf:"center"},topCenter:{justifySelf:"center",alignSelf:"start"},bottomCenter:{justifySelf:"center",alignSelf:"end"},leftCenter:{justifySelf:"start",alignSelf:"center"},rightCenter:{justifySelf:"end",alignSelf:"center"}}[f]);a&&(d.width="auto",d.height="auto")}}}},{key:"addContainerCSS",value:function(a,d){var f=this;a.visible&&(d.display="grid");a=kf.arr.range(0,this.columnCount-1).map(function(n){n=
f.col(n);return n.fixed?n.length+"px":n.proportion+"fr"});var k=kf.arr.range(0,this.rowCount-1).map(function(n){n=f.row(n);return n.fixed?n.length+"px":n.proportion+"fr"});d.gridTemplateColumns=a.join(" ");d.gridTemplateRows=k.join(" ")}},{key:"patchContainer",value:function(){if(this.container.owner){var a=this.container,d=this.getNodeFor(a);d&&this.addContainerCSS(a,d.style)}}},{key:"measureMorphsIn",value:function(){for(var a=this,d=arguments.length,f=Array(d),k=0;k<d;k++)f[k]=arguments[k];kf.arr.compact(f).map(function(n){return n.items.map(function(p){return p.group})}).flat().forEach(function(n){var p=
n.morph;n=n.resize;if(p){var q=a.getNodeFor(p);q&&a.updateSubmorphViaDom(p,q,n)}})}},{key:"resizesMorphHorizontally",value:function(a){return(a=this.getCellGroupFor(a))&&a.resize}},{key:"resizesMorphVertically",value:function(a){return(a=this.getCellGroupFor(a))&&a.resize}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"GridLayout"}}],c,{pathInPackage:function(){return"./layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:82294,end:104170})}(kf.Layout));kf.GridLayout=yB;kf.GridLayout=yB;var e7=Object.freeze({__proto__:null,TilingLayout:sB,VerticalLayout:$x,HorizontalLayout:ay,ProportionalLayout:tB,CellGroup:uB,LayoutColumn:vB,LayoutRow:wB,LayoutCell:xB,GridLayout:yB}),Qf=window.lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js");Qf.getAllPartResources=mF;Qf.loadPart=eA;Qf.savePart=oF;Qf.interactivelySavePart=vu;Qf.interactivelyLoadObjectFromPartsBinFolder=
rF;Qf.interactivelySaveObjectToPartsBinFolder=tF;Qf.saveObjectToPartsbinFolder=vF;Qf.loadObjectFromPartsbinFolder=fA;Qf.buildCommitEditor=yF;Qf.resource=Sk;Qf.Resource=Jm;Qf.registerExtension=ap;Qf.Path=Nh;Qf.obj=nh;Qf.date=ls;Qf.promise=ai;Qf.HorizontalLayout=ay;Qf.VerticalLayout=$x;Qf.Morph=An;Qf.pt=Ij;Qf.Color=Nl;Qf.Rectangle=vl;Qf.connect=Xp;Qf.emit=Am;Qf.SnapshotPackageHelper=qI;Qf.ensureCommitInfo=Nw;Qf.MorphicDB=Qs;Qf.createMorphSnapshot=Rt;Qf.getClassName=en;Qf.getAllPartResources=mF;Qf.loadPart=
eA;Qf.savePart=oF;Qf.interactivelySavePart=vu;Qf.interactivelyLoadObjectFromPartsBinFolder=rF;Qf.interactivelySaveObjectToPartsBinFolder=tF;Qf.saveObjectToPartsbinFolder=vF;Qf.loadObjectFromPartsbinFolder=fA;var rI=Lc("bu",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),g=c.hasOwnProperty("SnapshotEditor")&&"function"===typeof c.SnapshotEditor?c.SnapshotEditor:c.SnapshotEditor=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d,f){this.commit=a;this.snapshot=d;this._db=f}},{key:"db",get:function(){return this._db||Qf.MorphicDB["default"]}},{key:"saveModifiedSnapshot",value:function(){var a=Bb(regeneratorRuntime.mark(function n(f,k){var p,q,r,t;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:p=f;q=p._id;r=p.name;t=p.type;if(q){w.next=3;break}throw Error("No id of commit, cannot save!");case 3:return w.next=
5,this.db.commit(t,r,k,f,void 0,q);case 5:return this.commit=f=w.sent,this.snapshot=k,w.abrupt("return",f);case 9:case "end":return w.stop()}},n,this)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"interactivelySaveModifiedSnapshot",value:function(){var a=Bb(regeneratorRuntime.mark(function n(f,k){var p,q,r,t,w;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return p=Qf.promise.deferred(),q=p.promise,r=p.resolve,t=p.reject,w=this,Object.assign(Qf.buildCommitEditor(),
{commit:Object.assign({},this.commit,{},f),cancel:function(){(this.getWindow()||this).remove();t("canceled")},accept:function(){var B=this;return Bb(regeneratorRuntime.mark(function F(){var L;return regeneratorRuntime.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.prev=0,G.next=3,w.saveModifiedSnapshot(B.commit,k);case 3:L=G.sent;(B.getWindow()||B).remove();r(B.commit=L);G.next=12;break;case 8:G.prev=8,G.t0=G["catch"](0),B.showError(G.t0),t(G.t0);case 12:case "end":return G.stop()}},
F,null,[[0,8]])}))()}}).openInWindow({title:"commit"}),x.abrupt("return",q);case 4:case "end":return x.stop()}},n,this)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"interactivelyEditMetadata",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.interactivelySaveModifiedSnapshot(this.commit,this.snapshot);case 2:return n=p.sent,"function"===typeof f&&f({commit:n,
snapshot:this.snapshot}),p.abrupt("return",n);case 5:case "end":return p.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"interactivelyEditSnapshotJSON",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n=this,p,q,r,t,w,x,B,D,F;return regeneratorRuntime.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return p=this.commit,q=this.snapshot,r=p,t=r._id,w=r.name,x=r.type,L.next=4,pd.import("./text-editor-408ce72a.js");case 4:D=L.sent,F=D["default"],
F.openURL("<".concat(x,"/").concat(w,">"),{historyId:"object-serialization-debugger-editor",customSaveAction:function(){var G=Bb(regeneratorRuntime.mark(function Ha(ha){var Va,hc,qc,jc,Ya;return regeneratorRuntime.wrap(function(xa){for(;;)switch(xa.prev=xa.next){case 0:xa.t0=q;if(xa.t0){xa.next=5;break}xa.next=4;return n.db.fetchSnapshot(void 0,void 0,t);case 4:xa.t0=xa.sent;case 5:Va=xa.t0;hc=JSON.stringify(Va,null,2);if(hc===B){xa.next=13;break}xa.next=10;return $world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",
{fontWeight:"normal"}]);case 10:if(qc=xa.sent){xa.next=13;break}return xa.abrupt("return",{saved:!1,message:"canceled"});case 13:return jc=JSON.parse(ha.ui.contentText.textString),xa.next=16,n.interactivelySaveModifiedSnapshot(n.commit,jc);case 16:return p=xa.sent,q=jc,B=ha.ui.contentText.textString,Ya={saved:!0,snapshot:jc,commit:p},"function"===typeof f&&f(Ya),xa.abrupt("return",Ya);case 22:case "end":return xa.stop()}},Ha)}));return function(ha){return G.apply(this,arguments)}}(),customLoadContentAction:function(){var G=
Bb(regeneratorRuntime.mark(function Va(ha,Ha){var hc;return regeneratorRuntime.wrap(function(qc){for(;;)switch(qc.prev=qc.next){case 0:qc.t0=q;if(qc.t0){qc.next=5;break}qc.next=4;return n.db.fetchSnapshot(void 0,void 0,t);case 4:qc.t0=qc.sent;case 5:return hc=qc.t0,qc.abrupt("return",{content:B=JSON.stringify(hc,null,2),url:"".concat(x,"/").concat(w,".json")});case 7:case "end":return qc.stop()}},Va)}));return function(ha,Ha){return G.apply(this,arguments)}}()});case 7:case "end":return L.stop()}},
k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"interactivelyEditPackageCode",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n,p,q,r,t,w,x,B,D;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:n=this.commit;p=this.snapshot;q=n._id;F.t0=p;if(F.t0){F.next=7;break}F.next=6;return this.db.fetchSnapshot(void 0,void 0,q);case 6:F.t0=F.sent;case 7:return r=F.t0,t=(new Qf.SnapshotPackageHelper(r)).filesInPackages(),w=t.map(function(L){return{isListItem:!0,
string:L.url,value:L}}),F.next=12,$world.filterableListPrompt("Select file to edit",w,{historyId:"object-serialization-debugger-hist"});case 12:x=F.sent;B=Nb(x.selected,1);if(D=B[0]){F.next=17;break}return F.abrupt("return");case 17:return F.abrupt("return",this.interactivelyEditFileInSnapshotPackage(D,f));case 18:case "end":return F.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"interactivelyEditFileInSnapshotPackage",value:function(){var a=Bb(regeneratorRuntime.mark(function p(f,
k,n){var q=this,r,t,w,x,B,D,F,L,G,oa;return regeneratorRuntime.wrap(function(ha){for(;;)switch(ha.prev=ha.next){case 0:r=this.snapshot;t=this.commit;w=t._id;x=t.name;B=t.type;ha.t0=r;if(ha.t0){ha.next=6;break}ha.next=5;return this.db.fetchSnapshot(void 0,void 0,w);case 5:ha.t0=ha.sent;case 6:return D=ha.t0,F=f.get(D),ha.next=10,pd.import("./text-editor-408ce72a.js");case 10:return L=ha.sent,G=L["default"],oa=G.openURL("<".concat(B,"/").concat(x," - ").concat(f.path.slice(1).join("/"),">"),{historyId:"interactivelyEditFileInSnapshotPackage-hist",
customSaveAction:function(){var Ha=Bb(regeneratorRuntime.mark(function qc(hc){var jc,Ya,xa;return regeneratorRuntime.wrap(function(tc){for(;;)switch(tc.prev=tc.next){case 0:jc=f.get(D);if(jc===F){tc.next=7;break}tc.next=4;return $world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",{fontWeight:"normal"}]);case 4:if(Ya=tc.sent){tc.next=7;break}return tc.abrupt("return",{saved:!1,message:"canceled"});case 7:return f.set(D,
hc.ui.contentText.textString),tc.next=10,q.interactivelySaveModifiedSnapshot(q.commit,D);case 10:return q.commit=tc.sent,xa={commit:q.commit,snapshot:D,saved:!0},"function"===typeof k&&k(xa),tc.abrupt("return",xa);case 14:case "end":return tc.stop()}},qc)}));return function(hc){return Ha.apply(this,arguments)}}(),customLoadContentAction:function(Ha,Va){return{content:f.get(D),url:f.url}}}),n&&oa.whenRendered().then(function(){return oa.lineNumber=n.row}),ha.abrupt("return",oa);case 15:case "end":return ha.stop()}},
p,this)}));return function(f,k,n){return a.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"SnapshotEditor"}}],c,{pathInPackage:function(){return"./partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10066,end:15785})}(void 0));Qf.SnapshotEditor=rI;Qf.SnapshotEditor=rI;Qf.partURLRe=
/^part:\/\/([^\/]+)\/(.*)$/;var sI=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),g=c.hasOwnProperty("PartResource")&&"function"===typeof c.PartResource?c.PartResource:c.PartResource=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:"canDealWithJSON",get:function(){return!1}},{key:"dirList",value:function(){var a=Bb(regeneratorRuntime.mark(function n(f,
k){return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Qf.resource(this.url.replace("part://","styleguide://")).dirList(f,k);case 2:return p.abrupt("return",p.sent);case 3:case "end":return p.stop()}},n,this)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"write",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:throw Error("Part urls are ready only! Please go to the world they are defined in and change the exported component directly.");
case 1:case "end":return n.stop()}},k)}));return function(f){return a.apply(this,arguments)}}()},{key:"read",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,t;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,Qf.resource(this.url.replace("part://","styleguide://")).read();case 2:k=w.sent;if(!k.master){w.next=6;break}w.next=6;return k.master.whenReady();case 6:n=k.copy();n.isComponent=!1;n.name="a"+Qf.getClassName(n);n.withAllSubmorphsDoExcluding(function(x){x!==
n&&x.master||delete x._parametrizedProps},function(x){return x.master&&x!==n});p=n.master;n.master=k;if(!n._pool.mastersInSubHierarchy){w.next=33;break}q=ba(n._pool.mastersInSubHierarchy);w.prev=14;q.s();case 16:if((r=q.n()).done){w.next=25;break}t=r.value;if(p!==t){w.next=20;break}return w.abrupt("continue",23);case 20:return w.next=22,t.applyIfNeeded(!0);case 22:t.derivedMorph.ownerChain().includes(n)||t.derivedMorph.requestMasterStyling();case 23:w.next=16;break;case 25:w.next=30;break;case 27:w.prev=
27,w.t0=w["catch"](14),q.e(w.t0);case 30:return w.prev=30,q.f(),w.finish(30);case 33:return n.master.applyIfNeeded(!0),delete n._pool,n.withAllSubmorphsDo(function(x){if("function"===typeof x.onLoad)x.onLoad()}),w.abrupt("return",n);case 37:case "end":return w.stop()}},f,this,[[14,27,30,33]])}));return function(){return a.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PartResource"}}],c,{pathInPackage:function(){return"./partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:15840,end:17625})}(Qf.Resource);Qf.PartResource=sI;Qf.PartResource=sI;var tI=Lc("b5",{name:"part",matches:function(b){return b.match(Qf.partURLRe)},resourceClass:Qf.PartResource});Qf.resourceExtension=tI;Qf.resourceExtension=tI;Qf.registerExtension(Qf.resourceExtension);(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),
g=c.hasOwnProperty("CommitEditor")&&"function"===typeof c.CommitEditor?c.CommitEditor:c.CommitEditor=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:"onLoad",value:function(){Qf.connect(this.ui.okButton,"fire",this,"accept");Qf.connect(this.ui.cancelButton,"fire",this,"cancel")}},{key:"accept",value:function(){}},{key:"cancel",value:function(){}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"CommitEditor"}},{key:"properties",get:function(){return{name:{defaultValue:"commit editor"},extent:{defaultValue:Qf.pt(420,24)},layout:{initialize:function(){this.layout=new Qf.VerticalLayout({resizeSubmorphs:!0,spacing:3})}},commit:{set:function(a){this._commit=a;var d=a.type,f=a.timestamp,k=a.author,n=a.tags,p=a.description,q=a.metadata,r=this.ui,t=r.typeInput,w=r.timestampInput,x=r.authorNameInput,B=r.authorEmailInput,D=r.authorRealmInput,F=r.tagsInput,L=r.descriptionInput,
G=r.messageInput,oa=r.metadataInput;r.nameInput.input=a.name;t.input=d;w.input=String(new Date(f));x.input=k.name;B.input=k.email;D.input=k.realm;F.input=n.join(" ");L.textString=p;G.textString="";oa.textString=q?JSON.stringify(q,null,2):""},get:function(){var a=this._commit;if(!a)throw Error("commit editor does not have a _commit object");var d=this.ui,f=d.authorNameInput,k=d.authorEmailInput,n=d.authorRealmInput,p=d.tagsInput,q=d.descriptionInput,r=d.messageInput,t=d.metadataInput,w=d.nameInput.input;
d=d.typeInput.input;if(a.name!==w)throw Error("name does not match _commit.name: ".concat(w," vs ").concat(a.name));if(a.type!==d)throw Error("type does not match _commit.type: ".concat(d," vs ").concat(a.type));a.author.name=f.input;a.author.email=k.input;a.author.realm=n.input;a.tags=p.input.split(" ").map(function(x){return x.trim()}).filter(Boolean);a.description=q.textString;a.message=r.textString;a.metadata=t.textString?JSON.parse(t.textString):null;return a}},ui:{get:function(){return{metadataInput:this.get("metadata input"),
messageInput:this.get("message input"),descriptionInput:this.get("description input"),tagsInput:this.get("tags input"),authorRealmInput:this.get("author.realm input"),authorEmailInput:this.get("author.email input"),authorNameInput:this.get("author.name input"),timestampInput:this.get("timestamp input"),typeInput:this.get("type input"),nameInput:this.get("name input"),cancelButton:this.get("cancel button"),okButton:this.get("ok button")}}},submorphs:{initialize:function(){var a={type:"input",extent:Qf.pt(420,
24),fixedWidth:!0,fixedHeight:!0,padding:Qf.Rectangle.inset(4,4),border:{color:Qf.Color.gray,width:1}};this.submorphs=[Object.assign({},a,{name:"name input",placeholder:"name"}),Object.assign({},a,{name:"type input",placeholder:"type"}),Object.assign({},a,{name:"timestamp input",placeholder:"timestamp"}),{layout:new Qf.VerticalLayout({resizeSubmorphs:!0,spacing:3}),submorphs:[Object.assign({},a,{name:"author.name input",placeholder:"author name"}),Object.assign({},a,{name:"author.email input",placeholder:"author email"}),
Object.assign({},a,{name:"author.realm input",placeholder:"author realm"})]},Object.assign({},a,{name:"tags input",placeholder:"tags"}),Object.assign({},a,{height:70,name:"description input",type:"text"}),Object.assign({},a,{height:70,name:"message input",type:"text"}),Object.assign({},a,{height:70,name:"metadata input",type:"text"}),{layout:new Qf.HorizontalLayout({spacing:3,direction:"centered"}),submorphs:[{type:"button",name:"ok button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}]}}}}}],
c,{pathInPackage:function(){return"./partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:17808,end:23414})})(Qf.Morph);Qf.buildCommitEditor=yF;var qT=Object.freeze({__proto__:null,getAllPartResources:mF,loadPart:eA,savePart:oF,interactivelySavePart:vu,interactivelyLoadObjectFromPartsBinFolder:rF,interactivelySaveObjectToPartsBinFolder:tF,
saveObjectToPartsbinFolder:vF,loadObjectFromPartsbinFolder:fA,SnapshotEditor:rI,PartResource:sI,resourceExtension:tI,buildCommitEditor:yF});Lc("ch",qT);var Hg=window.lively.FreezerRuntime.recorderFor("lively.morphic/components/core.js");Hg.part=fs;Hg.component=Ow;Hg.without=Pw;Hg.add=Qw;Hg.edit=gA;Hg.insertFontCSS=function(b,c){c.endsWith(".otf")?Hg.addOrChangeCSSDeclaration("".concat(b),"@font-face {\n             font-family: ".concat(b,';\n             src: url("').concat(c,'") format("opentype");\n         }')):
Hg.addOrChangeCSSDeclaration("".concat(b),'@import url("'.concat(c,'");'))};Hg.ensureFont=Rw;Hg.addOrChangeCSSDeclaration=Zo;Hg.string=ji;Hg.properties=op;Hg.obj=nh;Hg.getClassName=en;Hg.epiConnect=Vv;Hg.serializeMorph=fw;Hg.sanitizeFont=Qt;Hg.getClassForName=LC;Hg.morph=il;Hg.PolicyApplicator=YA;Hg.evaluateAsSpec=!1;var zB=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/components/core.js"),g=c.hasOwnProperty("ComponentDescriptor")&&"function"===typeof c.ComponentDescriptor?
c.ComponentDescriptor:c.ComponentDescriptor=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:"__serialize__",value:function(a){var d=this[Symbol["for"]("lively-module-meta")];return a.expressionSerializer.exprStringEncode({__expr__:d["export"],bindings:Pc({},d.module,d["export"])})}},{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d){this.init(a,d)}},{key:"isComponentDescriptor",
get:function(){return!0}},{key:"init",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{moduleId:{pathInPackage:function(){return"./components/core.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}}.id};delete this._snap;delete this._cachedComponent;a.isPolicy?(this.stylePolicy=a,this.stylePolicy.addMetaInfo(d)):
this.generatorFunction=a;this[Symbol["for"]("lively-module-meta")]=d;return this}},{key:"extend",value:function(a){return new Hg.PolicyApplicator(a,this)}},{key:"derive",value:function(a){return this.stylePolicy.instantiate(a)}},{key:"getInstance",value:function(a){return this.derive(a)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ComponentDescriptor"}},{key:"for",value:function(a,d,f){a=this.extractSpec(a);return f&&f.isComponentDescriptor?f.init(a,d):new Hg.ComponentDescriptor(a,
d)}},{key:"extractSpec",value:function(a){Hg.evaluateAsSpec=!0;var d={};try{d=a(),d.isPolicy||(d=new Hg.PolicyApplicator(d))}finally{Hg.evaluateAsSpec=!1}return d}}],c,{pathInPackage:function(){return"./components/core.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1947,end:5517})}(void 0);Hg.ComponentDescriptor=zB;Hg.ComponentDescriptor=
zB;var by=Lc("V",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/components/core.js"),g=c.hasOwnProperty("ViewModel")&&"function"===typeof c.ViewModel?c.ViewModel:c.ViewModel=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:"toString",value:function(){return this.view?"<".concat(Hg.getClassName(this)," - ").concat(this.view.name,">"):"<Unattached ".concat(Hg.getClassName(this),
">")}},{key:Symbol["for"]("lively-instance-initialize"),value:function(){this.initializeProperties(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"__only_serialize__",get:function(){var a=this.defaultProperties,d=this.propertiesAndPropertySettings().properties,f=[];this.attributeConnections&&f.push("attributeConnections");for(var k in d){var n=d[k];n.readOnly||n.derived||n.isComponent||n.hasOwnProperty("serialize")&&!n.serialize||Hg.obj.equals(this[k],a[k])||f.push(k)}return f}},
{key:"__additionally_serialize__",value:function(a,d,f,k){a=this.propertiesAndPropertySettings().properties;for(var n in a)a[n].isComponent&&this[n]&&(d=this[n][Symbol["for"]("lively-module-meta")])&&k(n,f.expressionSerializer.exprStringEncode({__expr__:d["export"],bindings:Pc({},d.module,d["export"])}))}},{key:"getProperty",value:function(a){return this._viewState[a]}},{key:"setProperty",value:function(a,d){this._viewState[a]=d;if(!this._isRefreshing){this._isRefreshing=!0;try{if(this.view)this.onRefresh(a)}catch(f){}this._isRefreshing=
!1}}},{key:"world",value:function(){return this.view.world()}},{key:"execCommand",value:function(a,d){return this.view.execCommand(a,d)}},{key:"doWithScope",value:function(a){var d=this;return this.view&&this.view.withAllSubmorphsDoExcluding(a,function(f){return f.ignoreScope||f.viewModel&&f.viewModel!==d})}},{key:"onDeactivate",value:function(){this.getBindingConnections().forEach(function(k){return k.disconnect()});if(this.view){var a=ba(this.expose||[]),d;try{for(a.s();!(d=a.n()).done;){var f=
d.value;Hg.obj.isArray(f)&&(f=f[0]);delete this.view[f]}}catch(k){a.e(k)}finally{a.f()}}}},{key:"onActivate",value:function(){this.view.viewModel===this&&(this.reifyExposedProps(),this.reifyBindings())}},{key:"viewDidLoad",value:function(){}},{key:"onRefresh",value:function(a){}},{key:"reifyBindings",value:function(){delete this._ui;var a=ba(this.bindings),d;try{for(a.s();!(d=a.n()).done;){var f=d.value,k=f.target,n=f.model,p=f.signal,q=f.handler,r=f.override,t=void 0===r?!1:r,w=f.converter,x=void 0===
w?!1:w,B=f.updater,D=void 0===B?!1:B;try{n&&(k=this.view.getSubmorphNamed(n).viewModel),k||(k=this.view),"string"===typeof k&&(k=this.view.getSubmorphNamed(k)),k&&(Hg.obj.isFunction(q)?Hg.epiConnect(k,p,q):Hg.epiConnect(k,p,this,q,{override:t,converter:x,updater:D}))}catch(F){console.warn("Failed to reify biniding: ",k,n,p,q)}}}catch(F){a.e(F)}finally{a.f()}}},{key:"reifyExposedProps",value:function(){var a=this,d=this.propertiesAndPropertySettings().properties,f=Hg.properties.allPropertyDescriptors(this),
k=ba(this.expose||[]),n;try{var p=function(){var q=n.value;if(Hg.obj.isArray(q)){var r=Nb(q,2),t=r[0],w=r[1];r=w.model;w=w.target;if(r)var x=a.view.getSubmorphNamed(r).viewModel;w&&(x=a.view.getSubmorphNamed(w));Object.defineProperty(a.view,t,{configurable:!0,get:function(){var D=x[t];return Hg.obj.isFunction(D)?D.bind(x):D},set:function(D){return x[t]=D}});return"continue"}if(Hg.obj.isObject(q)){var B=q.method;r=q.as;a.view[r]=function(){return a[B].apply(a,arguments)};a.view[r].toString=function(){return a[B].toString()};
return"continue"}r=f[q];if(d[q]||r&&(r.get||r.set))return Object.defineProperty(a.view,q,{configurable:!0,get:function(){return a[q]},set:function(D){return a[q]=D}}),"continue";a.view[q]=function(){return a[q].apply(a,arguments)};Hg.obj.isFunction(a[q])&&(a.view[q].toString=function(){return a[q].toString()})};for(k.s();!(n=k.n()).done;)p()}catch(q){k.e(q)}finally{k.f()}}},{key:"withoutBindingsDo",value:function(a){var d=this;this.onDeactivate();try{var f=a()}catch(k){console.error(k.message)}if(f&&
f.then)return f.then(function(){return d.onActivate()});this.onActivate()}},{key:"getBindingConnections",value:function(){var a=this,d=[],f=this.bindings,k=function(n){n.forEach(function(p){p.targetObj===a&&f.find(function(q){return Hg.obj.isFunction(q.handler)?p.targetObj.toString()===q.handler.toString():p.sourceAttrName===q.signal&&p.targetMethodName===q.handler})&&d.push(p)})};this.doWithScope(function(n){n.attributeConnections&&k(n.attributeConnections);n.viewModel&&n.viewModel.attributeConnections&&
k(n.viewModel.attributeConnections)});return d}},{key:"attach",value:function(a){var d=this;this.view=a;this.reifyBindings();this.reifyExposedProps();a.toString=function(){return"<".concat(Hg.getClassName(a),"[").concat(Hg.getClassName(d),"]>")};this.onRefresh();this.viewDidLoad()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ViewModel"}},{key:"propertySettings",get:function(){return{defaultGetter:function(a){return this.getProperty(a)},defaultSetter:function(a,d){this.setProperty(a,
d)},valueStoreProperty:"_viewState"}}},{key:"properties",get:function(){return{view:{serialize:!1,set:function(a){this.setProperty("view",a);a&&(a.viewModel=this)}},bindings:{serialize:!1,readOnly:!0,get:function(){return[]}},models:{serialize:!1,derived:!0,get:function(){var a={};if(lively.FreezerRuntime&&this._models)return this._models;this.doWithScope(function(d){d.viewModel&&(a[Hg.string.camelize(d.name.split(" ").join("-"))]=d.viewModel)});return this._models=a}},expose:{serialize:!1,get:function(){return[]}},
styleProperties:{group:"styling",derived:!0,readOnly:!0,get:function(){var a=this.propertiesAndPropertySettings(),d=a.properties,f=[];a=ba(a.order);var k;try{for(a.s();!(k=a.n()).done;){var n=k.value;(d[n].isStyleProp||d[n].isComponent)&&f.push(n)}}catch(p){a.e(p)}finally{a.f()}return f}},ui:{serialize:!1,derived:!0,get:function(){var a={},d={};if(lively.FreezerRuntime&&this._ui)return this._ui;this.doWithScope(function(f){a[Hg.string.camelize(f.name.split(" ").join("-"))]=f;var k=Hg.getClassName(f);
k=k.charAt(0).toLowerCase()+k.slice(1)+"s";var n=d[k]||[];n.push(f);d[k]=n});return this._ui=Object.assign({},a,{},d)}}}}}],c,{pathInPackage:function(){return"./components/core.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6380,end:17789})}(void 0));Hg.ViewModel=by;Hg.ViewModel=by;Hg.part=fs;Hg.component=Ow;Hg.component["for"]=
function(b,c,g){return Hg.ComponentDescriptor["for"](b,{moduleId:c.module,exportedName:c["export"],range:c.range},g)};Hg.without=Pw;Hg.add=Qw;Hg.edit=gA;Hg.ensureFont=Rw;var f7=Object.freeze({__proto__:null,ComponentDescriptor:zB,ViewModel:by,part:fs,component:Ow,without:Pw,add:Qw,edit:gA,ensureFont:Rw}),zg=window.lively.FreezerRuntime.recorderFor("lively.morphic/world-loading.js");zg.reportWorldLoad=function(b,c){c=c?"".concat(c.name," (").concat((c.token||"").slice(0,5),")"):"---";fetch(zg.string.joinPath(System.baseURL,
"/report-world-load"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:"".concat(c," logged in at ").concat(b.name," [").concat(window._livelyLoadId,"]")})})["catch"](function(g){return console.warn("report-world-load failed: ".concat(g))})};zg.setupLively2Lively=function(b){return zF.apply(this,arguments)};zg.setupLivelyShell=function(b){return AF.apply(this,arguments)};zg.loadLocalConfig=function(){return BF.apply(this,arguments)};zg.loadWorld=CF;zg.loadWorldFromCommit=
EF;zg.loadWorldFromDB=GF;zg.loadWorldFromURL=IF;zg.interactivelySaveWorld=Sw;zg.resource=Sk;zg.registerResourceExension=ap;zg.subscribe=Wp;zg.emit=Am;zg.Path=Nh;zg.obj=nh;zg.date=ls;zg.promise=ai;zg.string=ji;zg.defaultDirectory=hw;zg.ShellClientResource=bB;zg.MorphicEnv=qo;zg.createMorphSnapshot=Rt;zg.MorphicDB=Qs;zg.ensureCommitInfo=Nw;zg.pathForBrowserHistory=ew;zg.part=fs;zg.loadWorld=CF;zg.loadWorldFromCommit=EF;zg.loadWorldFromDB=GF;zg.loadWorldFromURL=IF;zg.interactivelySaveWorld=Sw;var Xi=
window.lively.FreezerRuntime.recorderFor("lively.user/client/user.js");Xi.jwtTokenDecode=function(b){b=b.split(".");b=Nb(b,3);b[0];var c=b[1];b[2];return JSON.parse(atob(c))};Xi.guid=function(){var b=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()};Xi.makeRequest=function(b){var c=2<arguments.length?arguments[2]:void 0,g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},a={method:1<arguments.length&&void 0!==
arguments[1]?arguments[1]:"GET",mode:"cors"};c&&(a.body=c);a.redirect="follow";a.headers=Object.assign({},g);return fetch(b,a)};Xi.POST=function(b,c){return LF.apply(this,arguments)};Xi.resource=Sk;var dv=Lc("a5",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),g=c.hasOwnProperty("User")&&"function"===typeof c.User?c.User:c.User=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d){this.realm=d;this.name=a;this.roles={};this.createdAt=0;this.token=this.email=null}},{key:"isLoggedIn",value:function(){return!!this.token}},{key:"loginOrRegister",value:function(){var a=Bb(regeneratorRuntime.mark(function p(f,k,n){var q,r,t,w,x,B,D,F;return regeneratorRuntime.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return q=this.email,r=this.createdAt,t=this.roles,w=this.name,x="register"===
f?{password:k,email:q,createdAt:r,roles:t,name:w}:{password:k,name:w},L.next=4,Xi.POST(n+"/"+f,x);case 4:B=L.sent;if(!B.error){L.next=7;break}return L.abrupt("return",B);case 7:return D=B.token,F=Xi.jwtTokenDecode(D),t=F.roles,r=F.createdAt,q=F.email,Object.assign(this,{roles:t,createdAt:r,email:q,token:D}),L.abrupt("return",{status:B.status});case 11:case "end":return L.stop()}},p,this)}));return function(f,k,n){return a.apply(this,arguments)}}()},{key:"verify",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,
n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Xi.POST(this.realm+"/verify",{token:this.token});case 2:return k=p.sent,n=k.error,p.abrupt("return",!n);case 6:case "end":return p.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"login",value:function(a){return this.loginOrRegister("login",a,this.realm)}},{key:"register",value:function(a){return this.loginOrRegister("register",a,this.realm)}},{key:"checkPassword",value:function(){var a=
Bb(regeneratorRuntime.mark(function k(f){var n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(this.isLoggedIn){r.next=2;break}throw Error("To check password, user needs to login.");case 2:return r.next=4,Xi.POST(this.realm+"/check-password",{token:this.token,password:f});case 4:n=r.sent;p=n.error;q=n.status;if(!p){r.next=9;break}throw Error(p);case 9:return r.abrupt("return",q);case 10:case "end":return r.stop()}},k,this)}));return function(f){return a.apply(this,
arguments)}}()},{key:"modify",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n,p,q,r,t,w,x,B;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,Xi.POST(this.realm+"/modify",{token:this.token,changes:f});case 2:n=D.sent;p=n.error;q=n.status;r=n.token;if(!p){D.next=8;break}return D.abrupt("return",{error:p});case 8:return r&&(t=Xi.jwtTokenDecode(r),w=t.roles,x=t.createdAt,B=t.email,Object.assign(this,{roles:w,createdAt:x,email:B,token:r})),
D.abrupt("return",{status:q});case 10:case "end":return D.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"getDir",value:function(){return Xi.resource(System.baseURL).join("users").join(this.name)}},{key:"toString",value:function(){return"<".concat(this.constructor.name," ").concat(this.name," ").concat(this.isLoggedIn()?"":"not ","logged in>")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"User"}},{key:"guest",get:function(){return Xi.guestUser}},
{key:"named",value:function(a,d){var f=a+"-"+d,k=Xi.userMap.get(f);k||(k=new this(a,d),Xi.userMap.set(f,k));return k}},{key:"fromToken",value:function(a,d){var f=Xi.jwtTokenDecode(a),k=f.roles,n=f.createdAt,p=f.email;return Object.assign(this.named(f.name,d),{roles:k,createdAt:n,email:p,token:a})}},{key:"clearCache",value:function(){Xi.userMap=new Map}}],c,{pathInPackage:function(){return"./client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.user",version:"0.2.0"}}},{start:1134,end:4112})}(void 0));Xi.User=dv;Xi.User=dv;var cy=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),g=c.hasOwnProperty("GuestUser")&&"function"===typeof c.GuestUser?c.GuestUser:c.GuestUser=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:"isGuestUser",get:function(){return!0}},
{key:"isLoggedIn",value:function(){return!1}},{key:"loginOrRegister",value:function(){var a=Bb(regeneratorRuntime.mark(function p(f,k,n){return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:throw Error("Guest user cannot "+f+"!");case 1:case "end":return q.stop()}},p)}));return function(f,k,n){return a.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"GuestUser"}}],c,{pathInPackage:function(){return"./client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.user",version:"0.2.0"}}},{start:4120,end:4358})}(Xi.User);Xi.GuestUser=cy;Xi.GuestUser=cy;Xi.userMap=Xi.userMap||new Map;Xi.guestUser=Xi.guestUser||Xi.GuestUser.named("guest-"+Xi.guid(),null);var Co=window.lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js");Co.User=dv;Co.GuestUser=cy;Co.emit=Am;var dy=Lc("a4",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js"),
g=c.hasOwnProperty("UserRegistry")&&"function"===typeof c.UserRegistry?c.UserRegistry:c.UserRegistry=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:"isTrackingGuestUsers",get:function(){return!1}},{key:"hasUserStored",value:function(){try{return!!localStorage["lively.user"]||!!sessionStorage["lively.user"]}catch(a){return!1}}},{key:"login",value:function(){var a=Bb(regeneratorRuntime.mark(function n(f,
k){var p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(f.isGuestUser){r.next=7;break}r.next=3;return f.login(k);case 3:p=r.sent;q=p.error;if(!q){r.next=7;break}throw Error(q);case 7:return this.saveUserToLocalStorage(f),r.abrupt("return",f);case 9:case "end":return r.stop()}},n,this)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"logout",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=
n.next){case 0:try{this.isTrackingGuestUsers||(delete localStorage["lively.user"],delete sessionStorage["lively.user"])}catch(p){}f=f&&f.isGuestUser?f:Co.User.guest;Co.emit("lively.user/userchanged",{user:f},Date.now(),System);return n.abrupt("return",f);case 4:case "end":return n.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"register",value:function(){var a=Bb(regeneratorRuntime.mark(function n(f,k){var p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=
r.next){case 0:if(f&&!f.isGuestUser){r.next=2;break}throw Error("guest users cannot register");case 2:return r.next=4,f.register(k);case 4:p=r.sent;q=p.error;if(!q){r.next=8;break}throw Error(q);case 8:return this.saveUserToLocalStorage(f),r.abrupt("return",f);case 10:case "end":return r.stop()}},n,this)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"loadUserFromLocalStorage",value:function(a){try{var d=localStorage["lively.user"]||sessionStorage["lively.user"];if(d)return d=JSON.parse(d),
d.isGuest?Co.GuestUser.named(d.name,null):Co.User.fromToken(d.token,a)}catch(f){console.warn("Could not read user from localStorage: ".concat(f))}return this.isTrackingGuestUsers?!1:Co.GuestUser.guest}},{key:"saveUserToLocalStorage",value:function(a){if(!a||!a.isGuestUser&&!a.token)return!1;Co.emit("lively.user/userchanged",{user:a},Date.now(),System);try{return a.isGuestUser&&!this.isTrackingGuestUsers?(sessionStorage["lively.user"]=JSON.stringify({isGuest:!0,name:a.name}),delete localStorage["lively.user"]):
localStorage["lively.user"]=a.isGuestUser&&this.isTrackingGuestUsers?JSON.stringify({isGuest:!0,name:a.name}):JSON.stringify({token:a.token}),!0}catch(d){return console.warn("Could not save user into local/sessionStorage: ".concat(d)),!1}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"UserRegistry"}},{key:"current",get:function(){return this._current||(this._current=new this)}}],c,{pathInPackage:function(){return"./client/user-registry.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.user",version:"0.2.0"}}},{start:132,end:2650})}(void 0));Co["default"]=dy;var ey=window.lively.FreezerRuntime.recorderFor("lively.user/index.js");ey.User=dv;ey.ClientUser=dv;ey.GuestUser=cy;ey["default"]=dy;ey.UserRegistry=dy;var g7=Object.freeze({__proto__:null,ClientUser:dv,GuestUser:cy,UserRegistry:dy});Lc("ci",g7);var Wg=window.lively.FreezerRuntime.recorderFor("lively.morphic/world.js");
Wg.bowser=Bs;Wg.Rectangle=vl;Wg.Color=Nl;Wg.pt=Ij;Wg.arr=mh;Wg.promise=ai;Wg.Path=Nh;Wg.obj=nh;Wg.signal=Vl;Wg.config=al;Wg.MorphicEnv=qo;Wg.Morph=An;Wg.TooltipViewer=Hx;Wg.Tooltip=Gx;Wg.loadWorldFromURL=IF;Wg.loadWorldFromDB=GF;Wg.loadWorldFromCommit=EF;Wg.loadWorld=CF;Wg.touchInputDevice=uo;Wg.UserRegistry=dy;Wg.emit=Am;Wg.resource=Sk;Wg.loadMorphFromSnapshot=Lr;var Hu=Lc("W",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),g=c.hasOwnProperty("World")&&"function"===
typeof c.World?c.World:c.World=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){ie._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,a);this._renderer=null;this._tooltipViewer=new Wg.TooltipViewer(this)}},{key:"__deserialize__",value:function(a,d,f,k){ie._get(Object.getPrototypeOf(g.prototype),
"__deserialize__",this).call(this,a,d,f,k);this._renderer=null;this._tooltipViewer=new Wg.TooltipViewer(this)}},{key:"__additionally_serialize__",value:function(a,d,f,k){ie._get(Object.getPrototypeOf(g.prototype),"__additionally_serialize__",this).call(this,a,d,f,k);if(a.props.submorphs)for(a=a.props.submorphs.value,d=a.length;d--;)f.refForId(a[d].id).realObj.isHand&&Wg.arr.removeAt(a,d)}},{key:"commands",get:function(){return[].concat(hb(ie._get(Object.getPrototypeOf(g.prototype),"commands",this)),
[{name:"resize to fit window",exec:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=function(){f.extent=lively.FreezerRuntime?f.windowBounds().extent():f.windowBounds().union(f.submorphBounds(function(t){return!t.isEpiMorph&&!t.hasFixedPosition})).extent()},p=function(){var t=Bb(regeneratorRuntime.mark(function x(){return regeneratorRuntime.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=
2,f.whenRendered();case 2:return delete f._cachedWindowBounds,B.abrupt("return",!f.windowBounds().extent().equals(f.extent));case 4:case "end":return B.stop()}},x)}));return function(){return t.apply(this,arguments)}}(),q=0;case 3:r.t0=5>q;if(!r.t0){r.next=8;break}r.next=7;return p();case 7:r.t0=r.sent;case 8:if(!r.t0){r.next=13;break}q++;n();r.next=3;break;case 13:return f.relayout(),r.abrupt("return",!0);case 15:case "end":return r.stop()}},k)}));return function(f){return a.apply(this,arguments)}}()}])}},
{key:"isWorld",get:function(){return!0}},{key:"whenReady",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",!0);case 1:case "end":return k.stop()}},f)}));return function(){return a.apply(this,arguments)}}()},{key:"render",value:function(a){return a.renderWorld(this)}},{key:"grabbable",get:function(){return!1}},{key:"grabbable",set:function(a){}},{key:"existingHandForPointerId",value:function(a){return this.submorphs.find(function(d){return d instanceof
Wg.Hand&&d.pointerId===a})}},{key:"layoutHaloForPointerId",value:function(a){}},{key:"haloForPointerId",value:function(a){}},{key:"handForPointerId",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,f=this.existingHandForPointerId(a);return f?f:!f&&this.firstHand&&d?(this.firstHand.pointerId=a,this.firstHand):this.addMorph(new Wg.Hand(a),this.submorphs[0])}},{key:"removeHandForPointerId",value:function(a){(a=this.existingHandForPointerId(a))&&1<this.hands.length&&a.remove()}},
{key:"world",value:function(){return this}},{key:"makeDirty",value:function(){if(!this._dirty){this._dirty=!0;var a=this.env.renderer;a&&a.renderLater()}}},{key:"hands",get:function(){return Wg.arr.sortBy(this.submorphs.filter(function(a){return a.isHand}),function(a){return a.pointerId})}},{key:"firstHand",get:function(){return this.hands[0]}},{key:"getCurrentUser",value:function(){var a=Wg.UserRegistry&&Wg.UserRegistry.current;return a&&a.loadUserFromLocalStorage(window.AUTH_SERVER_URL||Wg.config.users.authServerURL)}},
{key:"focusedMorph",get:function(){var a=this.env.eventDispatcher;return(a=a&&a.eventState.focusedMorph)&&a.world()===this?a:this}},{key:"onMouseMove",value:function(a){a.hand&&a.hand.update(a);this._tooltipViewer.mouseMove(a)}},{key:"onHoverOut",value:function(a){ie._get(Object.getPrototypeOf(g.prototype),"onHoverOut",this).call(this,a);if(a.state.draggedMorph){var d=a.state;d.dragDelta=(d.draggedMorph.owner||this).getInverseTransform().transformDirection(a.position.subPt(d.lastDragPosition));d.absDragDelta=
a.position.subPt(d.clickedOnPosition);a.onAfterDispatch(function(){return d.lastDragPosition=a.position});a.state.draggedMorph.onDrag(a)}}},{key:"onMouseDown",value:function(a){a.state.menu&&a.state.menu.remove();this.onWindowScroll();this._tooltipViewer.mouseDown(a)}},{key:"onMouseWheel",value:function(a){a.isShiftDown()&&(window.scrollBy(-a.domEvt.wheelDeltaX,-a.domEvt.wheelDeltaY),a.stop())}},{key:"onBeforeUnload",value:function(a){return this.onUnload(a)}},{key:"onUnload",value:function(a){this.submorphs.forEach(function(d){if("function"===
typeof d.onWorldUnload)d.onWorldUnload(a)})}},{key:"updateVisibleWindowMorphs",value:function(){this.withAllSubmorphsDo(function(a){if(a.respondsToVisibleWindow){if("function"!==typeof a.relayout)return a.showError(Error("".concat(a," listed as responding to visible window")+" change, but has no relayout instruction"));a.relayout()}})}},{key:"onWindowScroll",value:function(){var a=this.env.eventDispatcher.keyInputHelper.inputState,d=a.positionChangedTime,f=a.scrollLeftWhenChanged;a=a.scrollTopWhenChanged;
var k=document.documentElement;500>Date.now()-d&&!Wg.bowser.firefox?(k.scrollLeft=f,k.scrollTop=a):(this.setProperty("scroll",Wg.pt(k.scrollLeft,k.scrollTop)),this._cachedWindowBounds=null,this.updateVisibleWindowMorphs())}},{key:"onWindowResize",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.whenRendered();case 2:this._cachedWindowBounds=null;if("elastic"!==this.resizePolicy){r.next=
6;break}r.next=6;return this.execCommand("resize to fit window");case 6:this.updateVisibleWindowMorphs();n=ba(this.submorphs);try{for(n.s();!(p=n.n()).done;)if(q=p.value,"function"===typeof q.onWorldResize)q.onWorldResize(f)}catch(t){n.e(t)}finally{n.f()}case 9:case "end":return r.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"relayCommandExecutionToFocusedMorph",value:function(a){if(!a)return null;var d=this.focusedMorph,f=Wg.arr.findAndGet(Wg.arr.without([d].concat(hb(d.ownerChain())),
this),function(k){return Wg.arr.findAndGet(k.keyhandlers,function(n){return(n=n.eventCommandLookup(k,a))?{command:n,morph:k}:null})})||{};d=f.command;f=f.morph;return d?f.execCommand(d):null}},{key:"visibleBounds",value:function(){var a=this.env.renderer?this.windowBounds().intersection(this.innerBounds()):this.innerBounds();if(Wg.bowser.mac)return a;if(a.height<this.extent.y||a.width<this.extent.x)a.width-=this.scrollbarOffset.x;return a}},{key:"visibleBoundsExcludingTopBar",value:function(){return this.visibleBounds()}},
{key:"windowBounds",value:function(a){if(this._cachedWindowBounds)return this._cachedWindowBounds;a=this.env.domEnv.window;var d=1/this.scale;return this._cachedWindowBounds=new Wg.Rectangle(a.scrollX*d,a.scrollY*d,(a.innerWidth||this.width)*d,(a.innerHeight||this.height)*d)}},{key:"logError",value:function(a){console.log(a)}},{key:"relayout",value:function(){}},{key:"defaultMenuItems",value:function(a){return[]}},{key:"serveFileAsDownload",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:{},f=d.fileName;f=void 0===f?"file.txt":f;d=d.type;d=void 0===d?"text/plain":d;var k=/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+=[a-z\-]+)?)?(;base64)?,[a-z0-9!\$&',\(\)\*\+,;=\-\._~:@\/\?%\s]*\s*$/i,n=a instanceof Blob,p=window.document.createElement("a");p.href=Wg.obj.isString(a)&&a.match(k)?a:window.URL.createObjectURL(n?a:new Blob([a],{type:d}));p.download=f;document.body.appendChild(p);p.click();document.body.removeChild(p)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"World"}},
{key:"properties",get:function(){return{resizePolicy:{doc:"how the world behaves on window size changes 'elastic': resizes to window extent, 'static': leaves its extent unchanged",defaultValue:"elastic",after:["clipMode"],type:"Enum",values:["static","elastic"],set:function(a){this.setProperty("resizePolicy",a);this.clipMode="static"===a?"visible":"hidden";"elastic"==a&&this.execCommand("resize to fit window")}},colorScheme:{derived:!0,get:function(){return window.matchMedia("(prefers-color-scheme: dark)").matches?
"dark":"light"}},showsUserFlap:{defaultValue:!0,set:function(a){var d=this,f=Wg.resource(document.location.href).query().showsUserFlap;"undefined"!==typeof f&&(a=f);this.setProperty("showsUserFlap",a);pd.import("./user-ui-0154f489.js").then(function(k){return k.UserUI[a?"showUserFlap":"hideUserFlap"](d)})}}}}},{key:"defaultWorld",value:function(){return Wg.MorphicEnv["default"]().world}},{key:"loadWorldFromURL",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.defaultWorld();
return Wg.loadWorldFromURL(a,d,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{})}},{key:"loadWorld",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.defaultWorld();return Wg.loadWorld(a,d,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{})}},{key:"loadFromCommit",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.defaultWorld();return Wg.loadWorldFromCommit(a,d,2<arguments.length&&void 0!==arguments[2]?arguments[2]:
{})}},{key:"loadFromDB",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.defaultWorld();return Wg.loadWorldFromDB(a,d,f,3<arguments.length&&void 0!==arguments[3]?arguments[3]:{})}},{key:"loadFromResource",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n,p,q=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=1<q.length&&void 0!==q[1]?q[1]:this.defaultWorld(),p=2<q.length&&void 0!==q[2]?q[2]:{},
r.t0=Wg,r.t1=Wg,r.next=6,f.readJson();case 6:return r.t2=r.sent,r.next=9,r.t1.loadMorphFromSnapshot.call(r.t1,r.t2);case 9:return r.t3=r.sent,r.t4=n,r.t5=p,r.next=14,r.t0.loadWorld.call(r.t0,r.t3,r.t4,r.t5);case 14:return r.abrupt("return",r.sent);case 15:case "end":return r.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()}],c,{pathInPackage:function(){return"./world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:772,end:12558})}(Wg.Morph));Wg.World=Hu;Wg.World=Hu;var fy=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),g=c.hasOwnProperty("Hand")&&"function"===typeof c.Hand?c.Hand:c.Hand=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){ie._get(Object.getPrototypeOf(g.prototype),
Symbol["for"]("lively-instance-initialize"),this).call(this,{pointerId:a})}},{key:"__deserialize__",value:function(a,d,f,k){ie._get(Object.getPrototypeOf(g.prototype),"__deserialize__",this).call(this,a,d,f,k);this.reset()}},{key:"reset",value:function(){this._grabbedMorphProperties=new WeakMap}},{key:"carriesMorphs",value:function(){return!!this.grabbedMorphs.length}},{key:"morphsContainingPoint",value:function(a,d){return d}},{key:"update",value:function(a){this.position=a.position.subXY(window.scrollX,
window.scrollY)}},{key:"cancelGrab",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n,p,q,r,t,w,x,B,D,F,L=arguments;return regeneratorRuntime.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:k=0<L.length&&void 0!==L[0]?L[0]:!0;n=1<L.length?L[1]:void 0;if(this.grabbedMorphs.length){G.next=4;break}return G.abrupt("return");case 4:this.env.eventDispatcher.cancelGrab(this,n),p=[],q=ba(this.grabbedMorphs),G.prev=7,q.s();case 9:if((r=q.n()).done){G.next=20;break}t=r.value;w=this._grabbedMorphProperties.get(t)||
{};x=w.prevOwner;B=w.prevIndex;D=w.prevPosition;F=w.pointerAndShadow;Object.assign(t,F);if(x){G.next=16;break}t.remove();return G.abrupt("continue",18);case 16:x.addMorphAt(t,B),k?p.push(t.animate({position:D})):t.position=D;case 18:G.next=9;break;case 20:G.next=25;break;case 22:G.prev=22,G.t0=G["catch"](7),q.e(G.t0);case 25:return G.prev=25,q.f(),G.finish(25);case 28:return G.abrupt("return",p.length?Promise.all(p):null);case 29:case "end":return G.stop()}},f,this,[[7,22,25,28]])}));return function(){return a.apply(this,
arguments)}}()},{key:"grab",value:function(a){var d=this;if(Wg.obj.isArray(a))return a.forEach(function(f){return d.grab(f)});this.withMetaDo({metaInteraction:!0},function(){d._grabbedMorphProperties.set(a,{prevOwner:a.owner,prevPosition:a.position,prevIndex:a.owner?a.owner.submorphs.indexOf(a):-1,pointerAndShadow:Wg.obj.select(a,["dropShadow","reactsToPointer"])});a.reactsToPointer=!1;a.dropShadow=!0;d.addMorph(a)});Wg.signal(this,"grab",a)}},{key:"dropMorphsOn",value:function(a){var d=this;this.withMetaDo({metaInteraction:!0},
function(){d.grabbedMorphs.forEach(function(f){try{var k=(d._grabbedMorphProperties.get(f)||{}).pointerAndShadow;Object.assign(f,k);Wg.signal(d,"drop",f);f.onBeingDroppedOn(d,a)}catch(n){console.error(n),d.world().showError("Error dropping ".concat(f," onto ").concat(a,":\n").concat(n.stack)),f.owner!==a&&d.world().addMorph(a)}})})}},{key:"findDropTarget",value:function(){var a=this,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.globalPosition,f=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:this.grabbedMorphs,k=2<arguments.length?arguments[2]:void 0;d=this.world().morphsContainingPoint(d);return Wg.arr.sortBy(d,function(n){return[n].concat(hb(n.ownerChain())).find(function(p){return Wg.Path("owner.isWorld").get(p)&&p.hasFixedPosition})?0:1}).find("function"===typeof k?function(n,p){return!a.isAncestorOf(n)&&n.acceptsDrops&&!f.includes(n)&&f.every(function(q){return q.wantsToBeDroppedOn(n)})&&k(n,p)}:function(n){return!a.isAncestorOf(n)&&n.acceptsDrops&&n.ownerChain().every(function(p){return p.visible})&&
f.every(function(p){return p.wantsToBeDroppedOn(n)})})}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Hand"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},fill:{defaultValue:lively.FreezerRuntime?Wg.Color.transparent:Wg.Color.orange},extent:{defaultValue:Wg.pt(1,1)},reactsToPointer:{defaultValue:!1},pointerId:{},isHand:{readOnly:!0,get:function(){return!0}},draggable:{readOnly:!0,get:function(){return!1}},grabbable:{readOnly:!0,get:function(){return!1}},
grabbedMorphs:{readOnly:!0,get:function(){return this.submorphs}},_grabbedMorphProperties:{serialize:!1,initialize:function(){this._grabbedMorphProperties=new WeakMap}}}}}],c,{pathInPackage:function(){return"./world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:12566,end:16838})}(Wg.Morph);Wg.Hand=fy;Wg.Hand=fy;var h7=Object.freeze({__proto__:null,
World:Hu,Hand:fy}),Tk=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/position.js");Tk.comparePosition=WP;Tk.lessPosition=lo;Tk.lessEqPosition=wu;Tk.eqPosition=kp;Tk.minPosition=Tw;Tk.maxPosition=Uw;Tk.comparePosition=WP;Tk.lessPosition=lo;Tk.lessEqPosition=wu;Tk.eqPosition=kp;Tk.minPosition=Tw;Tk.maxPosition=Uw;var sh=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js");sh.lessPosition=lo;sh.lessEqPosition=wu;sh.eqPosition=kp;sh.minPosition=Tw;sh.maxPosition=Uw;
var Rs=Lc("aD",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js"),g=c.hasOwnProperty("Range")&&"function"===typeof c.Range?c.Range:c.Range=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{start:{row:0,column:0},end:{row:0,
column:0}},d=a.start,f=d.row;d=d.column;var k=a.end;a=k.row;k=k.column;if(a<f||a===f&&k<d)d=[f,d,a,k],a=d[0],k=d[1],f=d[2],d=d[3];this.start={row:f,column:d};this.end={row:a,column:k}}},{key:"isRange",get:function(){return!0}},{key:"isEmpty",value:function(){return this.start.row===this.end.row&&this.start.column===this.end.column}},{key:"equals",value:function(a){return a&&a.start&&a.end?sh.eqPosition(this.start,a.start)&&sh.eqPosition(this.end,a.end):!1}},{key:"copy",value:function(){return new sh.Range(this)}},
{key:"toLiteral",value:function(){return{start:this.start,end:this.end}}},{key:"merge",value:function(a){a.isRange||(a=new sh.Range(a));return sh.lessPosition(this.end,a.start)||sh.lessPosition(a.end,this.start)?this:sh.Range.fromPositions(sh.minPosition(this.start,a.start),sh.maxPosition(this.end,a.end))}},{key:"without",value:function(a){a.isRange||(a=new sh.Range(a));var d=sh.Range.compare(this,a);return 0===d?sh.Range.fromPositions(this.start,this.start):5<=Math.abs(d)?this:0>d?sh.Range.fromPositions(this.start,
a.start):sh.Range.fromPositions(a.end,this.end)}},{key:"intersect",value:function(a){a.isRange||(a=new sh.Range(a));var d=sh.Range.compare(this,a),f=0>d?this:a;a=0>d?a:this;switch(Math.abs(d)){case 0:case 1:return new sh.Range(f);case 2:case 3:return new sh.Range(a);case 4:return sh.Range.fromPositions(a.start,f.end);case 5:return sh.Range.at(a.start);case 6:return sh.Range.at(f.end)}}},{key:"subtract",value:function(a){a.isRange||(a=new sh.Range(a));switch(sh.Range.compare(this,a)){case -6:case -5:case 5:case 6:return[new sh.Range(this)];
case -1:case 0:case 2:case 3:return[sh.Range.at(this.start)];case 1:case 4:return[sh.Range.fromPositions(a.end,this.end)];case -4:case -3:return[sh.Range.fromPositions(this.start,a.start)];case -2:return[sh.Range.fromPositions(this.start,a.start),sh.Range.fromPositions(a.end,this.end)]}}},{key:"containsPosition",value:function(a){return sh.lessEqPosition(this.start,a)&&sh.lessEqPosition(a,this.end)}},{key:"toString",value:function(){var a=this.start,d=a.column,f=this.end,k=f.row;f=f.column;return"Range(".concat(a.row,
"/").concat(d," -> ").concat(k,"/").concat(f,")")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Range"}},{key:"sort",value:function(a){return a.sort(sh.Range.compare)}},{key:"compare",value:function(a,d){var f=a.start,k=a.end,n=d.start,p=d.end;return sh.lessPosition(f,n)?sh.lessPosition(k,n)?-6:sh.eqPosition(k,n)?-5:sh.lessPosition(k,p)?-4:sh.eqPosition(k,p)?-3:-2:sh.eqPosition(f,n)?sh.eqPosition(k,p)?0:sh.lessPosition(k,p)?-1:1:-1*sh.Range.compare(d,a)}},{key:"at",value:function(a){return new this({start:a,
end:a})}},{key:"fromPositions",value:function(a,d){return new this({start:a,end:d})}},{key:"create",value:function(a,d,f,k){return new this({start:{row:a,column:d},end:{row:f,column:k}})}},{key:"isValidLiteral",value:function(a){return a?a.isRange?!0:a.start&&a.end&&"number"===typeof a.start.row&&"number"===typeof a.start.column&&"number"===typeof a.end.row&&"number"===typeof a.end.column:!1}}],c,{pathInPackage:function(){return"./text/range.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:107,end:5851})}(void 0));sh.Range=Rs;sh.Range=Rs;var uI=new sh.Range;sh.defaultRange=uI;sh.defaultRange=uI;var jj=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js");jj.lessPosition=lo;jj.Range=Rs;jj.defaultRange=uI;jj.config=al;jj.string=ji;jj.arr=mh;jj.signal=Vl;var vI=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),
g=c.hasOwnProperty("Selection")&&"function"===typeof c.Selection?c.Selection:c.Selection=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d){this.textMorph=a;this.initialize(d)}},{key:"isSelection",get:function(){return!0}},{key:"initialize",value:function(a){this._goalX=this._goalColumn=void 0;this._isReverse=!1;var d=jj.string.newUUID();
this.startAnchor=this.textMorph.addAnchor("selection-start-"+d);this.endAnchor=this.textMorph.addAnchor("selection-end-"+d);this.range=a;this._cursorVisible=!0;this.cursorBlinkProcess=null}},{key:"uninstall",value:function(){this.cursorBlinkStop();this.textMorph.removeAnchor(this.startAnchor);this.textMorph.removeAnchor(this.endAnchor)}},{key:"compareRangesForMerge",value:function(a,d){var f=a.start,k=f.row;f=f.column;var n=a.end,p=n.row;n=n.column;var q=d.start,r=q.row;q=q.column;var t=d.end,w=t.row;
t=t.column;return k<r||k===r&&f<q?p<r||p===r&&n<q?"separate":p===r&&n===q?r===w&&q===t?"overlapping":"bordering":"overlapping":k===r&&f===q?p===w&&n===t?"equal":"overlapping":this.compareRangesForMerge(d,a)}},{key:"mergeWith",value:function(a){if(!a||!a.isSelection)return!1;var d=this.compareRangesForMerge(this.range,a.range);if("separate"===d||"bordering"===d)return!1;this.range=this.range.merge(a.range);a.isReverse()!=this.isReverse()&&this.reverse();return!0}},{key:"range",get:function(){return this._range||
jj.defaultRange}},{key:"range",set:function(a){if(a){var d=a,f=d.start;d=d.end;if(void 0!==f&&void 0!==d){var k=this.textMorph.document;"number"===typeof f&&(a.start=f=k.indexToPosition(f));"number"===typeof d&&(a.end=d=k.indexToPosition(d));if(jj.Range.isValidLiteral(a)){f=k.clipPositionToLines(f);d=k.clipPositionToLines(d);if(this._isReverse=jj.lessPosition(d,f))d=[d,f],f=d[0],d=d[1];a.start=f;a.end=d;a.isRange||(a=new jj.Range(a));a.equals(this._range)||(this._range=a,this._goalColumn=this.textMorph.lineWrapping?
this.textMorph.columnInWrappedLine(this.lead):this.lead.column,this._goalX=this.textMorph.charBoundsFromTextPosition(this.lead).x,this.startAnchor.position=a.start,this.endAnchor.position=a.end,this.textMorph.makeDirty(),jj.signal(this.textMorph,"selectionChange",this))}}}}},{key:"directedRange",get:function(){return{end:this.lead,start:this.anchor}}},{key:"updateFromAnchors",value:function(){this.range={start:this.startAnchor.position,end:this.endAnchor.position}}},{key:"start",get:function(){return this.range.start}},
{key:"start",set:function(a){this.range=jj.Range.fromPositions(a,this.end)}},{key:"end",get:function(){return this.range.end}},{key:"end",set:function(a){this.range=jj.Range.fromPositions(this.start,a)}},{key:"selectionColor",get:function(){return this.textMorph.selectionColor||"#bed8f7"}},{key:"anchor",get:function(){return this.isReverse()?this.range.end:this.range.start}},{key:"anchor",set:function(a){this.range={start:a,end:this.lead}}},{key:"lead",get:function(){return this.isReverse()?this.range.start:
this.range.end}},{key:"lead",set:function(a){this.range={start:this.anchor,end:a}}},{key:"text",get:function(){return this.textMorph.document.textInRange(this.range)}},{key:"text",set:function(a){this.replace(a)}},{key:"replace",value:function(a,d,f,k){var n=this.range,p=this.textMorph,q=this.isReverse();this.range=p.replace(n,a,d,f,k);q&&this.reverse();return this.range}},{key:"selectedRows",get:function(){return{first:this.start.row,last:this.end.row}}},{key:"reverse",value:function(){this._isReverse=
!this.isEmpty()&&!this._isReverse;return this}},{key:"isReverse",value:function(){return this._isReverse&&!this.isEmpty()}},{key:"isEmpty",value:function(){return this.range.isEmpty()}},{key:"collapse",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.start;this.range={start:a,end:a};return this}},{key:"collapseToEnd",value:function(){this.collapse(this.end);return this}},{key:"growLeft",value:function(a){var d=this.textMorph.document,f=d.positionToIndex(this.end);
a=Math.min(f,d.positionToIndex(this.start)-a);f=this.isReverse();this.start=d.indexToPosition(a);this._isReverse=f;return this}},{key:"growRight",value:function(a){var d=this.textMorph.document,f=d.positionToIndex(this.start);a=Math.max(f,d.positionToIndex(this.end)+a);f=this.isReverse();this.end=d.indexToPosition(a);this._isReverse=f;return this}},{key:"selectAll",value:function(){this.range={start:{row:0,column:0},end:this.textMorph.document.endPosition};return this}},{key:"selectLine",value:function(){var a=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.lead.row;this.includingLineEnd=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;this.range={start:{row:a,column:0},end:{row:a,column:this.textMorph.getLine(a).length}};return this}},{key:"gotoLineEnd",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.lead.row;a={row:a,column:this.textMorph.getLine(a).length};this.range={start:a,end:a}}},{key:"selectLeft",value:function(){var a=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:1;this.isEmpty()?(this.growLeft(a),this.reverse()):this.isReverse()?this.growLeft(a):this.growRight(-a);return this}},{key:"selectRight",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.isReverse()?this.growLeft(-a):this.growRight(a);return this}},{key:"selectUp",value:function(){return this.goUp(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,1<arguments.length?arguments[1]:void 0,!0)}},{key:"selectDown",value:function(){return this.selectUp(-(0<
arguments.length&&void 0!==arguments[0]?arguments[0]:1),1<arguments.length?arguments[1]:void 0)}},{key:"goUp",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;if(0===a)return this;var f=this._goalColumn,k=this._goalX;this.lead=this.textMorph.getPositionAboveOrBelow(a,this.lead,1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,f,k);d||(this.anchor=this.lead);this._goalColumn=f;this._goalX=k;return this}},
{key:"goDown",value:function(){return this.goUp(-(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1),1<arguments.length?arguments[1]:void 0)}},{key:"goLeft",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.isEmpty()&&this.growLeft(a);this.collapse();return this}},{key:"goRight",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.isEmpty()&&this.growRight(a);this.collapseToEnd();return this}},{key:"cursorVisible",get:function(){return this._cursorVisible&&
this.textMorph.isFocused()&&!this.textMorph.rejectsInput()}},{key:"cursorBlinkStart",value:function(){var a=this;this.cursorBlinkStop();var d=jj.config.text.cursorBlinkPeriod;if(d){var f=this.textMorph,k=f.env.renderer.getNodeForMorph(f);this.cursorBlinkProcess=setInterval(function(){k||(k=f.env.renderer.getNodeForMorph(f));if(k){a._cursorVisible=!a._cursorVisible;var n=k.className.split(" "),p=n.indexOf("hidden-cursor");a._cursorVisible&&-1<p&&(n.splice(p,1),k.className=n.join(" "));a._cursorVisible||
-1!==p||(k.className=[].concat(hb(n),["hidden-cursor"]).join(" "))}},1E3*d)}}},{key:"cursorBlinkStop",value:function(){this.cursorBlinkProcess&&clearInterval(this.cursorBlinkProcess);this.cursorBlinkProcess=null;this._cursorVisible=!0;var a=this.textMorph;if(a=a.env.renderer.getNodeForMorph(a)){var d=a.className.split(" "),f=d.indexOf("hidden-cursor");-1<f&&(d.splice(f,1),a.className=d.join(" "))}}},{key:"toString",value:function(){var a=this.anchor,d=a.column,f=this.lead,k=f.row;f=f.column;return"Selection(".concat(a.row,
"/").concat(d," -> ").concat(k,"/").concat(f,")")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Selection"}}],c,{pathInPackage:function(){return"./text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:223,end:9746})}(void 0);jj.Selection=vI;jj.Selection=vI;var wI=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),
g=c.hasOwnProperty("MultiSelection")&&"function"===typeof c.MultiSelection?c.MultiSelection:c.MultiSelection=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:"initialize",value:function(a){this._selections=[new jj.Selection(this.textMorph,a)]}},{key:"__deserialize__",value:function(a,d){this._selections=[]}},{key:"selections",get:function(){return this._selections}},{key:"selections",
set:function(a){var d=this._selections?this._selections.filter(function(f){return!a.includes(f)}):[];this._selections=a;d.forEach(function(f){return f.uninstall()})}},{key:"isMultiSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.selections.forEach(function(a){return a.uninstall()})}},{key:"defaultSelection",get:function(){return jj.arr.last(this.selections)}},{key:"removeSelections",value:function(){var a=this.selections.slice(0<arguments.length&&void 0!==arguments[0]?arguments[0]:
1);a.forEach(function(d){return d.uninstall()});this.selections=jj.arr.withoutAll(this.selections,a)}},{key:"disableMultiSelect",value:function(){jj.arr.without(this.selections,this.defaultSelection).forEach(function(a){return a.uninstall()});this.selections=[this.defaultSelection]}},{key:"range",get:function(){return this.defaultSelection.range}},{key:"range",set:function(a){this.disableMultiSelect();this.defaultSelection.range=a}},{key:"updateFromAnchors",value:function(){this.selections.forEach(function(a){return a.updateFromAnchors()})}},
{key:"start",get:function(){return this.defaultSelection.start}},{key:"start",set:function(a){this.defaultSelection.start=a}},{key:"end",get:function(){return this.defaultSelection.end}},{key:"end",set:function(a){this.defaultSelection.end=a}},{key:"anchor",get:function(){return this.defaultSelection.anchor}},{key:"anchor",set:function(a){this.defaultSelection.anchor=a}},{key:"lead",get:function(){return this.defaultSelection.lead}},{key:"lead",set:function(a){this.defaultSelection.lead=a}},{key:"text",
get:function(){return this.selections.map(function(a){return a.text}).join("\n")}},{key:"text",set:function(a){this.selections.forEach(function(d){return d.text=a})}},{key:"selectedRows",get:function(){return this.defaultSelection.selectedRows}},{key:"reverse",value:function(){this.defaultSelection.reverse()}},{key:"isReverse",value:function(){return this.defaultSelection.isReverse()}},{key:"isEmpty",value:function(){return this.defaultSelection.isEmpty()}},{key:"collapse",value:function(a){this.defaultSelection.collapse(a);
return this}},{key:"collapseToEnd",value:function(){this.defaultSelection.collapseToEnd();return this}},{key:"growLeft",value:function(a){this.defaultSelection.growLeft(a);return this}},{key:"growRight",value:function(a){this.defaultSelection.growRight(a);return this}},{key:"selectAll",value:function(){this.disableMultiSelect();this.defaultSelection.selectAll();return this}},{key:"selectLine",value:function(a,d){this.includingLineEnd=d;this.defaultSelection.selectLine(a,d);return this}},{key:"gotoLineEnd",
value:function(a){this.defaultSelection.gotoLineEnd(a)}},{key:"selectLeft",value:function(a){this.defaultSelection.selectLeft(a);return this}},{key:"selectRight",value:function(a){this.defaultSelection.selectRight(a);return this}},{key:"selectUp",value:function(a,d){this.defaultSelection.selectUp(a,d);return this}},{key:"selectDown",value:function(a,d){this.defaultSelection.selectDown(a,d);return this}},{key:"goUp",value:function(a,d){return this.defaultSelection.goUp(a,d)}},{key:"goDown",value:function(a,
d){return this.defaultSelection.goDown(a,d)}},{key:"goLeft",value:function(a){return this.defaultSelection.goLeft(a)}},{key:"goRight",value:function(a){return this.defaultSelection.goRight(a)}},{key:"cursorVisible",get:function(){return this.defaultSelection.cursorVisible}},{key:"style",set:function(a){this.defaultSelection.style=a}},{key:"getTextAttributes",value:function(){return this.defaultSelection.getTextAttributes()}},{key:"toString",value:function(){return"MultiSelection(".concat(this.selections.join(", "),
")")}},{key:"mergeSelections",value:function(){for(var a=this.selections.slice(),d=a.length-1;0<=d;d--)for(var f=a.length-1;0<=f;f--)if(d!==f&&a[f].mergeWith(a[d])){a.splice(d,1);break}this.selections=a}},{key:"ranges",get:function(){return this.selections.map(function(a){return a.range})}},{key:"ranges",set:function(a){for(var d=0;d<a.length;d++){var f=this.selections[d];f?f.range=a[d]:this.addRange(a[d],!1)}this.removeSelections(d);this.mergeSelections()}},{key:"addRange",value:function(a){var d=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;this.selections.push(new jj.Selection(this.textMorph,a));d&&this.mergeSelections();return jj.arr.last(this.selections).range}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MultiSelection"}}],c,{pathInPackage:function(){return"./text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:9754,end:14658})}(jj.Selection);jj.MultiSelection=wI;jj.MultiSelection=wI;var gi=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/attributes.js");gi.shallowEquals=XP;gi.concatAttributePair=MF;gi.joinTextAttributes=NF;gi.splitTextAndAttributesAt=OF;gi.splitTextAndAttributesAtColumns=PF;gi.concatTextAndAttributes=QF;gi.modifyAttributesInRange=RF;gi.textAndAttributesWithSubRanges=SF;gi.textAndAttributesDo=function(b,c){for(var g=0;g<b.length;g+=2)c(b[g],b[g+1])};
gi.splitTextAndAttributesIntoLines=Vw;gi.eqPosition=kp;gi.lessPosition=lo;gi.shallowEquals=XP;gi.concatAttributePair=MF;gi.joinTextAttributes=NF;gi.splitTextAndAttributesAt=OF;gi.splitTextAndAttributesAtColumns=PF;gi.concatTextAndAttributes=QF;gi.modifyAttributesInRange=RF;gi.textAndAttributesWithSubRanges=SF;gi.splitTextAndAttributesIntoLines=Vw;var cf=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js");cf.arr=mh;cf.num=Yk;cf.string=ji;cf.lessEqPosition=wu;cf.minPosition=
Tw;cf.maxPosition=Uw;cf.lessPosition=lo;cf.eqPosition=kp;cf.concatTextAndAttributes=QF;cf.splitTextAndAttributesAtColumns=PF;cf.splitTextAndAttributesIntoLines=Vw;cf.joinTextAttributes=NF;cf.modifyAttributesInRange=RF;cf.concatAttributePair=MF;cf.splitTextAndAttributesAt=OF;var AB=Lc("b_","\ufffd");cf.objectReplacementChar=AB;cf.objectReplacementChar=AB;cf.defaultOptions={maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5};(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),
g=c.hasOwnProperty("TreeNode")&&"function"===typeof c.TreeNode?c.TreeNode:c.TreeNode=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){this.parent=a}},{key:"root",get:function(){return this.parent?this.parent.root:this}},{key:"isRoot",get:function(){return!this.parent}},{key:"withParents",value:function(){for(var a=this,d=
[];a;)d.push(a),a=a.parent;return d}},{key:"traverse",value:function(a){var d=[a.call(null,this)];if(this.isLeaf)return d;for(var f=0;f<this.children.length;f++)d.push.apply(d,hb(this.children[f].traverse(a)));return d}},{key:"consistencyCheck",value:function(){var a=[],d=this.isRoot,f=this.isLeaf,k=this.children,n=this.size,p=this.stringSize,q=this.height,r=this.width,t=this.options,w=t.maxLeafSize,x=t.maxNodeSize,B=t.minLeafSize;t=t.minNodeSize;d||0!==n||a.push({error:"size of ".concat(this," expected to be > 0!")});
if(!Array.isArray(k))return a.push({error:"".concat(this,".children is not an array but ").concat(k)}),a;var D=cf.arr.sum(cf.arr.pluck(k,"size"));D!=n&&a.push({error:"Sum of child sizes is not size of ".concat(this,": ").concat(D," != ").concat(n)});n=cf.arr.sum(cf.arr.pluck(k,"stringSize"));n!=p&&a.push({error:"Sum of child stringSize is not stringSIze of ".concat(this,": ").concat(n," != ").concat(p)});p=cf.arr.sum(cf.arr.pluck(k,"height"));Number.parseInt(p)!=Number.parseInt(q)&&a.push({error:"Sum of child Height is not Height of ".concat(this,
": ").concat(p," != ").concat(q)});q=k.length?Math.max.apply(null,cf.arr.pluck(k,"width")):0;(k.find(function(F){return F.isLine&&F.hasEstimatedExtent})?Number.parseInt(q)>Number.parseInt(r):Number.parseInt(q)!=Number.parseInt(r))&&a.push({error:"max width of children of ".concat(this," is not node width: ").concat(q," != ").concat(r)});r=f?w:x;B=f?B:t;!d&&k.length>r&&a.push({error:"children count of ".concat(this," expected to be between ").concat(B," and ").concat(r," but is ").concat(k.length)});
for(d=0;d<k.length;d++)(B=k[d])?(f&&!B.isLine?a.push({error:"child ".concat(d," of leaf ").concat(this," is not a line!")}):!f&&B.isLine&&a.push({error:"child of non-leaf ".concat(this," is a line!")}),this!==B.parent&&a.push({error:"child.parent is ".concat(B.parent," but should be ").concat(this)})):a.push({error:"child ".concat(d," of ").concat(this," is nullish!")});a.push.apply(a,hb(k.flatMap(function(F){return F.consistencyCheck()}).filter(Boolean)));return a}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"TreeNode"}}],c,{pathInPackage:function(){return"./text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1395,end:4948})})(void 0);(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),g=c.hasOwnProperty("InnerTreeNode")&&"function"===typeof c.InnerTreeNode?
c.InnerTreeNode:c.InnerTreeNode=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){ie._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,a.parent);this.options=a.options;this.children=a.children;this.size=a.size;this.stringSize=a.stringSize;this.height=a.height;this.width=a.width;
this.isLeaf=!0}},{key:"isNode",get:function(){return!0}},{key:"resize",value:function(a,d,f){this.size+=a;this.height+=d;this.stringSize+=f;for(var k=0,n=0;n<this.children.length;n++){var p=this.children[n].width;p>k&&(k=p)}this.width=k;this.parent&&this.parent.resize(a,d,f)}},{key:"lines",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(this.isLeaf)return a.push.apply(a,hb(this.children)),a;for(var d=0;d<this.children.length;d++)this.children[d].lines(a);return a}},
{key:"findRow",value:function(a){if(0>a||a>=this.size)return null;if(this.isLeaf)return this.children[a];for(var d=0;d<this.children.length;d++){var f=this.children[d],k=f.size;if(a<k)return f.findRow(a);a-=k}return null}},{key:"findLineByVerticalOffset",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(0>a||a>this.height)return null;for(var k=0;k<this.children.length;k++){var n=this.children[k],p=n.height;
if(a<=p)return this.isLeaf?{line:n,offset:a,y:d,row:f}:n.findLineByVerticalOffset(a,d,f);a-=p;d+=p;f+=n.size}return null}},{key:"computeVerticalOffsetOf",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(0>a||a>=this.size)return console.warn("strange row in computeVerticalOffsetOf: ".concat(a)),d;if(this.isLeaf){for(var f=0;f<Math.min(a,this.children.length);f++)d+=this.children[f].height;return d}for(f=0;f<this.children.length;f++){var k=this.children[f],n=k.size;
if(a<n)return k.computeVerticalOffsetOf(a,d);a-=n;d+=k.height}return d}},{key:"ensureLine",value:function(a){a||(a="");var d="string"===typeof a;return!d&&a.isLine?(a.parent=this,a):new cf.Line({parent:this,width:d?0:a.width||0,height:d?0:a.height||0,textAndAttributes:d?[a,null]:a.textAndAttributes||[a.text||"",null]})}},{key:"insert",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.size,f=this.children,k=this.options;if(this.isLeaf){var n=[],p=0,q=0;for(k=0;k<a.length;k++){var r=
this.ensureLine(a[k]);n.push(r);p+=r.height;q+=r.stringSize;f.splice(d++,0,r)}this.resize(n.length,p,q);this.balanceAfterGrowth();return n}0===f.length&&f.push(new cf.InnerTreeNode({parent:this,children:[],size:0,stringSize:0,width:0,height:0,options:k}));for(k=0;k<f.length;k++){n=f[k];p=n.size;if(d<=p)return n.insert(a,d);d-=p}d=f[k-1];return d.insert(a,d.size)}},{key:"withParentChainsUpToCommonParentDo",value:function(a,d,f){for(var k=this.withParents(),n,p=0;a;){if(k.includes(a)){n=a;break}d(a,
p++);a=a.parent}d=k.indexOf(n);0>d&&(d=k.length);k=k.slice(0,d);for(d=0;d<k.length;d++)f(k[d],d)}},{key:"findLineWithTextIndex",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(this.isLeaf){for(var f=0;f<this.children.length;f++){var k=this.children[f],n=k.stringSize;if(a<n)return{line:k,column:a,row:d};a-=n;d++}f=cf.arr.last(this.children);return{line:f,row:d-1,column:f.stringSize-1}}for(k=f=0;k<this.children.length;k++){n=this.children[k];var p=n.stringSize;if(a<
f+p)return n.findLineWithTextIndex(a-f,d);d+=n.size;f+=p}return cf.arr.last(this.children).findLineWithTextIndex(a-f)}},{key:"findLeafs",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(a>f+this.size||d<f)return[];if(this.isLeaf){var k=Math.max(0,a-f),n=this.children.length-1;f=Math.min(n,d-f);var p=!1;0===k&&f===n&&(p=!0,f=n);return[{node:this,firstLine:k,lastLine:f,full:p}]}k=[];for(n=0;n<this.children.length;n++)p=this.children[n],k.push.apply(k,hb(p.findLeafs(a,
d,f))),f+=p.size;return k}},{key:"removeFromToInRoot",value:function(a,d,f){var k=this;if(!this.isRoot)throw Error("removeFromTo() should be called on the root node");a>d&&(d=[d,a],a=d[0],d=d[1]);var n=this.size,p=this.options;p.maxLeafSize;var q=p.minLeafSize,r=this.findLeafs(a,d),t=r.shift();d=r.pop();p=[];var w=!1,x=!1;if(!(a>=n)){d&&t.node===d.node&&(d=null);t.full?(f&&f.log("Removing complete first line ".concat(t)),r.push(t)):w=t.node.children.length-(t.lastLine-t.firstLine+1)<q;d&&(d.full?
(f&&f.log("Removing complete last line ".concat(d)),r.push(d)):(x=d,x=x.node.children.length-(x.lastLine-x.firstLine+1)<q));if(w||x){var B=(B=t.node.children[0].prevLine())?B.parent:null;var D=(D=cf.arr.last(d?d.node.children:t.node.children).nextLine())?D.parent:null}for(a=0;a<r.length;a++){n=r[a].node;q=n.children.length;for(var F=0,L=0,G=0;G<q;G++){var oa=n.children[G];F+=oa.height;L+=oa.stringSize;oa.parent=null}n.children.length=0;n.resize(-q,-F,-L);if(q=n.parent)n.parent=null,q.children.splice(q.children.indexOf(n),
1),p.includes(q)||p.push(q)}if(!t.full){a=t.lastLine;n=t.firstLine;r=t.node;q=r.children;r.options;a=a-n+1;n=q.splice(n,a);for(L=F=q=0;L<n.length;L++)G=n[L],q+=G.height,F+=G.stringSize,G.parent=null;r.resize(-a,-q,-F)}if(d&&!d.full){a=d;n=a.firstLine;r=a.node;a=a.lastLine-n+1;n=r.children.splice(n,a);for(L=F=q=0;L<n.length;L++)G=n[L],q+=G.height,F+=G.stringSize,G.parent=null;r.resize(-a,-q,-F)}f&&f.dump("".concat(this.print(!1)));w&&t.node.balanceByMergeOrTheft(B,!d||d.full?D:d.node,f);d&&x&&d.node.root===
this&&(x=!0,B=t.full||!t.node.parent?B:t.node,w&&(d.node.root!==this&&(x=!1),B&&B.root!==this&&(B=null),D&&D.root!==this&&(D=null)),x&&d.node.balanceByMergeOrTheft(B,D,f));p.forEach(function(ha){return ha.root===k&&ha.balanceAfterShrink(f)})}}},{key:"balanceByMergeOrTheft",value:function(a,d,f){var k=this,n=this.children,p=this.options,q=this.isLeaf,r=q?p.maxLeafSize:p.maxNodeSize;p=q?p.minLeafSize:p.minNodeSize;n.length<p;q=a&&a.children.length+n.length<=r;r=!q&&d&&d.children.length+n.length<=r;
var t=q?a:r?d:null;if(t){var w,x;f&&f.log("[balanceByMergeOrTheft] merging ".concat(this," ").concat(q?"left":"right"," into ").concat(t));var B=this.size,D=this.width,F=this.height,L=this.stringSize;n.forEach(function(Ya){return Ya.parent=t});q?(w=t.children).push.apply(w,hb(n)):(x=t.children).unshift.apply(x,hb(n));this.width=n.length=0;this.withParentChainsUpToCommonParentDo(t,function(Ya){D>Ya.width&&(Ya.width=D);Ya.height+=F;Ya.size+=B;Ya.stringSize+=L},function(Ya){if(D===Ya.width)for(var xa=
0;xa<Ya.children.length;xa++){var tc=Ya.children[xa];tc.width>Ya.width&&(Ya.width=tc.width)}Ya.height-=F;Ya.size-=B;Ya.stringSize-=L})}else if(r=a?Math.ceil((a.children.length-p)/2):0,p=d?Math.ceil((d.children.length-p)/2):0,(w=0<r&&r>=p)||!w&&0<p){var G,oa;x=w?a.children.splice(a.children.length-r,r):d.children.splice(0,p);var ha=w?a:d,Ha=w?r:p,Va=0,hc=0,qc=0,jc=0;f&&f.log("[balanceByMergeOrTheft] ".concat(this," steals from ").concat(w?"left":"right"," node ").concat(ha," ").concat(Ha," nodes"));
for(a=0;a<x.length;a++)Va+=x[a].height,hc+=x[a].stringSize,qc=Math.max(qc,x[a].width);for(a=0;a<ha.children.length;a++)jc=Math.max(jc,ha.children[a].width);this.withParentChainsUpToCommonParentDo(ha,function(Ya){if(jc<qc&&jc<Ya.width){if(Ya===ha)Ya.width=jc;else{for(var xa=!1,tc=0;tc<Ya.children.length;tc++)if(Ya.children[tc].width>jc){xa=!0;break}xa||(Ya.width=jc)}Ya.width=qc}Ya.height-=Va;Ya.size-=Ha;Ya.stringSize-=hc},function(Ya){Ya.width<qc&&(Ya.width=qc);Ya.height+=Va;Ya.size+=Ha;Ya.stringSize+=
hc});x.forEach(function(Ya){return Ya.parent=k});w?(G=this.children).unshift.apply(G,hb(x)):(oa=this.children).push.apply(oa,hb(x))}G=this.parent;0===n.length&&(this.parent=null,G&&G.children.splice(G.children.indexOf(this),1));G&&G.balanceAfterShrink(f)}},{key:"balanceAfterGrowth",value:function(){var a=this.isLeaf,d=this.size,f=this.stringSize,k=this.parent,n=this.children,p=this.width,q=this.height,r=this.options,t=a?r.maxLeafSize:r.maxNodeSize;if(n.length>t){k||(k=this.parent=new cf.InnerTreeNode({parent:null,
children:[this],size:d,width:p,height:q,stringSize:f,options:r}),k.isLeaf=!1);var w=Math.floor(n.length/2),x=0,B=0,D=d=0,F=f=0,L=p=0;for(q=0;x<w;x++)B+=n[x].size,D=Math.max(D,n[x].width),F+=n[x].height,L+=n[x].stringSize;for(;x<n.length;x++)d+=n[x].size,f=Math.max(f,n[x].width),p+=n[x].height,q+=n[x].stringSize;this.children=n.slice(0,w);this.size=B;this.width=D;this.height=F;this.stringSize=L;x=k.children.indexOf(this);n=n.slice(w);var G=new cf.InnerTreeNode({parent:k,children:n,size:d,height:p,
width:f,stringSize:q,options:r});G.isLeaf=a;n.forEach(function(oa){return oa.parent=G});k.children.splice(x+1,0,G);G.children.length>t&&G.balanceAfterGrowth();this.children.length>t&&this.balanceAfterGrowth();this.parent.balanceAfterGrowth()}}},{key:"balanceAfterShrink",value:function(a){var d=this,f=this.isLeaf,k=this.parent,n=this.children,p=this.options,q=p.maxLeafSize,r=p.maxNodeSize,t=p.minLeafSize,w=p.minNodeSize;p=f?q:r;t=f?t:w;w=!1;for(var x=n.length;x--;)0===n[x].size&&(n.splice(x,1),w=!0,
a&&a.log("[balanceAfterShrink] ".concat(this," removes node ").concat(x," b/c it is empty, remaining children: ").concat(n.length," (min: ").concat(t,", max: ").concat(p,")")));w&&a&&a.dump("".concat(this.root.print(!1)));if(n.length>=t)k&&k.balanceAfterShrink(a);else if(0===n.length)k&&k.balanceAfterShrink(a);else if(f){if(k)if(1===k.children.length){var B;a&&a.log("[balanceAfterShrink] ".concat(this," is the only child - will remove it's parent and take its position"));a&&a.dump("".concat(this.root.print(!1)));
this.parent=null;k.children.length=0;(B=k.children).push.apply(B,hb(n));n.forEach(function(D){return D.parent=k});k.isLeaf=!0}else q=(q=n[0].prevLine())&&q.parent,n=cf.arr.last(n).nextLine(),this.balanceByMergeOrTheft(q,n&&n.parent,a);this.parent&&this.parent.balanceAfterShrink(a)}else{f=[];B=t=p=!1;for(w=0;w<n.length;w++){x=n[w];!p&&x.isLeaf&&(p=!0);t||x.isLeaf||(t=!0);if(p&&t){B=!0;break}f.push.apply(f,hb(x.children))}!B&&f.length<=(p?q:r)&&(a&&a.log("[balanceAfterShrink] ".concat(this," grandChildren.length is ").concat(f.length,
" and <= max size so it is removing all its children and adopting their children")),n.forEach(function(D){return D.parent=null}),f.forEach(function(D){return D.parent=d}),n.length=0,n.push.apply(n,f),this.isLeaf=p,a&&a.log("[balanceAfterShrink] ".concat(n.join("\n"))),a&&a.dump("".concat(this.root.print(!1))));k&&k.balanceAfterShrink(a)}}},{key:"print",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,f=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:0,k=this.isLeaf,n=this.size,p=this.stringSize,q=this.width,r=this.height,t=this.children;k=(3<arguments.length?arguments[3]:void 0)||(k?"leaf":"node");var w=" ".repeat(f);p="".concat(w).concat(k," (size: ").concat(n," width: ").concat(Math.round(q)," height: ").concat(Math.round(r)," text length: ").concat(p,")");if(t.length){q="";d+=n;for(n=t.length;n--;)r=t[n],d-=r.size,q="\n"+r.print(a,d,f+1)+q;p+=q}return p}},{key:"toString",value:function(){var a=this.isLeaf,
d=this.size,f=this.width,k=this.height,n=this.children;return"node (".concat(a?"leaf, ":"")+"".concat(a&&n.length?"rows: ".concat(n[0].row,"-").concat(cf.arr.last(n).row," "):"")+"size: ".concat(d," ").concat(f,"x").concat(k,")")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"InnerTreeNode"}}],c,{pathInPackage:function(){return"./text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4950,end:30225})})(cf.TreeNode);var pV=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),g=c.hasOwnProperty("Line")&&"function"===typeof c.Line?c.Line:c.Line=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){ie._get(Object.getPrototypeOf(g.prototype),
Symbol["for"]("lively-instance-initialize"),this).call(this,a.parent);this.textAndAttributes=cf.joinTextAttributes(a.textAndAttributes||[]);this._text="";this._textAttributes=null;this.width=a.width;this.height=a.height;this.hasEstimatedExtent=!1;this.modeState=null;this.textAlign="left";this.lineHeight=null;this.marginBottom=this.marginTop=0}},{key:"isLine",get:function(){return!0}},{key:"size",get:function(){return 1}},{key:"stringSize",get:function(){return this.text.length+1}},{key:"text",get:function(){if(this._text)return this._text;
for(var a="",d=this.textAndAttributes,f=0;f<d.length;f+=2)a+="string"===typeof d[f]?d[f]:cf.objectReplacementChar;return this._text=a}},{key:"textAttributes",get:function(){if(this._textAttributes)return this._textAttributes;for(var a=[],d=this.textAndAttributes,f=0;f<d.length;f+=2){var k=d[f+1];k&&!a.includes(k)&&a.push(k)}return this._textAttributes=a}},{key:"row",get:function(){if(!this.parent)return 0;var a=this.withParents();if(1===a.length)return a.children.indexOf(this);for(var d=0,f=a.length-
1;1<=f;f--)for(var k=a[f],n=k.children.indexOf(a[f-1]),p=0;p<n;p++)d+=k.children[p].size;return d}},{key:"nextLine",value:function(){var a=this.parent;return a?(a=a.children[a.children.indexOf(this)+1])?a:this.root.findRow(this.row+1):null}},{key:"prevLine",value:function(){var a=this.parent;return a?(a=a.children[a.children.indexOf(this)-1])?a:this.root.findRow(this.row-1):null}},{key:"changeExtent",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,k=this.height,
n=this.width,p=this.parent;this.width=a;this.height=d;this.hasEstimatedExtent=f;if(n!==a||k!==d)for(f=d-k;p;){p.height+=f;if(a>=p.width)p.width=a;else if(n===p.width){for(var q=k=0;q<p.children.length;q++){var r=p.children[q].width;r>k&&(k=r)}p.width=k}p=p.parent}return this}},{key:"changeText",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,f=this.parent,k=this.height,n=a.length+1-(this.text.length+1),p=0;this.modeState&&this.modeState._string!==a&&(this.modeState=
null);this.height||this.width?this.hasEstimatedExtent=!0:(this.width=this.height=0,this.hasEstimatedExtent=!1,p=-k);this._text=a;this._textAttributes=null;this.textAndAttributes=d||(d=[a,null]);if(0!==d.length%2)throw Error("textAndAttributes list is strange, expected flat pairs of text/attr");for(k=0;k<d.length;k+=2){d[k];var q=d[k+1];if(q&&Array.isArray(q))throw Error("invalid attr part of text/attr pair, its an array: "+q);}for(;f;){f.stringSize+=n;f.height+=p;for(k=d=0;k<f.children.length;k++)q=
f.children[k].width,q>d&&(d=q);f.width=d;f=f.parent}return this}},{key:"changeTextAndAttributes",value:function(a){a=cf.joinTextAttributes(a);for(var d="",f=0;f<a.length;f+=2)d+="string"===typeof a[f]?a[f]:cf.objectReplacementChar;return this.changeText(d,a)}},{key:"print",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,f=" ".repeat(2<arguments.length&&void 0!==arguments[2]?arguments[2]:0),k=this.width,n=this.height,
p=this.stringSize,q=this.textAndAttributes;d="".concat(f,"line ").concat(d," (size: 1 width: ").concat(Math.round(k)," height: ").concat(Math.round(n)," text length: ").concat(p);q=cf.arr.toTuples(q,2).map(function(r){var t=Nb(r,2);r=t[0];t=t[1];return("string"===typeof r?'"'.concat(r,'"'):String(r))+",".concat(JSON.stringify(t))}).join(",");return d+(a?")":" content: [".concat(q,"])"))}},{key:"toString",value:function(){var a=this.width,d=this.height;return'line ("'.concat(cf.string.truncate(this._text,
30),'", ').concat(a,"x").concat(d,")")}},{key:"consistencyCheck",value:function(){var a=[];if(!this.parent)return a.push("line ".concat(this," has no parent!")),a}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Line"}}],c,{pathInPackage:function(){return"./text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:30234,end:36897})}(cf.TreeNode);cf.Line=pV;cf.Line=pV;cf.documentFuzzier={makeString:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:5,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:50,g=cf.arr.range(65,90).map(function(a){return String.fromCharCode(a)}).join("");g+=g.toLowerCase()+" \n";b=cf.num.random(b,c);return cf.arr.shuffle(Array.from(g.repeat(Math.ceil(b/g.length)))).slice(0,b).join("")},randomDocPosition:function(b){var c=0===b.rowCount?0:cf.num.random(0,
b.rowCount-1);b=cf.num.random(0,b.getLineString(c).length-1);return{row:c,column:b}},insertRandom:function(b,c,g,a){g=[this.makeString(g,a),null];a=this.randomDocPosition(b);c.push(["insertTextAndAttributes",g,a]);b.insertTextAndAttributes(g,a)},deleteRandom:function(b,c,g,a){g={start:this.randomDocPosition(b),end:this.randomDocPosition(b)};c.push(["remove",g]);b.remove(g)},maybe:function(){return.5>Math.random()},replay:function(b,c){var g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,
a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;g&&(b.debug=g,g=b.debugHelper(),g.reset());var d=new cf.Document([""]);c.forEach(function(f,k){var n=bc(f);f=n[0];n=n.slice(1);if(a&&k==c.length-1)debugger;d[f].apply(d,hb(n).concat([g]))});b.changeDocument(d)},run:function(){var b=Date.now(),c=0,g=new cf.Document([],{maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5}),a=[];try{for(;1E4>g.stringSize&&1E4>c++;)this.maybe()?this.deleteRandom(g,a):this.insertRandom(g,
a),g.consistencyCheck()}catch(f){var d=f}b=Date.now()-b;return{error:d,doc:g,actions:a,time:b}}};cf.newline="\n";cf.newlineLength=1;var qV=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),g=c.hasOwnProperty("Document")&&"function"===typeof c.Document?c.Document:c.Document=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),
value:function(a,d){this.options=Object.assign({},cf.defaultOptions,{},d);this.lines=a}},{key:"balance",value:function(){this.root.balanceAfterGrowth();this.fixRoot()}},{key:"fixRoot",value:function(){var a=this.root.root;this.root!==a&&(this.root=a)}},{key:"height",get:function(){return this.root.height}},{key:"width",get:function(){return this.root.width}},{key:"rowCount",get:function(){return this.root.size}},{key:"stringSize",get:function(){return 0===this.rowCount?0:this.root.stringSize-1}},
{key:"lineStrings",get:function(){return this.lines.map(function(a){return a.text})}},{key:"lines",get:function(){return this.root.lines()}},{key:"lines",set:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];this.root=new cf.InnerTreeNode({parent:null,children:[],size:0,width:0,height:0,stringSize:0,options:this.options});this.insertLines(a)}},{key:"clipRow",value:function(a){return Math.max(0,Math.min(a,this.rowCount-1))}},{key:"clipPositionToLines",value:function(a){var d=
a.row;a=a.column;var f=this.rowCount;if(0===f)return{row:0,column:0};0>d?d=0:d>=f&&(d=f-1,a=Infinity);0>a?a=0:(f=this.getLineString(d).length,a>f&&(a=f));return{row:d,column:a}}},{key:"findLineByVerticalOffset",value:function(a){return this.root.findLineByVerticalOffset(a)}},{key:"computeVerticalOffsetOf",value:function(a){return this.root.computeVerticalOffsetOf(a)}},{key:"getLine",value:function(a){return this.root.findRow(this.clipRow(a))}},{key:"getLineString",value:function(a){return(a=this.getLine(a))?
a.text:""}},{key:"insertLine",value:function(a){return this.insertLines([a],1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.root.rowCount)[0]}},{key:"removeLine",value:function(a){this.root.removeFromToInRoot(a,a)}},{key:"removeLines",value:function(a,d,f){this.root.removeFromToInRoot(a,d,f)}},{key:"insertLines",value:function(a,d){a=this.root.insert(a,d);this.fixRoot();return a}},{key:"textString",get:function(){var a="",d=this.lines;if(!d.length)return a;for(var f=0;f<d.length-1;f++)a=
a+d[f].text+cf.newline;return a+=d[f].text}},{key:"textString",set:function(a){this.lines=a.split(cf.newline)}},{key:"endPosition",get:function(){var a=this.rowCount;if(0===a)return{row:0,column:0};--a;var d=this.getLine(a);return{row:a,column:d.stringSize-1}}},{key:"textAndAttributes",get:function(){var a=this.lines;if(!a.length)return[];for(var d=cf.newline,f=a.length-1,k=a[0].textAndAttributes.slice(),n=1;n<=f;n++){var p=a[n],q=k.pop()||null,r=k.pop()||"";p=p.textAndAttributes;k.push.apply(k,hb(cf.concatAttributePair(r,
q,p[0]||"",p[1]||null,d)));for(q=2;q<p.length;q+=2)k.push(p[q],p[q+1])}return k}},{key:"textAndAttributes",set:function(a){this.lines=cf.splitTextAndAttributesIntoLines(a,cf.newline).map(function(d){return new cf.Line({parent:null,width:0,height:0,textAndAttributes:d})})}},{key:"getTextAndAttributesOfLine",value:function(a){return this.getLine(a).textAndAttributes}},{key:"setTextAndAttributesOfLine",value:function(a,d){this.getLine(a).changeTextAndAttributes(d);return d}},{key:"mixinTextAttribute",
value:function(a,d){cf.modifyAttributesInRange(this,d,function(f,k){f._textAttributes=null;return Object.assign({},k,a)})}},{key:"setTextAttribute",value:function(a,d){cf.modifyAttributesInRange(this,d,function(f,k){f._textAttributes=null;return a})}},{key:"mixoutTextAttribute",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{start:{row:0,column:0},end:this.endPosition};if(a){var f=Object.keys(a);cf.modifyAttributesInRange(this,d,function(k,n){if(!n)return n;k._textAttributes=
null;k=0;var p={},q;for(q in n)f.includes(q)||(p[q]=n[q],k++);return 0===k?null:p})}}},{key:"setTextAttributesWithSortedRanges",value:function(a){function d(x,B,D){var F=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,L=0,G=B.length;if(0>=D.length-F)return{attributes:[B,null],index:F};for(var oa=[];F<D.length&&!(L>=G);F+=2){var ha=D[F],Ha=ha.start;ha=ha.end;var Va=D[F+1];if(ha.row<x)L=0;else{Ha.row===x&&L<Ha.column&&(oa.push(B.slice(L,Ha.column),null),L=Ha.column);if(ha.row>x){oa.push(Va.embeddedMorph||
B.slice(L,G),Va);L=G;break}L<ha.column&&oa.push(Va.embeddedMorph||B.slice(L,ha.column),Va);L=ha.column}}L<G&&oa.push(B.slice(L,G),null);return{attributes:oa,index:F}}if(!(2>a.length)){var f=a[0].start,k=a.slice(-2)[0].end,n=this.getLine(f.row);if(f.row===k.row){if(!(f.column>=k.column)){var p=d(f.row,n.text,a,0).attributes;a=cf.splitTextAndAttributesAtColumns(n.textAndAttributes,[f.column,k.column]);var q=Nb(a,3);a=q[0];q[1];q=q[2];k=cf.splitTextAndAttributesAtColumns(p,[f.column,k.column]);k=Nb(k,
3);k[0];f=k[1];k[2];n.changeTextAndAttributes([].concat(hb(a),hb(f),hb(q)))}}else{q=f.row;var r=f.column;f=d(q,n.text,a,0);var t=f.attributes;f=f.index;p=cf.splitTextAndAttributesAt(n.textAndAttributes,r);var w=Nb(p,2);p=w[0];w[1];r=cf.splitTextAndAttributesAt(t,r);r=Nb(r,2);r[0];r=r[1];for(n.changeTextAndAttributes([].concat(hb(p),hb(r)));n=n.nextLine();){q++;if(q===k.row)break;f=d(q,n.text,a,f);p=f.attributes;f=f.index;n.changeTextAndAttributes(p)}n&&(k=k.column,a=d(q,n.text,a,f).attributes,q=cf.splitTextAndAttributesAt(n.textAndAttributes,
k),q=Nb(q,2),q[0],q=q[1],k=cf.splitTextAndAttributesAt(a,k),k=Nb(k,1)[0],n.changeTextAndAttributes([].concat(hb(k),hb(q))))}}}},{key:"resetTextAttributes",value:function(){this.lines.forEach(function(a){return a.changeText(a.text)})}},{key:"textAttributeAt",value:function(a){var d=a.row;a=a.column;a=Math.max(0,a);var f=this.getLine(d);if(!f)return null;d=0;f=f.textAndAttributes;for(var k=0;k<f.length;k+=2){var n=f[k],p=f[k+1];d+="string"===typeof n?n.length:1;if(a<d)return p}return f[f.length-1]}},
{key:"textAndAttributesInRange",value:function(a){var d=a.start,f=a.end;if(cf.eqPosition(d,f))return["",null];cf.lessPosition(f,d)&&(a=[f,d],d=a[0],f=a[1]);d=cf.maxPosition(d,{column:0,row:0});f=cf.minPosition(f,this.endPosition);var k=this.getLine(d.row),n=k;if(f.row===d.row)return a=d.column,f=f.column,a===f&&f++,a=cf.splitTextAndAttributesAtColumns(n.textAndAttributes,[a,f]),a=Nb(a,2),a[0],a[1];a=[k];for(var p=0;p<f.row-d.row;p++)a.push(k=k.nextLine());k=a[a.length-1];d=cf.splitTextAndAttributesAt(n.textAndAttributes,
d.column);d=Nb(d,2);d[0];d=d[1];f=cf.splitTextAndAttributesAt(k.textAndAttributes,f.column);f=Nb(f,1)[0];0===d.length&&(d=["",null]);if(1===a.length)return cf.concatTextAndAttributes(d,f,!0);for(n=1;n<a.length-1;n++)"string"===typeof d[d.length-2]&&(d[d.length-2]+=cf.newline),cf.concatTextAndAttributes(d,a[n].textAndAttributes,!0);"string"===typeof d[d.length-2]&&(d[d.length-2]+=cf.newline);cf.concatTextAndAttributes(d,f,!0);return cf.joinTextAttributes(d,"")}},{key:"textInRange",value:function(a){var d=
a.start,f=a.end;d=this.clipPositionToLines(d);f=this.clipPositionToLines(f);cf.lessPosition(f,d)&&(a=[f,d],d=a[0],f=a[1]);a=d;d=a.row;a=a.column;var k=f;f=k.row;k=k.column;if(d===f)return a===k?"":this.getLineString(d).slice(a,k);var n=this.getLine(d);for(a=n.text.slice(a);(n=n.nextLine())&&++d<f;)a+=cf.newline+n.text;return a+cf.newline+this.getLineString(f).slice(0,k)}},{key:"setTextInRange",value:function(a,d){this.remove(d);return this.insertText(a,d.start,!1)}},{key:"indexToPosition",value:function(a){0>
a&&(a=0);a=this.root.findLineWithTextIndex(a,0);return{row:a.row,column:a.column}}},{key:"positionToIndex",value:function(a){var d=a.column,f=this.getLine(a.row);d=Math.max(0,Math.min(d,f.stringSize-1));for(a=f.parent;a;){f=a.children.indexOf(f);f=a.children.slice(0,f);for(var k=0;k<f.length;k++)d+=f[k].stringSize;f=a;a=a.parent}return d}},{key:"insertTextAndAttributes",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;if(!a||!a.length||2===a.length&&!a[0])return{start:d,
end:d};f&&!f.debugDocumentUpdate&&(f=!1);f&&!f.log&&(f=console);var k=d.row,n=d.column;0>k&&(k=0);0>n&&(n=0);var p=this.getLine(k),q=cf.splitTextAndAttributesIntoLines(a,cf.newline);f&&(f.log||(f={log:console.log.bind(console),dump:console.log.bind(console)}));if(!p)return k=this.insertLines(q.map(function(G){return new cf.Line({parent:null,width:0,height:0,textAndAttributes:G})})),f&&f.log("insert ".concat(k.length," lines into empty text")),{start:{row:0,column:0},end:{row:k.length,column:cf.arr.last(k).text.length}};
if(k>=this.rowCount){var r=this.endPosition;f&&f.log("insertion after doc end, ".concat(k,"/").concat(n,", inserting ").concat(k-r.row," rows"));for(n=0;n<k-r.row;n++)q.unshift(["",null]);cf.__inter0__=r;k=cf.__inter0__.row;n=cf.__inter0__.column}if(1===q.length&&""===q[0][0])return f&&f.log("insert just newline at ".concat(k,"/").concat(n)),k=this.splitLineAt({row:k,column:n}),f&&f.dump("".concat(this.root.print(!1))),k;var t=q.shift(),w=q.length;r={row:k,column:n};var x=p.stringSize-1;n>x&&(f&&
f.log("filling up insertion column at ".concat(k,"/").concat(n,": ").concat(n-x)),x=" ".repeat(n-x),t.length?"string"===typeof t[0]?t[0]=x+t[0]:t.unshift(x,null):t.push(x,null));x=cf.splitTextAndAttributesAt(p.textAndAttributes,n);x=Nb(x,2);var B=x[0];x=x[1];""===B[0]&&(B=[]);B=cf.concatTextAndAttributes(B,t,!0);if(0===w){for(var D=0,F=0;F<t.length;F+=2){var L=t[F];D+="string"===typeof L?L.length:1}r.column=n+D;cf.concatTextAndAttributes(B,x,!0)}p.changeTextAndAttributes(B);if(0===w)return f&&(f.log("single line inserted at ".concat(k,
"/").concat(n)),f&&f.dump("".concat(this.root.print(!1)))),{start:{row:k,column:n},end:r};p=q[w-1];for(B=t=0;B<p.length;B+=2)D=p[B],t+="string"===typeof D?D.length:1;r.row+=w;r.column=t;q=this.insertLines(q.map(function(G){return new cf.Line({parent:null,width:0,height:0,textAndAttributes:G})}),k+1);w=cf.arr.last(q);w.changeTextAndAttributes(cf.concatTextAndAttributes(w.textAndAttributes,x,!0));f&&(f.log("".concat(q.length," inserted at ").concat(k,"/").concat(n)),f&&f.dump("".concat(this.root.print(!1))));
return{start:{row:k,column:n},end:r}}},{key:"insertText",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;if(!a)return{start:d,end:d};var k=d.row,n=d.column;0>k&&(k=0);0>n&&(n=0);var p=this.getLine(k);if(!p)return k=this.insertLines(a.split(cf.newline)),{start:{row:0,column:0},end:{row:k.length,column:cf.arr.last(k).text.length}};k>=this.rowCount&&(n=this.endPosition,a="\n".repeat(k-n.row)+a,cf.__inter1__=n,k=cf.__inter1__.row,n=cf.__inter1__.column);var q=a.split(cf.newline),
r=q.shift(),t=q.length,w={row:k,column:n},x=p.stringSize-1;n>x&&(r=" ".repeat(n-x)+r);x=cf.splitTextAndAttributesAt(p.textAndAttributes,n);x=Nb(x,2);var B=x[0];x=x[1];""===B[0]&&(B=[]);f=cf.concatTextAndAttributes(B,[r,f&&B.length?B[B.length-1]:null],!0);0===t&&(w.column=n+r.length,cf.concatTextAndAttributes(f,x,!0));p.changeTextAndAttributes(f);if(0===t)return{start:{row:k,column:n},end:w};w.row+=t;w.column=q[t-1].length;p=this.insertLines(q,k+1);p=cf.arr.last(p);p.changeTextAndAttributes(cf.concatTextAndAttributes(p.textAndAttributes,
x,!0));return{start:{row:k,column:n},end:w}}},{key:"remove",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(0!==this.rowCount){var f=a.start,k=a.end;if(f.row!==k.row||f.column!==k.column){cf.lessPosition(k,f)&&(k=[k,f],f=k[0],k=k[1]);var n=this.endPosition;if(!cf.lessEqPosition(n,f)){var p=cf.maxPosition(f,{column:0,row:0});f=p.row;var q=p.column;n=cf.minPosition(k,n);k=n.row;var r=n.column;0>q&&(q=0);0>r&&(r=0);d&&!d.debugDocumentUpdate&&(d=!1);d&&(d.log||(d=
{log:console.log.bind(console),dump:console.log.bind(console),group:console.group.bind(console),groupEnd:console.groupEnd.bind(console)}),d.group("document.remove "+JSON.stringify(a)),d.log("[text doc] removing ".concat(f,"/").concat(q," => ").concat(k,"/").concat(r)));var t=this.getLine(f);n=t;p=[t];for(var w=0;w<k-f;w++)p.push(t=t.nextLine());t=p[p.length-1];q=cf.splitTextAndAttributesAt(n.textAndAttributes,q);q=Nb(q,1)[0];r=cf.splitTextAndAttributesAt(t.textAndAttributes,r);r=Nb(r,2);r[0];n.changeTextAndAttributes(cf.concatTextAndAttributes(q,
r[1],!0));d&&d.log('[text doc removal] what remains of start/end line: "'.concat(n.textAndAttributes,'"'));1<p.length&&this.removeLines(f+1,k,d);d&&d.groupEnd("[text doc removal]")}}}}},{key:"splitLineAt",value:function(a){var d=a.row;a=a.column;var f=this.getLine(d),k=cf.splitTextAndAttributesAt(f.textAndAttributes,a);k=Nb(k,2);var n=k[1];f.changeTextAndAttributes(k[0]);f=new cf.Line({parent:null,width:0,height:0,textAndAttributes:n});this.insertLines([f],d+1);return{start:{row:d,column:a},end:{row:d+
1,column:0}}}},{key:"replace",value:function(a,d,f){var k=a.start;a=a.end;if(!d.length)return this.remove({start:k,end:a},f),{removed:{start:k,end:a},inserted:{start:k,end:k}};var n=this.clipPositionToLines(k),p=this.clipPositionToLines(a);n.row===p.row&&this.remove({start:n,end:p},f);if(n.row===p.row||cf.lessEqPosition(this.endPosition,k)){var q;"string"===typeof d?d.length&&(q=d.length&&this.insertText(d,k)):d.length&&(2!==d.length||d[0])&&(q=this.insertTextAndAttributes(d,k,f));q||(q={start:n,
end:n});return{removed:{start:k,end:a},inserted:q}}k=n;a=p;f=k;q=f.row;p=f.column;f=a;n=f.row;f.column;if("string"===typeof d){f=[];d=d.split(cf.newline);for(var r=0;r<d.length;r++)f.push([d[r],null])}else f=cf.splitTextAndAttributesIntoLines(d,cf.newline);var t=!f.length||1===f.length&&(!f[0].length||!f[0][0].length);t&&(f=[]);var w=d=this.getLine(q);r=this.getLine(n);p=cf.splitTextAndAttributesAt(w.textAndAttributes,p);p=Nb(p,2);var x=p[0];p[1];for(w.changeTextAndAttributes(t?x:cf.concatTextAndAttributes(x,
f.shift(),!0));f.length;){d=d.nextLine();q++;if(d===r)break;d.changeTextAndAttributes(f.shift())}if(!f.length)return f=d.stringSize-1,this.remove({start:{row:q,column:d.stringSize},end:a}),{removed:{start:k,end:a},inserted:{start:k,end:{row:q,column:f}}};console.assert(q==n,"not end row");console.assert(d.row==q,"row != last line.row");this.remove({start:{row:q,column:0},end:a});n=[];d=f.length;for(p=0;p<d-1;p++)r=f[p],r.length||(r=["",null]),"string"===typeof r[r.length-2]?r[r.length-2]+=cf.newline:
r.push(cf.newline,null),n.push.apply(n,hb(r));n.push.apply(n,hb(f[d-1]));f=this.insertTextAndAttributes(n,{row:q,column:0}).end;return{removed:{start:k,end:a},inserted:{start:k,end:f}}}},{key:"wordsOfLine",value:function(a){for(var d=this.getLineString(a),f=[],k,n=0;n<d.length;n++)/[^a-z0-9_]/i.test(d[n])?k&&(k.range.end.column=n,f.push(k),k=null):(k=k||{index:f.length,string:"",range:{start:{row:a,column:n},end:{row:a,column:n}}},k.string+=d[n]);k&&(k.range.end.column=n,f.push(k));return f}},{key:"wordAt",
value:function(a){var d=a.row,f=a.column;return(1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.wordsOfLine(d)).find(function(k){k=k.range;var n=k.end.column;return k.start.column<=f&&f<=n})||{range:{start:{column:f,row:d},end:{column:f,row:d}},string:""}}},{key:"wordLeft",value:function(a){var d=a.row,f=a.column,k=this.wordsOfLine(d);if(!k.length||cf.lessEqPosition(a,k[0].range.start)){for(;0<=--d;)if(k=this.wordsOfLine(d),k.length)return cf.arr.last(k);return{range:{start:a,end:a},string:""}}d=
this.wordAt(a);return d.string?cf.eqPosition(d.range.start,a)?k[d.index-1]:d:k.slice().reverse().find(function(n){return n.range.end.column<=f})||{range:{start:a,end:a},string:""}}},{key:"wordRight",value:function(a){var d=a.column,f=a.row,k=this.wordsOfLine(a.row);if(!k.length||cf.lessEqPosition(cf.arr.last(k).range.end,a)){for(;++f<this.lines.length;)if(k=this.wordsOfLine(f),k.length)return k[0];return{range:{start:a,end:a},string:""}}f=this.wordAt(a);return f.string?cf.eqPosition(f.range.end,a)?
k[f.index+1]:f:k.find(function(n){return n.range.start.column>=d})||{range:{start:a,end:a},string:""}}},{key:"scanForward",value:function(a,d){var f=a.row,k=a.column;a=this.getLine(f);for(var n=a.text;k<a.stringSize-1;k++){var p=d(n[k],{row:f,column:k});if(p)return p}for(;a=a.nextLine();)for(f++,n=a.text,k=0;k<a.stringSize-1;k++)if(p=d(n[k],{row:f,column:k}))return p;return null}},{key:"scanBackward",value:function(a,d){var f=a.row,k=a.column;a=this.getLine(f);var n=a.text;for(--k;0<=k;k--){var p=
d(n[k],{row:f,column:k});if(p)return p}for(;a=a.prevLine();)for(f--,n=a.text,k=a.stringSize-2;0<=k;k--)if(p=d(n[k],{row:f,column:k}))return p;return null}},{key:"copy",value:function(){return new this.constructor(this.lines.slice(),this.options)}},{key:"toString",value:function(){return"Document(".concat(this.rowCount," lines)")}},{key:"consistencyCheck",value:function(){var a=[],d=this.rowCount,f=this.stringSize,k=this.lines,n=this.textString,p=this.root;d!==k.length&&a.push({error:"document ".concat(this,
" row count: ").concat(d," !== ").concat(k.length)});n.length!==f&&a.push({error:"document ".concat(this," textString.length vs stringSize: ").concat(n.length," !== ").concat(f)});a.push.apply(a,hb(p.consistencyCheck()));d=0;for(f=k[0];f;)f!=k[d]&&a.push({error:"line iteration at ".concat(d," is broken: nextLine() of ").concat(k[d-1]," is not ").concat(k[d],"!")}),d++,f=f.nextLine();k[d]&&a.push({error:"nextLine() of\n  ".concat(k[d-1],"\nis nullish but \n  ").concat(k[d],"\nexists in tree!")});if(a.length)throw Error("Consistency check of document revealed ".concat(a.length,
" error").concat(1<a.length?"s":"",":\n")+"".concat(a.map(function(q){return q.error}).filter(Boolean).join("\n")));}},{key:"print",value:function(){return this.root.print(!1,0,0,"root")}},{key:"print2",value:function(){var a=System.decanonicalize("lively.lang/text-graphics.js"),d=(System.get(a)||{}).printTree;return d?d(this.root,function(f){return f.toString()},function(f){return f.children},{padding:[2,1,2,1]}):(lively.module.module(a).load().then(function(){return console.log("lively.lang/text-graphics.js loaded")})["catch"](function(f){return console.error(f)}),
"Loading lively.lang/text-graphics.js lib, please try again later :P")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Document"}},{key:"fuzzyTest",value:function(){return cf.documentFuzzier.run()}},{key:"newline",get:function(){return cf.newline}},{key:"fromString",value:function(a,d){return new this(a.split(cf.newline),d)}}],c,{pathInPackage:function(){return"./text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:39223,end:75592})}(void 0);cf["default"]=qV;var Nm=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js");Nm.lessPosition=lo;Nm.lessEqPosition=wu;Nm.eqPosition=kp;var gy=function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js"),g=c.hasOwnProperty("Anchor")&&"function"===typeof c.Anchor?c.Anchor:c.Anchor=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{column:0,row:0},f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"move";this.id=a||""+(this.constructor._id=(this.constructor._id||0)+1);this.position=d;this.insertBehavior=f}},{key:"isAnchor",get:function(){return!0}},{key:"embeddedMorph",set:function(a){this._embeddedMorph=a;this.updateEmbeddedMorph()}},{key:"embeddedMorph",get:function(){return this._embeddedMorph}},
{key:"position",set:function(a){this._position=a;this.updateEmbeddedMorph()}},{key:"position",get:function(){return this._position}},{key:"updateEmbeddedMorph",value:function(){if(this.embeddedMorph){var a=this.embeddedMorph.owner;if(!a||a.isLineVisible(this.position.row)){var d=a&&a.isText?a.charBoundsFromTextPosition(this.position).topLeft().subPt(a.origin):this.embeddedMorph.position;a&&(a._positioningSubmorph=this.embeddedMorph);this.embeddedMorph.position=d;a&&(a._positioningSubmorph=!1)}}}},
{key:"onDelete",value:function(a){if(Nm.lessEqPosition(this.position,a.start))return!1;if(Nm.lessEqPosition(a.start,this.position)&&Nm.lessEqPosition(this.position,a.end))return this.position=a.start,!0;var d=this.position,f=d.column,k=a.start,n=k.column,p=a.end;a=p.row;p=p.column;this.position={column:a!==this.position.row?f:n===p?f-(p-n):n+(f-p),row:d.row-(a-k.row)};return!0}},{key:"onInsert",value:function(a){if(Nm.lessPosition(this.position,a.start)||Nm.eqPosition(this.position,a.start)&&"stay"===
this.insertBehavior)return!1;var d=this.position,f=a.start,k=f.row;f=f.column;a=a.end;var n=a.column;this.position={column:d.column+(k!==this.position.row?0:n-f),row:d.row+(a.row-k)};return!0}},{key:"equalsPosition",value:function(a){return a?a.isAnchor?Nm.eqPosition(this.position,a.position):Nm.eqPosition(this.position,a):!1}},{key:"toString",value:function(){var a=this.position,d=a.row;a=a.column;return"Anchor(".concat(this.id," ").concat(d,"/").concat(a,")")}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"Anchor"}}],c,{pathInPackage:function(){return"./text/anchors.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:81,end:3951})}(void 0);Nm.Anchor=gy;Nm.Anchor=gy;var i7=Object.freeze({__proto__:null,Anchor:gy}),Ki=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js");Ki.pt=Ij;Ki.once=Jt;
Ki.Path=Nh;Ki.morph=il;Ki.config=al;Ki.lessPosition=lo;Ki.minPosition=Tw;Ki.maxPosition=Uw;Ki.ViewModel=by;Ki.part=fs;var xI=Lc("b0",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),g=c.hasOwnProperty("TextSearcher")&&"function"===typeof c.TextSearcher?c.TextSearcher:c.TextSearcher=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),
value:function(a){this.morph=a;this.STOP={}}},{key:"doc",get:function(){return this.morph.document}},{key:"processFind",value:function(a,d){var f=this.doc.positionToIndex(a);f=this.doc.indexToPosition(f+d.length);return{range:{start:a,end:f},match:d}}},{key:"stringSearch",value:function(a,d,f,k,n,p,q){if(n&&(Ki.lessPosition(q,n.start)||Ki.lessPosition(n.end,q)))return this.STOP;f||(p=p.toLowerCase());if(p!==d[0])return null;n=q.row;q=q.column;p=a[n];a=1>=k?"":"\n"+a.slice(n+1,n+1+(k-1)).join("\n");
a=p.slice(q)+a;return 0!==(f?a:a.toLowerCase()).indexOf(d)?null:this.processFind({row:n,column:q},a.slice(0,d.length))}},{key:"reSearch",value:function(a,d,f,k,n,p){if(k&&(Ki.lessPosition(p,k.start)||Ki.lessPosition(k.end,p)))return this.STOP;k=p.row;p=p.column;return(a=(a[k].slice(p)+(f?"\n"+a.slice(k+1).join("\n"):"")).match(d))?this.processFind({row:k,column:p},a[0]):null}},{key:"search",value:function(a){var d=Object.assign({start:this.morph.cursorPosition,needle:"",backwards:!1,caseSensitive:!1,
inRange:null},a);a=d.start;var f=d.needle,k=d.backwards,n=d.caseSensitive;d=d.inRange;if(!f)return null;d&&(a=k?Ki.minPosition(d.end,a):Ki.maxPosition(d.start,a));if(f instanceof RegExp){var p=(f.flags||"").split(""),q=!!f.multiline;p.splice(p.indexOf("m"),1);n||p.includes("i")||p.push("i");f=new RegExp("^"+f.source.replace(/^\^+/,""),p.join(""));f=this.reSearch.bind(this,this.doc.lineStrings,f,q,d)}else f=String(f),n||(f=f.toLowerCase()),p=f.split(this.doc.constructor.newline).length,f=this.stringSearch.bind(this,
this.doc.lineStrings,f,n,p,d);a=this.doc[k?"scanBackward":"scanForward"](a,f);return a===this.STOP?null:a}},{key:"searchForAll",value:function(a){for(var d=[],f=0;;){if(1E4<f++)throw Error("endless loop");var k=this.search(a);if(!k)return d;d.push(k);a=Object.assign({},a,{start:a.backwards?k.range.start:k.range.end})}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"TextSearcher"}}],c,{pathInPackage:function(){return"./text/search.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:452,end:3799})}(void 0));Ki.TextSearcher=xI;Ki.TextSearcher=xI;var rV=Lc("b2",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),g=c.hasOwnProperty("SearchWidgetModel")&&"function"===typeof c.SearchWidgetModel?c.SearchWidgetModel:c.SearchWidgetModel=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return ie(g,b,[{key:"viewDidLoad",value:function(){var a=this;this.targetText&&(this.target=this.targetText);if(!this.target)throw Error("SearchWidget needs a target text morph!");this.ui.searchInput.addCommands([{name:"realign top-bottom-center",exec:function(){var d=Bb(regeneratorRuntime.mark(function k(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a.target.execCommand("realign top-bottom-center"),a.addSearchMarkersForPreview(a.state.inProgress&&
a.state.inProgress.found,!1,a.state.caseMode),n.abrupt("return",!0);case 3:case "end":return n.stop()}},k)}));return function(){return d.apply(this,arguments)}}()}])}},{key:"toggleRegexMode",value:function(){this.state.regexMode=!this.state.regexMode;this.ui.regexModeButton.opacity=this.state.regexMode?1:.5;this.cleanup();this.search()}},{key:"toggleCaseMode",value:function(){this.state.caseMode=!this.state.caseMode;this.ui.caseModeButton.opacity=this.state.caseMode?1:.5;this.cleanup();this.search()}},
{key:"focus",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return k=this.ui.searchInput,k.focus(),n.next=4,k.whenRendered();case 4:k.invalidateTextLayout(!0,!0);case 5:case "end":return n.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"onBlur",value:function($super,d){var f=this,k=this.world(),n=this.view;d=this.ui;var p=d.searchInput,q=d.replaceInput;k&&setTimeout(function(){var r=
k.focusedMorph;n.withAllSubmorphsDetect(function(t){return t.isFocused()})?p!==r&&q!==r&&p.focus():f.cancelSearch(!1)})}},{key:"cleanup",value:function(){this.removeSearchMarkers();this.state.inProgress=null;this.textMap&&this.textMap.update()}},{key:"cancelSearch",value:function(a){this.state.inProgress&&(this.state.last=this.state.inProgress);this.cleanup();this.removeTextMap();if(this.state.before&&a){a=this.state.before;var d=a.scroll;this.target.selection=a.selectionRange;this.target.scroll=
d;this.state.before=null}this.view.remove();this.target.focus()}},{key:"acceptSearch",value:function(){this.state.inProgress&&(this.state.last=this.state.inProgress);this.applySearchResult(this.state.inProgress)&&this.state.before&&this.target.saveMark(this.state.before.position);this.ui.searchInput.acceptInput();this.cleanup();this.removeTextMap();this.state.before=null;this.view.remove();this.target.focus()}},{key:"applySearchResult",value:function(a){if(!a||!a.found)return null;var d=this.target,
f=d.selection,k=!!d.activeMark||!f.isEmpty(),n=a.found.range,p=n.start;n=n.end;p=a.backwards?p:n;k?f.lead=p:d.cursorPosition=p;d.isLineFullyVisible(p.row)||d.centerRow();return a}},{key:"removeSearchMarkers",value:function(){var a=this;(this.target.markers||[]).forEach(function(d){d=d.id;return d.startsWith("search-highlight")&&a.target.removeMarker(d)})}},{key:"addSearchMarkers",value:function(a){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;this.removeSearchMarkers();var f=this.target,
k=this.textMap,n=f.whatsVisible,p=n.startRow;n=n.endRow;var q=f.document.lineStrings,r=0,t=Ki.config.codeEditor.search,w=t.maxCharsPerLine;t=t.fastHighlightLineCount;k&&3<=a.match.length&&q.length<t&&(p=0,n=q.length-1);t=!1;for(var x=window.performance.now();p<=n&&!t;p++)for(var B=q[p]||"",D=0;D<Math.min(B.length,w);D++){if(300<window.performance.now()-x){t=!0;break}if(d?0===B.slice(D).indexOf(a.match):0===B.slice(D).toLowerCase().indexOf(a.match.toLowerCase()))f.addMarker({id:"search-highlight-"+
r++,range:{start:{row:p,column:D},end:{row:p,column:D+a.match.length}},style:{"border-radius":"4px","background-color":"rgba(255, 200, 0, 0.3)","box-shadow":"0 0 4px rgba(255, 200, 0, 0.3)","pointer-events":"none"}}),D+=a.match.length}this.state.backwards?(n=a.range.start,d=n.row,n=n.column,d={start:{row:d,column:n},end:{row:d,column:n+1}}):(n=a.range.end,d=n.row,n=n.column,d={start:{row:d,column:n-1},end:{row:d,column:n}});f.addMarker({id:"search-highlight-cursor",range:d,style:Pc({"pointer-events":"none",
"box-sizing":"border-box"},this.state.backwards?"border-left":"border-right","3px red solid")});k&&k.update()}},{key:"addSearchMarkersForPreview",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;a&&(this.addSearchMarkers(a,!1,this.state.caseMode),d&&this.target.removeMarker("search-highlight-cursor"))}},{key:"prepareForNewSearch",value:function(){var a=this,d=this.target,f=this.state,k=this.view,n=this.ui.searchInput,p=d.world();if(p){k.openInWorld(p.visibleBounds().center(),
p);k.topRight=d.globalBounds().insetBy(5).topRight().addXY(0,d.padding.top());d.verticalScrollbarVisible&&(k.topRight=k.topRight.subXY(d.scrollbarOffset.x,0));if(d.getWindow())Ki.once(d.getWindow(),"remove",k,"remove");k=d.scroll;p=d.selection;f.position=p.lead;f.before={scroll:k,position:p.lead,selectionRange:p.range,selectionReverse:p.isReverse()};f.last&&f.last.found&&(this.withoutBindingsDo(function(){return a.input=f.last.needle}),this.addSearchMarkersForPreview(f.last.found,!1,f.caseMode));
this.focus();d.selection.isEmpty()?n.selectAll():(n.textString=d.selectionOrLineString(),d.selection.collapse())}}},{key:"advance",value:function(a){var d=this.state.inProgress;if(d&&d.found){var f=d.found.range;d=f.start;f=f.end;this.state.position=a!==this.state.backwards?a?f:d:a?d:f}this.state.backwards=a;return this.search()}},{key:"searchNext",value:function(){return this.advance(!1)}},{key:"searchPrev",value:function(){return this.advance(!0)}},{key:"search",value:function(){if(!this.input)return this.cleanup(),
null;var a=this.state,d=a.backwards,f=a.caseMode,k={backwards:d,start:a.position,caseSensitive:this.state.caseMode};a=this.target.search(this.input,k);k=this.state.inProgress=Object.assign({},k,{needle:this.input,found:a});this.applySearchResult(k);a?this.addSearchMarkers(a,d,f):this.cleanup();return k}},{key:"showTextMap",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,pd.import("./map-110b5d71.js");
case 2:return k=this.view,n=this.textMap=Ki.morph({type:"textmap"}),n.attachTo(this.target),n.isLayoutable=!1,k.addMorph(n),n.topRight=k.innerBounds().bottomRight().addXY(0,5),n.height=this.target.height-this.target.padding.top()-k.height-15,n.update(),k.renderOnGPU=!0,p.abrupt("return",n);case 12:case "end":return p.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"removeTextMap",value:function(){this.textMap&&(this.textMap.remove(),this.textMap.detachFromCurrentTextMorph(),
this.textMap=null)}},{key:"keybindings",get:function(){return[{keys:"Enter",command:"search next or replace and go to next"},{keys:"Alt-Enter",command:"only search prev"},{keys:"Tab",command:"change focus"},{keys:{mac:"Ctrl-O",win:"Alt-O"},command:"occur with search term"},{keys:"Ctrl-W",command:"yank next word from text"},{keys:"Escape",command:"cancel search"},{keys:{win:"Ctrl-F|Ctrl-S|Ctrl-G",mac:"Meta-F|Ctrl-S|Meta-G"},command:"search next"},{keys:{win:"Ctrl-Shift-F|Ctrl-R|Ctrl-Shift-G",mac:"Meta-Shift-F|Ctrl-R|Meta-Shift-G"},
command:"search prev"}]}},{key:"commands",get:function(){var a=this;return[{name:"occur with search term",exec:function(){var d=Bb(regeneratorRuntime.mark(function k(){var n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,pd.import("./occur-0ca187e3.js");case 2:return n=q.sent,p=n.occurStartCommand,a.target.addCommands([p]),a.execCommand("accept search"),q.abrupt("return",a.target.execCommand("occur",{needle:a.input}));case 7:case "end":return q.stop()}},
k)}));return function(){return d.apply(this,arguments)}}()},{name:"accept search",exec:function(){a.acceptSearch();return!0}},{name:"cancel search and reset cursor in text",exec:function(){a.cancelSearch(!0);return!0}},{name:"cancel search",exec:function(){a.cancelSearch(!1);return!0}},{name:"search next",exec:function(){a.searchNext();return!0}},{name:"search prev",exec:function(){a.searchPrev();return!0}},{name:"only search prev",exec:function(){if(a.ui.searchInput.isFocused())return a.searchPrev(),
!0}},{name:"search next or replace and go to next",exec:function(d,f,k){a.ui.searchInput.acceptInput();return a.execCommand(a.ui.replaceInput.isFocused()?"replace and go to next":"search next",f,k)}},{name:"replace current search location with replace input",exec:function(){var d=Ki.Path("state.inProgress").get(a);if(d.found){var f=a.ui.replaceInput.textString;a.ui.replaceInput.acceptInput();d.needle instanceof RegExp&&(f=d.found.match.replace(d.needle,f));a.target.replace(d.found.range,f)}return!0}},
{name:"replace and go to next",exec:function(){a.execCommand("replace current search location with replace input");a.execCommand(a.state.backwards?"search prev":"search next");return!0}},{name:"replace all",exec:function(){var d=Ki.Path("state.inProgress").get(a),f=a.ui.replaceInput;if(d.found){d=Object.assign({},d,{start:{row:0,column:0}});var k=f.textString;f.acceptInput();f=(new Ki.TextSearcher(a.target)).searchForAll(d);a.target.undoManager.group();f.forEach(function(n){var p=n.range;n=n.match;
d.needle instanceof RegExp&&(k=n.replace(d.needle,k));a.target.replace(p,k,!0,!0,!1)});a.target.undoManager.group();a.acceptSearch()}return!0}},{name:"change focus",exec:function(){var d=a.ui,f=d.searchInput;d=d.replaceInput;f.isFocused()?d.focus():f.focus();return!0}},{name:"yank next word from text",exec:function(){var d=a.target,f=d.wordRight(),k=a.ui.searchInput;k.selection.isEmpty()||(k.selection.text="");d=d.textInRange({start:d.cursorPosition,end:f.range.end});k.textString+=d;return!0}}]}}],
[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"SearchWidgetModel"}},{key:"properties",get:function(){return{isEpiMorph:{defaultValue:!0},target:{},state:{initialize:function(){this.state={backwards:!1,before:null,position:null,inProgress:null,last:null,caseMode:!1,regexMode:!1}}},input:{get:function(){var a=this.ui.searchInput.textString;if(this.state.regexMode){var d=a.match(/^\/(.*)\/([a-z]*)$/);return d?RegExp(d[1],d[2]):new RegExp(a)}return a},set:function(a){this.ui.searchInput.textString=
String(a)}},textMap:{},expose:{get:function(){return"state prepareForNewSearch showTextMap commands keybindings isEpiMorph".split(" ")}},bindings:{get:function(){return[{target:"searchInput",signal:"onBlur",handler:"onBlur"},{target:"replaceInput",signal:"onBlur",handler:"onBlur"},{target:"acceptButton",signal:"fire",handler:"execCommand",converter:function(){return"accept search"}},{target:"cancelButton",signal:"fire",handler:"execCommand",converter:function(){return"cancel search and reset cursor in text"}},
{target:"nextButton",signal:"fire",handler:"execCommand",converter:function(){return"search next"}},{target:"prevButton",signal:"fire",handler:"execCommand",converter:function(){return"search prev"}},{target:"searchInput",signal:"inputChanged",handler:"search"},{target:"replaceButton",signal:"fire",handler:"execCommand",converter:function(){return"replace and go to next"}},{target:"replaceAllButton",signal:"fire",handler:"execCommand",converter:function(){return"replace all"}},{target:"caseModeButton",
signal:"fire",handler:"toggleCaseMode"},{target:"regexModeButton",signal:"fire",handler:"toggleRegexMode"},{signal:"onBlur",handler:"onBlur",override:!0}]}}}}}],c,{pathInPackage:function(){return"./text/search.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3917,end:20684})}(Ki.ViewModel));Ki.SearchWidgetModel=rV;Ki.SearchWidgetModel=
rV;var yI=[{name:"search in text",exec:function(){var b=Bb(regeneratorRuntime.mark(function a(g){var d,f,k,n,p=arguments;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return d=1<p.length&&void 0!==p[1]?p[1]:{backwards:!1},q.next=3,pd.import("./search.cp-76d5f28d.js");case 3:return f=q.sent,k=f.SearchWidget,n=g._searchWidget||(g._searchWidget=Ki.part(k,{viewModel:{target:g},extent:Ki.pt(300,55)})),n.state.backwards=d.backwards,n.prepareForNewSearch(),Ki.config.codeEditor.search.showTextMap&&
n.showTextMap(),q.abrupt("return",!0);case 10:case "end":return q.stop()}},a)}));return function(g){return b.apply(this,arguments)}}()}];Ki.searchCommands=yI;Ki.searchCommands=yI;var Ok=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js");Ok.todo=function(b){throw Error("not yet implemented "+b);};Ok.Rectangle=vl;Ok.rect=Bm;Ok.pt=Ij;Ok.arr=mh;Ok.Range=Rs;var sV=Lc("bL",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js"),g=c.hasOwnProperty("TextLayout")&&
"function"===typeof c.TextLayout?c.TextLayout:c.TextLayout=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){this.reset()}},{key:"reset",value:function(){this.resetLineCharBoundsCache()}},{key:"restore",value:function(a,d){var f=function(r){var t=0;return Ok.arr.histogram(r,r.length/3).map(function(w){var x=Nb(w,3);w=x[0];var B=
x[1];x=x[2];for(var D=[],F=0;F<w;F++)D.push(Ok.rect(t,0,B,x)),t+=B;return D}).flat()};a=ba(a);var k;try{for(a.s();!(k=a.n()).done;){var n=Nb(k.value,2),p=n[0],q=f(n[1]);this.lineCharBoundsCache.set(d.document.getLine(p),q)}}catch(r){a.e(r)}finally{a.f()}}},{key:"resetLineCharBoundsCache",value:function(a){this.lineCharBoundsCache=new WeakMap;a&&!a._isDeserializing&&(this.estimateLineHeights(a),a.makeDirty())}},{key:"resetLineCharBoundsCacheOfLine",value:function(a){a&&this.lineCharBoundsCache.set(a,
null)}},{key:"resetLineCharBoundsCacheOfRow",value:function(a,d){var f=a.document;a._isDeserializing&&a._initializedByCachedBounds||f&&this.resetLineCharBoundsCacheOfLine(f.getLine(d))}},{key:"resetLineCharBoundsCacheOfRange",value:function(a,d){for(var f=d.start.row;f<=d.end.row;f++)this.resetLineCharBoundsCacheOfRow(a,f)}},{key:"estimateLineHeightsInRange",value:function(a,d){for(var f=a.document,k=a.getGlobalTransform(),n=d.start.row;n<=d.end.row;n++)this.resetLineCharBoundsCacheOfRow(a,f.getLine(n),
k)}},{key:"estimateExtentOfLine",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:a.getGlobalTransform(),k=a.fontMetric,n=a.lineWrapping,p=a.padding,q=a.textRenderer,r=a.debug,t=a.defaultTextStyle,w=a.getProperty("extent"),x=w.x;w.y;w=p.left();var B=p.right(),D=p.top();p=p.bottom();q=q.directRenderTextLayerFn(a);var F=d.textAndAttributes,L=[],G;x=x-w-B;if(F&&F.length)for(var oa=0,ha=0;oa<F.length;oa+=2)(G=F[oa])&&G.isMorph?(G.position=this.pixelPositionFor(a,{row:d.row,
column:ha}).subPt(a.origin),ha++):G&&(ha+=G.length),L.push(Object.assign({},t,{},F[oa+1]));else L.push(t);F=L.length;for(oa=t=G=0;oa<F;oa++){ha=k.defaultCharExtent(a,{defaultTextStyle:L[oa],width:1E3,transform:f,paddingBottom:p,paddingTop:D,paddingRight:B,paddingLeft:w},q);var Ha=ha.width;t=Math.max(ha.height,t);G+=Ha}f=t;k=d.text.length||1;w=Math.round(G/F);B=k*w;B=n?Math.min(B,x):B;n&&(f=Math.round((Math.ceil(k/Math.max(3,x/w))||1)*t));r&&console.log("".concat(d.row,": ").concat(d.height," => ").concat(f));
d.changeExtent(B,f,!0)}},{key:"estimateLineHeights",value:function(a,d){var f=a.fontMetric,k=a.textRenderer,n=a.document,p=a.defaultTextStyle,q=a.clipMode,r=a.textAlign,t=a.padding,w=a.lineWrapping,x=a.debug,B=a.getProperty("extent"),D=B.x,F=B.y;B=a.getGlobalTransform();var L=t.left(),G=t.right(),oa=t.top(),ha=t.bottom();t=n.lines;n.stringSize;n=k.directRenderTextLayerFn(a);x&&(x=a.debugHelper(x),x.debugTextLayout||(x=!1));if(!x&&10>a.lineCount()&&3E3>a.document.stringSize&&!a.textAndAttributes.some(function(Ha){return Ha&&
void 0!=Ha.fontFamily}))for(d=k.directRenderLineFn(a),d=f.manuallyComputeBoundsOfLines(a,t,0,0,{defaultTextStyle:p,width:D,height:F,clipMode:q,lineWrapping:w,textAlign:r,transform:B,paddingLeft:L,paddingRight:G,paddingTop:oa,paddingBottom:ha},n,d),p=0;p<t.length;p++)x=d[p],t[p].changeExtent(x.width,x.height,!f.isFontSupported(a.fontFamily,a.fontWeight));else{for(p=f=0;p<t.length;p++)q=t[p],!d&&0<q.height||(f++,this.estimateExtentOfLine(a,q,B));a.viewState._textLayoutStale=!1;x&&x.log("estimateLineHeights, ".concat(f,
"/").concat(t.length," updated, force: ").concat(d))}}},{key:"defaultCharExtent",value:function(a){var d=a.textRenderer,f=a.fontMetric,k=a.defaultTextStyle,n=a.getGlobalTransform();d=d.directRenderTextLayerFn(a);return f.defaultCharExtent(a,{transform:n,defaultTextStyle:k,width:1E3},d)}},{key:"textBounds",value:function(a){var d=a.document,f=a.padding,k=a.borderWidthLeft,n=a.borderWidthRight,p=a.borderWidthTop;a=a.borderWidthBottom;return new Ok.Rectangle(f.left(),f.top(),Math.round(d.width+k+n),
Math.round(d.height+p+a))}},{key:"isFirstLineVisible",value:function(a){return 0>=a.viewState.firstVisibleRow}},{key:"isLastLineVisible",value:function(a){return a.viewState.lastVisibleRow>=a.lineCount()-1}},{key:"isLineVisible",value:function(a,d){return d>=a.viewState.firstVisibleRow&&d<=a.viewState.lastVisibleRow}},{key:"isLineFullyVisible",value:function(a,d){return d>=a.viewState.firstFullyVisibleRow&&d<=a.viewState.lastFullyVisibleRow}},{key:"whatsVisible",value:function(a){var d=a.viewState.firstVisibleRow,
f=a.viewState.lastVisibleRow;return{lines:a.document.lines.slice(d,f),startRow:d,endRow:f}}},{key:"firstFullVisibleLine",value:function(a){return a.viewState.firstFullyVisibleRow}},{key:"lastFullVisibleLine",value:function(a){return a.viewState.lastFullyVisibleRow}},{key:"screenLineRange",value:function(a,d,f){var k=d.row,n=d.column;n=Math.max(0,n);k=Math.min(a.lineCount()-1,Math.max(0,k));var p=this.charBoundsOfRow(a,k);n>p.length-1&&(n=p.length-1);for(var q=p[n],r=d=n,t=n+1;t<p.length&&!(p[t].y+
p[t].height>q.y+q.height);t++)r=t;r===p.length-1&&r++;for(t=n-1;0<=t&&!(p[t].y+p[t].height<q.y+q.height);t--)d=t;f&&(a=a.getLine(k).slice(d,r).match(/^\s*/)[0].length,d+=a);return new Ok.Range({start:{row:k,column:d},end:{row:k,column:r}})}},{key:"rangesOfWrappedLine",value:function(a,d){for(var f=a.getLine(d).length,k=0,n=[];;){var p=this.screenLineRange(a,{row:d,column:k},!1);n.push(p);if(p.end.column>=f)break;var q=p.end.column+1;if(q>=f)break;if(q<=k){if(!a.env.renderer.getNodeForMorph(a))break;
throw Error("should not happen ".concat(p.end.column," vs ").concat(k));}k=q}return n}},{key:"chunkAtPos",value:function(a,d){Ok.todo("chunkAtPos")}},{key:"charBoundsOfRow",value:function(a,d){d=a.document.getLine(d);a._initializedByCachedBounds&&!this._restored&&(this.restore(a._initializedByCachedBounds,a),this._restored=!0);var f=this.lineCharBoundsCache.get(d);if(f)return f;var k=a.getProperty("extent");f=k.x;k=k.y;var n=a.fontMetric,p=a.textRenderer,q=a.defaultTextStyle,r=a.clipMode,t=a.textAlign,
w=a.padding,x=a.lineWrapping,B=a.getGlobalTransform(),D=w.left(),F=w.right(),L=w.top();w=w.bottom();var G=p.directRenderLineFn(a);p=p.directRenderTextLayerFn(a);a=n.manuallyComputeCharBoundsOfLine(a,d,0,0,{defaultTextStyle:q,width:f,height:k,clipMode:r,lineWrapping:x,textAlign:t,paddingLeft:D,paddingRight:F,paddingTop:L,paddingBottom:w,transform:B},p,G);if(a.find(function(oa){return void 0==oa.width&&void 0==oa.height}))return a;this.lineCharBoundsCache.set(d,a);return a}},{key:"computeMaxBoundsForLineSelection",
value:function(a,d){var f=d.start,k=d.end,n=a.textLayout,p=n.rangesOfWrappedLine(a,f.row).find(function(q){return q.containsPosition(f)});k=a.lineWrapping&&p?p.intersect(d).end:k;k=k.row==f.row?k:{row:k.row,column:-1};d=n.charBoundsOfRow(a,f.row);d=0>k.column?d.slice(f.column):d.slice(f.column,k.column+1);k=f.column+(d?d.indexOf(Ok.arr.max(d,function(q){return q.height})):0);return n.boundsFor(a,{row:f.row,column:k})}},{key:"boundsFor",value:function(a,d){var f=d.row;d=d.column;d=Math.max(0,d);f=
Math.min(a.lineCount()-1,Math.max(0,f));var k=this.charBoundsOfRow(a,f);if(0<k.length)if(d>=k.length){var n=k[k.length-1];n=new Ok.Rectangle(n.x+n.width,n.y,0,n.height)}else n=Ok.Rectangle.fromLiteral(k[d]);n||(console.warn("Cannot compute bounds for line ".concat(f,"/").concat(d)),n=new Ok.Rectangle(0,0,0,0));d=a.document;a=a.padding;n.x+=a.left();n.y=n.y+d.computeVerticalOffsetOf(f)+a.top();return n}},{key:"pixelPositionFor",value:function(a,d){return this.boundsFor(a,d).topLeft()}},{key:"textPositionFromPoint",
value:function(a,d){var f=d.addPt(a.origin),k=f.x,n=f.y,p=a.document;f=a.padding;a.origin;var q=f.left(),r=f.top();if(n>p.height+r)return p.endPosition;if(n<r)return{row:0,column:0};f=p.findLineByVerticalOffset(n-r);if(!f)return{row:0,column:0};var t=f.line.row;a=this.charBoundsOfRow(a,t);var w=a.length,x=a[0],B=a[w-1];f={row:t,column:0};k-=q;n-=r+p.computeVerticalOffsetOf(t);if(0===w||k<=x.x+Math.round(x.width/2)&&n>=x.y&&n<=x.y+x.height)return f;if(k>B.x+Math.round(B.width/2)&&n>=B.y&&n<=B.y+B.height)return f.column=
w,f;q=[];for(p=w-1;0<=p;p--)if(r=a[p],t=r.x,w=r.width,x=r.y,B=r.height,!(n<x||n>x+B)&&(q.push(r),k>=t+Math.round(w/2)))return f.column=1===q.length?p:p+1,f;if(q.length)return f.column=a.indexOf(Ok.arr.last(q)),f;k=Infinity;n=-1;for(p=0;p<a.length;p++)q=a[p],q=d.distSquared(Ok.pt(q.x+q.width/2,q.y+q.height/2)),q>=k||(k=q,n=p);f.column=n;return f}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"TextLayout"}}],c,{pathInPackage:function(){return"./text/layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:244,end:17832})}(void 0));Ok["default"]=sV;var Rf=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js");Rf.printViewState=function(b){var c=b.viewState,g=c.scrollTop,a=c.scrollHeight;c.heightBefore;var d=c.textHeight,f=c.firstVisibleRow,k=c.lastVisibleRow;c.firstFullyVisibleRow;c.lastFullyVisibleRow;c.visibleLines;c=b.document.lines;
console.log("".concat(b," #").concat(b.id.slice(0,12),"\nscroll: ").concat(g," + ").concat(a,"\nlines: ").concat(f," - ").concat(k,"\nvisible lines: ").concat(k-f,"\nheight: ").concat(d,", ").concat(c.length," lines"))};Rf.installCSS=function(b){return TF.apply(this,arguments)};Rf.extractHTMLFromTextMorph=UF;Rf.obj=nh;Rf.Path=Nh;Rf.arr=mh;Rf.num=Yk;Rf.pt=Ij;Rf.Rectangle=vl;Rf.vdom=vx;Rf.splitTextAndAttributesIntoLines=Vw;Rf.defaultAttributes=aw;Rf.defaultStyle=$v;Rf.addOrChangeCSSDeclaration=Zo;Rf.hyperscriptFnForDocument=
jH;Rf.objectReplacementChar=AB;Rf.config=al;Rf.getSvgVertices=Zv;Rf.waitFor=Go;var BB=Rf.vdom;Rf.h=BB.h;Rf.create=BB.create;Rf.patch=BB.patch;Rf.diff=BB.diff;Rf.cssInstalled=!1;Rf.debug=!!Rf.config.onloadURLQuery["debug-text"];Rf.nextTick=function(b,c,g,a,d,f){for(;!d&&g<c.length;)d=b[c[g++]+"equestAnimationFrame"];return d&&d.bind(b)||b.setImmediate||function(k){b.setTimeout(k,0)}}("undefined"!==typeof window?window:global,["r","webkitR","mozR","msR","oR"],0);(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),
g=c.hasOwnProperty("AfterTextRenderHook")&&"function"===typeof c.AfterTextRenderHook?c.AfterTextRenderHook:c.AfterTextRenderHook=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:"reset",value:function(a){this.morph=a;this.needsRerender=this.called=!1}},{key:"updateLineHeightOfNode",value:function(a,d,f){if(0===d.height||d.hasEstimatedExtent){var k=a.getGlobalTransform().inverse();k.e=
k.f=0;var n=1!=k.getScale()||0!=k.getRotation();n&&(f.style.transform=k.toString());var p=f.getBoundingClientRect();k=p.height;p=p.width;n&&(f.style.transform="");k&&p&&(d.height!==k||d.width!==p)&&a.fontMetric.isFontSupported(a.fontFamily,a.fontWeight)&&(d.changeExtent(p,k,!1),a.textLayout.resetLineCharBoundsCacheOfLine(d),this.needsRerender=!0,a.viewState._needsFit=!0);if(d.textAndAttributes&&d.textAndAttributes.length)for(p=n=0;n<d.textAndAttributes.length;n+=2)(f=d.textAndAttributes[n])&&f.isMorph?
(a._positioningSubmorph=f,f.position=a.textLayout.pixelPositionFor(a,{row:d.row,column:p}).subPt(a.origin),f._dirty=!1,a._positioningSubmorph=null,p++):f&&(p+=f.length);return k}return d.height}},{key:"updateExtentsOfLines",value:function(a){var d=this.morph;d.textLayout;var f=d.viewState,k=d.fontMetric;f.dom_nodes=[];f.dom_nodeFirstRow=0;f.textWidth=a.scrollWidth;a=a.children;for(var n=0,p;n<a.length&&"line"!=a[n].className;)n++;if(n<a.length){p=a[n];var q=p.dataset;q=Number(q?q.row:p.getAttribute("data-row"));
if("number"===typeof q&&!isNaN(q)){f.dom_nodeFirstRow=q;p=0;q=d.document.getLine(q);for(var r;n<a.length;n++){var t=a[n];f.dom_nodes.push(t);q&&(r||(r=q.hasEstimatedExtent),q.hasEstimatedExtent=r,p+=this.updateLineHeightOfNode(d,q,t),q.hasEstimatedExtent=!k.isFontSupported(d.fontFamily,d.fontWeight),q=q.nextLine())}this.needsRerender?(d.fitIfNeeded(),d.makeDirty()):d._dirty=!!d.submorphs.find(function(w){return w.needsRerender()})}}}},{key:"hook",value:function(a,d,f){a&&a.parentNode&&(d=this.morph.viewState,
d.text_layer_node=a,d.fontmetric_text_layer_node=null,this.called=!0,this.updateExtentsOfLines(a))}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"AfterTextRenderHook"}}],c,{pathInPackage:function(){return"./text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5215,end:9376})})(void 0);var tV=function(b){var c=
window.lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),g=c.hasOwnProperty("TextRenderer")&&"function"===typeof c.TextRenderer?c.TextRenderer:c.TextRenderer=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a){a.domEnv?Rf.cssInstalled||Rf.installCSS(a):console.warn("Text renderer initialized without domEnv. Depending on what you want to do you might have bad luck...!");
this.domEnv=a.domEnv}},{key:"directRenderLineFn",value:function(a){var d=this,f=a.viewState._renderLineFn;if(!f){var k=Rf.hyperscriptFnForDocument(this.domEnv.document);f=a.viewState._renderLineFn=function(n){return d.renderLine(k,null,a,n)}}return f}},{key:"directRenderTextLayerFn",value:function(a){var d=this,f=a.viewState._renderTextLayerFn;if(!f){var k=Rf.hyperscriptFnForDocument(this.domEnv.document);f=a.viewState._renderTextLayerFn=function(n){return d.renderJustTextLayerNode(k,a,n,[])}}return f}},
{key:"renderMorph",value:function(a,d){var f=a.getProperty("selection");return f&&!f.isEmpty()||!a.readOnly?this.renderInteractiveText(a,d):this.renderMorphFast(a,d)}},{key:"renderMorphFast",value:function(a,d){var f=this,k=this.renderJustTextLayerNode(Rf.h,a,null,this.renderAllLines(Rf.h,d,a)),n=a.embeddedMorphMap,p=n?a.submorphs.filter(function(q){return!n.has(q)}):a.submorphs;k.properties.style.position="static";k.properties.className+=" actual";k.properties.style.overflow="visible"===a.clipMode?
"visible":"hidden";this.ensureLayoutUpdateHook(a,k);p=d.renderSelectedSubmorphs(a,p);k=[k];Array.isArray(p)?k.push.apply(k,hb(p)):k.push(p);p=Rf.defaultStyle(a);a.fixedHeight||delete p.height;a.fixedWidth||delete p.width;Rf.nextTick(function(){f.manuallyTriggerTextRenderHook(a,d)});return Rf.h("div",Object.assign({},Rf.defaultAttributes(a,d),{style:Object.assign({},p,{"-moz-user-select":"none",cursor:"auto"===a.nativeCursor?a.readOnly?"default":"text":a.nativeCursor})}),k)}},{key:"renderInteractiveText",
value:function(a,d){var f=this.renderSelectionLayer(a),k=this.renderTextLayer(a,d),n=this.renderJustTextLayerNode(Rf.h,a,null,[]),p=this.renderMarkerLayer(a,d),q=this.renderScrollLayer(a),r=a.embeddedMorphMap,t=r?a.submorphs.filter(function(w){return!r.has(w)}):a.submorphs;k.properties.className+=" actual";k.properties.style.overflow="visible"===a.clipMode?"visible":"hidden";n.properties.className+=" font-measure";t=d.renderSelectedSubmorphs(a,t);f=[].concat(hb(f),[p,n,k]);Array.isArray(t)?f.push.apply(f,
hb(t)):f.push(t);k=a.viewState.fastScroll&&!Rf.Path("layout.renderViaCSS").get(a);return Rf.h("div",Object.assign({},Rf.defaultAttributes(a,d),{style:Object.assign({},Rf.defaultStyle(a),{},a.viewState.fastScroll?{overflow:"visible"==a.clipMode?"visible":"hidden"}:{},{"-moz-user-select":"none",cursor:"auto"===a.nativeCursor?a.readOnly?"default":"text":a.nativeCursor})}),[q].concat(hb(k?[Rf.h("div",{className:"scrollWrapper",style:{"pointer-events":"none",position:"absolute",width:"100%",height:"100%",
transform:"translate(-".concat(a.scroll.x,"px, -").concat(a.scroll.y,"px)")}},f)]:f)))}},{key:"renderScrollLayer",value:function(a){var d=a.document.width>a.width?a.scrollbarOffset:Rf.pt(0,0),f=a.padding.top()+a.padding.bottom();return Rf.h("div",{className:"scrollLayer",style:Object.assign({position:"absolute",top:"0px"},a.viewState.fastScroll?{overflow:a.scrollActive?a.clipMode:"hidden"}:{},{width:"100%",height:"100%"})},[Rf.h("div",{style:{width:Math.max(a.document.width,a.width)+"px",height:Math.max(a.document.height,
a.height)-d.y+f+"px"}})])}},{key:"renderSelectionLayer",value:function(a){var d=a.cursorWidth||1,f=a.selection;if(a.inMultiSelectMode()){d=[];f=f.selections;for(var k=0;k<f.length-1;k++)d.push.apply(d,hb(this.renderSelectionPart(a,f[k],!0,2)));d.push.apply(d,hb(this.renderSelectionPart(a,f[k],!1,4)));return d}return this.renderSelectionPart(a,f,!1,d)}},{key:"renderTextLayer",value:function(a,d){var f=this,k=a.debug?[].concat(hb(this.renderDebugLayer(a)),hb(this.renderVisibleLines(Rf.h,d,a))):this.renderVisibleLines(Rf.h,
d,a);k=this.renderJustTextLayerNode(Rf.h,a,null,k);k.properties.style.position="absolute";this.ensureLayoutUpdateHook(a,k);Rf.nextTick(function(){f.manuallyTriggerTextRenderHook(a,d)});return k}},{key:"ensureLayoutUpdateHook",value:function(a,d){var f=a.viewState.afterTextRenderHook||(a.viewState.afterTextRenderHook=new Rf.AfterTextRenderHook);f.reset(a);d.properties["after-text-render-hook"]=f}},{key:"manuallyTriggerTextRenderHook",value:function(a,d){var f=a.viewState.afterTextRenderHook;f&&!f.called&&
((d=(d=d.getNodeForMorph(a))&&d.querySelector(".actual.newtext-text-layer"))&&f.hook(d),a.ownerChain().every(function(k){return k.visible})&&a.fit())}},{key:"renderJustTextLayerNode",value:function(a,d,f,k){d.height;var n=d.padding,p=n.x,q=n.y,r=n.width,t=n.height,w=d.lineWrapping,x=d.fixedWidth,B=d.fixedHeight,D=d.backgroundColor,F=d.fontColor,L=d.textAlign,G=d.fontSize,oa=d.textDecoration,ha=d.fontStyle,Ha=d.fontWeight,Va=d.fontFamily,hc=d.lineHeight,qc=d.wordSpacing,jc=d.letterSpacing;d.document;
var Ya=d.tabWidth;n={overflow:"hidden",top:"0px",left:"0px"};r=p+r;t=q+t;d=Math.max(d.document.height,d.height);var xa="newtext-text-layer";switch(x&&w){case !0:case "by-words":xa+=" wrap-by-words";break;case "only-by-words":xa+=" only-wrap-by-words";break;case "by-chars":xa+=" wrap-by-chars";break;case !1:xa+=" no-wrapping"}x||(xa+=" auto-width");B||(xa+=" auto-height");w={className:xa,style:n};B&&(n.height=d+"px");0<p&&(n.paddingLeft=p+"px");0<r&&(n.paddingRight=r+"px");0<q&&(n.marginTop=q+"px");
0<t&&(n.marginBottom=t+"px");jc&&(n.letterSpacing=jc+"px");qc&&(n.wordSpacing=qc+"px");hc&&(n.lineHeight=hc);Va&&(n.fontFamily=Va);Ha&&(n.fontWeight=Ha);ha&&(n.fontStyle=ha);oa&&(n.textDecoration=oa);G&&(n.fontSize=G+"px");L&&(n.textAlign=L);F&&(n.color=String(F));D&&(n.backgroundColor=D);8!==Ya&&(n.tabSize=Ya);f&&(p=f.clipMode,q=f.height,f=f.width,"number"===typeof f&&(n.width=f+"px"),"number"===typeof q&&(n.height=q+"px"),p&&(n.overflow=p));return a("div",w,k)}},{key:"renderAllLines",value:function(a,
d,f){var k=f.height,n=f.scroll,p=f.padding;p.x;p.y;p.width;p.height;f.clipMode;f.textAndAttributes;d.getNodeForMorph(f);n=n.y;p=f.document.lines;for(var q=p.length,r=[],t=[],w=0;w<p.length;w++){r.push(p[w]);var x=this.renderLine(a,d,f,p[w]);t.push(x);x.key=w}Object.assign(f.viewState,{scrollTop:n,scrollHeight:k,scrollBottom:n+k,firstVisibleRow:0,lastVisibleRow:q,visibleLines:r});return t}},{key:"renderVisibleLines",value:function(a,d,f){var k=f.height,n=f.scroll,p=f.padding;p.x;var q=p.y;p.width;
p.height;var r=f.document,t=f.clipMode;d.getNodeForMorph(f);n=n.y;var w=r.rowCount-1;p=r.height;var x="visible"!==t,B=r.findLineByVerticalOffset(x?Math.max(0,x?n-q:0):0)||{row:0,y:0,offset:0,line:r.getLine(0)},D=B.line,F=B.offset;t=B.y;B=B.row;q=r.findLineByVerticalOffset(x?Math.min(p,n-q+k):p)||{row:w,offset:0,y:0,line:r.getLine(w)};r=q.line;var L=q.offset,G=q.row;q=x?B:0;F=0===F?B:B+1;w=x?G+1:w;x=r&&L!==r.height?G-1:G;this.maxVisibleLines=Math.max(this.maxVisibleLines||1,w-q+1);B=[];r=[];r.push(a("div.newtext-before-filler",
{key:"filler",style:{height:t+"px"}}));for(L=0;L<this.maxVisibleLines&&(B.push(D),G=this.renderLine(a,d,f,D),r.push(G),G.key=D.row%this.maxVisibleLines,L++,D=D.nextLine(),D););Object.assign(f.viewState,{scrollTop:n,scrollHeight:k,scrollBottom:n+k,heightBefore:t,textHeight:p,firstVisibleRow:q,lastVisibleRow:w,firstFullyVisibleRow:F,lastFullyVisibleRow:x,visibleLines:B});f.debug&&Rf.printViewState(f);return r}},{key:"renderLine",value:function(a,d,f,k){var n=k.textAndAttributes,p=[],q=n.length,r=f.fontSize;
if(0<q)for(var t=0;t<q;t+=2){var w=n[t]||"\u00a0";var x=n[t+1];if("string"!==typeof w)p.push(w.isMorph?this.renderEmbeddedSubmorph(a,d,w,x):Rf.objectReplacementChar);else if(x){var B=x.fontSize&&(Rf.obj.isString(x.fontSize)?x.fontSize:x.fontSize+"px");var D=x.fontFamily;var F=x.fontWeight;var L=x.fontStyle;var G=x.textDecoration;var oa=x.fontColor;var ha=x.backgroundColor;var Ha=x.nativeCursor;var Va=x.textStyleClasses;var hc=x.link;var qc=x.lineHeight||qc;var jc=x.textAlign||jc;var Ya=x.wordSpacing||
Ya;var xa=x.letterSpacing||xa;var tc=x.paddingRight;var Qb=x.paddingLeft;var wc=x.paddingTop;var Zb=x.paddingBottom;var $c=x.verticalAlign;var Oa=x.textStroke;var md=x.quote||md;var la="span";var $a={};var dd={style:$a};B&&x.fontSize<r&&(r=x.fontSize);hc&&(la="a",(dd.href=hc)&&hc.startsWith("http")&&(dd.target="_blank"));if(hc||Ha)$a.pointerEvents="auto";B&&($a.fontSize=B);D&&($a.fontFamily=D);F&&($a.fontWeight=F);L&&($a.fontStyle=L);G&&($a.textDecoration=G);oa&&($a.color=String(oa));ha&&($a.backgroundColor=
String(ha));Ha&&($a.cursor=Ha);tc&&($a.paddingRight=tc);Qb&&($a.paddingLeft=Qb);wc&&($a.paddingTop=wc);Zb&&($a.paddingBottom=Zb);$c&&($a.verticalAlign=$c);Oa&&($a["-webkit-text-stroke"]=Oa);x.doit&&($a.pointerEvents="auto",$a.cursor="pointer");Va&&Va.length&&(dd.className=Va.join(" "));p.push(a(la,dd,w))}else p.push(w)}else p.push(a("br"));d={};f.fontSize>r&&(d.fontSize=r+"px");qc&&(d.lineHeight=qc);jc&&(d.textAlign=jc);xa&&(d.letterSpacing=xa+"px");Ya&&(d.wordSpacing=Ya+"px");f=a("div",{className:"line",
style:d,dataset:{row:k.row}},p);if(md)for("number"!==typeof md&&(md=1);md--;)f=a("blockquote",{},f);return f}},{key:"renderEmbeddedSubmorph",value:function(a,d,f,k){k=k||{};if(d)return a=d.render(f),a.properties.style.position="sticky",a.properties.style.transform="",a.properties.style.textAlign="initial",k.paddingTop&&(a.properties.style.marginTop=k.paddingTop),k.paddingLeft&&(a.properties.style.marginLeft=k.paddingLeft),k.paddingRight&&(a.properties.style.marginRight=k.paddingRight),k.paddingBottom&&
(a.properties.style.marginBottom=k.paddingBottom),a;d=f.extent;k=d.x+"px";d=d.y+"px";return a("div",{className:f.styleClasses.join(" "),style:{width:k,height:d}},[])}},{key:"renderSelectionPart",value:function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,k=3<arguments.length&&void 0!==arguments[3]?arguments[3]:2;if(!d)return[];var n=a.textLayout,p=d.start,q=d.end,r=d.cursorVisible,t=d.selectionColor,w=a.document,x=a.cursorColor;a.fontColor;var B=d.isReverse();p=n.boundsFor(a,
p);var D=n.computeMaxBoundsForLineSelection(a,d),F=n.boundsFor(a,q);Rf.pt(p.x,D.y);D=Rf.pt(F.x,F.y);q=p.height;F=F.height;p=B?Rf.pt(p.x,p.y):D;f=this.cursor(p,B?q:F,r,f,k,x);if(d.isEmpty())return[f];k=[];r=d.start.row;x=w.computeVerticalOffsetOf(r)+a.padding.top();B=a.padding.left();for(var L,G,oa;r<=d.end.row;){q=w.getLine(r);if(!(r<a.viewState.firstVisibleRow-50)){if(r>a.viewState.lastVisibleRow+50)break;p=n.charBoundsOfRow(a,r).map(Rf.Rectangle.fromLiteral);F=r==d.start.row;if(D=p[0].bottom()<
Rf.arr.last(p).top()){var ha=n.rangesOfWrappedLine(a,r).map(function(xa){return xa.intersect(d)}),Ha=F,Va=0,hc=void 0,qc=void 0;ha=ba(ha);var jc;try{for(ha.s();!(jc=ha.n()).done;){var Ya=jc.value;Ya.isEmpty()||(hc=p.slice(Ya.start.column,Ya.end.column),Va=Ha?Rf.arr.min(hc.map(function(xa){return xa.top()})):Va,qc=Rf.arr.max(hc.map(function(xa){return xa.bottom()})),oa=hc[0],L=Rf.pt(B+oa.left(),x+Va),oa=Rf.arr.last(hc),G=Rf.pt(B+oa.right(),x+qc),Va=qc,Ha=!1,k.push(Rf.Rectangle.fromAny(L,G)))}}catch(xa){ha.e(xa)}finally{ha.f()}}D||
(G=r==d.end.row,L=F?d.start.column:0,D=G?d.end.column:p.length-1,F=F&&Rf.arr.min(p.slice(L,D+1).map(function(xa){return xa.top()}))||0,Ha=L>=D?5:0,oa=p[L],L=Rf.pt(B+(oa?oa.left():Rf.arr.last(p).right()),x+F),oa=p[D],d.includingLineEnd?G=Rf.pt(a.width-a.padding.right(),x+F+q.height):(G=G&&d.end.column<=p.length-1,G=Rf.pt(B+(oa?G?oa.left():oa.right():Rf.arr.last(p).right())+Ha,x+F+q.height)),k.push(Rf.Rectangle.fromAny(L,G)))}x+=q.height;r++}n=this.selectionLayerRounded(k,t,a);n.push(f);return n}},
{key:"selectionLayerRounded",value:function(a,d,f){var k;f=[k={left:[],right:[]}];a=ba(a);var n;try{for(a.s();!(n=a.n()).done;){var p=n.value;q&&(q.left()>p.right()||q.right()<p.left())&&f.push(k={left:[],right:[]});k.left.push(p.topLeft(),p.bottomLeft());k.right.push(p.topRight(),p.bottomRight());var q=p}}catch(x){a.e(x)}finally{a.f()}var r=[];q=function(){var x=w[t];if(!x.left.length)return"continue";var B=x.left.reduce(function(Ha,Va){return Ha.minPt(Va)}),D=x.left.concat(x.right.reverse());x=
[];for(var F=0;F<D.length;F++){var L=D[F-1]||Rf.arr.last(D),G=D[F],oa=D[F+1]||Rf.arr.first(D),ha=L.subPt(G).normalized().scaleBy(6);L=G.addPt(ha);L._next=ha.scaleBy(-1);oa=oa.subPt(G).normalized().scaleBy(6);G=G.addPt(oa);G._prev=oa.scaleBy(-1);x.push(L,G)}x=x.map(function(Ha){return{position:Ha.subPt(B),isSmooth:!0,controlPoints:{next:Ha._next||Rf.pt(0),previous:Ha._prev||Rf.pt(0)}}});D=Rf.getSvgVertices(x);G=x.map(function(Ha){return Ha.position}).reduce(function(Ha,Va){return Ha.minPt(Va)});F=
G.y;G=G.x;x=x.map(function(Ha){return Ha.position}).reduce(function(Ha,Va){return Ha.maxPt(Va)});r.push(Rf.h("svg",{namespace:"http://www.w3.org/2000/svg",version:"1.1",style:{position:"absolute",left:B.x+"px",top:B.y+"px",width:x.x-G,height:x.y-F}},Rf.h("path",{namespace:"http://www.w3.org/2000/svg",attributes:{d:D,fill:d.toString()}})))};for(var t=0,w=f;t<w.length;t++)q();return r}},{key:"cursor",value:function(a,d,f,k,n,p){return Rf.h("div",{className:"newtext-cursor"+(k?" diminished":""),style:{left:a.x-
Math.ceil(n/2)+"px",top:a.y+"px",width:n+"px",height:d+"px",display:f?"":"none",background:p||"black"}})}},{key:"renderMarkerLayer",value:function(a){var d=a.markers;a.textLayout;var f=a.viewState,k=f.firstVisibleRow;f=f.lastVisibleRow;var n=[];if(!d)return n;d=ba(d);var p;try{for(d.s();!(p=d.n()).done;){var q=p.value,r=q.style,t=q.range,w=t.start,x=t.end;if(!(x.row<k||w.row>f))if(w.row===x.row)n.push(this.renderMarkerPart(a,w,x,r));else{n.push(this.renderMarkerPart(a,w,a.lineRange(w.row).end,r));
for(var B=w.row+1;B<=x.row-1;B++){var D=a.lineRange(B);n.push(this.renderMarkerPart(a,D.start,D.end,r,!0))}n.push(this.renderMarkerPart(a,{row:x.row,column:0},x,r))}}}catch(F){d.e(F)}finally{d.f()}return n}},{key:"renderMarkerPart",value:function(a,d,f,k){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:!1;var p=a.document;var q=a.textLayout;var r=p.getLine(d.row);n?(q=a.padding,n=q.left(),p=q.top()+p.computeVerticalOffsetOf(d.row),q=n+r.width,r=r.height):(Rf.__inter0__=q.boundsFor(a,
d),n=Rf.__inter0__.x,p=Rf.__inter0__.y,Rf.__inter1__=q.boundsFor(a,f),q=Rf.__inter1__.x,r=Rf.__inter1__.height);r=Math.ceil(r);return Rf.h("div.newtext-marker-layer",{style:Object.assign({},k,{left:n+"px",top:p+"px",height:r+"px",width:q-n+"px"})})}},{key:"renderDebugLayer",value:function(a){var d=a.viewState,f=[],k=d.heightBefore,n=d.firstVisibleRow,p=d.lastVisibleRow;d=d.visibleLines;var q=a.padding,r=a.scroll,t=r.x,w=r.y;r=q.left();var x=q.right();q.bottom();f.push(Rf.h("div.debug-info",{style:{left:t+
r+"px",top:w+"px",width:a.width-x+"px"}},Rf.h("span","visible rows: ".concat(n," - ").concat(p))));for(q=0;n<p;q++,n++){var B=d[q];w=a.textLayout.lineCharBoundsCache.get(B);B=B.height;f.push(Rf.h("div.debug-line",{style:{left:t+r+"px",top:0+k+"px",width:a.width-x+"px",height:B+"px"}},Rf.h("span",String(n))));if(w)for(var D=0;D<w.length;D++){var F=w[D];f.push(Rf.h("div.debug-char",{style:{left:r+F.x+"px",top:0+k+F.y+"px",width:F.width+"px",height:F.height+"px"}}))}k+=B}return f}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"TextRenderer"}}],c,{pathInPackage:function(){return"./text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9393,end:46778})}(void 0);Rf.extractHTMLFromTextMorph=UF;Rf["default"]=tV;var Om=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js");Om.arr=mh;Om.eqPosition=kp;
Om.KeyHandler=XA;Om.commands={activate:{name:"[IyGotoChar] activate",exec:function(b){Om.IyGotoCharKeyHandler.installInto(b,(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{backwards:!1}).backwards);return!0}},moveTo:{name:"[IyGotoChar] move to",exec:function(b,c){b.saveMark();var g=b.selection,a=g.lead,d=a.row,f=a.column;a=!!b.activeMark||!g.isEmpty();var k={row:d,column:f-1};b=b.document[c.backwards?"scanBackward":"scanForward"](k,function(n,p){return n!==c.needle||Om.eqPosition(k,p)?null:
p});if(!b)return!0;b.column++;g.lead=b;a||(g.anchor=b);return!0},multiSelectAction:"forEach",readOnly:!0}};var zI=Om.commands.activate;Om.activate=zI;Om.activate=zI;(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js"),g=c.hasOwnProperty("IyGotoCharKeyHandler")&&"function"===typeof c.IyGotoCharKeyHandler?c.IyGotoCharKeyHandler:c.IyGotoCharKeyHandler=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;ie._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this);this.charToFind=void 0;this.backwards=a}},{key:"isIyGoToChar",get:function(){return!0}},{key:"uninstallFrom",value:function(a){a._cachedKeyhandlers=null;Om.arr.remove(a._keyhandlers||[],this)}},{key:"eventCommandLookup",value:function(a,d){var f=
d.keyCombo,k=f.startsWith("input-");if(d.onlyModifiers||f.startsWith("Shift-")||!k&&!d.isModified&&!d.isFunctionKey)return{command:"null",passEvent:!0};d=k&&f.slice(6);if(!this.charToFind)if(k)this.charToFind=d;else return this.uninstallFrom(a),null;return d!==this.charToFind?(this.uninstallFrom(a),null):{command:Om.commands.moveTo,args:{backwards:this.backwards,needle:d}}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"IyGotoCharKeyHandler"}},{key:"installInto",value:function(a){var d=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;a.keyhandlers.filter(function(f){return f.isIyGoToChar}).forEach(function(f){return f.uninstallFrom(a)});a._cachedKeyhandlers=null;a._keyhandlers=(a._keyhandlers||[]).concat(new this(d))}}],c,{pathInPackage:function(){return"./text/iy-goto-char.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:1102,end:3128})})(Om.KeyHandler);var uV,vV,Ih=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/commands.js");Ih.chain=Tn;Ih.arr=mh;Ih.string=ji;Ih.date=ls;Ih.pt=Ij;Ih.Range=Rs;Ih.eqPosition=kp;Ih.commands=[{name:"clipboard copy",doc:"placeholder for native copy",scrollCursorIntoView:!1,exec:function(b){b.selection.isEmpty()&&b.selectLine(b.cursorPosition.row);return!0}},{name:"manual clipboard copy",doc:"attempts to copy selection via browser interface",scrollCursorIntoView:!1,
multiSelectAction:"single",exec:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{collapseSelection:!0,"delete":!1,dontTryNativeClipboard:!1},g=b.selection,a=g.text,d=c.hasOwnProperty("collapseSelection")?c.collapseSelection:!0;b.saveMark(g.anchor);b.activeMark=null;(g.isMultiSelection?g.selections.slice():[g]).forEach(function(f){var k=f.isEmpty()?b.lineRange():f.range,n=b.textInRange(k);b.env.eventDispatcher.killRing.add(n);c["delete"]?b.deleteText(k):!f.isEmpty()&&d&&f.collapse(f.lead)});
c.dontTryNativeClipboard||b.env.eventDispatcher.doCopy(a);return!0}},{name:"clipboard cut",doc:"placeholder for native cut",exec:function(b){b.selection.isEmpty()&&b.selectLine(b.cursorPosition.row,!0);return!0}},{name:"clipboard paste",doc:"placeholder for native paste",exec:function(){return!0}},{name:"manual clipboard paste",doc:"attempts to paste from the clipboard to lively \u2013 currently requires browser extension!",multiSelectAction:"single",exec:function(){var b=Bb(regeneratorRuntime.mark(function a(g){var d,
f,k,n=arguments;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return d=1<n.length&&void 0!==n[1]?n[1]:{killRingCycleBack:!1},k=g.env.eventDispatcher.killRing,d.killRingCycleBack&&(Ih.arr.last(Ih.arr.pluck(g.commandHandler.history,"name"))||"").includes("clipboard paste")&&(f=k.back()),!f&&k.isCycling()&&(f=k.yank()),f||(f=k.yank()),g.selection.isMultiSelection?(g.undoManager.group(),g.selection.selections.slice(0,-1).reverse().map(function(q,r){r=k.pointer-1-r;0>r&&
(r=k.buffer.length-1);return{selection:q,pasted:k.buffer[r]||""}}).concat({selection:g.selection.defaultSelection,pasted:f}).forEach(function(q){return q.selection.text=q.pasted}),g.undoManager.group()):f&&(g.undoManager.group(),g.selection.text=f,g.undoManager.group()),p.abrupt("return",!0);case 7:case "end":return p.stop()}},a)}));return function(g){return b.apply(this,arguments)}}()},{name:"browse clipboard",exec:function(){var b=Bb(regeneratorRuntime.mark(function a(g){var d,f,k,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=
r.next){case 0:return d=g.env.eventDispatcher.killRing,f=d.pointer,k=d.buffer,n=k.map(function(t){return{isListItem:!0,string:Ih.string.truncate(t,80).replace(/\n/g,""),value:t}}),r.next=4,g.world().filterableListPrompt("select items to paste",n,{preselect:f,multiSelect:!0});case 4:return p=r.sent,q=p.selected,q.length&&(g.undoManager.group(),g.insertTextAndSelect(q.join("\n")),g.undoManager.group()),r.abrupt("return",!0);case 8:case "end":return r.stop()}},a)}));return function(g){return b.apply(this,
arguments)}}()},{name:"text undo",doc:"undo text changes",multiSelectAction:"single",exec:function(b){b.textUndo();return!0}},{name:"text redo",doc:"redo text changes",multiSelectAction:"single",exec:function(b){b.textRedo();return!0}},{name:"select all",doc:"Selects entire text contents.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){b.saveMark();b.selectAll();return!0}},{name:"delete backwards",doc:"Delete the character in front of the cursor or the selection.",exec:function(b){if(b.rejectsInput())return!1;
if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_newline&&b.editorPlugin.cmd_delete_backwards())return!0;var c=b.selection;c.isEmpty()&&c.growLeft(1);c.text="";c.collapse();b.activeMark&&(b.activeMark=null);return!0}},{name:"delete",doc:"Delete the character following the cursor or the selection.",exec:function(b){var c=b.selection;if(b.rejectsInput())return!1;c.isEmpty()&&c.growRight(1);c.text="";c.collapse();b.activeMark&&(b.activeMark=null);return!0}},{name:"indent",scrollCursorIntoView:!1,
exec:function(b){b.undoManager.group();b.withSelectedLinesDo(function(c,g){return b.insertText(b.tab,g.start)});b.undoManager.group();return!0}},{name:"outdent",scrollCursorIntoView:!1,exec:function(b){b.undoManager.group();b.withSelectedLinesDo(function(c,g){return c.startsWith(b.tab)&&b.deleteText({start:g.start,end:{row:g.start.row,column:b.tab.length}})});b.undoManager.group();return!0}},{name:"indent according to mode",exec:function(){var b=Bb(regeneratorRuntime.mark(function a(g){var d,f,k,
n,p,q,r,t=arguments;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:d=1<t.length&&void 0!==t[1]?t[1]:{};if(f=g.editorPlugin&&g.editorPlugin.mode){w.next=4;break}return w.abrupt("return",!0);case 4:return p=d.hasOwnProperty("undo")?d.undo:!0,d.hasOwnProperty("firstRow")&&d.hasOwnProperty("lastRow")?(Ih.__inter0__=d,k=Ih.__inter0__.firstRow,n=Ih.__inter0__.lastRow):g.selection.isEmpty()?k=n=g.cursorPosition.row:(Ih.__inter1__=g.selection.selectedRows,k=Ih.__inter1__.first,
n=Ih.__inter1__.last),w.next=8,pd.import("./editor-modes-5e094c88.js");case 8:return q=w.sent,r=q.indentLines,p&&g.undoManager.group(),r(g,f,k,n,"smart",!0,d),p&&g.undoManager.group(),w.abrupt("return",!0);case 14:case "end":return w.stop()}},a)}));return function(g){return b.apply(this,arguments)}}()},{name:"tab - snippet expand or indent",scrollCursorIntoView:!0,exec:function(b){var c=b.snippets.find(function(g){return g.canExpand(b)});return c?(c.expandAtCursor(b),!0):b.selection.isEmpty()?b.execCommand("insertstring",
{string:b.tab}):b.execCommand("indent according to mode")}},{name:"browse snippets",scrollCursorIntoView:!0,exec:function(){var b=Bb(regeneratorRuntime.mark(function a(g){var d,f,k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return d=g.snippets.map(function(q){return{isListItem:!0,string:"".concat(q.trigger," - ").concat(q.expansion),value:q}}),p.next=3,g.world().filterableListPrompt("select snippet",d,{requester:g});case 3:return f=p.sent,k=Nb(f.selected,1),(n=
k[0])&&n.expandAtCursor(g),p.abrupt("return",!0);case 8:case "end":return p.stop()}},a)}));return function(g){return b.apply(this,arguments)}}()},{name:"transpose chars",exec:function(b){if(b.selection.isEmpty()){var c=b.cursorPosition,g=c.row,a=c.column;c=Ih.Range.create(g,a-1,g,a+1);var d=b.getLine(g);g=d[a-1];a=d[a];g&&a&&b.replace(c,a+g,!0)}return!0}},{name:"cycle selection contents",documentation:"If there are multiple selections, will take the text of the first one and replace the second one with it, the text of the second will replace the third, the last selection contents will replace the contents of the first.",
multiSelectAction:"single",exec:function(b){var c=b.selection.selections;b.undoManager.group();c.reduce(function(g,a){var d=a.text;a.text=g;return d},Ih.arr.last(c).text);b.undoManager.group();return!0}},{name:"go left",doc:"Move the cursor 1 character left. At the beginning of a line move the cursor up. If a selection is active, collapse the selection left.",exec:function(b){b.activeMark?b.selection.selectLeft(1):b.selection.goLeft(1);return!0}},{name:"go right",doc:"Move the cursor 1 character right. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",
exec:function(b){b.activeMark?b.selection.selectRight(1):b.selection.goRight(1);return!0}},{name:"go up",doc:"Move the cursor 1 line. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",scrollCursorIntoView:!0,exec:function(b){b.activeMark?b.selection.selectUp(1):b.selection.goUp(1,!0);return!0}},{name:"go down",exec:function(b){b.activeMark?b.selection.selectDown(1):b.selection.goDown(1,!0);return!0}},{name:"select left",exec:function(b){b.selection.selectLeft(1);
return!0}},{name:"select right",exec:function(b){b.selection.selectRight(1);return!0}},{name:"select up",exec:function(b){b.selection.selectUp(1,!0);return!0}},{name:"select down",exec:function(b){b.selection.selectDown(1,!0);return!0}},{name:"select line",exec:function(b){var c=b.selection,g=c.lead.row,a=b.lineRange(g,!1);c.range=c.range.equals(a)?b.lineRange(g,!0):a;return!0}},{name:"goto line start",exec:function(b){var c=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{select:!1}).select||
!!b.activeMark,g=b.selection,a=g.lead,d=b.screenLineRange(a,!0);g.lead=Ih.eqPosition(a,d.start)?{column:0,row:a.row}:d.start;!c&&(g.anchor=g.lead);return!0}},{name:"goto line end",exec:function(b){var c=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{select:!1}).select||!!b.activeMark,g=b.selection,a=b.screenLineRange(g.lead,!0);g.lead=a.end;!c&&(g.anchor=g.lead);return!0}},{name:"goto page up",exec:function(b){b.pageUpOrDown({direction:"up",select:!!b.activeMark});return!0}},{name:"goto page down",
exec:function(b){b.pageUpOrDown({direction:"down",select:!!b.activeMark});return!0}},{name:"goto page up and select",exec:function(b){b.pageUpOrDown({direction:"up",select:!0});return!0}},{name:"goto page down and select",exec:function(b){b.pageUpOrDown({direction:"down",select:!0});return!0}},{name:"goto start",exec:function(b){b.gotoDocumentStart(Object.assign({},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{select:!!b.activeMark}));return!0}},{name:"goto end",exec:function(b){b.gotoDocumentEnd(Object.assign({},
1<arguments.length&&void 0!==arguments[1]?arguments[1]:{select:!!b.activeMark}));return!0}},{name:"goto paragraph above",exec:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{select:!!b.activeMark},g=b.paragraphRangeAbove(b.cursorPosition.row);g.start.row--;b.selection.lead=g.start;c.select||b.collapseSelection();return!0}},{name:"goto paragraph below",exec:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{select:!!b.activeMark},g=b.paragraphRangeBelow(b.cursorPosition.row);
g.end.row++;b.selection.lead=g.end;c.select||b.collapseSelection();return!0}},{name:"move cursor to screen bottom in 1/3 steps",readOnly:!0,exec:function(b){var c=!!b.activeMark,g=b.cursorPosition,a=b.textLayout.firstFullVisibleLine(b),d=b.textLayout.lastFullVisibleLine(b),f=a+Math.floor((d-a)/2);if(g.row<a)g.row=a;else if(g.row<f)g.row=f;else if(g.row<d)g.row=d;else return!0;b.selection.lead=g;c||(b.selection.anchor=b.selection.lead);return!0}},{name:"move cursor to screen top in 1/3 steps",readOnly:!0,
exec:function(b){var c=!!b.activeMark,g=b.cursorPosition,a=b.textLayout.firstFullVisibleLine(b),d=b.textLayout.lastFullVisibleLine(b),f=a+Math.floor((d-a)/2);if(g.row<=a)return!0;g.row=g.row<=f?a:g.row<=d?f:d;b.selection.lead=g;c||(b.selection.anchor=b.selection.lead);return!0}},{name:"goto line",exec:function(){var b=Bb(regeneratorRuntime.mark(function a(g){var d,f;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return d=!!g.activeMark,k.t0=Number,k.next=4,g.world().prompt("Enter line number");
case 4:return k.t1=k.sent,f=(0,k.t0)(k.t1),isNaN(f)||(d?g.selection.lead={row:f,column:0}:g.cursorPosition={row:f,column:0},g.scrollCursorIntoView(),g.focus()),k.abrupt("return",!0);case 8:case "end":return k.stop()}},a)}));return function(g){return b.apply(this,arguments)}}()},{name:"join line",exec:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{withLine:"before"},g=b.selection,a=g.start,d=g.end;g=g.lead;if(!b.selection.isEmpty()){if(a.row===d.row)return!0;c=b.undoManager.ensureNewGroup(b,
"join line");d=Ih.arr.range(0,d.row-1-a.row).map(function(f){return b.joinLine(a.row)});b.undoManager.group(c);b.selection.isMultiSelection&&(b.cursorPosition=d[0],d.slice(1).forEach(function(f){return b.selection.addRange({start:f,end:f})}));return!0}d=g.row;if("before"===c.withLine&&0>=d||"after"===c.withLine&&d>=b.document.endPosition.row)return!0;b.undoManager.group();b.cursorPosition=b.joinLine("before"===c.withLine?d-1:d);b.undoManager.group();return!0}},{name:"split line",exec:function(b){var c=
b.cursorPosition,g=b.getLine(c.row).match(/^\s*/)[0].length;b.insertText("\n"+" ".repeat(g),c);b.cursorPosition=c;return!0}},{name:"insert line",exec:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{where:"above"},g=b.cursorPosition.row,a=b.getLine(g).match(/^\s*/)[0].length;"below"===c.where&&g++;b.insertText(" ".repeat(a)+"\n",{column:0,row:g});b.cursorPosition={column:a,row:g};return!0}},{name:"duplicate line or selection",exec:function(b){b.undoManager.group();var c=b.selection.end;
if(b.selection.isEmpty())b.insertText(b.getLine(c.row)+"\n",{column:0,row:c.row+1});else{var g=b.selection.range;b.insertText(b.selection.text,c);b.selection=g}b.undoManager.group();return!0}},{name:"delete emtpy line or until end of line",exec:function(b){var c=b.cursorPosition,g=b.getLine(c.row);if(Ih.eqPosition(b.document.endPosition,c))return!0;c=g.trim()?{start:c,end:{row:c.row,column:g.length}}:{start:{row:c.row,column:0},end:{row:c.row+1,column:0}};b.env.eventDispatcher.doCopy(b.textInRange(c));
b.undoManager.group();b.deleteText(c);b.undoManager.group();return!0}},{name:"delete left until beginning of line",exec:function(b){b.activeMark&&(b.activeMark=null);if(!b.selection.isEmpty())return b.selection.text="",!0;var c=b.lineRange(),g=b.cursorPosition;if(Ih.eqPosition({row:g.row,column:0},g))return!0;c={start:Ih.eqPosition(c.start,g)?{row:g.row,column:0}:c.start,end:g};b.deleteText(c);return!0}},{name:"move lines up",multiSelectAction:"single",exec:function(b){var c=b.selection;if(b.inMultiSelectMode()){var g=
c.selections.map(function(f){return f.range});g.slice().sort(Ih.Range.compare).forEach(function(f){b.selection=f;b.execCommand("move lines up")});g.forEach(function(f){f.start.row--;f.end.row--});b.selection.ranges=g;return!0}c.isEmpty()||0!==c.end.column||c.growRight(-1);g=c.start;c=c.end;var a=b.getLine(g.row-1),d=b.undoManager.ensureNewGroup(b);b.insertText(a+"\n",{row:c.row+1,column:0});b.deleteText({start:{row:g.row-1,column:0},end:{row:g.row,column:0}});b.undoManager.group(d);return!0}},{name:"move lines down",
multiSelectAction:"single",exec:function(b){var c=b.selection;if(b.inMultiSelectMode()){var g=c.selections.map(function(f){return f.range});g.slice().sort(Ih.Range.compare).reverse().forEach(function(f){b.selection=f;b.execCommand("move lines down")});g.forEach(function(f){f.start.row++;f.end.row++});b.selection.ranges=g;return!0}c.isEmpty()||0!==c.end.column||c.growRight(-1);var a=c.range,d=a;g=d.start;d=d.end;c.isEmpty()?a={start:{row:g.row,column:0},end:{row:g.row+1,column:0}}:0!==d.column&&(a=
{start:g,end:{row:d.row+1,column:0}});c=b.undoManager.ensureNewGroup(b);a=b.deleteText(a);b.insertText(a,{row:g.row+1,column:0});b.undoManager.group(c);b.selection={start:Object.assign({},g,{row:g.row+1}),end:Object.assign({},d,{row:d.row+1})};return!0}},{name:"old select word",exec:function(b){var c=b.selection;c.range=b.wordAt(c.lead).range;return!0}},{name:"select word",exec:function(b){var c=b.selection;if(b=b.selectMatchingBrackets(b.textString,b.positionToIndex(c.lead)))c.range={start:b[0],
end:b[1]+1};return!0}},{name:"select word right",exec:function(b){var c=b.selection;c.anchor=b.wordRight(c.end).range.end;return!0}},{name:"goto word left",exec:function(b){var c=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{select:!1}).select||!!b.activeMark,g=b.wordLeft().range;b.selection.lead=g.start;c||(b.selection.anchor=g.start);return!0}},{name:"goto word right",exec:function(b){var c=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{select:!1}).select||!!b.activeMark,g=
b.wordRight().range;b.selection.lead=g.end;c||(b.selection.anchor=g.end);return!0}},{name:"delete word right",exec:function(b){b.undoManager.group();var c=b.wordRight().range.end;c={start:b.cursorPosition,end:c};b.env.eventDispatcher.doCopy(b.textInRange(c));b.deleteText(c);b.undoManager.group();return!0}},{name:"delete word left",exec:function(b){b.undoManager.group();var c={start:b.wordLeft().range.start,end:b.cursorPosition};b.deleteText(c);b.undoManager.group();return!0}},{name:"goto matching right",
exec:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{select:!!b.activeMark},g=c.pairs||{"{":"}","[":"]","(":")","<":">"};if(g=b.findMatchingForward(b.cursorPosition,"right",g)||b.findMatchingForward(b.cursorPosition,"left",g))b.selection.lead=g,c.select||(b.selection.anchor=b.selection.lead);return!0}},{name:"goto matching left",exec:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{select:!!b.activeMark},g=c.pairs||{"}":"{","]":"[",")":"(",">":"<"};
if(g=b.findMatchingBackward(b.cursorPosition,"left",g)||b.findMatchingBackward(b.cursorPosition,"right",g))b.selection.lead=g,c.select||(b.selection.anchor=b.selection.lead);return!0}},{name:"realign top-bottom-center",doc:"Cycles through centering the cursor position, aligning it at the top, aligning it at the bottom.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){var c=b.charBoundsFromTextPosition(b.cursorPosition),g=c.topLeft();c=b.height-c.height;var a=b.scroll,d=a.x;a=a.y;
a=2>Math.abs(g.y-a)?g.y-c:2>Math.abs(g.y-a-.5*c)?g.y:g.y-.5*c;b.scroll=Ih.pt(d,a);return!0}},{name:"reverse selection",doc:"switches the selection lead and anchor",exec:function(b){var c=b.selection;if(c.isEmpty()){var g=b.popSavedMark();g&&(b.saveMark(b.cursorPosition),c.lead=g.position)}else c.reverse();return!0}},{name:"toggle active mark",doc:"....",handlesCount:!0,multiSelectAction:"single",exec:function(b,c,g){var a=b.activeMark;c=b.selection;var d=!c.isEmpty();if(4===g){if(b=b.popSavedMark())c.lead=
b.position,d||(c.anchor=c.lead);return!0}if(!a&&!d)return b.activeMark=c.lead,!0;b.saveMark(a||c.anchor);b.activeMark=null;d&&(b.inMultiSelectMode()?c.selections:[c]).forEach(function(f){return f.anchor=f.lead});return!0}},{name:"fit text to column",handlesCount:!0,multiSelectAction:"forEach",exec:function(b,c,g){function a(p,q,r){if(p.length<=d)return[q+p.trim()];r=p.slice(0,d);var t=Ih.arr.last(Ih.string.reMatches(r,k)),w=t&&0<t.start?t.start:d;t=r.slice(0,w);p=q+(r.slice(w)+p.slice(d)).trimLeft();
return[t].concat(a(p,q))}if(4===g)return b.execCommand("join line");b.selection.isEmpty()&&b.selectLine();c=b.selection;var d=g||80,f=c.selectedRows;g=c.range;var k=/[ ]+/g,n=/^[\s\t]+/;c=Ih.string.paragraphs(Ih.arr.range(f.first,f.last).map(function(p){return b.getLine(p)}).join("\n"),{keepEmptyLines:!0});c=Ih.chain(c.map(function(p){if(!/^\s*$/.test(p)){p=p.split("\n").join(" ");if(""===p.trim())p=[""];else{var q=p.match(n);q=q?q[0]:"";p=a(q+p.trim(),q)}p=p.join("\n")+"\n"}return p})).flat().value().join("\n");
b.undoManager.group();b.replace(g,c);b.undoManager.group();return!0}},{name:"lowercase",exec:function(b){b.undoManager.group();b.selection.isEmpty()&&(b.selection=b.wordAt().range);b.selection.text=b.selection.text.toLowerCase();b.undoManager.group();return!0}},{name:"remove trailing whitespace",exec:function(b){b.undoManager.group();var c=0;b.withLinesDo(0,b.documentEndPosition.row,function(g,a){return g.match(/\s+$/)&&++c&&b.replace(a,g.trimRight())});b.world().setStatusMessage("".concat(c," lines cleaned up"));
b.undoManager.group();return!0}},{name:"uppercase",exec:function(b){b.undoManager.group();b.selection.isEmpty()&&(b.selection=b.wordAt().range);b.selection.text=b.selection.text.toUpperCase();b.undoManager.group();return!0}},{name:"newline",exec:function(b){var c=b.cursorPosition,g=b.getLine(c.row),a=g.match(/^\s*/)[0].length;b.undoManager.group();!g.trim()&&a&&(b.deleteText({start:{row:c.row,column:0},end:{row:c.row,column:a}}),c.column=0);if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_newline&&
b.editorPlugin.cmd_newline(c,g,a))return!0;b.selection.text="\n"+" ".repeat(a);b.selection.collapseToEnd();b.undoManager.group();return!0}},{name:"insertstring",exec:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{string:null,undoGroup:!1},g=c.string;c=c.undoGroup;var a="string"===typeof g&&g.length;a||console.warn("command insertstring called with not string value");if(b.rejectsInput()||!a)return!1;b.saveActiveMarkAndDeactivate();if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_insertstring&&
b.editorPlugin.cmd_insertstring(g))return!0;a=b.selection;var d=!a.isEmpty();d&&b.undoManager.group();var f=a.lead;a.replace(g,!0,!0,!0,!(1===g.length&&"\n"!==g&&0<f.column));a.collapseToEnd();d&&b.undoManager.group();c&&(/^[\s\.,\?\+=]+$/.test(g)||"number"!==typeof c?b.undoManager.group():b.undoManager.groupLater(c));return!0}},{name:"toggle line wrapping",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){b.keepPosAtSameScrollOffsetWhile(function(){return b.lineWrapping=b.lineWrapping?
!1:b.fontMetric.isProportional(b.fontFamily)?!0:"by-chars"});return!0}},{name:"cancel input",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b,c,g,a){b.env.eventDispatcher.resetKeyInputState();b.selection.disableMultiSelect&&b.selection.disableMultiSelect();b.selection.isEmpty()||(b.selection.anchor=b.selection.lead);b.activeMark&&(b.activeMark=null);return!0}}];Ih.usefulEditorCommands=[{name:"insert date",handlesCount:!0,exec:function(b,c,g){c=Ih.date.format(new Date,g?"mediumDate":
"isoDate");b.undoManager.group();b.insertText(c);b.undoManager.group();return!0}},{name:"[todo] toggle todo marker",exec:function(b){var c=b.selection;c.isEmpty()&&b.selectLine();b=/\[\s*\]/g;var g=/\[X\]/g,a=c.text;a=b.test(a)?a.replace(b,"[X]"):g.test(a)?a.replace(g,"[ ]"):"[ ] "+a.trimLeft();c.text=a;return!0}},{name:"selected lines: sort",exec:function(b){var c=b.selection,g=c.start.row;c=c.end.row;var a=[];b.withLinesDo(g,c,function(d){var f=a.findIndex(function(k){return k>d});-1<f?a.splice(f,
0,d):a.push(d)});b.undoManager.group();b.replace({start:{row:g,column:0},end:{row:c+1,column:0}},a.join("\n")+"\n");b.undoManager.group();return!0}},{name:"selected lines: reverse",exec:function(b){var c=b.selection,g=c.start.row;c=c.end.row;var a=[];b.withLinesDo(g,c,function(d){return a.push(d)});b.undoManager.group();b.replace({start:{row:g,column:0},end:{row:c+1,column:0}},a.reverse().join("\n")+"\n");b.undoManager.group();return!0}},{name:"selected lines: remove duplicates (uniq)",exec:function(b){var c=
b.selection,g=c.start.row;c=c.end.row;var a=[];b.withLinesDo(g,c,function(d){return Ih.arr.pushIfNotIncluded(a,d)});b.undoManager.group();b.replace({start:{row:g,column:0},end:{row:c+1,column:0}},a.join("\n")+"\n");b.undoManager.group();return!0}},{name:"change string inflection",handlesCount:!0,multiSelectAction:"single",exec:function(){var b=Bb(regeneratorRuntime.mark(function f(g,a,d){var k,n,p,q,r,t,w,x,B;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:B=function(F){return F.match(/[A-Z]/)?
"uppercased":F.match(/-/)?"dashed":F.match(/\s/)?"spaced":"unknown"};x=function(F,L){var G,oa,ha=B(F).trim();"uppercased"===ha?G=/\s*[A-Z0-9]+/g:"dashed"===ha?G=/-\w/g:"spaced"===ha&&(G=/\s+.?/g);"uppercased"===L?oa=function(Ha){return Ha.trim().replace(/^-/,"").toUpperCase()}:"dashed"===L?oa=function(Ha){return"-"+Ha.trim().replace(/^-/,"").toLowerCase()}:"spaced"===L&&(oa=function(Ha){return" "+Ha.trim().replace(/^-/,"").toLowerCase()});return F.replace(G,oa)};g.selection.isEmpty()&&(g.selection=
g.wordAt().range);k=g.selection.ranges;if(n=g.textInRange(k[0])){D.next=8;break}g.setStatusMessage("Please select some text");return D.abrupt("return",!0);case 8:return p=B(n),q=Ih.arr.without(["uppercased","dashed","spaced"],p),D.next=12,g.world().listPrompt("Convert "+p+" into?",q,{});case 12:r=D.sent;t=Nb(r.selected,1);if(w=t[0]){D.next=17;break}return D.abrupt("return",!0);case 17:return g.undoManager.group(),k.forEach(function(F,L){L=g.textInRange(F);L=x(L,w);g.replace(F,L)}),g.undoManager.group(),
g.focus(),D.abrupt("return",!0);case 22:case "end":return D.stop()}},f)}));return function(g,a,d){return b.apply(this,arguments)}}()},{name:"spell check word",exec:function(){var b=Bb(regeneratorRuntime.mark(function d(g,a){var f,k,n,p,q,r,t;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:f=g.wordAt();if(f.string){w.next=4;break}g.setStatusMessage("no word for spellcheck!");return w.abrupt("return",!0);case 4:return w.next=6,pd.import("./spell-checker-1af7c2e4.js");
case 6:return k=w.sent,n=k.spellCheckWord,w.next=10,n(f.string);case 10:p=w.sent;if(p.length){w.next=14;break}g.setStatusMessage("no suggestions for word "+f.string);return w.abrupt("return",!0);case 14:return w.next=16,g.world().filterableListPrompt("Choose replacement for "+f.string,p);case 16:q=w.sent;r=Nb(q.selected,1);if(t=r[0])g.undoManager.group(),g.replace(f.range,t),g.undoManager.group();return w.abrupt("return",!0);case 21:case "end":return w.stop()}},d)}));return function(g,a){return b.apply(this,
arguments)}}()},{name:"[shell] run shell command on region",multiSelectAction:"single",exec:function(){var b=Bb(regeneratorRuntime.mark(function d(g,a){var f,k,n,p,q,r,t;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return k=(f=g.textInRange(g.selection))&&0!==f.length?{stdin:f}:{},w.next=4,g.world().prompt("Enter shell command to run on region.",{historyId:"lively.ide.execShellCommand"});case 4:return n=w.sent,w.next=7,Promise.resolve().then(function(){return rT});
case 7:p=w.sent;q=p.runCommand;if(n){w.next=11;break}return w.abrupt("return",g.setStatusMessage("No command entered, aborting...!"));case 11:return r=q(n,k),w.prev=12,w.next=15,r.whenDone();case 15:t=r.output.trim();g.undoManager.group();g.selection.selections.forEach(function(x){return x.text=t});g.undoManager.group();w.next=24;break;case 21:w.prev=21,w.t0=w["catch"](12),g.showError(w.t0);case 24:return w.abrupt("return",!0);case 25:case "end":return w.stop()}},d,null,[[12,21]])}));return function(g,
a){return b.apply(this,arguments)}}()},{name:"open file at cursor",exec:function(){var b=Bb(regeneratorRuntime.mark(function d(g,a){var f,k,n,p,q,r,t,w,x;return regeneratorRuntime.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return g.getLine(),f=g.cursorPosition.row,k=g.document.scanBackward(g.cursorPosition,function(D,F){return(0>=F.column||D.match(/\s/))&&F})||{row:0,column:0},n=g.document.scanForward(g.cursorPosition,function(D,F){return(F.row!=f||D.match(/\s/))&&F})||g.documentEndPosition,
p=g.textInRange({start:k,end:n}).replace(/\s/g,""),q=p.split(":"),r=q[0].match(/^file|http/)?"".concat(q.shift(),":").concat(q.shift()):q.shift(),q[0].match(/^[0-9]+$/)&&(r+=":"+q.shift()),B.next=10,pd.import("./text-editor-408ce72a.js");case 10:return t=B.sent,w=t["default"],x=w.openInWindow(),x.location=r,B.abrupt("return",x);case 15:case "end":return B.stop()}},d)}));return function(g,a){return b.apply(this,arguments)}}()},{name:"run code on text morph",doc:"...",exec:function(){var b=Bb(regeneratorRuntime.mark(function d(g,
a){var f,k,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return f={targetModule:"lively://code-on-text-morph",context:g},q.next=3,g.world().editPrompt("Run code on selection. Use this.selection.text to access it",{requester:g,mode:"js",evalEnvironment:f,historyId:"run-code-on-text-morph-hist"});case 3:return k=q.sent,q.prev=4,g.undoManager.group(),q.next=8,lively.vm.runEval(k,f);case 8:p=q.sent;g.undoManager.group();n=p.isError?p.value:null;q.next=16;break;case 13:q.prev=
13,q.t0=q["catch"](4),n=q.t0;case 16:return n&&g.showError(n),q.abrupt("return",void 0);case 18:case "end":return q.stop()}},d,null,[[4,13]])}));return function(g,a){return b.apply(this,arguments)}}()},{name:"change editor mode",exec:function(){var b=Bb(regeneratorRuntime.mark(function a(g){var d,f,k,n,p,q,r,t,w;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return d=function(B){return!B.endsWith("ide/editor-plugin.js")&&B.endsWith("editor-plugin.js")},x.next=3,lively.modules.getPackage("lively.ide").resources(d);
case 3:return f=x.sent,k=g.editorPlugin||{},n=k.shortName,p=0,q=["<no mode>"].concat(f.map(function(B,D){var F=B.url.match(/([^\/]+)\/editor-plugin.js/)[1];F===n&&(p=D);return{isListItem:!0,string:F,value:B}})),x.next=9,g.world().filterableListPrompt("choose mode",q,{requester:g,preselect:p,historyId:"lively.morphic/text-change-editor-mode-hist",fuzzy:!0});case 9:r=x.sent;t=Nb(r.selected,1);if(w=t[0]){x.next=14;break}return x.abrupt("return");case 14:if("<no mode>"!==w){x.next=19;break}x.next=17;
return g.changeEditorMode(null);case 17:return g.resetTextAttributes(),x.abrupt("return");case 19:if(w.isLoaded){x.next=22;break}x.next=22;return lively.modules.module(w.url).load();case 22:return x.next=24,g.changeEditorMode(w.url);case 24:case "end":return x.stop()}},a)}));return function(g){return b.apply(this,arguments)}}()},{name:"report token at cursor",exec:function(){var b=Bb(regeneratorRuntime.mark(function a(g){var d,f,k,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=
p.next){case 0:return d=g.tokenAt(g.cursorPosition)||{},f=d.token,k=d.start,n=d.end,g.setStatusMessage(f?"".concat(f," ").concat(k.column," => ").concat(n.column):"no token"),p.abrupt("return",!0);case 3:case "end":return p.stop()}},a)}));return function(g){return b.apply(this,arguments)}}()}];(uV=Ih.commands).push.apply(uV,hb(Ih.usefulEditorCommands));Ih.iyGotoCharActivate=zI;Ih.commands.push(Ih.iyGotoCharActivate);Ih.searchCommands=yI;(vV=Ih.commands).push.apply(vV,hb(Ih.searchCommands));var wV=
Ih.commands;Ih["default"]=wV;var Ge=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js");Ge.Rectangle=vl;Ge.Point=ws;Ge.rect=Bm;Ge.Color=Nl;Ge.pt=Ij;Ge.string=ji;Ge.num=Yk;Ge.obj=nh;Ge.fun=wn;Ge.promise=ai;Ge.arr=mh;Ge.signal=Vl;Ge.noUpdate=Kt;Ge.disconnect=It;Ge.morph=il;Ge.touchInputDevice=uo;Ge.sanitizeFont=Qt;Ge.config=al;Ge.Morph=An;Ge.Selection=vI;Ge.MultiSelection=wI;Ge.Document=qV;Ge.objectReplacementChar=AB;Ge.Anchor=gy;Ge.Range=Rs;Ge.eqPosition=kp;Ge.lessPosition=lo;
Ge.KeyHandler=XA;Ge.UndoManager=WA;Ge.TextSearcher=xI;Ge.TextLayout=sV;Ge.Renderer=tV;Ge.extractHTMLFromTextMorph=UF;Ge.commands=wV;Ge.textAndAttributesWithSubRanges=SF;Ge.serializeMorph=fw;Ge.deserializeMorph=SC;Ge.getSvgVertices=Zv;Ge.renderSubTree=zC;Ge.ShadowObject=Aq;Ge.getClassName=en;var ev=Lc("m",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js"),g=c.hasOwnProperty("Text")&&"function"===typeof c.Text?c.Text:c.Text=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=a.position,f=a.rightCenter,k=a.leftCenter,n=a.topCenter,p=a.bottom,q=a.top,r=a.right,t=a.left,w=a.bottomCenter,x=a.bottomLeft,B=a.bottomRight,D=a.topRight,F=a.topLeft,L=a.center;ie._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,a);this.undoManager.reset();this.fit();void 0!==d&&(this.position=
d);void 0!==f&&(this.rightCenter=f);void 0!==k&&(this.leftCenter=k);void 0!==n&&(this.topCenter=n);void 0!==p&&(this.bottom=p);void 0!==q&&(this.top=q);void 0!==r&&(this.right=r);void 0!==t&&(this.left=t);void 0!==w&&(this.bottomCenter=w);void 0!==x&&(this.bottomLeft=x);void 0!==B&&(this.bottomRight=B);void 0!==D&&(this.topRight=D);void 0!==F&&(this.topLeft=F);void 0!==L&&(this.center=L)}},{key:"__deserialize__",value:function(a,d,f,k){ie._get(Object.getPrototypeOf(g.prototype),"__deserialize__",
this).call(this,a,d,f,k);this.viewState=this.defaultViewState;this.markers=[];this.textRenderer=new Ge.Renderer(this.env);this.textLayout=new Ge.TextLayout(this);this.changeDocument(Ge.Document.fromString(""));this.ensureUndoManager();a.cachedLineBounds&&(this._initializedByCachedBounds=a.cachedLineBounds);this._isDeserializing=!0}},{key:"__after_deserialize__",value:function(a,d,f){var k=this;ie._get(Object.getPrototypeOf(g.prototype),"__after_deserialize__",this).call(this,a,d,f);this._isDeserializing=
!1;this.whenRendered().then(function(){k.embeddedMorphs.forEach(function(n){return n.top=0})})}},{key:"__only_serialize__",get:function(){return Ge.arr.withoutAll(ie._get(Object.getPrototypeOf(g.prototype),"__only_serialize__",this),["document","textRenderer","viewState","undoManager","markers","textLayout","embeddedMorphMap",this.displacingMorphMap.size?"":"displacingMorphMap"])}},{key:"__additionally_serialize__",value:function(a,d,f,k){ie._get(Object.getPrototypeOf(g.prototype),"__additionally_serialize__",
this).call(this,a,d,f,k);a.props.selections={key:"selections",verbatim:!0,value:(this.selection.isMultiSelection?this.selection.ranges:[this.selection.range]).map(function(F){return Ge.obj.select(F,["start","end"])})};a.props.anchors&&this.selection.isEmpty()&&(a.props.anchors.value=a.props.anchors.value.filter(function(F){return!F.id.includes("selection-")}));a.props.textAndAttributes={key:"textAndAttributes",value:this.textAndAttributes.map(function(F){if(!F)return F;if(F.isMorph)return f.ref(F).asRefForSerializedObjMap();
if(Ge.obj.isObject(F)){var L={};F=JSON.stringify(F,function(G,oa){return oa&&oa.__serialize__?(oa=oa.__serialize__(),Object.assign(L,oa.bindings),"->"+"[".concat(oa.__expr__,"]")):oa});F=F.replace(/"->\[.*\]"/g,function(G){return G.slice(4,-2)});return f.expressionSerializer.exprStringEncode({__expr__:"(".concat(F,")"),bindings:L})}return F})};d=[];k=ba(this.document.lines);var n;try{for(k.s();!(n=k.n()).done;){var p=n.value,q=this.textLayout.lineCharBoundsCache.get(p);if(q){var r=[],t=void 0,w=0;
if(q){var x=ba(q),B;try{for(x.s();!(B=x.n()).done;){var D=B.value;if(t){if(Ge.num.roundTo(t.width,.001)===Ge.num.roundTo(D.width||0,.001)&&D.height===t.height){w++;continue}r.push([w,Ge.num.roundTo(t.width||0,.001),t.height||0])}w=1;t=D}}catch(F){x.e(F)}finally{x.f()}}t&&r.push([w,Ge.num.roundTo(t.width||0,.001),t.height||0]);d.push([p.row,r.flat()])}}}catch(F){k.e(F)}finally{k.f()}a.cachedLineBounds=d}},{key:"spec",value:function(){var a=ie._get(Object.getPrototypeOf(g.prototype),"spec",this).call(this);
a.textString=this.textString;return Ge.obj.dissoc(a,"anchors embeddedMorphMap plugins savedMarks textLayout textRenderer viewState undoManager metadata document displacingMorphMap".split(" "))}},{key:"isText",get:function(){return!0}},{key:"makeDirty",value:function(){this._positioningSubmorph||ie._get(Object.getPrototypeOf(g.prototype),"makeDirty",this).call(this)}},{key:"onChange",value:function(a){var d=this,f=a.prop,k=a.selector,n=a.meta,p=this.lineWrapping,q=!1,r=!1,t=!1,w=!1,x=!1,B=!1;if(k)q=
"replace"===k,w="addTextAttribute"===k,this._displacementChange=!this._displacing&&q;else switch(f){case "scroll":x=r=!0;break;case "extent":r=!0;f=a.prevValue.subPt(a.value);B=(t=this.fixedWidth&&!!this.lineWrapping&&!!f.x)&&(!this.fixedWidth||!this.fixedHeight);break;case "wordSpacing":case "letterSpacing":case "tabWidth":p&&(w=!0);break;case "fontFamily":case "fontSize":case "lineHeight":case "textAlign":case "fontWeight":case "fontStyle":case "textStyleClasses":case "fixedWidth":w=a.prevValue!==
a.value;break;case "lineWrapping":w=!0;break;case "borderWidth":case "fixedHeight":t=a.prevValue!==a.value;break;case "padding":t=!0}ie._get(Object.getPrototypeOf(g.prototype),"onChange",this).call(this,a);f=function(){d._textChange=!0;x&&(d.viewState.wasScrolled=!0);(w||B||t&&!n.styleSheetChange)&&d.invalidateTextLayout(w,w);(t||w)&&d.document&&d.world()&&d.document.lines.forEach(function(D){return D.hasEstimatedExtent=!0});d._displacementChange&&(d._displacementChange=!1);q&&Ge.signal(d,"textChange",
a);r&&Ge.signal(d,"viewChange",a);d._textChange=!1};n.animation?Ge.promise.delay(n.animation.duration).then(f):this.ownerChain().every(function(D){return D.visible})&&f()}},{key:"onSubmorphChange",value:function(){var a=Bb(regeneratorRuntime.mark(function n(f,k){var p=this,q,r,t,w,x,B,D,F;return regeneratorRuntime.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(!f.meta||!f.meta.styleSheetChange){L.next=2;break}return L.abrupt("return");case 2:ie._get(Object.getPrototypeOf(g.prototype),"onSubmorphChange",
this).call(this,f,k);if(!f.meta.animation){L.next=6;break}L.next=6;return f.meta.animation.asPromise();case 6:if(!this._textChange&&this._positioningSubmorph!==k){L.next=8;break}return L.abrupt("return");case 8:q=f.prop;r="position"===q||"extent"===q||"scale"===q||"rotation"===q;this.displacingMorphMap.get(k)&&r&&hb(this.displacingMorphMap.keys()).filter(function(G){return G.top>=k.top}).forEach(function(G){p._intersectionShapeCache&&p._intersectionShapeCache["delete"](G);p.updateTextDisplacementFor(G)});
t=this.embeddedMorphMap.get(k)||{};w=t.anchor;if(!w||!r){L.next=23;break}if("position"!==q){L.next=18;break}this._positioningSubmorph=k;k.position=f.prevValue;this._positioningSubmorph=null;return L.abrupt("return");case 18:x=k.bounds(),B=k._lastBounds,D=w.position.row,F=this.document.getLine(D),B&&B.height===x.height&&B.bottom()===x.bottom()||(F.hasEstimatedExtent=!0,k._lastBounds=x);case 23:case "end":return L.stop()}},n,this)}));return function(f,k){return a.apply(this,arguments)}}()},{key:"removeMorph",
value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,f=this.embeddedMorphMap,k=this.displacingMorphMap;k&&k.has(a)&&this.toggleTextWrappingAround(a,!1);if(f&&f.has(a)){if(k=f.get(a).anchor){var n=k.position;k=n.row;n=n.column;this.replace({start:{row:k,column:n},end:{row:k,column:n+1}},[],!0,d);this.replace}f["delete"](a)}return ie._get(Object.getPrototypeOf(g.prototype),"removeMorph",this).call(this,a)}},{key:"toggleTextWrappingAround",value:function(a,d){var f=this;
if(d)this.displacingMorphMap.has(a)||(this.embeddedMorphMap.has(a)&&this.addMorph(a.remove()),this.displacingMorphMap.set(a,[]),this.updateTextDisplacementFor(a));else if(d=this.displacingMorphMap.get(a))this._displacing=!0,d.forEach(function(k){return f.removeMorph(k)}),this._displacing=!1,this.displacingMorphMap["delete"](a)}},{key:"updateTextDisplacementFor",value:function(a){var d=this;if(!this._displacing){this._displacing=!0;var f=this.displacingMorphMap.get(a),k=this.computeDisplacementRectsFor(a).values(),
n=[];f.forEach(function(x){return d.removeMorph(x,!1)});this.textLayout.resetLineCharBoundsCacheOfRange(this,a._displacementRange);k=ba(k);var p;try{for(k.s();!(p=k.n()).done;){var q=p.value,r=f.shift()||Ge.morph({visible:!0,reactsToPointer:!1,isDisplacementMorph:!0}),t=this.textLayout.textPositionFromPoint(this,q.leftCenter());r.setBounds(q);this.insertText([r,{}],t);this.viewState._needsFit=!1;if(w===r.top)r.remove();else{var w=r.top;n.push(r)}}}catch(x){k.e(x)}finally{k.f()}f.forEach(function(x){return d.removeMorph(x,
!1)});this.displacingMorphMap.set(a,n);this._displacing=!1}}},{key:"computeDisplacementRectsFor",value:function(a){var d=this.textLayout,f=d.textPositionFromPoint(this,a.topLeft),k=d.textPositionFromPoint(this,a.bottomLeft),n=[];a._displacementRange=Ge.Range.fromPositions(f,k);for(f=f.row;f<k.row+1;f++)n.push.apply(n,hb(d.rangesOfWrappedLine(this,f)));this._intersectionShapeCache||(this._intersectionShapeCache=new Map);(k=this._intersectionShapeCache.get(a))||(k=a.isPath?Shapes.path(Ge.getSvgVertices(a.vertices)):
"Ellipse"===Ge.getClassName(a)?Shapes.ellipse(a.center.x,a.center.y,a.width/2,a.height/2):Shapes.rectangle(a.left,a.top,a.width,a.height));this._intersectionShapeCache.set(a,k);a=this.width;f=new Map;for(var p=0;p<n.length;p++){var q=n[p],r=d.computeMaxBoundsForLineSelection(this,q),t=r.height;r=r.y;var w=Shapes.rectangle(a,t,0,r);w=Intersection.intersect(w,k);1>w.points.length||(w=Ge.Rectangle.unionPts(w.points.map(Ge.Point.fromLiteral)),w.y=r,w.height=t,w.x-=15,w.width+=30,f.set(q,w))}return f}},
{key:"rejectsInput",value:function(){return this.readOnly}},{key:"addAnchor",value:function(a){if(a){"string"===typeof a&&(a={id:a,row:0,column:0});if(!a.isAnchor){var d=a,f=d.column,k=d.row;a=new Ge.Anchor(d.id,"number"===typeof k&&"number"===typeof f?{row:k,column:f}:void 0,d.insertBehavior||"move")}if(d=a.id&&this.anchors.find(function(n){return n.id===a.id}))return Object.assign(d,a);this.anchors.push(a);return a}}},{key:"removeAnchor",value:function(a){for(var d=this.anchors,f,k=d.length;k--;){var n=
d[k];if(n.id===a||n===a)f=n,d.splice(k,1)}return f}},{key:"addMarker",value:function(a){this.removeMarker(a.id);this.markers.push(a);this.makeDirty();return a}},{key:"removeMarker",value:function(a){var d="string"===typeof a?a:a.id;this.markers=this.markers.filter(function(f){return f.id!==d});this.makeDirty()}},{key:"saveMark",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition,d=1<arguments.length?arguments[1]:void 0,f=this.activeMark;f&&f!==a&&!f.equalsPosition(a)&&
(this.savedMarks=this.savedMarks.concat(f));d?this.activeMark=a:this.savedMarks=this.savedMarks.concat(a)}},{key:"saveActiveMarkAndDeactivate",value:function(){var a=this.activeMark;a&&(this.saveMark(a),this.activeMark=null)}},{key:"popSavedMark",value:function(){var a=this.activeMark;if(a)return this.activeMark=null,a;a=Ge.arr.last(this.savedMarks);this.savedMarks=this.savedMarks.slice(0,-1);return a}},{key:"lastSavedMark",get:function(){return this.activeMark||Ge.arr.last(this.savedMarks)}},{key:"savedMarkForSelection",
value:function(a){var d=this.selection,f=this.savedMarks,k=this.multiSelect?this.multiSelect.getAllRanges().length:1;k=f.length-(k-(d.index||0));d=f[k]||d.anchor;a&&"row"in a&&"column"in a&&(this.savedMarks=f.slice(0,k).concat(a).concat(f.slice(k+1)));return d}},{key:"addPlugin",value:function(a){this.plugins.includes(a)||(this.plugins.push(a),this._cachedKeyhandlers=null,"function"===typeof a.attach&&a.attach(this));return a}},{key:"removePlugin",value:function(a){if(!this.plugins.includes(a))return!1;
this._cachedKeyhandlers=null;Ge.arr.remove(this.plugins,a);"function"===typeof a.detach&&a.detach(this);return!0}},{key:"pluginCollect",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];this.plugins.forEach(function(f){return"function"===typeof f[a]&&(d=f[a](d))});return d}},{key:"pluginInvokeFirst",value:function(a){for(var d=this.pluginFind(function(p){return"function"===typeof p[a]}),f=arguments.length,k=Array(1<f?f-1:0),n=1;n<f;n++)k[n-1]=arguments[n];return d?
d[a].apply(d,k):void 0}},{key:"pluginFind",value:function(a){return this.plugins.slice().reverse().find(a)}},{key:"editorPlugin",get:function(){return this.pluginFind(function(a){return a.isEditorPlugin})}},{key:"lookupEditorPluginNamed",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n,p,q,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return f=Ge.config.ide.modes.aliases[f]||f,p=(n=/^[^:\\]+:\/\//.test(f))?f:"lively.ide/".concat(f,"/editor-plugin.js"),
t.next=5,lively.modules.doesModuleExist(p);case 5:if(t.sent){t.next=7;break}return t.abrupt("return",null);case 7:return t.next=9,lively.modules.module(p).load();case 9:return q=t.sent,r=q["default"],t.abrupt("return",r);case 12:case "end":return t.stop()}},k)}));return function(f){return a.apply(this,arguments)}}()},{key:"changeEditorMode",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:n=this.plugins.filter(function(r){return!r.isEditorPlugin});
if(f){q.next=4;break}this.plugins=n;return q.abrupt("return",null);case 4:if("string"!==typeof f){q.next=12;break}q.next=7;return this.lookupEditorPluginNamed(f);case 7:if(p=q.sent){q.next=10;break}throw Error("Cannot find editor mode ".concat(f));case 10:f=new p(Ge.config.codeEditor.defaultTheme),this.evalEnvironment&&(f.evalEnvironment=this.evalEnvironment);case 12:return this.plugins=n.concat(f),q.abrupt("return",f);case 14:case "end":return q.stop()}},k,this)}));return function(f){return a.apply(this,
arguments)}}()},{key:"invalidateTextLayout",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(!this._isDeserializing){var f=this.viewState;f&&(this.fixedWidth&&this.fixedHeight||(f._needsFit=!0),f=this.textLayout)&&(a&&f.resetLineCharBoundsCache(this),f.estimateLineHeights(this,d))}}},{key:"textBounds",value:function(){return this.textLayout.textBounds(this)}},{key:"defaultCharExtent",value:function(){return this.textLayout.defaultCharExtent(this)}},
{key:"scrollExtent",get:function(){return this.textBounds().extent().addPt(this.padding.topLeft()).addPt(this.padding.bottomRight()).addPt(this.scrollbarOffset).maxPt(ie._get(Object.getPrototypeOf(g.prototype),"scrollExtent",this))}},{key:"commands",get:function(){return this.pluginCollect("getCommands",(this._commands||[]).concat(Ge.commands))}},{key:"execCommand",value:function(a,d,f,k){function n(L){(q.hasOwnProperty("scrollCursorIntoView")?q.scrollCursorIntoView:1)&&Ge.fun.debounceNamed("execCommand-scrollCursorIntoView-"+
L.id,100,function(){return L.scrollCursorIntoView()})()}var p=this,q=(this.lookupCommand(a)||{}).command;if(q){var r=this.inMultiSelectMode(),t=q.hasOwnProperty("multiSelectAction")?q.multiSelectAction:"forEach";if(r&&"forEach"===t){var w=this.selection;r=this.selection.selections.slice().reverse();this.selection=r[0];this._multiSelection=w;try{var x=this.execCommand(a,d,f,k)}catch(L){throw this.selection=w,this._multiSelection=null,this.selection.mergeSelections(),L;}if(!x)return x;var B=[x];if("function"===
typeof x.then&&"function"===typeof x["catch"])return Ge.promise["finally"](Ge.promise.chain([function(){return x}].concat(r.slice(1).map(function(L){return function(){p.selection=L;return Promise.resolve(p.execCommand(a,d,f,k)).then(function(G){return B.push(G)})}}))).then(function(){return B}),function(){p.selection=w;p._multiSelection=null;p.selection.mergeSelections()});try{var D=ba(r.slice(1)),F;try{for(D.s();!(F=D.n()).done;)this.selection=F.value,B.push(this.execCommand(a,d,f,k))}catch(L){D.e(L)}finally{D.f()}}finally{this.selection=
w,this._multiSelection=null,this.selection.mergeSelections()}return B}(D=this.commandHandler.exec(a,this,d,f,k))&&("function"===typeof D.then&&"function"===typeof D["catch"]?D.then(function(){return n(p)}):n(this));return D}}},{key:"changeDocument",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,f;this.document?f=this.defaultTextStyle:d=!1;this.document=a;this.textLayout.reset();d&&(this.defaultTextStyle=f);this.makeDirty();this.consistencyCheck()}},{key:"textInRange",
value:function(a){return this.document.textInRange(a)}},{key:"charRight",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition,d=a.column;return this.getLine(a.row).slice(d,d+1)}},{key:"charLeft",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition,d=a.column;return this.getLine(a.row).slice(d-1,d)}},{key:"indexToPosition",value:function(a){return this.document.indexToPosition(a)}},{key:"positionToIndex",value:function(a){return this.document.positionToIndex(a)}},
{key:"getVisibleLine",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition.row;return this.textLayout.wrappedLines(this)[a].text}},{key:"isLineVisible",value:function(){return this.textLayout.isLineVisible(this,0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition.row)}},{key:"isLineFullyVisible",value:function(){return this.textLayout.isLineFullyVisible(this,0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition.row)}},
{key:"getLine",value:function(){return this.document.getLineString(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition.row)}},{key:"lineCount",value:function(){return this.document.rowCount}},{key:"isLineEmpty",value:function(a){return!this.getLine(a).trim()}},{key:"isAtLineEnd",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition,d=this.getLine(a.row);return a.column===d.length}},{key:"wordsOfLine",value:function(){return this.document.wordsOfLine(0<
arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition.row)}},{key:"wordAt",value:function(){return this.document.wordAt(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition)}},{key:"wordLeft",value:function(){return this.document.wordLeft(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition)}},{key:"wordRight",value:function(){return this.document.wordRight(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition)}},
{key:"lineRange",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition.row,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;"number"!==typeof a&&this.cursorPosition.row;var f=this.getLine(a);a={start:{column:0,row:a},end:{column:f.length,row:a}};f=f.match(/^\s*/);f[0].length&&d&&(a.start.column+=f[0].length);return new Ge.Range(a)}},{key:"screenLineRange",value:function(){return this.textLayout.screenLineRange(this,0<arguments.length&&void 0!==
arguments[0]?arguments[0]:this.cursorPosition,1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0)}},{key:"insertTextAndSelect",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;a=String(a);d?this.selection.range=this.insertText(a,d):this.selection.text=a}},{key:"append",value:function(a){var d=this;return this.saveExcursion(function(){return d.insertText(a,d.documentEndPosition)})}},{key:"insertText",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:this.cursorPosition;return this.replace({start:d,end:d},a,2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0)}},{key:"deleteText",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,f=this.textAndAttributesInRange(a);this.replace(a,[],!1,d);return f}},{key:"replace",value:function(a,d){var f=this,k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,n=3<arguments.length&&void 0!==arguments[3]?
arguments[3]:!0,p=4<arguments.length&&void 0!==arguments[4]?arguments[4]:!0,q=5<arguments.length&&void 0!==arguments[5]?arguments[5]:!0;a=a.isRange?a:new Ge.Range(a);var r="string"===typeof d?[d,null]:Array.isArray(d)?d:[String(d||""),null],t=!r.length||2===r.length&&!r[0],w=a.isEmpty();if(t&&w)return a;var x;k&&(x=this.textAttributeAt({row:a.start.row,column:a.start.column-(0<a.start.column?1:0)}));var B=[];for(k=0;k<r.length;k+=2)t=r[k],w=r[k+1],t.isMorph&&B.push(t),x&&(r[k+1]=Object.assign({},
x,{},w));p&&this.undoManager.undoStart(this,"replace");var D=this.textAndAttributesInRange(a),F=this.document.replace(a,r,this.debug&&this.debugHelper(this.debug)).inserted;this.addMethodCallChangeDoing({target:this,selector:"replace",args:[a,r],undo:{target:this,selector:"replace",args:[F,D,!1]}},function(){n&&(f.invalidateTextLayout(!1,!1),f.textLayout.resetLineCharBoundsCacheOfRange(f,F));if(!Ge.eqPosition(a.end,F.end)){if(Ge.lessPosition(F.end,a.end)){var L=(new Ge.Range(a)).subtract(F),G=Nb(L,
1)[0];f.anchors.forEach(function(ha){return ha.onDelete(G)})}else{L=(new Ge.Range(F)).subtract(a);var oa=Nb(L,1)[0];f.anchors.forEach(function(ha){return ha.onInsert(oa)})}f.selectable&&(f._multiSelection?f._multiSelection.updateFromAnchors():f.getProperty("selection")&&f.selection.updateFromAnchors())}f._updateEmbeddedMorphsDuringReplace(B,F,r,D);f._isDeserializing&&f._initializedByCachedBounds||f.textLayout.estimateLineHeights(f,!1);q&&f.consistencyCheck()});p&&this.undoManager.undoStop();return F}},
{key:"_updateEmbeddedMorphsDuringReplace",value:function(a,d,f,k){for(var n=this.embeddedMorphMap,p=0;p<k.length;p+=2){var q=k[p];if(q.isMorph&&!a.includes(q)){if(n){var r=n.get(q);r&&r.anchor&&(this.removeAnchor(r.anchor),Ge.disconnect(r.anchor,"position",q,"position"));n.set(q,Object.assign({},r,{anchor:null}))}q.remove()}}if(a.length)for(f=Ge.textAndAttributesWithSubRanges(d.start,f),d=f.ranges,f=f.textAndAttributes,k=0;k<d.length;k++)if(p=f[2*k],p.isMorph&&(console.assert(a.includes(p),"????"),
q=d[k].start,p.owner!==this&&this.addMorph(p),n))if(n.has(p)){if(Ge.__inter0__=n.get(p),r=Ge.__inter0__.anchor)r.position=q}else r=this.addAnchor(Object.assign({id:"embedded-"+p.id},q)),r.embeddedMorph=p,n.set(p,{anchor:r})}},{key:"applyJsDiffPatch",value:function(a){function d(w,x,B,D){var F=k.indexToPosition(w+B),L=k.indexToPosition(x+B);D.push(k.deleteText({start:F,end:L}));return B-(x-w)}function f(w,x,B,D){D.push(k.insertText(x,k.indexToPosition(w+B)));return B}var k=this,n=[],p=0,q=0;a=ba(a);
var r;try{for(a.s();!(r=a.n()).done;){var t=r.value;t.removed?q=d(p,p+t.count,q,n):t.added&&(q=f(p,t.value,q,n));p+=t.count}}catch(w){a.e(w)}finally{a.f()}return n}},{key:"applyTextChanges",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,k=3<arguments.length?arguments[3]:void 0,n=[],p=ba(a),q;try{for(p.s();!(q=p.n()).done;){var r=Nb(q.value,3),t=r[0],w=r[1],x=r[2];if(d){var B="number"===typeof w?w:this.positionToIndex(w);
w=B+d;x&&"string"!==typeof x&&!Array.isArray(x)&&(x=("number"===typeof x?x:this.positionToIndex(x))+d);w=B+d}var D="number"===typeof w?this.indexToPosition(w):w;switch(t){case "delete":case "remove":var F="number"===typeof x?this.indexToPosition(x):x;n.push(this.deleteText({start:D,end:F},k));break;case "insert":n.push(this.insertText(x,D,f,k));break;default:console.warn("[applyTextChanges] unknown type: ".concat(t))}}}catch(L){p.e(L)}finally{p.f()}return n}},{key:"modifyLines",value:function(a,d,
f){var k=this;f=Ge.arr.range(a,d).map(function(n){return k.getLine(n)}).map(f).join("\n")+"\n";this.deleteText({start:{row:a,column:0},end:{row:d+1,column:0}},!1);this.insertText(f,{row:a,column:0})}},{key:"modifySelectedLines",value:function(a){var d=this.selection.isEmpty()?this.lineRange(void 0,!1):this.selection.range;return this.modifyLines(d.start.row,d.end.row,a)}},{key:"withLinesDo",value:function(a,d,f){var k=this;return Ge.arr.range(a,d).map(function(n){var p=k.getLine(n);n=Ge.Range.create(n,
0,n,p.length);return f(p,n)})}},{key:"withSelectedLinesDo",value:function(a){var d=this.selection.isEmpty()?this.lineRange(void 0,!1):this.selection.range,f=d.start.row;d=d.end;var k=d.row;return this.withLinesDo(f,0===d.column&&k>f?k-1:k,a)}},{key:"joinLine",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition.row,d=this.getLine(a),f=this.getLine(a+1);f=d+f.replace(/^\s+/,"")+this.document.constructor.newline;this.replace({start:{column:0,row:a},end:{column:0,
row:a+2}},f,!0);return{row:a,column:d.length}}},{key:"whatsVisible",get:function(){return this.textLayout.whatsVisible(this)}},{key:"flash",value:function(){var a=this,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.selection.range,f=1<arguments.length?arguments[1]:void 0;f=Object.assign({time:1E3,fill:Ge.Color.orange},f);var k=f.id||"flash"+Ge.string.newUUID();this.addMarker({id:k,range:d,style:{"background-color":f.fill.toCSSString(),"pointer-events":"none"}});Ge.fun.debounceNamed("flash-"+
k,f.time,function(){return a.removeMarker(k)})()}},{key:"addTextAttribute",value:function(a){var d=this,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selection,k={start:f.start,end:f.end};this.undoManager.undoStart(this,"addTextAttribute");this.addMethodCallChangeDoing({target:this,selector:"addTextAttribute",args:[a,k],undo:{target:this,selector:"removeTextAttribute",args:[a,k]}},function(){d.document.mixinTextAttribute(a,k);d.onAttributesChanged(k);d.consistencyCheck()});this.undoManager.undoStop();
return a}},{key:"removeTextAttribute",value:function(a){var d=this,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selection,k={start:f.start,end:f.end};this.undoManager.undoStart(this,"removeTextAttribute");this.addMethodCallChangeDoing({target:this,selector:"removeTextAttribute",args:[a,k],undo:{target:this,selector:"addTextAttribute",args:[a,k]}},function(){d.document.mixoutTextAttribute(a,k);d.onAttributesChanged(k);d.consistencyCheck()});this.undoManager.undoStop()}},{key:"setTextAttributesWithSortedRanges",
value:function(a){this.document.setTextAttributesWithSortedRanges(a);this.consistencyCheck();for(var d=0;d<a.length;)this.onAttributesChanged(a[d]),d+=2}},{key:"textAttributeAt",value:function(a){return this.document.textAttributeAt(a)}},{key:"textAttributeAtPoint",value:function(a){return this.textAttributeAt(this.textLayout.textPositionFromPoint(this,a))}},{key:"textAndAttributesInRange",value:function(){return this.document.textAndAttributesInRange(0<arguments.length&&void 0!==arguments[0]?arguments[0]:
this.selection.range)}},{key:"resetTextAttributes",value:function(){this.document.resetTextAttributes();this.onAttributesChanged(this.documentRange);this.consistencyCheck()}},{key:"onAttributesChanged",value:function(a){this.invalidateTextLayout(!1,!1);var d=this.textLayout;d&&d.resetLineCharBoundsCacheOfRange(this,a);this.makeDirty()}},{key:"styleAt",value:function(a){return(a=this.textLayout.chunkAtPos(this,a))?a.style:Object.assign({},this.defaultTextStyle)}},{key:"getStyleInRange",value:function(){return this.textAndAttributesInRange(0<
arguments.length&&void 0!==arguments[0]?arguments[0]:this.selection).filter(function(a,d){return 0!==d%2}).reduce(function(a,d){for(var f in d){var k=d[f];if(!a.hasOwnProperty(f)||void 0!==k&&null!==k)a[f]=k}return a},{})}},{key:"setStyleInRange",value:function(a){for(var d=this,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selection,k=this.textAndAttributesInRange(f),n={start:Object.assign({},f.start),end:Object.assign({},f.start)},p=[],q=0;q<k.length;q+=2){var r=k[q],t=k[q+1],w=
-1;"string"!==typeof r&&(r=Ge.objectReplacementChar);for(;-1<(w=r.indexOf("\n"));)0<w&&(n.end.column+=w,p.push(n,t)),n={row:n.end.row+1,column:0},n={start:n,end:Object.assign({},n)},r=r.slice(w+1);n.end.column+=r.length;p.push(n,t);n={start:Object.assign({},n.end),end:Object.assign({},n.end)}}this.undoManager.undoStart(this,"setStyleInRange");this.addMethodCallChangeDoing({target:this,selector:"setStyleInRange",args:[a,f],undo:{target:this,selector:"setTextAttributesWithSortedRanges",args:[p]}},function(){d.document.setTextAttribute(a,
f);d.consistencyCheck();d.onAttributesChanged(f)});this.undoManager.undoStop()}},{key:"resetStyleInRange",value:function(){for(var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.selection,d=this.document.textAndAttributesInRange(a),f={},k=0;k<d.length;k+=2)Object.assign(f,d[k+1]);this.removeTextAttribute(f,a)}},{key:"changeStyleProperty",value:function(a,d){var f=this,k=this.getStyleInRange(2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.selection)[a],n=d(k);this.selections.forEach(function(p){return f.addTextAttribute(Pc({},
a,n),p)})}},{key:"inMultiSelectMode",value:function(){return this.selection.selections&&1<this.selection.selections.length}},{key:"selectionBounds",value:function(){var a=this;return this.selections.map(function(d){var f=a.charBoundsFromTextPosition(d.start),k=a.charBoundsFromTextPosition(d.end);return d.start.row===d.end.row?f.union(k):Ge.rect(Ge.pt(a.padding.left(),f.top()),Ge.pt(a.width-a.padding.left(),k.bottom()))}).reduce(function(d,f){return f.union(d)})}},{key:"documentEndPosition",get:function(){return this.document?
this.document.endPosition:{row:0,column:0}}},{key:"isAtDocumentEnd",value:function(){return Ge.eqPosition(this.cursorPosition,this.documentEndPosition)}},{key:"documentRange",get:function(){return{start:{row:0,column:0},end:this.documentEndPosition}}},{key:"cursorUp",value:function(){return this.selection.goUp(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1)}},{key:"cursorDown",value:function(){return this.selection.goDown(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1)}},{key:"cursorLeft",
value:function(){return this.selection.goLeft(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1)}},{key:"cursorRight",value:function(){return this.selection.goRight(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1)}},{key:"getPositionAboveOrBelow",value:function(){function a(w,x){w=w.slice();w.push({x:Ge.arr.last(w).x+Ge.arr.last(w).width});for(var B=0,D=Infinity,F=0;F<w.length;F++){var L=Math.abs(w[F].x-x);L<D&&(D=L,B=F)}return B}var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:
1,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.cursorPosition,k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,n=3<arguments.length?arguments[3]:void 0,p=4<arguments.length?arguments[4]:void 0;if(0===d)return f;"number"===typeof p&&(p-=this.padding.left());var q=f.row,r=f.column;if(k&&this.lineWrapping){q=this.textLayout.rangesOfWrappedLine(this,f.row);if(!q.length)return f;r=q.length-1-q.slice().reverse().findIndex(function(w){var x=w.start;w.end;return x.column<=f.column});
if(1<=d){var t=0===r?0>=f.row?null:Ge.arr.last(this.textLayout.rangesOfWrappedLine(this,f.row-1)):q[r-1];if(!t)return f}else if(-1>=d&&(t=(q.length-1===r?f.row>=this.lineCount()-1?[]:this.textLayout.rangesOfWrappedLine(this,f.row+1):q.slice(r+1))[0],!t))return f;q=t.start.row;r=this.textLayout.charBoundsOfRow(this,q).slice(t.start.column,t.end.column+1);r=t.start.column+a(r,p)}else q=Math.min(Math.max(0,f.row-d),this.lineCount()-1),"number"===typeof p&&(t=this.textLayout.charBoundsOfRow(this,q),r=
a(t,p));t={row:q,column:r};return 1<Math.abs(d)?this.getPositionAboveOrBelow(d+(1<d?-1:1),t,k,n,p):t}},{key:"collapseSelection",value:function(){this.selection.collapse(this.selection.lead);return this.selection}},{key:"selectAll",value:function(){this.selection.selectAll();return this.selection}},{key:"selectLine",value:function(){this.selection.selectLine(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition.row,1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1);return this.selection}},
{key:"selectionOrLineString",value:function(){var a=this.selection,d=a.start;return a.text||this.getLine(d.row)}},{key:"scrollCursorIntoView",value:function(){this.scrollPositionIntoView(this.cursorPosition)}},{key:"centerRange",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.selection.range,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ge.pt(0,0),f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,k=this.charBoundsFromTextPosition(a.start).top();
a=this.charBoundsFromTextPosition(a.end).bottom()-k;this.scroll=a<this.height||!1===f?this.scroll.withY(k+a/2-this.height/2).addPt(d):this.scroll.withY(k).addPt(d)}},{key:"centerRow",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition.row,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ge.pt(0,0);return this.alignRowAtTop(a,d.addXY(0,-this.height/2))}},{key:"alignRowAtTop",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:
this.cursorPosition.row,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ge.pt(0,0);this.scroll=this.charBoundsFromTextPosition({row:a,column:0}).topLeft().addXY(-this.padding.left(),0).addPt(d)}},{key:"alignRowAtBottom",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.cursorPosition.row,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ge.pt(0,0),f=this.charBoundsFromTextPosition({row:a,column:0}).height;this.alignRowAtTop(a,d.addXY(0,-this.textPageHeight()+
f))}},{key:"scrollPositionIntoView",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ge.pt(0,0);if(this.isClip()){var f=this.scroll;f=this.innerBounds().translatedBy(f).insetByRect(this.padding).insetBy(this.borderWidth);var k=this.charBoundsFromTextPosition(a);this.lineWrapping||(k=k.insetByPt(Ge.pt(-20,0)));var n=20<f.bottom()-k.bottom()?"bottomLeft":"topLeft";f=k[n]().subPt(f.translateForInclusion(k)[n]()).addPt(d);if(0!==f.x||0!==f.y)this.scroll=this.scroll.addPt(f).addPt(d),
this.isFocused()&&this.ensureKeyInputHelperAtCursor()}}},{key:"keepPosAtSameScrollOffsetWhile",value:function(a){var d=this;return function(f){var k=d.scroll;f=d.selection.lead;var n=d.charBoundsFromTextPosition(f).y-k.y;k=!1;var p=function(){return d.scroll=d.scroll.withY(d.charBoundsFromTextPosition(f).y-n)},q;try{k=(q=a())&&q instanceof Promise}finally{!k&&p()}if(k)Ge.promise["finally"](q,p);return q}(1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.cursorPosition)}},{key:"saveExcursion",
value:function(a,d){var f=this;d=Object.assign({useAnchors:!1},d);var k=this.selection.isMultiSelection?this.selection.selections.map(function(r){return r.directedRange}):[this.selection],n=d.useAnchors?k.map(function(r){var t=r.end;return[f.addAnchor(Object.assign({},r.start,{id:"save-excursion-"+Ge.string.newUUID()})),f.addAnchor(Object.assign({},t,{id:"save-excursion-"+Ge.string.newUUID()}))]}):null,p=!1;d=d.useAnchors?function(){var r=n.map(function(t){t=Nb(t,2);return{start:t[0].position,end:t[1].position}});
f.selections=r;n.forEach(function(t){t=Nb(t,2);var w=t[1];f.removeAnchor(t[0]);f.removeAnchor(w)})}:function(){return f.selections=k};var q;try{p=(q=this.keepPosAtSameScrollOffsetWhile(a))&&q instanceof Promise}finally{!p&&d()}if(p)Ge.promise["finally"](q,d);return q}},{key:"alignRow",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"center";if(this.isClip()){var f=this.scroll,k=this.padding;f=this.innerBounds().insetByRect(k).translatedBy(f);k=this.charBoundsFromTextPosition({row:a,
column:0});if(d="top"===d||"bottom"===d?f[d]()-k[d]():"center"===d?f[d]().y-k[d]().y:0)this.scroll=this.scroll.addXY(0,-d)}}},{key:"fit",value:function(){var a=this,d=this.viewState,f=this.fixedWidth,k=this.fixedHeight;d._needsFit=!1;if(k&&f||!this.textLayout||this.master&&!this.master._appliedMaster)return this;var n=this.textBounds().outsetByRect(this.padding),p=function(){a.withMetaDo({metaInteraction:!0},function(){k||a.height===n.height||(a.height=n.height);f||a.width===n.width||(a.width=n.width);
a.embeddedMorphs.forEach(function(q){(q=a.embeddedMorphMap.get(q).anchor)&&q.updateEmbeddedMorph()})})};d._needsFit=!1;this.document.lines.find(function(q){return q.hasEstimatedExtent})?this.whenRendered().then(p):p();return this}},{key:"fitIfNeeded",value:function(){this.viewState._needsFit&&this.fit()}},{key:"defaultLineHeight",get:function(){var a=this.padding;return a.top()+a.bottom()+this.fontMetric.defaultLineHeight({fontSize:this.fontSize,fontFamily:this.fontFamily})}},{key:"columnInWrappedLine",
value:function(a){if(!this.lineWrapping)return a.column;var d=this.screenLineRange(a,!0).start.column;return a.column-d}},{key:"textPositionFromPoint",value:function(a){return this.textLayout.textPositionFromPoint(this,a)}},{key:"charBoundsFromTextPosition",value:function(a){return this.textLayout.boundsFor(this,a)}},{key:"forceRerender",value:function(){this.textLayout.reset();this.makeDirty()}},{key:"aboutToRender",value:function(a){ie._get(Object.getPrototypeOf(g.prototype),"aboutToRender",this).call(this,
a)}},{key:"applyLayoutIfNeeded",value:function(){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);this.fitIfNeeded();ie._get(Object.getPrototypeOf(g.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(a){return this.textRenderer.renderMorph(this,a)}},{key:"directRender",value:function(){var a=this.env.renderer,d=this.textRenderer;a&&d&&!a._stopped&&(Ge.renderSubTree(this,a),d.manuallyTriggerTextRenderHook(this,a))}},
{key:"onMouseDown",value:function(a){if(!a.rightMouseButtonPressed()){this.activeMark&&(this.activeMark=null);var d=a.state;if(d.clickedOnMorph===this){d=(d.clickCount-1)%3+1;var f=this.localize(a.position),k=this.textPositionFromPoint(f);a.leftMouseButtonPressed()&&!a.isShiftDown()&&!a.isAltDown()&&this.callTextAttributeDoitFromMouseEvent(a,f);this.selectable&&(a.isShiftDown()?this.selection.lead=k:a.isAltDown()?this.selection.addRange(Ge.Range.at(k)):(this.selection.disableMultiSelect(),1===d?a.isShiftDown()?
this.selection.lead=k:this.selection={start:k,end:k}:2===d?this.execCommand("select word",null,1,a):3===d&&this.execCommand("select line",null,1,a)),this.isFocused()&&this.ensureKeyInputHelperAtCursor())}}}},{key:"evalEnvForDoit",value:function(a){var d="lively://text-doit/".concat(this.id);lively.modules.module(d);return{context:a.context||this,format:"esm",targetModule:d}}},{key:"callTextAttributeDoitFromMouseEvent",value:function(a,d){var f=this;d=(d=this.textAttributeAtPoint(d)||[],d.doit);if(!d||
!d.code)return!1;var k=this.evalEnvForDoit(d),n=lively.modules.module(k.targetModule);n.recorder.evt=a;lively.vm.runEval(d.code,k)["catch"](function(p){return f.world().logError(Error("Error in text doit: ".concat(p.stack)))}).then(function(){return n.recorder.evt=null});return!0}},{key:"onMouseMove",value:function(a){a.leftMouseButtonPressed()&&this.selectable&&a.state.clickedOnMorph===this&&(this.selection.lead=this.textPositionFromPoint(this.localize(a.position)))}},{key:"selectMatchingBrackets",
value:function(a,d){function f(t){return"\t"===t||" "===t}function k(t,w,x,B,D){for(var F=1;(0>D?0<=B-1:B+1<t.length)&&(B+=D,t[B]===w&&w!==x&&F++,t[B]===x&&F--,0!==F););return B}function n(t,w,x,B){for(var D=w;0>x?0<=D-1:D+1<t.length;)if(D+=x,t[D]===B)return 0<x?[w,D]:[D+1,w];return 0<x?[w+1,t.length-1]:[0,w]}if(!a)return d;if(0===d||d===a.length)return[0,a.length-1];var p=d-1;if(0<d){if("\n"===a[d-1]||"\r"===a[d-1])return n(a,d,1,a[d-1]);var q="*({[<'\"`".indexOf(a[d-1]);"*"===a[d-1]&&(0>d-2||"/"!==
a[d-2])&&(q=-1);if(0<=q)return p=k(a,"*({[<'\"`"[q],"*)}]>'\"`"[q],d-1,1),[d,p-1]}if(d<a.length){if("\n"===a[d]||"\r"===a[d])return n(a,d,-1,a[d]);q="*)}]>'\"`".indexOf(a[d]);"*"===a[d]&&(d+1>=a.length||"/"!==a[d+1])&&(q=-1);if(0<=q)return d=k(a,"*)}]>'\"`"[q],"*({[<'\"`"[q],d,-1),[d+1,p]}if("/"===a[d-1]&&"/"===a[d-2]){for(;p+1<a.length&&"\n"!==a[p+1]&&"\r"!==a[p+1];)p++;return[d,p]}q=d;for(var r=p;0<=q-1&&f(a[q-1]);)q--;for(;r<a.length&&f(a[r+1]);)r++;if(1<=r-q)return[q,r];for(q=d<a.length?a[d]:
"";0<=d-1&&((a[d-1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!==a[d-1]?0:0<="0123456789".indexOf(q)));)q=a[d-1],d--;for(;p+1<a.length&&((a[p+1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!==a[p+1]?0:0<="0123456789".indexOf(q)));)q=a[p+1],p++;return[d,p]}},{key:"onContextMenu",value:function(a){var d=this;if(a.targetMorph===this){a.stop();var f=this.textPositionFromPoint(this.localize(a.position)),k=this.selection.selections||[this.selection];if(this.selection.isEmpty()||k.every(function(n){return!n.range.containsPosition(f)}))this.cursorPosition=
f;Promise.resolve(this.menuItemsForContextMenu()).then(function(n){return d.openMenu(n,a)})["catch"](function(n){return $world.logError(n)})}}},{key:"onDrop",value:function(a){var d=a.hand.grabbedMorphs.filter(function(k){return k.isLayoutable});ie._get(Object.getPrototypeOf(g.prototype),"onDrop",this).call(this,a);if(d[0]){var f=this.textPositionFromPoint(this.localize(a.hand.globalPosition));this.insertText([d[0],null],f);d[0].opacity=a.state.originalOpacity||1}}},{key:"buildDropHoverGrid",value:function(a){var d=
this;if(a.simpleDrop)return null;var f=this.whatsVisible,k=f.startRow;f=Math.min(this.documentEndPosition.row,f.endRow);var n=this.document,p=this.padding.left(),q=this.padding.top();k=Ge.arr.range(k,f).reduce(function(r,t){var w=d.textLayout.charBoundsOfRow(d,t).slice();1<=w.length&&0===Ge.arr.last(w).width&&(Ge.arr.last(w).width=12);if(1<w.length){var x=Ge.arr.last(w);w.push({x:x.x+x.width,y:x.y,height:x.height,width:x.width||12})}w=w.map(function(B,D){B=Ge.Rectangle.fromLiteral(B).translatedBy(Ge.pt(p,
q+n.computeVerticalOffsetOf(t)));var F=d.getGlobalTransform().transformRectToRect(B);return{textPos:{row:t,column:D},bounds:B,globalBounds:F,morph:a.showDropGrid?Ge.morph({reactsToPointer:!1,acceptsDrops:!1,bounds:B,border:{width:1,color:Ge.Color.green},fill:null}):null}});return r.concat(w)},[]);k.forEach(function(r){return r.morph&&d.addMorph(r.morph)});return k}},{key:"onDropHoverIn",value:function(a){var d={simpleDrop:window.hasOwnProperty("simpleDrop")?window.simpleDrop:!0,showDropGrid:window.hasOwnProperty("showDropGrid")?
window.showDropGrid:!1,useTextFlowPlaceholder:window.hasOwnProperty("useTextFlowPlaceholder")?window.useTextFlowPlaceholder:!1},f=a.hand.grabbedMorphs[0];f&&(a.state.originalOpacity=f.opacity,f.opacity=.3);f=this.buildDropHoverGrid(d);a=a.state.dropHover||(a.state.dropHover=new WeakMap);var k=a.get(this);k||(k={},a.set(this,k));k.config=d;k.dropGrid=f}},{key:"onDropHoverUpdate",value:function(a){var d=a.hand.grabbedMorphs[0];if(d){var f=a.state.dropHover;if(f&&(f=f.get(this)))if(f.dropGrid){var k=
f.config;a=a.positionIn(this);var n=Infinity,p=ba(f.dropGrid),q;try{for(p.s();!(q=p.n()).done;){var r=q.value;if(r.bounds.containsPoint(a)){var t=r;break}var w=r.bounds.closestPointToPt(a).dist(a);if(w<n){n=w;var x=r}}}catch(B){p.e(B)}finally{p.f()}t||(t=x);t&&(x=f.placeholder,x||(f.placeholder=x=Ge.morph({fill:d.fill,extent:d.extent,reactsToPointer:!1,acceptsDrops:!1})),Ge.obj.equals(x._textPos||{},t.textPos)||(this!==x.owner&&this.addMorph(x),x.position=t.bounds.topLeft(),k&&k.useTextFlowPlaceholder&&
(x.remove(),x._textPos=t.textPos,this.insertText([x,null],t.textPos))))}else d=this.textPositionFromPoint(a.positionIn(this)),this.focus(),this.cursorPosition=d}}},{key:"onDropHoverOut",value:function(a){var d=a.hand.grabbedMorphs[0];d&&(d.opacity=a.state.originalOpacity||1);if(a=a.state.dropHover)if(d=a.get(this))a["delete"](this),d.dropGrid&&(d.dropGrid.forEach(function(f){return f.morph&&f.morph.remove()}),d.dropGrid=null),d.placeholder&&(d.placeholder.remove(),d.placeholder=null)}},{key:"menuItems",
value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all([ie._get(Object.getPrototypeOf(g.prototype),"menuItems",this).call(this),this.menuItemsForContextMenu()]);case 2:return k=r.sent,n=Nb(k,2),p=n[0],q=n[1],r.abrupt("return",p.concat({isDivider:!0}).concat(q));case 7:case "end":return r.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"menuItemsForContextMenu",
value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k=this,n,p,q,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=[{command:"text undo",alias:"undo",target:this,showKeyShortcuts:!0},{command:"text redo",alias:"redo",target:this,showKeyShortcuts:!0},{command:"manual clipboard copy",alias:"copy",target:this,showKeyShortcuts:this.keysForCommand("clipboard copy"),args:{collapseSelection:!1,"delete":!1}},{command:"manual clipboard paste",alias:"paste",target:this,
showKeyShortcuts:this.keysForCommand("clipboard paste")},{command:"open text attribute controls",alias:"edit text attributes",target:this},{isDivider:!0},{command:"toggle line wrapping",alias:(this.lineWrapping?"disable":"enable")+" line wrapping",target:this,showKeyShortcuts:!0},["run command",function(){k.focus();k.world().execCommand("run command")}]],p=ba(this.plugins),t.prev=2,p.s();case 4:if((q=p.n()).done){t.next=12;break}r=q.value;if("function"!==typeof r.getMenuItems){t.next=10;break}t.next=
9;return r.getMenuItems(n);case 9:n=t.sent;case 10:t.next=4;break;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](2),p.e(t.t0);case 17:return t.prev=17,p.f(),t.finish(17);case 20:return t.abrupt("return",n);case 21:case "end":return t.stop()}},f,this,[[2,14,17,20]])}));return function(){return a.apply(this,arguments)}}()},{key:"keybindings",get:function(){var a=this.world();a=a&&a.getCurrentUser()&&a.getCurrentUser().config&&a.getCurrentUser().config.textKeyBindings||[];a=ie._get(Object.getPrototypeOf(g.prototype),
"keybindings",this).concat(a).concat(Ge.config.text.defaultKeyBindings);return this.pluginCollect("getKeyBindings",a)}},{key:"keybindings",set:function(a){ie._set(Object.getPrototypeOf(g.prototype),"keybindings",a,this)}},{key:"keyhandlers",get:function(){if(this._cachedKeyhandlers)return this._cachedKeyhandlers;var a=ie._get(Object.getPrototypeOf(g.prototype),"keyhandlers",this).concat(this._keyhandlers||[]);return this._cachedKeyhandlers=a=this.pluginCollect("getKeyHandlers",a)}},{key:"snippets",
get:function(){return this.pluginCollect("getSnippets",[])}},{key:"cleanupSnippetsExpansions",value:function(){this.markers=this.markers.filter(function(a){return!a.id.includes("snippet")});this.anchors=this.anchors.filter(function(a){return!a.id.includes("snippet")})}},{key:"onHoverIn",value:function(a){ie._get(Object.getPrototypeOf(g.prototype),"onHoverIn",this).call(this,a);this.scrollActive=!0;this.makeDirty()}},{key:"onHoverOut",value:function(a){ie._get(Object.getPrototypeOf(g.prototype),"onHoverOut",
this).call(this,a);Ge.touchInputDevice||(this.scrollActive=!1,this.makeDirty())}},{key:"onKeyDown",value:function(a){this.compositionRange||a.targetMorph!==this||(this.selection.cursorBlinkStart(),Ge.KeyHandler.invokeKeyHandlers(this,a,!0))}},{key:"onTextInput",value:function(a){Ge.KeyHandler.invokeKeyHandlers(this,a,!1)}},{key:"onCompositionStart",value:function(a){this.insertTextAndSelect(a.data);this.compositionRange=this.selection.range}},{key:"onCompositionUpdate",value:function(a){this.selection.range=
this.compositionRange;this.selection.text=[a.data,{textDecoration:"underline"}];this.compositionRange=this.selection.range}},{key:"onCompositionEnd",value:function(a){this.selection.range=this.compositionRange;this.selection.text=a.data;this.cursorPosition=this.compositionRange.end;this.compositionRange=null}},{key:"onCut",value:function(a){if(!this.rejectsInput()&&this.isFocused()&&!Ge.config.emacs)this.onCopy(a,!this.rejectsInput())}},{key:"onCopy",value:function(a){var d=1<arguments.length&&void 0!==
arguments[1]?arguments[1]:!1;if(this.isFocused()){a.stop();var f=this.selection;try{for(var k=this.textAndAttributesInRange(this.selection.range),n=this.defaultTextStyle,p={},q=0;q<k.length;q+=2){var r=k[q];if(r.isMorph)if(r.isDisplacementMorph)k[q]="";else{var t=p[q]=Ge.serializeMorph(k[q]);k[q]=Ge.deserializeMorph(t,{reinitializeIds:!0})}}var w=Ge.extractHTMLFromTextMorph(this,k);a.domEvt.clipboardData.setData("text/html",w);for(var x in p)k[x]=p[x];var B=JSON.stringify({textAndAttributes:k,defaultTextStyle:n});
a.domEvt.clipboardData.setData("application/x-lively-text",B)}catch(D){$world.logError(D)}a.domEvt.clipboardData.setData("text/plain",f.text.replace(Ge.objectReplacementChar,""));this.execCommand("manual clipboard copy",{collapseSelection:Ge.config.codeEditor.collapseSelection||!1,"delete":d,dontTryNativeClipboard:!0})}}},{key:"onPaste",value:function(a){var d=this;if(!this.rejectsInput()){a.stop();var f="";try{f=a.domEvt.clipboardData.getData("text")}catch(q){console.warn(q)}if(!this.editorPlugin)try{var k=
a.domEvt.clipboardData.getData("application/x-lively-text");var n=k&&JSON.parse(k);var p=n.textAndAttributes;for(a=0;a<p.length;a+=2)"string"!==typeof p[a]&&(p[a]=Ge.deserializeMorph(p[a],{reinitializeIds:!0}))}catch(q){console.warn(q)}p=this.selection;p=p.isMultiSelection?p.selections:[p];n&&this.undoManager.group();p.forEach(function(q){n?d.replace(q.range,n.textAndAttributes,!1,!0,!0):q.text=f;d.saveMark(q.start);q.collapseToEnd()});n&&this.undoManager.group()}}},{key:"onFocus",value:function(a){var d=
this;ie._get(Object.getPrototypeOf(g.prototype),"onFocus",this).call(this,a);this.makeDirty();this.selection.cursorBlinkStart();if(!this._originalShadow){var f=this.haloShadow||this.propertiesAndPropertySettings().properties.haloShadow.defaultValue;f&&!f.equals&&(f=new Ge.ShadowObject(f));f&&!f.equals(this.dropShadow)&&(this._originalShadow=this.dropShadow);this.withMetaDo({metaInteraction:!0},function(){d.highlightWhenFocused&&d.animate({dropShadow:f,duration:200})})}}},{key:"onBlur",value:function(a){this.makeDirty();
this.selection.cursorBlinkStop();this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});this._originalShadow=null;ie._get(Object.getPrototypeOf(g.prototype),"onBlur",this).call(this,a)}},{key:"ensureKeyInputHelperAtCursor",value:function(){this.env.eventDispatcher.keyInputHelper&&this.env.eventDispatcher.keyInputHelper.ensureBeingAtCursorOfText(this)}},{key:"textPageHeight",value:function(){var a=this.padding,d=this.borderWidthBottom,f=this.borderWidthTop;return this.height-
a.top()-a.bottom()-d-f}},{key:"scrollPageDown",value:function(){this.scrollDown(this.textPageHeight())}},{key:"scrollPageUp",value:function(){this.scrollUp(this.textPageHeight())}},{key:"pageUpOrDown",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{direction:"up",select:!1},d=a.direction;a=a.select;var f=this.textLayout["down"===d?"lastFullVisibleLine":"firstFullVisibleLine"](this),k=this.cursorPosition.column,n=this.padding;a?this.selection.lead={row:f,column:k}:this.cursorPosition=
{row:f,column:k};"down"===d?this.alignRowAtTop(f,Ge.pt(0,-n.top()-n.bottom())):(this.alignRowAtBottom(f,Ge.pt(0,0)),this.alignRowAtBottom(f,Ge.pt(0,n.top()+n.bottom())))}},{key:"gotoDocumentStart",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{select:!1};this.selection.lead={row:0,column:0};a&&a.select||(this.selection.anchor=this.selection.lead)}},{key:"gotoDocumentEnd",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{select:!1};this.selection.lead=
this.documentEndPosition;a&&a.select||(this.selection.anchor=this.selection.lead)}},{key:"paragraphRangeAbove",value:function(a){if(this.isLineEmpty(a)){for(var d=a-1;0<=d;d--)if(!this.isLineEmpty(d)){var f=d;break}if(void 0===f)return{start:{row:a,column:0},end:{row:a,column:0}}}else f=a;return this.paragraphRange(f)}},{key:"paragraphRangeBelow",value:function(a){var d=this.isLineEmpty(a),f=this.documentEndPosition;if(d){for(d=a+1;d<=f.row;d++)if(!this.isLineEmpty(d)){var k=d;break}if(void 0===k)return{start:{row:a,
column:0},end:{row:a,column:0}}}else k=a;return this.paragraphRange(k)}},{key:"paragraphRange",value:function(a){if(this.isLineEmpty(a))return{start:{row:a,column:0},end:{row:a,column:0}};var d=this.documentEndPosition;for(a+=1;a<=d.row;a++)if(this.isLineEmpty(a)){var f={row:a-1,column:this.getLine(a-1).length};break}f||(f=d);for(d=f.row-1;0<=d;d--)if(this.isLineEmpty(d)){var k={row:d+1,column:0};break}k||(k={row:0,column:0});return{start:k,end:f}}},{key:"astNodeRange",value:function(a){return{start:this.document.indexToPosition(a.start),
end:this.document.indexToPosition(a.end)}}},{key:"parseIntoLines",value:function(a){return a.split("\n")}},{key:"computeTextRangeForChanges",value:function(a){function d(q,r){for(var t="",w=0;w<q.length;w+=2)t+="string"===typeof q[w]?q[w]:Ge.objectReplacementChar;q=k.parseIntoLines(t);return 1===q.length?Ge.Range.fromPositions(r,{row:r.row,column:r.column+q[0].length}):1<q.length?Ge.Range.fromPositions(r,{row:r.row+q.length-1,column:Ge.arr.last(q).length}):Ge.Range.at(r)}var f=Ge.Range.at(this.cursorPosition);
if(!a.length)return f;var k=this,n=a[0];f="replace"===n.selector?d(n.args[1],n.args[0].start):f;for(n=1;n<a.length;n++){var p=a[n];f="replace"===p.selector?f.merge(d(p.args[1],p.args[0].start)):f}return f}},{key:"ensureUndoManager",value:function(){if(this.undoManager)return this.undoManager;var a=["addTextAttribute","removeTextAttribute","setStyleInRange","replace"];return this.undoManager=new Ge.UndoManager(function(d){return a.includes(d.selector)})}},{key:"textUndo",value:function(){var a=this.undoManager.undo();
a&&(a=a.changes.slice().reverse().map(function(d){return d.undo}),this.selection=this.computeTextRangeForChanges(a))}},{key:"textRedo",value:function(){var a=this.undoManager.redo();a&&(a=a.changes.slice(),this.selection=this.computeTextRangeForChanges(a))}},{key:"findMatchingForward",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"right",f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},k=this["right"===d?"charRight":"charLeft"](a),n=f[k];if(!n)return null;
var p="right"===d?-1:0;return this.document.scanForward(a,function(q,r){if(q===n){if(0===p)return"right"===d?{row:r.row,column:r.column+1}:r;p--}else q===k&&p++;return null})}},{key:"findMatchingBackward",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"right",f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},k=this["right"===d?"charRight":"charLeft"](a),n=f[k];if(!n)return null;var p="left"===d?-1:0;return this.document.scanBackward(a,function(q,r){if(q===
n){if(0===p)return"right"===d?{row:r.row,column:r.column+1}:r;p--}else q===k&&p++;return null})}},{key:"search",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{start:this.cursorPosition,backwards:!1,caseSensitive:!1};return(new Ge.TextSearcher(this)).search(Object.assign({needle:a},d))}},{key:"searchForAll",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{caseSensitive:!1};return(new Ge.TextSearcher(this)).searchForAll(Object.assign({needle:a},
d))}},{key:"tokenAt",value:function(a){return this.pluginInvokeFirst("tokenAt",a)}},{key:"astAt",value:function(a){return this.pluginInvokeFirst("astAt",a)}},{key:"evalEnvironment",get:function(){var a=this.editorPlugin;return a&&a.evalEnvironment}},{key:"evalEnvironment",set:function(a){var d=this.editorPlugin;d&&(d.evalEnvironment=a)}},{key:"doitContext",get:function(){return(this.evalEnvironment||{}).context}},{key:"doitContext",set:function(a){(this.evalEnvironment||{}).context=a}},{key:"logDoit",
value:function(a){var d=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).time;d=void 0===d?Date.now():d;if(!(12E4<a.length)){try{var f=JSON.parse(localStorage["lively.next-js-ide-doitlog"])}catch(k){}f||(f=[]);if(!f.some(function(k){return"string"===typeof k?k===a:k.source===a})){f.push({source:a,time:d});50<f.length&&(f=f.slice(-50));try{localStorage["lively.next-js-ide-doitlog"]=JSON.stringify(f)}catch(k){}}}}},{key:"doEval",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:this.selection.isEmpty()?this.lineRange():this.selection.range,d=1<arguments.length?arguments[1]:void 0;a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.textInRange(a);var f=this.pluginFind(function(k){return k.isEditorPlugin&&"function"===typeof k.runEval});if(!f)throw Error("doit not possible: cannot find js editor plugin of !".concat(this));d&&d.logDoit&&this.logDoit(a,d);return f.runEval(a,d)}},{key:"maybeSelectCommentOrLine",value:function(){var a=this.selection,d=a.lead,
f=d.row;d=d.column;var k=this.selectionOrLineString();if(a.isEmpty()){var n=k.indexOf("//");-1===n||d<n||0<n&&0<=":\"'".indexOf(k[n-1])?this.selectLine(f):a.range={start:{row:f,column:n+2},end:{row:f,column:k.length}}}}},{key:"debugHelper",value:function(a){a=Object.assign({debugDocumentUpdate:!0,debugTextLayout:!0},a);return this._debugHelper?Object.assign(this._debugHelper,a):this._debugHelper=Object.assign({},a,{logged:[],groups:[],reset:function(){this.groups=[[]];this.logged=this.groups[0]},
log:function(){for(var d,f=arguments.length,k=Array(f),n=0;n<f;n++)k[n]=arguments[n];(d=console).log.apply(d,k);this.logged.push({args:k})},dump:function(d){console.log(d.split("\n").map(function(f){return f.slice(0,100)}).join("\n"));this.logged.push({dump:d})},group:function(d){this.groups.push([]);this.logged=Ge.arr.last(this.groups);console.group(d)},groupEnd:function(d){console.groupEnd(d)},steps:function(d){for(var f=[];d.length;){var k=Ge.arr.takeWhile(d,function(p){return!p.dump});d=d.slice(k.length);
var n=(d.shift()||{}).dump;f.push({actions:k,dump:n})}return f},printToConsole:function(){var d=this;console.clear();this.groups.forEach(function(f){var k=d.steps(f);console.group(k.length);d.steps(f).forEach(function(n,p){n=n.actions;console.group("step ".concat(p+1));n.forEach(function(q){var r;q=q.args;return(r=console).log.apply(r,hb(q))});console.groupEnd("step ".concat(p+1))});console.groupEnd(k.length)})},report:function(){var d=this;return Bb(regeneratorRuntime.mark(function k(){var n,p,q,
r,t,w,x;return regeneratorRuntime.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,System["import"]("jsdiff",System.decanonicalize("lively.morphic"));case 2:return n=B.sent,B.next=5,pd.import("./editor-plugin-8acb3af6.js");case 5:return p=B.sent,q=p["default"],r=0,t="",w=[],x=0,d.groups.forEach(function(D,F){t+=">>> group ".concat(F+1,"\n");x++;r++;var L=d.steps(D);L.forEach(function(G,oa){var ha=G.actions;G=G.dump;t+=Ge.string.indent(">>> step ".concat(oa+1)," ",r)+"\n";x++;r++;
ha.forEach(function(Ha){Ha=Ge.string.indent(Ge.string.formatFromArray(Ha.args.slice()).trim()," ",r);x+=Ha.split("\n").length;t+=Ha+"\n"});1<=oa&&G&&L[oa-1].dump&&(ha=new q,G=n.createPatch(String(oa),L[oa-1].dump,G),ha.tokenize(G),w.push.apply(w,hb(ha.styledRanges(x,r))),t+=G,x+=G.split("\n").length-1);t+=Ge.string.indent("<< step ".concat(oa+1)," ",r)+"\n";x++;r--});t+="<<< group ".concat(F+1,"\n");x++;r--}),B.abrupt("return",{report:t,reportStyles:w});case 13:case "end":return B.stop()}},k)}))()},
openReport:function(){var d=this;return Bb(regeneratorRuntime.mark(function k(){var n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,d.report();case 2:return n=r.sent,p=n.reportStyles,q=n.report,r.abrupt("return",$world.execCommand("open text window",{title:"text debug",fontFamily:"monospace",content:q,rangesAndStyles:p}));case 6:case "end":return r.stop()}},k)}))()}})}},{key:"consistencyCheck",value:function(){if(this.debug)return this.document.consistencyCheck();
try{return this.document.consistencyCheck()}catch(k){var a=this.document;this.brokenDocument||(this.brokenDocument=a);var d=this.world()||$world;try{var f=new Ge.Document([]);f.textAndAttributes=a.textAndAttributes;this.changeDocument(f)}catch(n){d?d.logError("Broken document could not be fixed"):console.error("Broken document could not be fixed")}d?d.logError(k):console.error(k)}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Text"}},{key:"makeLabel",value:function(a,d){return new Ge.morph(Object.assign({type:"label",
value:a,fontFamily:"IBM Plex, Helvetica Neue, Arial, sans-serif",fontColor:Ge.Color.almostBlack,fontSize:11},d))}},{key:"makeInputLine",value:function(a){return new (System.get(System.decanonicalize("lively.morphic")).InputLine)(a)}},{key:"defaultTextStyle",get:function(){if(this._defaultTextStyle)return this._defaultTextStyle;for(var a=this.prototype.propertiesAndPropertySettings().properties,d=this.defaultTextStyleProps,f={},k=0;k<d.length;k++){var n=d[k];f[n]=a[n].defaultValue}return this._defaultTextStyle=
f}},{key:"defaultTextStyleProps",get:function(){if(this._defaultTextStyleProps)return this._defaultTextStyleProps;var a=this.prototype.propertiesAndPropertySettings().properties,d=[],f;for(f in a)a[f].isDefaultTextStyleProp&&d.push(f);return this._defaultTextStyleProps=d}},{key:"properties",get:function(){return{clipMode:{isStyleProp:!0,defaultValue:"visible",set:function(a){this.setProperty("clipMode",a);this.fixedWidth=this.fixedHeight=this.isClip()}},fontMetric:{group:"_rendering",serialize:!1,
get:function(){return this.getProperty("fontMetric")||this.env.fontMetric}},undoManager:{group:"core",before:["document"],initialize:function(){this.ensureUndoManager()}},textRenderer:{group:"_rendering",after:["viewState"],initialize:function(){this.textRenderer=new Ge.Renderer(this.env)}},debug:{group:"_debugging",isStyleProp:!0,after:["textRenderer","textLayout"],defaultValue:!1,doc:"For visualizing and debugging text layout and rendering"},defaultViewState:{group:"_rendering",derived:!0,readOnly:!0,
get:function(){return{_needsFit:!0,text_layer_node:null,fontmetric_text_layer_node:null,dom_nodes:[],dom_nodeFirstRow:[],scrollTop:0,scrollHeight:0,scrollBottom:0,textHeight:0,textWidth:0,firstVisibleRow:0,lastVisibleRow:0,heightBefore:0,wasScrolled:!1,afterTextRenderHook:null,fastScroll:!0}}},viewState:{group:"_rendering",initialize:function(){this.viewState=this.defaultViewState}},displacingMorphMap:{group:"_rendering",initialize:function(){this.displacingMorphMap=new Map}},embeddedMorphMap:{group:"_rendering",
initialize:function(){this.embeddedMorphMap=new Map}},embeddedMorphs:{group:"text",derived:!0,readOnly:!0,after:["embeddedMorphMap"],get:function(){return this.embeddedMorphMap?Array.from(this.embeddedMorphMap.keys()):[]}},textLayout:{group:"_rendering",after:["textRenderer"],initialize:function(){this.textLayout=new Ge.TextLayout(this)}},document:{group:"text",initialize:function(){this.document=Ge.Document.fromString("",{maxLeafSize:50,minLeafSize:25,maxNodeSize:35,minNodeSize:7});this.consistencyCheck()}},
draggable:{defaultValue:!1},useSoftTabs:{group:"text",isStyleProp:!0,defaultValue:void 0!==Ge.config.text.useSoftTabs?Ge.config.text.useSoftTabs:!0},tabWidth:{group:"text",isStyleProp:!0,defaultValue:Ge.config.text.tabWidth||2},tab:{group:"text",after:["useSoftTabs","tabWidth"],readOnly:!0,derived:!0,get:function(){return this.useSoftTabs?" ".repeat(this.tabWidth):"\t"}},autoInsertPairs:{group:"text",defaultValue:!0},extent:{get:function(){var a=this,d=this.getProperty("extent");!this._textChange&&
this.viewState&&this.viewState._needsFit&&!this._rendering&&!this._measuringTextBox&&d&&this.owner&&(this._measuringTextBox=!0,Ge.noUpdate(function(){a.directRender()}),this._measuringTextBox=!1);return this.getProperty("extent")}},fixedWidth:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},fixedHeight:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},readOnly:{group:"text",isStyleProp:!0,defaultValue:!1},selectable:{group:"selection",isStyleProp:!0,
defaultValue:!0,set:function(a){this.setProperty("selectable",a);a||!this.getProperty("selection")||this.selection.isEmpty()||this.selection.collapse()}},padding:{group:"styling",type:"Rectangle",isStyleProp:!0,after:["textLayout","viewState"],defaultValue:Ge.Rectangle.inset(0),set:function(a){this.setProperty("padding","number"===typeof a?Ge.Rectangle.inset(a):a)}},haloShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null},highlightWhenFocused:{group:"styling",defaultValue:!1,after:["haloShadow"],
set:function(a){this.setProperty("highlightWhenFocused",a);a&&!this.haloShadow&&(this.haloShadow={blur:6,color:Ge.Color.rgb(52,152,219),distance:0,rotation:45})}},cursorPosition:{group:"selection",derived:!0,after:["selection","selectable","readOnly"],get:function(){return this.selection.lead},set:function(a){!this.readOnly&&this.selectable&&(this.selection.range={start:a,end:a})}},cursorWidth:{defaultValue:1,type:"Number"},selection:{group:"selection",derived:!0,after:["document","anchors","selectable"],
get:function(){var a=this.getProperty("selection");if(a)return a;a=new (Ge.config.text.useMultiSelect?Ge.MultiSelection:Ge.Selection)(this);this.setProperty("selection",a);return a},set:function(a){var d=this.getProperty("selection");!a&&d?(d.isMultiSelection&&d.disableMultiSelect(),d.collapse()):a.isSelection?this.setProperty("selection",a):d&&(d.range=a)}},selections:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.isMultiSelection?this.selection.selections:
[this.selection]},set:function(a){var d=this;this.selection=a[0];this.selection.isMultiSelection&&a.slice(1).forEach(function(f){return d.selection.addRange(f)})}},textString:{group:"text",after:["document"],derived:!0,get:function(){return this.document?this.document.textString:""},set:function(a){a=null!==a?String(a):"";this.deleteText({start:{column:0,row:0},end:this.document.endPosition});this.insertText(a,{column:0,row:0})}},value:{group:"text",after:["document","embeddedMorphMap"],derived:!0,
get:function(){var a=this.textAndAttributes;if(1===a.length){var d=Nb(a[0],2),f=d[0];if(!Object.keys(d[1]||{}).length)return f}return a},set:function(a){"string"===typeof a?this.textString=a:this.textAndAttributes=a}},textAndAttributes:{group:"text",derived:!0,after:["document"],get:function(){return this.document.textAndAttributes},set:function(a){this.replace({start:{row:0,column:0},end:this.documentEndPosition},a)}},defaultTextStyleProps:{group:"_internal",readOnly:!0,derived:!0,get:function(){return this.constructor.defaultTextStyleProps}},
defaultTextStyle:{group:"styling",after:["viewState"],derived:!0,get:function(){return Ge.obj.select(this,this.defaultTextStyleProps)},set:function(a){Object.assign(this,a)}},customizedTextStyle:{group:"styling",readOnly:!0,derived:!0,get:function(){for(var a={},d=this.defaultTextStyleProps,f=this.constructor.defaultTextStyle,k=0;k<d.length;k++){var n=d[k],p=this[n];p!==f[n]&&(a[n]=p)}return a}},nativeCursor:{defaultValue:"text",isDefaultTextStyleProp:!0},fontFamily:{group:"text styling",type:"Enum",
values:Ge.config.text.basicFontItems,defaultValue:"IBM Plex Sans, Sans-Serif",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"],set:function(a){this.setProperty("fontFamily",Ge.sanitizeFont(a))}},fontSize:{group:"text styling",type:"Number",min:1,unit:"pt",defaultValue:12,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},selectionColor:{group:"text styling",type:"Color",defaultValue:Ge.Color.rgba(212,230,241,.8),isStyleProp:!0,after:["defaultTextStyle"]},cursorColor:{group:"text styling",
type:"Color",isStyleProp:!0,after:["defaultTextStyle"],defaultValue:Ge.Color.black},fontColor:{group:"text styling",type:"Color",defaultValue:Ge.Color.black,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontWeight:{group:"text styling",type:"Enum",values:["bold","bolder","light","lighter","normal"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontStyle:{group:"text styling",type:"Enum",values:["normal","italic","oblique"],defaultValue:"normal",
isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textDecoration:{group:"text styling",type:"Enum",values:["none","underline"],defaultValue:"none",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textStyleClasses:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},backgroundColor:{group:"text styling",type:"Color",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textAlign:{group:"text styling",type:"Enum",
values:["center","justify","left","right"],isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineHeight:{group:"text styling",type:"Number",min:1,isFloat:!0,isStyleProp:!0,isDefaultTextStyleProp:!0,defaultValue:1.4,after:["document","defaultTextStyle","viewState"]},letterSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},wordSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,
after:["document","defaultTextStyle","viewState"]},lineWrapping:{group:"text",type:"Enum",values:[!1,!0,"by-words","anywhere","only-by-words","wider","by-chars"],isStyleProp:!0,defaultValue:!1,after:["document","viewState"]},anchors:{group:"core",defaultValue:[],set:function(a){var d=this,f=Ge.arr.withoutAll(a,this.anchors);Ge.arr.withoutAll(this.anchors,a).forEach(function(k){return d.removeAnchor(k)});f.forEach(function(k){return d.addAnchor(k)})}},markers:{group:"core",defaultValue:[]},savedMarks:{group:"core",
defaultValue:[],after:["anchors"],set:function(a){var d=this;a=a.map(function(k){return k.isAnchor?k:d.addAnchor(Object.assign({},k,{id:"saved-mark-"+Ge.string.newUUID()}))});var f=this.savedMarks.filter(function(k){return!a.includes(k)});a>Ge.config.text.markStackSize&&f.push.apply(f,hb(a.splice(0,a.length-Ge.config.text.markStackSize)));f.map(function(k){return d.removeAnchor(k)});return this.setProperty("savedMarks",a)}},activeMarkPosition:{group:"_internal",after:["activeMark"],derived:!0,get:function(){var a=
this.activeMark;return a?a.position:null}},activeMark:{group:"core",after:["anchors"],set:function(a){if(a)a=this.addAnchor(a.isAnchor?a:Object.assign({},a,{id:"saved-mark-"+Ge.string.newUUID()}));else{var d=this.activeMark;this.savedMarks.includes(d)||this.removeAnchor(d)}this.setProperty("activeMark",a)}},plugins:{group:"plugins",defaultValue:[],after:["value"],set:function(a){var d=this,f=this.getProperty("plugins");Ge.arr.withoutAll(f,a).forEach(function(k){return k&&d.removePlugin(k)});a.forEach(function(k){return k&&
d.addPlugin(k)})}},editorModeName:{group:"plugins",derived:!0,after:["plugins"],get:function(){var a=this.editorPlugin;return a?a.shortName:null},set:function(a){this.changeEditorMode(a)}}}}}],c,{pathInPackage:function(){return"./text/morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1279,end:114718})}(Ge.Morph));Ge.Text=
ev;Ge.Text=ev;var j7=Object.freeze({__proto__:null,Text:ev}),Ah=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js");Ah.obj=nh;Ah.promise=ai;Ah.string=ji;Ah.properties=op;Ah.Rectangle=vl;Ah.Color=Nl;Ah.signal=Vl;Ah.vdom=vx;Ah.Morph=An;Ah.config=al;Ah.defaultStyle=$v;Ah.defaultAttributes=aw;Ah.Icon=Cs;Ah.Icons=rH;Ah.splitTextAndAttributesIntoLines=Vw;Ah.h=Ah.vdom.h;var hy=Lc("L",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js"),g=c.hasOwnProperty("Label")&&
"function"===typeof c.Label?c.Label:c.Label=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:"onChange",value:function(a){ie._get(Object.getPrototypeOf(g.prototype),"onChange",this).call(this,a);a.prop&&a.prop.includes("borderWidth")&&this.fit()}},{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=a.fontMetric,
f=a.position,k=a.rightCenter,n=a.leftCenter,p=a.topCenter,q=a.bottom,r=a.top,t=a.right,w=a.left,x=a.bottomCenter,B=a.bottomLeft,D=a.bottomRight,F=a.topRight,L=a.topLeft,G=a.center,oa=a.extent;ie._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,Ah.obj.dissoc(a,["fontMetric"]));d&&(this._fontMetric=d);this._cachedTextBounds=null;this.fit();void 0!==oa&&(this.extent=oa);void 0!==f&&(this.position=f);void 0!==k&&(this.rightCenter=k);void 0!==n&&(this.leftCenter=
n);void 0!==p&&(this.topCenter=p);void 0!==q&&(this.bottom=q);void 0!==r&&(this.top=r);void 0!==t&&(this.right=t);void 0!==w&&(this.left=w);void 0!==x&&(this.bottomCenter=x);void 0!==B&&(this.bottomLeft=B);void 0!==D&&(this.bottomRight=D);void 0!==F&&(this.topRight=F);void 0!==L&&(this.topLeft=L);void 0!==G&&(this.center=G)}},{key:"__additionally_serialize__",value:function(a,d,f,k){ie._get(Object.getPrototypeOf(g.prototype),"__additionally_serialize__",this).call(this,a,d,f,k);this.autofit&&this.fitIfNeeded();
a._cachedTextBounds=this._cachedTextBounds&&this._cachedTextBounds.toTuple()}},{key:"__after_deserialize__",value:function(a,d,f){ie._get(Object.getPrototypeOf(g.prototype),"__after_deserialize__",this).call(this,a,d,f);a._cachedTextBounds&&(this.changeMetaData("deserializeInfo",{recoveredTextBounds:!0}),this._cachedTextBounds=Ah.Rectangle.fromTuple(a._cachedTextBounds))}},{key:"isLabel",get:function(){return!0}},{key:"textStyle",get:function(){return Ah.obj.select(this,"textStyleClasses textDecoration fontStyle fontWeight textShadow fontColor fontSize fontFamily".split(" "))}},
{key:"fit",value:function(){var a=this;this.withMetaDo({skipReconciliation:!0},function(){a.extent=a.textBounds().extent().addXY(a.borderWidthLeft+a.borderWidthRight,a.borderWidthTop+a.borderWidthBottom)});this.visible?this._needsFit=!1:this._cachedTextBounds=null;return this}},{key:"fitIfNeeded",value:function(){var a=this;if(this._needsFit)if(this.allFontsLoaded())this.fit();else return this.whenFontLoaded().then(function(){return a.fit()})}},{key:"textAndAttributesOfLines",get:function(){return Ah.splitTextAndAttributesIntoLines(this.textAndAttributes,
"\n")}},{key:"allFontsLoaded",value:function(a){var d=this,f=this.env.fontMetric;return[this].concat(hb(this.textAndAttributes.map(function(k,n){if(n%2)return{fontFamily:k&&k.fontFamily||d.fontFamily,fontWeight:k&&k.fontWeight||d.fontWeight}}).filter(Boolean))).every(function(k){return a?!!a.find(function(n){return n.family==k.fontFamily&&n.weight==(f.fontDetector.namedToNumeric[k.fontWeight]||k.fontWeight)}):f.isFontSupported(k.fontFamily,k.fontWeight)})}},{key:"whenFontLoaded",value:function(){var a=
Bb(regeneratorRuntime.mark(function f(){var k=this,n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!this.allFontsLoaded()){p.next=2;break}return p.abrupt("return",!0);case 2:return p.t0=hb,p.next=5,document.fonts.ready;case 5:p.t1=p.sent;n=(0,p.t0)(p.t1);if(!this.allFontsLoaded(n.filter(function(q){return"loaded"==q.status}))){p.next=9;break}return p.abrupt("return",!0);case 9:return p.abrupt("return",Ah.promise.waitFor(5E3,function(){return k.allFontsLoaded()}));
case 10:case "end":return p.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"textBoundsSingleChunk",value:function(){var a=this._fontMetric||this.env.fontMetric,d=Nb(this.textAndAttributes,2),f=d[0],k=Object.assign({},this.textStyle,{},d[1]);d=this.padding;a.isProportional(k.fontFamily)?(Ah.__inter0__=a.sizeFor(k,f),f=Ah.__inter0__.width,a=Ah.__inter0__.height):(k=a.sizeFor(k,"x"),a=k.height,f=f.length*k.width);return new Ah.Rectangle(0,0,Math.ceil(d.left()+d.right()+
f),Math.ceil(d.top()+d.bottom()+a))}},{key:"textBoundsAllChunks",value:function(){for(var a=this._fontMetric||this.env.fontMetric,d=this.padding,f=this.textStyle,k=this.textAndAttributesOfLines,n=!a.isProportional(f.fontFamily),p=a.sizeFor(f,"x").height,q=0,r=0,t=0;t<k.length;t++){var w=k[t];if(w.length){for(var x=0,B=0,D=0;D<w.length;D+=2){var F=w[D],L=w[D+1]||{},G=Object.assign({},f,{},L);n&&!L.fontFamily||!a.isProportional(G.fontFamily)?(G.fontFamily+"-"+G.fontSize,G=a.sizeFor(G,"x"),L=G.height,
B+=F.length*G.width,x=Math.max(x,L)):(F=a.sizeFor(G,F),L=F.height,B+=F.width,G.paddingRight&&(B+=Number.parseInt(G.paddingRight)),G.paddingLeft&&(B+=Number.parseInt(G.paddingLeft)),x=Math.max(x,L))}q+=x;r=Math.max(r,B)}else q+=p}return new Ah.Rectangle(0,0,Math.ceil(d.left()+d.right()+r),Math.ceil(d.top()+d.bottom()+q))}},{key:"invalidateTextLayout",value:function(){this._cachedTextBounds=null;this.autofit&&(this._needsFit=!0);this.makeDirty()}},{key:"textBounds",value:function(){var a=this.textAndAttributes;
return this._cachedTextBounds||(this._cachedTextBounds=2>=a.length?this.textBoundsSingleChunk():this.textBoundsAllChunks())}},{key:"forceRerender",value:function(){this._cachedTextBounds=null;this.makeDirty()}},{key:"applyLayoutIfNeeded",value:function(){this.fitIfNeeded();ie._get(Object.getPrototypeOf(g.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);for(var d=
[],f=this.textAndAttributesOfLines.length,k=0;k<f;k++){for(var n=this.textAndAttributesOfLines[k],p=0;p<n.length;p+=2){var q=n[p+1];d.push(this.renderChunk(n[p],q))}k<f-1&&d.push(Ah.h("br"))}q=this.textStyle;var r=q.fontColor,t=q.fontSize;f=q.fontStyle;k=q.fontWeight;n=q.textShadow;p=q.textDecoration;var w=q.textStyleClasses,x=this.padding;q={fontFamily:q.fontFamily,fontSize:"number"===typeof t?t+"px":t,color:r?String(r):"transparent",cursor:this.nativeCursor};r=Ah.defaultAttributes(this,a);n&&(q.textShadow=
n);"normal"!==k&&(q.fontWeight=k);"normal"!==f&&(q.fontStyle=f);"none"!==p&&(q.textDecoration=p);w&&w.length&&(r.className=(r.className||"")+" "+w.join(" "));r.style=Object.assign({},Ah.defaultStyle(this),{},q);return Ah.h("div",r,[Ah.h("div",{style:{pointerEvents:"none",paddingLeft:x.left()+"px",paddingRight:x.right()+"px",paddingTop:x.top()+"px",paddingBottom:x.bottom()+"px",width:"calc(100% - ".concat(x.left(),"px - ").concat(x.right(),"px)")}},d),a.renderSubmorphs(this)])}},{key:"renderChunk",
value:function(a,d){var f=d=d||{},k=f.backgroundColor,n=f.fontColor,p=f.fontFamily,q=f.fontStyle,r=f.fontWeight,t=f.textShadow,w=f.textDecoration,x=f.textStyleClasses,B=f.textAlign,D=f["float"],F=f.display,L=f.lineHeight,G=f.opacity;f={};var oa={style:f};D&&(f["float"]=D);F&&(f.display=F);k&&(f.backgroundColor=String(k));p&&(f.fontFamily=p);n&&(f.color=String(n));t&&(f.textShadow=t);"normal"!==r&&(f.fontWeight=r);"normal"!==q&&(f.fontStyle=q);"none"!==w&&(f.textDecoration=w);B&&(f.textAlign=B);L&&
(f.lineHeight=L);G&&(f.opacity=G);x&&x.length&&(oa.className=x.join(" "));k="fontSize width height maxWidth maxHeight top left padding paddingLeft paddingRight paddingBottom paddingTop marginTop marginRight marginLeft marginBottom".split(" ");for(n=0;n<k.length;n++)p=k[n],d.hasOwnProperty(p)&&(q=d[p],f[p]="number"===typeof q?q+"px":q);return Ah.h("span",oa,a)}},{key:"interactivelyChangeLabel",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=
n.next){case 0:return n.next=2,this.world().prompt("edit label",{input:this.textString,historyId:"lively.morphic-label-edit-hist",selectInput:!0});case 2:k=n.sent,"string"===typeof k&&(this.textString=k);case 4:case "end":return n.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"interactivelySetIcon",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,n,p;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,
this.world().filterableListPrompt("Select Icon",Object.keys(Ah.Icons).map(function(r){return{isListItem:!0,label:[].concat(hb(Ah.Icon.textAttribute(r,{paddingRight:"10px"})),[r,{}]),value:r}}));case 2:if(k=q.sent,n=Nb(k.selected,1),p=n[0])this.value=Ah.Icon.textAttribute(p);case 5:case "end":return q.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"menuItems",value:function(){var a=this,d=ie._get(Object.getPrototypeOf(g.prototype),"menuItems",this).call(this);d.unshift({isDivider:!0});
d.unshift(["edit label as rich text",Bb(regeneratorRuntime.mark(function k(){var n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,$world.editPrompt("rich text",{input:a.value,resolveTextAttributes:!0});case 2:if(n=p.sent)a.value=n;case 4:case "end":return p.stop()}},k)}))]);d.unshift(["change label",function(){return a.interactivelyChangeLabel()}]);d.unshift(["set Icon",function(){return a.interactivelySetIcon()}]);return d}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"Label"}},{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},fill:{defaultValue:Ah.Color.transparent},draggable:{defaultValue:!1},nativeCursor:{defaultValue:"default"},isIcon:{derived:!0,get:function(){return Ah.properties.values(Ah.Icons).map(function(a){return a.code}).includes(this.textString)}},value:{derived:!0,after:["textAndAttributes","textString"],get:function(){var a=this.textAndAttributes;if(2>=a.length){var d=Nb(a,2),f=d[0];if(!Object.keys(d[1]||
{}).length)return f||""}return a},set:function(a){"string"===typeof a?this.textString=a:this.textAndAttributes=a}},textString:{derived:!0,after:["textAndAttributes"],get:function(){return this.textAndAttributes.map(function(a,d){return 0==d%2?a:""}).join("")},set:function(a){this.textAndAttributes=[a,null]}},textAndAttributes:{after:["autofit"],get:function(){var a=this.getProperty("textAndAttributes");if(!a||1>a.length)a=["",null];return a},set:function(a){Array.isArray(a)||(a=[String(a),{}]);0===
a.length&&(a=["",{}]);this.textAndAttributes;this.setProperty("textAndAttributes",a);this.autofit&&this.invalidateTextLayout();Ah.signal(this,"value",a)}},valueAndAnnotation:{derived:!0,after:["textAndAttributes"],get:function(){var a=this.textAndAttributes,d=null;if(2<a.length){var f=a.slice(-2),k=Nb(f,2);f=k[0];(k=k[1])&&k.textStyleClasses&&k.textStyleClasses.includes("annotation")&&(a=a.slice(0,-2),d=[f,k])}return{value:a,annotation:d}},set:function(a){var d=a.value;a=a.annotation;d||(d="");"string"===
typeof d&&(d=[d,null]);Array.isArray(d)||(d=[String(d),null]);d=d.slice();if(a){"string"===typeof a&&(a=[a,null]);var f=a[1];f||(f=a[1]={});d.push.apply(d,hb(a));f.textStyleClasses=(f.textStyleClasses||[]).concat("annotation");f.textStyleClasses.includes("annotation")||f.textStyleClasses.push("annotation")}this.textAndAttributes=d}},autofit:{defaultValue:!0,set:function(a){this.setProperty("autofit",a);a&&(this._needsFit=!0)}},master:{after:["padding"]},padding:{type:"Rectangle",isStyleProp:!0,defaultValue:Ah.Rectangle.inset(0),
after:["autofit"],initialize:function(a){this.padding=a},set:function(a){a||(a=Ah.Rectangle.inset(0));var d=this.padding;this.setProperty("padding","number"===typeof a?Ah.Rectangle.inset(a):a);this.autofit&&!d.equals(a)&&this.invalidateTextLayout()}},fontFamily:{isStyleProp:!0,type:"Enum",values:Ah.config.text.basicFontItems,after:["autofit"],defaultValue:"IBM Plex Sans, Sans-Serif",set:function(a){var d=this.fontFamily;this.setProperty("fontFamily",a);this.autofit&&d!=a&&this.invalidateTextLayout()}},
fontSize:{type:"Number",min:1,isStyleProp:!0,defaultValue:12,after:["autofit"],set:function(a){var d=this.fontSize;this.setProperty("fontSize",a);this.autofit&&a!=d&&this.invalidateTextLayout()}},fontColor:{type:"Color",isStyleProp:!0,defaultValue:Ah.Color.black},fontWeight:{type:"Enum",values:["bold","bolder","light","lighter"],isStyleProp:!0,defaultValue:"normal",after:["autofit"],set:function(a){var d=this.fontWeight;this.setProperty("fontWeight",a);this.autofit&&d!=a&&this.invalidateTextLayout()}},
fontStyle:{type:"Enum",values:["normal","italic","oblique"],isStyleProp:!0,defaultValue:"normal",after:["autofit"],set:function(a){var d=this.fontStyle;this.setProperty("fontStyle",a);this.autofit&&d!=a&&this.invalidateTextLayout()}},textShadow:{type:"String",isStyleProp:!0,defaultValue:""},textDecoration:{defaultValue:"none"},textStyleClasses:{defaultValue:void 0,after:["autofit"],set:function(a){this.setProperty("textStyleClasses",a);this.autofit&&this.invalidateTextLayout()}}}}},{key:"icon",value:function(a){return Ah.Icon.makeLabel(a,
1<arguments.length&&void 0!==arguments[1]?arguments[1]:{prefix:"",suffix:""})}}],c,{pathInPackage:function(){return"./text/label.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:483,end:20213})}(Ah.Morph));Ah.Label=hy;Ah.Label=hy;var k7=Object.freeze({__proto__:null,Label:hy}),AI="undefined"!==typeof globalThis?globalThis:"undefined"!==
typeof self?self:global,l7={},xV=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,m7=l7=function(b,c){function g(Ya){var xa=Ya.match(/\n/g);xa&&(ha+=xa.length);xa=Ya.lastIndexOf("\n");Ha=~xa?Ya.length-xa:Ha+Ya.length}function a(){var Ya={line:ha,column:Ha};return function(xa){xa.position=new d(Ya);q(/^\s*/);return xa}}function d(Ya){(this||AI).start=Ya;(this||AI).end={line:ha,column:Ha};(this||AI).source=c.source}function f(Ya){var xa=Error(c.source+":"+ha+":"+Ha+": "+Ya);xa.reason=Ya;xa.filename=c.source;xa.line=
ha;xa.column=Ha;xa.source=b;if(c.silent)Va.push(xa);else throw xa;}function k(){return q(/^{\s*/)}function n(){return q(/^}/)}function p(){var Ya,xa=[];q(/^\s*/);for(r(xa);b.length&&"}"!=b.charAt(0)&&(Ya=G()||oa());)!1!==Ya&&(xa.push(Ya),r(xa));return xa}function q(Ya){if(Ya=Ya.exec(b)){var xa=Ya[0];g(xa);b=b.slice(xa.length);return Ya}}function r(Ya){var xa;for(Ya=Ya||[];xa=t();)!1!==xa&&Ya.push(xa);return Ya}function t(){var Ya=a();if("/"==b.charAt(0)&&"*"==b.charAt(1)){for(var xa=2;""!=b.charAt(xa)&&
("*"!=b.charAt(xa)||"/"!=b.charAt(xa+1));)++xa;xa+=2;if(""===b.charAt(xa-1))return f("End of comment missing");var tc=b.slice(2,xa-2);Ha+=2;g(tc);b=b.slice(xa);Ha+=2;return Ya({type:"comment",comment:tc})}}function w(){var Ya=q(/^([^{]+)/);if(Ya)return lp(Ya[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(xa){return xa.replace(/,/g,"\u200c")}).split(/\s*(?![^(]*\)),\s*/).map(function(xa){return xa.replace(/\u200C/g,",")})}function x(){var Ya=
a(),xa=q(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(xa){xa=lp(xa[0]);if(!q(/^:\s*/))return f("property missing ':'");var tc=q(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/);Ya=Ya({type:"declaration",property:xa.replace(xV,""),value:tc?lp(tc[0]).replace(xV,""):""});q(/^[;\s]*/);return Ya}}function B(){var Ya=[];if(!k())return f("missing '{'");r(Ya);for(var xa;xa=x();)!1!==xa&&(Ya.push(xa),r(Ya));return n()?Ya:f("missing '}'")}function D(){for(var Ya,xa=[],tc=a();Ya=q(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)xa.push(Ya[1]),
q(/^,\s*/);if(xa.length)return tc({type:"keyframe",values:xa,declarations:B()})}function F(){var Ya=a(),xa=q(/^@([-\w]+)?keyframes\s*/);if(xa){var tc=xa[1];xa=q(/^([-\w]+)\s*/);if(!xa)return f("@keyframes missing name");xa=xa[1];if(!k())return f("@keyframes missing '{'");for(var Qb,wc=r();Qb=D();)wc.push(Qb),wc=wc.concat(r());return n()?Ya({type:"keyframes",name:xa,vendor:tc,keyframes:wc}):f("@keyframes missing '}'")}}function L(Ya){var xa=new RegExp("^@"+Ya+"\\s*([^;]+);");return function(){var tc=
a(),Qb=q(xa);if(Qb){var wc={type:Ya};wc[Ya]=Qb[1].trim();return tc(wc)}}}function G(){if("@"==b[0]){var Ya;if(!(Ya=F())){Ya=a();var xa=q(/^@media *([^{]+)/);if(xa)if(xa=lp(xa[1]),k()){var tc=r().concat(p());Ya=n()?Ya({type:"media",media:xa,rules:tc}):f("@media missing '}'")}else Ya=f("@media missing '{'");else Ya=void 0}Ya||(Ya=a(),Ya=(xa=q(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/))?Ya({type:"custom-media",name:lp(xa[1]),media:lp(xa[2])}):void 0);Ya||(Ya=a(),(xa=q(/^@supports *([^{]+)/))?(xa=lp(xa[1]),
k()?(tc=r().concat(p()),Ya=n()?Ya({type:"supports",supports:xa,rules:tc}):f("@supports missing '}'")):Ya=f("@supports missing '{'")):Ya=void 0);if(!(Ya=Ya||hc()||qc()||jc()))if(Ya=a(),tc=q(/^@([-\w]+)?document *([^{]+)/))if(xa=lp(tc[1]),tc=lp(tc[2]),k()){var Qb=r().concat(p());Ya=n()?Ya({type:"document",document:tc,vendor:xa,rules:Qb}):f("@document missing '}'")}else Ya=f("@document missing '{'");else Ya=void 0;if(!Ya)if(Ya=a(),q(/^@page */))if(xa=w()||[],k()){for(tc=r();Qb=x();)tc.push(Qb),tc=tc.concat(r());
Ya=n()?Ya({type:"page",selectors:xa,declarations:tc}):f("@page missing '}'")}else Ya=f("@page missing '{'");else Ya=void 0;Ya||(Ya=a(),q(/^@host\s*/)?k()?(xa=r().concat(p()),Ya=n()?Ya({type:"host",rules:xa}):f("@host missing '}'")):Ya=f("@host missing '{'"):Ya=void 0);if(!Ya)if(Ya=a(),q(/^@font-face\s*/))if(k()){for(xa=r();tc=x();)xa.push(tc),xa=xa.concat(r());Ya=n()?Ya({type:"font-face",declarations:xa}):f("@font-face missing '}'")}else Ya=f("@font-face missing '{'");else Ya=void 0;return Ya}}function oa(){var Ya=
a(),xa=w();if(!xa)return f("selector missing");r();return Ya({type:"rule",selectors:xa,declarations:B()})}c=c||{};var ha=1,Ha=1;d.prototype.content=b;var Va=[],hc=L("import"),qc=L("charset"),jc=L("namespace");return VF(function(){var Ya=p();return{type:"stylesheet",stylesheet:{source:c.source,rules:Ya,parsingErrors:Va}}}())},$_="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,yV={};yV=hA;hA.prototype.emit=function(b){return b};hA.prototype.visit=function(b){return this[b.type](b)};
hA.prototype.mapVisit=function(b,c){var g="";c=c||"";for(var a=0,d=b.length;a<d;a++)g+=this.visit(b[a]),c&&a<d-1&&(g+=this.emit(c));return g};var zV=yV,iq="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,AV={},YP=zV,n7=Dj;AV=jk;n7(jk,YP);jk.prototype.compile=function(b){return this.stylesheet(b)};jk.prototype.stylesheet=function(b){return this.mapVisit(b.stylesheet.rules,"\n\n")};jk.prototype.comment=function(b){return this.emit(this.indent()+"/*"+b.comment+"*/",b.position)};
jk.prototype["import"]=function(b){return this.emit("@import "+b["import"]+";",b.position)};jk.prototype.media=function(b){return this.emit("@media "+b.media,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};jk.prototype.document=function(b){return this.emit("@"+(b.vendor||"")+"document "+b.document,b.position)+this.emit("  {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};jk.prototype.charset=function(b){return this.emit("@charset "+
b.charset+";",b.position)};jk.prototype.namespace=function(b){return this.emit("@namespace "+b.namespace+";",b.position)};jk.prototype.supports=function(b){return this.emit("@supports "+b.supports,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};jk.prototype.keyframes=function(b){return this.emit("@"+(b.vendor||"")+"keyframes "+b.name,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.keyframes,"\n")+this.emit(this.indent(-1)+"}")};
jk.prototype.keyframe=function(b){var c=b.declarations;return this.emit(this.indent())+this.emit(b.values.join(", "),b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(c,"\n")+this.emit(this.indent(-1)+"\n"+this.indent()+"}\n")};jk.prototype.page=function(b){var c=b.selectors.length?b.selectors.join(", ")+" ":"";return this.emit("@page "+c,b.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(b.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};jk.prototype["font-face"]=
function(b){return this.emit("@font-face ",b.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(b.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};jk.prototype.host=function(b){return this.emit("@host",b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};jk.prototype["custom-media"]=function(b){return this.emit("@custom-media "+b.name+" "+b.media+";",b.position)};jk.prototype.rule=function(b){var c=this.indent(),
g=b.declarations;return g.length?this.emit(b.selectors.map(function(a){return c+a}).join(",\n"),b.position)+this.emit(" {\n")+this.emit(this.indent(1))+this.mapVisit(g,"\n")+this.emit(this.indent(-1))+this.emit("\n"+this.indent()+"}"):""};jk.prototype.declaration=function(b){return this.emit(this.indent())+this.emit(b.property+": "+b.value,b.position)+this.emit(";")};jk.prototype.indent=function(b){(this||iq).level=(this||iq).level||1;return null!=b?((this||iq).level+=b,""):Array((this||iq).level).join((this||
iq).indentation||"  ")};var o7=AV,Ii={getArg:function(b,c,g){if(c in b)return b[c];if(3===arguments.length)return g;throw Error('"'+c+'" is a required argument.');}},ZP=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,a0=/^data:.+,.+$/;Ii.urlParse=Ww;Ii.urlGenerate=xu;Ii.normalize=WF;Ii.join=$P;Ii.isAbsolute=function(b){return"/"===b.charAt(0)||ZP.test(b)};Ii.relative=function(b,c){""===b&&(b=".");b=b.replace(/\/$/,"");for(var g=0;0!==c.indexOf(b+"/");){var a=b.lastIndexOf("/");if(0>
a)return c;b=b.slice(0,a);if(b.match(/^([^\/]+:\/)?\/*$/))return c;++g}return Array(g+1).join("../")+c.substr(b.length+1)};var BV=!("__proto__"in Object.create(null));Ii.toSetString=BV?aQ:b0;Ii.fromSetString=BV?aQ:c0;Ii.compareByOriginalPositions=function(b,c,g){var a=yu(b.source,c.source);if(0!==a)return a;a=b.originalLine-c.originalLine;if(0!==a)return a;a=b.originalColumn-c.originalColumn;if(0!==a||g)return a;a=b.generatedColumn-c.generatedColumn;if(0!==a)return a;a=b.generatedLine-c.generatedLine;
return 0!==a?a:yu(b.name,c.name)};Ii.compareByGeneratedPositionsDeflated=function(b,c,g){var a=b.generatedLine-c.generatedLine;if(0!==a)return a;a=b.generatedColumn-c.generatedColumn;if(0!==a||g)return a;a=yu(b.source,c.source);if(0!==a)return a;a=b.originalLine-c.originalLine;if(0!==a)return a;a=b.originalColumn-c.originalColumn;return 0!==a?a:yu(b.name,c.name)};Ii.compareByGeneratedPositionsInflated=function(b,c){var g=b.generatedLine-c.generatedLine;if(0!==g)return g;g=b.generatedColumn-c.generatedColumn;
if(0!==g)return g;g=yu(b.source,c.source);if(0!==g)return g;g=b.originalLine-c.originalLine;if(0!==g)return g;g=b.originalColumn-c.originalColumn;return 0!==g?g:yu(b.name,c.name)};Ii.parseSourceMapInput=function(b){return JSON.parse(b.replace(/^\)]}'[^\n]*\n/,""))};Ii.computeSourceURL=function(b,c,g){c=c||"";b&&("/"!==b[b.length-1]&&"/"!==c[0]&&(b+="/"),c=b+c);if(g){b=Ww(g);if(!b)throw Error("sourceMapURL could not be parsed");b.path&&(g=b.path.lastIndexOf("/"),0<=g&&(b.path=b.path.substring(0,g+
1)));c=$P(xu(b),c)}return WF(c)};Ii.isAbsolute;Ii.getArg;Ii.urlParse;Ii.urlGenerate;Ii.normalize;Ii.join;Ii.relative;Ii.toSetString;Ii.fromSetString;Ii.compareByOriginalPositions;Ii.compareByGeneratedPositionsDeflated;Ii.compareByGeneratedPositionsInflated;Ii.parseSourceMapInput;Ii.computeSourceURL;var CB={},CV="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");CB.encode=function(b){if(0<=b&&b<CV.length)return CV[b];throw new TypeError("Must be between 0 and 63: "+b);};CB.decode=
function(b){return 65<=b&&90>=b?b-65:97<=b&&122>=b?b-97+26:48<=b&&57>=b?b-48+52:43==b?62:47==b?63:-1};var fv={encode:function(b){var c="",g=0>b?(-b<<1)+1:b<<1;do b=g&31,g>>>=5,0<g&&(b|=32),c+=CB.encode(b);while(0<g);return c},decode:function(b,c,g){var a=b.length,d=0,f=0;do{if(c>=a)throw Error("Expected more digits in base 64 VLQ value.");var k=CB.decode(b.charCodeAt(c++));if(-1===k)throw Error("Invalid base64 digit: "+b.charAt(c-1));var n=!!(k&32);k&=31;d+=k<<f;f+=5}while(n);b=d>>1;g.value=1===(d&
1)?-b:b;g.rest=c}},Uk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,BI=Ii,CI=Object.prototype.hasOwnProperty,gs="undefined"!==typeof Map;mo.fromArray=function(b,c){for(var g=new mo,a=0,d=b.length;a<d;a++)g.add(b[a],c);return g};mo.prototype.size=function(){return gs?(this||Uk)._set.size:Object.getOwnPropertyNames((this||Uk)._set).length};mo.prototype.add=function(b,c){var g=gs?b:BI.toSetString(b),a=gs?this.has(b):CI.call((this||Uk)._set,g),d=(this||Uk)._array.length;
a&&!c||(this||Uk)._array.push(b);a||(gs?(this||Uk)._set.set(b,d):(this||Uk)._set[g]=d)};mo.prototype.has=function(b){if(gs)return(this||Uk)._set.has(b);b=BI.toSetString(b);return CI.call((this||Uk)._set,b)};mo.prototype.indexOf=function(b){if(gs){var c=(this||Uk)._set.get(b);if(0<=c)return c}else if(c=BI.toSetString(b),CI.call((this||Uk)._set,c))return(this||Uk)._set[c];throw Error('"'+b+'" is not in the set.');};mo.prototype.at=function(b){if(0<=b&&b<(this||Uk)._array.length)return(this||Uk)._array[b];
throw Error("No element indexed by "+b);};mo.prototype.toArray=function(){return(this||Uk)._array.slice()};var Gm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,DV=Ii;iA.prototype.unsortedForEach=function(b,c){(this||Gm)._array.forEach(b,c)};iA.prototype.add=function(b){var c=(this||Gm)._last,g=c.generatedLine,a=b.generatedLine,d=c.generatedColumn,f=b.generatedColumn;a>g||a==g&&f>=d||0>=DV.compareByGeneratedPositionsInflated(c,b)?(this||Gm)._last=b:(this||Gm)._sorted=
!1;(this||Gm)._array.push(b)};iA.prototype.toArray=function(){(this||Gm)._sorted||((this||Gm)._array.sort(DV.compareByGeneratedPositionsInflated),(this||Gm)._sorted=!0);return(this||Gm)._array};var Ph="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,kk=Ii,jA=mo,d0=iA;Hm.prototype._version=3;Hm.fromSourceMap=function(b){var c=b.sourceRoot,g=new Hm({file:b.file,sourceRoot:c});b.eachMapping(function(a){var d={generated:{line:a.generatedLine,column:a.generatedColumn}};
null!=a.source&&(d.source=a.source,null!=c&&(d.source=kk.relative(c,d.source)),d.original={line:a.originalLine,column:a.originalColumn},null!=a.name&&(d.name=a.name));g.addMapping(d)});b.sources.forEach(function(a){var d=a;null!==c&&(d=kk.relative(c,a));g._sources.has(d)||g._sources.add(d);d=b.sourceContentFor(a);null!=d&&g.setSourceContent(a,d)});return g};Hm.prototype.addMapping=function(b){var c=kk.getArg(b,"generated"),g=kk.getArg(b,"original",null),a=kk.getArg(b,"source",null);b=kk.getArg(b,
"name",null);(this||Ph)._skipValidation||this._validateMapping(c,g,a,b);null!=a&&(a=String(a),(this||Ph)._sources.has(a)||(this||Ph)._sources.add(a));null!=b&&(b=String(b),(this||Ph)._names.has(b)||(this||Ph)._names.add(b));(this||Ph)._mappings.add({generatedLine:c.line,generatedColumn:c.column,originalLine:null!=g&&g.line,originalColumn:null!=g&&g.column,source:a,name:b})};Hm.prototype.setSourceContent=function(b,c){null!=(this||Ph)._sourceRoot&&(b=kk.relative((this||Ph)._sourceRoot,b));null!=c?
((this||Ph)._sourcesContents||((this||Ph)._sourcesContents=Object.create(null)),(this||Ph)._sourcesContents[kk.toSetString(b)]=c):(this||Ph)._sourcesContents&&(delete (this||Ph)._sourcesContents[kk.toSetString(b)],0===Object.keys((this||Ph)._sourcesContents).length&&((this||Ph)._sourcesContents=null))};Hm.prototype.applySourceMap=function(b,c,g){var a=c;if(null==c){if(null==b.file)throw Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');
a=b.file}var d=(this||Ph)._sourceRoot;null!=d&&(a=kk.relative(d,a));var f=new jA,k=new jA;(this||Ph)._mappings.unsortedForEach(function(n){if(n.source===a&&null!=n.originalLine){var p=b.originalPositionFor({line:n.originalLine,column:n.originalColumn});null!=p.source&&(n.source=p.source,null!=g&&(n.source=kk.join(g,n.source)),null!=d&&(n.source=kk.relative(d,n.source)),n.originalLine=p.line,n.originalColumn=p.column,null!=p.name&&(n.name=p.name))}p=n.source;null==p||f.has(p)||f.add(p);n=n.name;null==
n||k.has(n)||k.add(n)},this||Ph);(this||Ph)._sources=f;(this||Ph)._names=k;b.sources.forEach(function(n){var p=b.sourceContentFor(n);null!=p&&(null!=g&&(n=kk.join(g,n)),null!=d&&(n=kk.relative(d,n)),this.setSourceContent(n,p))},this||Ph)};Hm.prototype._validateMapping=function(b,c,g,a){if(c&&"number"!==typeof c.line&&"number"!==typeof c.column)throw Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");
if(!(b&&"line"in b&&"column"in b&&0<b.line&&0<=b.column&&!c&&!g&&!a||b&&"line"in b&&"column"in b&&c&&"line"in c&&"column"in c&&0<b.line&&0<=b.column&&0<c.line&&0<=c.column&&g))throw Error("Invalid mapping: "+JSON.stringify({generated:b,source:g,original:c,name:a}));};Hm.prototype._serializeMappings=function(){for(var b=0,c=1,g=0,a=0,d=0,f=0,k="",n,p,q,r=(this||Ph)._mappings.toArray(),t=0,w=r.length;t<w;t++){p=r[t];n="";if(p.generatedLine!==c)for(b=0;p.generatedLine!==c;)n+=";",c++;else if(0<t){if(!kk.compareByGeneratedPositionsInflated(p,
r[t-1]))continue;n+=","}n+=fv.encode(p.generatedColumn-b);b=p.generatedColumn;null!=p.source&&(q=(this||Ph)._sources.indexOf(p.source),n+=fv.encode(q-f),f=q,n+=fv.encode(p.originalLine-1-a),a=p.originalLine-1,n+=fv.encode(p.originalColumn-g),g=p.originalColumn,null!=p.name&&(p=(this||Ph)._names.indexOf(p.name),n+=fv.encode(p-d),d=p));k+=n}return k};Hm.prototype._generateSourcesContent=function(b,c){return b.map(function(g){if(!(this||Ph)._sourcesContents)return null;null!=c&&(g=kk.relative(c,g));
g=kk.toSetString(g);return Object.prototype.hasOwnProperty.call((this||Ph)._sourcesContents,g)?(this||Ph)._sourcesContents[g]:null},this||Ph)};Hm.prototype.toJSON=function(){var b={version:(this||Ph)._version,sources:(this||Ph)._sources.toArray(),names:(this||Ph)._names.toArray(),mappings:this._serializeMappings()};null!=(this||Ph)._file&&(b.file=(this||Ph)._file);null!=(this||Ph)._sourceRoot&&(b.sourceRoot=(this||Ph)._sourceRoot);(this||Ph)._sourcesContents&&(b.sourcesContent=this._generateSourcesContent(b.sources,
b.sourceRoot));return b};Hm.prototype.toString=function(){return JSON.stringify(this.toJSON())};var kA={GREATEST_LOWER_BOUND:1,LEAST_UPPER_BOUND:2,search:function(b,c,g,a){if(0===c.length)return-1;b=XF(-1,c.length,b,c,g,a||kA.GREATEST_LOWER_BOUND);if(0>b)return-1;for(;0<=b-1&&0===g(c[b],c[b-1],!0);)--b;return b}},Of="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Vg=Ii,DI=kA,zu=mo,iy=function(b,c){ZF(b,c,0,b.length-1)};wj.fromSourceMap=function(b,c){return kl.fromSourceMap(b,
c)};wj.prototype._version=3;wj.prototype.__generatedMappings=null;Object.defineProperty(wj.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){(this||Of).__generatedMappings||this._parseMappings((this||Of)._mappings,(this||Of).sourceRoot);return(this||Of).__generatedMappings}});wj.prototype.__originalMappings=null;Object.defineProperty(wj.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){(this||Of).__originalMappings||this._parseMappings((this||Of)._mappings,
(this||Of).sourceRoot);return(this||Of).__originalMappings}});wj.prototype._charIsMappingSeparator=function(b,c){b=b.charAt(c);return";"===b||","===b};wj.prototype._parseMappings=function(b,c){throw Error("Subclasses must implement _parseMappings");};wj.GENERATED_ORDER=1;wj.ORIGINAL_ORDER=2;wj.GREATEST_LOWER_BOUND=1;wj.LEAST_UPPER_BOUND=2;wj.prototype.eachMapping=function(b,c,g){c=c||null;switch(g||wj.GENERATED_ORDER){case wj.GENERATED_ORDER:g=(this||Of)._generatedMappings;break;case wj.ORIGINAL_ORDER:g=
(this||Of)._originalMappings;break;default:throw Error("Unknown order of iteration.");}var a=(this||Of).sourceRoot;g.map(function(d){var f=null===d.source?null:(this||Of)._sources.at(d.source);f=Vg.computeSourceURL(a,f,(this||Of)._sourceMapURL);return{source:f,generatedLine:d.generatedLine,generatedColumn:d.generatedColumn,originalLine:d.originalLine,originalColumn:d.originalColumn,name:null===d.name?null:(this||Of)._names.at(d.name)}},this||Of).forEach(b,c)};wj.prototype.allGeneratedPositionsFor=
function(b){var c=Vg.getArg(b,"line"),g={source:Vg.getArg(b,"source"),originalLine:c,originalColumn:Vg.getArg(b,"column",0)};g.source=this._findSourceIndex(g.source);if(0>g.source)return[];var a=[];g=this._findMapping(g,(this||Of)._originalMappings,"originalLine","originalColumn",Vg.compareByOriginalPositions,DI.LEAST_UPPER_BOUND);if(0<=g){var d=(this||Of)._originalMappings[g];if(void 0===b.column)for(c=d.originalLine;d&&d.originalLine===c;)a.push({line:Vg.getArg(d,"generatedLine",null),column:Vg.getArg(d,
"generatedColumn",null),lastColumn:Vg.getArg(d,"lastGeneratedColumn",null)}),d=(this||Of)._originalMappings[++g];else for(b=d.originalColumn;d&&d.originalLine===c&&d.originalColumn==b;)a.push({line:Vg.getArg(d,"generatedLine",null),column:Vg.getArg(d,"generatedColumn",null),lastColumn:Vg.getArg(d,"lastGeneratedColumn",null)}),d=(this||Of)._originalMappings[++g]}return a};kl.prototype=Object.create(wj.prototype);kl.prototype.consumer=wj;kl.prototype._findSourceIndex=function(b){var c=b;null!=(this||
Of).sourceRoot&&(c=Vg.relative((this||Of).sourceRoot,c));if((this||Of)._sources.has(c))return(this||Of)._sources.indexOf(c);for(c=0;c<(this||Of)._absoluteSources.length;++c)if((this||Of)._absoluteSources[c]==b)return c;return-1};kl.fromSourceMap=function(b,c){var g=Object.create(kl.prototype),a=g._names=zu.fromArray(b._names.toArray(),!0),d=g._sources=zu.fromArray(b._sources.toArray(),!0);g.sourceRoot=b._sourceRoot;g.sourcesContent=b._generateSourcesContent(g._sources.toArray(),g.sourceRoot);g.file=
b._file;g._sourceMapURL=c;g._absoluteSources=g._sources.toArray().map(function(t){return Vg.computeSourceURL(g.sourceRoot,t,c)});b=b._mappings.toArray().slice();for(var f=g.__generatedMappings=[],k=g.__originalMappings=[],n=0,p=b.length;n<p;n++){var q=b[n],r=new cQ;r.generatedLine=q.generatedLine;r.generatedColumn=q.generatedColumn;q.source&&(r.source=d.indexOf(q.source),r.originalLine=q.originalLine,r.originalColumn=q.originalColumn,q.name&&(r.name=a.indexOf(q.name)),k.push(r));f.push(r)}iy(g.__originalMappings,
Vg.compareByOriginalPositions);return g};kl.prototype._version=3;Object.defineProperty(kl.prototype,"sources",{get:function(){return(this||Of)._absoluteSources.slice()}});kl.prototype._parseMappings=function(b,c){c=1;for(var g=0,a=0,d=0,f=0,k=0,n=b.length,p=0,q={},r={},t=[],w=[],x,B,D,F,L;p<n;)if(";"===b.charAt(p))c++,p++,g=0;else if(","===b.charAt(p))p++;else{x=new cQ;x.generatedLine=c;for(F=p;F<n&&!this._charIsMappingSeparator(b,F);F++);B=b.slice(p,F);if(D=q[B])p+=B.length;else{for(D=[];p<F;)fv.decode(b,
p,r),L=r.value,p=r.rest,D.push(L);if(2===D.length)throw Error("Found a source, but no line and column");if(3===D.length)throw Error("Found a source and line, but no column");q[B]=D}x.generatedColumn=g+D[0];g=x.generatedColumn;1<D.length&&(x.source=f+D[1],f+=D[1],x.originalLine=a+D[2],a=x.originalLine,x.originalLine+=1,x.originalColumn=d+D[3],d=x.originalColumn,4<D.length&&(x.name=k+D[4],k+=D[4]));w.push(x);"number"===typeof x.originalLine&&t.push(x)}iy(w,Vg.compareByGeneratedPositionsDeflated);(this||
Of).__generatedMappings=w;iy(t,Vg.compareByOriginalPositions);(this||Of).__originalMappings=t};kl.prototype._findMapping=function(b,c,g,a,d,f){if(0>=b[g])throw new TypeError("Line must be greater than or equal to 1, got "+b[g]);if(0>b[a])throw new TypeError("Column must be greater than or equal to 0, got "+b[a]);return DI.search(b,c,d,f)};kl.prototype.computeColumnSpans=function(){for(var b=0;b<(this||Of)._generatedMappings.length;++b){var c=(this||Of)._generatedMappings[b];if(b+1<(this||Of)._generatedMappings.length){var g=
(this||Of)._generatedMappings[b+1];if(c.generatedLine===g.generatedLine){c.lastGeneratedColumn=g.generatedColumn-1;continue}}c.lastGeneratedColumn=Infinity}};kl.prototype.originalPositionFor=function(b){var c={generatedLine:Vg.getArg(b,"line"),generatedColumn:Vg.getArg(b,"column")};b=this._findMapping(c,(this||Of)._generatedMappings,"generatedLine","generatedColumn",Vg.compareByGeneratedPositionsDeflated,Vg.getArg(b,"bias",wj.GREATEST_LOWER_BOUND));if(0<=b&&(b=(this||Of)._generatedMappings[b],b.generatedLine===
c.generatedLine)){c=Vg.getArg(b,"source",null);null!==c&&(c=(this||Of)._sources.at(c),c=Vg.computeSourceURL((this||Of).sourceRoot,c,(this||Of)._sourceMapURL));var g=Vg.getArg(b,"name",null);null!==g&&(g=(this||Of)._names.at(g));return{source:c,line:Vg.getArg(b,"originalLine",null),column:Vg.getArg(b,"originalColumn",null),name:g}}return{source:null,line:null,column:null,name:null}};kl.prototype.hasContentsOfAllSources=function(){return(this||Of).sourcesContent?(this||Of).sourcesContent.length>=(this||
Of)._sources.size()&&!(this||Of).sourcesContent.some(function(b){return null==b}):!1};kl.prototype.sourceContentFor=function(b,c){if(!(this||Of).sourcesContent)return null;var g=this._findSourceIndex(b);if(0<=g)return(this||Of).sourcesContent[g];null!=(this||Of).sourceRoot&&(b=Vg.relative((this||Of).sourceRoot,b));var a;if(null!=(this||Of).sourceRoot&&(a=Vg.urlParse((this||Of).sourceRoot))){g=b.replace(/^file:\/\//,"");if("file"==a.scheme&&(this||Of)._sources.has(g))return(this||Of).sourcesContent[(this||
Of)._sources.indexOf(g)];if((!a.path||"/"==a.path)&&(this||Of)._sources.has("/"+b))return(this||Of).sourcesContent[(this||Of)._sources.indexOf("/"+b)]}if(c)return null;throw Error('"'+b+'" is not in the SourceMap.');};kl.prototype.generatedPositionFor=function(b){var c=Vg.getArg(b,"source");c=this._findSourceIndex(c);if(0>c)return{line:null,column:null,lastColumn:null};c={source:c,originalLine:Vg.getArg(b,"line"),originalColumn:Vg.getArg(b,"column")};b=this._findMapping(c,(this||Of)._originalMappings,
"originalLine","originalColumn",Vg.compareByOriginalPositions,Vg.getArg(b,"bias",wj.GREATEST_LOWER_BOUND));return 0<=b&&(b=(this||Of)._originalMappings[b],b.source===c.source)?{line:Vg.getArg(b,"generatedLine",null),column:Vg.getArg(b,"generatedColumn",null),lastColumn:Vg.getArg(b,"lastGeneratedColumn",null)}:{line:null,column:null,lastColumn:null}};no.prototype=Object.create(wj.prototype);no.prototype.constructor=wj;no.prototype._version=3;Object.defineProperty(no.prototype,"sources",{get:function(){for(var b=
[],c=0;c<(this||Of)._sections.length;c++)for(var g=0;g<(this||Of)._sections[c].consumer.sources.length;g++)b.push((this||Of)._sections[c].consumer.sources[g]);return b}});no.prototype.originalPositionFor=function(b){var c={generatedLine:Vg.getArg(b,"line"),generatedColumn:Vg.getArg(b,"column")},g=DI.search(c,(this||Of)._sections,function(a,d){var f=a.generatedLine-d.generatedOffset.generatedLine;return f?f:a.generatedColumn-d.generatedOffset.generatedColumn});return(g=(this||Of)._sections[g])?g.consumer.originalPositionFor({line:c.generatedLine-
(g.generatedOffset.generatedLine-1),column:c.generatedColumn-(g.generatedOffset.generatedLine===c.generatedLine?g.generatedOffset.generatedColumn-1:0),bias:b.bias}):{source:null,line:null,column:null,name:null}};no.prototype.hasContentsOfAllSources=function(){return(this||Of)._sections.every(function(b){return b.consumer.hasContentsOfAllSources()})};no.prototype.sourceContentFor=function(b,c){for(var g=0;g<(this||Of)._sections.length;g++){var a=(this||Of)._sections[g].consumer.sourceContentFor(b,
!0);if(a)return a}if(c)return null;throw Error('"'+b+'" is not in the SourceMap.');};no.prototype.generatedPositionFor=function(b){for(var c=0;c<(this||Of)._sections.length;c++){var g=(this||Of)._sections[c];if(-1!==g.consumer._findSourceIndex(Vg.getArg(b,"source"))){var a=g.consumer.generatedPositionFor(b);if(a)return{line:a.line+(g.generatedOffset.generatedLine-1),column:a.column+(g.generatedOffset.generatedLine===a.line?g.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}};no.prototype._parseMappings=
function(b,c){(this||Of).__generatedMappings=[];(this||Of).__originalMappings=[];for(b=0;b<(this||Of)._sections.length;b++){c=(this||Of)._sections[b];for(var g=c.consumer._generatedMappings,a=0;a<g.length;a++){var d=g[a],f=c.consumer._sources.at(d.source);f=Vg.computeSourceURL(c.consumer.sourceRoot,f,(this||Of)._sourceMapURL);(this||Of)._sources.add(f);f=(this||Of)._sources.indexOf(f);var k=null;d.name&&(k=c.consumer._names.at(d.name),(this||Of)._names.add(k),k=(this||Of)._names.indexOf(k));d={source:f,
generatedLine:d.generatedLine+(c.generatedOffset.generatedLine-1),generatedColumn:d.generatedColumn+(c.generatedOffset.generatedLine===d.generatedLine?c.generatedOffset.generatedColumn-1:0),originalLine:d.originalLine,originalColumn:d.originalColumn,name:k};(this||Of).__generatedMappings.push(d);"number"===typeof d.originalLine&&(this||Of).__originalMappings.push(d)}}iy((this||Of).__generatedMappings,Vg.compareByGeneratedPositionsDeflated);iy((this||Of).__originalMappings,Vg.compareByOriginalPositions)};
var EI={},EV=Cj.Buffer;(function(b){var c=function(g){return"function"===typeof g?g:"function"===typeof EV?function(a){return(new EV(a,"base64")).toString("binary")}:"object"===typeof b.base64js?function(a){a=b.base64js.b64ToByteArray(a);return Array.prototype.map.call(a,function(d){return String.fromCharCode(d)}).join("")}:function(){throw Error("You're probably in an old browser or an iOS webworker. It might help to include beatgammit's base64-js.");}}(b.atob);b.atob=c;EI&&(EI=c)})(window);var p7=
EI,q7=/^xn--/,r7=/[^\0-\x7E]/,f0=/[\x2E\u3002\uFF0E\uFF61]/g,e0={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Do=Math.floor,FI=String.fromCharCode,FV=function(b,c){return b+22+75*(26>b)-((0!=c)<<5)},GV=function(b,c,g){var a=0;b=g?Do(b/700):b>>1;for(b+=Do(b/c);455<b;a+=36)b=Do(b/35);return Do(a+36*b/(b+38))},HV=function(b){var c=[],g=b.length,a=0,d=128,f=72,k=b.lastIndexOf("-");0>k&&(k=0);for(var n=
0;n<k;++n)128<=b.charCodeAt(n)&&hs("not-basic"),c.push(b.charCodeAt(n));for(k=0<k?k+1:0;k<g;){n=a;for(var p=1,q=36;;q+=36){k>=g&&hs("invalid-input");var r=10>(w=b.charCodeAt(k++))-48?w-22:26>w-65?w-65:26>w-97?w-97:36;(36<=r||r>Do((2147483647-a)/p))&&hs("overflow");a+=r*p;var t=q<=f?1:q>=f+26?26:q-f;if(r<t)break;r=36-t;p>Do(2147483647/r)&&hs("overflow");p*=r}p=c.length+1;f=GV(a-n,p,0==n);Do(a/p)>2147483647-d&&hs("overflow");d+=Do(a/p);a%=p;c.splice(a++,0,d)}var w;return String.fromCodePoint.apply(String,
c)},IV=function(b){var c=[],g=(b=eQ(b)).length,a=128,d=0,f=72,k=ba(b),n;try{for(k.s();!(n=k.n()).done;){var p=n.value;128>p&&c.push(FI(p))}}catch(oa){k.e(oa)}finally{k.f()}for((n=k=c.length)&&c.push("-");n<g;){var q=2147483647;p=ba(b);var r;try{for(p.s();!(r=p.n()).done;){var t=r.value;t>=a&&t<q&&(q=t)}}catch(oa){p.e(oa)}finally{p.f()}p=n+1;q-a>Do((2147483647-d)/p)&&hs("overflow");d+=(q-a)*p;a=q;q=ba(b);var w;try{for(q.s();!(w=q.n()).done;){var x=w.value;if(x<a&&2147483647<++d&&hs("overflow"),x==
a){for(var B=d,D=36;;D+=36){var F=D<=f?1:D>=f+26?26:D-f;if(B<F)break;var L=B-F,G=36-F;c.push(FI(FV(F+L%G,0)));B=Do(L/G)}c.push(FI(FV(B,0)));f=GV(d,p,n==k);d=0;++n}}}catch(oa){q.e(oa)}finally{q.f()}++d;++a}return c.join("")},Ss=Lc("bX",{version:"2.1.0",ucs2:{decode:eQ,encode:function(b){return String.fromCodePoint.apply(String,hb(b))}},decode:HV,encode:IV,toASCII:function(b){return dQ(b,function(c){return r7.test(c)?"xn--"+IV(c):c})},toUnicode:function(b){return dQ(b,function(c){return q7.test(c)?
HV(c.slice(4).toLowerCase()):c})}});Ss.decode;Ss.encode;Ss.toASCII;Ss.toUnicode;Ss.ucs2;Ss.version;var jy=function(b){switch(Jc(b)){case "string":return b;case "boolean":return b?"true":"false";case "number":return isFinite(b)?b:"";default:return""}},En={};En.decode=En.parse=function(b,c,g,a){g=g||"=";var d={};if("string"!=typeof b||0===b.length)return d;var f=/\+/g;b=b.split(c||"&");c=1E3;a&&"number"==typeof a.maxKeys&&(c=a.maxKeys);a=b.length;0<c&&a>c&&(a=c);for(c=0;c<a;++c){var k,n;var p=b[c].replace(f,
"%20");var q=p.indexOf(g);0<=q?(k=p.substr(0,q),n=p.substr(q+1)):(k=p,n="");p=decodeURIComponent(k);q=decodeURIComponent(n);Object.prototype.hasOwnProperty.call(d,p)?Array.isArray(d[p])?d[p].push(q):d[p]=[d[p],q]:d[p]=q}return d};En.encode=En.stringify=function(b,c,g,a){return c=c||"&",g=g||"=",null===b&&(b=void 0),"object"==Jc(b)?Object.keys(b).map(function(d){var f=encodeURIComponent(jy(d))+g;return Array.isArray(b[d])?b[d].map(function(k){return f+encodeURIComponent(jy(k))}).join(c):f+encodeURIComponent(jy(b[d]))}).join(c):
a?encodeURIComponent(jy(a))+g+encodeURIComponent(jy(b)):""};En.decode;En.encode;En.parse;En.stringify;var JV={},KV=!1,lk=function(){function b(d){if("string"!==typeof d)throw new TypeError("Path must be a string. Received "+JSON.stringify(d));}function c(d,f){for(var k="",n=0,p=-1,q=0,r,t=0;t<=d.length;++t){if(t<d.length)r=d.charCodeAt(t);else if(47===r)break;else r=47;if(47===r){if(p!==t-1&&1!==q)if(p!==t-1&&2===q){if(2>k.length||2!==n||46!==k.charCodeAt(k.length-1)||46!==k.charCodeAt(k.length-2))if(2<
k.length){if(p=k.lastIndexOf("/"),p!==k.length-1){-1===p?(k="",n=0):(k=k.slice(0,p),n=k.length-1-k.lastIndexOf("/"));p=t;q=0;continue}}else if(2===k.length||1===k.length){k="";n=0;p=t;q=0;continue}f&&(k=0<k.length?k+"/..":"..",n=2)}else k=0<k.length?k+("/"+d.slice(p+1,t)):d.slice(p+1,t),n=t-p-1;p=t;q=0}else 46===r&&-1!==q?++q:q=-1}return k}if(KV)return JV;KV=!0;var g=Hi,a={resolve:function(){for(var d="",f=!1,k,n=arguments.length-1;-1<=n&&!f;n--){if(0<=n)var p=arguments[n];else void 0===k&&(k=g.cwd()),
p=k;b(p);0!==p.length&&(d=p+"/"+d,f=47===p.charCodeAt(0))}d=c(d,!f);return f?0<d.length?"/"+d:"/":0<d.length?d:"."},normalize:function(d){b(d);if(0===d.length)return".";var f=47===d.charCodeAt(0),k=47===d.charCodeAt(d.length-1);d=c(d,!f);0!==d.length||f||(d=".");0<d.length&&k&&(d+="/");return f?"/"+d:d},isAbsolute:function(d){b(d);return 0<d.length&&47===d.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var d,f=0;f<arguments.length;++f){var k=arguments[f];b(k);0<k.length&&(d=
void 0===d?k:d+("/"+k))}return void 0===d?".":a.normalize(d)},relative:function(d,f){b(d);b(f);if(d===f)return"";d=a.resolve(d);f=a.resolve(f);if(d===f)return"";for(var k=1;k<d.length&&47===d.charCodeAt(k);++k);for(var n=d.length,p=n-k,q=1;q<f.length&&47===f.charCodeAt(q);++q);for(var r=f.length-q,t=p<r?p:r,w=-1,x=0;x<=t;++x){if(x===t){if(r>t){if(47===f.charCodeAt(q+x))return f.slice(q+x+1);if(0===x)return f.slice(q+x)}else p>t&&(47===d.charCodeAt(k+x)?w=x:0===x&&(w=0));break}var B=d.charCodeAt(k+
x),D=f.charCodeAt(q+x);if(B!==D)break;else 47===B&&(w=x)}p="";for(x=k+w+1;x<=n;++x)if(x===n||47===d.charCodeAt(x))p=0===p.length?p+"..":p+"/..";if(0<p.length)return p+f.slice(q+w);q+=w;47===f.charCodeAt(q)&&++q;return f.slice(q)},_makeLong:function(d){return d},dirname:function(d){b(d);if(0===d.length)return".";for(var f=d.charCodeAt(0),k=47===f,n=-1,p=!0,q=d.length-1;1<=q;--q)if(f=d.charCodeAt(q),47===f){if(!p){n=q;break}}else p=!1;return-1===n?k?"/":".":k&&1===n?"//":d.slice(0,n)},basename:function(d,
f){if(void 0!==f&&"string"!==typeof f)throw new TypeError('"ext" argument must be a string');b(d);var k=0,n=-1,p=!0,q;if(void 0!==f&&0<f.length&&f.length<=d.length){if(f.length===d.length&&f===d)return"";var r=f.length-1,t=-1;for(q=d.length-1;0<=q;--q){var w=d.charCodeAt(q);if(47===w){if(!p){k=q+1;break}}else-1===t&&(p=!1,t=q+1),0<=r&&(w===f.charCodeAt(r)?-1===--r&&(n=q):(r=-1,n=t))}k===n?n=t:-1===n&&(n=d.length);return d.slice(k,n)}for(q=d.length-1;0<=q;--q)if(47===d.charCodeAt(q)){if(!p){k=q+1;
break}}else-1===n&&(p=!1,n=q+1);return-1===n?"":d.slice(k,n)},extname:function(d){b(d);for(var f=-1,k=0,n=-1,p=!0,q=0,r=d.length-1;0<=r;--r){var t=d.charCodeAt(r);if(47===t){if(!p){k=r+1;break}}else-1===n&&(p=!1,n=r+1),46===t?-1===f?f=r:1!==q&&(q=1):-1!==f&&(q=-1)}return-1===f||-1===n||0===q||1===q&&f===n-1&&f===k+1?"":d.slice(f,n)},format:function(d){if(null===d||"object"!==Jc(d))throw new TypeError('The "pathObject" argument must be of type Object. Received type '+Jc(d));var f=d.dir||d.root,k=d.base||
(d.name||"")+(d.ext||"");d=f?f===d.root?f+k:f+"/"+k:k;return d},parse:function(d){b(d);var f={root:"",dir:"",base:"",ext:"",name:""};if(0===d.length)return f;var k=d.charCodeAt(0),n=47===k;if(n){f.root="/";var p=1}else p=0;for(var q=-1,r=0,t=-1,w=!0,x=d.length-1,B=0;x>=p;--x)if(k=d.charCodeAt(x),47===k){if(!w){r=x+1;break}}else-1===t&&(w=!1,t=x+1),46===k?-1===q?q=x:1!==B&&(B=1):-1!==q&&(B=-1);-1===q||-1===t||0===B||1===B&&q===t-1&&q===r+1?-1!==t&&(f.base=0===r&&n?f.name=d.slice(1,t):f.name=d.slice(r,
t)):(0===r&&n?(f.name=d.slice(1,q),f.base=d.slice(1,t)):(f.name=d.slice(r,q),f.base=d.slice(r,t)),f.ext=d.slice(q,t));0<r?f.dir=d.slice(0,r-1):n&&(f.dir="/");return f},sep:"/",delimiter:":",win32:null,posix:null};return JV=a.posix=a}(),ej={},oo={isString:function(b){return"string"==typeof b},isObject:function(b){return"object"==typeof b&&null!==b},isNull:function(b){return null===b},isNullOrUndefined:function(b){return null==b}};ej.parse=Xw;ej.resolve=function(b,c){return Xw(b,!1,!0).resolve(c)};
ej.resolveObject=function(b,c){return b?Xw(b,!1,!0).resolveObject(c):c};ej.format=function(b){oo.isString(b)&&(b=Xw(b));return b instanceof Im?b.format():Im.prototype.format.call(b)};ej.Url=Im;var s7=/^([a-z0-9.+-]+:)/i,t7=/:[0-9]*$/,u7=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,v7="{}|\\^`".split("").concat('<>"` \r\n\t'.split("")),GI=["'"].concat(v7),LV=["%","/","?",";","#"].concat(GI),MV=["/","?","#"],NV=/^[+a-z0-9A-Z_-]{0,63}$/,w7=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x7={javascript:!0,"javascript:":!0},HI=
{javascript:!0,"javascript:":!0},gv={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};Im.prototype.parse=function(b,c,g){if(!oo.isString(b))throw new TypeError("Parameter 'url' must be a string, not "+typeof b);var a=b.indexOf("?");a=-1!==a&&a<b.indexOf("#")?"?":"#";b=b.split(a);b[0]=b[0].replace(/\\/g,"/");a=b=b.join(a);if(a=a.trim(),!g&&1===b.split("#").length)if(b=u7.exec(a))return this.path=a,this.href=a,this.pathname=b[1],b[2]?(this.search=b[2],
this.query=c?En.parse(this.search.substr(1)):this.search.substr(1)):c&&(this.search="",this.query={}),this;if(b=s7.exec(a)){var d=(b=b[0]).toLowerCase();this.protocol=d;a=a.substr(b.length)}if(g||b||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var f="//"===a.substr(0,2);!f||b&&HI[b]||(a=a.substr(2),this.slashes=!0)}if(!HI[b]&&(f||b&&!gv[b])){var k,n;f=-1;for(g=0;g<MV.length;g++)-1!==(p=a.indexOf(MV[g]))&&(-1===f||p<f)&&(f=p);-1!==(n=-1===f?a.lastIndexOf("@"):a.lastIndexOf("@",f))&&(k=a.slice(0,n),a=a.slice(n+
1),this.auth=decodeURIComponent(k));f=-1;for(g=0;g<LV.length;g++){var p;-1!==(p=a.indexOf(LV[g]))&&(-1===f||p<f)&&(f=p)}-1===f&&(f=a.length);this.host=a.slice(0,f);a=a.slice(f);this.parseHost();this.hostname=this.hostname||"";k="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!k)for(f=this.hostname.split(/\./),n=(g=0,f.length);g<n;g++)if((p=f[g])&&!p.match(NV)){b="";for(var q=0,r=p.length;q<r;q++)127<p.charCodeAt(q)?b+="x":b+=p[q];if(!b.match(NV)){n=f.slice(0,g);g=f.slice(g+
1);(p=p.match(w7))&&(n.push(p[1]),g.unshift(p[2]));g.length&&(a="/"+g.join(".")+a);this.hostname=n.join(".");break}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase();k||(this.hostname=Ss.toASCII(this.hostname));g=this.port?":"+this.port:"";this.host=(this.hostname||"")+g;this.href+=this.host;k&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!x7[d])for(g=0,n=GI.length;g<n;g++)k=GI[g],-1!==a.indexOf(k)&&(p=encodeURIComponent(k),
p===k&&(p=escape(k)),a=a.split(k).join(p));g=a.indexOf("#");-1!==g&&(this.hash=a.substr(g),a=a.slice(0,g));g=a.indexOf("?");if(-1!==g?(this.search=a.substr(g),this.query=a.substr(g+1),c&&(this.query=En.parse(this.query)),a=a.slice(0,g)):c&&(this.search="",this.query={}),a&&(this.pathname=a),gv[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search)g=this.pathname||"",this.path=g+(this.search||"");return this.href=this.format(),this};Im.prototype.format=function(){var b=
this.auth||"";b&&(b=(b=encodeURIComponent(b)).replace(/%3A/i,":"),b+="@");var c=this.protocol||"",g=this.pathname||"",a=this.hash||"",d=!1,f="";this.host?d=b+this.host:this.hostname&&(d=b+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(d+=":"+this.port));this.query&&oo.isObject(this.query)&&Object.keys(this.query).length&&(f=En.stringify(this.query));b=this.search||f&&"?"+f||"";return c&&":"!==c.substr(-1)&&(c+=":"),this.slashes||(!c||gv[c])&&!1!==d?(d="//"+(d||""),
g&&"/"!==g.charAt(0)&&(g="/"+g)):d||(d=""),a&&"#"!==a.charAt(0)&&(a="#"+a),b&&"?"!==b.charAt(0)&&(b="?"+b),c+d+(g=g.replace(/[?#]/g,function(k){return encodeURIComponent(k)}))+(b=b.replace("#","%23"))+a};Im.prototype.resolve=function(b){return this.resolveObject(Xw(b,!1,!0)).format()};Im.prototype.resolveObject=function(b){if(oo.isString(b)){var c=new Im;c.parse(b,!1,!0);b=c}c=new Im;for(var g=Object.keys(this),a=0;a<g.length;a++){var d=g[a];c[d]=this[d]}if(c.hash=b.hash,""===b.href)return c.href=
c.format(),c;if(b.slashes&&!b.protocol){var f=Object.keys(b);for(g=0;g<f.length;g++)a=f[g],"protocol"!==a&&(c[a]=b[a]);return gv[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c}if(b.protocol&&b.protocol!==c.protocol){if(!gv[b.protocol]){f=Object.keys(b);for(g=0;g<f.length;g++)a=f[g],c[a]=b[a];return c.href=c.format(),c}if(c.protocol=b.protocol,b.host||HI[b.protocol])c.pathname=b.pathname;else{for(var k=(b.pathname||"").split("/");k.length&&!(b.host=k.shift()););b.host||
(b.host="");b.hostname||(b.hostname="");""!==k[0]&&k.unshift("");2>k.length&&k.unshift("");c.pathname=k.join("/")}if(c.search=b.search,c.query=b.query,c.host=b.host||"",c.auth=b.auth,c.hostname=b.hostname||b.host,c.port=b.port,c.pathname||c.search)c.path=(c.pathname||"")+(c.search||"");return c.slashes=c.slashes||b.slashes,c.href=c.format(),c}g=c.pathname&&"/"===c.pathname.charAt(0);var n=b.host||b.pathname&&"/"===b.pathname.charAt(0),p=g=n||g||c.host&&b.pathname;a=c.pathname&&c.pathname.split("/")||
[];d=(k=b.pathname&&b.pathname.split("/")||[],c.protocol&&!gv[c.protocol]);if(d&&(c.hostname="",c.port=null,c.host&&(""===a[0]?a[0]=c.host:a.unshift(c.host)),c.host="",b.protocol&&(b.hostname=null,b.port=null,b.host&&(""===k[0]?k[0]=b.host:k.unshift(b.host)),b.host=null),g=g&&(""===k[0]||""===a[0])),n)c.host=b.host||""===b.host?b.host:c.host,c.hostname=b.hostname||""===b.hostname?b.hostname:c.hostname,c.search=b.search,c.query=b.query,a=k;else if(k.length)a||(a=[]),a.pop(),a=a.concat(k),c.search=
b.search,c.query=b.query;else if(!oo.isNullOrUndefined(b.search))return d&&(c.hostname=c.host=a.shift(),(f=!!(c.host&&0<c.host.indexOf("@"))&&c.host.split("@"))&&(c.auth=f.shift(),c.host=c.hostname=f.shift())),c.search=b.search,c.query=b.query,oo.isNull(c.pathname)&&oo.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c;if(!a.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;n=a.slice(-1)[0];k=(c.host||b.host||1<
a.length)&&("."===n||".."===n)||""===n;for(var q=0,r=a.length;0<=r;r--)"."===(n=a[r])?a.splice(r,1):".."===n?(a.splice(r,1),q++):q&&(a.splice(r,1),q--);if(!g&&!p)for(;q--;q)a.unshift("..");!g||""===a[0]||a[0]&&"/"===a[0].charAt(0)||a.unshift("");k&&"/"!==a.join("/").substr(-1)&&a.push("");p=""===a[0]||a[0]&&"/"===a[0].charAt(0);d&&(c.hostname=c.host=p?"":a.length?a.shift():"",(f=!!(c.host&&0<c.host.indexOf("@"))&&c.host.split("@"))&&(c.auth=f.shift(),c.host=c.hostname=f.shift()));return(g||c.host&&
a.length)&&!p&&a.unshift(""),a.length?c.pathname=a.join("/"):(c.pathname=null,c.path=null),oo.isNull(c.pathname)&&oo.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=b.auth||c.auth,c.slashes=c.slashes||b.slashes,c.href=c.format(),c};Im.prototype.parseHost=function(){var b=this.host,c=t7.exec(b);c&&(":"!==(c=c[0])&&(this.port=c.substr(1)),b=b.substr(0,b.length-c.length));b&&(this.hostname=b)};ej.Url;ej.format;ej.resolve;ej.resolveObject;var OV={},PV=!1,QV=function(){function b(d){if("string"!==
typeof d)throw new TypeError("Path must be a string. Received "+JSON.stringify(d));}function c(d,f){for(var k="",n=0,p=-1,q=0,r,t=0;t<=d.length;++t){if(t<d.length)r=d.charCodeAt(t);else if(47===r)break;else r=47;if(47===r){if(p!==t-1&&1!==q)if(p!==t-1&&2===q){if(2>k.length||2!==n||46!==k.charCodeAt(k.length-1)||46!==k.charCodeAt(k.length-2))if(2<k.length){if(p=k.lastIndexOf("/"),p!==k.length-1){-1===p?(k="",n=0):(k=k.slice(0,p),n=k.length-1-k.lastIndexOf("/"));p=t;q=0;continue}}else if(2===k.length||
1===k.length){k="";n=0;p=t;q=0;continue}f&&(k=0<k.length?k+"/..":"..",n=2)}else k=0<k.length?k+("/"+d.slice(p+1,t)):d.slice(p+1,t),n=t-p-1;p=t;q=0}else 46===r&&-1!==q?++q:q=-1}return k}if(PV)return OV;PV=!0;var g=tj,a={resolve:function(){for(var d="",f=!1,k,n=arguments.length-1;-1<=n&&!f;n--){if(0<=n)var p=arguments[n];else void 0===k&&(k=g.cwd()),p=k;b(p);0!==p.length&&(d=p+"/"+d,f=47===p.charCodeAt(0))}d=c(d,!f);return f?0<d.length?"/"+d:"/":0<d.length?d:"."},normalize:function(d){b(d);if(0===d.length)return".";
var f=47===d.charCodeAt(0),k=47===d.charCodeAt(d.length-1);d=c(d,!f);0!==d.length||f||(d=".");0<d.length&&k&&(d+="/");return f?"/"+d:d},isAbsolute:function(d){b(d);return 0<d.length&&47===d.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var d,f=0;f<arguments.length;++f){var k=arguments[f];b(k);0<k.length&&(d=void 0===d?k:d+("/"+k))}return void 0===d?".":a.normalize(d)},relative:function(d,f){b(d);b(f);if(d===f)return"";d=a.resolve(d);f=a.resolve(f);if(d===f)return"";for(var k=
1;k<d.length&&47===d.charCodeAt(k);++k);for(var n=d.length,p=n-k,q=1;q<f.length&&47===f.charCodeAt(q);++q);for(var r=f.length-q,t=p<r?p:r,w=-1,x=0;x<=t;++x){if(x===t){if(r>t){if(47===f.charCodeAt(q+x))return f.slice(q+x+1);if(0===x)return f.slice(q+x)}else p>t&&(47===d.charCodeAt(k+x)?w=x:0===x&&(w=0));break}var B=d.charCodeAt(k+x),D=f.charCodeAt(q+x);if(B!==D)break;else 47===B&&(w=x)}p="";for(x=k+w+1;x<=n;++x)if(x===n||47===d.charCodeAt(x))p=0===p.length?p+"..":p+"/..";if(0<p.length)return p+f.slice(q+
w);q+=w;47===f.charCodeAt(q)&&++q;return f.slice(q)},_makeLong:function(d){return d},dirname:function(d){b(d);if(0===d.length)return".";for(var f=d.charCodeAt(0),k=47===f,n=-1,p=!0,q=d.length-1;1<=q;--q)if(f=d.charCodeAt(q),47===f){if(!p){n=q;break}}else p=!1;return-1===n?k?"/":".":k&&1===n?"//":d.slice(0,n)},basename:function(d,f){if(void 0!==f&&"string"!==typeof f)throw new TypeError('"ext" argument must be a string');b(d);var k=0,n=-1,p=!0,q;if(void 0!==f&&0<f.length&&f.length<=d.length){if(f.length===
d.length&&f===d)return"";var r=f.length-1,t=-1;for(q=d.length-1;0<=q;--q){var w=d.charCodeAt(q);if(47===w){if(!p){k=q+1;break}}else-1===t&&(p=!1,t=q+1),0<=r&&(w===f.charCodeAt(r)?-1===--r&&(n=q):(r=-1,n=t))}k===n?n=t:-1===n&&(n=d.length);return d.slice(k,n)}for(q=d.length-1;0<=q;--q)if(47===d.charCodeAt(q)){if(!p){k=q+1;break}}else-1===n&&(p=!1,n=q+1);return-1===n?"":d.slice(k,n)},extname:function(d){b(d);for(var f=-1,k=0,n=-1,p=!0,q=0,r=d.length-1;0<=r;--r){var t=d.charCodeAt(r);if(47===t){if(!p){k=
r+1;break}}else-1===n&&(p=!1,n=r+1),46===t?-1===f?f=r:1!==q&&(q=1):-1!==f&&(q=-1)}return-1===f||-1===n||0===q||1===q&&f===n-1&&f===k+1?"":d.slice(f,n)},format:function(d){if(null===d||"object"!==typeof d)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof d);var f=d.dir||d.root,k=d.base||(d.name||"")+(d.ext||"");d=f?f===d.root?f+k:f+"/"+k:k;return d},parse:function(d){b(d);var f={root:"",dir:"",base:"",ext:"",name:""};if(0===d.length)return f;var k=d.charCodeAt(0),
n=47===k;if(n){f.root="/";var p=1}else p=0;for(var q=-1,r=0,t=-1,w=!0,x=d.length-1,B=0;x>=p;--x)if(k=d.charCodeAt(x),47===k){if(!w){r=x+1;break}}else-1===t&&(w=!1,t=x+1),46===k?-1===q?q=x:1!==B&&(B=1):-1!==q&&(B=-1);-1===q||-1===t||0===B||1===B&&q===t-1&&q===r+1?-1!==t&&(f.base=0===r&&n?f.name=d.slice(1,t):f.name=d.slice(r,t)):(0===r&&n?(f.name=d.slice(1,q),f.base=d.slice(1,t)):(f.name=d.slice(r,q),f.base=d.slice(r,t)),f.ext=d.slice(q,t));0<r?f.dir=d.slice(0,r-1):n&&(f.dir="/");return f},sep:"/",
delimiter:":",win32:null,posix:null};return OV=a.posix=a}();const y7="undefined"!==typeof Deno?"windows"===Deno.build.os?"win32":Deno.build.os:void 0;ej.URL="undefined"!==typeof URL?URL:null;ej.pathToFileURL=function(b){let c=QV.resolve(b);b=b.charCodeAt(b.length-1);(47===b||II&&92===b)&&c[c.length-1]!==QV.sep&&(c+="/");b=new URL("file://");c.includes("%")&&(c=c.replace(z7,"%25"));!II&&c.includes("\\")&&(c=c.replace(A7,"%5C"));c.includes("\n")&&(c=c.replace(B7,"%0A"));c.includes("\r")&&(c=c.replace(C7,
"%0D"));c.includes("\t")&&(c=c.replace(D7,"%09"));b.pathname=c;return b};ej.fileURLToPath=function(b){if("string"===typeof b)b=new URL(b);else if(!(b instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if("file:"!==b.protocol)throw new Deno.errors.InvalidData("invalid url scheme");if(II){var c=b.hostname;b=b.pathname;for(var g=0;g<b.length;g++)if("%"===b[g]){const a=b.codePointAt(g+2)||32;if("2"===b[g+1]&&102===a||"5"===b[g+1]&&99===a)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters");
}b=b.replace(E7,"\\");b=decodeURIComponent(b);if(""!==c)b=`\\\\${c}${b}`;else{c=b.codePointAt(1)|32;g=b[2];if(97>c||122<c||":"!==g)throw new Deno.errors.InvalidData("file url path must be absolute");b=b.slice(1)}}else{if(""!==b.hostname)throw new Deno.errors.InvalidData("invalid file url hostname");b=b.pathname;for(c=0;c<b.length;c++)if("%"===b[c]&&(g=b.codePointAt(c+2)||32,"2"===b[c+1]&&102===g))throw new Deno.errors.InvalidData("must not include encoded / characters");b=decodeURIComponent(b)}return b};
ej.Url;ej.format;ej.resolve;ej.resolveObject;ej.URL;const II="win32"===y7,E7=/\//g,z7=/%/g,A7=/\\/g,B7=/\n/g,C7=/\r/g,D7=/\t/g,F7="undefined"!==typeof Deno?"windows"===Deno.build.os?"win32":Deno.build.os:void 0;ej.URL="undefined"!==typeof URL?URL:null;ej.pathToFileURL=function(b){let c=lk.resolve(b);b=b.charCodeAt(b.length-1);(47===b||$F&&92===b)&&c[c.length-1]!==lk.sep&&(c+="/");b=new URL("file://");c.includes("%")&&(c=c.replace(G7,"%25"));!$F&&c.includes("\\")&&(c=c.replace(H7,"%5C"));c.includes("\n")&&
(c=c.replace(I7,"%0A"));c.includes("\r")&&(c=c.replace(J7,"%0D"));c.includes("\t")&&(c=c.replace(K7,"%09"));b.pathname=c;return b};ej.fileURLToPath=fQ;ej.Url;ej.format;ej.resolve;ej.resolveObject;ej.parse;ej.URL;const $F="win32"===F7,g0=/\//g,G7=/%/g,H7=/\\/g,I7=/\n/g,J7=/\r/g,K7=/\t/g;lk._makeLong;lk.basename;lk.delimiter;lk.dirname;lk.extname;lk.format;lk.isAbsolute;lk.join;lk.normalize;lk.parse;lk.posix;lk.relative;lk.resolve;lk.sep;lk.win32;var RV={},SV=/%[a-f0-9]{2}/gi,TV=/(%[a-f0-9]{2})+/gi;
RV=function(b){if("string"!==typeof b)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof b+"`");try{return b=b.replace(/\+/g," "),decodeURIComponent(b)}catch(k){for(var c={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},g=TV.exec(b);g;){try{c[g[0]]=decodeURIComponent(g[0])}catch(n){var a=g[0];try{var d=decodeURIComponent(a)}catch(p){d=a.match(SV);for(var f=1;f<d.length;f++)a=aG(d,f).join(""),d=a.match(SV);d=a}d!==g[0]&&(c[g[0]]=d)}g=TV.exec(b)}c["%C2"]="\ufffd";g=Object.keys(c);
for(a=0;a<g.length;a++)d=g[a],b=b.replace(new RegExp(d,"g"),c[d]);return b}};var Iq={},k0=fk,lQ=p7,h0=ej,i0=lk,j0=RV,UV=/[#@] sourceMappingURL=([^\s'"]*)/,l0=RegExp("(?:/\\*(?:\\s*\r?\n(?://)?)?(?:"+UV.source+")\\s*\\*/|//(?:"+UV.source+"))\\s*"),m0=/^data:([^,;]*)(;[^,;]*)*(?:,(.*))?$/,n0=/^(?:application|text)\/json$/,o0="utf-8",p0=/\/?$/,L7=Iq={resolveSourceMap:iQ,resolveSourceMapSync:kQ,resolveSources:mQ,resolveSourcesSync:oQ,resolve:function(b,c,g,a,d){function f(n){mQ(n.map,n.sourcesRelativeTo,
g,a,function(p,q){if(p)return d(p);n.sourcesResolved=q.sourcesResolved;n.sourcesContent=q.sourcesContent;d(null,n)})}"function"===typeof a&&(d=a,a={});if(null===b){var k={sourceMappingURL:null,url:c,sourcesRelativeTo:c,map:null};b=Yw(c);g(b,function(n,p){if(n)return n.sourceMapData=k,d(n);k.map=String(p);try{k.map=Au(k.map,k)}catch(q){return d(q)}f(k)})}else iQ(b,c,g,function(n,p){if(n)return d(n);if(!p)return d(null,null);f(p)})},resolveSync:function(b,c,g,a){if(null===b)b={sourceMappingURL:null,
url:c,sourcesRelativeTo:c,map:null},b.map=hQ(g,c,b),b.map=Au(b.map,b);else if(b=kQ(b,c,g),!b)return null;c=oQ(b.map,b.sourcesRelativeTo,g,a);b.sourcesResolved=c.sourcesResolved;b.sourcesContent=c.sourcesContent;return b},parseMapToJSON:Au};Iq.resolveSourceMap;Iq.resolveSourceMapSync;Iq.resolveSources;Iq.resolveSourcesSync;Iq.resolve;Iq.resolveSync;Iq.parseMapToJSON;var mA={},pQ=!1,cG={},qQ=!1,Bu={},rQ=!1,sn={},sQ=!1,xk={},uQ=!1,r0="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,po={},wQ=!1,Cu={},yQ=!1,nA={},AQ=!1,BQ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Du={},DQ=!1,Ml={},EQ=!1,oA={},FQ=!1,u0="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,jq={},GQ=!1,$w={},HQ=!1,Ai={},JQ=!1,x0="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,hv={},VV=!1,Pk={},WV=!1;const Ts=function(){function b(w){for(var x={F_OK:p,R_OK:q,W_OK:r,X_OK:t,constants:n.constants,Stats:g.default,
Dirent:a.default},B=0,D=f;B<D.length;B++){var F=D[B];"function"===typeof w[F]&&(x[F]=w[F].bind(w))}B=0;for(D=k;B<D.length;B++)F=D[B],"function"===typeof w[F]&&(x[F]=w[F].bind(w));x.StatWatcher=w.StatWatcher;x.FSWatcher=w.FSWatcher;x.WriteStream=w.WriteStream;x.ReadStream=w.ReadStream;x.promises=w.promises;x._toUnixTimestamp=d.toUnixTimestamp;return x}if(WV)return Pk;WV=!0;var c=Pk&&Pk.__assign||function(){c=Object.assign||function(w){for(var x,B=1,D=arguments.length;B<D;B++){x=arguments[B];for(var F in x)Object.prototype.hasOwnProperty.call(x,
F)&&(w[F]=x[F])}return w};return c.apply(this,arguments)};Object.defineProperty(Pk,"__esModule",{value:!0});Pk.fs=Pk.createFsFromVolume=Pk.vol=Pk.Volume=void 0;var g=dG(),a=xQ(),d=IQ();VV||(VV=!0,Object.defineProperty(hv,"__esModule",{value:!0}),hv.fsProps="constants F_OK R_OK W_OK X_OK Stats".split(" "),hv.fsSyncMethods="renameSync ftruncateSync truncateSync chownSync fchownSync lchownSync chmodSync fchmodSync lchmodSync statSync lstatSync fstatSync linkSync symlinkSync readlinkSync realpathSync unlinkSync rmdirSync mkdirSync mkdirpSync readdirSync closeSync openSync utimesSync futimesSync fsyncSync writeSync readSync readFileSync writeFileSync appendFileSync existsSync accessSync fdatasyncSync mkdtempSync copyFileSync createReadStream createWriteStream".split(" "),
hv.fsAsyncMethods="rename ftruncate truncate chown fchown lchown chmod fchmod lchmod stat lstat fstat link symlink readlink realpath unlink rmdir mkdir mkdirp readdir close open utimes futimes fsync write read readFile writeFile appendFile exists access fdatasync mkdtemp copyFile watchFile unwatchFile watch".split(" "));var f=hv.fsSyncMethods,k=hv.fsAsyncMethods,n=Zw(),p=n.constants.F_OK,q=n.constants.R_OK,r=n.constants.W_OK,t=n.constants.X_OK;Pk.Volume=d.Volume;Pk.vol=new d.Volume;Pk.createFsFromVolume=
b;Pk.fs=b(Pk.vol);Pk=c(c({},Pk),Pk.fs);Pk.semantic=!0;return Pk}();Ts.__esModule;Ts.fs;Ts.createFsFromVolume;Ts.vol;Ts.Volume;Ts.semantic;const Bl=IQ();Bl.__esModule;Bl.FSWatcher;Bl.StatWatcher;Bl.Volume;Bl.toUnixTimestamp;Bl.bufferToEncoding;Bl.dataToBuffer;Bl.dataToStr;Bl.pathToSteps;Bl.filenameToSteps;Bl.pathToFilename;Bl.flagsToNumber;Bl.FLAGS;Bl.ReadStream;Bl.WriteStream;const {vol:np,createFsFromVolume:M7}=Ts;np.fromNestedJSON({"/dev":{stdin:"",stdout:"",stderr:""},"/usr/bin":{},"/home":{},
"/tmp":{}});np.releasedFds=[2,1,0];np.openSync("/dev/stdin","w");np.openSync("/dev/stdout","r");np.openSync("/dev/stderr","r");KQ("/dev/stdout",1,console.log);KQ("/dev/stderr",2,console.error);const yj=M7(np);yj.opendir=()=>dm("opendir");yj.opendirSync=()=>dm("opendirSync");yj.promises.opendir=()=>dm("promises.opendir");yj.cp=()=>dm("cp");yj.cpSync=()=>dm("cpSync");yj.promises.cp=()=>dm("promises.cp");yj.readv=()=>dm("readv");yj.readvSync=()=>dm("readvSync");yj.rm=()=>dm("rm");yj.rmSync=()=>dm("rmSync");
yj.promises.rm=()=>dm("promises.rm");yj.Dir=()=>dm("Dir");yj.promises.watch=()=>dm("promises.watch");yj.FileReadStream=yj.ReadStream;yj.FileWriteStream=yj.WriteStream;yj.promises.readFile=function(b){return async function(c,...g){return c instanceof URL?b(await gG(c),...g):b(c,...g)}}(yj.promises.readFile);yj.readFile=function(b){return function(c,...g){const a=g[g.length-1];c instanceof URL&&"function"===typeof a?gG(c).then(d=>{b(d,...g)},a):b(c,...g)}}(yj.readFile);yj.readFileSync=function(b){return function(c,
...g){return c instanceof URL?b(gG(c,!0),...g):b(c,...g)}}(yj.readFileSync);const {existsSync:y0,writeFileSync:z0}=yj;var hG="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,XV={},LQ=zV,N7=Dj;XV=Kk;N7(Kk,LQ);Kk.prototype.compile=function(b){return b.stylesheet.rules.map((this||hG).visit,this||hG).join("")};Kk.prototype.comment=function(b){return this.emit("",b.position)};Kk.prototype.import=function(b){return this.emit("@import "+b.import+";",b.position)};Kk.prototype.media=
function(b){return this.emit("@media "+b.media,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};Kk.prototype.document=function(b){return this.emit("@"+(b.vendor||"")+"document "+b.document,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};Kk.prototype.charset=function(b){return this.emit("@charset "+b.charset+";",b.position)};Kk.prototype.namespace=function(b){return this.emit("@namespace "+b.namespace+";",b.position)};Kk.prototype.supports=function(b){return this.emit("@supports "+
b.supports,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};Kk.prototype.keyframes=function(b){return this.emit("@"+(b.vendor||"")+"keyframes "+b.name,b.position)+this.emit("{")+this.mapVisit(b.keyframes)+this.emit("}")};Kk.prototype.keyframe=function(b){var c=b.declarations;return this.emit(b.values.join(","),b.position)+this.emit("{")+this.mapVisit(c)+this.emit("}")};Kk.prototype.page=function(b){var c=b.selectors.length?b.selectors.join(", "):"";return this.emit("@page "+c,b.position)+
this.emit("{")+this.mapVisit(b.declarations)+this.emit("}")};Kk.prototype["font-face"]=function(b){return this.emit("@font-face",b.position)+this.emit("{")+this.mapVisit(b.declarations)+this.emit("}")};Kk.prototype.host=function(b){return this.emit("@host",b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};Kk.prototype["custom-media"]=function(b){return this.emit("@custom-media "+b.name+" "+b.media+";",b.position)};Kk.prototype.rule=function(b){var c=b.declarations;return c.length?
this.emit(b.selectors.join(","),b.position)+this.emit("{")+this.mapVisit(c)+this.emit("}"):""};Kk.prototype.declaration=function(b){return this.emit(b.property+":"+b.value,b.position)+this.emit(";")};var O7=XV,Cl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,tp={},YV=lk;tp=function(b){b._comment=b.comment;b.map=new Hm;b.position={line:1,column:1};b.files={};for(var c in tp)b[c]=tp[c]};const ZV=function(b){return"\\"===YV.sep?b.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,
"/"):b};tp.updatePosition=function(b){var c=b.match(/\n/g);c&&((this||Cl).position.line+=c.length);c=b.lastIndexOf("\n");(this||Cl).position.column=~c?b.length-c:(this||Cl).position.column+b.length};tp.emit=function(b,c){if(c){var g=ZV(c.source||"source.css");(this||Cl).map.addMapping({source:g,generated:{line:(this||Cl).position.line,column:Math.max((this||Cl).position.column-1,0)},original:{line:c.start.line,column:c.start.column-1}});this.addFile(g,c)}this.updatePosition(b);return b};tp.addFile=
function(b,c){"string"!==typeof c.content||Object.prototype.hasOwnProperty.call((this||Cl).files,b)||((this||Cl).files[b]=c.content)};tp.applySourceMaps=function(){Object.keys((this||Cl).files).forEach(function(b){var c=(this||Cl).files[b];(this||Cl).map.setSourceContent(b,c);if(!1!==(this||Cl).options.inputSourcemaps&&(c=L7.resolveSync(c,b,yj.readFileSync))){var g=new wj(c.map);(this||Cl).map.applySourceMap(g,b,ZV(YV.dirname(c.sourcesRelativeTo)))}},this||Cl)};tp.comment=function(b){return/^# sourceMappingURL=/.test(b.comment)?
this.emit("",b.position):this._comment(b)};var P7=tp,Q7={},R7=Q7=function(b,c){c=c||{};var g=c.compress?new O7(c):new o7(c);return c.sourcemap?(P7(g),b=g.compile(b),g.applySourceMaps(),c="generator"===c.sourcemap?g.map:g.map.toJSON(),{code:b,map:c}):b=g.compile(b)},ky={};ky.parse=m7;ky.stringify=R7;ky.parse;ky.stringify;var Qi=window.lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js");Qi.promise=ai;Qi.pt=Ij;Qi.Morph=An;Qi.vdom=vx;Qi.addOrChangeCSSDeclaration=Zo;Qi.css=ky;var DB=Qi.vdom;
Qi.diff=DB.diff;Qi.patch=DB.patch;Qi.h=DB.h;Qi.createElement=DB.create;(function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),g=c.hasOwnProperty("CustomVNode")&&"function"===typeof c.CustomVNode?c.CustomVNode:c.CustomVNode=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d){this.morph=a;
this.renderer=d;this.morphVtree=null;this.key="custom-".concat(a.id)}},{key:"type",get:function(){return"Widget"}},{key:"renderMorph",value:function(){var a=this.morph,d=this.morphVtree=this.renderer.renderMorph(a);"customNode-key-"+a.id;a._updateCSSDeclaration&&(a.ensureCSSDeclaration(),a._updateCSSDeclaration=!1);return d}},{key:"init",value:function(){var a=Qi.createElement(this.renderMorph(),this.renderer.domEnvironment);a.insertBefore(this.morph.domNode,a.childNodes[0]);this.morph.cssDeclaration&&
this.morph.ensureCSSDeclaration();return a}},{key:"update",value:function(a,d){a=a.morphVtree||this.renderMorph();var f=this.renderMorph();a=Qi.diff(a,f);Qi.patch(d,a);this.morph.afterRenderHook&&this.morph.afterRenderHook();return null}},{key:"destroy",value:function(a){(a=this.renderer.domEnvironment.document.getElementById("css-for-"+this.morph.id))&&a.remove();console.log("[HTMLMorph] node of ".concat(this.morph.name," gets removed from DOM"))}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"CustomVNode"}}],
c,{pathInPackage:function(){return"./html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:397,end:2430})})(void 0);var iv=Lc("J",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),g=c.hasOwnProperty("HTMLMorph")&&"function"===typeof c.HTMLMorph?c.HTMLMorph:c.HTMLMorph=function(a){if(!a||
!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:"isHTMLMorph",get:function(){return!0}},{key:"ensureCSSDeclaration",value:function(){var a=this;try{var d=Qi.css.parse(this.cssDeclaration);this.whenRendered().then(function(){d.stylesheet.rules.forEach(function(f){f.selectors&&(f.selectors=f.selectors.map(function(k){return"#".concat(a.id," ").concat(k)}))});Qi.addOrChangeCSSDeclaration("css-for-"+a.id,
Qi.css.stringify(d))})}catch(f){console.error("Error setting cssDeclaration of ".concat(this,": ").concat(f))}}},{key:"defaultHTML",get:function(){return'\n<div style="display: flex;\n            align-items: center;\n            justify-content: center;\n            height: 100%;\n            background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n  <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;HTML&#x2F;&gt;</p>\n</div>'}},
{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return new Qi.CustomVNode(this,a)}},{key:"menuItems",value:function(){var a=this,d=ie._get(Object.getPrototypeOf(g.prototype),"menuItems",this).call(this);d.unshift(["edit CSS...",function(){return a.world().execCommand("open workspace",{language:"css",content:a.cssDeclaration,target:a})}],["edit html...",function(){return a.world().execCommand("open workspace",{language:"html",
content:a.html,target:a})}],{isDivider:!0});return d}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"HTMLMorph"}},{key:"properties",get:function(){return{extent:{defaultValue:Qi.pt(420,330)},html:{after:["cssDeclaration"],isStyleProp:!0,initialize:function(){this.html=this.defaultHTML},get:function(){return this.domNode.innerHTML},set:function(a){this.domNode.innerHTML=a;var d=[this].concat(hb(this.ownerChain())).find(function(B){return B.master});if(d)d.master.onMorphChange(this,
{prop:"html",value:a});if(a.includes("<script")){a=this.domNode.querySelectorAll("script");a=ba(a);var f;try{for(a.s();!(f=a.n()).done;){var k=f.value,n=k.parentNode;k.remove();var p=document.createElement("script"),q=ba(k.attributes),r;try{for(q.s();!(r=q.n()).done;){var t=r.value;p.setAttribute(t.name,t.value)}}catch(B){q.e(B)}finally{q.f()}var w=ba(k.childNodes),x;try{for(w.s();!(x=w.n()).done;)p.appendChild(x.value)}catch(B){w.e(B)}finally{w.f()}n.appendChild(p)}}catch(B){a.e(B)}finally{a.f()}}}},
domNodeTagName:{readOnly:!0,get:function(){return"div"}},domNodeStyle:{readOnly:!0,get:function(){return"position: absolute; width: 100%; height: 100%;"}},domNode:{derived:!0,get:function(){this._domNode||(this._domNode=this.document.createElement(this.domNodeTagName),this._domNode.setAttribute("style",this.domNodeStyle));return this._domNode},set:function(a){this.domNode.parentNode&&this.domNode.parentNode.replaceChild(a,this.domNode);return this._domNode=a}},document:{readOnly:!0,get:function(){return this.env.domEnv.document}},
scrollExtent:{readOnly:!0,get:function(){return Qi.pt(this.domNode.scrollWidth,this.domNode.scrollHeight)}},cssDeclaration:{isStyleProp:!0,set:function(a){this.setProperty("cssDeclaration",a);a?(this.makeDirty(),this._updateCSSDeclaration=!0):(a=this.env.domEnv.document.getElementById("css-for-"+this.id))&&a.remove()}}}}}],c,{pathInPackage:function(){return"./html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2755,end:7463})}(Qi.Morph));Qi.HTMLMorph=iv;Qi.HTMLMorph=iv;var EB=Lc("bT",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),g=c.hasOwnProperty("IFrameMorph")&&"function"===typeof c.IFrameMorph?c.IFrameMorph:c.IFrameMorph=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:"isIFrameMorph",
get:function(){return!0}},{key:"reload",value:function(){return this.src?this.loadURL(this.src):this.srcDoc?this.displayHTML(this.srcDoc):null}},{key:"whenLoaded",value:function(){return this._whenLoaded||Promise.resolve()}},{key:"displayHTML",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n,p,q,r,t=arguments;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:n=1<t.length&&void 0!==t[1]?t[1]:{};p=n.keepScroll;if(q=void 0===p?!0:p)r=this.iframeScroll;
this.srcDoc=f;w.next=6;return this.whenLoaded();case 6:return q&&r&&(this.iframeScroll=r),w.abrupt("return",this);case 8:case "end":return w.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"loadURL",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n,p,q,r,t=arguments;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:n=1<t.length&&void 0!==t[1]?t[1]:{};p=n.keepScroll;if(q=void 0===p?!0:p)r=this.iframeScroll;this.src=f;
w.next=6;return this.whenLoaded();case 6:return q&&r&&(this.iframeScroll=r),w.abrupt("return",this);case 8:case "end":return w.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"defaultSrcDoc",get:function(){return'\n    <div style="display: flex;\n                align-items: center;\n                justify-content: center;\n                height: 100%;\n                background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n      <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;iFrame&#x2F;&gt;</p>\n    </div>'}},
{key:"defaultHTML",get:function(){return'<iframe width="100%" height="100%" frameBorder="false" srcdoc=""></iframe>'}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"IFrameMorph"}},{key:"example",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return k=(new Qi.IFrameMorph).openInWindow({title:"iframe"}).targetMorph,k.srcDoc="",k.src="http://localhost:9011/worlds/html%20export",n.next=
5,k.loadURL("https://google.com");case 5:return k.iframe.src,k.iframe.srcDoc,k.src="",k.srcDoc="fooo",n.next=11,k.reload();case 11:case "end":return n.stop()}},f)}));return function(){return a.apply(this,arguments)}}()},{key:"properties",get:function(){return{html:{initialize:function(){this.html=this.defaultHTML;this.srcDoc=this.defaultSrcDoc}},iframe:{derived:!0,readOnly:!0,after:["domNode"],get:function(){return this.domNode.querySelector("iframe")}},src:{derived:!0,after:["iframe"],get:function(){return this.iframe.src},
set:function(a){this.iframe.removeAttribute("srcDoc");this.iframe.src=a;a=Qi.promise.deferred();var d=a.resolve;this._whenLoaded=a.promise;this.iframe.onload=function(f){return d(f)}}},srcDoc:{derived:!0,after:["iframe"],get:function(){return this.iframe.srcdoc},set:function(a){this.iframe.removeAttribute("src");this.iframe.srcdoc=a;this._whenLoaded=this.whenRendered().then(function(){return Qi.promise.delay(20)})}},iframeScroll:{derived:!0,after:["iframe"],get:function(){try{var a=this.iframe.contentWindow;
return Qi.pt(a.scrollX,a.scrollY)}catch(d){return Qi.pt(0,0)}},set:function(a){try{this.iframe.contentWindow.scrollTo(a.x,a.y)}catch(d){}}}}}}],c,{pathInPackage:function(){return"./html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7471,end:10907})}(Qi.HTMLMorph));Qi.IFrameMorph=EB;Qi.IFrameMorph=EB;var S7=Object.freeze({__proto__:null,
HTMLMorph:iv,IFrameMorph:EB}),ck=window.lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js");ck.arr=mh;ck.obj=nh;ck.rect=Bm;ck.ShadowObject=Aq;ck.morph=il;var FB=Lc("b$",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js"),g=c.hasOwnProperty("StyleSheet")&&"function"===typeof c.StyleSheet?c.StyleSheet:c.StyleSheet=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(a,d){ck.obj.isObject(a)&&!d&&(d=a,a=null);this.rules=d;for(var f in d)d[f]=this.unwrapFoldedProps(d[f]);this.name=a}},{key:"copy",value:function(){var a={},d;for(d in this.rules)a[d]=Object.assign({},this.rules[d]);return new ck.StyleSheet(this.name,a)}},{key:"__only_serialize__",get:function(){return["rules","context"]}},{key:"context",set:function(a){this._context=a}},{key:"context",get:function(){return this._context}},
{key:"unwrapFoldedProps",value:function(a){["borderRadius","borderWidth","borderColor","borderStyle"].forEach(function(d){if(d in a){var f=a[d];f||(f=0);a[d]=4==ck.arr.intersect(ck.obj.keys(f),"top left bottom right topLeft topRight bottomLeft bottomRight".split(" ")).length?f:{top:f,bottom:f,right:f,left:f,valueOf:function(){return f}}}});return a}},{key:"removeRule",value:function(a){delete this.rules[a];this.context.requestStyling()}},{key:"setRule",value:function(a,d){this.rules[a]=this.unwrapFoldedProps(d);
this.context.requestStyling()}},{key:"toggleRule",value:function(a,d){this.rules[a]._deactivated=!d;this.context.requestStyling()}},{key:"applicableRules",value:function(){var a={},d;for(d in this.rules)a[d]={styleSheet:this,rule:d};return a}},{key:"toJSExpr",value:function(){return"new StyleSheet(".concat(ck.obj.inspect(this.rules,{customPrinter:function(a,d,f){return a&&a.isColor||a&&a.isGradient?a.toJSExpr():a&&a.isPoint?a.toString():a&&[a.top,a.left,a.right,a.bottom].every(function(k){return k&&
ck.obj.equals(k,a.top)})?f(a.top):a&&ck.obj.keys(a).includes("_rev")?f(ck.obj.dissoc(a,["_rev","_deactivated"])):d},escapeKeys:!0}),")")}},{key:"applyRule",value:function(a,d,f){var k=this.rules[a];if(k._deactivated)return{};k=ck.obj.dissoc(k,["_deactivated"]);return d.withMetaDo({styleSheetChange:!0},function(){if("layout"in k){var n=k.layout.copy();n.container=d;k.layout=n}"dropShadow"in k&&(k.dropShadow=new ck.ShadowObject(k.dropShadow),k.dropShadow.morph=d);"padding"in k&&(k.padding=k.padding.isRect?
k.padding:ck.rect(k.padding,k.padding));n=ck.obj.keys(k).filter(function(t){return!ck.obj.equals(d[t],k[t])});n=ck.obj.select(k,n);var p=d.propertiesAndPropertySettings().properties,q={},r;for(r in k)q[r]=p[r]&&p[r].defaultValue||d[r];f?d.animate(Object.assign({},n,{duration:f.duration,easing:f.easing})):Object.assign(d,n);return q})}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"StyleSheet"}}],c,{pathInPackage:function(){return"./style-sheets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:202,end:3947})}(void 0));ck.StyleSheet=FB;ck.StyleSheet=FB;var lh=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js");lh.obj=nh;lh.arr=mh;lh.num=Yk;lh.Rectangle=vl;lh.rect=Bm;lh.Color=Nl;lh.pt=Ij;lh.connect=Xp;lh.noUpdate=Kt;lh.signal=Vl;lh.disconnect=It;lh.Text=ev;lh.Range=Rs;lh.HTMLMorph=iv;lh.Icon=Cs;lh.morph=il;var GB=Lc("o",
function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),g=c.hasOwnProperty("InputLine")&&"function"===typeof c.InputLine?c.InputLine:c.InputLine=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};ie._get(Object.getPrototypeOf(g.prototype),
Symbol["for"]("lively-instance-initialize"),this).call(this,a);lh.connect(this,"textChange",this,"onInputChanged");lh.connect(this,"selectionChange",this,"fixCursor")}},{key:"menuItems",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.t0=[{command:"change placeholder",target:this},{isDivider:!0}],k.t1=hb,k.next=4,ie._get(Object.getPrototypeOf(g.prototype),"menuItems",this).call(this);case 4:return k.t2=
k.sent,k.t3=(0,k.t1)(k.t2),k.abrupt("return",k.t0.concat.call(k.t0,k.t3));case 7:case "end":return k.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"onChange",value:function(a){"extent fontSize padding fontFamily position selection".split(" ").includes(a.prop)&&this.updatePlaceholder();return ie._get(Object.getPrototypeOf(g.prototype),"onChange",this).call(this,a)}},{key:"isInputLine",get:function(){return!0}},{key:"allowDuplicatesInHistory",get:function(){return!1}},
{key:"resetHistory",value:function(){this.inputHistory={items:[],max:50,index:0}}},{key:"inputHistory",get:function(){return this._inputHistory?this._inputHistory:this._inputHistory=this.historyId?this.constructor.getHistory(this.historyId):{items:[],max:30,index:0}}},{key:"inputHistory",set:function(a){this._inputHistory=a;this.historyId&&this.constructor.setHistory(this.historyId,this._inputHistory)}},{key:"clear",value:function(){this.input=""}},{key:"focus",value:function(){this.fixCursor();ie._get(Object.getPrototypeOf(g.prototype),
"focus",this).call(this)}},{key:"onBlur",value:function(a){ie._get(Object.getPrototypeOf(g.prototype),"onBlur",this).call(this,a);this.updatePlaceholder()}},{key:"fitToLineHeight",value:function(){this.height=this.defaultLineHeight+this.padding.top()+this.padding.bottom()}},{key:"indicateError",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.borderColor=lh.Color.red,this._errorIcon=this.addMorph(this._errorIcon||
lh.morph({type:"label",value:[" "+f,{fontSize:this.fontSize}," ",{}].concat(hb(lh.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:this.fontSize,fontColor:lh.Color.red,opacity:0,reactsToPointer:!1,fill:lh.Color.white.withA(.9)})),n.next=4,this.whenRendered();case 4:this._errorIcon.opacity=1,this._errorIcon.rightCenter=this.innerBounds().insetBy(10).rightCenter();case 6:case "end":return n.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"clearError",
value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=lh.Color.transparent)}},{key:"updatePlaceholder",value:function(){var a=this.getSubmorphNamed("placeholder");if(a)if(this.input.length)a.visible=!1;else{var d=this.innerBounds();a.fontSize=this.fontSize;a.visible=!0;a.height=this.height;a.padding=this.padding;a.defaultTextStyle=this.defaultTextStyle;a.lineHeight=this.height+"px";a.fit();a.topLeft=this.label.length?d.topLeft().addXY(0,
this.borderWidth):d.topLeft().withX(0)}}},{key:"fixCursor",value:function(){this.label&&(this.positionToIndex(this.selection.lead)<this.label.length&&(this.selection.lead=this.indexToPosition(this.label.length)),this.positionToIndex(this.selection.anchor)<this.label.length&&(this.selection.anchor=this.indexToPosition(this.label.length)))}},{key:"acceptInput",value:function(){var a=this.input;this.onInput(a);return a}},{key:"onInput",value:function(a){0<this.input.length&&this.addInputToHistory(this.input);
this.clearOnInput&&this.clear();lh.signal(this,"inputAccepted",a)}},{key:"onInputChanged",value:function(a){lh.signal(this,"inputChanged",a);this.clearError();this.updatePlaceholder()}},{key:"onMouseDown",value:function(a){ie._get(Object.getPrototypeOf(g.prototype),"onMouseDown",this).call(this,a);this._errorIcon&&this._errorIcon.remove()}},{key:"deleteText",value:function(a){a=a.isRange?a:new lh.Range(a);if(!a.isEmpty())return a=a.subtract({start:{row:0,column:0},end:{row:0,column:this.label.length}})[0],
ie._get(Object.getPrototypeOf(g.prototype),"deleteText",this).call(this,a)}},{key:"addInputToHistory",value:function(a){var d=this.inputHistory,f=d.items;if(lh.arr.last(f)!==a){f.push(a);f.length>d.max&&(d.items=f=f.slice(-d.max));d.index=f.length-1;if(!this.allowDuplicatesInHistory)for(f=d.items.length-1;f--;)d.items[f]===a&&(d.items.splice(f,1),d.index--);this.historyId&&this.constructor.addHistoryToLocalStorage(this.historyId,d)}}},{key:"browseHistory",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k,
n,p,q;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return k=this.inputHistory.items.map(function(t,w){return{isListItem:!0,string:t,value:w}}).reverse(),r.next=3,this.world().filterableListPrompt("Choose item:",k,{commands:[this.histEditCommandForHistBrowse()]});case 3:n=r.sent,p=Nb(n.selected,1),q=p[0],"number"===typeof q&&this.setAndShowHistItem(q),this.focus();case 8:case "end":return r.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},
{key:"histEditCommandForHistBrowse",value:function(){var a=this;return{name:"edit history "+this.historyId,exec:function(){var d=Bb(regeneratorRuntime.mark(function n(k){var p,q,r,t;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return p=a.inputHistory.items.slice().reverse(),w.next=3,k.world().editListPrompt("edit history "+a.historyId,p);case 3:q=w.sent;r=q.status;t=q.list;if("canceled"!==r){w.next=8;break}return w.abrupt("return",!0);case 8:return p=p.filter(function(x){return x.isListItem?
t.includes(x.value):t.includes(x)}),a.inputHistory=Object.assign({},a.inputHistory,{items:p}),k.get("list").items=p.map(function(x,B){return{isListItem:!0,string:x,value:B}}).reverse(),w.abrupt("return",!0);case 12:case "end":return w.stop()}},n)}));return function(k){return d.apply(this,arguments)}}()}}},{key:"setAndShowHistItem",value:function(a){var d=this.inputHistory,f=d.items,k=f.length-1;lh.num.between(a,0,k+1)?d.index=a:d.index=a=k;this.input!==f[a]&&"undefined"!==typeof f[a]&&(this.input=
f[a])}},{key:"showHistItem",value:function(a){a=a||"next";var d=this.inputHistory,f=d.items,k=f.length-1,n=d.index;lh.num.between(n,0,k+1)||(d.index=n=k);if(this.input!==f[n]&&"undefined"!==typeof f[n])this.input=f[n];else{if("next"===a){if(n>k)return;n=++d.index}else{if(0>=n)return;n=--d.index}this.input=f[n]||""}}},{key:"commands",get:function(){var a=this;return[{name:"change placeholder",exec:function(){var d=Bb(regeneratorRuntime.mark(function k(){var n;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=
p.next){case 0:return p.next=2,a.world().prompt("Enter Placeholder:",{input:a.placeholder});case 2:if(n=p.sent)a.placeholder=n;case 4:case "end":return p.stop()}},k)}));return function(){return d.apply(this,arguments)}}()},{name:"accept input",exec:function(){a.acceptInput();return!0}},{name:"show previous input from history",exec:function(){a.showHistItem("prev");return!0}},{name:"show next input from history",exec:function(){a.showHistItem("next");return!0}},{name:"browse history",exec:function(){a.browseHistory();
return!0}},{name:"remove items from history",exec:function(){var d=Bb(regeneratorRuntime.mark(function n(k){var p,q,r,t;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return p=k.inputHistory,q=p.items.map(function(x,B){return{isListItem:!0,string:x,value:B}}).reverse(),w.next=4,k.world().filterableListPrompt("Choose items to delete:",q,{multiSelect:!0});case 4:return r=w.sent,t=r.selected,t.reverse().forEach(function(x){x<p.index&&p.index--;p.items.splice(x,1)}),k.inputHistory=
p,w.abrupt("return",!0);case 9:case "end":return w.stop()}},n)}));return function(k){return d.apply(this,arguments)}}()}].concat(ie._get(Object.getPrototypeOf(g.prototype),"commands",this))}},{key:"keybindings",get:function(){return ie._get(Object.getPrototypeOf(g.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"},{keys:"Up|Ctrl-Up|Alt-P",command:"show previous input from history"},{keys:"Down|Ctrl-Down|Alt-N",command:"show next input from history"},
{keys:"Alt-H",command:"browse history"},{keys:"Alt-Shift-H",command:"remove items from history"}])}},{key:"htmlExport_transformNode",value:function(a){var d=a.getRootNode().createElement("input"),f=a.querySelector(".newtext-text-layer.actual");d.id=a.id;d.className=a.className;d.style=a.style.cssText;Object.assign(d.style,lh.obj.select(f.style,"padding font-family font-weight font-style text-decoration font-size color".split(" ")));d.placeholder=this.placeholder;d.type="text";d.autocomplete=d.name=
this.name.replace(/[\s"]/g,"-");return d}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"InputLine"}},{key:"getHistoryFromLocalSorage",value:function(a){if("undefined"===typeof localStorage)return null;try{var d=localStorage.getItem("lively.morphic-inputline-"+a);return d?JSON.parse(d):null}catch(f){return null}}},{key:"addHistoryToLocalStorage",value:function(a,d){if("undefined"!==typeof localStorage)try{localStorage.setItem("lively.morphic-inputline-"+a,JSON.stringify(d))}catch(f){console.error(f)}}},
{key:"histories",get:function(){this._histories||(this._histories=new Map);return this._histories}},{key:"getHistory",value:function(a){var d=this.histories.get(a);if(d)return d;d=this.getHistoryFromLocalSorage(a)||{items:[],max:50,index:0};this.histories.set(a,d);return d}},{key:"setHistory",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{items:[],max:50,index:0};this.histories.set(a,d);this.addHistoryToLocalStorage(a,d);return d}},{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},
fixedHeight:{defaultValue:!0},extent:{defaultValue:lh.pt(100,20)},padding:{defaultValue:lh.Rectangle.inset(2,4)},clipMode:{defaultValue:"hidden"},lineWrapping:{defaultValue:!1},historyId:{defaultValue:null},clearOnInput:{defaultValue:!1},label:{after:["textAndAttributes","extent","padding","submorphs"],defaultValue:"",set:function(a){var d=this;this.setProperty("label",a);this.textString.startsWith(a)||lh.noUpdate(function(){d.textString=a+d.input})}},input:{after:["label"],derived:!0,get:function(){return this.textString.slice(this.label.length)},
set:function(a){this.textString=this.label+(a?String(a):"");this.updatePlaceholder()}},placeholder:{after:["submorphs","label","defaultTextStyle"],dervied:!0,get:function(){var a=this.getSubmorphNamed("placeholder");return a?a.value:null},set:function(a){var d=this.getSubmorphNamed("placeholder");a?d?(d.defaultTextStyle=Object.assign({},this.defaultTextStyle,{fontColor:lh.Color.gray}),d.value=a):this.addMorph(lh.Text.makeLabel(a,Object.assign({},this.defaultTextStyle,{name:"placeholder",reactsToPointer:!1,
fontColor:lh.Color.gray}))):d&&d.remove();this.updatePlaceholder()}}}}}],c,{pathInPackage:function(){return"./text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:466,end:15419})}(lh.Text)),ly=Lc("N",function(b){var c=window.lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),g=c.hasOwnProperty("PasswordInputLine")&&
"function"===typeof c.PasswordInputLine?c.PasswordInputLine:c.PasswordInputLine=function(a){if(!a||!a[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ie(g,b,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};ie._get(Object.getPrototypeOf(g.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,a);this.onLoad()}},{key:"onChange",
value:function(a){ie._get(Object.getPrototypeOf(g.prototype),"onChange",this).call(this,a);["fill","borderRadius"].includes(a.prop)&&this.updateHtml(this.input)}},{key:"onLoad",value:function(){var a=Bb(regeneratorRuntime.mark(function f(){var k=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.whenRendered();case 2:this.ensureInputNode().then(function(p){k.updateHtml(k.input);p.onkeydown=function(q){return k.env.eventDispatcher.dispatchDOMEvent(q,
k,"onKeyDown")};p.onkeyup=function(q){return k.env.eventDispatcher.dispatchDOMEvent(q,k,"onKeyUp")}});case 3:case "end":return n.stop()}},f,this)}));return function(){return a.apply(this,arguments)}}()},{key:"onMouseDown",value:function(a){ie._get(Object.getPrototypeOf(g.prototype),"onMouseDown",this).call(this,a);this._errorIcon&&this._errorIcon.remove()}},{key:"onAfterRender",value:function(a){this.ensureInputNode()}},{key:"ensureInputNode",value:function(){var a=this;return this.whenRendered().then(function(){var d=
a.domNode;d.parentNode&&"INPUT"==d.parentNode.tagName&&(d.parentNode.remove(),d=a.env.renderer.getNodeForMorph(a),d.insertBefore(a.domNode,d.firstChild));return a.domNode})}},{key:"onKeyDown",value:function(a){ie._get(Object.getPrototypeOf(g.prototype),"onKeyDown",this).call(this,a);if(this.input!=this.lastInput)this.onInputChanged(this.input);this.lastInput=this.input}},{key:"focus",value:function(){ie._get(Object.getPrototypeOf(g.prototype),"focus",this).call(this);this.domNode&&this.domNode.focus()}},
{key:"onFocus",value:function(a){var d=this;ie._get(Object.getPrototypeOf(g.prototype),"onFocus",this).call(this,a);this._originalShadow||(this._originalShadow=this.dropShadow,this.withAnimationDo(function(){d.withMetaDo({skipReconciliation:!0},function(){d.highlightWhenFocused&&(d.dropShadow=d.haloShadow)})},{duration:200}))}},{key:"onBlur",value:function(a){var d=this;ie._get(Object.getPrototypeOf(g.prototype),"onBlur",this).call(this,a);this.withAnimationDo(function(){d.withMetaDo({skipReconciliation:!0},
function(){d.highlightWhenFocused&&(d.dropShadow=d._originalShadow||null)})},{duration:200});this._originalShadow=null}},{key:"indicateError",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.borderWidth=3,this.borderColor=lh.Color.red,this._errorIcon=this.addMorph(this._errorIcon||lh.morph({type:"label",value:[" "+f,{fontSize:18}," ",{}].concat(hb(lh.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),
fontSize:20,fontColor:lh.Color.red,opacity:0,reactsToPointer:!1,fill:lh.Color.white.withA(.9)})),n.next=5,this.whenRendered();case 5:this._errorIcon.opacity=1,this._errorIcon.rightCenter=this.innerBounds().insetBy(10).rightCenter();case 7:case "end":return n.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"clearError",value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=lh.Color.transparent)}},{key:"acceptInput",
value:function(){var a=this.input;lh.signal(this,"inputAccepted",a);return a}},{key:"onInputChanged",value:function(a){this.clearError();lh.signal(this,"inputChanged",a)}},{key:"updateHtml",value:function(){var a=Bb(regeneratorRuntime.mark(function k(f){var n,p,q,r,t,w,x,B,D,F,L,G;return regeneratorRuntime.wrap(function(oa){for(;;)switch(oa.prev=oa.next){case 0:return n=this.fontSize,p=this.fontFamily,q=this.padding,r=this.placeholder,t=this.fill,w=void 0===t?Nl.white:t,x=this.borderRadius,B=q.top(),
D=q.right(),F=q.bottom(),L=q.left(),oa.next=7,this.ensureInputNode();case 7:G=oa.sent,G.setAttribute("type","password"),G.setAttribute("placeholder",r),G.setAttribute("value",f),Object.assign(G.style,{position:"absolute",width:"calc(100% - ".concat(L,"px - ").concat(D,"px)"),"border-width":0,outline:"none","border-radius":"".concat(x.valueOf(),"px"),background:w.toString(),padding:"".concat(B,"px ").concat(D,"px ").concat(F,"px ").concat(L,"px"),"font-size":"".concat(n,"px"),"font-family":"".concat(p)});
case 12:case "end":return oa.stop()}},k,this)}));return function(f){return a.apply(this,arguments)}}()},{key:"commands",get:function(){var a=this;return[{name:"accept input",exec:function(){a.acceptInput();return!0}}].concat(ie._get(Object.getPrototypeOf(g.prototype),"commands",this))}},{key:"keybindings",get:function(){return ie._get(Object.getPrototypeOf(g.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"}])}},{key:"htmlExport_transformNode",
value:function(a){var d=a.getRootNode(),f=d.createElement("div"),k=a.querySelector("input");d=d.createElement("input");k.childNodes[0]&&"INPUT"===k.childNodes[0].tagName&&(k=k.childNodes[0]);d.id=a.id;d.className=a.className;f.style=a.style.cssText;Object.assign(d.style,lh.obj.select(k.style,"padding font-family font-weight font-style text-decoration font-size border-radius color".split(" ")));d.style.position="absolute";d.style.width=a.style.width;d.style.height=a.style.height;d.style["border-width"]=
a.style["border-width"];d.placeholder=this.placeholder;d.type="password";d.autocomplete=d.name=this.name.replace(/[\s"]/g,"-");f.appendChild(d);f.appendChild(a.childNodes[1]);return f}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PasswordInputLine"}},{key:"properties",get:function(){return{extent:{defaultValue:lh.pt(100,20)},html:{derived:!0,initialize:function(){},get:function(){return""},set:function(a){}},highlightWhenFocused:{defaultValue:!0},isPasswordInput:{get:function(){return!0}},
haloShadow:{type:"Shadow"},domNodeTagName:{readOnly:!0,get:function(){return"input"}},domNodeStyle:{readOnly:!0,get:function(){return"background: grey"}},input:{derived:!0,after:["domNode"],get:function(){return this.domNode&&this.domNode.value||""},set:function(a){this.domNode.value=a;this.updateHtml(this.input)}},placeholder:{after:["domNode"],set:function(a){this.setProperty("placeholder",a);this.updateHtml(this.input)}},fontSize:{defaultValue:12,after:["input"],set:function(a){this.setProperty("fontSize",
a);this.updateHtml(this.input)}},fontFamily:{defaultValue:"sans-serif",after:["input"],set:function(a){this.setProperty("fontFamily",a);this.updateHtml(this.input)}},padding:{defaultValue:lh.Rectangle.inset(2),after:["input"],set:function(a){this.setProperty("padding",a);this.updateHtml(this.input)}}}}}],c,{pathInPackage:function(){return"./text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:15493,end:22961})}(lh.HTMLMorph));lh.PasswordInputLine=ly;lh.PasswordInputLine=ly;lh["default"]=GB;var eh=window.lively.FreezerRuntime.recorderFor("lively.morphic/index.js");eh["default"]=al;eh.config=al;Object.assign(eh,w3);Object.assign(eh,h7);Object.assign(eh,j7);Object.assign(eh,k7);Object.assign(eh,i7);Object.assign(eh,S7);Object.assign(eh,t3);Object.assign(eh,e7);Object.assign(eh,f7);eh.StyleSheet=FB;eh.ShadowObject=
Aq;eh.addOrChangeCSSDeclaration=Zo;eh.addOrChangeLinkedCSS=Ot;Object.assign(eh,x3);eh.easings=wx;eh.stringToEasing=bw;eh.Icon=Cs;eh.loadMorphFromSnapshot=Lr;Object.assign(eh,d7);eh.World=Hu;eh.Hand=fy;eh.Morph=An;eh.Image=Cx;eh.Ellipse=Ax;eh.Triangle=Bx;eh.Path=Dx;eh.Polygon=Ex;eh.LineMorph=Fx;eh.Text=ev;eh.Label=hy;eh.HTMLMorph=iv;eh.InputLine=GB;eh.PasswordInputLine=ly;eh.InputLine=GB;eh.PasswordInputLine=ly;eh.morph=il;eh.addClassMappings=fz;eh.inspect=yx;eh.touchInputDevice=uo;eh.addClassMappings({"default":eh.Morph,
world:eh.World,hand:eh.Hand,image:eh.Image,ellipse:eh.Ellipse,triangle:eh.Triangle,path:eh.Path,text:eh.Text,input:eh.InputLine,label:eh.Label,polygon:eh.Polygon,line:eh.LineMorph,html:eh.HTMLMorph});eh.morph=il;eh.inspect=yx;eh.touchInputDevice=uo;var T7=Object.freeze({__proto__:null,config:al,StyleSheet:FB,ShadowObject:Aq,addOrChangeCSSDeclaration:Zo,addOrChangeLinkedCSS:Ot,easings:wx,stringToEasing:bw,Icon:Cs,loadMorphFromSnapshot:Lr,InputLine:GB,PasswordInputLine:ly,morph:il,inspect:yx,touchInputDevice:uo,
show:void 0,Morph:An,Ellipse:Ax,Triangle:Bx,Image:Cx,PathPoint:ZA,Path:Dx,Polygon:Ex,LineMorph:Fx,World:Hu,Hand:fy,Text:ev,Label:hy,Anchor:gy,HTMLMorph:iv,IFrameMorph:EB,MorphicEnv:qo,TilingLayout:sB,VerticalLayout:$x,HorizontalLayout:ay,ProportionalLayout:tB,CellGroup:uB,LayoutColumn:vB,LayoutRow:wB,LayoutCell:xB,GridLayout:yB,ComponentDescriptor:zB,ViewModel:by,part:fs,component:Ow,without:Pw,add:Qw,edit:gA,ensureFont:Rw,Tooltip:Gx,TooltipViewer:Hx,MorphicDB:Qs});Lc("cj",T7);Lc({bU:void 0,c5:void 0})}}});
