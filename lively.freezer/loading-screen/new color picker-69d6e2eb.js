System.register(["./__root_module__-590131e3.js","./index-2bc8c0f4.js","./color-picker-88b3ebcc.js","./index-10a530fb.js","./index-9f5d09ef.js"],function(){var Sa,Lb,Vb,Fc,jc,sd,kd,Cd,ed,Zc,bd,yd,ke,ue,He,ld,Wd,gc;return{setters:[function(cd){Sa=cd.M;Lb=cd.a;Vb=cd.C;Fc=cd.d;jc=cd.i;sd=cd.a9;kd=cd.a7;Cd=cd.$;ed=cd.r;Zc=cd.c;bd=cd.bF;yd=cd.ac;ke=cd.b;ue=cd.a8;He=cd.V;ld=cd.bk;Wd=cd.bl;gc=cd.bj},function(){},function(){},function(){},function(){}],execute:function(){var cd=lively.FreezerRuntime.recorderFor("ColorPicker/index.js");
cd.Morph=Sa;cd.arr=Lb;cd.Color=Vb;cd.signal=Fc;var Bd=function(Ad){var Jc=lively.FreezerRuntime.recorderFor("ColorPicker/index.js"),zd=Jc.hasOwnProperty("ColorPicker")&&"function"===typeof Jc.ColorPicker?Jc.ColorPicker:Jc.ColorPicker=function(Mb){Mb&&Mb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(zd,Ad,[{key:"toggleHalos",value:function(Mb){this.withAllSubmorphsDo(function(mb){return mb.halosEnabled=Mb});this.ui.gradientControl.gradientHalo.withAllSubmorphsDo(function(mb){return mb.halosEnabled=
Mb})}},{key:"focusOnMorph",value:function(Mb,mb){var Bc=Mb&&Mb.world();Bc&&(Bc.halos().forEach(function(xc){return xc.remove()}),Bc.withTopBarDo(function(xc){return xc.setEditMode("Hand",!0)}));this._target=Mb;mb.isGradient?(this.ui.gradientControl.setGradient(mb,this),this.ui.colorTypeSelector.selection=mb.type):(this.color=mb,this.ui.colorTypeSelector.selection="Solid");this.update()}},{key:"close",value:function(){this.remove();var Mb=this._target&&this._target.world();Mb&&Mb.withTopBarDo(function(mb){return mb.setEditMode("Halo",
!0)});this.ui.gradientControl.toggle(!1,this)}},{key:"confirm",value:function(){switch(this.colorMode){case "linearGradient":case "radialGradient":cd.signal(this,"value",this.gradientValue);break;case "Solid":cd.signal(this,"value",this.color)}}},{key:"switchMode",value:function(Mb){var mb=["linearGradient","radialGradient"].includes(Mb);this.ui.gradientControl.toggle(mb,this);this.colorMode=Mb;this.update();this.confirm()}},{key:"enterColor",value:function(Mb){this.color=Mb;this.update(this.ui.colorEncoder);
this.confirm()}},{key:"adjustColor",value:function(Mb){this.color=Mb;this.update();this.confirm()}},{key:"adjustOpacity",value:function(Mb){this.hsb=[].concat($jscomp.arrayFromIterable(this.hsb.slice(0,3)),[Mb]);this.update(this.ui.opacityPicker);this.confirm()}},{key:"adjustHue",value:function(Mb){this.hsb=[Mb].concat($jscomp.arrayFromIterable(this.hsb.slice(1)));this.update(this.ui.huePicker);this.confirm()}},{key:"adjustShade",value:function(Mb){var mb=$jscomp.makeIterator(Mb);Mb=mb.next().value;
mb=mb.next().value;this.hsb=[this.hsb[0],mb,Mb,this.hsb[3]];this.update(this.ui.shadePicker);this.confirm()}},{key:"adjustGradient",value:function(Mb){this.confirm()}},{key:"update",value:function(Mb){for(var mb=[],Bc=0;Bc<arguments.length;++Bc)mb[Bc-0]=arguments[Bc];var xc=this;cd.arr.withoutAll(Object.values(this.ui),[].concat($jscomp.arrayFromIterable(mb),[this.ui.colorTypeSelector])).forEach(function(ec){return ec.update(xc)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPicker"}},
{key:"properties",get:function(){return{colorMode:{},hsb:{initialize:function(){this.hsb=[].concat($jscomp.arrayFromIterable(cd.Color.red.toHSB()),[1])}},gradientValue:{derived:!0,get:function(){return this.ui.gradientControl.gradientValue},set:function(Mb){this.ui.gradientControl.gradientValue=Mb}},color:{derived:!0,get:function(){return cd.Color.hsb.apply(cd.Color,$jscomp.arrayFromIterable(this.hsb.slice(0,3))).withA(this.hsb[3])},set:function(Mb){this.hsb=[].concat($jscomp.arrayFromIterable(Mb.toHSB()),
[Mb.a])}},solidOnly:{derived:!0,set:function(Mb){var mb=this.ui.colorTypeSelector;Mb&&(mb.selection="Solid");mb.visible=!Mb}},ui:{derived:!0,get:function(){return{colorTypeSelector:this.getSubmorphNamed("color type selector"),colorEncoder:this.getSubmorphNamed("color encoder"),opacityPicker:this.getSubmorphNamed("opacity slider"),shadePicker:this.getSubmorphNamed("field picker"),huePicker:this.getSubmorphNamed("hue picker"),gradientControl:this.getSubmorphNamed("gradient control")}}}}}}],Jc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ColorPicker",version:"0.1.1-66"}}},{start:219,end:4117})}(cd.Morph);Bd=cd.ColorPicker;cd.default=Bd;var hd=lively.FreezerRuntime.recorderFor("GradientControl/index.js");hd.Morph=Sa;hd.LinearGradient=sd;hd.RadialGradient=kd;hd.Color=Vb;hd.rect=Cd;hd.resource=ed;hd.connect=Zc;hd.noUpdate=bd;hd.signal=Fc;hd.num=yd;hd.arr=Lb;Bd=function(Ad){var Jc=
lively.FreezerRuntime.recorderFor("GradientControl/index.js"),zd=Jc.hasOwnProperty("GradientControl")&&"function"===typeof Jc.GradientControl?Jc.GradientControl:Jc.GradientControl=function(Mb){Mb&&Mb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(zd,Ad,[{key:"onKeyDown",value:function(Mb){jc._get(Object.getPrototypeOf(zd.prototype),"onKeyDown",this).call(this,Mb);"Delete"==Mb.keyCombo&&this.removeStop(this.selectedStopControl)}},
{key:"onMouseDown",value:function(Mb){jc._get(Object.getPrototypeOf(zd.prototype),"onMouseDown",this).call(this,Mb);"gradient preview"==Mb.targetMorph.name&&(Mb=Mb.positionIn(Mb.targetMorph).x/Mb.targetMorph.width,this.addStopAt(Mb))}},{key:"removeStop",value:function(Mb){3>this.gradientValue.stops.length||(hd.arr.remove(this.gradientValue.stops,Mb.stop),this.refresh(),this.confirm())}},{key:"addStopAt",value:function(Mb){var mb=[].concat($jscomp.arrayFromIterable(this.gradientValue.stops)),Bc=$jscomp.makeIterator(hd.arr.sortBy(hd.arr.sortBy(mb,
function(ec){return Math.abs(ec.offset-Mb)}).slice(0,2),function(ec){return ec.offset})),xc=Bc.next().value;Bc=Bc.next().value;mb.push({color:xc.color.interpolate((Mb-xc.offset)/(Bc.offset-xc.offset),Bc.color),offset:Mb});this.gradientValue.stops=hd.arr.sortBy(mb,function(ec){return ec.offset});this.refresh();this.confirm()}},{key:"toggle",value:function(Mb,mb){(this.isLayoutable=this.visible=Mb)?this.gradientHalo.openInWorld():this.gradientHalo.remove();Mb||this.reset()}},{key:"reset",value:function(){this.gradientValue=
null;this.getSubmorphsByStyleClassName("ColorStop").forEach(function(Mb){return Mb.remove()});this.gradientHalo.reset()}},{key:"initLinearGradient",value:function(Mb){this.gradientValue=Mb.isGradient?new hd.LinearGradient({stops:Mb.stops}):new hd.LinearGradient({stops:[{color:Mb,offset:0},{color:hd.Color.transparent,offset:1}]})}},{key:"initRadialGradient",value:function(Mb,mb){mb=mb.innerBounds();this.gradientValue=Mb.isGradient?new hd.RadialGradient({bounds:mb,stops:Mb.stops}):new hd.RadialGradient({bounds:mb,
stops:[{color:Mb,offset:0},{color:hd.Color.transparent,offset:1}]})}},{key:"setGradient",value:function(Mb,mb){this.gradientValue=Mb;this.gradientHalo.initFromPicker(mb)}},{key:"update",value:function(Mb){if(!this.isDisabled){var mb=this.selectedStopControl;this.gradientValue&&this.gradientValue.type==Mb.colorMode||("linearGradient"==Mb.colorMode&&this.initLinearGradient(this.gradientValue||Mb.color),"radialGradient"==Mb.colorMode&&this.initRadialGradient(this.gradientValue||Mb.color,Mb._target),
this.gradientHalo.initFromPicker(Mb),this.gradientHalo.confirm());if(mb){var Bc=this.gradientValue.stops.find(function(xc){return mb.stop==xc});Bc&&(Bc.color=Mb.color);this.confirm()}this.refresh()}}},{key:"getPositionFor",value:function(Mb){var mb=this.getSubmorphNamed("gradient preview").bounds().topEdge();return mb.start.interpolate(Mb.offset,mb.end).subXY(0,5)}},{key:"confirm",value:function(){hd.signal(this,"gradientChanged",this.gradientValue)}},{key:"refresh",value:function(){if(this.gradientValue){var Mb=
this.getSubmorphNamed("gradient"),mb=this.gradientValue.stops.map(function(Bc){return Object.assign({},Bc)});Mb.fill=new hd.LinearGradient({vector:hd.rect(0),stops:mb});this.updateStopControls(this.gradientValue.stops);this.gradientHalo.refresh(this)}}},{key:"moveStop",value:function(Mb){var mb=$jscomp.makeIterator(Mb);Mb=mb.next().value;mb=mb.next().value/this.getSubmorphNamed("gradient preview").width;this.adjustStop(Mb,mb)}},{key:"adjustStop",value:function(Mb,mb){Mb.offset=hd.num.clamp(Mb.offset+
mb,0,1);this.refresh();this.confirm()}},{key:"placeStop",value:function(Mb){this.addMorph(Mb)}},{key:"getControlFor",value:function(Mb,mb){mb=void 0===mb?this:mb;var Bc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xc){if(1==xc.nextAddress)return xc.yield(hd.resource("part://SystemWidgets/gradient editor/color stop").read(),2);Bc=xc.yieldResult;Bc.withAllSubmorphsDo(function(ec){return ec.halosEnabled=!1});mb.placeStop(Bc);hd.connect(Bc,"select",mb,"selectStop");hd.connect(Bc,"moveColorStop",
mb,"moveStop");return xc.return(Bc.forStop(Mb))})}},{key:"selectStop",value:function(Mb){this.deselectAllStopsExcept(Mb,this);this.deselectAllStopsExcept(Mb,this.gradientHalo);hd.signal(this,"switchColor",Mb.stop.color)}},{key:"deselectAllStopsExcept",value:function(Mb,mb){hd.noUpdate(function(){mb.getSubmorphsByStyleClassName("ColorStop").forEach(function(Bc){Bc.stop!=Mb.stop?Bc.deselect():Bc.select()})})}},{key:"updateStopControls",value:function(Mb,mb){mb=void 0===mb?this:mb;var Bc=this,xc,ec,
Dc,Ta,hc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Eb){switch(Eb.nextAddress){case 1:if(mb._active)return Eb.return();mb._active=!0;xc=mb.getSubmorphsByStyleClassName("ColorStop");ec=$jscomp.makeIterator(Mb);Dc=ec.next();case 2:if(Dc.done){Eb.jumpTo(4);break}Ta=Dc.value;if(hc=xc.shift()){hc.forStop(Ta);Eb.jumpTo(3);break}return Eb.yield(Bc.getControlFor(Ta,mb),3);case 3:Dc=ec.next();Eb.jumpTo(2);break;case 4:hd.arr.invoke(xc,"remove"),mb.getSubmorphsByStyleClassName("ColorStop").forEach(function(tc){tc.positionIn(mb)}),
mb._active=!1,Eb.jumpToEnd()}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GradientControl"}},{key:"properties",get:function(){return{gradientValue:{},gradientHalo:{},isDisabled:{get:function(){return!this.visible}},stopControls:{derived:!0,get:function(){return this.getSubmorphsByStyleClassName("ColorStop")}},selectedStopControl:{derived:!0,get:function(){return this.stopControls.find(function(Mb){return Mb.isSelected})}}}}}],Jc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"GradientControl",version:"0.1.1-93"}}},{start:317,end:6735})}(hd.Morph);Bd=hd.GradientControl;hd.default=Bd;var Jd=lively.FreezerRuntime.recorderFor("GradientHalo/index.js");Jd.Morph=Sa;Jd.arr=Lb;Jd.resource=ed;Jd.connect=Zc;Jd.signal=Fc;Jd.pt=ke;Jd.RadialGradient=kd;Jd.LinearGradient=sd;Jd.Point=ue;Bd=function(Ad){var Jc=lively.FreezerRuntime.recorderFor("GradientHalo/index.js"),zd=Jc.hasOwnProperty("GradientHalo")&&
"function"===typeof Jc.GradientHalo?Jc.GradientHalo:Jc.GradientHalo=function(Mb){Mb&&Mb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(zd,Ad,[{key:"reset",value:function(){this.getSubmorphsByStyleClassName("ColorStop").forEach(function(Mb){return Mb.remove()})}},{key:"initFromPicker",value:function(Mb){var mb=Mb.gradientValue;this.picker=Mb;"linearGradient"==mb.type&&this.initFromLinearGradient(this.targetMorph,mb);"radialGradient"==
mb.type&&this.initFromRadialGradient(this.targetMorph,mb);this.alignWithTarget()}},{key:"initFromLinearGradient",value:function(Mb,mb){Mb=Mb.innerBounds();mb=mb.vectorAsAngle();var Bc=Mb.center(),xc=Math.max(Mb.height,Mb.width),ec=Bc.addPt(Jd.Point.polar(xc,mb));mb=Bc.subPt(Jd.Point.polar(xc,mb));Bc=$jscomp.makeIterator(Mb.lineIntersection(mb.lineTo(ec)));mb=Bc.next().value;var Dc=Bc.next().value;Bc=Jd.arr.min([mb,Dc],function(Ta){return Ta.dist(ec)});this.originPoint=Bc==mb?Dc:mb;this.directionPoint=
Bc;this.orthogonalDist=Jd.arr.min(Mb.edges(),function(Ta){return Ta.distanceFromLine(Dc)}).length()/2;this.alignWithTarget()}},{key:"initFromRadialGradient",value:function(Mb,mb){Mb=Mb.innerBounds().relativeToAbsPoint(mb.focus);var Bc=mb.bounds;mb=Bc.height;Bc=Bc.width;this.originPoint=Mb;this.directionPoint=Mb.addXY(0,mb/2);this.orthogonalDist=Bc/2;this.alignWithTarget()}},{key:"alignWithTarget",value:function(){var Mb=this.ui,mb=Mb.directionHandle,Bc=Mb.orthogonalHandle,xc=Mb.colorStopWrapper;Mb.originHandle.center=
Jd.pt(0);mb.center=Jd.pt(this.width,0);this.width=this.originPoint.dist(this.directionPoint);xc.width=this.width;mb.center=Jd.pt(this.width,0);Bc.center=Jd.pt(0,this.orthogonalDist);0<this.orthogonalDist?(xc.tilted=1,xc.position=Jd.pt(this.width/2,this.height/4-1)):(xc.tilted=0,xc.position=Jd.pt(this.width/2,-this.height/4+1));this.globalPosition=this.targetMorph.worldPoint(this.originPoint).subPt($world.scroll);this.rotation=this.angle}},{key:"relayout",value:function(){this.alignWithTarget()}},
{key:"confirm",value:function(){var Mb=this.picker.ui.gradientControl;"linearGradient"==Mb.gradientValue.type&&(Mb.gradientValue.vector=this.angle);if("radialGradient"==Mb.gradientValue.type){var mb=Mb.gradientValue,Bc=2*Math.abs(this.orthogonalDist),xc=2*this.originPoint.dist(this.directionPoint);mb.focus=this.originPoint.scaleByPt(this.targetMorph.extent.inverted());mb.bounds=Jd.pt(0,0).extent(Jd.pt(Bc,xc));mb.angle=this.angle}Mb.confirm();this.refresh(Mb,this.targetMorph);this.alignWithTarget()}},
{key:"normalize",value:function(Mb){return this.getGlobalTransform().transformDirection(Mb)}},{key:"moveOriginHandle",value:function(Mb){Mb=this.normalize(Mb.state.dragDelta);this.originPoint=this.originPoint.addPt(Mb);this.confirm()}},{key:"moveDirectionHandle",value:function(Mb){Mb=this.normalize(Mb.state.dragDelta);this.directionPoint=this.directionPoint.addPt(Mb);this.confirm()}},{key:"moveOrthogonalHandle",value:function(Mb){Mb=this.normalize(Mb.state.dragDelta);this.orthogonalDist-=Mb.dotProduct(Jd.Point.polar(1,
this.angle-Math.PI/2));this.confirm()}},{key:"moveStop",value:function(Mb){var mb=$jscomp.makeIterator(Mb);Mb=mb.next().value;mb=mb.next().value;this.picker.ui.gradientControl.adjustStop(Mb,mb/this.getSubmorphNamed("color stop wrapper").width)}},{key:"refresh",value:function(Mb,mb){mb=Mb.gradientValue;this.alignWithTarget();Mb.updateStopControls(mb.stops,this)}},{key:"placeStop",value:function(Mb){this.get("color stop wrapper").addMorph(Mb)}},{key:"selectStop",value:function(Mb){this.picker.ui.gradientControl.selectStop(Mb)}},
{key:"getPositionFor",value:function(Mb){var mb=this.getSubmorphNamed("color stop wrapper"),Bc=mb.innerBounds().bottomEdge();return Bc.start.interpolate(Mb.offset,Bc.end).subXY(0,5).subPt(mb.origin)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GradientHalo"}},{key:"properties",get:function(){return{picker:{},targetMorph:{derived:!0,get:function(){return this.picker._target}},ui:{derived:!0,get:function(){return{originHandle:this.getSubmorphNamed("origin handle"),directionHandle:this.getSubmorphNamed("direction handle"),
orthogonalHandle:this.getSubmorphNamed("orthogonal handle"),colorStopWrapper:this.getSubmorphNamed("color stop wrapper")}}},angle:{derived:!0,get:function(){return this.directionPoint.subPt(this.originPoint).theta()}}}}}],Jc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"GradientHalo",version:"0.1.1-141"}}},{start:300,end:5921})}(Jd.Morph);
Bd=Jd.GradientHalo;Jd.default=Bd;var de=lively.FreezerRuntime.recorderFor("OpacityPicker/index.js");de.Morph=Sa;de.pt=ke;de.Color=Vb;de.LinearGradient=sd;de.signal=Fc;de.num=yd;Bd=function(Ad){var Jc=lively.FreezerRuntime.recorderFor("OpacityPicker/index.js"),zd=Jc.hasOwnProperty("OpacityPicker")&&"function"===typeof Jc.OpacityPicker?Jc.OpacityPicker:Jc.OpacityPicker=function(Mb){Mb&&Mb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return jc(zd,Ad,[{key:"confirm",value:function(){de.signal(this,"opacityChanged",this.alpha)}},{key:"onMouseDown",value:function(Mb){var mb=this.get("slider").width;this.sliderPosition=de.pt(0,Mb.positionIn(this).y-mb/2);this.confirm()}},{key:"onDrag",value:function(Mb){var mb=this.get("slider").width;this.sliderPosition=de.pt(0,Mb.positionIn(this).y-mb/2);this.confirm()}},{key:"update",value:function(Mb){this.alpha=Mb.color.a;this.getSubmorphNamed("opacity gradient").fill=new de.LinearGradient({stops:[{offset:0,
color:Mb.color.withA(0)},{offset:1,color:Mb.color.withA(1)}]});this.refresh()}},{key:"refresh",value:function(){this.get("slider").center=this.sliderPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OpacityPicker"}},{key:"properties",get:function(){return{sliderPosition:{derived:!0,after:["submorphs"],get:function(){return de.pt(this.width/2,5+(this.height-10)*this.alpha)},set:function(Mb){this.alpha=de.num.clamp(Mb.y/(this.height-10),0,1);this.refresh()}}}}}],Jc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"OpacityPicker",version:"0.1.1-26"}}},{start:221,end:1464})}(de.Morph);Bd=de.OpacityPicker;de.default=Bd;var Zb=lively.FreezerRuntime.recorderFor("ColorEncoder/index.js");Zb.Morph=Sa;Zb.Color=Vb;Zb.signal=Fc;Zb.noUpdate=bd;Zb.num=yd;Bd=function(Ad){var Jc=lively.FreezerRuntime.recorderFor("ColorEncoder/index.js"),zd=Jc.hasOwnProperty("ColorEncoder")&&
"function"===typeof Jc.ColorEncoder?Jc.ColorEncoder:Jc.ColorEncoder=function(Mb){Mb&&Mb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(zd,Ad,[{key:"update",value:function(Mb){this.currentColor=Mb.hsb;this.refresh()}},{key:"refresh",value:function(){var Mb=this,mb=this.currentColor;Zb.noUpdate(function(){({Hex:function(){return Mb.updateHex(mb)},RGB:function(){return Mb.updateRGB(mb)},HSL:function(){return Mb.updateHSL(mb)},
HSB:function(){return Mb.updateHSB(mb)},CSS:function(){return Mb.updateCSS(mb)}})[Mb.encodingMode]()})}},{key:"updateHex",value:function(Mb){Mb=Zb.Color.hsb.apply(Zb.Color,$jscomp.arrayFromIterable(Mb)).withA(Zb.num.roundTo(Mb[3],.01));var mb=this.getSubmorphNamed("hex input"),Bc=this.getSubmorphNamed("hex opacity control");mb.input=Mb.toHexString().toUpperCase();Bc.number=Mb.a}},{key:"updateRGB",value:function(Mb){var mb=this.getSubmorphNamed("first value"),Bc=this.getSubmorphNamed("second value"),
xc=this.getSubmorphNamed("third value"),ec=this.getSubmorphNamed("opacity control"),Dc=$jscomp.makeIterator(Zb.Color.hsb.apply(Zb.Color,$jscomp.arrayFromIterable(Mb)).toTuple()),Ta=Dc.next().value,hc=Dc.next().value;Dc=Dc.next().value;Mb=Mb[3];mb.number=255*Ta;Bc.number=255*hc;xc.number=255*Dc;ec.number=Mb}},{key:"updateHSL",value:function(Mb,mb){mb=void 0===mb?!0:mb;var Bc=this.getSubmorphNamed("first value"),xc=this.getSubmorphNamed("second value"),ec=this.getSubmorphNamed("third value"),Dc=this.getSubmorphNamed("opacity control"),
Ta=$jscomp.makeIterator(Mb),hc=Ta.next().value,Eb=Ta.next().value;Ta=Ta.next().value;ec.number=mb?1-Ta:Ta;Bc.number=hc;xc.number=Eb;Dc.number=Mb[3]}},{key:"updateHSB",value:function(Mb){this.updateHSL(Mb,!1)}},{key:"updateCSS",value:function(Mb){var mb=this.getSubmorphNamed("css input");Mb=Zb.Color.hsb.apply(Zb.Color,$jscomp.arrayFromIterable(Mb)).withA(Zb.num.roundTo(Mb[3],.01));mb.input=Mb.toCSSString()}},{key:"confirm",value:function(){var Mb=this;({Hex:function(){return Mb.confirmHex()},RGB:function(){return Mb.confirmRGB()},
HSL:function(){return Mb.confirmHSL()},HSB:function(){return Mb.confirmHSB()},CSS:function(){return Mb.confirmCSS()}})[this.encodingMode]()}},{key:"confirmHex",value:function(){var Mb=this.getSubmorphNamed("hex input"),mb=this.getSubmorphNamed("hex opacity control");Mb=Zb.Color.rgbHex(Mb.input).withA(mb.number);this.currentColor=[].concat($jscomp.arrayFromIterable(Mb.toHSB()),[Mb.a]);Zb.signal(this,"colorEntered",Mb)}},{key:"confirmRGB",value:function(){var Mb=this.getSubmorphNamed("first value"),
mb=this.getSubmorphNamed("second value"),Bc=this.getSubmorphNamed("third value"),xc=this.getSubmorphNamed("opacity control");Mb=Zb.Color.rgba(Mb.number,mb.number,Bc.number,xc.number);this.currentColor=[].concat($jscomp.arrayFromIterable(Mb.toHSB()),[Mb.a]);Zb.signal(this,"colorEntered",Mb)}},{key:"confirmHSL",value:function(){var Mb=this.getSubmorphNamed("first value"),mb=this.getSubmorphNamed("second value"),Bc=this.getSubmorphNamed("third value"),xc=this.getSubmorphNamed("opacity control");Mb=Zb.Color.hsb(Mb.number,
mb.number,1-Bc.number).withA(xc.number);this.currentColor=[].concat($jscomp.arrayFromIterable(Mb.toHSB()),[Mb.a]);Zb.signal(this,"colorEntered",Mb)}},{key:"confirmHSB",value:function(){var Mb=this.getSubmorphNamed("first value"),mb=this.getSubmorphNamed("second value"),Bc=this.getSubmorphNamed("third value"),xc=this.getSubmorphNamed("opacity control");Mb=Zb.Color.hsb(Mb.number,mb.number,Bc.number).withA(xc.number);this.currentColor=[].concat($jscomp.arrayFromIterable(Mb.toHSB()),[Mb.a]);Zb.signal(this,
"colorEntered",Mb)}},{key:"confirmCSS",value:function(){var Mb=this.getSubmorphNamed("css input");Mb=Zb.Color.fromString(Mb.input);this.currentColor=[].concat($jscomp.arrayFromIterable(Mb.toHSB()),[Mb.a]);Zb.signal(this,"colorEntered",Mb)}},{key:"selectEncoding",value:function(Mb){this.encodingMode=Mb;this.submorphs.map(function(Bc){return Bc.visible=Bc.isLayoutable=!1});var mb=this.getSubmorphNamed({Hex:"hex encoding",RGB:"3 val encoding",HSL:"3 val encoding",HSB:"3 val encoding",CSS:"css encoding"}[Mb]);
mb.visible=mb.isLayoutable=!0;"RGB"==Mb&&[mb.getSubmorphNamed("first value"),mb.getSubmorphNamed("second value"),mb.getSubmorphNamed("third value")].forEach(function(Bc){Object.assign(Bc,{min:0,max:255,scaleFactor:1})});["HSL","HSB"].includes(Mb)&&(Object.assign(mb.getSubmorphNamed("first value"),{min:0,max:360,scaleFactor:1}),[mb.getSubmorphNamed("second value"),mb.getSubmorphNamed("third value")].forEach(function(Bc){Object.assign(Bc,{min:0,max:1,scaleFactor:100})}));this.refresh()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ColorEncoder"}},{key:"properties",get:function(){return{encodingMode:{type:"Enum",values:["Hex","RGB","HSL","HSB","CSS"]},currentColor:{defaultValue:Zb.Color.white}}}}],Jc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ColorEncoder",version:"0.1.1-43"}}},{start:211,end:5572})}(Zb.Morph);Bd=Zb.ColorEncoder;Zb.default=
Bd;var Ic=lively.FreezerRuntime.recorderFor("ColorPaletteView/index.js");Ic.HTMLMorph=He;Ic.arr=Lb;Ic.materialDesignColors=ld;Ic.webSafeColors=Wd;Ic.flatDesignColors=gc;Ic.Color=Vb;Ic.signal=Fc;Bd=function(Ad){var Jc=lively.FreezerRuntime.recorderFor("ColorPaletteView/index.js"),zd=Jc.hasOwnProperty("ColorPaletteView")&&"function"===typeof Jc.ColorPaletteView?Jc.ColorPaletteView:Jc.ColorPaletteView=function(Mb){Mb&&Mb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return jc(zd,Ad,[{key:"test",value:function(){this.showPalette(Ic.materialDesignColors.map(function(Mb){return Ic.Color.rgbHex(Mb)}))}},{key:"selectPalette",value:function(Mb){var mb={"Flat Design":Ic.flatDesignColors,Material:Ic.materialDesignColors,"Web Safe":Ic.webSafeColors};mb[Mb]&&this.showPalette(mb[Mb].map(function(Bc){return Ic.Color.rgbHex(Bc)}))}},{key:"onMouseDown",value:function(Mb){jc._get(Object.getPrototypeOf(zd.prototype),"onMouseDown",this).call(this,Mb);(Mb=Mb.domEvt.target.dataset.color)&&
Ic.signal(this,"colorSelected",Ic.Color.fromString(Mb))}},{key:"showPalette",value:function(Mb){this.html='<div class="palette-container">\n      '+Mb.map(function(mb){return'<div class="color-cell" data-color="'+mb+'" style="background: '+mb+'"></div>'}).join("\n")+"\n    </div>"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPaletteView"}}],Jc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ColorPaletteView",version:"0.1.1-14"}}},{start:260,end:1164})}(Ic.HTMLMorph);Bd=Ic.ColorPaletteView;Ic.default=Bd}}});