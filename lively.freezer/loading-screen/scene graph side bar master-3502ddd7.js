System.register("./__root_module__-c4d7431e.js kld-intersections ./editor-plugin-012baedf.js ./index-ad3a1066.js ./index-1640eed6.js ./index-6f8f5c35.js ./index-f069e892.js ./color-picker-f735ea68.js ./editor-plugin-be56bcf3.js ./index-49569153.js".split(" "),function(){var ta,nb,Bb,Vb,Qb,Dd,Ic,ud,Nc,Jc,Xc,id,Fd,nd,Yc,Ta,sb,dc,ac,Vc,Hd,hc,kc,xb,yb,wc,Kc,zb,ab,Kb,nc,da,qa,Va,cb,kb,Ma,Oa,lb,Wb;return{setters:[function(Nb){ta=Nb.ar;nb=Nb.ah;Bb=Nb.az;Vb=Nb.au;Qb=Nb.a2;Dd=Nb.as;Ic=Nb.ap;ud=Nb.at;
Nc=Nb.C;Jc=Nb.a1;Xc=Nb.a5;id=Nb._;Fd=Nb.aU;nd=Nb.P;Yc=Nb.a6;Ta=Nb.aA;sb=Nb.aj;dc=Nb.aT;ac=Nb.an;Vc=Nb.ak;Hd=Nb.am;hc=Nb.bo;kc=Nb.bq;xb=Nb.bR;yb=Nb.b0;wc=Nb.bg;Kc=Nb.aM;zb=Nb.n;ab=Nb.a0;Kb=Nb.aV;nc=Nb.aW;da=Nb.ao;qa=Nb.a3;Va=Nb.aq;cb=Nb.bS},function(){},function(Nb){kb=Nb.I},function(Nb){Ma=Nb.d;Oa=Nb.s;lb=Nb.I;Wb=Nb.M},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){function Nb(Ga){var qc=Ga.sourceObj,Za=Ga.targetObj;qc.isMorph&&Za.isMorph?(qc.show(),
Za.show(),Mc.showConnector&&Mc.showConnector(qc,Za)):Mc.show(String(Ga))}function rc(Ga){var qc=Ga.sourceObj,Za=Ga.sourceAttrName,Pa=Ga.targetObj,Qa=Ga.targetMethodName,Hb=Ga.getConverter();Ga=Ga.getUpdater();return Mc.printConnectionElements(qc,Za,Pa,Qa,Hb,Ga)}function xc(Ga,qc,Za,Pa,Qa,Hb){Ga="/* global connect, source, target */\nconnect(source, '"+qc+"', target, '"+Pa+"'";if(Qa||Hb)Ga+=", {\n";Qa&&(Ga+="  converter: "+Qa);Qa&&Hb&&(Ga+=",");Qa&&(Ga+="\n");Hb&&(Ga+="  updater: "+Hb+"\n");if(Qa||
Hb)Ga+="}";return Ga+");"}function I(Ga,qc){var Za;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pa){if(1==Pa.nextAddress)return Pa.yield(Mc.InteractiveMorphSelector.selectMorph(),2);Za=Pa.yieldResult;return Pa.return(Za?Mc.interactiveConnectGivenSourceAndTarget(Ga,qc,Za):null)})}function T(Ga,qc,Za,Pa){var Qa,Hb,Gb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ad){Qa=Za&&Za.world().targetDataBindings(Za);Hb=Ga.world();if(!Qa||!Qa.length)return Hb.setStatusMessage("connect canceled"),
ad.return();Gb=Qa.map(function(Td){return[Td[0].group||"uncategorized",Td.map(function(Zd){return[Zd.signature||Zd.name,function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ue){return 1==Ue.nextAddress?Ue.yield(Mc.interactivelyEvaluateConnection({sourceObj:Ga,sourceAttr:qc,targetObj:Za,targetAttr:Zd.name,onConnect:Pa}),2):Ue.return(Ue.yieldResult)})}]})]});Gb.push(["custom...",function(){var Td;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zd){return 1==Zd.nextAddress?
Zd.yield(Hb.prompt("Enter custom connection point",{requester:$world,historyId:"lively.morphic-custom-connection-points",useLastInput:!0}),2):(Td=Zd.yieldResult)?Zd.yield(Mc.interactivelyEvaluateConnection({sourceObj:Ga,sourceAttr:qc,targetObj:Za,targetAttr:Td,onConnect:Pa}),0):Zd.jumpTo(0)})}]);return ad.yield(Za.openMenu(Gb).whenFinished(),0)})}function ua(Ga,qc,Za,Pa){qc=void 0===qc?"confirm connection":qc;var Qa,Hb,Gb,ad,Td,Zd,Ue;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fc){Qa=
Ga;Hb=Qa.sourceObj;Gb=Qa.sourceAttrName;ad=Qa.targetObj;Td=Qa.targetMethodName;Zd=Ga.getConverter();Ue=Ga.getUpdater();return Fc.return(Mc.interactivelyEvaluateConnection({sourceObj:Hb,sourceAttr:Gb,targetObj:ad,targetAttr:Td,converter:Zd,updater:Ue,prompt:qc,highlight:Za,onConnect:Pa}))})}function Da(Ga,qc,Za,Pa,Qa){Pa=void 0===Pa?{}:Pa;Qa=Mc.rect(0).sides.concat(Mc.rect(0).corners);Za=Za||new Mc.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Mc.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Mc.Color.transparent,
nativeCursor:"auto"},end:{fill:Mc.Color.orange}}},Pa,{hasFixedPosition:!0}));Za.startPoint.attachTo(Ga,"rightCenter");qc.isMorph?(Pa=qc.globalBounds().partNameNearest(Qa,Ga.globalPosition),Ga.globalPosition.equals(qc.globalBounds().partNamed(Pa))&&qc.globalBounds().partNameNearest(Mc.arr.without(Qa,Pa),Ga.globalPosition),Za.endPoint.attachTo(qc,"leftCenter")):(Qa=Ga.globalBounds().topRight().addPt(Mc.pt(100,0)),qc=Mc.morph({type:"label",value:qc.toString(),styleClasses:["Tooltip"],padding:Mc.rect(8,
4)}).openInWorld(Qa),qc.position=Ga.world().bounds().translateForInclusion(qc.bounds()).topLeft(),Mc.once(Za,"remove",qc,"remove"),Za.endPoint.attachTo(qc,"leftCenter"));return Za}function Lb(Ga){var qc,Za,Pa,Qa,Hb,Gb,ad,Td,Zd,Ue,Fc,Md,fd,Ib,fa,ma,tb,H,ka,Ca;return $jscomp.asyncExecutePromiseGeneratorProgram(function(rb){switch(rb.nextAddress){case 1:qc=Ga;Za=qc.sourceObj;Pa=qc.sourceAttr;Qa=qc.targetObj;Hb=qc.targetAttr;Gb=qc.converter;ad=qc.updater;Td=qc.prompt;Zd=void 0===qc.highlight?!0:qc.highlight;
Ue=qc.onConnect;Fc="lively://lively.bindings-interactive-connect/x"+Za.id;Md={context:window,format:"esm",targetModule:Fc,classTransform:Mc.classToFunctionTransform};fd=Mc.printConnectionElements(Za,Pa,Qa,Hb,Gb,ad);Qa.isMorph&&Za.isMorph&&(Ib=Qa.propertiesAndPropertySettings().properties[Hb]||{type:typeof Qa[Hb]},fa=Ib.type,ma=Za.propertiesAndPropertySettings().properties[Pa]||{type:typeof Za[Pa]},tb=ma.type,tb!==fa&&(Td=!0));H={};Object.assign(lively.modules.module(Fc).recorder,(H.source=Za,H.target=
Qa,H.connect=Ic,H.once=ud,H[Pa]=Za[Pa],H));if(!Td){ka=fd;rb.jumpTo(2);break}return rb.yield($world.editPrompt(Td,{input:fd,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:Md,animated:!1}),3);case 3:if(ka=rb.yieldResult,!ka)return $world.setStatusMessage("connect canceled"),rb.return();case 2:return rb.yield(lively.vm.runEval(ka,Md),4);case 4:Ca=rb.yieldResult;if(Ca.isError)return $world.logError(Ca.value),rb.return(Lb({sourceObj:Za,sourceAttr:Pa,targetObj:Qa,
targetAttr:Hb,converter:Gb,updater:ad,prompt:"confirm connection",highlight:Zd,onConnect:Ue}));Zd&&($world.setStatusMessage("connected!",Mc.Color.green),Mc.interactivelyShowConnection(Ca.value));"function"===typeof Ue&&Ue(Ca);rb.jumpToEnd()}})}var ub=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");ub.Inspector=kb;var Ja=function(Ga){var qc=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),Za=qc.hasOwnProperty("ProtoInspector")&&"function"===typeof qc.ProtoInspector?qc.ProtoInspector:
qc.ProtoInspector=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(Za,Ga,void 0,[{key:"className",get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],qc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoInspector",
version:"0.1.1-0"}}},{start:68,end:210})}(ub.Inspector);Ja=ub.ProtoInspector;ub.default=Ja;var Rb=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");Rb.Morph=nb;Rb.touchInputDevice=Bb;Rb.easings=Vb;Rb.pt=Qb;Rb.fun=Dd;Rb.connect=Ic;ub=function(Ga){var qc=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),Za=qc.hasOwnProperty("MorphicSideBar")&&"function"===typeof qc.MorphicSideBar?qc.MorphicSideBar:qc.MorphicSideBar=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ta(Za,Ga,[{key:"onWorldResize",value:function(Pa){Pa=void 0===Pa?!0:Pa;if(this.respondsToVisibleWindow){var Qa=$world.visibleBounds(),Hb=navigator.standalone&&Rb.touchInputDevice?25:0;this.height=Qa.height-Hb;this.top=Hb+Qa.top();Hb=this.get("horizontal resizer");Hb.height=this.height;Hb.top=0;Pa&&(this.visible?this.topLeft=Qa.topLeft():this.topRight=Qa.topLeft())}}},{key:"switchMode",value:function(Pa){"inspector"==Pa&&this.showInspector();"connections"==Pa&&this.showConnections()}},
{key:"showInspector",value:function(){this.get("inspector").visible=!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(Pa){var Qa=this,Hb,Gb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ad){switch(ad.nextAddress){case 1:Hb=$world.visibleBounds();Gb=navigator.standalone&&Rb.touchInputDevice?25:0;Qa.height=Hb.height-Gb;Qa.top=Gb+Hb.top();if(Pa)return $world.addMorph(Qa,
$world.get("lively top bar")),Qa.right=0,Qa.attachToWorld($world),Qa.visible=!0,ad.yield(Qa.whenRendered(),5);Qa.detachFromWorld($world);return ad.yield(Qa.animate({opacity:0,right:0,duration:300}),4);case 4:Qa.visible=!1;Qa.remove();ad.jumpTo(0);break;case 5:return Qa.onWorldResize(!1),Qa.get("scene graph").adjustProportions(),ad.yield(Qa.animate({opacity:1,easing:Rb.easings.outCirc,left:1,duration:300}),6);case 6:Qa.get("scene graph").refresh(),ad.jumpToEnd()}})}},{key:"attachToWorld",value:function(Pa){Rb.connect(Pa,
"onChange",this,"onHierarchyChange",{garbageCollect:!0});Rb.connect(Pa,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});Rb.connect(Pa,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(Pa){var Qa=this;Pa.attributeConnections.forEach(function(Hb){Hb.targetObj===Qa&&Hb.disconnect()})}},{key:"selectNode",value:function(Pa){this.getSubmorphNamed("scene graph").selectMorphInTarget(Pa);this.getSubmorphNamed("connections tree").inspectConnectionsOf(Pa)}},
{key:"onHierarchyChange",value:function(Pa){var Qa=this,Hb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Gb){if("addMorphAt"===Pa.selector||"removeMorph"===Pa.selector||"name"===Pa.prop){Hb=Qa._sceneGraph||(Qa._sceneGraph=Qa.getSubmorphNamed("scene graph"));if(!Hb||!Hb.owner.visible||Pa.target&&Pa.target.isHand||Pa.target&&Hb.ignoreMorph(Pa.target)||Pa.args&&!Pa.args[0].isHalo&&Hb.ignoreMorph(Pa.args[0])||Pa.target.ownerChain().find(function(ad){return Hb.ignoreMorph(ad)}))return Gb.return();
Rb.fun.debounceNamed("scene-graph-update",50,function(){return Hb.refresh()})()}Gb.jumpToEnd()})}}],[{key:"className",get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],qc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-69"}}},{start:226,
end:3566})}(Rb.Morph);ub=Rb.MorphicSideBar;Rb.default=ub;var Mc=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");Mc.interactivelyShowConnection=Nb;Mc.printConnection=rc;Mc.printConnectionElements=xc;Mc.interactiveConnectGivenSource=I;Mc.interactiveConnectGivenSourceAndTarget=T;Mc.interactivelyReEvaluateConnection=ua;Mc.visualizeConnection=Da;Mc.interactivelyEvaluateConnection=Lb;Mc.connect=Ic;Mc.once=ud;Mc.Color=Nc;Mc.rect=Jc;Mc.pt=Qb;Mc.arr=Xc;Mc.promise=id;Mc.properties=Fd;Mc.Path=nd;Mc.obj=
Yc;Mc.HorizontalLayout=Ta;Mc.Morph=nb;Mc.VerticalLayout=sb;Mc.StyleSheet=dc;Mc.Icon=ac;Mc.GridLayout=Vc;Mc.morph=Hd;Mc.TreeData=hc;Mc.Tree=kc;Mc.Leash=xb;Mc.LabeledCheckBox=yb;Mc.SearchField=wc;Mc.showConnector=Ma;Mc.show=Oa;Mc.InteractiveMorphSelector=lb;Mc.MorphHighlighter=Wb;Mc.Window=Kc;Mc.classToFunctionTransform=zb;Mc.interactivelyShowConnection=Nb;Mc.interactivelyShowConnection=Nb;Mc.printConnection=rc;Mc.printConnection=rc;Mc.printConnectionElements=xc;Mc.printConnectionElements=xc;Mc.interactiveConnectGivenSource=
I;Mc.interactiveConnectGivenSource=I;Mc.interactiveConnectGivenSourceAndTarget=T;Mc.interactiveConnectGivenSourceAndTarget=T;Mc.interactivelyReEvaluateConnection=ua;Mc.interactivelyReEvaluateConnection=ua;Mc.visualizeConnection=Da;Mc.visualizeConnection=Da;Mc.interactivelyEvaluateConnection=Lb;Mc.interactivelyEvaluateConnection=Lb;var Rc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");Rc.Tree=kc;Rc.TreeData=hc;Rc.morph=Hd;Rc.Icon=ac;Rc.HorizontalLayout=Ta;Rc.easings=Vb;Rc.Morph=nb;Rc.Color=
Nc;Rc.Rectangle=ab;Rc.rect=Jc;Rc.pt=Qb;Rc.connect=Ic;Rc.disconnect=Kb;Rc.disconnectAll=nc;Rc.once=ud;Rc.arr=Xc;Rc.num=da;Rc.fun=Dd;Rc.tree=qa;Rc.promise=id;Rc.ConnectionHalo=_missingExportShim;ub=function(Ga){var qc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Za=qc.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof qc.InteractiveTreeContainer?qc.InteractiveTreeContainer:qc.InteractiveTreeContainer=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ta(Za,Ga,[{key:"onChildRemoved",value:function(Pa){}},{key:"onChildAdded",value:function(Pa){}},{key:"toggleSelected",value:function(Pa){if(this.tree){var Qa=this.tree,Hb=Qa.selectionFontColor,Gb=Qa.nonSelectionFontColor;this.submorphs.filter(function(ad){return!ad._isControlElement&&ad.styleClasses.includes("Label")}).forEach(function(ad){ad.fontColor=Pa?Hb:Gb})}}},{key:"onGrab",value:function(Pa){var Qa=this.tree,Hb=this.node;this.fill=Rc.Color.gray.withA(.5);this.fontColor=Qa.selectionFontColor;
this.opacity=.8;ta._get(Object.getPrototypeOf(Za.prototype),"onGrab",this).call(this,Pa);Hb&&(this.toggleSelected(!1),Qa.collapse(Hb),Qa.treeData.parentNode(Hb).container.onChildRemoved(this),this._data=Qa.treeData.remove(Hb),Hb.container.target.remove(),Qa.update(!0))}},{key:"wantsToBeDroppedOn",value:function(Pa){this.showPreviewOn(Pa);return!0}},{key:"showPreviewOn",value:function(Pa){if(Pa.isContainer)var Qa=Pa.tree;Pa.isTree&&(Qa=Pa);Qa&&Qa.showDropPreviewFor&&Qa.showDropPreviewFor(this)}},{key:"insertAsChild",
value:function(Pa){var Qa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Hb){if(1==Hb.nextAddress)return Qa.tree.treeData.add(Pa._data,Qa.node,Qa.node.children[0]),Qa.tree.uncollapse(Qa.node),Qa.tree.treeData.remove(Qa.tree._previewNode),Hb.yield(Qa.tree.whenRendered(),2);Qa.tree.update(!0);Qa.onChildAdded(Pa);Hb.jumpToEnd()})}},{key:"onBeingDroppedOn",value:function(Pa,Qa){var Hb=this;debugger;this.tree._dropInProgress=!0;ta._get(Object.getPrototypeOf(Za.prototype),"onBeingDroppedOn",
this).call(this,Pa,Qa);Pa=function(){Hb.fill=Rc.Color.gray.withA(.5);Hb.opacity=1;Hb.tree._dropInProgress=!1;Hb.tree.refresh()};Qa.isTree?Qa.insertAtPlaceholder(this).then(Pa):Qa.isContainer?Qa.insertAsChild(this).then(Pa):Pa()}}],[{key:"className",get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:Rc.Color.transparent},isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var Pa=this,Qa=this.tree.treeData;return Qa&&
Qa.asList().find(function(Hb){return Hb.container===Pa})}}}}}],qc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:437,end:2917})}(Rc.Morph);Rc.InteractiveTreeContainer=ub;Rc.InteractiveTreeContainer=ub;Rc.InteractiveTreeContainer=ub;ub=function(Ga){var qc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),
Za=qc.hasOwnProperty("InteractiveTreeData")&&"function"===typeof qc.InteractiveTreeData?qc.InteractiveTreeData:qc.InteractiveTreeData=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(Za,Ga,[{key:"display",value:function(Pa){return[Pa.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(Pa){return Pa.isCollapsed}},{key:"collapse",value:function(Pa,Qa){Pa.isCollapsed=Qa}},{key:"getChildren",value:function(Pa){var Qa=
this;return Pa.isLeaf?null:Pa.children.filter(function(Hb){return Hb&&(Qa.filterActive?Hb.visible:!0)})}},{key:"isLeaf",value:function(Pa){var Qa=this;return!Pa.children||0==Pa.children.filter(function(Hb){return Hb&&(Qa.filterActive?Hb.visible:!0)}).length}},{key:"add",value:function(Pa,Qa,Hb){Qa=void 0===Qa?this.root:Qa;Qa.children||(Qa.children=[]);Hb?Rc.arr.pushAt(Qa.children,Pa,Qa.children.indexOf(Hb)):Qa.children.push(Pa);Qa.isLeaf=!1}},{key:"replace",value:function(Pa,Qa){var Hb=this.parentNode(Pa);
Pa=Hb.children.indexOf(Pa);Hb.children[Pa]=Qa}},{key:"next",value:function(Pa){var Qa=this.parentNode(Pa);return Qa&&Qa.children[Qa.children.indexOf(Pa)+1]}},{key:"isBefore",value:function(Pa,Qa){this.next(Pa)===Qa}},{key:"isAfter",value:function(Pa,Qa){this.next(Qa)===Pa}},{key:"addBefore",value:function(Pa,Qa){this.add(Pa,this.parentNode(Qa),Qa)}},{key:"addAfter",value:function(Pa,Qa){var Hb=this.parentNode(Qa);Qa=Hb.children.indexOf(Qa)+1;this.add(Pa,Hb,Hb.children[Qa])}},{key:"remove",value:function(Pa){var Qa=
this.parentNode(Pa);if(Qa)return Rc.arr.remove(Qa.children,Pa),Qa.children==[]&&(Qa.children=null),Pa}},{key:"filter",value:function(Pa,Qa){Qa=void 0===Qa?1:Qa;var Hb=this,Gb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ad){if(1==ad.nextAddress)return ad.yield(Hb.uncollapseAll(function(Td,Zd){return Zd<Qa+1}),2);Gb=Hb.filterActive;Hb.filterActive=!1;Hb.asListWithIndexAndDepth(!1).reverse().forEach(function(Td){var Zd=Td.node;if(0==Td.depth)return Zd.visible=!0;Zd.visible=Pa(Zd);Zd.visible||
Zd.isCollapsed||!Zd.children.find(function(Ue){return Ue.visible})?Zd.container.opacity=1:(Zd.visible=!0,Zd.container.opacity=.5);return Zd.visible});Hb.filterActive=Gb;ad.jumpToEnd()})}}],[{key:"className",get:function(){return"InteractiveTreeData"}}],qc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},
{start:2926,end:5365})}(Rc.TreeData);Rc.InteractiveTreeData=ub;Rc.InteractiveTreeData=ub;Rc.InteractiveTreeData=ub;ub=function(Ga){var qc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Za=qc.hasOwnProperty("InteractiveTree")&&"function"===typeof qc.InteractiveTree?qc.InteractiveTree:qc.InteractiveTree=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(Za,Ga,[{key:"update",value:function(Pa){var Qa=
this;ta._get(Object.getPrototypeOf(Za.prototype),"update",this).call(this,Pa);this.treeData&&this.relayoutContainers();Pa&&this.embeddedMorphs.forEach(function(Hb){Hb.isContainer&&(Hb.fill=Rc.Color.transparent,Hb.fontFamily=Qa.fontFamily,Hb.fontSize=Qa.fontSize)})}},{key:"onDrop",value:function(Pa){ta._get(Object.getPrototypeOf(Za.prototype),"onDrop",this).call(this,Pa);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(Pa){}},{key:"onDropHoverUpdate",value:function(Pa){}},
{key:"onDropHoverOut",value:function(Pa){}},{key:"onHoverOut",value:function(Pa){var Qa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Hb){ta._get(Object.getPrototypeOf(Za.prototype),"onHoverOut",Qa).call(Qa,Pa);Qa._previewNode&&Qa._previewNode.container.world()&&Qa.treeData.remove(Qa._previewNode);Qa.resetContainerSelection();Qa.update(!0);Hb.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(Pa){var Qa=this,Hb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Gb){if(1==
Gb.nextAddress)return Hb=Qa.treeData.parentNode(Qa._previewNode),Qa.treeData.replace(Qa._previewNode,Pa._data),Qa.treeData.remove(Qa._previewNode),Gb.yield(Qa.whenRendered(),2);Qa.update(!0);Hb.container.onChildAdded(Pa);Gb.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var Pa=this;if(!this._scrollingUp){this._scrollingUp=!0;var Qa=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Hb){if(1==Hb.nextAddress)return Pa._scrollingUp&&0<Pa.scroll.y?Hb.yield(Pa.animate({scroll:Pa.scroll.subXY(0,
30),duration:300,easing:Rc.easings.linear}),3):(Pa._scrollingUp=!1,Hb.jumpTo(0));Qa();Hb.jumpToEnd()})};Qa()}}},{key:"scrollDownSlowly",value:function(){var Pa=this;if(!this._scrollingDown){this._scrollingDown=!0;var Qa=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Hb){if(1==Hb.nextAddress)return Pa._scrollingDown&&Pa.scroll.y<Pa.scrollExtent.y-Pa.height?Hb.yield(Pa.animate({scroll:Pa.scroll.addXY(0,30),duration:300,easing:Rc.easings.linear}),3):(Pa._scrollingDown=!1,Hb.jumpTo(0));
Qa();Hb.jumpToEnd()})};Qa()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(Pa){Pa.isContainer&&(Pa.fill=Rc.Color.transparent)})}},{key:"showDropPreviewFor",value:function(Pa){var Qa=this;Pa=this.localize(Pa.globalBounds().center());var Hb=this.textPositionFromPoint(Pa),Gb=this.treeData.asListWithIndexAndDepth(function(Md){Md=Md.node;return Md!=Qa._previewNode&&Md.container.world()}),
ad=(Gb.find(function(Md){return Md.i-1===Hb.row})||{}).node,Td=ad&&ad.container,Zd=this.ensurePlaceholder(),Ue=!!Zd.container.world(),Fc=Pa.subPt(this.scroll).subPt(this.scrollbarOffset);10>Fc.y?this.scrollUpSlowly():Fc.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!Td){if(Gb.length>Hb.row||Rc.arr.last(this.treeData.root.children)===Zd)return;this.treeData.remove(Zd);this.treeData.add(Zd);this.update(!0)}if(Td){Gb=this.textLayout.boundsFor(this,
Hb);if(4>Math.abs(Gb.top()-Pa.y)){if(this.treeData.isBefore(Zd,ad))return;this.treeData.remove(Zd);this.treeData.addBefore(Zd,ad)}else if(4>Math.abs(Gb.bottom()-Pa.y)&&(ad.isCollapsed||this.treeData.isLeaf(ad))){if(this.treeData.isAfter(Zd,ad))return;this.treeData.remove(Zd);this.treeData.addAfter(Zd,ad)}else{Td.fill=Rc.Color.gray;if(!Ue)return;this.treeData.remove(Zd)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var Pa=Rc.pt(this.width-100,this.document.getLine(0).height);this._previewNode||
(this._previewNode={container:Rc.morph({acceptsDrops:!1,reactsToPointer:!1,fill:Rc.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=Pa;return this._previewNode}},{key:"relayoutContainers",value:function(){var Pa=this;this.charBoundsFromTextPosition({row:0,column:6});this.textLayout.charBoundsOfRow(this,0).map(function(Qa){return Qa.height});this.treeData.asListWithIndexAndDepth().forEach(function(Qa){var Hb=Qa.node;Qa=Qa.i;Hb.container.nativeCursor="grab";
Hb.container.width=Pa.width-25-Hb.container.left;Hb.container.toggleSelected&&Hb.container.toggleSelected(Qa==Pa.selectedIndex)});this.anchors.forEach(function(Qa){return Qa.position=Qa.position})}}],[{key:"className",get:function(){return"InteractiveTree"}}],qc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},
{start:5374,end:10711})}(Rc.Tree);Rc.InteractiveTree=ub;Rc.InteractiveTree=ub;Rc.InteractiveTree=ub;ub=function(Ga){var qc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Za=qc.hasOwnProperty("SceneGraphTree")&&"function"===typeof qc.SceneGraphTree?qc.SceneGraphTree:qc.SceneGraphTree=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(Za,Ga,[{key:"beforePublish",value:function(){this.submorphs=[];
this.reset()}},{key:"selectMorphInTarget",value:function(Pa){var Qa=this.treeData.asList().find(function(Hb){return Hb.container.target===Pa});Qa&&this.selectedNode!=Qa&&this.selectPath(this.treeData.pathOf(Qa))}},{key:"onLoad",value:function(){var Pa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qa){if(1==Qa.nextAddress)return Pa.submorphs=[],Qa.yield(Pa.whenRendered(),2);Pa.get("inspector").makeEditorVisible(!0);Pa.get("inspector").makeEditorVisible(!1);Pa.setTarget($world);Qa.jumpToEnd()})}},
{key:"adjustProportions",value:function(Pa){Pa=(Pa?Pa.state.dragDelta:{y:0}).y;var Qa=this.get("inspector"),Hb=this.get("scene graph resizer"),Gb=this.get("mode selector"),ad=this.get("connections tree");this.height+=Pa;Qa.height-=Pa;ad.height-=Pa;Hb.top=this.bottom;Hb.left=0;Gb.top=Hb.bottom;ad.top=Qa.top=Gb.bottom+5}},{key:"reset",value:function(){var Pa=this;this.treeData=new Rc.InteractiveTreeData({children:[],container:Rc.morph()});this.get("inspector").targetObject={};this.selectedNode=null;
this.anchors.filter(function(Qa){return null==Qa.id}).forEach(function(Qa){return Pa.removeAnchor(Qa)})}},{key:"setTarget",value:function(Pa){this.target=Pa;this.treeData=this.getTreeFromSubmorphHierarchy(Pa);this.uncollapse(this.treeData.root)}},{key:"isNodeOutOfSync",value:function(Pa){var Qa=this;if(Pa===this._previewNode)return!1;if(Pa.container.nameNeedsUpdate)return!0;var Hb=Pa.container.target.submorphs.filter(function(Gb){return!Qa.ignoreMorph(Gb)});return Hb.length!=Pa.children.length||Hb.map(function(Gb){return Gb.name}).join("")!=
Pa.children.map(function(Gb){return Gb.target?Gb.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(Pa){var Qa=this,Hb=Pa.container.target.submorphs.map(function(Ue){return Ue.__scene_graph_target__?Ue.__scene_graph_target__():Ue}).filter(function(Ue){return!Qa.ignoreMorph(Ue)}),Gb=[],ad={},Td;for(Td in Hb){ad.$jscomp$loop$prop$m$2285=Hb[Td];var Zd=Rc.arr.without(Pa.children,this._previewNode).find(function(Ue){return function(Fc){return Fc.container.target.id==Ue.$jscomp$loop$prop$m$2285.id}}(ad));
Gb[Td]=Zd?Zd:this.readMorphHierarchy(ad.$jscomp$loop$prop$m$2285);ad={$jscomp$loop$prop$m$2285:ad.$jscomp$loop$prop$m$2285}}return Gb}},{key:"refresh",value:function(){var Pa=this;if(!this._updating&&!this._dropInProgress){var Qa=!1;Rc.tree.prewalk(this.treeData.root,function(Hb){Pa.isNodeOutOfSync(Hb)&&(Qa=!0,Hb.name=Hb.container.target.name,Hb.container.refresh(),Hb.children=Pa.getNewChildren(Hb))},function(Hb){return Hb.children});this.update(Qa)}}},{key:"ignoreMorph",value:function(Pa){return Pa.isMorph?
Pa.isContainer||Pa.isWindow||Pa.getWindow()||Pa.isEpiMorph||Pa.isHand||["lively.halos"].includes(Pa.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler","UserFlap","Menu"].includes(Pa.constructor.name):!1}},{key:"onDropHoverOut",value:function(Pa){var Qa=Pa.hand.grabbedMorphs[0];Pa=Pa.hand.findDropTarget();if(!(Pa===this||Pa&&Pa.ownerChain().includes(this))&&Qa&&Qa.isContainer)Qa.onDragOutside()}},{key:"onDropHoverIn",value:function(Pa){var Qa=Pa.hand.grabbedMorphs[0];
Qa&&!Qa.isContainer&&($world.halos().forEach(function(Hb){return Hb.remove()}),Qa.remove(),Object.assign(Qa,Pa.hand._grabbedMorphProperties.get(Qa).pointerAndShadow),Qa=this.renderContainerFor(Qa,!1),Pa.hand.grab(Qa),Qa.leftCenter=Rc.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",value:function(Pa){return new Rc.InteractiveTreeData(this.readMorphHierarchy(Pa))}},{key:"readMorphHierarchy",value:function(Pa){var Qa=this;return Rc.tree.mapTree(Pa,function(Hb,Gb){return{name:Hb.name,isCollapsed:!0,
container:Qa.renderContainerFor(Hb),visible:!0,children:Gb}},function(Hb){return Hb.submorphs.filter(function(Gb){return Hb.isWorld?!Qa.ignoreMorph(Gb):!0})})}},{key:"renderContainerFor",value:function(Pa,Qa){Pa=void 0===Pa?Rc.morph({name:"root"}):Pa;Qa=new Rc.MorphContainer({tree:this,fill:void 0===Qa||Qa?Rc.Color.transparent:Rc.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:Pa,opacity:Pa.visible?1:.5});Pa._data?(Qa._data=Pa._data,Pa._data.container=Qa):
Qa._data={name:Pa.name,isCollapsed:!0,container:Qa,children:[]};return Qa}},{key:"collapseAll",value:function(){var Pa=this;this.treeData.asList().forEach(function(Qa){return Qa!=Pa.treeData.root?Qa.isCollapsed=!0:Qa.isCollapsed=!1})}},{key:"filterMorphs",value:function(Pa){var Qa=this,Hb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Gb){if(1==Gb.nextAddress)return Hb=Pa.tokens[0],Qa.treeData.filterActive||(Qa._collapseState=new WeakMap(Qa.treeData.asList().map(function(ad){return[ad,
ad.isCollapsed]}))),Qa.treeData.filterActive=!!Hb,Gb.yield(Qa.treeData.filter(function(ad){var Td=!Hb||ad.container.target.name.includes(Hb);ad.container.highlightTerm(Hb);return Td},3),2);Qa.treeData.filterActive||Qa.treeData.asList().forEach(function(ad){return ad.isCollapsed=Qa._collapseState.has(ad)?Qa._collapseState.get(ad):!0});Qa.refresh();Gb.jumpToEnd()})}}],[{key:"className",get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1}}}}],qc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:10720,end:17193})}(Rc.InteractiveTree);Rc.SceneGraphTree=ub;Rc.SceneGraphTree=ub;Rc.SceneGraphTree=ub;ub=function(Ga){var qc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Za=qc.hasOwnProperty("MorphContainer")&&"function"===typeof qc.MorphContainer?qc.MorphContainer:
qc.MorphContainer=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(Za,Ga,[{key:"refresh",value:function(){var Pa=this,Qa,Hb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Gb){Qa=Pa.target;if(!Qa)return Gb.return();Pa.reactsToPointer=!0;Pa.dropShadow=!1;Pa.submorphs=[Pa.getLabel(),Qa.layout&&Pa.getLayoutControls(),Pa.getConnectionControls()].filter(Boolean).map(function(ad,Td){ad.fitIfNeeded();
ad.left=Hb?Hb.right+5:0;ad.top=2;return Hb=ad});Pa.height=20;Pa.opacity=Qa.visible?1:.5;Gb.jumpToEnd()})}},{key:"getLabel",value:function(){var Pa=this.getSubmorphNamed("name label")||Rc.morph({type:"label",name:"name label",reactsToPointer:!1,padding:Rc.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),Qa=Pa.textString.slice(2,-1);Qa&&Qa==this.target.name||(Pa.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return Pa}},{key:"getIcon",value:function(Pa){return Rc.Icon.textAttribute({Morph:"square",
Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[Pa.constructor.className]||"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var Pa=this.getSubmorphNamed("layout label")||Rc.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:Rc.Rectangle.inset(4,2,4,2),fill:Rc.Color.orange,fontColor:Rc.Color.white});Pa._isControlElement=
!0;Pa.textString!=this.target.layout.name()&&(Pa.value=this.target.layout.name());return Pa}},{key:"onMouseDown",value:function(Pa){var Qa=this,Hb,Gb,ad,Td,Zd,Ue,Fc,Md,fd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ib){if(1==Ib.nextAddress)return ta._get(Object.getPrototypeOf(Za.prototype),"onMouseDown",Qa).call(Qa,Pa),Pa.targetMorph!=Qa.get("connections label")?Ib.jumpTo(0):Ib.yield(Qa.whenRendered(),3);Hb=$jscomp.makeIterator(Qa.world().halos());for(Gb=Hb.next();!Gb.done;Gb=Hb.next())ad=
Gb.value,ad.remove();Td=$jscomp.makeIterator(Qa.world().getSubmorphsByStyleClassName("ConnectionHalo"));for(Gb=Td.next();!Gb.done;Gb=Td.next())Zd=Gb.value,Zd.remove();Qa.owner.animate({opacity:.5,duration:300});Ue=new Rc.ConnectionHalo({target:Qa.target});Ue.openInWorld();Ue.topLeft=Qa.getSubmorphNamed("connections label").globalPosition.addXY(0,-2);Rc.connect(Qa,"position",function(){Ue.topLeft=Qa.getSubmorphNamed("connections label").globalPosition.addXY(0,-2)});Fc=Qa;Md=Qa.owner;fd=Qa.get("side bar");
Rc.once(Ue,"remove",Qa,"toggleConnectionControl",{varMapping:{self:Fc,disconnectAll:nc,disconnect:Kb,connectionHalo:Ue,tree:Md,sideBar:fd},updater:function(fa){Fc.connectionHalo=null;Md.animate({opacity:1,duration:300});Rc.disconnect(fd,"toggle",Ue,"remove");Rc.disconnectAll(Fc);fa(!0)}});Rc.once(Qa,"remove",Ue,"remove");Rc.once(Qa.get("side bar"),"toggle",Ue,"remove");Qa.toggleConnectionControl(!1);Qa.connectionHalo=Ue;Ib.jumpToEnd()})}},{key:"getConnectionControls",value:function(){this.connectionCount=
this.target.attributeConnections?this.target.attributeConnections.filter(function(Hb){return!Hb.targetObj.isHalo}).length:0;var Pa=this.getSubmorphNamed("connections label")||Rc.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:Rc.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:Rc.Color.red,fontColor:Rc.Color.white});Pa._isControlElement=!0;Pa.visible=!this.connectionHalo&&!!this.connectionCount;var Qa=this.connectionCount?this.connectionCount+" connection"+
(1<this.connectionCount?"s":""):"Manage Connections";Pa.textString!=Qa&&(Pa.value=Qa);return Pa}},{key:"highlightTerm",value:function(Pa){var Qa=this.submorphs[0],Hb=Qa.textAndAttributes.slice(0,2),Gb=Qa.textString.slice(1).split(Pa);Qa.textAndAttributes=1===Gb.length?[].concat($jscomp.arrayFromIterable(Hb),[Gb[0]]):[].concat($jscomp.arrayFromIterable(Hb),$jscomp.arrayFromIterable(Rc.arr.flatten(Rc.arr.interpose(Gb.map(function(ad){return[ad,{}]}),[Pa,{fontWeight:"900"}]))))}},{key:"getClassControls",
value:function(){}},{key:"wantsToBeDroppedOn",value:function(Pa){var Qa=ta._get(Object.getPrototypeOf(Za.prototype),"wantsToBeDroppedOn",this).call(this,Pa);if(![Pa].concat($jscomp.arrayFromIterable(Pa.ownerChain())).includes(this.tree))this.onDragOutside();return Qa}},{key:"onGrab",value:function(Pa){var Qa=this,Hb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Gb){if(1==Gb.nextAddress)return Qa.tree._dropInProgress=!0,Hb=Qa.target.globalPosition,ta._get(Object.getPrototypeOf(Za.prototype),
"onGrab",Qa).call(Qa,Pa),Qa._data.globalTargetPosition=Hb,Gb.yield(Qa.whenRendered(),2);if(Qa.tree.fullContainsWorldPoint(Qa.globalPosition))Qa.leftCenter=Rc.pt(-20,0);else Qa.onDragOutside();Qa.tree._dropInProgress=!1;Gb.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=Rc.fun.createQueue("container-hover-queue",function(Pa,Qa){var Hb,Gb,ad;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Td){if(1==Td.nextAddress)return Hb=
Pa.target,Gb=Hb.opacity,ad=Hb.scale,Pa.target.opacity=0,Pa.target.scale=.5,$world.halos().forEach(function(Zd){return Zd.remove()}),$world.firstHand.grab(Pa.target),Pa.target._data=Pa._data,Pa.remove(),Pa.target.position=Rc.pt(0,0),Td.yield(Pa.target.animate({opacity:Gb,scale:ad,duration:200}),2);Qa();Td.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(Pa){var Qa=this.node.children.indexOf(Pa.node||Pa._data)+1;Qa=this.node.children[Qa];Pa.target.remove();Qa?(Qa=this.target.submorphs.indexOf(Qa.container.target),
this.target.addMorphAt(Pa.target,Qa)):this.target.addMorph(Pa.target);Pa._data.globalTargetPosition&&(Pa.target.position=this.target.localize(Pa._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(Pa){}},{key:"toggleConnectionControl",value:function(Pa){this.getSubmorphNamed("connections label").visible=Pa}},{key:"toggleSelected",value:function(Pa){var Qa=this,Hb,Gb,ad;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Td){if(1==Td.nextAddress)return ta._get(Object.getPrototypeOf(Za.prototype),
"toggleSelected",Qa).call(Qa,Pa),Qa._active===Pa?Td.return():(Qa._active=Pa)&&Qa.target&&Qa.target.isMorph&&Qa.world()?Td.yield(Qa.target.whenRendered(),3):Td.jumpTo(0);Qa.get("inspector").targetObject=Qa.target;if(Qa.connectionHalo)return Td.return();Hb=$jscomp.makeIterator(Qa.world().halos());for(Gb=Hb.next();!Gb.done;Gb=Hb.next()){ad=Gb.value;if(ad.target===Qa.target)return Td.return();ad.remove()}Qa.world().showHaloFor(Qa.target);Td.jumpToEnd()})}}],[{key:"className",get:function(){return"MorphContainer"}},
{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(Pa){this.submorphs[0].fontFamily=Pa}},fontColor:{after:["submorphs"],derived:!0,set:function(Pa){this.submorphs[0].fontColor=Pa}},fontSize:{derived:!0,set:function(Pa){this.submorphs[0].fontSize=Pa}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&
this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}}}}}],qc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:17202,end:25985})}(Rc.InteractiveTreeContainer);
Rc.MorphContainer=ub;Rc.MorphContainer=ub;Rc.MorphContainer=ub;var yc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");yc.visualizeConnection=function(Ga,qc,Za,Pa,Qa){Pa=void 0===Pa?{}:Pa;Qa=yc.rect(0).sides.concat(yc.rect(0).corners);Za=Za||new yc.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:yc.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:yc.Color.transparent,nativeCursor:"auto"},end:{fill:yc.Color.orange}}},Pa,{hasFixedPosition:!0}));Za.startPoint.attachTo(Ga,
"rightCenter");qc.isMorph?(Pa=qc.globalBounds().partNameNearest(Qa,Ga.globalPosition),Ga.globalPosition.equals(qc.globalBounds().partNamed(Pa))&&qc.globalBounds().partNameNearest(yc.arr.without(Qa,Pa),Ga.globalPosition),Za.endPoint.attachTo(qc,"leftCenter")):(Qa=Ga.globalBounds().topRight().addPt(yc.pt(100,0)),qc=yc.morph({type:"label",value:qc.toString(),styleClasses:["Tooltip"],padding:yc.rect(8,4)}).openInWorld(Qa),qc.position=Ga.world().bounds().translateForInclusion(qc.bounds()).topLeft(),yc.once(Za,
"remove",qc,"remove"),Za.endPoint.attachTo(qc,"leftCenter"));return Za};yc.startConnecting=function(Ga,qc){Ga.animate({opacity:.8,duration:300});Ga.startPoint.attachTo(qc,"center");Ga.vertices[0].position=yc.pt(2,2)};yc.stopConnecting=function(Ga,qc,Za,Pa){function Qa(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Td){if(1==Td.nextAddress)return Td.yield(Ga.animate({opacity:0,duration:300}),2);Ga.startPoint.clearConnection();Ga.endPoint.clearConnection();Ga.remove();Td.jumpToEnd()})}
Pa=void 0===Pa?"sourceAttrName":Pa;var Hb,Gb,ad;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Td){return 1==Td.nextAddress?(Hb=Ga,Gb=Hb.endPoint,(ad=Gb.connectedMorph)&&"MorphContainer"==ad.constructor.className&&(ad=ad.target),ad?Td.yield(yc.interactiveConnectGivenSourceAndTarget(Za,Pa,ad),2):Td.jumpTo(2)):Td.yield(Qa(),0)})};yc.editConnection=function(Ga){var qc=Ga.connection,Za=Ga.connectionPoint,Pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qa){if(1==Qa.nextAddress)return Pa=
yc.visualizeConnection(Za,qc.targetObj,!1,{borderColor:yc.Color.gray.darker(),endpointStyle:{start:{fill:yc.Color.transparent,nativeCursor:"auto"},end:{fill:yc.Color.gray.darker()}}}),Qa.yield(yc.interactivelyReEvaluateConnection(qc,"Edit Connection",!1),2);Pa.remove();Qa.jumpToEnd()})};yc.Tree=kc;yc.TreeData=hc;yc.Icon=ac;yc.morph=Hd;yc.pt=Qb;yc.Rectangle=ab;yc.rect=Jc;yc.Color=Nc;yc.arr=Xc;yc.connect=Ic;yc.signal=Va;yc.Leash=xb;yc.once=cb;yc.interactivelyReEvaluateConnection=ua;yc.interactiveConnectGivenSource=
I;yc.interactiveConnectGivenSourceAndTarget=T;(function(Ga){var qc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Za=qc.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof qc.ConnectionsTreeData?qc.ConnectionsTreeData:qc.ConnectionsTreeData=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(Za,Ga,[{key:"parseMorphConnections",value:function(Pa){for(var Qa={},Hb=$jscomp.makeIterator(void 0===
Pa.attributeConnections?[]:Pa.attributeConnections),Gb=Hb.next();!Gb.done;Gb=Hb.next())Gb=Gb.value,Gb.targetObj.isHalo||(Qa[Gb.sourceAttrName]=Qa[Gb.sourceAttrName]||[{name:["      New Connection  ",{fontColor:yc.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(Pa,Gb.sourceAttrName),{}]}],yc.arr.pushAt(Qa[Gb.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(Gb)))},0));return{children:Object.entries(Qa).map(function(ad){var Td=$jscomp.makeIterator(ad);
ad=Td.next().value;Td=Td.next().value;return{name:[ad,{fontWeight:"bold"}," ",{},yc.morph({fill:yc.Color.white,opacity:.7,value:""+(Td.length-1),borderRadius:15,fontWeight:"bold",padding:yc.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],children:Td}}).concat([{name:["New Connection  ",{fontColor:yc.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(Pa),{}]}])}}},{key:"renderExistingConnection",value:function(Pa){var Qa=this,Hb=yc.morph({type:"label",fontColor:yc.Color.gray,fontSize:16,
nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(yc.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},Pa.targetMethodName,{}])}),Gb=this.renderDeadPin(),ad=Gb.submorphs[0];yc.connect(Hb,"onHoverIn",function(){Hb.fontColor=yc.Color.orange;Hb._leash=yc.visualizeConnection(ad,Pa.targetObj,Hb._leash);ad.fill=yc.Color.orange;ad.border={color:yc.Color.orange,width:3}});yc.connect(Hb,"onMouseDown",function(Td){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zd){if(1==
Zd.nextAddress)return Td.stop(),Zd.yield(yc.interactivelyReEvaluateConnection(Pa),2);yc.signal(Qa,"refresh");Zd.jumpToEnd()})});yc.connect(Hb,"onHoverOut",function(){Hb.fontColor=yc.Color.gray;ad.fill=yc.Color.gray;ad.border={color:yc.Color.white,width:1};Hb._leash.remove();Hb._leash=void 0});return[Hb,{},"  ",{}].concat($jscomp.arrayFromIterable(yc.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){Pa.disconnect();yc.signal(Qa,"refresh")}})),["  ",{},Gb,{}])}},{key:"renderDeadPin",
value:function(){var Pa=yc.morph({type:"ellipse",fill:yc.Color.gray,extent:yc.pt(10,10),center:yc.pt(8,12),borderWidth:1});return yc.morph({extent:yc.pt(20,20),fill:yc.Color.transparent,reactsToPointer:!1,submorphs:[Pa]})}},{key:"renderPin",value:function(Pa,Qa){var Hb=this,Gb=yc.morph({type:"ellipse",fill:yc.Color.gray.withA(.5),extent:yc.pt(10,10),center:yc.pt(8,12),draggable:!1,borderWidth:1}),ad=new yc.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:yc.Color.gray.darker(),
endpointStyle:{fill:yc.Color.gray.darker()},position:yc.pt(1,1),vertices:[yc.pt(0,0),yc.pt(0,0)],canConnectTo:function(Td){return"MorphContainer"==Td.constructor.className||2>yc.arr.intersect([Td].concat($jscomp.arrayFromIterable(Td.ownerChain())),[Gb].concat($jscomp.arrayFromIterable(Gb.ownerChain()))).length}});Gb.addMorph(ad);yc.connect(ad.endPoint,"onDragStart",function(){yc.startConnecting(ad,Gb)});yc.connect(ad.endPoint,"onDragEnd",function(Td){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zd){if(1==
Zd.nextAddress)return Gb.center=yc.pt(8,12),Zd.yield(yc.stopConnecting(ad,Gb,Pa,Qa),2);yc.signal(Hb,"refresh");Zd.jumpToEnd()})});return yc.morph({extent:yc.pt(20,20),fill:yc.Color.transparent,reactsToPointer:!1,submorphs:[Gb]})}},{key:"display",value:function(Pa){return Pa.name}},{key:"collapse",value:function(Pa,Qa){Pa.isCollapsed=Qa}},{key:"isCollapsed",value:function(Pa){return Pa.isCollapsed}},{key:"isLeaf",value:function(Pa){return!Pa.children}},{key:"getChildren",value:function(Pa){return Pa.children}}],
[{key:"className",get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(Pa){var Qa=new this;Qa.root=Qa.parseMorphConnections(Pa);return Qa}}],qc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3535,end:8087})})(yc.TreeData);ub=function(Ga){var qc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),
Za=qc.hasOwnProperty("ConnectionsTree")&&"function"===typeof qc.ConnectionsTree?qc.ConnectionsTree:qc.ConnectionsTree=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(Za,Ga,[{key:"inspectConnectionsOf",value:function(Pa){if(this.targetMorph=Pa)this.treeData=yc.ConnectionsTreeData.for(Pa),yc.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=yc.ConnectionsTreeData.for(this.targetMorph),
yc.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:"className",get:function(){return"ConnectionsTree"}},{key:"properties",get:function(){return{}}}],qc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8104,end:8657})}(yc.Tree);ub=yc.ConnectionsTree;yc.default=ub}}});