System.register("./__root_module__-7d3cbdeb.js kld-intersections ./index-f2f18556.js ./color-picker-8d65425e.js ./index-c8d23f92.js ./index-950339af.js".split(" "),function(){var Ka,wb,Ab,gc,Kb,Zc,Kc,md,Fc,Bc,Nc,Uc,ce,Zd,pe,Mc,Kd,Jb;return{setters:[function(Dc){Ka=Dc.M;wb=Dc.a;Ab=Dc.C;gc=Dc.d;Kb=Dc.i;Zc=Dc.a9;Kc=Dc.a7;md=Dc.$;Fc=Dc.r;Bc=Dc.c;Nc=Dc.bF;Uc=Dc.ac;ce=Dc.b;Zd=Dc.a8;pe=Dc.V;Mc=Dc.bk;Kd=Dc.bl;Jb=Dc.bj},function(){},function(){},function(){},function(){},function(){}],execute:function(){var Dc=
lively.FreezerRuntime.recorderFor("ColorPicker/index.js");Dc.Morph=Ka;Dc.arr=wb;Dc.Color=Ab;Dc.signal=gc;var nd=function(jd){var jc=lively.FreezerRuntime.recorderFor("ColorPicker/index.js"),kd=jc.hasOwnProperty("ColorPicker")&&"function"===typeof jc.ColorPicker?jc.ColorPicker:jc.ColorPicker=function(vb){vb&&vb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(kd,jd,[{key:"toggleHalos",value:function(vb){this.withAllSubmorphsDo(function(db){return db.halosEnabled=
vb});this.ui.gradientControl.gradientHalo.withAllSubmorphsDo(function(db){return db.halosEnabled=vb})}},{key:"focusOnMorph",value:function(vb,db){var ec=vb&&vb.world();ec&&(ec.halos().forEach(function(Mb){return Mb.remove()}),ec.withTopBarDo(function(Mb){return Mb.setEditMode("Hand",!0)}));this._target=vb;db.isGradient?(this.ui.gradientControl.setGradient(db,this),this.ui.colorTypeSelector.selection=db.type):(this.color=db,this.ui.colorTypeSelector.selection="Solid");this.update()}},{key:"close",
value:function(){this.remove();var vb=this._target&&this._target.world();vb&&vb.withTopBarDo(function(db){return db.setEditMode("Halo",!0)});this.ui.gradientControl.toggle(!1,this)}},{key:"confirm",value:function(){switch(this.colorMode){case "linearGradient":case "radialGradient":Dc.signal(this,"value",this.gradientValue);break;case "Solid":Dc.signal(this,"value",this.color)}}},{key:"switchMode",value:function(vb){var db=["linearGradient","radialGradient"].includes(vb);this.ui.gradientControl.toggle(db,
this);this.colorMode=vb;this.update();this.confirm()}},{key:"enterColor",value:function(vb){this.color=vb;this.update(this.ui.colorEncoder);this.confirm()}},{key:"adjustColor",value:function(vb){this.color=vb;this.update();this.confirm()}},{key:"adjustOpacity",value:function(vb){this.hsb=[].concat($jscomp.arrayFromIterable(this.hsb.slice(0,3)),[vb]);this.update(this.ui.opacityPicker);this.confirm()}},{key:"adjustHue",value:function(vb){this.hsb=[vb].concat($jscomp.arrayFromIterable(this.hsb.slice(1)));
this.update(this.ui.huePicker);this.confirm()}},{key:"adjustShade",value:function(vb){var db=$jscomp.makeIterator(vb);vb=db.next().value;db=db.next().value;this.hsb=[this.hsb[0],db,vb,this.hsb[3]];this.update(this.ui.shadePicker);this.confirm()}},{key:"adjustGradient",value:function(vb){this.confirm()}},{key:"update",value:function(vb){for(var db=[],ec=0;ec<arguments.length;++ec)db[ec-0]=arguments[ec];var Mb=this;Dc.arr.withoutAll(Object.values(this.ui),[].concat($jscomp.arrayFromIterable(db),[this.ui.colorTypeSelector])).forEach(function(Hb){return Hb.update(Mb)})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPicker"}},{key:"properties",get:function(){return{colorMode:{},hsb:{initialize:function(){this.hsb=[].concat($jscomp.arrayFromIterable(Dc.Color.red.toHSB()),[1])}},gradientValue:{derived:!0,get:function(){return this.ui.gradientControl.gradientValue},set:function(vb){this.ui.gradientControl.gradientValue=vb}},color:{derived:!0,get:function(){return Dc.Color.hsb.apply(Dc.Color,$jscomp.arrayFromIterable(this.hsb.slice(0,3))).withA(this.hsb[3])},
set:function(vb){this.hsb=[].concat($jscomp.arrayFromIterable(vb.toHSB()),[vb.a])}},solidOnly:{derived:!0,set:function(vb){var db=this.ui.colorTypeSelector;vb&&(db.selection="Solid");db.visible=!vb}},ui:{derived:!0,get:function(){return{colorTypeSelector:this.getSubmorphNamed("color type selector"),colorEncoder:this.getSubmorphNamed("color encoder"),opacityPicker:this.getSubmorphNamed("opacity slider"),shadePicker:this.getSubmorphNamed("field picker"),huePicker:this.getSubmorphNamed("hue picker"),
gradientControl:this.getSubmorphNamed("gradient control")}}}}}}],jc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ColorPicker",version:"0.1.1-66"}}},{start:219,end:4117})}(Dc.Morph);nd=Dc.ColorPicker;Dc.default=nd;var Hc=lively.FreezerRuntime.recorderFor("GradientControl/index.js");Hc.Morph=Ka;Hc.LinearGradient=Zc;Hc.RadialGradient=
Kc;Hc.Color=Ab;Hc.rect=md;Hc.resource=Fc;Hc.connect=Bc;Hc.noUpdate=Nc;Hc.signal=gc;Hc.num=Uc;Hc.arr=wb;nd=function(jd){var jc=lively.FreezerRuntime.recorderFor("GradientControl/index.js"),kd=jc.hasOwnProperty("GradientControl")&&"function"===typeof jc.GradientControl?jc.GradientControl:jc.GradientControl=function(vb){vb&&vb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(kd,jd,[{key:"onKeyDown",value:function(vb){Kb._get(Object.getPrototypeOf(kd.prototype),
"onKeyDown",this).call(this,vb);"Delete"==vb.keyCombo&&this.removeStop(this.selectedStopControl)}},{key:"onMouseDown",value:function(vb){Kb._get(Object.getPrototypeOf(kd.prototype),"onMouseDown",this).call(this,vb);"gradient preview"==vb.targetMorph.name&&(vb=vb.positionIn(vb.targetMorph).x/vb.targetMorph.width,this.addStopAt(vb))}},{key:"removeStop",value:function(vb){3>this.gradientValue.stops.length||(Hc.arr.remove(this.gradientValue.stops,vb.stop),this.refresh(),this.confirm())}},{key:"addStopAt",
value:function(vb){var db=[].concat($jscomp.arrayFromIterable(this.gradientValue.stops)),ec=$jscomp.makeIterator(Hc.arr.sortBy(Hc.arr.sortBy(db,function(Hb){return Math.abs(Hb.offset-vb)}).slice(0,2),function(Hb){return Hb.offset})),Mb=ec.next().value;ec=ec.next().value;db.push({color:Mb.color.interpolate((vb-Mb.offset)/(ec.offset-Mb.offset),ec.color),offset:vb});this.gradientValue.stops=Hc.arr.sortBy(db,function(Hb){return Hb.offset});this.refresh();this.confirm()}},{key:"toggle",value:function(vb,
db){(this.isLayoutable=this.visible=vb)?this.gradientHalo.openInWorld():this.gradientHalo.remove();vb||this.reset()}},{key:"reset",value:function(){this.gradientValue=null;this.getSubmorphsByStyleClassName("ColorStop").forEach(function(vb){return vb.remove()});this.gradientHalo.reset()}},{key:"initLinearGradient",value:function(vb){this.gradientValue=vb.isGradient?new Hc.LinearGradient({stops:vb.stops}):new Hc.LinearGradient({stops:[{color:vb,offset:0},{color:Hc.Color.transparent,offset:1}]})}},{key:"initRadialGradient",
value:function(vb,db){db=db.innerBounds();this.gradientValue=vb.isGradient?new Hc.RadialGradient({bounds:db,stops:vb.stops}):new Hc.RadialGradient({bounds:db,stops:[{color:vb,offset:0},{color:Hc.Color.transparent,offset:1}]})}},{key:"setGradient",value:function(vb,db){this.gradientValue=vb;this.gradientHalo.initFromPicker(db)}},{key:"update",value:function(vb){if(!this.isDisabled){var db=this.selectedStopControl;this.gradientValue&&this.gradientValue.type==vb.colorMode||("linearGradient"==vb.colorMode&&
this.initLinearGradient(this.gradientValue||vb.color),"radialGradient"==vb.colorMode&&this.initRadialGradient(this.gradientValue||vb.color,vb._target),this.gradientHalo.initFromPicker(vb),this.gradientHalo.confirm());if(db){var ec=this.gradientValue.stops.find(function(Mb){return db.stop==Mb});ec&&(ec.color=vb.color);this.confirm()}this.refresh()}}},{key:"getPositionFor",value:function(vb){var db=this.getSubmorphNamed("gradient preview").bounds().topEdge();return db.start.interpolate(vb.offset,db.end).subXY(0,
5)}},{key:"confirm",value:function(){Hc.signal(this,"gradientChanged",this.gradientValue)}},{key:"refresh",value:function(){if(this.gradientValue){var vb=this.getSubmorphNamed("gradient"),db=this.gradientValue.stops.map(function(ec){return Object.assign({},ec)});vb.fill=new Hc.LinearGradient({vector:Hc.rect(0),stops:db});this.updateStopControls(this.gradientValue.stops);this.gradientHalo.refresh(this)}}},{key:"moveStop",value:function(vb){var db=$jscomp.makeIterator(vb);vb=db.next().value;db=db.next().value/
this.getSubmorphNamed("gradient preview").width;this.adjustStop(vb,db)}},{key:"adjustStop",value:function(vb,db){vb.offset=Hc.num.clamp(vb.offset+db,0,1);this.refresh();this.confirm()}},{key:"placeStop",value:function(vb){this.addMorph(vb)}},{key:"getControlFor",value:function(vb,db){db=void 0===db?this:db;var ec;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Mb){if(1==Mb.nextAddress)return Mb.yield(Hc.resource("part://SystemWidgets/gradient editor/color stop").read(),2);ec=Mb.yieldResult;
ec.withAllSubmorphsDo(function(Hb){return Hb.halosEnabled=!1});db.placeStop(ec);Hc.connect(ec,"select",db,"selectStop");Hc.connect(ec,"moveColorStop",db,"moveStop");return Mb.return(ec.forStop(vb))})}},{key:"selectStop",value:function(vb){this.deselectAllStopsExcept(vb,this);this.deselectAllStopsExcept(vb,this.gradientHalo);Hc.signal(this,"switchColor",vb.stop.color)}},{key:"deselectAllStopsExcept",value:function(vb,db){Hc.noUpdate(function(){db.getSubmorphsByStyleClassName("ColorStop").forEach(function(ec){ec.stop!=
vb.stop?ec.deselect():ec.select()})})}},{key:"updateStopControls",value:function(vb,db){db=void 0===db?this:db;var ec=this,Mb,Hb,pc,Ma,Ib;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pb){switch(pb.nextAddress){case 1:if(db._active)return pb.return();db._active=!0;Mb=db.getSubmorphsByStyleClassName("ColorStop");Hb=$jscomp.makeIterator(vb);pc=Hb.next();case 2:if(pc.done){pb.jumpTo(4);break}Ma=pc.value;if(Ib=Mb.shift()){Ib.forStop(Ma);pb.jumpTo(3);break}return pb.yield(ec.getControlFor(Ma,
db),3);case 3:pc=Hb.next();pb.jumpTo(2);break;case 4:Hc.arr.invoke(Mb,"remove"),db.getSubmorphsByStyleClassName("ColorStop").forEach(function(Ub){Ub.positionIn(db)}),db._active=!1,pb.jumpToEnd()}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GradientControl"}},{key:"properties",get:function(){return{gradientValue:{},gradientHalo:{},isDisabled:{get:function(){return!this.visible}},stopControls:{derived:!0,get:function(){return this.getSubmorphsByStyleClassName("ColorStop")}},selectedStopControl:{derived:!0,
get:function(){return this.stopControls.find(function(vb){return vb.isSelected})}}}}}],jc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"GradientControl",version:"0.1.1-93"}}},{start:317,end:6735})}(Hc.Morph);nd=Hc.GradientControl;Hc.default=nd;var wd=lively.FreezerRuntime.recorderFor("GradientHalo/index.js");wd.Morph=Ka;wd.arr=
wb;wd.resource=Fc;wd.connect=Bc;wd.signal=gc;wd.pt=ce;wd.RadialGradient=Kc;wd.LinearGradient=Zc;wd.Point=Zd;nd=function(jd){var jc=lively.FreezerRuntime.recorderFor("GradientHalo/index.js"),kd=jc.hasOwnProperty("GradientHalo")&&"function"===typeof jc.GradientHalo?jc.GradientHalo:jc.GradientHalo=function(vb){vb&&vb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(kd,jd,[{key:"reset",value:function(){this.getSubmorphsByStyleClassName("ColorStop").forEach(function(vb){return vb.remove()})}},
{key:"initFromPicker",value:function(vb){var db=vb.gradientValue;this.picker=vb;"linearGradient"==db.type&&this.initFromLinearGradient(this.targetMorph,db);"radialGradient"==db.type&&this.initFromRadialGradient(this.targetMorph,db);this.alignWithTarget()}},{key:"initFromLinearGradient",value:function(vb,db){vb=vb.innerBounds();db=db.vectorAsAngle();var ec=vb.center(),Mb=Math.max(vb.height,vb.width),Hb=ec.addPt(wd.Point.polar(Mb,db));db=ec.subPt(wd.Point.polar(Mb,db));ec=$jscomp.makeIterator(vb.lineIntersection(db.lineTo(Hb)));
db=ec.next().value;var pc=ec.next().value;ec=wd.arr.min([db,pc],function(Ma){return Ma.dist(Hb)});this.originPoint=ec==db?pc:db;this.directionPoint=ec;this.orthogonalDist=wd.arr.min(vb.edges(),function(Ma){return Ma.distanceFromLine(pc)}).length()/2;this.alignWithTarget()}},{key:"initFromRadialGradient",value:function(vb,db){vb=vb.innerBounds().relativeToAbsPoint(db.focus);var ec=db.bounds;db=ec.height;ec=ec.width;this.originPoint=vb;this.directionPoint=vb.addXY(0,db/2);this.orthogonalDist=ec/2;this.alignWithTarget()}},
{key:"alignWithTarget",value:function(){var vb=this.ui,db=vb.directionHandle,ec=vb.orthogonalHandle,Mb=vb.colorStopWrapper;vb.originHandle.center=wd.pt(0);db.center=wd.pt(this.width,0);this.width=this.originPoint.dist(this.directionPoint);Mb.width=this.width;db.center=wd.pt(this.width,0);ec.center=wd.pt(0,this.orthogonalDist);0<this.orthogonalDist?(Mb.tilted=1,Mb.position=wd.pt(this.width/2,this.height/4-1)):(Mb.tilted=0,Mb.position=wd.pt(this.width/2,-this.height/4+1));this.globalPosition=this.targetMorph.worldPoint(this.originPoint).subPt($world.scroll);
this.rotation=this.angle}},{key:"relayout",value:function(){this.alignWithTarget()}},{key:"confirm",value:function(){var vb=this.picker.ui.gradientControl;"linearGradient"==vb.gradientValue.type&&(vb.gradientValue.vector=this.angle);if("radialGradient"==vb.gradientValue.type){var db=vb.gradientValue,ec=2*Math.abs(this.orthogonalDist),Mb=2*this.originPoint.dist(this.directionPoint);db.focus=this.originPoint.scaleByPt(this.targetMorph.extent.inverted());db.bounds=wd.pt(0,0).extent(wd.pt(ec,Mb));db.angle=
this.angle}vb.confirm();this.refresh(vb,this.targetMorph);this.alignWithTarget()}},{key:"normalize",value:function(vb){return this.getGlobalTransform().transformDirection(vb)}},{key:"moveOriginHandle",value:function(vb){vb=this.normalize(vb.state.dragDelta);this.originPoint=this.originPoint.addPt(vb);this.confirm()}},{key:"moveDirectionHandle",value:function(vb){vb=this.normalize(vb.state.dragDelta);this.directionPoint=this.directionPoint.addPt(vb);this.confirm()}},{key:"moveOrthogonalHandle",value:function(vb){vb=
this.normalize(vb.state.dragDelta);this.orthogonalDist-=vb.dotProduct(wd.Point.polar(1,this.angle-Math.PI/2));this.confirm()}},{key:"moveStop",value:function(vb){var db=$jscomp.makeIterator(vb);vb=db.next().value;db=db.next().value;this.picker.ui.gradientControl.adjustStop(vb,db/this.getSubmorphNamed("color stop wrapper").width)}},{key:"refresh",value:function(vb,db){db=vb.gradientValue;this.alignWithTarget();vb.updateStopControls(db.stops,this)}},{key:"placeStop",value:function(vb){this.get("color stop wrapper").addMorph(vb)}},
{key:"selectStop",value:function(vb){this.picker.ui.gradientControl.selectStop(vb)}},{key:"getPositionFor",value:function(vb){var db=this.getSubmorphNamed("color stop wrapper"),ec=db.innerBounds().bottomEdge();return ec.start.interpolate(vb.offset,ec.end).subXY(0,5).subPt(db.origin)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GradientHalo"}},{key:"properties",get:function(){return{picker:{},targetMorph:{derived:!0,get:function(){return this.picker._target}},ui:{derived:!0,get:function(){return{originHandle:this.getSubmorphNamed("origin handle"),
directionHandle:this.getSubmorphNamed("direction handle"),orthogonalHandle:this.getSubmorphNamed("orthogonal handle"),colorStopWrapper:this.getSubmorphNamed("color stop wrapper")}}},angle:{derived:!0,get:function(){return this.directionPoint.subPt(this.originPoint).theta()}}}}}],jc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"GradientHalo",
version:"0.1.1-141"}}},{start:300,end:5921})}(wd.Morph);nd=wd.GradientHalo;wd.default=nd;var Qd=lively.FreezerRuntime.recorderFor("OpacityPicker/index.js");Qd.Morph=Ka;Qd.pt=ce;Qd.Color=Ab;Qd.LinearGradient=Zc;Qd.signal=gc;Qd.num=Uc;nd=function(jd){var jc=lively.FreezerRuntime.recorderFor("OpacityPicker/index.js"),kd=jc.hasOwnProperty("OpacityPicker")&&"function"===typeof jc.OpacityPicker?jc.OpacityPicker:jc.OpacityPicker=function(vb){vb&&vb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Kb(kd,jd,[{key:"confirm",value:function(){Qd.signal(this,"opacityChanged",this.alpha)}},{key:"onMouseDown",value:function(vb){var db=this.get("slider").width;this.sliderPosition=Qd.pt(0,vb.positionIn(this).y-db/2);this.confirm()}},{key:"onDrag",value:function(vb){var db=this.get("slider").width;this.sliderPosition=Qd.pt(0,vb.positionIn(this).y-db/2);this.confirm()}},{key:"update",value:function(vb){this.alpha=vb.color.a;this.getSubmorphNamed("opacity gradient").fill=new Qd.LinearGradient({stops:[{offset:0,
color:vb.color.withA(0)},{offset:1,color:vb.color.withA(1)}]});this.refresh()}},{key:"refresh",value:function(){this.get("slider").center=this.sliderPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OpacityPicker"}},{key:"properties",get:function(){return{sliderPosition:{derived:!0,after:["submorphs"],get:function(){return Qd.pt(this.width/2,5+(this.height-10)*this.alpha)},set:function(vb){this.alpha=Qd.num.clamp(vb.y/(this.height-10),0,1);this.refresh()}}}}}],jc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"OpacityPicker",version:"0.1.1-26"}}},{start:221,end:1464})}(Qd.Morph);nd=Qd.OpacityPicker;Qd.default=nd;var Eb=lively.FreezerRuntime.recorderFor("ColorEncoder/index.js");Eb.Morph=Ka;Eb.Color=Ab;Eb.signal=gc;Eb.noUpdate=Nc;Eb.num=Uc;nd=function(jd){var jc=lively.FreezerRuntime.recorderFor("ColorEncoder/index.js"),kd=jc.hasOwnProperty("ColorEncoder")&&
"function"===typeof jc.ColorEncoder?jc.ColorEncoder:jc.ColorEncoder=function(vb){vb&&vb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(kd,jd,[{key:"update",value:function(vb){this.currentColor=vb.hsb;this.refresh()}},{key:"refresh",value:function(){var vb=this,db=this.currentColor;Eb.noUpdate(function(){({Hex:function(){return vb.updateHex(db)},RGB:function(){return vb.updateRGB(db)},HSL:function(){return vb.updateHSL(db)},
HSB:function(){return vb.updateHSB(db)},CSS:function(){return vb.updateCSS(db)}})[vb.encodingMode]()})}},{key:"updateHex",value:function(vb){vb=Eb.Color.hsb.apply(Eb.Color,$jscomp.arrayFromIterable(vb)).withA(Eb.num.roundTo(vb[3],.01));var db=this.getSubmorphNamed("hex input"),ec=this.getSubmorphNamed("hex opacity control");db.input=vb.toHexString().toUpperCase();ec.number=vb.a}},{key:"updateRGB",value:function(vb){var db=this.getSubmorphNamed("first value"),ec=this.getSubmorphNamed("second value"),
Mb=this.getSubmorphNamed("third value"),Hb=this.getSubmorphNamed("opacity control"),pc=$jscomp.makeIterator(Eb.Color.hsb.apply(Eb.Color,$jscomp.arrayFromIterable(vb)).toTuple()),Ma=pc.next().value,Ib=pc.next().value;pc=pc.next().value;vb=vb[3];db.number=255*Ma;ec.number=255*Ib;Mb.number=255*pc;Hb.number=vb}},{key:"updateHSL",value:function(vb,db){db=void 0===db?!0:db;var ec=this.getSubmorphNamed("first value"),Mb=this.getSubmorphNamed("second value"),Hb=this.getSubmorphNamed("third value"),pc=this.getSubmorphNamed("opacity control"),
Ma=$jscomp.makeIterator(vb),Ib=Ma.next().value,pb=Ma.next().value;Ma=Ma.next().value;Hb.number=db?1-Ma:Ma;ec.number=Ib;Mb.number=pb;pc.number=vb[3]}},{key:"updateHSB",value:function(vb){this.updateHSL(vb,!1)}},{key:"updateCSS",value:function(vb){var db=this.getSubmorphNamed("css input");vb=Eb.Color.hsb.apply(Eb.Color,$jscomp.arrayFromIterable(vb)).withA(Eb.num.roundTo(vb[3],.01));db.input=vb.toCSSString()}},{key:"confirm",value:function(){var vb=this;({Hex:function(){return vb.confirmHex()},RGB:function(){return vb.confirmRGB()},
HSL:function(){return vb.confirmHSL()},HSB:function(){return vb.confirmHSB()},CSS:function(){return vb.confirmCSS()}})[this.encodingMode]()}},{key:"confirmHex",value:function(){var vb=this.getSubmorphNamed("hex input"),db=this.getSubmorphNamed("hex opacity control");vb=Eb.Color.rgbHex(vb.input).withA(db.number);this.currentColor=[].concat($jscomp.arrayFromIterable(vb.toHSB()),[vb.a]);Eb.signal(this,"colorEntered",vb)}},{key:"confirmRGB",value:function(){var vb=this.getSubmorphNamed("first value"),
db=this.getSubmorphNamed("second value"),ec=this.getSubmorphNamed("third value"),Mb=this.getSubmorphNamed("opacity control");vb=Eb.Color.rgba(vb.number,db.number,ec.number,Mb.number);this.currentColor=[].concat($jscomp.arrayFromIterable(vb.toHSB()),[vb.a]);Eb.signal(this,"colorEntered",vb)}},{key:"confirmHSL",value:function(){var vb=this.getSubmorphNamed("first value"),db=this.getSubmorphNamed("second value"),ec=this.getSubmorphNamed("third value"),Mb=this.getSubmorphNamed("opacity control");vb=Eb.Color.hsb(vb.number,
db.number,1-ec.number).withA(Mb.number);this.currentColor=[].concat($jscomp.arrayFromIterable(vb.toHSB()),[vb.a]);Eb.signal(this,"colorEntered",vb)}},{key:"confirmHSB",value:function(){var vb=this.getSubmorphNamed("first value"),db=this.getSubmorphNamed("second value"),ec=this.getSubmorphNamed("third value"),Mb=this.getSubmorphNamed("opacity control");vb=Eb.Color.hsb(vb.number,db.number,ec.number).withA(Mb.number);this.currentColor=[].concat($jscomp.arrayFromIterable(vb.toHSB()),[vb.a]);Eb.signal(this,
"colorEntered",vb)}},{key:"confirmCSS",value:function(){var vb=this.getSubmorphNamed("css input");vb=Eb.Color.fromString(vb.input);this.currentColor=[].concat($jscomp.arrayFromIterable(vb.toHSB()),[vb.a]);Eb.signal(this,"colorEntered",vb)}},{key:"selectEncoding",value:function(vb){this.encodingMode=vb;this.submorphs.map(function(ec){return ec.visible=ec.isLayoutable=!1});var db=this.getSubmorphNamed({Hex:"hex encoding",RGB:"3 val encoding",HSL:"3 val encoding",HSB:"3 val encoding",CSS:"css encoding"}[vb]);
db.visible=db.isLayoutable=!0;"RGB"==vb&&[db.getSubmorphNamed("first value"),db.getSubmorphNamed("second value"),db.getSubmorphNamed("third value")].forEach(function(ec){Object.assign(ec,{min:0,max:255,scaleFactor:1})});["HSL","HSB"].includes(vb)&&(Object.assign(db.getSubmorphNamed("first value"),{min:0,max:360,scaleFactor:1}),[db.getSubmorphNamed("second value"),db.getSubmorphNamed("third value")].forEach(function(ec){Object.assign(ec,{min:0,max:1,scaleFactor:100})}));this.refresh()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ColorEncoder"}},{key:"properties",get:function(){return{encodingMode:{type:"Enum",values:["Hex","RGB","HSL","HSB","CSS"]},currentColor:{defaultValue:Eb.Color.white}}}}],jc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ColorEncoder",version:"0.1.1-43"}}},{start:211,end:5572})}(Eb.Morph);nd=Eb.ColorEncoder;Eb.default=
nd;var ic=lively.FreezerRuntime.recorderFor("ColorPaletteView/index.js");ic.HTMLMorph=pe;ic.arr=wb;ic.materialDesignColors=Mc;ic.webSafeColors=Kd;ic.flatDesignColors=Jb;ic.Color=Ab;ic.signal=gc;nd=function(jd){var jc=lively.FreezerRuntime.recorderFor("ColorPaletteView/index.js"),kd=jc.hasOwnProperty("ColorPaletteView")&&"function"===typeof jc.ColorPaletteView?jc.ColorPaletteView:jc.ColorPaletteView=function(vb){vb&&vb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Kb(kd,jd,[{key:"test",value:function(){this.showPalette(ic.materialDesignColors.map(function(vb){return ic.Color.rgbHex(vb)}))}},{key:"selectPalette",value:function(vb){var db={"Flat Design":ic.flatDesignColors,Material:ic.materialDesignColors,"Web Safe":ic.webSafeColors};db[vb]&&this.showPalette(db[vb].map(function(ec){return ic.Color.rgbHex(ec)}))}},{key:"onMouseDown",value:function(vb){Kb._get(Object.getPrototypeOf(kd.prototype),"onMouseDown",this).call(this,vb);(vb=vb.domEvt.target.dataset.color)&&
ic.signal(this,"colorSelected",ic.Color.fromString(vb))}},{key:"showPalette",value:function(vb){this.html='<div class="palette-container">\n      '+vb.map(function(db){return'<div class="color-cell" data-color="'+db+'" style="background: '+db+'"></div>'}).join("\n")+"\n    </div>"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPaletteView"}}],jc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ColorPaletteView",version:"0.1.1-14"}}},{start:260,end:1164})}(ic.HTMLMorph);nd=ic.ColorPaletteView;ic.default=nd}}});