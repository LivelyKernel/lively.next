System.register(["./__root_module__-f9290433.js","./index-9e4ab300.js","./color-picker-e9433ddc.js"],function(){var sa,db,Eb,Vb,Wb,wd,Ic,Ad,Jc,Mc,bd,ed,Od,qd,Xc,Ra,wb,mc,dc,Rc,Tc,zc,Fc,Jb,Ac,Bc,fd,Qb;return{setters:[function(xb){sa=xb.ar;db=xb.s;Eb=xb.a5;Vb=xb.aT;Wb=xb.a4;wd=xb.a7;Ic=xb.a8;Ad=xb.az;Jc=xb.ai;Mc=xb.al;bd=xb.ag;ed=xb.am;Od=xb.a1;qd=xb.$;Xc=xb.C;Ra=xb.ao;wb=xb.as;mc=xb.bT;dc=xb.bq;Rc=xb.aa;Tc=xb.aq;zc=xb.bf;Fc=xb.bp;Jb=xb.bn;Ac=xb.bU},function(xb){Bc=xb.N;fd=xb.I},function(xb){Qb=
xb.a}],execute:function(){var xb=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js");xb.fun=sa;xb.string=db;xb.obj=Eb;xb.properties=Vb;xb.arr=Wb;xb.Text=wd;xb.config=Ic;xb.HorizontalLayout=Ad;xb.VerticalLayout=Jc;xb.morph=Mc;xb.Morph=bd;xb.Icon=ed;xb.pt=Od;xb.Rectangle=qd;xb.Color=Xc;xb.connect=Ra;xb.once=wb;xb.noUpdate=mc;xb.ColorPicker=Qb;xb.DropDownList=dc;xb.loadObjectFromPartsbinFolder=Rc;xb.cachedControls=new WeakMap;var eb=function(yb){var Zb=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js"),
Sb=Zb.hasOwnProperty("RichTextControl")&&"function"===typeof Zb.RichTextControl?Zb.RichTextControl:Zb.RichTextControl=function($a){$a&&$a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tc(Sb,yb,[{key:"toggleButton",value:function($a,bb){var Kb=this.ui.fontSelection;bb?($a.fontColor=xb.Color.white,$a.fill=this.toggleColor):($a.fontColor=Kb.fontColor,$a.fill=Kb.fill)}},{key:"reset",value:function(){var $a=this.ui.fontSelection;$a.items=
xb.RichTextControl.basicFontItems();$a.selection=$a.items[0].value;xb.connect(this.target,"selectionChange",this,"update")}},{key:"alignAtTarget",value:function($a){$a=void 0===$a?!!this.world():$a;var bb=this.target,Kb=bb.world()||$world,wc=this.globalBounds();bb=(bb.selection.isEmpty()?bb.globalBounds():bb.getGlobalTransform().transformRectToRect(bb.selectionBounds().translatedBy(bb.scroll.negated()))).bottomCenter().subPt(wc.topCenter());Kb=Kb.visibleBounds().translateForInclusion(wc.translatedBy(bb)).topLeft().subPt(wc.topLeft());
Kb=this.position.addPt(Kb);$a?this.animate({duration:300,position:Kb}):this.position=Kb}},{key:"removeFocus",value:function(){this.autoRemove&&this.target&&(this.remove(),this.target=null)}},{key:"focusOn",value:function($a,bb){bb=void 0===bb?!0:bb;var Kb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wc){if(1==wc.nextAddress)return Kb.target=$a,Kb.update(),wc.yield(Kb.whenRendered(),2);Kb.ui.fontSizeField.relayout();bb&&Kb.alignAtTarget();wc.jumpToEnd()})}},{key:"update",value:function(){var $a=
this,bb=this.target,Kb=this.updateSpec,wc=bb.selection;wc=wc?wc.isEmpty()?bb.textAttributeAt(wc.start):bb.getStyleInRange(wc):{};var fc=this.managedProps,bc=xb.obj.select(bb,fc);bb=$jscomp.makeIterator(Object.entries(xb.obj.select(wc||{},fc)));for(wc=bb.next();!wc.done;wc=bb.next())fc=$jscomp.makeIterator(wc.value),wc=fc.next().value,fc=fc.next().value,"undefined"!==typeof fc&&(bc[wc]=fc);xb.noUpdate(function(){for(var Tb=$jscomp.makeIterator(Object.entries($a.ui)),I=Tb.next();!I.done;I=Tb.next()){var T=
$jscomp.makeIterator(I.value);I=T.next().value;T=T.next().value;if(Kb[I])Kb[I](bc,T)}})}},{key:"relayout",value:function(){}},{key:"changeAttributeInSelectionOrMorph",value:function($a,bb){var Kb=this.target,wc=Kb.selection;Kb.isLabel||wc.isEmpty()?Kb[$a]="function"===typeof bb?bb(Kb[$a]):bb:(Kb.undoManager.group(),Kb.changeStyleProperty($a,function(fc){return"function"===typeof bb?bb(fc):bb}),Kb.undoManager.group())}},{key:"changeFont",value:function($a){var bb=this,Kb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wc){if(1==
wc.nextAddress)return bb._last=$a,(Kb="custom..."===$a)?wc.yield($world.prompt("Enter font family name",{requester:bb.target,historyId:"lively.morphic-rich-text-font-names",useLastInput:!0}),3):wc.jumpTo(2);if(2!=wc.nextAddress&&($a=wc.yieldResult,!$a))return wc.return();bb.changeAttributeInSelectionOrMorph("fontFamily",$a);wc.jumpToEnd()})}},{key:"setPadding",value:function($a){this.target.padding=xb.Rectangle.inset($a)}},{key:"setPaddingTop",value:function($a){var bb=this.target.padding;this.target.padding=
xb.Rectangle.inset(bb.left(),$a,bb.right(),bb.bottom())}},{key:"setPaddingLeft",value:function($a){var bb=this.target.padding;this.target.padding=xb.Rectangle.inset($a,bb.top(),bb.right(),bb.bottom())}},{key:"setPaddingRight",value:function($a){var bb=this.target.padding;this.target.padding=xb.Rectangle.inset(bb.left(),bb.top(),$a,bb.bottom())}},{key:"setPaddingBottom",value:function($a){var bb=this.target.padding;this.target.padding=xb.Rectangle.inset(bb.left(),bb.top(),bb.right(),$a)}},{key:"setLineWrapping",
value:function($a){this.target.lineWrapping=$a}},{key:"changeFontWeight",value:function($a){this.changeAttributeInSelectionOrMorph("fontWeight",$a)}},{key:"changeTextAlign",value:function($a){this.changeAttributeInSelectionOrMorph("textAlign",$a)}},{key:"changeFontColor",value:function($a){this.changeAttributeInSelectionOrMorph("fontColor",$a)}},{key:"changeFontSize",value:function($a){this.changeAttributeInSelectionOrMorph("fontSize",$a)}},{key:"changeFixedWidth",value:function($a){this.target.fixedWidth=
$a}},{key:"changeFixedHeight",value:function($a){this.target.fixedHeight=$a}},{key:"changeLink",value:function(){var $a=this,bb,Kb,wc,fc,bc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Tb){if(1==Tb.nextAddress)return bb=$a.target,Kb=bb.selection,wc=bb.getStyleInRange(Kb),fc=wc.link,Tb.yield($a.world().prompt("Set link",{input:fc||"https://"}),2);bc=Tb.yieldResult;bb.undoManager.group();bb.setStyleInRange({link:bc||void 0},Kb);bb.undoManager.group();$a.autoRemove&&$a.remove();Tb.jumpToEnd()})}},
{key:"toggleUnderline",value:function(){this.changeAttributeInSelectionOrMorph("textDecoration",function($a){return"underline"===$a?"none":"underline"})}},{key:"toggleItalic",value:function(){this.changeAttributeInSelectionOrMorph("fontStyle",function($a){return"italic"===$a?"normal":"italic"})}},{key:"toggleBold",value:function(){this.changeAttributeInSelectionOrMorph("fontWeight",function($a){return"bold"===$a||"700"===$a?"normal":"bold"})}},{key:"copyStyle",value:function(){var $a=this,bb=this.target,
Kb=this.ui.applyStyleButton;bb=bb.selection.isEmpty()?bb.defaultTextStyle:bb.getStyleInRange(bb.selection);var wc=JSON.stringify(bb,null,2);this.constructor.copiedStyle=bb;Kb.tooltip="paste style\n"+wc;this.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/plain",data:wc},{type:"application/morphic-text-style",styleString:wc}]).then(function(){return $a.setStatusMessage("Copied style\n"+wc)}).catch(function(fc){return $a.showError(fc)})}},{key:"pasteStyle",value:function(){var $a=this,bb=this.target,
Kb=this.constructor.copiedStyle;bb.selection.isEmpty()?Object.assign(bb,Kb):bb.selections.forEach(function(wc){return bb.addTextAttribute($a.constructor.copiedStyle,wc)});this.update()}},{key:"clearStyle",value:function(){var $a=this.target;$a.selections.forEach(function(bb){return $a.resetStyleInRange(bb)});this.update()}},{key:"configureRichTextOptions",value:function(){this.getSubmorphNamed("config panel")&&this.getSubmorphNamed("config panel").remove();var $a=this.defaultSpec,bb=this.uiSpec;$a=
this.addMorph({name:"config panel",layout:new xb.VerticalLayout({spacing:5}),epiMorph:!0,submorphs:[].concat($jscomp.arrayFromIterable(Object.keys($a).map(function(Kb){var wc=bb.rows.some(function(fc){return fc.some(function(bc){return bc===Kb})});return{type:"labeledcheckbox",label:Kb,name:Kb,checked:wc}})),[{layout:new xb.HorizontalLayout({spacing:3}),submorphs:[{type:"button",name:"OK button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}])});$a.center=this.innerBounds().center();
xb.connect($a.getSubmorphNamed("OK button"),"fire",this,"configureAccepted");xb.connect($a.getSubmorphNamed("cancel button"),"fire",this,"configureCanceled")}},{key:"configureAccepted",value:function(){var $a=this.getSubmorphNamed("config panel");$a&&($a.remove(),$a.submorphs.filter(function(bb){return"LabeledCheckBox"===bb.constructor.name}))}},{key:"configureCanceled",value:function(){var $a=this.getSubmorphNamed("config panel");$a&&$a.remove()}},{key:"close",value:function(){var $a=this;this.target&&
this.target.attributeConnections&&this.target.attributeConnections.forEach(function(bb){return bb.targetObj===$a&&bb.disconnect()});this.remove()}},{key:"alwaysTargetFocusedMorph",value:function(){this.startStepping(1500,"updateTarget")}},{key:"updateTarget",value:function(){var $a=this.world();$a&&($a=$a.focusedMorph)&&($a.isLabel||$a.isText)&&!this.isAncestorOf($a)&&this.target!==$a&&this.focusOn($a,!1)}},{key:"onMouseUp",value:function($a){var bb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kb){if(1==
Kb.nextAddress)return Kb.yield(bb.whenRendered(),2);bb.update();Kb.jumpToEnd()})}},{key:"attachToWorld",value:function(){xb.connect($world,"onMouseDown",this,"updateTarget",{garbageCollect:!0})}}],[{key:"className",get:function(){return"RichTextControl"}},{key:"properties",get:function(){return{autoRemove:{defaultValue:!1},target:{},toggleColor:{},managedProps:{readOnly:!0,get:function(){return"fontFamily fontWeight fontSize fontStyle isText fontColor textAlign link textDecoration fixedWidth fixedHeight lineWrapping padding".split(" ")}},
updateSpec:{get:function(){var $a=this;return Object.assign({fontSelection:function(bb,Kb){var wc=bb.fontFamily;(bb=wc&&Kb.items.find(function(fc){return fc.value.toLowerCase()===wc.toLowerCase()}))?Kb.selection=bb.value:wc&&(Kb.items=Kb.items.concat({isListItem:!0,label:[wc,{fontFamily:wc}],value:wc}),Kb.selection=xb.arr.last(Kb.items));Kb.fit();Kb.width=Math.max(Kb.width,170)},fontWeightSelection:function(bb,Kb){Kb.selection="normal"==bb.fontWeight?"Medium":bb.fontWeight?xb.string.capitalize(bb.fontWeight):
"Medium"},boldButton:function(bb,Kb){$a.toggleButton(Kb,"bold"===bb.fontWeight)},italicButton:function(bb,Kb){$a.toggleButton(Kb,"italic"===bb.fontStyle)},underlineButton:function(bb,Kb){$a.toggleButton(Kb,"underline"===bb.textDecoration)},linkButton:function(bb,Kb){$a.toggleButton(Kb,!!bb.link)},colorPicker:function(bb,Kb){Kb.colorValue=bb.fontColor},fontSizeField:function(bb,Kb){Kb.number=bb.fontSize},fixedWidthControl:function(bb,Kb){bb.isText?Kb.enable():Kb.disable();Kb.checked=bb.fixedWidth},
fixedHeightControl:function(bb,Kb){bb.isText?Kb.enable():Kb.disable();Kb.checked=bb.fixedHeight},lineWrappingControl:function(bb,Kb){var wc=$jscomp.makeIterator(Kb.submorphs);Kb=wc.next().value;wc=wc.next().value;Kb.checked=!!bb.lineWrapping;wc.deactivated=!bb.lineWrapping;wc.deactivated?wc.opacity=.5:(wc.opacity=1,wc.selection=bb.lineWrapping)},paddingControl:function(bb,Kb){var wc=bb.padding,fc=wc.left();bb=wc.top();var bc=wc.right();wc=wc.bottom();var Tb=!xb.arr.every([fc,bb,bc,wc],function(I){return I==
fc});Kb.get("multi value indicator").visible=Tb;xb.connect(Kb.get("multi value indicator"),"onMouseDown",Kb.get("padding field"),"number",{converter:"() => left",varMapping:{left:fc}});Kb.get("padding field").number=fc;Kb.get("padding field").visible=!Tb;Kb.get("padding field top").number=bb;Kb.get("padding field left").number=fc;Kb.get("padding field right").number=bc;Kb.get("padding field bottom").number=wc}},["left","center","right","block"].reduce(function(bb,Kb){bb[Kb+"Align"]=function(wc,fc){$a.toggleButton(fc,
wc.textAlign==Kb)};return bb},{}))}},ui:{get:function(){var $a=this,bb={fontSelection:"font selection",fontWeightSelection:"font weight selection",boldButton:"bold button",italicButton:"italic button",underlineButton:"underline button",linkButton:"link button",leftAlign:"left align",centerAlign:"center align",rightAlign:"right align",blockAlign:"block align",fontSizeField:"font size field",colorPicker:"color picker",copyStyleButton:"copy style",applyStyleButton:"apply style",removeStyleButton:"remove style",
fixedHeightControl:"fixed height control",fixedWidthControl:"fixed width control",lineWrappingControl:"line wrapping control",paddingControl:"padding control"};return xb.obj.extract(bb,xb.obj.keys(bb),function(Kb,wc){return $a.getSubmorphNamed(wc)})}}}}},{key:"openDebouncedFor",value:function($a){var bb=$a.selection;if(bb.isEmpty()){var Kb=xb.cachedControls.get($a);Kb&&(Kb.update(),Kb.alignAtTarget(),Kb.world()||$a.world().addMorph(Kb))}else xb.fun.debounceNamed($a.id+"openRichTextControl",600,function(){var wc=
xb.cachedControls.get($a);bb.isEmpty()?wc&&wc.removeFocus():(wc&&wc.world()||(wc=new xb.RichTextControl,xb.cachedControls.set($a,wc)),$a.world().addMorph(wc),wc.focusOn($a,!0),wc.alwaysTargetFocusedMorph())})()}},{key:"openFor",value:function($a){var bb=xb.cachedControls.get($a);bb?bb.update():(bb=new xb.RichTextControl,xb.cachedControls.set($a,bb),bb.focusOn($a,!0),bb.alwaysTargetFocusedMorph());bb.alignAtTarget();bb.world()||$a.world().addMorph(bb);return bb}}],Zb,{pathInPackage:function(){return"text/ui.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:624,end:16332})}(xb.Morph);xb.RichTextControl=eb;xb.RichTextControl=eb;xb.RichTextControl=eb;eb=lively.FreezerRuntime.recorderFor("ProtoSearchField/index.js");eb.SearchField=zc;var vb=function(yb){var Zb=lively.FreezerRuntime.recorderFor("ProtoSearchField/index.js"),Sb=Zb.hasOwnProperty("ProtoSearchField")&&
"function"===typeof Zb.ProtoSearchField?Zb.ProtoSearchField:Zb.ProtoSearchField=function($a){$a&&$a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tc(Sb,yb,void 0,[{key:"className",get:function(){return"ProtoSearchField"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Zb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ProtoSearchField",version:"0.1.1-0"}}},{start:76,end:221})}(eb.SearchField);vb=eb.ProtoSearchField;eb.default=vb;var Va=lively.FreezerRuntime.recorderFor("ProtoTree/index.js");Va.Tree=Fc;Va.TreeData=Jb;eb=function(yb){var Zb=lively.FreezerRuntime.recorderFor("ProtoTree/index.js"),Sb=Zb.hasOwnProperty("TestTreeData")&&"function"===typeof Zb.TestTreeData?Zb.TestTreeData:Zb.TestTreeData=function($a){$a&&$a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Tc(Sb,yb,[{key:"display",value:function($a){return $a.name}},{key:"isCollapsed",value:function($a){return $a.isCollapsed}},{key:"collapse",value:function($a,bb){$a.isCollapsed=bb}},{key:"getChildren",value:function($a){return $a.isLeaf?null:$a.isCollapsed?[]:$a.children}},{key:"isLeaf",value:function($a){return $a.isLeaf}}],[{key:"className",get:function(){return"TestTreeData"}}],Zb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoTree",version:"0.1.1-2"}}},{start:113,end:417})}(Va.TreeData);Va.TestTreeData=eb;Va.TestTreeData=eb;Va.TestTreeData=eb;eb=function(yb){var Zb=lively.FreezerRuntime.recorderFor("ProtoTree/index.js"),Sb=Zb.hasOwnProperty("ProtoTree")&&"function"===typeof Zb.ProtoTree?Zb.ProtoTree:Zb.ProtoTree=function($a){$a&&$a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Tc(Sb,yb,void 0,[{key:"className",get:function(){return"ProtoTree"}},{key:"properties",get:function(){return{treeData:{initialize:function(){this.treeData=new Va.TestTreeData({name:"root",isCollapsed:!1,isLeaf:!1,children:[{name:"child 1",isLeaf:!0},{name:"child 2",isLeaf:!1,isCollapsed:!0,children:[{name:"child 2 - 1",isLeaf:!0}]},{name:"child 3",isLeaf:!1,isCollapsed:!1,children:[{name:"child 3 - 1",isLeaf:!0},{name:"child 3 - 2",isLeaf:!0}]},{name:"child 4",isLeaf:!0}]})}},master:{initialize:function(){}}}}}],
Zb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoTree",version:"0.1.1-2"}}},{start:434,end:1297})}(Va.Tree);eb=Va.ProtoTree;Va.default=eb;eb=lively.FreezerRuntime.recorderFor("ProtoNumberWidget/index.js");eb.NumberWidget=Bc;vb=function(yb){var Zb=lively.FreezerRuntime.recorderFor("ProtoNumberWidget/index.js"),Sb=Zb.hasOwnProperty("ProtoNumberWidget")&&
"function"===typeof Zb.ProtoNumberWidget?Zb.ProtoNumberWidget:Zb.ProtoNumberWidget=function($a){$a&&$a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tc(Sb,yb,void 0,[{key:"className",get:function(){return"ProtoNumberWidget"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Zb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ProtoNumberWidget",version:"0.1.1-0"}}},{start:76,end:224})}(eb.NumberWidget);vb=eb.ProtoNumberWidget;eb.default=vb;eb=lively.FreezerRuntime.recorderFor("FrameResizer/index.js");eb.Morph=bd;vb=function(yb){var Zb=lively.FreezerRuntime.recorderFor("FrameResizer/index.js"),Sb=Zb.hasOwnProperty("FrameResizer")&&"function"===typeof Zb.FrameResizer?Zb.FrameResizer:Zb.FrameResizer=function($a){$a&&$a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Tc(Sb,yb,[{key:"onDrag",value:function($a){var bb=this.owner.left;$a=$a.positionIn(this).x;$a*="left"==this.direction?-1:1;this.owner.width+=$a;350>this.owner.width&&($a+=350-this.owner.width,this.owner.width=350);this.owner.left="left"==this.direction?bb-$a:bb}}],[{key:"className",get:function(){return"FrameResizer"}},{key:"properties",get:function(){return{direction:{type:"Enum",values:["left","right"]}}}}],Zb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"FrameResizer",version:"0.1.1-24"}}},{start:56,end:840})}(eb.Morph);vb=eb.FrameResizer;eb.default=vb;var lb=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js");lb.Morph=bd;lb.morph=Mc;lb.layouts=Ac;lb.string=db;lb.connect=Ra;lb.noUpdate=mc;lb.InteractiveMorphSelector=fd;lb.Color=Xc;lb.pt=Od;eb=function(yb){var Zb=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js"),Sb=Zb.hasOwnProperty("ShapeLayoutControl")&&
"function"===typeof Zb.ShapeLayoutControl?Zb.ShapeLayoutControl:Zb.ShapeLayoutControl=function($a){$a&&$a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tc(Sb,yb,[{key:"focusOn",value:function($a){this.target=$a;this.update(!1)}},{key:"setupConnections",value:function(){var $a=this.ui;lb.connect($a.submorphSettingsControl,"fire",this,"chooseSubmorphToChangeLayoutSettings");lb.connect($a.dragmeControl,"onDragStart",this,"onSubmorphSettingsDragStart");
lb.connect($a.xAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "x",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});lb.connect($a.yAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "y",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});for(var bb={},Kb=$jscomp.makeIterator(this.managedProps),
wc=Kb.next();!wc.done;bb={$jscomp$loop$prop$prop$2284:bb.$jscomp$loop$prop$prop$2284},wc=Kb.next()){var fc=$jscomp.makeIterator(wc.value),bc=fc.next().value;wc=fc.next().value;fc.next().value||(bb.$jscomp$loop$prop$prop$2284=this.join(bc),fc=$a[this.join(bc,"control")],lb.connect(fc,wc,this,"updateLayout",{updater:function(Tb){return function(I,T){I(Tb.$jscomp$loop$prop$prop$2284,T)}}(bb),varMapping:{prop:bb.$jscomp$loop$prop$prop$2284}}))}}},{key:"lower",value:function($a){return $a.charAt(0).toLowerCase()+
$a.slice(1)}},{key:"join",value:function($a,bb){return this.lower(lb.string.camelCaseString($a+(bb?" "+bb:"")))}},{key:"updateLayoutOfTarget",value:function($a){$a=lb.layouts[lb.string.camelCaseString($a)];this.target.layout=$a?new $a({autoResize:!1}):null;this.update()}},{key:"updateLayout",value:function($a,bb){this.target.layout[$a]=bb}},{key:"update",value:function($a){var bb=this;this.target&&lb.noUpdate(function(){for(var Kb=bb.ui,wc=bb.target.layout||{name:function(){return"No"}},fc=$jscomp.makeIterator(bb.managedProps),
bc=fc.next();!bc.done;bc=fc.next()){var Tb=$jscomp.makeIterator(bc.value);bc=Tb.next().value;var I=Tb.next().value;Tb.next();Tb=Kb[bb.join(bc,"control")];var T=Kb[bb.join(bc,"label")];if(I)if("type"===bc)Tb.selection=wc.name()+" Layout";else{var qa=wc[bb.join(bc)],Ga="undefined"!==typeof qa;if(Ga){switch(bc){case "align":Tb.items=wc.possibleAlignValues;break;case "direction":Tb.items=wc.possibleDirectionValues;break;case "axis":Tb.items=wc.possibleAxisValues}Tb[I]=qa}T.isLayoutable=T.visible=Ga}}bb.showGridLayoutControl("Grid"===
wc.name());bb.showProportionalControl("Proportional"===wc.name())})}},{key:"updateSubmorphProportionalLayoutSettings",value:function($a){var bb={};this.target.layout.changeSettingsFor($a.submorph,(bb[$a.axis]=$a.policy,bb),!0)}},{key:"onSubmorphSettingsDragStart",value:function($a){var bb=this;$a.stop();var Kb=this.target.layout,wc=Kb.settingsFor(this.selectedSubmorph),fc=[],bc;for(bc in wc)fc=[].concat($jscomp.arrayFromIterable(fc),[bc+": ",{fontWeight:"bold"},wc[bc]+" ",{}]);var Tb=lb.morph({type:"label",
fontColor:lb.Color.white,value:fc,fill:lb.Color.black.withA(.7),padding:5,borderRadius:10,isLayoutable:!1});Tb.wantsToBeDroppedOn=function(I){return Kb.layoutableSubmorphs.includes(I)};Tb.onBeingDroppedOn=function(I,T){Tb.remove();if(I=Kb.layoutableSubmorphs.includes(T)?T:$a.world.morphsContainingPoint($a.hand.position).find(function(qa){return Kb.layoutableSubmorphs.includes(qa)}))bb.updateSubmorphProportionalLayoutSettings({policy:wc.x,axis:"x",submorph:I}),bb.updateSubmorphProportionalLayoutSettings({policy:wc.y,
axis:"y",submorph:I}),I.show(),$world.setStatusMessage("layout settings applied")};$a.hand.grab(Tb);Tb.moveBy(lb.pt(10,10))}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var $a=this,bb,Kb,wc,fc,bc,Tb,I,T,qa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){switch(Ga.nextAddress){case 1:return bb=$a.target.layout.layoutableSubmorphs,$a.manageFocus=!0,$a.env.eventDispatcher.isKeyPressed("Shift")?(wc=bb.map(function(Mb){return{isListItem:!0,string:String(Mb),value:Mb}}),
Ga.yield($world.listPrompt("Select morph",wc,{onSelection:function(Mb){return Mb.show()}}),5)):Ga.yield(lb.InteractiveMorphSelector.selectMorph($a.world(),$a,function(Mb){return bb.includes(Mb)}),4);case 4:Kb=Ga.yieldResult;Ga.jumpTo(3);break;case 5:fc=Ga.yieldResult,bc=$jscomp.makeIterator(fc.selected),Kb=bc.next().value;case 3:$a.manageFocus=!1;$a.selectedSubmorph=Kb;if(!Kb)return Ga.return();Tb=$a.ui;I=Tb.xAxisPolicyControl;T=Tb.yAxisPolicyControl;qa=$a.target.layout.settingsFor(Kb);lb.noUpdate(function(){I.selection=
qa.x;T.selection=qa.y});Ga.jumpToEnd()}})}},{key:"showProportionalControl",value:function($a){var bb=this.ui;[bb.submorphSettingsControl,bb.dragmeControl,bb.xAxisPolicyControl,bb.xAxisPolicyLabel,bb.yAxisPolicyControl,bb.yAxisPolicyLabel].forEach(function(Kb){Kb.isLayoutable=$a;Kb.visible=$a})}},{key:"showGridLayoutHalo",value:function(){$world.showLayoutHaloFor(this.target)}},{key:"showGridLayoutControl",value:function($a){var bb=this.ui.configureGridLayoutControl;bb.visible=bb.isLayoutable=$a}}],
[{key:"className",get:function(){return"ShapeLayoutControl"}},{key:"properties",get:function(){return{managedProps:{get:function(){return[["type","selection",!0],["align","selection"],["direction","selection"],["axis","selection"],["spacing","number"],["auto resize","checked"],["resize submorphs","checked"],["x axis policy","selection",!0],["y axis policy","selection",!0],["react to submorph animations","checked"],["submorph settings",!1,!0],["order by index","checked"],["dragme",!1,!0],["configure grid layout",
!1,!0]]}},ui:{readOnly:!0,get:function(){for(var $a={labelContainer:this.getSubmorphNamed("label container"),controlContainer:this.getSubmorphNamed("control container")},bb=$jscomp.makeIterator(this.managedProps),Kb=bb.next();!Kb.done;Kb=bb.next()){var wc=$jscomp.makeIterator(Kb.value).next().value;Kb=wc+" label";wc+=" control";$a[this.join(Kb)]=this.getSubmorphNamed(Kb);$a[this.join(wc)]=this.getSubmorphNamed(wc)}return $a}}}}}],Zb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeLayoutControl",version:"0.1.1-166"}}},{start:345,end:7771})}(lb.Morph);eb=lb.ShapeLayoutControl;lb.default=eb}}});