System.register(["./__root_module__-89b08ab2.js"],function(ta){var nb,xb,Ob,Hb,qd,Dc,hd,Hc,Fc,Sc,ad,Jd,ed,sc,Sa,ob,$b,Sb,Bc,id,Xb,Ub,ub,hc,wc,bd,cd,bb,pb,pc,ab,cb,Pa,Za,eb,Na,Da,mb,Zb,dc,Mb,Yb;return{setters:[function(I){nb=I.au;xb=I.a3;Ob=I.C;Hb=I.ao;qd=I.aj;Dc=I.ay;hd=I.aV;Hc=I.aC;Fc=I.az;Sc=I.a9;ad=I.am;Jd=I.ap;ed=I.h;sc=I.a2;Sa=I.a1;ob=I.ai;$b=I.a7;Sb=I.P;Bc=I.$;id=I.aW;Xb=I.aq;Ub=I.a6;ub=I.ar;hc=I.as;wc=I.aX;bd=I.aY;cd=I.av;bb=I.at;pb=I.s;pc=I.aw;ab=I.aZ;cb=I.al;Pa=I.a_;Za=I.a$;eb=I.b0;Na=
I.aa;Da=I.b1;mb=I.an;Zb=I.b2;dc=I.b3;Mb=I.b4;Yb=I.aR}],execute:function(){function I(ja){(ja=Pb.cachedGuideLines.get(ja))&&ja.forEach(function(oa){return oa.remove()})}function W(ja,oa,tb,G,ma){oa=void 0===oa?!0:oa;tb=void 0===tb?!0:tb;G=void 0===G?10:G;ma=void 0===ma?100:ma;if(oa||tb){var Ga=ja.owner,lb=Ga.world();Ga=Ga.getGlobalTransform();var gc=ja.owner.submorphs.filter(function(Pc){return Pc!==ja&&!Pc.isEpiMorph&&Pc.visible&&Pc.reactsToPointer}),uc=Pb.findAlignedMorphs(ja,gc,G,ma,"left top right bottom hCenter vCenter".split(" "),
"left top right bottom hCenter vCenter".split(" "));ma=[];var yd=0,Pd=0,ve=0,Uc=0;Ga.e-=lb.scroll.x;Ga.f-=lb.scroll.y;if(uc){uc=$jscomp.makeIterator(uc);for(var Sd=uc.next();!Sd.done;Sd=uc.next()){Sd=$jscomp.makeIterator(Sd.value);Sd.next();var De=Sd.next().value;Sd=De.vertical;De=$jscomp.makeIterator(De.horizontal);for(var Td=De.next();!Td.done;Td=De.next()){Td=Td.value;var Gf=Td.edgeAVal,Te=Td.refPointsA,mc=Td.refPointsB,we=Td.edgeBVal,qf=Math.ceil(G-Td.delta),sf=Math.min(Te.top,mc.top);Te=Math.max(Te.bottom,
mc.bottom);Td.maxDist>G&&(qf-=G/2);yd<qf&&(yd=qf,ve=we-Gf);ma.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Pb.guideWidth,start:Ga.transformPoint(Pb.pt(we,sf)),end:Ga.transformPoint(Pb.pt(we,Te)),fill:Pb.guideColor,guideType:"h",priority:qf})}Sd=$jscomp.makeIterator(Sd);for(De=Sd.next();!De.done;De=Sd.next())De=De.value,Td=De.edgeAVal,sf=De.refPointsA,Te=De.refPointsB,Gf=De.edgeBVal,we=Math.ceil(G-De.delta),qf=Math.min(sf.left,Te.left),sf=Math.max(sf.right,Te.right),De.maxDist>G&&(we-=
G/2),Pd<we&&Math.abs(Gf-Td)<=G&&(Pd=we,Uc=Gf-Td),ma.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Pb.guideWidth,start:Ga.transformPoint(Pb.pt(qf,Gf)),end:Ga.transformPoint(Pb.pt(sf,Gf)),fill:Pb.guideColor,guideType:"v",priority:we})}}if(!yd||!Pd){gc=[ja].concat($jscomp.arrayFromIterable(gc));Td=Pb.computeClosestMorphs(gc);De=Td[0];gc=De.l;uc=De.r;Sd=De.t;De=De.b;var pe;if(gc||uc||Sd||De){var va=(gc||uc||Sd||De).refPointsA;for(Gf=1;Gf<Td.length&&(Te=Td[Gf],we=Te.l,qf=Te.r,sf=Te.t,Te=Te.b,
yd||(gc&&we&&gc.index!==we.index&&Math.abs(we.dist-gc.dist)<=G?pe=Object.assign({neighbor:Gf,direction:"left"},we):uc&&qf&&uc!==qf.index&&Math.abs(qf.dist-uc.dist)<=G&&(pe=Object.assign({neighbor:Gf,direction:"right"},qf))),Pd||(Sd&&sf&&Sd.index!==sf.index&&Math.abs(sf.dist-Sd.dist)<=G?pe=Object.assign({neighbor:Gf,direction:"top"},sf):De&&Te&&De.index!==Te.index&&Math.abs(Te.dist-De.dist)<=G&&(pe=Object.assign({neighbor:Gf,direction:"bottom"},Te))),!pe);Gf++);}if(pe){var La=pe;G=La.direction;sf=
La.dist;var ib=va.left;mc=va.top;var S=va.bottom,ua=va.right,Ya=va.width,gb=va.height;Te=La.refPointsA;va=Te.left;Td=Te.top;Gf=Te.bottom;we=Te.right;qf=Te.width;Te=Te.height;var ic=La.refPointsB,kc=ic.left;La=ic.top;var Oc=ic.bottom;ic=ic.right;ua="left"===G?ib:"right"===G?ua:ib+Ya/2;S="bottom"===G?S:"top"===G?mc:mc+gb/2;ib="left"===G?ua-sf:"right"===G?ua+sf:ib+Ya/2;sf="bottom"===G?S+sf:"top"===G?S-sf:mc+gb/2;mc="left"===G?ic:"right"===G?kc:va+qf/2;Ya="bottom"===G?La:"top"===G?Oc:Td+Te/2;!tb||yd||
"right"!==G&&"left"!==G||(yd=10,ve=(pe.dist-(uc||gc).dist)*("right"===G?-1:1),ua+=ve,ib+=ve);!tb||Pd||"top"!==G&&"bottom"!==G||(Pd=10,Uc=((Sd||De).dist-pe.dist)*("top"===G?-1:1),S+=Uc,sf+=Uc);ma.push({type:"line",epiMorph:!0,hasFixedPosition:!0,start:Ga.transformPoint(Pb.pt("left"===G?va:"right"===G?we:va+qf/2,"bottom"===G?Gf:"top"===G?Td:Td+Te/2)),end:Ga.transformPoint(Pb.pt(mc,Ya)),fill:Pb.Color.orange,height:Pb.guideWidth,guideType:G,priority:10},{type:"line",epiMorph:!0,hasFixedPosition:!0,start:Ga.transformPoint(Pb.pt(ua,
S)),end:Ga.transformPoint(Pb.pt(ib,sf)),fill:Pb.Color.orange,height:Pb.guideWidth,guideType:G,priority:10})}}tb&&(ve||Uc)&&ja.moveBy(Pb.pt(ve,Uc));if(oa){ma=ma.filter(function(Pc){var Rc=Pc.guideType;Pc=Pc.priority;return"h"===Rc?Pc===yd:"v"===Rc?Pc===Pd:!0});(oa=Pb.cachedGuideLines.get(ja))||Pb.cachedGuideLines.set(ja,oa=[]);for(tb=0;tb<ma.length;tb++)pe=void 0,oa[tb]?pe=Object.assign(oa[tb],ma[tb]):(pe=Pb.morph(ma[tb]),oa.push(pe)),pe.owner||lb.addMorph(pe);oa.slice(tb).forEach(function(Pc){return Pc.remove()});
Pb.fun.debounceNamed(ja.id+"-drag-guides-cleanup",1300,function(){var Pc=Pb.cachedGuideLines.get(ja);Pc&&Pc.forEach(function(Rc){return Rc.remove()})})()}}}function sa(ja,oa,tb,G,ma,Ga){tb=void 0===tb?!0:tb;G=void 0===G?!0:G;ma=void 0===ma?5:ma;Ga=void 0===Ga?100:Ga;if(tb||G){var lb=ja.owner,gc=lb.world(),uc=lb.getGlobalTransform(),yd=ja.owner.submorphs.filter(function(S){return S!==ja&&!S.isEpiMorph&&S.visible&&S.reactsToPointer});lb=(oa.includes("left")||oa.includes("right")?"x":"")+(oa.includes("top")||
oa.includes("bottom")?"y":"");var Pd=Pb.findMorphsWithSimilarWidthOrHeight(ja,lb,yd,ma,Ga),ve=-Infinity,Uc=-Infinity,Sd=0,De=0,Td=0,Gf=0,Te=0,mc=0;lb=[];uc.e-=gc.scroll.x;uc.f-=gc.scroll.y;if(Pd){Pd=$jscomp.makeIterator(Pd);for(var we=Pd.next();!we.done;we=Pd.next()){we=$jscomp.makeIterator(we.value);we.next();var qf=we.next().value;we=qf.similarIn;var sf=qf.delta,pe=qf.refPointsA,va=qf.refPointsB;qf=ma-sf+(Ga-qf.minDist);"width"===we?ve<qf&&(ve=qf,oa.includes("left")&&(De=-sf),oa.includes("right")&&
(Sd=sf)):Uc<qf&&(Uc=qf,oa.includes("top")&&(Td=-sf),oa.includes("bottom")&&(Gf=sf));sf={type:"line",epiMorph:!0,hasFixedPosition:!0,height:Pb.guideWidth,fill:Pb.guideColor,guideType:we,priority:qf,start:uc.transformPoint("width"===we?Pb.pt(pe.left,pe.top+pe.height/2):Pb.pt(pe.left+pe.width/2,pe.top)),end:uc.transformPoint("width"===we?Pb.pt(pe.right,pe.top+pe.height/2):Pb.pt(pe.left+pe.width/2,pe.bottom))};we=Object.assign({},sf,{start:uc.transformPoint("width"===we?Pb.pt(va.left,va.top+va.height/
2):Pb.pt(va.left+va.width/2,va.top)),end:uc.transformPoint("width"===we?Pb.pt(va.right,va.top+va.height/2):Pb.pt(va.left+va.width/2,va.bottom))});lb.push(sf,we)}}if(Ga=Pb.findAlignedMorphs(ja,yd,ma,Ga,oa,void 0))for(Ga=$jscomp.makeIterator(Ga),yd=Ga.next();!yd.done;yd=Ga.next()){yd=$jscomp.makeIterator(yd.value);yd.next();Pd=yd.next().value;yd=Pd.vertical;Pd=$jscomp.makeIterator(Pd.horizontal);for(we=Pd.next();!we.done;we=Pd.next()){we=we.value;va=we.edgeAVal;var La=we.refPointsA,ib=we.refPointsB;
sf=we.edgeBVal;pe=Math.ceil(ma-we.delta);qf=Math.min(La.top,ib.top);La=Math.max(La.bottom,ib.bottom);we.maxDist>ma&&(pe-=ma/2);Te<pe&&(Te=pe,oa.includes("left")&&(De=-(sf-va)),oa.includes("right")&&(Sd=+(sf-va)));lb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Pb.guideWidth,start:uc.transformPoint(Pb.pt(sf,qf)),end:uc.transformPoint(Pb.pt(sf,La)),fill:Pb.guideColor,guideType:"h",priority:pe})}yd=$jscomp.makeIterator(yd);for(Pd=yd.next();!Pd.done;Pd=yd.next())Pd=Pd.value,we=Pd.edgeAVal,
qf=Pd.refPointsA,La=Pd.refPointsB,va=Pd.edgeBVal,sf=Math.ceil(ma-Pd.delta),pe=Math.min(qf.left,La.left),qf=Math.max(qf.right,La.right),Pd.maxDist>ma&&(sf-=ma/2),mc<sf&&Math.abs(va-we)<=ma&&(mc=sf,oa.includes("top")&&(Td=va-we),oa.includes("bottom")&&(Gf=va-we)),lb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Pb.guideWidth,start:uc.transformPoint(Pb.pt(pe,va)),end:uc.transformPoint(Pb.pt(qf,va)),fill:Pb.guideColor,guideType:"v",priority:sf})}G&&(De&&(ja.left+=De,ja.right-=De),Td&&(ja.top+=
Td,ja.bottom-=Td),Sd&&(ja.width+=Sd),Gf&&(ja.height+=Gf));if(tb){lb=lb.filter(function(S){var ua=S.guideType;S=S.priority;return"width"===ua?S===ve:"height"===ua?S===Uc:"v"===ua?S===mc:"h"===ua?S===Te:!1});(oa=Pb.cachedGuideLines.get(ja))||Pb.cachedGuideLines.set(ja,oa=[]);for(tb=0;tb<lb.length;tb++)G=void 0,oa[tb]?G=Object.assign(oa[tb],lb[tb]):(G=Pb.morph(lb[tb]),oa.push(G)),G.owner||gc.addMorph(G);oa.slice(tb).forEach(function(S){return S.remove()});Pb.fun.debounceNamed(ja.id+"-drag-guides-cleanup",
1300,function(){var S=Pb.cachedGuideLines.get(ja);S&&S.forEach(function(ua){return ua.remove()})})()}}}function xa(ja,oa){oa=void 0===oa?!1:oa;var tb=Ma.MorphicEnv.default().world;if(null===ja||void 0===ja)ja=String(ja);if(ja.isMorph)return Ma.showRect(ja.world(),ja.globalBounds().translatedBy(ja.world().scroll.negated()),oa);if(ja.isPoint)return Ma.showRect(tb,new Ma.Rectangle(ja.x-5,ja.y-5,10,10));if(ja.isLine)return Ma.showLine(tb,ja);if(ja.isRectangle)return Ma.showRect(tb,ja);if("undefined"!==
typeof Ma.Element&&ja instanceof Ma.Element)return Ma.showRect(tb,Ma.Rectangle.fromElement(ja));if("number"===typeof ja||"symbol"===typeof ja||"boolean"===typeof ja||"undefined"!==typeof Ma.Node&&ja instanceof Ma.Node||ja instanceof RegExp)ja=String(ja);"object"===typeof ja&&(ja=Ma.obj.inspect(ja,{maxDepth:1}));return"string"===typeof ja&&1===arguments.length?tb.setStatusMessage(ja):tb.setStatusMessage(Ma.string.formatFromArray(Array.from(arguments)))}function Eb(ja,oa,tb){tb=void 0===tb?3E3:tb;var G,
ma,Ga,lb,gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(uc){if(1==uc.nextAddress){if(!(ja&&ja.world()&&oa&&oa.world()))return uc.return(null);G=ja.owner.worldPoint(ja.center);ma=oa.owner.worldPoint(oa.center);Ga=G.lineTo(ma).sampleN(2)[1];lb={tagName:"marker",markerHeight:5,markerWidth:5,orient:"auto",refX:1,refY:5,viewBox:"0 0 10 10",children:[{tagName:"circle",stroke:Ma.Color.red,fill:Ma.Color.red,cx:5,cy:5,r:4}]};gc=$world.addMorph(new Ma.Path({position:Ga,renderOnGPU:!0,vertices:[Ma.pt(0),
Ma.pt(0)],borderWidth:2,startMarker:lb,endMarker:lb,borderColor:Ma.Color.red}));return uc.yield(gc.whenRendered(),2)}if(3!=uc.nextAddress)return uc.yield(gc.animate({opacity:1,customTween:function(yd){var Pd=gc.center;gc.vertices=[Ma.pt(0).interpolate(yd,G.subPt(Ga)),Ma.pt(0).interpolate(yd,ma.subPt(Ga))];gc.center=Pd},duration:400}),3);tb&&setTimeout(function(){return gc.fadeOut()},tb);return uc.return(gc)})}ta({a:W,d:Eb,r:I,s:xa});var Pb=lively.FreezerRuntime.recorderFor("lively.halos/drag-guides.js");
Pb.removeSnapToGuidesOf=I;Pb.showAndSnapToGuides=W;Pb.showAndSnapToResizeGuides=sa;Pb.computeRefPoints=function(ja){var oa=ja.x,tb=ja.y,G=ja.width;ja=ja.height;return{left:oa,top:tb,hCenter:oa+G/2,vCenter:tb+ja/2,right:oa+G,bottom:tb+ja,width:G,height:ja}};Pb.findEdgesInAlignment=function(ja,oa,tb,G,ma,Ga,lb,gc,uc,yd){tb=void 0===tb?15:tb;Ga=void 0===Ga?0:Ga;lb=void 0===lb?0:lb;gc=void 0===gc?0:gc;uc=void 0===uc?0:uc;yd=void 0===yd?0:yd;for(var Pd=[],ve=[],Uc=0;Uc<Pb.edges.length;Uc++){var Sd=$jscomp.makeIterator(Pb.edges[Uc]),
De=Sd.next().value,Td=Sd.next().value;Sd=Sd.next().value;var Gf=ja[Td],Te=oa[Sd],mc=Math.max(Gf,Te)-Math.min(Gf,Te);mc>tb||!(G&&!G.includes(Td)||ma&&!ma.includes(Sd))&&("vertical"===De?Pd:ve).push({delta:mc,edgeA:Td,edgeB:Sd,edgeAVal:Gf,edgeBVal:Te,refPointsA:ja,refPointsB:oa,distLeft:Ga,distTop:lb,distRight:gc,distBottom:uc,maxDist:yd})}return Pd.length||ve.length?{vertical:Pd,horizontal:ve}:null};Pb.findAlignedMorphs=function(ja,oa,tb,G,ma,Ga){tb=void 0===tb?15:tb;G=void 0===G?Infinity:G;for(var lb,
gc=Pb.computeRefPoints(ja.bounds()),uc=0;uc<oa.length;uc++){var yd=oa[uc];if(yd!==ja){var Pd=Pb.computeRefPoints(yd.bounds()),ve=Math.max(0,gc.left-Pd.right),Uc=Math.max(0,Pd.left-gc.right),Sd=Math.max(0,gc.top-Pd.bottom),De=Math.max(0,Pd.top-gc.bottom);Math.max(De,Sd,Uc,ve)>G||!(Pd=Pb.findEdgesInAlignment(gc,Pd,tb,ma,Ga,ve,Sd,Uc,De,Math.max(De,Sd,Uc,ve)))||(lb||(lb=new Map),lb.set(yd,Pd))}}ja=ja.owner;oa=Pb.computeRefPoints(ja.innerBounds());if(tb=Pb.findEdgesInAlignment(gc,oa,tb))lb||(lb=new Map),
lb.set(ja,tb);return lb};Pb.findMorphsWithSimilarWidthOrHeight=function(ja,oa,tb,G,ma){G=void 0===G?15:G;ma=void 0===ma?Infinity:ma;for(var Ga,lb=Pb.computeRefPoints(ja.bounds()),gc=0;gc<tb.length;gc++){var uc=tb[gc];if(uc!==ja){var yd=Pb.computeRefPoints(uc.bounds()),Pd=Math.max(0,lb.left-yd.right),ve=Math.max(0,yd.left-lb.right),Uc=Math.max(0,lb.top-yd.bottom),Sd=Math.max(0,yd.top-lb.bottom),De=Math.min(Sd,Uc,ve,Pd),Td=Math.max(Sd,Uc,ve,Pd);if(!(Math.max(Sd,Uc,ve,Pd)>ma)){ve=lb;Pd=ve.width;ve=ve.height;
Sd=yd;Uc=Sd.width;Sd=Sd.height;var Gf=Uc-Pd,Te=Sd-ve;("x"===oa||"xy"===oa)&&Math.abs(Gf)<=G&&(Ga||(Ga=new Map),Ga.set(uc,{similarIn:"width",minDist:De,maxDist:Td,refPointsA:lb,refPointsB:yd,valA:Pd,valB:Uc,delta:Gf}));("y"===oa||"xy"===oa)&&Math.abs(Te)<=G&&(Ga||(Ga=new Map),Ga.set(uc,{similarIn:"height",minDist:De,maxDist:Td,refPointsA:lb,refPointsB:yd,valA:ve,valB:Sd,delta:Te}))}}}return Ga};Pb.closest=function(ja,oa,tb,G,ma,Ga,lb,gc){gc=void 0===gc?!0:gc;var uc=G[ja],yd=ma[ja],Pd=Ga[ja];oa=lb[ja];
for(var ve,Uc,Sd,De,Td=0;Td<ma.length;Td++)ja===Td||uc<ma[Td]||ve&&ma[ve.index]>=ma[Td]||gc&&lb[ja]<Ga[Td]||Ga[ja]>lb[Td]||(ve={index:Td,dist:uc-ma[Td],refPointsA:tb[ja],refPointsB:tb[Td]});for(uc=0;uc<G.length;uc++)ja===uc||yd>G[uc]||Uc&&G[Uc.index]<=G[uc]||gc&&lb[ja]<Ga[uc]||Ga[ja]>lb[uc]||(Uc={index:uc,dist:G[uc]-yd,refPointsA:tb[ja],refPointsB:tb[uc]});for(yd=0;yd<lb.length;yd++)ja===yd||Pd<lb[yd]||Sd&&lb[Sd.index]>=lb[yd]||gc&&G[ja]>ma[yd]||ma[ja]<G[yd]||(Sd={index:yd,dist:Pd-lb[yd],refPointsA:tb[ja],
refPointsB:tb[yd]});for(lb=0;lb<Ga.length;lb++)ja===lb||oa>Ga[lb]||De&&Ga[De.index]<=Ga[lb]||gc&&G[ja]>ma[lb]||ma[ja]<G[lb]||(De={index:lb,dist:Ga[lb]-oa,refPointsA:tb[ja],refPointsB:tb[lb]});return{l:ve,r:Uc,t:Sd,b:De}};Pb.computeClosestMorphs=function(ja){for(var oa=[],tb=[],G=[],ma=[],Ga=[],lb=[],gc=0;gc<ja.length;gc++){var uc=Pb.computeRefPoints(ja[gc].bounds());Ga.push(uc);var yd=uc.right,Pd=uc.top,ve=uc.bottom;oa.push(uc.left);tb.push(yd);G.push(Pd);ma.push(ve)}for(gc=0;gc<ja.length;gc++)lb.push(Pb.closest(gc,
ja,Ga,oa,tb,G,ma));return lb};Pb.fun=nb;Pb.pt=xb;Pb.Color=Ob;Pb.morph=Hb;Pb.cachedGuideLines=new WeakMap;Pb.guideWidth=1;Pb.guideColor=Pb.Color.orange.lighter();Pb.removeSnapToGuidesOf=I;Pb.removeSnapToGuidesOf=I;Pb.showAndSnapToGuides=W;Pb.showAndSnapToGuides=W;Pb.showAndSnapToResizeGuides=sa;Pb.showAndSnapToResizeGuides=sa;Pb.edges=[["vertical","top","top"],["vertical","vCenter","top"],["vertical","bottom","top"],["vertical","top","vCenter"],["vertical","vCenter","vCenter"],["vertical","bottom",
"vCenter"],["vertical","top","bottom"],["vertical","vCenter","bottom"],["vertical","bottom","bottom"],["horizontal","left","left"],["horizontal","hCenter","left"],["horizontal","right","left"],["horizontal","left","hCenter"],["horizontal","hCenter","hCenter"],["horizontal","right","hCenter"],["horizontal","left","right"],["horizontal","hCenter","right"],["horizontal","right","right"]];var Ha=lively.FreezerRuntime.recorderFor("lively.halos/morph.js");Ha.Morph=qd;Ha.Label=Dc;Ha.StyleSheet=hd;Ha.HorizontalLayout=
Hc;Ha.Path=Fc;Ha.Text=Sc;Ha.GridLayout=ad;Ha.morph=Hb;Ha.Icon=Jd;Ha.createMorphSnapshot=ed;Ha.Color=Ob;Ha.pt=xb;Ha.rect=sc;Ha.Rectangle=Sa;Ha.LinearGradient=ob;Ha.obj=$b;Ha.PropertyPath=Sb;Ha.promise=Bc;Ha.properties=id;Ha.num=Xb;Ha.arr=Ub;Ha.connect=ub;Ha.signal=hc;Ha.disconnect=wc;Ha.disconnectAll=bd;Ha.once=cd;Ha.showAndSnapToGuides=W;Ha.showAndSnapToResizeGuides=sa;Ha.removeSnapToGuidesOf=I;Ha.haloBlue=Ha.Color.rgb(23,160,251);Ha.componentAccent=Ha.Color.magenta;Ha.derivedAccent=Ha.Color.purple;
var Lb=function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("Halo")&&"function"===typeof oa.Halo?oa.Halo:oa.Halo=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"relayout",value:function(){this.alignWithTarget()}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-C",win:"Ctrl-C"},command:{command:"clipboard copy",passEvent:!0}}]}},{key:"commands",
get:function(){return[{name:"clipboard copy",doc:"copy selected morph(s) to clipboard",scrollCursorIntoView:!1,exec:function(G){G.copyHalo().copyToClipBoard()}}]}},{key:"removeIfDetached",value:function(){var G=this;setTimeout(function(){G.target.owner||G.remove()})}},{key:"initLayout",value:function(){var G=this.layout=new Ha.GridLayout({autoAssign:!1,fitToCell:!1,columns:[0,{fixed:36,paddingRight:10},2,{fixed:26},4,{fixed:26},6,{fixed:36,paddingLeft:10}],rows:[0,{fixed:36,paddingBottom:10},2,{fixed:26},
4,{fixed:26},6,{fixed:26},7,{fixed:36,paddingTop:10}],grid:[["menu",null,"grab",null,"drag",null,"close"],[null,null,null,null,null,null,null],["copy",null,null,null,null,null,"edit"],[null,null,null,null,null,null,null],["component",null,null,null,null,null,"inspect"],[null,null,null,null,null,null,null],["rotate",null,null,null,null,null,"resize"],[null,"name","name","name","name","name",null]]});G.col(1).row(7).group.align="center";G.col(1).row(7).group.resize=!1}},{key:"initButtons",value:function(){this.submorphs=
[].concat($jscomp.arrayFromIterable(this.ensureResizeHandles()),$jscomp.arrayFromIterable(this.resizeOnly?[]:[this.closeHalo(),this.dragHalo(),this.grabHalo(),this.menuHalo(),this.inspectHalo(),this.editHalo(),this.copyHalo(),this.componentHalo(),this.rotateHalo(),this.nameHalo(),this.originHalo()]))}},{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"isHalo",get:function(){return!0}},{key:"borderBox",get:function(){return this.getSubmorphNamed("border-box")||
this.addMorphBack(Ha.morph({name:"border-box",fill:Ha.Color.transparent,borderColor:this.target.isComponent?Ha.componentAccent:Ha.haloBlue,borderWidth:1}))}},{key:"pointerId",get:function(){return this.state?this.state.pointerId:null}},{key:"pointerId",set:function(G){this.state||(this.state={});this.state.pointerId=G}},{key:"prepareTarget",value:function(G){if(!Ha.obj.isArray(G))return G;if(1>=G.length)return G[0];G=G[0].world().addMorph(new Ha.MultiSelectionTarget({selectedMorphs:G}));G.alignWithSelection();
G.modifiesSelectedMorphs=!0;return G}},{key:"refocus",value:function(G){this.target=G;this.alignWithTarget()}},{key:"alignWithTarget",value:function(){if(!this.active&&this.target){var G=this.target.world()||$world,ma=G.visibleBounds(),Ga=this.target.globalBounds(),lb=Ga.insetBy(-36).intersection(ma);ma=Ga.intersection(ma);this.layout&&this.layout.disable();this.setBounds(lb.translatedBy(G.scroll.negated()));this.borderBox.setBounds($world.transformRectToMorph(this,ma));this.state.activeButton?(this.buttonControls.forEach(function(gc){return gc.visible=
!1}),this.ensureResizeHandles().forEach(function(gc){return gc.visible=!1}),this.state.activeButton.visible=!0,this.updatePropertyDisplay(this.state.activeButton)):(this.changingName&&this.nameHalo().toggleActive([!1]),this.ensureResizeHandles().forEach(function(gc){return gc.visible=!0}),this.buttonControls.forEach(function(gc){gc.visible=!0}),this.propertyDisplay.disable());this.nameHalo().alignInHalo();this.ensureResizeHandles().forEach(function(gc){return gc.alignInHalo()});this.resizeOnly||this.originHalo().alignInHalo();
this.layout&&this.layout.enable();return this}}},{key:"detachFromTarget",value:function(){var G=this.target;G&&(Ha.disconnect(G,"onChange",this,"alignWithTarget"),Ha.disconnect(G,"onOwnerChanged",this,"removeIfDetached"),G instanceof Ha.MultiSelectionTarget?(G.modifiesSelectedMorphs=!1,G.remove()):"function"===typeof G.detachedHalo&&G.detachedHalo(this))}},{key:"remove",value:function(){this.detachFromTarget();bb._get(Object.getPrototypeOf(tb.prototype),"remove",this).call(this)}},{key:"morphsContainingPoint",
value:function(G){return G}},{key:"propertyDisplay",get:function(){return Ha.HaloPropertyDisplay.for(this)}},{key:"nameHalo",value:function(){return Ha.NameHaloItem.for(this)}},{key:"closeHalo",value:function(){return Ha.CloseHaloItem.for(this)}},{key:"grabHalo",value:function(){return Ha.GrabHaloItem.for(this)}},{key:"dragHalo",value:function(){return Ha.DragHaloItem.for(this)}},{key:"menuHalo",value:function(){return Ha.MenuHaloItem.for(this)}},{key:"inspectHalo",value:function(){return Ha.InspectHaloItem.for(this)}},
{key:"editHalo",value:function(){return Ha.EditHaloItem.for(this)}},{key:"rotateHalo",value:function(){return Ha.RotateHaloItem.for(this)}},{key:"copyHalo",value:function(){return Ha.CopyHaloItem.for(this)}},{key:"originHalo",value:function(){return Ha.OriginHaloItem.for(this)}},{key:"componentHalo",value:function(){return Ha.ComponentHaloItem.for(this)}},{key:"buttonControls",get:function(){return this.submorphs.filter(function(G){return G.isHaloItem&&!G.isResizeHandle})}},{key:"addMorphToSelection",
value:function(G){var ma=this,Ga,lb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gc){if(1==gc.nextAddress){Ga=ma.world();lb=ma.target.isMorphSelection?ma.target.selectedMorphs:[ma.target];if(lb.includes(G))return gc.return();ma.remove();return gc.yield(Ga.showHaloForSelection([].concat($jscomp.arrayFromIterable(lb),[G]),ma.state.pointerId),2)}return gc.return(gc.yieldResult)})}},{key:"removeMorphFromSelection",value:function(G){var ma=this,Ga;return $jscomp.asyncExecutePromiseGeneratorProgram(function(lb){if(1==
lb.nextAddress){Ga=ma.world();ma.remove();if(!ma.target.isMorphSelection)return lb.jumpTo(0);Ha.arr.remove(ma.target.selectedMorphs,G);return lb.yield(Ga.showHaloForSelection(ma.target.selectedMorphs,ma.state.pointerId),3)}return lb.return(lb.yieldResult)})}},{key:"isAlreadySelected",value:function(G){return this.target==G||this.target.isMorphSelection&&this.target.selectsMorph(G)}},{key:"updateBoundsFor",value:function(G,ma,Ga,lb,gc){var uc={topLeft:Ha.rect(-1,-1,1,1),topCenter:ma?Ha.rect(1,-1,0,
1):Ha.rect(0,-1,0,1),topRight:Ha.rect(0,-1,1,1),rightCenter:ma?Ha.rect(0,1,1,1):Ha.rect(0,0,1,0),bottomRight:Ha.rect(0,0,1,1),bottomCenter:ma?Ha.rect(1,0,0,1):Ha.rect(0,0,0,1),bottomLeft:Ha.rect(-1,0,1,1),leftCenter:ma?Ha.rect(-1,1,1,0):Ha.rect(-1,0,1,0)}[G];gc=uc.x;var yd=uc.y,Pd=uc.width;uc=uc.height;Ga=ma?this.proportionalDelta(G,Ga,lb):Ga;G=Ha.rect(Ga.x*gc,Ga.y*yd,Ga.x*Pd,Ga.y*uc);this.active=!0;this.target.setBounds(lb.insetByRect(G));(this.target.isPolygon||this.target.isPath)&&this.target.moveBy(this.target.origin.negated());
this.active=!1;this.alignWithTarget()}},{key:"proportionalDelta",value:function(G,ma,Ga){var lb=Ga.width,gc=Ga.height;Ga={topLeft:Ha.pt(-1,-1),topCenter:Ha.pt(0,-1),topRight:Ha.pt(1,-1),leftCenter:Ha.pt(-1,0),rightCenter:Ha.pt(1,0),bottomLeft:Ha.pt(-1,1),bottomCenter:Ha.pt(0,1),bottomRight:Ha.pt(1,1)};var uc=lb/Math.max(lb,gc),yd=gc/Math.max(gc,lb);lb={topLeft:Ha.pt(-uc,-yd),topCenter:Ha.pt(1/(2*gc/lb),-1),topRight:Ha.pt(uc,-yd),leftCenter:Ha.pt(-1,gc/(2*lb)),rightCenter:Ha.pt(1,gc/(3*lb)),bottomLeft:Ha.pt(-uc,
yd),bottomCenter:Ha.pt(1/(2*gc/lb),1),bottomRight:Ha.pt(uc,yd)};Ga=Ga[G];return lb[G].scaleBy(Ga.dotProduct(ma)/Ga.dotProduct(Ga))}},{key:"ensureResizeHandles",value:function(){return Ha.ResizeHandle.resizersFor(this)}},{key:"updatePropertyDisplay",value:function(G){G=G.valueForPropertyDisplay();"undefined"!==typeof G?this.propertyDisplay.displayProperty(G):this.propertyDisplay.disable()}},{key:"toggleDiagonal",value:function(G,ma){if(!Ha.rect(0).sides.includes(ma)){var Ga=this.getSubmorphNamed("diagonal");
if(G){G=this.target.globalBounds();var lb=G.width,gc=G.height;G=this.localize(Ha.pt(G.x,G.y)).extent(Ha.pt(lb,gc)).scaleRectTo(this.innerBounds());lb={topLeft:[Ha.pt(lb,gc),Ha.pt(0,0)],topRight:[Ha.pt(0,gc),Ha.pt(lb,0)],bottomRight:[Ha.pt(0,0),Ha.pt(lb,gc)],bottomLeft:[Ha.pt(lb,0),Ha.pt(0,gc)]};Ga?Ga.setBounds(G):(Ga=$jscomp.makeIterator(lb[ma]),ma=Ga.next().value,Ga=Ga.next().value,lb=new Ha.LinearGradient({stops:[{offset:0,color:Ha.Color.orange.withA(0)},{offset:.2,color:Ha.Color.orange},{offset:.8,
color:Ha.Color.orange},{offset:1,color:Ha.Color.orange.withA(0)}]}),Ga=this.addMorphBack(new Ha.Path({opacity:0,name:"diagonal",borderStyle:"dotted",borderWidth:5,bounds:G,borderColor:lb,vertices:[ma,Ga]})),Ga.setBounds(G),Ga.animate({opacity:1,duration:500}))}else Ga&&Ga.fadeOut(500)}}},{key:"toggleRotationIndicator",value:function(G,ma){var Ga=this.getSubmorphNamed("rotationIndicator");G&&ma?(G=this.getSubmorphNamed("origin").center,Ga=Ga||this.addMorphBack(new Ha.Path({name:"rotationIndicator",
borderColor:Ha.haloBlue,borderWidth:1,vertices:[]})),Ga.setBounds(ma.bounds().union(this.innerBounds())),Ga.vertices=[Ga.localizePointFrom(G,this),Ga.localizePointFrom(ma.center,this)]):Ga&&Ga.remove()}},{key:"toggleMorphHighlighter",value:function(G,ma,Ga){Ga=void 0===Ga?!1:Ga;if(ma.onHaloGrabover)ma.onHaloGrabover(G);else Ga=Ha.MorphHighlighter.for(this,ma,Ga),G&&ma&&ma!=this.world()?Ga&&Ga.show(ma):Ga&&Ga.deactivate()}},{key:"onMouseDown",value:function(G){var ma=G.state.clickedOnMorph;if(!G.isCommandKey()&&
ma==this.borderBox)return this.remove();if(G.isShiftDown()&&G.isCommandKey())G=this.target.isMorphSelection?this.target.morphBeneath(G.position):this.morphBeneath(G.position),this.isAlreadySelected(G)?this.removeMorphFromSelection(G):this.addMorphToSelection(G);else{if(ma==this.borderBox&&G.isCommandKey()){var Ga=G.world.morphsContainingPoint(G.position).filter(function(lb){return lb.halosEnabled});(Ga=Ga.slice(Ga.indexOf(this.target)+1)[0]||Ga[0]||G.world)&&G.world.showHaloFor(Ga,G.domEvt.pointerId);
this.remove()}ma==this&&G.isCommandKey()&&(Ga=this.morphBeneath(G.position),G.world.showHaloFor(Ga,G.domEvt.pointerId));ma==this&&this.remove()}}},{key:"onKeyUp",value:function(G){this.changingName||this.buttonControls.map(function(ma){return ma.onKeyUp(G)})}},{key:"getMesh",value:function(G,ma){var Ga=G.x;G=G.y;ma=void 0===ma?Ha.pt(0,0):ma;var lb=this.world().visibleBounds(),gc=lb.height;lb=lb.width;var uc={borderStyle:"dotted",borderWidth:2,borderColor:Ha.Color.orange};uc=this.get("mesh")||this.addMorph(new Ha.Morph({name:"mesh",
styleClasses:["halo-mesh"],extent:Ha.pt(lb,gc),fill:null,submorphs:[new Ha.Path(Object.assign({name:"vertical"},uc)),new Ha.Path(Object.assign({name:"horizontal"},uc))]}));uc.globalPosition=ma;uc.getSubmorphNamed("vertical").vertices=[Ha.pt(Ga,0).subPt(ma),Ha.pt(Ga,gc).subPt(ma)];uc.getSubmorphNamed("horizontal").vertices=[Ha.pt(0,G).subPt(ma),Ha.pt(lb,G).subPt(ma)];return uc}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Halo"}},{key:"properties",get:function(){return{fill:{defaultValue:Ha.Color.transparent},
resizeOnly:{defaultValue:!1},pointerId:{},hasFixedPosition:{defaultValue:!0},respondsToVisibleWindow:{defaultValue:!0},submorphs:{after:["target"],initialize:function(){this.initButtons();this.alignWithTarget()}},layout:{after:["submorphs"],initialize:function(){this.initLayout()}},hasTinyTarget:{derived:!0,get:function(){return 40>this.target.bounds().extent().dist(Ha.pt(0))}},target:{get:function(){return this.state?this.state.target:null},set:function(G){this.state||(this.state={});var ma=!!this.state.target;
this.detachFromTarget();G=this.prepareTarget(G);this.state.target=G;ma&&this.alignWithTarget();Ha.connect(G,"onChange",this,"alignWithTarget");Ha.connect(G,"onOwnerChanged",this,"removeIfDetached")}}}}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:897,end:16889})}(Ha.Morph);Lb=Ha.Halo;
var xd=ta("H",Lb);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("HaloPropertyDisplay")&&"function"===typeof oa.HaloPropertyDisplay?oa.HaloPropertyDisplay:oa.HaloPropertyDisplay=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"isHaloItem",get:function(){return!1}},{key:"halo",get:function(){return this.owner}},{key:"displayedValue",value:function(){return this.textString}},
{key:"displayProperty",value:function(G){var ma=this.halo.state.activeButton;G=String(G);this.visible=!0;this.textString=G;this.position=this.constructor.defaultPosition;this.bounds().insetBy(10).intersects(ma.bounds())&&(this.position=Ha.pt(ma.topRight.x+10,this.position.y))}},{key:"disable",value:function(){this.position=this.constructor.defaultPosition;this.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloPropertyDisplay"}},{key:"morphName",get:function(){return"propertyDisplay"}},
{key:"defaultPosition",get:function(){return Ha.pt(25,0)}},{key:"for",value:function(G){return G.getSubmorphNamed(this.morphName)||G.addMorph(new this({name:this.morphName}))}},{key:"properties",get:function(){return{name:{defaultValue:this.name},fill:{defaultValue:Ha.Color.black.withA(.7)},borderRadius:{defaultValue:7},padding:{defaultValue:Ha.Rectangle.inset(5)},visible:{defaultValue:!1},readOnly:{defaultValue:!0},fontSize:{defaultValue:12},fontColor:{defaultValue:Ha.Color.white},position:{defaultValue:this.defaultPosition}}}}],
oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:17079,end:18417})})(Ha.Label);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("MultiSelectionTarget")&&"function"===typeof oa.MultiSelectionTarget?oa.MultiSelectionTarget:oa.MultiSelectionTarget=
function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"isHaloItem",get:function(){return!0}},{key:"isMorphSelection",get:function(){return!0}},{key:"selectsMorph",value:function(G){return this.selectedMorphs.includes(G)}},{key:"alignWithSelection",value:function(){var G=this.selectedMorphs.map(function(ma){return ma.globalBounds()}).reduce(function(ma,Ga){return ma.union(Ga)});this.setBounds(G)}},{key:"onGrab",
value:function(G){this.grabbingHand=G.hand;this.selectionGrabbed=!0;G.hand.grab(this.selectedMorphs);Ha.once(G.hand,"dropMorphsOn",this,"onGrabEnd");Ha.connect(G.hand,"position",this,"alignWithSelection")}},{key:"onGrabEnd",value:function(){this.selectionGrabbed=!1;Ha.disconnectAll(this.grabbingHand)}},{key:"updateExtent",value:function(G){var ma=G.value.subPt(G.prevValue);this.selectedMorphs.forEach(function(Ga){return Ga.resizeBy(ma)})}},{key:"updatePosition",value:function(G){if(!this.selectionGrabbed){var ma=
G.value.subPt(G.prevValue);this.selectedMorphs.forEach(function(Ga){return Ga.moveBy(ma)})}}},{key:"updateRotation",value:function(G){var ma=this,Ga=G.value-G.prevValue;this.selectedMorphs.forEach(function(lb){var gc=lb.origin;lb.adjustOrigin(lb.localize(ma.worldPoint(Ha.pt(0,0))));lb.rotation+=Ga;lb.adjustOrigin(gc)})}},{key:"updateScale",value:function(G){var ma=this,Ga=G.value-G.prevValue;this.selectedMorphs.forEach(function(lb){var gc=lb.origin;lb.adjustOrigin(lb.localize(ma.worldPoint(Ha.pt(0,
0))));lb.scale+=Ga;lb.adjustOrigin(gc)})}},{key:"onChange",value:function(G){bb._get(Object.getPrototypeOf(tb.prototype),"onChange",this).call(this,G);if(this.modifiesSelectedMorphs){switch(G.prop){case "extent":this.updateExtent(G);break;case "scale":this.updateScale(G);break;case "position":this.updatePosition(G);break;case "rotation":this.updateRotation(G)}return G}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelectionTarget"}},{key:"properties",get:function(){return{visible:{defaultValue:!1},
modifiesSelectedMorphs:{defaultValue:!1},selectedMorphs:{defaultValue:[]},halosEnabled:{defaultValue:!1}}}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:18485,end:20756})})(Ha.Morph);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("HaloItem")&&
"function"===typeof oa.HaloItem?oa.HaloItem:oa.HaloItem=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"menuItems",value:function(){return[]}},{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"stop",value:function(){}},{key:"valueForPropertyDisplay",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"HaloItem"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:15},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:Ha.Color.gray.withA(.7)},grabbable:{defaultValue:!1},extent:{defaultValue:Ha.pt(24,24)},halo:{}}}},{key:"for",value:function(G){return G.getSubmorphNamed(this.morphName)||G.addMorph(new this({halo:G,name:this.morphName}))}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:20920,end:21593})})(Ha.Morph);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("NameHolder")&&"function"===typeof oa.NameHolder?oa.NameHolder:oa.NameHolder=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"onHoverIn",
value:function(G){this.highlightOnHover&&this.nameHolder.active&&(this.halo.toggleMorphHighlighter(!0,this.target),this.nameHolder.fontColor=Ha.Color.orange)}},{key:"onHoverOut",value:function(G){this.highlightOnHover&&(this.halo.toggleMorphHighlighter(!1,this.target),this.nameHolder.fontColor=Ha.Color.darkgray)}},{key:"accept",value:function(){this.target.name!==this.nameHolder.textString&&this.updateName(this.nameHolder.textString)}},{key:"onKeyDown",value:function(G){"Enter"==G.keyCombo?(this.accept(),
G.stop()):bb._get(Object.getPrototypeOf(tb.prototype),"onKeyDown",this).call(this,G)}},{key:"onMouseUp",value:function(){Ha.signal(this,"active",[!0,this])}},{key:"onMouseDown",value:function(G){this.nameHolder.fontColor=Ha.Color.white;this.halo.toggleMorphHighlighter(!1,this.target)}},{key:"onKeyUp",value:function(G){G=this.nameHolder.textString;var ma=this.target.owner;this.validName=!ma||!ma.getSubmorphNamed(G)||this.target.name==G;Ha.signal(this,"valid",[this.validName,G])}},{key:"update",value:function(){var G=
this;this.nameHolder.textString!==this.target.name&&(this.nameHolder.textString=this.target.name,this.whenRendered().then(function(){return G.nameHolder.fit()}))}},{key:"activate",value:function(){this.nameHolder.readOnly=!1;this.nameHolder.active=!0;this.nameHolder.animate({opacity:1})}},{key:"deactivate",value:function(){this.nameHolder.readOnly=!0;this.nameHolder.active=!1;this.nameHolder.animate({opacity:.3})}},{key:"updateName",value:function(G){if(!this.forceUniqueName||this.validName)this.target.name=
G,Ha.signal(this,"active",[!1,this])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHolder"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Click to edit the morph's name"},draggable:{defaultValue:!1},fill:{defaultValue:Ha.Color.transparent},forceUniqueName:{defaultValue:!1},halo:{},layout:{after:["nameHolder"],initialize:function(){this.layout=new Ha.HorizontalLayout({resizeContainer:!0,spacing:7})}},nameHolder:{after:["submorphs"],initialize:function(){this.nameHolder=
this.addMorph(new Ha.Text({fill:Ha.Color.transparent,fontColor:Ha.Color.white,fontWeight:"bold",active:!0}));Ha.connect(this.nameHolder,"onBlur",this,"accept")}}}}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21628,end:24179})})(Ha.Morph);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
tb=oa.hasOwnProperty("NameHaloItem")&&"function"===typeof oa.NameHaloItem?oa.NameHaloItem:oa.NameHaloItem=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:Symbol.for("lively-instance-initialize"),value:function(G){bb._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,G);this.initNameHolders();this.validityIndicator=Ha.Icon.makeLabel("check",{fontColor:Ha.Color.green,
fontSize:15,padding:Ha.rect(4,6,4,0)});this.fill=this.halo.target.isComponent?Ha.componentAccent:Ha.haloBlue;this.alignInHalo()}},{key:"targets",value:function(){return this.halo.target?this.halo.target.isMorphSelection?this.halo.target.selectedMorphs.map(function(G){return{target:G,highlightOnHover:!0}}):[{target:this.halo.target,highlightOnHover:!1}]:[]}},{key:"initNameHolders",value:function(){var G=this;this.nameHolders=this.targets().map(function(ma){ma=new Ha.NameHolder({halo:G.halo,highlightOnHover:ma.highlightOnHover,
target:ma.target});Ha.connect(ma,"active",G,"toggleActive");Ha.connect(ma,"valid",G,"toggleNameValid");return ma});this.submorphs=Ha.arr.interpose(this.nameHolders,{extent:Ha.pt(1,28),fill:Ha.Color.black.withA(.4)})}},{key:"toggleActive",value:function(G){G=$jscomp.makeIterator(G);var ma=G.next().value,Ga=G.next().value;this.halo.changingName!==ma&&((this.halo.changingName=ma)?(this.nameHolders.forEach(function(lb){return lb!=Ga&&lb.deactivate()}),this.borderWidth=3,this.addMorph(this.validityIndicator),
this.fill=Ha.Color.darkGray,setTimeout(function(){return Ga.nameHolder.selectAll()})):(this.fill=Ha.haloBlue,this.nameHolders.forEach(function(lb){return lb!=Ga&&lb.activate()}),this.borderWidth=0,this.validityIndicator.remove(),this.halo.focus()),this.alignInHalo())}},{key:"toggleNameValid",value:function(G){var ma=$jscomp.makeIterator(G);G=ma.next().value;ma=ma.next().value;(this.validName=G)?(this.conflictingMorph=null,this.borderColor=Ha.Color.green,this.validityIndicator.nativeCursor="auto",
this.validityIndicator.fontColor=Ha.Color.green,Ha.Icon.setIcon(this.validityIndicator,"check")):(this.conflictingMorph=this.get(ma),this.borderColor=Ha.Color.red,this.validityIndicator.fontColor=Ha.Color.red,this.validityIndicator.nativeCursor="pointer",Ha.Icon.setIcon(this.validityIndicator,"exclamation-circle"))}},{key:"alignInHalo",value:function(){Ha.arr.zip(this.targets(),this.nameHolders).map(function(ma){var Ga=$jscomp.makeIterator(ma);ma=Ga.next().value.target;Ga=Ga.next().value;Ga.target=
ma;Ga.update()});var G=this.halo.innerBounds().bottomCenter().addPt(Ha.pt(0,2));this.topCenter=Ha.pt(Math.max(G.x,30),Math.max(G.y,80))}},{key:"onMouseDown",value:function(G){var ma=this,Ga=this.conflictingMorph;Ga&&(this.halo.toggleMorphHighlighter(!0,Ga),setTimeout(function(){return ma.halo.toggleMorphHighlighter(!1,Ga)},1E3))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHaloItem"}},{key:"morphName",get:function(){return"name"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:4},
fill:{defaultValue:Ha.haloBlue},borderColor:{defaultValue:Ha.Color.green},layout:{initialize:function(){this.layout=new Ha.HorizontalLayout({resizeContainer:!0,spacing:0})}}}}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:24181,end:27375})})(Ha.HaloItem);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
tb=oa.hasOwnProperty("CloseHaloItem")&&"function"===typeof oa.CloseHaloItem?oa.CloseHaloItem:oa.CloseHaloItem=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"update",value:function(){var G=this.halo,ma=G.target.owner;ma.undoStart("close-halo");G.target.selectedMorphs?G.target.selectedMorphs.forEach(function(Ga){return Ga.remove()}):G.target.remove();ma.undoStop("close-halo");G.remove()}},{key:"onMouseDown",
value:function(G){this.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CloseHaloItem"}},{key:"morphName",get:function(){return"close"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["fas","fa-trash"]},draggable:{defaultValue:!1},tooltip:{defaultValue:"Remove this morph from the world"}}}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:27377,end:28002})})(Ha.HaloItem);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("GrabHaloItem")&&"function"===typeof oa.GrabHaloItem?oa.GrabHaloItem:oa.GrabHaloItem=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"adjustTarget",value:function(G,ma){Ha.PropertyPath("owner.layout.autoResize").get(G)&&
!G.globalBounds().insetBy(10).containsPoint(ma)&&(G=G.owner);return G}},{key:"valueForPropertyDisplay",value:function(){var G=this.hand,ma=this.halo,Ga=this.prevDropTarget,lb=G.world(),gc=G.findDropTarget(G.globalPosition,[ma.target],function(uc){return!uc.isHaloItem&&!uc.ownerChain().some(function(yd){return yd.isHaloItem||!yd.visible||0==yd.opacity})});if(gc)return gc=this.adjustTarget(gc,G.globalPosition),ma.toggleMorphHighlighter(gc&&gc!=lb,gc,!0),Ga&&Ga!=gc&&ma.toggleMorphHighlighter(!1,Ga),
(this.prevDropTarget=gc)&&gc.name}},{key:"init",value:function(G){var ma=this.halo,Ga=ma.target.undoStart("grab-halo");Ga&&Ga.addTarget(ma.target.owner);this.hand=G;ma.target.onGrab({halo:ma,hand:G,isShiftDown:function(){return!1}});ma.state.activeButton=this;this.opacity=.3;var lb=Ha.connect(G,"update",this,"update");Ha.once(ma.target,"remove",function(){return lb.disconnect()})}},{key:"stop",value:function(G){var ma=this.halo,Ga=this.prevDropTarget,lb=ma.target.undoInProgress,gc=G.hand.findDropTarget(G.hand.globalPosition,
[ma.target],function(uc){return!uc.isHaloItem&&!uc.ownerChain().some(function(yd){return yd.isHaloItem})});gc=this.adjustTarget(gc,G.hand.globalPosition);Ha.disconnect(G.hand,"update",this,"update");Ha.MorphHighlighter.interceptDrop(ma,gc,ma.target);lb.addTarget(gc);gc.onDrop(G);ma.state.activeButton=null;ma.alignWithTarget();ma.toggleMorphHighlighter(!1,Ga);Ha.MorphHighlighter.removeHighlighters(ma);ma.target.undoStop("grab-halo");this.opacity=1}},{key:"update",value:function(){this.halo.alignWithTarget()}},
{key:"onDragStart",value:function(G){this.init(G.hand)}},{key:"onDragEnd",value:function(G){this.stop(G)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GrabHaloItem"}},{key:"morphName",get:function(){return"grab"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["far","fa-hand-rock"]},tooltip:{defaultValue:"Grab the morph"},draggable:{defaultValue:!0}}}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:28004,end:30532})})(Ha.HaloItem);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("DragHaloItem")&&"function"===typeof oa.DragHaloItem?oa.DragHaloItem:oa.DragHaloItem=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,
ja,[{key:"valueForPropertyDisplay",value:function(){return this.halo.target.position}},{key:"updateAlignmentGuide",value:function(G){var ma=this.halo.getSubmorphNamed("mesh");if(G)return ma=this.halo.getMesh(this.halo.target.worldPoint(Ha.pt(0,0))),this.focus(),ma;ma&&ma.remove()}},{key:"init",value:function(){var G=this.halo.target;G.undoStart("drag-halo");this.halo.state.activeButton=this;this.actualPos=G.position;this.targetTransform=G.owner.getGlobalTransform().inverse()}},{key:"stop",value:function(){this.halo.target.undoStop("drag-halo");
this.halo.state.activeButton=null;this.halo.alignWithTarget();this.updateAlignmentGuide(!1);Ha.removeSnapToGuidesOf(this.halo.target)}},{key:"update",value:function(G,ma,Ga){ma=void 0===ma?!1:ma;Ga=void 0===Ga?!1:Ga;this.actualPos=G=this.actualPos.addPt(this.targetTransform.transformDirection(G));ma&&(G=G.griddedBy(Ha.pt(10,10)));this.halo.target.position=G;this.updateAlignmentGuide(ma);ma||Ha.showAndSnapToGuides(this.halo.target,!0,Ga,5,500)}},{key:"onDragStart",value:function(G){this.init()}},{key:"onDrag",
value:function(G){this.update(G.state.dragDelta,G.isAltDown(),G.isCtrlDown())}},{key:"onDragEnd",value:function(G){this.stop()}},{key:"onKeyUp",value:function(G){this.updateAlignmentGuide(!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DragHaloItem"}},{key:"morphName",get:function(){return"drag"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},styleClasses:{defaultValue:["fas","fa-arrows-alt"]},tooltip:{defaultValue:"Change the morph's position. Press (alt) while dragging to align the morph's position along a grid."}}}}],
oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:30534,end:32372})})(Ha.HaloItem);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("InspectHaloItem")&&"function"===typeof oa.InspectHaloItem?oa.InspectHaloItem:oa.InspectHaloItem=function(G){G&&
G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"onMouseDown",value:function(G){var ma=this;(function(){var Ga,lb,gc,uc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yd){if(1==yd.nextAddress)return yd.yield(System.import("lively.ide/js/inspector.js"),2);Ga=yd.yieldResult;lb=Ga.default;(gc=ma.world().getSubmorphsByStyleClassName("Inspector").find(function(Pd){return Pd.targetObject==ma.halo.target}))&&
(uc=gc.getWindow())?(uc.minimized=!1,uc.activate(),uc.animate({center:ma.world().visibleBounds().center(),duration:200})):lb.openInWindow({targetObject:ma.halo.target});ma.halo.remove();yd.jumpToEnd()})})()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InspectHaloItem"}},{key:"morphName",get:function(){return"inspect"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Inspect the morph's local state"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-cogs"]}}}}],
oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:32374,end:33291})})(Ha.HaloItem);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("EditHaloItem")&&"function"===typeof oa.EditHaloItem?oa.EditHaloItem:oa.EditHaloItem=function(G){G&&G[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"onMouseDown",value:function(G){var ma=this;(G=this.world().getSubmorphsByStyleClassName("ObjectEditor").find(function(Ga){return Ga.target==ma.halo.target}))?(G=G.getWindow(),G.bringToFront(),G.minimized=!1,G.animate({center:this.world().visibleBounds().center(),duration:200})):$world.execCommand("open object editor",{target:this.halo.target});this.halo.remove()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"EditHaloItem"}},{key:"morphName",get:function(){return"edit"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Edit the morph's definition"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-wrench"]}}}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:33293,end:34073})})(Ha.HaloItem);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("RotateHaloItem")&&"function"===typeof oa.RotateHaloItem?oa.RotateHaloItem:oa.RotateHaloItem=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:Symbol.for("lively-instance-initialize"),value:function(G){bb._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,G);this.adaptAppearance(!1)}},{key:"angle",get:function(){return this.getProperty("angle")||0}},{key:"angle",set:function(G){this.setProperty("angle",G)}},{key:"scaleGauge",get:function(){return this.getProperty("scaleGauge")||null}},{key:"scaleGauge",set:function(G){this.setProperty("scaleGauge",G)}},{key:"initRotation",get:function(){return this.getProperty("initRotation")||0}},{key:"initRotation",set:function(G){this.setProperty("initRotation",G)}},{key:"valueForPropertyDisplay",
value:function(){var G=this.halo.target;return this.scaleGauge?G.scale.toFixed(4).toString():Ha.num.toDegrees(G.rotation).toFixed(1)+"\u00b0"}},{key:"init",value:function(G){this.detachFromLayout();this.halo.target.undoStart("rotate-halo");this.halo.state.activeButton=this;this.angle=G;this.initRotation=this.halo.target.rotation;this.halo.toggleRotationIndicator(!0,this)}},{key:"initScale",value:function(G){this.detachFromLayout();this.halo.state.activeButton=this;this.scaleGauge=G.scaleBy(1/this.halo.target.scale);
this.halo.toggleRotationIndicator(!0,this)}},{key:"update",value:function(G){this.scaleGauge=null;G=this.initRotation+(G-this.angle);G=Ha.num.toRadians(Ha.num.detent(Ha.num.toDegrees(G),10,45));this.halo.target.rotation=G;this.halo.toggleRotationIndicator(!0,this)}},{key:"updateScale",value:function(G){var ma=this.scaleGauge,Ga=this.halo;ma||(ma=this.scaleGauge=G.scaleBy(1/Ga.target.scale));this.angle=G.theta();this.initRotation=Ga.target.rotation;Ga.target.scale=Ha.num.detent(G.dist(Ha.pt(0,0))/
ma.dist(Ha.pt(0,0)),.1,.5);Ga.toggleRotationIndicator(!0,this)}},{key:"stop",value:function(){this.attachToLayout();this.scaleGauge=null;this.halo.state.activeButton=null;this.halo.alignWithTarget();this.halo.toggleRotationIndicator(!1,this);this.halo.target.undoStop("rotate-halo");this.halo.ensureResizeHandles()}},{key:"adaptAppearance",value:function(G){this.styleClasses=["fas",G?"fa-search-plus":"fa-redo"];this.tooltip=G?"Scale morph":"Rotate morph"}},{key:"detachFromLayout",value:function(){this.savedLayout=
this.halo.layout;this.halo.layout=null}},{key:"attachToLayout",value:function(){this.halo.layout=this.savedLayout}},{key:"onDragStart",value:function(G){this.adaptAppearance(G.isShiftDown());G.isShiftDown()?this.initScale(G.position.subPt(this.halo.target.globalPosition)):this.init(G.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDrag",value:function(G){this.globalPosition=G.position.addPt(Ha.pt(-10,-10));this.adaptAppearance(G.isShiftDown());G.isShiftDown()?this.updateScale(G.position.subPt(this.halo.target.globalPosition)):
this.update(G.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDragEnd",value:function(G){this.adaptAppearance(G.isShiftDown());this.stop()}},{key:"onKeyDown",value:function(G){this.adaptAppearance(G.isShiftDown())}},{key:"onKeyUp",value:function(G){this.adaptAppearance(G.isShiftDown())}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RotateHaloItem"}},{key:"morphName",get:function(){return"rotate"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0}}}}],
oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:34075,end:37552})})(Ha.HaloItem);Ha.nameNumberRe=/(.+)([0-9]+)$/;(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("ComponentHaloItem")&&"function"===typeof oa.ComponentHaloItem?oa.ComponentHaloItem:
oa.ComponentHaloItem=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"updateComponentIndicator",value:function(){var G=this.world(),ma=this.halo.target;this.halo.remove();G.showHaloFor(ma)}},{key:"onMouseDown",value:function(){this.halo.target.isComponent=!this.halo.target.isComponent;this.updateComponentIndicator()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ComponentHaloItem"}},
{key:"morphName",get:function(){return"component"}},{key:"properties",get:function(){return{tooltip:{get:function(){return this.halo.target.isComponent?"Retract Component":"Turn into Component"}},styleClasses:{initialize:function(){this.styleClasses=this.halo.target.isComponent?["fas","fa-eraser"]:["fas","fa-cube"]}}}}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:37593,end:38343})})(Ha.HaloItem);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("CopyHaloItem")&&"function"===typeof oa.CopyHaloItem?oa.CopyHaloItem:oa.CopyHaloItem=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"init",value:function(G){function ma(ve,Uc){return Uc.match(Ha.nameNumberRe)?
Uc.replace(Ha.nameNumberRe,function(Sd,De,Td){Td||(Td="0");for(Sd=Number(Td);ve.get(De+ ++Sd););return De+Sd}):Uc+"1"}var Ga=this.halo,lb=Ga.target,gc=Ga.world(),uc=lb instanceof Ha.MultiSelectionTarget;Ga.remove();Ha.connect(G,"update",this,"update");if(uc){var yd=lb.selectedMorphs.map(function(ve){return gc.addMorph(ve.copy())});uc=yd.map(function(ve){ve.name=ma(lb,ve.name);return ve.position});yd[0].undoStart("copy-halo");gc.addMorph(Ga);Ga.refocus(yd);G.grab(Ga.target);Ga.target.onGrab({halo:Ga,
hand:G,isShiftDown:function(){return!1}});uc.forEach(function(ve,Uc){return yd[Uc].globalPosition=ve});Ga.alignWithTarget()}else{uc=lb.globalPosition;var Pd=lb.copy();lb.isComponent&&(Pd.isComponent=!1,Pd.withAllSubmorphsDoExcluding(function(ve){ve!=Pd&&ve.master||delete ve._parametrizedProps},function(ve){return ve.master&&ve!=Pd}),Pd.master=lb);Pd.name=ma(lb,lb.name);gc.addMorph(Pd);Pd.globalPosition=uc;Pd.undoStart("copy-halo");G.grab(Pd);gc.addMorph(Ga);Ga.visible=!1}}},{key:"stop",value:function(G){var ma=
this.halo,Ga=$jscomp.makeIterator(G.grabbedMorphs).next().value,lb=G.findDropTarget(G.globalPosition,[ma.target],function(uc){return!uc.isHaloItem&&!uc.ownerChain().some(function(yd){return yd.isHaloItem})}),gc=ma.target.undoInProgress;Ha.disconnect(G,"update",this,"update");gc.addTarget(lb);G.dropMorphsOn(lb);ma.target.undoStop("copy-halo");ma.remove();G.world().showHaloFor(Ga)}},{key:"onDragStart",value:function(G){this.init(G.hand)}},{key:"onDragEnd",value:function(G){this.stop(G.hand)}},{key:"update",
value:function(){this.halo.alignWithTarget()}},{key:"copyToClipBoard",value:function(){var G=this,ma,Ga,lb,gc,uc,yd,Pd,ve,Uc,Sd,De,Td,Gf,Te,mc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(we){switch(we.nextAddress){case 1:ma=G;Ga=ma.halo;if(Ga.nameHalo().nameHolders.find(function(qf){return qf.nameHolder===$world.focusedMorph}))return we.return();lb=Ga.target;gc=Ga.world();uc=lb instanceof Ha.MultiSelectionTarget;yd=lb.globalBounds().topLeft();Pd=uc?lb.selectedMorphs:[lb];ve=[];Uc=
'<!DOCTYPE html>\n          <html lang="en">\n          <head>\n            <meta charset="utf-8">\n            '+document.querySelector("#lively-morphic-css").outerHTML+"\n          </head>\n          <body>";Ga.remove();we.setCatchFinallyBlocks(2);Sd=$jscomp.makeIterator(Pd);De=Sd.next();case 4:if(De.done)return Uc+="</body></html>",Te=JSON.stringify(ve),we.yield(G.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/html",data:Uc},{type:"application/morphic",data:Te}]),8);Td=De.value;return we.yield(Ha.createMorphSnapshot(Td,
{addPreview:!1,testLoad:!1}),7);case 7:Gf=we.yieldResult;Gf.copyMeta={offset:Td.worldPoint(Ha.pt(0,0)).subPt(yd)};ve.push(Gf);Uc+=Td.renderPreview();De=Sd.next();we.jumpTo(4);break;case 8:we.leaveTryBlock(3);break;case 2:return mc=we.enterCatchBlock(),gc.logError(mc),we.return();case 3:gc.addMorph(Ga),Ga.refocus(Pd),Ga.setStatusMessage("copied"),we.jumpToEnd()}})}},{key:"onMouseUp",value:function(G){var ma=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){G.stop();return Ga.yield(ma.copyToClipBoard(),
0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CopyHaloItem"}},{key:"morphName",get:function(){return"copy"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},tooltip:{defaultValue:"Copy morph"},styleClasses:{defaultValue:["far","fa-clone"]}}}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:38345,end:42379})})(Ha.HaloItem);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("OriginHaloItem")&&"function"===typeof oa.OriginHaloItem?oa.OriginHaloItem:oa.OriginHaloItem=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"fill",get:function(){return Ha.Color.white.interpolate(.2,this.borderColorTop)}},{key:"extent",get:function(){return Ha.pt(15,
15)}},{key:"tooltip",get:function(){return"Change the morph's origin"}},{key:"computePositionAtTarget",value:function(){return this.halo.localize(this.halo.target.globalPosition)}},{key:"alignInHalo",value:function(){this.visible=!this.halo.hasTinyTarget;this.center=this.computePositionAtTarget()}},{key:"valueForPropertyDisplay",value:function(){return this.halo.target.origin}},{key:"init",value:function(){this.halo.target.undoStart("origin-halo");this.halo.state.activeButton=this}},{key:"stop",value:function(){this.halo.target.undoStop("origin-halo");
this.halo.state.activeButton=null;this.halo.alignWithTarget()}},{key:"update",value:function(G){var ma=this.halo,Ga=ma.target.origin,lb=ma.target.worldPoint(Ga);G=ma.target.localize(lb.addPt(G)).subPt(ma.target.scroll).subPt(Ga);ma.target.adjustOrigin(ma.target.origin.addPt(G))}},{key:"onDragStart",value:function(G){this.init()}},{key:"onDragEnd",value:function(G){this.stop()}},{key:"onDrag",value:function(G){this.update(G.state.dragDelta)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OriginHaloItem"}},
{key:"morphName",get:function(){return"origin"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:3},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0},borderColor:{after:["halo"],initialize:function(){this.borderColor=this.halo.target.isComponent?Ha.componentAccent:Ha.haloBlue}}}}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:42381,end:44042})})(Ha.HaloItem);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("ResizeHandle")&&"function"===typeof oa.ResizeHandle?oa.ResizeHandle:oa.ResizeHandle=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"valueForPropertyDisplay",value:function(){var G=this.halo.target.extent,
ma=G.y;return G.x.toFixed(1)+"x"+ma.toFixed(1)}},{key:"positionInHalo",value:function(){var G=this.halo.borderBox.bounds();this.halo.hasTinyTarget&&(Ha.Rectangle.prototype.sides.includes(this.location)&&(this.visible=!1),G=G.insetBy(-4));return G.partNamed(this.location)}},{key:"alignInHalo",value:function(){this.center=this.positionInHalo();return this}},{key:"onKeyUp",value:function(G){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(G.isShiftDown(),this.corner)}},{key:"onKeyDown",value:function(G){this.halo.state.activeButton==
this&&this.halo.toggleDiagonal(G.isShiftDown(),this.corner)}},{key:"onDragStart",value:function(G){this.init(G.position,G.isShiftDown())}},{key:"onDragEnd",value:function(G){this.stop(G.isShiftDown())}},{key:"onDrag",value:function(G){this.update(G.position,G.isShiftDown(),G.isAltDown(),G.isCtrlDown());this.focus()}},{key:"init",value:function(G,ma){ma=void 0===ma?!1:ma;var Ga=this.halo.target,lb=Ga.origin,gc=Ga.position;Ga=Ga.extent;this.startPos=G;this.startBounds=gc.subPt(lb).extent(Ga);this.startOrigin=
this.halo.target.origin;this.savedLayout=this.halo.layout;this.halo.layout=null;this.halo.state.activeButton=this;this.tfm=this.halo.target.getGlobalTransform().inverse();G=this.halo.target.getGlobalTransform().getRotation();this.offsetRotation=Ha.num.toRadians(G%45);this.halo.toggleDiagonal(ma,this.corner)}},{key:"update",value:function(G,ma,Ga,lb){ma=void 0===ma?!1:ma;Ga=void 0===Ga?!1:Ga;lb=void 0===lb?!1:lb;var gc=this.corner,uc=this.tfm;G=this.startPos.subPt(G);uc=uc.transformDirection(Ha.pt(G.x,
G.y));Ga&&(uc=uc.griddedBy(Ha.pt(10,10)));this.halo.updateBoundsFor(gc,ma,uc,this.startBounds,this.startOrigin);this.halo.toggleDiagonal(ma,gc);this.updateAlignmentGuide(Ga);ma=[];gc=gc.toLowerCase();gc.includes("left")&&ma.push("left");gc.includes("top")&&ma.push("top");gc.includes("bottom")&&ma.push("bottom");gc.includes("right")&&ma.push("right");Ha.showAndSnapToResizeGuides(this.halo.target,ma,!0,lb,5,200)}},{key:"stop",value:function(G){G=this.halo;G.layout=this.savedLayout;G.state.activeButton=
null;G.alignWithTarget();G.toggleDiagonal(!1);this.updateAlignmentGuide(!1);Ha.removeSnapToGuidesOf(G.target)}},{key:"updateAlignmentGuide",value:function(G){var ma=this.halo.getSubmorphNamed("mesh");if(G)return G=this.halo.target.extent,G=Ha.pt(G.x%10,G.y%10),ma=this.halo.getMesh(this.globalPosition.addPt(this.extent.scaleBy(.5)),G),this.focus(),ma;ma&&ma.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ResizeHandle"}},{key:"properties",get:function(){return{corner:{},location:{},
draggable:{defaultValue:!0},isResizeHandle:{readOnly:!0,get:function(){return!0}}}}},{key:"getResizeParts",value:function(G){0<G&&(G-=360);G=-8-(G/45).toFixed();0==G&&(G=8);return Ha.arr.zip(Ha.arr.rotate([["topLeft",function(ma){return ma.negated()}],["topCenter",function(ma){return ma.withX(0).negated()}],["topRight",function(ma){return ma.withX(0).negated()}],["rightCenter",function(ma){return Ha.pt(0,0)}],["bottomRight",function(ma){return Ha.pt(0,0)}],["bottomCenter",function(ma){return Ha.pt(0,
0)}],["bottomLeft",function(ma){return ma.withY(0).negated()}],["leftCenter",function(ma){return ma.withY(0).negated()}]],G),[["nwse-resize","topLeft"],["ns-resize","topCenter"],["nesw-resize","topRight"],["ew-resize","rightCenter"],["nwse-resize","bottomRight"],["ns-resize","bottomCenter"],["nesw-resize","bottomLeft"],["ew-resize","leftCenter"]])}},{key:"resizersFor",value:function(G){var ma=this;if(!G.target)return[];var Ga=G.target.getGlobalTransform().getRotation();return Ha.arr.compact(this.getResizeParts(Ga).map(function(lb){var gc=
$jscomp.makeIterator(lb),uc=$jscomp.makeIterator(gc.next().value);lb=uc.next().value;uc.next();uc.next();uc=$jscomp.makeIterator(gc.next().value);gc=uc.next().value;uc=uc.next().value;return ma.for(G,lb,uc,gc)})).map(function(lb){return lb.alignInHalo()})}},{key:"for",value:function(G,ma,Ga,lb){var gc="Resize "+ma;G=G.getSubmorphNamed(gc)||new this({name:gc,halo:G,corner:ma,tooltip:"Resize "+ma,extent:Ha.pt(10,10),borderWidth:1,borderRadius:0,borderColor:G.target.isComponent?Ha.componentAccent:Ha.haloBlue,
fill:Ha.Color.white});return Object.assign(G,{nativeCursor:lb,location:Ga})}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:44101,end:49399})})(Ha.HaloItem);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("MenuHaloItem")&&"function"===
typeof oa.MenuHaloItem?oa.MenuHaloItem:oa.MenuHaloItem=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"onMouseDown",value:function(G){var ma=this,Ga,lb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gc){if(1==gc.nextAddress)return Ga=ma.halo.target,ma.halo.remove(),gc.yield(Ga.menuItems(),2);lb=gc.yieldResult;Ga.world().openMenu(lb).hasFixedPosition=ma.halo.hasFixedPosition;gc.jumpToEnd()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuHaloItem"}},{key:"morphName",get:function(){return"menu"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},tooltip:{defaultValue:"Opens the morph menu"},styleClasses:{defaultValue:["fas","fa-bars"]}}}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:49401,end:49923})})(Ha.HaloItem);var vd=ta("M",function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("MorphHighlighter")&&"function"===typeof oa.MorphHighlighter?oa.MorphHighlighter:oa.MorphHighlighter=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"alignWithHalo",value:function(){this.target&&(this.position=this.halo.localize(this.target.globalBounds().topLeft()),
this.halo.isWorld&&(this.position=this.position.subPt(this.halo.scroll)),this.extent=this.target.globalBounds().extent(),this.get("name tag").value=this.target.name,this.get("name tag").topCenter=this.innerBounds().insetBy(-10).bottomCenter())}},{key:"show",value:function(){if(this.target&&this.target.layout&&this.showLayout&&(this.layoutHalo=this.layoutHalo||this.world().showLayoutHaloFor(this.target,this.pointerId))&&this.layoutHalo.previewDrop){this.visible=!1;this.alignWithHalo();this.halo.get("grab").hand.grabbedMorphs&&
this.layoutHalo.previewDrop(this.halo.get("grab").hand.grabbedMorphs);return}this.visible=!0;this.alignWithHalo()}},{key:"handleDrop",value:function(G){this.layoutHalo&&this.layoutHalo.handleDrop(G)}},{key:"deactivate",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null);this.visible=!1;this.alignWithHalo();this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphHighlighter"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},
name:{defaultValue:"morphHighlighter"},styleClasses:{defaultValue:["inactive"]},reactsToPointer:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},fill:{defaultValue:Ha.Color.orange.withA(.3)},borderWidth:{defaultValue:2},borderColor:{defaultValue:Ha.Color.orange},halo:{},epiMorph:{defaultValue:!0},isHighlighter:{readOnly:!0,defaultValue:!0},highlightedSides:{defaultValue:[],set:function(G){var ma=this;this.setProperty("highlightedSides",G);this.submorphs=G.map(function(Ga){return{type:"ellipse",
isHaloItem:!0,fill:Ha.Color.orange,center:ma.innerBounds()[Ga]()}});this.addMorph({type:"label",name:"name tag",padding:Ha.Rectangle.inset(5,5,5,5),fontColor:Ha.Color.white,fill:Ha.Color.orange,borderRadius:3});this.alignWithHalo()}},showLayout:{defaultValue:!1},targetId:{},target:{readOnly:!0,derived:!0,get:function(){return(this.world()||this.env.world).getMorphWithId(this.targetId)}}}}},{key:"removeHighlighters",value:function(G){G=void 0===G?$world:G;var ma=G._morphHighlighters,Ga;for(Ga in ma)ma[Ga].remove();
delete G._morphHighlighters}},{key:"for",value:function(G,ma,Ga,lb){Ga=void 0===Ga?!1:Ga;lb=void 0===lb?[]:lb;var gc=G._morphHighlighters=G._morphHighlighters||{};Ha.properties.forEachOwn(gc,function(uc,yd){return yd.alignWithHalo()});if(!ma||ma.ownerChain().find(function(uc){return uc.isHaloItem}))return null;gc[ma.id]=gc[ma.id]||new this({targetId:ma.id,halo:G,showLayout:Ga});G.addMorph(gc[ma.id]);gc[ma.id].highlightedSides=lb;return gc[ma.id]}},{key:"interceptDrop",value:function(G,ma,Ga){(G=G._morphHighlighters=
G._morphHighlighters||{},G[ma.id])&&G[ma.id].handleDrop(Ga)}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:50112,end:53723})}(Ha.Morph));Ha.MorphHighlighter=vd;Ha.MorphHighlighter=vd;Ha.MorphHighlighter=vd;var Gc=ta("I",function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
tb=oa.hasOwnProperty("InteractiveMorphSelector")&&"function"===typeof oa.InteractiveMorphSelector?oa.InteractiveMorphSelector:oa.InteractiveMorphSelector=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:Symbol.for("lively-instance-initialize"),value:function(G,ma,Ga){G=void 0===G?$world:G;this.controllingMorph=void 0===ma?null:ma;this.possibleTarget=this.morphHighlighter=this.selectorMorph=null;this.world=
G;this.filterFn=Ga;this.whenDone=null}},{key:"selectNewTarget",value:function(){this.targetObject=null;var G=Ha.promise.deferred();G.promise.resolve=G.resolve;this.whenDone=G.promise;this.selectorMorph=Ha.Icon.makeLabel("crosshairs",{fontSize:20,hasFixedPosition:!0,epiMorph:!0}).openInWorld();Ha.connect(this.world.firstHand,"position",this,"scanForTargetAt");Ha.once(this.selectorMorph,"onMouseDown",this,"selectTarget");Ha.once(this.selectorMorph,"onKeyDown",this,"stopSelect");this.selectorMorph.focus();
this.scanForTargetAt(this.world.firstHand.position)}},{key:"scanForTargetAt",value:function(){var G=this.world.firstHand.globalPosition;this.selectorMorph.center=G;this.selectorMorph.focus();var ma=this.selectorMorph.morphBeneath(G),Ga,lb=this.possibleTarget,gc=this.controllingMorph,uc=this.filterFn,yd=this.world,Pd=this.morphHighlighter;for(Pd==ma?ma=Pd.morphBeneath(G):ma&&ma.isEpiMorph&&(ma=ma.morphBeneath(G));ma&&(Ga=[ma].concat($jscomp.arrayFromIterable(ma.ownerChain())).find(function(ve){return!ve.visible}));)ma=
Ga=Ga.morphBeneath(G);if(ma&&uc&&!uc(ma))for(;ma&&![ma].concat($jscomp.arrayFromIterable(ma.ownerChain())).find(uc);)ma=ma.morphBeneath(G);!ma||ma==lb||gc&&ma.ownerChain().includes(gc.getWindow())||(Pd&&Pd.deactivate(),(this.possibleTarget=lb=ma)&&!lb.isWorld&&(G=this.morphHighlighter=Ha.MorphHighlighter.for(yd,ma))&&G.show())}},{key:"selectTarget",value:function(){this.targetObject=this.possibleTarget;this.stopSelect()}},{key:"stopSelect",value:function(){Ha.MorphHighlighter.removeHighlighters(this.world);
Ha.disconnect(this.world.firstHand,"position",this,"scanForTargetAt");this.selectorMorph.remove();this.whenDone&&this.whenDone.resolve(this.targetObject)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveMorphSelector"}},{key:"selectMorph",value:function(G,ma,Ga){G=new this(G,ma,Ga);G.selectNewTarget();return G.whenDone}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:53732,end:56487})}(void 0));Ha.InteractiveMorphSelector=Gc;Ha.InteractiveMorphSelector=Gc;Ha.InteractiveMorphSelector=Gc;Ha.default=Lb;var Ma=lively.FreezerRuntime.recorderFor("lively.halos/markers.js");Ma.show=xa;Ma.showRect=function(ja,oa,tb){var G=Ma.BoundsMarker.highlightBounds(oa);return tb?Ma.showInLoop(ja,G,oa):Ma.showThenHide(ja,G)};Ma.showInLoop=function(ja,oa,tb){var G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ma){switch(ma.nextAddress){case 1:return Ma.showThenHide(ja,
oa,!1),ma.yield(Ma.promise.delay(300),2);case 2:G=!1,Ma.once(ja,"onMouseDown",function(){return G=!0});case 3:if(G){ma.jumpTo(4);break}return ma.yield(oa.retract(tb),3);case 4:oa.fadeOut(2E3),ma.jumpToEnd()}})};Ma.showThenHide=function(ja,oa,tb){tb=void 0===tb?3:tb;if(ja){var G=Array.isArray(oa)?oa:[oa];G.forEach(function(ma){return ja.addMorph(ma)});tb&&setTimeout(function(){return G.forEach(function(ma){return ma.fadeOut(2E3)})},1E3*tb);return oa}};Ma.showLine=function(ja,oa,tb){tb=void 0===tb?
3E3:tb;var G=oa.start;oa=oa.end.subPt(G);var ma=ja.addMorph({position:G,rotation:oa.theta(),border:{width:1,color:Ma.Color.red},width:oa.fastR(),height:0});tb&&setTimeout(function(){return ma.fadeOut()},tb);return ma};Ma.showConnector=Eb;Ma.obj=$b;Ma.promise=Bc;Ma.string=pb;Ma.pt=xb;Ma.Color=Ob;Ma.Rectangle=Sa;Ma.rect=sc;Ma.morph=Hb;Ma.easings=pc;Ma.Path=Fc;Ma.Icon=Jd;Ma.Morph=qd;Ma.MorphicEnv=ab;Ma.connect=ub;Ma.once=cd;Ma.disconnect=wc;Ma.show=xa;Ma.show=xa;(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),
tb=oa.hasOwnProperty("BoundsMarker")&&"function"===typeof oa.BoundsMarker?oa.BoundsMarker:oa.BoundsMarker=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:Symbol.for("lively-instance-initialize"),value:function(){bb._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{borderWidth:0,fill:Ma.Color.transparent,reactsToPointer:!1,hasFixedPosition:!0})}},{key:"isEpiMorph",
get:function(){return!0}},{key:"markerLength",value:function(G){G=G.insetBy(-2);G=Math.min(G.width,G.height);return Math.max(4,Math.floor(10>G/10?G/2-5:G/10))}},{key:"createMarkerEdge",value:function(){return Ma.morph({fill:Ma.Color.red,reactsToPointer:!1,borderRadius:10})}},{key:"ensureMarkerCorners",value:function(){var G=this.topLeftH||(this.topLeftH=this.addMorph(this.createMarkerEdge())),ma=this.topLeftV||(this.topLeftV=this.addMorph(this.createMarkerEdge())),Ga=this.topRightH||(this.topRightH=
this.addMorph(this.createMarkerEdge())),lb=this.topRightV||(this.topRightV=this.addMorph(this.createMarkerEdge())),gc=this.bottomRightH||(this.bottomRightH=this.addMorph(this.createMarkerEdge())),uc=this.bottomRightV||(this.bottomRightV=this.addMorph(this.createMarkerEdge())),yd=this.bottomLeftH||(this.bottomLeftH=this.addMorph(this.createMarkerEdge())),Pd=this.bottomLeftV||(this.bottomLeftV=this.addMorph(this.createMarkerEdge()));return[G,ma,Ga,lb,gc,uc,yd,Pd]}},{key:"alignWithMorph",value:function(G){return this.alignWithBounds(G.globalBounds().translatedBy($world.scroll.negated()))}},
{key:"alignWithBounds",value:function(G){this.alignWithRect(G.insetBy(-20));return this.alignWithRect(G,!0)}},{key:"alignWithRect",value:function(G,ma){var Ga=this.ensureMarkerCorners(),lb=this.markerLength(G),gc=[G.topLeft().addXY(0,0).extent(Ma.pt(lb,5)),G.topLeft().addXY(0,0).extent(Ma.pt(5,lb)),G.topRight().addXY(-lb,0).extent(Ma.pt(lb,5)),G.topRight().addXY(-5,0).extent(Ma.pt(5,lb)),G.bottomRight().addXY(-5,-lb).extent(Ma.pt(5,lb)),G.bottomRight().addXY(-lb,-5).extent(Ma.pt(lb,5)),G.bottomLeft().addXY(0,
-5).extent(Ma.pt(lb,5)),G.bottomLeft().addXY(0,-lb).extent(Ma.pt(5,lb))];Ga.forEach(function(uc,yd){return uc.setBounds(gc[yd])});ma&&(this.adjustOrigin(G.center()),this.opacity=0,this.scale=1.5,this.animate({opacity:1,scale:1,duration:300}));return this}},{key:"retract",value:function(G){var ma=this,Ga;return $jscomp.asyncExecutePromiseGeneratorProgram(function(lb){if(1==lb.nextAddress)return lb.yield(ma.animate({scale:Math.max(30/G.width,1.05)}),2);Ga=ma.center;return lb.yield(ma.animate({center:Ga,
scale:1,duration:300,easing:Ma.easings.inOutExpo}),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BoundsMarker"}},{key:"highlightMorph",value:function(G){return(new this).alignWithMorph(G)}},{key:"highlightBounds",value:function(G){return(new this).alignWithBounds(G)}}],oa,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:2261,end:5920})})(Ma.Morph);Lb=ta("S",function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),tb=oa.hasOwnProperty("StatusMessage")&&"function"===typeof oa.StatusMessage?oa.StatusMessage:oa.StatusMessage=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"relayout",value:function(){this.title=Ma.string.truncate(this.message,(this.width/15).toFixed(),
"...")}},{key:"isEpiMorph",value:function(){return!0}},{key:"isStatusMessage",value:function(){return!0}},{key:"setMessage",value:function(G,ma){this.message=G;this.color=ma}},{key:"slideTo",value:function(G){var ma=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){if(1==Ga.nextAddress)return ma.sliding=ma.animate({position:G,duration:500}),Ga.yield(ma.sliding,2);ma.sliding=!1;Ga.jumpToEnd()})}},{key:"expand",value:function(){var G=this,ma,Ga,lb,gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(uc){if(1==
uc.nextAddress)return G.expandable?G.sliding?uc.yield(G.sliding,2):uc.jumpTo(2):uc.return();ma=G.world();if(!ma||G.isMaximized)return uc.return();G.isMaximized=!0;G.stayOpen=!0;Ga=G.getSubmorphNamed("message text");Ga.lineWrapping=!1;Object.assign(Ga,{clipMode:"auto",fixedWidth:!0,selectable:!0});G.expandedContent&&(Ga.value=G.expandedContent);Ga.fit();lb=Ga.textBounds().extent();gc=ma.visibleBounds();lb.y>gc.extent().y&&(lb.y=gc.extent().y-20);lb.x>gc.extent().x&&(lb.x=gc.extent().x-20);lb=G.extent.maxPt(lb);
G.animate({extent:lb,center:gc.center(),duration:200});G.relayout();G.focus();uc.jumpToEnd()})}},{key:"fit",value:function(){var G=this.getSubmorphNamed("message text");G&&(this.extent=Ma.pt(100,35).maxPt(G.textBounds().extent()),this.relayout())}},{key:"focus",value:function(){var G=this.getSubmorphNamed("message text");G&&G.focus()}},{key:"onMouseUp",value:function(G){this.expand()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessage"}},{key:"properties",get:function(){return{extent:{defaultValue:Ma.pt(200,
100)},stayOpen:{defaultValue:!1},slidable:{defaultValue:!0},isMaximized:{defaultValue:!1},expandable:{initialize:function(){this.expandable=!0}},maxLines:{defaultValue:Infinity},name:{defaultValue:"messageMorph"},master:{initialize:function(){this.master={auto:"styleguide://System/message"}}},message:{after:["submorphs","extent"],set:function(G){this.setProperty("message",G);var ma=this.getSubmorphNamed("message text");if(ma){ma.value=G;var Ga=ma.documentEndPosition;Ga.row>this.maxLines&&(ma.replace({start:{row:this.maxLines,
column:0},end:Ga},"...\n"),this.expandedContent||(this.expandedContent=G));Ga=ma.documentEndPosition;0!==Ga.column&&ma.insertText("\n",Ga)}}},title:{isStyleProp:!0,derived:!0,set:function(G){this.getSubmorphNamed("message title").value=G},get:function(){return this.getSubmorphNamed("message title").value}},color:{after:["submorphs"],derived:!0,get:function(){return this.get("message icon").fontColor},set:function(G){this.get("message icon").fontColor=G;this.get("message icon")._parametrizedProps&&
(this.get("message icon")._parametrizedProps.fontColor=G)}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[{name:"message icon",type:"label",value:Ma.Icon.textAttribute("check-circle")},{name:"message text",type:"text"},{name:"message title",type:"label"},{name:"close button",type:"button"}];Ma.connect(this.getSubmorphNamed("close button"),"fire",this,"remove");Ma.connect(this,"extent",this,"relayout")}}}}}],oa,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:5964,end:10242})}(Ma.Morph));Ma.StatusMessage=Lb;Ma.StatusMessage=Lb;Ma.StatusMessage=Lb;var tc=ta("b",function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),tb=oa.hasOwnProperty("StatusMessageForMorph")&&"function"===typeof oa.StatusMessageForMorph?oa.StatusMessageForMorph:oa.StatusMessageForMorph=function(G){G&&G[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"alignAtBottomOf",value:function(G){var ma=this.world();ma&&(this.bringToFront(),this.fit(),this.width=G.bounds().width,this.relayout(),G.world()&&(this.position=G.owner.worldPoint(G.bounds().bottomLeft())),G=ma.visibleBounds(),G=this.bounds().top()+this.height-G.bottom(),0<G&&this.moveBy(Ma.pt(0,-G)))}},{key:"onMouseUp",value:function(G){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessageForMorph"}},
{key:"properties",get:function(){return{slidable:{defaultValue:!1},renderOnGPU:{defaultValue:!0},removeOnTargetMorphChange:{defaultValue:!0},targetMorph:{defaultValue:null,get:function(){var G=this.getProperty("targetMorph");return G&&$world.getMorphWithId(G)},set:function(G){this.setProperty("targetMorph",G?G.id:null);this.alignAtBottomOf(G)}},expandable:{after:["submorphs"],set:function(G){this.setProperty("expandable",G);if(G){var ma=this.getSubmorphNamed("expand button")||this.addMorph({name:"expand button",
type:"button"});Ma.connect(ma,"fire",this,"expand")}else this.getSubmorphNamed("expand button")&&(this.getSubmorphNamed("expand button").remove(),Ma.disconnect(ma,"fire",this,"expand"))}}}}}],oa,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10467,end:12318})}(Ma.StatusMessage));Ma.StatusMessageForMorph=
tc;Ma.StatusMessageForMorph=tc;Ma.StatusMessageForMorph=tc;Ma.showConnector=Eb;Ma.showConnector=Eb;var $a=lively.FreezerRuntime.recorderFor("lively.ide/index.js");$a.info="import via sub modules";$a.info="import via sub modules";$a.info="import via sub modules";var Cc=ta("v",{});$a.valueWidgets=Cc;$a.valueWidgets=Cc;$a.valueWidgets=Cc;var Mc=ta("p",{});$a.popovers=Mc;$a.popovers=Mc;$a.popovers=Mc;var Ua=lively.FreezerRuntime.recorderFor("lively.components/popup.js");Ua.Morph=qd;Ua.VerticalLayout=
cb;Ua.StyleSheet=hd;Ua.Icon=Jd;Ua.CustomLayout=Pa;Ua.Color=Ob;Ua.rect=sc;Ua.pt=xb;Ua.connect=ub;Ua.Path=Sb;Ua.duration=300;$a=ta("P",function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.components/popup.js"),tb=oa.hasOwnProperty("Popover")&&"function"===typeof oa.Popover?oa.Popover:oa.Popover=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"relayout",value:function(G){var ma=this.get("body"),
Ga=this.get("arrow"),lb=this.get("close button");Ga=Ga.height;G?(ma.animate({topCenter:Ua.pt(0,Ga),duration:200}),lb.animate({topRight:ma.topRight.addXY(8,-8),duration:200})):(ma.topCenter=Ua.pt(0,Ga),lb.topRight=ma.topRight.addXY(8,-8))}},{key:"close",value:function(){this.fadeOut(300)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Popover"}},{key:"properties",get:function(){return{epiMorph:{defaultValue:!0},hasFixedPosition:{defaultValue:!0},master:{initialize:function(){this.master=
{auto:"styleguide://SystemWidgets/popover/light"}}},targetMorph:{derived:!0,after:["submorphs"],defaultValue:{extent:Ua.pt(200,200),fill:Ua.Color.transparent,submorphs:[{name:"placeholder",type:"label",value:"No Target Specified"}]},get:function(){return this.get("body").submorphs[0]},set:function(G){var ma=this;this.get("body").addMorph(G);this.whenRendered().then(function(){return ma.relayout()})}},submorphs:{initialize:function(){var G=this;this.submorphs=[{type:"polygon",name:"arrow",topCenter:Ua.pt(0,
0),borderColor:Ua.Color.transparent,vertices:[Ua.pt(-10,0),Ua.pt(0,-15),Ua.pt(10,0)]},{name:"body"},{name:"close button",type:"button",label:Object.assign(Ua.Icon.makeLabel("times-circle"),{fontSize:18}),tooltip:"close",fill:null,extent:Ua.pt(16,16),borderColor:Ua.Color.transparent}];var ma=$jscomp.makeIterator(this.submorphs);ma.next();var Ga=ma.next().value;ma=ma.next().value;Ua.connect(ma,"fire",this,"close");Ua.connect(Ga,"extent",this,"relayout",{converter:"() => target.animated"});setTimeout(function(){return G.animated=
!0},1E3)}}}}}],oa,{pathInPackage:function(){return"popup.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:247,end:2617})}(Ua.Morph));Ua.Popover=$a;Ua.Popover=$a;Ua.Popover=$a;var Fa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js");Fa.Morph=qd;Fa.TilingLayout=Za;Fa.morph=Hb;Fa.Label=Dc;Fa.HorizontalLayout=Hc;Fa.Icon=
Jd;Fa.InputLine=eb;Fa.config=Na;Fa.connect=ub;Fa.signal=hc;Fa.Color=Ob;Fa.LinearGradient=ob;Fa.pt=xb;Fa.rect=sc;Fa.num=Xb;Fa.obj=$b;Fa.popovers=Mc;Fa.ValueScrubber=Da;Fa.Popover=$a;(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=oa.hasOwnProperty("ContextSensitiveWidget")&&"function"===typeof oa.ContextSensitiveWidget?oa.ContextSensitiveWidget:oa.ContextSensitiveWidget=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return bb(tb,ja,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ContextSensitiveWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:Fa.Color.transparent},isSelected:{defaultValue:"false",set:function(G){this.setProperty("isSelected",G);this.fontColor=G?Fa.Color.white:Fa.Color.black}},layout:{initialize:function(){this.layout=new Fa.HorizontalLayout}},context:{serialize:!1}}}}],oa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1872,end:2441})})(Fa.Morph);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=oa.hasOwnProperty("ShortcutWidget")&&"function"===typeof oa.ShortcutWidget?oa.ShortcutWidget:oa.ShortcutWidget=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,
ja,[{key:"onMouseDown",value:function(G){this.openPopover()}},{key:"openPopover",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){G.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShortcutWidget"}},{key:"properties",get:function(){return{title:{defaultValue:"No Title",after:["submorphs"],set:function(G){this.setProperty("title",G);this.getSubmorphNamed("valueString").value=G}},nativeCursor:{defaultValue:"pointer"},fontColor:{derived:!0,
set:function(G){this.submorphs.forEach(function(ma){return ma.fontColor=G})}},submorphs:{initialize:function(){this.submorphs=[Fa.Icon.makeLabel("arrow-right",{styleClasses:["TreeLabel"],fontSize:15,padding:Fa.rect(1,1,4,1)}),{type:"label",value:this.title,styleClasses:["TreeLabel"],fontWeight:"bold",name:"valueString",opacity:.8,borderRadius:5,padding:Fa.rect(0,0,0,2),nativeCursor:"pointer",fontSize:12,borderWidth:0}]}}}}}],oa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:2443,end:3793})})(Fa.ContextSensitiveWidget);Mc=function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=oa.hasOwnProperty("LayoutWidget")&&"function"===typeof oa.LayoutWidget?oa.LayoutWidget:oa.LayoutWidget=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return bb(tb,ja,[{key:"layoutChanged",value:function(){this.title=this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}},{key:"openPopover",value:function(){var G=this,ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){if(1==Ga.nextAddress)return ma=new Fa.popovers.LayoutPopover({hasFixedPosition:!!G.ownerChain().find(function(lb){return lb.hasFixedPosition}),container:G.context}),Ga.yield(ma.fadeIntoWorld(G.globalBounds().center()),2);Fa.connect(ma,"layoutChanged",
G,"layoutChanged");Fa.signal(G,"openWidget",ma);Ga.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutWidget"}},{key:"properties",get:function(){return{title:{after:["submorphs"],initialize:function(){this.title=this.context&&this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}}}}}],oa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3802,end:4623})}(Fa.ShortcutWidget);Fa.LayoutWidget=Mc;Fa.LayoutWidget=Mc;Fa.LayoutWidget=Mc;$a=function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=oa.hasOwnProperty("ColorWidget")&&"function"===typeof oa.ColorWidget?oa.ColorWidget:oa.ColorWidget=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"relayout",
value:function(G){G?this.submorphs=this.color?this.color.isGradient?this.renderGradientValue():this.renderColorValue():this.renderNoColor():this.color&&(this.color.isGradient?this.updateGradientValue():this.updateColorValue())}},{key:"updateGradientValue",value:function(){var G=this.color;if(2*G.stops.length==this.submorphs.length-3){var ma;for(ma in this.color.stops){var Ga=G.stops[ma];var lb=Ga.color,gc=Ga.offset,uc=$jscomp.makeIterator(this.submorphs[2+2*ma].submorphs).next().value;Ga=this.submorphs[3+
2*ma];uc.fill=lb;Ga.value=(100*gc).toFixed()+"%"+(ma<G.stops.length-1?",":"")}}else this.submorphs=this.renderGradientValue()}},{key:"renderGradientValue",value:function(){return[{type:"label",styleClasses:["TreeLabel"],value:this.color.type+"(",name:"valueString"}].concat($jscomp.arrayFromIterable(this.renderStops()),[{type:"label",styleClasses:["TreeLabel"],value:")"}])}},{key:"updateColorValue",value:function(){this.getSubmorphNamed("color box").fill=this.color;this.getSubmorphNamed("valueString").value=
Fa.obj.safeToString(this.color)}},{key:"renderNoColor",value:function(){return[{extent:Fa.pt(15,15),fill:Fa.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:Fa.pt(5,7.5),fill:Fa.Color.white,borderColor:Fa.Color.gray.darker(),borderWidth:1,submorphs:[{type:"path",name:"no fill",vertices:[Fa.pt(0,0),Fa.pt(10,10)],borderColor:Fa.Color.red}]}]},{type:"label",value:"No Color",fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderColorValue",value:function(){return[{extent:Fa.pt(15,
15),fill:Fa.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:Fa.pt(5,7.5),fill:this.color,borderColor:Fa.Color.gray.darker(),nativeCursor:"pointer",borderWidth:1}]},{type:"label",value:Fa.obj.safeToString(this.color),fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderStops",value:function(){var G=this.color,ma=[{type:"label",padding:Fa.rect(0,0,5,0),value:"linearGradient"==G.type?Fa.num.toDegrees(G.vectorAsAngle()).toFixed()+"\u00b0,":""}],Ga;
for(Ga in G.stops){var lb=G.stops[Ga],gc=lb.color;lb=lb.offset;ma.push({extent:Fa.pt(this.fontSize,this.fontSize),fill:Fa.Color.transparent,layout:new Fa.HorizontalLayout({spacing:3}),submorphs:[{styleClasses:["colorValue"],fill:gc}]});ma.push({type:"label",padding:Fa.rect(0,0,5,0),value:(100*lb).toFixed()+"%"+(Ga<G.stops.length-1?",":"")})}return ma}},{key:"onMouseDown",value:function(G){this.openFillEditor()}},{key:"update",value:function(G){this.color=G}},{key:"openFillEditor",value:function(){var G=
this,ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){if(1==Ga.nextAddress)return ma=new Fa.popovers.FillPopover({hasFixedPosition:!!G.ownerChain().find(function(lb){return lb.hasFixedPosition}),handleMorph:G.context,fillValue:G.color,title:"Fill Control",gradientEnabled:G.gradientEnabled}),Ga.yield(ma.fadeIntoWorld(G.globalBounds().center()),2);Fa.connect(ma,"fillValue",G,"update");Fa.signal(G,"openWidget",ma);Ga.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorWidget"}},
{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=new Fa.HorizontalLayout({direction:"centered"})}},selectionFontColor:{defaultValue:Fa.Color.white},nonSelectionFontColor:{defaultValue:Fa.Color.black},color:{defaultValue:Fa.Color.blue},gradientEnabled:{defaultValue:!1},fontSize:{defaultValue:14},isSelected:{after:["submorphs"],set:function(G){this.getProperty("isSelected")!=G&&(this.getSubmorphNamed("valueString").fontColor=G?this.selectionFontColor:this.nonSelectionFontColor,
this.setProperty("isSelected",G))}},submorphs:{after:["nonSelectionFontColor","selectionFontColor"],initialize:function(){Fa.connect(this,"color",this,"relayout",{converter:function(G,ma){return(ma&&ma.isColor)!=(G&&G.isColor)}});this.relayout(!0)}}}}}],oa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:4687,end:10140})}(Fa.ContextSensitiveWidget);Fa.ColorWidget=$a;Fa.ColorWidget=$a;Fa.ColorWidget=$a;var Wb=function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=oa.hasOwnProperty("BooleanWidget")&&"function"===typeof oa.BooleanWidget?oa.BooleanWidget:oa.BooleanWidget=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"onMouseDown",value:function(G){this.boolean=
!this.boolean}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BooleanWidget"}},{key:"properties",get:function(){return{fontFamily:{defaultValue:Fa.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},boolean:{set:function(G){this.setProperty("boolean",G);this.value=Fa.obj.safeToString(G);this.fontColor=this.boolean?Fa.Color.green:Fa.Color.red}}}}}],oa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10149,end:10634})}(Fa.Label);Fa.BooleanWidget=Wb;Fa.BooleanWidget=Wb;Fa.BooleanWidget=Wb;var Bd=ta("N",function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=oa.hasOwnProperty("NumberWidget")&&"function"===typeof oa.NumberWidget?oa.NumberWidget:oa.NumberWidget=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return bb(tb,ja,[{key:"onMouseDown",value:function(G){bb._get(Object.getPrototypeOf(tb.prototype),"onMouseDown",this).call(this,G);"up"==G.targetMorph.name&&this.increment();"down"==G.targetMorph.name&&this.decrement()}},{key:"spec",value:function(){return Fa.obj.dissoc(bb._get(Object.getPrototypeOf(tb.prototype),"spec",this).call(this),["submorphs"])}},{key:"update",value:function(G,ma){ma=void 0===ma?!0:ma;this.setProperty("number",ma?G/this.scaleFactor:G);Fa.signal(this,"number",this.number);
this.relayout(ma)}},{key:"relayoutButtons",value:function(){var G=this.getSubmorphNamed("up"),ma=this.getSubmorphNamed("down");this.getSubmorphNamed("value");G.height=ma.height=(this.height-2)/2;G.width=ma.width=20}},{key:"onChange",value:function(G){bb._get(Object.getPrototypeOf(tb.prototype),"onChange",this).call(this,G);"extent"!=G.prop||this.autofit||this.relayout()}},{key:"relayout",value:function(G){var ma=this.getSubmorphNamed("value");ma&&(this.autofit?(G||(ma.value=this.number*this.scaleFactor),
ma.fit(),this.height=ma.height,this.width=ma.width+20):G||(ma.width=this.width-20),this.relayoutButtons(),G||(ma.value=Fa.num.roundTo(this.number*this.scaleFactor,1),ma.min=-Infinity!=this.min?this.min*this.scaleFactor:this.min,ma.max=Infinity!=this.max?this.max*this.scaleFactor:this.max,ma.unit=this.unit))}},{key:"increment",value:function(){void 0!=this.max&&this.number>=this.max||this.update(this.number+1/this.scaleFactor,!1)}},{key:"decrement",value:function(){void 0!=this.min&&this.number<=this.min||
this.update(this.number-1/this.scaleFactor,!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NumberWidget"}},{key:"properties",get:function(){return{unit:{type:"Enum",isStyleProp:!0,values:["px","%","pt",""]},autofit:{defaultValue:!0,after:["submorphs","extent"],set:function(G){this.setProperty("autofit",G);this.getSubmorphNamed("value").scaleToBounds=!G}},number:{defaultValue:0,after:["unit","autofit"],set:function(G){this.setProperty("number",G);this.relayout(!1)}},min:{defaultValue:-Infinity},
max:{defaultValue:Infinity},floatingPoint:{after:["number","submorphs"],set:function(G){this.setProperty("floatingPoint",G);this.get("value").floatingPoint=G},get:function(){var G=/[+-]?([0-9]*[.])?[0-9]+/.exec(this.number);return this.getProperty("floatingPoint")||1==this.scaleFactor&&G&&!!G[1]}},padding:{isStyleProp:!0,defaultValue:Fa.rect(5,3,0,0),after:["submorphs"],set:function(G){this.setProperty("padding",G);this.getSubmorphNamed("value").padding=G}},extent:{defaultValue:Fa.pt(70,25)},scaleFactor:{defaultValue:1,
get:function(){return this.getProperty("scaleFactor")||1}},baseFactor:{after:["submorphs"],derived:!0,get:function(){return this.get("value").baseFactor},set:function(G){this.get("value").baseFactor=G}},styleClasses:{defaultValue:["unfocused"]},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/number field/light"}}},fontColor:{isStyleProp:!0,defaultValue:Fa.Color.rgbHex("#0086b3"),set:function(G){this.setProperty("fontColor",G)}},isSelected:{set:function(G){this.getProperty("isSelected")!=
G&&(G?(this.addStyleClass("selected"),this.removeStyleClass("unselected")):(this.removeStyleClass("selected"),this.addStyleClass("unselected")),this.setProperty("isSelected",G))}},fontFamily:{defaultValue:"Sans-Serif",isStyleProp:!0,set:function(G){this.setProperty("fontFamily",G)}},fontSize:{defaultValue:15,isStyleProp:!0,set:function(G){this.setProperty("fontSize",G)}},layout:{initialize:function(){this.layout=new Fa.TilingLayout({axis:"column",orderByIndex:!0,align:"center"})}},submorphs:{after:["min",
"max"],initialize:function(){var G=this;this.submorphs=[new Fa.ValueScrubber({name:"value",unit:this.unit,floatingPoint:this.floatingPoint,scaleToBounds:!1,min:this.min,max:this.max}),Fa.Icon.makeLabel("sort-up",{name:"up"}),Fa.Icon.makeLabel("sort-up",{name:"down",rotation:Math.PI})];Fa.connect(this.get("value"),"scrub",this,"update");this.whenRendered().then(function(){return G.relayout()})}}}}}],oa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10643,end:16590})}(Fa.Morph));Fa.NumberWidget=Bd;Fa.NumberWidget=Bd;Fa.NumberWidget=Bd;var pd=function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=oa.hasOwnProperty("ShadowWidget")&&"function"===typeof oa.ShadowWidget?oa.ShadowWidget:oa.ShadowWidget=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return bb(tb,ja,[{key:"onMouseDown",value:function(G){this.openPopover()}},{key:"openPopover",value:function(){var G=this,ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){if(1==Ga.nextAddress)return ma=new Fa.popovers.ShadowPopover({hasFixedPosition:!!G.ownerChain().find(function(lb){return lb.hasFixedPosition}),shadowValue:G.shadowValue}),Ga.yield(ma.fadeIntoWorld(G.globalBounds().center()),2);Fa.connect(ma,"shadowValue",G,"shadowValue");Fa.connect(G,"shadowValue",G,
"update");Fa.signal(G,"openWidget",ma);Ga.jumpToEnd()})}},{key:"update",value:function(){this.renderShadowDisplay()}},{key:"renderShadowDisplay",value:function(){this.shadowValue?1<this.submorphs.length?this.updateShadowDisplay():this.initShadowDisplay():this.submorphs=[{opacity:.8,reactsToPointer:!1,styleClasses:["TreeLabel"],name:"valueString",type:"label",value:"No Shadow"}]}},{key:"updateShadowDisplay",value:function(){var G=this.shadowValue,ma=G.blur,Ga=G.spread,lb=G.distance;G=G.color;var gc=
$jscomp.makeIterator(this.submorphs),uc=gc.next().value,yd=gc.next().value;yd=$jscomp.makeIterator(yd.submorphs).next().value;gc=gc.next().value;uc.value=(this.shadowValue.inset?"inset":"drop")+"-shadow(";yd.fill=G;gc.value=", "+ma+"px, "+lb+"px, "+Ga+"px)"}},{key:"initShadowDisplay",value:function(){var G=this.shadowValue,ma=G.blur,Ga=G.spread,lb=G.distance;G=G.color;this.submorphs=[{name:"valueString",opacity:.7,reactsToPointer:!1,type:"label",value:(this.shadowValue.inset?"inset":"drop")+"-shadow("},
Fa.morph({fill:Fa.Color.transparent,extent:Fa.pt(this.fontSize+6,this.fontSize+4),submorphs:[{extent:Fa.pt(this.fontSize,this.fontSize),position:Fa.pt(2,2),fill:G,borderColor:Fa.Color.black,borderWidth:1}]}),{name:"valueString",type:"label",opacity:.7,reactsToPointer:!1,value:", "+ma+"px, "+lb+"px, "+Ga+"px)"}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{after:["submorphs"],defaultValue:null,set:function(G){this.setProperty("shadowValue",
G);this.renderShadowDisplay()}},fill:{defaultValue:Fa.Color.transparent},nativeCursor:{defaultValue:"pointer"},fontSize:{defaultValue:12},fontColor:{derived:!0,set:function(G){this.submorphs.forEach(function(ma){return ma.fontColor=G})}},isSelected:{defaultValue:!1,set:function(G){this.setProperty("isSelected",G);this.fontColor=G?Fa.Color.white:Fa.Color.black}},layout:{initialize:function(){this.layout=new Fa.HorizontalLayout}},submorphs:{initialize:function(){this.update()}}}}}],oa,{pathInPackage:function(){return"value-widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:16599,end:19722})}(Fa.Morph);Fa.ShadowWidget=pd;Fa.ShadowWidget=pd;Fa.ShadowWidget=pd;var Vd=function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=oa.hasOwnProperty("PointWidget")&&"function"===typeof oa.PointWidget?oa.PointWidget:oa.PointWidget=function(G){G&&
G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"onMouseDown",value:function(G){this.openPopover()}},{key:"openPopover",value:function(){var G=this,ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){if(1==Ga.nextAddress)return ma=new Fa.popovers.PointPopover({pointValue:G.pointValue,hasFixedPosition:!!G.ownerChain().find(function(lb){return lb.hasFixedPosition})}),Ga.yield(ma.fadeIntoWorld(G.globalBounds().center()),
2);Fa.connect(ma,"pointValue",G,"pointValue");Fa.signal(G,"openWidget",ma);Ga.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PointWidget"}},{key:"properties",get:function(){return{isSelected:{defaultValue:"false",set:function(G){this.setProperty("isSelected",G);this.fontColor=G?this.selectionFontColor:this.nonSelectionFontColor}},selectionFontColor:{isStyleProp:!0,defaultValue:Fa.Color.white},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Fa.Color.black},fontFamily:{defaultValue:Fa.config.codeEditor.defaultStyle.fontFamily},
nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},pointValue:{after:["textAndAttributes"],set:function(G){var ma=Fa.Color.rgbHex("#0086b3");this.setProperty("pointValue",G);this.textAndAttributes=["pt(",null,G.x.toFixed(),{fontColor:ma},",",{},G.y.toFixed(),{fontColor:ma},")",null];this.fixedHeight=this.fixedWidth=!0;this.height=20;this.width=this.textString.length*this.fontSize}}}}}],oa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:19731,end:21375})}(Fa.Label);Fa.PointWidget=Vd;Fa.PointWidget=Vd;Fa.PointWidget=Vd;var qc=function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=oa.hasOwnProperty("PaddingWidget")&&"function"===typeof oa.PaddingWidget?oa.PaddingWidget:oa.PaddingWidget=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return bb(tb,ja,[{key:"onMouseDown",value:function(G){this.openPopover()}},{key:"openPopover",value:function(){var G=this,ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){if(1==Ga.nextAddress)return ma=new Fa.popovers.RectanglePopover({hasFixedPosition:!!G.ownerChain().find(function(lb){return lb.hasFixedPosition}),rectangle:G.rectangle}),ma.relayout(),Ga.yield(ma.fadeIntoWorld(G.globalBounds().center()),2);Fa.connect(ma,"rectangle",G,"rectangle");Fa.signal(G,"openWidget",
ma);Ga.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PaddingWidget"}},{key:"properties",get:function(){return{nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},fontFamily:{defaultValue:Fa.config.codeEditor.defaultStyle.fontFamily},isSelected:{defaultValue:"false",set:function(G){this.setProperty("isSelected",G);this.fontColor=G?Fa.Color.white:Fa.Color.black}},rectangle:{defaultValue:Fa.rect(0),set:function(G){this.setProperty("rectangle",
G);this.value=Fa.obj.safeToString(G)}}}}}],oa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:21384,end:22445})}(Fa.Label);Fa.PaddingWidget=qc;Fa.PaddingWidget=qc;Fa.PaddingWidget=qc;var Ld=function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=oa.hasOwnProperty("IconWidget")&&
"function"===typeof oa.IconWidget?oa.IconWidget:oa.IconWidget=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"onMouseDown",value:function(G){this.openPopover()}},{key:"openPopover",value:function(){var G=this,ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){if(1==Ga.nextAddress)return ma=new Fa.popovers.IconPopover({hasFixedPosition:!!G.ownerChain().find(function(lb){return lb.hasFixedPosition})}),
Ga.yield(ma.fadeIntoWorld(G.globalBounds().center()),2);Fa.connect(ma,"select",G,"iconValue",{converter:function(lb){return lb&&Fa.Icon.makeLabel(lb).value},varMapping:{Icon:Jd}});Fa.signal(G,"openWidget",ma);Ga.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IconWidget"}},{key:"properties",get:function(){return{fontColor:{defaultValue:Fa.Color.gray.darker()},fontFamily:{defaultValue:"FontAwesome"},nativeCursor:{defaultValue:"pointer"},iconValue:{derived:!0,get:function(){return this.value},
set:function(G){this.value=G||"No Icon"}}}}}],oa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22454,end:23385})}(Fa.Label);Fa.IconWidget=Ld;Fa.IconWidget=Ld;Fa.IconWidget=Ld;var Lc=function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=oa.hasOwnProperty("StringWidget")&&
"function"===typeof oa.StringWidget?oa.StringWidget:oa.StringWidget=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"truncate",value:function(G){return 200<G.length?G.slice(0,20)+"...":G}},{key:"onFocus",value:function(G){var ma=this,Ga;return $jscomp.asyncExecutePromiseGeneratorProgram(function(lb){if(1==lb.nextAddress)return bb._get(Object.getPrototypeOf(tb.prototype),"onFocus",ma).call(ma,G),ma.readOnly?
lb.return():ma.stringTooLong?lb.yield(ma.world().editPrompt("edit string",{requester:ma,input:ma.stringValue}),2):(ma.borderColor=Fa.Color.white.withA(.9),ma.textString=ma.stringValue,lb.return());Ga=lb.yieldResult;if("string"===typeof Ga)ma.onInput(Ga);lb.jumpToEnd()})}},{key:"onBlur",value:function(G){bb._get(Object.getPrototypeOf(tb.prototype),"onBlur",this).call(this,G);this.readOnly||(this.borderColor=Fa.Color.transparent,this.onInput(this.textString))}},{key:"onInput",value:function(G){this.owner.focus();
Fa.signal(this,"inputAccepted",G);this.stringValue=G}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StringWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:Fa.Color.transparent},fontColor:{defaultValue:Fa.Color.blue},nativeCursor:{defaultValue:"auto"},borderColor:{defaultValue:Fa.Color.transparent},borderStyle:{defaultValue:"dashed"},borderRadius:{defaultValue:4},borderWidth:{defaultValue:1},padding:{defaultValue:Fa.rect(0,0,0,0)},fixedWidth:{defaultValue:!1},
fixedHeight:{defaultValue:!1},stringValue:{after:["textString"],set:function(G){this.setProperty("stringValue",G);this.textString=this.truncate(G);this.nativeCursor=this.stringTooLong?"pointer":"auto"}},stringTooLong:{readOnly:!0,get:function(){return this.stringValue.includes("\n")}},isSelected:{defaultValue:"false",set:function(G){this.setProperty("isSelected",G);this.fontColor=G?Fa.Color.white:Fa.Color.blue}}}}}],oa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23394,end:25345})}(Fa.InputLine);Fa.StringWidget=Lc;Fa.StringWidget=Lc;Fa.StringWidget=Lc;Fa.valueWidgets=Cc;Object.assign(Fa.valueWidgets,{NumberWidget:Bd,StringWidget:Lc,IconWidget:Ld,PaddingWidget:qc,ShadowWidget:pd,PointWidget:Vd,BooleanWidget:Wb,LayoutWidget:Mc,ColorWidget:$a});var kb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js");kb.Ellipse=
mb;kb.Icon=Jd;kb.Morph=qd;kb.Path=Fc;kb.Text=Sc;kb.HorizontalLayout=Hc;kb.VerticalLayout=cb;kb.morph=Hb;kb.Color=Ob;kb.pt=xb;kb.rect=sc;kb.Rectangle=Sa;kb.arr=Ub;kb.connect=ub;kb.disconnect=wc;kb.LabeledCheckBox=Zb;kb.DropDownSelector=dc;kb.Button=Mb;kb.Menu=Yb;kb.NumberWidget=Bd;kb.InteractiveMorphSelector=Gc;kb.easings=pc;(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=oa.hasOwnProperty("AxisHalo")&&"function"===typeof oa.AxisHalo?oa.AxisHalo:oa.AxisHalo=function(G){G&&
G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:Symbol.for("lively-instance-initialize"),value:function(G){var ma=G.halo;G=G.targetAxis;bb._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{fill:kb.Color.transparent,halo:ma,targetAxis:G,container:ma.container});this.initialize()}},{key:"initialize",value:function(){this.setBounds(this.fetchBounds());this.minSlider=
this.minSlider();this.axisMenu=this.axisMenu();this.proportionSlider=this.proportionSlider();this.proportionSlider.addMorph(this.minSlider);this.submorphs=[this.proportionSlider,this.axisMenu];this.halo.addGuide(this)}},{key:"forceMenuHidden",set:function(G){this._forceMenuHidden=G;this.axisMenu.visible=!G}},{key:"forceMenuHidden",get:function(){return this._forceMenuHidden}},{key:"lastAxis",get:function(){return!this.targetAxis.after}},{key:"fetchBounds",value:function(){return this.fetchPosition().extent(this.fetchExtent())}},
{key:"alignWithTarget",value:function(){this.extent=this.fetchExtent();this.position=this.fetchPosition();this.proportionSlider.alignWithTarget();this.axisMenu.alignWithTarget()}},{key:"onHoverIn",value:function(){this.minSlider.requestToShow();this.axisMenu.visible=!this.forceMenuHidden&&!0}},{key:"onHoverOut",value:function(G){this.minSlider.requestToHide();this.axisMenu.visible=this.forceMenuVisible||!1}},{key:"proportionSlider",value:function(){var G=this,ma=this,Ga=this.proportionViewer();return this.halo.addGuide(new kb.Morph({nativeCursor:this.getResizeCursor(),
fill:kb.Color.transparent,submorphs:[this.devider(),Ga],alignWithTarget:function(){this.setBounds(ma.getProportionSliderBounds(this))},onDragStart:function(){Ga.visible=!0},onDrag:function(lb){G.adjustStretch(G.getDelta(lb));G.halo.alignWithTarget()},onDragEnd:function(){Ga.visible=!1}}))}},{key:"devider",value:function(){return new kb.Morph({visible:!this.lastAxis,fill:kb.Color.black.withA(.5),bounds:this.getDeviderBounds(),draggable:!1,reactsToPointer:!1})}},{key:"minSlider",value:function(){var G=
this,ma=this,Ga=this.minSpaceVisualizer(),lb=this.minViewer();return this.halo.addGuide(new kb.Ellipse({nativeCursor:this.getResizeCursor(),fill:kb.Color.green,extent:kb.pt(10,10),visible:!1,submorphs:[Ga,lb],becomesActiveOnHover:!0,alignWithTarget:function(){this.position=ma.getMinSliderPosition()},requestToShow:function(){this.visible=!ma.targetAxis.fixed},requestToHide:function(){this.active?this.shouldHide=!0:this.visible=!1},onDragStart:function(){ma.forceMenuHidden=!0;lb.visible=!0;this.active=
Ga.visible=!0},onDrag:function(gc){G.targetAxis.min+=-G.getDelta(gc);G.halo.alignWithTarget()},onDragEnd:function(){ma.forceMenuHidden=!1;lb.visible=!1;this.active=Ga.visible=!1;this.shouldHide&&(this.shouldHide=this.visible=!1)}}))}},{key:"minViewer",value:function(){var G=this;return this.viewer({position:this.getMinViewerPosition(),alignWithTarget:function(){this.textString="min: "+G.targetAxis.min.toFixed()+"px !"}})}},{key:"minSpaceBorder",value:function(){return new kb.Path(Object.assign({position:kb.pt(-1,
-1),borderStyle:"dashed",borderColor:kb.Color.green,borderWidth:2},this.getMinSpaceBorder()))}},{key:"minSpaceVisualizer",value:function(){var G=this,ma=this.minSpaceBorder();return this.halo.addGuide(new kb.Morph({fill:kb.Color.green.withA(.1),visible:!1,isHaloItem:!0,submorphs:[ma],alignWithTarget:function(){this.extent=G.getMinSpaceExtent();this.topLeft=kb.pt(5,5)}}))}},{key:"axisMenu",value:function(){var G=this.lockButton(),ma=this.menuButton(),Ga=this;return new kb.Morph({layout:this.getMenuLayout(),
submorphs:[G,ma],fill:kb.Color.transparent,visible:!1,becomesActiveOnHover:!0,alignWithTarget:function(){this.bottomRight=this.owner.extent.subPt(Ga.getMenuOffset(this))}})}},{key:"lockButton",value:function(){var G=this;return this.halo.addGuide(new kb.Morph({fill:kb.Color.transparent,extent:kb.pt(25,25),submorphs:[{center:kb.pt(12.5,12.5),fill:kb.Color.transparent,styleClasses:["fa","fa-unlock"]}],alignWithTarget:function(){G.targetAxis.fixed?(this.fontColor=kb.Color.red,this.submorphs[0].styleClasses=
["fa","fa-lock"]):(this.fontColor=kb.Color.green,this.submorphs[0].styleClasses=["fa","fa-unlock"])},onMouseDown:function(){this.toggleLock()},toggleLock:function(){G.targetAxis.fixed=!G.targetAxis.fixed;G.halo.alignWithTarget()}}))}},{key:"menuButton",value:function(){var G=this,ma=this;return new kb.Morph({fill:kb.Color.transparent,extent:kb.pt(25,25),submorphs:[{fill:kb.Color.transparent,styleClasses:["fa","fa-cog"],center:kb.pt(12.5,12.5)}],onMouseDown:function(Ga){ma.forceMenuVisible=!0;this.addMorph(Ga.state.menu=
new kb.Menu({position:kb.pt(15,15),items:[["Remove "+ma.subject,function(){G.targetAxis.remove();G.halo.initGuides();G.halo.alignWithTarget()}],["Insert "+ma.subject+" before",function(){G.targetAxis.addBefore();G.halo.initGuides();G.halo.alignWithTarget()}],["Insert "+ma.subject+" after",function(){G.targetAxis.addAfter();G.halo.initGuides();G.halo.alignWithTarget()}]]}))}})}},{key:"viewer",value:function(G){var ma=G.position;G=G.alignWithTarget;return this.halo.addGuide(new kb.Text({styleClasses:["Halo"],
padding:kb.Rectangle.inset(6),visible:!1,borderRadius:10,fontColor:kb.Color.white,fill:kb.Color.black.withA(.5),position:ma,alignWithTarget:G,readOnly:!0}))}},{key:"proportionViewer",value:function(){var G=this;return this.viewer({position:this.getProportionViewerPosition(),alignWithTarget:function(){this.textString=G.targetAxis.length.toFixed(1)+"px"}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AxisHalo"}}],oa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:660,end:7979})})(kb.Morph);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=oa.hasOwnProperty("RowHalo")&&"function"===typeof oa.RowHalo?oa.RowHalo:oa.RowHalo=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:Symbol.for("lively-instance-initialize"),
value:function(G){var ma=G.row;G=G.halo;bb._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:G.target.row(ma),halo:G})}},{key:"subject",get:function(){return"row"}},{key:"adjustStretch",value:function(G){this.targetAxis.height+=G}},{key:"getDelta",value:function(G){return G.state.dragDelta.y}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.y}},{key:"fetchPosition",value:function(){return kb.pt(-45,this.axisOffset()+
10)}},{key:"fetchExtent",value:function(){return kb.pt(40,this.targetAxis.length-10)}},{key:"getMenuOffset",value:function(G){return this.targetAxis.length>G.height?kb.pt(2,5):kb.pt(26,10)}},{key:"getMenuLayout",value:function(){return new kb.VerticalLayout}},{key:"getResizeCursor",value:function(){return"row-resize"}},{key:"getMinViewerPosition",value:function(){return kb.pt(50,20)}},{key:"getMinSliderPosition",value:function(){return kb.pt(0,-this.targetAxis.min)}},{key:"getMinSpaceExtent",value:function(){return kb.pt(this.container.width+
45,this.targetAxis.min)}},{key:"getMinSpaceBorder",value:function(){return{extent:kb.pt(this.container.width+50,2),vertices:[kb.pt(0,1),kb.pt(this.container.width+50,1)]}}},{key:"getProportionViewerPosition",value:function(){return kb.pt(40,20)}},{key:"getProportionSliderBounds",value:function(G){return kb.pt(0,G.owner.height-5).extent(kb.pt(40,10))}},{key:"getDeviderBounds",value:function(){return kb.pt(15,4).extent(kb.pt(25,2))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RowHalo"}}],
oa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:7981,end:9208})})(kb.AxisHalo);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=oa.hasOwnProperty("ColumnHalo")&&"function"===typeof oa.ColumnHalo?oa.ColumnHalo:oa.ColumnHalo=function(G){G&&G[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:Symbol.for("lively-instance-initialize"),value:function(G){var ma=G.col;G=G.halo;bb._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:G.target.col(ma),halo:G})}},{key:"subject",get:function(){return"column"}},{key:"adjustStretch",value:function(G){this.targetAxis.width+=G}},{key:"getDelta",value:function(G){return G.state.dragDelta.x}},{key:"axisOffset",
value:function(){return this.targetAxis.origin.position.x}},{key:"fetchPosition",value:function(){return kb.pt(this.axisOffset()+10,-45)}},{key:"fetchExtent",value:function(){return kb.pt(this.targetAxis.length-10,40)}},{key:"getMenuOffset",value:function(G){return this.targetAxis.length>G.width?kb.pt(5,3):kb.pt(8,26)}},{key:"getMenuLayout",value:function(){return new kb.HorizontalLayout}},{key:"getResizeCursor",value:function(){return"col-resize"}},{key:"getMinViewerPosition",value:function(){return kb.pt(20,
50)}},{key:"getMinSliderPosition",value:function(){return kb.pt(-this.targetAxis.min,0)}},{key:"getMinSpaceExtent",value:function(){return kb.pt(this.targetAxis.min,this.container.height+45)}},{key:"getMinSpaceBorder",value:function(){return{extent:kb.pt(2,this.container.height+50),vertices:[kb.pt(1,0),kb.pt(1,this.container.height+50)]}}},{key:"getProportionViewerPosition",value:function(){return kb.pt(20,40)}},{key:"getProportionSliderBounds",value:function(G){return kb.pt(G.owner.width-5,0).extent(kb.pt(10,
40))}},{key:"getDeviderBounds",value:function(){return kb.pt(4,15).extent(kb.pt(2,25))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColumnHalo"}}],oa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:9210,end:10442})})(kb.AxisHalo);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
tb=oa.hasOwnProperty("CellGuide")&&"function"===typeof oa.CellGuide?oa.CellGuide:oa.CellGuide=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"menuItems",value:function(){var G=this,ma=kb.Icon.textAttribute("check-square-o"),Ga=kb.Icon.textAttribute("square-o");ma[1].textStyleClasses.push("annotation");Ga[1].textStyleClasses.push("annotation");Ga[1].paddingRight="2px";return[["Resize Policy",[[["Rigid  ",
null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?Ga:ma)),function(){G.cellGroup.resize=!1}],[["Space Filling  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?ma:Ga)),function(){G.cellGroup.resize=!0}]]],["Align at...",["center"].concat($jscomp.arrayFromIterable((new kb.Rectangle).sides),$jscomp.arrayFromIterable((new kb.Rectangle).corners)).map(function(lb){return[[lb,{paddingRight:"2px"}].concat($jscomp.arrayFromIterable(G.cellGroup.align==lb?ma:Ga),["  ",null]),function(){return G.cellGroup.align=
lb}]})]].concat(this.cellGroup.morph?[["Release Morph from Cell",function(){var lb=G.cellGroup.morph;lb&&(G.world().firstHand.grab(lb),G.world().firstHand.longClickGrab=!0,lb.position=kb.pt(0))}]]:[])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGuide"}},{key:"properties",get:function(){return{cellGroup:{}}}}],oa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10444,end:11722})})(kb.Morph);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=oa.hasOwnProperty("LayoutHalo")&&"function"===typeof oa.LayoutHalo?oa.LayoutHalo:oa.LayoutHalo=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutHalo"}},
{key:"properties",get:function(){return{container:{},target:{},pointerId:{},halosEnabled:{defaultValue:!1},isEpiMorph:{defaultValue:!0},isHaloItem:{defaultValue:!0},borderColor:{defaultValue:kb.Color.orange},borderWidth:{defaultValue:2},styleClasses:{defaultValue:["Halo"]}}}}],oa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:11724,end:12137})})(kb.Morph);Cc=ta("G",function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=oa.hasOwnProperty("GridLayoutHalo")&&"function"===typeof oa.GridLayoutHalo?oa.GridLayoutHalo:oa.GridLayoutHalo=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"previewDrop",value:function(G){1>G.length||(G=this.cellGuides.find(function(ma){return ma.fullContainsWorldPoint($world.firstHand.position)}),
G!=this.currentCell&&this.currentCell&&this.currentCell.stopPreview(),(this.currentCell=G)&&this.currentCell.startPreview())}},{key:"handleDrop",value:function(G){var ma=this;this.currentCell&&G.whenRendered().then(function(){return ma.currentCell.cellGroup.morph=G})}},{key:"initialize",value:function(){this.initGuides();this.alignWithTarget();this.focus()}},{key:"optionControls",value:function(){var G=this.target,ma=new kb.LabeledCheckBox({name:"compensateOrigin",label:"Compensate Origin",fill:kb.Color.transparent,
checked:G.compensateOrigin}),Ga=new kb.LabeledCheckBox({label:"Resize Submorphs",fill:kb.Color.transparent,name:"fitToCell",checked:G.fitToCell});kb.connect(ma,"checked",G,"compensateOrigin");kb.connect(Ga,"checked",G,"fitToCell");kb.connect(ma,"checked",this,"alignWithTarget");return[ma,Ga]}},{key:"isLayoutHalo",get:function(){return!1}},{key:"alignWithTarget",value:function(){this.target.apply();this.position=this.container.globalPosition;this.target.compensateOrigin&&this.moveBy(this.container.origin.negated());
this.extent=this.container.extent;this.addMissingGuides();kb.arr.reverse(this.guides).forEach(function(G){return G.alignWithTarget()})}},{key:"addMissingGuides",value:function(){var G=this;kb.arr.withoutAll(this.target.cellGroups,this.guides.map(function(ma){return ma.cellGroup})).forEach(function(ma){return G.addMorph(G.cellGuide(ma))})}},{key:"initGuides",value:function(){this.submorphs=[];this.guides=[];this.initCellGuides();this.initColumnGuides();this.initRowGuides()}},{key:"initCellGuides",
value:function(){var G=this,ma=this.addMorph({fill:kb.Color.transparent,borderRadius:this.borderRadius,extent:this.extent});this.target.cellGroups.forEach(function(Ga){ma.addMorph(G.cellGuide(Ga))});this.cellGuides=ma.submorphs;this.addMorph(this.resizer())}},{key:"addGuide",value:function(G){G.isHaloItem=!0;this.guides.push(G);return G}},{key:"initRowGuides",value:function(){var G=this,ma=this;this.addGuide(this.addMorph(new kb.Morph({width:25,fill:kb.Color.gray.withA(.7),borderRadius:15,height:this.container.height,
topRight:kb.pt(-5,0),alignWithTarget:function(){this.height=ma.container.height}})));kb.arr.range(0,this.target.rowCount-1).forEach(function(Ga){G.addMorph(new kb.RowHalo({row:Ga,halo:G}))})}},{key:"initColumnGuides",value:function(){var G=this,ma=this;this.addGuide(this.addMorph(new kb.Morph({height:25,fill:kb.Color.gray.withA(.7),borderRadius:15,width:this.container.width,bottomLeft:kb.pt(0,-5),alignWithTarget:function(){this.width=ma.container.width}})));kb.arr.range(0,this.target.columnCount-
1).forEach(function(Ga){G.addMorph(new kb.ColumnHalo({col:Ga,halo:G}))})}},{key:"resizer",value:function(){var G=this;return this.addGuide(new kb.Morph({fill:kb.Color.transparent,extent:kb.pt(25,25),nativeCursor:"nwse-resize",onDrag:function(ma){G.container.resizeBy(ma.state.dragDelta);G.alignWithTarget()},alignWithTarget:function(){this.bottomRight=G.extent}}))}},{key:"cellResizer",value:function(G,ma){var Ga=this,lb="topLeft"==ma?"bottomRight":"topLeft";return new kb.Ellipse({borderWidth:1,visible:!1,
borderColor:kb.Color.black,nativeCursor:"nwse-resize",removeCell:function(gc){G.disconnect(gc);Ga.alignWithTarget()},addCell:function(gc){G.connect(gc);Ga.alignWithTarget()},start:function(){this.fixpointCell=G[lb];this.draggedDelta=G.bounds().partNamed(ma);this.debugMorph=Ga.addMorph(new kb.Morph({fill:kb.Color.orange.withA(.5)}))},update:function(gc){var uc=this;this.draggedDelta=this.draggedDelta.addPt(gc);var yd=kb.Rectangle.unionPts([this.draggedDelta]).union(this.fixpointCell.bounds());this.debugMorph.setBounds(yd);
Ga.cells.forEach(function(Pd){var ve=yd.intersection(Pd.bounds()).area()/Pd.bounds().area();G.includes(Pd)&&.1>ve&&uc.removeCell(Pd);!G.includes(Pd)&&ve>1/3&&uc.addCell(Pd)})},onDragEnd:function(gc){this.debugMorph.remove()},onDragStart:function(gc){this.start(gc.position)},onDrag:function(gc){this.update(gc.state.dragDelta)}})}},{key:"cellGuide",value:function(G){var ma=this,Ga=this.cellResizer(G,"topLeft"),lb=this.cellResizer(G,"bottomRight");return this.addGuide(new kb.CellGuide({cellGroup:G,bounds:G.bounds(),
fill:kb.Color.transparent,borderColor:kb.Color.orange,borderWidth:1,isHaloItem:!0,isCell:!0,draggable:!1,submorphs:[Ga,lb],onMouseDown:function(gc){this.becomeActive()},deactivate:function(){this.borderColor=kb.Color.orange;this.fill=kb.Color.transparent;this.submorphs.forEach(function(gc){gc.visible=!1})},becomeActive:function(){ma.guides.forEach(function(gc){gc.isCell&&gc.deactivate()});this.borderColor=kb.Color.rgbHex("#1565C0");this.fill=kb.Color.rgbHex("#1565C0").withA(.3);ma.addMorph(this.remove());
this.submorphs.forEach(function(gc){gc.visible=!0})},startPreview:function(gc){this.fill=kb.Color.orange.withA(.7)},stopPreview:function(gc){this.fill=kb.Color.transparent},onDrop:function(gc){var uc=$jscomp.makeIterator(gc.hand.grabbedMorphs).next().value;gc.hand.dropMorphsOn(ma.container);G.morph=uc},alignWithTarget:function(){G.bounds().isNonEmpty()?(this.setBounds(G.bounds()),Ga.center=this.innerBounds().topLeft(),lb.center=this.innerBounds().bottomRight()):(kb.arr.remove(ma.guides,this),this.remove())}}))}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:kb.Color.transparent},cells:{derived:!0,get:function(){return kb.arr.flatten(this.target.col(0).items.map(function(G){return G.row(0).items}))}},submorphs:{initialize:function(){this.initialize()}}}}}],oa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12146,end:19501})}(kb.LayoutHalo));kb.GridLayoutHalo=Cc;kb.GridLayoutHalo=Cc;kb.GridLayoutHalo=Cc;Mc=function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=oa.hasOwnProperty("TilingLayoutHalo")&&"function"===typeof oa.TilingLayoutHalo?oa.TilingLayoutHalo:oa.TilingLayoutHalo=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return bb(tb,ja,[{key:"remove",value:function(){bb._get(Object.getPrototypeOf(tb.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"handleDrop",value:function(G){}},{key:"removePreviews",value:function(){this.previews.forEach(function(G){return G.clear()})}},{key:"previewDrop",value:function(G){var ma=this;0<this.previews.length||(this.previews=G.map(function(Ga){return ma.container.addMorph({type:kb.DropPreview,
bounds:Ga.bounds()})}),this.previews.forEach(function(Ga){Ga.step()}))}},{key:"updateSpacing",value:function(G){this.target.spacing=G}},{key:"updateAxis",value:function(G){this.target.axis=G}},{key:"updateAlign",value:function(G){this.target.align=G}},{key:"optionControls",value:function(){var G=this.target,ma=new kb.DropDownSelector({borderRadius:2,padding:3,selectedValue:G.axis,values:["row","column"]}),Ga=new kb.DropDownSelector({borderRadius:2,padding:3,selectedValue:G.align,values:["left","center"]});
G=new kb.NumberWidget({min:0,number:G.spacing,padding:kb.rect(5,3,0,0),borderRadius:3,borderWidth:1,borderColor:kb.Color.gray,unit:"px"});kb.connect(G,"update",this,"updateSpacing");kb.connect(Ga,"update",this,"updateAlign");kb.connect(ma,"update",this,"updateAxis");var lb={type:"label",padding:kb.rect(0,5,5,5),fill:kb.Color.transparent,fontColor:kb.Color.gray.darker(),readOnly:!0};return[[Object.assign({},lb,{textString:"Submorph Spacing"}),G],[Object.assign({},lb,{textString:"Tiling Align"}),Ga],
[Object.assign({},lb,{textString:"Tiling Axis"}),ma]].map(function(gc){return{submorphs:gc,fill:null,layout:new kb.HorizontalLayout({spacing:3})}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:kb.Color.transparent},previews:{defaultValue:[]}}}}],oa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:19510,end:21708})}(kb.LayoutHalo);kb.TilingLayoutHalo=Mc;kb.TilingLayoutHalo=Mc;kb.TilingLayoutHalo=Mc;(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=oa.hasOwnProperty("DropPreview")&&"function"===typeof oa.DropPreview?oa.DropPreview:oa.DropPreview=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,
[{key:"clear",value:function(){this.stopped=!0;this.remove()}},{key:"step",value:function(){var G=this,ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){if(1==Ga.nextAddress)return ma=kb.easings.inOutQuad,Ga.yield(G.animate({opacity:.5,duration:(G.pulseDuration-10)/2,easing:ma}),2);if(3!=Ga.nextAddress)return Ga.yield(G.animate({opacity:1,duration:(G.pulseDuration-10)/2,easing:ma}),3);G.stopped||G.step();Ga.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropPreview"}},
{key:"properties",get:function(){return{isHaloItem:{readOnly:!0,get:function(){return!0}},epiMorph:{readOnly:!0,get:function(){return!0}},fill:{defaultValue:kb.Color.orange.withA(.3)},hasFixedPosition:{defaultValue:!0},borderColor:{defaultValue:kb.Color.orange},borderWidth:{defaultValue:2},borderStyle:{defaultValue:"dashed"},pulseDuration:{defaultValue:2E3}}}}],oa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21710,end:22534})})(kb.Morph);Mc=ta("F",function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=oa.hasOwnProperty("FlexLayoutHalo")&&"function"===typeof oa.FlexLayoutHalo?oa.FlexLayoutHalo:oa.FlexLayoutHalo=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"handleDrop",value:function(G){}},{key:"previewDrop",
value:function(G){var ma=this;0<this.previews.length||(this.previews=G.map(function(Ga){return ma.container.addMorph({type:kb.DropPreview,position:ma.container.localize(ma.world().firstHand.position),extent:Ga.bounds().extent()})}),this.previews.forEach(function(Ga){Ga.step()}))}},{key:"remove",value:function(){bb._get(Object.getPrototypeOf(tb.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"removePreviews",value:function(){this.previews.forEach(function(G){return G.clear()})}},
{key:"onDrop",value:function(G){this.removePreviews();G.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateAutoResizePolicy",value:function(G){G&&(this.originalExtent=this.container.extent);this.target.autoResize=G;G||(this.container.extent=this.originalExtent||this.container.extent);this.alignWithTarget()}},{key:"updateResizeSubmorphsPolicy",value:function(G){this.target.resizeSubmorphs=G;this.alignWithTarget()}},
{key:"updateAlignmentPolicy",value:function(G){this.target.align=G}},{key:"updateDirectionPolicy",value:function(G){this.target.direction=G}},{key:"updateSpacing",value:function(G){this.target.spacing=G}},{key:"optionControls",value:function(){var G=this.target,ma=G.possibleAlignValues?{fill:kb.Color.transparent,layout:new kb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"align: "},new kb.DropDownSelector({name:"alignment",borderRadius:2,padding:3,
selectedValue:G.align,values:G.possibleAlignValues})]}:null,Ga=G.possibleDirectionValues?{fill:kb.Color.transparent,layout:new kb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"direction: "},new kb.DropDownSelector({name:"direction",borderRadius:2,padding:3,selectedValue:G.direction,values:G.possibleDirectionValues})]}:null,lb=new kb.NumberWidget({fill:kb.Color.white,borderWidth:1,borderRadius:4,padding:kb.rect(5,4,0,0),borderColor:kb.Color.gray,
min:0,number:G.spacing,unit:"px"}),gc=new kb.LabeledCheckBox({name:"autoResize",label:"Resize Container",alignCheckBox:"right",fill:kb.Color.transparent,checked:G.autoResize});G=new kb.LabeledCheckBox({label:"Resize Submorphs",name:"resizeSubmorphs",alignCheckBox:"right",fill:kb.Color.transparent,checked:G.resizeSubmorphs});kb.connect(lb,"update",this,"updateSpacing");kb.connect(gc,"checked",this,"updateAutoResizePolicy");kb.connect(G,"checked",this,"updateResizeSubmorphsPolicy");ma&&kb.connect(ma.submorphs[1],
"selectedValue",this,"updateAlignmentPolicy");Ga&&kb.connect(Ga.submorphs[1],"selectedValue",this,"updateDirectionPolicy");return[gc,G].concat($jscomp.arrayFromIterable([ma,Ga].filter(Boolean)),[{fill:kb.Color.transparent,layout:new kb.HorizontalLayout,submorphs:[{type:"label",value:"Submorph Spacing",fontColor:kb.Color.gray.darker(),padding:kb.rect(0,5,5,5)},lb]}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FlexLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},
fill:{defaultValue:kb.Color.transparent},halosEnabled:{defaultValue:!1},previews:{defaultValue:[]}}}}],oa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:22543,end:26761})}(kb.LayoutHalo));kb.FlexLayoutHalo=Mc;kb.FlexLayoutHalo=Mc;kb.FlexLayoutHalo=Mc;$a=ta("c",function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
tb=oa.hasOwnProperty("ProportionalLayoutHalo")&&"function"===typeof oa.ProportionalLayoutHalo?oa.ProportionalLayoutHalo:oa.ProportionalLayoutHalo=function(G){G&&G[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bb(tb,ja,[{key:"handleDrop",value:function(G){}},{key:"onDrop",value:function(G){G.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateSubmorphProportionalLayoutSettings",
value:function(G){var ma={};this.target.changeSettingsFor(G.submorph,(ma[G.axis]=G.policy,ma),!0)}},{key:"onSubmorphSettingsDragStart",value:function(G,ma){var Ga=this;G.stop();var lb=this.target.settingsFor(ma);ma="";for(var gc in lb)ma+=gc+":"+lb[gc]+" ";var uc=kb.morph({type:"label",value:ma,isLayoutable:!1});uc.wantsToBeDroppedOn=function(yd){return Ga.target.layoutableSubmorphs.includes(yd)};uc.onBeingDroppedOn=function(yd,Pd){uc.remove();if(yd=Ga.target.layoutableSubmorphs.includes(Pd)?Pd:G.world.morphsContainingPoint(G.hand.position).find(function(ve){return Ga.target.layoutableSubmorphs.includes(ve)}))Ga.updateSubmorphProportionalLayoutSettings({policy:lb.x,
axis:"x",submorph:yd}),Ga.updateSubmorphProportionalLayoutSettings({policy:lb.y,axis:"y",submorph:yd}),yd.show(),$world.setStatusMessage("layout settings applied")};G.hand.grab(uc)}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var G=this,ma,Ga,lb,gc,uc,yd,Pd,ve,Uc,Sd,De,Td;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Gf){switch(Gf.nextAddress){case 1:return ma=G.target.layoutableSubmorphs,G.env.eventDispatcher.isKeyPressed("Shift")?(lb=ma.map(function(Te){return{isListItem:!0,
string:String(Te),value:Te}}),Gf.yield($world.listPrompt("Select morph",lb,{requester:G,onSelection:function(Te){return Te.show()}}),5)):Gf.yield(kb.InteractiveMorphSelector.selectMorph(G.world(),G,function(Te){return ma.includes(Te)}),4);case 4:Ga=Gf.yieldResult;Gf.jumpTo(3);break;case 5:gc=Gf.yieldResult,uc=$jscomp.makeIterator(gc.selected),Ga=uc.next().value;case 3:if(!Ga)return Gf.return();yd=G.state.popover.get("controlContainer");Pd=yd.getAllNamed(/submorph config/);ve=["move","resize","scale",
"fixed"];Uc=G.target.settingsFor(Ga);Pd.length||(yd.submorphs=[].concat($jscomp.arrayFromIterable(yd.submorphs),[{name:"submorph config X-Axis policy",position:kb.pt(0,G.height),fill:kb.Color.transparent,layout:new kb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph X-Axis policy: "},new kb.DropDownSelector({name:"x-axis policy selector",borderRadius:2,padding:3,selectedValue:Uc.x,values:ve})]},{name:"submorph config Y-Axis policy",position:kb.pt(0,
G.height),fill:kb.Color.transparent,layout:new kb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph Y-Axis policy: "},new kb.DropDownSelector({name:"y-axis policy selector",borderRadius:2,padding:3,selectedValue:Uc.y,values:ve})]},kb.morph({position:kb.pt(0,G.height+20),draggable:!0,name:"dragme",type:"label",value:"drag me to copy"})]));Sd=yd.getSubmorphNamed("x-axis policy selector");De=yd.getSubmorphNamed("y-axis policy selector");Td=yd.getSubmorphNamed("dragme");
kb.disconnect(Sd,"selectedValue",G,"updateSubmorphProportionalLayoutSettings");kb.disconnect(De,"selectedValue",G,"updateSubmorphProportionalLayoutSettings");Sd.selectedValue=Uc.x;De.selectedValue=Uc.y;kb.connect(Td,"onDragStart",G,"onSubmorphSettingsDragStart",{updater:function(Te,mc){return Te(mc,Ga)},varMapping:{submorph:Ga}});kb.connect(Sd,"selectedValue",G,"updateSubmorphProportionalLayoutSettings",{converter:function(Te){return{policy:Te,axis:"x",submorph:Ga}},varMapping:{submorph:Ga}});kb.connect(De,
"selectedValue",G,"updateSubmorphProportionalLayoutSettings",{converter:function(Te){return{policy:Te,axis:"y",submorph:Ga}},varMapping:{submorph:Ga}});Gf.jumpToEnd()}})}},{key:"optionControls",value:function(G){this.state.popover=G;var ma=this.target;G=new kb.LabeledCheckBox({name:"x-axis",label:"X-Axis",alignCheckBox:"right",fill:kb.Color.transparent,checked:ma.xAxisEnabled});ma=new kb.LabeledCheckBox({name:"y-axis",label:"Y-Axis",alignCheckBox:"right",fill:kb.Color.transparent,checked:ma.yAxisEnabled});
var Ga=new kb.Button({name:"modify submorph settings button",label:[].concat($jscomp.arrayFromIterable(kb.Icon.textAttribute("crosshairs")),["\u00a0Change submorph settings"])});kb.connect(G,"checked",this,"updateXAxisEnabled");kb.connect(ma,"checked",this,"updateYAxisEnabled");kb.connect(Ga,"fire",this,"chooseSubmorphToChangeLayoutSettings");return[Ga]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},
fill:{defaultValue:kb.Color.transparent}}}}],oa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:26771,end:32465})}(kb.LayoutHalo));kb.ProportionalLayoutHalo=$a;kb.ProportionalLayoutHalo=$a;kb.ProportionalLayoutHalo=$a;Wb=lively.FreezerRuntime.recorderFor("lively.halos/index.js");Wb.Halo=xd;
Wb.MorphHighlighter=vd;Wb.InteractiveMorphSelector=Gc;Wb.StatusMessage=Lb;Wb.StatusMessageForMorph=tc;Wb.show=xa;Wb.showConnector=Eb;Wb.ProportionalLayoutHalo=$a;Wb.GridLayoutHalo=Cc;Wb.FlexLayoutHalo=Mc;Wb.showAndSnapToGuides=W;Wb.removeSnapToGuidesOf=I;Wb.StatusMessage=Lb;Wb.StatusMessage=Lb;Wb.StatusMessageForMorph=tc;Wb.StatusMessageForMorph=tc;Wb.show=xa;Wb.show=xa;Wb.showConnector=Eb;Wb.showConnector=Eb;Wb.Halo=xd;Wb.Halo=xd;Wb.MorphHighlighter=vd;Wb.MorphHighlighter=vd;Wb.InteractiveMorphSelector=
Gc;Wb.InteractiveMorphSelector=Gc;Wb.ProportionalLayoutHalo=$a;Wb.ProportionalLayoutHalo=$a;Wb.GridLayoutHalo=Cc;Wb.GridLayoutHalo=Cc;Wb.FlexLayoutHalo=Mc;Wb.FlexLayoutHalo=Mc;Wb.showAndSnapToGuides=W;Wb.showAndSnapToGuides=W;Wb.removeSnapToGuidesOf=I;Wb.removeSnapToGuidesOf=I;xd=Object.freeze({__proto__:null,StatusMessage:Lb,StatusMessageForMorph:tc,show:xa,showConnector:Eb,Halo:xd,MorphHighlighter:vd,InteractiveMorphSelector:Gc,ProportionalLayoutHalo:$a,GridLayoutHalo:Cc,FlexLayoutHalo:Mc,showAndSnapToGuides:W,
removeSnapToGuidesOf:I,SvgStyleHalo:void 0});ta("i",xd);ta("_",void 0)}}});