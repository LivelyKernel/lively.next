System.register(["./__root_module__-a4bfb546.js","./index-164fc5db.js"],function(ta){var cb,mb,Sb,Jb,sd,vc,wd,wc,Cc,Gc,Cd,pe,Je,ce,Qb,pc,ld,Rb,xd,Hd,Dc,bc,Ib,gc,sc,dd,bd,oc,$a,fb,ya,Ca,Aa,xa,Oa,wb,dc,Ya,jb,Za,U,va,M,da,Ia,Wa,Zb,Oc,Ub,vb,pd,$c,Sa;return{setters:[function(nb){cb=nb.C;mb=nb.a2;Sb=nb.b7;Jb=nb.b8;sd=nb.b9;vc=nb.ba;wd=nb.bb;wc=nb.bc;Cc=nb.a3;Gc=nb.al;Cd=nb.bd;pe=nb.be;Je=nb.bf;ce=nb.an;Qb=nb.b0;pc=nb.ap;ld=nb.aD;Rb=nb.ac;xd=nb.b1;Hd=nb.ar;Dc=nb.I;bc=nb.aZ;Ib=nb.b5;gc=nb.bg;sc=nb.bh;
dd=nb.au;bd=nb.av;oc=nb.at;$a=nb.a6;fb=nb.bi;ya=nb.aw;Ca=nb.as;Aa=nb.aE;xa=nb.ad;Oa=nb.bj;wb=nb.aq;dc=nb.ab;Ya=nb.ae;jb=nb.$;Za=nb.ax;U=nb.a7;va=nb.a8;M=nb.a1;da=nb.bk;Ia=nb.bl;Wa=nb.bm;Zb=nb.am;Oc=nb.aj;Ub=nb.aP},function(nb){vb=nb.p;pd=nb.P;$c=nb._;Sa=nb.N}],execute:function(){var nb=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js");nb.Color=cb;nb.rect=mb;nb.Complementary=Sb;nb.Triadic=Jb;nb.Tetradic=sd;nb.Quadratic=vc;nb.Analogous=wd;nb.Neutral=wc;nb.pt=Cc;nb.Point=Gc;nb.flatDesignColors=
Cd;nb.materialDesignColors=pe;nb.webSafeColors=Je;nb.Morph=ce;nb.CustomLayout=Qb;nb.VerticalLayout=pc;nb.HorizontalLayout=ld;nb.Text=Rb;nb.TilingLayout=xd;nb.Ellipse=Hd;nb.Image=Dc;nb.StyleSheet=bc;nb.DropDownSelector=Ib;nb.ModeSelector=gc;nb.Slider=sc;nb.connect=dd;nb.signal=bd;nb.num=oc;nb.arr=$a;nb.SnapLayout=fb;nb.WHEEL_URL="/lively.ide/assets/color-wheel.png";nb.duration=200;(function(Id){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),Jd=Pc.hasOwnProperty("ColorPaletteField")&&
"function"===typeof Pc.ColorPaletteField?Pc.ColorPaletteField:Pc.ColorPaletteField=function(fa){fa&&fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Jd,Id,[{key:"onHoverIn",value:function(){if(this.color){var fa=$jscomp.makeIterator(this.color.isGradient?nb.Color.blue.toHSB():this.color.toHSB()),Qa=fa.next().value,Ja=fa.next().value;fa=fa.next().value;this.borderColor=nb.Color.hsb(Qa,1<Ja+.5?Ja-.5:Ja+.5,1<fa+.5?fa-.5:fa+.5)}}},
{key:"onHoverOut",value:function(){this.borderColor=nb.Color.transparent}},{key:"onMouseDown",value:function(){nb.signal(this,"updateColor",this.color)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPaletteField"}},{key:"properties",get:function(){return{color:{defaultValue:nb.Color.blue},borderWidth:{defaultValue:2},borderColor:{after:["color"],initialize:function(){this.borderColor=this.color||nb.Color.transparent}},fill:{after:["color"],initialize:function(){this.fill=this.color||
nb.Color.transparent}},styleClasses:{after:["color"],initialize:function(){this.styleClasses=this.color?["colorField"]:["vacantColorField"]}}}}}],Pc,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:638,end:1652})})(nb.Morph);(function(Id){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),
Jd=Pc.hasOwnProperty("ColorHarmonyField")&&"function"===typeof Pc.ColorHarmonyField?Pc.ColorHarmonyField:Pc.ColorHarmonyField=function(fa){fa&&fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Jd,Id,[{key:"onMouseDown",value:function(){nb.signal(this,"updateColor",this.color)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorHarmonyField"}},{key:"properties",get:function(){return{extent:{defaultValue:nb.pt(80,
60)},fill:{defaultValue:nb.Color.transparent},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/color harmony field"}}},color:{set:function(fa){var Qa=$jscomp.makeIterator(this.submorphs),Ja=Qa.next().value;Qa=Qa.next().value;var bb=$jscomp.makeIterator(fa?fa.toHSB():[]),H=bb.next().value,aa=bb.next().value;bb=bb.next().value;this.setProperty("color",fa);fa&&Ja&&Qa&&(Ja.fill=fa,Qa.textString=fa.toHexString(),Qa.fontColor=nb.Color.hsb(H,1<aa+.5?aa-.5:aa+.5,1<bb+.5?bb-.5:bb+
.5))}},submorphs:{after:["color"],initialize:function(){var fa=$jscomp.makeIterator((this.color||nb.Color.transparent).toHSB()),Qa=fa.next().value,Ja=fa.next().value;fa=fa.next().value;this.submorphs=[new nb.Morph({fill:this.color,extent:nb.pt(80,50)}),new nb.Text({textString:Qa.toFixed()+", "+Ja.toFixed(2)+", "+fa.toFixed(2),fill:nb.Color.transparent,fontColor:nb.Color.gray.darker(),bottomLeft:nb.pt(0,50)})]}}}}}],Pc,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1654,end:3046})})(nb.Morph);(function(Id){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),Jd=Pc.hasOwnProperty("HarmonyDisplay")&&"function"===typeof Pc.HarmonyDisplay?Pc.HarmonyDisplay:Pc.HarmonyDisplay=function(fa){fa&&fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return ya(Jd,Id,[{key:"update",value:function(fa){var Qa=$jscomp.makeIterator(fa.pivotColor.toHSB()),Ja=Qa.next().value,bb=Qa.next().value;Qa=Qa.next().value;Ja=fa.harmony.chord({hue:Ja,saturation:bb,brightness:Qa});Ja.length!=this.submorphs.length?this.submorphs=Ja.map(function(H){H=new nb.ColorHarmonyField({color:H});nb.connect(H,"updateColor",fa,"color");return H}):nb.arr.zip(this.submorphs,Ja).forEach(function(H){var aa=$jscomp.makeIterator(H);H=aa.next().value;aa=aa.next().value;H.color=aa})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HarmonyDisplay"}}],Pc,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3048,end:3626})})(nb.Morph);(function(Id){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),Jd=Pc.hasOwnProperty("PivotColorControl")&&
"function"===typeof Pc.PivotColorControl?Pc.PivotColorControl:Pc.PivotColorControl=function(fa){fa&&fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Jd,Id,[{key:"update",value:function(fa){this.pivotColor=fa.pivotColor}},{key:"onDrag",value:function(fa){var Qa=$jscomp.makeIterator(this.pivotColor.toHSB()),Ja=Qa.next().value,bb=Qa.next().value;Qa=Qa.next().value;Ja=nb.num.toRadians(Ja);fa=nb.Point.polar(50*bb,Ja).addPt(fa.state.dragDelta);
Ja=nb.num.toDegrees(fa.theta());Ja=0>Ja?Ja+360:Ja;bb=Math.min(fa.r()/50,1);this.pivotColor=nb.Color.hsb(Ja,bb,Qa)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PivotColorControl"}},{key:"properties",get:function(){return{pivotColor:{defaultValue:nb.Color.blue},draggable:{defaultValue:!0}}}}],Pc,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3628,end:4262})})(nb.Ellipse);(function(Id){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),Jd=Pc.hasOwnProperty("HarmonyVisualizer")&&"function"===typeof Pc.HarmonyVisualizer?Pc.HarmonyVisualizer:Pc.HarmonyVisualizer=function(fa){fa&&fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Jd,Id,[{key:"update",value:function(fa){var Qa=
$jscomp.makeIterator(this.submorphs).next().value,Ja=this.get("pivot control"),bb=$jscomp.makeIterator(fa.pivotColor.toHSB()),H=bb.next().value,aa=bb.next().value;bb=bb.next().value;var Ma=nb.num.toRadians(H);H=fa.harmony.chord({hue:H,saturation:aa,brightness:bb}).map(function(tb){var Lb=$jscomp.makeIterator(tb.toHSB()),uc=Lb.next().value;tb=Lb.next().value;Lb.next();Lb=nb.num.toRadians(uc);return nb.Point.polar(50*tb,Lb)});Qa.fill=nb.Color.black.withA(1-bb);Ja.update(fa);Qa.submorphs.length-1!=H.length?
Qa.submorphs=[].concat($jscomp.arrayFromIterable(H.map(function(tb){return new nb.Ellipse({center:tb,fill:nb.Color.transparent,draggable:!1,borderWidth:1,borderColor:nb.Color.black})})),[Ja]):(nb.arr.zip(Qa.submorphs,H).forEach(function(tb){var Lb=$jscomp.makeIterator(tb);tb=Lb.next().value;if(Lb=Lb.next().value)tb.center=Lb}),Ja.center=nb.Point.polar(50*aa,Ma))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HarmonyVisualizer"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["harmonyVisualizer"]},
submorphs:{initialize:function(){this.submorphs=[{type:"ellipse",name:"harmonyPoints",submorphs:[new nb.PivotColorControl({name:"pivot control"})]}]}}}}}],Pc,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4264,end:5726})})(nb.Image);(function(Id){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),
Jd=Pc.hasOwnProperty("HarmonyPalette")&&"function"===typeof Pc.HarmonyPalette?Pc.HarmonyPalette:Pc.HarmonyPalette=function(fa){fa&&fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Jd,Id,[{key:"update",value:function(fa){this.updateInProgress||(this.updateInProgress=!0,this.pivotBrightness=fa.pivotBrightness,this.harmony=fa.harmony,this.get("harmonies").update(fa),this.get("harmony visualizer").update(fa),this.updateInProgress=
!1)}},{key:"harmonyControl",value:function(){var fa,Qa,Ja=new nb.Morph({name:"harmonyControl",submorphs:[new nb.HarmonyVisualizer({name:"harmony visualizer"}),Qa=new nb.Slider({min:0,max:1,tooltip:"Adjust Brightness",width:100,value:this.pivotBrightness}),fa=new nb.DropDownSelector({name:"harmonySelector",isHaloItem:!0,padding:4,selectedValue:this.harmony,getCurrentValue:function(){return this.selectedValue.name},values:{Complement:new nb.Complementary,Triadic:new nb.Triadic,Tetradic:new nb.Tetradic,
Quadratic:new nb.Quadratic,Analogous:new nb.Analogous,Neutral:new nb.Neutral}})]});nb.connect(Qa,"value",this,"pivotBrightness");nb.connect(fa,"selectedValue",this,"harmony");return Ja}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HarmonyPalette"}},{key:"properties",get:function(){return{harmony:{defaultValue:new nb.Complementary},pivotBrightness:{defaultValue:1},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/harmony palette"}}},submorphs:{after:["harmony"],
initialize:function(){this.submorphs=[new nb.HarmonyDisplay({name:"harmonies"}),this.harmonyControl()]}}}}}],Pc,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:5728,end:7655})})(nb.Morph);var tc=ta("C",function(Id){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-palette.js"),
Jd=Pc.hasOwnProperty("ColorPalette")&&"function"===typeof Pc.ColorPalette?Pc.ColorPalette:Pc.ColorPalette=function(fa){fa&&fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Jd,Id,[{key:"fadeIntoWorld",value:function(fa){ya._get(Object.getPrototypeOf(Jd.prototype),"fadeIntoWorld",this).call(this,fa);this.initPosition=fa;return this}},{key:"isHaloItem",value:function(){return!0}},{key:"onKeyDown",value:function(fa){"Escape"==
fa.key&&this.close()}},{key:"close",value:function(fa){fa?this.fadeOut(fa):this.remove();nb.signal(this,"close")}},{key:"paletteView",value:function(){return{name:"paletteView",extent:nb.pt(400,253),submorphs:[this.solidColorPalette(),new nb.HarmonyPalette({name:"harmony palette",isLayoutable:!1,visible:!1,draggable:!1})]}}},{key:"selectSolidMode",value:function(){var fa=this.get("solidColorPalette"),Qa=this.get("paletteView");fa.visible||(Qa.submorphs.forEach(function(Ja){return Ja.animate({isLayoutable:!1,
visible:!1,duration:200})}),fa.animate({isLayoutable:!0,visible:!0,duration:200}))}},{key:"selectHarmonyMode",value:function(){var fa=this.get("paletteView");this.get("harmony palette").visible||(fa.submorphs.forEach(function(Qa){return Qa.animate({isLayoutable:!1,visible:!1,duration:200})}),this.get("harmony palette").animate({isLayoutable:!0,visible:!0,duration:200}))}},{key:"fillTypeSelector",value:function(){var fa=new nb.ModeSelector({reactsToPointer:!1,name:"fillTypeSelector",items:["Color Palette",
"Color Harmonies"],tooltips:{"Color Harmonies":this.getPaletteDescription("harmony")}});nb.connect(fa,"Color Palette",this,"selectSolidMode");nb.connect(fa,"Color Harmonies",this,"selectHarmonyMode");return fa}},{key:"solidColorPalette",value:function(){return{name:"solidColorPalette",master:{auto:"styleguide://SystemWidgets/solid color palette"},submorphs:[this.getCurrentPalette(),this.paletteConfig()]}}},{key:"getCurrentPalette",value:function(){var fa=this.getColorsFor(this.colorPalette),Qa=fa.colors,
Ja=fa.mod;return this.cachedPalette[fa.name]||this.getPalette(Qa,Ja)}},{key:"getPalette",value:function(fa,Qa){var Ja=this,bb=Math.max(Math.ceil(fa.length/Qa),15),H=bb*this.colorFieldWidth,aa=Qa*this.colorFieldWidth;fa=[].concat($jscomp.arrayFromIterable(fa),$jscomp.arrayFromIterable(nb.arr.withN(bb*Qa-fa.length,null)));return{extent:nb.pt(H,aa),name:"paletteContainer",submorphs:fa.map(function(Ma){Ma=new nb.ColorPaletteField({color:Ma&&nb.Color.rgbHex(Ma),extent:nb.pt(Ja.colorFieldWidth,Ja.colorFieldWidth)});
nb.connect(Ma,"updateColor",Ja,"color");return Ma})}}},{key:"switchPalette",value:function(fa){var Qa=fa.name,Ja=fa.colors;fa=fa.mod;var bb=this.get("solidColorPalette"),H=$jscomp.makeIterator(bb.submorphs);H.next();H=H.next().value;this.cachedPalette[Qa]=this.cachedPalette[Qa]||this.getPalette(Ja,fa,Qa);bb.submorphs=[this.cachedPalette[Qa],H]}},{key:"getPaletteDescription",value:function(fa){return{harmony:"Color harmonies are particularly pleasing combinations\nof two or more colors derived from their relationship\non a color wheel. Also known as color chords, color\nharmonies are useful when exploring a possible color\npalette, or can be used as a standalone color scheme.\n",
custom:"Your personal set of customly defined colors.",materialDesign:"Material design is a visual language and design\nsystem developed by Google with an almost flat\nstyle and vibrant color schemes.",flatDesign:"Flat design or flat UI colors are quite popular\nin web design today where bold, bright colors\nare used to create clean, simple interfaces.",webSafe:"Web safe colors emerged during the early era of\nthe internet; a standardized palette of 216 colors\nthat displayed consistently across all major browsers."}[fa]}},
{key:"updatePaletteDescription",value:function(){this.get("paletteSelector").tooltip=this.getPaletteDescription(this.colorPalette)}},{key:"getColorsFor",value:function(fa){return Object.assign({name:fa},{flatDesign:{colors:nb.flatDesignColors,mod:11},materialDesign:{colors:nb.materialDesignColors,mod:15},webSafe:{colors:nb.webSafeColors,mod:12}}[fa])}},{key:"paletteConfig",value:function(){var fa,Qa={name:"paletteConfig",styleClasses:["paletteFormatter"],submorphs:[fa=new nb.DropDownSelector({isHaloItem:!0,
name:"paletteSelector",selectedValue:"flatDesign",padding:4,tooltip:this.getPaletteDescription(this.colorPalette),values:{"Flat Design":"flatDesign","Material Design":"materialDesign","Web Safe":"webSafe"}})]};nb.connect(fa,"selectedValue",this,"colorPalette");return Qa}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPalette"}},{key:"properties",get:function(){return{extent:{defaultValue:nb.pt(200,300)},colorPalette:{after:["submorphs"],defaultValue:"flatDesign",set:function(fa){this.setProperty("colorPalette",
fa);this.switchPalette(this.getColorsFor(fa));this.updatePaletteDescription()}},pivotColor:{after:["submorphs"],set:function(fa){this.setProperty("pivotColor",fa);this.get("harmony palette").update(this)}},color:{set:function(fa){this.setProperty("color",fa);this.get("harmony palette")&&this.get("harmony palette").update(this)}},pivotBrightness:{after:["submorphs","color"],get:function(){var fa=$jscomp.makeIterator((this.pivotColor||this.color).toHSB());fa.next();fa.next();return fa.next().value},
set:function(fa){var Qa=$jscomp.makeIterator((this.pivotColor||this.color).toHSB()),Ja=Qa.next().value;Qa=Qa.next().value;this.pivotColor=nb.Color.hsb(Ja,Qa,fa)}},harmony:{after:["submorphs","pivotColor"],defaultValue:new nb.Complementary,set:function(fa){this.setProperty("harmony",fa);this.get("harmony palette").update(this)}},colorFieldWidth:{defaultValue:20},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/color palette"}}},submorphs:{after:["color"],initialize:function(){var fa=
$jscomp.makeIterator((this.color.isGradient?nb.Color.blue:this.color).toHSB()),Qa=fa.next().value,Ja=fa.next().value;fa.next();this.cachedPalette={};this.submorphs=[this.fillTypeSelector(),this.paletteView()];this.pivotColor=nb.Color.hsb(Qa,Ja,1);nb.connect(this.get("harmony palette"),"harmony",this,"harmony");nb.connect(this.get("pivot control"),"pivotColor",this,"pivotColor");nb.connect(this.get("harmony palette"),"pivotBrightness",this,"pivotBrightness");this.selectSolidMode();this.active=!0}}}}}],
Pc,{pathInPackage:function(){return"styling/color-palette.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:7721,end:15551})}(nb.Morph));nb.ColorPalette=tc;nb.ColorPalette=tc;nb.ColorPalette=tc;var ab=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js");ab.Morph=ce;ab.Icon=Ca;ab.ProportionalLayout=Aa;ab.config=xa;
ab.Text=Rb;ab.ShadowObject=Oa;ab.GridLayout=wb;ab.TilingLayout=xd;ab.StyleSheet=bc;ab.morph=dc;ab.HorizontalLayout=ld;ab.VerticalLayout=pc;ab.KeyHandler=Ya;ab.connect=dd;ab.signal=bd;ab.arr=$a;ab.promise=jb;ab.fun=Za;ab.string=U;ab.obj=va;ab.Color=cb;ab.rect=mb;ab.Rectangle=M;ab.pt=Cc;ab.popovers=vb;ab.ModeSelector=gc;ab.DropDownSelector=Ib;ab.SearchField=da;ab.CheckBox=Ia;ab.Popover=pd;ab.SvgStyleHalo=$c;ab.NumberWidget=Sa;ab.Icons=Wa;ab.duration=200;var zc=ta("c",ab.colorWidgets||{});ab.colorWidgets=
zc;ab.colorWidgets=zc;ab.colorWidgets=zc;(function(Id){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),Jd=Pc.hasOwnProperty("SelectableControl")&&"function"===typeof Pc.SelectableControl?Pc.SelectableControl:Pc.SelectableControl=function(fa){fa&&fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Jd,Id,[{key:"select",value:function(fa){var Qa=this,Ja,bb,H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(aa){if(1==
aa.nextAddress)return Qa.target?aa.yield(Qa.target.execCommand(fa),2):aa.return();Ja=aa.yieldResult;bb=Qa.get("modeSelector");Ja.opacity=0;Qa.lastLabel&&(H=bb.submorphs.indexOf(Qa.lastLabel)<bb.submorphs.indexOf(bb.currentLabel),Ja.topLeft=bb.bottomLeft.addXY(H?20:-20,10));Qa.lastLabel=bb.currentLabel;Qa.animate({submorphs:[bb,Ja],duration:ab.duration});Ja.animate({opacity:1,duration:ab.duration});aa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SelectableControl"}},
{key:"properties",get:function(){return{target:{type:"Morph"},selectableControls:{},selectedControl:{},fill:{defaultValue:ab.Color.transparent},layout:{initialize:function(){this.layout=new ab.VerticalLayout({spacing:10,autoResize:!0,layoutOrder:function(fa){return this.container.submorphs.indexOf(fa)}})}},submorphs:{after:["selectableControls","selectedControl","target"],initialize:function(){var fa=new ab.ModeSelector({name:"modeSelector",items:this.selectableControls,init:this.selectedControl});
this.submorphs=[fa];fa.width=100;ab.connect(fa,"switchLabel",this,"select");this.select(this.selectableControls[this.selectedControl])}}}}}],Pc,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:948,end:2579})})(ab.Morph);(function(Id){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),
Jd=Pc.hasOwnProperty("ToggledControl")&&"function"===typeof Pc.ToggledControl?Pc.ToggledControl:Pc.ToggledControl=function(fa){fa&&fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Jd,Id,[{key:"toggle",value:function(fa){var Qa=$jscomp.makeIterator(this.submorphs).next().value,Ja=this.toggledControl(fa);Qa=[Qa].concat($jscomp.arrayFromIterable(Ja?[Ja]:[]));ab.signal(this,"update",fa&&Ja.value);Ja&&(Ja.opacity=0);this.animate({submorphs:Qa,
duration:ab.duration});Ja&&Ja.animate({opacity:1,duration:ab.duration})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ToggledControl"}},{key:"properties",get:function(){return{title:{defaultValue:"Toggled Property"},toggledControl:{},checked:{},clipMode:{defaultValue:"hidden"},fill:{defaultValue:ab.Color.transparent},layout:{initialize:function(){this.layout=new ab.VerticalLayout({spacing:5})}},submorphs:{initialize:function(){var fa=new ab.CheckBox({checked:this.checked});this.submorphs=
[{fill:ab.Color.transparent,layout:new ab.HorizontalLayout({autoResize:!1}),height:25,submorphs:[{type:"label",name:"property name",fontWeight:"bold",fontSize:14,autofit:!0,opacity:.8,padding:ab.rect(0,2,3,0),textString:this.title,styleClasses:["controlLabel"]},fa]}];this.toggle(this.checked);ab.connect(fa,"toggle",this,"toggle")}}}}}],Pc,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:2581,end:4273})})(ab.Morph);(function(Id){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),Jd=Pc.hasOwnProperty("StylePopover")&&"function"===typeof Pc.StylePopover?Pc.StylePopover:Pc.StylePopover=function(fa){fa&&fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Jd,Id,[{key:"setupConnections",value:function(){}},{key:"controls",
value:function(){return[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StylePopover"}},{key:"properties",get:function(){return{targetMorph:{initialize:function(){this.targetMorph=ab.morph({layout:new ab.HorizontalLayout({spacing:5,resizeContainer:!0}),fill:ab.Color.transparent,submorphs:this.controls()});this.setupConnections()}}}}}],Pc,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4275,end:4825})})(ab.Popover);var Fc=function(Id){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),Jd=Pc.hasOwnProperty("IconPopover")&&"function"===typeof Pc.IconPopover?Pc.IconPopover:Pc.IconPopover=function(fa){fa&&fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Jd,Id,[{key:"onDrop",value:function(fa){var Qa=this;fa.hand.grabbedMorphs.find(function(Ja){return Ja===
Qa.iconLabel})&&(fa.hand.dropMorphsOn(this),this.iconLabel.remove())}},{key:"controls",value:function(){return[{draggable:!1,layout:new ab.VerticalLayout({spacing:4}),fill:ab.Color.transparent,submorphs:[new ab.SearchField({name:"searchInput",width:200,placeHolder:"Search Icons"}),ab.morph({textAndAttributes:this.iconAsTextAttributes(),name:"iconList",draggable:!0,type:"text",extent:ab.pt(200,200),textStyleClasses:["fas","far"],clipMode:"auto",readOnly:!0})]}]}},{key:"setupConnections",value:function(){var fa=
this.ui,Qa=fa.iconList;ab.connect(fa.searchInput,"searchInput",this,"filterIcons");ab.connect(Qa,"onMouseUp",this,"iconSelectClick");ab.connect(Qa,"onDragStart",this,"createIconLabel")}},{key:"relayout",value:function(){}},{key:"createIconLabel",value:function(fa){fa=this.ui.iconList.textPositionFromPoint(fa.positionIn(this.ui.iconList));fa=this.iconAtTextPos(fa);this.iconLabel=ab.Icon.makeLabel(fa,{fontSize:this.ui.iconList.fontSize,name:fa});this.iconLabel.openInHand()}},{key:"iconAsTextAttributes",
value:function(fa){var Qa=Object.keys(ab.Icons);fa&&(Qa=Qa.filter(fa));return ab.arr.flatmap(Qa,function(Ja,bb){return[ab.Icons[Ja].code,{iconCode:ab.Icons[Ja].code,iconName:Ja}," ",{fontFamily:"sans-serif",iconCode:!1,iconName:!1}]})}},{key:"filterIcons",value:function(){var fa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qa){if(1==Qa.nextAddress)return Qa.yield(ab.promise.delay(250),2);ab.fun.debounceNamed("filterIcons",200,function(){fa.ui.iconList.textAndAttributes=fa.iconAsTextAttributes(function(Ja){return fa.ui.searchInput.matches(Ja.toLowerCase())})})();
Qa.jumpToEnd()})}},{key:"iconSelectClick",value:function(fa){fa=this.ui.iconList.textPositionFromPoint(fa.positionIn(this.ui.iconList));fa=this.iconAtTextPos(fa);this.setStatusMessage(fa);ab.signal(this,"select",fa)}},{key:"iconAtTextPos",value:function(fa){var Qa=fa.row;fa=fa.column;--fa;for(var Ja=this.ui.iconList,bb=Ja.textAndAttributesInRange({start:{row:Qa,column:Math.max(0,fa)},end:{row:Qa,column:fa+2}});bb.length&&!bb[1].iconName;)fa++,bb=bb.slice(2);var H={start:{row:Qa,column:fa},end:{row:Qa,
column:fa+1}};Ja.addTextAttribute({backgroundColor:Ja.selectionColor.darker().withA(.5)},H);ab.promise.delay(1E3).then(function(){return Ja.addTextAttribute({backgroundColor:ab.Color.transparent},H)});return bb.length?bb[1].iconName:null}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IconPopover"}},{key:"properties",get:function(){return{isEpiMorph:{get:function(){return!1}},popoverColor:{defaultValue:ab.Color.gray.lighter()},ui:{get:function(){return{searchInput:this.get("searchInput"),
iconList:this.get("iconList")}}}}}}],Pc,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4834,end:8444})}(ab.StylePopover);ab.IconPopover=Fc;ab.IconPopover=Fc;ab.IconPopover=Fc;var Xa=function(Id){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),Jd=
Pc.hasOwnProperty("LayoutPopover")&&"function"===typeof Pc.LayoutPopover?Pc.LayoutPopover:Pc.LayoutPopover=function(fa){fa&&fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Jd,Id,[{key:"getLayoutObjects",value:function(){return[null,new ab.HorizontalLayout({autoResize:!1}),new ab.VerticalLayout({autoResize:!1}),new ab.TilingLayout,new ab.ProportionalLayout,new ab.GridLayout({grid:[[null],[null],[null]]})]}},{key:"close",value:function(){ya._get(Object.getPrototypeOf(Jd.prototype),
"close",this).call(this);this.clearLayoutHalo()}},{key:"controls",value:function(){this.showLayoutHaloFor(this.container);return[{fill:ab.Color.transparent,layout:new ab.VerticalLayout({spacing:5,layoutOrder:function(fa){return this.container.submorphs.indexOf(fa)}}),submorphs:[this.layoutPicker(),this.layoutControls()]}]}},{key:"updateControls",value:function(){this.get("Layout Type").relayout();this.getSubmorphNamed("controlContainer").animate(this.layoutHalo?{isLayoutable:!0,submorphs:this.layoutHalo.optionControls(this),
duration:300}:{isLayoutable:!1,extent:ab.pt(0,0),submorphs:[],duration:300})}},{key:"showLayoutHaloFor",value:function(fa){this.clearLayoutHalo();fa&&fa.layout&&(this.layoutHalo=(fa.world()||fa.env.world).showLayoutHaloFor(fa))}},{key:"clearLayoutHalo",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null)}},{key:"getCurrentLayoutName",value:function(){return this.getLayoutName(this.container.layout)}},{key:"getLayoutName",value:function(fa){return fa?fa.name()+" Layout":
"No Layout"}},{key:"update",value:function(){}},{key:"applyLayout",value:function(fa){this.container.animate({layout:fa});this.showLayoutHaloFor(this.container);this.updateControls(this.controls());ab.signal(this,"layoutChanged",this.container.layout)}},{key:"layoutPicker",value:function(){var fa=this,Qa=this.getLayoutObjects().map(function(Ja){var bb={};return bb[fa.getLayoutName(Ja)]=Ja,bb});Qa=this.get("Layout Type")||new ab.DropDownSelector({name:"Layout Type",borderRadius:2,padding:3,getCurrentValue:function(){return fa.getCurrentLayoutName()},
selectedValue:this.container.layout,values:ab.obj.merge(Qa)});ab.connect(Qa,"selectedValue",this,"applyLayout");return Qa}},{key:"layoutControls",value:function(){return{name:"controlContainer",fill:ab.Color.transparent,layout:new ab.VerticalLayout,isLayoutable:!!this.layoutHalo,submorphs:this.layoutHalo?this.layoutHalo.optionControls(this):[]}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutPopover"}},{key:"properties",get:function(){return{container:{},popoverColor:{defaultValue:ab.Color.gray.lighter()}}}}],
Pc,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:8453,end:11192})}(ab.StylePopover);ab.LayoutPopover=Xa;ab.LayoutPopover=Xa;ab.LayoutPopover=Xa;var db=function(Id){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),Jd=Pc.hasOwnProperty("FillPopover")&&
"function"===typeof Pc.FillPopover?Pc.FillPopover:Pc.FillPopover=function(fa){fa&&fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Jd,Id,[{key:"openHandle",value:function(fa){fa.openInWorld();this.openHandles.push(fa)}},{key:"close",value:function(){ya._get(Object.getPrototypeOf(Jd.prototype),"close",this).call(this);this.openHandles.forEach(function(fa){return fa.remove()})}},{key:"setupConnections",value:function(){var fa=
this.ui,Qa=fa.fillSelector,Ja=fa.colorField;fa=fa.gradientEditor;Qa&&ab.connect(this,"fillValue",Qa,"value");fa&&(ab.connect(fa,"gradientValue",this,"fillValue"),ab.connect(fa,"openHandle",this,"openHandle"));Ja&&(ab.connect(this,"close",Ja,"remove"),ab.connect(Ja,"update",this,"fillValue"),ab.connect(this,"onMouseDown",Ja,"removeWidgets"))}},{key:"commands",get:function(){var fa=this;return ya._get(Object.getPrototypeOf(Jd.prototype),"commands",this).concat([{name:"switch to fill",exec:function(){var Qa=
new ab.colorWidgets.ColorPickerField({name:"colorField",colorValue:fa.fillValue.isGradient?ab.Color.blue:fa.fillValue});Qa.whenRendered().then(function(){fa.setupConnections()});return Qa}},{name:"switch to gradient",exec:function(){var Qa=new ab.colorWidgets.GradientEditor({name:"gradient editor",gradientValue:fa.fillValue});Qa.whenRendered().then(function(){fa.setupConnections();fa.handleMorph&&Qa.showGradientHandlesOn(fa.handleMorph);Qa.update()});return Qa}}])}},{key:"controls",value:function(){return this.gradientEnabled?
[new ab.SelectableControl({name:"fillSelector",target:this,selectedControl:this.fillValue&&this.fillValue.isGradient?"Gradient":"Fill",selectableControls:{Fill:"switch to fill",Gradient:"switch to gradient"}})]:[{fill:ab.Color.transparent,layout:new ab.VerticalLayout({spacing:0}),submorphs:[new ab.colorWidgets.ColorPickerField({name:"colorField",colorValue:this.fillValue})]}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FillPopover"}},{key:"properties",get:function(){return{gradientEnabled:{defaultValue:!0},
fillValue:{defaultValue:ab.Color.blue},popoverColor:{defaultValue:ab.Color.gray.lighter()},handleMorph:{},openHandles:{defaultValue:[]},ui:{get:function(){return{colorField:this.get("colorField"),fillSelector:this.get("fillSelector"),gradientEditor:this.get("gradient editor")}}}}}}],Pc,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:11201,end:14064})}(ab.StylePopover);ab.FillPopover=db;ab.FillPopover=db;ab.FillPopover=db;var hb=ta("S",function(Id){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),Jd=Pc.hasOwnProperty("ShadowPopover")&&"function"===typeof Pc.ShadowPopover?Pc.ShadowPopover:Pc.ShadowPopover=function(fa){fa&&fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Jd,Id,[{key:"controls",value:function(){var fa=
this.shadowValue?this.shadowValue.inset?"Inset Shadow":"Drop Shadow":"No Shadow",Qa=[{layout:new ab.VerticalLayout({resizeContainer:!0,spacing:5}),fill:ab.Color.transparent,name:"control container",submorphs:[fa=new ab.DropDownSelector({name:"shadow type",borderRadius:2,padding:3,selectedValue:fa,values:["No Shadow","Drop Shadow","Inset Shadow"]})].concat(this.shadowValue?this.shadowControls():[])}];ab.connect(fa,"selectedValue",this,"changeShadowType");return Qa}},{key:"shadowControls",value:function(){var fa=
this.shadowValue,Qa=new ab.NumberWidget({min:0,autofit:!1,name:"distanceSlider",number:fa.distance,unit:"px"}),Ja=new ab.NumberWidget({name:"angleSlider",min:0,max:360,number:fa.rotation,autofit:!1}),bb=new ab.NumberWidget({name:"spreadSlider",min:0,number:fa.spread,autofit:!1}),H=new ab.NumberWidget({name:"blurSlider",min:0,number:fa.blur,autofit:!1});fa=new ab.colorWidgets.ColorPickerField({name:"colorPicker",colorValue:fa.color});ab.connect(fa,"colorValue",this,"updateShadow",{converter:function(aa){return{color:aa}}});
ab.connect(this,"onMouseDown",fa,"removeWidgets");ab.connect(this,"close",fa,"remove");ab.connect(bb,"update",this,"updateShadow",{converter:function(aa){return{spread:aa}}});ab.connect(Qa,"update",this,"updateShadow",{converter:function(aa){return{distance:aa}}});ab.connect(H,"update",this,"updateShadow",{converter:function(aa){return{blur:aa}}});ab.connect(Ja,"update",this,"updateShadow",{converter:function(aa){return{rotation:aa}}});return new ab.Morph({layout:new ab.GridLayout({autoAssign:!1,
fitToCell:!1,columns:[0,{paddingLeft:1}],rows:ab.arr.flatten(ab.arr.range(0,3).map(function(aa){return[aa,{paddingBottom:5}]}),1),grid:[["spreadLabel",null,"spreadSlider"],["distanceLabel",null,"distanceSlider"],["blurLabel",null,"blurSlider"],["angleLabel",null,"angleSlider"],["colorLabel",null,"colorPicker"]]}),width:120,height:145,fill:ab.Color.transparent,submorphs:ab.arr.flatten([["distance",Qa],["spread",bb],["blur",H],["angle",Ja],["color",fa]].map(function(aa){var Ma=$jscomp.makeIterator(aa);
aa=Ma.next().value;Ma=Ma.next().value;return[{type:"label",styleClasses:["controlName"],value:ab.string.capitalize(aa)+":",name:aa+"Label"},Ma]}))})}},{key:"changeShadowType",value:function(fa){"No Shadow"==fa?this.toggleShadow(!1):"Inset Shadow"==fa?(this.toggleShadow(!0),this.shadowValue.inset=!0):(this.toggleShadow(!0),this.shadowValue.inset=!1);this.get("control container").animate({submorphs:[this.get("shadow type")].concat(this.shadowValue?this.shadowControls():[]),duration:300})}},{key:"updateShadow",
value:function(fa){var Qa=this.shadowValue;fa=Object.assign({fast:Qa.fast,color:Qa.color,spread:Qa.spread,blur:Qa.blur,distance:Qa.distance,rotation:Qa.rotation,inset:Qa.inset},fa);this.shadowValue=new ab.ShadowObject(fa)}},{key:"toggleShadow",value:function(fa){this.shadowValue&&(this.cachedShadow=this.shadowValue);this.shadowValue=fa&&this.cachedShadow}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowPopover"}},{key:"properties",get:function(){return{shadowValue:{},cachedShadow:{defaultValue:new ab.ShadowObject({fast:!0})},
popoverColor:{defaultValue:ab.Color.gray.lighter()}}}}],Pc,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:14073,end:18507})}(ab.StylePopover));ab.ShadowPopover=hb;ab.ShadowPopover=hb;ab.ShadowPopover=hb;ab.milimeter="https://upload.wikimedia.org/wikipedia/commons/c/c8/Millimeterpapier_10_x_10_cm.svg";
var Rc=function(Id){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),Jd=Pc.hasOwnProperty("PointPopover")&&"function"===typeof Pc.PointPopover?Pc.PointPopover:Pc.PointPopover=function(fa){fa&&fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Jd,Id,[{key:"refineResolution",value:function(fa){this.resolution=.25+this.get("scroller").scroll.y/160;this.relayout()}},{key:"adjustPoint",value:function(fa){this.pointValue=
this.pointValue.addPt(fa.state.dragDelta.scaleBy(1/this.resolution)).roundTo(1);this.relayout()}},{key:"relayout",value:function(){ya._get(Object.getPrototypeOf(Jd.prototype),"relayout",this).call(this);var fa=this.getSubmorphNamed("mesh"),Qa=this.getSubmorphNamed("point value view");fa.origin=fa.innerBounds().center().addXY(4,1);fa.position=this.get("body").innerBounds().center();fa.scale=this.resolution;this.getSubmorphNamed("resolution view").value="Resolution: "+this.resolution.toFixed(2)+"x";
Qa.value=ab.obj.safeToString(this.pointValue);Qa.position=this.getSubmorphNamed("knob").bottomRight}},{key:Symbol.for("lively-instance-initialize"),value:function(fa){var Qa=this;ya._get(Object.getPrototypeOf(Jd.prototype),Symbol.for("lively-instance-initialize"),this).call(this,fa);this.whenRendered().then(function(){return Qa.relayout()})}},{key:"calibrate",value:function(){var fa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qa){if(1==Qa.nextAddress)return fa.get("knob").animate({center:fa.innerBounds().center(),
duration:200}),Qa.yield(fa.getSubmorphNamed("point value view").animate({opacity:0,duration:200}),2);fa.relayout();Qa.jumpToEnd()})}},{key:"showPointValue",value:function(){this.getSubmorphNamed("point value view").animate({opacity:1,duration:200})}},{key:"controls",value:function(){this.extent=ab.pt(200,200);var fa,Qa,Ja=[ab.morph({extent:ab.pt(200,200),clipMode:"hidden",fill:ab.Color.transparent,submorphs:[{type:"image",name:"mesh",fill:ab.Color.transparent,opacity:.5,imageUrl:ab.milimeter,autoResize:!0},
{extent:ab.pt(200,200),draggable:!1,dropShadow:{inset:!0,spread:5,color:ab.Color.gray},fill:ab.Color.transparent},fa=ab.morph({name:"scroller",extent:ab.pt(200,200),clipMode:"scroll",draggable:!1,opacity:.01,submorphs:[{height:625.6,width:10}]}),Qa=ab.morph({name:"knob",type:"ellipse",draggable:!0,nativeCursor:"-webkit-grab",fill:ab.Color.red,borderColor:ab.Color.black,borderWidth:1,center:ab.pt(100,100)}),{type:"label",name:"point value view",padding:4,opacity:0,styleClasses:["Tooltip"]},{position:ab.pt(10,
10),type:"label",name:"resolution view",padding:4,styleClasses:["Tooltip"]}]})];fa.scroll=ab.pt(0,120);ab.connect(Qa,"onDragStart",this,"showPointValue");ab.connect(Qa,"onDrag",this,"adjustPoint");ab.connect(Qa,"onDragEnd",this,"calibrate");ab.connect(this,"extent",this,"relayout");ab.connect(fa,"onScroll",this,"refineResolution");return Ja}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PointPopover"}},{key:"properties",get:function(){return{pointValue:{defaultValue:ab.pt(0,0)},
resolution:{defaultValue:1}}}}],Pc,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:18622,end:21826})}(ab.StylePopover);ab.PointPopover=Rc;ab.PointPopover=Rc;ab.PointPopover=Rc;var qd=function(Id){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),Jd=
Pc.hasOwnProperty("RectanglePopover")&&"function"===typeof Pc.RectanglePopover?Pc.RectanglePopover:Pc.RectanglePopover=function(fa){fa&&fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Jd,Id,[{key:"controls",value:function(){var fa=this;return[{fill:ab.Color.transparent,extent:ab.pt(120,120),layout:new ab.GridLayout({grid:[["top","top scrubber"],["right","right scrubber"],["left","left scrubber"],["bottom","bottom scrubber"]],
columns:[0,{paddingLeft:4},1,{paddingRight:4,fixed:!0,width:60}],rows:ab.arr.flatten(ab.arr.range(0,3).map(function(Qa){return[Qa,{paddingTop:0==Qa?4:2,paddingBottom:3==Qa?4:2}]}))}),submorphs:ab.arr.flatten(["top","right","bottom","left"].map(function(Qa){var Ja=new ab.NumberWidget({master:{auto:"styleguide://SystemWidgets/number field/light"},name:Qa+" scrubber",autofit:!1,number:fa.rectangle.partNamed(Qa)});ab.connect(Ja,"update",fa,"rectangle",{updater:function(bb,H){var aa=this.targetObj.rectangle,
Ma={};H=(Ma.left=aa.left(),Ma.top=aa.top(),Ma.right=aa.right(),Ma.bottom=aa.bottom(),Ma[Qa]=H,Ma);bb(ab.Rectangle.inset(H.left,H.top,H.right,H.bottom))},varMapping:{side:Qa,Rectangle:M}});return[{type:"label",styleClasses:["controlName"],name:Qa,value:Qa,padding:3},Ja]}))}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RectanglePopover"}},{key:"properties",get:function(){return{popoverColor:{defaultValue:ab.Color.gray.lighter()},rectangle:{defaultValue:ab.rect(0)}}}}],Pc,{pathInPackage:function(){return"styling/style-popover.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:21836,end:23820})}(ab.StylePopover);ab.RectanglePopover=qd;ab.RectanglePopover=qd;ab.RectanglePopover=qd;var Xd=function(Id){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/styling/style-popover.js"),Jd=Pc.hasOwnProperty("TextPopover")&&"function"===typeof Pc.TextPopover?Pc.TextPopover:
Pc.TextPopover=function(fa){fa&&fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Jd,Id,[{key:"controls",value:function(){var fa=new ab.Text(Object.assign({name:"editor",extent:ab.pt(300,200),textString:this.text,lineWrapping:"by-chars"},ab.config.codeEditor.defaultStyle));return[{layout:new ab.HorizontalLayout,fill:ab.Color.transparent,borderColor:ab.Color.gray,borderWidth:1,borderRadius:4,clipMode:"hidden",submorphs:[fa]}]}},
{key:"commands",get:function(){return ya._get(Object.getPrototypeOf(Jd.prototype),"commands",this).concat([{name:"save string",exec:function(fa){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qa){fa.text=fa.get("editor").textString;ab.signal(fa,"save",fa.text);fa.setStatusMessage("String saved!",ab.Color.green);Qa.jumpToEnd()})}}])}},{key:"keybindings",get:function(){return ya._get(Object.getPrototypeOf(Jd.prototype),"keybindings",this).concat([{keys:{mac:"Command-S",win:"Ctrl-S"},command:"save string"}])}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextPopover"}},{key:"properties",get:function(){return{text:{defaultValue:"Enter some text!"}}}}],Pc,{pathInPackage:function(){return"styling/style-popover.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23829,end:24904})}(ab.StylePopover);ab.TextPopover=Xd;ab.TextPopover=
Xd;ab.TextPopover=Xd;Object.assign(ab.popovers,{FillPopover:db,IconPopover:Fc,RectanglePopover:qd,ShadowPopover:hb,PointPopover:Rc,LayoutPopover:Xa});var hc=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js");hc.Morph=ce;hc.morph=dc;hc.StyleSheet=bc;hc.Text=Rb;hc.Icon=Ca;hc.VerticalLayout=pc;hc.GridLayout=wb;hc.HorizontalLayout=ld;hc.pt=Cc;hc.Rectangle=M;hc.Color=cb;hc.LinearGradient=Zb;hc.rect=mb;hc.signal=bd;hc.once=Oc;hc.connect=dd;hc.obj=va;hc.Window=Ub;hc.ColorPalette=tc;
hc.FillPopover=db;hc.colorWidgets=zc;hc.Slider=sc;hc.Popover=pd;hc.WHEEL_URL="/lively.ide/assets/color-wheel.png";tc=function(Id){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),Jd=Pc.hasOwnProperty("ColorPickerField")&&"function"===typeof Pc.ColorPickerField?Pc.ColorPickerField:Pc.ColorPickerField=function(fa){fa&&fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Jd,Id,[{key:"testAttr",get:function(){return[42]}},
{key:"spec",value:function(){return hc.obj.dissoc(ya._get(Object.getPrototypeOf(Jd.prototype),"spec",this).call(this),["submorphs"])}},{key:"onKeyDown",value:function(fa){"Escape"==fa.key&&(this.picker&&this.picker.remove(),this.colorValue.isGradient?this.fillWidget.remove():this.palette.remove())}},{key:"onHoverIn",value:function(){this.get("dropDownIndicator").animate({opacity:1,duration:300})}},{key:"onHoverOut",value:function(){this.get("dropDownIndicator").animate({opacity:0,duration:300})}},
{key:"update",value:function(fa){this._updating=!0;var Qa=this.submorphs[1];this.colorValue=fa;this.get("topLeft").fill=fa;this.get("bottomRight").fill=fa.isGradient?hc.Color.transparent:fa.withA(1);Qa.visible=Qa.isLayoutable=!this.gradientEnabled;this.gradientEnabled?this.get("bottomRight").width=this.get("topLeft").width=this.submorphs[0].width=this.width:this.get("bottomRight").width=this.get("topLeft").width=this.width-Qa.width;this.get("bottomRight").left=0;this.get("dropDownIndicator").right=
this.get("paletteButton").width-5;this._updating=!1}},{key:"openPicker",value:function(fa){var Qa=this,Ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){Ja=Qa.picker||new hc.ColorPicker({color:Qa.colorValue});Ja.position=hc.pt(0,-Ja.height/2);hc.connect(Ja,"color",Qa,"update");Qa.picker=Ja.openInWorld();Qa.picker.topLeft=Qa.globalBounds().bottomCenter();Qa.picker.topLeft=Qa.world().visibleBounds().translateForInclusion(Qa.picker.globalBounds()).topLeft();Qa.removePalette();bb.jumpToEnd()})}},
{key:"removePicker",value:function(){this.picker&&this.picker.remove()}},{key:"openPalette",value:function(fa){var Qa=this,Ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return Ja=Qa.gradientEnabled?Qa.fillWidget:Qa.palette,Qa.gradientEnabled?hc.connect(Ja,"fillValue",Qa,"update"):hc.connect(Ja.targetMorph,"color",Qa,"update"),Ja.isLayoutable=!1,bb.yield(Ja.openInWorld(),2);Ja.topCenter=Qa.get("paletteButton").globalBounds().center();Ja.topCenter=Qa.world().visibleBounds().translateForInclusion(Ja.globalBounds()).topCenter();
Qa.removePicker();hc.once(Ja,"remove",Ja,"topLeft",{converter:function(){return hc.pt(0,0)},varMapping:{pt:Cc}});bb.jumpToEnd()})}},{key:"removePalette",value:function(){this.colorValue.isGradient?this.fillWidget.remove():this.palette.remove()}},{key:"removeWidgets",value:function(){this.removePalette();this.removePicker()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPickerField"}},{key:"properties",get:function(){return{gradientEnabled:{defaultValue:!1,after:["colorValue"],
set:function(fa){this.setProperty("gradientEnabled",fa);this.update(this.colorValue)}},fillWidget:{serialize:!1,get:function(){return this._fillWidget=new hc.FillPopover({fillValue:this.colorValue})}},testProp:{get:function(){return[42]}},palette:{serialize:!1,get:function(){return this._palette||(this._palette=new hc.Popover({position:hc.pt(0,0),name:"Color Palette",targetMorph:new hc.ColorPalette({color:this.colorValue})}))}},colorValue:{after:["submorphs"],set:function(fa){fa&&(fa.isColor||fa.isGradient)||
(fa=hc.Color.blue);if(!this._updating)return this.update(fa);this.setProperty("colorValue",fa)},get:function(){return this.getProperty("colorValue")||hc.Color.white}},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/color field"}}},submorphs:{initialize:function(){this.innerBounds().topRight();this.innerBounds().bottomLeft();var fa=hc.pt(40,25);this.submorphs=[{extent:fa,clipMode:"hidden",name:"paletteButton",submorphs:[{name:"topLeft",extent:fa},{name:"bottomRight",type:"polygon",
extent:fa,origin:hc.pt(0,0),vertices:[hc.pt(0,0),fa.withX(0),fa]},hc.Icon.makeLabel("chevron-down",{opacity:0,name:"dropDownIndicator",center:hc.pt(30,12.5)})]},{fill:hc.Color.transparent,extent:hc.pt(25,25),onHoverIn:function(){this.fill=hc.Color.black.withA(.2)},onHoverOut:function(){this.fill=hc.Color.transparent},submorphs:[{name:"pickerButton",type:"image",autoResize:!1,imageUrl:hc.WHEEL_URL}]}];hc.connect(this.getSubmorphNamed("pickerButton"),"onMouseDown",this,"openPicker");hc.connect(this.getSubmorphNamed("paletteButton"),
"onMouseDown",this,"openPalette");hc.connect(this,"remove",this,"removeWidgets");this.colorValue&&this.update(this.colorValue)}}}}}],Pc,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:630,end:6351})}(hc.Morph);hc.ColorPickerField=tc;hc.ColorPickerField=tc;hc.ColorPickerField=tc;
hc.colorWidgets.ColorPickerField=hc.ColorPickerField;(function(Id){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),Jd=Pc.hasOwnProperty("FieldPicker")&&"function"===typeof Pc.FieldPicker?Pc.FieldPicker:Pc.FieldPicker=function(fa){fa&&fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Jd,Id,[{key:"update",value:function(fa){this.getSubmorphNamed("hue").fill=hc.Color.hsb(fa.hue,1,1);this.brightness=
fa.brightness;this.saturation=fa.saturation;this.get("picker").center=this.pickerPosition}},{key:"onMouseDown",value:function(fa){this.pickerPosition=fa.positionIn(this);hc.signal(this,"pickerPosition",this.pickerPosition)}},{key:"onDrag",value:function(fa){this.pickerPosition=fa.positionIn(this)}},{key:"relayout",value:function(){var fa=this.innerBounds();this.getSubmorphNamed("hue").setBounds(fa);this.getSubmorphNamed("shade").setBounds(fa);this.getSubmorphNamed("light").setBounds(fa)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"FieldPicker"}},{key:"properties",get:function(){return{fill:{defaultValue:hc.Color.transparent},saturation:{defaultValue:0},brightness:{defaultValue:0},draggable:{defaultValue:!0},pickerPosition:{derived:!0,after:["submorphs","brightness","saturation"],get:function(){var fa=this.saturation,Qa=this.brightness;return void 0===fa||void 0===Qa?hc.pt(0,0):hc.pt(this.getSubmorphNamed("hue").width*fa,this.getSubmorphNamed("hue").height*(1-Qa))},set:function(fa){var Qa=fa.x;fa=fa.y;
var Ja=this.getSubmorphNamed("hue"),bb=Ja.height;this.saturation=Math.max(0,Math.min(Qa/Ja.width,1));this.brightness=Math.max(0,Math.min(1-fa/bb,1));hc.signal(this,"saturation",this.saturation);hc.signal(this,"brightness",this.brightness)}},submorphs:{initialize:function(){this.submorphs=[{borderRadius:3,name:"hue",reactsToPointer:!1},{borderRadius:3,name:"shade",reactsToPointer:!1,fill:new hc.LinearGradient({stops:[{color:hc.Color.white,offset:0},{color:hc.Color.transparent,offset:1}],vector:"eastwest"})},
{borderRadius:3,name:"light",reactsToPointer:!1,fill:new hc.LinearGradient({stops:[{color:hc.Color.black,offset:0},{color:hc.Color.transparent,offset:1}],vector:"southnorth"})},{name:"picker",type:"ellipse",reactsToPointer:!1,fill:hc.Color.transparent,borderColor:hc.Color.black,borderWidth:3,extent:hc.pt(16,16),submorphs:[{type:"ellipse",fill:hc.Color.transparent,borderColor:hc.Color.white,reactsToPointer:!1,borderWidth:3,center:hc.pt(8,8),extent:hc.pt(12,12)}]}];hc.connect(this,"extent",this,"relayout")}}}}}],
Pc,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:6404,end:9755})})(hc.Morph);(function(Id){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),Jd=Pc.hasOwnProperty("ColorPropertyView")&&"function"===typeof Pc.ColorPropertyView?Pc.ColorPropertyView:Pc.ColorPropertyView=
function(fa){fa&&fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Jd,Id,[{key:"onFocus",value:function(){this.get("keyLabel").styleClasses=["key"].concat($jscomp.arrayFromIterable(this.readOnly?[]:["large","active"]));this.styleClasses=[].concat($jscomp.arrayFromIterable(this.readOnly?[]:["editable","active"]),["value"]);this.selection.cursorBlinkStart()}},{key:"onBlur",value:function(){this.get("keyLabel").styleClasses=[!this.readOnly&&
"large","key"];this.styleClasses=[!this.readOnly&&"editable","value"];this.selection.uninstall()}},{key:"onKeyDown",value:function(fa){"Enter"!=fa.keyCombo||this.readOnly?ya._get(Object.getPrototypeOf(Jd.prototype),"onKeyDown",this).call(this,fa):(this.owner.focus(),fa.stop(),hc.signal(this,"updateValue",this.value))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPropertyView"}},{key:"properties",get:function(){return{update:{},value:{derived:[!0],set:function(fa){this.textString=
hc.obj.safeToString(fa)},get:function(){return this.textString}},styleClasses:{after:["readOnly"],initialize:function(){this.styleClasses=[!this.readOnly&&"editable","value"]}},selectionColor:{defaultValue:hc.Color.gray.darker()}}}}],Pc,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:9757,end:10927})})(hc.Text);(function(Id){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),Jd=Pc.hasOwnProperty("HuePicker")&&"function"===typeof Pc.HuePicker?Pc.HuePicker:Pc.HuePicker=function(fa){fa&&fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Jd,Id,[{key:"onMouseDown",value:function(fa){this.sliderPosition=hc.pt(0,fa.positionIn(this).y)}},{key:"onDrag",value:function(fa){this.sliderPosition=
hc.pt(0,fa.positionIn(this).y)}},{key:"update",value:function(fa){this.hue=fa.hue;this.get("slider").center=this.sliderPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HuePicker"}},{key:"properties",get:function(){return{fill:{defaultValue:new hc.LinearGradient({stops:[{color:hc.Color.rgb(255,0,0),offset:0},{color:hc.Color.rgb(255,255,0),offset:.17},{color:hc.Color.limeGreen,offset:.33},{color:hc.Color.cyan,offset:.5},{color:hc.Color.blue,offset:.66},{color:hc.Color.magenta,
offset:.83},{color:hc.Color.rgb(255,0,0),offset:1}],vector:"northsouth"})},borderRadius:{defaultValue:3},hue:{defaultValue:0},sliderPosition:{derived:!0,after:["submorphs"],get:function(){return hc.pt(this.width/2,this.hue/360*this.height)},set:function(fa){this.hue=Math.max(0,Math.min(fa.y/this.height*360,359));hc.signal(this,"hue",this.hue)}},submorphs:{initialize:function(){this.submorphs=[{name:"slider",height:10,width:50,borderRadius:3,reactsToPointer:!1,nativeCursor:"ns-resize",borderColor:hc.Color.black,
fill:hc.Color.transparent,borderWidth:2}]}}}}}],Pc,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10929,end:12576})})(hc.Morph);(function(Id){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),Jd=Pc.hasOwnProperty("ColorDetails")&&"function"===typeof Pc.ColorDetails?
Pc.ColorDetails:Pc.ColorDetails=function(fa){fa&&fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Jd,Id,[{key:"update",value:function(fa){fa=fa.color;var Qa=$jscomp.makeIterator(fa.toTuple8Bit()),Ja=Qa.next().value,bb=Qa.next().value;Qa=Qa.next().value;var H=$jscomp.makeIterator(fa.toHSB()),aa=H.next().value,Ma=H.next().value;H=H.next().value;var tb=this.get("hashViewer");this.get("colorViewer").fill=fa;tb.replace(tb.documentRange,
fa.toHexString(),!1,!1);this.get("R").value="R "+Ja.toFixed(0)+"\n\nG "+bb.toFixed(0)+"\n\nB "+Qa.toFixed(0)+"\n\nH "+aa.toFixed(0)+"\n\nS "+Ma.toFixed(2)+"\n\nV "+H.toFixed(2)}},{key:"onHashViewerChanged",value:function(fa){fa=hc.Color.rgbHex(fa);this.owner.owner.color=fa}},{key:"keyValue",value:function(fa){var Qa=fa.name,Ja=fa.key,bb=fa.value,H=fa.update;fa=fa.editable;return new hc.Morph({fill:hc.Color.transparent,layout:new hc.HorizontalLayout({spacing:5}),submorphs:[{type:"label",name:"keyLabel",
styleClasses:[fa&&"large","key"],value:Ja},new hc.ColorPropertyView({name:Qa||Ja,readOnly:!fa,value:bb,update:H})]})}},{key:"hashViewer",value:function(){var fa=this.keyValue({name:"hashViewer",key:"#",editable:!0,value:this.color.toHexString()});hc.connect(fa.get("hashViewer"),"updateValue",this,"onHashViewerChanged");return fa}},{key:"rgbViewer",value:function(){var fa=$jscomp.makeIterator(this.color.toTuple8Bit()),Qa=fa.next().value,Ja=fa.next().value;fa=fa.next().value;return new hc.Morph({name:"rgbViewer",
fill:hc.Color.transparent,submorphs:[this.keyValue({key:"R",value:Qa.toFixed()}),this.keyValue({key:"G",value:Ja.toFixed()}),this.keyValue({key:"B",value:fa.toFixed()})]})}},{key:"hsbViewer",value:function(){var fa=$jscomp.makeIterator(this.color.toHSB()),Qa=fa.next().value,Ja=fa.next().value;fa=fa.next().value;return new hc.Morph({name:"hsbViewer",fill:hc.Color.transparent,submorphs:[this.keyValue({key:"H",value:Qa.toFixed()}),this.keyValue({key:"S",value:Ja.toFixed(2)}),this.keyValue({key:"V",value:fa.toFixed(2)})]})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorDetails"}},{key:"properties",get:function(){return{color:{defaultValue:hc.Color.blue},width:{defaultValue:80},fill:{defaultValue:hc.Color.transparent},layout:{initialize:function(){this.layout=new hc.VerticalLayout({spacing:9,layoutOrder:function(fa){return this.container.submorphs.indexOf(fa)}})}},submorphs:{after:["color"],initialize:function(){this.submorphs=[{type:"ellipse",extent:hc.pt(50,50),name:"colorViewer",fill:this.color},
this.hashViewer(),{type:"label",name:"R",autofit:!0,padding:hc.rect(10,0,0,0),styleClasses:["ColorPropertyView"]}];this.update(this)}}}}}],Pc,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:12578,end:15353})})(hc.Morph);tc=ta("a",function(Id){var Pc=lively.FreezerRuntime.recorderFor("lively.ide/styling/color-picker.js"),
Jd=Pc.hasOwnProperty("ColorPicker")&&"function"===typeof Pc.ColorPicker?Pc.ColorPicker:Pc.ColorPicker=function(fa){fa&&fa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ya(Jd,Id,[{key:"onKeyDown",value:function(fa){"Escape"==fa.key&&this.close()}},{key:"close",value:function(){ya._get(Object.getPrototypeOf(Jd.prototype),"close",this).call(this);hc.signal(this,"close")}},{key:"update",value:function(){0!=this.submorphs.length&&
(this.get("header").fill=hc.Color.transparent,this.get("field picker").update(this),this.get("hue picker").update(this),this.get("details").update(this),this.get("alpha slider").update(this.alpha),hc.signal(this,"color",this.color))}},{key:"colorPalette",value:function(){var fa=this.colorDetails(),Qa=this.fieldPicker(),Ja=this.huePicker(),bb=this.alphaSlider();fa=new hc.Morph({master:{auto:"styleguide://SystemWidgets/color picker"},name:"colorPalette",width:this.width,submorphs:[Qa,Ja,fa,bb]});hc.connect(Qa,
"brightness",this,"brightness");hc.connect(Qa,"saturation",this,"saturation");hc.connect(Ja,"hue",this,"hue");return fa}},{key:"alphaSlider",value:function(){var fa,Qa=hc.morph({name:"alphaSlider",fill:hc.Color.transparent,layout:new hc.HorizontalLayout({spacing:3}),submorphs:[{type:"label",padding:hc.Rectangle.inset(3),value:"Alpha",fontColor:hc.Color.gray,fontWeight:"bold"},fa=new hc.Slider({name:"alpha slider",value:this.alpha,min:0,max:1,width:170})]});hc.connect(fa,"value",this,"alpha");return Qa}},
{key:"fieldPicker",value:function(){return new hc.FieldPicker({name:"field picker",saturation:this.saturation,brightness:this.brightness})}},{key:"huePicker",value:function(){return new hc.HuePicker({name:"hue picker",hue:this.hue})}},{key:"colorDetails",value:function(){return new hc.ColorDetails({name:"details",color:this.color})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPicker"}},{key:"properties",get:function(){return{extent:{defaultValue:hc.pt(400,320)},fill:{defaultValue:hc.Color.black.withA(.7)},
isHaloItem:{defaultValue:!0},borderWidth:{defaultValue:0},hasFixedPosition:{defaultValue:!0},color:{defaultValue:hc.Color.blue,derived:!0,before:["submorphs","targetMorph"],get:function(){return hc.Color.hsb(this.hue,this.saturation,this.brightness).withA(this.alpha)},set:function(fa){var Qa=$jscomp.makeIterator(fa.toHSB()),Ja=Qa.next().value,bb=Qa.next().value;Qa=Qa.next().value;this.hue=Ja;this.saturation=bb;this.brightness=Qa;this.alpha=fa.a}},alpha:{set:function(fa){this.setProperty("alpha",fa);
this.update()}},saturation:{},brightness:{set:function(fa){this.setProperty("brightness",fa);this.update()}},hue:{set:function(fa){this.setProperty("hue",fa);this.update()}},targetMorph:{initialize:function(){var fa=this;this.targetMorph=this.colorPalette();this.ui.windowTitle.fontColor=hc.Color.gray;this.ui.header.fill=hc.Color.transparent;this.whenRendered().then(function(){fa.fill=hc.Color.black.withA(.7);fa.update()})}}}}}],Pc,{pathInPackage:function(){return"styling/color-picker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:15362,end:19200})}(hc.Window));hc.ColorPicker=tc;hc.ColorPicker=tc;hc.ColorPicker=tc}}});