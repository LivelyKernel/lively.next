System.register(["./__root_module__-7d3cbdeb.js"],function(Ka){var wb,Ab,gc,Kb,Zc,Kc,md,Fc,Bc,Nc,Uc,ce,Zd,pe,Mc,Kd,Jb,Dc,nd,Hc,wd,Qd,Eb,ic,jd,jc,kd,vb,db,ec,Mb,Hb,pc,Ma,Ib,pb,Ub,dc,vc,gd;return{setters:[function(Nb){wb=Nb.f;Ab=Nb.b;gc=Nb.C;Kb=Nb.m;Zc=Nb.Y;Kc=Nb.p;md=Nb.s;Fc=Nb.R;Bc=Nb.$;Nc=Nb.e;Uc=Nb.Q;ce=Nb.I;Zd=Nb.M;pe=Nb.av;Mc=Nb.c;Kd=Nb.o;Jb=Nb._;Dc=Nb.i;nd=Nb.O;Hc=Nb.af;wd=Nb.K;Qd=Nb.ab;Eb=Nb.j;ic=Nb.a9;jd=Nb.P;jc=Nb.aw;kd=Nb.ac;vb=Nb.a;db=Nb.d;ec=Nb.ax;Mb=Nb.ay;Hb=Nb.az;pc=Nb.g;Ma=Nb.aA;
Ib=Nb.W;pb=Nb.aa;Ub=Nb.aB;dc=Nb.aC;vc=Nb.B;gd=Nb.h}],execute:function(){function Nb(yb){(yb=V.cachedGuideLines.get(yb))&&yb.forEach(function(qb){return qb.remove()})}function Fb(yb,qb,Ia,Q,za){qb=void 0===qb?!0:qb;Ia=void 0===Ia?!0:Ia;Q=void 0===Q?10:Q;za=void 0===za?100:za;if(qb||Ia){var Ta=yb.owner,xb=Ta.world();Ta=Ta.getGlobalTransform();var Yb=yb.owner.submorphs.filter(function(xa){return xa!==yb&&!xa.isEpiMorph&&xa.visible&&xa.reactsToPointer}),Ac=V.findAlignedMorphs(yb,Yb,Q,za,"left top right bottom hCenter vCenter".split(" "),
"left top right bottom hCenter vCenter".split(" "));za=[];var mc=0,qd=0,zd=0,Ee=0;Ta.e-=xb.scroll.x;Ta.f-=xb.scroll.y;if(Ac){Ac=$jscomp.makeIterator(Ac);for(var se=Ac.next();!se.done;se=Ac.next()){se=$jscomp.makeIterator(se.value);se.next();var ke=se.next().value;se=ke.vertical;ke=$jscomp.makeIterator(ke.horizontal);for(var w=ke.next();!w.done;w=ke.next()){w=w.value;var we=w.edgeAVal,ue=w.refPointsA,Od=w.refPointsB,He=w.edgeBVal,Te=Math.ceil(Q-w.delta),Ue=Math.min(ue.top,Od.top);ue=Math.max(ue.bottom,
Od.bottom);w.maxDist>Q&&(Te-=Q/2);mc<Te&&(mc=Te,zd=He-we);za.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:V.guideWidth,start:Ta.transformPoint(V.pt(He,Ue)),end:Ta.transformPoint(V.pt(He,ue)),fill:V.guideColor,guideType:"h",priority:Te})}se=$jscomp.makeIterator(se);for(ke=se.next();!ke.done;ke=se.next())ke=ke.value,w=ke.edgeAVal,Ue=ke.refPointsA,ue=ke.refPointsB,we=ke.edgeBVal,He=Math.ceil(Q-ke.delta),Te=Math.min(Ue.left,ue.left),Ue=Math.max(Ue.right,ue.right),ke.maxDist>Q&&(He-=Q/2),qd<
He&&Math.abs(we-w)<=Q&&(qd=He,Ee=we-w),za.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:V.guideWidth,start:Ta.transformPoint(V.pt(Te,we)),end:Ta.transformPoint(V.pt(Ue,we)),fill:V.guideColor,guideType:"v",priority:He})}}if(!mc||!qd){Yb=[yb].concat($jscomp.arrayFromIterable(Yb));w=V.computeClosestMorphs(Yb);ke=w[0];Yb=ke.l;Ac=ke.r;se=ke.t;ke=ke.b;var ff;if(Yb||Ac||se||ke){var gf=(Yb||Ac||se||ke).refPointsA;for(we=1;we<w.length&&(ue=w[we],He=ue.l,Te=ue.r,Ue=ue.t,ue=ue.b,mc||(Yb&&He&&Yb.index!==
He.index&&Math.abs(He.dist-Yb.dist)<=Q?ff=Object.assign({neighbor:we,direction:"left"},He):Ac&&Te&&Ac!==Te.index&&Math.abs(Te.dist-Ac.dist)<=Q&&(ff=Object.assign({neighbor:we,direction:"right"},Te))),qd||(se&&Ue&&se.index!==Ue.index&&Math.abs(Ue.dist-se.dist)<=Q?ff=Object.assign({neighbor:we,direction:"top"},Ue):ke&&ue&&ke.index!==ue.index&&Math.abs(ue.dist-ke.dist)<=Q&&(ff=Object.assign({neighbor:we,direction:"bottom"},ue))),!ff);we++);}if(ff){var Wb=ff;Q=Wb.direction;Ue=Wb.dist;var Kh=gf.left;Od=
gf.top;var ef=gf.bottom,Fd=gf.right,$d=gf.width,Fa=gf.height;ue=Wb.refPointsA;gf=ue.left;w=ue.top;we=ue.bottom;He=ue.right;Te=ue.width;ue=ue.height;var Wa=Wb.refPointsB,Gb=Wa.left;Wb=Wa.top;var pa=Wa.bottom;Wa=Wa.right;Fd="left"===Q?Kh:"right"===Q?Fd:Kh+$d/2;ef="bottom"===Q?ef:"top"===Q?Od:Od+Fa/2;Kh="left"===Q?Fd-Ue:"right"===Q?Fd+Ue:Kh+$d/2;Ue="bottom"===Q?ef+Ue:"top"===Q?ef-Ue:Od+Fa/2;Od="left"===Q?Wa:"right"===Q?Gb:gf+Te/2;$d="bottom"===Q?Wb:"top"===Q?pa:w+ue/2;!Ia||mc||"right"!==Q&&"left"!==
Q||(mc=10,zd=(ff.dist-(Ac||Yb).dist)*("right"===Q?-1:1),Fd+=zd,Kh+=zd);!Ia||qd||"top"!==Q&&"bottom"!==Q||(qd=10,Ee=((se||ke).dist-ff.dist)*("top"===Q?-1:1),ef+=Ee,Ue+=Ee);za.push({type:"line",epiMorph:!0,hasFixedPosition:!0,start:Ta.transformPoint(V.pt("left"===Q?gf:"right"===Q?He:gf+Te/2,"bottom"===Q?we:"top"===Q?w:w+ue/2)),end:Ta.transformPoint(V.pt(Od,$d)),fill:V.Color.orange,height:V.guideWidth,guideType:Q,priority:10},{type:"line",epiMorph:!0,hasFixedPosition:!0,start:Ta.transformPoint(V.pt(Fd,
ef)),end:Ta.transformPoint(V.pt(Kh,Ue)),fill:V.Color.orange,height:V.guideWidth,guideType:Q,priority:10})}}Ia&&(zd||Ee)&&yb.moveBy(V.pt(zd,Ee));if(qb){za=za.filter(function(xa){var Ha=xa.guideType;xa=xa.priority;return"h"===Ha?xa===mc:"v"===Ha?xa===qd:!0});(qb=V.cachedGuideLines.get(yb))||V.cachedGuideLines.set(yb,qb=[]);for(Ia=0;Ia<za.length;Ia++)ff=void 0,qb[Ia]?ff=Object.assign(qb[Ia],za[Ia]):(ff=V.morph(za[Ia]),qb.push(ff)),ff.owner||xb.addMorph(ff);qb.slice(Ia).forEach(function(xa){return xa.remove()});
V.fun.debounceNamed(yb.id+"-drag-guides-cleanup",1300,function(){var xa=V.cachedGuideLines.get(yb);xa&&xa.forEach(function(Ha){return Ha.remove()})})()}}}function sb(yb,qb,Ia,Q,za,Ta){Ia=void 0===Ia?!0:Ia;Q=void 0===Q?!0:Q;za=void 0===za?5:za;Ta=void 0===Ta?100:Ta;if(Ia||Q){var xb=yb.owner,Yb=xb.world(),Ac=xb.getGlobalTransform(),mc=yb.owner.submorphs.filter(function(ef){return ef!==yb&&!ef.isEpiMorph&&ef.visible&&ef.reactsToPointer});xb=(qb.includes("left")||qb.includes("right")?"x":"")+(qb.includes("top")||
qb.includes("bottom")?"y":"");var qd=V.findMorphsWithSimilarWidthOrHeight(yb,xb,mc,za,Ta),zd=-Infinity,Ee=-Infinity,se=0,ke=0,w=0,we=0,ue=0,Od=0;xb=[];Ac.e-=Yb.scroll.x;Ac.f-=Yb.scroll.y;if(qd){qd=$jscomp.makeIterator(qd);for(var He=qd.next();!He.done;He=qd.next()){He=$jscomp.makeIterator(He.value);He.next();var Te=He.next().value;He=Te.similarIn;var Ue=Te.delta,ff=Te.refPointsA,gf=Te.refPointsB;Te=za-Ue+(Ta-Te.minDist);"width"===He?zd<Te&&(zd=Te,qb.includes("left")&&(ke=-Ue),qb.includes("right")&&
(se=Ue)):Ee<Te&&(Ee=Te,qb.includes("top")&&(w=-Ue),qb.includes("bottom")&&(we=Ue));Ue={type:"line",epiMorph:!0,hasFixedPosition:!0,height:V.guideWidth,fill:V.guideColor,guideType:He,priority:Te,start:Ac.transformPoint("width"===He?V.pt(ff.left,ff.top+ff.height/2):V.pt(ff.left+ff.width/2,ff.top)),end:Ac.transformPoint("width"===He?V.pt(ff.right,ff.top+ff.height/2):V.pt(ff.left+ff.width/2,ff.bottom))};He=Object.assign({},Ue,{start:Ac.transformPoint("width"===He?V.pt(gf.left,gf.top+gf.height/2):V.pt(gf.left+
gf.width/2,gf.top)),end:Ac.transformPoint("width"===He?V.pt(gf.right,gf.top+gf.height/2):V.pt(gf.left+gf.width/2,gf.bottom))});xb.push(Ue,He)}}if(Ta=V.findAlignedMorphs(yb,mc,za,Ta,qb,void 0))for(Ta=$jscomp.makeIterator(Ta),mc=Ta.next();!mc.done;mc=Ta.next()){mc=$jscomp.makeIterator(mc.value);mc.next();qd=mc.next().value;mc=qd.vertical;qd=$jscomp.makeIterator(qd.horizontal);for(He=qd.next();!He.done;He=qd.next()){He=He.value;gf=He.edgeAVal;var Wb=He.refPointsA,Kh=He.refPointsB;Ue=He.edgeBVal;ff=Math.ceil(za-
He.delta);Te=Math.min(Wb.top,Kh.top);Wb=Math.max(Wb.bottom,Kh.bottom);He.maxDist>za&&(ff-=za/2);ue<ff&&(ue=ff,qb.includes("left")&&(ke=-(Ue-gf)),qb.includes("right")&&(se=+(Ue-gf)));xb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:V.guideWidth,start:Ac.transformPoint(V.pt(Ue,Te)),end:Ac.transformPoint(V.pt(Ue,Wb)),fill:V.guideColor,guideType:"h",priority:ff})}mc=$jscomp.makeIterator(mc);for(qd=mc.next();!qd.done;qd=mc.next())qd=qd.value,He=qd.edgeAVal,Te=qd.refPointsA,Wb=qd.refPointsB,
gf=qd.edgeBVal,Ue=Math.ceil(za-qd.delta),ff=Math.min(Te.left,Wb.left),Te=Math.max(Te.right,Wb.right),qd.maxDist>za&&(Ue-=za/2),Od<Ue&&Math.abs(gf-He)<=za&&(Od=Ue,qb.includes("top")&&(w=gf-He),qb.includes("bottom")&&(we=gf-He)),xb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:V.guideWidth,start:Ac.transformPoint(V.pt(ff,gf)),end:Ac.transformPoint(V.pt(Te,gf)),fill:V.guideColor,guideType:"v",priority:Ue})}Q&&(ke&&(yb.left+=ke,yb.right-=ke),w&&(yb.top+=w,yb.bottom-=w),se&&(yb.width+=se),we&&
(yb.height+=we));if(Ia){xb=xb.filter(function(ef){var Fd=ef.guideType;ef=ef.priority;return"width"===Fd?ef===zd:"height"===Fd?ef===Ee:"v"===Fd?ef===Od:"h"===Fd?ef===ue:!1});(qb=V.cachedGuideLines.get(yb))||V.cachedGuideLines.set(yb,qb=[]);for(Ia=0;Ia<xb.length;Ia++)Q=void 0,qb[Ia]?Q=Object.assign(qb[Ia],xb[Ia]):(Q=V.morph(xb[Ia]),qb.push(Q)),Q.owner||Yb.addMorph(Q);qb.slice(Ia).forEach(function(ef){return ef.remove()});V.fun.debounceNamed(yb.id+"-drag-guides-cleanup",1300,function(){var ef=V.cachedGuideLines.get(yb);
ef&&ef.forEach(function(Fd){return Fd.remove()})})()}}}function Ea(yb,qb){qb=void 0===qb?!1:qb;var Ia=ja.MorphicEnv.default().world;if(null===yb||void 0===yb)yb=String(yb);if(yb.isMorph)return ja.showRect(yb.world(),yb.globalBounds().translatedBy(Ia.scroll.negated()),qb);if(yb.isPoint)return ja.showRect(Ia,new ja.Rectangle(yb.x-5,yb.y-5,10,10));if(yb.isLine)return ja.showLine(Ia,yb);if(yb.isRectangle)return ja.showRect(Ia,yb);if("undefined"!==typeof ja.Element&&yb instanceof ja.Element)return ja.showRect(Ia,
ja.Rectangle.fromElement(yb));if("number"===typeof yb||"symbol"===typeof yb||"boolean"===typeof yb||"undefined"!==typeof ja.Node&&yb instanceof ja.Node||yb instanceof RegExp)yb=String(yb);"object"===typeof yb&&(yb=ja.obj.inspect(yb,{maxDepth:1}));return"string"===typeof yb&&1===arguments.length?Ia.setStatusMessage(yb):Ia.setStatusMessage(ja.string.formatFromArray(Array.from(arguments)))}function ua(yb,qb,Ia){Ia=void 0===Ia?3E3:Ia;var Q,za,Ta,xb,Yb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ac){if(1==
Ac.nextAddress){if(!(yb&&yb.world()&&qb&&qb.world()))return Ac.return(null);Q=yb.owner.worldPoint(yb.center);za=qb.owner.worldPoint(qb.center);Ta=Q.lineTo(za).sampleN(2)[1];xb={tagName:"marker",markerHeight:5,markerWidth:5,orient:"auto",refX:1,refY:5,viewBox:"0 0 10 10",children:[{tagName:"circle",stroke:ja.Color.red,fill:ja.Color.red,cx:5,cy:5,r:4}]};Yb=$world.addMorph(new ja.Path({position:Ta,renderOnGPU:!0,vertices:[ja.pt(0),ja.pt(0)],borderWidth:2,startMarker:xb,endMarker:xb,borderColor:ja.Color.red}));
return Ac.yield(Yb.whenRendered(),2)}if(3!=Ac.nextAddress)return Ac.yield(Yb.animate({opacity:1,customTween:function(mc){var qd=Yb.center;Yb.vertices=[ja.pt(0).interpolate(mc,Q.subPt(Ta)),ja.pt(0).interpolate(mc,za.subPt(Ta))];Yb.center=qd},duration:400}),3);Ia&&setTimeout(function(){return Yb.fadeOut()},Ia);return Ac.return(Yb)})}Ka({a:Fb,e:ua,r:Nb,s:Ea});var V=lively.FreezerRuntime.recorderFor("lively.halos/drag-guides.js");V.removeSnapToGuidesOf=Nb;V.showAndSnapToGuides=Fb;V.showAndSnapToResizeGuides=
sb;V.computeRefPoints=function(yb){var qb=yb.x,Ia=yb.y,Q=yb.width;yb=yb.height;return{left:qb,top:Ia,hCenter:qb+Q/2,vCenter:Ia+yb/2,right:qb+Q,bottom:Ia+yb,width:Q,height:yb}};V.findEdgesInAlignment=function(yb,qb,Ia,Q,za,Ta,xb,Yb,Ac,mc){Ia=void 0===Ia?15:Ia;Ta=void 0===Ta?0:Ta;xb=void 0===xb?0:xb;Yb=void 0===Yb?0:Yb;Ac=void 0===Ac?0:Ac;mc=void 0===mc?0:mc;for(var qd=[],zd=[],Ee=0;Ee<V.edges.length;Ee++){var se=$jscomp.makeIterator(V.edges[Ee]),ke=se.next().value,w=se.next().value;se=se.next().value;
var we=yb[w],ue=qb[se],Od=Math.max(we,ue)-Math.min(we,ue);Od>Ia||!(Q&&!Q.includes(w)||za&&!za.includes(se))&&("vertical"===ke?qd:zd).push({delta:Od,edgeA:w,edgeB:se,edgeAVal:we,edgeBVal:ue,refPointsA:yb,refPointsB:qb,distLeft:Ta,distTop:xb,distRight:Yb,distBottom:Ac,maxDist:mc})}return qd.length||zd.length?{vertical:qd,horizontal:zd}:null};V.findAlignedMorphs=function(yb,qb,Ia,Q,za,Ta){Ia=void 0===Ia?15:Ia;Q=void 0===Q?Infinity:Q;for(var xb,Yb=V.computeRefPoints(yb.bounds()),Ac=0;Ac<qb.length;Ac++){var mc=
qb[Ac];if(mc!==yb){var qd=V.computeRefPoints(mc.bounds()),zd=Math.max(0,Yb.left-qd.right),Ee=Math.max(0,qd.left-Yb.right),se=Math.max(0,Yb.top-qd.bottom),ke=Math.max(0,qd.top-Yb.bottom);Math.max(ke,se,Ee,zd)>Q||!(qd=V.findEdgesInAlignment(Yb,qd,Ia,za,Ta,zd,se,Ee,ke,Math.max(ke,se,Ee,zd)))||(xb||(xb=new Map),xb.set(mc,qd))}}yb=yb.owner;qb=V.computeRefPoints(yb.innerBounds());if(Ia=V.findEdgesInAlignment(Yb,qb,Ia))xb||(xb=new Map),xb.set(yb,Ia);return xb};V.findMorphsWithSimilarWidthOrHeight=function(yb,
qb,Ia,Q,za){Q=void 0===Q?15:Q;za=void 0===za?Infinity:za;for(var Ta,xb=V.computeRefPoints(yb.bounds()),Yb=0;Yb<Ia.length;Yb++){var Ac=Ia[Yb];if(Ac!==yb){var mc=V.computeRefPoints(Ac.bounds()),qd=Math.max(0,xb.left-mc.right),zd=Math.max(0,mc.left-xb.right),Ee=Math.max(0,xb.top-mc.bottom),se=Math.max(0,mc.top-xb.bottom),ke=Math.min(se,Ee,zd,qd),w=Math.max(se,Ee,zd,qd);if(!(Math.max(se,Ee,zd,qd)>za)){zd=xb;qd=zd.width;zd=zd.height;se=mc;Ee=se.width;se=se.height;var we=Ee-qd,ue=se-zd;("x"===qb||"xy"===
qb)&&Math.abs(we)<=Q&&(Ta||(Ta=new Map),Ta.set(Ac,{similarIn:"width",minDist:ke,maxDist:w,refPointsA:xb,refPointsB:mc,valA:qd,valB:Ee,delta:we}));("y"===qb||"xy"===qb)&&Math.abs(ue)<=Q&&(Ta||(Ta=new Map),Ta.set(Ac,{similarIn:"height",minDist:ke,maxDist:w,refPointsA:xb,refPointsB:mc,valA:zd,valB:se,delta:ue}))}}}return Ta};V.closest=function(yb,qb,Ia,Q,za,Ta,xb,Yb){Yb=void 0===Yb?!0:Yb;var Ac=Q[yb],mc=za[yb],qd=Ta[yb];qb=xb[yb];for(var zd,Ee,se,ke,w=0;w<za.length;w++)yb===w||Ac<za[w]||zd&&za[zd.index]>=
za[w]||Yb&&xb[yb]<Ta[w]||Ta[yb]>xb[w]||(zd={index:w,dist:Ac-za[w],refPointsA:Ia[yb],refPointsB:Ia[w]});for(Ac=0;Ac<Q.length;Ac++)yb===Ac||mc>Q[Ac]||Ee&&Q[Ee.index]<=Q[Ac]||Yb&&xb[yb]<Ta[Ac]||Ta[yb]>xb[Ac]||(Ee={index:Ac,dist:Q[Ac]-mc,refPointsA:Ia[yb],refPointsB:Ia[Ac]});for(mc=0;mc<xb.length;mc++)yb===mc||qd<xb[mc]||se&&xb[se.index]>=xb[mc]||Yb&&Q[yb]>za[mc]||za[yb]<Q[mc]||(se={index:mc,dist:qd-xb[mc],refPointsA:Ia[yb],refPointsB:Ia[mc]});for(xb=0;xb<Ta.length;xb++)yb===xb||qb>Ta[xb]||ke&&Ta[ke.index]<=
Ta[xb]||Yb&&Q[yb]>za[xb]||za[yb]<Q[xb]||(ke={index:xb,dist:Ta[xb]-qb,refPointsA:Ia[yb],refPointsB:Ia[xb]});return{l:zd,r:Ee,t:se,b:ke}};V.computeClosestMorphs=function(yb){for(var qb=[],Ia=[],Q=[],za=[],Ta=[],xb=[],Yb=0;Yb<yb.length;Yb++){var Ac=V.computeRefPoints(yb[Yb].bounds());Ta.push(Ac);var mc=Ac.right,qd=Ac.top,zd=Ac.bottom;qb.push(Ac.left);Ia.push(mc);Q.push(qd);za.push(zd)}for(Yb=0;Yb<yb.length;Yb++)xb.push(V.closest(Yb,yb,Ta,qb,Ia,Q,za));return xb};V.fun=wb;V.pt=Ab;V.Color=gc;V.morph=Kb;
V.cachedGuideLines=new WeakMap;V.guideWidth=1;V.guideColor=V.Color.orange.lighter();V.removeSnapToGuidesOf=Nb;V.removeSnapToGuidesOf=Nb;V.showAndSnapToGuides=Fb;V.showAndSnapToGuides=Fb;V.showAndSnapToResizeGuides=sb;V.showAndSnapToResizeGuides=sb;V.edges=[["vertical","top","top"],["vertical","vCenter","top"],["vertical","bottom","top"],["vertical","top","vCenter"],["vertical","vCenter","vCenter"],["vertical","bottom","vCenter"],["vertical","top","bottom"],["vertical","vCenter","bottom"],["vertical",
"bottom","bottom"],["horizontal","left","left"],["horizontal","hCenter","left"],["horizontal","right","left"],["horizontal","left","hCenter"],["horizontal","hCenter","hCenter"],["horizontal","right","hCenter"],["horizontal","left","right"],["horizontal","hCenter","right"],["horizontal","right","right"]];lively.FreezerRuntime.recorderFor("lively.collab/comments/commentMorph.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/commentIndicator.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/commentBrowser.js");
lively.FreezerRuntime.recorderFor("lively.collab/comments/comment.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/badge.js");var ra=lively.FreezerRuntime.recorderFor("lively.collab/index.js");ra.CommentGroupMorph=void 0;ra.CommentGroupMorph=void 0;ra.CommentMorph=void 0;ra.CommentMorph=void 0;ra.CommentIndicator=void 0;ra.CommentIndicator=void 0;ra.CommentBrowser=void 0;ra.CommentBrowser=void 0;ra.Comment=void 0;ra.Comment=void 0;ra.Badge=void 0;ra.Badge=void 0;var ja=lively.FreezerRuntime.recorderFor("lively.halos/markers.js");
ja.show=Ea;ja.showRect=function(yb,qb,Ia){var Q=ja.BoundsMarker.highlightBounds(qb);return Ia?ja.showInLoop(yb,Q,qb):ja.showThenHide(yb,Q)};ja.showInLoop=function(yb,qb,Ia){var Q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(za){switch(za.nextAddress){case 1:return ja.showThenHide(yb,qb,!1),za.yield(ja.promise.delay(300),2);case 2:Q=!1,ja.once(yb,"onMouseDown",function(){return Q=!0}),ja.once(yb,"hideMarkers",function(){return Q=!0});case 3:if(Q){za.jumpTo(4);break}return za.yield(qb.retract(Ia),
3);case 4:qb.fadeOut(2E3),za.jumpToEnd()}})};ja.showThenHide=function(yb,qb,Ia){Ia=void 0===Ia?3:Ia;if(yb){var Q=Array.isArray(qb)?qb:[qb];Q.forEach(function(za){return yb.addMorph(za)});Ia&&setTimeout(function(){return Q.forEach(function(za){return za.fadeOut(2E3)})},1E3*Ia);return qb}};ja.showLine=function(yb,qb,Ia){Ia=void 0===Ia?3E3:Ia;var Q=qb.start;qb=qb.end.subPt(Q);var za=yb.addMorph({position:Q,rotation:qb.theta(),border:{width:1,color:ja.Color.red},width:qb.fastR(),height:0});Ia&&setTimeout(function(){return za.fadeOut()},
Ia);return za};ja.showConnector=ua;ja.obj=Zc;ja.promise=Kc;ja.string=md;ja.pt=Ab;ja.Color=gc;ja.Rectangle=Fc;ja.rect=Bc;ja.morph=Kb;ja.easings=Nc;ja.Path=Uc;ja.Icon=ce;ja.Morph=Zd;ja.MorphicEnv=pe;ja.connect=Mc;ja.once=Kd;ja.disconnect=Jb;ja.show=Ea;ja.show=Ea;(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),Ia=qb.hasOwnProperty("BoundsMarker")&&"function"===typeof qb.BoundsMarker?qb.BoundsMarker:qb.BoundsMarker=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:Symbol.for("lively-instance-initialize"),value:function(){Dc._get(Object.getPrototypeOf(Ia.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{borderWidth:0,fill:ja.Color.transparent,reactsToPointer:!1,hasFixedPosition:!0})}},{key:"isEpiMorph",get:function(){return!0}},{key:"markerLength",value:function(Q){Q=Q.insetBy(-2);Q=Math.min(Q.width,Q.height);return Math.max(4,Math.floor(10>Q/10?Q/
2-5:Q/10))}},{key:"createMarkerEdge",value:function(){return ja.morph({fill:ja.Color.red,reactsToPointer:!1,borderRadius:10})}},{key:"ensureMarkerCorners",value:function(){var Q=this.topLeftH||(this.topLeftH=this.addMorph(this.createMarkerEdge())),za=this.topLeftV||(this.topLeftV=this.addMorph(this.createMarkerEdge())),Ta=this.topRightH||(this.topRightH=this.addMorph(this.createMarkerEdge())),xb=this.topRightV||(this.topRightV=this.addMorph(this.createMarkerEdge())),Yb=this.bottomRightH||(this.bottomRightH=
this.addMorph(this.createMarkerEdge())),Ac=this.bottomRightV||(this.bottomRightV=this.addMorph(this.createMarkerEdge())),mc=this.bottomLeftH||(this.bottomLeftH=this.addMorph(this.createMarkerEdge())),qd=this.bottomLeftV||(this.bottomLeftV=this.addMorph(this.createMarkerEdge()));return[Q,za,Ta,xb,Yb,Ac,mc,qd]}},{key:"alignWithMorph",value:function(Q){return this.alignWithBounds(Q.globalBounds().translatedBy($world.scroll.negated()))}},{key:"alignWithBounds",value:function(Q){this.alignWithRect(Q.insetBy(-20));
return this.alignWithRect(Q,!0)}},{key:"alignWithRect",value:function(Q,za){var Ta=this.ensureMarkerCorners(),xb=this.markerLength(Q),Yb=[Q.topLeft().addXY(0,0).extent(ja.pt(xb,5)),Q.topLeft().addXY(0,0).extent(ja.pt(5,xb)),Q.topRight().addXY(-xb,0).extent(ja.pt(xb,5)),Q.topRight().addXY(-5,0).extent(ja.pt(5,xb)),Q.bottomRight().addXY(-5,-xb).extent(ja.pt(5,xb)),Q.bottomRight().addXY(-xb,-5).extent(ja.pt(xb,5)),Q.bottomLeft().addXY(0,-5).extent(ja.pt(xb,5)),Q.bottomLeft().addXY(0,-xb).extent(ja.pt(5,
xb))];Ta.forEach(function(Ac,mc){return Ac.setBounds(Yb[mc])});za&&(this.adjustOrigin(Q.center()),this.opacity=0,this.scale=1.5,this.animate({opacity:1,scale:1,duration:300}));return this}},{key:"retract",value:function(Q){var za=this,Ta;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xb){if(1==xb.nextAddress)return xb.yield(za.animate({scale:Math.max(30/Q.width,1.05)}),2);Ta=za.center;return xb.yield(za.animate({center:Ta,scale:1,duration:300,easing:ja.easings.inOutExpo}),0)})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"BoundsMarker"}},{key:"highlightMorph",value:function(Q){return(new this).alignWithMorph(Q)}},{key:"highlightBounds",value:function(Q){return(new this).alignWithBounds(Q)}}],qb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:2323,end:6E3})})(ja.Morph);ra=Ka("S",function(yb){var qb=
lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),Ia=qb.hasOwnProperty("StatusMessage")&&"function"===typeof qb.StatusMessage?qb.StatusMessage:qb.StatusMessage=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"relayout",value:function(){this.title=ja.string.truncate(this.message,(this.width/15).toFixed(),"...")}},{key:"isEpiMorph",value:function(){return!0}},{key:"isStatusMessage",value:function(){return!0}},
{key:"setMessage",value:function(Q,za){this.message=Q;this.color=za}},{key:"slideTo",value:function(Q){var za=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ta){if(1==Ta.nextAddress)return za.sliding=za.animate({position:Q,duration:500}),Ta.yield(za.sliding,2);za.sliding=!1;Ta.jumpToEnd()})}},{key:"expand",value:function(){var Q=this,za,Ta,xb,Yb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ac){if(1==Ac.nextAddress)return Q.expandable?Q.sliding?Ac.yield(Q.sliding,2):
Ac.jumpTo(2):Ac.return();za=Q.world();if(!za||Q.isMaximized)return Ac.return();Q.isMaximized=!0;Q.stayOpen=!0;Ta=Q.getSubmorphNamed("message text");Ta.lineWrapping=!1;Object.assign(Ta,{clipMode:"auto",fixedWidth:!0,selectable:!0});Q.expandedContent&&(Ta.value=Q.expandedContent);Ta.fit();xb=Ta.textBounds().extent();Yb=za.visibleBounds();xb.y>Yb.extent().y&&(xb.y=Yb.extent().y-20);xb.x>Yb.extent().x&&(xb.x=Yb.extent().x-20);xb=Q.extent.maxPt(xb);Q.animate({extent:xb,center:Yb.center(),duration:200});
Q.relayout();Q.focus();Ac.jumpToEnd()})}},{key:"fit",value:function(){var Q=this.getSubmorphNamed("message text");Q&&(this.extent=ja.pt(100,35).maxPt(Q.textBounds().extent()),this.relayout())}},{key:"focus",value:function(){var Q=this.getSubmorphNamed("message text");Q&&Q.focus()}},{key:"onMouseUp",value:function(Q){this.expand()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessage"}},{key:"properties",get:function(){return{extent:{defaultValue:ja.pt(200,100)},stayOpen:{defaultValue:!1},
slidable:{defaultValue:!0},isMaximized:{defaultValue:!1},expandable:{initialize:function(){this.expandable=!0}},maxLines:{defaultValue:Infinity},name:{defaultValue:"messageMorph"},master:{initialize:function(){this.master={auto:"styleguide://System/message"}}},message:{after:["submorphs","extent"],set:function(Q){this.setProperty("message",Q);var za=this.getSubmorphNamed("message text");if(za){za.value=Q;var Ta=za.documentEndPosition;Ta.row>this.maxLines&&(za.replace({start:{row:this.maxLines,column:0},
end:Ta},"...\n"),this.expandedContent||(this.expandedContent=Q));Ta=za.documentEndPosition;0!==Ta.column&&za.insertText("\n",Ta)}}},title:{isStyleProp:!0,derived:!0,set:function(Q){this.getSubmorphNamed("message title").value=Q},get:function(){return this.getSubmorphNamed("message title").value}},color:{after:["submorphs"],derived:!0,get:function(){return this.get("message icon").fontColor},set:function(Q){this.get("message icon").fontColor=Q;this.get("message icon")._parametrizedProps&&(this.get("message icon")._parametrizedProps.fontColor=
Q)}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[{name:"message icon",type:"label",value:ja.Icon.textAttribute("check-circle")},{name:"message text",type:"text"},{name:"message title",type:"label"},{name:"close button",type:"button"}];ja.connect(this.getSubmorphNamed("close button"),"fire",this,"remove");ja.connect(this,"extent",this,"relayout")}}}}}],qb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:6044,end:10373})}(ja.Morph));ja.StatusMessage=ra;ja.StatusMessage=ra;ja.StatusMessage=ra;var Ca=Ka("b",function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),Ia=qb.hasOwnProperty("StatusMessageForMorph")&&"function"===typeof qb.StatusMessageForMorph?qb.StatusMessageForMorph:qb.StatusMessageForMorph=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Dc(Ia,yb,[{key:"alignAtBottomOf",value:function(Q){var za=this.world();za&&(this.bringToFront(),this.fit(),this.width=Q.bounds().width,this.relayout(),Q.world()&&(this.position=Q.owner.worldPoint(Q.bounds().bottomLeft())),Q=za.visibleBounds(),Q=this.bounds().top()+this.height-Q.bottom(),0<Q&&this.moveBy(ja.pt(0,-Q)))}},{key:"onMouseUp",value:function(Q){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessageForMorph"}},{key:"properties",get:function(){return{slidable:{defaultValue:!1},
renderOnGPU:{defaultValue:!0},removeOnTargetMorphChange:{defaultValue:!0},targetMorph:{defaultValue:null,get:function(){var Q=this.getProperty("targetMorph");return Q&&$world.getMorphWithId(Q)},set:function(Q){this.setProperty("targetMorph",Q?Q.id:null);this.alignAtBottomOf(Q)}},expandable:{after:["submorphs"],set:function(Q){this.setProperty("expandable",Q);if(Q){var za=this.getSubmorphNamed("expand button")||this.addMorph({name:"expand button",type:"button"});ja.connect(za,"fire",this,"expand")}else this.getSubmorphNamed("expand button")&&
(this.getSubmorphNamed("expand button").remove(),ja.disconnect(za,"fire",this,"expand"))}}}}}],qb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10598,end:12466})}(ja.StatusMessage));ja.StatusMessageForMorph=Ca;ja.StatusMessageForMorph=Ca;ja.StatusMessageForMorph=Ca;ja.showConnector=ua;ja.showConnector=
ua;var va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js");va.Morph=Zd;va.Label=nd;va.HorizontalLayout=Hc;va.Path=Uc;va.Text=wd;va.GridLayout=Qd;va.morph=Kb;va.Icon=ce;va.createMorphSnapshot=Eb;va.Color=gc;va.pt=Ab;va.rect=Bc;va.Rectangle=Fc;va.LinearGradient=ic;va.obj=Zc;va.PropertyPath=jd;va.promise=Kc;va.properties=jc;va.num=kd;va.arr=vb;va.connect=Mc;va.signal=db;va.disconnect=Jb;va.disconnectAll=ec;va.once=Kd;va.showAndSnapToGuides=Fb;va.showAndSnapToResizeGuides=sb;va.removeSnapToGuidesOf=
Nb;va.CommentBrowser=void 0;va.show=Ea;va.haloBlue=va.Color.rgb(23,160,251);va.componentAccent=va.Color.magenta;va.derivedAccent=va.Color.purple;var cb=function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ia=qb.hasOwnProperty("Halo")&&"function"===typeof qb.Halo?qb.Halo:qb.Halo=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"relayout",value:function(){this.alignWithTarget()}},
{key:"keybindings",get:function(){return[{keys:{mac:"Meta-C",win:"Ctrl-C"},command:{command:"clipboard copy",passEvent:!0}}]}},{key:"commands",get:function(){return[{name:"clipboard copy",doc:"copy selected morph(s) to clipboard",scrollCursorIntoView:!1,exec:function(Q){Q.copyHalo().copyToClipBoard()}}]}},{key:"removeIfDetached",value:function(){var Q=this;setTimeout(function(){Q.target.owner||Q.remove()})}},{key:"initLayout",value:function(){var Q=this.layout=new va.GridLayout({autoAssign:!1,fitToCell:!1,
renderViaCSS:!0,columns:[0,{fixed:36,paddingRight:10},2,{fixed:26},4,{fixed:26},6,{fixed:36,paddingLeft:10}],rows:[0,{fixed:36,paddingBottom:10},2,{fixed:26},4,{fixed:26},6,{fixed:26},7,{fixed:36,paddingTop:10}],grid:[["menu",null,"grab",null,"drag",null,"close"],[null,null,null,null,null,null,null],["copy",null,null,null,null,null,"edit"],[null,null,null,null,null,null,null],["component",null,null,null,null,null,"inspect"],[null,null,null,null,null,null,null],["rotate",null,null,null,null,null,"resize"],
[null,"name","name","name","name","name",null]]});Q.col(1).row(7).group.align="topCenter";Q.col(1).row(7).group.resize=!1}},{key:"initButtons",value:function(){this.submorphs=[].concat($jscomp.arrayFromIterable(this.ensureResizeHandles()),$jscomp.arrayFromIterable(this.resizeOnly?[]:[this.closeHalo(),this.dragHalo(),this.grabHalo(),this.menuHalo(),this.inspectHalo(),this.editHalo(),this.copyHalo(),this.componentHalo(),this.rotateHalo(),this.nameHalo(),this.originHalo()]))}},{key:"isEpiMorph",get:function(){return!0}},
{key:"isHaloItem",get:function(){return!0}},{key:"isHalo",get:function(){return!0}},{key:"borderBox",get:function(){return this.getSubmorphNamed("border-box")||this.addMorphBack(va.morph({name:"border-box",halosEnabled:!1,fill:va.Color.transparent,borderColor:this.target.isComponent?va.componentAccent:va.haloBlue,borderWidth:1}))}},{key:"pointerId",get:function(){return this.state?this.state.pointerId:null}},{key:"pointerId",set:function(Q){this.state||(this.state={});this.state.pointerId=Q}},{key:"prepareTarget",
value:function(Q){if(!va.obj.isArray(Q))return Q;if(1>=Q.length)return Q[0];Q=Q[0].world().addMorph(new va.MultiSelectionTarget({selectedMorphs:Q}));Q.alignWithSelection();Q.modifiesSelectedMorphs=!0;return Q}},{key:"refocus",value:function(Q){this.target=Q;this.alignWithTarget()}},{key:"alignWithTarget",value:function(Q){var za=this;if((!Q||["extent","position","scale","rotation"].includes(Q.prop))&&!this.active&&this.target){Q=this.target.world()||$world;var Ta=this.maskBounds,xb=this.target.globalBounds(),
Yb=xb.insetBy(-36).intersection(Ta);Ta=xb.intersection(Ta);this.state.activeButton?(this.buttonControls.forEach(function(Ac){return Ac.visible=!1}),this.ensureResizeHandles().forEach(function(Ac){return Ac.visible=!1}),this.state.activeButton.visible=!0,this.updatePropertyDisplay(this.state.activeButton)):(this.changingName&&this.nameHalo().toggleActive([!1]),this.ensureResizeHandles().forEach(function(Ac){return Ac.visible=!0}),this.buttonControls.filter(function(Ac){return za.activeItems.includes("*")?
!0:za.activeItems.includes(Ac.name)}).forEach(function(Ac){Ac.visible=!0}),this.propertyDisplay.disable());this.setBounds(Yb.translatedBy(Q.scroll.negated()));this.borderBox.setBounds($world.transformRectToMorph(this,Ta));this.nameHalo().alignInHalo();this.ensureResizeHandles().forEach(function(Ac){return Ac.alignInHalo()});this.resizeOnly||this.originHalo().alignInHalo();return this}}},{key:"detachFromTarget",value:function(){var Q=this.target;Q&&(va.disconnect(Q,"onChange",this,"alignWithTarget"),
va.disconnect(Q,"onOwnerChanged",this,"removeIfDetached"),Q instanceof va.MultiSelectionTarget?(Q.modifiesSelectedMorphs=!1,Q.remove()):"function"===typeof Q.detachedHalo&&Q.detachedHalo(this))}},{key:"remove",value:function(){this.detachFromTarget();Dc._get(Object.getPrototypeOf(Ia.prototype),"remove",this).call(this)}},{key:"propertyDisplay",get:function(){return va.HaloPropertyDisplay.for(this)}},{key:"nameHalo",value:function(){return va.NameHaloItem.for(this)}},{key:"closeHalo",value:function(){return va.CloseHaloItem.for(this)}},
{key:"grabHalo",value:function(){return va.GrabHaloItem.for(this)}},{key:"dragHalo",value:function(){return va.DragHaloItem.for(this)}},{key:"menuHalo",value:function(){return va.MenuHaloItem.for(this)}},{key:"inspectHalo",value:function(){return va.InspectHaloItem.for(this)}},{key:"editHalo",value:function(){return va.EditHaloItem.for(this)}},{key:"rotateHalo",value:function(){return va.RotateHaloItem.for(this)}},{key:"copyHalo",value:function(){return va.CopyHaloItem.for(this)}},{key:"originHalo",
value:function(){return va.OriginHaloItem.for(this)}},{key:"componentHalo",value:function(){return va.ComponentHaloItem.for(this)}},{key:"buttonControls",get:function(){return this.submorphs.filter(function(Q){return Q.isHaloItem&&!Q.isResizeHandle})}},{key:"addMorphToSelection",value:function(Q){var za=this,Ta,xb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Yb){if(1==Yb.nextAddress){Ta=za.world();xb=za.target.isMorphSelection?za.target.selectedMorphs:[za.target];if(xb.includes(Q))return Yb.return();
za.remove();return Yb.yield(Ta.showHaloForSelection([].concat($jscomp.arrayFromIterable(xb),[Q]),za.state.pointerId),2)}return Yb.return(Yb.yieldResult)})}},{key:"removeMorphFromSelection",value:function(Q){var za=this,Ta;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xb){if(1==xb.nextAddress){Ta=za.world();za.remove();if(!za.target.isMorphSelection)return xb.jumpTo(0);va.arr.remove(za.target.selectedMorphs,Q);return xb.yield(Ta.showHaloForSelection(za.target.selectedMorphs,za.state.pointerId),
3)}return xb.return(xb.yieldResult)})}},{key:"isAlreadySelected",value:function(Q){return this.target==Q||this.target.isMorphSelection&&this.target.selectsMorph(Q)}},{key:"updateBoundsFor",value:function(Q,za,Ta,xb,Yb){var Ac={topLeft:va.rect(-1,-1,1,1),topCenter:za?va.rect(1,-1,0,1):va.rect(0,-1,0,1),topRight:va.rect(0,-1,1,1),rightCenter:za?va.rect(0,1,1,1):va.rect(0,0,1,0),bottomRight:va.rect(0,0,1,1),bottomCenter:za?va.rect(1,0,0,1):va.rect(0,0,0,1),bottomLeft:va.rect(-1,0,1,1),leftCenter:za?
va.rect(-1,1,1,0):va.rect(-1,0,1,0)}[Q];Yb=Ac.x;var mc=Ac.y,qd=Ac.width;Ac=Ac.height;Ta=za?this.proportionalDelta(Q,Ta,xb):Ta;Q=va.rect(Ta.x*Yb,Ta.y*mc,Ta.x*qd,Ta.y*Ac);this.active=!0;this.target.setBounds(xb.insetByRect(Q));(this.target.isPolygon||this.target.isPath)&&this.target.moveBy(this.target.origin.negated());this.active=!1;this.alignWithTarget();this.world().withTopBarDo(function(zd){if(zd.activeSideBars.includes("Styling Palette"))zd.stylingPalette.onHierarchyChange()})}},{key:"proportionalDelta",
value:function(Q,za,Ta){var xb=Ta.width,Yb=Ta.height;Ta={topLeft:va.pt(-1,-1),topCenter:va.pt(0,-1),topRight:va.pt(1,-1),leftCenter:va.pt(-1,0),rightCenter:va.pt(1,0),bottomLeft:va.pt(-1,1),bottomCenter:va.pt(0,1),bottomRight:va.pt(1,1)};var Ac=xb/Math.max(xb,Yb),mc=Yb/Math.max(Yb,xb);xb={topLeft:va.pt(-Ac,-mc),topCenter:va.pt(1/(2*Yb/xb),-1),topRight:va.pt(Ac,-mc),leftCenter:va.pt(-1,Yb/(2*xb)),rightCenter:va.pt(1,Yb/(3*xb)),bottomLeft:va.pt(-Ac,mc),bottomCenter:va.pt(1/(2*Yb/xb),1),bottomRight:va.pt(Ac,
mc)};Ta=Ta[Q];return xb[Q].scaleBy(Ta.dotProduct(za)/Ta.dotProduct(Ta))}},{key:"ensureResizeHandles",value:function(){return va.ResizeHandle.resizersFor(this)}},{key:"updatePropertyDisplay",value:function(Q){Q=Q.valueForPropertyDisplay();"undefined"!==typeof Q?this.propertyDisplay.displayProperty(Q):this.propertyDisplay.disable()}},{key:"toggleDiagonal",value:function(Q,za){if(!va.rect(0).sides.includes(za)){var Ta=this.getSubmorphNamed("diagonal");if(Q){Q=this.target.globalBounds();var xb=Q.width,
Yb=Q.height;Q=this.localize(va.pt(Q.x,Q.y)).extent(va.pt(xb,Yb)).scaleRectTo(this.innerBounds());xb={topLeft:[va.pt(xb,Yb),va.pt(0,0)],topRight:[va.pt(0,Yb),va.pt(xb,0)],bottomRight:[va.pt(0,0),va.pt(xb,Yb)],bottomLeft:[va.pt(xb,0),va.pt(0,Yb)]};Ta?Ta.setBounds(Q):(Ta=$jscomp.makeIterator(xb[za]),za=Ta.next().value,Ta=Ta.next().value,xb=new va.LinearGradient({stops:[{offset:0,color:va.Color.orange.withA(0)},{offset:.2,color:va.Color.orange},{offset:.8,color:va.Color.orange},{offset:1,color:va.Color.orange.withA(0)}]}),
Ta=this.addMorphBack(new va.Path({opacity:0,name:"diagonal",borderStyle:"dotted",borderWidth:5,bounds:Q,borderColor:xb,vertices:[za,Ta]})),Ta.setBounds(Q),Ta.animate({opacity:1,duration:500}))}else Ta&&Ta.fadeOut(500)}}},{key:"toggleRotationIndicator",value:function(Q,za){var Ta=this.getSubmorphNamed("rotationIndicator");Q&&za?(Q=this.getSubmorphNamed("origin").center,Ta=Ta||this.addMorphBack(new va.Path({name:"rotationIndicator",borderColor:va.haloBlue,borderWidth:1,vertices:[]})),Ta.setBounds(za.bounds().union(this.innerBounds())),
Ta.vertices=[Ta.localizePointFrom(Q,this),Ta.localizePointFrom(za.center,this)]):Ta&&Ta.remove()}},{key:"toggleMorphHighlighter",value:function(Q,za,Ta){Ta=void 0===Ta?!1:Ta;if(za)if(za.onHaloGrabover)za.onHaloGrabover(Q);else Ta=va.MorphHighlighter.for(this,za,Ta),Q&&za&&za!=this.world()?Ta&&Ta.show(za):Ta&&Ta.deactivate()}},{key:"temporaryEditTextMorph",value:function(Q){if(this.target.isText){var za=this.target.readOnly;this.target.readOnly=!1;this.target.focus();this.target.cursorPosition=this.target.textPositionFromPoint(Q.positionIn(this.target));
var Ta=this.world(),xb=this.target,Yb=this.topBar,Ac=function(mc){Yb.stylingPalette&&Yb.stylingPalette.fullContainsWorldPoint(Ta.firstHand.position)?(xb.whenRendered().then(function(){va.once(xb,"onBlur",Ac)}),va.once(xb,"onBlur",Ac)):(Yb.setEditMode("Halo",!0),xb.readOnly=za,xb.collapseSelection(),Yb.showHaloFor(xb))};this.target.whenRendered().then(function(){va.once(xb,"onBlur",Ac)});Yb.setEditMode("Hand",!0);this.remove()}}},{key:"onMouseDown",value:function(Q){var za=this,Ta=Q.state.clickedOnMorph;
if(!Q.isCommandKey()&&Ta==this.borderBox){if(2==Q.state.clickCount&&this.target.isText){this.temporaryEditTextMorph(Q);return}return va.promise.delay(200).then(function(){2!=Q.state.clickCount&&za.remove()})}if(Q.isShiftDown()&&Q.isCommandKey())Ta=this.target.isMorphSelection?this.target.morphBeneath(Q.position):this.morphBeneath(Q.position),this.isAlreadySelected(Ta)?this.removeMorphFromSelection(Ta):this.addMorphToSelection(Ta);else{if(Ta==this.borderBox&&Q.isCommandKey()){var xb=Q.world.morphsContainingPoint(Q.position).filter(function(Yb){return Yb.halosEnabled});
(xb=xb.slice(xb.indexOf(this.target)+1)[0]||xb[0]||Q.world)&&Q.world.showHaloFor(xb,Q.domEvt.pointerId);this.remove()}Ta==this&&Q.isCommandKey()&&(xb=this.morphBeneath(Q.position),Q.world.showHaloFor(xb,Q.domEvt.pointerId));Ta==this&&va.promise.delay(500).then(function(){za.remove()})}}},{key:"onContextMenu",value:function(Q){var za=this;Promise.resolve($world.defaultMenuItems(this.target)).then(function(Ta){return za.target.openMenu(Ta,Q)}).catch(function(Ta){return $world.logError(Ta)})}},{key:"onKeyUp",
value:function(Q){this.changingName||this.buttonControls.map(function(za){return za.onKeyUp(Q)})}},{key:"getMesh",value:function(Q,za){var Ta=Q.x;Q=Q.y;za=void 0===za?va.pt(0,0):za;var xb=this.world().visibleBounds(),Yb=xb.height;xb=xb.width;var Ac={borderStyle:"dotted",borderWidth:2,borderColor:va.Color.orange};Ac=this.get("mesh")||this.addMorph(new va.Morph({name:"mesh",styleClasses:["halo-mesh"],extent:va.pt(xb,Yb),fill:null,submorphs:[new va.Path(Object.assign({name:"vertical"},Ac)),new va.Path(Object.assign({name:"horizontal"},
Ac))]}));Ac.globalPosition=za;Ac.getSubmorphNamed("vertical").vertices=[va.pt(Ta,0).subPt(za),va.pt(Ta,Yb).subPt(za)];Ac.getSubmorphNamed("horizontal").vertices=[va.pt(0,Q).subPt(za),va.pt(xb,Q).subPt(za)];return Ac}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Halo"}},{key:"properties",get:function(){return{fill:{defaultValue:va.Color.transparent},resizeOnly:{defaultValue:!1},pointerId:{},hasFixedPosition:{defaultValue:!0},respondsToVisibleWindow:{defaultValue:!0},acceptsDrops:{defaultValue:!1},
maskBounds:{initialize:function(){this.maskBounds=$world.visibleBounds()},set:function(Q){this.setProperty("maskBounds",Q);this.relayout()}},activeItems:{derived:!0,defaultValue:["*"],set:function(Q){this.setProperty("activeItems",Q);this.buttonControls.forEach(function(za){return za.visible=Q.includes(za.name)})}},submorphs:{after:["target"],initialize:function(){this.initButtons();this.alignWithTarget()}},layout:{after:["submorphs"],initialize:function(){this.initLayout()}},hasTinyTarget:{derived:!0,
get:function(){return 40>this.target.bounds().extent().dist(va.pt(0))}},topBar:{serialize:!1,get:function(){return this.getProperty("topBar")||this.get("lively top bar")}},target:{get:function(){return this.state?this.state.target:null},set:function(Q){this.state||(this.state={});var za=!!this.state.target;this.detachFromTarget();Q=this.prepareTarget(Q);this.state.target=Q;za&&this.alignWithTarget();va.connect(Q,"onChange",this,"alignWithTarget");va.connect(Q,"onOwnerChanged",this,"removeIfDetached")}}}}}],
qb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:975,end:19551})}(va.Morph);cb=va.Halo;var hc=Ka("H",cb);(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ia=qb.hasOwnProperty("HaloPropertyDisplay")&&"function"===typeof qb.HaloPropertyDisplay?qb.HaloPropertyDisplay:
qb.HaloPropertyDisplay=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"isHaloItem",get:function(){return!1}},{key:"halo",get:function(){return this.owner}},{key:"displayedValue",value:function(){return this.textString}},{key:"displayProperty",value:function(Q){var za=this.halo.state.activeButton;Q=String(Q);this.visible=!0;this.textString=Q;this.position=this.constructor.defaultPosition;this.bounds().insetBy(10).intersects(za.bounds())&&
(this.position=va.pt(za.topRight.x+10,this.position.y))}},{key:"disable",value:function(){this.position=this.constructor.defaultPosition;this.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloPropertyDisplay"}},{key:"morphName",get:function(){return"propertyDisplay"}},{key:"defaultPosition",get:function(){return va.pt(25,0)}},{key:"for",value:function(Q){return Q.getSubmorphNamed(this.morphName)||Q.addMorph(new this({name:this.morphName}))}},{key:"properties",get:function(){return{name:{defaultValue:this.name},
fill:{defaultValue:va.Color.black.withA(.7)},borderRadius:{defaultValue:7},padding:{defaultValue:va.Rectangle.inset(5)},visible:{defaultValue:!1},readOnly:{defaultValue:!0},fontSize:{defaultValue:12},fontColor:{defaultValue:va.Color.white},position:{defaultValue:this.defaultPosition}}}}],qb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:19741,end:21079})})(va.Label);(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ia=qb.hasOwnProperty("MultiSelectionTarget")&&"function"===typeof qb.MultiSelectionTarget?qb.MultiSelectionTarget:qb.MultiSelectionTarget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"isHaloItem",get:function(){return!0}},{key:"isMorphSelection",get:function(){return!0}},
{key:"selectsMorph",value:function(Q){return this.selectedMorphs.includes(Q)}},{key:"alignWithSelection",value:function(){var Q=this.selectedMorphs.map(function(za){return za.globalBounds()}).reduce(function(za,Ta){return za.union(Ta)});this.setBounds(Q)}},{key:"onGrab",value:function(Q){this.grabbingHand=Q.hand;this.selectionGrabbed=!0;Q.hand.grab(this.selectedMorphs);va.once(Q.hand,"dropMorphsOn",this,"onGrabEnd");va.connect(Q.hand,"position",this,"alignWithSelection")}},{key:"onGrabEnd",value:function(){this.selectionGrabbed=
!1;va.disconnectAll(this.grabbingHand)}},{key:"updateExtent",value:function(Q){var za=Q.value.subPt(Q.prevValue);this.selectedMorphs.forEach(function(Ta){return Ta.resizeBy(za)})}},{key:"updatePosition",value:function(Q){if(!this.selectionGrabbed){var za=Q.value.subPt(Q.prevValue);this.selectedMorphs.forEach(function(Ta){return Ta.moveBy(za)})}}},{key:"updateRotation",value:function(Q){var za=this,Ta=Q.value-Q.prevValue;this.selectedMorphs.forEach(function(xb){var Yb=xb.origin;xb.adjustOrigin(xb.localize(za.worldPoint(va.pt(0,
0))));xb.rotation+=Ta;xb.adjustOrigin(Yb)})}},{key:"updateScale",value:function(Q){var za=this,Ta=Q.value-Q.prevValue;this.selectedMorphs.forEach(function(xb){var Yb=xb.origin;xb.adjustOrigin(xb.localize(za.worldPoint(va.pt(0,0))));xb.scale+=Ta;xb.adjustOrigin(Yb)})}},{key:"onChange",value:function(Q){Dc._get(Object.getPrototypeOf(Ia.prototype),"onChange",this).call(this,Q);if(this.modifiesSelectedMorphs){switch(Q.prop){case "extent":this.updateExtent(Q);break;case "scale":this.updateScale(Q);break;
case "position":this.updatePosition(Q);break;case "rotation":this.updateRotation(Q)}return Q}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelectionTarget"}},{key:"properties",get:function(){return{visible:{defaultValue:!1},modifiesSelectedMorphs:{defaultValue:!1},selectedMorphs:{defaultValue:[]},halosEnabled:{defaultValue:!1}}}}],qb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21147,end:23418})})(va.Morph);(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ia=qb.hasOwnProperty("HaloItem")&&"function"===typeof qb.HaloItem?qb.HaloItem:qb.HaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},
{key:"menuItems",value:function(){return[]}},{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"stop",value:function(){}},{key:"valueForPropertyDisplay",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloItem"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:15},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:va.Color.gray.withA(.7)},grabbable:{defaultValue:!1},extent:{defaultValue:va.pt(24,24)},halo:{},acceptsDrops:{defaultValue:!1}}}},
{key:"for",value:function(Q){return Q.getSubmorphNamed(this.morphName)||Q.addMorph(new this({halo:Q,name:this.morphName}))}}],qb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:23582,end:24300})})(va.Morph);(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ia=qb.hasOwnProperty("NameHolder")&&
"function"===typeof qb.NameHolder?qb.NameHolder:qb.NameHolder=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"onHoverIn",value:function(Q){this.highlightOnHover&&this.nameHolder.active&&(this.halo.toggleMorphHighlighter(!0,this.target),this.nameHolder.fontColor=va.Color.orange)}},{key:"onHoverOut",value:function(Q){this.highlightOnHover&&(this.halo.toggleMorphHighlighter(!1,this.target),this.nameHolder.fontColor=
va.Color.darkgray)}},{key:"accept",value:function(){this.target.name!==this.nameHolder.textString&&this.updateName(this.nameHolder.textString)}},{key:"onKeyDown",value:function(Q){"Enter"==Q.keyCombo?(this.accept(),this.halo.focus(),Q.stop()):Dc._get(Object.getPrototypeOf(Ia.prototype),"onKeyDown",this).call(this,Q)}},{key:"onMouseUp",value:function(){va.signal(this,"active",[!0,this])}},{key:"onMouseDown",value:function(Q){this.nameHolder.fontColor=va.Color.white;this.halo.toggleMorphHighlighter(!1,
this.target)}},{key:"onKeyUp",value:function(Q){Q=this.nameHolder.textString;var za=this.target.owner;this.validName=!za||!za.getSubmorphNamed(Q)||this.target.name==Q;va.signal(this,"valid",[this.validName,Q])}},{key:"update",value:function(){var Q=this;this.nameHolder.textString!==this.target.name&&(this.nameHolder.textString=this.target.name,this.whenRendered().then(function(){return Q.nameHolder.fit()}))}},{key:"activate",value:function(){this.nameHolder.readOnly=!1;this.nameHolder.active=!0;this.nameHolder.animate({opacity:1})}},
{key:"deactivate",value:function(){this.nameHolder.readOnly=!0;this.nameHolder.active=!1;this.nameHolder.animate({opacity:.3})}},{key:"updateName",value:function(Q){if(!this.forceUniqueName||this.validName)this.target.name=Q,va.signal(this,"active",[!1,this]),va.CommentBrowser.instance&&va.CommentBrowser.updateName(this.target)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHolder"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Click to edit the morph's name"},
draggable:{defaultValue:!1},fill:{defaultValue:va.Color.transparent},forceUniqueName:{defaultValue:!1},halo:{},layout:{after:["nameHolder"],initialize:function(){this.layout=new va.HorizontalLayout({renderViaCSS:!0,resizeContainer:!0,spacing:7})}},nameHolder:{after:["submorphs"],initialize:function(){this.nameHolder=this.addMorph(new va.Text({fill:va.Color.transparent,fontColor:va.Color.white,fontWeight:"bold",active:!0}));va.connect(this.nameHolder,"onBlur",this,"accept")}}}}}],qb,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:24335,end:27086})})(va.Morph);(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ia=qb.hasOwnProperty("NameHaloItem")&&"function"===typeof qb.NameHaloItem?qb.NameHaloItem:qb.NameHaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Dc(Ia,yb,[{key:Symbol.for("lively-instance-initialize"),value:function(Q){Dc._get(Object.getPrototypeOf(Ia.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Q);this.initComponentLink();this.initNameHolders();this.validityIndicator=va.Icon.makeLabel("check",{fontColor:va.Color.green,fontSize:15,padding:va.rect(4,6,4,0)});this.fill=this.halo.target.isComponent?va.componentAccent:va.haloBlue;this.alignInHalo()}},{key:"initComponentLink",value:function(){var Q=this,
za=this.halo.target;if(za&&!za.isMorphSelection&&za.master){var Ta=za.master.determineMaster(za),xb=Ta&&!!za.world().localComponents.includes(Ta),Yb=Ta?za.master.getWorldUrlFor(Ta):"this project";za=this.addMorph(va.Icon.makeLabel(Yb?"external-link-alt":"exclamation-triangle",{nativeCursor:"pointer",fontColor:va.Color.white,padding:va.rect(8,0,-8,0),name:"master link",tooltip:"Located in "+Yb}));Yb&&va.connect(za,"onMouseDown",function(){xb?Q.showLocalMaster(Ta):window.open(Yb)})}}},{key:"showLocalMaster",
value:function(Q){var za;if(za=Q.getWindow())za.activate(),za.minimized&&(za.minimized=!1);Q.show()}},{key:"targets",value:function(){return this.halo.target?this.halo.target.isMorphSelection?this.halo.target.selectedMorphs.map(function(Q){return{target:Q,highlightOnHover:!0}}):[{target:this.halo.target,highlightOnHover:!1}]:[]}},{key:"initNameHolders",value:function(){var Q=this;this.nameHolders=this.targets().map(function(za){za=new va.NameHolder({halo:Q.halo,highlightOnHover:za.highlightOnHover,
target:za.target});va.connect(za,"active",Q,"toggleActive");va.connect(za,"valid",Q,"toggleNameValid");return za});this.submorphs=[].concat($jscomp.arrayFromIterable(this.submorphs),$jscomp.arrayFromIterable(va.arr.interpose(this.nameHolders,{extent:va.pt(1,28),fill:va.Color.black.withA(.4)})))}},{key:"toggleActive",value:function(Q){var za=$jscomp.makeIterator(Q);Q=za.next().value;var Ta=za.next().value;if(this.halo.changingName!==Q){this.halo.changingName=Q;if(za=this.get("master link"))za.visible=
za.isLayoutable=!Q;Q?(this.nameHolders.forEach(function(xb){return xb!=Ta&&xb.deactivate()}),this.borderWidth=3,this.addMorph(this.validityIndicator),this.fill=va.Color.darkGray,setTimeout(function(){return Ta.nameHolder.selectAll()})):(this.fill=va.haloBlue,this.nameHolders.forEach(function(xb){return xb!=Ta&&xb.activate()}),this.borderWidth=0,this.validityIndicator.remove());this.alignInHalo()}}},{key:"toggleNameValid",value:function(Q){var za=$jscomp.makeIterator(Q);Q=za.next().value;za=za.next().value;
(this.validName=Q)?(this.conflictingMorph=null,this.borderColor=va.Color.green,this.validityIndicator.nativeCursor="auto",this.validityIndicator.fontColor=va.Color.green,va.Icon.setIcon(this.validityIndicator,"check")):(this.conflictingMorph=this.get(za),this.borderColor=va.Color.red,this.validityIndicator.fontColor=va.Color.red,this.validityIndicator.nativeCursor="pointer",va.Icon.setIcon(this.validityIndicator,"exclamation-circle"))}},{key:"alignInHalo",value:function(){va.arr.zip(this.targets(),
this.nameHolders).map(function(za){var Ta=$jscomp.makeIterator(za);za=Ta.next().value.target;Ta=Ta.next().value;Ta.target=za;Ta.update()});var Q=this.halo.innerBounds().bottomCenter().addPt(va.pt(0,2));this.topCenter=va.pt(Math.max(Q.x,30),Math.max(Q.y,80))}},{key:"onMouseDown",value:function(Q){var za=this,Ta=this.conflictingMorph;Ta&&(this.halo.toggleMorphHighlighter(!0,Ta),setTimeout(function(){return za.halo.toggleMorphHighlighter(!1,Ta)},1E3))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHaloItem"}},
{key:"morphName",get:function(){return"name"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:4},fill:{defaultValue:va.haloBlue},borderColor:{defaultValue:va.Color.green},layout:{initialize:function(){this.layout=new va.HorizontalLayout({resizeContainer:!0,spacing:0,align:"center",orderByIndex:!0})}}}}}],qb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:27088,end:31588})})(va.HaloItem);(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ia=qb.hasOwnProperty("CloseHaloItem")&&"function"===typeof qb.CloseHaloItem?qb.CloseHaloItem:qb.CloseHaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"update",value:function(){var Q=this.halo,za=Q.target.owner;
za.undoStart("close-halo");Q.target.selectedMorphs?Q.target.selectedMorphs.forEach(function(Ta){return Ta.abandon()}):Q.target.abandon();za.undoStop("close-halo");Q.remove()}},{key:"onMouseDown",value:function(Q){this.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CloseHaloItem"}},{key:"morphName",get:function(){return"close"}},{key:"properties",get:function(){return{targetIsComponent:{derived:!0,get:function(){return this.halo.target.isComponent}},styleClasses:{after:["halo"],
initialize:function(){this.styleClasses=["fas",this.targetIsComponent?"fa-eye-slash":"fa-trash"]}},draggable:{defaultValue:!1},tooltip:{after:["halo"],initialize:function(){this.tooltip=this.targetIsComponent?"Hide this component":"Remove this morph from the world"}}}}}],qb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:31590,end:32600})})(va.HaloItem);(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ia=qb.hasOwnProperty("GrabHaloItem")&&"function"===typeof qb.GrabHaloItem?qb.GrabHaloItem:qb.GrabHaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"adjustTarget",value:function(Q,za){va.PropertyPath("owner.layout.autoResize").get(Q)&&!Q.globalBounds().insetBy(10).containsPoint(za)&&
(Q=Q.owner);return Q}},{key:"valueForPropertyDisplay",value:function(){var Q=this.hand,za=this.halo,Ta=this.prevDropTarget,xb=Q.world(),Yb=Q.findDropTarget(Q.globalPosition,[za.target],function(Ac){return!Ac.isHaloItem&&!Ac.ownerChain().some(function(mc){return mc.isHaloItem||!mc.visible||0==mc.opacity})});if(Yb)return Yb=this.adjustTarget(Yb,Q.globalPosition),za.toggleMorphHighlighter(Yb&&Yb!=xb,Yb,!0),Ta&&Ta!=Yb&&za.toggleMorphHighlighter(!1,Ta),(this.prevDropTarget=Yb)&&Yb.name}},{key:"init",value:function(Q){var za=
this.halo,Ta=za.target.undoStart("grab-halo");Ta&&Ta.addTarget(za.target.owner);this.hand=Q;za.target.onGrab({halo:za,hand:Q,isShiftDown:function(){return!1}});za.state.activeButton=this;this.opacity=.3;var xb=va.connect(Q,"update",this,"update");va.once(za.target,"remove",function(){return xb.disconnect()})}},{key:"stop",value:function(Q){var za=this.halo,Ta=this.prevDropTarget,xb=za.target.undoInProgress,Yb=Q.hand.findDropTarget(Q.hand.globalPosition,[za.target],function(Ac){return!Ac.isHaloItem&&
!Ac.ownerChain().some(function(mc){return mc.isHaloItem})});Yb=this.adjustTarget(Yb,Q.hand.globalPosition);va.disconnect(Q.hand,"update",this,"update");va.MorphHighlighter.interceptDrop(za,Yb,za.target);xb.addTarget(Yb);Yb.onDrop(Q);za.state.activeButton=null;za.alignWithTarget();za.toggleMorphHighlighter(!1,Ta);va.MorphHighlighter.removeHighlighters(za);za.target.undoStop("grab-halo");this.opacity=1}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"onDragStart",value:function(Q){this.init(Q.hand)}},
{key:"onDragEnd",value:function(Q){this.stop(Q)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GrabHaloItem"}},{key:"morphName",get:function(){return"grab"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["far","fa-hand-rock"]},tooltip:{defaultValue:"Grab the morph"},draggable:{defaultValue:!0}}}}],qb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:32664,end:35192})})(va.HaloItem);(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ia=qb.hasOwnProperty("DragHaloItem")&&"function"===typeof qb.DragHaloItem?qb.DragHaloItem:qb.DragHaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"valueForPropertyDisplay",value:function(){return this.halo.target.position}},
{key:"updateAlignmentGuide",value:function(Q){var za=this.halo.getSubmorphNamed("mesh");if(Q)return za=this.halo.getMesh(this.halo.target.worldPoint(va.pt(0,0))),this.focus(),za;za&&za.remove()}},{key:"init",value:function(){var Q=this.halo.target;Q.undoStart("drag-halo");this.halo.state.activeButton=this;this.actualPos=Q.position;this.targetTransform=Q.owner.getGlobalTransform().inverse()}},{key:"stop",value:function(){this.halo.target.undoStop("drag-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget();
this.updateAlignmentGuide(!1);va.removeSnapToGuidesOf(this.halo.target)}},{key:"update",value:function(Q,za,Ta){za=void 0===za?!1:za;Ta=void 0===Ta?!1:Ta;this.actualPos=Q=this.actualPos.addPt(this.targetTransform.transformDirection(Q));za&&(Q=Q.griddedBy(va.pt(10,10)));this.halo.target.position=Q;this.updateAlignmentGuide(za);this.world().withTopBarDo(function(xb){if(xb.activeSideBars.includes("Styling Palette"))xb.stylingPalette.onHierarchyChange()});za||va.showAndSnapToGuides(this.halo.target,!0,
Ta,5,500)}},{key:"onDragStart",value:function(Q){this.init()}},{key:"onDrag",value:function(Q){this.update(Q.state.dragDelta,Q.isAltDown(),Q.isCtrlDown())}},{key:"onDragEnd",value:function(Q){this.stop()}},{key:"onKeyUp",value:function(Q){this.updateAlignmentGuide(!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DragHaloItem"}},{key:"morphName",get:function(){return"drag"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},styleClasses:{defaultValue:["fas","fa-arrows-alt"]},
tooltip:{defaultValue:"Change the morph's position. Press (alt) while dragging to align the morph's position along a grid."}}}}],qb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:35194,end:37192})})(va.HaloItem);(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
Ia=qb.hasOwnProperty("InspectHaloItem")&&"function"===typeof qb.InspectHaloItem?qb.InspectHaloItem:qb.InspectHaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"onMouseDown",value:function(Q){var za=this;(function(){var Ta,xb,Yb,Ac;return $jscomp.asyncExecutePromiseGeneratorProgram(function(mc){if(1==mc.nextAddress)return mc.yield(System.import("lively.ide/js/inspector.js"),2);Ta=mc.yieldResult;
xb=Ta.default;(Yb=za.world().getSubmorphsByStyleClassName("Inspector").find(function(qd){return qd.targetObject==za.halo.target}))&&(Ac=Yb.getWindow())?(Ac.minimized=!1,Ac.activate(),Ac.animate({center:za.world().visibleBounds().center(),duration:200})):xb.openInWindow({targetObject:za.halo.target});za.halo.remove();mc.jumpToEnd()})})()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InspectHaloItem"}},{key:"morphName",get:function(){return"inspect"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Inspect the morph's local state"},
draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-cogs"]}}}}],qb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:37194,end:38111})})(va.HaloItem);(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ia=qb.hasOwnProperty("EditHaloItem")&&"function"===
typeof qb.EditHaloItem?qb.EditHaloItem:qb.EditHaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"onMouseDown",value:function(Q){var za=this;(Q=this.world().getSubmorphsByStyleClassName("ObjectEditor").find(function(Ta){return Ta.target==za.halo.target}))?(Q=Q.getWindow(),Q.bringToFront(),Q.minimized=!1,Q.animate({center:this.world().visibleBounds().center(),duration:200})):$world.execCommand("open object editor",
{target:this.halo.target});this.halo.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditHaloItem"}},{key:"morphName",get:function(){return"edit"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Edit the morph's definition"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-wrench"]}}}}],qb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:38113,end:38893})})(va.HaloItem);(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ia=qb.hasOwnProperty("RotateHaloItem")&&"function"===typeof qb.RotateHaloItem?qb.RotateHaloItem:qb.RotateHaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:Symbol.for("lively-instance-initialize"),value:function(Q){Dc._get(Object.getPrototypeOf(Ia.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,Q);this.adaptAppearance(!1)}},{key:"angle",get:function(){return this.getProperty("angle")||0}},{key:"angle",set:function(Q){this.setProperty("angle",Q)}},{key:"scaleGauge",get:function(){return this.getProperty("scaleGauge")||null}},{key:"scaleGauge",set:function(Q){this.setProperty("scaleGauge",Q)}},{key:"initRotation",get:function(){return this.getProperty("initRotation")||0}},{key:"initRotation",set:function(Q){this.setProperty("initRotation",
Q)}},{key:"valueForPropertyDisplay",value:function(){var Q=this.halo.target;return this.scaleGauge?Q.scale.toFixed(4).toString():va.num.toDegrees(Q.rotation).toFixed(1)+"\u00b0"}},{key:"init",value:function(Q){this.detachFromLayout();this.halo.target.undoStart("rotate-halo");this.halo.state.activeButton=this;this.angle=Q;this.initRotation=this.halo.target.rotation;this.halo.toggleRotationIndicator(!0,this)}},{key:"initScale",value:function(Q){this.detachFromLayout();this.halo.state.activeButton=this;
this.scaleGauge=Q.scaleBy(1/this.halo.target.scale);this.halo.toggleRotationIndicator(!0,this)}},{key:"update",value:function(Q){this.scaleGauge=null;Q=this.initRotation+(Q-this.angle);Q=va.num.toRadians(va.num.detent(va.num.toDegrees(Q),10,45));this.halo.target.rotation=Q;this.halo.toggleRotationIndicator(!0,this)}},{key:"updateScale",value:function(Q){var za=this.scaleGauge,Ta=this.halo;za||(za=this.scaleGauge=Q.scaleBy(1/Ta.target.scale));this.angle=Q.theta();this.initRotation=Ta.target.rotation;
Ta.target.scale=va.num.detent(Q.dist(va.pt(0,0))/za.dist(va.pt(0,0)),.1,.5);Ta.toggleRotationIndicator(!0,this)}},{key:"stop",value:function(){this.attachToLayout();this.scaleGauge=null;this.halo.state.activeButton=null;this.halo.alignWithTarget();this.halo.toggleRotationIndicator(!1,this);this.halo.target.undoStop("rotate-halo");this.halo.ensureResizeHandles()}},{key:"adaptAppearance",value:function(Q){this.styleClasses=["fas",Q?"fa-search-plus":"fa-redo"];this.tooltip=Q?"Scale morph":"Rotate morph"}},
{key:"detachFromLayout",value:function(){}},{key:"attachToLayout",value:function(){}},{key:"onDragStart",value:function(Q){this.adaptAppearance(Q.isShiftDown());Q.isShiftDown()?this.initScale(Q.position.subPt(this.halo.target.globalPosition)):this.init(Q.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDrag",value:function(Q){this.globalPosition=Q.position.addPt(va.pt(-10,-10));this.adaptAppearance(Q.isShiftDown());Q.isShiftDown()?this.updateScale(Q.position.subPt(this.halo.target.globalPosition)):
this.update(Q.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDragEnd",value:function(Q){this.adaptAppearance(Q.isShiftDown());this.stop()}},{key:"onKeyDown",value:function(Q){this.adaptAppearance(Q.isShiftDown())}},{key:"onKeyUp",value:function(Q){this.adaptAppearance(Q.isShiftDown())}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RotateHaloItem"}},{key:"morphName",get:function(){return"rotate"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0}}}}],
qb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:38895,end:42263})})(va.HaloItem);va.nameNumberRe=/(.+)([0-9]+)$/;(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ia=qb.hasOwnProperty("ComponentHaloItem")&&"function"===typeof qb.ComponentHaloItem?qb.ComponentHaloItem:
qb.ComponentHaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"updateComponentIndicator",value:function(){var Q=this.world(),za=this.halo.target;this.halo.remove();Q.showHaloFor(za)}},{key:"checkForDuplicateNamesInHierarchy",value:function(){var Q=this,za,Ta,xb,Yb,Ac,mc,qd,zd,Ee,se,ke,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(we){switch(we.nextAddress){case 1:za=Q.halo.target;
Ta=Q.world();xb=[];za.withAllSubmorphsDoExcluding(function(ue){ue!=za&&xb.push(ue)},function(ue){return ue.master&&ue!=za});Yb=va.arr.groupBy(xb,function(ue){return ue.name});Ac={fontWeight:"normal",fontSize:16};if(!Object.values(Yb).find(function(ue){return 1<ue.length})){we.jumpTo(2);break}mc=va.arr.sum(Object.values(Yb).filter(function(ue){return 1<ue.length}).map(function(ue){return ue.length}));return we.yield(Ta.confirm(["Ambigous Names in Submorph Hierarchy  ",{}].concat($jscomp.arrayFromIterable(va.Icon.textAttribute("exclamation-triangle",
{fontColor:va.Color.rgb(230,126,34),fontSize:30,lineHeight:"40px"})),["\nThe morph you are about to turn into a component has "+mc+" morphs within its submorph hierarchy, that have ambigous names. This can lead to incorrect applications of style properties when you create derived instances from this component.\n\n",Object.assign({},Ac,{textAlign:"left"}),"Usually ambigous names are caused if your component is in some kind of intermittent state, where it already displays an example state or code has run that automatically created interface elements. This can be fixed by resetting the submorphs of this morph, usually by implementing a ",
Object.assign({},Ac,{textAlign:"left",fontStyle:"italic"}),"reset()",Object.assign({},Ac,{fontStyle:"italic",fontFamily:"IBM Plex Mono"}),' routine you can invoke to put the morph into some kind of "neutral" state. Alternatively you can go ahead and rename the duplicate morphs to have proper unique names. If you have a hard time giving the conflicting morphs appropriate names, this can be an indication that the component you are declaring is too large, and you need to decompose your component into subcomponents further.',
Object.assign({},Ac,{textAlign:"left",fontStyle:"italic"})]),{width:600,confirmLabel:"PROCEED TO RENAME",rejectLabel:"CANCEL",align:"left"}),3);case 3:if(qd=we.yieldResult,!qd)return we.return();case 2:Ee=we.forIn(Yb);case 4:if(null==(zd=Ee.getNext())){we.jumpTo(6);break}if(2>Yb[zd].length){we.jumpTo(4);break}se=Yb[zd];case 7:if(!(1<se.length)){we.jumpTo(4);break}ke=se[0];va.show(ke,!0);return we.yield(Ta.prompt(["Name Collision\n",{},"The name of\n",Ac,ke.toString(),Object.assign({},Ac,{fontStyle:"italic",
fontWeight:"bold"}),"\nis not unique within the submorph hierachy of\n",Object.assign({},Ac),za.name,Object.assign({},Ac,{fontStyle:"italic",fontWeight:"bold"}),"\nThere "+(2<se.length?"are "+(se.length-1)+" other morphs":"is one other morph")+" with the exact same name located in this component.",Ac," Duplicate names can cause errors when applying styles to derived morphs of this master component, so it is essential that there is no name ambiguity. Please enter a new name for this or the other conflicting morphs:",
Ac],{input:ke.name,lineWrapping:!0,width:500,fontSize:12,rejectLabel:"IGNORE",confirmLabel:"RENAME",errorMessage:"Provided name is not unique",validate:function(ue){return!Object.keys(Yb).includes(ue)}}),9);case 9:w=we.yieldResult;va.signal(Ta,"hideMarkers");w&&(ke.name=w);if(w in Yb){we.jumpTo(7);break}else if(!w){se=va.arr.rotate(se);we.jumpTo(7);break}va.arr.remove(se,ke);we.jumpTo(7);break;case 6:return we.return(!0)}})}},{key:"onMouseDown",value:function(){var Q=this,za,Ta,xb,Yb,Ac,mc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qd){switch(qd.nextAddress){case 1:za=
Q.halo.target;Ta=!za.isComponent;xb=$world.getAllNamed(za.name).length;if(!(Ta&&1<xb)){qd.jumpTo(2);break}return qd.yield($world.prompt(["Name Conflict\n",{},"The morph's name you are about to turn into a component is already used by "+(xb-1)+" other morph"+(2<xb?"s":"")+". Please enter a ",{fontWeight:"normal"},"unique identifier",{fontStyle:"italic"}," for this component within this project.",{fontWeight:"normal",fontSize:16}],{input:za.name,lineWrapping:!0,width:400,errorMessage:"Identifier not unique",
validate:function(zd){return 0==$world.getAllNamed(zd).length}}),3);case 3:Yb=qd.yieldResult;if(!Yb)return qd.return();za.name=Yb;case 2:Ac=za;if(!(mc=Ta)){qd.jumpTo(4);break}return qd.yield(Q.checkForDuplicateNamesInHierarchy(),5);case 5:mc=qd.yieldResult;case 4:Ac.isComponent=mc,Ta?(va.arr.pushIfNotIncluded(za.world().localComponents,za),va.arr.pushIfNotIncluded(za.world().hiddenComponents,za.name)):va.arr.remove(za.world().localComponents,za),Q.world()?Q.updateComponentIndicator():za.world().showHaloFor(za),
qd.jumpToEnd()}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ComponentHaloItem"}},{key:"morphName",get:function(){return"component"}},{key:"properties",get:function(){return{tooltip:{get:function(){return this.halo.target.isComponent?"Retract Component":"Turn into Component"}},styleClasses:{initialize:function(){this.styleClasses=this.halo.target.isComponent?["fas","fa-eraser"]:["fas","fa-cube"]}}}}}],qb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:42304,end:48458})})(va.HaloItem);(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ia=qb.hasOwnProperty("CopyHaloItem")&&"function"===typeof qb.CopyHaloItem?qb.CopyHaloItem:qb.CopyHaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,
yb,[{key:"init",value:function(Q){function za(zd,Ee){return Ee.match(va.nameNumberRe)?Ee.replace(va.nameNumberRe,function(se,ke,w){w||(w="0");for(se=Number(w);zd.get(ke+ ++se););return ke+se}):Ee+"1"}var Ta=this.halo,xb=Ta.target,Yb=Ta.world(),Ac=xb instanceof va.MultiSelectionTarget;Ta.remove();va.connect(Q,"update",this,"update");if(Ac){var mc=va.arr.compact(xb.selectedMorphs.map(function(zd){if(zd.canBeCopied())return zd=zd.copy(!0),Yb.addMorph(zd),zd}));Ac=mc.map(function(zd){zd.name=za(xb,zd.name);
return zd.position});mc[0].undoStart("copy-halo");Yb.addMorph(Ta);Ta.refocus(mc);Q.grab(Ta.target);Ta.target.onGrab({halo:Ta,hand:Q,isShiftDown:function(){return!1}});Ac.forEach(function(zd,Ee){return mc[Ee].globalPosition=zd});Ta.alignWithTarget()}else{Ac=xb.globalPosition;var qd=xb.copy(!0);xb.isComponent&&(qd.isComponent=!1,qd.withAllSubmorphsDoExcluding(function(zd){zd!=qd&&zd.master||delete zd._parametrizedProps},function(zd){return zd.master&&zd!=qd}),qd.master=xb);qd.name=za(xb,xb.name);Yb.addMorph(qd);
qd.globalPosition=Ac;qd.undoStart("copy-halo");Q.grab(qd);Yb.addMorph(Ta);Ta.visible=!1}}},{key:"stop",value:function(Q){var za=this.halo,Ta=$jscomp.makeIterator(Q.grabbedMorphs).next().value,xb=Q.findDropTarget(Q.globalPosition,[za.target],function(Ac){return!Ac.isHaloItem&&!Ac.ownerChain().some(function(mc){return mc.isHaloItem})}),Yb=za.target.undoInProgress;va.disconnect(Q,"update",this,"update");Yb.addTarget(xb);Q.dropMorphsOn(xb);za.target.undoStop("copy-halo");za.remove();Q.world().showHaloFor(Ta)}},
{key:"onDragStart",value:function(Q){this.init(Q.hand)}},{key:"onDragEnd",value:function(Q){this.stop(Q.hand)}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"copyToClipBoard",value:function(){var Q=this,za,Ta,xb,Yb,Ac,mc,qd,zd,Ee,se,ke,w,we,ue,Od,He;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Te){switch(Te.nextAddress){case 1:za=Q;Ta=za.halo;if(Ta.nameHalo().nameHolders.find(function(Ue){return Ue.nameHolder===$world.focusedMorph}))return Te.return();xb=Ta.target;
Yb=Ta.world();Ac=xb instanceof va.MultiSelectionTarget;mc=xb.globalBounds().topLeft();qd=Ac?xb.selectedMorphs:[xb];return Te.yield(Promise.all(qd.filter(function(Ue){return!Ue.isCommentIndicator}).map(function(Ue){var ff;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gf){return 1==gf.nextAddress?(ff=Ue.copy(!0),gf.yield(Promise.all(ff.withAllSubmorphsDo(function(Wb){if(Wb.master)return Wb.master.applyIfNeeded(),Wb.master.whenApplied()})),2)):gf.return(ff)})})),2);case 2:zd=Te.yieldResult,
Ee=[],se='<!DOCTYPE html>\n          <html lang="en">\n          <head>\n            <meta charset="utf-8">\n            '+document.querySelector("#lively-morphic-css").outerHTML+"\n          </head>\n          <body>",Ta.remove(),Te.setCatchFinallyBlocks(3),ke=$jscomp.makeIterator(zd),w=ke.next();case 5:if(w.done)return se+="</body></html>",Od=JSON.stringify(Ee),Te.yield(Q.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/html",data:se},{type:"application/morphic",data:Od}]),9);we=w.value;return Te.yield(va.createMorphSnapshot(we,
{addPreview:!1,testLoad:!1}),8);case 8:ue=Te.yieldResult;ue.copyMeta={offset:we.worldPoint(va.pt(0,0)).subPt(mc)};Ee.push(ue);se+=we.renderPreview();w=ke.next();Te.jumpTo(5);break;case 9:Te.leaveTryBlock(4);break;case 3:return He=Te.enterCatchBlock(),Yb.logError(He),Te.return();case 4:Yb.addMorph(Ta),Ta.refocus(qd),Ta.setStatusMessage("copied"),Te.jumpToEnd()}})}},{key:"onMouseUp",value:function(Q){var za=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ta){Q.stop();return Ta.yield(za.copyToClipBoard(),
0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CopyHaloItem"}},{key:"morphName",get:function(){return"copy"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},tooltip:{defaultValue:"Copy morph"},styleClasses:{defaultValue:["far","fa-clone"]}}}}],qb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:48460,end:53088})})(va.HaloItem);(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ia=qb.hasOwnProperty("OriginHaloItem")&&"function"===typeof qb.OriginHaloItem?qb.OriginHaloItem:qb.OriginHaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"fill",get:function(){return va.Color.white.interpolate(.2,this.borderColorTop)}},{key:"extent",get:function(){return va.pt(15,
15)}},{key:"tooltip",get:function(){return"Change the morph's origin"}},{key:"computePositionAtTarget",value:function(){return this.halo.localize(this.halo.target.globalPosition)}},{key:"alignInHalo",value:function(){this.visible=!this.halo.hasTinyTarget;this.center=this.computePositionAtTarget()}},{key:"valueForPropertyDisplay",value:function(){return this.halo.target.origin}},{key:"init",value:function(){this.halo.target.undoStart("origin-halo");this.halo.state.activeButton=this}},{key:"stop",value:function(){this.halo.target.undoStop("origin-halo");
this.halo.state.activeButton=null;this.halo.alignWithTarget()}},{key:"update",value:function(Q){var za=this.halo,Ta=za.target.origin,xb=za.target.worldPoint(Ta);Q=za.target.localize(xb.addPt(Q)).subPt(za.target.scroll).subPt(Ta);za.target.adjustOrigin(za.target.origin.addPt(Q))}},{key:"onDragStart",value:function(Q){this.init()}},{key:"onDragEnd",value:function(Q){this.stop()}},{key:"onDrag",value:function(Q){this.update(Q.state.dragDelta)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OriginHaloItem"}},
{key:"morphName",get:function(){return"origin"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:3},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0},borderColor:{after:["halo"],initialize:function(){this.borderColor=this.halo.target.isComponent?va.componentAccent:va.haloBlue}}}}}],qb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:53090,end:54751})})(va.HaloItem);(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ia=qb.hasOwnProperty("ResizeHandle")&&"function"===typeof qb.ResizeHandle?qb.ResizeHandle:qb.ResizeHandle=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"valueForPropertyDisplay",value:function(){var Q=this.halo.target.extent,
za=Q.y;return Q.x.toFixed(1)+"x"+za.toFixed(1)}},{key:"positionInHalo",value:function(){var Q=this.halo.borderBox.bounds();this.halo.hasTinyTarget&&(va.Rectangle.prototype.sides.includes(this.location)&&(this.visible=!1),Q=Q.insetBy(-4));return Q.partNamed(this.location)}},{key:"alignInHalo",value:function(){this.center=this.positionInHalo();return this}},{key:"onKeyUp",value:function(Q){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(Q.isShiftDown(),this.corner)}},{key:"onKeyDown",value:function(Q){this.halo.state.activeButton==
this&&this.halo.toggleDiagonal(Q.isShiftDown(),this.corner)}},{key:"onDragStart",value:function(Q){this.init(Q.position,Q.isShiftDown())}},{key:"onDragEnd",value:function(Q){this.stop(Q.isShiftDown())}},{key:"onDrag",value:function(Q){this.update(Q.position,Q.isShiftDown(),Q.isAltDown(),Q.isCtrlDown());this.focus()}},{key:"init",value:function(Q,za){za=void 0===za?!1:za;var Ta=this.halo.target,xb=Ta.origin,Yb=Ta.position;Ta=Ta.extent;this.startPos=Q;this.startBounds=Yb.subPt(xb).extent(Ta);this.startOrigin=
this.halo.target.origin;this.halo.state.activeButton=this;this.tfm=this.halo.target.getGlobalTransform().inverse();Q=this.halo.target.getGlobalTransform().getRotation();this.offsetRotation=va.num.toRadians(Q%45);this.halo.toggleDiagonal(za,this.corner)}},{key:"update",value:function(Q,za,Ta,xb){za=void 0===za?!1:za;Ta=void 0===Ta?!1:Ta;xb=void 0===xb?!1:xb;var Yb=this.corner,Ac=this.tfm;Q=this.startPos.subPt(Q);Ac=Ac.transformDirection(va.pt(Q.x,Q.y));Ta&&(Ac=Ac.griddedBy(va.pt(10,10)));this.halo.updateBoundsFor(Yb,
za,Ac,this.startBounds,this.startOrigin);this.halo.toggleDiagonal(za,Yb);this.updateAlignmentGuide(Ta);za=[];Yb=Yb.toLowerCase();Yb.includes("left")&&za.push("left");Yb.includes("top")&&za.push("top");Yb.includes("bottom")&&za.push("bottom");Yb.includes("right")&&za.push("right");va.showAndSnapToResizeGuides(this.halo.target,za,!0,xb,5,200)}},{key:"stop",value:function(Q){Q=this.halo;Q.state.activeButton=null;Q.alignWithTarget();Q.toggleDiagonal(!1);this.updateAlignmentGuide(!1);va.removeSnapToGuidesOf(Q.target)}},
{key:"updateAlignmentGuide",value:function(Q){var za=this.halo.getSubmorphNamed("mesh");if(Q)return Q=this.halo.target.extent,Q=va.pt(Q.x%10,Q.y%10),za=this.halo.getMesh(this.globalPosition.addPt(this.extent.scaleBy(.5)),Q),this.focus(),za;za&&za.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ResizeHandle"}},{key:"properties",get:function(){return{corner:{},location:{},draggable:{defaultValue:!0},isResizeHandle:{readOnly:!0,get:function(){return!0}}}}},{key:"getResizeParts",
value:function(Q){0<Q&&(Q-=360);Q=-8-(Q/45).toFixed();0==Q&&(Q=8);return va.arr.zip(va.arr.rotate([["topLeft",function(za){return za.negated()}],["topCenter",function(za){return za.withX(0).negated()}],["topRight",function(za){return za.withX(0).negated()}],["rightCenter",function(za){return va.pt(0,0)}],["bottomRight",function(za){return va.pt(0,0)}],["bottomCenter",function(za){return va.pt(0,0)}],["bottomLeft",function(za){return za.withY(0).negated()}],["leftCenter",function(za){return za.withY(0).negated()}]],
Q),[["nwse-resize","topLeft"],["ns-resize","topCenter"],["nesw-resize","topRight"],["ew-resize","rightCenter"],["nwse-resize","bottomRight"],["ns-resize","bottomCenter"],["nesw-resize","bottomLeft"],["ew-resize","leftCenter"]])}},{key:"resizersFor",value:function(Q){var za=this;if(!Q.target)return[];var Ta=Q.target.getGlobalTransform().getRotation();return va.arr.compact(this.getResizeParts(Ta).map(function(xb){var Yb=$jscomp.makeIterator(xb),Ac=$jscomp.makeIterator(Yb.next().value);xb=Ac.next().value;
Ac.next();Ac.next();Ac=$jscomp.makeIterator(Yb.next().value);Yb=Ac.next().value;Ac=Ac.next().value;return za.for(Q,xb,Ac,Yb)})).map(function(xb){return xb.alignInHalo()})}},{key:"for",value:function(Q,za,Ta,xb){var Yb="Resize "+za;Q=Q.getSubmorphNamed(Yb)||new this({name:Yb,halo:Q,corner:za,tooltip:"Resize "+za,extent:va.pt(10,10),borderWidth:1,borderRadius:0,borderColor:Q.target.isComponent?va.componentAccent:va.haloBlue,fill:va.Color.white});return Object.assign(Q,{nativeCursor:xb,location:Ta})}}],
qb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:54810,end:60003})})(va.HaloItem);(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ia=qb.hasOwnProperty("MenuHaloItem")&&"function"===typeof qb.MenuHaloItem?qb.MenuHaloItem:qb.MenuHaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"onMouseDown",value:function(Q){var za=this,Ta,xb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Yb){if(1==Yb.nextAddress)return Ta=za.halo.target,za.halo.remove(),Yb.yield(Ta.menuItems(Q),2);xb=Yb.yieldResult;Ta.world().openMenu(xb).hasFixedPosition=za.halo.hasFixedPosition;Yb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuHaloItem"}},{key:"morphName",get:function(){return"menu"}},
{key:"properties",get:function(){return{draggable:{defaultValue:!1},tooltip:{defaultValue:"Opens the morph menu"},styleClasses:{defaultValue:["fas","fa-bars"]}}}}],qb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:60005,end:60530})})(va.HaloItem);var gb=Ka("M",function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
Ia=qb.hasOwnProperty("MorphHighlighter")&&"function"===typeof qb.MorphHighlighter?qb.MorphHighlighter:qb.MorphHighlighter=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"alignWithHalo",value:function(){this.target&&(this.position=this.halo.localize(this.target.globalBounds().topLeft()),this.halo.isWorld&&(this.position=this.position.subPt(this.halo.scroll)),this.extent=this.target.globalBounds().extent(),
this.get("name tag").value=this.target.name,this.get("name tag").topCenter=this.innerBounds().insetBy(-10).bottomCenter())}},{key:"show",value:function(){if(this.target&&this.target.layout&&this.showLayout&&(this.layoutHalo=this.layoutHalo||this.world().showLayoutHaloFor(this.target,this.pointerId))&&this.layoutHalo.previewDrop){this.visible=!1;this.alignWithHalo();this.halo.get("grab").hand.grabbedMorphs&&this.layoutHalo.previewDrop(this.halo.get("grab").hand.grabbedMorphs);return}this.visible=!0;
this.alignWithHalo()}},{key:"handleDrop",value:function(Q){this.layoutHalo&&this.layoutHalo.handleDrop(Q)}},{key:"deactivate",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null);this.visible=!1;this.alignWithHalo();this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphHighlighter"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},name:{defaultValue:"morphHighlighter"},styleClasses:{defaultValue:["inactive"]},reactsToPointer:{defaultValue:!1},
hasFixedPosition:{defaultValue:!0},fill:{defaultValue:va.Color.orange.withA(.3)},borderWidth:{defaultValue:2},borderColor:{defaultValue:va.Color.orange},halo:{},epiMorph:{defaultValue:!0},isHighlighter:{readOnly:!0,defaultValue:!0},acceptsDrops:{get:function(){return!!this.layoutHalo}},highlightedSides:{defaultValue:[],set:function(Q){var za=this;this.setProperty("highlightedSides",Q);this.submorphs=Q.map(function(Ta){return{type:"ellipse",isHaloItem:!0,fill:va.Color.orange,center:za.innerBounds()[Ta]()}});
this.addMorph({type:"label",name:"name tag",padding:va.Rectangle.inset(5,5,5,5),fontColor:va.Color.white,fill:va.Color.orange,borderRadius:3});this.alignWithHalo()}},showLayout:{defaultValue:!1},targetId:{},target:{readOnly:!0,derived:!0,get:function(){return(this.world()||this.env.world).getMorphWithId(this.targetId)}}}}},{key:"removeHighlighters",value:function(Q){Q=void 0===Q?$world:Q;var za=Q._morphHighlighters,Ta;for(Ta in za)za[Ta].remove();delete Q._morphHighlighters}},{key:"for",value:function(Q,
za,Ta,xb){Ta=void 0===Ta?!1:Ta;xb=void 0===xb?[]:xb;var Yb=Q._morphHighlighters=Q._morphHighlighters||{};va.properties.forEachOwn(Yb,function(Ac,mc){return mc.alignWithHalo()});if(!za||za.ownerChain().find(function(Ac){return Ac.isHaloItem}))return null;Yb[za.id]=Yb[za.id]||new this({targetId:za.id,halo:Q,showLayout:Ta});Q.addMorph(Yb[za.id]);Yb[za.id].highlightedSides=xb;return Yb[za.id]}},{key:"interceptDrop",value:function(Q,za,Ta){(Q=Q._morphHighlighters=Q._morphHighlighters||{},Q[za.id])&&Q[za.id].handleDrop(Ta)}}],
qb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:60719,end:64514})}(va.Morph));va.MorphHighlighter=gb;va.MorphHighlighter=gb;va.MorphHighlighter=gb;var Oc=Ka("I",function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ia=qb.hasOwnProperty("InteractiveMorphSelector")&&
"function"===typeof qb.InteractiveMorphSelector?qb.InteractiveMorphSelector:qb.InteractiveMorphSelector=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:Symbol.for("lively-instance-initialize"),value:function(Q,za,Ta){Q=void 0===Q?$world:Q;this.controllingMorph=void 0===za?null:za;this.possibleTarget=this.morphHighlighter=this.selectorMorph=null;this.world=Q;this.filterFn=Ta;this.whenDone=null}},{key:"selectNewTarget",
value:function(){this.targetObject=null;var Q=va.promise.deferred();Q.promise.resolve=Q.resolve;this.whenDone=Q.promise;this.selectorMorph=va.Icon.makeLabel("crosshairs",{fontSize:20,hasFixedPosition:!0,epiMorph:!0}).openInWorld();va.connect(this.world.firstHand,"position",this,"scanForTargetAt");va.once(this.selectorMorph,"onMouseUp",this,"selectTarget");va.once(this.selectorMorph,"onKeyDown",this,"stopSelect");this.selectorMorph.focus();this.scanForTargetAt(this.world.firstHand.position)}},{key:"scanForTargetAt",
value:function(){var Q=this.world.firstHand.globalPosition;this.selectorMorph.center=Q;this.selectorMorph.focus();var za=this.selectorMorph.morphBeneath(Q),Ta,xb=this.possibleTarget,Yb=this.controllingMorph,Ac=this.filterFn,mc=this.world,qd=this.morphHighlighter;for(qd==za?za=qd.morphBeneath(Q):za&&za.isEpiMorph&&(za=za.morphBeneath(Q));za&&(Ta=[za].concat($jscomp.arrayFromIterable(za.ownerChain())).find(function(zd){return!zd.visible}));)za=Ta=Ta.morphBeneath(Q);if(za&&Ac&&!Ac(za))for(;za&&![za].concat($jscomp.arrayFromIterable(za.ownerChain())).find(Ac);)za=
za.morphBeneath(Q);!za||za==xb||Yb&&za.ownerChain().includes(Yb.getWindow())||(qd&&qd.deactivate(),(this.possibleTarget=xb=za)&&!xb.isWorld&&(Q=this.morphHighlighter=va.MorphHighlighter.for(mc,za))&&Q.show())}},{key:"selectTarget",value:function(){this.targetObject=this.possibleTarget;this.stopSelect()}},{key:"stopSelect",value:function(){va.MorphHighlighter.removeHighlighters(this.world);va.disconnect(this.world.firstHand,"position",this,"scanForTargetAt");this.selectorMorph.remove();this.whenDone&&
this.whenDone.resolve(this.targetObject)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveMorphSelector"}},{key:"selectMorph",value:function(Q,za,Ta){Q=new this(Q,za,Ta);Q.selectNewTarget();return Q.whenDone}}],qb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:64523,
end:67276})}(void 0));va.InteractiveMorphSelector=Oc;va.InteractiveMorphSelector=Oc;va.InteractiveMorphSelector=Oc;va.default=cb;var Cb=lively.FreezerRuntime.recorderFor("lively.ide/index.js");Cb.info="import via sub modules";Cb.info="import via sub modules";Cb.info="import via sub modules";cb=Ka("v",{});Cb.valueWidgets=cb;Cb.valueWidgets=cb;Cb.valueWidgets=cb;var Gd=Ka("p",{});Cb.popovers=Gd;Cb.popovers=Gd;Cb.popovers=Gd;var Ec=lively.FreezerRuntime.recorderFor("lively.components/popup.js");Ec.Morph=
Zd;Ec.Icon=ce;Ec.Color=gc;Ec.pt=Ab;Ec.connect=Mc;Ec.duration=300;Cb=Ka("P",function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.components/popup.js"),Ia=qb.hasOwnProperty("Popover")&&"function"===typeof qb.Popover?qb.Popover:qb.Popover=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"relayout",value:function(Q){var za=this.get("body"),Ta=this.get("arrow"),xb=this.get("close button");Ta=Ta.height;
Q?(za.animate({topCenter:Ec.pt(0,Ta),duration:200}),xb.animate({topRight:za.topRight.addXY(8,-8),duration:200})):(za.topCenter=Ec.pt(0,Ta),xb.topRight=za.topRight.addXY(8,-8))}},{key:"close",value:function(){this.fadeOut(300)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Popover"}},{key:"properties",get:function(){return{epiMorph:{defaultValue:!0},hasFixedPosition:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/popover/light"}}},targetMorph:{derived:!0,
after:["submorphs"],defaultValue:{extent:Ec.pt(200,200),fill:Ec.Color.transparent,submorphs:[{name:"placeholder",type:"label",value:"No Target Specified"}]},get:function(){return this.get("body").submorphs[0]},set:function(Q){var za=this;this.get("body").addMorph(Q);this.whenRendered().then(function(){return za.relayout()})}},submorphs:{initialize:function(){var Q=this;this.submorphs=[{type:"polygon",name:"arrow",topCenter:Ec.pt(0,0),borderColor:Ec.Color.transparent,vertices:[Ec.pt(-10,0),Ec.pt(0,
-15),Ec.pt(10,0)]},{name:"body"},{name:"close button",type:"button",label:Object.assign(Ec.Icon.makeLabel("times-circle"),{fontSize:18}),tooltip:"close",fill:null,extent:Ec.pt(16,16),borderColor:Ec.Color.transparent}];var za=$jscomp.makeIterator(this.submorphs);za.next();var Ta=za.next().value;za=za.next().value;Ec.connect(za,"fire",this,"close");Ec.connect(Ta,"extent",this,"relayout",{converter:"() => target.animated"});setTimeout(function(){return Q.animated=!0},1E3)}}}}}],qb,{pathInPackage:function(){return"popup.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:163,end:2541})}(Ec.Morph));Ec.Popover=Cb;Ec.Popover=Cb;Ec.Popover=Cb;var oc=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js");oc.Morph=Zd;oc.TilingLayout=Mb;oc.morph=Kb;oc.Label=nd;oc.HorizontalLayout=Hc;oc.Icon=ce;oc.InputLine=Hb;oc.config=pc;oc.connect=Mc;oc.signal=
db;oc.Color=gc;oc.LinearGradient=ic;oc.pt=Ab;oc.rect=Bc;oc.num=kd;oc.obj=Zc;oc.popovers=Gd;oc.ValueScrubber=Ma;oc.Popover=Cb;(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ia=qb.hasOwnProperty("ContextSensitiveWidget")&&"function"===typeof qb.ContextSensitiveWidget?qb.ContextSensitiveWidget:qb.ContextSensitiveWidget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,
void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ContextSensitiveWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:oc.Color.transparent},isSelected:{defaultValue:"false",set:function(Q){this.setProperty("isSelected",Q);this.fontColor=Q?oc.Color.white:oc.Color.black}},layout:{initialize:function(){this.layout=new oc.HorizontalLayout}},context:{serialize:!1}}}}],qb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1872,end:2441})})(oc.Morph);(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ia=qb.hasOwnProperty("ShortcutWidget")&&"function"===typeof qb.ShortcutWidget?qb.ShortcutWidget:qb.ShortcutWidget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,
yb,[{key:"onMouseDown",value:function(Q){this.openPopover()}},{key:"openPopover",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Q){Q.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShortcutWidget"}},{key:"properties",get:function(){return{title:{defaultValue:"No Title",after:["submorphs"],set:function(Q){this.setProperty("title",Q);this.getSubmorphNamed("valueString").value=Q}},nativeCursor:{defaultValue:"pointer"},fontColor:{derived:!0,
set:function(Q){this.submorphs.forEach(function(za){return za.fontColor=Q})}},submorphs:{initialize:function(){this.submorphs=[oc.Icon.makeLabel("arrow-right",{styleClasses:["TreeLabel"],fontSize:15,padding:oc.rect(1,1,4,1)}),{type:"label",value:this.title,styleClasses:["TreeLabel"],fontWeight:"bold",name:"valueString",opacity:.8,borderRadius:5,padding:oc.rect(0,0,0,2),nativeCursor:"pointer",fontSize:12,borderWidth:0}]}}}}}],qb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:2443,end:3793})})(oc.ContextSensitiveWidget);Gd=function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ia=qb.hasOwnProperty("LayoutWidget")&&"function"===typeof qb.LayoutWidget?qb.LayoutWidget:qb.LayoutWidget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Dc(Ia,yb,[{key:"layoutChanged",value:function(){this.title=this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}},{key:"openPopover",value:function(){var Q=this,za;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ta){if(1==Ta.nextAddress)return za=new oc.popovers.LayoutPopover({hasFixedPosition:!!Q.ownerChain().find(function(xb){return xb.hasFixedPosition}),container:Q.context}),Ta.yield(za.fadeIntoWorld(Q.globalBounds().center()),2);oc.connect(za,"layoutChanged",
Q,"layoutChanged");oc.signal(Q,"openWidget",za);Ta.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutWidget"}},{key:"properties",get:function(){return{title:{after:["submorphs"],initialize:function(){this.title=this.context&&this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}}}}}],qb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3802,end:4641})}(oc.ShortcutWidget);oc.LayoutWidget=Gd;oc.LayoutWidget=Gd;oc.LayoutWidget=Gd;Gd=function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ia=qb.hasOwnProperty("ColorWidget")&&"function"===typeof qb.ColorWidget?qb.ColorWidget:qb.ColorWidget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"relayout",
value:function(Q){Q?this.submorphs=this.color?this.color.isGradient?this.renderGradientValue():this.renderColorValue():this.renderNoColor():this.color&&(this.color.isGradient?this.updateGradientValue():this.updateColorValue())}},{key:"updateGradientValue",value:function(){var Q=this.color;if(2*Q.stops.length==this.submorphs.length-3){var za;for(za in this.color.stops){var Ta=Q.stops[za];var xb=Ta.color,Yb=Ta.offset,Ac=$jscomp.makeIterator(this.submorphs[2+2*za].submorphs).next().value;Ta=this.submorphs[3+
2*za];Ac.fill=xb;Ta.value=(100*Yb).toFixed()+"%"+(za<Q.stops.length-1?",":"")}}else this.submorphs=this.renderGradientValue()}},{key:"renderGradientValue",value:function(){return[{type:"label",styleClasses:["TreeLabel"],value:this.color.type+"(",name:"valueString"}].concat($jscomp.arrayFromIterable(this.renderStops()),[{type:"label",styleClasses:["TreeLabel"],value:")"}])}},{key:"updateColorValue",value:function(){this.getSubmorphNamed("color box").fill=this.color;this.getSubmorphNamed("valueString").value=
oc.obj.safeToString(this.color)}},{key:"renderNoColor",value:function(){return[{extent:oc.pt(15,15),fill:oc.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:oc.pt(5,7.5),fill:oc.Color.white,borderColor:oc.Color.gray.darker(),borderWidth:1,submorphs:[{type:"path",name:"no fill",vertices:[oc.pt(0,0),oc.pt(10,10)],borderColor:oc.Color.red}]}]},{type:"label",value:"No Color",fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderColorValue",value:function(){return[{extent:oc.pt(15,
15),fill:oc.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:oc.pt(5,7.5),fill:this.color,borderColor:oc.Color.gray.darker(),nativeCursor:"pointer",borderWidth:1}]},{type:"label",value:oc.obj.safeToString(this.color),fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderStops",value:function(){var Q=this.color,za=[{type:"label",padding:oc.rect(0,0,5,0),value:"linearGradient"==Q.type?oc.num.toDegrees(Q.vectorAsAngle()).toFixed()+"\u00b0,":""}],Ta;
for(Ta in Q.stops){var xb=Q.stops[Ta],Yb=xb.color;xb=xb.offset;za.push({extent:oc.pt(this.fontSize,this.fontSize),fill:oc.Color.transparent,layout:new oc.HorizontalLayout({spacing:3}),submorphs:[{styleClasses:["colorValue"],fill:Yb}]});za.push({type:"label",padding:oc.rect(0,0,5,0),value:(100*xb).toFixed()+"%"+(Ta<Q.stops.length-1?",":"")})}return za}},{key:"onMouseDown",value:function(Q){this.openFillEditor()}},{key:"update",value:function(Q){this.color=Q}},{key:"openFillEditor",value:function(){var Q=
this,za;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ta){if(1==Ta.nextAddress)return za=new oc.popovers.FillPopover({hasFixedPosition:!!Q.ownerChain().find(function(xb){return xb.hasFixedPosition}),handleMorph:Q.context,fillValue:Q.color,title:"Fill Control",gradientEnabled:Q.gradientEnabled}),Ta.yield(za.fadeIntoWorld(Q.globalBounds().center()),2);oc.connect(za,"fillValue",Q,"update");oc.signal(Q,"openWidget",za);Ta.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorWidget"}},
{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=new oc.HorizontalLayout({direction:"centered"})}},selectionFontColor:{defaultValue:oc.Color.white},nonSelectionFontColor:{defaultValue:oc.Color.black},color:{defaultValue:oc.Color.blue},gradientEnabled:{defaultValue:!1},fontSize:{defaultValue:14},isSelected:{after:["submorphs"],set:function(Q){this.getProperty("isSelected")!=Q&&(this.getSubmorphNamed("valueString").fontColor=Q?this.selectionFontColor:this.nonSelectionFontColor,
this.setProperty("isSelected",Q))}},submorphs:{after:["nonSelectionFontColor","selectionFontColor"],initialize:function(){oc.connect(this,"color",this,"relayout",{converter:function(Q,za){return(za&&za.isColor)!=(Q&&Q.isColor)}});this.relayout(!0)}}}}}],qb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:4705,end:10188})}(oc.ContextSensitiveWidget);oc.ColorWidget=Gd;oc.ColorWidget=Gd;oc.ColorWidget=Gd;Gd=function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ia=qb.hasOwnProperty("BooleanWidget")&&"function"===typeof qb.BooleanWidget?qb.BooleanWidget:qb.BooleanWidget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"onMouseDown",value:function(Q){this.boolean=!this.boolean}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BooleanWidget"}},{key:"properties",get:function(){return{fontFamily:{defaultValue:oc.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},boolean:{set:function(Q){this.setProperty("boolean",Q);this.value=oc.obj.safeToString(Q);this.fontColor=this.boolean?oc.Color.green:oc.Color.red}}}}}],qb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10197,end:10682})}(oc.Label);oc.BooleanWidget=Gd;oc.BooleanWidget=Gd;oc.BooleanWidget=Gd;Gd=Ka("N",function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ia=qb.hasOwnProperty("NumberWidget")&&"function"===typeof qb.NumberWidget?qb.NumberWidget:qb.NumberWidget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Dc(Ia,yb,[{key:"onMouseDown",value:function(Q){Dc._get(Object.getPrototypeOf(Ia.prototype),"onMouseDown",this).call(this,Q);"up"==Q.targetMorph.name&&this.increment();"down"==Q.targetMorph.name&&this.decrement()}},{key:"spec",value:function(){return oc.obj.dissoc(Dc._get(Object.getPrototypeOf(Ia.prototype),"spec",this).call(this),["submorphs"])}},{key:"update",value:function(Q,za){za=void 0===za?!0:za;this.setProperty("number",za?Q/this.scaleFactor:Q);oc.signal(this,"number",this.number);
this.relayout(za)}},{key:"relayoutButtons",value:function(){var Q=this.getSubmorphNamed("up"),za=this.getSubmorphNamed("down");this.getSubmorphNamed("value");Q.height=za.height=Math.floor(this.height/2);Q.width=za.width=20}},{key:"onChange",value:function(Q){Dc._get(Object.getPrototypeOf(Ia.prototype),"onChange",this).call(this,Q);"extent"!=Q.prop||this.autofit||this.relayout()}},{key:"relayout",value:function(Q){var za=this.getSubmorphNamed("value"),Ta=this.showStepControls?20:0;za&&(this.autofit?
(Q||(za.value=this.number*this.scaleFactor),za.fit(),this.height=za.height,this.width=za.width+Ta):Q||(za.width=this.width-Ta),this.relayoutButtons(),Q||(za.value=oc.num.roundTo(this.number*this.scaleFactor,1),za.min=-Infinity!=this.min?this.min*this.scaleFactor:this.min,za.max=Infinity!=this.max?this.max*this.scaleFactor:this.max,za.unit=this.unit))}},{key:"increment",value:function(){void 0!=this.max&&this.number>=this.max||this.update(this.number+1/this.scaleFactor,!1)}},{key:"decrement",value:function(){void 0!=
this.min&&this.number<=this.min||this.update(this.number-1/this.scaleFactor,!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NumberWidget"}},{key:"properties",get:function(){return{unit:{type:"Enum",isStyleProp:!0,values:["px","%","pt",""]},autofit:{defaultValue:!0,after:["submorphs","extent"],set:function(Q){this.setProperty("autofit",Q);this.getSubmorphNamed("value").scaleToBounds=!Q}},number:{defaultValue:0,after:["unit","autofit"],set:function(Q){this.setProperty("number",
Q);this.relayout(!1)}},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},floatingPoint:{after:["number","submorphs"],set:function(Q){this.setProperty("floatingPoint",Q);this.get("value").floatingPoint=Q},get:function(){if("undefined"!==typeof this.getProperty("floatingPoint"))return this.getProperty("floatingPoint");var Q=/[+-]?([0-9]*[.])?[0-9]+/.exec(this.number);return 1==this.scaleFactor&&Q&&!!Q[1]}},padding:{isStyleProp:!0,defaultValue:oc.rect(5,3,0,0),after:["submorphs"],set:function(Q){this.setProperty("padding",
Q);this.getSubmorphNamed("value").padding=Q}},extent:{defaultValue:oc.pt(70,25)},scaleFactor:{defaultValue:1,get:function(){return this.getProperty("scaleFactor")||1}},baseFactor:{after:["submorphs"],derived:!0,get:function(){return this.get("value").baseFactor},set:function(Q){this.get("value").baseFactor=Q}},styleClasses:{defaultValue:["unfocused"]},master:{initialize:function(){var Q=this;this.master={auto:"styleguide://SystemWidgets/number field/light"};this.master.whenApplied().then(function(){Q.relayout()})}},
fontColor:{isStyleProp:!0,defaultValue:oc.Color.rgbHex("#0086b3"),set:function(Q){this.setProperty("fontColor",Q)}},isSelected:{set:function(Q){this.getProperty("isSelected")!=Q&&(Q?(this.addStyleClass("selected"),this.removeStyleClass("unselected")):(this.removeStyleClass("selected"),this.addStyleClass("unselected")),this.setProperty("isSelected",Q))}},fontFamily:{defaultValue:"Sans-Serif",isStyleProp:!0,set:function(Q){this.setProperty("fontFamily",Q)}},fontSize:{defaultValue:15,isStyleProp:!0,
set:function(Q){this.setProperty("fontSize",Q)}},layout:{initialize:function(){this.layout=new oc.TilingLayout({axis:"column",orderByIndex:!0,align:"center"})}},showStepControls:{derived:!0,get:function(){return this.getSubmorphNamed("up").visible&&this.getSubmorphNamed("down").visible},set:function(Q){this.clipMode=(this.getSubmorphNamed("up").visible=this.getSubmorphNamed("down").visible=Q)?"visible":"hidden"}},submorphs:{after:["min","max"],initialize:function(Q){0<Q.length||(this.submorphs=[new oc.ValueScrubber({name:"value",
unit:this.unit,floatingPoint:this.floatingPoint,scaleToBounds:!1,min:this.min,max:this.max}),{name:"up",submorphs:[oc.Icon.makeLabel("sort-up",{reactsToPointer:!1,name:"icon"})]},{name:"down",rotation:Math.PI,submorphs:[oc.Icon.makeLabel("sort-up",{reactsToPointer:!1,name:"icon"})]}])}}}}}],qb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:10691,end:17485})}(oc.Morph));oc.NumberWidget=Gd;oc.NumberWidget=Gd;oc.NumberWidget=Gd;Cb=function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ia=qb.hasOwnProperty("ShadowWidget")&&"function"===typeof qb.ShadowWidget?qb.ShadowWidget:qb.ShadowWidget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"onMouseDown",value:function(Q){this.openPopover()}},
{key:"openPopover",value:function(){var Q=this,za;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ta){if(1==Ta.nextAddress)return za=new oc.popovers.ShadowPopover({hasFixedPosition:!!Q.ownerChain().find(function(xb){return xb.hasFixedPosition}),shadowValue:Q.shadowValue}),Ta.yield(za.fadeIntoWorld(Q.globalBounds().center()),2);oc.connect(za,"shadowValue",Q,"shadowValue");oc.connect(Q,"shadowValue",Q,"update");oc.signal(Q,"openWidget",za);Ta.jumpToEnd()})}},{key:"update",value:function(){this.renderShadowDisplay()}},
{key:"renderShadowDisplay",value:function(){this.shadowValue?1<this.submorphs.length?this.updateShadowDisplay():this.initShadowDisplay():this.submorphs=[{opacity:.8,reactsToPointer:!1,styleClasses:["TreeLabel"],name:"valueString",type:"label",value:"No Shadow"}]}},{key:"updateShadowDisplay",value:function(){var Q=this.shadowValue,za=Q.blur,Ta=Q.spread,xb=Q.distance;Q=Q.color;var Yb=$jscomp.makeIterator(this.submorphs),Ac=Yb.next().value,mc=Yb.next().value;mc=$jscomp.makeIterator(mc.submorphs).next().value;
Yb=Yb.next().value;Ac.value=(this.shadowValue.inset?"inset":"drop")+"-shadow(";mc.fill=Q;Yb.value=", "+za+"px, "+xb+"px, "+Ta+"px)"}},{key:"initShadowDisplay",value:function(){var Q=this.shadowValue,za=Q.blur,Ta=Q.spread,xb=Q.distance;Q=Q.color;this.submorphs=[{name:"valueString",opacity:.7,reactsToPointer:!1,type:"label",value:(this.shadowValue.inset?"inset":"drop")+"-shadow("},oc.morph({fill:oc.Color.transparent,extent:oc.pt(this.fontSize+6,this.fontSize+4),submorphs:[{extent:oc.pt(this.fontSize,
this.fontSize),position:oc.pt(2,2),fill:Q,borderColor:oc.Color.black,borderWidth:1}]}),{name:"valueString",type:"label",opacity:.7,reactsToPointer:!1,value:", "+za+"px, "+xb+"px, "+Ta+"px)"}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{after:["submorphs"],defaultValue:null,set:function(Q){this.setProperty("shadowValue",Q);this.renderShadowDisplay()}},fill:{defaultValue:oc.Color.transparent},nativeCursor:{defaultValue:"pointer"},
fontSize:{defaultValue:12},fontColor:{derived:!0,set:function(Q){this.submorphs.forEach(function(za){return za.fontColor=Q})}},isSelected:{defaultValue:!1,set:function(Q){this.setProperty("isSelected",Q);this.fontColor=Q?oc.Color.white:oc.Color.black}},layout:{initialize:function(){this.layout=new oc.HorizontalLayout}},submorphs:{initialize:function(){this.update()}}}}}],qb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:17496,end:20619})}(oc.Morph);oc.ShadowWidget=Cb;oc.ShadowWidget=Cb;oc.ShadowWidget=Cb;Cb=function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ia=qb.hasOwnProperty("PointWidget")&&"function"===typeof qb.PointWidget?qb.PointWidget:qb.PointWidget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Dc(Ia,yb,[{key:"onMouseDown",value:function(Q){this.openPopover()}},{key:"openPopover",value:function(){var Q=this,za;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ta){if(1==Ta.nextAddress)return za=new oc.popovers.PointPopover({pointValue:Q.pointValue,hasFixedPosition:!!Q.ownerChain().find(function(xb){return xb.hasFixedPosition})}),Ta.yield(za.fadeIntoWorld(Q.globalBounds().center()),2);oc.connect(za,"pointValue",Q,"pointValue");oc.signal(Q,"openWidget",za);Ta.jumpToEnd()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PointWidget"}},{key:"properties",get:function(){return{isSelected:{defaultValue:"false",set:function(Q){this.setProperty("isSelected",Q);this.fontColor=Q?this.selectionFontColor:this.nonSelectionFontColor}},selectionFontColor:{isStyleProp:!0,defaultValue:oc.Color.white},nonSelectionFontColor:{isStyleProp:!0,defaultValue:oc.Color.black},fontFamily:{defaultValue:oc.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},
styleClasses:{defaultValue:["TreeLabel"]},pointValue:{after:["textAndAttributes"],set:function(Q){var za=oc.Color.rgbHex("#0086b3");this.setProperty("pointValue",Q);this.textAndAttributes=["pt(",null,Q.x.toFixed(),{fontColor:za},",",{},Q.y.toFixed(),{fontColor:za},")",null];this.fixedHeight=this.fixedWidth=!0;this.height=20;this.width=this.textString.length*this.fontSize}}}}}],qb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:20628,end:22272})}(oc.Label);oc.PointWidget=Cb;oc.PointWidget=Cb;oc.PointWidget=Cb;Cb=function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ia=qb.hasOwnProperty("PaddingWidget")&&"function"===typeof qb.PaddingWidget?qb.PaddingWidget:qb.PaddingWidget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Dc(Ia,yb,[{key:"onMouseDown",value:function(Q){this.openPopover()}},{key:"openPopover",value:function(){var Q=this,za;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ta){if(1==Ta.nextAddress)return za=new oc.popovers.RectanglePopover({hasFixedPosition:!!Q.ownerChain().find(function(xb){return xb.hasFixedPosition}),rectangle:Q.rectangle}),za.relayout(),Ta.yield(za.fadeIntoWorld(Q.globalBounds().center()),2);oc.connect(za,"rectangle",Q,"rectangle");oc.signal(Q,"openWidget",
za);Ta.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PaddingWidget"}},{key:"properties",get:function(){return{nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},fontFamily:{defaultValue:oc.config.codeEditor.defaultStyle.fontFamily},isSelected:{defaultValue:"false",set:function(Q){this.setProperty("isSelected",Q);this.fontColor=Q?oc.Color.white:oc.Color.black}},rectangle:{defaultValue:oc.rect(0),set:function(Q){this.setProperty("rectangle",
Q);this.value=oc.obj.safeToString(Q)}}}}}],qb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22281,end:23342})}(oc.Label);oc.PaddingWidget=Cb;oc.PaddingWidget=Cb;oc.PaddingWidget=Cb;Cb=function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ia=qb.hasOwnProperty("IconWidget")&&
"function"===typeof qb.IconWidget?qb.IconWidget:qb.IconWidget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"onMouseDown",value:function(Q){this.openPopover()}},{key:"openPopover",value:function(){var Q=this,za;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ta){if(1==Ta.nextAddress)return za=new oc.popovers.IconPopover({hasFixedPosition:!!Q.ownerChain().find(function(xb){return xb.hasFixedPosition})}),
Ta.yield(za.fadeIntoWorld(Q.globalBounds().center()),2);oc.connect(za,"select",Q,"iconValue",{converter:function(xb){return xb&&oc.Icon.makeLabel(xb).value},varMapping:{Icon:oc.Icon}});oc.signal(Q,"openWidget",za);Ta.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IconWidget"}},{key:"properties",get:function(){return{fontColor:{defaultValue:oc.Color.gray.darker()},fontFamily:{defaultValue:"FontAwesome"},nativeCursor:{defaultValue:"pointer"},iconValue:{derived:!0,get:function(){return this.value},
set:function(Q){this.value=Q||"No Icon"}}}}}],qb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23351,end:24282})}(oc.Label);oc.IconWidget=Cb;oc.IconWidget=Cb;oc.IconWidget=Cb;Cb=function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ia=qb.hasOwnProperty("StringWidget")&&
"function"===typeof qb.StringWidget?qb.StringWidget:qb.StringWidget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"truncate",value:function(Q){return 200<Q.length?Q.slice(0,20)+"...":Q}},{key:"onFocus",value:function(Q){var za=this,Ta;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xb){if(1==xb.nextAddress)return Dc._get(Object.getPrototypeOf(Ia.prototype),"onFocus",za).call(za,Q),za.readOnly?
xb.return():za.stringTooLong?xb.yield(za.world().editPrompt("edit string",{requester:za,input:za.stringValue}),2):(za.borderColor=oc.Color.white.withA(.9),za.textString=za.stringValue,xb.return());Ta=xb.yieldResult;if("string"===typeof Ta)za.onInput(Ta);xb.jumpToEnd()})}},{key:"onBlur",value:function(Q){Dc._get(Object.getPrototypeOf(Ia.prototype),"onBlur",this).call(this,Q);this.readOnly||(this.borderColor=oc.Color.transparent,this.onInput(this.textString))}},{key:"onInput",value:function(Q){this.owner.focus();
oc.signal(this,"inputAccepted",Q);this.stringValue=Q}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StringWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:oc.Color.transparent},fontColor:{defaultValue:oc.Color.blue},nativeCursor:{defaultValue:"auto"},borderColor:{defaultValue:oc.Color.transparent},borderStyle:{defaultValue:"dashed"},borderRadius:{defaultValue:4},borderWidth:{defaultValue:1},padding:{defaultValue:oc.rect(0,0,0,0)},fixedWidth:{defaultValue:!1},
fixedHeight:{defaultValue:!1},stringValue:{after:["textString"],set:function(Q){this.setProperty("stringValue",Q);this.textString=this.truncate(Q);this.nativeCursor=this.stringTooLong?"pointer":"auto"}},stringTooLong:{readOnly:!0,get:function(){return this.stringValue.includes("\n")}},isSelected:{defaultValue:"false",set:function(Q){this.setProperty("isSelected",Q);this.fontColor=Q?oc.Color.white:oc.Color.blue}}}}}],qb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:24291,end:26242})}(oc.InputLine);oc.StringWidget=Cb;oc.StringWidget=Cb;oc.StringWidget=Cb;oc.valueWidgets=cb;Object.assign(oc.valueWidgets,{NumberWidget:oc.NumberWidget,StringWidget:oc.StringWidget,IconWidget:oc.IconWidget,PaddingWidget:oc.PaddingWidget,ShadowWidget:oc.ShadowWidget,PointWidget:oc.PointWidget,BooleanWidget:oc.BooleanWidget,LayoutWidget:oc.LayoutWidget,
ColorWidget:oc.ColorWidget});var rb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js");rb.Ellipse=Ib;rb.Icon=ce;rb.Morph=Zd;rb.Path=Uc;rb.Text=wd;rb.HorizontalLayout=Hc;rb.VerticalLayout=pb;rb.morph=Kb;rb.Color=gc;rb.pt=Ab;rb.rect=Bc;rb.Rectangle=Fc;rb.arr=vb;rb.connect=Mc;rb.disconnect=Jb;rb.LabeledCheckBox=Ub;rb.DropDownSelector=dc;rb.Button=vc;rb.Menu=gd;rb.NumberWidget=Gd;rb.InteractiveMorphSelector=Oc;rb.easings=Nc;(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
Ia=qb.hasOwnProperty("ProportionSlider")&&"function"===typeof qb.ProportionSlider?qb.ProportionSlider:qb.ProportionSlider=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"alignWithTarget",value:function(){this.setBounds(this.axis.getProportionSliderBounds(this))}},{key:"onDragStart",value:function(){this.view.visible=!0}},{key:"onDrag",value:function(Q){this.axis.adjustStretch(this.axis.getDelta(Q));
this.axis.halo.alignWithTarget()}},{key:"onDragEnd",value:function(){this.view.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionSlider"}},{key:"properties",get:function(){return{axis:{},view:{},fill:{defaultValue:rb.Color.transparent}}}}],qb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:662,end:1139})})(rb.Morph);(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ia=qb.hasOwnProperty("MinViewer")&&"function"===typeof qb.MinViewer?qb.MinViewer:qb.MinViewer=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"alignWithTarget",value:function(){this.textString="min: "+this.axis.targetAxis.min.toFixed()+"px !"}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"MinViewer"}},{key:"properties",get:function(){return{axis:{}}}}],qb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:1141,end:1361})})(rb.Morph);(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ia=qb.hasOwnProperty("MinSlider")&&"function"===
typeof qb.MinSlider?qb.MinSlider:qb.MinSlider=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"alignWithTarget",value:function(){this.position=this.axis.getMinSliderPosition()}},{key:"requestToShow",value:function(){this.visible=!this.axis.targetAxis.fixed}},{key:"requestToHide",value:function(){this.active?this.shouldHide=!0:this.visible=!1}},{key:"onDragStart",value:function(){var Q=$jscomp.makeIterator(this.submorphs),
za=Q.next().value;Q=Q.next().value;this.axis.forceMenuHidden=!0;za.visible=!0;this.active=Q.visible=!0}},{key:"onDrag",value:function(Q){this.axis.targetAxis.min+=-this.getDelta(Q);this.axis.halo.alignWithTarget()}},{key:"onDragEnd",value:function(){var Q=$jscomp.makeIterator(this.submorphs),za=Q.next().value;Q=Q.next().value;this.axis.forceMenuHidden=!1;za.visible=!1;this.active=Q.visible=!1;this.shouldHide&&(this.shouldHide=this.visible=!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MinSlider"}},
{key:"properties",get:function(){return{axis:{},fill:{defaultValue:rb.Color.green},visible:{defaultValue:!1},becomesActiveOnHover:{defaultValue:!0}}}}],qb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:1363,end:2515})})(rb.Ellipse);(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
Ia=qb.hasOwnProperty("AxisHalo")&&"function"===typeof qb.AxisHalo?qb.AxisHalo:qb.AxisHalo=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"initialize",value:function(){this.setBounds(this.fetchBounds());var Q=this.minSlider(),za=this.axisMenu(),Ta=this.proportionSlider();Ta.addMorph(Q);this.submorphs=[Ta,za];this.halo.addGuide(this)}},{key:"forceMenuHidden",set:function(Q){this._forceMenuHidden=Q;
this.axisMenu.visible=!Q}},{key:"forceMenuHidden",get:function(){return this._forceMenuHidden}},{key:"lastAxis",get:function(){return!this.targetAxis.after}},{key:"fetchBounds",value:function(){return this.fetchPosition().extent(this.fetchExtent())}},{key:"alignWithTarget",value:function(){this.extent=this.fetchExtent();this.position=this.fetchPosition();this.proportionSlider.alignWithTarget();this.axisMenu.alignWithTarget()}},{key:"onHoverIn",value:function(){this.minSlider.requestToShow();this.axisMenu.visible=
!this.forceMenuHidden&&!0}},{key:"onHoverOut",value:function(Q){this.minSlider.requestToHide();this.axisMenu.visible=this.forceMenuVisible||!1}},{key:"proportionSlider",value:function(){var Q=this.proportionViewer();return this.halo.addGuide(new rb.ProportionSlider({nativeCursor:this.getResizeCursor(),axis:this,view:Q,submorphs:[this.devider(),Q]}))}},{key:"devider",value:function(){return new rb.Morph({visible:!this.lastAxis,fill:rb.Color.black.withA(.5),bounds:this.getDeviderBounds(),draggable:!1,
reactsToPointer:!1})}},{key:"minSlider",value:function(){var Q=this.minSpaceVisualizer(),za=this.minViewer();return this.halo.addGuide(new rb.MinSlider({nativeCursor:this.getResizeCursor(),axis:this,submorphs:[Q,za]}))}},{key:"minViewer",value:function(){return this.viewer(new rb.MinViewer({axis:this,position:this.getMinViewerPosition()}))}},{key:"minSpaceBorder",value:function(){return new rb.Path(Object.assign({position:rb.pt(-1,-1),borderStyle:"dashed",borderColor:rb.Color.green,borderWidth:2},
this.getMinSpaceBorder()))}},{key:"minSpaceVisualizer",value:function(){var Q=this,za=this.minSpaceBorder();return this.halo.addGuide(new rb.Morph({fill:rb.Color.green.withA(.1),visible:!1,isHaloItem:!0,submorphs:[za],alignWithTarget:function(){this.extent=Q.getMinSpaceExtent();this.topLeft=rb.pt(5,5)}}))}},{key:"axisMenu",value:function(){var Q=this.lockButton(),za=this.menuButton(),Ta=this;return new rb.Morph({layout:this.getMenuLayout(),submorphs:[Q,za],fill:rb.Color.transparent,visible:!1,becomesActiveOnHover:!0,
alignWithTarget:function(){this.bottomRight=this.owner.extent.subPt(Ta.getMenuOffset(this))}})}},{key:"lockButton",value:function(){var Q=this;return this.halo.addGuide(new rb.Morph({fill:rb.Color.transparent,extent:rb.pt(25,25),submorphs:[{center:rb.pt(12.5,12.5),fill:rb.Color.transparent,styleClasses:["fa","fa-unlock"]}],alignWithTarget:function(){Q.targetAxis.fixed?(this.fontColor=rb.Color.red,this.submorphs[0].styleClasses=["fa","fa-lock"]):(this.fontColor=rb.Color.green,this.submorphs[0].styleClasses=
["fa","fa-unlock"])},onMouseDown:function(){this.toggleLock()},toggleLock:function(){Q.targetAxis.fixed=!Q.targetAxis.fixed;Q.halo.alignWithTarget()}}))}},{key:"menuButton",value:function(){var Q=this,za=this;return new rb.Morph({fill:rb.Color.transparent,extent:rb.pt(25,25),submorphs:[{fill:rb.Color.transparent,styleClasses:["fa","fa-cog"],center:rb.pt(12.5,12.5)}],onMouseDown:function(Ta){za.forceMenuVisible=!0;this.addMorph(Ta.state.menu=new rb.Menu({position:rb.pt(15,15),items:[["Remove "+za.subject,
function(){Q.targetAxis.remove();Q.halo.initGuides();Q.halo.alignWithTarget()}],["Insert "+za.subject+" before",function(){Q.targetAxis.addBefore();Q.halo.initGuides();Q.halo.alignWithTarget()}],["Insert "+za.subject+" after",function(){Q.targetAxis.addAfter();Q.halo.initGuides();Q.halo.alignWithTarget()}]]}))}})}},{key:"viewer",value:function(Q){var za=Q.position;Q=Q.alignWithTarget;return this.halo.addGuide(new rb.Text({styleClasses:["Halo"],padding:rb.Rectangle.inset(6),visible:!1,borderRadius:10,
fontColor:rb.Color.white,fill:rb.Color.black.withA(.5),position:za,alignWithTarget:Q,readOnly:!0}))}},{key:"proportionViewer",value:function(){var Q=this;return this.viewer({position:this.getProportionViewerPosition(),alignWithTarget:function(){this.textString=Q.targetAxis.length.toFixed(1)+"px"}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AxisHalo"}},{key:"properties",get:function(){return{halo:{},targetAxis:{},container:{},fill:{defaultValue:rb.Color.transparent},submorphs:{initialize:function(){this.initialize()}}}}}],
qb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:2517,end:8448})})(rb.Morph);(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ia=qb.hasOwnProperty("RowHalo")&&"function"===typeof qb.RowHalo?qb.RowHalo:qb.RowHalo=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"subject",get:function(){return"row"}},{key:"adjustStretch",value:function(Q){this.targetAxis.height+=Q}},{key:"getDelta",value:function(Q){return Q.state.dragDelta.y}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.y}},{key:"fetchPosition",value:function(){return rb.pt(-45,this.axisOffset()+10)}},{key:"fetchExtent",value:function(){return rb.pt(40,this.targetAxis.length-10)}},{key:"getMenuOffset",
value:function(Q){return this.targetAxis.length>Q.height?rb.pt(2,5):rb.pt(26,10)}},{key:"getMenuLayout",value:function(){return new rb.VerticalLayout}},{key:"getResizeCursor",value:function(){return"row-resize"}},{key:"getMinViewerPosition",value:function(){return rb.pt(50,20)}},{key:"getMinSliderPosition",value:function(){return rb.pt(0,-this.targetAxis.min)}},{key:"getMinSpaceExtent",value:function(){return rb.pt(this.container.width+45,this.targetAxis.min)}},{key:"getMinSpaceBorder",value:function(){return{extent:rb.pt(this.container.width+
50,2),vertices:[rb.pt(0,1),rb.pt(this.container.width+50,1)]}}},{key:"getProportionViewerPosition",value:function(){return rb.pt(40,20)}},{key:"getProportionSliderBounds",value:function(Q){return rb.pt(0,Q.owner.height-5).extent(rb.pt(40,10))}},{key:"getDeviderBounds",value:function(){return rb.pt(15,4).extent(rb.pt(25,2))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RowHalo"}},{key:"properties",get:function(){return{row:{},targetAxis:{derived:!0,get:function(){return this.halo.target.row(this.row)}}}}}],
qb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:8450,end:9799})})(rb.AxisHalo);(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ia=qb.hasOwnProperty("ColumnHalo")&&"function"===typeof qb.ColumnHalo?qb.ColumnHalo:qb.ColumnHalo=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:Symbol.for("lively-instance-initialize"),value:function(Q){var za=Q.col;Q=Q.halo;Dc._get(Object.getPrototypeOf(Ia.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:Q.target.col(za),halo:Q})}},{key:"subject",get:function(){return"column"}},{key:"adjustStretch",value:function(Q){this.targetAxis.width+=Q}},{key:"getDelta",value:function(Q){return Q.state.dragDelta.x}},{key:"axisOffset",
value:function(){return this.targetAxis.origin.position.x}},{key:"fetchPosition",value:function(){return rb.pt(this.axisOffset()+10,-45)}},{key:"fetchExtent",value:function(){return rb.pt(this.targetAxis.length-10,40)}},{key:"getMenuOffset",value:function(Q){return this.targetAxis.length>Q.width?rb.pt(5,3):rb.pt(8,26)}},{key:"getMenuLayout",value:function(){return new rb.HorizontalLayout}},{key:"getResizeCursor",value:function(){return"col-resize"}},{key:"getMinViewerPosition",value:function(){return rb.pt(20,
50)}},{key:"getMinSliderPosition",value:function(){return rb.pt(-this.targetAxis.min,0)}},{key:"getMinSpaceExtent",value:function(){return rb.pt(this.targetAxis.min,this.container.height+45)}},{key:"getMinSpaceBorder",value:function(){return{extent:rb.pt(2,this.container.height+50),vertices:[rb.pt(1,0),rb.pt(1,this.container.height+50)]}}},{key:"getProportionViewerPosition",value:function(){return rb.pt(20,40)}},{key:"getProportionSliderBounds",value:function(Q){return rb.pt(Q.owner.width-5,0).extent(rb.pt(10,
40))}},{key:"getDeviderBounds",value:function(){return rb.pt(4,15).extent(rb.pt(2,25))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColumnHalo"}}],qb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:9801,end:11056})})(rb.AxisHalo);(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
Ia=qb.hasOwnProperty("CellGuide")&&"function"===typeof qb.CellGuide?qb.CellGuide:qb.CellGuide=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"menuItems",value:function(){var Q=this,za=rb.Icon.textAttribute("check-square-o"),Ta=rb.Icon.textAttribute("square-o");za[1].textStyleClasses.push("annotation");Ta[1].textStyleClasses.push("annotation");Ta[1].paddingRight="2px";return[["Resize Policy",[[["Rigid  ",
null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?Ta:za)),function(){Q.cellGroup.resize=!1}],[["Space Filling  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?za:Ta)),function(){Q.cellGroup.resize=!0}]]],["Align at...",["center"].concat($jscomp.arrayFromIterable((new rb.Rectangle).sides),$jscomp.arrayFromIterable((new rb.Rectangle).corners)).map(function(xb){return[[xb,{paddingRight:"2px"}].concat($jscomp.arrayFromIterable(Q.cellGroup.align==xb?za:Ta),["  ",null]),function(){return Q.cellGroup.align=
xb}]})]].concat(this.cellGroup.morph?[["Release Morph from Cell",function(){var xb=Q.cellGroup.morph;xb&&(Q.world().firstHand.grab(xb),Q.world().firstHand.longClickGrab=!0,xb.position=rb.pt(0))}]]:[])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGuide"}},{key:"properties",get:function(){return{cellGroup:{}}}}],qb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:11058,end:12377})})(rb.Morph);(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ia=qb.hasOwnProperty("LayoutHalo")&&"function"===typeof qb.LayoutHalo?qb.LayoutHalo:qb.LayoutHalo=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutHalo"}},
{key:"properties",get:function(){return{container:{},target:{get:function(){return this.container.layout}},pointerId:{},halosEnabled:{defaultValue:!1},isEpiMorph:{defaultValue:!0},isHaloItem:{defaultValue:!0},borderColor:{defaultValue:rb.Color.orange},borderWidth:{defaultValue:2},styleClasses:{defaultValue:["Halo"]}}}}],qb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12379,end:12833})})(rb.Morph);cb=Ka("G",function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ia=qb.hasOwnProperty("GridLayoutHalo")&&"function"===typeof qb.GridLayoutHalo?qb.GridLayoutHalo:qb.GridLayoutHalo=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"previewDrop",value:function(Q){1>Q.length||(Q=
this.cellGuides.find(function(za){return za.fullContainsWorldPoint($world.firstHand.position)}),Q!=this.currentCell&&this.currentCell&&this.currentCell.stopPreview(),(this.currentCell=Q)&&this.currentCell.startPreview())}},{key:"handleDrop",value:function(Q){var za=this;this.currentCell&&Q.whenRendered().then(function(){return za.currentCell.cellGroup.morph=Q})}},{key:"initialize",value:function(){this.initGuides();this.alignWithTarget();this.focus()}},{key:"optionControls",value:function(){var Q=
this.target,za=new rb.LabeledCheckBox({name:"compensateOrigin",label:"Compensate Origin",fill:rb.Color.transparent,checked:Q.compensateOrigin}),Ta=new rb.LabeledCheckBox({label:"Resize Submorphs",fill:rb.Color.transparent,name:"fitToCell",checked:Q.fitToCell});rb.connect(za,"checked",Q,"compensateOrigin");rb.connect(Ta,"checked",Q,"fitToCell");rb.connect(za,"checked",this,"alignWithTarget");return[za,Ta]}},{key:"isLayoutHalo",get:function(){return!1}},{key:"alignWithTarget",value:function(){this.target.apply();
this.position=this.container.globalPosition;this.target.compensateOrigin&&this.moveBy(this.container.origin.negated());this.extent=this.container.extent;this.addMissingGuides();rb.arr.reverse(this.guides).forEach(function(Q){return Q.alignWithTarget()})}},{key:"addMissingGuides",value:function(){var Q=this;rb.arr.withoutAll(this.target.cellGroups,this.guides.map(function(za){return za.cellGroup})).forEach(function(za){return Q.addMorph(Q.cellGuide(za))})}},{key:"initGuides",value:function(){this.submorphs=
[];this.guides=[];this.initCellGuides();this.initColumnGuides();this.initRowGuides()}},{key:"initCellGuides",value:function(){var Q=this,za=this.addMorph({fill:rb.Color.transparent,borderRadius:this.borderRadius,extent:this.extent});this.target.cellGroups.forEach(function(Ta){za.addMorph(Q.cellGuide(Ta))});this.cellGuides=za.submorphs;this.addMorph(this.resizer())}},{key:"addGuide",value:function(Q){Q.isHaloItem=!0;this.guides.push(Q);return Q}},{key:"initRowGuides",value:function(){var Q=this,za=
this;this.addGuide(this.addMorph(new rb.Morph({width:25,fill:rb.Color.gray.withA(.7),borderRadius:15,height:this.container.height,topRight:rb.pt(-5,0),alignWithTarget:function(){this.height=za.container.height}})));rb.arr.range(0,this.target.rowCount-1).forEach(function(Ta){Q.addMorph(new rb.RowHalo({row:Ta,halo:Q}))})}},{key:"initColumnGuides",value:function(){var Q=this,za=this;this.addGuide(this.addMorph(new rb.Morph({height:25,fill:rb.Color.gray.withA(.7),borderRadius:15,width:this.container.width,
bottomLeft:rb.pt(0,-5),alignWithTarget:function(){this.width=za.container.width}})));rb.arr.range(0,this.target.columnCount-1).forEach(function(Ta){Q.addMorph(new rb.ColumnHalo({col:Ta,halo:Q}))})}},{key:"resizer",value:function(){var Q=this;return this.addGuide(new rb.Morph({fill:rb.Color.transparent,extent:rb.pt(25,25),nativeCursor:"nwse-resize",onDrag:function(za){Q.container.resizeBy(za.state.dragDelta);Q.alignWithTarget()},alignWithTarget:function(){this.bottomRight=Q.extent}}))}},{key:"cellResizer",
value:function(Q,za){var Ta=this,xb="topLeft"==za?"bottomRight":"topLeft";return new rb.Ellipse({borderWidth:1,visible:!1,borderColor:rb.Color.black,nativeCursor:"nwse-resize",removeCell:function(Yb){Q.disconnect(Yb);Ta.alignWithTarget()},addCell:function(Yb){Q.connect(Yb);Ta.alignWithTarget()},start:function(){this.fixpointCell=Q[xb];this.draggedDelta=Q.bounds().partNamed(za);this.debugMorph=Ta.addMorph(new rb.Morph({fill:rb.Color.orange.withA(.5)}))},update:function(Yb){var Ac=this;this.draggedDelta=
this.draggedDelta.addPt(Yb);var mc=rb.Rectangle.unionPts([this.draggedDelta]).union(this.fixpointCell.bounds());this.debugMorph.setBounds(mc);Ta.cells.forEach(function(qd){var zd=mc.intersection(qd.bounds()).area()/qd.bounds().area();Q.includes(qd)&&.1>zd&&Ac.removeCell(qd);!Q.includes(qd)&&zd>1/3&&Ac.addCell(qd)})},onDragEnd:function(Yb){this.debugMorph.remove()},onDragStart:function(Yb){this.start(Yb.position)},onDrag:function(Yb){this.update(Yb.state.dragDelta)}})}},{key:"cellGuide",value:function(Q){var za=
this,Ta=this.cellResizer(Q,"topLeft"),xb=this.cellResizer(Q,"bottomRight");return this.addGuide(new rb.CellGuide({cellGroup:Q,bounds:Q.bounds(),fill:rb.Color.transparent,borderColor:rb.Color.orange,borderWidth:1,isHaloItem:!0,isCell:!0,draggable:!1,submorphs:[Ta,xb],onMouseDown:function(Yb){this.becomeActive()},deactivate:function(){this.borderColor=rb.Color.orange;this.fill=rb.Color.transparent;this.submorphs.forEach(function(Yb){Yb.visible=!1})},becomeActive:function(){za.guides.forEach(function(Yb){Yb.isCell&&
Yb.deactivate()});this.borderColor=rb.Color.rgbHex("#1565C0");this.fill=rb.Color.rgbHex("#1565C0").withA(.3);za.addMorph(this.remove());this.submorphs.forEach(function(Yb){Yb.visible=!0})},startPreview:function(Yb){this.fill=rb.Color.orange.withA(.7)},stopPreview:function(Yb){this.fill=rb.Color.transparent},onDrop:function(Yb){var Ac=$jscomp.makeIterator(Yb.hand.grabbedMorphs).next().value;Yb.hand.dropMorphsOn(za.container);Q.morph=Ac},alignWithTarget:function(){Q.bounds().isNonEmpty()?(this.setBounds(Q.bounds()),
Ta.center=this.innerBounds().topLeft(),xb.center=this.innerBounds().bottomRight()):(rb.arr.remove(za.guides,this),this.remove())}}))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:rb.Color.transparent},cells:{derived:!0,get:function(){return rb.arr.flatten(this.target.col(0).items.map(function(Q){return Q.row(0).items}))}},submorphs:{after:["target"],initialize:function(){this.initialize()}}}}}],qb,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12842,end:20283})}(rb.LayoutHalo));rb.GridLayoutHalo=cb;rb.GridLayoutHalo=cb;rb.GridLayoutHalo=cb;Gd=function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ia=qb.hasOwnProperty("TilingLayoutHalo")&&"function"===typeof qb.TilingLayoutHalo?qb.TilingLayoutHalo:qb.TilingLayoutHalo=
function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"remove",value:function(){Dc._get(Object.getPrototypeOf(Ia.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"handleDrop",value:function(Q){}},{key:"removePreviews",value:function(){this.previews.forEach(function(Q){return Q.clear()})}},
{key:"previewDrop",value:function(Q){var za=this;0<this.previews.length||(this.previews=Q.map(function(Ta){return za.container.addMorph({type:rb.DropPreview,bounds:Ta.bounds()})}),this.previews.forEach(function(Ta){Ta.step()}))}},{key:"updateSpacing",value:function(Q){this.target.spacing=Q}},{key:"updateAxis",value:function(Q){this.target.axis=Q}},{key:"updateAlign",value:function(Q){this.target.align=Q}},{key:"optionControls",value:function(){var Q=this.target,za=new rb.DropDownSelector({borderRadius:2,
padding:3,selectedValue:Q.axis,values:["row","column"]}),Ta=new rb.DropDownSelector({borderRadius:2,padding:3,selectedValue:Q.align,values:["left","center"]});Q=new rb.NumberWidget({min:0,number:Q.spacing,padding:rb.rect(5,3,0,0),borderRadius:3,borderWidth:1,borderColor:rb.Color.gray,unit:"px"});rb.connect(Q,"update",this,"updateSpacing");rb.connect(Ta,"update",this,"updateAlign");rb.connect(za,"update",this,"updateAxis");var xb={type:"label",padding:rb.rect(0,5,5,5),fill:rb.Color.transparent,fontColor:rb.Color.gray.darker(),
readOnly:!0};return[[Object.assign({},xb,{textString:"Submorph Spacing"}),Q],[Object.assign({},xb,{textString:"Tiling Align"}),Ta],[Object.assign({},xb,{textString:"Tiling Axis"}),za]].map(function(Yb){return{submorphs:Yb,fill:null,layout:new rb.HorizontalLayout({spacing:3})}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:rb.Color.transparent},previews:{defaultValue:[]}}}}],qb,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:20292,end:22407})}(rb.LayoutHalo);rb.TilingLayoutHalo=Gd;rb.TilingLayoutHalo=Gd;rb.TilingLayoutHalo=Gd;(function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ia=qb.hasOwnProperty("DropPreview")&&"function"===typeof qb.DropPreview?qb.DropPreview:qb.DropPreview=function(Q){Q&&
Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"clear",value:function(){this.stopped=!0;this.remove()}},{key:"step",value:function(){var Q=this,za;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ta){if(1==Ta.nextAddress)return za=rb.easings.inOutQuad,Ta.yield(Q.animate({opacity:.5,duration:(Q.pulseDuration-10)/2,easing:za}),2);if(3!=Ta.nextAddress)return Ta.yield(Q.animate({opacity:1,duration:(Q.pulseDuration-
10)/2,easing:za}),3);Q.stopped||Q.step();Ta.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropPreview"}},{key:"properties",get:function(){return{isHaloItem:{readOnly:!0,get:function(){return!0}},epiMorph:{readOnly:!0,get:function(){return!0}},fill:{defaultValue:rb.Color.orange.withA(.3)},hasFixedPosition:{defaultValue:!0},borderColor:{defaultValue:rb.Color.orange},borderWidth:{defaultValue:2},borderStyle:{defaultValue:"dashed"},pulseDuration:{defaultValue:2E3}}}}],
qb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:22409,end:23245})})(rb.Morph);Gd=Ka("F",function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ia=qb.hasOwnProperty("FlexLayoutHalo")&&"function"===typeof qb.FlexLayoutHalo?qb.FlexLayoutHalo:qb.FlexLayoutHalo=function(Q){Q&&
Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"handleDrop",value:function(Q){}},{key:"previewDrop",value:function(Q){var za=this;0<this.previews.length||(this.previews=Q.map(function(Ta){return za.container.addMorph({type:rb.DropPreview,position:za.container.localize(za.world().firstHand.position),extent:Ta.bounds().extent()})}),this.previews.forEach(function(Ta){Ta.step()}))}},{key:"remove",value:function(){Dc._get(Object.getPrototypeOf(Ia.prototype),
"remove",this).call(this);this.removePreviews();return this}},{key:"removePreviews",value:function(){this.previews.forEach(function(Q){return Q.clear()})}},{key:"onDrop",value:function(Q){this.removePreviews();Q.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateAutoResizePolicy",value:function(Q){Q&&(this.originalExtent=this.container.extent);this.target.autoResize=Q;Q||(this.container.extent=this.originalExtent||
this.container.extent);this.alignWithTarget()}},{key:"updateResizeSubmorphsPolicy",value:function(Q){this.target.resizeSubmorphs=Q;this.alignWithTarget()}},{key:"updateAlignmentPolicy",value:function(Q){this.target.align=Q}},{key:"updateDirectionPolicy",value:function(Q){this.target.direction=Q}},{key:"updateSpacing",value:function(Q){this.target.spacing=Q}},{key:"optionControls",value:function(){var Q=this.target,za=Q.possibleAlignValues?{fill:rb.Color.transparent,layout:new rb.HorizontalLayout({spacing:3,
direction:"centered",align:"center"}),submorphs:[{type:"label",value:"align: "},new rb.DropDownSelector({name:"alignment",borderRadius:2,padding:3,selectedValue:Q.align,values:Q.possibleAlignValues})]}:null,Ta=Q.possibleDirectionValues?{fill:rb.Color.transparent,layout:new rb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"direction: "},new rb.DropDownSelector({name:"direction",borderRadius:2,padding:3,selectedValue:Q.direction,values:Q.possibleDirectionValues})]}:
null,xb=new rb.NumberWidget({fill:rb.Color.white,borderWidth:1,borderRadius:4,padding:rb.rect(5,4,0,0),borderColor:rb.Color.gray,min:0,number:Q.spacing,unit:"px"}),Yb=new rb.LabeledCheckBox({name:"autoResize",label:"Resize Container",alignCheckBox:"right",fill:rb.Color.transparent,checked:Q.autoResize});Q=new rb.LabeledCheckBox({label:"Resize Submorphs",name:"resizeSubmorphs",alignCheckBox:"right",fill:rb.Color.transparent,checked:Q.resizeSubmorphs});rb.connect(xb,"update",this,"updateSpacing");rb.connect(Yb,
"checked",this,"updateAutoResizePolicy");rb.connect(Q,"checked",this,"updateResizeSubmorphsPolicy");za&&rb.connect(za.submorphs[1],"selectedValue",this,"updateAlignmentPolicy");Ta&&rb.connect(Ta.submorphs[1],"selectedValue",this,"updateDirectionPolicy");return[Yb,Q].concat($jscomp.arrayFromIterable([za,Ta].filter(Boolean)),[{fill:rb.Color.transparent,layout:new rb.HorizontalLayout,submorphs:[{type:"label",value:"Submorph Spacing",fontColor:rb.Color.gray.darker(),padding:rb.rect(0,5,5,5)},xb]}])}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FlexLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:rb.Color.transparent},halosEnabled:{defaultValue:!1},previews:{defaultValue:[]}}}}],qb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:23254,end:27441})}(rb.LayoutHalo));rb.FlexLayoutHalo=Gd;rb.FlexLayoutHalo=Gd;rb.FlexLayoutHalo=Gd;Cb=Ka("c",function(yb){var qb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ia=qb.hasOwnProperty("ProportionalLayoutHalo")&&"function"===typeof qb.ProportionalLayoutHalo?qb.ProportionalLayoutHalo:qb.ProportionalLayoutHalo=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Dc(Ia,yb,[{key:"handleDrop",
value:function(Q){}},{key:"onDrop",value:function(Q){Q.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateSubmorphProportionalLayoutSettings",value:function(Q){var za={};this.target.changeSettingsFor(Q.submorph,(za[Q.axis]=Q.policy,za),!0)}},{key:"onSubmorphSettingsDragStart",value:function(Q,za){var Ta=this;Q.stop();var xb=this.target.settingsFor(za);za="";for(var Yb in xb)za+=Yb+":"+xb[Yb]+" ";var Ac=rb.morph({type:"label",
value:za,isLayoutable:!1});Ac.wantsToBeDroppedOn=function(mc){return Ta.target.layoutableSubmorphs.includes(mc)};Ac.onBeingDroppedOn=function(mc,qd){Ac.remove();if(mc=Ta.target.layoutableSubmorphs.includes(qd)?qd:Q.world.morphsContainingPoint(Q.hand.position).find(function(zd){return Ta.target.layoutableSubmorphs.includes(zd)}))Ta.updateSubmorphProportionalLayoutSettings({policy:xb.x,axis:"x",submorph:mc}),Ta.updateSubmorphProportionalLayoutSettings({policy:xb.y,axis:"y",submorph:mc}),mc.show(),$world.setStatusMessage("layout settings applied")};
Q.hand.grab(Ac)}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var Q=this,za,Ta,xb,Yb,Ac,mc,qd,zd,Ee,se,ke,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(we){switch(we.nextAddress){case 1:return za=Q.target.layoutableSubmorphs,Q.env.eventDispatcher.isKeyPressed("Shift")?(xb=za.map(function(ue){return{isListItem:!0,string:String(ue),value:ue}}),we.yield($world.listPrompt("Select morph",xb,{requester:Q,onSelection:function(ue){return ue.show()}}),5)):we.yield(rb.InteractiveMorphSelector.selectMorph(Q.world(),
Q,function(ue){return za.includes(ue)}),4);case 4:Ta=we.yieldResult;we.jumpTo(3);break;case 5:Yb=we.yieldResult,Ac=$jscomp.makeIterator(Yb.selected),Ta=Ac.next().value;case 3:if(!Ta)return we.return();mc=Q.state.popover.get("controlContainer");qd=mc.getAllNamed(/submorph config/);zd=["move","resize","scale","fixed"];Ee=Q.target.settingsFor(Ta);qd.length||(mc.submorphs=[].concat($jscomp.arrayFromIterable(mc.submorphs),[{name:"submorph config X-Axis policy",position:rb.pt(0,Q.height),fill:rb.Color.transparent,
layout:new rb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph X-Axis policy: "},new rb.DropDownSelector({name:"x-axis policy selector",borderRadius:2,padding:3,selectedValue:Ee.x,values:zd})]},{name:"submorph config Y-Axis policy",position:rb.pt(0,Q.height),fill:rb.Color.transparent,layout:new rb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph Y-Axis policy: "},new rb.DropDownSelector({name:"y-axis policy selector",
borderRadius:2,padding:3,selectedValue:Ee.y,values:zd})]},rb.morph({position:rb.pt(0,Q.height+20),draggable:!0,name:"dragme",type:"label",value:"drag me to copy"})]));se=mc.getSubmorphNamed("x-axis policy selector");ke=mc.getSubmorphNamed("y-axis policy selector");w=mc.getSubmorphNamed("dragme");rb.disconnect(se,"selectedValue",Q,"updateSubmorphProportionalLayoutSettings");rb.disconnect(ke,"selectedValue",Q,"updateSubmorphProportionalLayoutSettings");se.selectedValue=Ee.x;ke.selectedValue=Ee.y;rb.connect(w,
"onDragStart",Q,"onSubmorphSettingsDragStart",{updater:function(ue,Od){return ue(Od,Ta)},varMapping:{submorph:Ta}});rb.connect(se,"selectedValue",Q,"updateSubmorphProportionalLayoutSettings",{converter:function(ue){return{policy:ue,axis:"x",submorph:Ta}},varMapping:{submorph:Ta}});rb.connect(ke,"selectedValue",Q,"updateSubmorphProportionalLayoutSettings",{converter:function(ue){return{policy:ue,axis:"y",submorph:Ta}},varMapping:{submorph:Ta}});we.jumpToEnd()}})}},{key:"optionControls",value:function(Q){this.state.popover=
Q;var za=this.target;Q=new rb.LabeledCheckBox({name:"x-axis",label:"X-Axis",alignCheckBox:"right",fill:rb.Color.transparent,checked:za.xAxisEnabled});za=new rb.LabeledCheckBox({name:"y-axis",label:"Y-Axis",alignCheckBox:"right",fill:rb.Color.transparent,checked:za.yAxisEnabled});var Ta=new rb.Button({name:"modify submorph settings button",label:[].concat($jscomp.arrayFromIterable(rb.Icon.textAttribute("crosshairs")),["\u00a0Change submorph settings"])});rb.connect(Q,"checked",this,"updateXAxisEnabled");
rb.connect(za,"checked",this,"updateYAxisEnabled");rb.connect(Ta,"fire",this,"chooseSubmorphToChangeLayoutSettings");return[Ta]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:rb.Color.transparent}}}}],qb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:27450,end:33182})}(rb.LayoutHalo));rb.ProportionalLayoutHalo=Cb;rb.ProportionalLayoutHalo=Cb;rb.ProportionalLayoutHalo=Cb;var Md=lively.FreezerRuntime.recorderFor("lively.halos/index.js");Md.Halo=hc;Md.MorphHighlighter=gb;Md.InteractiveMorphSelector=Oc;Md.StatusMessage=ra;Md.StatusMessageForMorph=Ca;Md.show=Ea;Md.showConnector=ua;Md.ProportionalLayoutHalo=Cb;Md.GridLayoutHalo=cb;Md.FlexLayoutHalo=Gd;Md.showAndSnapToGuides=Fb;
Md.removeSnapToGuidesOf=Nb;Md.StatusMessage=ra;Md.StatusMessage=ra;Md.StatusMessageForMorph=Ca;Md.StatusMessageForMorph=Ca;Md.show=Ea;Md.show=Ea;Md.showConnector=ua;Md.showConnector=ua;Md.Halo=hc;Md.Halo=hc;Md.MorphHighlighter=gb;Md.MorphHighlighter=gb;Md.InteractiveMorphSelector=Oc;Md.InteractiveMorphSelector=Oc;Md.ProportionalLayoutHalo=Cb;Md.ProportionalLayoutHalo=Cb;Md.GridLayoutHalo=cb;Md.GridLayoutHalo=cb;Md.FlexLayoutHalo=Gd;Md.FlexLayoutHalo=Gd;Md.showAndSnapToGuides=Fb;Md.showAndSnapToGuides=
Fb;Md.removeSnapToGuidesOf=Nb;Md.removeSnapToGuidesOf=Nb;ra=Object.freeze({__proto__:null,StatusMessage:ra,StatusMessageForMorph:Ca,show:Ea,showConnector:ua,Halo:hc,MorphHighlighter:gb,InteractiveMorphSelector:Oc,ProportionalLayoutHalo:Cb,GridLayoutHalo:cb,FlexLayoutHalo:Gd,showAndSnapToGuides:Fb,removeSnapToGuidesOf:Nb,SvgStyleHalo:void 0});Ka("i",ra);Ka({_:void 0,d:void 0})}}});