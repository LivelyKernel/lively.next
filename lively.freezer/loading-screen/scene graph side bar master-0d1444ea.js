System.register("./__root_module__-884b54f8.js kld-intersections ./index-9ec474a0.js ./index-27557bc7.js ./editor-plugin-bcd9fa99.js ./editor-plugin-05c33777.js ./index-4d2f3cd3.js ./index-ef56f8ef.js ./index-55958c1b.js".split(" "),function(){var za,cb,mb,Pb,tb,Fc,vc,Qc,mc,ic,zc,Dc,Gd,Hd,Zd,xc,od,qb,kc,Uc,tc,cd,td,nb,cc,wc,dc,Nc,$a,Xa,Gb,ub;return{setters:[function(db){za=db.i;cb=db.M;mb=db.t;Pb=db.e;tb=db.b;Fc=db.f;vc=db.c;Qc=db.o;mc=db.C;ic=db.$;zc=db.a;Dc=db.m;Gd=db.bG;Hd=db.J;Zd=db.bD;xc=
db.bB;od=db.I;qb=db.af;kc=db.R;Uc=db.bH;tc=db._;cd=db.ax;td=db.ac;nb=db.a0;cc=db.p;wc=db.Z;dc=db.d;Nc=db.bI},function(){},function(db){$a=db.e;Xa=db.s;Gb=db.I},function(){},function(db){ub=db.I},function(){},function(){},function(){},function(){}],execute:function(){function db(U){var ra=U.sourceObj,xa=U.targetObj;ra.isMorph&&xa.isMorph?(ra.show(),xa.show(),sa.showConnector&&sa.showConnector(ra,xa)):sa.show(String(U))}function Xb(U){var ra=U.sourceObj,xa=U.sourceAttrName,pa=U.targetObj,ea=U.targetMethodName,
bb=U.getConverter();U=U.getUpdater();return sa.printConnectionElements(ra,xa,pa,ea,bb,U)}function Fa(U,ra,xa,pa,ea,bb){U="/* global connect, source, target */\nconnect(source, '"+ra+"', target, '"+pa+"'";if(ea||bb)U+=", {\n";ea&&(U+="  converter: "+ea);ea&&bb&&(U+=",");ea&&(U+="\n");bb&&(U+="  updater: "+bb+"\n");if(ea||bb)U+="}";return U+");"}function sb(U,ra){var xa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pa){if(1==pa.nextAddress)return pa.yield(sa.InteractiveMorphSelector.selectMorph(),
2);xa=pa.yieldResult;return pa.return(xa?sa.interactiveConnectGivenSourceAndTarget(U,ra,xa):null)})}function Ya(U,ra,xa,pa){var ea,bb,Aa,Rb,Gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ab){switch(Ab.nextAddress){case 1:ea=xa&&xa.world().targetDataBindings(xa);bb=U.world();if(!ea||!ea.length)return bb.setStatusMessage("connect canceled"),Ab.return();if(ra){Ab.jumpTo(2);break}Aa=[{isListItem:!0,string:"[Enter custom attribute..]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(sa.arr.flatten(U.world().targetDataBindings(U)).map(function(Hc){return{isListItem:!0,
string:Hc.signature||Hc.name,value:Hc}})));return Ab.yield(bb.listPrompt(["Select Source Attribute\n",{},"Choose the attribute of the morph that is supposed to invoke the connection. This can be a method, property or a custom signal that is invoked upon the morph.",{paddingTop:"10px",fontSize:14,textAlign:"left",fontWeight:"normal"}],Aa,{filterable:!0}),3);case 3:ra=Ab.yieldResult;if("canceled"==ra.status)return Ab.return();ra=ra.selected[0];ra=ra.custom?"sourceAttribute":ra.name;case 2:return Rb=
[{isListItem:!0,string:"[Enter custom attribute...]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(sa.arr.flatten(ea).map(function(Hc){return{isListItem:!0,value:Hc,string:Hc.signature||Hc.name}}))),Ab.yield(bb.listPrompt(["Select Target Attribute\n",{},"Choose the attribute of the morph that is supposed to invoked once the connection is triggered. This can be either a method or a property of the morph. When selecting a property, keep in mind that the value of the source attribute will be assigned to the property or passed to the method as an argument.",
{fontSize:14,textAlign:"left",fontWeight:"normal",paddingTop:"10px"}],Rb,{filterable:!0}),4);case 4:Gc=Ab.yieldResult;if("canceled"==Gc.status)return Ab.return();Gc=Gc.selected[0];return Ab.yield(sa.interactivelyEvaluateConnection({sourceObj:U,sourceAttr:ra,targetObj:xa,targetAttr:Gc.custom?"targetAttribute":Gc.name,onConnect:pa,prompt:"Edit and confirm connection:"}),0)}})}function pb(U,ra,xa,pa){ra=void 0===ra?"confirm connection":ra;var ea,bb,Aa,Rb,Gc,Ab,Hc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fb){ea=
U;bb=ea.sourceObj;Aa=ea.sourceAttrName;Rb=ea.targetObj;Gc=ea.targetMethodName;Ab=U.getConverter();Hc=U.getUpdater();return fb.return(sa.interactivelyEvaluateConnection({sourceObj:bb,sourceAttr:Aa,targetObj:Rb,targetAttr:Gc,converter:Ab,updater:Hc,prompt:ra,highlight:xa,onConnect:pa}))})}function $b(U,ra,xa,pa,ea){pa=void 0===pa?{}:pa;ea=sa.rect(0).sides.concat(sa.rect(0).corners);xa=xa||new sa.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:sa.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:sa.Color.transparent,
nativeCursor:"auto"},end:{fill:sa.Color.orange}}},pa,{hasFixedPosition:!0}));xa.startPoint.attachTo(U,"rightCenter");ra.isMorph?(pa=ra.globalBounds().partNameNearest(ea,U.globalPosition),U.globalPosition.equals(ra.globalBounds().partNamed(pa))&&ra.globalBounds().partNameNearest(sa.arr.without(ea,pa),U.globalPosition),xa.endPoint.attachTo(ra,"leftCenter")):(ea=U.globalBounds().topRight().addPt(sa.pt(100,0)),ra=sa.morph({type:"label",value:ra.toString(),styleClasses:["Tooltip"],padding:sa.rect(8,4)}).openInWorld(ea),
ra.position=U.world().bounds().translateForInclusion(ra.bounds()).topLeft(),sa.once(xa,"remove",ra,"remove"),xa.endPoint.attachTo(ra,"leftCenter"));return xa}function lc(U){var ra,xa,pa,ea,bb,Aa,Rb,Gc,Ab,Hc,fb,ud,je,rc,gb,Id,hb,Za,ua,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(la){switch(la.nextAddress){case 1:ra=U;xa=ra.sourceObj;pa=ra.sourceAttr;ea=ra.targetObj;bb=ra.targetAttr;Aa=ra.converter;Rb=ra.updater;Gc=ra.prompt;Ab=void 0===ra.highlight?!0:ra.highlight;Hc=ra.onConnect;
fb="lively://lively.bindings-interactive-connect/x"+xa.id;ud={context:window,format:"esm",targetModule:fb,classTransform:sa.classToFunctionTransform};je=sa.printConnectionElements(xa,pa,ea,bb,Aa,Rb);ea.isMorph&&xa.isMorph&&(rc=ea.propertiesAndPropertySettings().properties[bb]||{type:typeof ea[bb]},gb=rc.type,Id=xa.propertiesAndPropertySettings().properties[pa]||{type:typeof xa[pa]},hb=Id.type,hb!==gb&&(Gc=["Edit and confirm connection:\n",{},"Source: ",{fontSize:14,fontWeight:"normal"},xa.toString(),
{fontSize:14,fontWeight:"normal",fontStyle:"italic"},"\nTarget: ",{fontSize:14,fontWeight:"normal"},ea.toString(),{fontSize:14,fontWeight:"normal",fontStyle:"italic"}]));Za={};Object.assign(lively.modules.module(fb).recorder,(Za.source=xa,Za.target=ea,Za.connect=sa.connect,Za.once=sa.once,Za[pa]=xa[pa],Za));if(!Gc){ua=je;la.jumpTo(2);break}return la.yield($world.editPrompt(Gc,{input:je,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:ud,animated:!1}),
3);case 3:if(ua=la.yieldResult,!ua)return $world.setStatusMessage("connect canceled"),la.return();case 2:return la.yield(lively.vm.runEval(ua,ud),4);case 4:J=la.yieldResult;if(J.isError)return $world.logError(J.value),la.return(lc({sourceObj:xa,sourceAttr:pa,targetObj:ea,targetAttr:bb,converter:Aa,updater:Rb,prompt:"confirm connection",highlight:Ab,onConnect:Hc}));Ab&&($world.setStatusMessage("connected!",sa.Color.green),sa.interactivelyShowConnection(J.value));"function"===typeof Hc&&Hc(J);la.jumpToEnd()}})}
var Jb=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");Jb.Inspector=ub;var Cb=function(U){var ra=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),xa=ra.hasOwnProperty("ProtoInspector")&&"function"===typeof ra.ProtoInspector?ra.ProtoInspector:ra.ProtoInspector=function(pa){pa&&pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return za(xa,U,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProtoInspector"}},
{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],ra,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoInspector",version:"0.1.1-0"}}},{start:68,end:210})}(Jb.Inspector);Cb=Jb.ProtoInspector;Jb.default=Cb;var Bb=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");Bb.Morph=cb;Bb.touchInputDevice=
mb;Bb.easings=Pb;Bb.pt=tb;Bb.fun=Fc;Bb.connect=vc;Jb=function(U){var ra=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),xa=ra.hasOwnProperty("MorphicSideBar")&&"function"===typeof ra.MorphicSideBar?ra.MorphicSideBar:ra.MorphicSideBar=function(pa){pa&&pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return za(xa,U,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"onWorldResize",value:function(pa){pa=void 0===
pa?!0:pa;if(this.respondsToVisibleWindow){var ea=$world.visibleBounds(),bb=navigator.standalone&&Bb.touchInputDevice?25:0;this.height=ea.height-bb;this.top=bb+ea.top();bb=this.get("horizontal resizer");bb.height=this.height;bb.top=0;pa&&(this.visible?this.topLeft=ea.topLeft():this.topRight=ea.topLeft())}}},{key:"switchMode",value:function(pa){"inspector"==pa&&this.showInspector();"connections"==pa&&this.showConnections()}},{key:"showInspector",value:function(){this.get("inspector").visible=!0;this.get("connections tree").visible=
!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(pa){var ea=this,bb,Aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rb){switch(Rb.nextAddress){case 1:bb=$world.visibleBounds();Aa=navigator.standalone&&Bb.touchInputDevice?25:0;ea.height=bb.height-Aa;ea.top=Aa+bb.top();if(pa)return $world.addMorph(ea,$world.get("lively top bar")),ea.topRight=bb.topLeft(),ea.attachToWorld($world),ea.visible=
!0,Rb.yield(ea.whenRendered(),5);ea.detachFromWorld($world);return Rb.yield(ea.animate({opacity:0,topRight:bb.topLeft(),duration:300}),4);case 4:ea.visible=!1;ea.remove();Rb.jumpTo(0);break;case 5:return ea.onWorldResize(!1),ea.get("scene graph").adjustProportions(),Rb.yield(ea.animate({opacity:1,easing:Bb.easings.outCirc,topLeft:bb.topLeft(),duration:300}),6);case 6:ea.get("scene graph").refresh(),Rb.jumpToEnd()}})}},{key:"attachToWorld",value:function(pa){Bb.connect(pa,"onChange",this,"onHierarchyChange",
{garbageCollect:!0});Bb.connect(pa,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});Bb.connect(pa,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(pa){var ea=this;pa.attributeConnections.forEach(function(bb){bb.targetObj===ea&&bb.disconnect()})}},{key:"selectNode",value:function(pa){this.getSubmorphNamed("scene graph").selectMorphInTarget(pa);this.getSubmorphNamed("connections tree").inspectConnectionsOf(pa)}},{key:"onHierarchyChange",value:function(pa){var ea=
this,bb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Aa){if("addMorphAt"===pa.selector||"removeMorph"===pa.selector||"name"===pa.prop){bb=ea._sceneGraph||(ea._sceneGraph=ea.getSubmorphNamed("scene graph"));if(!bb||!bb.owner.visible||pa.target&&pa.target.isHand||pa.target&&bb.ignoreMorph(pa.target)||pa.args&&!pa.args[0].isHalo&&bb.ignoreMorph(pa.args[0])||pa.target.ownerChain().find(function(Rb){return bb.ignoreMorph(Rb)}))return Aa.return();Bb.fun.debounceNamed("scene-graph-update",
50,function(){return bb.refresh()})()}Aa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],ra,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-76"}}},{start:226,end:3668})}(Bb.Morph);
Jb=Bb.MorphicSideBar;Bb.default=Jb;var sa=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");sa.interactivelyShowConnection=db;sa.printConnection=Xb;sa.printConnectionElements=Fa;sa.interactiveConnectGivenSource=sb;sa.interactiveConnectGivenSourceAndTarget=Ya;sa.interactivelyReEvaluateConnection=pb;sa.visualizeConnection=$b;sa.interactivelyEvaluateConnection=lc;sa.connect=vc;sa.once=Qc;sa.Color=mc;sa.rect=ic;sa.pt=tb;sa.arr=zc;sa.morph=Dc;sa.Leash=Gd;sa.showConnector=$a;sa.show=Xa;sa.InteractiveMorphSelector=
Gb;sa.classToFunctionTransform=Hd;sa.interactivelyShowConnection=db;sa.interactivelyShowConnection=db;sa.printConnection=Xb;sa.printConnection=Xb;sa.printConnectionElements=Fa;sa.printConnectionElements=Fa;sa.interactiveConnectGivenSource=sb;sa.interactiveConnectGivenSource=sb;sa.interactiveConnectGivenSourceAndTarget=Ya;sa.interactiveConnectGivenSourceAndTarget=Ya;sa.interactivelyReEvaluateConnection=pb;sa.interactivelyReEvaluateConnection=pb;sa.visualizeConnection=$b;sa.visualizeConnection=$b;sa.interactivelyEvaluateConnection=
lc;sa.interactivelyEvaluateConnection=lc;var Ta=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");Ta.Tree=Zd;Ta.TreeData=xc;Ta.morph=Dc;Ta.Icon=od;Ta.HorizontalLayout=qb;Ta.easings=Pb;Ta.Morph=cb;Ta.Color=mc;Ta.Rectangle=kc;Ta.rect=ic;Ta.pt=tb;Ta.connect=vc;Ta.noUpdate=Uc;Ta.disconnect=tc;Ta.disconnectAll=cd;Ta.once=Qc;Ta.arr=zc;Ta.num=td;Ta.fun=Fc;Ta.tree=nb;Ta.promise=cc;Ta.ConnectionHalo=_missingExportShim;Ta.getClassName=wc;Jb=function(U){var ra=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),
xa=ra.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof ra.InteractiveTreeContainer?ra.InteractiveTreeContainer:ra.InteractiveTreeContainer=function(pa){pa&&pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return za(xa,U,[{key:"onChildRemoved",value:function(pa){}},{key:"onChildAdded",value:function(pa){}},{key:"toggleSelected",value:function(pa){if(this.tree){var ea=this.tree,bb=ea.selectionFontColor,Aa=ea.nonSelectionFontColor;
this.submorphs.filter(function(Rb){return!Rb._isControlElement&&Rb.styleClasses.includes("Label")}).forEach(function(Rb){Rb.fontColor=pa?bb:Aa})}}},{key:"onGrab",value:function(pa){var ea=this.tree,bb=this.node;this.fill=Ta.Color.gray.withA(.5);this.fontColor=ea.selectionFontColor;this.opacity=.8;za._get(Object.getPrototypeOf(xa.prototype),"onGrab",this).call(this,pa);bb&&(this.toggleSelected(!1),ea.collapse(bb),ea.treeData.parentNode(bb).container.onChildRemoved(this),this._data=ea.treeData.remove(bb),
bb.container.target.remove(),ea.update(!0))}},{key:"wantsToBeDroppedOn",value:function(pa){this.showPreviewOn(pa);return!0}},{key:"showPreviewOn",value:function(pa){if(pa.isContainer)var ea=pa.tree;pa.isTree&&(ea=pa);ea&&ea.showDropPreviewFor&&ea.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(pa){var ea=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return ea.tree.treeData.add(pa._data,ea.node,ea.node.children[0]),ea.tree.uncollapse(ea.node),
ea.tree.treeData.remove(ea.tree._previewNode),bb.yield(ea.tree.whenRendered(),2);ea.tree.update(!0);ea.onChildAdded(pa);bb.jumpToEnd()})}},{key:"onBeingDroppedOn",value:function(pa,ea){var bb=this;debugger;this.tree._dropInProgress=!0;za._get(Object.getPrototypeOf(xa.prototype),"onBeingDroppedOn",this).call(this,pa,ea);pa=function(){bb.fill=Ta.Color.gray.withA(.5);bb.opacity=1;bb.tree._dropInProgress=!1;bb.tree.refresh()};ea.isTree?ea.insertAtPlaceholder(this).then(pa):ea.isContainer?ea.insertAsChild(this).then(pa):
pa()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:Ta.Color.transparent},isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var pa=this,ea=this.tree.treeData;return ea&&ea.asList().find(function(bb){return bb.container===pa})}}}}}],ra,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"InteractiveTree",version:"0.1.1-1105"}}},{start:498,end:2975})}(Ta.Morph);Ta.InteractiveTreeContainer=Jb;Ta.InteractiveTreeContainer=Jb;Ta.InteractiveTreeContainer=Jb;Jb=function(U){var ra=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),xa=ra.hasOwnProperty("InteractiveTreeData")&&"function"===typeof ra.InteractiveTreeData?ra.InteractiveTreeData:ra.InteractiveTreeData=function(pa){pa&&pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return za(xa,U,[{key:"display",value:function(pa){return[pa.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(pa){return pa.isCollapsed}},{key:"collapse",value:function(pa,ea){pa.isCollapsed=ea}},{key:"getChildren",value:function(pa){var ea=this;return pa.isLeaf?null:pa.children.filter(function(bb){return bb&&(ea.filterActive?bb.visible:!0)})}},{key:"isLeaf",value:function(pa){var ea=this;return!pa.children||0==pa.children.filter(function(bb){return bb&&(ea.filterActive?
bb.visible:!0)}).length}},{key:"add",value:function(pa,ea,bb){ea=void 0===ea?this.root:ea;ea.children||(ea.children=[]);bb?Ta.arr.pushAt(ea.children,pa,ea.children.indexOf(bb)):ea.children.push(pa);ea.isLeaf=!1}},{key:"replace",value:function(pa,ea){var bb=this.parentNode(pa);pa=bb.children.indexOf(pa);bb.children[pa]=ea}},{key:"next",value:function(pa){var ea=this.parentNode(pa);return ea&&ea.children[ea.children.indexOf(pa)+1]}},{key:"isBefore",value:function(pa,ea){this.next(pa)===ea}},{key:"isAfter",
value:function(pa,ea){this.next(ea)===pa}},{key:"addBefore",value:function(pa,ea){this.add(pa,this.parentNode(ea),ea)}},{key:"addAfter",value:function(pa,ea){var bb=this.parentNode(ea);ea=bb.children.indexOf(ea)+1;this.add(pa,bb,bb.children[ea])}},{key:"remove",value:function(pa){var ea=this.parentNode(pa);if(ea)return Ta.arr.remove(ea.children,pa),ea.children==[]&&(ea.children=null),pa}},{key:"filter",value:function(pa,ea){ea=void 0===ea?1:ea;var bb=this,Aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rb){if(1==
Rb.nextAddress)return Rb.yield(bb.uncollapseAll(function(Gc,Ab){return Ab<ea+1}),2);Aa=bb.filterActive;bb.filterActive=!1;bb.asListWithIndexAndDepth(!1).reverse().forEach(function(Gc){var Ab=Gc.node;if(0==Gc.depth)return Ab.visible=!0;Ab.visible=pa(Ab);Ab.visible||Ab.isCollapsed||!Ab.children.find(function(Hc){return Hc.visible})?Ab.container.opacity=1:(Ab.visible=!0,Ab.container.opacity=.5);return Ab.visible});bb.filterActive=Aa;Rb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeData"}}],
ra,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1105"}}},{start:2984,end:5447})}(Ta.TreeData);Ta.InteractiveTreeData=Jb;Ta.InteractiveTreeData=Jb;Ta.InteractiveTreeData=Jb;Jb=function(U){var ra=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),xa=ra.hasOwnProperty("InteractiveTree")&&
"function"===typeof ra.InteractiveTree?ra.InteractiveTree:ra.InteractiveTree=function(pa){pa&&pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return za(xa,U,[{key:"update",value:function(pa){var ea=this;za._get(Object.getPrototypeOf(xa.prototype),"update",this).call(this,pa);this.treeData&&this.relayoutContainers();pa&&this.embeddedMorphs.forEach(function(bb){bb.isContainer&&(bb.fill=Ta.Color.transparent,bb.fontFamily=ea.fontFamily,
bb.fontSize=ea.fontSize)})}},{key:"onDrop",value:function(pa){za._get(Object.getPrototypeOf(xa.prototype),"onDrop",this).call(this,pa);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(pa){}},{key:"onDropHoverUpdate",value:function(pa){}},{key:"onDropHoverOut",value:function(pa){}},{key:"onHoverOut",value:function(pa){var ea=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){za._get(Object.getPrototypeOf(xa.prototype),"onHoverOut",ea).call(ea,
pa);ea._previewNode&&ea._previewNode.container.world()&&ea.treeData.remove(ea._previewNode);ea.resetContainerSelection();ea.update(!0);bb.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(pa){var ea=this,bb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Aa){if(1==Aa.nextAddress)return bb=ea.treeData.parentNode(ea._previewNode),ea.treeData.replace(ea._previewNode,pa._data),ea.treeData.remove(ea._previewNode),Aa.yield(ea.whenRendered(),2);ea.update(!0);bb.container.onChildAdded(pa);
Aa.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var pa=this;if(!this._scrollingUp){this._scrollingUp=!0;var ea=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return pa._scrollingUp&&0<pa.scroll.y?bb.yield(pa.animate({scroll:pa.scroll.subXY(0,30),duration:300,easing:Ta.easings.linear}),3):(pa._scrollingUp=!1,bb.jumpTo(0));ea();bb.jumpToEnd()})};ea()}}},{key:"scrollDownSlowly",value:function(){var pa=this;if(!this._scrollingDown){this._scrollingDown=
!0;var ea=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return pa._scrollingDown&&pa.scroll.y<pa.scrollExtent.y-pa.height?bb.yield(pa.animate({scroll:pa.scroll.addXY(0,30),duration:300,easing:Ta.easings.linear}),3):(pa._scrollingDown=!1,bb.jumpTo(0));ea();bb.jumpToEnd()})};ea()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(pa){pa.isContainer&&
(pa.fill=Ta.Color.transparent)})}},{key:"showDropPreviewFor",value:function(pa){var ea=this;pa=this.localize(pa.globalBounds().center());var bb=this.textPositionFromPoint(pa),Aa=this.treeData.asListWithIndexAndDepth(function(ud){ud=ud.node;return ud!=ea._previewNode&&ud.container.world()}),Rb=(Aa.find(function(ud){return ud.i-1===bb.row})||{}).node,Gc=Rb&&Rb.container,Ab=this.ensurePlaceholder(),Hc=!!Ab.container.world(),fb=pa.subPt(this.scroll).subPt(this.scrollbarOffset);10>fb.y?this.scrollUpSlowly():
fb.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!Gc){if(Aa.length>bb.row||Ta.arr.last(this.treeData.root.children)===Ab)return;this.treeData.remove(Ab);this.treeData.add(Ab);this.update(!0)}if(Gc){Aa=this.textLayout.boundsFor(this,bb);if(4>Math.abs(Aa.top()-pa.y)){if(this.treeData.isBefore(Ab,Rb))return;this.treeData.remove(Ab);this.treeData.addBefore(Ab,Rb)}else if(4>Math.abs(Aa.bottom()-pa.y)&&(Rb.isCollapsed||this.treeData.isLeaf(Rb))){if(this.treeData.isAfter(Ab,
Rb))return;this.treeData.remove(Ab);this.treeData.addAfter(Ab,Rb)}else{Gc.fill=Ta.Color.gray;if(!Hc)return;this.treeData.remove(Ab)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var pa=Ta.pt(this.width-100,this.document.getLine(0).height);this._previewNode||(this._previewNode={container:Ta.morph({acceptsDrops:!1,reactsToPointer:!1,fill:Ta.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=pa;return this._previewNode}},{key:"relayoutContainers",
value:function(){var pa=this;this.charBoundsFromTextPosition({row:0,column:6});this.textLayout.charBoundsOfRow(this,0).map(function(ea){return ea.height});this.treeData.asListWithIndexAndDepth().forEach(function(ea){var bb=ea.node;ea=ea.i;bb.container.nativeCursor="grab";bb.container.width=pa.width-25-bb.container.left;bb.container.toggleSelected&&bb.container.toggleSelected(ea==pa.selectedIndex)});this.anchors.forEach(function(ea){return ea.position=ea.position})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"InteractiveTree"}}],ra,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1105"}}},{start:5456,end:10830})}(Ta.Tree);Ta.InteractiveTree=Jb;Ta.InteractiveTree=Jb;Ta.InteractiveTree=Jb;Jb=function(U){var ra=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),xa=ra.hasOwnProperty("SceneGraphTree")&&
"function"===typeof ra.SceneGraphTree?ra.SceneGraphTree:ra.SceneGraphTree=function(pa){pa&&pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return za(xa,U,[{key:"beforePublish",value:function(){this.submorphs=[];this.reset()}},{key:"selectMorphInTarget",value:function(pa){var ea=this.treeData.asList().find(function(bb){return bb.container.target===pa});ea&&this.selectedNode!=ea&&this.selectPath(this.treeData.pathOf(ea))}},{key:"onLoad",
value:function(){var pa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){if(1==ea.nextAddress)return ea.yield(pa.whenRendered(),2);if(3!=ea.nextAddress){if(pa.ownerChain().find(function(bb){return bb.isComponent}))return ea.return();pa.submorphs=[];return ea.yield(pa.whenRendered(),3)}pa.get("inspector").makeEditorVisible(!0);pa.get("inspector").makeEditorVisible(!1);pa.setTarget($world);ea.jumpToEnd()})}},{key:"adjustProportions",value:function(pa){pa=(pa?pa.state.dragDelta:{y:0}).y;
var ea=this.get("inspector"),bb=this.get("scene graph resizer"),Aa=this.get("mode selector"),Rb=this.get("connections tree");this.height+=pa;ea.height-=pa;Rb.height-=pa;bb.top=this.bottom;bb.left=0;Aa.top=bb.bottom;Rb.top=ea.top=Aa.bottom+5}},{key:"reset",value:function(){var pa=this;this.treeData=new Ta.InteractiveTreeData({children:[],container:Ta.morph()});this.get("inspector").targetObject={};this.selectedNode=null;this.anchors.filter(function(ea){return null==ea.id}).forEach(function(ea){return pa.removeAnchor(ea)})}},
{key:"setTarget",value:function(pa){this.target=pa;this.treeData=this.getTreeFromSubmorphHierarchy(pa);this.uncollapse(this.treeData.root)}},{key:"isNodeOutOfSync",value:function(pa){var ea=this;if(pa===this._previewNode)return!1;if(pa.container.nameNeedsUpdate)return!0;var bb=pa.container.target.submorphs.filter(function(Aa){return!ea.ignoreMorph(Aa)});return bb.length!=pa.children.length||bb.map(function(Aa){return Aa.name}).join("")!=pa.children.map(function(Aa){return Aa.target?Aa.target.name:
""}).join("")?!0:!1}},{key:"getNewChildren",value:function(pa){var ea=this,bb=pa.container.target.submorphs.map(function(Hc){return Hc.__scene_graph_target__?Hc.__scene_graph_target__():Hc}).filter(function(Hc){return!ea.ignoreMorph(Hc)}),Aa=[],Rb={},Gc;for(Gc in bb){Rb.$jscomp$loop$prop$m$2736=bb[Gc];var Ab=Ta.arr.without(pa.children,this._previewNode).find(function(Hc){return function(fb){return fb.container.target.id==Hc.$jscomp$loop$prop$m$2736.id}}(Rb));Aa[Gc]=Ab?Ab:this.readMorphHierarchy(Rb.$jscomp$loop$prop$m$2736);
Rb={$jscomp$loop$prop$m$2736:Rb.$jscomp$loop$prop$m$2736}}return Aa}},{key:"refresh",value:function(){var pa=this;if(!this._updating&&!this._dropInProgress){var ea=!1;Ta.tree.prewalk(this.treeData.root,function(bb){pa.isNodeOutOfSync(bb)&&(ea=!0,bb.name=bb.container.target.name,bb.container.refresh(),bb.children=pa.getNewChildren(bb))},function(bb){return bb.children});this.update(ea)}}},{key:"ignoreMorph",value:function(pa){return pa.isMorph?pa.isContainer||pa.isWindow||pa.getWindow()||pa.isEpiMorph||
pa.isHand||["lively.halos"].includes(pa.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler","UserFlap","Menu","CommentIndicator"].includes(pa.constructor.name):!1}},{key:"onDropHoverOut",value:function(pa){var ea=pa.hand.grabbedMorphs[0];pa=pa.hand.findDropTarget();if(!(pa===this||pa&&pa.ownerChain().includes(this))&&ea&&ea.isContainer)ea.onDragOutside()}},{key:"onDropHoverIn",value:function(pa){var ea=pa.hand.grabbedMorphs[0];ea&&!ea.isContainer&&($world.halos().forEach(function(bb){return bb.remove()}),
ea.remove(),Object.assign(ea,pa.hand._grabbedMorphProperties.get(ea).pointerAndShadow),ea=this.renderContainerFor(ea,!1),pa.hand.grab(ea),ea.leftCenter=Ta.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",value:function(pa){return new Ta.InteractiveTreeData(this.readMorphHierarchy(pa))}},{key:"readMorphHierarchy",value:function(pa){var ea=this;return Ta.tree.mapTree(pa,function(bb,Aa){return{name:bb.name,isCollapsed:!0,container:ea.renderContainerFor(bb),visible:!0,children:Aa}},function(bb){return bb.submorphs.filter(function(Aa){return bb.isWorld?
!ea.ignoreMorph(Aa):!0})})}},{key:"renderContainerFor",value:function(pa,ea){pa=void 0===pa?Ta.morph({name:"root"}):pa;ea=void 0===ea?!0:ea;var bb=new Ta.MorphContainer({tree:this,fill:ea?Ta.Color.transparent:Ta.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:pa,opacity:pa.visible?1:.5});ea||(bb.layout=new Ta.HorizontalLayout({spacing:2,align:"center"}));pa._data?(bb._data=pa._data,pa._data.container=bb):bb._data={name:pa.name,isCollapsed:!0,container:bb,
children:[]};return bb}},{key:"collapseAll",value:function(){var pa=this;this.treeData.asList().forEach(function(ea){return ea!=pa.treeData.root?ea.isCollapsed=!0:ea.isCollapsed=!1})}},{key:"filterMorphs",value:function(pa){var ea=this,bb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Aa){if(1==Aa.nextAddress)return bb=pa.tokens[0],ea.treeData.filterActive||(ea._collapseState=new WeakMap(ea.treeData.asList().map(function(Rb){return[Rb,Rb.isCollapsed]}))),ea.treeData.filterActive=!!bb,
Aa.yield(ea.treeData.filter(function(Rb){var Gc=!bb||Rb.container.target.name.includes(bb);Rb.container.highlightTerm(bb);return Gc},3),2);ea.treeData.filterActive||ea.treeData.asList().forEach(function(Rb){return Rb.isCollapsed=ea._collapseState.has(Rb)?ea._collapseState.get(Rb):!0});ea.refresh();Aa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1}}}}],ra,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1105"}}},{start:10839,end:17488})}(Ta.InteractiveTree);Ta.SceneGraphTree=Jb;Ta.SceneGraphTree=Jb;Ta.SceneGraphTree=Jb;Jb=function(U){var ra=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),xa=ra.hasOwnProperty("MorphContainer")&&"function"===typeof ra.MorphContainer?ra.MorphContainer:
ra.MorphContainer=function(pa){pa&&pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return za(xa,U,[{key:"refresh",value:function(){var pa=this,ea,bb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Aa){ea=pa.target;if(!ea)return Aa.return();pa.reactsToPointer=!0;pa.dropShadow=!1;pa.submorphs=[pa.getLabel(),0<ea.comments.length&&pa.getCommentControls(),ea.layout&&pa.getLayoutControls(),pa.getConnectionControls()].filter(Boolean).map(function(Rb,
Gc){Rb.fitIfNeeded();Rb.left=bb?bb.right+5:0;Rb.top=2;return bb=Rb});pa.height=20;pa.opacity=ea.visible?1:.5;Aa.jumpToEnd()})}},{key:"getLabel",value:function(){var pa=this.getSubmorphNamed("name label")||Ta.morph({type:"label",name:"name label",reactsToPointer:!1,padding:Ta.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),ea=pa.textString.slice(2,-1);ea&&ea==this.target.name||(pa.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return pa}},
{key:"getIcon",value:function(pa){return Ta.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[Ta.getClassName(pa)]||"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var pa=this.getSubmorphNamed("layout label")||Ta.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:Ta.Rectangle.inset(4,
2,4,2),fill:Ta.Color.orange,fontColor:Ta.Color.white});pa._isControlElement=!0;pa.textString!=this.target.layout.name()&&(pa.value=this.target.layout.name());return pa}},{key:"getCommentControls",value:function(){var pa=this.getSubmorphNamed("comment label")||Ta.morph({type:"label",name:"comment label",tooltip:"Open comment browser to browse all comments",borderRadius:3,acceptsDrops:!1,padding:Ta.Rectangle.inset(4,2,4,2),fill:Ta.Color.rgb(241,196,15),fontColor:Ta.Color.black});pa._isControlElement=
!0;var ea=this.target.comments.length+" comment"+(1==this.target.comments.length?"":"s");pa.textString!=ea&&(pa.value=ea);return pa}},{key:"getConnectionControls",value:function(){this.connectionCount=this.target.attributeConnections?this.target.attributeConnections.filter(function(bb){return!bb.targetObj.isHalo}).length:0;var pa=this.getSubmorphNamed("connections label")||Ta.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:Ta.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",
fill:Ta.Color.red,fontColor:Ta.Color.white});pa._isControlElement=!0;pa.visible=!this.connectionHalo&&!!this.connectionCount;var ea=this.connectionCount?this.connectionCount+" connection"+(1<this.connectionCount?"s":""):"Manage Connections";pa.textString!=ea&&(pa.value=ea);return pa}},{key:"highlightTerm",value:function(pa){var ea=this.submorphs[0],bb=ea.textAndAttributes.slice(0,2),Aa=ea.textString.slice(1).split(pa);ea.textAndAttributes=1===Aa.length?[].concat($jscomp.arrayFromIterable(bb),[Aa[0]]):
[].concat($jscomp.arrayFromIterable(bb),$jscomp.arrayFromIterable(Ta.arr.flatten(Ta.arr.interpose(Aa.map(function(Rb){return[Rb,{}]}),[pa,{fontWeight:"900"}]))))}},{key:"getClassControls",value:function(){}},{key:"wantsToBeDroppedOn",value:function(pa){var ea=za._get(Object.getPrototypeOf(xa.prototype),"wantsToBeDroppedOn",this).call(this,pa);if(![pa].concat($jscomp.arrayFromIterable(pa.ownerChain())).includes(this.tree))this.onDragOutside();return ea}},{key:"onGrab",value:function(pa){var ea=this,
bb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Aa){if(1==Aa.nextAddress)return ea.tree._dropInProgress=!0,bb=ea.target.globalPosition,za._get(Object.getPrototypeOf(xa.prototype),"onGrab",ea).call(ea,pa),ea._data.globalTargetPosition=bb,Aa.yield(ea.whenRendered(),2);if(ea.tree.fullContainsWorldPoint(ea.globalPosition))ea.leftCenter=Ta.pt(-20,0);else ea.onDragOutside();ea.tree._dropInProgress=!1;Aa.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=
!0,this.queue||(this.queue=Ta.fun.createQueue("container-hover-queue",function(pa,ea){var bb,Aa,Rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Gc){if(1==Gc.nextAddress)return bb=pa.target,Aa=bb.opacity,Rb=bb.scale,pa.target.opacity=0,pa.target.scale=.5,$world.halos().forEach(function(Ab){return Ab.remove()}),$world.firstHand.grab(pa.target),pa.target._data=pa._data,pa.remove(),pa.target.position=Ta.pt(0,0),Gc.yield(pa.target.animate({opacity:Aa,scale:Rb,duration:200}),2);ea();Gc.jumpToEnd()})})),
this.queue.push(this))}},{key:"onChildAdded",value:function(pa){var ea=this.node.children.indexOf(pa.node||pa._data)+1;ea=this.node.children[ea];pa.target.remove();ea?(ea=this.target.submorphs.indexOf(ea.container.target),this.target.addMorphAt(pa.target,ea)):this.target.addMorph(pa.target);pa._data.globalTargetPosition&&(pa.target.position=this.target.localize(pa._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(pa){}},{key:"toggleConnectionControl",value:function(pa){this.getSubmorphNamed("connections label").visible=
pa}},{key:"toggleSelected",value:function(pa){var ea=this,bb,Aa,Rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Gc){if(1==Gc.nextAddress)return za._get(Object.getPrototypeOf(xa.prototype),"toggleSelected",ea).call(ea,pa),ea._active===pa?Gc.return():(ea._active=pa)&&ea.target&&ea.target.isMorph&&ea.world()?Gc.yield(ea.target.whenRendered(),3):Gc.jumpTo(0);ea.get("inspector").targetObject=ea.target;ea.get("connections tree").inspectConnectionsOf(ea.target);if(ea.connectionHalo)return Gc.return();
bb=$jscomp.makeIterator(ea.world().halos());for(Aa=bb.next();!Aa.done;Aa=bb.next()){Rb=Aa.value;if(Rb.target===ea.target)return Gc.return();Rb.remove()}Ta.noUpdate({sourceObj:ea.world(),targetObj:ea.sideBar,sourceAttribute:"showHaloFor",targetAttribute:"selectNode"},function(){return ea.world().showHaloFor(ea.target)});Gc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphContainer"}},{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,
set:function(pa){this.submorphs[0].fontFamily=pa}},fontColor:{after:["submorphs"],derived:!0,set:function(pa){this.submorphs[0].fontColor=pa}},fontSize:{derived:!0,set:function(pa){this.submorphs[0].fontSize=pa}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},
grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}},sideBar:{derived:!0,get:function(){return this.owner.owner}}}}}],ra,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1105"}}},{start:17498,end:25916})}(Ta.InteractiveTreeContainer);
Ta.MorphContainer=Jb;Ta.MorphContainer=Jb;Ta.MorphContainer=Jb;var O=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");O.visualizeConnection=function(U,ra,xa,pa,ea){pa=void 0===pa?{}:pa;ea=O.rect(0).sides.concat(O.rect(0).corners);xa=xa||new O.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:O.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:O.Color.transparent,nativeCursor:"auto"},end:{fill:O.Color.orange}}},pa,{hasFixedPosition:!0}));xa.startPoint.attachTo(U,"rightCenter");
ra.isMorph?(pa=ra.globalBounds().partNameNearest(ea,U.globalPosition),U.globalPosition.equals(ra.globalBounds().partNamed(pa))&&ra.globalBounds().partNameNearest(O.arr.without(ea,pa),U.globalPosition),xa.endPoint.attachTo(ra,"leftCenter")):(ea=U.globalBounds().topRight().addPt(O.pt(100,0)),ra=O.morph({type:"label",value:ra.toString(),styleClasses:["Tooltip"],padding:O.rect(8,4)}).openInWorld(ea),ra.position=U.world().bounds().translateForInclusion(ra.bounds()).topLeft(),O.once(xa,"remove",ra,"remove"),
xa.endPoint.attachTo(ra,"leftCenter"));return xa};O.startConnecting=function(U,ra){U.animate({opacity:.8,duration:300});U.startPoint.attachTo(ra,"center");U.vertices[0].position=O.pt(2,2)};O.stopConnecting=function(U,ra,xa,pa){function ea(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Gc){if(1==Gc.nextAddress)return Gc.yield(U.animate({opacity:0,duration:300}),2);U.startPoint.clearConnection();U.endPoint.clearConnection();U.remove();Gc.jumpToEnd()})}pa=void 0===pa?!1:pa;var bb,Aa,Rb;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(Gc){return 1==Gc.nextAddress?(bb=U,Aa=bb.endPoint,(Rb=Aa.connectedMorph)&&"MorphContainer"==O.getClassName(Rb)&&(Rb=Rb.target),Rb?Gc.yield(O.interactiveConnectGivenSourceAndTarget(xa,pa,Rb),2):Gc.jumpTo(2)):Gc.yield(ea(),0)})};O.editConnection=function(U){var ra=U.connection,xa=U.connectionPoint,pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){if(1==ea.nextAddress)return pa=O.visualizeConnection(xa,ra.targetObj,!1,{borderColor:O.Color.gray.darker(),
endpointStyle:{start:{fill:O.Color.transparent,nativeCursor:"auto"},end:{fill:O.Color.gray.darker()}}}),ea.yield(O.interactivelyReEvaluateConnection(ra,"Edit Connection",!1),2);pa.remove();ea.jumpToEnd()})};O.Tree=Zd;O.TreeData=xc;O.Icon=od;O.morph=Dc;O.pt=tb;O.Rectangle=kc;O.rect=ic;O.Color=mc;O.arr=zc;O.connect=vc;O.signal=dc;O.Leash=Gd;O.once=Nc;O.interactivelyReEvaluateConnection=pb;O.interactiveConnectGivenSource=sb;O.interactiveConnectGivenSourceAndTarget=Ya;O.getClassName=wc;(function(U){var ra=
lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),xa=ra.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof ra.ConnectionsTreeData?ra.ConnectionsTreeData:ra.ConnectionsTreeData=function(pa){pa&&pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return za(xa,U,[{key:"parseMorphConnections",value:function(pa){for(var ea={},bb=$jscomp.makeIterator(void 0===pa.attributeConnections?[]:pa.attributeConnections),Aa=bb.next();!Aa.done;Aa=
bb.next())Aa=Aa.value,Aa.targetObj.isHalo||(ea[Aa.sourceAttrName]=ea[Aa.sourceAttrName]||[{name:["      New Connection  ",{fontColor:O.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(pa,Aa.sourceAttrName),{}]}],O.arr.pushAt(ea[Aa.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(Aa)))},0));return{children:Object.entries(ea).map(function(Rb){var Gc=$jscomp.makeIterator(Rb);Rb=Gc.next().value;Gc=Gc.next().value;return{name:[Rb,{fontWeight:"bold"}," ",{},
O.morph({fill:O.Color.white,opacity:.7,value:""+(Gc.length-1),borderRadius:15,fontWeight:"bold",padding:O.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],children:Gc}}).concat([{name:["New Connection  ",{fontColor:O.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(pa),{}]}])}}},{key:"renderExistingConnection",value:function(pa){var ea=this,bb=O.morph({type:"label",fontColor:O.Color.gray,fontSize:16,nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(O.Icon.textAttribute("long-arrow-alt-right",
{paddingTop:"4px"})),["  ",{},pa.targetMethodName,{}])}),Aa=this.renderDeadPin(),Rb=Aa.submorphs[0];O.connect(bb,"onHoverIn",function(){bb.fontColor=O.Color.orange;bb._leash=O.visualizeConnection(Rb,pa.targetObj,bb._leash);Rb.fill=O.Color.orange;Rb.border={color:O.Color.orange,width:3}});O.connect(bb,"onMouseDown",function(Gc){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ab){if(1==Ab.nextAddress)return Gc.stop(),Ab.yield(O.interactivelyReEvaluateConnection(pa),2);O.signal(ea,"refresh");
Ab.jumpToEnd()})});O.connect(bb,"onHoverOut",function(){bb.fontColor=O.Color.gray;Rb.fill=O.Color.gray;Rb.border={color:O.Color.white,width:1};bb._leash.remove();bb._leash=void 0});return[bb,{},"  ",{}].concat($jscomp.arrayFromIterable(O.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){pa.disconnect();O.signal(ea,"refresh")}})),["  ",{},Aa,{}])}},{key:"renderDeadPin",value:function(){var pa=O.morph({type:"ellipse",fill:O.Color.gray,extent:O.pt(10,10),center:O.pt(8,12),borderWidth:1});
return O.morph({extent:O.pt(20,20),fill:O.Color.transparent,reactsToPointer:!1,submorphs:[pa]})}},{key:"renderPin",value:function(pa,ea){var bb=this,Aa=O.morph({type:"ellipse",fill:O.Color.gray.withA(.5),extent:O.pt(10,10),center:O.pt(8,12),draggable:!1,borderWidth:1}),Rb=new O.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:O.Color.gray.darker(),endpointStyle:{fill:O.Color.gray.darker()},position:O.pt(1,1),vertices:[O.pt(0,0),O.pt(0,0)],getLabelFor:function(Gc){return"MorphContainer"==
O.getClassName(Gc)?Gc.target.name:Gc.name},canConnectTo:function(Gc){return"MorphContainer"==O.getClassName(Gc)||2>O.arr.intersect([Gc].concat($jscomp.arrayFromIterable(Gc.ownerChain())),[Aa].concat($jscomp.arrayFromIterable(Aa.ownerChain()))).length}});Aa.addMorph(Rb);O.connect(Rb.endPoint,"onDragStart",function(){O.startConnecting(Rb,Aa)});O.connect(Rb.endPoint,"onDragEnd",function(Gc){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ab){if(1==Ab.nextAddress)return Aa.center=O.pt(8,12),
Ab.yield(O.stopConnecting(Rb,Aa,pa,ea),2);O.signal(bb,"refresh");Ab.jumpToEnd()})});return O.morph({extent:O.pt(20,20),fill:O.Color.transparent,reactsToPointer:!1,submorphs:[Aa]})}},{key:"display",value:function(pa){return pa.name}},{key:"collapse",value:function(pa,ea){pa.isCollapsed=ea}},{key:"isCollapsed",value:function(pa){return pa.isCollapsed}},{key:"isLeaf",value:function(pa){return!pa.children}},{key:"getChildren",value:function(pa){return pa.children}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(pa){var ea=new this;ea.root=ea.parseMorphConnections(pa);return ea}}],ra,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3542,end:8259})})(O.TreeData);Jb=function(U){var ra=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),
xa=ra.hasOwnProperty("ConnectionsTree")&&"function"===typeof ra.ConnectionsTree?ra.ConnectionsTree:ra.ConnectionsTree=function(pa){pa&&pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return za(xa,U,[{key:"inspectConnectionsOf",value:function(pa){if(this.targetMorph=pa)this.treeData=O.ConnectionsTreeData.for(pa),O.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=O.ConnectionsTreeData.for(this.targetMorph),
O.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTree"}},{key:"properties",get:function(){return{}}}],ra,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8276,end:8829})}(O.Tree);Jb=O.ConnectionsTree;O.default=
Jb}}});