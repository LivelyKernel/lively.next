System.register("./__root_module__-884b54f8.js kld-intersections ./index-9ec474a0.js ./color-picker-efbd7363.js ./index-4d2f3cd3.js ./index-ef56f8ef.js ./index-55958c1b.js".split(" "),function(){var za,cb,mb,Pb,tb,Fc,vc,Qc,mc,ic,zc,Dc,Gd,Hd,Zd,xc,od,qb,kc,Uc,tc,cd,td,nb,cc,wc,dc,Nc,$a,Xa,Gb,ub,db,Xb;return{setters:[function(Fa){za=Fa.f;cb=Fa.s;mb=Fa.Y;Pb=Fa.aw;tb=Fa.a;Fc=Fa.K;vc=Fa.g;Qc=Fa.af;mc=Fa.aa;ic=Fa.m;zc=Fa.M;Dc=Fa.I;Gd=Fa.b;Hd=Fa.R;Zd=Fa.C;xc=Fa.c;od=Fa._;qb=Fa.o;kc=Fa.bH;Uc=Fa.bE;tc=
Fa.a4;cd=Fa.i;td=Fa.t;nb=Fa.e;cc=Fa.bB;wc=Fa.d;dc=Fa.bO;Nc=Fa.r;$a=Fa.P;Xa=Fa.bP;Gb=Fa.bQ},function(){},function(Fa){ub=Fa.I},function(Fa){db=Fa.a;Xb=Fa.S},function(){},function(){},function(){}],execute:function(){var Fa=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js");Fa.fun=za;Fa.string=cb;Fa.obj=mb;Fa.properties=Pb;Fa.arr=tb;Fa.Text=Fc;Fa.config=vc;Fa.HorizontalLayout=Qc;Fa.VerticalLayout=mc;Fa.morph=ic;Fa.Morph=zc;Fa.Icon=Dc;Fa.pt=Gd;Fa.Rectangle=Hd;Fa.Color=Zd;Fa.connect=xc;Fa.disconnect=
od;Fa.once=qb;Fa.noUpdate=kc;Fa.ColorPicker=db;Fa.DropDownList=Uc;Fa.loadObjectFromPartsbinFolder=tc;Fa.cachedControls=new WeakMap;var sb=function(Bb){var sa=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js"),Ta=sa.hasOwnProperty("RichTextControl")&&"function"===typeof sa.RichTextControl?sa.RichTextControl:sa.RichTextControl=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Ta,Bb,[{key:"toggleButton",value:function(O,
U){O.master=U?{auto:this.selectedButtonMaster}:{auto:this.buttonMaster}}},{key:"onLoad",value:function(){this.reset()}},{key:"reset",value:function(){var O=this.ui.fontSelection;O.items=Fa.arr.uniq([].concat($jscomp.arrayFromIterable(this.env.fontMetric.supportedFonts),$jscomp.arrayFromIterable(Fa.config.text.basicFontItems)));this.target&&(O.selection=this.target.fontFamily||O.items[0].value,Fa.connect(this.target,"selectionChange",this,"update",{garbageCollect:!0}))}},{key:"alignAtTarget",value:function(O){O=
void 0===O?!!this.world():O;var U=this.target,ra=U.world()||$world,xa=this.globalBounds();U=(U.selection.isEmpty()?U.globalBounds():U.getGlobalTransform().transformRectToRect(U.selectionBounds().translatedBy(U.scroll.negated()))).bottomCenter().subPt(xa.topCenter());ra=ra.visibleBounds().translateForInclusion(xa.translatedBy(U)).topLeft().subPt(xa.topLeft());ra=this.position.addPt(ra);O?this.animate({duration:300,position:ra}):this.position=ra}},{key:"removeFocus",value:function(){var O=this;this.target&&
this.target.attributeConnections&&this.target.attributeConnections.forEach(function(U){return U.targetObj===O&&U.disconnect()});this.autoRemove&&this.target&&(this.remove(),this.target=null)}},{key:"focusOn",value:function(O,U){U=void 0===U?!0:U;var ra=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xa){if(1==xa.nextAddress)return ra.target&&Fa.disconnect(ra.target,"selectionChange",ra,"update"),ra.target=O,ra.reset(),ra.update(),xa.yield(ra.whenRendered(),2);ra.ui.fontSizeField.relayout();
U&&ra.alignAtTarget();xa.jumpToEnd()})}},{key:"setupConnections",value:function(){Fa.connect(this.ui.paddingField,"number",this,"setPadding");Fa.connect(this.ui.paddingFieldTop,"number",this,"setPaddingTop");Fa.connect(this.ui.paddingFieldBottom,"number",this,"setPaddingBottom");Fa.connect(this.ui.paddingFieldLeft,"number",this,"setPaddingLeft");Fa.connect(this.ui.paddingFieldRight,"number",this,"setPaddingRight")}},{key:"update",value:function(){var O=this,U=this.target,ra=this.updateSpec,xa=U.selection;
xa=!U.readOnly&&xa?xa.isEmpty()?U.textAttributeAt(xa.start):U.getStyleInRange(xa):{};var pa=this.managedProps,ea=Fa.obj.select(U,pa);U=$jscomp.makeIterator(Object.entries(Fa.obj.select(xa||{},pa)));for(xa=U.next();!xa.done;xa=U.next())pa=$jscomp.makeIterator(xa.value),xa=pa.next().value,pa=pa.next().value,"undefined"!==typeof pa&&(ea[xa]=pa);Fa.noUpdate(function(){for(var bb=$jscomp.makeIterator(Object.entries(O.ui)),Aa=bb.next();!Aa.done;Aa=bb.next()){var Rb=$jscomp.makeIterator(Aa.value);Aa=Rb.next().value;
Rb=Rb.next().value;if(ra[Aa])ra[Aa](ea,Rb)}})}},{key:"relayout",value:function(){}},{key:"changeAttributeInSelectionOrMorph",value:function(O,U){var ra=this.target,xa=ra.selection;ra.isLabel||xa&&xa.isEmpty()?ra[O]="function"===typeof U?U(ra[O]):U:(ra.undoManager.group(),ra.changeStyleProperty(O,function(pa){return"function"===typeof U?U(pa):U}),ra.undoManager.group())}},{key:"changeFont",value:function(O){var U=this,ra;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xa){if(1==xa.nextAddress)return U._last=
O,(ra="custom..."===O)?xa.yield($world.prompt("Enter font family name",{requester:U.target,historyId:"lively.morphic-rich-text-font-names",useLastInput:!0}),3):xa.jumpTo(2);if(2!=xa.nextAddress&&(O=xa.yieldResult,!O))return xa.return();U.changeAttributeInSelectionOrMorph("fontFamily",O);xa.jumpToEnd()})}},{key:"setPadding",value:function(O){this.target.padding=Fa.Rectangle.inset(O)}},{key:"setPaddingTop",value:function(O){var U=this.target.padding;this.target.padding=Fa.Rectangle.inset(U.left(),O,
U.right(),U.bottom())}},{key:"setPaddingLeft",value:function(O){var U=this.target.padding;this.target.padding=Fa.Rectangle.inset(O,U.top(),U.right(),U.bottom())}},{key:"setPaddingRight",value:function(O){var U=this.target.padding;this.target.padding=Fa.Rectangle.inset(U.left(),U.top(),O,U.bottom())}},{key:"setPaddingBottom",value:function(O){var U=this.target.padding;this.target.padding=Fa.Rectangle.inset(U.left(),U.top(),U.right(),O)}},{key:"setLineWrapping",value:function(O){this.target.lineWrapping=
O}},{key:"changeFontWeight",value:function(O){this.changeAttributeInSelectionOrMorph("fontWeight",O)}},{key:"changeTextAlign",value:function(O){this.changeAttributeInSelectionOrMorph("textAlign",O)}},{key:"changeFontColor",value:function(O){this.changeAttributeInSelectionOrMorph("fontColor",O)}},{key:"changeFontSize",value:function(O){this.changeAttributeInSelectionOrMorph("fontSize",O)}},{key:"changeFixedWidth",value:function(O){this.target.fixedWidth=O}},{key:"changeFixedHeight",value:function(O){this.target.fixedHeight=
O}},{key:"changeLink",value:function(){var O=this,U,ra,xa,pa,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return U=O.target,ra=U.selection,xa=U.getStyleInRange(ra),pa=xa.link,bb.yield(O.world().prompt("Set link",{input:pa||"https://"}),2);ea=bb.yieldResult;U.undoManager.group();U.setStyleInRange({link:ea||void 0},ra);U.undoManager.group();O.autoRemove&&O.remove();bb.jumpToEnd()})}},{key:"toggleUnderline",value:function(){this.changeAttributeInSelectionOrMorph("textDecoration",
function(O){return"underline"===O?"none":"underline"})}},{key:"toggleItalic",value:function(){this.changeAttributeInSelectionOrMorph("fontStyle",function(O){return"italic"===O?"normal":"italic"})}},{key:"toggleBold",value:function(){this.changeAttributeInSelectionOrMorph("fontWeight",function(O){return"bold"===O||"700"===O?"normal":"bold"})}},{key:"copyStyle",value:function(){var O=this,U=this.target,ra=this.ui.applyStyleButton;U=U.selection.isEmpty()?U.defaultTextStyle:U.getStyleInRange(U.selection);
var xa=JSON.stringify(U,null,2);this.constructor.copiedStyle=U;ra.tooltip="paste style\n"+xa;this.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/plain",data:xa},{type:"application/morphic-text-style",styleString:xa}]).then(function(){return O.setStatusMessage("Copied style\n"+xa)}).catch(function(pa){return O.showError(pa)})}},{key:"pasteStyle",value:function(){var O=this,U=this.target,ra=this.constructor.copiedStyle;U.selection.isEmpty()?Object.assign(U,ra):U.selections.forEach(function(xa){return U.addTextAttribute(O.constructor.copiedStyle,
xa)});this.update()}},{key:"clearStyle",value:function(){var O=this.target;O.selections.forEach(function(U){return O.resetStyleInRange(U)});this.update()}},{key:"configureRichTextOptions",value:function(){this.getSubmorphNamed("config panel")&&this.getSubmorphNamed("config panel").remove();var O=this.defaultSpec,U=this.uiSpec;O=this.addMorph({name:"config panel",layout:new Fa.VerticalLayout({spacing:5}),epiMorph:!0,submorphs:[].concat($jscomp.arrayFromIterable(Object.keys(O).map(function(ra){var xa=
U.rows.some(function(pa){return pa.some(function(ea){return ea===ra})});return{type:"labeledcheckbox",label:ra,name:ra,checked:xa}})),[{layout:new Fa.HorizontalLayout({spacing:3}),submorphs:[{type:"button",name:"OK button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}])});O.center=this.innerBounds().center();Fa.connect(O.getSubmorphNamed("OK button"),"fire",this,"configureAccepted");Fa.connect(O.getSubmorphNamed("cancel button"),"fire",this,"configureCanceled")}},{key:"configureAccepted",
value:function(){var O=this.getSubmorphNamed("config panel");O&&(O.remove(),O.submorphs.filter(function(U){return"LabeledCheckBox"===U.constructor.name}))}},{key:"configureCanceled",value:function(){var O=this.getSubmorphNamed("config panel");O&&O.remove()}},{key:"close",value:function(){var O=this;this.target&&this.target.attributeConnections&&this.target.attributeConnections.forEach(function(U){return U.targetObj===O&&U.disconnect()});this.remove()}},{key:"alwaysTargetFocusedMorph",value:function(){this.startStepping(1500,
"updateTarget")}},{key:"updateTarget",value:function(){var O=this.world();O&&(O=O.focusedMorph)&&(O.isLabel||O.isText)&&!this.isAncestorOf(O)&&this.target!==O&&this.focusOn(O,!1)}},{key:"onMouseUp",value:function(O){var U=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ra){if(1==ra.nextAddress)return ra.yield(U.whenRendered(),2);U.update();ra.jumpToEnd()})}},{key:"attachToWorld",value:function(){Fa.connect($world,"onMouseDown",this,"updateTarget",{garbageCollect:!0})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"RichTextControl"}},{key:"properties",get:function(){return{autoRemove:{defaultValue:!1},target:{},toggleColor:{},buttonMaster:{defaultValue:"styleguide://System/dark button"},selectedButtonMaster:{defaultValue:"styleguide://SystemIDE/selected button"},managedProps:{readOnly:!0,get:function(){return"fontFamily fontWeight fontSize fontStyle isText fontColor textAlign link textDecoration fixedWidth fixedHeight lineWrapping padding".split(" ")}},updateSpec:{get:function(){var O=
this;return Object.assign({fontSelection:function(U,ra){var xa=U.fontFamily;(U=xa&&ra.items.find(function(pa){return pa.value.toLowerCase()===xa.toLowerCase()}))?ra.selection=U.value:xa&&(ra.items=ra.items.concat({isListItem:!0,label:[xa,{fontFamily:xa}],value:xa}),ra.selection=Fa.arr.last(ra.items))},fontWeightSelection:function(U,ra){ra.selection="normal"==U.fontWeight?"Medium":U.fontWeight?Fa.string.capitalize(U.fontWeight):"Medium"},boldButton:function(U,ra){O.toggleButton(ra,"bold"===U.fontWeight)},
italicButton:function(U,ra){O.toggleButton(ra,"italic"===U.fontStyle)},underlineButton:function(U,ra){O.toggleButton(ra,"underline"===U.textDecoration)},linkButton:function(U,ra){O.toggleButton(ra,!!U.link)},colorPicker:function(U,ra){ra.colorValue=U.fontColor},fontSizeField:function(U,ra){ra.number=U.fontSize},fixedWidthControl:function(U,ra){U.isText?ra.enable():ra.disable();ra.checked=U.fixedWidth},fixedHeightControl:function(U,ra){U.isText?ra.enable():ra.disable();ra.checked=U.fixedHeight},lineWrappingControl:function(U,
ra){var xa=$jscomp.makeIterator(ra.submorphs);ra=xa.next().value;xa=xa.next().value;ra.checked=!!U.lineWrapping;U.isText?ra.enable():ra.disable();xa.deactivated=!U.lineWrapping;xa.deactivated?xa.opacity=.5:(xa.opacity=1,xa.selection=U.lineWrapping)},paddingControl:function(U,ra){var xa=U.padding,pa=xa.left();U=xa.top();var ea=xa.right();xa=xa.bottom();var bb=!Fa.arr.every([pa,U,ea,xa],function(Aa){return Aa==pa});ra.get("multi value indicator").visible=bb;Fa.connect(ra.get("multi value indicator"),
"onMouseDown",ra.get("padding field"),"number",{converter:"() => left",varMapping:{left:pa}});ra.get("padding field").number=pa;ra.get("padding field").visible=!bb;try{ra.get("padding field top").number=U,ra.get("padding field left").number=pa,ra.get("padding field right").number=ea,ra.get("padding field bottom").number=xa}catch(Aa){}}},["left","center","right","block"].reduce(function(U,ra){U[ra+"Align"]=function(xa,pa){pa.deactivated=!xa.isText;O.toggleButton(pa,xa.textAlign==ra)};return U},{}))}},
ui:{get:function(){var O=this,U={fontSelection:"font selection",fontWeightSelection:"font weight selection",boldButton:"bold button",italicButton:"italic button",underlineButton:"underline button",linkButton:"link button",leftAlign:"left align",centerAlign:"center align",rightAlign:"right align",blockAlign:"block align",fontSizeField:"font size field",colorPicker:"color picker",copyStyleButton:"copy style",applyStyleButton:"apply style",removeStyleButton:"remove style",fixedHeightControl:"fixed height control",
fixedWidthControl:"fixed width control",lineWrappingControl:"line wrapping control",paddingControl:"padding control",paddingField:"padding field",paddingFieldTop:"padding field top",paddingFieldLeft:"padding field left",paddingFieldRight:"padding field right",paddingFieldBottom:"padding field bottom"};return Fa.obj.extract(U,Fa.obj.keys(U),function(ra,xa){return O.getSubmorphNamed(xa)})}}}}},{key:"openDebouncedFor",value:function(O){var U=O.selection;if(U.isEmpty()){var ra=Fa.cachedControls.get(O);
ra&&(ra.update(),ra.alignAtTarget(),ra.world()||O.world().addMorph(ra))}else Fa.fun.debounceNamed(O.id+"openRichTextControl",600,function(){var xa=Fa.cachedControls.get(O);U.isEmpty()?xa&&xa.removeFocus():(xa&&xa.world()||(xa=new Fa.RichTextControl,Fa.cachedControls.set(O,xa)),O.world().addMorph(xa),xa.focusOn(O,!0),xa.alwaysTargetFocusedMorph())})()}},{key:"openFor",value:function(O){var U=Fa.cachedControls.get(O);U?U.update():(U=new Fa.RichTextControl,Fa.cachedControls.set(O,U),U.focusOn(O,!0),
U.alwaysTargetFocusedMorph());U.alignAtTarget();U.world()||O.world().addMorph(U);return U}}],sa,{pathInPackage:function(){return"text/ui.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:636,end:17713})}(Fa.Morph);Fa.RichTextControl=sb;Fa.RichTextControl=sb;Fa.RichTextControl=sb;var Ya=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js");
Ya.Morph=zc;Ya.touchInputDevice=td;Ya.morph=ic;Ya.Icon=Dc;Ya.easings=nb;Ya.pt=Gd;Ya.Color=Zd;Ya.fun=za;Ya.connect=xc;Ya.TreeData=cc;sb=function(Bb){var sa=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),Ta=sa.hasOwnProperty("SettingsTree")&&"function"===typeof sa.SettingsTree?sa.SettingsTree:sa.SettingsTree=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Ta,Bb,[{key:"display",value:function(O){return O.panel?
[O.panel,{}]:O.name}},{key:"collapse",value:function(O,U){O.isCollapsed=U}},{key:"isCollapsed",value:function(O){return O.isCollapsed}},{key:"isLeaf",value:function(O){return!O.children}},{key:"getChildren",value:function(O){var U=this;return O===this.root?O.children.filter(function(ra){return U.target&&ra.applicabilityCheck?eval(ra.applicabilityCheck)(U.target):!0}):O.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SettingsTree"}},{key:"default",value:function(){return new this({isCollapsed:!1,
children:[{isCollapsed:!0,name:[" ",{}].concat($jscomp.arrayFromIterable(Ya.Icon.textAttribute("font")),[" Rich Text",{fontWeight:"bold"}]),children:[{panel:Ya.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Ya.Icon.textAttribute("image")),[" Shape",{fontWeight:"bold"}]),children:[{panel:Ya.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Ya.Icon.textAttribute("border-style")),[" Border",{paddingLeft:"2px",fontWeight:"bold"}]),children:[{panel:Ya.morph({})}]},
{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Ya.Icon.textAttribute("grip-vertical")),[" Layout",{paddingLeft:"4px",fontWeight:"bold"}]),children:[{panel:Ya.morph({})}]}]})}},{key:"border",value:function(){return new this({isCollapsed:!1,children:[{isCollapsed:!0,name:[" Type    ",{},Ya.morph({height:20}),{}],children:[{panel:Ya.morph({})}]},{isCollapsed:!1,name:[" Color   ",{},Ya.morph({height:20}),{}],children:[{panel:Ya.morph({})}]},{isCollapsed:!1,name:[" Width  ",{},Ya.morph({height:20}),
{}],children:[{panel:Ya.morph({})}]},{isCollapsed:!1,name:[" Radius ",{},Ya.morph({height:20}),{}],children:[{panel:Ya.morph({})}]}]})}}],sa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-67"}}},{start:284,end:2663})}(Ya.TreeData);Ya.SettingsTree=sb;Ya.SettingsTree=sb;Ya.SettingsTree=sb;sb=function(Bb){var sa=
lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),Ta=sa.hasOwnProperty("StylingSideBar")&&"function"===typeof sa.StylingSideBar?sa.StylingSideBar:sa.StylingSideBar=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Ta,Bb,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"collapseAll",value:function(){this.getSubmorphsByStyleClassName("Tree").forEach(function(O){O.nodes.forEach(function(U){return O.treeData.root==
U?O.uncollapse(U):O.collapse(U)})})}},{key:"onWorldResize",value:function(O){O=void 0===O?!0:O;if(this.respondsToVisibleWindow){var U=$world.visibleBounds(),ra=navigator.standalone&&Ya.touchInputDevice?25:0,xa=this.getSubmorphNamed("horizontal resizer");this.height=U.height-ra;this.top=ra+U.top();xa.height=this.height;xa.left=0;xa.top=0;O&&(this.visible?this.topRight=U.topRight():this.topLeft=U.topRight())}}},{key:"toggle",value:function(O){var U=this,ra,xa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pa){switch(pa.nextAddress){case 1:ra=
$world.visibleBounds().withTopLeft(Ya.pt(0,0));xa=navigator.standalone&&Ya.touchInputDevice?25:0;U.height=ra.height-xa;U.top=xa+ra.top();if(O)return $world.addMorph(U,$world.get("lively top bar")),U.topLeft=ra.topRight(),U.visible=!0,pa.yield(U.whenRendered(),5);U.detachFromWorld($world);return pa.yield(U.animate({opacity:0,topLeft:ra.topRight(),duration:300}),4);case 4:U.visible=!1;U.remove();pa.jumpTo(0);break;case 5:return U.onWorldResize(!1),pa.yield(U.animate({opacity:1,easing:Ya.easings.outCirc,
topRight:ra.topRight(),duration:300}),6);case 6:U.attachToWorld($world),pa.jumpToEnd()}})}},{key:"cleanupAnchors",value:function(){for(var O=this.withAllSubmorphsSelect(function(pa){return pa.anchors&&pa.anchors.filter(function(ea){return!ea.id}).length}),U={},ra=$jscomp.makeIterator(O),xa=ra.next();!xa.done;U={$jscomp$loop$prop$m$2741:U.$jscomp$loop$prop$m$2741},xa=ra.next())U.$jscomp$loop$prop$m$2741=xa.value,U.$jscomp$loop$prop$m$2741.anchors.forEach(function(pa){return function(ea){return!ea.id&&
pa.$jscomp$loop$prop$m$2741.removeAnchor(ea)}}(U));return O.length}},{key:"attachToWorld",value:function(O){Ya.connect(O,"showHaloFor",this,"focusMorph",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(O){var U=this;O.attributeConnections.forEach(function(ra){ra.targetObj===U&&ra.disconnect()})}},{key:"focusMorph",value:function(O){if(!O.isMorph||!O.ownerChain().includes(this)){(O.isLabel||O.isText||O.isButton)&&this.richTextControl.focusOn(O,!1);var U=this.getSubmorphNamed("style settings tree");
U.treeData.target=O;U.update(!0);Object.values(this.controls).forEach(function(ra){return ra&&ra.focusOn(O)})}}},{key:"onHierarchyChange",value:function(){Object.values(this.controls).forEach(function(O){return O&&O.update()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StylingSideBar"}},{key:"properties",get:function(){return{controls:{},richTextControl:{},isHaloItem:{get:function(){return!0}}}}}],sa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-67"}}},{start:2682,end:5749})}(Ya.Morph);sb=Ya.StylingSideBar;Ya.default=sb;var pb=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js");pb.Morph=zc;pb.obj=mb;pb.string=cb;pb.connect=xc;pb.noUpdate=kc;pb.once=qb;sb=function(Bb){var sa=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js"),Ta=sa.hasOwnProperty("ShapeFormatStyler")&&"function"===typeof sa.ShapeFormatStyler?
sa.ShapeFormatStyler:sa.ShapeFormatStyler=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Ta,Bb,[{key:Symbol.for("lively-instance-initialize"),value:function(O){cd._get(Object.getPrototypeOf(Ta.prototype),Symbol.for("lively-instance-initialize"),this).call(this,O);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var O=this.ui,U={},ra=$jscomp.makeIterator(Object.entries(this.uiSpec)),
xa=ra.next();!xa.done;U={$jscomp$loop$prop$control$2743:U.$jscomp$loop$prop$control$2743,$jscomp$loop$prop$prop$2744:U.$jscomp$loop$prop$prop$2744},xa=ra.next()){var pa=$jscomp.makeIterator(xa.value);xa=pa.next().value;pa=$jscomp.makeIterator(pa.next().value);pa.next();var ea=pa.next().value;U.$jscomp$loop$prop$prop$2744=pa.next().value;U.$jscomp$loop$prop$control$2743=O[xa];pb.connect(U.$jscomp$loop$prop$control$2743,ea,this,"updateTarget",{updater:function(bb){return function(Aa,Rb){bb.$jscomp$loop$prop$control$2743._updating=
!0;Aa(bb.$jscomp$loop$prop$prop$2744,Rb);bb.$jscomp$loop$prop$control$2743._updating=!1}}(U),varMapping:{prop:U.$jscomp$loop$prop$prop$2744,control:U.$jscomp$loop$prop$control$2743}})}}},{key:"update",value:function(){var O=this,U=this.target,ra=U.top,xa=U.left,pa=U.isImage,ea=U.isLabel,bb=U.imageUrl,Aa=U.textString,Rb=U.clipMode,Gc=U.fill,Ab=U.dropShadow,Hc=U.opacity,fb=U.height,ud=U.width;U=this.ui;var je=U.clipModeSelector,rc=U.fillPicker,gb=U.opacityField,Id=U.shadowPicker,hb=U.heightField,Za=
U.widthField,ua=U.posXField,J=U.posYField,la=U.imageUrlInput,La=U.labelContentInput;pb.noUpdate(function(){O.updateControl(Id,"shadowValue",Ab);O.updateControl(je,"selection",Rb);O.updateControl(rc,"colorValue",Gc);O.updateControl(gb,"number",Hc);O.updateControl(hb,"number",fb);O.updateControl(Za,"number",ud);O.updateControl(ua,"number",xa);O.updateControl(J,"number",ra);rc.context=O.target;pa&&O.updateControl(la,"input",bb);la.owner.isLayoutable=la.owner.visible=!!pa;ea&&O.updateControl(La,"input",
Aa);La.owner.isLayoutable=La.owner.visible=!!ea;var ib=O.getSubmorphNamed("special controls");(ib.visible=!!ea||!!pa)?O.height=ib.bottom:O.height=ib.top})}},{key:"updateTarget",value:function(O,U){this.target[O]=U;this.update()}},{key:"updateControl",value:function(O,U,ra){O._updating||pb.obj.equals(O[U],ra)||(O[U]=ra)}},{key:"updateMultiValue",value:function(O,U,ra){var xa=this.ui,pa=xa[this.join(O)],ea=pa.get("multi value indicator"),bb=pb.obj.values(U).some(function(Aa){return!pb.obj.isFunction(Aa)&&
!pb.obj.equals(Aa,U.valueOf())});ea.left=0;pa.visible=pa.isLayoutable=!bb;if(bb&&ea.visible!=bb)pb.once(ea,"onMouseDown",pa,ra,{converter:function(){return U.valueOf()},varMapping:{value:U}});ea.visible=ea.isLayoutable=bb;ea.left=bb?200:0;this.updateControl(pa,ra,U.valueOf());pa=$jscomp.makeIterator(["top","left","bottom","right"]);for(ea=pa.next();!ea.done;ea=pa.next())ea=ea.value,bb=xa[this.join(O,ea)],this.updateControl(bb,ra,U[ea])}},{key:"lower",value:function(O){return O.charAt(0).toLowerCase()+
O.slice(1)}},{key:"join",value:function(O,U){return this.lower(pb.string.camelCaseString(O+(U?" "+U:"")))}},{key:"unwrap",value:function(O,U,ra){var xa={};xa=(xa[this.lower(pb.string.camelCaseString(O))]=[O,U,ra],xa);for(var pa=$jscomp.makeIterator(["top","left","bottom","right"]),ea=pa.next();!ea.done;ea=pa.next()){ea=ea.value;var bb=O+" "+ea;xa[this.lower(pb.string.camelCaseString(bb))]=[bb,U,this.join(ra,ea)]}return xa}},{key:"focusOn",value:function(O){var U=this,ra;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xa){if(1==
xa.nextAddress)return!O||U.isAncestorOf(O)||U.target===O||pb.obj.isArray(O)||(U.target=O),ra=U.visible,U.visible=!0,xa.yield(U.whenRendered(),2);if(3!=xa.nextAddress)return U.update(),xa.yield(U.whenRendered(),3);U.getSubmorphsByStyleClassName("NumberWidget").map(function(pa){return pa.relayout()});U.visible=ra;xa.jumpToEnd()})}},{key:"removeFocus",value:function(){this.target=null}},{key:"onHoverIn",value:function(O){this.watchForTarget=!1}},{key:"onHoverOut",value:function(O){this.watchForTarget=
!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShapeFormatStyler"}},{key:"properties",get:function(){return{uiSpec:{get:function(){return this._uiSpec||(this._uiSpec={clipModeSelector:["clip mode selector","selection","clipMode"],fillPicker:["fill picker","colorValue","fill"],shadowPicker:["shadow picker","shadowValue","dropShadow"],opacityField:["opacity field","number","opacity"],heightField:["height field","number","height"],widthField:["width field","number","width"],posXField:["pos x field",
"number","left"],posYField:["pos y field","number","top"],imageUrlInput:["image url input","inputAccepted","imageUrl"],labelContentInput:["label content input","inputAccepted","textString"]})}},ui:{readOnly:!0,get:function(){var O=this,U=this.uiSpec;return this._ui||(this._ui=pb.obj.extract(U,pb.obj.keys(U),function(ra,xa){ra=$jscomp.makeIterator(xa).next().value;return O.getSubmorphNamed(ra)}))}}}}}],sa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeFormatStyler",version:"0.1.1-158"}}},{start:176,end:5822})}(pb.Morph);sb=pb.ShapeFormatStyler;pb.default=sb;var $b=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js");$b.Morph=zc;$b.ShadowPopover=Xb;$b.connect=xc;$b.signal=wc;sb=function(Bb){var sa=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js"),Ta=sa.hasOwnProperty("ShadowWidget")&&"function"===typeof sa.ShadowWidget?sa.ShadowWidget:
sa.ShadowWidget=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Ta,Bb,[{key:"onHoverIn",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:1,duration:200})}},{key:"onHoverOut",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(O){this.openPopover()}},{key:"update",value:function(O){var U=this.submorphs[0];
U&&(U.dropShadow=O)}},{key:"openPopover",value:function(){var O=this,U;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ra){if(1==ra.nextAddress)return U=new $b.ShadowPopover({hasFixedPosition:!!O.ownerChain().find(function(xa){return xa.hasFixedPosition}),shadowValue:O.shadowValue}),ra.yield(U.fadeIntoWorld(O.globalBounds().center()),2);$b.connect(U,"shadowValue",O,"shadowValue");$b.connect(O,"shadowValue",O,"update");$b.signal(O,"openWidget",U);ra.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{set:function(O){this.setProperty("shadowValue",O);this.update(O)}}}}}],sa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShadowWidget",version:"0.1.1-7"}}},{start:194,end:1231})}($b.Morph);sb=$b.ShadowWidget;$b.default=sb;var lc=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js");
lc.Morph=zc;lc.obj=mb;lc.string=cb;lc.connect=xc;lc.noUpdate=kc;lc.once=qb;sb=function(Bb){var sa=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js"),Ta=sa.hasOwnProperty("BorderFormatStyler")&&"function"===typeof sa.BorderFormatStyler?sa.BorderFormatStyler:sa.BorderFormatStyler=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Ta,Bb,[{key:"setupUI",value:function(){var O=this;this.getSubmorphsByStyleClassName("NumberWidget").map(function(U){var ra=
lc.string.camelCaseString(U.name);ra=ra[0].toLowerCase()+ra.slice(1);O.ui[ra]=U})}},{key:"cleanupAnchors",value:function(){var O=this.withAllSubmorphsSelect(function(xa){return xa.anchors&&xa.anchors.filter(function(pa){return!pa.id})}),U={};O=$jscomp.makeIterator(O);for(var ra=O.next();!ra.done;U={$jscomp$loop$prop$m$2746:U.$jscomp$loop$prop$m$2746},ra=O.next())U.$jscomp$loop$prop$m$2746=ra.value,U.$jscomp$loop$prop$m$2746.anchors.forEach(function(xa){return function(pa){return!pa.id&&xa.$jscomp$loop$prop$m$2746.removeAnchor(pa)}}(U))}},
{key:Symbol.for("lively-instance-initialize"),value:function(O){cd._get(Object.getPrototypeOf(Ta.prototype),Symbol.for("lively-instance-initialize"),this).call(this,O);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var O=this.ui,U={},ra=$jscomp.makeIterator(Object.entries(this.uiSpec)),xa=ra.next();!xa.done;U={$jscomp$loop$prop$control$2748:U.$jscomp$loop$prop$control$2748,$jscomp$loop$prop$prop$2749:U.$jscomp$loop$prop$prop$2749},xa=ra.next()){var pa=
$jscomp.makeIterator(xa.value);xa=pa.next().value;pa=$jscomp.makeIterator(pa.next().value);pa.next();var ea=pa.next().value;U.$jscomp$loop$prop$prop$2749=pa.next().value;U.$jscomp$loop$prop$control$2748=O[xa];lc.connect(U.$jscomp$loop$prop$control$2748,ea,this,"updateTarget",{updater:function(bb){return function(Aa,Rb){bb.$jscomp$loop$prop$control$2748._updating=!0;Aa(bb.$jscomp$loop$prop$prop$2749,Rb);bb.$jscomp$loop$prop$control$2748._updating=!1}}(U),varMapping:{prop:U.$jscomp$loop$prop$prop$2749,
control:U.$jscomp$loop$prop$control$2748}})}}},{key:"update",value:function(){var O=this,U=this.target,ra=U.borderStyle,xa=U.borderColor,pa=U.borderRadius,ea=U.borderWidth;lc.noUpdate(function(){O.updateMultiValue("border style selector",ra,"selection");O.updateMultiValue("border color picker",xa,"colorValue");O.updateMultiValue("border radius field",pa,"number");O.updateMultiValue("border width field",ea,"number")})}},{key:"updateTarget",value:function(O,U){this.target[O]=U;this.update()}},{key:"updateControl",
value:function(O,U,ra){O._updating||lc.obj.equals(O[U],ra)||(O[U]=ra)}},{key:"updateMultiValue",value:function(O,U,ra){var xa=this.ui,pa=xa[this.join(O)],ea=pa.get("multi value indicator"),bb=lc.obj.values(U).some(function(Aa){return!lc.obj.isFunction(Aa)&&!lc.obj.equals(Aa,U.valueOf())});pa.visible=pa.isLayoutable=!bb;if(bb&&ea.visible!=bb)lc.once(ea,"onMouseDown",pa,ra,{converter:function(){return U.valueOf()},varMapping:{value:U}});ea.visible=ea.isLayoutable=bb;this.updateControl(pa,ra,U.valueOf());
pa=$jscomp.makeIterator(["top","left","bottom","right"]);for(ea=pa.next();!ea.done;ea=pa.next())ea=ea.value,bb=xa[this.join(O,ea)],this.updateControl(bb,ra,U[ea])}},{key:"lower",value:function(O){return O.charAt(0).toLowerCase()+O.slice(1)}},{key:"join",value:function(O,U){return this.lower(lc.string.camelCaseString(O+(U?" "+U:"")))}},{key:"unwrap",value:function(O,U,ra){var xa={};xa=(xa[this.lower(lc.string.camelCaseString(O))]=[O,U,ra],xa);for(var pa=$jscomp.makeIterator(["top","left","bottom",
"right"]),ea=pa.next();!ea.done;ea=pa.next()){ea=ea.value;var bb=O+" "+ea;xa[this.lower(lc.string.camelCaseString(bb))]=[bb,U,this.join(ra,ea)]}return xa}},{key:"attachToWorld",value:function(){lc.connect($world,"showHaloFor",this,"focusOn",{garbageCollect:!0})}},{key:"focusOn",value:function(O){var U=this,ra;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xa){if(1==xa.nextAddress)return!O||U.isAncestorOf(O)||U.target===O||lc.obj.isArray(O)||(U.target=O),ra=U.visible,U.visible=!0,xa.yield(U.whenRendered(),
2);if(3!=xa.nextAddress)return U.update(),xa.yield(U.whenRendered(),3);U.getSubmorphsByStyleClassName("NumberWidget").map(function(pa){return pa.relayout()});U.visible=ra;xa.jumpToEnd()})}},{key:"onHoverIn",value:function(O){this.watchForTarget=!1}},{key:"onHoverOut",value:function(O){this.watchForTarget=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BorderFormatStyler"}},{key:"properties",get:function(){return{uiSpec:{derived:!0,serialize:!1,get:function(){return this._uiSpec||
(this._uiSpec=Object.assign({},this.unwrap("border style selector","selection","borderStyle"),{},this.unwrap("border color picker","colorValue","borderColor"),{},this.unwrap("border radius field","number","borderRadius"),{},this.unwrap("border width field","number","borderWidth")))}},ui:{initialize:function(){this.setupUI()}}}}}],sa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"BorderFormatStyler",version:"0.1.1-16"}}},{start:185,end:5003})}(lc.Morph);sb=lc.BorderFormatStyler;lc.default=sb;var Jb=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js");Jb.Morph=zc;Jb.morph=ic;Jb.layouts=dc;Jb.string=cb;Jb.connect=xc;Jb.noUpdate=kc;Jb.InteractiveMorphSelector=ub;Jb.Color=Zd;Jb.pt=Gd;sb=function(Bb){var sa=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js"),Ta=sa.hasOwnProperty("ShapeLayoutControl")&&"function"===typeof sa.ShapeLayoutControl?
sa.ShapeLayoutControl:sa.ShapeLayoutControl=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Ta,Bb,[{key:"focusOn",value:function(O){this.target=O;this.update(!1)}},{key:"setupConnections",value:function(){var O=this.ui;Jb.connect(O.submorphSettingsControl,"fire",this,"chooseSubmorphToChangeLayoutSettings");Jb.connect(O.dragmeControl,"onDragStart",this,"onSubmorphSettingsDragStart");Jb.connect(O.xAxisPolicyControl,
"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "x",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});Jb.connect(O.yAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "y",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});for(var U={},ra=$jscomp.makeIterator(this.managedProps),xa=ra.next();!xa.done;U=
{$jscomp$loop$prop$prop$2751:U.$jscomp$loop$prop$prop$2751},xa=ra.next()){var pa=$jscomp.makeIterator(xa.value),ea=pa.next().value;xa=pa.next().value;pa.next().value||(U.$jscomp$loop$prop$prop$2751=this.join(ea),pa=O[this.join(ea,"control")],Jb.connect(pa,xa,this,"updateLayout",{updater:function(bb){return function(Aa,Rb){Aa(bb.$jscomp$loop$prop$prop$2751,Rb)}}(U),varMapping:{prop:U.$jscomp$loop$prop$prop$2751}}))}}},{key:"lower",value:function(O){return O.charAt(0).toLowerCase()+O.slice(1)}},{key:"join",
value:function(O,U){return this.lower(Jb.string.camelCaseString(O+(U?" "+U:"")))}},{key:"updateLayoutOfTarget",value:function(O){O=Jb.layouts[Jb.string.camelCaseString(O)];this.target.layout=O?new O({autoResize:!1}):null;this.update()}},{key:"updateLayout",value:function(O,U){this.target.layout[O]=U}},{key:"update",value:function(O){var U=this;this.target&&Jb.noUpdate(function(){for(var ra=U.ui,xa=U.target.layout||{name:function(){return"No"}},pa=$jscomp.makeIterator(U.managedProps),ea=pa.next();!ea.done;ea=
pa.next()){var bb=$jscomp.makeIterator(ea.value);ea=bb.next().value;var Aa=bb.next().value;bb.next();bb=ra[U.join(ea,"control")];var Rb=ra[U.join(ea,"label")];if(Aa)if("type"===ea)bb.selection=xa.name()+" Layout";else{var Gc=xa[U.join(ea)],Ab="undefined"!==typeof Gc;if(Ab){switch(ea){case "align":bb.items=xa.possibleAlignValues;break;case "direction":bb.items=xa.possibleDirectionValues;break;case "axis":bb.items=xa.possibleAxisValues}bb[Aa]=Gc}Rb.isLayoutable=Rb.visible=Ab}}U.showGridLayoutControl("Grid"===
xa.name());U.showProportionalControl("Proportional"===xa.name())})}},{key:"updateSubmorphProportionalLayoutSettings",value:function(O){var U={};this.target.layout.changeSettingsFor(O.submorph,(U[O.axis]=O.policy,U),!0)}},{key:"onSubmorphSettingsDragStart",value:function(O){var U=this;O.stop();var ra=this.target.layout,xa=ra.settingsFor(this.selectedSubmorph),pa=[],ea;for(ea in xa)pa=[].concat($jscomp.arrayFromIterable(pa),[ea+": ",{fontWeight:"bold"},xa[ea]+" ",{}]);var bb=Jb.morph({type:"label",
fontColor:Jb.Color.white,value:pa,fill:Jb.Color.black.withA(.7),padding:5,borderRadius:10,isLayoutable:!1});bb.wantsToBeDroppedOn=function(Aa){return ra.layoutableSubmorphs.includes(Aa)};bb.onBeingDroppedOn=function(Aa,Rb){bb.remove();if(Aa=ra.layoutableSubmorphs.includes(Rb)?Rb:O.world.morphsContainingPoint(O.hand.position).find(function(Gc){return ra.layoutableSubmorphs.includes(Gc)}))U.updateSubmorphProportionalLayoutSettings({policy:xa.x,axis:"x",submorph:Aa}),U.updateSubmorphProportionalLayoutSettings({policy:xa.y,
axis:"y",submorph:Aa}),Aa.show(),$world.setStatusMessage("layout settings applied")};O.hand.grab(bb);bb.moveBy(Jb.pt(10,10))}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var O=this,U,ra,xa,pa,ea,bb,Aa,Rb,Gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ab){switch(Ab.nextAddress){case 1:return U=O.target.layout.layoutableSubmorphs,O.manageFocus=!0,O.env.eventDispatcher.isKeyPressed("Shift")?(xa=U.map(function(Hc){return{isListItem:!0,string:String(Hc),value:Hc}}),Ab.yield($world.listPrompt("Select morph",
xa,{onSelection:function(Hc){return Hc.show()}}),5)):Ab.yield(Jb.InteractiveMorphSelector.selectMorph(O.world(),O,function(Hc){return U.includes(Hc)}),4);case 4:ra=Ab.yieldResult;Ab.jumpTo(3);break;case 5:pa=Ab.yieldResult,ea=$jscomp.makeIterator(pa.selected),ra=ea.next().value;case 3:O.manageFocus=!1;O.selectedSubmorph=ra;if(!ra)return Ab.return();bb=O.ui;Aa=bb.xAxisPolicyControl;Rb=bb.yAxisPolicyControl;Gc=O.target.layout.settingsFor(ra);Jb.noUpdate(function(){Aa.selection=Gc.x;Rb.selection=Gc.y});
Ab.jumpToEnd()}})}},{key:"showProportionalControl",value:function(O){var U=this.ui;[U.submorphSettingsControl,U.dragmeControl,U.xAxisPolicyControl,U.xAxisPolicyLabel,U.yAxisPolicyControl,U.yAxisPolicyLabel].forEach(function(ra){ra.isLayoutable=O;ra.visible=O})}},{key:"showGridLayoutHalo",value:function(){$world.showLayoutHaloFor(this.target)}},{key:"showGridLayoutControl",value:function(O){var U=this.ui.configureGridLayoutControl;U.visible=U.isLayoutable=O}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ShapeLayoutControl"}},{key:"properties",get:function(){return{managedProps:{get:function(){return[["type","selection",!0],["align","selection"],["direction","selection"],["axis","selection"],["spacing","number"],["auto resize","checked"],["resize submorphs","checked"],["x axis policy","selection",!0],["y axis policy","selection",!0],["react to submorph animations","checked"],["submorph settings",!1,!0],["order by index","checked"],["dragme",!1,!0],["configure grid layout",!1,
!0]]}},ui:{readOnly:!0,get:function(){for(var O={labelContainer:this.getSubmorphNamed("label container"),controlContainer:this.getSubmorphNamed("control container")},U=$jscomp.makeIterator(this.managedProps),ra=U.next();!ra.done;ra=U.next()){var xa=$jscomp.makeIterator(ra.value).next().value;ra=xa+" label";xa+=" control";O[this.join(ra)]=this.getSubmorphNamed(ra);O[this.join(xa)]=this.getSubmorphNamed(xa)}return O}}}}}],sa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeLayoutControl",version:"0.1.1-166"}}},{start:345,end:7771})}(Jb.Morph);sb=Jb.ShapeLayoutControl;Jb.default=sb;var Cb=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js");Cb.Morph=zc;Cb.resource=Nc;Cb.arr=tb;Cb.obj=mb;Cb.string=cb;Cb.Path=$a;Cb.connect=xc;Cb.getMastersMenu=Xa;Cb.resolvedMasters=Gb;sb=function(Bb){var sa=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js"),
Ta=sa.hasOwnProperty("MasterComponentControl")&&"function"===typeof sa.MasterComponentControl?sa.MasterComponentControl:sa.MasterComponentControl=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Ta,Bb,[{key:"focusOn",value:function(O){this.target=O;this.update()}},{key:"onMouseUp",value:function(O){var U=this,ra,xa,pa,ea,bb,Aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rb){if(1==Rb.nextAddress){"auto master selection"==
O.targetMorph.name&&(ra="auto");"hover master selection"==O.targetMorph.name&&(ra="hover");"click master selection"==O.targetMorph.name&&(ra="click");U.refreshButtons();if(!U.target)return Rb.return();xa=$jscomp.makeIterator(["auto","hover","click"]);for(pa=xa.next();!pa.done;pa=xa.next())ea=pa.value,U.target.master&&U.target.master[ea]&&!U.get(ea+" master checkbox").checked&&U.adjustMasterComponent(ea,null);if(!ra)return Rb.jumpTo(0);bb=U;Aa=bb.openMenu;return Rb.yield(U.getMastersMenu(ra),3)}Aa.call(bb,
Rb.yieldResult,O);Rb.jumpToEnd()})}},{key:"getMastersMenu",value:function(O){var U=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ra){return 1==ra.nextAddress?ra.yield(Promise.all([].concat($jscomp.arrayFromIterable(Object.keys(Cb.resolvedMasters)),[U.world().name]).map(function(xa){var pa,ea,bb,Aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rb){return 1==Rb.nextAddress?(ea=(pa=xa==U.world().name)?"This World":xa,bb=U,Aa=bb.componentsToMenu,Rb.yield(Cb.resource("styleguide://"+
xa+"/").dirList(),2)):Rb.return([ea,Aa.call(bb,Rb.yieldResult,O)])})})),2):ra.return(ra.yieldResult)})}},{key:"componentsToMenu",value:function(O,U,ra,xa){var pa=this;ra=void 0===ra?null:ra;xa=void 0===xa?1:xa;ra||(ra=O.map(function(bb){return{name:Cb.arr.last(bb.name.split("/")),path:bb.name.split("/"),value:bb}}));if(0==ra.length||100<xa)return[];var ea=this;return Cb.arr.flatten(Object.entries(Cb.arr.groupBy(ra,function(bb){return bb.path[xa-1]})).map(function(bb){var Aa=$jscomp.makeIterator(bb);
bb=Aa.next().value;Aa=Aa.next().value;var Rb=$jscomp.makeIterator(Cb.arr.partition(Aa,function(Gc){return Gc.path.length<=xa}));Aa=Rb.next().value;Rb=Rb.next().value;bb=[bb,pa.componentsToMenu(null,U,Rb,xa+1)];return[].concat($jscomp.arrayFromIterable(Aa.map(function(Gc){return[Gc.name,function(){ea.adjustMasterComponent(U,Gc.value)}]})),$jscomp.arrayFromIterable(bb[1].length?[bb]:[]))}),1)}},{key:"getComponentSelectionMenu",value:function(O){var U=this,ra,xa,pa,ea,bb,Aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rb){if(1==
Rb.nextAddress)return ra=U.world().metadata.commit.name,xa=Cb.resource("styleguide://"+ra+"/"),Rb.yield(xa.dirList(),2);if(3!=Rb.nextAddress)return pa=Rb.yieldResult,Rb.yield(Cb.resource("styleguide://System/").dirList(),3);ea=Rb.yieldResult;bb=U.componentsToMenu(pa,O);Aa=U.componentsToMenu(ea,O);return Rb.return([].concat($jscomp.arrayFromIterable(0<bb.length?[].concat($jscomp.arrayFromIterable(bb),[{isDivider:!0}]):[]),$jscomp.arrayFromIterable(Aa)))})}},{key:"adjustMasterComponent",value:function(O,
U){if(this.target.master)this.target.master[O]=U;else if(U){var ra={};this.target.master=(ra[O]=U,ra)}O=this.target.master;U=O.hover;ra=O.click;O.auto||U||ra||(this.target.master=null);this.update();this.target.withAllSubmorphsDo(function(xa){return delete xa._parametrizedProps});this.target.requestMasterStyling()}},{key:"componentsToMenu",value:function(O,U,ra,xa){var pa=this;ra=void 0===ra?null:ra;xa=void 0===xa?1:xa;ra||(ra=O.map(function(bb){return{name:Cb.arr.last(bb.name.split("/")),path:bb.name.split("/"),
value:bb}}));if(0==ra.length||100<xa)return[];var ea=this;return Cb.arr.flatten(Object.entries(Cb.arr.groupBy(ra,function(bb){return bb.path[xa-1]})).map(function(bb){var Aa=$jscomp.makeIterator(bb);bb=Aa.next().value;Aa=Aa.next().value;var Rb=$jscomp.makeIterator(Cb.arr.partition(Aa,function(Gc){return Gc.path.length<=xa}));Aa=Rb.next().value;Rb=Rb.next().value;bb=[bb,pa.componentsToMenu(null,U,Rb,xa+1)];return[].concat($jscomp.arrayFromIterable(Aa.map(function(Gc){return[Gc.name,function(){ea.adjustMasterComponent(U,
Gc.value)}]})),$jscomp.arrayFromIterable(bb[1].length?[bb]:[]))}),1)}},{key:"update",value:function(){if(this.target){for(var O=$jscomp.makeIterator(["auto","hover","click"]),U=O.next();!U.done;U=O.next()){U=U.value;var ra=this.getSubmorphNamed(U+" master selection"),xa=this.getSubmorphNamed(U+" master checkbox");Cb.Path(["master",U]).get(this.target)?xa.checked=!0:xa.checked=!1;ra.label=Cb.string.truncateLeft(Cb.Path(["master",U,"name"]).get(this.target)||"select master",15,"...")}this.refreshButtons()}}},
{key:"refreshButtons",value:function(){for(var O=$jscomp.makeIterator(["auto","hover","click"]),U=O.next();!U.done;U=O.next()){U=U.value;var ra=this.getSubmorphNamed(U+" master selection"),xa=this.getSubmorphNamed(U+" master checkbox");ra=ra.deactivated=!xa.checked;this.getSubmorphNamed(U+" master selection").opacity=ra?.5:1}O=this.getSubmorphNamed("overridden props list");O.items=this.getOverriddenProps();this.getSubmorphNamed("clear overridden prop button").deactivated=!O.selection}},{key:"getMasterForTarget",
value:function(){if(this.target.isMorph)return[this.target].concat($jscomp.arrayFromIterable(this.target.ownerChain())).map(function(O){return O.master}).find(Boolean)}},{key:"clearSelectedProperty",value:function(){var O=this.getSubmorphNamed("overridden props list").selection;this.getMasterForTarget().clearOverriddenPropertiesFor(this.target,[O]);this.refreshButtons()}},{key:"getOverriddenProps",value:function(){var O=this.getMasterForTarget();return O&&O._overriddenProps?(O=O._overriddenProps.get(this.target))?
Object.keys(O):[]:[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MasterComponentControl"}}],sa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MasterComponentControl",version:"0.1.1-110"}}},{start:315,end:6250})}(Cb.Morph);sb=Cb.MasterComponentControl;Cb.default=sb}}});