System.register(["./__root_module__-28353364.js"],function(Ia){var mb,vb,Vb,Eb,Jc,Bc,Uc,tc,oc,sc,Tc,Fd,Rd,ee,Dc,rd;return{setters:[function(Ab){mb=Ab.s;vb=Ab.P;Vb=Ab.a;Eb=Ab.v;Jc=Ab.w;Bc=Ab.x;Uc=Ab.y;tc=Ab.r;oc=Ab.z;sc=Ab.A;Tc=Ab.E;Fd=Ab.D;Rd=Ab.F;ee=Ab.G;Dc=Ab.H;rd=Ab.J}],execute:function(){function Ab(xb,hc,Cc,ic){ic=void 0===ic?{}:ic;ic=ic.package||zc.ObjectPackage.lookupModuleForClass(xb.constructor,ic);if(!ic)throw Error("Object is not part of an object package: "+xb);return ic.addScript(xb,
hc,Cc)}function qc(xb,hc){hc=zc.normalizeOptions(hc).System;xb=(xb=xb[Symbol.for("lively-module-meta")])?xb.package.name:null;return(hc=(xb?zc.lookupPackage(hc,xb):{}).pkg)?!!zc.ObjectPackage.forSystemPackage(hc):!1}function Xc(xb,hc){var Cc,ic,Qc,jb,fb,Ob;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Cb){return 1==Cb.nextAddress?(Cc=xb.constructor,zc.withSuperclasses(Cc),Symbol.for("lively-module-meta"),Qc=ic=zc.ObjectPackage.lookupPackageForObject(xb),jb=Qc.baseURL,fb=Qc.System,Cb.yield(ic.fork(hc,
{baseURL:jb,System:fb}),2)):3!=Cb.nextAddress?(Ob=Cb.yieldResult,Cb.yield(zc.adoptObject(xb,Ob.objectClass),3)):Cb.return(Ob.objectClass[Symbol.for("__LivelyClassName__")])})}Ia({addScript:Ab,interactivelyForkPackage:Xc,isObjectClass:qc});var zc=lively.FreezerRuntime.recorderFor("lively.classes/object-classes.js");zc.normalizeOptions=function(xb){xb=Object.assign({baseURL:zc.defaultBaseURL,System:System},xb);xb.baseURL=xb.baseURL.replace(/\/$/,"");return xb};zc.addScript=Ab;zc.isObjectClass=qc;zc.interactivelyForkPackage=
Xc;zc.string=mb;zc.Path=vb;zc.arr=Vb;zc.parse=Eb;zc.isValidIdentifier=Jc;zc.stringify=Bc;zc.parseFunction=Uc;zc.resource=tc;zc.runEval=oc;zc.scripting=sc;zc.ExportLookup=Tc;var ed=zc.scripting;zc.ensurePackage=ed.ensurePackage;zc.registerPackage=ed.registerPackage;zc.importPackage=ed.importPackage;zc.lookupPackage=ed.lookupPackage;zc.module=ed.module;zc.ImportInjector=ed.ImportInjector;zc.RuntimeSourceDescriptor=Fd;zc.toJsIdentifier=Rd;zc.withSuperclasses=ee;zc.adoptObject=Dc;zc.classToFunctionTransform=
rd;zc.objectPackageSym=Symbol.for("lively-object-package-data");zc.defaultBaseURL="local://lively-object-modules";zc.globalClasses=Object.keys(System.global).map(function(xb){xb=System.global[xb];return"function"===typeof xb&&xb.name&&xb}).filter(Boolean);zc.addScript=Ab;zc.addScript=Ab;zc.isObjectClass=qc;zc.isObjectClass=qc;zc._packageStore=zc._packageStore||{};zc.interactivelyForkPackage=Xc;zc.interactivelyForkPackage=Xc;ed=function(xb,hc){this._id=xb;this.options=zc.normalizeOptions(hc)};ed.lookupPackageForObject=
function(xb,hc){return this.lookupPackageForClass(xb.constructor,hc)};ed.lookupPackageForClass=function(xb,hc){hc=zc.normalizeOptions(hc).System;xb=(xb=xb[Symbol.for("lively-module-meta")])?xb.package.name:null;return(hc=(xb?zc.lookupPackage(hc,xb):{}).pkg)?zc.ObjectPackage.forSystemPackage(hc):null};ed.lookupModuleForClass=function(xb,hc){zc.normalizeOptions(hc);hc=this.lookupPackageForClass(xb,hc);xb=xb[Symbol.for("lively-module-meta")];return new zc.ObjectModule(xb.pathInPackage,hc)};ed.forSystemPackage=
function(xb){return this.packageStore[xb.name]};ed.withId=function(xb,hc){return this.packageStore[xb]||(this.packageStore[xb]=new this(xb,hc))};ed.prototype.ensureSubModule=function(xb){xb=void 0===xb?"index":xb;var hc=this,Cc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ic){return 1==ic.nextAddress?(Cc=new zc.ObjectModule(xb,hc),ic.yield(Cc.ensureExistance(),2)):ic.return(Cc)})};ed.prototype.resource=function(xb){xb=void 0===xb?"":xb;return zc.resource(this.packageURL).join(xb)};
ed.prototype.load=function(){return zc.importPackage(this.System,this.packageURL)};ed.prototype.ensureExistance=function(){var xb=this,hc,Cc,ic,Qc,jb,fb,Ob,Cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ob){switch(ob.nextAddress){case 1:return hc=xb.resource("/"),ob.yield(hc.exists(),2);case 2:if(ob.yieldResult)return ob.return();Cc=[{resource:hc}];ic=[{resource:xb.resource("package.json"),content:JSON.stringify(xb.config,null,2)}];return ob.yield(Promise.all(Cc.map(function(bc){return bc.resource.mkdir()})),
3);case 3:return ob.yield(Promise.all(ic.map(function(bc){var Ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Db){switch(Db.nextAddress){case 1:return Db.yield(bc.resource.exists(),2);case 2:if(!(Ma=!Db.yieldResult)){Db.jumpTo(3);break}return Db.yield(bc.resource.write(bc.content),4);case 4:Ma=Db.yieldResult;case 3:return Db.return(Ma)}})})),4);case 4:return ob.yield(xb.objectModule.ensureExistance(),5);case 5:return Qc=xb,jb=Qc.System,fb=Qc.packageURL,Ob=Qc.config,ob.yield(zc.ensurePackage(jb,
fb),6);case 6:return Cb=ob.yieldResult,Cb.registerWithConfig(Ob),console.log(xb.packageURL+" REGISTERED"),ob.return(xb)}})};ed.prototype.ensureObjectClass=function(xb){var hc=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Cc){return 1==Cc.nextAddress?Cc.yield(hc.ensureExistance(),2):Cc.return(hc.objectModule.ensureObjectClass(xb))})};ed.prototype.adoptObject=function(xb){var hc=this,Cc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ic){if(1==ic.nextAddress)return hc.objectClass===
xb.constructor?ic.return():ic.yield(hc.ensureObjectClass(xb.constructor),2);Cc=ic.yieldResult;zc.adoptObject(xb,Cc);ic.jumpToEnd()})};ed.prototype.addScript=function(xb,hc,Cc){return this.objectModule.addScript(xb,hc,Cc)};ed.prototype.remove=function(){this.systemPackage.remove();delete zc.ObjectPackage.packageStore[this.id];return this.resource().remove()};ed.prototype.renameObjectClass=function(xb,hc){hc=void 0===hc?[]:hc;var Cc=this,ic,Qc,jb,fb,Ob,Cb,ob,bc,Ma,Db,gb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(zb){if(1==
zb.nextAddress){ic=Cc;Qc=ic.objectClass;jb=ic.System;if(!Qc||Qc[Symbol.for("__LivelyClassName__")]===xb)return zb.return(Qc);if(!zc.isValidIdentifier(xb))throw Error(xb+" is not a valid name for a class");Ob=fb=zc.RuntimeSourceDescriptor.for(Qc,jb);Cb=Ob.source;ob=Ob.ast;bc=ob.id;Ma=bc.start;Db=bc.end;return zb.yield(fb.changeSource(Cb.slice(0,Ma)+xb+Cb.slice(Db)),2)}gb=Cc.objectClass;hc.forEach(function(ec){ec.constructor=gb;ec.__proto__=gb.prototype});return zb.return(gb)})};ed.prototype.fork=function(xb,
hc){var Cc=this,ic,Qc,jb,fb,Ob,Cb,ob,bc,Ma,Db,gb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(zb){switch(zb.nextAddress){case 1:return ic=Cc,Qc=ic.System,jb=ic.baseURL,fb=ic.objectClass,hc=Object.assign({System:Qc,baseURL:jb},hc),Ob=zc.RuntimeSourceDescriptor.for(fb),Cb=Ob._renamedSource(xb),ob=Cb.moduleSource,bc=zc.ObjectPackage.withId(xb,hc),zb.yield(bc.ensureExistance(),2);case 2:return Ma=bc,Db=Ma.objectModule,gb=Db.systemModule,zb.yield(gb.load({format:"esm"}),3);case 3:return zb.yield(gb.changeSource(ob),
4);case 4:return zb.return(bc)}})};$jscomp.global.Object.defineProperties(ed.prototype,{id:{configurable:!0,enumerable:!0,get:function(){return this._id}},name:{configurable:!0,enumerable:!0,get:function(){return this.id}},System:{configurable:!0,enumerable:!0,get:function(){return this.options.System}},baseURL:{configurable:!0,enumerable:!0,get:function(){return this.options.baseURL}},packageURL:{configurable:!0,enumerable:!0,get:function(){return this.baseURL+("/"+this.id)}},config:{configurable:!0,
enumerable:!0,get:function(){return{name:this.name,version:"0.1.0",lively:{isObjectPackage:!0}}}},systemPackage:{configurable:!0,enumerable:!0,get:function(){return zc.lookupPackage(this.System,this.packageURL,!0).pkg}},objectModule:{configurable:!0,enumerable:!0,get:function(){return this._objectModule||(this._objectModule=new zc.ObjectModule("index.js",this))}},objectClass:{configurable:!0,enumerable:!0,get:function(){return this.objectModule.objectClass}}});$jscomp.global.Object.defineProperties(ed,
{packageStore:{configurable:!0,enumerable:!0,get:function(){return this._packageStore||(this._packageStore=zc._packageStore)}}});Ia("default",ed);zc.ObjectPackage=ed;var wd=function(xb,hc){if(!xb)throw Error("ObjectModule needs package!");if(!hc)throw Error("ObjectModule needs package!");this._moduleName=xb;this._objectPackage=hc};wd.prototype.read=function(){return this.resource.read()};wd.prototype.write=function(xb){return this.resource.write(xb)};wd.prototype.ensureExistance=function(){var xb=
this,hc,Cc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ic){switch(ic.nextAddress){case 1:return hc=xb.resource,ic.yield(hc.exists(),2);case 2:if(ic.yieldResult){ic.jumpTo(3);break}return ic.yield(hc.write("'format esm';\n"),4);case 4:Cc={},xb.System.config({meta:(Cc[xb.url]={format:"esm"},Cc)});case 3:return ic.return(xb)}})};wd.prototype.adoptObject=function(xb,hc){var Cc=this,ic;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qc){if(1==Qc.nextAddress)return Cc.objectClass===
xb.constructor?Qc.return():Qc.yield(Cc.ensureObjectClass(xb.constructor,hc),2);ic=Qc.yieldResult;zc.adoptObject(xb,ic);Qc.jumpToEnd()})};wd.prototype.ensureObjectClass=function(xb,hc){var Cc=this,ic=this.objectClass;return ic&&ic.prototype.__proto__===xb.prototype?ic:Promise.resolve(this.ensureObjectClassSource(xb,hc)).then(function(Qc){var jb=Qc.source,fb=Qc.moduleId,Ob=Qc.className,Cb=Qc.bindings,ob=Cc.System;Qc=zc.module(ob,fb);if(Cb)for(var bc in Cb)Qc.define(bc,Cb[bc]);jb=zc.runEval(jb,{classTransform:zc.classToFunctionTransform,
sync:!0,targetModule:fb,System:ob});if(jb.isError)throw jb.value;jb=Qc.recorder[Ob];if(!jb)throw Error("Failed to define class "+Ob+" in "+fb);return jb})};wd.prototype.ensureObjectClassSource=function(xb,hc){return this.createDefaultClassDeclaration(xb,hc)};wd.prototype.createDefaultClassDeclaration=function(xb,hc){xb=void 0===xb?Object:xb;hc=void 0===hc?!1:hc;var Cc=this,ic,Qc,jb,fb,Ob,Cb,ob,bc,Ma,Db,gb,zb,ec,rc,Qb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Lb){switch(Lb.nextAddress){case 1:ic=
Cc;Qc=ic.System;jb=ic.systemModule;fb=ic.objectPackage;hc=hc||zc.string.capitalize(zc.toJsIdentifier(fb.id));Ob=xb[Symbol.for("__LivelyClassName__")];Cb=!Ob;ob=zc.globalClasses.includes(xb);bc="";Ma=null;if(Cb){Ob="__anonymous_superclass__";Db={};Ma=(Db[Ob]=xb,Db);Lb.jumpTo(2);break}if(ob){Lb.jumpTo(2);break}return Lb.yield(zc.ExportLookup.findExportOfValue(xb,Qc),4);case 4:(gb=Lb.yieldResult)?(zb=zc.ImportInjector.run(Qc,jb.id,jb.package(),"",gb),ec=zb.standaloneImport,bc+=ec+"\n\n"):(rc={},Ma=(rc[Ob]=
xb,rc));case 2:return hc===Ob&&(hc="Object"+hc),Qb="Object"===Ob?"class "+hc+" {}\n":"class "+hc+" extends "+Ob+" {}\n",bc+="export default "+Qb+"\n",Lb.yield(jb.changeSource(bc),5);case 5:return Lb.yield(jb.load(),6);case 6:return Lb.return({source:bc,className:hc,moduleId:Cc.url,bindings:Ma})}})};wd.prototype.addScript=function(xb,hc,Cc){var ic=this,Qc,jb,fb,Ob,Cb,ob,bc,Ma,Db,gb,zb,ec,rc,Qb,Lb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kb){switch(Kb.nextAddress){case 1:if(xb.constructor===
ic.objectClass){Qc=xb.constructor;Kb.jumpTo(2);break}return Kb.yield(ic.ensureObjectClass(xb.constructor),3);case 3:Qc=Kb.yieldResult;case 2:jb=Qc;fb="function"===typeof hc?String(hc):hc;Ob=zc.parseFunction(fb);Cb=zc.RuntimeSourceDescriptor.for(jb,ic.System);Cc||(Cc=zc.Path("id.name").get(Ob));if(!Cc)throw Error("No name, cannot add "+zc.string.truncate(fb,30).replace(/\n/g,"")+"!");ob=zc.toJsIdentifier(Cc);console.assert("FunctionExpression"===Ob.type||"ArrowFunctionExpression"===Ob.type,"not a function expression but: "+
Ob.type);bc=Ob.params.map(function(za){return fb.slice(za.start,za.end)});Ma="BlockStatement"===Ob.body.type?fb.slice(Ob.body.start,Ob.body.end):"{ return "+fb.slice(Ob.body.start,Ob.body.end)+" }";Db=ob+"("+bc.join(",")+") "+Ma;"ArrowFunctionExpression"===Ob.type&&(Ob.type="FunctionExpression");gb=Cb.source;zb=Cb.ast;if(!zb)throw Error("cannot find class decl of "+Cb.module.id);(ec=zb.body.body.find(function(za){return za.key.name===ob&&!za.static}))?gb=gb.slice(0,ec.start)+Db+gb.slice(ec.end):(rc=
gb.lastIndexOf("}"),Qb=gb.slice(0,rc),Lb=gb.slice(rc),/\n\s*$/m.test(Qb)||(Qb+="\n"),Db=zc.string.changeIndent(Db,"  ",1),/^[ ]*\n/m.test(Lb)||(Lb="\n"+Lb),gb=Qb+Db+Lb);return Kb.yield(Cb.changeSource(gb),4);case 4:return Kb.return({script:jb.prototype[ob],klass:jb,module:Cb.module.id,methodName:ob})}})};$jscomp.global.Object.defineProperties(wd.prototype,{objectPackage:{configurable:!0,enumerable:!0,get:function(){return this._objectPackage}},objectClass:{configurable:!0,enumerable:!0,get:function(){var xb=
this.systemModule;return xb.isLoaded()?xb.System.get(xb.id).default:null}},moduleName:{configurable:!0,enumerable:!0,get:function(){return this._moduleName}},systemModule:{configurable:!0,enumerable:!0,get:function(){return zc.module(this.System,this.url)}},System:{configurable:!0,enumerable:!0,get:function(){return this.objectPackage.System}},resource:{configurable:!0,enumerable:!0,get:function(){return this.objectPackage.resource(this.moduleName)}},url:{configurable:!0,enumerable:!0,get:function(){return this.resource.url}}});
zc.ObjectModule=wd;zc.default=ed}}});